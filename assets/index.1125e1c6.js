(function(){const ue=document.createElement("link").relList;if(ue&&ue.supports&&ue.supports("modulepreload"))return;for(const V of document.querySelectorAll('link[rel="modulepreload"]'))N(V);new MutationObserver(V=>{for(const y of V)if(y.type==="childList")for(const c of y.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&N(c)}).observe(document,{childList:!0,subtree:!0});function t(V){const y={};return V.integrity&&(y.integrity=V.integrity),V.referrerpolicy&&(y.referrerPolicy=V.referrerpolicy),V.crossorigin==="use-credentials"?y.credentials="include":V.crossorigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function N(V){if(V.ep)return;V.ep=!0;const y=t(V);fetch(V.href,y)}})();function lg(se,ue){const t=Object.create(null),N=se.split(",");for(let V=0;V<N.length;V++)t[N[V]]=!0;return ue?V=>!!t[V.toLowerCase()]:V=>!!t[V]}function pd(se){if(Si(se)){const ue={};for(let t=0;t<se.length;t++){const N=se[t],V=Ds(N)?Fw(N):pd(N);if(V)for(const y in V)ue[y]=V[y]}return ue}else{if(Ds(se))return se;if(Jo(se))return se}}const Dw=/;(?![^(]*\))/g,Rw=/:([^]+)/,Iw=/\/\*.*?\*\//gs;function Fw(se){const ue={};return se.replace(Iw,"").split(Dw).forEach(t=>{if(t){const N=t.split(Rw);N.length>1&&(ue[N[0].trim()]=N[1].trim())}}),ue}function sh(se){let ue="";if(Ds(se))ue=se;else if(Si(se))for(let t=0;t<se.length;t++){const N=sh(se[t]);N&&(ue+=N+" ")}else if(Jo(se))for(const t in se)se[t]&&(ue+=t+" ");return ue.trim()}function bc(se){if(!se)return null;let{class:ue,style:t}=se;return ue&&!Ds(ue)&&(se.class=sh(ue)),t&&(se.style=pd(t)),se}const zw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ow=lg(zw);function P1(se){return!!se||se===""}const N0=se=>Ds(se)?se:se==null?"":Si(se)||Jo(se)&&(se.toString===F1||!ji(se.toString))?JSON.stringify(se,D1,2):String(se),D1=(se,ue)=>ue&&ue.__v_isRef?D1(se,ue.value):Kh(ue)?{[`Map(${ue.size})`]:[...ue.entries()].reduce((t,[N,V])=>(t[`${N} =>`]=V,t),{})}:R1(ue)?{[`Set(${ue.size})`]:[...ue.values()]}:Jo(ue)&&!Si(ue)&&!z1(ue)?String(ue):ue,Ko={},Zh=[],Mc=()=>{},Nw=()=>!1,Bw=/^on[^a-z]/,dd=se=>Bw.test(se),ug=se=>se.startsWith("onUpdate:"),kl=Object.assign,cg=(se,ue)=>{const t=se.indexOf(ue);t>-1&&se.splice(t,1)},Uw=Object.prototype.hasOwnProperty,vo=(se,ue)=>Uw.call(se,ue),Si=Array.isArray,Kh=se=>gd(se)==="[object Map]",R1=se=>gd(se)==="[object Set]",ji=se=>typeof se=="function",Ds=se=>typeof se=="string",fg=se=>typeof se=="symbol",Jo=se=>se!==null&&typeof se=="object",I1=se=>Jo(se)&&ji(se.then)&&ji(se.catch),F1=Object.prototype.toString,gd=se=>F1.call(se),Vw=se=>gd(se).slice(8,-1),z1=se=>gd(se)==="[object Object]",hg=se=>Ds(se)&&se!=="NaN"&&se[0]!=="-"&&""+parseInt(se,10)===se,Kp=lg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yd=se=>{const ue=Object.create(null);return t=>ue[t]||(ue[t]=se(t))},Hw=/-(\w)/g,Vc=yd(se=>se.replace(Hw,(ue,t)=>t?t.toUpperCase():"")),Gw=/\B([A-Z])/g,lv=yd(se=>se.replace(Gw,"-$1").toLowerCase()),md=yd(se=>se.charAt(0).toUpperCase()+se.slice(1)),Jp=yd(se=>se?`on${md(se)}`:""),Kv=(se,ue)=>!Object.is(se,ue),p0=(se,ue)=>{for(let t=0;t<se.length;t++)se[t](ue)},rd=(se,ue,t)=>{Object.defineProperty(se,ue,{configurable:!0,enumerable:!1,value:t})},vg=se=>{const ue=parseFloat(se);return isNaN(ue)?se:ue};let sm;const Yw=()=>sm||(sm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Hu;class O1{constructor(ue=!1){this.detached=ue,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Hu,!ue&&Hu&&(this.index=(Hu.scopes||(Hu.scopes=[])).push(this)-1)}run(ue){if(this.active){const t=Hu;try{return Hu=this,ue()}finally{Hu=t}}}on(){Hu=this}off(){Hu=this.parent}stop(ue){if(this.active){let t,N;for(t=0,N=this.effects.length;t<N;t++)this.effects[t].stop();for(t=0,N=this.cleanups.length;t<N;t++)this.cleanups[t]();if(this.scopes)for(t=0,N=this.scopes.length;t<N;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!ue){const V=this.parent.scopes.pop();V&&V!==this&&(this.parent.scopes[this.index]=V,V.index=this.index)}this.parent=void 0,this.active=!1}}}function N1(se){return new O1(se)}function Ww(se,ue=Hu){ue&&ue.active&&ue.effects.push(se)}function Xw(){return Hu}function jw(se){Hu&&Hu.cleanups.push(se)}const pg=se=>{const ue=new Set(se);return ue.w=0,ue.n=0,ue},B1=se=>(se.w&kf)>0,U1=se=>(se.n&kf)>0,Zw=({deps:se})=>{if(se.length)for(let ue=0;ue<se.length;ue++)se[ue].w|=kf},Kw=se=>{const{deps:ue}=se;if(ue.length){let t=0;for(let N=0;N<ue.length;N++){const V=ue[N];B1(V)&&!U1(V)?V.delete(se):ue[t++]=V,V.w&=~kf,V.n&=~kf}ue.length=t}},B0=new WeakMap;let Vv=0,kf=1;const U0=30;let Tc;const ah=Symbol(""),V0=Symbol("");class dg{constructor(ue,t=null,N){this.fn=ue,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,Ww(this,N)}run(){if(!this.active)return this.fn();let ue=Tc,t=Mf;for(;ue;){if(ue===this)return;ue=ue.parent}try{return this.parent=Tc,Tc=this,Mf=!0,kf=1<<++Vv,Vv<=U0?Zw(this):lm(this),this.fn()}finally{Vv<=U0&&Kw(this),kf=1<<--Vv,Tc=this.parent,Mf=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Tc===this?this.deferStop=!0:this.active&&(lm(this),this.onStop&&this.onStop(),this.active=!1)}}function lm(se){const{deps:ue}=se;if(ue.length){for(let t=0;t<ue.length;t++)ue[t].delete(se);ue.length=0}}let Mf=!0;const V1=[];function uv(){V1.push(Mf),Mf=!1}function cv(){const se=V1.pop();Mf=se===void 0?!0:se}function Gu(se,ue,t){if(Mf&&Tc){let N=B0.get(se);N||B0.set(se,N=new Map);let V=N.get(t);V||N.set(t,V=pg()),H1(V)}}function H1(se,ue){let t=!1;Vv<=U0?U1(se)||(se.n|=kf,t=!B1(se)):t=!se.has(Tc),t&&(se.add(Tc),Tc.deps.push(se))}function ef(se,ue,t,N,V,y){const c=B0.get(se);if(!c)return;let A=[];if(ue==="clear")A=[...c.values()];else if(t==="length"&&Si(se)){const T=vg(N);c.forEach((e,a)=>{(a==="length"||a>=T)&&A.push(e)})}else switch(t!==void 0&&A.push(c.get(t)),ue){case"add":Si(se)?hg(t)&&A.push(c.get("length")):(A.push(c.get(ah)),Kh(se)&&A.push(c.get(V0)));break;case"delete":Si(se)||(A.push(c.get(ah)),Kh(se)&&A.push(c.get(V0)));break;case"set":Kh(se)&&A.push(c.get(ah));break}if(A.length===1)A[0]&&H0(A[0]);else{const T=[];for(const e of A)e&&T.push(...e);H0(pg(T))}}function H0(se,ue){const t=Si(se)?se:[...se];for(const N of t)N.computed&&um(N);for(const N of t)N.computed||um(N)}function um(se,ue){(se!==Tc||se.allowRecurse)&&(se.scheduler?se.scheduler():se.run())}const Jw=lg("__proto__,__v_isRef,__isVue"),G1=new Set(Object.getOwnPropertyNames(Symbol).filter(se=>se!=="arguments"&&se!=="caller").map(se=>Symbol[se]).filter(fg)),$w=gg(),Qw=gg(!1,!0),qw=gg(!0),cm=e3();function e3(){const se={};return["includes","indexOf","lastIndexOf"].forEach(ue=>{se[ue]=function(...t){const N=xo(this);for(let y=0,c=this.length;y<c;y++)Gu(N,"get",y+"");const V=N[ue](...t);return V===-1||V===!1?N[ue](...t.map(xo)):V}}),["push","pop","shift","unshift","splice"].forEach(ue=>{se[ue]=function(...t){uv();const N=xo(this)[ue].apply(this,t);return cv(),N}}),se}function gg(se=!1,ue=!1){return function(N,V,y){if(V==="__v_isReactive")return!se;if(V==="__v_isReadonly")return se;if(V==="__v_isShallow")return ue;if(V==="__v_raw"&&y===(se?ue?g3:Z1:ue?j1:X1).get(N))return N;const c=Si(N);if(!se&&c&&vo(cm,V))return Reflect.get(cm,V,y);const A=Reflect.get(N,V,y);return(fg(V)?G1.has(V):Jw(V))||(se||Gu(N,"get",V),ue)?A:Ps(A)?c&&hg(V)?A:A.value:Jo(A)?se?K1(A):bd(A):A}}const t3=Y1(),r3=Y1(!0);function Y1(se=!1){return function(t,N,V,y){let c=t[N];if(Qh(c)&&Ps(c)&&!Ps(V))return!1;if(!se&&(!nd(V)&&!Qh(V)&&(c=xo(c),V=xo(V)),!Si(t)&&Ps(c)&&!Ps(V)))return c.value=V,!0;const A=Si(t)&&hg(N)?Number(N)<t.length:vo(t,N),T=Reflect.set(t,N,V,y);return t===xo(y)&&(A?Kv(V,c)&&ef(t,"set",N,V):ef(t,"add",N,V)),T}}function n3(se,ue){const t=vo(se,ue);se[ue];const N=Reflect.deleteProperty(se,ue);return N&&t&&ef(se,"delete",ue,void 0),N}function a3(se,ue){const t=Reflect.has(se,ue);return(!fg(ue)||!G1.has(ue))&&Gu(se,"has",ue),t}function i3(se){return Gu(se,"iterate",Si(se)?"length":ah),Reflect.ownKeys(se)}const W1={get:$w,set:t3,deleteProperty:n3,has:a3,ownKeys:i3},o3={get:qw,set(se,ue){return!0},deleteProperty(se,ue){return!0}},s3=kl({},W1,{get:Qw,set:r3}),yg=se=>se,xd=se=>Reflect.getPrototypeOf(se);function Fp(se,ue,t=!1,N=!1){se=se.__v_raw;const V=xo(se),y=xo(ue);t||(ue!==y&&Gu(V,"get",ue),Gu(V,"get",y));const{has:c}=xd(V),A=N?yg:t?bg:Jv;if(c.call(V,ue))return A(se.get(ue));if(c.call(V,y))return A(se.get(y));se!==V&&se.get(ue)}function zp(se,ue=!1){const t=this.__v_raw,N=xo(t),V=xo(se);return ue||(se!==V&&Gu(N,"has",se),Gu(N,"has",V)),se===V?t.has(se):t.has(se)||t.has(V)}function Op(se,ue=!1){return se=se.__v_raw,!ue&&Gu(xo(se),"iterate",ah),Reflect.get(se,"size",se)}function fm(se){se=xo(se);const ue=xo(this);return xd(ue).has.call(ue,se)||(ue.add(se),ef(ue,"add",se,se)),this}function hm(se,ue){ue=xo(ue);const t=xo(this),{has:N,get:V}=xd(t);let y=N.call(t,se);y||(se=xo(se),y=N.call(t,se));const c=V.call(t,se);return t.set(se,ue),y?Kv(ue,c)&&ef(t,"set",se,ue):ef(t,"add",se,ue),this}function vm(se){const ue=xo(this),{has:t,get:N}=xd(ue);let V=t.call(ue,se);V||(se=xo(se),V=t.call(ue,se)),N&&N.call(ue,se);const y=ue.delete(se);return V&&ef(ue,"delete",se,void 0),y}function pm(){const se=xo(this),ue=se.size!==0,t=se.clear();return ue&&ef(se,"clear",void 0,void 0),t}function Np(se,ue){return function(N,V){const y=this,c=y.__v_raw,A=xo(c),T=ue?yg:se?bg:Jv;return!se&&Gu(A,"iterate",ah),c.forEach((e,a)=>N.call(V,T(e),T(a),y))}}function Bp(se,ue,t){return function(...N){const V=this.__v_raw,y=xo(V),c=Kh(y),A=se==="entries"||se===Symbol.iterator&&c,T=se==="keys"&&c,e=V[se](...N),a=t?yg:ue?bg:Jv;return!ue&&Gu(y,"iterate",T?V0:ah),{next(){const{value:i,done:n}=e.next();return n?{value:i,done:n}:{value:A?[a(i[0]),a(i[1])]:a(i),done:n}},[Symbol.iterator](){return this}}}}function mf(se){return function(...ue){return se==="delete"?!1:this}}function l3(){const se={get(y){return Fp(this,y)},get size(){return Op(this)},has:zp,add:fm,set:hm,delete:vm,clear:pm,forEach:Np(!1,!1)},ue={get(y){return Fp(this,y,!1,!0)},get size(){return Op(this)},has:zp,add:fm,set:hm,delete:vm,clear:pm,forEach:Np(!1,!0)},t={get(y){return Fp(this,y,!0)},get size(){return Op(this,!0)},has(y){return zp.call(this,y,!0)},add:mf("add"),set:mf("set"),delete:mf("delete"),clear:mf("clear"),forEach:Np(!0,!1)},N={get(y){return Fp(this,y,!0,!0)},get size(){return Op(this,!0)},has(y){return zp.call(this,y,!0)},add:mf("add"),set:mf("set"),delete:mf("delete"),clear:mf("clear"),forEach:Np(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{se[y]=Bp(y,!1,!1),t[y]=Bp(y,!0,!1),ue[y]=Bp(y,!1,!0),N[y]=Bp(y,!0,!0)}),[se,t,ue,N]}const[u3,c3,f3,h3]=l3();function mg(se,ue){const t=ue?se?h3:f3:se?c3:u3;return(N,V,y)=>V==="__v_isReactive"?!se:V==="__v_isReadonly"?se:V==="__v_raw"?N:Reflect.get(vo(t,V)&&V in N?t:N,V,y)}const v3={get:mg(!1,!1)},p3={get:mg(!1,!0)},d3={get:mg(!0,!1)},X1=new WeakMap,j1=new WeakMap,Z1=new WeakMap,g3=new WeakMap;function y3(se){switch(se){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function m3(se){return se.__v_skip||!Object.isExtensible(se)?0:y3(Vw(se))}function bd(se){return Qh(se)?se:xg(se,!1,W1,v3,X1)}function x3(se){return xg(se,!1,s3,p3,j1)}function K1(se){return xg(se,!0,o3,d3,Z1)}function xg(se,ue,t,N,V){if(!Jo(se)||se.__v_raw&&!(ue&&se.__v_isReactive))return se;const y=V.get(se);if(y)return y;const c=m3(se);if(c===0)return se;const A=new Proxy(se,c===2?N:t);return V.set(se,A),A}function Ef(se){return Qh(se)?Ef(se.__v_raw):!!(se&&se.__v_isReactive)}function Qh(se){return!!(se&&se.__v_isReadonly)}function nd(se){return!!(se&&se.__v_isShallow)}function J1(se){return Ef(se)||Qh(se)}function xo(se){const ue=se&&se.__v_raw;return ue?xo(ue):se}function qh(se){return rd(se,"__v_skip",!0),se}const Jv=se=>Jo(se)?bd(se):se,bg=se=>Jo(se)?K1(se):se;function $1(se){Mf&&Tc&&(se=xo(se),H1(se.dep||(se.dep=pg())))}function Q1(se,ue){se=xo(se),se.dep&&H0(se.dep)}function Ps(se){return!!(se&&se.__v_isRef===!0)}function Af(se){return b3(se,!1)}function b3(se,ue){return Ps(se)?se:new _3(se,ue)}class _3{constructor(ue,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?ue:xo(ue),this._value=t?ue:Jv(ue)}get value(){return $1(this),this._value}set value(ue){const t=this.__v_isShallow||nd(ue)||Qh(ue);ue=t?ue:xo(ue),Kv(ue,this._rawValue)&&(this._rawValue=ue,this._value=t?ue:Jv(ue),Q1(this))}}function ad(se){return Ps(se)?se.value:se}const w3={get:(se,ue,t)=>ad(Reflect.get(se,ue,t)),set:(se,ue,t,N)=>{const V=se[ue];return Ps(V)&&!Ps(t)?(V.value=t,!0):Reflect.set(se,ue,t,N)}};function q1(se){return Ef(se)?se:new Proxy(se,w3)}function T3(se){const ue=Si(se)?new Array(se.length):{};for(const t in se)ue[t]=M3(se,t);return ue}class A3{constructor(ue,t,N){this._object=ue,this._key=t,this._defaultValue=N,this.__v_isRef=!0}get value(){const ue=this._object[this._key];return ue===void 0?this._defaultValue:ue}set value(ue){this._object[this._key]=ue}}function M3(se,ue,t){const N=se[ue];return Ps(N)?N:new A3(se,ue,t)}var ex;class E3{constructor(ue,t,N,V){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[ex]=!1,this._dirty=!0,this.effect=new dg(ue,()=>{this._dirty||(this._dirty=!0,Q1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!V,this.__v_isReadonly=N}get value(){const ue=xo(this);return $1(ue),(ue._dirty||!ue._cacheable)&&(ue._dirty=!1,ue._value=ue.effect.run()),ue._value}set value(ue){this._setter(ue)}}ex="__v_isReadonly";function S3(se,ue,t=!1){let N,V;const y=ji(se);return y?(N=se,V=Mc):(N=se.get,V=se.set),new E3(N,V,y||!V,t)}function Sf(se,ue,t,N){let V;try{V=N?se(...N):se()}catch(y){_d(y,ue,t)}return V}function oc(se,ue,t,N){if(ji(se)){const y=Sf(se,ue,t,N);return y&&I1(y)&&y.catch(c=>{_d(c,ue,t)}),y}const V=[];for(let y=0;y<se.length;y++)V.push(oc(se[y],ue,t,N));return V}function _d(se,ue,t,N=!0){const V=ue?ue.vnode:null;if(ue){let y=ue.parent;const c=ue.proxy,A=t;for(;y;){const e=y.ec;if(e){for(let a=0;a<e.length;a++)if(e[a](se,c,A)===!1)return}y=y.parent}const T=ue.appContext.config.errorHandler;if(T){Sf(T,null,10,[se,c,A]);return}}k3(se,t,V,N)}function k3(se,ue,t,N=!0){console.error(se)}let $v=!1,G0=!1;const Yl=[];let Nc=0;const Jh=[];let Kc=null,Qf=0;const tx=Promise.resolve();let _g=null;function rx(se){const ue=_g||tx;return se?ue.then(this?se.bind(this):se):ue}function C3(se){let ue=Nc+1,t=Yl.length;for(;ue<t;){const N=ue+t>>>1;Qv(Yl[N])<se?ue=N+1:t=N}return ue}function wg(se){(!Yl.length||!Yl.includes(se,$v&&se.allowRecurse?Nc+1:Nc))&&(se.id==null?Yl.push(se):Yl.splice(C3(se.id),0,se),nx())}function nx(){!$v&&!G0&&(G0=!0,_g=tx.then(ix))}function L3(se){const ue=Yl.indexOf(se);ue>Nc&&Yl.splice(ue,1)}function P3(se){Si(se)?Jh.push(...se):(!Kc||!Kc.includes(se,se.allowRecurse?Qf+1:Qf))&&Jh.push(se),nx()}function dm(se,ue=$v?Nc+1:0){for(;ue<Yl.length;ue++){const t=Yl[ue];t&&t.pre&&(Yl.splice(ue,1),ue--,t())}}function ax(se){if(Jh.length){const ue=[...new Set(Jh)];if(Jh.length=0,Kc){Kc.push(...ue);return}for(Kc=ue,Kc.sort((t,N)=>Qv(t)-Qv(N)),Qf=0;Qf<Kc.length;Qf++)Kc[Qf]();Kc=null,Qf=0}}const Qv=se=>se.id==null?1/0:se.id,D3=(se,ue)=>{const t=Qv(se)-Qv(ue);if(t===0){if(se.pre&&!ue.pre)return-1;if(ue.pre&&!se.pre)return 1}return t};function ix(se){G0=!1,$v=!0,Yl.sort(D3);const ue=Mc;try{for(Nc=0;Nc<Yl.length;Nc++){const t=Yl[Nc];t&&t.active!==!1&&Sf(t,null,14)}}finally{Nc=0,Yl.length=0,ax(),$v=!1,_g=null,(Yl.length||Jh.length)&&ix()}}function R3(se,ue,...t){if(se.isUnmounted)return;const N=se.vnode.props||Ko;let V=t;const y=ue.startsWith("update:"),c=y&&ue.slice(7);if(c&&c in N){const a=`${c==="modelValue"?"model":c}Modifiers`,{number:i,trim:n}=N[a]||Ko;n&&(V=t.map(r=>Ds(r)?r.trim():r)),i&&(V=t.map(vg))}let A,T=N[A=Jp(ue)]||N[A=Jp(Vc(ue))];!T&&y&&(T=N[A=Jp(lv(ue))]),T&&oc(T,se,6,V);const e=N[A+"Once"];if(e){if(!se.emitted)se.emitted={};else if(se.emitted[A])return;se.emitted[A]=!0,oc(e,se,6,V)}}function ox(se,ue,t=!1){const N=ue.emitsCache,V=N.get(se);if(V!==void 0)return V;const y=se.emits;let c={},A=!1;if(!ji(se)){const T=e=>{const a=ox(e,ue,!0);a&&(A=!0,kl(c,a))};!t&&ue.mixins.length&&ue.mixins.forEach(T),se.extends&&T(se.extends),se.mixins&&se.mixins.forEach(T)}return!y&&!A?(Jo(se)&&N.set(se,null),null):(Si(y)?y.forEach(T=>c[T]=null):kl(c,y),Jo(se)&&N.set(se,c),c)}function wd(se,ue){return!se||!dd(ue)?!1:(ue=ue.slice(2).replace(/Once$/,""),vo(se,ue[0].toLowerCase()+ue.slice(1))||vo(se,lv(ue))||vo(se,ue))}let Sl=null,sx=null;function id(se){const ue=Sl;return Sl=se,sx=se&&se.type.__scopeId||null,ue}function lx(se,ue=Sl,t){if(!ue||se._n)return se;const N=(...V)=>{N._d&&Em(-1);const y=id(ue);let c;try{c=se(...V)}finally{id(y),N._d&&Em(1)}return c};return N._n=!0,N._c=!0,N._d=!0,N}function d0(se){const{type:ue,vnode:t,proxy:N,withProxy:V,props:y,propsOptions:[c],slots:A,attrs:T,emit:e,render:a,renderCache:i,data:n,setupState:r,ctx:v,inheritAttrs:s}=se;let o,b;const g=id(se);try{if(t.shapeFlag&4){const f=V||N;o=Oc(a.call(f,f,i,y,r,n,v)),b=T}else{const f=ue;o=Oc(f.length>1?f(y,{attrs:T,slots:A,emit:e}):f(y,null)),b=ue.props?T:I3(T)}}catch(f){Wv.length=0,_d(f,se,1),o=Js(sc)}let d=o;if(b&&s!==!1){const f=Object.keys(b),{shapeFlag:m}=d;f.length&&m&7&&(c&&f.some(ug)&&(b=F3(b,c)),d=Cf(d,b))}return t.dirs&&(d=Cf(d),d.dirs=d.dirs?d.dirs.concat(t.dirs):t.dirs),t.transition&&(d.transition=t.transition),o=d,id(g),o}const I3=se=>{let ue;for(const t in se)(t==="class"||t==="style"||dd(t))&&((ue||(ue={}))[t]=se[t]);return ue},F3=(se,ue)=>{const t={};for(const N in se)(!ug(N)||!(N.slice(9)in ue))&&(t[N]=se[N]);return t};function z3(se,ue,t){const{props:N,children:V,component:y}=se,{props:c,children:A,patchFlag:T}=ue,e=y.emitsOptions;if(ue.dirs||ue.transition)return!0;if(t&&T>=0){if(T&1024)return!0;if(T&16)return N?gm(N,c,e):!!c;if(T&8){const a=ue.dynamicProps;for(let i=0;i<a.length;i++){const n=a[i];if(c[n]!==N[n]&&!wd(e,n))return!0}}}else return(V||A)&&(!A||!A.$stable)?!0:N===c?!1:N?c?gm(N,c,e):!0:!!c;return!1}function gm(se,ue,t){const N=Object.keys(ue);if(N.length!==Object.keys(se).length)return!0;for(let V=0;V<N.length;V++){const y=N[V];if(ue[y]!==se[y]&&!wd(t,y))return!0}return!1}function O3({vnode:se,parent:ue},t){for(;ue&&ue.subTree===se;)(se=ue.vnode).el=t,ue=ue.parent}const N3=se=>se.__isSuspense;function B3(se,ue){ue&&ue.pendingBranch?Si(se)?ue.effects.push(...se):ue.effects.push(se):P3(se)}function U3(se,ue){if(hl){let t=hl.provides;const N=hl.parent&&hl.parent.provides;N===t&&(t=hl.provides=Object.create(N)),t[se]=ue}}function Hv(se,ue,t=!1){const N=hl||Sl;if(N){const V=N.parent==null?N.vnode.appContext&&N.vnode.appContext.provides:N.parent.provides;if(V&&se in V)return V[se];if(arguments.length>1)return t&&ji(ue)?ue.call(N.proxy):ue}}const Up={};function $p(se,ue,t){return ux(se,ue,t)}function ux(se,ue,{immediate:t,deep:N,flush:V,onTrack:y,onTrigger:c}=Ko){const A=hl;let T,e=!1,a=!1;if(Ps(se)?(T=()=>se.value,e=nd(se)):Ef(se)?(T=()=>se,N=!0):Si(se)?(a=!0,e=se.some(d=>Ef(d)||nd(d)),T=()=>se.map(d=>{if(Ps(d))return d.value;if(Ef(d))return th(d);if(ji(d))return Sf(d,A,2)})):ji(se)?ue?T=()=>Sf(se,A,2):T=()=>{if(!(A&&A.isUnmounted))return i&&i(),oc(se,A,3,[n])}:T=Mc,ue&&N){const d=T;T=()=>th(d())}let i,n=d=>{i=b.onStop=()=>{Sf(d,A,4)}},r;if(ep)if(n=Mc,ue?t&&oc(ue,A,3,[T(),a?[]:void 0,n]):T(),V==="sync"){const d=RT();r=d.__watcherHandles||(d.__watcherHandles=[])}else return Mc;let v=a?new Array(se.length).fill(Up):Up;const s=()=>{if(!!b.active)if(ue){const d=b.run();(N||e||(a?d.some((f,m)=>Kv(f,v[m])):Kv(d,v)))&&(i&&i(),oc(ue,A,3,[d,v===Up?void 0:a&&v[0]===Up?[]:v,n]),v=d)}else b.run()};s.allowRecurse=!!ue;let o;V==="sync"?o=s:V==="post"?o=()=>Tu(s,A&&A.suspense):(s.pre=!0,A&&(s.id=A.uid),o=()=>wg(s));const b=new dg(T,o);ue?t?s():v=b.run():V==="post"?Tu(b.run.bind(b),A&&A.suspense):b.run();const g=()=>{b.stop(),A&&A.scope&&cg(A.scope.effects,b)};return r&&r.push(g),g}function V3(se,ue,t){const N=this.proxy,V=Ds(se)?se.includes(".")?cx(N,se):()=>N[se]:se.bind(N,N);let y;ji(ue)?y=ue:(y=ue.handler,t=ue);const c=hl;ev(this);const A=ux(V,y.bind(N),t);return c?ev(c):ih(),A}function cx(se,ue){const t=ue.split(".");return()=>{let N=se;for(let V=0;V<t.length&&N;V++)N=N[t[V]];return N}}function th(se,ue){if(!Jo(se)||se.__v_skip||(ue=ue||new Set,ue.has(se)))return se;if(ue.add(se),Ps(se))th(se.value,ue);else if(Si(se))for(let t=0;t<se.length;t++)th(se[t],ue);else if(R1(se)||Kh(se))se.forEach(t=>{th(t,ue)});else if(z1(se))for(const t in se)th(se[t],ue);return se}function H3(){const se={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Tg(()=>{se.isMounted=!0}),dx(()=>{se.isUnmounting=!0}),se}const ic=[Function,Array],G3={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ic,onEnter:ic,onAfterEnter:ic,onEnterCancelled:ic,onBeforeLeave:ic,onLeave:ic,onAfterLeave:ic,onLeaveCancelled:ic,onBeforeAppear:ic,onAppear:ic,onAfterAppear:ic,onAppearCancelled:ic},setup(se,{slots:ue}){const t=Lx(),N=H3();let V;return()=>{const y=ue.default&&vx(ue.default(),!0);if(!y||!y.length)return;let c=y[0];if(y.length>1){for(const s of y)if(s.type!==sc){c=s;break}}const A=xo(se),{mode:T}=A;if(N.isLeaving)return g0(c);const e=ym(c);if(!e)return g0(c);const a=Y0(e,A,N,t);W0(e,a);const i=t.subTree,n=i&&ym(i);let r=!1;const{getTransitionKey:v}=e.type;if(v){const s=v();V===void 0?V=s:s!==V&&(V=s,r=!0)}if(n&&n.type!==sc&&(!qf(e,n)||r)){const s=Y0(n,A,N,t);if(W0(n,s),T==="out-in")return N.isLeaving=!0,s.afterLeave=()=>{N.isLeaving=!1,t.update.active!==!1&&t.update()},g0(c);T==="in-out"&&e.type!==sc&&(s.delayLeave=(o,b,g)=>{const d=hx(N,n);d[String(n.key)]=n,o._leaveCb=()=>{b(),o._leaveCb=void 0,delete a.delayedLeave},a.delayedLeave=g})}return c}}},fx=G3;function hx(se,ue){const{leavingVNodes:t}=se;let N=t.get(ue.type);return N||(N=Object.create(null),t.set(ue.type,N)),N}function Y0(se,ue,t,N){const{appear:V,mode:y,persisted:c=!1,onBeforeEnter:A,onEnter:T,onAfterEnter:e,onEnterCancelled:a,onBeforeLeave:i,onLeave:n,onAfterLeave:r,onLeaveCancelled:v,onBeforeAppear:s,onAppear:o,onAfterAppear:b,onAppearCancelled:g}=ue,d=String(se.key),f=hx(t,se),m=(u,M)=>{u&&oc(u,N,9,M)},l=(u,M)=>{const w=M[1];m(u,M),Si(u)?u.every(p=>p.length<=1)&&w():u.length<=1&&w()},x={mode:y,persisted:c,beforeEnter(u){let M=A;if(!t.isMounted)if(V)M=s||A;else return;u._leaveCb&&u._leaveCb(!0);const w=f[d];w&&qf(se,w)&&w.el._leaveCb&&w.el._leaveCb(),m(M,[u])},enter(u){let M=T,w=e,p=a;if(!t.isMounted)if(V)M=o||T,w=b||e,p=g||a;else return;let _=!1;const h=u._enterCb=L=>{_||(_=!0,L?m(p,[u]):m(w,[u]),x.delayedLeave&&x.delayedLeave(),u._enterCb=void 0)};M?l(M,[u,h]):h()},leave(u,M){const w=String(se.key);if(u._enterCb&&u._enterCb(!0),t.isUnmounting)return M();m(i,[u]);let p=!1;const _=u._leaveCb=h=>{p||(p=!0,M(),h?m(v,[u]):m(r,[u]),u._leaveCb=void 0,f[w]===se&&delete f[w])};f[w]=se,n?l(n,[u,_]):_()},clone(u){return Y0(u,ue,t,N)}};return x}function g0(se){if(Td(se))return se=Cf(se),se.children=null,se}function ym(se){return Td(se)?se.children?se.children[0]:void 0:se}function W0(se,ue){se.shapeFlag&6&&se.component?W0(se.component.subTree,ue):se.shapeFlag&128?(se.ssContent.transition=ue.clone(se.ssContent),se.ssFallback.transition=ue.clone(se.ssFallback)):se.transition=ue}function vx(se,ue=!1,t){let N=[],V=0;for(let y=0;y<se.length;y++){let c=se[y];const A=t==null?c.key:String(t)+String(c.key!=null?c.key:y);c.type===iu?(c.patchFlag&128&&V++,N=N.concat(vx(c.children,ue,A))):(ue||c.type!==sc)&&N.push(A!=null?Cf(c,{key:A}):c)}if(V>1)for(let y=0;y<N.length;y++)N[y].patchFlag=-2;return N}const Gv=se=>!!se.type.__asyncLoader,Td=se=>se.type.__isKeepAlive;function Y3(se,ue){px(se,"a",ue)}function W3(se,ue){px(se,"da",ue)}function px(se,ue,t=hl){const N=se.__wdc||(se.__wdc=()=>{let V=t;for(;V;){if(V.isDeactivated)return;V=V.parent}return se()});if(Ad(ue,N,t),t){let V=t.parent;for(;V&&V.parent;)Td(V.parent.vnode)&&X3(N,ue,t,V),V=V.parent}}function X3(se,ue,t,N){const V=Ad(ue,se,N,!0);Ag(()=>{cg(N[ue],V)},t)}function Ad(se,ue,t=hl,N=!1){if(t){const V=t[se]||(t[se]=[]),y=ue.__weh||(ue.__weh=(...c)=>{if(t.isUnmounted)return;uv(),ev(t);const A=oc(ue,t,se,c);return ih(),cv(),A});return N?V.unshift(y):V.push(y),y}}const rf=se=>(ue,t=hl)=>(!ep||se==="sp")&&Ad(se,(...N)=>ue(...N),t),j3=rf("bm"),Tg=rf("m"),Z3=rf("bu"),K3=rf("u"),dx=rf("bum"),Ag=rf("um"),J3=rf("sp"),$3=rf("rtg"),Q3=rf("rtc");function q3(se,ue=hl){Ad("ec",se,ue)}function y0(se,ue){const t=Sl;if(t===null)return se;const N=Sd(t)||t.proxy,V=se.dirs||(se.dirs=[]);for(let y=0;y<ue.length;y++){let[c,A,T,e=Ko]=ue[y];c&&(ji(c)&&(c={mounted:c,updated:c}),c.deep&&th(A),V.push({dir:c,instance:N,value:A,oldValue:void 0,arg:T,modifiers:e}))}return se}function jf(se,ue,t,N){const V=se.dirs,y=ue&&ue.dirs;for(let c=0;c<V.length;c++){const A=V[c];y&&(A.oldValue=y[c].value);let T=A.dir[N];T&&(uv(),oc(T,t,8,[se.el,A,se,ue]),cv())}}const gx="components",eT="directives",yx=Symbol();function m0(se){return Ds(se)?mx(gx,se,!1)||se:se||yx}function tT(se){return mx(eT,se)}function mx(se,ue,t=!0,N=!1){const V=Sl||hl;if(V){const y=V.type;if(se===gx){const A=CT(y,!1);if(A&&(A===ue||A===Vc(ue)||A===md(Vc(ue))))return y}const c=mm(V[se]||y[se],ue)||mm(V.appContext[se],ue);return!c&&N?y:c}}function mm(se,ue){return se&&(se[ue]||se[Vc(ue)]||se[md(Vc(ue))])}function xm(se,ue,t,N){let V;const y=t&&t[N];if(Si(se)||Ds(se)){V=new Array(se.length);for(let c=0,A=se.length;c<A;c++)V[c]=ue(se[c],c,void 0,y&&y[c])}else if(typeof se=="number"){V=new Array(se);for(let c=0;c<se;c++)V[c]=ue(c+1,c,void 0,y&&y[c])}else if(Jo(se))if(se[Symbol.iterator])V=Array.from(se,(c,A)=>ue(c,A,void 0,y&&y[A]));else{const c=Object.keys(se);V=new Array(c.length);for(let A=0,T=c.length;A<T;A++){const e=c[A];V[A]=ue(se[e],e,A,y&&y[A])}}else V=[];return t&&(t[N]=V),V}function _c(se,ue,t={},N,V){if(Sl.isCE||Sl.parent&&Gv(Sl.parent)&&Sl.parent.isCE)return ue!=="default"&&(t.name=ue),Js("slot",t,N&&N());let y=se[ue];y&&y._c&&(y._d=!1),Ls();const c=y&&xx(y(t)),A=$h(iu,{key:t.key||c&&c.key||`_${ue}`},c||(N?N():[]),c&&se._===1?64:-2);return!V&&A.scopeId&&(A.slotScopeIds=[A.scopeId+"-s"]),y&&y._c&&(y._d=!0),A}function xx(se){return se.some(ue=>sd(ue)?!(ue.type===sc||ue.type===iu&&!xx(ue.children)):!0)?se:null}function rT(se,ue){const t={};for(const N in se)t[ue&&/[A-Z]/.test(N)?`on:${N}`:Jp(N)]=se[N];return t}const X0=se=>se?Px(se)?Sd(se)||se.proxy:X0(se.parent):null,Yv=kl(Object.create(null),{$:se=>se,$el:se=>se.vnode.el,$data:se=>se.data,$props:se=>se.props,$attrs:se=>se.attrs,$slots:se=>se.slots,$refs:se=>se.refs,$parent:se=>X0(se.parent),$root:se=>X0(se.root),$emit:se=>se.emit,$options:se=>Mg(se),$forceUpdate:se=>se.f||(se.f=()=>wg(se.update)),$nextTick:se=>se.n||(se.n=rx.bind(se.proxy)),$watch:se=>V3.bind(se)}),x0=(se,ue)=>se!==Ko&&!se.__isScriptSetup&&vo(se,ue),nT={get({_:se},ue){const{ctx:t,setupState:N,data:V,props:y,accessCache:c,type:A,appContext:T}=se;let e;if(ue[0]!=="$"){const r=c[ue];if(r!==void 0)switch(r){case 1:return N[ue];case 2:return V[ue];case 4:return t[ue];case 3:return y[ue]}else{if(x0(N,ue))return c[ue]=1,N[ue];if(V!==Ko&&vo(V,ue))return c[ue]=2,V[ue];if((e=se.propsOptions[0])&&vo(e,ue))return c[ue]=3,y[ue];if(t!==Ko&&vo(t,ue))return c[ue]=4,t[ue];j0&&(c[ue]=0)}}const a=Yv[ue];let i,n;if(a)return ue==="$attrs"&&Gu(se,"get",ue),a(se);if((i=A.__cssModules)&&(i=i[ue]))return i;if(t!==Ko&&vo(t,ue))return c[ue]=4,t[ue];if(n=T.config.globalProperties,vo(n,ue))return n[ue]},set({_:se},ue,t){const{data:N,setupState:V,ctx:y}=se;return x0(V,ue)?(V[ue]=t,!0):N!==Ko&&vo(N,ue)?(N[ue]=t,!0):vo(se.props,ue)||ue[0]==="$"&&ue.slice(1)in se?!1:(y[ue]=t,!0)},has({_:{data:se,setupState:ue,accessCache:t,ctx:N,appContext:V,propsOptions:y}},c){let A;return!!t[c]||se!==Ko&&vo(se,c)||x0(ue,c)||(A=y[0])&&vo(A,c)||vo(N,c)||vo(Yv,c)||vo(V.config.globalProperties,c)},defineProperty(se,ue,t){return t.get!=null?se._.accessCache[ue]=0:vo(t,"value")&&this.set(se,ue,t.value,null),Reflect.defineProperty(se,ue,t)}};let j0=!0;function aT(se){const ue=Mg(se),t=se.proxy,N=se.ctx;j0=!1,ue.beforeCreate&&bm(ue.beforeCreate,se,"bc");const{data:V,computed:y,methods:c,watch:A,provide:T,inject:e,created:a,beforeMount:i,mounted:n,beforeUpdate:r,updated:v,activated:s,deactivated:o,beforeDestroy:b,beforeUnmount:g,destroyed:d,unmounted:f,render:m,renderTracked:l,renderTriggered:x,errorCaptured:u,serverPrefetch:M,expose:w,inheritAttrs:p,components:_,directives:h,filters:L}=ue;if(e&&iT(e,N,null,se.appContext.config.unwrapInjectedRef),c)for(const P in c){const F=c[P];ji(F)&&(N[P]=F.bind(t))}if(V){const P=V.call(t,t);Jo(P)&&(se.data=bd(P))}if(j0=!0,y)for(const P in y){const F=y[P],I=ji(F)?F.bind(t,t):ji(F.get)?F.get.bind(t,t):Mc,D=!ji(F)&&ji(F.set)?F.set.bind(t):Mc,R=ud({get:I,set:D});Object.defineProperty(N,P,{enumerable:!0,configurable:!0,get:()=>R.value,set:O=>R.value=O})}if(A)for(const P in A)bx(A[P],N,t,P);if(T){const P=ji(T)?T.call(t):T;Reflect.ownKeys(P).forEach(F=>{U3(F,P[F])})}a&&bm(a,se,"c");function S(P,F){Si(F)?F.forEach(I=>P(I.bind(t))):F&&P(F.bind(t))}if(S(j3,i),S(Tg,n),S(Z3,r),S(K3,v),S(Y3,s),S(W3,o),S(q3,u),S(Q3,l),S($3,x),S(dx,g),S(Ag,f),S(J3,M),Si(w))if(w.length){const P=se.exposed||(se.exposed={});w.forEach(F=>{Object.defineProperty(P,F,{get:()=>t[F],set:I=>t[F]=I})})}else se.exposed||(se.exposed={});m&&se.render===Mc&&(se.render=m),p!=null&&(se.inheritAttrs=p),_&&(se.components=_),h&&(se.directives=h)}function iT(se,ue,t=Mc,N=!1){Si(se)&&(se=Z0(se));for(const V in se){const y=se[V];let c;Jo(y)?"default"in y?c=Hv(y.from||V,y.default,!0):c=Hv(y.from||V):c=Hv(y),Ps(c)&&N?Object.defineProperty(ue,V,{enumerable:!0,configurable:!0,get:()=>c.value,set:A=>c.value=A}):ue[V]=c}}function bm(se,ue,t){oc(Si(se)?se.map(N=>N.bind(ue.proxy)):se.bind(ue.proxy),ue,t)}function bx(se,ue,t,N){const V=N.includes(".")?cx(t,N):()=>t[N];if(Ds(se)){const y=ue[se];ji(y)&&$p(V,y)}else if(ji(se))$p(V,se.bind(t));else if(Jo(se))if(Si(se))se.forEach(y=>bx(y,ue,t,N));else{const y=ji(se.handler)?se.handler.bind(t):ue[se.handler];ji(y)&&$p(V,y,se)}}function Mg(se){const ue=se.type,{mixins:t,extends:N}=ue,{mixins:V,optionsCache:y,config:{optionMergeStrategies:c}}=se.appContext,A=y.get(ue);let T;return A?T=A:!V.length&&!t&&!N?T=ue:(T={},V.length&&V.forEach(e=>od(T,e,c,!0)),od(T,ue,c)),Jo(ue)&&y.set(ue,T),T}function od(se,ue,t,N=!1){const{mixins:V,extends:y}=ue;y&&od(se,y,t,!0),V&&V.forEach(c=>od(se,c,t,!0));for(const c in ue)if(!(N&&c==="expose")){const A=oT[c]||t&&t[c];se[c]=A?A(se[c],ue[c]):ue[c]}return se}const oT={data:_m,props:$f,emits:$f,methods:$f,computed:$f,beforeCreate:nu,created:nu,beforeMount:nu,mounted:nu,beforeUpdate:nu,updated:nu,beforeDestroy:nu,beforeUnmount:nu,destroyed:nu,unmounted:nu,activated:nu,deactivated:nu,errorCaptured:nu,serverPrefetch:nu,components:$f,directives:$f,watch:lT,provide:_m,inject:sT};function _m(se,ue){return ue?se?function(){return kl(ji(se)?se.call(this,this):se,ji(ue)?ue.call(this,this):ue)}:ue:se}function sT(se,ue){return $f(Z0(se),Z0(ue))}function Z0(se){if(Si(se)){const ue={};for(let t=0;t<se.length;t++)ue[se[t]]=se[t];return ue}return se}function nu(se,ue){return se?[...new Set([].concat(se,ue))]:ue}function $f(se,ue){return se?kl(kl(Object.create(null),se),ue):ue}function lT(se,ue){if(!se)return ue;if(!ue)return se;const t=kl(Object.create(null),se);for(const N in ue)t[N]=nu(se[N],ue[N]);return t}function uT(se,ue,t,N=!1){const V={},y={};rd(y,Ed,1),se.propsDefaults=Object.create(null),_x(se,ue,V,y);for(const c in se.propsOptions[0])c in V||(V[c]=void 0);t?se.props=N?V:x3(V):se.type.props?se.props=V:se.props=y,se.attrs=y}function cT(se,ue,t,N){const{props:V,attrs:y,vnode:{patchFlag:c}}=se,A=xo(V),[T]=se.propsOptions;let e=!1;if((N||c>0)&&!(c&16)){if(c&8){const a=se.vnode.dynamicProps;for(let i=0;i<a.length;i++){let n=a[i];if(wd(se.emitsOptions,n))continue;const r=ue[n];if(T)if(vo(y,n))r!==y[n]&&(y[n]=r,e=!0);else{const v=Vc(n);V[v]=K0(T,A,v,r,se,!1)}else r!==y[n]&&(y[n]=r,e=!0)}}}else{_x(se,ue,V,y)&&(e=!0);let a;for(const i in A)(!ue||!vo(ue,i)&&((a=lv(i))===i||!vo(ue,a)))&&(T?t&&(t[i]!==void 0||t[a]!==void 0)&&(V[i]=K0(T,A,i,void 0,se,!0)):delete V[i]);if(y!==A)for(const i in y)(!ue||!vo(ue,i)&&!0)&&(delete y[i],e=!0)}e&&ef(se,"set","$attrs")}function _x(se,ue,t,N){const[V,y]=se.propsOptions;let c=!1,A;if(ue)for(let T in ue){if(Kp(T))continue;const e=ue[T];let a;V&&vo(V,a=Vc(T))?!y||!y.includes(a)?t[a]=e:(A||(A={}))[a]=e:wd(se.emitsOptions,T)||(!(T in N)||e!==N[T])&&(N[T]=e,c=!0)}if(y){const T=xo(t),e=A||Ko;for(let a=0;a<y.length;a++){const i=y[a];t[i]=K0(V,T,i,e[i],se,!vo(e,i))}}return c}function K0(se,ue,t,N,V,y){const c=se[t];if(c!=null){const A=vo(c,"default");if(A&&N===void 0){const T=c.default;if(c.type!==Function&&ji(T)){const{propsDefaults:e}=V;t in e?N=e[t]:(ev(V),N=e[t]=T.call(null,ue),ih())}else N=T}c[0]&&(y&&!A?N=!1:c[1]&&(N===""||N===lv(t))&&(N=!0))}return N}function wx(se,ue,t=!1){const N=ue.propsCache,V=N.get(se);if(V)return V;const y=se.props,c={},A=[];let T=!1;if(!ji(se)){const a=i=>{T=!0;const[n,r]=wx(i,ue,!0);kl(c,n),r&&A.push(...r)};!t&&ue.mixins.length&&ue.mixins.forEach(a),se.extends&&a(se.extends),se.mixins&&se.mixins.forEach(a)}if(!y&&!T)return Jo(se)&&N.set(se,Zh),Zh;if(Si(y))for(let a=0;a<y.length;a++){const i=Vc(y[a]);wm(i)&&(c[i]=Ko)}else if(y)for(const a in y){const i=Vc(a);if(wm(i)){const n=y[a],r=c[i]=Si(n)||ji(n)?{type:n}:Object.assign({},n);if(r){const v=Mm(Boolean,r.type),s=Mm(String,r.type);r[0]=v>-1,r[1]=s<0||v<s,(v>-1||vo(r,"default"))&&A.push(i)}}}const e=[c,A];return Jo(se)&&N.set(se,e),e}function wm(se){return se[0]!=="$"}function Tm(se){const ue=se&&se.toString().match(/^\s*function (\w+)/);return ue?ue[1]:se===null?"null":""}function Am(se,ue){return Tm(se)===Tm(ue)}function Mm(se,ue){return Si(ue)?ue.findIndex(t=>Am(t,se)):ji(ue)&&Am(ue,se)?0:-1}const Tx=se=>se[0]==="_"||se==="$stable",Eg=se=>Si(se)?se.map(Oc):[Oc(se)],fT=(se,ue,t)=>{if(ue._n)return ue;const N=lx((...V)=>Eg(ue(...V)),t);return N._c=!1,N},Ax=(se,ue,t)=>{const N=se._ctx;for(const V in se){if(Tx(V))continue;const y=se[V];if(ji(y))ue[V]=fT(V,y,N);else if(y!=null){const c=Eg(y);ue[V]=()=>c}}},Mx=(se,ue)=>{const t=Eg(ue);se.slots.default=()=>t},hT=(se,ue)=>{if(se.vnode.shapeFlag&32){const t=ue._;t?(se.slots=xo(ue),rd(ue,"_",t)):Ax(ue,se.slots={})}else se.slots={},ue&&Mx(se,ue);rd(se.slots,Ed,1)},vT=(se,ue,t)=>{const{vnode:N,slots:V}=se;let y=!0,c=Ko;if(N.shapeFlag&32){const A=ue._;A?t&&A===1?y=!1:(kl(V,ue),!t&&A===1&&delete V._):(y=!ue.$stable,Ax(ue,V)),c=ue}else ue&&(Mx(se,ue),c={default:1});if(y)for(const A in V)!Tx(A)&&!(A in c)&&delete V[A]};function Ex(){return{app:null,config:{isNativeTag:Nw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pT=0;function dT(se,ue){return function(N,V=null){ji(N)||(N=Object.assign({},N)),V!=null&&!Jo(V)&&(V=null);const y=Ex(),c=new Set;let A=!1;const T=y.app={_uid:pT++,_component:N,_props:V,_container:null,_context:y,_instance:null,version:IT,get config(){return y.config},set config(e){},use(e,...a){return c.has(e)||(e&&ji(e.install)?(c.add(e),e.install(T,...a)):ji(e)&&(c.add(e),e(T,...a))),T},mixin(e){return y.mixins.includes(e)||y.mixins.push(e),T},component(e,a){return a?(y.components[e]=a,T):y.components[e]},directive(e,a){return a?(y.directives[e]=a,T):y.directives[e]},mount(e,a,i){if(!A){const n=Js(N,V);return n.appContext=y,a&&ue?ue(n,e):se(n,e,i),A=!0,T._container=e,e.__vue_app__=T,Sd(n.component)||n.component.proxy}},unmount(){A&&(se(null,T._container),delete T._container.__vue_app__)},provide(e,a){return y.provides[e]=a,T}};return T}}function J0(se,ue,t,N,V=!1){if(Si(se)){se.forEach((n,r)=>J0(n,ue&&(Si(ue)?ue[r]:ue),t,N,V));return}if(Gv(N)&&!V)return;const y=N.shapeFlag&4?Sd(N.component)||N.component.proxy:N.el,c=V?null:y,{i:A,r:T}=se,e=ue&&ue.r,a=A.refs===Ko?A.refs={}:A.refs,i=A.setupState;if(e!=null&&e!==T&&(Ds(e)?(a[e]=null,vo(i,e)&&(i[e]=null)):Ps(e)&&(e.value=null)),ji(T))Sf(T,A,12,[c,a]);else{const n=Ds(T),r=Ps(T);if(n||r){const v=()=>{if(se.f){const s=n?vo(i,T)?i[T]:a[T]:T.value;V?Si(s)&&cg(s,y):Si(s)?s.includes(y)||s.push(y):n?(a[T]=[y],vo(i,T)&&(i[T]=a[T])):(T.value=[y],se.k&&(a[se.k]=T.value))}else n?(a[T]=c,vo(i,T)&&(i[T]=c)):r&&(T.value=c,se.k&&(a[se.k]=c))};c?(v.id=-1,Tu(v,t)):v()}}}const Tu=B3;function gT(se){return yT(se)}function yT(se,ue){const t=Yw();t.__VUE__=!0;const{insert:N,remove:V,patchProp:y,createElement:c,createText:A,createComment:T,setText:e,setElementText:a,parentNode:i,nextSibling:n,setScopeId:r=Mc,insertStaticContent:v}=se,s=(J,U,H,q=null,re=null,Z=null,Q=!1,ie=null,oe=!!U.dynamicChildren)=>{if(J===U)return;J&&!qf(J,U)&&(q=j(J),O(J,re,Z,!0),J=null),U.patchFlag===-2&&(oe=!1,U.dynamicChildren=null);const{type:ne,ref:le,shapeFlag:_e}=U;switch(ne){case Md:o(J,U,H,q);break;case sc:b(J,U,H,q);break;case b0:J==null&&g(U,H,q,Q);break;case iu:_(J,U,H,q,re,Z,Q,ie,oe);break;default:_e&1?m(J,U,H,q,re,Z,Q,ie,oe):_e&6?h(J,U,H,q,re,Z,Q,ie,oe):(_e&64||_e&128)&&ne.process(J,U,H,q,re,Z,Q,ie,oe,ae)}le!=null&&re&&J0(le,J&&J.ref,Z,U||J,!U)},o=(J,U,H,q)=>{if(J==null)N(U.el=A(U.children),H,q);else{const re=U.el=J.el;U.children!==J.children&&e(re,U.children)}},b=(J,U,H,q)=>{J==null?N(U.el=T(U.children||""),H,q):U.el=J.el},g=(J,U,H,q)=>{[J.el,J.anchor]=v(J.children,U,H,q,J.el,J.anchor)},d=({el:J,anchor:U},H,q)=>{let re;for(;J&&J!==U;)re=n(J),N(J,H,q),J=re;N(U,H,q)},f=({el:J,anchor:U})=>{let H;for(;J&&J!==U;)H=n(J),V(J),J=H;V(U)},m=(J,U,H,q,re,Z,Q,ie,oe)=>{Q=Q||U.type==="svg",J==null?l(U,H,q,re,Z,Q,ie,oe):M(J,U,re,Z,Q,ie,oe)},l=(J,U,H,q,re,Z,Q,ie)=>{let oe,ne;const{type:le,props:_e,shapeFlag:fe,transition:ye,dirs:xe}=J;if(oe=J.el=c(J.type,Z,_e&&_e.is,_e),fe&8?a(oe,J.children):fe&16&&u(J.children,oe,null,q,re,Z&&le!=="foreignObject",Q,ie),xe&&jf(J,null,q,"created"),_e){for(const be in _e)be!=="value"&&!Kp(be)&&y(oe,be,null,_e[be],Z,J.children,q,re,ee);"value"in _e&&y(oe,"value",null,_e.value),(ne=_e.onVnodeBeforeMount)&&zc(ne,q,J)}x(oe,J,J.scopeId,Q,q),xe&&jf(J,null,q,"beforeMount");const me=(!re||re&&!re.pendingBranch)&&ye&&!ye.persisted;me&&ye.beforeEnter(oe),N(oe,U,H),((ne=_e&&_e.onVnodeMounted)||me||xe)&&Tu(()=>{ne&&zc(ne,q,J),me&&ye.enter(oe),xe&&jf(J,null,q,"mounted")},re)},x=(J,U,H,q,re)=>{if(H&&r(J,H),q)for(let Z=0;Z<q.length;Z++)r(J,q[Z]);if(re){let Z=re.subTree;if(U===Z){const Q=re.vnode;x(J,Q,Q.scopeId,Q.slotScopeIds,re.parent)}}},u=(J,U,H,q,re,Z,Q,ie,oe=0)=>{for(let ne=oe;ne<J.length;ne++){const le=J[ne]=ie?wf(J[ne]):Oc(J[ne]);s(null,le,U,H,q,re,Z,Q,ie)}},M=(J,U,H,q,re,Z,Q)=>{const ie=U.el=J.el;let{patchFlag:oe,dynamicChildren:ne,dirs:le}=U;oe|=J.patchFlag&16;const _e=J.props||Ko,fe=U.props||Ko;let ye;H&&Zf(H,!1),(ye=fe.onVnodeBeforeUpdate)&&zc(ye,H,U,J),le&&jf(U,J,H,"beforeUpdate"),H&&Zf(H,!0);const xe=re&&U.type!=="foreignObject";if(ne?w(J.dynamicChildren,ne,ie,H,q,xe,Z):Q||F(J,U,ie,null,H,q,xe,Z,!1),oe>0){if(oe&16)p(ie,U,_e,fe,H,q,re);else if(oe&2&&_e.class!==fe.class&&y(ie,"class",null,fe.class,re),oe&4&&y(ie,"style",_e.style,fe.style,re),oe&8){const me=U.dynamicProps;for(let be=0;be<me.length;be++){const ke=me[be],De=_e[ke],He=fe[ke];(He!==De||ke==="value")&&y(ie,ke,De,He,re,J.children,H,q,ee)}}oe&1&&J.children!==U.children&&a(ie,U.children)}else!Q&&ne==null&&p(ie,U,_e,fe,H,q,re);((ye=fe.onVnodeUpdated)||le)&&Tu(()=>{ye&&zc(ye,H,U,J),le&&jf(U,J,H,"updated")},q)},w=(J,U,H,q,re,Z,Q)=>{for(let ie=0;ie<U.length;ie++){const oe=J[ie],ne=U[ie],le=oe.el&&(oe.type===iu||!qf(oe,ne)||oe.shapeFlag&70)?i(oe.el):H;s(oe,ne,le,null,q,re,Z,Q,!0)}},p=(J,U,H,q,re,Z,Q)=>{if(H!==q){if(H!==Ko)for(const ie in H)!Kp(ie)&&!(ie in q)&&y(J,ie,H[ie],null,Q,U.children,re,Z,ee);for(const ie in q){if(Kp(ie))continue;const oe=q[ie],ne=H[ie];oe!==ne&&ie!=="value"&&y(J,ie,ne,oe,Q,U.children,re,Z,ee)}"value"in q&&y(J,"value",H.value,q.value)}},_=(J,U,H,q,re,Z,Q,ie,oe)=>{const ne=U.el=J?J.el:A(""),le=U.anchor=J?J.anchor:A("");let{patchFlag:_e,dynamicChildren:fe,slotScopeIds:ye}=U;ye&&(ie=ie?ie.concat(ye):ye),J==null?(N(ne,H,q),N(le,H,q),u(U.children,H,le,re,Z,Q,ie,oe)):_e>0&&_e&64&&fe&&J.dynamicChildren?(w(J.dynamicChildren,fe,H,re,Z,Q,ie),(U.key!=null||re&&U===re.subTree)&&Sx(J,U,!0)):F(J,U,H,le,re,Z,Q,ie,oe)},h=(J,U,H,q,re,Z,Q,ie,oe)=>{U.slotScopeIds=ie,J==null?U.shapeFlag&512?re.ctx.activate(U,H,q,Q,oe):L(U,H,q,re,Z,Q,oe):E(J,U,oe)},L=(J,U,H,q,re,Z,Q)=>{const ie=J.component=AT(J,q,re);if(Td(J)&&(ie.ctx.renderer=ae),MT(ie),ie.asyncDep){if(re&&re.registerDep(ie,S),!J.el){const oe=ie.subTree=Js(sc);b(null,oe,U,H)}return}S(ie,J,U,H,re,Z,Q)},E=(J,U,H)=>{const q=U.component=J.component;if(z3(J,U,H))if(q.asyncDep&&!q.asyncResolved){P(q,U,H);return}else q.next=U,L3(q.update),q.update();else U.el=J.el,q.vnode=U},S=(J,U,H,q,re,Z,Q)=>{const ie=()=>{if(J.isMounted){let{next:le,bu:_e,u:fe,parent:ye,vnode:xe}=J,me=le,be;Zf(J,!1),le?(le.el=xe.el,P(J,le,Q)):le=xe,_e&&p0(_e),(be=le.props&&le.props.onVnodeBeforeUpdate)&&zc(be,ye,le,xe),Zf(J,!0);const ke=d0(J),De=J.subTree;J.subTree=ke,s(De,ke,i(De.el),j(De),J,re,Z),le.el=ke.el,me===null&&O3(J,ke.el),fe&&Tu(fe,re),(be=le.props&&le.props.onVnodeUpdated)&&Tu(()=>zc(be,ye,le,xe),re)}else{let le;const{el:_e,props:fe}=U,{bm:ye,m:xe,parent:me}=J,be=Gv(U);if(Zf(J,!1),ye&&p0(ye),!be&&(le=fe&&fe.onVnodeBeforeMount)&&zc(le,me,U),Zf(J,!0),_e&&K){const ke=()=>{J.subTree=d0(J),K(_e,J.subTree,J,re,null)};be?U.type.__asyncLoader().then(()=>!J.isUnmounted&&ke()):ke()}else{const ke=J.subTree=d0(J);s(null,ke,H,q,J,re,Z),U.el=ke.el}if(xe&&Tu(xe,re),!be&&(le=fe&&fe.onVnodeMounted)){const ke=U;Tu(()=>zc(le,me,ke),re)}(U.shapeFlag&256||me&&Gv(me.vnode)&&me.vnode.shapeFlag&256)&&J.a&&Tu(J.a,re),J.isMounted=!0,U=H=q=null}},oe=J.effect=new dg(ie,()=>wg(ne),J.scope),ne=J.update=()=>oe.run();ne.id=J.uid,Zf(J,!0),ne()},P=(J,U,H)=>{U.component=J;const q=J.vnode.props;J.vnode=U,J.next=null,cT(J,U.props,q,H),vT(J,U.children,H),uv(),dm(),cv()},F=(J,U,H,q,re,Z,Q,ie,oe=!1)=>{const ne=J&&J.children,le=J?J.shapeFlag:0,_e=U.children,{patchFlag:fe,shapeFlag:ye}=U;if(fe>0){if(fe&128){D(ne,_e,H,q,re,Z,Q,ie,oe);return}else if(fe&256){I(ne,_e,H,q,re,Z,Q,ie,oe);return}}ye&8?(le&16&&ee(ne,re,Z),_e!==ne&&a(H,_e)):le&16?ye&16?D(ne,_e,H,q,re,Z,Q,ie,oe):ee(ne,re,Z,!0):(le&8&&a(H,""),ye&16&&u(_e,H,q,re,Z,Q,ie,oe))},I=(J,U,H,q,re,Z,Q,ie,oe)=>{J=J||Zh,U=U||Zh;const ne=J.length,le=U.length,_e=Math.min(ne,le);let fe;for(fe=0;fe<_e;fe++){const ye=U[fe]=oe?wf(U[fe]):Oc(U[fe]);s(J[fe],ye,H,null,re,Z,Q,ie,oe)}ne>le?ee(J,re,Z,!0,!1,_e):u(U,H,q,re,Z,Q,ie,oe,_e)},D=(J,U,H,q,re,Z,Q,ie,oe)=>{let ne=0;const le=U.length;let _e=J.length-1,fe=le-1;for(;ne<=_e&&ne<=fe;){const ye=J[ne],xe=U[ne]=oe?wf(U[ne]):Oc(U[ne]);if(qf(ye,xe))s(ye,xe,H,null,re,Z,Q,ie,oe);else break;ne++}for(;ne<=_e&&ne<=fe;){const ye=J[_e],xe=U[fe]=oe?wf(U[fe]):Oc(U[fe]);if(qf(ye,xe))s(ye,xe,H,null,re,Z,Q,ie,oe);else break;_e--,fe--}if(ne>_e){if(ne<=fe){const ye=fe+1,xe=ye<le?U[ye].el:q;for(;ne<=fe;)s(null,U[ne]=oe?wf(U[ne]):Oc(U[ne]),H,xe,re,Z,Q,ie,oe),ne++}}else if(ne>fe)for(;ne<=_e;)O(J[ne],re,Z,!0),ne++;else{const ye=ne,xe=ne,me=new Map;for(ne=xe;ne<=fe;ne++){const We=U[ne]=oe?wf(U[ne]):Oc(U[ne]);We.key!=null&&me.set(We.key,ne)}let be,ke=0;const De=fe-xe+1;let He=!1,Ae=0;const Le=new Array(De);for(ne=0;ne<De;ne++)Le[ne]=0;for(ne=ye;ne<=_e;ne++){const We=J[ne];if(ke>=De){O(We,re,Z,!0);continue}let ze;if(We.key!=null)ze=me.get(We.key);else for(be=xe;be<=fe;be++)if(Le[be-xe]===0&&qf(We,U[be])){ze=be;break}ze===void 0?O(We,re,Z,!0):(Le[ze-xe]=ne+1,ze>=Ae?Ae=ze:He=!0,s(We,U[ze],H,null,re,Z,Q,ie,oe),ke++)}const Ze=He?mT(Le):Zh;for(be=Ze.length-1,ne=De-1;ne>=0;ne--){const We=xe+ne,ze=U[We],Ie=We+1<le?U[We+1].el:q;Le[ne]===0?s(null,ze,H,Ie,re,Z,Q,ie,oe):He&&(be<0||ne!==Ze[be]?R(ze,H,Ie,2):be--)}}},R=(J,U,H,q,re=null)=>{const{el:Z,type:Q,transition:ie,children:oe,shapeFlag:ne}=J;if(ne&6){R(J.component.subTree,U,H,q);return}if(ne&128){J.suspense.move(U,H,q);return}if(ne&64){Q.move(J,U,H,ae);return}if(Q===iu){N(Z,U,H);for(let _e=0;_e<oe.length;_e++)R(oe[_e],U,H,q);N(J.anchor,U,H);return}if(Q===b0){d(J,U,H);return}if(q!==2&&ne&1&&ie)if(q===0)ie.beforeEnter(Z),N(Z,U,H),Tu(()=>ie.enter(Z),re);else{const{leave:_e,delayLeave:fe,afterLeave:ye}=ie,xe=()=>N(Z,U,H),me=()=>{_e(Z,()=>{xe(),ye&&ye()})};fe?fe(Z,xe,me):me()}else N(Z,U,H)},O=(J,U,H,q=!1,re=!1)=>{const{type:Z,props:Q,ref:ie,children:oe,dynamicChildren:ne,shapeFlag:le,patchFlag:_e,dirs:fe}=J;if(ie!=null&&J0(ie,null,H,J,!0),le&256){U.ctx.deactivate(J);return}const ye=le&1&&fe,xe=!Gv(J);let me;if(xe&&(me=Q&&Q.onVnodeBeforeUnmount)&&zc(me,U,J),le&6)Y(J.component,H,q);else{if(le&128){J.suspense.unmount(H,q);return}ye&&jf(J,null,U,"beforeUnmount"),le&64?J.type.remove(J,U,H,re,ae,q):ne&&(Z!==iu||_e>0&&_e&64)?ee(ne,U,H,!1,!0):(Z===iu&&_e&384||!re&&le&16)&&ee(oe,U,H),q&&z(J)}(xe&&(me=Q&&Q.onVnodeUnmounted)||ye)&&Tu(()=>{me&&zc(me,U,J),ye&&jf(J,null,U,"unmounted")},H)},z=J=>{const{type:U,el:H,anchor:q,transition:re}=J;if(U===iu){G(H,q);return}if(U===b0){f(J);return}const Z=()=>{V(H),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(J.shapeFlag&1&&re&&!re.persisted){const{leave:Q,delayLeave:ie}=re,oe=()=>Q(H,Z);ie?ie(J.el,Z,oe):oe()}else Z()},G=(J,U)=>{let H;for(;J!==U;)H=n(J),V(J),J=H;V(U)},Y=(J,U,H)=>{const{bum:q,scope:re,update:Z,subTree:Q,um:ie}=J;q&&p0(q),re.stop(),Z&&(Z.active=!1,O(Q,J,U,H)),ie&&Tu(ie,U),Tu(()=>{J.isUnmounted=!0},U),U&&U.pendingBranch&&!U.isUnmounted&&J.asyncDep&&!J.asyncResolved&&J.suspenseId===U.pendingId&&(U.deps--,U.deps===0&&U.resolve())},ee=(J,U,H,q=!1,re=!1,Z=0)=>{for(let Q=Z;Q<J.length;Q++)O(J[Q],U,H,q,re)},j=J=>J.shapeFlag&6?j(J.component.subTree):J.shapeFlag&128?J.suspense.next():n(J.anchor||J.el),X=(J,U,H)=>{J==null?U._vnode&&O(U._vnode,null,null,!0):s(U._vnode||null,J,U,null,null,null,H),dm(),ax(),U._vnode=J},ae={p:s,um:O,m:R,r:z,mt:L,mc:u,pc:F,pbc:w,n:j,o:se};let he,K;return ue&&([he,K]=ue(ae)),{render:X,hydrate:he,createApp:dT(X,he)}}function Zf({effect:se,update:ue},t){se.allowRecurse=ue.allowRecurse=t}function Sx(se,ue,t=!1){const N=se.children,V=ue.children;if(Si(N)&&Si(V))for(let y=0;y<N.length;y++){const c=N[y];let A=V[y];A.shapeFlag&1&&!A.dynamicChildren&&((A.patchFlag<=0||A.patchFlag===32)&&(A=V[y]=wf(V[y]),A.el=c.el),t||Sx(c,A)),A.type===Md&&(A.el=c.el)}}function mT(se){const ue=se.slice(),t=[0];let N,V,y,c,A;const T=se.length;for(N=0;N<T;N++){const e=se[N];if(e!==0){if(V=t[t.length-1],se[V]<e){ue[N]=V,t.push(N);continue}for(y=0,c=t.length-1;y<c;)A=y+c>>1,se[t[A]]<e?y=A+1:c=A;e<se[t[y]]&&(y>0&&(ue[N]=t[y-1]),t[y]=N)}}for(y=t.length,c=t[y-1];y-- >0;)t[y]=c,c=ue[c];return t}const xT=se=>se.__isTeleport,iu=Symbol(void 0),Md=Symbol(void 0),sc=Symbol(void 0),b0=Symbol(void 0),Wv=[];let Ac=null;function Ls(se=!1){Wv.push(Ac=se?null:[])}function bT(){Wv.pop(),Ac=Wv[Wv.length-1]||null}let qv=1;function Em(se){qv+=se}function kx(se){return se.dynamicChildren=qv>0?Ac||Zh:null,bT(),qv>0&&Ac&&Ac.push(se),se}function au(se,ue,t,N,V,y){return kx(fl(se,ue,t,N,V,y,!0))}function $h(se,ue,t,N,V){return kx(Js(se,ue,t,N,V,!0))}function sd(se){return se?se.__v_isVNode===!0:!1}function qf(se,ue){return se.type===ue.type&&se.key===ue.key}const Ed="__vInternal",Cx=({key:se})=>se!=null?se:null,Qp=({ref:se,ref_key:ue,ref_for:t})=>se!=null?Ds(se)||Ps(se)||ji(se)?{i:Sl,r:se,k:ue,f:!!t}:se:null;function fl(se,ue=null,t=null,N=0,V=null,y=se===iu?0:1,c=!1,A=!1){const T={__v_isVNode:!0,__v_skip:!0,type:se,props:ue,key:ue&&Cx(ue),ref:ue&&Qp(ue),scopeId:sx,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:N,dynamicProps:V,dynamicChildren:null,appContext:null,ctx:Sl};return A?(Sg(T,t),y&128&&se.normalize(T)):t&&(T.shapeFlag|=Ds(t)?8:16),qv>0&&!c&&Ac&&(T.patchFlag>0||y&6)&&T.patchFlag!==32&&Ac.push(T),T}const Js=_T;function _T(se,ue=null,t=null,N=0,V=null,y=!1){if((!se||se===yx)&&(se=sc),sd(se)){const A=Cf(se,ue,!0);return t&&Sg(A,t),qv>0&&!y&&Ac&&(A.shapeFlag&6?Ac[Ac.indexOf(se)]=A:Ac.push(A)),A.patchFlag|=-2,A}if(LT(se)&&(se=se.__vccOpts),ue){ue=wc(ue);let{class:A,style:T}=ue;A&&!Ds(A)&&(ue.class=sh(A)),Jo(T)&&(J1(T)&&!Si(T)&&(T=kl({},T)),ue.style=pd(T))}const c=Ds(se)?1:N3(se)?128:xT(se)?64:Jo(se)?4:ji(se)?2:0;return fl(se,ue,t,N,V,c,y,!0)}function wc(se){return se?J1(se)||Ed in se?kl({},se):se:null}function Cf(se,ue,t=!1){const{props:N,ref:V,patchFlag:y,children:c}=se,A=ue?$0(N||{},ue):N;return{__v_isVNode:!0,__v_skip:!0,type:se.type,props:A,key:A&&Cx(A),ref:ue&&ue.ref?t&&V?Si(V)?V.concat(Qp(ue)):[V,Qp(ue)]:Qp(ue):V,scopeId:se.scopeId,slotScopeIds:se.slotScopeIds,children:c,target:se.target,targetAnchor:se.targetAnchor,staticCount:se.staticCount,shapeFlag:se.shapeFlag,patchFlag:ue&&se.type!==iu?y===-1?16:y|16:y,dynamicProps:se.dynamicProps,dynamicChildren:se.dynamicChildren,appContext:se.appContext,dirs:se.dirs,transition:se.transition,component:se.component,suspense:se.suspense,ssContent:se.ssContent&&Cf(se.ssContent),ssFallback:se.ssFallback&&Cf(se.ssFallback),el:se.el,anchor:se.anchor,ctx:se.ctx}}function ld(se=" ",ue=0){return Js(Md,null,se,ue)}function _0(se="",ue=!1){return ue?(Ls(),$h(sc,null,se)):Js(sc,null,se)}function Oc(se){return se==null||typeof se=="boolean"?Js(sc):Si(se)?Js(iu,null,se.slice()):typeof se=="object"?wf(se):Js(Md,null,String(se))}function wf(se){return se.el===null&&se.patchFlag!==-1||se.memo?se:Cf(se)}function Sg(se,ue){let t=0;const{shapeFlag:N}=se;if(ue==null)ue=null;else if(Si(ue))t=16;else if(typeof ue=="object")if(N&65){const V=ue.default;V&&(V._c&&(V._d=!1),Sg(se,V()),V._c&&(V._d=!0));return}else{t=32;const V=ue._;!V&&!(Ed in ue)?ue._ctx=Sl:V===3&&Sl&&(Sl.slots._===1?ue._=1:(ue._=2,se.patchFlag|=1024))}else ji(ue)?(ue={default:ue,_ctx:Sl},t=32):(ue=String(ue),N&64?(t=16,ue=[ld(ue)]):t=8);se.children=ue,se.shapeFlag|=t}function $0(...se){const ue={};for(let t=0;t<se.length;t++){const N=se[t];for(const V in N)if(V==="class")ue.class!==N.class&&(ue.class=sh([ue.class,N.class]));else if(V==="style")ue.style=pd([ue.style,N.style]);else if(dd(V)){const y=ue[V],c=N[V];c&&y!==c&&!(Si(y)&&y.includes(c))&&(ue[V]=y?[].concat(y,c):c)}else V!==""&&(ue[V]=N[V])}return ue}function zc(se,ue,t,N=null){oc(se,ue,7,[t,N])}const wT=Ex();let TT=0;function AT(se,ue,t){const N=se.type,V=(ue?ue.appContext:se.appContext)||wT,y={uid:TT++,vnode:se,type:N,parent:ue,appContext:V,root:null,next:null,subTree:null,effect:null,update:null,scope:new O1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:ue?ue.provides:Object.create(V.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wx(N,V),emitsOptions:ox(N,V),emit:null,emitted:null,propsDefaults:Ko,inheritAttrs:N.inheritAttrs,ctx:Ko,data:Ko,props:Ko,attrs:Ko,slots:Ko,refs:Ko,setupState:Ko,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=ue?ue.root:y,y.emit=R3.bind(null,y),se.ce&&se.ce(y),y}let hl=null;const Lx=()=>hl||Sl,ev=se=>{hl=se,se.scope.on()},ih=()=>{hl&&hl.scope.off(),hl=null};function Px(se){return se.vnode.shapeFlag&4}let ep=!1;function MT(se,ue=!1){ep=ue;const{props:t,children:N}=se.vnode,V=Px(se);uT(se,t,V,ue),hT(se,N);const y=V?ET(se,ue):void 0;return ep=!1,y}function ET(se,ue){const t=se.type;se.accessCache=Object.create(null),se.proxy=qh(new Proxy(se.ctx,nT));const{setup:N}=t;if(N){const V=se.setupContext=N.length>1?kT(se):null;ev(se),uv();const y=Sf(N,se,0,[se.props,V]);if(cv(),ih(),I1(y)){if(y.then(ih,ih),ue)return y.then(c=>{Sm(se,c,ue)}).catch(c=>{_d(c,se,0)});se.asyncDep=y}else Sm(se,y,ue)}else Dx(se,ue)}function Sm(se,ue,t){ji(ue)?se.type.__ssrInlineRender?se.ssrRender=ue:se.render=ue:Jo(ue)&&(se.setupState=q1(ue)),Dx(se,t)}let km;function Dx(se,ue,t){const N=se.type;if(!se.render){if(!ue&&km&&!N.render){const V=N.template||Mg(se).template;if(V){const{isCustomElement:y,compilerOptions:c}=se.appContext.config,{delimiters:A,compilerOptions:T}=N,e=kl(kl({isCustomElement:y,delimiters:A},c),T);N.render=km(V,e)}}se.render=N.render||Mc}ev(se),uv(),aT(se),cv(),ih()}function ST(se){return new Proxy(se.attrs,{get(ue,t){return Gu(se,"get","$attrs"),ue[t]}})}function kT(se){const ue=N=>{se.exposed=N||{}};let t;return{get attrs(){return t||(t=ST(se))},slots:se.slots,emit:se.emit,expose:ue}}function Sd(se){if(se.exposed)return se.exposeProxy||(se.exposeProxy=new Proxy(q1(qh(se.exposed)),{get(ue,t){if(t in ue)return ue[t];if(t in Yv)return Yv[t](se)},has(ue,t){return t in ue||t in Yv}}))}function CT(se,ue=!0){return ji(se)?se.displayName||se.name:se.name||ue&&se.__name}function LT(se){return ji(se)&&"__vccOpts"in se}const ud=(se,ue)=>S3(se,ue,ep);function PT(se,ue,t){const N=arguments.length;return N===2?Jo(ue)&&!Si(ue)?sd(ue)?Js(se,null,[ue]):Js(se,ue):Js(se,null,ue):(N>3?t=Array.prototype.slice.call(arguments,2):N===3&&sd(t)&&(t=[t]),Js(se,ue,t))}const DT=Symbol(""),RT=()=>Hv(DT),IT="3.2.45",FT="http://www.w3.org/2000/svg",eh=typeof document<"u"?document:null,Cm=eh&&eh.createElement("template"),zT={insert:(se,ue,t)=>{ue.insertBefore(se,t||null)},remove:se=>{const ue=se.parentNode;ue&&ue.removeChild(se)},createElement:(se,ue,t,N)=>{const V=ue?eh.createElementNS(FT,se):eh.createElement(se,t?{is:t}:void 0);return se==="select"&&N&&N.multiple!=null&&V.setAttribute("multiple",N.multiple),V},createText:se=>eh.createTextNode(se),createComment:se=>eh.createComment(se),setText:(se,ue)=>{se.nodeValue=ue},setElementText:(se,ue)=>{se.textContent=ue},parentNode:se=>se.parentNode,nextSibling:se=>se.nextSibling,querySelector:se=>eh.querySelector(se),setScopeId(se,ue){se.setAttribute(ue,"")},insertStaticContent(se,ue,t,N,V,y){const c=t?t.previousSibling:ue.lastChild;if(V&&(V===y||V.nextSibling))for(;ue.insertBefore(V.cloneNode(!0),t),!(V===y||!(V=V.nextSibling)););else{Cm.innerHTML=N?`<svg>${se}</svg>`:se;const A=Cm.content;if(N){const T=A.firstChild;for(;T.firstChild;)A.appendChild(T.firstChild);A.removeChild(T)}ue.insertBefore(A,t)}return[c?c.nextSibling:ue.firstChild,t?t.previousSibling:ue.lastChild]}};function OT(se,ue,t){const N=se._vtc;N&&(ue=(ue?[ue,...N]:[...N]).join(" ")),ue==null?se.removeAttribute("class"):t?se.setAttribute("class",ue):se.className=ue}function NT(se,ue,t){const N=se.style,V=Ds(t);if(t&&!V){for(const y in t)Q0(N,y,t[y]);if(ue&&!Ds(ue))for(const y in ue)t[y]==null&&Q0(N,y,"")}else{const y=N.display;V?ue!==t&&(N.cssText=t):ue&&se.removeAttribute("style"),"_vod"in se&&(N.display=y)}}const Lm=/\s*!important$/;function Q0(se,ue,t){if(Si(t))t.forEach(N=>Q0(se,ue,N));else if(t==null&&(t=""),ue.startsWith("--"))se.setProperty(ue,t);else{const N=BT(se,ue);Lm.test(t)?se.setProperty(lv(N),t.replace(Lm,""),"important"):se[N]=t}}const Pm=["Webkit","Moz","ms"],w0={};function BT(se,ue){const t=w0[ue];if(t)return t;let N=Vc(ue);if(N!=="filter"&&N in se)return w0[ue]=N;N=md(N);for(let V=0;V<Pm.length;V++){const y=Pm[V]+N;if(y in se)return w0[ue]=y}return ue}const Dm="http://www.w3.org/1999/xlink";function UT(se,ue,t,N,V){if(N&&ue.startsWith("xlink:"))t==null?se.removeAttributeNS(Dm,ue.slice(6,ue.length)):se.setAttributeNS(Dm,ue,t);else{const y=Ow(ue);t==null||y&&!P1(t)?se.removeAttribute(ue):se.setAttribute(ue,y?"":t)}}function VT(se,ue,t,N,V,y,c){if(ue==="innerHTML"||ue==="textContent"){N&&c(N,V,y),se[ue]=t==null?"":t;return}if(ue==="value"&&se.tagName!=="PROGRESS"&&!se.tagName.includes("-")){se._value=t;const T=t==null?"":t;(se.value!==T||se.tagName==="OPTION")&&(se.value=T),t==null&&se.removeAttribute(ue);return}let A=!1;if(t===""||t==null){const T=typeof se[ue];T==="boolean"?t=P1(t):t==null&&T==="string"?(t="",A=!0):T==="number"&&(t=0,A=!0)}try{se[ue]=t}catch{}A&&se.removeAttribute(ue)}function HT(se,ue,t,N){se.addEventListener(ue,t,N)}function GT(se,ue,t,N){se.removeEventListener(ue,t,N)}function YT(se,ue,t,N,V=null){const y=se._vei||(se._vei={}),c=y[ue];if(N&&c)c.value=N;else{const[A,T]=WT(ue);if(N){const e=y[ue]=ZT(N,V);HT(se,A,e,T)}else c&&(GT(se,A,c,T),y[ue]=void 0)}}const Rm=/(?:Once|Passive|Capture)$/;function WT(se){let ue;if(Rm.test(se)){ue={};let N;for(;N=se.match(Rm);)se=se.slice(0,se.length-N[0].length),ue[N[0].toLowerCase()]=!0}return[se[2]===":"?se.slice(3):lv(se.slice(2)),ue]}let T0=0;const XT=Promise.resolve(),jT=()=>T0||(XT.then(()=>T0=0),T0=Date.now());function ZT(se,ue){const t=N=>{if(!N._vts)N._vts=Date.now();else if(N._vts<=t.attached)return;oc(KT(N,t.value),ue,5,[N])};return t.value=se,t.attached=jT(),t}function KT(se,ue){if(Si(ue)){const t=se.stopImmediatePropagation;return se.stopImmediatePropagation=()=>{t.call(se),se._stopped=!0},ue.map(N=>V=>!V._stopped&&N&&N(V))}else return ue}const Im=/^on[a-z]/,JT=(se,ue,t,N,V=!1,y,c,A,T)=>{ue==="class"?OT(se,N,V):ue==="style"?NT(se,t,N):dd(ue)?ug(ue)||YT(se,ue,t,N,c):(ue[0]==="."?(ue=ue.slice(1),!0):ue[0]==="^"?(ue=ue.slice(1),!1):$T(se,ue,N,V))?VT(se,ue,N,y,c,A,T):(ue==="true-value"?se._trueValue=N:ue==="false-value"&&(se._falseValue=N),UT(se,ue,N,V))};function $T(se,ue,t,N){return N?!!(ue==="innerHTML"||ue==="textContent"||ue in se&&Im.test(ue)&&ji(t)):ue==="spellcheck"||ue==="draggable"||ue==="translate"||ue==="form"||ue==="list"&&se.tagName==="INPUT"||ue==="type"&&se.tagName==="TEXTAREA"||Im.test(ue)&&Ds(t)?!1:ue in se}const xf="transition",Ov="animation",kg=(se,{slots:ue})=>PT(fx,QT(se),ue);kg.displayName="Transition";const Rx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};kg.props=kl({},fx.props,Rx);const Kf=(se,ue=[])=>{Si(se)?se.forEach(t=>t(...ue)):se&&se(...ue)},Fm=se=>se?Si(se)?se.some(ue=>ue.length>1):se.length>1:!1;function QT(se){const ue={};for(const _ in se)_ in Rx||(ue[_]=se[_]);if(se.css===!1)return ue;const{name:t="v",type:N,duration:V,enterFromClass:y=`${t}-enter-from`,enterActiveClass:c=`${t}-enter-active`,enterToClass:A=`${t}-enter-to`,appearFromClass:T=y,appearActiveClass:e=c,appearToClass:a=A,leaveFromClass:i=`${t}-leave-from`,leaveActiveClass:n=`${t}-leave-active`,leaveToClass:r=`${t}-leave-to`}=se,v=qT(V),s=v&&v[0],o=v&&v[1],{onBeforeEnter:b,onEnter:g,onEnterCancelled:d,onLeave:f,onLeaveCancelled:m,onBeforeAppear:l=b,onAppear:x=g,onAppearCancelled:u=d}=ue,M=(_,h,L)=>{Jf(_,h?a:A),Jf(_,h?e:c),L&&L()},w=(_,h)=>{_._isLeaving=!1,Jf(_,i),Jf(_,r),Jf(_,n),h&&h()},p=_=>(h,L)=>{const E=_?x:g,S=()=>M(h,_,L);Kf(E,[h,S]),zm(()=>{Jf(h,_?T:y),bf(h,_?a:A),Fm(E)||Om(h,N,s,S)})};return kl(ue,{onBeforeEnter(_){Kf(b,[_]),bf(_,y),bf(_,c)},onBeforeAppear(_){Kf(l,[_]),bf(_,T),bf(_,e)},onEnter:p(!1),onAppear:p(!0),onLeave(_,h){_._isLeaving=!0;const L=()=>w(_,h);bf(_,i),rA(),bf(_,n),zm(()=>{!_._isLeaving||(Jf(_,i),bf(_,r),Fm(f)||Om(_,N,o,L))}),Kf(f,[_,L])},onEnterCancelled(_){M(_,!1),Kf(d,[_])},onAppearCancelled(_){M(_,!0),Kf(u,[_])},onLeaveCancelled(_){w(_),Kf(m,[_])}})}function qT(se){if(se==null)return null;if(Jo(se))return[A0(se.enter),A0(se.leave)];{const ue=A0(se);return[ue,ue]}}function A0(se){return vg(se)}function bf(se,ue){ue.split(/\s+/).forEach(t=>t&&se.classList.add(t)),(se._vtc||(se._vtc=new Set)).add(ue)}function Jf(se,ue){ue.split(/\s+/).forEach(N=>N&&se.classList.remove(N));const{_vtc:t}=se;t&&(t.delete(ue),t.size||(se._vtc=void 0))}function zm(se){requestAnimationFrame(()=>{requestAnimationFrame(se)})}let eA=0;function Om(se,ue,t,N){const V=se._endId=++eA,y=()=>{V===se._endId&&N()};if(t)return setTimeout(y,t);const{type:c,timeout:A,propCount:T}=tA(se,ue);if(!c)return N();const e=c+"end";let a=0;const i=()=>{se.removeEventListener(e,n),y()},n=r=>{r.target===se&&++a>=T&&i()};setTimeout(()=>{a<T&&i()},A+1),se.addEventListener(e,n)}function tA(se,ue){const t=window.getComputedStyle(se),N=v=>(t[v]||"").split(", "),V=N(`${xf}Delay`),y=N(`${xf}Duration`),c=Nm(V,y),A=N(`${Ov}Delay`),T=N(`${Ov}Duration`),e=Nm(A,T);let a=null,i=0,n=0;ue===xf?c>0&&(a=xf,i=c,n=y.length):ue===Ov?e>0&&(a=Ov,i=e,n=T.length):(i=Math.max(c,e),a=i>0?c>e?xf:Ov:null,n=a?a===xf?y.length:T.length:0);const r=a===xf&&/\b(transform|all)(,|$)/.test(N(`${xf}Property`).toString());return{type:a,timeout:i,propCount:n,hasTransform:r}}function Nm(se,ue){for(;se.length<ue.length;)se=se.concat(se);return Math.max(...ue.map((t,N)=>Bm(t)+Bm(se[N])))}function Bm(se){return Number(se.slice(0,-1).replace(",","."))*1e3}function rA(){return document.body.offsetHeight}const nA=["ctrl","shift","alt","meta"],aA={stop:se=>se.stopPropagation(),prevent:se=>se.preventDefault(),self:se=>se.target!==se.currentTarget,ctrl:se=>!se.ctrlKey,shift:se=>!se.shiftKey,alt:se=>!se.altKey,meta:se=>!se.metaKey,left:se=>"button"in se&&se.button!==0,middle:se=>"button"in se&&se.button!==1,right:se=>"button"in se&&se.button!==2,exact:(se,ue)=>nA.some(t=>se[`${t}Key`]&&!ue.includes(t))},Um=(se,ue)=>(t,...N)=>{for(let V=0;V<ue.length;V++){const y=aA[ue[V]];if(y&&y(t,ue))return}return se(t,...N)},Vm={beforeMount(se,{value:ue},{transition:t}){se._vod=se.style.display==="none"?"":se.style.display,t&&ue?t.beforeEnter(se):Nv(se,ue)},mounted(se,{value:ue},{transition:t}){t&&ue&&t.enter(se)},updated(se,{value:ue,oldValue:t},{transition:N}){!ue!=!t&&(N?ue?(N.beforeEnter(se),Nv(se,!0),N.enter(se)):N.leave(se,()=>{Nv(se,!1)}):Nv(se,ue))},beforeUnmount(se,{value:ue}){Nv(se,ue)}};function Nv(se,ue){se.style.display=ue?se._vod:"none"}const iA=kl({patchProp:JT},zT);let Hm;function oA(){return Hm||(Hm=gT(iA))}const sA=(...se)=>{const ue=oA().createApp(...se),{mount:t}=ue;return ue.mount=N=>{const V=lA(N);if(!V)return;const y=ue._component;!ji(y)&&!y.render&&!y.template&&(y.template=V.innerHTML),V.innerHTML="";const c=t(V,!1,V instanceof SVGElement);return V instanceof Element&&(V.removeAttribute("v-cloak"),V.setAttribute("data-v-app","")),c},ue};function lA(se){return Ds(se)?document.querySelector(se):se}var uA=!1;/*!
  * pinia v2.0.25
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let Ix;const kd=se=>Ix=se,Fx=Symbol();function q0(se){return se&&typeof se=="object"&&Object.prototype.toString.call(se)==="[object Object]"&&typeof se.toJSON!="function"}var Xv;(function(se){se.direct="direct",se.patchObject="patch object",se.patchFunction="patch function"})(Xv||(Xv={}));function cA(){const se=N1(!0),ue=se.run(()=>Af({}));let t=[],N=[];const V=qh({install(y){kd(V),V._a=y,y.provide(Fx,V),y.config.globalProperties.$pinia=V,N.forEach(c=>t.push(c)),N=[]},use(y){return!this._a&&!uA?N.push(y):t.push(y),this},_p:t,_a:null,_e:se,_s:new Map,state:ue});return V}const zx=()=>{};function Gm(se,ue,t,N=zx){se.push(ue);const V=()=>{const y=se.indexOf(ue);y>-1&&(se.splice(y,1),N())};return!t&&Xw()&&jw(V),V}function Bh(se,...ue){se.slice().forEach(t=>{t(...ue)})}function eg(se,ue){se instanceof Map&&ue instanceof Map&&ue.forEach((t,N)=>se.set(N,t)),se instanceof Set&&ue instanceof Set&&ue.forEach(se.add,se);for(const t in ue){if(!ue.hasOwnProperty(t))continue;const N=ue[t],V=se[t];q0(V)&&q0(N)&&se.hasOwnProperty(t)&&!Ps(N)&&!Ef(N)?se[t]=eg(V,N):se[t]=N}return se}const fA=Symbol();function hA(se){return!q0(se)||!se.hasOwnProperty(fA)}const{assign:Tf}=Object;function vA(se){return!!(Ps(se)&&se.effect)}function pA(se,ue,t,N){const{state:V,actions:y,getters:c}=ue,A=t.state.value[se];let T;function e(){A||(t.state.value[se]=V?V():{});const a=T3(t.state.value[se]);return Tf(a,y,Object.keys(c||{}).reduce((i,n)=>(i[n]=qh(ud(()=>{kd(t);const r=t._s.get(se);return c[n].call(r,r)})),i),{}))}return T=Ox(se,e,ue,t,N,!0),T.$reset=function(){const i=V?V():{};this.$patch(n=>{Tf(n,i)})},T}function Ox(se,ue,t={},N,V,y){let c;const A=Tf({actions:{}},t),T={deep:!0};let e,a,i=qh([]),n=qh([]),r;const v=N.state.value[se];!y&&!v&&(N.state.value[se]={}),Af({});let s;function o(x){let u;e=a=!1,typeof x=="function"?(x(N.state.value[se]),u={type:Xv.patchFunction,storeId:se,events:r}):(eg(N.state.value[se],x),u={type:Xv.patchObject,payload:x,storeId:se,events:r});const M=s=Symbol();rx().then(()=>{s===M&&(e=!0)}),a=!0,Bh(i,u,N.state.value[se])}const b=zx;function g(){c.stop(),i=[],n=[],N._s.delete(se)}function d(x,u){return function(){kd(N);const M=Array.from(arguments),w=[],p=[];function _(E){w.push(E)}function h(E){p.push(E)}Bh(n,{args:M,name:x,store:m,after:_,onError:h});let L;try{L=u.apply(this&&this.$id===se?this:m,M)}catch(E){throw Bh(p,E),E}return L instanceof Promise?L.then(E=>(Bh(w,E),E)).catch(E=>(Bh(p,E),Promise.reject(E))):(Bh(w,L),L)}}const f={_p:N,$id:se,$onAction:Gm.bind(null,n),$patch:o,$reset:b,$subscribe(x,u={}){const M=Gm(i,x,u.detached,()=>w()),w=c.run(()=>$p(()=>N.state.value[se],p=>{(u.flush==="sync"?a:e)&&x({storeId:se,type:Xv.direct,events:r},p)},Tf({},T,u)));return M},$dispose:g},m=bd(f);N._s.set(se,m);const l=N._e.run(()=>(c=N1(),c.run(()=>ue())));for(const x in l){const u=l[x];if(Ps(u)&&!vA(u)||Ef(u))y||(v&&hA(u)&&(Ps(u)?u.value=v[x]:eg(u,v[x])),N.state.value[se][x]=u);else if(typeof u=="function"){const M=d(x,u);l[x]=M,A.actions[x]=u}}return Tf(m,l),Tf(xo(m),l),Object.defineProperty(m,"$state",{get:()=>N.state.value[se],set:x=>{o(u=>{Tf(u,x)})}}),N._p.forEach(x=>{Tf(m,c.run(()=>x({store:m,app:N._a,pinia:N,options:A})))}),v&&y&&t.hydrate&&t.hydrate(m.$state,v),e=!0,a=!0,m}function dA(se,ue,t){let N,V;const y=typeof ue=="function";typeof se=="string"?(N=se,V=y?t:ue):(V=se,N=se.id);function c(A,T){const e=Lx();return A=A||e&&Hv(Fx),A&&kd(A),A=Ix,A._s.has(N)||(y?Ox(N,ue,V,A):pA(N,V,A)),A._s.get(N)}return c.$id=N,c}var Uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gA(se){return se&&se.__esModule&&Object.prototype.hasOwnProperty.call(se,"default")?se.default:se}function yA(se){var ue=se.default;if(typeof ue=="function"){var t=function(){return ue.apply(this,arguments)};t.prototype=ue.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(se).forEach(function(N){var V=Object.getOwnPropertyDescriptor(se,N);Object.defineProperty(t,N,V.get?V:{enumerable:!0,get:function(){return se[N]}})}),t}function Vp(se){throw new Error('Could not dynamically require "'+se+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nx={exports:{}};(function(se,ue){(function(t){se.exports=t()})(function(){return function(){function t(N,V,y){function c(e,a){if(!V[e]){if(!N[e]){var i=typeof Vp=="function"&&Vp;if(!a&&i)return i(e,!0);if(A)return A(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=V[e]={exports:{}};N[e][0].call(r.exports,function(v){var s=N[e][1][v];return c(s||v)},r,r.exports,t,N,V,y)}return V[e].exports}for(var A=typeof Vp=="function"&&Vp,T=0;T<y.length;T++)c(y[T]);return c}return t}()({1:[function(t,N,V){var y=t("../src/lib"),c={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var A in c){var T=A.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");y.addStyleRule(T,c[A])}},{"../src/lib":515}],2:[function(t,N,V){N.exports=t("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(t,N,V){N.exports=t("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(t,N,V){N.exports=t("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(t,N,V){N.exports=t("../src/traces/box")},{"../src/traces/box":688}],6:[function(t,N,V){N.exports=t("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(t,N,V){N.exports=t("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(t,N,V){N.exports=t("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(t,N,V){N.exports=t("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(t,N,V){N.exports=t("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(t,N,V){N.exports=t("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(t,N,V){N.exports=t("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(t,N,V){N.exports=t("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(t,N,V){N.exports=t("../src/core")},{"../src/core":493}],15:[function(t,N,V){N.exports=t("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(t,N,V){N.exports=t("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(t,N,V){N.exports=t("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(t,N,V){N.exports=t("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(t,N,V){N.exports=t("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(t,N,V){N.exports=t("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(t,N,V){N.exports=t("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(t,N,V){N.exports=t("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(t,N,V){N.exports=t("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(t,N,V){N.exports=t("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(t,N,V){N.exports=t("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(t,N,V){N.exports=t("../src/traces/image")},{"../src/traces/image":861}],27:[function(t,N,V){var y=t("./core");y.register([t("./bar"),t("./box"),t("./heatmap"),t("./histogram"),t("./histogram2d"),t("./histogram2dcontour"),t("./contour"),t("./scatterternary"),t("./violin"),t("./funnel"),t("./waterfall"),t("./image"),t("./pie"),t("./sunburst"),t("./treemap"),t("./icicle"),t("./funnelarea"),t("./scatter3d"),t("./surface"),t("./isosurface"),t("./volume"),t("./mesh3d"),t("./cone"),t("./streamtube"),t("./scattergeo"),t("./choropleth"),t("./scattergl"),t("./splom"),t("./pointcloud"),t("./heatmapgl"),t("./parcoords"),t("./parcats"),t("./scattermapbox"),t("./choroplethmapbox"),t("./densitymapbox"),t("./sankey"),t("./indicator"),t("./table"),t("./carpet"),t("./scattercarpet"),t("./contourcarpet"),t("./ohlc"),t("./candlestick"),t("./scatterpolar"),t("./scatterpolargl"),t("./barpolar"),t("./scattersmith"),t("./aggregate"),t("./filter"),t("./groupby"),t("./sort"),t("./calendars")]),N.exports=y},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(t,N,V){N.exports=t("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(t,N,V){N.exports=t("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(t,N,V){N.exports=t("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(t,N,V){N.exports=t("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(t,N,V){N.exports=t("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(t,N,V){N.exports=t("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(t,N,V){N.exports=t("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(t,N,V){N.exports=t("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(t,N,V){N.exports=t("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(t,N,V){N.exports=t("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(t,N,V){N.exports=t("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(t,N,V){N.exports=t("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(t,N,V){N.exports=t("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(t,N,V){N.exports=t("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(t,N,V){N.exports=t("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(t,N,V){N.exports=t("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(t,N,V){N.exports=t("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(t,N,V){N.exports=t("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(t,N,V){N.exports=t("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(t,N,V){N.exports=t("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(t,N,V){N.exports=t("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(t,N,V){N.exports=t("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(t,N,V){N.exports=t("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(t,N,V){N.exports=t("../src/traces/table")},{"../src/traces/table":1082}],52:[function(t,N,V){N.exports=t("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(t,N,V){N.exports=t("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(t,N,V){N.exports=t("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(t,N,V){N.exports=t("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V,t("d3-array"),t("d3-collection"),t("d3-shape"),t("elementary-circuits-directed-graph")):c(y.d3=y.d3||{},y.d3,y.d3,y.d3,null)})(this,function(y,c,A,T,e){e=e&&e.hasOwnProperty("default")?e.default:e;function a(fe){return fe.target.depth}function i(fe){return fe.depth}function n(fe,ye){return ye-1-fe.height}function r(fe,ye){return fe.sourceLinks.length?fe.depth:ye-1}function v(fe){return fe.targetLinks.length?fe.depth:fe.sourceLinks.length?c.min(fe.sourceLinks,a)-1:0}function s(fe){return function(){return fe}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe};function b(fe,ye){return d(fe.source,ye.source)||fe.index-ye.index}function g(fe,ye){return d(fe.target,ye.target)||fe.index-ye.index}function d(fe,ye){return fe.partOfCycle===ye.partOfCycle?fe.y0-ye.y0:fe.circularLinkType==="top"||ye.circularLinkType==="bottom"?-1:1}function f(fe){return fe.value}function m(fe){return(fe.y0+fe.y1)/2}function l(fe){return m(fe.source)}function x(fe){return m(fe.target)}function u(fe){return fe.index}function M(fe){return fe.nodes}function w(fe){return fe.links}function p(fe,ye){var xe=fe.get(ye);if(!xe)throw new Error("missing: "+ye);return xe}function _(fe,ye){return ye(fe)}var h=25,L=10,E=.3;function S(){var fe=0,ye=0,xe=1,me=1,be=24,ke,De=u,He=r,Ae=M,Le=w,Ze=32,We=2,ze,Ie=null;function Ve(){var Lt={nodes:Ae.apply(null,arguments),links:Le.apply(null,arguments)};dt(Lt),P(Lt,De,Ie),Ft(Lt),Ct(Lt),F(Lt,De),jt(Lt,Ze,De),Nt(Lt);for(var Xe=4,it=0;it<Xe;it++)Q(Lt,me,De),ie(Lt,me,De),q(Lt,ye,me,De),Q(Lt,me,De),ie(Lt,me,De);return _e(Lt,ye,me),G(Lt,We,me,De),Lt}Ve.nodeId=function(Lt){return arguments.length?(De=typeof Lt=="function"?Lt:s(Lt),Ve):De},Ve.nodeAlign=function(Lt){return arguments.length?(He=typeof Lt=="function"?Lt:s(Lt),Ve):He},Ve.nodeWidth=function(Lt){return arguments.length?(be=+Lt,Ve):be},Ve.nodePadding=function(Lt){return arguments.length?(ke=+Lt,Ve):ke},Ve.nodes=function(Lt){return arguments.length?(Ae=typeof Lt=="function"?Lt:s(Lt),Ve):Ae},Ve.links=function(Lt){return arguments.length?(Le=typeof Lt=="function"?Lt:s(Lt),Ve):Le},Ve.size=function(Lt){return arguments.length?(fe=ye=0,xe=+Lt[0],me=+Lt[1],Ve):[xe-fe,me-ye]},Ve.extent=function(Lt){return arguments.length?(fe=+Lt[0][0],xe=+Lt[1][0],ye=+Lt[0][1],me=+Lt[1][1],Ve):[[fe,ye],[xe,me]]},Ve.iterations=function(Lt){return arguments.length?(Ze=+Lt,Ve):Ze},Ve.circularLinkGap=function(Lt){return arguments.length?(We=+Lt,Ve):We},Ve.nodePaddingRatio=function(Lt){return arguments.length?(ze=+Lt,Ve):ze},Ve.sortNodes=function(Lt){return arguments.length?(Ie=Lt,Ve):Ie},Ve.update=function(Lt){return F(Lt,De),Nt(Lt),Lt.links.forEach(function(Xe){Xe.circular&&(Xe.circularLinkType=Xe.y0+Xe.y1<me?"top":"bottom",Xe.source.circularLinkType=Xe.circularLinkType,Xe.target.circularLinkType=Xe.circularLinkType)}),Q(Lt,me,De,!1),ie(Lt,me,De),G(Lt,We,me,De),Lt};function dt(Lt){Lt.nodes.forEach(function(it,Ye){it.index=Ye,it.sourceLinks=[],it.targetLinks=[]});var Xe=A.map(Lt.nodes,De);return Lt.links.forEach(function(it,Ye){it.index=Ye;var Ee=it.source,Ge=it.target;(typeof Ee>"u"?"undefined":o(Ee))!=="object"&&(Ee=it.source=p(Xe,Ee)),(typeof Ge>"u"?"undefined":o(Ge))!=="object"&&(Ge=it.target=p(Xe,Ge)),Ee.sourceLinks.push(it),Ge.targetLinks.push(it)}),Lt}function Ft(Lt){Lt.nodes.forEach(function(Xe){Xe.partOfCycle=!1,Xe.value=Math.max(c.sum(Xe.sourceLinks,f),c.sum(Xe.targetLinks,f)),Xe.sourceLinks.forEach(function(it){it.circular&&(Xe.partOfCycle=!0,Xe.circularLinkType=it.circularLinkType)}),Xe.targetLinks.forEach(function(it){it.circular&&(Xe.partOfCycle=!0,Xe.circularLinkType=it.circularLinkType)})})}function Qt(Lt){var Xe=0,it=0,Ye=0,Ee=0,Ge=c.max(Lt.nodes,function(Ke){return Ke.column});return Lt.links.forEach(function(Ke){Ke.circular&&(Ke.circularLinkType=="top"?Xe=Xe+Ke.width:it=it+Ke.width,Ke.target.column==0&&(Ee=Ee+Ke.width),Ke.source.column==Ge&&(Ye=Ye+Ke.width))}),Xe=Xe>0?Xe+h+L:Xe,it=it>0?it+h+L:it,Ye=Ye>0?Ye+h+L:Ye,Ee=Ee>0?Ee+h+L:Ee,{top:Xe,bottom:it,left:Ee,right:Ye}}function Ot(Lt,Xe){var it=c.max(Lt.nodes,function(mt){return mt.column}),Ye=xe-fe,Ee=me-ye,Ge=Ye+Xe.right+Xe.left,Ke=Ee+Xe.top+Xe.bottom,qe=Ye/Ge,At=Ee/Ke;return fe=fe*qe+Xe.left,xe=Xe.right==0?xe:xe*qe,ye=ye*At+Xe.top,me=me*At,Lt.nodes.forEach(function(mt){mt.x0=fe+mt.column*((xe-fe-be)/it),mt.x1=mt.x0+be}),At}function Ct(Lt){var Xe,it,Ye;for(Xe=Lt.nodes,it=[],Ye=0;Xe.length;++Ye,Xe=it,it=[])Xe.forEach(function(Ee){Ee.depth=Ye,Ee.sourceLinks.forEach(function(Ge){it.indexOf(Ge.target)<0&&!Ge.circular&&it.push(Ge.target)})});for(Xe=Lt.nodes,it=[],Ye=0;Xe.length;++Ye,Xe=it,it=[])Xe.forEach(function(Ee){Ee.height=Ye,Ee.targetLinks.forEach(function(Ge){it.indexOf(Ge.source)<0&&!Ge.circular&&it.push(Ge.source)})});Lt.nodes.forEach(function(Ee){Ee.column=Math.floor(He.call(null,Ee,Ye))})}function jt(Lt,Xe,it){var Ye=A.nest().key(function(mt){return mt.column}).sortKeys(c.ascending).entries(Lt.nodes).map(function(mt){return mt.values});Ke(it),At();for(var Ee=1,Ge=Xe;Ge>0;--Ge)qe(Ee*=.99,it),At();function Ke(mt){if(ze){var Mt=1/0;Ye.forEach(function(Zt){var Wt=me*ze/(Zt.length+1);Mt=Wt<Mt?Wt:Mt}),ke=Mt}var Gt=c.min(Ye,function(Zt){return(me-ye-(Zt.length-1)*ke)/c.sum(Zt,f)});Gt=Gt*E,Lt.links.forEach(function(Zt){Zt.width=Zt.value*Gt});var zt=Qt(Lt),Ht=Ot(Lt,zt);Gt=Gt*Ht,Lt.links.forEach(function(Zt){Zt.width=Zt.value*Gt}),Ye.forEach(function(Zt){var Wt=Zt.length;Zt.forEach(function(sr,Gr){sr.depth==Ye.length-1&&Wt==1||sr.depth==0&&Wt==1?(sr.y0=me/2-sr.value*Gt,sr.y1=sr.y0+sr.value*Gt):sr.partOfCycle?R(sr,mt)==0?(sr.y0=me/2+Gr,sr.y1=sr.y0+sr.value*Gt):sr.circularLinkType=="top"?(sr.y0=ye+Gr,sr.y1=sr.y0+sr.value*Gt):(sr.y0=me-sr.value*Gt-Gr,sr.y1=sr.y0+sr.value*Gt):zt.top==0||zt.bottom==0?(sr.y0=(me-ye)/Wt*Gr,sr.y1=sr.y0+sr.value*Gt):(sr.y0=(me-ye)/2-Wt/2+Gr,sr.y1=sr.y0+sr.value*Gt)})})}function qe(mt,Mt){var Gt=Ye.length;Ye.forEach(function(zt){var Ht=zt.length,Zt=zt[0].depth;zt.forEach(function(Wt){var sr;if((Wt.sourceLinks.length||Wt.targetLinks.length)&&!(Wt.partOfCycle&&R(Wt,Mt)>0))if(Zt==0&&Ht==1)sr=Wt.y1-Wt.y0,Wt.y0=me/2-sr/2,Wt.y1=me/2+sr/2;else if(Zt==Gt-1&&Ht==1)sr=Wt.y1-Wt.y0,Wt.y0=me/2-sr/2,Wt.y1=me/2+sr/2;else{var Gr=0,cn=c.mean(Wt.sourceLinks,x),qr=c.mean(Wt.targetLinks,l);cn&&qr?Gr=(cn+qr)/2:Gr=cn||qr;var st=(Gr-m(Wt))*mt;Wt.y0+=st,Wt.y1+=st}})})}function At(){Ye.forEach(function(mt){var Mt,Gt,zt=ye,Ht=mt.length,Zt;for(mt.sort(d),Zt=0;Zt<Ht;++Zt)Mt=mt[Zt],Gt=zt-Mt.y0,Gt>0&&(Mt.y0+=Gt,Mt.y1+=Gt),zt=Mt.y1+ke;if(Gt=zt-ke-me,Gt>0)for(zt=Mt.y0-=Gt,Mt.y1-=Gt,Zt=Ht-2;Zt>=0;--Zt)Mt=mt[Zt],Gt=Mt.y1+ke-zt,Gt>0&&(Mt.y0-=Gt,Mt.y1-=Gt),zt=Mt.y0})}}function Nt(Lt){Lt.nodes.forEach(function(Xe){Xe.sourceLinks.sort(g),Xe.targetLinks.sort(b)}),Lt.nodes.forEach(function(Xe){var it=Xe.y0,Ye=it,Ee=Xe.y1,Ge=Ee;Xe.sourceLinks.forEach(function(Ke){Ke.circular?(Ke.y0=Ee-Ke.width/2,Ee=Ee-Ke.width):(Ke.y0=it+Ke.width/2,it+=Ke.width)}),Xe.targetLinks.forEach(function(Ke){Ke.circular?(Ke.y1=Ge-Ke.width/2,Ge=Ge-Ke.width):(Ke.y1=Ye+Ke.width/2,Ye+=Ke.width)})})}return Ve}function P(fe,ye,xe){var me=0;if(xe===null){for(var be=[],ke=0;ke<fe.links.length;ke++){var De=fe.links[ke],He=De.source.index,Ae=De.target.index;be[He]||(be[He]=[]),be[Ae]||(be[Ae]=[]),be[He].indexOf(Ae)===-1&&be[He].push(Ae)}var Le=e(be);Le.sort(function(Ie,Ve){return Ie.length-Ve.length});var Ze={};for(ke=0;ke<Le.length;ke++){var We=Le[ke],ze=We.slice(-2);Ze[ze[0]]||(Ze[ze[0]]={}),Ze[ze[0]][ze[1]]=!0}fe.links.forEach(function(Ie){var Ve=Ie.target.index,dt=Ie.source.index;Ve===dt||Ze[dt]&&Ze[dt][Ve]?(Ie.circular=!0,Ie.circularLinkID=me,me=me+1):Ie.circular=!1})}else fe.links.forEach(function(Ie){Ie.source[xe]<Ie.target[xe]?Ie.circular=!1:(Ie.circular=!0,Ie.circularLinkID=me,me=me+1)})}function F(fe,ye){var xe=0,me=0;fe.links.forEach(function(be){be.circular&&(be.source.circularLinkType||be.target.circularLinkType?be.circularLinkType=be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:be.circularLinkType=xe<me?"top":"bottom",be.circularLinkType=="top"?xe=xe+1:me=me+1,fe.nodes.forEach(function(ke){(_(ke,ye)==_(be.source,ye)||_(ke,ye)==_(be.target,ye))&&(ke.circularLinkType=be.circularLinkType)}))}),fe.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),le(be,ye)&&(be.circularLinkType=be.source.circularLinkType))})}function I(fe){var ye=Math.abs(fe.y1-fe.y0),xe=Math.abs(fe.target.x0-fe.source.x1);return Math.atan(xe/ye)}function D(fe,ye){return fe.source.column<ye.target.column?!1:!(fe.target.column>ye.source.column)}function R(fe,ye){var xe=0;fe.sourceLinks.forEach(function(be){xe=be.circular&&!le(be,ye)?xe+1:xe});var me=0;return fe.targetLinks.forEach(function(be){me=be.circular&&!le(be,ye)?me+1:me}),xe+me}function O(fe){var ye=fe.source.sourceLinks,xe=0;ye.forEach(function(ke){xe=ke.circular?xe+1:xe});var me=fe.target.targetLinks,be=0;return me.forEach(function(ke){be=ke.circular?be+1:be}),!(xe>1||be>1)}function z(fe,ye,xe){return fe.sort(ee),fe.forEach(function(me,be){var ke=0;if(le(me,xe)&&O(me))me.circularPathData.verticalBuffer=ke+me.width/2;else{var De=0;for(De;De<be;De++)if(D(fe[be],fe[De])){var He=fe[De].circularPathData.verticalBuffer+fe[De].width/2+ye;ke=He>ke?He:ke}me.circularPathData.verticalBuffer=ke+me.width/2}}),fe}function G(fe,ye,xe,me){var be=5,ke=c.min(fe.links,function(Ae){return Ae.source.y0});fe.links.forEach(function(Ae){Ae.circular&&(Ae.circularPathData={})});var De=fe.links.filter(function(Ae){return Ae.circularLinkType=="top"});z(De,ye,me);var He=fe.links.filter(function(Ae){return Ae.circularLinkType=="bottom"});z(He,ye,me),fe.links.forEach(function(Ae){if(Ae.circular){if(Ae.circularPathData.arcRadius=Ae.width+L,Ae.circularPathData.leftNodeBuffer=be,Ae.circularPathData.rightNodeBuffer=be,Ae.circularPathData.sourceWidth=Ae.source.x1-Ae.source.x0,Ae.circularPathData.sourceX=Ae.source.x0+Ae.circularPathData.sourceWidth,Ae.circularPathData.targetX=Ae.target.x0,Ae.circularPathData.sourceY=Ae.y0,Ae.circularPathData.targetY=Ae.y1,le(Ae,me)&&O(Ae))Ae.circularPathData.leftSmallArcRadius=L+Ae.width/2,Ae.circularPathData.leftLargeArcRadius=L+Ae.width/2,Ae.circularPathData.rightSmallArcRadius=L+Ae.width/2,Ae.circularPathData.rightLargeArcRadius=L+Ae.width/2,Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Ae.source.y1+h+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ae.source.y0-h-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius);else{var Le=Ae.source.column,Ze=Ae.circularLinkType,We=fe.links.filter(function(Ve){return Ve.source.column==Le&&Ve.circularLinkType==Ze});Ae.circularLinkType=="bottom"?We.sort(X):We.sort(j);var ze=0;We.forEach(function(Ve,dt){Ve.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.leftSmallArcRadius=L+Ae.width/2+ze,Ae.circularPathData.leftLargeArcRadius=L+Ae.width/2+dt*ye+ze),ze=ze+Ve.width}),Le=Ae.target.column,We=fe.links.filter(function(Ve){return Ve.target.column==Le&&Ve.circularLinkType==Ze}),Ae.circularLinkType=="bottom"?We.sort(he):We.sort(ae),ze=0,We.forEach(function(Ve,dt){Ve.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.rightSmallArcRadius=L+Ae.width/2+ze,Ae.circularPathData.rightLargeArcRadius=L+Ae.width/2+dt*ye+ze),ze=ze+Ve.width}),Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Math.max(xe,Ae.source.y1,Ae.target.y1)+h+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=ke-h-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius)}Ae.circularPathData.leftInnerExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightInnerExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightNodeBuffer,Ae.circularPathData.leftFullExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftLargeArcRadius+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightFullExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightLargeArcRadius-Ae.circularPathData.rightNodeBuffer}if(Ae.circular)Ae.path=Y(Ae);else{var Ie=T.linkHorizontal().source(function(Ve){var dt=Ve.source.x0+(Ve.source.x1-Ve.source.x0),Ft=Ve.y0;return[dt,Ft]}).target(function(Ve){var dt=Ve.target.x0,Ft=Ve.y1;return[dt,Ft]});Ae.path=Ie(Ae)}})}function Y(fe){var ye="";return fe.circularLinkType=="top"?ye="M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 0 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY-fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 0 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 0 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY-fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 0 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY:ye="M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 1 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY+fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 1 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 1 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY+fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 1 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY,ye}function ee(fe,ye){return K(fe)==K(ye)?fe.circularLinkType=="bottom"?X(fe,ye):j(fe,ye):K(ye)-K(fe)}function j(fe,ye){return fe.y0-ye.y0}function X(fe,ye){return ye.y0-fe.y0}function ae(fe,ye){return fe.y1-ye.y1}function he(fe,ye){return ye.y1-fe.y1}function K(fe){return fe.target.column-fe.source.column}function J(fe){return fe.target.x0-fe.source.x1}function U(fe,ye){var xe=I(fe),me=J(ye)/Math.tan(xe),be=ne(fe)=="up"?fe.y1+me:fe.y1-me;return be}function H(fe,ye){var xe=I(fe),me=J(ye)/Math.tan(xe),be=ne(fe)=="up"?fe.y1-me:fe.y1+me;return be}function q(fe,ye,xe,me){fe.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var ke=be.source.column+1,De=be.target.column-1,He=1,Ae=De-ke+1;for(He=1;ke<=De;ke++,He++)fe.nodes.forEach(function(Le){if(Le.column==ke){var Ze=He/(Ae+1),We=Math.pow(1-Ze,3),ze=3*Ze*Math.pow(1-Ze,2),Ie=3*Math.pow(Ze,2)*(1-Ze),Ve=Math.pow(Ze,3),dt=We*be.y0+ze*be.y0+Ie*be.y1+Ve*be.y1,Ft=dt-be.width/2,Qt=dt+be.width/2,Ot;Ft>Le.y0&&Ft<Le.y1?(Ot=Le.y1-Ft+10,Ot=Le.circularLinkType=="bottom"?Ot:-Ot,Le=Z(Le,Ot,ye,xe),fe.nodes.forEach(function(Ct){_(Ct,me)==_(Le,me)||Ct.column!=Le.column||re(Le,Ct)&&Z(Ct,Ot,ye,xe)})):Qt>Le.y0&&Qt<Le.y1?(Ot=Qt-Le.y0+10,Le=Z(Le,Ot,ye,xe),fe.nodes.forEach(function(Ct){_(Ct,me)==_(Le,me)||Ct.column!=Le.column||Ct.y0<Le.y1&&Ct.y1>Le.y1&&Z(Ct,Ot,ye,xe)})):Ft<Le.y0&&Qt>Le.y1&&(Ot=Qt-Le.y0+10,Le=Z(Le,Ot,ye,xe),fe.nodes.forEach(function(Ct){_(Ct,me)==_(Le,me)||Ct.column!=Le.column||Ct.y0<Le.y1&&Ct.y1>Le.y1&&Z(Ct,Ot,ye,xe)}))}})}})}function re(fe,ye){return fe.y0>ye.y0&&fe.y0<ye.y1||fe.y1>ye.y0&&fe.y1<ye.y1?!0:fe.y0<ye.y0&&fe.y1>ye.y1}function Z(fe,ye,xe,me){return fe.y0+ye>=xe&&fe.y1+ye<=me&&(fe.y0=fe.y0+ye,fe.y1=fe.y1+ye,fe.targetLinks.forEach(function(be){be.y1=be.y1+ye}),fe.sourceLinks.forEach(function(be){be.y0=be.y0+ye})),fe}function Q(fe,ye,xe,me){fe.nodes.forEach(function(be){me&&be.y+(be.y1-be.y0)>ye&&(be.y=be.y-(be.y+(be.y1-be.y0)-ye));var ke=fe.links.filter(function(Ae){return _(Ae.source,xe)==_(be,xe)}),De=ke.length;De>1&&ke.sort(function(Ae,Le){if(!Ae.circular&&!Le.circular){if(Ae.target.column==Le.target.column)return Ae.y1-Le.y1;if(oe(Ae,Le)){if(Ae.target.column>Le.target.column){var Ze=H(Le,Ae);return Ae.y1-Ze}if(Le.target.column>Ae.target.column){var We=H(Ae,Le);return We-Le.y1}}else return Ae.y1-Le.y1}if(Ae.circular&&!Le.circular)return Ae.circularLinkType=="top"?-1:1;if(Le.circular&&!Ae.circular)return Le.circularLinkType=="top"?1:-1;if(Ae.circular&&Le.circular)return Ae.circularLinkType===Le.circularLinkType&&Ae.circularLinkType=="top"?Ae.target.column===Le.target.column?Ae.target.y1-Le.target.y1:Le.target.column-Ae.target.column:Ae.circularLinkType===Le.circularLinkType&&Ae.circularLinkType=="bottom"?Ae.target.column===Le.target.column?Le.target.y1-Ae.target.y1:Ae.target.column-Le.target.column:Ae.circularLinkType=="top"?-1:1});var He=be.y0;ke.forEach(function(Ae){Ae.y0=He+Ae.width/2,He=He+Ae.width}),ke.forEach(function(Ae,Le){if(Ae.circularLinkType=="bottom"){var Ze=Le+1,We=0;for(Ze;Ze<De;Ze++)We=We+ke[Ze].width;Ae.y0=be.y1-We-Ae.width/2}})})}function ie(fe,ye,xe){fe.nodes.forEach(function(me){var be=fe.links.filter(function(He){return _(He.target,xe)==_(me,xe)}),ke=be.length;ke>1&&be.sort(function(He,Ae){if(!He.circular&&!Ae.circular){if(He.source.column==Ae.source.column)return He.y0-Ae.y0;if(oe(He,Ae)){if(Ae.source.column<He.source.column){var Le=U(Ae,He);return He.y0-Le}if(He.source.column<Ae.source.column){var Ze=U(He,Ae);return Ze-Ae.y0}}else return He.y0-Ae.y0}if(He.circular&&!Ae.circular)return He.circularLinkType=="top"?-1:1;if(Ae.circular&&!He.circular)return Ae.circularLinkType=="top"?1:-1;if(He.circular&&Ae.circular)return He.circularLinkType===Ae.circularLinkType&&He.circularLinkType=="top"?He.source.column===Ae.source.column?He.source.y1-Ae.source.y1:He.source.column-Ae.source.column:He.circularLinkType===Ae.circularLinkType&&He.circularLinkType=="bottom"?He.source.column===Ae.source.column?He.source.y1-Ae.source.y1:Ae.source.column-He.source.column:He.circularLinkType=="top"?-1:1});var De=me.y0;be.forEach(function(He){He.y1=De+He.width/2,De=De+He.width}),be.forEach(function(He,Ae){if(He.circularLinkType=="bottom"){var Le=Ae+1,Ze=0;for(Le;Le<ke;Le++)Ze=Ze+be[Le].width;He.y1=me.y1-Ze-He.width/2}})})}function oe(fe,ye){return ne(fe)==ne(ye)}function ne(fe){return fe.y0-fe.y1>0?"up":"down"}function le(fe,ye){return _(fe.source,ye)==_(fe.target,ye)}function _e(fe,ye,xe){var me=fe.nodes,be=fe.links,ke=!1,De=!1;if(be.forEach(function(ze){ze.circularLinkType=="top"?ke=!0:ze.circularLinkType=="bottom"&&(De=!0)}),ke==!1||De==!1){var He=c.min(me,function(ze){return ze.y0}),Ae=c.max(me,function(ze){return ze.y1}),Le=Ae-He,Ze=xe-ye,We=Ze/Le;me.forEach(function(ze){var Ie=(ze.y1-ze.y0)*We;ze.y0=(ze.y0-He)*We,ze.y1=ze.y0+Ie}),be.forEach(function(ze){ze.y0=(ze.y0-He)*We,ze.y1=(ze.y1-He)*We,ze.width=ze.width*We})}}y.sankeyCircular=S,y.sankeyCenter=v,y.sankeyLeft=i,y.sankeyRight=n,y.sankeyJustify=r,Object.defineProperty(y,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V,t("d3-array"),t("d3-collection"),t("d3-shape")):c(y.d3=y.d3||{},y.d3,y.d3,y.d3)})(this,function(y,c,A,T){function e(L){return L.target.depth}function a(L){return L.depth}function i(L,E){return E-1-L.height}function n(L,E){return L.sourceLinks.length?L.depth:E-1}function r(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?c.min(L.sourceLinks,e)-1:0}function v(L){return function(){return L}}function s(L,E){return b(L.source,E.source)||L.index-E.index}function o(L,E){return b(L.target,E.target)||L.index-E.index}function b(L,E){return L.y0-E.y0}function g(L){return L.value}function d(L){return(L.y0+L.y1)/2}function f(L){return d(L.source)*L.value}function m(L){return d(L.target)*L.value}function l(L){return L.index}function x(L){return L.nodes}function u(L){return L.links}function M(L,E){var S=L.get(E);if(!S)throw new Error("missing: "+E);return S}var w=function(){var L=0,E=0,S=1,P=1,F=24,I=8,D=l,R=n,O=x,z=u,G=32,Y=2/3;function ee(){var J={nodes:O.apply(null,arguments),links:z.apply(null,arguments)};return j(J),X(J),ae(J),he(J),K(J),J}ee.update=function(J){return K(J),J},ee.nodeId=function(J){return arguments.length?(D=typeof J=="function"?J:v(J),ee):D},ee.nodeAlign=function(J){return arguments.length?(R=typeof J=="function"?J:v(J),ee):R},ee.nodeWidth=function(J){return arguments.length?(F=+J,ee):F},ee.nodePadding=function(J){return arguments.length?(I=+J,ee):I},ee.nodes=function(J){return arguments.length?(O=typeof J=="function"?J:v(J),ee):O},ee.links=function(J){return arguments.length?(z=typeof J=="function"?J:v(J),ee):z},ee.size=function(J){return arguments.length?(L=E=0,S=+J[0],P=+J[1],ee):[S-L,P-E]},ee.extent=function(J){return arguments.length?(L=+J[0][0],S=+J[1][0],E=+J[0][1],P=+J[1][1],ee):[[L,E],[S,P]]},ee.iterations=function(J){return arguments.length?(G=+J,ee):G};function j(J){J.nodes.forEach(function(H,q){H.index=q,H.sourceLinks=[],H.targetLinks=[]});var U=A.map(J.nodes,D);J.links.forEach(function(H,q){H.index=q;var re=H.source,Z=H.target;typeof re!="object"&&(re=H.source=M(U,re)),typeof Z!="object"&&(Z=H.target=M(U,Z)),re.sourceLinks.push(H),Z.targetLinks.push(H)})}function X(J){J.nodes.forEach(function(U){U.value=Math.max(c.sum(U.sourceLinks,g),c.sum(U.targetLinks,g))})}function ae(J){var U,H,q;for(U=J.nodes,H=[],q=0;U.length;++q,U=H,H=[])U.forEach(function(Z){Z.depth=q,Z.sourceLinks.forEach(function(Q){H.indexOf(Q.target)<0&&H.push(Q.target)})});for(U=J.nodes,H=[],q=0;U.length;++q,U=H,H=[])U.forEach(function(Z){Z.height=q,Z.targetLinks.forEach(function(Q){H.indexOf(Q.source)<0&&H.push(Q.source)})});var re=(S-L-F)/(q-1);J.nodes.forEach(function(Z){Z.x1=(Z.x0=L+Math.max(0,Math.min(q-1,Math.floor(R.call(null,Z,q))))*re)+F})}function he(J){var U=A.nest().key(function(oe){return oe.x0}).sortKeys(c.ascending).entries(J.nodes).map(function(oe){return oe.values});re(),ie();for(var H=1,q=G;q>0;--q)Q(H*=.99),ie(),Z(H),ie();function re(){var oe=c.max(U,function(_e){return _e.length}),ne=Y*(P-E)/(oe-1);I>ne&&(I=ne);var le=c.min(U,function(_e){return(P-E-(_e.length-1)*I)/c.sum(_e,g)});U.forEach(function(_e){_e.forEach(function(fe,ye){fe.y1=(fe.y0=ye)+fe.value*le})}),J.links.forEach(function(_e){_e.width=_e.value*le})}function Z(oe){U.forEach(function(ne){ne.forEach(function(le){if(le.targetLinks.length){var _e=(c.sum(le.targetLinks,f)/c.sum(le.targetLinks,g)-d(le))*oe;le.y0+=_e,le.y1+=_e}})})}function Q(oe){U.slice().reverse().forEach(function(ne){ne.forEach(function(le){if(le.sourceLinks.length){var _e=(c.sum(le.sourceLinks,m)/c.sum(le.sourceLinks,g)-d(le))*oe;le.y0+=_e,le.y1+=_e}})})}function ie(){U.forEach(function(oe){var ne,le,_e=E,fe=oe.length,ye;for(oe.sort(b),ye=0;ye<fe;++ye)ne=oe[ye],le=_e-ne.y0,le>0&&(ne.y0+=le,ne.y1+=le),_e=ne.y1+I;if(le=_e-I-P,le>0)for(_e=ne.y0-=le,ne.y1-=le,ye=fe-2;ye>=0;--ye)ne=oe[ye],le=ne.y1+I-_e,le>0&&(ne.y0-=le,ne.y1-=le),_e=ne.y0})}}function K(J){J.nodes.forEach(function(U){U.sourceLinks.sort(o),U.targetLinks.sort(s)}),J.nodes.forEach(function(U){var H=U.y0,q=H;U.sourceLinks.forEach(function(re){re.y0=H+re.width/2,H+=re.width}),U.targetLinks.forEach(function(re){re.y1=q+re.width/2,q+=re.width})})}return ee};function p(L){return[L.source.x1,L.y0]}function _(L){return[L.target.x0,L.y1]}var h=function(){return T.linkHorizontal().source(p).target(_)};y.sankey=w,y.sankeyCenter=r,y.sankeyLeft=a,y.sankeyRight=i,y.sankeyJustify=n,y.sankeyLinkHorizontal=h,Object.defineProperty(y,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(t,N,V){(function(){var y={version:"3.8.0"},c=[].slice,A=function(ce){return c.call(ce)},T=self.document;function e(ce){return ce&&(ce.ownerDocument||ce.document||ce).documentElement}function a(ce){return ce&&(ce.ownerDocument&&ce.ownerDocument.defaultView||ce.document&&ce||ce.defaultView)}if(T)try{A(T.documentElement.childNodes)[0].nodeType}catch{A=function(Te){for(var Re=Te.length,Ue=new Array(Re);Re--;)Ue[Re]=Te[Re];return Ue}}if(Date.now||(Date.now=function(){return+new Date}),T)try{T.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,v=this.CSSStyleDeclaration.prototype,s=v.setProperty;i.setAttribute=function(Te,Re){n.call(this,Te,Re+"")},i.setAttributeNS=function(Te,Re,Ue){r.call(this,Te,Re,Ue+"")},v.setProperty=function(Te,Re,Ue){s.call(this,Te,Re+"",Ue)}}y.ascending=o;function o(ce,Te){return ce<Te?-1:ce>Te?1:ce>=Te?0:NaN}y.descending=function(ce,Te){return Te<ce?-1:Te>ce?1:Te>=ce?0:NaN},y.min=function(ce,Te){var Re=-1,Ue=ce.length,Be,$e;if(arguments.length===1){for(;++Re<Ue;)if(($e=ce[Re])!=null&&$e>=$e){Be=$e;break}for(;++Re<Ue;)($e=ce[Re])!=null&&Be>$e&&(Be=$e)}else{for(;++Re<Ue;)if(($e=Te.call(ce,ce[Re],Re))!=null&&$e>=$e){Be=$e;break}for(;++Re<Ue;)($e=Te.call(ce,ce[Re],Re))!=null&&Be>$e&&(Be=$e)}return Be},y.max=function(ce,Te){var Re=-1,Ue=ce.length,Be,$e;if(arguments.length===1){for(;++Re<Ue;)if(($e=ce[Re])!=null&&$e>=$e){Be=$e;break}for(;++Re<Ue;)($e=ce[Re])!=null&&$e>Be&&(Be=$e)}else{for(;++Re<Ue;)if(($e=Te.call(ce,ce[Re],Re))!=null&&$e>=$e){Be=$e;break}for(;++Re<Ue;)($e=Te.call(ce,ce[Re],Re))!=null&&$e>Be&&(Be=$e)}return Be},y.extent=function(ce,Te){var Re=-1,Ue=ce.length,Be,$e,wt;if(arguments.length===1){for(;++Re<Ue;)if(($e=ce[Re])!=null&&$e>=$e){Be=wt=$e;break}for(;++Re<Ue;)($e=ce[Re])!=null&&(Be>$e&&(Be=$e),wt<$e&&(wt=$e))}else{for(;++Re<Ue;)if(($e=Te.call(ce,ce[Re],Re))!=null&&$e>=$e){Be=wt=$e;break}for(;++Re<Ue;)($e=Te.call(ce,ce[Re],Re))!=null&&(Be>$e&&(Be=$e),wt<$e&&(wt=$e))}return[Be,wt]};function b(ce){return ce===null?NaN:+ce}function g(ce){return!isNaN(ce)}y.sum=function(ce,Te){var Re=0,Ue=ce.length,Be,$e=-1;if(arguments.length===1)for(;++$e<Ue;)g(Be=+ce[$e])&&(Re+=Be);else for(;++$e<Ue;)g(Be=+Te.call(ce,ce[$e],$e))&&(Re+=Be);return Re},y.mean=function(ce,Te){var Re=0,Ue=ce.length,Be,$e=-1,wt=Ue;if(arguments.length===1)for(;++$e<Ue;)g(Be=b(ce[$e]))?Re+=Be:--wt;else for(;++$e<Ue;)g(Be=b(Te.call(ce,ce[$e],$e)))?Re+=Be:--wt;if(wt)return Re/wt},y.quantile=function(ce,Te){var Re=(ce.length-1)*Te+1,Ue=Math.floor(Re),Be=+ce[Ue-1],$e=Re-Ue;return $e?Be+$e*(ce[Ue]-Be):Be},y.median=function(ce,Te){var Re=[],Ue=ce.length,Be,$e=-1;if(arguments.length===1)for(;++$e<Ue;)g(Be=b(ce[$e]))&&Re.push(Be);else for(;++$e<Ue;)g(Be=b(Te.call(ce,ce[$e],$e)))&&Re.push(Be);if(Re.length)return y.quantile(Re.sort(o),.5)},y.variance=function(ce,Te){var Re=ce.length,Ue=0,Be,$e,wt=0,gt=-1,It=0;if(arguments.length===1)for(;++gt<Re;)g(Be=b(ce[gt]))&&($e=Be-Ue,Ue+=$e/++It,wt+=$e*(Be-Ue));else for(;++gt<Re;)g(Be=b(Te.call(ce,ce[gt],gt)))&&($e=Be-Ue,Ue+=$e/++It,wt+=$e*(Be-Ue));if(It>1)return wt/(It-1)},y.deviation=function(){var ce=y.variance.apply(this,arguments);return ce&&Math.sqrt(ce)};function d(ce){return{left:function(Te,Re,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var $e=Ue+Be>>>1;ce(Te[$e],Re)<0?Ue=$e+1:Be=$e}return Ue},right:function(Te,Re,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var $e=Ue+Be>>>1;ce(Te[$e],Re)>0?Be=$e:Ue=$e+1}return Ue}}}var f=d(o);y.bisectLeft=f.left,y.bisect=y.bisectRight=f.right,y.bisector=function(ce){return d(ce.length===1?function(Te,Re){return o(ce(Te),Re)}:ce)},y.shuffle=function(ce,Te,Re){(Ue=arguments.length)<3&&(Re=ce.length,Ue<2&&(Te=0));for(var Ue=Re-Te,Be,$e;Ue;)$e=Math.random()*Ue--|0,Be=ce[Ue+Te],ce[Ue+Te]=ce[$e+Te],ce[$e+Te]=Be;return ce},y.permute=function(ce,Te){for(var Re=Te.length,Ue=new Array(Re);Re--;)Ue[Re]=ce[Te[Re]];return Ue},y.pairs=function(ce){for(var Te=0,Re=ce.length-1,Ue=ce[0],Be=new Array(Re<0?0:Re);Te<Re;)Be[Te]=[Ue,Ue=ce[++Te]];return Be},y.transpose=function(ce){if(!($e=ce.length))return[];for(var Te=-1,Re=y.min(ce,m),Ue=new Array(Re);++Te<Re;)for(var Be=-1,$e,wt=Ue[Te]=new Array($e);++Be<$e;)wt[Be]=ce[Be][Te];return Ue};function m(ce){return ce.length}y.zip=function(){return y.transpose(arguments)},y.keys=function(ce){var Te=[];for(var Re in ce)Te.push(Re);return Te},y.values=function(ce){var Te=[];for(var Re in ce)Te.push(ce[Re]);return Te},y.entries=function(ce){var Te=[];for(var Re in ce)Te.push({key:Re,value:ce[Re]});return Te},y.merge=function(ce){for(var Te=ce.length,Re,Ue=-1,Be=0,$e,wt;++Ue<Te;)Be+=ce[Ue].length;for($e=new Array(Be);--Te>=0;)for(wt=ce[Te],Re=wt.length;--Re>=0;)$e[--Be]=wt[Re];return $e};var l=Math.abs;y.range=function(ce,Te,Re){if(arguments.length<3&&(Re=1,arguments.length<2&&(Te=ce,ce=0)),(Te-ce)/Re===1/0)throw new Error("infinite range");var Ue=[],Be=x(l(Re)),$e=-1,wt;if(ce*=Be,Te*=Be,Re*=Be,Re<0)for(;(wt=ce+Re*++$e)>Te;)Ue.push(wt/Be);else for(;(wt=ce+Re*++$e)<Te;)Ue.push(wt/Be);return Ue};function x(ce){for(var Te=1;ce*Te%1;)Te*=10;return Te}function u(ce,Te){for(var Re in Te)Object.defineProperty(ce.prototype,Re,{value:Te[Re],enumerable:!1})}y.map=function(ce,Te){var Re=new M;if(ce instanceof M)ce.forEach(function(gt,It){Re.set(gt,It)});else if(Array.isArray(ce)){var Ue=-1,Be=ce.length,$e;if(arguments.length===1)for(;++Ue<Be;)Re.set(Ue,ce[Ue]);else for(;++Ue<Be;)Re.set(Te.call(ce,$e=ce[Ue],Ue),$e)}else for(var wt in ce)Re.set(wt,ce[wt]);return Re};function M(){this._=Object.create(null)}var w="__proto__",p="\0";u(M,{has:L,get:function(ce){return this._[_(ce)]},set:function(ce,Te){return this._[_(ce)]=Te},remove:E,keys:S,values:function(){var ce=[];for(var Te in this._)ce.push(this._[Te]);return ce},entries:function(){var ce=[];for(var Te in this._)ce.push({key:h(Te),value:this._[Te]});return ce},size:P,empty:F,forEach:function(ce){for(var Te in this._)ce.call(this,h(Te),this._[Te])}});function _(ce){return(ce+="")===w||ce[0]===p?p+ce:ce}function h(ce){return(ce+="")[0]===p?ce.slice(1):ce}function L(ce){return _(ce)in this._}function E(ce){return(ce=_(ce))in this._&&delete this._[ce]}function S(){var ce=[];for(var Te in this._)ce.push(h(Te));return ce}function P(){var ce=0;for(var Te in this._)++ce;return ce}function F(){for(var ce in this._)return!1;return!0}y.nest=function(){var ce={},Te=[],Re=[],Ue,Be;function $e(gt,It,qt){if(qt>=Te.length)return Be?Be.call(ce,It):Ue?It.sort(Ue):It;for(var nr=-1,ar=It.length,Cr=Te[qt++],nn,pn,Ir,Wr=new M,en;++nr<ar;)(en=Wr.get(nn=Cr(pn=It[nr])))?en.push(pn):Wr.set(nn,[pn]);return gt?(pn=gt(),Ir=function(fn,vn){pn.set(fn,$e(gt,vn,qt))}):(pn={},Ir=function(fn,vn){pn[fn]=$e(gt,vn,qt)}),Wr.forEach(Ir),pn}function wt(gt,It){if(It>=Te.length)return gt;var qt=[],nr=Re[It++];return gt.forEach(function(ar,Cr){qt.push({key:ar,values:wt(Cr,It)})}),nr?qt.sort(function(ar,Cr){return nr(ar.key,Cr.key)}):qt}return ce.map=function(gt,It){return $e(It,gt,0)},ce.entries=function(gt){return wt($e(y.map,gt,0),0)},ce.key=function(gt){return Te.push(gt),ce},ce.sortKeys=function(gt){return Re[Te.length-1]=gt,ce},ce.sortValues=function(gt){return Ue=gt,ce},ce.rollup=function(gt){return Be=gt,ce},ce},y.set=function(ce){var Te=new I;if(ce)for(var Re=0,Ue=ce.length;Re<Ue;++Re)Te.add(ce[Re]);return Te};function I(){this._=Object.create(null)}u(I,{has:L,add:function(ce){return this._[_(ce+="")]=!0,ce},remove:E,values:S,size:P,empty:F,forEach:function(ce){for(var Te in this._)ce.call(this,h(Te))}}),y.behavior={};function D(ce){return ce}y.rebind=function(ce,Te){for(var Re=1,Ue=arguments.length,Be;++Re<Ue;)ce[Be=arguments[Re]]=R(ce,Te,Te[Be]);return ce};function R(ce,Te,Re){return function(){var Ue=Re.apply(Te,arguments);return Ue===Te?ce:Ue}}function O(ce,Te){if(Te in ce)return Te;Te=Te.charAt(0).toUpperCase()+Te.slice(1);for(var Re=0,Ue=z.length;Re<Ue;++Re){var Be=z[Re]+Te;if(Be in ce)return Be}}var z=["webkit","ms","moz","Moz","o","O"];function G(){}y.dispatch=function(){for(var ce=new Y,Te=-1,Re=arguments.length;++Te<Re;)ce[arguments[Te]]=ee(ce);return ce};function Y(){}Y.prototype.on=function(ce,Te){var Re=ce.indexOf("."),Ue="";if(Re>=0&&(Ue=ce.slice(Re+1),ce=ce.slice(0,Re)),ce)return arguments.length<2?this[ce].on(Ue):this[ce].on(Ue,Te);if(arguments.length===2){if(Te==null)for(ce in this)this.hasOwnProperty(ce)&&this[ce].on(Ue,null);return this}};function ee(ce){var Te=[],Re=new M;function Ue(){for(var Be=Te,$e=-1,wt=Be.length,gt;++$e<wt;)(gt=Be[$e].on)&&gt.apply(this,arguments);return ce}return Ue.on=function(Be,$e){var wt=Re.get(Be),gt;return arguments.length<2?wt&&wt.on:(wt&&(wt.on=null,Te=Te.slice(0,gt=Te.indexOf(wt)).concat(Te.slice(gt+1)),Re.remove(Be)),$e&&Te.push(Re.set(Be,{on:$e})),ce)},Ue}y.event=null;function j(){y.event.preventDefault()}function X(){for(var ce=y.event,Te;Te=ce.sourceEvent;)ce=Te;return ce}function ae(ce){for(var Te=new Y,Re=0,Ue=arguments.length;++Re<Ue;)Te[arguments[Re]]=ee(Te);return Te.of=function(Be,$e){return function(wt){try{var gt=wt.sourceEvent=y.event;wt.target=ce,y.event=wt,Te[wt.type].apply(Be,$e)}finally{y.event=gt}}},Te}y.requote=function(ce){return ce.replace(he,"\\$&")};var he=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,K={}.__proto__?function(ce,Te){ce.__proto__=Te}:function(ce,Te){for(var Re in Te)ce[Re]=Te[Re]};function J(ce){return K(ce,re),ce}var U=function(ce,Te){return Te.querySelector(ce)},H=function(ce,Te){return Te.querySelectorAll(ce)},q=function(ce,Te){var Re=ce.matches||ce[O(ce,"matchesSelector")];return q=function(Ue,Be){return Re.call(Ue,Be)},q(ce,Te)};typeof Sizzle=="function"&&(U=function(ce,Te){return Sizzle(ce,Te)[0]||null},H=Sizzle,q=Sizzle.matchesSelector),y.selection=function(){return y.select(T.documentElement)};var re=y.selection.prototype=[];re.select=function(ce){var Te=[],Re,Ue,Be,$e;ce=Z(ce);for(var wt=-1,gt=this.length;++wt<gt;){Te.push(Re=[]),Re.parentNode=(Be=this[wt]).parentNode;for(var It=-1,qt=Be.length;++It<qt;)($e=Be[It])?(Re.push(Ue=ce.call($e,$e.__data__,It,wt)),Ue&&"__data__"in $e&&(Ue.__data__=$e.__data__)):Re.push(null)}return J(Te)};function Z(ce){return typeof ce=="function"?ce:function(){return U(ce,this)}}re.selectAll=function(ce){var Te=[],Re,Ue;ce=Q(ce);for(var Be=-1,$e=this.length;++Be<$e;)for(var wt=this[Be],gt=-1,It=wt.length;++gt<It;)(Ue=wt[gt])&&(Te.push(Re=A(ce.call(Ue,Ue.__data__,gt,Be))),Re.parentNode=Ue);return J(Te)};function Q(ce){return typeof ce=="function"?ce:function(){return H(ce,this)}}var ie="http://www.w3.org/1999/xhtml",oe={svg:"http://www.w3.org/2000/svg",xhtml:ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};y.ns={prefix:oe,qualify:function(ce){var Te=ce.indexOf(":"),Re=ce;return Te>=0&&(Re=ce.slice(0,Te))!=="xmlns"&&(ce=ce.slice(Te+1)),oe.hasOwnProperty(Re)?{space:oe[Re],local:ce}:ce}},re.attr=function(ce,Te){if(arguments.length<2){if(typeof ce=="string"){var Re=this.node();return ce=y.ns.qualify(ce),ce.local?Re.getAttributeNS(ce.space,ce.local):Re.getAttribute(ce)}for(Te in ce)this.each(ne(Te,ce[Te]));return this}return this.each(ne(ce,Te))};function ne(ce,Te){ce=y.ns.qualify(ce);function Re(){this.removeAttribute(ce)}function Ue(){this.removeAttributeNS(ce.space,ce.local)}function Be(){this.setAttribute(ce,Te)}function $e(){this.setAttributeNS(ce.space,ce.local,Te)}function wt(){var It=Te.apply(this,arguments);It==null?this.removeAttribute(ce):this.setAttribute(ce,It)}function gt(){var It=Te.apply(this,arguments);It==null?this.removeAttributeNS(ce.space,ce.local):this.setAttributeNS(ce.space,ce.local,It)}return Te==null?ce.local?Ue:Re:typeof Te=="function"?ce.local?gt:wt:ce.local?$e:Be}function le(ce){return ce.trim().replace(/\s+/g," ")}re.classed=function(ce,Te){if(arguments.length<2){if(typeof ce=="string"){var Re=this.node(),Ue=(ce=fe(ce)).length,Be=-1;if(Te=Re.classList){for(;++Be<Ue;)if(!Te.contains(ce[Be]))return!1}else for(Te=Re.getAttribute("class");++Be<Ue;)if(!_e(ce[Be]).test(Te))return!1;return!0}for(Te in ce)this.each(ye(Te,ce[Te]));return this}return this.each(ye(ce,Te))};function _e(ce){return new RegExp("(?:^|\\s+)"+y.requote(ce)+"(?:\\s+|$)","g")}function fe(ce){return(ce+"").trim().split(/^|\s+/)}function ye(ce,Te){ce=fe(ce).map(xe);var Re=ce.length;function Ue(){for(var $e=-1;++$e<Re;)ce[$e](this,Te)}function Be(){for(var $e=-1,wt=Te.apply(this,arguments);++$e<Re;)ce[$e](this,wt)}return typeof Te=="function"?Be:Ue}function xe(ce){var Te=_e(ce);return function(Re,Ue){if(Be=Re.classList)return Ue?Be.add(ce):Be.remove(ce);var Be=Re.getAttribute("class")||"";Ue?(Te.lastIndex=0,Te.test(Be)||Re.setAttribute("class",le(Be+" "+ce))):Re.setAttribute("class",le(Be.replace(Te," ")))}}re.style=function(ce,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof ce!="string"){Ue<2&&(Te="");for(Re in ce)this.each(me(Re,ce[Re],Te));return this}if(Ue<2){var Be=this.node();return a(Be).getComputedStyle(Be,null).getPropertyValue(ce)}Re=""}return this.each(me(ce,Te,Re))};function me(ce,Te,Re){function Ue(){this.style.removeProperty(ce)}function Be(){this.style.setProperty(ce,Te,Re)}function $e(){var wt=Te.apply(this,arguments);wt==null?this.style.removeProperty(ce):this.style.setProperty(ce,wt,Re)}return Te==null?Ue:typeof Te=="function"?$e:Be}re.property=function(ce,Te){if(arguments.length<2){if(typeof ce=="string")return this.node()[ce];for(Te in ce)this.each(be(Te,ce[Te]));return this}return this.each(be(ce,Te))};function be(ce,Te){function Re(){delete this[ce]}function Ue(){this[ce]=Te}function Be(){var $e=Te.apply(this,arguments);$e==null?delete this[ce]:this[ce]=$e}return Te==null?Re:typeof Te=="function"?Be:Ue}re.text=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var Te=ce.apply(this,arguments);this.textContent=Te==null?"":Te}:ce==null?function(){this.textContent=""}:function(){this.textContent=ce}):this.node().textContent},re.html=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var Te=ce.apply(this,arguments);this.innerHTML=Te==null?"":Te}:ce==null?function(){this.innerHTML=""}:function(){this.innerHTML=ce}):this.node().innerHTML},re.append=function(ce){return ce=ke(ce),this.select(function(){return this.appendChild(ce.apply(this,arguments))})};function ke(ce){function Te(){var Ue=this.ownerDocument,Be=this.namespaceURI;return Be===ie&&Ue.documentElement.namespaceURI===ie?Ue.createElement(ce):Ue.createElementNS(Be,ce)}function Re(){return this.ownerDocument.createElementNS(ce.space,ce.local)}return typeof ce=="function"?ce:(ce=y.ns.qualify(ce)).local?Re:Te}re.insert=function(ce,Te){return ce=ke(ce),Te=Z(Te),this.select(function(){return this.insertBefore(ce.apply(this,arguments),Te.apply(this,arguments)||null)})},re.remove=function(){return this.each(De)};function De(){var ce=this.parentNode;ce&&ce.removeChild(this)}re.data=function(ce,Te){var Re=-1,Ue=this.length,Be,$e;if(!arguments.length){for(ce=new Array(Ue=(Be=this[0]).length);++Re<Ue;)($e=Be[Re])&&(ce[Re]=$e.__data__);return ce}function wt(nr,ar){var Cr,nn=nr.length,pn=ar.length,Ir=Math.min(nn,pn),Wr=new Array(pn),en=new Array(pn),fn=new Array(nn),vn,tn;if(Te){var Zn=new M,ha=new Array(nn),Pa;for(Cr=-1;++Cr<nn;)(vn=nr[Cr])&&(Zn.has(Pa=Te.call(vn,vn.__data__,Cr))?fn[Cr]=vn:Zn.set(Pa,vn),ha[Cr]=Pa);for(Cr=-1;++Cr<pn;)(vn=Zn.get(Pa=Te.call(ar,tn=ar[Cr],Cr)))?vn!==!0&&(Wr[Cr]=vn,vn.__data__=tn):en[Cr]=He(tn),Zn.set(Pa,!0);for(Cr=-1;++Cr<nn;)Cr in ha&&Zn.get(ha[Cr])!==!0&&(fn[Cr]=nr[Cr])}else{for(Cr=-1;++Cr<Ir;)vn=nr[Cr],tn=ar[Cr],vn?(vn.__data__=tn,Wr[Cr]=vn):en[Cr]=He(tn);for(;Cr<pn;++Cr)en[Cr]=He(ar[Cr]);for(;Cr<nn;++Cr)fn[Cr]=nr[Cr]}en.update=Wr,en.parentNode=Wr.parentNode=fn.parentNode=nr.parentNode,gt.push(en),It.push(Wr),qt.push(fn)}var gt=We([]),It=J([]),qt=J([]);if(typeof ce=="function")for(;++Re<Ue;)wt(Be=this[Re],ce.call(Be,Be.parentNode.__data__,Re));else for(;++Re<Ue;)wt(Be=this[Re],ce);return It.enter=function(){return gt},It.exit=function(){return qt},It};function He(ce){return{__data__:ce}}re.datum=function(ce){return arguments.length?this.property("__data__",ce):this.property("__data__")},re.filter=function(ce){var Te=[],Re,Ue,Be;typeof ce!="function"&&(ce=Ae(ce));for(var $e=0,wt=this.length;$e<wt;$e++){Te.push(Re=[]),Re.parentNode=(Ue=this[$e]).parentNode;for(var gt=0,It=Ue.length;gt<It;gt++)(Be=Ue[gt])&&ce.call(Be,Be.__data__,gt,$e)&&Re.push(Be)}return J(Te)};function Ae(ce){return function(){return q(this,ce)}}re.order=function(){for(var ce=-1,Te=this.length;++ce<Te;)for(var Re=this[ce],Ue=Re.length-1,Be=Re[Ue],$e;--Ue>=0;)($e=Re[Ue])&&(Be&&Be!==$e.nextSibling&&Be.parentNode.insertBefore($e,Be),Be=$e);return this},re.sort=function(ce){ce=Le.apply(this,arguments);for(var Te=-1,Re=this.length;++Te<Re;)this[Te].sort(ce);return this.order()};function Le(ce){return arguments.length||(ce=o),function(Te,Re){return Te&&Re?ce(Te.__data__,Re.__data__):!Te-!Re}}re.each=function(ce){return Ze(this,function(Te,Re,Ue){ce.call(Te,Te.__data__,Re,Ue)})};function Ze(ce,Te){for(var Re=0,Ue=ce.length;Re<Ue;Re++)for(var Be=ce[Re],$e=0,wt=Be.length,gt;$e<wt;$e++)(gt=Be[$e])&&Te(gt,$e,Re);return ce}re.call=function(ce){var Te=A(arguments);return ce.apply(Te[0]=this,Te),this},re.empty=function(){return!this.node()},re.node=function(){for(var ce=0,Te=this.length;ce<Te;ce++)for(var Re=this[ce],Ue=0,Be=Re.length;Ue<Be;Ue++){var $e=Re[Ue];if($e)return $e}return null},re.size=function(){var ce=0;return Ze(this,function(){++ce}),ce};function We(ce){return K(ce,ze),ce}var ze=[];y.selection.enter=We,y.selection.enter.prototype=ze,ze.append=re.append,ze.empty=re.empty,ze.node=re.node,ze.call=re.call,ze.size=re.size,ze.select=function(ce){for(var Te=[],Re,Ue,Be,$e,wt,gt=-1,It=this.length;++gt<It;){Be=($e=this[gt]).update,Te.push(Re=[]),Re.parentNode=$e.parentNode;for(var qt=-1,nr=$e.length;++qt<nr;)(wt=$e[qt])?(Re.push(Be[qt]=Ue=ce.call($e.parentNode,wt.__data__,qt,gt)),Ue.__data__=wt.__data__):Re.push(null)}return J(Te)},ze.insert=function(ce,Te){return arguments.length<2&&(Te=Ie(this)),re.insert.call(this,ce,Te)};function Ie(ce){var Te,Re;return function(Ue,Be,$e){var wt=ce[$e].update,gt=wt.length,It;for($e!=Re&&(Re=$e,Te=0),Be>=Te&&(Te=Be+1);!(It=wt[Te])&&++Te<gt;);return It}}y.select=function(ce){var Te;return typeof ce=="string"?(Te=[U(ce,T)],Te.parentNode=T.documentElement):(Te=[ce],Te.parentNode=e(ce)),J([Te])},y.selectAll=function(ce){var Te;return typeof ce=="string"?(Te=A(H(ce,T)),Te.parentNode=T.documentElement):(Te=A(ce),Te.parentNode=null),J([Te])},re.on=function(ce,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof ce!="string"){Ue<2&&(Te=!1);for(Re in ce)this.each(Ve(Re,ce[Re],Te));return this}if(Ue<2)return(Ue=this.node()["__on"+ce])&&Ue._;Re=!1}return this.each(Ve(ce,Te,Re))};function Ve(ce,Te,Re){var Ue="__on"+ce,Be=ce.indexOf("."),$e=Ft;Be>0&&(ce=ce.slice(0,Be));var wt=dt.get(ce);wt&&(ce=wt,$e=Qt);function gt(){var nr=this[Ue];nr&&(this.removeEventListener(ce,nr,nr.$),delete this[Ue])}function It(){var nr=$e(Te,A(arguments));gt.call(this),this.addEventListener(ce,this[Ue]=nr,nr.$=Re),nr._=Te}function qt(){var nr=new RegExp("^__on([^.]+)"+y.requote(ce)+"$"),ar;for(var Cr in this)if(ar=Cr.match(nr)){var nn=this[Cr];this.removeEventListener(ar[1],nn,nn.$),delete this[Cr]}}return Be?Te?It:gt:Te?G:qt}var dt=y.map({mouseenter:"mouseover",mouseleave:"mouseout"});T&&dt.forEach(function(ce){"on"+ce in T&&dt.remove(ce)});function Ft(ce,Te){return function(Re){var Ue=y.event;y.event=Re,Te[0]=this.__data__;try{ce.apply(this,Te)}finally{y.event=Ue}}}function Qt(ce,Te){var Re=Ft(ce,Te);return function(Ue){var Be=this,$e=Ue.relatedTarget;(!$e||$e!==Be&&!($e.compareDocumentPosition(Be)&8))&&Re.call(Be,Ue)}}var Ot,Ct=0;function jt(ce){var Te=".dragsuppress-"+ ++Ct,Re="click"+Te,Ue=y.select(a(ce)).on("touchmove"+Te,j).on("dragstart"+Te,j).on("selectstart"+Te,j);if(Ot==null&&(Ot="onselectstart"in ce?!1:O(ce.style,"userSelect")),Ot){var Be=e(ce).style,$e=Be[Ot];Be[Ot]="none"}return function(wt){if(Ue.on(Te,null),Ot&&(Be[Ot]=$e),wt){var gt=function(){Ue.on(Re,null)};Ue.on(Re,function(){j(),gt()},!0),setTimeout(gt,0)}}}y.mouse=function(ce){return Lt(ce,X())};var Nt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Lt(ce,Te){Te.changedTouches&&(Te=Te.changedTouches[0]);var Re=ce.ownerSVGElement||ce;if(Re.createSVGPoint){var Ue=Re.createSVGPoint();if(Nt<0){var Be=a(ce);if(Be.scrollX||Be.scrollY){Re=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var $e=Re[0][0].getScreenCTM();Nt=!($e.f||$e.e),Re.remove()}}return Nt?(Ue.x=Te.pageX,Ue.y=Te.pageY):(Ue.x=Te.clientX,Ue.y=Te.clientY),Ue=Ue.matrixTransform(ce.getScreenCTM().inverse()),[Ue.x,Ue.y]}var wt=ce.getBoundingClientRect();return[Te.clientX-wt.left-ce.clientLeft,Te.clientY-wt.top-ce.clientTop]}y.touch=function(ce,Te,Re){if(arguments.length<3&&(Re=Te,Te=X().changedTouches),Te){for(var Ue=0,Be=Te.length,$e;Ue<Be;++Ue)if(($e=Te[Ue]).identifier===Re)return Lt(ce,$e)}},y.behavior.drag=function(){var ce=ae(Be,"drag","dragstart","dragend"),Te=null,Re=$e(G,y.mouse,a,"mousemove","mouseup"),Ue=$e(Xe,y.touch,D,"touchmove","touchend");function Be(){this.on("mousedown.drag",Re).on("touchstart.drag",Ue)}function $e(wt,gt,It,qt,nr){return function(){var ar=this,Cr=y.event.target.correspondingElement||y.event.target,nn=ar.parentNode,pn=ce.of(ar,arguments),Ir=0,Wr=wt(),en=".drag"+(Wr==null?"":"-"+Wr),fn,vn=y.select(It(Cr)).on(qt+en,ha).on(nr+en,Pa),tn=jt(Cr),Zn=gt(nn,Wr);Te?(fn=Te.apply(ar,arguments),fn=[fn.x-Zn[0],fn.y-Zn[1]]):fn=[0,0],pn({type:"dragstart"});function ha(){var pa=gt(nn,Wr),Na,xa;!pa||(Na=pa[0]-Zn[0],xa=pa[1]-Zn[1],Ir|=Na|xa,Zn=pa,pn({type:"drag",x:pa[0]+fn[0],y:pa[1]+fn[1],dx:Na,dy:xa}))}function Pa(){!gt(nn,Wr)||(vn.on(qt+en,null).on(nr+en,null),tn(Ir),pn({type:"dragend"}))}}}return Be.origin=function(wt){return arguments.length?(Te=wt,Be):Te},y.rebind(Be,ce,"on")};function Xe(){return y.event.changedTouches[0].identifier}y.touches=function(ce,Te){return arguments.length<2&&(Te=X().touches),Te?A(Te).map(function(Re){var Ue=Lt(ce,Re);return Ue.identifier=Re.identifier,Ue}):[]};var it=1e-6,Ye=it*it,Ee=Math.PI,Ge=2*Ee,Ke=Ge-it,qe=Ee/2,At=Ee/180,mt=180/Ee;function Mt(ce,Te,Re){return(Te[0]-ce[0])*(Re[1]-ce[1])-(Te[1]-ce[1])*(Re[0]-ce[0])}function Gt(ce){return ce>1?qe:ce<-1?-qe:Math.asin(ce)}function zt(ce){return((ce=Math.exp(ce))-1/ce)/2}function Ht(ce){return((ce=Math.exp(ce))+1/ce)/2}function Zt(ce){return((ce=Math.exp(2*ce))-1)/(ce+1)}var Wt=Math.SQRT2,sr=2,Gr=4;y.interpolateZoom=function(ce,Te){var Re=ce[0],Ue=ce[1],Be=ce[2],$e=Te[0],wt=Te[1],gt=Te[2],It=$e-Re,qt=wt-Ue,nr=It*It+qt*qt,ar,Cr;if(nr<Ye)Cr=Math.log(gt/Be)/Wt,ar=function(fn){return[Re+fn*It,Ue+fn*qt,Be*Math.exp(Wt*fn*Cr)]};else{var nn=Math.sqrt(nr),pn=(gt*gt-Be*Be+Gr*nr)/(2*Be*sr*nn),Ir=(gt*gt-Be*Be-Gr*nr)/(2*gt*sr*nn),Wr=Math.log(Math.sqrt(pn*pn+1)-pn),en=Math.log(Math.sqrt(Ir*Ir+1)-Ir);Cr=(en-Wr)/Wt,ar=function(fn){var vn=fn*Cr,tn=Ht(Wr),Zn=Be/(sr*nn)*(tn*Zt(Wt*vn+Wr)-zt(Wr));return[Re+Zn*It,Ue+Zn*qt,Be*tn/Ht(Wt*vn+Wr)]}}return ar.duration=Cr*1e3,ar},y.behavior.zoom=function(){var ce={x:0,y:0,k:1},Te,Re,Ue,Be=[960,500],$e=cn,wt=250,gt=0,It="mousedown.zoom",qt="mousemove.zoom",nr="mouseup.zoom",ar,Cr="touchstart.zoom",nn,pn=ae(vn,"zoomstart","zoom","zoomend"),Ir,Wr,en,fn;st||(st="onwheel"in T?(qr=function(){return-y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel"in T?(qr=function(){return y.event.wheelDelta},"mousewheel"):(qr=function(){return-y.event.detail},"MozMousePixelScroll"));function vn(_a){_a.on(It,ui).on(st+".zoom",Po).on("dblclick.zoom",$i).on(Cr,Li)}vn.event=function(_a){_a.each(function(){var di=pn.of(this,arguments),ii=ce;qa?y.select(this).transition().each("start.zoom",function(){ce=this.__chart__||{x:0,y:0,k:1},xa(di)}).tween("zoom:zoom",function(){var Ui=Be[0],mi=Be[1],Eo=Re?Re[0]:Ui/2,yo=Re?Re[1]:mi/2,zo=y.interpolateZoom([(Eo-ce.x)/ce.k,(yo-ce.y)/ce.k,Ui/ce.k],[(Eo-ii.x)/ii.k,(yo-ii.y)/ii.k,Ui/ii.k]);return function(ys){var ns=zo(ys),ms=Ui/ns[2];this.__chart__=ce={x:Eo-ns[0]*ms,y:yo-ns[1]*ms,k:ms},$a(di)}}).each("interrupt.zoom",function(){Va(di)}).each("end.zoom",function(){Va(di)}):(this.__chart__=ce,xa(di),$a(di),Va(di))})},vn.translate=function(_a){return arguments.length?(ce={x:+_a[0],y:+_a[1],k:ce.k},Na(),vn):[ce.x,ce.y]},vn.scale=function(_a){return arguments.length?(ce={x:ce.x,y:ce.y,k:null},ha(+_a),Na(),vn):ce.k},vn.scaleExtent=function(_a){return arguments.length?($e=_a==null?cn:[+_a[0],+_a[1]],vn):$e},vn.center=function(_a){return arguments.length?(Ue=_a&&[+_a[0],+_a[1]],vn):Ue},vn.size=function(_a){return arguments.length?(Be=_a&&[+_a[0],+_a[1]],vn):Be},vn.duration=function(_a){return arguments.length?(wt=+_a,vn):wt},vn.x=function(_a){return arguments.length?(Wr=_a,Ir=_a.copy(),ce={x:0,y:0,k:1},vn):Wr},vn.y=function(_a){return arguments.length?(fn=_a,en=_a.copy(),ce={x:0,y:0,k:1},vn):fn};function tn(_a){return[(_a[0]-ce.x)/ce.k,(_a[1]-ce.y)/ce.k]}function Zn(_a){return[_a[0]*ce.k+ce.x,_a[1]*ce.k+ce.y]}function ha(_a){ce.k=Math.max($e[0],Math.min($e[1],_a))}function Pa(_a,di){di=Zn(di),ce.x+=_a[0]-di[0],ce.y+=_a[1]-di[1]}function pa(_a,di,ii,Ui){_a.__chart__={x:ce.x,y:ce.y,k:ce.k},ha(Math.pow(2,Ui)),Pa(Re=di,ii),_a=y.select(_a),wt>0&&(_a=_a.transition().duration(wt)),_a.call(vn.event)}function Na(){Wr&&Wr.domain(Ir.range().map(function(_a){return(_a-ce.x)/ce.k}).map(Ir.invert)),fn&&fn.domain(en.range().map(function(_a){return(_a-ce.y)/ce.k}).map(en.invert))}function xa(_a){gt++||_a({type:"zoomstart"})}function $a(_a){Na(),_a({type:"zoom",scale:ce.k,translate:[ce.x,ce.y]})}function Va(_a){--gt||(_a({type:"zoomend"}),Re=null)}function ui(){var _a=this,di=pn.of(_a,arguments),ii=0,Ui=y.select(a(_a)).on(qt,yo).on(nr,zo),mi=tn(y.mouse(_a)),Eo=jt(_a);Nn.call(_a),xa(di);function yo(){ii=1,Pa(y.mouse(_a),mi),$a(di)}function zo(){Ui.on(qt,null).on(nr,null),Eo(ii),Va(di)}}function Li(){var _a=this,di=pn.of(_a,arguments),ii={},Ui=0,mi,Eo=".zoom-"+y.event.changedTouches[0].identifier,yo="touchmove"+Eo,zo="touchend"+Eo,ys=[],ns=y.select(_a),ms=jt(_a);eo(),xa(di),ns.on(It,null).on(Cr,eo);function io(){var Bo=y.touches(_a);return mi=ce.k,Bo.forEach(function(_o){_o.identifier in ii&&(ii[_o.identifier]=tn(_o))}),Bo}function eo(){var Bo=y.event.target;y.select(Bo).on(yo,Za).on(zo,oi),ys.push(Bo);for(var _o=y.event.changedTouches,Qo=0,co=_o.length;Qo<co;++Qo)ii[_o[Qo].identifier]=null;var xs=io(),Zs=Date.now();if(xs.length===1){if(Zs-nn<500){var Nu=xs[0];pa(_a,Nu,ii[Nu.identifier],Math.floor(Math.log(ce.k)/Math.LN2)+1),j()}nn=Zs}else if(xs.length>1){var Nu=xs[0],fo=xs[1],af=Nu[0]-fo[0],mu=Nu[1]-fo[1];Ui=af*af+mu*mu}}function Za(){var Bo=y.touches(_a),_o,Qo,co,xs;Nn.call(_a);for(var Zs=0,Nu=Bo.length;Zs<Nu;++Zs,xs=null)if(co=Bo[Zs],xs=ii[co.identifier]){if(Qo)break;_o=co,Qo=xs}if(xs){var fo=(fo=co[0]-_o[0])*fo+(fo=co[1]-_o[1])*fo,af=Ui&&Math.sqrt(fo/Ui);_o=[(_o[0]+co[0])/2,(_o[1]+co[1])/2],Qo=[(Qo[0]+xs[0])/2,(Qo[1]+xs[1])/2],ha(af*mi)}nn=null,Pa(_o,Qo),$a(di)}function oi(){if(y.event.touches.length){for(var Bo=y.event.changedTouches,_o=0,Qo=Bo.length;_o<Qo;++_o)delete ii[Bo[_o].identifier];for(var co in ii)return void io()}y.selectAll(ys).on(Eo,null),ns.on(It,ui).on(Cr,Li),ms(),Va(di)}}function Po(){var _a=pn.of(this,arguments);ar?clearTimeout(ar):(Nn.call(this),Te=tn(Re=Ue||y.mouse(this)),xa(_a)),ar=setTimeout(function(){ar=null,Va(_a)},50),j(),ha(Math.pow(2,qr()*.002)*ce.k),Pa(Re,Te),$a(_a)}function $i(){var _a=y.mouse(this),di=Math.log(ce.k)/Math.LN2;pa(this,_a,tn(_a),y.event.shiftKey?Math.ceil(di)-1:Math.floor(di)+1)}return y.rebind(vn,pn,"on")};var cn=[0,1/0],qr,st;y.color=rr;function rr(){}rr.prototype.toString=function(){return this.rgb()+""},y.hsl=$t;function $t(ce,Te,Re){return this instanceof $t?(this.h=+ce,this.s=+Te,void(this.l=+Re)):arguments.length<2?ce instanceof $t?new $t(ce.h,ce.s,ce.l):Jr(""+ce,lr,$t):new $t(ce,Te,Re)}var hr=$t.prototype=new rr;hr.brighter=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new $t(this.h,this.s,this.l/ce)},hr.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new $t(this.h,this.s,ce*this.l)},hr.rgb=function(){return Sr(this.h,this.s,this.l)};function Sr(ce,Te,Re){var Ue,Be;ce=isNaN(ce)?0:(ce%=360)<0?ce+360:ce,Te=isNaN(Te)||Te<0?0:Te>1?1:Te,Re=Re<0?0:Re>1?1:Re,Be=Re<=.5?Re*(1+Te):Re+Te-Re*Te,Ue=2*Re-Be;function $e(gt){return gt>360?gt-=360:gt<0&&(gt+=360),gt<60?Ue+(Be-Ue)*gt/60:gt<180?Be:gt<240?Ue+(Be-Ue)*(240-gt)/60:Ue}function wt(gt){return Math.round($e(gt)*255)}return new Xt(wt(ce+120),wt(ce),wt(ce-120))}y.hcl=tt;function tt(ce,Te,Re){return this instanceof tt?(this.h=+ce,this.c=+Te,void(this.l=+Re)):arguments.length<2?ce instanceof tt?new tt(ce.h,ce.c,ce.l):ce instanceof ft?pt(ce.l,ce.a,ce.b):pt((ce=br((ce=y.rgb(ce)).r,ce.g,ce.b)).l,ce.a,ce.b):new tt(ce,Te,Re)}var Qe=tt.prototype=new rr;Qe.brighter=function(ce){return new tt(this.h,this.c,Math.min(100,this.l+Et*(arguments.length?ce:1)))},Qe.darker=function(ce){return new tt(this.h,this.c,Math.max(0,this.l-Et*(arguments.length?ce:1)))},Qe.rgb=function(){return lt(this.h,this.c,this.l).rgb()};function lt(ce,Te,Re){return isNaN(ce)&&(ce=0),isNaN(Te)&&(Te=0),new ft(Re,Math.cos(ce*=At)*Te,Math.sin(ce)*Te)}y.lab=ft;function ft(ce,Te,Re){return this instanceof ft?(this.l=+ce,this.a=+Te,void(this.b=+Re)):arguments.length<2?ce instanceof ft?new ft(ce.l,ce.a,ce.b):ce instanceof tt?lt(ce.h,ce.c,ce.l):br((ce=Xt(ce)).r,ce.g,ce.b):new ft(ce,Te,Re)}var Et=18,Vt=.95047,Pe=1,Se=1.08883,ot=ft.prototype=new rr;ot.brighter=function(ce){return new ft(Math.min(100,this.l+Et*(arguments.length?ce:1)),this.a,this.b)},ot.darker=function(ce){return new ft(Math.max(0,this.l-Et*(arguments.length?ce:1)),this.a,this.b)},ot.rgb=function(){return ct(this.l,this.a,this.b)};function ct(ce,Te,Re){var Ue=(ce+16)/116,Be=Ue+Te/500,$e=Ue-Re/200;return Be=St(Be)*Vt,Ue=St(Ue)*Pe,$e=St($e)*Se,new Xt(Pt(3.2404542*Be-1.5371385*Ue-.4985314*$e),Pt(-.969266*Be+1.8760108*Ue+.041556*$e),Pt(.0556434*Be-.2040259*Ue+1.0572252*$e))}function pt(ce,Te,Re){return ce>0?new tt(Math.atan2(Re,Te)*mt,Math.sqrt(Te*Te+Re*Re),ce):new tt(NaN,NaN,ce)}function St(ce){return ce>.206893034?ce*ce*ce:(ce-4/29)/7.787037}function xt(ce){return ce>.008856?Math.pow(ce,1/3):7.787037*ce+4/29}function Pt(ce){return Math.round(255*(ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055))}y.rgb=Xt;function Xt(ce,Te,Re){return this instanceof Xt?(this.r=~~ce,this.g=~~Te,void(this.b=~~Re)):arguments.length<2?ce instanceof Xt?new Xt(ce.r,ce.g,ce.b):Jr(""+ce,Xt,Sr):new Xt(ce,Te,Re)}function or(ce){return new Xt(ce>>16,ce>>8&255,ce&255)}function Pr(ce){return or(ce)+""}var Ar=Xt.prototype=new rr;Ar.brighter=function(ce){ce=Math.pow(.7,arguments.length?ce:1);var Te=this.r,Re=this.g,Ue=this.b,Be=30;return!Te&&!Re&&!Ue?new Xt(Be,Be,Be):(Te&&Te<Be&&(Te=Be),Re&&Re<Be&&(Re=Be),Ue&&Ue<Be&&(Ue=Be),new Xt(Math.min(255,Te/ce),Math.min(255,Re/ce),Math.min(255,Ue/ce)))},Ar.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Xt(ce*this.r,ce*this.g,ce*this.b)},Ar.hsl=function(){return lr(this.r,this.g,this.b)},Ar.toString=function(){return"#"+Er(this.r)+Er(this.g)+Er(this.b)};function Er(ce){return ce<16?"0"+Math.max(0,ce).toString(16):Math.min(255,ce).toString(16)}function Jr(ce,Te,Re){var Ue=0,Be=0,$e=0,wt,gt,It;if(wt=/([a-z]+)\((.*)\)/.exec(ce=ce.toLowerCase()),wt)switch(gt=wt[2].split(","),wt[1]){case"hsl":return Re(parseFloat(gt[0]),parseFloat(gt[1])/100,parseFloat(gt[2])/100);case"rgb":return Te(Hr(gt[0]),Hr(gt[1]),Hr(gt[2]))}return(It=Lr.get(ce))?Te(It.r,It.g,It.b):(ce!=null&&ce.charAt(0)==="#"&&!isNaN(It=parseInt(ce.slice(1),16))&&(ce.length===4?(Ue=(It&3840)>>4,Ue=Ue>>4|Ue,Be=It&240,Be=Be>>4|Be,$e=It&15,$e=$e<<4|$e):ce.length===7&&(Ue=(It&16711680)>>16,Be=(It&65280)>>8,$e=It&255)),Te(Ue,Be,$e))}function lr(ce,Te,Re){var Ue=Math.min(ce/=255,Te/=255,Re/=255),Be=Math.max(ce,Te,Re),$e=Be-Ue,wt,gt,It=(Be+Ue)/2;return $e?(gt=It<.5?$e/(Be+Ue):$e/(2-Be-Ue),ce==Be?wt=(Te-Re)/$e+(Te<Re?6:0):Te==Be?wt=(Re-ce)/$e+2:wt=(ce-Te)/$e+4,wt*=60):(wt=NaN,gt=It>0&&It<1?0:wt),new $t(wt,gt,It)}function br(ce,Te,Re){ce=Fr(ce),Te=Fr(Te),Re=Fr(Re);var Ue=xt((.4124564*ce+.3575761*Te+.1804375*Re)/Vt),Be=xt((.2126729*ce+.7151522*Te+.072175*Re)/Pe),$e=xt((.0193339*ce+.119192*Te+.9503041*Re)/Se);return ft(116*Be-16,500*(Ue-Be),200*(Be-$e))}function Fr(ce){return(ce/=255)<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function Hr(ce){var Te=parseFloat(ce);return ce.charAt(ce.length-1)==="%"?Math.round(Te*2.55):Te}var Lr=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Lr.forEach(function(ce,Te){Lr.set(ce,or(Te))});function at(ce){return typeof ce=="function"?ce:function(){return ce}}y.functor=at,y.xhr=Rt(D);function Rt(ce){return function(Te,Re,Ue){return arguments.length===2&&typeof Re=="function"&&(Ue=Re,Re=null),Kt(Te,Re,ce,Ue)}}function Kt(ce,Te,Re,Ue){var Be={},$e=y.dispatch("beforesend","progress","load","error"),wt={},gt=new XMLHttpRequest,It=null;self.XDomainRequest&&!("withCredentials"in gt)&&/^(http(s)?:)?\/\//.test(ce)&&(gt=new XDomainRequest),"onload"in gt?gt.onload=gt.onerror=qt:gt.onreadystatechange=function(){gt.readyState>3&&qt()};function qt(){var nr=gt.status,ar;if(!nr&&Nr(gt)||nr>=200&&nr<300||nr===304){try{ar=Re.call(Be,gt)}catch(Cr){$e.error.call(Be,Cr);return}$e.load.call(Be,ar)}else $e.error.call(Be,gt)}return gt.onprogress=function(nr){var ar=y.event;y.event=nr;try{$e.progress.call(Be,gt)}finally{y.event=ar}},Be.header=function(nr,ar){return nr=(nr+"").toLowerCase(),arguments.length<2?wt[nr]:(ar==null?delete wt[nr]:wt[nr]=ar+"",Be)},Be.mimeType=function(nr){return arguments.length?(Te=nr==null?null:nr+"",Be):Te},Be.responseType=function(nr){return arguments.length?(It=nr,Be):It},Be.response=function(nr){return Re=nr,Be},["get","post"].forEach(function(nr){Be[nr]=function(){return Be.send.apply(Be,[nr].concat(A(arguments)))}}),Be.send=function(nr,ar,Cr){if(arguments.length===2&&typeof ar=="function"&&(Cr=ar,ar=null),gt.open(nr,ce,!0),Te!=null&&!("accept"in wt)&&(wt.accept=Te+",*/*"),gt.setRequestHeader)for(var nn in wt)gt.setRequestHeader(nn,wt[nn]);return Te!=null&&gt.overrideMimeType&&gt.overrideMimeType(Te),It!=null&&(gt.responseType=It),Cr!=null&&Be.on("error",Cr).on("load",function(pn){Cr(null,pn)}),$e.beforesend.call(Be,gt),gt.send(ar==null?null:ar),Be},Be.abort=function(){return gt.abort(),Be},y.rebind(Be,$e,"on"),Ue==null?Be:Be.get(ur(Ue))}function ur(ce){return ce.length===1?function(Te,Re){ce(Te==null?Re:null)}:ce}function Nr(ce){var Te=ce.responseType;return Te&&Te!=="text"?ce.response:ce.responseText}y.dsv=function(ce,Te){var Re=new RegExp('["'+ce+`
]`),Ue=ce.charCodeAt(0);function Be(qt,nr,ar){arguments.length<3&&(ar=nr,nr=null);var Cr=Kt(qt,Te,nr==null?$e:wt(nr),ar);return Cr.row=function(nn){return arguments.length?Cr.response((nr=nn)==null?$e:wt(nn)):nr},Cr}function $e(qt){return Be.parse(qt.responseText)}function wt(qt){return function(nr){return Be.parse(nr.responseText,qt)}}Be.parse=function(qt,nr){var ar;return Be.parseRows(qt,function(Cr,nn){if(ar)return ar(Cr,nn-1);var pn=function(Ir){for(var Wr={},en=Cr.length,fn=0;fn<en;++fn)Wr[Cr[fn]]=Ir[fn];return Wr};ar=nr?function(Ir,Wr){return nr(pn(Ir),Wr)}:pn})},Be.parseRows=function(qt,nr){var ar={},Cr={},nn=[],pn=qt.length,Ir=0,Wr=0,en,fn;function vn(){if(Ir>=pn)return Cr;if(fn)return fn=!1,ar;var Zn=Ir;if(qt.charCodeAt(Zn)===34){for(var ha=Zn;ha++<pn;)if(qt.charCodeAt(ha)===34){if(qt.charCodeAt(ha+1)!==34)break;++ha}Ir=ha+2;var Pa=qt.charCodeAt(ha+1);return Pa===13?(fn=!0,qt.charCodeAt(ha+2)===10&&++Ir):Pa===10&&(fn=!0),qt.slice(Zn+1,ha).replace(/""/g,'"')}for(;Ir<pn;){var Pa=qt.charCodeAt(Ir++),pa=1;if(Pa===10)fn=!0;else if(Pa===13)fn=!0,qt.charCodeAt(Ir)===10&&(++Ir,++pa);else if(Pa!==Ue)continue;return qt.slice(Zn,Ir-pa)}return qt.slice(Zn)}for(;(en=vn())!==Cr;){for(var tn=[];en!==ar&&en!==Cr;)tn.push(en),en=vn();nr&&(tn=nr(tn,Wr++))==null||nn.push(tn)}return nn},Be.format=function(qt){if(Array.isArray(qt[0]))return Be.formatRows(qt);var nr=new I,ar=[];return qt.forEach(function(Cr){for(var nn in Cr)nr.has(nn)||ar.push(nr.add(nn))}),[ar.map(It).join(ce)].concat(qt.map(function(Cr){return ar.map(function(nn){return It(Cr[nn])}).join(ce)})).join(`
`)},Be.formatRows=function(qt){return qt.map(gt).join(`
`)};function gt(qt){return qt.map(It).join(ce)}function It(qt){return Re.test(qt)?'"'+qt.replace(/\"/g,'""')+'"':qt}return Be},y.csv=y.dsv(",","text/csv"),y.tsv=y.dsv("	","text/tab-separated-values");var Vr,Dr,Mr,jr,kn=this[O(this,"requestAnimationFrame")]||function(ce){setTimeout(ce,17)};y.timer=function(){yn.apply(this,arguments)};function yn(ce,Te,Re){var Ue=arguments.length;Ue<2&&(Te=0),Ue<3&&(Re=Date.now());var Be=Re+Te,$e={c:ce,t:Be,n:null};return Dr?Dr.n=$e:Vr=$e,Dr=$e,Mr||(jr=clearTimeout(jr),Mr=1,kn(Wn)),$e}function Wn(){var ce=In(),Te=$n()-ce;Te>24?(isFinite(Te)&&(clearTimeout(jr),jr=setTimeout(Wn,Te)),Mr=0):(Mr=1,kn(Wn))}y.timer.flush=function(){In(),$n()};function In(){for(var ce=Date.now(),Te=Vr;Te;)ce>=Te.t&&Te.c(ce-Te.t)&&(Te.c=null),Te=Te.n;return ce}function $n(){for(var ce,Te=Vr,Re=1/0;Te;)Te.c?(Te.t<Re&&(Re=Te.t),Te=(ce=Te).n):Te=ce?ce.n=Te.n:Vr=Te.n;return Dr=ce,Re}y.round=function(ce,Te){return Te?Math.round(ce*(Te=Math.pow(10,Te)))/Te:Math.round(ce)},y.geom={};function Kn(ce){return ce[0]}function ya(ce){return ce[1]}y.geom.hull=function(ce){var Te=Kn,Re=ya;if(arguments.length)return Ue(ce);function Ue(Be){if(Be.length<3)return[];var $e=at(Te),wt=at(Re),gt,It=Be.length,qt=[],nr=[];for(gt=0;gt<It;gt++)qt.push([+$e.call(this,Be[gt],gt),+wt.call(this,Be[gt],gt),gt]);for(qt.sort(_i),gt=0;gt<It;gt++)nr.push([qt[gt][0],-qt[gt][1]]);var ar=Ra(qt),Cr=Ra(nr),nn=Cr[0]===ar[0],pn=Cr[Cr.length-1]===ar[ar.length-1],Ir=[];for(gt=ar.length-1;gt>=0;--gt)Ir.push(Be[qt[ar[gt]][2]]);for(gt=+nn;gt<Cr.length-pn;++gt)Ir.push(Be[qt[Cr[gt]][2]]);return Ir}return Ue.x=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.y=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue};function Ra(ce){for(var Te=ce.length,Re=[0,1],Ue=2,Be=2;Be<Te;Be++){for(;Ue>1&&Mt(ce[Re[Ue-2]],ce[Re[Ue-1]],ce[Be])<=0;)--Ue;Re[Ue++]=Be}return Re.slice(0,Ue)}function _i(ce,Te){return ce[0]-Te[0]||ce[1]-Te[1]}y.geom.polygon=function(ce){return K(ce,Ka),ce};var Ka=y.geom.polygon.prototype=[];Ka.area=function(){for(var ce=-1,Te=this.length,Re,Ue=this[Te-1],Be=0;++ce<Te;)Re=Ue,Ue=this[ce],Be+=Re[1]*Ue[0]-Re[0]*Ue[1];return Be*.5},Ka.centroid=function(ce){var Te=-1,Re=this.length,Ue=0,Be=0,$e,wt=this[Re-1],gt;for(arguments.length||(ce=-1/(6*this.area()));++Te<Re;)$e=wt,wt=this[Te],gt=$e[0]*wt[1]-wt[0]*$e[1],Ue+=($e[0]+wt[0])*gt,Be+=($e[1]+wt[1])*gt;return[Ue*ce,Be*ce]},Ka.clip=function(ce){for(var Te,Re=kr(ce),Ue=-1,Be=this.length-kr(this),$e,wt,gt=this[Be-1],It,qt,nr;++Ue<Be;){for(Te=ce.slice(),ce.length=0,It=this[Ue],qt=Te[(wt=Te.length-Re)-1],$e=-1;++$e<wt;)nr=Te[$e],ri(nr,gt,It)?(ri(qt,gt,It)||ce.push(ei(qt,nr,gt,It)),ce.push(nr)):ri(qt,gt,It)&&ce.push(ei(qt,nr,gt,It)),qt=nr;Re&&ce.push(ce[0]),gt=It}return ce};function ri(ce,Te,Re){return(Re[0]-Te[0])*(ce[1]-Te[1])<(Re[1]-Te[1])*(ce[0]-Te[0])}function ei(ce,Te,Re,Ue){var Be=ce[0],$e=Re[0],wt=Te[0]-Be,gt=Ue[0]-$e,It=ce[1],qt=Re[1],nr=Te[1]-It,ar=Ue[1]-qt,Cr=(gt*(It-qt)-ar*(Be-$e))/(ar*wt-gt*nr);return[Be+Cr*wt,It+Cr*nr]}function kr(ce){var Te=ce[0],Re=ce[ce.length-1];return!(Te[0]-Re[0]||Te[1]-Re[1])}var bn,dn,Ln,ra=[],ma,sa,Bn=[];function Qn(){ga(this),this.edge=this.site=this.circle=null}function Xa(ce){var Te=ra.pop()||new Qn;return Te.site=ce,Te}function yi(ce){wr(ce),Ln.remove(ce),ra.push(ce),ga(ce)}function Yt(ce){var Te=ce.circle,Re=Te.x,Ue=Te.cy,Be={x:Re,y:Ue},$e=ce.P,wt=ce.N,gt=[ce];yi(ce);for(var It=$e;It.circle&&l(Re-It.circle.x)<it&&l(Ue-It.circle.cy)<it;)$e=It.P,gt.unshift(It),yi(It),It=$e;gt.unshift(It),wr(It);for(var qt=wt;qt.circle&&l(Re-qt.circle.x)<it&&l(Ue-qt.circle.cy)<it;)wt=qt.N,gt.push(qt),yi(qt),qt=wt;gt.push(qt),wr(qt);var nr=gt.length,ar;for(ar=1;ar<nr;++ar)qt=gt[ar],It=gt[ar-1],fa(qt.edge,It.site,qt.site,Be);It=gt[0],qt=gt[nr-1],qt.edge=Sn(It.site,qt.site,null,Be),_r(It),_r(qt)}function gr(ce){for(var Te=ce.x,Re=ce.y,Ue,Be,$e,wt,gt=Ln._;gt;)if($e=un(gt,Re)-Te,$e>it)gt=gt.L;else if(wt=Te-mn(gt,Re),wt>it){if(!gt.R){Ue=gt;break}gt=gt.R}else{$e>-it?(Ue=gt.P,Be=gt):wt>-it?(Ue=gt,Be=gt.N):Ue=Be=gt;break}var It=Xa(ce);if(Ln.insert(Ue,It),!(!Ue&&!Be)){if(Ue===Be){wr(Ue),Be=Xa(Ue.site),Ln.insert(It,Be),It.edge=Be.edge=Sn(Ue.site,It.site),_r(Ue),_r(Be);return}if(!Be){It.edge=Sn(Ue.site,It.site);return}wr(Ue),wr(Be);var qt=Ue.site,nr=qt.x,ar=qt.y,Cr=ce.x-nr,nn=ce.y-ar,pn=Be.site,Ir=pn.x-nr,Wr=pn.y-ar,en=2*(Cr*Wr-nn*Ir),fn=Cr*Cr+nn*nn,vn=Ir*Ir+Wr*Wr,tn={x:(Wr*fn-nn*vn)/en+nr,y:(Cr*vn-Ir*fn)/en+ar};fa(Be.edge,qt,pn,tn),It.edge=Sn(qt,ce,null,tn),Be.edge=Sn(ce,pn,null,tn),_r(Ue),_r(Be)}}function un(ce,Te){var Re=ce.site,Ue=Re.x,Be=Re.y,$e=Be-Te;if(!$e)return Ue;var wt=ce.P;if(!wt)return-1/0;Re=wt.site;var gt=Re.x,It=Re.y,qt=It-Te;if(!qt)return gt;var nr=gt-Ue,ar=1/$e-1/qt,Cr=nr/qt;return ar?(-Cr+Math.sqrt(Cr*Cr-2*ar*(nr*nr/(-2*qt)-It+qt/2+Be-$e/2)))/ar+Ue:(Ue+gt)/2}function mn(ce,Te){var Re=ce.N;if(Re)return un(Re,Te);var Ue=ce.site;return Ue.y===Te?Ue.x:1/0}function sn(ce){this.site=ce,this.edges=[]}sn.prototype.prepare=function(){for(var ce=this.edges,Te=ce.length,Re;Te--;)Re=ce[Te].edge,(!Re.b||!Re.a)&&ce.splice(Te,1);return ce.sort(Tn),ce.length};function Cn(ce){for(var Te=ce[0][0],Re=ce[1][0],Ue=ce[0][1],Be=ce[1][1],$e,wt,gt,It,qt=dn,nr=qt.length,ar,Cr,nn,pn,Ir,Wr;nr--;)if(ar=qt[nr],!(!ar||!ar.prepare()))for(nn=ar.edges,pn=nn.length,Cr=0;Cr<pn;)Wr=nn[Cr].end(),gt=Wr.x,It=Wr.y,Ir=nn[++Cr%pn].start(),$e=Ir.x,wt=Ir.y,(l(gt-$e)>it||l(It-wt)>it)&&(nn.splice(Cr,0,new Ma(na(ar.site,Wr,l(gt-Te)<it&&Be-It>it?{x:Te,y:l($e-Te)<it?wt:Be}:l(It-Be)<it&&Re-gt>it?{x:l(wt-Be)<it?$e:Re,y:Be}:l(gt-Re)<it&&It-Ue>it?{x:Re,y:l($e-Re)<it?wt:Ue}:l(It-Ue)<it&&gt-Te>it?{x:l(wt-Ue)<it?$e:Te,y:Ue}:null),ar.site,null)),++pn)}function Tn(ce,Te){return Te.angle-ce.angle}function gn(){ga(this),this.x=this.y=this.arc=this.site=this.cy=null}function _r(ce){var Te=ce.P,Re=ce.N;if(!(!Te||!Re)){var Ue=Te.site,Be=ce.site,$e=Re.site;if(Ue!==$e){var wt=Be.x,gt=Be.y,It=Ue.x-wt,qt=Ue.y-gt,nr=$e.x-wt,Wr=$e.y-gt,ar=2*(It*Wr-qt*nr);if(!(ar>=-Ye)){var Cr=It*It+qt*qt,nn=nr*nr+Wr*Wr,pn=(Wr*Cr-qt*nn)/ar,Ir=(It*nn-nr*Cr)/ar,Wr=Ir+gt,en=Bn.pop()||new gn;en.arc=ce,en.site=Be,en.x=pn+wt,en.y=Wr+Math.sqrt(pn*pn+Ir*Ir),en.cy=Wr,ce.circle=en;for(var fn=null,vn=sa._;vn;)if(en.y<vn.y||en.y===vn.y&&en.x<=vn.x)if(vn.L)vn=vn.L;else{fn=vn.P;break}else if(vn.R)vn=vn.R;else{fn=vn;break}sa.insert(fn,en),fn||(ma=en)}}}}function wr(ce){var Te=ce.circle;Te&&(Te.P||(ma=Te.N),sa.remove(Te),Bn.push(Te),ga(Te),ce.circle=null)}function Br(ce,Te,Re,Ue){return function(Be){var $e=Be.a,wt=Be.b,gt=$e.x,It=$e.y,qt=wt.x,nr=wt.y,ar=0,Cr=1,nn=qt-gt,pn=nr-It,Ir;if(Ir=ce-gt,!(!nn&&Ir>0)){if(Ir/=nn,nn<0){if(Ir<ar)return;Ir<Cr&&(Cr=Ir)}else if(nn>0){if(Ir>Cr)return;Ir>ar&&(ar=Ir)}if(Ir=Re-gt,!(!nn&&Ir<0)){if(Ir/=nn,nn<0){if(Ir>Cr)return;Ir>ar&&(ar=Ir)}else if(nn>0){if(Ir<ar)return;Ir<Cr&&(Cr=Ir)}if(Ir=Te-It,!(!pn&&Ir>0)){if(Ir/=pn,pn<0){if(Ir<ar)return;Ir<Cr&&(Cr=Ir)}else if(pn>0){if(Ir>Cr)return;Ir>ar&&(ar=Ir)}if(Ir=Ue-It,!(!pn&&Ir<0)){if(Ir/=pn,pn<0){if(Ir>Cr)return;Ir>ar&&(ar=Ir)}else if(pn>0){if(Ir<ar)return;Ir<Cr&&(Cr=Ir)}return ar>0&&(Be.a={x:gt+ar*nn,y:It+ar*pn}),Cr<1&&(Be.b={x:gt+Cr*nn,y:It+Cr*pn}),Be}}}}}}function An(ce){for(var Te=bn,Re=Br(ce[0][0],ce[0][1],ce[1][0],ce[1][1]),Ue=Te.length,Be;Ue--;)Be=Te[Ue],(!Yn(Be,ce)||!Re(Be)||l(Be.a.x-Be.b.x)<it&&l(Be.a.y-Be.b.y)<it)&&(Be.a=Be.b=null,Te.splice(Ue,1))}function Yn(ce,Te){var Re=ce.b;if(Re)return!0;var Ue=ce.a,Be=Te[0][0],$e=Te[1][0],wt=Te[0][1],gt=Te[1][1],It=ce.l,qt=ce.r,nr=It.x,ar=It.y,Cr=qt.x,nn=qt.y,pn=(nr+Cr)/2,Ir=(ar+nn)/2,Wr,en;if(nn===ar){if(pn<Be||pn>=$e)return;if(nr>Cr){if(!Ue)Ue={x:pn,y:wt};else if(Ue.y>=gt)return;Re={x:pn,y:gt}}else{if(!Ue)Ue={x:pn,y:gt};else if(Ue.y<wt)return;Re={x:pn,y:wt}}}else if(Wr=(nr-Cr)/(nn-ar),en=Ir-Wr*pn,Wr<-1||Wr>1)if(nr>Cr){if(!Ue)Ue={x:(wt-en)/Wr,y:wt};else if(Ue.y>=gt)return;Re={x:(gt-en)/Wr,y:gt}}else{if(!Ue)Ue={x:(gt-en)/Wr,y:gt};else if(Ue.y<wt)return;Re={x:(wt-en)/Wr,y:wt}}else if(ar<nn){if(!Ue)Ue={x:Be,y:Wr*Be+en};else if(Ue.x>=$e)return;Re={x:$e,y:Wr*$e+en}}else{if(!Ue)Ue={x:$e,y:Wr*$e+en};else if(Ue.x<Be)return;Re={x:Be,y:Wr*Be+en}}return ce.a=Ue,ce.b=Re,!0}function ua(ce,Te){this.l=ce,this.r=Te,this.a=this.b=null}function Sn(ce,Te,Re,Ue){var Be=new ua(ce,Te);return bn.push(Be),Re&&fa(Be,ce,Te,Re),Ue&&fa(Be,Te,ce,Ue),dn[ce.i].edges.push(new Ma(Be,ce,Te)),dn[Te.i].edges.push(new Ma(Be,Te,ce)),Be}function na(ce,Te,Re){var Ue=new ua(ce,null);return Ue.a=Te,Ue.b=Re,bn.push(Ue),Ue}function fa(ce,Te,Re,Ue){!ce.a&&!ce.b?(ce.a=Ue,ce.l=Te,ce.r=Re):ce.l===Re?ce.b=Ue:ce.a=Ue}function Ma(ce,Te,Re){var Ue=ce.a,Be=ce.b;this.edge=ce,this.site=Te,this.angle=Re?Math.atan2(Re.y-Te.y,Re.x-Te.x):ce.l===Te?Math.atan2(Be.x-Ue.x,Ue.y-Be.y):Math.atan2(Ue.x-Be.x,Be.y-Ue.y)}Ma.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ka(){this._=null}function ga(ce){ce.U=ce.C=ce.L=ce.R=ce.P=ce.N=null}ka.prototype={insert:function(ce,Te){var Re,Ue,Be;if(ce){if(Te.P=ce,Te.N=ce.N,ce.N&&(ce.N.P=Te),ce.N=Te,ce.R){for(ce=ce.R;ce.L;)ce=ce.L;ce.L=Te}else ce.R=Te;Re=ce}else this._?(ce=ro(this._),Te.P=null,Te.N=ce,ce.P=ce.L=Te,Re=ce):(Te.P=Te.N=null,this._=Te,Re=null);for(Te.L=Te.R=null,Te.U=Re,Te.C=!0,ce=Te;Re&&Re.C;)Ue=Re.U,Re===Ue.L?(Be=Ue.R,Be&&Be.C?(Re.C=Be.C=!1,Ue.C=!0,ce=Ue):(ce===Re.R&&(Ia(this,Re),ce=Re,Re=ce.U),Re.C=!1,Ue.C=!0,Ao(this,Ue))):(Be=Ue.L,Be&&Be.C?(Re.C=Be.C=!1,Ue.C=!0,ce=Ue):(ce===Re.L&&(Ao(this,Re),ce=Re,Re=ce.U),Re.C=!1,Ue.C=!0,Ia(this,Ue))),Re=ce.U;this._.C=!1},remove:function(ce){ce.N&&(ce.N.P=ce.P),ce.P&&(ce.P.N=ce.N),ce.N=ce.P=null;var Te=ce.U,Re,Ue=ce.L,Be=ce.R,$e,wt;if(Ue?Be?$e=ro(Be):$e=Ue:$e=Be,Te?Te.L===ce?Te.L=$e:Te.R=$e:this._=$e,Ue&&Be?(wt=$e.C,$e.C=ce.C,$e.L=Ue,Ue.U=$e,$e!==Be?(Te=$e.U,$e.U=ce.U,ce=$e.R,Te.L=ce,$e.R=Be,Be.U=$e):($e.U=Te,Te=$e,ce=$e.R)):(wt=ce.C,ce=$e),ce&&(ce.U=Te),!wt){if(ce&&ce.C){ce.C=!1;return}do{if(ce===this._)break;if(ce===Te.L){if(Re=Te.R,Re.C&&(Re.C=!1,Te.C=!0,Ia(this,Te),Re=Te.R),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.R||!Re.R.C)&&(Re.L.C=!1,Re.C=!0,Ao(this,Re),Re=Te.R),Re.C=Te.C,Te.C=Re.R.C=!1,Ia(this,Te),ce=this._;break}}else if(Re=Te.L,Re.C&&(Re.C=!1,Te.C=!0,Ao(this,Te),Re=Te.L),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.L||!Re.L.C)&&(Re.R.C=!1,Re.C=!0,Ia(this,Re),Re=Te.L),Re.C=Te.C,Te.C=Re.L.C=!1,Ao(this,Te),ce=this._;break}Re.C=!0,ce=Te,Te=Te.U}while(!ce.C);ce&&(ce.C=!1)}}};function Ia(ce,Te){var Re=Te,Ue=Te.R,Be=Re.U;Be?Be.L===Re?Be.L=Ue:Be.R=Ue:ce._=Ue,Ue.U=Be,Re.U=Ue,Re.R=Ue.L,Re.R&&(Re.R.U=Re),Ue.L=Re}function Ao(ce,Te){var Re=Te,Ue=Te.L,Be=Re.U;Be?Be.L===Re?Be.L=Ue:Be.R=Ue:ce._=Ue,Ue.U=Be,Re.U=Ue,Re.L=Ue.R,Re.L&&(Re.L.U=Re),Ue.R=Re}function ro(ce){for(;ce.L;)ce=ce.L;return ce}function $o(ce,Te){var Re=ce.sort($s).pop(),Ue,Be,$e;for(bn=[],dn=new Array(ce.length),Ln=new ka,sa=new ka;;)if($e=ma,Re&&(!$e||Re.y<$e.y||Re.y===$e.y&&Re.x<$e.x))(Re.x!==Ue||Re.y!==Be)&&(dn[Re.i]=new sn(Re),gr(Re),Ue=Re.x,Be=Re.y),Re=ce.pop();else if($e)Yt($e.arc);else break;Te&&(An(Te),Cn(Te));var wt={cells:dn,edges:bn};return Ln=sa=bn=dn=null,wt}function $s(ce,Te){return Te.y-ce.y||Te.x-ce.x}y.geom.voronoi=function(ce){var Te=Kn,Re=ya,Ue=Te,Be=Re,$e=Hs;if(ce)return wt(ce);function wt(It){var qt=new Array(It.length),nr=$e[0][0],ar=$e[0][1],Cr=$e[1][0],nn=$e[1][1];return $o(gt(It),$e).cells.forEach(function(pn,Ir){var Wr=pn.edges,en=pn.site,fn=qt[Ir]=Wr.length?Wr.map(function(vn){var tn=vn.start();return[tn.x,tn.y]}):en.x>=nr&&en.x<=Cr&&en.y>=ar&&en.y<=nn?[[nr,nn],[Cr,nn],[Cr,ar],[nr,ar]]:[];fn.point=It[Ir]}),qt}function gt(It){return It.map(function(qt,nr){return{x:Math.round(Ue(qt,nr)/it)*it,y:Math.round(Be(qt,nr)/it)*it,i:nr}})}return wt.links=function(It){return $o(gt(It)).edges.filter(function(qt){return qt.l&&qt.r}).map(function(qt){return{source:It[qt.l.i],target:It[qt.r.i]}})},wt.triangles=function(It){var qt=[];return $o(gt(It)).cells.forEach(function(nr,ar){for(var Cr=nr.site,nn=nr.edges.sort(Tn),pn=-1,Ir=nn.length,Wr,en=nn[Ir-1].edge,fn=en.l===Cr?en.r:en.l;++pn<Ir;)Wr=fn,en=nn[pn].edge,fn=en.l===Cr?en.r:en.l,ar<Wr.i&&ar<fn.i&&Wl(Cr,Wr,fn)<0&&qt.push([It[ar],It[Wr.i],It[fn.i]])}),qt},wt.x=function(It){return arguments.length?(Ue=at(Te=It),wt):Te},wt.y=function(It){return arguments.length?(Be=at(Re=It),wt):Re},wt.clipExtent=function(It){return arguments.length?($e=It==null?Hs:It,wt):$e===Hs?null:$e},wt.size=function(It){return arguments.length?wt.clipExtent(It&&[[0,0],It]):$e===Hs?null:$e&&$e[1]},wt};var Hs=[[-1e6,-1e6],[1e6,1e6]];function Wl(ce,Te,Re){return(ce.x-Re.x)*(Te.y-ce.y)-(ce.x-Te.x)*(Re.y-ce.y)}y.geom.delaunay=function(ce){return y.geom.voronoi().triangles(ce)},y.geom.quadtree=function(ce,Te,Re,Ue,Be){var $e=Kn,wt=ya,gt;if(gt=arguments.length)return $e=Ai,wt=Gs,gt===3&&(Be=Re,Ue=Te,Re=Te=0),It(ce);function It(qt){var nr,ar=at($e),Cr=at(wt),nn,pn,Ir,Wr,en,fn,vn,tn;if(Te!=null)en=Te,fn=Re,vn=Ue,tn=Be;else if(vn=tn=-(en=fn=1/0),nn=[],pn=[],Wr=qt.length,gt)for(Ir=0;Ir<Wr;++Ir)nr=qt[Ir],nr.x<en&&(en=nr.x),nr.y<fn&&(fn=nr.y),nr.x>vn&&(vn=nr.x),nr.y>tn&&(tn=nr.y),nn.push(nr.x),pn.push(nr.y);else for(Ir=0;Ir<Wr;++Ir){var Zn=+ar(nr=qt[Ir],Ir),ha=+Cr(nr,Ir);Zn<en&&(en=Zn),ha<fn&&(fn=ha),Zn>vn&&(vn=Zn),ha>tn&&(tn=ha),nn.push(Zn),pn.push(ha)}var Pa=vn-en,pa=tn-fn;Pa>pa?tn=fn+Pa:vn=en+pa;function Na(Va,ui,Li,Po,$i,_a,di,ii){if(!(isNaN(Li)||isNaN(Po)))if(Va.leaf){var Ui=Va.x,mi=Va.y;if(Ui!=null)if(l(Ui-Li)+l(mi-Po)<.01)xa(Va,ui,Li,Po,$i,_a,di,ii);else{var Eo=Va.point;Va.x=Va.y=Va.point=null,xa(Va,Eo,Ui,mi,$i,_a,di,ii),xa(Va,ui,Li,Po,$i,_a,di,ii)}else Va.x=Li,Va.y=Po,Va.point=ui}else xa(Va,ui,Li,Po,$i,_a,di,ii)}function xa(Va,ui,Li,Po,$i,_a,di,ii){var Ui=($i+di)*.5,mi=(_a+ii)*.5,Eo=Li>=Ui,yo=Po>=mi,zo=yo<<1|Eo;Va.leaf=!1,Va=Va.nodes[zo]||(Va.nodes[zo]=Ys()),Eo?$i=Ui:di=Ui,yo?_a=mi:ii=mi,Na(Va,ui,Li,Po,$i,_a,di,ii)}var $a=Ys();if($a.add=function(Va){Na($a,Va,+ar(Va,++Ir),+Cr(Va,Ir),en,fn,vn,tn)},$a.visit=function(Va){Zi(Va,$a,en,fn,vn,tn)},$a.find=function(Va){return Ro($a,Va[0],Va[1],en,fn,vn,tn)},Ir=-1,Te==null){for(;++Ir<Wr;)Na($a,qt[Ir],nn[Ir],pn[Ir],en,fn,vn,tn);--Ir}else qt.forEach($a.add);return nn=pn=qt=nr=null,$a}return It.x=function(qt){return arguments.length?($e=qt,It):$e},It.y=function(qt){return arguments.length?(wt=qt,It):wt},It.extent=function(qt){return arguments.length?(qt==null?Te=Re=Ue=Be=null:(Te=+qt[0][0],Re=+qt[0][1],Ue=+qt[1][0],Be=+qt[1][1]),It):Te==null?null:[[Te,Re],[Ue,Be]]},It.size=function(qt){return arguments.length?(qt==null?Te=Re=Ue=Be=null:(Te=Re=0,Ue=+qt[0],Be=+qt[1]),It):Te==null?null:[Ue-Te,Be-Re]},It};function Ai(ce){return ce.x}function Gs(ce){return ce.y}function Ys(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Zi(ce,Te,Re,Ue,Be,$e){if(!ce(Te,Re,Ue,Be,$e)){var wt=(Re+Be)*.5,gt=(Ue+$e)*.5,It=Te.nodes;It[0]&&Zi(ce,It[0],Re,Ue,wt,gt),It[1]&&Zi(ce,It[1],wt,Ue,Be,gt),It[2]&&Zi(ce,It[2],Re,gt,wt,$e),It[3]&&Zi(ce,It[3],wt,gt,Be,$e)}}function Ro(ce,Te,Re,Ue,Be,$e,wt){var gt=1/0,It;return function qt(nr,ar,Cr,nn,pn){if(!(ar>$e||Cr>wt||nn<Ue||pn<Be)){if(Ir=nr.point){var Ir,Wr=Te-nr.x,en=Re-nr.y,fn=Wr*Wr+en*en;if(fn<gt){var vn=Math.sqrt(gt=fn);Ue=Te-vn,Be=Re-vn,$e=Te+vn,wt=Re+vn,It=Ir}}for(var tn=nr.nodes,Zn=(ar+nn)*.5,ha=(Cr+pn)*.5,Pa=Te>=Zn,pa=Re>=ha,Na=pa<<1|Pa,xa=Na+4;Na<xa;++Na)if(nr=tn[Na&3])switch(Na&3){case 0:qt(nr,ar,Cr,Zn,ha);break;case 1:qt(nr,Zn,Cr,nn,ha);break;case 2:qt(nr,ar,ha,Zn,pn);break;case 3:qt(nr,Zn,ha,nn,pn);break}}}(ce,Ue,Be,$e,wt),It}y.interpolateRgb=Cl;function Cl(ce,Te){ce=y.rgb(ce),Te=y.rgb(Te);var Re=ce.r,Ue=ce.g,Be=ce.b,$e=Te.r-Re,wt=Te.g-Ue,gt=Te.b-Be;return function(It){return"#"+Er(Math.round(Re+$e*It))+Er(Math.round(Ue+wt*It))+Er(Math.round(Be+gt*It))}}y.interpolateObject=_s;function _s(ce,Te){var Re={},Ue={},Be;for(Be in ce)Be in Te?Re[Be]=po(ce[Be],Te[Be]):Ue[Be]=ce[Be];for(Be in Te)Be in ce||(Ue[Be]=Te[Be]);return function($e){for(Be in Re)Ue[Be]=Re[Be]($e);return Ue}}y.interpolateNumber=Fi;function Fi(ce,Te){return ce=+ce,Te=+Te,function(Re){return ce*(1-Re)+Te*Re}}y.interpolateString=vl;function vl(ce,Te){var Re=lo.lastIndex=zi.lastIndex=0,Ue,Be,$e,wt=-1,gt=[],It=[];for(ce=ce+"",Te=Te+"";(Ue=lo.exec(ce))&&(Be=zi.exec(Te));)($e=Be.index)>Re&&($e=Te.slice(Re,$e),gt[wt]?gt[wt]+=$e:gt[++wt]=$e),(Ue=Ue[0])===(Be=Be[0])?gt[wt]?gt[wt]+=Be:gt[++wt]=Be:(gt[++wt]=null,It.push({i:wt,x:Fi(Ue,Be)})),Re=zi.lastIndex;return Re<Te.length&&($e=Te.slice(Re),gt[wt]?gt[wt]+=$e:gt[++wt]=$e),gt.length<2?It[0]?(Te=It[0].x,function(qt){return Te(qt)+""}):function(){return Te}:(Te=It.length,function(qt){for(var nr=0,ar;nr<Te;++nr)gt[(ar=It[nr]).i]=ar.x(qt);return gt.join("")})}var lo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zi=new RegExp(lo.source,"g");y.interpolate=po;function po(ce,Te){for(var Re=y.interpolators.length,Ue;--Re>=0&&!(Ue=y.interpolators[Re](ce,Te)););return Ue}y.interpolators=[function(ce,Te){var Re=typeof Te;return(Re==="string"?Lr.has(Te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Te)?Cl:vl:Te instanceof rr?Cl:Array.isArray(Te)?no:Re==="object"&&isNaN(Te)?_s:Fi)(ce,Te)}],y.interpolateArray=no;function no(ce,Te){var Re=[],Ue=[],Be=ce.length,$e=Te.length,wt=Math.min(ce.length,Te.length),gt;for(gt=0;gt<wt;++gt)Re.push(po(ce[gt],Te[gt]));for(;gt<Be;++gt)Ue[gt]=ce[gt];for(;gt<$e;++gt)Ue[gt]=Te[gt];return function(It){for(gt=0;gt<wt;++gt)Ue[gt]=Re[gt](It);return Ue}}var us=function(){return D},Qs=y.map({linear:us,poly:Is,quad:function(){return Oo},cubic:function(){return hc},sin:function(){return Xl},exp:function(){return Xu},circle:function(){return ju},elastic:Ws,back:Ll,bounce:function(){return Fs}}),lu=y.map({in:D,out:Au,"in-out":Rs,"out-in":function(ce){return Rs(Au(ce))}});y.ease=function(ce){var Te=ce.indexOf("-"),Re=Te>=0?ce.slice(0,Te):ce,Ue=Te>=0?ce.slice(Te+1):"in";return Re=Qs.get(Re)||us,Ue=lu.get(Ue)||D,es(Ue(Re.apply(null,c.call(arguments,1))))};function es(ce){return function(Te){return Te<=0?0:Te>=1?1:ce(Te)}}function Au(ce){return function(Te){return 1-ce(1-Te)}}function Rs(ce){return function(Te){return .5*(Te<.5?ce(2*Te):2-ce(2-2*Te))}}function Oo(ce){return ce*ce}function hc(ce){return ce*ce*ce}function So(ce){if(ce<=0)return 0;if(ce>=1)return 1;var Te=ce*ce,Re=Te*ce;return 4*(ce<.5?Re:3*(ce-Te)+Re-.75)}function Is(ce){return function(Te){return Math.pow(Te,ce)}}function Xl(ce){return 1-Math.cos(ce*qe)}function Xu(ce){return Math.pow(2,10*(ce-1))}function ju(ce){return 1-Math.sqrt(1-ce*ce)}function Ws(ce,Te){var Re;return arguments.length<2&&(Te=.45),arguments.length?Re=Te/Ge*Math.asin(1/ce):(ce=1,Re=Te/4),function(Ue){return 1+ce*Math.pow(2,-10*Ue)*Math.sin((Ue-Re)*Ge/Te)}}function Ll(ce){return ce||(ce=1.70158),function(Te){return Te*Te*((ce+1)*Te-ce)}}function Fs(ce){return ce<1/2.75?7.5625*ce*ce:ce<2/2.75?7.5625*(ce-=1.5/2.75)*ce+.75:ce<2.5/2.75?7.5625*(ce-=2.25/2.75)*ce+.9375:7.5625*(ce-=2.625/2.75)*ce+.984375}y.interpolateHcl=uu;function uu(ce,Te){ce=y.hcl(ce),Te=y.hcl(Te);var Re=ce.h,Ue=ce.c,Be=ce.l,$e=Te.h-Re,wt=Te.c-Ue,gt=Te.l-Be;return isNaN(wt)&&(wt=0,Ue=isNaN(Ue)?Te.c:Ue),isNaN($e)?($e=0,Re=isNaN(Re)?Te.h:Re):$e>180?$e-=360:$e<-180&&($e+=360),function(It){return lt(Re+$e*It,Ue+wt*It,Be+gt*It)+""}}y.interpolateHsl=pl;function pl(ce,Te){ce=y.hsl(ce),Te=y.hsl(Te);var Re=ce.h,Ue=ce.s,Be=ce.l,$e=Te.h-Re,wt=Te.s-Ue,gt=Te.l-Be;return isNaN(wt)&&(wt=0,Ue=isNaN(Ue)?Te.s:Ue),isNaN($e)?($e=0,Re=isNaN(Re)?Te.h:Re):$e>180?$e-=360:$e<-180&&($e+=360),function(It){return Sr(Re+$e*It,Ue+wt*It,Be+gt*It)+""}}y.interpolateLab=cu;function cu(ce,Te){ce=y.lab(ce),Te=y.lab(Te);var Re=ce.l,Ue=ce.a,Be=ce.b,$e=Te.l-Re,wt=Te.a-Ue,gt=Te.b-Be;return function(It){return ct(Re+$e*It,Ue+wt*It,Be+gt*It)+""}}y.interpolateRound=Mu;function Mu(ce,Te){return Te-=ce,function(Re){return Math.round(ce+Te*Re)}}y.transform=function(ce){var Te=T.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(Re){if(Re!=null){Te.setAttribute("transform",Re);var Ue=Te.transform.baseVal.consolidate()}return new jl(Ue?Ue.matrix:dl)})(ce)};function jl(ce){var Te=[ce.a,ce.b],Re=[ce.c,ce.d],Ue=qs(Te),Be=Eu(Te,Re),$e=qs(Zl(Re,Te,-Be))||0;Te[0]*Re[1]<Re[0]*Te[1]&&(Te[0]*=-1,Te[1]*=-1,Ue*=-1,Be*=-1),this.rotate=(Ue?Math.atan2(Te[1],Te[0]):Math.atan2(-Re[0],Re[1]))*mt,this.translate=[ce.e,ce.f],this.scale=[Ue,$e],this.skew=$e?Math.atan2(Be,$e)*mt:0}jl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Eu(ce,Te){return ce[0]*Te[0]+ce[1]*Te[1]}function qs(ce){var Te=Math.sqrt(Eu(ce,ce));return Te&&(ce[0]/=Te,ce[1]/=Te),Te}function Zl(ce,Te,Re){return ce[0]+=Re*Te[0],ce[1]+=Re*Te[1],ce}var dl={a:1,b:0,c:0,d:1,e:0,f:0};y.interpolateTransform=Kl;function ws(ce){return ce.length?ce.pop()+",":""}function Pl(ce,Te,Re,Ue){if(ce[0]!==Te[0]||ce[1]!==Te[1]){var Be=Re.push("translate(",null,",",null,")");Ue.push({i:Be-4,x:Fi(ce[0],Te[0])},{i:Be-2,x:Fi(ce[1],Te[1])})}else(Te[0]||Te[1])&&Re.push("translate("+Te+")")}function fu(ce,Te,Re,Ue){ce!==Te?(ce-Te>180?Te+=360:Te-ce>180&&(ce+=360),Ue.push({i:Re.push(ws(Re)+"rotate(",null,")")-2,x:Fi(ce,Te)})):Te&&Re.push(ws(Re)+"rotate("+Te+")")}function Su(ce,Te,Re,Ue){ce!==Te?Ue.push({i:Re.push(ws(Re)+"skewX(",null,")")-2,x:Fi(ce,Te)}):Te&&Re.push(ws(Re)+"skewX("+Te+")")}function ku(ce,Te,Re,Ue){if(ce[0]!==Te[0]||ce[1]!==Te[1]){var Be=Re.push(ws(Re)+"scale(",null,",",null,")");Ue.push({i:Be-4,x:Fi(ce[0],Te[0])},{i:Be-2,x:Fi(ce[1],Te[1])})}else(Te[0]!==1||Te[1]!==1)&&Re.push(ws(Re)+"scale("+Te+")")}function Kl(ce,Te){var Re=[],Ue=[];return ce=y.transform(ce),Te=y.transform(Te),Pl(ce.translate,Te.translate,Re,Ue),fu(ce.rotate,Te.rotate,Re,Ue),Su(ce.skew,Te.skew,Re,Ue),ku(ce.scale,Te.scale,Re,Ue),ce=Te=null,function(Be){for(var $e=-1,wt=Ue.length,gt;++$e<wt;)Re[(gt=Ue[$e]).i]=gt.x(Be);return Re.join("")}}function el(ce,Te){return Te=(Te-=ce=+ce)||1/Te,function(Re){return(Re-ce)/Te}}function Cu(ce,Te){return Te=(Te-=ce=+ce)||1/Te,function(Re){return Math.max(0,Math.min(1,(Re-ce)/Te))}}y.layout={},y.layout.bundle=function(){return function(ce){for(var Te=[],Re=-1,Ue=ce.length;++Re<Ue;)Te.push(cs(ce[Re]));return Te}};function cs(ce){for(var Te=ce.source,Re=ce.target,Ue=tl(Te,Re),Be=[Te];Te!==Ue;)Te=Te.parent,Be.push(Te);for(var $e=Be.length;Re!==Ue;)Be.splice($e,0,Re),Re=Re.parent;return Be}function Yo(ce){for(var Te=[],Re=ce.parent;Re!=null;)Te.push(ce),ce=Re,Re=Re.parent;return Te.push(ce),Te}function tl(ce,Te){if(ce===Te)return ce;for(var Re=Yo(ce),Ue=Yo(Te),Be=Re.pop(),$e=Ue.pop(),wt=null;Be===$e;)wt=Be,Be=Re.pop(),$e=Ue.pop();return wt}y.layout.chord=function(){var ce={},Te,Re,Ue,Be,$e=0,wt,gt,It;function qt(){var ar={},Cr=[],nn=y.range(Be),pn=[],Ir,Wr,en,fn,vn;for(Te=[],Re=[],Ir=0,fn=-1;++fn<Be;){for(Wr=0,vn=-1;++vn<Be;)Wr+=Ue[fn][vn];Cr.push(Wr),pn.push(y.range(Be)),Ir+=Wr}for(wt&&nn.sort(function($a,Va){return wt(Cr[$a],Cr[Va])}),gt&&pn.forEach(function($a,Va){$a.sort(function(ui,Li){return gt(Ue[Va][ui],Ue[Va][Li])})}),Ir=(Ge-$e*Be)/Ir,Wr=0,fn=-1;++fn<Be;){for(en=Wr,vn=-1;++vn<Be;){var tn=nn[fn],Zn=pn[tn][vn],ha=Ue[tn][Zn],Pa=Wr,pa=Wr+=ha*Ir;ar[tn+"-"+Zn]={index:tn,subindex:Zn,startAngle:Pa,endAngle:pa,value:ha}}Re[tn]={index:tn,startAngle:en,endAngle:Wr,value:Cr[tn]},Wr+=$e}for(fn=-1;++fn<Be;)for(vn=fn-1;++vn<Be;){var Na=ar[fn+"-"+vn],xa=ar[vn+"-"+fn];(Na.value||xa.value)&&Te.push(Na.value<xa.value?{source:xa,target:Na}:{source:Na,target:xa})}It&&nr()}function nr(){Te.sort(function(ar,Cr){return It((ar.source.value+ar.target.value)/2,(Cr.source.value+Cr.target.value)/2)})}return ce.matrix=function(ar){return arguments.length?(Be=(Ue=ar)&&Ue.length,Te=Re=null,ce):Ue},ce.padding=function(ar){return arguments.length?($e=ar,Te=Re=null,ce):$e},ce.sortGroups=function(ar){return arguments.length?(wt=ar,Te=Re=null,ce):wt},ce.sortSubgroups=function(ar){return arguments.length?(gt=ar,Te=null,ce):gt},ce.sortChords=function(ar){return arguments.length?(It=ar,Te&&nr(),ce):It},ce.chords=function(){return Te||qt(),Te},ce.groups=function(){return Re||qt(),Re},ce},y.layout.force=function(){var ce={},Te=y.dispatch("start","tick","end"),Re,Ue=[1,1],Be,$e,wt=.9,gt=zs,It=go,qt=-30,nr=Rl,ar=.1,Cr=.64,nn=[],pn=[],Ir,Wr,en;function fn(tn){return function(Zn,ha,Pa,pa){if(Zn.point!==tn){var Na=Zn.cx-tn.x,xa=Zn.cy-tn.y,$a=pa-ha,Va=Na*Na+xa*xa;if($a*$a/Cr<Va){if(Va<nr){var ui=Zn.charge/Va;tn.px-=Na*ui,tn.py-=xa*ui}return!0}if(Zn.point&&Va&&Va<nr){var ui=Zn.pointCharge/Va;tn.px-=Na*ui,tn.py-=xa*ui}}return!Zn.charge}}ce.tick=function(){if(($e*=.99)<.005)return Re=null,Te.end({type:"end",alpha:$e=0}),!0;var tn=nn.length,Zn=pn.length,ha,Pa,pa,Na,xa,$a,Va,ui,Li;for(Pa=0;Pa<Zn;++Pa)pa=pn[Pa],Na=pa.source,xa=pa.target,ui=xa.x-Na.x,Li=xa.y-Na.y,($a=ui*ui+Li*Li)&&($a=$e*Wr[Pa]*(($a=Math.sqrt($a))-Ir[Pa])/$a,ui*=$a,Li*=$a,xa.x-=ui*(Va=Na.weight+xa.weight?Na.weight/(Na.weight+xa.weight):.5),xa.y-=Li*Va,Na.x+=ui*(Va=1-Va),Na.y+=Li*Va);if((Va=$e*ar)&&(ui=Ue[0]/2,Li=Ue[1]/2,Pa=-1,Va))for(;++Pa<tn;)pa=nn[Pa],pa.x+=(ui-pa.x)*Va,pa.y+=(Li-pa.y)*Va;if(qt)for(As(ha=y.geom.quadtree(nn),$e,en),Pa=-1;++Pa<tn;)(pa=nn[Pa]).fixed||ha.visit(fn(pa));for(Pa=-1;++Pa<tn;)pa=nn[Pa],pa.fixed?(pa.x=pa.px,pa.y=pa.py):(pa.x-=(pa.px-(pa.px=pa.x))*wt,pa.y-=(pa.py-(pa.py=pa.y))*wt);Te.tick({type:"tick",alpha:$e})},ce.nodes=function(tn){return arguments.length?(nn=tn,ce):nn},ce.links=function(tn){return arguments.length?(pn=tn,ce):pn},ce.size=function(tn){return arguments.length?(Ue=tn,ce):Ue},ce.linkDistance=function(tn){return arguments.length?(gt=typeof tn=="function"?tn:+tn,ce):gt},ce.distance=ce.linkDistance,ce.linkStrength=function(tn){return arguments.length?(It=typeof tn=="function"?tn:+tn,ce):It},ce.friction=function(tn){return arguments.length?(wt=+tn,ce):wt},ce.charge=function(tn){return arguments.length?(qt=typeof tn=="function"?tn:+tn,ce):qt},ce.chargeDistance=function(tn){return arguments.length?(nr=tn*tn,ce):Math.sqrt(nr)},ce.gravity=function(tn){return arguments.length?(ar=+tn,ce):ar},ce.theta=function(tn){return arguments.length?(Cr=tn*tn,ce):Math.sqrt(Cr)},ce.alpha=function(tn){return arguments.length?(tn=+tn,$e?tn>0?$e=tn:(Re.c=null,Re.t=NaN,Re=null,Te.end({type:"end",alpha:$e=0})):tn>0&&(Te.start({type:"start",alpha:$e=tn}),Re=yn(ce.tick)),ce):$e},ce.start=function(){var tn,Zn=nn.length,ha=pn.length,Pa=Ue[0],pa=Ue[1],Na,xa;for(tn=0;tn<Zn;++tn)(xa=nn[tn]).index=tn,xa.weight=0;for(tn=0;tn<ha;++tn)xa=pn[tn],typeof xa.source=="number"&&(xa.source=nn[xa.source]),typeof xa.target=="number"&&(xa.target=nn[xa.target]),++xa.source.weight,++xa.target.weight;for(tn=0;tn<Zn;++tn)xa=nn[tn],isNaN(xa.x)&&(xa.x=$a("x",Pa)),isNaN(xa.y)&&(xa.y=$a("y",pa)),isNaN(xa.px)&&(xa.px=xa.x),isNaN(xa.py)&&(xa.py=xa.y);if(Ir=[],typeof gt=="function")for(tn=0;tn<ha;++tn)Ir[tn]=+gt.call(this,pn[tn],tn);else for(tn=0;tn<ha;++tn)Ir[tn]=gt;if(Wr=[],typeof It=="function")for(tn=0;tn<ha;++tn)Wr[tn]=+It.call(this,pn[tn],tn);else for(tn=0;tn<ha;++tn)Wr[tn]=It;if(en=[],typeof qt=="function")for(tn=0;tn<Zn;++tn)en[tn]=+qt.call(this,nn[tn],tn);else for(tn=0;tn<Zn;++tn)en[tn]=qt;function $a(Va,ui){if(!Na){for(Na=new Array(Zn),$i=0;$i<Zn;++$i)Na[$i]=[];for($i=0;$i<ha;++$i){var Li=pn[$i];Na[Li.source.index].push(Li.target),Na[Li.target.index].push(Li.source)}}for(var Po=Na[tn],$i=-1,_a=Po.length,di;++$i<_a;)if(!isNaN(di=Po[$i][Va]))return di;return Math.random()*ui}return ce.resume()},ce.resume=function(){return ce.alpha(.1)},ce.stop=function(){return ce.alpha(0)},ce.drag=function(){if(Be||(Be=y.behavior.drag().origin(D).on("dragstart.force",hu).on("drag.force",vn).on("dragend.force",Ts)),!arguments.length)return Be;this.on("mouseover.force",Io).on("mouseout.force",Dl).call(Be)};function vn(tn){tn.px=y.event.x,tn.py=y.event.y,ce.resume()}return y.rebind(ce,Te,"on")};function hu(ce){ce.fixed|=2}function Ts(ce){ce.fixed&=-7}function Io(ce){ce.fixed|=4,ce.px=ce.x,ce.py=ce.y}function Dl(ce){ce.fixed&=-5}function As(ce,Te,Re){var Ue=0,Be=0;if(ce.charge=0,!ce.leaf)for(var $e=ce.nodes,wt=$e.length,gt=-1,It;++gt<wt;)It=$e[gt],It!=null&&(As(It,Te,Re),ce.charge+=It.charge,Ue+=It.charge*It.cx,Be+=It.charge*It.cy);if(ce.point){ce.leaf||(ce.point.x+=Math.random()-.5,ce.point.y+=Math.random()-.5);var qt=Te*Re[ce.point.index];ce.charge+=ce.pointCharge=qt,Ue+=qt*ce.point.x,Be+=qt*ce.point.y}ce.cx=Ue/ce.charge,ce.cy=Be/ce.charge}var zs=20,go=1,Rl=1/0;y.layout.hierarchy=function(){var ce=Jl,Te=yl,Re=ml;function Ue(Be){var $e=[Be],wt=[],gt;for(Be.depth=0;(gt=$e.pop())!=null;)if(wt.push(gt),(qt=Te.call(Ue,gt,gt.depth))&&(It=qt.length)){for(var It,qt,nr;--It>=0;)$e.push(nr=qt[It]),nr.parent=gt,nr.depth=gt.depth+1;Re&&(gt.value=0),gt.children=qt}else Re&&(gt.value=+Re.call(Ue,gt,gt.depth)||0),delete gt.children;return fs(Be,function(ar){var Cr,nn;ce&&(Cr=ar.children)&&Cr.sort(ce),Re&&(nn=ar.parent)&&(nn.value+=ar.value)}),wt}return Ue.sort=function(Be){return arguments.length?(ce=Be,Ue):ce},Ue.children=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.value=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue.revalue=function(Be){return Re&&(rl(Be,function($e){$e.children&&($e.value=0)}),fs(Be,function($e){var wt;$e.children||($e.value=+Re.call(Ue,$e,$e.depth)||0),(wt=$e.parent)&&(wt.value+=$e.value)})),Be},Ue};function Il(ce,Te){return y.rebind(ce,Te,"sort","children","value"),ce.nodes=ce,ce.links=Fl,ce}function rl(ce,Te){for(var Re=[ce];(ce=Re.pop())!=null;)if(Te(ce),(Be=ce.children)&&(Ue=Be.length))for(var Ue,Be;--Ue>=0;)Re.push(Be[Ue])}function fs(ce,Te){for(var Re=[ce],Ue=[];(ce=Re.pop())!=null;)if(Ue.push(ce),(wt=ce.children)&&($e=wt.length))for(var Be=-1,$e,wt;++Be<$e;)Re.push(wt[Be]);for(;(ce=Ue.pop())!=null;)Te(ce)}function yl(ce){return ce.children}function ml(ce){return ce.value}function Jl(ce,Te){return Te.value-ce.value}function Fl(ce){return y.merge(ce.map(function(Te){return(Te.children||[]).map(function(Re){return{source:Te,target:Re}})}))}y.layout.partition=function(){var ce=y.layout.hierarchy(),Te=[1,1];function Re($e,wt,gt,It){var qt=$e.children;if($e.x=wt,$e.y=$e.depth*It,$e.dx=gt,$e.dy=It,qt&&(ar=qt.length)){var nr=-1,ar,Cr,nn;for(gt=$e.value?gt/$e.value:0;++nr<ar;)Re(Cr=qt[nr],wt,nn=Cr.value*gt,It),wt+=nn}}function Ue($e){var wt=$e.children,gt=0;if(wt&&(qt=wt.length))for(var It=-1,qt;++It<qt;)gt=Math.max(gt,Ue(wt[It]));return 1+gt}function Be($e,wt){var gt=ce.call(this,$e,wt);return Re(gt[0],0,Te[0],Te[1]/Ue(gt[0])),gt}return Be.size=function($e){return arguments.length?(Te=$e,Be):Te},Il(Be,ce)},y.layout.pie=function(){var ce=Number,Te=nl,Re=0,Ue=Ge,Be=0;function $e(wt){var gt=wt.length,It=wt.map(function(fn,vn){return+ce.call($e,fn,vn)}),qt=+(typeof Re=="function"?Re.apply(this,arguments):Re),nr=(typeof Ue=="function"?Ue.apply(this,arguments):Ue)-qt,ar=Math.min(Math.abs(nr)/gt,+(typeof Be=="function"?Be.apply(this,arguments):Be)),Cr=ar*(nr<0?-1:1),nn=y.sum(It),pn=nn?(nr-gt*Cr)/nn:0,Ir=y.range(gt),Wr=[],en;return Te!=null&&Ir.sort(Te===nl?function(fn,vn){return It[vn]-It[fn]}:function(fn,vn){return Te(wt[fn],wt[vn])}),Ir.forEach(function(fn){Wr[fn]={data:wt[fn],value:en=It[fn],startAngle:qt,endAngle:qt+=en*pn+Cr,padAngle:ar}}),Wr}return $e.value=function(wt){return arguments.length?(ce=wt,$e):ce},$e.sort=function(wt){return arguments.length?(Te=wt,$e):Te},$e.startAngle=function(wt){return arguments.length?(Re=wt,$e):Re},$e.endAngle=function(wt){return arguments.length?(Ue=wt,$e):Ue},$e.padAngle=function(wt){return arguments.length?(Be=wt,$e):Be},$e};var nl={};y.layout.stack=function(){var ce=D,Te=zl,Re=al,Ue=Xs,Be=Zu,$e=hs;function wt(gt,It){if(!(pn=gt.length))return gt;var qt=gt.map(function(fn,vn){return ce.call(wt,fn,vn)}),nr=qt.map(function(fn){return fn.map(function(vn,tn){return[Be.call(wt,vn,tn),$e.call(wt,vn,tn)]})}),ar=Te.call(wt,nr,It);qt=y.permute(qt,ar),nr=y.permute(nr,ar);var Cr=Re.call(wt,nr,It),nn=qt[0].length,pn,Ir,Wr,en;for(Wr=0;Wr<nn;++Wr)for(Ue.call(wt,qt[0][Wr],en=Cr[Wr],nr[0][Wr][1]),Ir=1;Ir<pn;++Ir)Ue.call(wt,qt[Ir][Wr],en+=nr[Ir-1][Wr][1],nr[Ir][Wr][1]);return gt}return wt.values=function(gt){return arguments.length?(ce=gt,wt):ce},wt.order=function(gt){return arguments.length?(Te=typeof gt=="function"?gt:vu.get(gt)||zl,wt):Te},wt.offset=function(gt){return arguments.length?(Re=typeof gt=="function"?gt:xl.get(gt)||al,wt):Re},wt.x=function(gt){return arguments.length?(Be=gt,wt):Be},wt.y=function(gt){return arguments.length?($e=gt,wt):$e},wt.out=function(gt){return arguments.length?(Ue=gt,wt):Ue},wt};function Zu(ce){return ce.x}function hs(ce){return ce.y}function Xs(ce,Te,Re){ce.y0=Te,ce.y=Re}var vu=y.map({"inside-out":function(ce){var Te=ce.length,Re,Ue,Be=ce.map(Ol),$e=ce.map(pu),wt=y.range(Te).sort(function(ar,Cr){return Be[ar]-Be[Cr]}),gt=0,It=0,qt=[],nr=[];for(Re=0;Re<Te;++Re)Ue=wt[Re],gt<It?(gt+=$e[Ue],qt.push(Ue)):(It+=$e[Ue],nr.push(Ue));return nr.reverse().concat(qt)},reverse:function(ce){return y.range(ce.length).reverse()},default:zl}),xl=y.map({silhouette:function(ce){var Te=ce.length,Re=ce[0].length,Ue=[],Be=0,$e,wt,gt,It=[];for(wt=0;wt<Re;++wt){for($e=0,gt=0;$e<Te;$e++)gt+=ce[$e][wt][1];gt>Be&&(Be=gt),Ue.push(gt)}for(wt=0;wt<Re;++wt)It[wt]=(Be-Ue[wt])/2;return It},wiggle:function(ce){var Te=ce.length,Re=ce[0],Ue=Re.length,Be,$e,wt,gt,It,qt,nr,ar,Cr,nn=[];for(nn[0]=ar=Cr=0,$e=1;$e<Ue;++$e){for(Be=0,gt=0;Be<Te;++Be)gt+=ce[Be][$e][1];for(Be=0,It=0,nr=Re[$e][0]-Re[$e-1][0];Be<Te;++Be){for(wt=0,qt=(ce[Be][$e][1]-ce[Be][$e-1][1])/(2*nr);wt<Be;++wt)qt+=(ce[wt][$e][1]-ce[wt][$e-1][1])/nr;It+=qt*ce[Be][$e][1]}nn[$e]=ar-=gt?It/gt*nr:0,ar<Cr&&(Cr=ar)}for($e=0;$e<Ue;++$e)nn[$e]-=Cr;return nn},expand:function(ce){var Te=ce.length,Re=ce[0].length,Ue=1/Te,Be,$e,wt,gt=[];for($e=0;$e<Re;++$e){for(Be=0,wt=0;Be<Te;Be++)wt+=ce[Be][$e][1];if(wt)for(Be=0;Be<Te;Be++)ce[Be][$e][1]/=wt;else for(Be=0;Be<Te;Be++)ce[Be][$e][1]=Ue}for($e=0;$e<Re;++$e)gt[$e]=0;return gt},zero:al});function zl(ce){return y.range(ce.length)}function al(ce){for(var Te=-1,Re=ce[0].length,Ue=[];++Te<Re;)Ue[Te]=0;return Ue}function Ol(ce){for(var Te=1,Re=0,Ue=ce[0][1],Be,$e=ce.length;Te<$e;++Te)(Be=ce[Te][1])>Ue&&(Re=Te,Ue=Be);return Re}function pu(ce){return ce.reduce(Lu,0)}function Lu(ce,Te){return ce+Te[1]}y.layout.histogram=function(){var ce=!0,Te=Number,Re=bl,Ue=vc;function Be($e,Cr){for(var gt=[],It=$e.map(Te,this),qt=Re.call(this,It,Cr),nr=Ue.call(this,qt,It,Cr),ar,Cr=-1,nn=It.length,pn=nr.length-1,Ir=ce?1:1/nn,Wr;++Cr<pn;)ar=gt[Cr]=[],ar.dx=nr[Cr+1]-(ar.x=nr[Cr]),ar.y=0;if(pn>0)for(Cr=-1;++Cr<nn;)Wr=It[Cr],Wr>=qt[0]&&Wr<=qt[1]&&(ar=gt[y.bisect(nr,Wr,1,pn)-1],ar.y+=Ir,ar.push($e[Cr]));return gt}return Be.value=function($e){return arguments.length?(Te=$e,Be):Te},Be.range=function($e){return arguments.length?(Re=at($e),Be):Re},Be.bins=function($e){return arguments.length?(Ue=typeof $e=="number"?function(wt){return Bi(wt,$e)}:at($e),Be):Ue},Be.frequency=function($e){return arguments.length?(ce=!!$e,Be):ce},Be};function vc(ce,Te){return Bi(ce,Math.ceil(Math.log(Te.length)/Math.LN2+1))}function Bi(ce,Te){for(var Re=-1,Ue=+ce[0],Be=(ce[1]-Ue)/Te,$e=[];++Re<=Te;)$e[Re]=Be*Re+Ue;return $e}function bl(ce){return[y.min(ce),y.max(ce)]}y.layout.pack=function(){var ce=y.layout.hierarchy().sort(il),Te=0,Re=[1,1],Ue;function Be($e,wt){var gt=ce.call(this,$e,wt),It=gt[0],qt=Re[0],nr=Re[1],ar=Ue==null?Math.sqrt:typeof Ue=="function"?Ue:function(){return Ue};if(It.x=It.y=0,fs(It,function(nn){nn.r=+ar(nn.value)}),fs(It,uo),Te){var Cr=Te*(Ue?1:Math.max(2*It.r/qt,2*It.r/nr))/2;fs(It,function(nn){nn.r+=Cr}),fs(It,uo),fs(It,function(nn){nn.r-=Cr})}return js(It,qt/2,nr/2,Ue?1:1/Math.max(2*It.r/qt,2*It.r/nr)),gt}return Be.size=function($e){return arguments.length?(Re=$e,Be):Re},Be.radius=function($e){return arguments.length?(Ue=$e==null||typeof $e=="function"?$e:+$e,Be):Ue},Be.padding=function($e){return arguments.length?(Te=+$e,Be):Te},Il(Be,ce)};function il(ce,Te){return ce.value-Te.value}function ts(ce,Te){var Re=ce._pack_next;ce._pack_next=Te,Te._pack_prev=ce,Te._pack_next=Re,Re._pack_prev=Te}function vs(ce,Te){ce._pack_next=Te,Te._pack_prev=ce}function Nl(ce,Te){var Re=Te.x-ce.x,Ue=Te.y-ce.y,Be=ce.r+Te.r;return .999*Be*Be>Re*Re+Ue*Ue}function uo(ce){if(!(Te=ce.children)||!(Cr=Te.length))return;var Te,Re=1/0,Ue=-1/0,Be=1/0,$e=-1/0,wt,gt,It,qt,nr,ar,Cr;function nn(tn){Re=Math.min(tn.x-tn.r,Re),Ue=Math.max(tn.x+tn.r,Ue),Be=Math.min(tn.y-tn.r,Be),$e=Math.max(tn.y+tn.r,$e)}if(Te.forEach(Pu),wt=Te[0],wt.x=-wt.r,wt.y=0,nn(wt),Cr>1&&(gt=Te[1],gt.x=gt.r,gt.y=0,nn(gt),Cr>2))for(It=Te[2],Os(wt,gt,It),nn(It),ts(wt,It),wt._pack_prev=It,ts(It,gt),gt=wt._pack_next,qt=3;qt<Cr;qt++){Os(wt,gt,It=Te[qt]);var pn=0,Ir=1,Wr=1;for(nr=gt._pack_next;nr!==gt;nr=nr._pack_next,Ir++)if(Nl(nr,It)){pn=1;break}if(pn==1)for(ar=wt._pack_prev;ar!==nr._pack_prev&&!Nl(ar,It);ar=ar._pack_prev,Wr++);pn?(Ir<Wr||Ir==Wr&&gt.r<wt.r?vs(wt,gt=nr):vs(wt=ar,gt),qt--):(ts(wt,It),gt=It,nn(It))}var en=(Re+Ue)/2,fn=(Be+$e)/2,vn=0;for(qt=0;qt<Cr;qt++)It=Te[qt],It.x-=en,It.y-=fn,vn=Math.max(vn,It.r+Math.sqrt(It.x*It.x+It.y*It.y));ce.r=vn,Te.forEach(Wo)}function Pu(ce){ce._pack_next=ce._pack_prev=ce}function Wo(ce){delete ce._pack_next,delete ce._pack_prev}function js(ce,Te,Re,Ue){var Be=ce.children;if(ce.x=Te+=Ue*ce.x,ce.y=Re+=Ue*ce.y,ce.r*=Ue,Be)for(var $e=-1,wt=Be.length;++$e<wt;)js(Be[$e],Te,Re,Ue)}function Os(ce,Te,Re){var Ue=ce.r+Re.r,Be=Te.x-ce.x,$e=Te.y-ce.y;if(Ue&&(Be||$e)){var wt=Te.r+Re.r,gt=Be*Be+$e*$e;wt*=wt,Ue*=Ue;var It=.5+(Ue-wt)/(2*gt),qt=Math.sqrt(Math.max(0,2*wt*(Ue+gt)-(Ue-=gt)*Ue-wt*wt))/(2*gt);Re.x=ce.x+It*Be+qt*$e,Re.y=ce.y+It*$e-qt*Be}else Re.x=ce.x+Ue,Re.y=ce.y}y.layout.tree=function(){var ce=y.layout.hierarchy().sort(null).value(null),Te=Ms,Re=[1,1],Ue=null;function Be(nr,ar){var Cr=ce.call(this,nr,ar),nn=Cr[0],pn=$e(nn);if(fs(pn,wt),pn.parent.m=-pn.z,rl(pn,gt),Ue)rl(nn,qt);else{var Ir=nn,Wr=nn,en=nn;rl(nn,function(Zn){Zn.x<Ir.x&&(Ir=Zn),Zn.x>Wr.x&&(Wr=Zn),Zn.depth>en.depth&&(en=Zn)});var fn=Te(Ir,Wr)/2-Ir.x,vn=Re[0]/(Wr.x+Te(Wr,Ir)/2+fn),tn=Re[1]/(en.depth||1);rl(nn,function(Zn){Zn.x=(Zn.x+fn)*vn,Zn.y=Zn.depth*tn})}return Cr}function $e(nr){for(var ar={A:null,children:[nr]},Cr=[ar],nn;(nn=Cr.pop())!=null;)for(var pn=nn.children,Ir,Wr=0,en=pn.length;Wr<en;++Wr)Cr.push((pn[Wr]=Ir={_:pn[Wr],parent:nn,children:(Ir=pn[Wr].children)&&Ir.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Wr}).a=Ir);return ar.children[0]}function wt(nr){var ar=nr.children,Cr=nr.parent.children,nn=nr.i?Cr[nr.i-1]:null;if(ar.length){ps(nr);var pn=(ar[0].z+ar[ar.length-1].z)/2;nn?(nr.z=nn.z+Te(nr._,nn._),nr.m=nr.z-pn):nr.z=pn}else nn&&(nr.z=nn.z+Te(nr._,nn._));nr.parent.A=It(nr,nn,nr.parent.A||Cr[0])}function gt(nr){nr._.x=nr.z+nr.parent.m,nr.m+=nr.parent.m}function It(nr,ar,Cr){if(ar){for(var nn=nr,pn=nr,Ir=ar,Wr=nn.parent.children[0],en=nn.m,fn=pn.m,vn=Ir.m,tn=Wr.m,Zn;Ir=Ki(Ir),nn=Vo(nn),Ir&&nn;)Wr=Vo(Wr),pn=Ki(pn),pn.a=nr,Zn=Ir.z+vn-nn.z-en+Te(Ir._,nn._),Zn>0&&(No(Du(Ir,nr,Cr),nr,Zn),en+=Zn,fn+=Zn),vn+=Ir.m,en+=nn.m,tn+=Wr.m,fn+=pn.m;Ir&&!Ki(pn)&&(pn.t=Ir,pn.m+=vn-fn),nn&&!Vo(Wr)&&(Wr.t=nn,Wr.m+=en-tn,Cr=nr)}return Cr}function qt(nr){nr.x*=Re[0],nr.y=nr.depth*Re[1]}return Be.separation=function(nr){return arguments.length?(Te=nr,Be):Te},Be.size=function(nr){return arguments.length?(Ue=(Re=nr)==null?qt:null,Be):Ue?null:Re},Be.nodeSize=function(nr){return arguments.length?(Ue=(Re=nr)==null?null:qt,Be):Ue?Re:null},Il(Be,ce)};function Ms(ce,Te){return ce.parent==Te.parent?1:2}function Vo(ce){var Te=ce.children;return Te.length?Te[0]:ce.t}function Ki(ce){var Te=ce.children,Re;return(Re=Te.length)?Te[Re-1]:ce.t}function No(ce,Te,Re){var Ue=Re/(Te.i-ce.i);Te.c-=Ue,Te.s+=Re,ce.c+=Ue,Te.z+=Re,Te.m+=Re}function ps(ce){for(var Te=0,Re=0,Ue=ce.children,Be=Ue.length,$e;--Be>=0;)$e=Ue[Be],$e.z+=Te,$e.m+=Te,Te+=$e.s+(Re+=$e.c)}function Du(ce,Te,Re){return ce.a.parent===Te.parent?ce.a:Re}y.layout.cluster=function(){var ce=y.layout.hierarchy().sort(null).value(null),Te=Ms,Re=[1,1],Ue=!1;function Be($e,wt){var gt=ce.call(this,$e,wt),It=gt[0],qt,nr=0;fs(It,function(Ir){var Wr=Ir.children;Wr&&Wr.length?(Ir.x=Ru(Wr),Ir.y=$l(Wr)):(Ir.x=qt?nr+=Te(Ir,qt):0,Ir.y=0,qt=Ir)});var ar=bt(It),Cr=Bt(It),nn=ar.x-Te(ar,Cr)/2,pn=Cr.x+Te(Cr,ar)/2;return fs(It,Ue?function(Ir){Ir.x=(Ir.x-It.x)*Re[0],Ir.y=(It.y-Ir.y)*Re[1]}:function(Ir){Ir.x=(Ir.x-nn)/(pn-nn)*Re[0],Ir.y=(1-(It.y?Ir.y/It.y:1))*Re[1]}),gt}return Be.separation=function($e){return arguments.length?(Te=$e,Be):Te},Be.size=function($e){return arguments.length?(Ue=(Re=$e)==null,Be):Ue?null:Re},Be.nodeSize=function($e){return arguments.length?(Ue=(Re=$e)!=null,Be):Ue?Re:null},Il(Be,ce)};function $l(ce){return 1+y.max(ce,function(Te){return Te.y})}function Ru(ce){return ce.reduce(function(Te,Re){return Te+Re.x},0)/ce.length}function bt(ce){var Te=ce.children;return Te&&Te.length?bt(Te[0]):ce}function Bt(ce){var Te=ce.children,Re;return Te&&(Re=Te.length)?Bt(Te[Re-1]):ce}y.layout.treemap=function(){var ce=y.layout.hierarchy(),Te=Math.round,Re=[1,1],Ue=null,Be=dr,$e=!1,wt,gt="squarify",It=.5*(1+Math.sqrt(5));function qt(Ir,Wr){for(var en=-1,fn=Ir.length,vn,tn;++en<fn;)tn=(vn=Ir[en]).value*(Wr<0?0:Wr),vn.area=isNaN(tn)||tn<=0?0:tn}function nr(Ir){var Wr=Ir.children;if(Wr&&Wr.length){var en=Be(Ir),fn=[],vn=Wr.slice(),tn,Zn=1/0,ha,Pa=gt==="slice"?en.dx:gt==="dice"?en.dy:gt==="slice-dice"?Ir.depth&1?en.dy:en.dx:Math.min(en.dx,en.dy),pa;for(qt(vn,en.dx*en.dy/Ir.value),fn.area=0;(pa=vn.length)>0;)fn.push(tn=vn[pa-1]),fn.area+=tn.area,gt!=="squarify"||(ha=Cr(fn,Pa))<=Zn?(vn.pop(),Zn=ha):(fn.area-=fn.pop().area,nn(fn,Pa,en,!1),Pa=Math.min(en.dx,en.dy),fn.length=fn.area=0,Zn=1/0);fn.length&&(nn(fn,Pa,en,!0),fn.length=fn.area=0),Wr.forEach(nr)}}function ar(Ir){var Wr=Ir.children;if(Wr&&Wr.length){var en=Be(Ir),fn=Wr.slice(),vn,tn=[];for(qt(fn,en.dx*en.dy/Ir.value),tn.area=0;vn=fn.pop();)tn.push(vn),tn.area+=vn.area,vn.z!=null&&(nn(tn,vn.z?en.dx:en.dy,en,!fn.length),tn.length=tn.area=0);Wr.forEach(ar)}}function Cr(Ir,Wr){for(var en=Ir.area,fn,vn=0,tn=1/0,Zn=-1,ha=Ir.length;++Zn<ha;)!(fn=Ir[Zn].area)||(fn<tn&&(tn=fn),fn>vn&&(vn=fn));return en*=en,Wr*=Wr,en?Math.max(Wr*vn*It/en,en/(Wr*tn*It)):1/0}function nn(Ir,Wr,en,fn){var vn=-1,tn=Ir.length,Zn=en.x,ha=en.y,Pa=Wr?Te(Ir.area/Wr):0,pa;if(Wr==en.dx){for((fn||Pa>en.dy)&&(Pa=en.dy);++vn<tn;)pa=Ir[vn],pa.x=Zn,pa.y=ha,pa.dy=Pa,Zn+=pa.dx=Math.min(en.x+en.dx-Zn,Pa?Te(pa.area/Pa):0);pa.z=!0,pa.dx+=en.x+en.dx-Zn,en.y+=Pa,en.dy-=Pa}else{for((fn||Pa>en.dx)&&(Pa=en.dx);++vn<tn;)pa=Ir[vn],pa.x=Zn,pa.y=ha,pa.dx=Pa,ha+=pa.dy=Math.min(en.y+en.dy-ha,Pa?Te(pa.area/Pa):0);pa.z=!1,pa.dy+=en.y+en.dy-ha,en.x+=Pa,en.dx-=Pa}}function pn(Ir){var Wr=wt||ce(Ir),en=Wr[0];return en.x=en.y=0,en.value?(en.dx=Re[0],en.dy=Re[1]):en.dx=en.dy=0,wt&&ce.revalue(en),qt([en],en.dx*en.dy/en.value),(wt?ar:nr)(en),$e&&(wt=Wr),Wr}return pn.size=function(Ir){return arguments.length?(Re=Ir,pn):Re},pn.padding=function(Ir){if(!arguments.length)return Ue;function Wr(vn){var tn=Ir.call(pn,vn,vn.depth);return tn==null?dr(vn):cr(vn,typeof tn=="number"?[tn,tn,tn,tn]:tn)}function en(vn){return cr(vn,Ir)}var fn;return Be=(Ue=Ir)==null?dr:(fn=typeof Ir)=="function"?Wr:(fn==="number"&&(Ir=[Ir,Ir,Ir,Ir]),en),pn},pn.round=function(Ir){return arguments.length?(Te=Ir?Math.round:Number,pn):Te!=Number},pn.sticky=function(Ir){return arguments.length?($e=Ir,wt=null,pn):$e},pn.ratio=function(Ir){return arguments.length?(It=Ir,pn):It},pn.mode=function(Ir){return arguments.length?(gt=Ir+"",pn):gt},Il(pn,ce)};function dr(ce){return{x:ce.x,y:ce.y,dx:ce.dx,dy:ce.dy}}function cr(ce,Te){var Re=ce.x+Te[3],Ue=ce.y+Te[0],Be=ce.dx-Te[1]-Te[3],$e=ce.dy-Te[0]-Te[2];return Be<0&&(Re+=Be/2,Be=0),$e<0&&(Ue+=$e/2,$e=0),{x:Re,y:Ue,dx:Be,dy:$e}}y.random={normal:function(ce,Te){var Re=arguments.length;return Re<2&&(Te=1),Re<1&&(ce=0),function(){var Ue,Be,$e;do Ue=Math.random()*2-1,Be=Math.random()*2-1,$e=Ue*Ue+Be*Be;while(!$e||$e>1);return ce+Te*Ue*Math.sqrt(-2*Math.log($e)/$e)}},logNormal:function(){var ce=y.random.normal.apply(y,arguments);return function(){return Math.exp(ce())}},bates:function(ce){var Te=y.random.irwinHall(ce);return function(){return Te()/ce}},irwinHall:function(ce){return function(){for(var Te=0,Re=0;Re<ce;Re++)Te+=Math.random();return Te}}},y.scale={};function Or(ce){var Te=ce[0],Re=ce[ce.length-1];return Te<Re?[Te,Re]:[Re,Te]}function ln(ce){return ce.rangeExtent?ce.rangeExtent():Or(ce.range())}function _n(ce,Te,Re,Ue){var Be=Re(ce[0],ce[1]),$e=Ue(Te[0],Te[1]);return function(wt){return $e(Be(wt))}}function Pn(ce,Te){var Re=0,Ue=ce.length-1,Be=ce[Re],$e=ce[Ue],wt;return $e<Be&&(wt=Re,Re=Ue,Ue=wt,wt=Be,Be=$e,$e=wt),ce[Re]=Te.floor(Be),ce[Ue]=Te.ceil($e),ce}function zn(ce){return ce?{floor:function(Te){return Math.floor(Te/ce)*ce},ceil:function(Te){return Math.ceil(Te/ce)*ce}}:Xn}var Xn={floor:D,ceil:D};function wn(ce,Te,Re,Ue){var Be=[],$e=[],wt=0,gt=Math.min(ce.length,Te.length)-1;for(ce[gt]<ce[0]&&(ce=ce.slice().reverse(),Te=Te.slice().reverse());++wt<=gt;)Be.push(Re(ce[wt-1],ce[wt])),$e.push(Ue(Te[wt-1],Te[wt]));return function(It){var qt=y.bisect(ce,It,1,gt)-1;return $e[qt](Be[qt](It))}}y.scale.linear=function(){return Un([0,1],[0,1],po,!1)};function Un(ce,Te,Re,Ue){var Be,$e;function wt(){var It=Math.min(ce.length,Te.length)>2?wn:_n,qt=Ue?Cu:el;return Be=It(ce,Te,qt,Re),$e=It(Te,ce,qt,po),gt}function gt(It){return Be(It)}return gt.invert=function(It){return $e(It)},gt.domain=function(It){return arguments.length?(ce=It.map(Number),wt()):ce},gt.range=function(It){return arguments.length?(Te=It,wt()):Te},gt.rangeRound=function(It){return gt.range(It).interpolate(Mu)},gt.clamp=function(It){return arguments.length?(Ue=It,wt()):Ue},gt.interpolate=function(It){return arguments.length?(Re=It,wt()):Re},gt.ticks=function(It){return Ga(ce,It)},gt.tickFormat=function(It,qt){return d3_scale_linearTickFormat(ce,It,qt)},gt.nice=function(It){return jn(ce,It),wt()},gt.copy=function(){return Un(ce,Te,Re,Ue)},wt()}function On(ce,Te){return y.rebind(ce,Te,"range","rangeRound","interpolate","clamp")}function jn(ce,Te){return Pn(ce,zn(ia(ce,Te)[2])),Pn(ce,zn(ia(ce,Te)[2])),ce}function ia(ce,Te){Te==null&&(Te=10);var Re=Or(ce),Ue=Re[1]-Re[0],Be=Math.pow(10,Math.floor(Math.log(Ue/Te)/Math.LN10)),$e=Te/Ue*Be;return $e<=.15?Be*=10:$e<=.35?Be*=5:$e<=.75&&(Be*=2),Re[0]=Math.ceil(Re[0]/Be)*Be,Re[1]=Math.floor(Re[1]/Be)*Be+Be*.5,Re[2]=Be,Re}function Ga(ce,Te){return y.range.apply(y,ia(ce,Te))}y.scale.log=function(){return za(y.scale.linear().domain([0,1]),10,!0,[1,10])};function za(ce,Te,Re,Ue){function Be(gt){return(Re?Math.log(gt<0?0:gt):-Math.log(gt>0?0:-gt))/Math.log(Te)}function $e(gt){return Re?Math.pow(Te,gt):-Math.pow(Te,-gt)}function wt(gt){return ce(Be(gt))}return wt.invert=function(gt){return $e(ce.invert(gt))},wt.domain=function(gt){return arguments.length?(Re=gt[0]>=0,ce.domain((Ue=gt.map(Number)).map(Be)),wt):Ue},wt.base=function(gt){return arguments.length?(Te=+gt,ce.domain(Ue.map(Be)),wt):Te},wt.nice=function(){var gt=Pn(Ue.map(Be),Re?Math:Ya);return ce.domain(gt),Ue=gt.map($e),wt},wt.ticks=function(){var gt=Or(Ue),It=[],qt=gt[0],nr=gt[1],ar=Math.floor(Be(qt)),Cr=Math.ceil(Be(nr)),nn=Te%1?2:Te;if(isFinite(Cr-ar)){if(Re){for(;ar<Cr;ar++)for(var pn=1;pn<nn;pn++)It.push($e(ar)*pn);It.push($e(ar))}else for(It.push($e(ar));ar++<Cr;)for(var pn=nn-1;pn>0;pn--)It.push($e(ar)*pn);for(ar=0;It[ar]<qt;ar++);for(Cr=It.length;It[Cr-1]>nr;Cr--);It=It.slice(ar,Cr)}return It},wt.copy=function(){return za(ce.copy(),Te,Re,Ue)},On(wt,ce)}var Ya={floor:function(ce){return-Math.ceil(-ce)},ceil:function(ce){return-Math.floor(-ce)}};y.scale.pow=function(){return ja(y.scale.linear(),1,[0,1])};function ja(ce,Te,Re){var Ue=aa(Te),Be=aa(1/Te);function $e(wt){return ce(Ue(wt))}return $e.invert=function(wt){return Be(ce.invert(wt))},$e.domain=function(wt){return arguments.length?(ce.domain((Re=wt.map(Number)).map(Ue)),$e):Re},$e.ticks=function(wt){return Ga(Re,wt)},$e.tickFormat=function(wt,gt){return d3_scale_linearTickFormat(Re,wt,gt)},$e.nice=function(wt){return $e.domain(jn(Re,wt))},$e.exponent=function(wt){return arguments.length?(Ue=aa(Te=wt),Be=aa(1/Te),ce.domain(Re.map(Ue)),$e):Te},$e.copy=function(){return ja(ce.copy(),Te,Re)},On($e,ce)}function aa(ce){return function(Te){return Te<0?-Math.pow(-Te,ce):Math.pow(Te,ce)}}y.scale.sqrt=function(){return y.scale.pow().exponent(.5)},y.scale.ordinal=function(){return ba([],{t:"range",a:[[]]})};function ba(ce,Te){var Re,Ue,Be;function $e(gt){return Ue[((Re.get(gt)||(Te.t==="range"?Re.set(gt,ce.push(gt)):NaN))-1)%Ue.length]}function wt(gt,It){return y.range(ce.length).map(function(qt){return gt+It*qt})}return $e.domain=function(gt){if(!arguments.length)return ce;ce=[],Re=new M;for(var It=-1,qt=gt.length,nr;++It<qt;)Re.has(nr=gt[It])||Re.set(nr,ce.push(nr));return $e[Te.t].apply($e,Te.a)},$e.range=function(gt){return arguments.length?(Ue=gt,Be=0,Te={t:"range",a:arguments},$e):Ue},$e.rangePoints=function(gt,It){arguments.length<2&&(It=0);var qt=gt[0],nr=gt[1],ar=ce.length<2?(qt=(qt+nr)/2,0):(nr-qt)/(ce.length-1+It);return Ue=wt(qt+ar*It/2,ar),Be=0,Te={t:"rangePoints",a:arguments},$e},$e.rangeRoundPoints=function(gt,It){arguments.length<2&&(It=0);var qt=gt[0],nr=gt[1],ar=ce.length<2?(qt=nr=Math.round((qt+nr)/2),0):(nr-qt)/(ce.length-1+It)|0;return Ue=wt(qt+Math.round(ar*It/2+(nr-qt-(ce.length-1+It)*ar)/2),ar),Be=0,Te={t:"rangeRoundPoints",a:arguments},$e},$e.rangeBands=function(gt,It,qt){arguments.length<2&&(It=0),arguments.length<3&&(qt=It);var nr=gt[1]<gt[0],ar=gt[nr-0],Cr=gt[1-nr],nn=(Cr-ar)/(ce.length-It+2*qt);return Ue=wt(ar+nn*qt,nn),nr&&Ue.reverse(),Be=nn*(1-It),Te={t:"rangeBands",a:arguments},$e},$e.rangeRoundBands=function(gt,It,qt){arguments.length<2&&(It=0),arguments.length<3&&(qt=It);var nr=gt[1]<gt[0],ar=gt[nr-0],Cr=gt[1-nr],nn=Math.floor((Cr-ar)/(ce.length-It+2*qt));return Ue=wt(ar+Math.round((Cr-ar-(ce.length-It)*nn)/2),nn),nr&&Ue.reverse(),Be=Math.round(nn*(1-It)),Te={t:"rangeRoundBands",a:arguments},$e},$e.rangeBand=function(){return Be},$e.rangeExtent=function(){return Or(Te.a[0])},$e.copy=function(){return ba(ce,Te)},$e.domain(ce)}y.scale.category10=function(){return y.scale.ordinal().range(Qa)},y.scale.category20=function(){return y.scale.ordinal().range(si)},y.scale.category20b=function(){return y.scale.ordinal().range(Mi)},y.scale.category20c=function(){return y.scale.ordinal().range(Ei)};var Qa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Pr),si=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Pr),Mi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Pr),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Pr);y.scale.quantile=function(){return wi([],[])};function wi(ce,Te){var Re;function Ue(){var $e=0,wt=Te.length;for(Re=[];++$e<wt;)Re[$e-1]=y.quantile(ce,$e/wt);return Be}function Be($e){if(!isNaN($e=+$e))return Te[y.bisect(Re,$e)]}return Be.domain=function($e){return arguments.length?(ce=$e.map(b).filter(g).sort(o),Ue()):ce},Be.range=function($e){return arguments.length?(Te=$e,Ue()):Te},Be.quantiles=function(){return Re},Be.invertExtent=function($e){return $e=Te.indexOf($e),$e<0?[NaN,NaN]:[$e>0?Re[$e-1]:ce[0],$e<Re.length?Re[$e]:ce[ce.length-1]]},Be.copy=function(){return wi(ce,Te)},Ue()}y.scale.quantize=function(){return Pi(0,1,[0,1])};function Pi(ce,Te,Re){var Ue,Be;function $e(gt){return Re[Math.max(0,Math.min(Be,Math.floor(Ue*(gt-ce))))]}function wt(){return Ue=Re.length/(Te-ce),Be=Re.length-1,$e}return $e.domain=function(gt){return arguments.length?(ce=+gt[0],Te=+gt[gt.length-1],wt()):[ce,Te]},$e.range=function(gt){return arguments.length?(Re=gt,wt()):Re},$e.invertExtent=function(gt){return gt=Re.indexOf(gt),gt=gt<0?NaN:gt/Ue+ce,[gt,gt+1/Ue]},$e.copy=function(){return Pi(ce,Te,Re)},wt()}y.scale.threshold=function(){return hi([.5],[0,1])};function hi(ce,Te){function Re(Ue){if(Ue<=Ue)return Te[y.bisect(ce,Ue)]}return Re.domain=function(Ue){return arguments.length?(ce=Ue,Re):ce},Re.range=function(Ue){return arguments.length?(Te=Ue,Re):Te},Re.invertExtent=function(Ue){return Ue=Te.indexOf(Ue),[ce[Ue-1],ce[Ue]]},Re.copy=function(){return hi(ce,Te)},Re}y.scale.identity=function(){return ko([0,1])};function ko(ce){function Te(Re){return+Re}return Te.invert=Te,Te.domain=Te.range=function(Re){return arguments.length?(ce=Re.map(Te),Te):ce},Te.ticks=function(Re){return Ga(ce,Re)},Te.tickFormat=function(Re,Ue){return d3_scale_linearTickFormat(ce,Re,Ue)},Te.copy=function(){return ko(ce)},Te}y.svg={};function ao(){return 0}y.svg.arc=function(){var ce=Aa,Te=ki,Re=ao,Ue=li,Be=bo,$e=Mo,wt=ds;function gt(){var qt=Math.max(0,+ce.apply(this,arguments)),nr=Math.max(0,+Te.apply(this,arguments)),ar=Be.apply(this,arguments)-qe,Cr=$e.apply(this,arguments)-qe,nn=Math.abs(Cr-ar),pn=ar>Cr?0:1;if(nr<qt&&(Ir=nr,nr=qt,qt=Ir),nn>=Ke)return It(nr,pn)+(qt?It(qt,1-pn):"")+"Z";var Ir,Wr,en,fn,vn=0,tn=0,Zn,ha,Pa,pa,Na,xa,$a,Va,ui=[];if((fn=(+wt.apply(this,arguments)||0)/2)&&(en=Ue===li?Math.sqrt(qt*qt+nr*nr):+Ue.apply(this,arguments),pn||(tn*=-1),nr&&(tn=Gt(en/nr*Math.sin(fn))),qt&&(vn=Gt(en/qt*Math.sin(fn)))),nr){Zn=nr*Math.cos(ar+tn),ha=nr*Math.sin(ar+tn),Pa=nr*Math.cos(Cr-tn),pa=nr*Math.sin(Cr-tn);var Li=Math.abs(Cr-ar-2*tn)<=Ee?0:1;if(tn&&Ns(Zn,ha,Pa,pa)===pn^Li){var Po=(ar+Cr)/2;Zn=nr*Math.cos(Po),ha=nr*Math.sin(Po),Pa=pa=null}}else Zn=ha=0;if(qt){Na=qt*Math.cos(Cr-vn),xa=qt*Math.sin(Cr-vn),$a=qt*Math.cos(ar+vn),Va=qt*Math.sin(ar+vn);var $i=Math.abs(ar-Cr+2*vn)<=Ee?0:1;if(vn&&Ns(Na,xa,$a,Va)===1-pn^$i){var _a=(ar+Cr)/2;Na=qt*Math.cos(_a),xa=qt*Math.sin(_a),$a=Va=null}}else Na=xa=0;if(nn>it&&(Ir=Math.min(Math.abs(nr-qt)/2,+Re.apply(this,arguments)))>.001){Wr=qt<nr^pn?0:1;var di=Ir,ii=Ir;if(nn<Ee){var Ui=$a==null?[Na,xa]:Pa==null?[Zn,ha]:ei([Zn,ha],[$a,Va],[Pa,pa],[Na,xa]),mi=Zn-Ui[0],Eo=ha-Ui[1],yo=Pa-Ui[0],zo=pa-Ui[1],ys=1/Math.sin(Math.acos((mi*yo+Eo*zo)/(Math.sqrt(mi*mi+Eo*Eo)*Math.sqrt(yo*yo+zo*zo)))/2),ns=Math.sqrt(Ui[0]*Ui[0]+Ui[1]*Ui[1]);ii=Math.min(Ir,(qt-ns)/(ys-1)),di=Math.min(Ir,(nr-ns)/(ys+1))}if(Pa!=null){var ms=Co($a==null?[Na,xa]:[$a,Va],[Zn,ha],nr,di,pn),io=Co([Pa,pa],[Na,xa],nr,di,pn);Ir===di?ui.push("M",ms[0],"A",di,",",di," 0 0,",Wr," ",ms[1],"A",nr,",",nr," 0 ",1-pn^Ns(ms[1][0],ms[1][1],io[1][0],io[1][1]),",",pn," ",io[1],"A",di,",",di," 0 0,",Wr," ",io[0]):ui.push("M",ms[0],"A",di,",",di," 0 1,",Wr," ",io[0])}else ui.push("M",Zn,",",ha);if($a!=null){var eo=Co([Zn,ha],[$a,Va],qt,-ii,pn),Za=Co([Na,xa],Pa==null?[Zn,ha]:[Pa,pa],qt,-ii,pn);Ir===ii?ui.push("L",Za[0],"A",ii,",",ii," 0 0,",Wr," ",Za[1],"A",qt,",",qt," 0 ",pn^Ns(Za[1][0],Za[1][1],eo[1][0],eo[1][1]),",",1-pn," ",eo[1],"A",ii,",",ii," 0 0,",Wr," ",eo[0]):ui.push("L",Za[0],"A",ii,",",ii," 0 0,",Wr," ",eo[0])}else ui.push("L",Na,",",xa)}else ui.push("M",Zn,",",ha),Pa!=null&&ui.push("A",nr,",",nr," 0 ",Li,",",pn," ",Pa,",",pa),ui.push("L",Na,",",xa),$a!=null&&ui.push("A",qt,",",qt," 0 ",$i,",",1-pn," ",$a,",",Va);return ui.push("Z"),ui.join("")}function It(qt,nr){return"M0,"+qt+"A"+qt+","+qt+" 0 1,"+nr+" 0,"+-qt+"A"+qt+","+qt+" 0 1,"+nr+" 0,"+qt}return gt.innerRadius=function(qt){return arguments.length?(ce=at(qt),gt):ce},gt.outerRadius=function(qt){return arguments.length?(Te=at(qt),gt):Te},gt.cornerRadius=function(qt){return arguments.length?(Re=at(qt),gt):Re},gt.padRadius=function(qt){return arguments.length?(Ue=qt==li?li:at(qt),gt):Ue},gt.startAngle=function(qt){return arguments.length?(Be=at(qt),gt):Be},gt.endAngle=function(qt){return arguments.length?($e=at(qt),gt):$e},gt.padAngle=function(qt){return arguments.length?(wt=at(qt),gt):wt},gt.centroid=function(){var qt=(+ce.apply(this,arguments)+ +Te.apply(this,arguments))/2,nr=(+Be.apply(this,arguments)+ +$e.apply(this,arguments))/2-qe;return[Math.cos(nr)*qt,Math.sin(nr)*qt]},gt};var li="auto";function Aa(ce){return ce.innerRadius}function ki(ce){return ce.outerRadius}function bo(ce){return ce.startAngle}function Mo(ce){return ce.endAngle}function ds(ce){return ce&&ce.padAngle}function Ns(ce,Te,Re,Ue){return(ce-Re)*Te-(Te-Ue)*ce>0?0:1}function Co(ce,Te,Re,Ue,Be){var $e=ce[0]-Te[0],wt=ce[1]-Te[1],gt=(Be?Ue:-Ue)/Math.sqrt($e*$e+wt*wt),It=gt*wt,qt=-gt*$e,nr=ce[0]+It,ar=ce[1]+qt,Cr=Te[0]+It,nn=Te[1]+qt,pn=(nr+Cr)/2,Ir=(ar+nn)/2,Wr=Cr-nr,en=nn-ar,fn=Wr*Wr+en*en,vn=Re-Ue,tn=nr*nn-Cr*ar,Zn=(en<0?-1:1)*Math.sqrt(Math.max(0,vn*vn*fn-tn*tn)),ha=(tn*en-Wr*Zn)/fn,Pa=(-tn*Wr-en*Zn)/fn,pa=(tn*en+Wr*Zn)/fn,Na=(-tn*Wr+en*Zn)/fn,xa=ha-pn,$a=Pa-Ir,Va=pa-pn,ui=Na-Ir;return xa*xa+$a*$a>Va*Va+ui*ui&&(ha=pa,Pa=Na),[[ha-It,Pa-qt],[ha*Re/vn,Pa*Re/vn]]}function ol(){return!0}function Bs(ce){var Te=Kn,Re=ya,Ue=ol,Be=Lo,$e=Be.key,wt=.7;function gt(It){var qt=[],nr=[],ar=-1,Cr=It.length,nn,pn=at(Te),Ir=at(Re);function Wr(){qt.push("M",Be(ce(nr),wt))}for(;++ar<Cr;)Ue.call(this,nn=It[ar],ar)?nr.push([+pn.call(this,nn,ar),+Ir.call(this,nn,ar)]):nr.length&&(Wr(),nr=[]);return nr.length&&Wr(),qt.length?qt.join(""):null}return gt.x=function(It){return arguments.length?(Te=It,gt):Te},gt.y=function(It){return arguments.length?(Re=It,gt):Re},gt.defined=function(It){return arguments.length?(Ue=It,gt):Ue},gt.interpolate=function(It){return arguments.length?(typeof It=="function"?$e=Be=It:$e=(Be=Fo.get(It)||Lo).key,gt):$e},gt.tension=function(It){return arguments.length?(wt=It,gt):wt},gt}y.svg.line=function(){return Bs(D)};var Fo=y.map({linear:Lo,"linear-closed":Ql,step:du,"step-before":gs,"step-after":Iu,basis:Es,"basis-open":_l,"basis-closed":Fu,bundle:yu,cardinal:Ku,"cardinal-open":ql,"cardinal-closed":Gc,monotone:je});Fo.forEach(function(ce,Te){Te.key=ce,Te.closed=/-closed$/.test(ce)});function Lo(ce){return ce.length>1?ce.join("L"):ce+"Z"}function Ql(ce){return ce.join("L")+"Z"}function du(ce){for(var Te=0,Re=ce.length,Ue=ce[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("H",(Ue[0]+(Ue=ce[Te])[0])/2,"V",Ue[1]);return Re>1&&Be.push("H",Ue[0]),Be.join("")}function gs(ce){for(var Te=0,Re=ce.length,Ue=ce[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("V",(Ue=ce[Te])[1],"H",Ue[0]);return Be.join("")}function Iu(ce){for(var Te=0,Re=ce.length,Ue=ce[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("H",(Ue=ce[Te])[0],"V",Ue[1]);return Be.join("")}function ql(ce,Te){return ce.length<4?Lo(ce):ce[1]+gu(ce.slice(1,-1),Ju(ce,Te))}function Gc(ce,Te){return ce.length<3?Ql(ce):ce[0]+gu((ce.push(ce[0]),ce),Ju([ce[ce.length-2]].concat(ce,[ce[1]]),Te))}function Ku(ce,Te){return ce.length<3?Lo(ce):ce[0]+gu(ce,Ju(ce,Te))}function gu(ce,Te){if(Te.length<1||ce.length!=Te.length&&ce.length!=Te.length+2)return Lo(ce);var Re=ce.length!=Te.length,Ue="",Be=ce[0],$e=ce[1],wt=Te[0],gt=wt,It=1;if(Re&&(Ue+="Q"+($e[0]-wt[0]*2/3)+","+($e[1]-wt[1]*2/3)+","+$e[0]+","+$e[1],Be=ce[1],It=2),Te.length>1){gt=Te[1],$e=ce[It],It++,Ue+="C"+(Be[0]+wt[0])+","+(Be[1]+wt[1])+","+($e[0]-gt[0])+","+($e[1]-gt[1])+","+$e[0]+","+$e[1];for(var qt=2;qt<Te.length;qt++,It++)$e=ce[It],gt=Te[qt],Ue+="S"+($e[0]-gt[0])+","+($e[1]-gt[1])+","+$e[0]+","+$e[1]}if(Re){var nr=ce[It];Ue+="Q"+($e[0]+gt[0]*2/3)+","+($e[1]+gt[1]*2/3)+","+nr[0]+","+nr[1]}return Ue}function Ju(ce,Te){for(var Re=[],Ue=(1-Te)/2,Be,$e=ce[0],wt=ce[1],gt=1,It=ce.length;++gt<It;)Be=$e,$e=wt,wt=ce[gt],Re.push([Ue*(wt[0]-Be[0]),Ue*(wt[1]-Be[1])]);return Re}function Es(ce){if(ce.length<3)return Lo(ce);var Te=1,Re=ce.length,Ue=ce[0],Be=Ue[0],$e=Ue[1],wt=[Be,Be,Be,(Ue=ce[1])[0]],gt=[$e,$e,$e,Ue[1]],It=[Be,",",$e,"L",Xo(rs,wt),",",Xo(rs,gt)];for(ce.push(ce[Re-1]);++Te<=Re;)Ue=ce[Te],wt.shift(),wt.push(Ue[0]),gt.shift(),gt.push(Ue[1]),zu(It,wt,gt);return ce.pop(),It.push("L",Ue),It.join("")}function _l(ce){if(ce.length<4)return Lo(ce);for(var Te=[],Re=-1,Ue=ce.length,Be,$e=[0],wt=[0];++Re<3;)Be=ce[Re],$e.push(Be[0]),wt.push(Be[1]);for(Te.push(Xo(rs,$e)+","+Xo(rs,wt)),--Re;++Re<Ue;)Be=ce[Re],$e.shift(),$e.push(Be[0]),wt.shift(),wt.push(Be[1]),zu(Te,$e,wt);return Te.join("")}function Fu(ce){for(var Te,Re=-1,Ue=ce.length,Be=Ue+4,$e,wt=[],gt=[];++Re<4;)$e=ce[Re%Ue],wt.push($e[0]),gt.push($e[1]);for(Te=[Xo(rs,wt),",",Xo(rs,gt)],--Re;++Re<Be;)$e=ce[Re%Ue],wt.shift(),wt.push($e[0]),gt.shift(),gt.push($e[1]),zu(Te,wt,gt);return Te.join("")}function yu(ce,Te){var Re=ce.length-1;if(Re)for(var Ue=ce[0][0],Be=ce[0][1],$e=ce[Re][0]-Ue,wt=ce[Re][1]-Be,gt=-1,It,qt;++gt<=Re;)It=ce[gt],qt=gt/Re,It[0]=Te*It[0]+(1-Te)*(Ue+qt*$e),It[1]=Te*It[1]+(1-Te)*(Be+qt*wt);return Es(ce)}function Xo(ce,Te){return ce[0]*Te[0]+ce[1]*Te[1]+ce[2]*Te[2]+ce[3]*Te[3]}var $u=[0,2/3,1/3,0],kc=[0,1/3,2/3,0],rs=[0,1/6,2/3,1/6];function zu(ce,Te,Re){ce.push("C",Xo($u,Te),",",Xo($u,Re),",",Xo(kc,Te),",",Xo(kc,Re),",",Xo(rs,Te),",",Xo(rs,Re))}function Ou(ce,Te){return(Te[1]-ce[1])/(Te[0]-ce[0])}function Qu(ce){for(var Te=0,Re=ce.length-1,Ue=[],Be=ce[0],$e=ce[1],wt=Ue[0]=Ou(Be,$e);++Te<Re;)Ue[Te]=(wt+(wt=Ou(Be=$e,$e=ce[Te+1])))/2;return Ue[Te]=wt,Ue}function Oe(ce){for(var Te=[],Re,Ue,Be,$e,wt=Qu(ce),gt=-1,It=ce.length-1;++gt<It;)Re=Ou(ce[gt],ce[gt+1]),l(Re)<it?wt[gt]=wt[gt+1]=0:(Ue=wt[gt]/Re,Be=wt[gt+1]/Re,$e=Ue*Ue+Be*Be,$e>9&&($e=Re*3/Math.sqrt($e),wt[gt]=$e*Ue,wt[gt+1]=$e*Be));for(gt=-1;++gt<=It;)$e=(ce[Math.min(It,gt+1)][0]-ce[Math.max(0,gt-1)][0])/(6*(1+wt[gt]*wt[gt])),Te.push([$e||0,wt[gt]*$e||0]);return Te}function je(ce){return ce.length<3?Lo(ce):ce[0]+gu(ce,Oe(ce))}y.svg.line.radial=function(){var ce=Bs(nt);return ce.radius=ce.x,delete ce.x,ce.angle=ce.y,delete ce.y,ce};function nt(ce){for(var Te,Re=-1,Ue=ce.length,Be,$e;++Re<Ue;)Te=ce[Re],Be=Te[0],$e=Te[1]-qe,Te[0]=Be*Math.cos($e),Te[1]=Be*Math.sin($e);return ce}function ut(ce){var Te=Kn,Re=Kn,Ue=0,Be=ya,$e=ol,wt=Lo,gt=wt.key,It=wt,qt="L",nr=.7;function ar(Cr){var nn=[],pn=[],Ir=[],Wr=-1,en=Cr.length,fn,vn=at(Te),tn=at(Ue),Zn=Te===Re?function(){return Pa}:at(Re),ha=Ue===Be?function(){return pa}:at(Be),Pa,pa;function Na(){nn.push("M",wt(ce(Ir),nr),qt,It(ce(pn.reverse()),nr),"Z")}for(;++Wr<en;)$e.call(this,fn=Cr[Wr],Wr)?(pn.push([Pa=+vn.call(this,fn,Wr),pa=+tn.call(this,fn,Wr)]),Ir.push([+Zn.call(this,fn,Wr),+ha.call(this,fn,Wr)])):pn.length&&(Na(),pn=[],Ir=[]);return pn.length&&Na(),nn.length?nn.join(""):null}return ar.x=function(Cr){return arguments.length?(Te=Re=Cr,ar):Re},ar.x0=function(Cr){return arguments.length?(Te=Cr,ar):Te},ar.x1=function(Cr){return arguments.length?(Re=Cr,ar):Re},ar.y=function(Cr){return arguments.length?(Ue=Be=Cr,ar):Be},ar.y0=function(Cr){return arguments.length?(Ue=Cr,ar):Ue},ar.y1=function(Cr){return arguments.length?(Be=Cr,ar):Be},ar.defined=function(Cr){return arguments.length?($e=Cr,ar):$e},ar.interpolate=function(Cr){return arguments.length?(typeof Cr=="function"?gt=wt=Cr:gt=(wt=Fo.get(Cr)||Lo).key,It=wt.reverse||wt,qt=wt.closed?"M":"L",ar):gt},ar.tension=function(Cr){return arguments.length?(nr=Cr,ar):nr},ar}gs.reverse=Iu,Iu.reverse=gs,y.svg.area=function(){return ut(D)},y.svg.area.radial=function(){var ce=ut(nt);return ce.radius=ce.x,delete ce.x,ce.innerRadius=ce.x0,delete ce.x0,ce.outerRadius=ce.x1,delete ce.x1,ce.angle=ce.y,delete ce.y,ce.startAngle=ce.y0,delete ce.y0,ce.endAngle=ce.y1,delete ce.y1,ce};function Tt(ce){return ce.source}function _t(ce){return ce.target}y.svg.chord=function(){var ce=Tt,Te=_t,Re=kt,Ue=bo,Be=Mo;function $e(nr,ar){var Cr=wt(this,ce,nr,ar),nn=wt(this,Te,nr,ar);return"M"+Cr.p0+It(Cr.r,Cr.p1,Cr.a1-Cr.a0)+(gt(Cr,nn)?qt(Cr.r,Cr.p1,Cr.r,Cr.p0):qt(Cr.r,Cr.p1,nn.r,nn.p0)+It(nn.r,nn.p1,nn.a1-nn.a0)+qt(nn.r,nn.p1,Cr.r,Cr.p0))+"Z"}function wt(nr,ar,Cr,nn){var pn=ar.call(nr,Cr,nn),Ir=Re.call(nr,pn,nn),Wr=Ue.call(nr,pn,nn)-qe,en=Be.call(nr,pn,nn)-qe;return{r:Ir,a0:Wr,a1:en,p0:[Ir*Math.cos(Wr),Ir*Math.sin(Wr)],p1:[Ir*Math.cos(en),Ir*Math.sin(en)]}}function gt(nr,ar){return nr.a0==ar.a0&&nr.a1==ar.a1}function It(nr,ar,Cr){return"A"+nr+","+nr+" 0 "+ +(Cr>Ee)+",1 "+ar}function qt(nr,ar,Cr,nn){return"Q 0,0 "+nn}return $e.radius=function(nr){return arguments.length?(Re=at(nr),$e):Re},$e.source=function(nr){return arguments.length?(ce=at(nr),$e):ce},$e.target=function(nr){return arguments.length?(Te=at(nr),$e):Te},$e.startAngle=function(nr){return arguments.length?(Ue=at(nr),$e):Ue},$e.endAngle=function(nr){return arguments.length?(Be=at(nr),$e):Be},$e};function kt(ce){return ce.radius}y.svg.diagonal=function(){var ce=Tt,Te=_t,Re=vr;function Ue(Be,$e){var wt=ce.call(this,Be,$e),gt=Te.call(this,Be,$e),It=(wt.y+gt.y)/2,qt=[wt,{x:wt.x,y:It},{x:gt.x,y:It},gt];return qt=qt.map(Re),"M"+qt[0]+"C"+qt[1]+" "+qt[2]+" "+qt[3]}return Ue.source=function(Be){return arguments.length?(ce=at(Be),Ue):ce},Ue.target=function(Be){return arguments.length?(Te=at(Be),Ue):Te},Ue.projection=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue};function vr(ce){return[ce.x,ce.y]}y.svg.diagonal.radial=function(){var ce=y.svg.diagonal(),Te=vr,Re=ce.projection;return ce.projection=function(Ue){return arguments.length?Re(yr(Te=Ue)):Te},ce};function yr(ce){return function(){var Te=ce.apply(this,arguments),Re=Te[0],Ue=Te[1]-qe;return[Re*Math.cos(Ue),Re*Math.sin(Ue)]}}y.svg.symbol=function(){var ce=Tr,Te=fr;function Re(Ue,Be){return(Qr.get(ce.call(this,Ue,Be))||zr)(Te.call(this,Ue,Be))}return Re.type=function(Ue){return arguments.length?(ce=at(Ue),Re):ce},Re.size=function(Ue){return arguments.length?(Te=at(Ue),Re):Te},Re};function fr(){return 64}function Tr(){return"circle"}function zr(ce){var Te=Math.sqrt(ce/Ee);return"M0,"+Te+"A"+Te+","+Te+" 0 1,1 0,"+-Te+"A"+Te+","+Te+" 0 1,1 0,"+Te+"Z"}var Qr=y.map({circle:zr,cross:function(ce){var Te=Math.sqrt(ce/5)/2;return"M"+-3*Te+","+-Te+"H"+-Te+"V"+-3*Te+"H"+Te+"V"+-Te+"H"+3*Te+"V"+Te+"H"+Te+"V"+3*Te+"H"+-Te+"V"+Te+"H"+-3*Te+"Z"},diamond:function(ce){var Te=Math.sqrt(ce/(2*En)),Re=Te*En;return"M0,"+-Te+"L"+Re+",0 0,"+Te+" "+-Re+",0Z"},square:function(ce){var Te=Math.sqrt(ce)/2;return"M"+-Te+","+-Te+"L"+Te+","+-Te+" "+Te+","+Te+" "+-Te+","+Te+"Z"},"triangle-down":function(ce){var Te=Math.sqrt(ce/on),Re=Te*on/2;return"M0,"+Re+"L"+Te+","+-Re+" "+-Te+","+-Re+"Z"},"triangle-up":function(ce){var Te=Math.sqrt(ce/on),Re=Te*on/2;return"M0,"+-Re+"L"+Te+","+Re+" "+-Te+","+Re+"Z"}});y.svg.symbolTypes=Qr.keys();var on=Math.sqrt(3),En=Math.tan(30*At);re.transition=function(ce){for(var Te=qa||++ni,Re=et(ce),Ue=[],Be,$e,wt=ai||{time:Date.now(),ease:So,delay:0,duration:250},gt=-1,It=this.length;++gt<It;){Ue.push(Be=[]);for(var qt=this[gt],nr=-1,ar=qt.length;++nr<ar;)($e=qt[nr])&&Jt($e,nr,Re,Te,wt),Be.push($e)}return Ta(Ue,Re,Te)},re.interrupt=function(ce){return this.each(ce==null?Nn:Jn(et(ce)))};var Nn=Jn(et());function Jn(ce){return function(){var Te,Re,Ue;(Te=this[ce])&&(Ue=Te[Re=Te.active])&&(Ue.timer.c=null,Ue.timer.t=NaN,--Te.count?delete Te[Re]:delete this[ce],Te.active+=.5,Ue.event&&Ue.event.interrupt.call(this,this.__data__,Ue.index))}}function Ta(ce,Te,Re){return K(ce,Ea),ce.namespace=Te,ce.id=Re,ce}var Ea=[],ni=0,qa,ai;Ea.call=re.call,Ea.empty=re.empty,Ea.node=re.node,Ea.size=re.size,y.transition=function(ce,Te){return ce&&ce.transition?qa?ce.transition(Te):ce:y.selection().transition(ce)},y.transition.prototype=Ea,Ea.select=function(ce){var Te=this.id,Re=this.namespace,Ue=[],Be,$e,wt;ce=Z(ce);for(var gt=-1,It=this.length;++gt<It;){Ue.push(Be=[]);for(var qt=this[gt],nr=-1,ar=qt.length;++nr<ar;)(wt=qt[nr])&&($e=ce.call(wt,wt.__data__,nr,gt))?("__data__"in wt&&($e.__data__=wt.__data__),Jt($e,nr,Re,Te,wt[Re][Te]),Be.push($e)):Be.push(null)}return Ta(Ue,Re,Te)},Ea.selectAll=function(ce){var Te=this.id,Re=this.namespace,Ue=[],Be,$e,wt,gt,It;ce=Q(ce);for(var qt=-1,nr=this.length;++qt<nr;)for(var ar=this[qt],Cr=-1,nn=ar.length;++Cr<nn;)if(wt=ar[Cr]){It=wt[Re][Te],$e=ce.call(wt,wt.__data__,Cr,qt),Ue.push(Be=[]);for(var pn=-1,Ir=$e.length;++pn<Ir;)(gt=$e[pn])&&Jt(gt,pn,Re,Te,It),Be.push(gt)}return Ta(Ue,Re,Te)},Ea.filter=function(ce){var Te=[],Re,Ue,Be;typeof ce!="function"&&(ce=Ae(ce));for(var $e=0,wt=this.length;$e<wt;$e++){Te.push(Re=[]);for(var Ue=this[$e],gt=0,It=Ue.length;gt<It;gt++)(Be=Ue[gt])&&ce.call(Be,Be.__data__,gt,$e)&&Re.push(Be)}return Ta(Te,this.namespace,this.id)},Ea.tween=function(ce,Te){var Re=this.id,Ue=this.namespace;return arguments.length<2?this.node()[Ue][Re].tween.get(ce):Ze(this,Te==null?function(Be){Be[Ue][Re].tween.remove(ce)}:function(Be){Be[Ue][Re].tween.set(ce,Te)})};function Ti(ce,Te,Re,Ue){var Be=ce.id,$e=ce.namespace;return Ze(ce,typeof Re=="function"?function(wt,gt,It){wt[$e][Be].tween.set(Te,Ue(Re.call(wt,wt.__data__,gt,It)))}:(Re=Ue(Re),function(wt){wt[$e][Be].tween.set(Te,Re)}))}Ea.attr=function(ce,Te){if(arguments.length<2){for(Te in ce)this.attr(Te,ce[Te]);return this}var Re=ce=="transform"?Kl:po,Ue=y.ns.qualify(ce);function Be(){this.removeAttribute(Ue)}function $e(){this.removeAttributeNS(Ue.space,Ue.local)}function wt(It){return It==null?Be:(It+="",function(){var qt=this.getAttribute(Ue),nr;return qt!==It&&(nr=Re(qt,It),function(ar){this.setAttribute(Ue,nr(ar))})})}function gt(It){return It==null?$e:(It+="",function(){var qt=this.getAttributeNS(Ue.space,Ue.local),nr;return qt!==It&&(nr=Re(qt,It),function(ar){this.setAttributeNS(Ue.space,Ue.local,nr(ar))})})}return Ti(this,"attr."+ce,Te,Ue.local?gt:wt)},Ea.attrTween=function(ce,Te){var Re=y.ns.qualify(ce);function Ue($e,wt){var gt=Te.call(this,$e,wt,this.getAttribute(Re));return gt&&function(It){this.setAttribute(Re,gt(It))}}function Be($e,wt){var gt=Te.call(this,$e,wt,this.getAttributeNS(Re.space,Re.local));return gt&&function(It){this.setAttributeNS(Re.space,Re.local,gt(It))}}return this.tween("attr."+ce,Re.local?Be:Ue)},Ea.style=function(ce,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof ce!="string"){Ue<2&&(Te="");for(Re in ce)this.style(Re,ce[Re],Te);return this}Re=""}function Be(){this.style.removeProperty(ce)}function $e(wt){return wt==null?Be:(wt+="",function(){var gt=a(this).getComputedStyle(this,null).getPropertyValue(ce),It;return gt!==wt&&(It=po(gt,wt),function(qt){this.style.setProperty(ce,It(qt),Re)})})}return Ti(this,"style."+ce,Te,$e)},Ea.styleTween=function(ce,Te,Re){arguments.length<3&&(Re="");function Ue(Be,$e){var wt=Te.call(this,Be,$e,a(this).getComputedStyle(this,null).getPropertyValue(ce));return wt&&function(gt){this.style.setProperty(ce,wt(gt),Re)}}return this.tween("style."+ce,Ue)},Ea.text=function(ce){return Ti(this,"text",ce,Yr)};function Yr(ce){return ce==null&&(ce=""),function(){this.textContent=ce}}Ea.remove=function(){var ce=this.namespace;return this.each("end.transition",function(){var Te;this[ce].count<2&&(Te=this.parentNode)&&Te.removeChild(this)})},Ea.ease=function(ce){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].ease:(typeof ce!="function"&&(ce=y.ease.apply(y,arguments)),Ze(this,function(Ue){Ue[Re][Te].ease=ce}))},Ea.delay=function(ce){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].delay:Ze(this,typeof ce=="function"?function(Ue,Be,$e){Ue[Re][Te].delay=+ce.call(Ue,Ue.__data__,Be,$e)}:(ce=+ce,function(Ue){Ue[Re][Te].delay=ce}))},Ea.duration=function(ce){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].duration:Ze(this,typeof ce=="function"?function(Ue,Be,$e){Ue[Re][Te].duration=Math.max(1,ce.call(Ue,Ue.__data__,Be,$e))}:(ce=Math.max(1,ce),function(Ue){Ue[Re][Te].duration=ce}))},Ea.each=function(ce,Te){var Re=this.id,Ue=this.namespace;if(arguments.length<2){var Be=ai,$e=qa;try{qa=Re,Ze(this,function(wt,gt,It){ai=wt[Ue][Re],ce.call(wt,wt.__data__,gt,It)})}finally{ai=Be,qa=$e}}else Ze(this,function(wt){var gt=wt[Ue][Re];(gt.event||(gt.event=y.dispatch("start","end","interrupt"))).on(ce,Te)});return this},Ea.transition=function(){for(var ce=this.id,Te=++ni,Re=this.namespace,Ue=[],Be,$e,wt,gt,It=0,qt=this.length;It<qt;It++){Ue.push(Be=[]);for(var $e=this[It],nr=0,ar=$e.length;nr<ar;nr++)(wt=$e[nr])&&(gt=wt[Re][ce],Jt(wt,nr,Re,Te,{time:gt.time,ease:gt.ease,delay:gt.delay+gt.duration,duration:gt.duration})),Be.push(wt)}return Ta(Ue,Re,Te)};function et(ce){return ce==null?"__transition__":"__transition_"+ce+"__"}function Jt(ce,Te,Re,Ue,Be){var $e=ce[Re]||(ce[Re]={active:0,count:0}),wt=$e[Ue],gt,It,qt,nr,ar;function Cr(Ir){var Wr=wt.delay;if(It.t=Wr+gt,Wr<=Ir)return nn(Ir-Wr);It.c=nn}function nn(Ir){var Wr=$e.active,en=$e[Wr];en&&(en.timer.c=null,en.timer.t=NaN,--$e.count,delete $e[Wr],en.event&&en.event.interrupt.call(ce,ce.__data__,en.index));for(var fn in $e)if(+fn<Ue){var vn=$e[fn];vn.timer.c=null,vn.timer.t=NaN,--$e.count,delete $e[fn]}It.c=pn,yn(function(){return It.c&&pn(Ir||1)&&(It.c=null,It.t=NaN),1},0,gt),$e.active=Ue,wt.event&&wt.event.start.call(ce,ce.__data__,Te),ar=[],wt.tween.forEach(function(tn,Zn){(Zn=Zn.call(ce,ce.__data__,Te))&&ar.push(Zn)}),nr=wt.ease,qt=wt.duration}function pn(Ir){for(var Wr=Ir/qt,en=nr(Wr),fn=ar.length;fn>0;)ar[--fn].call(ce,en);if(Wr>=1)return wt.event&&wt.event.end.call(ce,ce.__data__,Te),--$e.count?delete $e[Ue]:delete ce[Re],1}wt||(gt=Be.time,It=yn(Cr,0,gt),wt=$e[Ue]={tween:new M,time:gt,timer:It,delay:Be.delay,duration:Be.duration,ease:Be.ease,index:Te},Be=null,++$e.count)}y.svg.axis=function(){var ce=y.scale.linear(),Te=Kr,Re=6,Ue=6,Be=3,$e=[10],wt=null,gt;function It(qt){qt.each(function(){var nr=y.select(this),ar=this.__chart__||ce,Cr=this.__chart__=ce.copy(),nn=wt==null?Cr.ticks?Cr.ticks.apply(Cr,$e):Cr.domain():wt,pn=gt==null?Cr.tickFormat?Cr.tickFormat.apply(Cr,$e):D:gt,Ir=nr.selectAll(".tick").data(nn,Cr),Wr=Ir.enter().insert("g",".domain").attr("class","tick").style("opacity",it),en=y.transition(Ir.exit()).style("opacity",it).remove(),fn=y.transition(Ir.order()).style("opacity",1),vn=Math.max(Re,0)+Be,tn,Zn=ln(Cr),ha=nr.selectAll(".domain").data([0]),Pa=(ha.enter().append("path").attr("class","domain"),y.transition(ha));Wr.append("line"),Wr.append("text");var pa=Wr.select("line"),Na=fn.select("line"),xa=Ir.select("text").text(pn),$a=Wr.select("text"),Va=fn.select("text"),ui=Te==="top"||Te==="left"?-1:1,Li,Po,$i,_a;if(Te==="bottom"||Te==="top"?(tn=ta,Li="x",$i="y",Po="x2",_a="y2",xa.attr("dy",ui<0?"0em":".71em").style("text-anchor","middle"),Pa.attr("d","M"+Zn[0]+","+ui*Ue+"V0H"+Zn[1]+"V"+ui*Ue)):(tn=ea,Li="y",$i="x",Po="y2",_a="x2",xa.attr("dy",".32em").style("text-anchor",ui<0?"end":"start"),Pa.attr("d","M"+ui*Ue+","+Zn[0]+"H0V"+Zn[1]+"H"+ui*Ue)),pa.attr(_a,ui*Re),$a.attr($i,ui*vn),Na.attr(Po,0).attr(_a,ui*Re),Va.attr(Li,0).attr($i,ui*vn),Cr.rangeBand){var di=Cr,ii=di.rangeBand()/2;ar=Cr=function(Ui){return di(Ui)+ii}}else ar.rangeBand?ar=Cr:en.call(tn,Cr,ar);Wr.call(tn,ar,Cr),fn.call(tn,Cr,Cr)})}return It.scale=function(qt){return arguments.length?(ce=qt,It):ce},It.orient=function(qt){return arguments.length?(Te=qt in Hn?qt+"":Kr,It):Te},It.ticks=function(){return arguments.length?($e=A(arguments),It):$e},It.tickValues=function(qt){return arguments.length?(wt=qt,It):wt},It.tickFormat=function(qt){return arguments.length?(gt=qt,It):gt},It.tickSize=function(qt){var nr=arguments.length;return nr?(Re=+qt,Ue=+arguments[nr-1],It):Re},It.innerTickSize=function(qt){return arguments.length?(Re=+qt,It):Re},It.outerTickSize=function(qt){return arguments.length?(Ue=+qt,It):Ue},It.tickPadding=function(qt){return arguments.length?(Be=+qt,It):Be},It.tickSubdivide=function(){return arguments.length&&It},It};var Kr="bottom",Hn={top:1,right:1,bottom:1,left:1};function ta(ce,Te,Re){ce.attr("transform",function(Ue){var Be=Te(Ue);return"translate("+(isFinite(Be)?Be:Re(Ue))+",0)"})}function ea(ce,Te,Re){ce.attr("transform",function(Ue){var Be=Te(Ue);return"translate(0,"+(isFinite(Be)?Be:Re(Ue))+")"})}y.svg.brush=function(){var ce=ae(nr,"brushstart","brush","brushend"),Te=null,Re=null,Ue=[0,0],Be=[0,0],$e,wt,gt=!0,It=!0,qt=Di[0];function nr(Ir){Ir.each(function(){var Wr=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",pn).on("touchstart.brush",pn),en=Wr.selectAll(".background").data([0]);en.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Wr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var fn=Wr.selectAll(".resize").data(qt,D);fn.exit().remove(),fn.enter().append("g").attr("class",function(ha){return"resize "+ha}).style("cursor",function(ha){return vi[ha]}).append("rect").attr("x",function(ha){return/[ew]$/.test(ha)?-3:null}).attr("y",function(ha){return/^[ns]/.test(ha)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),fn.style("display",nr.empty()?"none":null);var vn=y.transition(Wr),tn=y.transition(en),Zn;Te&&(Zn=ln(Te),tn.attr("x",Zn[0]).attr("width",Zn[1]-Zn[0]),Cr(vn)),Re&&(Zn=ln(Re),tn.attr("y",Zn[0]).attr("height",Zn[1]-Zn[0]),nn(vn)),ar(vn)})}nr.event=function(Ir){Ir.each(function(){var Wr=ce.of(this,arguments),en={x:Ue,y:Be,i:$e,j:wt},fn=this.__chart__||en;this.__chart__=en,qa?y.select(this).transition().each("start.brush",function(){$e=fn.i,wt=fn.j,Ue=fn.x,Be=fn.y,Wr({type:"brushstart"})}).tween("brush:brush",function(){var vn=no(Ue,en.x),tn=no(Be,en.y);return $e=wt=null,function(Zn){Ue=en.x=vn(Zn),Be=en.y=tn(Zn),Wr({type:"brush",mode:"resize"})}}).each("end.brush",function(){$e=en.i,wt=en.j,Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"})}):(Wr({type:"brushstart"}),Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"}))})};function ar(Ir){Ir.selectAll(".resize").attr("transform",function(Wr){return"translate("+Ue[+/e$/.test(Wr)]+","+Be[+/^s/.test(Wr)]+")"})}function Cr(Ir){Ir.select(".extent").attr("x",Ue[0]),Ir.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function nn(Ir){Ir.select(".extent").attr("y",Be[0]),Ir.selectAll(".extent,.e>rect,.w>rect").attr("height",Be[1]-Be[0])}function pn(){var Ir=this,Wr=y.select(y.event.target),en=ce.of(Ir,arguments),fn=y.select(Ir),vn=Wr.datum(),tn=!/^(n|s)$/.test(vn)&&Te,Zn=!/^(e|w)$/.test(vn)&&Re,ha=Wr.classed("extent"),Pa=jt(Ir),pa,Na=y.mouse(Ir),xa,$a=y.select(a(Ir)).on("keydown.brush",Li).on("keyup.brush",Po);if(y.event.changedTouches?$a.on("touchmove.brush",$i).on("touchend.brush",di):$a.on("mousemove.brush",$i).on("mouseup.brush",di),fn.interrupt().selectAll("*").interrupt(),ha)Na[0]=Ue[0]-Na[0],Na[1]=Be[0]-Na[1];else if(vn){var Va=+/w$/.test(vn),ui=+/^n/.test(vn);xa=[Ue[1-Va]-Na[0],Be[1-ui]-Na[1]],Na[0]=Ue[Va],Na[1]=Be[ui]}else y.event.altKey&&(pa=Na.slice());fn.style("pointer-events","none").selectAll(".resize").style("display",null),y.select("body").style("cursor",Wr.style("cursor")),en({type:"brushstart"}),$i();function Li(){y.event.keyCode==32&&(ha||(pa=null,Na[0]-=Ue[1],Na[1]-=Be[1],ha=2),j())}function Po(){y.event.keyCode==32&&ha==2&&(Na[0]+=Ue[1],Na[1]+=Be[1],ha=0,j())}function $i(){var ii=y.mouse(Ir),Ui=!1;xa&&(ii[0]+=xa[0],ii[1]+=xa[1]),ha||(y.event.altKey?(pa||(pa=[(Ue[0]+Ue[1])/2,(Be[0]+Be[1])/2]),Na[0]=Ue[+(ii[0]<pa[0])],Na[1]=Be[+(ii[1]<pa[1])]):pa=null),tn&&_a(ii,Te,0)&&(Cr(fn),Ui=!0),Zn&&_a(ii,Re,1)&&(nn(fn),Ui=!0),Ui&&(ar(fn),en({type:"brush",mode:ha?"move":"resize"}))}function _a(ii,Ui,mi){var Eo=ln(Ui),yo=Eo[0],zo=Eo[1],ys=Na[mi],ns=mi?Be:Ue,ms=ns[1]-ns[0],io,eo;if(ha&&(yo-=ys,zo-=ms+ys),io=(mi?It:gt)?Math.max(yo,Math.min(zo,ii[mi])):ii[mi],ha?eo=(io+=ys)+ms:(pa&&(ys=Math.max(yo,Math.min(zo,2*pa[mi]-io))),ys<io?(eo=io,io=ys):eo=ys),ns[0]!=io||ns[1]!=eo)return mi?wt=null:$e=null,ns[0]=io,ns[1]=eo,!0}function di(){$i(),fn.style("pointer-events","all").selectAll(".resize").style("display",nr.empty()?"none":null),y.select("body").style("cursor",null),$a.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Pa(),en({type:"brushend"})}}return nr.x=function(Ir){return arguments.length?(Te=Ir,qt=Di[!Te<<1|!Re],nr):Te},nr.y=function(Ir){return arguments.length?(Re=Ir,qt=Di[!Te<<1|!Re],nr):Re},nr.clamp=function(Ir){return arguments.length?(Te&&Re?(gt=!!Ir[0],It=!!Ir[1]):Te?gt=!!Ir:Re&&(It=!!Ir),nr):Te&&Re?[gt,It]:Te?gt:Re?It:null},nr.extent=function(Ir){var Wr,en,fn,vn,tn;return arguments.length?(Te&&(Wr=Ir[0],en=Ir[1],Re&&(Wr=Wr[0],en=en[0]),$e=[Wr,en],Te.invert&&(Wr=Te(Wr),en=Te(en)),en<Wr&&(tn=Wr,Wr=en,en=tn),(Wr!=Ue[0]||en!=Ue[1])&&(Ue=[Wr,en])),Re&&(fn=Ir[0],vn=Ir[1],Te&&(fn=fn[1],vn=vn[1]),wt=[fn,vn],Re.invert&&(fn=Re(fn),vn=Re(vn)),vn<fn&&(tn=fn,fn=vn,vn=tn),(fn!=Be[0]||vn!=Be[1])&&(Be=[fn,vn])),nr):(Te&&($e?(Wr=$e[0],en=$e[1]):(Wr=Ue[0],en=Ue[1],Te.invert&&(Wr=Te.invert(Wr),en=Te.invert(en)),en<Wr&&(tn=Wr,Wr=en,en=tn))),Re&&(wt?(fn=wt[0],vn=wt[1]):(fn=Be[0],vn=Be[1],Re.invert&&(fn=Re.invert(fn),vn=Re.invert(vn)),vn<fn&&(tn=fn,fn=vn,vn=tn))),Te&&Re?[[Wr,fn],[en,vn]]:Te?[Wr,en]:Re&&[fn,vn])},nr.clear=function(){return nr.empty()||(Ue=[0,0],Be=[0,0],$e=wt=null),nr},nr.empty=function(){return!!Te&&Ue[0]==Ue[1]||!!Re&&Be[0]==Be[1]},y.rebind(nr,ce,"on")};var vi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Di=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];y.text=Rt(function(ce){return ce.responseText}),y.json=function(ce,Te){return Kt(ce,"application/json",Ji,Te)};function Ji(ce){return JSON.parse(ce.responseText)}y.html=function(ce,Te){return Kt(ce,"text/html",Ri,Te)};function Ri(ce){var Te=T.createRange();return Te.selectNode(T.body),Te.createContextualFragment(ce.responseText)}y.xml=Rt(function(ce){return ce.responseXML}),typeof N=="object"&&N.exports?N.exports=y:this.d3=y}).apply(self)},{}],59:[function(t,N,V){N.exports=t("./quad")},{"./quad":60}],60:[function(t,N,V){var y=t("binary-search-bounds"),c=t("clamp"),A=t("parse-rect"),T=t("array-bounds"),e=t("pick-by-alias"),a=t("defined"),i=t("flatten-vertex-data"),n=t("is-obj"),r=t("dtype"),v=t("math-log2"),s=1073741824;N.exports=function(g,d){d||(d={}),g=i(g,"float64"),d=e(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var f=a(d.maxDepth,255),m=a(d.bounds,T(g,2));m[0]===m[2]&&m[2]++,m[1]===m[3]&&m[3]++;var l=o(g,m),x=g.length>>>1,u;d.dtype||(d.dtype="array"),typeof d.dtype=="string"?u=new(r(d.dtype))(x):d.dtype&&(u=d.dtype,Array.isArray(u)&&(u.length=x));for(var M=0;M<x;++M)u[M]=M;var w=[],p=[],_=[],h=[];D(0,0,1,u,0,1);for(var L=0,E=0;E<w.length;E++){var S=w[E];if(u.set)u.set(S,L);else for(var P=0,F=S.length;P<F;P++)u[P+L]=S[P];var I=L+w[E].length;h[E]=[L,I],L=I}return u.range=R,u;function D(G,Y,ee,j,X,ae){if(!j.length)return null;var he=w[X]||(w[X]=[]),K=_[X]||(_[X]=[]),J=p[X]||(p[X]=[]),U=he.length;if(X++,X>f||ae>s){for(var H=0;H<j.length;H++)he.push(j[H]),K.push(ae),J.push(null,null,null,null);return U}if(he.push(j[0]),K.push(ae),j.length<=1)return J.push(null,null,null,null),U;for(var q=ee*.5,re=G+q,Z=Y+q,Q=[],ie=[],oe=[],ne=[],le=1,_e=j.length;le<_e;le++){var fe=j[le],ye=l[fe*2],xe=l[fe*2+1];ye<re?xe<Z?Q.push(fe):ie.push(fe):xe<Z?oe.push(fe):ne.push(fe)}return ae<<=2,J.push(D(G,Y,q,Q,X,ae),D(G,Z,q,ie,X,ae+1),D(re,Y,q,oe,X,ae+2),D(re,Z,q,ne,X,ae+3)),U}function R(){for(var G=[],Y=arguments.length;Y--;)G[Y]=arguments[Y];var ee;if(n(G[G.length-1])){var j=G.pop();!G.length&&(j.x!=null||j.l!=null||j.left!=null)&&(G=[j],ee={}),ee=e(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else ee={};G.length||(G=m);var X=A.apply(void 0,G),ae=[Math.min(X.x,X.x+X.width),Math.min(X.y,X.y+X.height),Math.max(X.x,X.x+X.width),Math.max(X.y,X.y+X.height)],he=ae[0],K=ae[1],J=ae[2],U=ae[3],H=o([he,K,J,U],m),q=H[0],re=H[1],Z=H[2],Q=H[3],ie=a(ee.level,w.length);if(ee.d!=null){var oe;typeof ee.d=="number"?oe=[ee.d,ee.d]:ee.d.length&&(oe=ee.d),ie=Math.min(Math.max(Math.ceil(-v(Math.abs(oe[0])/(m[2]-m[0]))),Math.ceil(-v(Math.abs(oe[1])/(m[3]-m[1])))),ie)}if(ie=Math.min(ie,w.length),ee.lod)return O(q,re,Z,Q,ie);var ne=[];le(0,0,1,0,0,1);function le(fe,ye,xe,me,be,ke){if(!(be===null||ke===null)){var De=fe+xe,He=ye+xe;if(!(q>De||re>He||Z<fe||Q<ye)&&!(me>=ie)&&be!==ke){var Ae=w[me];ke===void 0&&(ke=Ae.length);for(var Le=be;Le<ke;Le++){var Ze=Ae[Le],We=g[Ze*2],ze=g[Ze*2+1];We>=he&&We<=J&&ze>=K&&ze<=U&&ne.push(Ze)}var Ie=p[me],Ve=Ie[be*4+0],dt=Ie[be*4+1],Ft=Ie[be*4+2],Qt=Ie[be*4+3],Ot=_e(Ie,be+1),Ct=xe*.5,jt=me+1;le(fe,ye,Ct,jt,Ve,dt||Ft||Qt||Ot),le(fe,ye+Ct,Ct,jt,dt,Ft||Qt||Ot),le(fe+Ct,ye,Ct,jt,Ft,Qt||Ot),le(fe+Ct,ye+Ct,Ct,jt,Qt,Ot)}}}function _e(fe,ye){for(var xe=null,me=0;xe===null;)if(xe=fe[ye*4+me],me++,me>fe.length)return null;return xe}return ne}function O(G,Y,ee,j,X){for(var ae=[],he=0;he<X;he++){var K=_[he],J=h[he][0],U=z(G,Y,he),H=z(ee,j,he),q=y.ge(K,U),re=y.gt(K,H,q,K.length-1);ae[he]=[q+J,re+J]}return ae}function z(G,Y,ee){for(var j=1,X=.5,ae=.5,he=.5,K=0;K<ee;K++)j<<=2,j+=G<X?Y<ae?0:1:Y<ae?2:3,he*=.5,X+=G<X?-he:he,ae+=Y<ae?-he:he;return j}};function o(b,g){for(var d=g[0],f=g[1],m=g[2],l=g[3],x=1/(m-d),u=1/(l-f),M=new Array(b.length),w=0,p=b.length/2;w<p;w++)M[2*w]=c((b[2*w]-d)*x,0,1),M[2*w+1]=c((b[2*w+1]-f)*u,0,1);return M}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var y=t("@turf/meta"),c=6378137;function A(n){return y.geomReduce(n,function(r,v){return r+T(v)},0)}V.default=A;function T(n){var r=0,v;switch(n.type){case"Polygon":return e(n.coordinates);case"MultiPolygon":for(v=0;v<n.coordinates.length;v++)r+=e(n.coordinates[v]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(n){var r=0;if(n&&n.length>0){r+=Math.abs(a(n[0]));for(var v=1;v<n.length;v++)r-=Math.abs(a(n[v]))}return r}function a(n){var r,v,s,o,b,g,d,f=0,m=n.length;if(m>2){for(d=0;d<m;d++)d===m-2?(o=m-2,b=m-1,g=0):d===m-1?(o=m-1,b=0,g=1):(o=d,b=d+1,g=d+2),r=n[o],v=n[b],s=n[g],f+=(i(s[0])-i(r[0]))*Math.sin(i(v[1]));f=f*c*c/2}return f}function i(n){return n*Math.PI/180}},{"@turf/meta":63}],62:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius*1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1.0936133},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function y(E,S,P){P===void 0&&(P={});var F={type:"Feature"};return(P.id===0||P.id)&&(F.id=P.id),P.bbox&&(F.bbox=P.bbox),F.properties=S||{},F.geometry=E,F}V.feature=y;function c(E,S,P){switch(E){case"Point":return A(S).geometry;case"LineString":return i(S).geometry;case"Polygon":return e(S).geometry;case"MultiPoint":return s(S).geometry;case"MultiLineString":return v(S).geometry;case"MultiPolygon":return o(S).geometry;default:throw new Error(E+" is invalid")}}V.geometry=c;function A(E,S,P){if(P===void 0&&(P={}),!E)throw new Error("coordinates is required");if(!Array.isArray(E))throw new Error("coordinates must be an Array");if(E.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(E[0])||!p(E[1]))throw new Error("coordinates must contain numbers");var F={type:"Point",coordinates:E};return y(F,S,P)}V.point=A;function T(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return A(F,S)}),P)}V.points=T;function e(E,S,P){P===void 0&&(P={});for(var F=0,I=E;F<I.length;F++){var D=I[F];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:E};return y(O,S,P)}V.polygon=e;function a(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return e(F,S)}),P)}V.polygons=a;function i(E,S,P){if(P===void 0&&(P={}),E.length<2)throw new Error("coordinates must be an array of two or more positions");var F={type:"LineString",coordinates:E};return y(F,S,P)}V.lineString=i;function n(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return i(F,S)}),P)}V.lineStrings=n;function r(E,S){S===void 0&&(S={});var P={type:"FeatureCollection"};return S.id&&(P.id=S.id),S.bbox&&(P.bbox=S.bbox),P.features=E,P}V.featureCollection=r;function v(E,S,P){P===void 0&&(P={});var F={type:"MultiLineString",coordinates:E};return y(F,S,P)}V.multiLineString=v;function s(E,S,P){P===void 0&&(P={});var F={type:"MultiPoint",coordinates:E};return y(F,S,P)}V.multiPoint=s;function o(E,S,P){P===void 0&&(P={});var F={type:"MultiPolygon",coordinates:E};return y(F,S,P)}V.multiPolygon=o;function b(E,S,P){P===void 0&&(P={});var F={type:"GeometryCollection",geometries:E};return y(F,S,P)}V.geometryCollection=b;function g(E,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,S||0);return Math.round(E*P)/P}V.round=g;function d(E,S){S===void 0&&(S="kilometers");var P=V.factors[S];if(!P)throw new Error(S+" units is invalid");return E*P}V.radiansToLength=d;function f(E,S){S===void 0&&(S="kilometers");var P=V.factors[S];if(!P)throw new Error(S+" units is invalid");return E/P}V.lengthToRadians=f;function m(E,S){return x(f(E,S))}V.lengthToDegrees=m;function l(E){var S=E%360;return S<0&&(S+=360),S}V.bearingToAzimuth=l;function x(E){var S=E%(2*Math.PI);return S*180/Math.PI}V.radiansToDegrees=x;function u(E){var S=E%360;return S*Math.PI/180}V.degreesToRadians=u;function M(E,S,P){if(S===void 0&&(S="kilometers"),P===void 0&&(P="kilometers"),!(E>=0))throw new Error("length must be a positive number");return d(f(E,S),P)}V.convertLength=M;function w(E,S,P){if(S===void 0&&(S="meters"),P===void 0&&(P="kilometers"),!(E>=0))throw new Error("area must be a positive number");var F=V.areaFactors[S];if(!F)throw new Error("invalid original units");var I=V.areaFactors[P];if(!I)throw new Error("invalid final units");return E/F*I}V.convertArea=w;function p(E){return!isNaN(E)&&E!==null&&!Array.isArray(E)}V.isNumber=p;function _(E){return!!E&&E.constructor===Object}V.isObject=_;function h(E){if(!E)throw new Error("bbox is required");if(!Array.isArray(E))throw new Error("bbox must be an Array");if(E.length!==4&&E.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");E.forEach(function(S){if(!p(S))throw new Error("bbox must only contain numbers")})}V.validateBBox=h;function L(E){if(!E)throw new Error("id is required");if(["string","number"].indexOf(typeof E)===-1)throw new Error("id must be a number or a string")}V.validateId=L},{}],63:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var y=t("@turf/helpers");function c(x,u,M){if(x!==null)for(var w,p,_,h,L,E,S,P=0,F=0,I,D=x.type,R=D==="FeatureCollection",O=D==="Feature",z=R?x.features.length:1,G=0;G<z;G++){S=R?x.features[G].geometry:O?x.geometry:x,I=S?S.type==="GeometryCollection":!1,L=I?S.geometries.length:1;for(var Y=0;Y<L;Y++){var ee=0,j=0;if(h=I?S.geometries[Y]:S,h!==null){E=h.coordinates;var X=h.type;switch(P=M&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(u(E,F,G,ee,j)===!1)return!1;F++,ee++;break;case"LineString":case"MultiPoint":for(w=0;w<E.length;w++){if(u(E[w],F,G,ee,j)===!1)return!1;F++,X==="MultiPoint"&&ee++}X==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(w=0;w<E.length;w++){for(p=0;p<E[w].length-P;p++){if(u(E[w][p],F,G,ee,j)===!1)return!1;F++}X==="MultiLineString"&&ee++,X==="Polygon"&&j++}X==="Polygon"&&ee++;break;case"MultiPolygon":for(w=0;w<E.length;w++){for(j=0,p=0;p<E[w].length;p++){for(_=0;_<E[w][p].length-P;_++){if(u(E[w][p][_],F,G,ee,j)===!1)return!1;F++}j++}ee++}break;case"GeometryCollection":for(w=0;w<h.geometries.length;w++)if(c(h.geometries[w],u,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(x,u,M,w){var p=M;return c(x,function(_,h,L,E,S){h===0&&M===void 0?p=_:p=u(p,_,h,L,E,S)},w),p}function T(x,u){var M;switch(x.type){case"FeatureCollection":for(M=0;M<x.features.length&&u(x.features[M].properties,M)!==!1;M++);break;case"Feature":u(x.properties,0);break}}function e(x,u,M){var w=M;return T(x,function(p,_){_===0&&M===void 0?w=p:w=u(w,p,_)}),w}function a(x,u){if(x.type==="Feature")u(x,0);else if(x.type==="FeatureCollection")for(var M=0;M<x.features.length&&u(x.features[M],M)!==!1;M++);}function i(x,u,M){var w=M;return a(x,function(p,_){_===0&&M===void 0?w=p:w=u(w,p,_)}),w}function n(x){var u=[];return c(x,function(M){u.push(M)}),u}function r(x,u){var M,w,p,_,h,L,E,S,P,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",O=D?x.features.length:1;for(M=0;M<O;M++){for(L=D?x.features[M].geometry:R?x.geometry:x,S=D?x.features[M].properties:R?x.properties:{},P=D?x.features[M].bbox:R?x.bbox:void 0,F=D?x.features[M].id:R?x.id:void 0,E=L?L.type==="GeometryCollection":!1,h=E?L.geometries.length:1,p=0;p<h;p++){if(_=E?L.geometries[p]:L,_===null){if(u(null,I,S,P,F)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(_,I,S,P,F)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<_.geometries.length;w++)if(u(_.geometries[w],I,S,P,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function v(x,u,M){var w=M;return r(x,function(p,_,h,L,E){_===0&&M===void 0?w=p:w=u(w,p,_,h,L,E)}),w}function s(x,u){r(x,function(M,w,p,_,h){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return u(y.feature(M,p,{bbox:_,id:h}),w,0)===!1?!1:void 0}var E;switch(L){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon";break}for(var S=0;S<M.coordinates.length;S++){var P=M.coordinates[S],F={type:E,coordinates:P};if(u(y.feature(F,p),w,S)===!1)return!1}})}function o(x,u,M){var w=M;return s(x,function(p,_,h){_===0&&h===0&&M===void 0?w=p:w=u(w,p,_,h)}),w}function b(x,u){s(x,function(M,w,p){var _=0;if(!!M.geometry){var h=M.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,E=0,S=0,P=0;if(c(M,function(F,I,D,R,O){if(L===void 0||w>E||R>S||O>P){L=F,E=w,S=R,P=O,_=0;return}var z=y.lineString([L,F],M.properties);if(u(z,w,p,O,_)===!1)return!1;_++,L=F})===!1)return!1}}})}function g(x,u,M){var w=M,p=!1;return b(x,function(_,h,L,E,S){p===!1&&M===void 0?w=_:w=u(w,_,h,L,E,S),p=!0}),w}function d(x,u){if(!x)throw new Error("geojson is required");s(x,function(M,w,p){if(M.geometry!==null){var _=M.geometry.type,h=M.geometry.coordinates;switch(_){case"LineString":if(u(M,w,p,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(u(y.lineString(h[L],M.properties),w,p,L)===!1)return!1;break}}})}function f(x,u,M){var w=M;return d(x,function(p,_,h,L){_===0&&M===void 0?w=p:w=u(w,p,_,h,L)}),w}function m(x,u){if(u=u||{},!y.isObject(u))throw new Error("options is invalid");var M=u.featureIndex||0,w=u.multiFeatureIndex||0,p=u.geometryIndex||0,_=u.segmentIndex||0,h=u.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=E.length+_-1),y.lineString([E[_],E[_+1]],h,u);case"Polygon":return p<0&&(p=E.length+p),_<0&&(_=E[p].length+_-1),y.lineString([E[p][_],E[p][_+1]],h,u);case"MultiLineString":return w<0&&(w=E.length+w),_<0&&(_=E[w].length+_-1),y.lineString([E[w][_],E[w][_+1]],h,u);case"MultiPolygon":return w<0&&(w=E.length+w),p<0&&(p=E[w].length+p),_<0&&(_=E[w][p].length-_-1),y.lineString([E[w][p][_],E[w][p][_+1]],h,u)}throw new Error("geojson is invalid")}function l(x,u){if(u=u||{},!y.isObject(u))throw new Error("options is invalid");var M=u.featureIndex||0,w=u.multiFeatureIndex||0,p=u.geometryIndex||0,_=u.coordIndex||0,h=u.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":return y.point(E,h,u);case"MultiPoint":return w<0&&(w=E.length+w),y.point(E[w],h,u);case"LineString":return _<0&&(_=E.length+_),y.point(E[_],h,u);case"Polygon":return p<0&&(p=E.length+p),_<0&&(_=E[p].length+_),y.point(E[p][_],h,u);case"MultiLineString":return w<0&&(w=E.length+w),_<0&&(_=E[w].length+_),y.point(E[w][_],h,u);case"MultiPolygon":return w<0&&(w=E.length+w),p<0&&(p=E[w].length+p),_<0&&(_=E[w][p].length-_),y.point(E[w][p][_],h,u)}throw new Error("geojson is invalid")}V.coordEach=c,V.coordReduce=A,V.propEach=T,V.propReduce=e,V.featureEach=a,V.featureReduce=i,V.coordAll=n,V.geomEach=r,V.geomReduce=v,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=b,V.segmentReduce=g,V.lineEach=d,V.lineReduce=f,V.findSegment=m,V.findPoint=l},{"@turf/helpers":62}],64:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var y=t("@turf/meta");function c(A){var T=[1/0,1/0,-1/0,-1/0];return y.coordEach(A,function(e){T[0]>e[0]&&(T[0]=e[0]),T[1]>e[1]&&(T[1]=e[1]),T[2]<e[0]&&(T[2]=e[0]),T[3]<e[1]&&(T[3]=e[1])}),T}c.default=c,V.default=c},{"@turf/meta":66}],65:[function(t,N,V){arguments[4][62][0].apply(V,arguments)},{dup:62}],66:[function(t,N,V){arguments[4][63][0].apply(V,arguments)},{"@turf/helpers":65,dup:63}],67:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var y=t("@turf/meta"),c=t("@turf/helpers");function A(T,e){e===void 0&&(e={});var a=0,i=0,n=0;return y.coordEach(T,function(r){a+=r[0],i+=r[1],n++}),c.point([a/n,i/n],e.properties)}V.default=A},{"@turf/helpers":68,"@turf/meta":69}],68:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius/1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1/1.0936},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function y(O,z,G){G===void 0&&(G={});var Y={type:"Feature"};return(G.id===0||G.id)&&(Y.id=G.id),G.bbox&&(Y.bbox=G.bbox),Y.properties=z||{},Y.geometry=O,Y}V.feature=y;function c(O,z,G){switch(O){case"Point":return A(z).geometry;case"LineString":return i(z).geometry;case"Polygon":return e(z).geometry;case"MultiPoint":return s(z).geometry;case"MultiLineString":return v(z).geometry;case"MultiPolygon":return o(z).geometry;default:throw new Error(O+" is invalid")}}V.geometry=c;function A(O,z,G){G===void 0&&(G={});var Y={type:"Point",coordinates:O};return y(Y,z,G)}V.point=A;function T(O,z,G){return G===void 0&&(G={}),r(O.map(function(Y){return A(Y,z)}),G)}V.points=T;function e(O,z,G){G===void 0&&(G={});for(var Y=0,ee=O;Y<ee.length;Y++){var j=ee[Y];if(j.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<j[j.length-1].length;X++)if(j[j.length-1][X]!==j[0][X])throw new Error("First and last Position are not equivalent.")}var ae={type:"Polygon",coordinates:O};return y(ae,z,G)}V.polygon=e;function a(O,z,G){return G===void 0&&(G={}),r(O.map(function(Y){return e(Y,z)}),G)}V.polygons=a;function i(O,z,G){if(G===void 0&&(G={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var Y={type:"LineString",coordinates:O};return y(Y,z,G)}V.lineString=i;function n(O,z,G){return G===void 0&&(G={}),r(O.map(function(Y){return i(Y,z)}),G)}V.lineStrings=n;function r(O,z){z===void 0&&(z={});var G={type:"FeatureCollection"};return z.id&&(G.id=z.id),z.bbox&&(G.bbox=z.bbox),G.features=O,G}V.featureCollection=r;function v(O,z,G){G===void 0&&(G={});var Y={type:"MultiLineString",coordinates:O};return y(Y,z,G)}V.multiLineString=v;function s(O,z,G){G===void 0&&(G={});var Y={type:"MultiPoint",coordinates:O};return y(Y,z,G)}V.multiPoint=s;function o(O,z,G){G===void 0&&(G={});var Y={type:"MultiPolygon",coordinates:O};return y(Y,z,G)}V.multiPolygon=o;function b(O,z,G){G===void 0&&(G={});var Y={type:"GeometryCollection",geometries:O};return y(Y,z,G)}V.geometryCollection=b;function g(O,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,z||0);return Math.round(O*G)/G}V.round=g;function d(O,z){z===void 0&&(z="kilometers");var G=V.factors[z];if(!G)throw new Error(z+" units is invalid");return O*G}V.radiansToLength=d;function f(O,z){z===void 0&&(z="kilometers");var G=V.factors[z];if(!G)throw new Error(z+" units is invalid");return O/G}V.lengthToRadians=f;function m(O,z){return x(f(O,z))}V.lengthToDegrees=m;function l(O){var z=O%360;return z<0&&(z+=360),z}V.bearingToAzimuth=l;function x(O){var z=O%(2*Math.PI);return z*180/Math.PI}V.radiansToDegrees=x;function u(O){var z=O%360;return z*Math.PI/180}V.degreesToRadians=u;function M(O,z,G){if(z===void 0&&(z="kilometers"),G===void 0&&(G="kilometers"),!(O>=0))throw new Error("length must be a positive number");return d(f(O,z),G)}V.convertLength=M;function w(O,z,G){if(z===void 0&&(z="meters"),G===void 0&&(G="kilometers"),!(O>=0))throw new Error("area must be a positive number");var Y=V.areaFactors[z];if(!Y)throw new Error("invalid original units");var ee=V.areaFactors[G];if(!ee)throw new Error("invalid final units");return O/Y*ee}V.convertArea=w;function p(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}V.isNumber=p;function _(O){return!!O&&O.constructor===Object}V.isObject=_;function h(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(z){if(!p(z))throw new Error("bbox must only contain numbers")})}V.validateBBox=h;function L(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}V.validateId=L;function E(){throw new Error("method has been renamed to `radiansToDegrees`")}V.radians2degrees=E;function S(){throw new Error("method has been renamed to `degreesToRadians`")}V.degrees2radians=S;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}V.distanceToDegrees=P;function F(){throw new Error("method has been renamed to `lengthToRadians`")}V.distanceToRadians=F;function I(){throw new Error("method has been renamed to `radiansToLength`")}V.radiansToDistance=I;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}V.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}V.convertDistance=R},{}],69:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var y=t("@turf/helpers");function c(x,u,M){if(x!==null)for(var w,p,_,h,L,E,S,P=0,F=0,I,D=x.type,R=D==="FeatureCollection",O=D==="Feature",z=R?x.features.length:1,G=0;G<z;G++){S=R?x.features[G].geometry:O?x.geometry:x,I=S?S.type==="GeometryCollection":!1,L=I?S.geometries.length:1;for(var Y=0;Y<L;Y++){var ee=0,j=0;if(h=I?S.geometries[Y]:S,h!==null){E=h.coordinates;var X=h.type;switch(P=M&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(u(E,F,G,ee,j)===!1)return!1;F++,ee++;break;case"LineString":case"MultiPoint":for(w=0;w<E.length;w++){if(u(E[w],F,G,ee,j)===!1)return!1;F++,X==="MultiPoint"&&ee++}X==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(w=0;w<E.length;w++){for(p=0;p<E[w].length-P;p++){if(u(E[w][p],F,G,ee,j)===!1)return!1;F++}X==="MultiLineString"&&ee++,X==="Polygon"&&j++}X==="Polygon"&&ee++;break;case"MultiPolygon":for(w=0;w<E.length;w++){for(j=0,p=0;p<E[w].length;p++){for(_=0;_<E[w][p].length-P;_++){if(u(E[w][p][_],F,G,ee,j)===!1)return!1;F++}j++}ee++}break;case"GeometryCollection":for(w=0;w<h.geometries.length;w++)if(c(h.geometries[w],u,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(x,u,M,w){var p=M;return c(x,function(_,h,L,E,S){h===0&&M===void 0?p=_:p=u(p,_,h,L,E,S)},w),p}function T(x,u){var M;switch(x.type){case"FeatureCollection":for(M=0;M<x.features.length&&u(x.features[M].properties,M)!==!1;M++);break;case"Feature":u(x.properties,0);break}}function e(x,u,M){var w=M;return T(x,function(p,_){_===0&&M===void 0?w=p:w=u(w,p,_)}),w}function a(x,u){if(x.type==="Feature")u(x,0);else if(x.type==="FeatureCollection")for(var M=0;M<x.features.length&&u(x.features[M],M)!==!1;M++);}function i(x,u,M){var w=M;return a(x,function(p,_){_===0&&M===void 0?w=p:w=u(w,p,_)}),w}function n(x){var u=[];return c(x,function(M){u.push(M)}),u}function r(x,u){var M,w,p,_,h,L,E,S,P,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",O=D?x.features.length:1;for(M=0;M<O;M++){for(L=D?x.features[M].geometry:R?x.geometry:x,S=D?x.features[M].properties:R?x.properties:{},P=D?x.features[M].bbox:R?x.bbox:void 0,F=D?x.features[M].id:R?x.id:void 0,E=L?L.type==="GeometryCollection":!1,h=E?L.geometries.length:1,p=0;p<h;p++){if(_=E?L.geometries[p]:L,_===null){if(u(null,I,S,P,F)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(_,I,S,P,F)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<_.geometries.length;w++)if(u(_.geometries[w],I,S,P,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function v(x,u,M){var w=M;return r(x,function(p,_,h,L,E){_===0&&M===void 0?w=p:w=u(w,p,_,h,L,E)}),w}function s(x,u){r(x,function(M,w,p,_,h){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return u(y.feature(M,p,{bbox:_,id:h}),w,0)===!1?!1:void 0}var E;switch(L){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon";break}for(var S=0;S<M.coordinates.length;S++){var P=M.coordinates[S],F={type:E,coordinates:P};if(u(y.feature(F,p),w,S)===!1)return!1}})}function o(x,u,M){var w=M;return s(x,function(p,_,h){_===0&&h===0&&M===void 0?w=p:w=u(w,p,_,h)}),w}function b(x,u){s(x,function(M,w,p){var _=0;if(!!M.geometry){var h=M.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,E=0,S=0,P=0;if(c(M,function(F,I,D,R,O){if(L===void 0||w>E||R>S||O>P){L=F,E=w,S=R,P=O,_=0;return}var z=y.lineString([L,F],M.properties);if(u(z,w,p,O,_)===!1)return!1;_++,L=F})===!1)return!1}}})}function g(x,u,M){var w=M,p=!1;return b(x,function(_,h,L,E,S){p===!1&&M===void 0?w=_:w=u(w,_,h,L,E,S),p=!0}),w}function d(x,u){if(!x)throw new Error("geojson is required");s(x,function(M,w,p){if(M.geometry!==null){var _=M.geometry.type,h=M.geometry.coordinates;switch(_){case"LineString":if(u(M,w,p,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(u(y.lineString(h[L],M.properties),w,p,L)===!1)return!1;break}}})}function f(x,u,M){var w=M;return d(x,function(p,_,h,L){_===0&&M===void 0?w=p:w=u(w,p,_,h,L)}),w}function m(x,u){if(u=u||{},!y.isObject(u))throw new Error("options is invalid");var M=u.featureIndex||0,w=u.multiFeatureIndex||0,p=u.geometryIndex||0,_=u.segmentIndex||0,h=u.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=E.length+_-1),y.lineString([E[_],E[_+1]],h,u);case"Polygon":return p<0&&(p=E.length+p),_<0&&(_=E[p].length+_-1),y.lineString([E[p][_],E[p][_+1]],h,u);case"MultiLineString":return w<0&&(w=E.length+w),_<0&&(_=E[w].length+_-1),y.lineString([E[w][_],E[w][_+1]],h,u);case"MultiPolygon":return w<0&&(w=E.length+w),p<0&&(p=E[w].length+p),_<0&&(_=E[w][p].length-_-1),y.lineString([E[w][p][_],E[w][p][_+1]],h,u)}throw new Error("geojson is invalid")}function l(x,u){if(u=u||{},!y.isObject(u))throw new Error("options is invalid");var M=u.featureIndex||0,w=u.multiFeatureIndex||0,p=u.geometryIndex||0,_=u.coordIndex||0,h=u.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":return y.point(E,h,u);case"MultiPoint":return w<0&&(w=E.length+w),y.point(E[w],h,u);case"LineString":return _<0&&(_=E.length+_),y.point(E[_],h,u);case"Polygon":return p<0&&(p=E.length+p),_<0&&(_=E[p].length+_),y.point(E[p][_],h,u);case"MultiLineString":return w<0&&(w=E.length+w),_<0&&(_=E[w].length+_),y.point(E[w][_],h,u);case"MultiPolygon":return w<0&&(w=E.length+w),p<0&&(p=E[w].length+p),_<0&&(_=E[w][p].length-_),y.point(E[w][p][_],h,u)}throw new Error("geojson is invalid")}V.coordEach=c,V.coordReduce=A,V.propEach=T,V.propReduce=e,V.featureEach=a,V.featureReduce=i,V.coordAll=n,V.geomEach=r,V.geomReduce=v,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=b,V.segmentReduce=g,V.lineEach=d,V.lineReduce=f,V.findSegment=m,V.findPoint=l},{"@turf/helpers":68}],70:[function(t,N,V){N.exports=y;function y(c){var A=0,T=0,e=0,a=0;return c.map(function(i){i=i.slice();var n=i[0],r=n.toUpperCase();if(n!=r)switch(i[0]=r,n){case"a":i[6]+=e,i[7]+=a;break;case"v":i[1]+=a;break;case"h":i[1]+=e;break;default:for(var v=1;v<i.length;)i[v++]+=e,i[v++]+=a}switch(r){case"Z":e=A,a=T;break;case"H":e=i[1];break;case"V":a=i[1];break;case"M":e=A=i[1],a=T=i[2];break;default:e=i[i.length-2],a=i[i.length-1]}return i})}},{}],71:[function(t,N,V){N.exports=y;function y(c,A){if(!c||c.length==null)throw Error("Argument should be an array");A==null?A=1:A=Math.floor(A);for(var T=Array(A*2),e=0;e<A;e++){for(var a=-1/0,i=1/0,n=e,r=c.length;n<r;n+=A)c[n]>a&&(a=c[n]),c[n]<i&&(i=c[n]);T[e]=i,T[A+e]=a}return T}},{}],72:[function(t,N,V){N.exports=function(y,c,A){if(typeof Array.prototype.findIndex=="function")return y.findIndex(c,A);if(typeof c!="function")throw new TypeError("predicate must be a function");var T=Object(y),e=T.length;if(e===0)return-1;for(var a=0;a<e;a++)if(c.call(A,T[a],a,T))return a;return-1}},{}],73:[function(t,N,V){var y=t("array-bounds");N.exports=c;function c(A,T,e){if(!A||A.length==null)throw Error("Argument should be an array");T==null&&(T=1),e==null&&(e=y(A,T));for(var a=0;a<T;a++){var i=e[T+a],n=e[a],r=a,v=A.length;if(i===1/0&&n===-1/0)for(r=a;r<v;r+=T)A[r]=A[r]===i?1:A[r]===n?0:.5;else if(i===1/0)for(r=a;r<v;r+=T)A[r]=A[r]===i?1:0;else if(n===-1/0)for(r=a;r<v;r+=T)A[r]=A[r]===n?0:1;else{var s=i-n;for(r=a;r<v;r+=T)isNaN(A[r])||(A[r]=s===0?.5:(A[r]-n)/s)}}return A}},{"array-bounds":71}],74:[function(t,N,V){N.exports=function(c,A){var T=typeof c=="number",e=typeof A=="number";T&&!e?(A=c,c=0):!T&&!e&&(c=0,A=0),c=c|0,A=A|0;var a=A-c;if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),n=0,r=c;n<a;n++,r++)i[n]=r;return i}},{}],75:[function(t,N,V){(function(y){(function(){var c=t("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function A(S,P){if(S===P)return 0;for(var F=S.length,I=P.length,D=0,R=Math.min(F,I);D<R;++D)if(S[D]!==P[D]){F=S[D],I=P[D];break}return F<I?-1:I<F?1:0}function T(S){return y.Buffer&&typeof y.Buffer.isBuffer=="function"?y.Buffer.isBuffer(S):!!(S!=null&&S._isBuffer)}var e=t("util/"),a=Object.prototype.hasOwnProperty,i=Array.prototype.slice,n=function(){return function(){}.name==="foo"}();function r(S){return Object.prototype.toString.call(S)}function v(S){return T(S)||typeof y.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(S):S?!!(S instanceof DataView||S.buffer&&S.buffer instanceof ArrayBuffer):!1}var s=N.exports=l,o=/\s*function\s+([^\(\s]*)\s*/;function b(S){if(!!e.isFunction(S)){if(n)return S.name;var P=S.toString(),F=P.match(o);return F&&F[1]}}s.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var F=P.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var I=new Error;if(I.stack){var D=I.stack,R=b(F),O=D.indexOf(`
`+R);if(O>=0){var z=D.indexOf(`
`,O+1);D=D.substring(z+1)}this.stack=D}}},e.inherits(s.AssertionError,Error);function g(S,P){return typeof S=="string"?S.length<P?S:S.slice(0,P):S}function d(S){if(n||!e.isFunction(S))return e.inspect(S);var P=b(S),F=P?": "+P:"";return"[Function"+F+"]"}function f(S){return g(d(S.actual),128)+" "+S.operator+" "+g(d(S.expected),128)}function m(S,P,F,I,D){throw new s.AssertionError({message:F,actual:S,expected:P,operator:I,stackStartFunction:D})}s.fail=m;function l(S,P){S||m(S,!0,P,"==",s.ok)}s.ok=l,s.equal=function(P,F,I){P!=F&&m(P,F,I,"==",s.equal)},s.notEqual=function(P,F,I){P==F&&m(P,F,I,"!=",s.notEqual)},s.deepEqual=function(P,F,I){x(P,F,!1)||m(P,F,I,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(P,F,I){x(P,F,!0)||m(P,F,I,"deepStrictEqual",s.deepStrictEqual)};function x(S,P,F,I){if(S===P)return!0;if(T(S)&&T(P))return A(S,P)===0;if(e.isDate(S)&&e.isDate(P))return S.getTime()===P.getTime();if(e.isRegExp(S)&&e.isRegExp(P))return S.source===P.source&&S.global===P.global&&S.multiline===P.multiline&&S.lastIndex===P.lastIndex&&S.ignoreCase===P.ignoreCase;if((S===null||typeof S!="object")&&(P===null||typeof P!="object"))return F?S===P:S==P;if(v(S)&&v(P)&&r(S)===r(P)&&!(S instanceof Float32Array||S instanceof Float64Array))return A(new Uint8Array(S.buffer),new Uint8Array(P.buffer))===0;if(T(S)!==T(P))return!1;I=I||{actual:[],expected:[]};var D=I.actual.indexOf(S);return D!==-1&&D===I.expected.indexOf(P)?!0:(I.actual.push(S),I.expected.push(P),M(S,P,F,I))}function u(S){return Object.prototype.toString.call(S)=="[object Arguments]"}function M(S,P,F,I){if(S==null||P===null||P===void 0)return!1;if(e.isPrimitive(S)||e.isPrimitive(P))return S===P;if(F&&Object.getPrototypeOf(S)!==Object.getPrototypeOf(P))return!1;var D=u(S),R=u(P);if(D&&!R||!D&&R)return!1;if(D)return S=i.call(S),P=i.call(P),x(S,P,F);var O=E(S),z=E(P),G,Y;if(O.length!==z.length)return!1;for(O.sort(),z.sort(),Y=O.length-1;Y>=0;Y--)if(O[Y]!==z[Y])return!1;for(Y=O.length-1;Y>=0;Y--)if(G=O[Y],!x(S[G],P[G],F,I))return!1;return!0}s.notDeepEqual=function(P,F,I){x(P,F,!1)&&m(P,F,I,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=w;function w(S,P,F){x(S,P,!0)&&m(S,P,F,"notDeepStrictEqual",w)}s.strictEqual=function(P,F,I){P!==F&&m(P,F,I,"===",s.strictEqual)},s.notStrictEqual=function(P,F,I){P===F&&m(P,F,I,"!==",s.notStrictEqual)};function p(S,P){if(!S||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(S);try{if(S instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},S)===!0}function _(S){var P;try{S()}catch(F){P=F}return P}function h(S,P,F,I){var D;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof F=="string"&&(I=F,F=null),D=_(P),I=(F&&F.name?" ("+F.name+").":".")+(I?" "+I:"."),S&&!D&&m(D,F,"Missing expected exception"+I);var R=typeof I=="string",O=!S&&e.isError(D),z=!S&&D&&!F;if((O&&R&&p(D,F)||z)&&m(D,F,"Got unwanted exception"+I),S&&D&&F&&!p(D,F)||!S&&D)throw D}s.throws=function(S,P,F){h(!0,S,P,F)},s.doesNotThrow=function(S,P,F){h(!1,S,P,F)},s.ifError=function(S){if(S)throw S};function L(S,P){S||m(S,!0,P,"==",L)}s.strict=c(L,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var E=Object.keys||function(S){var P=[];for(var F in S)a.call(S,F)&&P.push(F);return P}}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(t,N,V){typeof Object.create=="function"?N.exports=function(c,A){c.super_=A,c.prototype=Object.create(A.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:N.exports=function(c,A){c.super_=A;var T=function(){};T.prototype=A.prototype,c.prototype=new T,c.prototype.constructor=c}},{}],77:[function(t,N,V){N.exports=function(c){return c&&typeof c=="object"&&typeof c.copy=="function"&&typeof c.fill=="function"&&typeof c.readUInt8=="function"}},{}],78:[function(t,N,V){(function(y,c){(function(){var A=/%[sdj%]/g;V.format=function(z){if(!M(z)){for(var G=[],Y=0;Y<arguments.length;Y++)G.push(a(arguments[Y]));return G.join(" ")}for(var Y=1,ee=arguments,j=ee.length,X=String(z).replace(A,function(he){if(he==="%%")return"%";if(Y>=j)return he;switch(he){case"%s":return String(ee[Y++]);case"%d":return Number(ee[Y++]);case"%j":try{return JSON.stringify(ee[Y++])}catch{return"[Circular]"}default:return he}}),ae=ee[Y];Y<j;ae=ee[++Y])l(ae)||!h(ae)?X+=" "+ae:X+=" "+a(ae);return X},V.deprecate=function(z,G){if(p(c.process))return function(){return V.deprecate(z,G).apply(this,arguments)};if(y.noDeprecation===!0)return z;var Y=!1;function ee(){if(!Y){if(y.throwDeprecation)throw new Error(G);y.traceDeprecation?console.trace(G):console.error(G),Y=!0}return z.apply(this,arguments)}return ee};var T={},e;V.debuglog=function(z){if(p(e)&&(e=y.env.NODE_DEBUG||""),z=z.toUpperCase(),!T[z])if(new RegExp("\\b"+z+"\\b","i").test(e)){var G=y.pid;T[z]=function(){var Y=V.format.apply(V,arguments);console.error("%s %d: %s",z,G,Y)}}else T[z]=function(){};return T[z]};function a(z,G){var Y={seen:[],stylize:n};return arguments.length>=3&&(Y.depth=arguments[2]),arguments.length>=4&&(Y.colors=arguments[3]),m(G)?Y.showHidden=G:G&&V._extend(Y,G),p(Y.showHidden)&&(Y.showHidden=!1),p(Y.depth)&&(Y.depth=2),p(Y.colors)&&(Y.colors=!1),p(Y.customInspect)&&(Y.customInspect=!0),Y.colors&&(Y.stylize=i),v(Y,z,Y.depth)}V.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i(z,G){var Y=a.styles[G];return Y?"\x1B["+a.colors[Y][0]+"m"+z+"\x1B["+a.colors[Y][1]+"m":z}function n(z,G){return z}function r(z){var G={};return z.forEach(function(Y,ee){G[Y]=!0}),G}function v(z,G,Y){if(z.customInspect&&G&&S(G.inspect)&&G.inspect!==V.inspect&&!(G.constructor&&G.constructor.prototype===G)){var ee=G.inspect(Y,z);return M(ee)||(ee=v(z,ee,Y)),ee}var j=s(z,G);if(j)return j;var X=Object.keys(G),ae=r(X);if(z.showHidden&&(X=Object.getOwnPropertyNames(G)),E(G)&&(X.indexOf("message")>=0||X.indexOf("description")>=0))return o(G);if(X.length===0){if(S(G)){var he=G.name?": "+G.name:"";return z.stylize("[Function"+he+"]","special")}if(_(G))return z.stylize(RegExp.prototype.toString.call(G),"regexp");if(L(G))return z.stylize(Date.prototype.toString.call(G),"date");if(E(G))return o(G)}var K="",J=!1,U=["{","}"];if(f(G)&&(J=!0,U=["[","]"]),S(G)){var H=G.name?": "+G.name:"";K=" [Function"+H+"]"}if(_(G)&&(K=" "+RegExp.prototype.toString.call(G)),L(G)&&(K=" "+Date.prototype.toUTCString.call(G)),E(G)&&(K=" "+o(G)),X.length===0&&(!J||G.length==0))return U[0]+K+U[1];if(Y<0)return _(G)?z.stylize(RegExp.prototype.toString.call(G),"regexp"):z.stylize("[Object]","special");z.seen.push(G);var q;return J?q=b(z,G,Y,ae,X):q=X.map(function(re){return g(z,G,Y,ae,re,J)}),z.seen.pop(),d(q,K,U)}function s(z,G){if(p(G))return z.stylize("undefined","undefined");if(M(G)){var Y="'"+JSON.stringify(G).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(Y,"string")}if(u(G))return z.stylize(""+G,"number");if(m(G))return z.stylize(""+G,"boolean");if(l(G))return z.stylize("null","null")}function o(z){return"["+Error.prototype.toString.call(z)+"]"}function b(z,G,Y,ee,j){for(var X=[],ae=0,he=G.length;ae<he;++ae)O(G,String(ae))?X.push(g(z,G,Y,ee,String(ae),!0)):X.push("");return j.forEach(function(K){K.match(/^\d+$/)||X.push(g(z,G,Y,ee,K,!0))}),X}function g(z,G,Y,ee,j,X){var ae,he,K;if(K=Object.getOwnPropertyDescriptor(G,j)||{value:G[j]},K.get?K.set?he=z.stylize("[Getter/Setter]","special"):he=z.stylize("[Getter]","special"):K.set&&(he=z.stylize("[Setter]","special")),O(ee,j)||(ae="["+j+"]"),he||(z.seen.indexOf(K.value)<0?(l(Y)?he=v(z,K.value,null):he=v(z,K.value,Y-1),he.indexOf(`
`)>-1&&(X?he=he.split(`
`).map(function(J){return"  "+J}).join(`
`).substr(2):he=`
`+he.split(`
`).map(function(J){return"   "+J}).join(`
`))):he=z.stylize("[Circular]","special")),p(ae)){if(X&&j.match(/^\d+$/))return he;ae=JSON.stringify(""+j),ae.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ae=ae.substr(1,ae.length-2),ae=z.stylize(ae,"name")):(ae=ae.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ae=z.stylize(ae,"string"))}return ae+": "+he}function d(z,G,Y){var ee=z.reduce(function(j,X){return X.indexOf(`
`)>=0,j+X.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ee>60?Y[0]+(G===""?"":G+`
 `)+" "+z.join(`,
  `)+" "+Y[1]:Y[0]+G+" "+z.join(", ")+" "+Y[1]}function f(z){return Array.isArray(z)}V.isArray=f;function m(z){return typeof z=="boolean"}V.isBoolean=m;function l(z){return z===null}V.isNull=l;function x(z){return z==null}V.isNullOrUndefined=x;function u(z){return typeof z=="number"}V.isNumber=u;function M(z){return typeof z=="string"}V.isString=M;function w(z){return typeof z=="symbol"}V.isSymbol=w;function p(z){return z===void 0}V.isUndefined=p;function _(z){return h(z)&&F(z)==="[object RegExp]"}V.isRegExp=_;function h(z){return typeof z=="object"&&z!==null}V.isObject=h;function L(z){return h(z)&&F(z)==="[object Date]"}V.isDate=L;function E(z){return h(z)&&(F(z)==="[object Error]"||z instanceof Error)}V.isError=E;function S(z){return typeof z=="function"}V.isFunction=S;function P(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}V.isPrimitive=P,V.isBuffer=t("./support/isBuffer");function F(z){return Object.prototype.toString.call(z)}function I(z){return z<10?"0"+z.toString(10):z.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var z=new Date,G=[I(z.getHours()),I(z.getMinutes()),I(z.getSeconds())].join(":");return[z.getDate(),D[z.getMonth()],G].join(" ")}V.log=function(){console.log("%s - %s",R(),V.format.apply(V,arguments))},V.inherits=t("inherits"),V._extend=function(z,G){if(!G||!h(G))return z;for(var Y=Object.keys(G),ee=Y.length;ee--;)z[Y[ee]]=G[Y[ee]];return z};function O(z,G){return Object.prototype.hasOwnProperty.call(z,G)}}).call(this)}).call(this,t("_process"),typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(t,N,V){V.byteLength=n,V.toByteArray=v,V.fromByteArray=b;for(var y=[],c=[],A=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,a=T.length;e<a;++e)y[e]=T[e],c[T.charCodeAt(e)]=e;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63;function i(g){var d=g.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=g.indexOf("=");f===-1&&(f=d);var m=f===d?0:4-f%4;return[f,m]}function n(g){var d=i(g),f=d[0],m=d[1];return(f+m)*3/4-m}function r(g,d,f){return(d+f)*3/4-f}function v(g){var d,f=i(g),m=f[0],l=f[1],x=new A(r(g,m,l)),u=0,M=l>0?m-4:m,w;for(w=0;w<M;w+=4)d=c[g.charCodeAt(w)]<<18|c[g.charCodeAt(w+1)]<<12|c[g.charCodeAt(w+2)]<<6|c[g.charCodeAt(w+3)],x[u++]=d>>16&255,x[u++]=d>>8&255,x[u++]=d&255;return l===2&&(d=c[g.charCodeAt(w)]<<2|c[g.charCodeAt(w+1)]>>4,x[u++]=d&255),l===1&&(d=c[g.charCodeAt(w)]<<10|c[g.charCodeAt(w+1)]<<4|c[g.charCodeAt(w+2)]>>2,x[u++]=d>>8&255,x[u++]=d&255),x}function s(g){return y[g>>18&63]+y[g>>12&63]+y[g>>6&63]+y[g&63]}function o(g,d,f){for(var m,l=[],x=d;x<f;x+=3)m=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(g[x+2]&255),l.push(s(m));return l.join("")}function b(g){for(var d,f=g.length,m=f%3,l=[],x=16383,u=0,M=f-m;u<M;u+=x)l.push(o(g,u,u+x>M?M:u+x));return m===1?(d=g[f-1],l.push(y[d>>2]+y[d<<4&63]+"==")):m===2&&(d=(g[f-2]<<8)+g[f-1],l.push(y[d>>10]+y[d>>4&63]+y[d<<2&63]+"=")),l.join("")}},{}],80:[function(t,N,V){function y(i,n,r,v,s){for(var o=s+1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d>=0?(o=b,s=b-1):v=b+1}return o}function c(i,n,r,v,s){for(var o=s+1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d>0?(o=b,s=b-1):v=b+1}return o}function A(i,n,r,v,s){for(var o=v-1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d<0?(o=b,v=b+1):s=b-1}return o}function T(i,n,r,v,s){for(var o=v-1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d<=0?(o=b,v=b+1):s=b-1}return o}function e(i,n,r,v,s){for(;v<=s;){var o=v+s>>>1,b=i[o],g=r!==void 0?r(b,n):b-n;if(g===0)return o;g<=0?v=o+1:s=o-1}return-1}function a(i,n,r,v,s,o){return typeof r=="function"?o(i,n,r,v===void 0?0:v|0,s===void 0?i.length-1:s|0):o(i,n,void 0,r===void 0?0:r|0,v===void 0?i.length-1:v|0)}N.exports={ge:function(i,n,r,v,s){return a(i,n,r,v,s,y)},gt:function(i,n,r,v,s){return a(i,n,r,v,s,c)},lt:function(i,n,r,v,s){return a(i,n,r,v,s,A)},le:function(i,n,r,v,s){return a(i,n,r,v,s,T)},eq:function(i,n,r,v,s){return a(i,n,r,v,s,e)}}},{}],81:[function(t,N,V){var y=32;V.INT_BITS=y,V.INT_MAX=2147483647,V.INT_MIN=-1<<y-1,V.sign=function(T){return(T>0)-(T<0)},V.abs=function(T){var e=T>>y-1;return(T^e)-e},V.min=function(T,e){return e^(T^e)&-(T<e)},V.max=function(T,e){return T^(T^e)&-(T<e)},V.isPow2=function(T){return!(T&T-1)&&!!T},V.log2=function(T){var e,a;return e=(T>65535)<<4,T>>>=e,a=(T>255)<<3,T>>>=a,e|=a,a=(T>15)<<2,T>>>=a,e|=a,a=(T>3)<<1,T>>>=a,e|=a,e|T>>1},V.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},V.popCount=function(T){return T=T-(T>>>1&1431655765),T=(T&858993459)+(T>>>2&858993459),(T+(T>>>4)&252645135)*16843009>>>24};function c(T){var e=32;return T&=-T,T&&e--,T&65535&&(e-=16),T&16711935&&(e-=8),T&252645135&&(e-=4),T&858993459&&(e-=2),T&1431655765&&(e-=1),e}V.countTrailingZeros=c,V.nextPow2=function(T){return T+=T===0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T+1},V.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T-(T>>>1)},V.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,T&=15,27030>>>T&1};var A=new Array(256);(function(T){for(var e=0;e<256;++e){var a=e,i=e,n=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=a&1,--n;T[e]=i<<n&255}})(A),V.reverse=function(T){return A[T&255]<<24|A[T>>>8&255]<<16|A[T>>>16&255]<<8|A[T>>>24&255]},V.interleave2=function(T,e){return T&=65535,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,T|e<<1},V.deinterleave2=function(T,e){return T=T>>>e&1431655765,T=(T|T>>>1)&858993459,T=(T|T>>>2)&252645135,T=(T|T>>>4)&16711935,T=(T|T>>>16)&65535,T<<16>>16},V.interleave3=function(T,e,a){return T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,T|=e<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,T|a<<2},V.deinterleave3=function(T,e){return T=T>>>e&1227133513,T=(T|T>>>2)&3272356035,T=(T|T>>>4)&251719695,T=(T|T>>>8)&4278190335,T=(T|T>>>16)&1023,T<<22>>22},V.nextCombination=function(T){var e=T|T-1;return e+1|(~e&-~e)-1>>>c(T)+1}},{}],82:[function(t,N,V){var y=t("clamp");N.exports=A;var c=1e20;function A(a,i){i||(i={});var n=i.cutoff==null?.25:i.cutoff,r=i.radius==null?8:i.radius,v=i.channel||0,s,o,b,g,d,f,m,l,x,u,M;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!i.width||!i.height)throw Error("For raw data width and height should be provided by options");s=i.width,o=i.height,g=a,i.stride?f=i.stride:f=Math.floor(a.length/s/o)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(l=a,m=l.getContext("2d"),s=l.width,o=l.height,x=m.getImageData(0,0,s,o),g=x.data,f=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(l=a.canvas,m=a,s=l.width,o=l.height,x=m.getImageData(0,0,s,o),g=x.data,f=4):window.ImageData&&a instanceof window.ImageData&&(x=a,s=a.width,o=a.height,g=x.data,f=4);if(b=Math.max(s,o),window.Uint8ClampedArray&&g instanceof window.Uint8ClampedArray||window.Uint8Array&&g instanceof window.Uint8Array)for(d=g,g=Array(s*o),u=0,M=d.length;u<M;u++)g[u]=d[u*f+v]/255;else if(f!==1)throw Error("Raw data can have only 1 value per pixel");var w=Array(s*o),p=Array(s*o),_=Array(b),h=Array(b),L=Array(b+1),E=Array(b);for(u=0,M=s*o;u<M;u++){var S=g[u];w[u]=S===1?0:S===0?c:Math.pow(Math.max(0,.5-S),2),p[u]=S===1?c:S===0?0:Math.pow(Math.max(0,S-.5),2)}T(w,s,o,_,h,E,L),T(p,s,o,_,h,E,L);var P=window.Float32Array?new Float32Array(s*o):new Array(s*o);for(u=0,M=s*o;u<M;u++)P[u]=y(1-((w[u]-p[u])/r+n),0,1);return P}function T(a,i,n,r,v,s,o){for(var b=0;b<i;b++){for(var g=0;g<n;g++)r[g]=a[g*i+b];for(e(r,v,s,o,n),g=0;g<n;g++)a[g*i+b]=v[g]}for(g=0;g<n;g++){for(b=0;b<i;b++)r[b]=a[g*i+b];for(e(r,v,s,o,i),b=0;b<i;b++)a[g*i+b]=Math.sqrt(v[b])}}function e(a,i,n,r,v){n[0]=0,r[0]=-c,r[1]=+c;for(var s=1,o=0;s<v;s++){for(var b=(a[s]+s*s-(a[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);b<=r[o];)o--,b=(a[s]+s*s-(a[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);o++,n[o]=s,r[o]=b,r[o+1]=+c}for(s=0,o=0;s<v;s++){for(;r[o+1]<s;)o++;i[s]=(s-n[o])*(s-n[o])+a[n[o]]}}},{clamp:86}],83:[function(t,N,V){},{}],84:[function(t,N,V){var y=typeof Reflect=="object"?Reflect:null,c=y&&typeof y.apply=="function"?y.apply:function(u,M,w){return Function.prototype.apply.call(u,M,w)},A;y&&typeof y.ownKeys=="function"?A=y.ownKeys:Object.getOwnPropertySymbols?A=function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:A=function(u){return Object.getOwnPropertyNames(u)};function T(x){console&&console.warn&&console.warn(x)}var e=Number.isNaN||function(u){return u!==u};function a(){a.init.call(this)}N.exports=a,N.exports.once=l,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function n(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(x){if(typeof x!="number"||x<0||e(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");i=x}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||e(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this};function r(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}a.prototype.getMaxListeners=function(){return r(this)},a.prototype.emit=function(u){for(var M=[],w=1;w<arguments.length;w++)M.push(arguments[w]);var p=u==="error",_=this._events;if(_!==void 0)p=p&&_.error===void 0;else if(!p)return!1;if(p){var h;if(M.length>0&&(h=M[0]),h instanceof Error)throw h;var L=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw L.context=h,L}var E=_[u];if(E===void 0)return!1;if(typeof E=="function")c(E,this,M);else for(var S=E.length,P=d(E,S),w=0;w<S;++w)c(P[w],this,M);return!0};function v(x,u,M,w){var p,_,h;if(n(M),_=x._events,_===void 0?(_=x._events=Object.create(null),x._eventsCount=0):(_.newListener!==void 0&&(x.emit("newListener",u,M.listener?M.listener:M),_=x._events),h=_[u]),h===void 0)h=_[u]=M,++x._eventsCount;else if(typeof h=="function"?h=_[u]=w?[M,h]:[h,M]:w?h.unshift(M):h.push(M),p=r(x),p>0&&h.length>p&&!h.warned){h.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(u)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=x,L.type=u,L.count=h.length,T(L)}return x}a.prototype.addListener=function(u,M){return v(this,u,M,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(u,M){return v(this,u,M,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(x,u,M){var w={fired:!1,wrapFn:void 0,target:x,type:u,listener:M},p=s.bind(w);return p.listener=M,w.wrapFn=p,p}a.prototype.once=function(u,M){return n(M),this.on(u,o(this,u,M)),this},a.prototype.prependOnceListener=function(u,M){return n(M),this.prependListener(u,o(this,u,M)),this},a.prototype.removeListener=function(u,M){var w,p,_,h,L;if(n(M),p=this._events,p===void 0)return this;if(w=p[u],w===void 0)return this;if(w===M||w.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete p[u],p.removeListener&&this.emit("removeListener",u,w.listener||M));else if(typeof w!="function"){for(_=-1,h=w.length-1;h>=0;h--)if(w[h]===M||w[h].listener===M){L=w[h].listener,_=h;break}if(_<0)return this;_===0?w.shift():f(w,_),w.length===1&&(p[u]=w[0]),p.removeListener!==void 0&&this.emit("removeListener",u,L||M)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(u){var M,w,p;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[u]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[u]),this;if(arguments.length===0){var _=Object.keys(w),h;for(p=0;p<_.length;++p)h=_[p],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=w[u],typeof M=="function")this.removeListener(u,M);else if(M!==void 0)for(p=M.length-1;p>=0;p--)this.removeListener(u,M[p]);return this};function b(x,u,M){var w=x._events;if(w===void 0)return[];var p=w[u];return p===void 0?[]:typeof p=="function"?M?[p.listener||p]:[p]:M?m(p):d(p,p.length)}a.prototype.listeners=function(u){return b(this,u,!0)},a.prototype.rawListeners=function(u){return b(this,u,!1)},a.listenerCount=function(x,u){return typeof x.listenerCount=="function"?x.listenerCount(u):g.call(x,u)},a.prototype.listenerCount=g;function g(x){var u=this._events;if(u!==void 0){var M=u[x];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?A(this._events):[]};function d(x,u){for(var M=new Array(u),w=0;w<u;++w)M[w]=x[w];return M}function f(x,u){for(;u+1<x.length;u++)x[u]=x[u+1];x.pop()}function m(x){for(var u=new Array(x.length),M=0;M<u.length;++M)u[M]=x[M].listener||x[M];return u}function l(x,u){return new Promise(function(M,w){function p(){_!==void 0&&x.removeListener("error",_),M([].slice.call(arguments))}var _;u!=="error"&&(_=function(L){x.removeListener(u,p),w(L)},x.once("error",_)),x.once(u,p)})}},{}],85:[function(t,N,V){(function(y){(function(){var c=t("base64-js"),A=t("ieee754");V.Buffer=i,V.SlowBuffer=m,V.INSPECT_MAX_BYTES=50;var T=2147483647;V.kMaxLength=T,i.TYPED_ARRAY_SUPPORT=e(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var oe=new Uint8Array(1);return oe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},oe.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.byteOffset}});function a(oe){if(oe>T)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var ne=new Uint8Array(oe);return ne.__proto__=i.prototype,ne}function i(oe,ne,le){if(typeof oe=="number"){if(typeof ne=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(oe)}return n(oe,ne,le)}typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192;function n(oe,ne,le){if(typeof oe=="string")return o(oe,ne);if(ArrayBuffer.isView(oe))return b(oe);if(oe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe);if(Q(oe,ArrayBuffer)||oe&&Q(oe.buffer,ArrayBuffer))return g(oe,ne,le);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=oe.valueOf&&oe.valueOf();if(_e!=null&&_e!==oe)return i.from(_e,ne,le);var fe=d(oe);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return i.from(oe[Symbol.toPrimitive]("string"),ne,le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe)}i.from=function(oe,ne,le){return n(oe,ne,le)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array;function r(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function v(oe,ne,le){return r(oe),oe<=0?a(oe):ne!==void 0?typeof le=="string"?a(oe).fill(ne,le):a(oe).fill(ne):a(oe)}i.alloc=function(oe,ne,le){return v(oe,ne,le)};function s(oe){return r(oe),a(oe<0?0:f(oe)|0)}i.allocUnsafe=function(oe){return s(oe)},i.allocUnsafeSlow=function(oe){return s(oe)};function o(oe,ne){if((typeof ne!="string"||ne==="")&&(ne="utf8"),!i.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);var le=l(oe,ne)|0,_e=a(le),fe=_e.write(oe,ne);return fe!==le&&(_e=_e.slice(0,fe)),_e}function b(oe){for(var ne=oe.length<0?0:f(oe.length)|0,le=a(ne),_e=0;_e<ne;_e+=1)le[_e]=oe[_e]&255;return le}function g(oe,ne,le){if(ne<0||oe.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<ne+(le||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return ne===void 0&&le===void 0?_e=new Uint8Array(oe):le===void 0?_e=new Uint8Array(oe,ne):_e=new Uint8Array(oe,ne,le),_e.__proto__=i.prototype,_e}function d(oe){if(i.isBuffer(oe)){var ne=f(oe.length)|0,le=a(ne);return le.length===0||oe.copy(le,0,0,ne),le}if(oe.length!==void 0)return typeof oe.length!="number"||ie(oe.length)?a(0):b(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return b(oe.data)}function f(oe){if(oe>=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return oe|0}function m(oe){return+oe!=oe&&(oe=0),i.alloc(+oe)}i.isBuffer=function(ne){return ne!=null&&ne._isBuffer===!0&&ne!==i.prototype},i.compare=function(ne,le){if(Q(ne,Uint8Array)&&(ne=i.from(ne,ne.offset,ne.byteLength)),Q(le,Uint8Array)&&(le=i.from(le,le.offset,le.byteLength)),!i.isBuffer(ne)||!i.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ne===le)return 0;for(var _e=ne.length,fe=le.length,ye=0,xe=Math.min(_e,fe);ye<xe;++ye)if(ne[ye]!==le[ye]){_e=ne[ye],fe=le[ye];break}return _e<fe?-1:fe<_e?1:0},i.isEncoding=function(ne){switch(String(ne).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(ne,le){if(!Array.isArray(ne))throw new TypeError('"list" argument must be an Array of Buffers');if(ne.length===0)return i.alloc(0);var _e;if(le===void 0)for(le=0,_e=0;_e<ne.length;++_e)le+=ne[_e].length;var fe=i.allocUnsafe(le),ye=0;for(_e=0;_e<ne.length;++_e){var xe=ne[_e];if(Q(xe,Uint8Array)&&(xe=i.from(xe)),!i.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(fe,ye),ye+=xe.length}return fe};function l(oe,ne){if(i.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||Q(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof oe);var le=oe.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&le===0)return 0;for(var fe=!1;;)switch(ne){case"ascii":case"latin1":case"binary":return le;case"utf8":case"utf-8":return U(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le*2;case"hex":return le>>>1;case"base64":return re(oe).length;default:if(fe)return _e?-1:U(oe).length;ne=(""+ne).toLowerCase(),fe=!0}}i.byteLength=l;function x(oe,ne,le){var _e=!1;if((ne===void 0||ne<0)&&(ne=0),ne>this.length||((le===void 0||le>this.length)&&(le=this.length),le<=0)||(le>>>=0,ne>>>=0,le<=ne))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return z(this,ne,le);case"utf8":case"utf-8":return F(this,ne,le);case"ascii":return R(this,ne,le);case"latin1":case"binary":return O(this,ne,le);case"base64":return P(this,ne,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,ne,le);default:if(_e)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),_e=!0}}i.prototype._isBuffer=!0;function u(oe,ne,le){var _e=oe[ne];oe[ne]=oe[le],oe[le]=_e}i.prototype.swap16=function(){var ne=this.length;if(ne%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<ne;le+=2)u(this,le,le+1);return this},i.prototype.swap32=function(){var ne=this.length;if(ne%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<ne;le+=4)u(this,le,le+3),u(this,le+1,le+2);return this},i.prototype.swap64=function(){var ne=this.length;if(ne%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<ne;le+=8)u(this,le,le+7),u(this,le+1,le+6),u(this,le+2,le+5),u(this,le+3,le+4);return this},i.prototype.toString=function(){var ne=this.length;return ne===0?"":arguments.length===0?F(this,0,ne):x.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(ne){if(!i.isBuffer(ne))throw new TypeError("Argument must be a Buffer");return this===ne?!0:i.compare(this,ne)===0},i.prototype.inspect=function(){var ne="",le=V.INSPECT_MAX_BYTES;return ne=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(ne+=" ... "),"<Buffer "+ne+">"},i.prototype.compare=function(ne,le,_e,fe,ye){if(Q(ne,Uint8Array)&&(ne=i.from(ne,ne.offset,ne.byteLength)),!i.isBuffer(ne))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ne);if(le===void 0&&(le=0),_e===void 0&&(_e=ne?ne.length:0),fe===void 0&&(fe=0),ye===void 0&&(ye=this.length),le<0||_e>ne.length||fe<0||ye>this.length)throw new RangeError("out of range index");if(fe>=ye&&le>=_e)return 0;if(fe>=ye)return-1;if(le>=_e)return 1;if(le>>>=0,_e>>>=0,fe>>>=0,ye>>>=0,this===ne)return 0;for(var xe=ye-fe,me=_e-le,be=Math.min(xe,me),ke=this.slice(fe,ye),De=ne.slice(le,_e),He=0;He<be;++He)if(ke[He]!==De[He]){xe=ke[He],me=De[He];break}return xe<me?-1:me<xe?1:0};function M(oe,ne,le,_e,fe){if(oe.length===0)return-1;if(typeof le=="string"?(_e=le,le=0):le>2147483647?le=2147483647:le<-2147483648&&(le=-2147483648),le=+le,ie(le)&&(le=fe?0:oe.length-1),le<0&&(le=oe.length+le),le>=oe.length){if(fe)return-1;le=oe.length-1}else if(le<0)if(fe)le=0;else return-1;if(typeof ne=="string"&&(ne=i.from(ne,_e)),i.isBuffer(ne))return ne.length===0?-1:w(oe,ne,le,_e,fe);if(typeof ne=="number")return ne=ne&255,typeof Uint8Array.prototype.indexOf=="function"?fe?Uint8Array.prototype.indexOf.call(oe,ne,le):Uint8Array.prototype.lastIndexOf.call(oe,ne,le):w(oe,[ne],le,_e,fe);throw new TypeError("val must be string, number or Buffer")}function w(oe,ne,le,_e,fe){var ye=1,xe=oe.length,me=ne.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(oe.length<2||ne.length<2)return-1;ye=2,xe/=2,me/=2,le/=2}function be(Le,Ze){return ye===1?Le[Ze]:Le.readUInt16BE(Ze*ye)}var ke;if(fe){var De=-1;for(ke=le;ke<xe;ke++)if(be(oe,ke)===be(ne,De===-1?0:ke-De)){if(De===-1&&(De=ke),ke-De+1===me)return De*ye}else De!==-1&&(ke-=ke-De),De=-1}else for(le+me>xe&&(le=xe-me),ke=le;ke>=0;ke--){for(var He=!0,Ae=0;Ae<me;Ae++)if(be(oe,ke+Ae)!==be(ne,Ae)){He=!1;break}if(He)return ke}return-1}i.prototype.includes=function(ne,le,_e){return this.indexOf(ne,le,_e)!==-1},i.prototype.indexOf=function(ne,le,_e){return M(this,ne,le,_e,!0)},i.prototype.lastIndexOf=function(ne,le,_e){return M(this,ne,le,_e,!1)};function p(oe,ne,le,_e){le=Number(le)||0;var fe=oe.length-le;_e?(_e=Number(_e),_e>fe&&(_e=fe)):_e=fe;var ye=ne.length;_e>ye/2&&(_e=ye/2);for(var xe=0;xe<_e;++xe){var me=parseInt(ne.substr(xe*2,2),16);if(ie(me))return xe;oe[le+xe]=me}return xe}function _(oe,ne,le,_e){return Z(U(ne,oe.length-le),oe,le,_e)}function h(oe,ne,le,_e){return Z(H(ne),oe,le,_e)}function L(oe,ne,le,_e){return h(oe,ne,le,_e)}function E(oe,ne,le,_e){return Z(re(ne),oe,le,_e)}function S(oe,ne,le,_e){return Z(q(ne,oe.length-le),oe,le,_e)}i.prototype.write=function(ne,le,_e,fe){if(le===void 0)fe="utf8",_e=this.length,le=0;else if(_e===void 0&&typeof le=="string")fe=le,_e=this.length,le=0;else if(isFinite(le))le=le>>>0,isFinite(_e)?(_e=_e>>>0,fe===void 0&&(fe="utf8")):(fe=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ye=this.length-le;if((_e===void 0||_e>ye)&&(_e=ye),ne.length>0&&(_e<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");for(var xe=!1;;)switch(fe){case"hex":return p(this,ne,le,_e);case"utf8":case"utf-8":return _(this,ne,le,_e);case"ascii":return h(this,ne,le,_e);case"latin1":case"binary":return L(this,ne,le,_e);case"base64":return E(this,ne,le,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,ne,le,_e);default:if(xe)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),xe=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(oe,ne,le){return ne===0&&le===oe.length?c.fromByteArray(oe):c.fromByteArray(oe.slice(ne,le))}function F(oe,ne,le){le=Math.min(oe.length,le);for(var _e=[],fe=ne;fe<le;){var ye=oe[fe],xe=null,me=ye>239?4:ye>223?3:ye>191?2:1;if(fe+me<=le){var be,ke,De,He;switch(me){case 1:ye<128&&(xe=ye);break;case 2:be=oe[fe+1],(be&192)===128&&(He=(ye&31)<<6|be&63,He>127&&(xe=He));break;case 3:be=oe[fe+1],ke=oe[fe+2],(be&192)===128&&(ke&192)===128&&(He=(ye&15)<<12|(be&63)<<6|ke&63,He>2047&&(He<55296||He>57343)&&(xe=He));break;case 4:be=oe[fe+1],ke=oe[fe+2],De=oe[fe+3],(be&192)===128&&(ke&192)===128&&(De&192)===128&&(He=(ye&15)<<18|(be&63)<<12|(ke&63)<<6|De&63,He>65535&&He<1114112&&(xe=He))}}xe===null?(xe=65533,me=1):xe>65535&&(xe-=65536,_e.push(xe>>>10&1023|55296),xe=56320|xe&1023),_e.push(xe),fe+=me}return D(_e)}var I=4096;function D(oe){var ne=oe.length;if(ne<=I)return String.fromCharCode.apply(String,oe);for(var le="",_e=0;_e<ne;)le+=String.fromCharCode.apply(String,oe.slice(_e,_e+=I));return le}function R(oe,ne,le){var _e="";le=Math.min(oe.length,le);for(var fe=ne;fe<le;++fe)_e+=String.fromCharCode(oe[fe]&127);return _e}function O(oe,ne,le){var _e="";le=Math.min(oe.length,le);for(var fe=ne;fe<le;++fe)_e+=String.fromCharCode(oe[fe]);return _e}function z(oe,ne,le){var _e=oe.length;(!ne||ne<0)&&(ne=0),(!le||le<0||le>_e)&&(le=_e);for(var fe="",ye=ne;ye<le;++ye)fe+=J(oe[ye]);return fe}function G(oe,ne,le){for(var _e=oe.slice(ne,le),fe="",ye=0;ye<_e.length;ye+=2)fe+=String.fromCharCode(_e[ye]+_e[ye+1]*256);return fe}i.prototype.slice=function(ne,le){var _e=this.length;ne=~~ne,le=le===void 0?_e:~~le,ne<0?(ne+=_e,ne<0&&(ne=0)):ne>_e&&(ne=_e),le<0?(le+=_e,le<0&&(le=0)):le>_e&&(le=_e),le<ne&&(le=ne);var fe=this.subarray(ne,le);return fe.__proto__=i.prototype,fe};function Y(oe,ne,le){if(oe%1!==0||oe<0)throw new RangeError("offset is not uint");if(oe+ne>le)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(ne,le,_e){ne=ne>>>0,le=le>>>0,_e||Y(ne,le,this.length);for(var fe=this[ne],ye=1,xe=0;++xe<le&&(ye*=256);)fe+=this[ne+xe]*ye;return fe},i.prototype.readUIntBE=function(ne,le,_e){ne=ne>>>0,le=le>>>0,_e||Y(ne,le,this.length);for(var fe=this[ne+--le],ye=1;le>0&&(ye*=256);)fe+=this[ne+--le]*ye;return fe},i.prototype.readUInt8=function(ne,le){return ne=ne>>>0,le||Y(ne,1,this.length),this[ne]},i.prototype.readUInt16LE=function(ne,le){return ne=ne>>>0,le||Y(ne,2,this.length),this[ne]|this[ne+1]<<8},i.prototype.readUInt16BE=function(ne,le){return ne=ne>>>0,le||Y(ne,2,this.length),this[ne]<<8|this[ne+1]},i.prototype.readUInt32LE=function(ne,le){return ne=ne>>>0,le||Y(ne,4,this.length),(this[ne]|this[ne+1]<<8|this[ne+2]<<16)+this[ne+3]*16777216},i.prototype.readUInt32BE=function(ne,le){return ne=ne>>>0,le||Y(ne,4,this.length),this[ne]*16777216+(this[ne+1]<<16|this[ne+2]<<8|this[ne+3])},i.prototype.readIntLE=function(ne,le,_e){ne=ne>>>0,le=le>>>0,_e||Y(ne,le,this.length);for(var fe=this[ne],ye=1,xe=0;++xe<le&&(ye*=256);)fe+=this[ne+xe]*ye;return ye*=128,fe>=ye&&(fe-=Math.pow(2,8*le)),fe},i.prototype.readIntBE=function(ne,le,_e){ne=ne>>>0,le=le>>>0,_e||Y(ne,le,this.length);for(var fe=le,ye=1,xe=this[ne+--fe];fe>0&&(ye*=256);)xe+=this[ne+--fe]*ye;return ye*=128,xe>=ye&&(xe-=Math.pow(2,8*le)),xe},i.prototype.readInt8=function(ne,le){return ne=ne>>>0,le||Y(ne,1,this.length),this[ne]&128?(255-this[ne]+1)*-1:this[ne]},i.prototype.readInt16LE=function(ne,le){ne=ne>>>0,le||Y(ne,2,this.length);var _e=this[ne]|this[ne+1]<<8;return _e&32768?_e|4294901760:_e},i.prototype.readInt16BE=function(ne,le){ne=ne>>>0,le||Y(ne,2,this.length);var _e=this[ne+1]|this[ne]<<8;return _e&32768?_e|4294901760:_e},i.prototype.readInt32LE=function(ne,le){return ne=ne>>>0,le||Y(ne,4,this.length),this[ne]|this[ne+1]<<8|this[ne+2]<<16|this[ne+3]<<24},i.prototype.readInt32BE=function(ne,le){return ne=ne>>>0,le||Y(ne,4,this.length),this[ne]<<24|this[ne+1]<<16|this[ne+2]<<8|this[ne+3]},i.prototype.readFloatLE=function(ne,le){return ne=ne>>>0,le||Y(ne,4,this.length),A.read(this,ne,!0,23,4)},i.prototype.readFloatBE=function(ne,le){return ne=ne>>>0,le||Y(ne,4,this.length),A.read(this,ne,!1,23,4)},i.prototype.readDoubleLE=function(ne,le){return ne=ne>>>0,le||Y(ne,8,this.length),A.read(this,ne,!0,52,8)},i.prototype.readDoubleBE=function(ne,le){return ne=ne>>>0,le||Y(ne,8,this.length),A.read(this,ne,!1,52,8)};function ee(oe,ne,le,_e,fe,ye){if(!i.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne>fe||ne<ye)throw new RangeError('"value" argument is out of bounds');if(le+_e>oe.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(ne,le,_e,fe){if(ne=+ne,le=le>>>0,_e=_e>>>0,!fe){var ye=Math.pow(2,8*_e)-1;ee(this,ne,le,_e,ye,0)}var xe=1,me=0;for(this[le]=ne&255;++me<_e&&(xe*=256);)this[le+me]=ne/xe&255;return le+_e},i.prototype.writeUIntBE=function(ne,le,_e,fe){if(ne=+ne,le=le>>>0,_e=_e>>>0,!fe){var ye=Math.pow(2,8*_e)-1;ee(this,ne,le,_e,ye,0)}var xe=_e-1,me=1;for(this[le+xe]=ne&255;--xe>=0&&(me*=256);)this[le+xe]=ne/me&255;return le+_e},i.prototype.writeUInt8=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,1,255,0),this[le]=ne&255,le+1},i.prototype.writeUInt16LE=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,2,65535,0),this[le]=ne&255,this[le+1]=ne>>>8,le+2},i.prototype.writeUInt16BE=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,2,65535,0),this[le]=ne>>>8,this[le+1]=ne&255,le+2},i.prototype.writeUInt32LE=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,4,4294967295,0),this[le+3]=ne>>>24,this[le+2]=ne>>>16,this[le+1]=ne>>>8,this[le]=ne&255,le+4},i.prototype.writeUInt32BE=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,4,4294967295,0),this[le]=ne>>>24,this[le+1]=ne>>>16,this[le+2]=ne>>>8,this[le+3]=ne&255,le+4},i.prototype.writeIntLE=function(ne,le,_e,fe){if(ne=+ne,le=le>>>0,!fe){var ye=Math.pow(2,8*_e-1);ee(this,ne,le,_e,ye-1,-ye)}var xe=0,me=1,be=0;for(this[le]=ne&255;++xe<_e&&(me*=256);)ne<0&&be===0&&this[le+xe-1]!==0&&(be=1),this[le+xe]=(ne/me>>0)-be&255;return le+_e},i.prototype.writeIntBE=function(ne,le,_e,fe){if(ne=+ne,le=le>>>0,!fe){var ye=Math.pow(2,8*_e-1);ee(this,ne,le,_e,ye-1,-ye)}var xe=_e-1,me=1,be=0;for(this[le+xe]=ne&255;--xe>=0&&(me*=256);)ne<0&&be===0&&this[le+xe+1]!==0&&(be=1),this[le+xe]=(ne/me>>0)-be&255;return le+_e},i.prototype.writeInt8=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,1,127,-128),ne<0&&(ne=255+ne+1),this[le]=ne&255,le+1},i.prototype.writeInt16LE=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,2,32767,-32768),this[le]=ne&255,this[le+1]=ne>>>8,le+2},i.prototype.writeInt16BE=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,2,32767,-32768),this[le]=ne>>>8,this[le+1]=ne&255,le+2},i.prototype.writeInt32LE=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,4,2147483647,-2147483648),this[le]=ne&255,this[le+1]=ne>>>8,this[le+2]=ne>>>16,this[le+3]=ne>>>24,le+4},i.prototype.writeInt32BE=function(ne,le,_e){return ne=+ne,le=le>>>0,_e||ee(this,ne,le,4,2147483647,-2147483648),ne<0&&(ne=4294967295+ne+1),this[le]=ne>>>24,this[le+1]=ne>>>16,this[le+2]=ne>>>8,this[le+3]=ne&255,le+4};function j(oe,ne,le,_e,fe,ye){if(le+_e>oe.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("Index out of range")}function X(oe,ne,le,_e,fe){return ne=+ne,le=le>>>0,fe||j(oe,ne,le,4),A.write(oe,ne,le,_e,23,4),le+4}i.prototype.writeFloatLE=function(ne,le,_e){return X(this,ne,le,!0,_e)},i.prototype.writeFloatBE=function(ne,le,_e){return X(this,ne,le,!1,_e)};function ae(oe,ne,le,_e,fe){return ne=+ne,le=le>>>0,fe||j(oe,ne,le,8),A.write(oe,ne,le,_e,52,8),le+8}i.prototype.writeDoubleLE=function(ne,le,_e){return ae(this,ne,le,!0,_e)},i.prototype.writeDoubleBE=function(ne,le,_e){return ae(this,ne,le,!1,_e)},i.prototype.copy=function(ne,le,_e,fe){if(!i.isBuffer(ne))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!fe&&fe!==0&&(fe=this.length),le>=ne.length&&(le=ne.length),le||(le=0),fe>0&&fe<_e&&(fe=_e),fe===_e||ne.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),ne.length-le<fe-_e&&(fe=ne.length-le+_e);var ye=fe-_e;if(this===ne&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(le,_e,fe);else if(this===ne&&_e<le&&le<fe)for(var xe=ye-1;xe>=0;--xe)ne[xe+le]=this[xe+_e];else Uint8Array.prototype.set.call(ne,this.subarray(_e,fe),le);return ye},i.prototype.fill=function(ne,le,_e,fe){if(typeof ne=="string"){if(typeof le=="string"?(fe=le,le=0,_e=this.length):typeof _e=="string"&&(fe=_e,_e=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!i.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(ne.length===1){var ye=ne.charCodeAt(0);(fe==="utf8"&&ye<128||fe==="latin1")&&(ne=ye)}}else typeof ne=="number"&&(ne=ne&255);if(le<0||this.length<le||this.length<_e)throw new RangeError("Out of range index");if(_e<=le)return this;le=le>>>0,_e=_e===void 0?this.length:_e>>>0,ne||(ne=0);var xe;if(typeof ne=="number")for(xe=le;xe<_e;++xe)this[xe]=ne;else{var me=i.isBuffer(ne)?ne:i.from(ne,fe),be=me.length;if(be===0)throw new TypeError('The value "'+ne+'" is invalid for argument "value"');for(xe=0;xe<_e-le;++xe)this[xe+le]=me[xe%be]}return this};var he=/[^+/0-9A-Za-z-_]/g;function K(oe){if(oe=oe.split("=")[0],oe=oe.trim().replace(he,""),oe.length<2)return"";for(;oe.length%4!==0;)oe=oe+"=";return oe}function J(oe){return oe<16?"0"+oe.toString(16):oe.toString(16)}function U(oe,ne){ne=ne||1/0;for(var le,_e=oe.length,fe=null,ye=[],xe=0;xe<_e;++xe){if(le=oe.charCodeAt(xe),le>55295&&le<57344){if(!fe){if(le>56319){(ne-=3)>-1&&ye.push(239,191,189);continue}else if(xe+1===_e){(ne-=3)>-1&&ye.push(239,191,189);continue}fe=le;continue}if(le<56320){(ne-=3)>-1&&ye.push(239,191,189),fe=le;continue}le=(fe-55296<<10|le-56320)+65536}else fe&&(ne-=3)>-1&&ye.push(239,191,189);if(fe=null,le<128){if((ne-=1)<0)break;ye.push(le)}else if(le<2048){if((ne-=2)<0)break;ye.push(le>>6|192,le&63|128)}else if(le<65536){if((ne-=3)<0)break;ye.push(le>>12|224,le>>6&63|128,le&63|128)}else if(le<1114112){if((ne-=4)<0)break;ye.push(le>>18|240,le>>12&63|128,le>>6&63|128,le&63|128)}else throw new Error("Invalid code point")}return ye}function H(oe){for(var ne=[],le=0;le<oe.length;++le)ne.push(oe.charCodeAt(le)&255);return ne}function q(oe,ne){for(var le,_e,fe,ye=[],xe=0;xe<oe.length&&!((ne-=2)<0);++xe)le=oe.charCodeAt(xe),_e=le>>8,fe=le%256,ye.push(fe),ye.push(_e);return ye}function re(oe){return c.toByteArray(K(oe))}function Z(oe,ne,le,_e){for(var fe=0;fe<_e&&!(fe+le>=ne.length||fe>=oe.length);++fe)ne[fe+le]=oe[fe];return fe}function Q(oe,ne){return oe instanceof ne||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===ne.name}function ie(oe){return oe!==oe}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(t,N,V){N.exports=y;function y(c,A,T){return A<T?c<A?A:c>T?T:c:c<T?T:c>A?A:c}},{}],87:[function(t,N,V){var y=t("clamp");N.exports=c,N.exports.to=c,N.exports.from=A;function c(T,e){e==null&&(e=!0);var a=T[0],i=T[1],n=T[2],r=T[3];r==null&&(r=e?1:255),e&&(a*=255,i*=255,n*=255,r*=255),a=y(a,0,255)&255,i=y(i,0,255)&255,n=y(n,0,255)&255,r=y(r,0,255)&255;var v=a*16777216+(i<<16)+(n<<8)+r;return v}function A(T,e){T=+T;var a=T>>>24,i=(T&16711680)>>>16,n=(T&65280)>>>8,r=T&255;return e===!1?[a,i,n,r]:[a/255,i/255,n/255,r/255]}},{clamp:86}],88:[function(t,N,V){N.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(t,N,V){var y=t("color-rgba"),c=t("clamp"),A=t("dtype");N.exports=function(a,i){(i==="float"||!i)&&(i="array"),i==="uint"&&(i="uint8"),i==="uint_clamped"&&(i="uint8_clamped");var n=A(i),r=new n(4),v=i!=="uint8"&&i!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=y(a),a[0]/=255,a[1]/=255,a[2]/=255),T(a)?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:255,v&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(v?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:1):(r[0]=c(Math.floor(a[0]*255),0,255),r[1]=c(Math.floor(a[1]*255),0,255),r[2]=c(Math.floor(a[2]*255),0,255),r[3]=a[3]==null?255:c(Math.floor(a[3]*255),0,255)),r)};function T(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(t,N,V){(function(y){(function(){var c=t("color-name"),A=t("is-plain-obj"),T=t("defined");N.exports=a;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(i){var n,r=[],v=1,s;if(typeof i=="string")if(c[i])r=c[i].slice(),s="rgb";else if(i==="transparent")v=0,s="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),b=o.length,g=b<=4;v=1,g?(r=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],b===4&&(v=parseInt(o[3]+o[3],16)/255)):(r=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],b===8&&(v=parseInt(o[6]+o[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),s="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var d=n[1],f=d==="rgb",o=d.replace(/a$/,"");s=o;var b=o==="cmyk"?4:o==="gray"?1:3;r=n[2].trim().split(/\s*,\s*/).map(function(u,M){if(/%$/.test(u))return M===b?parseFloat(u)/100:o==="rgb"?parseFloat(u)*255/100:parseFloat(u);if(o[M]==="h"){if(/deg$/.test(u))return parseFloat(u);if(e[u]!==void 0)return e[u]}return parseFloat(u)}),d===o&&r.push(1),v=f||r[b]===void 0?1:r[b],r=r.slice(0,b)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(r=i.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(i))s="rgb",r=[i>>>16,(i&65280)>>>8,i&255];else if(A(i)){var m=T(i.r,i.red,i.R,null);m!==null?(s="rgb",r=[m,T(i.g,i.green,i.G),T(i.b,i.blue,i.B)]):(s="hsl",r=[T(i.h,i.hue,i.H),T(i.s,i.saturation,i.S),T(i.l,i.lightness,i.L,i.b,i.brightness)]),v=T(i.a,i.alpha,i.opacity,1),i.opacity!=null&&(v/=100)}else(Array.isArray(i)||y.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(r=[i[0],i[1],i[2]],s="rgb",v=i.length===4?i[3]:1);return{space:s,values:r,alpha:v}}}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(t,N,V){var y=t("color-parse"),c=t("color-space/hsl"),A=t("clamp");N.exports=function(e){var a,i=y(e);return i.space?(a=Array(3),a[0]=A(i.values[0],0,255),a[1]=A(i.values[1],0,255),a[2]=A(i.values[2],0,255),i.space[0]==="h"&&(a=c.rgb(a)),a.push(A(i.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(t,N,V){var y=t("./rgb");N.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(c){var A=c[0]/360,T=c[1]/100,e=c[2]/100,a,i,n,r,v;if(T===0)return v=e*255,[v,v,v];e<.5?i=e*(1+T):i=e+T-e*T,a=2*e-i,r=[0,0,0];for(var s=0;s<3;s++)n=A+1/3*-(s-1),n<0?n++:n>1&&n--,6*n<1?v=a+(i-a)*6*n:2*n<1?v=i:3*n<2?v=a+(i-a)*(2/3-n)*6:v=a,r[s]=v*255;return r}},y.hsl=function(c){var A=c[0]/255,T=c[1]/255,e=c[2]/255,a=Math.min(A,T,e),i=Math.max(A,T,e),n=i-a,r,v,s;return i===a?r=0:A===i?r=(T-e)/n:T===i?r=2+(e-A)/n:e===i&&(r=4+(A-T)/n),r=Math.min(r*60,360),r<0&&(r+=360),s=(a+i)/2,i===a?v=0:s<=.5?v=n/(i+a):v=n/(2-i-a),[r,v*100,s*100]}},{"./rgb":93}],93:[function(t,N,V){N.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(t,N,V){N.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(t,N,V){N.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(t,N,V){N.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(t,N,V){N.exports=["normal","italic","oblique"]},{}],98:[function(t,N,V){N.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(t,N,V){N.exports={parse:t("./parse"),stringify:t("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(t,N,V){var y=t("css-font-size-keywords");N.exports={isSize:function(A){return/^[\d\.]/.test(A)||A.indexOf("/")!==-1||y.indexOf(A)!==-1}}},{"css-font-size-keywords":95}],101:[function(t,N,V){var y=t("unquote"),c=t("css-global-keywords"),A=t("css-system-font-keywords"),T=t("css-font-weight-keywords"),e=t("css-font-style-keywords"),a=t("css-font-stretch-keywords"),i=t("string-split-by"),n=t("./lib/util").isSize;N.exports=v;var r=v.cache={};function v(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(r[o])return r[o];if(o==="")throw new Error("Cannot parse an empty string.");if(A.indexOf(o)!==-1)return r[o]={system:o};for(var b={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},g=i(o,/\s+/),d;d=g.shift();){if(c.indexOf(d)!==-1)return["style","variant","weight","stretch"].forEach(function(m){b[m]=d}),r[o]=b;if(e.indexOf(d)!==-1){b.style=d;continue}if(d==="normal"||d==="small-caps"){b.variant=d;continue}if(a.indexOf(d)!==-1){b.stretch=d;continue}if(T.indexOf(d)!==-1){b.weight=d;continue}if(n(d)){var f=i(d,"/");if(b.size=f[0],f[1]!=null?b.lineHeight=s(f[1]):g[0]==="/"&&(g.shift(),b.lineHeight=s(g.shift())),!g.length)throw new Error("Missing required font-family.");return b.family=i(g.join(" "),/\s*,\s*/).map(y),r[o]=b}throw new Error("Unknown or unsupported font token: "+d)}throw new Error("Missing required font-size.")}function s(o){var b=parseFloat(o);return b.toString()===o?b:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(t,N,V){var y=t("pick-by-alias"),c=t("./lib/util").isSize,A=o(t("css-global-keywords")),T=o(t("css-system-font-keywords")),e=o(t("css-font-weight-keywords")),a=o(t("css-font-style-keywords")),i=o(t("css-font-stretch-keywords")),n={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},v={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};N.exports=function(g){if(g=y(g,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),g.system)return g.system&&s(g.system,T),g.system;if(s(g.style,a),s(g.variant,n),s(g.weight,e),s(g.stretch,i),g.size==null&&(g.size=v.size),typeof g.size=="number"&&(g.size+="px"),!c)throw Error("Bad size value `"+g.size+"`");g.family||(g.family=v.family),Array.isArray(g.family)&&(g.family.length||(g.family=[v.family]),g.family=g.family.map(function(f){return r[f]?f:'"'+f+'"'}).join(", "));var d=[];return d.push(g.style),g.variant!==g.style&&d.push(g.variant),g.weight!==g.variant&&g.weight!==g.style&&d.push(g.weight),g.stretch!==g.weight&&g.stretch!==g.variant&&g.stretch!==g.style&&d.push(g.stretch),d.push(g.size+(g.lineHeight==null||g.lineHeight==="normal"||g.lineHeight+""=="1"?"":"/"+g.lineHeight)),d.push(g.family),d.filter(Boolean).join(" ")};function s(b,g){if(b&&!g[b]&&!A[b])throw Error("Unknown keyword `"+b+"`");return b}function o(b){for(var g={},d=0;d<b.length;d++)g[b[d]]=1;return g}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(t,N,V){N.exports=["inherit","initial","unset"]},{}],104:[function(t,N,V){N.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(t,N,V){var y=t("type/value/is"),c=t("type/value/ensure"),A=t("type/plain-function/ensure"),T=t("es5-ext/object/copy"),e=t("es5-ext/object/normalize-options"),a=t("es5-ext/object/map"),i=Function.prototype.bind,n=Object.defineProperty,r=Object.prototype.hasOwnProperty,v;v=function(s,o,b){var g=c(o)&&A(o.value),d;return d=T(o),delete d.writable,delete d.value,d.get=function(){return!b.overwriteDefinition&&r.call(this,s)?g:(o.value=i.call(g,b.resolveContext?b.resolveContext(this):this),n(this,s,o),this[s])},d},N.exports=function(s){var o=e(arguments[1]);return y(o.resolveContext)&&A(o.resolveContext),a(s,function(b,g){return v(g,b,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(t,N,V){var y=t("type/value/is"),c=t("type/plain-function/is"),A=t("es5-ext/object/assign"),T=t("es5-ext/object/normalize-options"),e=t("es5-ext/string/#/contains"),a=N.exports=function(i,n){var r,v,s,o,b;return arguments.length<2||typeof i!="string"?(o=n,n=i,i=null):o=arguments[2],y(i)?(r=e.call(i,"c"),v=e.call(i,"e"),s=e.call(i,"w")):(r=s=!0,v=!1),b={value:n,configurable:r,enumerable:v,writable:s},o?A(T(o),b):b};a.gs=function(i,n,r){var v,s,o,b;return typeof i!="string"?(o=r,r=n,n=i,i=null):o=arguments[3],y(n)?c(n)?y(r)?c(r)||(o=r,r=void 0):r=void 0:(o=n,n=r=void 0):n=void 0,y(i)?(v=e.call(i,"c"),s=e.call(i,"e")):(v=!0,s=!1),b={get:n,set:r,configurable:v,enumerable:s},o?A(T(o),b):b}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(t,N,V){(function(y,c){c(typeof V=="object"&&typeof N<"u"?V:y.d3=y.d3||{})})(this,function(y){function c(U,H){return U<H?-1:U>H?1:U>=H?0:NaN}function A(U){return U.length===1&&(U=T(U)),{left:function(H,q,re,Z){for(re==null&&(re=0),Z==null&&(Z=H.length);re<Z;){var Q=re+Z>>>1;U(H[Q],q)<0?re=Q+1:Z=Q}return re},right:function(H,q,re,Z){for(re==null&&(re=0),Z==null&&(Z=H.length);re<Z;){var Q=re+Z>>>1;U(H[Q],q)>0?Z=Q:re=Q+1}return re}}}function T(U){return function(H,q){return c(U(H),q)}}var e=A(c),a=e.right,i=e.left;function n(U,H){H==null&&(H=r);for(var q=0,re=U.length-1,Z=U[0],Q=new Array(re<0?0:re);q<re;)Q[q]=H(Z,Z=U[++q]);return Q}function r(U,H){return[U,H]}function v(U,H,q){var re=U.length,Z=H.length,Q=new Array(re*Z),ie,oe,ne,le;for(q==null&&(q=r),ie=ne=0;ie<re;++ie)for(le=U[ie],oe=0;oe<Z;++oe,++ne)Q[ne]=q(le,H[oe]);return Q}function s(U,H){return H<U?-1:H>U?1:H>=U?0:NaN}function o(U){return U===null?NaN:+U}function b(U,H){var q=U.length,re=0,Z=-1,Q=0,ie,oe,ne=0;if(H==null)for(;++Z<q;)isNaN(ie=o(U[Z]))||(oe=ie-Q,Q+=oe/++re,ne+=oe*(ie-Q));else for(;++Z<q;)isNaN(ie=o(H(U[Z],Z,U)))||(oe=ie-Q,Q+=oe/++re,ne+=oe*(ie-Q));if(re>1)return ne/(re-1)}function g(U,H){var q=b(U,H);return q&&Math.sqrt(q)}function d(U,H){var q=U.length,re=-1,Z,Q,ie;if(H==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=ie=Z;++re<q;)(Z=U[re])!=null&&(Q>Z&&(Q=Z),ie<Z&&(ie=Z))}else for(;++re<q;)if((Z=H(U[re],re,U))!=null&&Z>=Z)for(Q=ie=Z;++re<q;)(Z=H(U[re],re,U))!=null&&(Q>Z&&(Q=Z),ie<Z&&(ie=Z));return[Q,ie]}var f=Array.prototype,m=f.slice,l=f.map;function x(U){return function(){return U}}function u(U){return U}function M(U,H,q){U=+U,H=+H,q=(Z=arguments.length)<2?(H=U,U=0,1):Z<3?1:+q;for(var re=-1,Z=Math.max(0,Math.ceil((H-U)/q))|0,Q=new Array(Z);++re<Z;)Q[re]=U+re*q;return Q}var w=Math.sqrt(50),p=Math.sqrt(10),_=Math.sqrt(2);function h(U,H,q){var re,Z=-1,Q,ie,oe;if(H=+H,U=+U,q=+q,U===H&&q>0)return[U];if((re=H<U)&&(Q=U,U=H,H=Q),(oe=L(U,H,q))===0||!isFinite(oe))return[];if(oe>0)for(U=Math.ceil(U/oe),H=Math.floor(H/oe),ie=new Array(Q=Math.ceil(H-U+1));++Z<Q;)ie[Z]=(U+Z)*oe;else for(U=Math.floor(U*oe),H=Math.ceil(H*oe),ie=new Array(Q=Math.ceil(U-H+1));++Z<Q;)ie[Z]=(U-Z)/oe;return re&&ie.reverse(),ie}function L(U,H,q){var re=(H-U)/Math.max(0,q),Z=Math.floor(Math.log(re)/Math.LN10),Q=re/Math.pow(10,Z);return Z>=0?(Q>=w?10:Q>=p?5:Q>=_?2:1)*Math.pow(10,Z):-Math.pow(10,-Z)/(Q>=w?10:Q>=p?5:Q>=_?2:1)}function E(U,H,q){var re=Math.abs(H-U)/Math.max(0,q),Z=Math.pow(10,Math.floor(Math.log(re)/Math.LN10)),Q=re/Z;return Q>=w?Z*=10:Q>=p?Z*=5:Q>=_&&(Z*=2),H<U?-Z:Z}function S(U){return Math.ceil(Math.log(U.length)/Math.LN2)+1}function P(){var U=u,H=d,q=S;function re(Z){var Q,ie=Z.length,oe,ne=new Array(ie);for(Q=0;Q<ie;++Q)ne[Q]=U(Z[Q],Q,Z);var le=H(ne),_e=le[0],fe=le[1],ye=q(ne,_e,fe);Array.isArray(ye)||(ye=E(_e,fe,ye),ye=M(Math.ceil(_e/ye)*ye,fe,ye));for(var xe=ye.length;ye[0]<=_e;)ye.shift(),--xe;for(;ye[xe-1]>fe;)ye.pop(),--xe;var me=new Array(xe+1),be;for(Q=0;Q<=xe;++Q)be=me[Q]=[],be.x0=Q>0?ye[Q-1]:_e,be.x1=Q<xe?ye[Q]:fe;for(Q=0;Q<ie;++Q)oe=ne[Q],_e<=oe&&oe<=fe&&me[a(ye,oe,0,xe)].push(Z[Q]);return me}return re.value=function(Z){return arguments.length?(U=typeof Z=="function"?Z:x(Z),re):U},re.domain=function(Z){return arguments.length?(H=typeof Z=="function"?Z:x([Z[0],Z[1]]),re):H},re.thresholds=function(Z){return arguments.length?(q=typeof Z=="function"?Z:Array.isArray(Z)?x(m.call(Z)):x(Z),re):q},re}function F(U,H,q){if(q==null&&(q=o),!!(re=U.length)){if((H=+H)<=0||re<2)return+q(U[0],0,U);if(H>=1)return+q(U[re-1],re-1,U);var re,Z=(re-1)*H,Q=Math.floor(Z),ie=+q(U[Q],Q,U),oe=+q(U[Q+1],Q+1,U);return ie+(oe-ie)*(Z-Q)}}function I(U,H,q){return U=l.call(U,o).sort(c),Math.ceil((q-H)/(2*(F(U,.75)-F(U,.25))*Math.pow(U.length,-1/3)))}function D(U,H,q){return Math.ceil((q-H)/(3.5*g(U)*Math.pow(U.length,-1/3)))}function R(U,H){var q=U.length,re=-1,Z,Q;if(H==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=U[re])!=null&&Z>Q&&(Q=Z)}else for(;++re<q;)if((Z=H(U[re],re,U))!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=H(U[re],re,U))!=null&&Z>Q&&(Q=Z);return Q}function O(U,H){var q=U.length,re=q,Z=-1,Q,ie=0;if(H==null)for(;++Z<q;)isNaN(Q=o(U[Z]))?--re:ie+=Q;else for(;++Z<q;)isNaN(Q=o(H(U[Z],Z,U)))?--re:ie+=Q;if(re)return ie/re}function z(U,H){var q=U.length,re=-1,Z,Q=[];if(H==null)for(;++re<q;)isNaN(Z=o(U[re]))||Q.push(Z);else for(;++re<q;)isNaN(Z=o(H(U[re],re,U)))||Q.push(Z);return F(Q.sort(c),.5)}function G(U){for(var H=U.length,q,re=-1,Z=0,Q,ie;++re<H;)Z+=U[re].length;for(Q=new Array(Z);--H>=0;)for(ie=U[H],q=ie.length;--q>=0;)Q[--Z]=ie[q];return Q}function Y(U,H){var q=U.length,re=-1,Z,Q;if(H==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=U[re])!=null&&Q>Z&&(Q=Z)}else for(;++re<q;)if((Z=H(U[re],re,U))!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=H(U[re],re,U))!=null&&Q>Z&&(Q=Z);return Q}function ee(U,H){for(var q=H.length,re=new Array(q);q--;)re[q]=U[H[q]];return re}function j(U,H){if(!!(q=U.length)){var q,re=0,Z=0,Q,ie=U[Z];for(H==null&&(H=c);++re<q;)(H(Q=U[re],ie)<0||H(ie,ie)!==0)&&(ie=Q,Z=re);if(H(ie,ie)===0)return Z}}function X(U,H,q){for(var re=(q==null?U.length:q)-(H=H==null?0:+H),Z,Q;re;)Q=Math.random()*re--|0,Z=U[re+H],U[re+H]=U[Q+H],U[Q+H]=Z;return U}function ae(U,H){var q=U.length,re=-1,Z,Q=0;if(H==null)for(;++re<q;)(Z=+U[re])&&(Q+=Z);else for(;++re<q;)(Z=+H(U[re],re,U))&&(Q+=Z);return Q}function he(U){if(!(Q=U.length))return[];for(var H=-1,q=Y(U,K),re=new Array(q);++H<q;)for(var Z=-1,Q,ie=re[H]=new Array(Q);++Z<Q;)ie[Z]=U[Z][H];return re}function K(U){return U.length}function J(){return he(arguments)}y.bisect=a,y.bisectRight=a,y.bisectLeft=i,y.ascending=c,y.bisector=A,y.cross=v,y.descending=s,y.deviation=g,y.extent=d,y.histogram=P,y.thresholdFreedmanDiaconis=I,y.thresholdScott=D,y.thresholdSturges=S,y.max=R,y.mean=O,y.median=z,y.merge=G,y.min=Y,y.pairs=n,y.permute=ee,y.quantile=F,y.range=M,y.scan=j,y.shuffle=X,y.sum=ae,y.ticks=h,y.tickIncrement=L,y.tickStep=E,y.transpose=he,y.variance=b,y.zip=J,Object.defineProperty(y,"__esModule",{value:!0})})},{}],108:[function(t,N,V){(function(y,c){c(typeof V=="object"&&typeof N<"u"?V:y.d3=y.d3||{})})(this,function(y){var c="$";function A(){}A.prototype=T.prototype={constructor:A,has:function(f){return c+f in this},get:function(f){return this[c+f]},set:function(f,m){return this[c+f]=m,this},remove:function(f){var m=c+f;return m in this&&delete this[m]},clear:function(){for(var f in this)f[0]===c&&delete this[f]},keys:function(){var f=[];for(var m in this)m[0]===c&&f.push(m.slice(1));return f},values:function(){var f=[];for(var m in this)m[0]===c&&f.push(this[m]);return f},entries:function(){var f=[];for(var m in this)m[0]===c&&f.push({key:m.slice(1),value:this[m]});return f},size:function(){var f=0;for(var m in this)m[0]===c&&++f;return f},empty:function(){for(var f in this)if(f[0]===c)return!1;return!0},each:function(f){for(var m in this)m[0]===c&&f(this[m],m.slice(1),this)}};function T(f,m){var l=new A;if(f instanceof A)f.each(function(p,_){l.set(_,p)});else if(Array.isArray(f)){var x=-1,u=f.length,M;if(m==null)for(;++x<u;)l.set(x,f[x]);else for(;++x<u;)l.set(m(M=f[x],x,f),M)}else if(f)for(var w in f)l.set(w,f[w]);return l}function e(){var f=[],m=[],l,x,u;function M(p,_,h,L){if(_>=f.length)return l!=null&&p.sort(l),x!=null?x(p):p;for(var E=-1,S=p.length,P=f[_++],F,I,D=T(),R,O=h();++E<S;)(R=D.get(F=P(I=p[E])+""))?R.push(I):D.set(F,[I]);return D.each(function(z,G){L(O,G,M(z,_,h,L))}),O}function w(p,_){if(++_>f.length)return p;var h,L=m[_-1];return x!=null&&_>=f.length?h=p.entries():(h=[],p.each(function(E,S){h.push({key:S,values:w(E,_)})})),L!=null?h.sort(function(E,S){return L(E.key,S.key)}):h}return u={object:function(p){return M(p,0,a,i)},map:function(p){return M(p,0,n,r)},entries:function(p){return w(M(p,0,n,r),0)},key:function(p){return f.push(p),u},sortKeys:function(p){return m[f.length-1]=p,u},sortValues:function(p){return l=p,u},rollup:function(p){return x=p,u}}}function a(){return{}}function i(f,m,l){f[m]=l}function n(){return T()}function r(f,m,l){f.set(m,l)}function v(){}var s=T.prototype;v.prototype=o.prototype={constructor:v,has:s.has,add:function(f){return f+="",this[c+f]=f,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};function o(f,m){var l=new v;if(f instanceof v)f.each(function(M){l.add(M)});else if(f){var x=-1,u=f.length;if(m==null)for(;++x<u;)l.add(f[x]);else for(;++x<u;)l.add(m(f[x],x,f))}return l}function b(f){var m=[];for(var l in f)m.push(l);return m}function g(f){var m=[];for(var l in f)m.push(f[l]);return m}function d(f){var m=[];for(var l in f)m.push({key:l,value:f[l]});return m}y.nest=e,y.set=o,y.map=T,y.keys=b,y.values=g,y.entries=d,Object.defineProperty(y,"__esModule",{value:!0})})},{}],109:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=y||self,c(y.d3=y.d3||{}))})(this,function(y){function c(Ie,Ve,dt){Ie.prototype=Ve.prototype=dt,dt.constructor=Ie}function A(Ie,Ve){var dt=Object.create(Ie.prototype);for(var Ft in Ve)dt[Ft]=Ve[Ft];return dt}function T(){}var e=.7,a=1/e,i="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),o=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),b=new RegExp("^rgba\\("+[i,i,i,n]+"\\)$"),g=new RegExp("^rgba\\("+[r,r,r,n]+"\\)$"),d=new RegExp("^hsl\\("+[n,r,r]+"\\)$"),f=new RegExp("^hsla\\("+[n,r,r,n]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c(T,M,{copy:function(Ie){return Object.assign(new this.constructor,this,Ie)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:x,formatRgb:u,toString:u});function l(){return this.rgb().formatHex()}function x(){return I(this).formatHsl()}function u(){return this.rgb().formatRgb()}function M(Ie){var Ve,dt;return Ie=(Ie+"").trim().toLowerCase(),(Ve=v.exec(Ie))?(dt=Ve[1].length,Ve=parseInt(Ve[1],16),dt===6?w(Ve):dt===3?new L(Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,(Ve&15)<<4|Ve&15,1):dt===8?p(Ve>>24&255,Ve>>16&255,Ve>>8&255,(Ve&255)/255):dt===4?p(Ve>>12&15|Ve>>8&240,Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,((Ve&15)<<4|Ve&15)/255):null):(Ve=s.exec(Ie))?new L(Ve[1],Ve[2],Ve[3],1):(Ve=o.exec(Ie))?new L(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,1):(Ve=b.exec(Ie))?p(Ve[1],Ve[2],Ve[3],Ve[4]):(Ve=g.exec(Ie))?p(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,Ve[4]):(Ve=d.exec(Ie))?F(Ve[1],Ve[2]/100,Ve[3]/100,1):(Ve=f.exec(Ie))?F(Ve[1],Ve[2]/100,Ve[3]/100,Ve[4]):m.hasOwnProperty(Ie)?w(m[Ie]):Ie==="transparent"?new L(NaN,NaN,NaN,0):null}function w(Ie){return new L(Ie>>16&255,Ie>>8&255,Ie&255,1)}function p(Ie,Ve,dt,Ft){return Ft<=0&&(Ie=Ve=dt=NaN),new L(Ie,Ve,dt,Ft)}function _(Ie){return Ie instanceof T||(Ie=M(Ie)),Ie?(Ie=Ie.rgb(),new L(Ie.r,Ie.g,Ie.b,Ie.opacity)):new L}function h(Ie,Ve,dt,Ft){return arguments.length===1?_(Ie):new L(Ie,Ve,dt,Ft==null?1:Ft)}function L(Ie,Ve,dt,Ft){this.r=+Ie,this.g=+Ve,this.b=+dt,this.opacity=+Ft}c(L,h,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatRgb:S,toString:S}));function E(){return"#"+P(this.r)+P(this.g)+P(this.b)}function S(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ie===1?")":", "+Ie+")")}function P(Ie){return Ie=Math.max(0,Math.min(255,Math.round(Ie)||0)),(Ie<16?"0":"")+Ie.toString(16)}function F(Ie,Ve,dt,Ft){return Ft<=0?Ie=Ve=dt=NaN:dt<=0||dt>=1?Ie=Ve=NaN:Ve<=0&&(Ie=NaN),new R(Ie,Ve,dt,Ft)}function I(Ie){if(Ie instanceof R)return new R(Ie.h,Ie.s,Ie.l,Ie.opacity);if(Ie instanceof T||(Ie=M(Ie)),!Ie)return new R;if(Ie instanceof R)return Ie;Ie=Ie.rgb();var Ve=Ie.r/255,dt=Ie.g/255,Ft=Ie.b/255,Qt=Math.min(Ve,dt,Ft),Ot=Math.max(Ve,dt,Ft),Ct=NaN,jt=Ot-Qt,Nt=(Ot+Qt)/2;return jt?(Ve===Ot?Ct=(dt-Ft)/jt+(dt<Ft)*6:dt===Ot?Ct=(Ft-Ve)/jt+2:Ct=(Ve-dt)/jt+4,jt/=Nt<.5?Ot+Qt:2-Ot-Qt,Ct*=60):jt=Nt>0&&Nt<1?0:Ct,new R(Ct,jt,Nt,Ie.opacity)}function D(Ie,Ve,dt,Ft){return arguments.length===1?I(Ie):new R(Ie,Ve,dt,Ft==null?1:Ft)}function R(Ie,Ve,dt,Ft){this.h=+Ie,this.s=+Ve,this.l=+dt,this.opacity=+Ft}c(R,D,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new R(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new R(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=this.h%360+(this.h<0)*360,Ve=isNaN(Ie)||isNaN(this.s)?0:this.s,dt=this.l,Ft=dt+(dt<.5?dt:1-dt)*Ve,Qt=2*dt-Ft;return new L(O(Ie>=240?Ie-240:Ie+120,Qt,Ft),O(Ie,Qt,Ft),O(Ie<120?Ie+240:Ie-120,Qt,Ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ie===1?")":", "+Ie+")")}}));function O(Ie,Ve,dt){return(Ie<60?Ve+(dt-Ve)*Ie/60:Ie<180?dt:Ie<240?Ve+(dt-Ve)*(240-Ie)/60:Ve)*255}var z=Math.PI/180,G=180/Math.PI,Y=18,ee=.96422,j=1,X=.82521,ae=4/29,he=6/29,K=3*he*he,J=he*he*he;function U(Ie){if(Ie instanceof re)return new re(Ie.l,Ie.a,Ie.b,Ie.opacity);if(Ie instanceof fe)return ye(Ie);Ie instanceof L||(Ie=_(Ie));var Ve=oe(Ie.r),dt=oe(Ie.g),Ft=oe(Ie.b),Qt=Z((.2225045*Ve+.7168786*dt+.0606169*Ft)/j),Ot,Ct;return Ve===dt&&dt===Ft?Ot=Ct=Qt:(Ot=Z((.4360747*Ve+.3850649*dt+.1430804*Ft)/ee),Ct=Z((.0139322*Ve+.0971045*dt+.7141733*Ft)/X)),new re(116*Qt-16,500*(Ot-Qt),200*(Qt-Ct),Ie.opacity)}function H(Ie,Ve){return new re(Ie,0,0,Ve==null?1:Ve)}function q(Ie,Ve,dt,Ft){return arguments.length===1?U(Ie):new re(Ie,Ve,dt,Ft==null?1:Ft)}function re(Ie,Ve,dt,Ft){this.l=+Ie,this.a=+Ve,this.b=+dt,this.opacity=+Ft}c(re,q,A(T,{brighter:function(Ie){return new re(this.l+Y*(Ie==null?1:Ie),this.a,this.b,this.opacity)},darker:function(Ie){return new re(this.l-Y*(Ie==null?1:Ie),this.a,this.b,this.opacity)},rgb:function(){var Ie=(this.l+16)/116,Ve=isNaN(this.a)?Ie:Ie+this.a/500,dt=isNaN(this.b)?Ie:Ie-this.b/200;return Ve=ee*Q(Ve),Ie=j*Q(Ie),dt=X*Q(dt),new L(ie(3.1338561*Ve-1.6168667*Ie-.4906146*dt),ie(-.9787684*Ve+1.9161415*Ie+.033454*dt),ie(.0719453*Ve-.2289914*Ie+1.4052427*dt),this.opacity)}}));function Z(Ie){return Ie>J?Math.pow(Ie,1/3):Ie/K+ae}function Q(Ie){return Ie>he?Ie*Ie*Ie:K*(Ie-ae)}function ie(Ie){return 255*(Ie<=.0031308?12.92*Ie:1.055*Math.pow(Ie,1/2.4)-.055)}function oe(Ie){return(Ie/=255)<=.04045?Ie/12.92:Math.pow((Ie+.055)/1.055,2.4)}function ne(Ie){if(Ie instanceof fe)return new fe(Ie.h,Ie.c,Ie.l,Ie.opacity);if(Ie instanceof re||(Ie=U(Ie)),Ie.a===0&&Ie.b===0)return new fe(NaN,0<Ie.l&&Ie.l<100?0:NaN,Ie.l,Ie.opacity);var Ve=Math.atan2(Ie.b,Ie.a)*G;return new fe(Ve<0?Ve+360:Ve,Math.sqrt(Ie.a*Ie.a+Ie.b*Ie.b),Ie.l,Ie.opacity)}function le(Ie,Ve,dt,Ft){return arguments.length===1?ne(Ie):new fe(dt,Ve,Ie,Ft==null?1:Ft)}function _e(Ie,Ve,dt,Ft){return arguments.length===1?ne(Ie):new fe(Ie,Ve,dt,Ft==null?1:Ft)}function fe(Ie,Ve,dt,Ft){this.h=+Ie,this.c=+Ve,this.l=+dt,this.opacity=+Ft}function ye(Ie){if(isNaN(Ie.h))return new re(Ie.l,0,0,Ie.opacity);var Ve=Ie.h*z;return new re(Ie.l,Math.cos(Ve)*Ie.c,Math.sin(Ve)*Ie.c,Ie.opacity)}c(fe,_e,A(T,{brighter:function(Ie){return new fe(this.h,this.c,this.l+Y*(Ie==null?1:Ie),this.opacity)},darker:function(Ie){return new fe(this.h,this.c,this.l-Y*(Ie==null?1:Ie),this.opacity)},rgb:function(){return ye(this).rgb()}}));var xe=-.14861,me=1.78277,be=-.29227,ke=-.90649,De=1.97294,He=De*ke,Ae=De*me,Le=me*be-ke*xe;function Ze(Ie){if(Ie instanceof ze)return new ze(Ie.h,Ie.s,Ie.l,Ie.opacity);Ie instanceof L||(Ie=_(Ie));var Ve=Ie.r/255,dt=Ie.g/255,Ft=Ie.b/255,Qt=(Le*Ft+He*Ve-Ae*dt)/(Le+He-Ae),Ot=Ft-Qt,Ct=(De*(dt-Qt)-be*Ot)/ke,jt=Math.sqrt(Ct*Ct+Ot*Ot)/(De*Qt*(1-Qt)),Nt=jt?Math.atan2(Ct,Ot)*G-120:NaN;return new ze(Nt<0?Nt+360:Nt,jt,Qt,Ie.opacity)}function We(Ie,Ve,dt,Ft){return arguments.length===1?Ze(Ie):new ze(Ie,Ve,dt,Ft==null?1:Ft)}function ze(Ie,Ve,dt,Ft){this.h=+Ie,this.s=+Ve,this.l=+dt,this.opacity=+Ft}c(ze,We,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new ze(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new ze(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=isNaN(this.h)?0:(this.h+120)*z,Ve=+this.l,dt=isNaN(this.s)?0:this.s*Ve*(1-Ve),Ft=Math.cos(Ie),Qt=Math.sin(Ie);return new L(255*(Ve+dt*(xe*Ft+me*Qt)),255*(Ve+dt*(be*Ft+ke*Qt)),255*(Ve+dt*(De*Ft)),this.opacity)}})),y.color=M,y.cubehelix=We,y.gray=H,y.hcl=_e,y.hsl=D,y.lab=q,y.lch=le,y.rgb=h,Object.defineProperty(y,"__esModule",{value:!0})})},{}],110:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=y||self,c(y.d3=y.d3||{}))})(this,function(y){var c={value:function(){}};function A(){for(var n=0,r=arguments.length,v={},s;n<r;++n){if(!(s=arguments[n]+"")||s in v||/[\s.]/.test(s))throw new Error("illegal type: "+s);v[s]=[]}return new T(v)}function T(n){this._=n}function e(n,r){return n.trim().split(/^|\s+/).map(function(v){var s="",o=v.indexOf(".");if(o>=0&&(s=v.slice(o+1),v=v.slice(0,o)),v&&!r.hasOwnProperty(v))throw new Error("unknown type: "+v);return{type:v,name:s}})}T.prototype=A.prototype={constructor:T,on:function(n,r){var v=this._,s=e(n+"",v),o,b=-1,g=s.length;if(arguments.length<2){for(;++b<g;)if((o=(n=s[b]).type)&&(o=a(v[o],n.name)))return o;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++b<g;)if(o=(n=s[b]).type)v[o]=i(v[o],n.name,r);else if(r==null)for(o in v)v[o]=i(v[o],n.name,null);return this},copy:function(){var n={},r=this._;for(var v in r)n[v]=r[v].slice();return new T(n)},call:function(n,r){if((o=arguments.length-2)>0)for(var v=new Array(o),s=0,o,b;s<o;++s)v[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(b=this._[n],s=0,o=b.length;s<o;++s)b[s].value.apply(r,v)},apply:function(n,r,v){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],o=0,b=s.length;o<b;++o)s[o].value.apply(r,v)}};function a(n,r){for(var v=0,s=n.length,o;v<s;++v)if((o=n[v]).name===r)return o.value}function i(n,r,v){for(var s=0,o=n.length;s<o;++s)if(n[s].name===r){n[s]=c,n=n.slice(0,s).concat(n.slice(s+1));break}return v!=null&&n.push({name:r,value:v}),n}y.dispatch=A,Object.defineProperty(y,"__esModule",{value:!0})})},{}],111:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):c(y.d3=y.d3||{},y.d3,y.d3,y.d3,y.d3)})(this,function(y,c,A,T,e){function a(_,h){var L;_==null&&(_=0),h==null&&(h=0);function E(){var S,P=L.length,F,I=0,D=0;for(S=0;S<P;++S)F=L[S],I+=F.x,D+=F.y;for(I=I/P-_,D=D/P-h,S=0;S<P;++S)F=L[S],F.x-=I,F.y-=D}return E.initialize=function(S){L=S},E.x=function(S){return arguments.length?(_=+S,E):_},E.y=function(S){return arguments.length?(h=+S,E):h},E}function i(_){return function(){return _}}function n(){return(Math.random()-.5)*1e-6}function r(_){return _.x+_.vx}function v(_){return _.y+_.vy}function s(_){var h,L,E=1,S=1;typeof _!="function"&&(_=i(_==null?1:+_));function P(){for(var D,R=h.length,O,z,G,Y,ee,j,X=0;X<S;++X)for(O=c.quadtree(h,r,v).visitAfter(F),D=0;D<R;++D)z=h[D],ee=L[z.index],j=ee*ee,G=z.x+z.vx,Y=z.y+z.vy,O.visit(ae);function ae(he,K,J,U,H){var q=he.data,re=he.r,Z=ee+re;if(q){if(q.index>z.index){var Q=G-q.x-q.vx,ie=Y-q.y-q.vy,oe=Q*Q+ie*ie;oe<Z*Z&&(Q===0&&(Q=n(),oe+=Q*Q),ie===0&&(ie=n(),oe+=ie*ie),oe=(Z-(oe=Math.sqrt(oe)))/oe*E,z.vx+=(Q*=oe)*(Z=(re*=re)/(j+re)),z.vy+=(ie*=oe)*Z,q.vx-=Q*(Z=1-Z),q.vy-=ie*Z)}return}return K>G+Z||U<G-Z||J>Y+Z||H<Y-Z}}function F(D){if(D.data)return D.r=L[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function I(){if(!!h){var D,R=h.length,O;for(L=new Array(R),D=0;D<R;++D)O=h[D],L[O.index]=+_(O,D,h)}}return P.initialize=function(D){h=D,I()},P.iterations=function(D){return arguments.length?(S=+D,P):S},P.strength=function(D){return arguments.length?(E=+D,P):E},P.radius=function(D){return arguments.length?(_=typeof D=="function"?D:i(+D),I(),P):_},P}function o(_){return _.index}function b(_,h){var L=_.get(h);if(!L)throw new Error("missing: "+h);return L}function g(_){var h=o,L=O,E,S=i(30),P,F,I,D,R=1;_==null&&(_=[]);function O(j){return 1/Math.min(I[j.source.index],I[j.target.index])}function z(j){for(var X=0,ae=_.length;X<R;++X)for(var he=0,K,J,U,H,q,re,Z;he<ae;++he)K=_[he],J=K.source,U=K.target,H=U.x+U.vx-J.x-J.vx||n(),q=U.y+U.vy-J.y-J.vy||n(),re=Math.sqrt(H*H+q*q),re=(re-P[he])/re*j*E[he],H*=re,q*=re,U.vx-=H*(Z=D[he]),U.vy-=q*Z,J.vx+=H*(Z=1-Z),J.vy+=q*Z}function G(){if(!!F){var j,X=F.length,ae=_.length,he=A.map(F,h),K;for(j=0,I=new Array(X);j<ae;++j)K=_[j],K.index=j,typeof K.source!="object"&&(K.source=b(he,K.source)),typeof K.target!="object"&&(K.target=b(he,K.target)),I[K.source.index]=(I[K.source.index]||0)+1,I[K.target.index]=(I[K.target.index]||0)+1;for(j=0,D=new Array(ae);j<ae;++j)K=_[j],D[j]=I[K.source.index]/(I[K.source.index]+I[K.target.index]);E=new Array(ae),Y(),P=new Array(ae),ee()}}function Y(){if(!!F)for(var j=0,X=_.length;j<X;++j)E[j]=+L(_[j],j,_)}function ee(){if(!!F)for(var j=0,X=_.length;j<X;++j)P[j]=+S(_[j],j,_)}return z.initialize=function(j){F=j,G()},z.links=function(j){return arguments.length?(_=j,G(),z):_},z.id=function(j){return arguments.length?(h=j,z):h},z.iterations=function(j){return arguments.length?(R=+j,z):R},z.strength=function(j){return arguments.length?(L=typeof j=="function"?j:i(+j),Y(),z):L},z.distance=function(j){return arguments.length?(S=typeof j=="function"?j:i(+j),ee(),z):S},z}function d(_){return _.x}function f(_){return _.y}var m=10,l=Math.PI*(3-Math.sqrt(5));function x(_){var h,L=1,E=.001,S=1-Math.pow(E,1/300),P=0,F=.6,I=A.map(),D=e.timer(O),R=T.dispatch("tick","end");_==null&&(_=[]);function O(){z(),R.call("tick",h),L<E&&(D.stop(),R.call("end",h))}function z(ee){var j,X=_.length,ae;ee===void 0&&(ee=1);for(var he=0;he<ee;++he)for(L+=(P-L)*S,I.each(function(K){K(L)}),j=0;j<X;++j)ae=_[j],ae.fx==null?ae.x+=ae.vx*=F:(ae.x=ae.fx,ae.vx=0),ae.fy==null?ae.y+=ae.vy*=F:(ae.y=ae.fy,ae.vy=0);return h}function G(){for(var ee=0,j=_.length,X;ee<j;++ee){if(X=_[ee],X.index=ee,X.fx!=null&&(X.x=X.fx),X.fy!=null&&(X.y=X.fy),isNaN(X.x)||isNaN(X.y)){var ae=m*Math.sqrt(ee),he=ee*l;X.x=ae*Math.cos(he),X.y=ae*Math.sin(he)}(isNaN(X.vx)||isNaN(X.vy))&&(X.vx=X.vy=0)}}function Y(ee){return ee.initialize&&ee.initialize(_),ee}return G(),h={tick:z,restart:function(){return D.restart(O),h},stop:function(){return D.stop(),h},nodes:function(ee){return arguments.length?(_=ee,G(),I.each(Y),h):_},alpha:function(ee){return arguments.length?(L=+ee,h):L},alphaMin:function(ee){return arguments.length?(E=+ee,h):E},alphaDecay:function(ee){return arguments.length?(S=+ee,h):+S},alphaTarget:function(ee){return arguments.length?(P=+ee,h):P},velocityDecay:function(ee){return arguments.length?(F=1-ee,h):1-F},force:function(ee,j){return arguments.length>1?(j==null?I.remove(ee):I.set(ee,Y(j)),h):I.get(ee)},find:function(ee,j,X){var ae=0,he=_.length,K,J,U,H,q;for(X==null?X=1/0:X*=X,ae=0;ae<he;++ae)H=_[ae],K=ee-H.x,J=j-H.y,U=K*K+J*J,U<X&&(q=H,X=U);return q},on:function(ee,j){return arguments.length>1?(R.on(ee,j),h):R.on(ee)}}}function u(){var _,h,L,E=i(-30),S,P=1,F=1/0,I=.81;function D(G){var Y,ee=_.length,j=c.quadtree(_,d,f).visitAfter(O);for(L=G,Y=0;Y<ee;++Y)h=_[Y],j.visit(z)}function R(){if(!!_){var G,Y=_.length,ee;for(S=new Array(Y),G=0;G<Y;++G)ee=_[G],S[ee.index]=+E(ee,G,_)}}function O(G){var Y=0,ee,j,X=0,ae,he,K;if(G.length){for(ae=he=K=0;K<4;++K)(ee=G[K])&&(j=Math.abs(ee.value))&&(Y+=ee.value,X+=j,ae+=j*ee.x,he+=j*ee.y);G.x=ae/X,G.y=he/X}else{ee=G,ee.x=ee.data.x,ee.y=ee.data.y;do Y+=S[ee.data.index];while(ee=ee.next)}G.value=Y}function z(G,Y,ee,j){if(!G.value)return!0;var X=G.x-h.x,ae=G.y-h.y,he=j-Y,K=X*X+ae*ae;if(he*he/I<K)return K<F&&(X===0&&(X=n(),K+=X*X),ae===0&&(ae=n(),K+=ae*ae),K<P&&(K=Math.sqrt(P*K)),h.vx+=X*G.value*L/K,h.vy+=ae*G.value*L/K),!0;if(G.length||K>=F)return;(G.data!==h||G.next)&&(X===0&&(X=n(),K+=X*X),ae===0&&(ae=n(),K+=ae*ae),K<P&&(K=Math.sqrt(P*K)));do G.data!==h&&(he=S[G.data.index]*L/K,h.vx+=X*he,h.vy+=ae*he);while(G=G.next)}return D.initialize=function(G){_=G,R()},D.strength=function(G){return arguments.length?(E=typeof G=="function"?G:i(+G),R(),D):E},D.distanceMin=function(G){return arguments.length?(P=G*G,D):Math.sqrt(P)},D.distanceMax=function(G){return arguments.length?(F=G*G,D):Math.sqrt(F)},D.theta=function(G){return arguments.length?(I=G*G,D):Math.sqrt(I)},D}function M(_,h,L){var E,S=i(.1),P,F;typeof _!="function"&&(_=i(+_)),h==null&&(h=0),L==null&&(L=0);function I(R){for(var O=0,z=E.length;O<z;++O){var G=E[O],Y=G.x-h||1e-6,ee=G.y-L||1e-6,j=Math.sqrt(Y*Y+ee*ee),X=(F[O]-j)*P[O]*R/j;G.vx+=Y*X,G.vy+=ee*X}}function D(){if(!!E){var R,O=E.length;for(P=new Array(O),F=new Array(O),R=0;R<O;++R)F[R]=+_(E[R],R,E),P[R]=isNaN(F[R])?0:+S(E[R],R,E)}}return I.initialize=function(R){E=R,D()},I.strength=function(R){return arguments.length?(S=typeof R=="function"?R:i(+R),D(),I):S},I.radius=function(R){return arguments.length?(_=typeof R=="function"?R:i(+R),D(),I):_},I.x=function(R){return arguments.length?(h=+R,I):h},I.y=function(R){return arguments.length?(L=+R,I):L},I}function w(_){var h=i(.1),L,E,S;typeof _!="function"&&(_=i(_==null?0:+_));function P(I){for(var D=0,R=L.length,O;D<R;++D)O=L[D],O.vx+=(S[D]-O.x)*E[D]*I}function F(){if(!!L){var I,D=L.length;for(E=new Array(D),S=new Array(D),I=0;I<D;++I)E[I]=isNaN(S[I]=+_(L[I],I,L))?0:+h(L[I],I,L)}}return P.initialize=function(I){L=I,F()},P.strength=function(I){return arguments.length?(h=typeof I=="function"?I:i(+I),F(),P):h},P.x=function(I){return arguments.length?(_=typeof I=="function"?I:i(+I),F(),P):_},P}function p(_){var h=i(.1),L,E,S;typeof _!="function"&&(_=i(_==null?0:+_));function P(I){for(var D=0,R=L.length,O;D<R;++D)O=L[D],O.vy+=(S[D]-O.y)*E[D]*I}function F(){if(!!L){var I,D=L.length;for(E=new Array(D),S=new Array(D),I=0;I<D;++I)E[I]=isNaN(S[I]=+_(L[I],I,L))?0:+h(L[I],I,L)}}return P.initialize=function(I){L=I,F()},P.strength=function(I){return arguments.length?(h=typeof I=="function"?I:i(+I),F(),P):h},P.y=function(I){return arguments.length?(_=typeof I=="function"?I:i(+I),F(),P):_},P}y.forceCenter=a,y.forceCollide=s,y.forceLink=g,y.forceManyBody=u,y.forceRadial=M,y.forceSimulation=x,y.forceX=w,y.forceY=p,Object.defineProperty(y,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=typeof globalThis<"u"?globalThis:y||self,c(y.d3=y.d3||{}))})(this,function(y){function c(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function A(_,h){if((L=(_=h?_.toExponential(h-1):_.toExponential()).indexOf("e"))<0)return null;var L,E=_.slice(0,L);return[E.length>1?E[0]+E.slice(2):E,+_.slice(L+1)]}function T(_){return _=A(Math.abs(_)),_?_[1]:NaN}function e(_,h){return function(L,E){for(var S=L.length,P=[],F=0,I=_[0],D=0;S>0&&I>0&&(D+I+1>E&&(I=Math.max(1,E-D)),P.push(L.substring(S-=I,S+I)),!((D+=I+1)>E));)I=_[F=(F+1)%_.length];return P.reverse().join(h)}}function a(_){return function(h){return h.replace(/[0-9]/g,function(L){return _[+L]})}}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(_){if(!(h=i.exec(_)))throw new Error("invalid format: "+_);var h;return new r({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}n.prototype=r.prototype;function r(_){this.fill=_.fill===void 0?" ":_.fill+"",this.align=_.align===void 0?">":_.align+"",this.sign=_.sign===void 0?"-":_.sign+"",this.symbol=_.symbol===void 0?"":_.symbol+"",this.zero=!!_.zero,this.width=_.width===void 0?void 0:+_.width,this.comma=!!_.comma,this.precision=_.precision===void 0?void 0:+_.precision,this.trim=!!_.trim,this.type=_.type===void 0?"":_.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v(_){e:for(var h=_.length,L=1,E=-1,S;L<h;++L)switch(_[L]){case".":E=S=L;break;case"0":E===0&&(E=L),S=L;break;default:if(!+_[L])break e;E>0&&(E=0);break}return E>0?_.slice(0,E)+_.slice(S+1):_}var s;function o(_,h){var L=A(_,h);if(!L)return _+"";var E=L[0],S=L[1],P=S-(s=Math.max(-8,Math.min(8,Math.floor(S/3)))*3)+1,F=E.length;return P===F?E:P>F?E+new Array(P-F+1).join("0"):P>0?E.slice(0,P)+"."+E.slice(P):"0."+new Array(1-P).join("0")+A(_,Math.max(0,h+P-1))[0]}function b(_,h){var L=A(_,h);if(!L)return _+"";var E=L[0],S=L[1];return S<0?"0."+new Array(-S).join("0")+E:E.length>S+1?E.slice(0,S+1)+"."+E.slice(S+1):E+new Array(S-E.length+2).join("0")}var g={"%":function(_,h){return(_*100).toFixed(h)},b:function(_){return Math.round(_).toString(2)},c:function(_){return _+""},d:c,e:function(_,h){return _.toExponential(h)},f:function(_,h){return _.toFixed(h)},g:function(_,h){return _.toPrecision(h)},o:function(_){return Math.round(_).toString(8)},p:function(_,h){return b(_*100,h)},r:b,s:o,X:function(_){return Math.round(_).toString(16).toUpperCase()},x:function(_){return Math.round(_).toString(16)}};function d(_){return _}var f=Array.prototype.map,m=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(_){var h=_.grouping===void 0||_.thousands===void 0?d:e(f.call(_.grouping,Number),_.thousands+""),L=_.currency===void 0?"":_.currency[0]+"",E=_.currency===void 0?"":_.currency[1]+"",S=_.decimal===void 0?".":_.decimal+"",P=_.numerals===void 0?d:a(f.call(_.numerals,String)),F=_.percent===void 0?"%":_.percent+"",I=_.minus===void 0?"-":_.minus+"",D=_.nan===void 0?"NaN":_.nan+"";function R(z){z=n(z);var G=z.fill,Y=z.align,ee=z.sign,j=z.symbol,X=z.zero,ae=z.width,he=z.comma,K=z.precision,J=z.trim,U=z.type;U==="n"?(he=!0,U="g"):g[U]||(K===void 0&&(K=12),J=!0,U="g"),(X||G==="0"&&Y==="=")&&(X=!0,G="0",Y="=");var H=j==="$"?L:j==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",q=j==="$"?E:/[%p]/.test(U)?F:"",re=g[U],Z=/[defgprs%]/.test(U);K=K===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function Q(ie){var oe=H,ne=q,le,_e,fe;if(U==="c")ne=re(ie)+ne,ie="";else{ie=+ie;var ye=ie<0||1/ie<0;if(ie=isNaN(ie)?D:re(Math.abs(ie),K),J&&(ie=v(ie)),ye&&+ie==0&&ee!=="+"&&(ye=!1),oe=(ye?ee==="("?ee:I:ee==="-"||ee==="("?"":ee)+oe,ne=(U==="s"?m[8+s/3]:"")+ne+(ye&&ee==="("?")":""),Z){for(le=-1,_e=ie.length;++le<_e;)if(fe=ie.charCodeAt(le),48>fe||fe>57){ne=(fe===46?S+ie.slice(le+1):ie.slice(le))+ne,ie=ie.slice(0,le);break}}}he&&!X&&(ie=h(ie,1/0));var xe=oe.length+ie.length+ne.length,me=xe<ae?new Array(ae-xe+1).join(G):"";switch(he&&X&&(ie=h(me+ie,me.length?ae-ne.length:1/0),me=""),Y){case"<":ie=oe+ie+ne+me;break;case"=":ie=oe+me+ie+ne;break;case"^":ie=me.slice(0,xe=me.length>>1)+oe+ie+ne+me.slice(xe);break;default:ie=me+oe+ie+ne;break}return P(ie)}return Q.toString=function(){return z+""},Q}function O(z,G){var Y=R((z=n(z),z.type="f",z)),ee=Math.max(-8,Math.min(8,Math.floor(T(G)/3)))*3,j=Math.pow(10,-ee),X=m[8+ee/3];return function(ae){return Y(j*ae)+X}}return{format:R,formatPrefix:O}}var x;u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function u(_){return x=l(_),y.format=x.format,y.formatPrefix=x.formatPrefix,x}function M(_){return Math.max(0,-T(Math.abs(_)))}function w(_,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(T(h)/3)))*3-T(Math.abs(_)))}function p(_,h){return _=Math.abs(_),h=Math.abs(h)-_,Math.max(0,T(h)-T(_))+1}y.FormatSpecifier=r,y.formatDefaultLocale=u,y.formatLocale=l,y.formatSpecifier=n,y.precisionFixed=M,y.precisionPrefix=w,y.precisionRound=p,Object.defineProperty(y,"__esModule",{value:!0})})},{}],113:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V,t("d3-geo"),t("d3-array")):c(y.d3=y.d3||{},y.d3,y.d3)})(this,function(y,c,A){var T=Math.abs,e=Math.atan,a=Math.atan2,i=Math.cos,n=Math.exp,r=Math.floor,v=Math.log,s=Math.max,o=Math.min,b=Math.pow,g=Math.round,d=Math.sign||function(Oe){return Oe>0?1:Oe<0?-1:0},f=Math.sin,m=Math.tan,l=1e-6,x=1e-12,u=Math.PI,M=u/2,w=u/4,p=Math.SQRT1_2,_=D(2),h=D(u),L=u*2,E=180/u,S=u/180;function P(Oe){return Oe?Oe/Math.sin(Oe):1}function F(Oe){return Oe>1?M:Oe<-1?-M:Math.asin(Oe)}function I(Oe){return Oe>1?0:Oe<-1?u:Math.acos(Oe)}function D(Oe){return Oe>0?Math.sqrt(Oe):0}function R(Oe){return Oe=n(2*Oe),(Oe-1)/(Oe+1)}function O(Oe){return(n(Oe)-n(-Oe))/2}function z(Oe){return(n(Oe)+n(-Oe))/2}function G(Oe){return v(Oe+D(Oe*Oe+1))}function Y(Oe){return v(Oe+D(Oe*Oe-1))}function ee(Oe){var je=m(Oe/2),nt=2*v(i(Oe/2))/(je*je);function ut(Tt,_t){var kt=i(Tt),vr=i(_t),yr=f(_t),fr=vr*kt,Tr=-((1-fr?v((1+fr)/2)/(1-fr):-.5)+nt/(1+fr));return[Tr*vr*f(Tt),Tr*yr]}return ut.invert=function(Tt,_t){var kt=D(Tt*Tt+_t*_t),vr=-Oe/2,yr=50,fr;if(!kt)return[0,0];do{var Tr=vr/2,zr=i(Tr),Qr=f(Tr),on=Qr/zr,En=-v(T(zr));vr-=fr=(2/on*En-nt*on-kt)/(-En/(Qr*Qr)+1-nt/(2*zr*zr))*(zr<0?.7:1)}while(T(fr)>l&&--yr>0);var Nn=f(vr);return[a(Tt*Nn,kt*i(vr)),F(_t*Nn/kt)]},ut}function j(){var Oe=M,je=c.geoProjectionMutator(ee),nt=je(Oe);return nt.radius=function(ut){return arguments.length?je(Oe=ut*S):Oe*E},nt.scale(179.976).clipAngle(147)}function X(Oe,je){var nt=i(je),ut=P(I(nt*i(Oe/=2)));return[2*nt*f(Oe)*ut,f(je)*ut]}X.invert=function(Oe,je){if(!(Oe*Oe+4*je*je>u*u+l)){var nt=Oe,ut=je,Tt=25;do{var _t=f(nt),kt=f(nt/2),vr=i(nt/2),yr=f(ut),fr=i(ut),Tr=f(2*ut),zr=yr*yr,Qr=fr*fr,on=kt*kt,En=1-Qr*vr*vr,Nn=En?I(fr*vr)*D(Jn=1/En):Jn=0,Jn,Ta=2*Nn*fr*kt-Oe,Ea=Nn*yr-je,ni=Jn*(Qr*on+Nn*fr*vr*zr),qa=Jn*(.5*_t*Tr-Nn*2*yr*kt),ai=Jn*.25*(Tr*kt-Nn*yr*Qr*_t),Ti=Jn*(zr*vr+Nn*on*fr),Yr=qa*ai-Ti*ni;if(!Yr)break;var et=(Ea*qa-Ta*Ti)/Yr,Jt=(Ta*ai-Ea*ni)/Yr;nt-=et,ut-=Jt}while((T(et)>l||T(Jt)>l)&&--Tt>0);return[nt,ut]}};function ae(){return c.geoProjection(X).scale(152.63)}function he(Oe){var je=f(Oe),nt=i(Oe),ut=Oe>=0?1:-1,Tt=m(ut*Oe),_t=(1+je-nt)/2;function kt(vr,yr){var fr=i(yr),Tr=i(vr/=2);return[(1+fr)*f(vr),(ut*yr>-a(Tr,Tt)-.001?0:-ut*10)+_t+f(yr)*nt-(1+fr)*je*Tr]}return kt.invert=function(vr,yr){var fr=0,Tr=0,zr=50;do{var Qr=i(fr),on=f(fr),En=i(Tr),Nn=f(Tr),Jn=1+En,Ta=Jn*on-vr,Ea=_t+Nn*nt-Jn*je*Qr-yr,ni=Jn*Qr/2,qa=-on*Nn,ai=je*Jn*on/2,Ti=nt*En+je*Qr*Nn,Yr=qa*ai-Ti*ni,et=(Ea*qa-Ta*Ti)/Yr/2,Jt=(Ta*ai-Ea*ni)/Yr;T(Jt)>2&&(Jt/=2),fr-=et,Tr-=Jt}while((T(et)>l||T(Jt)>l)&&--zr>0);return ut*Tr>-a(i(fr),Tt)-.001?[fr*2,Tr]:null},kt}function K(){var Oe=20*S,je=Oe>=0?1:-1,nt=m(je*Oe),ut=c.geoProjectionMutator(he),Tt=ut(Oe),_t=Tt.stream;return Tt.parallel=function(kt){return arguments.length?(nt=m((je=(Oe=kt*S)>=0?1:-1)*Oe),ut(Oe)):Oe*E},Tt.stream=function(kt){var vr=Tt.rotate(),yr=_t(kt),fr=(Tt.rotate([0,0]),_t(kt)),Tr=Tt.precision();return Tt.rotate(vr),yr.sphere=function(){fr.polygonStart(),fr.lineStart();for(var zr=je*-180;je*zr<180;zr+=je*90)fr.point(zr,je*90);if(Oe)for(;je*(zr-=3*je*Tr)>=-180;)fr.point(zr,je*-a(i(zr*S/2),nt)*E);fr.lineEnd(),fr.polygonEnd()},yr},Tt.scale(218.695).center([0,28.0974])}function J(Oe,je){var nt=m(je/2),ut=D(1-nt*nt),Tt=1+ut*i(Oe/=2),_t=f(Oe)*ut/Tt,kt=nt/Tt,vr=_t*_t,yr=kt*kt;return[4/3*_t*(3+vr-3*yr),4/3*kt*(3+3*vr-yr)]}J.invert=function(Oe,je){if(Oe*=3/8,je*=3/8,!Oe&&T(je)>1)return null;var nt=Oe*Oe,ut=je*je,Tt=1+nt+ut,_t=D((Tt-D(Tt*Tt-4*je*je))/2),kt=F(_t)/3,vr=_t?Y(T(je/_t))/3:G(T(Oe))/3,yr=i(kt),fr=z(vr),Tr=fr*fr-yr*yr;return[d(Oe)*2*a(O(vr)*yr,.25-Tr),d(je)*2*a(fr*f(kt),.25+Tr)]};function U(){return c.geoProjection(J).scale(66.1603)}var H=D(8),q=v(1+_);function re(Oe,je){var nt=T(je);return nt<w?[Oe,v(m(w+je/2))]:[Oe*i(nt)*(2*_-1/f(nt)),d(je)*(2*_*(nt-w)-v(m(nt/2)))]}re.invert=function(Oe,je){if((_t=T(je))<q)return[Oe,2*e(n(je))-M];var nt=w,ut=25,Tt,_t;do{var kt=i(nt/2),vr=m(nt/2);nt-=Tt=(H*(nt-w)-v(vr)-_t)/(H-kt*kt/(2*vr))}while(T(Tt)>x&&--ut>0);return[Oe/(i(nt)*(H-1/f(nt))),d(je)*nt]};function Z(){return c.geoProjection(re).scale(112.314)}function Q(Oe){var je=2*u/Oe;function nt(ut,Tt){var _t=c.geoAzimuthalEquidistantRaw(ut,Tt);if(T(ut)>M){var kt=a(_t[1],_t[0]),vr=D(_t[0]*_t[0]+_t[1]*_t[1]),yr=je*g((kt-M)/je)+M,fr=a(f(kt-=yr),2-i(kt));kt=yr+F(u/vr*f(fr))-fr,_t[0]=vr*i(kt),_t[1]=vr*f(kt)}return _t}return nt.invert=function(ut,Tt){var _t=D(ut*ut+Tt*Tt);if(_t>M){var kt=a(Tt,ut),vr=je*g((kt-M)/je)+M,yr=kt>vr?-1:1,fr=_t*i(vr-kt),Tr=1/m(yr*I((fr-u)/D(u*(u-2*fr)+_t*_t)));kt=vr+2*e((Tr+yr*D(Tr*Tr-3))/3),ut=_t*i(kt),Tt=_t*f(kt)}return c.geoAzimuthalEquidistantRaw.invert(ut,Tt)},nt}function ie(){var Oe=5,je=c.geoProjectionMutator(Q),nt=je(Oe),ut=nt.stream,Tt=.01,_t=-i(Tt*S),kt=f(Tt*S);return nt.lobes=function(vr){return arguments.length?je(Oe=+vr):Oe},nt.stream=function(vr){var yr=nt.rotate(),fr=ut(vr),Tr=(nt.rotate([0,0]),ut(vr));return nt.rotate(yr),fr.sphere=function(){Tr.polygonStart(),Tr.lineStart();for(var zr=0,Qr=360/Oe,on=2*u/Oe,En=90-180/Oe,Nn=M;zr<Oe;++zr,En-=Qr,Nn-=on)Tr.point(a(kt*i(Nn),_t)*E,F(kt*f(Nn))*E),En<-90?(Tr.point(-90,-180-En-Tt),Tr.point(-90,-180-En+Tt)):(Tr.point(90,En+Tt),Tr.point(90,En-Tt));Tr.lineEnd(),Tr.polygonEnd()},fr},nt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function oe(Oe,je){if(arguments.length<2&&(je=Oe),je===1)return c.geoAzimuthalEqualAreaRaw;if(je===1/0)return ne;function nt(ut,Tt){var _t=c.geoAzimuthalEqualAreaRaw(ut/je,Tt);return _t[0]*=Oe,_t}return nt.invert=function(ut,Tt){var _t=c.geoAzimuthalEqualAreaRaw.invert(ut/Oe,Tt);return _t[0]*=je,_t},nt}function ne(Oe,je){return[Oe*i(je)/i(je/=2),2*f(je)]}ne.invert=function(Oe,je){var nt=2*F(je/2);return[Oe*i(nt/2)/i(nt),nt]};function le(){var Oe=2,je=c.geoProjectionMutator(oe),nt=je(Oe);return nt.coefficient=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(169.529)}function _e(Oe,je,nt){var ut=100,Tt,_t,kt;nt=nt===void 0?0:+nt,je=+je;do _t=Oe(nt),kt=Oe(nt+l),_t===kt&&(kt=_t+l),nt-=Tt=-1*l*(_t-je)/(_t-kt);while(ut-- >0&&T(Tt)>l);return ut<0?NaN:nt}function fe(Oe,je,nt){return je===void 0&&(je=40),nt===void 0&&(nt=x),function(ut,Tt,_t,kt){var vr,yr,fr;_t=_t===void 0?0:+_t,kt=kt===void 0?0:+kt;for(var Tr=0;Tr<je;Tr++){var zr=Oe(_t,kt),Qr=zr[0]-ut,on=zr[1]-Tt;if(T(Qr)<nt&&T(on)<nt)break;var En=Qr*Qr+on*on;if(En>vr){_t-=yr/=2,kt-=fr/=2;continue}vr=En;var Nn=(_t>0?-1:1)*nt,Jn=(kt>0?-1:1)*nt,Ta=Oe(_t+Nn,kt),Ea=Oe(_t,kt+Jn),ni=(Ta[0]-zr[0])/Nn,qa=(Ta[1]-zr[1])/Nn,ai=(Ea[0]-zr[0])/Jn,Ti=(Ea[1]-zr[1])/Jn,Yr=Ti*ni-qa*ai,et=(T(Yr)<.5?.5:1)/Yr;if(yr=(on*ai-Qr*Ti)*et,fr=(Qr*qa-on*ni)*et,_t+=yr,kt+=fr,T(yr)<nt&&T(fr)<nt)break}return[_t,kt]}}function ye(){var Oe=oe(1.68,2),je=1.4,nt=12;function ut(Tt,_t){if(Tt+_t<-je){var kt=(Tt-_t+1.6)*(Tt+_t+je)/8;Tt+=kt,_t-=.8*kt*f(_t+u/2)}var vr=Oe(Tt,_t),yr=(1-i(Tt*_t))/nt;return vr[1]<0&&(vr[0]*=1+yr),vr[1]>0&&(vr[1]*=1+yr/1.5*vr[0]*vr[0]),vr}return ut.invert=fe(ut),ut}function xe(){return c.geoProjection(ye()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function me(Oe,je){var nt=Oe*f(je),ut=30,Tt;do je-=Tt=(je+f(je)-nt)/(1+i(je));while(T(Tt)>l&&--ut>0);return je/2}function be(Oe,je,nt){function ut(Tt,_t){return[Oe*Tt*i(_t=me(nt,_t)),je*f(_t)]}return ut.invert=function(Tt,_t){return _t=F(_t/je),[Tt/(Oe*i(_t)),F((2*_t+f(2*_t))/nt)]},ut}var ke=be(_/M,_,u);function De(){return c.geoProjection(ke).scale(169.529)}var He=2.00276,Ae=1.11072;function Le(Oe,je){var nt=me(u,je);return[He*Oe/(1/i(je)+Ae/i(nt)),(je+_*f(nt))/He]}Le.invert=function(Oe,je){var nt=He*je,ut=je<0?-w:w,Tt=25,_t,kt;do kt=nt-_*f(ut),ut-=_t=(f(2*ut)+2*ut-u*f(kt))/(2*i(2*ut)+2+u*i(kt)*_*i(ut));while(T(_t)>l&&--Tt>0);return kt=nt-_*f(ut),[Oe*(1/i(kt)+Ae/i(ut))/He,kt]};function Ze(){return c.geoProjection(Le).scale(160.857)}function We(Oe){var je=0,nt=c.geoProjectionMutator(Oe),ut=nt(je);return ut.parallel=function(Tt){return arguments.length?nt(je=Tt*S):je*E},ut}function ze(Oe,je){return[Oe*i(je),je]}ze.invert=function(Oe,je){return[Oe/i(je),je]};function Ie(){return c.geoProjection(ze).scale(152.63)}function Ve(Oe){if(!Oe)return ze;var je=1/m(Oe);function nt(ut,Tt){var _t=je+Oe-Tt,kt=_t&&ut*i(Tt)/_t;return[_t*f(kt),je-_t*i(kt)]}return nt.invert=function(ut,Tt){var _t=D(ut*ut+(Tt=je-Tt)*Tt),kt=je+Oe-_t;return[_t/i(kt)*a(ut,Tt),kt]},nt}function dt(){return We(Ve).scale(123.082).center([0,26.1441]).parallel(45)}function Ft(Oe){function je(nt,ut){var Tt=M-ut,_t=Tt&&nt*Oe*f(Tt)/Tt;return[Tt*f(_t)/Oe,M-Tt*i(_t)]}return je.invert=function(nt,ut){var Tt=nt*Oe,_t=M-ut,kt=D(Tt*Tt+_t*_t),vr=a(Tt,_t);return[(kt?kt/f(kt):1)*vr/Oe,M-kt]},je}function Qt(){var Oe=.5,je=c.geoProjectionMutator(Ft),nt=je(Oe);return nt.fraction=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(158.837)}var Ot=be(1,4/u,u);function Ct(){return c.geoProjection(Ot).scale(152.63)}function jt(Oe,je,nt,ut,Tt,_t){var kt=i(_t),vr;if(T(Oe)>1||T(_t)>1)vr=I(nt*Tt+je*ut*kt);else{var yr=f(Oe/2),fr=f(_t/2);vr=2*F(D(yr*yr+je*ut*fr*fr))}return T(vr)>l?[vr,a(ut*f(_t),je*Tt-nt*ut*kt)]:[0,0]}function Nt(Oe,je,nt){return I((Oe*Oe+je*je-nt*nt)/(2*Oe*je))}function Lt(Oe){return Oe-2*u*r((Oe+u)/(2*u))}function Xe(Oe,je,nt){for(var ut=[[Oe[0],Oe[1],f(Oe[1]),i(Oe[1])],[je[0],je[1],f(je[1]),i(je[1])],[nt[0],nt[1],f(nt[1]),i(nt[1])]],Tt=ut[2],_t,kt=0;kt<3;++kt,Tt=_t)_t=ut[kt],Tt.v=jt(_t[1]-Tt[1],Tt[3],Tt[2],_t[3],_t[2],_t[0]-Tt[0]),Tt.point=[0,0];var vr=Nt(ut[0].v[0],ut[2].v[0],ut[1].v[0]),yr=Nt(ut[0].v[0],ut[1].v[0],ut[2].v[0]),fr=u-vr;ut[2].point[1]=0,ut[0].point[0]=-(ut[1].point[0]=ut[0].v[0]/2);var Tr=[ut[2].point[0]=ut[0].point[0]+ut[2].v[0]*i(vr),2*(ut[0].point[1]=ut[1].point[1]=ut[2].v[0]*f(vr))];function zr(Qr,on){var En=f(on),Nn=i(on),Jn=new Array(3),Ta;for(Ta=0;Ta<3;++Ta){var Ea=ut[Ta];if(Jn[Ta]=jt(on-Ea[1],Ea[3],Ea[2],Nn,En,Qr-Ea[0]),!Jn[Ta][0])return Ea.point;Jn[Ta][1]=Lt(Jn[Ta][1]-Ea.v[1])}var ni=Tr.slice();for(Ta=0;Ta<3;++Ta){var qa=Ta==2?0:Ta+1,ai=Nt(ut[Ta].v[0],Jn[Ta][0],Jn[qa][0]);Jn[Ta][1]<0&&(ai=-ai),Ta?Ta==1?(ai=yr-ai,ni[0]-=Jn[Ta][0]*i(ai),ni[1]-=Jn[Ta][0]*f(ai)):(ai=fr-ai,ni[0]+=Jn[Ta][0]*i(ai),ni[1]+=Jn[Ta][0]*f(ai)):(ni[0]+=Jn[Ta][0]*i(ai),ni[1]-=Jn[Ta][0]*f(ai))}return ni[0]/=3,ni[1]/=3,ni}return zr}function it(Oe){return Oe[0]*=S,Oe[1]*=S,Oe}function Ye(){return Ee([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ee(Oe,je,nt){var ut=c.geoCentroid({type:"MultiPoint",coordinates:[Oe,je,nt]}),Tt=[-ut[0],-ut[1]],_t=c.geoRotation(Tt),kt=Xe(it(_t(Oe)),it(_t(je)),it(_t(nt)));kt.invert=fe(kt);var vr=c.geoProjection(kt).rotate(Tt),yr=vr.center;return delete vr.rotate,vr.center=function(fr){return arguments.length?yr(_t(fr)):_t.invert(yr())},vr.clipAngle(90)}function Ge(Oe,je){var nt=D(1-f(je));return[2/h*Oe*nt,h*(1-nt)]}Ge.invert=function(Oe,je){var nt=(nt=je/h-1)*nt;return[nt>0?Oe*D(u/nt)/2:0,F(1-nt)]};function Ke(){return c.geoProjection(Ge).scale(95.6464).center([0,30])}function qe(Oe){var je=m(Oe);function nt(ut,Tt){return[ut,(ut?ut/f(ut):1)*(f(Tt)*i(ut)-je*i(Tt))]}return nt.invert=je?function(ut,Tt){ut&&(Tt*=f(ut)/ut);var _t=i(ut);return[ut,2*a(D(_t*_t+je*je-Tt*Tt)-_t,je-Tt)]}:function(ut,Tt){return[ut,F(ut?Tt*m(ut)/ut:Tt)]},nt}function At(){return We(qe).scale(249.828).clipAngle(90)}var mt=D(3);function Mt(Oe,je){return[mt*Oe*(2*i(2*je/3)-1)/h,mt*h*f(je/3)]}Mt.invert=function(Oe,je){var nt=3*F(je/(mt*h));return[h*Oe/(mt*(2*i(2*nt/3)-1)),nt]};function Gt(){return c.geoProjection(Mt).scale(156.19)}function zt(Oe){var je=i(Oe);function nt(ut,Tt){return[ut*je,f(Tt)/je]}return nt.invert=function(ut,Tt){return[ut/je,F(Tt*je)]},nt}function Ht(){return We(zt).parallel(38.58).scale(195.044)}function Zt(Oe){var je=i(Oe);function nt(ut,Tt){return[ut*je,(1+je)*m(Tt/2)]}return nt.invert=function(ut,Tt){return[ut/je,e(Tt/(1+je))*2]},nt}function Wt(){return We(Zt).scale(124.75)}function sr(Oe,je){var nt=D(8/(3*u));return[nt*Oe*(1-T(je)/u),nt*je]}sr.invert=function(Oe,je){var nt=D(8/(3*u)),ut=je/nt;return[Oe/(nt*(1-T(ut)/u)),ut]};function Gr(){return c.geoProjection(sr).scale(165.664)}function cn(Oe,je){var nt=D(4-3*f(T(je)));return[2/D(6*u)*Oe*nt,d(je)*D(2*u/3)*(2-nt)]}cn.invert=function(Oe,je){var nt=2-T(je)/D(2*u/3);return[Oe*D(6*u)/(2*nt),d(je)*F((4-nt*nt)/3)]};function qr(){return c.geoProjection(cn).scale(165.664)}function st(Oe,je){var nt=D(u*(4+u));return[2/nt*Oe*(1+D(1-4*je*je/(u*u))),4/nt*je]}st.invert=function(Oe,je){var nt=D(u*(4+u))/2;return[Oe*nt/(1+D(1-je*je*(4+u)/(4*u))),je*nt/2]};function rr(){return c.geoProjection(st).scale(180.739)}function $t(Oe,je){var nt=(2+M)*f(je);je/=2;for(var ut=0,Tt=1/0;ut<10&&T(Tt)>l;ut++){var _t=i(je);je-=Tt=(je+f(je)*(_t+2)-nt)/(2*_t*(1+_t))}return[2/D(u*(4+u))*Oe*(1+i(je)),2*D(u/(4+u))*f(je)]}$t.invert=function(Oe,je){var nt=je*D((4+u)/u)/2,ut=F(nt),Tt=i(ut);return[Oe/(2/D(u*(4+u))*(1+Tt)),F((ut+nt*(Tt+2))/(2+M))]};function hr(){return c.geoProjection($t).scale(180.739)}function Sr(Oe,je){return[Oe*(1+i(je))/D(2+u),2*je/D(2+u)]}Sr.invert=function(Oe,je){var nt=D(2+u),ut=je*nt/2;return[nt*Oe/(1+i(ut)),ut]};function tt(){return c.geoProjection(Sr).scale(173.044)}function Qe(Oe,je){for(var nt=(1+M)*f(je),ut=0,Tt=1/0;ut<10&&T(Tt)>l;ut++)je-=Tt=(je+f(je)-nt)/(1+i(je));return nt=D(2+u),[Oe*(1+i(je))/nt,2*je/nt]}Qe.invert=function(Oe,je){var nt=1+M,ut=D(nt/2);return[Oe*2*ut/(1+i(je*=ut)),F((je+f(je))/nt)]};function lt(){return c.geoProjection(Qe).scale(173.044)}var ft=3+2*_;function Et(Oe,je){var nt=f(Oe/=2),ut=i(Oe),Tt=D(i(je)),_t=i(je/=2),kt=f(je)/(_t+_*ut*Tt),vr=D(2/(1+kt*kt)),yr=D((_*_t+(ut+nt)*Tt)/(_*_t+(ut-nt)*Tt));return[ft*(vr*(yr-1/yr)-2*v(yr)),ft*(vr*kt*(yr+1/yr)-2*e(kt))]}Et.invert=function(Oe,je){if(!(_t=J.invert(Oe/1.2,je*1.065)))return null;var nt=_t[0],ut=_t[1],Tt=20,_t;Oe/=ft,je/=ft;do{var kt=nt/2,vr=ut/2,yr=f(kt),fr=i(kt),Tr=f(vr),zr=i(vr),Qr=i(ut),on=D(Qr),En=Tr/(zr+_*fr*on),Nn=En*En,Jn=D(2/(1+Nn)),Ta=_*zr+(fr+yr)*on,Ea=_*zr+(fr-yr)*on,ni=Ta/Ea,qa=D(ni),ai=qa-1/qa,Ti=qa+1/qa,Yr=Jn*ai-2*v(qa)-Oe,et=Jn*En*Ti-2*e(En)-je,Jt=Tr&&p*on*yr*Nn/Tr,Kr=(_*fr*zr+on)/(2*(zr+_*fr*on)*(zr+_*fr*on)*on),Hn=-.5*En*Jn*Jn*Jn,ta=Hn*Jt,ea=Hn*Kr,vi=(vi=2*zr+_*on*(fr-yr))*vi*qa,Di=(_*fr*zr*on+Qr)/vi,Ji=-(_*yr*Tr)/(on*vi),Ri=ai*ta-2*Di/qa+Jn*(Di+Di/ni),ce=ai*ea-2*Ji/qa+Jn*(Ji+Ji/ni),Te=En*Ti*ta-2*Jt/(1+Nn)+Jn*Ti*Jt+Jn*En*(Di-Di/ni),Re=En*Ti*ea-2*Kr/(1+Nn)+Jn*Ti*Kr+Jn*En*(Ji-Ji/ni),Ue=ce*Te-Re*Ri;if(!Ue)break;var Be=(et*ce-Yr*Re)/Ue,$e=(Yr*Te-et*Ri)/Ue;nt-=Be,ut=s(-M,o(M,ut-$e))}while((T(Be)>l||T($e)>l)&&--Tt>0);return T(T(ut)-M)<l?[0,ut]:Tt&&[nt,ut]};function Vt(){return c.geoProjection(Et).scale(62.5271)}var Pe=i(35*S);function Se(Oe,je){var nt=m(je/2);return[Oe*Pe*D(1-nt*nt),(1+Pe)*nt]}Se.invert=function(Oe,je){var nt=je/(1+Pe);return[Oe&&Oe/(Pe*D(1-nt*nt)),2*e(nt)]};function ot(){return c.geoProjection(Se).scale(137.152)}function ct(Oe,je){var nt=je/2,ut=i(nt);return[2*Oe/h*i(je)*ut*ut,h*m(nt)]}ct.invert=function(Oe,je){var nt=e(je/h),ut=i(nt),Tt=2*nt;return[Oe*h/2/(i(Tt)*ut*ut),Tt]};function pt(){return c.geoProjection(ct).scale(135.264)}function St(Oe){var je=1-Oe,nt=_t(u,0)[0]-_t(-u,0)[0],ut=_t(0,M)[1]-_t(0,-M)[1],Tt=D(2*ut/nt);function _t(yr,fr){var Tr=i(fr),zr=f(fr);return[Tr/(je+Oe*Tr)*yr,je*fr+Oe*zr]}function kt(yr,fr){var Tr=_t(yr,fr);return[Tr[0]*Tt,Tr[1]/Tt]}function vr(yr){return kt(0,yr)[1]}return kt.invert=function(yr,fr){var Tr=_e(vr,fr),zr=yr/Tt*(Oe+je/i(Tr));return[zr,Tr]},kt}function xt(){var Oe=.5,je=c.geoProjectionMutator(St),nt=je(Oe);return nt.alpha=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(168.725)}function Pt(Oe){return[Oe[0]/2,F(m(Oe[1]/2*S))*E]}function Xt(Oe){return[Oe[0]*2,2*e(f(Oe[1]*S))*E]}function or(Oe){Oe==null&&(Oe=c.geoOrthographic);var je=Oe(),nt=c.geoEquirectangular().scale(E).precision(0).clipAngle(null).translate([0,0]);function ut(_t){return je(Pt(_t))}je.invert&&(ut.invert=function(_t){return Xt(je.invert(_t))}),ut.stream=function(_t){var kt=je.stream(_t),vr=nt.stream({point:function(yr,fr){kt.point(yr/2,F(m(-fr/2*S))*E)},lineStart:function(){kt.lineStart()},lineEnd:function(){kt.lineEnd()},polygonStart:function(){kt.polygonStart()},polygonEnd:function(){kt.polygonEnd()}});return vr.sphere=kt.sphere,vr};function Tt(_t){ut[_t]=function(){return arguments.length?(je[_t].apply(je,arguments),ut):je[_t]()}}return ut.rotate=function(_t){return arguments.length?(nt.rotate(_t),ut):nt.rotate()},ut.center=function(_t){return arguments.length?(je.center(Pt(_t)),ut):Xt(je.center())},Tt("angle"),Tt("clipAngle"),Tt("clipExtent"),Tt("fitExtent"),Tt("fitHeight"),Tt("fitSize"),Tt("fitWidth"),Tt("scale"),Tt("translate"),Tt("precision"),ut.scale(249.5)}function Pr(Oe,je){var nt=2*u/je,ut=Oe*Oe;function Tt(_t,kt){var vr=c.geoAzimuthalEquidistantRaw(_t,kt),yr=vr[0],fr=vr[1],Tr=yr*yr+fr*fr;if(Tr>ut){var zr=D(Tr),Qr=a(fr,yr),on=nt*g(Qr/nt),En=Qr-on,Nn=Oe*i(En),Jn=(Oe*f(En)-En*f(Nn))/(M-Nn),Ta=Ar(En,Jn),Ea=(u-Oe)/Er(Ta,Nn,u);yr=zr;var ni=50,qa;do yr-=qa=(Oe+Er(Ta,Nn,yr)*Ea-zr)/(Ta(yr)*Ea);while(T(qa)>l&&--ni>0);fr=En*f(yr),yr<M&&(fr-=Jn*(yr-M));var ai=f(on),Ti=i(on);vr[0]=yr*Ti-fr*ai,vr[1]=yr*ai+fr*Ti}return vr}return Tt.invert=function(_t,kt){var vr=_t*_t+kt*kt;if(vr>ut){var yr=D(vr),fr=a(kt,_t),Tr=nt*g(fr/nt),zr=fr-Tr;_t=yr*i(zr),kt=yr*f(zr);for(var Qr=_t-M,on=f(_t),En=kt/on,Nn=_t<M?1/0:0,Jn=10;;){var Ta=Oe*f(En),Ea=Oe*i(En),ni=f(Ea),qa=M-Ea,ai=(Ta-En*ni)/qa,Ti=Ar(En,ai);if(T(Nn)<x||!--Jn)break;En-=Nn=(En*on-ai*Qr-kt)/(on-Qr*2*(qa*(Ea+En*Ta*i(Ea)-ni)-Ta*(Ta-En*ni))/(qa*qa))}yr=Oe+Er(Ti,Ea,_t)*(u-Oe)/Er(Ti,Ea,u),fr=Tr+En,_t=yr*i(fr),kt=yr*f(fr)}return c.geoAzimuthalEquidistantRaw.invert(_t,kt)},Tt}function Ar(Oe,je){return function(nt){var ut=Oe*i(nt);return nt<M&&(ut-=je),D(1+ut*ut)}}function Er(Oe,je,nt){for(var ut=50,Tt=(nt-je)/ut,_t=Oe(je)+Oe(nt),kt=1,vr=je;kt<ut;++kt)_t+=2*Oe(vr+=Tt);return _t*.5*Tt}function Jr(){var Oe=6,je=30*S,nt=i(je),ut=f(je),Tt=c.geoProjectionMutator(Pr),_t=Tt(je,Oe),kt=_t.stream,vr=.01,yr=-i(vr*S),fr=f(vr*S);return _t.radius=function(Tr){return arguments.length?(nt=i(je=Tr*S),ut=f(je),Tt(je,Oe)):je*E},_t.lobes=function(Tr){return arguments.length?Tt(je,Oe=+Tr):Oe},_t.stream=function(Tr){var zr=_t.rotate(),Qr=kt(Tr),on=(_t.rotate([0,0]),kt(Tr));return _t.rotate(zr),Qr.sphere=function(){on.polygonStart(),on.lineStart();for(var En=0,Nn=2*u/Oe,Jn=0;En<Oe;++En,Jn-=Nn)on.point(a(fr*i(Jn),yr)*E,F(fr*f(Jn))*E),on.point(a(ut*i(Jn-Nn/2),nt)*E,F(ut*f(Jn-Nn/2))*E);on.lineEnd(),on.polygonEnd()},Qr},_t.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function lr(Oe,je,nt,ut,Tt,_t,kt,vr){arguments.length<8&&(vr=0);function yr(fr,Tr){if(!Tr)return[Oe*fr/u,0];var zr=Tr*Tr,Qr=Oe+zr*(je+zr*(nt+zr*ut)),on=Tr*(Tt-1+zr*(_t-vr+zr*kt)),En=(Qr*Qr+on*on)/(2*on),Nn=fr*F(Qr/En)/u;return[En*f(Nn),Tr*(1+zr*vr)+En*(1-i(Nn))]}return yr.invert=function(fr,Tr){var zr=u*fr/Oe,Qr=Tr,on,En,Nn=50;do{var Jn=Qr*Qr,Ta=Oe+Jn*(je+Jn*(nt+Jn*ut)),Ea=Qr*(Tt-1+Jn*(_t-vr+Jn*kt)),ni=Ta*Ta+Ea*Ea,qa=2*Ea,ai=ni/qa,Ti=ai*ai,Yr=F(Ta/ai)/u,et=zr*Yr,Jt=Ta*Ta,Kr=(2*je+Jn*(4*nt+Jn*6*ut))*Qr,Hn=Tt+Jn*(3*_t+Jn*5*kt),ta=2*(Ta*Kr+Ea*(Hn-1)),ea=2*(Hn-1),vi=(ta*qa-ni*ea)/(qa*qa),Di=i(et),Ji=f(et),Ri=ai*Di,ce=ai*Ji,Te=zr/u*(1/D(1-Jt/Ti))*(Kr*ai-Ta*vi)/Ti,Re=ce-fr,Ue=Qr*(1+Jn*vr)+ai-Ri-Tr,Be=vi*Ji+Ri*Te,$e=Ri*Yr,wt=1+vi-(vi*Di-ce*Te),gt=ce*Yr,It=Be*gt-wt*$e;if(!It)break;zr-=on=(Ue*Be-Re*wt)/It,Qr-=En=(Re*gt-Ue*$e)/It}while((T(on)>l||T(En)>l)&&--Nn>0);return[zr,Qr]},yr}var br=lr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Fr(){return c.geoProjection(br).scale(149.995)}var Hr=lr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Lr(){return c.geoProjection(Hr).scale(153.93)}var at=lr(5/6*u,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Rt(){return c.geoProjection(at).scale(130.945)}function Kt(Oe,je){var nt=Oe*Oe,ut=je*je;return[Oe*(1-.162388*ut)*(.87-952426e-9*nt*nt),je*(1+ut/12)]}Kt.invert=function(Oe,je){var nt=Oe,ut=je,Tt=50,_t;do{var kt=ut*ut;ut-=_t=(ut*(1+kt/12)-je)/(1+kt/4)}while(T(_t)>l&&--Tt>0);Tt=50,Oe/=1-.162388*kt;do{var vr=(vr=nt*nt)*vr;nt-=_t=(nt*(.87-952426e-9*vr)-Oe)/(.87-.00476213*vr)}while(T(_t)>l&&--Tt>0);return[nt,ut]};function ur(){return c.geoProjection(Kt).scale(131.747)}var Nr=lr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Vr(){return c.geoProjection(Nr).scale(131.087)}function Dr(Oe){var je=Oe(M,0)[0]-Oe(-M,0)[0];function nt(ut,Tt){var _t=ut>0?-.5:.5,kt=Oe(ut+_t*u,Tt);return kt[0]-=_t*je,kt}return Oe.invert&&(nt.invert=function(ut,Tt){var _t=ut>0?-.5:.5,kt=Oe.invert(ut+_t*je,Tt),vr=kt[0]-_t*u;return vr<-u?vr+=2*u:vr>u&&(vr-=2*u),kt[0]=vr,kt}),nt}function Mr(Oe,je){var nt=d(Oe),ut=d(je),Tt=i(je),_t=i(Oe)*Tt,kt=f(Oe)*Tt,vr=f(ut*je);Oe=T(a(kt,vr)),je=F(_t),T(Oe-M)>l&&(Oe%=M);var yr=jr(Oe>u/4?M-Oe:Oe,je);return Oe>u/4&&(vr=yr[0],yr[0]=-yr[1],yr[1]=-vr),yr[0]*=nt,yr[1]*=-ut,yr}Mr.invert=function(Oe,je){T(Oe)>1&&(Oe=d(Oe)*2-Oe),T(je)>1&&(je=d(je)*2-je);var nt=d(Oe),ut=d(je),Tt=-nt*Oe,_t=-ut*je,kt=_t/Tt<1,vr=kn(kt?_t:Tt,kt?Tt:_t),yr=vr[0],fr=vr[1],Tr=i(fr);return kt&&(yr=-M-yr),[nt*(a(f(yr)*Tr,-f(fr))+u),ut*F(i(yr)*Tr)]};function jr(Oe,je){if(je===M)return[0,0];var nt=f(je),ut=nt*nt,Tt=ut*ut,_t=1+Tt,kt=1+3*Tt,vr=1-Tt,yr=F(1/D(_t)),fr=vr+ut*_t*yr,Tr=(1-nt)/fr,zr=D(Tr),Qr=Tr*_t,on=D(Qr),En=zr*vr,Nn,Jn;if(Oe===0)return[0,-(En+ut*on)];var Ta=i(je),Ea=1/Ta,ni=2*nt*Ta,qa=(-3*ut+yr*kt)*ni,ai=(-fr*Ta-(1-nt)*qa)/(fr*fr),Ti=.5*ai/zr,Yr=vr*Ti-2*ut*zr*ni,et=ut*_t*ai+Tr*kt*ni,Jt=-Ea*ni,Kr=-Ea*et,Hn=-2*Ea*Yr,ta=4*Oe/u,ea;if(Oe>.222*u||je<u/4&&Oe>.175*u){if(Nn=(En+ut*D(Qr*(1+Tt)-En*En))/(1+Tt),Oe>u/4)return[Nn,Nn];var vi=Nn,Di=.5*Nn;Nn=.5*(Di+vi),Jn=50;do{var Ji=D(Qr-Nn*Nn),Ri=Nn*(Hn+Jt*Ji)+Kr*F(Nn/on)-ta;if(!Ri)break;Ri<0?Di=Nn:vi=Nn,Nn=.5*(Di+vi)}while(T(vi-Di)>l&&--Jn>0)}else{Nn=l,Jn=25;do{var ce=Nn*Nn,Te=D(Qr-ce),Re=Hn+Jt*Te,Ue=Nn*Re+Kr*F(Nn/on)-ta,Be=Re+(Kr-Jt*ce)/Te;Nn-=ea=Te?Ue/Be:0}while(T(ea)>l&&--Jn>0)}return[Nn,-En-ut*D(Qr-Nn*Nn)]}function kn(Oe,je){for(var nt=0,ut=1,Tt=.5,_t=50;;){var kt=Tt*Tt,vr=D(Tt),yr=F(1/D(1+kt)),fr=1-kt+Tt*(1+kt)*yr,Tr=(1-vr)/fr,zr=D(Tr),Qr=Tr*(1+kt),on=zr*(1-kt),En=Qr-Oe*Oe,Nn=D(En),Jn=je+on+Tt*Nn;if(T(ut-nt)<x||--_t===0||Jn===0)break;Jn>0?nt=Tt:ut=Tt,Tt=.5*(nt+ut)}if(!_t)return null;var Ta=F(vr),Ea=i(Ta),ni=1/Ea,qa=2*vr*Ea,ai=(-3*Tt+yr*(1+3*kt))*qa,Ti=(-fr*Ea-(1-vr)*ai)/(fr*fr),Yr=.5*Ti/zr,et=(1-kt)*Yr-2*Tt*zr*qa,Jt=-2*ni*et,Kr=-ni*qa,Hn=-ni*(Tt*(1+kt)*Ti+Tr*(1+3*kt)*qa);return[u/4*(Oe*(Jt+Kr*Nn)+Hn*F(Oe/D(Qr))),Ta]}function yn(){return c.geoProjection(Dr(Mr)).scale(239.75)}function Wn(Oe,je,nt){var ut,Tt,_t;return Oe?(ut=In(Oe,nt),je?(Tt=In(je,1-nt),_t=Tt[1]*Tt[1]+nt*ut[0]*ut[0]*Tt[0]*Tt[0],[[ut[0]*Tt[2]/_t,ut[1]*ut[2]*Tt[0]*Tt[1]/_t],[ut[1]*Tt[1]/_t,-ut[0]*ut[2]*Tt[0]*Tt[2]/_t],[ut[2]*Tt[1]*Tt[2]/_t,-nt*ut[0]*ut[1]*Tt[0]/_t]]):[[ut[0],0],[ut[1],0],[ut[2],0]]):(Tt=In(je,1-nt),[[0,Tt[0]/Tt[1]],[1/Tt[1],0],[Tt[2]/Tt[1],0]])}function In(Oe,je){var nt,ut,Tt,_t,kt;if(je<l)return _t=f(Oe),ut=i(Oe),nt=je*(Oe-_t*ut)/4,[_t-nt*ut,ut+nt*_t,1-je*_t*_t/2,Oe-nt];if(je>=1-l)return nt=(1-je)/4,ut=z(Oe),_t=R(Oe),Tt=1/ut,kt=ut*O(Oe),[_t+nt*(kt-Oe)/(ut*ut),Tt-nt*_t*Tt*(kt-Oe),Tt+nt*_t*Tt*(kt+Oe),2*e(n(Oe))-M+nt*(kt-Oe)/ut];var vr=[1,0,0,0,0,0,0,0,0],yr=[D(je),0,0,0,0,0,0,0,0],fr=0;for(ut=D(1-je),kt=1;T(yr[fr]/vr[fr])>l&&fr<8;)nt=vr[fr++],yr[fr]=(nt-ut)/2,vr[fr]=(nt+ut)/2,ut=D(nt*ut),kt*=2;Tt=kt*vr[fr]*Oe;do _t=yr[fr]*f(ut=Tt)/vr[fr],Tt=(F(_t)+Tt)/2;while(--fr);return[f(Tt),_t=i(Tt),_t/i(Tt-ut),Tt]}function $n(Oe,je,nt){var ut=T(Oe),Tt=T(je),_t=O(Tt);if(ut){var kt=1/f(ut),vr=1/(m(ut)*m(ut)),yr=-(vr+nt*(_t*_t*kt*kt)-1+nt),fr=(nt-1)*vr,Tr=(-yr+D(yr*yr-4*fr))/2;return[Kn(e(1/D(Tr)),nt)*d(Oe),Kn(e(D((Tr/vr-1)/nt)),1-nt)*d(je)]}return[0,Kn(e(_t),1-nt)*d(je)]}function Kn(Oe,je){if(!je)return Oe;if(je===1)return v(m(Oe/2+w));for(var nt=1,ut=D(1-je),Tt=D(je),_t=0;T(Tt)>l;_t++){if(Oe%u){var kt=e(ut*m(Oe)/nt);kt<0&&(kt+=u),Oe+=kt+~~(Oe/u)*u}else Oe+=Oe;Tt=(nt+ut)/2,ut=D(nt*ut),Tt=((nt=Tt)-ut)/2}return Oe/(b(2,_t)*nt)}function ya(Oe,je){var nt=(_-1)/(_+1),ut=D(1-nt*nt),Tt=Kn(M,ut*ut),_t=-1,kt=v(m(u/4+T(je)/2)),vr=n(_t*kt)/D(nt),yr=Ra(vr*i(_t*Oe),vr*f(_t*Oe)),fr=$n(yr[0],yr[1],ut*ut);return[-fr[1],(je>=0?1:-1)*(.5*Tt-fr[0])]}function Ra(Oe,je){var nt=Oe*Oe,ut=je+1,Tt=1-nt-je*je;return[.5*((Oe>=0?M:-M)-a(Tt,2*Oe)),-.25*v(Tt*Tt+4*nt)+.5*v(ut*ut+nt)]}function _i(Oe,je){var nt=je[0]*je[0]+je[1]*je[1];return[(Oe[0]*je[0]+Oe[1]*je[1])/nt,(Oe[1]*je[0]-Oe[0]*je[1])/nt]}ya.invert=function(Oe,je){var nt=(_-1)/(_+1),ut=D(1-nt*nt),Tt=Kn(M,ut*ut),_t=-1,kt=Wn(.5*Tt-je,-Oe,ut*ut),vr=_i(kt[0],kt[1]),yr=a(vr[1],vr[0])/_t;return[yr,2*e(n(.5/_t*v(nt*vr[0]*vr[0]+nt*vr[1]*vr[1])))-M]};function Ka(){return c.geoProjection(Dr(ya)).scale(151.496)}function ri(Oe){var je=f(Oe),nt=i(Oe),ut=ei(Oe);ut.invert=ei(-Oe);function Tt(_t,kt){var vr=ut(_t,kt);_t=vr[0],kt=vr[1];var yr=f(kt),fr=i(kt),Tr=i(_t),zr=I(je*yr+nt*fr*Tr),Qr=f(zr),on=T(Qr)>l?zr/Qr:1;return[on*nt*f(_t),(T(_t)>M?on:-on)*(je*fr-nt*yr*Tr)]}return Tt.invert=function(_t,kt){var vr=D(_t*_t+kt*kt),yr=-f(vr),fr=i(vr),Tr=vr*fr,zr=-kt*yr,Qr=vr*je,on=D(Tr*Tr+zr*zr-Qr*Qr),En=a(Tr*Qr+zr*on,zr*Qr-Tr*on),Nn=(vr>M?-1:1)*a(_t*yr,vr*i(En)*fr+kt*f(En)*yr);return ut.invert(Nn,En)},Tt}function ei(Oe){var je=f(Oe),nt=i(Oe);return function(ut,Tt){var _t=i(Tt),kt=i(ut)*_t,vr=f(ut)*_t,yr=f(Tt);return[a(vr,kt*nt-yr*je),F(yr*nt+kt*je)]}}function kr(){var Oe=0,je=c.geoProjectionMutator(ri),nt=je(Oe),ut=nt.rotate,Tt=nt.stream,_t=c.geoCircle();return nt.parallel=function(kt){if(!arguments.length)return Oe*E;var vr=nt.rotate();return je(Oe=kt*S).rotate(vr)},nt.rotate=function(kt){return arguments.length?(ut.call(nt,[kt[0],kt[1]-Oe*E]),_t.center([-kt[0],-kt[1]]),nt):(kt=ut.call(nt),kt[1]+=Oe*E,kt)},nt.stream=function(kt){return kt=Tt(kt),kt.sphere=function(){kt.polygonStart();var vr=.01,yr=_t.radius(90-vr)().coordinates[0],fr=yr.length-1,Tr=-1,zr;for(kt.lineStart();++Tr<fr;)kt.point((zr=yr[Tr])[0],zr[1]);for(kt.lineEnd(),yr=_t.radius(90+vr)().coordinates[0],fr=yr.length-1,kt.lineStart();--Tr>=0;)kt.point((zr=yr[Tr])[0],zr[1]);kt.lineEnd(),kt.polygonEnd()},kt},nt.scale(79.4187).parallel(45).clipAngle(180-.001)}var bn=3,dn=F(1-1/bn)*E,Ln=zt(0);function ra(Oe){var je=dn*S,nt=Ge(u,je)[0]-Ge(-u,je)[0],ut=Ln(0,je)[1],Tt=Ge(0,je)[1],_t=h-Tt,kt=L/Oe,vr=4/L,yr=ut+_t*_t*4/L;function fr(Tr,zr){var Qr,on=T(zr);if(on>je){var En=o(Oe-1,s(0,r((Tr+u)/kt)));Tr+=u*(Oe-1)/Oe-En*kt,Qr=Ge(Tr,on),Qr[0]=Qr[0]*L/nt-L*(Oe-1)/(2*Oe)+En*L/Oe,Qr[1]=ut+(Qr[1]-Tt)*4*_t/L,zr<0&&(Qr[1]=-Qr[1])}else Qr=Ln(Tr,zr);return Qr[0]*=vr,Qr[1]/=yr,Qr}return fr.invert=function(Tr,zr){Tr/=vr,zr*=yr;var Qr=T(zr);if(Qr>ut){var on=o(Oe-1,s(0,r((Tr+u)/kt)));Tr=(Tr+u*(Oe-1)/Oe-on*kt)*nt/L;var En=Ge.invert(Tr,.25*(Qr-ut)*L/_t+Tt);return En[0]-=u*(Oe-1)/Oe-on*kt,zr<0&&(En[1]=-En[1]),En}return Ln.invert(Tr,zr)},fr}function ma(Oe,je){return[Oe,je&1?90-l:dn]}function sa(Oe,je){return[Oe,je&1?-90+l:-dn]}function Bn(Oe){return[Oe[0]*(1-l),Oe[1]]}function Qn(Oe){var je=[].concat(A.range(-180,180+Oe/2,Oe).map(ma),A.range(180,-180-Oe/2,-Oe).map(sa));return{type:"Polygon",coordinates:[Oe===180?je.map(Bn):je]}}function Xa(){var Oe=4,je=c.geoProjectionMutator(ra),nt=je(Oe),ut=nt.stream;return nt.lobes=function(Tt){return arguments.length?je(Oe=+Tt):Oe},nt.stream=function(Tt){var _t=nt.rotate(),kt=ut(Tt),vr=(nt.rotate([0,0]),ut(Tt));return nt.rotate(_t),kt.sphere=function(){c.geoStream(Qn(180/Oe),vr)},kt},nt.scale(239.75)}function yi(Oe){var je=1+Oe,nt=f(1/je),ut=F(nt),Tt=2*D(u/(_t=u+4*ut*je)),_t,kt=.5*Tt*(je+D(Oe*(2+Oe))),vr=Oe*Oe,yr=je*je;function fr(Tr,zr){var Qr=1-f(zr),on,En;if(Qr&&Qr<2){var Nn=M-zr,Jn=25,Ta;do{var Ea=f(Nn),ni=i(Nn),qa=ut+a(Ea,je-ni),ai=1+yr-2*je*ni;Nn-=Ta=(Nn-vr*ut-je*Ea+ai*qa-.5*Qr*_t)/(2*je*Ea*qa)}while(T(Ta)>x&&--Jn>0);on=Tt*D(ai),En=Tr*qa/u}else on=Tt*(Oe+Qr),En=Tr*ut/u;return[on*f(En),kt-on*i(En)]}return fr.invert=function(Tr,zr){var Qr=Tr*Tr+(zr-=kt)*zr,on=(1+yr-Qr/(Tt*Tt))/(2*je),En=I(on),Nn=f(En),Jn=ut+a(Nn,je-on);return[F(Tr/D(Qr))*u/Jn,F(1-2*(En-vr*ut-je*Nn+(1+yr-2*je*on)*Jn)/_t)]},fr}function Yt(){var Oe=1,je=c.geoProjectionMutator(yi),nt=je(Oe);return nt.ratio=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(167.774).center([0,18.67])}var gr=.7109889596207567,un=.0528035274542;function mn(Oe,je){return je>-gr?(Oe=ke(Oe,je),Oe[1]+=un,Oe):ze(Oe,je)}mn.invert=function(Oe,je){return je>-gr?ke.invert(Oe,je-un):ze.invert(Oe,je)};function sn(){return c.geoProjection(mn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Cn(Oe,je){return T(je)>gr?(Oe=ke(Oe,je),Oe[1]-=je>0?un:-un,Oe):ze(Oe,je)}Cn.invert=function(Oe,je){return T(je)>gr?ke.invert(Oe,je+(je>0?un:-un)):ze.invert(Oe,je)};function Tn(){return c.geoProjection(Cn).scale(152.63)}function gn(Oe,je,nt,ut){var Tt=D(4*u/(2*nt+(1+Oe-je/2)*f(2*nt)+(Oe+je)/2*f(4*nt)+je/2*f(6*nt))),_t=D(ut*f(nt)*D((1+Oe*i(2*nt)+je*i(4*nt))/(1+Oe+je))),kt=nt*yr(1);function vr(zr){return D(1+Oe*i(2*zr)+je*i(4*zr))}function yr(zr){var Qr=zr*nt;return(2*Qr+(1+Oe-je/2)*f(2*Qr)+(Oe+je)/2*f(4*Qr)+je/2*f(6*Qr))/nt}function fr(zr){return vr(zr)*f(zr)}var Tr=function(zr,Qr){var on=nt*_e(yr,kt*f(Qr)/nt,Qr/u);isNaN(on)&&(on=nt*d(Qr));var En=Tt*vr(on);return[En*_t*zr/u*i(on),En/_t*f(on)]};return Tr.invert=function(zr,Qr){var on=_e(fr,Qr*_t/Tt);return[zr*u/(i(on)*Tt*_t*vr(on)),F(nt*yr(on/nt)/kt)]},nt===0&&(Tt=D(ut/u),Tr=function(zr,Qr){return[zr*Tt,f(Qr)/Tt]},Tr.invert=function(zr,Qr){return[zr/Tt,F(Qr*Tt)]}),Tr}function _r(){var Oe=1,je=0,nt=45*S,ut=2,Tt=c.geoProjectionMutator(gn),_t=Tt(Oe,je,nt,ut);return _t.a=function(kt){return arguments.length?Tt(Oe=+kt,je,nt,ut):Oe},_t.b=function(kt){return arguments.length?Tt(Oe,je=+kt,nt,ut):je},_t.psiMax=function(kt){return arguments.length?Tt(Oe,je,nt=+kt*S,ut):nt*E},_t.ratio=function(kt){return arguments.length?Tt(Oe,je,nt,ut=+kt):ut},_t.scale(180.739)}function wr(Oe,je,nt,ut,Tt,_t,kt,vr,yr,fr,Tr){if(Tr.nanEncountered)return NaN;var zr,Qr,on,En,Nn,Jn,Ta,Ea,ni,qa;if(zr=nt-je,Qr=Oe(je+zr*.25),on=Oe(nt-zr*.25),isNaN(Qr)){Tr.nanEncountered=!0;return}if(isNaN(on)){Tr.nanEncountered=!0;return}return En=zr*(ut+4*Qr+Tt)/12,Nn=zr*(Tt+4*on+_t)/12,Jn=En+Nn,qa=(Jn-kt)/15,fr>yr?(Tr.maxDepthCount++,Jn+qa):Math.abs(qa)<vr?Jn+qa:(Ta=je+zr*.5,Ea=wr(Oe,je,Ta,ut,Qr,Tt,En,vr*.5,yr,fr+1,Tr),isNaN(Ea)?(Tr.nanEncountered=!0,NaN):(ni=wr(Oe,Ta,nt,Tt,on,_t,Nn,vr*.5,yr,fr+1,Tr),isNaN(ni)?(Tr.nanEncountered=!0,NaN):Ea+ni))}function Br(Oe,je,nt,ut,Tt){var _t={maxDepthCount:0,nanEncountered:!1};ut===void 0&&(ut=1e-8),Tt===void 0&&(Tt=20);var kt=Oe(je),vr=Oe(.5*(je+nt)),yr=Oe(nt),fr=(kt+4*vr+yr)*(nt-je)/6,Tr=wr(Oe,je,nt,kt,vr,yr,fr,ut,Tt,1,_t);return Tr}function An(Oe,je,nt){function ut(on){return Oe+(1-Oe)*b(1-b(on,je),1/je)}function Tt(on){return Br(ut,0,on,1e-4)}for(var _t=1/Tt(1),kt=1e3,vr=(1+1e-8)*_t,yr=[],fr=0;fr<=kt;fr++)yr.push(Tt(fr/kt)*vr);function Tr(on){var En=0,Nn=kt,Jn=kt>>1;do yr[Jn]>on?Nn=Jn:En=Jn,Jn=En+Nn>>1;while(Jn>En);var Ta=yr[Jn+1]-yr[Jn];return Ta&&(Ta=(on-yr[Jn+1])/Ta),(Jn+1+Ta)/kt}var zr=2*Tr(1)/u*_t/nt,Qr=function(on,En){var Nn=Tr(T(f(En))),Jn=ut(Nn)*on;return Nn/=zr,[Jn,En>=0?Nn:-Nn]};return Qr.invert=function(on,En){var Nn;return En*=zr,T(En)<1&&(Nn=d(En)*F(Tt(T(En))*_t)),[on/ut(T(En)),Nn]},Qr}function Yn(){var Oe=0,je=2.5,nt=1.183136,ut=c.geoProjectionMutator(An),Tt=ut(Oe,je,nt);return Tt.alpha=function(_t){return arguments.length?ut(Oe=+_t,je,nt):Oe},Tt.k=function(_t){return arguments.length?ut(Oe,je=+_t,nt):je},Tt.gamma=function(_t){return arguments.length?ut(Oe,je,nt=+_t):nt},Tt.scale(152.63)}function ua(Oe,je){return T(Oe[0]-je[0])<l&&T(Oe[1]-je[1])<l}function Sn(Oe,je){for(var nt=-1,ut=Oe.length,Tt=Oe[0],_t,kt,vr,yr=[];++nt<ut;){_t=Oe[nt],kt=(_t[0]-Tt[0])/je,vr=(_t[1]-Tt[1])/je;for(var fr=0;fr<je;++fr)yr.push([Tt[0]+fr*kt,Tt[1]+fr*vr]);Tt=_t}return yr.push(_t),yr}function na(Oe){var je=[],nt,ut,Tt,_t,kt,vr,yr,fr=Oe[0].length;for(yr=0;yr<fr;++yr)nt=Oe[0][yr],ut=nt[0][0],Tt=nt[0][1],_t=nt[1][1],kt=nt[2][0],vr=nt[2][1],je.push(Sn([[ut+l,Tt+l],[ut+l,_t-l],[kt-l,_t-l],[kt-l,vr+l]],30));for(yr=Oe[1].length-1;yr>=0;--yr)nt=Oe[1][yr],ut=nt[0][0],Tt=nt[0][1],_t=nt[1][1],kt=nt[2][0],vr=nt[2][1],je.push(Sn([[kt-l,vr-l],[kt-l,_t+l],[ut+l,_t+l],[ut+l,Tt-l]],30));return{type:"Polygon",coordinates:[A.merge(je)]}}function fa(Oe,je,nt){var ut,Tt;function _t(yr,fr){for(var Tr=fr<0?-1:1,zr=je[+(fr<0)],Qr=0,on=zr.length-1;Qr<on&&yr>zr[Qr][2][0];++Qr);var En=Oe(yr-zr[Qr][1][0],fr);return En[0]+=Oe(zr[Qr][1][0],Tr*fr>Tr*zr[Qr][0][1]?zr[Qr][0][1]:fr)[0],En}nt?_t.invert=nt(_t):Oe.invert&&(_t.invert=function(yr,fr){for(var Tr=Tt[+(fr<0)],zr=je[+(fr<0)],Qr=0,on=Tr.length;Qr<on;++Qr){var En=Tr[Qr];if(En[0][0]<=yr&&yr<En[1][0]&&En[0][1]<=fr&&fr<En[1][1]){var Nn=Oe.invert(yr-Oe(zr[Qr][1][0],0)[0],fr);return Nn[0]+=zr[Qr][1][0],ua(_t(Nn[0],Nn[1]),[yr,fr])?Nn:null}}});var kt=c.geoProjection(_t),vr=kt.stream;return kt.stream=function(yr){var fr=kt.rotate(),Tr=vr(yr),zr=(kt.rotate([0,0]),vr(yr));return kt.rotate(fr),Tr.sphere=function(){c.geoStream(ut,zr)},Tr},kt.lobes=function(yr){return arguments.length?(ut=na(yr),je=yr.map(function(fr){return fr.map(function(Tr){return[[Tr[0][0]*S,Tr[0][1]*S],[Tr[1][0]*S,Tr[1][1]*S],[Tr[2][0]*S,Tr[2][1]*S]]})}),Tt=je.map(function(fr){return fr.map(function(Tr){var zr=Oe(Tr[0][0],Tr[0][1])[0],Qr=Oe(Tr[2][0],Tr[2][1])[0],on=Oe(Tr[1][0],Tr[0][1])[1],En=Oe(Tr[1][0],Tr[1][1])[1],Nn;return on>En&&(Nn=on,on=En,En=Nn),[[zr,on],[Qr,En]]})}),kt):je.map(function(fr){return fr.map(function(Tr){return[[Tr[0][0]*E,Tr[0][1]*E],[Tr[1][0]*E,Tr[1][1]*E],[Tr[2][0]*E,Tr[2][1]*E]]})})},je!=null&&kt.lobes(je),kt}var Ma=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ka(){return fa(Le,Ma).scale(160.857)}var ga=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ia(){return fa(Cn,ga).scale(152.63)}var Ao=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ro(){return fa(ke,Ao).scale(169.529)}var $o=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function $s(){return fa(ke,$o).scale(169.529).rotate([20,0])}var Hs=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Wl(){return fa(mn,Hs,fe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ai=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Gs(){return fa(ze,Ai).scale(152.63).rotate([-20,0])}function Ys(Oe,je){return[3/L*Oe*D(u*u/3-je*je),je]}Ys.invert=function(Oe,je){return[L/3*Oe/D(u*u/3-je*je),je]};function Zi(){return c.geoProjection(Ys).scale(158.837)}function Ro(Oe){function je(nt,ut){if(T(T(ut)-M)<l)return[0,ut<0?-2:2];var Tt=f(ut),_t=b((1+Tt)/(1-Tt),Oe/2),kt=.5*(_t+1/_t)+i(nt*=Oe);return[2*f(nt)/kt,(_t-1/_t)/kt]}return je.invert=function(nt,ut){var Tt=T(ut);if(T(Tt-2)<l)return nt?null:[0,d(ut)*M];if(Tt>2)return null;nt/=2,ut/=2;var _t=nt*nt,kt=ut*ut,vr=2*ut/(1+_t+kt);return vr=b((1+vr)/(1-vr),1/Oe),[a(2*nt,1-_t-kt)/Oe,F((vr-1)/(vr+1))]},je}function Cl(){var Oe=.5,je=c.geoProjectionMutator(Ro),nt=je(Oe);return nt.spacing=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(124.75)}var _s=u/_;function Fi(Oe,je){return[Oe*(1+D(i(je)))/2,je/(i(je/2)*i(Oe/6))]}Fi.invert=function(Oe,je){var nt=T(Oe),ut=T(je),Tt=l,_t=M;ut<_s?_t*=ut/_s:Tt+=6*I(_s/ut);for(var kt=0;kt<25;kt++){var vr=f(_t),yr=D(i(_t)),fr=f(_t/2),Tr=i(_t/2),zr=f(Tt/6),Qr=i(Tt/6),on=.5*Tt*(1+yr)-nt,En=_t/(Tr*Qr)-ut,Nn=yr?-.25*Tt*vr/yr:0,Jn=.5*(1+yr),Ta=(1+.5*_t*fr/Tr)/(Tr*Qr),Ea=_t/Tr*(zr/6)/(Qr*Qr),ni=Nn*Ea-Ta*Jn,qa=(on*Ea-En*Jn)/ni,ai=(En*Nn-on*Ta)/ni;if(_t-=qa,Tt-=ai,T(qa)<l&&T(ai)<l)break}return[Oe<0?-Tt:Tt,je<0?-_t:_t]};function vl(){return c.geoProjection(Fi).scale(97.2672)}function lo(Oe,je){var nt=Oe*Oe,ut=je*je;return[Oe*(.975534+ut*(-.119161+nt*-.0143059+ut*-.0547009)),je*(1.00384+nt*(.0802894+ut*-.02855+nt*199025e-9)+ut*(.0998909+ut*-.0491032))]}lo.invert=function(Oe,je){var nt=d(Oe)*u,ut=je/2,Tt=50;do{var _t=nt*nt,kt=ut*ut,vr=nt*ut,yr=nt*(.975534+kt*(-.119161+_t*-.0143059+kt*-.0547009))-Oe,fr=ut*(1.00384+_t*(.0802894+kt*-.02855+_t*199025e-9)+kt*(.0998909+kt*-.0491032))-je,Tr=.975534-kt*(.119161+3*_t*.0143059+kt*.0547009),zr=-vr*(2*.119161+4*.0547009*kt+2*.0143059*_t),Qr=vr*(2*.0802894+4*199025e-9*_t+2*-.02855*kt),on=1.00384+_t*(.0802894+199025e-9*_t)+kt*(3*(.0998909-.02855*_t)-5*.0491032*kt),En=zr*Qr-on*Tr,Nn=(fr*zr-yr*on)/En,Jn=(yr*Qr-fr*Tr)/En;nt-=Nn,ut-=Jn}while((T(Nn)>l||T(Jn)>l)&&--Tt>0);return Tt&&[nt,ut]};function zi(){return c.geoProjection(lo).scale(139.98)}function po(Oe,je){return[f(Oe)/i(je),m(je)*i(Oe)]}po.invert=function(Oe,je){var nt=Oe*Oe,ut=je*je,Tt=ut+1,_t=nt+Tt,kt=Oe?p*D((_t-D(_t*_t-4*nt))/nt):1/D(Tt);return[F(Oe*kt),d(je)*I(kt)]};function no(){return c.geoProjection(po).scale(144.049).clipAngle(90-.001)}function us(Oe){var je=i(Oe),nt=m(w+Oe/2);function ut(Tt,_t){var kt=_t-Oe,vr=T(kt)<l?Tt*je:T(vr=w+_t/2)<l||T(T(vr)-M)<l?0:Tt*kt/v(m(vr)/nt);return[vr,kt]}return ut.invert=function(Tt,_t){var kt,vr=_t+Oe;return[T(_t)<l?Tt/je:T(kt=w+vr/2)<l||T(T(kt)-M)<l?0:Tt*v(m(kt)/nt)/_t,vr]},ut}function Qs(){return We(us).parallel(40).scale(158.837)}function lu(Oe,je){return[Oe,1.25*v(m(w+.4*je))]}lu.invert=function(Oe,je){return[Oe,2.5*e(n(.8*je))-.625*u]};function es(){return c.geoProjection(lu).scale(108.318)}function Au(Oe){var je=Oe.length-1;function nt(ut,Tt){for(var _t=i(Tt),kt=2/(1+_t*i(ut)),vr=kt*_t*f(ut),yr=kt*f(Tt),fr=je,Tr=Oe[fr],zr=Tr[0],Qr=Tr[1],on;--fr>=0;)Tr=Oe[fr],zr=Tr[0]+vr*(on=zr)-yr*Qr,Qr=Tr[1]+vr*Qr+yr*on;return zr=vr*(on=zr)-yr*Qr,Qr=vr*Qr+yr*on,[zr,Qr]}return nt.invert=function(ut,Tt){var _t=20,kt=ut,vr=Tt;do{for(var yr=je,fr=Oe[yr],Tr=fr[0],zr=fr[1],Qr=0,on=0,En;--yr>=0;)fr=Oe[yr],Qr=Tr+kt*(En=Qr)-vr*on,on=zr+kt*on+vr*En,Tr=fr[0]+kt*(En=Tr)-vr*zr,zr=fr[1]+kt*zr+vr*En;Qr=Tr+kt*(En=Qr)-vr*on,on=zr+kt*on+vr*En,Tr=kt*(En=Tr)-vr*zr-ut,zr=kt*zr+vr*En-Tt;var Nn=Qr*Qr+on*on,Jn,Ta;kt-=Jn=(Tr*Qr+zr*on)/Nn,vr-=Ta=(zr*Qr-Tr*on)/Nn}while(T(Jn)+T(Ta)>l*l&&--_t>0);if(_t){var Ea=D(kt*kt+vr*vr),ni=2*e(Ea*.5),qa=f(ni);return[a(kt*qa,Ea*i(ni)),Ea?F(vr*qa/Ea):0]}},nt}var Rs=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Oo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],hc=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],So=[[.9245,0],[0,0],[.01943,0]],Is=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Xl(){return Fs(Rs,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Xu(){return Fs(Oo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function ju(){return Fs(hc,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ws(){return Fs(So,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Ll(){return Fs(Is,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Fs(Oe,je){var nt=c.geoProjection(Au(Oe)).rotate(je).clipAngle(90),ut=c.geoRotation(je),Tt=nt.center;return delete nt.rotate,nt.center=function(_t){return arguments.length?Tt(ut(_t)):ut.invert(Tt())},nt}var uu=D(6),pl=D(7);function cu(Oe,je){var nt=F(7*f(je)/(3*uu));return[uu*Oe*(2*i(2*nt/3)-1)/pl,9*f(nt/3)/pl]}cu.invert=function(Oe,je){var nt=3*F(je*pl/9);return[Oe*pl/(uu*(2*i(2*nt/3)-1)),F(f(nt)*3*uu/7)]};function Mu(){return c.geoProjection(cu).scale(164.859)}function jl(Oe,je){for(var nt=(1+p)*f(je),ut=je,Tt=0,_t;Tt<25&&(ut-=_t=(f(ut/2)+f(ut)-nt)/(.5*i(ut/2)+i(ut)),!(T(_t)<l));Tt++);return[Oe*(1+2*i(ut)/i(ut/2))/(3*_),2*D(3)*f(ut/2)/D(2+_)]}jl.invert=function(Oe,je){var nt=je*D(2+_)/(2*D(3)),ut=2*F(nt);return[3*_*Oe/(1+2*i(ut)/i(ut/2)),F((nt+f(ut))/(1+p))]};function Eu(){return c.geoProjection(jl).scale(188.209)}function qs(Oe,je){for(var nt=D(6/(4+u)),ut=(1+u/4)*f(je),Tt=je/2,_t=0,kt;_t<25&&(Tt-=kt=(Tt/2+f(Tt)-ut)/(.5+i(Tt)),!(T(kt)<l));_t++);return[nt*(.5+i(Tt))*Oe/1.5,nt*Tt]}qs.invert=function(Oe,je){var nt=D(6/(4+u)),ut=je/nt;return T(T(ut)-M)<l&&(ut=ut<0?-M:M),[1.5*Oe/(nt*(.5+i(ut))),F((ut/2+f(ut))/(1+u/4))]};function Zl(){return c.geoProjection(qs).scale(166.518)}function dl(Oe,je){var nt=je*je,ut=nt*nt,Tt=nt*ut;return[Oe*(.84719-.13063*nt+Tt*Tt*(-.04515+.05494*nt-.02326*ut+.00331*Tt)),je*(1.01183+ut*ut*(-.02625+.01926*nt-.00396*ut))]}dl.invert=function(Oe,je){var nt=je,ut=25,Tt,_t,kt,vr;do _t=nt*nt,kt=_t*_t,nt-=Tt=(nt*(1.01183+kt*kt*(-.02625+.01926*_t-.00396*kt))-je)/(1.01183+kt*kt*(9*-.02625+11*.01926*_t+13*-.00396*kt));while(T(Tt)>x&&--ut>0);return _t=nt*nt,kt=_t*_t,vr=_t*kt,[Oe/(.84719-.13063*_t+vr*vr*(-.04515+.05494*_t-.02326*kt+.00331*vr)),nt]};function ws(){return c.geoProjection(dl).scale(175.295)}function Pl(Oe,je){return[Oe*(1+i(je))/2,2*(je-m(je/2))]}Pl.invert=function(Oe,je){for(var nt=je/2,ut=0,Tt=1/0;ut<10&&T(Tt)>l;++ut){var _t=i(je/2);je-=Tt=(je-m(je/2)-nt)/(1-.5/(_t*_t))}return[2*Oe/(1+i(je)),je]};function fu(){return c.geoProjection(Pl).scale(152.63)}var Su=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ku(){return fa(oe(1/0),Su).rotate([20,0]).scale(152.63)}function Kl(Oe,je){var nt=f(je),ut=i(je),Tt=d(Oe);if(Oe===0||T(je)===M)return[0,je];if(je===0)return[Oe,0];if(T(Oe)===M)return[Oe*ut,M*nt];var _t=u/(2*Oe)-2*Oe/u,kt=2*je/u,vr=(1-kt*kt)/(nt-kt),yr=_t*_t,fr=vr*vr,Tr=1+yr/fr,zr=1+fr/yr,Qr=(_t*nt/vr-_t/2)/Tr,on=(fr*nt/yr+vr/2)/zr,En=Qr*Qr+ut*ut/Tr,Nn=on*on-(fr*nt*nt/yr+vr*nt-1)/zr;return[M*(Qr+D(En)*Tt),M*(on+D(Nn<0?0:Nn)*d(-je*_t)*Tt)]}Kl.invert=function(Oe,je){Oe/=M,je/=M;var nt=Oe*Oe,ut=je*je,Tt=nt+ut,_t=u*u;return[Oe?(Tt-1+D((1-Tt)*(1-Tt)+4*nt))/(2*Oe)*M:0,_e(function(kt){return Tt*(u*f(kt)-2*kt)*u+4*kt*kt*(je-f(kt))+2*u*kt-_t*je},0)]};function el(){return c.geoProjection(Kl).scale(127.267)}var Cu=1.0148,cs=.23185,Yo=-.14499,tl=.02406,hu=Cu,Ts=5*cs,Io=7*Yo,Dl=9*tl,As=1.790857183;function zs(Oe,je){var nt=je*je;return[Oe,je*(Cu+nt*nt*(cs+nt*(Yo+tl*nt)))]}zs.invert=function(Oe,je){je>As?je=As:je<-As&&(je=-As);var nt=je,ut;do{var Tt=nt*nt;nt-=ut=(nt*(Cu+Tt*Tt*(cs+Tt*(Yo+tl*Tt)))-je)/(hu+Tt*Tt*(Ts+Tt*(Io+Dl*Tt)))}while(T(ut)>l);return[Oe,nt]};function go(){return c.geoProjection(zs).scale(139.319)}function Rl(Oe,je){if(T(je)<l)return[Oe,0];var nt=m(je),ut=Oe*f(je);return[f(ut)/nt,je+(1-i(ut))/nt]}Rl.invert=function(Oe,je){if(T(je)<l)return[Oe,0];var nt=Oe*Oe+je*je,ut=je*.5,Tt=10,_t;do{var kt=m(ut),vr=1/i(ut),yr=nt-2*je*ut+ut*ut;ut-=_t=(kt*yr+2*(ut-je))/(2+yr*vr*vr+2*(ut-je)*kt)}while(T(_t)>l&&--Tt>0);return kt=m(ut),[(T(je)<T(ut+1/kt)?F(Oe*kt):d(je)*d(Oe)*(I(T(Oe*kt))+M))/f(ut),ut]};function Il(){return c.geoProjection(Rl).scale(103.74)}function rl(Oe,je){var nt=ml(Oe[1],Oe[0]),ut=ml(je[1],je[0]),Tt=Fl(nt,ut),_t=Jl(nt)/Jl(ut);return yl([1,0,Oe[0][0],0,1,Oe[0][1]],yl([_t,0,0,0,_t,0],yl([i(Tt),f(Tt),0,-f(Tt),i(Tt),0],[1,0,-je[0][0],0,1,-je[0][1]])))}function fs(Oe){var je=1/(Oe[0]*Oe[4]-Oe[1]*Oe[3]);return[je*Oe[4],-je*Oe[1],je*(Oe[1]*Oe[5]-Oe[2]*Oe[4]),-je*Oe[3],je*Oe[0],je*(Oe[2]*Oe[3]-Oe[0]*Oe[5])]}function yl(Oe,je){return[Oe[0]*je[0]+Oe[1]*je[3],Oe[0]*je[1]+Oe[1]*je[4],Oe[0]*je[2]+Oe[1]*je[5]+Oe[2],Oe[3]*je[0]+Oe[4]*je[3],Oe[3]*je[1]+Oe[4]*je[4],Oe[3]*je[2]+Oe[4]*je[5]+Oe[5]]}function ml(Oe,je){return[Oe[0]-je[0],Oe[1]-je[1]]}function Jl(Oe){return D(Oe[0]*Oe[0]+Oe[1]*Oe[1])}function Fl(Oe,je){return a(Oe[0]*je[1]-Oe[1]*je[0],Oe[0]*je[0]+Oe[1]*je[1])}function nl(Oe,je,nt){ut(Oe,{transform:null});function ut(fr,Tr){if(fr.edges=vu(fr.face),Tr.face){var zr=fr.shared=Xs(fr.face,Tr.face),Qr=rl(zr.map(Tr.project),zr.map(fr.project));fr.transform=Tr.transform?yl(Tr.transform,Qr):Qr;for(var on=Tr.edges,En=0,Nn=on.length;En<Nn;++En)hs(zr[0],on[En][1])&&hs(zr[1],on[En][0])&&(on[En]=fr),hs(zr[0],on[En][0])&&hs(zr[1],on[En][1])&&(on[En]=fr);for(on=fr.edges,En=0,Nn=on.length;En<Nn;++En)hs(zr[0],on[En][0])&&hs(zr[1],on[En][1])&&(on[En]=Tr),hs(zr[0],on[En][1])&&hs(zr[1],on[En][0])&&(on[En]=Tr)}else fr.transform=Tr.transform;return fr.children&&fr.children.forEach(function(Jn){ut(Jn,fr)}),fr}function Tt(fr,Tr){var zr=je(fr,Tr),Qr=zr.project([fr*E,Tr*E]),on;return(on=zr.transform)?[on[0]*Qr[0]+on[1]*Qr[1]+on[2],-(on[3]*Qr[0]+on[4]*Qr[1]+on[5])]:(Qr[1]=-Qr[1],Qr)}xl(Oe)&&(Tt.invert=function(fr,Tr){var zr=_t(Oe,[fr,-Tr]);return zr&&(zr[0]*=S,zr[1]*=S,zr)});function _t(fr,Tr){var zr=fr.project.invert,Qr=fr.transform,on=Tr;if(Qr&&(Qr=fs(Qr),on=[Qr[0]*on[0]+Qr[1]*on[1]+Qr[2],Qr[3]*on[0]+Qr[4]*on[1]+Qr[5]]),zr&&fr===kt(En=zr(on)))return En;for(var En,Nn=fr.children,Jn=0,Ta=Nn&&Nn.length;Jn<Ta;++Jn)if(En=_t(Nn[Jn],Tr))return En}function kt(fr){return je(fr[0]*S,fr[1]*S)}var vr=c.geoProjection(Tt),yr=vr.stream;return vr.stream=function(fr){var Tr=vr.rotate(),zr=yr(fr),Qr=(vr.rotate([0,0]),yr(fr));return vr.rotate(Tr),zr.sphere=function(){Qr.polygonStart(),Qr.lineStart(),Zu(Qr,Oe),Qr.lineEnd(),Qr.polygonEnd()},zr},vr.angle(nt==null?-30:nt*E)}function Zu(Oe,je,nt){var ut,Tt=je.edges,_t=Tt.length,kt,vr={type:"MultiPoint",coordinates:je.face},yr=je.face.filter(function(Nn){return T(Nn[1])!==90}),fr=c.geoBounds({type:"MultiPoint",coordinates:yr}),Tr=!1,zr=-1,Qr=fr[1][0]-fr[0][0],on=Qr===180||Qr===360?[(fr[0][0]+fr[1][0])/2,(fr[0][1]+fr[1][1])/2]:c.geoCentroid(vr);if(nt)for(;++zr<_t&&Tt[zr]!==nt;);++zr;for(var En=0;En<_t;++En)kt=Tt[(En+zr)%_t],Array.isArray(kt)?(Tr||(Oe.point((ut=c.geoInterpolate(kt[0],on)(l))[0],ut[1]),Tr=!0),Oe.point((ut=c.geoInterpolate(kt[1],on)(l))[0],ut[1])):(Tr=!1,kt!==nt&&Zu(Oe,kt,je))}function hs(Oe,je){return Oe&&je&&Oe[0]===je[0]&&Oe[1]===je[1]}function Xs(Oe,je){for(var nt,ut,Tt=Oe.length,_t=null,kt=0;kt<Tt;++kt){nt=Oe[kt];for(var vr=je.length;--vr>=0;)if(ut=je[vr],nt[0]===ut[0]&&nt[1]===ut[1]){if(_t)return[_t,nt];_t=nt}}}function vu(Oe){for(var je=Oe.length,nt=[],ut=Oe[je-1],Tt=0;Tt<je;++Tt)nt.push([ut,ut=Oe[Tt]]);return nt}function xl(Oe){return Oe.project.invert||Oe.children&&Oe.children.some(xl)}var zl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],al=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Oe){return Oe.map(function(je){return zl[je]})});function Ol(Oe){Oe=Oe||function(nt){var ut=c.geoCentroid({type:"MultiPoint",coordinates:nt});return c.geoGnomonic().scale(1).translate([0,0]).rotate([-ut[0],-ut[1]])};var je=al.map(function(nt){return{face:nt,project:Oe(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,ut){var Tt=je[nt];Tt&&(Tt.children||(Tt.children=[])).push(je[ut])}),nl(je[0],function(nt,ut){return je[nt<-u/2?ut<0?6:4:nt<0?ut<0?2:0:nt<u/2?ut<0?3:1:ut<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var pu=2/D(3);function Lu(Oe,je){var nt=Ge(Oe,je);return[nt[0]*pu,nt[1]]}Lu.invert=function(Oe,je){return Ge.invert(Oe/pu,je)};function vc(Oe){Oe=Oe||function(nt){var ut=c.geoCentroid({type:"MultiPoint",coordinates:nt});return c.geoProjection(Lu).translate([0,0]).scale(1).rotate(ut[1]>0?[-ut[0],0]:[180-ut[0],180])};var je=al.map(function(nt){return{face:nt,project:Oe(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,ut){var Tt=je[nt];Tt&&(Tt.children||(Tt.children=[])).push(je[ut])}),nl(je[0],function(nt,ut){return je[nt<-u/2?ut<0?6:4:nt<0?ut<0?2:0:nt<u/2?ut<0?3:1:ut<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Bi(Oe){Oe=Oe||function(kt){var vr=kt.length===6?c.geoCentroid({type:"MultiPoint",coordinates:kt}):kt[0];return c.geoGnomonic().scale(1).translate([0,0]).rotate([-vr[0],-vr[1]])};var je=al.map(function(kt){for(var vr=kt.map(vs),yr=vr.length,fr=vr[yr-1],Tr,zr=[],Qr=0;Qr<yr;++Qr)Tr=vr[Qr],zr.push(ts([fr[0]*.9486832980505138+Tr[0]*.31622776601683794,fr[1]*.9486832980505138+Tr[1]*.31622776601683794,fr[2]*.9486832980505138+Tr[2]*.31622776601683794]),ts([Tr[0]*.9486832980505138+fr[0]*.31622776601683794,Tr[1]*.9486832980505138+fr[1]*.31622776601683794,Tr[2]*.9486832980505138+fr[2]*.31622776601683794])),fr=Tr;return zr}),nt=[],ut=[-1,0,0,1,0,1,4,5];je.forEach(function(kt,vr){for(var yr=al[vr],fr=yr.length,Tr=nt[vr]=[],zr=0;zr<fr;++zr)je.push([yr[zr],kt[(zr*2+2)%(2*fr)],kt[(zr*2+1)%(2*fr)]]),ut.push(vr),Tr.push(il(vs(kt[(zr*2+2)%(2*fr)]),vs(kt[(zr*2+1)%(2*fr)])))});var Tt=je.map(function(kt){return{project:Oe(kt),face:kt}});ut.forEach(function(kt,vr){var yr=Tt[kt];yr&&(yr.children||(yr.children=[])).push(Tt[vr])});function _t(kt,vr){var yr=i(vr),fr=[yr*i(kt),yr*f(kt),f(vr)],Tr=kt<-u/2?vr<0?6:4:kt<0?vr<0?2:0:kt<u/2?vr<0?3:1:vr<0?7:5,zr=nt[Tr];return Tt[bl(zr[0],fr)<0?8+3*Tr:bl(zr[1],fr)<0?8+3*Tr+1:bl(zr[2],fr)<0?8+3*Tr+2:Tr]}return nl(Tt[0],_t).angle(-30).scale(110.625).center([0,45])}function bl(Oe,je){for(var nt=0,ut=Oe.length,Tt=0;nt<ut;++nt)Tt+=Oe[nt]*je[nt];return Tt}function il(Oe,je){return[Oe[1]*je[2]-Oe[2]*je[1],Oe[2]*je[0]-Oe[0]*je[2],Oe[0]*je[1]-Oe[1]*je[0]]}function ts(Oe){return[a(Oe[1],Oe[0])*E,F(s(-1,o(1,Oe[2])))*E]}function vs(Oe){var je=Oe[0]*S,nt=Oe[1]*S,ut=i(nt);return[ut*i(je),ut*f(je),f(nt)]}function Nl(){}function uo(Oe){if((nt=Oe.length)<4)return!1;for(var je=0,nt,ut=Oe[nt-1][1]*Oe[0][0]-Oe[nt-1][0]*Oe[0][1];++je<nt;)ut+=Oe[je-1][1]*Oe[je][0]-Oe[je-1][0]*Oe[je][1];return ut<=0}function Pu(Oe,je){for(var nt=je[0],ut=je[1],Tt=!1,_t=0,kt=Oe.length,vr=kt-1;_t<kt;vr=_t++){var yr=Oe[_t],fr=yr[0],Tr=yr[1],zr=Oe[vr],Qr=zr[0],on=zr[1];Tr>ut^on>ut&&nt<(Qr-fr)*(ut-Tr)/(on-Tr)+fr&&(Tt=!Tt)}return Tt}function Wo(Oe,je){var nt=je.stream,ut;if(!nt)throw new Error("invalid projection");switch(Oe&&Oe.type){case"Feature":ut=Os;break;case"FeatureCollection":ut=js;break;default:ut=Vo;break}return ut(Oe,nt)}function js(Oe,je){return{type:"FeatureCollection",features:Oe.features.map(function(nt){return Os(nt,je)})}}function Os(Oe,je){return{type:"Feature",id:Oe.id,properties:Oe.properties,geometry:Vo(Oe.geometry,je)}}function Ms(Oe,je){return{type:"GeometryCollection",geometries:Oe.geometries.map(function(nt){return Vo(nt,je)})}}function Vo(Oe,je){if(!Oe)return null;if(Oe.type==="GeometryCollection")return Ms(Oe,je);var nt;switch(Oe.type){case"Point":nt=ps;break;case"MultiPoint":nt=ps;break;case"LineString":nt=Du;break;case"MultiLineString":nt=Du;break;case"Polygon":nt=$l;break;case"MultiPolygon":nt=$l;break;case"Sphere":nt=$l;break;default:return null}return c.geoStream(Oe,je(nt)),nt.result()}var Ki=[],No=[],ps={point:function(Oe,je){Ki.push([Oe,je])},result:function(){var Oe=Ki.length?Ki.length<2?{type:"Point",coordinates:Ki[0]}:{type:"MultiPoint",coordinates:Ki}:null;return Ki=[],Oe}},Du={lineStart:Nl,point:function(Oe,je){Ki.push([Oe,je])},lineEnd:function(){Ki.length&&(No.push(Ki),Ki=[])},result:function(){var Oe=No.length?No.length<2?{type:"LineString",coordinates:No[0]}:{type:"MultiLineString",coordinates:No}:null;return No=[],Oe}},$l={polygonStart:Nl,lineStart:Nl,point:function(Oe,je){Ki.push([Oe,je])},lineEnd:function(){var Oe=Ki.length;if(Oe){do Ki.push(Ki[0].slice());while(++Oe<4);No.push(Ki),Ki=[]}},polygonEnd:Nl,result:function(){if(!No.length)return null;var Oe=[],je=[];return No.forEach(function(nt){uo(nt)?Oe.push([nt]):je.push(nt)}),je.forEach(function(nt){var ut=nt[0];Oe.some(function(Tt){if(Pu(Tt[0],ut))return Tt.push(nt),!0})||Oe.push([nt])}),No=[],Oe.length?Oe.length>1?{type:"MultiPolygon",coordinates:Oe}:{type:"Polygon",coordinates:Oe[0]}:null}};function Ru(Oe){var je=Oe(M,0)[0]-Oe(-M,0)[0];function nt(ut,Tt){var _t=T(ut)<M,kt=Oe(_t?ut:ut>0?ut-u:ut+u,Tt),vr=(kt[0]-kt[1])*p,yr=(kt[0]+kt[1])*p;if(_t)return[vr,yr];var fr=je*p,Tr=vr>0^yr>0?-1:1;return[Tr*vr-d(yr)*fr,Tr*yr-d(vr)*fr]}return Oe.invert&&(nt.invert=function(ut,Tt){var _t=(ut+Tt)*p,kt=(Tt-ut)*p,vr=T(_t)<.5*je&&T(kt)<.5*je;if(!vr){var yr=je*p,fr=_t>0^kt>0?-1:1,Tr=-fr*ut+(kt>0?1:-1)*yr,zr=-fr*Tt+(_t>0?1:-1)*yr;_t=(-Tr-zr)*p,kt=(Tr-zr)*p}var Qr=Oe.invert(_t,kt);return vr||(Qr[0]+=_t>0?u:-u),Qr}),c.geoProjection(nt).rotate([-90,-90,45]).clipAngle(180-.001)}function bt(){return Ru(Mr).scale(176.423)}function Bt(){return Ru(ya).scale(111.48)}function dr(Oe,je){if(!(0<=(je=+je)&&je<=20))throw new Error("invalid digits");function nt(fr){var Tr=fr.length,zr=2,Qr=new Array(Tr);for(Qr[0]=+fr[0].toFixed(je),Qr[1]=+fr[1].toFixed(je);zr<Tr;)Qr[zr]=fr[zr],++zr;return Qr}function ut(fr){return fr.map(nt)}function Tt(fr){for(var Tr=nt(fr[0]),zr=[Tr],Qr=1;Qr<fr.length;Qr++){var on=nt(fr[Qr]);(on.length>2||on[0]!=Tr[0]||on[1]!=Tr[1])&&(zr.push(on),Tr=on)}return zr.length===1&&fr.length>1&&zr.push(nt(fr[fr.length-1])),zr}function _t(fr){return fr.map(Tt)}function kt(fr){if(fr==null)return fr;var Tr;switch(fr.type){case"GeometryCollection":Tr={type:"GeometryCollection",geometries:fr.geometries.map(kt)};break;case"Point":Tr={type:"Point",coordinates:nt(fr.coordinates)};break;case"MultiPoint":Tr={type:fr.type,coordinates:ut(fr.coordinates)};break;case"LineString":Tr={type:fr.type,coordinates:Tt(fr.coordinates)};break;case"MultiLineString":case"Polygon":Tr={type:fr.type,coordinates:_t(fr.coordinates)};break;case"MultiPolygon":Tr={type:"MultiPolygon",coordinates:fr.coordinates.map(_t)};break;default:return fr}return fr.bbox!=null&&(Tr.bbox=fr.bbox),Tr}function vr(fr){var Tr={type:"Feature",properties:fr.properties,geometry:kt(fr.geometry)};return fr.id!=null&&(Tr.id=fr.id),fr.bbox!=null&&(Tr.bbox=fr.bbox),Tr}if(Oe!=null)switch(Oe.type){case"Feature":return vr(Oe);case"FeatureCollection":{var yr={type:"FeatureCollection",features:Oe.features.map(vr)};return Oe.bbox!=null&&(yr.bbox=Oe.bbox),yr}default:return kt(Oe)}return Oe}function cr(Oe){var je=f(Oe);function nt(ut,Tt){var _t=je?m(ut*je/2)/je:ut/2;if(!Tt)return[2*_t,-Oe];var kt=2*e(_t*f(Tt)),vr=1/m(Tt);return[f(kt)*vr,Tt+(1-i(kt))*vr-Oe]}return nt.invert=function(ut,Tt){if(T(Tt+=Oe)<l)return[je?2*e(je*ut/2)/je:ut,0];var _t=ut*ut+Tt*Tt,kt=0,vr=10,yr;do{var fr=m(kt),Tr=1/i(kt),zr=_t-2*Tt*kt+kt*kt;kt-=yr=(fr*zr+2*(kt-Tt))/(2+zr*Tr*Tr+2*(kt-Tt)*fr)}while(T(yr)>l&&--vr>0);var Qr=ut*(fr=m(kt)),on=m(T(Tt)<T(kt+1/fr)?F(Qr)*.5:I(Qr)*.5+u/4)/f(kt);return[je?2*e(je*on)/je:2*on,kt]},nt}function Or(){return We(cr).scale(131.215)}var ln=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];ln.forEach(function(Oe){Oe[1]*=1.0144});function _n(Oe,je){var nt=o(18,T(je)*36/u),ut=r(nt),Tt=nt-ut,_t=(zr=ln[ut])[0],kt=zr[1],vr=(zr=ln[++ut])[0],yr=zr[1],fr=(zr=ln[o(19,++ut)])[0],Tr=zr[1],zr;return[Oe*(vr+Tt*(fr-_t)/2+Tt*Tt*(fr-2*vr+_t)/2),(je>0?M:-M)*(yr+Tt*(Tr-kt)/2+Tt*Tt*(Tr-2*yr+kt)/2)]}_n.invert=function(Oe,je){var nt=je/M,ut=nt*90,Tt=o(18,T(ut/5)),_t=s(0,r(Tt));do{var kt=ln[_t][1],vr=ln[_t+1][1],yr=ln[o(19,_t+2)][1],fr=yr-kt,Tr=yr-2*vr+kt,zr=2*(T(nt)-vr)/fr,Qr=Tr/fr,on=zr*(1-Qr*zr*(1-2*Qr*zr));if(on>=0||_t===1){ut=(je>=0?5:-5)*(on+Tt);var En=50,Nn;do Tt=o(18,T(ut)/5),_t=r(Tt),on=Tt-_t,kt=ln[_t][1],vr=ln[_t+1][1],yr=ln[o(19,_t+2)][1],ut-=(Nn=(je>=0?M:-M)*(vr+on*(yr-kt)/2+on*on*(yr-2*vr+kt)/2)-je)*E;while(T(Nn)>x&&--En>0);break}}while(--_t>=0);var Jn=ln[_t][0],Ta=ln[_t+1][0],Ea=ln[o(19,_t+2)][0];return[Oe/(Ta+on*(Ea-Jn)/2+on*on*(Ea-2*Ta+Jn)/2),ut*S]};function Pn(){return c.geoProjection(_n).scale(152.63)}function zn(Oe){function je(nt,ut){var Tt=i(ut),_t=(Oe-1)/(Oe-Tt*i(nt));return[_t*Tt*f(nt),_t*f(ut)]}return je.invert=function(nt,ut){var Tt=nt*nt+ut*ut,_t=D(Tt),kt=(Oe-D(1-Tt*(Oe+1)/(Oe-1)))/((Oe-1)/_t+_t/(Oe-1));return[a(nt*kt,_t*D(1-kt*kt)),_t?F(ut*kt/_t):0]},je}function Xn(Oe,je){var nt=zn(Oe);if(!je)return nt;var ut=i(je),Tt=f(je);function _t(kt,vr){var yr=nt(kt,vr),fr=yr[1],Tr=fr*Tt/(Oe-1)+ut;return[yr[0]*ut/Tr,fr/Tr]}return _t.invert=function(kt,vr){var yr=(Oe-1)/(Oe-1-vr*Tt);return nt.invert(yr*kt,yr*vr*ut)},_t}function wn(){var Oe=2,je=0,nt=c.geoProjectionMutator(Xn),ut=nt(Oe,je);return ut.distance=function(Tt){return arguments.length?nt(Oe=+Tt,je):Oe},ut.tilt=function(Tt){return arguments.length?nt(Oe,je=Tt*S):je*E},ut.scale(432.147).clipAngle(I(1/Oe)*E-1e-6)}var Un=1e-4,On=1e4,jn=-180,ia=jn+Un,Ga=180,za=Ga-Un,Ya=-90,ja=Ya+Un,aa=90,ba=aa-Un;function Qa(Oe){return Oe.length>0}function si(Oe){return Math.floor(Oe*On)/On}function Mi(Oe){return Oe===Ya||Oe===aa?[0,Oe]:[jn,si(Oe)]}function Ei(Oe){var je=Oe[0],nt=Oe[1],ut=!1;return je<=ia?(je=jn,ut=!0):je>=za&&(je=Ga,ut=!0),nt<=ja?(nt=Ya,ut=!0):nt>=ba&&(nt=aa,ut=!0),ut?[je,nt]:Oe}function wi(Oe){return Oe.map(Ei)}function Pi(Oe,je,nt){for(var ut=0,Tt=Oe.length;ut<Tt;++ut){var _t=Oe[ut].slice();nt.push({index:-1,polygon:je,ring:_t});for(var kt=0,vr=_t.length;kt<vr;++kt){var yr=_t[kt],fr=yr[0],Tr=yr[1];if(fr<=ia||fr>=za||Tr<=ja||Tr>=ba){_t[kt]=Ei(yr);for(var zr=kt+1;zr<vr;++zr){var Qr=_t[zr],on=Qr[0],En=Qr[1];if(on>ia&&on<za&&En>ja&&En<ba)break}if(zr===kt+1)continue;if(kt){var Nn={index:-1,polygon:je,ring:_t.slice(0,kt+1)};Nn.ring[Nn.ring.length-1]=Mi(Tr),nt[nt.length-1]=Nn}else nt.pop();if(zr>=vr)break;nt.push({index:-1,polygon:je,ring:_t=_t.slice(zr-1)}),_t[0]=Mi(_t[0][1]),kt=-1,vr=_t.length}}}}function hi(Oe){var je,nt=Oe.length,ut={},Tt={},_t,kt,vr,yr,fr;for(je=0;je<nt;++je){if(_t=Oe[je],kt=_t.ring[0],yr=_t.ring[_t.ring.length-1],kt[0]===yr[0]&&kt[1]===yr[1]){_t.polygon.push(_t.ring),Oe[je]=null;continue}_t.index=je,ut[kt]=Tt[yr]=_t}for(je=0;je<nt;++je)if(_t=Oe[je],_t){if(kt=_t.ring[0],yr=_t.ring[_t.ring.length-1],vr=Tt[kt],fr=ut[yr],delete ut[kt],delete Tt[yr],kt[0]===yr[0]&&kt[1]===yr[1]){_t.polygon.push(_t.ring);continue}vr?(delete Tt[kt],delete ut[vr.ring[0]],vr.ring.pop(),Oe[vr.index]=null,_t={index:-1,polygon:vr.polygon,ring:vr.ring.concat(_t.ring)},vr===fr?_t.polygon.push(_t.ring):(_t.index=nt++,Oe.push(ut[_t.ring[0]]=Tt[_t.ring[_t.ring.length-1]]=_t))):fr?(delete ut[yr],delete Tt[fr.ring[fr.ring.length-1]],_t.ring.pop(),_t={index:nt++,polygon:fr.polygon,ring:_t.ring.concat(fr.ring)},Oe[fr.index]=null,Oe.push(ut[_t.ring[0]]=Tt[_t.ring[_t.ring.length-1]]=_t)):(_t.ring.push(_t.ring[0]),_t.polygon.push(_t.ring))}}function ko(Oe){var je={type:"Feature",geometry:ao(Oe.geometry)};return Oe.id!=null&&(je.id=Oe.id),Oe.bbox!=null&&(je.bbox=Oe.bbox),Oe.properties!=null&&(je.properties=Oe.properties),je}function ao(Oe){if(Oe==null)return Oe;var je,nt,ut,Tt;switch(Oe.type){case"GeometryCollection":je={type:"GeometryCollection",geometries:Oe.geometries.map(ao)};break;case"Point":je={type:"Point",coordinates:Ei(Oe.coordinates)};break;case"MultiPoint":case"LineString":je={type:Oe.type,coordinates:wi(Oe.coordinates)};break;case"MultiLineString":je={type:"MultiLineString",coordinates:Oe.coordinates.map(wi)};break;case"Polygon":{var _t=[];Pi(Oe.coordinates,_t,nt=[]),hi(nt),je={type:"Polygon",coordinates:_t};break}case"MultiPolygon":{nt=[],ut=-1,Tt=Oe.coordinates.length;for(var kt=new Array(Tt);++ut<Tt;)Pi(Oe.coordinates[ut],kt[ut]=[],nt);hi(nt),je={type:"MultiPolygon",coordinates:kt.filter(Qa)};break}default:return Oe}return Oe.bbox!=null&&(je.bbox=Oe.bbox),je}function li(Oe){if(Oe==null)return Oe;switch(Oe.type){case"Feature":return ko(Oe);case"FeatureCollection":{var je={type:"FeatureCollection",features:Oe.features.map(ko)};return Oe.bbox!=null&&(je.bbox=Oe.bbox),je}default:return ao(Oe)}}function Aa(Oe,je){var nt=m(je/2),ut=f(w*nt);return[Oe*(.74482-.34588*ut*ut),1.70711*nt]}Aa.invert=function(Oe,je){var nt=je/1.70711,ut=f(w*nt);return[Oe/(.74482-.34588*ut*ut),2*e(nt)]};function ki(){return c.geoProjection(Aa).scale(146.153)}function bo(Oe,je,nt){var ut=c.geoInterpolate(je,nt),Tt=ut(.5),_t=c.geoRotation([-Tt[0],-Tt[1]])(je),kt=ut.distance/2,vr=-F(f(_t[1]*S)/f(kt)),yr=[-Tt[0],-Tt[1],-(_t[0]>0?u-vr:vr)*E],fr=c.geoProjection(Oe(kt)).rotate(yr),Tr=c.geoRotation(yr),zr=fr.center;return delete fr.rotate,fr.center=function(Qr){return arguments.length?zr(Tr(Qr)):Tr.invert(zr())},fr.clipAngle(90)}function Mo(Oe){var je=i(Oe);function nt(ut,Tt){var _t=c.geoGnomonicRaw(ut,Tt);return _t[0]*=je,_t}return nt.invert=function(ut,Tt){return c.geoGnomonicRaw.invert(ut/je,Tt)},nt}function ds(){return Ns([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ns(Oe,je){return bo(Mo,Oe,je)}function Co(Oe){if(!(Oe*=2))return c.geoAzimuthalEquidistantRaw;var je=-Oe/2,nt=-je,ut=Oe*Oe,Tt=m(nt),_t=.5/f(nt);function kt(vr,yr){var fr=I(i(yr)*i(vr-je)),Tr=I(i(yr)*i(vr-nt)),zr=yr<0?-1:1;return fr*=fr,Tr*=Tr,[(fr-Tr)/(2*Oe),zr*D(4*ut*Tr-(ut-fr+Tr)*(ut-fr+Tr))/(2*Oe)]}return kt.invert=function(vr,yr){var fr=yr*yr,Tr=i(D(fr+(Qr=vr+je)*Qr)),zr=i(D(fr+(Qr=vr+nt)*Qr)),Qr,on;return[a(on=Tr-zr,Qr=(Tr+zr)*Tt),(yr<0?-1:1)*I(D(Qr*Qr+on*on)*_t)]},kt}function ol(){return Bs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Bs(Oe,je){return bo(Co,Oe,je)}function Fo(Oe,je){if(T(je)<l)return[Oe,0];var nt=T(je/M),ut=F(nt);if(T(Oe)<l||T(T(je)-M)<l)return[0,d(je)*u*m(ut/2)];var Tt=i(ut),_t=T(u/Oe-Oe/u)/2,kt=_t*_t,vr=Tt/(nt+Tt-1),yr=vr*(2/nt-1),fr=yr*yr,Tr=fr+kt,zr=vr-fr,Qr=kt+vr;return[d(Oe)*u*(_t*zr+D(kt*zr*zr-Tr*(vr*vr-fr)))/Tr,d(je)*u*(yr*Qr-_t*D((kt+1)*Tr-Qr*Qr))/Tr]}Fo.invert=function(Oe,je){if(T(je)<l)return[Oe,0];if(T(Oe)<l)return[0,M*f(2*e(je/u))];var nt=(Oe/=u)*Oe,ut=(je/=u)*je,Tt=nt+ut,_t=Tt*Tt,kt=-T(je)*(1+Tt),vr=kt-2*ut+nt,yr=-2*kt+1+2*ut+_t,fr=ut/yr+(2*vr*vr*vr/(yr*yr*yr)-9*kt*vr/(yr*yr))/27,Tr=(kt-vr*vr/(3*yr))/yr,zr=2*D(-Tr/3),Qr=I(3*fr/(Tr*zr))/3;return[u*(Tt-1+D(1+2*(nt-ut)+_t))/(2*Oe),d(je)*u*(-zr*i(Qr+u/3)-vr/(3*yr))]};function Lo(){return c.geoProjection(Fo).scale(79.4183)}function Ql(Oe,je){if(T(je)<l)return[Oe,0];var nt=T(je/M),ut=F(nt);if(T(Oe)<l||T(T(je)-M)<l)return[0,d(je)*u*m(ut/2)];var Tt=i(ut),_t=T(u/Oe-Oe/u)/2,kt=_t*_t,vr=Tt*(D(1+kt)-_t*Tt)/(1+kt*nt*nt);return[d(Oe)*u*vr,d(je)*u*D(1-vr*(2*_t+vr))]}Ql.invert=function(Oe,je){if(!Oe)return[0,M*f(2*e(je/u))];var nt=T(Oe/u),ut=(1-nt*nt-(je/=u)*je)/(2*nt),Tt=ut*ut,_t=D(Tt+1);return[d(Oe)*u*(_t-ut),d(je)*M*f(2*a(D((1-2*ut*nt)*(ut+_t)-nt),D(_t+ut+nt)))]};function du(){return c.geoProjection(Ql).scale(79.4183)}function gs(Oe,je){if(T(je)<l)return[Oe,0];var nt=je/M,ut=F(nt);if(T(Oe)<l||T(T(je)-M)<l)return[0,u*m(ut/2)];var Tt=(u/Oe-Oe/u)/2,_t=nt/(1+i(ut));return[u*(d(Oe)*D(Tt*Tt+1-_t*_t)-Tt),u*_t]}gs.invert=function(Oe,je){if(!je)return[Oe,0];var nt=je/u,ut=(u*u*(1-nt*nt)-Oe*Oe)/(2*u*Oe);return[Oe?u*(d(Oe)*D(ut*ut+1)-ut):0,M*f(2*e(nt))]};function Iu(){return c.geoProjection(gs).scale(79.4183)}function ql(Oe,je){if(!je)return[Oe,0];var nt=T(je);if(!Oe||nt===M)return[0,je];var ut=nt/M,Tt=ut*ut,_t=(8*ut-Tt*(Tt+2)-5)/(2*Tt*(ut-1)),kt=_t*_t,vr=ut*_t,yr=Tt+kt+2*vr,fr=ut+3*_t,Tr=Oe/M,zr=Tr+1/Tr,Qr=d(T(Oe)-M)*D(zr*zr-4),on=Qr*Qr,En=yr*(Tt+kt*on-1)+(1-Tt)*(Tt*(fr*fr+4*kt)+12*vr*kt+4*kt*kt),Nn=(Qr*(yr+kt-1)+2*D(En))/(4*yr+on);return[d(Oe)*M*Nn,d(je)*M*D(1+Qr*T(Nn)-Nn*Nn)]}ql.invert=function(Oe,je){var nt;if(!Oe||!je)return[Oe,je];je/=u;var ut=d(Oe)*Oe/M,Tt=(ut*ut-1+4*je*je)/T(ut),_t=Tt*Tt,kt=2*je,vr=50;do{var yr=kt*kt,fr=(8*kt-yr*(yr+2)-5)/(2*yr*(kt-1)),Tr=(3*kt-yr*kt-10)/(2*yr*kt),zr=fr*fr,Qr=kt*fr,on=kt+fr,En=on*on,Nn=kt+3*fr,Jn=En*(yr+zr*_t-1)+(1-yr)*(yr*(Nn*Nn+4*zr)+zr*(12*Qr+4*zr)),Ta=-2*on*(4*Qr*zr+(1-4*yr+3*yr*yr)*(1+Tr)+zr*(-6+14*yr-_t+(-8+8*yr-2*_t)*Tr)+Qr*(-8+12*yr+(-10+10*yr-_t)*Tr)),Ea=D(Jn),ni=Tt*(En+zr-1)+2*Ea-ut*(4*En+_t),qa=Tt*(2*fr*Tr+2*on*(1+Tr))+Ta/Ea-8*on*(Tt*(-1+zr+En)+2*Ea)*(1+Tr)/(_t+4*En);kt-=nt=ni/qa}while(nt>l&&--vr>0);return[d(Oe)*(D(Tt*Tt+4)+Tt)*u/4,M*kt]};function Gc(){return c.geoProjection(ql).scale(127.16)}function Ku(Oe,je,nt,ut,Tt){function _t(kt,vr){var yr=nt*f(ut*vr),fr=D(1-yr*yr),Tr=D(2/(1+fr*i(kt*=Tt)));return[Oe*fr*Tr*f(kt),je*yr*Tr]}return _t.invert=function(kt,vr){var yr=kt/Oe,fr=vr/je,Tr=D(yr*yr+fr*fr),zr=2*F(Tr/2);return[a(kt*m(zr),Oe*Tr)/Tt,Tr&&F(vr*f(zr)/(je*nt*Tr))/ut]},_t}function gu(Oe,je,nt,ut){var Tt=u/3;Oe=s(Oe,l),je=s(je,l),Oe=o(Oe,M),je=o(je,u-l),nt=s(nt,0),nt=o(nt,100-l),ut=s(ut,l);var _t=nt/100+1,kt=ut/100,vr=I(_t*i(Tt))/Tt,yr=f(Oe)/f(vr*M),fr=je/u,Tr=D(kt*f(Oe/2)/f(je/2)),zr=Tr/D(fr*yr*vr),Qr=1/(Tr*D(fr*yr*vr));return Ku(zr,Qr,yr,vr,fr)}function Ju(){var Oe=65*S,je=60*S,nt=20,ut=200,Tt=c.geoProjectionMutator(gu),_t=Tt(Oe,je,nt,ut);return _t.poleline=function(kt){return arguments.length?Tt(Oe=+kt*S,je,nt,ut):Oe*E},_t.parallels=function(kt){return arguments.length?Tt(Oe,je=+kt*S,nt,ut):je*E},_t.inflation=function(kt){return arguments.length?Tt(Oe,je,nt=+kt,ut):nt},_t.ratio=function(kt){return arguments.length?Tt(Oe,je,nt,ut=+kt):ut},_t.scale(163.775)}function Es(){return Ju().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var _l=4*u+3*D(3),Fu=2*D(2*u*D(3)/_l),yu=be(Fu*D(3)/u,Fu,_l/6);function Xo(){return c.geoProjection(yu).scale(176.84)}function $u(Oe,je){return[Oe*D(1-3*je*je/(u*u)),je]}$u.invert=function(Oe,je){return[Oe/D(1-3*je*je/(u*u)),je]};function kc(){return c.geoProjection($u).scale(152.63)}function rs(Oe,je){var nt=i(je),ut=i(Oe)*nt,Tt=1-ut,_t=i(Oe=a(f(Oe)*nt,-f(je))),kt=f(Oe);return nt=D(1-ut*ut),[kt*nt-_t*Tt,-_t*nt-kt*Tt]}rs.invert=function(Oe,je){var nt=(Oe*Oe+je*je)/-2,ut=D(-nt*(2+nt)),Tt=je*nt+Oe*ut,_t=Oe*nt-je*ut,kt=D(_t*_t+Tt*Tt);return[a(ut*Tt,kt*(1+nt)),kt?-F(ut*_t/kt):0]};function zu(){return c.geoProjection(rs).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Ou(Oe,je){var nt=X(Oe,je);return[(nt[0]+Oe/M)/2,(nt[1]+je)/2]}Ou.invert=function(Oe,je){var nt=Oe,ut=je,Tt=25;do{var _t=i(ut),kt=f(ut),vr=f(2*ut),yr=kt*kt,fr=_t*_t,Tr=f(nt),zr=i(nt/2),Qr=f(nt/2),on=Qr*Qr,En=1-fr*zr*zr,Nn=En?I(_t*zr)*D(Jn=1/En):Jn=0,Jn,Ta=.5*(2*Nn*_t*Qr+nt/M)-Oe,Ea=.5*(Nn*kt+ut)-je,ni=.5*Jn*(fr*on+Nn*_t*zr*yr)+.5/M,qa=Jn*(Tr*vr/4-Nn*kt*Qr),ai=.125*Jn*(vr*Qr-Nn*kt*fr*Tr),Ti=.5*Jn*(yr*zr+Nn*on*_t)+.5,Yr=qa*ai-Ti*ni,et=(Ea*qa-Ta*Ti)/Yr,Jt=(Ta*ai-Ea*ni)/Yr;nt-=et,ut-=Jt}while((T(et)>l||T(Jt)>l)&&--Tt>0);return[nt,ut]};function Qu(){return c.geoProjection(Ou).scale(158.837)}y.geoNaturalEarth=c.geoNaturalEarth1,y.geoNaturalEarthRaw=c.geoNaturalEarth1Raw,y.geoAiry=j,y.geoAiryRaw=ee,y.geoAitoff=ae,y.geoAitoffRaw=X,y.geoArmadillo=K,y.geoArmadilloRaw=he,y.geoAugust=U,y.geoAugustRaw=J,y.geoBaker=Z,y.geoBakerRaw=re,y.geoBerghaus=ie,y.geoBerghausRaw=Q,y.geoBertin1953=xe,y.geoBertin1953Raw=ye,y.geoBoggs=Ze,y.geoBoggsRaw=Le,y.geoBonne=dt,y.geoBonneRaw=Ve,y.geoBottomley=Qt,y.geoBottomleyRaw=Ft,y.geoBromley=Ct,y.geoBromleyRaw=Ot,y.geoChamberlin=Ee,y.geoChamberlinRaw=Xe,y.geoChamberlinAfrica=Ye,y.geoCollignon=Ke,y.geoCollignonRaw=Ge,y.geoCraig=At,y.geoCraigRaw=qe,y.geoCraster=Gt,y.geoCrasterRaw=Mt,y.geoCylindricalEqualArea=Ht,y.geoCylindricalEqualAreaRaw=zt,y.geoCylindricalStereographic=Wt,y.geoCylindricalStereographicRaw=Zt,y.geoEckert1=Gr,y.geoEckert1Raw=sr,y.geoEckert2=qr,y.geoEckert2Raw=cn,y.geoEckert3=rr,y.geoEckert3Raw=st,y.geoEckert4=hr,y.geoEckert4Raw=$t,y.geoEckert5=tt,y.geoEckert5Raw=Sr,y.geoEckert6=lt,y.geoEckert6Raw=Qe,y.geoEisenlohr=Vt,y.geoEisenlohrRaw=Et,y.geoFahey=ot,y.geoFaheyRaw=Se,y.geoFoucaut=pt,y.geoFoucautRaw=ct,y.geoFoucautSinusoidal=xt,y.geoFoucautSinusoidalRaw=St,y.geoGilbert=or,y.geoGingery=Jr,y.geoGingeryRaw=Pr,y.geoGinzburg4=Fr,y.geoGinzburg4Raw=br,y.geoGinzburg5=Lr,y.geoGinzburg5Raw=Hr,y.geoGinzburg6=Rt,y.geoGinzburg6Raw=at,y.geoGinzburg8=ur,y.geoGinzburg8Raw=Kt,y.geoGinzburg9=Vr,y.geoGinzburg9Raw=Nr,y.geoGringorten=yn,y.geoGringortenRaw=Mr,y.geoGuyou=Ka,y.geoGuyouRaw=ya,y.geoHammer=le,y.geoHammerRaw=oe,y.geoHammerRetroazimuthal=kr,y.geoHammerRetroazimuthalRaw=ri,y.geoHealpix=Xa,y.geoHealpixRaw=ra,y.geoHill=Yt,y.geoHillRaw=yi,y.geoHomolosine=Tn,y.geoHomolosineRaw=Cn,y.geoHufnagel=_r,y.geoHufnagelRaw=gn,y.geoHyperelliptical=Yn,y.geoHyperellipticalRaw=An,y.geoInterrupt=fa,y.geoInterruptedBoggs=ka,y.geoInterruptedHomolosine=Ia,y.geoInterruptedMollweide=ro,y.geoInterruptedMollweideHemispheres=$s,y.geoInterruptedSinuMollweide=Wl,y.geoInterruptedSinusoidal=Gs,y.geoKavrayskiy7=Zi,y.geoKavrayskiy7Raw=Ys,y.geoLagrange=Cl,y.geoLagrangeRaw=Ro,y.geoLarrivee=vl,y.geoLarriveeRaw=Fi,y.geoLaskowski=zi,y.geoLaskowskiRaw=lo,y.geoLittrow=no,y.geoLittrowRaw=po,y.geoLoximuthal=Qs,y.geoLoximuthalRaw=us,y.geoMiller=es,y.geoMillerRaw=lu,y.geoModifiedStereographic=Fs,y.geoModifiedStereographicRaw=Au,y.geoModifiedStereographicAlaska=Xl,y.geoModifiedStereographicGs48=Xu,y.geoModifiedStereographicGs50=ju,y.geoModifiedStereographicMiller=Ws,y.geoModifiedStereographicLee=Ll,y.geoMollweide=De,y.geoMollweideRaw=ke,y.geoMtFlatPolarParabolic=Mu,y.geoMtFlatPolarParabolicRaw=cu,y.geoMtFlatPolarQuartic=Eu,y.geoMtFlatPolarQuarticRaw=jl,y.geoMtFlatPolarSinusoidal=Zl,y.geoMtFlatPolarSinusoidalRaw=qs,y.geoNaturalEarth2=ws,y.geoNaturalEarth2Raw=dl,y.geoNellHammer=fu,y.geoNellHammerRaw=Pl,y.geoInterruptedQuarticAuthalic=ku,y.geoNicolosi=el,y.geoNicolosiRaw=Kl,y.geoPatterson=go,y.geoPattersonRaw=zs,y.geoPolyconic=Il,y.geoPolyconicRaw=Rl,y.geoPolyhedral=nl,y.geoPolyhedralButterfly=Ol,y.geoPolyhedralCollignon=vc,y.geoPolyhedralWaterman=Bi,y.geoProject=Wo,y.geoGringortenQuincuncial=bt,y.geoPeirceQuincuncial=Bt,y.geoPierceQuincuncial=Bt,y.geoQuantize=dr,y.geoQuincuncial=Ru,y.geoRectangularPolyconic=Or,y.geoRectangularPolyconicRaw=cr,y.geoRobinson=Pn,y.geoRobinsonRaw=_n,y.geoSatellite=wn,y.geoSatelliteRaw=Xn,y.geoSinuMollweide=sn,y.geoSinuMollweideRaw=mn,y.geoSinusoidal=Ie,y.geoSinusoidalRaw=ze,y.geoStitch=li,y.geoTimes=ki,y.geoTimesRaw=Aa,y.geoTwoPointAzimuthal=Ns,y.geoTwoPointAzimuthalRaw=Mo,y.geoTwoPointAzimuthalUsa=ds,y.geoTwoPointEquidistant=Bs,y.geoTwoPointEquidistantRaw=Co,y.geoTwoPointEquidistantUsa=ol,y.geoVanDerGrinten=Lo,y.geoVanDerGrintenRaw=Fo,y.geoVanDerGrinten2=du,y.geoVanDerGrinten2Raw=Ql,y.geoVanDerGrinten3=Iu,y.geoVanDerGrinten3Raw=gs,y.geoVanDerGrinten4=Gc,y.geoVanDerGrinten4Raw=ql,y.geoWagner=Ju,y.geoWagner7=Es,y.geoWagnerRaw=gu,y.geoWagner4=Xo,y.geoWagner4Raw=yu,y.geoWagner6=kc,y.geoWagner6Raw=$u,y.geoWiechel=zu,y.geoWiechelRaw=rs,y.geoWinkel3=Qu,y.geoWinkel3Raw=Ou,Object.defineProperty(y,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V,t("d3-array")):(y=y||self,c(y.d3=y.d3||{},y.d3))})(this,function(y,c){function A(){return new T}function T(){this.reset()}T.prototype={constructor:T,reset:function(){this.s=this.t=0},add:function(bt){a(e,bt,this.t),a(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new T;function a(bt,Bt,dr){var cr=bt.s=Bt+dr,Or=cr-Bt,ln=cr-Or;bt.t=Bt-ln+(dr-Or)}var i=1e-6,n=1e-12,r=Math.PI,v=r/2,s=r/4,o=r*2,b=180/r,g=r/180,d=Math.abs,f=Math.atan,m=Math.atan2,l=Math.cos,x=Math.ceil,u=Math.exp,M=Math.log,w=Math.pow,p=Math.sin,_=Math.sign||function(bt){return bt>0?1:bt<0?-1:0},h=Math.sqrt,L=Math.tan;function E(bt){return bt>1?0:bt<-1?r:Math.acos(bt)}function S(bt){return bt>1?v:bt<-1?-v:Math.asin(bt)}function P(bt){return(bt=p(bt/2))*bt}function F(){}function I(bt,Bt){bt&&R.hasOwnProperty(bt.type)&&R[bt.type](bt,Bt)}var D={Feature:function(bt,Bt){I(bt.geometry,Bt)},FeatureCollection:function(bt,Bt){for(var dr=bt.features,cr=-1,Or=dr.length;++cr<Or;)I(dr[cr].geometry,Bt)}},R={Sphere:function(bt,Bt){Bt.sphere()},Point:function(bt,Bt){bt=bt.coordinates,Bt.point(bt[0],bt[1],bt[2])},MultiPoint:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)bt=dr[cr],Bt.point(bt[0],bt[1],bt[2])},LineString:function(bt,Bt){O(bt.coordinates,Bt,0)},MultiLineString:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)O(dr[cr],Bt,0)},Polygon:function(bt,Bt){z(bt.coordinates,Bt)},MultiPolygon:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)z(dr[cr],Bt)},GeometryCollection:function(bt,Bt){for(var dr=bt.geometries,cr=-1,Or=dr.length;++cr<Or;)I(dr[cr],Bt)}};function O(bt,Bt,dr){var cr=-1,Or=bt.length-dr,ln;for(Bt.lineStart();++cr<Or;)ln=bt[cr],Bt.point(ln[0],ln[1],ln[2]);Bt.lineEnd()}function z(bt,Bt){var dr=-1,cr=bt.length;for(Bt.polygonStart();++dr<cr;)O(bt[dr],Bt,1);Bt.polygonEnd()}function G(bt,Bt){bt&&D.hasOwnProperty(bt.type)?D[bt.type](bt,Bt):I(bt,Bt)}var Y=A(),ee=A(),j,X,ae,he,K,J={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Y.reset(),J.lineStart=U,J.lineEnd=H},polygonEnd:function(){var bt=+Y;ee.add(bt<0?o+bt:bt),this.lineStart=this.lineEnd=this.point=F},sphere:function(){ee.add(o)}};function U(){J.point=q}function H(){re(j,X)}function q(bt,Bt){J.point=re,j=bt,X=Bt,bt*=g,Bt*=g,ae=bt,he=l(Bt=Bt/2+s),K=p(Bt)}function re(bt,Bt){bt*=g,Bt*=g,Bt=Bt/2+s;var dr=bt-ae,cr=dr>=0?1:-1,Or=cr*dr,ln=l(Bt),_n=p(Bt),Pn=K*_n,zn=he*ln+Pn*l(Or),Xn=Pn*cr*p(Or);Y.add(m(Xn,zn)),ae=bt,he=ln,K=_n}function Z(bt){return ee.reset(),G(bt,J),ee*2}function Q(bt){return[m(bt[1],bt[0]),S(bt[2])]}function ie(bt){var Bt=bt[0],dr=bt[1],cr=l(dr);return[cr*l(Bt),cr*p(Bt),p(dr)]}function oe(bt,Bt){return bt[0]*Bt[0]+bt[1]*Bt[1]+bt[2]*Bt[2]}function ne(bt,Bt){return[bt[1]*Bt[2]-bt[2]*Bt[1],bt[2]*Bt[0]-bt[0]*Bt[2],bt[0]*Bt[1]-bt[1]*Bt[0]]}function le(bt,Bt){bt[0]+=Bt[0],bt[1]+=Bt[1],bt[2]+=Bt[2]}function _e(bt,Bt){return[bt[0]*Bt,bt[1]*Bt,bt[2]*Bt]}function fe(bt){var Bt=h(bt[0]*bt[0]+bt[1]*bt[1]+bt[2]*bt[2]);bt[0]/=Bt,bt[1]/=Bt,bt[2]/=Bt}var ye,xe,me,be,ke,De,He,Ae,Le=A(),Ze,We,ze={point:Ie,lineStart:dt,lineEnd:Ft,polygonStart:function(){ze.point=Qt,ze.lineStart=Ot,ze.lineEnd=Ct,Le.reset(),J.polygonStart()},polygonEnd:function(){J.polygonEnd(),ze.point=Ie,ze.lineStart=dt,ze.lineEnd=Ft,Y<0?(ye=-(me=180),xe=-(be=90)):Le>i?be=90:Le<-i&&(xe=-90),We[0]=ye,We[1]=me},sphere:function(){ye=-(me=180),xe=-(be=90)}};function Ie(bt,Bt){Ze.push(We=[ye=bt,me=bt]),Bt<xe&&(xe=Bt),Bt>be&&(be=Bt)}function Ve(bt,Bt){var dr=ie([bt*g,Bt*g]);if(Ae){var cr=ne(Ae,dr),Or=[cr[1],-cr[0],0],ln=ne(Or,cr);fe(ln),ln=Q(ln);var _n=bt-ke,Pn=_n>0?1:-1,zn=ln[0]*b*Pn,Xn,wn=d(_n)>180;wn^(Pn*ke<zn&&zn<Pn*bt)?(Xn=ln[1]*b,Xn>be&&(be=Xn)):(zn=(zn+360)%360-180,wn^(Pn*ke<zn&&zn<Pn*bt)?(Xn=-ln[1]*b,Xn<xe&&(xe=Xn)):(Bt<xe&&(xe=Bt),Bt>be&&(be=Bt))),wn?bt<ke?jt(ye,bt)>jt(ye,me)&&(me=bt):jt(bt,me)>jt(ye,me)&&(ye=bt):me>=ye?(bt<ye&&(ye=bt),bt>me&&(me=bt)):bt>ke?jt(ye,bt)>jt(ye,me)&&(me=bt):jt(bt,me)>jt(ye,me)&&(ye=bt)}else Ze.push(We=[ye=bt,me=bt]);Bt<xe&&(xe=Bt),Bt>be&&(be=Bt),Ae=dr,ke=bt}function dt(){ze.point=Ve}function Ft(){We[0]=ye,We[1]=me,ze.point=Ie,Ae=null}function Qt(bt,Bt){if(Ae){var dr=bt-ke;Le.add(d(dr)>180?dr+(dr>0?360:-360):dr)}else De=bt,He=Bt;J.point(bt,Bt),Ve(bt,Bt)}function Ot(){J.lineStart()}function Ct(){Qt(De,He),J.lineEnd(),d(Le)>i&&(ye=-(me=180)),We[0]=ye,We[1]=me,Ae=null}function jt(bt,Bt){return(Bt-=bt)<0?Bt+360:Bt}function Nt(bt,Bt){return bt[0]-Bt[0]}function Lt(bt,Bt){return bt[0]<=bt[1]?bt[0]<=Bt&&Bt<=bt[1]:Bt<bt[0]||bt[1]<Bt}function Xe(bt){var Bt,dr,cr,Or,ln,_n,Pn;if(be=me=-(ye=xe=1/0),Ze=[],G(bt,ze),dr=Ze.length){for(Ze.sort(Nt),Bt=1,cr=Ze[0],ln=[cr];Bt<dr;++Bt)Or=Ze[Bt],Lt(cr,Or[0])||Lt(cr,Or[1])?(jt(cr[0],Or[1])>jt(cr[0],cr[1])&&(cr[1]=Or[1]),jt(Or[0],cr[1])>jt(cr[0],cr[1])&&(cr[0]=Or[0])):ln.push(cr=Or);for(_n=-1/0,dr=ln.length-1,Bt=0,cr=ln[dr];Bt<=dr;cr=Or,++Bt)Or=ln[Bt],(Pn=jt(cr[1],Or[0]))>_n&&(_n=Pn,ye=Or[0],me=cr[1])}return Ze=We=null,ye===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[ye,xe],[me,be]]}var it,Ye,Ee,Ge,Ke,qe,At,mt,Mt,Gt,zt,Ht,Zt,Wt,sr,Gr,cn={sphere:F,point:qr,lineStart:rr,lineEnd:Sr,polygonStart:function(){cn.lineStart=tt,cn.lineEnd=Qe},polygonEnd:function(){cn.lineStart=rr,cn.lineEnd=Sr}};function qr(bt,Bt){bt*=g,Bt*=g;var dr=l(Bt);st(dr*l(bt),dr*p(bt),p(Bt))}function st(bt,Bt,dr){++it,Ee+=(bt-Ee)/it,Ge+=(Bt-Ge)/it,Ke+=(dr-Ke)/it}function rr(){cn.point=$t}function $t(bt,Bt){bt*=g,Bt*=g;var dr=l(Bt);Wt=dr*l(bt),sr=dr*p(bt),Gr=p(Bt),cn.point=hr,st(Wt,sr,Gr)}function hr(bt,Bt){bt*=g,Bt*=g;var dr=l(Bt),cr=dr*l(bt),Or=dr*p(bt),ln=p(Bt),_n=m(h((_n=sr*ln-Gr*Or)*_n+(_n=Gr*cr-Wt*ln)*_n+(_n=Wt*Or-sr*cr)*_n),Wt*cr+sr*Or+Gr*ln);Ye+=_n,qe+=_n*(Wt+(Wt=cr)),At+=_n*(sr+(sr=Or)),mt+=_n*(Gr+(Gr=ln)),st(Wt,sr,Gr)}function Sr(){cn.point=qr}function tt(){cn.point=lt}function Qe(){ft(Ht,Zt),cn.point=qr}function lt(bt,Bt){Ht=bt,Zt=Bt,bt*=g,Bt*=g,cn.point=ft;var dr=l(Bt);Wt=dr*l(bt),sr=dr*p(bt),Gr=p(Bt),st(Wt,sr,Gr)}function ft(bt,Bt){bt*=g,Bt*=g;var dr=l(Bt),cr=dr*l(bt),Or=dr*p(bt),ln=p(Bt),_n=sr*ln-Gr*Or,Pn=Gr*cr-Wt*ln,zn=Wt*Or-sr*cr,Xn=h(_n*_n+Pn*Pn+zn*zn),wn=S(Xn),Un=Xn&&-wn/Xn;Mt+=Un*_n,Gt+=Un*Pn,zt+=Un*zn,Ye+=wn,qe+=wn*(Wt+(Wt=cr)),At+=wn*(sr+(sr=Or)),mt+=wn*(Gr+(Gr=ln)),st(Wt,sr,Gr)}function Et(bt){it=Ye=Ee=Ge=Ke=qe=At=mt=Mt=Gt=zt=0,G(bt,cn);var Bt=Mt,dr=Gt,cr=zt,Or=Bt*Bt+dr*dr+cr*cr;return Or<n&&(Bt=qe,dr=At,cr=mt,Ye<i&&(Bt=Ee,dr=Ge,cr=Ke),Or=Bt*Bt+dr*dr+cr*cr,Or<n)?[NaN,NaN]:[m(dr,Bt)*b,S(cr/h(Or))*b]}function Vt(bt){return function(){return bt}}function Pe(bt,Bt){function dr(cr,Or){return cr=bt(cr,Or),Bt(cr[0],cr[1])}return bt.invert&&Bt.invert&&(dr.invert=function(cr,Or){return cr=Bt.invert(cr,Or),cr&&bt.invert(cr[0],cr[1])}),dr}function Se(bt,Bt){return[d(bt)>r?bt+Math.round(-bt/o)*o:bt,Bt]}Se.invert=Se;function ot(bt,Bt,dr){return(bt%=o)?Bt||dr?Pe(pt(bt),St(Bt,dr)):pt(bt):Bt||dr?St(Bt,dr):Se}function ct(bt){return function(Bt,dr){return Bt+=bt,[Bt>r?Bt-o:Bt<-r?Bt+o:Bt,dr]}}function pt(bt){var Bt=ct(bt);return Bt.invert=ct(-bt),Bt}function St(bt,Bt){var dr=l(bt),cr=p(bt),Or=l(Bt),ln=p(Bt);function _n(Pn,zn){var Xn=l(zn),wn=l(Pn)*Xn,Un=p(Pn)*Xn,On=p(zn),jn=On*dr+wn*cr;return[m(Un*Or-jn*ln,wn*dr-On*cr),S(jn*Or+Un*ln)]}return _n.invert=function(Pn,zn){var Xn=l(zn),wn=l(Pn)*Xn,Un=p(Pn)*Xn,On=p(zn),jn=On*Or-Un*ln;return[m(Un*Or+On*ln,wn*dr+jn*cr),S(jn*dr-wn*cr)]},_n}function xt(bt){bt=ot(bt[0]*g,bt[1]*g,bt.length>2?bt[2]*g:0);function Bt(dr){return dr=bt(dr[0]*g,dr[1]*g),dr[0]*=b,dr[1]*=b,dr}return Bt.invert=function(dr){return dr=bt.invert(dr[0]*g,dr[1]*g),dr[0]*=b,dr[1]*=b,dr},Bt}function Pt(bt,Bt,dr,cr,Or,ln){if(!!dr){var _n=l(Bt),Pn=p(Bt),zn=cr*dr;Or==null?(Or=Bt+cr*o,ln=Bt-zn/2):(Or=Xt(_n,Or),ln=Xt(_n,ln),(cr>0?Or<ln:Or>ln)&&(Or+=cr*o));for(var Xn,wn=Or;cr>0?wn>ln:wn<ln;wn-=zn)Xn=Q([_n,-Pn*l(wn),-Pn*p(wn)]),bt.point(Xn[0],Xn[1])}}function Xt(bt,Bt){Bt=ie(Bt),Bt[0]-=bt,fe(Bt);var dr=E(-Bt[1]);return((-Bt[2]<0?-dr:dr)+o-i)%o}function or(){var bt=Vt([0,0]),Bt=Vt(90),dr=Vt(6),cr,Or,ln={point:_n};function _n(zn,Xn){cr.push(zn=Or(zn,Xn)),zn[0]*=b,zn[1]*=b}function Pn(){var zn=bt.apply(this,arguments),Xn=Bt.apply(this,arguments)*g,wn=dr.apply(this,arguments)*g;return cr=[],Or=ot(-zn[0]*g,-zn[1]*g,0).invert,Pt(ln,Xn,wn,1),zn={type:"Polygon",coordinates:[cr]},cr=Or=null,zn}return Pn.center=function(zn){return arguments.length?(bt=typeof zn=="function"?zn:Vt([+zn[0],+zn[1]]),Pn):bt},Pn.radius=function(zn){return arguments.length?(Bt=typeof zn=="function"?zn:Vt(+zn),Pn):Bt},Pn.precision=function(zn){return arguments.length?(dr=typeof zn=="function"?zn:Vt(+zn),Pn):dr},Pn}function Pr(){var bt=[],Bt;return{point:function(dr,cr,Or){Bt.push([dr,cr,Or])},lineStart:function(){bt.push(Bt=[])},lineEnd:F,rejoin:function(){bt.length>1&&bt.push(bt.pop().concat(bt.shift()))},result:function(){var dr=bt;return bt=[],Bt=null,dr}}}function Ar(bt,Bt){return d(bt[0]-Bt[0])<i&&d(bt[1]-Bt[1])<i}function Er(bt,Bt,dr,cr){this.x=bt,this.z=Bt,this.o=dr,this.e=cr,this.v=!1,this.n=this.p=null}function Jr(bt,Bt,dr,cr,Or){var ln=[],_n=[],Pn,zn;if(bt.forEach(function(ia){if(!((Ga=ia.length-1)<=0)){var Ga,za=ia[0],Ya=ia[Ga],ja;if(Ar(za,Ya)){if(!za[2]&&!Ya[2]){for(Or.lineStart(),Pn=0;Pn<Ga;++Pn)Or.point((za=ia[Pn])[0],za[1]);Or.lineEnd();return}Ya[0]+=2*i}ln.push(ja=new Er(za,ia,null,!0)),_n.push(ja.o=new Er(za,null,ja,!1)),ln.push(ja=new Er(Ya,ia,null,!1)),_n.push(ja.o=new Er(Ya,null,ja,!0))}}),!!ln.length){for(_n.sort(Bt),lr(ln),lr(_n),Pn=0,zn=_n.length;Pn<zn;++Pn)_n[Pn].e=dr=!dr;for(var Xn=ln[0],wn,Un;;){for(var On=Xn,jn=!0;On.v;)if((On=On.n)===Xn)return;wn=On.z,Or.lineStart();do{if(On.v=On.o.v=!0,On.e){if(jn)for(Pn=0,zn=wn.length;Pn<zn;++Pn)Or.point((Un=wn[Pn])[0],Un[1]);else cr(On.x,On.n.x,1,Or);On=On.n}else{if(jn)for(wn=On.p.z,Pn=wn.length-1;Pn>=0;--Pn)Or.point((Un=wn[Pn])[0],Un[1]);else cr(On.x,On.p.x,-1,Or);On=On.p}On=On.o,wn=On.z,jn=!jn}while(!On.v);Or.lineEnd()}}}function lr(bt){if(!!(Bt=bt.length)){for(var Bt,dr=0,cr=bt[0],Or;++dr<Bt;)cr.n=Or=bt[dr],Or.p=cr,cr=Or;cr.n=Or=bt[0],Or.p=cr}}var br=A();function Fr(bt){return d(bt[0])<=r?bt[0]:_(bt[0])*((d(bt[0])+r)%o-r)}function Hr(bt,Bt){var dr=Fr(Bt),cr=Bt[1],Or=p(cr),ln=[p(dr),-l(dr),0],_n=0,Pn=0;br.reset(),Or===1?cr=v+i:Or===-1&&(cr=-v-i);for(var zn=0,Xn=bt.length;zn<Xn;++zn)if(!!(Un=(wn=bt[zn]).length))for(var wn,Un,On=wn[Un-1],jn=Fr(On),ia=On[1]/2+s,Ga=p(ia),za=l(ia),Ya=0;Ya<Un;++Ya,jn=aa,Ga=Qa,za=si,On=ja){var ja=wn[Ya],aa=Fr(ja),ba=ja[1]/2+s,Qa=p(ba),si=l(ba),Mi=aa-jn,Ei=Mi>=0?1:-1,wi=Ei*Mi,Pi=wi>r,hi=Ga*Qa;if(br.add(m(hi*Ei*p(wi),za*si+hi*l(wi))),_n+=Pi?Mi+Ei*o:Mi,Pi^jn>=dr^aa>=dr){var ko=ne(ie(On),ie(ja));fe(ko);var ao=ne(ln,ko);fe(ao);var li=(Pi^Mi>=0?-1:1)*S(ao[2]);(cr>li||cr===li&&(ko[0]||ko[1]))&&(Pn+=Pi^Mi>=0?1:-1)}}return(_n<-i||_n<i&&br<-i)^Pn&1}function Lr(bt,Bt,dr,cr){return function(Or){var ln=Bt(Or),_n=Pr(),Pn=Bt(_n),zn=!1,Xn,wn,Un,On={point:jn,lineStart:Ga,lineEnd:za,polygonStart:function(){On.point=Ya,On.lineStart=ja,On.lineEnd=aa,wn=[],Xn=[]},polygonEnd:function(){On.point=jn,On.lineStart=Ga,On.lineEnd=za,wn=c.merge(wn);var ba=Hr(Xn,cr);wn.length?(zn||(Or.polygonStart(),zn=!0),Jr(wn,Rt,ba,dr,Or)):ba&&(zn||(Or.polygonStart(),zn=!0),Or.lineStart(),dr(null,null,1,Or),Or.lineEnd()),zn&&(Or.polygonEnd(),zn=!1),wn=Xn=null},sphere:function(){Or.polygonStart(),Or.lineStart(),dr(null,null,1,Or),Or.lineEnd(),Or.polygonEnd()}};function jn(ba,Qa){bt(ba,Qa)&&Or.point(ba,Qa)}function ia(ba,Qa){ln.point(ba,Qa)}function Ga(){On.point=ia,ln.lineStart()}function za(){On.point=jn,ln.lineEnd()}function Ya(ba,Qa){Un.push([ba,Qa]),Pn.point(ba,Qa)}function ja(){Pn.lineStart(),Un=[]}function aa(){Ya(Un[0][0],Un[0][1]),Pn.lineEnd();var ba=Pn.clean(),Qa=_n.result(),si,Mi=Qa.length,Ei,wi,Pi;if(Un.pop(),Xn.push(Un),Un=null,!!Mi){if(ba&1){if(wi=Qa[0],(Ei=wi.length-1)>0){for(zn||(Or.polygonStart(),zn=!0),Or.lineStart(),si=0;si<Ei;++si)Or.point((Pi=wi[si])[0],Pi[1]);Or.lineEnd()}return}Mi>1&&ba&2&&Qa.push(Qa.pop().concat(Qa.shift())),wn.push(Qa.filter(at))}}return On}}function at(bt){return bt.length>1}function Rt(bt,Bt){return((bt=bt.x)[0]<0?bt[1]-v-i:v-bt[1])-((Bt=Bt.x)[0]<0?Bt[1]-v-i:v-Bt[1])}var Kt=Lr(function(){return!0},ur,Vr,[-r,-v]);function ur(bt){var Bt=NaN,dr=NaN,cr=NaN,Or;return{lineStart:function(){bt.lineStart(),Or=1},point:function(ln,_n){var Pn=ln>0?r:-r,zn=d(ln-Bt);d(zn-r)<i?(bt.point(Bt,dr=(dr+_n)/2>0?v:-v),bt.point(cr,dr),bt.lineEnd(),bt.lineStart(),bt.point(Pn,dr),bt.point(ln,dr),Or=0):cr!==Pn&&zn>=r&&(d(Bt-cr)<i&&(Bt-=cr*i),d(ln-Pn)<i&&(ln-=Pn*i),dr=Nr(Bt,dr,ln,_n),bt.point(cr,dr),bt.lineEnd(),bt.lineStart(),bt.point(Pn,dr),Or=0),bt.point(Bt=ln,dr=_n),cr=Pn},lineEnd:function(){bt.lineEnd(),Bt=dr=NaN},clean:function(){return 2-Or}}}function Nr(bt,Bt,dr,cr){var Or,ln,_n=p(bt-dr);return d(_n)>i?f((p(Bt)*(ln=l(cr))*p(dr)-p(cr)*(Or=l(Bt))*p(bt))/(Or*ln*_n)):(Bt+cr)/2}function Vr(bt,Bt,dr,cr){var Or;if(bt==null)Or=dr*v,cr.point(-r,Or),cr.point(0,Or),cr.point(r,Or),cr.point(r,0),cr.point(r,-Or),cr.point(0,-Or),cr.point(-r,-Or),cr.point(-r,0),cr.point(-r,Or);else if(d(bt[0]-Bt[0])>i){var ln=bt[0]<Bt[0]?r:-r;Or=dr*ln/2,cr.point(-ln,Or),cr.point(0,Or),cr.point(ln,Or)}else cr.point(Bt[0],Bt[1])}function Dr(bt){var Bt=l(bt),dr=6*g,cr=Bt>0,Or=d(Bt)>i;function ln(wn,Un,On,jn){Pt(jn,bt,dr,On,wn,Un)}function _n(wn,Un){return l(wn)*l(Un)>Bt}function Pn(wn){var Un,On,jn,ia,Ga;return{lineStart:function(){ia=jn=!1,Ga=1},point:function(za,Ya){var ja=[za,Ya],aa,ba=_n(za,Ya),Qa=cr?ba?0:Xn(za,Ya):ba?Xn(za+(za<0?r:-r),Ya):0;if(!Un&&(ia=jn=ba)&&wn.lineStart(),ba!==jn&&(aa=zn(Un,ja),(!aa||Ar(Un,aa)||Ar(ja,aa))&&(ja[2]=1)),ba!==jn)Ga=0,ba?(wn.lineStart(),aa=zn(ja,Un),wn.point(aa[0],aa[1])):(aa=zn(Un,ja),wn.point(aa[0],aa[1],2),wn.lineEnd()),Un=aa;else if(Or&&Un&&cr^ba){var si;!(Qa&On)&&(si=zn(ja,Un,!0))&&(Ga=0,cr?(wn.lineStart(),wn.point(si[0][0],si[0][1]),wn.point(si[1][0],si[1][1]),wn.lineEnd()):(wn.point(si[1][0],si[1][1]),wn.lineEnd(),wn.lineStart(),wn.point(si[0][0],si[0][1],3)))}ba&&(!Un||!Ar(Un,ja))&&wn.point(ja[0],ja[1]),Un=ja,jn=ba,On=Qa},lineEnd:function(){jn&&wn.lineEnd(),Un=null},clean:function(){return Ga|(ia&&jn)<<1}}}function zn(wn,Un,On){var jn=ie(wn),ia=ie(Un),Ga=[1,0,0],za=ne(jn,ia),Ya=oe(za,za),ja=za[0],aa=Ya-ja*ja;if(!aa)return!On&&wn;var ba=Bt*Ya/aa,Qa=-Bt*ja/aa,si=ne(Ga,za),Mi=_e(Ga,ba),Ei=_e(za,Qa);le(Mi,Ei);var wi=si,Pi=oe(Mi,wi),hi=oe(wi,wi),ko=Pi*Pi-hi*(oe(Mi,Mi)-1);if(!(ko<0)){var ao=h(ko),li=_e(wi,(-Pi-ao)/hi);if(le(li,Mi),li=Q(li),!On)return li;var Aa=wn[0],ki=Un[0],bo=wn[1],Mo=Un[1],ds;ki<Aa&&(ds=Aa,Aa=ki,ki=ds);var Ns=ki-Aa,Co=d(Ns-r)<i,ol=Co||Ns<i;if(!Co&&Mo<bo&&(ds=bo,bo=Mo,Mo=ds),ol?Co?bo+Mo>0^li[1]<(d(li[0]-Aa)<i?bo:Mo):bo<=li[1]&&li[1]<=Mo:Ns>r^(Aa<=li[0]&&li[0]<=ki)){var Bs=_e(wi,(-Pi+ao)/hi);return le(Bs,Mi),[li,Q(Bs)]}}}function Xn(wn,Un){var On=cr?bt:r-bt,jn=0;return wn<-On?jn|=1:wn>On&&(jn|=2),Un<-On?jn|=4:Un>On&&(jn|=8),jn}return Lr(_n,Pn,ln,cr?[0,-bt]:[-r,bt-r])}function Mr(bt,Bt,dr,cr,Or,ln){var _n=bt[0],Pn=bt[1],zn=Bt[0],Xn=Bt[1],wn=0,Un=1,On=zn-_n,jn=Xn-Pn,ia;if(ia=dr-_n,!(!On&&ia>0)){if(ia/=On,On<0){if(ia<wn)return;ia<Un&&(Un=ia)}else if(On>0){if(ia>Un)return;ia>wn&&(wn=ia)}if(ia=Or-_n,!(!On&&ia<0)){if(ia/=On,On<0){if(ia>Un)return;ia>wn&&(wn=ia)}else if(On>0){if(ia<wn)return;ia<Un&&(Un=ia)}if(ia=cr-Pn,!(!jn&&ia>0)){if(ia/=jn,jn<0){if(ia<wn)return;ia<Un&&(Un=ia)}else if(jn>0){if(ia>Un)return;ia>wn&&(wn=ia)}if(ia=ln-Pn,!(!jn&&ia<0)){if(ia/=jn,jn<0){if(ia>Un)return;ia>wn&&(wn=ia)}else if(jn>0){if(ia<wn)return;ia<Un&&(Un=ia)}return wn>0&&(bt[0]=_n+wn*On,bt[1]=Pn+wn*jn),Un<1&&(Bt[0]=_n+Un*On,Bt[1]=Pn+Un*jn),!0}}}}}var jr=1e9,kn=-jr;function yn(bt,Bt,dr,cr){function Or(Xn,wn){return bt<=Xn&&Xn<=dr&&Bt<=wn&&wn<=cr}function ln(Xn,wn,Un,On){var jn=0,ia=0;if(Xn==null||(jn=_n(Xn,Un))!==(ia=_n(wn,Un))||zn(Xn,wn)<0^Un>0)do On.point(jn===0||jn===3?bt:dr,jn>1?cr:Bt);while((jn=(jn+Un+4)%4)!==ia);else On.point(wn[0],wn[1])}function _n(Xn,wn){return d(Xn[0]-bt)<i?wn>0?0:3:d(Xn[0]-dr)<i?wn>0?2:1:d(Xn[1]-Bt)<i?wn>0?1:0:wn>0?3:2}function Pn(Xn,wn){return zn(Xn.x,wn.x)}function zn(Xn,wn){var Un=_n(Xn,1),On=_n(wn,1);return Un!==On?Un-On:Un===0?wn[1]-Xn[1]:Un===1?Xn[0]-wn[0]:Un===2?Xn[1]-wn[1]:wn[0]-Xn[0]}return function(Xn){var wn=Xn,Un=Pr(),On,jn,ia,Ga,za,Ya,ja,aa,ba,Qa,si,Mi={point:Ei,lineStart:ko,lineEnd:ao,polygonStart:Pi,polygonEnd:hi};function Ei(Aa,ki){Or(Aa,ki)&&wn.point(Aa,ki)}function wi(){for(var Aa=0,ki=0,bo=jn.length;ki<bo;++ki)for(var Mo=jn[ki],ds=1,Ns=Mo.length,Co=Mo[0],ol,Bs,Fo=Co[0],Lo=Co[1];ds<Ns;++ds)ol=Fo,Bs=Lo,Co=Mo[ds],Fo=Co[0],Lo=Co[1],Bs<=cr?Lo>cr&&(Fo-ol)*(cr-Bs)>(Lo-Bs)*(bt-ol)&&++Aa:Lo<=cr&&(Fo-ol)*(cr-Bs)<(Lo-Bs)*(bt-ol)&&--Aa;return Aa}function Pi(){wn=Un,On=[],jn=[],si=!0}function hi(){var Aa=wi(),ki=si&&Aa,bo=(On=c.merge(On)).length;(ki||bo)&&(Xn.polygonStart(),ki&&(Xn.lineStart(),ln(null,null,1,Xn),Xn.lineEnd()),bo&&Jr(On,Pn,Aa,ln,Xn),Xn.polygonEnd()),wn=Xn,On=jn=ia=null}function ko(){Mi.point=li,jn&&jn.push(ia=[]),Qa=!0,ba=!1,ja=aa=NaN}function ao(){On&&(li(Ga,za),Ya&&ba&&Un.rejoin(),On.push(Un.result())),Mi.point=Ei,ba&&wn.lineEnd()}function li(Aa,ki){var bo=Or(Aa,ki);if(jn&&ia.push([Aa,ki]),Qa)Ga=Aa,za=ki,Ya=bo,Qa=!1,bo&&(wn.lineStart(),wn.point(Aa,ki));else if(bo&&ba)wn.point(Aa,ki);else{var Mo=[ja=Math.max(kn,Math.min(jr,ja)),aa=Math.max(kn,Math.min(jr,aa))],ds=[Aa=Math.max(kn,Math.min(jr,Aa)),ki=Math.max(kn,Math.min(jr,ki))];Mr(Mo,ds,bt,Bt,dr,cr)?(ba||(wn.lineStart(),wn.point(Mo[0],Mo[1])),wn.point(ds[0],ds[1]),bo||wn.lineEnd(),si=!1):bo&&(wn.lineStart(),wn.point(Aa,ki),si=!1)}ja=Aa,aa=ki,ba=bo}return Mi}}function Wn(){var bt=0,Bt=0,dr=960,cr=500,Or,ln,_n;return _n={stream:function(Pn){return Or&&ln===Pn?Or:Or=yn(bt,Bt,dr,cr)(ln=Pn)},extent:function(Pn){return arguments.length?(bt=+Pn[0][0],Bt=+Pn[0][1],dr=+Pn[1][0],cr=+Pn[1][1],Or=ln=null,_n):[[bt,Bt],[dr,cr]]}}}var In=A(),$n,Kn,ya,Ra={sphere:F,point:F,lineStart:_i,lineEnd:F,polygonStart:F,polygonEnd:F};function _i(){Ra.point=ri,Ra.lineEnd=Ka}function Ka(){Ra.point=Ra.lineEnd=F}function ri(bt,Bt){bt*=g,Bt*=g,$n=bt,Kn=p(Bt),ya=l(Bt),Ra.point=ei}function ei(bt,Bt){bt*=g,Bt*=g;var dr=p(Bt),cr=l(Bt),Or=d(bt-$n),ln=l(Or),_n=p(Or),Pn=cr*_n,zn=ya*dr-Kn*cr*ln,Xn=Kn*dr+ya*cr*ln;In.add(m(h(Pn*Pn+zn*zn),Xn)),$n=bt,Kn=dr,ya=cr}function kr(bt){return In.reset(),G(bt,Ra),+In}var bn=[null,null],dn={type:"LineString",coordinates:bn};function Ln(bt,Bt){return bn[0]=bt,bn[1]=Bt,kr(dn)}var ra={Feature:function(bt,Bt){return sa(bt.geometry,Bt)},FeatureCollection:function(bt,Bt){for(var dr=bt.features,cr=-1,Or=dr.length;++cr<Or;)if(sa(dr[cr].geometry,Bt))return!0;return!1}},ma={Sphere:function(){return!0},Point:function(bt,Bt){return Bn(bt.coordinates,Bt)},MultiPoint:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)if(Bn(dr[cr],Bt))return!0;return!1},LineString:function(bt,Bt){return Qn(bt.coordinates,Bt)},MultiLineString:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)if(Qn(dr[cr],Bt))return!0;return!1},Polygon:function(bt,Bt){return Xa(bt.coordinates,Bt)},MultiPolygon:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)if(Xa(dr[cr],Bt))return!0;return!1},GeometryCollection:function(bt,Bt){for(var dr=bt.geometries,cr=-1,Or=dr.length;++cr<Or;)if(sa(dr[cr],Bt))return!0;return!1}};function sa(bt,Bt){return bt&&ma.hasOwnProperty(bt.type)?ma[bt.type](bt,Bt):!1}function Bn(bt,Bt){return Ln(bt,Bt)===0}function Qn(bt,Bt){for(var dr,cr,Or,ln=0,_n=bt.length;ln<_n;ln++){if(cr=Ln(bt[ln],Bt),cr===0||ln>0&&(Or=Ln(bt[ln],bt[ln-1]),Or>0&&dr<=Or&&cr<=Or&&(dr+cr-Or)*(1-Math.pow((dr-cr)/Or,2))<n*Or))return!0;dr=cr}return!1}function Xa(bt,Bt){return!!Hr(bt.map(yi),Yt(Bt))}function yi(bt){return bt=bt.map(Yt),bt.pop(),bt}function Yt(bt){return[bt[0]*g,bt[1]*g]}function gr(bt,Bt){return(bt&&ra.hasOwnProperty(bt.type)?ra[bt.type]:sa)(bt,Bt)}function un(bt,Bt,dr){var cr=c.range(bt,Bt-i,dr).concat(Bt);return function(Or){return cr.map(function(ln){return[Or,ln]})}}function mn(bt,Bt,dr){var cr=c.range(bt,Bt-i,dr).concat(Bt);return function(Or){return cr.map(function(ln){return[ln,Or]})}}function sn(){var bt,Bt,dr,cr,Or,ln,_n,Pn,zn=10,Xn=zn,wn=90,Un=360,On,jn,ia,Ga,za=2.5;function Ya(){return{type:"MultiLineString",coordinates:ja()}}function ja(){return c.range(x(cr/wn)*wn,dr,wn).map(ia).concat(c.range(x(Pn/Un)*Un,_n,Un).map(Ga)).concat(c.range(x(Bt/zn)*zn,bt,zn).filter(function(aa){return d(aa%wn)>i}).map(On)).concat(c.range(x(ln/Xn)*Xn,Or,Xn).filter(function(aa){return d(aa%Un)>i}).map(jn))}return Ya.lines=function(){return ja().map(function(aa){return{type:"LineString",coordinates:aa}})},Ya.outline=function(){return{type:"Polygon",coordinates:[ia(cr).concat(Ga(_n).slice(1),ia(dr).reverse().slice(1),Ga(Pn).reverse().slice(1))]}},Ya.extent=function(aa){return arguments.length?Ya.extentMajor(aa).extentMinor(aa):Ya.extentMinor()},Ya.extentMajor=function(aa){return arguments.length?(cr=+aa[0][0],dr=+aa[1][0],Pn=+aa[0][1],_n=+aa[1][1],cr>dr&&(aa=cr,cr=dr,dr=aa),Pn>_n&&(aa=Pn,Pn=_n,_n=aa),Ya.precision(za)):[[cr,Pn],[dr,_n]]},Ya.extentMinor=function(aa){return arguments.length?(Bt=+aa[0][0],bt=+aa[1][0],ln=+aa[0][1],Or=+aa[1][1],Bt>bt&&(aa=Bt,Bt=bt,bt=aa),ln>Or&&(aa=ln,ln=Or,Or=aa),Ya.precision(za)):[[Bt,ln],[bt,Or]]},Ya.step=function(aa){return arguments.length?Ya.stepMajor(aa).stepMinor(aa):Ya.stepMinor()},Ya.stepMajor=function(aa){return arguments.length?(wn=+aa[0],Un=+aa[1],Ya):[wn,Un]},Ya.stepMinor=function(aa){return arguments.length?(zn=+aa[0],Xn=+aa[1],Ya):[zn,Xn]},Ya.precision=function(aa){return arguments.length?(za=+aa,On=un(ln,Or,90),jn=mn(Bt,bt,za),ia=un(Pn,_n,90),Ga=mn(cr,dr,za),Ya):za},Ya.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function Cn(){return sn()()}function Tn(bt,Bt){var dr=bt[0]*g,cr=bt[1]*g,Or=Bt[0]*g,ln=Bt[1]*g,_n=l(cr),Pn=p(cr),zn=l(ln),Xn=p(ln),wn=_n*l(dr),Un=_n*p(dr),On=zn*l(Or),jn=zn*p(Or),ia=2*S(h(P(ln-cr)+_n*zn*P(Or-dr))),Ga=p(ia),za=ia?function(Ya){var ja=p(Ya*=ia)/Ga,aa=p(ia-Ya)/Ga,ba=aa*wn+ja*On,Qa=aa*Un+ja*jn,si=aa*Pn+ja*Xn;return[m(Qa,ba)*b,m(si,h(ba*ba+Qa*Qa))*b]}:function(){return[dr*b,cr*b]};return za.distance=ia,za}function gn(bt){return bt}var _r=A(),wr=A(),Br,An,Yn,ua,Sn={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Sn.lineStart=na,Sn.lineEnd=ka},polygonEnd:function(){Sn.lineStart=Sn.lineEnd=Sn.point=F,_r.add(d(wr)),wr.reset()},result:function(){var bt=_r/2;return _r.reset(),bt}};function na(){Sn.point=fa}function fa(bt,Bt){Sn.point=Ma,Br=Yn=bt,An=ua=Bt}function Ma(bt,Bt){wr.add(ua*bt-Yn*Bt),Yn=bt,ua=Bt}function ka(){Ma(Br,An)}var ga=1/0,Ia=ga,Ao=-ga,ro=Ao,$o={point:$s,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var bt=[[ga,Ia],[Ao,ro]];return Ao=ro=-(Ia=ga=1/0),bt}};function $s(bt,Bt){bt<ga&&(ga=bt),bt>Ao&&(Ao=bt),Bt<Ia&&(Ia=Bt),Bt>ro&&(ro=Bt)}var Hs=0,Wl=0,Ai=0,Gs=0,Ys=0,Zi=0,Ro=0,Cl=0,_s=0,Fi,vl,lo,zi,po={point:no,lineStart:us,lineEnd:es,polygonStart:function(){po.lineStart=Au,po.lineEnd=Rs},polygonEnd:function(){po.point=no,po.lineStart=us,po.lineEnd=es},result:function(){var bt=_s?[Ro/_s,Cl/_s]:Zi?[Gs/Zi,Ys/Zi]:Ai?[Hs/Ai,Wl/Ai]:[NaN,NaN];return Hs=Wl=Ai=Gs=Ys=Zi=Ro=Cl=_s=0,bt}};function no(bt,Bt){Hs+=bt,Wl+=Bt,++Ai}function us(){po.point=Qs}function Qs(bt,Bt){po.point=lu,no(lo=bt,zi=Bt)}function lu(bt,Bt){var dr=bt-lo,cr=Bt-zi,Or=h(dr*dr+cr*cr);Gs+=Or*(lo+bt)/2,Ys+=Or*(zi+Bt)/2,Zi+=Or,no(lo=bt,zi=Bt)}function es(){po.point=no}function Au(){po.point=Oo}function Rs(){hc(Fi,vl)}function Oo(bt,Bt){po.point=hc,no(Fi=lo=bt,vl=zi=Bt)}function hc(bt,Bt){var dr=bt-lo,cr=Bt-zi,Or=h(dr*dr+cr*cr);Gs+=Or*(lo+bt)/2,Ys+=Or*(zi+Bt)/2,Zi+=Or,Or=zi*bt-lo*Bt,Ro+=Or*(lo+bt),Cl+=Or*(zi+Bt),_s+=Or*3,no(lo=bt,zi=Bt)}function So(bt){this._context=bt}So.prototype={_radius:4.5,pointRadius:function(bt){return this._radius=bt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(bt,Bt){switch(this._point){case 0:{this._context.moveTo(bt,Bt),this._point=1;break}case 1:{this._context.lineTo(bt,Bt);break}default:{this._context.moveTo(bt+this._radius,Bt),this._context.arc(bt,Bt,this._radius,0,o);break}}},result:F};var Is=A(),Xl,Xu,ju,Ws,Ll,Fs={point:F,lineStart:function(){Fs.point=uu},lineEnd:function(){Xl&&pl(Xu,ju),Fs.point=F},polygonStart:function(){Xl=!0},polygonEnd:function(){Xl=null},result:function(){var bt=+Is;return Is.reset(),bt}};function uu(bt,Bt){Fs.point=pl,Xu=Ws=bt,ju=Ll=Bt}function pl(bt,Bt){Ws-=bt,Ll-=Bt,Is.add(h(Ws*Ws+Ll*Ll)),Ws=bt,Ll=Bt}function cu(){this._string=[]}cu.prototype={_radius:4.5,_circle:Mu(4.5),pointRadius:function(bt){return(bt=+bt)!==this._radius&&(this._radius=bt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(bt,Bt){switch(this._point){case 0:{this._string.push("M",bt,",",Bt),this._point=1;break}case 1:{this._string.push("L",bt,",",Bt);break}default:{this._circle==null&&(this._circle=Mu(this._radius)),this._string.push("M",bt,",",Bt,this._circle);break}}},result:function(){if(this._string.length){var bt=this._string.join("");return this._string=[],bt}else return null}};function Mu(bt){return"m0,"+bt+"a"+bt+","+bt+" 0 1,1 0,"+-2*bt+"a"+bt+","+bt+" 0 1,1 0,"+2*bt+"z"}function jl(bt,Bt){var dr=4.5,cr,Or;function ln(_n){return _n&&(typeof dr=="function"&&Or.pointRadius(+dr.apply(this,arguments)),G(_n,cr(Or))),Or.result()}return ln.area=function(_n){return G(_n,cr(Sn)),Sn.result()},ln.measure=function(_n){return G(_n,cr(Fs)),Fs.result()},ln.bounds=function(_n){return G(_n,cr($o)),$o.result()},ln.centroid=function(_n){return G(_n,cr(po)),po.result()},ln.projection=function(_n){return arguments.length?(cr=_n==null?(bt=null,gn):(bt=_n).stream,ln):bt},ln.context=function(_n){return arguments.length?(Or=_n==null?(Bt=null,new cu):new So(Bt=_n),typeof dr!="function"&&Or.pointRadius(dr),ln):Bt},ln.pointRadius=function(_n){return arguments.length?(dr=typeof _n=="function"?_n:(Or.pointRadius(+_n),+_n),ln):dr},ln.projection(bt).context(Bt)}function Eu(bt){return{stream:qs(bt)}}function qs(bt){return function(Bt){var dr=new Zl;for(var cr in bt)dr[cr]=bt[cr];return dr.stream=Bt,dr}}function Zl(){}Zl.prototype={constructor:Zl,point:function(bt,Bt){this.stream.point(bt,Bt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function dl(bt,Bt,dr){var cr=bt.clipExtent&&bt.clipExtent();return bt.scale(150).translate([0,0]),cr!=null&&bt.clipExtent(null),G(dr,bt.stream($o)),Bt($o.result()),cr!=null&&bt.clipExtent(cr),bt}function ws(bt,Bt,dr){return dl(bt,function(cr){var Or=Bt[1][0]-Bt[0][0],ln=Bt[1][1]-Bt[0][1],_n=Math.min(Or/(cr[1][0]-cr[0][0]),ln/(cr[1][1]-cr[0][1])),Pn=+Bt[0][0]+(Or-_n*(cr[1][0]+cr[0][0]))/2,zn=+Bt[0][1]+(ln-_n*(cr[1][1]+cr[0][1]))/2;bt.scale(150*_n).translate([Pn,zn])},dr)}function Pl(bt,Bt,dr){return ws(bt,[[0,0],Bt],dr)}function fu(bt,Bt,dr){return dl(bt,function(cr){var Or=+Bt,ln=Or/(cr[1][0]-cr[0][0]),_n=(Or-ln*(cr[1][0]+cr[0][0]))/2,Pn=-ln*cr[0][1];bt.scale(150*ln).translate([_n,Pn])},dr)}function Su(bt,Bt,dr){return dl(bt,function(cr){var Or=+Bt,ln=Or/(cr[1][1]-cr[0][1]),_n=-ln*cr[0][0],Pn=(Or-ln*(cr[1][1]+cr[0][1]))/2;bt.scale(150*ln).translate([_n,Pn])},dr)}var ku=16,Kl=l(30*g);function el(bt,Bt){return+Bt?cs(bt,Bt):Cu(bt)}function Cu(bt){return qs({point:function(Bt,dr){Bt=bt(Bt,dr),this.stream.point(Bt[0],Bt[1])}})}function cs(bt,Bt){function dr(cr,Or,ln,_n,Pn,zn,Xn,wn,Un,On,jn,ia,Ga,za){var Ya=Xn-cr,ja=wn-Or,aa=Ya*Ya+ja*ja;if(aa>4*Bt&&Ga--){var ba=_n+On,Qa=Pn+jn,si=zn+ia,Mi=h(ba*ba+Qa*Qa+si*si),Ei=S(si/=Mi),wi=d(d(si)-1)<i||d(ln-Un)<i?(ln+Un)/2:m(Qa,ba),Pi=bt(wi,Ei),hi=Pi[0],ko=Pi[1],ao=hi-cr,li=ko-Or,Aa=ja*ao-Ya*li;(Aa*Aa/aa>Bt||d((Ya*ao+ja*li)/aa-.5)>.3||_n*On+Pn*jn+zn*ia<Kl)&&(dr(cr,Or,ln,_n,Pn,zn,hi,ko,wi,ba/=Mi,Qa/=Mi,si,Ga,za),za.point(hi,ko),dr(hi,ko,wi,ba,Qa,si,Xn,wn,Un,On,jn,ia,Ga,za))}}return function(cr){var Or,ln,_n,Pn,zn,Xn,wn,Un,On,jn,ia,Ga,za={point:Ya,lineStart:ja,lineEnd:ba,polygonStart:function(){cr.polygonStart(),za.lineStart=Qa},polygonEnd:function(){cr.polygonEnd(),za.lineStart=ja}};function Ya(Ei,wi){Ei=bt(Ei,wi),cr.point(Ei[0],Ei[1])}function ja(){Un=NaN,za.point=aa,cr.lineStart()}function aa(Ei,wi){var Pi=ie([Ei,wi]),hi=bt(Ei,wi);dr(Un,On,wn,jn,ia,Ga,Un=hi[0],On=hi[1],wn=Ei,jn=Pi[0],ia=Pi[1],Ga=Pi[2],ku,cr),cr.point(Un,On)}function ba(){za.point=Ya,cr.lineEnd()}function Qa(){ja(),za.point=si,za.lineEnd=Mi}function si(Ei,wi){aa(Or=Ei,wi),ln=Un,_n=On,Pn=jn,zn=ia,Xn=Ga,za.point=aa}function Mi(){dr(Un,On,wn,jn,ia,Ga,ln,_n,Or,Pn,zn,Xn,ku,cr),za.lineEnd=ba,ba()}return za}}var Yo=qs({point:function(bt,Bt){this.stream.point(bt*g,Bt*g)}});function tl(bt){return qs({point:function(Bt,dr){var cr=bt(Bt,dr);return this.stream.point(cr[0],cr[1])}})}function hu(bt,Bt,dr,cr,Or){function ln(_n,Pn){return _n*=cr,Pn*=Or,[Bt+bt*_n,dr-bt*Pn]}return ln.invert=function(_n,Pn){return[(_n-Bt)/bt*cr,(dr-Pn)/bt*Or]},ln}function Ts(bt,Bt,dr,cr,Or,ln){var _n=l(ln),Pn=p(ln),zn=_n*bt,Xn=Pn*bt,wn=_n/bt,Un=Pn/bt,On=(Pn*dr-_n*Bt)/bt,jn=(Pn*Bt+_n*dr)/bt;function ia(Ga,za){return Ga*=cr,za*=Or,[zn*Ga-Xn*za+Bt,dr-Xn*Ga-zn*za]}return ia.invert=function(Ga,za){return[cr*(wn*Ga-Un*za+On),Or*(jn-Un*Ga-wn*za)]},ia}function Io(bt){return Dl(function(){return bt})()}function Dl(bt){var Bt,dr=150,cr=480,Or=250,ln=0,_n=0,Pn=0,zn=0,Xn=0,wn,Un=0,On=1,jn=1,ia=null,Ga=Kt,za=null,Ya,ja,aa,ba=gn,Qa=.5,si,Mi,Ei,wi,Pi;function hi(Aa){return Ei(Aa[0]*g,Aa[1]*g)}function ko(Aa){return Aa=Ei.invert(Aa[0],Aa[1]),Aa&&[Aa[0]*b,Aa[1]*b]}hi.stream=function(Aa){return wi&&Pi===Aa?wi:wi=Yo(tl(wn)(Ga(si(ba(Pi=Aa)))))},hi.preclip=function(Aa){return arguments.length?(Ga=Aa,ia=void 0,li()):Ga},hi.postclip=function(Aa){return arguments.length?(ba=Aa,za=Ya=ja=aa=null,li()):ba},hi.clipAngle=function(Aa){return arguments.length?(Ga=+Aa?Dr(ia=Aa*g):(ia=null,Kt),li()):ia*b},hi.clipExtent=function(Aa){return arguments.length?(ba=Aa==null?(za=Ya=ja=aa=null,gn):yn(za=+Aa[0][0],Ya=+Aa[0][1],ja=+Aa[1][0],aa=+Aa[1][1]),li()):za==null?null:[[za,Ya],[ja,aa]]},hi.scale=function(Aa){return arguments.length?(dr=+Aa,ao()):dr},hi.translate=function(Aa){return arguments.length?(cr=+Aa[0],Or=+Aa[1],ao()):[cr,Or]},hi.center=function(Aa){return arguments.length?(ln=Aa[0]%360*g,_n=Aa[1]%360*g,ao()):[ln*b,_n*b]},hi.rotate=function(Aa){return arguments.length?(Pn=Aa[0]%360*g,zn=Aa[1]%360*g,Xn=Aa.length>2?Aa[2]%360*g:0,ao()):[Pn*b,zn*b,Xn*b]},hi.angle=function(Aa){return arguments.length?(Un=Aa%360*g,ao()):Un*b},hi.reflectX=function(Aa){return arguments.length?(On=Aa?-1:1,ao()):On<0},hi.reflectY=function(Aa){return arguments.length?(jn=Aa?-1:1,ao()):jn<0},hi.precision=function(Aa){return arguments.length?(si=el(Mi,Qa=Aa*Aa),li()):h(Qa)},hi.fitExtent=function(Aa,ki){return ws(hi,Aa,ki)},hi.fitSize=function(Aa,ki){return Pl(hi,Aa,ki)},hi.fitWidth=function(Aa,ki){return fu(hi,Aa,ki)},hi.fitHeight=function(Aa,ki){return Su(hi,Aa,ki)};function ao(){var Aa=Ts(dr,0,0,On,jn,Un).apply(null,Bt(ln,_n)),ki=(Un?Ts:hu)(dr,cr-Aa[0],Or-Aa[1],On,jn,Un);return wn=ot(Pn,zn,Xn),Mi=Pe(Bt,ki),Ei=Pe(wn,Mi),si=el(Mi,Qa),li()}function li(){return wi=Pi=null,hi}return function(){return Bt=bt.apply(this,arguments),hi.invert=Bt.invert&&ko,ao()}}function As(bt){var Bt=0,dr=r/3,cr=Dl(bt),Or=cr(Bt,dr);return Or.parallels=function(ln){return arguments.length?cr(Bt=ln[0]*g,dr=ln[1]*g):[Bt*b,dr*b]},Or}function zs(bt){var Bt=l(bt);function dr(cr,Or){return[cr*Bt,p(Or)/Bt]}return dr.invert=function(cr,Or){return[cr/Bt,S(Or*Bt)]},dr}function go(bt,Bt){var dr=p(bt),cr=(dr+p(Bt))/2;if(d(cr)<i)return zs(bt);var Or=1+dr*(2*cr-dr),ln=h(Or)/cr;function _n(Pn,zn){var Xn=h(Or-2*cr*p(zn))/cr;return[Xn*p(Pn*=cr),ln-Xn*l(Pn)]}return _n.invert=function(Pn,zn){var Xn=ln-zn,wn=m(Pn,d(Xn))*_(Xn);return Xn*cr<0&&(wn-=r*_(Pn)*_(Xn)),[wn/cr,S((Or-(Pn*Pn+Xn*Xn)*cr*cr)/(2*cr))]},_n}function Rl(){return As(go).scale(155.424).center([0,33.6442])}function Il(){return Rl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function rl(bt){var Bt=bt.length;return{point:function(dr,cr){for(var Or=-1;++Or<Bt;)bt[Or].point(dr,cr)},sphere:function(){for(var dr=-1;++dr<Bt;)bt[dr].sphere()},lineStart:function(){for(var dr=-1;++dr<Bt;)bt[dr].lineStart()},lineEnd:function(){for(var dr=-1;++dr<Bt;)bt[dr].lineEnd()},polygonStart:function(){for(var dr=-1;++dr<Bt;)bt[dr].polygonStart()},polygonEnd:function(){for(var dr=-1;++dr<Bt;)bt[dr].polygonEnd()}}}function fs(){var bt,Bt,dr=Il(),cr,Or=Rl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ln,_n=Rl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Pn,zn,Xn={point:function(On,jn){zn=[On,jn]}};function wn(On){var jn=On[0],ia=On[1];return zn=null,cr.point(jn,ia),zn||(ln.point(jn,ia),zn)||(Pn.point(jn,ia),zn)}wn.invert=function(On){var jn=dr.scale(),ia=dr.translate(),Ga=(On[0]-ia[0])/jn,za=(On[1]-ia[1])/jn;return(za>=.12&&za<.234&&Ga>=-.425&&Ga<-.214?Or:za>=.166&&za<.234&&Ga>=-.214&&Ga<-.115?_n:dr).invert(On)},wn.stream=function(On){return bt&&Bt===On?bt:bt=rl([dr.stream(Bt=On),Or.stream(On),_n.stream(On)])},wn.precision=function(On){return arguments.length?(dr.precision(On),Or.precision(On),_n.precision(On),Un()):dr.precision()},wn.scale=function(On){return arguments.length?(dr.scale(On),Or.scale(On*.35),_n.scale(On),wn.translate(dr.translate())):dr.scale()},wn.translate=function(On){if(!arguments.length)return dr.translate();var jn=dr.scale(),ia=+On[0],Ga=+On[1];return cr=dr.translate(On).clipExtent([[ia-.455*jn,Ga-.238*jn],[ia+.455*jn,Ga+.238*jn]]).stream(Xn),ln=Or.translate([ia-.307*jn,Ga+.201*jn]).clipExtent([[ia-.425*jn+i,Ga+.12*jn+i],[ia-.214*jn-i,Ga+.234*jn-i]]).stream(Xn),Pn=_n.translate([ia-.205*jn,Ga+.212*jn]).clipExtent([[ia-.214*jn+i,Ga+.166*jn+i],[ia-.115*jn-i,Ga+.234*jn-i]]).stream(Xn),Un()},wn.fitExtent=function(On,jn){return ws(wn,On,jn)},wn.fitSize=function(On,jn){return Pl(wn,On,jn)},wn.fitWidth=function(On,jn){return fu(wn,On,jn)},wn.fitHeight=function(On,jn){return Su(wn,On,jn)};function Un(){return bt=Bt=null,wn}return wn.scale(1070)}function yl(bt){return function(Bt,dr){var cr=l(Bt),Or=l(dr),ln=bt(cr*Or);return[ln*Or*p(Bt),ln*p(dr)]}}function ml(bt){return function(Bt,dr){var cr=h(Bt*Bt+dr*dr),Or=bt(cr),ln=p(Or),_n=l(Or);return[m(Bt*ln,cr*_n),S(cr&&dr*ln/cr)]}}var Jl=yl(function(bt){return h(2/(1+bt))});Jl.invert=ml(function(bt){return 2*S(bt/2)});function Fl(){return Io(Jl).scale(124.75).clipAngle(180-.001)}var nl=yl(function(bt){return(bt=E(bt))&&bt/p(bt)});nl.invert=ml(function(bt){return bt});function Zu(){return Io(nl).scale(79.4188).clipAngle(180-.001)}function hs(bt,Bt){return[bt,M(L((v+Bt)/2))]}hs.invert=function(bt,Bt){return[bt,2*f(u(Bt))-v]};function Xs(){return vu(hs).scale(961/o)}function vu(bt){var Bt=Io(bt),dr=Bt.center,cr=Bt.scale,Or=Bt.translate,ln=Bt.clipExtent,_n=null,Pn,zn,Xn;Bt.scale=function(Un){return arguments.length?(cr(Un),wn()):cr()},Bt.translate=function(Un){return arguments.length?(Or(Un),wn()):Or()},Bt.center=function(Un){return arguments.length?(dr(Un),wn()):dr()},Bt.clipExtent=function(Un){return arguments.length?(Un==null?_n=Pn=zn=Xn=null:(_n=+Un[0][0],Pn=+Un[0][1],zn=+Un[1][0],Xn=+Un[1][1]),wn()):_n==null?null:[[_n,Pn],[zn,Xn]]};function wn(){var Un=r*cr(),On=Bt(xt(Bt.rotate()).invert([0,0]));return ln(_n==null?[[On[0]-Un,On[1]-Un],[On[0]+Un,On[1]+Un]]:bt===hs?[[Math.max(On[0]-Un,_n),Pn],[Math.min(On[0]+Un,zn),Xn]]:[[_n,Math.max(On[1]-Un,Pn)],[zn,Math.min(On[1]+Un,Xn)]])}return wn()}function xl(bt){return L((v+bt)/2)}function zl(bt,Bt){var dr=l(bt),cr=bt===Bt?p(bt):M(dr/l(Bt))/M(xl(Bt)/xl(bt)),Or=dr*w(xl(bt),cr)/cr;if(!cr)return hs;function ln(_n,Pn){Or>0?Pn<-v+i&&(Pn=-v+i):Pn>v-i&&(Pn=v-i);var zn=Or/w(xl(Pn),cr);return[zn*p(cr*_n),Or-zn*l(cr*_n)]}return ln.invert=function(_n,Pn){var zn=Or-Pn,Xn=_(cr)*h(_n*_n+zn*zn),wn=m(_n,d(zn))*_(zn);return zn*cr<0&&(wn-=r*_(_n)*_(zn)),[wn/cr,2*f(w(Or/Xn,1/cr))-v]},ln}function al(){return As(zl).scale(109.5).parallels([30,30])}function Ol(bt,Bt){return[bt,Bt]}Ol.invert=Ol;function pu(){return Io(Ol).scale(152.63)}function Lu(bt,Bt){var dr=l(bt),cr=bt===Bt?p(bt):(dr-l(Bt))/(Bt-bt),Or=dr/cr+bt;if(d(cr)<i)return Ol;function ln(_n,Pn){var zn=Or-Pn,Xn=cr*_n;return[zn*p(Xn),Or-zn*l(Xn)]}return ln.invert=function(_n,Pn){var zn=Or-Pn,Xn=m(_n,d(zn))*_(zn);return zn*cr<0&&(Xn-=r*_(_n)*_(zn)),[Xn/cr,Or-_(cr)*h(_n*_n+zn*zn)]},ln}function vc(){return As(Lu).scale(131.154).center([0,13.9389])}var Bi=1.340264,bl=-.081106,il=893e-6,ts=.003796,vs=h(3)/2,Nl=12;function uo(bt,Bt){var dr=S(vs*p(Bt)),cr=dr*dr,Or=cr*cr*cr;return[bt*l(dr)/(vs*(Bi+3*bl*cr+Or*(7*il+9*ts*cr))),dr*(Bi+bl*cr+Or*(il+ts*cr))]}uo.invert=function(bt,Bt){for(var dr=Bt,cr=dr*dr,Or=cr*cr*cr,ln=0,_n,Pn,zn;ln<Nl&&(Pn=dr*(Bi+bl*cr+Or*(il+ts*cr))-Bt,zn=Bi+3*bl*cr+Or*(7*il+9*ts*cr),dr-=_n=Pn/zn,cr=dr*dr,Or=cr*cr*cr,!(d(_n)<n));++ln);return[vs*bt*(Bi+3*bl*cr+Or*(7*il+9*ts*cr))/l(dr),S(p(dr)/vs)]};function Pu(){return Io(uo).scale(177.158)}function Wo(bt,Bt){var dr=l(Bt),cr=l(bt)*dr;return[dr*p(bt)/cr,p(Bt)/cr]}Wo.invert=ml(f);function js(){return Io(Wo).scale(144.049).clipAngle(60)}function Os(){var bt=1,Bt=0,dr=0,cr=1,Or=1,ln=0,_n,Pn,zn=null,Xn,wn,Un,On=1,jn=1,ia=qs({point:function(ba,Qa){var si=aa([ba,Qa]);this.stream.point(si[0],si[1])}}),Ga=gn,za,Ya;function ja(){return On=bt*cr,jn=bt*Or,za=Ya=null,aa}function aa(ba){var Qa=ba[0]*On,si=ba[1]*jn;if(ln){var Mi=si*_n-Qa*Pn;Qa=Qa*_n+si*Pn,si=Mi}return[Qa+Bt,si+dr]}return aa.invert=function(ba){var Qa=ba[0]-Bt,si=ba[1]-dr;if(ln){var Mi=si*_n+Qa*Pn;Qa=Qa*_n-si*Pn,si=Mi}return[Qa/On,si/jn]},aa.stream=function(ba){return za&&Ya===ba?za:za=ia(Ga(Ya=ba))},aa.postclip=function(ba){return arguments.length?(Ga=ba,zn=Xn=wn=Un=null,ja()):Ga},aa.clipExtent=function(ba){return arguments.length?(Ga=ba==null?(zn=Xn=wn=Un=null,gn):yn(zn=+ba[0][0],Xn=+ba[0][1],wn=+ba[1][0],Un=+ba[1][1]),ja()):zn==null?null:[[zn,Xn],[wn,Un]]},aa.scale=function(ba){return arguments.length?(bt=+ba,ja()):bt},aa.translate=function(ba){return arguments.length?(Bt=+ba[0],dr=+ba[1],ja()):[Bt,dr]},aa.angle=function(ba){return arguments.length?(ln=ba%360*g,Pn=p(ln),_n=l(ln),ja()):ln*b},aa.reflectX=function(ba){return arguments.length?(cr=ba?-1:1,ja()):cr<0},aa.reflectY=function(ba){return arguments.length?(Or=ba?-1:1,ja()):Or<0},aa.fitExtent=function(ba,Qa){return ws(aa,ba,Qa)},aa.fitSize=function(ba,Qa){return Pl(aa,ba,Qa)},aa.fitWidth=function(ba,Qa){return fu(aa,ba,Qa)},aa.fitHeight=function(ba,Qa){return Su(aa,ba,Qa)},aa}function Ms(bt,Bt){var dr=Bt*Bt,cr=dr*dr;return[bt*(.8707-.131979*dr+cr*(-.013791+cr*(.003971*dr-.001529*cr))),Bt*(1.007226+dr*(.015085+cr*(-.044475+.028874*dr-.005916*cr)))]}Ms.invert=function(bt,Bt){var dr=Bt,cr=25,Or;do{var ln=dr*dr,_n=ln*ln;dr-=Or=(dr*(1.007226+ln*(.015085+_n*(-.044475+.028874*ln-.005916*_n)))-Bt)/(1.007226+ln*(.015085*3+_n*(-.044475*7+.028874*9*ln-.005916*11*_n)))}while(d(Or)>i&&--cr>0);return[bt/(.8707+(ln=dr*dr)*(-.131979+ln*(-.013791+ln*ln*ln*(.003971-.001529*ln)))),dr]};function Vo(){return Io(Ms).scale(175.295)}function Ki(bt,Bt){return[l(Bt)*p(bt),p(Bt)]}Ki.invert=ml(S);function No(){return Io(Ki).scale(249.5).clipAngle(90+i)}function ps(bt,Bt){var dr=l(Bt),cr=1+l(bt)*dr;return[dr*p(bt)/cr,p(Bt)/cr]}ps.invert=ml(function(bt){return 2*f(bt)});function Du(){return Io(ps).scale(250).clipAngle(142)}function $l(bt,Bt){return[M(L((v+Bt)/2)),-bt]}$l.invert=function(bt,Bt){return[-Bt,2*f(u(bt))-v]};function Ru(){var bt=vu($l),Bt=bt.center,dr=bt.rotate;return bt.center=function(cr){return arguments.length?Bt([-cr[1],cr[0]]):(cr=Bt(),[cr[1],-cr[0]])},bt.rotate=function(cr){return arguments.length?dr([cr[0],cr[1],cr.length>2?cr[2]+90:90]):(cr=dr(),[cr[0],cr[1],cr[2]-90])},dr([0,0,90]).scale(159.155)}y.geoAlbers=Il,y.geoAlbersUsa=fs,y.geoArea=Z,y.geoAzimuthalEqualArea=Fl,y.geoAzimuthalEqualAreaRaw=Jl,y.geoAzimuthalEquidistant=Zu,y.geoAzimuthalEquidistantRaw=nl,y.geoBounds=Xe,y.geoCentroid=Et,y.geoCircle=or,y.geoClipAntimeridian=Kt,y.geoClipCircle=Dr,y.geoClipExtent=Wn,y.geoClipRectangle=yn,y.geoConicConformal=al,y.geoConicConformalRaw=zl,y.geoConicEqualArea=Rl,y.geoConicEqualAreaRaw=go,y.geoConicEquidistant=vc,y.geoConicEquidistantRaw=Lu,y.geoContains=gr,y.geoDistance=Ln,y.geoEqualEarth=Pu,y.geoEqualEarthRaw=uo,y.geoEquirectangular=pu,y.geoEquirectangularRaw=Ol,y.geoGnomonic=js,y.geoGnomonicRaw=Wo,y.geoGraticule=sn,y.geoGraticule10=Cn,y.geoIdentity=Os,y.geoInterpolate=Tn,y.geoLength=kr,y.geoMercator=Xs,y.geoMercatorRaw=hs,y.geoNaturalEarth1=Vo,y.geoNaturalEarth1Raw=Ms,y.geoOrthographic=No,y.geoOrthographicRaw=Ki,y.geoPath=jl,y.geoProjection=Io,y.geoProjectionMutator=Dl,y.geoRotation=xt,y.geoStereographic=Du,y.geoStereographicRaw=ps,y.geoStream=G,y.geoTransform=Eu,y.geoTransverseMercator=Ru,y.geoTransverseMercatorRaw=$l,Object.defineProperty(y,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=y||self,c(y.d3=y.d3||{}))})(this,function(y){function c(Ye,Ee){return Ye.parent===Ee.parent?1:2}function A(Ye){return Ye.reduce(T,0)/Ye.length}function T(Ye,Ee){return Ye+Ee.x}function e(Ye){return 1+Ye.reduce(a,0)}function a(Ye,Ee){return Math.max(Ye,Ee.y)}function i(Ye){for(var Ee;Ee=Ye.children;)Ye=Ee[0];return Ye}function n(Ye){for(var Ee;Ee=Ye.children;)Ye=Ee[Ee.length-1];return Ye}function r(){var Ye=c,Ee=1,Ge=1,Ke=!1;function qe(At){var mt,Mt=0;At.eachAfter(function(Wt){var sr=Wt.children;sr?(Wt.x=A(sr),Wt.y=e(sr)):(Wt.x=mt?Mt+=Ye(Wt,mt):0,Wt.y=0,mt=Wt)});var Gt=i(At),zt=n(At),Ht=Gt.x-Ye(Gt,zt)/2,Zt=zt.x+Ye(zt,Gt)/2;return At.eachAfter(Ke?function(Wt){Wt.x=(Wt.x-At.x)*Ee,Wt.y=(At.y-Wt.y)*Ge}:function(Wt){Wt.x=(Wt.x-Ht)/(Zt-Ht)*Ee,Wt.y=(1-(At.y?Wt.y/At.y:1))*Ge})}return qe.separation=function(At){return arguments.length?(Ye=At,qe):Ye},qe.size=function(At){return arguments.length?(Ke=!1,Ee=+At[0],Ge=+At[1],qe):Ke?null:[Ee,Ge]},qe.nodeSize=function(At){return arguments.length?(Ke=!0,Ee=+At[0],Ge=+At[1],qe):Ke?[Ee,Ge]:null},qe}function v(Ye){var Ee=0,Ge=Ye.children,Ke=Ge&&Ge.length;if(!Ke)Ee=1;else for(;--Ke>=0;)Ee+=Ge[Ke].value;Ye.value=Ee}function s(){return this.eachAfter(v)}function o(Ye){var Ee=this,Ge,Ke=[Ee],qe,At,mt;do for(Ge=Ke.reverse(),Ke=[];Ee=Ge.pop();)if(Ye(Ee),qe=Ee.children,qe)for(At=0,mt=qe.length;At<mt;++At)Ke.push(qe[At]);while(Ke.length);return this}function b(Ye){for(var Ee=this,Ge=[Ee],Ke,qe;Ee=Ge.pop();)if(Ye(Ee),Ke=Ee.children,Ke)for(qe=Ke.length-1;qe>=0;--qe)Ge.push(Ke[qe]);return this}function g(Ye){for(var Ee=this,Ge=[Ee],Ke=[],qe,At,mt;Ee=Ge.pop();)if(Ke.push(Ee),qe=Ee.children,qe)for(At=0,mt=qe.length;At<mt;++At)Ge.push(qe[At]);for(;Ee=Ke.pop();)Ye(Ee);return this}function d(Ye){return this.eachAfter(function(Ee){for(var Ge=+Ye(Ee.data)||0,Ke=Ee.children,qe=Ke&&Ke.length;--qe>=0;)Ge+=Ke[qe].value;Ee.value=Ge})}function f(Ye){return this.eachBefore(function(Ee){Ee.children&&Ee.children.sort(Ye)})}function m(Ye){for(var Ee=this,Ge=l(Ee,Ye),Ke=[Ee];Ee!==Ge;)Ee=Ee.parent,Ke.push(Ee);for(var qe=Ke.length;Ye!==Ge;)Ke.splice(qe,0,Ye),Ye=Ye.parent;return Ke}function l(Ye,Ee){if(Ye===Ee)return Ye;var Ge=Ye.ancestors(),Ke=Ee.ancestors(),qe=null;for(Ye=Ge.pop(),Ee=Ke.pop();Ye===Ee;)qe=Ye,Ye=Ge.pop(),Ee=Ke.pop();return qe}function x(){for(var Ye=this,Ee=[Ye];Ye=Ye.parent;)Ee.push(Ye);return Ee}function u(){var Ye=[];return this.each(function(Ee){Ye.push(Ee)}),Ye}function M(){var Ye=[];return this.eachBefore(function(Ee){Ee.children||Ye.push(Ee)}),Ye}function w(){var Ye=this,Ee=[];return Ye.each(function(Ge){Ge!==Ye&&Ee.push({source:Ge.parent,target:Ge})}),Ee}function p(Ye,Ee){var Ge=new S(Ye),Ke=+Ye.value&&(Ge.value=Ye.value),qe,At=[Ge],mt,Mt,Gt,zt;for(Ee==null&&(Ee=h);qe=At.pop();)if(Ke&&(qe.value=+qe.data.value),(Mt=Ee(qe.data))&&(zt=Mt.length))for(qe.children=new Array(zt),Gt=zt-1;Gt>=0;--Gt)At.push(mt=qe.children[Gt]=new S(Mt[Gt])),mt.parent=qe,mt.depth=qe.depth+1;return Ge.eachBefore(E)}function _(){return p(this).eachBefore(L)}function h(Ye){return Ye.children}function L(Ye){Ye.data=Ye.data.data}function E(Ye){var Ee=0;do Ye.height=Ee;while((Ye=Ye.parent)&&Ye.height<++Ee)}function S(Ye){this.data=Ye,this.depth=this.height=0,this.parent=null}S.prototype=p.prototype={constructor:S,count:s,each:o,eachAfter:g,eachBefore:b,sum:d,sort:f,path:m,ancestors:x,descendants:u,leaves:M,links:w,copy:_};var P=Array.prototype.slice;function F(Ye){for(var Ee=Ye.length,Ge,Ke;Ee;)Ke=Math.random()*Ee--|0,Ge=Ye[Ee],Ye[Ee]=Ye[Ke],Ye[Ke]=Ge;return Ye}function I(Ye){for(var Ee=0,Ge=(Ye=F(P.call(Ye))).length,Ke=[],qe,At;Ee<Ge;)qe=Ye[Ee],At&&O(At,qe)?++Ee:(At=G(Ke=D(Ke,qe)),Ee=0);return At}function D(Ye,Ee){var Ge,Ke;if(z(Ee,Ye))return[Ee];for(Ge=0;Ge<Ye.length;++Ge)if(R(Ee,Ye[Ge])&&z(ee(Ye[Ge],Ee),Ye))return[Ye[Ge],Ee];for(Ge=0;Ge<Ye.length-1;++Ge)for(Ke=Ge+1;Ke<Ye.length;++Ke)if(R(ee(Ye[Ge],Ye[Ke]),Ee)&&R(ee(Ye[Ge],Ee),Ye[Ke])&&R(ee(Ye[Ke],Ee),Ye[Ge])&&z(j(Ye[Ge],Ye[Ke],Ee),Ye))return[Ye[Ge],Ye[Ke],Ee];throw new Error}function R(Ye,Ee){var Ge=Ye.r-Ee.r,Ke=Ee.x-Ye.x,qe=Ee.y-Ye.y;return Ge<0||Ge*Ge<Ke*Ke+qe*qe}function O(Ye,Ee){var Ge=Ye.r-Ee.r+1e-6,Ke=Ee.x-Ye.x,qe=Ee.y-Ye.y;return Ge>0&&Ge*Ge>Ke*Ke+qe*qe}function z(Ye,Ee){for(var Ge=0;Ge<Ee.length;++Ge)if(!O(Ye,Ee[Ge]))return!1;return!0}function G(Ye){switch(Ye.length){case 1:return Y(Ye[0]);case 2:return ee(Ye[0],Ye[1]);case 3:return j(Ye[0],Ye[1],Ye[2])}}function Y(Ye){return{x:Ye.x,y:Ye.y,r:Ye.r}}function ee(Ye,Ee){var Ge=Ye.x,Ke=Ye.y,qe=Ye.r,At=Ee.x,mt=Ee.y,Mt=Ee.r,Gt=At-Ge,zt=mt-Ke,Ht=Mt-qe,Zt=Math.sqrt(Gt*Gt+zt*zt);return{x:(Ge+At+Gt/Zt*Ht)/2,y:(Ke+mt+zt/Zt*Ht)/2,r:(Zt+qe+Mt)/2}}function j(Ye,Ee,Ge){var Ke=Ye.x,qe=Ye.y,At=Ye.r,mt=Ee.x,Mt=Ee.y,Gt=Ee.r,zt=Ge.x,Ht=Ge.y,Zt=Ge.r,Wt=Ke-mt,sr=Ke-zt,Gr=qe-Mt,cn=qe-Ht,qr=Gt-At,st=Zt-At,rr=Ke*Ke+qe*qe-At*At,$t=rr-mt*mt-Mt*Mt+Gt*Gt,hr=rr-zt*zt-Ht*Ht+Zt*Zt,Sr=sr*Gr-Wt*cn,tt=(Gr*hr-cn*$t)/(Sr*2)-Ke,Qe=(cn*qr-Gr*st)/Sr,lt=(sr*$t-Wt*hr)/(Sr*2)-qe,ft=(Wt*st-sr*qr)/Sr,Et=Qe*Qe+ft*ft-1,Vt=2*(At+tt*Qe+lt*ft),Pe=tt*tt+lt*lt-At*At,Se=-(Et?(Vt+Math.sqrt(Vt*Vt-4*Et*Pe))/(2*Et):Pe/Vt);return{x:Ke+tt+Qe*Se,y:qe+lt+ft*Se,r:Se}}function X(Ye,Ee,Ge){var Ke=Ye.x-Ee.x,qe,At,mt=Ye.y-Ee.y,Mt,Gt,zt=Ke*Ke+mt*mt;zt?(At=Ee.r+Ge.r,At*=At,Gt=Ye.r+Ge.r,Gt*=Gt,At>Gt?(qe=(zt+Gt-At)/(2*zt),Mt=Math.sqrt(Math.max(0,Gt/zt-qe*qe)),Ge.x=Ye.x-qe*Ke-Mt*mt,Ge.y=Ye.y-qe*mt+Mt*Ke):(qe=(zt+At-Gt)/(2*zt),Mt=Math.sqrt(Math.max(0,At/zt-qe*qe)),Ge.x=Ee.x+qe*Ke-Mt*mt,Ge.y=Ee.y+qe*mt+Mt*Ke)):(Ge.x=Ee.x+Ge.r,Ge.y=Ee.y)}function ae(Ye,Ee){var Ge=Ye.r+Ee.r-1e-6,Ke=Ee.x-Ye.x,qe=Ee.y-Ye.y;return Ge>0&&Ge*Ge>Ke*Ke+qe*qe}function he(Ye){var Ee=Ye._,Ge=Ye.next._,Ke=Ee.r+Ge.r,qe=(Ee.x*Ge.r+Ge.x*Ee.r)/Ke,At=(Ee.y*Ge.r+Ge.y*Ee.r)/Ke;return qe*qe+At*At}function K(Ye){this._=Ye,this.next=null,this.previous=null}function J(Ye){if(!(qe=Ye.length))return 0;var Ee,Ge,Ke,qe,At,mt,Mt,Gt,zt,Ht,Zt;if(Ee=Ye[0],Ee.x=0,Ee.y=0,!(qe>1))return Ee.r;if(Ge=Ye[1],Ee.x=-Ge.r,Ge.x=Ee.r,Ge.y=0,!(qe>2))return Ee.r+Ge.r;X(Ge,Ee,Ke=Ye[2]),Ee=new K(Ee),Ge=new K(Ge),Ke=new K(Ke),Ee.next=Ke.previous=Ge,Ge.next=Ee.previous=Ke,Ke.next=Ge.previous=Ee;e:for(Mt=3;Mt<qe;++Mt){X(Ee._,Ge._,Ke=Ye[Mt]),Ke=new K(Ke),Gt=Ge.next,zt=Ee.previous,Ht=Ge._.r,Zt=Ee._.r;do if(Ht<=Zt){if(ae(Gt._,Ke._)){Ge=Gt,Ee.next=Ge,Ge.previous=Ee,--Mt;continue e}Ht+=Gt._.r,Gt=Gt.next}else{if(ae(zt._,Ke._)){Ee=zt,Ee.next=Ge,Ge.previous=Ee,--Mt;continue e}Zt+=zt._.r,zt=zt.previous}while(Gt!==zt.next);for(Ke.previous=Ee,Ke.next=Ge,Ee.next=Ge.previous=Ge=Ke,At=he(Ee);(Ke=Ke.next)!==Ge;)(mt=he(Ke))<At&&(Ee=Ke,At=mt);Ge=Ee.next}for(Ee=[Ge._],Ke=Ge;(Ke=Ke.next)!==Ge;)Ee.push(Ke._);for(Ke=I(Ee),Mt=0;Mt<qe;++Mt)Ee=Ye[Mt],Ee.x-=Ke.x,Ee.y-=Ke.y;return Ke.r}function U(Ye){return J(Ye),Ye}function H(Ye){return Ye==null?null:q(Ye)}function q(Ye){if(typeof Ye!="function")throw new Error;return Ye}function re(){return 0}function Z(Ye){return function(){return Ye}}function Q(Ye){return Math.sqrt(Ye.value)}function ie(){var Ye=null,Ee=1,Ge=1,Ke=re;function qe(At){return At.x=Ee/2,At.y=Ge/2,Ye?At.eachBefore(oe(Ye)).eachAfter(ne(Ke,.5)).eachBefore(le(1)):At.eachBefore(oe(Q)).eachAfter(ne(re,1)).eachAfter(ne(Ke,At.r/Math.min(Ee,Ge))).eachBefore(le(Math.min(Ee,Ge)/(2*At.r))),At}return qe.radius=function(At){return arguments.length?(Ye=H(At),qe):Ye},qe.size=function(At){return arguments.length?(Ee=+At[0],Ge=+At[1],qe):[Ee,Ge]},qe.padding=function(At){return arguments.length?(Ke=typeof At=="function"?At:Z(+At),qe):Ke},qe}function oe(Ye){return function(Ee){Ee.children||(Ee.r=Math.max(0,+Ye(Ee)||0))}}function ne(Ye,Ee){return function(Ge){if(Ke=Ge.children){var Ke,qe,At=Ke.length,mt=Ye(Ge)*Ee||0,Mt;if(mt)for(qe=0;qe<At;++qe)Ke[qe].r+=mt;if(Mt=J(Ke),mt)for(qe=0;qe<At;++qe)Ke[qe].r-=mt;Ge.r=Mt+mt}}}function le(Ye){return function(Ee){var Ge=Ee.parent;Ee.r*=Ye,Ge&&(Ee.x=Ge.x+Ye*Ee.x,Ee.y=Ge.y+Ye*Ee.y)}}function _e(Ye){Ye.x0=Math.round(Ye.x0),Ye.y0=Math.round(Ye.y0),Ye.x1=Math.round(Ye.x1),Ye.y1=Math.round(Ye.y1)}function fe(Ye,Ee,Ge,Ke,qe){for(var At=Ye.children,mt,Mt=-1,Gt=At.length,zt=Ye.value&&(Ke-Ee)/Ye.value;++Mt<Gt;)mt=At[Mt],mt.y0=Ge,mt.y1=qe,mt.x0=Ee,mt.x1=Ee+=mt.value*zt}function ye(){var Ye=1,Ee=1,Ge=0,Ke=!1;function qe(mt){var Mt=mt.height+1;return mt.x0=mt.y0=Ge,mt.x1=Ye,mt.y1=Ee/Mt,mt.eachBefore(At(Ee,Mt)),Ke&&mt.eachBefore(_e),mt}function At(mt,Mt){return function(Gt){Gt.children&&fe(Gt,Gt.x0,mt*(Gt.depth+1)/Mt,Gt.x1,mt*(Gt.depth+2)/Mt);var zt=Gt.x0,Ht=Gt.y0,Zt=Gt.x1-Ge,Wt=Gt.y1-Ge;Zt<zt&&(zt=Zt=(zt+Zt)/2),Wt<Ht&&(Ht=Wt=(Ht+Wt)/2),Gt.x0=zt,Gt.y0=Ht,Gt.x1=Zt,Gt.y1=Wt}}return qe.round=function(mt){return arguments.length?(Ke=!!mt,qe):Ke},qe.size=function(mt){return arguments.length?(Ye=+mt[0],Ee=+mt[1],qe):[Ye,Ee]},qe.padding=function(mt){return arguments.length?(Ge=+mt,qe):Ge},qe}var xe="$",me={depth:-1},be={};function ke(Ye){return Ye.id}function De(Ye){return Ye.parentId}function He(){var Ye=ke,Ee=De;function Ge(Ke){var qe,At,mt=Ke.length,Mt,Gt,zt,Ht=new Array(mt),Zt,Wt,sr={};for(At=0;At<mt;++At)qe=Ke[At],zt=Ht[At]=new S(qe),(Zt=Ye(qe,At,Ke))!=null&&(Zt+="")&&(Wt=xe+(zt.id=Zt),sr[Wt]=Wt in sr?be:zt);for(At=0;At<mt;++At)if(zt=Ht[At],Zt=Ee(Ke[At],At,Ke),Zt==null||!(Zt+="")){if(Mt)throw new Error("multiple roots");Mt=zt}else{if(Gt=sr[xe+Zt],!Gt)throw new Error("missing: "+Zt);if(Gt===be)throw new Error("ambiguous: "+Zt);Gt.children?Gt.children.push(zt):Gt.children=[zt],zt.parent=Gt}if(!Mt)throw new Error("no root");if(Mt.parent=me,Mt.eachBefore(function(Gr){Gr.depth=Gr.parent.depth+1,--mt}).eachBefore(E),Mt.parent=null,mt>0)throw new Error("cycle");return Mt}return Ge.id=function(Ke){return arguments.length?(Ye=q(Ke),Ge):Ye},Ge.parentId=function(Ke){return arguments.length?(Ee=q(Ke),Ge):Ee},Ge}function Ae(Ye,Ee){return Ye.parent===Ee.parent?1:2}function Le(Ye){var Ee=Ye.children;return Ee?Ee[0]:Ye.t}function Ze(Ye){var Ee=Ye.children;return Ee?Ee[Ee.length-1]:Ye.t}function We(Ye,Ee,Ge){var Ke=Ge/(Ee.i-Ye.i);Ee.c-=Ke,Ee.s+=Ge,Ye.c+=Ke,Ee.z+=Ge,Ee.m+=Ge}function ze(Ye){for(var Ee=0,Ge=0,Ke=Ye.children,qe=Ke.length,At;--qe>=0;)At=Ke[qe],At.z+=Ee,At.m+=Ee,Ee+=At.s+(Ge+=At.c)}function Ie(Ye,Ee,Ge){return Ye.a.parent===Ee.parent?Ye.a:Ge}function Ve(Ye,Ee){this._=Ye,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ee}Ve.prototype=Object.create(S.prototype);function dt(Ye){for(var Ee=new Ve(Ye,0),Ge,Ke=[Ee],qe,At,mt,Mt;Ge=Ke.pop();)if(At=Ge._.children)for(Ge.children=new Array(Mt=At.length),mt=Mt-1;mt>=0;--mt)Ke.push(qe=Ge.children[mt]=new Ve(At[mt],mt)),qe.parent=Ge;return(Ee.parent=new Ve(null,0)).children=[Ee],Ee}function Ft(){var Ye=Ae,Ee=1,Ge=1,Ke=null;function qe(zt){var Ht=dt(zt);if(Ht.eachAfter(At),Ht.parent.m=-Ht.z,Ht.eachBefore(mt),Ke)zt.eachBefore(Gt);else{var Zt=zt,Wt=zt,sr=zt;zt.eachBefore(function(rr){rr.x<Zt.x&&(Zt=rr),rr.x>Wt.x&&(Wt=rr),rr.depth>sr.depth&&(sr=rr)});var Gr=Zt===Wt?1:Ye(Zt,Wt)/2,cn=Gr-Zt.x,qr=Ee/(Wt.x+Gr+cn),st=Ge/(sr.depth||1);zt.eachBefore(function(rr){rr.x=(rr.x+cn)*qr,rr.y=rr.depth*st})}return zt}function At(zt){var Ht=zt.children,Zt=zt.parent.children,Wt=zt.i?Zt[zt.i-1]:null;if(Ht){ze(zt);var sr=(Ht[0].z+Ht[Ht.length-1].z)/2;Wt?(zt.z=Wt.z+Ye(zt._,Wt._),zt.m=zt.z-sr):zt.z=sr}else Wt&&(zt.z=Wt.z+Ye(zt._,Wt._));zt.parent.A=Mt(zt,Wt,zt.parent.A||Zt[0])}function mt(zt){zt._.x=zt.z+zt.parent.m,zt.m+=zt.parent.m}function Mt(zt,Ht,Zt){if(Ht){for(var Wt=zt,sr=zt,Gr=Ht,cn=Wt.parent.children[0],qr=Wt.m,st=sr.m,rr=Gr.m,$t=cn.m,hr;Gr=Ze(Gr),Wt=Le(Wt),Gr&&Wt;)cn=Le(cn),sr=Ze(sr),sr.a=zt,hr=Gr.z+rr-Wt.z-qr+Ye(Gr._,Wt._),hr>0&&(We(Ie(Gr,zt,Zt),zt,hr),qr+=hr,st+=hr),rr+=Gr.m,qr+=Wt.m,$t+=cn.m,st+=sr.m;Gr&&!Ze(sr)&&(sr.t=Gr,sr.m+=rr-st),Wt&&!Le(cn)&&(cn.t=Wt,cn.m+=qr-$t,Zt=zt)}return Zt}function Gt(zt){zt.x*=Ee,zt.y=zt.depth*Ge}return qe.separation=function(zt){return arguments.length?(Ye=zt,qe):Ye},qe.size=function(zt){return arguments.length?(Ke=!1,Ee=+zt[0],Ge=+zt[1],qe):Ke?null:[Ee,Ge]},qe.nodeSize=function(zt){return arguments.length?(Ke=!0,Ee=+zt[0],Ge=+zt[1],qe):Ke?[Ee,Ge]:null},qe}function Qt(Ye,Ee,Ge,Ke,qe){for(var At=Ye.children,mt,Mt=-1,Gt=At.length,zt=Ye.value&&(qe-Ge)/Ye.value;++Mt<Gt;)mt=At[Mt],mt.x0=Ee,mt.x1=Ke,mt.y0=Ge,mt.y1=Ge+=mt.value*zt}var Ot=(1+Math.sqrt(5))/2;function Ct(Ye,Ee,Ge,Ke,qe,At){for(var mt=[],Mt=Ee.children,Gt,zt,Ht=0,Zt=0,Wt=Mt.length,sr,Gr,cn=Ee.value,qr,st,rr,$t,hr,Sr,tt;Ht<Wt;){sr=qe-Ge,Gr=At-Ke;do qr=Mt[Zt++].value;while(!qr&&Zt<Wt);for(st=rr=qr,Sr=Math.max(Gr/sr,sr/Gr)/(cn*Ye),tt=qr*qr*Sr,hr=Math.max(rr/tt,tt/st);Zt<Wt;++Zt){if(qr+=zt=Mt[Zt].value,zt<st&&(st=zt),zt>rr&&(rr=zt),tt=qr*qr*Sr,$t=Math.max(rr/tt,tt/st),$t>hr){qr-=zt;break}hr=$t}mt.push(Gt={value:qr,dice:sr<Gr,children:Mt.slice(Ht,Zt)}),Gt.dice?fe(Gt,Ge,Ke,qe,cn?Ke+=Gr*qr/cn:At):Qt(Gt,Ge,Ke,cn?Ge+=sr*qr/cn:qe,At),cn-=qr,Ht=Zt}return mt}var jt=function Ye(Ee){function Ge(Ke,qe,At,mt,Mt){Ct(Ee,Ke,qe,At,mt,Mt)}return Ge.ratio=function(Ke){return Ye((Ke=+Ke)>1?Ke:1)},Ge}(Ot);function Nt(){var Ye=jt,Ee=!1,Ge=1,Ke=1,qe=[0],At=re,mt=re,Mt=re,Gt=re,zt=re;function Ht(Wt){return Wt.x0=Wt.y0=0,Wt.x1=Ge,Wt.y1=Ke,Wt.eachBefore(Zt),qe=[0],Ee&&Wt.eachBefore(_e),Wt}function Zt(Wt){var sr=qe[Wt.depth],Gr=Wt.x0+sr,cn=Wt.y0+sr,qr=Wt.x1-sr,st=Wt.y1-sr;qr<Gr&&(Gr=qr=(Gr+qr)/2),st<cn&&(cn=st=(cn+st)/2),Wt.x0=Gr,Wt.y0=cn,Wt.x1=qr,Wt.y1=st,Wt.children&&(sr=qe[Wt.depth+1]=At(Wt)/2,Gr+=zt(Wt)-sr,cn+=mt(Wt)-sr,qr-=Mt(Wt)-sr,st-=Gt(Wt)-sr,qr<Gr&&(Gr=qr=(Gr+qr)/2),st<cn&&(cn=st=(cn+st)/2),Ye(Wt,Gr,cn,qr,st))}return Ht.round=function(Wt){return arguments.length?(Ee=!!Wt,Ht):Ee},Ht.size=function(Wt){return arguments.length?(Ge=+Wt[0],Ke=+Wt[1],Ht):[Ge,Ke]},Ht.tile=function(Wt){return arguments.length?(Ye=q(Wt),Ht):Ye},Ht.padding=function(Wt){return arguments.length?Ht.paddingInner(Wt).paddingOuter(Wt):Ht.paddingInner()},Ht.paddingInner=function(Wt){return arguments.length?(At=typeof Wt=="function"?Wt:Z(+Wt),Ht):At},Ht.paddingOuter=function(Wt){return arguments.length?Ht.paddingTop(Wt).paddingRight(Wt).paddingBottom(Wt).paddingLeft(Wt):Ht.paddingTop()},Ht.paddingTop=function(Wt){return arguments.length?(mt=typeof Wt=="function"?Wt:Z(+Wt),Ht):mt},Ht.paddingRight=function(Wt){return arguments.length?(Mt=typeof Wt=="function"?Wt:Z(+Wt),Ht):Mt},Ht.paddingBottom=function(Wt){return arguments.length?(Gt=typeof Wt=="function"?Wt:Z(+Wt),Ht):Gt},Ht.paddingLeft=function(Wt){return arguments.length?(zt=typeof Wt=="function"?Wt:Z(+Wt),Ht):zt},Ht}function Lt(Ye,Ee,Ge,Ke,qe){var At=Ye.children,mt,Mt=At.length,Gt,zt=new Array(Mt+1);for(zt[0]=Gt=mt=0;mt<Mt;++mt)zt[mt+1]=Gt+=At[mt].value;Ht(0,Mt,Ye.value,Ee,Ge,Ke,qe);function Ht(Zt,Wt,sr,Gr,cn,qr,st){if(Zt>=Wt-1){var rr=At[Zt];rr.x0=Gr,rr.y0=cn,rr.x1=qr,rr.y1=st;return}for(var $t=zt[Zt],hr=sr/2+$t,Sr=Zt+1,tt=Wt-1;Sr<tt;){var Qe=Sr+tt>>>1;zt[Qe]<hr?Sr=Qe+1:tt=Qe}hr-zt[Sr-1]<zt[Sr]-hr&&Zt+1<Sr&&--Sr;var lt=zt[Sr]-$t,ft=sr-lt;if(qr-Gr>st-cn){var Et=(Gr*ft+qr*lt)/sr;Ht(Zt,Sr,lt,Gr,cn,Et,st),Ht(Sr,Wt,ft,Et,cn,qr,st)}else{var Vt=(cn*ft+st*lt)/sr;Ht(Zt,Sr,lt,Gr,cn,qr,Vt),Ht(Sr,Wt,ft,Gr,Vt,qr,st)}}}function Xe(Ye,Ee,Ge,Ke,qe){(Ye.depth&1?Qt:fe)(Ye,Ee,Ge,Ke,qe)}var it=function Ye(Ee){function Ge(Ke,qe,At,mt,Mt){if((Gt=Ke._squarify)&&Gt.ratio===Ee)for(var Gt,zt,Ht,Zt,Wt=-1,sr,Gr=Gt.length,cn=Ke.value;++Wt<Gr;){for(zt=Gt[Wt],Ht=zt.children,Zt=zt.value=0,sr=Ht.length;Zt<sr;++Zt)zt.value+=Ht[Zt].value;zt.dice?fe(zt,qe,At,mt,At+=(Mt-At)*zt.value/cn):Qt(zt,qe,At,qe+=(mt-qe)*zt.value/cn,Mt),cn-=zt.value}else Ke._squarify=Gt=Ct(Ee,Ke,qe,At,mt,Mt),Gt.ratio=Ee}return Ge.ratio=function(Ke){return Ye((Ke=+Ke)>1?Ke:1)},Ge}(Ot);y.cluster=r,y.hierarchy=p,y.pack=ie,y.packEnclose=I,y.packSiblings=U,y.partition=ye,y.stratify=He,y.tree=Ft,y.treemap=Nt,y.treemapBinary=Lt,y.treemapDice=fe,y.treemapResquarify=it,y.treemapSlice=Qt,y.treemapSliceDice=Xe,y.treemapSquarify=jt,Object.defineProperty(y,"__esModule",{value:!0})})},{}],116:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V,t("d3-color")):(y=y||self,c(y.d3=y.d3||{},y.d3))})(this,function(y,c){function A(Ae,Le,Ze,We,ze){var Ie=Ae*Ae,Ve=Ie*Ae;return((1-3*Ae+3*Ie-Ve)*Le+(4-6*Ie+3*Ve)*Ze+(1+3*Ae+3*Ie-3*Ve)*We+Ve*ze)/6}function T(Ae){var Le=Ae.length-1;return function(Ze){var We=Ze<=0?Ze=0:Ze>=1?(Ze=1,Le-1):Math.floor(Ze*Le),ze=Ae[We],Ie=Ae[We+1],Ve=We>0?Ae[We-1]:2*ze-Ie,dt=We<Le-1?Ae[We+2]:2*Ie-ze;return A((Ze-We/Le)*Le,Ve,ze,Ie,dt)}}function e(Ae){var Le=Ae.length;return function(Ze){var We=Math.floor(((Ze%=1)<0?++Ze:Ze)*Le),ze=Ae[(We+Le-1)%Le],Ie=Ae[We%Le],Ve=Ae[(We+1)%Le],dt=Ae[(We+2)%Le];return A((Ze-We/Le)*Le,ze,Ie,Ve,dt)}}function a(Ae){return function(){return Ae}}function i(Ae,Le){return function(Ze){return Ae+Ze*Le}}function n(Ae,Le,Ze){return Ae=Math.pow(Ae,Ze),Le=Math.pow(Le,Ze)-Ae,Ze=1/Ze,function(We){return Math.pow(Ae+We*Le,Ze)}}function r(Ae,Le){var Ze=Le-Ae;return Ze?i(Ae,Ze>180||Ze<-180?Ze-360*Math.round(Ze/360):Ze):a(isNaN(Ae)?Le:Ae)}function v(Ae){return(Ae=+Ae)==1?s:function(Le,Ze){return Ze-Le?n(Le,Ze,Ae):a(isNaN(Le)?Ze:Le)}}function s(Ae,Le){var Ze=Le-Ae;return Ze?i(Ae,Ze):a(isNaN(Ae)?Le:Ae)}var o=function Ae(Le){var Ze=v(Le);function We(ze,Ie){var Ve=Ze((ze=c.rgb(ze)).r,(Ie=c.rgb(Ie)).r),dt=Ze(ze.g,Ie.g),Ft=Ze(ze.b,Ie.b),Qt=s(ze.opacity,Ie.opacity);return function(Ot){return ze.r=Ve(Ot),ze.g=dt(Ot),ze.b=Ft(Ot),ze.opacity=Qt(Ot),ze+""}}return We.gamma=Ae,We}(1);function b(Ae){return function(Le){var Ze=Le.length,We=new Array(Ze),ze=new Array(Ze),Ie=new Array(Ze),Ve,dt;for(Ve=0;Ve<Ze;++Ve)dt=c.rgb(Le[Ve]),We[Ve]=dt.r||0,ze[Ve]=dt.g||0,Ie[Ve]=dt.b||0;return We=Ae(We),ze=Ae(ze),Ie=Ae(Ie),dt.opacity=1,function(Ft){return dt.r=We(Ft),dt.g=ze(Ft),dt.b=Ie(Ft),dt+""}}}var g=b(T),d=b(e);function f(Ae,Le){Le||(Le=[]);var Ze=Ae?Math.min(Le.length,Ae.length):0,We=Le.slice(),ze;return function(Ie){for(ze=0;ze<Ze;++ze)We[ze]=Ae[ze]*(1-Ie)+Le[ze]*Ie;return We}}function m(Ae){return ArrayBuffer.isView(Ae)&&!(Ae instanceof DataView)}function l(Ae,Le){return(m(Le)?f:x)(Ae,Le)}function x(Ae,Le){var Ze=Le?Le.length:0,We=Ae?Math.min(Ze,Ae.length):0,ze=new Array(We),Ie=new Array(Ze),Ve;for(Ve=0;Ve<We;++Ve)ze[Ve]=S(Ae[Ve],Le[Ve]);for(;Ve<Ze;++Ve)Ie[Ve]=Le[Ve];return function(dt){for(Ve=0;Ve<We;++Ve)Ie[Ve]=ze[Ve](dt);return Ie}}function u(Ae,Le){var Ze=new Date;return Ae=+Ae,Le=+Le,function(We){return Ze.setTime(Ae*(1-We)+Le*We),Ze}}function M(Ae,Le){return Ae=+Ae,Le=+Le,function(Ze){return Ae*(1-Ze)+Le*Ze}}function w(Ae,Le){var Ze={},We={},ze;(Ae===null||typeof Ae!="object")&&(Ae={}),(Le===null||typeof Le!="object")&&(Le={});for(ze in Le)ze in Ae?Ze[ze]=S(Ae[ze],Le[ze]):We[ze]=Le[ze];return function(Ie){for(ze in Ze)We[ze]=Ze[ze](Ie);return We}}var p=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(p.source,"g");function h(Ae){return function(){return Ae}}function L(Ae){return function(Le){return Ae(Le)+""}}function E(Ae,Le){var Ze=p.lastIndex=_.lastIndex=0,We,ze,Ie,Ve=-1,dt=[],Ft=[];for(Ae=Ae+"",Le=Le+"";(We=p.exec(Ae))&&(ze=_.exec(Le));)(Ie=ze.index)>Ze&&(Ie=Le.slice(Ze,Ie),dt[Ve]?dt[Ve]+=Ie:dt[++Ve]=Ie),(We=We[0])===(ze=ze[0])?dt[Ve]?dt[Ve]+=ze:dt[++Ve]=ze:(dt[++Ve]=null,Ft.push({i:Ve,x:M(We,ze)})),Ze=_.lastIndex;return Ze<Le.length&&(Ie=Le.slice(Ze),dt[Ve]?dt[Ve]+=Ie:dt[++Ve]=Ie),dt.length<2?Ft[0]?L(Ft[0].x):h(Le):(Le=Ft.length,function(Qt){for(var Ot=0,Ct;Ot<Le;++Ot)dt[(Ct=Ft[Ot]).i]=Ct.x(Qt);return dt.join("")})}function S(Ae,Le){var Ze=typeof Le,We;return Le==null||Ze==="boolean"?a(Le):(Ze==="number"?M:Ze==="string"?(We=c.color(Le))?(Le=We,o):E:Le instanceof c.color?o:Le instanceof Date?u:m(Le)?f:Array.isArray(Le)?x:typeof Le.valueOf!="function"&&typeof Le.toString!="function"||isNaN(Le)?w:M)(Ae,Le)}function P(Ae){var Le=Ae.length;return function(Ze){return Ae[Math.max(0,Math.min(Le-1,Math.floor(Ze*Le)))]}}function F(Ae,Le){var Ze=r(+Ae,+Le);return function(We){var ze=Ze(We);return ze-360*Math.floor(ze/360)}}function I(Ae,Le){return Ae=+Ae,Le=+Le,function(Ze){return Math.round(Ae*(1-Ze)+Le*Ze)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O(Ae,Le,Ze,We,ze,Ie){var Ve,dt,Ft;return(Ve=Math.sqrt(Ae*Ae+Le*Le))&&(Ae/=Ve,Le/=Ve),(Ft=Ae*Ze+Le*We)&&(Ze-=Ae*Ft,We-=Le*Ft),(dt=Math.sqrt(Ze*Ze+We*We))&&(Ze/=dt,We/=dt,Ft/=dt),Ae*We<Le*Ze&&(Ae=-Ae,Le=-Le,Ft=-Ft,Ve=-Ve),{translateX:ze,translateY:Ie,rotate:Math.atan2(Le,Ae)*D,skewX:Math.atan(Ft)*D,scaleX:Ve,scaleY:dt}}var z,G,Y,ee;function j(Ae){return Ae==="none"?R:(z||(z=document.createElement("DIV"),G=document.documentElement,Y=document.defaultView),z.style.transform=Ae,Ae=Y.getComputedStyle(G.appendChild(z),null).getPropertyValue("transform"),G.removeChild(z),Ae=Ae.slice(7,-1).split(","),O(+Ae[0],+Ae[1],+Ae[2],+Ae[3],+Ae[4],+Ae[5]))}function X(Ae){return Ae==null||(ee||(ee=document.createElementNS("http://www.w3.org/2000/svg","g")),ee.setAttribute("transform",Ae),!(Ae=ee.transform.baseVal.consolidate()))?R:(Ae=Ae.matrix,O(Ae.a,Ae.b,Ae.c,Ae.d,Ae.e,Ae.f))}function ae(Ae,Le,Ze,We){function ze(Qt){return Qt.length?Qt.pop()+" ":""}function Ie(Qt,Ot,Ct,jt,Nt,Lt){if(Qt!==Ct||Ot!==jt){var Xe=Nt.push("translate(",null,Le,null,Ze);Lt.push({i:Xe-4,x:M(Qt,Ct)},{i:Xe-2,x:M(Ot,jt)})}else(Ct||jt)&&Nt.push("translate("+Ct+Le+jt+Ze)}function Ve(Qt,Ot,Ct,jt){Qt!==Ot?(Qt-Ot>180?Ot+=360:Ot-Qt>180&&(Qt+=360),jt.push({i:Ct.push(ze(Ct)+"rotate(",null,We)-2,x:M(Qt,Ot)})):Ot&&Ct.push(ze(Ct)+"rotate("+Ot+We)}function dt(Qt,Ot,Ct,jt){Qt!==Ot?jt.push({i:Ct.push(ze(Ct)+"skewX(",null,We)-2,x:M(Qt,Ot)}):Ot&&Ct.push(ze(Ct)+"skewX("+Ot+We)}function Ft(Qt,Ot,Ct,jt,Nt,Lt){if(Qt!==Ct||Ot!==jt){var Xe=Nt.push(ze(Nt)+"scale(",null,",",null,")");Lt.push({i:Xe-4,x:M(Qt,Ct)},{i:Xe-2,x:M(Ot,jt)})}else(Ct!==1||jt!==1)&&Nt.push(ze(Nt)+"scale("+Ct+","+jt+")")}return function(Qt,Ot){var Ct=[],jt=[];return Qt=Ae(Qt),Ot=Ae(Ot),Ie(Qt.translateX,Qt.translateY,Ot.translateX,Ot.translateY,Ct,jt),Ve(Qt.rotate,Ot.rotate,Ct,jt),dt(Qt.skewX,Ot.skewX,Ct,jt),Ft(Qt.scaleX,Qt.scaleY,Ot.scaleX,Ot.scaleY,Ct,jt),Qt=Ot=null,function(Nt){for(var Lt=-1,Xe=jt.length,it;++Lt<Xe;)Ct[(it=jt[Lt]).i]=it.x(Nt);return Ct.join("")}}}var he=ae(j,"px, ","px)","deg)"),K=ae(X,", ",")",")"),J=Math.SQRT2,U=2,H=4,q=1e-12;function re(Ae){return((Ae=Math.exp(Ae))+1/Ae)/2}function Z(Ae){return((Ae=Math.exp(Ae))-1/Ae)/2}function Q(Ae){return((Ae=Math.exp(2*Ae))-1)/(Ae+1)}function ie(Ae,Le){var Ze=Ae[0],We=Ae[1],ze=Ae[2],Ie=Le[0],Ve=Le[1],dt=Le[2],Ft=Ie-Ze,Qt=Ve-We,Ot=Ft*Ft+Qt*Qt,Ct,jt;if(Ot<q)jt=Math.log(dt/ze)/J,Ct=function(Ee){return[Ze+Ee*Ft,We+Ee*Qt,ze*Math.exp(J*Ee*jt)]};else{var Nt=Math.sqrt(Ot),Lt=(dt*dt-ze*ze+H*Ot)/(2*ze*U*Nt),Xe=(dt*dt-ze*ze-H*Ot)/(2*dt*U*Nt),it=Math.log(Math.sqrt(Lt*Lt+1)-Lt),Ye=Math.log(Math.sqrt(Xe*Xe+1)-Xe);jt=(Ye-it)/J,Ct=function(Ee){var Ge=Ee*jt,Ke=re(it),qe=ze/(U*Nt)*(Ke*Q(J*Ge+it)-Z(it));return[Ze+qe*Ft,We+qe*Qt,ze*Ke/re(J*Ge+it)]}}return Ct.duration=jt*1e3,Ct}function oe(Ae){return function(Le,Ze){var We=Ae((Le=c.hsl(Le)).h,(Ze=c.hsl(Ze)).h),ze=s(Le.s,Ze.s),Ie=s(Le.l,Ze.l),Ve=s(Le.opacity,Ze.opacity);return function(dt){return Le.h=We(dt),Le.s=ze(dt),Le.l=Ie(dt),Le.opacity=Ve(dt),Le+""}}}var ne=oe(r),le=oe(s);function _e(Ae,Le){var Ze=s((Ae=c.lab(Ae)).l,(Le=c.lab(Le)).l),We=s(Ae.a,Le.a),ze=s(Ae.b,Le.b),Ie=s(Ae.opacity,Le.opacity);return function(Ve){return Ae.l=Ze(Ve),Ae.a=We(Ve),Ae.b=ze(Ve),Ae.opacity=Ie(Ve),Ae+""}}function fe(Ae){return function(Le,Ze){var We=Ae((Le=c.hcl(Le)).h,(Ze=c.hcl(Ze)).h),ze=s(Le.c,Ze.c),Ie=s(Le.l,Ze.l),Ve=s(Le.opacity,Ze.opacity);return function(dt){return Le.h=We(dt),Le.c=ze(dt),Le.l=Ie(dt),Le.opacity=Ve(dt),Le+""}}}var ye=fe(r),xe=fe(s);function me(Ae){return function Le(Ze){Ze=+Ze;function We(ze,Ie){var Ve=Ae((ze=c.cubehelix(ze)).h,(Ie=c.cubehelix(Ie)).h),dt=s(ze.s,Ie.s),Ft=s(ze.l,Ie.l),Qt=s(ze.opacity,Ie.opacity);return function(Ot){return ze.h=Ve(Ot),ze.s=dt(Ot),ze.l=Ft(Math.pow(Ot,Ze)),ze.opacity=Qt(Ot),ze+""}}return We.gamma=Le,We}(1)}var be=me(r),ke=me(s);function De(Ae,Le){for(var Ze=0,We=Le.length-1,ze=Le[0],Ie=new Array(We<0?0:We);Ze<We;)Ie[Ze]=Ae(ze,ze=Le[++Ze]);return function(Ve){var dt=Math.max(0,Math.min(We-1,Math.floor(Ve*=We)));return Ie[dt](Ve-dt)}}function He(Ae,Le){for(var Ze=new Array(Le),We=0;We<Le;++We)Ze[We]=Ae(We/(Le-1));return Ze}y.interpolate=S,y.interpolateArray=l,y.interpolateBasis=T,y.interpolateBasisClosed=e,y.interpolateCubehelix=be,y.interpolateCubehelixLong=ke,y.interpolateDate=u,y.interpolateDiscrete=P,y.interpolateHcl=ye,y.interpolateHclLong=xe,y.interpolateHsl=ne,y.interpolateHslLong=le,y.interpolateHue=F,y.interpolateLab=_e,y.interpolateNumber=M,y.interpolateNumberArray=f,y.interpolateObject=w,y.interpolateRgb=o,y.interpolateRgbBasis=g,y.interpolateRgbBasisClosed=d,y.interpolateRound=I,y.interpolateString=E,y.interpolateTransformCss=he,y.interpolateTransformSvg=K,y.interpolateZoom=ie,y.piecewise=De,y.quantize=He,Object.defineProperty(y,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=y||self,c(y.d3=y.d3||{}))})(this,function(y){var c=Math.PI,A=2*c,T=1e-6,e=A-T;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new a}a.prototype=i.prototype={constructor:a,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,v,s){this._+="Q"+ +n+","+ +r+","+(this._x1=+v)+","+(this._y1=+s)},bezierCurveTo:function(n,r,v,s,o,b){this._+="C"+ +n+","+ +r+","+ +v+","+ +s+","+(this._x1=+o)+","+(this._y1=+b)},arcTo:function(n,r,v,s,o){n=+n,r=+r,v=+v,s=+s,o=+o;var b=this._x1,g=this._y1,d=v-n,f=s-r,m=b-n,l=g-r,x=m*m+l*l;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(x>T)if(!(Math.abs(l*d-f*m)>T)||!o)this._+="L"+(this._x1=n)+","+(this._y1=r);else{var u=v-b,M=s-g,w=d*d+f*f,p=u*u+M*M,_=Math.sqrt(w),h=Math.sqrt(x),L=o*Math.tan((c-Math.acos((w+x-p)/(2*_*h)))/2),E=L/h,S=L/_;Math.abs(E-1)>T&&(this._+="L"+(n+E*m)+","+(r+E*l)),this._+="A"+o+","+o+",0,0,"+ +(l*u>m*M)+","+(this._x1=n+S*d)+","+(this._y1=r+S*f)}},arc:function(n,r,v,s,o,b){n=+n,r=+r,v=+v,b=!!b;var g=v*Math.cos(s),d=v*Math.sin(s),f=n+g,m=r+d,l=1^b,x=b?s-o:o-s;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+f+","+m:(Math.abs(this._x1-f)>T||Math.abs(this._y1-m)>T)&&(this._+="L"+f+","+m),v&&(x<0&&(x=x%A+A),x>e?this._+="A"+v+","+v+",0,1,"+l+","+(n-g)+","+(r-d)+"A"+v+","+v+",0,1,"+l+","+(this._x1=f)+","+(this._y1=m):x>T&&(this._+="A"+v+","+v+",0,"+ +(x>=c)+","+l+","+(this._x1=n+v*Math.cos(o))+","+(this._y1=r+v*Math.sin(o))))},rect:function(n,r,v,s){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +v+"v"+ +s+"h"+-v+"Z"},toString:function(){return this._}},y.path=i,Object.defineProperty(y,"__esModule",{value:!0})})},{}],118:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=y||self,c(y.d3=y.d3||{}))})(this,function(y){function c(_){var h=+this._x.call(null,_),L=+this._y.call(null,_);return A(this.cover(h,L),h,L,_)}function A(_,h,L,E){if(isNaN(h)||isNaN(L))return _;var S,P=_._root,F={data:E},I=_._x0,D=_._y0,R=_._x1,O=_._y1,z,G,Y,ee,j,X,ae,he;if(!P)return _._root=F,_;for(;P.length;)if((j=h>=(z=(I+R)/2))?I=z:R=z,(X=L>=(G=(D+O)/2))?D=G:O=G,S=P,!(P=P[ae=X<<1|j]))return S[ae]=F,_;if(Y=+_._x.call(null,P.data),ee=+_._y.call(null,P.data),h===Y&&L===ee)return F.next=P,S?S[ae]=F:_._root=F,_;do S=S?S[ae]=new Array(4):_._root=new Array(4),(j=h>=(z=(I+R)/2))?I=z:R=z,(X=L>=(G=(D+O)/2))?D=G:O=G;while((ae=X<<1|j)===(he=(ee>=G)<<1|Y>=z));return S[he]=P,S[ae]=F,_}function T(_){var h,L,E=_.length,S,P,F=new Array(E),I=new Array(E),D=1/0,R=1/0,O=-1/0,z=-1/0;for(L=0;L<E;++L)isNaN(S=+this._x.call(null,h=_[L]))||isNaN(P=+this._y.call(null,h))||(F[L]=S,I[L]=P,S<D&&(D=S),S>O&&(O=S),P<R&&(R=P),P>z&&(z=P));if(D>O||R>z)return this;for(this.cover(D,R).cover(O,z),L=0;L<E;++L)A(this,F[L],I[L],_[L]);return this}function e(_,h){if(isNaN(_=+_)||isNaN(h=+h))return this;var L=this._x0,E=this._y0,S=this._x1,P=this._y1;if(isNaN(L))S=(L=Math.floor(_))+1,P=(E=Math.floor(h))+1;else{for(var F=S-L,I=this._root,D,R;L>_||_>=S||E>h||h>=P;)switch(R=(h<E)<<1|_<L,D=new Array(4),D[R]=I,I=D,F*=2,R){case 0:S=L+F,P=E+F;break;case 1:L=S-F,P=E+F;break;case 2:S=L+F,E=P-F;break;case 3:L=S-F,E=P-F;break}this._root&&this._root.length&&(this._root=I)}return this._x0=L,this._y0=E,this._x1=S,this._y1=P,this}function a(){var _=[];return this.visit(function(h){if(!h.length)do _.push(h.data);while(h=h.next)}),_}function i(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function n(_,h,L,E,S){this.node=_,this.x0=h,this.y0=L,this.x1=E,this.y1=S}function r(_,h,L){var E,S=this._x0,P=this._y0,F,I,D,R,O=this._x1,z=this._y1,G=[],Y=this._root,ee,j;for(Y&&G.push(new n(Y,S,P,O,z)),L==null?L=1/0:(S=_-L,P=h-L,O=_+L,z=h+L,L*=L);ee=G.pop();)if(!(!(Y=ee.node)||(F=ee.x0)>O||(I=ee.y0)>z||(D=ee.x1)<S||(R=ee.y1)<P))if(Y.length){var X=(F+D)/2,ae=(I+R)/2;G.push(new n(Y[3],X,ae,D,R),new n(Y[2],F,ae,X,R),new n(Y[1],X,I,D,ae),new n(Y[0],F,I,X,ae)),(j=(h>=ae)<<1|_>=X)&&(ee=G[G.length-1],G[G.length-1]=G[G.length-1-j],G[G.length-1-j]=ee)}else{var he=_-+this._x.call(null,Y.data),K=h-+this._y.call(null,Y.data),J=he*he+K*K;if(J<L){var U=Math.sqrt(L=J);S=_-U,P=h-U,O=_+U,z=h+U,E=Y.data}}return E}function v(_){if(isNaN(O=+this._x.call(null,_))||isNaN(z=+this._y.call(null,_)))return this;var h,L=this._root,E,S,P,F=this._x0,I=this._y0,D=this._x1,R=this._y1,O,z,G,Y,ee,j,X,ae;if(!L)return this;if(L.length)for(;;){if((ee=O>=(G=(F+D)/2))?F=G:D=G,(j=z>=(Y=(I+R)/2))?I=Y:R=Y,h=L,!(L=L[X=j<<1|ee]))return this;if(!L.length)break;(h[X+1&3]||h[X+2&3]||h[X+3&3])&&(E=h,ae=X)}for(;L.data!==_;)if(S=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,S?(P?S.next=P:delete S.next,this):h?(P?h[X]=P:delete h[X],(L=h[0]||h[1]||h[2]||h[3])&&L===(h[3]||h[2]||h[1]||h[0])&&!L.length&&(E?E[ae]=L:this._root=L),this):(this._root=P,this)}function s(_){for(var h=0,L=_.length;h<L;++h)this.remove(_[h]);return this}function o(){return this._root}function b(){var _=0;return this.visit(function(h){if(!h.length)do++_;while(h=h.next)}),_}function g(_){var h=[],L,E=this._root,S,P,F,I,D;for(E&&h.push(new n(E,this._x0,this._y0,this._x1,this._y1));L=h.pop();)if(!_(E=L.node,P=L.x0,F=L.y0,I=L.x1,D=L.y1)&&E.length){var R=(P+I)/2,O=(F+D)/2;(S=E[3])&&h.push(new n(S,R,O,I,D)),(S=E[2])&&h.push(new n(S,P,O,R,D)),(S=E[1])&&h.push(new n(S,R,F,I,O)),(S=E[0])&&h.push(new n(S,P,F,R,O))}return this}function d(_){var h=[],L=[],E;for(this._root&&h.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));E=h.pop();){var S=E.node;if(S.length){var P,F=E.x0,I=E.y0,D=E.x1,R=E.y1,O=(F+D)/2,z=(I+R)/2;(P=S[0])&&h.push(new n(P,F,I,O,z)),(P=S[1])&&h.push(new n(P,O,I,D,z)),(P=S[2])&&h.push(new n(P,F,z,O,R)),(P=S[3])&&h.push(new n(P,O,z,D,R))}L.push(E)}for(;E=L.pop();)_(E.node,E.x0,E.y0,E.x1,E.y1);return this}function f(_){return _[0]}function m(_){return arguments.length?(this._x=_,this):this._x}function l(_){return _[1]}function x(_){return arguments.length?(this._y=_,this):this._y}function u(_,h,L){var E=new M(h==null?f:h,L==null?l:L,NaN,NaN,NaN,NaN);return _==null?E:E.addAll(_)}function M(_,h,L,E,S,P){this._x=_,this._y=h,this._x0=L,this._y0=E,this._x1=S,this._y1=P,this._root=void 0}function w(_){for(var h={data:_.data},L=h;_=_.next;)L=L.next={data:_.data};return h}var p=u.prototype=M.prototype;p.copy=function(){var _=new M(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root,L,E;if(!h)return _;if(!h.length)return _._root=w(h),_;for(L=[{source:h,target:_._root=new Array(4)}];h=L.pop();)for(var S=0;S<4;++S)(E=h.source[S])&&(E.length?L.push({source:E,target:h.target[S]=new Array(4)}):h.target[S]=w(E));return _},p.add=c,p.addAll=T,p.cover=e,p.data=a,p.extent=i,p.find=r,p.remove=v,p.removeAll=s,p.root=o,p.size=b,p.visit=g,p.visitAfter=d,p.x=m,p.y=x,y.quadtree=u,Object.defineProperty(y,"__esModule",{value:!0})})},{}],119:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V,t("d3-path")):(y=y||self,c(y.d3=y.d3||{},y.d3))})(this,function(y,c){function A(at){return function(){return at}}var T=Math.abs,e=Math.atan2,a=Math.cos,i=Math.max,n=Math.min,r=Math.sin,v=Math.sqrt,s=1e-12,o=Math.PI,b=o/2,g=2*o;function d(at){return at>1?0:at<-1?o:Math.acos(at)}function f(at){return at>=1?b:at<=-1?-b:Math.asin(at)}function m(at){return at.innerRadius}function l(at){return at.outerRadius}function x(at){return at.startAngle}function u(at){return at.endAngle}function M(at){return at&&at.padAngle}function w(at,Rt,Kt,ur,Nr,Vr,Dr,Mr){var jr=Kt-at,kn=ur-Rt,yn=Dr-Nr,Wn=Mr-Vr,In=Wn*jr-yn*kn;if(!(In*In<s))return In=(yn*(Rt-Vr)-Wn*(at-Nr))/In,[at+In*jr,Rt+In*kn]}function p(at,Rt,Kt,ur,Nr,Vr,Dr){var Mr=at-Kt,jr=Rt-ur,kn=(Dr?Vr:-Vr)/v(Mr*Mr+jr*jr),yn=kn*jr,Wn=-kn*Mr,In=at+yn,$n=Rt+Wn,Kn=Kt+yn,ya=ur+Wn,Ra=(In+Kn)/2,_i=($n+ya)/2,Ka=Kn-In,ri=ya-$n,ei=Ka*Ka+ri*ri,kr=Nr-Vr,bn=In*ya-Kn*$n,dn=(ri<0?-1:1)*v(i(0,kr*kr*ei-bn*bn)),Ln=(bn*ri-Ka*dn)/ei,ra=(-bn*Ka-ri*dn)/ei,ma=(bn*ri+Ka*dn)/ei,sa=(-bn*Ka+ri*dn)/ei,Bn=Ln-Ra,Qn=ra-_i,Xa=ma-Ra,yi=sa-_i;return Bn*Bn+Qn*Qn>Xa*Xa+yi*yi&&(Ln=ma,ra=sa),{cx:Ln,cy:ra,x01:-yn,y01:-Wn,x11:Ln*(Nr/kr-1),y11:ra*(Nr/kr-1)}}function _(){var at=m,Rt=l,Kt=A(0),ur=null,Nr=x,Vr=u,Dr=M,Mr=null;function jr(){var kn,yn,Wn=+at.apply(this,arguments),In=+Rt.apply(this,arguments),$n=Nr.apply(this,arguments)-b,Kn=Vr.apply(this,arguments)-b,ya=T(Kn-$n),Ra=Kn>$n;if(Mr||(Mr=kn=c.path()),In<Wn&&(yn=In,In=Wn,Wn=yn),!(In>s))Mr.moveTo(0,0);else if(ya>g-s)Mr.moveTo(In*a($n),In*r($n)),Mr.arc(0,0,In,$n,Kn,!Ra),Wn>s&&(Mr.moveTo(Wn*a(Kn),Wn*r(Kn)),Mr.arc(0,0,Wn,Kn,$n,Ra));else{var _i=$n,Ka=Kn,ri=$n,ei=Kn,kr=ya,bn=ya,dn=Dr.apply(this,arguments)/2,Ln=dn>s&&(ur?+ur.apply(this,arguments):v(Wn*Wn+In*In)),ra=n(T(In-Wn)/2,+Kt.apply(this,arguments)),ma=ra,sa=ra,Bn,Qn;if(Ln>s){var Xa=f(Ln/Wn*r(dn)),yi=f(Ln/In*r(dn));(kr-=Xa*2)>s?(Xa*=Ra?1:-1,ri+=Xa,ei-=Xa):(kr=0,ri=ei=($n+Kn)/2),(bn-=yi*2)>s?(yi*=Ra?1:-1,_i+=yi,Ka-=yi):(bn=0,_i=Ka=($n+Kn)/2)}var Yt=In*a(_i),gr=In*r(_i),un=Wn*a(ei),mn=Wn*r(ei);if(ra>s){var sn=In*a(Ka),Cn=In*r(Ka),Tn=Wn*a(ri),gn=Wn*r(ri),_r;if(ya<o&&(_r=w(Yt,gr,Tn,gn,sn,Cn,un,mn))){var wr=Yt-_r[0],Br=gr-_r[1],An=sn-_r[0],Yn=Cn-_r[1],ua=1/r(d((wr*An+Br*Yn)/(v(wr*wr+Br*Br)*v(An*An+Yn*Yn)))/2),Sn=v(_r[0]*_r[0]+_r[1]*_r[1]);ma=n(ra,(Wn-Sn)/(ua-1)),sa=n(ra,(In-Sn)/(ua+1))}}bn>s?sa>s?(Bn=p(Tn,gn,Yt,gr,In,sa,Ra),Qn=p(sn,Cn,un,mn,In,sa,Ra),Mr.moveTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),sa<ra?Mr.arc(Bn.cx,Bn.cy,sa,e(Bn.y01,Bn.x01),e(Qn.y01,Qn.x01),!Ra):(Mr.arc(Bn.cx,Bn.cy,sa,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Ra),Mr.arc(0,0,In,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e(Qn.cy+Qn.y11,Qn.cx+Qn.x11),!Ra),Mr.arc(Qn.cx,Qn.cy,sa,e(Qn.y11,Qn.x11),e(Qn.y01,Qn.x01),!Ra))):(Mr.moveTo(Yt,gr),Mr.arc(0,0,In,_i,Ka,!Ra)):Mr.moveTo(Yt,gr),!(Wn>s)||!(kr>s)?Mr.lineTo(un,mn):ma>s?(Bn=p(un,mn,sn,Cn,Wn,-ma,Ra),Qn=p(Yt,gr,Tn,gn,Wn,-ma,Ra),Mr.lineTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),ma<ra?Mr.arc(Bn.cx,Bn.cy,ma,e(Bn.y01,Bn.x01),e(Qn.y01,Qn.x01),!Ra):(Mr.arc(Bn.cx,Bn.cy,ma,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Ra),Mr.arc(0,0,Wn,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e(Qn.cy+Qn.y11,Qn.cx+Qn.x11),Ra),Mr.arc(Qn.cx,Qn.cy,ma,e(Qn.y11,Qn.x11),e(Qn.y01,Qn.x01),!Ra))):Mr.arc(0,0,Wn,ei,ri,Ra)}if(Mr.closePath(),kn)return Mr=null,kn+""||null}return jr.centroid=function(){var kn=(+at.apply(this,arguments)+ +Rt.apply(this,arguments))/2,yn=(+Nr.apply(this,arguments)+ +Vr.apply(this,arguments))/2-o/2;return[a(yn)*kn,r(yn)*kn]},jr.innerRadius=function(kn){return arguments.length?(at=typeof kn=="function"?kn:A(+kn),jr):at},jr.outerRadius=function(kn){return arguments.length?(Rt=typeof kn=="function"?kn:A(+kn),jr):Rt},jr.cornerRadius=function(kn){return arguments.length?(Kt=typeof kn=="function"?kn:A(+kn),jr):Kt},jr.padRadius=function(kn){return arguments.length?(ur=kn==null?null:typeof kn=="function"?kn:A(+kn),jr):ur},jr.startAngle=function(kn){return arguments.length?(Nr=typeof kn=="function"?kn:A(+kn),jr):Nr},jr.endAngle=function(kn){return arguments.length?(Vr=typeof kn=="function"?kn:A(+kn),jr):Vr},jr.padAngle=function(kn){return arguments.length?(Dr=typeof kn=="function"?kn:A(+kn),jr):Dr},jr.context=function(kn){return arguments.length?(Mr=kn==null?null:kn,jr):Mr},jr}function h(at){this._context=at}h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;default:this._context.lineTo(at,Rt);break}}};function L(at){return new h(at)}function E(at){return at[0]}function S(at){return at[1]}function P(){var at=E,Rt=S,Kt=A(!0),ur=null,Nr=L,Vr=null;function Dr(Mr){var jr,kn=Mr.length,yn,Wn=!1,In;for(ur==null&&(Vr=Nr(In=c.path())),jr=0;jr<=kn;++jr)!(jr<kn&&Kt(yn=Mr[jr],jr,Mr))===Wn&&((Wn=!Wn)?Vr.lineStart():Vr.lineEnd()),Wn&&Vr.point(+at(yn,jr,Mr),+Rt(yn,jr,Mr));if(In)return Vr=null,In+""||null}return Dr.x=function(Mr){return arguments.length?(at=typeof Mr=="function"?Mr:A(+Mr),Dr):at},Dr.y=function(Mr){return arguments.length?(Rt=typeof Mr=="function"?Mr:A(+Mr),Dr):Rt},Dr.defined=function(Mr){return arguments.length?(Kt=typeof Mr=="function"?Mr:A(!!Mr),Dr):Kt},Dr.curve=function(Mr){return arguments.length?(Nr=Mr,ur!=null&&(Vr=Nr(ur)),Dr):Nr},Dr.context=function(Mr){return arguments.length?(Mr==null?ur=Vr=null:Vr=Nr(ur=Mr),Dr):ur},Dr}function F(){var at=E,Rt=null,Kt=A(0),ur=S,Nr=A(!0),Vr=null,Dr=L,Mr=null;function jr(yn){var Wn,In,$n,Kn=yn.length,ya,Ra=!1,_i,Ka=new Array(Kn),ri=new Array(Kn);for(Vr==null&&(Mr=Dr(_i=c.path())),Wn=0;Wn<=Kn;++Wn){if(!(Wn<Kn&&Nr(ya=yn[Wn],Wn,yn))===Ra)if(Ra=!Ra)In=Wn,Mr.areaStart(),Mr.lineStart();else{for(Mr.lineEnd(),Mr.lineStart(),$n=Wn-1;$n>=In;--$n)Mr.point(Ka[$n],ri[$n]);Mr.lineEnd(),Mr.areaEnd()}Ra&&(Ka[Wn]=+at(ya,Wn,yn),ri[Wn]=+Kt(ya,Wn,yn),Mr.point(Rt?+Rt(ya,Wn,yn):Ka[Wn],ur?+ur(ya,Wn,yn):ri[Wn]))}if(_i)return Mr=null,_i+""||null}function kn(){return P().defined(Nr).curve(Dr).context(Vr)}return jr.x=function(yn){return arguments.length?(at=typeof yn=="function"?yn:A(+yn),Rt=null,jr):at},jr.x0=function(yn){return arguments.length?(at=typeof yn=="function"?yn:A(+yn),jr):at},jr.x1=function(yn){return arguments.length?(Rt=yn==null?null:typeof yn=="function"?yn:A(+yn),jr):Rt},jr.y=function(yn){return arguments.length?(Kt=typeof yn=="function"?yn:A(+yn),ur=null,jr):Kt},jr.y0=function(yn){return arguments.length?(Kt=typeof yn=="function"?yn:A(+yn),jr):Kt},jr.y1=function(yn){return arguments.length?(ur=yn==null?null:typeof yn=="function"?yn:A(+yn),jr):ur},jr.lineX0=jr.lineY0=function(){return kn().x(at).y(Kt)},jr.lineY1=function(){return kn().x(at).y(ur)},jr.lineX1=function(){return kn().x(Rt).y(Kt)},jr.defined=function(yn){return arguments.length?(Nr=typeof yn=="function"?yn:A(!!yn),jr):Nr},jr.curve=function(yn){return arguments.length?(Dr=yn,Vr!=null&&(Mr=Dr(Vr)),jr):Dr},jr.context=function(yn){return arguments.length?(yn==null?Vr=Mr=null:Mr=Dr(Vr=yn),jr):Vr},jr}function I(at,Rt){return Rt<at?-1:Rt>at?1:Rt>=at?0:NaN}function D(at){return at}function R(){var at=D,Rt=I,Kt=null,ur=A(0),Nr=A(g),Vr=A(0);function Dr(Mr){var jr,kn=Mr.length,yn,Wn,In=0,$n=new Array(kn),Kn=new Array(kn),ya=+ur.apply(this,arguments),Ra=Math.min(g,Math.max(-g,Nr.apply(this,arguments)-ya)),_i,Ka=Math.min(Math.abs(Ra)/kn,Vr.apply(this,arguments)),ri=Ka*(Ra<0?-1:1),ei;for(jr=0;jr<kn;++jr)(ei=Kn[$n[jr]=jr]=+at(Mr[jr],jr,Mr))>0&&(In+=ei);for(Rt!=null?$n.sort(function(kr,bn){return Rt(Kn[kr],Kn[bn])}):Kt!=null&&$n.sort(function(kr,bn){return Kt(Mr[kr],Mr[bn])}),jr=0,Wn=In?(Ra-kn*ri)/In:0;jr<kn;++jr,ya=_i)yn=$n[jr],ei=Kn[yn],_i=ya+(ei>0?ei*Wn:0)+ri,Kn[yn]={data:Mr[yn],index:jr,value:ei,startAngle:ya,endAngle:_i,padAngle:Ka};return Kn}return Dr.value=function(Mr){return arguments.length?(at=typeof Mr=="function"?Mr:A(+Mr),Dr):at},Dr.sortValues=function(Mr){return arguments.length?(Rt=Mr,Kt=null,Dr):Rt},Dr.sort=function(Mr){return arguments.length?(Kt=Mr,Rt=null,Dr):Kt},Dr.startAngle=function(Mr){return arguments.length?(ur=typeof Mr=="function"?Mr:A(+Mr),Dr):ur},Dr.endAngle=function(Mr){return arguments.length?(Nr=typeof Mr=="function"?Mr:A(+Mr),Dr):Nr},Dr.padAngle=function(Mr){return arguments.length?(Vr=typeof Mr=="function"?Mr:A(+Mr),Dr):Vr},Dr}var O=G(L);function z(at){this._curve=at}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(at,Rt){this._curve.point(Rt*Math.sin(at),Rt*-Math.cos(at))}};function G(at){function Rt(Kt){return new z(at(Kt))}return Rt._curve=at,Rt}function Y(at){var Rt=at.curve;return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at.curve=function(Kt){return arguments.length?Rt(G(Kt)):Rt()._curve},at}function ee(){return Y(P().curve(O))}function j(){var at=F().curve(O),Rt=at.curve,Kt=at.lineX0,ur=at.lineX1,Nr=at.lineY0,Vr=at.lineY1;return at.angle=at.x,delete at.x,at.startAngle=at.x0,delete at.x0,at.endAngle=at.x1,delete at.x1,at.radius=at.y,delete at.y,at.innerRadius=at.y0,delete at.y0,at.outerRadius=at.y1,delete at.y1,at.lineStartAngle=function(){return Y(Kt())},delete at.lineX0,at.lineEndAngle=function(){return Y(ur())},delete at.lineX1,at.lineInnerRadius=function(){return Y(Nr())},delete at.lineY0,at.lineOuterRadius=function(){return Y(Vr())},delete at.lineY1,at.curve=function(Dr){return arguments.length?Rt(G(Dr)):Rt()._curve},at}function X(at,Rt){return[(Rt=+Rt)*Math.cos(at-=Math.PI/2),Rt*Math.sin(at)]}var ae=Array.prototype.slice;function he(at){return at.source}function K(at){return at.target}function J(at){var Rt=he,Kt=K,ur=E,Nr=S,Vr=null;function Dr(){var Mr,jr=ae.call(arguments),kn=Rt.apply(this,jr),yn=Kt.apply(this,jr);if(Vr||(Vr=Mr=c.path()),at(Vr,+ur.apply(this,(jr[0]=kn,jr)),+Nr.apply(this,jr),+ur.apply(this,(jr[0]=yn,jr)),+Nr.apply(this,jr)),Mr)return Vr=null,Mr+""||null}return Dr.source=function(Mr){return arguments.length?(Rt=Mr,Dr):Rt},Dr.target=function(Mr){return arguments.length?(Kt=Mr,Dr):Kt},Dr.x=function(Mr){return arguments.length?(ur=typeof Mr=="function"?Mr:A(+Mr),Dr):ur},Dr.y=function(Mr){return arguments.length?(Nr=typeof Mr=="function"?Mr:A(+Mr),Dr):Nr},Dr.context=function(Mr){return arguments.length?(Vr=Mr==null?null:Mr,Dr):Vr},Dr}function U(at,Rt,Kt,ur,Nr){at.moveTo(Rt,Kt),at.bezierCurveTo(Rt=(Rt+ur)/2,Kt,Rt,Nr,ur,Nr)}function H(at,Rt,Kt,ur,Nr){at.moveTo(Rt,Kt),at.bezierCurveTo(Rt,Kt=(Kt+Nr)/2,ur,Kt,ur,Nr)}function q(at,Rt,Kt,ur,Nr){var Vr=X(Rt,Kt),Dr=X(Rt,Kt=(Kt+Nr)/2),Mr=X(ur,Kt),jr=X(ur,Nr);at.moveTo(Vr[0],Vr[1]),at.bezierCurveTo(Dr[0],Dr[1],Mr[0],Mr[1],jr[0],jr[1])}function re(){return J(U)}function Z(){return J(H)}function Q(){var at=J(q);return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at}var ie={draw:function(at,Rt){var Kt=Math.sqrt(Rt/o);at.moveTo(Kt,0),at.arc(0,0,Kt,0,g)}},oe={draw:function(at,Rt){var Kt=Math.sqrt(Rt/5)/2;at.moveTo(-3*Kt,-Kt),at.lineTo(-Kt,-Kt),at.lineTo(-Kt,-3*Kt),at.lineTo(Kt,-3*Kt),at.lineTo(Kt,-Kt),at.lineTo(3*Kt,-Kt),at.lineTo(3*Kt,Kt),at.lineTo(Kt,Kt),at.lineTo(Kt,3*Kt),at.lineTo(-Kt,3*Kt),at.lineTo(-Kt,Kt),at.lineTo(-3*Kt,Kt),at.closePath()}},ne=Math.sqrt(1/3),le=ne*2,_e={draw:function(at,Rt){var Kt=Math.sqrt(Rt/le),ur=Kt*ne;at.moveTo(0,-Kt),at.lineTo(ur,0),at.lineTo(0,Kt),at.lineTo(-ur,0),at.closePath()}},fe=.8908130915292852,ye=Math.sin(o/10)/Math.sin(7*o/10),xe=Math.sin(g/10)*ye,me=-Math.cos(g/10)*ye,be={draw:function(at,Rt){var Kt=Math.sqrt(Rt*fe),ur=xe*Kt,Nr=me*Kt;at.moveTo(0,-Kt),at.lineTo(ur,Nr);for(var Vr=1;Vr<5;++Vr){var Dr=g*Vr/5,Mr=Math.cos(Dr),jr=Math.sin(Dr);at.lineTo(jr*Kt,-Mr*Kt),at.lineTo(Mr*ur-jr*Nr,jr*ur+Mr*Nr)}at.closePath()}},ke={draw:function(at,Rt){var Kt=Math.sqrt(Rt),ur=-Kt/2;at.rect(ur,ur,Kt,Kt)}},De=Math.sqrt(3),He={draw:function(at,Rt){var Kt=-Math.sqrt(Rt/(De*3));at.moveTo(0,Kt*2),at.lineTo(-De*Kt,-Kt),at.lineTo(De*Kt,-Kt),at.closePath()}},Ae=-.5,Le=Math.sqrt(3)/2,Ze=1/Math.sqrt(12),We=(Ze/2+1)*3,ze={draw:function(at,Rt){var Kt=Math.sqrt(Rt/We),ur=Kt/2,Nr=Kt*Ze,Vr=ur,Dr=Kt*Ze+Kt,Mr=-Vr,jr=Dr;at.moveTo(ur,Nr),at.lineTo(Vr,Dr),at.lineTo(Mr,jr),at.lineTo(Ae*ur-Le*Nr,Le*ur+Ae*Nr),at.lineTo(Ae*Vr-Le*Dr,Le*Vr+Ae*Dr),at.lineTo(Ae*Mr-Le*jr,Le*Mr+Ae*jr),at.lineTo(Ae*ur+Le*Nr,Ae*Nr-Le*ur),at.lineTo(Ae*Vr+Le*Dr,Ae*Dr-Le*Vr),at.lineTo(Ae*Mr+Le*jr,Ae*jr-Le*Mr),at.closePath()}},Ie=[ie,oe,_e,ke,be,He,ze];function Ve(){var at=A(ie),Rt=A(64),Kt=null;function ur(){var Nr;if(Kt||(Kt=Nr=c.path()),at.apply(this,arguments).draw(Kt,+Rt.apply(this,arguments)),Nr)return Kt=null,Nr+""||null}return ur.type=function(Nr){return arguments.length?(at=typeof Nr=="function"?Nr:A(Nr),ur):at},ur.size=function(Nr){return arguments.length?(Rt=typeof Nr=="function"?Nr:A(+Nr),ur):Rt},ur.context=function(Nr){return arguments.length?(Kt=Nr==null?null:Nr,ur):Kt},ur}function dt(){}function Ft(at,Rt,Kt){at._context.bezierCurveTo((2*at._x0+at._x1)/3,(2*at._y0+at._y1)/3,(at._x0+2*at._x1)/3,(at._y0+2*at._y1)/3,(at._x0+4*at._x1+Rt)/6,(at._y0+4*at._y1+Kt)/6)}function Qt(at){this._context=at}Qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ft(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ft(this,at,Rt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Rt}};function Ot(at){return new Qt(at)}function Ct(at){this._context=at}Ct.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._x2=at,this._y2=Rt;break;case 1:this._point=2,this._x3=at,this._y3=Rt;break;case 2:this._point=3,this._x4=at,this._y4=Rt,this._context.moveTo((this._x0+4*this._x1+at)/6,(this._y0+4*this._y1+Rt)/6);break;default:Ft(this,at,Rt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Rt}};function jt(at){return new Ct(at)}function Nt(at){this._context=at}Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Kt=(this._x0+4*this._x1+at)/6,ur=(this._y0+4*this._y1+Rt)/6;this._line?this._context.lineTo(Kt,ur):this._context.moveTo(Kt,ur);break;case 3:this._point=4;default:Ft(this,at,Rt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Rt}};function Lt(at){return new Nt(at)}function Xe(at,Rt){this._basis=new Qt(at),this._beta=Rt}Xe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var at=this._x,Rt=this._y,Kt=at.length-1;if(Kt>0)for(var ur=at[0],Nr=Rt[0],Vr=at[Kt]-ur,Dr=Rt[Kt]-Nr,Mr=-1,jr;++Mr<=Kt;)jr=Mr/Kt,this._basis.point(this._beta*at[Mr]+(1-this._beta)*(ur+jr*Vr),this._beta*Rt[Mr]+(1-this._beta)*(Nr+jr*Dr));this._x=this._y=null,this._basis.lineEnd()},point:function(at,Rt){this._x.push(+at),this._y.push(+Rt)}};var it=function at(Rt){function Kt(ur){return Rt===1?new Qt(ur):new Xe(ur,Rt)}return Kt.beta=function(ur){return at(+ur)},Kt}(.85);function Ye(at,Rt,Kt){at._context.bezierCurveTo(at._x1+at._k*(at._x2-at._x0),at._y1+at._k*(at._y2-at._y0),at._x2+at._k*(at._x1-Rt),at._y2+at._k*(at._y1-Kt),at._x2,at._y2)}function Ee(at,Rt){this._context=at,this._k=(1-Rt)/6}Ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ye(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2,this._x1=at,this._y1=Rt;break;case 2:this._point=3;default:Ye(this,at,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var Ge=function at(Rt){function Kt(ur){return new Ee(ur,Rt)}return Kt.tension=function(ur){return at(+ur)},Kt}(0);function Ke(at,Rt){this._context=at,this._k=(1-Rt)/6}Ke.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._x3=at,this._y3=Rt;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Rt);break;case 2:this._point=3,this._x5=at,this._y5=Rt;break;default:Ye(this,at,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var qe=function at(Rt){function Kt(ur){return new Ke(ur,Rt)}return Kt.tension=function(ur){return at(+ur)},Kt}(0);function At(at,Rt){this._context=at,this._k=(1-Rt)/6}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,at,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var mt=function at(Rt){function Kt(ur){return new At(ur,Rt)}return Kt.tension=function(ur){return at(+ur)},Kt}(0);function Mt(at,Rt,Kt){var ur=at._x1,Nr=at._y1,Vr=at._x2,Dr=at._y2;if(at._l01_a>s){var Mr=2*at._l01_2a+3*at._l01_a*at._l12_a+at._l12_2a,jr=3*at._l01_a*(at._l01_a+at._l12_a);ur=(ur*Mr-at._x0*at._l12_2a+at._x2*at._l01_2a)/jr,Nr=(Nr*Mr-at._y0*at._l12_2a+at._y2*at._l01_2a)/jr}if(at._l23_a>s){var kn=2*at._l23_2a+3*at._l23_a*at._l12_a+at._l12_2a,yn=3*at._l23_a*(at._l23_a+at._l12_a);Vr=(Vr*kn+at._x1*at._l23_2a-Rt*at._l12_2a)/yn,Dr=(Dr*kn+at._y1*at._l23_2a-Kt*at._l12_2a)/yn}at._context.bezierCurveTo(ur,Nr,Vr,Dr,at._x2,at._y2)}function Gt(at,Rt){this._context=at,this._alpha=Rt}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){if(at=+at,Rt=+Rt,this._point){var Kt=this._x2-at,ur=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Kt*Kt+ur*ur,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;break;case 2:this._point=3;default:Mt(this,at,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var zt=function at(Rt){function Kt(ur){return Rt?new Gt(ur,Rt):new Ee(ur,0)}return Kt.alpha=function(ur){return at(+ur)},Kt}(.5);function Ht(at,Rt){this._context=at,this._alpha=Rt}Ht.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Rt){if(at=+at,Rt=+Rt,this._point){var Kt=this._x2-at,ur=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Kt*Kt+ur*ur,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=Rt;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Rt);break;case 2:this._point=3,this._x5=at,this._y5=Rt;break;default:Mt(this,at,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var Zt=function at(Rt){function Kt(ur){return Rt?new Ht(ur,Rt):new Ke(ur,0)}return Kt.alpha=function(ur){return at(+ur)},Kt}(.5);function Wt(at,Rt){this._context=at,this._alpha=Rt}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){if(at=+at,Rt=+Rt,this._point){var Kt=this._x2-at,ur=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Kt*Kt+ur*ur,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mt(this,at,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var sr=function at(Rt){function Kt(ur){return Rt?new Wt(ur,Rt):new At(ur,0)}return Kt.alpha=function(ur){return at(+ur)},Kt}(.5);function Gr(at){this._context=at}Gr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(at,Rt){at=+at,Rt=+Rt,this._point?this._context.lineTo(at,Rt):(this._point=1,this._context.moveTo(at,Rt))}};function cn(at){return new Gr(at)}function qr(at){return at<0?-1:1}function st(at,Rt,Kt){var ur=at._x1-at._x0,Nr=Rt-at._x1,Vr=(at._y1-at._y0)/(ur||Nr<0&&-0),Dr=(Kt-at._y1)/(Nr||ur<0&&-0),Mr=(Vr*Nr+Dr*ur)/(ur+Nr);return(qr(Vr)+qr(Dr))*Math.min(Math.abs(Vr),Math.abs(Dr),.5*Math.abs(Mr))||0}function rr(at,Rt){var Kt=at._x1-at._x0;return Kt?(3*(at._y1-at._y0)/Kt-Rt)/2:Rt}function $t(at,Rt,Kt){var ur=at._x0,Nr=at._y0,Vr=at._x1,Dr=at._y1,Mr=(Vr-ur)/3;at._context.bezierCurveTo(ur+Mr,Nr+Mr*Rt,Vr-Mr,Dr-Mr*Kt,Vr,Dr)}function hr(at){this._context=at}hr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$t(this,this._t0,rr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){var Kt=NaN;if(at=+at,Rt=+Rt,!(at===this._x1&&Rt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;break;case 2:this._point=3,$t(this,rr(this,Kt=st(this,at,Rt)),Kt);break;default:$t(this,this._t0,Kt=st(this,at,Rt));break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Rt,this._t0=Kt}}};function Sr(at){this._context=new tt(at)}(Sr.prototype=Object.create(hr.prototype)).point=function(at,Rt){hr.prototype.point.call(this,Rt,at)};function tt(at){this._context=at}tt.prototype={moveTo:function(at,Rt){this._context.moveTo(Rt,at)},closePath:function(){this._context.closePath()},lineTo:function(at,Rt){this._context.lineTo(Rt,at)},bezierCurveTo:function(at,Rt,Kt,ur,Nr,Vr){this._context.bezierCurveTo(Rt,at,ur,Kt,Vr,Nr)}};function Qe(at){return new hr(at)}function lt(at){return new Sr(at)}function ft(at){this._context=at}ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var at=this._x,Rt=this._y,Kt=at.length;if(Kt)if(this._line?this._context.lineTo(at[0],Rt[0]):this._context.moveTo(at[0],Rt[0]),Kt===2)this._context.lineTo(at[1],Rt[1]);else for(var ur=Et(at),Nr=Et(Rt),Vr=0,Dr=1;Dr<Kt;++Vr,++Dr)this._context.bezierCurveTo(ur[0][Vr],Nr[0][Vr],ur[1][Vr],Nr[1][Vr],at[Dr],Rt[Dr]);(this._line||this._line!==0&&Kt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(at,Rt){this._x.push(+at),this._y.push(+Rt)}};function Et(at){var Rt,Kt=at.length-1,ur,Nr=new Array(Kt),Vr=new Array(Kt),Dr=new Array(Kt);for(Nr[0]=0,Vr[0]=2,Dr[0]=at[0]+2*at[1],Rt=1;Rt<Kt-1;++Rt)Nr[Rt]=1,Vr[Rt]=4,Dr[Rt]=4*at[Rt]+2*at[Rt+1];for(Nr[Kt-1]=2,Vr[Kt-1]=7,Dr[Kt-1]=8*at[Kt-1]+at[Kt],Rt=1;Rt<Kt;++Rt)ur=Nr[Rt]/Vr[Rt-1],Vr[Rt]-=ur,Dr[Rt]-=ur*Dr[Rt-1];for(Nr[Kt-1]=Dr[Kt-1]/Vr[Kt-1],Rt=Kt-2;Rt>=0;--Rt)Nr[Rt]=(Dr[Rt]-Nr[Rt+1])/Vr[Rt];for(Vr[Kt-1]=(at[Kt]+Nr[Kt-1])/2,Rt=0;Rt<Kt-1;++Rt)Vr[Rt]=2*at[Rt+1]-Nr[Rt+1];return[Nr,Vr]}function Vt(at){return new ft(at)}function Pe(at,Rt){this._context=at,this._t=Rt}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Rt),this._context.lineTo(at,Rt);else{var Kt=this._x*(1-this._t)+at*this._t;this._context.lineTo(Kt,this._y),this._context.lineTo(Kt,Rt)}break}}this._x=at,this._y=Rt}};function Se(at){return new Pe(at,.5)}function ot(at){return new Pe(at,0)}function ct(at){return new Pe(at,1)}function pt(at,Rt){if((Dr=at.length)>1)for(var Kt=1,ur,Nr,Vr=at[Rt[0]],Dr,Mr=Vr.length;Kt<Dr;++Kt)for(Nr=Vr,Vr=at[Rt[Kt]],ur=0;ur<Mr;++ur)Vr[ur][1]+=Vr[ur][0]=isNaN(Nr[ur][1])?Nr[ur][0]:Nr[ur][1]}function St(at){for(var Rt=at.length,Kt=new Array(Rt);--Rt>=0;)Kt[Rt]=Rt;return Kt}function xt(at,Rt){return at[Rt]}function Pt(){var at=A([]),Rt=St,Kt=pt,ur=xt;function Nr(Vr){var Dr=at.apply(this,arguments),Mr,jr=Vr.length,kn=Dr.length,yn=new Array(kn),Wn;for(Mr=0;Mr<kn;++Mr){for(var In=Dr[Mr],$n=yn[Mr]=new Array(jr),Kn=0,ya;Kn<jr;++Kn)$n[Kn]=ya=[0,+ur(Vr[Kn],In,Kn,Vr)],ya.data=Vr[Kn];$n.key=In}for(Mr=0,Wn=Rt(yn);Mr<kn;++Mr)yn[Wn[Mr]].index=Mr;return Kt(yn,Wn),yn}return Nr.keys=function(Vr){return arguments.length?(at=typeof Vr=="function"?Vr:A(ae.call(Vr)),Nr):at},Nr.value=function(Vr){return arguments.length?(ur=typeof Vr=="function"?Vr:A(+Vr),Nr):ur},Nr.order=function(Vr){return arguments.length?(Rt=Vr==null?St:typeof Vr=="function"?Vr:A(ae.call(Vr)),Nr):Rt},Nr.offset=function(Vr){return arguments.length?(Kt=Vr==null?pt:Vr,Nr):Kt},Nr}function Xt(at,Rt){if((ur=at.length)>0){for(var Kt,ur,Nr=0,Vr=at[0].length,Dr;Nr<Vr;++Nr){for(Dr=Kt=0;Kt<ur;++Kt)Dr+=at[Kt][Nr][1]||0;if(Dr)for(Kt=0;Kt<ur;++Kt)at[Kt][Nr][1]/=Dr}pt(at,Rt)}}function or(at,Rt){if((jr=at.length)>0)for(var Kt,ur=0,Nr,Vr,Dr,Mr,jr,kn=at[Rt[0]].length;ur<kn;++ur)for(Dr=Mr=0,Kt=0;Kt<jr;++Kt)(Vr=(Nr=at[Rt[Kt]][ur])[1]-Nr[0])>0?(Nr[0]=Dr,Nr[1]=Dr+=Vr):Vr<0?(Nr[1]=Mr,Nr[0]=Mr+=Vr):(Nr[0]=0,Nr[1]=Vr)}function Pr(at,Rt){if((Nr=at.length)>0){for(var Kt=0,ur=at[Rt[0]],Nr,Vr=ur.length;Kt<Vr;++Kt){for(var Dr=0,Mr=0;Dr<Nr;++Dr)Mr+=at[Dr][Kt][1]||0;ur[Kt][1]+=ur[Kt][0]=-Mr/2}pt(at,Rt)}}function Ar(at,Rt){if(!(!((Dr=at.length)>0)||!((Vr=(Nr=at[Rt[0]]).length)>0))){for(var Kt=0,ur=1,Nr,Vr,Dr;ur<Vr;++ur){for(var Mr=0,jr=0,kn=0;Mr<Dr;++Mr){for(var yn=at[Rt[Mr]],Wn=yn[ur][1]||0,In=yn[ur-1][1]||0,$n=(Wn-In)/2,Kn=0;Kn<Mr;++Kn){var ya=at[Rt[Kn]],Ra=ya[ur][1]||0,_i=ya[ur-1][1]||0;$n+=Ra-_i}jr+=Wn,kn+=$n*Wn}Nr[ur-1][1]+=Nr[ur-1][0]=Kt,jr&&(Kt-=kn/jr)}Nr[ur-1][1]+=Nr[ur-1][0]=Kt,pt(at,Rt)}}function Er(at){var Rt=at.map(Jr);return St(at).sort(function(Kt,ur){return Rt[Kt]-Rt[ur]})}function Jr(at){for(var Rt=-1,Kt=0,ur=at.length,Nr,Vr=-1/0;++Rt<ur;)(Nr=+at[Rt][1])>Vr&&(Vr=Nr,Kt=Rt);return Kt}function lr(at){var Rt=at.map(br);return St(at).sort(function(Kt,ur){return Rt[Kt]-Rt[ur]})}function br(at){for(var Rt=0,Kt=-1,ur=at.length,Nr;++Kt<ur;)(Nr=+at[Kt][1])&&(Rt+=Nr);return Rt}function Fr(at){return lr(at).reverse()}function Hr(at){var Rt=at.length,Kt,ur,Nr=at.map(br),Vr=Er(at),Dr=0,Mr=0,jr=[],kn=[];for(Kt=0;Kt<Rt;++Kt)ur=Vr[Kt],Dr<Mr?(Dr+=Nr[ur],jr.push(ur)):(Mr+=Nr[ur],kn.push(ur));return kn.reverse().concat(jr)}function Lr(at){return St(at).reverse()}y.arc=_,y.area=F,y.areaRadial=j,y.curveBasis=Ot,y.curveBasisClosed=jt,y.curveBasisOpen=Lt,y.curveBundle=it,y.curveCardinal=Ge,y.curveCardinalClosed=qe,y.curveCardinalOpen=mt,y.curveCatmullRom=zt,y.curveCatmullRomClosed=Zt,y.curveCatmullRomOpen=sr,y.curveLinear=L,y.curveLinearClosed=cn,y.curveMonotoneX=Qe,y.curveMonotoneY=lt,y.curveNatural=Vt,y.curveStep=Se,y.curveStepAfter=ct,y.curveStepBefore=ot,y.line=P,y.lineRadial=ee,y.linkHorizontal=re,y.linkRadial=Q,y.linkVertical=Z,y.pie=R,y.pointRadial=X,y.radialArea=j,y.radialLine=ee,y.stack=Pt,y.stackOffsetDiverging=or,y.stackOffsetExpand=Xt,y.stackOffsetNone=pt,y.stackOffsetSilhouette=Pr,y.stackOffsetWiggle=Ar,y.stackOrderAppearance=Er,y.stackOrderAscending=lr,y.stackOrderDescending=Fr,y.stackOrderInsideOut=Hr,y.stackOrderNone=St,y.stackOrderReverse=Lr,y.symbol=Ve,y.symbolCircle=ie,y.symbolCross=oe,y.symbolDiamond=_e,y.symbolSquare=ke,y.symbolStar=be,y.symbolTriangle=He,y.symbolWye=ze,y.symbols=Ie,Object.defineProperty(y,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V,t("d3-time")):(y=y||self,c(y.d3=y.d3||{},y.d3))})(this,function(y,c){function A(Xe){if(0<=Xe.y&&Xe.y<100){var it=new Date(-1,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L);return it.setFullYear(Xe.y),it}return new Date(Xe.y,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L)}function T(Xe){if(0<=Xe.y&&Xe.y<100){var it=new Date(Date.UTC(-1,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L));return it.setUTCFullYear(Xe.y),it}return new Date(Date.UTC(Xe.y,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L))}function e(Xe,it,Ye){return{y:Xe,m:it,d:Ye,H:0,M:0,S:0,L:0}}function a(Xe){var it=Xe.dateTime,Ye=Xe.date,Ee=Xe.time,Ge=Xe.periods,Ke=Xe.days,qe=Xe.shortDays,At=Xe.months,mt=Xe.shortMonths,Mt=b(Ge),Gt=g(Ge),zt=b(Ke),Ht=g(Ke),Zt=b(qe),Wt=g(qe),sr=b(At),Gr=g(At),cn=b(mt),qr=g(mt),st={a:ct,A:pt,b:St,B:xt,c:null,d:z,e:z,f:X,H:G,I:Y,j:ee,L:j,m:ae,M:he,p:Pt,q:Xt,Q:Ve,s:dt,S:K,u:J,U,V:H,w:q,W:re,x:null,X:null,y:Z,Y:Q,Z:ie,"%":Ie},rr={a:or,A:Pr,b:Ar,B:Er,c:null,d:oe,e:oe,f:ye,H:ne,I:le,j:_e,L:fe,m:xe,M:me,p:Jr,q:lr,Q:Ve,s:dt,S:be,u:ke,U:De,V:He,w:Ae,W:Le,x:null,X:null,y:Ze,Y:We,Z:ze,"%":Ie},$t={a:lt,A:ft,b:Et,B:Vt,c:Pe,d:h,e:h,f:I,H:E,I:E,j:L,L:F,m:_,M:S,p:Qe,q:p,Q:R,s:O,S:P,u:f,U:m,V:l,w:d,W:x,x:Se,X:ot,y:M,Y:u,Z:w,"%":D};st.x=hr(Ye,st),st.X=hr(Ee,st),st.c=hr(it,st),rr.x=hr(Ye,rr),rr.X=hr(Ee,rr),rr.c=hr(it,rr);function hr(br,Fr){return function(Hr){var Lr=[],at=-1,Rt=0,Kt=br.length,ur,Nr,Vr;for(Hr instanceof Date||(Hr=new Date(+Hr));++at<Kt;)br.charCodeAt(at)===37&&(Lr.push(br.slice(Rt,at)),(Nr=i[ur=br.charAt(++at)])!=null?ur=br.charAt(++at):Nr=ur==="e"?" ":"0",(Vr=Fr[ur])&&(ur=Vr(Hr,Nr)),Lr.push(ur),Rt=at+1);return Lr.push(br.slice(Rt,at)),Lr.join("")}}function Sr(br,Fr){return function(Hr){var Lr=e(1900,void 0,1),at=tt(Lr,br,Hr+="",0),Rt,Kt;if(at!=Hr.length)return null;if("Q"in Lr)return new Date(Lr.Q);if("s"in Lr)return new Date(Lr.s*1e3+("L"in Lr?Lr.L:0));if(Fr&&!("Z"in Lr)&&(Lr.Z=0),"p"in Lr&&(Lr.H=Lr.H%12+Lr.p*12),Lr.m===void 0&&(Lr.m="q"in Lr?Lr.q:0),"V"in Lr){if(Lr.V<1||Lr.V>53)return null;"w"in Lr||(Lr.w=1),"Z"in Lr?(Rt=T(e(Lr.y,0,1)),Kt=Rt.getUTCDay(),Rt=Kt>4||Kt===0?c.utcMonday.ceil(Rt):c.utcMonday(Rt),Rt=c.utcDay.offset(Rt,(Lr.V-1)*7),Lr.y=Rt.getUTCFullYear(),Lr.m=Rt.getUTCMonth(),Lr.d=Rt.getUTCDate()+(Lr.w+6)%7):(Rt=A(e(Lr.y,0,1)),Kt=Rt.getDay(),Rt=Kt>4||Kt===0?c.timeMonday.ceil(Rt):c.timeMonday(Rt),Rt=c.timeDay.offset(Rt,(Lr.V-1)*7),Lr.y=Rt.getFullYear(),Lr.m=Rt.getMonth(),Lr.d=Rt.getDate()+(Lr.w+6)%7)}else("W"in Lr||"U"in Lr)&&("w"in Lr||(Lr.w="u"in Lr?Lr.u%7:"W"in Lr?1:0),Kt="Z"in Lr?T(e(Lr.y,0,1)).getUTCDay():A(e(Lr.y,0,1)).getDay(),Lr.m=0,Lr.d="W"in Lr?(Lr.w+6)%7+Lr.W*7-(Kt+5)%7:Lr.w+Lr.U*7-(Kt+6)%7);return"Z"in Lr?(Lr.H+=Lr.Z/100|0,Lr.M+=Lr.Z%100,T(Lr)):A(Lr)}}function tt(br,Fr,Hr,Lr){for(var at=0,Rt=Fr.length,Kt=Hr.length,ur,Nr;at<Rt;){if(Lr>=Kt)return-1;if(ur=Fr.charCodeAt(at++),ur===37){if(ur=Fr.charAt(at++),Nr=$t[ur in i?Fr.charAt(at++):ur],!Nr||(Lr=Nr(br,Hr,Lr))<0)return-1}else if(ur!=Hr.charCodeAt(Lr++))return-1}return Lr}function Qe(br,Fr,Hr){var Lr=Mt.exec(Fr.slice(Hr));return Lr?(br.p=Gt[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function lt(br,Fr,Hr){var Lr=Zt.exec(Fr.slice(Hr));return Lr?(br.w=Wt[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function ft(br,Fr,Hr){var Lr=zt.exec(Fr.slice(Hr));return Lr?(br.w=Ht[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Et(br,Fr,Hr){var Lr=cn.exec(Fr.slice(Hr));return Lr?(br.m=qr[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Vt(br,Fr,Hr){var Lr=sr.exec(Fr.slice(Hr));return Lr?(br.m=Gr[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Pe(br,Fr,Hr){return tt(br,it,Fr,Hr)}function Se(br,Fr,Hr){return tt(br,Ye,Fr,Hr)}function ot(br,Fr,Hr){return tt(br,Ee,Fr,Hr)}function ct(br){return qe[br.getDay()]}function pt(br){return Ke[br.getDay()]}function St(br){return mt[br.getMonth()]}function xt(br){return At[br.getMonth()]}function Pt(br){return Ge[+(br.getHours()>=12)]}function Xt(br){return 1+~~(br.getMonth()/3)}function or(br){return qe[br.getUTCDay()]}function Pr(br){return Ke[br.getUTCDay()]}function Ar(br){return mt[br.getUTCMonth()]}function Er(br){return At[br.getUTCMonth()]}function Jr(br){return Ge[+(br.getUTCHours()>=12)]}function lr(br){return 1+~~(br.getUTCMonth()/3)}return{format:function(br){var Fr=hr(br+="",st);return Fr.toString=function(){return br},Fr},parse:function(br){var Fr=Sr(br+="",!1);return Fr.toString=function(){return br},Fr},utcFormat:function(br){var Fr=hr(br+="",rr);return Fr.toString=function(){return br},Fr},utcParse:function(br){var Fr=Sr(br+="",!0);return Fr.toString=function(){return br},Fr}}}var i={"-":"",_:" ",0:"0"},n=/^\s*\d+/,r=/^%/,v=/[\\^$*+?|[\]().{}]/g;function s(Xe,it,Ye){var Ee=Xe<0?"-":"",Ge=(Ee?-Xe:Xe)+"",Ke=Ge.length;return Ee+(Ke<Ye?new Array(Ye-Ke+1).join(it)+Ge:Ge)}function o(Xe){return Xe.replace(v,"\\$&")}function b(Xe){return new RegExp("^(?:"+Xe.map(o).join("|")+")","i")}function g(Xe){for(var it={},Ye=-1,Ee=Xe.length;++Ye<Ee;)it[Xe[Ye].toLowerCase()]=Ye;return it}function d(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+1));return Ee?(Xe.w=+Ee[0],Ye+Ee[0].length):-1}function f(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+1));return Ee?(Xe.u=+Ee[0],Ye+Ee[0].length):-1}function m(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.U=+Ee[0],Ye+Ee[0].length):-1}function l(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.V=+Ee[0],Ye+Ee[0].length):-1}function x(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.W=+Ee[0],Ye+Ee[0].length):-1}function u(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+4));return Ee?(Xe.y=+Ee[0],Ye+Ee[0].length):-1}function M(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.y=+Ee[0]+(+Ee[0]>68?1900:2e3),Ye+Ee[0].length):-1}function w(Xe,it,Ye){var Ee=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(it.slice(Ye,Ye+6));return Ee?(Xe.Z=Ee[1]?0:-(Ee[2]+(Ee[3]||"00")),Ye+Ee[0].length):-1}function p(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+1));return Ee?(Xe.q=Ee[0]*3-3,Ye+Ee[0].length):-1}function _(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.m=Ee[0]-1,Ye+Ee[0].length):-1}function h(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.d=+Ee[0],Ye+Ee[0].length):-1}function L(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+3));return Ee?(Xe.m=0,Xe.d=+Ee[0],Ye+Ee[0].length):-1}function E(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.H=+Ee[0],Ye+Ee[0].length):-1}function S(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.M=+Ee[0],Ye+Ee[0].length):-1}function P(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.S=+Ee[0],Ye+Ee[0].length):-1}function F(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+3));return Ee?(Xe.L=+Ee[0],Ye+Ee[0].length):-1}function I(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+6));return Ee?(Xe.L=Math.floor(Ee[0]/1e3),Ye+Ee[0].length):-1}function D(Xe,it,Ye){var Ee=r.exec(it.slice(Ye,Ye+1));return Ee?Ye+Ee[0].length:-1}function R(Xe,it,Ye){var Ee=n.exec(it.slice(Ye));return Ee?(Xe.Q=+Ee[0],Ye+Ee[0].length):-1}function O(Xe,it,Ye){var Ee=n.exec(it.slice(Ye));return Ee?(Xe.s=+Ee[0],Ye+Ee[0].length):-1}function z(Xe,it){return s(Xe.getDate(),it,2)}function G(Xe,it){return s(Xe.getHours(),it,2)}function Y(Xe,it){return s(Xe.getHours()%12||12,it,2)}function ee(Xe,it){return s(1+c.timeDay.count(c.timeYear(Xe),Xe),it,3)}function j(Xe,it){return s(Xe.getMilliseconds(),it,3)}function X(Xe,it){return j(Xe,it)+"000"}function ae(Xe,it){return s(Xe.getMonth()+1,it,2)}function he(Xe,it){return s(Xe.getMinutes(),it,2)}function K(Xe,it){return s(Xe.getSeconds(),it,2)}function J(Xe){var it=Xe.getDay();return it===0?7:it}function U(Xe,it){return s(c.timeSunday.count(c.timeYear(Xe)-1,Xe),it,2)}function H(Xe,it){var Ye=Xe.getDay();return Xe=Ye>=4||Ye===0?c.timeThursday(Xe):c.timeThursday.ceil(Xe),s(c.timeThursday.count(c.timeYear(Xe),Xe)+(c.timeYear(Xe).getDay()===4),it,2)}function q(Xe){return Xe.getDay()}function re(Xe,it){return s(c.timeMonday.count(c.timeYear(Xe)-1,Xe),it,2)}function Z(Xe,it){return s(Xe.getFullYear()%100,it,2)}function Q(Xe,it){return s(Xe.getFullYear()%1e4,it,4)}function ie(Xe){var it=Xe.getTimezoneOffset();return(it>0?"-":(it*=-1,"+"))+s(it/60|0,"0",2)+s(it%60,"0",2)}function oe(Xe,it){return s(Xe.getUTCDate(),it,2)}function ne(Xe,it){return s(Xe.getUTCHours(),it,2)}function le(Xe,it){return s(Xe.getUTCHours()%12||12,it,2)}function _e(Xe,it){return s(1+c.utcDay.count(c.utcYear(Xe),Xe),it,3)}function fe(Xe,it){return s(Xe.getUTCMilliseconds(),it,3)}function ye(Xe,it){return fe(Xe,it)+"000"}function xe(Xe,it){return s(Xe.getUTCMonth()+1,it,2)}function me(Xe,it){return s(Xe.getUTCMinutes(),it,2)}function be(Xe,it){return s(Xe.getUTCSeconds(),it,2)}function ke(Xe){var it=Xe.getUTCDay();return it===0?7:it}function De(Xe,it){return s(c.utcSunday.count(c.utcYear(Xe)-1,Xe),it,2)}function He(Xe,it){var Ye=Xe.getUTCDay();return Xe=Ye>=4||Ye===0?c.utcThursday(Xe):c.utcThursday.ceil(Xe),s(c.utcThursday.count(c.utcYear(Xe),Xe)+(c.utcYear(Xe).getUTCDay()===4),it,2)}function Ae(Xe){return Xe.getUTCDay()}function Le(Xe,it){return s(c.utcMonday.count(c.utcYear(Xe)-1,Xe),it,2)}function Ze(Xe,it){return s(Xe.getUTCFullYear()%100,it,2)}function We(Xe,it){return s(Xe.getUTCFullYear()%1e4,it,4)}function ze(){return"+0000"}function Ie(){return"%"}function Ve(Xe){return+Xe}function dt(Xe){return Math.floor(+Xe/1e3)}var Ft;Qt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qt(Xe){return Ft=a(Xe),y.timeFormat=Ft.format,y.timeParse=Ft.parse,y.utcFormat=Ft.utcFormat,y.utcParse=Ft.utcParse,Ft}var Ot="%Y-%m-%dT%H:%M:%S.%LZ";function Ct(Xe){return Xe.toISOString()}var jt=Date.prototype.toISOString?Ct:y.utcFormat(Ot);function Nt(Xe){var it=new Date(Xe);return isNaN(it)?null:it}var Lt=+new Date("2000-01-01T00:00:00.000Z")?Nt:y.utcParse(Ot);y.isoFormat=jt,y.isoParse=Lt,y.timeFormatDefaultLocale=Qt,y.timeFormatLocale=a,Object.defineProperty(y,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=y||self,c(y.d3=y.d3||{}))})(this,function(y){var c=new Date,A=new Date;function T(Ae,Le,Ze,We){function ze(Ie){return Ae(Ie=arguments.length===0?new Date:new Date(+Ie)),Ie}return ze.floor=function(Ie){return Ae(Ie=new Date(+Ie)),Ie},ze.ceil=function(Ie){return Ae(Ie=new Date(Ie-1)),Le(Ie,1),Ae(Ie),Ie},ze.round=function(Ie){var Ve=ze(Ie),dt=ze.ceil(Ie);return Ie-Ve<dt-Ie?Ve:dt},ze.offset=function(Ie,Ve){return Le(Ie=new Date(+Ie),Ve==null?1:Math.floor(Ve)),Ie},ze.range=function(Ie,Ve,dt){var Ft=[],Qt;if(Ie=ze.ceil(Ie),dt=dt==null?1:Math.floor(dt),!(Ie<Ve)||!(dt>0))return Ft;do Ft.push(Qt=new Date(+Ie)),Le(Ie,dt),Ae(Ie);while(Qt<Ie&&Ie<Ve);return Ft},ze.filter=function(Ie){return T(function(Ve){if(Ve>=Ve)for(;Ae(Ve),!Ie(Ve);)Ve.setTime(Ve-1)},function(Ve,dt){if(Ve>=Ve)if(dt<0)for(;++dt<=0;)for(;Le(Ve,-1),!Ie(Ve););else for(;--dt>=0;)for(;Le(Ve,1),!Ie(Ve););})},Ze&&(ze.count=function(Ie,Ve){return c.setTime(+Ie),A.setTime(+Ve),Ae(c),Ae(A),Math.floor(Ze(c,A))},ze.every=function(Ie){return Ie=Math.floor(Ie),!isFinite(Ie)||!(Ie>0)?null:Ie>1?ze.filter(We?function(Ve){return We(Ve)%Ie===0}:function(Ve){return ze.count(0,Ve)%Ie===0}):ze}),ze}var e=T(function(){},function(Ae,Le){Ae.setTime(+Ae+Le)},function(Ae,Le){return Le-Ae});e.every=function(Ae){return Ae=Math.floor(Ae),!isFinite(Ae)||!(Ae>0)?null:Ae>1?T(function(Le){Le.setTime(Math.floor(Le/Ae)*Ae)},function(Le,Ze){Le.setTime(+Le+Ze*Ae)},function(Le,Ze){return(Ze-Le)/Ae}):e};var a=e.range,i=1e3,n=6e4,r=36e5,v=864e5,s=6048e5,o=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds())},function(Ae,Le){Ae.setTime(+Ae+Le*i)},function(Ae,Le){return(Le-Ae)/i},function(Ae){return Ae.getUTCSeconds()}),b=o.range,g=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*i)},function(Ae,Le){Ae.setTime(+Ae+Le*n)},function(Ae,Le){return(Le-Ae)/n},function(Ae){return Ae.getMinutes()}),d=g.range,f=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*i-Ae.getMinutes()*n)},function(Ae,Le){Ae.setTime(+Ae+Le*r)},function(Ae,Le){return(Le-Ae)/r},function(Ae){return Ae.getHours()}),m=f.range,l=T(function(Ae){Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setDate(Ae.getDate()+Le)},function(Ae,Le){return(Le-Ae-(Le.getTimezoneOffset()-Ae.getTimezoneOffset())*n)/v},function(Ae){return Ae.getDate()-1}),x=l.range;function u(Ae){return T(function(Le){Le.setDate(Le.getDate()-(Le.getDay()+7-Ae)%7),Le.setHours(0,0,0,0)},function(Le,Ze){Le.setDate(Le.getDate()+Ze*7)},function(Le,Ze){return(Ze-Le-(Ze.getTimezoneOffset()-Le.getTimezoneOffset())*n)/s})}var M=u(0),w=u(1),p=u(2),_=u(3),h=u(4),L=u(5),E=u(6),S=M.range,P=w.range,F=p.range,I=_.range,D=h.range,R=L.range,O=E.range,z=T(function(Ae){Ae.setDate(1),Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setMonth(Ae.getMonth()+Le)},function(Ae,Le){return Le.getMonth()-Ae.getMonth()+(Le.getFullYear()-Ae.getFullYear())*12},function(Ae){return Ae.getMonth()}),G=z.range,Y=T(function(Ae){Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setFullYear(Ae.getFullYear()+Le)},function(Ae,Le){return Le.getFullYear()-Ae.getFullYear()},function(Ae){return Ae.getFullYear()});Y.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:T(function(Le){Le.setFullYear(Math.floor(Le.getFullYear()/Ae)*Ae),Le.setMonth(0,1),Le.setHours(0,0,0,0)},function(Le,Ze){Le.setFullYear(Le.getFullYear()+Ze*Ae)})};var ee=Y.range,j=T(function(Ae){Ae.setUTCSeconds(0,0)},function(Ae,Le){Ae.setTime(+Ae+Le*n)},function(Ae,Le){return(Le-Ae)/n},function(Ae){return Ae.getUTCMinutes()}),X=j.range,ae=T(function(Ae){Ae.setUTCMinutes(0,0,0)},function(Ae,Le){Ae.setTime(+Ae+Le*r)},function(Ae,Le){return(Le-Ae)/r},function(Ae){return Ae.getUTCHours()}),he=ae.range,K=T(function(Ae){Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCDate(Ae.getUTCDate()+Le)},function(Ae,Le){return(Le-Ae)/v},function(Ae){return Ae.getUTCDate()-1}),J=K.range;function U(Ae){return T(function(Le){Le.setUTCDate(Le.getUTCDate()-(Le.getUTCDay()+7-Ae)%7),Le.setUTCHours(0,0,0,0)},function(Le,Ze){Le.setUTCDate(Le.getUTCDate()+Ze*7)},function(Le,Ze){return(Ze-Le)/s})}var H=U(0),q=U(1),re=U(2),Z=U(3),Q=U(4),ie=U(5),oe=U(6),ne=H.range,le=q.range,_e=re.range,fe=Z.range,ye=Q.range,xe=ie.range,me=oe.range,be=T(function(Ae){Ae.setUTCDate(1),Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCMonth(Ae.getUTCMonth()+Le)},function(Ae,Le){return Le.getUTCMonth()-Ae.getUTCMonth()+(Le.getUTCFullYear()-Ae.getUTCFullYear())*12},function(Ae){return Ae.getUTCMonth()}),ke=be.range,De=T(function(Ae){Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCFullYear(Ae.getUTCFullYear()+Le)},function(Ae,Le){return Le.getUTCFullYear()-Ae.getUTCFullYear()},function(Ae){return Ae.getUTCFullYear()});De.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:T(function(Le){Le.setUTCFullYear(Math.floor(Le.getUTCFullYear()/Ae)*Ae),Le.setUTCMonth(0,1),Le.setUTCHours(0,0,0,0)},function(Le,Ze){Le.setUTCFullYear(Le.getUTCFullYear()+Ze*Ae)})};var He=De.range;y.timeDay=l,y.timeDays=x,y.timeFriday=L,y.timeFridays=R,y.timeHour=f,y.timeHours=m,y.timeInterval=T,y.timeMillisecond=e,y.timeMilliseconds=a,y.timeMinute=g,y.timeMinutes=d,y.timeMonday=w,y.timeMondays=P,y.timeMonth=z,y.timeMonths=G,y.timeSaturday=E,y.timeSaturdays=O,y.timeSecond=o,y.timeSeconds=b,y.timeSunday=M,y.timeSundays=S,y.timeThursday=h,y.timeThursdays=D,y.timeTuesday=p,y.timeTuesdays=F,y.timeWednesday=_,y.timeWednesdays=I,y.timeWeek=M,y.timeWeeks=S,y.timeYear=Y,y.timeYears=ee,y.utcDay=K,y.utcDays=J,y.utcFriday=ie,y.utcFridays=xe,y.utcHour=ae,y.utcHours=he,y.utcMillisecond=e,y.utcMilliseconds=a,y.utcMinute=j,y.utcMinutes=X,y.utcMonday=q,y.utcMondays=le,y.utcMonth=be,y.utcMonths=ke,y.utcSaturday=oe,y.utcSaturdays=me,y.utcSecond=o,y.utcSeconds=b,y.utcSunday=H,y.utcSundays=ne,y.utcThursday=Q,y.utcThursdays=ye,y.utcTuesday=re,y.utcTuesdays=_e,y.utcWednesday=Z,y.utcWednesdays=fe,y.utcWeek=H,y.utcWeeks=ne,y.utcYear=De,y.utcYears=He,Object.defineProperty(y,"__esModule",{value:!0})})},{}],122:[function(t,N,V){arguments[4][121][0].apply(V,arguments)},{dup:121}],123:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=y||self,c(y.d3=y.d3||{}))})(this,function(y){var c=0,A=0,T=0,e=1e3,a,i,n=0,r=0,v=0,s=typeof performance=="object"&&performance.now?performance:Date,o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(_){setTimeout(_,17)};function b(){return r||(o(g),r=s.now()+v)}function g(){r=0}function d(){this._call=this._time=this._next=null}d.prototype=f.prototype={constructor:d,restart:function(_,h,L){if(typeof _!="function")throw new TypeError("callback is not a function");L=(L==null?b():+L)+(h==null?0:+h),!this._next&&i!==this&&(i?i._next=this:a=this,i=this),this._call=_,this._time=L,M()},stop:function(){this._call&&(this._call=null,this._time=1/0,M())}};function f(_,h,L){var E=new d;return E.restart(_,h,L),E}function m(){b(),++c;for(var _=a,h;_;)(h=r-_._time)>=0&&_._call.call(null,h),_=_._next;--c}function l(){r=(n=s.now())+v,c=A=0;try{m()}finally{c=0,u(),r=0}}function x(){var _=s.now(),h=_-n;h>e&&(v-=h,n=_)}function u(){for(var _,h=a,L,E=1/0;h;)h._call?(E>h._time&&(E=h._time),_=h,h=h._next):(L=h._next,h._next=null,h=_?_._next=L:a=L);i=_,M(E)}function M(_){if(!c){A&&(A=clearTimeout(A));var h=_-r;h>24?(_<1/0&&(A=setTimeout(l,_-s.now()-v)),T&&(T=clearInterval(T))):(T||(n=s.now(),T=setInterval(x,e)),c=1,o(l))}}function w(_,h,L){var E=new d;return h=h==null?0:+h,E.restart(function(S){E.stop(),_(S+h)},h,L),E}function p(_,h,L){var E=new d,S=h;return h==null?(E.restart(_,h,L),E):(h=+h,L=L==null?b():+L,E.restart(function P(F){F+=S,E.restart(P,S+=h,L),_(F)},h,L),E)}y.interval=p,y.now=b,y.timeout=w,y.timer=f,y.timerFlush=m,Object.defineProperty(y,"__esModule",{value:!0})})},{}],124:[function(t,N,V){N.exports=function(){for(var y=0;y<arguments.length;y++)if(arguments[y]!==void 0)return arguments[y]}},{}],125:[function(t,N,V){N.exports=T;var y=T.canvas=document.createElement("canvas"),c=y.getContext("2d"),A=e([32,126]);T.createPairs=e,T.ascii=A;function T(a,i){Array.isArray(a)&&(a=a.join(", "));var n={},r,v=16,s=.05;i&&(i.length===2&&typeof i[0]=="number"?r=e(i):Array.isArray(i)?r=i:(i.o?r=e(i.o):i.pairs&&(r=i.pairs),i.fontSize&&(v=i.fontSize),i.threshold!=null&&(s=i.threshold))),r||(r=A),c.font=v+"px "+a;for(var o=0;o<r.length;o++){var b=r[o],g=c.measureText(b[0]).width+c.measureText(b[1]).width,d=c.measureText(b).width;if(Math.abs(g-d)>v*s){var f=(d-g)/v;n[b]=f*1e3}}return n}function e(a){for(var i=[],n=a[0];n<=a[1];n++)for(var r=String.fromCharCode(n),v=a[0];v<a[1];v++){var s=String.fromCharCode(v),o=r+s;i.push(o)}return i}},{}],126:[function(t,N,V){var y=t("abs-svg-path"),c=t("normalize-svg-path"),A={M:"moveTo",C:"bezierCurveTo"};N.exports=function(T,e){T.beginPath(),c(y(e)).forEach(function(a){var i=a[0],n=a.slice(1);T[A[i]].apply(T,n)}),T.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(t,N,V){N.exports=function(y){switch(y){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(t,N,V){function y(T,e,a){var i=T[a]|0;if(i<=0)return[];var n=new Array(i),r;if(a===T.length-1)for(r=0;r<i;++r)n[r]=e;else for(r=0;r<i;++r)n[r]=y(T,e,a+1);return n}function c(T,e){var a,i;for(a=new Array(T),i=0;i<T;++i)a[i]=e;return a}function A(T,e){switch(typeof e>"u"&&(e=0),typeof T){case"number":if(T>0)return c(T|0,e);break;case"object":if(typeof T.length=="number")return y(T,e,0);break}return[]}N.exports=A},{}],129:[function(t,N,V){N.exports=y,N.exports.default=y;function y(R,O,z){z=z||2;var G=O&&O.length,Y=G?O[0]*z:R.length,ee=c(R,0,Y,z,!0),j=[];if(!ee||ee.next===ee.prev)return j;var X,ae,he,K,J,U,H;if(G&&(ee=r(R,O,ee,z)),R.length>80*z){X=he=R[0],ae=K=R[1];for(var q=z;q<Y;q+=z)J=R[q],U=R[q+1],J<X&&(X=J),U<ae&&(ae=U),J>he&&(he=J),U>K&&(K=U);H=Math.max(he-X,K-ae),H=H!==0?1/H:0}return T(ee,j,z,X,ae,H),j}function c(R,O,z,G,Y){var ee,j;if(Y===D(R,O,z,G)>0)for(ee=O;ee<z;ee+=G)j=P(ee,R[ee],R[ee+1],j);else for(ee=z-G;ee>=O;ee-=G)j=P(ee,R[ee],R[ee+1],j);return j&&M(j,j.next)&&(F(j),j=j.next),j}function A(R,O){if(!R)return R;O||(O=R);var z=R,G;do if(G=!1,!z.steiner&&(M(z,z.next)||u(z.prev,z,z.next)===0)){if(F(z),z=O=z.prev,z===z.next)break;G=!0}else z=z.next;while(G||z!==O);return O}function T(R,O,z,G,Y,ee,j){if(!!R){!j&&ee&&g(R,G,Y,ee);for(var X=R,ae,he;R.prev!==R.next;){if(ae=R.prev,he=R.next,ee?a(R,G,Y,ee):e(R)){O.push(ae.i/z),O.push(R.i/z),O.push(he.i/z),F(R),R=he.next,X=he.next;continue}if(R=he,R===X){j?j===1?(R=i(A(R),O,z),T(R,O,z,G,Y,ee,2)):j===2&&n(R,O,z,G,Y,ee):T(A(R),O,z,G,Y,ee,1);break}}}}function e(R){var O=R.prev,z=R,G=R.next;if(u(O,z,G)>=0)return!1;for(var Y=R.next.next;Y!==R.prev;){if(l(O.x,O.y,z.x,z.y,G.x,G.y,Y.x,Y.y)&&u(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function a(R,O,z,G){var Y=R.prev,ee=R,j=R.next;if(u(Y,ee,j)>=0)return!1;for(var X=Y.x<ee.x?Y.x<j.x?Y.x:j.x:ee.x<j.x?ee.x:j.x,ae=Y.y<ee.y?Y.y<j.y?Y.y:j.y:ee.y<j.y?ee.y:j.y,he=Y.x>ee.x?Y.x>j.x?Y.x:j.x:ee.x>j.x?ee.x:j.x,K=Y.y>ee.y?Y.y>j.y?Y.y:j.y:ee.y>j.y?ee.y:j.y,J=f(X,ae,O,z,G),U=f(he,K,O,z,G),H=R.prevZ,q=R.nextZ;H&&H.z>=J&&q&&q.z<=U;){if(H!==R.prev&&H!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,H.x,H.y)&&u(H.prev,H,H.next)>=0||(H=H.prevZ,q!==R.prev&&q!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,q.x,q.y)&&u(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;H&&H.z>=J;){if(H!==R.prev&&H!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,H.x,H.y)&&u(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;q&&q.z<=U;){if(q!==R.prev&&q!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,q.x,q.y)&&u(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function i(R,O,z){var G=R;do{var Y=G.prev,ee=G.next.next;!M(Y,ee)&&w(Y,G,G.next,ee)&&L(Y,ee)&&L(ee,Y)&&(O.push(Y.i/z),O.push(G.i/z),O.push(ee.i/z),F(G),F(G.next),G=R=ee),G=G.next}while(G!==R);return A(G)}function n(R,O,z,G,Y,ee){var j=R;do{for(var X=j.next.next;X!==j.prev;){if(j.i!==X.i&&x(j,X)){var ae=S(j,X);j=A(j,j.next),ae=A(ae,ae.next),T(j,O,z,G,Y,ee),T(ae,O,z,G,Y,ee);return}X=X.next}j=j.next}while(j!==R)}function r(R,O,z,G){var Y=[],ee,j,X,ae,he;for(ee=0,j=O.length;ee<j;ee++)X=O[ee]*G,ae=ee<j-1?O[ee+1]*G:R.length,he=c(R,X,ae,G,!1),he===he.next&&(he.steiner=!0),Y.push(m(he));for(Y.sort(v),ee=0;ee<Y.length;ee++)s(Y[ee],z),z=A(z,z.next);return z}function v(R,O){return R.x-O.x}function s(R,O){if(O=o(R,O),O){var z=S(O,R);A(O,O.next),A(z,z.next)}}function o(R,O){var z=O,G=R.x,Y=R.y,ee=-1/0,j;do{if(Y<=z.y&&Y>=z.next.y&&z.next.y!==z.y){var X=z.x+(Y-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(X<=G&&X>ee){if(ee=X,X===G){if(Y===z.y)return z;if(Y===z.next.y)return z.next}j=z.x<z.next.x?z:z.next}}z=z.next}while(z!==O);if(!j)return null;if(G===ee)return j;var ae=j,he=j.x,K=j.y,J=1/0,U;z=j;do G>=z.x&&z.x>=he&&G!==z.x&&l(Y<K?G:ee,Y,he,K,Y<K?ee:G,Y,z.x,z.y)&&(U=Math.abs(Y-z.y)/(G-z.x),L(z,R)&&(U<J||U===J&&(z.x>j.x||z.x===j.x&&b(j,z)))&&(j=z,J=U)),z=z.next;while(z!==ae);return j}function b(R,O){return u(R.prev,R,O.prev)<0&&u(O.next,R,R.next)<0}function g(R,O,z,G){var Y=R;do Y.z===null&&(Y.z=f(Y.x,Y.y,O,z,G)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==R);Y.prevZ.nextZ=null,Y.prevZ=null,d(Y)}function d(R){var O,z,G,Y,ee,j,X,ae,he=1;do{for(z=R,R=null,ee=null,j=0;z;){for(j++,G=z,X=0,O=0;O<he&&(X++,G=G.nextZ,!!G);O++);for(ae=he;X>0||ae>0&&G;)X!==0&&(ae===0||!G||z.z<=G.z)?(Y=z,z=z.nextZ,X--):(Y=G,G=G.nextZ,ae--),ee?ee.nextZ=Y:R=Y,Y.prevZ=ee,ee=Y;z=G}ee.nextZ=null,he*=2}while(j>1);return R}function f(R,O,z,G,Y){return R=32767*(R-z)*Y,O=32767*(O-G)*Y,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,R|O<<1}function m(R){var O=R,z=R;do(O.x<z.x||O.x===z.x&&O.y<z.y)&&(z=O),O=O.next;while(O!==R);return z}function l(R,O,z,G,Y,ee,j,X){return(Y-j)*(O-X)-(R-j)*(ee-X)>=0&&(R-j)*(G-X)-(z-j)*(O-X)>=0&&(z-j)*(ee-X)-(Y-j)*(G-X)>=0}function x(R,O){return R.next.i!==O.i&&R.prev.i!==O.i&&!h(R,O)&&(L(R,O)&&L(O,R)&&E(R,O)&&(u(R.prev,R,O.prev)||u(R,O.prev,O))||M(R,O)&&u(R.prev,R,R.next)>0&&u(O.prev,O,O.next)>0)}function u(R,O,z){return(O.y-R.y)*(z.x-O.x)-(O.x-R.x)*(z.y-O.y)}function M(R,O){return R.x===O.x&&R.y===O.y}function w(R,O,z,G){var Y=_(u(R,O,z)),ee=_(u(R,O,G)),j=_(u(z,G,R)),X=_(u(z,G,O));return!!(Y!==ee&&j!==X||Y===0&&p(R,z,O)||ee===0&&p(R,G,O)||j===0&&p(z,R,G)||X===0&&p(z,O,G))}function p(R,O,z){return O.x<=Math.max(R.x,z.x)&&O.x>=Math.min(R.x,z.x)&&O.y<=Math.max(R.y,z.y)&&O.y>=Math.min(R.y,z.y)}function _(R){return R>0?1:R<0?-1:0}function h(R,O){var z=R;do{if(z.i!==R.i&&z.next.i!==R.i&&z.i!==O.i&&z.next.i!==O.i&&w(z,z.next,R,O))return!0;z=z.next}while(z!==R);return!1}function L(R,O){return u(R.prev,R,R.next)<0?u(R,O,R.next)>=0&&u(R,R.prev,O)>=0:u(R,O,R.prev)<0||u(R,R.next,O)<0}function E(R,O){var z=R,G=!1,Y=(R.x+O.x)/2,ee=(R.y+O.y)/2;do z.y>ee!=z.next.y>ee&&z.next.y!==z.y&&Y<(z.next.x-z.x)*(ee-z.y)/(z.next.y-z.y)+z.x&&(G=!G),z=z.next;while(z!==R);return G}function S(R,O){var z=new I(R.i,R.x,R.y),G=new I(O.i,O.x,O.y),Y=R.next,ee=O.prev;return R.next=O,O.prev=R,z.next=Y,Y.prev=z,G.next=z,z.prev=G,ee.next=G,G.prev=ee,G}function P(R,O,z,G){var Y=new I(R,O,z);return G?(Y.next=G.next,Y.prev=G,G.next.prev=Y,G.next=Y):(Y.prev=Y,Y.next=Y),Y}function F(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,O,z){this.i=R,this.x=O,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}y.deviation=function(R,O,z,G){var Y=O&&O.length,ee=Y?O[0]*z:R.length,j=Math.abs(D(R,0,ee,z));if(Y)for(var X=0,ae=O.length;X<ae;X++){var he=O[X]*z,K=X<ae-1?O[X+1]*z:R.length;j-=Math.abs(D(R,he,K,z))}var J=0;for(X=0;X<G.length;X+=3){var U=G[X]*z,H=G[X+1]*z,q=G[X+2]*z;J+=Math.abs((R[U]-R[q])*(R[H+1]-R[U+1])-(R[U]-R[H])*(R[q+1]-R[U+1]))}return j===0&&J===0?0:Math.abs((J-j)/j)};function D(R,O,z,G){for(var Y=0,ee=O,j=z-G;ee<z;ee+=G)Y+=(R[j]-R[ee])*(R[ee+1]+R[j+1]),j=ee;return Y}y.flatten=function(R){for(var O=R[0][0].length,z={vertices:[],holes:[],dimensions:O},G=0,Y=0;Y<R.length;Y++){for(var ee=0;ee<R[Y].length;ee++)for(var j=0;j<O;j++)z.vertices.push(R[Y][ee][j]);Y>0&&(G+=R[Y-1].length,z.holes.push(G))}return z}},{}],130:[function(t,N,V){var y=t("strongly-connected-components");N.exports=function(A,T){var e=[],a=[],i=[],n={},r=[],v;function s(M){i[M]=!1,n.hasOwnProperty(M)&&Object.keys(n[M]).forEach(function(w){delete n[M][w],i[w]&&s(w)})}function o(M){var w=!1;a.push(M),i[M]=!0;var p,_;for(p=0;p<r[M].length;p++)_=r[M][p],_===v?(b(v,a),w=!0):i[_]||(w=o(_));if(w)s(M);else for(p=0;p<r[M].length;p++){_=r[M][p];var h=n[_];h||(h={},n[_]=h),h[_]=!0}return a.pop(),w}function b(M,w){var p=[].concat(w).concat(M);T?T(o):e.push(p)}function g(M){for(var w=0;w<A.length;w++)w<M&&(A[w]=[]),A[w]=A[w].filter(function(p){return p>=M})}function d(M){g(M);for(var w=A,p=y(w),_=p.components.filter(function(I){return I.length>1}),h=1/0,L,E=0;E<_.length;E++)for(var S=0;S<_[E].length;S++)_[E][S]<h&&(h=_[E][S],L=E);var P=_[L];if(!P)return!1;var F=A.map(function(I,D){return P.indexOf(D)===-1?[]:I.filter(function(R){return P.indexOf(R)!==-1})});return{leastVertex:h,adjList:F}}v=0;for(var f=A.length;v<f;){var m=d(v);if(v=m.leastVertex,r=m.adjList,r){for(var l=0;l<r.length;l++)for(var x=0;x<r[l].length;x++){var u=r[l][x];i[+u]=!1,n[u]={}}o(v),v=v+1}else v=f}if(!T)return e}},{"strongly-connected-components":307}],131:[function(t,N,V){var y=t("../../object/valid-value");N.exports=function(){return y(this).length=0,this}},{"../../object/valid-value":162}],132:[function(t,N,V){N.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(t,N,V){N.exports=function(){var y=Array.from,c,A;return typeof y!="function"?!1:(c=["raz","dwa"],A=y(c),Boolean(A&&A!==c&&A[1]==="dwa"))}},{}],134:[function(t,N,V){var y=t("es6-symbol").iterator,c=t("../../function/is-arguments"),A=t("../../function/is-function"),T=t("../../number/to-pos-integer"),e=t("../../object/valid-callable"),a=t("../../object/valid-value"),i=t("../../object/is-value"),n=t("../../string/is-string"),r=Array.isArray,v=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;N.exports=function(b){var g=arguments[1],d=arguments[2],f,m,l,x,u,M,w,p,_,h;if(b=Object(a(b)),i(g)&&e(g),!this||this===Array||!A(this)){if(!g){if(c(b))return u=b.length,u!==1?Array.apply(null,b):(x=new Array(1),x[0]=b[0],x);if(r(b)){for(x=new Array(u=b.length),m=0;m<u;++m)x[m]=b[m];return x}}x=[]}else f=this;if(!r(b)){if((_=b[y])!==void 0){for(w=e(_).call(b),f&&(x=new f),p=w.next(),m=0;!p.done;)h=g?v.call(g,d,p.value,m):p.value,f?(s.value=h,o(x,m,s)):x[m]=h,p=w.next(),++m;u=m}else if(n(b)){for(u=b.length,f&&(x=new f),m=0,l=0;m<u;++m)h=b[m],m+1<u&&(M=h.charCodeAt(0),M>=55296&&M<=56319&&(h+=b[++m])),h=g?v.call(g,d,h,l):h,f?(s.value=h,o(x,l,s)):x[l]=h,++l;u=l}}if(u===void 0)for(u=T(b.length),f&&(x=new f(u)),m=0;m<u;++m)h=g?v.call(g,d,b[m],m):b[m],f?(s.value=h,o(x,m,s)):x[m]=h;return f&&(s.value=null,x.length=u),x}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(t,N,V){var y=Object.prototype.toString,c=y.call(function(){return arguments}());N.exports=function(A){return y.call(A)===c}},{}],136:[function(t,N,V){var y=Object.prototype.toString,c=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);N.exports=function(A){return typeof A=="function"&&c(y.call(A))}},{}],137:[function(t,N,V){N.exports=function(){}},{}],138:[function(t,N,V){N.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(t,N,V){N.exports=function(){var y=Math.sign;return typeof y!="function"?!1:y(10)===1&&y(-20)===-1}},{}],140:[function(t,N,V){N.exports=function(y){return y=Number(y),isNaN(y)||y===0?y:y>0?1:-1}},{}],141:[function(t,N,V){var y=t("../math/sign"),c=Math.abs,A=Math.floor;N.exports=function(T){return isNaN(T)?0:(T=Number(T),T===0||!isFinite(T)?T:y(T)*A(c(T)))}},{"../math/sign":138}],142:[function(t,N,V){var y=t("./to-integer"),c=Math.max;N.exports=function(A){return c(0,y(A))}},{"./to-integer":141}],143:[function(t,N,V){var y=t("./valid-callable"),c=t("./valid-value"),A=Function.prototype.bind,T=Function.prototype.call,e=Object.keys,a=Object.prototype.propertyIsEnumerable;N.exports=function(i,n){return function(r,v){var s,o=arguments[2],b=arguments[3];return r=Object(c(r)),y(v),s=e(r),b&&s.sort(typeof b=="function"?A.call(b,r):void 0),typeof i!="function"&&(i=s[i]),T.call(i,s,function(g,d){return a.call(r,g)?T.call(v,o,r[g],g,r,d):n})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(t,N,V){N.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(t,N,V){N.exports=function(){var y=Object.assign,c;return typeof y!="function"?!1:(c={foo:"raz"},y(c,{bar:"dwa"},{trzy:"trzy"}),c.foo+c.bar+c.trzy==="razdwatrzy")}},{}],146:[function(t,N,V){var y=t("../keys"),c=t("../valid-value"),A=Math.max;N.exports=function(T,e){var a,i,n=A(arguments.length,2),r;for(T=Object(c(T)),r=function(v){try{T[v]=e[v]}catch(s){a||(a=s)}},i=1;i<n;++i)e=arguments[i],y(e).forEach(r);if(a!==void 0)throw a;return T}},{"../keys":152,"../valid-value":162}],147:[function(t,N,V){var y=t("../array/from"),c=t("./assign"),A=t("./valid-value");N.exports=function(T){var e=Object(A(T)),a=arguments[1],i=Object(arguments[2]);if(e!==T&&!a)return e;var n={};return a?y(a,function(r){(i.ensure||r in T)&&(n[r]=T[r])}):c(n,T),n}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(t,N,V){var y=Object.create,c;t("./set-prototype-of/is-implemented")()||(c=t("./set-prototype-of/shim")),N.exports=function(){var A,T,e;return!c||c.level!==1?y:(A={},T={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){T[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}T[a]=e}),Object.defineProperties(A,T),Object.defineProperty(c,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:A}),function(a,i){return y(a===null?A:a,i)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(t,N,V){N.exports=t("./_iterate")("forEach")},{"./_iterate":143}],150:[function(t,N,V){var y=t("./is-value"),c={function:!0,object:!0};N.exports=function(A){return y(A)&&c[typeof A]||!1}},{"./is-value":151}],151:[function(t,N,V){var y=t("../function/noop")();N.exports=function(c){return c!==y&&c!==null}},{"../function/noop":137}],152:[function(t,N,V){N.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(t,N,V){N.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(t,N,V){var y=t("../is-value"),c=Object.keys;N.exports=function(A){return c(y(A)?Object(A):A)}},{"../is-value":151}],155:[function(t,N,V){var y=t("./valid-callable"),c=t("./for-each"),A=Function.prototype.call;N.exports=function(T,e){var a={},i=arguments[2];return y(e),c(T,function(n,r,v,s){a[r]=A.call(e,i,n,r,v,s)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(t,N,V){var y=t("./is-value"),c=Array.prototype.forEach,A=Object.create,T=function(e,a){var i;for(i in e)a[i]=e[i]};N.exports=function(e){var a=A(null);return c.call(arguments,function(i){!y(i)||T(Object(i),a)}),a}},{"./is-value":151}],157:[function(t,N,V){N.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(t,N,V){var y=Object.create,c=Object.getPrototypeOf,A={};N.exports=function(){var T=Object.setPrototypeOf,e=arguments[0]||y;return typeof T!="function"?!1:c(T(e(null),A))===A}},{}],159:[function(t,N,V){var y=t("../is-object"),c=t("../valid-value"),A=Object.prototype.isPrototypeOf,T=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(i,n){if(c(i),n===null||y(n))return i;throw new TypeError("Prototype must be null or an object")},N.exports=function(i){var n,r;return i?(i.level===2?i.set?(r=i.set,n=function(v,s){return r.call(a(v,s),s),v}):n=function(v,s){return a(v,s).__proto__=s,v}:n=function v(s,o){var b;return a(s,o),b=A.call(v.nullPolyfill,s),b&&delete v.nullPolyfill.__proto__,o===null&&(o=v.nullPolyfill),s.__proto__=o,b&&T(v.nullPolyfill,"__proto__",e),s},Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null}(function(){var i=Object.create(null),n={},r,v=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(v){try{r=v.set,r.call(i,n)}catch{}if(Object.getPrototypeOf(i)===n)return{set:r,level:2}}return i.__proto__=n,Object.getPrototypeOf(i)===n?{level:2}:(i={},i.__proto__=n,Object.getPrototypeOf(i)===n?{level:1}:!1)}()),t("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(t,N,V){N.exports=function(y){if(typeof y!="function")throw new TypeError(y+" is not a function");return y}},{}],161:[function(t,N,V){var y=t("./is-object");N.exports=function(c){if(!y(c))throw new TypeError(c+" is not an Object");return c}},{"./is-object":150}],162:[function(t,N,V){var y=t("./is-value");N.exports=function(c){if(!y(c))throw new TypeError("Cannot use null or undefined");return c}},{"./is-value":151}],163:[function(t,N,V){N.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(t,N,V){var y="razdwatrzy";N.exports=function(){return typeof y.contains!="function"?!1:y.contains("dwa")===!0&&y.contains("foo")===!1}},{}],165:[function(t,N,V){var y=String.prototype.indexOf;N.exports=function(c){return y.call(this,c,arguments[1])>-1}},{}],166:[function(t,N,V){var y=Object.prototype.toString,c=y.call("");N.exports=function(A){return typeof A=="string"||A&&typeof A=="object"&&(A instanceof String||y.call(A)===c)||!1}},{}],167:[function(t,N,V){var y=Object.create(null),c=Math.random;N.exports=function(){var A;do A=c().toString(36).slice(2);while(y[A]);return A}},{}],168:[function(t,N,V){var y=t("es5-ext/object/set-prototype-of"),c=t("es5-ext/string/#/contains"),A=t("d"),T=t("es6-symbol"),e=t("./"),a=Object.defineProperty,i;i=N.exports=function(n,r){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");e.call(this,n),r?c.call(r,"key+value")?r="key+value":c.call(r,"key")?r="key":r="value":r="value",a(this,"__kind__",A("",r))},y&&y(i,e),delete i.prototype.constructor,i.prototype=Object.create(e.prototype,{_resolve:A(function(n){return this.__kind__==="value"?this.__list__[n]:this.__kind__==="key+value"?[n,this.__list__[n]]:n})}),a(i.prototype,T.toStringTag,A("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(t,N,V){var y=t("es5-ext/function/is-arguments"),c=t("es5-ext/object/valid-callable"),A=t("es5-ext/string/is-string"),T=t("./get"),e=Array.isArray,a=Function.prototype.call,i=Array.prototype.some;N.exports=function(n,r){var v,s=arguments[2],o,b,g,d,f,m,l;if(e(n)||y(n)?v="array":A(n)?v="string":n=T(n),c(r),b=function(){g=!0},v==="array"){i.call(n,function(x){return a.call(r,s,x,b),g});return}if(v==="string"){for(f=n.length,d=0;d<f&&(m=n[d],d+1<f&&(l=m.charCodeAt(0),l>=55296&&l<=56319&&(m+=n[++d])),a.call(r,s,m,b),!g);++d);return}for(o=n.next();!o.done;){if(a.call(r,s,o.value,b),g)return;o=n.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(t,N,V){var y=t("es5-ext/function/is-arguments"),c=t("es5-ext/string/is-string"),A=t("./array"),T=t("./string"),e=t("./valid-iterable"),a=t("es6-symbol").iterator;N.exports=function(i){return typeof e(i)[a]=="function"?i[a]():y(i)?new A(i):c(i)?new T(i):new A(i)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(t,N,V){var y=t("es5-ext/array/#/clear"),c=t("es5-ext/object/assign"),A=t("es5-ext/object/valid-callable"),T=t("es5-ext/object/valid-value"),e=t("d"),a=t("d/auto-bind"),i=t("es6-symbol"),n=Object.defineProperty,r=Object.defineProperties,v;N.exports=v=function(s,o){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");r(this,{__list__:e("w",T(s)),__context__:e("w",o),__nextIndex__:e("w",0)}),o&&(A(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete v.prototype.constructor,r(v.prototype,c({_next:e(function(){var s;if(!!this.__list__){if(this.__redo__&&(s=this.__redo__.shift(),s!==void 0))return s;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:e(function(s){return this.__list__[s]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(s){if(!(s>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){n(this,"__redo__",e("c",[s]));return}this.__redo__.forEach(function(o,b){o>=s&&(this.__redo__[b]=++o)},this),this.__redo__.push(s)}}),_onDelete:e(function(s){var o;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(o=this.__redo__.indexOf(s),o!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(b,g){b>s&&(this.__redo__[g]=--b)},this)))}),_onClear:e(function(){this.__redo__&&y.call(this.__redo__),this.__nextIndex__=0})}))),n(v.prototype,i.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(t,N,V){var y=t("es5-ext/function/is-arguments"),c=t("es5-ext/object/is-value"),A=t("es5-ext/string/is-string"),T=t("es6-symbol").iterator,e=Array.isArray;N.exports=function(a){return c(a)?e(a)||A(a)||y(a)?!0:typeof a[T]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(t,N,V){var y=t("es5-ext/object/set-prototype-of"),c=t("d"),A=t("es6-symbol"),T=t("./"),e=Object.defineProperty,a;a=N.exports=function(i){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");i=String(i),T.call(this,i),e(this,"__length__",c("",i.length))},y&&y(a,T),delete a.prototype.constructor,a.prototype=Object.create(T.prototype,{_next:c(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:c(function(i){var n=this.__list__[i],r;return this.__nextIndex__===this.__length__?n:(r=n.charCodeAt(0),r>=55296&&r<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),e(a.prototype,A.toStringTag,c("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(t,N,V){var y=t("./is-iterable");N.exports=function(c){if(!y(c))throw new TypeError(c+" is not iterable");return c}},{"./is-iterable":172}],175:[function(t,N,V){N.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(t,N,V){var y=t("ext/global-this"),c={object:!0,symbol:!0};N.exports=function(){var A=y.Symbol,T;if(typeof A!="function")return!1;T=A("test symbol");try{String(T)}catch{return!1}return!(!c[typeof A.iterator]||!c[typeof A.toPrimitive]||!c[typeof A.toStringTag])}},{"ext/global-this":188}],177:[function(t,N,V){N.exports=function(y){return y?typeof y=="symbol"?!0:!y.constructor||y.constructor.name!=="Symbol"?!1:y[y.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(t,N,V){var y=t("d"),c=Object.create,A=Object.defineProperty,T=Object.prototype,e=c(null);N.exports=function(a){for(var i=0,n,r;e[a+(i||"")];)++i;return a+=i||"",e[a]=!0,n="@@"+a,A(T,n,y.gs(null,function(v){r||(r=!0,A(this,n,y(v)),r=!1)})),n}},{d:106}],179:[function(t,N,V){var y=t("d"),c=t("ext/global-this").Symbol;N.exports=function(A){return Object.defineProperties(A,{hasInstance:y("",c&&c.hasInstance||A("hasInstance")),isConcatSpreadable:y("",c&&c.isConcatSpreadable||A("isConcatSpreadable")),iterator:y("",c&&c.iterator||A("iterator")),match:y("",c&&c.match||A("match")),replace:y("",c&&c.replace||A("replace")),search:y("",c&&c.search||A("search")),species:y("",c&&c.species||A("species")),split:y("",c&&c.split||A("split")),toPrimitive:y("",c&&c.toPrimitive||A("toPrimitive")),toStringTag:y("",c&&c.toStringTag||A("toStringTag")),unscopables:y("",c&&c.unscopables||A("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(t,N,V){var y=t("d"),c=t("../../../validate-symbol"),A=Object.create(null);N.exports=function(T){return Object.defineProperties(T,{for:y(function(e){return A[e]?A[e]:A[e]=T(String(e))}),keyFor:y(function(e){var a;c(e);for(a in A)if(A[a]===e)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(t,N,V){var y=t("d"),c=t("./validate-symbol"),A=t("ext/global-this").Symbol,T=t("./lib/private/generate-name"),e=t("./lib/private/setup/standard-symbols"),a=t("./lib/private/setup/symbol-registry"),i=Object.create,n=Object.defineProperties,r=Object.defineProperty,v,s,o;if(typeof A=="function")try{String(A()),o=!0}catch{}else A=null;s=function(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return v(g)},N.exports=v=function b(g){var d;if(this instanceof b)throw new TypeError("Symbol is not a constructor");return o?A(g):(d=i(s.prototype),g=g===void 0?"":String(g),n(d,{__description__:y("",g),__name__:y("",T(g))}))},e(v),a(v),n(s.prototype,{constructor:y(v),toString:y("",function(){return this.__name__})}),n(v.prototype,{toString:y(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:y(function(){return c(this)})}),r(v.prototype,v.toPrimitive,y("",function(){var b=c(this);return typeof b=="symbol"?b:b.toString()})),r(v.prototype,v.toStringTag,y("c","Symbol")),r(s.prototype,v.toStringTag,y("c",v.prototype[v.toStringTag])),r(s.prototype,v.toPrimitive,y("c",v.prototype[v.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(t,N,V){var y=t("./is-symbol");N.exports=function(c){if(!y(c))throw new TypeError(c+" is not a symbol");return c}},{"./is-symbol":177}],183:[function(t,N,V){N.exports=t("./is-implemented")()?WeakMap:t("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(t,N,V){N.exports=function(){var y,c;if(typeof WeakMap!="function")return!1;try{y=new WeakMap([[c={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(y)!=="[object WeakMap]"||typeof y.set!="function"||y.set({},1)!==y||typeof y.delete!="function"||typeof y.has!="function"||y.get(c)!=="one")}},{}],185:[function(t,N,V){N.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(t,N,V){var y=t("es5-ext/object/is-value"),c=t("es5-ext/object/set-prototype-of"),A=t("es5-ext/object/valid-object"),T=t("es5-ext/object/valid-value"),e=t("es5-ext/string/random-uniq"),a=t("d"),i=t("es6-iterator/get"),n=t("es6-iterator/for-of"),r=t("es6-symbol").toStringTag,v=t("./is-native-implemented"),s=Array.isArray,o=Object.defineProperty,b=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf,d;N.exports=d=function(){var f=arguments[0],m;if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return m=v&&c&&WeakMap!==d?c(new WeakMap,g(this)):this,y(f)&&(s(f)||(f=i(f))),o(m,"__weakMapData__",a("c","$weakMap$"+e())),f&&n(f,function(l){T(l),m.set(l[0],l[1])}),m},v&&(c&&c(d,WeakMap),d.prototype=Object.create(WeakMap.prototype,{constructor:a(d)})),Object.defineProperties(d.prototype,{delete:a(function(f){return b.call(A(f),this.__weakMapData__)?(delete f[this.__weakMapData__],!0):!1}),get:a(function(f){if(!!b.call(A(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:a(function(f){return b.call(A(f),this.__weakMapData__)}),set:a(function(f,m){return o(A(f),this.__weakMapData__,a("c",m)),this}),toString:a(function(){return"[object WeakMap]"})}),o(d.prototype,r,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(t,N,V){var y=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};N.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return y()}try{return __global__||y()}finally{delete Object.prototype.__global__}}()},{}],188:[function(t,N,V){N.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(t,N,V){N.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(t,N,V){var y=t("is-string-blank");N.exports=function(c){var A=typeof c;if(A==="string"){var T=c;if(c=+c,c===0&&y(T))return!1}else if(A!=="number")return!1;return c-c<1}},{"is-string-blank":237}],191:[function(t,N,V){var y=t("dtype");N.exports=c;function c(A,T,e){if(!A)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(A)&&A[0]&&typeof A[0][0]=="number"){var a=A[0].length,i=A.length*a,n,r,v,s;(!T||typeof T=="string")&&(T=new(y(T||"float32"))(i+e));var o=T.length-e;if(i!==o)throw new Error("source length "+i+" ("+a+"x"+A.length+") does not match destination length "+o);for(n=0,v=e;n<A.length;n++)for(r=0;r<a;r++)T[v++]=A[n][r]===null?NaN:A[n][r]}else if(!T||typeof T=="string"){var b=y(T||"float32");if(Array.isArray(A)||T==="array")for(T=new b(A.length+e),n=0,v=e,s=T.length;v<s;v++,n++)T[v]=A[n]===null?NaN:A[n];else e===0?T=new b(A):(T=new b(A.length+e),T.set(A,e))}else T.set(A,e);return T}},{dtype:127}],192:[function(t,N,V){var y=t("css-font/stringify"),c=[32,126];N.exports=A;function A(T){T=T||{};var e=T.shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],a=T.canvas||document.createElement("canvas"),i=T.font,n=typeof T.step=="number"?[T.step,T.step]:T.step||[32,32],r=T.chars||c;if(i&&typeof i!="string"&&(i=y(i)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var v=[],s=r[0],o=0;s<=r[1];s++)v[o++]=String.fromCharCode(s);r=v}e=e.slice(),a.width=e[0],a.height=e[1];var b=a.getContext("2d");b.fillStyle="#000",b.fillRect(0,0,a.width,a.height),b.font=i,b.textAlign="center",b.textBaseline="middle",b.fillStyle="#fff";for(var g=n[0]/2,d=n[1]/2,s=0;s<r.length;s++)b.fillText(r[s],g,d),(g+=n[0])>e[0]-n[0]/2&&(g=n[0]/2,d+=n[1]);return a}},{"css-font/stringify":102}],193:[function(t,N,V){N.exports=y,y.canvas=document.createElement("canvas"),y.cache={};function y(s,a){a||(a={}),(typeof s=="string"||Array.isArray(s))&&(a.family=s);var i=Array.isArray(a.family)?a.family.join(", "):a.family;if(!i)throw Error("`family` must be defined");var n=a.size||a.fontSize||a.em||48,r=a.weight||a.fontWeight||"",v=a.style||a.fontStyle||"",s=[v,r,n].join(" ")+"px "+i,o=a.origin||"top";if(y.cache[i]&&n<=y.cache[i].em)return c(y.cache[i],o);var b=a.canvas||y.canvas,g=b.getContext("2d"),d={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},f=Math.ceil(n*1.5);b.height=f,b.width=f*.5,g.font=s;var m="H",l={top:0};g.clearRect(0,0,f,f),g.textBaseline="top",g.fillStyle="black",g.fillText(m,0,0);var x=A(g.getImageData(0,0,f,f));g.clearRect(0,0,f,f),g.textBaseline="bottom",g.fillText(m,0,f);var u=A(g.getImageData(0,0,f,f));l.lineHeight=l.bottom=f-u+x,g.clearRect(0,0,f,f),g.textBaseline="alphabetic",g.fillText(m,0,f);var M=A(g.getImageData(0,0,f,f)),w=f-M-1+x;l.baseline=l.alphabetic=w,g.clearRect(0,0,f,f),g.textBaseline="middle",g.fillText(m,0,f*.5);var p=A(g.getImageData(0,0,f,f));l.median=l.middle=f-p-1+x-f*.5,g.clearRect(0,0,f,f),g.textBaseline="hanging",g.fillText(m,0,f*.5);var _=A(g.getImageData(0,0,f,f));l.hanging=f-_-1+x-f*.5,g.clearRect(0,0,f,f),g.textBaseline="ideographic",g.fillText(m,0,f);var h=A(g.getImageData(0,0,f,f));if(l.ideographic=f-h-1+x,d.upper&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.upper,0,0),l.upper=A(g.getImageData(0,0,f,f)),l.capHeight=l.baseline-l.upper),d.lower&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.lower,0,0),l.lower=A(g.getImageData(0,0,f,f)),l.xHeight=l.baseline-l.lower),d.tittle&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.tittle,0,0),l.tittle=A(g.getImageData(0,0,f,f))),d.ascent&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.ascent,0,0),l.ascent=A(g.getImageData(0,0,f,f))),d.descent&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.descent,0,0),l.descent=T(g.getImageData(0,0,f,f))),d.overshoot){g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.overshoot,0,0);var L=T(g.getImageData(0,0,f,f));l.overshoot=L-w}for(var E in l)l[E]/=n;return l.em=n,y.cache[i]=l,c(l,o)}function c(e,a){var i={};typeof a=="string"&&(a=e[a]);for(var n in e)n!=="em"&&(i[n]=e[n]-a);return i}function A(e){for(var a=e.height,i=e.data,n=3;n<i.length;n+=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}function T(e){for(var a=e.height,i=e.data,n=i.length-1;n>0;n-=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}},{}],194:[function(t,N,V){N.exports=y;function y(c,A){if(typeof c!="string")throw new TypeError("must specify type string");if(A=A||{},typeof document>"u"&&!A.canvas)return null;var T=A.canvas||document.createElement("canvas");typeof A.width=="number"&&(T.width=A.width),typeof A.height=="number"&&(T.height=A.height);var e=A,a;try{var i=[c];c.indexOf("webgl")===0&&i.push("experimental-"+c);for(var n=0;n<i.length;n++)if(a=T.getContext(i[n],e),a)return a}catch{a=null}return a||null}},{}],195:[function(t,N,V){N.exports=y;function y(c,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=A[4],r=A[5],v=A[6],s=A[7],o=A[8],b=A[9],g=A[10],d=A[11],f=A[12],m=A[13],l=A[14],x=A[15];return c[0]=r*(g*x-d*l)-b*(v*x-s*l)+m*(v*d-s*g),c[1]=-(e*(g*x-d*l)-b*(a*x-i*l)+m*(a*d-i*g)),c[2]=e*(v*x-s*l)-r*(a*x-i*l)+m*(a*s-i*v),c[3]=-(e*(v*d-s*g)-r*(a*d-i*g)+b*(a*s-i*v)),c[4]=-(n*(g*x-d*l)-o*(v*x-s*l)+f*(v*d-s*g)),c[5]=T*(g*x-d*l)-o*(a*x-i*l)+f*(a*d-i*g),c[6]=-(T*(v*x-s*l)-n*(a*x-i*l)+f*(a*s-i*v)),c[7]=T*(v*d-s*g)-n*(a*d-i*g)+o*(a*s-i*v),c[8]=n*(b*x-d*m)-o*(r*x-s*m)+f*(r*d-s*b),c[9]=-(T*(b*x-d*m)-o*(e*x-i*m)+f*(e*d-i*b)),c[10]=T*(r*x-s*m)-n*(e*x-i*m)+f*(e*s-i*r),c[11]=-(T*(r*d-s*b)-n*(e*d-i*b)+o*(e*s-i*r)),c[12]=-(n*(b*l-g*m)-o*(r*l-v*m)+f*(r*g-v*b)),c[13]=T*(b*l-g*m)-o*(e*l-a*m)+f*(e*g-a*b),c[14]=-(T*(r*l-v*m)-n*(e*l-a*m)+f*(e*v-a*r)),c[15]=T*(r*g-v*b)-n*(e*g-a*b)+o*(e*v-a*r),c}},{}],196:[function(t,N,V){N.exports=y;function y(c){var A=new Float32Array(16);return A[0]=c[0],A[1]=c[1],A[2]=c[2],A[3]=c[3],A[4]=c[4],A[5]=c[5],A[6]=c[6],A[7]=c[7],A[8]=c[8],A[9]=c[9],A[10]=c[10],A[11]=c[11],A[12]=c[12],A[13]=c[13],A[14]=c[14],A[15]=c[15],A}},{}],197:[function(t,N,V){N.exports=y;function y(c,A){return c[0]=A[0],c[1]=A[1],c[2]=A[2],c[3]=A[3],c[4]=A[4],c[5]=A[5],c[6]=A[6],c[7]=A[7],c[8]=A[8],c[9]=A[9],c[10]=A[10],c[11]=A[11],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15],c}},{}],198:[function(t,N,V){N.exports=y;function y(){var c=new Float32Array(16);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],199:[function(t,N,V){N.exports=y;function y(c){var A=c[0],T=c[1],e=c[2],a=c[3],i=c[4],n=c[5],r=c[6],v=c[7],s=c[8],o=c[9],b=c[10],g=c[11],d=c[12],f=c[13],m=c[14],l=c[15],x=A*n-T*i,u=A*r-e*i,M=A*v-a*i,w=T*r-e*n,p=T*v-a*n,_=e*v-a*r,h=s*f-o*d,L=s*m-b*d,E=s*l-g*d,S=o*m-b*f,P=o*l-g*f,F=b*l-g*m;return x*F-u*P+M*S+w*E-p*L+_*h}},{}],200:[function(t,N,V){N.exports=y;function y(c,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=T+T,r=e+e,v=a+a,s=T*n,o=e*n,b=e*r,g=a*n,d=a*r,f=a*v,m=i*n,l=i*r,x=i*v;return c[0]=1-b-f,c[1]=o+x,c[2]=g-l,c[3]=0,c[4]=o-x,c[5]=1-s-f,c[6]=d+m,c[7]=0,c[8]=g+l,c[9]=d-m,c[10]=1-s-b,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],201:[function(t,N,V){N.exports=y;function y(c,A,T){var e,a,i,n=T[0],r=T[1],v=T[2],s=Math.sqrt(n*n+r*r+v*v);return Math.abs(s)<1e-6?null:(s=1/s,n*=s,r*=s,v*=s,e=Math.sin(A),a=Math.cos(A),i=1-a,c[0]=n*n*i+a,c[1]=r*n*i+v*e,c[2]=v*n*i-r*e,c[3]=0,c[4]=n*r*i-v*e,c[5]=r*r*i+a,c[6]=v*r*i+n*e,c[7]=0,c[8]=n*v*i+r*e,c[9]=r*v*i-n*e,c[10]=v*v*i+a,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}},{}],202:[function(t,N,V){N.exports=y;function y(c,A,T){var e=A[0],a=A[1],i=A[2],n=A[3],r=e+e,v=a+a,s=i+i,o=e*r,b=e*v,g=e*s,d=a*v,f=a*s,m=i*s,l=n*r,x=n*v,u=n*s;return c[0]=1-(d+m),c[1]=b+u,c[2]=g-x,c[3]=0,c[4]=b-u,c[5]=1-(o+m),c[6]=f+l,c[7]=0,c[8]=g+x,c[9]=f-l,c[10]=1-(o+d),c[11]=0,c[12]=T[0],c[13]=T[1],c[14]=T[2],c[15]=1,c}},{}],203:[function(t,N,V){N.exports=y;function y(c,A){return c[0]=A[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=A[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=A[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],204:[function(t,N,V){N.exports=y;function y(c,A){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=A[0],c[13]=A[1],c[14]=A[2],c[15]=1,c}},{}],205:[function(t,N,V){N.exports=y;function y(c,A){var T=Math.sin(A),e=Math.cos(A);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=e,c[6]=T,c[7]=0,c[8]=0,c[9]=-T,c[10]=e,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],206:[function(t,N,V){N.exports=y;function y(c,A){var T=Math.sin(A),e=Math.cos(A);return c[0]=e,c[1]=0,c[2]=-T,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=T,c[9]=0,c[10]=e,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],207:[function(t,N,V){N.exports=y;function y(c,A){var T=Math.sin(A),e=Math.cos(A);return c[0]=e,c[1]=T,c[2]=0,c[3]=0,c[4]=-T,c[5]=e,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],208:[function(t,N,V){N.exports=y;function y(c,A,T,e,a,i,n){var r=1/(T-A),v=1/(a-e),s=1/(i-n);return c[0]=i*2*r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=i*2*v,c[6]=0,c[7]=0,c[8]=(T+A)*r,c[9]=(a+e)*v,c[10]=(n+i)*s,c[11]=-1,c[12]=0,c[13]=0,c[14]=n*i*2*s,c[15]=0,c}},{}],209:[function(t,N,V){N.exports=y;function y(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],210:[function(t,N,V){N.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(t,N,V){N.exports=y;function y(c,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=A[4],r=A[5],v=A[6],s=A[7],o=A[8],b=A[9],g=A[10],d=A[11],f=A[12],m=A[13],l=A[14],x=A[15],u=T*r-e*n,M=T*v-a*n,w=T*s-i*n,p=e*v-a*r,_=e*s-i*r,h=a*s-i*v,L=o*m-b*f,E=o*l-g*f,S=o*x-d*f,P=b*l-g*m,F=b*x-d*m,I=g*x-d*l,D=u*I-M*F+w*P+p*S-_*E+h*L;return D?(D=1/D,c[0]=(r*I-v*F+s*P)*D,c[1]=(a*F-e*I-i*P)*D,c[2]=(m*h-l*_+x*p)*D,c[3]=(g*_-b*h-d*p)*D,c[4]=(v*S-n*I-s*E)*D,c[5]=(T*I-a*S+i*E)*D,c[6]=(l*w-f*h-x*M)*D,c[7]=(o*h-g*w+d*M)*D,c[8]=(n*F-r*S+s*L)*D,c[9]=(e*S-T*F-i*L)*D,c[10]=(f*_-m*w+x*u)*D,c[11]=(b*w-o*_-d*u)*D,c[12]=(r*E-n*P-v*L)*D,c[13]=(T*P-e*E+a*L)*D,c[14]=(m*M-f*p-l*u)*D,c[15]=(o*p-b*M+g*u)*D,c):null}},{}],212:[function(t,N,V){var y=t("./identity");N.exports=c;function c(A,T,e,a){var i,n,r,v,s,o,b,g,d,f,m=T[0],l=T[1],x=T[2],u=a[0],M=a[1],w=a[2],p=e[0],_=e[1],h=e[2];return Math.abs(m-p)<1e-6&&Math.abs(l-_)<1e-6&&Math.abs(x-h)<1e-6?y(A):(b=m-p,g=l-_,d=x-h,f=1/Math.sqrt(b*b+g*g+d*d),b*=f,g*=f,d*=f,i=M*d-w*g,n=w*b-u*d,r=u*g-M*b,f=Math.sqrt(i*i+n*n+r*r),f?(f=1/f,i*=f,n*=f,r*=f):(i=0,n=0,r=0),v=g*r-d*n,s=d*i-b*r,o=b*n-g*i,f=Math.sqrt(v*v+s*s+o*o),f?(f=1/f,v*=f,s*=f,o*=f):(v=0,s=0,o=0),A[0]=i,A[1]=v,A[2]=b,A[3]=0,A[4]=n,A[5]=s,A[6]=g,A[7]=0,A[8]=r,A[9]=o,A[10]=d,A[11]=0,A[12]=-(i*m+n*l+r*x),A[13]=-(v*m+s*l+o*x),A[14]=-(b*m+g*l+d*x),A[15]=1,A)}},{"./identity":209}],213:[function(t,N,V){N.exports=y;function y(c,A,T){var e=A[0],a=A[1],i=A[2],n=A[3],r=A[4],v=A[5],s=A[6],o=A[7],b=A[8],g=A[9],d=A[10],f=A[11],m=A[12],l=A[13],x=A[14],u=A[15],M=T[0],w=T[1],p=T[2],_=T[3];return c[0]=M*e+w*r+p*b+_*m,c[1]=M*a+w*v+p*g+_*l,c[2]=M*i+w*s+p*d+_*x,c[3]=M*n+w*o+p*f+_*u,M=T[4],w=T[5],p=T[6],_=T[7],c[4]=M*e+w*r+p*b+_*m,c[5]=M*a+w*v+p*g+_*l,c[6]=M*i+w*s+p*d+_*x,c[7]=M*n+w*o+p*f+_*u,M=T[8],w=T[9],p=T[10],_=T[11],c[8]=M*e+w*r+p*b+_*m,c[9]=M*a+w*v+p*g+_*l,c[10]=M*i+w*s+p*d+_*x,c[11]=M*n+w*o+p*f+_*u,M=T[12],w=T[13],p=T[14],_=T[15],c[12]=M*e+w*r+p*b+_*m,c[13]=M*a+w*v+p*g+_*l,c[14]=M*i+w*s+p*d+_*x,c[15]=M*n+w*o+p*f+_*u,c}},{}],214:[function(t,N,V){N.exports=y;function y(c,A,T,e,a,i,n){var r=1/(A-T),v=1/(e-a),s=1/(i-n);return c[0]=-2*r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*v,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*s,c[11]=0,c[12]=(A+T)*r,c[13]=(a+e)*v,c[14]=(n+i)*s,c[15]=1,c}},{}],215:[function(t,N,V){N.exports=y;function y(c,A,T,e,a){var i=1/Math.tan(A/2),n=1/(e-a);return c[0]=i/T,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=i,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=(a+e)*n,c[11]=-1,c[12]=0,c[13]=0,c[14]=2*a*e*n,c[15]=0,c}},{}],216:[function(t,N,V){N.exports=y;function y(c,A,T,e){var a=Math.tan(A.upDegrees*Math.PI/180),i=Math.tan(A.downDegrees*Math.PI/180),n=Math.tan(A.leftDegrees*Math.PI/180),r=Math.tan(A.rightDegrees*Math.PI/180),v=2/(n+r),s=2/(a+i);return c[0]=v,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s,c[6]=0,c[7]=0,c[8]=-((n-r)*v*.5),c[9]=(a-i)*s*.5,c[10]=e/(T-e),c[11]=-1,c[12]=0,c[13]=0,c[14]=e*T/(T-e),c[15]=0,c}},{}],217:[function(t,N,V){N.exports=y;function y(c,A,T,e){var a=e[0],i=e[1],n=e[2],r=Math.sqrt(a*a+i*i+n*n),v,s,o,b,g,d,f,m,l,x,u,M,w,p,_,h,L,E,S,P,F,I,D,R;return Math.abs(r)<1e-6?null:(r=1/r,a*=r,i*=r,n*=r,v=Math.sin(T),s=Math.cos(T),o=1-s,b=A[0],g=A[1],d=A[2],f=A[3],m=A[4],l=A[5],x=A[6],u=A[7],M=A[8],w=A[9],p=A[10],_=A[11],h=a*a*o+s,L=i*a*o+n*v,E=n*a*o-i*v,S=a*i*o-n*v,P=i*i*o+s,F=n*i*o+a*v,I=a*n*o+i*v,D=i*n*o-a*v,R=n*n*o+s,c[0]=b*h+m*L+M*E,c[1]=g*h+l*L+w*E,c[2]=d*h+x*L+p*E,c[3]=f*h+u*L+_*E,c[4]=b*S+m*P+M*F,c[5]=g*S+l*P+w*F,c[6]=d*S+x*P+p*F,c[7]=f*S+u*P+_*F,c[8]=b*I+m*D+M*R,c[9]=g*I+l*D+w*R,c[10]=d*I+x*D+p*R,c[11]=f*I+u*D+_*R,A!==c&&(c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c)}},{}],218:[function(t,N,V){N.exports=y;function y(c,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[4],n=A[5],r=A[6],v=A[7],s=A[8],o=A[9],b=A[10],g=A[11];return A!==c&&(c[0]=A[0],c[1]=A[1],c[2]=A[2],c[3]=A[3],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[4]=i*a+s*e,c[5]=n*a+o*e,c[6]=r*a+b*e,c[7]=v*a+g*e,c[8]=s*a-i*e,c[9]=o*a-n*e,c[10]=b*a-r*e,c[11]=g*a-v*e,c}},{}],219:[function(t,N,V){N.exports=y;function y(c,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[0],n=A[1],r=A[2],v=A[3],s=A[8],o=A[9],b=A[10],g=A[11];return A!==c&&(c[4]=A[4],c[5]=A[5],c[6]=A[6],c[7]=A[7],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[0]=i*a-s*e,c[1]=n*a-o*e,c[2]=r*a-b*e,c[3]=v*a-g*e,c[8]=i*e+s*a,c[9]=n*e+o*a,c[10]=r*e+b*a,c[11]=v*e+g*a,c}},{}],220:[function(t,N,V){N.exports=y;function y(c,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[0],n=A[1],r=A[2],v=A[3],s=A[4],o=A[5],b=A[6],g=A[7];return A!==c&&(c[8]=A[8],c[9]=A[9],c[10]=A[10],c[11]=A[11],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[0]=i*a+s*e,c[1]=n*a+o*e,c[2]=r*a+b*e,c[3]=v*a+g*e,c[4]=s*a-i*e,c[5]=o*a-n*e,c[6]=b*a-r*e,c[7]=g*a-v*e,c}},{}],221:[function(t,N,V){N.exports=y;function y(c,A,T){var e=T[0],a=T[1],i=T[2];return c[0]=A[0]*e,c[1]=A[1]*e,c[2]=A[2]*e,c[3]=A[3]*e,c[4]=A[4]*a,c[5]=A[5]*a,c[6]=A[6]*a,c[7]=A[7]*a,c[8]=A[8]*i,c[9]=A[9]*i,c[10]=A[10]*i,c[11]=A[11]*i,c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15],c}},{}],222:[function(t,N,V){N.exports=y;function y(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}},{}],223:[function(t,N,V){N.exports=y;function y(c,A,T){var e=T[0],a=T[1],i=T[2],n,r,v,s,o,b,g,d,f,m,l,x;return A===c?(c[12]=A[0]*e+A[4]*a+A[8]*i+A[12],c[13]=A[1]*e+A[5]*a+A[9]*i+A[13],c[14]=A[2]*e+A[6]*a+A[10]*i+A[14],c[15]=A[3]*e+A[7]*a+A[11]*i+A[15]):(n=A[0],r=A[1],v=A[2],s=A[3],o=A[4],b=A[5],g=A[6],d=A[7],f=A[8],m=A[9],l=A[10],x=A[11],c[0]=n,c[1]=r,c[2]=v,c[3]=s,c[4]=o,c[5]=b,c[6]=g,c[7]=d,c[8]=f,c[9]=m,c[10]=l,c[11]=x,c[12]=n*e+o*a+f*i+A[12],c[13]=r*e+b*a+m*i+A[13],c[14]=v*e+g*a+l*i+A[14],c[15]=s*e+d*a+x*i+A[15]),c}},{}],224:[function(t,N,V){N.exports=y;function y(c,A){if(c===A){var T=A[1],e=A[2],a=A[3],i=A[6],n=A[7],r=A[11];c[1]=A[4],c[2]=A[8],c[3]=A[12],c[4]=T,c[6]=A[9],c[7]=A[13],c[8]=e,c[9]=i,c[11]=A[14],c[12]=a,c[13]=n,c[14]=r}else c[0]=A[0],c[1]=A[4],c[2]=A[8],c[3]=A[12],c[4]=A[1],c[5]=A[5],c[6]=A[9],c[7]=A[13],c[8]=A[2],c[9]=A[6],c[10]=A[10],c[11]=A[14],c[12]=A[3],c[13]=A[7],c[14]=A[11],c[15]=A[15];return c}},{}],225:[function(t,N,V){var y=t("css-font"),c=t("pick-by-alias"),A=t("regl"),T=t("gl-util/context"),e=t("es6-weak-map"),a=t("color-normalize"),i=t("font-atlas"),n=t("typedarray-pool"),r=t("parse-rect"),v=t("is-plain-obj"),s=t("parse-unit"),o=t("to-px"),b=t("detect-kerning"),g=t("object-assign"),d=t("font-measure"),f=t("flatten-vertex-data"),m=t("bit-twiddle"),l=m.nextPow2,x=new e,u=!1;if(document.body){var M=document.body.appendChild(document.createElement("div"));M.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(M).fontStretch&&(u=!0),document.body.removeChild(M)}var w=function(h){p(h)?(h={regl:h},this.gl=h.regl._gl):this.gl=T(h),this.shader=x.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=h.regl||A({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(v(h)?h:{})};w.prototype.createShader=function(){var h=this.regl,L=h({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:h.prop("count"),offset:h.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:h.this("sizeBuffer")},width:{offset:0,stride:8,buffer:h.this("sizeBuffer")},char:h.this("charBuffer"),position:h.this("position")},uniforms:{atlasSize:function(S,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(S,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(S,P){return P.atlas.texture},charStep:function(S,P){return P.atlas.step},em:function(S,P){return P.atlas.em},color:h.prop("color"),opacity:h.prop("opacity"),viewport:h.this("viewportArray"),scale:h.this("scale"),align:h.prop("align"),baseline:h.prop("baseline"),translate:h.this("translate"),positionOffset:h.prop("positionOffset")},primitive:"points",viewport:h.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),E={};return{regl:h,draw:L,atlas:E}},w.prototype.update=function(h){var L=this;if(typeof h=="string")h={text:h};else if(!h)return;h=c(h,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),h.opacity!=null&&(Array.isArray(h.opacity)?this.opacity=h.opacity.map(function(Ae){return parseFloat(Ae)}):this.opacity=parseFloat(h.opacity)),h.viewport!=null&&(this.viewport=r(h.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),h.kerning!=null&&(this.kerning=h.kerning),h.offset!=null&&(typeof h.offset=="number"&&(h.offset=[h.offset,0]),this.positionOffset=f(h.offset)),h.direction&&(this.direction=h.direction),h.range&&(this.range=h.range,this.scale=[1/(h.range[2]-h.range[0]),1/(h.range[3]-h.range[1])],this.translate=[-h.range[0],-h.range[1]]),h.scale&&(this.scale=h.scale),h.translate&&(this.translate=h.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!h.font&&(h.font=w.baseFontSize+"px sans-serif");var E=!1,S=!1;if(h.font&&(Array.isArray(h.font)?h.font:[h.font]).forEach(function(Ae,Le){if(typeof Ae=="string")try{Ae=y.parse(Ae)}catch{Ae=y.parse(w.baseFontSize+"px "+Ae)}else Ae=y.parse(y.stringify(Ae));var Ze=y.stringify({size:w.baseFontSize,family:Ae.family,stretch:u?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style}),We=s(Ae.size),ze=Math.round(We[0]*o(We[1]));if(ze!==L.fontSize[Le]&&(S=!0,L.fontSize[Le]=ze),(!L.font[Le]||Ze!=L.font[Le].baseString)&&(E=!0,L.font[Le]=w.fonts[Ze],!L.font[Le])){var Ie=Ae.family.join(", "),Ve=[Ae.style];Ae.style!=Ae.variant&&Ve.push(Ae.variant),Ae.variant!=Ae.weight&&Ve.push(Ae.weight),u&&Ae.weight!=Ae.stretch&&Ve.push(Ae.stretch),L.font[Le]={baseString:Ze,family:Ie,weight:Ae.weight,stretch:Ae.stretch,style:Ae.style,variant:Ae.variant,width:{},kerning:{},metrics:d(Ie,{origin:"top",fontSize:w.baseFontSize,fontStyle:Ve.join(" ")})},w.fonts[Ze]=L.font[Le]}}),(E||S)&&this.font.forEach(function(Ae,Le){var Ze=y.stringify({size:L.fontSize[Le],family:Ae.family,stretch:u?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style});if(L.fontAtlas[Le]=L.shader.atlas[Ze],!L.fontAtlas[Le]){var We=Ae.metrics;L.shader.atlas[Ze]=L.fontAtlas[Le]={fontString:Ze,step:Math.ceil(L.fontSize[Le]*We.bottom*.5)*2,em:L.fontSize[Le],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}h.text==null&&(h.text=L.text)}),typeof h.text=="string"&&h.position&&h.position.length>2){for(var P=Array(h.position.length*.5),F=0;F<P.length;F++)P[F]=h.text;h.text=P}var I;if(h.text!=null||E){if(this.textOffsets=[0],Array.isArray(h.text)){this.count=h.text[0].length,this.counts=[this.count];for(var D=1;D<h.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+h.text[D-1].length,this.count+=h.text[D].length,this.counts.push(h.text[D].length);this.text=h.text.join("")}else this.text=h.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(Ae,Le){w.atlasContext.font=Ae.baseString;for(var Ze=L.fontAtlas[Le],We=0;We<L.text.length;We++){var ze=L.text.charAt(We);if(Ze.ids[ze]==null&&(Ze.ids[ze]=Ze.chars.length,Ze.chars.push(ze),I.push(ze)),Ae.width[ze]==null&&(Ae.width[ze]=w.atlasContext.measureText(ze).width/w.baseFontSize,L.kerning)){var Ie=[];for(var Ve in Ae.width)Ie.push(Ve+ze,ze+Ve);g(Ae.kerning,b(Ae.family,{pairs:Ie}))}}})}if(h.position)if(h.position.length>2){for(var R=!h.position[0].length,O=n.mallocFloat(this.count*2),z=0,G=0;z<this.counts.length;z++){var Y=this.counts[z];if(R)for(var ee=0;ee<Y;ee++)O[G++]=h.position[z*2],O[G++]=h.position[z*2+1];else for(var j=0;j<Y;j++)O[G++]=h.position[z][0],O[G++]=h.position[z][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),n.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:h.position};if(h.text||E){var X=n.mallocUint8(this.count),ae=n.mallocFloat(this.count*2);this.textWidth=[];for(var he=0,K=0;he<this.counts.length;he++){for(var J=this.counts[he],U=this.font[he]||this.font[0],H=this.fontAtlas[he]||this.fontAtlas[0],q=0;q<J;q++){var re=this.text.charAt(K),Z=this.text.charAt(K-1);if(X[K]=H.ids[re],ae[K*2]=U.width[re],q){var Q=ae[K*2-2],ie=ae[K*2],oe=ae[K*2-1],ne=oe+Q*.5+ie*.5;if(this.kerning){var le=U.kerning[Z+re];le&&(ne+=le*.001)}ae[K*2+1]=ne}else ae[K*2+1]=ae[K*2]*.5;K++}this.textWidth.push(ae.length?ae[K*2-2]*.5+ae[K*2-1]:0)}h.align||(h.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:ae,type:"float",usage:"stream"}),n.freeUint8(X),n.freeFloat(ae),I.length&&this.font.forEach(function(Ae,Le){var Ze=L.fontAtlas[Le],We=Ze.step,ze=Math.floor(w.maxAtlasSize/We),Ie=Math.min(ze,Ze.chars.length),Ve=Math.ceil(Ze.chars.length/Ie),dt=l(Ie*We),Ft=l(Ve*We);Ze.width=dt,Ze.height=Ft,Ze.rows=Ve,Ze.cols=Ie,Ze.em&&Ze.texture({data:i({canvas:w.atlasCanvas,font:Ze.fontString,chars:Ze.chars,shape:[dt,Ft],step:[We,We]})})})}if(h.align&&(this.align=h.align,this.alignOffset=this.textWidth.map(function(Ae,Le){var Ze=Array.isArray(L.align)?L.align.length>1?L.align[Le]:L.align[0]:L.align;if(typeof Ze=="number")return Ze;switch(Ze){case"right":case"end":return-Ae;case"center":case"centre":case"middle":return-Ae*.5}return 0})),this.baseline==null&&h.baseline==null&&(h.baseline=0),h.baseline!=null&&(this.baseline=h.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Ae,Le){var Ze=(L.font[Le]||L.font[0]).metrics,We=0;return We+=Ze.bottom*.5,typeof Ae=="number"?We+=Ae-Ze.baseline:We+=-Ze[Ae],We*=-1,We})),h.color!=null)if(h.color||(h.color="transparent"),typeof h.color=="string"||!isNaN(h.color))this.color=a(h.color,"uint8");else{var _e;if(typeof h.color[0]=="number"&&h.color.length>this.counts.length){var fe=h.color.length;_e=n.mallocUint8(fe);for(var ye=(h.color.subarray||h.color.slice).bind(h.color),xe=0;xe<fe;xe+=4)_e.set(a(ye(xe,xe+4),"uint8"),xe)}else{var me=h.color.length;_e=n.mallocUint8(me*4);for(var be=0;be<me;be++)_e.set(a(h.color[be]||0,"uint8"),be*4)}this.color=_e}if(h.position||h.text||h.color||h.baseline||h.align||h.font||h.offset||h.opacity){var ke=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(ke){var De=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(De);for(var He=0;He<this.batch.length;He++)this.batch[He]={count:this.counts.length>1?this.counts[He]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[He]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(He*4,He*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[He]:this.opacity,baseline:this.baselineOffset[He]!=null?this.baselineOffset[He]:this.baselineOffset[0],align:this.align?this.alignOffset[He]!=null?this.alignOffset[He]:this.alignOffset[0]:0,atlas:this.fontAtlas[He]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(He*2,He*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={};function p(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer}N.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(t,N,V){(function(y){(function(){var c=t("pick-by-alias");N.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},T(r)?r={container:r}:e(r)?r={container:r}:a(r)?r={gl:r}:r=c(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=y.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var v=document.querySelector(r.container);if(!v)throw Error("Element "+r.container+" is not found");r.container=v}T(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=i(),r.container.appendChild(r.canvas),A(r))}else if(!r.canvas)if(typeof document<"u")r.container=document.body||document.documentElement,r.canvas=i(),r.container.appendChild(r.canvas),A(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{r.gl=r.canvas.getContext(s,r.attrs)}catch{}return r.gl}),r.gl};function A(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*y.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*y.innerHeight);else{var r=n.container.getBoundingClientRect();n.canvas.width=n.width||r.right-r.left,n.canvas.height=n.height||r.bottom-r.top}}function T(n){return typeof n.getContext=="function"&&"width"in n&&"height"in n}function e(n){return typeof n.nodeName=="string"&&typeof n.appendChild=="function"&&typeof n.getBoundingClientRect=="function"}function a(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}function i(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(t,N,V){N.exports=function(y){typeof y=="string"&&(y=[y]);for(var c=[].slice.call(arguments,1),A=[],T=0;T<y.length-1;T++)A.push(y[T],c[T]||"");return A.push(y[T]),A.join("")}},{}],228:[function(t,N,V){(function(y){(function(){var c=t("is-browser"),A;typeof y.matchMedia=="function"?A=!y.matchMedia("(hover: none)").matches:A=c,N.exports=A}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(t,N,V){var y=t("is-browser");function c(){var A=!1;try{var T=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch{A=!1}return A}N.exports=y&&c()},{"is-browser":232}],230:[function(t,N,V){V.read=function(y,c,A,T,e){var a,i,n=e*8-T-1,r=(1<<n)-1,v=r>>1,s=-7,o=A?e-1:0,b=A?-1:1,g=y[c+o];for(o+=b,a=g&(1<<-s)-1,g>>=-s,s+=n;s>0;a=a*256+y[c+o],o+=b,s-=8);for(i=a&(1<<-s)-1,a>>=-s,s+=T;s>0;i=i*256+y[c+o],o+=b,s-=8);if(a===0)a=1-v;else{if(a===r)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,T),a=a-v}return(g?-1:1)*i*Math.pow(2,a-T)},V.write=function(y,c,A,T,e,a){var i,n,r,v=a*8-e-1,s=(1<<v)-1,o=s>>1,b=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=T?0:a-1,d=T?1:-1,f=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(n=isNaN(c)?1:0,i=s):(i=Math.floor(Math.log(c)/Math.LN2),c*(r=Math.pow(2,-i))<1&&(i--,r*=2),i+o>=1?c+=b/r:c+=b*Math.pow(2,1-o),c*r>=2&&(i++,r/=2),i+o>=s?(n=0,i=s):i+o>=1?(n=(c*r-1)*Math.pow(2,e),i=i+o):(n=c*Math.pow(2,o-1)*Math.pow(2,e),i=0));e>=8;y[A+g]=n&255,g+=d,n/=256,e-=8);for(i=i<<e|n,v+=e;v>0;y[A+g]=i&255,g+=d,i/=256,v-=8);y[A+g-d]|=f*128}},{}],231:[function(t,N,V){typeof Object.create=="function"?N.exports=function(c,A){A&&(c.super_=A,c.prototype=Object.create(A.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:N.exports=function(c,A){if(A){c.super_=A;var T=function(){};T.prototype=A.prototype,c.prototype=new T,c.prototype.constructor=c}}},{}],232:[function(t,N,V){N.exports=!0},{}],233:[function(t,N,V){N.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(t,N,V){N.exports=A,N.exports.isMobile=A,N.exports.default=A;var y=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function A(T){T||(T={});var e=T.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var a=T.tablet?c.test(e):y.test(e);return!a&&T.tablet&&T.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(t,N,V){N.exports=function(y){var c=typeof y;return y!==null&&(c==="object"||c==="function")}},{}],236:[function(t,N,V){var y=Object.prototype.toString;N.exports=function(c){var A;return y.call(c)==="[object Object]"&&(A=Object.getPrototypeOf(c),A===null||A===Object.getPrototypeOf({}))}},{}],237:[function(t,N,V){N.exports=function(y){for(var c=y.length,A,T=0;T<c;T++)if(A=y.charCodeAt(T),(A<9||A>13)&&A!==32&&A!==133&&A!==160&&A!==5760&&A!==6158&&(A<8192||A>8205)&&A!==8232&&A!==8233&&A!==8239&&A!==8287&&A!==8288&&A!==12288&&A!==65279)return!1;return!0}},{}],238:[function(t,N,V){N.exports=function(c){return typeof c!="string"?!1:(c=c.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(c)&&/[\dz]$/i.test(c)&&c.length>4))}},{}],239:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?N.exports=c():(y=y||self,y.mapboxgl=c())})(this,function(){var y,c,A;function T(e,a){if(!y)y=a;else if(!c)c=a;else{var i="var sharedChunk = {}; ("+y+")(sharedChunk); ("+c+")(sharedChunk);",n={};y(n),A=a(n),A.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}return T(["exports"],function(e){function a(k,C){return C={exports:{}},k(C,C.exports),C.exports}var i="1.10.1",n=r;function r(k,C,B,te){this.cx=3*k,this.bx=3*(B-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*(te-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=te,this.p2x=B,this.p2y=te}r.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},r.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},r.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},r.prototype.solveCurveX=function(k,C){typeof C>"u"&&(C=1e-6);var B,te,pe,we,Me;for(pe=k,Me=0;Me<8;Me++){if(we=this.sampleCurveX(pe)-k,Math.abs(we)<C)return pe;var Ne=this.sampleCurveDerivativeX(pe);if(Math.abs(Ne)<1e-6)break;pe=pe-we/Ne}if(B=0,te=1,pe=k,pe<B)return B;if(pe>te)return te;for(;B<te;){if(we=this.sampleCurveX(pe),Math.abs(we-k)<C)return pe;k>we?B=pe:te=pe,pe=(te-B)*.5+B}return pe},r.prototype.solve=function(k,C){return this.sampleCurveY(this.solveCurveX(k,C))};var v=s;function s(k,C){this.x=k,this.y=C}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,C){return this.clone()._rotateAround(k,C)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var C=k.x-this.x,B=k.y-this.y;return C*C+B*B},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,C){return Math.atan2(this.x*C-this.y*k,this.x*k+this.y*C)},_matMult:function(k){var C=k[0]*this.x+k[1]*this.y,B=k[2]*this.x+k[3]*this.y;return this.x=C,this.y=B,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var C=Math.cos(k),B=Math.sin(k),te=C*this.x-B*this.y,pe=B*this.x+C*this.y;return this.x=te,this.y=pe,this},_rotateAround:function(k,C){var B=Math.cos(k),te=Math.sin(k),pe=C.x+B*(this.x-C.x)-te*(this.y-C.y),we=C.y+te*(this.x-C.x)+B*(this.y-C.y);return this.x=pe,this.y=we,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(k){return k instanceof s?k:Array.isArray(k)?new s(k[0],k[1]):k};function o(k,C){if(Array.isArray(k)){if(!Array.isArray(C)||k.length!==C.length)return!1;for(var B=0;B<k.length;B++)if(!o(k[B],C[B]))return!1;return!0}if(typeof k=="object"&&k!==null&&C!==null){if(typeof C!="object")return!1;var te=Object.keys(k);if(te.length!==Object.keys(C).length)return!1;for(var pe in k)if(!o(k[pe],C[pe]))return!1;return!0}return k===C}function b(k){if(k<=0)return 0;if(k>=1)return 1;var C=k*k,B=C*k;return 4*(k<.5?B:3*(k-C)+B-.75)}function g(k,C,B,te){var pe=new n(k,C,B,te);return function(we){return pe.solve(we)}}var d=g(.25,.1,.25,1);function f(k,C,B){return Math.min(B,Math.max(C,k))}function m(k,C,B){var te=B-C,pe=((k-C)%te+te)%te+C;return pe===C?B:pe}function l(k,C,B){if(!k.length)return B(null,[]);var te=k.length,pe=new Array(k.length),we=null;k.forEach(function(Me,Ne){C(Me,function(rt,vt){rt&&(we=rt),pe[Ne]=vt,--te===0&&B(we,pe)})})}function x(k){var C=[];for(var B in k)C.push(k[B]);return C}function u(k,C){var B=[];for(var te in k)te in C||B.push(te);return B}function M(k){for(var C=[],B=arguments.length-1;B-- >0;)C[B]=arguments[B+1];for(var te=0,pe=C;te<pe.length;te+=1){var we=pe[te];for(var Me in we)k[Me]=we[Me]}return k}function w(k,C){for(var B={},te=0;te<C.length;te++){var pe=C[te];pe in k&&(B[pe]=k[pe])}return B}var p=1;function _(){return p++}function h(){function k(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,k)}return k()}function L(k){return k?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(k):!1}function E(k,C){k.forEach(function(B){!C[B]||(C[B]=C[B].bind(C))})}function S(k,C){return k.indexOf(C,k.length-C.length)!==-1}function P(k,C,B){var te={};for(var pe in k)te[pe]=C.call(B||this,k[pe],pe,k);return te}function F(k,C,B){var te={};for(var pe in k)C.call(B||this,k[pe],pe,k)&&(te[pe]=k[pe]);return te}function I(k){return Array.isArray(k)?k.map(I):typeof k=="object"&&k?P(k,I):k}function D(k,C){for(var B=0;B<k.length;B++)if(C.indexOf(k[B])>=0)return!0;return!1}var R={};function O(k){R[k]||(typeof console<"u"&&console.warn(k),R[k]=!0)}function z(k,C,B){return(B.y-k.y)*(C.x-k.x)>(C.y-k.y)*(B.x-k.x)}function G(k){for(var C=0,B=0,te=k.length,pe=te-1,we=void 0,Me=void 0;B<te;pe=B++)we=k[B],Me=k[pe],C+=(Me.x-we.x)*(we.y+Me.y);return C}function Y(k){var C=k[0],B=k[1],te=k[2];return B+=90,B*=Math.PI/180,te*=Math.PI/180,{x:C*Math.cos(B)*Math.sin(te),y:C*Math.sin(B)*Math.sin(te),z:C*Math.cos(te)}}function ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function j(k){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,B={};if(k.replace(C,function(pe,we,Me,Ne){var rt=Me||Ne;return B[we]=rt?rt.toLowerCase():!0,""}),B["max-age"]){var te=parseInt(B["max-age"],10);isNaN(te)?delete B["max-age"]:B["max-age"]=te}return B}var X=null;function ae(k){if(X==null){var C=k.navigator?k.navigator.userAgent:null;X=!!k.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return X}function he(k){try{var C=self[k];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function K(k){return self.btoa(encodeURIComponent(k).replace(/%([0-9A-F]{2})/g,function(C,B){return String.fromCharCode(Number("0x"+B))}))}function J(k){return decodeURIComponent(self.atob(k).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var U=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),H=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,re,Z,Q={now:U,frame:function(C){var B=H(C);return{cancel:function(){return q(B)}}},getImageData:function(C,B){B===void 0&&(B=0);var te=self.document.createElement("canvas"),pe=te.getContext("2d");if(!pe)throw new Error("failed to create canvas 2d context");return te.width=C.width,te.height=C.height,pe.drawImage(C,0,0,C.width,C.height),pe.getImageData(-B,-B,C.width+2*B,C.height+2*B)},resolveURL:function(C){return re||(re=self.document.createElement("a")),re.href=C,re.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(Z==null&&(Z=self.matchMedia("(prefers-reduced-motion: reduce)")),Z.matches):!1}},ie={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},oe={supported:!1,testSupport:ye},ne,le=!1,_e,fe=!1;self.document&&(_e=self.document.createElement("img"),_e.onload=function(){ne&&xe(ne),ne=null,fe=!0},_e.onerror=function(){le=!0,ne=null},_e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ye(k){le||!_e||(fe?xe(k):ne=k)}function xe(k){var C=k.createTexture();k.bindTexture(k.TEXTURE_2D,C);try{if(k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,_e),k.isContextLost())return;oe.supported=!0}catch{}k.deleteTexture(C),le=!0}var me="01";function be(){for(var k="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",B="",te=0;te<10;te++)B+=C[Math.floor(Math.random()*62)];var pe=12*60*60*1e3,we=[k,me,B].join(""),Me=Date.now()+pe;return{token:we,tokenExpiresAt:Me}}var ke=function(C,B){this._transformRequestFn=C,this._customAccessToken=B,this._createSkuToken()};ke.prototype._createSkuToken=function(){var C=be();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},ke.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ke.prototype.transformRequest=function(C,B){return this._transformRequestFn?this._transformRequestFn(C,B)||{url:C}:{url:C}},ke.prototype.normalizeStyleURL=function(C,B){if(!De(C))return C;var te=ze(C);return te.path="/styles/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||B)},ke.prototype.normalizeGlyphsURL=function(C,B){if(!De(C))return C;var te=ze(C);return te.path="/fonts/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||B)},ke.prototype.normalizeSourceURL=function(C,B){if(!De(C))return C;var te=ze(C);return te.path="/v4/"+te.authority+".json",te.params.push("secure"),this._makeAPIURL(te,this._customAccessToken||B)},ke.prototype.normalizeSpriteURL=function(C,B,te,pe){var we=ze(C);return De(C)?(we.path="/styles/v1"+we.path+"/sprite"+B+te,this._makeAPIURL(we,this._customAccessToken||pe)):(we.path+=""+B+te,Ie(we))},ke.prototype.normalizeTileURL=function(C,B){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!De(C))return C;var te=ze(C),pe=/(\.(png|jpg)\d*)(?=$)/,we=/^.+\/v4\//,Me=Q.devicePixelRatio>=2||B===512?"@2x":"",Ne=oe.supported?".webp":"$1";te.path=te.path.replace(pe,""+Me+Ne),te.path=te.path.replace(we,"/"),te.path="/v4"+te.path;var rt=this._customAccessToken||Ze(te.params)||ie.ACCESS_TOKEN;return ie.REQUIRE_ACCESS_TOKEN&&rt&&this._skuToken&&te.params.push("sku="+this._skuToken),this._makeAPIURL(te,rt)},ke.prototype.canonicalizeTileURL=function(C,B){var te="/v4/",pe=/\.[\w]+$/,we=ze(C);if(!we.path.match(/(^\/v4\/)/)||!we.path.match(pe))return C;var Me="mapbox://tiles/";Me+=we.path.replace(te,"");var Ne=we.params;return B&&(Ne=Ne.filter(function(rt){return!rt.match(/^access_token=/)})),Ne.length&&(Me+="?"+Ne.join("&")),Me},ke.prototype.canonicalizeTileset=function(C,B){for(var te=B?De(B):!1,pe=[],we=0,Me=C.tiles||[];we<Me.length;we+=1){var Ne=Me[we];Ae(Ne)?pe.push(this.canonicalizeTileURL(Ne,te)):pe.push(Ne)}return pe},ke.prototype._makeAPIURL=function(C,B){var te="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",pe=ze(ie.API_URL);if(C.protocol=pe.protocol,C.authority=pe.authority,pe.path!=="/"&&(C.path=""+pe.path+C.path),!ie.REQUIRE_ACCESS_TOKEN)return Ie(C);if(B=B||ie.ACCESS_TOKEN,!B)throw new Error("An API access token is required to use Mapbox GL. "+te);if(B[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+te);return C.params=C.params.filter(function(we){return we.indexOf("access_token")===-1}),C.params.push("access_token="+B),Ie(C)};function De(k){return k.indexOf("mapbox:")===0}var He=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ae(k){return He.test(k)}function Le(k){return k.indexOf("sku=")>0&&Ae(k)}function Ze(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C],pe=te.match(/^access_token=(.*)$/);if(pe)return pe[1]}return null}var We=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ze(k){var C=k.match(We);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function Ie(k){var C=k.params.length?"?"+k.params.join("&"):"";return k.protocol+"://"+k.authority+k.path+C}var Ve="mapbox.eventData";function dt(k){if(!k)return null;var C=k.split(".");if(!C||C.length!==3)return null;try{var B=JSON.parse(J(C[1]));return B}catch{return null}}var Ft=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ft.prototype.getStorageKey=function(C){var B=dt(ie.ACCESS_TOKEN),te="";return B&&B.u?te=K(B.u):te=ie.ACCESS_TOKEN||"",C?Ve+"."+C+":"+te:Ve+":"+te},Ft.prototype.fetchEventData=function(){var C=he("localStorage"),B=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{var pe=self.localStorage.getItem(B);pe&&(this.eventData=JSON.parse(pe));var we=self.localStorage.getItem(te);we&&(this.anonId=we)}catch{O("Unable to read from LocalStorage")}},Ft.prototype.saveEventData=function(){var C=he("localStorage"),B=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(te,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(B,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Ft.prototype.processRequests=function(C){},Ft.prototype.postEvent=function(C,B,te,pe){var we=this;if(!!ie.EVENTS_URL){var Me=ze(ie.EVENTS_URL);Me.params.push("access_token="+(pe||ie.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:me,userId:this.anonId},rt=B?M(Ne,B):Ne,vt={url:Ie(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([rt])};this.pendingRequest=Et(vt,function(yt){we.pendingRequest=null,te(yt),we.saveEventData(),we.processRequests(pe)})}},Ft.prototype.queueRequest=function(C,B){this.queue.push(C),this.processRequests(B)};var Qt=function(k){function C(){k.call(this,"map.load"),this.success={},this.skuToken=""}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function(te,pe,we,Me){this.skuToken=we,(ie.EVENTS_URL&&Me||ie.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(Ne){return De(Ne)||Ae(Ne)}))&&this.queueRequest({id:pe,timestamp:Date.now()},Me)},C.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){var we=this.queue.shift(),Me=we.id,Ne=we.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=h()),this.postEvent(Ne,{skuToken:this.skuToken},function(rt){rt||Me&&(pe.success[Me]=!0)},te))}},C}(Ft),Ot=function(k){function C(B){k.call(this,"appUserTurnstile"),this._customAccessToken=B}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function(te,pe){ie.EVENTS_URL&&ie.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(we){return De(we)||Ae(we)})&&this.queueRequest(Date.now(),pe)},C.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var we=dt(ie.ACCESS_TOKEN),Me=we?we.u:ie.ACCESS_TOKEN,Ne=Me!==this.eventData.tokenU;L(this.anonId)||(this.anonId=h(),Ne=!0);var rt=this.queue.shift();if(this.eventData.lastSuccess){var vt=new Date(this.eventData.lastSuccess),yt=new Date(rt),Ut=(rt-this.eventData.lastSuccess)/(24*60*60*1e3);Ne=Ne||Ut>=1||Ut<-1||vt.getDate()!==yt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(rt,{"enabled.telemetry":!1},function(ir){ir||(pe.eventData.lastSuccess=rt,pe.eventData.tokenU=Me)},te)}},C}(Ft),Ct=new Ot,jt=Ct.postTurnstileEvent.bind(Ct),Nt=new Qt,Lt=Nt.postMapLoadEvent.bind(Nt),Xe="mapbox-tiles",it=500,Ye=50,Ee=1e3*60*7,Ge;function Ke(){self.caches&&!Ge&&(Ge=self.caches.open(Xe))}var qe;function At(k,C){if(qe===void 0)try{new Response(new ReadableStream),qe=!0}catch{qe=!1}qe?C(k.body):k.blob().then(C)}function mt(k,C,B){if(Ke(),!!Ge){var te={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(Me,Ne){return te.headers.set(Ne,Me)});var pe=j(C.headers.get("Cache-Control")||"");if(!pe["no-store"]){pe["max-age"]&&te.headers.set("Expires",new Date(B+pe["max-age"]*1e3).toUTCString());var we=new Date(te.headers.get("Expires")).getTime()-B;we<Ee||At(C,function(Me){var Ne=new self.Response(Me,te);Ke(),Ge&&Ge.then(function(rt){return rt.put(Mt(k.url),Ne)}).catch(function(rt){return O(rt.message)})})}}}function Mt(k){var C=k.indexOf("?");return C<0?k:k.slice(0,C)}function Gt(k,C){if(Ke(),!Ge)return C(null);var B=Mt(k.url);Ge.then(function(te){te.match(B).then(function(pe){var we=zt(pe);te.delete(B),we&&te.put(B,pe.clone()),C(null,pe,we)}).catch(C)}).catch(C)}function zt(k){if(!k)return!1;var C=new Date(k.headers.get("Expires")||0),B=j(k.headers.get("Cache-Control")||"");return C>Date.now()&&!B["no-cache"]}var Ht=1/0;function Zt(k){Ht++,Ht>Ye&&(k.getActor().send("enforceCacheSizeLimit",it),Ht=0)}function Wt(k){Ke(),Ge&&Ge.then(function(C){C.keys().then(function(B){for(var te=0;te<B.length-k;te++)C.delete(B[te])})})}function sr(k){var C=self.caches.delete(Xe);k&&C.catch(k).then(function(){return k()})}function Gr(k,C){it=k,Ye=C}var cn;function qr(){return cn==null&&(cn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),cn}var st={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(st);var rr=function(k){function C(B,te,pe){te===401&&Ae(pe)&&(B+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),k.call(this,B),this.status=te,this.url=pe,this.name=this.constructor.name,this.message=B}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),$t=ee()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},hr=function(k){return/^file:/.test(k)||/^file:/.test($t())&&!/^\w+:/.test(k)};function Sr(k,C){var B=new self.AbortController,te=new self.Request(k.url,{method:k.method||"GET",body:k.body,credentials:k.credentials,headers:k.headers,referrer:$t(),signal:B.signal}),pe=!1,we=!1,Me=Le(te.url);k.type==="json"&&te.headers.set("Accept","application/json");var Ne=function(vt,yt,Ut){if(!we){if(vt&&vt.message!=="SecurityError"&&O(vt),yt&&Ut)return rt(yt);var ir=Date.now();self.fetch(te).then(function(tr){if(tr.ok){var xr=Me?tr.clone():null;return rt(tr,xr,ir)}else return C(new rr(tr.statusText,tr.status,k.url))}).catch(function(tr){tr.code!==20&&C(new Error(tr.message))})}},rt=function(vt,yt,Ut){(k.type==="arrayBuffer"?vt.arrayBuffer():k.type==="json"?vt.json():vt.text()).then(function(ir){we||(yt&&Ut&&mt(te,yt,Ut),pe=!0,C(null,ir,vt.headers.get("Cache-Control"),vt.headers.get("Expires")))}).catch(function(ir){we||C(new Error(ir.message))})};return Me?Gt(te,Ne):Ne(null,null),{cancel:function(){we=!0,pe||B.abort()}}}function tt(k,C){var B=new self.XMLHttpRequest;B.open(k.method||"GET",k.url,!0),k.type==="arrayBuffer"&&(B.responseType="arraybuffer");for(var te in k.headers)B.setRequestHeader(te,k.headers[te]);return k.type==="json"&&(B.responseType="text",B.setRequestHeader("Accept","application/json")),B.withCredentials=k.credentials==="include",B.onerror=function(){C(new Error(B.statusText))},B.onload=function(){if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){var pe=B.response;if(k.type==="json")try{pe=JSON.parse(B.response)}catch(we){return C(we)}C(null,pe,B.getResponseHeader("Cache-Control"),B.getResponseHeader("Expires"))}else C(new rr(B.statusText,B.status,k.url))},B.send(k.body),{cancel:function(){return B.abort()}}}var Qe=function(k,C){if(!hr(k.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Sr(k,C);if(ee()&&self.worker&&self.worker.actor){var B=!0;return self.worker.actor.send("getResource",k,C,void 0,B)}}return tt(k,C)},lt=function(k,C){return Qe(M(k,{type:"json"}),C)},ft=function(k,C){return Qe(M(k,{type:"arrayBuffer"}),C)},Et=function(k,C){return Qe(M(k,{method:"POST"}),C)};function Vt(k){var C=self.document.createElement("a");return C.href=k,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Se(k,C,B,te){var pe=new self.Image,we=self.URL;pe.onload=function(){C(null,pe),we.revokeObjectURL(pe.src)},pe.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Me=new self.Blob([new Uint8Array(k)],{type:"image/png"});pe.cacheControl=B,pe.expires=te,pe.src=k.byteLength?we.createObjectURL(Me):Pe}function ot(k,C){var B=new self.Blob([new Uint8Array(k)],{type:"image/png"});self.createImageBitmap(B).then(function(te){C(null,te)}).catch(function(te){C(new Error("Could not load image because of "+te.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var ct,pt,St=function(){ct=[],pt=0};St();var xt=function(k,C){if(oe.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),pt>=ie.MAX_PARALLEL_IMAGE_REQUESTS){var B={requestParameters:k,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return ct.push(B),B}pt++;var te=!1,pe=function(){if(!te)for(te=!0,pt--;ct.length&&pt<ie.MAX_PARALLEL_IMAGE_REQUESTS;){var Me=ct.shift(),Ne=Me.requestParameters,rt=Me.callback,vt=Me.cancelled;vt||(Me.cancel=xt(Ne,rt).cancel)}},we=ft(k,function(Me,Ne,rt,vt){pe(),Me?C(Me):Ne&&(qr()?ot(Ne,C):Se(Ne,C,rt,vt))});return{cancel:function(){we.cancel(),pe()}}},Pt=function(k,C){var B=self.document.createElement("video");B.muted=!0,B.onloadstart=function(){C(null,B)};for(var te=0;te<k.length;te++){var pe=self.document.createElement("source");Vt(k[te])||(B.crossOrigin="Anonymous"),pe.src=k[te],B.appendChild(pe)}return{cancel:function(){}}};function Xt(k,C,B){var te=B[k]&&B[k].indexOf(C)!==-1;te||(B[k]=B[k]||[],B[k].push(C))}function or(k,C,B){if(B&&B[k]){var te=B[k].indexOf(C);te!==-1&&B[k].splice(te,1)}}var Pr=function(C,B){B===void 0&&(B={}),M(this,B),this.type=C},Ar=function(k){function C(B,te){te===void 0&&(te={}),k.call(this,"error",M({error:B},te))}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(Pr),Er=function(){};Er.prototype.on=function(C,B){return this._listeners=this._listeners||{},Xt(C,B,this._listeners),this},Er.prototype.off=function(C,B){return or(C,B,this._listeners),or(C,B,this._oneTimeListeners),this},Er.prototype.once=function(C,B){return this._oneTimeListeners=this._oneTimeListeners||{},Xt(C,B,this._oneTimeListeners),this},Er.prototype.fire=function(C,B){typeof C=="string"&&(C=new Pr(C,B||{}));var te=C.type;if(this.listens(te)){C.target=this;for(var pe=this._listeners&&this._listeners[te]?this._listeners[te].slice():[],we=0,Me=pe;we<Me.length;we+=1){var Ne=Me[we];Ne.call(this,C)}for(var rt=this._oneTimeListeners&&this._oneTimeListeners[te]?this._oneTimeListeners[te].slice():[],vt=0,yt=rt;vt<yt.length;vt+=1){var Ut=yt[vt];or(te,Ut,this._oneTimeListeners),Ut.call(this,C)}var ir=this._eventedParent;ir&&(M(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ir.fire(C))}else C instanceof Ar&&console.error(C.error);return this},Er.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},Er.prototype.setEventedParent=function(C,B){return this._eventedParent=C,this._eventedParentData=B,this};var Jr=8,lr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},br={"*":{type:"source"}},Fr=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Hr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Lr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},at={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Rt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Kt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},ur={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Nr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Vr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Dr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Mr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wn={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},In={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$n={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kn={type:"array",value:"*"},ya={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Ra={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},_i={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Ka={type:"array",value:"*",minimum:1},ri={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ei={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},kr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],bn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},dn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Ln={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ra={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ma={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},sa={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Bn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Qn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xa={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},yi={"*":{type:"string"}},Yt={$version:Jr,$root:lr,sources:br,source:Fr,source_vector:Hr,source_raster:Lr,source_raster_dem:at,source_geojson:Rt,source_video:Kt,source_image:ur,layer:Nr,layout:Vr,layout_background:Dr,layout_fill:Mr,layout_circle:jr,layout_heatmap:kn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:yn,layout_symbol:Wn,layout_raster:In,layout_hillshade:$n,filter:Kn,filter_operator:ya,geometry_type:Ra,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:_i,expression:Ka,expression_name:ri,light:ei,paint:kr,paint_fill:bn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:dn,paint_circle:Ln,paint_heatmap:ra,paint_symbol:ma,paint_raster:sa,paint_hillshade:Bn,paint_background:Qn,transition:Xa,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:yi},gr=function(C,B,te,pe){this.message=(C?C+": ":"")+te,pe&&(this.identifier=pe),B!=null&&B.__line__&&(this.line=B.__line__)};function un(k){var C=k.key,B=k.value;return B?[new gr(C,B,"constants have been deprecated as of v8")]:[]}function mn(k){for(var C=[],B=arguments.length-1;B-- >0;)C[B]=arguments[B+1];for(var te=0,pe=C;te<pe.length;te+=1){var we=pe[te];for(var Me in we)k[Me]=we[Me]}return k}function sn(k){return k instanceof Number||k instanceof String||k instanceof Boolean?k.valueOf():k}function Cn(k){if(Array.isArray(k))return k.map(Cn);if(k instanceof Object&&!(k instanceof Number||k instanceof String||k instanceof Boolean)){var C={};for(var B in k)C[B]=Cn(k[B]);return C}return sn(k)}var Tn=function(k){function C(B,te){k.call(this,te),this.message=te,this.key=B}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(Error),gn=function(C,B){B===void 0&&(B=[]),this.parent=C,this.bindings={};for(var te=0,pe=B;te<pe.length;te+=1){var we=pe[te],Me=we[0],Ne=we[1];this.bindings[Me]=Ne}};gn.prototype.concat=function(C){return new gn(this,C)},gn.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},gn.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var _r={kind:"null"},wr={kind:"number"},Br={kind:"string"},An={kind:"boolean"},Yn={kind:"color"},ua={kind:"object"},Sn={kind:"value"},na={kind:"error"},fa={kind:"collator"},Ma={kind:"formatted"},ka={kind:"resolvedImage"};function ga(k,C){return{kind:"array",itemType:k,N:C}}function Ia(k){if(k.kind==="array"){var C=Ia(k.itemType);return typeof k.N=="number"?"array<"+C+", "+k.N+">":k.itemType.kind==="value"?"array":"array<"+C+">"}else return k.kind}var Ao=[_r,wr,Br,An,Yn,Ma,ua,ga(Sn),ka];function ro(k,C){if(C.kind==="error")return null;if(k.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!ro(k.itemType,C.itemType))&&(typeof k.N!="number"||k.N===C.N))return null}else{if(k.kind===C.kind)return null;if(k.kind==="value")for(var B=0,te=Ao;B<te.length;B+=1){var pe=te[B];if(!ro(pe,C))return null}}return"Expected "+Ia(k)+" but found "+Ia(C)+" instead."}function $o(k,C){return C.some(function(B){return B.kind===k.kind})}function $s(k,C){return C.some(function(B){return B==="null"?k===null:B==="array"?Array.isArray(k):B==="object"?k&&!Array.isArray(k)&&typeof k=="object":B===typeof k})}var Hs=a(function(k,C){var B={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function te(vt){return vt=Math.round(vt),vt<0?0:vt>255?255:vt}function pe(vt){return vt<0?0:vt>1?1:vt}function we(vt){return vt[vt.length-1]==="%"?te(parseFloat(vt)/100*255):te(parseInt(vt))}function Me(vt){return vt[vt.length-1]==="%"?pe(parseFloat(vt)/100):pe(parseFloat(vt))}function Ne(vt,yt,Ut){return Ut<0?Ut+=1:Ut>1&&(Ut-=1),Ut*6<1?vt+(yt-vt)*Ut*6:Ut*2<1?yt:Ut*3<2?vt+(yt-vt)*(2/3-Ut)*6:vt}function rt(vt){var yt=vt.replace(/ /g,"").toLowerCase();if(yt in B)return B[yt].slice();if(yt[0]==="#"){if(yt.length===4){var Ut=parseInt(yt.substr(1),16);return Ut>=0&&Ut<=4095?[(Ut&3840)>>4|(Ut&3840)>>8,Ut&240|(Ut&240)>>4,Ut&15|(Ut&15)<<4,1]:null}else if(yt.length===7){var Ut=parseInt(yt.substr(1),16);return Ut>=0&&Ut<=16777215?[(Ut&16711680)>>16,(Ut&65280)>>8,Ut&255,1]:null}return null}var ir=yt.indexOf("("),tr=yt.indexOf(")");if(ir!==-1&&tr+1===yt.length){var xr=yt.substr(0,ir),Ur=yt.substr(ir+1,tr-(ir+1)).split(","),hn=1;switch(xr){case"rgba":if(Ur.length!==4)return null;hn=Me(Ur.pop());case"rgb":return Ur.length!==3?null:[we(Ur[0]),we(Ur[1]),we(Ur[2]),hn];case"hsla":if(Ur.length!==4)return null;hn=Me(Ur.pop());case"hsl":if(Ur.length!==3)return null;var an=(parseFloat(Ur[0])%360+360)%360/360,Rn=Me(Ur[1]),Mn=Me(Ur[2]),Dn=Mn<=.5?Mn*(Rn+1):Mn+Rn-Mn*Rn,Vn=Mn*2-Dn;return[te(Ne(Vn,Dn,an+1/3)*255),te(Ne(Vn,Dn,an)*255),te(Ne(Vn,Dn,an-1/3)*255),hn];default:return null}}return null}try{C.parseCSSColor=rt}catch{}}),Wl=Hs.parseCSSColor,Ai=function(C,B,te,pe){pe===void 0&&(pe=1),this.r=C,this.g=B,this.b=te,this.a=pe};Ai.parse=function(C){if(!!C){if(C instanceof Ai)return C;if(typeof C=="string"){var B=Wl(C);if(!!B)return new Ai(B[0]/255*B[3],B[1]/255*B[3],B[2]/255*B[3],B[3])}}},Ai.prototype.toString=function(){var C=this.toArray(),B=C[0],te=C[1],pe=C[2],we=C[3];return"rgba("+Math.round(B)+","+Math.round(te)+","+Math.round(pe)+","+we+")"},Ai.prototype.toArray=function(){var C=this,B=C.r,te=C.g,pe=C.b,we=C.a;return we===0?[0,0,0,0]:[B*255/we,te*255/we,pe*255/we,we]},Ai.black=new Ai(0,0,0,1),Ai.white=new Ai(1,1,1,1),Ai.transparent=new Ai(0,0,0,0),Ai.red=new Ai(1,0,0,1);var Gs=function(C,B,te){C?this.sensitivity=B?"variant":"case":this.sensitivity=B?"accent":"base",this.locale=te,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Gs.prototype.compare=function(C,B){return this.collator.compare(C,B)},Gs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ys=function(C,B,te,pe,we){this.text=C,this.image=B,this.scale=te,this.fontStack=pe,this.textColor=we},Zi=function(C){this.sections=C};Zi.fromString=function(C){return new Zi([new Ys(C,null,null,null,null)])},Zi.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},Zi.factory=function(C){return C instanceof Zi?C:Zi.fromString(C)},Zi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},Zi.prototype.serialize=function(){for(var C=["format"],B=0,te=this.sections;B<te.length;B+=1){var pe=te[B];if(pe.image){C.push(["image",pe.image.name]);continue}C.push(pe.text);var we={};pe.fontStack&&(we["text-font"]=["literal",pe.fontStack.split(",")]),pe.scale&&(we["font-scale"]=pe.scale),pe.textColor&&(we["text-color"]=["rgba"].concat(pe.textColor.toArray())),C.push(we)}return C};var Ro=function(C){this.name=C.name,this.available=C.available};Ro.prototype.toString=function(){return this.name},Ro.fromString=function(C){return C?new Ro({name:C,available:!1}):null},Ro.prototype.serialize=function(){return["image",this.name]};function Cl(k,C,B,te){if(!(typeof k=="number"&&k>=0&&k<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof B=="number"&&B>=0&&B<=255)){var pe=typeof te=="number"?[k,C,B,te]:[k,C,B];return"Invalid rgba value ["+pe.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof te>"u"||typeof te=="number"&&te>=0&&te<=1?null:"Invalid rgba value ["+[k,C,B,te].join(", ")+"]: 'a' must be between 0 and 1."}function _s(k){if(k===null)return!0;if(typeof k=="string")return!0;if(typeof k=="boolean")return!0;if(typeof k=="number")return!0;if(k instanceof Ai)return!0;if(k instanceof Gs)return!0;if(k instanceof Zi)return!0;if(k instanceof Ro)return!0;if(Array.isArray(k)){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(!_s(te))return!1}return!0}else if(typeof k=="object"){for(var pe in k)if(!_s(k[pe]))return!1;return!0}else return!1}function Fi(k){if(k===null)return _r;if(typeof k=="string")return Br;if(typeof k=="boolean")return An;if(typeof k=="number")return wr;if(k instanceof Ai)return Yn;if(k instanceof Gs)return fa;if(k instanceof Zi)return Ma;if(k instanceof Ro)return ka;if(Array.isArray(k)){for(var C=k.length,B,te=0,pe=k;te<pe.length;te+=1){var we=pe[te],Me=Fi(we);if(!B)B=Me;else{if(B===Me)continue;B=Sn;break}}return ga(B||Sn,C)}else return ua}function vl(k){var C=typeof k;return k===null?"":C==="string"||C==="number"||C==="boolean"?String(k):k instanceof Ai||k instanceof Zi||k instanceof Ro?k.toString():JSON.stringify(k)}var lo=function(C,B){this.type=C,this.value=B};lo.parse=function(C,B){if(C.length!==2)return B.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!_s(C[1]))return B.error("invalid value");var te=C[1],pe=Fi(te),we=B.expectedType;return pe.kind==="array"&&pe.N===0&&we&&we.kind==="array"&&(typeof we.N!="number"||we.N===0)&&(pe=we),new lo(pe,te)},lo.prototype.evaluate=function(){return this.value},lo.prototype.eachChild=function(){},lo.prototype.outputDefined=function(){return!0},lo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ai?["rgba"].concat(this.value.toArray()):this.value instanceof Zi?this.value.serialize():this.value};var zi=function(C){this.name="ExpressionEvaluationError",this.message=C};zi.prototype.toJSON=function(){return this.message};var po={string:Br,number:wr,boolean:An,object:ua},no=function(C,B){this.type=C,this.args=B};no.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var te=1,pe,we=C[0];if(we==="array"){var Me;if(C.length>2){var Ne=C[1];if(typeof Ne!="string"||!(Ne in po)||Ne==="object")return B.error('The item type argument of "array" must be one of string, number, boolean',1);Me=po[Ne],te++}else Me=Sn;var rt;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return B.error('The length argument to "array" must be a positive integer literal',2);rt=C[2],te++}pe=ga(Me,rt)}else pe=po[we];for(var vt=[];te<C.length;te++){var yt=B.parse(C[te],te,Sn);if(!yt)return null;vt.push(yt)}return new no(pe,vt)},no.prototype.evaluate=function(C){for(var B=0;B<this.args.length;B++){var te=this.args[B].evaluate(C),pe=ro(this.type,Fi(te));if(pe){if(B===this.args.length-1)throw new zi("Expected value to be of type "+Ia(this.type)+", but found "+Ia(Fi(te))+" instead.")}else return te}return null},no.prototype.eachChild=function(C){this.args.forEach(C)},no.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},no.prototype.serialize=function(){var C=this.type,B=[C.kind];if(C.kind==="array"){var te=C.itemType;if(te.kind==="string"||te.kind==="number"||te.kind==="boolean"){B.push(te.kind);var pe=C.N;(typeof pe=="number"||this.args.length>1)&&B.push(pe)}}return B.concat(this.args.map(function(we){return we.serialize()}))};var us=function(C){this.type=Ma,this.sections=C};us.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var te=C[1];if(!Array.isArray(te)&&typeof te=="object")return B.error("First argument must be an image or text section.");for(var pe=[],we=!1,Me=1;Me<=C.length-1;++Me){var Ne=C[Me];if(we&&typeof Ne=="object"&&!Array.isArray(Ne)){we=!1;var rt=null;if(Ne["font-scale"]&&(rt=B.parse(Ne["font-scale"],1,wr),!rt))return null;var vt=null;if(Ne["text-font"]&&(vt=B.parse(Ne["text-font"],1,ga(Br)),!vt))return null;var yt=null;if(Ne["text-color"]&&(yt=B.parse(Ne["text-color"],1,Yn),!yt))return null;var Ut=pe[pe.length-1];Ut.scale=rt,Ut.font=vt,Ut.textColor=yt}else{var ir=B.parse(C[Me],1,Sn);if(!ir)return null;var tr=ir.type.kind;if(tr!=="string"&&tr!=="value"&&tr!=="null"&&tr!=="resolvedImage")return B.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");we=!0,pe.push({content:ir,scale:null,font:null,textColor:null})}}return new us(pe)},us.prototype.evaluate=function(C){var B=function(te){var pe=te.content.evaluate(C);return Fi(pe)===ka?new Ys("",pe,null,null,null):new Ys(vl(pe),null,te.scale?te.scale.evaluate(C):null,te.font?te.font.evaluate(C).join(","):null,te.textColor?te.textColor.evaluate(C):null)};return new Zi(this.sections.map(B))},us.prototype.eachChild=function(C){for(var B=0,te=this.sections;B<te.length;B+=1){var pe=te[B];C(pe.content),pe.scale&&C(pe.scale),pe.font&&C(pe.font),pe.textColor&&C(pe.textColor)}},us.prototype.outputDefined=function(){return!1},us.prototype.serialize=function(){for(var C=["format"],B=0,te=this.sections;B<te.length;B+=1){var pe=te[B];C.push(pe.content.serialize());var we={};pe.scale&&(we["font-scale"]=pe.scale.serialize()),pe.font&&(we["text-font"]=pe.font.serialize()),pe.textColor&&(we["text-color"]=pe.textColor.serialize()),C.push(we)}return C};var Qs=function(C){this.type=ka,this.input=C};Qs.parse=function(C,B){if(C.length!==2)return B.error("Expected two arguments.");var te=B.parse(C[1],1,Br);return te?new Qs(te):B.error("No image name provided.")},Qs.prototype.evaluate=function(C){var B=this.input.evaluate(C),te=Ro.fromString(B);return te&&C.availableImages&&(te.available=C.availableImages.indexOf(B)>-1),te},Qs.prototype.eachChild=function(C){C(this.input)},Qs.prototype.outputDefined=function(){return!1},Qs.prototype.serialize=function(){return["image",this.input.serialize()]};var lu={"to-boolean":An,"to-color":Yn,"to-number":wr,"to-string":Br},es=function(C,B){this.type=C,this.args=B};es.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var te=C[0];if((te==="to-boolean"||te==="to-string")&&C.length!==2)return B.error("Expected one argument.");for(var pe=lu[te],we=[],Me=1;Me<C.length;Me++){var Ne=B.parse(C[Me],Me,Sn);if(!Ne)return null;we.push(Ne)}return new es(pe,we)},es.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var B,te,pe=0,we=this.args;pe<we.length;pe+=1){var Me=we[pe];if(B=Me.evaluate(C),te=null,B instanceof Ai)return B;if(typeof B=="string"){var Ne=C.parseColor(B);if(Ne)return Ne}else if(Array.isArray(B)&&(B.length<3||B.length>4?te="Invalid rbga value "+JSON.stringify(B)+": expected an array containing either three or four numeric values.":te=Cl(B[0],B[1],B[2],B[3]),!te))return new Ai(B[0]/255,B[1]/255,B[2]/255,B[3])}throw new zi(te||"Could not parse color from value '"+(typeof B=="string"?B:String(JSON.stringify(B)))+"'")}else if(this.type.kind==="number"){for(var rt=null,vt=0,yt=this.args;vt<yt.length;vt+=1){var Ut=yt[vt];if(rt=Ut.evaluate(C),rt===null)return 0;var ir=Number(rt);if(!isNaN(ir))return ir}throw new zi("Could not convert "+JSON.stringify(rt)+" to number.")}else return this.type.kind==="formatted"?Zi.fromString(vl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?Ro.fromString(vl(this.args[0].evaluate(C))):vl(this.args[0].evaluate(C))},es.prototype.eachChild=function(C){this.args.forEach(C)},es.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},es.prototype.serialize=function(){if(this.type.kind==="formatted")return new us([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Qs(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(B){C.push(B.serialize())}),C};var Au=["Unknown","Point","LineString","Polygon"],Rs=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Rs.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Rs.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Au[this.feature.type]:this.feature.type:null},Rs.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Rs.prototype.canonicalID=function(){return this.canonical},Rs.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Rs.prototype.parseColor=function(C){var B=this._parseColorCache[C];return B||(B=this._parseColorCache[C]=Ai.parse(C)),B};var Oo=function(C,B,te,pe){this.name=C,this.type=B,this._evaluate=te,this.args=pe};Oo.prototype.evaluate=function(C){return this._evaluate(C,this.args)},Oo.prototype.eachChild=function(C){this.args.forEach(C)},Oo.prototype.outputDefined=function(){return!1},Oo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},Oo.parse=function(C,B){var te,pe=C[0],we=Oo.definitions[pe];if(!we)return B.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(we)?we[0]:we.type,Ne=Array.isArray(we)?[[we[1],we[2]]]:we.overloads,rt=Ne.filter(function(Ua){var Ha=Ua[0];return!Array.isArray(Ha)||Ha.length===C.length-1}),vt=null,yt=0,Ut=rt;yt<Ut.length;yt+=1){var ir=Ut[yt],tr=ir[0],xr=ir[1];vt=new Io(B.registry,B.path,null,B.scope);for(var Ur=[],hn=!1,an=1;an<C.length;an++){var Rn=C[an],Mn=Array.isArray(tr)?tr[an-1]:tr.type,Dn=vt.parse(Rn,1+Ur.length,Mn);if(!Dn){hn=!0;break}Ur.push(Dn)}if(!hn){if(Array.isArray(tr)&&tr.length!==Ur.length){vt.error("Expected "+tr.length+" arguments, but found "+Ur.length+" instead.");continue}for(var Vn=0;Vn<Ur.length;Vn++){var qn=Array.isArray(tr)?tr[Vn]:tr.type,da=Ur[Vn];vt.concat(Vn+1).checkSubtype(qn,da.type)}if(vt.errors.length===0)return new Oo(pe,Me,xr,Ur)}}if(rt.length===1)(te=B.errors).push.apply(te,vt.errors);else{for(var va=rt.length?rt:Ne,Wa=va.map(function(Ua){var Ha=Ua[0];return hc(Ha)}).join(" | "),Da=[],Oa=1;Oa<C.length;Oa++){var fi=B.parse(C[Oa],1+Da.length);if(!fi)return null;Da.push(Ia(fi.type))}B.error("Expected arguments of type "+Wa+", but found ("+Da.join(", ")+") instead.")}return null},Oo.register=function(C,B){Oo.definitions=B;for(var te in B)C[te]=Oo};function hc(k){return Array.isArray(k)?"("+k.map(Ia).join(", ")+")":"("+Ia(k.type)+"...)"}var So=function(C,B,te){this.type=fa,this.locale=te,this.caseSensitive=C,this.diacriticSensitive=B};So.parse=function(C,B){if(C.length!==2)return B.error("Expected one argument.");var te=C[1];if(typeof te!="object"||Array.isArray(te))return B.error("Collator options argument must be an object.");var pe=B.parse(te["case-sensitive"]===void 0?!1:te["case-sensitive"],1,An);if(!pe)return null;var we=B.parse(te["diacritic-sensitive"]===void 0?!1:te["diacritic-sensitive"],1,An);if(!we)return null;var Me=null;return te.locale&&(Me=B.parse(te.locale,1,Br),!Me)?null:new So(pe,we,Me)},So.prototype.evaluate=function(C){return new Gs(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},So.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},So.prototype.outputDefined=function(){return!1},So.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var Is=8192;function Xl(k,C){k[0]=Math.min(k[0],C[0]),k[1]=Math.min(k[1],C[1]),k[2]=Math.max(k[2],C[0]),k[3]=Math.max(k[3],C[1])}function Xu(k){return(180+k)/360}function ju(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function Ws(k,C){return!(k[0]<=C[0]||k[2]>=C[2]||k[1]<=C[1]||k[3]>=C[3])}function Ll(k,C){var B=Xu(k[0]),te=ju(k[1]),pe=Math.pow(2,C.z);return[Math.round(B*pe*Is),Math.round(te*pe*Is)]}function Fs(k,C,B){var te=k[0]-C[0],pe=k[1]-C[1],we=k[0]-B[0],Me=k[1]-B[1];return te*Me-we*pe===0&&te*we<=0&&pe*Me<=0}function uu(k,C,B){return C[1]>k[1]!=B[1]>k[1]&&k[0]<(B[0]-C[0])*(k[1]-C[1])/(B[1]-C[1])+C[0]}function pl(k,C){for(var B=!1,te=0,pe=C.length;te<pe;te++)for(var we=C[te],Me=0,Ne=we.length;Me<Ne-1;Me++){if(Fs(k,we[Me],we[Me+1]))return!1;uu(k,we[Me],we[Me+1])&&(B=!B)}return B}function cu(k,C){for(var B=0;B<C.length;B++)if(pl(k,C[B]))return!0;return!1}function Mu(k,C){return k[0]*C[1]-k[1]*C[0]}function jl(k,C,B,te){var pe=k[0]-B[0],we=k[1]-B[1],Me=C[0]-B[0],Ne=C[1]-B[1],rt=te[0]-B[0],vt=te[1]-B[1],yt=pe*vt-rt*we,Ut=Me*vt-rt*Ne;return yt>0&&Ut<0||yt<0&&Ut>0}function Eu(k,C,B,te){var pe=[C[0]-k[0],C[1]-k[1]],we=[te[0]-B[0],te[1]-B[1]];return Mu(we,pe)===0?!1:!!(jl(k,C,B,te)&&jl(B,te,k,C))}function qs(k,C,B){for(var te=0,pe=B;te<pe.length;te+=1)for(var we=pe[te],Me=0;Me<we.length-1;++Me)if(Eu(k,C,we[Me],we[Me+1]))return!0;return!1}function Zl(k,C){for(var B=0;B<k.length;++B)if(!pl(k[B],C))return!1;for(var te=0;te<k.length-1;++te)if(qs(k[te],k[te+1],C))return!1;return!0}function dl(k,C){for(var B=0;B<C.length;B++)if(Zl(k,C[B]))return!0;return!1}function ws(k,C,B){for(var te=[],pe=0;pe<k.length;pe++){for(var we=[],Me=0;Me<k[pe].length;Me++){var Ne=Ll(k[pe][Me],B);Xl(C,Ne),we.push(Ne)}te.push(we)}return te}function Pl(k,C,B){for(var te=[],pe=0;pe<k.length;pe++){var we=ws(k[pe],C,B);te.push(we)}return te}function fu(k,C,B,te){if(k[0]<B[0]||k[0]>B[2]){var pe=te*.5,we=k[0]-B[0]>pe?-te:B[0]-k[0]>pe?te:0;we===0&&(we=k[0]-B[2]>pe?-te:B[2]-k[0]>pe?te:0),k[0]+=we}Xl(C,k)}function Su(k){k[0]=k[1]=1/0,k[2]=k[3]=-1/0}function ku(k,C,B,te){for(var pe=Math.pow(2,te.z)*Is,we=[te.x*Is,te.y*Is],Me=[],Ne=0,rt=k;Ne<rt.length;Ne+=1)for(var vt=rt[Ne],yt=0,Ut=vt;yt<Ut.length;yt+=1){var ir=Ut[yt],tr=[ir.x+we[0],ir.y+we[1]];fu(tr,C,B,pe),Me.push(tr)}return Me}function Kl(k,C,B,te){for(var pe=Math.pow(2,te.z)*Is,we=[te.x*Is,te.y*Is],Me=[],Ne=0,rt=k;Ne<rt.length;Ne+=1){for(var vt=rt[Ne],yt=[],Ut=0,ir=vt;Ut<ir.length;Ut+=1){var tr=ir[Ut],xr=[tr.x+we[0],tr.y+we[1]];Xl(C,xr),yt.push(xr)}Me.push(yt)}if(C[2]-C[0]<=pe/2){Su(C);for(var Ur=0,hn=Me;Ur<hn.length;Ur+=1)for(var an=hn[Ur],Rn=0,Mn=an;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];fu(Dn,C,B,pe)}}return Me}function el(k,C){var B=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=k.canonicalID();if(C.type==="Polygon"){var we=ws(C.coordinates,te,pe),Me=ku(k.geometry(),B,te,pe);if(!Ws(B,te))return!1;for(var Ne=0,rt=Me;Ne<rt.length;Ne+=1){var vt=rt[Ne];if(!pl(vt,we))return!1}}if(C.type==="MultiPolygon"){var yt=Pl(C.coordinates,te,pe),Ut=ku(k.geometry(),B,te,pe);if(!Ws(B,te))return!1;for(var ir=0,tr=Ut;ir<tr.length;ir+=1){var xr=tr[ir];if(!cu(xr,yt))return!1}}return!0}function Cu(k,C){var B=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=k.canonicalID();if(C.type==="Polygon"){var we=ws(C.coordinates,te,pe),Me=Kl(k.geometry(),B,te,pe);if(!Ws(B,te))return!1;for(var Ne=0,rt=Me;Ne<rt.length;Ne+=1){var vt=rt[Ne];if(!Zl(vt,we))return!1}}if(C.type==="MultiPolygon"){var yt=Pl(C.coordinates,te,pe),Ut=Kl(k.geometry(),B,te,pe);if(!Ws(B,te))return!1;for(var ir=0,tr=Ut;ir<tr.length;ir+=1){var xr=tr[ir];if(!dl(xr,yt))return!1}}return!0}var cs=function(C,B){this.type=An,this.geojson=C,this.geometries=B};cs.parse=function(C,B){if(C.length!==2)return B.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(_s(C[1])){var te=C[1];if(te.type==="FeatureCollection")for(var pe=0;pe<te.features.length;++pe){var we=te.features[pe].geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new cs(te,te.features[pe].geometry)}else if(te.type==="Feature"){var Me=te.geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new cs(te,te.geometry)}else if(te.type==="Polygon"||te.type==="MultiPolygon")return new cs(te,te)}return B.error("'within' expression requires valid geojson object that contains polygon geometry type.")},cs.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return el(C,this.geometries);if(C.geometryType()==="LineString")return Cu(C,this.geometries)}return!1},cs.prototype.eachChild=function(){},cs.prototype.outputDefined=function(){return!0},cs.prototype.serialize=function(){return["within",this.geojson]};function Yo(k){if(k instanceof Oo){if(k.name==="get"&&k.args.length===1)return!1;if(k.name==="feature-state")return!1;if(k.name==="has"&&k.args.length===1)return!1;if(k.name==="properties"||k.name==="geometry-type"||k.name==="id")return!1;if(/^filter-/.test(k.name))return!1}if(k instanceof cs)return!1;var C=!0;return k.eachChild(function(B){C&&!Yo(B)&&(C=!1)}),C}function tl(k){if(k instanceof Oo&&k.name==="feature-state")return!1;var C=!0;return k.eachChild(function(B){C&&!tl(B)&&(C=!1)}),C}function hu(k,C){if(k instanceof Oo&&C.indexOf(k.name)>=0)return!1;var B=!0;return k.eachChild(function(te){B&&!hu(te,C)&&(B=!1)}),B}var Ts=function(C,B){this.type=B.type,this.name=C,this.boundExpression=B};Ts.parse=function(C,B){if(C.length!==2||typeof C[1]!="string")return B.error("'var' expression requires exactly one string literal argument.");var te=C[1];return B.scope.has(te)?new Ts(te,B.scope.get(te)):B.error('Unknown variable "'+te+'". Make sure "'+te+'" has been bound in an enclosing "let" expression before using it.',1)},Ts.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},Ts.prototype.eachChild=function(){},Ts.prototype.outputDefined=function(){return!1},Ts.prototype.serialize=function(){return["var",this.name]};var Io=function(C,B,te,pe,we){B===void 0&&(B=[]),pe===void 0&&(pe=new gn),we===void 0&&(we=[]),this.registry=C,this.path=B,this.key=B.map(function(Me){return"["+Me+"]"}).join(""),this.scope=pe,this.errors=we,this.expectedType=te};Io.prototype.parse=function(C,B,te,pe,we){return we===void 0&&(we={}),B?this.concat(B,te,pe)._parse(C,we):this._parse(C,we)},Io.prototype._parse=function(C,B){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function te(yt,Ut,ir){return ir==="assert"?new no(Ut,[yt]):ir==="coerce"?new es(Ut,[yt]):yt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var pe=C[0];if(typeof pe!="string")return this.error("Expression name must be a string, but found "+typeof pe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var we=this.registry[pe];if(we){var Me=we.parse(C,this);if(!Me)return null;if(this.expectedType){var Ne=this.expectedType,rt=Me.type;if((Ne.kind==="string"||Ne.kind==="number"||Ne.kind==="boolean"||Ne.kind==="object"||Ne.kind==="array")&&rt.kind==="value")Me=te(Me,Ne,B.typeAnnotation||"assert");else if((Ne.kind==="color"||Ne.kind==="formatted"||Ne.kind==="resolvedImage")&&(rt.kind==="value"||rt.kind==="string"))Me=te(Me,Ne,B.typeAnnotation||"coerce");else if(this.checkSubtype(Ne,rt))return null}if(!(Me instanceof lo)&&Me.type.kind!=="resolvedImage"&&Dl(Me)){var vt=new Rs;try{Me=new lo(Me.type,Me.evaluate(vt))}catch(yt){return this.error(yt.message),null}}return Me}return this.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C>"u"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},Io.prototype.concat=function(C,B,te){var pe=typeof C=="number"?this.path.concat(C):this.path,we=te?this.scope.concat(te):this.scope;return new Io(this.registry,pe,B||null,we,this.errors)},Io.prototype.error=function(C){for(var B=[],te=arguments.length-1;te-- >0;)B[te]=arguments[te+1];var pe=""+this.key+B.map(function(we){return"["+we+"]"}).join("");this.errors.push(new Tn(pe,C))},Io.prototype.checkSubtype=function(C,B){var te=ro(C,B);return te&&this.error(te),te};function Dl(k){if(k instanceof Ts)return Dl(k.boundExpression);if(k instanceof Oo&&k.name==="error")return!1;if(k instanceof So)return!1;if(k instanceof cs)return!1;var C=k instanceof es||k instanceof no,B=!0;return k.eachChild(function(te){C?B=B&&Dl(te):B=B&&te instanceof lo}),B?Yo(k)&&hu(k,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function As(k,C){for(var B=k.length-1,te=0,pe=B,we=0,Me,Ne;te<=pe;)if(we=Math.floor((te+pe)/2),Me=k[we],Ne=k[we+1],Me<=C){if(we===B||C<Ne)return we;te=we+1}else if(Me>C)pe=we-1;else throw new zi("Input is not a number.");return 0}var zs=function(C,B,te){this.type=C,this.input=B,this.labels=[],this.outputs=[];for(var pe=0,we=te;pe<we.length;pe+=1){var Me=we[pe],Ne=Me[0],rt=Me[1];this.labels.push(Ne),this.outputs.push(rt)}};zs.parse=function(C,B){if(C.length-1<4)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return B.error("Expected an even number of arguments.");var te=B.parse(C[1],1,wr);if(!te)return null;var pe=[],we=null;B.expectedType&&B.expectedType.kind!=="value"&&(we=B.expectedType);for(var Me=1;Me<C.length;Me+=2){var Ne=Me===1?-1/0:C[Me],rt=C[Me+1],vt=Me,yt=Me+1;if(typeof Ne!="number")return B.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',vt);if(pe.length&&pe[pe.length-1][0]>=Ne)return B.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',vt);var Ut=B.parse(rt,yt,we);if(!Ut)return null;we=we||Ut.type,pe.push([Ne,Ut])}return new zs(we,te,pe)},zs.prototype.evaluate=function(C){var B=this.labels,te=this.outputs;if(B.length===1)return te[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=B[0])return te[0].evaluate(C);var we=B.length;if(pe>=B[we-1])return te[we-1].evaluate(C);var Me=As(B,pe);return te[Me].evaluate(C)},zs.prototype.eachChild=function(C){C(this.input);for(var B=0,te=this.outputs;B<te.length;B+=1){var pe=te[B];C(pe)}},zs.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},zs.prototype.serialize=function(){for(var C=["step",this.input.serialize()],B=0;B<this.labels.length;B++)B>0&&C.push(this.labels[B]),C.push(this.outputs[B].serialize());return C};function go(k,C,B){return k*(1-B)+C*B}function Rl(k,C,B){return new Ai(go(k.r,C.r,B),go(k.g,C.g,B),go(k.b,C.b,B),go(k.a,C.a,B))}function Il(k,C,B){return k.map(function(te,pe){return go(te,C[pe],B)})}var rl=Object.freeze({__proto__:null,number:go,color:Rl,array:Il}),fs=.95047,yl=1,ml=1.08883,Jl=4/29,Fl=6/29,nl=3*Fl*Fl,Zu=Fl*Fl*Fl,hs=Math.PI/180,Xs=180/Math.PI;function vu(k){return k>Zu?Math.pow(k,1/3):k/nl+Jl}function xl(k){return k>Fl?k*k*k:nl*(k-Jl)}function zl(k){return 255*(k<=.0031308?12.92*k:1.055*Math.pow(k,1/2.4)-.055)}function al(k){return k/=255,k<=.04045?k/12.92:Math.pow((k+.055)/1.055,2.4)}function Ol(k){var C=al(k.r),B=al(k.g),te=al(k.b),pe=vu((.4124564*C+.3575761*B+.1804375*te)/fs),we=vu((.2126729*C+.7151522*B+.072175*te)/yl),Me=vu((.0193339*C+.119192*B+.9503041*te)/ml);return{l:116*we-16,a:500*(pe-we),b:200*(we-Me),alpha:k.a}}function pu(k){var C=(k.l+16)/116,B=isNaN(k.a)?C:C+k.a/500,te=isNaN(k.b)?C:C-k.b/200;return C=yl*xl(C),B=fs*xl(B),te=ml*xl(te),new Ai(zl(3.2404542*B-1.5371385*C-.4985314*te),zl(-.969266*B+1.8760108*C+.041556*te),zl(.0556434*B-.2040259*C+1.0572252*te),k.alpha)}function Lu(k,C,B){return{l:go(k.l,C.l,B),a:go(k.a,C.a,B),b:go(k.b,C.b,B),alpha:go(k.alpha,C.alpha,B)}}function vc(k){var C=Ol(k),B=C.l,te=C.a,pe=C.b,we=Math.atan2(pe,te)*Xs;return{h:we<0?we+360:we,c:Math.sqrt(te*te+pe*pe),l:B,alpha:k.a}}function Bi(k){var C=k.h*hs,B=k.c,te=k.l;return pu({l:te,a:Math.cos(C)*B,b:Math.sin(C)*B,alpha:k.alpha})}function bl(k,C,B){var te=C-k;return k+B*(te>180||te<-180?te-360*Math.round(te/360):te)}function il(k,C,B){return{h:bl(k.h,C.h,B),c:go(k.c,C.c,B),l:go(k.l,C.l,B),alpha:go(k.alpha,C.alpha,B)}}var ts={forward:Ol,reverse:pu,interpolate:Lu},vs={forward:vc,reverse:Bi,interpolate:il},Nl=Object.freeze({__proto__:null,lab:ts,hcl:vs}),uo=function(C,B,te,pe,we){this.type=C,this.operator=B,this.interpolation=te,this.input=pe,this.labels=[],this.outputs=[];for(var Me=0,Ne=we;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=rt[0],yt=rt[1];this.labels.push(vt),this.outputs.push(yt)}};uo.interpolationFactor=function(C,B,te,pe){var we=0;if(C.name==="exponential")we=Pu(B,C.base,te,pe);else if(C.name==="linear")we=Pu(B,1,te,pe);else if(C.name==="cubic-bezier"){var Me=C.controlPoints,Ne=new n(Me[0],Me[1],Me[2],Me[3]);we=Ne.solve(Pu(B,1,te,pe))}return we},uo.parse=function(C,B){var te=C[0],pe=C[1],we=C[2],Me=C.slice(3);if(!Array.isArray(pe)||pe.length===0)return B.error("Expected an interpolation type expression.",1);if(pe[0]==="linear")pe={name:"linear"};else if(pe[0]==="exponential"){var Ne=pe[1];if(typeof Ne!="number")return B.error("Exponential interpolation requires a numeric base.",1,1);pe={name:"exponential",base:Ne}}else if(pe[0]==="cubic-bezier"){var rt=pe.slice(1);if(rt.length!==4||rt.some(function(an){return typeof an!="number"||an<0||an>1}))return B.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);pe={name:"cubic-bezier",controlPoints:rt}}else return B.error("Unknown interpolation type "+String(pe[0]),1,0);if(C.length-1<4)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return B.error("Expected an even number of arguments.");if(we=B.parse(we,2,wr),!we)return null;var vt=[],yt=null;te==="interpolate-hcl"||te==="interpolate-lab"?yt=Yn:B.expectedType&&B.expectedType.kind!=="value"&&(yt=B.expectedType);for(var Ut=0;Ut<Me.length;Ut+=2){var ir=Me[Ut],tr=Me[Ut+1],xr=Ut+3,Ur=Ut+4;if(typeof ir!="number")return B.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xr);if(vt.length&&vt[vt.length-1][0]>=ir)return B.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',xr);var hn=B.parse(tr,Ur,yt);if(!hn)return null;yt=yt||hn.type,vt.push([ir,hn])}return yt.kind!=="number"&&yt.kind!=="color"&&!(yt.kind==="array"&&yt.itemType.kind==="number"&&typeof yt.N=="number")?B.error("Type "+Ia(yt)+" is not interpolatable."):new uo(yt,te,pe,we,vt)},uo.prototype.evaluate=function(C){var B=this.labels,te=this.outputs;if(B.length===1)return te[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=B[0])return te[0].evaluate(C);var we=B.length;if(pe>=B[we-1])return te[we-1].evaluate(C);var Me=As(B,pe),Ne=B[Me],rt=B[Me+1],vt=uo.interpolationFactor(this.interpolation,pe,Ne,rt),yt=te[Me].evaluate(C),Ut=te[Me+1].evaluate(C);return this.operator==="interpolate"?rl[this.type.kind.toLowerCase()](yt,Ut,vt):this.operator==="interpolate-hcl"?vs.reverse(vs.interpolate(vs.forward(yt),vs.forward(Ut),vt)):ts.reverse(ts.interpolate(ts.forward(yt),ts.forward(Ut),vt))},uo.prototype.eachChild=function(C){C(this.input);for(var B=0,te=this.outputs;B<te.length;B+=1){var pe=te[B];C(pe)}},uo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},uo.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var B=[this.operator,C,this.input.serialize()],te=0;te<this.labels.length;te++)B.push(this.labels[te],this.outputs[te].serialize());return B};function Pu(k,C,B,te){var pe=te-B,we=k-B;return pe===0?0:C===1?we/pe:(Math.pow(C,we)-1)/(Math.pow(C,pe)-1)}var Wo=function(C,B){this.type=C,this.args=B};Wo.parse=function(C,B){if(C.length<2)return B.error("Expectected at least one argument.");var te=null,pe=B.expectedType;pe&&pe.kind!=="value"&&(te=pe);for(var we=[],Me=0,Ne=C.slice(1);Me<Ne.length;Me+=1){var rt=Ne[Me],vt=B.parse(rt,1+we.length,te,void 0,{typeAnnotation:"omit"});if(!vt)return null;te=te||vt.type,we.push(vt)}var yt=pe&&we.some(function(Ut){return ro(pe,Ut.type)});return yt?new Wo(Sn,we):new Wo(te,we)},Wo.prototype.evaluate=function(C){for(var B=null,te=0,pe,we=0,Me=this.args;we<Me.length;we+=1){var Ne=Me[we];if(te++,B=Ne.evaluate(C),B&&B instanceof Ro&&!B.available&&(pe||(pe=B.name),B=null,te===this.args.length&&(B=pe)),B!==null)break}return B},Wo.prototype.eachChild=function(C){this.args.forEach(C)},Wo.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Wo.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(B){C.push(B.serialize())}),C};var js=function(C,B){this.type=B.type,this.bindings=[].concat(C),this.result=B};js.prototype.evaluate=function(C){return this.result.evaluate(C)},js.prototype.eachChild=function(C){for(var B=0,te=this.bindings;B<te.length;B+=1){var pe=te[B];C(pe[1])}C(this.result)},js.parse=function(C,B){if(C.length<4)return B.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var te=[],pe=1;pe<C.length-1;pe+=2){var we=C[pe];if(typeof we!="string")return B.error("Expected string, but found "+typeof we+" instead.",pe);if(/[^a-zA-Z0-9_]/.test(we))return B.error("Variable names must contain only alphanumeric characters or '_'.",pe);var Me=B.parse(C[pe+1],pe+1);if(!Me)return null;te.push([we,Me])}var Ne=B.parse(C[C.length-1],C.length-1,B.expectedType,te);return Ne?new js(te,Ne):null},js.prototype.outputDefined=function(){return this.result.outputDefined()},js.prototype.serialize=function(){for(var C=["let"],B=0,te=this.bindings;B<te.length;B+=1){var pe=te[B],we=pe[0],Me=pe[1];C.push(we,Me.serialize())}return C.push(this.result.serialize()),C};var Os=function(C,B,te){this.type=C,this.index=B,this.input=te};Os.parse=function(C,B){if(C.length!==3)return B.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1,wr),pe=B.parse(C[2],2,ga(B.expectedType||Sn));if(!te||!pe)return null;var we=pe.type;return new Os(we.itemType,te,pe)},Os.prototype.evaluate=function(C){var B=this.index.evaluate(C),te=this.input.evaluate(C);if(B<0)throw new zi("Array index out of bounds: "+B+" < 0.");if(B>=te.length)throw new zi("Array index out of bounds: "+B+" > "+(te.length-1)+".");if(B!==Math.floor(B))throw new zi("Array index must be an integer, but found "+B+" instead.");return te[B]},Os.prototype.eachChild=function(C){C(this.index),C(this.input)},Os.prototype.outputDefined=function(){return!1},Os.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ms=function(C,B){this.type=An,this.needle=C,this.haystack=B};Ms.parse=function(C,B){if(C.length!==3)return B.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1,Sn),pe=B.parse(C[2],2,Sn);return!te||!pe?null:$o(te.type,[An,Br,wr,_r,Sn])?new Ms(te,pe):B.error("Expected first argument to be of type boolean, string, number or null, but found "+Ia(te.type)+" instead")},Ms.prototype.evaluate=function(C){var B=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!te)return!1;if(!$s(B,["boolean","string","number","null"]))throw new zi("Expected first argument to be of type boolean, string, number or null, but found "+Ia(Fi(B))+" instead.");if(!$s(te,["string","array"]))throw new zi("Expected second argument to be of type array or string, but found "+Ia(Fi(te))+" instead.");return te.indexOf(B)>=0},Ms.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},Ms.prototype.outputDefined=function(){return!0},Ms.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Vo=function(C,B,te){this.type=wr,this.needle=C,this.haystack=B,this.fromIndex=te};Vo.parse=function(C,B){if(C.length<=2||C.length>=5)return B.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1,Sn),pe=B.parse(C[2],2,Sn);if(!te||!pe)return null;if(!$o(te.type,[An,Br,wr,_r,Sn]))return B.error("Expected first argument to be of type boolean, string, number or null, but found "+Ia(te.type)+" instead");if(C.length===4){var we=B.parse(C[3],3,wr);return we?new Vo(te,pe,we):null}else return new Vo(te,pe)},Vo.prototype.evaluate=function(C){var B=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!$s(B,["boolean","string","number","null"]))throw new zi("Expected first argument to be of type boolean, string, number or null, but found "+Ia(Fi(B))+" instead.");if(!$s(te,["string","array"]))throw new zi("Expected second argument to be of type array or string, but found "+Ia(Fi(te))+" instead.");if(this.fromIndex){var pe=this.fromIndex.evaluate(C);return te.indexOf(B,pe)}return te.indexOf(B)},Vo.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},Vo.prototype.outputDefined=function(){return!1},Vo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ki=function(C,B,te,pe,we,Me){this.inputType=C,this.type=B,this.input=te,this.cases=pe,this.outputs=we,this.otherwise=Me};Ki.parse=function(C,B){if(C.length<5)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!==1)return B.error("Expected an even number of arguments.");var te,pe;B.expectedType&&B.expectedType.kind!=="value"&&(pe=B.expectedType);for(var we={},Me=[],Ne=2;Ne<C.length-1;Ne+=2){var rt=C[Ne],vt=C[Ne+1];Array.isArray(rt)||(rt=[rt]);var yt=B.concat(Ne);if(rt.length===0)return yt.error("Expected at least one branch label.");for(var Ut=0,ir=rt;Ut<ir.length;Ut+=1){var tr=ir[Ut];if(typeof tr!="number"&&typeof tr!="string")return yt.error("Branch labels must be numbers or strings.");if(typeof tr=="number"&&Math.abs(tr)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof tr=="number"&&Math.floor(tr)!==tr)return yt.error("Numeric branch labels must be integer values.");if(!te)te=Fi(tr);else if(yt.checkSubtype(te,Fi(tr)))return null;if(typeof we[String(tr)]<"u")return yt.error("Branch labels must be unique.");we[String(tr)]=Me.length}var xr=B.parse(vt,Ne,pe);if(!xr)return null;pe=pe||xr.type,Me.push(xr)}var Ur=B.parse(C[1],1,Sn);if(!Ur)return null;var hn=B.parse(C[C.length-1],C.length-1,pe);return!hn||Ur.type.kind!=="value"&&B.concat(1).checkSubtype(te,Ur.type)?null:new Ki(te,pe,Ur,we,Me,hn)},Ki.prototype.evaluate=function(C){var B=this.input.evaluate(C),te=Fi(B)===this.inputType&&this.outputs[this.cases[B]]||this.otherwise;return te.evaluate(C)},Ki.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Ki.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Ki.prototype.serialize=function(){for(var C=this,B=["match",this.input.serialize()],te=Object.keys(this.cases).sort(),pe=[],we={},Me=0,Ne=te;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=we[this.cases[rt]];vt===void 0?(we[this.cases[rt]]=pe.length,pe.push([this.cases[rt],[rt]])):pe[vt][1].push(rt)}for(var yt=function(Ur){return C.inputType.kind==="number"?Number(Ur):Ur},Ut=0,ir=pe;Ut<ir.length;Ut+=1){var tr=ir[Ut],vt=tr[0],xr=tr[1];xr.length===1?B.push(yt(xr[0])):B.push(xr.map(yt)),B.push(this.outputs[outputIndex$1].serialize())}return B.push(this.otherwise.serialize()),B};var No=function(C,B,te){this.type=C,this.branches=B,this.otherwise=te};No.parse=function(C,B){if(C.length<4)return B.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!==0)return B.error("Expected an odd number of arguments.");var te;B.expectedType&&B.expectedType.kind!=="value"&&(te=B.expectedType);for(var pe=[],we=1;we<C.length-1;we+=2){var Me=B.parse(C[we],we,An);if(!Me)return null;var Ne=B.parse(C[we+1],we+1,te);if(!Ne)return null;pe.push([Me,Ne]),te=te||Ne.type}var rt=B.parse(C[C.length-1],C.length-1,te);return rt?new No(te,pe,rt):null},No.prototype.evaluate=function(C){for(var B=0,te=this.branches;B<te.length;B+=1){var pe=te[B],we=pe[0],Me=pe[1];if(we.evaluate(C))return Me.evaluate(C)}return this.otherwise.evaluate(C)},No.prototype.eachChild=function(C){for(var B=0,te=this.branches;B<te.length;B+=1){var pe=te[B],we=pe[0],Me=pe[1];C(we),C(Me)}C(this.otherwise)},No.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var B=C[1];return B.outputDefined()})&&this.otherwise.outputDefined()},No.prototype.serialize=function(){var C=["case"];return this.eachChild(function(B){C.push(B.serialize())}),C};var ps=function(C,B,te,pe){this.type=C,this.input=B,this.beginIndex=te,this.endIndex=pe};ps.parse=function(C,B){if(C.length<=2||C.length>=5)return B.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1,Sn),pe=B.parse(C[2],2,wr);if(!te||!pe)return null;if(!$o(te.type,[ga(Sn),Br,Sn]))return B.error("Expected first argument to be of type array or string, but found "+Ia(te.type)+" instead");if(C.length===4){var we=B.parse(C[3],3,wr);return we?new ps(te.type,te,pe,we):null}else return new ps(te.type,te,pe)},ps.prototype.evaluate=function(C){var B=this.input.evaluate(C),te=this.beginIndex.evaluate(C);if(!$s(B,["string","array"]))throw new zi("Expected first argument to be of type array or string, but found "+Ia(Fi(B))+" instead.");if(this.endIndex){var pe=this.endIndex.evaluate(C);return B.slice(te,pe)}return B.slice(te)},ps.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Du(k,C){return k==="=="||k==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function $l(k,C,B){return C===B}function Ru(k,C,B){return C!==B}function bt(k,C,B){return C<B}function Bt(k,C,B){return C>B}function dr(k,C,B){return C<=B}function cr(k,C,B){return C>=B}function Or(k,C,B,te){return te.compare(C,B)===0}function ln(k,C,B,te){return!Or(k,C,B,te)}function _n(k,C,B,te){return te.compare(C,B)<0}function Pn(k,C,B,te){return te.compare(C,B)>0}function zn(k,C,B,te){return te.compare(C,B)<=0}function Xn(k,C,B,te){return te.compare(C,B)>=0}function wn(k,C,B){var te=k!=="=="&&k!=="!=";return function(){function pe(we,Me,Ne){this.type=An,this.lhs=we,this.rhs=Me,this.collator=Ne,this.hasUntypedArgument=we.type.kind==="value"||Me.type.kind==="value"}return pe.parse=function(Me,Ne){if(Me.length!==3&&Me.length!==4)return Ne.error("Expected two or three arguments.");var rt=Me[0],vt=Ne.parse(Me[1],1,Sn);if(!vt)return null;if(!Du(rt,vt.type))return Ne.concat(1).error('"'+rt+`" comparisons are not supported for type '`+Ia(vt.type)+"'.");var yt=Ne.parse(Me[2],2,Sn);if(!yt)return null;if(!Du(rt,yt.type))return Ne.concat(2).error('"'+rt+`" comparisons are not supported for type '`+Ia(yt.type)+"'.");if(vt.type.kind!==yt.type.kind&&vt.type.kind!=="value"&&yt.type.kind!=="value")return Ne.error("Cannot compare types '"+Ia(vt.type)+"' and '"+Ia(yt.type)+"'.");te&&(vt.type.kind==="value"&&yt.type.kind!=="value"?vt=new no(yt.type,[vt]):vt.type.kind!=="value"&&yt.type.kind==="value"&&(yt=new no(vt.type,[yt])));var Ut=null;if(Me.length===4){if(vt.type.kind!=="string"&&yt.type.kind!=="string"&&vt.type.kind!=="value"&&yt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(Ut=Ne.parse(Me[3],3,fa),!Ut)return null}return new pe(vt,yt,Ut)},pe.prototype.evaluate=function(Me){var Ne=this.lhs.evaluate(Me),rt=this.rhs.evaluate(Me);if(te&&this.hasUntypedArgument){var vt=Fi(Ne),yt=Fi(rt);if(vt.kind!==yt.kind||!(vt.kind==="string"||vt.kind==="number"))throw new zi('Expected arguments for "'+k+'" to be (string, string) or (number, number), but found ('+vt.kind+", "+yt.kind+") instead.")}if(this.collator&&!te&&this.hasUntypedArgument){var Ut=Fi(Ne),ir=Fi(rt);if(Ut.kind!=="string"||ir.kind!=="string")return C(Me,Ne,rt)}return this.collator?B(Me,Ne,rt,this.collator.evaluate(Me)):C(Me,Ne,rt)},pe.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var Me=[k];return this.eachChild(function(Ne){Me.push(Ne.serialize())}),Me},pe}()}var Un=wn("==",$l,Or),On=wn("!=",Ru,ln),jn=wn("<",bt,_n),ia=wn(">",Bt,Pn),Ga=wn("<=",dr,zn),za=wn(">=",cr,Xn),Ya=function(C,B,te,pe,we){this.type=Br,this.number=C,this.locale=B,this.currency=te,this.minFractionDigits=pe,this.maxFractionDigits=we};Ya.parse=function(C,B){if(C.length!==3)return B.error("Expected two arguments.");var te=B.parse(C[1],1,wr);if(!te)return null;var pe=C[2];if(typeof pe!="object"||Array.isArray(pe))return B.error("NumberFormat options argument must be an object.");var we=null;if(pe.locale&&(we=B.parse(pe.locale,1,Br),!we))return null;var Me=null;if(pe.currency&&(Me=B.parse(pe.currency,1,Br),!Me))return null;var Ne=null;if(pe["min-fraction-digits"]&&(Ne=B.parse(pe["min-fraction-digits"],1,wr),!Ne))return null;var rt=null;return pe["max-fraction-digits"]&&(rt=B.parse(pe["max-fraction-digits"],1,wr),!rt)?null:new Ya(te,we,Me,Ne,rt)},Ya.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Ya.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Ya.prototype.outputDefined=function(){return!1},Ya.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var ja=function(C){this.type=wr,this.input=C};ja.parse=function(C,B){if(C.length!==2)return B.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1);return te?te.type.kind!=="array"&&te.type.kind!=="string"&&te.type.kind!=="value"?B.error("Expected argument of type string or array, but found "+Ia(te.type)+" instead."):new ja(te):null},ja.prototype.evaluate=function(C){var B=this.input.evaluate(C);if(typeof B=="string")return B.length;if(Array.isArray(B))return B.length;throw new zi("Expected value to be of type string or array, but found "+Ia(Fi(B))+" instead.")},ja.prototype.eachChild=function(C){C(this.input)},ja.prototype.outputDefined=function(){return!1},ja.prototype.serialize=function(){var C=["length"];return this.eachChild(function(B){C.push(B.serialize())}),C};var aa={"==":Un,"!=":On,">":ia,"<":jn,">=":za,"<=":Ga,array:no,at:Os,boolean:no,case:No,coalesce:Wo,collator:So,format:us,image:Qs,in:Ms,"index-of":Vo,interpolate:uo,"interpolate-hcl":uo,"interpolate-lab":uo,length:ja,let:js,literal:lo,match:Ki,number:no,"number-format":Ya,object:no,slice:ps,step:zs,string:no,"to-boolean":es,"to-color":es,"to-number":es,"to-string":es,var:Ts,within:cs};function ba(k,C){var B=C[0],te=C[1],pe=C[2],we=C[3];B=B.evaluate(k),te=te.evaluate(k),pe=pe.evaluate(k);var Me=we?we.evaluate(k):1,Ne=Cl(B,te,pe,Me);if(Ne)throw new zi(Ne);return new Ai(B/255*Me,te/255*Me,pe/255*Me,Me)}function Qa(k,C){return k in C}function si(k,C){var B=C[k];return typeof B>"u"?null:B}function Mi(k,C,B,te){for(;B<=te;){var pe=B+te>>1;if(C[pe]===k)return!0;C[pe]>k?te=pe-1:B=pe+1}return!1}function Ei(k){return{type:k}}Oo.register(aa,{error:[na,[Br],function(k,C){var B=C[0];throw new zi(B.evaluate(k))}],typeof:[Br,[Sn],function(k,C){var B=C[0];return Ia(Fi(B.evaluate(k)))}],"to-rgba":[ga(wr,4),[Yn],function(k,C){var B=C[0];return B.evaluate(k).toArray()}],rgb:[Yn,[wr,wr,wr],ba],rgba:[Yn,[wr,wr,wr,wr],ba],has:{type:An,overloads:[[[Br],function(k,C){var B=C[0];return Qa(B.evaluate(k),k.properties())}],[[Br,ua],function(k,C){var B=C[0],te=C[1];return Qa(B.evaluate(k),te.evaluate(k))}]]},get:{type:Sn,overloads:[[[Br],function(k,C){var B=C[0];return si(B.evaluate(k),k.properties())}],[[Br,ua],function(k,C){var B=C[0],te=C[1];return si(B.evaluate(k),te.evaluate(k))}]]},"feature-state":[Sn,[Br],function(k,C){var B=C[0];return si(B.evaluate(k),k.featureState||{})}],properties:[ua,[],function(k){return k.properties()}],"geometry-type":[Br,[],function(k){return k.geometryType()}],id:[Sn,[],function(k){return k.id()}],zoom:[wr,[],function(k){return k.globals.zoom}],"heatmap-density":[wr,[],function(k){return k.globals.heatmapDensity||0}],"line-progress":[wr,[],function(k){return k.globals.lineProgress||0}],accumulated:[Sn,[],function(k){return k.globals.accumulated===void 0?null:k.globals.accumulated}],"+":[wr,Ei(wr),function(k,C){for(var B=0,te=0,pe=C;te<pe.length;te+=1){var we=pe[te];B+=we.evaluate(k)}return B}],"*":[wr,Ei(wr),function(k,C){for(var B=1,te=0,pe=C;te<pe.length;te+=1){var we=pe[te];B*=we.evaluate(k)}return B}],"-":{type:wr,overloads:[[[wr,wr],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)-te.evaluate(k)}],[[wr],function(k,C){var B=C[0];return-B.evaluate(k)}]]},"/":[wr,[wr,wr],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)/te.evaluate(k)}],"%":[wr,[wr,wr],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)%te.evaluate(k)}],ln2:[wr,[],function(){return Math.LN2}],pi:[wr,[],function(){return Math.PI}],e:[wr,[],function(){return Math.E}],"^":[wr,[wr,wr],function(k,C){var B=C[0],te=C[1];return Math.pow(B.evaluate(k),te.evaluate(k))}],sqrt:[wr,[wr],function(k,C){var B=C[0];return Math.sqrt(B.evaluate(k))}],log10:[wr,[wr],function(k,C){var B=C[0];return Math.log(B.evaluate(k))/Math.LN10}],ln:[wr,[wr],function(k,C){var B=C[0];return Math.log(B.evaluate(k))}],log2:[wr,[wr],function(k,C){var B=C[0];return Math.log(B.evaluate(k))/Math.LN2}],sin:[wr,[wr],function(k,C){var B=C[0];return Math.sin(B.evaluate(k))}],cos:[wr,[wr],function(k,C){var B=C[0];return Math.cos(B.evaluate(k))}],tan:[wr,[wr],function(k,C){var B=C[0];return Math.tan(B.evaluate(k))}],asin:[wr,[wr],function(k,C){var B=C[0];return Math.asin(B.evaluate(k))}],acos:[wr,[wr],function(k,C){var B=C[0];return Math.acos(B.evaluate(k))}],atan:[wr,[wr],function(k,C){var B=C[0];return Math.atan(B.evaluate(k))}],min:[wr,Ei(wr),function(k,C){return Math.min.apply(Math,C.map(function(B){return B.evaluate(k)}))}],max:[wr,Ei(wr),function(k,C){return Math.max.apply(Math,C.map(function(B){return B.evaluate(k)}))}],abs:[wr,[wr],function(k,C){var B=C[0];return Math.abs(B.evaluate(k))}],round:[wr,[wr],function(k,C){var B=C[0],te=B.evaluate(k);return te<0?-Math.round(-te):Math.round(te)}],floor:[wr,[wr],function(k,C){var B=C[0];return Math.floor(B.evaluate(k))}],ceil:[wr,[wr],function(k,C){var B=C[0];return Math.ceil(B.evaluate(k))}],"filter-==":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1];return k.properties()[B.value]===te.value}],"filter-id-==":[An,[Sn],function(k,C){var B=C[0];return k.id()===B.value}],"filter-type-==":[An,[Br],function(k,C){var B=C[0];return k.geometryType()===B.value}],"filter-<":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1],pe=k.properties()[B.value],we=te.value;return typeof pe==typeof we&&pe<we}],"filter-id-<":[An,[Sn],function(k,C){var B=C[0],te=k.id(),pe=B.value;return typeof te==typeof pe&&te<pe}],"filter->":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1],pe=k.properties()[B.value],we=te.value;return typeof pe==typeof we&&pe>we}],"filter-id->":[An,[Sn],function(k,C){var B=C[0],te=k.id(),pe=B.value;return typeof te==typeof pe&&te>pe}],"filter-<=":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1],pe=k.properties()[B.value],we=te.value;return typeof pe==typeof we&&pe<=we}],"filter-id-<=":[An,[Sn],function(k,C){var B=C[0],te=k.id(),pe=B.value;return typeof te==typeof pe&&te<=pe}],"filter->=":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1],pe=k.properties()[B.value],we=te.value;return typeof pe==typeof we&&pe>=we}],"filter-id->=":[An,[Sn],function(k,C){var B=C[0],te=k.id(),pe=B.value;return typeof te==typeof pe&&te>=pe}],"filter-has":[An,[Sn],function(k,C){var B=C[0];return B.value in k.properties()}],"filter-has-id":[An,[],function(k){return k.id()!==null&&k.id()!==void 0}],"filter-type-in":[An,[ga(Br)],function(k,C){var B=C[0];return B.value.indexOf(k.geometryType())>=0}],"filter-id-in":[An,[ga(Sn)],function(k,C){var B=C[0];return B.value.indexOf(k.id())>=0}],"filter-in-small":[An,[Br,ga(Sn)],function(k,C){var B=C[0],te=C[1];return te.value.indexOf(k.properties()[B.value])>=0}],"filter-in-large":[An,[Br,ga(Sn)],function(k,C){var B=C[0],te=C[1];return Mi(k.properties()[B.value],te.value,0,te.value.length-1)}],all:{type:An,overloads:[[[An,An],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)&&te.evaluate(k)}],[Ei(An),function(k,C){for(var B=0,te=C;B<te.length;B+=1){var pe=te[B];if(!pe.evaluate(k))return!1}return!0}]]},any:{type:An,overloads:[[[An,An],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)||te.evaluate(k)}],[Ei(An),function(k,C){for(var B=0,te=C;B<te.length;B+=1){var pe=te[B];if(pe.evaluate(k))return!0}return!1}]]},"!":[An,[An],function(k,C){var B=C[0];return!B.evaluate(k)}],"is-supported-script":[An,[Br],function(k,C){var B=C[0],te=k.globals&&k.globals.isSupportedScript;return te?te(B.evaluate(k)):!0}],upcase:[Br,[Br],function(k,C){var B=C[0];return B.evaluate(k).toUpperCase()}],downcase:[Br,[Br],function(k,C){var B=C[0];return B.evaluate(k).toLowerCase()}],concat:[Br,Ei(Sn),function(k,C){return C.map(function(B){return vl(B.evaluate(k))}).join("")}],"resolved-locale":[Br,[fa],function(k,C){var B=C[0];return B.evaluate(k).resolvedLocale()}]});function wi(k){return{result:"success",value:k}}function Pi(k){return{result:"error",value:k}}function hi(k){return k["property-type"]==="data-driven"||k["property-type"]==="cross-faded-data-driven"}function ko(k){return!!k.expression&&k.expression.parameters.indexOf("zoom")>-1}function ao(k){return!!k.expression&&k.expression.interpolated}function li(k){return k instanceof Number?"number":k instanceof String?"string":k instanceof Boolean?"boolean":Array.isArray(k)?"array":k===null?"null":typeof k}function Aa(k){return typeof k=="object"&&k!==null&&!Array.isArray(k)}function ki(k){return k}function bo(k,C){var B=C.type==="color",te=k.stops&&typeof k.stops[0][0]=="object",pe=te||k.property!==void 0,we=te||!pe,Me=k.type||(ao(C)?"exponential":"interval");if(B&&(k=mn({},k),k.stops&&(k.stops=k.stops.map(function(va){return[va[0],Ai.parse(va[1])]})),k.default?k.default=Ai.parse(k.default):k.default=Ai.parse(C.default)),k.colorSpace&&k.colorSpace!=="rgb"&&!Nl[k.colorSpace])throw new Error("Unknown color space: "+k.colorSpace);var Ne,rt,vt;if(Me==="exponential")Ne=Co;else if(Me==="interval")Ne=Ns;else if(Me==="categorical"){Ne=ds,rt=Object.create(null);for(var yt=0,Ut=k.stops;yt<Ut.length;yt+=1){var ir=Ut[yt];rt[ir[0]]=ir[1]}vt=typeof k.stops[0][0]}else if(Me==="identity")Ne=ol;else throw new Error('Unknown function type "'+Me+'"');if(te){for(var tr={},xr=[],Ur=0;Ur<k.stops.length;Ur++){var hn=k.stops[Ur],an=hn[0].zoom;tr[an]===void 0&&(tr[an]={zoom:an,type:k.type,property:k.property,default:k.default,stops:[]},xr.push(an)),tr[an].stops.push([hn[0].value,hn[1]])}for(var Rn=[],Mn=0,Dn=xr;Mn<Dn.length;Mn+=1){var Vn=Dn[Mn];Rn.push([tr[Vn].zoom,bo(tr[Vn],C)])}var qn={name:"linear"};return{kind:"composite",interpolationType:qn,interpolationFactor:uo.interpolationFactor.bind(void 0,qn),zoomStops:Rn.map(function(va){return va[0]}),evaluate:function(Wa,Da){var Oa=Wa.zoom;return Co({stops:Rn,base:k.base},C,Oa).evaluate(Oa,Da)}}}else if(we){var da=Me==="exponential"?{name:"exponential",base:k.base!==void 0?k.base:1}:null;return{kind:"camera",interpolationType:da,interpolationFactor:uo.interpolationFactor.bind(void 0,da),zoomStops:k.stops.map(function(va){return va[0]}),evaluate:function(va){var Wa=va.zoom;return Ne(k,C,Wa,rt,vt)}}}else return{kind:"source",evaluate:function(Wa,Da){var Oa=Da&&Da.properties?Da.properties[k.property]:void 0;return Oa===void 0?Mo(k.default,C.default):Ne(k,C,Oa,rt,vt)}}}function Mo(k,C,B){if(k!==void 0)return k;if(C!==void 0)return C;if(B!==void 0)return B}function ds(k,C,B,te,pe){var we=typeof B===pe?te[B]:void 0;return Mo(we,k.default,C.default)}function Ns(k,C,B){if(li(B)!=="number")return Mo(k.default,C.default);var te=k.stops.length;if(te===1||B<=k.stops[0][0])return k.stops[0][1];if(B>=k.stops[te-1][0])return k.stops[te-1][1];var pe=As(k.stops.map(function(we){return we[0]}),B);return k.stops[pe][1]}function Co(k,C,B){var te=k.base!==void 0?k.base:1;if(li(B)!=="number")return Mo(k.default,C.default);var pe=k.stops.length;if(pe===1||B<=k.stops[0][0])return k.stops[0][1];if(B>=k.stops[pe-1][0])return k.stops[pe-1][1];var we=As(k.stops.map(function(Ut){return Ut[0]}),B),Me=Bs(B,te,k.stops[we][0],k.stops[we+1][0]),Ne=k.stops[we][1],rt=k.stops[we+1][1],vt=rl[C.type]||ki;if(k.colorSpace&&k.colorSpace!=="rgb"){var yt=Nl[k.colorSpace];vt=function(Ut,ir){return yt.reverse(yt.interpolate(yt.forward(Ut),yt.forward(ir),Me))}}return typeof Ne.evaluate=="function"?{evaluate:function(){for(var ir=[],tr=arguments.length;tr--;)ir[tr]=arguments[tr];var xr=Ne.evaluate.apply(void 0,ir),Ur=rt.evaluate.apply(void 0,ir);if(!(xr===void 0||Ur===void 0))return vt(xr,Ur,Me)}}:vt(Ne,rt,Me)}function ol(k,C,B){return C.type==="color"?B=Ai.parse(B):C.type==="formatted"?B=Zi.fromString(B.toString()):C.type==="resolvedImage"?B=Ro.fromString(B.toString()):li(B)!==C.type&&(C.type!=="enum"||!C.values[B])&&(B=void 0),Mo(B,k.default,C.default)}function Bs(k,C,B,te){var pe=te-B,we=k-B;return pe===0?0:C===1?we/pe:(Math.pow(C,we)-1)/(Math.pow(C,pe)-1)}var Fo=function(C,B){this.expression=C,this._warningHistory={},this._evaluator=new Rs,this._defaultValue=B?Ju(B):null,this._enumValues=B&&B.type==="enum"?B.values:null};Fo.prototype.evaluateWithoutErrorHandling=function(C,B,te,pe,we,Me){return this._evaluator.globals=C,this._evaluator.feature=B,this._evaluator.featureState=te,this._evaluator.canonical=pe,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},Fo.prototype.evaluate=function(C,B,te,pe,we,Me){this._evaluator.globals=C,this._evaluator.feature=B||null,this._evaluator.featureState=te||null,this._evaluator.canonical=pe,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=Me||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!==Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new zi("Expected value to be one of "+Object.keys(this._enumValues).map(function(rt){return JSON.stringify(rt)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(rt){return this._warningHistory[rt.message]||(this._warningHistory[rt.message]=!0,typeof console<"u"&&console.warn(rt.message)),this._defaultValue}};function Lo(k){return Array.isArray(k)&&k.length>0&&typeof k[0]=="string"&&k[0]in aa}function Ql(k,C){var B=new Io(aa,[],C?gu(C):void 0),te=B.parse(k,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return te?wi(new Fo(te,C)):Pi(B.errors)}var du=function(C,B){this.kind=C,this._styleExpression=B,this.isStateDependent=C!=="constant"&&!tl(B.expression)};du.prototype.evaluateWithoutErrorHandling=function(C,B,te,pe,we,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,B,te,pe,we,Me)},du.prototype.evaluate=function(C,B,te,pe,we,Me){return this._styleExpression.evaluate(C,B,te,pe,we,Me)};var gs=function(C,B,te,pe){this.kind=C,this.zoomStops=te,this._styleExpression=B,this.isStateDependent=C!=="camera"&&!tl(B.expression),this.interpolationType=pe};gs.prototype.evaluateWithoutErrorHandling=function(C,B,te,pe,we,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,B,te,pe,we,Me)},gs.prototype.evaluate=function(C,B,te,pe,we,Me){return this._styleExpression.evaluate(C,B,te,pe,we,Me)},gs.prototype.interpolationFactor=function(C,B,te){return this.interpolationType?uo.interpolationFactor(this.interpolationType,C,B,te):0};function Iu(k,C){if(k=Ql(k,C),k.result==="error")return k;var B=k.value.expression,te=Yo(B);if(!te&&!hi(C))return Pi([new Tn("","data expressions not supported")]);var pe=hu(B,["zoom"]);if(!pe&&!ko(C))return Pi([new Tn("","zoom expressions not supported")]);var we=Ku(B);if(!we&&!pe)return Pi([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(we instanceof Tn)return Pi([we]);if(we instanceof uo&&!ao(C))return Pi([new Tn("",'"interpolate" expressions cannot be used with this property')]);if(!we)return wi(te?new du("constant",k.value):new du("source",k.value));var Me=we instanceof uo?we.interpolation:void 0;return wi(te?new gs("camera",k.value,we.labels,Me):new gs("composite",k.value,we.labels,Me))}var ql=function(C,B){this._parameters=C,this._specification=B,mn(this,bo(this._parameters,this._specification))};ql.deserialize=function(C){return new ql(C._parameters,C._specification)},ql.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function Gc(k,C){if(Aa(k))return new ql(k,C);if(Lo(k)){var B=Iu(k,C);if(B.result==="error")throw new Error(B.value.map(function(pe){return pe.key+": "+pe.message}).join(", "));return B.value}else{var te=k;return typeof k=="string"&&C.type==="color"&&(te=Ai.parse(k)),{kind:"constant",evaluate:function(){return te}}}}function Ku(k){var C=null;if(k instanceof js)C=Ku(k.result);else if(k instanceof Wo)for(var B=0,te=k.args;B<te.length;B+=1){var pe=te[B];if(C=Ku(pe),C)break}else(k instanceof zs||k instanceof uo)&&k.input instanceof Oo&&k.input.name==="zoom"&&(C=k);return C instanceof Tn||k.eachChild(function(we){var Me=Ku(we);Me instanceof Tn?C=Me:!C&&Me?C=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&Me&&C!==Me&&(C=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function gu(k){var C={color:Yn,string:Br,number:wr,enum:Br,boolean:An,formatted:Ma,resolvedImage:ka};return k.type==="array"?ga(C[k.value]||Sn,k.length):C[k.type]}function Ju(k){return k.type==="color"&&Aa(k.default)?new Ai(0,0,0,0):k.type==="color"?Ai.parse(k.default)||null:k.default===void 0?null:k.default}function Es(k){var C=k.key,B=k.value,te=k.valueSpec||{},pe=k.objectElementValidators||{},we=k.style,Me=k.styleSpec,Ne=[],rt=li(B);if(rt!=="object")return[new gr(C,B,"object expected, "+rt+" found")];for(var vt in B){var yt=vt.split(".")[0],Ut=te[yt]||te["*"],ir=void 0;if(pe[yt])ir=pe[yt];else if(te[yt])ir=Ti;else if(pe["*"])ir=pe["*"];else if(te["*"])ir=Ti;else{Ne.push(new gr(C,B[vt],'unknown property "'+vt+'"'));continue}Ne=Ne.concat(ir({key:(C&&C+".")+vt,value:B[vt],valueSpec:Ut,style:we,styleSpec:Me,object:B,objectKey:vt},B))}for(var tr in te)pe[tr]||te[tr].required&&te[tr].default===void 0&&B[tr]===void 0&&Ne.push(new gr(C,B,'missing required property "'+tr+'"'));return Ne}function _l(k){var C=k.value,B=k.valueSpec,te=k.style,pe=k.styleSpec,we=k.key,Me=k.arrayElementValidator||Ti;if(li(C)!=="array")return[new gr(we,C,"array expected, "+li(C)+" found")];if(B.length&&C.length!==B.length)return[new gr(we,C,"array length "+B.length+" expected, length "+C.length+" found")];if(B["min-length"]&&C.length<B["min-length"])return[new gr(we,C,"array length at least "+B["min-length"]+" expected, length "+C.length+" found")];var Ne={type:B.value,values:B.values};pe.$version<7&&(Ne.function=B.function),li(B.value)==="object"&&(Ne=B.value);for(var rt=[],vt=0;vt<C.length;vt++)rt=rt.concat(Me({array:C,arrayIndex:vt,value:C[vt],valueSpec:Ne,style:te,styleSpec:pe,key:we+"["+vt+"]"}));return rt}function Fu(k){var C=k.key,B=k.value,te=k.valueSpec,pe=li(B);return pe==="number"&&B!==B&&(pe="NaN"),pe!=="number"?[new gr(C,B,"number expected, "+pe+" found")]:"minimum"in te&&B<te.minimum?[new gr(C,B,B+" is less than the minimum value "+te.minimum)]:"maximum"in te&&B>te.maximum?[new gr(C,B,B+" is greater than the maximum value "+te.maximum)]:[]}function yu(k){var C=k.valueSpec,B=sn(k.value.type),te,pe={},we,Me,Ne=B!=="categorical"&&k.value.property===void 0,rt=!Ne,vt=li(k.value.stops)==="array"&&li(k.value.stops[0])==="array"&&li(k.value.stops[0][0])==="object",yt=Es({key:k.key,value:k.value,valueSpec:k.styleSpec.function,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{stops:Ut,default:xr}});return B==="identity"&&Ne&&yt.push(new gr(k.key,k.value,'missing required property "property"')),B!=="identity"&&!k.value.stops&&yt.push(new gr(k.key,k.value,'missing required property "stops"')),B==="exponential"&&k.valueSpec.expression&&!ao(k.valueSpec)&&yt.push(new gr(k.key,k.value,"exponential functions not supported")),k.styleSpec.$version>=8&&(rt&&!hi(k.valueSpec)?yt.push(new gr(k.key,k.value,"property functions not supported")):Ne&&!ko(k.valueSpec)&&yt.push(new gr(k.key,k.value,"zoom functions not supported"))),(B==="categorical"||vt)&&k.value.property===void 0&&yt.push(new gr(k.key,k.value,'"property" property is required')),yt;function Ut(Ur){if(B==="identity")return[new gr(Ur.key,Ur.value,'identity function may not have a "stops" property')];var hn=[],an=Ur.value;return hn=hn.concat(_l({key:Ur.key,value:an,valueSpec:Ur.valueSpec,style:Ur.style,styleSpec:Ur.styleSpec,arrayElementValidator:ir})),li(an)==="array"&&an.length===0&&hn.push(new gr(Ur.key,an,"array must have at least one stop")),hn}function ir(Ur){var hn=[],an=Ur.value,Rn=Ur.key;if(li(an)!=="array")return[new gr(Rn,an,"array expected, "+li(an)+" found")];if(an.length!==2)return[new gr(Rn,an,"array length 2 expected, length "+an.length+" found")];if(vt){if(li(an[0])!=="object")return[new gr(Rn,an,"object expected, "+li(an[0])+" found")];if(an[0].zoom===void 0)return[new gr(Rn,an,"object stop key must have zoom")];if(an[0].value===void 0)return[new gr(Rn,an,"object stop key must have value")];if(Me&&Me>sn(an[0].zoom))return[new gr(Rn,an[0].zoom,"stop zoom values must appear in ascending order")];sn(an[0].zoom)!==Me&&(Me=sn(an[0].zoom),we=void 0,pe={}),hn=hn.concat(Es({key:Rn+"[0]",value:an[0],valueSpec:{zoom:{}},style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{zoom:Fu,value:tr}}))}else hn=hn.concat(tr({key:Rn+"[0]",value:an[0],valueSpec:{},style:Ur.style,styleSpec:Ur.styleSpec},an));return Lo(Cn(an[1]))?hn.concat([new gr(Rn+"[1]",an[1],"expressions are not allowed in function stops.")]):hn.concat(Ti({key:Rn+"[1]",value:an[1],valueSpec:C,style:Ur.style,styleSpec:Ur.styleSpec}))}function tr(Ur,hn){var an=li(Ur.value),Rn=sn(Ur.value),Mn=Ur.value!==null?Ur.value:hn;if(!te)te=an;else if(an!==te)return[new gr(Ur.key,Mn,an+" stop domain type must match previous stop domain type "+te)];if(an!=="number"&&an!=="string"&&an!=="boolean")return[new gr(Ur.key,Mn,"stop domain value must be a number, string, or boolean")];if(an!=="number"&&B!=="categorical"){var Dn="number expected, "+an+" found";return hi(C)&&B===void 0&&(Dn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gr(Ur.key,Mn,Dn)]}return B==="categorical"&&an==="number"&&(!isFinite(Rn)||Math.floor(Rn)!==Rn)?[new gr(Ur.key,Mn,"integer expected, found "+Rn)]:B!=="categorical"&&an==="number"&&we!==void 0&&Rn<we?[new gr(Ur.key,Mn,"stop domain values must appear in ascending order")]:(we=Rn,B==="categorical"&&Rn in pe?[new gr(Ur.key,Mn,"stop domain values must be unique")]:(pe[Rn]=!0,[]))}function xr(Ur){return Ti({key:Ur.key,value:Ur.value,valueSpec:C,style:Ur.style,styleSpec:Ur.styleSpec})}}function Xo(k){var C=(k.expressionContext==="property"?Iu:Ql)(Cn(k.value),k.valueSpec);if(C.result==="error")return C.value.map(function(te){return new gr(""+k.key+te.key,k.value,te.message)});var B=C.value.expression||C.value._styleExpression.expression;if(k.expressionContext==="property"&&k.propertyKey==="text-font"&&!B.outputDefined())return[new gr(k.key,k.value,'Invalid data expression for "'+k.propertyKey+'". Output values must be contained as literals within the expression.')];if(k.expressionContext==="property"&&k.propertyType==="layout"&&!tl(B))return[new gr(k.key,k.value,'"feature-state" data expressions are not supported with layout properties.')];if(k.expressionContext==="filter"&&!tl(B))return[new gr(k.key,k.value,'"feature-state" data expressions are not supported with filters.')];if(k.expressionContext&&k.expressionContext.indexOf("cluster")===0){if(!hu(B,["zoom","feature-state"]))return[new gr(k.key,k.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(k.expressionContext==="cluster-initial"&&!Yo(B))return[new gr(k.key,k.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $u(k){var C=k.value,B=k.key,te=li(C);return te!=="boolean"?[new gr(B,C,"boolean expected, "+te+" found")]:[]}function kc(k){var C=k.key,B=k.value,te=li(B);return te!=="string"?[new gr(C,B,"color expected, "+te+" found")]:Wl(B)===null?[new gr(C,B,'color expected, "'+B+'" found')]:[]}function rs(k){var C=k.key,B=k.value,te=k.valueSpec,pe=[];return Array.isArray(te.values)?te.values.indexOf(sn(B))===-1&&pe.push(new gr(C,B,"expected one of ["+te.values.join(", ")+"], "+JSON.stringify(B)+" found")):Object.keys(te.values).indexOf(sn(B))===-1&&pe.push(new gr(C,B,"expected one of ["+Object.keys(te.values).join(", ")+"], "+JSON.stringify(B)+" found")),pe}function zu(k){if(k===!0||k===!1)return!0;if(!Array.isArray(k)||k.length===0)return!1;switch(k[0]){case"has":return k.length>=2&&k[1]!=="$id"&&k[1]!=="$type";case"in":return k.length>=3&&(typeof k[1]!="string"||Array.isArray(k[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return k.length!==3||Array.isArray(k[1])||Array.isArray(k[2]);case"any":case"all":for(var C=0,B=k.slice(1);C<B.length;C+=1){var te=B[C];if(!zu(te)&&typeof te!="boolean")return!1}return!0;default:return!0}}var Ou={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qu(k){if(k==null)return{filter:function(){return!0},needGeometry:!1};zu(k)||(k=nt(k));var C=Ql(k,Ou);if(C.result==="error")throw new Error(C.value.map(function(te){return te.key+": "+te.message}).join(", "));var B=je(k);return{filter:function(te,pe,we){return C.value.evaluate(te,pe,{},we)},needGeometry:B}}function Oe(k,C){return k<C?-1:k>C?1:0}function je(k){if(!Array.isArray(k))return!1;if(k[0]==="within")return!0;for(var C=1;C<k.length;C++)if(je(k[C]))return!0;return!1}function nt(k){if(!k)return!0;var C=k[0];if(k.length<=1)return C!=="any";var B=C==="=="?ut(k[1],k[2],"=="):C==="!="?vr(ut(k[1],k[2],"==")):C==="<"||C===">"||C==="<="||C===">="?ut(k[1],k[2],C):C==="any"?Tt(k.slice(1)):C==="all"?["all"].concat(k.slice(1).map(nt)):C==="none"?["all"].concat(k.slice(1).map(nt).map(vr)):C==="in"?_t(k[1],k.slice(2)):C==="!in"?vr(_t(k[1],k.slice(2))):C==="has"?kt(k[1]):C==="!has"?vr(kt(k[1])):C==="within"?k:!0;return B}function ut(k,C,B){switch(k){case"$type":return["filter-type-"+B,C];case"$id":return["filter-id-"+B,C];default:return["filter-"+B,k,C]}}function Tt(k){return["any"].concat(k.map(nt))}function _t(k,C){if(C.length===0)return!1;switch(k){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(B){return typeof B!=typeof C[0]})?["filter-in-large",k,["literal",C.sort(Oe)]]:["filter-in-small",k,["literal",C]]}}function kt(k){switch(k){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",k]}}function vr(k){return["!",k]}function yr(k){return zu(Cn(k.value))?Xo(mn({},k,{expressionContext:"filter",valueSpec:{value:"boolean"}})):fr(k)}function fr(k){var C=k.value,B=k.key;if(li(C)!=="array")return[new gr(B,C,"array expected, "+li(C)+" found")];var te=k.styleSpec,pe,we=[];if(C.length<1)return[new gr(B,C,"filter array must have at least 1 element")];switch(we=we.concat(rs({key:B+"[0]",value:C[0],valueSpec:te.filter_operator,style:k.style,styleSpec:k.styleSpec})),sn(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&sn(C[1])==="$type"&&we.push(new gr(B,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&we.push(new gr(B,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(pe=li(C[1]),pe!=="string"&&we.push(new gr(B+"[1]",C[1],"string expected, "+pe+" found")));for(var Me=2;Me<C.length;Me++)pe=li(C[Me]),sn(C[1])==="$type"?we=we.concat(rs({key:B+"["+Me+"]",value:C[Me],valueSpec:te.geometry_type,style:k.style,styleSpec:k.styleSpec})):pe!=="string"&&pe!=="number"&&pe!=="boolean"&&we.push(new gr(B+"["+Me+"]",C[Me],"string, number, or boolean expected, "+pe+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<C.length;Ne++)we=we.concat(fr({key:B+"["+Ne+"]",value:C[Ne],style:k.style,styleSpec:k.styleSpec}));break;case"has":case"!has":pe=li(C[1]),C.length!==2?we.push(new gr(B,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="string"&&we.push(new gr(B+"[1]",C[1],"string expected, "+pe+" found"));break;case"within":pe=li(C[1]),C.length!==2?we.push(new gr(B,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="object"&&we.push(new gr(B+"[1]",C[1],"object expected, "+pe+" found"));break}return we}function Tr(k,C){var B=k.key,te=k.style,pe=k.styleSpec,we=k.value,Me=k.objectKey,Ne=pe[C+"_"+k.layerType];if(!Ne)return[];var rt=Me.match(/^(.*)-transition$/);if(C==="paint"&&rt&&Ne[rt[1]]&&Ne[rt[1]].transition)return Ti({key:B,value:we,valueSpec:pe.transition,style:te,styleSpec:pe});var vt=k.valueSpec||Ne[Me];if(!vt)return[new gr(B,we,'unknown property "'+Me+'"')];var yt;if(li(we)==="string"&&hi(vt)&&!vt.tokens&&(yt=/^{([^}]+)}$/.exec(we)))return[new gr(B,we,'"'+Me+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var Ut=[];return k.layerType==="symbol"&&(Me==="text-field"&&te&&!te.glyphs&&Ut.push(new gr(B,we,'use of "text-field" requires a style "glyphs" property')),Me==="text-font"&&Aa(Cn(we))&&sn(we.type)==="identity"&&Ut.push(new gr(B,we,'"text-font" does not support identity functions'))),Ut.concat(Ti({key:k.key,value:we,valueSpec:vt,style:te,styleSpec:pe,expressionContext:"property",propertyType:C,propertyKey:Me}))}function zr(k){return Tr(k,"paint")}function Qr(k){return Tr(k,"layout")}function on(k){var C=[],B=k.value,te=k.key,pe=k.style,we=k.styleSpec;!B.type&&!B.ref&&C.push(new gr(te,B,'either "type" or "ref" is required'));var Me=sn(B.type),Ne=sn(B.ref);if(B.id)for(var rt=sn(B.id),vt=0;vt<k.arrayIndex;vt++){var yt=pe.layers[vt];sn(yt.id)===rt&&C.push(new gr(te,B.id,'duplicate layer id "'+B.id+'", previously used at line '+yt.id.__line__))}if("ref"in B){["type","source","source-layer","filter","layout"].forEach(function(xr){xr in B&&C.push(new gr(te,B[xr],'"'+xr+'" is prohibited for ref layers'))});var Ut;pe.layers.forEach(function(xr){sn(xr.id)===Ne&&(Ut=xr)}),Ut?Ut.ref?C.push(new gr(te,B.ref,"ref cannot reference another ref layer")):Me=sn(Ut.type):C.push(new gr(te,B.ref,'ref layer "'+Ne+'" not found'))}else if(Me!=="background")if(!B.source)C.push(new gr(te,B,'missing required property "source"'));else{var ir=pe.sources&&pe.sources[B.source],tr=ir&&sn(ir.type);ir?tr==="vector"&&Me==="raster"?C.push(new gr(te,B.source,'layer "'+B.id+'" requires a raster source')):tr==="raster"&&Me!=="raster"?C.push(new gr(te,B.source,'layer "'+B.id+'" requires a vector source')):tr==="vector"&&!B["source-layer"]?C.push(new gr(te,B,'layer "'+B.id+'" must specify a "source-layer"')):tr==="raster-dem"&&Me!=="hillshade"?C.push(new gr(te,B.source,"raster-dem source can only be used with layer type 'hillshade'.")):Me==="line"&&B.paint&&B.paint["line-gradient"]&&(tr!=="geojson"||!ir.lineMetrics)&&C.push(new gr(te,B,'layer "'+B.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new gr(te,B.source,'source "'+B.source+'" not found'))}return C=C.concat(Es({key:te,value:B,valueSpec:we.layer,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ti({key:te+".type",value:B.type,valueSpec:we.layer.type,style:k.style,styleSpec:k.styleSpec,object:B,objectKey:"type"})},filter:yr,layout:function(Ur){return Es({layer:B,key:Ur.key,value:Ur.value,style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{"*":function(an){return Qr(mn({layerType:Me},an))}}})},paint:function(Ur){return Es({layer:B,key:Ur.key,value:Ur.value,style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{"*":function(an){return zr(mn({layerType:Me},an))}}})}}})),C}function En(k){var C=k.value,B=k.key,te=li(C);return te!=="string"?[new gr(B,C,"string expected, "+te+" found")]:[]}var Nn={promoteId:Ta};function Jn(k){var C=k.value,B=k.key,te=k.styleSpec,pe=k.style;if(!C.type)return[new gr(B,C,'"type" is required')];var we=sn(C.type),Me;switch(we){case"vector":case"raster":case"raster-dem":return Me=Es({key:B,value:C,valueSpec:te["source_"+we.replace("-","_")],style:k.style,styleSpec:te,objectElementValidators:Nn}),Me;case"geojson":if(Me=Es({key:B,value:C,valueSpec:te.source_geojson,style:pe,styleSpec:te,objectElementValidators:Nn}),C.cluster)for(var Ne in C.clusterProperties){var rt=C.clusterProperties[Ne],vt=rt[0],yt=rt[1],Ut=typeof vt=="string"?[vt,["accumulated"],["get",Ne]]:vt;Me.push.apply(Me,Xo({key:B+"."+Ne+".map",value:yt,expressionContext:"cluster-map"})),Me.push.apply(Me,Xo({key:B+"."+Ne+".reduce",value:Ut,expressionContext:"cluster-reduce"}))}return Me;case"video":return Es({key:B,value:C,valueSpec:te.source_video,style:pe,styleSpec:te});case"image":return Es({key:B,value:C,valueSpec:te.source_image,style:pe,styleSpec:te});case"canvas":return[new gr(B,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rs({key:B+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:te})}}function Ta(k){var C=k.key,B=k.value;if(li(B)==="string")return En({key:C,value:B});var te=[];for(var pe in B)te.push.apply(te,En({key:C+"."+pe,value:B[pe]}));return te}function Ea(k){var C=k.value,B=k.styleSpec,te=B.light,pe=k.style,we=[],Me=li(C);if(C===void 0)return we;if(Me!=="object")return we=we.concat([new gr("light",C,"object expected, "+Me+" found")]),we;for(var Ne in C){var rt=Ne.match(/^(.*)-transition$/);rt&&te[rt[1]]&&te[rt[1]].transition?we=we.concat(Ti({key:Ne,value:C[Ne],valueSpec:B.transition,style:pe,styleSpec:B})):te[Ne]?we=we.concat(Ti({key:Ne,value:C[Ne],valueSpec:te[Ne],style:pe,styleSpec:B})):we=we.concat([new gr(Ne,C[Ne],'unknown property "'+Ne+'"')])}return we}function ni(k){return En(k).length===0?[]:Xo(k)}function qa(k){return En(k).length===0?[]:Xo(k)}var ai={"*":function(){return[]},array:_l,boolean:$u,number:Fu,color:kc,constants:un,enum:rs,filter:yr,function:yu,layer:on,object:Es,source:Jn,light:Ea,string:En,formatted:ni,resolvedImage:qa};function Ti(k){var C=k.value,B=k.valueSpec,te=k.styleSpec;if(B.expression&&Aa(sn(C)))return yu(k);if(B.expression&&Lo(Cn(C)))return Xo(k);if(B.type&&ai[B.type])return ai[B.type](k);var pe=Es(mn({},k,{valueSpec:B.type?te[B.type]:B}));return pe}function Yr(k){var C=k.value,B=k.key,te=En(k);return te.length||(C.indexOf("{fontstack}")===-1&&te.push(new gr(B,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&te.push(new gr(B,C,'"glyphs" url must include a "{range}" token'))),te}function et(k,C){C===void 0&&(C=Yt);var B=[];return B=B.concat(Ti({key:"",value:k,valueSpec:C.$root,styleSpec:C,style:k,objectElementValidators:{glyphs:Yr,"*":function(){return[]}}})),k.constants&&(B=B.concat(un({key:"constants",value:k.constants,style:k,styleSpec:C}))),Jt(B)}et.source=Kr(Jn),et.light=Kr(Ea),et.layer=Kr(on),et.filter=Kr(yr),et.paintProperty=Kr(zr),et.layoutProperty=Kr(Qr);function Jt(k){return[].concat(k).sort(function(C,B){return C.line-B.line})}function Kr(k){return function(){for(var C=[],B=arguments.length;B--;)C[B]=arguments[B];return Jt(k.apply(this,C))}}var Hn=et,ta=Hn.light,ea=Hn.paintProperty,vi=Hn.layoutProperty;function Di(k,C){var B=!1;if(C&&C.length)for(var te=0,pe=C;te<pe.length;te+=1){var we=pe[te];k.fire(new Ar(new Error(we.message))),B=!0}return B}var Ji=ce,Ri=3;function ce(k,C,B){var te=this.cells=[];if(k instanceof ArrayBuffer){this.arrayBuffer=k;var pe=new Int32Array(this.arrayBuffer);k=pe[0],C=pe[1],B=pe[2],this.d=C+2*B;for(var we=0;we<this.d*this.d;we++){var Me=pe[Ri+we],Ne=pe[Ri+we+1];te.push(Me===Ne?null:pe.subarray(Me,Ne))}var rt=pe[Ri+te.length],vt=pe[Ri+te.length+1];this.keys=pe.subarray(rt,vt),this.bboxes=pe.subarray(vt),this.insert=this._insertReadonly}else{this.d=C+2*B;for(var yt=0;yt<this.d*this.d;yt++)te.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=k,this.padding=B,this.scale=C/k,this.uid=0;var Ut=B/C*k;this.min=-Ut,this.max=k+Ut}ce.prototype.insert=function(k,C,B,te,pe){this._forEachCell(C,B,te,pe,this._insertCell,this.uid++),this.keys.push(k),this.bboxes.push(C),this.bboxes.push(B),this.bboxes.push(te),this.bboxes.push(pe)},ce.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ce.prototype._insertCell=function(k,C,B,te,pe,we){this.cells[pe].push(we)},ce.prototype.query=function(k,C,B,te,pe){var we=this.min,Me=this.max;if(k<=we&&C<=we&&Me<=B&&Me<=te&&!pe)return Array.prototype.slice.call(this.keys);var Ne=[],rt={};return this._forEachCell(k,C,B,te,this._queryCell,Ne,rt,pe),Ne},ce.prototype._queryCell=function(k,C,B,te,pe,we,Me,Ne){var rt=this.cells[pe];if(rt!==null)for(var vt=this.keys,yt=this.bboxes,Ut=0;Ut<rt.length;Ut++){var ir=rt[Ut];if(Me[ir]===void 0){var tr=ir*4;(Ne?Ne(yt[tr+0],yt[tr+1],yt[tr+2],yt[tr+3]):k<=yt[tr+2]&&C<=yt[tr+3]&&B>=yt[tr+0]&&te>=yt[tr+1])?(Me[ir]=!0,we.push(vt[ir])):Me[ir]=!1}}},ce.prototype._forEachCell=function(k,C,B,te,pe,we,Me,Ne){for(var rt=this._convertToCellCoord(k),vt=this._convertToCellCoord(C),yt=this._convertToCellCoord(B),Ut=this._convertToCellCoord(te),ir=rt;ir<=yt;ir++)for(var tr=vt;tr<=Ut;tr++){var xr=this.d*tr+ir;if(!(Ne&&!Ne(this._convertFromCellCoord(ir),this._convertFromCellCoord(tr),this._convertFromCellCoord(ir+1),this._convertFromCellCoord(tr+1)))&&pe.call(this,k,C,B,te,xr,we,Me,Ne))return}},ce.prototype._convertFromCellCoord=function(k){return(k-this.padding)/this.scale},ce.prototype._convertToCellCoord=function(k){return Math.max(0,Math.min(this.d-1,Math.floor(k*this.scale)+this.padding))},ce.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var k=this.cells,C=Ri+this.cells.length+1+1,B=0,te=0;te<this.cells.length;te++)B+=this.cells[te].length;var pe=new Int32Array(C+B+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var we=C,Me=0;Me<k.length;Me++){var Ne=k[Me];pe[Ri+Me]=we,pe.set(Ne,we),we+=Ne.length}return pe[Ri+k.length]=we,pe.set(this.keys,we),we+=this.keys.length,pe[Ri+k.length+1]=we,pe.set(this.bboxes,we),we+=this.bboxes.length,pe.buffer};var Te=self.ImageData,Re=self.ImageBitmap,Ue={};function Be(k,C,B){B===void 0&&(B={}),Object.defineProperty(C,"_classRegistryKey",{value:k,writeable:!1}),Ue[k]={klass:C,omit:B.omit||[],shallow:B.shallow||[]}}Be("Object",Object),Ji.serialize=function(C,B){var te=C.toArrayBuffer();return B&&B.push(te),{buffer:te}},Ji.deserialize=function(C){return new Ji(C.buffer)},Be("Grid",Ji),Be("Color",Ai),Be("Error",Error),Be("ResolvedImage",Ro),Be("StylePropertyFunction",ql),Be("StyleExpression",Fo,{omit:["_evaluator"]}),Be("ZoomDependentExpression",gs),Be("ZoomConstantExpression",du),Be("CompoundExpression",Oo,{omit:["_evaluate"]});for(var $e in aa)aa[$e]._classRegistryKey||Be("Expression_"+$e,aa[$e]);function wt(k){return k&&typeof ArrayBuffer<"u"&&(k instanceof ArrayBuffer||k.constructor&&k.constructor.name==="ArrayBuffer")}function gt(k){return Re&&k instanceof Re}function It(k,C){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp)return k;if(wt(k)||gt(k))return C&&C.push(k),k;if(ArrayBuffer.isView(k)){var B=k;return C&&C.push(B.buffer),B}if(k instanceof Te)return C&&C.push(k.data.buffer),k;if(Array.isArray(k)){for(var te=[],pe=0,we=k;pe<we.length;pe+=1){var Me=we[pe];te.push(It(Me,C))}return te}if(typeof k=="object"){var Ne=k.constructor,rt=Ne._classRegistryKey;if(!rt)throw new Error("can't serialize object of unregistered class");var vt=Ne.serialize?Ne.serialize(k,C):{};if(!Ne.serialize){for(var yt in k)if(!!k.hasOwnProperty(yt)&&!(Ue[rt].omit.indexOf(yt)>=0)){var Ut=k[yt];vt[yt]=Ue[rt].shallow.indexOf(yt)>=0?Ut:It(Ut,C)}k instanceof Error&&(vt.message=k.message)}if(vt.$name)throw new Error("$name property is reserved for worker serialization logic.");return rt!=="Object"&&(vt.$name=rt),vt}throw new Error("can't serialize object of type "+typeof k)}function qt(k){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp||wt(k)||gt(k)||ArrayBuffer.isView(k)||k instanceof Te)return k;if(Array.isArray(k))return k.map(qt);if(typeof k=="object"){var C=k.$name||"Object",B=Ue[C],te=B.klass;if(!te)throw new Error("can't deserialize unregistered class "+C);if(te.deserialize)return te.deserialize(k);for(var pe=Object.create(te.prototype),we=0,Me=Object.keys(k);we<Me.length;we+=1){var Ne=Me[we];if(Ne!=="$name"){var rt=k[Ne];pe[Ne]=Ue[C].shallow.indexOf(Ne)>=0?rt:qt(rt)}}return pe}throw new Error("can't deserialize object of type "+typeof k)}var nr=function(){this.first=!0};nr.prototype.update=function(C,B){var te=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=te,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=te,!0):(this.lastFloorZoom>te?(this.lastIntegerZoom=te+1,this.lastIntegerZoomTime=B):this.lastFloorZoom<te&&(this.lastIntegerZoom=te,this.lastIntegerZoomTime=B),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=te,!0):!1)};var ar={"Latin-1 Supplement":function(k){return k>=128&&k<=255},Arabic:function(k){return k>=1536&&k<=1791},"Arabic Supplement":function(k){return k>=1872&&k<=1919},"Arabic Extended-A":function(k){return k>=2208&&k<=2303},"Hangul Jamo":function(k){return k>=4352&&k<=4607},"Unified Canadian Aboriginal Syllabics":function(k){return k>=5120&&k<=5759},Khmer:function(k){return k>=6016&&k<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(k){return k>=6320&&k<=6399},"General Punctuation":function(k){return k>=8192&&k<=8303},"Letterlike Symbols":function(k){return k>=8448&&k<=8527},"Number Forms":function(k){return k>=8528&&k<=8591},"Miscellaneous Technical":function(k){return k>=8960&&k<=9215},"Control Pictures":function(k){return k>=9216&&k<=9279},"Optical Character Recognition":function(k){return k>=9280&&k<=9311},"Enclosed Alphanumerics":function(k){return k>=9312&&k<=9471},"Geometric Shapes":function(k){return k>=9632&&k<=9727},"Miscellaneous Symbols":function(k){return k>=9728&&k<=9983},"Miscellaneous Symbols and Arrows":function(k){return k>=11008&&k<=11263},"CJK Radicals Supplement":function(k){return k>=11904&&k<=12031},"Kangxi Radicals":function(k){return k>=12032&&k<=12255},"Ideographic Description Characters":function(k){return k>=12272&&k<=12287},"CJK Symbols and Punctuation":function(k){return k>=12288&&k<=12351},Hiragana:function(k){return k>=12352&&k<=12447},Katakana:function(k){return k>=12448&&k<=12543},Bopomofo:function(k){return k>=12544&&k<=12591},"Hangul Compatibility Jamo":function(k){return k>=12592&&k<=12687},Kanbun:function(k){return k>=12688&&k<=12703},"Bopomofo Extended":function(k){return k>=12704&&k<=12735},"CJK Strokes":function(k){return k>=12736&&k<=12783},"Katakana Phonetic Extensions":function(k){return k>=12784&&k<=12799},"Enclosed CJK Letters and Months":function(k){return k>=12800&&k<=13055},"CJK Compatibility":function(k){return k>=13056&&k<=13311},"CJK Unified Ideographs Extension A":function(k){return k>=13312&&k<=19903},"Yijing Hexagram Symbols":function(k){return k>=19904&&k<=19967},"CJK Unified Ideographs":function(k){return k>=19968&&k<=40959},"Yi Syllables":function(k){return k>=40960&&k<=42127},"Yi Radicals":function(k){return k>=42128&&k<=42191},"Hangul Jamo Extended-A":function(k){return k>=43360&&k<=43391},"Hangul Syllables":function(k){return k>=44032&&k<=55215},"Hangul Jamo Extended-B":function(k){return k>=55216&&k<=55295},"Private Use Area":function(k){return k>=57344&&k<=63743},"CJK Compatibility Ideographs":function(k){return k>=63744&&k<=64255},"Arabic Presentation Forms-A":function(k){return k>=64336&&k<=65023},"Vertical Forms":function(k){return k>=65040&&k<=65055},"CJK Compatibility Forms":function(k){return k>=65072&&k<=65103},"Small Form Variants":function(k){return k>=65104&&k<=65135},"Arabic Presentation Forms-B":function(k){return k>=65136&&k<=65279},"Halfwidth and Fullwidth Forms":function(k){return k>=65280&&k<=65519}};function Cr(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(Wr(te.charCodeAt(0)))return!0}return!1}function nn(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(!pn(te.charCodeAt(0)))return!1}return!0}function pn(k){return!(ar.Arabic(k)||ar["Arabic Supplement"](k)||ar["Arabic Extended-A"](k)||ar["Arabic Presentation Forms-A"](k)||ar["Arabic Presentation Forms-B"](k))}function Ir(k){return k<11904?!1:!!(ar["Bopomofo Extended"](k)||ar.Bopomofo(k)||ar["CJK Compatibility Forms"](k)||ar["CJK Compatibility Ideographs"](k)||ar["CJK Compatibility"](k)||ar["CJK Radicals Supplement"](k)||ar["CJK Strokes"](k)||ar["CJK Symbols and Punctuation"](k)||ar["CJK Unified Ideographs Extension A"](k)||ar["CJK Unified Ideographs"](k)||ar["Enclosed CJK Letters and Months"](k)||ar["Halfwidth and Fullwidth Forms"](k)||ar.Hiragana(k)||ar["Ideographic Description Characters"](k)||ar["Kangxi Radicals"](k)||ar["Katakana Phonetic Extensions"](k)||ar.Katakana(k)||ar["Vertical Forms"](k)||ar["Yi Radicals"](k)||ar["Yi Syllables"](k))}function Wr(k){return k===746||k===747?!0:k<4352?!1:!!(ar["Bopomofo Extended"](k)||ar.Bopomofo(k)||ar["CJK Compatibility Forms"](k)&&!(k>=65097&&k<=65103)||ar["CJK Compatibility Ideographs"](k)||ar["CJK Compatibility"](k)||ar["CJK Radicals Supplement"](k)||ar["CJK Strokes"](k)||ar["CJK Symbols and Punctuation"](k)&&!(k>=12296&&k<=12305)&&!(k>=12308&&k<=12319)&&k!==12336||ar["CJK Unified Ideographs Extension A"](k)||ar["CJK Unified Ideographs"](k)||ar["Enclosed CJK Letters and Months"](k)||ar["Hangul Compatibility Jamo"](k)||ar["Hangul Jamo Extended-A"](k)||ar["Hangul Jamo Extended-B"](k)||ar["Hangul Jamo"](k)||ar["Hangul Syllables"](k)||ar.Hiragana(k)||ar["Ideographic Description Characters"](k)||ar.Kanbun(k)||ar["Kangxi Radicals"](k)||ar["Katakana Phonetic Extensions"](k)||ar.Katakana(k)&&k!==12540||ar["Halfwidth and Fullwidth Forms"](k)&&k!==65288&&k!==65289&&k!==65293&&!(k>=65306&&k<=65310)&&k!==65339&&k!==65341&&k!==65343&&!(k>=65371&&k<=65503)&&k!==65507&&!(k>=65512&&k<=65519)||ar["Small Form Variants"](k)&&!(k>=65112&&k<=65118)&&!(k>=65123&&k<=65126)||ar["Unified Canadian Aboriginal Syllabics"](k)||ar["Unified Canadian Aboriginal Syllabics Extended"](k)||ar["Vertical Forms"](k)||ar["Yijing Hexagram Symbols"](k)||ar["Yi Syllables"](k)||ar["Yi Radicals"](k))}function en(k){return!!(ar["Latin-1 Supplement"](k)&&(k===167||k===169||k===174||k===177||k===188||k===189||k===190||k===215||k===247)||ar["General Punctuation"](k)&&(k===8214||k===8224||k===8225||k===8240||k===8241||k===8251||k===8252||k===8258||k===8263||k===8264||k===8265||k===8273)||ar["Letterlike Symbols"](k)||ar["Number Forms"](k)||ar["Miscellaneous Technical"](k)&&(k>=8960&&k<=8967||k>=8972&&k<=8991||k>=8996&&k<=9e3||k===9003||k>=9085&&k<=9114||k>=9150&&k<=9165||k===9167||k>=9169&&k<=9179||k>=9186&&k<=9215)||ar["Control Pictures"](k)&&k!==9251||ar["Optical Character Recognition"](k)||ar["Enclosed Alphanumerics"](k)||ar["Geometric Shapes"](k)||ar["Miscellaneous Symbols"](k)&&!(k>=9754&&k<=9759)||ar["Miscellaneous Symbols and Arrows"](k)&&(k>=11026&&k<=11055||k>=11088&&k<=11097||k>=11192&&k<=11243)||ar["CJK Symbols and Punctuation"](k)||ar.Katakana(k)||ar["Private Use Area"](k)||ar["CJK Compatibility Forms"](k)||ar["Small Form Variants"](k)||ar["Halfwidth and Fullwidth Forms"](k)||k===8734||k===8756||k===8757||k>=9984&&k<=10087||k>=10102&&k<=10131||k===65532||k===65533)}function fn(k){return!(Wr(k)||en(k))}function vn(k){return ar.Arabic(k)||ar["Arabic Supplement"](k)||ar["Arabic Extended-A"](k)||ar["Arabic Presentation Forms-A"](k)||ar["Arabic Presentation Forms-B"](k)}function tn(k){return k>=1424&&k<=2303||ar["Arabic Presentation Forms-A"](k)||ar["Arabic Presentation Forms-B"](k)}function Zn(k,C){return!(!C&&tn(k)||k>=2304&&k<=3583||k>=3840&&k<=4255||ar.Khmer(k))}function ha(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(tn(te.charCodeAt(0)))return!0}return!1}function Pa(k,C){for(var B=0,te=k;B<te.length;B+=1){var pe=te[B];if(!Zn(pe.charCodeAt(0),C))return!1}return!0}var pa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Na=null,xa=pa.unavailable,$a=null,Va=function(k){k&&typeof k=="string"&&k.indexOf("NetworkError")>-1&&(xa=pa.error),Na&&Na(k)};function ui(){Li.fire(new Pr("pluginStateChange",{pluginStatus:xa,pluginURL:$a}))}var Li=new Er,Po=function(){return xa},$i=function(k){return k({pluginStatus:xa,pluginURL:$a}),Li.on("pluginStateChange",k),k},_a=function(k,C,B){if(B===void 0&&(B=!1),xa===pa.deferred||xa===pa.loading||xa===pa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");$a=Q.resolveURL(k),xa=pa.deferred,Na=C,ui(),B||di()},di=function(){if(xa!==pa.deferred||!$a)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xa=pa.loading,ui(),$a&&ft({url:$a},function(k){k?Va(k):(xa=pa.loaded,ui())})},ii={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return xa===pa.loaded||ii.applyArabicShaping!=null},isLoading:function(){return xa===pa.loading},setState:function(C){xa=C.pluginStatus,$a=C.pluginURL},isParsed:function(){return ii.applyArabicShaping!=null&&ii.processBidirectionalText!=null&&ii.processStyledBidirectionalText!=null},getPluginURL:function(){return $a}},Ui=function(){!ii.isLoading()&&!ii.isLoaded()&&Po()==="deferred"&&di()},mi=function(C,B){this.zoom=C,B?(this.now=B.now,this.fadeDuration=B.fadeDuration,this.zoomHistory=B.zoomHistory,this.transition=B.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nr,this.transition={})};mi.prototype.isSupportedScript=function(C){return Pa(C,ii.isLoaded())},mi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},mi.prototype.getCrossfadeParameters=function(){var C=this.zoom,B=C-Math.floor(C),te=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:B+(1-B)*te}:{fromScale:.5,toScale:1,t:1-(1-te)*B}};var Eo=function(C,B){this.property=C,this.value=B,this.expression=Gc(B===void 0?C.specification.default:B,C.specification)};Eo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Eo.prototype.possiblyEvaluate=function(C,B,te){return this.property.possiblyEvaluate(this,C,B,te)};var yo=function(C){this.property=C,this.value=new Eo(C,void 0)};yo.prototype.transitioned=function(C,B){return new ys(this.property,this.value,B,M({},C.transition,this.transition),C.now)},yo.prototype.untransitioned=function(){return new ys(this.property,this.value,null,{},0)};var zo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};zo.prototype.getValue=function(C){return I(this._values[C].value.value)},zo.prototype.setValue=function(C,B){this._values.hasOwnProperty(C)||(this._values[C]=new yo(this._values[C].property)),this._values[C].value=new Eo(this._values[C].property,B===null?void 0:I(B))},zo.prototype.getTransition=function(C){return I(this._values[C].transition)},zo.prototype.setTransition=function(C,B){this._values.hasOwnProperty(C)||(this._values[C]=new yo(this._values[C].property)),this._values[C].transition=I(B)||void 0},zo.prototype.serialize=function(){for(var C={},B=0,te=Object.keys(this._values);B<te.length;B+=1){var pe=te[B],we=this.getValue(pe);we!==void 0&&(C[pe]=we);var Me=this.getTransition(pe);Me!==void 0&&(C[pe+"-transition"]=Me)}return C},zo.prototype.transitioned=function(C,B){for(var te=new ns(this._properties),pe=0,we=Object.keys(this._values);pe<we.length;pe+=1){var Me=we[pe];te._values[Me]=this._values[Me].transitioned(C,B._values[Me])}return te},zo.prototype.untransitioned=function(){for(var C=new ns(this._properties),B=0,te=Object.keys(this._values);B<te.length;B+=1){var pe=te[B];C._values[pe]=this._values[pe].untransitioned()}return C};var ys=function(C,B,te,pe,we){this.property=C,this.value=B,this.begin=we+pe.delay||0,this.end=this.begin+pe.duration||0,C.specification.transition&&(pe.delay||pe.duration)&&(this.prior=te)};ys.prototype.possiblyEvaluate=function(C,B,te){var pe=C.now||0,we=this.value.possiblyEvaluate(C,B,te),Me=this.prior;if(Me){if(pe>this.end)return this.prior=null,we;if(this.value.isDataDriven())return this.prior=null,we;if(pe<this.begin)return Me.possiblyEvaluate(C,B,te);var Ne=(pe-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(C,B,te),we,b(Ne))}else return we};var ns=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};ns.prototype.possiblyEvaluate=function(C,B,te){for(var pe=new eo(this._properties),we=0,Me=Object.keys(this._values);we<Me.length;we+=1){var Ne=Me[we];pe._values[Ne]=this._values[Ne].possiblyEvaluate(C,B,te)}return pe},ns.prototype.hasTransition=function(){for(var C=0,B=Object.keys(this._values);C<B.length;C+=1){var te=B[C];if(this._values[te].prior)return!0}return!1};var ms=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};ms.prototype.getValue=function(C){return I(this._values[C].value)},ms.prototype.setValue=function(C,B){this._values[C]=new Eo(this._values[C].property,B===null?void 0:I(B))},ms.prototype.serialize=function(){for(var C={},B=0,te=Object.keys(this._values);B<te.length;B+=1){var pe=te[B],we=this.getValue(pe);we!==void 0&&(C[pe]=we)}return C},ms.prototype.possiblyEvaluate=function(C,B,te){for(var pe=new eo(this._properties),we=0,Me=Object.keys(this._values);we<Me.length;we+=1){var Ne=Me[we];pe._values[Ne]=this._values[Ne].possiblyEvaluate(C,B,te)}return pe};var io=function(C,B,te){this.property=C,this.value=B,this.parameters=te};io.prototype.isConstant=function(){return this.value.kind==="constant"},io.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},io.prototype.evaluate=function(C,B,te,pe){return this.property.evaluate(this.value,this.parameters,C,B,te,pe)};var eo=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};eo.prototype.get=function(C){return this._values[C]};var Za=function(C){this.specification=C};Za.prototype.possiblyEvaluate=function(C,B){return C.expression.evaluate(B)},Za.prototype.interpolate=function(C,B,te){var pe=rl[this.specification.type];return pe?pe(C,B,te):C};var oi=function(C,B){this.specification=C,this.overrides=B};oi.prototype.possiblyEvaluate=function(C,B,te,pe){return C.expression.kind==="constant"||C.expression.kind==="camera"?new io(this,{kind:"constant",value:C.expression.evaluate(B,null,{},te,pe)},B):new io(this,C.expression,B)},oi.prototype.interpolate=function(C,B,te){if(C.value.kind!=="constant"||B.value.kind!=="constant")return C;if(C.value.value===void 0||B.value.value===void 0)return new io(this,{kind:"constant",value:void 0},C.parameters);var pe=rl[this.specification.type];return pe?new io(this,{kind:"constant",value:pe(C.value.value,B.value.value,te)},C.parameters):C},oi.prototype.evaluate=function(C,B,te,pe,we,Me){return C.kind==="constant"?C.value:C.evaluate(B,te,pe,we,Me)};var Bo=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,pe,we,Me){if(te.value===void 0)return new io(this,{kind:"constant",value:void 0},pe);if(te.expression.kind==="constant"){var Ne=te.expression.evaluate(pe,null,{},we,Me),rt=te.property.specification.type==="resolvedImage",vt=rt&&typeof Ne!="string"?Ne.name:Ne,yt=this._calculate(vt,vt,vt,pe);return new io(this,{kind:"constant",value:yt},pe)}else if(te.expression.kind==="camera"){var Ut=this._calculate(te.expression.evaluate({zoom:pe.zoom-1}),te.expression.evaluate({zoom:pe.zoom}),te.expression.evaluate({zoom:pe.zoom+1}),pe);return new io(this,{kind:"constant",value:Ut},pe)}else return new io(this,te.expression,pe)},C.prototype.evaluate=function(te,pe,we,Me,Ne,rt){if(te.kind==="source"){var vt=te.evaluate(pe,we,Me,Ne,rt);return this._calculate(vt,vt,vt,pe)}else return te.kind==="composite"?this._calculate(te.evaluate({zoom:Math.floor(pe.zoom)-1},we,Me),te.evaluate({zoom:Math.floor(pe.zoom)},we,Me),te.evaluate({zoom:Math.floor(pe.zoom)+1},we,Me),pe):te.value},C.prototype._calculate=function(te,pe,we,Me){var Ne=Me.zoom;return Ne>Me.zoomHistory.lastIntegerZoom?{from:te,to:pe}:{from:we,to:pe}},C.prototype.interpolate=function(te){return te},C}(oi),_o=function(C){this.specification=C};_o.prototype.possiblyEvaluate=function(C,B,te,pe){if(C.value!==void 0)if(C.expression.kind==="constant"){var we=C.expression.evaluate(B,null,{},te,pe);return this._calculate(we,we,we,B)}else return this._calculate(C.expression.evaluate(new mi(Math.floor(B.zoom-1),B)),C.expression.evaluate(new mi(Math.floor(B.zoom),B)),C.expression.evaluate(new mi(Math.floor(B.zoom+1),B)),B)},_o.prototype._calculate=function(C,B,te,pe){var we=pe.zoom;return we>pe.zoomHistory.lastIntegerZoom?{from:C,to:B}:{from:te,to:B}},_o.prototype.interpolate=function(C){return C};var Qo=function(C){this.specification=C};Qo.prototype.possiblyEvaluate=function(C,B,te,pe){return!!C.expression.evaluate(B,null,{},te,pe)},Qo.prototype.interpolate=function(){return!1};var co=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var B in C){var te=C[B];te.specification.overridable&&this.overridableProperties.push(B);var pe=this.defaultPropertyValues[B]=new Eo(te,void 0),we=this.defaultTransitionablePropertyValues[B]=new yo(te);this.defaultTransitioningPropertyValues[B]=we.untransitioned(),this.defaultPossiblyEvaluatedValues[B]=pe.possiblyEvaluate({})}};Be("DataDrivenProperty",oi),Be("DataConstantProperty",Za),Be("CrossFadedDataDrivenProperty",Bo),Be("CrossFadedProperty",_o),Be("ColorRampProperty",Qo);var xs="-transition",Zs=function(k){function C(B,te){if(k.call(this),this.id=B.id,this.type=B.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},B.type!=="custom"&&(B=B,this.metadata=B.metadata,this.minzoom=B.minzoom,this.maxzoom=B.maxzoom,B.type!=="background"&&(this.source=B.source,this.sourceLayer=B["source-layer"],this.filter=B.filter),te.layout&&(this._unevaluatedLayout=new ms(te.layout)),te.paint)){this._transitionablePaint=new zo(te.paint);for(var pe in B.paint)this.setPaintProperty(pe,B.paint[pe],{validate:!1});for(var we in B.layout)this.setLayoutProperty(we,B.layout[we],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eo(te.paint)}}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function(te){return te==="visibility"?this.visibility:this._unevaluatedLayout.getValue(te)},C.prototype.setLayoutProperty=function(te,pe,we){if(we===void 0&&(we={}),pe!=null){var Me="layers."+this.id+".layout."+te;if(this._validate(vi,Me,te,pe,we))return}if(te==="visibility"){this.visibility=pe;return}this._unevaluatedLayout.setValue(te,pe)},C.prototype.getPaintProperty=function(te){return S(te,xs)?this._transitionablePaint.getTransition(te.slice(0,-xs.length)):this._transitionablePaint.getValue(te)},C.prototype.setPaintProperty=function(te,pe,we){if(we===void 0&&(we={}),pe!=null){var Me="layers."+this.id+".paint."+te;if(this._validate(ea,Me,te,pe,we))return!1}if(S(te,xs))return this._transitionablePaint.setTransition(te.slice(0,-xs.length),pe||void 0),!1;var Ne=this._transitionablePaint._values[te],rt=Ne.property.specification["property-type"]==="cross-faded-data-driven",vt=Ne.value.isDataDriven(),yt=Ne.value;this._transitionablePaint.setValue(te,pe),this._handleSpecialPaintPropertyUpdate(te);var Ut=this._transitionablePaint._values[te].value,ir=Ut.isDataDriven();return ir||vt||rt||this._handleOverridablePaintPropertyUpdate(te,yt,Ut)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){},C.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,we){return!1},C.prototype.isHidden=function(te){return this.minzoom&&te<this.minzoom||this.maxzoom&&te>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function(te){this._transitioningPaint=this._transitionablePaint.transitioned(te,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function(te,pe){te.getCrossfadeParameters&&(this._crossfadeParameters=te.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(te,void 0,pe)),this.paint=this._transitioningPaint.possiblyEvaluate(te,void 0,pe)},C.prototype.serialize=function(){var te={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(te.layout=te.layout||{},te.layout.visibility=this.visibility),F(te,function(pe,we){return pe!==void 0&&!(we==="layout"&&!Object.keys(pe).length)&&!(we==="paint"&&!Object.keys(pe).length)})},C.prototype._validate=function(te,pe,we,Me,Ne){return Ne===void 0&&(Ne={}),Ne&&Ne.validate===!1?!1:Di(this,te.call(Hn,{key:pe,layerType:this.type,objectKey:we,value:Me,styleSpec:Yt,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var te in this.paint._values){var pe=this.paint.get(te);if(!(!(pe instanceof io)||!hi(pe.property.specification))&&(pe.value.kind==="source"||pe.value.kind==="composite")&&pe.value.isStateDependent)return!0}return!1},C}(Er),Nu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},fo=function(C,B){this._structArray=C,this._pos1=B*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},af=128,mu=5,qi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};qi.serialize=function(C,B){return C._trim(),B&&(C.isTransferred=!0,B.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},qi.deserialize=function(C){var B=Object.create(this.prototype);return B.arrayBuffer=C.arrayBuffer,B.length=C.length,B.capacity=C.arrayBuffer.byteLength/B.bytesPerElement,B._refreshViews(),B},qi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},qi.prototype.clear=function(){this.length=0},qi.prototype.resize=function(C){this.reserve(C),this.length=C},qi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*mu),af),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var B=this.uint8;this._refreshViews(),B&&this.uint8.set(B)}},qi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function qo(k,C){C===void 0&&(C=1);var B=0,te=0,pe=k.map(function(Me){var Ne=Od(Me.type),rt=B=hh(B,Math.max(C,Ne)),vt=Me.components||1;return te=Math.max(te,Ne),B+=Ne*vt,{name:Me.name,type:Me.type,components:vt,offset:rt}}),we=hh(B,Math.max(te,C));return{members:pe,size:we,alignment:C}}function Od(k){return Nu[k].BYTES_PER_ELEMENT}function hh(k,C){return Math.ceil(k/C)*C}var zf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},C.prototype.emplace=function(te,pe,we){var Me=te*2;return this.int16[Me+0]=pe,this.int16[Me+1]=we,te},C}(qi);zf.prototype.bytesPerElement=4,Be("StructArrayLayout2i4",zf);var Cc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,pe,we,Me)},C.prototype.emplace=function(te,pe,we,Me,Ne){var rt=te*4;return this.int16[rt+0]=pe,this.int16[rt+1]=we,this.int16[rt+2]=Me,this.int16[rt+3]=Ne,te},C}(qi);Cc.prototype.bytesPerElement=8,Be("StructArrayLayout4i8",Cc);var of=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,pe,we,Me,Ne,rt)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt){var yt=te*6;return this.int16[yt+0]=pe,this.int16[yt+1]=we,this.int16[yt+2]=Me,this.int16[yt+3]=Ne,this.int16[yt+4]=rt,this.int16[yt+5]=vt,te},C}(qi);of.prototype.bytesPerElement=12,Be("StructArrayLayout2i4i12",of);var vh=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,pe,we,Me,Ne,rt)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt){var yt=te*4,Ut=te*8;return this.int16[yt+0]=pe,this.int16[yt+1]=we,this.uint8[Ut+4]=Me,this.uint8[Ut+5]=Ne,this.uint8[Ut+6]=rt,this.uint8[Ut+7]=vt,te},C}(qi);vh.prototype.bytesPerElement=8,Be("StructArrayLayout2i4ub8",vh);var wl=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir){var tr=this.length;return this.resize(tr+1),this.emplace(tr,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr){var xr=te*9,Ur=te*18;return this.uint16[xr+0]=pe,this.uint16[xr+1]=we,this.uint16[xr+2]=Me,this.uint16[xr+3]=Ne,this.uint16[xr+4]=rt,this.uint16[xr+5]=vt,this.uint16[xr+6]=yt,this.uint16[xr+7]=Ut,this.uint8[Ur+16]=ir,this.uint8[Ur+17]=tr,te},C}(qi);wl.prototype.bytesPerElement=18,Be("StructArrayLayout8ui2ub18",wl);var Lc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr){var Ur=this.length;return this.resize(Ur+1),this.emplace(Ur,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur){var hn=te*12;return this.int16[hn+0]=pe,this.int16[hn+1]=we,this.int16[hn+2]=Me,this.int16[hn+3]=Ne,this.uint16[hn+4]=rt,this.uint16[hn+5]=vt,this.uint16[hn+6]=yt,this.uint16[hn+7]=Ut,this.int16[hn+8]=ir,this.int16[hn+9]=tr,this.int16[hn+10]=xr,this.int16[hn+11]=Ur,te},C}(qi);Lc.prototype.bytesPerElement=24,Be("StructArrayLayout4i4ui4i24",Lc);var dv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},C.prototype.emplace=function(te,pe,we,Me){var Ne=te*3;return this.float32[Ne+0]=pe,this.float32[Ne+1]=we,this.float32[Ne+2]=Me,te},C}(qi);dv.prototype.bytesPerElement=12,Be("StructArrayLayout3f12",dv);var gv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var we=te*1;return this.uint32[we+0]=pe,te},C}(qi);gv.prototype.bytesPerElement=4,Be("StructArrayLayout1ul4",gv);var Of=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,yt,Ut){var ir=this.length;return this.resize(ir+1),this.emplace(ir,te,pe,we,Me,Ne,rt,vt,yt,Ut)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir){var tr=te*10,xr=te*5;return this.int16[tr+0]=pe,this.int16[tr+1]=we,this.int16[tr+2]=Me,this.int16[tr+3]=Ne,this.int16[tr+4]=rt,this.int16[tr+5]=vt,this.uint32[xr+3]=yt,this.uint16[tr+8]=Ut,this.uint16[tr+9]=ir,te},C}(qi);Of.prototype.bytesPerElement=20,Be("StructArrayLayout6i1ul2ui20",Of);var ph=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,pe,we,Me,Ne,rt)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt){var yt=te*6;return this.int16[yt+0]=pe,this.int16[yt+1]=we,this.int16[yt+2]=Me,this.int16[yt+3]=Ne,this.int16[yt+4]=rt,this.int16[yt+5]=vt,te},C}(qi);ph.prototype.bytesPerElement=12,Be("StructArrayLayout2i2i2i12",ph);var pc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne){var rt=this.length;return this.resize(rt+1),this.emplace(rt,te,pe,we,Me,Ne)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt){var vt=te*4,yt=te*8;return this.float32[vt+0]=pe,this.float32[vt+1]=we,this.float32[vt+2]=Me,this.int16[yt+6]=Ne,this.int16[yt+7]=rt,te},C}(qi);pc.prototype.bytesPerElement=16,Be("StructArrayLayout2f1f2i16",pc);var Bl=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,pe,we,Me)},C.prototype.emplace=function(te,pe,we,Me,Ne){var rt=te*12,vt=te*3;return this.uint8[rt+0]=pe,this.uint8[rt+1]=we,this.float32[vt+1]=Me,this.float32[vt+2]=Ne,te},C}(qi);Bl.prototype.bytesPerElement=12,Be("StructArrayLayout2ub2f12",Bl);var dc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},C.prototype.emplace=function(te,pe,we,Me){var Ne=te*3;return this.uint16[Ne+0]=pe,this.uint16[Ne+1]=we,this.uint16[Ne+2]=Me,te},C}(qi);dc.prototype.bytesPerElement=6,Be("StructArrayLayout3ui6",dc);var Nf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn){var Dn=this.length;return this.resize(Dn+1),this.emplace(Dn,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn){var Vn=te*24,qn=te*12,da=te*48;return this.int16[Vn+0]=pe,this.int16[Vn+1]=we,this.uint16[Vn+2]=Me,this.uint16[Vn+3]=Ne,this.uint32[qn+2]=rt,this.uint32[qn+3]=vt,this.uint32[qn+4]=yt,this.uint16[Vn+10]=Ut,this.uint16[Vn+11]=ir,this.uint16[Vn+12]=tr,this.float32[qn+7]=xr,this.float32[qn+8]=Ur,this.uint8[da+36]=hn,this.uint8[da+37]=an,this.uint8[da+38]=Rn,this.uint32[qn+10]=Mn,this.int16[Vn+22]=Dn,te},C}(qi);Nf.prototype.bytesPerElement=48,Be("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Nf);var dh=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,fi,Ua,Ha){var bi=this.length;return this.resize(bi+1),this.emplace(bi,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,fi,Ua,Ha)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,fi,Ua,Ha,bi){var ci=te*34,Vi=te*17;return this.int16[ci+0]=pe,this.int16[ci+1]=we,this.int16[ci+2]=Me,this.int16[ci+3]=Ne,this.int16[ci+4]=rt,this.int16[ci+5]=vt,this.int16[ci+6]=yt,this.int16[ci+7]=Ut,this.uint16[ci+8]=ir,this.uint16[ci+9]=tr,this.uint16[ci+10]=xr,this.uint16[ci+11]=Ur,this.uint16[ci+12]=hn,this.uint16[ci+13]=an,this.uint16[ci+14]=Rn,this.uint16[ci+15]=Mn,this.uint16[ci+16]=Dn,this.uint16[ci+17]=Vn,this.uint16[ci+18]=qn,this.uint16[ci+19]=da,this.uint16[ci+20]=va,this.uint16[ci+21]=Wa,this.uint16[ci+22]=Da,this.uint32[Vi+12]=Oa,this.float32[Vi+13]=fi,this.float32[Vi+14]=Ua,this.float32[Vi+15]=Ha,this.float32[Vi+16]=bi,te},C}(qi);dh.prototype.bytesPerElement=68,Be("StructArrayLayout8i15ui1ul4f68",dh);var sf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var we=te*1;return this.float32[we+0]=pe,te},C}(qi);sf.prototype.bytesPerElement=4,Be("StructArrayLayout1f4",sf);var yv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},C.prototype.emplace=function(te,pe,we,Me){var Ne=te*3;return this.int16[Ne+0]=pe,this.int16[Ne+1]=we,this.int16[Ne+2]=Me,te},C}(qi);yv.prototype.bytesPerElement=6,Be("StructArrayLayout3i6",yv);var Pc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},C.prototype.emplace=function(te,pe,we,Me){var Ne=te*2,rt=te*4;return this.uint32[Ne+0]=pe,this.uint16[rt+2]=we,this.uint16[rt+3]=Me,te},C}(qi);Pc.prototype.bytesPerElement=8,Be("StructArrayLayout1ul2ui8",Pc);var Bf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},C.prototype.emplace=function(te,pe,we){var Me=te*2;return this.uint16[Me+0]=pe,this.uint16[Me+1]=we,te},C}(qi);Bf.prototype.bytesPerElement=4,Be("StructArrayLayout2ui4",Bf);var lf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var we=te*1;return this.uint16[we+0]=pe,te},C}(qi);lf.prototype.bytesPerElement=2,Be("StructArrayLayout1ui2",lf);var Dc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},C.prototype.emplace=function(te,pe,we){var Me=te*2;return this.float32[Me+0]=pe,this.float32[Me+1]=we,te},C}(qi);Dc.prototype.bytesPerElement=8,Be("StructArrayLayout2f8",Dc);var mv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,pe,we,Me)},C.prototype.emplace=function(te,pe,we,Me,Ne){var rt=te*4;return this.float32[rt+0]=pe,this.float32[rt+1]=we,this.float32[rt+2]=Me,this.float32[rt+3]=Ne,te},C}(qi);mv.prototype.bytesPerElement=16,Be("StructArrayLayout4f16",mv);var sp=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var B={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return B.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},B.x1.get=function(){return this._structArray.int16[this._pos2+2]},B.y1.get=function(){return this._structArray.int16[this._pos2+3]},B.x2.get=function(){return this._structArray.int16[this._pos2+4]},B.y2.get=function(){return this._structArray.int16[this._pos2+5]},B.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},B.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},B.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},B.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,B),C}(fo);sp.prototype.size=20;var Rc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new sp(this,te)},C}(Of);Be("CollisionBoxArray",Rc);var xv=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var B={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return B.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},B.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},B.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},B.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},B.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},B.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},B.segment.get=function(){return this._structArray.uint16[this._pos2+10]},B.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},B.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},B.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},B.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},B.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},B.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},B.placedOrientation.set=function(te){this._structArray.uint8[this._pos1+37]=te},B.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},B.hidden.set=function(te){this._structArray.uint8[this._pos1+38]=te},B.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},B.crossTileID.set=function(te){this._structArray.uint32[this._pos4+10]=te},B.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,B),C}(fo);xv.prototype.size=48;var uf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new xv(this,te)},C}(Nf);Be("PlacedSymbolArray",uf);var lp=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var B={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return B.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},B.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},B.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},B.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},B.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},B.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},B.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},B.key.get=function(){return this._structArray.uint16[this._pos2+8]},B.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},B.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},B.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},B.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},B.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},B.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},B.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},B.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},B.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},B.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},B.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},B.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},B.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},B.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},B.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},B.crossTileID.set=function(te){this._structArray.uint32[this._pos4+12]=te},B.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},B.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},B.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},B.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,B),C}(fo);lp.prototype.size=68;var up=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new lp(this,te)},C}(dh);Be("SymbolInstanceArray",up);var Bu=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function(te){return this.float32[te*1+0]},C}(sf);Be("GlyphOffsetArray",Bu);var cp=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getx=function(te){return this.int16[te*3+0]},C.prototype.gety=function(te){return this.int16[te*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function(te){return this.int16[te*3+2]},C}(yv);Be("SymbolLineVertexArray",cp);var fp=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var B={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return B.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},B.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},B.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,B),C}(fo);fp.prototype.size=8;var bv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new fp(this,te)},C}(Pc);Be("FeatureIndexArray",bv);var hp=qo([{name:"a_pos",components:2,type:"Int16"}],4),ve=hp.members,W=function(C){C===void 0&&(C=[]),this.segments=C};W.prototype.prepareSegment=function(C,B,te,pe){var we=this.segments[this.segments.length-1];return C>W.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+W.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!we||we.vertexLength+C>W.MAX_VERTEX_ARRAY_LENGTH||we.sortKey!==pe)&&(we={vertexOffset:B.length,primitiveOffset:te.length,vertexLength:0,primitiveLength:0},pe!==void 0&&(we.sortKey=pe),this.segments.push(we)),we},W.prototype.get=function(){return this.segments},W.prototype.destroy=function(){for(var C=0,B=this.segments;C<B.length;C+=1){var te=B[C];for(var pe in te.vaos)te.vaos[pe].destroy()}},W.simpleSegment=function(C,B,te,pe){return new W([{vertexOffset:C,primitiveOffset:B,vertexLength:te,primitiveLength:pe,vaos:{},sortKey:0}])},W.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Be("SegmentVector",W);function de(k,C){return k=f(Math.floor(k),0,255),C=f(Math.floor(C),0,255),256*k+C}var $=qo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ge=a(function(k){function C(B,te){var pe,we,Me,Ne,rt,vt,yt,Ut;for(pe=B.length&3,we=B.length-pe,Me=te,rt=3432918353,vt=461845907,Ut=0;Ut<we;)yt=B.charCodeAt(Ut)&255|(B.charCodeAt(++Ut)&255)<<8|(B.charCodeAt(++Ut)&255)<<16|(B.charCodeAt(++Ut)&255)<<24,++Ut,yt=(yt&65535)*rt+(((yt>>>16)*rt&65535)<<16)&4294967295,yt=yt<<15|yt>>>17,yt=(yt&65535)*vt+(((yt>>>16)*vt&65535)<<16)&4294967295,Me^=yt,Me=Me<<13|Me>>>19,Ne=(Me&65535)*5+(((Me>>>16)*5&65535)<<16)&4294967295,Me=(Ne&65535)+27492+(((Ne>>>16)+58964&65535)<<16);switch(yt=0,pe){case 3:yt^=(B.charCodeAt(Ut+2)&255)<<16;case 2:yt^=(B.charCodeAt(Ut+1)&255)<<8;case 1:yt^=B.charCodeAt(Ut)&255,yt=(yt&65535)*rt+(((yt>>>16)*rt&65535)<<16)&4294967295,yt=yt<<15|yt>>>17,yt=(yt&65535)*vt+(((yt>>>16)*vt&65535)<<16)&4294967295,Me^=yt}return Me^=B.length,Me^=Me>>>16,Me=(Me&65535)*2246822507+(((Me>>>16)*2246822507&65535)<<16)&4294967295,Me^=Me>>>13,Me=(Me&65535)*3266489909+(((Me>>>16)*3266489909&65535)<<16)&4294967295,Me^=Me>>>16,Me>>>0}k.exports=C}),Ce=a(function(k){function C(B,te){for(var pe=B.length,we=te^pe,Me=0,Ne;pe>=4;)Ne=B.charCodeAt(Me)&255|(B.charCodeAt(++Me)&255)<<8|(B.charCodeAt(++Me)&255)<<16|(B.charCodeAt(++Me)&255)<<24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),Ne^=Ne>>>24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)^Ne,pe-=4,++Me;switch(pe){case 3:we^=(B.charCodeAt(Me+2)&255)<<16;case 2:we^=(B.charCodeAt(Me+1)&255)<<8;case 1:we^=B.charCodeAt(Me)&255,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)}return we^=we>>>13,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16),we^=we>>>15,we>>>0}k.exports=C}),Fe=ge,Je=ge,ht=Ce;Fe.murmur3=Je,Fe.murmur2=ht;var Dt=function(){this.ids=[],this.positions=[],this.indexed=!1};Dt.prototype.add=function(C,B,te,pe){this.ids.push(pr(C)),this.positions.push(B,te,pe)},Dt.prototype.getPositions=function(C){for(var B=pr(C),te=0,pe=this.ids.length-1;te<pe;){var we=te+pe>>1;this.ids[we]>=B?pe=we:te=we+1}for(var Me=[];this.ids[te]===B;){var Ne=this.positions[3*te],rt=this.positions[3*te+1],vt=this.positions[3*te+2];Me.push({index:Ne,start:rt,end:vt}),te++}return Me},Dt.serialize=function(C,B){var te=new Float64Array(C.ids),pe=new Uint32Array(C.positions);return mr(te,pe,0,te.length-1),B&&B.push(te.buffer,pe.buffer),{ids:te,positions:pe}},Dt.deserialize=function(C){var B=new Dt;return B.ids=C.ids,B.positions=C.positions,B.indexed=!0,B};var er=Math.pow(2,53)-1;function pr(k){var C=+k;return!isNaN(C)&&C<=er?C:Fe(String(k))}function mr(k,C,B,te){for(;B<te;){for(var pe=k[B+te>>1],we=B-1,Me=te+1;;){do we++;while(k[we]<pe);do Me--;while(k[Me]>pe);if(we>=Me)break;Rr(k,we,Me),Rr(C,3*we,3*Me),Rr(C,3*we+1,3*Me+1),Rr(C,3*we+2,3*Me+2)}Me-B<te-Me?(mr(k,C,B,Me),B=Me+1):(mr(k,C,Me+1,te),te=Me)}}function Rr(k,C,B){var te=k[C];k[C]=k[B],k[B]=te}Be("FeaturePositionMap",Dt);var Zr=function(C,B){this.gl=C.gl,this.location=B},$r=function(k){function C(B,te){k.call(this,B,te),this.current=0}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1i(this.location,te))},C}(Zr),Xr=function(k){function C(B,te){k.call(this,B,te),this.current=0}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1f(this.location,te))},C}(Zr),rn=function(k){function C(B,te){k.call(this,B,te),this.current=[0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1])&&(this.current=te,this.gl.uniform2f(this.location,te[0],te[1]))},C}(Zr),xn=function(k){function C(B,te){k.call(this,B,te),this.current=[0,0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2])&&(this.current=te,this.gl.uniform3f(this.location,te[0],te[1],te[2]))},C}(Zr),Fn=function(k){function C(B,te){k.call(this,B,te),this.current=[0,0,0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2]||te[3]!==this.current[3])&&(this.current=te,this.gl.uniform4f(this.location,te[0],te[1],te[2],te[3]))},C}(Zr),Gn=function(k){function C(B,te){k.call(this,B,te),this.current=Ai.transparent}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te.r!==this.current.r||te.g!==this.current.g||te.b!==this.current.b||te.a!==this.current.a)&&(this.current=te,this.gl.uniform4f(this.location,te.r,te.g,te.b,te.a))},C}(Zr),oa=new Float32Array(16),ca=function(k){function C(B,te){k.call(this,B,te),this.current=oa}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){if(te[12]!==this.current[12]||te[0]!==this.current[0]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);return}for(var pe=1;pe<16;pe++)if(te[pe]!==this.current[pe]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);break}},C}(Zr);function la(k){return[de(255*k.r,255*k.g),de(255*k.b,255*k.a)]}var wa=function(C,B,te){this.value=C,this.uniformNames=B.map(function(pe){return"u_"+pe}),this.type=te};wa.prototype.setUniform=function(C,B,te){C.set(te.constantOr(this.value))},wa.prototype.getBinding=function(C,B,te){return this.type==="color"?new Gn(C,B):new Xr(C,B)};var La=function(C,B){this.uniformNames=B.map(function(te){return"u_"+te}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};La.prototype.setConstantPatternPositions=function(C,B){this.pixelRatioFrom=B.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=B.tlbr,this.patternTo=C.tlbr},La.prototype.setUniform=function(C,B,te,pe){var we=pe==="u_pattern_to"?this.patternTo:pe==="u_pattern_from"?this.patternFrom:pe==="u_pixel_ratio_to"?this.pixelRatioTo:pe==="u_pixel_ratio_from"?this.pixelRatioFrom:null;we&&C.set(we)},La.prototype.getBinding=function(C,B,te){return te.substr(0,9)==="u_pattern"?new Fn(C,B):new Xr(C,B)};var Ca=function(C,B,te,pe){this.expression=C,this.type=te,this.maxValue=0,this.paintVertexAttributes=B.map(function(we){return{name:"a_"+we,type:"Float32",components:te==="color"?2:1,offset:0}}),this.paintVertexArray=new pe};Ca.prototype.populatePaintArray=function(C,B,te,pe,we){var Me=this.paintVertexArray.length,Ne=this.expression.evaluate(new mi(0),B,{},pe,[],we);this.paintVertexArray.resize(C),this._setPaintValue(Me,C,Ne)},Ca.prototype.updatePaintArray=function(C,B,te,pe){var we=this.expression.evaluate({zoom:0},te,pe);this._setPaintValue(C,B,we)},Ca.prototype._setPaintValue=function(C,B,te){if(this.type==="color")for(var pe=la(te),we=C;we<B;we++)this.paintVertexArray.emplace(we,pe[0],pe[1]);else{for(var Me=C;Me<B;Me++)this.paintVertexArray.emplace(Me,te);this.maxValue=Math.max(this.maxValue,Math.abs(te))}},Ca.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Fa=function(C,B,te,pe,we,Me){this.expression=C,this.uniformNames=B.map(function(Ne){return"u_"+Ne+"_t"}),this.type=te,this.useIntegerZoom=pe,this.zoom=we,this.maxValue=0,this.paintVertexAttributes=B.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:te==="color"?4:2,offset:0}}),this.paintVertexArray=new Me};Fa.prototype.populatePaintArray=function(C,B,te,pe,we){var Me=this.expression.evaluate(new mi(this.zoom),B,{},pe,[],we),Ne=this.expression.evaluate(new mi(this.zoom+1),B,{},pe,[],we),rt=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(rt,C,Me,Ne)},Fa.prototype.updatePaintArray=function(C,B,te,pe){var we=this.expression.evaluate({zoom:this.zoom},te,pe),Me=this.expression.evaluate({zoom:this.zoom+1},te,pe);this._setPaintValue(C,B,we,Me)},Fa.prototype._setPaintValue=function(C,B,te,pe){if(this.type==="color")for(var we=la(te),Me=la(pe),Ne=C;Ne<B;Ne++)this.paintVertexArray.emplace(Ne,we[0],we[1],Me[0],Me[1]);else{for(var rt=C;rt<B;rt++)this.paintVertexArray.emplace(rt,te,pe);this.maxValue=Math.max(this.maxValue,Math.abs(te),Math.abs(pe))}},Fa.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Fa.prototype.setUniform=function(C,B){var te=this.useIntegerZoom?Math.floor(B.zoom):B.zoom,pe=f(this.expression.interpolationFactor(te,this.zoom,this.zoom+1),0,1);C.set(pe)},Fa.prototype.getBinding=function(C,B,te){return new Xr(C,B)};var Ba=function(C,B,te,pe,we,Me){this.expression=C,this.type=B,this.useIntegerZoom=te,this.zoom=pe,this.layerId=Me,this.zoomInPaintVertexArray=new we,this.zoomOutPaintVertexArray=new we};Ba.prototype.populatePaintArray=function(C,B,te){var pe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(pe,C,B.patterns&&B.patterns[this.layerId],te)},Ba.prototype.updatePaintArray=function(C,B,te,pe,we){this._setPaintValues(C,B,te.patterns&&te.patterns[this.layerId],we)},Ba.prototype._setPaintValues=function(C,B,te,pe){if(!(!pe||!te)){var we=te.min,Me=te.mid,Ne=te.max,rt=pe[we],vt=pe[Me],yt=pe[Ne];if(!(!rt||!vt||!yt))for(var Ut=C;Ut<B;Ut++)this.zoomInPaintVertexArray.emplace(Ut,vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],rt.tl[0],rt.tl[1],rt.br[0],rt.br[1],vt.pixelRatio,rt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ut,vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],vt.pixelRatio,yt.pixelRatio)}},Ba.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,$.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,$.members,this.expression.isStateDependent))},Ba.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ti=function(C,B,te,pe){this.binders={},this.layoutAttributes=pe,this._buffers=[];var we=[];for(var Me in C.paint._values)if(!!te(Me)){var Ne=C.paint.get(Me);if(!(!(Ne instanceof io)||!hi(Ne.property.specification))){var rt=Yi(Me,C.type),vt=Ne.value,yt=Ne.property.specification.type,Ut=Ne.property.useIntegerZoom,ir=Ne.property.specification["property-type"],tr=ir==="cross-faded"||ir==="cross-faded-data-driven";if(vt.kind==="constant")this.binders[Me]=tr?new La(vt.value,rt):new wa(vt.value,rt,yt),we.push("/u_"+Me);else if(vt.kind==="source"||tr){var xr=Ci(Me,yt,"source");this.binders[Me]=tr?new Ba(vt,yt,Ut,B,xr,C.id):new Ca(vt,rt,yt,xr),we.push("/a_"+Me)}else{var Ur=Ci(Me,yt,"composite");this.binders[Me]=new Fa(vt,rt,yt,Ut,B,Ur),we.push("/z_"+Me)}}}this.cacheKey=we.sort().join("")};ti.prototype.getMaxValue=function(C){var B=this.binders[C];return B instanceof Ca||B instanceof Fa?B.maxValue:0},ti.prototype.populatePaintArrays=function(C,B,te,pe,we){for(var Me in this.binders){var Ne=this.binders[Me];(Ne instanceof Ca||Ne instanceof Fa||Ne instanceof Ba)&&Ne.populatePaintArray(C,B,te,pe,we)}},ti.prototype.setConstantPatternPositions=function(C,B){for(var te in this.binders){var pe=this.binders[te];pe instanceof La&&pe.setConstantPatternPositions(C,B)}},ti.prototype.updatePaintArrays=function(C,B,te,pe,we){var Me=!1;for(var Ne in C)for(var rt=B.getPositions(Ne),vt=0,yt=rt;vt<yt.length;vt+=1){var Ut=yt[vt],ir=te.feature(Ut.index);for(var tr in this.binders){var xr=this.binders[tr];if((xr instanceof Ca||xr instanceof Fa||xr instanceof Ba)&&xr.expression.isStateDependent===!0){var Ur=pe.paint.get(tr);xr.expression=Ur.value,xr.updatePaintArray(Ut.start,Ut.end,ir,C[Ne],we),Me=!0}}}return Me},ti.prototype.defines=function(){var C=[];for(var B in this.binders){var te=this.binders[B];(te instanceof wa||te instanceof La)&&C.push.apply(C,te.uniformNames.map(function(pe){return"#define HAS_UNIFORM_"+pe}))}return C},ti.prototype.getPaintVertexBuffers=function(){return this._buffers},ti.prototype.getUniforms=function(C,B){var te=[];for(var pe in this.binders){var we=this.binders[pe];if(we instanceof wa||we instanceof La||we instanceof Fa)for(var Me=0,Ne=we.uniformNames;Me<Ne.length;Me+=1){var rt=Ne[Me];if(B[rt]){var vt=we.getBinding(C,B[rt],rt);te.push({name:rt,property:pe,binding:vt})}}}return te},ti.prototype.setUniforms=function(C,B,te,pe){for(var we=0,Me=B;we<Me.length;we+=1){var Ne=Me[we],rt=Ne.name,vt=Ne.property,yt=Ne.binding;this.binders[vt].setUniform(yt,pe,te.get(vt),rt)}},ti.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var B in this.binders){var te=this.binders[B];if(C&&te instanceof Ba){var pe=C.fromScale===2?te.zoomInPaintVertexBuffer:te.zoomOutPaintVertexBuffer;pe&&this._buffers.push(pe)}else(te instanceof Ca||te instanceof Fa)&&te.paintVertexBuffer&&this._buffers.push(te.paintVertexBuffer)}},ti.prototype.upload=function(C){for(var B in this.binders){var te=this.binders[B];(te instanceof Ca||te instanceof Fa||te instanceof Ba)&&te.upload(C)}this.updatePaintBuffers()},ti.prototype.destroy=function(){for(var C in this.binders){var B=this.binders[C];(B instanceof Ca||B instanceof Fa||B instanceof Ba)&&B.destroy()}};var pi=function(C,B,te,pe){pe===void 0&&(pe=function(){return!0}),this.programConfigurations={};for(var we=0,Me=B;we<Me.length;we+=1){var Ne=Me[we];this.programConfigurations[Ne.id]=new ti(Ne,te,pe,C)}this.needsUpload=!1,this._featureMap=new Dt,this._bufferOffset=0};pi.prototype.populatePaintArrays=function(C,B,te,pe,we,Me){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(C,B,pe,we,Me);B.id!==void 0&&this._featureMap.add(B.id,te,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},pi.prototype.updatePaintArrays=function(C,B,te,pe){for(var we=0,Me=te;we<Me.length;we+=1){var Ne=Me[we];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(C,this._featureMap,B,Ne,pe)||this.needsUpload}},pi.prototype.get=function(C){return this.programConfigurations[C]},pi.prototype.upload=function(C){if(!!this.needsUpload){for(var B in this.programConfigurations)this.programConfigurations[B].upload(C);this.needsUpload=!1}},pi.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function Yi(k,C){var B={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return B[k]||[k.replace(C+"-","").replace(/-/g,"_")]}function xi(k){var C={"line-pattern":{source:wl,composite:wl},"fill-pattern":{source:wl,composite:wl},"fill-extrusion-pattern":{source:wl,composite:wl}};return C[k]}function Ci(k,C,B){var te={color:{source:Dc,composite:mv},number:{source:sf,composite:Dc}},pe=xi(k);return pe&&pe[B]||te[C][B]}Be("ConstantBinder",wa),Be("CrossFadedConstantBinder",La),Be("SourceExpressionBinder",Ca),Be("CrossFadedCompositeBinder",Ba),Be("CompositeExpressionBinder",Fa),Be("ProgramConfiguration",ti,{omit:["_buffers"]}),Be("ProgramConfigurationSet",pi);var Ja=8192;function Wi(k){return{min:-1*Math.pow(2,k-1),max:Math.pow(2,k-1)-1}}var Qi=Wi(15);function to(k){for(var C=Ja/k.extent,B=k.loadGeometry(),te=0;te<B.length;te++)for(var pe=B[te],we=0;we<pe.length;we++){var Me=pe[we];Me.x=Math.round(Me.x*C),Me.y=Math.round(Me.y*C),(Me.x<Qi.min||Me.x>Qi.max||Me.y<Qi.min||Me.y>Qi.max)&&(O("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Me.x=f(Me.x,Qi.min,Qi.max),Me.y=f(Me.y,Qi.min,Qi.max))}return B}function Ii(k,C,B,te,pe){k.emplaceBack(C*2+(te+1)/2,B*2+(pe+1)/2)}var ho=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new zf,this.indexArray=new dc,this.segments=new W,this.programConfigurations=new pi(ve,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};ho.prototype.populate=function(C,B,te){var pe=this.layers[0],we=[],Me=null;pe.type==="circle"&&(Me=pe.layout.get("circle-sort-key"));for(var Ne=0,rt=C;Ne<rt.length;Ne+=1){var vt=rt[Ne],yt=vt.feature,Ut=vt.id,ir=vt.index,tr=vt.sourceLayerIndex,xr=this.layers[0]._featureFilter.needGeometry,Ur={type:yt.type,id:Ut,properties:yt.properties,geometry:xr?to(yt):[]};if(!!this.layers[0]._featureFilter.filter(new mi(this.zoom),Ur,te)){xr||(Ur.geometry=to(yt));var hn=Me?Me.evaluate(Ur,{},te):void 0,an={id:Ut,properties:yt.properties,type:yt.type,sourceLayerIndex:tr,index:ir,geometry:Ur.geometry,patterns:{},sortKey:hn};we.push(an)}}Me&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var Rn=0,Mn=we;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn],Vn=Dn,qn=Vn.geometry,da=Vn.index,va=Vn.sourceLayerIndex,Wa=C[da].feature;this.addFeature(Dn,qn,da,te),B.featureIndex.insert(Wa,qn,da,va,this.index)}},ho.prototype.update=function(C,B,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,te)},ho.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ho.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ho.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ve),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},ho.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ho.prototype.addFeature=function(C,B,te,pe){for(var we=0,Me=B;we<Me.length;we+=1)for(var Ne=Me[we],rt=0,vt=Ne;rt<vt.length;rt+=1){var yt=vt[rt],Ut=yt.x,ir=yt.y;if(!(Ut<0||Ut>=Ja||ir<0||ir>=Ja)){var tr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),xr=tr.vertexLength;Ii(this.layoutVertexArray,Ut,ir,-1,-1),Ii(this.layoutVertexArray,Ut,ir,1,-1),Ii(this.layoutVertexArray,Ut,ir,1,1),Ii(this.layoutVertexArray,Ut,ir,-1,1),this.indexArray.emplaceBack(xr,xr+1,xr+2),this.indexArray.emplaceBack(xr,xr+3,xr+2),tr.vertexLength+=4,tr.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,{},pe)},Be("CircleBucket",ho,{omit:["layers"]});function gi(k,C){for(var B=0;B<k.length;B++)if(Tl(C,k[B]))return!0;for(var te=0;te<C.length;te++)if(Tl(k,C[te]))return!0;return!!bu(k,C)}function Oi(k,C,B){return!!(Tl(k,C)||ec(C,k,B))}function Ho(k,C){if(k.length===1)return tc(C,k[0]);for(var B=0;B<C.length;B++)for(var te=C[B],pe=0;pe<te.length;pe++)if(Tl(k,te[pe]))return!0;for(var we=0;we<k.length;we++)if(tc(C,k[we]))return!0;for(var Me=0;Me<C.length;Me++)if(bu(k,C[Me]))return!0;return!1}function as(k,C,B){for(var te=0;te<C.length;te++){var pe=C[te];if(k.length>=3){for(var we=0;we<pe.length;we++)if(Tl(k,pe[we]))return!0}if(xu(k,pe,B))return!0}return!1}function xu(k,C,B){if(k.length>1){if(bu(k,C))return!0;for(var te=0;te<C.length;te++)if(ec(C[te],k,B))return!0}for(var pe=0;pe<k.length;pe++)if(ec(k[pe],C,B))return!0;return!1}function bu(k,C){if(k.length===0||C.length===0)return!1;for(var B=0;B<k.length-1;B++)for(var te=k[B],pe=k[B+1],we=0;we<C.length-1;we++){var Me=C[we],Ne=C[we+1];if(qu(te,pe,Me,Ne))return!0}return!1}function qu(k,C,B,te){return z(k,B,te)!==z(C,B,te)&&z(k,C,B)!==z(k,C,te)}function ec(k,C,B){var te=B*B;if(C.length===1)return k.distSqr(C[0])<te;for(var pe=1;pe<C.length;pe++){var we=C[pe-1],Me=C[pe];if(gc(k,we,Me)<te)return!0}return!1}function gc(k,C,B){var te=C.distSqr(B);if(te===0)return k.distSqr(C);var pe=((k.x-C.x)*(B.x-C.x)+(k.y-C.y)*(B.y-C.y))/te;return pe<0?k.distSqr(C):pe>1?k.distSqr(B):k.distSqr(B.sub(C)._mult(pe)._add(C))}function tc(k,C){for(var B=!1,te,pe,we,Me=0;Me<k.length;Me++){te=k[Me];for(var Ne=0,rt=te.length-1;Ne<te.length;rt=Ne++)pe=te[Ne],we=te[rt],pe.y>C.y!=we.y>C.y&&C.x<(we.x-pe.x)*(C.y-pe.y)/(we.y-pe.y)+pe.x&&(B=!B)}return B}function Tl(k,C){for(var B=!1,te=0,pe=k.length-1;te<k.length;pe=te++){var we=k[te],Me=k[pe];we.y>C.y!=Me.y>C.y&&C.x<(Me.x-we.x)*(C.y-we.y)/(Me.y-we.y)+we.x&&(B=!B)}return B}function Ic(k,C,B,te,pe){for(var we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we];if(C<=Ne.x&&B<=Ne.y&&te>=Ne.x&&pe>=Ne.y)return!0}var rt=[new v(C,B),new v(C,pe),new v(te,pe),new v(te,B)];if(k.length>2)for(var vt=0,yt=rt;vt<yt.length;vt+=1){var Ut=yt[vt];if(Tl(k,Ut))return!0}for(var ir=0;ir<k.length-1;ir++){var tr=k[ir],xr=k[ir+1];if(Ks(tr,xr,rt))return!0}return!1}function Ks(k,C,B){var te=B[0],pe=B[2];if(k.x<te.x&&C.x<te.x||k.x>pe.x&&C.x>pe.x||k.y<te.y&&C.y<te.y||k.y>pe.y&&C.y>pe.y)return!1;var we=z(k,C,B[0]);return we!==z(k,C,B[1])||we!==z(k,C,B[2])||we!==z(k,C,B[3])}function eu(k,C,B){var te=C.paint.get(k).value;return te.kind==="constant"?te.value:B.programConfigurations.get(C.id).getMaxValue(k)}function rc(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])}function Uu(k,C,B,te,pe){if(!C[0]&&!C[1])return k;var we=v.convert(C)._mult(pe);B==="viewport"&&we._rotate(-te);for(var Me=[],Ne=0;Ne<k.length;Ne++){var rt=k[Ne];Me.push(rt.sub(we))}return Me}var nc=new co({"circle-sort-key":new oi(Yt.layout_circle["circle-sort-key"])}),gh=new co({"circle-radius":new oi(Yt.paint_circle["circle-radius"]),"circle-color":new oi(Yt.paint_circle["circle-color"]),"circle-blur":new oi(Yt.paint_circle["circle-blur"]),"circle-opacity":new oi(Yt.paint_circle["circle-opacity"]),"circle-translate":new Za(Yt.paint_circle["circle-translate"]),"circle-translate-anchor":new Za(Yt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Za(Yt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Za(Yt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new oi(Yt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new oi(Yt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new oi(Yt.paint_circle["circle-stroke-opacity"])}),Yc={paint:gh,layout:nc},Us=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var k=arguments,C=0,B=arguments.length;B--;)C+=k[B]*k[B];return Math.sqrt(C)});function Uf(){var k=new Us(4);return Us!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k}function sl(k,C,B){var te=C[0],pe=C[1],we=C[2],Me=C[3],Ne=Math.sin(B),rt=Math.cos(B);return k[0]=te*rt+we*Ne,k[1]=pe*rt+Me*Ne,k[2]=te*-Ne+we*rt,k[3]=pe*-Ne+Me*rt,k}function Vf(){var k=new Us(9);return Us!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function yh(k,C){var B=Math.sin(C),te=Math.cos(C);return k[0]=te,k[1]=B,k[2]=0,k[3]=-B,k[4]=te,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function mh(){var k=new Us(16);return Us!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=0,k[12]=0,k[13]=0,k[14]=0),k[0]=1,k[5]=1,k[10]=1,k[15]=1,k}function vp(k){var C=new Us(16);return C[0]=k[0],C[1]=k[1],C[2]=k[2],C[3]=k[3],C[4]=k[4],C[5]=k[5],C[6]=k[6],C[7]=k[7],C[8]=k[8],C[9]=k[9],C[10]=k[10],C[11]=k[11],C[12]=k[12],C[13]=k[13],C[14]=k[14],C[15]=k[15],C}function xh(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}function cf(k,C){var B=C[0],te=C[1],pe=C[2],we=C[3],Me=C[4],Ne=C[5],rt=C[6],vt=C[7],yt=C[8],Ut=C[9],ir=C[10],tr=C[11],xr=C[12],Ur=C[13],hn=C[14],an=C[15],Rn=B*Ne-te*Me,Mn=B*rt-pe*Me,Dn=B*vt-we*Me,Vn=te*rt-pe*Ne,qn=te*vt-we*Ne,da=pe*vt-we*rt,va=yt*Ur-Ut*xr,Wa=yt*hn-ir*xr,Da=yt*an-tr*xr,Oa=Ut*hn-ir*Ur,fi=Ut*an-tr*Ur,Ua=ir*an-tr*hn,Ha=Rn*Ua-Mn*fi+Dn*Oa+Vn*Da-qn*Wa+da*va;return Ha?(Ha=1/Ha,k[0]=(Ne*Ua-rt*fi+vt*Oa)*Ha,k[1]=(pe*fi-te*Ua-we*Oa)*Ha,k[2]=(Ur*da-hn*qn+an*Vn)*Ha,k[3]=(ir*qn-Ut*da-tr*Vn)*Ha,k[4]=(rt*Da-Me*Ua-vt*Wa)*Ha,k[5]=(B*Ua-pe*Da+we*Wa)*Ha,k[6]=(hn*Dn-xr*da-an*Mn)*Ha,k[7]=(yt*da-ir*Dn+tr*Mn)*Ha,k[8]=(Me*fi-Ne*Da+vt*va)*Ha,k[9]=(te*Da-B*fi-we*va)*Ha,k[10]=(xr*qn-Ur*Dn+an*Rn)*Ha,k[11]=(Ut*Dn-yt*qn-tr*Rn)*Ha,k[12]=(Ne*Wa-Me*Oa-rt*va)*Ha,k[13]=(B*Oa-te*Wa+pe*va)*Ha,k[14]=(Ur*Mn-xr*Vn-hn*Rn)*Ha,k[15]=(yt*Vn-Ut*Mn+ir*Rn)*Ha,k):null}function ff(k,C,B){var te=C[0],pe=C[1],we=C[2],Me=C[3],Ne=C[4],rt=C[5],vt=C[6],yt=C[7],Ut=C[8],ir=C[9],tr=C[10],xr=C[11],Ur=C[12],hn=C[13],an=C[14],Rn=C[15],Mn=B[0],Dn=B[1],Vn=B[2],qn=B[3];return k[0]=Mn*te+Dn*Ne+Vn*Ut+qn*Ur,k[1]=Mn*pe+Dn*rt+Vn*ir+qn*hn,k[2]=Mn*we+Dn*vt+Vn*tr+qn*an,k[3]=Mn*Me+Dn*yt+Vn*xr+qn*Rn,Mn=B[4],Dn=B[5],Vn=B[6],qn=B[7],k[4]=Mn*te+Dn*Ne+Vn*Ut+qn*Ur,k[5]=Mn*pe+Dn*rt+Vn*ir+qn*hn,k[6]=Mn*we+Dn*vt+Vn*tr+qn*an,k[7]=Mn*Me+Dn*yt+Vn*xr+qn*Rn,Mn=B[8],Dn=B[9],Vn=B[10],qn=B[11],k[8]=Mn*te+Dn*Ne+Vn*Ut+qn*Ur,k[9]=Mn*pe+Dn*rt+Vn*ir+qn*hn,k[10]=Mn*we+Dn*vt+Vn*tr+qn*an,k[11]=Mn*Me+Dn*yt+Vn*xr+qn*Rn,Mn=B[12],Dn=B[13],Vn=B[14],qn=B[15],k[12]=Mn*te+Dn*Ne+Vn*Ut+qn*Ur,k[13]=Mn*pe+Dn*rt+Vn*ir+qn*hn,k[14]=Mn*we+Dn*vt+Vn*tr+qn*an,k[15]=Mn*Me+Dn*yt+Vn*xr+qn*Rn,k}function jo(k,C,B){var te=B[0],pe=B[1],we=B[2],Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur,hn,an;return C===k?(k[12]=C[0]*te+C[4]*pe+C[8]*we+C[12],k[13]=C[1]*te+C[5]*pe+C[9]*we+C[13],k[14]=C[2]*te+C[6]*pe+C[10]*we+C[14],k[15]=C[3]*te+C[7]*pe+C[11]*we+C[15]):(Me=C[0],Ne=C[1],rt=C[2],vt=C[3],yt=C[4],Ut=C[5],ir=C[6],tr=C[7],xr=C[8],Ur=C[9],hn=C[10],an=C[11],k[0]=Me,k[1]=Ne,k[2]=rt,k[3]=vt,k[4]=yt,k[5]=Ut,k[6]=ir,k[7]=tr,k[8]=xr,k[9]=Ur,k[10]=hn,k[11]=an,k[12]=Me*te+yt*pe+xr*we+C[12],k[13]=Ne*te+Ut*pe+Ur*we+C[13],k[14]=rt*te+ir*pe+hn*we+C[14],k[15]=vt*te+tr*pe+an*we+C[15]),k}function Ul(k,C,B){var te=B[0],pe=B[1],we=B[2];return k[0]=C[0]*te,k[1]=C[1]*te,k[2]=C[2]*te,k[3]=C[3]*te,k[4]=C[4]*pe,k[5]=C[5]*pe,k[6]=C[6]*pe,k[7]=C[7]*pe,k[8]=C[8]*we,k[9]=C[9]*we,k[10]=C[10]*we,k[11]=C[11]*we,k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15],k}function Vl(k,C,B){var te=Math.sin(B),pe=Math.cos(B),we=C[4],Me=C[5],Ne=C[6],rt=C[7],vt=C[8],yt=C[9],Ut=C[10],ir=C[11];return C!==k&&(k[0]=C[0],k[1]=C[1],k[2]=C[2],k[3]=C[3],k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15]),k[4]=we*pe+vt*te,k[5]=Me*pe+yt*te,k[6]=Ne*pe+Ut*te,k[7]=rt*pe+ir*te,k[8]=vt*pe-we*te,k[9]=yt*pe-Me*te,k[10]=Ut*pe-Ne*te,k[11]=ir*pe-rt*te,k}function bh(k,C,B){var te=Math.sin(B),pe=Math.cos(B),we=C[0],Me=C[1],Ne=C[2],rt=C[3],vt=C[4],yt=C[5],Ut=C[6],ir=C[7];return C!==k&&(k[8]=C[8],k[9]=C[9],k[10]=C[10],k[11]=C[11],k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15]),k[0]=we*pe+vt*te,k[1]=Me*pe+yt*te,k[2]=Ne*pe+Ut*te,k[3]=rt*pe+ir*te,k[4]=vt*pe-we*te,k[5]=yt*pe-Me*te,k[6]=Ut*pe-Ne*te,k[7]=ir*pe-rt*te,k}function _v(k,C,B,te,pe){var we=1/Math.tan(C/2),Me;return k[0]=we/B,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=we,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=-1,k[12]=0,k[13]=0,k[15]=0,pe!=null&&pe!==1/0?(Me=1/(te-pe),k[10]=(pe+te)*Me,k[14]=2*pe*te*Me):(k[10]=-1,k[14]=-2*te),k}function Nd(k,C,B,te,pe,we,Me){var Ne=1/(C-B),rt=1/(te-pe),vt=1/(we-Me);return k[0]=-2*Ne,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=-2*rt,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=2*vt,k[11]=0,k[12]=(C+B)*Ne,k[13]=(pe+te)*rt,k[14]=(Me+we)*vt,k[15]=1,k}var Bd=ff;function Hf(){var k=new Us(3);return Us!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),k}function Ud(k){var C=new Us(3);return C[0]=k[0],C[1]=k[1],C[2]=k[2],C}function _h(k,C,B){return k[0]=C[0]+B[0],k[1]=C[1]+B[1],k[2]=C[2]+B[2],k}function Vd(k,C,B){return k[0]=C[0]-B[0],k[1]=C[1]-B[1],k[2]=C[2]-B[2],k}function Hd(k,C,B){return k[0]=C[0]*B,k[1]=C[1]*B,k[2]=C[2]*B,k}function wv(k,C){var B=C[0],te=C[1],pe=C[2],we=B*B+te*te+pe*pe;return we>0&&(we=1/Math.sqrt(we)),k[0]=C[0]*we,k[1]=C[1]*we,k[2]=C[2]*we,k}function Ub(k,C){return k[0]*C[0]+k[1]*C[1]+k[2]*C[2]}function Vb(k,C,B){var te=C[0],pe=C[1],we=C[2],Me=B[0],Ne=B[1],rt=B[2];return k[0]=pe*rt-we*Ne,k[1]=we*Me-te*rt,k[2]=te*Ne-pe*Me,k}function Hb(k,C,B){var te=C[0],pe=C[1],we=C[2];return k[0]=te*B[0]+pe*B[3]+we*B[6],k[1]=te*B[1]+pe*B[4]+we*B[7],k[2]=te*B[2]+pe*B[5]+we*B[8],k}var Gb=Vd;(function(){var k=Hf();return function(C,B,te,pe,we,Me){var Ne,rt;for(B||(B=3),te||(te=0),pe?rt=Math.min(pe*B+te,C.length):rt=C.length,Ne=te;Ne<rt;Ne+=B)k[0]=C[Ne],k[1]=C[Ne+1],k[2]=C[Ne+2],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1],C[Ne+2]=k[2];return C}})();function Yb(){var k=new Us(4);return Us!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0,k[3]=0),k}function Wb(k,C,B){return k[0]=C[0]*B,k[1]=C[1]*B,k[2]=C[2]*B,k[3]=C[3]*B,k}function Xb(k,C){return k[0]*C[0]+k[1]*C[1]+k[2]*C[2]+k[3]*C[3]}function pp(k,C,B){var te=C[0],pe=C[1],we=C[2],Me=C[3];return k[0]=B[0]*te+B[4]*pe+B[8]*we+B[12]*Me,k[1]=B[1]*te+B[5]*pe+B[9]*we+B[13]*Me,k[2]=B[2]*te+B[6]*pe+B[10]*we+B[14]*Me,k[3]=B[3]*te+B[7]*pe+B[11]*we+B[15]*Me,k}(function(){var k=Yb();return function(C,B,te,pe,we,Me){var Ne,rt;for(B||(B=4),te||(te=0),pe?rt=Math.min(pe*B+te,C.length):rt=C.length,Ne=te;Ne<rt;Ne+=B)k[0]=C[Ne],k[1]=C[Ne+1],k[2]=C[Ne+2],k[3]=C[Ne+3],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1],C[Ne+2]=k[2],C[Ne+3]=k[3];return C}})();function jb(){var k=new Us(2);return Us!=Float32Array&&(k[0]=0,k[1]=0),k}function Zb(k){var C=k[0],B=k[1];return C*C+B*B}var Kb=Zb;(function(){var k=jb();return function(C,B,te,pe,we,Me){var Ne,rt;for(B||(B=2),te||(te=0),pe?rt=Math.min(pe*B+te,C.length):rt=C.length,Ne=te;Ne<rt;Ne+=B)k[0]=C[Ne],k[1]=C[Ne+1],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1];return C}})();var Jb=function(k){function C(B){k.call(this,B,Yc)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new ho(te)},C.prototype.queryRadius=function(te){var pe=te;return eu("circle-radius",this,pe)+eu("circle-stroke-width",this,pe)+rc(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,we,Me,Ne,rt,vt,yt){for(var Ut=Uu(te,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),rt.angle,vt),ir=this.paint.get("circle-radius").evaluate(pe,we),tr=this.paint.get("circle-stroke-width").evaluate(pe,we),xr=ir+tr,Ur=this.paint.get("circle-pitch-alignment")==="map",hn=Ur?Ut:$b(Ut,yt),an=Ur?xr*vt:xr,Rn=0,Mn=Me;Rn<Mn.length;Rn+=1)for(var Dn=Mn[Rn],Vn=0,qn=Dn;Vn<qn.length;Vn+=1){var da=qn[Vn],va=Ur?da:Jg(da,yt),Wa=an,Da=pp([],[da.x,da.y,0,1],yt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Wa*=Da[3]/rt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Wa*=rt.cameraToCenterDistance/Da[3]),Oi(hn,va,Wa))return!0}return!1},C}(Zs);function Jg(k,C){var B=pp([],[k.x,k.y,0,1],C);return new v(B[0]/B[3],B[1]/B[3])}function $b(k,C){return k.map(function(B){return Jg(B,C)})}var $g=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(ho);Be("HeatmapBucket",$g,{omit:["layers"]});function Gd(k,C,B,te){var pe=C.width,we=C.height;if(!te)te=new Uint8Array(pe*we*B);else if(te instanceof Uint8ClampedArray)te=new Uint8Array(te.buffer);else if(te.length!==pe*we*B)throw new RangeError("mismatched image size");return k.width=pe,k.height=we,k.data=te,k}function Qg(k,C,B){var te=C.width,pe=C.height;if(!(te===k.width&&pe===k.height)){var we=Gd({},{width:te,height:pe},B);Yd(k,we,{x:0,y:0},{x:0,y:0},{width:Math.min(k.width,te),height:Math.min(k.height,pe)},B),k.width=te,k.height=pe,k.data=we.data}}function Yd(k,C,B,te,pe,we){if(pe.width===0||pe.height===0)return C;if(pe.width>k.width||pe.height>k.height||B.x>k.width-pe.width||B.y>k.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>C.width||pe.height>C.height||te.x>C.width-pe.width||te.y>C.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Me=k.data,Ne=C.data,rt=0;rt<pe.height;rt++)for(var vt=((B.y+rt)*k.width+B.x)*we,yt=((te.y+rt)*C.width+te.x)*we,Ut=0;Ut<pe.width*we;Ut++)Ne[yt+Ut]=Me[vt+Ut];return C}var Gf=function(C,B){Gd(this,C,1,B)};Gf.prototype.resize=function(C){Qg(this,C,1)},Gf.prototype.clone=function(){return new Gf({width:this.width,height:this.height},new Uint8Array(this.data))},Gf.copy=function(C,B,te,pe,we){Yd(C,B,te,pe,we,1)};var Hl=function(C,B){Gd(this,C,4,B)};Hl.prototype.resize=function(C){Qg(this,C,4)},Hl.prototype.replace=function(C,B){B?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},Hl.prototype.clone=function(){return new Hl({width:this.width,height:this.height},new Uint8Array(this.data))},Hl.copy=function(C,B,te,pe,we){Yd(C,B,te,pe,we,4)},Be("AlphaImage",Gf),Be("RGBAImage",Hl);var Qb=new co({"heatmap-radius":new oi(Yt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new oi(Yt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Za(Yt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qo(Yt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Za(Yt.paint_heatmap["heatmap-opacity"])}),qb={paint:Qb};function qg(k,C){for(var B=new Uint8Array(1024),te={},pe=0,we=0;pe<256;pe++,we+=4){te[C]=pe/255;var Me=k.evaluate(te);B[we+0]=Math.floor(Me.r*255/Me.a),B[we+1]=Math.floor(Me.g*255/Me.a),B[we+2]=Math.floor(Me.b*255/Me.a),B[we+3]=Math.floor(Me.a*255)}return new Hl({width:256,height:1},B)}var e_=function(k){function C(B){k.call(this,B,qb),this._updateColorRamp()}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new $g(te)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var te=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=qg(te,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(Zs),t_=new co({"hillshade-illumination-direction":new Za(Yt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Za(Yt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Za(Yt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Za(Yt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Za(Yt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Za(Yt.paint_hillshade["hillshade-accent-color"])}),r_={paint:t_},n_=function(k){function C(B){k.call(this,B,r_)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(Zs),a_=qo([{name:"a_pos",components:2,type:"Int16"}],4),ey=a_.members,Wd=dp,i_=dp;function dp(k,C,B){B=B||2;var te=C&&C.length,pe=te?C[0]*B:k.length,we=ty(k,0,pe,B,!0),Me=[];if(!we||we.next===we.prev)return Me;var Ne,rt,vt,yt,Ut,ir,tr;if(te&&(we=c_(k,C,we,B)),k.length>80*B){Ne=vt=k[0],rt=yt=k[1];for(var xr=B;xr<pe;xr+=B)Ut=k[xr],ir=k[xr+1],Ut<Ne&&(Ne=Ut),ir<rt&&(rt=ir),Ut>vt&&(vt=Ut),ir>yt&&(yt=ir);tr=Math.max(vt-Ne,yt-rt),tr=tr!==0?1/tr:0}return Tv(we,Me,B,Ne,rt,tr),Me}function ty(k,C,B,te,pe){var we,Me;if(pe===Zd(k,C,B,te)>0)for(we=C;we<B;we+=te)Me=ay(we,k[we],k[we+1],Me);else for(we=B-te;we>=C;we-=te)Me=ay(we,k[we],k[we+1],Me);return Me&&gp(Me,Me.next)&&(Mv(Me),Me=Me.next),Me}function hf(k,C){if(!k)return k;C||(C=k);var B=k,te;do if(te=!1,!B.steiner&&(gp(B,B.next)||is(B.prev,B,B.next)===0)){if(Mv(B),B=C=B.prev,B===B.next)break;te=!0}else B=B.next;while(te||B!==C);return C}function Tv(k,C,B,te,pe,we,Me){if(!!k){!Me&&we&&d_(k,te,pe,we);for(var Ne=k,rt,vt;k.prev!==k.next;){if(rt=k.prev,vt=k.next,we?s_(k,te,pe,we):o_(k)){C.push(rt.i/B),C.push(k.i/B),C.push(vt.i/B),Mv(k),k=vt.next,Ne=vt.next;continue}if(k=vt,k===Ne){Me?Me===1?(k=l_(hf(k),C,B),Tv(k,C,B,te,pe,we,2)):Me===2&&u_(k,C,B,te,pe,we):Tv(hf(k),C,B,te,pe,we,1);break}}}}function o_(k){var C=k.prev,B=k,te=k.next;if(is(C,B,te)>=0)return!1;for(var pe=k.next.next;pe!==k.prev;){if(wh(C.x,C.y,B.x,B.y,te.x,te.y,pe.x,pe.y)&&is(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function s_(k,C,B,te){var pe=k.prev,we=k,Me=k.next;if(is(pe,we,Me)>=0)return!1;for(var Ne=pe.x<we.x?pe.x<Me.x?pe.x:Me.x:we.x<Me.x?we.x:Me.x,rt=pe.y<we.y?pe.y<Me.y?pe.y:Me.y:we.y<Me.y?we.y:Me.y,vt=pe.x>we.x?pe.x>Me.x?pe.x:Me.x:we.x>Me.x?we.x:Me.x,yt=pe.y>we.y?pe.y>Me.y?pe.y:Me.y:we.y>Me.y?we.y:Me.y,Ut=Xd(Ne,rt,C,B,te),ir=Xd(vt,yt,C,B,te),tr=k.prevZ,xr=k.nextZ;tr&&tr.z>=Ut&&xr&&xr.z<=ir;){if(tr!==k.prev&&tr!==k.next&&wh(pe.x,pe.y,we.x,we.y,Me.x,Me.y,tr.x,tr.y)&&is(tr.prev,tr,tr.next)>=0||(tr=tr.prevZ,xr!==k.prev&&xr!==k.next&&wh(pe.x,pe.y,we.x,we.y,Me.x,Me.y,xr.x,xr.y)&&is(xr.prev,xr,xr.next)>=0))return!1;xr=xr.nextZ}for(;tr&&tr.z>=Ut;){if(tr!==k.prev&&tr!==k.next&&wh(pe.x,pe.y,we.x,we.y,Me.x,Me.y,tr.x,tr.y)&&is(tr.prev,tr,tr.next)>=0)return!1;tr=tr.prevZ}for(;xr&&xr.z<=ir;){if(xr!==k.prev&&xr!==k.next&&wh(pe.x,pe.y,we.x,we.y,Me.x,Me.y,xr.x,xr.y)&&is(xr.prev,xr,xr.next)>=0)return!1;xr=xr.nextZ}return!0}function l_(k,C,B){var te=k;do{var pe=te.prev,we=te.next.next;!gp(pe,we)&&ry(pe,te,te.next,we)&&Av(pe,we)&&Av(we,pe)&&(C.push(pe.i/B),C.push(te.i/B),C.push(we.i/B),Mv(te),Mv(te.next),te=k=we),te=te.next}while(te!==k);return hf(te)}function u_(k,C,B,te,pe,we){var Me=k;do{for(var Ne=Me.next.next;Ne!==Me.prev;){if(Me.i!==Ne.i&&m_(Me,Ne)){var rt=ny(Me,Ne);Me=hf(Me,Me.next),rt=hf(rt,rt.next),Tv(Me,C,B,te,pe,we),Tv(rt,C,B,te,pe,we);return}Ne=Ne.next}Me=Me.next}while(Me!==k)}function c_(k,C,B,te){var pe=[],we,Me,Ne,rt,vt;for(we=0,Me=C.length;we<Me;we++)Ne=C[we]*te,rt=we<Me-1?C[we+1]*te:k.length,vt=ty(k,Ne,rt,te,!1),vt===vt.next&&(vt.steiner=!0),pe.push(y_(vt));for(pe.sort(f_),we=0;we<pe.length;we++)h_(pe[we],B),B=hf(B,B.next);return B}function f_(k,C){return k.x-C.x}function h_(k,C){if(C=v_(k,C),C){var B=ny(C,k);hf(C,C.next),hf(B,B.next)}}function v_(k,C){var B=C,te=k.x,pe=k.y,we=-1/0,Me;do{if(pe<=B.y&&pe>=B.next.y&&B.next.y!==B.y){var Ne=B.x+(pe-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(Ne<=te&&Ne>we){if(we=Ne,Ne===te){if(pe===B.y)return B;if(pe===B.next.y)return B.next}Me=B.x<B.next.x?B:B.next}}B=B.next}while(B!==C);if(!Me)return null;if(te===we)return Me;var rt=Me,vt=Me.x,yt=Me.y,Ut=1/0,ir;B=Me;do te>=B.x&&B.x>=vt&&te!==B.x&&wh(pe<yt?te:we,pe,vt,yt,pe<yt?we:te,pe,B.x,B.y)&&(ir=Math.abs(pe-B.y)/(te-B.x),Av(B,k)&&(ir<Ut||ir===Ut&&(B.x>Me.x||B.x===Me.x&&p_(Me,B)))&&(Me=B,Ut=ir)),B=B.next;while(B!==rt);return Me}function p_(k,C){return is(k.prev,k,C.prev)<0&&is(C.next,k,k.next)<0}function d_(k,C,B,te){var pe=k;do pe.z===null&&(pe.z=Xd(pe.x,pe.y,C,B,te)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==k);pe.prevZ.nextZ=null,pe.prevZ=null,g_(pe)}function g_(k){var C,B,te,pe,we,Me,Ne,rt,vt=1;do{for(B=k,k=null,we=null,Me=0;B;){for(Me++,te=B,Ne=0,C=0;C<vt&&(Ne++,te=te.nextZ,!!te);C++);for(rt=vt;Ne>0||rt>0&&te;)Ne!==0&&(rt===0||!te||B.z<=te.z)?(pe=B,B=B.nextZ,Ne--):(pe=te,te=te.nextZ,rt--),we?we.nextZ=pe:k=pe,pe.prevZ=we,we=pe;B=te}we.nextZ=null,vt*=2}while(Me>1);return k}function Xd(k,C,B,te,pe){return k=32767*(k-B)*pe,C=32767*(C-te)*pe,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,k|C<<1}function y_(k){var C=k,B=k;do(C.x<B.x||C.x===B.x&&C.y<B.y)&&(B=C),C=C.next;while(C!==k);return B}function wh(k,C,B,te,pe,we,Me,Ne){return(pe-Me)*(C-Ne)-(k-Me)*(we-Ne)>=0&&(k-Me)*(te-Ne)-(B-Me)*(C-Ne)>=0&&(B-Me)*(we-Ne)-(pe-Me)*(te-Ne)>=0}function m_(k,C){return k.next.i!==C.i&&k.prev.i!==C.i&&!x_(k,C)&&(Av(k,C)&&Av(C,k)&&b_(k,C)&&(is(k.prev,k,C.prev)||is(k,C.prev,C))||gp(k,C)&&is(k.prev,k,k.next)>0&&is(C.prev,C,C.next)>0)}function is(k,C,B){return(C.y-k.y)*(B.x-C.x)-(C.x-k.x)*(B.y-C.y)}function gp(k,C){return k.x===C.x&&k.y===C.y}function ry(k,C,B,te){var pe=mp(is(k,C,B)),we=mp(is(k,C,te)),Me=mp(is(B,te,k)),Ne=mp(is(B,te,C));return!!(pe!==we&&Me!==Ne||pe===0&&yp(k,B,C)||we===0&&yp(k,te,C)||Me===0&&yp(B,k,te)||Ne===0&&yp(B,C,te))}function yp(k,C,B){return C.x<=Math.max(k.x,B.x)&&C.x>=Math.min(k.x,B.x)&&C.y<=Math.max(k.y,B.y)&&C.y>=Math.min(k.y,B.y)}function mp(k){return k>0?1:k<0?-1:0}function x_(k,C){var B=k;do{if(B.i!==k.i&&B.next.i!==k.i&&B.i!==C.i&&B.next.i!==C.i&&ry(B,B.next,k,C))return!0;B=B.next}while(B!==k);return!1}function Av(k,C){return is(k.prev,k,k.next)<0?is(k,C,k.next)>=0&&is(k,k.prev,C)>=0:is(k,C,k.prev)<0||is(k,k.next,C)<0}function b_(k,C){var B=k,te=!1,pe=(k.x+C.x)/2,we=(k.y+C.y)/2;do B.y>we!=B.next.y>we&&B.next.y!==B.y&&pe<(B.next.x-B.x)*(we-B.y)/(B.next.y-B.y)+B.x&&(te=!te),B=B.next;while(B!==k);return te}function ny(k,C){var B=new jd(k.i,k.x,k.y),te=new jd(C.i,C.x,C.y),pe=k.next,we=C.prev;return k.next=C,C.prev=k,B.next=pe,pe.prev=B,te.next=B,B.prev=te,we.next=te,te.prev=we,te}function ay(k,C,B,te){var pe=new jd(k,C,B);return te?(pe.next=te.next,pe.prev=te,te.next.prev=pe,te.next=pe):(pe.prev=pe,pe.next=pe),pe}function Mv(k){k.next.prev=k.prev,k.prev.next=k.next,k.prevZ&&(k.prevZ.nextZ=k.nextZ),k.nextZ&&(k.nextZ.prevZ=k.prevZ)}function jd(k,C,B){this.i=k,this.x=C,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}dp.deviation=function(k,C,B,te){var pe=C&&C.length,we=pe?C[0]*B:k.length,Me=Math.abs(Zd(k,0,we,B));if(pe)for(var Ne=0,rt=C.length;Ne<rt;Ne++){var vt=C[Ne]*B,yt=Ne<rt-1?C[Ne+1]*B:k.length;Me-=Math.abs(Zd(k,vt,yt,B))}var Ut=0;for(Ne=0;Ne<te.length;Ne+=3){var ir=te[Ne]*B,tr=te[Ne+1]*B,xr=te[Ne+2]*B;Ut+=Math.abs((k[ir]-k[xr])*(k[tr+1]-k[ir+1])-(k[ir]-k[tr])*(k[xr+1]-k[ir+1]))}return Me===0&&Ut===0?0:Math.abs((Ut-Me)/Me)};function Zd(k,C,B,te){for(var pe=0,we=C,Me=B-te;we<B;we+=te)pe+=(k[Me]-k[we])*(k[we+1]+k[Me+1]),Me=we;return pe}dp.flatten=function(k){for(var C=k[0][0].length,B={vertices:[],holes:[],dimensions:C},te=0,pe=0;pe<k.length;pe++){for(var we=0;we<k[pe].length;we++)for(var Me=0;Me<C;Me++)B.vertices.push(k[pe][we][Me]);pe>0&&(te+=k[pe-1].length,B.holes.push(te))}return B},Wd.default=i_;function __(k,C,B,te,pe){iy(k,C,B||0,te||k.length-1,pe||w_)}function iy(k,C,B,te,pe){for(;te>B;){if(te-B>600){var we=te-B+1,Me=C-B+1,Ne=Math.log(we),rt=.5*Math.exp(2*Ne/3),vt=.5*Math.sqrt(Ne*rt*(we-rt)/we)*(Me-we/2<0?-1:1),yt=Math.max(B,Math.floor(C-Me*rt/we+vt)),Ut=Math.min(te,Math.floor(C+(we-Me)*rt/we+vt));iy(k,C,yt,Ut,pe)}var ir=k[C],tr=B,xr=te;for(Ev(k,B,C),pe(k[te],ir)>0&&Ev(k,B,te);tr<xr;){for(Ev(k,tr,xr),tr++,xr--;pe(k[tr],ir)<0;)tr++;for(;pe(k[xr],ir)>0;)xr--}pe(k[B],ir)===0?Ev(k,B,xr):(xr++,Ev(k,xr,te)),xr<=C&&(B=xr+1),C<=xr&&(te=xr-1)}}function Ev(k,C,B){var te=k[C];k[C]=k[B],k[B]=te}function w_(k,C){return k<C?-1:k>C?1:0}function Kd(k,C){var B=k.length;if(B<=1)return[k];for(var te=[],pe,we,Me=0;Me<B;Me++){var Ne=G(k[Me]);Ne!==0&&(k[Me].area=Math.abs(Ne),we===void 0&&(we=Ne<0),we===Ne<0?(pe&&te.push(pe),pe=[k[Me]]):pe.push(k[Me]))}if(pe&&te.push(pe),C>1)for(var rt=0;rt<te.length;rt++)te[rt].length<=C||(__(te[rt],C,1,te[rt].length-1,T_),te[rt]=te[rt].slice(0,C));return te}function T_(k,C){return C.area-k.area}function Jd(k,C,B){for(var te=B.patternDependencies,pe=!1,we=0,Me=C;we<Me.length;we+=1){var Ne=Me[we],rt=Ne.paint.get(k+"-pattern");rt.isConstant()||(pe=!0);var vt=rt.constantOr(null);vt&&(pe=!0,te[vt.to]=!0,te[vt.from]=!0)}return pe}function $d(k,C,B,te,pe){for(var we=pe.patternDependencies,Me=0,Ne=C;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=rt.paint.get(k+"-pattern"),yt=vt.value;if(yt.kind!=="constant"){var Ut=yt.evaluate({zoom:te-1},B,{},pe.availableImages),ir=yt.evaluate({zoom:te},B,{},pe.availableImages),tr=yt.evaluate({zoom:te+1},B,{},pe.availableImages);Ut=Ut&&Ut.name?Ut.name:Ut,ir=ir&&ir.name?ir.name:ir,tr=tr&&tr.name?tr.name:tr,we[Ut]=!0,we[ir]=!0,we[tr]=!0,B.patterns[rt.id]={min:Ut,mid:ir,max:tr}}}return B}var A_=500,yc=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zf,this.indexArray=new dc,this.indexArray2=new Bf,this.programConfigurations=new pi(ey,C.layers,C.zoom),this.segments=new W,this.segments2=new W,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};yc.prototype.populate=function(C,B,te){this.hasPattern=Jd("fill",this.layers,B);for(var pe=this.layers[0].layout.get("fill-sort-key"),we=[],Me=0,Ne=C;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=rt.feature,yt=rt.id,Ut=rt.index,ir=rt.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,xr={type:vt.type,id:yt,properties:vt.properties,geometry:tr?to(vt):[]};if(!!this.layers[0]._featureFilter.filter(new mi(this.zoom),xr,te)){tr||(xr.geometry=to(vt));var Ur=pe?pe.evaluate(xr,{},te,B.availableImages):void 0,hn={id:yt,properties:vt.properties,type:vt.type,sourceLayerIndex:ir,index:Ut,geometry:xr.geometry,patterns:{},sortKey:Ur};we.push(hn)}}pe&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var an=0,Rn=we;an<Rn.length;an+=1){var Mn=Rn[an],Dn=Mn,Vn=Dn.geometry,qn=Dn.index,da=Dn.sourceLayerIndex;if(this.hasPattern){var va=$d("fill",this.layers,Mn,this.zoom,B);this.patternFeatures.push(va)}else this.addFeature(Mn,Vn,qn,te,{});var Wa=C[qn].feature;B.featureIndex.insert(Wa,Vn,qn,da,this.index)}},yc.prototype.update=function(C,B,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,te)},yc.prototype.addFeatures=function(C,B,te){for(var pe=0,we=this.patternFeatures;pe<we.length;pe+=1){var Me=we[pe];this.addFeature(Me,Me.geometry,Me.index,B,te)}},yc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yc.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ey),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},yc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},yc.prototype.addFeature=function(C,B,te,pe,we){for(var Me=0,Ne=Kd(B,A_);Me<Ne.length;Me+=1){for(var rt=Ne[Me],vt=0,yt=0,Ut=rt;yt<Ut.length;yt+=1){var ir=Ut[yt];vt+=ir.length}for(var tr=this.segments.prepareSegment(vt,this.layoutVertexArray,this.indexArray),xr=tr.vertexLength,Ur=[],hn=[],an=0,Rn=rt;an<Rn.length;an+=1){var Mn=Rn[an];if(Mn.length!==0){Mn!==rt[0]&&hn.push(Ur.length/2);var Dn=this.segments2.prepareSegment(Mn.length,this.layoutVertexArray,this.indexArray2),Vn=Dn.vertexLength;this.layoutVertexArray.emplaceBack(Mn[0].x,Mn[0].y),this.indexArray2.emplaceBack(Vn+Mn.length-1,Vn),Ur.push(Mn[0].x),Ur.push(Mn[0].y);for(var qn=1;qn<Mn.length;qn++)this.layoutVertexArray.emplaceBack(Mn[qn].x,Mn[qn].y),this.indexArray2.emplaceBack(Vn+qn-1,Vn+qn),Ur.push(Mn[qn].x),Ur.push(Mn[qn].y);Dn.vertexLength+=Mn.length,Dn.primitiveLength+=Mn.length}}for(var da=Wd(Ur,hn),va=0;va<da.length;va+=3)this.indexArray.emplaceBack(xr+da[va],xr+da[va+1],xr+da[va+2]);tr.vertexLength+=vt,tr.primitiveLength+=da.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,pe)},Be("FillBucket",yc,{omit:["layers","patternFeatures"]});var M_=new co({"fill-sort-key":new oi(Yt.layout_fill["fill-sort-key"])}),E_=new co({"fill-antialias":new Za(Yt.paint_fill["fill-antialias"]),"fill-opacity":new oi(Yt.paint_fill["fill-opacity"]),"fill-color":new oi(Yt.paint_fill["fill-color"]),"fill-outline-color":new oi(Yt.paint_fill["fill-outline-color"]),"fill-translate":new Za(Yt.paint_fill["fill-translate"]),"fill-translate-anchor":new Za(Yt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bo(Yt.paint_fill["fill-pattern"])}),S_={paint:E_,layout:M_},k_=function(k){function C(B){k.call(this,B,S_)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,pe){k.prototype.recalculate.call(this,te,pe);var we=this.paint._values["fill-outline-color"];we.value.kind==="constant"&&we.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function(te){return new yc(te)},C.prototype.queryRadius=function(){return rc(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,we,Me,Ne,rt,vt){var yt=Uu(te,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),rt.angle,vt);return Ho(yt,Me)},C.prototype.isTileClipped=function(){return!0},C}(Zs),C_=qo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),oy=C_.members,sy=Th;function Th(k,C,B,te,pe){this.properties={},this.extent=B,this.type=0,this._pbf=k,this._geometry=-1,this._keys=te,this._values=pe,k.readFields(L_,this,C)}function L_(k,C,B){k==1?C.id=B.readVarint():k==2?P_(B,C):k==3?C.type=B.readVarint():k==4&&(C._geometry=B.pos)}function P_(k,C){for(var B=k.readVarint()+k.pos;k.pos<B;){var te=C._keys[k.readVarint()],pe=C._values[k.readVarint()];C.properties[te]=pe}}Th.types=["Unknown","Point","LineString","Polygon"],Th.prototype.loadGeometry=function(){var k=this._pbf;k.pos=this._geometry;for(var C=k.readVarint()+k.pos,B=1,te=0,pe=0,we=0,Me=[],Ne;k.pos<C;){if(te<=0){var rt=k.readVarint();B=rt&7,te=rt>>3}if(te--,B===1||B===2)pe+=k.readSVarint(),we+=k.readSVarint(),B===1&&(Ne&&Me.push(Ne),Ne=[]),Ne.push(new v(pe,we));else if(B===7)Ne&&Ne.push(Ne[0].clone());else throw new Error("unknown command "+B)}return Ne&&Me.push(Ne),Me},Th.prototype.bbox=function(){var k=this._pbf;k.pos=this._geometry;for(var C=k.readVarint()+k.pos,B=1,te=0,pe=0,we=0,Me=1/0,Ne=-1/0,rt=1/0,vt=-1/0;k.pos<C;){if(te<=0){var yt=k.readVarint();B=yt&7,te=yt>>3}if(te--,B===1||B===2)pe+=k.readSVarint(),we+=k.readSVarint(),pe<Me&&(Me=pe),pe>Ne&&(Ne=pe),we<rt&&(rt=we),we>vt&&(vt=we);else if(B!==7)throw new Error("unknown command "+B)}return[Me,rt,Ne,vt]},Th.prototype.toGeoJSON=function(k,C,B){var te=this.extent*Math.pow(2,B),pe=this.extent*k,we=this.extent*C,Me=this.loadGeometry(),Ne=Th.types[this.type],rt,vt;function yt(tr){for(var xr=0;xr<tr.length;xr++){var Ur=tr[xr],hn=180-(Ur.y+we)*360/te;tr[xr]=[(Ur.x+pe)*360/te-180,360/Math.PI*Math.atan(Math.exp(hn*Math.PI/180))-90]}}switch(this.type){case 1:var Ut=[];for(rt=0;rt<Me.length;rt++)Ut[rt]=Me[rt][0];Me=Ut,yt(Me);break;case 2:for(rt=0;rt<Me.length;rt++)yt(Me[rt]);break;case 3:for(Me=D_(Me),rt=0;rt<Me.length;rt++)for(vt=0;vt<Me[rt].length;vt++)yt(Me[rt][vt]);break}Me.length===1?Me=Me[0]:Ne="Multi"+Ne;var ir={type:"Feature",geometry:{type:Ne,coordinates:Me},properties:this.properties};return"id"in this&&(ir.id=this.id),ir};function D_(k){var C=k.length;if(C<=1)return[k];for(var B=[],te,pe,we=0;we<C;we++){var Me=R_(k[we]);Me!==0&&(pe===void 0&&(pe=Me<0),pe===Me<0?(te&&B.push(te),te=[k[we]]):te.push(k[we]))}return te&&B.push(te),B}function R_(k){for(var C=0,B=0,te=k.length,pe=te-1,we,Me;B<te;pe=B++)we=k[B],Me=k[pe],C+=(Me.x-we.x)*(we.y+Me.y);return C}var ly=uy;function uy(k,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=k,this._keys=[],this._values=[],this._features=[],k.readFields(I_,this,C),this.length=this._features.length}function I_(k,C,B){k===15?C.version=B.readVarint():k===1?C.name=B.readString():k===5?C.extent=B.readVarint():k===2?C._features.push(B.pos):k===3?C._keys.push(B.readString()):k===4&&C._values.push(F_(B))}function F_(k){for(var C=null,B=k.readVarint()+k.pos;k.pos<B;){var te=k.readVarint()>>3;C=te===1?k.readString():te===2?k.readFloat():te===3?k.readDouble():te===4?k.readVarint64():te===5?k.readVarint():te===6?k.readSVarint():te===7?k.readBoolean():null}return C}uy.prototype.feature=function(k){if(k<0||k>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[k];var C=this._pbf.readVarint()+this._pbf.pos;return new sy(this._pbf,C,this.extent,this._keys,this._values)};var z_=O_;function O_(k,C){this.layers=k.readFields(N_,{},C)}function N_(k,C,B){if(k===3){var te=new ly(B,B.readVarint()+B.pos);te.length&&(C[te.name]=te)}}var B_=z_,U_=sy,V_=ly,Ah={VectorTile:B_,VectorTileFeature:U_,VectorTileLayer:V_},H_=Ah.VectorTileFeature.types,G_=500,Qd=Math.pow(2,13);function Sv(k,C,B,te,pe,we,Me,Ne){k.emplaceBack(C,B,Math.floor(te*Qd)*2+Me,pe*Qd*2,we*Qd*2,Math.round(Ne))}var mc=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new of,this.indexArray=new dc,this.programConfigurations=new pi(oy,C.layers,C.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};mc.prototype.populate=function(C,B,te){this.features=[],this.hasPattern=Jd("fill-extrusion",this.layers,B);for(var pe=0,we=C;pe<we.length;pe+=1){var Me=we[pe],Ne=Me.feature,rt=Me.id,vt=Me.index,yt=Me.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,ir={type:Ne.type,id:rt,properties:Ne.properties,geometry:Ut?to(Ne):[]};if(!!this.layers[0]._featureFilter.filter(new mi(this.zoom),ir,te)){var tr={id:rt,sourceLayerIndex:yt,index:vt,geometry:Ut?ir.geometry:to(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};typeof Ne.id<"u"&&(tr.id=Ne.id),this.hasPattern?this.features.push($d("fill-extrusion",this.layers,tr,this.zoom,B)):this.addFeature(tr,tr.geometry,vt,te,{}),B.featureIndex.insert(Ne,tr.geometry,vt,yt,this.index,!0)}}},mc.prototype.addFeatures=function(C,B,te){for(var pe=0,we=this.features;pe<we.length;pe+=1){var Me=we[pe],Ne=Me.geometry;this.addFeature(Me,Ne,Me.index,B,te)}},mc.prototype.update=function(C,B,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,te)},mc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},mc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},mc.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,oy),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},mc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},mc.prototype.addFeature=function(C,B,te,pe,we){for(var Me=0,Ne=Kd(B,G_);Me<Ne.length;Me+=1){for(var rt=Ne[Me],vt=0,yt=0,Ut=rt;yt<Ut.length;yt+=1){var ir=Ut[yt];vt+=ir.length}for(var tr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),xr=0,Ur=rt;xr<Ur.length;xr+=1){var hn=Ur[xr];if(hn.length!==0&&!W_(hn))for(var an=0,Rn=0;Rn<hn.length;Rn++){var Mn=hn[Rn];if(Rn>=1){var Dn=hn[Rn-1];if(!Y_(Mn,Dn)){tr.vertexLength+4>W.MAX_VERTEX_ARRAY_LENGTH&&(tr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vn=Mn.sub(Dn)._perp()._unit(),qn=Dn.dist(Mn);an+qn>32768&&(an=0),Sv(this.layoutVertexArray,Mn.x,Mn.y,Vn.x,Vn.y,0,0,an),Sv(this.layoutVertexArray,Mn.x,Mn.y,Vn.x,Vn.y,0,1,an),an+=qn,Sv(this.layoutVertexArray,Dn.x,Dn.y,Vn.x,Vn.y,0,0,an),Sv(this.layoutVertexArray,Dn.x,Dn.y,Vn.x,Vn.y,0,1,an);var da=tr.vertexLength;this.indexArray.emplaceBack(da,da+2,da+1),this.indexArray.emplaceBack(da+1,da+2,da+3),tr.vertexLength+=4,tr.primitiveLength+=2}}}}if(tr.vertexLength+vt>W.MAX_VERTEX_ARRAY_LENGTH&&(tr=this.segments.prepareSegment(vt,this.layoutVertexArray,this.indexArray)),H_[C.type]==="Polygon"){for(var va=[],Wa=[],Da=tr.vertexLength,Oa=0,fi=rt;Oa<fi.length;Oa+=1){var Ua=fi[Oa];if(Ua.length!==0){Ua!==rt[0]&&Wa.push(va.length/2);for(var Ha=0;Ha<Ua.length;Ha++){var bi=Ua[Ha];Sv(this.layoutVertexArray,bi.x,bi.y,0,0,1,1,0),va.push(bi.x),va.push(bi.y)}}}for(var ci=Wd(va,Wa),Vi=0;Vi<ci.length;Vi+=3)this.indexArray.emplaceBack(Da+ci[Vi],Da+ci[Vi+2],Da+ci[Vi+1]);tr.primitiveLength+=ci.length/3,tr.vertexLength+=vt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,pe)},Be("FillExtrusionBucket",mc,{omit:["layers","features"]});function Y_(k,C){return k.x===C.x&&(k.x<0||k.x>Ja)||k.y===C.y&&(k.y<0||k.y>Ja)}function W_(k){return k.every(function(C){return C.x<0})||k.every(function(C){return C.x>Ja})||k.every(function(C){return C.y<0})||k.every(function(C){return C.y>Ja})}var X_=new co({"fill-extrusion-opacity":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bo(Yt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),j_={paint:X_},Z_=function(k){function C(B){k.call(this,B,j_)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new mc(te)},C.prototype.queryRadius=function(){return rc(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function(te,pe,we,Me,Ne,rt,vt,yt){var Ut=Uu(te,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),rt.angle,vt),ir=this.paint.get("fill-extrusion-height").evaluate(pe,we),tr=this.paint.get("fill-extrusion-base").evaluate(pe,we),xr=$_(Ut,yt,rt,0),Ur=J_(Me,tr,ir,yt),hn=Ur[0],an=Ur[1];return K_(hn,an,xr)},C}(Zs);function kv(k,C){return k.x*C.x+k.y*C.y}function cy(k,C){if(k.length===1){for(var B=0,te=C[B++],pe;!pe||te.equals(pe);)if(pe=C[B++],!pe)return 1/0;for(;B<C.length;B++){var we=C[B],Me=k[0],Ne=pe.sub(te),rt=we.sub(te),vt=Me.sub(te),yt=kv(Ne,Ne),Ut=kv(Ne,rt),ir=kv(rt,rt),tr=kv(vt,Ne),xr=kv(vt,rt),Ur=yt*ir-Ut*Ut,hn=(ir*tr-Ut*xr)/Ur,an=(yt*xr-Ut*tr)/Ur,Rn=1-hn-an,Mn=te.z*Rn+pe.z*hn+we.z*an;if(isFinite(Mn))return Mn}return 1/0}else{for(var Dn=1/0,Vn=0,qn=C;Vn<qn.length;Vn+=1){var da=qn[Vn];Dn=Math.min(Dn,da.z)}return Dn}}function K_(k,C,B){var te=1/0;Ho(B,C)&&(te=cy(B,C[0]));for(var pe=0;pe<C.length;pe++)for(var we=C[pe],Me=k[pe],Ne=0;Ne<we.length-1;Ne++){var rt=we[Ne],vt=we[Ne+1],yt=Me[Ne],Ut=Me[Ne+1],ir=[rt,vt,Ut,yt,rt];gi(B,ir)&&(te=Math.min(te,cy(B,ir)))}return te===1/0?!1:te}function J_(k,C,B,te){for(var pe=[],we=[],Me=te[8]*C,Ne=te[9]*C,rt=te[10]*C,vt=te[11]*C,yt=te[8]*B,Ut=te[9]*B,ir=te[10]*B,tr=te[11]*B,xr=0,Ur=k;xr<Ur.length;xr+=1){for(var hn=Ur[xr],an=[],Rn=[],Mn=0,Dn=hn;Mn<Dn.length;Mn+=1){var Vn=Dn[Mn],qn=Vn.x,da=Vn.y,va=te[0]*qn+te[4]*da+te[12],Wa=te[1]*qn+te[5]*da+te[13],Da=te[2]*qn+te[6]*da+te[14],Oa=te[3]*qn+te[7]*da+te[15],fi=va+Me,Ua=Wa+Ne,Ha=Da+rt,bi=Oa+vt,ci=va+yt,Vi=Wa+Ut,so=Da+ir,Hi=Oa+tr,Gi=new v(fi/bi,Ua/bi);Gi.z=Ha/bi,an.push(Gi);var Ni=new v(ci/Hi,Vi/Hi);Ni.z=so/Hi,Rn.push(Ni)}pe.push(an),we.push(Rn)}return[pe,we]}function $_(k,C,B,te){for(var pe=[],we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we],rt=[Ne.x,Ne.y,te,1];pp(rt,rt,C),pe.push(new v(rt[0]/rt[3],rt[1]/rt[3]))}return pe}var Q_=qo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),fy=Q_.members,q_=Ah.VectorTileFeature.types,hy=63,e2=Math.cos(75/2*(Math.PI/180)),t2=15,r2=20,n2=15,vy=1/2,py=Math.pow(2,n2-1)/vy,Gl=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vh,this.indexArray=new dc,this.programConfigurations=new pi(fy,C.layers,C.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};Gl.prototype.populate=function(C,B,te){this.hasPattern=Jd("line",this.layers,B);for(var pe=this.layers[0].layout.get("line-sort-key"),we=[],Me=0,Ne=C;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=rt.feature,yt=rt.id,Ut=rt.index,ir=rt.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,xr={type:vt.type,id:yt,properties:vt.properties,geometry:tr?to(vt):[]};if(!!this.layers[0]._featureFilter.filter(new mi(this.zoom),xr,te)){tr||(xr.geometry=to(vt));var Ur=pe?pe.evaluate(xr,{},te):void 0,hn={id:yt,properties:vt.properties,type:vt.type,sourceLayerIndex:ir,index:Ut,geometry:xr.geometry,patterns:{},sortKey:Ur};we.push(hn)}}pe&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var an=0,Rn=we;an<Rn.length;an+=1){var Mn=Rn[an],Dn=Mn,Vn=Dn.geometry,qn=Dn.index,da=Dn.sourceLayerIndex;if(this.hasPattern){var va=$d("line",this.layers,Mn,this.zoom,B);this.patternFeatures.push(va)}else this.addFeature(Mn,Vn,qn,te,{});var Wa=C[qn].feature;B.featureIndex.insert(Wa,Vn,qn,da,this.index)}},Gl.prototype.update=function(C,B,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,te)},Gl.prototype.addFeatures=function(C,B,te){for(var pe=0,we=this.patternFeatures;pe<we.length;pe+=1){var Me=we[pe];this.addFeature(Me,Me.geometry,Me.index,B,te)}},Gl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gl.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,fy),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Gl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Gl.prototype.addFeature=function(C,B,te,pe,we){for(var Me=this.layers[0].layout,Ne=Me.get("line-join").evaluate(C,{}),rt=Me.get("line-cap"),vt=Me.get("line-miter-limit"),yt=Me.get("line-round-limit"),Ut=0,ir=B;Ut<ir.length;Ut+=1){var tr=ir[Ut];this.addLine(tr,C,Ne,rt,vt,yt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,pe)},Gl.prototype.addLine=function(C,B,te,pe,we,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!B.properties&&B.properties.hasOwnProperty("mapbox_clip_start")&&B.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+B.properties.mapbox_clip_start,this.clipEnd=+B.properties.mapbox_clip_end;for(var Ne=0;Ne<C.length-1;Ne++)this.totalDistance+=C[Ne].dist(C[Ne+1]);this.updateScaledDistance()}for(var rt=q_[B.type]==="Polygon",vt=C.length;vt>=2&&C[vt-1].equals(C[vt-2]);)vt--;for(var yt=0;yt<vt-1&&C[yt].equals(C[yt+1]);)yt++;if(!(vt<(rt?3:2))){te==="bevel"&&(we=1.05);var Ut=this.overscaling<=16?t2*Ja/(512*this.overscaling):0,ir=this.segments.prepareSegment(vt*10,this.layoutVertexArray,this.indexArray),tr,xr=void 0,Ur=void 0,hn=void 0,an=void 0;this.e1=this.e2=-1,rt&&(tr=C[vt-2],an=C[yt].sub(tr)._unit()._perp());for(var Rn=yt;Rn<vt;Rn++)if(Ur=Rn===vt-1?rt?C[yt+1]:void 0:C[Rn+1],!(Ur&&C[Rn].equals(Ur))){an&&(hn=an),tr&&(xr=tr),tr=C[Rn],an=Ur?Ur.sub(tr)._unit()._perp():hn,hn=hn||an;var Mn=hn.add(an);(Mn.x!==0||Mn.y!==0)&&Mn._unit();var Dn=hn.x*an.x+hn.y*an.y,Vn=Mn.x*an.x+Mn.y*an.y,qn=Vn!==0?1/Vn:1/0,da=2*Math.sqrt(2-2*Vn),va=Vn<e2&&xr&&Ur,Wa=hn.x*an.y-hn.y*an.x>0;if(va&&Rn>yt){var Da=tr.dist(xr);if(Da>2*Ut){var Oa=tr.sub(tr.sub(xr)._mult(Ut/Da)._round());this.updateDistance(xr,Oa),this.addCurrentVertex(Oa,hn,0,0,ir),xr=Oa}}var fi=xr&&Ur,Ua=fi?te:rt?"butt":pe;if(fi&&Ua==="round"&&(qn<Me?Ua="miter":qn<=2&&(Ua="fakeround")),Ua==="miter"&&qn>we&&(Ua="bevel"),Ua==="bevel"&&(qn>2&&(Ua="flipbevel"),qn<we&&(Ua="miter")),xr&&this.updateDistance(xr,tr),Ua==="miter")Mn._mult(qn),this.addCurrentVertex(tr,Mn,0,0,ir);else if(Ua==="flipbevel"){if(qn>100)Mn=an.mult(-1);else{var Ha=qn*hn.add(an).mag()/hn.sub(an).mag();Mn._perp()._mult(Ha*(Wa?-1:1))}this.addCurrentVertex(tr,Mn,0,0,ir),this.addCurrentVertex(tr,Mn.mult(-1),0,0,ir)}else if(Ua==="bevel"||Ua==="fakeround"){var bi=-Math.sqrt(qn*qn-1),ci=Wa?bi:0,Vi=Wa?0:bi;if(xr&&this.addCurrentVertex(tr,hn,ci,Vi,ir),Ua==="fakeround")for(var so=Math.round(da*180/Math.PI/r2),Hi=1;Hi<so;Hi++){var Gi=Hi/so;if(Gi!==.5){var Ni=Gi-.5,mo=1.0904+Dn*(-3.2452+Dn*(3.55645-Dn*1.43519)),To=.848013+Dn*(-1.06021+Dn*.215638);Gi=Gi+Gi*Ni*(Gi-1)*(mo*Ni*Ni+To)}var Go=an.sub(hn)._mult(Gi)._add(hn)._unit()._mult(Wa?-1:1);this.addHalfVertex(tr,Go.x,Go.y,!1,Wa,0,ir)}Ur&&this.addCurrentVertex(tr,an,-ci,-Vi,ir)}else if(Ua==="butt")this.addCurrentVertex(tr,Mn,0,0,ir);else if(Ua==="square"){var Zo=xr?1:-1;this.addCurrentVertex(tr,Mn,Zo,Zo,ir)}else Ua==="round"&&(xr&&(this.addCurrentVertex(tr,hn,0,0,ir),this.addCurrentVertex(tr,hn,1,1,ir,!0)),Ur&&(this.addCurrentVertex(tr,an,-1,-1,ir,!0),this.addCurrentVertex(tr,an,0,0,ir)));if(va&&Rn<vt-1){var ks=tr.dist(Ur);if(ks>2*Ut){var ls=tr.add(Ur.sub(tr)._mult(Ut/ks)._round());this.updateDistance(tr,ls),this.addCurrentVertex(ls,an,0,0,ir),tr=ls}}}}},Gl.prototype.addCurrentVertex=function(C,B,te,pe,we,Me){Me===void 0&&(Me=!1);var Ne=B.x+B.y*te,rt=B.y-B.x*te,vt=-B.x+B.y*pe,yt=-B.y-B.x*pe;this.addHalfVertex(C,Ne,rt,Me,!1,te,we),this.addHalfVertex(C,vt,yt,Me,!0,-pe,we),this.distance>py/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,B,te,pe,we,Me))},Gl.prototype.addHalfVertex=function(C,B,te,pe,we,Me,Ne){var rt=C.x,vt=C.y,yt=this.scaledDistance*vy;this.layoutVertexArray.emplaceBack((rt<<1)+(pe?1:0),(vt<<1)+(we?1:0),Math.round(hy*B)+128,Math.round(hy*te)+128,(Me===0?0:Me<0?-1:1)+1|(yt&63)<<2,yt>>6);var Ut=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ut),Ne.primitiveLength++),we?this.e2=Ut:this.e1=Ut},Gl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(py-1):this.distance},Gl.prototype.updateDistance=function(C,B){this.distance+=C.dist(B),this.updateScaledDistance()},Be("LineBucket",Gl,{omit:["layers","patternFeatures"]});var a2=new co({"line-cap":new Za(Yt.layout_line["line-cap"]),"line-join":new oi(Yt.layout_line["line-join"]),"line-miter-limit":new Za(Yt.layout_line["line-miter-limit"]),"line-round-limit":new Za(Yt.layout_line["line-round-limit"]),"line-sort-key":new oi(Yt.layout_line["line-sort-key"])}),i2=new co({"line-opacity":new oi(Yt.paint_line["line-opacity"]),"line-color":new oi(Yt.paint_line["line-color"]),"line-translate":new Za(Yt.paint_line["line-translate"]),"line-translate-anchor":new Za(Yt.paint_line["line-translate-anchor"]),"line-width":new oi(Yt.paint_line["line-width"]),"line-gap-width":new oi(Yt.paint_line["line-gap-width"]),"line-offset":new oi(Yt.paint_line["line-offset"]),"line-blur":new oi(Yt.paint_line["line-blur"]),"line-dasharray":new _o(Yt.paint_line["line-dasharray"]),"line-pattern":new Bo(Yt.paint_line["line-pattern"]),"line-gradient":new Qo(Yt.paint_line["line-gradient"])}),dy={paint:i2,layout:a2},o2=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,pe){return pe=new mi(Math.floor(pe.zoom),{now:pe.now,fadeDuration:pe.fadeDuration,zoomHistory:pe.zoomHistory,transition:pe.transition}),k.prototype.possiblyEvaluate.call(this,te,pe)},C.prototype.evaluate=function(te,pe,we,Me){return pe=M({},pe,{zoom:Math.floor(pe.zoom)}),k.prototype.evaluate.call(this,te,pe,we,Me)},C}(oi),gy=new o2(dy.paint.properties["line-width"].specification);gy.useIntegerZoom=!0;var s2=function(k){function C(B){k.call(this,B,dy)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var te=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=qg(te,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function(te,pe){k.prototype.recalculate.call(this,te,pe),this.paint._values["line-floorwidth"]=gy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,te)},C.prototype.createBucket=function(te){return new Gl(te)},C.prototype.queryRadius=function(te){var pe=te,we=yy(eu("line-width",this,pe),eu("line-gap-width",this,pe)),Me=eu("line-offset",this,pe);return we/2+Math.abs(Me)+rc(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,we,Me,Ne,rt,vt){var yt=Uu(te,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),rt.angle,vt),Ut=vt/2*yy(this.paint.get("line-width").evaluate(pe,we),this.paint.get("line-gap-width").evaluate(pe,we)),ir=this.paint.get("line-offset").evaluate(pe,we);return ir&&(Me=l2(Me,ir*vt)),as(yt,Me,Ut)},C.prototype.isTileClipped=function(){return!0},C}(Zs);function yy(k,C){return C>0?C+2*k:k}function l2(k,C){for(var B=[],te=new v(0,0),pe=0;pe<k.length;pe++){for(var we=k[pe],Me=[],Ne=0;Ne<we.length;Ne++){var rt=we[Ne-1],vt=we[Ne],yt=we[Ne+1],Ut=Ne===0?te:vt.sub(rt)._unit()._perp(),ir=Ne===we.length-1?te:yt.sub(vt)._unit()._perp(),tr=Ut._add(ir)._unit(),xr=tr.x*ir.x+tr.y*ir.y;tr._mult(1/xr),Me.push(tr._mult(C)._add(vt))}B.push(Me)}return B}var qd=qo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),u2=qo([{name:"a_projected_pos",components:3,type:"Float32"}],4);qo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var c2=qo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);qo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var my=qo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),f2=qo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);qo([{name:"triangle",components:3,type:"Uint16"}]),qo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),qo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),qo([{type:"Float32",name:"offsetX"}]),qo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function h2(k,C,B){var te=C.layout.get("text-transform").evaluate(B,{});return te==="uppercase"?k=k.toLocaleUpperCase():te==="lowercase"&&(k=k.toLocaleLowerCase()),ii.applyArabicShaping&&(k=ii.applyArabicShaping(k)),k}function v2(k,C,B){return k.sections.forEach(function(te){te.text=h2(te.text,C,B)}),k}function p2(k){var C={},B={},te=[],pe=0;function we(an){te.push(k[an]),pe++}function Me(an,Rn,Mn){var Dn=B[an];return delete B[an],B[Rn]=Dn,te[Dn].geometry[0].pop(),te[Dn].geometry[0]=te[Dn].geometry[0].concat(Mn[0]),Dn}function Ne(an,Rn,Mn){var Dn=C[Rn];return delete C[Rn],C[an]=Dn,te[Dn].geometry[0].shift(),te[Dn].geometry[0]=Mn[0].concat(te[Dn].geometry[0]),Dn}function rt(an,Rn,Mn){var Dn=Mn?Rn[0][Rn[0].length-1]:Rn[0][0];return an+":"+Dn.x+":"+Dn.y}for(var vt=0;vt<k.length;vt++){var yt=k[vt],Ut=yt.geometry,ir=yt.text?yt.text.toString():null;if(!ir){we(vt);continue}var tr=rt(ir,Ut),xr=rt(ir,Ut,!0);if(tr in B&&xr in C&&B[tr]!==C[xr]){var Ur=Ne(tr,xr,Ut),hn=Me(tr,xr,te[Ur].geometry);delete C[tr],delete B[xr],B[rt(ir,te[hn].geometry,!0)]=hn,te[Ur].geometry=null}else tr in B?Me(tr,xr,Ut):xr in C?Ne(tr,xr,Ut):(we(vt),C[tr]=pe-1,B[xr]=pe-1)}return te.filter(function(an){return an.geometry})}var Cv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function d2(k){for(var C="",B=0;B<k.length;B++){var te=k.charCodeAt(B+1)||null,pe=k.charCodeAt(B-1)||null,we=(!te||!fn(te)||Cv[k[B+1]])&&(!pe||!fn(pe)||Cv[k[B-1]]);we&&Cv[k[B]]?C+=Cv[k[B]]:C+=k[B]}return C}var Vs=24,g2=function(k,C,B,te,pe){var we,Me,Ne=pe*8-te-1,rt=(1<<Ne)-1,vt=rt>>1,yt=-7,Ut=B?pe-1:0,ir=B?-1:1,tr=k[C+Ut];for(Ut+=ir,we=tr&(1<<-yt)-1,tr>>=-yt,yt+=Ne;yt>0;we=we*256+k[C+Ut],Ut+=ir,yt-=8);for(Me=we&(1<<-yt)-1,we>>=-yt,yt+=te;yt>0;Me=Me*256+k[C+Ut],Ut+=ir,yt-=8);if(we===0)we=1-vt;else{if(we===rt)return Me?NaN:(tr?-1:1)*(1/0);Me=Me+Math.pow(2,te),we=we-vt}return(tr?-1:1)*Me*Math.pow(2,we-te)},y2=function(k,C,B,te,pe,we){var Me,Ne,rt,vt=we*8-pe-1,yt=(1<<vt)-1,Ut=yt>>1,ir=pe===23?Math.pow(2,-24)-Math.pow(2,-77):0,tr=te?0:we-1,xr=te?1:-1,Ur=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Ne=isNaN(C)?1:0,Me=yt):(Me=Math.floor(Math.log(C)/Math.LN2),C*(rt=Math.pow(2,-Me))<1&&(Me--,rt*=2),Me+Ut>=1?C+=ir/rt:C+=ir*Math.pow(2,1-Ut),C*rt>=2&&(Me++,rt/=2),Me+Ut>=yt?(Ne=0,Me=yt):Me+Ut>=1?(Ne=(C*rt-1)*Math.pow(2,pe),Me=Me+Ut):(Ne=C*Math.pow(2,Ut-1)*Math.pow(2,pe),Me=0));pe>=8;k[B+tr]=Ne&255,tr+=xr,Ne/=256,pe-=8);for(Me=Me<<pe|Ne,vt+=pe;vt>0;k[B+tr]=Me&255,tr+=xr,Me/=256,vt-=8);k[B+tr-xr]|=Ur*128},xp={read:g2,write:y2},bp=wo;function wo(k){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(k)?k:new Uint8Array(k||0),this.pos=0,this.type=0,this.length=this.buf.length}wo.Varint=0,wo.Fixed64=1,wo.Bytes=2,wo.Fixed32=5;var e0=(1<<16)*(1<<16),xy=1/e0,m2=12,by=typeof TextDecoder>"u"?null:new TextDecoder("utf8");wo.prototype={destroy:function(){this.buf=null},readFields:function(k,C,B){for(B=B||this.length;this.pos<B;){var te=this.readVarint(),pe=te>>3,we=this.pos;this.type=te&7,k(pe,C,this),this.pos===we&&this.skip(te)}return C},readMessage:function(k,C){return this.readFields(k,C,this.readVarint()+this.pos)},readFixed32:function(){var k=_p(this.buf,this.pos);return this.pos+=4,k},readSFixed32:function(){var k=wy(this.buf,this.pos);return this.pos+=4,k},readFixed64:function(){var k=_p(this.buf,this.pos)+_p(this.buf,this.pos+4)*e0;return this.pos+=8,k},readSFixed64:function(){var k=_p(this.buf,this.pos)+wy(this.buf,this.pos+4)*e0;return this.pos+=8,k},readFloat:function(){var k=xp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,k},readDouble:function(){var k=xp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,k},readVarint:function(k){var C=this.buf,B,te;return te=C[this.pos++],B=te&127,te<128||(te=C[this.pos++],B|=(te&127)<<7,te<128)||(te=C[this.pos++],B|=(te&127)<<14,te<128)||(te=C[this.pos++],B|=(te&127)<<21,te<128)?B:(te=C[this.pos],B|=(te&15)<<28,x2(B,k,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var k=this.readVarint();return k%2===1?(k+1)/-2:k/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var k=this.readVarint()+this.pos,C=this.pos;return this.pos=k,k-C>=m2&&by?R2(this.buf,C,k):D2(this.buf,C,k)},readBytes:function(){var k=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,k);return this.pos=k,C},readPackedVarint:function(k,C){if(this.type!==wo.Bytes)return k.push(this.readVarint(C));var B=Wc(this);for(k=k||[];this.pos<B;)k.push(this.readVarint(C));return k},readPackedSVarint:function(k){if(this.type!==wo.Bytes)return k.push(this.readSVarint());var C=Wc(this);for(k=k||[];this.pos<C;)k.push(this.readSVarint());return k},readPackedBoolean:function(k){if(this.type!==wo.Bytes)return k.push(this.readBoolean());var C=Wc(this);for(k=k||[];this.pos<C;)k.push(this.readBoolean());return k},readPackedFloat:function(k){if(this.type!==wo.Bytes)return k.push(this.readFloat());var C=Wc(this);for(k=k||[];this.pos<C;)k.push(this.readFloat());return k},readPackedDouble:function(k){if(this.type!==wo.Bytes)return k.push(this.readDouble());var C=Wc(this);for(k=k||[];this.pos<C;)k.push(this.readDouble());return k},readPackedFixed32:function(k){if(this.type!==wo.Bytes)return k.push(this.readFixed32());var C=Wc(this);for(k=k||[];this.pos<C;)k.push(this.readFixed32());return k},readPackedSFixed32:function(k){if(this.type!==wo.Bytes)return k.push(this.readSFixed32());var C=Wc(this);for(k=k||[];this.pos<C;)k.push(this.readSFixed32());return k},readPackedFixed64:function(k){if(this.type!==wo.Bytes)return k.push(this.readFixed64());var C=Wc(this);for(k=k||[];this.pos<C;)k.push(this.readFixed64());return k},readPackedSFixed64:function(k){if(this.type!==wo.Bytes)return k.push(this.readSFixed64());var C=Wc(this);for(k=k||[];this.pos<C;)k.push(this.readSFixed64());return k},skip:function(k){var C=k&7;if(C===wo.Varint)for(;this.buf[this.pos++]>127;);else if(C===wo.Bytes)this.pos=this.readVarint()+this.pos;else if(C===wo.Fixed32)this.pos+=4;else if(C===wo.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(k,C){this.writeVarint(k<<3|C)},realloc:function(k){for(var C=this.length||16;C<this.pos+k;)C*=2;if(C!==this.length){var B=new Uint8Array(C);B.set(this.buf),this.buf=B,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(k){this.realloc(4),Eh(this.buf,k,this.pos),this.pos+=4},writeSFixed32:function(k){this.realloc(4),Eh(this.buf,k,this.pos),this.pos+=4},writeFixed64:function(k){this.realloc(8),Eh(this.buf,k&-1,this.pos),Eh(this.buf,Math.floor(k*xy),this.pos+4),this.pos+=8},writeSFixed64:function(k){this.realloc(8),Eh(this.buf,k&-1,this.pos),Eh(this.buf,Math.floor(k*xy),this.pos+4),this.pos+=8},writeVarint:function(k){if(k=+k||0,k>268435455||k<0){b2(k,this);return}this.realloc(4),this.buf[this.pos++]=k&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=(k>>>=7)&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=(k>>>=7)&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=k>>>7&127)))},writeSVarint:function(k){this.writeVarint(k<0?-k*2-1:k*2)},writeBoolean:function(k){this.writeVarint(Boolean(k))},writeString:function(k){k=String(k),this.realloc(k.length*4),this.pos++;var C=this.pos;this.pos=I2(this.buf,k,this.pos);var B=this.pos-C;B>=128&&_y(C,B,this),this.pos=C-1,this.writeVarint(B),this.pos+=B},writeFloat:function(k){this.realloc(4),xp.write(this.buf,k,this.pos,!0,23,4),this.pos+=4},writeDouble:function(k){this.realloc(8),xp.write(this.buf,k,this.pos,!0,52,8),this.pos+=8},writeBytes:function(k){var C=k.length;this.writeVarint(C),this.realloc(C);for(var B=0;B<C;B++)this.buf[this.pos++]=k[B]},writeRawMessage:function(k,C){this.pos++;var B=this.pos;k(C,this);var te=this.pos-B;te>=128&&_y(B,te,this),this.pos=B-1,this.writeVarint(te),this.pos+=te},writeMessage:function(k,C,B){this.writeTag(k,wo.Bytes),this.writeRawMessage(C,B)},writePackedVarint:function(k,C){C.length&&this.writeMessage(k,T2,C)},writePackedSVarint:function(k,C){C.length&&this.writeMessage(k,A2,C)},writePackedBoolean:function(k,C){C.length&&this.writeMessage(k,S2,C)},writePackedFloat:function(k,C){C.length&&this.writeMessage(k,M2,C)},writePackedDouble:function(k,C){C.length&&this.writeMessage(k,E2,C)},writePackedFixed32:function(k,C){C.length&&this.writeMessage(k,k2,C)},writePackedSFixed32:function(k,C){C.length&&this.writeMessage(k,C2,C)},writePackedFixed64:function(k,C){C.length&&this.writeMessage(k,L2,C)},writePackedSFixed64:function(k,C){C.length&&this.writeMessage(k,P2,C)},writeBytesField:function(k,C){this.writeTag(k,wo.Bytes),this.writeBytes(C)},writeFixed32Field:function(k,C){this.writeTag(k,wo.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(k,C){this.writeTag(k,wo.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(k,C){this.writeTag(k,wo.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(k,C){this.writeTag(k,wo.Fixed64),this.writeSFixed64(C)},writeVarintField:function(k,C){this.writeTag(k,wo.Varint),this.writeVarint(C)},writeSVarintField:function(k,C){this.writeTag(k,wo.Varint),this.writeSVarint(C)},writeStringField:function(k,C){this.writeTag(k,wo.Bytes),this.writeString(C)},writeFloatField:function(k,C){this.writeTag(k,wo.Fixed32),this.writeFloat(C)},writeDoubleField:function(k,C){this.writeTag(k,wo.Fixed64),this.writeDouble(C)},writeBooleanField:function(k,C){this.writeVarintField(k,Boolean(C))}};function x2(k,C,B){var te=B.buf,pe,we;if(we=te[B.pos++],pe=(we&112)>>4,we<128||(we=te[B.pos++],pe|=(we&127)<<3,we<128)||(we=te[B.pos++],pe|=(we&127)<<10,we<128)||(we=te[B.pos++],pe|=(we&127)<<17,we<128)||(we=te[B.pos++],pe|=(we&127)<<24,we<128)||(we=te[B.pos++],pe|=(we&1)<<31,we<128))return Mh(k,pe,C);throw new Error("Expected varint not more than 10 bytes")}function Wc(k){return k.type===wo.Bytes?k.readVarint()+k.pos:k.pos+1}function Mh(k,C,B){return B?C*4294967296+(k>>>0):(C>>>0)*4294967296+(k>>>0)}function b2(k,C){var B,te;if(k>=0?(B=k%4294967296|0,te=k/4294967296|0):(B=~(-k%4294967296),te=~(-k/4294967296),B^4294967295?B=B+1|0:(B=0,te=te+1|0)),k>=18446744073709552e3||k<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),_2(B,te,C),w2(te,C)}function _2(k,C,B){B.buf[B.pos++]=k&127|128,k>>>=7,B.buf[B.pos++]=k&127|128,k>>>=7,B.buf[B.pos++]=k&127|128,k>>>=7,B.buf[B.pos++]=k&127|128,k>>>=7,B.buf[B.pos]=k&127}function w2(k,C){var B=(k&7)<<4;C.buf[C.pos++]|=B|((k>>>=3)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127)))))}function _y(k,C,B){var te=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));B.realloc(te);for(var pe=B.pos-1;pe>=k;pe--)B.buf[pe+te]=B.buf[pe]}function T2(k,C){for(var B=0;B<k.length;B++)C.writeVarint(k[B])}function A2(k,C){for(var B=0;B<k.length;B++)C.writeSVarint(k[B])}function M2(k,C){for(var B=0;B<k.length;B++)C.writeFloat(k[B])}function E2(k,C){for(var B=0;B<k.length;B++)C.writeDouble(k[B])}function S2(k,C){for(var B=0;B<k.length;B++)C.writeBoolean(k[B])}function k2(k,C){for(var B=0;B<k.length;B++)C.writeFixed32(k[B])}function C2(k,C){for(var B=0;B<k.length;B++)C.writeSFixed32(k[B])}function L2(k,C){for(var B=0;B<k.length;B++)C.writeFixed64(k[B])}function P2(k,C){for(var B=0;B<k.length;B++)C.writeSFixed64(k[B])}function _p(k,C){return(k[C]|k[C+1]<<8|k[C+2]<<16)+k[C+3]*16777216}function Eh(k,C,B){k[B]=C,k[B+1]=C>>>8,k[B+2]=C>>>16,k[B+3]=C>>>24}function wy(k,C){return(k[C]|k[C+1]<<8|k[C+2]<<16)+(k[C+3]<<24)}function D2(k,C,B){for(var te="",pe=C;pe<B;){var we=k[pe],Me=null,Ne=we>239?4:we>223?3:we>191?2:1;if(pe+Ne>B)break;var rt,vt,yt;Ne===1?we<128&&(Me=we):Ne===2?(rt=k[pe+1],(rt&192)===128&&(Me=(we&31)<<6|rt&63,Me<=127&&(Me=null))):Ne===3?(rt=k[pe+1],vt=k[pe+2],(rt&192)===128&&(vt&192)===128&&(Me=(we&15)<<12|(rt&63)<<6|vt&63,(Me<=2047||Me>=55296&&Me<=57343)&&(Me=null))):Ne===4&&(rt=k[pe+1],vt=k[pe+2],yt=k[pe+3],(rt&192)===128&&(vt&192)===128&&(yt&192)===128&&(Me=(we&15)<<18|(rt&63)<<12|(vt&63)<<6|yt&63,(Me<=65535||Me>=1114112)&&(Me=null))),Me===null?(Me=65533,Ne=1):Me>65535&&(Me-=65536,te+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|Me&1023),te+=String.fromCharCode(Me),pe+=Ne}return te}function R2(k,C,B){return by.decode(k.subarray(C,B))}function I2(k,C,B){for(var te=0,pe,we;te<C.length;te++){if(pe=C.charCodeAt(te),pe>55295&&pe<57344)if(we)if(pe<56320){k[B++]=239,k[B++]=191,k[B++]=189,we=pe;continue}else pe=we-55296<<10|pe-56320|65536,we=null;else{pe>56319||te+1===C.length?(k[B++]=239,k[B++]=191,k[B++]=189):we=pe;continue}else we&&(k[B++]=239,k[B++]=191,k[B++]=189,we=null);pe<128?k[B++]=pe:(pe<2048?k[B++]=pe>>6|192:(pe<65536?k[B++]=pe>>12|224:(k[B++]=pe>>18|240,k[B++]=pe>>12&63|128),k[B++]=pe>>6&63|128),k[B++]=pe&63|128)}return B}var t0=3;function F2(k,C,B){k===1&&B.readMessage(z2,C)}function z2(k,C,B){if(k===3){var te=B.readMessage(O2,{}),pe=te.id,we=te.bitmap,Me=te.width,Ne=te.height,rt=te.left,vt=te.top,yt=te.advance;C.push({id:pe,bitmap:new Gf({width:Me+2*t0,height:Ne+2*t0},we),metrics:{width:Me,height:Ne,left:rt,top:vt,advance:yt}})}}function O2(k,C,B){k===1?C.id=B.readVarint():k===2?C.bitmap=B.readBytes():k===3?C.width=B.readVarint():k===4?C.height=B.readVarint():k===5?C.left=B.readSVarint():k===6?C.top=B.readSVarint():k===7&&(C.advance=B.readVarint())}function N2(k){return new bp(k).readFields(F2,[])}var Ty=t0;function Ay(k){for(var C=0,B=0,te=0,pe=k;te<pe.length;te+=1){var we=pe[te];C+=we.w*we.h,B=Math.max(B,we.w)}k.sort(function(hn,an){return an.h-hn.h});for(var Me=Math.max(Math.ceil(Math.sqrt(C/.95)),B),Ne=[{x:0,y:0,w:Me,h:1/0}],rt=0,vt=0,yt=0,Ut=k;yt<Ut.length;yt+=1)for(var ir=Ut[yt],tr=Ne.length-1;tr>=0;tr--){var xr=Ne[tr];if(!(ir.w>xr.w||ir.h>xr.h)){if(ir.x=xr.x,ir.y=xr.y,vt=Math.max(vt,ir.y+ir.h),rt=Math.max(rt,ir.x+ir.w),ir.w===xr.w&&ir.h===xr.h){var Ur=Ne.pop();tr<Ne.length&&(Ne[tr]=Ur)}else ir.h===xr.h?(xr.x+=ir.w,xr.w-=ir.w):ir.w===xr.w?(xr.y+=ir.h,xr.h-=ir.h):(Ne.push({x:xr.x+ir.w,y:xr.y,w:xr.w-ir.w,h:ir.h}),xr.y+=ir.h,xr.h-=ir.h);break}}return{w:rt,h:vt,fill:C/(rt*vt)||0}}var tu=1,wp=function(C,B){var te=B.pixelRatio,pe=B.version,we=B.stretchX,Me=B.stretchY,Ne=B.content;this.paddedRect=C,this.pixelRatio=te,this.stretchX=we,this.stretchY=Me,this.content=Ne,this.version=pe},Lv={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Lv.tl.get=function(){return[this.paddedRect.x+tu,this.paddedRect.y+tu]},Lv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-tu,this.paddedRect.y+this.paddedRect.h-tu]},Lv.tlbr.get=function(){return this.tl.concat(this.br)},Lv.displaySize.get=function(){return[(this.paddedRect.w-tu*2)/this.pixelRatio,(this.paddedRect.h-tu*2)/this.pixelRatio]},Object.defineProperties(wp.prototype,Lv);var Pv=function(C,B){var te={},pe={};this.haveRenderCallbacks=[];var we=[];this.addImages(C,te,we),this.addImages(B,pe,we);var Me=Ay(we),Ne=Me.w,rt=Me.h,vt=new Hl({width:Ne||1,height:rt||1});for(var yt in C){var Ut=C[yt],ir=te[yt].paddedRect;Hl.copy(Ut.data,vt,{x:0,y:0},{x:ir.x+tu,y:ir.y+tu},Ut.data)}for(var tr in B){var xr=B[tr],Ur=pe[tr].paddedRect,hn=Ur.x+tu,an=Ur.y+tu,Rn=xr.data.width,Mn=xr.data.height;Hl.copy(xr.data,vt,{x:0,y:0},{x:hn,y:an},xr.data),Hl.copy(xr.data,vt,{x:0,y:Mn-1},{x:hn,y:an-1},{width:Rn,height:1}),Hl.copy(xr.data,vt,{x:0,y:0},{x:hn,y:an+Mn},{width:Rn,height:1}),Hl.copy(xr.data,vt,{x:Rn-1,y:0},{x:hn-1,y:an},{width:1,height:Mn}),Hl.copy(xr.data,vt,{x:0,y:0},{x:hn+Rn,y:an},{width:1,height:Mn})}this.image=vt,this.iconPositions=te,this.patternPositions=pe};Pv.prototype.addImages=function(C,B,te){for(var pe in C){var we=C[pe],Me={x:0,y:0,w:we.data.width+2*tu,h:we.data.height+2*tu};te.push(Me),B[pe]=new wp(Me,we),we.hasRenderCallback&&this.haveRenderCallbacks.push(pe)}},Pv.prototype.patchUpdatedImages=function(C,B){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var te in C.updatedImages)this.patchUpdatedImage(this.iconPositions[te],C.getImage(te),B),this.patchUpdatedImage(this.patternPositions[te],C.getImage(te),B)},Pv.prototype.patchUpdatedImage=function(C,B,te){if(!(!C||!B)&&C.version!==B.version){C.version=B.version;var pe=C.tl,we=pe[0],Me=pe[1];te.update(B.data,void 0,{x:we,y:Me})}},Be("ImagePosition",wp),Be("ImageAtlas",Pv);var _u={horizontal:1,vertical:2,horizontalOnly:3},Dv=-17;function B2(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(te.positionedGlyphs.length!==0)return!1}return!0}var My=57344,Ey=63743,Sh=function(){this.scale=1,this.fontStack="",this.imageName=null};Sh.forText=function(C,B){var te=new Sh;return te.scale=C||1,te.fontStack=B,te},Sh.forImage=function(C){var B=new Sh;return B.imageName=C,B};var ll=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};ll.fromFeature=function(C,B){for(var te=new ll,pe=0;pe<C.sections.length;pe++){var we=C.sections[pe];we.image?te.addImageSection(we):te.addTextSection(we,B)}return te},ll.prototype.length=function(){return this.text.length},ll.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},ll.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},ll.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},ll.prototype.verticalizePunctuation=function(){this.text=d2(this.text)},ll.prototype.trim=function(){for(var C=0,B=0;B<this.text.length&&Fc[this.text.charCodeAt(B)];B++)C++;for(var te=this.text.length,pe=this.text.length-1;pe>=0&&pe>=C&&Fc[this.text.charCodeAt(pe)];pe--)te--;this.text=this.text.substring(C,te),this.sectionIndex=this.sectionIndex.slice(C,te)},ll.prototype.substring=function(C,B){var te=new ll;return te.text=this.text.substring(C,B),te.sectionIndex=this.sectionIndex.slice(C,B),te.sections=this.sections,te},ll.prototype.toString=function(){return this.text},ll.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(B,te){return Math.max(B,C.sections[te].scale)},0)},ll.prototype.addTextSection=function(C,B){this.text+=C.text,this.sections.push(Sh.forText(C.scale,C.fontStack||B));for(var te=this.sections.length-1,pe=0;pe<C.text.length;++pe)this.sectionIndex.push(te)},ll.prototype.addImageSection=function(C){var B=C.image?C.image.name:"";if(B.length===0){O("Can't add FormattedSection with an empty image.");return}var te=this.getNextImageSectionCharCode();if(!te){O("Reached maximum number of images "+(Ey-My+2));return}this.text+=String.fromCharCode(te),this.sections.push(Sh.forImage(B)),this.sectionIndex.push(this.sections.length-1)},ll.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=Ey?null:++this.imageSectionID:(this.imageSectionID=My,this.imageSectionID)};function U2(k,C){for(var B=[],te=k.text,pe=0,we=0,Me=C;we<Me.length;we+=1){var Ne=Me[we];B.push(k.substring(pe,Ne)),pe=Ne}return pe<te.length&&B.push(k.substring(pe,te.length)),B}function Tp(k,C,B,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur){var hn=ll.fromFeature(k,pe);Ut===_u.vertical&&hn.verticalizePunctuation();var an,Rn=ii.processBidirectionalText,Mn=ii.processStyledBidirectionalText;if(Rn&&hn.sections.length===1){an=[];for(var Dn=Rn(hn.toString(),r0(hn,vt,we,C,te,tr,xr)),Vn=0,qn=Dn;Vn<qn.length;Vn+=1){var da=qn[Vn],va=new ll;va.text=da,va.sections=hn.sections;for(var Wa=0;Wa<da.length;Wa++)va.sectionIndex.push(0);an.push(va)}}else if(Mn){an=[];for(var Da=Mn(hn.text,hn.sectionIndex,r0(hn,vt,we,C,te,tr,xr)),Oa=0,fi=Da;Oa<fi.length;Oa+=1){var Ua=fi[Oa],Ha=new ll;Ha.text=Ua[0],Ha.sectionIndex=Ua[1],Ha.sections=hn.sections,an.push(Ha)}}else an=U2(hn,r0(hn,vt,we,C,te,tr,xr));var bi=[],ci={positionedLines:bi,text:hn.toString(),top:yt[1],bottom:yt[1],left:yt[0],right:yt[0],writingMode:Ut,iconsInText:!1,verticalizable:!1};return G2(ci,C,B,te,an,Me,Ne,rt,Ut,vt,ir,Ur),B2(bi)?!1:ci}var Fc={};Fc[9]=!0,Fc[10]=!0,Fc[11]=!0,Fc[12]=!0,Fc[13]=!0,Fc[32]=!0;var ru={};ru[10]=!0,ru[32]=!0,ru[38]=!0,ru[40]=!0,ru[41]=!0,ru[43]=!0,ru[45]=!0,ru[47]=!0,ru[173]=!0,ru[183]=!0,ru[8203]=!0,ru[8208]=!0,ru[8211]=!0,ru[8231]=!0;function Sy(k,C,B,te,pe,we){if(C.imageName){var rt=te[C.imageName];return rt?rt.displaySize[0]*C.scale*Vs/we+pe:0}else{var Me=B[C.fontStack],Ne=Me&&Me[k];return Ne?Ne.metrics.advance*C.scale+pe:0}}function V2(k,C,B,te,pe,we){for(var Me=0,Ne=0;Ne<k.length();Ne++){var rt=k.getSection(Ne);Me+=Sy(k.getCharCode(Ne),rt,te,pe,C,we)}var vt=Math.max(1,Math.ceil(Me/B));return Me/vt}function ky(k,C,B,te){var pe=Math.pow(k-C,2);return te?k<C?pe/2:pe*2:pe+Math.abs(B)*B}function H2(k,C,B){var te=0;return k===10&&(te-=1e4),B&&(te+=150),(k===40||k===65288)&&(te+=50),(C===41||C===65289)&&(te+=50),te}function Cy(k,C,B,te,pe,we){for(var Me=null,Ne=ky(C,B,pe,we),rt=0,vt=te;rt<vt.length;rt+=1){var yt=vt[rt],Ut=C-yt.x,ir=ky(Ut,B,pe,we)+yt.badness;ir<=Ne&&(Me=yt,Ne=ir)}return{index:k,x:C,priorBreak:Me,badness:Ne}}function Ly(k){return k?Ly(k.priorBreak).concat(k.index):[]}function r0(k,C,B,te,pe,we,Me){if(we!=="point")return[];if(!k)return[];for(var Ne=[],rt=V2(k,C,B,te,pe,Me),vt=k.text.indexOf("\u200B")>=0,yt=0,Ut=0;Ut<k.length();Ut++){var ir=k.getSection(Ut),tr=k.getCharCode(Ut);if(Fc[tr]||(yt+=Sy(tr,ir,te,pe,C,Me)),Ut<k.length()-1){var xr=Ir(tr);(ru[tr]||xr||ir.imageName)&&Ne.push(Cy(Ut+1,yt,rt,Ne,H2(tr,k.getCharCode(Ut+1),xr&&vt),!1))}}return Ly(Cy(k.length(),yt,rt,Ne,0,!0))}function n0(k){var C=.5,B=.5;switch(k){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(k){case"bottom":case"bottom-right":case"bottom-left":B=1;break;case"top":case"top-right":case"top-left":B=0;break}return{horizontalAlign:C,verticalAlign:B}}function G2(k,C,B,te,pe,we,Me,Ne,rt,vt,yt,Ut){for(var ir=0,tr=Dv,xr=0,Ur=0,hn=Ne==="right"?1:Ne==="left"?0:.5,an=0,Rn=0,Mn=pe;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];Dn.trim();var Vn=Dn.getMaxScale(),qn=(Vn-1)*Vs,da={positionedGlyphs:[],lineOffset:0};k.positionedLines[an]=da;var va=da.positionedGlyphs,Wa=0;if(!Dn.length()){tr+=we,++an;continue}for(var Da=0;Da<Dn.length();Da++){var Oa=Dn.getSection(Da),fi=Dn.getSectionIndex(Da),Ua=Dn.getCharCode(Da),Ha=0,bi=null,ci=null,Vi=null,so=Vs,Hi=!(rt===_u.horizontal||!yt&&!Wr(Ua)||yt&&(Fc[Ua]||vn(Ua)));if(Oa.imageName){var Go=te[Oa.imageName];if(!Go)continue;Vi=Oa.imageName,k.iconsInText=k.iconsInText||!0,ci=Go.paddedRect;var Zo=Go.displaySize;Oa.scale=Oa.scale*Vs/Ut,bi={width:Zo[0],height:Zo[1],left:tu,top:-Ty,advance:Hi?Zo[1]:Zo[0]};var ks=Vs-Zo[1]*Oa.scale;Ha=qn+ks,so=bi.advance;var ls=Hi?Zo[0]*Oa.scale-Vs*Vn:Zo[1]*Oa.scale-Vs*Vn;ls>0&&ls>Wa&&(Wa=ls)}else{var Gi=B[Oa.fontStack],Ni=Gi&&Gi[Ua];if(Ni&&Ni.rect)ci=Ni.rect,bi=Ni.metrics;else{var mo=C[Oa.fontStack],To=mo&&mo[Ua];if(!To)continue;bi=To.metrics}Ha=(Vn-Oa.scale)*Vs}Hi?(k.verticalizable=!0,va.push({glyph:Ua,imageName:Vi,x:ir,y:tr+Ha,vertical:Hi,scale:Oa.scale,fontStack:Oa.fontStack,sectionIndex:fi,metrics:bi,rect:ci}),ir+=so*Oa.scale+vt):(va.push({glyph:Ua,imageName:Vi,x:ir,y:tr+Ha,vertical:Hi,scale:Oa.scale,fontStack:Oa.fontStack,sectionIndex:fi,metrics:bi,rect:ci}),ir+=bi.advance*Oa.scale+vt)}if(va.length!==0){var ul=ir-vt;xr=Math.max(ul,xr),Y2(va,0,va.length-1,hn,Wa)}ir=0;var cl=we*Vn+Wa;da.lineOffset=Math.max(Wa,qn),tr+=cl,Ur=Math.max(cl,Ur),++an}var Cs=tr-Dv,Al=n0(Me),Ml=Al.horizontalAlign,bs=Al.verticalAlign;W2(k.positionedLines,hn,Ml,bs,xr,Ur,we,Cs,pe.length),k.top+=-bs*Cs,k.bottom=k.top+Cs,k.left+=-Ml*xr,k.right=k.left+xr}function Y2(k,C,B,te,pe){if(!(!te&&!pe))for(var we=k[B],Me=we.metrics.advance*we.scale,Ne=(k[B].x+Me)*te,rt=C;rt<=B;rt++)k[rt].x-=Ne,k[rt].y+=pe}function W2(k,C,B,te,pe,we,Me,Ne,rt){var vt=(C-B)*pe,yt=0;we!==Me?yt=-Ne*te-Dv:yt=(-te*rt+.5)*Me;for(var Ut=0,ir=k;Ut<ir.length;Ut+=1)for(var tr=ir[Ut],xr=0,Ur=tr.positionedGlyphs;xr<Ur.length;xr+=1){var hn=Ur[xr];hn.x+=vt,hn.y+=yt}}function X2(k,C,B){var te=n0(B),pe=te.horizontalAlign,we=te.verticalAlign,Me=C[0],Ne=C[1],rt=Me-k.displaySize[0]*pe,vt=rt+k.displaySize[0],yt=Ne-k.displaySize[1]*we,Ut=yt+k.displaySize[1];return{image:k,top:yt,bottom:Ut,left:rt,right:vt}}function Py(k,C,B,te,pe,we){var Me=k.image,Ne;if(Me.content){var rt=Me.content,vt=Me.pixelRatio||1;Ne=[rt[0]/vt,rt[1]/vt,Me.displaySize[0]-rt[2]/vt,Me.displaySize[1]-rt[3]/vt]}var yt=C.left*we,Ut=C.right*we,ir,tr,xr,Ur;B==="width"||B==="both"?(Ur=pe[0]+yt-te[3],tr=pe[0]+Ut+te[1]):(Ur=pe[0]+(yt+Ut-Me.displaySize[0])/2,tr=Ur+Me.displaySize[0]);var hn=C.top*we,an=C.bottom*we;return B==="height"||B==="both"?(ir=pe[1]+hn-te[0],xr=pe[1]+an+te[2]):(ir=pe[1]+(hn+an-Me.displaySize[1])/2,xr=ir+Me.displaySize[1]),{image:Me,top:ir,right:tr,bottom:xr,left:Ur,collisionPadding:Ne}}var kh=function(k){function C(B,te,pe,we){k.call(this,B,te),this.angle=pe,we!==void 0&&(this.segment=we)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(v);Be("Anchor",kh);var xc=128;function a0(k,C){var B=C.expression;if(B.kind==="constant"){var te=B.evaluate(new mi(k+1));return{kind:"constant",layoutSize:te}}else{if(B.kind==="source")return{kind:"source"};for(var pe=B.zoomStops,we=B.interpolationType,Me=0;Me<pe.length&&pe[Me]<=k;)Me++;Me=Math.max(0,Me-1);for(var Ne=Me;Ne<pe.length&&pe[Ne]<k+1;)Ne++;Ne=Math.min(pe.length-1,Ne);var rt=pe[Me],vt=pe[Ne];if(B.kind==="composite")return{kind:"composite",minZoom:rt,maxZoom:vt,interpolationType:we};var yt=B.evaluate(new mi(rt)),Ut=B.evaluate(new mi(vt));return{kind:"camera",minZoom:rt,maxZoom:vt,minSize:yt,maxSize:Ut,interpolationType:we}}}function Dy(k,C,B){var te=C.uSize,pe=C.uSizeT,we=B.lowerSize,Me=B.upperSize;return k.kind==="source"?we/xc:k.kind==="composite"?go(we/xc,Me/xc,pe):te}function Ry(k,C){var B=0,te=0;if(k.kind==="constant")te=k.layoutSize;else if(k.kind!=="source"){var pe=k.interpolationType,we=k.minZoom,Me=k.maxZoom,Ne=pe?f(uo.interpolationFactor(pe,C,we,Me),0,1):0;k.kind==="camera"?te=go(k.minSize,k.maxSize,Ne):B=Ne}return{uSizeT:B,uSize:te}}var j2=Object.freeze({__proto__:null,getSizeData:a0,evaluateSizeForFeature:Dy,evaluateSizeForZoom:Ry,SIZE_PACK_FACTOR:xc});function Iy(k,C,B,te,pe){if(C.segment===void 0)return!0;for(var we=C,Me=C.segment+1,Ne=0;Ne>-B/2;){if(Me--,Me<0)return!1;Ne-=k[Me].dist(we),we=k[Me]}Ne+=k[Me].dist(k[Me+1]),Me++;for(var rt=[],vt=0;Ne<B/2;){var yt=k[Me-1],Ut=k[Me],ir=k[Me+1];if(!ir)return!1;var tr=yt.angleTo(Ut)-Ut.angleTo(ir);for(tr=Math.abs((tr+3*Math.PI)%(Math.PI*2)-Math.PI),rt.push({distance:Ne,angleDelta:tr}),vt+=tr;Ne-rt[0].distance>te;)vt-=rt.shift().angleDelta;if(vt>pe)return!1;Me++,Ne+=Ut.dist(ir)}return!0}function Fy(k){for(var C=0,B=0;B<k.length-1;B++)C+=k[B].dist(k[B+1]);return C}function zy(k,C,B){return k?3/5*C*B:0}function Oy(k,C){return Math.max(k?k.right-k.left:0,C?C.right-C.left:0)}function Z2(k,C,B,te,pe,we){for(var Me=zy(B,pe,we),Ne=Oy(B,te)*we,rt=0,vt=Fy(k)/2,yt=0;yt<k.length-1;yt++){var Ut=k[yt],ir=k[yt+1],tr=Ut.dist(ir);if(rt+tr>vt){var xr=(vt-rt)/tr,Ur=go(Ut.x,ir.x,xr),hn=go(Ut.y,ir.y,xr),an=new kh(Ur,hn,ir.angleTo(Ut),yt);return an._round(),!Me||Iy(k,an,Ne,Me,C)?an:void 0}rt+=tr}}function K2(k,C,B,te,pe,we,Me,Ne,rt){var vt=zy(te,we,Me),yt=Oy(te,pe),Ut=yt*Me,ir=k[0].x===0||k[0].x===rt||k[0].y===0||k[0].y===rt;C-Ut<C/4&&(C=Ut+C/4);var tr=we*2,xr=ir?C/2*Ne%C:(yt/2+tr)*Me*Ne%C;return Ny(k,xr,C,vt,B,Ut,ir,!1,rt)}function Ny(k,C,B,te,pe,we,Me,Ne,rt){for(var vt=we/2,yt=Fy(k),Ut=0,ir=C-B,tr=[],xr=0;xr<k.length-1;xr++){for(var Ur=k[xr],hn=k[xr+1],an=Ur.dist(hn),Rn=hn.angleTo(Ur);ir+B<Ut+an;){ir+=B;var Mn=(ir-Ut)/an,Dn=go(Ur.x,hn.x,Mn),Vn=go(Ur.y,hn.y,Mn);if(Dn>=0&&Dn<rt&&Vn>=0&&Vn<rt&&ir-vt>=0&&ir+vt<=yt){var qn=new kh(Dn,Vn,Rn,xr);qn._round(),(!te||Iy(k,qn,we,te,pe))&&tr.push(qn)}}Ut+=an}return!Ne&&!tr.length&&!Me&&(tr=Ny(k,Ut/2,B,te,pe,we,Me,!0,rt)),tr}function By(k,C,B,te,pe){for(var we=[],Me=0;Me<k.length;Me++)for(var Ne=k[Me],rt=void 0,vt=0;vt<Ne.length-1;vt++){var yt=Ne[vt],Ut=Ne[vt+1];yt.x<C&&Ut.x<C||(yt.x<C?yt=new v(C,yt.y+(Ut.y-yt.y)*((C-yt.x)/(Ut.x-yt.x)))._round():Ut.x<C&&(Ut=new v(C,yt.y+(Ut.y-yt.y)*((C-yt.x)/(Ut.x-yt.x)))._round()),!(yt.y<B&&Ut.y<B)&&(yt.y<B?yt=new v(yt.x+(Ut.x-yt.x)*((B-yt.y)/(Ut.y-yt.y)),B)._round():Ut.y<B&&(Ut=new v(yt.x+(Ut.x-yt.x)*((B-yt.y)/(Ut.y-yt.y)),B)._round()),!(yt.x>=te&&Ut.x>=te)&&(yt.x>=te?yt=new v(te,yt.y+(Ut.y-yt.y)*((te-yt.x)/(Ut.x-yt.x)))._round():Ut.x>=te&&(Ut=new v(te,yt.y+(Ut.y-yt.y)*((te-yt.x)/(Ut.x-yt.x)))._round()),!(yt.y>=pe&&Ut.y>=pe)&&(yt.y>=pe?yt=new v(yt.x+(Ut.x-yt.x)*((pe-yt.y)/(Ut.y-yt.y)),pe)._round():Ut.y>=pe&&(Ut=new v(yt.x+(Ut.x-yt.x)*((pe-yt.y)/(Ut.y-yt.y)),pe)._round()),(!rt||!yt.equals(rt[rt.length-1]))&&(rt=[yt],we.push(rt)),rt.push(Ut)))))}return we}var Ch=tu;function Uy(k,C,B,te){var pe=[],we=k.image,Me=we.pixelRatio,Ne=we.paddedRect.w-2*Ch,rt=we.paddedRect.h-2*Ch,vt=k.right-k.left,yt=k.bottom-k.top,Ut=we.stretchX||[[0,Ne]],ir=we.stretchY||[[0,rt]],tr=function(Gi,Ni){return Gi+Ni[1]-Ni[0]},xr=Ut.reduce(tr,0),Ur=ir.reduce(tr,0),hn=Ne-xr,an=rt-Ur,Rn=0,Mn=xr,Dn=0,Vn=Ur,qn=0,da=hn,va=0,Wa=an;if(we.content&&te){var Da=we.content;Rn=Ap(Ut,0,Da[0]),Dn=Ap(ir,0,Da[1]),Mn=Ap(Ut,Da[0],Da[2]),Vn=Ap(ir,Da[1],Da[3]),qn=Da[0]-Rn,va=Da[1]-Dn,da=Da[2]-Da[0]-Mn,Wa=Da[3]-Da[1]-Vn}var Oa=function(Gi,Ni,mo,To){var Go=Mp(Gi.stretch-Rn,Mn,vt,k.left),Zo=Ep(Gi.fixed-qn,da,Gi.stretch,xr),ks=Mp(Ni.stretch-Dn,Vn,yt,k.top),ls=Ep(Ni.fixed-va,Wa,Ni.stretch,Ur),ul=Mp(mo.stretch-Rn,Mn,vt,k.left),cl=Ep(mo.fixed-qn,da,mo.stretch,xr),Cs=Mp(To.stretch-Dn,Vn,yt,k.top),Al=Ep(To.fixed-va,Wa,To.stretch,Ur),Ml=new v(Go,ks),bs=new v(ul,ks),El=new v(ul,Cs),wu=new v(Go,Cs),Zc=new v(Zo/Me,ls/Me),df=new v(cl/Me,Al/Me),gf=C*Math.PI/180;if(gf){var yf=Math.sin(gf),Oh=Math.cos(gf),ac=[Oh,-yf,yf,Oh];Ml._matMult(ac),bs._matMult(ac),wu._matMult(ac),El._matMult(ac)}var Dp=Gi.stretch+Gi.fixed,h0=mo.stretch+mo.fixed,Rp=Ni.stretch+Ni.fixed,v0=To.stretch+To.fixed,Vu={x:we.paddedRect.x+Ch+Dp,y:we.paddedRect.y+Ch+Rp,w:h0-Dp,h:v0-Rp},Nh=da/Me/vt,Ip=Wa/Me/yt;return{tl:Ml,tr:bs,bl:wu,br:El,tex:Vu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zc,pixelOffsetBR:df,minFontScaleX:Nh,minFontScaleY:Ip,isSDF:B}};if(!te||!we.stretchX&&!we.stretchY)pe.push(Oa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:rt+1}));else for(var fi=Vy(Ut,hn,xr),Ua=Vy(ir,an,Ur),Ha=0;Ha<fi.length-1;Ha++)for(var bi=fi[Ha],ci=fi[Ha+1],Vi=0;Vi<Ua.length-1;Vi++){var so=Ua[Vi],Hi=Ua[Vi+1];pe.push(Oa(bi,so,ci,Hi))}return pe}function Ap(k,C,B){for(var te=0,pe=0,we=k;pe<we.length;pe+=1){var Me=we[pe];te+=Math.max(C,Math.min(B,Me[1]))-Math.max(C,Math.min(B,Me[0]))}return te}function Vy(k,C,B){for(var te=[{fixed:-Ch,stretch:0}],pe=0,we=k;pe<we.length;pe+=1){var Me=we[pe],Ne=Me[0],rt=Me[1],vt=te[te.length-1];te.push({fixed:Ne-vt.stretch,stretch:vt.stretch}),te.push({fixed:Ne-vt.stretch,stretch:vt.stretch+(rt-Ne)})}return te.push({fixed:C+Ch,stretch:B}),te}function Mp(k,C,B,te){return k/C*B+te}function Ep(k,C,B,te){return k-C*B/te}function J2(k,C,B,te,pe,we,Me,Ne){for(var rt=te.layout.get("text-rotate").evaluate(we,{})*Math.PI/180,vt=[],yt=0,Ut=C.positionedLines;yt<Ut.length;yt+=1)for(var ir=Ut[yt],tr=0,xr=ir.positionedGlyphs;tr<xr.length;tr+=1){var Ur=xr[tr];if(!!Ur.rect){var hn=Ur.rect||{},an=1,Rn=Ty+an,Mn=!0,Dn=1,Vn=0,qn=(pe||Ne)&&Ur.vertical,da=Ur.metrics.advance*Ur.scale/2;if(Ne&&C.verticalizable){var va=(Ur.scale-1)*Vs,Wa=(Vs-Ur.metrics.width*Ur.scale)/2;Vn=ir.lineOffset/2-(Ur.imageName?-Wa:va)}if(Ur.imageName){var Da=Me[Ur.imageName];Mn=Da.sdf,Dn=Da.pixelRatio,Rn=tu/Dn}var Oa=pe?[Ur.x+da,Ur.y]:[0,0],fi=pe?[0,0]:[Ur.x+da+B[0],Ur.y+B[1]-Vn],Ua=[0,0];qn&&(Ua=fi,fi=[0,0]);var Ha=(Ur.metrics.left-Rn)*Ur.scale-da+fi[0],bi=(-Ur.metrics.top-Rn)*Ur.scale+fi[1],ci=Ha+hn.w*Ur.scale/Dn,Vi=bi+hn.h*Ur.scale/Dn,so=new v(Ha,bi),Hi=new v(ci,bi),Gi=new v(Ha,Vi),Ni=new v(ci,Vi);if(qn){var mo=new v(-da,da-Dv),To=-Math.PI/2,Go=Vs/2-da,Zo=Ur.imageName?Go:0,ks=new v(5-Dv-Go,-Zo),ls=new(Function.prototype.bind.apply(v,[null].concat(Ua)));so._rotateAround(To,mo)._add(ks)._add(ls),Hi._rotateAround(To,mo)._add(ks)._add(ls),Gi._rotateAround(To,mo)._add(ks)._add(ls),Ni._rotateAround(To,mo)._add(ks)._add(ls)}if(rt){var ul=Math.sin(rt),cl=Math.cos(rt),Cs=[cl,-ul,ul,cl];so._matMult(Cs),Hi._matMult(Cs),Gi._matMult(Cs),Ni._matMult(Cs)}var Al=new v(0,0),Ml=new v(0,0),bs=0,El=0;vt.push({tl:so,tr:Hi,bl:Gi,br:Ni,tex:hn,writingMode:C.writingMode,glyphOffset:Oa,sectionIndex:Ur.sectionIndex,isSDF:Mn,pixelOffsetTL:Al,pixelOffsetBR:Ml,minFontScaleX:bs,minFontScaleY:El})}}return vt}var Sp=function(C,B,te,pe,we,Me,Ne,rt,vt,yt){if(this.boxStartIndex=C.length,vt){var Ut=Me.top,ir=Me.bottom,tr=Me.collisionPadding;tr&&(Ut-=tr[1],ir+=tr[3]);var xr=ir-Ut;xr>0&&(xr=Math.max(10,xr),this.circleDiameter=xr)}else{var Ur=Me.top*Ne-rt,hn=Me.bottom*Ne+rt,an=Me.left*Ne-rt,Rn=Me.right*Ne+rt,Mn=Me.collisionPadding;if(Mn&&(an-=Mn[0]*Ne,Ur-=Mn[1]*Ne,Rn+=Mn[2]*Ne,hn+=Mn[3]*Ne),yt){var Dn=new v(an,Ur),Vn=new v(Rn,Ur),qn=new v(an,hn),da=new v(Rn,hn),va=yt*Math.PI/180;Dn._rotate(va),Vn._rotate(va),qn._rotate(va),da._rotate(va),an=Math.min(Dn.x,Vn.x,qn.x,da.x),Rn=Math.max(Dn.x,Vn.x,qn.x,da.x),Ur=Math.min(Dn.y,Vn.y,qn.y,da.y),hn=Math.max(Dn.y,Vn.y,qn.y,da.y)}C.emplaceBack(B.x,B.y,an,Ur,Rn,hn,te,pe,we)}this.boxEndIndex=C.length},Lh=function(C,B){if(C===void 0&&(C=[]),B===void 0&&(B=$2),this.data=C,this.length=this.data.length,this.compare=B,this.length>0)for(var te=(this.length>>1)-1;te>=0;te--)this._down(te)};Lh.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},Lh.prototype.pop=function(){if(this.length!==0){var C=this.data[0],B=this.data.pop();return this.length--,this.length>0&&(this.data[0]=B,this._down(0)),C}},Lh.prototype.peek=function(){return this.data[0]},Lh.prototype._up=function(C){for(var B=this,te=B.data,pe=B.compare,we=te[C];C>0;){var Me=C-1>>1,Ne=te[Me];if(pe(we,Ne)>=0)break;te[C]=Ne,C=Me}te[C]=we},Lh.prototype._down=function(C){for(var B=this,te=B.data,pe=B.compare,we=this.length>>1,Me=te[C];C<we;){var Ne=(C<<1)+1,rt=te[Ne],vt=Ne+1;if(vt<this.length&&pe(te[vt],rt)<0&&(Ne=vt,rt=te[vt]),pe(rt,Me)>=0)break;te[C]=rt,C=Ne}te[C]=Me};function $2(k,C){return k<C?-1:k>C?1:0}function Q2(k,C,B){C===void 0&&(C=1),B===void 0&&(B=!1);for(var te=1/0,pe=1/0,we=-1/0,Me=-1/0,Ne=k[0],rt=0;rt<Ne.length;rt++){var vt=Ne[rt];(!rt||vt.x<te)&&(te=vt.x),(!rt||vt.y<pe)&&(pe=vt.y),(!rt||vt.x>we)&&(we=vt.x),(!rt||vt.y>Me)&&(Me=vt.y)}var yt=we-te,Ut=Me-pe,ir=Math.min(yt,Ut),tr=ir/2,xr=new Lh([],q2);if(ir===0)return new v(te,pe);for(var Ur=te;Ur<we;Ur+=ir)for(var hn=pe;hn<Me;hn+=ir)xr.push(new Ph(Ur+tr,hn+tr,tr,k));for(var an=tw(k),Rn=xr.length;xr.length;){var Mn=xr.pop();(Mn.d>an.d||!an.d)&&(an=Mn,B&&console.log("found best %d after %d probes",Math.round(1e4*Mn.d)/1e4,Rn)),!(Mn.max-an.d<=C)&&(tr=Mn.h/2,xr.push(new Ph(Mn.p.x-tr,Mn.p.y-tr,tr,k)),xr.push(new Ph(Mn.p.x+tr,Mn.p.y-tr,tr,k)),xr.push(new Ph(Mn.p.x-tr,Mn.p.y+tr,tr,k)),xr.push(new Ph(Mn.p.x+tr,Mn.p.y+tr,tr,k)),Rn+=4)}return B&&(console.log("num probes: "+Rn),console.log("best distance: "+an.d)),an.p}function q2(k,C){return C.max-k.max}function Ph(k,C,B,te){this.p=new v(k,C),this.h=B,this.d=ew(this.p,te),this.max=this.d+this.h*Math.SQRT2}function ew(k,C){for(var B=!1,te=1/0,pe=0;pe<C.length;pe++)for(var we=C[pe],Me=0,Ne=we.length,rt=Ne-1;Me<Ne;rt=Me++){var vt=we[Me],yt=we[rt];vt.y>k.y!=yt.y>k.y&&k.x<(yt.x-vt.x)*(k.y-vt.y)/(yt.y-vt.y)+vt.x&&(B=!B),te=Math.min(te,gc(k,vt,yt))}return(B?1:-1)*Math.sqrt(te)}function tw(k){for(var C=0,B=0,te=0,pe=k[0],we=0,Me=pe.length,Ne=Me-1;we<Me;Ne=we++){var rt=pe[we],vt=pe[Ne],yt=rt.x*vt.y-vt.x*rt.y;B+=(rt.x+vt.x)*yt,te+=(rt.y+vt.y)*yt,C+=yt*3}return new Ph(B/C,te/C,0,k)}var Dh=7,i0=Number.POSITIVE_INFINITY;function Hy(k,C){function B(pe,we){var Me=0,Ne=0;we<0&&(we=0);var rt=we/Math.sqrt(2);switch(pe){case"top-right":case"top-left":Ne=rt-Dh;break;case"bottom-right":case"bottom-left":Ne=-rt+Dh;break;case"bottom":Ne=-we+Dh;break;case"top":Ne=we-Dh;break}switch(pe){case"top-right":case"bottom-right":Me=-rt;break;case"top-left":case"bottom-left":Me=rt;break;case"left":Me=we;break;case"right":Me=-we;break}return[Me,Ne]}function te(pe,we,Me){var Ne=0,rt=0;switch(we=Math.abs(we),Me=Math.abs(Me),pe){case"top-right":case"top-left":case"top":rt=Me-Dh;break;case"bottom-right":case"bottom-left":case"bottom":rt=-Me+Dh;break}switch(pe){case"top-right":case"bottom-right":case"right":Ne=-we;break;case"top-left":case"bottom-left":case"left":Ne=we;break}return[Ne,rt]}return C[1]!==i0?te(k,C[0],C[1]):B(k,C[0])}function rw(k,C,B,te,pe,we,Me){k.createArrays();var Ne=512*k.overscaling;k.tilePixelRatio=Ja/Ne,k.compareText={},k.iconsNeedLinear=!1;var rt=k.layers[0].layout,vt=k.layers[0]._unevaluatedLayout._values,yt={};if(k.textSizeData.kind==="composite"){var Ut=k.textSizeData,ir=Ut.minZoom,tr=Ut.maxZoom;yt.compositeTextSizes=[vt["text-size"].possiblyEvaluate(new mi(ir),Me),vt["text-size"].possiblyEvaluate(new mi(tr),Me)]}if(k.iconSizeData.kind==="composite"){var xr=k.iconSizeData,Ur=xr.minZoom,hn=xr.maxZoom;yt.compositeIconSizes=[vt["icon-size"].possiblyEvaluate(new mi(Ur),Me),vt["icon-size"].possiblyEvaluate(new mi(hn),Me)]}yt.layoutTextSize=vt["text-size"].possiblyEvaluate(new mi(k.zoom+1),Me),yt.layoutIconSize=vt["icon-size"].possiblyEvaluate(new mi(k.zoom+1),Me),yt.textMaxSize=vt["text-size"].possiblyEvaluate(new mi(18));for(var an=rt.get("text-line-height")*Vs,Rn=rt.get("text-rotation-alignment")==="map"&&rt.get("symbol-placement")!=="point",Mn=rt.get("text-keep-upright"),Dn=rt.get("text-size"),Vn=function(){var va=da[qn],Wa=rt.get("text-font").evaluate(va,{},Me).join(","),Da=Dn.evaluate(va,{},Me),Oa=yt.layoutTextSize.evaluate(va,{},Me),fi=yt.layoutIconSize.evaluate(va,{},Me),Ua={horizontal:{},vertical:void 0},Ha=va.text,bi=[0,0];if(Ha){var ci=Ha.toString(),Vi=rt.get("text-letter-spacing").evaluate(va,{},Me)*Vs,so=nn(ci)?Vi:0,Hi=rt.get("text-anchor").evaluate(va,{},Me),Gi=rt.get("text-variable-anchor");if(!Gi){var Ni=rt.get("text-radial-offset").evaluate(va,{},Me);Ni?bi=Hy(Hi,[Ni*Vs,i0]):bi=rt.get("text-offset").evaluate(va,{},Me).map(function(Zc){return Zc*Vs})}var mo=Rn?"center":rt.get("text-justify").evaluate(va,{},Me),To=rt.get("symbol-placement"),Go=To==="point"?rt.get("text-max-width").evaluate(va,{},Me)*Vs:0,Zo=function(){k.allowVerticalPlacement&&Cr(ci)&&(Ua.vertical=Tp(Ha,C,B,pe,Wa,Go,an,Hi,"left",so,bi,_u.vertical,!0,To,Oa,Da))};if(!Rn&&Gi){for(var ks=mo==="auto"?Gi.map(function(Zc){return o0(Zc)}):[mo],ls=!1,ul=0;ul<ks.length;ul++){var cl=ks[ul];if(!Ua.horizontal[cl])if(ls)Ua.horizontal[cl]=Ua.horizontal[0];else{var Cs=Tp(Ha,C,B,pe,Wa,Go,an,"center",cl,so,bi,_u.horizontal,!1,To,Oa,Da);Cs&&(Ua.horizontal[cl]=Cs,ls=Cs.positionedLines.length===1)}}Zo()}else{mo==="auto"&&(mo=o0(Hi));var Al=Tp(Ha,C,B,pe,Wa,Go,an,Hi,mo,so,bi,_u.horizontal,!1,To,Oa,Da);Al&&(Ua.horizontal[mo]=Al),Zo(),Cr(ci)&&Rn&&Mn&&(Ua.vertical=Tp(Ha,C,B,pe,Wa,Go,an,Hi,mo,so,bi,_u.vertical,!1,To,Oa,Da))}}var Ml=void 0,bs=!1;if(va.icon&&va.icon.name){var El=te[va.icon.name];El&&(Ml=X2(pe[va.icon.name],rt.get("icon-offset").evaluate(va,{},Me),rt.get("icon-anchor").evaluate(va,{},Me)),bs=El.sdf,k.sdfIcons===void 0?k.sdfIcons=El.sdf:k.sdfIcons!==El.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(El.pixelRatio!==k.pixelRatio||rt.get("icon-rotate").constantOr(1)!==0)&&(k.iconsNeedLinear=!0))}var wu=Yy(Ua.horizontal)||Ua.vertical;k.iconsInText=wu?wu.iconsInText:!1,(wu||Ml)&&nw(k,va,Ua,Ml,te,yt,Oa,fi,bi,bs,Me)},qn=0,da=k.features;qn<da.length;qn+=1)Vn();we&&k.generateCollisionDebugBuffers()}function o0(k){switch(k){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nw(k,C,B,te,pe,we,Me,Ne,rt,vt,yt){var Ut=we.textMaxSize.evaluate(C,{});Ut===void 0&&(Ut=Me);var ir=k.layers[0].layout,tr=ir.get("icon-offset").evaluate(C,{},yt),xr=Yy(B.horizontal),Ur=24,hn=Me/Ur,an=k.tilePixelRatio*hn,Rn=k.tilePixelRatio*Ut/Ur,Mn=k.tilePixelRatio*Ne,Dn=k.tilePixelRatio*ir.get("symbol-spacing"),Vn=ir.get("text-padding")*k.tilePixelRatio,qn=ir.get("icon-padding")*k.tilePixelRatio,da=ir.get("text-max-angle")/180*Math.PI,va=ir.get("text-rotation-alignment")==="map"&&ir.get("symbol-placement")!=="point",Wa=ir.get("icon-rotation-alignment")==="map"&&ir.get("symbol-placement")!=="point",Da=ir.get("symbol-placement"),Oa=Dn/2,fi=ir.get("icon-text-fit"),Ua;te&&fi!=="none"&&(k.allowVerticalPlacement&&B.vertical&&(Ua=Py(te,B.vertical,fi,ir.get("icon-text-fit-padding"),tr,hn)),xr&&(te=Py(te,xr,fi,ir.get("icon-text-fit-padding"),tr,hn)));var Ha=function(Oh,ac){ac.x<0||ac.x>=Ja||ac.y<0||ac.y>=Ja||aw(k,ac,Oh,B,te,pe,Ua,k.layers[0],k.collisionBoxArray,C.index,C.sourceLayerIndex,k.index,an,Vn,va,rt,Mn,qn,Wa,tr,C,we,vt,yt,Me)};if(Da==="line")for(var bi=0,ci=By(C.geometry,0,0,Ja,Ja);bi<ci.length;bi+=1)for(var Vi=ci[bi],so=K2(Vi,Dn,da,B.vertical||xr,te,Ur,Rn,k.overscaling,Ja),Hi=0,Gi=so;Hi<Gi.length;Hi+=1){var Ni=Gi[Hi],mo=xr;(!mo||!iw(k,mo.text,Oa,Ni))&&Ha(Vi,Ni)}else if(Da==="line-center")for(var To=0,Go=C.geometry;To<Go.length;To+=1){var Zo=Go[To];if(Zo.length>1){var ks=Z2(Zo,da,B.vertical||xr,te,Ur,Rn);ks&&Ha(Zo,ks)}}else if(C.type==="Polygon")for(var ls=0,ul=Kd(C.geometry,0);ls<ul.length;ls+=1){var cl=ul[ls],Cs=Q2(cl,16);Ha(cl[0],new kh(Cs.x,Cs.y,0))}else if(C.type==="LineString")for(var Al=0,Ml=C.geometry;Al<Ml.length;Al+=1){var bs=Ml[Al];Ha(bs,new kh(bs[0].x,bs[0].y,0))}else if(C.type==="Point")for(var El=0,wu=C.geometry;El<wu.length;El+=1)for(var Zc=wu[El],df=0,gf=Zc;df<gf.length;df+=1){var yf=gf[df];Ha([yf],new kh(yf.x,yf.y,0))}}var Rv=255,vf=Rv*xc;function Gy(k,C,B,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr){var Ur=J2(C,B,Ne,pe,we,Me,te,k.allowVerticalPlacement),hn=k.textSizeData,an=null;hn.kind==="source"?(an=[xc*pe.layout.get("text-size").evaluate(Me,{})],an[0]>vf&&O(k.layerIds[0]+': Value for "text-size" is >= '+Rv+'. Reduce your "text-size".')):hn.kind==="composite"&&(an=[xc*tr.compositeTextSizes[0].evaluate(Me,{},xr),xc*tr.compositeTextSizes[1].evaluate(Me,{},xr)],(an[0]>vf||an[1]>vf)&&O(k.layerIds[0]+': Value for "text-size" is >= '+Rv+'. Reduce your "text-size".')),k.addSymbols(k.text,Ur,an,Ne,we,Me,vt,C,rt.lineStartIndex,rt.lineLength,ir,xr);for(var Rn=0,Mn=yt;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];Ut[Dn]=k.text.placedSymbolArray.length-1}return Ur.length*4}function Yy(k){for(var C in k)return k[C];return null}function aw(k,C,B,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va){var Wa,Da=k.addToLineVertexArray(C,B),Oa,fi,Ua,Ha,bi=0,ci=0,Vi=0,so=0,Hi=-1,Gi=-1,Ni={},mo=Fe(""),To=0,Go=0;if(Ne._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Wa=Ne.layout.get("text-offset").evaluate(Dn,{},da).map(function(zv){return zv*Vs}),To=Wa[0],Go=Wa[1]):(To=Ne.layout.get("text-radial-offset").evaluate(Dn,{},da)*Vs,Go=i0),k.allowVerticalPlacement&&te.vertical){var Zo=Ne.layout.get("text-rotate").evaluate(Dn,{},da),ks=Zo+90,ls=te.vertical;Ua=new Sp(rt,C,vt,yt,Ut,ls,ir,tr,xr,ks),Me&&(Ha=new Sp(rt,C,vt,yt,Ut,Me,hn,an,xr,ks))}if(pe){var ul=Ne.layout.get("icon-rotate").evaluate(Dn,{}),cl=Ne.layout.get("icon-text-fit")!=="none",Cs=Uy(pe,ul,qn,cl),Al=Me?Uy(Me,ul,qn,cl):void 0;fi=new Sp(rt,C,vt,yt,Ut,pe,hn,an,!1,ul),bi=Cs.length*4;var Ml=k.iconSizeData,bs=null;Ml.kind==="source"?(bs=[xc*Ne.layout.get("icon-size").evaluate(Dn,{})],bs[0]>vf&&O(k.layerIds[0]+': Value for "icon-size" is >= '+Rv+'. Reduce your "icon-size".')):Ml.kind==="composite"&&(bs=[xc*Vn.compositeIconSizes[0].evaluate(Dn,{},da),xc*Vn.compositeIconSizes[1].evaluate(Dn,{},da)],(bs[0]>vf||bs[1]>vf)&&O(k.layerIds[0]+': Value for "icon-size" is >= '+Rv+'. Reduce your "icon-size".')),k.addSymbols(k.icon,Cs,bs,Mn,Rn,Dn,!1,C,Da.lineStartIndex,Da.lineLength,-1,da),Hi=k.icon.placedSymbolArray.length-1,Al&&(ci=Al.length*4,k.addSymbols(k.icon,Al,bs,Mn,Rn,Dn,_u.vertical,C,Da.lineStartIndex,Da.lineLength,-1,da),Gi=k.icon.placedSymbolArray.length-1)}for(var El in te.horizontal){var wu=te.horizontal[El];if(!Oa){mo=Fe(wu.text);var Zc=Ne.layout.get("text-rotate").evaluate(Dn,{},da);Oa=new Sp(rt,C,vt,yt,Ut,wu,ir,tr,xr,Zc)}var df=wu.positionedLines.length===1;if(Vi+=Gy(k,C,wu,we,Ne,xr,Dn,Ur,Da,te.vertical?_u.horizontal:_u.horizontalOnly,df?Object.keys(te.horizontal):[El],Ni,Hi,Vn,da),df)break}te.vertical&&(so+=Gy(k,C,te.vertical,we,Ne,xr,Dn,Ur,Da,_u.vertical,["vertical"],Ni,Gi,Vn,da));var gf=Oa?Oa.boxStartIndex:k.collisionBoxArray.length,yf=Oa?Oa.boxEndIndex:k.collisionBoxArray.length,Oh=Ua?Ua.boxStartIndex:k.collisionBoxArray.length,ac=Ua?Ua.boxEndIndex:k.collisionBoxArray.length,Dp=fi?fi.boxStartIndex:k.collisionBoxArray.length,h0=fi?fi.boxEndIndex:k.collisionBoxArray.length,Rp=Ha?Ha.boxStartIndex:k.collisionBoxArray.length,v0=Ha?Ha.boxEndIndex:k.collisionBoxArray.length,Vu=-1,Nh=function(zv,om){return zv&&zv.circleDiameter?Math.max(zv.circleDiameter,om):om};Vu=Nh(Oa,Vu),Vu=Nh(Ua,Vu),Vu=Nh(fi,Vu),Vu=Nh(Ha,Vu);var Ip=Vu>-1?1:0;Ip&&(Vu*=va/Vs),k.glyphOffsetArray.length>=oo.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dn.sortKey!==void 0&&k.addToSortKeyRanges(k.symbolInstances.length,Dn.sortKey),k.symbolInstances.emplaceBack(C.x,C.y,Ni.right>=0?Ni.right:-1,Ni.center>=0?Ni.center:-1,Ni.left>=0?Ni.left:-1,Ni.vertical||-1,Hi,Gi,mo,gf,yf,Oh,ac,Dp,h0,Rp,v0,vt,Vi,so,bi,ci,Ip,0,ir,To,Go,Vu)}function iw(k,C,B,te){var pe=k.compareText;if(!(C in pe))pe[C]=[];else for(var we=pe[C],Me=we.length-1;Me>=0;Me--)if(te.dist(we[Me])<B)return!0;return pe[C].push(te),!1}var ow=Ah.VectorTileFeature.types,sw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function kp(k,C,B,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir){var tr=Ne?Math.min(vf,Math.round(Ne[0])):0,xr=Ne?Math.min(vf,Math.round(Ne[1])):0;k.emplaceBack(C,B,Math.round(te*32),Math.round(pe*32),we,Me,(tr<<1)+(rt?1:0),xr,vt*16,yt*16,Ut*256,ir*256)}function s0(k,C,B){k.emplaceBack(C.x,C.y,B),k.emplaceBack(C.x,C.y,B),k.emplaceBack(C.x,C.y,B),k.emplaceBack(C.x,C.y,B)}function lw(k){for(var C=0,B=k.sections;C<B.length;C+=1){var te=B[C];if(ha(te.text))return!0}return!1}var Rh=function(C){this.layoutVertexArray=new Lc,this.indexArray=new dc,this.programConfigurations=C,this.segments=new W,this.dynamicLayoutVertexArray=new dv,this.opacityVertexArray=new gv,this.placedSymbolArray=new uf};Rh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Rh.prototype.upload=function(C,B,te,pe){this.isEmpty()||(te&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,qd.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,B),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,u2.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,sw,!0),this.opacityVertexBuffer.itemSize=1),(te||pe)&&this.programConfigurations.upload(C))},Rh.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Be("SymbolBuffers",Rh);var Iv=function(C,B,te){this.layoutVertexArray=new C,this.layoutAttributes=B,this.indexArray=new te,this.segments=new W,this.collisionVertexArray=new Bl};Iv.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,c2.members,!0)},Iv.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Be("CollisionBuffers",Iv);var oo=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(rt){return rt.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=xh([]),this.placementViewportMatrix=xh([]);var B=this.layers[0],te=B._unevaluatedLayout._values;this.textSizeData=a0(this.zoom,te["text-size"]),this.iconSizeData=a0(this.zoom,te["icon-size"]);var pe=this.layers[0].layout,we=pe.get("symbol-sort-key"),Me=pe.get("symbol-z-order");this.sortFeaturesByKey=Me!=="viewport-y"&&we.constantOr(1)!==void 0;var Ne=Me==="viewport-y"||Me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ne&&(pe.get("text-allow-overlap")||pe.get("icon-allow-overlap")||pe.get("text-ignore-placement")||pe.get("icon-ignore-placement")),pe.get("symbol-placement")==="point"&&(this.writingModes=pe.get("text-writing-mode").map(function(rt){return _u[rt]})),this.stateDependentLayerIds=this.layers.filter(function(rt){return rt.isStateDependent()}).map(function(rt){return rt.id}),this.sourceID=C.sourceID};oo.prototype.createArrays=function(){this.text=new Rh(new pi(qd.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new Rh(new pi(qd.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new Bu,this.lineVertexArray=new cp,this.symbolInstances=new up},oo.prototype.calculateGlyphDependencies=function(C,B,te,pe,we){for(var Me=0;Me<C.length;Me++)if(B[C.charCodeAt(Me)]=!0,(te||pe)&&we){var Ne=Cv[C.charAt(Me)];Ne&&(B[Ne.charCodeAt(0)]=!0)}},oo.prototype.populate=function(C,B,te){var pe=this.layers[0],we=pe.layout,Me=we.get("text-font"),Ne=we.get("text-field"),rt=we.get("icon-image"),vt=(Ne.value.kind!=="constant"||Ne.value.value instanceof Zi&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Me.value.kind!=="constant"||Me.value.value.length>0),yt=rt.value.kind!=="constant"||!!rt.value.value||Object.keys(rt.parameters).length>0,Ut=we.get("symbol-sort-key");if(this.features=[],!(!vt&&!yt)){for(var ir=B.iconDependencies,tr=B.glyphDependencies,xr=B.availableImages,Ur=new mi(this.zoom),hn=0,an=C;hn<an.length;hn+=1){var Rn=an[hn],Mn=Rn.feature,Dn=Rn.id,Vn=Rn.index,qn=Rn.sourceLayerIndex,da=pe._featureFilter.needGeometry,va={type:Mn.type,id:Dn,properties:Mn.properties,geometry:da?to(Mn):[]};if(!!pe._featureFilter.filter(Ur,va,te)){da||(va.geometry=to(Mn));var Wa=void 0;if(vt){var Da=pe.getValueAndResolveTokens("text-field",va,te,xr),Oa=Zi.factory(Da);lw(Oa)&&(this.hasRTLText=!0),(!this.hasRTLText||Po()==="unavailable"||this.hasRTLText&&ii.isParsed())&&(Wa=v2(Oa,pe,va))}var fi=void 0;if(yt){var Ua=pe.getValueAndResolveTokens("icon-image",va,te,xr);Ua instanceof Ro?fi=Ua:fi=Ro.fromString(Ua)}if(!(!Wa&&!fi)){var Ha=this.sortFeaturesByKey?Ut.evaluate(va,{},te):void 0,bi={id:Dn,text:Wa,icon:fi,index:Vn,sourceLayerIndex:qn,geometry:to(Mn),properties:Mn.properties,type:ow[Mn.type],sortKey:Ha};if(this.features.push(bi),fi&&(ir[fi.name]=!0),Wa){var ci=Me.evaluate(va,{},te).join(","),Vi=we.get("text-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_u.vertical)>=0;for(var so=0,Hi=Wa.sections;so<Hi.length;so+=1){var Gi=Hi[so];if(Gi.image)ir[Gi.image.name]=!0;else{var Ni=Cr(Wa.toString()),mo=Gi.fontStack||ci,To=tr[mo]=tr[mo]||{};this.calculateGlyphDependencies(Gi.text,To,Vi,this.allowVerticalPlacement,Ni)}}}}}}we.get("symbol-placement")==="line"&&(this.features=p2(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Go,Zo){return Go.sortKey-Zo.sortKey})}},oo.prototype.update=function(C,B,te){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,B,this.layers,te),this.icon.programConfigurations.updatePaintArrays(C,B,this.layers,te))},oo.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},oo.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},oo.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},oo.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},oo.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},oo.prototype.addToLineVertexArray=function(C,B){var te=this.lineVertexArray.length;if(C.segment!==void 0){for(var pe=C.dist(B[C.segment+1]),we=C.dist(B[C.segment]),Me={},Ne=C.segment+1;Ne<B.length;Ne++)Me[Ne]={x:B[Ne].x,y:B[Ne].y,tileUnitDistanceFromAnchor:pe},Ne<B.length-1&&(pe+=B[Ne+1].dist(B[Ne]));for(var rt=C.segment||0;rt>=0;rt--)Me[rt]={x:B[rt].x,y:B[rt].y,tileUnitDistanceFromAnchor:we},rt>0&&(we+=B[rt-1].dist(B[rt]));for(var vt=0;vt<B.length;vt++){var yt=Me[vt];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:te,lineLength:this.lineVertexArray.length-te}},oo.prototype.addSymbols=function(C,B,te,pe,we,Me,Ne,rt,vt,yt,Ut,ir){for(var tr=C.indexArray,xr=C.layoutVertexArray,Ur=C.segments.prepareSegment(4*B.length,xr,tr,Me.sortKey),hn=this.glyphOffsetArray.length,an=Ur.vertexLength,Rn=this.allowVerticalPlacement&&Ne===_u.vertical?Math.PI/2:0,Mn=Me.text&&Me.text.sections,Dn=0;Dn<B.length;Dn++){var Vn=B[Dn],qn=Vn.tl,da=Vn.tr,va=Vn.bl,Wa=Vn.br,Da=Vn.tex,Oa=Vn.pixelOffsetTL,fi=Vn.pixelOffsetBR,Ua=Vn.minFontScaleX,Ha=Vn.minFontScaleY,bi=Vn.glyphOffset,ci=Vn.isSDF,Vi=Vn.sectionIndex,so=Ur.vertexLength,Hi=bi[1];kp(xr,rt.x,rt.y,qn.x,Hi+qn.y,Da.x,Da.y,te,ci,Oa.x,Oa.y,Ua,Ha),kp(xr,rt.x,rt.y,da.x,Hi+da.y,Da.x+Da.w,Da.y,te,ci,fi.x,Oa.y,Ua,Ha),kp(xr,rt.x,rt.y,va.x,Hi+va.y,Da.x,Da.y+Da.h,te,ci,Oa.x,fi.y,Ua,Ha),kp(xr,rt.x,rt.y,Wa.x,Hi+Wa.y,Da.x+Da.w,Da.y+Da.h,te,ci,fi.x,fi.y,Ua,Ha),s0(C.dynamicLayoutVertexArray,rt,Rn),tr.emplaceBack(so,so+1,so+2),tr.emplaceBack(so+1,so+2,so+3),Ur.vertexLength+=4,Ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bi[0]),(Dn===B.length-1||Vi!==B[Dn+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(xr.length,Me,Me.index,{},ir,Mn&&Mn[Vi])}C.placedSymbolArray.emplaceBack(rt.x,rt.y,hn,this.glyphOffsetArray.length-hn,an,vt,yt,rt.segment,te?te[0]:0,te?te[1]:0,pe[0],pe[1],Ne,0,!1,0,Ut)},oo.prototype._addCollisionDebugVertex=function(C,B,te,pe,we,Me){return B.emplaceBack(0,0),C.emplaceBack(te.x,te.y,pe,we,Math.round(Me.x),Math.round(Me.y))},oo.prototype.addCollisionDebugVertices=function(C,B,te,pe,we,Me,Ne){var rt=we.segments.prepareSegment(4,we.layoutVertexArray,we.indexArray),vt=rt.vertexLength,yt=we.layoutVertexArray,Ut=we.collisionVertexArray,ir=Ne.anchorX,tr=Ne.anchorY;this._addCollisionDebugVertex(yt,Ut,Me,ir,tr,new v(C,B)),this._addCollisionDebugVertex(yt,Ut,Me,ir,tr,new v(te,B)),this._addCollisionDebugVertex(yt,Ut,Me,ir,tr,new v(te,pe)),this._addCollisionDebugVertex(yt,Ut,Me,ir,tr,new v(C,pe)),rt.vertexLength+=4;var xr=we.indexArray;xr.emplaceBack(vt,vt+1),xr.emplaceBack(vt+1,vt+2),xr.emplaceBack(vt+2,vt+3),xr.emplaceBack(vt+3,vt),rt.primitiveLength+=4},oo.prototype.addDebugCollisionBoxes=function(C,B,te,pe){for(var we=C;we<B;we++){var Me=this.collisionBoxArray.get(we),Ne=Me.x1,rt=Me.y1,vt=Me.x2,yt=Me.y2;this.addCollisionDebugVertices(Ne,rt,vt,yt,pe?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,te)}},oo.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Iv(ph,my.members,Bf),this.iconCollisionBox=new Iv(ph,my.members,Bf);for(var C=0;C<this.symbolInstances.length;C++){var B=this.symbolInstances.get(C);this.addDebugCollisionBoxes(B.textBoxStartIndex,B.textBoxEndIndex,B,!0),this.addDebugCollisionBoxes(B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B,!0),this.addDebugCollisionBoxes(B.iconBoxStartIndex,B.iconBoxEndIndex,B,!1),this.addDebugCollisionBoxes(B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex,B,!1)}},oo.prototype._deserializeCollisionBoxesForSymbol=function(C,B,te,pe,we,Me,Ne,rt,vt){for(var yt={},Ut=B;Ut<te;Ut++){var ir=C.get(Ut);yt.textBox={x1:ir.x1,y1:ir.y1,x2:ir.x2,y2:ir.y2,anchorPointX:ir.anchorPointX,anchorPointY:ir.anchorPointY},yt.textFeatureIndex=ir.featureIndex;break}for(var tr=pe;tr<we;tr++){var xr=C.get(tr);yt.verticalTextBox={x1:xr.x1,y1:xr.y1,x2:xr.x2,y2:xr.y2,anchorPointX:xr.anchorPointX,anchorPointY:xr.anchorPointY},yt.verticalTextFeatureIndex=xr.featureIndex;break}for(var Ur=Me;Ur<Ne;Ur++){var hn=C.get(Ur);yt.iconBox={x1:hn.x1,y1:hn.y1,x2:hn.x2,y2:hn.y2,anchorPointX:hn.anchorPointX,anchorPointY:hn.anchorPointY},yt.iconFeatureIndex=hn.featureIndex;break}for(var an=rt;an<vt;an++){var Rn=C.get(an);yt.verticalIconBox={x1:Rn.x1,y1:Rn.y1,x2:Rn.x2,y2:Rn.y2,anchorPointX:Rn.anchorPointX,anchorPointY:Rn.anchorPointY},yt.verticalIconFeatureIndex=Rn.featureIndex;break}return yt},oo.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var B=0;B<this.symbolInstances.length;B++){var te=this.symbolInstances.get(B);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,te.textBoxStartIndex,te.textBoxEndIndex,te.verticalTextBoxStartIndex,te.verticalTextBoxEndIndex,te.iconBoxStartIndex,te.iconBoxEndIndex,te.verticalIconBoxStartIndex,te.verticalIconBoxEndIndex))}},oo.prototype.hasTextData=function(){return this.text.segments.get().length>0},oo.prototype.hasIconData=function(){return this.icon.segments.get().length>0},oo.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},oo.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},oo.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},oo.prototype.addIndicesForPlacedSymbol=function(C,B){for(var te=C.placedSymbolArray.get(B),pe=te.vertexStartIndex+te.numGlyphs*4,we=te.vertexStartIndex;we<pe;we+=4)C.indexArray.emplaceBack(we,we+1,we+2),C.indexArray.emplaceBack(we+1,we+2,we+3)},oo.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var B=Math.sin(C),te=Math.cos(C),pe=[],we=[],Me=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Me.push(Ne);var rt=this.symbolInstances.get(Ne);pe.push(Math.round(B*rt.anchorX+te*rt.anchorY)|0),we.push(rt.featureIndex)}return Me.sort(function(vt,yt){return pe[vt]-pe[yt]||we[yt]-we[vt]}),Me},oo.prototype.addToSortKeyRanges=function(C,B){var te=this.sortKeyRanges[this.sortKeyRanges.length-1];te&&te.sortKey===B?te.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:B,symbolInstanceStart:C,symbolInstanceEnd:C+1})},oo.prototype.sortFeatures=function(C){var B=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var te=0,pe=this.symbolInstanceIndexes;te<pe.length;te+=1){var we=pe[te],Me=this.symbolInstances.get(we);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Ne,rt,vt){Ne>=0&&vt.indexOf(Ne)===rt&&B.addIndicesForPlacedSymbol(B.text,Ne)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Be("SymbolBucket",oo,{omit:["layers","collisionBoxArray","features","compareText"]}),oo.MAX_GLYPHS=65535,oo.addDynamicAttributes=s0;function uw(k,C){return C.replace(/{([^{}]+)}/g,function(B,te){return te in k?String(k[te]):""})}var cw=new co({"symbol-placement":new Za(Yt.layout_symbol["symbol-placement"]),"symbol-spacing":new Za(Yt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Za(Yt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new oi(Yt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Za(Yt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Za(Yt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Za(Yt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Za(Yt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Za(Yt.layout_symbol["icon-rotation-alignment"]),"icon-size":new oi(Yt.layout_symbol["icon-size"]),"icon-text-fit":new Za(Yt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Za(Yt.layout_symbol["icon-text-fit-padding"]),"icon-image":new oi(Yt.layout_symbol["icon-image"]),"icon-rotate":new oi(Yt.layout_symbol["icon-rotate"]),"icon-padding":new Za(Yt.layout_symbol["icon-padding"]),"icon-keep-upright":new Za(Yt.layout_symbol["icon-keep-upright"]),"icon-offset":new oi(Yt.layout_symbol["icon-offset"]),"icon-anchor":new oi(Yt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Za(Yt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Za(Yt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Za(Yt.layout_symbol["text-rotation-alignment"]),"text-field":new oi(Yt.layout_symbol["text-field"]),"text-font":new oi(Yt.layout_symbol["text-font"]),"text-size":new oi(Yt.layout_symbol["text-size"]),"text-max-width":new oi(Yt.layout_symbol["text-max-width"]),"text-line-height":new Za(Yt.layout_symbol["text-line-height"]),"text-letter-spacing":new oi(Yt.layout_symbol["text-letter-spacing"]),"text-justify":new oi(Yt.layout_symbol["text-justify"]),"text-radial-offset":new oi(Yt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Za(Yt.layout_symbol["text-variable-anchor"]),"text-anchor":new oi(Yt.layout_symbol["text-anchor"]),"text-max-angle":new Za(Yt.layout_symbol["text-max-angle"]),"text-writing-mode":new Za(Yt.layout_symbol["text-writing-mode"]),"text-rotate":new oi(Yt.layout_symbol["text-rotate"]),"text-padding":new Za(Yt.layout_symbol["text-padding"]),"text-keep-upright":new Za(Yt.layout_symbol["text-keep-upright"]),"text-transform":new oi(Yt.layout_symbol["text-transform"]),"text-offset":new oi(Yt.layout_symbol["text-offset"]),"text-allow-overlap":new Za(Yt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Za(Yt.layout_symbol["text-ignore-placement"]),"text-optional":new Za(Yt.layout_symbol["text-optional"])}),fw=new co({"icon-opacity":new oi(Yt.paint_symbol["icon-opacity"]),"icon-color":new oi(Yt.paint_symbol["icon-color"]),"icon-halo-color":new oi(Yt.paint_symbol["icon-halo-color"]),"icon-halo-width":new oi(Yt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new oi(Yt.paint_symbol["icon-halo-blur"]),"icon-translate":new Za(Yt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Za(Yt.paint_symbol["icon-translate-anchor"]),"text-opacity":new oi(Yt.paint_symbol["text-opacity"]),"text-color":new oi(Yt.paint_symbol["text-color"],{runtimeType:Yn,getOverride:function(k){return k.textColor},hasOverride:function(k){return!!k.textColor}}),"text-halo-color":new oi(Yt.paint_symbol["text-halo-color"]),"text-halo-width":new oi(Yt.paint_symbol["text-halo-width"]),"text-halo-blur":new oi(Yt.paint_symbol["text-halo-blur"]),"text-translate":new Za(Yt.paint_symbol["text-translate"]),"text-translate-anchor":new Za(Yt.paint_symbol["text-translate-anchor"])}),l0={paint:fw,layout:cw},Ih=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:_r,this.defaultValue=C};Ih.prototype.evaluate=function(C){if(C.formattedSection){var B=this.defaultValue.property.overrides;if(B&&B.hasOverride(C.formattedSection))return B.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},Ih.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var B=this.defaultValue.value;C(B._styleExpression.expression)}},Ih.prototype.outputDefined=function(){return!1},Ih.prototype.serialize=function(){return null},Be("FormatSectionOverride",Ih,{omit:["defaultValue"]});var hw=function(k){function C(B){k.call(this,B,l0)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,pe){if(k.prototype.recalculate.call(this,te,pe),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var we=this.layout.get("text-writing-mode");if(we){for(var Me=[],Ne=0,rt=we;Ne<rt.length;Ne+=1){var vt=rt[Ne];Me.indexOf(vt)<0&&Me.push(vt)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function(te,pe,we,Me){var Ne=this.layout.get(te).evaluate(pe,{},we,Me),rt=this._unevaluatedLayout._values[te];return!rt.isDataDriven()&&!Lo(rt.value)&&Ne?uw(pe.properties,Ne):Ne},C.prototype.createBucket=function(te){return new oo(te)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var te=0,pe=l0.paint.overridableProperties;te<pe.length;te+=1){var we=pe[te];if(!!C.hasPaintOverride(this.layout,we)){var Me=this.paint.get(we),Ne=new Ih(Me),rt=new Fo(Ne,Me.property.specification),vt=null;Me.value.kind==="constant"||Me.value.kind==="source"?vt=new du("source",rt):vt=new gs("composite",rt,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[we]=new io(Me.property,vt,Me.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,we){return!this.layout||pe.isDataDriven()||we.isDataDriven()?!1:C.hasPaintOverride(this.layout,te)},C.hasPaintOverride=function(te,pe){var we=te.get("text-field"),Me=l0.paint.properties[pe],Ne=!1,rt=function(Ut){for(var ir=0,tr=Ut;ir<tr.length;ir+=1){var xr=tr[ir];if(Me.overrides&&Me.overrides.hasOverride(xr)){Ne=!0;return}}};if(we.value.kind==="constant"&&we.value.value instanceof Zi)rt(we.value.value.sections);else if(we.value.kind==="source"){var vt=function(Ut){if(!Ne)if(Ut instanceof lo&&Fi(Ut.value)===Ma){var ir=Ut.value;rt(ir.sections)}else Ut instanceof us?rt(Ut.sections):Ut.eachChild(vt)},yt=we.value;yt._styleExpression&&vt(yt._styleExpression.expression)}return Ne},C}(Zs),vw=new co({"background-color":new Za(Yt.paint_background["background-color"]),"background-pattern":new _o(Yt.paint_background["background-pattern"]),"background-opacity":new Za(Yt.paint_background["background-opacity"])}),pw={paint:vw},dw=function(k){function C(B){k.call(this,B,pw)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(Zs),gw=new co({"raster-opacity":new Za(Yt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Za(Yt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Za(Yt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Za(Yt.paint_raster["raster-brightness-max"]),"raster-saturation":new Za(Yt.paint_raster["raster-saturation"]),"raster-contrast":new Za(Yt.paint_raster["raster-contrast"]),"raster-resampling":new Za(Yt.paint_raster["raster-resampling"]),"raster-fade-duration":new Za(Yt.paint_raster["raster-fade-duration"])}),yw={paint:gw},mw=function(k){function C(B){k.call(this,B,yw)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(Zs);function xw(k){var C=[],B=k.id;return B===void 0&&C.push({message:"layers."+B+': missing required property "id"'}),k.render===void 0&&C.push({message:"layers."+B+': missing required method "render"'}),k.renderingMode&&k.renderingMode!=="2d"&&k.renderingMode!=="3d"&&C.push({message:"layers."+B+': property "renderingMode" must be either "2d" or "3d"'}),C}var bw=function(k){function C(B){k.call(this,B,{}),this.implementation=B}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function(te){this.implementation.onAdd&&this.implementation.onAdd(te,te.painter.context.gl)},C.prototype.onRemove=function(te){this.implementation.onRemove&&this.implementation.onRemove(te,te.painter.context.gl)},C}(Zs),_w={circle:Jb,heatmap:e_,hillshade:n_,fill:k_,"fill-extrusion":Z_,line:s2,symbol:hw,background:dw,raster:mw};function ww(k){return k.type==="custom"?new bw(k):new _w[k.type](k)}var Wy=self.HTMLImageElement,Xy=self.HTMLCanvasElement,jy=self.HTMLVideoElement,Zy=self.ImageData,Cp=self.ImageBitmap,Yf=function(C,B,te,pe){this.context=C,this.format=te,this.texture=C.gl.createTexture(),this.update(B,pe)};Yf.prototype.update=function(C,B,te){var pe=C.width,we=C.height,Me=(!this.size||this.size[0]!==pe||this.size[1]!==we)&&!te,Ne=this,rt=Ne.context,vt=rt.gl;if(this.useMipmap=Boolean(B&&B.useMipmap),vt.bindTexture(vt.TEXTURE_2D,this.texture),rt.pixelStoreUnpackFlipY.set(!1),rt.pixelStoreUnpack.set(1),rt.pixelStoreUnpackPremultiplyAlpha.set(this.format===vt.RGBA&&(!B||B.premultiply!==!1)),Me)this.size=[pe,we],C instanceof Wy||C instanceof Xy||C instanceof jy||C instanceof Zy||Cp&&C instanceof Cp?vt.texImage2D(vt.TEXTURE_2D,0,this.format,this.format,vt.UNSIGNED_BYTE,C):vt.texImage2D(vt.TEXTURE_2D,0,this.format,pe,we,0,this.format,vt.UNSIGNED_BYTE,C.data);else{var yt=te||{x:0,y:0},Ut=yt.x,ir=yt.y;C instanceof Wy||C instanceof Xy||C instanceof jy||C instanceof Zy||Cp&&C instanceof Cp?vt.texSubImage2D(vt.TEXTURE_2D,0,Ut,ir,vt.RGBA,vt.UNSIGNED_BYTE,C):vt.texSubImage2D(vt.TEXTURE_2D,0,Ut,ir,pe,we,vt.RGBA,vt.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&vt.generateMipmap(vt.TEXTURE_2D)},Yf.prototype.bind=function(C,B,te){var pe=this,we=pe.context,Me=we.gl;Me.bindTexture(Me.TEXTURE_2D,this.texture),te===Me.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(te=Me.LINEAR),C!==this.filter&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,C),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,te||C),this.filter=C),B!==this.wrap&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,B),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,B),this.wrap=B)},Yf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Yf.prototype.destroy=function(){var C=this.context,B=C.gl;B.deleteTexture(this.texture),this.texture=null};var u0=function(C){var B=this;this._callback=C,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){B._triggered=!1,B._callback()})};u0.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},u0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Fh=function(C,B,te){this.target=C,this.parent=B,this.mapId=te,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},E(["receive","process"],this),this.invoker=new u0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?C:self};Fh.prototype.send=function(C,B,te,pe,we){var Me=this;we===void 0&&(we=!1);var Ne=Math.round(Math.random()*1e18).toString(36).substring(0,10);te&&(this.callbacks[Ne]=te);var rt=ae(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:C,hasCallback:!!te,targetMapId:pe,mustQueue:we,sourceMapId:this.mapId,data:It(B,rt)},rt),{cancel:function(){te&&delete Me.callbacks[Ne],Me.target.postMessage({id:Ne,type:"<cancel>",targetMapId:pe,sourceMapId:Me.mapId})}}},Fh.prototype.receive=function(C){var B=C.data,te=B.id;if(!!te&&!(B.targetMapId&&this.mapId!==B.targetMapId))if(B.type==="<cancel>"){delete this.tasks[te];var pe=this.cancelCallbacks[te];delete this.cancelCallbacks[te],pe&&pe()}else ee()||B.mustQueue?(this.tasks[te]=B,this.taskQueue.push(te),this.invoker.trigger()):this.processTask(te,B)},Fh.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),B=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),B&&this.processTask(C,B)}},Fh.prototype.processTask=function(C,B){var te=this;if(B.type==="<response>"){var pe=this.callbacks[C];delete this.callbacks[C],pe&&(B.error?pe(qt(B.error)):pe(null,qt(B.data)))}else{var we=!1,Me=ae(this.globalScope)?void 0:[],Ne=B.hasCallback?function(ir,tr){we=!0,delete te.cancelCallbacks[C],te.target.postMessage({id:C,type:"<response>",sourceMapId:te.mapId,error:ir?It(ir):null,data:It(tr,Me)},Me)}:function(ir){we=!0},rt=null,vt=qt(B.data);if(this.parent[B.type])rt=this.parent[B.type](B.sourceMapId,vt,Ne);else if(this.parent.getWorkerSource){var yt=B.type.split("."),Ut=this.parent.getWorkerSource(B.sourceMapId,yt[0],vt.source);rt=Ut[yt[1]](vt,Ne)}else Ne(new Error("Could not find function "+B.type));!we&&rt&&rt.cancel&&(this.cancelCallbacks[C]=rt.cancel)}},Fh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function Tw(k,C,B){C=Math.pow(2,B)-C-1;var te=Ky(k*256,C*256,B),pe=Ky((k+1)*256,(C+1)*256,B);return te[0]+","+te[1]+","+pe[0]+","+pe[1]}function Ky(k,C,B){var te=2*Math.PI*6378137/256/Math.pow(2,B),pe=k*te-2*Math.PI*6378137/2,we=C*te-2*Math.PI*6378137/2;return[pe,we]}var os=function(C,B){C&&(B?this.setSouthWest(C).setNorthEast(B):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};os.prototype.setNorthEast=function(C){return this._ne=C instanceof Do?new Do(C.lng,C.lat):Do.convert(C),this},os.prototype.setSouthWest=function(C){return this._sw=C instanceof Do?new Do(C.lng,C.lat):Do.convert(C),this},os.prototype.extend=function(C){var B=this._sw,te=this._ne,pe,we;if(C instanceof Do)pe=C,we=C;else if(C instanceof os){if(pe=C._sw,we=C._ne,!pe||!we)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var Me=C;return this.extend(os.convert(Me))}else{var Ne=C;return this.extend(Do.convert(Ne))}return this}return!B&&!te?(this._sw=new Do(pe.lng,pe.lat),this._ne=new Do(we.lng,we.lat)):(B.lng=Math.min(pe.lng,B.lng),B.lat=Math.min(pe.lat,B.lat),te.lng=Math.max(we.lng,te.lng),te.lat=Math.max(we.lat,te.lat)),this},os.prototype.getCenter=function(){return new Do((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},os.prototype.getSouthWest=function(){return this._sw},os.prototype.getNorthEast=function(){return this._ne},os.prototype.getNorthWest=function(){return new Do(this.getWest(),this.getNorth())},os.prototype.getSouthEast=function(){return new Do(this.getEast(),this.getSouth())},os.prototype.getWest=function(){return this._sw.lng},os.prototype.getSouth=function(){return this._sw.lat},os.prototype.getEast=function(){return this._ne.lng},os.prototype.getNorth=function(){return this._ne.lat},os.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},os.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},os.prototype.isEmpty=function(){return!(this._sw&&this._ne)},os.prototype.contains=function(C){var B=Do.convert(C),te=B.lng,pe=B.lat,we=this._sw.lat<=pe&&pe<=this._ne.lat,Me=this._sw.lng<=te&&te<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=te&&te>=this._ne.lng),we&&Me},os.convert=function(C){return!C||C instanceof os?C:new os(C)};var Jy=63710088e-1,Do=function(C,B){if(isNaN(C)||isNaN(B))throw new Error("Invalid LngLat object: ("+C+", "+B+")");if(this.lng=+C,this.lat=+B,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Do.prototype.wrap=function(){return new Do(m(this.lng,-180,180),this.lat)},Do.prototype.toArray=function(){return[this.lng,this.lat]},Do.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Do.prototype.distanceTo=function(C){var B=Math.PI/180,te=this.lat*B,pe=C.lat*B,we=Math.sin(te)*Math.sin(pe)+Math.cos(te)*Math.cos(pe)*Math.cos((C.lng-this.lng)*B),Me=Jy*Math.acos(Math.min(we,1));return Me},Do.prototype.toBounds=function(C){C===void 0&&(C=0);var B=40075017,te=360*C/B,pe=te/Math.cos(Math.PI/180*this.lat);return new os(new Do(this.lng-pe,this.lat-te),new Do(this.lng+pe,this.lat+te))},Do.convert=function(C){if(C instanceof Do)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new Do(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new Do(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var $y=2*Math.PI*Jy;function Qy(k){return $y*Math.cos(k*Math.PI/180)}function qy(k){return(180+k)/360}function em(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function tm(k,C){return k/Qy(C)}function Aw(k){return k*360-180}function c0(k){var C=180-k*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function Mw(k,C){return k*Qy(c0(C))}function Ew(k){return 1/Math.cos(k*Math.PI/180)}var Wf=function(C,B,te){te===void 0&&(te=0),this.x=+C,this.y=+B,this.z=+te};Wf.fromLngLat=function(C,B){B===void 0&&(B=0);var te=Do.convert(C);return new Wf(qy(te.lng),em(te.lat),tm(B,te.lat))},Wf.prototype.toLngLat=function(){return new Do(Aw(this.x),c0(this.y))},Wf.prototype.toAltitude=function(){return Mw(this.z,this.y)},Wf.prototype.meterInMercatorCoordinateUnits=function(){return 1/$y*Ew(c0(this.y))};var Xf=function(C,B,te){this.z=C,this.x=B,this.y=te,this.key=Fv(0,C,C,B,te)};Xf.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},Xf.prototype.url=function(C,B){var te=Tw(this.x,this.y,this.z),pe=Sw(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(B==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pe).replace("{bbox-epsg-3857}",te)},Xf.prototype.getTilePoint=function(C){var B=Math.pow(2,this.z);return new v((C.x*B-this.x)*Ja,(C.y*B-this.y)*Ja)},Xf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var rm=function(C,B){this.wrap=C,this.canonical=B,this.key=Fv(C,B.z,B.z,B.x,B.y)},ss=function(C,B,te,pe,we){this.overscaledZ=C,this.wrap=B,this.canonical=new Xf(te,+pe,+we),this.key=Fv(B,C,te,pe,we)};ss.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},ss.prototype.scaledTo=function(C){var B=this.canonical.z-C;return C>this.canonical.z?new ss(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ss(C,this.wrap,C,this.canonical.x>>B,this.canonical.y>>B)},ss.prototype.calculateScaledKey=function(C,B){var te=this.canonical.z-C;return C>this.canonical.z?Fv(this.wrap*+B,C,this.canonical.z,this.canonical.x,this.canonical.y):Fv(this.wrap*+B,C,C,this.canonical.x>>te,this.canonical.y>>te)},ss.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var B=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>B&&C.canonical.y===this.canonical.y>>B},ss.prototype.children=function(C){if(this.overscaledZ>=C)return[new ss(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var B=this.canonical.z+1,te=this.canonical.x*2,pe=this.canonical.y*2;return[new ss(B,this.wrap,B,te,pe),new ss(B,this.wrap,B,te+1,pe),new ss(B,this.wrap,B,te,pe+1),new ss(B,this.wrap,B,te+1,pe+1)]},ss.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},ss.prototype.wrapped=function(){return new ss(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ss.prototype.unwrapTo=function(C){return new ss(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},ss.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ss.prototype.toUnwrapped=function(){return new rm(this.wrap,this.canonical)},ss.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ss.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new Wf(C.x-this.wrap,C.y))};function Fv(k,C,B,te,pe){k*=2,k<0&&(k=k*-1-1);var we=1<<B;return(we*we*k+we*pe+te).toString(36)+B.toString(36)+C.toString(36)}function Sw(k,C,B){for(var te="",pe,we=k;we>0;we--)pe=1<<we-1,te+=(C&pe?1:0)+(B&pe?2:0);return te}Be("CanonicalTileID",Xf),Be("OverscaledTileID",ss,{omit:["posMatrix"]});var Xc=function(C,B,te){if(this.uid=C,B.height!==B.width)throw new RangeError("DEM tiles must be square");if(te&&te!=="mapbox"&&te!=="terrarium")return O('"'+te+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=B.height;var pe=this.dim=B.height-2;this.data=new Uint32Array(B.data.buffer),this.encoding=te||"mapbox";for(var we=0;we<pe;we++)this.data[this._idx(-1,we)]=this.data[this._idx(0,we)],this.data[this._idx(pe,we)]=this.data[this._idx(pe-1,we)],this.data[this._idx(we,-1)]=this.data[this._idx(we,0)],this.data[this._idx(we,pe)]=this.data[this._idx(we,pe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe-1,0)],this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe-1)],this.data[this._idx(pe,pe)]=this.data[this._idx(pe-1,pe-1)]};Xc.prototype.get=function(C,B){var te=new Uint8Array(this.data.buffer),pe=this._idx(C,B)*4,we=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return we(te[pe],te[pe+1],te[pe+2])},Xc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Xc.prototype._idx=function(C,B){if(C<-1||C>=this.dim+1||B<-1||B>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(B+1)*this.stride+(C+1)},Xc.prototype._unpackMapbox=function(C,B,te){return(C*256*256+B*256+te)/10-1e4},Xc.prototype._unpackTerrarium=function(C,B,te){return C*256+B+te/256-32768},Xc.prototype.getPixels=function(){return new Hl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Xc.prototype.backfillBorder=function(C,B,te){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var pe=B*this.dim,we=B*this.dim+this.dim,Me=te*this.dim,Ne=te*this.dim+this.dim;switch(B){case-1:pe=we-1;break;case 1:we=pe+1;break}switch(te){case-1:Me=Ne-1;break;case 1:Ne=Me+1;break}for(var rt=-B*this.dim,vt=-te*this.dim,yt=Me;yt<Ne;yt++)for(var Ut=pe;Ut<we;Ut++)this.data[this._idx(Ut,yt)]=C.data[this._idx(Ut+rt,yt+vt)]},Be("DEMData",Xc);function kw(k,C){var B={};if(!C)return B;for(var te=function(){var Me=we[pe],Ne=Me.layerIds.map(function(Ut){return C.getLayer(Ut)}).filter(Boolean);if(Ne.length!==0){Me.layers=Ne,Me.stateDependentLayerIds&&(Me.stateDependentLayers=Me.stateDependentLayerIds.map(function(Ut){return Ne.filter(function(ir){return ir.id===Ut})[0]}));for(var rt=0,vt=Ne;rt<vt.length;rt+=1){var yt=vt[rt];B[yt.id]=Me}}},pe=0,we=k;pe<we.length;pe+=1)te();return B}var Lp=function(C){this._stringToNumber={},this._numberToString=[];for(var B=0;B<C.length;B++){var te=C[B];this._stringToNumber[te]=B,this._numberToString[B]=te}};Lp.prototype.encode=function(C){return this._stringToNumber[C]},Lp.prototype.decode=function(C){return this._numberToString[C]};var Pp=function(C,B,te,pe,we){this.type="Feature",this._vectorTileFeature=C,C._z=B,C._x=te,C._y=pe,this.properties=C.properties,this.id=we},f0={geometry:{configurable:!0}};f0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},f0.geometry.set=function(k){this._geometry=k},Pp.prototype.toJSON=function(){var C={geometry:this.geometry};for(var B in this)B==="_geometry"||B==="_vectorTileFeature"||(C[B]=this[B]);return C},Object.defineProperties(Pp.prototype,f0);var zh=function(){this.state={},this.stateChanges={},this.deletedStates={}};zh.prototype.updateState=function(C,B,te){var pe=String(B);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][pe]=this.stateChanges[C][pe]||{},M(this.stateChanges[C][pe],te),this.deletedStates[C]===null){this.deletedStates[C]={};for(var we in this.state[C])we!==pe&&(this.deletedStates[C][we]=null)}else{var Me=this.deletedStates[C]&&this.deletedStates[C][pe]===null;if(Me){this.deletedStates[C][pe]={};for(var Ne in this.state[C][pe])te[Ne]||(this.deletedStates[C][pe][Ne]=null)}else for(var rt in te){var vt=this.deletedStates[C]&&this.deletedStates[C][pe]&&this.deletedStates[C][pe][rt]===null;vt&&delete this.deletedStates[C][pe][rt]}}},zh.prototype.removeFeatureState=function(C,B,te){var pe=this.deletedStates[C]===null;if(!pe){var we=String(B);if(this.deletedStates[C]=this.deletedStates[C]||{},te&&B!==void 0)this.deletedStates[C][we]!==null&&(this.deletedStates[C][we]=this.deletedStates[C][we]||{},this.deletedStates[C][we][te]=null);else if(B!==void 0){var Me=this.stateChanges[C]&&this.stateChanges[C][we];if(Me){this.deletedStates[C][we]={};for(te in this.stateChanges[C][we])this.deletedStates[C][we][te]=null}else this.deletedStates[C][we]=null}else this.deletedStates[C]=null}},zh.prototype.getState=function(C,B){var te=String(B),pe=this.state[C]||{},we=this.stateChanges[C]||{},Me=M({},pe[te],we[te]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Ne=this.deletedStates[C][B];if(Ne===null)return{};for(var rt in Ne)delete Me[rt]}return Me},zh.prototype.initializeTileState=function(C,B){C.setFeatureState(this.state,B)},zh.prototype.coalesceChanges=function(C,B){var te={};for(var pe in this.stateChanges){this.state[pe]=this.state[pe]||{};var we={};for(var Me in this.stateChanges[pe])this.state[pe][Me]||(this.state[pe][Me]={}),M(this.state[pe][Me],this.stateChanges[pe][Me]),we[Me]=this.state[pe][Me];te[pe]=we}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var rt={};if(this.deletedStates[Ne]===null)for(var vt in this.state[Ne])rt[vt]={},this.state[Ne][vt]={};else for(var yt in this.deletedStates[Ne]){var Ut=this.deletedStates[Ne][yt]===null;if(Ut)this.state[Ne][yt]={};else for(var ir=0,tr=Object.keys(this.deletedStates[Ne][yt]);ir<tr.length;ir+=1){var xr=tr[ir];delete this.state[Ne][yt][xr]}rt[yt]=this.state[Ne][yt]}te[Ne]=te[Ne]||{},M(te[Ne],rt)}if(this.stateChanges={},this.deletedStates={},Object.keys(te).length!==0)for(var Ur in C){var hn=C[Ur];hn.setFeatureState(te,B)}};var jc=function(C,B){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Ji(Ja,16,0),this.grid3D=new Ji(Ja,16,0),this.featureIndexArray=new bv,this.promoteId=B};jc.prototype.insert=function(C,B,te,pe,we,Me){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(te,pe,we);for(var rt=Me?this.grid3D:this.grid,vt=0;vt<B.length;vt++){for(var yt=B[vt],Ut=[1/0,1/0,-1/0,-1/0],ir=0;ir<yt.length;ir++){var tr=yt[ir];Ut[0]=Math.min(Ut[0],tr.x),Ut[1]=Math.min(Ut[1],tr.y),Ut[2]=Math.max(Ut[2],tr.x),Ut[3]=Math.max(Ut[3],tr.y)}Ut[0]<Ja&&Ut[1]<Ja&&Ut[2]>=0&&Ut[3]>=0&&rt.insert(Ne,Ut[0],Ut[1],Ut[2],Ut[3])}},jc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ah.VectorTile(new bp(this.rawTileData)).layers,this.sourceLayerCoder=new Lp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},jc.prototype.query=function(C,B,te,pe){var we=this;this.loadVTLayers();for(var Me=C.params||{},Ne=Ja/C.tileSize/C.scale,rt=Qu(Me.filter),vt=C.queryGeometry,yt=C.queryPadding*Ne,Ut=am(vt),ir=this.grid.query(Ut.minX-yt,Ut.minY-yt,Ut.maxX+yt,Ut.maxY+yt),tr=am(C.cameraQueryGeometry),xr=this.grid3D.query(tr.minX-yt,tr.minY-yt,tr.maxX+yt,tr.maxY+yt,function(qn,da,va,Wa){return Ic(C.cameraQueryGeometry,qn-yt,da-yt,va+yt,Wa+yt)}),Ur=0,hn=xr;Ur<hn.length;Ur+=1){var an=hn[Ur];ir.push(an)}ir.sort(Cw);for(var Rn={},Mn,Dn=function(qn){var da=ir[qn];if(da!==Mn){Mn=da;var va=we.featureIndexArray.get(da),Wa=null;we.loadMatchingFeature(Rn,va.bucketIndex,va.sourceLayerIndex,va.featureIndex,rt,Me.layers,Me.availableImages,B,te,pe,function(Da,Oa,fi){return Wa||(Wa=to(Da)),Oa.queryIntersectsFeature(vt,Da,fi,Wa,we.z,C.transform,Ne,C.pixelPosMatrix)})}},Vn=0;Vn<ir.length;Vn++)Dn(Vn);return Rn},jc.prototype.loadMatchingFeature=function(C,B,te,pe,we,Me,Ne,rt,vt,yt,Ut){var ir=this.bucketLayerIDs[B];if(!(Me&&!D(Me,ir))){var tr=this.sourceLayerCoder.decode(te),xr=this.vtLayers[tr],Ur=xr.feature(pe);if(!!we.filter(new mi(this.tileID.overscaledZ),Ur))for(var hn=this.getId(Ur,tr),an=0;an<ir.length;an++){var Rn=ir[an];if(!(Me&&Me.indexOf(Rn)<0)){var Mn=rt[Rn];if(!!Mn){var Dn={};hn!==void 0&&yt&&(Dn=yt.getState(Mn.sourceLayer||"_geojsonTileLayer",hn));var Vn=vt[Rn];Vn.paint=nm(Vn.paint,Mn.paint,Ur,Dn,Ne),Vn.layout=nm(Vn.layout,Mn.layout,Ur,Dn,Ne);var qn=!Ut||Ut(Ur,Mn,Dn);if(!!qn){var da=new Pp(Ur,this.z,this.x,this.y,hn);da.layer=Vn;var va=C[Rn];va===void 0&&(va=C[Rn]=[]),va.push({featureIndex:pe,feature:da,intersectionZ:qn})}}}}}},jc.prototype.lookupSymbolFeatures=function(C,B,te,pe,we,Me,Ne,rt){var vt={};this.loadVTLayers();for(var yt=Qu(we),Ut=0,ir=C;Ut<ir.length;Ut+=1){var tr=ir[Ut];this.loadMatchingFeature(vt,te,pe,tr,yt,Me,Ne,rt,B)}return vt},jc.prototype.hasLayer=function(C){for(var B=0,te=this.bucketLayerIDs;B<te.length;B+=1)for(var pe=te[B],we=0,Me=pe;we<Me.length;we+=1){var Ne=Me[we];if(C===Ne)return!0}return!1},jc.prototype.getId=function(C,B){var te=C.id;if(this.promoteId){var pe=typeof this.promoteId=="string"?this.promoteId:this.promoteId[B];te=C.properties[pe],typeof te=="boolean"&&(te=Number(te))}return te},Be("FeatureIndex",jc,{omit:["rawTileData","sourceLayerCoder"]});function nm(k,C,B,te,pe){return P(k,function(we,Me){var Ne=C instanceof eo?C.get(Me):null;return Ne&&Ne.evaluate?Ne.evaluate(B,te,pe):Ne})}function am(k){for(var C=1/0,B=1/0,te=-1/0,pe=-1/0,we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we];C=Math.min(C,Ne.x),B=Math.min(B,Ne.y),te=Math.max(te,Ne.x),pe=Math.max(pe,Ne.y)}return{minX:C,minY:B,maxX:te,maxY:pe}}function Cw(k,C){return C-k}var Lw=3e4,Ss=function(C,B){this.tileID=C,this.uid=_(),this.uses=0,this.tileSize=B,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ss.prototype.registerFadeDuration=function(C){var B=C+this.timeAdded;B<Q.now()||this.fadeEndTime&&B<this.fadeEndTime||(this.fadeEndTime=B)},Ss.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ss.prototype.loadVectorData=function(C,B,te){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Rc;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=kw(C.buckets,B.style),this.hasSymbolBuckets=!1;for(var pe in this.buckets){var we=this.buckets[pe];if(we instanceof oo)if(this.hasSymbolBuckets=!0,te)we.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Ne=this.buckets[Me];if(Ne instanceof oo&&Ne.hasRTLText){this.hasRTLText=!0,Ui();break}}this.queryPadding=0;for(var rt in this.buckets){var vt=this.buckets[rt];this.queryPadding=Math.max(this.queryPadding,B.style.getLayer(rt).queryRadius(vt))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},Ss.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ss.prototype.getBucket=function(C){return this.buckets[C.id]},Ss.prototype.upload=function(C){for(var B in this.buckets){var te=this.buckets[B];te.uploadPending()&&te.upload(C)}var pe=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Yf(C,this.imageAtlas.image,pe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Yf(C,this.glyphAtlasImage,pe.ALPHA),this.glyphAtlasImage=null)},Ss.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},Ss.prototype.queryRenderedFeatures=function(C,B,te,pe,we,Me,Ne,rt,vt,yt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:pe,cameraQueryGeometry:we,scale:Me,tileSize:this.tileSize,pixelPosMatrix:yt,transform:rt,params:Ne,queryPadding:this.queryPadding*vt},C,B,te)},Ss.prototype.querySourceFeatures=function(C,B){var te=this.latestFeatureIndex;if(!(!te||!te.rawTileData)){var pe=te.loadVTLayers(),we=B?B.sourceLayer:"",Me=pe._geojsonTileLayer||pe[we];if(!!Me)for(var Ne=Qu(B&&B.filter),rt=this.tileID.canonical,vt=rt.z,yt=rt.x,Ut=rt.y,ir={z:vt,x:yt,y:Ut},tr=0;tr<Me.length;tr++){var xr=Me.feature(tr);if(Ne.filter(new mi(this.tileID.overscaledZ),xr)){var Ur=te.getId(xr,we),hn=new Pp(xr,vt,yt,Ut,Ur);hn.tile=ir,C.push(hn)}}}},Ss.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ss.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ss.prototype.setExpiryData=function(C){var B=this.expirationTime;if(C.cacheControl){var te=j(C.cacheControl);te["max-age"]&&(this.expirationTime=Date.now()+te["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var pe=Date.now(),we=!1;if(this.expirationTime>pe)we=!1;else if(!B)we=!0;else if(this.expirationTime<B)we=!0;else{var Me=this.expirationTime-B;Me?this.expirationTime=pe+Math.max(Me,Lw):we=!0}we?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ss.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ss.prototype.setFeatureState=function(C,B){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var te=this.latestFeatureIndex.loadVTLayers();for(var pe in this.buckets)if(!!B.style.hasLayer(pe)){var we=this.buckets[pe],Me=we.layers[0].sourceLayer||"_geojsonTileLayer",Ne=te[Me],rt=C[Me];if(!(!Ne||!rt||Object.keys(rt).length===0)){we.update(rt,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var vt=B&&B.style&&B.style.getLayer(pe);vt&&(this.queryPadding=Math.max(this.queryPadding,vt.queryRadius(we)))}}}},Ss.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ss.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},Ss.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ss.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=Q.now()+C},Ss.prototype.setDependencies=function(C,B){for(var te={},pe=0,we=B;pe<we.length;pe+=1){var Me=we[pe];te[Me]=!0}this.dependencies[C]=te},Ss.prototype.hasDependency=function(C,B){for(var te=0,pe=C;te<pe.length;te+=1){var we=pe[te],Me=this.dependencies[we];if(Me)for(var Ne=0,rt=B;Ne<rt.length;Ne+=1){var vt=rt[Ne];if(Me[vt])return!0}}return!1};var Pw=["type","source","source-layer","minzoom","maxzoom","filter","layout"],pf=self.performance,im=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},pf.mark(this._marks.start)};im.prototype.finish=function(){pf.mark(this._marks.end);var C=pf.getEntriesByName(this._marks.measure);return C.length===0&&(pf.measure(this._marks.measure,this._marks.start,this._marks.end),C=pf.getEntriesByName(this._marks.measure),pf.clearMarks(this._marks.start),pf.clearMarks(this._marks.end),pf.clearMeasures(this._marks.measure)),C},e.Actor=Fh,e.AlphaImage=Gf,e.CanonicalTileID=Xf,e.CollisionBoxArray=Rc,e.Color=Ai,e.DEMData=Xc,e.DataConstantProperty=Za,e.DictionaryCoder=Lp,e.EXTENT=Ja,e.ErrorEvent=Ar,e.EvaluationParameters=mi,e.Event=Pr,e.Evented=Er,e.FeatureIndex=jc,e.FillBucket=yc,e.FillExtrusionBucket=mc,e.ImageAtlas=Pv,e.ImagePosition=wp,e.LineBucket=Gl,e.LngLat=Do,e.LngLatBounds=os,e.MercatorCoordinate=Wf,e.ONE_EM=Vs,e.OverscaledTileID=ss,e.Point=v,e.Point$1=v,e.Properties=co,e.Protobuf=bp,e.RGBAImage=Hl,e.RequestManager=ke,e.RequestPerformance=im,e.ResourceType=st,e.SegmentVector=W,e.SourceFeatureState=zh,e.StructArrayLayout1ui2=lf,e.StructArrayLayout2f1f2i16=pc,e.StructArrayLayout2i4=zf,e.StructArrayLayout3ui6=dc,e.StructArrayLayout4i8=Cc,e.SymbolBucket=oo,e.Texture=Yf,e.Tile=Ss,e.Transitionable=zo,e.Uniform1f=Xr,e.Uniform1i=$r,e.Uniform2f=rn,e.Uniform3f=xn,e.Uniform4f=Fn,e.UniformColor=Gn,e.UniformMatrix4f=ca,e.UnwrappedTileID=rm,e.ValidationError=gr,e.WritingMode=_u,e.ZoomHistory=nr,e.add=_h,e.addDynamicAttributes=s0,e.asyncAll=l,e.bezier=g,e.bindAll=E,e.browser=Q,e.cacheEntryPossiblyAdded=Zt,e.clamp=f,e.clearTileCache=sr,e.clipLine=By,e.clone=vp,e.clone$1=I,e.clone$2=Ud,e.collisionCircleLayout=f2,e.config=ie,e.create=mh,e.create$1=Vf,e.create$2=Uf,e.createCommonjsModule=a,e.createExpression=Ql,e.createLayout=qo,e.createStyleLayer=ww,e.cross=Vb,e.deepEqual=o,e.dot=Ub,e.dot$1=Xb,e.ease=d,e.emitValidationErrors=Di,e.endsWith=S,e.enforceCacheSizeLimit=Wt,e.evaluateSizeForFeature=Dy,e.evaluateSizeForZoom=Ry,e.evaluateVariableOffset=Hy,e.evented=Li,e.extend=M,e.featureFilter=Qu,e.filterObject=F,e.fromRotation=yh,e.getAnchorAlignment=n0,e.getAnchorJustification=o0,e.getArrayBuffer=ft,e.getImage=xt,e.getJSON=lt,e.getRTLTextPluginStatus=Po,e.getReferrer=$t,e.getVideo=Pt,e.identity=xh,e.invert=cf,e.isChar=ar,e.isMapboxURL=De,e.keysDifference=u,e.makeRequest=Qe,e.mapObject=P,e.mercatorXfromLng=qy,e.mercatorYfromLat=em,e.mercatorZfromAltitude=tm,e.mul=Bd,e.multiply=ff,e.mvt=Ah,e.normalize=wv,e.number=go,e.offscreenCanvasSupported=qr,e.ortho=Nd,e.parseGlyphPBF=N2,e.pbf=bp,e.performSymbolLayout=rw,e.perspective=_v,e.pick=w,e.plugin=ii,e.polygonIntersectsPolygon=gi,e.postMapLoadEvent=Lt,e.postTurnstileEvent=jt,e.potpack=Ay,e.refProperties=Pw,e.register=Be,e.registerForPluginStateChange=$i,e.rotate=sl,e.rotateX=Vl,e.rotateZ=bh,e.scale=Ul,e.scale$1=Wb,e.scale$2=Hd,e.setCacheLimits=Gr,e.setRTLTextPlugin=_a,e.sphericalToCartesian=Y,e.sqrLen=Kb,e.styleSpec=Yt,e.sub=Gb,e.symbolSize=j2,e.transformMat3=Hb,e.transformMat4=pp,e.translate=jo,e.triggerPluginCompletionEvent=Va,e.uniqueId=_,e.validateCustomStyleLayer=xw,e.validateLight=ta,e.validateStyle=Hn,e.values=x,e.vectorTile=Ah,e.version=i,e.warnOnce=O,e.webpSupported=oe,e.window=self,e.wrap=m}),T(["./shared"],function(e){function a(tt){var Qe=typeof tt;if(Qe==="number"||Qe==="boolean"||Qe==="string"||tt===void 0||tt===null)return JSON.stringify(tt);if(Array.isArray(tt)){for(var lt="[",ft=0,Et=tt;ft<Et.length;ft+=1){var Vt=Et[ft];lt+=a(Vt)+","}return lt+"]"}for(var Pe=Object.keys(tt).sort(),Se="{",ot=0;ot<Pe.length;ot++)Se+=JSON.stringify(Pe[ot])+":"+a(tt[Pe[ot]])+",";return Se+"}"}function i(tt){for(var Qe="",lt=0,ft=e.refProperties;lt<ft.length;lt+=1){var Et=ft[lt];Qe+="/"+a(tt[Et])}return Qe}function n(tt,Qe){for(var lt={},ft=0;ft<tt.length;ft++){var Et=Qe&&Qe[tt[ft].id]||i(tt[ft]);Qe&&(Qe[tt[ft].id]=Et);var Vt=lt[Et];Vt||(Vt=lt[Et]=[]),Vt.push(tt[ft])}var Pe=[];for(var Se in lt)Pe.push(lt[Se]);return Pe}var r=function(Qe){this.keyCache={},Qe&&this.replace(Qe)};r.prototype.replace=function(Qe){this._layerConfigs={},this._layers={},this.update(Qe,[])},r.prototype.update=function(Qe,lt){for(var ft=this,Et=0,Vt=Qe;Et<Vt.length;Et+=1){var Pe=Vt[Et];this._layerConfigs[Pe.id]=Pe;var Se=this._layers[Pe.id]=e.createStyleLayer(Pe);Se._featureFilter=e.featureFilter(Se.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(var ot=0,ct=lt;ot<ct.length;ot+=1){var pt=ct[ot];delete this.keyCache[pt],delete this._layerConfigs[pt],delete this._layers[pt]}this.familiesBySource={};for(var St=n(e.values(this._layerConfigs),this.keyCache),xt=0,Pt=St;xt<Pt.length;xt+=1){var Xt=Pt[xt],or=Xt.map(function(br){return ft._layers[br.id]}),Pr=or[0];if(Pr.visibility!=="none"){var Ar=Pr.source||"",Er=this.familiesBySource[Ar];Er||(Er=this.familiesBySource[Ar]={});var Jr=Pr.sourceLayer||"_geojsonTileLayer",lr=Er[Jr];lr||(lr=Er[Jr]=[]),lr.push(or)}}};var v=1,s=function(Qe){var lt={},ft=[];for(var Et in Qe){var Vt=Qe[Et],Pe=lt[Et]={};for(var Se in Vt){var ot=Vt[+Se];if(!(!ot||ot.bitmap.width===0||ot.bitmap.height===0)){var ct={x:0,y:0,w:ot.bitmap.width+2*v,h:ot.bitmap.height+2*v};ft.push(ct),Pe[Se]={rect:ct,metrics:ot.metrics}}}}var pt=e.potpack(ft),St=pt.w,xt=pt.h,Pt=new e.AlphaImage({width:St||1,height:xt||1});for(var Xt in Qe){var or=Qe[Xt];for(var Pr in or){var Ar=or[+Pr];if(!(!Ar||Ar.bitmap.width===0||Ar.bitmap.height===0)){var Er=lt[Xt][Pr].rect;e.AlphaImage.copy(Ar.bitmap,Pt,{x:0,y:0},{x:Er.x+v,y:Er.y+v},Ar.bitmap)}}}this.image=Pt,this.positions=lt};e.register("GlyphAtlas",s);var o=function(Qe){this.tileID=new e.OverscaledTileID(Qe.tileID.overscaledZ,Qe.tileID.wrap,Qe.tileID.canonical.z,Qe.tileID.canonical.x,Qe.tileID.canonical.y),this.uid=Qe.uid,this.zoom=Qe.zoom,this.pixelRatio=Qe.pixelRatio,this.tileSize=Qe.tileSize,this.source=Qe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Qe.showCollisionBoxes,this.collectResourceTiming=!!Qe.collectResourceTiming,this.returnDependencies=!!Qe.returnDependencies,this.promoteId=Qe.promoteId};o.prototype.parse=function(Qe,lt,ft,Et,Vt){var Pe=this;this.status="parsing",this.data=Qe,this.collisionBoxArray=new e.CollisionBoxArray;var Se=new e.DictionaryCoder(Object.keys(Qe.layers).sort()),ot=new e.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];var ct={},pt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ft},St=lt.familiesBySource[this.source];for(var xt in St){var Pt=Qe.layers[xt];if(!!Pt){Pt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+xt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Xt=Se.encode(xt),or=[],Pr=0;Pr<Pt.length;Pr++){var Ar=Pt.feature(Pr),Er=ot.getId(Ar,xt);or.push({feature:Ar,id:Er,index:Pr,sourceLayerIndex:Xt})}for(var Jr=0,lr=St[xt];Jr<lr.length;Jr+=1){var br=lr[Jr],Fr=br[0];if(!(Fr.minzoom&&this.zoom<Math.floor(Fr.minzoom))&&!(Fr.maxzoom&&this.zoom>=Fr.maxzoom)&&Fr.visibility!=="none"){b(br,this.zoom,ft);var Hr=ct[Fr.id]=Fr.createBucket({index:ot.bucketLayerIDs.length,layers:br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xt,sourceID:this.source});Hr.populate(or,pt,this.tileID.canonical),ot.bucketLayerIDs.push(br.map(function(Mr){return Mr.id}))}}}}var Lr,at,Rt,Kt,ur=e.mapObject(pt.glyphDependencies,function(Mr){return Object.keys(Mr).map(Number)});Object.keys(ur).length?Et.send("getGlyphs",{uid:this.uid,stacks:ur},function(Mr,jr){Lr||(Lr=Mr,at=jr,Dr.call(Pe))}):at={};var Nr=Object.keys(pt.iconDependencies);Nr.length?Et.send("getImages",{icons:Nr,source:this.source,tileID:this.tileID,type:"icons"},function(Mr,jr){Lr||(Lr=Mr,Rt=jr,Dr.call(Pe))}):Rt={};var Vr=Object.keys(pt.patternDependencies);Vr.length?Et.send("getImages",{icons:Vr,source:this.source,tileID:this.tileID,type:"patterns"},function(Mr,jr){Lr||(Lr=Mr,Kt=jr,Dr.call(Pe))}):Kt={},Dr.call(this);function Dr(){if(Lr)return Vt(Lr);if(at&&Rt&&Kt){var Mr=new s(at),jr=new e.ImageAtlas(Rt,Kt);for(var kn in ct){var yn=ct[kn];yn instanceof e.SymbolBucket?(b(yn.layers,this.zoom,ft),e.performSymbolLayout(yn,at,Mr.positions,Rt,jr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):yn.hasPattern&&(yn instanceof e.LineBucket||yn instanceof e.FillBucket||yn instanceof e.FillExtrusionBucket)&&(b(yn.layers,this.zoom,ft),yn.addFeatures(pt,this.tileID.canonical,jr.patternPositions))}this.status="done",Vt(null,{buckets:e.values(ct).filter(function(Wn){return!Wn.isEmpty()}),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Mr.image,imageAtlas:jr,glyphMap:this.returnDependencies?at:null,iconMap:this.returnDependencies?Rt:null,glyphPositions:this.returnDependencies?Mr.positions:null})}}};function b(tt,Qe,lt){for(var ft=new e.EvaluationParameters(Qe),Et=0,Vt=tt;Et<Vt.length;Et+=1){var Pe=Vt[Et];Pe.recalculate(ft,lt)}}function g(tt,Qe){var lt=e.getArrayBuffer(tt.request,function(ft,Et,Vt,Pe){ft?Qe(ft):Et&&Qe(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Et)),rawData:Et,cacheControl:Vt,expires:Pe})});return function(){lt.cancel(),Qe()}}var d=function(Qe,lt,ft,Et){this.actor=Qe,this.layerIndex=lt,this.availableImages=ft,this.loadVectorData=Et||g,this.loading={},this.loaded={}};d.prototype.loadTile=function(Qe,lt){var ft=this,Et=Qe.uid;this.loading||(this.loading={});var Vt=Qe&&Qe.request&&Qe.request.collectResourceTiming?new e.RequestPerformance(Qe.request):!1,Pe=this.loading[Et]=new o(Qe);Pe.abort=this.loadVectorData(Qe,function(Se,ot){if(delete ft.loading[Et],Se||!ot)return Pe.status="done",ft.loaded[Et]=Pe,lt(Se);var ct=ot.rawData,pt={};ot.expires&&(pt.expires=ot.expires),ot.cacheControl&&(pt.cacheControl=ot.cacheControl);var St={};if(Vt){var xt=Vt.finish();xt&&(St.resourceTiming=JSON.parse(JSON.stringify(xt)))}Pe.vectorTile=ot.vectorTile,Pe.parse(ot.vectorTile,ft.layerIndex,ft.availableImages,ft.actor,function(Pt,Xt){if(Pt||!Xt)return lt(Pt);lt(null,e.extend({rawTileData:ct.slice(0)},Xt,pt,St))}),ft.loaded=ft.loaded||{},ft.loaded[Et]=Pe})},d.prototype.reloadTile=function(Qe,lt){var ft=this,Et=this.loaded,Vt=Qe.uid,Pe=this;if(Et&&Et[Vt]){var Se=Et[Vt];Se.showCollisionBoxes=Qe.showCollisionBoxes;var ot=function(ct,pt){var St=Se.reloadCallback;St&&(delete Se.reloadCallback,Se.parse(Se.vectorTile,Pe.layerIndex,ft.availableImages,Pe.actor,St)),lt(ct,pt)};Se.status==="parsing"?Se.reloadCallback=ot:Se.status==="done"&&(Se.vectorTile?Se.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}},d.prototype.abortTile=function(Qe,lt){var ft=this.loading,Et=Qe.uid;ft&&ft[Et]&&ft[Et].abort&&(ft[Et].abort(),delete ft[Et]),lt()},d.prototype.removeTile=function(Qe,lt){var ft=this.loaded,Et=Qe.uid;ft&&ft[Et]&&delete ft[Et],lt()};var f=e.window.ImageBitmap,m=function(){this.loaded={}};m.prototype.loadTile=function(Qe,lt){var ft=Qe.uid,Et=Qe.encoding,Vt=Qe.rawImageData,Pe=f&&Vt instanceof f?this.getImageData(Vt):Vt,Se=new e.DEMData(ft,Pe,Et);this.loaded=this.loaded||{},this.loaded[ft]=Se,lt(null,Se)},m.prototype.getImageData=function(Qe){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Qe.width,Qe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Qe.width,this.offscreenCanvas.height=Qe.height,this.offscreenCanvasContext.drawImage(Qe,0,0,Qe.width,Qe.height);var lt=this.offscreenCanvasContext.getImageData(-1,-1,Qe.width+2,Qe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:lt.width,height:lt.height},lt.data)},m.prototype.removeTile=function(Qe){var lt=this.loaded,ft=Qe.uid;lt&&lt[ft]&&delete lt[ft]};var l=x;function x(tt,Qe){var lt=tt&&tt.type,ft;if(lt==="FeatureCollection")for(ft=0;ft<tt.features.length;ft++)x(tt.features[ft],Qe);else if(lt==="GeometryCollection")for(ft=0;ft<tt.geometries.length;ft++)x(tt.geometries[ft],Qe);else if(lt==="Feature")x(tt.geometry,Qe);else if(lt==="Polygon")u(tt.coordinates,Qe);else if(lt==="MultiPolygon")for(ft=0;ft<tt.coordinates.length;ft++)u(tt.coordinates[ft],Qe);return tt}function u(tt,Qe){if(tt.length!==0){M(tt[0],Qe);for(var lt=1;lt<tt.length;lt++)M(tt[lt],!Qe)}}function M(tt,Qe){for(var lt=0,ft=0,Et=tt.length,Vt=Et-1;ft<Et;Vt=ft++)lt+=(tt[ft][0]-tt[Vt][0])*(tt[Vt][1]+tt[ft][1]);lt>=0!=!!Qe&&tt.reverse()}var w=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(Qe){this._feature=Qe,this.extent=e.EXTENT,this.type=Qe.type,this.properties=Qe.tags,"id"in Qe&&!isNaN(Qe.id)&&(this.id=parseInt(Qe.id,10))};p.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Qe=[],lt=0,ft=this._feature.geometry;lt<ft.length;lt+=1){var Et=ft[lt];Qe.push([new e.Point$1(Et[0],Et[1])])}return Qe}else{for(var Vt=[],Pe=0,Se=this._feature.geometry;Pe<Se.length;Pe+=1){for(var ot=Se[Pe],ct=[],pt=0,St=ot;pt<St.length;pt+=1){var xt=St[pt];ct.push(new e.Point$1(xt[0],xt[1]))}Vt.push(ct)}return Vt}},p.prototype.toGeoJSON=function(Qe,lt,ft){return w.call(this,Qe,lt,ft)};var _=function(Qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Qe.length,this._features=Qe};_.prototype.feature=function(Qe){return new p(this._features[Qe])};var h=e.vectorTile.VectorTileFeature,L=E;function E(tt,Qe){this.options=Qe||{},this.features=tt,this.length=tt.length}E.prototype.feature=function(tt){return new S(this.features[tt],this.options.extent)};function S(tt,Qe){this.id=typeof tt.id=="number"?tt.id:void 0,this.type=tt.type,this.rawGeometry=tt.type===1?[tt.geometry]:tt.geometry,this.properties=tt.tags,this.extent=Qe||4096}S.prototype.loadGeometry=function(){var tt=this.rawGeometry;this.geometry=[];for(var Qe=0;Qe<tt.length;Qe++){for(var lt=tt[Qe],ft=[],Et=0;Et<lt.length;Et++)ft.push(new e.Point$1(lt[Et][0],lt[Et][1]));this.geometry.push(ft)}return this.geometry},S.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var tt=this.geometry,Qe=1/0,lt=-1/0,ft=1/0,Et=-1/0,Vt=0;Vt<tt.length;Vt++)for(var Pe=tt[Vt],Se=0;Se<Pe.length;Se++){var ot=Pe[Se];Qe=Math.min(Qe,ot.x),lt=Math.max(lt,ot.x),ft=Math.min(ft,ot.y),Et=Math.max(Et,ot.y)}return[Qe,ft,lt,Et]},S.prototype.toGeoJSON=h.prototype.toGeoJSON;var P=R,F=R,I=O,D=L;function R(tt){var Qe=new e.pbf;return z(tt,Qe),Qe.finish()}function O(tt,Qe){Qe=Qe||{};var lt={};for(var ft in tt)lt[ft]=new L(tt[ft].features,Qe),lt[ft].name=ft,lt[ft].version=Qe.version,lt[ft].extent=Qe.extent;return R({layers:lt})}function z(tt,Qe){for(var lt in tt.layers)Qe.writeMessage(3,G,tt.layers[lt])}function G(tt,Qe){Qe.writeVarintField(15,tt.version||1),Qe.writeStringField(1,tt.name||""),Qe.writeVarintField(5,tt.extent||4096);var lt,ft={keys:[],values:[],keycache:{},valuecache:{}};for(lt=0;lt<tt.length;lt++)ft.feature=tt.feature(lt),Qe.writeMessage(2,Y,ft);var Et=ft.keys;for(lt=0;lt<Et.length;lt++)Qe.writeStringField(3,Et[lt]);var Vt=ft.values;for(lt=0;lt<Vt.length;lt++)Qe.writeMessage(4,he,Vt[lt])}function Y(tt,Qe){var lt=tt.feature;lt.id!==void 0&&Qe.writeVarintField(1,lt.id),Qe.writeMessage(2,ee,tt),Qe.writeVarintField(3,lt.type),Qe.writeMessage(4,ae,lt)}function ee(tt,Qe){var lt=tt.feature,ft=tt.keys,Et=tt.values,Vt=tt.keycache,Pe=tt.valuecache;for(var Se in lt.properties){var ot=Vt[Se];typeof ot>"u"&&(ft.push(Se),ot=ft.length-1,Vt[Se]=ot),Qe.writeVarint(ot);var ct=lt.properties[Se],pt=typeof ct;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&(ct=JSON.stringify(ct));var St=pt+":"+ct,xt=Pe[St];typeof xt>"u"&&(Et.push(ct),xt=Et.length-1,Pe[St]=xt),Qe.writeVarint(xt)}}function j(tt,Qe){return(Qe<<3)+(tt&7)}function X(tt){return tt<<1^tt>>31}function ae(tt,Qe){for(var lt=tt.loadGeometry(),ft=tt.type,Et=0,Vt=0,Pe=lt.length,Se=0;Se<Pe;Se++){var ot=lt[Se],ct=1;ft===1&&(ct=ot.length),Qe.writeVarint(j(1,ct));for(var pt=ft===3?ot.length-1:ot.length,St=0;St<pt;St++){St===1&&ft!==1&&Qe.writeVarint(j(2,pt-1));var xt=ot[St].x-Et,Pt=ot[St].y-Vt;Qe.writeVarint(X(xt)),Qe.writeVarint(X(Pt)),Et+=xt,Vt+=Pt}ft===3&&Qe.writeVarint(j(7,1))}}function he(tt,Qe){var lt=typeof tt;lt==="string"?Qe.writeStringField(1,tt):lt==="boolean"?Qe.writeBooleanField(7,tt):lt==="number"&&(tt%1!==0?Qe.writeDoubleField(3,tt):tt<0?Qe.writeSVarintField(6,tt):Qe.writeVarintField(5,tt))}P.fromVectorTileJs=F,P.fromGeojsonVt=I,P.GeoJSONWrapper=D;function K(tt,Qe,lt,ft,Et,Vt){if(!(Et-ft<=lt)){var Pe=ft+Et>>1;J(tt,Qe,Pe,ft,Et,Vt%2),K(tt,Qe,lt,ft,Pe-1,Vt+1),K(tt,Qe,lt,Pe+1,Et,Vt+1)}}function J(tt,Qe,lt,ft,Et,Vt){for(;Et>ft;){if(Et-ft>600){var Pe=Et-ft+1,Se=lt-ft+1,ot=Math.log(Pe),ct=.5*Math.exp(2*ot/3),pt=.5*Math.sqrt(ot*ct*(Pe-ct)/Pe)*(Se-Pe/2<0?-1:1),St=Math.max(ft,Math.floor(lt-Se*ct/Pe+pt)),xt=Math.min(Et,Math.floor(lt+(Pe-Se)*ct/Pe+pt));J(tt,Qe,lt,St,xt,Vt)}var Pt=Qe[2*lt+Vt],Xt=ft,or=Et;for(U(tt,Qe,ft,lt),Qe[2*Et+Vt]>Pt&&U(tt,Qe,ft,Et);Xt<or;){for(U(tt,Qe,Xt,or),Xt++,or--;Qe[2*Xt+Vt]<Pt;)Xt++;for(;Qe[2*or+Vt]>Pt;)or--}Qe[2*ft+Vt]===Pt?U(tt,Qe,ft,or):(or++,U(tt,Qe,or,Et)),or<=lt&&(ft=or+1),lt<=or&&(Et=or-1)}}function U(tt,Qe,lt,ft){H(tt,lt,ft),H(Qe,2*lt,2*ft),H(Qe,2*lt+1,2*ft+1)}function H(tt,Qe,lt){var ft=tt[Qe];tt[Qe]=tt[lt],tt[lt]=ft}function q(tt,Qe,lt,ft,Et,Vt,Pe){for(var Se=[0,tt.length-1,0],ot=[],ct,pt;Se.length;){var St=Se.pop(),xt=Se.pop(),Pt=Se.pop();if(xt-Pt<=Pe){for(var Xt=Pt;Xt<=xt;Xt++)ct=Qe[2*Xt],pt=Qe[2*Xt+1],ct>=lt&&ct<=Et&&pt>=ft&&pt<=Vt&&ot.push(tt[Xt]);continue}var or=Math.floor((Pt+xt)/2);ct=Qe[2*or],pt=Qe[2*or+1],ct>=lt&&ct<=Et&&pt>=ft&&pt<=Vt&&ot.push(tt[or]);var Pr=(St+1)%2;(St===0?lt<=ct:ft<=pt)&&(Se.push(Pt),Se.push(or-1),Se.push(Pr)),(St===0?Et>=ct:Vt>=pt)&&(Se.push(or+1),Se.push(xt),Se.push(Pr))}return ot}function re(tt,Qe,lt,ft,Et,Vt){for(var Pe=[0,tt.length-1,0],Se=[],ot=Et*Et;Pe.length;){var ct=Pe.pop(),pt=Pe.pop(),St=Pe.pop();if(pt-St<=Vt){for(var xt=St;xt<=pt;xt++)Z(Qe[2*xt],Qe[2*xt+1],lt,ft)<=ot&&Se.push(tt[xt]);continue}var Pt=Math.floor((St+pt)/2),Xt=Qe[2*Pt],or=Qe[2*Pt+1];Z(Xt,or,lt,ft)<=ot&&Se.push(tt[Pt]);var Pr=(ct+1)%2;(ct===0?lt-Et<=Xt:ft-Et<=or)&&(Pe.push(St),Pe.push(Pt-1),Pe.push(Pr)),(ct===0?lt+Et>=Xt:ft+Et>=or)&&(Pe.push(Pt+1),Pe.push(pt),Pe.push(Pr))}return Se}function Z(tt,Qe,lt,ft){var Et=tt-lt,Vt=Qe-ft;return Et*Et+Vt*Vt}var Q=function(tt){return tt[0]},ie=function(tt){return tt[1]},oe=function(Qe,lt,ft,Et,Vt){lt===void 0&&(lt=Q),ft===void 0&&(ft=ie),Et===void 0&&(Et=64),Vt===void 0&&(Vt=Float64Array),this.nodeSize=Et,this.points=Qe;for(var Pe=Qe.length<65536?Uint16Array:Uint32Array,Se=this.ids=new Pe(Qe.length),ot=this.coords=new Vt(Qe.length*2),ct=0;ct<Qe.length;ct++)Se[ct]=ct,ot[2*ct]=lt(Qe[ct]),ot[2*ct+1]=ft(Qe[ct]);K(Se,ot,Et,0,Se.length-1,0)};oe.prototype.range=function(Qe,lt,ft,Et){return q(this.ids,this.coords,Qe,lt,ft,Et,this.nodeSize)},oe.prototype.within=function(Qe,lt,ft){return re(this.ids,this.coords,Qe,lt,ft,this.nodeSize)};var ne={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(tt){return tt}},le=function(Qe){this.options=He(Object.create(ne),Qe),this.trees=new Array(this.options.maxZoom+1)};le.prototype.load=function(Qe){var lt=this.options,ft=lt.log,Et=lt.minZoom,Vt=lt.maxZoom,Pe=lt.nodeSize;ft&&console.time("total time");var Se="prepare "+Qe.length+" points";ft&&console.time(Se),this.points=Qe;for(var ot=[],ct=0;ct<Qe.length;ct++)!Qe[ct].geometry||ot.push(fe(Qe[ct],ct));this.trees[Vt+1]=new oe(ot,Ae,Le,Pe,Float32Array),ft&&console.timeEnd(Se);for(var pt=Vt;pt>=Et;pt--){var St=+Date.now();ot=this._cluster(ot,pt),this.trees[pt]=new oe(ot,Ae,Le,Pe,Float32Array),ft&&console.log("z%d: %d clusters in %dms",pt,ot.length,+Date.now()-St)}return ft&&console.timeEnd("total time"),this},le.prototype.getClusters=function(Qe,lt){var ft=((Qe[0]+180)%360+360)%360-180,Et=Math.max(-90,Math.min(90,Qe[1])),Vt=Qe[2]===180?180:((Qe[2]+180)%360+360)%360-180,Pe=Math.max(-90,Math.min(90,Qe[3]));if(Qe[2]-Qe[0]>=360)ft=-180,Vt=180;else if(ft>Vt){var Se=this.getClusters([ft,Et,180,Pe],lt),ot=this.getClusters([-180,Et,Vt,Pe],lt);return Se.concat(ot)}for(var ct=this.trees[this._limitZoom(lt)],pt=ct.range(me(ft),be(Pe),me(Vt),be(Et)),St=[],xt=0,Pt=pt;xt<Pt.length;xt+=1){var Xt=Pt[xt],or=ct.points[Xt];St.push(or.numPoints?ye(or):this.points[or.index])}return St},le.prototype.getChildren=function(Qe){var lt=this._getOriginId(Qe),ft=this._getOriginZoom(Qe),Et="No cluster with the specified id.",Vt=this.trees[ft];if(!Vt)throw new Error(Et);var Pe=Vt.points[lt];if(!Pe)throw new Error(Et);for(var Se=this.options.radius/(this.options.extent*Math.pow(2,ft-1)),ot=Vt.within(Pe.x,Pe.y,Se),ct=[],pt=0,St=ot;pt<St.length;pt+=1){var xt=St[pt],Pt=Vt.points[xt];Pt.parentId===Qe&&ct.push(Pt.numPoints?ye(Pt):this.points[Pt.index])}if(ct.length===0)throw new Error(Et);return ct},le.prototype.getLeaves=function(Qe,lt,ft){lt=lt||10,ft=ft||0;var Et=[];return this._appendLeaves(Et,Qe,lt,ft,0),Et},le.prototype.getTile=function(Qe,lt,ft){var Et=this.trees[this._limitZoom(Qe)],Vt=Math.pow(2,Qe),Pe=this.options,Se=Pe.extent,ot=Pe.radius,ct=ot/Se,pt=(ft-ct)/Vt,St=(ft+1+ct)/Vt,xt={features:[]};return this._addTileFeatures(Et.range((lt-ct)/Vt,pt,(lt+1+ct)/Vt,St),Et.points,lt,ft,Vt,xt),lt===0&&this._addTileFeatures(Et.range(1-ct/Vt,pt,1,St),Et.points,Vt,ft,Vt,xt),lt===Vt-1&&this._addTileFeatures(Et.range(0,pt,ct/Vt,St),Et.points,-1,ft,Vt,xt),xt.features.length?xt:null},le.prototype.getClusterExpansionZoom=function(Qe){for(var lt=this._getOriginZoom(Qe)-1;lt<=this.options.maxZoom;){var ft=this.getChildren(Qe);if(lt++,ft.length!==1)break;Qe=ft[0].properties.cluster_id}return lt},le.prototype._appendLeaves=function(Qe,lt,ft,Et,Vt){for(var Pe=this.getChildren(lt),Se=0,ot=Pe;Se<ot.length;Se+=1){var ct=ot[Se],pt=ct.properties;if(pt&&pt.cluster?Vt+pt.point_count<=Et?Vt+=pt.point_count:Vt=this._appendLeaves(Qe,pt.cluster_id,ft,Et,Vt):Vt<Et?Vt++:Qe.push(ct),Qe.length===ft)break}return Vt},le.prototype._addTileFeatures=function(Qe,lt,ft,Et,Vt,Pe){for(var Se=0,ot=Qe;Se<ot.length;Se+=1){var ct=ot[Se],pt=lt[ct],St=pt.numPoints,xt={type:1,geometry:[[Math.round(this.options.extent*(pt.x*Vt-ft)),Math.round(this.options.extent*(pt.y*Vt-Et))]],tags:St?xe(pt):this.points[pt.index].properties},Pt=void 0;St?Pt=pt.id:this.options.generateId?Pt=pt.index:this.points[pt.index].id&&(Pt=this.points[pt.index].id),Pt!==void 0&&(xt.id=Pt),Pe.features.push(xt)}},le.prototype._limitZoom=function(Qe){return Math.max(this.options.minZoom,Math.min(Qe,this.options.maxZoom+1))},le.prototype._cluster=function(Qe,lt){for(var ft=[],Et=this.options,Vt=Et.radius,Pe=Et.extent,Se=Et.reduce,ot=Vt/(Pe*Math.pow(2,lt)),ct=0;ct<Qe.length;ct++){var pt=Qe[ct];if(!(pt.zoom<=lt)){pt.zoom=lt;for(var St=this.trees[lt+1],xt=St.within(pt.x,pt.y,ot),Pt=pt.numPoints||1,Xt=pt.x*Pt,or=pt.y*Pt,Pr=Se&&Pt>1?this._map(pt,!0):null,Ar=(ct<<5)+(lt+1)+this.points.length,Er=0,Jr=xt;Er<Jr.length;Er+=1){var lr=Jr[Er],br=St.points[lr];if(!(br.zoom<=lt)){br.zoom=lt;var Fr=br.numPoints||1;Xt+=br.x*Fr,or+=br.y*Fr,Pt+=Fr,br.parentId=Ar,Se&&(Pr||(Pr=this._map(pt,!0)),Se(Pr,this._map(br)))}}Pt===1?ft.push(pt):(pt.parentId=Ar,ft.push(_e(Xt/Pt,or/Pt,Ar,Pt,Pr)))}}return ft},le.prototype._getOriginId=function(Qe){return Qe-this.points.length>>5},le.prototype._getOriginZoom=function(Qe){return(Qe-this.points.length)%32},le.prototype._map=function(Qe,lt){if(Qe.numPoints)return lt?He({},Qe.properties):Qe.properties;var ft=this.points[Qe.index].properties,Et=this.options.map(ft);return lt&&Et===ft?He({},Et):Et};function _e(tt,Qe,lt,ft,Et){return{x:tt,y:Qe,zoom:1/0,id:lt,parentId:-1,numPoints:ft,properties:Et}}function fe(tt,Qe){var lt=tt.geometry.coordinates,ft=lt[0],Et=lt[1];return{x:me(ft),y:be(Et),zoom:1/0,index:Qe,parentId:-1}}function ye(tt){return{type:"Feature",id:tt.id,properties:xe(tt),geometry:{type:"Point",coordinates:[ke(tt.x),De(tt.y)]}}}function xe(tt){var Qe=tt.numPoints,lt=Qe>=1e4?Math.round(Qe/1e3)+"k":Qe>=1e3?Math.round(Qe/100)/10+"k":Qe;return He(He({},tt.properties),{cluster:!0,cluster_id:tt.id,point_count:Qe,point_count_abbreviated:lt})}function me(tt){return tt/360+.5}function be(tt){var Qe=Math.sin(tt*Math.PI/180),lt=.5-.25*Math.log((1+Qe)/(1-Qe))/Math.PI;return lt<0?0:lt>1?1:lt}function ke(tt){return(tt-.5)*360}function De(tt){var Qe=(180-tt*360)*Math.PI/180;return 360*Math.atan(Math.exp(Qe))/Math.PI-90}function He(tt,Qe){for(var lt in Qe)tt[lt]=Qe[lt];return tt}function Ae(tt){return tt.x}function Le(tt){return tt.y}function Ze(tt,Qe,lt,ft){for(var Et=ft,Vt=lt-Qe>>1,Pe=lt-Qe,Se,ot=tt[Qe],ct=tt[Qe+1],pt=tt[lt],St=tt[lt+1],xt=Qe+3;xt<lt;xt+=3){var Pt=We(tt[xt],tt[xt+1],ot,ct,pt,St);if(Pt>Et)Se=xt,Et=Pt;else if(Pt===Et){var Xt=Math.abs(xt-Vt);Xt<Pe&&(Se=xt,Pe=Xt)}}Et>ft&&(Se-Qe>3&&Ze(tt,Qe,Se,ft),tt[Se+2]=Et,lt-Se>3&&Ze(tt,Se,lt,ft))}function We(tt,Qe,lt,ft,Et,Vt){var Pe=Et-lt,Se=Vt-ft;if(Pe!==0||Se!==0){var ot=((tt-lt)*Pe+(Qe-ft)*Se)/(Pe*Pe+Se*Se);ot>1?(lt=Et,ft=Vt):ot>0&&(lt+=Pe*ot,ft+=Se*ot)}return Pe=tt-lt,Se=Qe-ft,Pe*Pe+Se*Se}function ze(tt,Qe,lt,ft){var Et={id:typeof tt>"u"?null:tt,type:Qe,geometry:lt,tags:ft,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ie(Et),Et}function Ie(tt){var Qe=tt.geometry,lt=tt.type;if(lt==="Point"||lt==="MultiPoint"||lt==="LineString")Ve(tt,Qe);else if(lt==="Polygon"||lt==="MultiLineString")for(var ft=0;ft<Qe.length;ft++)Ve(tt,Qe[ft]);else if(lt==="MultiPolygon")for(ft=0;ft<Qe.length;ft++)for(var Et=0;Et<Qe[ft].length;Et++)Ve(tt,Qe[ft][Et])}function Ve(tt,Qe){for(var lt=0;lt<Qe.length;lt+=3)tt.minX=Math.min(tt.minX,Qe[lt]),tt.minY=Math.min(tt.minY,Qe[lt+1]),tt.maxX=Math.max(tt.maxX,Qe[lt]),tt.maxY=Math.max(tt.maxY,Qe[lt+1])}function dt(tt,Qe){var lt=[];if(tt.type==="FeatureCollection")for(var ft=0;ft<tt.features.length;ft++)Ft(lt,tt.features[ft],Qe,ft);else tt.type==="Feature"?Ft(lt,tt,Qe):Ft(lt,{geometry:tt},Qe);return lt}function Ft(tt,Qe,lt,ft){if(!!Qe.geometry){var Et=Qe.geometry.coordinates,Vt=Qe.geometry.type,Pe=Math.pow(lt.tolerance/((1<<lt.maxZoom)*lt.extent),2),Se=[],ot=Qe.id;if(lt.promoteId?ot=Qe.properties[lt.promoteId]:lt.generateId&&(ot=ft||0),Vt==="Point")Qt(Et,Se);else if(Vt==="MultiPoint")for(var ct=0;ct<Et.length;ct++)Qt(Et[ct],Se);else if(Vt==="LineString")Ot(Et,Se,Pe,!1);else if(Vt==="MultiLineString")if(lt.lineMetrics){for(ct=0;ct<Et.length;ct++)Se=[],Ot(Et[ct],Se,Pe,!1),tt.push(ze(ot,"LineString",Se,Qe.properties));return}else Ct(Et,Se,Pe,!1);else if(Vt==="Polygon")Ct(Et,Se,Pe,!0);else if(Vt==="MultiPolygon")for(ct=0;ct<Et.length;ct++){var pt=[];Ct(Et[ct],pt,Pe,!0),Se.push(pt)}else if(Vt==="GeometryCollection"){for(ct=0;ct<Qe.geometry.geometries.length;ct++)Ft(tt,{id:ot,geometry:Qe.geometry.geometries[ct],properties:Qe.properties},lt,ft);return}else throw new Error("Input data is not a valid GeoJSON object.");tt.push(ze(ot,Vt,Se,Qe.properties))}}function Qt(tt,Qe){Qe.push(jt(tt[0])),Qe.push(Nt(tt[1])),Qe.push(0)}function Ot(tt,Qe,lt,ft){for(var Et,Vt,Pe=0,Se=0;Se<tt.length;Se++){var ot=jt(tt[Se][0]),ct=Nt(tt[Se][1]);Qe.push(ot),Qe.push(ct),Qe.push(0),Se>0&&(ft?Pe+=(Et*ct-ot*Vt)/2:Pe+=Math.sqrt(Math.pow(ot-Et,2)+Math.pow(ct-Vt,2))),Et=ot,Vt=ct}var pt=Qe.length-3;Qe[2]=1,Ze(Qe,0,pt,lt),Qe[pt+2]=1,Qe.size=Math.abs(Pe),Qe.start=0,Qe.end=Qe.size}function Ct(tt,Qe,lt,ft){for(var Et=0;Et<tt.length;Et++){var Vt=[];Ot(tt[Et],Vt,lt,ft),Qe.push(Vt)}}function jt(tt){return tt/360+.5}function Nt(tt){var Qe=Math.sin(tt*Math.PI/180),lt=.5-.25*Math.log((1+Qe)/(1-Qe))/Math.PI;return lt<0?0:lt>1?1:lt}function Lt(tt,Qe,lt,ft,Et,Vt,Pe,Se){if(lt/=Qe,ft/=Qe,Vt>=lt&&Pe<ft)return tt;if(Pe<lt||Vt>=ft)return null;for(var ot=[],ct=0;ct<tt.length;ct++){var pt=tt[ct],St=pt.geometry,xt=pt.type,Pt=Et===0?pt.minX:pt.minY,Xt=Et===0?pt.maxX:pt.maxY;if(Pt>=lt&&Xt<ft){ot.push(pt);continue}else if(Xt<lt||Pt>=ft)continue;var or=[];if(xt==="Point"||xt==="MultiPoint")Xe(St,or,lt,ft,Et);else if(xt==="LineString")it(St,or,lt,ft,Et,!1,Se.lineMetrics);else if(xt==="MultiLineString")Ee(St,or,lt,ft,Et,!1);else if(xt==="Polygon")Ee(St,or,lt,ft,Et,!0);else if(xt==="MultiPolygon")for(var Pr=0;Pr<St.length;Pr++){var Ar=[];Ee(St[Pr],Ar,lt,ft,Et,!0),Ar.length&&or.push(Ar)}if(or.length){if(Se.lineMetrics&&xt==="LineString"){for(Pr=0;Pr<or.length;Pr++)ot.push(ze(pt.id,xt,or[Pr],pt.tags));continue}(xt==="LineString"||xt==="MultiLineString")&&(or.length===1?(xt="LineString",or=or[0]):xt="MultiLineString"),(xt==="Point"||xt==="MultiPoint")&&(xt=or.length===3?"Point":"MultiPoint"),ot.push(ze(pt.id,xt,or,pt.tags))}}return ot.length?ot:null}function Xe(tt,Qe,lt,ft,Et){for(var Vt=0;Vt<tt.length;Vt+=3){var Pe=tt[Vt+Et];Pe>=lt&&Pe<=ft&&(Qe.push(tt[Vt]),Qe.push(tt[Vt+1]),Qe.push(tt[Vt+2]))}}function it(tt,Qe,lt,ft,Et,Vt,Pe){for(var Se=Ye(tt),ot=Et===0?Ke:qe,ct=tt.start,pt,St,xt=0;xt<tt.length-3;xt+=3){var Pt=tt[xt],Xt=tt[xt+1],or=tt[xt+2],Pr=tt[xt+3],Ar=tt[xt+4],Er=Et===0?Pt:Xt,Jr=Et===0?Pr:Ar,lr=!1;Pe&&(pt=Math.sqrt(Math.pow(Pt-Pr,2)+Math.pow(Xt-Ar,2))),Er<lt?Jr>lt&&(St=ot(Se,Pt,Xt,Pr,Ar,lt),Pe&&(Se.start=ct+pt*St)):Er>ft?Jr<ft&&(St=ot(Se,Pt,Xt,Pr,Ar,ft),Pe&&(Se.start=ct+pt*St)):Ge(Se,Pt,Xt,or),Jr<lt&&Er>=lt&&(St=ot(Se,Pt,Xt,Pr,Ar,lt),lr=!0),Jr>ft&&Er<=ft&&(St=ot(Se,Pt,Xt,Pr,Ar,ft),lr=!0),!Vt&&lr&&(Pe&&(Se.end=ct+pt*St),Qe.push(Se),Se=Ye(tt)),Pe&&(ct+=pt)}var br=tt.length-3;Pt=tt[br],Xt=tt[br+1],or=tt[br+2],Er=Et===0?Pt:Xt,Er>=lt&&Er<=ft&&Ge(Se,Pt,Xt,or),br=Se.length-3,Vt&&br>=3&&(Se[br]!==Se[0]||Se[br+1]!==Se[1])&&Ge(Se,Se[0],Se[1],Se[2]),Se.length&&Qe.push(Se)}function Ye(tt){var Qe=[];return Qe.size=tt.size,Qe.start=tt.start,Qe.end=tt.end,Qe}function Ee(tt,Qe,lt,ft,Et,Vt){for(var Pe=0;Pe<tt.length;Pe++)it(tt[Pe],Qe,lt,ft,Et,Vt,!1)}function Ge(tt,Qe,lt,ft){tt.push(Qe),tt.push(lt),tt.push(ft)}function Ke(tt,Qe,lt,ft,Et,Vt){var Pe=(Vt-Qe)/(ft-Qe);return tt.push(Vt),tt.push(lt+(Et-lt)*Pe),tt.push(1),Pe}function qe(tt,Qe,lt,ft,Et,Vt){var Pe=(Vt-lt)/(Et-lt);return tt.push(Qe+(ft-Qe)*Pe),tt.push(Vt),tt.push(1),Pe}function At(tt,Qe){var lt=Qe.buffer/Qe.extent,ft=tt,Et=Lt(tt,1,-1-lt,lt,0,-1,2,Qe),Vt=Lt(tt,1,1-lt,2+lt,0,-1,2,Qe);return(Et||Vt)&&(ft=Lt(tt,1,-lt,1+lt,0,-1,2,Qe)||[],Et&&(ft=mt(Et,1).concat(ft)),Vt&&(ft=ft.concat(mt(Vt,-1)))),ft}function mt(tt,Qe){for(var lt=[],ft=0;ft<tt.length;ft++){var Et=tt[ft],Vt=Et.type,Pe;if(Vt==="Point"||Vt==="MultiPoint"||Vt==="LineString")Pe=Mt(Et.geometry,Qe);else if(Vt==="MultiLineString"||Vt==="Polygon"){Pe=[];for(var Se=0;Se<Et.geometry.length;Se++)Pe.push(Mt(Et.geometry[Se],Qe))}else if(Vt==="MultiPolygon")for(Pe=[],Se=0;Se<Et.geometry.length;Se++){for(var ot=[],ct=0;ct<Et.geometry[Se].length;ct++)ot.push(Mt(Et.geometry[Se][ct],Qe));Pe.push(ot)}lt.push(ze(Et.id,Vt,Pe,Et.tags))}return lt}function Mt(tt,Qe){var lt=[];lt.size=tt.size,tt.start!==void 0&&(lt.start=tt.start,lt.end=tt.end);for(var ft=0;ft<tt.length;ft+=3)lt.push(tt[ft]+Qe,tt[ft+1],tt[ft+2]);return lt}function Gt(tt,Qe){if(tt.transformed)return tt;var lt=1<<tt.z,ft=tt.x,Et=tt.y,Vt,Pe,Se;for(Vt=0;Vt<tt.features.length;Vt++){var ot=tt.features[Vt],ct=ot.geometry,pt=ot.type;if(ot.geometry=[],pt===1)for(Pe=0;Pe<ct.length;Pe+=2)ot.geometry.push(zt(ct[Pe],ct[Pe+1],Qe,lt,ft,Et));else for(Pe=0;Pe<ct.length;Pe++){var St=[];for(Se=0;Se<ct[Pe].length;Se+=2)St.push(zt(ct[Pe][Se],ct[Pe][Se+1],Qe,lt,ft,Et));ot.geometry.push(St)}}return tt.transformed=!0,tt}function zt(tt,Qe,lt,ft,Et,Vt){return[Math.round(lt*(tt*ft-Et)),Math.round(lt*(Qe*ft-Vt))]}function Ht(tt,Qe,lt,ft,Et){for(var Vt=Qe===Et.maxZoom?0:Et.tolerance/((1<<Qe)*Et.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:lt,y:ft,z:Qe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Se=0;Se<tt.length;Se++){Pe.numFeatures++,Zt(Pe,tt[Se],Vt,Et);var ot=tt[Se].minX,ct=tt[Se].minY,pt=tt[Se].maxX,St=tt[Se].maxY;ot<Pe.minX&&(Pe.minX=ot),ct<Pe.minY&&(Pe.minY=ct),pt>Pe.maxX&&(Pe.maxX=pt),St>Pe.maxY&&(Pe.maxY=St)}return Pe}function Zt(tt,Qe,lt,ft){var Et=Qe.geometry,Vt=Qe.type,Pe=[];if(Vt==="Point"||Vt==="MultiPoint")for(var Se=0;Se<Et.length;Se+=3)Pe.push(Et[Se]),Pe.push(Et[Se+1]),tt.numPoints++,tt.numSimplified++;else if(Vt==="LineString")Wt(Pe,Et,tt,lt,!1,!1);else if(Vt==="MultiLineString"||Vt==="Polygon")for(Se=0;Se<Et.length;Se++)Wt(Pe,Et[Se],tt,lt,Vt==="Polygon",Se===0);else if(Vt==="MultiPolygon")for(var ot=0;ot<Et.length;ot++){var ct=Et[ot];for(Se=0;Se<ct.length;Se++)Wt(Pe,ct[Se],tt,lt,!0,Se===0)}if(Pe.length){var pt=Qe.tags||null;if(Vt==="LineString"&&ft.lineMetrics){pt={};for(var St in Qe.tags)pt[St]=Qe.tags[St];pt.mapbox_clip_start=Et.start/Et.size,pt.mapbox_clip_end=Et.end/Et.size}var xt={geometry:Pe,type:Vt==="Polygon"||Vt==="MultiPolygon"?3:Vt==="LineString"||Vt==="MultiLineString"?2:1,tags:pt};Qe.id!==null&&(xt.id=Qe.id),tt.features.push(xt)}}function Wt(tt,Qe,lt,ft,Et,Vt){var Pe=ft*ft;if(ft>0&&Qe.size<(Et?Pe:ft)){lt.numPoints+=Qe.length/3;return}for(var Se=[],ot=0;ot<Qe.length;ot+=3)(ft===0||Qe[ot+2]>Pe)&&(lt.numSimplified++,Se.push(Qe[ot]),Se.push(Qe[ot+1])),lt.numPoints++;Et&&sr(Se,Vt),tt.push(Se)}function sr(tt,Qe){for(var lt=0,ft=0,Et=tt.length,Vt=Et-2;ft<Et;Vt=ft,ft+=2)lt+=(tt[ft]-tt[Vt])*(tt[ft+1]+tt[Vt+1]);if(lt>0===Qe)for(ft=0,Et=tt.length;ft<Et/2;ft+=2){var Pe=tt[ft],Se=tt[ft+1];tt[ft]=tt[Et-2-ft],tt[ft+1]=tt[Et-1-ft],tt[Et-2-ft]=Pe,tt[Et-1-ft]=Se}}function Gr(tt,Qe){return new cn(tt,Qe)}function cn(tt,Qe){Qe=this.options=st(Object.create(this.options),Qe);var lt=Qe.debug;if(lt&&console.time("preprocess data"),Qe.maxZoom<0||Qe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Qe.promoteId&&Qe.generateId)throw new Error("promoteId and generateId cannot be used together.");var ft=dt(tt,Qe);this.tiles={},this.tileCoords=[],lt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Qe.indexMaxZoom,Qe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ft=At(ft,Qe),ft.length&&this.splitTile(ft,0,0,0),lt&&(ft.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}cn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},cn.prototype.splitTile=function(tt,Qe,lt,ft,Et,Vt,Pe){for(var Se=[tt,Qe,lt,ft],ot=this.options,ct=ot.debug;Se.length;){ft=Se.pop(),lt=Se.pop(),Qe=Se.pop(),tt=Se.pop();var pt=1<<Qe,St=qr(Qe,lt,ft),xt=this.tiles[St];if(!xt&&(ct>1&&console.time("creation"),xt=this.tiles[St]=Ht(tt,Qe,lt,ft,ot),this.tileCoords.push({z:Qe,x:lt,y:ft}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Qe,lt,ft,xt.numFeatures,xt.numPoints,xt.numSimplified),console.timeEnd("creation"));var Pt="z"+Qe;this.stats[Pt]=(this.stats[Pt]||0)+1,this.total++}if(xt.source=tt,Et){if(Qe===ot.maxZoom||Qe===Et)continue;var Xt=1<<Et-Qe;if(lt!==Math.floor(Vt/Xt)||ft!==Math.floor(Pe/Xt))continue}else if(Qe===ot.indexMaxZoom||xt.numPoints<=ot.indexMaxPoints)continue;if(xt.source=null,tt.length!==0){ct>1&&console.time("clipping");var or=.5*ot.buffer/ot.extent,Pr=.5-or,Ar=.5+or,Er=1+or,Jr,lr,br,Fr,Hr,Lr;Jr=lr=br=Fr=null,Hr=Lt(tt,pt,lt-or,lt+Ar,0,xt.minX,xt.maxX,ot),Lr=Lt(tt,pt,lt+Pr,lt+Er,0,xt.minX,xt.maxX,ot),tt=null,Hr&&(Jr=Lt(Hr,pt,ft-or,ft+Ar,1,xt.minY,xt.maxY,ot),lr=Lt(Hr,pt,ft+Pr,ft+Er,1,xt.minY,xt.maxY,ot),Hr=null),Lr&&(br=Lt(Lr,pt,ft-or,ft+Ar,1,xt.minY,xt.maxY,ot),Fr=Lt(Lr,pt,ft+Pr,ft+Er,1,xt.minY,xt.maxY,ot),Lr=null),ct>1&&console.timeEnd("clipping"),Se.push(Jr||[],Qe+1,lt*2,ft*2),Se.push(lr||[],Qe+1,lt*2,ft*2+1),Se.push(br||[],Qe+1,lt*2+1,ft*2),Se.push(Fr||[],Qe+1,lt*2+1,ft*2+1)}}},cn.prototype.getTile=function(tt,Qe,lt){var ft=this.options,Et=ft.extent,Vt=ft.debug;if(tt<0||tt>24)return null;var Pe=1<<tt;Qe=(Qe%Pe+Pe)%Pe;var Se=qr(tt,Qe,lt);if(this.tiles[Se])return Gt(this.tiles[Se],Et);Vt>1&&console.log("drilling down to z%d-%d-%d",tt,Qe,lt);for(var ot=tt,ct=Qe,pt=lt,St;!St&&ot>0;)ot--,ct=Math.floor(ct/2),pt=Math.floor(pt/2),St=this.tiles[qr(ot,ct,pt)];return!St||!St.source?null:(Vt>1&&console.log("found parent tile z%d-%d-%d",ot,ct,pt),Vt>1&&console.time("drilling down"),this.splitTile(St.source,ot,ct,pt,tt,Qe,lt),Vt>1&&console.timeEnd("drilling down"),this.tiles[Se]?Gt(this.tiles[Se],Et):null)};function qr(tt,Qe,lt){return((1<<tt)*lt+Qe)*32+tt}function st(tt,Qe){for(var lt in Qe)tt[lt]=Qe[lt];return tt}function rr(tt,Qe){var lt=tt.tileID.canonical;if(!this._geoJSONIndex)return Qe(null,null);var ft=this._geoJSONIndex.getTile(lt.z,lt.x,lt.y);if(!ft)return Qe(null,null);var Et=new _(ft.features),Vt=P(Et);(Vt.byteOffset!==0||Vt.byteLength!==Vt.buffer.byteLength)&&(Vt=new Uint8Array(Vt)),Qe(null,{vectorTile:Et,rawData:Vt.buffer})}var $t=function(tt){function Qe(lt,ft,Et,Vt){tt.call(this,lt,ft,Et,rr),Vt&&(this.loadGeoJSON=Vt)}return tt&&(Qe.__proto__=tt),Qe.prototype=Object.create(tt&&tt.prototype),Qe.prototype.constructor=Qe,Qe.prototype.loadData=function(ft,Et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Et,this._pendingLoadDataParams=ft,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Qe.prototype._loadData=function(){var ft=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Et=this._pendingCallback,Vt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Pe=Vt&&Vt.request&&Vt.request.collectResourceTiming?new e.RequestPerformance(Vt.request):!1;this.loadGeoJSON(Vt,function(Se,ot){if(Se||!ot)return Et(Se);if(typeof ot!="object")return Et(new Error("Input data given to '"+Vt.source+"' is not a valid GeoJSON object."));l(ot,!0);try{ft._geoJSONIndex=Vt.cluster?new le(hr(Vt)).load(ot.features):Gr(ot,Vt.geojsonVtOptions)}catch(St){return Et(St)}ft.loaded={};var ct={};if(Pe){var pt=Pe.finish();pt&&(ct.resourceTiming={},ct.resourceTiming[Vt.source]=JSON.parse(JSON.stringify(pt)))}Et(null,ct)})}},Qe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Qe.prototype.reloadTile=function(ft,Et){var Vt=this.loaded,Pe=ft.uid;return Vt&&Vt[Pe]?tt.prototype.reloadTile.call(this,ft,Et):this.loadTile(ft,Et)},Qe.prototype.loadGeoJSON=function(ft,Et){if(ft.request)e.getJSON(ft.request,Et);else if(typeof ft.data=="string")try{return Et(null,JSON.parse(ft.data))}catch{return Et(new Error("Input data given to '"+ft.source+"' is not a valid GeoJSON object."))}else return Et(new Error("Input data given to '"+ft.source+"' is not a valid GeoJSON object."))},Qe.prototype.removeSource=function(ft,Et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Et()},Qe.prototype.getClusterExpansionZoom=function(ft,Et){try{Et(null,this._geoJSONIndex.getClusterExpansionZoom(ft.clusterId))}catch(Vt){Et(Vt)}},Qe.prototype.getClusterChildren=function(ft,Et){try{Et(null,this._geoJSONIndex.getChildren(ft.clusterId))}catch(Vt){Et(Vt)}},Qe.prototype.getClusterLeaves=function(ft,Et){try{Et(null,this._geoJSONIndex.getLeaves(ft.clusterId,ft.limit,ft.offset))}catch(Vt){Et(Vt)}},Qe}(d);function hr(tt){var Qe=tt.superclusterOptions,lt=tt.clusterProperties;if(!lt||!Qe)return Qe;for(var ft={},Et={},Vt={accumulated:null,zoom:0},Pe={properties:null},Se=Object.keys(lt),ot=0,ct=Se;ot<ct.length;ot+=1){var pt=ct[ot],St=lt[pt],xt=St[0],Pt=St[1],Xt=e.createExpression(Pt),or=e.createExpression(typeof xt=="string"?[xt,["accumulated"],["get",pt]]:xt);ft[pt]=Xt.value,Et[pt]=or.value}return Qe.map=function(Pr){Pe.properties=Pr;for(var Ar={},Er=0,Jr=Se;Er<Jr.length;Er+=1){var lr=Jr[Er];Ar[lr]=ft[lr].evaluate(Vt,Pe)}return Ar},Qe.reduce=function(Pr,Ar){Pe.properties=Ar;for(var Er=0,Jr=Se;Er<Jr.length;Er+=1){var lr=Jr[Er];Vt.accumulated=Pr[lr],Pr[lr]=Et[lr].evaluate(Vt,Pe)}},Qe}var Sr=function(Qe){var lt=this;this.self=Qe,this.actor=new e.Actor(Qe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:$t},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ft,Et){if(lt.workerSourceTypes[ft])throw new Error('Worker source with name "'+ft+'" already registered.');lt.workerSourceTypes[ft]=Et},this.self.registerRTLTextPlugin=function(ft){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ft.applyArabicShaping,e.plugin.processBidirectionalText=ft.processBidirectionalText,e.plugin.processStyledBidirectionalText=ft.processStyledBidirectionalText}};return Sr.prototype.setReferrer=function(Qe,lt){this.referrer=lt},Sr.prototype.setImages=function(Qe,lt,ft){this.availableImages[Qe]=lt;for(var Et in this.workerSources[Qe]){var Vt=this.workerSources[Qe][Et];for(var Pe in Vt)Vt[Pe].availableImages=lt}ft()},Sr.prototype.setLayers=function(Qe,lt,ft){this.getLayerIndex(Qe).replace(lt),ft()},Sr.prototype.updateLayers=function(Qe,lt,ft){this.getLayerIndex(Qe).update(lt.layers,lt.removedIds),ft()},Sr.prototype.loadTile=function(Qe,lt,ft){this.getWorkerSource(Qe,lt.type,lt.source).loadTile(lt,ft)},Sr.prototype.loadDEMTile=function(Qe,lt,ft){this.getDEMWorkerSource(Qe,lt.source).loadTile(lt,ft)},Sr.prototype.reloadTile=function(Qe,lt,ft){this.getWorkerSource(Qe,lt.type,lt.source).reloadTile(lt,ft)},Sr.prototype.abortTile=function(Qe,lt,ft){this.getWorkerSource(Qe,lt.type,lt.source).abortTile(lt,ft)},Sr.prototype.removeTile=function(Qe,lt,ft){this.getWorkerSource(Qe,lt.type,lt.source).removeTile(lt,ft)},Sr.prototype.removeDEMTile=function(Qe,lt){this.getDEMWorkerSource(Qe,lt.source).removeTile(lt)},Sr.prototype.removeSource=function(Qe,lt,ft){if(!(!this.workerSources[Qe]||!this.workerSources[Qe][lt.type]||!this.workerSources[Qe][lt.type][lt.source])){var Et=this.workerSources[Qe][lt.type][lt.source];delete this.workerSources[Qe][lt.type][lt.source],Et.removeSource!==void 0?Et.removeSource(lt,ft):ft()}},Sr.prototype.loadWorkerSource=function(Qe,lt,ft){try{this.self.importScripts(lt.url),ft()}catch(Et){ft(Et.toString())}},Sr.prototype.syncRTLPluginState=function(Qe,lt,ft){try{e.plugin.setState(lt);var Et=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Et!=null){this.self.importScripts(Et);var Vt=e.plugin.isParsed(),Pe=Vt?void 0:new Error("RTL Text Plugin failed to import scripts from "+Et);ft(Pe,Vt)}}catch(Se){ft(Se.toString())}},Sr.prototype.getAvailableImages=function(Qe){var lt=this.availableImages[Qe];return lt||(lt=[]),lt},Sr.prototype.getLayerIndex=function(Qe){var lt=this.layerIndexes[Qe];return lt||(lt=this.layerIndexes[Qe]=new r),lt},Sr.prototype.getWorkerSource=function(Qe,lt,ft){var Et=this;if(this.workerSources[Qe]||(this.workerSources[Qe]={}),this.workerSources[Qe][lt]||(this.workerSources[Qe][lt]={}),!this.workerSources[Qe][lt][ft]){var Vt={send:function(Pe,Se,ot){Et.actor.send(Pe,Se,ot,Qe)}};this.workerSources[Qe][lt][ft]=new this.workerSourceTypes[lt](Vt,this.getLayerIndex(Qe),this.getAvailableImages(Qe))}return this.workerSources[Qe][lt][ft]},Sr.prototype.getDEMWorkerSource=function(Qe,lt){return this.demWorkerSources[Qe]||(this.demWorkerSources[Qe]={}),this.demWorkerSources[Qe][lt]||(this.demWorkerSources[Qe][lt]=new m),this.demWorkerSources[Qe][lt]},Sr.prototype.enforceCacheSizeLimit=function(Qe,lt){e.enforceCacheSizeLimit(lt)},typeof WorkerGlobalScope<"u"&&typeof e.window<"u"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Sr(e.window)),Sr}),T(["./shared"],function(e){var a=e.createCommonjsModule(function(ve){ve.exports?ve.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=de);function W(Xr){return!de(Xr)}function de(Xr){if(!$())return"not a browser";if(!ge())return"insufficent Array support";if(!Ce())return"insufficient Function support";if(!Fe())return"insufficient Object support";if(!Je())return"insufficient JSON support";if(!ht())return"insufficient worker support";if(!Dt())return"insufficient Uint8ClampedArray support";if(!er())return"insufficient ArrayBuffer support";if(!pr())return"insufficient Canvas/getImageData support";if(!Rr(Xr&&Xr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function $(){return typeof window<"u"&&typeof document<"u"}function ge(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ce(){return Function.prototype&&Function.prototype.bind}function Fe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Je(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ht(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Xr=new Blob([""],{type:"text/javascript"}),rn=URL.createObjectURL(Xr),xn,Fn;try{Fn=new Worker(rn),xn=!0}catch{xn=!1}return Fn&&Fn.terminate(),URL.revokeObjectURL(rn),xn}function Dt(){return"Uint8ClampedArray"in window}function er(){return ArrayBuffer.isView}function pr(){var Xr=document.createElement("canvas");Xr.width=Xr.height=1;var rn=Xr.getContext("2d");if(!rn)return!1;var xn=rn.getImageData(0,0,1,1);return xn&&xn.width===Xr.width}var mr={};function Rr(Xr){return mr[Xr]===void 0&&(mr[Xr]=$r(Xr)),mr[Xr]}W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Zr(Xr){var rn=document.createElement("canvas"),xn=Object.create(W.webGLContextAttributes);return xn.failIfMajorPerformanceCaveat=Xr,rn.probablySupportsContext?rn.probablySupportsContext("webgl",xn)||rn.probablySupportsContext("experimental-webgl",xn):rn.supportsContext?rn.supportsContext("webgl",xn)||rn.supportsContext("experimental-webgl",xn):rn.getContext("webgl",xn)||rn.getContext("experimental-webgl",xn)}function $r(Xr){var rn=Zr(Xr);if(!rn)return!1;var xn=rn.createShader(rn.VERTEX_SHADER);return!xn||rn.isContextLost()?!1:(rn.shaderSource(xn,"void main() {}"),rn.compileShader(xn),rn.getShaderParameter(xn,rn.COMPILE_STATUS)===!0)}}),i={};i.create=function(ve,W,de){var $=e.window.document.createElement(ve);return W!==void 0&&($.className=W),de&&de.appendChild($),$},i.createNS=function(ve,W){var de=e.window.document.createElementNS(ve,W);return de};var n=e.window.document.documentElement.style;function r(ve){if(!n)return ve[0];for(var W=0;W<ve.length;W++)if(ve[W]in n)return ve[W];return ve[0]}var v=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s;i.disableDrag=function(){n&&v&&(s=n[v],n[v]="none")},i.enableDrag=function(){n&&v&&(n[v]=s)};var o=r(["transform","WebkitTransform"]);i.setTransform=function(ve,W){ve.style[o]=W};var b=!1;try{var g=Object.defineProperty({},"passive",{get:function(){b=!0}});e.window.addEventListener("test",g,g),e.window.removeEventListener("test",g,g)}catch{b=!1}i.addEventListener=function(ve,W,de,$){$===void 0&&($={}),"passive"in $&&b?ve.addEventListener(W,de,$):ve.addEventListener(W,de,$.capture)},i.removeEventListener=function(ve,W,de,$){$===void 0&&($={}),"passive"in $&&b?ve.removeEventListener(W,de,$):ve.removeEventListener(W,de,$.capture)};var d=function(ve){ve.preventDefault(),ve.stopPropagation(),e.window.removeEventListener("click",d,!0)};i.suppressClick=function(){e.window.addEventListener("click",d,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",d,!0)},0)},i.mousePos=function(ve,W){var de=ve.getBoundingClientRect();return new e.Point(W.clientX-de.left-ve.clientLeft,W.clientY-de.top-ve.clientTop)},i.touchPos=function(ve,W){for(var de=ve.getBoundingClientRect(),$=[],ge=0;ge<W.length;ge++)$.push(new e.Point(W[ge].clientX-de.left-ve.clientLeft,W[ge].clientY-de.top-ve.clientTop));return $},i.mouseButton=function(ve){return typeof e.window.InstallTrigger<"u"&&ve.button===2&&ve.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ve.button},i.remove=function(ve){ve.parentNode&&ve.parentNode.removeChild(ve)};function f(ve,W,de){var $,ge,Ce,Fe=e.browser.devicePixelRatio>1?"@2x":"",Je=e.getJSON(W.transformRequest(W.normalizeSpriteURL(ve,Fe,".json"),e.ResourceType.SpriteJSON),function(er,pr){Je=null,Ce||(Ce=er,$=pr,Dt())}),ht=e.getImage(W.transformRequest(W.normalizeSpriteURL(ve,Fe,".png"),e.ResourceType.SpriteImage),function(er,pr){ht=null,Ce||(Ce=er,ge=pr,Dt())});function Dt(){if(Ce)de(Ce);else if($&&ge){var er=e.browser.getImageData(ge),pr={};for(var mr in $){var Rr=$[mr],Zr=Rr.width,$r=Rr.height,Xr=Rr.x,rn=Rr.y,xn=Rr.sdf,Fn=Rr.pixelRatio,Gn=Rr.stretchX,oa=Rr.stretchY,ca=Rr.content,la=new e.RGBAImage({width:Zr,height:$r});e.RGBAImage.copy(er,la,{x:Xr,y:rn},{x:0,y:0},{width:Zr,height:$r}),pr[mr]={data:la,pixelRatio:Fn,sdf:xn,stretchX:Gn,stretchY:oa,content:ca}}de(null,pr)}}return{cancel:function(){Je&&(Je.cancel(),Je=null),ht&&(ht.cancel(),ht=null)}}}function m(ve){var W=ve.userImage;if(W&&W.render){var de=W.render();if(de)return ve.data.replace(new Uint8Array(W.data.buffer)),!0}return!1}var l=1,x=function(ve){function W(){ve.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function($){if(this.loaded!==$&&(this.loaded=$,$)){for(var ge=0,Ce=this.requestors;ge<Ce.length;ge+=1){var Fe=Ce[ge],Je=Fe.ids,ht=Fe.callback;this._notify(Je,ht)}this.requestors=[]}},W.prototype.getImage=function($){return this.images[$]},W.prototype.addImage=function($,ge){this._validate($,ge)&&(this.images[$]=ge)},W.prototype._validate=function($,ge){var Ce=!0;return this._validateStretch(ge.stretchX,ge.data&&ge.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "stretchX" value'))),Ce=!1),this._validateStretch(ge.stretchY,ge.data&&ge.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "stretchY" value'))),Ce=!1),this._validateContent(ge.content,ge)||(this.fire(new e.ErrorEvent(new Error('Image "'+$+'" has invalid "content" value'))),Ce=!1),Ce},W.prototype._validateStretch=function($,ge){if(!$)return!0;for(var Ce=0,Fe=0,Je=$;Fe<Je.length;Fe+=1){var ht=Je[Fe];if(ht[0]<Ce||ht[1]<ht[0]||ge<ht[1])return!1;Ce=ht[1]}return!0},W.prototype._validateContent=function($,ge){return $?!($.length!==4||$[0]<0||ge.data.width<$[0]||$[1]<0||ge.data.height<$[1]||$[2]<0||ge.data.width<$[2]||$[3]<0||ge.data.height<$[3]||$[2]<$[0]||$[3]<$[1]):!0},W.prototype.updateImage=function($,ge){var Ce=this.images[$];ge.version=Ce.version+1,this.images[$]=ge,this.updatedImages[$]=!0},W.prototype.removeImage=function($){var ge=this.images[$];delete this.images[$],delete this.patterns[$],ge.userImage&&ge.userImage.onRemove&&ge.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function($,ge){var Ce=!0;if(!this.isLoaded())for(var Fe=0,Je=$;Fe<Je.length;Fe+=1){var ht=Je[Fe];this.images[ht]||(Ce=!1)}this.isLoaded()||Ce?this._notify($,ge):this.requestors.push({ids:$,callback:ge})},W.prototype._notify=function($,ge){for(var Ce={},Fe=0,Je=$;Fe<Je.length;Fe+=1){var ht=Je[Fe];this.images[ht]||this.fire(new e.Event("styleimagemissing",{id:ht}));var Dt=this.images[ht];Dt?Ce[ht]={data:Dt.data.clone(),pixelRatio:Dt.pixelRatio,sdf:Dt.sdf,version:Dt.version,stretchX:Dt.stretchX,stretchY:Dt.stretchY,content:Dt.content,hasRenderCallback:Boolean(Dt.userImage&&Dt.userImage.render)}:e.warnOnce('Image "'+ht+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ge(null,Ce)},W.prototype.getPixelSize=function(){var $=this.atlasImage,ge=$.width,Ce=$.height;return{width:ge,height:Ce}},W.prototype.getPattern=function($){var ge=this.patterns[$],Ce=this.getImage($);if(!Ce)return null;if(ge&&ge.position.version===Ce.version)return ge.position;if(ge)ge.position.version=Ce.version;else{var Fe=Ce.data.width+l*2,Je=Ce.data.height+l*2,ht={w:Fe,h:Je,x:0,y:0},Dt=new e.ImagePosition(ht,Ce);this.patterns[$]={bin:ht,position:Dt}}return this._updatePatternAtlas(),this.patterns[$].position},W.prototype.bind=function($){var ge=$.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture($,this.atlasImage,ge.RGBA),this.atlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var $=[];for(var ge in this.patterns)$.push(this.patterns[ge].bin);var Ce=e.potpack($),Fe=Ce.w,Je=Ce.h,ht=this.atlasImage;ht.resize({width:Fe||1,height:Je||1});for(var Dt in this.patterns){var er=this.patterns[Dt],pr=er.bin,mr=pr.x+l,Rr=pr.y+l,Zr=this.images[Dt].data,$r=Zr.width,Xr=Zr.height;e.RGBAImage.copy(Zr,ht,{x:0,y:0},{x:mr,y:Rr},{width:$r,height:Xr}),e.RGBAImage.copy(Zr,ht,{x:0,y:Xr-1},{x:mr,y:Rr-1},{width:$r,height:1}),e.RGBAImage.copy(Zr,ht,{x:0,y:0},{x:mr,y:Rr+Xr},{width:$r,height:1}),e.RGBAImage.copy(Zr,ht,{x:$r-1,y:0},{x:mr-1,y:Rr},{width:1,height:Xr}),e.RGBAImage.copy(Zr,ht,{x:0,y:0},{x:mr+$r,y:Rr},{width:1,height:Xr})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function($){for(var ge=0,Ce=$;ge<Ce.length;ge+=1){var Fe=Ce[ge];if(!this.callbackDispatchedThisFrame[Fe]){this.callbackDispatchedThisFrame[Fe]=!0;var Je=this.images[Fe],ht=m(Je);ht&&this.updateImage(Fe,Je)}}},W}(e.Evented);function u(ve,W,de,$,ge){var Ce=W*256,Fe=Ce+255,Je=$.transformRequest($.normalizeGlyphsURL(de).replace("{fontstack}",ve).replace("{range}",Ce+"-"+Fe),e.ResourceType.Glyphs);e.getArrayBuffer(Je,function(ht,Dt){if(ht)ge(ht);else if(Dt){for(var er={},pr=0,mr=e.parseGlyphPBF(Dt);pr<mr.length;pr+=1){var Rr=mr[pr];er[Rr.id]=Rr}ge(null,er)}})}var M=_,w=_,p=1e20;function _(ve,W,de,$,ge,Ce){this.fontSize=ve||24,this.buffer=W===void 0?3:W,this.cutoff=$||.25,this.fontFamily=ge||"sans-serif",this.fontWeight=Ce||"normal",this.radius=de||8;var Fe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Fe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Fe*Fe),this.gridInner=new Float64Array(Fe*Fe),this.f=new Float64Array(Fe),this.d=new Float64Array(Fe),this.z=new Float64Array(Fe+1),this.v=new Int16Array(Fe),this.middle=Math.round(Fe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}_.prototype.draw=function(ve){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ve,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),de=new Uint8ClampedArray(this.size*this.size),$=0;$<this.size*this.size;$++){var ge=W.data[$*4+3]/255;this.gridOuter[$]=ge===1?0:ge===0?p:Math.pow(Math.max(0,.5-ge),2),this.gridInner[$]=ge===1?p:ge===0?0:Math.pow(Math.max(0,ge-.5),2)}for(h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),$=0;$<this.size*this.size;$++){var Ce=this.gridOuter[$]-this.gridInner[$];de[$]=Math.max(0,Math.min(255,Math.round(255-255*(Ce/this.radius+this.cutoff))))}return de};function h(ve,W,de,$,ge,Ce,Fe){for(var Je=0;Je<W;Je++){for(var ht=0;ht<de;ht++)$[ht]=ve[ht*W+Je];for(L($,ge,Ce,Fe,de),ht=0;ht<de;ht++)ve[ht*W+Je]=ge[ht]}for(ht=0;ht<de;ht++){for(Je=0;Je<W;Je++)$[Je]=ve[ht*W+Je];for(L($,ge,Ce,Fe,W),Je=0;Je<W;Je++)ve[ht*W+Je]=Math.sqrt(ge[Je])}}function L(ve,W,de,$,ge){de[0]=0,$[0]=-p,$[1]=+p;for(var Ce=1,Fe=0;Ce<ge;Ce++){for(var Je=(ve[Ce]+Ce*Ce-(ve[de[Fe]]+de[Fe]*de[Fe]))/(2*Ce-2*de[Fe]);Je<=$[Fe];)Fe--,Je=(ve[Ce]+Ce*Ce-(ve[de[Fe]]+de[Fe]*de[Fe]))/(2*Ce-2*de[Fe]);Fe++,de[Fe]=Ce,$[Fe]=Je,$[Fe+1]=+p}for(Ce=0,Fe=0;Ce<ge;Ce++){for(;$[Fe+1]<Ce;)Fe++;W[Ce]=(Ce-de[Fe])*(Ce-de[Fe])+ve[de[Fe]]}}M.default=w;var E=function(W,de){this.requestManager=W,this.localIdeographFontFamily=de,this.entries={}};E.prototype.setURL=function(W){this.url=W},E.prototype.getGlyphs=function(W,de){var $=this,ge=[];for(var Ce in W)for(var Fe=0,Je=W[Ce];Fe<Je.length;Fe+=1){var ht=Je[Fe];ge.push({stack:Ce,id:ht})}e.asyncAll(ge,function(Dt,er){var pr=Dt.stack,mr=Dt.id,Rr=$.entries[pr];Rr||(Rr=$.entries[pr]={glyphs:{},requests:{},ranges:{}});var Zr=Rr.glyphs[mr];if(Zr!==void 0){er(null,{stack:pr,id:mr,glyph:Zr});return}if(Zr=$._tinySDF(Rr,pr,mr),Zr){Rr.glyphs[mr]=Zr,er(null,{stack:pr,id:mr,glyph:Zr});return}var $r=Math.floor(mr/256);if($r*256>65535){er(new Error("glyphs > 65535 not supported"));return}if(Rr.ranges[$r]){er(null,{stack:pr,id:mr,glyph:Zr});return}var Xr=Rr.requests[$r];Xr||(Xr=Rr.requests[$r]=[],E.loadGlyphRange(pr,$r,$.url,$.requestManager,function(rn,xn){if(xn){for(var Fn in xn)$._doesCharSupportLocalGlyph(+Fn)||(Rr.glyphs[+Fn]=xn[+Fn]);Rr.ranges[$r]=!0}for(var Gn=0,oa=Xr;Gn<oa.length;Gn+=1){var ca=oa[Gn];ca(rn,xn)}delete Rr.requests[$r]})),Xr.push(function(rn,xn){rn?er(rn):xn&&er(null,{stack:pr,id:mr,glyph:xn[mr]||null})})},function(Dt,er){if(Dt)de(Dt);else if(er){for(var pr={},mr=0,Rr=er;mr<Rr.length;mr+=1){var Zr=Rr[mr],$r=Zr.stack,Xr=Zr.id,rn=Zr.glyph;(pr[$r]||(pr[$r]={}))[Xr]=rn&&{id:rn.id,bitmap:rn.bitmap.clone(),metrics:rn.metrics}}de(null,pr)}})},E.prototype._doesCharSupportLocalGlyph=function(W){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](W)||e.isChar["Hangul Syllables"](W)||e.isChar.Hiragana(W)||e.isChar.Katakana(W))},E.prototype._tinySDF=function(W,de,$){var ge=this.localIdeographFontFamily;if(!!ge&&!!this._doesCharSupportLocalGlyph($)){var Ce=W.tinySDF;if(!Ce){var Fe="400";/bold/i.test(de)?Fe="900":/medium/i.test(de)?Fe="500":/light/i.test(de)&&(Fe="200"),Ce=W.tinySDF=new E.TinySDF(24,3,8,.25,ge,Fe)}return{id:$,bitmap:new e.AlphaImage({width:30,height:30},Ce.draw(String.fromCharCode($))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},E.loadGlyphRange=u,E.TinySDF=M;var S=function(){this.specification=e.styleSpec.light.position};S.prototype.possiblyEvaluate=function(W,de){return e.sphericalToCartesian(W.expression.evaluate(de))},S.prototype.interpolate=function(W,de,$){return{x:e.number(W.x,de.x,$),y:e.number(W.y,de.y,$),z:e.number(W.z,de.z,$)}};var P=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new S,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F="-transition",I=function(ve){function W(de){ve.call(this),this._transitionable=new e.Transitionable(P),this.setLight(de),this._transitioning=this._transitionable.untransitioned()}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function($,ge){if(ge===void 0&&(ge={}),!this._validate(e.validateLight,$,ge))for(var Ce in $){var Fe=$[Ce];e.endsWith(Ce,F)?this._transitionable.setTransition(Ce.slice(0,-F.length),Fe):this._transitionable.setValue(Ce,Fe)}},W.prototype.updateTransitions=function($){this._transitioning=this._transitionable.transitioned($,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function($){this.properties=this._transitioning.possiblyEvaluate($)},W.prototype._validate=function($,ge,Ce){return Ce&&Ce.validate===!1?!1:e.emitValidationErrors(this,$.call(e.validateStyle,e.extend({value:ge,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},W}(e.Evented),D=function(W,de){this.width=W,this.height=de,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(W,de){var $=W.join(",")+String(de);return this.dashEntry[$]||(this.dashEntry[$]=this.addDash(W,de)),this.dashEntry[$]},D.prototype.getDashRanges=function(W,de,$){var ge=W.length%2===1,Ce=[],Fe=ge?-W[W.length-1]*$:0,Je=W[0]*$,ht=!0;Ce.push({left:Fe,right:Je,isDash:ht,zeroLength:W[0]===0});for(var Dt=W[0],er=1;er<W.length;er++){ht=!ht;var pr=W[er];Fe=Dt*$,Dt+=pr,Je=Dt*$,Ce.push({left:Fe,right:Je,isDash:ht,zeroLength:pr===0})}return Ce},D.prototype.addRoundDash=function(W,de,$){for(var ge=de/2,Ce=-$;Ce<=$;Ce++)for(var Fe=this.nextRow+$+Ce,Je=this.width*Fe,ht=0,Dt=W[ht],er=0;er<this.width;er++){er/Dt.right>1&&(Dt=W[++ht]);var pr=Math.abs(er-Dt.left),mr=Math.abs(er-Dt.right),Rr=Math.min(pr,mr),Zr=void 0,$r=Ce/$*(ge+1);if(Dt.isDash){var Xr=ge-Math.abs($r);Zr=Math.sqrt(Rr*Rr+Xr*Xr)}else Zr=ge-Math.sqrt(Rr*Rr+$r*$r);this.data[Je+er]=Math.max(0,Math.min(255,Zr+128))}},D.prototype.addRegularDash=function(W){for(var de=W.length-1;de>=0;--de){var $=W[de],ge=W[de+1];$.zeroLength?W.splice(de,1):ge&&ge.isDash===$.isDash&&(ge.left=$.left,W.splice(de,1))}var Ce=W[0],Fe=W[W.length-1];Ce.isDash===Fe.isDash&&(Ce.left=Fe.left-this.width,Fe.right=Ce.right+this.width);for(var Je=this.width*this.nextRow,ht=0,Dt=W[ht],er=0;er<this.width;er++){er/Dt.right>1&&(Dt=W[++ht]);var pr=Math.abs(er-Dt.left),mr=Math.abs(er-Dt.right),Rr=Math.min(pr,mr),Zr=Dt.isDash?Rr:-Rr;this.data[Je+er]=Math.max(0,Math.min(255,Zr+128))}},D.prototype.addDash=function(W,de){var $=de?7:0,ge=2*$+1;if(this.nextRow+ge>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ce=0,Fe=0;Fe<W.length;Fe++)Ce+=W[Fe];if(Ce!==0){var Je=this.width/Ce,ht=this.getDashRanges(W,this.width,Je);de?this.addRoundDash(ht,Je,$):this.addRegularDash(ht)}var Dt={y:(this.nextRow+$+.5)/this.height,height:2*$/this.height,width:Ce};return this.nextRow+=ge,this.dirty=!0,Dt},D.prototype.bind=function(W){var de=W.gl;this.texture?(de.bindTexture(de.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,de.texSubImage2D(de.TEXTURE_2D,0,0,0,this.width,this.height,de.ALPHA,de.UNSIGNED_BYTE,this.data))):(this.texture=de.createTexture(),de.bindTexture(de.TEXTURE_2D,this.texture),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),de.texImage2D(de.TEXTURE_2D,0,de.ALPHA,this.width,this.height,0,de.ALPHA,de.UNSIGNED_BYTE,this.data))};var R=function ve(W,de){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var $=this.workerPool.acquire(this.id),ge=0;ge<$.length;ge++){var Ce=$[ge],Fe=new ve.Actor(Ce,de,this.id);Fe.name="Worker "+ge,this.actors.push(Fe)}};R.prototype.broadcast=function(W,de,$){$=$||function(){},e.asyncAll(this.actors,function(ge,Ce){ge.send(W,de,Ce)},$)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(W){W.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=e.Actor;function O(ve,W,de){var $=function(ge,Ce){if(ge)return de(ge);if(Ce){var Fe=e.pick(e.extend(Ce,ve),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ce.vector_layers&&(Fe.vectorLayers=Ce.vector_layers,Fe.vectorLayerIds=Fe.vectorLayers.map(function(Je){return Je.id})),Fe.tiles=W.canonicalizeTileset(Fe,ve.url),de(null,Fe)}};return ve.url?e.getJSON(W.transformRequest(W.normalizeSourceURL(ve.url),e.ResourceType.Source),$):e.browser.frame(function(){return $(null,ve)})}var z=function(W,de,$){this.bounds=e.LngLatBounds.convert(this.validateBounds(W)),this.minzoom=de||0,this.maxzoom=$||24};z.prototype.validateBounds=function(W){return!Array.isArray(W)||W.length!==4?[-180,-90,180,90]:[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]},z.prototype.contains=function(W){var de=Math.pow(2,W.z),$={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*de),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*de),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*de),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*de)},ge=W.x>=$.minX&&W.x<$.maxX&&W.y>=$.minY&&W.y<$.maxY;return ge};var G=function(ve){function W(de,$,ge,Ce){if(ve.call(this),this.id=de,this.dispatcher=ge,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick($,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},$),this._collectResourceTiming=$.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ce)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var $=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(ge,Ce){$._tileJSONRequest=null,$._loaded=!0,ge?$.fire(new e.ErrorEvent(ge)):Ce&&(e.extend($,Ce),Ce.bounds&&($.tileBounds=new z(Ce.bounds,$.minzoom,$.maxzoom)),e.postTurnstileEvent(Ce.tiles,$.map._requestManager._customAccessToken),e.postMapLoadEvent(Ce.tiles,$.map._getMapId(),$.map._requestManager._skuToken,$.map._requestManager._customAccessToken),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function($){return!this.tileBounds||this.tileBounds.contains($.canonical)},W.prototype.onAdd=function($){this.map=$,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.loadTile=function($,ge){var Ce=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme)),Fe={request:this.map._requestManager.transformRequest(Ce,e.ResourceType.Tile),uid:$.uid,tileID:$.tileID,zoom:$.tileID.overscaledZ,tileSize:this.tileSize*$.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Fe.request.collectResourceTiming=this._collectResourceTiming,!$.actor||$.state==="expired"?($.actor=this.dispatcher.getActor(),$.request=$.actor.send("loadTile",Fe,Je.bind(this))):$.state==="loading"?$.reloadCallback=ge:$.request=$.actor.send("reloadTile",Fe,Je.bind(this));function Je(ht,Dt){if(delete $.request,$.aborted)return ge(null);if(ht&&ht.status!==404)return ge(ht);Dt&&Dt.resourceTiming&&($.resourceTiming=Dt.resourceTiming),this.map._refreshExpiredTiles&&Dt&&$.setExpiryData(Dt),$.loadVectorData(Dt,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),ge(null),$.reloadCallback&&(this.loadTile($,$.reloadCallback),$.reloadCallback=null)}},W.prototype.abortTile=function($){$.request&&($.request.cancel(),delete $.request),$.actor&&$.actor.send("abortTile",{uid:$.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function($){$.unloadVectorData(),$.actor&&$.actor.send("removeTile",{uid:$.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(e.Evented),Y=function(ve){function W(de,$,ge,Ce){ve.call(this),this.id=de,this.dispatcher=ge,this.setEventedParent(Ce),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},$),e.extend(this,e.pick($,["url","scheme","tileSize"]))}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var $=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(ge,Ce){$._tileJSONRequest=null,$._loaded=!0,ge?$.fire(new e.ErrorEvent(ge)):Ce&&(e.extend($,Ce),Ce.bounds&&($.tileBounds=new z(Ce.bounds,$.minzoom,$.maxzoom)),e.postTurnstileEvent(Ce.tiles),e.postMapLoadEvent(Ce.tiles,$.map._getMapId(),$.map._requestManager._skuToken),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),$.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function($){this.map=$,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.hasTile=function($){return!this.tileBounds||this.tileBounds.contains($.canonical)},W.prototype.loadTile=function($,ge){var Ce=this,Fe=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);$.request=e.getImage(this.map._requestManager.transformRequest(Fe,e.ResourceType.Tile),function(Je,ht){if(delete $.request,$.aborted)$.state="unloaded",ge(null);else if(Je)$.state="errored",ge(Je);else if(ht){Ce.map._refreshExpiredTiles&&$.setExpiryData(ht),delete ht.cacheControl,delete ht.expires;var Dt=Ce.map.painter.context,er=Dt.gl;$.texture=Ce.map.painter.getTileTexture(ht.width),$.texture?$.texture.update(ht,{useMipmap:!0}):($.texture=new e.Texture(Dt,ht,er.RGBA,{useMipmap:!0}),$.texture.bind(er.LINEAR,er.CLAMP_TO_EDGE,er.LINEAR_MIPMAP_NEAREST),Dt.extTextureFilterAnisotropic&&er.texParameterf(er.TEXTURE_2D,Dt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Dt.extTextureFilterAnisotropicMax)),$.state="loaded",e.cacheEntryPossiblyAdded(Ce.dispatcher),ge(null)}})},W.prototype.abortTile=function($,ge){$.request&&($.request.cancel(),delete $.request),ge()},W.prototype.unloadTile=function($,ge){$.texture&&this.map.painter.saveTileTexture($.texture),ge()},W.prototype.hasTransition=function(){return!1},W}(e.Evented),ee=function(ve){function W(de,$,ge,Ce){ve.call(this,de,$,ge,Ce),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},$),this.encoding=$.encoding||"mapbox"}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function($,ge){var Ce=this.map._requestManager.normalizeTileURL($.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);$.request=e.getImage(this.map._requestManager.transformRequest(Ce,e.ResourceType.Tile),Fe.bind(this)),$.neighboringTiles=this._getNeighboringTiles($.tileID);function Fe(ht,Dt){if(delete $.request,$.aborted)$.state="unloaded",ge(null);else if(ht)$.state="errored",ge(ht);else if(Dt){this.map._refreshExpiredTiles&&$.setExpiryData(Dt),delete Dt.cacheControl,delete Dt.expires;var er=e.window.ImageBitmap&&Dt instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),pr=er?Dt:e.browser.getImageData(Dt,1),mr={uid:$.uid,coord:$.tileID,source:this.id,rawImageData:pr,encoding:this.encoding};(!$.actor||$.state==="expired")&&($.actor=this.dispatcher.getActor(),$.actor.send("loadDEMTile",mr,Je.bind(this)))}}function Je(ht,Dt){ht&&($.state="errored",ge(ht)),Dt&&($.dem=Dt,$.needsHillshadePrepare=!0,$.state="loaded",ge(null))}},W.prototype._getNeighboringTiles=function($){var ge=$.canonical,Ce=Math.pow(2,ge.z),Fe=(ge.x-1+Ce)%Ce,Je=ge.x===0?$.wrap-1:$.wrap,ht=(ge.x+1+Ce)%Ce,Dt=ge.x+1===Ce?$.wrap+1:$.wrap,er={};return er[new e.OverscaledTileID($.overscaledZ,Je,ge.z,Fe,ge.y).key]={backfilled:!1},er[new e.OverscaledTileID($.overscaledZ,Dt,ge.z,ht,ge.y).key]={backfilled:!1},ge.y>0&&(er[new e.OverscaledTileID($.overscaledZ,Je,ge.z,Fe,ge.y-1).key]={backfilled:!1},er[new e.OverscaledTileID($.overscaledZ,$.wrap,ge.z,ge.x,ge.y-1).key]={backfilled:!1},er[new e.OverscaledTileID($.overscaledZ,Dt,ge.z,ht,ge.y-1).key]={backfilled:!1}),ge.y+1<Ce&&(er[new e.OverscaledTileID($.overscaledZ,Je,ge.z,Fe,ge.y+1).key]={backfilled:!1},er[new e.OverscaledTileID($.overscaledZ,$.wrap,ge.z,ge.x,ge.y+1).key]={backfilled:!1},er[new e.OverscaledTileID($.overscaledZ,Dt,ge.z,ht,ge.y+1).key]={backfilled:!1}),er},W.prototype.unloadTile=function($){$.demTexture&&this.map.painter.saveTileTexture($.demTexture),$.fbo&&($.fbo.destroy(),delete $.fbo),$.dem&&delete $.dem,delete $.neighboringTiles,$.state="unloaded",$.actor&&$.actor.send("removeDEMTile",{uid:$.uid,source:this.id})},W}(Y),j=function(ve){function W(de,$,ge,Ce){ve.call(this),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ge.getActor(),this.setEventedParent(Ce),this._data=$.data,this._options=e.extend({},$),this._collectResourceTiming=$.collectResourceTiming,this._resourceTiming=[],$.maxzoom!==void 0&&(this.maxzoom=$.maxzoom),$.type&&(this.type=$.type),$.attribution&&(this.attribution=$.attribution),this.promoteId=$.promoteId;var Fe=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:$.cluster||!1,geojsonVtOptions:{buffer:($.buffer!==void 0?$.buffer:128)*Fe,tolerance:($.tolerance!==void 0?$.tolerance:.375)*Fe,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:$.lineMetrics||!1,generateId:$.generateId||!1},superclusterOptions:{maxZoom:$.clusterMaxZoom!==void 0?Math.min($.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:($.clusterRadius||50)*Fe,log:!1,generateId:$.generateId||!1},clusterProperties:$.clusterProperties},$.workerOptions)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var $=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ge){if(ge){$.fire(new e.ErrorEvent(ge));return}var Ce={dataType:"source",sourceDataType:"metadata"};$._collectResourceTiming&&$._resourceTiming&&$._resourceTiming.length>0&&(Ce.resourceTiming=$._resourceTiming,$._resourceTiming=[]),$.fire(new e.Event("data",Ce))})},W.prototype.onAdd=function($){this.map=$,this.load()},W.prototype.setData=function($){var ge=this;return this._data=$,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ce){if(Ce){ge.fire(new e.ErrorEvent(Ce));return}var Fe={dataType:"source",sourceDataType:"content"};ge._collectResourceTiming&&ge._resourceTiming&&ge._resourceTiming.length>0&&(Fe.resourceTiming=ge._resourceTiming,ge._resourceTiming=[]),ge.fire(new e.Event("data",Fe))}),this},W.prototype.getClusterExpansionZoom=function($,ge){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:$,source:this.id},ge),this},W.prototype.getClusterChildren=function($,ge){return this.actor.send("geojson.getClusterChildren",{clusterId:$,source:this.id},ge),this},W.prototype.getClusterLeaves=function($,ge,Ce,Fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:$,limit:ge,offset:Ce},Fe),this},W.prototype._updateWorkerData=function($){var ge=this;this._loaded=!1;var Ce=e.extend({},this.workerOptions),Fe=this._data;typeof Fe=="string"?(Ce.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Fe),e.ResourceType.Source),Ce.request.collectResourceTiming=this._collectResourceTiming):Ce.data=JSON.stringify(Fe),this.actor.send(this.type+".loadData",Ce,function(Je,ht){ge._removed||ht&&ht.abandoned||(ge._loaded=!0,ht&&ht.resourceTiming&&ht.resourceTiming[ge.id]&&(ge._resourceTiming=ht.resourceTiming[ge.id].slice(0)),ge.actor.send(ge.type+".coalesce",{source:Ce.source},null),$(Je))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function($,ge){var Ce=this,Fe=$.actor?"reloadTile":"loadTile";$.actor=this.actor;var Je={type:this.type,uid:$.uid,tileID:$.tileID,zoom:$.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};$.request=this.actor.send(Fe,Je,function(ht,Dt){return delete $.request,$.unloadVectorData(),$.aborted?ge(null):ht?ge(ht):($.loadVectorData(Dt,Ce.map.painter,Fe==="reloadTile"),ge(null))})},W.prototype.abortTile=function($){$.request&&($.request.cancel(),delete $.request),$.aborted=!0},W.prototype.unloadTile=function($){$.unloadVectorData(),this.actor.send("removeTile",{uid:$.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(e.Evented),X=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ae=function(ve){function W(de,$,ge,Ce){ve.call(this),this.id=de,this.dispatcher=ge,this.coordinates=$.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ce),this.options=$}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function($,ge){var Ce=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Fe,Je){Ce._loaded=!0,Fe?Ce.fire(new e.ErrorEvent(Fe)):Je&&(Ce.image=Je,$&&(Ce.coordinates=$),ge&&ge(),Ce._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function($){var ge=this;return!this.image||!$.url?this:(this.options.url=$.url,this.load($.coordinates,function(){ge.texture=null}),this)},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function($){this.map=$,this.load()},W.prototype.setCoordinates=function($){var ge=this;this.coordinates=$;var Ce=$.map(e.MercatorCoordinate.fromLngLat);this.tileID=he(Ce),this.minzoom=this.maxzoom=this.tileID.z;var Fe=Ce.map(function(Je){return ge.tileID.getTilePoint(Je)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Fe[0].x,Fe[0].y,0,0),this._boundsArray.emplaceBack(Fe[1].x,Fe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Fe[3].x,Fe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Fe[2].x,Fe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var $=this.map.painter.context,ge=$.gl;this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture($,this.image,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ce in this.tiles){var Fe=this.tiles[Ce];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},W.prototype.loadTile=function($,ge){this.tileID&&this.tileID.equals($.tileID.canonical)?(this.tiles[String($.tileID.wrap)]=$,$.buckets={},ge(null)):($.state="errored",ge(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(e.Evented);function he(ve){for(var W=1/0,de=1/0,$=-1/0,ge=-1/0,Ce=0,Fe=ve;Ce<Fe.length;Ce+=1){var Je=Fe[Ce];W=Math.min(W,Je.x),de=Math.min(de,Je.y),$=Math.max($,Je.x),ge=Math.max(ge,Je.y)}var ht=$-W,Dt=ge-de,er=Math.max(ht,Dt),pr=Math.max(0,Math.floor(-Math.log(er)/Math.LN2)),mr=Math.pow(2,pr);return new e.CanonicalTileID(pr,Math.floor((W+$)/2*mr),Math.floor((de+ge)/2*mr))}var K=function(ve){function W(de,$,ge,Ce){ve.call(this,de,$,ge,Ce),this.roundZoom=!0,this.type="video",this.options=$}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var $=this;this._loaded=!1;var ge=this.options;this.urls=[];for(var Ce=0,Fe=ge.urls;Ce<Fe.length;Ce+=1){var Je=Fe[Ce];this.urls.push(this.map._requestManager.transformRequest(Je,e.ResourceType.Source).url)}e.getVideo(this.urls,function(ht,Dt){$._loaded=!0,ht?$.fire(new e.ErrorEvent(ht)):Dt&&($.video=Dt,$.video.loop=!0,$.video.addEventListener("playing",function(){$.map.triggerRepaint()}),$.map&&$.video.play(),$._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function($){if(this.video){var ge=this.video.seekable;$<ge.start(0)||$>ge.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ge.start(0)+" and "+ge.end(0)+"-second mark."))):this.video.currentTime=$}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function($){this.map||(this.map=$,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var $=this.map.painter.context,ge=$.gl;this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),ge.texSubImage2D(ge.TEXTURE_2D,0,0,0,ge.RGBA,ge.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture($,this.video,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ce in this.tiles){var Fe=this.tiles[Ce];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(ae),J=function(ve){function W(de,$,ge,Ce){ve.call(this,de,$,ge,Ce),$.coordinates?(!Array.isArray($.coordinates)||$.coordinates.length!==4||$.coordinates.some(function(Fe){return!Array.isArray(Fe)||Fe.length!==2||Fe.some(function(Je){return typeof Je!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "coordinates"'))),$.animate&&typeof $.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'optional "animate" property must be a boolean value'))),$.canvas?typeof $.canvas!="string"&&!($.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "canvas"'))),this.options=$,this.animate=$.animate!==void 0?$.animate:!0}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function($){this.map=$,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var $=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,$=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,$=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ge=this.map.painter.context,Ce=ge.gl;this.boundsBuffer||(this.boundsBuffer=ge.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?($||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(ge,this.canvas,Ce.RGBA,{premultiply:!0});for(var Fe in this.tiles){var Je=this.tiles[Fe];Je.state!=="loaded"&&(Je.state="loaded",Je.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var $=0,ge=[this.canvas.width,this.canvas.height];$<ge.length;$+=1){var Ce=ge[$];if(isNaN(Ce)||Ce<=0)return!0}return!1},W}(ae),U={vector:G,raster:Y,"raster-dem":ee,geojson:j,video:K,image:ae,canvas:J},H=function(ve,W,de,$){var ge=new U[W.type](ve,W,de,$);if(ge.id!==ve)throw new Error("Expected Source id to be "+ve+" instead of "+ge.id);return e.bindAll(["load","abort","unload","serialize","prepare"],ge),ge},q=function(ve){return U[ve]},re=function(ve,W){U[ve]=W};function Z(ve,W){var de=e.identity([]);return e.translate(de,de,[1,1,0]),e.scale(de,de,[ve.width*.5,ve.height*.5,1]),e.multiply(de,de,ve.calculatePosMatrix(W.toUnwrapped()))}function Q(ve,W,de){if(ve)for(var $=0,ge=ve;$<ge.length;$+=1){var Ce=ge[$],Fe=W[Ce];if(Fe&&Fe.source===de&&Fe.type==="fill-extrusion")return!0}else for(var Je in W){var ht=W[Je];if(ht.source===de&&ht.type==="fill-extrusion")return!0}return!1}function ie(ve,W,de,$,ge,Ce){var Fe=Q(ge&&ge.layers,W,ve.id),Je=Ce.maxPitchScaleFactor(),ht=ve.tilesIn($,Je,Fe);ht.sort(le);for(var Dt=[],er=0,pr=ht;er<pr.length;er+=1){var mr=pr[er];Dt.push({wrappedTileID:mr.tileID.wrapped().key,queryResults:mr.tile.queryRenderedFeatures(W,de,ve._state,mr.queryGeometry,mr.cameraQueryGeometry,mr.scale,ge,Ce,Je,Z(ve.transform,mr.tileID))})}var Rr=_e(Dt);for(var Zr in Rr)Rr[Zr].forEach(function($r){var Xr=$r.feature,rn=ve.getFeatureState(Xr.layer["source-layer"],Xr.id);Xr.source=Xr.layer.source,Xr.layer["source-layer"]&&(Xr.sourceLayer=Xr.layer["source-layer"]),Xr.state=rn});return Rr}function oe(ve,W,de,$,ge,Ce,Fe){for(var Je={},ht=Ce.queryRenderedSymbols($),Dt=[],er=0,pr=Object.keys(ht).map(Number);er<pr.length;er+=1){var mr=pr[er];Dt.push(Fe[mr])}Dt.sort(le);for(var Rr=function(){var xn=$r[Zr],Fn=xn.featureIndex.lookupSymbolFeatures(ht[xn.bucketInstanceId],W,xn.bucketIndex,xn.sourceLayerIndex,ge.filter,ge.layers,ge.availableImages,ve);for(var Gn in Fn){var oa=Je[Gn]=Je[Gn]||[],ca=Fn[Gn];ca.sort(function(Ca,Fa){var Ba=xn.featureSortOrder;if(Ba){var ti=Ba.indexOf(Ca.featureIndex),pi=Ba.indexOf(Fa.featureIndex);return pi-ti}else return Fa.featureIndex-Ca.featureIndex});for(var la=0,wa=ca;la<wa.length;la+=1){var La=wa[la];oa.push(La)}}},Zr=0,$r=Dt;Zr<$r.length;Zr+=1)Rr();var Xr=function(xn){Je[xn].forEach(function(Fn){var Gn=Fn.feature,oa=ve[xn],ca=de[oa.source],la=ca.getFeatureState(Gn.layer["source-layer"],Gn.id);Gn.source=Gn.layer.source,Gn.layer["source-layer"]&&(Gn.sourceLayer=Gn.layer["source-layer"]),Gn.state=la})};for(var rn in Je)Xr(rn);return Je}function ne(ve,W){for(var de=ve.getRenderableIds().map(function(ht){return ve.getTileByID(ht)}),$=[],ge={},Ce=0;Ce<de.length;Ce++){var Fe=de[Ce],Je=Fe.tileID.canonical.key;ge[Je]||(ge[Je]=!0,Fe.querySourceFeatures($,W))}return $}function le(ve,W){var de=ve.tileID,$=W.tileID;return de.overscaledZ-$.overscaledZ||de.canonical.y-$.canonical.y||de.wrap-$.wrap||de.canonical.x-$.canonical.x}function _e(ve){for(var W={},de={},$=0,ge=ve;$<ge.length;$+=1){var Ce=ge[$],Fe=Ce.queryResults,Je=Ce.wrappedTileID,ht=de[Je]=de[Je]||{};for(var Dt in Fe)for(var er=Fe[Dt],pr=ht[Dt]=ht[Dt]||{},mr=W[Dt]=W[Dt]||[],Rr=0,Zr=er;Rr<Zr.length;Rr+=1){var $r=Zr[Rr];pr[$r.featureIndex]||(pr[$r.featureIndex]=!0,mr.push($r))}}return W}var fe=function(W,de){this.max=W,this.onRemove=de,this.reset()};fe.prototype.reset=function(){for(var W in this.data)for(var de=0,$=this.data[W];de<$.length;de+=1){var ge=$[de];ge.timeout&&clearTimeout(ge.timeout),this.onRemove(ge.value)}return this.data={},this.order=[],this},fe.prototype.add=function(W,de,$){var ge=this,Ce=W.wrapped().key;this.data[Ce]===void 0&&(this.data[Ce]=[]);var Fe={value:de,timeout:void 0};if($!==void 0&&(Fe.timeout=setTimeout(function(){ge.remove(W,Fe)},$)),this.data[Ce].push(Fe),this.order.push(Ce),this.order.length>this.max){var Je=this._getAndRemoveByKey(this.order[0]);Je&&this.onRemove(Je)}return this},fe.prototype.has=function(W){return W.wrapped().key in this.data},fe.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null},fe.prototype._getAndRemoveByKey=function(W){var de=this.data[W].shift();return de.timeout&&clearTimeout(de.timeout),this.data[W].length===0&&delete this.data[W],this.order.splice(this.order.indexOf(W),1),de.value},fe.prototype.getByKey=function(W){var de=this.data[W];return de?de[0].value:null},fe.prototype.get=function(W){if(!this.has(W))return null;var de=this.data[W.wrapped().key][0];return de.value},fe.prototype.remove=function(W,de){if(!this.has(W))return this;var $=W.wrapped().key,ge=de===void 0?0:this.data[$].indexOf(de),Ce=this.data[$][ge];return this.data[$].splice(ge,1),Ce.timeout&&clearTimeout(Ce.timeout),this.data[$].length===0&&delete this.data[$],this.onRemove(Ce.value),this.order.splice(this.order.indexOf($),1),this},fe.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;){var de=this._getAndRemoveByKey(this.order[0]);de&&this.onRemove(de)}return this},fe.prototype.filter=function(W){var de=[];for(var $ in this.data)for(var ge=0,Ce=this.data[$];ge<Ce.length;ge+=1){var Fe=Ce[ge];W(Fe.value)||de.push(Fe)}for(var Je=0,ht=de;Je<ht.length;Je+=1){var Dt=ht[Je];this.remove(Dt.value.tileID,Dt)}};var ye=function(W,de,$){this.context=W;var ge=W.gl;this.buffer=ge.createBuffer(),this.dynamicDraw=Boolean($),this.context.unbindVAO(),W.bindElementBuffer.set(this.buffer),ge.bufferData(ge.ELEMENT_ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?ge.DYNAMIC_DRAW:ge.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ye.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ye.prototype.updateData=function(W){var de=this.context.gl;this.context.unbindVAO(),this.bind(),de.bufferSubData(de.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)},ye.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},me=function(W,de,$,ge){this.length=de.length,this.attributes=$,this.itemSize=de.bytesPerElement,this.dynamicDraw=ge,this.context=W;var Ce=W.gl;this.buffer=Ce.createBuffer(),W.bindVertexBuffer.set(this.buffer),Ce.bufferData(Ce.ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?Ce.DYNAMIC_DRAW:Ce.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};me.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},me.prototype.updateData=function(W){var de=this.context.gl;this.bind(),de.bufferSubData(de.ARRAY_BUFFER,0,W.arrayBuffer)},me.prototype.enableAttributes=function(W,de){for(var $=0;$<this.attributes.length;$++){var ge=this.attributes[$],Ce=de.attributes[ge.name];Ce!==void 0&&W.enableVertexAttribArray(Ce)}},me.prototype.setVertexAttribPointers=function(W,de,$){for(var ge=0;ge<this.attributes.length;ge++){var Ce=this.attributes[ge],Fe=de.attributes[Ce.name];Fe!==void 0&&W.vertexAttribPointer(Fe,Ce.components,W[xe[Ce.type]],!1,this.itemSize,Ce.offset+this.itemSize*($||0))}},me.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var be=function(W){this.gl=W.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};be.prototype.get=function(){return this.current},be.prototype.set=function(W){},be.prototype.getDefault=function(){return this.default},be.prototype.setDefault=function(){this.set(this.default)};var ke=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function($){var ge=this.current;$.r===ge.r&&$.g===ge.g&&$.b===ge.b&&$.a===ge.a&&!this.dirty||(this.gl.clearColor($.r,$.g,$.b,$.a),this.current=$,this.dirty=!1)},W}(be),De=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.clearDepth($),this.current=$,this.dirty=!1)},W}(be),He=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.clearStencil($),this.current=$,this.dirty=!1)},W}(be),Ae=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function($){var ge=this.current;$[0]===ge[0]&&$[1]===ge[1]&&$[2]===ge[2]&&$[3]===ge[3]&&!this.dirty||(this.gl.colorMask($[0],$[1],$[2],$[3]),this.current=$,this.dirty=!1)},W}(be),Le=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.depthMask($),this.current=$,this.dirty=!1)},W}(be),Ze=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.stencilMask($),this.current=$,this.dirty=!1)},W}(be),We=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function($){var ge=this.current;$.func===ge.func&&$.ref===ge.ref&&$.mask===ge.mask&&!this.dirty||(this.gl.stencilFunc($.func,$.ref,$.mask),this.current=$,this.dirty=!1)},W}(be),ze=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var $=this.gl;return[$.KEEP,$.KEEP,$.KEEP]},W.prototype.set=function($){var ge=this.current;$[0]===ge[0]&&$[1]===ge[1]&&$[2]===ge[2]&&!this.dirty||(this.gl.stencilOp($[0],$[1],$[2]),this.current=$,this.dirty=!1)},W}(be),Ie=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;$?ge.enable(ge.STENCIL_TEST):ge.disable(ge.STENCIL_TEST),this.current=$,this.dirty=!1}},W}(be),Ve=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function($){var ge=this.current;$[0]===ge[0]&&$[1]===ge[1]&&!this.dirty||(this.gl.depthRange($[0],$[1]),this.current=$,this.dirty=!1)},W}(be),dt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;$?ge.enable(ge.DEPTH_TEST):ge.disable(ge.DEPTH_TEST),this.current=$,this.dirty=!1}},W}(be),Ft=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.depthFunc($),this.current=$,this.dirty=!1)},W}(be),Qt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;$?ge.enable(ge.BLEND):ge.disable(ge.BLEND),this.current=$,this.dirty=!1}},W}(be),Ot=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var $=this.gl;return[$.ONE,$.ZERO]},W.prototype.set=function($){var ge=this.current;$[0]===ge[0]&&$[1]===ge[1]&&!this.dirty||(this.gl.blendFunc($[0],$[1]),this.current=$,this.dirty=!1)},W}(be),Ct=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function($){var ge=this.current;$.r===ge.r&&$.g===ge.g&&$.b===ge.b&&$.a===ge.a&&!this.dirty||(this.gl.blendColor($.r,$.g,$.b,$.a),this.current=$,this.dirty=!1)},W}(be),jt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.blendEquation($),this.current=$,this.dirty=!1)},W}(be),Nt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;$?ge.enable(ge.CULL_FACE):ge.disable(ge.CULL_FACE),this.current=$,this.dirty=!1}},W}(be),Lt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.cullFace($),this.current=$,this.dirty=!1)},W}(be),Xe=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.frontFace($),this.current=$,this.dirty=!1)},W}(be),it=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.useProgram($),this.current=$,this.dirty=!1)},W}(be),Ye=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function($){$===this.current&&!this.dirty||(this.gl.activeTexture($),this.current=$,this.dirty=!1)},W}(be),Ee=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var $=this.gl;return[0,0,$.drawingBufferWidth,$.drawingBufferHeight]},W.prototype.set=function($){var ge=this.current;$[0]===ge[0]&&$[1]===ge[1]&&$[2]===ge[2]&&$[3]===ge[3]&&!this.dirty||(this.gl.viewport($[0],$[1],$[2],$[3]),this.current=$,this.dirty=!1)},W}(be),Ge=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;ge.bindFramebuffer(ge.FRAMEBUFFER,$),this.current=$,this.dirty=!1}},W}(be),Ke=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;ge.bindRenderbuffer(ge.RENDERBUFFER,$),this.current=$,this.dirty=!1}},W}(be),qe=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;ge.bindTexture(ge.TEXTURE_2D,$),this.current=$,this.dirty=!1}},W}(be),At=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;ge.bindBuffer(ge.ARRAY_BUFFER,$),this.current=$,this.dirty=!1}},W}(be),mt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){var ge=this.gl;ge.bindBuffer(ge.ELEMENT_ARRAY_BUFFER,$),this.current=$,this.dirty=!1},W}(be),Mt=function(ve){function W(de){ve.call(this,de),this.vao=de.extVertexArrayObject}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function($){!this.vao||$===this.current&&!this.dirty||(this.vao.bindVertexArrayOES($),this.current=$,this.dirty=!1)},W}(be),Gt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_ALIGNMENT,$),this.current=$,this.dirty=!1}},W}(be),zt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$),this.current=$,this.dirty=!1}},W}(be),Ht=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,$),this.current=$,this.dirty=!1}},W}(be),Zt=function(ve){function W(de,$){ve.call(this,de),this.context=de,this.parent=$}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(be),Wt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function($){if(!($===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_2D,$,0),this.current=$,this.dirty=!1}},W}(Zt),sr=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.set=function($){if(!($===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferRenderbuffer(ge.FRAMEBUFFER,ge.DEPTH_ATTACHMENT,ge.RENDERBUFFER,$),this.current=$,this.dirty=!1}},W}(Zt),Gr=function(W,de,$,ge){this.context=W,this.width=de,this.height=$;var Ce=W.gl,Fe=this.framebuffer=Ce.createFramebuffer();this.colorAttachment=new Wt(W,Fe),ge&&(this.depthAttachment=new sr(W,Fe))};Gr.prototype.destroy=function(){var W=this.context.gl,de=this.colorAttachment.get();if(de&&W.deleteTexture(de),this.depthAttachment){var $=this.depthAttachment.get();$&&W.deleteRenderbuffer($)}W.deleteFramebuffer(this.framebuffer)};var cn=519,qr=function(W,de,$){this.func=W,this.mask=de,this.range=$};qr.ReadOnly=!1,qr.ReadWrite=!0,qr.disabled=new qr(cn,qr.ReadOnly,[0,1]);var st=519,rr=7680,$t=function(W,de,$,ge,Ce,Fe){this.test=W,this.ref=de,this.mask=$,this.fail=ge,this.depthFail=Ce,this.pass=Fe};$t.disabled=new $t({func:st,mask:0},0,0,rr,rr,rr);var hr=0,Sr=1,tt=771,Qe=function(W,de,$){this.blendFunction=W,this.blendColor=de,this.mask=$};Qe.Replace=[Sr,hr],Qe.disabled=new Qe(Qe.Replace,e.Color.transparent,[!1,!1,!1,!1]),Qe.unblended=new Qe(Qe.Replace,e.Color.transparent,[!0,!0,!0,!0]),Qe.alphaBlended=new Qe([Sr,tt],e.Color.transparent,[!0,!0,!0,!0]);var lt=1029,ft=2305,Et=function(W,de,$){this.enable=W,this.mode=de,this.frontFace=$};Et.disabled=new Et(!1,lt,ft),Et.backCCW=new Et(!0,lt,ft);var Vt=function(W){this.gl=W,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ke(this),this.clearDepth=new De(this),this.clearStencil=new He(this),this.colorMask=new Ae(this),this.depthMask=new Le(this),this.stencilMask=new Ze(this),this.stencilFunc=new We(this),this.stencilOp=new ze(this),this.stencilTest=new Ie(this),this.depthRange=new Ve(this),this.depthTest=new dt(this),this.depthFunc=new Ft(this),this.blend=new Qt(this),this.blendFunc=new Ot(this),this.blendColor=new Ct(this),this.blendEquation=new jt(this),this.cullFace=new Nt(this),this.cullFaceSide=new Lt(this),this.frontFace=new Xe(this),this.program=new it(this),this.activeTexture=new Ye(this),this.viewport=new Ee(this),this.bindFramebuffer=new Ge(this),this.bindRenderbuffer=new Ke(this),this.bindTexture=new qe(this),this.bindVertexBuffer=new At(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Mt(this),this.pixelStoreUnpack=new Gt(this),this.pixelStoreUnpackPremultiplyAlpha=new zt(this),this.pixelStoreUnpackFlipY=new Ht(this),this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query")};Vt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Vt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Vt.prototype.createIndexBuffer=function(W,de){return new ye(this,W,de)},Vt.prototype.createVertexBuffer=function(W,de,$){return new me(this,W,de,$)},Vt.prototype.createRenderbuffer=function(W,de,$){var ge=this.gl,Ce=ge.createRenderbuffer();return this.bindRenderbuffer.set(Ce),ge.renderbufferStorage(ge.RENDERBUFFER,W,de,$),this.bindRenderbuffer.set(null),Ce},Vt.prototype.createFramebuffer=function(W,de,$){return new Gr(this,W,de,$)},Vt.prototype.clear=function(W){var de=W.color,$=W.depth,ge=this.gl,Ce=0;de&&(Ce|=ge.COLOR_BUFFER_BIT,this.clearColor.set(de),this.colorMask.set([!0,!0,!0,!0])),typeof $<"u"&&(Ce|=ge.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set($),this.depthMask.set(!0)),ge.clear(Ce)},Vt.prototype.setCullFace=function(W){W.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))},Vt.prototype.setDepthMode=function(W){W.func===this.gl.ALWAYS&&!W.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range))},Vt.prototype.setStencilMode=function(W){W.test.func===this.gl.ALWAYS&&!W.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask}))},Vt.prototype.setColorMode=function(W){e.deepEqual(W.blendFunction,Qe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),this.blendColor.set(W.blendColor)),this.colorMask.set(W.mask)},Vt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(ve){function W(de,$,ge){var Ce=this;ve.call(this),this.id=de,this.dispatcher=ge,this.on("data",function(Fe){Fe.dataType==="source"&&Fe.sourceDataType==="metadata"&&(Ce._sourceLoaded=!0),Ce._sourceLoaded&&!Ce._paused&&Fe.dataType==="source"&&Fe.sourceDataType==="content"&&(Ce.reload(),Ce.transform&&Ce.update(Ce.transform))}),this.on("error",function(){Ce._sourceErrored=!0}),this._source=H(de,$,ge,this),this._tiles={},this._cache=new fe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.onAdd=function($){this.map=$,this._maxTileCacheSize=$?$._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd($)},W.prototype.onRemove=function($){this._source&&this._source.onRemove&&this._source.onRemove($)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var $ in this._tiles){var ge=this._tiles[$];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(!!this._paused){var $=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,$&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function($,ge){return this._source.loadTile($,ge)},W.prototype._unloadTile=function($){if(this._source.unloadTile)return this._source.unloadTile($,function(){})},W.prototype._abortTile=function($){if(this._source.abortTile)return this._source.abortTile($,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function($){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ge in this._tiles){var Ce=this._tiles[ge];Ce.upload($),Ce.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return e.values(this._tiles).map(function($){return $.tileID}).sort(Se).map(function($){return $.key})},W.prototype.getRenderableIds=function($){var ge=this,Ce=[];for(var Fe in this._tiles)this._isIdRenderable(Fe,$)&&Ce.push(this._tiles[Fe]);return $?Ce.sort(function(Je,ht){var Dt=Je.tileID,er=ht.tileID,pr=new e.Point(Dt.canonical.x,Dt.canonical.y)._rotate(ge.transform.angle),mr=new e.Point(er.canonical.x,er.canonical.y)._rotate(ge.transform.angle);return Dt.overscaledZ-er.overscaledZ||mr.y-pr.y||mr.x-pr.x}).map(function(Je){return Je.tileID.key}):Ce.map(function(Je){return Je.tileID}).sort(Se).map(function(Je){return Je.key})},W.prototype.hasRenderableParent=function($){var ge=this.findLoadedParent($,0);return ge?this._isIdRenderable(ge.tileID.key):!1},W.prototype._isIdRenderable=function($,ge){return this._tiles[$]&&this._tiles[$].hasData()&&!this._coveredTiles[$]&&(ge||!this._tiles[$].holdingForFade())},W.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var $ in this._tiles)this._tiles[$].state!=="errored"&&this._reloadTile($,"reloading")},W.prototype._reloadTile=function($,ge){var Ce=this._tiles[$];!Ce||(Ce.state!=="loading"&&(Ce.state=ge),this._loadTile(Ce,this._tileLoaded.bind(this,Ce,$,ge)))},W.prototype._tileLoaded=function($,ge,Ce,Fe){if(Fe){$.state="errored",Fe.status!==404?this._source.fire(new e.ErrorEvent(Fe,{tile:$})):this.update(this.transform);return}$.timeAdded=e.browser.now(),Ce==="expired"&&($.refreshedUponExpiration=!0),this._setTileReloadTimer(ge,$),this.getSource().type==="raster-dem"&&$.dem&&this._backfillDEM($),this._state.initializeTileState($,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:$,coord:$.tileID}))},W.prototype._backfillDEM=function($){for(var ge=this.getRenderableIds(),Ce=0;Ce<ge.length;Ce++){var Fe=ge[Ce];if($.neighboringTiles&&$.neighboringTiles[Fe]){var Je=this.getTileByID(Fe);ht($,Je),ht(Je,$)}}function ht(Dt,er){Dt.needsHillshadePrepare=!0;var pr=er.tileID.canonical.x-Dt.tileID.canonical.x,mr=er.tileID.canonical.y-Dt.tileID.canonical.y,Rr=Math.pow(2,Dt.tileID.canonical.z),Zr=er.tileID.key;pr===0&&mr===0||Math.abs(mr)>1||(Math.abs(pr)>1&&(Math.abs(pr+Rr)===1?pr+=Rr:Math.abs(pr-Rr)===1&&(pr-=Rr)),!(!er.dem||!Dt.dem)&&(Dt.dem.backfillBorder(er.dem,pr,mr),Dt.neighboringTiles&&Dt.neighboringTiles[Zr]&&(Dt.neighboringTiles[Zr].backfilled=!0)))}},W.prototype.getTile=function($){return this.getTileByID($.key)},W.prototype.getTileByID=function($){return this._tiles[$]},W.prototype._retainLoadedChildren=function($,ge,Ce,Fe){for(var Je in this._tiles){var ht=this._tiles[Je];if(!(Fe[Je]||!ht.hasData()||ht.tileID.overscaledZ<=ge||ht.tileID.overscaledZ>Ce)){for(var Dt=ht.tileID;ht&&ht.tileID.overscaledZ>ge+1;){var er=ht.tileID.scaledTo(ht.tileID.overscaledZ-1);ht=this._tiles[er.key],ht&&ht.hasData()&&(Dt=er)}for(var pr=Dt;pr.overscaledZ>ge;)if(pr=pr.scaledTo(pr.overscaledZ-1),$[pr.key]){Fe[Dt.key]=Dt;break}}}},W.prototype.findLoadedParent=function($,ge){if($.key in this._loadedParentTiles){var Ce=this._loadedParentTiles[$.key];return Ce&&Ce.tileID.overscaledZ>=ge?Ce:null}for(var Fe=$.overscaledZ-1;Fe>=ge;Fe--){var Je=$.scaledTo(Fe),ht=this._getLoadedTile(Je);if(ht)return ht}},W.prototype._getLoadedTile=function($){var ge=this._tiles[$.key];if(ge&&ge.hasData())return ge;var Ce=this._cache.getByKey($.wrapped().key);return Ce},W.prototype.updateCacheSize=function($){var ge=Math.ceil($.width/this._source.tileSize)+1,Ce=Math.ceil($.height/this._source.tileSize)+1,Fe=ge*Ce,Je=5,ht=Math.floor(Fe*Je),Dt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ht):ht;this._cache.setMaxSize(Dt)},W.prototype.handleWrapJump=function($){var ge=this._prevLng===void 0?$:this._prevLng,Ce=$-ge,Fe=Ce/360,Je=Math.round(Fe);if(this._prevLng=$,Je){var ht={};for(var Dt in this._tiles){var er=this._tiles[Dt];er.tileID=er.tileID.unwrapTo(er.tileID.wrap+Je),ht[er.tileID.key]=er}this._tiles=ht;for(var pr in this._timers)clearTimeout(this._timers[pr]),delete this._timers[pr];for(var mr in this._tiles){var Rr=this._tiles[mr];this._setTileReloadTimer(mr,Rr)}}},W.prototype.update=function($){var ge=this;if(this.transform=$,!(!this._sourceLoaded||this._paused)){this.updateCacheSize($),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ce;this.used?this._source.tileID?Ce=$.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ca){return new e.OverscaledTileID(Ca.canonical.z,Ca.wrap,Ca.canonical.z,Ca.canonical.x,Ca.canonical.y)}):(Ce=$.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ce=Ce.filter(function(Ca){return ge._source.hasTile(Ca)}))):Ce=[];var Fe=$.coveringZoomLevel(this._source),Je=Math.max(Fe-W.maxOverzooming,this._source.minzoom),ht=Math.max(Fe+W.maxUnderzooming,this._source.minzoom),Dt=this._updateRetainedTiles(Ce,Fe);if(ot(this._source.type)){for(var er={},pr={},mr=Object.keys(Dt),Rr=0,Zr=mr;Rr<Zr.length;Rr+=1){var $r=Zr[Rr],Xr=Dt[$r],rn=this._tiles[$r];if(!(!rn||rn.fadeEndTime&&rn.fadeEndTime<=e.browser.now())){var xn=this.findLoadedParent(Xr,Je);xn&&(this._addTile(xn.tileID),er[xn.tileID.key]=xn.tileID),pr[$r]=Xr}}this._retainLoadedChildren(pr,Fe,ht,Dt);for(var Fn in er)Dt[Fn]||(this._coveredTiles[Fn]=!0,Dt[Fn]=er[Fn])}for(var Gn in Dt)this._tiles[Gn].clearFadeHold();for(var oa=e.keysDifference(this._tiles,Dt),ca=0,la=oa;ca<la.length;ca+=1){var wa=la[ca],La=this._tiles[wa];La.hasSymbolBuckets&&!La.holdingForFade()?La.setHoldDuration(this.map._fadeDuration):(!La.hasSymbolBuckets||La.symbolFadeFinished())&&this._removeTile(wa)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var $ in this._tiles)this._tiles[$].holdingForFade()&&this._removeTile($)},W.prototype._updateRetainedTiles=function($,ge){for(var Ce={},Fe={},Je=Math.max(ge-W.maxOverzooming,this._source.minzoom),ht=Math.max(ge+W.maxUnderzooming,this._source.minzoom),Dt={},er=0,pr=$;er<pr.length;er+=1){var mr=pr[er],Rr=this._addTile(mr);Ce[mr.key]=mr,!Rr.hasData()&&ge<this._source.maxzoom&&(Dt[mr.key]=mr)}this._retainLoadedChildren(Dt,ge,ht,Ce);for(var Zr=0,$r=$;Zr<$r.length;Zr+=1){var Xr=$r[Zr],rn=this._tiles[Xr.key];if(!rn.hasData()){if(ge+1>this._source.maxzoom){var xn=Xr.children(this._source.maxzoom)[0],Fn=this.getTile(xn);if(!!Fn&&Fn.hasData()){Ce[xn.key]=xn;continue}}else{var Gn=Xr.children(this._source.maxzoom);if(Ce[Gn[0].key]&&Ce[Gn[1].key]&&Ce[Gn[2].key]&&Ce[Gn[3].key])continue}for(var oa=rn.wasRequested(),ca=Xr.overscaledZ-1;ca>=Je;--ca){var la=Xr.scaledTo(ca);if(Fe[la.key]||(Fe[la.key]=!0,rn=this.getTile(la),!rn&&oa&&(rn=this._addTile(la)),rn&&(Ce[la.key]=la,oa=rn.wasRequested(),rn.hasData())))break}}}return Ce},W.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var $ in this._tiles){for(var ge=[],Ce=void 0,Fe=this._tiles[$].tileID;Fe.overscaledZ>0;){if(Fe.key in this._loadedParentTiles){Ce=this._loadedParentTiles[Fe.key];break}ge.push(Fe.key);var Je=Fe.scaledTo(Fe.overscaledZ-1);if(Ce=this._getLoadedTile(Je),Ce)break;Fe=Je}for(var ht=0,Dt=ge;ht<Dt.length;ht+=1){var er=Dt[ht];this._loadedParentTiles[er]=Ce}}},W.prototype._addTile=function($){var ge=this._tiles[$.key];if(ge)return ge;ge=this._cache.getAndRemove($),ge&&(this._setTileReloadTimer($.key,ge),ge.tileID=$,this._state.initializeTileState(ge,this.map?this.map.painter:null),this._cacheTimers[$.key]&&(clearTimeout(this._cacheTimers[$.key]),delete this._cacheTimers[$.key],this._setTileReloadTimer($.key,ge)));var Ce=Boolean(ge);return Ce||(ge=new e.Tile($,this._source.tileSize*$.overscaleFactor()),this._loadTile(ge,this._tileLoaded.bind(this,ge,$.key,ge.state))),ge?(ge.uses++,this._tiles[$.key]=ge,Ce||this._source.fire(new e.Event("dataloading",{tile:ge,coord:ge.tileID,dataType:"source"})),ge):null},W.prototype._setTileReloadTimer=function($,ge){var Ce=this;$ in this._timers&&(clearTimeout(this._timers[$]),delete this._timers[$]);var Fe=ge.getExpiryTimeout();Fe&&(this._timers[$]=setTimeout(function(){Ce._reloadTile($,"expired"),delete Ce._timers[$]},Fe))},W.prototype._removeTile=function($){var ge=this._tiles[$];!ge||(ge.uses--,delete this._tiles[$],this._timers[$]&&(clearTimeout(this._timers[$]),delete this._timers[$]),!(ge.uses>0)&&(ge.hasData()&&ge.state!=="reloading"?this._cache.add(ge.tileID,ge,ge.getExpiryTimeout()):(ge.aborted=!0,this._abortTile(ge),this._unloadTile(ge))))},W.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var $ in this._tiles)this._removeTile($);this._cache.reset()},W.prototype.tilesIn=function($,ge,Ce){var Fe=this,Je=[],ht=this.transform;if(!ht)return Je;for(var Dt=Ce?ht.getCameraQueryGeometry($):$,er=$.map(function(ca){return ht.pointCoordinate(ca)}),pr=Dt.map(function(ca){return ht.pointCoordinate(ca)}),mr=this.getIds(),Rr=1/0,Zr=1/0,$r=-1/0,Xr=-1/0,rn=0,xn=pr;rn<xn.length;rn+=1){var Fn=xn[rn];Rr=Math.min(Rr,Fn.x),Zr=Math.min(Zr,Fn.y),$r=Math.max($r,Fn.x),Xr=Math.max(Xr,Fn.y)}for(var Gn=function(ca){var la=Fe._tiles[mr[ca]];if(!la.holdingForFade()){var wa=la.tileID,La=Math.pow(2,ht.zoom-la.tileID.overscaledZ),Ca=ge*la.queryPadding*e.EXTENT/la.tileSize/La,Fa=[wa.getTilePoint(new e.MercatorCoordinate(Rr,Zr)),wa.getTilePoint(new e.MercatorCoordinate($r,Xr))];if(Fa[0].x-Ca<e.EXTENT&&Fa[0].y-Ca<e.EXTENT&&Fa[1].x+Ca>=0&&Fa[1].y+Ca>=0){var Ba=er.map(function(pi){return wa.getTilePoint(pi)}),ti=pr.map(function(pi){return wa.getTilePoint(pi)});Je.push({tile:la,tileID:wa,queryGeometry:Ba,cameraQueryGeometry:ti,scale:La})}}},oa=0;oa<mr.length;oa++)Gn(oa);return Je},W.prototype.getVisibleCoordinates=function($){for(var ge=this,Ce=this.getRenderableIds($).map(function(Dt){return ge._tiles[Dt].tileID}),Fe=0,Je=Ce;Fe<Je.length;Fe+=1){var ht=Je[Fe];ht.posMatrix=this.transform.calculatePosMatrix(ht.toUnwrapped())}return Ce},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ot(this._source.type))for(var $ in this._tiles){var ge=this._tiles[$];if(ge.fadeEndTime!==void 0&&ge.fadeEndTime>=e.browser.now())return!0}return!1},W.prototype.setFeatureState=function($,ge,Ce){$=$||"_geojsonTileLayer",this._state.updateState($,ge,Ce)},W.prototype.removeFeatureState=function($,ge,Ce){$=$||"_geojsonTileLayer",this._state.removeFeatureState($,ge,Ce)},W.prototype.getFeatureState=function($,ge){return $=$||"_geojsonTileLayer",this._state.getState($,ge)},W.prototype.setDependencies=function($,ge,Ce){var Fe=this._tiles[$];Fe&&Fe.setDependencies(ge,Ce)},W.prototype.reloadTilesForDependencies=function($,ge){for(var Ce in this._tiles){var Fe=this._tiles[Ce];Fe.hasDependency($,ge)&&this._reloadTile(Ce,"reloading")}this._cache.filter(function(Je){return!Je.hasDependency($,ge)})},W}(e.Evented);Pe.maxOverzooming=10,Pe.maxUnderzooming=3;function Se(ve,W){var de=Math.abs(ve.wrap*2)-+(ve.wrap<0),$=Math.abs(W.wrap*2)-+(W.wrap<0);return ve.overscaledZ-W.overscaledZ||$-de||W.canonical.y-ve.canonical.y||W.canonical.x-ve.canonical.x}function ot(ve){return ve==="raster"||ve==="image"||ve==="video"}function ct(){return new e.window.Worker(hp.workerUrl)}var pt="mapboxgl_preloaded_worker_pool",St=function(){this.active={}};St.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<St.workerCount;)this.workers.push(new ct);return this.active[W]=!0,this.workers.slice()},St.prototype.release=function(W){delete this.active[W],this.numActive()===0&&(this.workers.forEach(function(de){de.terminate()}),this.workers=null)},St.prototype.isPreloaded=function(){return!!this.active[pt]},St.prototype.numActive=function(){return Object.keys(this.active).length};var xt=Math.floor(e.browser.hardwareConcurrency/2);St.workerCount=Math.max(Math.min(xt,6),1);var Pt;function Xt(){return Pt||(Pt=new St),Pt}function or(){var ve=Xt();ve.acquire(pt)}function Pr(){var ve=Pt;ve&&(ve.isPreloaded()&&ve.numActive()===1?(ve.release(pt),Pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Ar(ve,W){var de={};for(var $ in ve)$!=="ref"&&(de[$]=ve[$]);return e.refProperties.forEach(function(ge){ge in W&&(de[ge]=W[ge])}),de}function Er(ve){ve=ve.slice();for(var W=Object.create(null),de=0;de<ve.length;de++)W[ve[de].id]=ve[de];for(var $=0;$<ve.length;$++)"ref"in ve[$]&&(ve[$]=Ar(ve[$],W[ve[$].ref]));return ve}function Jr(){var ve={},W=e.styleSpec.$version;for(var de in e.styleSpec.$root){var $=e.styleSpec.$root[de];if($.required){var ge=null;de==="version"?ge=W:$.type==="array"?ge=[]:ge={},ge!=null&&(ve[de]=ge)}}return ve}var lr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function br(ve,W,de){de.push({command:lr.addSource,args:[ve,W[ve]]})}function Fr(ve,W,de){W.push({command:lr.removeSource,args:[ve]}),de[ve]=!0}function Hr(ve,W,de,$){Fr(ve,de,$),br(ve,W,de)}function Lr(ve,W,de){var $;for($ in ve[de])if(!!ve[de].hasOwnProperty($)&&$!=="data"&&!e.deepEqual(ve[de][$],W[de][$]))return!1;for($ in W[de])if(!!W[de].hasOwnProperty($)&&$!=="data"&&!e.deepEqual(ve[de][$],W[de][$]))return!1;return!0}function at(ve,W,de,$){ve=ve||{},W=W||{};var ge;for(ge in ve)!ve.hasOwnProperty(ge)||W.hasOwnProperty(ge)||Fr(ge,de,$);for(ge in W)!W.hasOwnProperty(ge)||(ve.hasOwnProperty(ge)?e.deepEqual(ve[ge],W[ge])||(ve[ge].type==="geojson"&&W[ge].type==="geojson"&&Lr(ve,W,ge)?de.push({command:lr.setGeoJSONSourceData,args:[ge,W[ge].data]}):Hr(ge,W,de,$)):br(ge,W,de))}function Rt(ve,W,de,$,ge,Ce){ve=ve||{},W=W||{};var Fe;for(Fe in ve)!ve.hasOwnProperty(Fe)||e.deepEqual(ve[Fe],W[Fe])||de.push({command:Ce,args:[$,Fe,W[Fe],ge]});for(Fe in W)!W.hasOwnProperty(Fe)||ve.hasOwnProperty(Fe)||e.deepEqual(ve[Fe],W[Fe])||de.push({command:Ce,args:[$,Fe,W[Fe],ge]})}function Kt(ve){return ve.id}function ur(ve,W){return ve[W.id]=W,ve}function Nr(ve,W,de){ve=ve||[],W=W||[];var $=ve.map(Kt),ge=W.map(Kt),Ce=ve.reduce(ur,{}),Fe=W.reduce(ur,{}),Je=$.slice(),ht=Object.create(null),Dt,er,pr,mr,Rr,Zr,$r;for(Dt=0,er=0;Dt<$.length;Dt++)pr=$[Dt],Fe.hasOwnProperty(pr)?er++:(de.push({command:lr.removeLayer,args:[pr]}),Je.splice(Je.indexOf(pr,er),1));for(Dt=0,er=0;Dt<ge.length;Dt++)pr=ge[ge.length-1-Dt],Je[Je.length-1-Dt]!==pr&&(Ce.hasOwnProperty(pr)?(de.push({command:lr.removeLayer,args:[pr]}),Je.splice(Je.lastIndexOf(pr,Je.length-er),1)):er++,Zr=Je[Je.length-Dt],de.push({command:lr.addLayer,args:[Fe[pr],Zr]}),Je.splice(Je.length-Dt,0,pr),ht[pr]=!0);for(Dt=0;Dt<ge.length;Dt++)if(pr=ge[Dt],mr=Ce[pr],Rr=Fe[pr],!(ht[pr]||e.deepEqual(mr,Rr))){if(!e.deepEqual(mr.source,Rr.source)||!e.deepEqual(mr["source-layer"],Rr["source-layer"])||!e.deepEqual(mr.type,Rr.type)){de.push({command:lr.removeLayer,args:[pr]}),Zr=Je[Je.lastIndexOf(pr)+1],de.push({command:lr.addLayer,args:[Rr,Zr]});continue}Rt(mr.layout,Rr.layout,de,pr,null,lr.setLayoutProperty),Rt(mr.paint,Rr.paint,de,pr,null,lr.setPaintProperty),e.deepEqual(mr.filter,Rr.filter)||de.push({command:lr.setFilter,args:[pr,Rr.filter]}),(!e.deepEqual(mr.minzoom,Rr.minzoom)||!e.deepEqual(mr.maxzoom,Rr.maxzoom))&&de.push({command:lr.setLayerZoomRange,args:[pr,Rr.minzoom,Rr.maxzoom]});for($r in mr)!mr.hasOwnProperty($r)||$r==="layout"||$r==="paint"||$r==="filter"||$r==="metadata"||$r==="minzoom"||$r==="maxzoom"||($r.indexOf("paint.")===0?Rt(mr[$r],Rr[$r],de,pr,$r.slice(6),lr.setPaintProperty):e.deepEqual(mr[$r],Rr[$r])||de.push({command:lr.setLayerProperty,args:[pr,$r,Rr[$r]]}));for($r in Rr)!Rr.hasOwnProperty($r)||mr.hasOwnProperty($r)||$r==="layout"||$r==="paint"||$r==="filter"||$r==="metadata"||$r==="minzoom"||$r==="maxzoom"||($r.indexOf("paint.")===0?Rt(mr[$r],Rr[$r],de,pr,$r.slice(6),lr.setPaintProperty):e.deepEqual(mr[$r],Rr[$r])||de.push({command:lr.setLayerProperty,args:[pr,$r,Rr[$r]]}))}}function Vr(ve,W){if(!ve)return[{command:lr.setStyle,args:[W]}];var de=[];try{if(!e.deepEqual(ve.version,W.version))return[{command:lr.setStyle,args:[W]}];e.deepEqual(ve.center,W.center)||de.push({command:lr.setCenter,args:[W.center]}),e.deepEqual(ve.zoom,W.zoom)||de.push({command:lr.setZoom,args:[W.zoom]}),e.deepEqual(ve.bearing,W.bearing)||de.push({command:lr.setBearing,args:[W.bearing]}),e.deepEqual(ve.pitch,W.pitch)||de.push({command:lr.setPitch,args:[W.pitch]}),e.deepEqual(ve.sprite,W.sprite)||de.push({command:lr.setSprite,args:[W.sprite]}),e.deepEqual(ve.glyphs,W.glyphs)||de.push({command:lr.setGlyphs,args:[W.glyphs]}),e.deepEqual(ve.transition,W.transition)||de.push({command:lr.setTransition,args:[W.transition]}),e.deepEqual(ve.light,W.light)||de.push({command:lr.setLight,args:[W.light]});var $={},ge=[];at(ve.sources,W.sources,ge,$);var Ce=[];ve.layers&&ve.layers.forEach(function(Fe){$[Fe.source]?de.push({command:lr.removeLayer,args:[Fe.id]}):Ce.push(Fe)}),de=de.concat(ge),Nr(Ce,W.layers,de)}catch(Fe){console.warn("Unable to compute style diff:",Fe),de=[{command:lr.setStyle,args:[W]}]}return de}var Dr=function(W,de){this.reset(W,de)};Dr.prototype.reset=function(W,de){this.points=W||[],this._distances=[0];for(var $=1;$<this.points.length;$++)this._distances[$]=this._distances[$-1]+this.points[$].dist(this.points[$-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(de||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Dr.prototype.lerp=function(W){if(this.points.length===1)return this.points[0];W=e.clamp(W,0,1);for(var de=1,$=this._distances[de],ge=W*this.paddedLength+this.padding;$<ge&&de<this._distances.length;)$=this._distances[++de];var Ce=de-1,Fe=this._distances[Ce],Je=$-Fe,ht=Je>0?(ge-Fe)/Je:0;return this.points[Ce].mult(1-ht).add(this.points[de].mult(ht))};var Mr=function(W,de,$){var ge=this.boxCells=[],Ce=this.circleCells=[];this.xCellCount=Math.ceil(W/$),this.yCellCount=Math.ceil(de/$);for(var Fe=0;Fe<this.xCellCount*this.yCellCount;Fe++)ge.push([]),Ce.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=W,this.height=de,this.xScale=this.xCellCount/W,this.yScale=this.yCellCount/de,this.boxUid=0,this.circleUid=0};Mr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Mr.prototype.insert=function(W,de,$,ge,Ce){this._forEachCell(de,$,ge,Ce,this._insertBoxCell,this.boxUid++),this.boxKeys.push(W),this.bboxes.push(de),this.bboxes.push($),this.bboxes.push(ge),this.bboxes.push(Ce)},Mr.prototype.insertCircle=function(W,de,$,ge){this._forEachCell(de-ge,$-ge,de+ge,$+ge,this._insertCircleCell,this.circleUid++),this.circleKeys.push(W),this.circles.push(de),this.circles.push($),this.circles.push(ge)},Mr.prototype._insertBoxCell=function(W,de,$,ge,Ce,Fe){this.boxCells[Ce].push(Fe)},Mr.prototype._insertCircleCell=function(W,de,$,ge,Ce,Fe){this.circleCells[Ce].push(Fe)},Mr.prototype._query=function(W,de,$,ge,Ce,Fe){if($<0||W>this.width||ge<0||de>this.height)return Ce?!1:[];var Je=[];if(W<=0&&de<=0&&this.width<=$&&this.height<=ge){if(Ce)return!0;for(var ht=0;ht<this.boxKeys.length;ht++)Je.push({key:this.boxKeys[ht],x1:this.bboxes[ht*4],y1:this.bboxes[ht*4+1],x2:this.bboxes[ht*4+2],y2:this.bboxes[ht*4+3]});for(var Dt=0;Dt<this.circleKeys.length;Dt++){var er=this.circles[Dt*3],pr=this.circles[Dt*3+1],mr=this.circles[Dt*3+2];Je.push({key:this.circleKeys[Dt],x1:er-mr,y1:pr-mr,x2:er+mr,y2:pr+mr})}return Fe?Je.filter(Fe):Je}else{var Rr={hitTest:Ce,seenUids:{box:{},circle:{}}};return this._forEachCell(W,de,$,ge,this._queryCell,Je,Rr,Fe),Ce?Je.length>0:Je}},Mr.prototype._queryCircle=function(W,de,$,ge,Ce){var Fe=W-$,Je=W+$,ht=de-$,Dt=de+$;if(Je<0||Fe>this.width||Dt<0||ht>this.height)return ge?!1:[];var er=[],pr={hitTest:ge,circle:{x:W,y:de,radius:$},seenUids:{box:{},circle:{}}};return this._forEachCell(Fe,ht,Je,Dt,this._queryCellCircle,er,pr,Ce),ge?er.length>0:er},Mr.prototype.query=function(W,de,$,ge,Ce){return this._query(W,de,$,ge,!1,Ce)},Mr.prototype.hitTest=function(W,de,$,ge,Ce){return this._query(W,de,$,ge,!0,Ce)},Mr.prototype.hitTestCircle=function(W,de,$,ge){return this._queryCircle(W,de,$,!0,ge)},Mr.prototype._queryCell=function(W,de,$,ge,Ce,Fe,Je,ht){var Dt=Je.seenUids,er=this.boxCells[Ce];if(er!==null)for(var pr=this.bboxes,mr=0,Rr=er;mr<Rr.length;mr+=1){var Zr=Rr[mr];if(!Dt.box[Zr]){Dt.box[Zr]=!0;var $r=Zr*4;if(W<=pr[$r+2]&&de<=pr[$r+3]&&$>=pr[$r+0]&&ge>=pr[$r+1]&&(!ht||ht(this.boxKeys[Zr]))){if(Je.hitTest)return Fe.push(!0),!0;Fe.push({key:this.boxKeys[Zr],x1:pr[$r],y1:pr[$r+1],x2:pr[$r+2],y2:pr[$r+3]})}}}var Xr=this.circleCells[Ce];if(Xr!==null)for(var rn=this.circles,xn=0,Fn=Xr;xn<Fn.length;xn+=1){var Gn=Fn[xn];if(!Dt.circle[Gn]){Dt.circle[Gn]=!0;var oa=Gn*3;if(this._circleAndRectCollide(rn[oa],rn[oa+1],rn[oa+2],W,de,$,ge)&&(!ht||ht(this.circleKeys[Gn]))){if(Je.hitTest)return Fe.push(!0),!0;var ca=rn[oa],la=rn[oa+1],wa=rn[oa+2];Fe.push({key:this.circleKeys[Gn],x1:ca-wa,y1:la-wa,x2:ca+wa,y2:la+wa})}}}},Mr.prototype._queryCellCircle=function(W,de,$,ge,Ce,Fe,Je,ht){var Dt=Je.circle,er=Je.seenUids,pr=this.boxCells[Ce];if(pr!==null)for(var mr=this.bboxes,Rr=0,Zr=pr;Rr<Zr.length;Rr+=1){var $r=Zr[Rr];if(!er.box[$r]){er.box[$r]=!0;var Xr=$r*4;if(this._circleAndRectCollide(Dt.x,Dt.y,Dt.radius,mr[Xr+0],mr[Xr+1],mr[Xr+2],mr[Xr+3])&&(!ht||ht(this.boxKeys[$r])))return Fe.push(!0),!0}}var rn=this.circleCells[Ce];if(rn!==null)for(var xn=this.circles,Fn=0,Gn=rn;Fn<Gn.length;Fn+=1){var oa=Gn[Fn];if(!er.circle[oa]){er.circle[oa]=!0;var ca=oa*3;if(this._circlesCollide(xn[ca],xn[ca+1],xn[ca+2],Dt.x,Dt.y,Dt.radius)&&(!ht||ht(this.circleKeys[oa])))return Fe.push(!0),!0}}},Mr.prototype._forEachCell=function(W,de,$,ge,Ce,Fe,Je,ht){for(var Dt=this._convertToXCellCoord(W),er=this._convertToYCellCoord(de),pr=this._convertToXCellCoord($),mr=this._convertToYCellCoord(ge),Rr=Dt;Rr<=pr;Rr++)for(var Zr=er;Zr<=mr;Zr++){var $r=this.xCellCount*Zr+Rr;if(Ce.call(this,W,de,$,ge,$r,Fe,Je,ht))return}},Mr.prototype._convertToXCellCoord=function(W){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))},Mr.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))},Mr.prototype._circlesCollide=function(W,de,$,ge,Ce,Fe){var Je=ge-W,ht=Ce-de,Dt=$+Fe;return Dt*Dt>Je*Je+ht*ht},Mr.prototype._circleAndRectCollide=function(W,de,$,ge,Ce,Fe,Je){var ht=(Fe-ge)/2,Dt=Math.abs(W-(ge+ht));if(Dt>ht+$)return!1;var er=(Je-Ce)/2,pr=Math.abs(de-(Ce+er));if(pr>er+$)return!1;if(Dt<=ht||pr<=er)return!0;var mr=Dt-ht,Rr=pr-er;return mr*mr+Rr*Rr<=$*$};function jr(ve,W,de,$,ge){var Ce=e.create();return W?(e.scale(Ce,Ce,[1/ge,1/ge,1]),de||e.rotateZ(Ce,Ce,$.angle)):e.multiply(Ce,$.labelPlaneMatrix,ve),Ce}function kn(ve,W,de,$,ge){if(W){var Ce=e.clone(ve);return e.scale(Ce,Ce,[ge,ge,1]),de||e.rotateZ(Ce,Ce,-$.angle),Ce}else return $.glCoordMatrix}function yn(ve,W){var de=[ve.x,ve.y,0,1];kr(de,de,W);var $=de[3];return{point:new e.Point(de[0]/$,de[1]/$),signedDistanceFromCamera:$}}function Wn(ve,W){return .5+.5*(ve/W)}function In(ve,W){var de=ve[0]/ve[3],$=ve[1]/ve[3],ge=de>=-W[0]&&de<=W[0]&&$>=-W[1]&&$<=W[1];return ge}function $n(ve,W,de,$,ge,Ce,Fe,Je){var ht=$?ve.textSizeData:ve.iconSizeData,Dt=e.evaluateSizeForZoom(ht,de.transform.zoom),er=[256/de.width*2+1,256/de.height*2+1],pr=$?ve.text.dynamicLayoutVertexArray:ve.icon.dynamicLayoutVertexArray;pr.clear();for(var mr=ve.lineVertexArray,Rr=$?ve.text.placedSymbolArray:ve.icon.placedSymbolArray,Zr=de.transform.width/de.transform.height,$r=!1,Xr=0;Xr<Rr.length;Xr++){var rn=Rr.get(Xr);if(rn.hidden||rn.writingMode===e.WritingMode.vertical&&!$r){ei(rn.numGlyphs,pr);continue}$r=!1;var xn=[rn.anchorX,rn.anchorY,0,1];if(e.transformMat4(xn,xn,W),!In(xn,er)){ei(rn.numGlyphs,pr);continue}var Fn=xn[3],Gn=Wn(de.transform.cameraToCenterDistance,Fn),oa=e.evaluateSizeForFeature(ht,Dt,rn),ca=Fe?oa/Gn:oa*Gn,la=new e.Point(rn.anchorX,rn.anchorY),wa=yn(la,ge).point,La={},Ca=Ra(rn,ca,!1,Je,W,ge,Ce,ve.glyphOffsetArray,mr,pr,wa,la,La,Zr);$r=Ca.useVertical,(Ca.notEnoughRoom||$r||Ca.needsFlipping&&Ra(rn,ca,!0,Je,W,ge,Ce,ve.glyphOffsetArray,mr,pr,wa,la,La,Zr).notEnoughRoom)&&ei(rn.numGlyphs,pr)}$?ve.text.dynamicLayoutVertexBuffer.updateData(pr):ve.icon.dynamicLayoutVertexBuffer.updateData(pr)}function Kn(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt,er){var pr=Je.glyphStartIndex+Je.numGlyphs,mr=Je.lineStartIndex,Rr=Je.lineStartIndex+Je.lineLength,Zr=W.getoffsetX(Je.glyphStartIndex),$r=W.getoffsetX(pr-1),Xr=Ka(ve*Zr,de,$,ge,Ce,Fe,Je.segment,mr,Rr,ht,Dt,er);if(!Xr)return null;var rn=Ka(ve*$r,de,$,ge,Ce,Fe,Je.segment,mr,Rr,ht,Dt,er);return rn?{first:Xr,last:rn}:null}function ya(ve,W,de,$){if(ve===e.WritingMode.horizontal){var ge=Math.abs(de.y-W.y),Ce=Math.abs(de.x-W.x)*$;if(ge>Ce)return{useVertical:!0}}return(ve===e.WritingMode.vertical?W.y<de.y:W.x>de.x)?{needsFlipping:!0}:null}function Ra(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt,er,pr,mr,Rr){var Zr=W/24,$r=ve.lineOffsetX*Zr,Xr=ve.lineOffsetY*Zr,rn;if(ve.numGlyphs>1){var xn=ve.glyphStartIndex+ve.numGlyphs,Fn=ve.lineStartIndex,Gn=ve.lineStartIndex+ve.lineLength,oa=Kn(Zr,Je,$r,Xr,de,er,pr,ve,ht,Ce,mr);if(!oa)return{notEnoughRoom:!0};var ca=yn(oa.first.point,Fe).point,la=yn(oa.last.point,Fe).point;if($&&!de){var wa=ya(ve.writingMode,ca,la,Rr);if(wa)return wa}rn=[oa.first];for(var La=ve.glyphStartIndex+1;La<xn-1;La++)rn.push(Ka(Zr*Je.getoffsetX(La),$r,Xr,de,er,pr,ve.segment,Fn,Gn,ht,Ce,mr));rn.push(oa.last)}else{if($&&!de){var Ca=yn(pr,ge).point,Fa=ve.lineStartIndex+ve.segment+1,Ba=new e.Point(ht.getx(Fa),ht.gety(Fa)),ti=yn(Ba,ge),pi=ti.signedDistanceFromCamera>0?ti.point:_i(pr,Ba,Ca,1,ge),Yi=ya(ve.writingMode,Ca,pi,Rr);if(Yi)return Yi}var xi=Ka(Zr*Je.getoffsetX(ve.glyphStartIndex),$r,Xr,de,er,pr,ve.segment,ve.lineStartIndex,ve.lineStartIndex+ve.lineLength,ht,Ce,mr);if(!xi)return{notEnoughRoom:!0};rn=[xi]}for(var Ci=0,Ja=rn;Ci<Ja.length;Ci+=1){var Wi=Ja[Ci];e.addDynamicAttributes(Dt,Wi.point,Wi.angle)}return{}}function _i(ve,W,de,$,ge){var Ce=yn(ve.add(ve.sub(W)._unit()),ge).point,Fe=de.sub(Ce);return de.add(Fe._mult($/Fe.mag()))}function Ka(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt,er,pr){var mr=$?ve-W:ve+W,Rr=mr>0?1:-1,Zr=0;$&&(Rr*=-1,Zr=Math.PI),Rr<0&&(Zr+=Math.PI);for(var $r=Rr>0?Je+Fe:Je+Fe+1,Xr=ge,rn=ge,xn=0,Fn=0,Gn=Math.abs(mr),oa=[];xn+Fn<=Gn;){if($r+=Rr,$r<Je||$r>=ht)return null;if(rn=Xr,oa.push(Xr),Xr=pr[$r],Xr===void 0){var ca=new e.Point(Dt.getx($r),Dt.gety($r)),la=yn(ca,er);if(la.signedDistanceFromCamera>0)Xr=pr[$r]=la.point;else{var wa=$r-Rr,La=xn===0?Ce:new e.Point(Dt.getx(wa),Dt.gety(wa));Xr=_i(La,ca,rn,Gn-xn+1,er)}}xn+=Fn,Fn=rn.dist(Xr)}var Ca=(Gn-xn)/Fn,Fa=Xr.sub(rn),Ba=Fa.mult(Ca)._add(rn);Ba._add(Fa._unit()._perp()._mult(de*Rr));var ti=Zr+Math.atan2(Xr.y-rn.y,Xr.x-rn.x);return oa.push(Ba),{point:Ba,angle:ti,path:oa}}var ri=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ei(ve,W){for(var de=0;de<ve;de++){var $=W.length;W.resize($+4),W.float32.set(ri,$*3)}}function kr(ve,W,de){var $=W[0],ge=W[1];return ve[0]=de[0]*$+de[4]*ge+de[12],ve[1]=de[1]*$+de[5]*ge+de[13],ve[3]=de[3]*$+de[7]*ge+de[15],ve}var bn=100,dn=function(W,de,$){de===void 0&&(de=new Mr(W.width+2*bn,W.height+2*bn,25)),$===void 0&&($=new Mr(W.width+2*bn,W.height+2*bn,25)),this.transform=W,this.grid=de,this.ignoredGrid=$,this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance,this.screenRightBoundary=W.width+bn,this.screenBottomBoundary=W.height+bn,this.gridRightBoundary=W.width+2*bn,this.gridBottomBoundary=W.height+2*bn};dn.prototype.placeCollisionBox=function(W,de,$,ge,Ce){var Fe=this.projectAndGetPerspectiveRatio(ge,W.anchorPointX,W.anchorPointY),Je=$*Fe.perspectiveRatio,ht=W.x1*Je+Fe.point.x,Dt=W.y1*Je+Fe.point.y,er=W.x2*Je+Fe.point.x,pr=W.y2*Je+Fe.point.y;return!this.isInsideGrid(ht,Dt,er,pr)||!de&&this.grid.hitTest(ht,Dt,er,pr,Ce)?{box:[],offscreen:!1}:{box:[ht,Dt,er,pr],offscreen:this.isOffscreen(ht,Dt,er,pr)}},dn.prototype.placeCollisionCircles=function(W,de,$,ge,Ce,Fe,Je,ht,Dt,er,pr,mr,Rr){var Zr=[],$r=new e.Point(de.anchorX,de.anchorY),Xr=yn($r,Fe),rn=Wn(this.transform.cameraToCenterDistance,Xr.signedDistanceFromCamera),xn=er?Ce/rn:Ce*rn,Fn=xn/e.ONE_EM,Gn=yn($r,Je).point,oa={},ca=de.lineOffsetX*Fn,la=de.lineOffsetY*Fn,wa=Kn(Fn,ge,ca,la,!1,Gn,$r,de,$,Je,oa),La=!1,Ca=!1,Fa=!0;if(wa){for(var Ba=mr*.5*rn+Rr,ti=new e.Point(-bn,-bn),pi=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Yi=new Dr,xi=wa.first,Ci=wa.last,Ja=[],Wi=xi.path.length-1;Wi>=1;Wi--)Ja.push(xi.path[Wi]);for(var Qi=1;Qi<Ci.path.length;Qi++)Ja.push(Ci.path[Qi]);var to=Ba*2.5;if(ht){var Ii=Ja.map(function(nc){return yn(nc,ht)});Ii.some(function(nc){return nc.signedDistanceFromCamera<=0})?Ja=[]:Ja=Ii.map(function(nc){return nc.point})}var ho=[];if(Ja.length>0){for(var gi=Ja[0].clone(),Oi=Ja[0].clone(),Ho=1;Ho<Ja.length;Ho++)gi.x=Math.min(gi.x,Ja[Ho].x),gi.y=Math.min(gi.y,Ja[Ho].y),Oi.x=Math.max(Oi.x,Ja[Ho].x),Oi.y=Math.max(Oi.y,Ja[Ho].y);gi.x>=ti.x&&Oi.x<=pi.x&&gi.y>=ti.y&&Oi.y<=pi.y?ho=[Ja]:Oi.x<ti.x||gi.x>pi.x||Oi.y<ti.y||gi.y>pi.y?ho=[]:ho=e.clipLine([Ja],ti.x,ti.y,pi.x,pi.y)}for(var as=0,xu=ho;as<xu.length;as+=1){var bu=xu[as];Yi.reset(bu,Ba*.25);var qu=0;Yi.length<=.5*Ba?qu=1:qu=Math.ceil(Yi.paddedLength/to)+1;for(var ec=0;ec<qu;ec++){var gc=ec/Math.max(qu-1,1),tc=Yi.lerp(gc),Tl=tc.x+bn,Ic=tc.y+bn;Zr.push(Tl,Ic,Ba,0);var Ks=Tl-Ba,eu=Ic-Ba,rc=Tl+Ba,Uu=Ic+Ba;if(Fa=Fa&&this.isOffscreen(Ks,eu,rc,Uu),Ca=Ca||this.isInsideGrid(Ks,eu,rc,Uu),!W&&this.grid.hitTestCircle(Tl,Ic,Ba,pr)&&(La=!0,!Dt))return{circles:[],offscreen:!1,collisionDetected:La}}}}return{circles:!Dt&&La||!Ca?[]:Zr,offscreen:Fa,collisionDetected:La}},dn.prototype.queryRenderedSymbols=function(W){if(W.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var de=[],$=1/0,ge=1/0,Ce=-1/0,Fe=-1/0,Je=0,ht=W;Je<ht.length;Je+=1){var Dt=ht[Je],er=new e.Point(Dt.x+bn,Dt.y+bn);$=Math.min($,er.x),ge=Math.min(ge,er.y),Ce=Math.max(Ce,er.x),Fe=Math.max(Fe,er.y),de.push(er)}for(var pr=this.grid.query($,ge,Ce,Fe).concat(this.ignoredGrid.query($,ge,Ce,Fe)),mr={},Rr={},Zr=0,$r=pr;Zr<$r.length;Zr+=1){var Xr=$r[Zr],rn=Xr.key;if(mr[rn.bucketInstanceId]===void 0&&(mr[rn.bucketInstanceId]={}),!mr[rn.bucketInstanceId][rn.featureIndex]){var xn=[new e.Point(Xr.x1,Xr.y1),new e.Point(Xr.x2,Xr.y1),new e.Point(Xr.x2,Xr.y2),new e.Point(Xr.x1,Xr.y2)];!e.polygonIntersectsPolygon(de,xn)||(mr[rn.bucketInstanceId][rn.featureIndex]=!0,Rr[rn.bucketInstanceId]===void 0&&(Rr[rn.bucketInstanceId]=[]),Rr[rn.bucketInstanceId].push(rn.featureIndex))}}return Rr},dn.prototype.insertCollisionBox=function(W,de,$,ge,Ce){var Fe=de?this.ignoredGrid:this.grid,Je={bucketInstanceId:$,featureIndex:ge,collisionGroupID:Ce};Fe.insert(Je,W[0],W[1],W[2],W[3])},dn.prototype.insertCollisionCircles=function(W,de,$,ge,Ce){for(var Fe=de?this.ignoredGrid:this.grid,Je={bucketInstanceId:$,featureIndex:ge,collisionGroupID:Ce},ht=0;ht<W.length;ht+=4)Fe.insertCircle(Je,W[ht],W[ht+1],W[ht+2])},dn.prototype.projectAndGetPerspectiveRatio=function(W,de,$){var ge=[de,$,0,1];kr(ge,ge,W);var Ce=new e.Point((ge[0]/ge[3]+1)/2*this.transform.width+bn,(-ge[1]/ge[3]+1)/2*this.transform.height+bn);return{point:Ce,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ge[3])}},dn.prototype.isOffscreen=function(W,de,$,ge){return $<bn||W>=this.screenRightBoundary||ge<bn||de>this.screenBottomBoundary},dn.prototype.isInsideGrid=function(W,de,$,ge){return $>=0&&W<this.gridRightBoundary&&ge>=0&&de<this.gridBottomBoundary},dn.prototype.getViewportMatrix=function(){var W=e.identity([]);return e.translate(W,W,[-bn,-bn,0]),W};function Ln(ve,W,de){return W*(e.EXTENT/(ve.tileSize*Math.pow(2,de-ve.tileID.overscaledZ)))}var ra=function(W,de,$,ge){W?this.opacity=Math.max(0,Math.min(1,W.opacity+(W.placed?de:-de))):this.opacity=ge&&$?1:0,this.placed=$};ra.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ma=function(W,de,$,ge,Ce){this.text=new ra(W?W.text:null,de,$,Ce),this.icon=new ra(W?W.icon:null,de,ge,Ce)};ma.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var sa=function(W,de,$){this.text=W,this.icon=de,this.skipFade=$},Bn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Qn=function(W,de,$,ge,Ce){this.bucketInstanceId=W,this.featureIndex=de,this.sourceLayerIndex=$,this.bucketIndex=ge,this.tileID=Ce},Xa=function(W){this.crossSourceCollisions=W,this.maxGroupID=0,this.collisionGroups={}};Xa.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var de=++this.maxGroupID;this.collisionGroups[W]={ID:de,predicate:function($){return $.collisionGroupID===de}}}return this.collisionGroups[W]};function yi(ve,W,de,$,ge){var Ce=e.getAnchorAlignment(ve),Fe=Ce.horizontalAlign,Je=Ce.verticalAlign,ht=-(Fe-.5)*W,Dt=-(Je-.5)*de,er=e.evaluateVariableOffset(ve,$);return new e.Point(ht+er[0]*ge,Dt+er[1]*ge)}function Yt(ve,W,de,$,ge,Ce){var Fe=ve.x1,Je=ve.x2,ht=ve.y1,Dt=ve.y2,er=ve.anchorPointX,pr=ve.anchorPointY,mr=new e.Point(W,de);return $&&mr._rotate(ge?Ce:-Ce),{x1:Fe+mr.x,y1:ht+mr.y,x2:Je+mr.x,y2:Dt+mr.y,anchorPointX:er,anchorPointY:pr}}var gr=function(W,de,$,ge){this.transform=W.clone(),this.collisionIndex=new dn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=de,this.retainedQueryData={},this.collisionGroups=new Xa($),this.collisionCircleArrays={},this.prevPlacement=ge,ge&&(ge.prevPlacement=void 0),this.placedOrientations={}};gr.prototype.getBucketParts=function(W,de,$,ge){var Ce=$.getBucket(de),Fe=$.latestFeatureIndex;if(!(!Ce||!Fe||de.id!==Ce.layerIds[0])){var Je=$.collisionBoxArray,ht=Ce.layers[0].layout,Dt=Math.pow(2,this.transform.zoom-$.tileID.overscaledZ),er=$.tileSize/e.EXTENT,pr=this.transform.calculatePosMatrix($.tileID.toUnwrapped()),mr=ht.get("text-pitch-alignment")==="map",Rr=ht.get("text-rotation-alignment")==="map",Zr=Ln($,1,this.transform.zoom),$r=jr(pr,mr,Rr,this.transform,Zr),Xr=null;if(mr){var rn=kn(pr,mr,Rr,this.transform,Zr);Xr=e.multiply([],this.transform.labelPlaneMatrix,rn)}this.retainedQueryData[Ce.bucketInstanceId]=new Qn(Ce.bucketInstanceId,Fe,Ce.sourceLayerIndex,Ce.index,$.tileID);var xn={bucket:Ce,layout:ht,posMatrix:pr,textLabelPlaneMatrix:$r,labelToScreenMatrix:Xr,scale:Dt,textPixelRatio:er,holdingForFade:$.holdingForFade(),collisionBoxArray:Je,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ce.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ce.sourceID)};if(ge)for(var Fn=0,Gn=Ce.sortKeyRanges;Fn<Gn.length;Fn+=1){var oa=Gn[Fn],ca=oa.sortKey,la=oa.symbolInstanceStart,wa=oa.symbolInstanceEnd;W.push({sortKey:ca,symbolInstanceStart:la,symbolInstanceEnd:wa,parameters:xn})}else W.push({symbolInstanceStart:0,symbolInstanceEnd:Ce.symbolInstances.length,parameters:xn})}},gr.prototype.attemptAnchorPlacement=function(W,de,$,ge,Ce,Fe,Je,ht,Dt,er,pr,mr,Rr,Zr,$r){var Xr=[mr.textOffset0,mr.textOffset1],rn=yi(W,$,ge,Xr,Ce),xn=this.collisionIndex.placeCollisionBox(Yt(de,rn.x,rn.y,Fe,Je,this.transform.angle),pr,ht,Dt,er.predicate);if($r){var Fn=this.collisionIndex.placeCollisionBox(Yt($r,rn.x,rn.y,Fe,Je,this.transform.angle),pr,ht,Dt,er.predicate);if(Fn.box.length===0)return}if(xn.box.length>0){var Gn;return this.prevPlacement&&this.prevPlacement.variableOffsets[mr.crossTileID]&&this.prevPlacement.placements[mr.crossTileID]&&this.prevPlacement.placements[mr.crossTileID].text&&(Gn=this.prevPlacement.variableOffsets[mr.crossTileID].anchor),this.variableOffsets[mr.crossTileID]={textOffset:Xr,width:$,height:ge,anchor:W,textBoxScale:Ce,prevAnchor:Gn},this.markUsedJustification(Rr,W,mr,Zr),Rr.allowVerticalPlacement&&(this.markUsedOrientation(Rr,Zr,mr),this.placedOrientations[mr.crossTileID]=Zr),{shift:rn,placedGlyphBoxes:xn}}},gr.prototype.placeLayerBucketPart=function(W,de,$){var ge=this,Ce=W.parameters,Fe=Ce.bucket,Je=Ce.layout,ht=Ce.posMatrix,Dt=Ce.textLabelPlaneMatrix,er=Ce.labelToScreenMatrix,pr=Ce.textPixelRatio,mr=Ce.holdingForFade,Rr=Ce.collisionBoxArray,Zr=Ce.partiallyEvaluatedTextSize,$r=Ce.collisionGroup,Xr=Je.get("text-optional"),rn=Je.get("icon-optional"),xn=Je.get("text-allow-overlap"),Fn=Je.get("icon-allow-overlap"),Gn=Je.get("text-rotation-alignment")==="map",oa=Je.get("text-pitch-alignment")==="map",ca=Je.get("icon-text-fit")!=="none",la=Je.get("symbol-z-order")==="viewport-y",wa=xn&&(Fn||!Fe.hasIconData()||rn),La=Fn&&(xn||!Fe.hasTextData()||Xr);!Fe.collisionArrays&&Rr&&Fe.deserializeCollisionBoxes(Rr);var Ca=function(xi,Ci){if(!de[xi.crossTileID]){if(mr){ge.placements[xi.crossTileID]=new sa(!1,!1,!1);return}var Ja=!1,Wi=!1,Qi=!0,to=null,Ii={box:null,offscreen:null},ho={box:null,offscreen:null},gi=null,Oi=null,Ho=null,as=0,xu=0,bu=0;Ci.textFeatureIndex?as=Ci.textFeatureIndex:xi.useRuntimeCollisionCircles&&(as=xi.featureIndex),Ci.verticalTextFeatureIndex&&(xu=Ci.verticalTextFeatureIndex);var qu=Ci.textBox;if(qu){var ec=function(jo){var Ul=e.WritingMode.horizontal;if(Fe.allowVerticalPlacement&&!jo&&ge.prevPlacement){var Vl=ge.prevPlacement.placedOrientations[xi.crossTileID];Vl&&(ge.placedOrientations[xi.crossTileID]=Vl,Ul=Vl,ge.markUsedOrientation(Fe,Ul,xi))}return Ul},gc=function(jo,Ul){if(Fe.allowVerticalPlacement&&xi.numVerticalGlyphVertices>0&&Ci.verticalTextBox)for(var Vl=0,bh=Fe.writingModes;Vl<bh.length;Vl+=1){var _v=bh[Vl];if(_v===e.WritingMode.vertical?(Ii=Ul(),ho=Ii):Ii=jo(),Ii&&Ii.box&&Ii.box.length)break}else Ii=jo()};if(Je.get("text-variable-anchor")){var Ks=Je.get("text-variable-anchor");if(ge.prevPlacement&&ge.prevPlacement.variableOffsets[xi.crossTileID]){var eu=ge.prevPlacement.variableOffsets[xi.crossTileID];Ks.indexOf(eu.anchor)>0&&(Ks=Ks.filter(function(jo){return jo!==eu.anchor}),Ks.unshift(eu.anchor))}var rc=function(jo,Ul,Vl){for(var bh=jo.x2-jo.x1,_v=jo.y2-jo.y1,Nd=xi.textBoxScale,Bd=ca&&!Fn?Ul:null,Hf={box:[],offscreen:!1},Ud=xn?Ks.length*2:Ks.length,_h=0;_h<Ud;++_h){var Vd=Ks[_h%Ks.length],Hd=_h>=Ks.length,wv=ge.attemptAnchorPlacement(Vd,jo,bh,_v,Nd,Gn,oa,pr,ht,$r,Hd,xi,Fe,Vl,Bd);if(wv&&(Hf=wv.placedGlyphBoxes,Hf&&Hf.box&&Hf.box.length)){Ja=!0,to=wv.shift;break}}return Hf},Uu=function(){return rc(qu,Ci.iconBox,e.WritingMode.horizontal)},nc=function(){var jo=Ci.verticalTextBox,Ul=Ii&&Ii.box&&Ii.box.length;return Fe.allowVerticalPlacement&&!Ul&&xi.numVerticalGlyphVertices>0&&jo?rc(jo,Ci.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};gc(Uu,nc),Ii&&(Ja=Ii.box,Qi=Ii.offscreen);var gh=ec(Ii&&Ii.box);if(!Ja&&ge.prevPlacement){var Yc=ge.prevPlacement.variableOffsets[xi.crossTileID];Yc&&(ge.variableOffsets[xi.crossTileID]=Yc,ge.markUsedJustification(Fe,Yc.anchor,xi,gh))}}else{var tc=function(jo,Ul){var Vl=ge.collisionIndex.placeCollisionBox(jo,xn,pr,ht,$r.predicate);return Vl&&Vl.box&&Vl.box.length&&(ge.markUsedOrientation(Fe,Ul,xi),ge.placedOrientations[xi.crossTileID]=Ul),Vl},Tl=function(){return tc(qu,e.WritingMode.horizontal)},Ic=function(){var jo=Ci.verticalTextBox;return Fe.allowVerticalPlacement&&xi.numVerticalGlyphVertices>0&&jo?tc(jo,e.WritingMode.vertical):{box:null,offscreen:null}};gc(Tl,Ic),ec(Ii&&Ii.box&&Ii.box.length)}}if(gi=Ii,Ja=gi&&gi.box&&gi.box.length>0,Qi=gi&&gi.offscreen,xi.useRuntimeCollisionCircles){var Us=Fe.text.placedSymbolArray.get(xi.centerJustifiedTextSymbolIndex),Uf=e.evaluateSizeForFeature(Fe.textSizeData,Zr,Us),sl=Je.get("text-padding"),Vf=xi.collisionCircleDiameter;Oi=ge.collisionIndex.placeCollisionCircles(xn,Us,Fe.lineVertexArray,Fe.glyphOffsetArray,Uf,ht,Dt,er,$,oa,$r.predicate,Vf,sl),Ja=xn||Oi.circles.length>0&&!Oi.collisionDetected,Qi=Qi&&Oi.offscreen}if(Ci.iconFeatureIndex&&(bu=Ci.iconFeatureIndex),Ci.iconBox){var yh=function(jo){var Ul=ca&&to?Yt(jo,to.x,to.y,Gn,oa,ge.transform.angle):jo;return ge.collisionIndex.placeCollisionBox(Ul,Fn,pr,ht,$r.predicate)};ho&&ho.box&&ho.box.length&&Ci.verticalIconBox?(Ho=yh(Ci.verticalIconBox),Wi=Ho.box.length>0):(Ho=yh(Ci.iconBox),Wi=Ho.box.length>0),Qi=Qi&&Ho.offscreen}var mh=Xr||xi.numHorizontalGlyphVertices===0&&xi.numVerticalGlyphVertices===0,vp=rn||xi.numIconVertices===0;if(!mh&&!vp?Wi=Ja=Wi&&Ja:vp?mh||(Wi=Wi&&Ja):Ja=Wi&&Ja,Ja&&gi&&gi.box&&(ho&&ho.box&&xu?ge.collisionIndex.insertCollisionBox(gi.box,Je.get("text-ignore-placement"),Fe.bucketInstanceId,xu,$r.ID):ge.collisionIndex.insertCollisionBox(gi.box,Je.get("text-ignore-placement"),Fe.bucketInstanceId,as,$r.ID)),Wi&&Ho&&ge.collisionIndex.insertCollisionBox(Ho.box,Je.get("icon-ignore-placement"),Fe.bucketInstanceId,bu,$r.ID),Oi&&(Ja&&ge.collisionIndex.insertCollisionCircles(Oi.circles,Je.get("text-ignore-placement"),Fe.bucketInstanceId,as,$r.ID),$)){var xh=Fe.bucketInstanceId,cf=ge.collisionCircleArrays[xh];cf===void 0&&(cf=ge.collisionCircleArrays[xh]=new Bn);for(var ff=0;ff<Oi.circles.length;ff+=4)cf.circles.push(Oi.circles[ff+0]),cf.circles.push(Oi.circles[ff+1]),cf.circles.push(Oi.circles[ff+2]),cf.circles.push(Oi.collisionDetected?1:0)}ge.placements[xi.crossTileID]=new sa(Ja||wa,Wi||La,Qi||Fe.justReloaded),de[xi.crossTileID]=!0}};if(la)for(var Fa=Fe.getSortedSymbolIndexes(this.transform.angle),Ba=Fa.length-1;Ba>=0;--Ba){var ti=Fa[Ba];Ca(Fe.symbolInstances.get(ti),Fe.collisionArrays[ti])}else for(var pi=W.symbolInstanceStart;pi<W.symbolInstanceEnd;pi++)Ca(Fe.symbolInstances.get(pi),Fe.collisionArrays[pi]);if($&&Fe.bucketInstanceId in this.collisionCircleArrays){var Yi=this.collisionCircleArrays[Fe.bucketInstanceId];e.invert(Yi.invProjMatrix,ht),Yi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Fe.justReloaded=!1},gr.prototype.markUsedJustification=function(W,de,$,ge){var Ce={left:$.leftJustifiedTextSymbolIndex,center:$.centerJustifiedTextSymbolIndex,right:$.rightJustifiedTextSymbolIndex},Fe;ge===e.WritingMode.vertical?Fe=$.verticalPlacedTextSymbolIndex:Fe=Ce[e.getAnchorJustification(de)];for(var Je=[$.leftJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.rightJustifiedTextSymbolIndex,$.verticalPlacedTextSymbolIndex],ht=0,Dt=Je;ht<Dt.length;ht+=1){var er=Dt[ht];er>=0&&(Fe>=0&&er!==Fe?W.text.placedSymbolArray.get(er).crossTileID=0:W.text.placedSymbolArray.get(er).crossTileID=$.crossTileID)}},gr.prototype.markUsedOrientation=function(W,de,$){for(var ge=de===e.WritingMode.horizontal||de===e.WritingMode.horizontalOnly?de:0,Ce=de===e.WritingMode.vertical?de:0,Fe=[$.leftJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.rightJustifiedTextSymbolIndex],Je=0,ht=Fe;Je<ht.length;Je+=1){var Dt=ht[Je];W.text.placedSymbolArray.get(Dt).placedOrientation=ge}$.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get($.verticalPlacedTextSymbolIndex).placedOrientation=Ce)},gr.prototype.commit=function(W){this.commitTime=W,this.zoomAtLastRecencyCheck=this.transform.zoom;var de=this.prevPlacement,$=!1;this.prevZoomAdjustment=de?de.zoomAdjustment(this.transform.zoom):0;var ge=de?de.symbolFadeChange(W):1,Ce=de?de.opacities:{},Fe=de?de.variableOffsets:{},Je=de?de.placedOrientations:{};for(var ht in this.placements){var Dt=this.placements[ht],er=Ce[ht];er?(this.opacities[ht]=new ma(er,ge,Dt.text,Dt.icon),$=$||Dt.text!==er.text.placed||Dt.icon!==er.icon.placed):(this.opacities[ht]=new ma(null,ge,Dt.text,Dt.icon,Dt.skipFade),$=$||Dt.text||Dt.icon)}for(var pr in Ce){var mr=Ce[pr];if(!this.opacities[pr]){var Rr=new ma(mr,ge,!1,!1);Rr.isHidden()||(this.opacities[pr]=Rr,$=$||mr.text.placed||mr.icon.placed)}}for(var Zr in Fe)!this.variableOffsets[Zr]&&this.opacities[Zr]&&!this.opacities[Zr].isHidden()&&(this.variableOffsets[Zr]=Fe[Zr]);for(var $r in Je)!this.placedOrientations[$r]&&this.opacities[$r]&&!this.opacities[$r].isHidden()&&(this.placedOrientations[$r]=Je[$r]);$?this.lastPlacementChangeTime=W:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=de?de.lastPlacementChangeTime:W)},gr.prototype.updateLayerOpacities=function(W,de){for(var $={},ge=0,Ce=de;ge<Ce.length;ge+=1){var Fe=Ce[ge],Je=Fe.getBucket(W);Je&&Fe.latestFeatureIndex&&W.id===Je.layerIds[0]&&this.updateBucketOpacities(Je,$,Fe.collisionBoxArray)}},gr.prototype.updateBucketOpacities=function(W,de,$){var ge=this;W.hasTextData()&&W.text.opacityVertexArray.clear(),W.hasIconData()&&W.icon.opacityVertexArray.clear(),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear(),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var Ce=W.layers[0].layout,Fe=new ma(null,0,!1,!1,!0),Je=Ce.get("text-allow-overlap"),ht=Ce.get("icon-allow-overlap"),Dt=Ce.get("text-variable-anchor"),er=Ce.get("text-rotation-alignment")==="map",pr=Ce.get("text-pitch-alignment")==="map",mr=Ce.get("icon-text-fit")!=="none",Rr=new ma(null,0,Je&&(ht||!W.hasIconData()||Ce.get("icon-optional")),ht&&(Je||!W.hasTextData()||Ce.get("text-optional")),!0);!W.collisionArrays&&$&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes($);for(var Zr=function(xn,Fn,Gn){for(var oa=0;oa<Fn/4;oa++)xn.opacityVertexArray.emplaceBack(Gn)},$r=function(xn){var Fn=W.symbolInstances.get(xn),Gn=Fn.numHorizontalGlyphVertices,oa=Fn.numVerticalGlyphVertices,ca=Fn.crossTileID,la=de[ca],wa=ge.opacities[ca];la?wa=Fe:wa||(wa=Rr,ge.opacities[ca]=wa),de[ca]=!0;var La=Gn>0||oa>0,Ca=Fn.numIconVertices>0,Fa=ge.placedOrientations[Fn.crossTileID],Ba=Fa===e.WritingMode.vertical,ti=Fa===e.WritingMode.horizontal||Fa===e.WritingMode.horizontalOnly;if(La){var pi=Br(wa.text),Yi=Ba?An:pi;Zr(W.text,Gn,Yi);var xi=ti?An:pi;Zr(W.text,oa,xi);var Ci=wa.text.isHidden();[Fn.rightJustifiedTextSymbolIndex,Fn.centerJustifiedTextSymbolIndex,Fn.leftJustifiedTextSymbolIndex].forEach(function(bu){bu>=0&&(W.text.placedSymbolArray.get(bu).hidden=Ci||Ba?1:0)}),Fn.verticalPlacedTextSymbolIndex>=0&&(W.text.placedSymbolArray.get(Fn.verticalPlacedTextSymbolIndex).hidden=Ci||ti?1:0);var Ja=ge.variableOffsets[Fn.crossTileID];Ja&&ge.markUsedJustification(W,Ja.anchor,Fn,Fa);var Wi=ge.placedOrientations[Fn.crossTileID];Wi&&(ge.markUsedJustification(W,"left",Fn,Wi),ge.markUsedOrientation(W,Wi,Fn))}if(Ca){var Qi=Br(wa.icon),to=!(mr&&Fn.verticalPlacedIconSymbolIndex&&Ba);if(Fn.placedIconSymbolIndex>=0){var Ii=to?Qi:An;Zr(W.icon,Fn.numIconVertices,Ii),W.icon.placedSymbolArray.get(Fn.placedIconSymbolIndex).hidden=wa.icon.isHidden()}if(Fn.verticalPlacedIconSymbolIndex>=0){var ho=to?An:Qi;Zr(W.icon,Fn.numVerticalIconVertices,ho),W.icon.placedSymbolArray.get(Fn.verticalPlacedIconSymbolIndex).hidden=wa.icon.isHidden()}}if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData()){var gi=W.collisionArrays[xn];if(gi){var Oi=new e.Point(0,0);if(gi.textBox||gi.verticalTextBox){var Ho=!0;if(Dt){var as=ge.variableOffsets[ca];as?(Oi=yi(as.anchor,as.width,as.height,as.textOffset,as.textBoxScale),er&&Oi._rotate(pr?ge.transform.angle:-ge.transform.angle)):Ho=!1}gi.textBox&&un(W.textCollisionBox.collisionVertexArray,wa.text.placed,!Ho||Ba,Oi.x,Oi.y),gi.verticalTextBox&&un(W.textCollisionBox.collisionVertexArray,wa.text.placed,!Ho||ti,Oi.x,Oi.y)}var xu=Boolean(!ti&&gi.verticalIconBox);gi.iconBox&&un(W.iconCollisionBox.collisionVertexArray,wa.icon.placed,xu,mr?Oi.x:0,mr?Oi.y:0),gi.verticalIconBox&&un(W.iconCollisionBox.collisionVertexArray,wa.icon.placed,!xu,mr?Oi.x:0,mr?Oi.y:0)}}},Xr=0;Xr<W.symbolInstances.length;Xr++)$r(Xr);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),W.bucketInstanceId in this.collisionCircleArrays){var rn=this.collisionCircleArrays[W.bucketInstanceId];W.placementInvProjMatrix=rn.invProjMatrix,W.placementViewportMatrix=rn.viewportMatrix,W.collisionCircleArray=rn.circles,delete this.collisionCircleArrays[W.bucketInstanceId]}},gr.prototype.symbolFadeChange=function(W){return this.fadeDuration===0?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},gr.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)},gr.prototype.hasTransitions=function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration},gr.prototype.stillRecent=function(W,de){var $=this.zoomAtLastRecencyCheck===de?1-this.zoomAdjustment(de):1;return this.zoomAtLastRecencyCheck=de,this.commitTime+this.fadeDuration*$>W},gr.prototype.setStale=function(){this.stale=!0};function un(ve,W,de,$,ge){ve.emplaceBack(W?1:0,de?1:0,$||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,$||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,$||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,$||0,ge||0)}var mn=Math.pow(2,25),sn=Math.pow(2,24),Cn=Math.pow(2,17),Tn=Math.pow(2,16),gn=Math.pow(2,9),_r=Math.pow(2,8),wr=Math.pow(2,1);function Br(ve){if(ve.opacity===0&&!ve.placed)return 0;if(ve.opacity===1&&ve.placed)return 4294967295;var W=ve.placed?1:0,de=Math.floor(ve.opacity*127);return de*mn+W*sn+de*Cn+W*Tn+de*gn+W*_r+de*wr+W}var An=0,Yn=function(W){this._sortAcrossTiles=W.layout.get("symbol-z-order")!=="viewport-y"&&W.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yn.prototype.continuePlacement=function(W,de,$,ge,Ce){for(var Fe=this._bucketParts;this._currentTileIndex<W.length;){var Je=W[this._currentTileIndex];if(de.getBucketParts(Fe,ge,Je,this._sortAcrossTiles),this._currentTileIndex++,Ce())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Fe.sort(function(Dt,er){return Dt.sortKey-er.sortKey}));this._currentPartIndex<Fe.length;){var ht=Fe[this._currentPartIndex];if(de.placeLayerBucketPart(ht,this._seenCrossTileIDs,$),this._currentPartIndex++,Ce())return!0}return!1};var ua=function(W,de,$,ge,Ce,Fe,Je){this.placement=new gr(W,Ce,Fe,Je),this._currentPlacementIndex=de.length-1,this._forceFullPlacement=$,this._showCollisionBoxes=ge,this._done=!1};ua.prototype.isDone=function(){return this._done},ua.prototype.continuePlacement=function(W,de,$){for(var ge=this,Ce=e.browser.now(),Fe=function(){var pr=e.browser.now()-Ce;return ge._forceFullPlacement?!1:pr>2};this._currentPlacementIndex>=0;){var Je=W[this._currentPlacementIndex],ht=de[Je],Dt=this.placement.collisionIndex.transform.zoom;if(ht.type==="symbol"&&(!ht.minzoom||ht.minzoom<=Dt)&&(!ht.maxzoom||ht.maxzoom>Dt)){this._inProgressLayer||(this._inProgressLayer=new Yn(ht));var er=this._inProgressLayer.continuePlacement($[ht.source],this.placement,this._showCollisionBoxes,ht,Fe);if(er)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ua.prototype.commit=function(W){return this.placement.commit(W),this.placement};var Sn=512/e.EXTENT/2,na=function(W,de,$){this.tileID=W,this.indexedSymbolInstances={},this.bucketInstanceId=$;for(var ge=0;ge<de.length;ge++){var Ce=de.get(ge),Fe=Ce.key;this.indexedSymbolInstances[Fe]||(this.indexedSymbolInstances[Fe]=[]),this.indexedSymbolInstances[Fe].push({crossTileID:Ce.crossTileID,coord:this.getScaledCoordinates(Ce,W)})}};na.prototype.getScaledCoordinates=function(W,de){var $=de.canonical.z-this.tileID.canonical.z,ge=Sn/Math.pow(2,$);return{x:Math.floor((de.canonical.x*e.EXTENT+W.anchorX)*ge),y:Math.floor((de.canonical.y*e.EXTENT+W.anchorY)*ge)}},na.prototype.findMatches=function(W,de,$){for(var ge=this.tileID.canonical.z<de.canonical.z?1:Math.pow(2,this.tileID.canonical.z-de.canonical.z),Ce=0;Ce<W.length;Ce++){var Fe=W.get(Ce);if(!Fe.crossTileID){var Je=this.indexedSymbolInstances[Fe.key];if(!!Je)for(var ht=this.getScaledCoordinates(Fe,de),Dt=0,er=Je;Dt<er.length;Dt+=1){var pr=er[Dt];if(Math.abs(pr.coord.x-ht.x)<=ge&&Math.abs(pr.coord.y-ht.y)<=ge&&!$[pr.crossTileID]){$[pr.crossTileID]=!0,Fe.crossTileID=pr.crossTileID;break}}}}};var fa=function(){this.maxCrossTileID=0};fa.prototype.generate=function(){return++this.maxCrossTileID};var Ma=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ma.prototype.handleWrapJump=function(W){var de=Math.round((W-this.lng)/360);if(de!==0)for(var $ in this.indexes){var ge=this.indexes[$],Ce={};for(var Fe in ge){var Je=ge[Fe];Je.tileID=Je.tileID.unwrapTo(Je.tileID.wrap+de),Ce[Je.tileID.key]=Je}this.indexes[$]=Ce}this.lng=W},Ma.prototype.addBucket=function(W,de,$){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===de.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var ge=0;ge<de.symbolInstances.length;ge++){var Ce=de.symbolInstances.get(ge);Ce.crossTileID=0}this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});var Fe=this.usedCrossTileIDs[W.overscaledZ];for(var Je in this.indexes){var ht=this.indexes[Je];if(Number(Je)>W.overscaledZ)for(var Dt in ht){var er=ht[Dt];er.tileID.isChildOf(W)&&er.findMatches(de.symbolInstances,W,Fe)}else{var pr=W.scaledTo(Number(Je)),mr=ht[pr.key];mr&&mr.findMatches(de.symbolInstances,W,Fe)}}for(var Rr=0;Rr<de.symbolInstances.length;Rr++){var Zr=de.symbolInstances.get(Rr);Zr.crossTileID||(Zr.crossTileID=$.generate(),Fe[Zr.crossTileID]=!0)}return this.indexes[W.overscaledZ]===void 0&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new na(W,de.symbolInstances,de.bucketInstanceId),!0},Ma.prototype.removeBucketCrossTileIDs=function(W,de){for(var $ in de.indexedSymbolInstances)for(var ge=0,Ce=de.indexedSymbolInstances[$];ge<Ce.length;ge+=1){var Fe=Ce[ge];delete this.usedCrossTileIDs[W][Fe.crossTileID]}},Ma.prototype.removeStaleBuckets=function(W){var de=!1;for(var $ in this.indexes){var ge=this.indexes[$];for(var Ce in ge)W[ge[Ce].bucketInstanceId]||(this.removeBucketCrossTileIDs($,ge[Ce]),delete ge[Ce],de=!0)}return de};var ka=function(){this.layerIndexes={},this.crossTileIDs=new fa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ka.prototype.addLayer=function(W,de,$){var ge=this.layerIndexes[W.id];ge===void 0&&(ge=this.layerIndexes[W.id]=new Ma);var Ce=!1,Fe={};ge.handleWrapJump($);for(var Je=0,ht=de;Je<ht.length;Je+=1){var Dt=ht[Je],er=Dt.getBucket(W);!er||W.id!==er.layerIds[0]||(er.bucketInstanceId||(er.bucketInstanceId=++this.maxBucketInstanceId),ge.addBucket(Dt.tileID,er,this.crossTileIDs)&&(Ce=!0),Fe[er.bucketInstanceId]=!0)}return ge.removeStaleBuckets(Fe)&&(Ce=!0),Ce},ka.prototype.pruneUnusedLayers=function(W){var de={};W.forEach(function(ge){de[ge]=!0});for(var $ in this.layerIndexes)de[$]||delete this.layerIndexes[$]};var ga=function(ve,W){return e.emitValidationErrors(ve,W&&W.filter(function(de){return de.identifier!=="source.canvas"}))},Ia=e.pick(lr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ao=e.pick(lr,["setCenter","setZoom","setBearing","setPitch"]),ro=Jr(),$o=function(ve){function W(de,$){var ge=this;$===void 0&&($={}),ve.call(this),this.map=de,this.dispatcher=new R(Xt(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new E(de._requestManager,$.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new ka,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ce=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(Fe){var Je={pluginStatus:Fe.pluginStatus,pluginURL:Fe.pluginURL};Ce.dispatcher.broadcast("syncRTLPluginState",Je,function(ht,Dt){if(e.triggerPluginCompletionEvent(ht),Dt){var er=Dt.every(function(mr){return mr});if(er)for(var pr in Ce.sourceCaches)Ce.sourceCaches[pr].reload()}})}),this.on("data",function(Fe){if(!(Fe.dataType!=="source"||Fe.sourceDataType!=="metadata")){var Je=ge.sourceCaches[Fe.sourceId];if(!!Je){var ht=Je.getSource();if(!(!ht||!ht.vectorLayerIds))for(var Dt in ge._layers){var er=ge._layers[Dt];er.source===ht.id&&ge._validateLayer(er)}}}})}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.loadURL=function($,ge){var Ce=this;ge===void 0&&(ge={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Fe=typeof ge.validate=="boolean"?ge.validate:!e.isMapboxURL($);$=this.map._requestManager.normalizeStyleURL($,ge.accessToken);var Je=this.map._requestManager.transformRequest($,e.ResourceType.Style);this._request=e.getJSON(Je,function(ht,Dt){Ce._request=null,ht?Ce.fire(new e.ErrorEvent(ht)):Dt&&Ce._load(Dt,Fe)})},W.prototype.loadJSON=function($,ge){var Ce=this;ge===void 0&&(ge={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ce._request=null,Ce._load($,ge.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(ro,!1)},W.prototype._load=function($,ge){if(!(ge&&ga(this,e.validateStyle($)))){this._loaded=!0,this.stylesheet=$;for(var Ce in $.sources)this.addSource(Ce,$.sources[Ce],{validate:!1});$.sprite?this._loadSprite($.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL($.glyphs);var Fe=Er(this.stylesheet.layers);this._order=Fe.map(function(er){return er.id}),this._layers={},this._serializedLayers={};for(var Je=0,ht=Fe;Je<ht.length;Je+=1){var Dt=ht[Je];Dt=e.createStyleLayer(Dt),Dt.setEventedParent(this,{layer:{id:Dt.id}}),this._layers[Dt.id]=Dt,this._serializedLayers[Dt.id]=Dt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},W.prototype._loadSprite=function($){var ge=this;this._spriteRequest=f($,this.map._requestManager,function(Ce,Fe){if(ge._spriteRequest=null,Ce)ge.fire(new e.ErrorEvent(Ce));else if(Fe)for(var Je in Fe)ge.imageManager.addImage(Je,Fe[Je]);ge.imageManager.setLoaded(!0),ge._availableImages=ge.imageManager.listImages(),ge.dispatcher.broadcast("setImages",ge._availableImages),ge.fire(new e.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function($){var ge=this.sourceCaches[$.source];if(!!ge){var Ce=$.sourceLayer;if(!!Ce){var Fe=ge.getSource();(Fe.type==="geojson"||Fe.vectorLayerIds&&Fe.vectorLayerIds.indexOf(Ce)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ce+'" does not exist on source "'+Fe.id+'" as specified by style layer "'+$.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var $ in this.sourceCaches)if(!this.sourceCaches[$].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function($){for(var ge=[],Ce=0,Fe=$;Ce<Fe.length;Ce+=1){var Je=Fe[Ce],ht=this._layers[Je];ht.type!=="custom"&&ge.push(ht.serialize())}return ge},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var $ in this.sourceCaches)if(this.sourceCaches[$].hasTransition())return!0;for(var ge in this._layers)if(this._layers[ge].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function($){if(!!this._loaded){var ge=this._changed;if(this._changed){var Ce=Object.keys(this._updatedLayers),Fe=Object.keys(this._removedLayers);(Ce.length||Fe.length)&&this._updateWorkerLayers(Ce,Fe);for(var Je in this._updatedSources){var ht=this._updatedSources[Je];ht==="reload"?this._reloadSource(Je):ht==="clear"&&this._clearSource(Je)}this._updateTilesForChangedImages();for(var Dt in this._updatedPaintProps)this._layers[Dt].updateTransitions($);this.light.updateTransitions($),this._resetUpdates()}for(var er in this.sourceCaches)this.sourceCaches[er].used=!1;for(var pr=0,mr=this._order;pr<mr.length;pr+=1){var Rr=mr[pr],Zr=this._layers[Rr];Zr.recalculate($,this._availableImages),!Zr.isHidden($.zoom)&&Zr.source&&(this.sourceCaches[Zr.source].used=!0)}this.light.recalculate($),this.z=$.zoom,ge&&this.fire(new e.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var $=Object.keys(this._changedImages);if($.length){for(var ge in this.sourceCaches)this.sourceCaches[ge].reloadTilesForDependencies(["icons","patterns"],$);this._changedImages={}}},W.prototype._updateWorkerLayers=function($,ge){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers($),removedIds:ge})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function($){var ge=this;if(this._checkLoaded(),ga(this,e.validateStyle($)))return!1;$=e.clone$1($),$.layers=Er($.layers);var Ce=Vr(this.serialize(),$).filter(function(Je){return!(Je.command in Ao)});if(Ce.length===0)return!1;var Fe=Ce.filter(function(Je){return!(Je.command in Ia)});if(Fe.length>0)throw new Error("Unimplemented: "+Fe.map(function(Je){return Je.command}).join(", ")+".");return Ce.forEach(function(Je){Je.command!=="setTransition"&&ge[Je.command].apply(ge,Je.args)}),this.stylesheet=$,!0},W.prototype.addImage=function($,ge){if(this.getImage($))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage($,ge),this._availableImages=this.imageManager.listImages(),this._changedImages[$]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.updateImage=function($,ge){this.imageManager.updateImage($,ge)},W.prototype.getImage=function($){return this.imageManager.getImage($)},W.prototype.removeImage=function($){if(!this.getImage($))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage($),this._availableImages=this.imageManager.listImages(),this._changedImages[$]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function($,ge,Ce){var Fe=this;if(Ce===void 0&&(Ce={}),this._checkLoaded(),this.sourceCaches[$]!==void 0)throw new Error("There is already a source with this ID");if(!ge.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ge).join(", ")+".");var Je=["vector","raster","geojson","video","image"],ht=Je.indexOf(ge.type)>=0;if(!(ht&&this._validate(e.validateStyle.source,"sources."+$,ge,null,Ce))){this.map&&this.map._collectResourceTiming&&(ge.collectResourceTiming=!0);var Dt=this.sourceCaches[$]=new Pe($,ge,this.dispatcher);Dt.style=this,Dt.setEventedParent(this,function(){return{isSourceLoaded:Fe.loaded(),source:Dt.serialize(),sourceId:$}}),Dt.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function($){if(this._checkLoaded(),this.sourceCaches[$]===void 0)throw new Error("There is no source with this ID");for(var ge in this._layers)if(this._layers[ge].source===$)return this.fire(new e.ErrorEvent(new Error('Source "'+$+'" cannot be removed while layer "'+ge+'" is using it.')));var Ce=this.sourceCaches[$];delete this.sourceCaches[$],delete this._updatedSources[$],Ce.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:$})),Ce.setEventedParent(null),Ce.clearTiles(),Ce.onRemove&&Ce.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function($,ge){this._checkLoaded();var Ce=this.sourceCaches[$].getSource();Ce.setData(ge),this._changed=!0},W.prototype.getSource=function($){return this.sourceCaches[$]&&this.sourceCaches[$].getSource()},W.prototype.addLayer=function($,ge,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Fe=$.id;if(this.getLayer(Fe)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Fe+'" already exists on this map')));return}var Je;if($.type==="custom"){if(ga(this,e.validateCustomStyleLayer($)))return;Je=e.createStyleLayer($)}else{if(typeof $.source=="object"&&(this.addSource(Fe,$.source),$=e.clone$1($),$=e.extend($,{source:Fe})),this._validate(e.validateStyle.layer,"layers."+Fe,$,{arrayIndex:-1},Ce))return;Je=e.createStyleLayer($),this._validateLayer(Je),Je.setEventedParent(this,{layer:{id:Fe}}),this._serializedLayers[Je.id]=Je.serialize()}var ht=ge?this._order.indexOf(ge):this._order.length;if(ge&&ht===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}if(this._order.splice(ht,0,Fe),this._layerOrderChanged=!0,this._layers[Fe]=Je,this._removedLayers[Fe]&&Je.source&&Je.type!=="custom"){var Dt=this._removedLayers[Fe];delete this._removedLayers[Fe],Dt.type!==Je.type?this._updatedSources[Je.source]="clear":(this._updatedSources[Je.source]="reload",this.sourceCaches[Je.source].pause())}this._updateLayer(Je),Je.onAdd&&Je.onAdd(this.map)},W.prototype.moveLayer=function($,ge){this._checkLoaded(),this._changed=!0;var Ce=this._layers[$];if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be moved.")));return}if($!==ge){var Fe=this._order.indexOf($);this._order.splice(Fe,1);var Je=ge?this._order.indexOf(ge):this._order.length;if(ge&&Je===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}this._order.splice(Je,0,$),this._layerOrderChanged=!0}},W.prototype.removeLayer=function($){this._checkLoaded();var ge=this._layers[$];if(!ge){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be removed.")));return}ge.setEventedParent(null);var Ce=this._order.indexOf($);this._order.splice(Ce,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[$]=ge,delete this._layers[$],delete this._serializedLayers[$],delete this._updatedLayers[$],delete this._updatedPaintProps[$],ge.onRemove&&ge.onRemove(this.map)},W.prototype.getLayer=function($){return this._layers[$]},W.prototype.hasLayer=function($){return $ in this._layers},W.prototype.setLayerZoomRange=function($,ge,Ce){this._checkLoaded();var Fe=this.getLayer($);if(!Fe){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot have zoom extent.")));return}Fe.minzoom===ge&&Fe.maxzoom===Ce||(ge!=null&&(Fe.minzoom=ge),Ce!=null&&(Fe.maxzoom=Ce),this._updateLayer(Fe))},W.prototype.setFilter=function($,ge,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Fe=this.getLayer($);if(!Fe){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Fe.filter,ge)){if(ge==null){Fe.filter=void 0,this._updateLayer(Fe);return}this._validate(e.validateStyle.filter,"layers."+Fe.id+".filter",ge,null,Ce)||(Fe.filter=e.clone$1(ge),this._updateLayer(Fe))}},W.prototype.getFilter=function($){return e.clone$1(this.getLayer($).filter)},W.prototype.setLayoutProperty=function($,ge,Ce,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var Je=this.getLayer($);if(!Je){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual(Je.getLayoutProperty(ge),Ce)||(Je.setLayoutProperty(ge,Ce,Fe),this._updateLayer(Je))},W.prototype.getLayoutProperty=function($,ge){var Ce=this.getLayer($);if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style.")));return}return Ce.getLayoutProperty(ge)},W.prototype.setPaintProperty=function($,ge,Ce,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var Je=this.getLayer($);if(!Je){this.fire(new e.ErrorEvent(new Error("The layer '"+$+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual(Je.getPaintProperty(ge),Ce)){var ht=Je.setPaintProperty(ge,Ce,Fe);ht&&this._updateLayer(Je),this._changed=!0,this._updatedPaintProps[$]=!0}},W.prototype.getPaintProperty=function($,ge){return this.getLayer($).getPaintProperty(ge)},W.prototype.setFeatureState=function($,ge){this._checkLoaded();var Ce=$.source,Fe=$.sourceLayer,Je=this.sourceCaches[Ce];if(Je===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ce+"' does not exist in the map's style.")));return}var ht=Je.getSource().type;if(ht==="geojson"&&Fe){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ht==="vector"&&!Fe){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}$.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Je.setFeatureState(Fe,$.id,ge)},W.prototype.removeFeatureState=function($,ge){this._checkLoaded();var Ce=$.source,Fe=this.sourceCaches[Ce];if(Fe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ce+"' does not exist in the map's style.")));return}var Je=Fe.getSource().type,ht=Je==="vector"?$.sourceLayer:void 0;if(Je==="vector"&&!ht){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ge&&typeof $.id!="string"&&typeof $.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Fe.removeFeatureState(ht,$.id,ge)},W.prototype.getFeatureState=function($){this._checkLoaded();var ge=$.source,Ce=$.sourceLayer,Fe=this.sourceCaches[ge];if(Fe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+ge+"' does not exist in the map's style.")));return}var Je=Fe.getSource().type;if(Je==="vector"&&!Ce){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return $.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Fe.getFeatureState(Ce,$.id)},W.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function($){return $.serialize()}),layers:this._serializeLayers(this._order)},function($){return $!==void 0})},W.prototype._updateLayer=function($){this._updatedLayers[$.id]=!0,$.source&&!this._updatedSources[$.source]&&this.sourceCaches[$.source].getSource().type!=="raster"&&(this._updatedSources[$.source]="reload",this.sourceCaches[$.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function($){for(var ge=this,Ce=function(ti){return ge._layers[ti].type==="fill-extrusion"},Fe={},Je=[],ht=this._order.length-1;ht>=0;ht--){var Dt=this._order[ht];if(Ce(Dt)){Fe[Dt]=ht;for(var er=0,pr=$;er<pr.length;er+=1){var mr=pr[er],Rr=mr[Dt];if(Rr)for(var Zr=0,$r=Rr;Zr<$r.length;Zr+=1){var Xr=$r[Zr];Je.push(Xr)}}}}Je.sort(function(ti,pi){return pi.intersectionZ-ti.intersectionZ});for(var rn=[],xn=this._order.length-1;xn>=0;xn--){var Fn=this._order[xn];if(Ce(Fn))for(var Gn=Je.length-1;Gn>=0;Gn--){var oa=Je[Gn].feature;if(Fe[oa.layer.id]<xn)break;rn.push(oa),Je.pop()}else for(var ca=0,la=$;ca<la.length;ca+=1){var wa=la[ca],La=wa[Fn];if(La)for(var Ca=0,Fa=La;Ca<Fa.length;Ca+=1){var Ba=Fa[Ca];rn.push(Ba.feature)}}}return rn},W.prototype.queryRenderedFeatures=function($,ge,Ce){ge&&ge.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",ge.filter,null,ge);var Fe={};if(ge&&ge.layers){if(!Array.isArray(ge.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Je=0,ht=ge.layers;Je<ht.length;Je+=1){var Dt=ht[Je],er=this._layers[Dt];if(!er)return this.fire(new e.ErrorEvent(new Error("The layer '"+Dt+"' does not exist in the map's style and cannot be queried for features."))),[];Fe[er.source]=!0}}var pr=[];ge.availableImages=this._availableImages;for(var mr in this.sourceCaches)ge.layers&&!Fe[mr]||pr.push(ie(this.sourceCaches[mr],this._layers,this._serializedLayers,$,ge,Ce));return this.placement&&pr.push(oe(this._layers,this._serializedLayers,this.sourceCaches,$,ge,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(pr)},W.prototype.querySourceFeatures=function($,ge){ge&&ge.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",ge.filter,null,ge);var Ce=this.sourceCaches[$];return Ce?ne(Ce,ge):[]},W.prototype.addSourceType=function($,ge,Ce){if(W.getSourceType($))return Ce(new Error('A source type called "'+$+'" already exists.'));if(W.setSourceType($,ge),!ge.workerSourceURL)return Ce(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:$,url:ge.workerSourceURL},Ce)},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function($,ge){ge===void 0&&(ge={}),this._checkLoaded();var Ce=this.light.getLight(),Fe=!1;for(var Je in $)if(!e.deepEqual($[Je],Ce[Je])){Fe=!0;break}if(!!Fe){var ht={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight($,ge),this.light.updateTransitions(ht)}},W.prototype._validate=function($,ge,Ce,Fe,Je){return Je===void 0&&(Je={}),Je&&Je.validate===!1?!1:ga(this,$.call(e.validateStyle,e.extend({key:ge,style:this.serialize(),value:Ce,styleSpec:e.styleSpec},Fe)))},W.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var $ in this._layers){var ge=this._layers[$];ge.setEventedParent(null)}for(var Ce in this.sourceCaches)this.sourceCaches[Ce].clearTiles(),this.sourceCaches[Ce].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function($){this.sourceCaches[$].clearTiles()},W.prototype._reloadSource=function($){this.sourceCaches[$].resume(),this.sourceCaches[$].reload()},W.prototype._updateSources=function($){for(var ge in this.sourceCaches)this.sourceCaches[ge].update($)},W.prototype._generateCollisionBoxes=function(){for(var $ in this.sourceCaches)this._reloadSource($)},W.prototype._updatePlacement=function($,ge,Ce,Fe,Je){Je===void 0&&(Je=!1);for(var ht=!1,Dt=!1,er={},pr=0,mr=this._order;pr<mr.length;pr+=1){var Rr=mr[pr],Zr=this._layers[Rr];if(Zr.type==="symbol"){if(!er[Zr.source]){var $r=this.sourceCaches[Zr.source];er[Zr.source]=$r.getRenderableIds(!0).map(function(ca){return $r.getTileByID(ca)}).sort(function(ca,la){return la.tileID.overscaledZ-ca.tileID.overscaledZ||(ca.tileID.isLessThan(la.tileID)?-1:1)})}var Xr=this.crossTileSymbolIndex.addLayer(Zr,er[Zr.source],$.center.lng);ht=ht||Xr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Je=Je||this._layerOrderChanged||Ce===0,(Je||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),$.zoom))&&(this.pauseablePlacement=new ua($,this._order,Je,ge,Ce,Fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,er),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Dt=!0),ht&&this.pauseablePlacement.placement.setStale()),Dt||ht)for(var rn=0,xn=this._order;rn<xn.length;rn+=1){var Fn=xn[rn],Gn=this._layers[Fn];Gn.type==="symbol"&&this.placement.updateLayerOpacities(Gn,er[Gn.source])}var oa=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return oa},W.prototype._releaseSymbolFadeTiles=function(){for(var $ in this.sourceCaches)this.sourceCaches[$].releaseSymbolFadeTiles()},W.prototype.getImages=function($,ge,Ce){this.imageManager.getImages(ge.icons,Ce),this._updateTilesForChangedImages();var Fe=this.sourceCaches[ge.source];Fe&&Fe.setDependencies(ge.tileID.key,ge.type,ge.icons)},W.prototype.getGlyphs=function($,ge,Ce){this.glyphManager.getGlyphs(ge.stacks,Ce)},W.prototype.getResource=function($,ge,Ce){return e.makeRequest(ge,Ce)},W}(e.Evented);$o.getSourceType=q,$o.setSourceType=re,$o.registerForPluginStateChange=e.registerForPluginStateChange;var $s=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Hs=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Wl=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Ai=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gs="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Ys=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zi="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Ro=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,_s="void main() {gl_FragColor=vec4(1.0);}",Fi="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",vl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lo=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,zi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,po="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",no="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",us="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Qs="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",lu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",es="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Au="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Rs=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Oo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,hc=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,So=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Is=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Xl=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Xu=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ju=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Ws=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ll=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Fs=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,uu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,pl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cu="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Mu=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jl="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Eu=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,qs=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Zl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,dl=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,ws=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Pl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,fu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Su=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,ku=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Kl="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",el=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,cs=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yo=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,tl=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Ts=Bi(Hs,Wl),Io=Bi(Ai,Gs),Dl=Bi(Ys,Zi),As=Bi(Ro,Cl),zs=Bi(_s,Fi),go=Bi(vl,lo),Rl=Bi(zi,po),Il=Bi(no,us),rl=Bi(Qs,lu),fs=Bi(es,Au),yl=Bi(Rs,Oo),ml=Bi(hc,So),Jl=Bi(Is,Xl),Fl=Bi(Xu,ju),nl=Bi(Ws,Ll),Zu=Bi(Fs,uu),hs=Bi(pl,cu),Xs=Bi(Mu,jl),vu=Bi(Eu,qs),xl=Bi(Zl,dl),zl=Bi(ws,Pl),al=Bi(fu,Su),Ol=Bi(ku,Kl),pu=Bi(el,Cu),Lu=Bi(cs,Yo),vc=Bi(tl,hu);function Bi(ve,W){var de=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,$={};return ve=ve.replace(de,function(ge,Ce,Fe,Je,ht){return $[ht]=!0,Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
varying `+Fe+" "+Je+" "+ht+`;
#else
uniform `+Fe+" "+Je+" u_"+ht+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`}),W=W.replace(de,function(ge,Ce,Fe,Je,ht){var Dt=Je==="float"?"vec2":"vec4",er=ht.match(/color/)?"color":Dt;return $[ht]?Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
uniform lowp float u_`+ht+`_t;
attribute `+Fe+" "+Dt+" a_"+ht+`;
varying `+Fe+" "+Je+" "+ht+`;
#else
uniform `+Fe+" "+Je+" u_"+ht+`;
#endif
`:er==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+ht+" = a_"+ht+`;
#else
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+ht+" = unpack_mix_"+er+"(a_"+ht+", u_"+ht+`_t);
#else
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`:Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
uniform lowp float u_`+ht+`_t;
attribute `+Fe+" "+Dt+" a_"+ht+`;
#else
uniform `+Fe+" "+Je+" u_"+ht+`;
#endif
`:er==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+Je+" "+ht+" = a_"+ht+`;
#else
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+Je+" "+ht+" = unpack_mix_"+er+"(a_"+ht+", u_"+ht+`_t);
#else
    `+Fe+" "+Je+" "+ht+" = u_"+ht+`;
#endif
`}),{fragmentSource:ve,vertexSource:W}}var bl=Object.freeze({__proto__:null,prelude:Ts,background:Io,backgroundPattern:Dl,circle:As,clippingMask:zs,heatmap:go,heatmapTexture:Rl,collisionBox:Il,collisionCircle:rl,debug:fs,fill:yl,fillOutline:ml,fillOutlinePattern:Jl,fillPattern:Fl,fillExtrusion:nl,fillExtrusionPattern:Zu,hillshadePrepare:hs,hillshade:Xs,line:vu,lineGradient:xl,linePattern:zl,lineSDF:al,raster:Ol,symbolIcon:pu,symbolSDF:Lu,symbolTextAndIcon:vc}),il=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};il.prototype.bind=function(W,de,$,ge,Ce,Fe,Je,ht){this.context=W;for(var Dt=this.boundPaintVertexBuffers.length!==ge.length,er=0;!Dt&&er<ge.length;er++)this.boundPaintVertexBuffers[er]!==ge[er]&&(Dt=!0);var pr=!this.vao||this.boundProgram!==de||this.boundLayoutVertexBuffer!==$||Dt||this.boundIndexBuffer!==Ce||this.boundVertexOffset!==Fe||this.boundDynamicVertexBuffer!==Je||this.boundDynamicVertexBuffer2!==ht;!W.extVertexArrayObject||pr?this.freshBind(de,$,ge,Ce,Fe,Je,ht):(W.bindVertexArrayOES.set(this.vao),Je&&Je.bind(),Ce&&Ce.dynamicDraw&&Ce.bind(),ht&&ht.bind())},il.prototype.freshBind=function(W,de,$,ge,Ce,Fe,Je){var ht,Dt=W.numAttributes,er=this.context,pr=er.gl;if(er.extVertexArrayObject)this.vao&&this.destroy(),this.vao=er.extVertexArrayObject.createVertexArrayOES(),er.bindVertexArrayOES.set(this.vao),ht=0,this.boundProgram=W,this.boundLayoutVertexBuffer=de,this.boundPaintVertexBuffers=$,this.boundIndexBuffer=ge,this.boundVertexOffset=Ce,this.boundDynamicVertexBuffer=Fe,this.boundDynamicVertexBuffer2=Je;else{ht=er.currentNumAttributes||0;for(var mr=Dt;mr<ht;mr++)pr.disableVertexAttribArray(mr)}de.enableAttributes(pr,W);for(var Rr=0,Zr=$;Rr<Zr.length;Rr+=1){var $r=Zr[Rr];$r.enableAttributes(pr,W)}Fe&&Fe.enableAttributes(pr,W),Je&&Je.enableAttributes(pr,W),de.bind(),de.setVertexAttribPointers(pr,W,Ce);for(var Xr=0,rn=$;Xr<rn.length;Xr+=1){var xn=rn[Xr];xn.bind(),xn.setVertexAttribPointers(pr,W,Ce)}Fe&&(Fe.bind(),Fe.setVertexAttribPointers(pr,W,Ce)),ge&&ge.bind(),Je&&(Je.bind(),Je.setVertexAttribPointers(pr,W,Ce)),er.currentNumAttributes=Dt},il.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ts=function(W,de,$,ge,Ce){var Fe=W.gl;this.program=Fe.createProgram();var Je=$?$.defines():[];Ce&&Je.push("#define OVERDRAW_INSPECTOR;");var ht=Je.concat(Ts.fragmentSource,de.fragmentSource).join(`
`),Dt=Je.concat(Ts.vertexSource,de.vertexSource).join(`
`),er=Fe.createShader(Fe.FRAGMENT_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(er,ht),Fe.compileShader(er),Fe.attachShader(this.program,er);var pr=Fe.createShader(Fe.VERTEX_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(pr,Dt),Fe.compileShader(pr),Fe.attachShader(this.program,pr);for(var mr=$?$.layoutAttributes:[],Rr=0;Rr<mr.length;Rr++)Fe.bindAttribLocation(this.program,Rr,mr[Rr].name);Fe.linkProgram(this.program),Fe.deleteShader(pr),Fe.deleteShader(er),this.numAttributes=Fe.getProgramParameter(this.program,Fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Zr={},$r=0;$r<this.numAttributes;$r++){var Xr=Fe.getActiveAttrib(this.program,$r);Xr&&(this.attributes[Xr.name]=Fe.getAttribLocation(this.program,Xr.name))}for(var rn=Fe.getProgramParameter(this.program,Fe.ACTIVE_UNIFORMS),xn=0;xn<rn;xn++){var Fn=Fe.getActiveUniform(this.program,xn);Fn&&(Zr[Fn.name]=Fe.getUniformLocation(this.program,Fn.name))}this.fixedUniforms=ge(W,Zr),this.binderUniforms=$?$.getUniforms(W,Zr):[]};ts.prototype.draw=function(W,de,$,ge,Ce,Fe,Je,ht,Dt,er,pr,mr,Rr,Zr,$r,Xr){var rn,xn=W.gl;if(!this.failedToCreate){W.program.set(this.program),W.setDepthMode($),W.setStencilMode(ge),W.setColorMode(Ce),W.setCullFace(Fe);for(var Fn in this.fixedUniforms)this.fixedUniforms[Fn].set(Je[Fn]);Zr&&Zr.setUniforms(W,this.binderUniforms,mr,{zoom:Rr});for(var Gn=(rn={},rn[xn.LINES]=2,rn[xn.TRIANGLES]=3,rn[xn.LINE_STRIP]=1,rn)[de],oa=0,ca=pr.get();oa<ca.length;oa+=1){var la=ca[oa],wa=la.vaos||(la.vaos={}),La=wa[ht]||(wa[ht]=new il);La.bind(W,this,Dt,Zr?Zr.getPaintVertexBuffers():[],er,la.vertexOffset,$r,Xr),xn.drawElements(de,la.primitiveLength*Gn,xn.UNSIGNED_SHORT,la.primitiveOffset*Gn*2)}}};function vs(ve,W,de){var $=1/Ln(de,1,W.transform.tileZoom),ge=Math.pow(2,de.tileID.overscaledZ),Ce=de.tileSize*Math.pow(2,W.transform.tileZoom)/ge,Fe=Ce*(de.tileID.canonical.x+de.tileID.wrap*ge),Je=Ce*de.tileID.canonical.y;return{u_image:0,u_texsize:de.imageAtlasTexture.size,u_scale:[$,ve.fromScale,ve.toScale],u_fade:ve.t,u_pixel_coord_upper:[Fe>>16,Je>>16],u_pixel_coord_lower:[Fe&65535,Je&65535]}}function Nl(ve,W,de,$){var ge=de.imageManager.getPattern(ve.from.toString()),Ce=de.imageManager.getPattern(ve.to.toString()),Fe=de.imageManager.getPixelSize(),Je=Fe.width,ht=Fe.height,Dt=Math.pow(2,$.tileID.overscaledZ),er=$.tileSize*Math.pow(2,de.transform.tileZoom)/Dt,pr=er*($.tileID.canonical.x+$.tileID.wrap*Dt),mr=er*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:Ce.tl,u_pattern_br_b:Ce.br,u_texsize:[Je,ht],u_mix:W.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:Ce.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/Ln($,1,de.transform.tileZoom),u_pixel_coord_upper:[pr>>16,mr>>16],u_pixel_coord_lower:[pr&65535,mr&65535]}}var uo=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_lightpos:new e.Uniform3f(ve,W.u_lightpos),u_lightintensity:new e.Uniform1f(ve,W.u_lightintensity),u_lightcolor:new e.Uniform3f(ve,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ve,W.u_vertical_gradient),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},Pu=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_lightpos:new e.Uniform3f(ve,W.u_lightpos),u_lightintensity:new e.Uniform1f(ve,W.u_lightintensity),u_lightcolor:new e.Uniform3f(ve,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ve,W.u_vertical_gradient),u_height_factor:new e.Uniform1f(ve,W.u_height_factor),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},Wo=function(ve,W,de,$){var ge=W.style.light,Ce=ge.properties.get("position"),Fe=[Ce.x,Ce.y,Ce.z],Je=e.create$1();ge.properties.get("anchor")==="viewport"&&e.fromRotation(Je,-W.transform.angle),e.transformMat3(Fe,Fe,Je);var ht=ge.properties.get("color");return{u_matrix:ve,u_lightpos:Fe,u_lightintensity:ge.properties.get("intensity"),u_lightcolor:[ht.r,ht.g,ht.b],u_vertical_gradient:+de,u_opacity:$}},js=function(ve,W,de,$,ge,Ce,Fe){return e.extend(Wo(ve,W,de,$),vs(Ce,W,Fe),{u_height_factor:-Math.pow(2,ge.overscaledZ)/Fe.tileSize/8})},Os=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},Ms=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},Vo=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world)}},Ki=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},No=function(ve){return{u_matrix:ve}},ps=function(ve,W,de,$){return e.extend(No(ve),vs(de,W,$))},Du=function(ve,W){return{u_matrix:ve,u_world:W}},$l=function(ve,W,de,$,ge){return e.extend(ps(ve,W,de,$),{u_world:ge})},Ru=function(ve,W){return{u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(ve,W.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(ve,W.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},bt=function(ve,W,de,$){var ge=ve.transform,Ce,Fe;if($.paint.get("circle-pitch-alignment")==="map"){var Je=Ln(de,1,ge.zoom);Ce=!0,Fe=[Je,Je]}else Ce=!1,Fe=ge.pixelsToGLUnits;return{u_camera_to_center_distance:ge.cameraToCenterDistance,u_scale_with_map:+($.paint.get("circle-pitch-scale")==="map"),u_matrix:ve.translatePosMatrix(W.posMatrix,de,$.paint.get("circle-translate"),$.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ce,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Fe}},Bt=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(ve,W.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(ve,W.u_extrude_scale),u_overscale_factor:new e.Uniform1f(ve,W.u_overscale_factor)}},dr=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_inv_matrix:new e.UniformMatrix4f(ve,W.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(ve,W.u_viewport_size)}},cr=function(ve,W,de){var $=Ln(de,1,W.zoom),ge=Math.pow(2,W.zoom-de.tileID.overscaledZ),Ce=de.tileID.overscaleFactor();return{u_matrix:ve,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:$,u_extrude_scale:[W.pixelsToGLUnits[0]/($*ge),W.pixelsToGLUnits[1]/($*ge)],u_overscale_factor:Ce}},Or=function(ve,W,de){return{u_matrix:ve,u_inv_matrix:W,u_camera_to_center_distance:de.cameraToCenterDistance,u_viewport_size:[de.width,de.height]}},ln=function(ve,W){return{u_color:new e.UniformColor(ve,W.u_color),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_overlay:new e.Uniform1i(ve,W.u_overlay),u_overlay_scale:new e.Uniform1f(ve,W.u_overlay_scale)}},_n=function(ve,W,de){return de===void 0&&(de=1),{u_matrix:ve,u_color:W,u_overlay:0,u_overlay_scale:de}},Pn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},zn=function(ve){return{u_matrix:ve}},Xn=function(ve,W){return{u_extrude_scale:new e.Uniform1f(ve,W.u_extrude_scale),u_intensity:new e.Uniform1f(ve,W.u_intensity),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},wn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world),u_image:new e.Uniform1i(ve,W.u_image),u_color_ramp:new e.Uniform1i(ve,W.u_color_ramp),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},Un=function(ve,W,de,$){return{u_matrix:ve,u_extrude_scale:Ln(W,1,de),u_intensity:$}},On=function(ve,W,de,$){var ge=e.create();e.ortho(ge,0,ve.width,ve.height,0,0,1);var Ce=ve.context.gl;return{u_matrix:ge,u_world:[Ce.drawingBufferWidth,Ce.drawingBufferHeight],u_image:de,u_color_ramp:$,u_opacity:W.paint.get("heatmap-opacity")}},jn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_latrange:new e.Uniform2f(ve,W.u_latrange),u_light:new e.Uniform2f(ve,W.u_light),u_shadow:new e.UniformColor(ve,W.u_shadow),u_highlight:new e.UniformColor(ve,W.u_highlight),u_accent:new e.UniformColor(ve,W.u_accent)}},ia=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_dimension:new e.Uniform2f(ve,W.u_dimension),u_zoom:new e.Uniform1f(ve,W.u_zoom),u_maxzoom:new e.Uniform1f(ve,W.u_maxzoom),u_unpack:new e.Uniform4f(ve,W.u_unpack)}},Ga=function(ve,W,de){var $=de.paint.get("hillshade-shadow-color"),ge=de.paint.get("hillshade-highlight-color"),Ce=de.paint.get("hillshade-accent-color"),Fe=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=ve.transform.angle);var Je=!ve.options.moving;return{u_matrix:ve.transform.calculatePosMatrix(W.tileID.toUnwrapped(),Je),u_image:0,u_latrange:Ya(ve,W.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Fe],u_shadow:$,u_highlight:ge,u_accent:Ce}},za=function(ve,W,de){var $=W.stride,ge=e.create();return e.ortho(ge,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(ge,ge,[0,-e.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[$,$],u_zoom:ve.overscaledZ,u_maxzoom:de,u_unpack:W.getUnpackVector()}};function Ya(ve,W){var de=Math.pow(2,W.canonical.z),$=W.canonical.y;return[new e.MercatorCoordinate(0,$/de).toLngLat().lat,new e.MercatorCoordinate(0,($+1)/de).toLngLat().lat]}var ja=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels)}},aa=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_image:new e.Uniform1i(ve,W.u_image)}},ba=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_image:new e.Uniform1i(ve,W.u_image),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},Qa=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(ve,W.u_patternscale_a),u_patternscale_b:new e.Uniform2f(ve,W.u_patternscale_b),u_sdfgamma:new e.Uniform1f(ve,W.u_sdfgamma),u_image:new e.Uniform1i(ve,W.u_image),u_tex_y_a:new e.Uniform1f(ve,W.u_tex_y_a),u_tex_y_b:new e.Uniform1f(ve,W.u_tex_y_b),u_mix:new e.Uniform1f(ve,W.u_mix)}},si=function(ve,W,de){var $=ve.transform;return{u_matrix:hi(ve,W,de),u_ratio:1/Ln(W,1,$.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]]}},Mi=function(ve,W,de){return e.extend(si(ve,W,de),{u_image:0})},Ei=function(ve,W,de,$){var ge=ve.transform,Ce=Pi(W,ge);return{u_matrix:hi(ve,W,de),u_texsize:W.imageAtlasTexture.size,u_ratio:1/Ln(W,1,ge.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ce,$.fromScale,$.toScale],u_fade:$.t,u_units_to_pixels:[1/ge.pixelsToGLUnits[0],1/ge.pixelsToGLUnits[1]]}},wi=function(ve,W,de,$,ge){var Ce=ve.transform,Fe=ve.lineAtlas,Je=Pi(W,Ce),ht=de.layout.get("line-cap")==="round",Dt=Fe.getDash($.from,ht),er=Fe.getDash($.to,ht),pr=Dt.width*ge.fromScale,mr=er.width*ge.toScale;return e.extend(si(ve,W,de),{u_patternscale_a:[Je/pr,-Dt.height/2],u_patternscale_b:[Je/mr,-er.height/2],u_sdfgamma:Fe.width/(Math.min(pr,mr)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Dt.y,u_tex_y_b:er.y,u_mix:ge.t})};function Pi(ve,W){return 1/Ln(ve,1,W.tileZoom)}function hi(ve,W,de){return ve.translatePosMatrix(W.tileID.posMatrix,W,de.paint.get("line-translate"),de.paint.get("line-translate-anchor"))}var ko=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_tl_parent:new e.Uniform2f(ve,W.u_tl_parent),u_scale_parent:new e.Uniform1f(ve,W.u_scale_parent),u_buffer_scale:new e.Uniform1f(ve,W.u_buffer_scale),u_fade_t:new e.Uniform1f(ve,W.u_fade_t),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_image0:new e.Uniform1i(ve,W.u_image0),u_image1:new e.Uniform1i(ve,W.u_image1),u_brightness_low:new e.Uniform1f(ve,W.u_brightness_low),u_brightness_high:new e.Uniform1f(ve,W.u_brightness_high),u_saturation_factor:new e.Uniform1f(ve,W.u_saturation_factor),u_contrast_factor:new e.Uniform1f(ve,W.u_contrast_factor),u_spin_weights:new e.Uniform3f(ve,W.u_spin_weights)}},ao=function(ve,W,de,$,ge){return{u_matrix:ve,u_tl_parent:W,u_scale_parent:de,u_buffer_scale:1,u_fade_t:$.mix,u_opacity:$.opacity*ge.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ge.paint.get("raster-brightness-min"),u_brightness_high:ge.paint.get("raster-brightness-max"),u_saturation_factor:ki(ge.paint.get("raster-saturation")),u_contrast_factor:Aa(ge.paint.get("raster-contrast")),u_spin_weights:li(ge.paint.get("raster-hue-rotate"))}};function li(ve){ve*=Math.PI/180;var W=Math.sin(ve),de=Math.cos(ve);return[(2*de+1)/3,(-Math.sqrt(3)*W-de+1)/3,(Math.sqrt(3)*W-de+1)/3]}function Aa(ve){return ve>0?1/(1-ve):1+ve}function ki(ve){return ve>0?1-1/(1.001-ve):-ve}var bo=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texture:new e.Uniform1i(ve,W.u_texture)}},Mo=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texture:new e.Uniform1i(ve,W.u_texture),u_gamma_scale:new e.Uniform1f(ve,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ve,W.u_is_halo)}},ds=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texsize_icon:new e.Uniform2f(ve,W.u_texsize_icon),u_texture:new e.Uniform1i(ve,W.u_texture),u_texture_icon:new e.Uniform1i(ve,W.u_texture_icon),u_gamma_scale:new e.Uniform1f(ve,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ve,W.u_is_halo)}},Ns=function(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt){var er=ge.transform;return{u_is_size_zoom_constant:+(ve==="constant"||ve==="source"),u_is_size_feature_constant:+(ve==="constant"||ve==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:er.cameraToCenterDistance,u_pitch:er.pitch/360*2*Math.PI,u_rotate_symbol:+de,u_aspect_ratio:er.width/er.height,u_fade_change:ge.options.fadeDuration?ge.symbolFadeChange:1,u_matrix:Ce,u_label_plane_matrix:Fe,u_coord_matrix:Je,u_is_text:+ht,u_pitch_with_map:+$,u_texsize:Dt,u_texture:0}},Co=function(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt,er){var pr=ge.transform;return e.extend(Ns(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt),{u_gamma_scale:$?Math.cos(pr._pitch)*pr.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+er})},ol=function(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt){return e.extend(Co(ve,W,de,$,ge,Ce,Fe,Je,!0,ht,!0),{u_texsize_icon:Dt,u_texture_icon:1})},Bs=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_color:new e.UniformColor(ve,W.u_color)}},Fo=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_image:new e.Uniform1i(ve,W.u_image),u_pattern_tl_a:new e.Uniform2f(ve,W.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(ve,W.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(ve,W.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(ve,W.u_pattern_br_b),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_mix:new e.Uniform1f(ve,W.u_mix),u_pattern_size_a:new e.Uniform2f(ve,W.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(ve,W.u_pattern_size_b),u_scale_a:new e.Uniform1f(ve,W.u_scale_a),u_scale_b:new e.Uniform1f(ve,W.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(ve,W.u_tile_units_to_pixels)}},Lo=function(ve,W,de){return{u_matrix:ve,u_opacity:W,u_color:de}},Ql=function(ve,W,de,$,ge,Ce){return e.extend(Nl($,Ce,de,ge),{u_matrix:ve,u_opacity:W})},du={fillExtrusion:uo,fillExtrusionPattern:Pu,fill:Os,fillPattern:Ms,fillOutline:Vo,fillOutlinePattern:Ki,circle:Ru,collisionBox:Bt,collisionCircle:dr,debug:ln,clippingMask:Pn,heatmap:Xn,heatmapTexture:wn,hillshade:jn,hillshadePrepare:ia,line:ja,lineGradient:aa,linePattern:ba,lineSDF:Qa,raster:ko,symbolIcon:bo,symbolSDF:Mo,symbolTextAndIcon:ds,background:Bs,backgroundPattern:Fo},gs;function Iu(ve,W,de,$,ge,Ce,Fe){for(var Je=ve.context,ht=Je.gl,Dt=ve.useProgram("collisionBox"),er=[],pr=0,mr=0,Rr=0;Rr<$.length;Rr++){var Zr=$[Rr],$r=W.getTile(Zr),Xr=$r.getBucket(de);if(!!Xr){var rn=Zr.posMatrix;(ge[0]!==0||ge[1]!==0)&&(rn=ve.translatePosMatrix(Zr.posMatrix,$r,ge,Ce));var xn=Fe?Xr.textCollisionBox:Xr.iconCollisionBox,Fn=Xr.collisionCircleArray;if(Fn.length>0){var Gn=e.create(),oa=rn;e.mul(Gn,Xr.placementInvProjMatrix,ve.transform.glCoordMatrix),e.mul(Gn,Gn,Xr.placementViewportMatrix),er.push({circleArray:Fn,circleOffset:mr,transform:oa,invTransform:Gn}),pr+=Fn.length/4,mr=pr}!xn||Dt.draw(Je,ht.LINES,qr.disabled,$t.disabled,ve.colorModeForRenderPass(),Et.disabled,cr(rn,ve.transform,$r),de.id,xn.layoutVertexBuffer,xn.indexBuffer,xn.segments,null,ve.transform.zoom,null,null,xn.collisionVertexBuffer)}}if(!(!Fe||!er.length)){var ca=ve.useProgram("collisionCircle"),la=new e.StructArrayLayout2f1f2i16;la.resize(pr*4),la._trim();for(var wa=0,La=0,Ca=er;La<Ca.length;La+=1)for(var Fa=Ca[La],Ba=0;Ba<Fa.circleArray.length/4;Ba++){var ti=Ba*4,pi=Fa.circleArray[ti+0],Yi=Fa.circleArray[ti+1],xi=Fa.circleArray[ti+2],Ci=Fa.circleArray[ti+3];la.emplace(wa++,pi,Yi,xi,Ci,0),la.emplace(wa++,pi,Yi,xi,Ci,1),la.emplace(wa++,pi,Yi,xi,Ci,2),la.emplace(wa++,pi,Yi,xi,Ci,3)}(!gs||gs.length<pr*2)&&(gs=ql(pr));for(var Ja=Je.createIndexBuffer(gs,!0),Wi=Je.createVertexBuffer(la,e.collisionCircleLayout.members,!0),Qi=0,to=er;Qi<to.length;Qi+=1){var Ii=to[Qi],ho=Or(Ii.transform,Ii.invTransform,ve.transform);ca.draw(Je,ht.TRIANGLES,qr.disabled,$t.disabled,ve.colorModeForRenderPass(),Et.disabled,ho,de.id,Wi,Ja,e.SegmentVector.simpleSegment(0,Ii.circleOffset*2,Ii.circleArray.length,Ii.circleArray.length/2),null,ve.transform.zoom,null,null,null)}Wi.destroy(),Ja.destroy()}}function ql(ve){var W=ve*2,de=new e.StructArrayLayout3ui6;de.resize(W),de._trim();for(var $=0;$<W;$++){var ge=$*6;de.uint16[ge+0]=$*4+0,de.uint16[ge+1]=$*4+1,de.uint16[ge+2]=$*4+2,de.uint16[ge+3]=$*4+2,de.uint16[ge+4]=$*4+3,de.uint16[ge+5]=$*4+0}return de}var Gc=e.identity(new Float32Array(16));function Ku(ve,W,de,$,ge){if(ve.renderPass==="translucent"){var Ce=$t.disabled,Fe=ve.colorModeForRenderPass(),Je=de.layout.get("text-variable-anchor");Je&&Ju($,ve,de,W,de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),ge),de.paint.get("icon-opacity").constantOr(1)!==0&&Fu(ve,W,de,$,!1,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),de.layout.get("icon-rotation-alignment"),de.layout.get("icon-pitch-alignment"),de.layout.get("icon-keep-upright"),Ce,Fe),de.paint.get("text-opacity").constantOr(1)!==0&&Fu(ve,W,de,$,!0,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),de.layout.get("text-keep-upright"),Ce,Fe),W.map.showCollisionBoxes&&(Iu(ve,W,de,$,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),!0),Iu(ve,W,de,$,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),!1))}}function gu(ve,W,de,$,ge,Ce){var Fe=e.getAnchorAlignment(ve),Je=Fe.horizontalAlign,ht=Fe.verticalAlign,Dt=-(Je-.5)*W,er=-(ht-.5)*de,pr=e.evaluateVariableOffset(ve,$);return new e.Point((Dt/ge+pr[0])*Ce,(er/ge+pr[1])*Ce)}function Ju(ve,W,de,$,ge,Ce,Fe){for(var Je=W.transform,ht=ge==="map",Dt=Ce==="map",er=0,pr=ve;er<pr.length;er+=1){var mr=pr[er],Rr=$.getTile(mr),Zr=Rr.getBucket(de);if(!(!Zr||!Zr.text||!Zr.text.segments.get().length)){var $r=Zr.textSizeData,Xr=e.evaluateSizeForZoom($r,Je.zoom),rn=Ln(Rr,1,W.transform.zoom),xn=jr(mr.posMatrix,Dt,ht,W.transform,rn),Fn=de.layout.get("icon-text-fit")!=="none"&&Zr.hasIconData();if(Xr){var Gn=Math.pow(2,Je.zoom-Rr.tileID.overscaledZ);Es(Zr,ht,Dt,Fe,e.symbolSize,Je,xn,mr.posMatrix,Gn,Xr,Fn)}}}}function Es(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt,er){var pr=ve.text.placedSymbolArray,mr=ve.text.dynamicLayoutVertexArray,Rr=ve.icon.dynamicLayoutVertexArray,Zr={};mr.clear();for(var $r=0;$r<pr.length;$r++){var Xr=pr.get($r),rn=ve.allowVerticalPlacement&&!Xr.placedOrientation,xn=!Xr.hidden&&Xr.crossTileID&&!rn?$[Xr.crossTileID]:null;if(!xn)ei(Xr.numGlyphs,mr);else{var Fn=new e.Point(Xr.anchorX,Xr.anchorY),Gn=yn(Fn,de?Je:Fe),oa=Wn(Ce.cameraToCenterDistance,Gn.signedDistanceFromCamera),ca=ge.evaluateSizeForFeature(ve.textSizeData,Dt,Xr)*oa/e.ONE_EM;de&&(ca*=ve.tilePixelRatio/ht);for(var la=xn.width,wa=xn.height,La=xn.anchor,Ca=xn.textOffset,Fa=xn.textBoxScale,Ba=gu(La,la,wa,Ca,Fa,ca),ti=de?yn(Fn.add(Ba),Fe).point:Gn.point.add(W?Ba.rotate(-Ce.angle):Ba),pi=ve.allowVerticalPlacement&&Xr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Yi=0;Yi<Xr.numGlyphs;Yi++)e.addDynamicAttributes(mr,ti,pi);er&&Xr.associatedIconIndex>=0&&(Zr[Xr.associatedIconIndex]={shiftedAnchor:ti,angle:pi})}}if(er){Rr.clear();for(var xi=ve.icon.placedSymbolArray,Ci=0;Ci<xi.length;Ci++){var Ja=xi.get(Ci);if(Ja.hidden)ei(Ja.numGlyphs,Rr);else{var Wi=Zr[Ci];if(!Wi)ei(Ja.numGlyphs,Rr);else for(var Qi=0;Qi<Ja.numGlyphs;Qi++)e.addDynamicAttributes(Rr,Wi.shiftedAnchor,Wi.angle)}}ve.icon.dynamicLayoutVertexBuffer.updateData(Rr)}ve.text.dynamicLayoutVertexBuffer.updateData(mr)}function _l(ve,W,de){return de.iconsInText&&W?"symbolTextAndIcon":ve?"symbolSDF":"symbolIcon"}function Fu(ve,W,de,$,ge,Ce,Fe,Je,ht,Dt,er,pr){for(var mr=ve.context,Rr=mr.gl,Zr=ve.transform,$r=Je==="map",Xr=ht==="map",rn=$r&&de.layout.get("symbol-placement")!=="point",xn=$r&&!Xr&&!rn,Fn=de.layout.get("symbol-sort-key").constantOr(1)!==void 0,Gn=ve.depthModeForSublayer(0,qr.ReadOnly),oa=de.layout.get("text-variable-anchor"),ca=[],la=0,wa=$;la<wa.length;la+=1){var La=wa[la],Ca=W.getTile(La),Fa=Ca.getBucket(de);if(!!Fa){var Ba=ge?Fa.text:Fa.icon;if(!(!Ba||!Ba.segments.get().length)){var ti=Ba.programConfigurations.get(de.id),pi=ge||Fa.sdfIcons,Yi=ge?Fa.textSizeData:Fa.iconSizeData,xi=Xr||Zr.pitch!==0,Ci=ve.useProgram(_l(pi,ge,Fa),ti),Ja=e.evaluateSizeForZoom(Yi,Zr.zoom),Wi=void 0,Qi=[0,0],to=void 0,Ii=void 0,ho=null,gi=void 0;if(ge){if(to=Ca.glyphAtlasTexture,Ii=Rr.LINEAR,Wi=Ca.glyphAtlasTexture.size,Fa.iconsInText){Qi=Ca.imageAtlasTexture.size,ho=Ca.imageAtlasTexture;var Oi=Yi.kind==="composite"||Yi.kind==="camera";gi=xi||ve.options.rotating||ve.options.zooming||Oi?Rr.LINEAR:Rr.NEAREST}}else{var Ho=de.layout.get("icon-size").constantOr(0)!==1||Fa.iconsNeedLinear;to=Ca.imageAtlasTexture,Ii=pi||ve.options.rotating||ve.options.zooming||Ho||xi?Rr.LINEAR:Rr.NEAREST,Wi=Ca.imageAtlasTexture.size}var as=Ln(Ca,1,ve.transform.zoom),xu=jr(La.posMatrix,Xr,$r,ve.transform,as),bu=kn(La.posMatrix,Xr,$r,ve.transform,as),qu=oa&&Fa.hasTextData(),ec=de.layout.get("icon-text-fit")!=="none"&&qu&&Fa.hasIconData();rn&&$n(Fa,La.posMatrix,ve,ge,xu,bu,Xr,Dt);var gc=ve.translatePosMatrix(La.posMatrix,Ca,Ce,Fe),tc=rn||ge&&oa||ec?Gc:xu,Tl=ve.translatePosMatrix(bu,Ca,Ce,Fe,!0),Ic=pi&&de.paint.get(ge?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ks=void 0;pi?Fa.iconsInText?Ks=ol(Yi.kind,Ja,xn,Xr,ve,gc,tc,Tl,Wi,Qi):Ks=Co(Yi.kind,Ja,xn,Xr,ve,gc,tc,Tl,ge,Wi,!0):Ks=Ns(Yi.kind,Ja,xn,Xr,ve,gc,tc,Tl,ge,Wi);var eu={program:Ci,buffers:Ba,uniformValues:Ks,atlasTexture:to,atlasTextureIcon:ho,atlasInterpolation:Ii,atlasInterpolationIcon:gi,isSDF:pi,hasHalo:Ic};if(Fn)for(var rc=Ba.segments.get(),Uu=0,nc=rc;Uu<nc.length;Uu+=1){var gh=nc[Uu];ca.push({segments:new e.SegmentVector([gh]),sortKey:gh.sortKey,state:eu})}else ca.push({segments:Ba.segments,sortKey:0,state:eu})}}}Fn&&ca.sort(function(yh,mh){return yh.sortKey-mh.sortKey});for(var Yc=0,Us=ca;Yc<Us.length;Yc+=1){var Uf=Us[Yc],sl=Uf.state;if(mr.activeTexture.set(Rr.TEXTURE0),sl.atlasTexture.bind(sl.atlasInterpolation,Rr.CLAMP_TO_EDGE),sl.atlasTextureIcon&&(mr.activeTexture.set(Rr.TEXTURE1),sl.atlasTextureIcon&&sl.atlasTextureIcon.bind(sl.atlasInterpolationIcon,Rr.CLAMP_TO_EDGE)),sl.isSDF){var Vf=sl.uniformValues;sl.hasHalo&&(Vf.u_is_halo=1,yu(sl.buffers,Uf.segments,de,ve,sl.program,Gn,er,pr,Vf)),Vf.u_is_halo=0}yu(sl.buffers,Uf.segments,de,ve,sl.program,Gn,er,pr,sl.uniformValues)}}function yu(ve,W,de,$,ge,Ce,Fe,Je,ht){var Dt=$.context,er=Dt.gl;ge.draw(Dt,er.TRIANGLES,Ce,Fe,Je,Et.disabled,ht,de.id,ve.layoutVertexBuffer,ve.indexBuffer,W,de.paint,$.transform.zoom,ve.programConfigurations.get(de.id),ve.dynamicLayoutVertexBuffer,ve.opacityVertexBuffer)}function Xo(ve,W,de,$){if(ve.renderPass==="translucent"){var ge=de.paint.get("circle-opacity"),Ce=de.paint.get("circle-stroke-width"),Fe=de.paint.get("circle-stroke-opacity"),Je=de.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ge.constantOr(1)===0&&(Ce.constantOr(1)===0||Fe.constantOr(1)===0))){for(var ht=ve.context,Dt=ht.gl,er=ve.depthModeForSublayer(0,qr.ReadOnly),pr=$t.disabled,mr=ve.colorModeForRenderPass(),Rr=[],Zr=0;Zr<$.length;Zr++){var $r=$[Zr],Xr=W.getTile($r),rn=Xr.getBucket(de);if(!!rn){var xn=rn.programConfigurations.get(de.id),Fn=ve.useProgram("circle",xn),Gn=rn.layoutVertexBuffer,oa=rn.indexBuffer,ca=bt(ve,$r,Xr,de),la={programConfiguration:xn,program:Fn,layoutVertexBuffer:Gn,indexBuffer:oa,uniformValues:ca};if(Je)for(var wa=rn.segments.get(),La=0,Ca=wa;La<Ca.length;La+=1){var Fa=Ca[La];Rr.push({segments:new e.SegmentVector([Fa]),sortKey:Fa.sortKey,state:la})}else Rr.push({segments:rn.segments,sortKey:0,state:la})}}Je&&Rr.sort(function(Ii,ho){return Ii.sortKey-ho.sortKey});for(var Ba=0,ti=Rr;Ba<ti.length;Ba+=1){var pi=ti[Ba],Yi=pi.state,xi=Yi.programConfiguration,Ci=Yi.program,Ja=Yi.layoutVertexBuffer,Wi=Yi.indexBuffer,Qi=Yi.uniformValues,to=pi.segments;Ci.draw(ht,Dt.TRIANGLES,er,pr,mr,Et.disabled,Qi,de.id,Ja,Wi,to,de.paint,ve.transform.zoom,xi)}}}}function $u(ve,W,de,$){if(de.paint.get("heatmap-opacity")!==0)if(ve.renderPass==="offscreen"){var ge=ve.context,Ce=ge.gl,Fe=$t.disabled,Je=new Qe([Ce.ONE,Ce.ONE],e.Color.transparent,[!0,!0,!0,!0]);kc(ge,ve,de),ge.clear({color:e.Color.transparent});for(var ht=0;ht<$.length;ht++){var Dt=$[ht];if(!W.hasRenderableParent(Dt)){var er=W.getTile(Dt),pr=er.getBucket(de);if(!!pr){var mr=pr.programConfigurations.get(de.id),Rr=ve.useProgram("heatmap",mr),Zr=ve.transform,$r=Zr.zoom;Rr.draw(ge,Ce.TRIANGLES,qr.disabled,Fe,Je,Et.disabled,Un(Dt.posMatrix,er,$r,de.paint.get("heatmap-intensity")),de.id,pr.layoutVertexBuffer,pr.indexBuffer,pr.segments,de.paint,ve.transform.zoom,mr)}}}ge.viewport.set([0,0,ve.width,ve.height])}else ve.renderPass==="translucent"&&(ve.context.setColorMode(ve.colorModeForRenderPass()),zu(ve,de))}function kc(ve,W,de){var $=ve.gl;ve.activeTexture.set($.TEXTURE1),ve.viewport.set([0,0,W.width/4,W.height/4]);var ge=de.heatmapFbo;if(ge)$.bindTexture($.TEXTURE_2D,ge.colorAttachment.get()),ve.bindFramebuffer.set(ge.framebuffer);else{var Ce=$.createTexture();$.bindTexture($.TEXTURE_2D,Ce),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.LINEAR),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.LINEAR),ge=de.heatmapFbo=ve.createFramebuffer(W.width/4,W.height/4,!1),rs(ve,W,Ce,ge)}}function rs(ve,W,de,$){var ge=ve.gl,Ce=ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:ge.UNSIGNED_BYTE;ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,W.width/4,W.height/4,0,ge.RGBA,Ce,null),$.colorAttachment.set(de)}function zu(ve,W){var de=ve.context,$=de.gl,ge=W.heatmapFbo;if(!!ge){de.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,ge.colorAttachment.get()),de.activeTexture.set($.TEXTURE1);var Ce=W.colorRampTexture;Ce||(Ce=W.colorRampTexture=new e.Texture(de,W.colorRamp,$.RGBA)),Ce.bind($.LINEAR,$.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(de,$.TRIANGLES,qr.disabled,$t.disabled,ve.colorModeForRenderPass(),Et.disabled,On(ve,W,0,1),W.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,W.paint,ve.transform.zoom)}}function Ou(ve,W,de,$){if(ve.renderPass==="translucent"){var ge=de.paint.get("line-opacity"),Ce=de.paint.get("line-width");if(!(ge.constantOr(1)===0||Ce.constantOr(1)===0)){var Fe=ve.depthModeForSublayer(0,qr.ReadOnly),Je=ve.colorModeForRenderPass(),ht=de.paint.get("line-dasharray"),Dt=de.paint.get("line-pattern"),er=Dt.constantOr(1),pr=de.paint.get("line-gradient"),mr=de.getCrossfadeParameters(),Rr=er?"linePattern":ht?"lineSDF":pr?"lineGradient":"line",Zr=ve.context,$r=Zr.gl,Xr=!0;if(pr){Zr.activeTexture.set($r.TEXTURE0);var rn=de.gradientTexture;if(!de.gradient)return;rn||(rn=de.gradientTexture=new e.Texture(Zr,de.gradient,$r.RGBA)),rn.bind($r.LINEAR,$r.CLAMP_TO_EDGE)}for(var xn=0,Fn=$;xn<Fn.length;xn+=1){var Gn=Fn[xn],oa=W.getTile(Gn);if(!(er&&!oa.patternsLoaded())){var ca=oa.getBucket(de);if(!!ca){var la=ca.programConfigurations.get(de.id),wa=ve.context.program.get(),La=ve.useProgram(Rr,la),Ca=Xr||La.program!==wa,Fa=Dt.constantOr(null);if(Fa&&oa.imageAtlas){var Ba=oa.imageAtlas,ti=Ba.patternPositions[Fa.to.toString()],pi=Ba.patternPositions[Fa.from.toString()];ti&&pi&&la.setConstantPatternPositions(ti,pi)}var Yi=er?Ei(ve,oa,de,mr):ht?wi(ve,oa,de,ht,mr):pr?Mi(ve,oa,de):si(ve,oa,de);er?(Zr.activeTexture.set($r.TEXTURE0),oa.imageAtlasTexture.bind($r.LINEAR,$r.CLAMP_TO_EDGE),la.updatePaintBuffers(mr)):ht&&(Ca||ve.lineAtlas.dirty)&&(Zr.activeTexture.set($r.TEXTURE0),ve.lineAtlas.bind(Zr)),La.draw(Zr,$r.TRIANGLES,Fe,ve.stencilModeForClipping(Gn),Je,Et.disabled,Yi,de.id,ca.layoutVertexBuffer,ca.indexBuffer,ca.segments,de.paint,ve.transform.zoom,la),Xr=!1}}}}}}function Qu(ve,W,de,$){var ge=de.paint.get("fill-color"),Ce=de.paint.get("fill-opacity");if(Ce.constantOr(1)!==0){var Fe=ve.colorModeForRenderPass(),Je=de.paint.get("fill-pattern"),ht=ve.opaquePassEnabledForLayer()&&!Je.constantOr(1)&&ge.constantOr(e.Color.transparent).a===1&&Ce.constantOr(0)===1?"opaque":"translucent";if(ve.renderPass===ht){var Dt=ve.depthModeForSublayer(1,ve.renderPass==="opaque"?qr.ReadWrite:qr.ReadOnly);Oe(ve,W,de,$,Dt,Fe,!1)}if(ve.renderPass==="translucent"&&de.paint.get("fill-antialias")){var er=ve.depthModeForSublayer(de.getPaintProperty("fill-outline-color")?2:0,qr.ReadOnly);Oe(ve,W,de,$,er,Fe,!0)}}}function Oe(ve,W,de,$,ge,Ce,Fe){var Je=ve.context.gl,ht=de.paint.get("fill-pattern"),Dt=ht&&ht.constantOr(1),er=de.getCrossfadeParameters(),pr,mr,Rr,Zr,$r;Fe?(mr=Dt&&!de.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pr=Je.LINES):(mr=Dt?"fillPattern":"fill",pr=Je.TRIANGLES);for(var Xr=0,rn=$;Xr<rn.length;Xr+=1){var xn=rn[Xr],Fn=W.getTile(xn);if(!(Dt&&!Fn.patternsLoaded())){var Gn=Fn.getBucket(de);if(!!Gn){var oa=Gn.programConfigurations.get(de.id),ca=ve.useProgram(mr,oa);Dt&&(ve.context.activeTexture.set(Je.TEXTURE0),Fn.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),oa.updatePaintBuffers(er));var la=ht.constantOr(null);if(la&&Fn.imageAtlas){var wa=Fn.imageAtlas,La=wa.patternPositions[la.to.toString()],Ca=wa.patternPositions[la.from.toString()];La&&Ca&&oa.setConstantPatternPositions(La,Ca)}var Fa=ve.translatePosMatrix(xn.posMatrix,Fn,de.paint.get("fill-translate"),de.paint.get("fill-translate-anchor"));if(!Fe)Zr=Gn.indexBuffer,$r=Gn.segments,Rr=Dt?ps(Fa,ve,er,Fn):No(Fa);else{Zr=Gn.indexBuffer2,$r=Gn.segments2;var Ba=[Je.drawingBufferWidth,Je.drawingBufferHeight];Rr=mr==="fillOutlinePattern"&&Dt?$l(Fa,ve,er,Fn,Ba):Du(Fa,Ba)}ca.draw(ve.context,pr,ge,ve.stencilModeForClipping(xn),Ce,Et.disabled,Rr,de.id,Gn.layoutVertexBuffer,Zr,$r,de.paint,ve.transform.zoom,oa)}}}}function je(ve,W,de,$){var ge=de.paint.get("fill-extrusion-opacity");if(ge!==0&&ve.renderPass==="translucent"){var Ce=new qr(ve.context.gl.LEQUAL,qr.ReadWrite,ve.depthRangeFor3D);if(ge===1&&!de.paint.get("fill-extrusion-pattern").constantOr(1)){var Fe=ve.colorModeForRenderPass();nt(ve,W,de,$,Ce,$t.disabled,Fe)}else nt(ve,W,de,$,Ce,$t.disabled,Qe.disabled),nt(ve,W,de,$,Ce,ve.stencilModeFor3D(),ve.colorModeForRenderPass())}}function nt(ve,W,de,$,ge,Ce,Fe){for(var Je=ve.context,ht=Je.gl,Dt=de.paint.get("fill-extrusion-pattern"),er=Dt.constantOr(1),pr=de.getCrossfadeParameters(),mr=de.paint.get("fill-extrusion-opacity"),Rr=0,Zr=$;Rr<Zr.length;Rr+=1){var $r=Zr[Rr],Xr=W.getTile($r),rn=Xr.getBucket(de);if(!!rn){var xn=rn.programConfigurations.get(de.id),Fn=ve.useProgram(er?"fillExtrusionPattern":"fillExtrusion",xn);er&&(ve.context.activeTexture.set(ht.TEXTURE0),Xr.imageAtlasTexture.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),xn.updatePaintBuffers(pr));var Gn=Dt.constantOr(null);if(Gn&&Xr.imageAtlas){var oa=Xr.imageAtlas,ca=oa.patternPositions[Gn.to.toString()],la=oa.patternPositions[Gn.from.toString()];ca&&la&&xn.setConstantPatternPositions(ca,la)}var wa=ve.translatePosMatrix($r.posMatrix,Xr,de.paint.get("fill-extrusion-translate"),de.paint.get("fill-extrusion-translate-anchor")),La=de.paint.get("fill-extrusion-vertical-gradient"),Ca=er?js(wa,ve,La,mr,$r,pr,Xr):Wo(wa,ve,La,mr);Fn.draw(Je,Je.gl.TRIANGLES,ge,Ce,Fe,Et.backCCW,Ca,de.id,rn.layoutVertexBuffer,rn.indexBuffer,rn.segments,de.paint,ve.transform.zoom,xn)}}}function ut(ve,W,de,$){if(!(ve.renderPass!=="offscreen"&&ve.renderPass!=="translucent")){for(var ge=ve.context,Ce=W.getSource().maxzoom,Fe=ve.depthModeForSublayer(0,qr.ReadOnly),Je=ve.colorModeForRenderPass(),ht=ve.renderPass==="translucent"?ve.stencilConfigForOverlap($):[{},$],Dt=ht[0],er=ht[1],pr=0,mr=er;pr<mr.length;pr+=1){var Rr=mr[pr],Zr=W.getTile(Rr);Zr.needsHillshadePrepare&&ve.renderPass==="offscreen"?_t(ve,Zr,de,Ce,Fe,$t.disabled,Je):ve.renderPass==="translucent"&&Tt(ve,Zr,de,Fe,Dt[Rr.overscaledZ],Je)}ge.viewport.set([0,0,ve.width,ve.height])}}function Tt(ve,W,de,$,ge,Ce){var Fe=ve.context,Je=Fe.gl,ht=W.fbo;if(!!ht){var Dt=ve.useProgram("hillshade");Fe.activeTexture.set(Je.TEXTURE0),Je.bindTexture(Je.TEXTURE_2D,ht.colorAttachment.get());var er=Ga(ve,W,de);Dt.draw(Fe,Je.TRIANGLES,$,ge,Ce,Et.disabled,er,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function _t(ve,W,de,$,ge,Ce,Fe){var Je=ve.context,ht=Je.gl,Dt=W.dem;if(Dt&&Dt.data){var er=Dt.dim,pr=Dt.stride,mr=Dt.getPixels();if(Je.activeTexture.set(ht.TEXTURE1),Je.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||ve.getTileTexture(pr),W.demTexture){var Rr=W.demTexture;Rr.update(mr,{premultiply:!1}),Rr.bind(ht.NEAREST,ht.CLAMP_TO_EDGE)}else W.demTexture=new e.Texture(Je,mr,ht.RGBA,{premultiply:!1}),W.demTexture.bind(ht.NEAREST,ht.CLAMP_TO_EDGE);Je.activeTexture.set(ht.TEXTURE0);var Zr=W.fbo;if(!Zr){var $r=new e.Texture(Je,{width:er,height:er,data:null},ht.RGBA);$r.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),Zr=W.fbo=Je.createFramebuffer(er,er,!0),Zr.colorAttachment.set($r.texture)}Je.bindFramebuffer.set(Zr.framebuffer),Je.viewport.set([0,0,er,er]),ve.useProgram("hillshadePrepare").draw(Je,ht.TRIANGLES,ge,Ce,Fe,Et.disabled,za(W.tileID,Dt,$),de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function kt(ve,W,de,$){if(ve.renderPass==="translucent"&&de.paint.get("raster-opacity")!==0&&!!$.length)for(var ge=ve.context,Ce=ge.gl,Fe=W.getSource(),Je=ve.useProgram("raster"),ht=ve.colorModeForRenderPass(),Dt=Fe instanceof ae?[{},$]:ve.stencilConfigForOverlap($),er=Dt[0],pr=Dt[1],mr=pr[pr.length-1].overscaledZ,Rr=!ve.options.moving,Zr=0,$r=pr;Zr<$r.length;Zr+=1){var Xr=$r[Zr],rn=ve.depthModeForSublayer(Xr.overscaledZ-mr,de.paint.get("raster-opacity")===1?qr.ReadWrite:qr.ReadOnly,Ce.LESS),xn=W.getTile(Xr),Fn=ve.transform.calculatePosMatrix(Xr.toUnwrapped(),Rr);xn.registerFadeDuration(de.paint.get("raster-fade-duration"));var Gn=W.findLoadedParent(Xr,0),oa=vr(xn,Gn,W,de,ve.transform),ca=void 0,la=void 0,wa=de.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR;ge.activeTexture.set(Ce.TEXTURE0),xn.texture.bind(wa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ge.activeTexture.set(Ce.TEXTURE1),Gn?(Gn.texture.bind(wa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ca=Math.pow(2,Gn.tileID.overscaledZ-xn.tileID.overscaledZ),la=[xn.tileID.canonical.x*ca%1,xn.tileID.canonical.y*ca%1]):xn.texture.bind(wa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);var La=ao(Fn,la||[0,0],ca||1,oa,de);Fe instanceof ae?Je.draw(ge,Ce.TRIANGLES,rn,$t.disabled,ht,Et.disabled,La,de.id,Fe.boundsBuffer,ve.quadTriangleIndexBuffer,Fe.boundsSegments):Je.draw(ge,Ce.TRIANGLES,rn,er[Xr.overscaledZ],ht,Et.disabled,La,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function vr(ve,W,de,$,ge){var Ce=$.paint.get("raster-fade-duration");if(Ce>0){var Fe=e.browser.now(),Je=(Fe-ve.timeAdded)/Ce,ht=W?(Fe-W.timeAdded)/Ce:-1,Dt=de.getSource(),er=ge.coveringZoomLevel({tileSize:Dt.tileSize,roundZoom:Dt.roundZoom}),pr=!W||Math.abs(W.tileID.overscaledZ-er)>Math.abs(ve.tileID.overscaledZ-er),mr=pr&&ve.refreshedUponExpiration?1:e.clamp(pr?Je:1-ht,0,1);return ve.refreshedUponExpiration&&Je>=1&&(ve.refreshedUponExpiration=!1),W?{opacity:1,mix:1-mr}:{opacity:mr,mix:0}}else return{opacity:1,mix:0}}function yr(ve,W,de){var $=de.paint.get("background-color"),ge=de.paint.get("background-opacity");if(ge!==0){var Ce=ve.context,Fe=Ce.gl,Je=ve.transform,ht=Je.tileSize,Dt=de.paint.get("background-pattern");if(!ve.isPatternMissing(Dt)){var er=!Dt&&$.a===1&&ge===1&&ve.opaquePassEnabledForLayer()?"opaque":"translucent";if(ve.renderPass===er){var pr=$t.disabled,mr=ve.depthModeForSublayer(0,er==="opaque"?qr.ReadWrite:qr.ReadOnly),Rr=ve.colorModeForRenderPass(),Zr=ve.useProgram(Dt?"backgroundPattern":"background"),$r=Je.coveringTiles({tileSize:ht});Dt&&(Ce.activeTexture.set(Fe.TEXTURE0),ve.imageManager.bind(ve.context));for(var Xr=de.getCrossfadeParameters(),rn=0,xn=$r;rn<xn.length;rn+=1){var Fn=xn[rn],Gn=ve.transform.calculatePosMatrix(Fn.toUnwrapped()),oa=Dt?Ql(Gn,ge,ve,Dt,{tileID:Fn,tileSize:ht},Xr):Lo(Gn,ge,$);Zr.draw(Ce,Fe.TRIANGLES,mr,pr,Rr,Et.disabled,oa,de.id,ve.tileExtentBuffer,ve.quadTriangleIndexBuffer,ve.tileExtentSegments)}}}}}var fr=new e.Color(1,0,0,1),Tr=new e.Color(0,1,0,1),zr=new e.Color(0,0,1,1),Qr=new e.Color(1,0,1,1),on=new e.Color(0,1,1,1);function En(ve){var W=ve.transform.padding,de=3;Jn(ve,ve.transform.height-(W.top||0),de,fr),Jn(ve,W.bottom||0,de,Tr),Ta(ve,W.left||0,de,zr),Ta(ve,ve.transform.width-(W.right||0),de,Qr);var $=ve.transform.centerPoint;Nn(ve,$.x,ve.transform.height-$.y,on)}function Nn(ve,W,de,$){var ge=20,Ce=2;Ea(ve,W-Ce/2,de-ge/2,Ce,ge,$),Ea(ve,W-ge/2,de-Ce/2,ge,Ce,$)}function Jn(ve,W,de,$){Ea(ve,0,W+de/2,ve.transform.width,de,$)}function Ta(ve,W,de,$){Ea(ve,W-de/2,0,de,ve.transform.height,$)}function Ea(ve,W,de,$,ge,Ce){var Fe=ve.context,Je=Fe.gl;Je.enable(Je.SCISSOR_TEST),Je.scissor(W*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio,$*e.browser.devicePixelRatio,ge*e.browser.devicePixelRatio),Fe.clear({color:Ce}),Je.disable(Je.SCISSOR_TEST)}function ni(ve,W,de){for(var $=0;$<de.length;$++)qa(ve,W,de[$])}function qa(ve,W,de){var $=ve.context,ge=$.gl,Ce=de.posMatrix,Fe=ve.useProgram("debug"),Je=qr.disabled,ht=$t.disabled,Dt=ve.colorModeForRenderPass(),er="$debug";$.activeTexture.set(ge.TEXTURE0),ve.emptyTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Fe.draw($,ge.LINE_STRIP,Je,ht,Dt,Et.disabled,_n(Ce,e.Color.red),er,ve.debugBuffer,ve.tileBorderIndexBuffer,ve.debugSegments);var pr=W.getTileByID(de.key).latestRawTileData,mr=pr&&pr.byteLength||0,Rr=Math.floor(mr/1024),Zr=W.getTile(de).tileSize,$r=512/Math.min(Zr,512)*(de.overscaledZ/ve.transform.zoom)*.5,Xr=de.canonical.toString();de.overscaledZ!==de.canonical.z&&(Xr+=" => "+de.overscaledZ);var rn=Xr+" "+Rr+"kb";ai(ve,rn),Fe.draw($,ge.TRIANGLES,Je,ht,Qe.alphaBlended,Et.disabled,_n(Ce,e.Color.transparent,$r),er,ve.debugBuffer,ve.quadTriangleIndexBuffer,ve.debugSegments)}function ai(ve,W){ve.initDebugOverlayCanvas();var de=ve.debugOverlayCanvas,$=ve.context.gl,ge=ve.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,de.width,de.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold "+36+"px Open Sans, sans-serif",ge.fillText(W,5,5),ge.strokeText(W,5,5),ve.debugOverlayTexture.update(de),ve.debugOverlayTexture.bind($.LINEAR,$.CLAMP_TO_EDGE)}function Ti(ve,W,de){var $=ve.context,ge=de.implementation;if(ve.renderPass==="offscreen"){var Ce=ge.prerender;Ce&&(ve.setCustomLayerDefaults(),$.setColorMode(ve.colorModeForRenderPass()),Ce.call(ge,$.gl,ve.transform.customLayerMatrix()),$.setDirty(),ve.setBaseState())}else if(ve.renderPass==="translucent"){ve.setCustomLayerDefaults(),$.setColorMode(ve.colorModeForRenderPass()),$.setStencilMode($t.disabled);var Fe=ge.renderingMode==="3d"?new qr(ve.context.gl.LEQUAL,qr.ReadWrite,ve.depthRangeFor3D):ve.depthModeForSublayer(0,qr.ReadOnly);$.setDepthMode(Fe),ge.render($.gl,ve.transform.customLayerMatrix()),$.setDirty(),ve.setBaseState(),$.bindFramebuffer.set(null)}}var Yr={symbol:Ku,circle:Xo,heatmap:$u,line:Ou,fill:Qu,"fill-extrusion":je,hillshade:ut,raster:kt,background:yr,debug:ni,custom:Ti},et=function(W,de){this.context=new Vt(W),this.transform=de,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ka,this.gpuTimers={}};et.prototype.resize=function(W,de){if(this.width=W*e.browser.devicePixelRatio,this.height=de*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var $=0,ge=this.style._order;$<ge.length;$+=1){var Ce=ge[$];this.style._layers[Ce].resize()}},et.prototype.setup=function(){var W=this.context,de=new e.StructArrayLayout2i4;de.emplaceBack(0,0),de.emplaceBack(e.EXTENT,0),de.emplaceBack(0,e.EXTENT),de.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=W.createVertexBuffer(de,$s.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var $=new e.StructArrayLayout2i4;$.emplaceBack(0,0),$.emplaceBack(e.EXTENT,0),$.emplaceBack(0,e.EXTENT),$.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=W.createVertexBuffer($,$s.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var ge=new e.StructArrayLayout4i8;ge.emplaceBack(0,0,0,0),ge.emplaceBack(e.EXTENT,0,e.EXTENT,0),ge.emplaceBack(0,e.EXTENT,0,e.EXTENT),ge.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=W.createVertexBuffer(ge,X.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ce=new e.StructArrayLayout2i4;Ce.emplaceBack(0,0),Ce.emplaceBack(1,0),Ce.emplaceBack(0,1),Ce.emplaceBack(1,1),this.viewportBuffer=W.createVertexBuffer(Ce,$s.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Fe=new e.StructArrayLayout1ui2;Fe.emplaceBack(0),Fe.emplaceBack(1),Fe.emplaceBack(3),Fe.emplaceBack(2),Fe.emplaceBack(0),this.tileBorderIndexBuffer=W.createIndexBuffer(Fe);var Je=new e.StructArrayLayout3ui6;Je.emplaceBack(0,1,2),Je.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=W.createIndexBuffer(Je),this.emptyTexture=new e.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},W.gl.RGBA);var ht=this.context.gl;this.stencilClearMode=new $t({func:ht.ALWAYS,mask:0},0,255,ht.ZERO,ht.ZERO,ht.ZERO)},et.prototype.clearStencil=function(){var W=this.context,de=W.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var $=e.create();e.ortho($,0,this.width,this.height,0,0,1),e.scale($,$,[de.drawingBufferWidth,de.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(W,de.TRIANGLES,qr.disabled,this.stencilClearMode,Qe.disabled,Et.disabled,zn($),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},et.prototype._renderTileClippingMasks=function(W,de){if(!(this.currentStencilSource===W.source||!W.isTileClipped()||!de||!de.length)){this.currentStencilSource=W.source;var $=this.context,ge=$.gl;this.nextStencilID+de.length>256&&this.clearStencil(),$.setColorMode(Qe.disabled),$.setDepthMode(qr.disabled);var Ce=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Fe=0,Je=de;Fe<Je.length;Fe+=1){var ht=Je[Fe],Dt=this._tileClippingMaskIDs[ht.key]=this.nextStencilID++;Ce.draw($,ge.TRIANGLES,qr.disabled,new $t({func:ge.ALWAYS,mask:0},Dt,255,ge.KEEP,ge.KEEP,ge.REPLACE),Qe.disabled,Et.disabled,zn(ht.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},et.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var W=this.nextStencilID++,de=this.context.gl;return new $t({func:de.NOTEQUAL,mask:255},W,255,de.KEEP,de.KEEP,de.REPLACE)},et.prototype.stencilModeForClipping=function(W){var de=this.context.gl;return new $t({func:de.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,de.KEEP,de.KEEP,de.REPLACE)},et.prototype.stencilConfigForOverlap=function(W){var de,$=this.context.gl,ge=W.sort(function(Dt,er){return er.overscaledZ-Dt.overscaledZ}),Ce=ge[ge.length-1].overscaledZ,Fe=ge[0].overscaledZ-Ce+1;if(Fe>1){this.currentStencilSource=void 0,this.nextStencilID+Fe>256&&this.clearStencil();for(var Je={},ht=0;ht<Fe;ht++)Je[ht+Ce]=new $t({func:$.GEQUAL,mask:255},ht+this.nextStencilID,255,$.KEEP,$.KEEP,$.REPLACE);return this.nextStencilID+=Fe,[Je,ge]}return[(de={},de[Ce]=$t.disabled,de),ge]},et.prototype.colorModeForRenderPass=function(){var W=this.context.gl;if(this._showOverdrawInspector){var de=8,$=1/de;return new Qe([W.CONSTANT_COLOR,W.ONE],new e.Color($,$,$,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Qe.unblended:Qe.alphaBlended},et.prototype.depthModeForSublayer=function(W,de,$){if(!this.opaquePassEnabledForLayer())return qr.disabled;var ge=1-((1+this.currentLayer)*this.numSublayers+W)*this.depthEpsilon;return new qr($||this.context.gl.LEQUAL,de,[ge,ge])},et.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},et.prototype.render=function(W,de){var $=this;this.style=W,this.options=de,this.lineAtlas=W.lineAtlas,this.imageManager=W.imageManager,this.glyphManager=W.glyphManager,this.symbolFadeChange=W.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var ge=this.style._order,Ce=this.style.sourceCaches;for(var Fe in Ce){var Je=Ce[Fe];Je.used&&Je.prepare(this.context)}var ht={},Dt={},er={};for(var pr in Ce){var mr=Ce[pr];ht[pr]=mr.getVisibleCoordinates(),Dt[pr]=ht[pr].slice().reverse(),er[pr]=mr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Rr=0;Rr<ge.length;Rr++){var Zr=ge[Rr];if(this.style._layers[Zr].is3D()){this.opaquePassCutoff=Rr;break}}this.renderPass="offscreen";for(var $r=0,Xr=ge;$r<Xr.length;$r+=1){var rn=Xr[$r],xn=this.style._layers[rn];if(!(!xn.hasOffscreenPass()||xn.isHidden(this.transform.zoom))){var Fn=Dt[xn.source];xn.type!=="custom"&&!Fn.length||this.renderLayer(this,Ce[xn.source],xn,Fn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:de.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=de.showOverdrawInspector,this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ge.length-1;this.currentLayer>=0;this.currentLayer--){var Gn=this.style._layers[ge[this.currentLayer]],oa=Ce[Gn.source],ca=ht[Gn.source];this._renderTileClippingMasks(Gn,ca),this.renderLayer(this,oa,Gn,ca)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ge.length;this.currentLayer++){var la=this.style._layers[ge[this.currentLayer]],wa=Ce[la.source],La=(la.type==="symbol"?er:Dt)[la.source];this._renderTileClippingMasks(la,ht[la.source]),this.renderLayer(this,wa,la,La)}if(this.options.showTileBoundaries){var Ca,Fa,Ba=e.values(this.style._layers);Ba.forEach(function(ti){ti.source&&!ti.isHidden($.transform.zoom)&&(ti.source!==(Fa&&Fa.id)&&(Fa=$.style.sourceCaches[ti.source]),(!Ca||Ca.getSource().maxzoom<Fa.getSource().maxzoom)&&(Ca=Fa))}),Ca&&Yr.debug(this,Ca,Ca.getVisibleCoordinates())}this.options.showPadding&&En(this),this.context.setDefault()},et.prototype.renderLayer=function(W,de,$,ge){$.isHidden(this.transform.zoom)||$.type!=="background"&&$.type!=="custom"&&!ge.length||(this.id=$.id,this.gpuTimingStart($),Yr[$.type](W,de,$,ge,this.style.placement.variableOffsets),this.gpuTimingEnd())},et.prototype.gpuTimingStart=function(W){if(!!this.options.gpuTiming){var de=this.context.extTimerQuery,$=this.gpuTimers[W.id];$||($=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:de.createQueryEXT()}),$.calls++,de.beginQueryEXT(de.TIME_ELAPSED_EXT,$.query)}},et.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}},et.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W},et.prototype.queryGpuTimers=function(W){var de={};for(var $ in W){var ge=W[$],Ce=this.context.extTimerQuery,Fe=Ce.getQueryObjectEXT(ge.query,Ce.QUERY_RESULT_EXT)/(1e3*1e3);Ce.deleteQueryEXT(ge.query),de[$]=Fe}return de},et.prototype.translatePosMatrix=function(W,de,$,ge,Ce){if(!$[0]&&!$[1])return W;var Fe=Ce?ge==="map"?this.transform.angle:0:ge==="viewport"?-this.transform.angle:0;if(Fe){var Je=Math.sin(Fe),ht=Math.cos(Fe);$=[$[0]*ht-$[1]*Je,$[0]*Je+$[1]*ht]}var Dt=[Ce?$[0]:Ln(de,$[0],this.transform.zoom),Ce?$[1]:Ln(de,$[1],this.transform.zoom),0],er=new Float32Array(16);return e.translate(er,W,Dt),er},et.prototype.saveTileTexture=function(W){var de=this._tileTextures[W.size[0]];de?de.push(W):this._tileTextures[W.size[0]]=[W]},et.prototype.getTileTexture=function(W){var de=this._tileTextures[W];return de&&de.length>0?de.pop():null},et.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var de=this.imageManager.getPattern(W.from.toString()),$=this.imageManager.getPattern(W.to.toString());return!de||!$},et.prototype.useProgram=function(W,de){this.cache=this.cache||{};var $=""+W+(de?de.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[$]||(this.cache[$]=new ts(this.context,bl[W],de,du[W],this._showOverdrawInspector)),this.cache[$]},et.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},et.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(W.FUNC_ADD)},et.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var W=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,W.RGBA)}},et.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Jt=function(W,de){this.points=W,this.planes=de};Jt.fromInvProjectionMatrix=function(W,de,$){var ge=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ce=Math.pow(2,$),Fe=ge.map(function(Dt){return e.transformMat4([],Dt,W)}).map(function(Dt){return e.scale$1([],Dt,1/Dt[3]/de*Ce)}),Je=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ht=Je.map(function(Dt){var er=e.sub([],Fe[Dt[0]],Fe[Dt[1]]),pr=e.sub([],Fe[Dt[2]],Fe[Dt[1]]),mr=e.normalize([],e.cross([],er,pr)),Rr=-e.dot(mr,Fe[Dt[1]]);return mr.concat(Rr)});return new Jt(Fe,ht)};var Kr=function(W,de){this.min=W,this.max=de,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Kr.prototype.quadrant=function(W){for(var de=[W%2===0,W<2],$=e.clone$2(this.min),ge=e.clone$2(this.max),Ce=0;Ce<de.length;Ce++)$[Ce]=de[Ce]?this.min[Ce]:this.center[Ce],ge[Ce]=de[Ce]?this.center[Ce]:this.max[Ce];return ge[2]=this.max[2],new Kr($,ge)},Kr.prototype.distanceX=function(W){var de=Math.max(Math.min(this.max[0],W[0]),this.min[0]);return de-W[0]},Kr.prototype.distanceY=function(W){var de=Math.max(Math.min(this.max[1],W[1]),this.min[1]);return de-W[1]},Kr.prototype.intersects=function(W){for(var de=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],$=!0,ge=0;ge<W.planes.length;ge++){for(var Ce=W.planes[ge],Fe=0,Je=0;Je<de.length;Je++)Fe+=e.dot$1(Ce,de[Je])>=0;if(Fe===0)return 0;Fe!==de.length&&($=!1)}if($)return 2;for(var ht=0;ht<3;ht++){for(var Dt=Number.MAX_VALUE,er=-Number.MAX_VALUE,pr=0;pr<W.points.length;pr++){var mr=W.points[pr][ht]-this.min[ht];Dt=Math.min(Dt,mr),er=Math.max(er,mr)}if(er<0||Dt>this.max[ht]-this.min[ht])return 0}return 1};var Hn=function(W,de,$,ge){if(W===void 0&&(W=0),de===void 0&&(de=0),$===void 0&&($=0),ge===void 0&&(ge=0),isNaN(W)||W<0||isNaN(de)||de<0||isNaN($)||$<0||isNaN(ge)||ge<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W,this.bottom=de,this.left=$,this.right=ge};Hn.prototype.interpolate=function(W,de,$){return de.top!=null&&W.top!=null&&(this.top=e.number(W.top,de.top,$)),de.bottom!=null&&W.bottom!=null&&(this.bottom=e.number(W.bottom,de.bottom,$)),de.left!=null&&W.left!=null&&(this.left=e.number(W.left,de.left,$)),de.right!=null&&W.right!=null&&(this.right=e.number(W.right,de.right,$)),this},Hn.prototype.getCenter=function(W,de){var $=e.clamp((this.left+W-this.right)/2,0,W),ge=e.clamp((this.top+de-this.bottom)/2,0,de);return new e.Point($,ge)},Hn.prototype.equals=function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right},Hn.prototype.clone=function(){return new Hn(this.top,this.bottom,this.left,this.right)},Hn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ta=function(W,de,$,ge,Ce){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ce===void 0?!0:Ce,this._minZoom=W||0,this._maxZoom=de||22,this._minPitch=$==null?0:$,this._maxPitch=ge==null?60:ge,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hn,this._posMatrixCache={},this._alignedPosMatrixCache={}},ea={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ta.prototype.clone=function(){var W=new ta(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W},ea.minZoom.get=function(){return this._minZoom},ea.minZoom.set=function(ve){this._minZoom!==ve&&(this._minZoom=ve,this.zoom=Math.max(this.zoom,ve))},ea.maxZoom.get=function(){return this._maxZoom},ea.maxZoom.set=function(ve){this._maxZoom!==ve&&(this._maxZoom=ve,this.zoom=Math.min(this.zoom,ve))},ea.minPitch.get=function(){return this._minPitch},ea.minPitch.set=function(ve){this._minPitch!==ve&&(this._minPitch=ve,this.pitch=Math.max(this.pitch,ve))},ea.maxPitch.get=function(){return this._maxPitch},ea.maxPitch.set=function(ve){this._maxPitch!==ve&&(this._maxPitch=ve,this.pitch=Math.min(this.pitch,ve))},ea.renderWorldCopies.get=function(){return this._renderWorldCopies},ea.renderWorldCopies.set=function(ve){ve===void 0?ve=!0:ve===null&&(ve=!1),this._renderWorldCopies=ve},ea.worldSize.get=function(){return this.tileSize*this.scale},ea.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ea.size.get=function(){return new e.Point(this.width,this.height)},ea.bearing.get=function(){return-this.angle/Math.PI*180},ea.bearing.set=function(ve){var W=-e.wrap(ve,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ea.pitch.get=function(){return this._pitch/Math.PI*180},ea.pitch.set=function(ve){var W=e.clamp(ve,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},ea.fov.get=function(){return this._fov/Math.PI*180},ea.fov.set=function(ve){ve=Math.max(.01,Math.min(60,ve)),this._fov!==ve&&(this._unmodified=!1,this._fov=ve/180*Math.PI,this._calcMatrices())},ea.zoom.get=function(){return this._zoom},ea.zoom.set=function(ve){var W=Math.min(Math.max(ve,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},ea.center.get=function(){return this._center},ea.center.set=function(ve){ve.lat===this._center.lat&&ve.lng===this._center.lng||(this._unmodified=!1,this._center=ve,this._constrain(),this._calcMatrices())},ea.padding.get=function(){return this._edgeInsets.toJSON()},ea.padding.set=function(ve){this._edgeInsets.equals(ve)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ve,1),this._calcMatrices())},ea.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ta.prototype.isPaddingEqual=function(W){return this._edgeInsets.equals(W)},ta.prototype.interpolatePadding=function(W,de,$){this._unmodified=!1,this._edgeInsets.interpolate(W,de,$),this._constrain(),this._calcMatrices()},ta.prototype.coveringZoomLevel=function(W){var de=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,de)},ta.prototype.getVisibleUnwrappedCoordinates=function(W){var de=[new e.UnwrappedTileID(0,W)];if(this._renderWorldCopies)for(var $=this.pointCoordinate(new e.Point(0,0)),ge=this.pointCoordinate(new e.Point(this.width,0)),Ce=this.pointCoordinate(new e.Point(this.width,this.height)),Fe=this.pointCoordinate(new e.Point(0,this.height)),Je=Math.floor(Math.min($.x,ge.x,Ce.x,Fe.x)),ht=Math.floor(Math.max($.x,ge.x,Ce.x,Fe.x)),Dt=1,er=Je-Dt;er<=ht+Dt;er++)er!==0&&de.push(new e.UnwrappedTileID(er,W));return de},ta.prototype.coveringTiles=function(W){var de=this.coveringZoomLevel(W),$=de;if(W.minzoom!==void 0&&de<W.minzoom)return[];W.maxzoom!==void 0&&de>W.maxzoom&&(de=W.maxzoom);var ge=e.MercatorCoordinate.fromLngLat(this.center),Ce=Math.pow(2,de),Fe=[Ce*ge.x,Ce*ge.y,0],Je=Jt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,de),ht=W.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ht=de);var Dt=3,er=function(Ba){return{aabb:new Kr([Ba*Ce,0,0],[(Ba+1)*Ce,Ce,0]),zoom:0,x:0,y:0,wrap:Ba,fullyVisible:!1}},pr=[],mr=[],Rr=de,Zr=W.reparseOverscaled?$:de;if(this._renderWorldCopies)for(var $r=1;$r<=3;$r++)pr.push(er(-$r)),pr.push(er($r));for(pr.push(er(0));pr.length>0;){var Xr=pr.pop(),rn=Xr.x,xn=Xr.y,Fn=Xr.fullyVisible;if(!Fn){var Gn=Xr.aabb.intersects(Je);if(Gn===0)continue;Fn=Gn===2}var oa=Xr.aabb.distanceX(Fe),ca=Xr.aabb.distanceY(Fe),la=Math.max(Math.abs(oa),Math.abs(ca)),wa=Dt+(1<<Rr-Xr.zoom)-2;if(Xr.zoom===Rr||la>wa&&Xr.zoom>=ht){mr.push({tileID:new e.OverscaledTileID(Xr.zoom===Rr?Zr:Xr.zoom,Xr.wrap,Xr.zoom,rn,xn),distanceSq:e.sqrLen([Fe[0]-.5-rn,Fe[1]-.5-xn])});continue}for(var La=0;La<4;La++){var Ca=(rn<<1)+La%2,Fa=(xn<<1)+(La>>1);pr.push({aabb:Xr.aabb.quadrant(La),zoom:Xr.zoom+1,x:Ca,y:Fa,wrap:Xr.wrap,fullyVisible:Fn})}}return mr.sort(function(Ba,ti){return Ba.distanceSq-ti.distanceSq}).map(function(Ba){return Ba.tileID})},ta.prototype.resize=function(W,de){this.width=W,this.height=de,this.pixelsToGLUnits=[2/W,-2/de],this._constrain(),this._calcMatrices()},ea.unmodified.get=function(){return this._unmodified},ta.prototype.zoomScale=function(W){return Math.pow(2,W)},ta.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2},ta.prototype.project=function(W){var de=e.clamp(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(W.lng)*this.worldSize,e.mercatorYfromLat(de)*this.worldSize)},ta.prototype.unproject=function(W){return new e.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize).toLngLat()},ea.point.get=function(){return this.project(this.center)},ta.prototype.setLocationAtPoint=function(W,de){var $=this.pointCoordinate(de),ge=this.pointCoordinate(this.centerPoint),Ce=this.locationCoordinate(W),Fe=new e.MercatorCoordinate(Ce.x-($.x-ge.x),Ce.y-($.y-ge.y));this.center=this.coordinateLocation(Fe),this._renderWorldCopies&&(this.center=this.center.wrap())},ta.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))},ta.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))},ta.prototype.locationCoordinate=function(W){return e.MercatorCoordinate.fromLngLat(W)},ta.prototype.coordinateLocation=function(W){return W.toLngLat()},ta.prototype.pointCoordinate=function(W){var de=0,$=[W.x,W.y,0,1],ge=[W.x,W.y,1,1];e.transformMat4($,$,this.pixelMatrixInverse),e.transformMat4(ge,ge,this.pixelMatrixInverse);var Ce=$[3],Fe=ge[3],Je=$[0]/Ce,ht=ge[0]/Fe,Dt=$[1]/Ce,er=ge[1]/Fe,pr=$[2]/Ce,mr=ge[2]/Fe,Rr=pr===mr?0:(de-pr)/(mr-pr);return new e.MercatorCoordinate(e.number(Je,ht,Rr)/this.worldSize,e.number(Dt,er,Rr)/this.worldSize)},ta.prototype.coordinatePoint=function(W){var de=[W.x*this.worldSize,W.y*this.worldSize,0,1];return e.transformMat4(de,de,this.pixelMatrix),new e.Point(de[0]/de[3],de[1]/de[3])},ta.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},ta.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},ta.prototype.setMaxBounds=function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ta.prototype.calculatePosMatrix=function(W,de){de===void 0&&(de=!1);var $=W.key,ge=de?this._alignedPosMatrixCache:this._posMatrixCache;if(ge[$])return ge[$];var Ce=W.canonical,Fe=this.worldSize/this.zoomScale(Ce.z),Je=Ce.x+Math.pow(2,Ce.z)*W.wrap,ht=e.identity(new Float64Array(16));return e.translate(ht,ht,[Je*Fe,Ce.y*Fe,0]),e.scale(ht,ht,[Fe/e.EXTENT,Fe/e.EXTENT,1]),e.multiply(ht,de?this.alignedProjMatrix:this.projMatrix,ht),ge[$]=new Float32Array(ht),ge[$]},ta.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ta.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var W=-90,de=90,$=-180,ge=180,Ce,Fe,Je,ht,Dt=this.size,er=this._unmodified;if(this.latRange){var pr=this.latRange;W=e.mercatorYfromLat(pr[1])*this.worldSize,de=e.mercatorYfromLat(pr[0])*this.worldSize,Ce=de-W<Dt.y?Dt.y/(de-W):0}if(this.lngRange){var mr=this.lngRange;$=e.mercatorXfromLng(mr[0])*this.worldSize,ge=e.mercatorXfromLng(mr[1])*this.worldSize,Fe=ge-$<Dt.x?Dt.x/(ge-$):0}var Rr=this.point,Zr=Math.max(Fe||0,Ce||0);if(Zr){this.center=this.unproject(new e.Point(Fe?(ge+$)/2:Rr.x,Ce?(de+W)/2:Rr.y)),this.zoom+=this.scaleZoom(Zr),this._unmodified=er,this._constraining=!1;return}if(this.latRange){var $r=Rr.y,Xr=Dt.y/2;$r-Xr<W&&(ht=W+Xr),$r+Xr>de&&(ht=de-Xr)}if(this.lngRange){var rn=Rr.x,xn=Dt.x/2;rn-xn<$&&(Je=$+xn),rn+xn>ge&&(Je=ge-xn)}(Je!==void 0||ht!==void 0)&&(this.center=this.unproject(new e.Point(Je!==void 0?Je:Rr.x,ht!==void 0?ht:Rr.y))),this._unmodified=er,this._constraining=!1}},ta.prototype._calcMatrices=function(){if(!!this.height){var W=this._fov/2,de=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var $=Math.PI/2+this._pitch,ge=this._fov*(.5+de.y/this.height),Ce=Math.sin(ge)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-$-ge,.01,Math.PI-.01)),Fe=this.point,Je=Fe.x,ht=Fe.y,Dt=Math.cos(Math.PI/2-this._pitch)*Ce+this.cameraToCenterDistance,er=Dt*1.01,pr=this.height/50,mr=new Float64Array(16);e.perspective(mr,this._fov,this.width/this.height,pr,er),mr[8]=-de.x*2/this.width,mr[9]=de.y*2/this.height,e.scale(mr,mr,[1,-1,1]),e.translate(mr,mr,[0,0,-this.cameraToCenterDistance]),e.rotateX(mr,mr,this._pitch),e.rotateZ(mr,mr,this.angle),e.translate(mr,mr,[-Je,-ht,0]),this.mercatorMatrix=e.scale([],mr,[this.worldSize,this.worldSize,this.worldSize]),e.scale(mr,mr,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=mr,this.invProjMatrix=e.invert([],this.projMatrix);var Rr=this.width%2/2,Zr=this.height%2/2,$r=Math.cos(this.angle),Xr=Math.sin(this.angle),rn=Je-Math.round(Je)+$r*Rr+Xr*Zr,xn=ht-Math.round(ht)+$r*Zr+Xr*Rr,Fn=new Float64Array(mr);if(e.translate(Fn,Fn,[rn>.5?rn-1:rn,xn>.5?xn-1:xn,0]),this.alignedProjMatrix=Fn,mr=e.create(),e.scale(mr,mr,[this.width/2,-this.height/2,1]),e.translate(mr,mr,[1,-1,0]),this.labelPlaneMatrix=mr,mr=e.create(),e.scale(mr,mr,[1,-1,1]),e.translate(mr,mr,[-1,-1,0]),e.scale(mr,mr,[2/this.width,2/this.height,1]),this.glCoordMatrix=mr,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),mr=e.invert(new Float64Array(16),this.pixelMatrix),!mr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=mr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ta.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new e.Point(0,0)),de=[W.x*this.worldSize,W.y*this.worldSize,0,1],$=e.transformMat4(de,de,this.pixelMatrix);return $[3]/this.cameraToCenterDistance},ta.prototype.getCameraPoint=function(){var W=this._pitch,de=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,de))},ta.prototype.getCameraQueryGeometry=function(W){var de=this.getCameraPoint();if(W.length===1)return[W[0],de];for(var $=de.x,ge=de.y,Ce=de.x,Fe=de.y,Je=0,ht=W;Je<ht.length;Je+=1){var Dt=ht[Je];$=Math.min($,Dt.x),ge=Math.min(ge,Dt.y),Ce=Math.max(Ce,Dt.x),Fe=Math.max(Fe,Dt.y)}return[new e.Point($,ge),new e.Point(Ce,ge),new e.Point(Ce,Fe),new e.Point($,Fe),new e.Point($,ge)]},Object.defineProperties(ta.prototype,ea);function vi(ve,W){var de=!1,$=null,ge=function(){$=null,de&&(ve(),$=setTimeout(ge,W),de=!1)};return function(){return de=!0,$||ge(),$}}var Di=function(W){this._hashName=W&&encodeURIComponent(W),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=vi(this._updateHashUnthrottled.bind(this),30*1e3/100)};Di.prototype.addTo=function(W){return this._map=W,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Di.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Di.prototype.getHashString=function(W){var de=this._map.getCenter(),$=Math.round(this._map.getZoom()*100)/100,ge=Math.ceil(($*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ce=Math.pow(10,ge),Fe=Math.round(de.lng*Ce)/Ce,Je=Math.round(de.lat*Ce)/Ce,ht=this._map.getBearing(),Dt=this._map.getPitch(),er="";if(W?er+="/"+Fe+"/"+Je+"/"+$:er+=$+"/"+Je+"/"+Fe,(ht||Dt)&&(er+="/"+Math.round(ht*10)/10),Dt&&(er+="/"+Math.round(Dt)),this._hashName){var pr=this._hashName,mr=!1,Rr=e.window.location.hash.slice(1).split("&").map(function(Zr){var $r=Zr.split("=")[0];return $r===pr?(mr=!0,$r+"="+er):Zr}).filter(function(Zr){return Zr});return mr||Rr.push(pr+"="+er),"#"+Rr.join("&")}return"#"+er},Di.prototype._getCurrentHash=function(){var W=this,de=e.window.location.hash.replace("#","");if(this._hashName){var $;return de.split("&").map(function(ge){return ge.split("=")}).forEach(function(ge){ge[0]===W._hashName&&($=ge)}),($&&$[1]||"").split("/")}return de.split("/")},Di.prototype._onHashChange=function(){var W=this._getCurrentHash();if(W.length>=3&&!W.some(function($){return isNaN($)})){var de=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],+W[1]],zoom:+W[0],bearing:de,pitch:+(W[4]||0)}),!0}return!1},Di.prototype._updateHashUnthrottled=function(){var W=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",W)}catch{}};var Ji={linearity:.3,easing:e.bezier(0,0,.3,1)},Ri=e.extend({deceleration:2500,maxSpeed:1400},Ji),ce=e.extend({deceleration:20,maxSpeed:1400},Ji),Te=e.extend({deceleration:1e3,maxSpeed:360},Ji),Re=e.extend({deceleration:1e3,maxSpeed:90},Ji),Ue=function(W){this._map=W,this.clear()};Ue.prototype.clear=function(){this._inertiaBuffer=[]},Ue.prototype.record=function(W){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:W})},Ue.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,de=e.browser.now(),$=160;W.length>0&&de-W[0].time>$;)W.shift()},Ue.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var de={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},$=0,ge=this._inertiaBuffer;$<ge.length;$+=1){var Ce=ge[$],Fe=Ce.settings;de.zoom+=Fe.zoomDelta||0,de.bearing+=Fe.bearingDelta||0,de.pitch+=Fe.pitchDelta||0,Fe.panDelta&&de.pan._add(Fe.panDelta),Fe.around&&(de.around=Fe.around),Fe.pinchAround&&(de.pinchAround=Fe.pinchAround)}var Je=this._inertiaBuffer[this._inertiaBuffer.length-1],ht=Je.time-this._inertiaBuffer[0].time,Dt={};if(de.pan.mag()){var er=$e(de.pan.mag(),ht,e.extend({},Ri,W||{}));Dt.offset=de.pan.mult(er.amount/de.pan.mag()),Dt.center=this._map.transform.center,Be(Dt,er)}if(de.zoom){var pr=$e(de.zoom,ht,ce);Dt.zoom=this._map.transform.zoom+pr.amount,Be(Dt,pr)}if(de.bearing){var mr=$e(de.bearing,ht,Te);Dt.bearing=this._map.transform.bearing+e.clamp(mr.amount,-179,179),Be(Dt,mr)}if(de.pitch){var Rr=$e(de.pitch,ht,Re);Dt.pitch=this._map.transform.pitch+Rr.amount,Be(Dt,Rr)}if(Dt.zoom||Dt.bearing){var Zr=de.pinchAround===void 0?de.around:de.pinchAround;Dt.around=Zr?this._map.unproject(Zr):this._map.getCenter()}return this.clear(),e.extend(Dt,{noMoveStart:!0})}};function Be(ve,W){(!ve.duration||ve.duration<W.duration)&&(ve.duration=W.duration,ve.easing=W.easing)}function $e(ve,W,de){var $=de.maxSpeed,ge=de.linearity,Ce=de.deceleration,Fe=e.clamp(ve*ge/(W/1e3),-$,$),Je=Math.abs(Fe)/(Ce*ge);return{easing:de.easing,duration:Je*1e3,amount:Fe*(Je/2)}}var wt=function(ve){function W($,ge,Ce,Fe){Fe===void 0&&(Fe={});var Je=i.mousePos(ge.getCanvasContainer(),Ce),ht=ge.unproject(Je);ve.call(this,$,e.extend({point:Je,lngLat:ht,originalEvent:Ce},Fe)),this._defaultPrevented=!1,this.target=ge}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),gt=function(ve){function W($,ge,Ce){var Fe=$==="touchend"?Ce.changedTouches:Ce.touches,Je=i.touchPos(ge.getCanvasContainer(),Fe),ht=Je.map(function(pr){return ge.unproject(pr)}),Dt=Je.reduce(function(pr,mr,Rr,Zr){return pr.add(mr.div(Zr.length))},new e.Point(0,0)),er=ge.unproject(Dt);ve.call(this,$,{points:Je,point:Dt,lngLats:ht,lngLat:er,originalEvent:Ce}),this._defaultPrevented=!1}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),It=function(ve){function W($,ge,Ce){ve.call(this,$,{originalEvent:Ce}),this._defaultPrevented=!1}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),qt=function(W,de){this._map=W,this._clickTolerance=de.clickTolerance};qt.prototype.reset=function(){delete this._mousedownPos},qt.prototype.wheel=function(W){return this._firePreventable(new It(W.type,this._map,W))},qt.prototype.mousedown=function(W,de){return this._mousedownPos=de,this._firePreventable(new wt(W.type,this._map,W))},qt.prototype.mouseup=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.click=function(W,de){this._mousedownPos&&this._mousedownPos.dist(de)>=this._clickTolerance||this._map.fire(new wt(W.type,this._map,W))},qt.prototype.dblclick=function(W){return this._firePreventable(new wt(W.type,this._map,W))},qt.prototype.mouseover=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.mouseout=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.touchstart=function(W){return this._firePreventable(new gt(W.type,this._map,W))},qt.prototype.touchmove=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype.touchend=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype.touchcancel=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}},qt.prototype.isEnabled=function(){return!0},qt.prototype.isActive=function(){return!1},qt.prototype.enable=function(){},qt.prototype.disable=function(){};var nr=function(W){this._map=W};nr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},nr.prototype.mousemove=function(W){this._map.fire(new wt(W.type,this._map,W))},nr.prototype.mousedown=function(){this._delayContextMenu=!0},nr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},nr.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new wt(W.type,this._map,W)),this._map.listens("contextmenu")&&W.preventDefault()},nr.prototype.isEnabled=function(){return!0},nr.prototype.isActive=function(){return!1},nr.prototype.enable=function(){},nr.prototype.disable=function(){};var ar=function(W,de){this._map=W,this._el=W.getCanvasContainer(),this._container=W.getContainer(),this._clickTolerance=de.clickTolerance||1};ar.prototype.isEnabled=function(){return!!this._enabled},ar.prototype.isActive=function(){return!!this._active},ar.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ar.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},ar.prototype.mousedown=function(W,de){!this.isEnabled()||!(W.shiftKey&&W.button===0)||(i.disableDrag(),this._startPos=this._lastPos=de,this._active=!0)},ar.prototype.mousemoveWindow=function(W,de){if(!!this._active){var $=de;if(!(this._lastPos.equals($)||!this._box&&$.dist(this._startPos)<this._clickTolerance)){var ge=this._startPos;this._lastPos=$,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));var Ce=Math.min(ge.x,$.x),Fe=Math.max(ge.x,$.x),Je=Math.min(ge.y,$.y),ht=Math.max(ge.y,$.y);i.setTransform(this._box,"translate("+Ce+"px,"+Je+"px)"),this._box.style.width=Fe-Ce+"px",this._box.style.height=ht-Je+"px"}}},ar.prototype.mouseupWindow=function(W,de){var $=this;if(!!this._active&&W.button===0){var ge=this._startPos,Ce=de;if(this.reset(),i.suppressClick(),ge.x===Ce.x&&ge.y===Ce.y)this._fireEvent("boxzoomcancel",W);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(Fe){return Fe.fitScreenCoordinates(ge,Ce,$._map.getBearing(),{linear:!0})}}}},ar.prototype.keydown=function(W){!this._active||W.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",W))},ar.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},ar.prototype._fireEvent=function(W,de){return this._map.fire(new e.Event(W,{originalEvent:de}))};function Cr(ve,W){for(var de={},$=0;$<ve.length;$++)de[ve[$].identifier]=W[$];return de}function nn(ve){for(var W=new e.Point(0,0),de=0,$=ve;de<$.length;de+=1){var ge=$[de];W._add(ge)}return W.div(ve.length)}var pn=500,Ir=500,Wr=30,en=function(W){this.reset(),this.numTouches=W.numTouches};en.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},en.prototype.touchstart=function(W,de,$){(this.centroid||$.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),$.length===this.numTouches&&(this.centroid=nn(de),this.touches=Cr($,de)))},en.prototype.touchmove=function(W,de,$){if(!(this.aborted||!this.centroid)){var ge=Cr($,de);for(var Ce in this.touches){var Fe=this.touches[Ce],Je=ge[Ce];(!Je||Je.dist(Fe)>Wr)&&(this.aborted=!0)}}},en.prototype.touchend=function(W,de,$){if((!this.centroid||W.timeStamp-this.startTime>Ir)&&(this.aborted=!0),$.length===0){var ge=!this.aborted&&this.centroid;if(this.reset(),ge)return ge}};var fn=function(W){this.singleTap=new en(W),this.numTaps=W.numTaps,this.reset()};fn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fn.prototype.touchstart=function(W,de,$){this.singleTap.touchstart(W,de,$)},fn.prototype.touchmove=function(W,de,$){this.singleTap.touchmove(W,de,$)},fn.prototype.touchend=function(W,de,$){var ge=this.singleTap.touchend(W,de,$);if(ge){var Ce=W.timeStamp-this.lastTime<pn,Fe=!this.lastTap||this.lastTap.dist(ge)<Wr;if((!Ce||!Fe)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=ge,this.count===this.numTaps)return this.reset(),ge}};var vn=function(){this._zoomIn=new fn({numTouches:1,numTaps:2}),this._zoomOut=new fn({numTouches:2,numTaps:1}),this.reset()};vn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},vn.prototype.touchstart=function(W,de,$){this._zoomIn.touchstart(W,de,$),this._zoomOut.touchstart(W,de,$)},vn.prototype.touchmove=function(W,de,$){this._zoomIn.touchmove(W,de,$),this._zoomOut.touchmove(W,de,$)},vn.prototype.touchend=function(W,de,$){var ge=this,Ce=this._zoomIn.touchend(W,de,$),Fe=this._zoomOut.touchend(W,de,$);if(Ce)return this._active=!0,W.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Je){return Je.easeTo({duration:300,zoom:Je.getZoom()+1,around:Je.unproject(Ce)},{originalEvent:W})}};if(Fe)return this._active=!0,W.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Je){return Je.easeTo({duration:300,zoom:Je.getZoom()-1,around:Je.unproject(Fe)},{originalEvent:W})}}},vn.prototype.touchcancel=function(){this.reset()},vn.prototype.enable=function(){this._enabled=!0},vn.prototype.disable=function(){this._enabled=!1,this.reset()},vn.prototype.isEnabled=function(){return this._enabled},vn.prototype.isActive=function(){return this._active};var tn=0,Zn=2,ha=function(W){this.reset(),this._clickTolerance=W.clickTolerance||1};ha.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ha.prototype._correctButton=function(W,de){return!1},ha.prototype._move=function(W,de){return{}},ha.prototype.mousedown=function(W,de){if(!this._lastPoint){var $=i.mouseButton(W);!this._correctButton(W,$)||(this._lastPoint=de,this._eventButton=$)}},ha.prototype.mousemoveWindow=function(W,de){var $=this._lastPoint;if(!!$&&(W.preventDefault(),!(!this._moved&&de.dist($)<this._clickTolerance)))return this._moved=!0,this._lastPoint=de,this._move($,de)},ha.prototype.mouseupWindow=function(W){var de=i.mouseButton(W);de===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var Pa=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.mousedown=function($,ge){ve.prototype.mousedown.call(this,$,ge),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function($,ge){return ge===tn&&!$.ctrlKey},W.prototype._move=function($,ge){return{around:ge,panDelta:ge.sub($)}},W}(ha),pa=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype._correctButton=function($,ge){return ge===tn&&$.ctrlKey||ge===Zn},W.prototype._move=function($,ge){var Ce=.8,Fe=(ge.x-$.x)*Ce;if(Fe)return this._active=!0,{bearingDelta:Fe}},W.prototype.contextmenu=function($){$.preventDefault()},W}(ha),Na=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype._correctButton=function($,ge){return ge===tn&&$.ctrlKey||ge===Zn},W.prototype._move=function($,ge){var Ce=-.5,Fe=(ge.y-$.y)*Ce;if(Fe)return this._active=!0,{pitchDelta:Fe}},W.prototype.contextmenu=function($){$.preventDefault()},W}(ha),xa=function(W){this._minTouches=1,this._clickTolerance=W.clickTolerance||1,this.reset()};xa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},xa.prototype.touchstart=function(W,de,$){return this._calculateTransform(W,de,$)},xa.prototype.touchmove=function(W,de,$){if(!!this._active)return W.preventDefault(),this._calculateTransform(W,de,$)},xa.prototype.touchend=function(W,de,$){this._calculateTransform(W,de,$),this._active&&$.length<this._minTouches&&this.reset()},xa.prototype.touchcancel=function(){this.reset()},xa.prototype._calculateTransform=function(W,de,$){$.length>0&&(this._active=!0);var ge=Cr($,de),Ce=new e.Point(0,0),Fe=new e.Point(0,0),Je=0;for(var ht in ge){var Dt=ge[ht],er=this._touches[ht];er&&(Ce._add(Dt),Fe._add(Dt.sub(er)),Je++,ge[ht]=Dt)}if(this._touches=ge,!(Je<this._minTouches||!Fe.mag())){var pr=Fe.div(Je);if(this._sum._add(pr),!(this._sum.mag()<this._clickTolerance)){var mr=Ce.div(Je);return{around:mr,panDelta:pr}}}},xa.prototype.enable=function(){this._enabled=!0},xa.prototype.disable=function(){this._enabled=!1,this.reset()},xa.prototype.isEnabled=function(){return this._enabled},xa.prototype.isActive=function(){return this._active};var $a=function(){this.reset()};$a.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},$a.prototype._start=function(W){},$a.prototype._move=function(W,de,$){return{}},$a.prototype.touchstart=function(W,de,$){this._firstTwoTouches||$.length<2||(this._firstTwoTouches=[$[0].identifier,$[1].identifier],this._start([de[0],de[1]]))},$a.prototype.touchmove=function(W,de,$){if(!!this._firstTwoTouches){W.preventDefault();var ge=this._firstTwoTouches,Ce=ge[0],Fe=ge[1],Je=Va($,de,Ce),ht=Va($,de,Fe);if(!(!Je||!ht)){var Dt=this._aroundCenter?null:Je.add(ht).div(2);return this._move([Je,ht],Dt,W)}}},$a.prototype.touchend=function(W,de,$){if(!!this._firstTwoTouches){var ge=this._firstTwoTouches,Ce=ge[0],Fe=ge[1],Je=Va($,de,Ce),ht=Va($,de,Fe);Je&&ht||(this._active&&i.suppressClick(),this.reset())}},$a.prototype.touchcancel=function(){this.reset()},$a.prototype.enable=function(W){this._enabled=!0,this._aroundCenter=!!W&&W.around==="center"},$a.prototype.disable=function(){this._enabled=!1,this.reset()},$a.prototype.isEnabled=function(){return this._enabled},$a.prototype.isActive=function(){return this._active};function Va(ve,W,de){for(var $=0;$<ve.length;$++)if(ve[$].identifier===de)return W[$]}var ui=.1;function Li(ve,W){return Math.log(ve/W)/Math.LN2}var Po=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function($){this._startDistance=this._distance=$[0].dist($[1])},W.prototype._move=function($,ge){var Ce=this._distance;if(this._distance=$[0].dist($[1]),!(!this._active&&Math.abs(Li(this._distance,this._startDistance))<ui))return this._active=!0,{zoomDelta:Li(this._distance,Ce),pinchAround:ge}},W}($a),$i=25;function _a(ve,W){return ve.angleWith(W)*180/Math.PI}var di=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function($){this._startVector=this._vector=$[0].sub($[1]),this._minDiameter=$[0].dist($[1])},W.prototype._move=function($,ge){var Ce=this._vector;if(this._vector=$[0].sub($[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:_a(this._vector,Ce),pinchAround:ge}},W.prototype._isBelowThreshold=function($){this._minDiameter=Math.min(this._minDiameter,$.mag());var ge=Math.PI*this._minDiameter,Ce=$i/ge*360,Fe=_a($,this._startVector);return Math.abs(Fe)<Ce},W}($a);function ii(ve){return Math.abs(ve.y)>Math.abs(ve.x)}var Ui=100,mi=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function($){this._lastPoints=$,ii($[0].sub($[1]))&&(this._valid=!1)},W.prototype._move=function($,ge,Ce){var Fe=$[0].sub(this._lastPoints[0]),Je=$[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Fe,Je,Ce.timeStamp),!!this._valid){this._lastPoints=$,this._active=!0;var ht=(Fe.y+Je.y)/2,Dt=-.5;return{pitchDelta:ht*Dt}}},W.prototype.gestureBeginsVertically=function($,ge,Ce){if(this._valid!==void 0)return this._valid;var Fe=2,Je=$.mag()>=Fe,ht=ge.mag()>=Fe;if(!(!Je&&!ht)){if(!Je||!ht)return this._firstMove===void 0&&(this._firstMove=Ce),Ce-this._firstMove<Ui?void 0:!1;var Dt=$.y>0==ge.y>0;return ii($)&&ii(ge)&&Dt}},W}($a),Eo={panStep:100,bearingStep:15,pitchStep:10},yo=function(){var W=Eo;this._panStep=W.panStep,this._bearingStep=W.bearingStep,this._pitchStep=W.pitchStep};yo.prototype.reset=function(){this._active=!1},yo.prototype.keydown=function(W){var de=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var $=0,ge=0,Ce=0,Fe=0,Je=0;switch(W.keyCode){case 61:case 107:case 171:case 187:$=1;break;case 189:case 109:case 173:$=-1;break;case 37:W.shiftKey?ge=-1:(W.preventDefault(),Fe=-1);break;case 39:W.shiftKey?ge=1:(W.preventDefault(),Fe=1);break;case 38:W.shiftKey?Ce=1:(W.preventDefault(),Je=-1);break;case 40:W.shiftKey?Ce=-1:(W.preventDefault(),Je=1);break;default:return}return{cameraAnimation:function(ht){var Dt=ht.getZoom();ht.easeTo({duration:300,easeId:"keyboardHandler",easing:zo,zoom:$?Math.round(Dt)+$*(W.shiftKey?2:1):Dt,bearing:ht.getBearing()+ge*de._bearingStep,pitch:ht.getPitch()+Ce*de._pitchStep,offset:[-Fe*de._panStep,-Je*de._panStep],center:ht.getCenter()},{originalEvent:W})}}}},yo.prototype.enable=function(){this._enabled=!0},yo.prototype.disable=function(){this._enabled=!1,this.reset()},yo.prototype.isEnabled=function(){return this._enabled},yo.prototype.isActive=function(){return this._active};function zo(ve){return ve*(2-ve)}var ys=4.000244140625,ns=1/100,ms=1/450,io=2,eo=function(W,de){this._map=W,this._el=W.getCanvasContainer(),this._handler=de,this._delta=0,this._defaultZoomRate=ns,this._wheelZoomRate=ms,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};eo.prototype.setZoomRate=function(W){this._defaultZoomRate=W},eo.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W},eo.prototype.isEnabled=function(){return!!this._enabled},eo.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},eo.prototype.isZooming=function(){return!!this._zooming},eo.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&W.around==="center")},eo.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},eo.prototype.wheel=function(W){if(!!this.isEnabled()){var de=W.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,$=e.browser.now(),ge=$-(this._lastWheelEventTime||0);this._lastWheelEventTime=$,de!==0&&de%ys===0?this._type="wheel":de!==0&&Math.abs(de)<4?this._type="trackpad":ge>400?(this._type=null,this._lastValue=de,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=Math.abs(ge*de)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,de+=this._lastValue)),W.shiftKey&&de&&(de=de/4),this._type&&(this._lastWheelEvent=W,this._delta-=de,this._active||this._start(W)),W.preventDefault()}},eo.prototype._onTimeout=function(W){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(W)},eo.prototype._start=function(W){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var de=i.mousePos(this._el,W);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(de)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},eo.prototype.renderFrame=function(){return this._onScrollFrame()},eo.prototype._onScrollFrame=function(){var W=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var de=this._map.transform;if(this._delta!==0){var $=this._type==="wheel"&&Math.abs(this._delta)>ys?this._wheelZoomRate:this._defaultZoomRate,ge=io/(1+Math.exp(-Math.abs(this._delta*$)));this._delta<0&&ge!==0&&(ge=1/ge);var Ce=typeof this._targetZoom=="number"?de.zoomScale(this._targetZoom):de.scale;this._targetZoom=Math.min(de.maxZoom,Math.max(de.minZoom,de.scaleZoom(Ce*ge))),this._type==="wheel"&&(this._startZoom=de.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Fe=typeof this._targetZoom=="number"?this._targetZoom:de.zoom,Je=this._startZoom,ht=this._easing,Dt=!1,er;if(this._type==="wheel"&&Je&&ht){var pr=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),mr=ht(pr);er=e.number(Je,Fe,mr),pr<1?this._frameId||(this._frameId=!0):Dt=!0}else er=Fe,Dt=!0;return this._active=!0,Dt&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1,W._handler._triggerRenderFrame(),delete W._targetZoom,delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Dt,zoomDelta:er-de.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},eo.prototype._smoothOutEasing=function(W){var de=e.ease;if(this._prevEase){var $=this._prevEase,ge=(e.browser.now()-$.start)/$.duration,Ce=$.easing(ge+.01)-$.easing(ge),Fe=.27/Math.sqrt(Ce*Ce+1e-4)*.01,Je=Math.sqrt(.27*.27-Fe*Fe);de=e.bezier(Fe,Je,.25,1)}return this._prevEase={start:e.browser.now(),duration:W,easing:de},de},eo.prototype.reset=function(){this._active=!1};var Za=function(W,de){this._clickZoom=W,this._tapZoom=de};Za.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Za.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Za.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Za.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var oi=function(){this.reset()};oi.prototype.reset=function(){this._active=!1},oi.prototype.dblclick=function(W,de){return W.preventDefault(),{cameraAnimation:function($){$.easeTo({duration:300,zoom:$.getZoom()+(W.shiftKey?-1:1),around:$.unproject(de)},{originalEvent:W})}}},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var Bo=function(){this._tap=new fn({numTouches:1,numTaps:1}),this.reset()};Bo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Bo.prototype.touchstart=function(W,de,$){this._swipePoint||(this._tapTime&&W.timeStamp-this._tapTime>pn&&this.reset(),this._tapTime?$.length>0&&(this._swipePoint=de[0],this._swipeTouch=$[0].identifier):this._tap.touchstart(W,de,$))},Bo.prototype.touchmove=function(W,de,$){if(!this._tapTime)this._tap.touchmove(W,de,$);else if(this._swipePoint){if($[0].identifier!==this._swipeTouch)return;var ge=de[0],Ce=ge.y-this._swipePoint.y;return this._swipePoint=ge,W.preventDefault(),this._active=!0,{zoomDelta:Ce/128}}},Bo.prototype.touchend=function(W,de,$){if(this._tapTime)this._swipePoint&&$.length===0&&this.reset();else{var ge=this._tap.touchend(W,de,$);ge&&(this._tapTime=W.timeStamp)}},Bo.prototype.touchcancel=function(){this.reset()},Bo.prototype.enable=function(){this._enabled=!0},Bo.prototype.disable=function(){this._enabled=!1,this.reset()},Bo.prototype.isEnabled=function(){return this._enabled},Bo.prototype.isActive=function(){return this._active};var _o=function(W,de,$){this._el=W,this._mousePan=de,this._touchPan=$};_o.prototype.enable=function(W){this._inertiaOptions=W||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},_o.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},_o.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},_o.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Qo=function(W,de,$){this._pitchWithRotate=W.pitchWithRotate,this._mouseRotate=de,this._mousePitch=$};Qo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Qo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Qo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Qo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var co=function(W,de,$,ge){this._el=W,this._touchZoom=de,this._touchRotate=$,this._tapDragZoom=ge,this._rotationDisabled=!1,this._enabled=!0};co.prototype.enable=function(W){this._touchZoom.enable(W),this._rotationDisabled||this._touchRotate.enable(W),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},co.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},co.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},co.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},co.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},co.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var xs=function(ve){return ve.zoom||ve.drag||ve.pitch||ve.rotate},Zs=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W}(e.Event);function Nu(ve){return ve.panDelta&&ve.panDelta.mag()||ve.zoomDelta||ve.bearingDelta||ve.pitchDelta}var fo=function(W,de){this._map=W,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ue(W),this._bearingSnap=de.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(de),e.bindAll(["handleEvent","handleWindowEvent"],this);var $=this._el;this._listeners=[[$,"touchstart",{passive:!1}],[$,"touchmove",{passive:!1}],[$,"touchend",void 0],[$,"touchcancel",void 0],[$,"mousedown",void 0],[$,"mousemove",void 0],[$,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[$,"mouseover",void 0],[$,"mouseout",void 0],[$,"dblclick",void 0],[$,"click",void 0],[$,"keydown",{capture:!1}],[$,"keyup",void 0],[$,"wheel",{passive:!1}],[$,"contextmenu",void 0],[e.window,"blur",void 0]];for(var ge=0,Ce=this._listeners;ge<Ce.length;ge+=1){var Fe=Ce[ge],Je=Fe[0],ht=Fe[1],Dt=Fe[2];i.addEventListener(Je,ht,Je===e.window.document?this.handleWindowEvent:this.handleEvent,Dt)}};fo.prototype.destroy=function(){for(var W=0,de=this._listeners;W<de.length;W+=1){var $=de[W],ge=$[0],Ce=$[1],Fe=$[2];i.removeEventListener(ge,Ce,ge===e.window.document?this.handleWindowEvent:this.handleEvent,Fe)}},fo.prototype._addDefaultHandlers=function(W){var de=this._map,$=de.getCanvasContainer();this._add("mapEvent",new qt(de,W));var ge=de.boxZoom=new ar(de,W);this._add("boxZoom",ge);var Ce=new vn,Fe=new oi;de.doubleClickZoom=new Za(Fe,Ce),this._add("tapZoom",Ce),this._add("clickZoom",Fe);var Je=new Bo;this._add("tapDragZoom",Je);var ht=de.touchPitch=new mi;this._add("touchPitch",ht);var Dt=new pa(W),er=new Na(W);de.dragRotate=new Qo(W,Dt,er),this._add("mouseRotate",Dt,["mousePitch"]),this._add("mousePitch",er,["mouseRotate"]);var pr=new Pa(W),mr=new xa(W);de.dragPan=new _o($,pr,mr),this._add("mousePan",pr),this._add("touchPan",mr,["touchZoom","touchRotate"]);var Rr=new di,Zr=new Po;de.touchZoomRotate=new co($,Zr,Rr,Je),this._add("touchRotate",Rr,["touchPan","touchZoom"]),this._add("touchZoom",Zr,["touchPan","touchRotate"]);var $r=de.scrollZoom=new eo(de,this);this._add("scrollZoom",$r,["mousePan"]);var Xr=de.keyboard=new yo;this._add("keyboard",Xr),this._add("blockableMapEvent",new nr(de));for(var rn=0,xn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];rn<xn.length;rn+=1){var Fn=xn[rn];W.interactive&&W[Fn]&&de[Fn].enable(W[Fn])}},fo.prototype._add=function(W,de,$){this._handlers.push({handlerName:W,handler:de,allowed:$}),this._handlersById[W]=de},fo.prototype.stop=function(){if(!this._updatingCamera){for(var W=0,de=this._handlers;W<de.length;W+=1){var $=de[W],ge=$.handler;ge.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},fo.prototype.isActive=function(){for(var W=0,de=this._handlers;W<de.length;W+=1){var $=de[W],ge=$.handler;if(ge.isActive())return!0}return!1},fo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},fo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},fo.prototype.isMoving=function(){return Boolean(xs(this._eventsInProgress))||this.isZooming()},fo.prototype._blockedByActive=function(W,de,$){for(var ge in W)if(ge!==$&&(!de||de.indexOf(ge)<0))return!0;return!1},fo.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")},fo.prototype._getMapTouches=function(W){for(var de=[],$=0,ge=W;$<ge.length;$+=1){var Ce=ge[$],Fe=Ce.target;this._el.contains(Fe)&&de.push(Ce)}return de},fo.prototype.handleEvent=function(W,de){if(W.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var $=W.type==="renderFrame"?void 0:W,ge={needsRenderFrame:!1},Ce={},Fe={},Je=W.touches?this._getMapTouches(W.touches):void 0,ht=Je?i.touchPos(this._el,Je):i.mousePos(this._el,W),Dt=0,er=this._handlers;Dt<er.length;Dt+=1){var pr=er[Dt],mr=pr.handlerName,Rr=pr.handler,Zr=pr.allowed;if(!!Rr.isEnabled()){var $r=void 0;this._blockedByActive(Fe,Zr,mr)?Rr.reset():Rr[de||W.type]&&($r=Rr[de||W.type](W,ht,Je),this.mergeHandlerResult(ge,Ce,$r,mr,$),$r&&$r.needsRenderFrame&&this._triggerRenderFrame()),($r||Rr.isActive())&&(Fe[mr]=Rr)}}var Xr={};for(var rn in this._previousActiveHandlers)Fe[rn]||(Xr[rn]=$);this._previousActiveHandlers=Fe,(Object.keys(Xr).length||Nu(ge))&&(this._changes.push([ge,Ce,Xr]),this._triggerRenderFrame()),(Object.keys(Fe).length||Nu(ge))&&this._map._stop(!0),this._updatingCamera=!1;var xn=ge.cameraAnimation;xn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],xn(this._map))},fo.prototype.mergeHandlerResult=function(W,de,$,ge,Ce){if(!!$){e.extend(W,$);var Fe={handlerName:ge,originalEvent:$.originalEvent||Ce};$.zoomDelta!==void 0&&(de.zoom=Fe),$.panDelta!==void 0&&(de.drag=Fe),$.pitchDelta!==void 0&&(de.pitch=Fe),$.bearingDelta!==void 0&&(de.rotate=Fe)}},fo.prototype._applyChanges=function(){for(var W={},de={},$={},ge=0,Ce=this._changes;ge<Ce.length;ge+=1){var Fe=Ce[ge],Je=Fe[0],ht=Fe[1],Dt=Fe[2];Je.panDelta&&(W.panDelta=(W.panDelta||new e.Point(0,0))._add(Je.panDelta)),Je.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+Je.zoomDelta),Je.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+Je.bearingDelta),Je.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+Je.pitchDelta),Je.around!==void 0&&(W.around=Je.around),Je.pinchAround!==void 0&&(W.pinchAround=Je.pinchAround),Je.noInertia&&(W.noInertia=Je.noInertia),e.extend(de,ht),e.extend($,Dt)}this._updateMapTransform(W,de,$),this._changes=[]},fo.prototype._updateMapTransform=function(W,de,$){var ge=this._map,Ce=ge.transform;if(!Nu(W))return this._fireEvents(de,$);var Fe=W.panDelta,Je=W.zoomDelta,ht=W.bearingDelta,Dt=W.pitchDelta,er=W.around,pr=W.pinchAround;pr!==void 0&&(er=pr),ge._stop(!0),er=er||ge.transform.centerPoint;var mr=Ce.pointLocation(Fe?er.sub(Fe):er);ht&&(Ce.bearing+=ht),Dt&&(Ce.pitch+=Dt),Je&&(Ce.zoom+=Je),Ce.setLocationAtPoint(mr,er),this._map._update(),W.noInertia||this._inertia.record(W),this._fireEvents(de,$)},fo.prototype._fireEvents=function(W,de){var $=this,ge=xs(this._eventsInProgress),Ce=xs(W),Fe={};for(var Je in W){var ht=W[Je],Dt=ht.originalEvent;this._eventsInProgress[Je]||(Fe[Je+"start"]=Dt),this._eventsInProgress[Je]=W[Je]}!ge&&Ce&&this._fireEvent("movestart",Ce.originalEvent);for(var er in Fe)this._fireEvent(er,Fe[er]);W.rotate&&(this._bearingChanged=!0),Ce&&this._fireEvent("move",Ce.originalEvent);for(var pr in W){var mr=W[pr],Rr=mr.originalEvent;this._fireEvent(pr,Rr)}var Zr={},$r;for(var Xr in this._eventsInProgress){var rn=this._eventsInProgress[Xr],xn=rn.handlerName,Fn=rn.originalEvent;this._handlersById[xn].isActive()||(delete this._eventsInProgress[Xr],$r=de[xn]||Fn,Zr[Xr+"end"]=$r)}for(var Gn in Zr)this._fireEvent(Gn,Zr[Gn]);var oa=xs(this._eventsInProgress);if((ge||Ce)&&!oa){this._updatingCamera=!0;var ca=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),la=function(wa){return wa!==0&&-$._bearingSnap<wa&&wa<$._bearingSnap};ca?(la(ca.bearing||this._map.getBearing())&&(ca.bearing=0),this._map.easeTo(ca,{originalEvent:$r})):(this._map.fire(new e.Event("moveend",{originalEvent:$r})),la(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},fo.prototype._fireEvent=function(W,de){this._map.fire(new e.Event(W,de?{originalEvent:de}:{}))},fo.prototype._triggerRenderFrame=function(){var W=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(de){delete W._frameId,W.handleEvent(new Zs("renderFrame",{timeStamp:de})),W._applyChanges()}))};var af=function(ve){function W(de,$){ve.call(this),this._moving=!1,this._zooming=!1,this.transform=de,this._bearingSnap=$.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function($,ge){return this.jumpTo({center:$},ge)},W.prototype.panBy=function($,ge,Ce){return $=e.Point.convert($).mult(-1),this.panTo(this.transform.center,e.extend({offset:$},ge),Ce)},W.prototype.panTo=function($,ge,Ce){return this.easeTo(e.extend({center:$},ge),Ce)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function($,ge){return this.jumpTo({zoom:$},ge),this},W.prototype.zoomTo=function($,ge,Ce){return this.easeTo(e.extend({zoom:$},ge),Ce)},W.prototype.zoomIn=function($,ge){return this.zoomTo(this.getZoom()+1,$,ge),this},W.prototype.zoomOut=function($,ge){return this.zoomTo(this.getZoom()-1,$,ge),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function($,ge){return this.jumpTo({bearing:$},ge),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function($,ge){return this.jumpTo({padding:$},ge),this},W.prototype.rotateTo=function($,ge,Ce){return this.easeTo(e.extend({bearing:$},ge),Ce)},W.prototype.resetNorth=function($,ge){return this.rotateTo(0,e.extend({duration:1e3},$),ge),this},W.prototype.resetNorthPitch=function($,ge){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},$),ge),this},W.prototype.snapToNorth=function($,ge){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth($,ge):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function($,ge){return this.jumpTo({pitch:$},ge),this},W.prototype.cameraForBounds=function($,ge){return $=e.LngLatBounds.convert($),this._cameraForBoxAndBearing($.getNorthWest(),$.getSouthEast(),0,ge)},W.prototype._cameraForBoxAndBearing=function($,ge,Ce,Fe){var Je={top:0,bottom:0,right:0,left:0};if(Fe=e.extend({padding:Je,offset:[0,0],maxZoom:this.transform.maxZoom},Fe),typeof Fe.padding=="number"){var ht=Fe.padding;Fe.padding={top:ht,bottom:ht,right:ht,left:ht}}Fe.padding=e.extend(Je,Fe.padding);var Dt=this.transform,er=Dt.padding,pr=Dt.project(e.LngLat.convert($)),mr=Dt.project(e.LngLat.convert(ge)),Rr=pr.rotate(-Ce*Math.PI/180),Zr=mr.rotate(-Ce*Math.PI/180),$r=new e.Point(Math.max(Rr.x,Zr.x),Math.max(Rr.y,Zr.y)),Xr=new e.Point(Math.min(Rr.x,Zr.x),Math.min(Rr.y,Zr.y)),rn=$r.sub(Xr),xn=(Dt.width-(er.left+er.right+Fe.padding.left+Fe.padding.right))/rn.x,Fn=(Dt.height-(er.top+er.bottom+Fe.padding.top+Fe.padding.bottom))/rn.y;if(Fn<0||xn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Gn=Math.min(Dt.scaleZoom(Dt.scale*Math.min(xn,Fn)),Fe.maxZoom),oa=e.Point.convert(Fe.offset),ca=(Fe.padding.left-Fe.padding.right)/2,la=(Fe.padding.top-Fe.padding.bottom)/2,wa=new e.Point(oa.x+ca,oa.y+la),La=wa.mult(Dt.scale/Dt.zoomScale(Gn)),Ca=Dt.unproject(pr.add(mr).div(2).sub(La));return{center:Ca,zoom:Gn,bearing:Ce}},W.prototype.fitBounds=function($,ge,Ce){return this._fitInternal(this.cameraForBounds($,ge),ge,Ce)},W.prototype.fitScreenCoordinates=function($,ge,Ce,Fe,Je){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert($)),this.transform.pointLocation(e.Point.convert(ge)),Ce,Fe),Fe,Je)},W.prototype._fitInternal=function($,ge,Ce){return $?(ge=e.extend($,ge),delete ge.padding,ge.linear?this.easeTo(ge,Ce):this.flyTo(ge,Ce)):this},W.prototype.jumpTo=function($,ge){this.stop();var Ce=this.transform,Fe=!1,Je=!1,ht=!1;return"zoom"in $&&Ce.zoom!==+$.zoom&&(Fe=!0,Ce.zoom=+$.zoom),$.center!==void 0&&(Ce.center=e.LngLat.convert($.center)),"bearing"in $&&Ce.bearing!==+$.bearing&&(Je=!0,Ce.bearing=+$.bearing),"pitch"in $&&Ce.pitch!==+$.pitch&&(ht=!0,Ce.pitch=+$.pitch),$.padding!=null&&!Ce.isPaddingEqual($.padding)&&(Ce.padding=$.padding),this.fire(new e.Event("movestart",ge)).fire(new e.Event("move",ge)),Fe&&this.fire(new e.Event("zoomstart",ge)).fire(new e.Event("zoom",ge)).fire(new e.Event("zoomend",ge)),Je&&this.fire(new e.Event("rotatestart",ge)).fire(new e.Event("rotate",ge)).fire(new e.Event("rotateend",ge)),ht&&this.fire(new e.Event("pitchstart",ge)).fire(new e.Event("pitch",ge)).fire(new e.Event("pitchend",ge)),this.fire(new e.Event("moveend",ge))},W.prototype.easeTo=function($,ge){var Ce=this;this._stop(!1,$.easeId),$=e.extend({offset:[0,0],duration:500,easing:e.ease},$),($.animate===!1||!$.essential&&e.browser.prefersReducedMotion)&&($.duration=0);var Fe=this.transform,Je=this.getZoom(),ht=this.getBearing(),Dt=this.getPitch(),er=this.getPadding(),pr="zoom"in $?+$.zoom:Je,mr="bearing"in $?this._normalizeBearing($.bearing,ht):ht,Rr="pitch"in $?+$.pitch:Dt,Zr="padding"in $?$.padding:Fe.padding,$r=e.Point.convert($.offset),Xr=Fe.centerPoint.add($r),rn=Fe.pointLocation(Xr),xn=e.LngLat.convert($.center||rn);this._normalizeCenter(xn);var Fn=Fe.project(rn),Gn=Fe.project(xn).sub(Fn),oa=Fe.zoomScale(pr-Je),ca,la;$.around&&(ca=e.LngLat.convert($.around),la=Fe.locationPoint(ca));var wa={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||pr!==Je,this._rotating=this._rotating||ht!==mr,this._pitching=this._pitching||Rr!==Dt,this._padding=!Fe.isPaddingEqual(Zr),this._easeId=$.easeId,this._prepareEase(ge,$.noMoveStart,wa),clearTimeout(this._easeEndTimeoutID),this._ease(function(La){if(Ce._zooming&&(Fe.zoom=e.number(Je,pr,La)),Ce._rotating&&(Fe.bearing=e.number(ht,mr,La)),Ce._pitching&&(Fe.pitch=e.number(Dt,Rr,La)),Ce._padding&&(Fe.interpolatePadding(er,Zr,La),Xr=Fe.centerPoint.add($r)),ca)Fe.setLocationAtPoint(ca,la);else{var Ca=Fe.zoomScale(Fe.zoom-Je),Fa=pr>Je?Math.min(2,oa):Math.max(.5,oa),Ba=Math.pow(Fa,1-La),ti=Fe.unproject(Fn.add(Gn.mult(La*Ba)).mult(Ca));Fe.setLocationAtPoint(Fe.renderWorldCopies?ti.wrap():ti,Xr)}Ce._fireMoveEvents(ge)},function(La){Ce._afterEase(ge,La)},$),this},W.prototype._prepareEase=function($,ge,Ce){Ce===void 0&&(Ce={}),this._moving=!0,!ge&&!Ce.moving&&this.fire(new e.Event("movestart",$)),this._zooming&&!Ce.zooming&&this.fire(new e.Event("zoomstart",$)),this._rotating&&!Ce.rotating&&this.fire(new e.Event("rotatestart",$)),this._pitching&&!Ce.pitching&&this.fire(new e.Event("pitchstart",$))},W.prototype._fireMoveEvents=function($){this.fire(new e.Event("move",$)),this._zooming&&this.fire(new e.Event("zoom",$)),this._rotating&&this.fire(new e.Event("rotate",$)),this._pitching&&this.fire(new e.Event("pitch",$))},W.prototype._afterEase=function($,ge){if(!(this._easeId&&ge&&this._easeId===ge)){delete this._easeId;var Ce=this._zooming,Fe=this._rotating,Je=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ce&&this.fire(new e.Event("zoomend",$)),Fe&&this.fire(new e.Event("rotateend",$)),Je&&this.fire(new e.Event("pitchend",$)),this.fire(new e.Event("moveend",$))}},W.prototype.flyTo=function($,ge){var Ce=this;if(!$.essential&&e.browser.prefersReducedMotion){var Fe=e.pick($,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Fe,ge)}this.stop(),$=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},$);var Je=this.transform,ht=this.getZoom(),Dt=this.getBearing(),er=this.getPitch(),pr=this.getPadding(),mr="zoom"in $?e.clamp(+$.zoom,Je.minZoom,Je.maxZoom):ht,Rr="bearing"in $?this._normalizeBearing($.bearing,Dt):Dt,Zr="pitch"in $?+$.pitch:er,$r="padding"in $?$.padding:Je.padding,Xr=Je.zoomScale(mr-ht),rn=e.Point.convert($.offset),xn=Je.centerPoint.add(rn),Fn=Je.pointLocation(xn),Gn=e.LngLat.convert($.center||Fn);this._normalizeCenter(Gn);var oa=Je.project(Fn),ca=Je.project(Gn).sub(oa),la=$.curve,wa=Math.max(Je.width,Je.height),La=wa/Xr,Ca=ca.mag();if("minZoom"in $){var Fa=e.clamp(Math.min($.minZoom,ht,mr),Je.minZoom,Je.maxZoom),Ba=wa/Je.zoomScale(Fa-ht);la=Math.sqrt(Ba/Ca*2)}var ti=la*la;function pi(gi){var Oi=(La*La-wa*wa+(gi?-1:1)*ti*ti*Ca*Ca)/(2*(gi?La:wa)*ti*Ca);return Math.log(Math.sqrt(Oi*Oi+1)-Oi)}function Yi(gi){return(Math.exp(gi)-Math.exp(-gi))/2}function xi(gi){return(Math.exp(gi)+Math.exp(-gi))/2}function Ci(gi){return Yi(gi)/xi(gi)}var Ja=pi(0),Wi=function(gi){return xi(Ja)/xi(Ja+la*gi)},Qi=function(gi){return wa*((xi(Ja)*Ci(Ja+la*gi)-Yi(Ja))/ti)/Ca},to=(pi(1)-Ja)/la;if(Math.abs(Ca)<1e-6||!isFinite(to)){if(Math.abs(wa-La)<1e-6)return this.easeTo($,ge);var Ii=La<wa?-1:1;to=Math.abs(Math.log(La/wa))/la,Qi=function(){return 0},Wi=function(gi){return Math.exp(Ii*la*gi)}}if("duration"in $)$.duration=+$.duration;else{var ho="screenSpeed"in $?+$.screenSpeed/la:+$.speed;$.duration=1e3*to/ho}return $.maxDuration&&$.duration>$.maxDuration&&($.duration=0),this._zooming=!0,this._rotating=Dt!==Rr,this._pitching=Zr!==er,this._padding=!Je.isPaddingEqual($r),this._prepareEase(ge,!1),this._ease(function(gi){var Oi=gi*to,Ho=1/Wi(Oi);Je.zoom=gi===1?mr:ht+Je.scaleZoom(Ho),Ce._rotating&&(Je.bearing=e.number(Dt,Rr,gi)),Ce._pitching&&(Je.pitch=e.number(er,Zr,gi)),Ce._padding&&(Je.interpolatePadding(pr,$r,gi),xn=Je.centerPoint.add(rn));var as=gi===1?Gn:Je.unproject(oa.add(ca.mult(Qi(Oi))).mult(Ho));Je.setLocationAtPoint(Je.renderWorldCopies?as.wrap():as,xn),Ce._fireMoveEvents(ge)},function(){return Ce._afterEase(ge)},$),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function($,ge){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ce=this._onEaseEnd;delete this._onEaseEnd,Ce.call(this,ge)}if(!$){var Fe=this.handlers;Fe&&Fe.stop()}return this},W.prototype._ease=function($,ge,Ce){Ce.animate===!1||Ce.duration===0?($(1),ge()):(this._easeStart=e.browser.now(),this._easeOptions=Ce,this._onEaseFrame=$,this._onEaseEnd=ge,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var $=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing($)),$<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function($,ge){$=e.wrap($,-180,180);var Ce=Math.abs($-ge);return Math.abs($-360-ge)<Ce&&($-=360),Math.abs($+360-ge)<Ce&&($+=360),$},W.prototype._normalizeCenter=function($){var ge=this.transform;if(!(!ge.renderWorldCopies||ge.lngRange)){var Ce=$.lng-ge.center.lng;$.lng+=Ce>180?-360:Ce<-180?360:0}},W}(e.Evented),mu=function(W){W===void 0&&(W={}),this.options=W,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};mu.prototype.getDefaultPosition=function(){return"bottom-right"},mu.prototype.onAdd=function(W){var de=this.options&&this.options.compact;return this._map=W,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),de&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),de===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},mu.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},mu.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var de=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(W){var $=de.reduce(function(ge,Ce,Fe){return Ce.value&&(ge+=Ce.key+"="+Ce.value+(Fe<de.length-1?"&":"")),ge},"?");W.href=e.config.FEEDBACK_URL+"/"+$+(this._map._hash?this._map._hash.getHashString(!0):""),W.rel="noopener nofollow"}},mu.prototype._updateData=function(W){W&&(W.sourceDataType==="metadata"||W.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},mu.prototype._updateAttributions=function(){if(!!this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(ht){return typeof ht!="string"?"":ht})):typeof this.options.customAttribution=="string"&&W.push(this.options.customAttribution)),this._map.style.stylesheet){var de=this._map.style.stylesheet;this.styleOwner=de.owner,this.styleId=de.id}var $=this._map.style.sourceCaches;for(var ge in $){var Ce=$[ge];if(Ce.used){var Fe=Ce.getSource();Fe.attribution&&W.indexOf(Fe.attribution)<0&&W.push(Fe.attribution)}}W.sort(function(ht,Dt){return ht.length-Dt.length}),W=W.filter(function(ht,Dt){for(var er=Dt+1;er<W.length;er++)if(W[er].indexOf(ht)>=0)return!1;return!0});var Je=W.join(" | ");Je!==this._attribHTML&&(this._attribHTML=Je,W.length?(this._innerContainer.innerHTML=Je,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},mu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var qi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};qi.prototype.onAdd=function(W){this._map=W,this._container=i.create("div","mapboxgl-ctrl");var de=i.create("a","mapboxgl-ctrl-logo");return de.target="_blank",de.rel="noopener nofollow",de.href="https://www.mapbox.com/",de.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),de.setAttribute("rel","noopener nofollow"),this._container.appendChild(de),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},qi.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},qi.prototype.getDefaultPosition=function(){return"bottom-left"},qi.prototype._updateLogo=function(W){(!W||W.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},qi.prototype._logoRequired=function(){if(!!this._map.style){var W=this._map.style.sourceCaches;for(var de in W){var $=W[de].getSource();if($.mapbox_logo)return!0}return!1}},qi.prototype._updateCompact=function(){var W=this._container.children;if(W.length){var de=W[0];this._map.getCanvasContainer().offsetWidth<250?de.classList.add("mapboxgl-compact"):de.classList.remove("mapboxgl-compact")}};var qo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};qo.prototype.add=function(W){var de=++this._id,$=this._queue;return $.push({callback:W,id:de,cancelled:!1}),de},qo.prototype.remove=function(W){for(var de=this._currentlyRunning,$=de?this._queue.concat(de):this._queue,ge=0,Ce=$;ge<Ce.length;ge+=1){var Fe=Ce[ge];if(Fe.id===W){Fe.cancelled=!0;return}}},qo.prototype.run=function(W){W===void 0&&(W=0);var de=this._currentlyRunning=this._queue;this._queue=[];for(var $=0,ge=de;$<ge.length;$+=1){var Ce=ge[$];if(!Ce.cancelled&&(Ce.callback(W),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},qo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Od={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},hh=e.window.HTMLImageElement,zf=e.window.HTMLElement,Cc=e.window.ImageBitmap,of=-2,vh=22,wl=0,Lc=60,dv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:of,maxZoom:vh,minPitch:wl,maxPitch:Lc,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},gv=function(ve){function W($){var ge=this;if($=e.extend({},dv,$),$.minZoom!=null&&$.maxZoom!=null&&$.minZoom>$.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if($.minPitch!=null&&$.maxPitch!=null&&$.minPitch>$.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if($.minPitch!=null&&$.minPitch<wl)throw new Error("minPitch must be greater than or equal to "+wl);if($.maxPitch!=null&&$.maxPitch>Lc)throw new Error("maxPitch must be less than or equal to "+Lc);var Ce=new ta($.minZoom,$.maxZoom,$.minPitch,$.maxPitch,$.renderWorldCopies);if(ve.call(this,Ce,$),this._interactive=$.interactive,this._maxTileCacheSize=$.maxTileCacheSize,this._failIfMajorPerformanceCaveat=$.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=$.preserveDrawingBuffer,this._antialias=$.antialias,this._trackResize=$.trackResize,this._bearingSnap=$.bearingSnap,this._refreshExpiredTiles=$.refreshExpiredTiles,this._fadeDuration=$.fadeDuration,this._crossSourceCollisions=$.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=$.collectResourceTiming,this._renderTaskQueue=new qo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Od,$.locale),this._requestManager=new e.RequestManager($.transformRequest,$.accessToken),typeof $.container=="string"){if(this._container=e.window.document.getElementById($.container),!this._container)throw new Error("Container '"+$.container+"' not found.")}else if($.container instanceof zf)this._container=$.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if($.maxBounds&&this.setMaxBounds($.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ge._update(!1)}),this.on("moveend",function(){return ge._update(!1)}),this.on("zoom",function(){return ge._update(!0)}),typeof e.window<"u"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new fo(this,$);var Fe=typeof $.hash=="string"&&$.hash||void 0;this._hash=$.hash&&new Di(Fe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:$.center,zoom:$.zoom,bearing:$.bearing,pitch:$.pitch}),$.bounds&&(this.resize(),this.fitBounds($.bounds,e.extend({},$.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=$.localIdeographFontFamily,$.style&&this.setStyle($.style,{localIdeographFontFamily:$.localIdeographFontFamily}),$.attributionControl&&this.addControl(new mu({customAttribution:$.customAttribution})),this.addControl(new qi,$.logoPosition),this.on("style.load",function(){ge.transform.unmodified&&ge.jumpTo(ge.style.stylesheet)}),this.on("data",function(Je){ge._update(Je.dataType==="style"),ge.fire(new e.Event(Je.dataType+"data",Je))}),this.on("dataloading",function(Je){ge.fire(new e.Event(Je.dataType+"dataloading",Je))})}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(ge,Ce){if(Ce===void 0&&ge.getDefaultPosition&&(Ce=ge.getDefaultPosition()),Ce===void 0&&(Ce="top-right"),!ge||!ge.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Fe=ge.onAdd(this);this._controls.push(ge);var Je=this._controlPositions[Ce];return Ce.indexOf("bottom")!==-1?Je.insertBefore(Fe,Je.firstChild):Je.appendChild(Fe),this},W.prototype.removeControl=function(ge){if(!ge||!ge.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=this._controls.indexOf(ge);return Ce>-1&&this._controls.splice(Ce,1),ge.onRemove(this),this},W.prototype.resize=function(ge){var Ce=this._containerDimensions(),Fe=Ce[0],Je=Ce[1];this._resizeCanvas(Fe,Je),this.transform.resize(Fe,Je),this.painter.resize(Fe,Je);var ht=!this._moving;return ht&&(this.stop(),this.fire(new e.Event("movestart",ge)).fire(new e.Event("move",ge))),this.fire(new e.Event("resize",ge)),ht&&this.fire(new e.Event("moveend",ge)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(ge){return this.transform.setMaxBounds(e.LngLatBounds.convert(ge)),this._update()},W.prototype.setMinZoom=function(ge){if(ge=ge==null?of:ge,ge>=of&&ge<=this.transform.maxZoom)return this.transform.minZoom=ge,this._update(),this.getZoom()<ge&&this.setZoom(ge),this;throw new Error("minZoom must be between "+of+" and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(ge){if(ge=ge==null?vh:ge,ge>=this.transform.minZoom)return this.transform.maxZoom=ge,this._update(),this.getZoom()>ge&&this.setZoom(ge),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(ge){if(ge=ge==null?wl:ge,ge<wl)throw new Error("minPitch must be greater than or equal to "+wl);if(ge>=wl&&ge<=this.transform.maxPitch)return this.transform.minPitch=ge,this._update(),this.getPitch()<ge&&this.setPitch(ge),this;throw new Error("minPitch must be between "+wl+" and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(ge){if(ge=ge==null?Lc:ge,ge>Lc)throw new Error("maxPitch must be less than or equal to "+Lc);if(ge>=this.transform.minPitch)return this.transform.maxPitch=ge,this._update(),this.getPitch()>ge&&this.setPitch(ge),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(ge){return this.transform.renderWorldCopies=ge,this._update()},W.prototype.project=function(ge){return this.transform.locationPoint(e.LngLat.convert(ge))},W.prototype.unproject=function(ge){return this.transform.pointLocation(e.Point.convert(ge))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(ge,Ce,Fe){var Je=this,ht;if(ge==="mouseenter"||ge==="mouseover"){var Dt=!1,er=function(Xr){var rn=Je.getLayer(Ce)?Je.queryRenderedFeatures(Xr.point,{layers:[Ce]}):[];rn.length?Dt||(Dt=!0,Fe.call(Je,new wt(ge,Je,Xr.originalEvent,{features:rn}))):Dt=!1},pr=function(){Dt=!1};return{layer:Ce,listener:Fe,delegates:{mousemove:er,mouseout:pr}}}else if(ge==="mouseleave"||ge==="mouseout"){var mr=!1,Rr=function(Xr){var rn=Je.getLayer(Ce)?Je.queryRenderedFeatures(Xr.point,{layers:[Ce]}):[];rn.length?mr=!0:mr&&(mr=!1,Fe.call(Je,new wt(ge,Je,Xr.originalEvent)))},Zr=function(Xr){mr&&(mr=!1,Fe.call(Je,new wt(ge,Je,Xr.originalEvent)))};return{layer:Ce,listener:Fe,delegates:{mousemove:Rr,mouseout:Zr}}}else{var $r=function(Xr){var rn=Je.getLayer(Ce)?Je.queryRenderedFeatures(Xr.point,{layers:[Ce]}):[];rn.length&&(Xr.features=rn,Fe.call(Je,Xr),delete Xr.features)};return{layer:Ce,listener:Fe,delegates:(ht={},ht[ge]=$r,ht)}}},W.prototype.on=function(ge,Ce,Fe){if(Fe===void 0)return ve.prototype.on.call(this,ge,Ce);var Je=this._createDelegatedListener(ge,Ce,Fe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ge]=this._delegatedListeners[ge]||[],this._delegatedListeners[ge].push(Je);for(var ht in Je.delegates)this.on(ht,Je.delegates[ht]);return this},W.prototype.once=function(ge,Ce,Fe){if(Fe===void 0)return ve.prototype.once.call(this,ge,Ce);var Je=this._createDelegatedListener(ge,Ce,Fe);for(var ht in Je.delegates)this.once(ht,Je.delegates[ht]);return this},W.prototype.off=function(ge,Ce,Fe){var Je=this;if(Fe===void 0)return ve.prototype.off.call(this,ge,Ce);var ht=function(Dt){for(var er=Dt[ge],pr=0;pr<er.length;pr++){var mr=er[pr];if(mr.layer===Ce&&mr.listener===Fe){for(var Rr in mr.delegates)Je.off(Rr,mr.delegates[Rr]);return er.splice(pr,1),Je}}};return this._delegatedListeners&&this._delegatedListeners[ge]&&ht(this._delegatedListeners),this},W.prototype.queryRenderedFeatures=function(ge,Ce){if(!this.style)return[];Ce===void 0&&ge!==void 0&&!(ge instanceof e.Point)&&!Array.isArray(ge)&&(Ce=ge,ge=void 0),Ce=Ce||{},ge=ge||[[0,0],[this.transform.width,this.transform.height]];var Fe;if(ge instanceof e.Point||typeof ge[0]=="number")Fe=[e.Point.convert(ge)];else{var Je=e.Point.convert(ge[0]),ht=e.Point.convert(ge[1]);Fe=[Je,new e.Point(ht.x,Je.y),ht,new e.Point(Je.x,ht.y),Je]}return this.style.queryRenderedFeatures(Fe,Ce,this.transform)},W.prototype.querySourceFeatures=function(ge,Ce){return this.style.querySourceFeatures(ge,Ce)},W.prototype.setStyle=function(ge,Ce){return Ce=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ce),Ce.diff!==!1&&Ce.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ge?(this._diffStyle(ge,Ce),this):(this._localIdeographFontFamily=Ce.localIdeographFontFamily,this._updateStyle(ge,Ce))},W.prototype._getUIString=function(ge){var Ce=this._locale[ge];if(Ce==null)throw new Error("Missing UI string '"+ge+"'");return Ce},W.prototype._updateStyle=function(ge,Ce){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ge)this.style=new $o(this,Ce||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ge=="string"?this.style.loadURL(ge):this.style.loadJSON(ge),this},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new $o(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(ge,Ce){var Fe=this;if(typeof ge=="string"){var Je=this._requestManager.normalizeStyleURL(ge),ht=this._requestManager.transformRequest(Je,e.ResourceType.Style);e.getJSON(ht,function(Dt,er){Dt?Fe.fire(new e.ErrorEvent(Dt)):er&&Fe._updateDiff(er,Ce)})}else typeof ge=="object"&&this._updateDiff(ge,Ce)},W.prototype._updateDiff=function(ge,Ce){try{this.style.setState(ge)&&this._update(!0)}catch(Fe){e.warnOnce("Unable to perform style diff: "+(Fe.message||Fe.error||Fe)+".  Rebuilding the style from scratch."),this._updateStyle(ge,Ce)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(ge,Ce){return this._lazyInitEmptyStyle(),this.style.addSource(ge,Ce),this._update(!0)},W.prototype.isSourceLoaded=function(ge){var Ce=this.style&&this.style.sourceCaches[ge];if(Ce===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+ge+"'")));return}return Ce.loaded()},W.prototype.areTilesLoaded=function(){var ge=this.style&&this.style.sourceCaches;for(var Ce in ge){var Fe=ge[Ce],Je=Fe._tiles;for(var ht in Je){var Dt=Je[ht];if(!(Dt.state==="loaded"||Dt.state==="errored"))return!1}}return!0},W.prototype.addSourceType=function(ge,Ce,Fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ge,Ce,Fe)},W.prototype.removeSource=function(ge){return this.style.removeSource(ge),this._update(!0)},W.prototype.getSource=function(ge){return this.style.getSource(ge)},W.prototype.addImage=function(ge,Ce,Fe){Fe===void 0&&(Fe={});var Je=Fe.pixelRatio;Je===void 0&&(Je=1);var ht=Fe.sdf;ht===void 0&&(ht=!1);var Dt=Fe.stretchX,er=Fe.stretchY,pr=Fe.content;this._lazyInitEmptyStyle();var mr=0;if(Ce instanceof hh||Cc&&Ce instanceof Cc){var Rr=e.browser.getImageData(Ce),Zr=Rr.width,$r=Rr.height,Xr=Rr.data;this.style.addImage(ge,{data:new e.RGBAImage({width:Zr,height:$r},Xr),pixelRatio:Je,stretchX:Dt,stretchY:er,content:pr,sdf:ht,version:mr})}else{if(Ce.width===void 0||Ce.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var rn=Ce.width,xn=Ce.height,Fn=Ce.data,Gn=Ce;this.style.addImage(ge,{data:new e.RGBAImage({width:rn,height:xn},new Uint8Array(Fn)),pixelRatio:Je,stretchX:Dt,stretchY:er,content:pr,sdf:ht,version:mr,userImage:Gn}),Gn.onAdd&&Gn.onAdd(this,ge)}},W.prototype.updateImage=function(ge,Ce){var Fe=this.style.getImage(ge);if(!Fe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Je=Ce instanceof hh||Cc&&Ce instanceof Cc?e.browser.getImageData(Ce):Ce,ht=Je.width,Dt=Je.height,er=Je.data;if(ht===void 0||Dt===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ht!==Fe.data.width||Dt!==Fe.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var pr=!(Ce instanceof hh||Cc&&Ce instanceof Cc);Fe.data.replace(er,pr),this.style.updateImage(ge,Fe)},W.prototype.hasImage=function(ge){return ge?!!this.style.getImage(ge):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(ge){this.style.removeImage(ge)},W.prototype.loadImage=function(ge,Ce){e.getImage(this._requestManager.transformRequest(ge,e.ResourceType.Image),Ce)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(ge,Ce){return this._lazyInitEmptyStyle(),this.style.addLayer(ge,Ce),this._update(!0)},W.prototype.moveLayer=function(ge,Ce){return this.style.moveLayer(ge,Ce),this._update(!0)},W.prototype.removeLayer=function(ge){return this.style.removeLayer(ge),this._update(!0)},W.prototype.getLayer=function(ge){return this.style.getLayer(ge)},W.prototype.setLayerZoomRange=function(ge,Ce,Fe){return this.style.setLayerZoomRange(ge,Ce,Fe),this._update(!0)},W.prototype.setFilter=function(ge,Ce,Fe){return Fe===void 0&&(Fe={}),this.style.setFilter(ge,Ce,Fe),this._update(!0)},W.prototype.getFilter=function(ge){return this.style.getFilter(ge)},W.prototype.setPaintProperty=function(ge,Ce,Fe,Je){return Je===void 0&&(Je={}),this.style.setPaintProperty(ge,Ce,Fe,Je),this._update(!0)},W.prototype.getPaintProperty=function(ge,Ce){return this.style.getPaintProperty(ge,Ce)},W.prototype.setLayoutProperty=function(ge,Ce,Fe,Je){return Je===void 0&&(Je={}),this.style.setLayoutProperty(ge,Ce,Fe,Je),this._update(!0)},W.prototype.getLayoutProperty=function(ge,Ce){return this.style.getLayoutProperty(ge,Ce)},W.prototype.setLight=function(ge,Ce){return Ce===void 0&&(Ce={}),this._lazyInitEmptyStyle(),this.style.setLight(ge,Ce),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(ge,Ce){return this.style.setFeatureState(ge,Ce),this._update()},W.prototype.removeFeatureState=function(ge,Ce){return this.style.removeFeatureState(ge,Ce),this._update()},W.prototype.getFeatureState=function(ge){return this.style.getFeatureState(ge)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var ge=0,Ce=0;return this._container&&(ge=this._container.clientWidth||400,Ce=this._container.clientHeight||300),[ge,Ce]},W.prototype._detectMissingCSS=function(){var ge=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ge!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var ge=this._container;ge.classList.add("mapboxgl-map");var Ce=this._missingCSSCanary=i.create("div","mapboxgl-canary",ge);Ce.style.visibility="hidden",this._detectMissingCSS();var Fe=this._canvasContainer=i.create("div","mapboxgl-canvas-container",ge);this._interactive&&Fe.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",Fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Je=this._containerDimensions();this._resizeCanvas(Je[0],Je[1]);var ht=this._controlContainer=i.create("div","mapboxgl-control-container",ge),Dt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(er){Dt[er]=i.create("div","mapboxgl-ctrl-"+er,ht)})},W.prototype._resizeCanvas=function(ge,Ce){var Fe=e.browser.devicePixelRatio||1;this._canvas.width=Fe*ge,this._canvas.height=Fe*Ce,this._canvas.style.width=ge+"px",this._canvas.style.height=Ce+"px"},W.prototype._setupPainter=function(){var ge=e.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ce=this._canvas.getContext("webgl",ge)||this._canvas.getContext("experimental-webgl",ge);if(!Ce){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new et(Ce,this.transform),e.webpSupported.testSupport(Ce)},W.prototype._contextLost=function(ge){ge.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:ge}))},W.prototype._contextRestored=function(ge){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:ge}))},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(ge){return this.style?(this._styleDirty=this._styleDirty||ge,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(ge){return this._update(),this._renderTaskQueue.add(ge)},W.prototype._cancelRenderFrame=function(ge){this._renderTaskQueue.remove(ge)},W.prototype._render=function(ge){var Ce=this,Fe,Je=0,ht=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Fe=ht.createQueryEXT(),ht.beginQueryEXT(ht.TIME_ELAPSED_EXT,Fe),Je=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ge),!this._removed){var Dt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var er=this.transform.zoom,pr=e.browser.now();this.style.zoomHistory.update(er,pr);var mr=new e.EvaluationParameters(er,{now:pr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Rr=mr.crossFadingFactor();(Rr!==1||Rr!==this._crossFadingFactor)&&(Dt=!0,this._crossFadingFactor=Rr),this.style.update(mr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Dt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Zr=e.browser.now()-Je;ht.endQueryEXT(ht.TIME_ELAPSED_EXT,Fe),setTimeout(function(){var rn=ht.getQueryObjectEXT(Fe,ht.QUERY_RESULT_EXT)/1e6;ht.deleteQueryEXT(Fe),Ce.fire(new e.Event("gpu-timing-frame",{cpuTime:Zr,gpuTime:rn}))},50)}if(this.listens("gpu-timing-layer")){var $r=this.painter.collectGpuTimers();setTimeout(function(){var rn=Ce.painter.queryGpuTimers($r);Ce.fire(new e.Event("gpu-timing-layer",{layerTimes:rn}))},50)}var Xr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Xr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var ge=0,Ce=this._controls;ge<Ce.length;ge+=1){var Fe=Ce[ge];Fe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window<"u"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Je=this.painter.context.gl.getExtension("WEBGL_lose_context");Je&&Je.loseContext(),Of(this._canvasContainer),Of(this._controlContainer),Of(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},W.prototype.triggerRepaint=function(){var ge=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ce){ge._frame=null,ge._render(Ce)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(ge){this._trackResize&&this.resize({originalEvent:ge})._update()},de.showTileBoundaries.get=function(){return!!this._showTileBoundaries},de.showTileBoundaries.set=function($){this._showTileBoundaries!==$&&(this._showTileBoundaries=$,this._update())},de.showPadding.get=function(){return!!this._showPadding},de.showPadding.set=function($){this._showPadding!==$&&(this._showPadding=$,this._update())},de.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},de.showCollisionBoxes.set=function($){this._showCollisionBoxes!==$&&(this._showCollisionBoxes=$,$?this.style._generateCollisionBoxes():this._update())},de.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},de.showOverdrawInspector.set=function($){this._showOverdrawInspector!==$&&(this._showOverdrawInspector=$,this._update())},de.repaint.get=function(){return!!this._repaint},de.repaint.set=function($){this._repaint!==$&&(this._repaint=$,this.triggerRepaint())},de.vertices.get=function(){return!!this._vertices},de.vertices.set=function($){this._vertices=$,this._update()},W.prototype._setCacheLimits=function(ge,Ce){e.setCacheLimits(ge,Ce)},de.version.get=function(){return e.version},Object.defineProperties(W.prototype,de),W}(af);function Of(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}var ph={showCompass:!0,showZoom:!0,visualizePitch:!1},pc=function(W){var de=this;this.options=e.extend({},ph,W),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function($){return $.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function($){return de._map.zoomIn({},{originalEvent:$})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function($){return de._map.zoomOut({},{originalEvent:$})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function($){de.options.visualizePitch?de._map.resetNorthPitch({},{originalEvent:$}):de._map.resetNorth({},{originalEvent:$})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};pc.prototype._updateZoomButtons=function(){var W=this._map.getZoom();this._zoomInButton.disabled=W===this._map.getMaxZoom(),this._zoomOutButton.disabled=W===this._map.getMinZoom()},pc.prototype._rotateCompassArrow=function(){var W=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=W},pc.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bl(this._map,this._compass,this.options.visualizePitch)),this._container},pc.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},pc.prototype._createButton=function(W,de){var $=i.create("button",W,this._container);return $.type="button",$.addEventListener("click",de),$},pc.prototype._setButtonTitle=function(W,de){var $=this._map._getUIString("NavigationControl."+de);W.title=$,W.setAttribute("aria-label",$)};var Bl=function(W,de,$){$===void 0&&($=!1),this._clickTolerance=10,this.element=de,this.mouseRotate=new pa({clickTolerance:W.dragRotate._mouseRotate._clickTolerance}),this.map=W,$&&(this.mousePitch=new Na({clickTolerance:W.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(de,"mousedown",this.mousedown),i.addEventListener(de,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(de,"touchmove",this.touchmove),i.addEventListener(de,"touchend",this.touchend),i.addEventListener(de,"touchcancel",this.reset)};Bl.prototype.down=function(W,de){this.mouseRotate.mousedown(W,de),this.mousePitch&&this.mousePitch.mousedown(W,de),i.disableDrag()},Bl.prototype.move=function(W,de){var $=this.map,ge=this.mouseRotate.mousemoveWindow(W,de);if(ge&&ge.bearingDelta&&$.setBearing($.getBearing()+ge.bearingDelta),this.mousePitch){var Ce=this.mousePitch.mousemoveWindow(W,de);Ce&&Ce.pitchDelta&&$.setPitch($.getPitch()+Ce.pitchDelta)}},Bl.prototype.off=function(){var W=this.element;i.removeEventListener(W,"mousedown",this.mousedown),i.removeEventListener(W,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(W,"touchmove",this.touchmove),i.removeEventListener(W,"touchend",this.touchend),i.removeEventListener(W,"touchcancel",this.reset),this.offTemp()},Bl.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)},Bl.prototype.mousedown=function(W){this.down(e.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),i.mousePos(this.element,W)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)},Bl.prototype.mousemove=function(W){this.move(W,i.mousePos(this.element,W))},Bl.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W),this.mousePitch&&this.mousePitch.mouseupWindow(W),this.offTemp()},Bl.prototype.touchstart=function(W){W.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))},Bl.prototype.touchmove=function(W){W.targetTouches.length!==1?this.reset():(this._lastPos=i.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},this._lastPos))},Bl.prototype.touchend=function(W){W.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Bl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function dc(ve,W,de){if(ve=new e.LngLat(ve.lng,ve.lat),W){var $=new e.LngLat(ve.lng-360,ve.lat),ge=new e.LngLat(ve.lng+360,ve.lat),Ce=de.locationPoint(ve).distSqr(W);de.locationPoint($).distSqr(W)<Ce?ve=$:de.locationPoint(ge).distSqr(W)<Ce&&(ve=ge)}for(;Math.abs(ve.lng-de.center.lng)>180;){var Fe=de.locationPoint(ve);if(Fe.x>=0&&Fe.y>=0&&Fe.x<=de.width&&Fe.y<=de.height)break;ve.lng>de.center.lng?ve.lng-=360:ve.lng+=360}return ve}var Nf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function dh(ve,W,de){var $=ve.classList;for(var ge in Nf)$.remove("mapboxgl-"+de+"-anchor-"+ge);$.add("mapboxgl-"+de+"-anchor-"+W)}var sf=function(ve){function W(de,$){var ge=this;if(ve.call(this),(de instanceof e.window.HTMLElement||$)&&(de=e.extend({element:de},$)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=de&&de.anchor||"center",this._color=de&&de.color||"#3FB1CE",this._draggable=de&&de.draggable||!1,this._state="inactive",this._rotation=de&&de.rotation||0,this._rotationAlignment=de&&de.rotationAlignment||"auto",this._pitchAlignment=de&&de.pitchAlignment&&de.pitchAlignment!=="auto"?de.pitchAlignment:this._rotationAlignment,!de||!de.element){this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var Ce=i.createNS("http://www.w3.org/2000/svg","svg");Ce.setAttributeNS(null,"display","block"),Ce.setAttributeNS(null,"height","41px"),Ce.setAttributeNS(null,"width","27px"),Ce.setAttributeNS(null,"viewBox","0 0 27 41");var Fe=i.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"stroke","none"),Fe.setAttributeNS(null,"stroke-width","1"),Fe.setAttributeNS(null,"fill","none"),Fe.setAttributeNS(null,"fill-rule","evenodd");var Je=i.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"fill-rule","nonzero");var ht=i.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ht.setAttributeNS(null,"fill","#000000");for(var Dt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],er=0,pr=Dt;er<pr.length;er+=1){var mr=pr[er],Rr=i.createNS("http://www.w3.org/2000/svg","ellipse");Rr.setAttributeNS(null,"opacity","0.04"),Rr.setAttributeNS(null,"cx","10.5"),Rr.setAttributeNS(null,"cy","5.80029008"),Rr.setAttributeNS(null,"rx",mr.rx),Rr.setAttributeNS(null,"ry",mr.ry),ht.appendChild(Rr)}var Zr=i.createNS("http://www.w3.org/2000/svg","g");Zr.setAttributeNS(null,"fill",this._color);var $r=i.createNS("http://www.w3.org/2000/svg","path");$r.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Zr.appendChild($r);var Xr=i.createNS("http://www.w3.org/2000/svg","g");Xr.setAttributeNS(null,"opacity","0.25"),Xr.setAttributeNS(null,"fill","#000000");var rn=i.createNS("http://www.w3.org/2000/svg","path");rn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Xr.appendChild(rn);var xn=i.createNS("http://www.w3.org/2000/svg","g");xn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),xn.setAttributeNS(null,"fill","#FFFFFF");var Fn=i.createNS("http://www.w3.org/2000/svg","g");Fn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Gn=i.createNS("http://www.w3.org/2000/svg","circle");Gn.setAttributeNS(null,"fill","#000000"),Gn.setAttributeNS(null,"opacity","0.25"),Gn.setAttributeNS(null,"cx","5.5"),Gn.setAttributeNS(null,"cy","5.5"),Gn.setAttributeNS(null,"r","5.4999962");var oa=i.createNS("http://www.w3.org/2000/svg","circle");oa.setAttributeNS(null,"fill","#FFFFFF"),oa.setAttributeNS(null,"cx","5.5"),oa.setAttributeNS(null,"cy","5.5"),oa.setAttributeNS(null,"r","5.4999962"),Fn.appendChild(Gn),Fn.appendChild(oa),Je.appendChild(ht),Je.appendChild(Zr),Je.appendChild(Xr),Je.appendChild(xn),Je.appendChild(Fn),Ce.appendChild(Je),this._element.appendChild(Ce),this._offset=e.Point.convert(de&&de.offset||[0,-14])}else this._element=de.element,this._offset=e.Point.convert(de&&de.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ca){ca.preventDefault()}),this._element.addEventListener("mousedown",function(ca){ca.preventDefault()}),this._element.addEventListener("focus",function(){var ca=ge._map.getContainer();ca.scrollTop=0,ca.scrollLeft=0}),dh(this._element,this._anchor,"marker"),this._popup=null}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.addTo=function($){return this.remove(),this._map=$,$.getCanvasContainer().appendChild(this._element),$.on("move",this._update),$.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function($){return this._lngLat=e.LngLat.convert($),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function($){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),$){if(!("offset"in $.options)){var ge=38.1,Ce=13.5,Fe=Math.sqrt(Math.pow(Ce,2)/2);$.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ge],"bottom-left":[Fe,(ge-Ce+Fe)*-1],"bottom-right":[-Fe,(ge-Ce+Fe)*-1],left:[Ce,(ge-Ce)*-1],right:[-Ce,(ge-Ce)*-1]}:this._offset}this._popup=$,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function($){var ge=$.code,Ce=$.charCode||$.keyCode;(ge==="Space"||ge==="Enter"||Ce===32||Ce===13)&&this.togglePopup()},W.prototype._onMapClick=function($){var ge=$.originalEvent.target,Ce=this._element;this._popup&&(ge===Ce||Ce.contains(ge))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var $=this._popup;if($)$.isOpen()?$.remove():$.addTo(this._map);else return this;return this},W.prototype._update=function($){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=dc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ge="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ge="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ge="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ce="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ce="rotateX(0deg)":this._pitchAlignment==="map"&&(Ce="rotateX("+this._map.getPitch()+"deg)"),(!$||$.type==="moveend")&&(this._pos=this._pos.round()),i.setTransform(this._element,Nf[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ce+" "+ge)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function($){return this._offset=e.Point.convert($),this._update(),this},W.prototype._onMove=function($){this._pos=$.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function($){this._element.contains($.originalEvent.target)&&($.preventDefault(),this._positionDelta=$.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function($){return this._draggable=!!$,this._map&&($?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function($){return this._rotation=$||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function($){return this._rotationAlignment=$||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function($){return this._pitchAlignment=$&&$!=="auto"?$:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(e.Evented),yv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Pc;function Bf(ve){Pc!==void 0?ve(Pc):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(W){Pc=W.state!=="denied",ve(Pc)}):(Pc=!!e.window.navigator.geolocation,ve(Pc))}var lf=0,Dc=!1,mv=function(ve){function W(de){ve.call(this),this.options=e.extend({},yv,de),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.onAdd=function($){return this._map=$,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Bf(this._setupUI),this._container},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lf=0,Dc=!1},W.prototype._isOutOfMapMaxBounds=function($){var ge=this._map.getMaxBounds(),Ce=$.coords;return ge&&(Ce.longitude<ge.getWest()||Ce.longitude>ge.getEast()||Ce.latitude<ge.getSouth()||Ce.latitude>ge.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},W.prototype._onSuccess=function($){if(!!this._map){if(this._isOutOfMapMaxBounds($)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",$)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=$,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker($),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera($),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",$)),this._finish()}},W.prototype._updateCamera=function($){var ge=new e.LngLat($.coords.longitude,$.coords.latitude),Ce=$.coords.accuracy,Fe=this._map.getBearing(),Je=e.extend({bearing:Fe},this.options.fitBoundsOptions);this._map.fitBounds(ge.toBounds(Ce),Je,{geolocateSource:!0})},W.prototype._updateMarker=function($){if($){var ge=new e.LngLat($.coords.longitude,$.coords.latitude);this._accuracyCircleMarker.setLngLat(ge).addTo(this._map),this._userLocationDotMarker.setLngLat(ge).addTo(this._map),this._accuracy=$.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var $=this._map._container.clientHeight/2,ge=this._map.unproject([0,$]),Ce=this._map.unproject([1,$]),Fe=ge.distanceTo(Ce),Je=Math.ceil(2*this._accuracy/Fe);this._circleElement.style.width=Je+"px",this._circleElement.style.height=Je+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function($){if(!!this._map){if(this.options.trackUserLocation)if($.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ge=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ge,this._geolocateButton.setAttribute("aria-label",ge),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if($.code===3&&Dc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",$)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function($){var ge=this;if(this._container.addEventListener("contextmenu",function(Je){return Je.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",$===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ce=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}else{var Fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Fe,this._geolocateButton.setAttribute("aria-label",Fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new sf(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Je){var ht=Je.originalEvent&&Je.originalEvent.type==="resize";!Je.geolocateSource&&ge._watchState==="ACTIVE_LOCK"&&!ht&&(ge._watchState="BACKGROUND",ge._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ge._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ge.fire(new e.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lf--,Dc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),lf++;var $;lf>1?($={maximumAge:6e5,timeout:0},Dc=!0):($=this.options.positionOptions,Dc=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,$)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(e.Evented),sp={maxWidth:100,unit:"metric"},Rc=function(W){this.options=e.extend({},sp,W),e.bindAll(["_onMove","setUnit"],this)};Rc.prototype.getDefaultPosition=function(){return"bottom-left"},Rc.prototype._onMove=function(){xv(this._map,this._container,this.options)},Rc.prototype.onAdd=function(W){return this._map=W,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Rc.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Rc.prototype.setUnit=function(W){this.options.unit=W,xv(this._map,this._container,this.options)};function xv(ve,W,de){var $=de&&de.maxWidth||100,ge=ve._container.clientHeight/2,Ce=ve.unproject([0,ge]),Fe=ve.unproject([$,ge]),Je=Ce.distanceTo(Fe);if(de&&de.unit==="imperial"){var ht=3.2808*Je;if(ht>5280){var Dt=ht/5280;uf(W,$,Dt,ve._getUIString("ScaleControl.Miles"))}else uf(W,$,ht,ve._getUIString("ScaleControl.Feet"))}else if(de&&de.unit==="nautical"){var er=Je/1852;uf(W,$,er,ve._getUIString("ScaleControl.NauticalMiles"))}else Je>=1e3?uf(W,$,Je/1e3,ve._getUIString("ScaleControl.Kilometers")):uf(W,$,Je,ve._getUIString("ScaleControl.Meters"))}function uf(ve,W,de,$){var ge=up(de),Ce=ge/de;ve.style.width=W*Ce+"px",ve.innerHTML=ge+"&nbsp;"+$}function lp(ve){var W=Math.pow(10,Math.ceil(-Math.log(ve)/Math.LN10));return Math.round(ve*W)/W}function up(ve){var W=Math.pow(10,(""+Math.floor(ve)).length-1),de=ve/W;return de=de>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:lp(de),W*de}var Bu=function(W){this._fullscreen=!1,W&&W.container&&(W.container instanceof e.window.HTMLElement?this._container=W.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Bu.prototype.onAdd=function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Bu.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Bu.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Bu.prototype._setupUI=function(){var W=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0),W.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Bu.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W),this._fullscreenButton.title=W},Bu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Bu.prototype._isFullscreen=function(){return this._fullscreen},Bu.prototype._changeIcon=function(){var W=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;W===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Bu.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var cp={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},fp=function(ve){function W(de){ve.call(this),this.options=e.extend(Object.create(cp),de),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.addTo=function($){return this._map&&this.remove(),this._map=$,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function($){return this._lngLat=e.LngLat.convert($),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function($){return this.setDOMContent(e.window.document.createTextNode($))},W.prototype.setHTML=function($){var ge=e.window.document.createDocumentFragment(),Ce=e.window.document.createElement("body"),Fe;for(Ce.innerHTML=$;Fe=Ce.firstChild,!!Fe;)ge.appendChild(Fe);return this.setDOMContent(ge)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function($){return this.options.maxWidth=$,this._update(),this},W.prototype.setDOMContent=function($){return this._createContent(),this._content.appendChild($),this._update(),this},W.prototype.addClassName=function($){this._container&&this._container.classList.add($)},W.prototype.removeClassName=function($){this._container&&this._container.classList.remove($)},W.prototype.toggleClassName=function($){if(this._container)return this._container.classList.toggle($)},W.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function($){this._update($.point)},W.prototype._onMouseMove=function($){this._update($.point)},W.prototype._onDrag=function($){this._update($.point)},W.prototype._update=function($){var ge=this,Ce=this._lngLat||this._trackPointer;if(!(!this._map||!Ce||!this._content)&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Rr){return ge._container.classList.add(Rr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=dc(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!$))){var Fe=this._pos=this._trackPointer&&$?$:this._map.project(this._lngLat),Je=this.options.anchor,ht=bv(this.options.offset);if(!Je){var Dt=this._container.offsetWidth,er=this._container.offsetHeight,pr;Fe.y+ht.bottom.y<er?pr=["top"]:Fe.y>this._map.transform.height-er?pr=["bottom"]:pr=[],Fe.x<Dt/2?pr.push("left"):Fe.x>this._map.transform.width-Dt/2&&pr.push("right"),pr.length===0?Je="bottom":Je=pr.join("-")}var mr=Fe.add(ht[Je]).round();i.setTransform(this._container,Nf[Je]+" translate("+mr.x+"px,"+mr.y+"px)"),dh(this._container,Je,"popup")}},W.prototype._onClose=function(){this.remove()},W}(e.Evented);function bv(ve){if(ve)if(typeof ve=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(ve,2)));return{center:new e.Point(0,0),top:new e.Point(0,ve),"top-left":new e.Point(W,W),"top-right":new e.Point(-W,W),bottom:new e.Point(0,-ve),"bottom-left":new e.Point(W,-W),"bottom-right":new e.Point(-W,-W),left:new e.Point(ve,0),right:new e.Point(-ve,0)}}else if(ve instanceof e.Point||Array.isArray(ve)){var de=e.Point.convert(ve);return{center:de,top:de,"top-left":de,"top-right":de,bottom:de,"bottom-left":de,"bottom-right":de,left:de,right:de}}else return{center:e.Point.convert(ve.center||[0,0]),top:e.Point.convert(ve.top||[0,0]),"top-left":e.Point.convert(ve["top-left"]||[0,0]),"top-right":e.Point.convert(ve["top-right"]||[0,0]),bottom:e.Point.convert(ve.bottom||[0,0]),"bottom-left":e.Point.convert(ve["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(ve["bottom-right"]||[0,0]),left:e.Point.convert(ve.left||[0,0]),right:e.Point.convert(ve.right||[0,0])};else return bv(new e.Point(0,0))}var hp={version:e.version,supported:a,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:gv,NavigationControl:pc,GeolocateControl:mv,AttributionControl:mu,ScaleControl:Rc,FullscreenControl:Bu,Popup:fp,Marker:sf,Style:$o,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:or,clearPrewarmedResources:Pr,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(ve){e.config.ACCESS_TOKEN=ve},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(ve){e.config.API_URL=ve},get workerCount(){return St.workerCount},set workerCount(ve){St.workerCount=ve},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ve){e.config.MAX_PARALLEL_IMAGE_REQUESTS=ve},clearStorage:function(W){e.clearTileCache(W)},workerUrl:""};return hp}),A})},{}],240:[function(t,N,V){N.exports=Math.log2||function(y){return Math.log(y)*Math.LOG2E}},{}],241:[function(t,N,V){N.exports=c;var y=t("mouse-event");function c(A,T){T||(T=A,A=window);var e=0,a=0,i=0,n={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function v(M){var w=!1;return"altKey"in M&&(w=w||M.altKey!==n.alt,n.alt=!!M.altKey),"shiftKey"in M&&(w=w||M.shiftKey!==n.shift,n.shift=!!M.shiftKey),"ctrlKey"in M&&(w=w||M.ctrlKey!==n.control,n.control=!!M.ctrlKey),"metaKey"in M&&(w=w||M.metaKey!==n.meta,n.meta=!!M.metaKey),w}function s(M,w){var p=y.x(w),_=y.y(w);"buttons"in w&&(M=w.buttons|0),(M!==e||p!==a||_!==i||v(w))&&(e=M|0,a=p||0,i=_||0,T&&T(e,a,i,n))}function o(M){s(0,M)}function b(){(e||a||i||n.shift||n.alt||n.meta||n.control)&&(a=i=0,e=0,n.shift=n.alt=n.control=n.meta=!1,T&&T(0,0,0,n))}function g(M){v(M)&&T&&T(e,a,i,n)}function d(M){y.buttons(M)===0?s(0,M):s(e,M)}function f(M){s(e|y.buttons(M),M)}function m(M){s(e&~y.buttons(M),M)}function l(){r||(r=!0,A.addEventListener("mousemove",d),A.addEventListener("mousedown",f),A.addEventListener("mouseup",m),A.addEventListener("mouseleave",o),A.addEventListener("mouseenter",o),A.addEventListener("mouseout",o),A.addEventListener("mouseover",o),A.addEventListener("blur",b),A.addEventListener("keyup",g),A.addEventListener("keydown",g),A.addEventListener("keypress",g),A!==window&&(window.addEventListener("blur",b),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function x(){!r||(r=!1,A.removeEventListener("mousemove",d),A.removeEventListener("mousedown",f),A.removeEventListener("mouseup",m),A.removeEventListener("mouseleave",o),A.removeEventListener("mouseenter",o),A.removeEventListener("mouseout",o),A.removeEventListener("mouseover",o),A.removeEventListener("blur",b),A.removeEventListener("keyup",g),A.removeEventListener("keydown",g),A.removeEventListener("keypress",g),A!==window&&(window.removeEventListener("blur",b),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}l();var u={element:A};return Object.defineProperties(u,{enabled:{get:function(){return r},set:function(M){M?l():x()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),u}},{"mouse-event":243}],242:[function(t,N,V){var y={left:0,top:0};N.exports=c;function c(T,e,a){e=e||T.currentTarget||T.srcElement,Array.isArray(a)||(a=[0,0]);var i=T.clientX||0,n=T.clientY||0,r=A(e);return a[0]=i-r.left,a[1]=n-r.top,a}function A(T){return T===window||T===document||T===document.body?y:T.getBoundingClientRect()}},{}],243:[function(t,N,V){function y(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var a=e.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in e){var a=e.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}V.buttons=y;function c(e){return e.target||e.srcElement||window}V.element=c;function A(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var a=c(e),i=a.getBoundingClientRect();return e.clientX-i.left}return 0}V.x=A;function T(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var a=c(e),i=a.getBoundingClientRect();return e.clientY-i.top}return 0}V.y=T},{}],244:[function(t,N,V){var y=t("to-px");N.exports=c;function c(A,T,e){typeof A=="function"&&(e=!!T,T=A,A=window);var a=y("ex",A),i=function(n){e&&n.preventDefault();var r=n.deltaX||0,v=n.deltaY||0,s=n.deltaZ||0,o=n.deltaMode,b=1;switch(o){case 1:b=a;break;case 2:b=window.innerHeight;break}if(r*=b,v*=b,s*=b,r||v||s)return T(r,v,s,n)};return A.addEventListener("wheel",i),i}},{"to-px":315}],245:[function(t,N,V){(function(y,c){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(T,e,a){e[T]=e[T]||a(),typeof N<"u"&&N.exports&&(N.exports=e[T])})("Promise",typeof y<"u"?y:this,function(){var T,e,a,i=Object.prototype.toString,n=typeof c<"u"?function(M){return c(M)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(M,w,p,_){return Object.defineProperty(M,w,{value:p,writable:!0,configurable:_!==!1})}}catch{T=function(w,p,_){return w[p]=_,w}}a=function(){var M,w,p;function _(h,L){this.fn=h,this.self=L,this.next=void 0}return{add:function(L,E){p=new _(L,E),w?w.next=p:M=p,w=p,p=void 0},drain:function(){var L=M;for(M=w=e=void 0;L;)L.fn.call(L.self),L=L.next}}}();function r(u,M){a.add(u,M),e||(e=n(a.drain))}function v(u){var M,w=typeof u;return u!=null&&(w=="object"||w=="function")&&(M=u.then),typeof M=="function"?M:!1}function s(){for(var u=0;u<this.chain.length;u++)o(this,this.state===1?this.chain[u].success:this.chain[u].failure,this.chain[u]);this.chain.length=0}function o(u,M,w){var p,_;try{M===!1?w.reject(u.msg):(M===!0?p=u.msg:p=M.call(void 0,u.msg),p===w.promise?w.reject(TypeError("Promise-chain cycle")):(_=v(p))?_.call(p,w.resolve,w.reject):w.resolve(p))}catch(h){w.reject(h)}}function b(u){var M,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(M=v(u))?r(function(){var p=new f(w);try{M.call(u,function(){b.apply(p,arguments)},function(){g.apply(p,arguments)})}catch(_){g.call(p,_)}}):(w.msg=u,w.state=1,w.chain.length>0&&r(s,w))}catch(p){g.call(new f(w),p)}}}function g(u){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=u,M.state=2,M.chain.length>0&&r(s,M))}function d(u,M,w,p){for(var _=0;_<M.length;_++)(function(L){u.resolve(M[L]).then(function(S){w(L,S)},p)})(_)}function f(u){this.def=u,this.triggered=!1}function m(u){this.promise=u,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(u){if(typeof u!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new m(this);this.then=function(p,_){var h={success:typeof p=="function"?p:!0,failure:typeof _=="function"?_:!1};return h.promise=new this.constructor(function(E,S){if(typeof E!="function"||typeof S!="function")throw TypeError("Not a function");h.resolve=E,h.reject=S}),M.chain.push(h),M.state!==0&&r(s,M),h.promise},this.catch=function(p){return this.then(void 0,p)};try{u.call(void 0,function(p){b.call(M,p)},function(p){g.call(M,p)})}catch(w){g.call(M,w)}}var x=T({},"constructor",l,!1);return l.prototype=x,T(x,"__NPO__",0,!1),T(l,"resolve",function(M){var w=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");_(M)})}),T(l,"reject",function(M){return new this(function(p,_){if(typeof p!="function"||typeof _!="function")throw TypeError("Not a function");_(M)})}),T(l,"all",function(M){var w=this;return i.call(M)!="[object Array]"?w.reject(TypeError("Not an array")):M.length===0?w.resolve([]):new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");var L=M.length,E=Array(L),S=0;d(w,M,function(F,I){E[F]=I,++S===L&&_(E)},h)})}),T(l,"race",function(M){var w=this;return i.call(M)!="[object Array]"?w.reject(TypeError("Not an array")):new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");d(w,M,function(E,S){_(S)},h)})}),l})}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{timers:312}],246:[function(t,N,V){var y=Math.PI,c=n(120);N.exports=A;function A(r){for(var v,s=[],o=0,b=0,g=0,d=0,f=null,m=null,l=0,x=0,u=0,M=r.length;u<M;u++){var w=r[u],p=w[0];switch(p){case"M":g=w[1],d=w[2];break;case"A":w=a(l,x,w[1],w[2],n(w[3]),w[4],w[5],w[6],w[7]),w.unshift("C"),w.length>7&&(s.push(w.splice(0,7)),w.unshift("C"));break;case"S":var _=l,h=x;(v=="C"||v=="S")&&(_+=_-o,h+=h-b),w=["C",_,h,w[1],w[2],w[3],w[4]];break;case"T":v=="Q"||v=="T"?(f=l*2-f,m=x*2-m):(f=l,m=x),w=e(l,x,f,m,w[1],w[2]);break;case"Q":f=w[1],m=w[2],w=e(l,x,w[1],w[2],w[3],w[4]);break;case"L":w=T(l,x,w[1],w[2]);break;case"H":w=T(l,x,w[1],x);break;case"V":w=T(l,x,l,w[1]);break;case"Z":w=T(l,x,g,d);break}v=p,l=w[w.length-2],x=w[w.length-1],w.length>4?(o=w[w.length-4],b=w[w.length-3]):(o=l,b=x),s.push(w)}return s}function T(r,v,s,o){return["C",r,v,s,o,s,o]}function e(r,v,s,o,b,g){return["C",r/3+2/3*s,v/3+2/3*o,b/3+2/3*s,g/3+2/3*o,b,g]}function a(r,v,s,o,b,g,d,f,m,l){if(l)S=l[0],P=l[1],L=l[2],E=l[3];else{var x=i(r,v,-b);r=x.x,v=x.y,x=i(f,m,-b),f=x.x,m=x.y;var u=(r-f)/2,M=(v-m)/2,w=u*u/(s*s)+M*M/(o*o);w>1&&(w=Math.sqrt(w),s=w*s,o=w*o);var p=s*s,_=o*o,h=(g==d?-1:1)*Math.sqrt(Math.abs((p*_-p*M*M-_*u*u)/(p*M*M+_*u*u)));h==1/0&&(h=1);var L=h*s*M/o+(r+f)/2,E=h*-o*u/s+(v+m)/2,S=Math.asin(((v-E)/o).toFixed(9)),P=Math.asin(((m-E)/o).toFixed(9));S=r<L?y-S:S,P=f<L?y-P:P,S<0&&(S=y*2+S),P<0&&(P=y*2+P),d&&S>P&&(S=S-y*2),!d&&P>S&&(P=P-y*2)}if(Math.abs(P-S)>c){var F=P,I=f,D=m;P=S+c*(d&&P>S?1:-1),f=L+s*Math.cos(P),m=E+o*Math.sin(P);var R=a(f,m,s,o,b,0,d,I,D,[P,F,L,E])}var O=Math.tan((P-S)/4),z=4/3*s*O,G=4/3*o*O,Y=[2*r-(r+z*Math.sin(S)),2*v-(v-G*Math.cos(S)),f+z*Math.sin(P),m-G*Math.cos(P),f,m];if(l)return Y;R&&(Y=Y.concat(R));for(var ee=0;ee<Y.length;){var j=i(Y[ee],Y[ee+1],b);Y[ee++]=j.x,Y[ee++]=j.y}return Y}function i(r,v,s){return{x:r*Math.cos(s)-v*Math.sin(s),y:r*Math.sin(s)+v*Math.cos(s)}}function n(r){return r*(y/180)}},{}],247:[function(t,N,V){var y=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;function T(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var i={},n=0;n<10;n++)i["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(i).map(function(s){return i[s]});if(r.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(s){v[s]=s}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}N.exports=e()?Object.assign:function(a,i){for(var n,r=T(a),v,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)c.call(n,o)&&(r[o]=n[o]);if(y){v=y(n);for(var b=0;b<v.length;b++)A.call(n,v[b])&&(r[v[b]]=n[v[b]])}}return r}},{}],248:[function(t,N,V){function y(T,e){if(typeof T!="string")return[T];var a=[T];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var i=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],n=e.escape||"___",r=!!e.flat;i.forEach(function(o){var b=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),g=[];function d(f,m,l){var x=a.push(f.slice(o[0].length,-o[1].length))-1;return g.push(x),n+x+n}a.forEach(function(f,m){for(var l,x=0;f!=l;)if(l=f,f=f.replace(b,d),x++>1e4)throw Error("References have circular dependency. Please, check them.");a[m]=f}),g=g.reverse(),a=a.map(function(f){return g.forEach(function(m){f=f.replace(new RegExp("(\\"+n+m+"\\"+n+")","g"),o[0]+"$1"+o[1])}),f})});var v=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(o,b,g){for(var d=[],f,m=0;f=v.exec(o);){if(m++>1e4)throw Error("Circular references in parenthesis");d.push(o.slice(0,f.index)),d.push(s(b[f[1]],b)),o=o.slice(f.index+f[0].length)}return d.push(o),d}return r?a:s(a[0],a)}function c(T,e){if(e&&e.flat){var a=e&&e.escape||"___",i=T[0],n;if(!i)return"";for(var r=new RegExp("\\"+a+"([0-9]+)\\"+a),v=0;i!=n;){if(v++>1e4)throw Error("Circular references in "+T);n=i,i=i.replace(r,s)}return i}return T.reduce(function o(b,g){return Array.isArray(g)&&(g=g.reduce(o,"")),b+g},"");function s(o,b){if(T[b]==null)throw Error("Reference "+b+"is undefined");return T[b]}}function A(T,e){return Array.isArray(T)?c(T,e):y(T,e)}A.parse=y,A.stringify=c,N.exports=A},{}],249:[function(t,N,V){var y=t("pick-by-alias");N.exports=c;function c(A){var T;return arguments.length>1&&(A=arguments),typeof A=="string"?A=A.split(/\s/).map(parseFloat):typeof A=="number"&&(A=[A]),A.length&&typeof A[0]=="number"?A.length===1?T={width:A[0],height:A[0],x:0,y:0}:A.length===2?T={width:A[0],height:A[1],x:0,y:0}:T={x:A[0],y:A[1],width:A[2]-A[0]||0,height:A[3]-A[1]||0}:A&&(A=y(A,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),T={x:A.left||0,y:A.top||0},A.width==null?A.right?T.width=A.right-T.x:T.width=0:T.width=A.width,A.height==null?A.bottom?T.height=A.bottom-T.y:T.height=0:T.height=A.height),T}},{"pick-by-alias":253}],250:[function(t,N,V){N.exports=A;var y={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function A(a){var i=[];return a.replace(c,function(n,r,v){var s=r.toLowerCase();for(v=e(v),s=="m"&&v.length>2&&(i.push([r].concat(v.splice(0,2))),s="l",r=r=="m"?"l":"L");;){if(v.length==y[s])return v.unshift(r),i.push(v);if(v.length<y[s])throw new Error("malformed path data");i.push([r].concat(v.splice(0,y[s])))}}),i}var T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(a){var i=a.match(T);return i?i.map(Number):[]}},{}],251:[function(t,N,V){N.exports=function(c,A){A||(A=[0,""]),c=String(c);var T=parseFloat(c,10);return A[0]=T,A[1]=c.match(/[\d.\-\+]*\s*(.*)/)[1]||"",A}},{}],252:[function(t,N,V){(function(y){(function(){(function(){var c,A,T,e,a,i;typeof performance<"u"&&performance!==null&&performance.now?N.exports=function(){return performance.now()}:typeof y<"u"&&y!==null&&y.hrtime?(N.exports=function(){return(c()-a)/1e6},A=y.hrtime,c=function(){var n;return n=A(),n[0]*1e9+n[1]},e=c(),i=y.uptime()*1e9,a=e-i):Date.now?(N.exports=function(){return Date.now()-T},T=Date.now()):(N.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)}).call(this)}).call(this,t("_process"))},{_process:278}],253:[function(t,N,V){N.exports=function(T,e,a){var i={},n,r;if(typeof e=="string"&&(e=c(e)),Array.isArray(e)){var v={};for(r=0;r<e.length;r++)v[e[r]]=!0;e=v}for(n in e)e[n]=c(e[n]);var s={};for(n in e){var o=e[n];if(Array.isArray(o))for(r=0;r<o.length;r++){var b=o[r];if(a&&(s[b]=!0),b in T){if(i[n]=T[b],a)for(var g=r;g<o.length;g++)s[o[g]]=!0;break}}else n in T&&(e[n]&&(i[n]=T[n]),a&&(s[n]=!0))}if(a)for(n in T)s[n]||(i[n]=T[n]);return i};var y={};function c(A){return y[A]?y[A]:(typeof A=="string"&&(A=y[A]=A.split(/\s*,\s*|\s+/)),A)}},{}],254:[function(t,N,V){N.exports=function(c,A,T,e){var a=c[0],i=c[1],n=!1;T===void 0&&(T=0),e===void 0&&(e=A.length);for(var r=e-T,v=0,s=r-1;v<r;s=v++){var o=A[v+T][0],b=A[v+T][1],g=A[s+T][0],d=A[s+T][1],f=b>i!=d>i&&a<(g-o)*(i-b)/(d-b)+o;f&&(n=!n)}return n}},{}],255:[function(t,N,V){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var y=t("./lib/build-log"),c=t("./lib/epsilon"),A=t("./lib/intersecter"),T=t("./lib/segment-chainer"),e=t("./lib/segment-selector"),a=t("./lib/geojson"),i=!1,n=c(),r;r={buildLog:function(s){return s===!0?i=y():s===!1&&(i=!1),i===!1?!1:i.list},epsilon:function(s){return n.epsilon(s)},segments:function(s){var o=A(!0,n,i);return s.regions.forEach(o.addRegion),{segments:o.calculate(s.inverted),inverted:s.inverted}},combine:function(s,o){var b=A(!1,n,i);return{combined:b.calculate(s.segments,s.inverted,o.segments,o.inverted),inverted1:s.inverted,inverted2:o.inverted}},selectUnion:function(s){return{segments:e.union(s.combined,i),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:e.intersect(s.combined,i),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:e.difference(s.combined,i),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:e.differenceRev(s.combined,i),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:e.xor(s.combined,i),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:T(s.segments,n,i),inverted:s.inverted}},polygonFromGeoJSON:function(s){return a.toPolygon(r,s)},polygonToGeoJSON:function(s){return a.fromPolygon(r,n,s)},union:function(s,o){return v(s,o,r.selectUnion)},intersect:function(s,o){return v(s,o,r.selectIntersect)},difference:function(s,o){return v(s,o,r.selectDifference)},differenceRev:function(s,o){return v(s,o,r.selectDifferenceRev)},xor:function(s,o){return v(s,o,r.selectXor)}};function v(s,o,b){var g=r.segments(s),d=r.segments(o),f=r.combine(g,d),m=b(f);return r.polygon(m)}typeof window=="object"&&(window.PolyBool=r),N.exports=r},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(t,N,V){function y(){var c,A=0,T=!1;function e(a,i){return c.list.push({type:a,data:i?JSON.parse(JSON.stringify(i)):void 0}),c}return c={list:[],segmentId:function(){return A++},checkIntersection:function(a,i){return e("check",{seg1:a,seg2:i})},segmentChop:function(a,i){return e("div_seg",{seg:a,pt:i}),e("chop",{seg:a,pt:i})},statusRemove:function(a){return e("pop_seg",{seg:a})},segmentUpdate:function(a){return e("seg_update",{seg:a})},segmentNew:function(a,i){return e("new_seg",{seg:a,primary:i})},segmentRemove:function(a){return e("rem_seg",{seg:a})},tempStatus:function(a,i,n){return e("temp_status",{seg:a,above:i,below:n})},rewind:function(a){return e("rewind",{seg:a})},status:function(a,i,n){return e("status",{seg:a,above:i,below:n})},vert:function(a){return a===T?c:(T=a,e("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),e("log",{txt:a})},reset:function(){return e("reset")},selected:function(a){return e("selected",{segs:a})},chainStart:function(a){return e("chain_start",{seg:a})},chainRemoveHead:function(a,i){return e("chain_rem_head",{index:a,pt:i})},chainRemoveTail:function(a,i){return e("chain_rem_tail",{index:a,pt:i})},chainNew:function(a,i){return e("chain_new",{pt1:a,pt2:i})},chainMatch:function(a){return e("chain_match",{index:a})},chainClose:function(a){return e("chain_close",{index:a})},chainAddHead:function(a,i){return e("chain_add_head",{index:a,pt:i})},chainAddTail:function(a,i){return e("chain_add_tail",{index:a,pt:i})},chainConnect:function(a,i){return e("chain_con",{index1:a,index2:i})},chainReverse:function(a){return e("chain_rev",{index:a})},chainJoin:function(a,i){return e("chain_join",{index1:a,index2:i})},done:function(){return e("done")}},c}N.exports=y},{}],257:[function(t,N,V){function y(c){typeof c!="number"&&(c=1e-10);var A={epsilon:function(T){return typeof T=="number"&&(c=T),c},pointAboveOrOnLine:function(T,e,a){var i=e[0],n=e[1],r=a[0],v=a[1],s=T[0],o=T[1];return(r-i)*(o-n)-(v-n)*(s-i)>=-c},pointBetween:function(T,e,a){var i=T[1]-e[1],n=a[0]-e[0],r=T[0]-e[0],v=a[1]-e[1],s=r*n+i*v;if(s<c)return!1;var o=n*n+v*v;return!(s-o>-c)},pointsSameX:function(T,e){return Math.abs(T[0]-e[0])<c},pointsSameY:function(T,e){return Math.abs(T[1]-e[1])<c},pointsSame:function(T,e){return A.pointsSameX(T,e)&&A.pointsSameY(T,e)},pointsCompare:function(T,e){return A.pointsSameX(T,e)?A.pointsSameY(T,e)?0:T[1]<e[1]?-1:1:T[0]<e[0]?-1:1},pointsCollinear:function(T,e,a){var i=T[0]-e[0],n=T[1]-e[1],r=e[0]-a[0],v=e[1]-a[1];return Math.abs(i*v-r*n)<c},linesIntersect:function(T,e,a,i){var n=e[0]-T[0],r=e[1]-T[1],v=i[0]-a[0],s=i[1]-a[1],o=n*s-r*v;if(Math.abs(o)<c)return!1;var b=T[0]-a[0],g=T[1]-a[1],d=(v*g-s*b)/o,f=(n*g-r*b)/o,m={alongA:0,alongB:0,pt:[T[0]+d*n,T[1]+d*r]};return d<=-c?m.alongA=-2:d<c?m.alongA=-1:d-1<=-c?m.alongA=0:d-1<c?m.alongA=1:m.alongA=2,f<=-c?m.alongB=-2:f<c?m.alongB=-1:f-1<=-c?m.alongB=0:f-1<c?m.alongB=1:m.alongB=2,m},pointInsideRegion:function(T,e){for(var a=T[0],i=T[1],n=e[e.length-1][0],r=e[e.length-1][1],v=!1,s=0;s<e.length;s++){var o=e[s][0],b=e[s][1];b-i>c!=r-i>c&&(n-o)*(i-b)/(r-b)+o-a>c&&(v=!v),n=o,r=b}return v}};return A}N.exports=y},{}],258:[function(t,N,V){var y={toPolygon:function(c,A){function T(i){if(i.length<=0)return c.segments({inverted:!1,regions:[]});function n(s){var o=s.slice(0,s.length-1);return c.segments({inverted:!1,regions:[o]})}for(var r=n(i[0]),v=1;v<i.length;v++)r=c.selectDifference(c.combine(r,n(i[v])));return r}if(A.type==="Polygon")return c.polygon(T(A.coordinates));if(A.type==="MultiPolygon"){for(var e=c.segments({inverted:!1,regions:[]}),a=0;a<A.coordinates.length;a++)e=c.selectUnion(c.combine(e,T(A.coordinates[a])));return c.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(c,A,T){T=c.polygon(c.segments(T));function e(d,f){return A.pointInsideRegion([(d[0][0]+d[1][0])*.5,(d[0][1]+d[1][1])*.5],f)}function a(d){return{region:d,children:[]}}var i=a(null);function n(d,f){for(var m=0;m<d.children.length;m++){var l=d.children[m];if(e(f,l.region)){n(l,f);return}}for(var x=a(f),m=0;m<d.children.length;m++){var l=d.children[m];e(l.region,f)&&(x.children.push(l),d.children.splice(m,1),m--)}d.children.push(x)}for(var r=0;r<T.regions.length;r++){var v=T.regions[r];v.length<3||n(i,v)}function s(d,f){for(var m=0,l=d[d.length-1][0],x=d[d.length-1][1],u=[],M=0;M<d.length;M++){var w=d[M][0],p=d[M][1];u.push([w,p]),m+=p*l-w*x,l=w,x=p}var _=m<0;return _!==f&&u.reverse(),u.push([u[0][0],u[0][1]]),u}var o=[];function b(d){var f=[s(d.region,!1)];o.push(f);for(var m=0;m<d.children.length;m++)f.push(g(d.children[m]))}function g(d){for(var f=0;f<d.children.length;f++)b(d.children[f]);return s(d.region,!0)}for(var r=0;r<i.children.length;r++)b(i.children[r]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};N.exports=y},{}],259:[function(t,N,V){var y=t("./linked-list");function c(A,T,e){function a(m,l){return{id:e?e.segmentId():-1,start:m,end:l,myFill:{above:null,below:null},otherFill:null}}function i(m,l,x){return{id:e?e.segmentId():-1,start:m,end:l,myFill:{above:x.myFill.above,below:x.myFill.below},otherFill:null}}var n=y.create();function r(m,l,x,u,M,w){var p=T.pointsCompare(l,M);return p!==0?p:T.pointsSame(x,w)?0:m!==u?m?1:-1:T.pointAboveOrOnLine(x,u?M:w,u?w:M)?1:-1}function v(m,l){n.insertBefore(m,function(x){var u=r(m.isStart,m.pt,l,x.isStart,x.pt,x.other.pt);return u<0})}function s(m,l){var x=y.node({isStart:!0,pt:m.start,seg:m,primary:l,other:null,status:null});return v(x,m.end),x}function o(m,l,x){var u=y.node({isStart:!1,pt:l.end,seg:l,primary:x,other:m,status:null});m.other=u,v(u,m.pt)}function b(m,l){var x=s(m,l);return o(x,m,l),x}function g(m,l){e&&e.segmentChop(m.seg,l),m.other.remove(),m.seg.end=l,m.other.pt=l,v(m.other,m.pt)}function d(m,l){var x=i(l,m.seg.end,m.seg);return g(m,l),b(x,m.primary)}function f(m,l){var x=y.create();function u(O,z){var G=O.seg.start,Y=O.seg.end,ee=z.seg.start,j=z.seg.end;return T.pointsCollinear(G,ee,j)?T.pointsCollinear(Y,ee,j)||T.pointAboveOrOnLine(Y,ee,j)?1:-1:T.pointAboveOrOnLine(G,ee,j)?1:-1}function M(O){return x.findTransition(function(z){var G=u(O,z.ev);return G>0})}function w(O,z){var G=O.seg,Y=z.seg,ee=G.start,j=G.end,X=Y.start,ae=Y.end;e&&e.checkIntersection(G,Y);var he=T.linesIntersect(ee,j,X,ae);if(he===!1){if(!T.pointsCollinear(ee,j,X)||T.pointsSame(ee,ae)||T.pointsSame(j,X))return!1;var K=T.pointsSame(ee,X),J=T.pointsSame(j,ae);if(K&&J)return z;var U=!K&&T.pointBetween(ee,X,ae),H=!J&&T.pointBetween(j,X,ae);if(K)return H?d(z,j):d(O,ae),z;U&&(J||(H?d(z,j):d(O,ae)),d(z,ee))}else he.alongA===0&&(he.alongB===-1?d(O,X):he.alongB===0?d(O,he.pt):he.alongB===1&&d(O,ae)),he.alongB===0&&(he.alongA===-1?d(z,ee):he.alongA===0?d(z,he.pt):he.alongA===1&&d(z,j));return!1}for(var p=[];!n.isEmpty();){var _=n.getHead();if(e&&e.vert(_.pt[0]),_.isStart){let O=function(){if(L){var z=w(_,L);if(z)return z}return E?w(_,E):!1};var R=O;e&&e.segmentNew(_.seg,_.primary);var h=M(_),L=h.before?h.before.ev:null,E=h.after?h.after.ev:null;e&&e.tempStatus(_.seg,L?L.seg:!1,E?E.seg:!1);var S=O();if(S){if(A){var P;_.seg.myFill.below===null?P=!0:P=_.seg.myFill.above!==_.seg.myFill.below,P&&(S.seg.myFill.above=!S.seg.myFill.above)}else S.seg.otherFill=_.seg.myFill;e&&e.segmentUpdate(S.seg),_.other.remove(),_.remove()}if(n.getHead()!==_){e&&e.rewind(_.seg);continue}if(A){var P;_.seg.myFill.below===null?P=!0:P=_.seg.myFill.above!==_.seg.myFill.below,E?_.seg.myFill.below=E.seg.myFill.above:_.seg.myFill.below=m,P?_.seg.myFill.above=!_.seg.myFill.below:_.seg.myFill.above=_.seg.myFill.below}else if(_.seg.otherFill===null){var F;E?_.primary===E.primary?F=E.seg.otherFill.above:F=E.seg.myFill.above:F=_.primary?l:m,_.seg.otherFill={above:F,below:F}}e&&e.status(_.seg,L?L.seg:!1,E?E.seg:!1),_.other.status=h.insert(y.node({ev:_}))}else{var I=_.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(x.exists(I.prev)&&x.exists(I.next)&&w(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!_.primary){var D=_.seg.myFill;_.seg.myFill=_.seg.otherFill,_.seg.otherFill=D}p.push(_.seg)}n.getHead().remove()}return e&&e.done(),p}return A?{addRegion:function(m){for(var l,x=m[m.length-1],u=0;u<m.length;u++){l=x,x=m[u];var M=T.pointsCompare(l,x);M!==0&&b(a(M<0?l:x,M<0?x:l),!0)}},calculate:function(m){return f(m,!1)}}:{calculate:function(m,l,x,u){return m.forEach(function(M){b(i(M.start,M.end,M),!0)}),x.forEach(function(M){b(i(M.start,M.end,M),!1)}),f(l,u)}}}N.exports=c},{"./linked-list":260}],260:[function(t,N,V){var y={create:function(){var c={root:{root:!0,next:null},exists:function(A){return!(A===null||A===c.root)},isEmpty:function(){return c.root.next===null},getHead:function(){return c.root.next},insertBefore:function(A,T){for(var e=c.root,a=c.root.next;a!==null;){if(T(a)){A.prev=a.prev,A.next=a,a.prev.next=A,a.prev=A;return}e=a,a=a.next}e.next=A,A.prev=e,A.next=null},findTransition:function(A){for(var T=c.root,e=c.root.next;e!==null&&!A(e);)T=e,e=e.next;return{before:T===c.root?null:T,after:e,insert:function(a){return a.prev=T,a.next=e,T.next=a,e!==null&&(e.prev=a),a}}}};return c},node:function(c){return c.prev=null,c.next=null,c.remove=function(){c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.prev=null,c.next=null},c}};N.exports=y},{}],261:[function(t,N,V){function y(c,A,T){var e=[],a=[];return c.forEach(function(i){var n=i.start,r=i.end;if(A.pointsSame(n,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}T&&T.chainStart(i);var v={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},o=v;function b(F,I,D){return o.index=F,o.matches_head=I,o.matches_pt1=D,o===v?(o=s,!1):(o=null,!0)}for(var g=0;g<e.length;g++){var d=e[g],f=d[0];d[1];var m=d[d.length-1];if(d[d.length-2],A.pointsSame(f,n)){if(b(g,!0,!0))break}else if(A.pointsSame(f,r)){if(b(g,!0,!1))break}else if(A.pointsSame(m,n)){if(b(g,!1,!0))break}else if(A.pointsSame(m,r)&&b(g,!1,!1))break}if(o===v){e.push([n,r]),T&&T.chainNew(n,r);return}if(o===s){T&&T.chainMatch(v.index);var l=v.index,x=v.matches_pt1?r:n,u=v.matches_head,d=e[l],M=u?d[0]:d[d.length-1],w=u?d[1]:d[d.length-2],p=u?d[d.length-1]:d[0],_=u?d[d.length-2]:d[1];if(A.pointsCollinear(w,M,x)&&(u?(T&&T.chainRemoveHead(v.index,x),d.shift()):(T&&T.chainRemoveTail(v.index,x),d.pop()),M=w),A.pointsSame(p,x)){e.splice(l,1),A.pointsCollinear(_,p,M)&&(u?(T&&T.chainRemoveTail(v.index,M),d.pop()):(T&&T.chainRemoveHead(v.index,M),d.shift())),T&&T.chainClose(v.index),a.push(d);return}u?(T&&T.chainAddHead(v.index,x),d.unshift(x)):(T&&T.chainAddTail(v.index,x),d.push(x));return}function h(F){T&&T.chainReverse(F),e[F].reverse()}function L(F,I){var D=e[F],R=e[I],O=D[D.length-1],z=D[D.length-2],G=R[0],Y=R[1];A.pointsCollinear(z,O,G)&&(T&&T.chainRemoveTail(F,O),D.pop(),O=z),A.pointsCollinear(O,G,Y)&&(T&&T.chainRemoveHead(I,G),R.shift()),T&&T.chainJoin(F,I),e[F]=D.concat(R),e.splice(I,1)}var E=v.index,S=s.index;T&&T.chainConnect(E,S);var P=e[E].length<e[S].length;v.matches_head?s.matches_head?P?(h(E),L(E,S)):(h(S),L(S,E)):L(S,E):s.matches_head?L(E,S):P?(h(E),L(S,E)):(h(S),L(E,S))}),a}N.exports=y},{}],262:[function(t,N,V){function y(A,T,e){var a=[];return A.forEach(function(i){var n=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);T[n]!==0&&a.push({id:e?e.segmentId():-1,start:i.start,end:i.end,myFill:{above:T[n]===1,below:T[n]===2},otherFill:null})}),e&&e.selected(a),a}var c={union:function(A,T){return y(A,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(A,T){return y(A,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(A,T){return y(A,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(A,T){return y(A,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(A,T){return y(A,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}};N.exports=c},{}],263:[function(t,N,V){var y=t("stream").Transform,c=t("stream-parser");function A(){y.call(this,{readableObjectMode:!0})}A.prototype=Object.create(y.prototype),A.prototype.constructor=A,c(A.prototype),V.ParserStream=A,V.sliceEq=function(e,a,i){for(var n=a,r=0;r<i.length;)if(e[n++]!==i[r++])return!1;return!0},V.str2arr=function(e,a){var i=[],n=0;if(a&&a==="hex")for(;n<e.length;)i.push(parseInt(e.slice(n,n+2),16)),n+=2;else for(;n<e.length;n++)i.push(e.charCodeAt(n)&255);return i},V.readUInt16LE=function(e,a){return e[a]|e[a+1]<<8},V.readUInt16BE=function(e,a){return e[a+1]|e[a]<<8},V.readUInt32LE=function(e,a){return e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]*16777216},V.readUInt32BE=function(e,a){return e[a+3]|e[a+2]<<8|e[a+1]<<16|e[a]*16777216};function T(e,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,a&&(this.code=a),i&&(this.statusCode=i)}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,V.ProbeError=T},{stream:286,"stream-parser":302}],264:[function(t,N,V){function y(T,e){var a=new Error(T);return a.code=e,a}function c(T){try{return decodeURIComponent(escape(T))}catch{return T}}function A(T,e,a){this.input=T.subarray(e,a),this.start=e;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw y("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}A.prototype.each=function(T){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,T)}},A.prototype.read_uint16=function(T){var e=this.input;if(T+2>e.length)throw y("unexpected EOF","EBADDATA");return this.big_endian?e[T]*256+e[T+1]:e[T]+e[T+1]*256},A.prototype.read_uint32=function(T){var e=this.input;if(T+4>e.length)throw y("unexpected EOF","EBADDATA");return this.big_endian?e[T]*16777216+e[T+1]*65536+e[T+2]*256+e[T+3]:e[T]+e[T+1]*256+e[T+2]*65536+e[T+3]*16777216},A.prototype.is_subifd_link=function(T,e){return T===0&&e===34665||T===0&&e===34853||T===34665&&e===40965},A.prototype.exif_format_length=function(T){switch(T){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},A.prototype.exif_format_read=function(T,e){var a;switch(T){case 1:case 2:return a=this.input[e],a;case 6:return a=this.input[e],a|(a&128)*33554430;case 3:return a=this.read_uint16(e),a;case 8:return a=this.read_uint16(e),a|(a&32768)*131070;case 4:return a=this.read_uint32(e),a;case 9:return a=this.read_uint32(e),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},A.prototype.scan_ifd=function(T,e,a){var i=this.read_uint16(e);e+=2;for(var n=0;n<i;n++){var r=this.read_uint16(e),v=this.read_uint16(e+2),s=this.read_uint32(e+4),o=this.exif_format_length(v),b=s*o,g=b<=4?e+8:this.read_uint32(e+8),d=!1;if(g+b>this.input.length)throw y("unexpected EOF","EBADDATA");for(var f=[],m=g,l=0;l<s;l++,m+=o){var x=this.exif_format_read(v,m);if(x===null){f=null;break}f.push(x)}Array.isArray(f)&&v===2&&(f=c(String.fromCharCode.apply(null,f)),f&&f[f.length-1]==="\0"&&(f=f.slice(0,-1))),this.is_subifd_link(T,r)&&Array.isArray(f)&&Number.isInteger(f[0])&&f[0]>0&&(this.ifds_to_read.push({id:r,offset:f[0]}),d=!0);var u={is_big_endian:this.big_endian,ifd:T,tag:r,format:v,count:s,entry_offset:e+this.start,data_length:b,data_offset:g+this.start,value:f,is_subifd_link:d};if(a(u)===!1){this.aborted=!0;return}e+=12}T===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},N.exports.ExifParser=A,N.exports.get_orientation=function(T){var e=0;try{return new A(T,0,T.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return e=a.value[0],!1}),e}catch{return-1}}},{}],265:[function(t,N,V){var y=t("./common").readUInt16BE,c=t("./common").readUInt32BE;function A(s,o){if(s.length<4+o)return null;var b=c(s,o);return s.length<b+o||b<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(o+4,o+8)),data:s.slice(o+8,o+b),end:o+b}}N.exports.unbox=A;function T(s,o){for(var b=0;;){var g=A(s,b);if(!g)break;switch(g.boxtype){case"ispe":o.sizes.push({width:c(g.data,4),height:c(g.data,8)});break;case"irot":o.transforms.push({type:"irot",value:g.data[0]&3});break;case"imir":o.transforms.push({type:"imir",value:g.data[0]&1});break}b=g.end}}function e(s,o,b){for(var g=0,d=0;d<b;d++)g=g*256+(s[o+d]||0);return g}function a(s,o){for(var b=s[4]>>4&15,g=s[4]&15,d=s[5]>>4&15,f=y(s,6),m=8,l=0;l<f;l++){var x=y(s,m);m+=2;var u=y(s,m);m+=2;var M=e(s,m,d);m+=d;var w=y(s,m);if(m+=2,u===0&&w===1){var p=e(s,m,b),_=e(s,m+b,g);o.item_loc[x]={length:_,offset:p+M}}m+=w*(b+g)}}function i(s,o){for(var b=y(s,4),g=6,d=0;d<b;d++){var f=A(s,g);if(!f)break;if(f.boxtype==="infe"){for(var m=y(f.data,4),l="",x=8;x<f.data.length&&f.data[x];x++)l+=String.fromCharCode(f.data[x]);o.item_inf[l]=m}g=f.end}}function n(s,o){for(var b=0;;){var g=A(s,b);if(!g)break;g.boxtype==="ipco"&&T(g.data,o),b=g.end}}function r(s,o){for(var b=4;;){var g=A(s,b);if(!g)break;g.boxtype==="iprp"&&n(g.data,o),g.boxtype==="iloc"&&a(g.data,o),g.boxtype==="iinf"&&i(g.data,o),b=g.end}}function v(s){var o=s.reduce(function(d,f){return d.width>f.width||d.width===f.width&&d.height>f.height?d:f}),b=s.reduce(function(d,f){return d.height>f.height||d.height===f.height&&d.width>f.width?d:f}),g;return o.width>b.height||o.width===b.height&&o.height>b.width?g=o:g=b,g}N.exports.readSizeFromMeta=function(s){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(s,o),!!o.sizes.length){var b=v(o.sizes),g=1;o.transforms.forEach(function(f){var m={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},l={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(f.type==="imir"&&(f.value===0?g=l[g]:(g=l[g],g=m[g],g=m[g])),f.type==="irot")for(var x=0;x<f.value;x++)g=m[g]});var d=null;return o.item_inf.Exif&&(d=o.item_loc[o.item_inf.Exif]),{width:b.width,height:b.height,orientation:o.transforms.length?g:null,variants:o.sizes,exif_location:d}}},N.exports.getMimeType=function(s){var o=String.fromCharCode.apply(null,s.slice(0,4)),b={};b[o]=!0;for(var g=8;g<s.length;g+=4)b[String.fromCharCode.apply(null,s.slice(g,g+4))]=!0;if(!(!b.mif1&&!b.msf1&&!b.miaf))return o==="avif"||o==="avis"||o==="avio"?{type:"avif",mime:"image/avif"}:o==="heic"||o==="heix"?{type:"heic",mime:"image/heic"}:o==="hevc"||o==="hevx"?{type:"heic",mime:"image/heic-sequence"}:b.avif||b.avis?{type:"avif",mime:"image/avif"}:b.heic||b.heix||b.hevc||b.hevx||b.heis?b.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(t,N,V){var y=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt32BE,T=t("../miaf_utils"),e=t("../exif_utils"),a=y("ftyp");N.exports=function(i){if(!!c(i,4,a)){var n=T.unbox(i,0);if(!!n){var r=T.getMimeType(n.data);if(!!r){for(var v,s=n.end;;){var o=T.unbox(i,s);if(!o)break;if(s=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){v=o.data;break}}if(!!v){var b=T.readSizeFromMeta(v);if(!!b){var g={width:b.width,height:b.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(b.variants.length>1&&(g.variants=b.variants),b.orientation&&(g.orientation=b.orientation),b.exif_location&&b.exif_location.offset+b.exif_location.length<=i.length){var d=A(i,b.exif_location.offset),f=i.slice(b.exif_location.offset+d+4,b.exif_location.offset+b.exif_location.length),m=e.get_orientation(f);m>0&&(g.orientation=m)}return g}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(t,N,V){var y=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt16LE,T=y("BM");N.exports=function(e){if(!(e.length<26)&&!!c(e,0,T))return{width:A(e,18),height:A(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(t,N,V){var y=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt16LE,T=y("GIF87a"),e=y("GIF89a");N.exports=function(a){if(!(a.length<10)&&!(!c(a,0,T)&&!c(a,0,e)))return{width:A(a,6),height:A(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(t,N,V){var y=t("../common").readUInt16LE,c=0,A=1,T=16;N.exports=function(e){var a=y(e,0),i=y(e,2),n=y(e,4);if(!(a!==c||i!==A||!n)){for(var r=[],v={width:0,height:0},s=0;s<n;s++){var o=e[6+T*s]||256,b=e[6+T*s+1]||256,g={width:o,height:b};r.push(g),(o>v.width||b>v.height)&&(v=g)}return{width:v.width,height:v.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(t,N,V){var y=t("../common").readUInt16BE,c=t("../common").str2arr,A=t("../common").sliceEq,T=t("../exif_utils"),e=c("Exif\0\0");N.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var i=2;;){for(;;){if(a.length-i<2)return;if(a[i++]===255)break}for(var n=a[i++],r;n===255;)n=a[i++];if(208<=n&&n<=217||n===1)r=0;else if(192<=n&&n<=254){if(a.length-i<2)return;r=y(a,i)-2,i+=2}else return;if(n===217||n===218)return;var v;if(n===225&&r>=10&&A(a,i,e)&&(v=T.get_orientation(a.slice(i+6,i+r))),r>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(a.length-i<r)return;var s={width:y(a,i+3),height:y(a,i+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return v>0&&(s.orientation=v),s}i+=r}}},{"../common":263,"../exif_utils":264}],271:[function(t,N,V){var y=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt32BE,T=y(`\x89PNG\r

`),e=y("IHDR");N.exports=function(a){if(!(a.length<24)&&!!c(a,0,T)&&!!c(a,12,e))return{width:A(a,16),height:A(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(t,N,V){var y=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt32BE,T=y("8BPS\0");N.exports=function(e){if(!(e.length<6+16)&&!!c(e,0,T))return{width:A(e,6+12),height:A(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(t,N,V){function y(o){return o===32||o===9||o===13||o===10}function c(o){return typeof o=="number"&&isFinite(o)&&o>0}function A(o){var b=0,g=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(b=3);b<g&&y(o[b]);)b++;return b===g?!1:o[b]===60}var T=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function v(o){var b=o.match(a),g=o.match(i),d=o.match(n);return{width:b&&(b[1]||b[2]),height:g&&(g[1]||g[2]),viewbox:d&&(d[1]||d[2])}}function s(o){return r.test(o)?o.match(r)[0]:"px"}N.exports=function(o){if(!!A(o)){for(var b="",g=0;g<o.length;g++)b+=String.fromCharCode(o[g]);var d=(b.match(T)||[""])[0];if(!!e.test(d)){var f=v(d),m=parseFloat(f.width),l=parseFloat(f.height);if(f.width&&f.height)return!c(m)||!c(l)?void 0:{width:m,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(f.width),hUnits:s(f.height)};var x=(f.viewbox||"").split(" "),u={width:x[2],height:x[3]},M=parseFloat(u.width),w=parseFloat(u.height);if(!(!c(M)||!c(w))&&s(u.width)===s(u.height)){var p=M/w;return f.width?c(m)?{width:m,height:m/p,type:"svg",mime:"image/svg+xml",wUnits:s(f.width),hUnits:s(f.width)}:void 0:f.height?c(l)?{width:l*p,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(f.height),hUnits:s(f.height)}:void 0:{width:M,height:w,type:"svg",mime:"image/svg+xml",wUnits:s(u.width),hUnits:s(u.height)}}}}}},{}],274:[function(t,N,V){var y=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt16LE,T=t("../common").readUInt16BE,e=t("../common").readUInt32LE,a=t("../common").readUInt32BE,i=y("II*\0"),n=y("MM\0*");function r(o,b,g){return g?T(o,b):A(o,b)}function v(o,b,g){return g?a(o,b):e(o,b)}function s(o,b,g){var d=r(o,b+2,g),f=v(o,b+4,g);return f!==1||d!==3&&d!==4?null:d===3?r(o,b+8,g):v(o,b+8,g)}N.exports=function(o){if(!(o.length<8)&&!(!c(o,0,i)&&!c(o,0,n))){var b=o[0]===77,g=v(o,4,b)-8;if(!(g<0)){var d=g+8;if(!(o.length-d<2)){var f=r(o,d+0,b)*12;if(!(f<=0)&&(d+=2,!(o.length-d<f))){var m,l,x,u;for(m=0;m<f;m+=12)u=r(o,d+m,b),u===256?l=s(o,d+m,b):u===257&&(x=s(o,d+m,b));if(l&&x)return{width:l,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":263}],275:[function(t,N,V){var y=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt16LE,T=t("../common").readUInt32LE,e=t("../exif_utils"),a=y("RIFF"),i=y("WEBP");function n(s,o){if(!(s[o+3]!==157||s[o+4]!==1||s[o+5]!==42))return{width:A(s,o+6)&16383,height:A(s,o+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(s,o){if(s[o]===47){var b=T(s,o+1);return{width:(b&16383)+1,height:(b>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function v(s,o){return{width:(s[o+6]<<16|s[o+5]<<8|s[o+4])+1,height:(s[o+9]<<o|s[o+8]<<8|s[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}N.exports=function(s){if(!(s.length<16)&&!(!c(s,0,a)&&!c(s,8,i))){var o=12,b=null,g=0,d=T(s,4)+8;if(!(d>s.length)){for(;o+8<d;){if(s[o]===0){o++;continue}var f=String.fromCharCode.apply(null,s.slice(o,o+4)),m=T(s,o+4);f==="VP8 "&&m>=10?b=b||n(s,o+8):f==="VP8L"&&m>=9?b=b||r(s,o+8):f==="VP8X"&&m>=10?b=b||v(s,o+8):f==="EXIF"&&(g=e.get_orientation(s.slice(o+8,o+8+m)),o=1/0),o+=8+m}if(!!b)return g>0&&(b.orientation=g),b}}}},{"../common":263,"../exif_utils":264}],276:[function(t,N,V){N.exports={avif:t("./parse_sync/avif"),bmp:t("./parse_sync/bmp"),gif:t("./parse_sync/gif"),ico:t("./parse_sync/ico"),jpeg:t("./parse_sync/jpeg"),png:t("./parse_sync/png"),psd:t("./parse_sync/psd"),svg:t("./parse_sync/svg"),tiff:t("./parse_sync/tiff"),webp:t("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(t,N,V){var y=t("./lib/parsers_sync");function c(A){for(var T=Object.keys(y),e=0;e<T.length;e++){var a=y[T[e]](A);if(a)return a}return null}N.exports=function(T){return c(T)},N.exports.parsers=y},{"./lib/parsers_sync":276}],278:[function(t,N,V){var y=N.exports={},c,A;function T(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=T}catch{c=T}try{typeof clearTimeout=="function"?A=clearTimeout:A=e}catch{A=e}})();function a(f){if(c===setTimeout)return setTimeout(f,0);if((c===T||!c)&&setTimeout)return c=setTimeout,setTimeout(f,0);try{return c(f,0)}catch{try{return c.call(null,f,0)}catch{return c.call(this,f,0)}}}function i(f){if(A===clearTimeout)return clearTimeout(f);if((A===e||!A)&&clearTimeout)return A=clearTimeout,clearTimeout(f);try{return A(f)}catch{try{return A.call(null,f)}catch{return A.call(this,f)}}}var n=[],r=!1,v,s=-1;function o(){!r||!v||(r=!1,v.length?n=v.concat(n):s=-1,n.length&&b())}function b(){if(!r){var f=a(o);r=!0;for(var m=n.length;m;){for(v=n,n=[];++s<m;)v&&v[s].run();s=-1,m=n.length}v=null,r=!1,i(f)}}y.nextTick=function(f){var m=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)m[l-1]=arguments[l];n.push(new g(f,m)),n.length===1&&!r&&a(b)};function g(f,m){this.fun=f,this.array=m}g.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={};function d(){}y.on=d,y.addListener=d,y.once=d,y.off=d,y.removeListener=d,y.removeAllListeners=d,y.emit=d,y.prependListener=d,y.prependOnceListener=d,y.listeners=function(f){return[]},y.binding=function(f){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(f){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}},{}],279:[function(t,N,V){(function(y){(function(){for(var c=t("performance-now"),A=typeof window>"u"?y:window,T=["moz","webkit"],e="AnimationFrame",a=A["request"+e],i=A["cancel"+e]||A["cancelRequest"+e],n=0;!a&&n<T.length;n++)a=A[T[n]+"Request"+e],i=A[T[n]+"Cancel"+e]||A[T[n]+"CancelRequest"+e];if(!a||!i){var r=0,v=0,s=[],o=1e3/60;a=function(b){if(s.length===0){var g=c(),d=Math.max(0,o-(g-r));r=d+g,setTimeout(function(){var f=s.slice(0);s.length=0;for(var m=0;m<f.length;m++)if(!f[m].cancelled)try{f[m].callback(r)}catch(l){setTimeout(function(){throw l},0)}},Math.round(d))}return s.push({handle:++v,callback:b,cancelled:!1}),v},i=function(b){for(var g=0;g<s.length;g++)s[g].handle===b&&(s[g].cancelled=!0)}}N.exports=function(b){return a.call(A,b)},N.exports.cancel=function(){i.apply(A,arguments)},N.exports.polyfill=function(b){b||(b=A),b.requestAnimationFrame=a,b.cancelAnimationFrame=i}}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(t,N,V){var y=t("array-bounds"),c=t("color-normalize"),A=t("update-diff"),T=t("pick-by-alias"),e=t("object-assign"),a=t("flatten-vertex-data"),i=t("to-float32"),n=i.float32,r=i.fract32;N.exports=s;var v=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function s(o,b){if(typeof o=="function"?(b||(b={}),b.regl=o):b=o,b.length&&(b.positions=b),o=b.regl,!o.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var g=o._gl,d,f,m,l,x,u,M={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return l=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=o.buffer({usage:"static",type:"float",data:v}),L(b),d=o({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(S,P){return[P.viewport.x,P.viewport.y,S.viewportWidth,S.viewportHeight]}},attributes:{color:{buffer:l,offset:function(S,P){return P.offset*4},divisor:1},position:{buffer:f,offset:function(S,P){return P.offset*8},divisor:1},positionFract:{buffer:m,offset:function(S,P){return P.offset*8},divisor:1},error:{buffer:x,offset:function(S,P){return P.offset*16},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:v.length}),e(p,{update:L,draw:_,destroy:E,regl:o,gl:g,canvas:g.canvas,groups:w}),p;function p(S){S?L(S):S===null&&E(),_()}function _(S){if(typeof S=="number")return h(S);S&&!Array.isArray(S)&&(S=[S]),o._refresh(),w.forEach(function(P,F){if(!!P){if(S&&(S[F]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}h(F)}})}function h(S){typeof S=="number"&&(S=w[S]),S!=null&&(!(S&&S.count&&S.color&&S.opacity&&S.positions&&S.positions.length>1)||(S.scaleRatio=[S.scale[0]*S.viewport.width,S.scale[1]*S.viewport.height],d(S),S.after&&S.after(S)))}function L(S){if(!!S){S.length!=null?typeof S[0]=="number"&&(S=[{positions:S}]):Array.isArray(S)||(S=[S]);var P=0,F=0;if(p.groups=w=S.map(function(Y,ee){var j=w[ee];if(Y)typeof Y=="function"?Y={after:Y}:typeof Y[0]=="number"&&(Y={positions:Y});else return j;return Y=T(Y,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),j||(w[ee]=j={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Y=e({},M,Y)),A(j,Y,[{lineWidth:function(X){return+X*.5},capSize:function(X){return+X*.5},opacity:parseFloat,errors:function(X){return X=a(X),F+=X.length,X},positions:function(X,ae){return X=a(X,"float64"),ae.count=Math.floor(X.length/2),ae.bounds=y(X,2),ae.offset=P,P+=ae.count,X}},{color:function(X,ae){var he=ae.count;if(X||(X="transparent"),!Array.isArray(X)||typeof X[0]=="number"){var K=X;X=Array(he);for(var J=0;J<he;J++)X[J]=K}if(X.length<he)throw Error("Not enough colors");for(var U=new Uint8Array(he*4),H=0;H<he;H++){var q=c(X[H],"uint8");U.set(q,H*4)}return U},range:function(X,ae,he){var K=ae.bounds;return X||(X=K),ae.scale=[1/(X[2]-X[0]),1/(X[3]-X[1])],ae.translate=[-X[0],-X[1]],ae.scaleFract=r(ae.scale),ae.translateFract=r(ae.translate),X},viewport:function(X){var ae;return Array.isArray(X)?ae={x:X[0],y:X[1],width:X[2]-X[0],height:X[3]-X[1]}:X?(ae={x:X.x||X.left||0,y:X.y||X.top||0},X.right?ae.width=X.right-ae.x:ae.width=X.w||X.width||0,X.bottom?ae.height=X.bottom-ae.y:ae.height=X.h||X.height||0):ae={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},ae}}]),j}),P||F){var I=w.reduce(function(Y,ee,j){return Y+(ee?ee.count:0)},0),D=new Float64Array(I*2),R=new Uint8Array(I*4),O=new Float32Array(I*4);w.forEach(function(Y,ee){if(!!Y){var j=Y.positions,X=Y.count,ae=Y.offset,he=Y.color,K=Y.errors;!X||(R.set(he,ae*4),O.set(K,ae*4),D.set(j,ae*2))}});var z=n(D);f(z);var G=r(D,z);m(G),l(R),x(O)}}}function E(){f.destroy(),m.destroy(),l.destroy(),x.destroy(),u.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(t,N,V){var y=t("color-normalize"),c=t("array-bounds"),A=t("object-assign"),T=t("glslify"),e=t("pick-by-alias"),a=t("flatten-vertex-data"),i=t("earcut"),n=t("array-normalize"),r=t("to-float32"),v=r.float32,s=r.fract32,o=t("es6-weak-map"),b=t("parse-rect"),g=t("array-find-index");N.exports=d;function d(f,m){if(!(this instanceof d))return new d(f,m);if(typeof f=="function"?(m||(m={}),m.regl=f):m=f,m.length&&(m.positions=m),f=m.regl,!f.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=d.shaders.has(f)?d.shaders.get(f):d.shaders.set(f,d.createShaders(f)).get(f),this.update(m)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new o,d.createShaders=function(f){var m=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,p){return p.join==="round"?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(w,p){return[p.viewport.x,p.viewport.y,w.viewportWidth,w.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,p){return!p.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},x=f(A({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},l)),u;try{u=f(A({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},l))}catch{u=x}var M=f({primitive:"triangle",elements:function(w,p){return p.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(w,p){return[p.viewport.x,p.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:l.blend,depth:{enable:!1},scissor:l.scissor,stencil:l.stencil,viewport:l.viewport});return{fill:M,rect:x,miter:u}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var f,m=[],l=arguments.length;l--;)m[l]=arguments[l];m.length&&(f=this).update.apply(f,m),this.draw()},d.prototype.draw=function(){for(var f=this,m=[],l=arguments.length;l--;)m[l]=arguments[l];return(m.length?m:this.passes).forEach(function(x,u){var M;if(x&&Array.isArray(x))return(M=f).draw.apply(M,x);typeof x=="number"&&(x=f.passes[x]),x&&x.count>1&&x.opacity&&(f.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&f.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>d.precisionThreshold||x.scale[1]*x.viewport.height>d.precisionThreshold||x.join==="rect"||!x.join&&(x.thickness<=2||x.count>=d.maxPoints)?f.shaders.rect(x):f.shaders.miter(x)))}),this},d.prototype.update=function(f){var m=this;if(!!f){f.length!=null?typeof f[0]=="number"&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var l=this,x=l.regl,u=l.gl;if(f.forEach(function(h,L){var E=m.passes[L];if(h!==void 0){if(h===null){m.passes[L]=null;return}if(typeof h[0]=="number"&&(h={positions:h}),h=e(h,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),E||(m.passes[L]=E={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},h=A({},d.defaults,h)),h.thickness!=null&&(E.thickness=parseFloat(h.thickness)),h.opacity!=null&&(E.opacity=parseFloat(h.opacity)),h.miterLimit!=null&&(E.miterLimit=parseFloat(h.miterLimit)),h.overlay!=null&&(E.overlay=!!h.overlay,L<d.maxLines&&(E.depth=2*(d.maxLines-1-L%d.maxLines)/d.maxLines-1)),h.join!=null&&(E.join=h.join),h.hole!=null&&(E.hole=h.hole),h.fill!=null&&(E.fill=h.fill?y(h.fill,"uint8"):null),h.viewport!=null&&(E.viewport=b(h.viewport)),E.viewport||(E.viewport=b([u.drawingBufferWidth,u.drawingBufferHeight])),h.close!=null&&(E.close=h.close),h.positions===null&&(h.positions=[]),h.positions){var S,P;if(h.positions.x&&h.positions.y){var F=h.positions.x,I=h.positions.y;P=E.count=Math.max(F.length,I.length),S=new Float64Array(P*2);for(var D=0;D<P;D++)S[D*2]=F[D],S[D*2+1]=I[D]}else S=a(h.positions,"float64"),P=E.count=Math.floor(S.length/2);var R=E.bounds=c(S,2);if(E.fill){for(var O=[],z={},G=0,Y=0,ee=0,j=E.count;Y<j;Y++){var X=S[Y*2],ae=S[Y*2+1];isNaN(X)||isNaN(ae)||X==null||ae==null?(X=S[G*2],ae=S[G*2+1],z[Y]=G):G=Y,O[ee++]=X,O[ee++]=ae}if(h.splitNull){E.count-1 in z||(z[E.count]=E.count-1);var he=Object.keys(z).map(Number).sort(function(Xe,it){return Xe-it}),K=[],J=0,U=E.hole!=null?E.hole[0]:null;if(U!=null){var H=g(he,function(Xe){return Xe>=U});he=he.slice(0,H),he.push(U)}for(var q=function(Xe){var it=O.slice(J*2,he[Xe]*2).concat(U?O.slice(U*2):[]),Ye=(E.hole||[]).map(function(Ge){return Ge-U+(he[Xe]-J)}),Ee=i(it,Ye);Ee=Ee.map(function(Ge){return Ge+J+(Ge+J<he[Xe]?0:U-he[Xe])}),K.push.apply(K,Ee),J=he[Xe]+1},re=0;re<he.length;re++)q(re);for(var Z=0,Q=K.length;Z<Q;Z++)z[K[Z]]!=null&&(K[Z]=z[K[Z]]);E.triangles=K}else{for(var ie=i(O,E.hole||[]),oe=0,ne=ie.length;oe<ne;oe++)z[ie[oe]]!=null&&(ie[oe]=z[ie[oe]]);E.triangles=ie}}var le=new Float64Array(S);n(le,2,R);var _e=new Float64Array(P*2+6);E.close?S[0]===S[P*2-2]&&S[1]===S[P*2-1]?(_e[0]=le[P*2-4],_e[1]=le[P*2-3]):(_e[0]=le[P*2-2],_e[1]=le[P*2-1]):(_e[0]=le[0],_e[1]=le[1]),_e.set(le,2),E.close?S[0]===S[P*2-2]&&S[1]===S[P*2-1]?(_e[P*2+2]=le[2],_e[P*2+3]=le[3],E.count-=1):(_e[P*2+2]=le[0],_e[P*2+3]=le[1],_e[P*2+4]=le[2],_e[P*2+5]=le[3]):(_e[P*2+2]=le[P*2-2],_e[P*2+3]=le[P*2-1],_e[P*2+4]=le[P*2-2],_e[P*2+5]=le[P*2-1]);var fe=v(_e);E.positionBuffer(fe);var ye=s(_e,fe);E.positionFractBuffer(ye)}if(h.range?E.range=h.range:E.range||(E.range=E.bounds),(h.range||h.positions)&&E.count){var xe=E.bounds,me=xe[2]-xe[0],be=xe[3]-xe[1],ke=E.range[2]-E.range[0],De=E.range[3]-E.range[1];E.scale=[me/ke,be/De],E.translate=[-E.range[0]/ke+xe[0]/ke||0,-E.range[1]/De+xe[1]/De||0],E.scaleFract=s(E.scale),E.translateFract=s(E.translate)}if(h.dashes){var He=0,Ae;if(!h.dashes||h.dashes.length<2)He=1,Ae=new Uint8Array([255,255,255,255,255,255,255,255]);else{He=0;for(var Le=0;Le<h.dashes.length;++Le)He+=h.dashes[Le];Ae=new Uint8Array(He*d.dashMult);for(var Ze=0,We=255,ze=0;ze<2;ze++)for(var Ie=0;Ie<h.dashes.length;++Ie){for(var Ve=0,dt=h.dashes[Ie]*d.dashMult*.5;Ve<dt;++Ve)Ae[Ze++]=We;We^=255}}E.dashLength=He,E.dashTexture({channels:1,data:Ae,width:Ae.length,height:1,mag:"linear",min:"linear"},0,0)}if(h.color){var Ft=E.count,Qt=h.color;Qt||(Qt="transparent");var Ot=new Uint8Array(Ft*4+4);if(!Array.isArray(Qt)||typeof Qt[0]=="number")for(var Ct=y(Qt,"uint8"),jt=0;jt<Ft+1;jt++)Ot.set(Ct,jt*4);else{for(var Nt=0;Nt<Ft;Nt++){var Lt=y(Qt[Nt],"uint8");Ot.set(Lt,Nt*4)}Ot.set(y(Qt[0],"uint8"),Ft*4)}E.colorBuffer({usage:"dynamic",type:"uint8",data:Ot})}}}),f.length<this.passes.length){for(var M=f.length;M<this.passes.length;M++){var w=this.passes[M];!w||(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=f.length}for(var p=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&p.push(this.passes[_]);return this.passes=p,this}},d.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(t,N,V){function y(E,S){return T(E)||a(E,S)||i(E,S)||v()}function c(E){return A(E)||e(E)||i(E)||r()}function A(E){if(Array.isArray(E))return n(E)}function T(E){if(Array.isArray(E))return E}function e(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}function a(E,S){var P=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(P!=null){var F=[],I=!0,D=!1,R,O;try{for(P=P.call(E);!(I=(R=P.next()).done)&&(F.push(R.value),!(S&&F.length===S));I=!0);}catch(z){D=!0,O=z}finally{try{!I&&P.return!=null&&P.return()}finally{if(D)throw O}}return F}}function i(E,S){if(!!E){if(typeof E=="string")return n(E,S);var P=Object.prototype.toString.call(E).slice(8,-1);if(P==="Object"&&E.constructor&&(P=E.constructor.name),P==="Map"||P==="Set")return Array.from(E);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return n(E,S)}}function n(E,S){(S==null||S>E.length)&&(S=E.length);for(var P=0,F=new Array(S);P<S;P++)F[P]=E[P];return F}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=t("color-normalize"),o=t("array-bounds"),b=t("color-id"),g=t("@plotly/point-cluster"),d=t("object-assign"),f=t("glslify"),m=t("pick-by-alias"),l=t("update-diff"),x=t("flatten-vertex-data"),u=t("is-iexplorer"),M=t("to-float32"),w=t("parse-rect"),p=_;function _(E,S){var P=this;if(!(this instanceof _))return new _(E,S);typeof E=="function"?(S||(S={}),S.regl=E):(S=E,E=null),S&&S.length&&(S.positions=S),E=S.regl;var F=E._gl,I,D=[],R={},O=[],z=[null],G=[null],Y=255,ee=100;this.tooManyColors=u,I=E.texture({data:new Uint8Array(Y*4),width:Y,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),d(this,{regl:E,gl:F,groups:O,markerCache:G,markerTextures:z,palette:D,paletteIds:R,paletteTexture:I,maxColors:Y,maxSize:ee,canvas:F.canvas}),this.update(S);var j={uniforms:{constPointSize:!!S.constPointSize,opacity:E.prop("opacity"),paletteSize:function(K,J){return[P.tooManyColors?0:Y,I.height]},pixelRatio:E.context("pixelRatio"),scale:E.prop("scale"),scaleFract:E.prop("scaleFract"),translate:E.prop("translate"),translateFract:E.prop("translateFract"),markerTexture:E.prop("markerTexture"),paletteTexture:I},attributes:{x:function(K,J){return J.xAttr||{buffer:J.positionBuffer,stride:8,offset:0}},y:function(K,J){return J.yAttr||{buffer:J.positionBuffer,stride:8,offset:4}},xFract:function(K,J){return J.xAttr?{constant:[0,0]}:{buffer:J.positionFractBuffer,stride:8,offset:0}},yFract:function(K,J){return J.yAttr?{constant:[0,0]}:{buffer:J.positionFractBuffer,stride:8,offset:4}},size:function(K,J){return J.size.length?{buffer:J.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(J.size*255/P.maxSize)]}},borderSize:function(K,J){return J.borderSize.length?{buffer:J.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(J.borderSize*255/P.maxSize)]}},colorId:function(K,J){return J.color.length?{buffer:J.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?D.slice(J.color*4,J.color*4+4):[J.color]}},borderColorId:function(K,J){return J.borderColor.length?{buffer:J.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?D.slice(J.borderColor*4,J.borderColor*4+4):[J.borderColor]}},isActive:function(K,J){return J.activation===!0?{constant:[1]}:J.activation?J.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:E.prop("viewport")},viewport:E.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:E.prop("elements"),count:E.prop("count"),offset:E.prop("offset"),primitive:"points"},X=d({},j);X.frag=f([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),X.vert=f([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=E(X);var ae=d({},j);ae.frag=f([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),ae.vert=f([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),u&&(ae.frag=ae.frag.replace("smoothstep","smoothStep"),X.frag=X.frag.replace("smoothstep","smoothStep")),this.drawCircle=E(ae)}_.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},_.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},_.prototype.draw=function(){for(var E=this,S=arguments.length,P=new Array(S),F=0;F<S;F++)P[F]=arguments[F];var I=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var D=0;D<P.length;D++)this.drawItem(D,P[D]);else I.forEach(function(R,O){E.drawItem(O)});return this},_.prototype.drawItem=function(E,S){var P=this.groups,F=P[E];if(typeof S=="number"&&(E=S,F=P[S],S=null),!!(F&&F.count&&F.opacity)){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,S));for(var I=[],D=1;D<F.activation.length;D++)!F.activation[D]||F.activation[D]!==!0&&!F.activation[D].data.length||I.push.apply(I,c(this.getMarkerDrawOptions(D,F,S)));I.length&&this.drawMarker(I)}},_.prototype.getMarkerDrawOptions=function(E,S,P){var F=S.range,I=S.tree,D=S.viewport,R=S.activation,O=S.selectionBuffer,z=S.count;if(this.regl,!I)return P?[d({},S,{markerTexture:this.markerTextures[E],activation:R[E],count:P.length,elements:P,offset:0})]:[d({},S,{markerTexture:this.markerTextures[E],activation:R[E],offset:0})];var G=[],Y=I.range(F,{lod:!0,px:[(F[2]-F[0])/D.width,(F[3]-F[1])/D.height]});if(P){for(var ee=R[E],j=ee.data,X=new Uint8Array(z),ae=0;ae<P.length;ae++){var he=P[ae];X[he]=j?j[he]:1}O.subdata(X)}for(var K=Y.length;K--;){var J=y(Y[K],2),U=J[0],H=J[1];G.push(d({},S,{markerTexture:this.markerTextures[E],activation:P?O:R[E],offset:U,count:H-U}))}return G},_.prototype.update=function(){for(var E=this,S=arguments.length,P=new Array(S),F=0;F<S;F++)P[F]=arguments[F];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var I=this.groups,D=this.gl,R=this.regl,O=this.maxSize,z=this.maxColors,G=this.palette;this.groups=I=P.map(function(Y,ee){var j=I[ee];if(Y===void 0)return j;Y===null?Y={positions:null}:typeof Y=="function"?Y={ondraw:Y}:typeof Y[0]=="number"&&(Y={positions:Y}),Y=m(Y,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),Y.positions===null&&(Y.positions=[]),Y.tooManyColors!=null&&(E.tooManyColors=Y.tooManyColors),j||(I[ee]=j={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},Y=d({},_.defaults,Y)),Y.positions&&!("marker"in Y)&&(Y.marker=j.marker,delete j.marker),Y.marker&&!("positions"in Y)&&(Y.positions=j.positions,delete j.positions);var X=0,ae=0;if(l(j,Y,[{snap:!0,size:function(be,ke){return be==null&&(be=_.defaults.size),X+=be&&be.length?1:0,be},borderSize:function(be,ke){return be==null&&(be=_.defaults.borderSize),X+=be&&be.length?1:0,be},opacity:parseFloat,color:function(be,ke){return be==null&&(be=_.defaults.color),be=E.updateColor(be),ae++,be},borderColor:function(be,ke){return be==null&&(be=_.defaults.borderColor),be=E.updateColor(be),ae++,be},bounds:function(be,ke,De){return"range"in De||(De.range=null),be},positions:function(be,ke,De){var He=ke.snap,Ae=ke.positionBuffer,Le=ke.positionFractBuffer,Ze=ke.selectionBuffer;if(be.x||be.y)return be.x.length?ke.xAttr={buffer:R.buffer(be.x),offset:0,stride:4,count:be.x.length}:ke.xAttr={buffer:be.x.buffer,offset:be.x.offset*4||0,stride:(be.x.stride||1)*4,count:be.x.count},be.y.length?ke.yAttr={buffer:R.buffer(be.y),offset:0,stride:4,count:be.y.length}:ke.yAttr={buffer:be.y.buffer,offset:be.y.offset*4||0,stride:(be.y.stride||1)*4,count:be.y.count},ke.count=Math.max(ke.xAttr.count,ke.yAttr.count),be;be=x(be,"float64");var We=ke.count=Math.floor(be.length/2),ze=ke.bounds=We?o(be,2):null;if(!De.range&&!ke.range&&(delete ke.range,De.range=ze),!De.marker&&!ke.marker&&(delete ke.marker,De.marker=null),He&&(He===!0||We>He)?ke.tree=g(be,{bounds:ze}):He&&He.length&&(ke.tree=He),ke.tree){var Ie={primitive:"points",usage:"static",data:ke.tree,type:"uint32"};ke.elements?ke.elements(Ie):ke.elements=R.elements(Ie)}var Ve=M.float32(be);Ae({data:Ve,usage:"dynamic"});var dt=M.fract32(be,Ve);return Le({data:dt,usage:"dynamic"}),Ze({data:new Uint8Array(We),type:"uint8",usage:"stream"}),be}},{marker:function(be,ke,De){var He=ke.activation;if(He.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),He.length=0,!be||typeof be[0]=="number"){var Ae=E.addMarker(be);He[Ae]=!0}else{for(var Le=[],Ze=0,We=Math.min(be.length,ke.count);Ze<We;Ze++){var ze=E.addMarker(be[Ze]);Le[ze]||(Le[ze]=new Uint8Array(ke.count)),Le[ze][Ze]=1}for(var Ie=0;Ie<Le.length;Ie++)if(!!Le[Ie]){var Ve={data:Le[Ie],type:"uint8",usage:"static"};He[Ie]?He[Ie](Ve):He[Ie]=R.buffer(Ve),He[Ie].data=Le[Ie]}}return be},range:function(be,ke,De){var He=ke.bounds;if(!!He)return be||(be=He),ke.scale=[1/(be[2]-be[0]),1/(be[3]-be[1])],ke.translate=[-be[0],-be[1]],ke.scaleFract=M.fract(ke.scale),ke.translateFract=M.fract(ke.translate),be},viewport:function(be){var ke=w(be||[D.drawingBufferWidth,D.drawingBufferHeight]);return ke}}]),X){var he=j,K=he.count,J=he.size,U=he.borderSize,H=he.sizeBuffer,q=new Uint8Array(K*2);if(J.length||U.length)for(var re=0;re<K;re++)q[re*2]=Math.round((J[re]==null?J:J[re])*255/O),q[re*2+1]=Math.round((U[re]==null?U:U[re])*255/O);H({data:q,usage:"dynamic"})}if(ae){var Z=j,Q=Z.count,ie=Z.color,oe=Z.borderColor,ne=Z.colorBuffer,le;if(E.tooManyColors){if(ie.length||oe.length){le=new Uint8Array(Q*8);for(var _e=0;_e<Q;_e++){var fe=ie[_e];le[_e*8]=G[fe*4],le[_e*8+1]=G[fe*4+1],le[_e*8+2]=G[fe*4+2],le[_e*8+3]=G[fe*4+3];var ye=oe[_e];le[_e*8+4]=G[ye*4],le[_e*8+5]=G[ye*4+1],le[_e*8+6]=G[ye*4+2],le[_e*8+7]=G[ye*4+3]}}}else if(ie.length||oe.length){le=new Uint8Array(Q*4+2);for(var xe=0;xe<Q;xe++)ie[xe]!=null&&(le[xe*4]=ie[xe]%z,le[xe*4+1]=Math.floor(ie[xe]/z)),oe[xe]!=null&&(le[xe*4+2]=oe[xe]%z,le[xe*4+3]=Math.floor(oe[xe]/z))}ne({data:le||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return j})}},_.prototype.addMarker=function(E){var S=this.markerTextures,P=this.regl,F=this.markerCache,I=E==null?0:F.indexOf(E);if(I>=0)return I;var D;if(E instanceof Uint8Array||E instanceof Uint8ClampedArray)D=E;else{D=new Uint8Array(E.length);for(var R=0,O=E.length;R<O;R++)D[R]=E[R]*255}var z=Math.floor(Math.sqrt(D.length));return I=S.length,F.push(E),S.push(P.texture({channels:1,data:D,radius:z,mag:"linear",min:"linear"})),I},_.prototype.updateColor=function(E){var S=this.paletteIds,P=this.palette,F=this.maxColors;Array.isArray(E)||(E=[E]);var I=[];if(typeof E[0]=="number"){var D=[];if(Array.isArray(E))for(var R=0;R<E.length;R+=4)D.push(E.slice(R,R+4));else for(var O=0;O<E.length;O+=4)D.push(E.subarray(O,O+4));E=D}for(var z=0;z<E.length;z++){var G=E[z];G=s(G,"uint8");var Y=b(G,!1);if(S[Y]==null){var ee=P.length;S[Y]=Math.floor(ee/4),P[ee]=G[0],P[ee+1]=G[1],P[ee+2]=G[2],P[ee+3]=G[3]}I[z]=S[Y]}return!this.tooManyColors&&P.length>F*4&&(this.tooManyColors=!0),this.updatePalette(P),I.length===1?I[0]:I},_.prototype.updatePalette=function(E){if(!this.tooManyColors){var S=this.maxColors,P=this.paletteTexture,F=Math.ceil(E.length*.25/S);if(F>1){E=E.slice();for(var I=E.length*.25%S;I<F*S;I++)E.push(0,0,0,0)}P.height<F&&P.resize(S,F),P.subimage({width:Math.min(E.length*.25,S),height:F,data:E},0,0)}},_.prototype.destroy=function(){return this.groups.forEach(function(E){E.sizeBuffer.destroy(),E.positionBuffer.destroy(),E.positionFractBuffer.destroy(),E.colorBuffer.destroy(),E.activation.forEach(function(S){return S&&S.destroy&&S.destroy()}),E.selectionBuffer.destroy(),E.elements&&E.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(E){return E&&E.destroy&&E.destroy()}),this};var h=t("object-assign"),L=function(S,P){var F=new p(S,P),I=F.render.bind(F);return h(I,{render:I,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),I};N.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(t,N,V){var y=t("regl-scatter2d"),c=t("pick-by-alias"),A=t("array-bounds"),T=t("raf"),e=t("array-range"),a=t("parse-rect"),i=t("flatten-vertex-data");N.exports=n;function n(o,b){if(!(this instanceof n))return new n(o);this.traces=[],this.passes={},this.regl=o,this.scatter=y(o),this.canvas=this.scatter.canvas}n.prototype.render=function(){for(var o=this,b,g=[],d=arguments.length;d--;)g[d]=arguments[d];return g.length&&(b=this).update.apply(b,g),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,T(function(){o.dirty=!1})),this)},n.prototype.update=function(){for(var o,b=[],g=arguments.length;g--;)b[g]=arguments[g];if(!!b.length){for(var d=0;d<b.length;d++)this.updateItem(d,b[d]);this.traces=this.traces.filter(Boolean);for(var f=[],m=0,l=0;l<this.traces.length;l++){for(var x=this.traces[l],u=this.traces[l].passes,M=0;M<u.length;M++)f.push(this.passes[u[M]]);x.passOffset=m,m+=x.passes.length}return(o=this.scatter).update.apply(o,f),this}},n.prototype.updateItem=function(o,b){var g=this,d=g.regl;if(b===null)return this.traces[o]=null,this;if(!b)return this;var f=c(b,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[o]||(this.traces[o]={id:o,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(f.color!=null&&(m.color=f.color),f.size!=null&&(m.size=f.size),f.marker!=null&&(m.marker=f.marker),f.borderColor!=null&&(m.borderColor=f.borderColor),f.borderSize!=null&&(m.borderSize=f.borderSize),f.opacity!=null&&(m.opacity=f.opacity),f.viewport&&(m.viewport=a(f.viewport)),f.diagonal!=null&&(m.diagonal=f.diagonal),f.upper!=null&&(m.upper=f.upper),f.lower!=null&&(m.lower=f.lower),f.data){m.buffer(i(f.data)),m.columns=f.data.length,m.count=f.data[0].length,m.bounds=[];for(var l=0;l<m.columns;l++)m.bounds[l]=A(f.data[l],1)}var x;f.range&&(m.range=f.range,x=m.range&&typeof m.range[0]!="number"),f.domain&&(m.domain=f.domain);var u=!1;f.padding!=null&&(Array.isArray(f.padding)&&f.padding.length===m.columns&&typeof f.padding[f.padding.length-1]=="number"?(m.padding=f.padding.map(s),u=!0):m.padding=s(f.padding));var M=m.columns,w=m.count,p=m.viewport.width,_=m.viewport.height,h=m.viewport.x,L=m.viewport.y,E=p/M,S=_/M;m.passes=[];for(var P=0;P<M;P++)for(var F=0;F<M;F++)if(!(!m.diagonal&&F===P)&&!(!m.upper&&P>F)&&!(!m.lower&&P<F)){var I=r(m.id,P,F),D=this.passes[I]||(this.passes[I]={});if(f.data&&(f.transpose?D.positions={x:{buffer:m.buffer,offset:F,count:w,stride:M},y:{buffer:m.buffer,offset:P,count:w,stride:M}}:D.positions={x:{buffer:m.buffer,offset:F*w,count:w},y:{buffer:m.buffer,offset:P*w,count:w}},D.bounds=v(m.bounds,P,F)),f.domain||f.viewport||f.data){var R=u?v(m.padding,P,F):m.padding;if(m.domain){var O=v(m.domain,P,F),z=O[0],G=O[1],Y=O[2],ee=O[3];D.viewport=[h+z*p+R[0],L+G*_+R[1],h+Y*p-R[2],L+ee*_-R[3]]}else D.viewport=[h+F*E+E*R[0],L+P*S+S*R[1],h+(F+1)*E-E*R[2],L+(P+1)*S-S*R[3]]}f.color&&(D.color=m.color),f.size&&(D.size=m.size),f.marker&&(D.marker=m.marker),f.borderSize&&(D.borderSize=m.borderSize),f.borderColor&&(D.borderColor=m.borderColor),f.opacity&&(D.opacity=m.opacity),f.range&&(D.range=x?v(m.range,P,F):m.range||D.bounds),m.passes.push(I)}return this},n.prototype.draw=function(){for(var o,b=[],g=arguments.length;g--;)b[g]=arguments[g];if(!b.length)this.scatter.draw();else{for(var d=[],f=0;f<b.length;f++)if(typeof b[f]=="number"){var m=this.traces[b[f]],l=m.passes,x=m.passOffset;d.push.apply(d,e(x,x+l.length))}else if(b[f].length){var u=b[f],M=this.traces[f],w=M.passes,p=M.passOffset;w=w.map(function(_,h){d[p+h]=u})}(o=this.scatter).draw.apply(o,d)}return this},n.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(o,b,g){var d=o.id!=null?o.id:o,f=b,m=g,l=d<<16|(f&255)<<8|m&255;return l}function v(o,b,g){var d,f,m,l,x=o[b],u=o[g];return x.length>2?(x[0],x[2],d=x[1],f=x[3]):x.length?(d=x[0],f=x[1]):(x.x,d=x.y,x.x+x.width,f=x.y+x.height),u.length>2?(m=u[0],l=u[2],u[1],u[3]):u.length?(m=u[0],l=u[1]):(m=u.x,u.y,l=u.x+u.width,u.y+u.height),[m,d,l,f]}function s(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var b=a(o);return[b.x,b.y,b.x+b.width,b.y+b.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?N.exports=c():y.createREGL=c()})(this,function(){function y(st,rr){this.id=_e++,this.type=st,this.data=rr}function c(st){if(st.length===0)return[];var rr=st.charAt(0),$t=st.charAt(st.length-1);if(1<st.length&&rr===$t&&(rr==='"'||rr==="'"))return['"'+st.substr(1,st.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(rr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(st))return c(st.substr(0,rr.index)).concat(c(rr[1])).concat(c(st.substr(rr.index+rr[0].length)));if(rr=st.split("."),rr.length===1)return['"'+st.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(st=[],$t=0;$t<rr.length;++$t)st=st.concat(c(rr[$t]));return st}function A(st){return"["+c(st).join("][")+"]"}function T(st,rr){if(typeof st=="function")return new y(0,st);if(typeof st=="number"||typeof st=="boolean")return new y(5,st);if(Array.isArray(st))return new y(6,st.map(function($t,hr){return T($t)}));if(st instanceof y)return st}function e(){var st={"":0},rr=[""];return{id:function($t){var hr=st[$t];return hr||(hr=st[$t]=rr.length,rr.push($t),hr)},str:function($t){return rr[$t]}}}function a(st,rr,$t){function hr(){var Qe=window.innerWidth,lt=window.innerHeight;st!==document.body&&(lt=Sr.getBoundingClientRect(),Qe=lt.right-lt.left,lt=lt.bottom-lt.top),Sr.width=$t*Qe,Sr.height=$t*lt}var Sr=document.createElement("canvas");le(Sr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),st.appendChild(Sr),st===document.body&&(Sr.style.position="absolute",le(st.style,{margin:0,padding:0}));var tt;return st!==document.body&&typeof ResizeObserver=="function"?(tt=new ResizeObserver(function(){setTimeout(hr)}),tt.observe(st)):window.addEventListener("resize",hr,!1),hr(),{canvas:Sr,onDestroy:function(){tt?tt.disconnect():window.removeEventListener("resize",hr),st.removeChild(Sr)}}}function i(st,rr){function $t(hr){try{return st.getContext(hr,rr)}catch{return null}}return $t("webgl")||$t("experimental-webgl")||$t("webgl-experimental")}function n(st){return typeof st=="string"?st.split():st}function r(st){return typeof st=="string"?document.querySelector(st):st}function v(st){var rr=st||{},$t,hr,Sr,tt;st={};var Qe=[],lt=[],ft=typeof window>"u"?1:window.devicePixelRatio,Et=!1,Vt={},Pe=function(ot){},Se=function(){};if(typeof rr=="string"?$t=document.querySelector(rr):typeof rr=="object"&&(typeof rr.nodeName=="string"&&typeof rr.appendChild=="function"&&typeof rr.getBoundingClientRect=="function"?$t=rr:typeof rr.drawArrays=="function"||typeof rr.drawElements=="function"?(tt=rr,Sr=tt.canvas):("gl"in rr?tt=rr.gl:"canvas"in rr?Sr=r(rr.canvas):"container"in rr&&(hr=r(rr.container)),"attributes"in rr&&(st=rr.attributes),"extensions"in rr&&(Qe=n(rr.extensions)),"optionalExtensions"in rr&&(lt=n(rr.optionalExtensions)),"onDone"in rr&&(Pe=rr.onDone),"profile"in rr&&(Et=!!rr.profile),"pixelRatio"in rr&&(ft=+rr.pixelRatio),"cachedCode"in rr&&(Vt=rr.cachedCode))),$t&&($t.nodeName.toLowerCase()==="canvas"?Sr=$t:hr=$t),!tt){if(!Sr){if($t=a(hr||document.body,Pe,ft),!$t)return null;Sr=$t.canvas,Se=$t.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),tt=i(Sr,st)}return tt?{gl:tt,canvas:Sr,container:hr,extensions:Qe,optionalExtensions:lt,pixelRatio:ft,profile:Et,cachedCode:Vt,onDone:Pe,onDestroy:Se}:(Se(),Pe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function s(st,rr){function $t(Qe){Qe=Qe.toLowerCase();var lt;try{lt=hr[Qe]=st.getExtension(Qe)}catch{}return!!lt}for(var hr={},Sr=0;Sr<rr.extensions.length;++Sr){var tt=rr.extensions[Sr];if(!$t(tt))return rr.onDestroy(),rr.onDone('"'+tt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return rr.optionalExtensions.forEach($t),{extensions:hr,restore:function(){Object.keys(hr).forEach(function(Qe){if(hr[Qe]&&!$t(Qe))throw Error("(regl): error restoring extension "+Qe)})}}}function o(st,rr){for(var $t=Array(st),hr=0;hr<st;++hr)$t[hr]=rr(hr);return $t}function b(st){var rr,$t;return rr=(65535<st)<<4,st>>>=rr,$t=(255<st)<<3,st>>>=$t,rr|=$t,$t=(15<st)<<2,st>>>=$t,rr|=$t,$t=(3<st)<<1,rr|$t|st>>>$t>>1}function g(){function st(hr){e:{for(var Sr=16;268435456>=Sr;Sr*=16)if(hr<=Sr){hr=Sr;break e}hr=0}return Sr=$t[b(hr)>>2],0<Sr.length?Sr.pop():new ArrayBuffer(hr)}function rr(hr){$t[b(hr.byteLength)>>2].push(hr)}var $t=o(8,function(){return[]});return{alloc:st,free:rr,allocType:function(hr,Sr){var tt=null;switch(hr){case 5120:tt=new Int8Array(st(Sr),0,Sr);break;case 5121:tt=new Uint8Array(st(Sr),0,Sr);break;case 5122:tt=new Int16Array(st(2*Sr),0,Sr);break;case 5123:tt=new Uint16Array(st(2*Sr),0,Sr);break;case 5124:tt=new Int32Array(st(4*Sr),0,Sr);break;case 5125:tt=new Uint32Array(st(4*Sr),0,Sr);break;case 5126:tt=new Float32Array(st(4*Sr),0,Sr);break;default:return null}return tt.length!==Sr?tt.subarray(0,Sr):tt},freeType:function(hr){rr(hr.buffer)}}}function d(st){return!!st&&typeof st=="object"&&Array.isArray(st.shape)&&Array.isArray(st.stride)&&typeof st.offset=="number"&&st.shape.length===st.stride.length&&(Array.isArray(st.data)||ke(st.data))}function f(st,rr,$t,hr,Sr,tt){for(var Qe=0;Qe<rr;++Qe)for(var lt=st[Qe],ft=0;ft<$t;++ft)for(var Et=lt[ft],Vt=0;Vt<hr;++Vt)Sr[tt++]=Et[Vt]}function m(st,rr,$t,hr,Sr){for(var tt=1,Qe=$t+1;Qe<rr.length;++Qe)tt*=rr[Qe];var lt=rr[$t];if(rr.length-$t===4){var ft=rr[$t+1],Et=rr[$t+2];for(rr=rr[$t+3],Qe=0;Qe<lt;++Qe)f(st[Qe],ft,Et,rr,hr,Sr),Sr+=tt}else for(Qe=0;Qe<lt;++Qe)m(st[Qe],rr,$t+1,hr,Sr),Sr+=tt}function l(st){return Ae[Object.prototype.toString.call(st)]|0}function x(st,rr){for(var $t=0;$t<rr.length;++$t)st[$t]=rr[$t]}function u(st,rr,$t,hr,Sr,tt,Qe){for(var lt=0,ft=0;ft<$t;++ft)for(var Et=0;Et<hr;++Et)st[lt++]=rr[Sr*ft+tt*Et+Qe]}function M(st,rr,$t,hr){function Sr(Pe){this.id=ft++,this.buffer=st.createBuffer(),this.type=Pe,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,$t.profile&&(this.stats={size:0})}function tt(Pe,Se,ot){Pe.byteLength=Se.byteLength,st.bufferData(Pe.type,Se,ot)}function Qe(Pe,Se,ot,ct,pt,St){if(Pe.usage=ot,Array.isArray(Se)){if(Pe.dtype=ct||5126,0<Se.length)if(Array.isArray(Se[0])){pt=ze(Se);for(var xt=ct=1;xt<pt.length;++xt)ct*=pt[xt];Pe.dimension=ct,Se=We(Se,pt,Pe.dtype),tt(Pe,Se,ot),St?Pe.persistentData=Se:me.freeType(Se)}else typeof Se[0]=="number"?(Pe.dimension=pt,pt=me.allocType(Pe.dtype,Se.length),x(pt,Se),tt(Pe,pt,ot),St?Pe.persistentData=pt:me.freeType(pt)):ke(Se[0])&&(Pe.dimension=Se[0].length,Pe.dtype=ct||l(Se[0])||5126,Se=We(Se,[Se.length,Se[0].length],Pe.dtype),tt(Pe,Se,ot),St?Pe.persistentData=Se:me.freeType(Se))}else if(ke(Se))Pe.dtype=ct||l(Se),Pe.dimension=pt,tt(Pe,Se,ot),St&&(Pe.persistentData=new Uint8Array(new Uint8Array(Se.buffer)));else if(d(Se)){pt=Se.shape;var Pt=Se.stride,xt=Se.offset,Xt=0,or=0,Pr=0,Ar=0;pt.length===1?(Xt=pt[0],or=1,Pr=Pt[0],Ar=0):pt.length===2&&(Xt=pt[0],or=pt[1],Pr=Pt[0],Ar=Pt[1]),Pe.dtype=ct||l(Se.data)||5126,Pe.dimension=or,pt=me.allocType(Pe.dtype,Xt*or),u(pt,Se.data,Xt,or,Pr,Ar,xt),tt(Pe,pt,ot),St?Pe.persistentData=pt:me.freeType(pt)}else Se instanceof ArrayBuffer&&(Pe.dtype=5121,Pe.dimension=pt,tt(Pe,Se,ot),St&&(Pe.persistentData=new Uint8Array(new Uint8Array(Se))))}function lt(Pe){rr.bufferCount--,hr(Pe),st.deleteBuffer(Pe.buffer),Pe.buffer=null,delete Et[Pe.id]}var ft=0,Et={};Sr.prototype.bind=function(){st.bindBuffer(this.type,this.buffer)},Sr.prototype.destroy=function(){lt(this)};var Vt=[];return $t.profile&&(rr.getTotalBufferSize=function(){var Pe=0;return Object.keys(Et).forEach(function(Se){Pe+=Et[Se].stats.size}),Pe}),{create:function(Pe,Se,ot,ct){function pt(xt){var Pt=35044,Xt=null,or=0,Pr=0,Ar=1;return Array.isArray(xt)||ke(xt)||d(xt)||xt instanceof ArrayBuffer?Xt=xt:typeof xt=="number"?or=xt|0:xt&&("data"in xt&&(Xt=xt.data),"usage"in xt&&(Pt=Ze[xt.usage]),"type"in xt&&(Pr=Le[xt.type]),"dimension"in xt&&(Ar=xt.dimension|0),"length"in xt&&(or=xt.length|0)),St.bind(),Xt?Qe(St,Xt,Pt,Pr,Ar,ct):(or&&st.bufferData(St.type,or,Pt),St.dtype=Pr||5121,St.usage=Pt,St.dimension=Ar,St.byteLength=or),$t.profile&&(St.stats.size=St.byteLength*Ie[St.dtype]),pt}rr.bufferCount++;var St=new Sr(Se);return Et[St.id]=St,ot||pt(Pe),pt._reglType="buffer",pt._buffer=St,pt.subdata=function(xt,Pt){var Xt=(Pt||0)|0,or;if(St.bind(),ke(xt)||xt instanceof ArrayBuffer)st.bufferSubData(St.type,Xt,xt);else if(Array.isArray(xt)){if(0<xt.length)if(typeof xt[0]=="number"){var Pr=me.allocType(St.dtype,xt.length);x(Pr,xt),st.bufferSubData(St.type,Xt,Pr),me.freeType(Pr)}else(Array.isArray(xt[0])||ke(xt[0]))&&(or=ze(xt),Pr=We(xt,or,St.dtype),st.bufferSubData(St.type,Xt,Pr),me.freeType(Pr))}else if(d(xt)){or=xt.shape;var Ar=xt.stride,Er=Pr=0,Jr=0,lr=0;or.length===1?(Pr=or[0],Er=1,Jr=Ar[0],lr=0):or.length===2&&(Pr=or[0],Er=or[1],Jr=Ar[0],lr=Ar[1]),or=Array.isArray(xt.data)?St.dtype:l(xt.data),or=me.allocType(or,Pr*Er),u(or,xt.data,Pr,Er,Jr,lr,xt.offset),st.bufferSubData(St.type,Xt,or),me.freeType(or)}return pt},$t.profile&&(pt.stats=St.stats),pt.destroy=function(){lt(St)},pt},createStream:function(Pe,Se){var ot=Vt.pop();return ot||(ot=new Sr(Pe)),ot.bind(),Qe(ot,Se,35040,0,1,!1),ot},destroyStream:function(Pe){Vt.push(Pe)},clear:function(){De(Et).forEach(lt),Vt.forEach(lt)},getBuffer:function(Pe){return Pe&&Pe._buffer instanceof Sr?Pe._buffer:null},restore:function(){De(Et).forEach(function(Pe){Pe.buffer=st.createBuffer(),st.bindBuffer(Pe.type,Pe.buffer),st.bufferData(Pe.type,Pe.persistentData||Pe.byteLength,Pe.usage)})},_initBuffer:Qe}}function w(st,rr,$t,hr){function Sr(Pe){this.id=ft++,lt[this.id]=this,this.buffer=Pe,this.primType=4,this.type=this.vertCount=0}function tt(Pe,Se,ot,ct,pt,St,xt){Pe.buffer.bind();var Pt;if(Se?((Pt=xt)||ke(Se)&&(!d(Se)||ke(Se.data))||(Pt=rr.oes_element_index_uint?5125:5123),$t._initBuffer(Pe.buffer,Se,ot,Pt,3)):(st.bufferData(34963,St,ot),Pe.buffer.dtype=Pt||5121,Pe.buffer.usage=ot,Pe.buffer.dimension=3,Pe.buffer.byteLength=St),Pt=xt,!xt){switch(Pe.buffer.dtype){case 5121:case 5120:Pt=5121;break;case 5123:case 5122:Pt=5123;break;case 5125:case 5124:Pt=5125}Pe.buffer.dtype=Pt}Pe.type=Pt,Se=pt,0>Se&&(Se=Pe.buffer.byteLength,Pt===5123?Se>>=1:Pt===5125&&(Se>>=2)),Pe.vertCount=Se,Se=ct,0>ct&&(Se=4,ct=Pe.buffer.dimension,ct===1&&(Se=0),ct===2&&(Se=1),ct===3&&(Se=4)),Pe.primType=Se}function Qe(Pe){hr.elementsCount--,delete lt[Pe.id],Pe.buffer.destroy(),Pe.buffer=null}var lt={},ft=0,Et={uint8:5121,uint16:5123};rr.oes_element_index_uint&&(Et.uint32=5125),Sr.prototype.bind=function(){this.buffer.bind()};var Vt=[];return{create:function(Pe,Se){function ot(St){if(St)if(typeof St=="number")ct(St),pt.primType=4,pt.vertCount=St|0,pt.type=5121;else{var xt=null,Pt=35044,Xt=-1,or=-1,Pr=0,Ar=0;Array.isArray(St)||ke(St)||d(St)?xt=St:("data"in St&&(xt=St.data),"usage"in St&&(Pt=Ze[St.usage]),"primitive"in St&&(Xt=Ve[St.primitive]),"count"in St&&(or=St.count|0),"type"in St&&(Ar=Et[St.type]),"length"in St?Pr=St.length|0:(Pr=or,Ar===5123||Ar===5122?Pr*=2:(Ar===5125||Ar===5124)&&(Pr*=4))),tt(pt,xt,Pt,Xt,or,Pr,Ar)}else ct(),pt.primType=4,pt.vertCount=0,pt.type=5121;return ot}var ct=$t.create(null,34963,!0),pt=new Sr(ct._buffer);return hr.elementsCount++,ot(Pe),ot._reglType="elements",ot._elements=pt,ot.subdata=function(St,xt){return ct.subdata(St,xt),ot},ot.destroy=function(){Qe(pt)},ot},createStream:function(Pe){var Se=Vt.pop();return Se||(Se=new Sr($t.create(null,34963,!0,!1)._buffer)),tt(Se,Pe,35040,-1,-1,0,0),Se},destroyStream:function(Pe){Vt.push(Pe)},getElements:function(Pe){return typeof Pe=="function"&&Pe._elements instanceof Sr?Pe._elements:null},clear:function(){De(lt).forEach(Qe)}}}function p(st){for(var rr=me.allocType(5123,st.length),$t=0;$t<st.length;++$t)if(isNaN(st[$t]))rr[$t]=65535;else if(st[$t]===1/0)rr[$t]=31744;else if(st[$t]===-1/0)rr[$t]=64512;else{dt[0]=st[$t];var tt=Ft[0],hr=tt>>>31<<15,Sr=(tt<<1>>>24)-127,tt=tt>>13&1023;rr[$t]=-24>Sr?hr:-14>Sr?hr+(tt+1024>>-14-Sr):15<Sr?hr+31744:hr+(Sr+15<<10)+tt}return rr}function _(st){return Array.isArray(st)||ke(st)}function h(st){return"[object "+st+"]"}function L(st){return Array.isArray(st)&&(st.length===0||typeof st[0]=="number")}function E(st){return!!(Array.isArray(st)&&st.length!==0&&_(st[0]))}function S(st){return Object.prototype.toString.call(st)}function P(st){if(!st)return!1;var rr=S(st);return 0<=Ee.indexOf(rr)?!0:L(st)||E(st)||d(st)}function F(st,rr){st.type===36193?(st.data=p(rr),me.freeType(rr)):st.data=rr}function I(st,rr,$t,hr,Sr,tt){if(st=typeof Ke[st]<"u"?Ke[st]:Ct[st]*Ge[rr],tt&&(st*=6),Sr){for(hr=0;1<=$t;)hr+=st*$t*$t,$t/=2;return hr}return st*$t*hr}function D(st,rr,$t,hr,Sr,tt,Qe){function lt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ft(kr,bn){kr.internalformat=bn.internalformat,kr.format=bn.format,kr.type=bn.type,kr.compressed=bn.compressed,kr.premultiplyAlpha=bn.premultiplyAlpha,kr.flipY=bn.flipY,kr.unpackAlignment=bn.unpackAlignment,kr.colorSpace=bn.colorSpace,kr.width=bn.width,kr.height=bn.height,kr.channels=bn.channels}function Et(kr,bn){if(typeof bn=="object"&&bn){"premultiplyAlpha"in bn&&(kr.premultiplyAlpha=bn.premultiplyAlpha),"flipY"in bn&&(kr.flipY=bn.flipY),"alignment"in bn&&(kr.unpackAlignment=bn.alignment),"colorSpace"in bn&&(kr.colorSpace=ur[bn.colorSpace]),"type"in bn&&(kr.type=Nr[bn.type]);var dn=kr.width,Ln=kr.height,ra=kr.channels,ma=!1;"shape"in bn?(dn=bn.shape[0],Ln=bn.shape[1],bn.shape.length===3&&(ra=bn.shape[2],ma=!0)):("radius"in bn&&(dn=Ln=bn.radius),"width"in bn&&(dn=bn.width),"height"in bn&&(Ln=bn.height),"channels"in bn&&(ra=bn.channels,ma=!0)),kr.width=dn|0,kr.height=Ln|0,kr.channels=ra|0,dn=!1,"format"in bn&&(dn=bn.format,Ln=kr.internalformat=Vr[dn],kr.format=Kn[Ln],dn in Nr&&!("type"in bn)&&(kr.type=Nr[dn]),dn in Dr&&(kr.compressed=!0),dn=!0),!ma&&dn?kr.channels=Ct[kr.format]:ma&&!dn&&kr.channels!==Ot[kr.format]&&(kr.format=kr.internalformat=Ot[kr.channels])}}function Vt(kr){st.pixelStorei(37440,kr.flipY),st.pixelStorei(37441,kr.premultiplyAlpha),st.pixelStorei(37443,kr.colorSpace),st.pixelStorei(3317,kr.unpackAlignment)}function Pe(){lt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Se(kr,bn){var dn=null;if(P(bn)?dn=bn:bn&&(Et(kr,bn),"x"in bn&&(kr.xOffset=bn.x|0),"y"in bn&&(kr.yOffset=bn.y|0),P(bn.data)&&(dn=bn.data)),bn.copy){var Ln=Sr.viewportWidth,ra=Sr.viewportHeight;kr.width=kr.width||Ln-kr.xOffset,kr.height=kr.height||ra-kr.yOffset,kr.needsCopy=!0}else if(!dn)kr.width=kr.width||1,kr.height=kr.height||1,kr.channels=kr.channels||4;else if(ke(dn))kr.channels=kr.channels||4,kr.data=dn,"type"in bn||kr.type!==5121||(kr.type=Ae[Object.prototype.toString.call(dn)]|0);else if(L(dn)){switch(kr.channels=kr.channels||4,Ln=dn,ra=Ln.length,kr.type){case 5121:case 5123:case 5125:case 5126:ra=me.allocType(kr.type,ra),ra.set(Ln),kr.data=ra;break;case 36193:kr.data=p(Ln)}kr.alignment=1,kr.needsFree=!0}else if(d(dn)){Ln=dn.data,Array.isArray(Ln)||kr.type!==5121||(kr.type=Ae[Object.prototype.toString.call(Ln)]|0);var ra=dn.shape,ma=dn.stride,sa,Bn,Qn,Xa;ra.length===3?(Qn=ra[2],Xa=ma[2]):Xa=Qn=1,sa=ra[0],Bn=ra[1],ra=ma[0],ma=ma[1],kr.alignment=1,kr.width=sa,kr.height=Bn,kr.channels=Qn,kr.format=kr.internalformat=Ot[Qn],kr.needsFree=!0,sa=Xa,dn=dn.offset,Qn=kr.width,Xa=kr.height,Bn=kr.channels;for(var yi=me.allocType(kr.type===36193?5126:kr.type,Qn*Xa*Bn),Yt=0,gr=0;gr<Xa;++gr)for(var un=0;un<Qn;++un)for(var mn=0;mn<Bn;++mn)yi[Yt++]=Ln[ra*un+ma*gr+sa*mn+dn];F(kr,yi)}else if(S(dn)===jt||S(dn)===Nt||S(dn)===Lt)S(dn)===jt||S(dn)===Nt?kr.element=dn:kr.element=dn.canvas,kr.width=kr.element.width,kr.height=kr.element.height,kr.channels=4;else if(S(dn)===Xe)kr.element=dn,kr.width=dn.width,kr.height=dn.height,kr.channels=4;else if(S(dn)===it)kr.element=dn,kr.width=dn.naturalWidth,kr.height=dn.naturalHeight,kr.channels=4;else if(S(dn)===Ye)kr.element=dn,kr.width=dn.videoWidth,kr.height=dn.videoHeight,kr.channels=4;else if(E(dn)){for(Ln=kr.width||dn[0].length,ra=kr.height||dn.length,ma=kr.channels,ma=_(dn[0][0])?ma||dn[0][0].length:ma||1,sa=He.shape(dn),Qn=1,Xa=0;Xa<sa.length;++Xa)Qn*=sa[Xa];Qn=me.allocType(kr.type===36193?5126:kr.type,Qn),He.flatten(dn,sa,"",Qn),F(kr,Qn),kr.alignment=1,kr.width=Ln,kr.height=ra,kr.channels=ma,kr.format=kr.internalformat=Ot[ma],kr.needsFree=!0}}function ot(kr,bn,dn,Ln,ra){var ma=kr.element,sa=kr.data,Bn=kr.internalformat,Qn=kr.format,Xa=kr.type,yi=kr.width,Yt=kr.height;Vt(kr),ma?st.texSubImage2D(bn,ra,dn,Ln,Qn,Xa,ma):kr.compressed?st.compressedTexSubImage2D(bn,ra,dn,Ln,Bn,yi,Yt,sa):kr.needsCopy?(hr(),st.copyTexSubImage2D(bn,ra,dn,Ln,kr.xOffset,kr.yOffset,yi,Yt)):st.texSubImage2D(bn,ra,dn,Ln,yi,Yt,Qn,Xa,sa)}function ct(){return ya.pop()||new Pe}function pt(kr){kr.needsFree&&me.freeType(kr.data),Pe.call(kr),ya.push(kr)}function St(){lt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function xt(kr,bn,dn){var Ln=kr.images[0]=ct();kr.mipmask=1,Ln.width=kr.width=bn,Ln.height=kr.height=dn,Ln.channels=kr.channels=4}function Pt(kr,bn){var dn=null;if(P(bn))dn=kr.images[0]=ct(),ft(dn,kr),Se(dn,bn),kr.mipmask=1;else if(Et(kr,bn),Array.isArray(bn.mipmap))for(var Ln=bn.mipmap,ra=0;ra<Ln.length;++ra)dn=kr.images[ra]=ct(),ft(dn,kr),dn.width>>=ra,dn.height>>=ra,Se(dn,Ln[ra]),kr.mipmask|=1<<ra;else dn=kr.images[0]=ct(),ft(dn,kr),Se(dn,bn),kr.mipmask=1;ft(kr,kr.images[0])}function Xt(kr,bn){for(var dn=kr.images,Ln=0;Ln<dn.length&&dn[Ln];++Ln){var ra=dn[Ln],ma=bn,sa=Ln,Bn=ra.element,Qn=ra.data,Xa=ra.internalformat,yi=ra.format,Yt=ra.type,gr=ra.width,un=ra.height;Vt(ra),Bn?st.texImage2D(ma,sa,yi,yi,Yt,Bn):ra.compressed?st.compressedTexImage2D(ma,sa,Xa,gr,un,0,Qn):ra.needsCopy?(hr(),st.copyTexImage2D(ma,sa,yi,ra.xOffset,ra.yOffset,gr,un,0)):st.texImage2D(ma,sa,yi,gr,un,0,yi,Yt,Qn||null)}}function or(){var kr=Ra.pop()||new St;lt.call(kr);for(var bn=kr.mipmask=0;16>bn;++bn)kr.images[bn]=null;return kr}function Pr(kr){for(var bn=kr.images,dn=0;dn<bn.length;++dn)bn[dn]&&pt(bn[dn]),bn[dn]=null;Ra.push(kr)}function Ar(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Er(kr,bn){"min"in bn&&(kr.minFilter=Kt[bn.min],0<=Qt.indexOf(kr.minFilter)&&!("faces"in bn)&&(kr.genMipmaps=!0)),"mag"in bn&&(kr.magFilter=Rt[bn.mag]);var dn=kr.wrapS,Ln=kr.wrapT;if("wrap"in bn){var ra=bn.wrap;typeof ra=="string"?dn=Ln=at[ra]:Array.isArray(ra)&&(dn=at[ra[0]],Ln=at[ra[1]])}else"wrapS"in bn&&(dn=at[bn.wrapS]),"wrapT"in bn&&(Ln=at[bn.wrapT]);if(kr.wrapS=dn,kr.wrapT=Ln,"anisotropic"in bn&&(kr.anisotropic=bn.anisotropic),"mipmap"in bn){switch(dn=!1,typeof bn.mipmap){case"string":kr.mipmapHint=Lr[bn.mipmap],dn=kr.genMipmaps=!0;break;case"boolean":dn=kr.genMipmaps=bn.mipmap;break;case"object":kr.genMipmaps=!1,dn=!0}!dn||"min"in bn||(kr.minFilter=9984)}}function Jr(kr,bn){st.texParameteri(bn,10241,kr.minFilter),st.texParameteri(bn,10240,kr.magFilter),st.texParameteri(bn,10242,kr.wrapS),st.texParameteri(bn,10243,kr.wrapT),rr.ext_texture_filter_anisotropic&&st.texParameteri(bn,34046,kr.anisotropic),kr.genMipmaps&&(st.hint(33170,kr.mipmapHint),st.generateMipmap(bn))}function lr(kr){lt.call(this),this.mipmask=0,this.internalformat=6408,this.id=_i++,this.refCount=1,this.target=kr,this.texture=st.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ar,Qe.profile&&(this.stats={size:0})}function br(kr){st.activeTexture(33984),st.bindTexture(kr.target,kr.texture)}function Fr(){var kr=ei[0];kr?st.bindTexture(kr.target,kr.texture):st.bindTexture(3553,null)}function Hr(kr){var bn=kr.texture,dn=kr.unit,Ln=kr.target;0<=dn&&(st.activeTexture(33984+dn),st.bindTexture(Ln,null),ei[dn]=null),st.deleteTexture(bn),kr.texture=null,kr.params=null,kr.pixels=null,kr.refCount=0,delete Ka[kr.id],tt.textureCount--}var Lr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},at={repeat:10497,clamp:33071,mirror:33648},Rt={nearest:9728,linear:9729},Kt=le({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Rt),ur={none:0,browser:37444},Nr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Vr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Dr={};rr.ext_srgb&&(Vr.srgb=35904,Vr.srgba=35906),rr.oes_texture_float&&(Nr.float32=Nr.float=5126),rr.oes_texture_half_float&&(Nr.float16=Nr["half float"]=36193),rr.webgl_depth_texture&&(le(Vr,{depth:6402,"depth stencil":34041}),le(Nr,{uint16:5123,uint32:5125,"depth stencil":34042})),rr.webgl_compressed_texture_s3tc&&le(Dr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),rr.webgl_compressed_texture_atc&&le(Dr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),rr.webgl_compressed_texture_pvrtc&&le(Dr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),rr.webgl_compressed_texture_etc1&&(Dr["rgb etc1"]=36196);var Mr=Array.prototype.slice.call(st.getParameter(34467));Object.keys(Dr).forEach(function(kr){var bn=Dr[kr];0<=Mr.indexOf(bn)&&(Vr[kr]=bn)});var jr=Object.keys(Vr);$t.textureFormats=jr;var kn=[];Object.keys(Vr).forEach(function(kr){kn[Vr[kr]]=kr});var yn=[];Object.keys(Nr).forEach(function(kr){yn[Nr[kr]]=kr});var Wn=[];Object.keys(Rt).forEach(function(kr){Wn[Rt[kr]]=kr});var In=[];Object.keys(Kt).forEach(function(kr){In[Kt[kr]]=kr});var $n=[];Object.keys(at).forEach(function(kr){$n[at[kr]]=kr});var Kn=jr.reduce(function(kr,bn){var dn=Vr[bn];return dn===6409||dn===6406||dn===6409||dn===6410||dn===6402||dn===34041||rr.ext_srgb&&(dn===35904||dn===35906)?kr[dn]=dn:dn===32855||0<=bn.indexOf("rgba")?kr[dn]=6408:kr[dn]=6407,kr},{}),ya=[],Ra=[],_i=0,Ka={},ri=$t.maxTextureUnits,ei=Array(ri).map(function(){return null});return le(lr.prototype,{bind:function(){this.bindCount+=1;var kr=this.unit;if(0>kr){for(var bn=0;bn<ri;++bn){var dn=ei[bn];if(dn){if(0<dn.bindCount)continue;dn.unit=-1}ei[bn]=this,kr=bn;break}Qe.profile&&tt.maxTextureUnits<kr+1&&(tt.maxTextureUnits=kr+1),this.unit=kr,st.activeTexture(33984+kr),st.bindTexture(this.target,this.texture)}return kr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Hr(this)}}),Qe.profile&&(tt.getTotalTextureSize=function(){var kr=0;return Object.keys(Ka).forEach(function(bn){kr+=Ka[bn].stats.size}),kr}),{create2D:function(kr,bn){function dn(ra,ma){var sa=Ln.texInfo;Ar.call(sa);var Bn=or();return typeof ra=="number"?typeof ma=="number"?xt(Bn,ra|0,ma|0):xt(Bn,ra|0,ra|0):ra?(Er(sa,ra),Pt(Bn,ra)):xt(Bn,1,1),sa.genMipmaps&&(Bn.mipmask=(Bn.width<<1)-1),Ln.mipmask=Bn.mipmask,ft(Ln,Bn),Ln.internalformat=Bn.internalformat,dn.width=Bn.width,dn.height=Bn.height,br(Ln),Xt(Bn,3553),Jr(sa,3553),Fr(),Pr(Bn),Qe.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,Bn.width,Bn.height,sa.genMipmaps,!1)),dn.format=kn[Ln.internalformat],dn.type=yn[Ln.type],dn.mag=Wn[sa.magFilter],dn.min=In[sa.minFilter],dn.wrapS=$n[sa.wrapS],dn.wrapT=$n[sa.wrapT],dn}var Ln=new lr(3553);return Ka[Ln.id]=Ln,tt.textureCount++,dn(kr,bn),dn.subimage=function(ra,ma,sa,Bn){ma|=0,sa|=0,Bn|=0;var Qn=ct();return ft(Qn,Ln),Qn.width=0,Qn.height=0,Se(Qn,ra),Qn.width=Qn.width||(Ln.width>>Bn)-ma,Qn.height=Qn.height||(Ln.height>>Bn)-sa,br(Ln),ot(Qn,3553,ma,sa,Bn),Fr(),pt(Qn),dn},dn.resize=function(ra,ma){var sa=ra|0,Bn=ma|0||sa;if(sa===Ln.width&&Bn===Ln.height)return dn;dn.width=Ln.width=sa,dn.height=Ln.height=Bn,br(Ln);for(var Qn=0;Ln.mipmask>>Qn;++Qn){var Xa=sa>>Qn,yi=Bn>>Qn;if(!Xa||!yi)break;st.texImage2D(3553,Qn,Ln.format,Xa,yi,0,Ln.format,Ln.type,null)}return Fr(),Qe.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,sa,Bn,!1,!1)),dn},dn._reglType="texture2d",dn._texture=Ln,Qe.profile&&(dn.stats=Ln.stats),dn.destroy=function(){Ln.decRef()},dn},createCube:function(kr,bn,dn,Ln,ra,ma){function sa(Xa,yi,Yt,gr,un,mn){var sn,Cn=Bn.texInfo;for(Ar.call(Cn),sn=0;6>sn;++sn)Qn[sn]=or();if(typeof Xa=="number"||!Xa)for(Xa=Xa|0||1,sn=0;6>sn;++sn)xt(Qn[sn],Xa,Xa);else if(typeof Xa=="object")if(yi)Pt(Qn[0],Xa),Pt(Qn[1],yi),Pt(Qn[2],Yt),Pt(Qn[3],gr),Pt(Qn[4],un),Pt(Qn[5],mn);else if(Er(Cn,Xa),Et(Bn,Xa),"faces"in Xa)for(Xa=Xa.faces,sn=0;6>sn;++sn)ft(Qn[sn],Bn),Pt(Qn[sn],Xa[sn]);else for(sn=0;6>sn;++sn)Pt(Qn[sn],Xa);for(ft(Bn,Qn[0]),Bn.mipmask=Cn.genMipmaps?(Qn[0].width<<1)-1:Qn[0].mipmask,Bn.internalformat=Qn[0].internalformat,sa.width=Qn[0].width,sa.height=Qn[0].height,br(Bn),sn=0;6>sn;++sn)Xt(Qn[sn],34069+sn);for(Jr(Cn,34067),Fr(),Qe.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,sa.width,sa.height,Cn.genMipmaps,!0)),sa.format=kn[Bn.internalformat],sa.type=yn[Bn.type],sa.mag=Wn[Cn.magFilter],sa.min=In[Cn.minFilter],sa.wrapS=$n[Cn.wrapS],sa.wrapT=$n[Cn.wrapT],sn=0;6>sn;++sn)Pr(Qn[sn]);return sa}var Bn=new lr(34067);Ka[Bn.id]=Bn,tt.cubeCount++;var Qn=Array(6);return sa(kr,bn,dn,Ln,ra,ma),sa.subimage=function(Xa,yi,Yt,gr,un){Yt|=0,gr|=0,un|=0;var mn=ct();return ft(mn,Bn),mn.width=0,mn.height=0,Se(mn,yi),mn.width=mn.width||(Bn.width>>un)-Yt,mn.height=mn.height||(Bn.height>>un)-gr,br(Bn),ot(mn,34069+Xa,Yt,gr,un),Fr(),pt(mn),sa},sa.resize=function(Xa){if(Xa|=0,Xa!==Bn.width){sa.width=Bn.width=Xa,sa.height=Bn.height=Xa,br(Bn);for(var yi=0;6>yi;++yi)for(var Yt=0;Bn.mipmask>>Yt;++Yt)st.texImage2D(34069+yi,Yt,Bn.format,Xa>>Yt,Xa>>Yt,0,Bn.format,Bn.type,null);return Fr(),Qe.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,sa.width,sa.height,!1,!0)),sa}},sa._reglType="textureCube",sa._texture=Bn,Qe.profile&&(sa.stats=Bn.stats),sa.destroy=function(){Bn.decRef()},sa},clear:function(){for(var kr=0;kr<ri;++kr)st.activeTexture(33984+kr),st.bindTexture(3553,null),ei[kr]=null;De(Ka).forEach(Hr),tt.cubeCount=0,tt.textureCount=0},getTexture:function(kr){return null},restore:function(){for(var kr=0;kr<ri;++kr){var bn=ei[kr];bn&&(bn.bindCount=0,bn.unit=-1,ei[kr]=null)}De(Ka).forEach(function(dn){dn.texture=st.createTexture(),st.bindTexture(dn.target,dn.texture);for(var Ln=0;32>Ln;++Ln)if((dn.mipmask&1<<Ln)!==0)if(dn.target===3553)st.texImage2D(3553,Ln,dn.internalformat,dn.width>>Ln,dn.height>>Ln,0,dn.internalformat,dn.type,null);else for(var ra=0;6>ra;++ra)st.texImage2D(34069+ra,Ln,dn.internalformat,dn.width>>Ln,dn.height>>Ln,0,dn.internalformat,dn.type,null);Jr(dn.texInfo,dn.target)})},refresh:function(){for(var kr=0;kr<ri;++kr){var bn=ei[kr];bn&&(bn.bindCount=0,bn.unit=-1,ei[kr]=null),st.activeTexture(33984+kr),st.bindTexture(3553,null),st.bindTexture(34067,null)}}}}function R(st,rr,$t,hr,Sr,tt){function Qe(lr,br,Fr){this.target=lr,this.texture=br,this.renderbuffer=Fr;var Hr=lr=0;br?(lr=br.width,Hr=br.height):Fr&&(lr=Fr.width,Hr=Fr.height),this.width=lr,this.height=Hr}function lt(lr){lr&&(lr.texture&&lr.texture._texture.decRef(),lr.renderbuffer&&lr.renderbuffer._renderbuffer.decRef())}function ft(lr,br,Fr){lr&&(lr.texture?lr.texture._texture.refCount+=1:lr.renderbuffer._renderbuffer.refCount+=1)}function Et(lr,br){br&&(br.texture?st.framebufferTexture2D(36160,lr,br.target,br.texture._texture.texture,0):st.framebufferRenderbuffer(36160,lr,36161,br.renderbuffer._renderbuffer.renderbuffer))}function Vt(lr){var br=3553,Fr=null,Hr=null,Lr=lr;return typeof lr=="object"&&(Lr=lr.data,"target"in lr&&(br=lr.target|0)),lr=Lr._reglType,lr==="texture2d"||lr==="textureCube"?Fr=Lr:lr==="renderbuffer"&&(Hr=Lr,br=36161),new Qe(br,Fr,Hr)}function Pe(lr,br,Fr,Hr,Lr){return Fr?(lr=hr.create2D({width:lr,height:br,format:Hr,type:Lr}),lr._texture.refCount=0,new Qe(3553,lr,null)):(lr=Sr.create({width:lr,height:br,format:Hr}),lr._renderbuffer.refCount=0,new Qe(36161,null,lr))}function Se(lr){return lr&&(lr.texture||lr.renderbuffer)}function ot(lr,br,Fr){lr&&(lr.texture?lr.texture.resize(br,Fr):lr.renderbuffer&&lr.renderbuffer.resize(br,Fr),lr.width=br,lr.height=Fr)}function ct(){this.id=Er++,Jr[this.id]=this,this.framebuffer=st.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function pt(lr){lr.colorAttachments.forEach(lt),lt(lr.depthAttachment),lt(lr.stencilAttachment),lt(lr.depthStencilAttachment)}function St(lr){st.deleteFramebuffer(lr.framebuffer),lr.framebuffer=null,tt.framebufferCount--,delete Jr[lr.id]}function xt(lr){var br;st.bindFramebuffer(36160,lr.framebuffer);var Fr=lr.colorAttachments;for(br=0;br<Fr.length;++br)Et(36064+br,Fr[br]);for(br=Fr.length;br<$t.maxColorAttachments;++br)st.framebufferTexture2D(36160,36064+br,3553,null,0);st.framebufferTexture2D(36160,33306,3553,null,0),st.framebufferTexture2D(36160,36096,3553,null,0),st.framebufferTexture2D(36160,36128,3553,null,0),Et(36096,lr.depthAttachment),Et(36128,lr.stencilAttachment),Et(33306,lr.depthStencilAttachment),st.checkFramebufferStatus(36160),st.isContextLost(),st.bindFramebuffer(36160,Xt.next?Xt.next.framebuffer:null),Xt.cur=Xt.next,st.getError()}function Pt(lr,br){function Fr(Lr,at){var Rt,Kt=0,ur=0,Nr=!0,Vr=!0;Rt=null;var Dr=!0,Mr="rgba",jr="uint8",kn=1,yn=null,Wn=null,In=null,$n=!1;typeof Lr=="number"?(Kt=Lr|0,ur=at|0||Kt):Lr?("shape"in Lr?(ur=Lr.shape,Kt=ur[0],ur=ur[1]):("radius"in Lr&&(Kt=ur=Lr.radius),"width"in Lr&&(Kt=Lr.width),"height"in Lr&&(ur=Lr.height)),("color"in Lr||"colors"in Lr)&&(Rt=Lr.color||Lr.colors),Rt||("colorCount"in Lr&&(kn=Lr.colorCount|0),"colorTexture"in Lr&&(Dr=!!Lr.colorTexture,Mr="rgba4"),"colorType"in Lr&&(jr=Lr.colorType,!Dr)&&(jr==="half float"||jr==="float16"?Mr="rgba16f":(jr==="float"||jr==="float32")&&(Mr="rgba32f")),"colorFormat"in Lr&&(Mr=Lr.colorFormat,0<=or.indexOf(Mr)?Dr=!0:0<=Pr.indexOf(Mr)&&(Dr=!1))),("depthTexture"in Lr||"depthStencilTexture"in Lr)&&($n=!(!Lr.depthTexture&&!Lr.depthStencilTexture)),"depth"in Lr&&(typeof Lr.depth=="boolean"?Nr=Lr.depth:(yn=Lr.depth,Vr=!1)),"stencil"in Lr&&(typeof Lr.stencil=="boolean"?Vr=Lr.stencil:(Wn=Lr.stencil,Nr=!1)),"depthStencil"in Lr&&(typeof Lr.depthStencil=="boolean"?Nr=Vr=Lr.depthStencil:(In=Lr.depthStencil,Vr=Nr=!1))):Kt=ur=1;var Kn=null,ya=null,Ra=null,_i=null;if(Array.isArray(Rt))Kn=Rt.map(Vt);else if(Rt)Kn=[Vt(Rt)];else for(Kn=Array(kn),Rt=0;Rt<kn;++Rt)Kn[Rt]=Pe(Kt,ur,Dr,Mr,jr);for(Kt=Kt||Kn[0].width,ur=ur||Kn[0].height,yn?ya=Vt(yn):Nr&&!Vr&&(ya=Pe(Kt,ur,$n,"depth","uint32")),Wn?Ra=Vt(Wn):Vr&&!Nr&&(Ra=Pe(Kt,ur,!1,"stencil","uint8")),In?_i=Vt(In):!yn&&!Wn&&Vr&&Nr&&(_i=Pe(Kt,ur,$n,"depth stencil","depth stencil")),Nr=null,Rt=0;Rt<Kn.length;++Rt)ft(Kn[Rt]),Kn[Rt]&&Kn[Rt].texture&&(Vr=mt[Kn[Rt].texture._texture.format]*Mt[Kn[Rt].texture._texture.type],Nr===null&&(Nr=Vr));return ft(ya),ft(Ra),ft(_i),pt(Hr),Hr.width=Kt,Hr.height=ur,Hr.colorAttachments=Kn,Hr.depthAttachment=ya,Hr.stencilAttachment=Ra,Hr.depthStencilAttachment=_i,Fr.color=Kn.map(Se),Fr.depth=Se(ya),Fr.stencil=Se(Ra),Fr.depthStencil=Se(_i),Fr.width=Hr.width,Fr.height=Hr.height,xt(Hr),Fr}var Hr=new ct;return tt.framebufferCount++,Fr(lr,br),le(Fr,{resize:function(Lr,at){var Rt=Math.max(Lr|0,1),Kt=Math.max(at|0||Rt,1);if(Rt===Hr.width&&Kt===Hr.height)return Fr;for(var ur=Hr.colorAttachments,Nr=0;Nr<ur.length;++Nr)ot(ur[Nr],Rt,Kt);return ot(Hr.depthAttachment,Rt,Kt),ot(Hr.stencilAttachment,Rt,Kt),ot(Hr.depthStencilAttachment,Rt,Kt),Hr.width=Fr.width=Rt,Hr.height=Fr.height=Kt,xt(Hr),Fr},_reglType:"framebuffer",_framebuffer:Hr,destroy:function(){St(Hr),pt(Hr)},use:function(Lr){Xt.setFBO({framebuffer:Fr},Lr)}})}var Xt={cur:null,next:null,dirty:!1,setFBO:null},or=["rgba"],Pr=["rgba4","rgb565","rgb5 a1"];rr.ext_srgb&&Pr.push("srgba"),rr.ext_color_buffer_half_float&&Pr.push("rgba16f","rgb16f"),rr.webgl_color_buffer_float&&Pr.push("rgba32f");var Ar=["uint8"];rr.oes_texture_half_float&&Ar.push("half float","float16"),rr.oes_texture_float&&Ar.push("float","float32");var Er=0,Jr={};return le(Xt,{getFramebuffer:function(lr){return typeof lr=="function"&&lr._reglType==="framebuffer"&&(lr=lr._framebuffer,lr instanceof ct)?lr:null},create:Pt,createCube:function(lr){function br(Hr){var Lr,at={color:null},Rt=0,Kt=null;Lr="rgba";var ur="uint8",Nr=1;if(typeof Hr=="number"?Rt=Hr|0:Hr?("shape"in Hr?Rt=Hr.shape[0]:("radius"in Hr&&(Rt=Hr.radius|0),"width"in Hr?Rt=Hr.width|0:"height"in Hr&&(Rt=Hr.height|0)),("color"in Hr||"colors"in Hr)&&(Kt=Hr.color||Hr.colors),Kt||("colorCount"in Hr&&(Nr=Hr.colorCount|0),"colorType"in Hr&&(ur=Hr.colorType),"colorFormat"in Hr&&(Lr=Hr.colorFormat)),"depth"in Hr&&(at.depth=Hr.depth),"stencil"in Hr&&(at.stencil=Hr.stencil),"depthStencil"in Hr&&(at.depthStencil=Hr.depthStencil)):Rt=1,Kt)if(Array.isArray(Kt))for(Hr=[],Lr=0;Lr<Kt.length;++Lr)Hr[Lr]=Kt[Lr];else Hr=[Kt];else for(Hr=Array(Nr),Kt={radius:Rt,format:Lr,type:ur},Lr=0;Lr<Nr;++Lr)Hr[Lr]=hr.createCube(Kt);for(at.color=Array(Hr.length),Lr=0;Lr<Hr.length;++Lr)Nr=Hr[Lr],Rt=Rt||Nr.width,at.color[Lr]={target:34069,data:Hr[Lr]};for(Lr=0;6>Lr;++Lr){for(Nr=0;Nr<Hr.length;++Nr)at.color[Nr].target=34069+Lr;0<Lr&&(at.depth=Fr[0].depth,at.stencil=Fr[0].stencil,at.depthStencil=Fr[0].depthStencil),Fr[Lr]?Fr[Lr](at):Fr[Lr]=Pt(at)}return le(br,{width:Rt,height:Rt,color:Hr})}var Fr=Array(6);return br(lr),le(br,{faces:Fr,resize:function(Hr){var Lr=Hr|0;if(Lr===br.width)return br;var at=br.color;for(Hr=0;Hr<at.length;++Hr)at[Hr].resize(Lr);for(Hr=0;6>Hr;++Hr)Fr[Hr].resize(Lr);return br.width=br.height=Lr,br},_reglType:"framebufferCube",destroy:function(){Fr.forEach(function(Hr){Hr.destroy()})}})},clear:function(){De(Jr).forEach(St)},restore:function(){Xt.cur=null,Xt.next=null,Xt.dirty=!0,De(Jr).forEach(function(lr){lr.framebuffer=st.createFramebuffer(),xt(lr)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(st,rr,$t,hr,Sr,tt,Qe){function lt(xt){if(xt!==St.currentVAO){var Pt=rr.oes_vertex_array_object;xt?Pt.bindVertexArrayOES(xt.vao):Pt.bindVertexArrayOES(null),St.currentVAO=xt}}function ft(xt){if(xt!==St.currentVAO){if(xt)xt.bindAttrs();else{for(var Pt=rr.angle_instanced_arrays,Xt=0;Xt<ot.length;++Xt){var or=ot[Xt];or.buffer?(st.enableVertexAttribArray(Xt),or.buffer.bind(),st.vertexAttribPointer(Xt,or.size,or.type,or.normalized,or.stride,or.offfset),Pt&&or.divisor&&Pt.vertexAttribDivisorANGLE(Xt,or.divisor)):(st.disableVertexAttribArray(Xt),st.vertexAttrib4f(Xt,or.x,or.y,or.z,or.w))}Qe.elements?st.bindBuffer(34963,Qe.elements.buffer.buffer):st.bindBuffer(34963,null)}St.currentVAO=xt}}function Et(){De(pt).forEach(function(xt){xt.destroy()})}function Vt(){this.id=++ct,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var xt=rr.oes_vertex_array_object;this.vao=xt?xt.createVertexArrayOES():null,pt[this.id]=this,this.buffers=[]}function Pe(){rr.oes_vertex_array_object&&De(pt).forEach(function(xt){xt.refresh()})}var Se=$t.maxAttributes,ot=Array(Se);for($t=0;$t<Se;++$t)ot[$t]=new O;var ct=0,pt={},St={Record:O,scope:{},state:ot,currentVAO:null,targetVAO:null,restore:rr.oes_vertex_array_object?Pe:function(){},createVAO:function(xt){function Pt(or){var Pr;Array.isArray(or)?(Pr=or,Xt.elements&&Xt.ownsElements&&Xt.elements.destroy(),Xt.elements=null,Xt.ownsElements=!1,Xt.offset=0,Xt.count=0,Xt.instances=-1,Xt.primitive=4):(or.elements?(Pr=or.elements,Xt.ownsElements?(typeof Pr=="function"&&Pr._reglType==="elements"?Xt.elements.destroy():Xt.elements(Pr),Xt.ownsElements=!1):tt.getElements(or.elements)?(Xt.elements=or.elements,Xt.ownsElements=!1):(Xt.elements=tt.create(or.elements),Xt.ownsElements=!0)):(Xt.elements=null,Xt.ownsElements=!1),Pr=or.attributes,Xt.offset=0,Xt.count=-1,Xt.instances=-1,Xt.primitive=4,Xt.elements&&(Xt.count=Xt.elements._elements.vertCount,Xt.primitive=Xt.elements._elements.primType),"offset"in or&&(Xt.offset=or.offset|0),"count"in or&&(Xt.count=or.count|0),"instances"in or&&(Xt.instances=or.instances|0),"primitive"in or&&(Xt.primitive=Ve[or.primitive])),or={};var Ar=Xt.attributes;Ar.length=Pr.length;for(var Er=0;Er<Pr.length;++Er){var Jr=Pr[Er],lr=Ar[Er]=new O,br=Jr.data||Jr;if(Array.isArray(br)||ke(br)||d(br)){var Fr;Xt.buffers[Er]&&(Fr=Xt.buffers[Er],ke(br)&&Fr._buffer.byteLength>=br.byteLength?Fr.subdata(br):(Fr.destroy(),Xt.buffers[Er]=null)),Xt.buffers[Er]||(Fr=Xt.buffers[Er]=Sr.create(Jr,34962,!1,!0)),lr.buffer=Sr.getBuffer(Fr),lr.size=lr.buffer.dimension|0,lr.normalized=!1,lr.type=lr.buffer.dtype,lr.offset=0,lr.stride=0,lr.divisor=0,lr.state=1,or[Er]=1}else Sr.getBuffer(Jr)?(lr.buffer=Sr.getBuffer(Jr),lr.size=lr.buffer.dimension|0,lr.normalized=!1,lr.type=lr.buffer.dtype,lr.offset=0,lr.stride=0,lr.divisor=0,lr.state=1):Sr.getBuffer(Jr.buffer)?(lr.buffer=Sr.getBuffer(Jr.buffer),lr.size=(+Jr.size||lr.buffer.dimension)|0,lr.normalized=!!Jr.normalized||!1,lr.type="type"in Jr?Le[Jr.type]:lr.buffer.dtype,lr.offset=(Jr.offset||0)|0,lr.stride=(Jr.stride||0)|0,lr.divisor=(Jr.divisor||0)|0,lr.state=1):"x"in Jr&&(lr.x=+Jr.x||0,lr.y=+Jr.y||0,lr.z=+Jr.z||0,lr.w=+Jr.w||0,lr.state=2)}for(Fr=0;Fr<Xt.buffers.length;++Fr)!or[Fr]&&Xt.buffers[Fr]&&(Xt.buffers[Fr].destroy(),Xt.buffers[Fr]=null);return Xt.refresh(),Pt}var Xt=new Vt;return hr.vaoCount+=1,Pt.destroy=function(){for(var or=0;or<Xt.buffers.length;++or)Xt.buffers[or]&&Xt.buffers[or].destroy();Xt.buffers.length=0,Xt.ownsElements&&(Xt.elements.destroy(),Xt.elements=null,Xt.ownsElements=!1),Xt.destroy()},Pt._vao=Xt,Pt._reglType="vao",Pt(xt)},getVAO:function(xt){return typeof xt=="function"&&xt._vao?xt._vao:null},destroyBuffer:function(xt){for(var Pt=0;Pt<ot.length;++Pt){var Xt=ot[Pt];Xt.buffer===xt&&(st.disableVertexAttribArray(Pt),Xt.buffer=null)}},setVAO:rr.oes_vertex_array_object?lt:ft,clear:rr.oes_vertex_array_object?Et:function(){}};return Vt.prototype.bindAttrs=function(){for(var xt=rr.angle_instanced_arrays,Pt=this.attributes,Xt=0;Xt<Pt.length;++Xt){var or=Pt[Xt];or.buffer?(st.enableVertexAttribArray(Xt),st.bindBuffer(34962,or.buffer.buffer),st.vertexAttribPointer(Xt,or.size,or.type,or.normalized,or.stride,or.offset),xt&&or.divisor&&xt.vertexAttribDivisorANGLE(Xt,or.divisor)):(st.disableVertexAttribArray(Xt),st.vertexAttrib4f(Xt,or.x,or.y,or.z,or.w))}for(xt=Pt.length;xt<Se;++xt)st.disableVertexAttribArray(xt);(xt=tt.getElements(this.elements))?st.bindBuffer(34963,xt.buffer.buffer):st.bindBuffer(34963,null)},Vt.prototype.refresh=function(){var xt=rr.oes_vertex_array_object;xt&&(xt.bindVertexArrayOES(this.vao),this.bindAttrs(),St.currentVAO=null,xt.bindVertexArrayOES(null))},Vt.prototype.destroy=function(){if(this.vao){var xt=rr.oes_vertex_array_object;this===St.currentVAO&&(St.currentVAO=null,xt.bindVertexArrayOES(null)),xt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),pt[this.id]&&(delete pt[this.id],--hr.vaoCount)},St}function G(st,rr,$t,hr){function Sr(ct,pt,St,xt){this.name=ct,this.id=pt,this.location=St,this.info=xt}function tt(ct,pt){for(var St=0;St<ct.length;++St)if(ct[St].id===pt.id){ct[St].location=pt.location;return}ct.push(pt)}function Qe(ct,pt,St){St=ct===35632?Et:Vt;var xt=St[pt];if(!xt){var Pt=rr.str(pt),xt=st.createShader(ct);st.shaderSource(xt,Pt),st.compileShader(xt),St[pt]=xt}return xt}function lt(ct,pt){this.id=ot++,this.fragId=ct,this.vertId=pt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,hr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ft(ct,pt,St){var xt;xt=Qe(35632,ct.fragId);var Pt=Qe(35633,ct.vertId);if(pt=ct.program=st.createProgram(),st.attachShader(pt,xt),st.attachShader(pt,Pt),St)for(xt=0;xt<St.length;++xt)Pt=St[xt],st.bindAttribLocation(pt,Pt[0],Pt[1]);st.linkProgram(pt),Pt=st.getProgramParameter(pt,35718),hr.profile&&(ct.stats.uniformsCount=Pt);var Xt=ct.uniforms;for(xt=0;xt<Pt;++xt)if(St=st.getActiveUniform(pt,xt))if(1<St.size)for(var or=0;or<St.size;++or){var Pr=St.name.replace("[0]","["+or+"]");tt(Xt,new Sr(Pr,rr.id(Pr),st.getUniformLocation(pt,Pr),St))}else tt(Xt,new Sr(St.name,rr.id(St.name),st.getUniformLocation(pt,St.name),St));for(Pt=st.getProgramParameter(pt,35721),hr.profile&&(ct.stats.attributesCount=Pt),ct=ct.attributes,xt=0;xt<Pt;++xt)(St=st.getActiveAttrib(pt,xt))&&tt(ct,new Sr(St.name,rr.id(St.name),st.getAttribLocation(pt,St.name),St))}var Et={},Vt={},Pe={},Se=[],ot=0;return hr.profile&&($t.getMaxUniformsCount=function(){var ct=0;return Se.forEach(function(pt){pt.stats.uniformsCount>ct&&(ct=pt.stats.uniformsCount)}),ct},$t.getMaxAttributesCount=function(){var ct=0;return Se.forEach(function(pt){pt.stats.attributesCount>ct&&(ct=pt.stats.attributesCount)}),ct}),{clear:function(){var ct=st.deleteShader.bind(st);De(Et).forEach(ct),Et={},De(Vt).forEach(ct),Vt={},Se.forEach(function(pt){st.deleteProgram(pt.program)}),Se.length=0,Pe={},$t.shaderCount=0},program:function(ct,pt,St,xt){var Pt=Pe[pt];Pt||(Pt=Pe[pt]={});var Xt=Pt[ct];if(Xt&&(Xt.refCount++,!xt))return Xt;var or=new lt(pt,ct);return $t.shaderCount++,ft(or,St,xt),Xt||(Pt[ct]=or),Se.push(or),le(or,{destroy:function(){if(or.refCount--,0>=or.refCount){st.deleteProgram(or.program);var Pr=Se.indexOf(or);Se.splice(Pr,1),$t.shaderCount--}0>=Pt[or.vertId].refCount&&(st.deleteShader(Vt[or.vertId]),delete Vt[or.vertId],delete Pe[or.fragId][or.vertId]),Object.keys(Pe[or.fragId]).length||(st.deleteShader(Et[or.fragId]),delete Et[or.fragId],delete Pe[or.fragId])}})},restore:function(){Et={},Vt={};for(var ct=0;ct<Se.length;++ct)ft(Se[ct],null,Se[ct].attributes.map(function(pt){return[pt.location,pt.name]}))},shader:Qe,frag:-1,vert:-1}}function Y(st,rr,$t,hr,Sr,tt,Qe){function lt(Et){var Vt;Vt=rr.next===null?5121:rr.next.colorAttachments[0].texture._texture.type;var Pe=0,Se=0,ot=hr.framebufferWidth,ct=hr.framebufferHeight,pt=null;return ke(Et)?pt=Et:Et&&(Pe=Et.x|0,Se=Et.y|0,ot=(Et.width||hr.framebufferWidth-Pe)|0,ct=(Et.height||hr.framebufferHeight-Se)|0,pt=Et.data||null),$t(),Et=ot*ct*4,pt||(Vt===5121?pt=new Uint8Array(Et):Vt===5126&&(pt=pt||new Float32Array(Et))),st.pixelStorei(3333,4),st.readPixels(Pe,Se,ot,ct,6408,Vt,pt),pt}function ft(Et){var Vt;return rr.setFBO({framebuffer:Et.framebuffer},function(){Vt=lt(Et)}),Vt}return function(Et){return Et&&"framebuffer"in Et?ft(Et):lt(Et)}}function ee(st){for(var rr=Array(st.length>>2),hr=0;hr<rr.length;hr++)rr[hr]=0;for(hr=0;hr<8*st.length;hr+=8)rr[hr>>5]|=(st.charCodeAt(hr/8)&255)<<24-hr%32;var $t=8*st.length;st=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var hr=Array(64),Sr,tt,Qe,lt,ft,Et,Vt,Pe,Se,ot,ct;for(rr[$t>>5]|=128<<24-$t%32,rr[($t+64>>9<<4)+15]=$t,Pe=0;Pe<rr.length;Pe+=16){for($t=st[0],Sr=st[1],tt=st[2],Qe=st[3],lt=st[4],ft=st[5],Et=st[6],Vt=st[7],Se=0;64>Se;Se++){if(16>Se)hr[Se]=rr[Se+Pe];else{ot=Se,ct=hr[Se-2],ct=ae(ct,17)^ae(ct,19)^ct>>>10,ct=he(ct,hr[Se-7]);var pt;pt=hr[Se-15],pt=ae(pt,7)^ae(pt,18)^pt>>>3,hr[ot]=he(he(ct,pt),hr[Se-16])}ot=lt,ot=ae(ot,6)^ae(ot,11)^ae(ot,25),ot=he(he(he(he(Vt,ot),lt&ft^~lt&Et),Gt[Se]),hr[Se]),Vt=$t,Vt=ae(Vt,2)^ae(Vt,13)^ae(Vt,22),ct=he(Vt,$t&Sr^$t&tt^Sr&tt),Vt=Et,Et=ft,ft=lt,lt=he(Qe,ot),Qe=tt,tt=Sr,Sr=$t,$t=he(ot,ct)}st[0]=he($t,st[0]),st[1]=he(Sr,st[1]),st[2]=he(tt,st[2]),st[3]=he(Qe,st[3]),st[4]=he(lt,st[4]),st[5]=he(ft,st[5]),st[6]=he(Et,st[6]),st[7]=he(Vt,st[7])}for(rr="",hr=0;hr<32*st.length;hr+=8)rr+=String.fromCharCode(st[hr>>5]>>>24-hr%32&255);return rr}function j(st){for(var rr="",$t,hr=0;hr<st.length;hr++)$t=st.charCodeAt(hr),rr+="0123456789abcdef".charAt($t>>>4&15)+"0123456789abcdef".charAt($t&15);return rr}function X(st){for(var rr="",$t=-1,hr,Sr;++$t<st.length;)hr=st.charCodeAt($t),Sr=$t+1<st.length?st.charCodeAt($t+1):0,55296<=hr&&56319>=hr&&56320<=Sr&&57343>=Sr&&(hr=65536+((hr&1023)<<10)+(Sr&1023),$t++),127>=hr?rr+=String.fromCharCode(hr):2047>=hr?rr+=String.fromCharCode(192|hr>>>6&31,128|hr&63):65535>=hr?rr+=String.fromCharCode(224|hr>>>12&15,128|hr>>>6&63,128|hr&63):2097151>=hr&&(rr+=String.fromCharCode(240|hr>>>18&7,128|hr>>>12&63,128|hr>>>6&63,128|hr&63));return rr}function ae(st,rr){return st>>>rr|st<<32-rr}function he(st,rr){var $t=(st&65535)+(rr&65535);return(st>>16)+(rr>>16)+($t>>16)<<16|$t&65535}function K(st){return Array.prototype.slice.call(st)}function J(st){return K(st).join("")}function U(st){function rr(){var Vt=[],Pe=[];return le(function(){Vt.push.apply(Vt,K(arguments))},{def:function(){var Se="v"+Sr++;return Pe.push(Se),0<arguments.length&&(Vt.push(Se,"="),Vt.push.apply(Vt,K(arguments)),Vt.push(";")),Se},toString:function(){return J([0<Pe.length?"var "+Pe.join(",")+";":"",J(Vt)])}})}function $t(){function Vt(pt,St){Se(pt,St,"=",Pe.def(pt,St),";")}var Pe=rr(),Se=rr(),ot=Pe.toString,ct=Se.toString;return le(function(){Pe.apply(Pe,K(arguments))},{def:Pe.def,entry:Pe,exit:Se,save:Vt,set:function(pt,St,xt){Vt(pt,St),Pe(pt,St,"=",xt,";")},toString:function(){return ot()+ct()}})}var hr=st&&st.cache,Sr=0,tt=[],Qe=[],lt=[],ft=rr(),Et={};return{global:ft,link:function(Vt,Pe){var Se=Pe&&Pe.stable;if(!Se){for(var ot=0;ot<Qe.length;++ot)if(Qe[ot]===Vt&&!lt[ot])return tt[ot]}return ot="g"+Sr++,tt.push(ot),Qe.push(Vt),lt.push(Se),ot},block:rr,proc:function(Vt,Pe){function Se(){var St="a"+ot.length;return ot.push(St),St}var ot=[];Pe=Pe||0;for(var ct=0;ct<Pe;++ct)Se();var ct=$t(),pt=ct.toString;return Et[Vt]=le(ct,{arg:Se,toString:function(){return J(["function(",ot.join(),"){",pt(),"}"])}})},scope:$t,cond:function(){var Vt=J(arguments),Pe=$t(),Se=$t(),ot=Pe.toString,ct=Se.toString;return le(Pe,{then:function(){return Pe.apply(Pe,K(arguments)),this},else:function(){return Se.apply(Se,K(arguments)),this},toString:function(){var pt=ct();return pt&&(pt="else{"+pt+"}"),J(["if(",Vt,"){",ot(),"}",pt])}})},compile:function(){var Vt=['"use strict";',ft,"return {"];Object.keys(Et).forEach(function(ot){Vt.push('"',ot,'":',Et[ot].toString(),",")}),Vt.push("}");var Pe=J(Vt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Se;return hr&&(Se=j(ee(X(Pe))),hr[Se])?hr[Se].apply(null,Qe):(Pe=Function.apply(null,tt.concat(Pe)),hr&&(hr[Se]=Pe),Pe.apply(null,Qe))}}}function H(st){return Array.isArray(st)||ke(st)||d(st)}function q(st){return st.sort(function(rr,$t){return rr==="viewport"?-1:$t==="viewport"?1:rr<$t?-1:1})}function re(st,rr,$t,hr){this.thisDep=st,this.contextDep=rr,this.propDep=$t,this.append=hr}function Z(st){return st&&!(st.thisDep||st.contextDep||st.propDep)}function Q(st){return new re(!1,!1,!1,st)}function ie(st,rr){var $t=st.type;if($t===0)return $t=st.data.length,new re(!0,1<=$t,2<=$t,rr);if($t===4)return $t=st.data,new re($t.thisDep,$t.contextDep,$t.propDep,rr);if($t===5)return new re(!1,!1,!1,rr);if($t===6){for(var hr=$t=!1,Sr=!1,tt=0;tt<st.data.length;++tt){var Qe=st.data[tt];Qe.type===1?Sr=!0:Qe.type===2?hr=!0:Qe.type===3?$t=!0:Qe.type===0?($t=!0,Qe=Qe.data,1<=Qe&&(hr=!0),2<=Qe&&(Sr=!0)):Qe.type===4&&($t=$t||Qe.data.thisDep,hr=hr||Qe.data.contextDep,Sr=Sr||Qe.data.propDep)}return new re($t,hr,Sr,rr)}return new re($t===3,$t===2,$t===1,rr)}function oe(st,rr,$t,hr,Sr,tt,Qe,lt,ft,Et,Vt,Pe,Se,ot,ct,pt){function St(Yt){return Yt.replace(".","_")}function xt(Yt,gr,un){var mn=St(Yt);ma.push(Yt),ra[mn]=Ln[mn]=!!un,sa[mn]=gr}function Pt(Yt,gr,un){var mn=St(Yt);ma.push(Yt),Array.isArray(un)?(Ln[mn]=un.slice(),ra[mn]=un.slice()):Ln[mn]=ra[mn]=un,Bn[mn]=gr}function Xt(){var Yt=U({cache:ct}),gr=Yt.link,un=Yt.global;Yt.id=yi++,Yt.batchId="0";var mn=gr(Qn),sn=Yt.shared={props:"a0"};Object.keys(Qn).forEach(function(wr){sn[wr]=un.def(mn,".",wr)});var Cn=Yt.next={},Tn=Yt.current={};Object.keys(Bn).forEach(function(wr){Array.isArray(Ln[wr])&&(Cn[wr]=un.def(sn.next,".",wr),Tn[wr]=un.def(sn.current,".",wr))});var gn=Yt.constants={};Object.keys(Xa).forEach(function(wr){gn[wr]=un.def(JSON.stringify(Xa[wr]))}),Yt.invoke=function(wr,Br){switch(Br.type){case 0:var An=["this",sn.context,sn.props,Yt.batchId];return wr.def(gr(Br.data),".call(",An.slice(0,Math.max(Br.data.length+1,4)),")");case 1:return wr.def(sn.props,Br.data);case 2:return wr.def(sn.context,Br.data);case 3:return wr.def("this",Br.data);case 4:return Br.data.append(Yt,wr),Br.data.ref;case 5:return Br.data.toString();case 6:return Br.data.map(function(Yn){return Yt.invoke(wr,Yn)})}},Yt.attribCache={};var _r={};return Yt.scopeAttrib=function(wr){if(wr=rr.id(wr),wr in _r)return _r[wr];var Br=Et.scope[wr];return Br||(Br=Et.scope[wr]=new ri),_r[wr]=gr(Br)},Yt}function or(Yt){var gr=Yt.static;Yt=Yt.dynamic;var un;if("profile"in gr){var mn=!!gr.profile;un=Q(function(Cn,Tn){return mn}),un.enable=mn}else if("profile"in Yt){var sn=Yt.profile;un=ie(sn,function(Cn,Tn){return Cn.invoke(Tn,sn)})}return un}function Pr(Yt,gr){var un=Yt.static,mn=Yt.dynamic;if("framebuffer"in un){var sn=un.framebuffer;return sn?(sn=lt.getFramebuffer(sn),Q(function(Tn,gn){var _r=Tn.link(sn),wr=Tn.shared;return gn.set(wr.framebuffer,".next",_r),wr=wr.context,gn.set(wr,".framebufferWidth",_r+".width"),gn.set(wr,".framebufferHeight",_r+".height"),_r})):Q(function(Tn,gn){var _r=Tn.shared;return gn.set(_r.framebuffer,".next","null"),_r=_r.context,gn.set(_r,".framebufferWidth",_r+".drawingBufferWidth"),gn.set(_r,".framebufferHeight",_r+".drawingBufferHeight"),"null"})}if("framebuffer"in mn){var Cn=mn.framebuffer;return ie(Cn,function(Tn,gn){var Br=Tn.invoke(gn,Cn),_r=Tn.shared,wr=_r.framebuffer,Br=gn.def(wr,".getFramebuffer(",Br,")");return gn.set(wr,".next",Br),_r=_r.context,gn.set(_r,".framebufferWidth",Br+"?"+Br+".width:"+_r+".drawingBufferWidth"),gn.set(_r,".framebufferHeight",Br+"?"+Br+".height:"+_r+".drawingBufferHeight"),Br})}return null}function Ar(Yt,gr,un){function mn(gn){if(gn in sn){var _r=sn[gn];gn=!0;var wr=_r.x|0,Br=_r.y|0,An,Yn;return"width"in _r?An=_r.width|0:gn=!1,"height"in _r?Yn=_r.height|0:gn=!1,new re(!gn&&gr&&gr.thisDep,!gn&&gr&&gr.contextDep,!gn&&gr&&gr.propDep,function(Sn,na){var fa=Sn.shared.context,Ma=An;"width"in _r||(Ma=na.def(fa,".","framebufferWidth","-",wr));var ka=Yn;return"height"in _r||(ka=na.def(fa,".","framebufferHeight","-",Br)),[wr,Br,Ma,ka]})}if(gn in Cn){var ua=Cn[gn];return gn=ie(ua,function(Sn,na){var Ia=Sn.invoke(na,ua),fa=Sn.shared.context,Ma=na.def(Ia,".x|0"),ka=na.def(Ia,".y|0"),ga=na.def('"width" in ',Ia,"?",Ia,".width|0:","(",fa,".","framebufferWidth","-",Ma,")"),Ia=na.def('"height" in ',Ia,"?",Ia,".height|0:","(",fa,".","framebufferHeight","-",ka,")");return[Ma,ka,ga,Ia]}),gr&&(gn.thisDep=gn.thisDep||gr.thisDep,gn.contextDep=gn.contextDep||gr.contextDep,gn.propDep=gn.propDep||gr.propDep),gn}return gr?new re(gr.thisDep,gr.contextDep,gr.propDep,function(Sn,na){var fa=Sn.shared.context;return[0,0,na.def(fa,".","framebufferWidth"),na.def(fa,".","framebufferHeight")]}):null}var sn=Yt.static,Cn=Yt.dynamic;if(Yt=mn("viewport")){var Tn=Yt;Yt=new re(Yt.thisDep,Yt.contextDep,Yt.propDep,function(gn,_r){var wr=Tn.append(gn,_r),Br=gn.shared.context;return _r.set(Br,".viewportWidth",wr[2]),_r.set(Br,".viewportHeight",wr[3]),wr})}return{viewport:Yt,scissor_box:mn("scissor.box")}}function Er(Yt,gr){var un=Yt.static;if(typeof un.frag=="string"&&typeof un.vert=="string"){if(0<Object.keys(gr.dynamic).length)return null;var un=gr.static,mn=Object.keys(un);if(0<mn.length&&typeof un[mn[0]]=="number"){for(var sn=[],Cn=0;Cn<mn.length;++Cn)sn.push([un[mn[Cn]]|0,mn[Cn]]);return sn}}return null}function Jr(Yt,gr,un){function mn(wr){if(wr in sn){var Br=rr.id(sn[wr]);return wr=Q(function(){return Br}),wr.id=Br,wr}if(wr in Cn){var An=Cn[wr];return ie(An,function(Yn,ua){var Sn=Yn.invoke(ua,An);return ua.def(Yn.shared.strings,".id(",Sn,")")})}return null}var sn=Yt.static,Cn=Yt.dynamic,Tn=mn("frag"),gn=mn("vert"),_r=null;return Z(Tn)&&Z(gn)?(_r=Vt.program(gn.id,Tn.id,null,un),Yt=Q(function(wr,Br){return wr.link(_r)})):Yt=new re(Tn&&Tn.thisDep||gn&&gn.thisDep,Tn&&Tn.contextDep||gn&&gn.contextDep,Tn&&Tn.propDep||gn&&gn.propDep,function(wr,Br){var An=wr.shared.shader,Yn;Yn=Tn?Tn.append(wr,Br):Br.def(An,".","frag");var ua;return ua=gn?gn.append(wr,Br):Br.def(An,".","vert"),Br.def(An+".program("+ua+","+Yn+")")}),{frag:Tn,vert:gn,progVar:Yt,program:_r}}function lr(Yt,gr){function un(Sn,na){if(Sn in mn){var fa=mn[Sn]|0;return na?Cn.offset=fa:Cn.instances=fa,Q(function(ka,ga){return na&&(ka.OFFSET=fa),fa})}if(Sn in sn){var Ma=sn[Sn];return ie(Ma,function(ka,ga){var Ia=ka.invoke(ga,Ma);return na&&(ka.OFFSET=Ia),Ia})}if(na){if(_r)return Q(function(ka,ga){return ka.OFFSET=0});if(Tn)return new re(gn.thisDep,gn.contextDep,gn.propDep,function(ka,ga){return ga.def(ka.shared.vao+".currentVAO?"+ka.shared.vao+".currentVAO.offset:0")})}else if(Tn)return new re(gn.thisDep,gn.contextDep,gn.propDep,function(ka,ga){return ga.def(ka.shared.vao+".currentVAO?"+ka.shared.vao+".currentVAO.instances:-1")});return null}var mn=Yt.static,sn=Yt.dynamic,Cn={},Tn=!1,gn=function(){if("vao"in mn){var Sn=mn.vao;return Sn!==null&&Et.getVAO(Sn)===null&&(Sn=Et.createVAO(Sn)),Tn=!0,Cn.vao=Sn,Q(function(fa){var Ma=Et.getVAO(Sn);return Ma?fa.link(Ma):"null"})}if("vao"in sn){Tn=!0;var na=sn.vao;return ie(na,function(fa,Ma){var ka=fa.invoke(Ma,na);return Ma.def(fa.shared.vao+".getVAO("+ka+")")})}return null}(),_r=!1,wr=function(){if("elements"in mn){var Sn=mn.elements;if(Cn.elements=Sn,H(Sn)){var na=Cn.elements=tt.create(Sn,!0),Sn=tt.getElements(na);_r=!0}else Sn&&(Sn=tt.getElements(Sn),_r=!0);return na=Q(function(Ma,ka){if(Sn){var ga=Ma.link(Sn);return Ma.ELEMENTS=ga}return Ma.ELEMENTS=null}),na.value=Sn,na}if("elements"in sn){_r=!0;var fa=sn.elements;return ie(fa,function(Ma,ka){var ga=Ma.shared,Ao=ga.isBufferArgs,ga=ga.elements,ro=Ma.invoke(ka,fa),Ia=ka.def("null"),Ao=ka.def(Ao,"(",ro,")"),ro=Ma.cond(Ao).then(Ia,"=",ga,".createStream(",ro,");").else(Ia,"=",ga,".getElements(",ro,");");return ka.entry(ro),ka.exit(Ma.cond(Ao).then(ga,".destroyStream(",Ia,");")),Ma.ELEMENTS=Ia})}return Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(Ma,ka){return ka.def(Ma.shared.vao+".currentVAO?"+Ma.shared.elements+".getElements("+Ma.shared.vao+".currentVAO.elements):null")}):null}(),Br=un("offset",!0),An=function(){if("primitive"in mn){var Sn=mn.primitive;return Cn.primitive=Sn,Q(function(fa,Ma){return Ve[Sn]})}if("primitive"in sn){var na=sn.primitive;return ie(na,function(fa,Ma){var ka=fa.constants.primTypes,ga=fa.invoke(Ma,na);return Ma.def(ka,"[",ga,"]")})}return _r?Z(wr)?wr.value?Q(function(fa,Ma){return Ma.def(fa.ELEMENTS,".primType")}):Q(function(){return 4}):new re(wr.thisDep,wr.contextDep,wr.propDep,function(fa,Ma){var ka=fa.ELEMENTS;return Ma.def(ka,"?",ka,".primType:",4)}):Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(fa,Ma){return Ma.def(fa.shared.vao+".currentVAO?"+fa.shared.vao+".currentVAO.primitive:4")}):null}(),Yn=function(){if("count"in mn){var Sn=mn.count|0;return Cn.count=Sn,Q(function(){return Sn})}if("count"in sn){var na=sn.count;return ie(na,function(fa,Ma){return fa.invoke(Ma,na)})}return _r?Z(wr)?wr?Br?new re(Br.thisDep,Br.contextDep,Br.propDep,function(fa,Ma){return Ma.def(fa.ELEMENTS,".vertCount-",fa.OFFSET)}):Q(function(fa,Ma){return Ma.def(fa.ELEMENTS,".vertCount")}):Q(function(){return-1}):new re(wr.thisDep||Br.thisDep,wr.contextDep||Br.contextDep,wr.propDep||Br.propDep,function(fa,Ma){var ka=fa.ELEMENTS;return fa.OFFSET?Ma.def(ka,"?",ka,".vertCount-",fa.OFFSET,":-1"):Ma.def(ka,"?",ka,".vertCount:-1")}):Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(fa,Ma){return Ma.def(fa.shared.vao,".currentVAO?",fa.shared.vao,".currentVAO.count:-1")}):null}(),ua=un("instances",!1);return{elements:wr,primitive:An,count:Yn,instances:ua,offset:Br,vao:gn,vaoActive:Tn,elementsActive:_r,static:Cn}}function br(Yt,gr){var un=Yt.static,mn=Yt.dynamic,sn={};return ma.forEach(function(Cn){function Tn(_r,wr){if(Cn in un){var Br=_r(un[Cn]);sn[gn]=Q(function(){return Br})}else if(Cn in mn){var An=mn[Cn];sn[gn]=ie(An,function(Yn,ua){return wr(Yn,ua,Yn.invoke(ua,An))})}}var gn=St(Cn);switch(Cn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Tn(function(_r){return _r},function(_r,wr,Br){return Br});case"depth.func":return Tn(function(_r){return Wt[_r]},function(_r,wr,Br){return wr.def(_r.constants.compareFuncs,"[",Br,"]")});case"depth.range":return Tn(function(_r){return _r},function(_r,wr,Br){return _r=wr.def("+",Br,"[0]"),wr=wr.def("+",Br,"[1]"),[_r,wr]});case"blend.func":return Tn(function(_r){return[Zt["srcRGB"in _r?_r.srcRGB:_r.src],Zt["dstRGB"in _r?_r.dstRGB:_r.dst],Zt["srcAlpha"in _r?_r.srcAlpha:_r.src],Zt["dstAlpha"in _r?_r.dstAlpha:_r.dst]]},function(_r,wr,Br){function An(na,fa){return wr.def('"',na,fa,'" in ',Br,"?",Br,".",na,fa,":",Br,".",na)}_r=_r.constants.blendFuncs;var Yn=An("src","RGB"),Sn=An("dst","RGB"),Yn=wr.def(_r,"[",Yn,"]"),ua=wr.def(_r,"[",An("src","Alpha"),"]"),Sn=wr.def(_r,"[",Sn,"]");return _r=wr.def(_r,"[",An("dst","Alpha"),"]"),[Yn,Sn,ua,_r]});case"blend.equation":return Tn(function(_r){if(typeof _r=="string")return[ei[_r],ei[_r]];if(typeof _r=="object")return[ei[_r.rgb],ei[_r.alpha]]},function(_r,wr,Br){var An=_r.constants.blendEquations,Yn=wr.def(),ua=wr.def();return _r=_r.cond("typeof ",Br,'==="string"'),_r.then(Yn,"=",ua,"=",An,"[",Br,"];"),_r.else(Yn,"=",An,"[",Br,".rgb];",ua,"=",An,"[",Br,".alpha];"),wr(_r),[Yn,ua]});case"blend.color":return Tn(function(_r){return o(4,function(wr){return+_r[wr]})},function(_r,wr,Br){return o(4,function(An){return wr.def("+",Br,"[",An,"]")})});case"stencil.mask":return Tn(function(_r){return _r|0},function(_r,wr,Br){return wr.def(Br,"|0")});case"stencil.func":return Tn(function(_r){return[Wt[_r.cmp||"keep"],_r.ref||0,"mask"in _r?_r.mask:-1]},function(_r,wr,Br){_r=wr.def('"cmp" in ',Br,"?",_r.constants.compareFuncs,"[",Br,".cmp]",":",7680);var An=wr.def(Br,".ref|0");return wr=wr.def('"mask" in ',Br,"?",Br,".mask|0:-1"),[_r,An,wr]});case"stencil.opFront":case"stencil.opBack":return Tn(function(_r){return[Cn==="stencil.opBack"?1029:1028,sr[_r.fail||"keep"],sr[_r.zfail||"keep"],sr[_r.zpass||"keep"]]},function(_r,wr,Br){function An(ua){return wr.def('"',ua,'" in ',Br,"?",Yn,"[",Br,".",ua,"]:",7680)}var Yn=_r.constants.stencilOps;return[Cn==="stencil.opBack"?1029:1028,An("fail"),An("zfail"),An("zpass")]});case"polygonOffset.offset":return Tn(function(_r){return[_r.factor|0,_r.units|0]},function(_r,wr,Br){return _r=wr.def(Br,".factor|0"),wr=wr.def(Br,".units|0"),[_r,wr]});case"cull.face":return Tn(function(_r){var wr=0;return _r==="front"?wr=1028:_r==="back"&&(wr=1029),wr},function(_r,wr,Br){return wr.def(Br,'==="front"?',1028,":",1029)});case"lineWidth":return Tn(function(_r){return _r},function(_r,wr,Br){return Br});case"frontFace":return Tn(function(_r){return Gr[_r]},function(_r,wr,Br){return wr.def(Br+'==="cw"?2304:2305')});case"colorMask":return Tn(function(_r){return _r.map(function(wr){return!!wr})},function(_r,wr,Br){return o(4,function(An){return"!!"+Br+"["+An+"]"})});case"sample.coverage":return Tn(function(_r){return["value"in _r?_r.value:1,!!_r.invert]},function(_r,wr,Br){return _r=wr.def('"value" in ',Br,"?+",Br,".value:1"),wr=wr.def("!!",Br,".invert"),[_r,wr]})}}),sn}function Fr(Yt,gr){var un=Yt.static,mn=Yt.dynamic,sn={};return Object.keys(un).forEach(function(Cn){var Tn=un[Cn],gn;if(typeof Tn=="number"||typeof Tn=="boolean")gn=Q(function(){return Tn});else if(typeof Tn=="function"){var _r=Tn._reglType;_r==="texture2d"||_r==="textureCube"?gn=Q(function(wr){return wr.link(Tn)}):(_r==="framebuffer"||_r==="framebufferCube")&&(gn=Q(function(wr){return wr.link(Tn.color[0])}))}else _(Tn)&&(gn=Q(function(wr){return wr.global.def("[",o(Tn.length,function(Br){return Tn[Br]}),"]")}));gn.value=Tn,sn[Cn]=gn}),Object.keys(mn).forEach(function(Cn){var Tn=mn[Cn];sn[Cn]=ie(Tn,function(gn,_r){return gn.invoke(_r,Tn)})}),sn}function Hr(Yt,gr){var un=Yt.static,mn=Yt.dynamic,sn={};return Object.keys(un).forEach(function(Cn){var Tn=un[Cn],gn=rr.id(Cn),_r=new ri;if(H(Tn))_r.state=1,_r.buffer=Sr.getBuffer(Sr.create(Tn,34962,!1,!0)),_r.type=0;else{var wr=Sr.getBuffer(Tn);if(wr)_r.state=1,_r.buffer=wr,_r.type=0;else if("constant"in Tn){var Br=Tn.constant;_r.buffer="null",_r.state=2,typeof Br=="number"?_r.x=Br:zt.forEach(function(fa,Ma){Ma<Br.length&&(_r[fa]=Br[Ma])})}else{var wr=H(Tn.buffer)?Sr.getBuffer(Sr.create(Tn.buffer,34962,!1,!0)):Sr.getBuffer(Tn.buffer),An=Tn.offset|0,Yn=Tn.stride|0,ua=Tn.size|0,Sn=!!Tn.normalized,na=0;"type"in Tn&&(na=Le[Tn.type]),Tn=Tn.divisor|0,_r.buffer=wr,_r.state=1,_r.size=ua,_r.normalized=Sn,_r.type=na||wr.dtype,_r.offset=An,_r.stride=Yn,_r.divisor=Tn}}sn[Cn]=Q(function(fa,Ma){var ka=fa.attribCache;if(gn in ka)return ka[gn];var ga={isStream:!1};return Object.keys(_r).forEach(function(Ia){ga[Ia]=_r[Ia]}),_r.buffer&&(ga.buffer=fa.link(_r.buffer),ga.type=ga.type||ga.buffer+".dtype"),ka[gn]=ga})}),Object.keys(mn).forEach(function(Cn){var Tn=mn[Cn];sn[Cn]=ie(Tn,function(gn,_r){function wr(ka){_r(Sn[ka],"=",Br,".",ka,"|0;")}var Br=gn.invoke(_r,Tn),ua=gn.shared,An=gn.constants,Yn=ua.isBufferArgs,ua=ua.buffer,Sn={isStream:_r.def(!1)},na=new ri;na.state=1,Object.keys(na).forEach(function(ka){Sn[ka]=_r.def(""+na[ka])});var fa=Sn.buffer,Ma=Sn.type;return _r("if(",Yn,"(",Br,")){",Sn.isStream,"=true;",fa,"=",ua,".createStream(",34962,",",Br,");",Ma,"=",fa,".dtype;","}else{",fa,"=",ua,".getBuffer(",Br,");","if(",fa,"){",Ma,"=",fa,".dtype;",'}else if("constant" in ',Br,"){",Sn.state,"=",2,";","if(typeof "+Br+'.constant === "number"){',Sn[zt[0]],"=",Br,".constant;",zt.slice(1).map(function(ka){return Sn[ka]}).join("="),"=0;","}else{",zt.map(function(ka,ga){return Sn[ka]+"="+Br+".constant.length>"+ga+"?"+Br+".constant["+ga+"]:0;"}).join(""),"}}else{","if(",Yn,"(",Br,".buffer)){",fa,"=",ua,".createStream(",34962,",",Br,".buffer);","}else{",fa,"=",ua,".getBuffer(",Br,".buffer);","}",Ma,'="type" in ',Br,"?",An.glTypes,"[",Br,".type]:",fa,".dtype;",Sn.normalized,"=!!",Br,".normalized;"),wr("size"),wr("offset"),wr("stride"),wr("divisor"),_r("}}"),_r.exit("if(",Sn.isStream,"){",ua,".destroyStream(",fa,");","}"),Sn})}),sn}function Lr(Yt){var gr=Yt.static,un=Yt.dynamic,mn={};return Object.keys(gr).forEach(function(sn){var Cn=gr[sn];mn[sn]=Q(function(Tn,gn){return typeof Cn=="number"||typeof Cn=="boolean"?""+Cn:Tn.link(Cn)})}),Object.keys(un).forEach(function(sn){var Cn=un[sn];mn[sn]=ie(Cn,function(Tn,gn){return Tn.invoke(gn,Cn)})}),mn}function at(Yt,gr,un,mn,sn){function Cn(na){var fa=gn[na];fa&&(wr[na]=fa)}var Tn=Er(Yt,gr),Yn=Pr(Yt),gn=Ar(Yt,Yn),_r=lr(Yt),wr=br(Yt),Br=Jr(Yt,sn,Tn);Cn("viewport"),Cn(St("scissor.box"));var An=0<Object.keys(wr).length,Yn={framebuffer:Yn,draw:_r,shader:Br,state:wr,dirty:An,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Yn.profile=or(Yt),Yn.uniforms=Fr(un),Yn.drawVAO=Yn.scopeVAO=_r.vao,!Yn.drawVAO&&Br.program&&!Tn&&$t.angle_instanced_arrays&&_r.static.elements){var ua=!0;if(Yt=Br.program.attributes.map(function(na){return na=gr.static[na],ua=ua&&!!na,na}),ua&&0<Yt.length){var Sn=Et.getVAO(Et.createVAO({attributes:Yt,elements:_r.static.elements}));Yn.drawVAO=new re(null,null,null,function(na,fa){return na.link(Sn)}),Yn.useVAO=!0}}return Tn?Yn.useVAO=!0:Yn.attributes=Hr(gr),Yn.context=Lr(mn),Yn}function Rt(Yt,gr,un){var mn=Yt.shared.context,sn=Yt.scope();Object.keys(un).forEach(function(Cn){gr.save(mn,"."+Cn);var Tn=un[Cn].append(Yt,gr);Array.isArray(Tn)?sn(mn,".",Cn,"=[",Tn.join(),"];"):sn(mn,".",Cn,"=",Tn,";")}),gr(sn)}function Kt(Yt,gr,un,mn){var gn=Yt.shared,sn=gn.gl,Cn=gn.framebuffer,Tn;bn&&(Tn=gr.def(gn.extensions,".webgl_draw_buffers"));var _r=Yt.constants,gn=_r.drawBuffer,_r=_r.backBuffer;Yt=un?un.append(Yt,gr):gr.def(Cn,".next"),mn||gr("if(",Yt,"!==",Cn,".cur){"),gr("if(",Yt,"){",sn,".bindFramebuffer(",36160,",",Yt,".framebuffer);"),bn&&gr(Tn,".drawBuffersWEBGL(",gn,"[",Yt,".colorAttachments.length]);"),gr("}else{",sn,".bindFramebuffer(",36160,",null);"),bn&&gr(Tn,".drawBuffersWEBGL(",_r,");"),gr("}",Cn,".cur=",Yt,";"),mn||gr("}")}function ur(Yt,gr,un){var mn=Yt.shared,sn=mn.gl,Cn=Yt.current,Tn=Yt.next,gn=mn.current,_r=mn.next,wr=Yt.cond(gn,".dirty");ma.forEach(function(Br){if(Br=St(Br),!(Br in un.state)){var An,Yn;if(Br in Tn){An=Tn[Br],Yn=Cn[Br];var ua=o(Ln[Br].length,function(Sn){return wr.def(An,"[",Sn,"]")});wr(Yt.cond(ua.map(function(Sn,na){return Sn+"!=="+Yn+"["+na+"]"}).join("||")).then(sn,".",Bn[Br],"(",ua,");",ua.map(function(Sn,na){return Yn+"["+na+"]="+Sn}).join(";"),";"))}else An=wr.def(_r,".",Br),ua=Yt.cond(An,"!==",gn,".",Br),wr(ua),Br in sa?ua(Yt.cond(An).then(sn,".enable(",sa[Br],");").else(sn,".disable(",sa[Br],");"),gn,".",Br,"=",An,";"):ua(sn,".",Bn[Br],"(",An,");",gn,".",Br,"=",An,";")}}),Object.keys(un.state).length===0&&wr(gn,".dirty=false;"),gr(wr)}function Nr(Yt,gr,un,mn){var sn=Yt.shared,Cn=Yt.current,Tn=sn.current,gn=sn.gl,_r;q(Object.keys(un)).forEach(function(wr){var Br=un[wr];if(!mn||mn(Br)){var An=Br.append(Yt,gr);if(sa[wr]){var Yn=sa[wr];Z(Br)?(_r=Yt.link(An,{stable:!0}),gr(Yt.cond(_r).then(gn,".enable(",Yn,");").else(gn,".disable(",Yn,");")),gr(Tn,".",wr,"=",_r,";")):(gr(Yt.cond(An).then(gn,".enable(",Yn,");").else(gn,".disable(",Yn,");")),gr(Tn,".",wr,"=",An,";"))}else if(_(An)){var ua=Cn[wr];gr(gn,".",Bn[wr],"(",An,");",An.map(function(Sn,na){return ua+"["+na+"]="+Sn}).join(";"),";")}else Z(Br)?(_r=Yt.link(An,{stable:!0}),gr(gn,".",Bn[wr],"(",_r,");",Tn,".",wr,"=",_r,";")):gr(gn,".",Bn[wr],"(",An,");",Tn,".",wr,"=",An,";")}})}function Vr(Yt,gr){kr&&(Yt.instancing=gr.def(Yt.shared.extensions,".angle_instanced_arrays"))}function Dr(Yt,gr,un,mn,sn){function Cn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Tn(na){ua=gr.def(),na(ua,"=",Cn(),";"),typeof sn=="string"?na(Br,".count+=",sn,";"):na(Br,".count++;"),ot&&(mn?(Sn=gr.def(),na(Sn,"=",Yn,".getNumPendingQueries();")):na(Yn,".beginQuery(",Br,");"))}function gn(na){na(Br,".cpuTime+=",Cn(),"-",ua,";"),ot&&(mn?na(Yn,".pushScopeStats(",Sn,",",Yn,".getNumPendingQueries(),",Br,");"):na(Yn,".endQuery();"))}function _r(na){var fa=gr.def(An,".profile");gr(An,".profile=",na,";"),gr.exit(An,".profile=",fa,";")}var wr=Yt.shared,Br=Yt.stats,An=wr.current,Yn=wr.timer;un=un.profile;var ua,Sn;if(un){if(Z(un)){un.enable?(Tn(gr),gn(gr.exit),_r("true")):_r("false");return}un=un.append(Yt,gr),_r(un)}else un=gr.def(An,".profile");wr=Yt.block(),Tn(wr),gr("if(",un,"){",wr,"}"),Yt=Yt.block(),gn(Yt),gr.exit("if(",un,"){",Yt,"}")}function Mr(Yt,gr,un,mn,sn){function Cn(_r){switch(_r){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function Tn(_r,wr,Br){function An(){gr("if(!",na,".buffer){",ua,".enableVertexAttribArray(",Sn,");}");var ga=Br.type,Ia;Ia=Br.size?gr.def(Br.size,"||",wr):wr,gr("if(",na,".type!==",ga,"||",na,".size!==",Ia,"||",ka.map(function(Ao){return na+"."+Ao+"!=="+Br[Ao]}).join("||"),"){",ua,".bindBuffer(",34962,",",fa,".buffer);",ua,".vertexAttribPointer(",[Sn,Ia,ga,Br.normalized,Br.stride,Br.offset],");",na,".type=",ga,";",na,".size=",Ia,";",ka.map(function(Ao){return na+"."+Ao+"="+Br[Ao]+";"}).join(""),"}"),kr&&(ga=Br.divisor,gr("if(",na,".divisor!==",ga,"){",Yt.instancing,".vertexAttribDivisorANGLE(",[Sn,ga],");",na,".divisor=",ga,";}"))}function Yn(){gr("if(",na,".buffer){",ua,".disableVertexAttribArray(",Sn,");",na,".buffer=null;","}if(",zt.map(function(ga,Ia){return na+"."+ga+"!=="+Ma[Ia]}).join("||"),"){",ua,".vertexAttrib4f(",Sn,",",Ma,");",zt.map(function(ga,Ia){return na+"."+ga+"="+Ma[Ia]+";"}).join(""),"}")}var ua=gn.gl,Sn=gr.def(_r,".location"),na=gr.def(gn.attributes,"[",Sn,"]");_r=Br.state;var fa=Br.buffer,Ma=[Br.x,Br.y,Br.z,Br.w],ka=["buffer","normalized","offset","stride"];_r===1?An():_r===2?Yn():(gr("if(",_r,"===",1,"){"),An(),gr("}else{"),Yn(),gr("}"))}var gn=Yt.shared;mn.forEach(function(_r){var wr=_r.name,Br=un.attributes[wr],An;if(Br){if(!sn(Br))return;An=Br.append(Yt,gr)}else{if(!sn(cn))return;var Yn=Yt.scopeAttrib(wr);An={},Object.keys(new ri).forEach(function(ua){An[ua]=gr.def(Yn,".",ua)})}Tn(Yt.link(_r),Cn(_r.info.type),An)})}function jr(Yt,gr,un,mn,sn,Cn){for(var Tn=Yt.shared,gn=Tn.gl,_r,wr=0;wr<mn.length;++wr){var ua=mn[wr],Br=ua.name,An=ua.info.type,Yn=un.uniforms[Br],ua=Yt.link(ua)+".location",Sn;if(Yn){if(!sn(Yn))continue;if(Z(Yn)){if(Br=Yn.value,An===35678||An===35680)An=Yt.link(Br._texture||Br.color[0]._texture),gr(gn,".uniform1i(",ua,",",An+".bind());"),gr.exit(An,".unbind();");else if(An===35674||An===35675||An===35676)Br=Yt.global.def("new Float32Array(["+Array.prototype.slice.call(Br)+"])"),Yn=2,An===35675?Yn=3:An===35676&&(Yn=4),gr(gn,".uniformMatrix",Yn,"fv(",ua,",false,",Br,");");else{switch(An){case 5126:_r="1f";break;case 35664:_r="2f";break;case 35665:_r="3f";break;case 35666:_r="4f";break;case 35670:_r="1i";break;case 5124:_r="1i";break;case 35671:_r="2i";break;case 35667:_r="2i";break;case 35672:_r="3i";break;case 35668:_r="3i";break;case 35673:_r="4i";break;case 35669:_r="4i"}gr(gn,".uniform",_r,"(",ua,",",_(Br)?Array.prototype.slice.call(Br):Br,");")}continue}else Sn=Yn.append(Yt,gr)}else{if(!sn(cn))continue;Sn=gr.def(Tn.uniforms,"[",rr.id(Br),"]")}switch(An===35678?gr("if(",Sn,"&&",Sn,'._reglType==="framebuffer"){',Sn,"=",Sn,".color[0];","}"):An===35680&&gr("if(",Sn,"&&",Sn,'._reglType==="framebufferCube"){',Sn,"=",Sn,".color[0];","}"),Br=1,An){case 35678:case 35680:An=gr.def(Sn,"._texture"),gr(gn,".uniform1i(",ua,",",An,".bind());"),gr.exit(An,".unbind();");continue;case 5124:case 35670:_r="1i";break;case 35667:case 35671:_r="2i",Br=2;break;case 35668:case 35672:_r="3i",Br=3;break;case 35669:case 35673:_r="4i",Br=4;break;case 5126:_r="1f";break;case 35664:_r="2f",Br=2;break;case 35665:_r="3f",Br=3;break;case 35666:_r="4f",Br=4;break;case 35674:_r="Matrix2fv";break;case 35675:_r="Matrix3fv";break;case 35676:_r="Matrix4fv"}if(_r.charAt(0)==="M"){gr(gn,".uniform",_r,"(",ua,",");var ua=Math.pow(An-35674+2,2),na=Yt.global.def("new Float32Array(",ua,")");Array.isArray(Sn)?gr("false,(",o(ua,function(ka){return na+"["+ka+"]="+Sn[ka]}),",",na,")"):gr("false,(Array.isArray(",Sn,")||",Sn," instanceof Float32Array)?",Sn,":(",o(ua,function(ka){return na+"["+ka+"]="+Sn+"["+ka+"]"}),",",na,")"),gr(");")}else{if(1<Br){for(var An=[],fa=[],Yn=0;Yn<Br;++Yn)Array.isArray(Sn)?fa.push(Sn[Yn]):fa.push(gr.def(Sn+"["+Yn+"]")),Cn&&An.push(gr.def());Cn&&gr("if(!",Yt.batchId,"||",An.map(function(Ma,ka){return Ma+"!=="+fa[ka]}).join("||"),"){",An.map(function(Ma,ka){return Ma+"="+fa[ka]+";"}).join("")),gr(gn,".uniform",_r,"(",ua,",",fa.join(","),");")}else Cn&&(An=gr.def(),gr("if(!",Yt.batchId,"||",An,"!==",Sn,"){",An,"=",Sn,";")),gr(gn,".uniform",_r,"(",ua,",",Sn,");");Cn&&gr("}")}}}function kn(Yt,gr,un,mn){function sn(ga){var Ia=Br[ga];return Ia?Ia.contextDep&&mn.contextDynamic||Ia.propDep?Ia.append(Yt,un):Ia.append(Yt,gr):gr.def(wr,".",ga)}function Cn(){function ga(){un(fa,".drawElementsInstancedANGLE(",[Yn,Sn,Ma,ua+"<<(("+Ma+"-5121)>>1)",na],");")}function Ia(){un(fa,".drawArraysInstancedANGLE(",[Yn,ua,Sn,na],");")}An&&An!=="null"?ka?ga():(un("if(",An,"){"),ga(),un("}else{"),Ia(),un("}")):Ia()}function Tn(){function ga(){un(_r+".drawElements("+[Yn,Sn,Ma,ua+"<<(("+Ma+"-5121)>>1)"]+");")}function Ia(){un(_r+".drawArrays("+[Yn,ua,Sn]+");")}An&&An!=="null"?ka?ga():(un("if(",An,"){"),ga(),un("}else{"),Ia(),un("}")):Ia()}var gn=Yt.shared,_r=gn.gl,wr=gn.draw,Br=mn.draw,An=function(){var ga=Br.elements,Ia=gr;return ga?((ga.contextDep&&mn.contextDynamic||ga.propDep)&&(Ia=un),ga=ga.append(Yt,Ia),Br.elementsActive&&Ia("if("+ga+")"+_r+".bindBuffer(34963,"+ga+".buffer.buffer);")):(ga=Ia.def(),Ia(ga,"=",wr,".","elements",";","if(",ga,"){",_r,".bindBuffer(",34963,",",ga,".buffer.buffer);}","else if(",gn.vao,".currentVAO){",ga,"=",Yt.shared.elements+".getElements("+gn.vao,".currentVAO.elements);",dn?"":"if("+ga+")"+_r+".bindBuffer(34963,"+ga+".buffer.buffer);","}")),ga}(),Yn=sn("primitive"),ua=sn("offset"),Sn=function(){var ga=Br.count,Ia=gr;return ga?((ga.contextDep&&mn.contextDynamic||ga.propDep)&&(Ia=un),ga=ga.append(Yt,Ia)):ga=Ia.def(wr,".","count"),ga}();if(typeof Sn=="number"){if(Sn===0)return}else un("if(",Sn,"){"),un.exit("}");var na,fa;kr&&(na=sn("instances"),fa=Yt.instancing);var Ma=An+".type",ka=Br.elements&&Z(Br.elements)&&!Br.vaoActive;kr&&(typeof na!="number"||0<=na)?typeof na=="string"?(un("if(",na,">0){"),Cn(),un("}else if(",na,"<0){"),Tn(),un("}")):Cn():Tn()}function yn(Yt,gr,un,mn,sn){return gr=Xt(),sn=gr.proc("body",sn),kr&&(gr.instancing=sn.def(gr.shared.extensions,".angle_instanced_arrays")),Yt(gr,sn,un,mn),gr.compile().body}function Wn(Yt,gr,un,mn){Vr(Yt,gr),un.useVAO?un.drawVAO?gr(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,gr),");"):gr(Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"):(gr(Yt.shared.vao,".setVAO(null);"),Mr(Yt,gr,un,mn.attributes,function(){return!0})),jr(Yt,gr,un,mn.uniforms,function(){return!0},!1),kn(Yt,gr,gr,un)}function In(Yt,gr){var un=Yt.proc("draw",1);Vr(Yt,un),Rt(Yt,un,gr.context),Kt(Yt,un,gr.framebuffer),ur(Yt,un,gr),Nr(Yt,un,gr.state),Dr(Yt,un,gr,!1,!0);var mn=gr.shader.progVar.append(Yt,un);if(un(Yt.shared.gl,".useProgram(",mn,".program);"),gr.shader.program)Wn(Yt,un,gr,gr.shader.program);else{un(Yt.shared.vao,".setVAO(null);");var sn=Yt.global.def("{}"),Cn=un.def(mn,".id"),Tn=un.def(sn,"[",Cn,"]");un(Yt.cond(Tn).then(Tn,".call(this,a0);").else(Tn,"=",sn,"[",Cn,"]=",Yt.link(function(gn){return yn(Wn,Yt,gr,gn,1)}),"(",mn,");",Tn,".call(this,a0);"))}0<Object.keys(gr.state).length&&un(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&un(Yt.shared.vao,".setVAO(null);")}function $n(Yt,gr,un,mn){function sn(){return!0}Yt.batchId="a1",Vr(Yt,gr),Mr(Yt,gr,un,mn.attributes,sn),jr(Yt,gr,un,mn.uniforms,sn,!1),kn(Yt,gr,gr,un)}function Kn(Yt,gr,un,mn){function sn(An){return An.contextDep&&Tn||An.propDep}function Cn(An){return!sn(An)}Vr(Yt,gr);var Tn=un.contextDep,gn=gr.def(),_r=gr.def();Yt.shared.props=_r,Yt.batchId=gn;var wr=Yt.scope(),Br=Yt.scope();gr(wr.entry,"for(",gn,"=0;",gn,"<","a1",";++",gn,"){",_r,"=","a0","[",gn,"];",Br,"}",wr.exit),un.needsContext&&Rt(Yt,Br,un.context),un.needsFramebuffer&&Kt(Yt,Br,un.framebuffer),Nr(Yt,Br,un.state,sn),un.profile&&sn(un.profile)&&Dr(Yt,Br,un,!1,!0),mn?(un.useVAO?un.drawVAO?sn(un.drawVAO)?Br(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,Br),");"):wr(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,wr),");"):wr(Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"):(wr(Yt.shared.vao,".setVAO(null);"),Mr(Yt,wr,un,mn.attributes,Cn),Mr(Yt,Br,un,mn.attributes,sn)),jr(Yt,wr,un,mn.uniforms,Cn,!1),jr(Yt,Br,un,mn.uniforms,sn,!0),kn(Yt,wr,Br,un)):(gr=Yt.global.def("{}"),mn=un.shader.progVar.append(Yt,Br),_r=Br.def(mn,".id"),wr=Br.def(gr,"[",_r,"]"),Br(Yt.shared.gl,".useProgram(",mn,".program);","if(!",wr,"){",wr,"=",gr,"[",_r,"]=",Yt.link(function(An){return yn($n,Yt,un,An,2)}),"(",mn,");}",wr,".call(this,a0[",gn,"],",gn,");"))}function ya(Yt,gr){function un(wr){return wr.contextDep&&sn||wr.propDep}var mn=Yt.proc("batch",2);Yt.batchId="0",Vr(Yt,mn);var sn=!1,Cn=!0;Object.keys(gr.context).forEach(function(wr){sn=sn||gr.context[wr].propDep}),sn||(Rt(Yt,mn,gr.context),Cn=!1);var Tn=gr.framebuffer,gn=!1;if(Tn?(Tn.propDep?sn=gn=!0:Tn.contextDep&&sn&&(gn=!0),gn||Kt(Yt,mn,Tn)):Kt(Yt,mn,null),gr.state.viewport&&gr.state.viewport.propDep&&(sn=!0),ur(Yt,mn,gr),Nr(Yt,mn,gr.state,function(wr){return!un(wr)}),gr.profile&&un(gr.profile)||Dr(Yt,mn,gr,!1,"a1"),gr.contextDep=sn,gr.needsContext=Cn,gr.needsFramebuffer=gn,Cn=gr.shader.progVar,Cn.contextDep&&sn||Cn.propDep)Kn(Yt,mn,gr,null);else if(Cn=Cn.append(Yt,mn),mn(Yt.shared.gl,".useProgram(",Cn,".program);"),gr.shader.program)Kn(Yt,mn,gr,gr.shader.program);else{mn(Yt.shared.vao,".setVAO(null);");var Tn=Yt.global.def("{}"),gn=mn.def(Cn,".id"),_r=mn.def(Tn,"[",gn,"]");mn(Yt.cond(_r).then(_r,".call(this,a0,a1);").else(_r,"=",Tn,"[",gn,"]=",Yt.link(function(An){return yn(Kn,Yt,gr,An,2)}),"(",Cn,");",_r,".call(this,a0,a1);"))}0<Object.keys(gr.state).length&&mn(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&mn(Yt.shared.vao,".setVAO(null);")}function Ra(Yt,gr){function un(gn){var _r=gr.shader[gn];_r&&(_r=_r.append(Yt,mn),isNaN(_r)?mn.set(sn.shader,"."+gn,_r):mn.set(sn.shader,"."+gn,Yt.link(_r,{stable:!0})))}var mn=Yt.proc("scope",3);Yt.batchId="a2";var sn=Yt.shared,Cn=sn.current;if(Rt(Yt,mn,gr.context),gr.framebuffer&&gr.framebuffer.append(Yt,mn),q(Object.keys(gr.state)).forEach(function(gn){var _r=gr.state[gn],wr=_r.append(Yt,mn);_(wr)?wr.forEach(function(Br,An){isNaN(Br)?mn.set(Yt.next[gn],"["+An+"]",Br):mn.set(Yt.next[gn],"["+An+"]",Yt.link(Br,{stable:!0}))}):Z(_r)?mn.set(sn.next,"."+gn,Yt.link(wr,{stable:!0})):mn.set(sn.next,"."+gn,wr)}),Dr(Yt,mn,gr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(gn){var _r=gr.draw[gn];_r&&(_r=_r.append(Yt,mn),isNaN(_r)?mn.set(sn.draw,"."+gn,_r):mn.set(sn.draw,"."+gn,Yt.link(_r),{stable:!0}))}),Object.keys(gr.uniforms).forEach(function(gn){var _r=gr.uniforms[gn].append(Yt,mn);Array.isArray(_r)&&(_r="["+_r.map(function(wr){return isNaN(wr)?wr:Yt.link(wr,{stable:!0})})+"]"),mn.set(sn.uniforms,"["+Yt.link(rr.id(gn),{stable:!0})+"]",_r)}),Object.keys(gr.attributes).forEach(function(gn){var _r=gr.attributes[gn].append(Yt,mn),wr=Yt.scopeAttrib(gn);Object.keys(new ri).forEach(function(Br){mn.set(wr,"."+Br,_r[Br])})}),gr.scopeVAO){var Tn=gr.scopeVAO.append(Yt,mn);isNaN(Tn)?mn.set(sn.vao,".targetVAO",Tn):mn.set(sn.vao,".targetVAO",Yt.link(Tn,{stable:!0}))}un("vert"),un("frag"),0<Object.keys(gr.state).length&&(mn(Cn,".dirty=true;"),mn.exit(Cn,".dirty=true;")),mn("a1(",Yt.shared.context,",a0,",Yt.batchId,");")}function _i(Yt){if(typeof Yt=="object"&&!_(Yt)){for(var gr=Object.keys(Yt),un=0;un<gr.length;++un)if(fe.isDynamic(Yt[gr[un]]))return!0;return!1}}function Ka(Yt,gr,un){function mn(An,Yn){Tn.forEach(function(ua){var Sn=sn[ua];fe.isDynamic(Sn)&&(Sn=An.invoke(Yn,Sn),Yn(Br,".",ua,"=",Sn,";"))})}var sn=gr.static[un];if(sn&&_i(sn)){var Cn=Yt.global,Tn=Object.keys(sn),gn=!1,_r=!1,wr=!1,Br=Yt.global.def("{}");Tn.forEach(function(An){var Yn=sn[An];if(fe.isDynamic(Yn))typeof Yn=="function"&&(Yn=sn[An]=fe.unbox(Yn)),An=ie(Yn,null),gn=gn||An.thisDep,wr=wr||An.propDep,_r=_r||An.contextDep;else{switch(Cn(Br,".",An,"="),typeof Yn){case"number":Cn(Yn);break;case"string":Cn('"',Yn,'"');break;case"object":Array.isArray(Yn)&&Cn("[",Yn.join(),"]");break;default:Cn(Yt.link(Yn))}Cn(";")}}),gr.dynamic[un]=new fe.DynamicVariable(4,{thisDep:gn,contextDep:_r,propDep:wr,ref:Br,append:mn}),delete gr.static[un]}}var ri=Et.Record,ei={add:32774,subtract:32778,"reverse subtract":32779};$t.ext_blend_minmax&&(ei.min=32775,ei.max=32776);var kr=$t.angle_instanced_arrays,bn=$t.webgl_draw_buffers,dn=$t.oes_vertex_array_object,Ln={dirty:!0,profile:pt.profile},ra={},ma=[],sa={},Bn={};xt("dither",3024),xt("blend.enable",3042),Pt("blend.color","blendColor",[0,0,0,0]),Pt("blend.equation","blendEquationSeparate",[32774,32774]),Pt("blend.func","blendFuncSeparate",[1,0,1,0]),xt("depth.enable",2929,!0),Pt("depth.func","depthFunc",513),Pt("depth.range","depthRange",[0,1]),Pt("depth.mask","depthMask",!0),Pt("colorMask","colorMask",[!0,!0,!0,!0]),xt("cull.enable",2884),Pt("cull.face","cullFace",1029),Pt("frontFace","frontFace",2305),Pt("lineWidth","lineWidth",1),xt("polygonOffset.enable",32823),Pt("polygonOffset.offset","polygonOffset",[0,0]),xt("sample.alpha",32926),xt("sample.enable",32928),Pt("sample.coverage","sampleCoverage",[1,!1]),xt("stencil.enable",2960),Pt("stencil.mask","stencilMask",-1),Pt("stencil.func","stencilFunc",[519,0,-1]),Pt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Pt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),xt("scissor.enable",3089),Pt("scissor.box","scissor",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]),Pt("viewport","viewport",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]);var Qn={gl:st,context:Se,strings:rr,next:ra,current:Ln,draw:Pe,elements:tt,buffer:Sr,shader:Vt,attributes:Et.state,vao:Et,uniforms:ft,framebuffer:lt,extensions:$t,timer:ot,isBufferArgs:H},Xa={primTypes:Ve,compareFuncs:Wt,blendFuncs:Zt,blendEquations:ei,stencilOps:sr,glTypes:Le,orientationType:Gr};bn&&(Xa.backBuffer=[1029],Xa.drawBuffer=o(hr.maxDrawbuffers,function(Yt){return Yt===0?[0]:o(Yt,function(gr){return 36064+gr})}));var yi=0;return{next:ra,current:Ln,procs:function(){var Yt=Xt(),gr=Yt.proc("poll"),un=Yt.proc("refresh"),mn=Yt.block();gr(mn),un(mn);var _r=Yt.shared,sn=_r.gl,Cn=_r.next,Tn=_r.current;mn(Tn,".dirty=false;"),Kt(Yt,gr),Kt(Yt,un,null,!0);var gn;kr&&(gn=Yt.link(kr)),$t.oes_vertex_array_object&&un(Yt.link($t.oes_vertex_array_object),".bindVertexArrayOES(null);");var _r=un.def(_r.attributes),wr=un.def(0),Br=Yt.cond(wr,".buffer");Br.then(sn,".enableVertexAttribArray(i);",sn,".bindBuffer(",34962,",",wr,".buffer.buffer);",sn,".vertexAttribPointer(i,",wr,".size,",wr,".type,",wr,".normalized,",wr,".stride,",wr,".offset);").else(sn,".disableVertexAttribArray(i);",sn,".vertexAttrib4f(i,",wr,".x,",wr,".y,",wr,".z,",wr,".w);",wr,".buffer=null;");var An=Yt.link(hr.maxAttributes,{stable:!0});return un("for(var i=0;i<",An,";++i){",wr,"=",_r,"[i];",Br,"}"),kr&&un("for(var i=0;i<",An,";++i){",gn,".vertexAttribDivisorANGLE(i,",_r,"[i].divisor);","}"),un(Yt.shared.vao,".currentVAO=null;",Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"),Object.keys(sa).forEach(function(Yn){var ua=sa[Yn],Sn=mn.def(Cn,".",Yn),na=Yt.block();na("if(",Sn,"){",sn,".enable(",ua,")}else{",sn,".disable(",ua,")}",Tn,".",Yn,"=",Sn,";"),un(na),gr("if(",Sn,"!==",Tn,".",Yn,"){",na,"}")}),Object.keys(Bn).forEach(function(Yn){var ua=Bn[Yn],Sn=Ln[Yn],na,fa,Ma=Yt.block();Ma(sn,".",ua,"("),_(Sn)?(ua=Sn.length,na=Yt.global.def(Cn,".",Yn),fa=Yt.global.def(Tn,".",Yn),Ma(o(ua,function(ka){return na+"["+ka+"]"}),");",o(ua,function(ka){return fa+"["+ka+"]="+na+"["+ka+"];"}).join("")),gr("if(",o(ua,function(ka){return na+"["+ka+"]!=="+fa+"["+ka+"]"}).join("||"),"){",Ma,"}")):(na=mn.def(Cn,".",Yn),fa=mn.def(Tn,".",Yn),Ma(na,");",Tn,".",Yn,"=",na,";"),gr("if(",na,"!==",fa,"){",Ma,"}")),un(Ma)}),Yt.compile()}(),compile:function(Yt,gr,un,mn,sn){var Cn=Xt();Cn.stats=Cn.link(sn),Object.keys(gr.static).forEach(function(gn){Ka(Cn,gr,gn)}),Ht.forEach(function(gn){Ka(Cn,Yt,gn)});var Tn=at(Yt,gr,un,mn,Cn);return Tn.shader.program&&(Tn.shader.program.attributes.sort(function(gn,_r){return gn.name<_r.name?-1:1}),Tn.shader.program.uniforms.sort(function(gn,_r){return gn.name<_r.name?-1:1})),In(Cn,Tn),Ra(Cn,Tn),ya(Cn,Tn),le(Cn.compile(),{destroy:function(){Tn.shader.program.destroy()}})}}}function ne(st,rr){for(var $t=0;$t<st.length;++$t)if(st[$t]===rr)return $t;return-1}var le=function(st,rr){for(var $t=Object.keys(rr),hr=0;hr<$t.length;++hr)st[$t[hr]]=rr[$t[hr]];return st},_e=0,fe={DynamicVariable:y,define:function(st,rr){return new y(st,A(rr+""))},isDynamic:function(st){return typeof st=="function"&&!st._reglType||st instanceof y},unbox:T,accessor:A},ye={next:typeof requestAnimationFrame=="function"?function(st){return requestAnimationFrame(st)}:function(st){return setTimeout(st,16)},cancel:typeof cancelAnimationFrame=="function"?function(st){return cancelAnimationFrame(st)}:clearTimeout},xe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},me=g();me.zero=g();var be=function(st,rr){var $t=1;rr.ext_texture_filter_anisotropic&&($t=st.getParameter(34047));var hr=1,Sr=1;rr.webgl_draw_buffers&&(hr=st.getParameter(34852),Sr=st.getParameter(36063));var tt=!!rr.oes_texture_float;if(tt){tt=st.createTexture(),st.bindTexture(3553,tt),st.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Qe=st.createFramebuffer();if(st.bindFramebuffer(36160,Qe),st.framebufferTexture2D(36160,36064,3553,tt,0),st.bindTexture(3553,null),st.checkFramebufferStatus(36160)!==36053)tt=!1;else{st.viewport(0,0,1,1),st.clearColor(1,0,0,1),st.clear(16384);var lt=me.allocType(5126,4);st.readPixels(0,0,1,1,6408,5126,lt),st.getError()?tt=!1:(st.deleteFramebuffer(Qe),st.deleteTexture(tt),tt=lt[0]===1),me.freeType(lt)}}return lt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(lt=st.createTexture(),Qe=me.allocType(5121,36),st.activeTexture(33984),st.bindTexture(34067,lt),st.texImage2D(34069,0,6408,3,3,0,6408,5121,Qe),me.freeType(Qe),st.bindTexture(34067,null),st.deleteTexture(lt),lt=!st.getError()),{colorBits:[st.getParameter(3410),st.getParameter(3411),st.getParameter(3412),st.getParameter(3413)],depthBits:st.getParameter(3414),stencilBits:st.getParameter(3415),subpixelBits:st.getParameter(3408),extensions:Object.keys(rr).filter(function(ft){return!!rr[ft]}),maxAnisotropic:$t,maxDrawbuffers:hr,maxColorAttachments:Sr,pointSizeDims:st.getParameter(33901),lineWidthDims:st.getParameter(33902),maxViewportDims:st.getParameter(3386),maxCombinedTextureUnits:st.getParameter(35661),maxCubeMapSize:st.getParameter(34076),maxRenderbufferSize:st.getParameter(34024),maxTextureUnits:st.getParameter(34930),maxTextureSize:st.getParameter(3379),maxAttributes:st.getParameter(34921),maxVertexUniforms:st.getParameter(36347),maxVertexTextureUnits:st.getParameter(35660),maxVaryingVectors:st.getParameter(36348),maxFragmentUniforms:st.getParameter(36349),glsl:st.getParameter(35724),renderer:st.getParameter(7937),vendor:st.getParameter(7936),version:st.getParameter(7938),readFloat:tt,npotTextureCube:lt}},ke=function(st){return st instanceof Uint8Array||st instanceof Uint16Array||st instanceof Uint32Array||st instanceof Int8Array||st instanceof Int16Array||st instanceof Int32Array||st instanceof Float32Array||st instanceof Float64Array||st instanceof Uint8ClampedArray},De=function(st){return Object.keys(st).map(function(rr){return st[rr]})},He={shape:function(st){for(var rr=[];st.length;st=st[0])rr.push(st.length);return rr},flatten:function(st,rr,$t,hr){var Sr=1;if(rr.length)for(var tt=0;tt<rr.length;++tt)Sr*=rr[tt];else Sr=0;switch($t=hr||me.allocType($t,Sr),rr.length){case 0:break;case 1:for(hr=rr[0],rr=0;rr<hr;++rr)$t[rr]=st[rr];break;case 2:for(hr=rr[0],rr=rr[1],tt=Sr=0;tt<hr;++tt)for(var Qe=st[tt],lt=0;lt<rr;++lt)$t[Sr++]=Qe[lt];break;case 3:f(st,rr[0],rr[1],rr[2],$t,0);break;default:m(st,rr,0,$t,0)}return $t}},Ae={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Le={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ze={dynamic:35048,stream:35040,static:35044},We=He.flatten,ze=He.shape,Ie=[];Ie[5120]=1,Ie[5122]=2,Ie[5124]=4,Ie[5121]=1,Ie[5123]=2,Ie[5125]=4,Ie[5126]=4;var Ve={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},dt=new Float32Array(1),Ft=new Uint32Array(dt.buffer),Qt=[9984,9986,9985,9987],Ot=[0,6409,6410,6407,6408],Ct={};Ct[6409]=Ct[6406]=Ct[6402]=1,Ct[34041]=Ct[6410]=2,Ct[6407]=Ct[35904]=3,Ct[6408]=Ct[35906]=4;var jt=h("HTMLCanvasElement"),Nt=h("OffscreenCanvas"),Lt=h("CanvasRenderingContext2D"),Xe=h("ImageBitmap"),it=h("HTMLImageElement"),Ye=h("HTMLVideoElement"),Ee=Object.keys(Ae).concat([jt,Nt,Lt,Xe,it,Ye]),Ge=[];Ge[5121]=1,Ge[5126]=4,Ge[36193]=2,Ge[5123]=2,Ge[5125]=4;var Ke=[];Ke[32854]=2,Ke[32855]=2,Ke[36194]=2,Ke[34041]=4,Ke[33776]=.5,Ke[33777]=.5,Ke[33778]=1,Ke[33779]=1,Ke[35986]=.5,Ke[35987]=1,Ke[34798]=1,Ke[35840]=.5,Ke[35841]=.25,Ke[35842]=.5,Ke[35843]=.25,Ke[36196]=.5;var qe=[];qe[32854]=2,qe[32855]=2,qe[36194]=2,qe[33189]=2,qe[36168]=1,qe[34041]=4,qe[35907]=4,qe[34836]=16,qe[34842]=8,qe[34843]=6;var At=function(st,rr,$t,hr,Sr){function tt(Pe){this.id=Et++,this.refCount=1,this.renderbuffer=Pe,this.format=32854,this.height=this.width=0,Sr.profile&&(this.stats={size:0})}function Qe(Pe){var Se=Pe.renderbuffer;st.bindRenderbuffer(36161,null),st.deleteRenderbuffer(Se),Pe.renderbuffer=null,Pe.refCount=0,delete Vt[Pe.id],hr.renderbufferCount--}var lt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};rr.ext_srgb&&(lt.srgba=35907),rr.ext_color_buffer_half_float&&(lt.rgba16f=34842,lt.rgb16f=34843),rr.webgl_color_buffer_float&&(lt.rgba32f=34836);var ft=[];Object.keys(lt).forEach(function(Pe){ft[lt[Pe]]=Pe});var Et=0,Vt={};return tt.prototype.decRef=function(){0>=--this.refCount&&Qe(this)},Sr.profile&&(hr.getTotalRenderbufferSize=function(){var Pe=0;return Object.keys(Vt).forEach(function(Se){Pe+=Vt[Se].stats.size}),Pe}),{create:function(Pe,Se){function ot(pt,St){var xt=0,Pt=0,Xt=32854;if(typeof pt=="object"&&pt?("shape"in pt?(Pt=pt.shape,xt=Pt[0]|0,Pt=Pt[1]|0):("radius"in pt&&(xt=Pt=pt.radius|0),"width"in pt&&(xt=pt.width|0),"height"in pt&&(Pt=pt.height|0)),"format"in pt&&(Xt=lt[pt.format])):typeof pt=="number"?(xt=pt|0,Pt=typeof St=="number"?St|0:xt):pt||(xt=Pt=1),xt!==ct.width||Pt!==ct.height||Xt!==ct.format)return ot.width=ct.width=xt,ot.height=ct.height=Pt,ct.format=Xt,st.bindRenderbuffer(36161,ct.renderbuffer),st.renderbufferStorage(36161,Xt,xt,Pt),Sr.profile&&(ct.stats.size=qe[ct.format]*ct.width*ct.height),ot.format=ft[ct.format],ot}var ct=new tt(st.createRenderbuffer());return Vt[ct.id]=ct,hr.renderbufferCount++,ot(Pe,Se),ot.resize=function(pt,St){var xt=pt|0,Pt=St|0||xt;return xt===ct.width&&Pt===ct.height||(ot.width=ct.width=xt,ot.height=ct.height=Pt,st.bindRenderbuffer(36161,ct.renderbuffer),st.renderbufferStorage(36161,ct.format,xt,Pt),Sr.profile&&(ct.stats.size=qe[ct.format]*ct.width*ct.height)),ot},ot._reglType="renderbuffer",ot._renderbuffer=ct,Sr.profile&&(ot.stats=ct.stats),ot.destroy=function(){ct.decRef()},ot},clear:function(){De(Vt).forEach(Qe)},restore:function(){De(Vt).forEach(function(Pe){Pe.renderbuffer=st.createRenderbuffer(),st.bindRenderbuffer(36161,Pe.renderbuffer),st.renderbufferStorage(36161,Pe.format,Pe.width,Pe.height)}),st.bindRenderbuffer(36161,null)}}},mt=[];mt[6408]=4,mt[6407]=3;var Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2;var Gt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],zt=["x","y","z","w"],Ht="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Zt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Wt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},sr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Gr={cw:2304,ccw:2305},cn=new re(!1,!1,!1,function(){}),qr=function(st,rr){function $t(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function hr(Vt,Pe,Se){var ot=Qe.pop()||new $t;ot.startQueryIndex=Vt,ot.endQueryIndex=Pe,ot.sum=0,ot.stats=Se,lt.push(ot)}if(!rr.ext_disjoint_timer_query)return null;var Sr=[],tt=[],Qe=[],lt=[],ft=[],Et=[];return{beginQuery:function(Vt){var Pe=Sr.pop()||rr.ext_disjoint_timer_query.createQueryEXT();rr.ext_disjoint_timer_query.beginQueryEXT(35007,Pe),tt.push(Pe),hr(tt.length-1,tt.length,Vt)},endQuery:function(){rr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:hr,update:function(){var Vt,Pe;if(Vt=tt.length,Vt!==0){Et.length=Math.max(Et.length,Vt+1),ft.length=Math.max(ft.length,Vt+1),ft[0]=0;var Se=Et[0]=0;for(Pe=Vt=0;Pe<tt.length;++Pe){var ot=tt[Pe];rr.ext_disjoint_timer_query.getQueryObjectEXT(ot,34919)?(Se+=rr.ext_disjoint_timer_query.getQueryObjectEXT(ot,34918),Sr.push(ot)):tt[Vt++]=ot,ft[Pe+1]=Se,Et[Pe+1]=Vt}for(tt.length=Vt,Pe=Vt=0;Pe<lt.length;++Pe){var Se=lt[Pe],ct=Se.startQueryIndex,ot=Se.endQueryIndex;Se.sum+=ft[ot]-ft[ct],ct=Et[ct],ot=Et[ot],ot===ct?(Se.stats.gpuTime+=Se.sum/1e6,Qe.push(Se)):(Se.startQueryIndex=ct,Se.endQueryIndex=ot,lt[Vt++]=Se)}lt.length=Vt}},getNumPendingQueries:function(){return tt.length},clear:function(){Sr.push.apply(Sr,tt);for(var Vt=0;Vt<Sr.length;Vt++)rr.ext_disjoint_timer_query.deleteQueryEXT(Sr[Vt]);tt.length=0,Sr.length=0},restore:function(){tt.length=0,Sr.length=0}}};return function(st){function rr(){if(Dr.length===0)Xt&&Xt.update(),yn=null;else{yn=ye.next(rr),Vt();for(var In=Dr.length-1;0<=In;--In){var $n=Dr[In];$n&&$n(Ar,null,0)}ot.flush(),Xt&&Xt.update()}}function $t(){!yn&&0<Dr.length&&(yn=ye.next(rr))}function hr(){yn&&(ye.cancel(rr),yn=null)}function Sr(In){In.preventDefault(),hr(),Mr.forEach(function($n){$n()})}function tt(In){ot.getError(),pt.restore(),Hr.restore(),lr.restore(),Lr.restore(),at.restore(),Rt.restore(),Fr.restore(),Xt&&Xt.restore(),Kt.procs.refresh(),$t(),jr.forEach(function($n){$n()})}function Qe(In){function $n(Ln,ra){var ma={},sa={};return Object.keys(Ln).forEach(function(Bn){var Qn=Ln[Bn];if(fe.isDynamic(Qn))sa[Bn]=fe.unbox(Qn,Bn);else{if(ra&&Array.isArray(Qn)){for(var Xa=0;Xa<Qn.length;++Xa)if(fe.isDynamic(Qn[Xa])){sa[Bn]=fe.unbox(Qn,Bn);return}}ma[Bn]=Qn}}),{dynamic:sa,static:ma}}function Kn(Ln){for(;dn.length<Ln;)dn.push(null);return dn}var ya=$n(In.context||{},!0),Ra=$n(In.uniforms||{},!0),_i=$n(In.attributes||{},!1);In=$n(function(Ln){function ra(sa){if(sa in ma){var Bn=ma[sa];delete ma[sa],Object.keys(Bn).forEach(function(Qn){ma[sa+"."+Qn]=Bn[Qn]})}}var ma=le({},Ln);return delete ma.uniforms,delete ma.attributes,delete ma.context,delete ma.vao,"stencil"in ma&&ma.stencil.op&&(ma.stencil.opBack=ma.stencil.opFront=ma.stencil.op,delete ma.stencil.op),ra("blend"),ra("depth"),ra("cull"),ra("stencil"),ra("polygonOffset"),ra("scissor"),ra("sample"),"vao"in Ln&&(ma.vao=Ln.vao),ma}(In),!1);var Ka={gpuTime:0,cpuTime:0,count:0},ri=Kt.compile(In,_i,Ra,ya,Ka),ei=ri.draw,kr=ri.batch,bn=ri.scope,dn=[];return le(function(Ln,ra){var ma;if(typeof Ln=="function")return bn.call(this,null,Ln,0);if(typeof ra=="function")if(typeof Ln=="number")for(ma=0;ma<Ln;++ma)bn.call(this,null,ra,ma);else if(Array.isArray(Ln))for(ma=0;ma<Ln.length;++ma)bn.call(this,Ln[ma],ra,ma);else return bn.call(this,Ln,ra,0);else if(typeof Ln=="number"){if(0<Ln)return kr.call(this,Kn(Ln|0),Ln|0)}else if(Array.isArray(Ln)){if(Ln.length)return kr.call(this,Ln,Ln.length)}else return ei.call(this,Ln)},{stats:Ka,destroy:function(){ri.destroy()}})}function lt(In,$n){var Kn=0;Kt.procs.poll();var ya=$n.color;ya&&(ot.clearColor(+ya[0]||0,+ya[1]||0,+ya[2]||0,+ya[3]||0),Kn|=16384),"depth"in $n&&(ot.clearDepth(+$n.depth),Kn|=256),"stencil"in $n&&(ot.clearStencil($n.stencil|0),Kn|=1024),ot.clear(Kn)}function ft(In){return Dr.push(In),$t(),{cancel:function(){function $n(){var ya=ne(Dr,$n);Dr[ya]=Dr[Dr.length-1],--Dr.length,0>=Dr.length&&hr()}var Kn=ne(Dr,In);Dr[Kn]=$n}}}function Et(){var In=Nr.viewport,$n=Nr.scissor_box;In[0]=In[1]=$n[0]=$n[1]=0,Ar.viewportWidth=Ar.framebufferWidth=Ar.drawingBufferWidth=In[2]=$n[2]=ot.drawingBufferWidth,Ar.viewportHeight=Ar.framebufferHeight=Ar.drawingBufferHeight=In[3]=$n[3]=ot.drawingBufferHeight}function Vt(){Ar.tick+=1,Ar.time=Se(),Et(),Kt.procs.poll()}function Pe(){Lr.refresh(),Et(),Kt.procs.refresh(),Xt&&Xt.update()}function Se(){return(xe()-or)/1e3}if(st=v(st),!st)return null;var ot=st.gl,ct=ot.getContextAttributes();ot.isContextLost();var pt=s(ot,st);if(!pt)return null;var ur=e(),St={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xt=st.cachedCode||{},Pt=pt.extensions,Xt=qr(ot,Pt),or=xe(),Er=ot.drawingBufferWidth,Pr=ot.drawingBufferHeight,Ar={tick:0,time:0,viewportWidth:Er,viewportHeight:Pr,framebufferWidth:Er,framebufferHeight:Pr,drawingBufferWidth:Er,drawingBufferHeight:Pr,pixelRatio:st.pixelRatio},Er={elements:null,primitive:4,count:-1,offset:0,instances:-1},Jr=be(ot,Pt),lr=M(ot,St,st,function(In){return Fr.destroyBuffer(In)}),br=w(ot,Pt,lr,St),Fr=z(ot,Pt,Jr,St,lr,br,Er),Hr=G(ot,ur,St,st),Lr=D(ot,Pt,Jr,function(){Kt.procs.poll()},Ar,St,st),at=At(ot,Pt,Jr,St,st),Rt=R(ot,Pt,Jr,Lr,at,St),Kt=oe(ot,ur,Pt,Jr,lr,br,Lr,Rt,{},Fr,Hr,Er,Ar,Xt,xt,st),ur=Y(ot,Rt,Kt.procs.poll,Ar),Nr=Kt.next,Vr=ot.canvas,Dr=[],Mr=[],jr=[],kn=[st.onDestroy],yn=null;Vr&&(Vr.addEventListener("webglcontextlost",Sr,!1),Vr.addEventListener("webglcontextrestored",tt,!1));var Wn=Rt.setFBO=Qe({framebuffer:fe.define.call(null,1,"framebuffer")});return Pe(),ct=le(Qe,{clear:function(In){if("framebuffer"in In)if(In.framebuffer&&In.framebuffer_reglType==="framebufferCube")for(var $n=0;6>$n;++$n)Wn(le({framebuffer:In.framebuffer.faces[$n]},In),lt);else Wn(In,lt);else lt(null,In)},prop:fe.define.bind(null,1),context:fe.define.bind(null,2),this:fe.define.bind(null,3),draw:Qe({}),buffer:function(In){return lr.create(In,34962,!1,!1)},elements:function(In){return br.create(In,!1)},texture:Lr.create2D,cube:Lr.createCube,renderbuffer:at.create,framebuffer:Rt.create,framebufferCube:Rt.createCube,vao:Fr.createVAO,attributes:ct,frame:ft,on:function(In,$n){var Kn;switch(In){case"frame":return ft($n);case"lost":Kn=Mr;break;case"restore":Kn=jr;break;case"destroy":Kn=kn}return Kn.push($n),{cancel:function(){for(var ya=0;ya<Kn.length;++ya)if(Kn[ya]===$n){Kn[ya]=Kn[Kn.length-1],Kn.pop();break}}}},limits:Jr,hasExtension:function(In){return 0<=Jr.extensions.indexOf(In.toLowerCase())},read:ur,destroy:function(){Dr.length=0,hr(),Vr&&(Vr.removeEventListener("webglcontextlost",Sr),Vr.removeEventListener("webglcontextrestored",tt)),Hr.clear(),Rt.clear(),at.clear(),Fr.clear(),Lr.clear(),br.clear(),lr.clear(),Xt&&Xt.clear(),kn.forEach(function(In){In()})},_gl:ot,_refresh:Pe,poll:function(){Vt(),Xt&&Xt.update()},now:Se,stats:St,getCachedCode:function(){return xt},preloadCachedCode:function(In){Object.entries(In).forEach(function($n){xt[$n[0]]=$n[1]})}}),st.onDone(null,ct),ct}})},{}],285:[function(t,N,V){var y=t("buffer"),c=y.Buffer;function A(e,a){for(var i in e)a[i]=e[i]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?N.exports=y:(A(y,V),V.Buffer=T);function T(e,a,i){return c(e,a,i)}T.prototype=Object.create(c.prototype),A(c,T),T.from=function(e,a,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return c(e,a,i)},T.alloc=function(e,a,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=c(e);return a!==void 0?typeof i=="string"?n.fill(a,i):n.fill(a):n.fill(0),n},T.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return c(e)},T.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return y.SlowBuffer(e)}},{buffer:85}],286:[function(t,N,V){N.exports=A;var y=t("events").EventEmitter,c=t("inherits");c(A,y),A.Readable=t("readable-stream/lib/_stream_readable.js"),A.Writable=t("readable-stream/lib/_stream_writable.js"),A.Duplex=t("readable-stream/lib/_stream_duplex.js"),A.Transform=t("readable-stream/lib/_stream_transform.js"),A.PassThrough=t("readable-stream/lib/_stream_passthrough.js"),A.finished=t("readable-stream/lib/internal/streams/end-of-stream.js"),A.pipeline=t("readable-stream/lib/internal/streams/pipeline.js"),A.Stream=A;function A(){y.call(this)}A.prototype.pipe=function(T,e){var a=this;function i(g){T.writable&&T.write(g)===!1&&a.pause&&a.pause()}a.on("data",i);function n(){a.readable&&a.resume&&a.resume()}T.on("drain",n),!T._isStdio&&(!e||e.end!==!1)&&(a.on("end",v),a.on("close",s));var r=!1;function v(){r||(r=!0,T.end())}function s(){r||(r=!0,typeof T.destroy=="function"&&T.destroy())}function o(g){if(b(),y.listenerCount(this,"error")===0)throw g}a.on("error",o),T.on("error",o);function b(){a.removeListener("data",i),T.removeListener("drain",n),a.removeListener("end",v),a.removeListener("close",s),a.removeListener("error",o),T.removeListener("error",o),a.removeListener("end",b),a.removeListener("close",b),T.removeListener("close",b)}return a.on("end",b),a.on("close",b),T.on("close",b),T.emit("pipe",a),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(t,N,V){function y(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var c={};function A(n,r,v){v||(v=Error);function s(b,g,d){return typeof r=="string"?r:r(b,g,d)}var o=function(b){y(g,b);function g(d,f,m){return b.call(this,s(d,f,m))||this}return g}(v);o.prototype.name=v.name,o.prototype.code=n,c[n]=o}function T(n,r){if(Array.isArray(n)){var v=n.length;return n=n.map(function(s){return String(s)}),v>2?"one of ".concat(r," ").concat(n.slice(0,v-1).join(", "),", or ")+n[v-1]:v===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}else return"of ".concat(r," ").concat(String(n))}function e(n,r,v){return n.substr(!v||v<0?0:+v,r.length)===r}function a(n,r,v){return(v===void 0||v>n.length)&&(v=n.length),n.substring(v-r.length,v)===r}function i(n,r,v){return typeof v!="number"&&(v=0),v+r.length>n.length?!1:n.indexOf(r,v)!==-1}A("ERR_INVALID_OPT_VALUE",function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'},TypeError),A("ERR_INVALID_ARG_TYPE",function(n,r,v){var s;typeof r=="string"&&e(r,"not ")?(s="must not be",r=r.replace(/^not /,"")):s="must be";var o;if(a(n," argument"))o="The ".concat(n," ").concat(s," ").concat(T(r,"type"));else{var b=i(n,".")?"property":"argument";o='The "'.concat(n,'" ').concat(b," ").concat(s," ").concat(T(r,"type"))}return o+=". Received type ".concat(typeof v),o},TypeError),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),A("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"}),A("ERR_STREAM_PREMATURE_CLOSE","Premature close"),A("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"}),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),A("ERR_STREAM_WRITE_AFTER_END","write after end"),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),N.exports.codes=c},{}],288:[function(t,N,V){(function(y){(function(){var c=Object.keys||function(s){var o=[];for(var b in s)o.push(b);return o};N.exports=n;var A=t("./_stream_readable"),T=t("./_stream_writable");t("inherits")(n,A);for(var e=c(T.prototype),a=0;a<e.length;a++){var i=e[a];n.prototype[i]||(n.prototype[i]=T.prototype[i])}function n(s){if(!(this instanceof n))return new n(s);A.call(this,s),T.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||y.nextTick(v,this)}function v(s){s.end()}Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(t,N,V){N.exports=c;var y=t("./_stream_transform");t("inherits")(c,y);function c(A){if(!(this instanceof c))return new c(A);y.call(this,A)}c.prototype._transform=function(A,T,e){e(null,A)}},{"./_stream_transform":291,inherits:231}],290:[function(t,N,V){(function(y,c){(function(){N.exports=S;var A;S.ReadableState=E,t("events").EventEmitter;var T=function(ie,oe){return ie.listeners(oe).length},e=t("./internal/streams/stream"),a=t("buffer").Buffer,i=c.Uint8Array||function(){};function n(Q){return a.from(Q)}function r(Q){return a.isBuffer(Q)||Q instanceof i}var v=t("util"),s;v&&v.debuglog?s=v.debuglog("stream"):s=function(){};var o=t("./internal/streams/buffer_list"),b=t("./internal/streams/destroy"),g=t("./internal/streams/state"),d=g.getHighWaterMark,f=t("../errors").codes,m=f.ERR_INVALID_ARG_TYPE,l=f.ERR_STREAM_PUSH_AFTER_EOF,x=f.ERR_METHOD_NOT_IMPLEMENTED,u=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,M,w,p;t("inherits")(S,e);var _=b.errorOrDestroy,h=["error","close","destroy","pause","resume"];function L(Q,ie,oe){if(typeof Q.prependListener=="function")return Q.prependListener(ie,oe);!Q._events||!Q._events[ie]?Q.on(ie,oe):Array.isArray(Q._events[ie])?Q._events[ie].unshift(oe):Q._events[ie]=[oe,Q._events[ie]]}function E(Q,ie,oe){A=A||t("./_stream_duplex"),Q=Q||{},typeof oe!="boolean"&&(oe=ie instanceof A),this.objectMode=!!Q.objectMode,oe&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=d(this,Q,"readableHighWaterMark",oe),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(M||(M=t("string_decoder/").StringDecoder),this.decoder=new M(Q.encoding),this.encoding=Q.encoding)}function S(Q){if(A=A||t("./_stream_duplex"),!(this instanceof S))return new S(Q);var ie=this instanceof A;this._readableState=new E(Q,this,ie),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),e.call(this)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ie){!this._readableState||(this._readableState.destroyed=ie)}}),S.prototype.destroy=b.destroy,S.prototype._undestroy=b.undestroy,S.prototype._destroy=function(Q,ie){ie(Q)},S.prototype.push=function(Q,ie){var oe=this._readableState,ne;return oe.objectMode?ne=!0:typeof Q=="string"&&(ie=ie||oe.defaultEncoding,ie!==oe.encoding&&(Q=a.from(Q,ie),ie=""),ne=!0),P(this,Q,ie,!1,ne)},S.prototype.unshift=function(Q){return P(this,Q,null,!0,!1)};function P(Q,ie,oe,ne,le){s("readableAddChunk",ie);var _e=Q._readableState;if(ie===null)_e.reading=!1,z(Q,_e);else{var fe;if(le||(fe=I(_e,ie)),fe)_(Q,fe);else if(_e.objectMode||ie&&ie.length>0)if(typeof ie!="string"&&!_e.objectMode&&Object.getPrototypeOf(ie)!==a.prototype&&(ie=n(ie)),ne)_e.endEmitted?_(Q,new u):F(Q,_e,ie,!0);else if(_e.ended)_(Q,new l);else{if(_e.destroyed)return!1;_e.reading=!1,_e.decoder&&!oe?(ie=_e.decoder.write(ie),_e.objectMode||ie.length!==0?F(Q,_e,ie,!1):ee(Q,_e)):F(Q,_e,ie,!1)}else ne||(_e.reading=!1,ee(Q,_e))}return!_e.ended&&(_e.length<_e.highWaterMark||_e.length===0)}function F(Q,ie,oe,ne){ie.flowing&&ie.length===0&&!ie.sync?(ie.awaitDrain=0,Q.emit("data",oe)):(ie.length+=ie.objectMode?1:oe.length,ne?ie.buffer.unshift(oe):ie.buffer.push(oe),ie.needReadable&&G(Q)),ee(Q,ie)}function I(Q,ie){var oe;return!r(ie)&&typeof ie!="string"&&ie!==void 0&&!Q.objectMode&&(oe=new m("chunk",["string","Buffer","Uint8Array"],ie)),oe}S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(Q){M||(M=t("string_decoder/").StringDecoder);var ie=new M(Q);this._readableState.decoder=ie,this._readableState.encoding=this._readableState.decoder.encoding;for(var oe=this._readableState.buffer.head,ne="";oe!==null;)ne+=ie.write(oe.data),oe=oe.next;return this._readableState.buffer.clear(),ne!==""&&this._readableState.buffer.push(ne),this._readableState.length=ne.length,this};var D=1073741824;function R(Q){return Q>=D?Q=D:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}function O(Q,ie){return Q<=0||ie.length===0&&ie.ended?0:ie.objectMode?1:Q!==Q?ie.flowing&&ie.length?ie.buffer.head.data.length:ie.length:(Q>ie.highWaterMark&&(ie.highWaterMark=R(Q)),Q<=ie.length?Q:ie.ended?ie.length:(ie.needReadable=!0,0))}S.prototype.read=function(Q){s("read",Q),Q=parseInt(Q,10);var ie=this._readableState,oe=Q;if(Q!==0&&(ie.emittedReadable=!1),Q===0&&ie.needReadable&&((ie.highWaterMark!==0?ie.length>=ie.highWaterMark:ie.length>0)||ie.ended))return s("read: emitReadable",ie.length,ie.ended),ie.length===0&&ie.ended?q(this):G(this),null;if(Q=O(Q,ie),Q===0&&ie.ended)return ie.length===0&&q(this),null;var ne=ie.needReadable;s("need readable",ne),(ie.length===0||ie.length-Q<ie.highWaterMark)&&(ne=!0,s("length less than watermark",ne)),ie.ended||ie.reading?(ne=!1,s("reading or ended",ne)):ne&&(s("do read"),ie.reading=!0,ie.sync=!0,ie.length===0&&(ie.needReadable=!0),this._read(ie.highWaterMark),ie.sync=!1,ie.reading||(Q=O(oe,ie)));var le;return Q>0?le=H(Q,ie):le=null,le===null?(ie.needReadable=ie.length<=ie.highWaterMark,Q=0):(ie.length-=Q,ie.awaitDrain=0),ie.length===0&&(ie.ended||(ie.needReadable=!0),oe!==Q&&ie.ended&&q(this)),le!==null&&this.emit("data",le),le};function z(Q,ie){if(s("onEofChunk"),!ie.ended){if(ie.decoder){var oe=ie.decoder.end();oe&&oe.length&&(ie.buffer.push(oe),ie.length+=ie.objectMode?1:oe.length)}ie.ended=!0,ie.sync?G(Q):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,Y(Q)))}}function G(Q){var ie=Q._readableState;s("emitReadable",ie.needReadable,ie.emittedReadable),ie.needReadable=!1,ie.emittedReadable||(s("emitReadable",ie.flowing),ie.emittedReadable=!0,y.nextTick(Y,Q))}function Y(Q){var ie=Q._readableState;s("emitReadable_",ie.destroyed,ie.length,ie.ended),!ie.destroyed&&(ie.length||ie.ended)&&(Q.emit("readable"),ie.emittedReadable=!1),ie.needReadable=!ie.flowing&&!ie.ended&&ie.length<=ie.highWaterMark,U(Q)}function ee(Q,ie){ie.readingMore||(ie.readingMore=!0,y.nextTick(j,Q,ie))}function j(Q,ie){for(;!ie.reading&&!ie.ended&&(ie.length<ie.highWaterMark||ie.flowing&&ie.length===0);){var oe=ie.length;if(s("maybeReadMore read 0"),Q.read(0),oe===ie.length)break}ie.readingMore=!1}S.prototype._read=function(Q){_(this,new x("_read()"))},S.prototype.pipe=function(Q,ie){var oe=this,ne=this._readableState;switch(ne.pipesCount){case 0:ne.pipes=Q;break;case 1:ne.pipes=[ne.pipes,Q];break;default:ne.pipes.push(Q);break}ne.pipesCount+=1,s("pipe count=%d opts=%j",ne.pipesCount,ie);var le=(!ie||ie.end!==!1)&&Q!==y.stdout&&Q!==y.stderr,_e=le?ye:Le;ne.endEmitted?y.nextTick(_e):oe.once("end",_e),Q.on("unpipe",fe);function fe(Ze,We){s("onunpipe"),Ze===oe&&We&&We.hasUnpiped===!1&&(We.hasUnpiped=!0,be())}function ye(){s("onend"),Q.end()}var xe=X(oe);Q.on("drain",xe);var me=!1;function be(){s("cleanup"),Q.removeListener("close",He),Q.removeListener("finish",Ae),Q.removeListener("drain",xe),Q.removeListener("error",De),Q.removeListener("unpipe",fe),oe.removeListener("end",ye),oe.removeListener("end",Le),oe.removeListener("data",ke),me=!0,ne.awaitDrain&&(!Q._writableState||Q._writableState.needDrain)&&xe()}oe.on("data",ke);function ke(Ze){s("ondata");var We=Q.write(Ze);s("dest.write",We),We===!1&&((ne.pipesCount===1&&ne.pipes===Q||ne.pipesCount>1&&Z(ne.pipes,Q)!==-1)&&!me&&(s("false write response, pause",ne.awaitDrain),ne.awaitDrain++),oe.pause())}function De(Ze){s("onerror",Ze),Le(),Q.removeListener("error",De),T(Q,"error")===0&&_(Q,Ze)}L(Q,"error",De);function He(){Q.removeListener("finish",Ae),Le()}Q.once("close",He);function Ae(){s("onfinish"),Q.removeListener("close",He),Le()}Q.once("finish",Ae);function Le(){s("unpipe"),oe.unpipe(Q)}return Q.emit("pipe",oe),ne.flowing||(s("pipe resume"),oe.resume()),Q};function X(Q){return function(){var oe=Q._readableState;s("pipeOnDrain",oe.awaitDrain),oe.awaitDrain&&oe.awaitDrain--,oe.awaitDrain===0&&T(Q,"data")&&(oe.flowing=!0,U(Q))}}S.prototype.unpipe=function(Q){var ie=this._readableState,oe={hasUnpiped:!1};if(ie.pipesCount===0)return this;if(ie.pipesCount===1)return Q&&Q!==ie.pipes?this:(Q||(Q=ie.pipes),ie.pipes=null,ie.pipesCount=0,ie.flowing=!1,Q&&Q.emit("unpipe",this,oe),this);if(!Q){var ne=ie.pipes,le=ie.pipesCount;ie.pipes=null,ie.pipesCount=0,ie.flowing=!1;for(var _e=0;_e<le;_e++)ne[_e].emit("unpipe",this,{hasUnpiped:!1});return this}var fe=Z(ie.pipes,Q);return fe===-1?this:(ie.pipes.splice(fe,1),ie.pipesCount-=1,ie.pipesCount===1&&(ie.pipes=ie.pipes[0]),Q.emit("unpipe",this,oe),this)},S.prototype.on=function(Q,ie){var oe=e.prototype.on.call(this,Q,ie),ne=this._readableState;return Q==="data"?(ne.readableListening=this.listenerCount("readable")>0,ne.flowing!==!1&&this.resume()):Q==="readable"&&!ne.endEmitted&&!ne.readableListening&&(ne.readableListening=ne.needReadable=!0,ne.flowing=!1,ne.emittedReadable=!1,s("on readable",ne.length,ne.reading),ne.length?G(this):ne.reading||y.nextTick(he,this)),oe},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(Q,ie){var oe=e.prototype.removeListener.call(this,Q,ie);return Q==="readable"&&y.nextTick(ae,this),oe},S.prototype.removeAllListeners=function(Q){var ie=e.prototype.removeAllListeners.apply(this,arguments);return(Q==="readable"||Q===void 0)&&y.nextTick(ae,this),ie};function ae(Q){var ie=Q._readableState;ie.readableListening=Q.listenerCount("readable")>0,ie.resumeScheduled&&!ie.paused?ie.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function he(Q){s("readable nexttick read 0"),Q.read(0)}S.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(s("resume"),Q.flowing=!Q.readableListening,K(this,Q)),Q.paused=!1,this};function K(Q,ie){ie.resumeScheduled||(ie.resumeScheduled=!0,y.nextTick(J,Q,ie))}function J(Q,ie){s("resume",ie.reading),ie.reading||Q.read(0),ie.resumeScheduled=!1,Q.emit("resume"),U(Q),ie.flowing&&!ie.reading&&Q.read(0)}S.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(Q){var ie=Q._readableState;for(s("flow",ie.flowing);ie.flowing&&Q.read()!==null;);}S.prototype.wrap=function(Q){var ie=this,oe=this._readableState,ne=!1;Q.on("end",function(){if(s("wrapped end"),oe.decoder&&!oe.ended){var fe=oe.decoder.end();fe&&fe.length&&ie.push(fe)}ie.push(null)}),Q.on("data",function(fe){if(s("wrapped data"),oe.decoder&&(fe=oe.decoder.write(fe)),!(oe.objectMode&&fe==null)&&!(!oe.objectMode&&(!fe||!fe.length))){var ye=ie.push(fe);ye||(ne=!0,Q.pause())}});for(var le in Q)this[le]===void 0&&typeof Q[le]=="function"&&(this[le]=function(ye){return function(){return Q[ye].apply(Q,arguments)}}(le));for(var _e=0;_e<h.length;_e++)Q.on(h[_e],this.emit.bind(this,h[_e]));return this._read=function(fe){s("wrapped _read",fe),ne&&(ne=!1,Q.resume())},this},typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=t("./internal/streams/async_iterator")),w(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ie){this._readableState&&(this._readableState.flowing=ie)}}),S._fromList=H,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function H(Q,ie){if(ie.length===0)return null;var oe;return ie.objectMode?oe=ie.buffer.shift():!Q||Q>=ie.length?(ie.decoder?oe=ie.buffer.join(""):ie.buffer.length===1?oe=ie.buffer.first():oe=ie.buffer.concat(ie.length),ie.buffer.clear()):oe=ie.buffer.consume(Q,ie.decoder),oe}function q(Q){var ie=Q._readableState;s("endReadable",ie.endEmitted),ie.endEmitted||(ie.ended=!0,y.nextTick(re,ie,Q))}function re(Q,ie){if(s("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,ie.readable=!1,ie.emit("end"),Q.autoDestroy)){var oe=ie._writableState;(!oe||oe.autoDestroy&&oe.finished)&&ie.destroy()}}typeof Symbol=="function"&&(S.from=function(Q,ie){return p===void 0&&(p=t("./internal/streams/from")),p(S,Q,ie)});function Z(Q,ie){for(var oe=0,ne=Q.length;oe<ne;oe++)if(Q[oe]===ie)return oe;return-1}}).call(this)}).call(this,t("_process"),typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(t,N,V){N.exports=n;var y=t("../errors").codes,c=y.ERR_METHOD_NOT_IMPLEMENTED,A=y.ERR_MULTIPLE_CALLBACK,T=y.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=y.ERR_TRANSFORM_WITH_LENGTH_0,a=t("./_stream_duplex");t("inherits")(n,a);function i(s,o){var b=this._transformState;b.transforming=!1;var g=b.writecb;if(g===null)return this.emit("error",new A);b.writechunk=null,b.writecb=null,o!=null&&this.push(o),g(s);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function n(s){if(!(this instanceof n))return new n(s);a.call(this,s),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",r)}function r(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(o,b){v(s,o,b)}):v(this,null,null)}n.prototype.push=function(s,o){return this._transformState.needTransform=!1,a.prototype.push.call(this,s,o)},n.prototype._transform=function(s,o,b){b(new c("_transform()"))},n.prototype._write=function(s,o,b){var g=this._transformState;if(g.writecb=b,g.writechunk=s,g.writeencoding=o,!g.transforming){var d=this._readableState;(g.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},n.prototype._read=function(s){var o=this._transformState;o.writechunk!==null&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},n.prototype._destroy=function(s,o){a.prototype._destroy.call(this,s,function(b){o(b)})};function v(s,o,b){if(o)return s.emit("error",o);if(b!=null&&s.push(b),s._writableState.length)throw new e;if(s._transformState.transforming)throw new T;return s.push(null)}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(t,N,V){(function(y,c){(function(){N.exports=E;function A(U){var H=this;this.next=null,this.entry=null,this.finish=function(){J(H,U)}}var T;E.WritableState=h;var e={deprecate:t("util-deprecate")},a=t("./internal/streams/stream"),i=t("buffer").Buffer,n=c.Uint8Array||function(){};function r(U){return i.from(U)}function v(U){return i.isBuffer(U)||U instanceof n}var s=t("./internal/streams/destroy"),o=t("./internal/streams/state"),b=o.getHighWaterMark,g=t("../errors").codes,d=g.ERR_INVALID_ARG_TYPE,f=g.ERR_METHOD_NOT_IMPLEMENTED,m=g.ERR_MULTIPLE_CALLBACK,l=g.ERR_STREAM_CANNOT_PIPE,x=g.ERR_STREAM_DESTROYED,u=g.ERR_STREAM_NULL_VALUES,M=g.ERR_STREAM_WRITE_AFTER_END,w=g.ERR_UNKNOWN_ENCODING,p=s.errorOrDestroy;t("inherits")(E,a);function _(){}function h(U,H,q){T=T||t("./_stream_duplex"),U=U||{},typeof q!="boolean"&&(q=H instanceof T),this.objectMode=!!U.objectMode,q&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=b(this,U,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=U.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){z(H,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new A(this)}h.prototype.getBuffer=function(){for(var H=this.bufferedRequest,q=[];H;)q.push(H),H=H.next;return q},function(){try{Object.defineProperty(h.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(H){return L.call(this,H)?!0:this!==E?!1:H&&H._writableState instanceof h}})):L=function(H){return H instanceof this};function E(U){T=T||t("./_stream_duplex");var H=this instanceof T;if(!H&&!L.call(E,this))return new E(U);this._writableState=new h(U,this,H),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),a.call(this)}E.prototype.pipe=function(){p(this,new l)};function S(U,H){var q=new M;p(U,q),y.nextTick(H,q)}function P(U,H,q,re){var Z;return q===null?Z=new u:typeof q!="string"&&!H.objectMode&&(Z=new d("chunk",["string","Buffer"],q)),Z?(p(U,Z),y.nextTick(re,Z),!1):!0}E.prototype.write=function(U,H,q){var re=this._writableState,Z=!1,Q=!re.objectMode&&v(U);return Q&&!i.isBuffer(U)&&(U=r(U)),typeof H=="function"&&(q=H,H=null),Q?H="buffer":H||(H=re.defaultEncoding),typeof q!="function"&&(q=_),re.ending?S(this,q):(Q||P(this,re,U,q))&&(re.pendingcb++,Z=I(this,re,Q,U,H,q)),Z},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&ee(this,U))},E.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new w(H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function F(U,H,q){return!U.objectMode&&U.decodeStrings!==!1&&typeof H=="string"&&(H=i.from(H,q)),H}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(U,H,q,re,Z,Q){if(!q){var ie=F(H,re,Z);re!==ie&&(q=!0,Z="buffer",re=ie)}var oe=H.objectMode?1:re.length;H.length+=oe;var ne=H.length<H.highWaterMark;if(ne||(H.needDrain=!0),H.writing||H.corked){var le=H.lastBufferedRequest;H.lastBufferedRequest={chunk:re,encoding:Z,isBuf:q,callback:Q,next:null},le?le.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else D(U,H,!1,oe,re,Z,Q);return ne}function D(U,H,q,re,Z,Q,ie){H.writelen=re,H.writecb=ie,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new x("write")):q?U._writev(Z,H.onwrite):U._write(Z,Q,H.onwrite),H.sync=!1}function R(U,H,q,re,Z){--H.pendingcb,q?(y.nextTick(Z,re),y.nextTick(he,U,H),U._writableState.errorEmitted=!0,p(U,re)):(Z(re),U._writableState.errorEmitted=!0,p(U,re),he(U,H))}function O(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function z(U,H){var q=U._writableState,re=q.sync,Z=q.writecb;if(typeof Z!="function")throw new m;if(O(q),H)R(U,q,re,H,Z);else{var Q=j(q)||U.destroyed;!Q&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&ee(U,q),re?y.nextTick(G,U,q,Q,Z):G(U,q,Q,Z)}}function G(U,H,q,re){q||Y(U,H),H.pendingcb--,re(),he(U,H)}function Y(U,H){H.length===0&&H.needDrain&&(H.needDrain=!1,U.emit("drain"))}function ee(U,H){H.bufferProcessing=!0;var q=H.bufferedRequest;if(U._writev&&q&&q.next){var re=H.bufferedRequestCount,Z=new Array(re),Q=H.corkedRequestsFree;Q.entry=q;for(var ie=0,oe=!0;q;)Z[ie]=q,q.isBuf||(oe=!1),q=q.next,ie+=1;Z.allBuffers=oe,D(U,H,!0,H.length,Z,"",Q.finish),H.pendingcb++,H.lastBufferedRequest=null,Q.next?(H.corkedRequestsFree=Q.next,Q.next=null):H.corkedRequestsFree=new A(H),H.bufferedRequestCount=0}else{for(;q;){var ne=q.chunk,le=q.encoding,_e=q.callback,fe=H.objectMode?1:ne.length;if(D(U,H,!1,fe,ne,le,_e),q=q.next,H.bufferedRequestCount--,H.writing)break}q===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=q,H.bufferProcessing=!1}E.prototype._write=function(U,H,q){q(new f("_write()"))},E.prototype._writev=null,E.prototype.end=function(U,H,q){var re=this._writableState;return typeof U=="function"?(q=U,U=null,H=null):typeof H=="function"&&(q=H,H=null),U!=null&&this.write(U,H),re.corked&&(re.corked=1,this.uncork()),re.ending||K(this,re,q),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function j(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function X(U,H){U._final(function(q){H.pendingcb--,q&&p(U,q),H.prefinished=!0,U.emit("prefinish"),he(U,H)})}function ae(U,H){!H.prefinished&&!H.finalCalled&&(typeof U._final=="function"&&!H.destroyed?(H.pendingcb++,H.finalCalled=!0,y.nextTick(X,U,H)):(H.prefinished=!0,U.emit("prefinish")))}function he(U,H){var q=j(H);if(q&&(ae(U,H),H.pendingcb===0&&(H.finished=!0,U.emit("finish"),H.autoDestroy))){var re=U._readableState;(!re||re.autoDestroy&&re.endEmitted)&&U.destroy()}return q}function K(U,H,q){H.ending=!0,he(U,H),q&&(H.finished?y.nextTick(q):U.once("finish",q)),H.ended=!0,U.writable=!1}function J(U,H,q){var re=U.entry;for(U.entry=null;re;){var Z=re.callback;H.pendingcb--,Z(q),re=re.next}H.corkedRequestsFree.next=U}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(H){!this._writableState||(this._writableState.destroyed=H)}}),E.prototype.destroy=s.destroy,E.prototype._undestroy=s.undestroy,E.prototype._destroy=function(U,H){H(U)}}).call(this)}).call(this,t("_process"),typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(t,N,V){(function(y){(function(){var c;function A(x,u,M){return u in x?Object.defineProperty(x,u,{value:M,enumerable:!0,configurable:!0,writable:!0}):x[u]=M,x}var T=t("./end-of-stream"),e=Symbol("lastResolve"),a=Symbol("lastReject"),i=Symbol("error"),n=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),s=Symbol("stream");function o(x,u){return{value:x,done:u}}function b(x){var u=x[e];if(u!==null){var M=x[s].read();M!==null&&(x[r]=null,x[e]=null,x[a]=null,u(o(M,!1)))}}function g(x){y.nextTick(b,x)}function d(x,u){return function(M,w){x.then(function(){if(u[n]){M(o(void 0,!0));return}u[v](M,w)},w)}}var f=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((c={get stream(){return this[s]},next:function(){var u=this,M=this[i];if(M!==null)return Promise.reject(M);if(this[n])return Promise.resolve(o(void 0,!0));if(this[s].destroyed)return new Promise(function(h,L){y.nextTick(function(){u[i]?L(u[i]):h(o(void 0,!0))})});var w=this[r],p;if(w)p=new Promise(d(w,this));else{var _=this[s].read();if(_!==null)return Promise.resolve(o(_,!1));p=new Promise(this[v])}return this[r]=p,p}},A(c,Symbol.asyncIterator,function(){return this}),A(c,"return",function(){var u=this;return new Promise(function(M,w){u[s].destroy(null,function(p){if(p){w(p);return}M(o(void 0,!0))})})}),c),f),l=function(u){var M,w=Object.create(m,(M={},A(M,s,{value:u,writable:!0}),A(M,e,{value:null,writable:!0}),A(M,a,{value:null,writable:!0}),A(M,i,{value:null,writable:!0}),A(M,n,{value:u._readableState.endEmitted,writable:!0}),A(M,v,{value:function(_,h){var L=w[s].read();L?(w[r]=null,w[e]=null,w[a]=null,_(o(L,!1))):(w[e]=_,w[a]=h)},writable:!0}),M));return w[r]=null,T(u,function(p){if(p&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=w[a];_!==null&&(w[r]=null,w[e]=null,w[a]=null,_(p)),w[i]=p;return}var h=w[e];h!==null&&(w[r]=null,w[e]=null,w[a]=null,h(o(void 0,!0))),w[n]=!0}),u.on("readable",g.bind(null,w)),w};N.exports=l}).call(this)}).call(this,t("_process"))},{"./end-of-stream":296,_process:278}],294:[function(t,N,V){function y(b,g){var d=Object.keys(b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(b);g&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(b,m).enumerable})),d.push.apply(d,f)}return d}function c(b){for(var g=1;g<arguments.length;g++){var d=arguments[g]!=null?arguments[g]:{};g%2?y(Object(d),!0).forEach(function(f){A(b,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(d)):y(Object(d)).forEach(function(f){Object.defineProperty(b,f,Object.getOwnPropertyDescriptor(d,f))})}return b}function A(b,g,d){return g in b?Object.defineProperty(b,g,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[g]=d,b}function T(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function e(b,g){for(var d=0;d<g.length;d++){var f=g[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}function a(b,g,d){return g&&e(b.prototype,g),d&&e(b,d),b}var i=t("buffer"),n=i.Buffer,r=t("util"),v=r.inspect,s=v&&v.custom||"inspect";function o(b,g,d){n.prototype.copy.call(b,g,d)}N.exports=function(){function b(){T(this,b),this.head=null,this.tail=null,this.length=0}return a(b,[{key:"push",value:function(d){var f={data:d,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length}},{key:"unshift",value:function(d){var f={data:d,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var f=this.head,m=""+f.data;f=f.next;)m+=d+f.data;return m}},{key:"concat",value:function(d){if(this.length===0)return n.alloc(0);for(var f=n.allocUnsafe(d>>>0),m=this.head,l=0;m;)o(m.data,f,l),l+=m.data.length,m=m.next;return f}},{key:"consume",value:function(d,f){var m;return d<this.head.data.length?(m=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):d===this.head.data.length?m=this.shift():m=f?this._getString(d):this._getBuffer(d),m}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var f=this.head,m=1,l=f.data;for(d-=l.length;f=f.next;){var x=f.data,u=d>x.length?x.length:d;if(u===x.length?l+=x:l+=x.slice(0,d),d-=u,d===0){u===x.length?(++m,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=x.slice(u));break}++m}return this.length-=m,l}},{key:"_getBuffer",value:function(d){var f=n.allocUnsafe(d),m=this.head,l=1;for(m.data.copy(f),d-=m.data.length;m=m.next;){var x=m.data,u=d>x.length?x.length:d;if(x.copy(f,f.length-d,0,u),d-=u,d===0){u===x.length?(++l,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=x.slice(u));break}++l}return this.length-=l,f}},{key:s,value:function(d,f){return v(this,c({},f,{depth:0,customInspect:!1}))}}]),b}()},{buffer:85,util:83}],295:[function(t,N,V){(function(y){(function(){function c(n,r){var v=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,y.nextTick(a,this,n)):y.nextTick(a,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(b){!r&&b?v._writableState?v._writableState.errorEmitted?y.nextTick(T,v):(v._writableState.errorEmitted=!0,y.nextTick(A,v,b)):y.nextTick(A,v,b):r?(y.nextTick(T,v),r(b)):y.nextTick(T,v)}),this)}function A(n,r){a(n,r),T(n)}function T(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(n,r){n.emit("error",r)}function i(n,r){var v=n._readableState,s=n._writableState;v&&v.autoDestroy||s&&s.autoDestroy?n.destroy(r):n.emit("error",r)}N.exports={destroy:c,undestroy:e,errorOrDestroy:i}}).call(this)}).call(this,t("_process"))},{_process:278}],296:[function(t,N,V){var y=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function c(a){var i=!1;return function(){if(!i){i=!0;for(var n=arguments.length,r=new Array(n),v=0;v<n;v++)r[v]=arguments[v];a.apply(this,r)}}}function A(){}function T(a){return a.setHeader&&typeof a.abort=="function"}function e(a,i,n){if(typeof i=="function")return e(a,null,i);i||(i={}),n=c(n||A);var r=i.readable||i.readable!==!1&&a.readable,v=i.writable||i.writable!==!1&&a.writable,s=function(){a.writable||b()},o=a._writableState&&a._writableState.finished,b=function(){v=!1,o=!0,r||n.call(a)},g=a._readableState&&a._readableState.endEmitted,d=function(){r=!1,g=!0,v||n.call(a)},f=function(u){n.call(a,u)},m=function(){var u;if(r&&!g)return(!a._readableState||!a._readableState.ended)&&(u=new y),n.call(a,u);if(v&&!o)return(!a._writableState||!a._writableState.ended)&&(u=new y),n.call(a,u)},l=function(){a.req.on("finish",b)};return T(a)?(a.on("complete",b),a.on("abort",m),a.req?l():a.on("request",l)):v&&!a._writableState&&(a.on("end",s),a.on("close",s)),a.on("end",d),a.on("finish",b),i.error!==!1&&a.on("error",f),a.on("close",m),function(){a.removeListener("complete",b),a.removeListener("abort",m),a.removeListener("request",l),a.req&&a.req.removeListener("finish",b),a.removeListener("end",s),a.removeListener("close",s),a.removeListener("finish",b),a.removeListener("end",d),a.removeListener("error",f),a.removeListener("close",m)}}N.exports=e},{"../../../errors":287}],297:[function(t,N,V){N.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(t,N,V){var y;function c(b){var g=!1;return function(){g||(g=!0,b.apply(void 0,arguments))}}var A=t("../../../errors").codes,T=A.ERR_MISSING_ARGS,e=A.ERR_STREAM_DESTROYED;function a(b){if(b)throw b}function i(b){return b.setHeader&&typeof b.abort=="function"}function n(b,g,d,f){f=c(f);var m=!1;b.on("close",function(){m=!0}),y===void 0&&(y=t("./end-of-stream")),y(b,{readable:g,writable:d},function(x){if(x)return f(x);m=!0,f()});var l=!1;return function(x){if(!m&&!l){if(l=!0,i(b))return b.abort();if(typeof b.destroy=="function")return b.destroy();f(x||new e("pipe"))}}}function r(b){b()}function v(b,g){return b.pipe(g)}function s(b){return!b.length||typeof b[b.length-1]!="function"?a:b.pop()}function o(){for(var b=arguments.length,g=new Array(b),d=0;d<b;d++)g[d]=arguments[d];var f=s(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new T("streams");var m,l=g.map(function(x,u){var M=u<g.length-1,w=u>0;return n(x,M,w,function(p){m||(m=p),p&&l.forEach(r),!M&&(l.forEach(r),f(m))})});return g.reduce(v)}N.exports=o},{"../../../errors":287,"./end-of-stream":296}],299:[function(t,N,V){var y=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;function c(T,e,a){return T.highWaterMark!=null?T.highWaterMark:e?T[a]:null}function A(T,e,a,i){var n=c(e,i,a);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var r=i?a:"highWaterMark";throw new y(r,n)}return Math.floor(n)}return T.objectMode?16:16*1024}N.exports={getHighWaterMark:A}},{"../../../errors":287}],300:[function(t,N,V){N.exports=t("events").EventEmitter},{events:84}],301:[function(t,N,V){var y=t("safe-buffer").Buffer,c=y.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function A(l){if(!l)return"utf8";for(var x;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(x)return;l=(""+l).toLowerCase(),x=!0}}function T(l){var x=A(l);if(typeof x!="string"&&(y.isEncoding===c||!c(l)))throw new Error("Unknown encoding: "+l);return x||l}V.StringDecoder=e;function e(l){this.encoding=T(l);var x;switch(this.encoding){case"utf16le":this.text=o,this.end=b,x=4;break;case"utf8":this.fillLast=r,x=4;break;case"base64":this.text=g,this.end=d,x=3;break;default:this.write=f,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(x)}e.prototype.write=function(l){if(l.length===0)return"";var x,u;if(this.lastNeed){if(x=this.fillLast(l),x===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<l.length?x?x+this.text(l,u):this.text(l,u):x||""},e.prototype.end=s,e.prototype.text=v,e.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function a(l){return l<=127?0:l>>5===6?2:l>>4===14?3:l>>3===30?4:l>>6===2?-1:-2}function i(l,x,u){var M=x.length-1;if(M<u)return 0;var w=a(x[M]);return w>=0?(w>0&&(l.lastNeed=w-1),w):--M<u||w===-2?0:(w=a(x[M]),w>=0?(w>0&&(l.lastNeed=w-2),w):--M<u||w===-2?0:(w=a(x[M]),w>=0?(w>0&&(w===2?w=0:l.lastNeed=w-3),w):0))}function n(l,x,u){if((x[0]&192)!==128)return l.lastNeed=0,"\uFFFD";if(l.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return l.lastNeed=1,"\uFFFD";if(l.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return l.lastNeed=2,"\uFFFD"}}function r(l){var x=this.lastTotal-this.lastNeed,u=n(this,l);if(u!==void 0)return u;if(this.lastNeed<=l.length)return l.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,x,0,l.length),this.lastNeed-=l.length}function v(l,x){var u=i(this,l,x);if(!this.lastNeed)return l.toString("utf8",x);this.lastTotal=u;var M=l.length-(u-this.lastNeed);return l.copy(this.lastChar,0,M),l.toString("utf8",x,M)}function s(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+"\uFFFD":x}function o(l,x){if((l.length-x)%2===0){var u=l.toString("utf16le",x);if(u){var M=u.charCodeAt(u.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",x,l.length-1)}function b(l){var x=l&&l.length?this.write(l):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,u)}return x}function g(l,x){var u=(l.length-x)%3;return u===0?l.toString("base64",x):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",x,l.length-u))}function d(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function f(l){return l.toString(this.encoding)}function m(l){return l&&l.length?this.write(l):""}},{"safe-buffer":285}],302:[function(t,N,V){(function(y,c){(function(){var A=t("assert"),T=t("debug")("stream-parser");N.exports=r;var e=-1,a=0,i=1,n=2;function r(u){var M=u&&typeof u._transform=="function",w=u&&typeof u._write=="function";if(!M&&!w)throw new Error("must pass a Writable or Transform stream in");T("extending Parser into stream"),u._bytes=s,u._skipBytes=o,M&&(u._passthrough=b),M?u._transform=d:u._write=g}function v(u){T("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=e,u._parserCallback=null,typeof u.push=="function"&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function s(u,M){A(!this._parserCallback,'there is already a "callback" set!'),A(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||v(this),T("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=M,this._parserState=a}function o(u,M){A(!this._parserCallback,'there is already a "callback" set!'),A(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||v(this),T("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=M,this._parserState=i}function b(u,M){A(!this._parserCallback,'There is already a "callback" set!'),A(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||v(this),T("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=M,this._parserState=n}function g(u,M,w){this._parserInit||v(this),T("write(%o bytes)",u.length),typeof M=="function"&&(w=M),l(this,u,null,w)}function d(u,M,w){this._parserInit||v(this),T("transform(%o bytes)",u.length),typeof M!="function"&&(M=this._parserOutput),l(this,u,M,w)}function f(u,M,w,p){return u._parserBytesLeft<=0?p(new Error("got data but not currently parsing anything")):M.length<=u._parserBytesLeft?function(){return m(u,M,w,p)}:function(){var _=M.slice(0,u._parserBytesLeft);return m(u,_,w,function(h){if(h)return p(h);if(M.length>_.length)return function(){return f(u,M.slice(_.length),w,p)}})}}function m(u,M,w,p){if(u._parserBytesLeft-=M.length,T("%o bytes left for stream piece",u._parserBytesLeft),u._parserState===a?(u._parserBuffers.push(M),u._parserBuffered+=M.length):u._parserState===n&&w(M),u._parserBytesLeft===0){var _=u._parserCallback;if(_&&u._parserState===a&&u._parserBuffers.length>1&&(M=c.concat(u._parserBuffers,u._parserBuffered)),u._parserState!==a&&(M=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=e,u._parserBuffers.splice(0),_){var h=[];M&&h.push(M),w&&h.push(w);var L=_.length>h.length;L&&h.push(x(p));var E=_.apply(u,h);if(!L||p===E)return p}}else return p}var l=x(f);function x(u){return function(){for(var M=u.apply(this,arguments);typeof M=="function";)M=M();return M}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(t,N,V){(function(y){(function(){V=N.exports=t("./debug"),V.log=T,V.formatArgs=A,V.save=e,V.load=a,V.useColors=c,V.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:i(),V.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function c(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}V.formatters.j=function(n){try{return JSON.stringify(n)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function A(n){var r=this.useColors;if(n[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+n[0]+(r?"%c ":" ")+"+"+V.humanize(this.diff),!!r){var v="color: "+this.color;n.splice(1,0,v,"color: inherit");var s=0,o=0;n[0].replace(/%[a-zA-Z%]/g,function(b){b!=="%%"&&(s++,b==="%c"&&(o=s))}),n.splice(o,0,v)}}function T(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(n){try{n==null?V.storage.removeItem("debug"):V.storage.debug=n}catch{}}function a(){var n;try{n=V.storage.debug}catch{}return!n&&typeof y<"u"&&"env"in y&&(n=y.env.DEBUG),n}V.enable(a());function i(){try{return window.localStorage}catch{}}}).call(this)}).call(this,t("_process"))},{"./debug":304,_process:278}],304:[function(t,N,V){V=N.exports=A.debug=A.default=A,V.coerce=i,V.disable=e,V.enable=T,V.enabled=a,V.humanize=t("ms"),V.names=[],V.skips=[],V.formatters={};var y;function c(n){var r=0,v;for(v in n)r=(r<<5)-r+n.charCodeAt(v),r|=0;return V.colors[Math.abs(r)%V.colors.length]}function A(n){function r(){if(!!r.enabled){var v=r,s=+new Date,o=s-(y||s);v.diff=o,v.prev=y,v.curr=s,y=s;for(var b=new Array(arguments.length),g=0;g<b.length;g++)b[g]=arguments[g];b[0]=V.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");var d=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,function(m,l){if(m==="%%")return m;d++;var x=V.formatters[l];if(typeof x=="function"){var u=b[d];m=x.call(v,u),b.splice(d,1),d--}return m}),V.formatArgs.call(v,b);var f=r.log||V.log||console.log.bind(console);f.apply(v,b)}}return r.namespace=n,r.enabled=V.enabled(n),r.useColors=V.useColors(),r.color=c(n),typeof V.init=="function"&&V.init(r),r}function T(n){V.save(n),V.names=[],V.skips=[];for(var r=(typeof n=="string"?n:"").split(/[\s,]+/),v=r.length,s=0;s<v;s++)!r[s]||(n=r[s].replace(/\*/g,".*?"),n[0]==="-"?V.skips.push(new RegExp("^"+n.substr(1)+"$")):V.names.push(new RegExp("^"+n+"$")))}function e(){V.enable("")}function a(n){var r,v;for(r=0,v=V.skips.length;r<v;r++)if(V.skips[r].test(n))return!1;for(r=0,v=V.names.length;r<v;r++)if(V.names[r].test(n))return!0;return!1}function i(n){return n instanceof Error?n.stack||n.message:n}},{ms:305}],305:[function(t,N,V){var y=1e3,c=y*60,A=c*60,T=A*24,e=T*365.25;N.exports=function(v,s){s=s||{};var o=typeof v;if(o==="string"&&v.length>0)return a(v);if(o==="number"&&isNaN(v)===!1)return s.long?n(v):i(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function a(v){if(v=String(v),!(v.length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(v);if(!!s){var o=parseFloat(s[1]),b=(s[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return o*e;case"days":case"day":case"d":return o*T;case"hours":case"hour":case"hrs":case"hr":case"h":return o*A;case"minutes":case"minute":case"mins":case"min":case"m":return o*c;case"seconds":case"second":case"secs":case"sec":case"s":return o*y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function i(v){return v>=T?Math.round(v/T)+"d":v>=A?Math.round(v/A)+"h":v>=c?Math.round(v/c)+"m":v>=y?Math.round(v/y)+"s":v+"ms"}function n(v){return r(v,T,"day")||r(v,A,"hour")||r(v,c,"minute")||r(v,y,"second")||v+" ms"}function r(v,s,o){if(!(v<s))return v<s*1.5?Math.floor(v/s)+" "+o:Math.ceil(v/s)+" "+o+"s"}},{}],306:[function(t,N,V){var y=t("parenthesis");N.exports=function(A,T,e){if(A==null)throw Error("First argument should be a string");if(T==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(b){return b.length===1&&(b=b+b),b}));var a=y.parse(A,{flat:!0,brackets:e.ignore}),i=a[0],n=i.split(T);if(e.escape){for(var r=[],v=0;v<n.length;v++){var s=n[v],o=n[v+1];s[s.length-1]==="\\"&&s[s.length-2]!=="\\"?(r.push(s+T+o),v++):r.push(s)}n=r}for(var v=0;v<n.length;v++)a[0]=n[v],n[v]=y.stringify(a,{flat:!0});return n}},{parenthesis:248}],307:[function(t,N,V){N.exports=y;function y(c){for(var A=c.length,T=new Array(A),e=new Array(A),a=new Array(A),i=new Array(A),n=new Array(A),r=new Array(A),v=0;v<A;++v)T[v]=-1,e[v]=0,a[v]=!1,i[v]=0,n[v]=-1,r[v]=[];var s=0,o=[],b=[];function g(l){var x=[l],u=[l];for(T[l]=e[l]=s,a[l]=!0,s+=1;u.length>0;){l=u[u.length-1];var M=c[l];if(i[l]<M.length){for(var w=i[l];w<M.length;++w){var p=M[w];if(T[p]<0){T[p]=e[p]=s,a[p]=!0,s+=1,x.push(p),u.push(p);break}else a[p]&&(e[l]=Math.min(e[l],e[p])|0);n[p]>=0&&r[l].push(n[p])}i[l]=w}else{if(e[l]===T[l]){for(var _=[],h=[],L=0,w=x.length-1;w>=0;--w){var E=x[w];if(a[E]=!1,_.push(E),h.push(r[E]),L+=r[E].length,n[E]=o.length,E===l){x.length=w;break}}o.push(_);for(var S=new Array(L),w=0;w<h.length;w++)for(var P=0;P<h[w].length;P++)S[--L]=h[w][P];b.push(S)}u.pop()}}}for(var v=0;v<A;++v)T[v]<0&&g(v);for(var d,v=0;v<b.length;v++){var f=b[v];if(f.length!==0){f.sort(function(x,u){return x-u}),d=[f[0]];for(var m=1;m<f.length;m++)f[m]!==f[m-1]&&d.push(f[m]);b[v]=d}}return{components:o,adjacencyList:b}}},{}],308:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var y=function(){function n(r,v){var s=[],o=!0,b=!1,g=void 0;try{for(var d=r[Symbol.iterator](),f;!(o=(f=d.next()).done)&&(s.push(f.value),!(v&&s.length===v));o=!0);}catch(m){b=!0,g=m}finally{try{!o&&d.return&&d.return()}finally{if(b)throw g}}return s}return function(r,v){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return n(r,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Math.PI*2,A=function(r,v,s,o,b,g,d){var f=r.x,m=r.y;f*=v,m*=s;var l=o*f-b*m,x=b*f+o*m;return{x:l+g,y:x+d}},T=function(r,v){var s=v===1.5707963267948966?.551915024494:v===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(v/4),o=Math.cos(r),b=Math.sin(r),g=Math.cos(r+v),d=Math.sin(r+v);return[{x:o-b*s,y:b+o*s},{x:g+d*s,y:d-g*s},{x:g,y:d}]},e=function(r,v,s,o){var b=r*o-v*s<0?-1:1,g=r*s+v*o;return g>1&&(g=1),g<-1&&(g=-1),b*Math.acos(g)},a=function(r,v,s,o,b,g,d,f,m,l,x,u){var M=Math.pow(b,2),w=Math.pow(g,2),p=Math.pow(x,2),_=Math.pow(u,2),h=M*w-M*_-w*p;h<0&&(h=0),h/=M*_+w*p,h=Math.sqrt(h)*(d===f?-1:1);var L=h*b/g*u,E=h*-g/b*x,S=l*L-m*E+(r+s)/2,P=m*L+l*E+(v+o)/2,F=(x-L)/b,I=(u-E)/g,D=(-x-L)/b,R=(-u-E)/g,O=e(1,0,F,I),z=e(F,I,D,R);return f===0&&z>0&&(z-=c),f===1&&z<0&&(z+=c),[S,P,O,z]},i=function(r){var v=r.px,s=r.py,o=r.cx,b=r.cy,g=r.rx,d=r.ry,f=r.xAxisRotation,m=f===void 0?0:f,l=r.largeArcFlag,x=l===void 0?0:l,u=r.sweepFlag,M=u===void 0?0:u,w=[];if(g===0||d===0)return[];var p=Math.sin(m*c/360),_=Math.cos(m*c/360),h=_*(v-o)/2+p*(s-b)/2,L=-p*(v-o)/2+_*(s-b)/2;if(h===0&&L===0)return[];g=Math.abs(g),d=Math.abs(d);var E=Math.pow(h,2)/Math.pow(g,2)+Math.pow(L,2)/Math.pow(d,2);E>1&&(g*=Math.sqrt(E),d*=Math.sqrt(E));var S=a(v,s,o,b,g,d,x,M,p,_,h,L),P=y(S,4),F=P[0],I=P[1],D=P[2],R=P[3],O=Math.abs(R)/(c/4);Math.abs(1-O)<1e-7&&(O=1);var z=Math.max(Math.ceil(O),1);R/=z;for(var G=0;G<z;G++)w.push(T(D,R)),D+=R;return w.map(function(Y){var ee=A(Y[0],g,d,_,p,F,I),j=ee.x,X=ee.y,ae=A(Y[1],g,d,_,p,F,I),he=ae.x,K=ae.y,J=A(Y[2],g,d,_,p,F,I),U=J.x,H=J.y;return{x1:j,y1:X,x2:he,y2:K,x:U,y:H}})};V.default=i,N.exports=V.default},{}],309:[function(t,N,V){var y=t("parse-svg-path"),c=t("abs-svg-path"),A=t("normalize-svg-path"),T=t("is-svg-path"),e=t("assert");N.exports=a;function a(i){if(Array.isArray(i)&&i.length===1&&typeof i[0]=="string"&&(i=i[0]),typeof i=="string"&&(e(T(i),"String is not an SVG path."),i=y(i)),e(Array.isArray(i),"Argument should be a string or an array of path segments."),i=c(i),i=A(i),!i.length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],r=0,v=i.length;r<v;r++)for(var s=i[r].slice(1),o=0;o<s.length;o+=2)s[o+0]<n[0]&&(n[0]=s[o+0]),s[o+1]<n[1]&&(n[1]=s[o+1]),s[o+0]>n[2]&&(n[2]=s[o+0]),s[o+1]>n[3]&&(n[3]=s[o+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(t,N,V){N.exports=c;var y=t("svg-arc-to-cubic-bezier");function c(e){for(var a,i=[],n=0,r=0,v=0,s=0,o=null,b=null,g=0,d=0,f=0,m=e.length;f<m;f++){var l=e[f],x=l[0];switch(x){case"M":v=l[1],s=l[2];break;case"A":var u=y({px:g,py:d,cx:l[6],cy:l[7],rx:l[1],ry:l[2],xAxisRotation:l[3],largeArcFlag:l[4],sweepFlag:l[5]});if(!u.length)continue;for(var M=0,w;M<u.length;M++)w=u[M],l=["C",w.x1,w.y1,w.x2,w.y2,w.x,w.y],M<u.length-1&&i.push(l);break;case"S":var p=g,_=d;(a=="C"||a=="S")&&(p+=p-n,_+=_-r),l=["C",p,_,l[1],l[2],l[3],l[4]];break;case"T":a=="Q"||a=="T"?(o=g*2-o,b=d*2-b):(o=g,b=d),l=T(g,d,o,b,l[1],l[2]);break;case"Q":o=l[1],b=l[2],l=T(g,d,l[1],l[2],l[3],l[4]);break;case"L":l=A(g,d,l[1],l[2]);break;case"H":l=A(g,d,l[1],d);break;case"V":l=A(g,d,g,l[1]);break;case"Z":l=A(g,d,v,s);break}a=x,g=l[l.length-2],d=l[l.length-1],l.length>4?(n=l[l.length-4],r=l[l.length-3]):(n=g,r=d),i.push(l)}return i}function A(e,a,i,n){return["C",e,a,i,n,i,n]}function T(e,a,i,n,r,v){return["C",e/3+2/3*i,a/3+2/3*n,r/3+2/3*i,v/3+2/3*n,r,v]}},{"svg-arc-to-cubic-bezier":308}],311:[function(t,N,V){var y=t("svg-path-bounds"),c=t("parse-svg-path"),A=t("draw-svg-path"),T=t("is-svg-path"),e=t("bitmap-sdf"),a=document.createElement("canvas"),i=a.getContext("2d");N.exports=n;function n(s,o){if(!T(s))throw Error("Argument should be valid svg path string");o||(o={});var b,g;o.shape?(b=o.shape[0],g=o.shape[1]):(b=a.width=o.w||o.width||200,g=a.height=o.h||o.height||200);var d=Math.min(b,g),f=o.stroke||0,m=o.viewbox||o.viewBox||y(s),l=[b/(m[2]-m[0]),g/(m[3]-m[1])],x=Math.min(l[0]||0,l[1]||0)/2;if(i.fillStyle="black",i.fillRect(0,0,b,g),i.fillStyle="white",f&&(typeof f!="number"&&(f=1),f>0?i.strokeStyle="white":i.strokeStyle="black",i.lineWidth=Math.abs(f)),i.translate(b*.5,g*.5),i.scale(x,x),v()){var u=new Path2D(s);i.fill(u),f&&i.stroke(u)}else{var M=c(s);A(i,M),i.fill(),f&&i.stroke()}i.setTransform(1,0,0,1,0,0);var w=e(i,{cutoff:o.cutoff!=null?o.cutoff:.5,radius:o.radius!=null?o.radius:d*.5});return w}var r;function v(){if(r!=null)return r;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return r=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(o);var b=s.getImageData(0,0,1,1);return r=b&&b.data&&b.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(t,N,V){(function(y,c){(function(){var A=t("process/browser.js").nextTick,T=Function.prototype.apply,e=Array.prototype.slice,a={},i=0;V.setTimeout=function(){return new n(T.call(setTimeout,window,arguments),clearTimeout)},V.setInterval=function(){return new n(T.call(setInterval,window,arguments),clearInterval)},V.clearTimeout=V.clearInterval=function(r){r.close()};function n(r,v){this._id=r,this._clearFn=v}n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},V.enroll=function(r,v){clearTimeout(r._idleTimeoutId),r._idleTimeout=v},V.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},V._unrefActive=V.active=function(r){clearTimeout(r._idleTimeoutId);var v=r._idleTimeout;v>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},v))},V.setImmediate=typeof y=="function"?y:function(r){var v=i++,s=arguments.length<2?!1:e.call(arguments,1);return a[v]=!0,A(function(){a[v]&&(s?r.apply(null,s):r.call(null),V.clearImmediate(v))}),v},V.clearImmediate=typeof c=="function"?c:function(r){delete a[r]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(t,N,V){(function(y){var c=/^\s+/,A=/\s+$/,T=0,e=y.round,a=y.min,i=y.max,n=y.random;function r(Z,Q){if(Z=Z||"",Q=Q||{},Z instanceof r)return Z;if(!(this instanceof r))return new r(Z,Q);var ie=v(Z);this._originalInput=Z,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=e(100*this._a)/100,this._format=Q.format||ie.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=ie.ok,this._tc_id=T++}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(Z.r*299+Z.g*587+Z.b*114)/1e3},getLuminance:function(){var Z=this.toRgb(),Q,ie,oe,ne,le,_e;return Q=Z.r/255,ie=Z.g/255,oe=Z.b/255,Q<=.03928?ne=Q/12.92:ne=y.pow((Q+.055)/1.055,2.4),ie<=.03928?le=ie/12.92:le=y.pow((ie+.055)/1.055,2.4),oe<=.03928?_e=oe/12.92:_e=y.pow((oe+.055)/1.055,2.4),.2126*ne+.7152*le+.0722*_e},setAlpha:function(Z){return this._a=z(Z),this._roundA=e(100*this._a)/100,this},toHsv:function(){var Z=g(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=g(this._r,this._g,this._b),Q=e(Z.h*360),ie=e(Z.s*100),oe=e(Z.v*100);return this._a==1?"hsv("+Q+", "+ie+"%, "+oe+"%)":"hsva("+Q+", "+ie+"%, "+oe+"%, "+this._roundA+")"},toHsl:function(){var Z=o(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=o(this._r,this._g,this._b),Q=e(Z.h*360),ie=e(Z.s*100),oe=e(Z.l*100);return this._a==1?"hsl("+Q+", "+ie+"%, "+oe+"%)":"hsla("+Q+", "+ie+"%, "+oe+"%, "+this._roundA+")"},toHex:function(Z){return f(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return m(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(G(this._r,255)*100)+"%",g:e(G(this._g,255)*100)+"%",b:e(G(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(G(this._r,255)*100)+"%, "+e(G(this._g,255)*100)+"%, "+e(G(this._b,255)*100)+"%)":"rgba("+e(G(this._r,255)*100)+"%, "+e(G(this._g,255)*100)+"%, "+e(G(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[f(this._r,this._g,this._b,!0)]||!1},toFilter:function(Z){var Q="#"+l(this._r,this._g,this._b,this._a),ie=Q,oe=this._gradientType?"GradientType = 1, ":"";if(Z){var ne=r(Z);ie="#"+l(ne._r,ne._g,ne._b,ne._a)}return"progid:DXImageTransform.Microsoft.gradient("+oe+"startColorstr="+Q+",endColorstr="+ie+")"},toString:function(Z){var Q=!!Z;Z=Z||this._format;var ie=!1,oe=this._a<1&&this._a>=0,ne=!Q&&oe&&(Z==="hex"||Z==="hex6"||Z==="hex3"||Z==="hex4"||Z==="hex8"||Z==="name");return ne?Z==="name"&&this._a===0?this.toName():this.toRgbString():(Z==="rgb"&&(ie=this.toRgbString()),Z==="prgb"&&(ie=this.toPercentageRgbString()),(Z==="hex"||Z==="hex6")&&(ie=this.toHexString()),Z==="hex3"&&(ie=this.toHexString(!0)),Z==="hex4"&&(ie=this.toHex8String(!0)),Z==="hex8"&&(ie=this.toHex8String()),Z==="name"&&(ie=this.toName()),Z==="hsl"&&(ie=this.toHslString()),Z==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(Z,Q){var ie=Z.apply(null,[this].concat([].slice.call(Q)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(Z,Q){return Z.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},r.fromRatio=function(Z,Q){if(typeof Z=="object"){var ie={};for(var oe in Z)Z.hasOwnProperty(oe)&&(oe==="a"?ie[oe]=Z[oe]:ie[oe]=he(Z[oe]));Z=ie}return r(Z,Q)};function v(Z){var Q={r:0,g:0,b:0},ie=1,oe=null,ne=null,le=null,_e=!1,fe=!1;return typeof Z=="string"&&(Z=q(Z)),typeof Z=="object"&&(H(Z.r)&&H(Z.g)&&H(Z.b)?(Q=s(Z.r,Z.g,Z.b),_e=!0,fe=String(Z.r).substr(-1)==="%"?"prgb":"rgb"):H(Z.h)&&H(Z.s)&&H(Z.v)?(oe=he(Z.s),ne=he(Z.v),Q=d(Z.h,oe,ne),_e=!0,fe="hsv"):H(Z.h)&&H(Z.s)&&H(Z.l)&&(oe=he(Z.s),le=he(Z.l),Q=b(Z.h,oe,le),_e=!0,fe="hsl"),Z.hasOwnProperty("a")&&(ie=Z.a)),ie=z(ie),{ok:_e,format:Z.format||fe,r:a(255,i(Q.r,0)),g:a(255,i(Q.g,0)),b:a(255,i(Q.b,0)),a:ie}}function s(Z,Q,ie){return{r:G(Z,255)*255,g:G(Q,255)*255,b:G(ie,255)*255}}function o(Z,Q,ie){Z=G(Z,255),Q=G(Q,255),ie=G(ie,255);var oe=i(Z,Q,ie),ne=a(Z,Q,ie),le,_e,fe=(oe+ne)/2;if(oe==ne)le=_e=0;else{var ye=oe-ne;switch(_e=fe>.5?ye/(2-oe-ne):ye/(oe+ne),oe){case Z:le=(Q-ie)/ye+(Q<ie?6:0);break;case Q:le=(ie-Z)/ye+2;break;case ie:le=(Z-Q)/ye+4;break}le/=6}return{h:le,s:_e,l:fe}}function b(Z,Q,ie){var oe,ne,le;Z=G(Z,360),Q=G(Q,100),ie=G(ie,100);function _e(xe,me,be){return be<0&&(be+=1),be>1&&(be-=1),be<1/6?xe+(me-xe)*6*be:be<1/2?me:be<2/3?xe+(me-xe)*(2/3-be)*6:xe}if(Q===0)oe=ne=le=ie;else{var fe=ie<.5?ie*(1+Q):ie+Q-ie*Q,ye=2*ie-fe;oe=_e(ye,fe,Z+1/3),ne=_e(ye,fe,Z),le=_e(ye,fe,Z-1/3)}return{r:oe*255,g:ne*255,b:le*255}}function g(Z,Q,ie){Z=G(Z,255),Q=G(Q,255),ie=G(ie,255);var oe=i(Z,Q,ie),ne=a(Z,Q,ie),le,_e,fe=oe,ye=oe-ne;if(_e=oe===0?0:ye/oe,oe==ne)le=0;else{switch(oe){case Z:le=(Q-ie)/ye+(Q<ie?6:0);break;case Q:le=(ie-Z)/ye+2;break;case ie:le=(Z-Q)/ye+4;break}le/=6}return{h:le,s:_e,v:fe}}function d(Z,Q,ie){Z=G(Z,360)*6,Q=G(Q,100),ie=G(ie,100);var oe=y.floor(Z),ne=Z-oe,le=ie*(1-Q),_e=ie*(1-ne*Q),fe=ie*(1-(1-ne)*Q),ye=oe%6,xe=[ie,_e,le,le,fe,ie][ye],me=[fe,ie,ie,_e,le,le][ye],be=[le,le,fe,ie,ie,_e][ye];return{r:xe*255,g:me*255,b:be*255}}function f(Z,Q,ie,oe){var ne=[ae(e(Z).toString(16)),ae(e(Q).toString(16)),ae(e(ie).toString(16))];return oe&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0):ne.join("")}function m(Z,Q,ie,oe,ne){var le=[ae(e(Z).toString(16)),ae(e(Q).toString(16)),ae(e(ie).toString(16)),ae(K(oe))];return ne&&le[0].charAt(0)==le[0].charAt(1)&&le[1].charAt(0)==le[1].charAt(1)&&le[2].charAt(0)==le[2].charAt(1)&&le[3].charAt(0)==le[3].charAt(1)?le[0].charAt(0)+le[1].charAt(0)+le[2].charAt(0)+le[3].charAt(0):le.join("")}function l(Z,Q,ie,oe){var ne=[ae(K(oe)),ae(e(Z).toString(16)),ae(e(Q).toString(16)),ae(e(ie).toString(16))];return ne.join("")}r.equals=function(Z,Q){return!Z||!Q?!1:r(Z).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:n(),g:n(),b:n()})};function x(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toHsl();return ie.s-=Q/100,ie.s=Y(ie.s),r(ie)}function u(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toHsl();return ie.s+=Q/100,ie.s=Y(ie.s),r(ie)}function M(Z){return r(Z).desaturate(100)}function w(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toHsl();return ie.l+=Q/100,ie.l=Y(ie.l),r(ie)}function p(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toRgb();return ie.r=i(0,a(255,ie.r-e(255*-(Q/100)))),ie.g=i(0,a(255,ie.g-e(255*-(Q/100)))),ie.b=i(0,a(255,ie.b-e(255*-(Q/100)))),r(ie)}function _(Z,Q){Q=Q===0?0:Q||10;var ie=r(Z).toHsl();return ie.l-=Q/100,ie.l=Y(ie.l),r(ie)}function h(Z,Q){var ie=r(Z).toHsl(),oe=(ie.h+Q)%360;return ie.h=oe<0?360+oe:oe,r(ie)}function L(Z){var Q=r(Z).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function E(Z){var Q=r(Z).toHsl(),ie=Q.h;return[r(Z),r({h:(ie+120)%360,s:Q.s,l:Q.l}),r({h:(ie+240)%360,s:Q.s,l:Q.l})]}function S(Z){var Q=r(Z).toHsl(),ie=Q.h;return[r(Z),r({h:(ie+90)%360,s:Q.s,l:Q.l}),r({h:(ie+180)%360,s:Q.s,l:Q.l}),r({h:(ie+270)%360,s:Q.s,l:Q.l})]}function P(Z){var Q=r(Z).toHsl(),ie=Q.h;return[r(Z),r({h:(ie+72)%360,s:Q.s,l:Q.l}),r({h:(ie+216)%360,s:Q.s,l:Q.l})]}function F(Z,Q,ie){Q=Q||6,ie=ie||30;var oe=r(Z).toHsl(),ne=360/ie,le=[r(Z)];for(oe.h=(oe.h-(ne*Q>>1)+720)%360;--Q;)oe.h=(oe.h+ne)%360,le.push(r(oe));return le}function I(Z,Q){Q=Q||6;for(var ie=r(Z).toHsv(),oe=ie.h,ne=ie.s,le=ie.v,_e=[],fe=1/Q;Q--;)_e.push(r({h:oe,s:ne,v:le})),le=(le+fe)%1;return _e}r.mix=function(Z,Q,ie){ie=ie===0?0:ie||50;var oe=r(Z).toRgb(),ne=r(Q).toRgb(),le=ie/100,_e={r:(ne.r-oe.r)*le+oe.r,g:(ne.g-oe.g)*le+oe.g,b:(ne.b-oe.b)*le+oe.b,a:(ne.a-oe.a)*le+oe.a};return r(_e)},r.readability=function(Z,Q){var ie=r(Z),oe=r(Q);return(y.max(ie.getLuminance(),oe.getLuminance())+.05)/(y.min(ie.getLuminance(),oe.getLuminance())+.05)},r.isReadable=function(Z,Q,ie){var oe=r.readability(Z,Q),ne,le;switch(le=!1,ne=re(ie),ne.level+ne.size){case"AAsmall":case"AAAlarge":le=oe>=4.5;break;case"AAlarge":le=oe>=3;break;case"AAAsmall":le=oe>=7;break}return le},r.mostReadable=function(Z,Q,ie){var oe=null,ne=0,le,_e,fe,ye;ie=ie||{},_e=ie.includeFallbackColors,fe=ie.level,ye=ie.size;for(var xe=0;xe<Q.length;xe++)le=r.readability(Z,Q[xe]),le>ne&&(ne=le,oe=r(Q[xe]));return r.isReadable(Z,oe,{level:fe,size:ye})||!_e?oe:(ie.includeFallbackColors=!1,r.mostReadable(Z,["#fff","#000"],ie))};var D=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=r.hexNames=O(D);function O(Z){var Q={};for(var ie in Z)Z.hasOwnProperty(ie)&&(Q[Z[ie]]=ie);return Q}function z(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function G(Z,Q){j(Z)&&(Z="100%");var ie=X(Z);return Z=a(Q,i(0,parseFloat(Z))),ie&&(Z=parseInt(Z*Q,10)/100),y.abs(Z-Q)<1e-6?1:Z%Q/parseFloat(Q)}function Y(Z){return a(1,i(0,Z))}function ee(Z){return parseInt(Z,16)}function j(Z){return typeof Z=="string"&&Z.indexOf(".")!=-1&&parseFloat(Z)===1}function X(Z){return typeof Z=="string"&&Z.indexOf("%")!=-1}function ae(Z){return Z.length==1?"0"+Z:""+Z}function he(Z){return Z<=1&&(Z=Z*100+"%"),Z}function K(Z){return y.round(parseFloat(Z)*255).toString(16)}function J(Z){return ee(Z)/255}var U=function(){var Z="[-\\+]?\\d+%?",Q="[-\\+]?\\d*\\.\\d+%?",ie="(?:"+Q+")|(?:"+Z+")",oe="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",ne="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?";return{CSS_UNIT:new RegExp(ie),rgb:new RegExp("rgb"+oe),rgba:new RegExp("rgba"+ne),hsl:new RegExp("hsl"+oe),hsla:new RegExp("hsla"+ne),hsv:new RegExp("hsv"+oe),hsva:new RegExp("hsva"+ne),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function H(Z){return!!U.CSS_UNIT.exec(Z)}function q(Z){Z=Z.replace(c,"").replace(A,"").toLowerCase();var Q=!1;if(D[Z])Z=D[Z],Q=!0;else if(Z=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ie;return(ie=U.rgb.exec(Z))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=U.rgba.exec(Z))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=U.hsl.exec(Z))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=U.hsla.exec(Z))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=U.hsv.exec(Z))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=U.hsva.exec(Z))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=U.hex8.exec(Z))?{r:ee(ie[1]),g:ee(ie[2]),b:ee(ie[3]),a:J(ie[4]),format:Q?"name":"hex8"}:(ie=U.hex6.exec(Z))?{r:ee(ie[1]),g:ee(ie[2]),b:ee(ie[3]),format:Q?"name":"hex"}:(ie=U.hex4.exec(Z))?{r:ee(ie[1]+""+ie[1]),g:ee(ie[2]+""+ie[2]),b:ee(ie[3]+""+ie[3]),a:J(ie[4]+""+ie[4]),format:Q?"name":"hex8"}:(ie=U.hex3.exec(Z))?{r:ee(ie[1]+""+ie[1]),g:ee(ie[2]+""+ie[2]),b:ee(ie[3]+""+ie[3]),format:Q?"name":"hex"}:!1}function re(Z){var Q,ie;return Z=Z||{level:"AA",size:"small"},Q=(Z.level||"AA").toUpperCase(),ie=(Z.size||"small").toLowerCase(),Q!=="AA"&&Q!=="AAA"&&(Q="AA"),ie!=="small"&&ie!=="large"&&(ie="small"),{level:Q,size:ie}}typeof N<"u"&&N.exports?N.exports=r:window.tinycolor=r})(Math)},{}],314:[function(t,N,V){N.exports=A,N.exports.float32=N.exports.float=A,N.exports.fract32=N.exports.fract=c;var y=new Float32Array(1);function c(T,e){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);e instanceof Float32Array||(e=A(T));for(var a=0,i=e.length;a<i;a++)e[a]=T[a]-e[a];return e}return A(T-A(T))}function A(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(y[0]=T,y[0])}},{}],315:[function(t,N,V){var y=t("parse-unit");N.exports=e;var c=96;function A(a,i){var n=y(getComputedStyle(a).getPropertyValue(i));return n[0]*e(n[1],a)}function T(a,i){var n=document.createElement("div");n.style["font-size"]="128"+a,i.appendChild(n);var r=A(n,"font-size")/128;return i.removeChild(n),r}function e(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),(i===window||i===document)&&(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return T(a,i);case"em":return A(i,"font-size");case"rem":return A(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return c;case"cm":return c/2.54;case"mm":return c/25.4;case"pt":return c/72;case"pc":return c/6}return 1}},{"parse-unit":251}],316:[function(t,N,V){(function(y,c){typeof V=="object"&&typeof N<"u"?c(V):(y=y||self,c(y.topojson=y.topojson||{}))})(this,function(y){function c(u){return u}function A(u){if(u==null)return c;var M,w,p=u.scale[0],_=u.scale[1],h=u.translate[0],L=u.translate[1];return function(E,S){S||(M=w=0);var P=2,F=E.length,I=new Array(F);for(I[0]=(M+=E[0])*p+h,I[1]=(w+=E[1])*_+L;P<F;)I[P]=E[P],++P;return I}}function T(u){var M=A(u.transform),w,p=1/0,_=p,h=-p,L=-p;function E(P){P=M(P),P[0]<p&&(p=P[0]),P[0]>h&&(h=P[0]),P[1]<_&&(_=P[1]),P[1]>L&&(L=P[1])}function S(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(S);break;case"Point":E(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(E);break}}u.arcs.forEach(function(P){for(var F=-1,I=P.length,D;++F<I;)D=M(P[F],F),D[0]<p&&(p=D[0]),D[0]>h&&(h=D[0]),D[1]<_&&(_=D[1]),D[1]>L&&(L=D[1])});for(w in u.objects)S(u.objects[w]);return[p,_,h,L]}function e(u,M){for(var w,p=u.length,_=p-M;_<--p;)w=u[_],u[_++]=u[p],u[p]=w}function a(u,M){return typeof M=="string"&&(M=u.objects[M]),M.type==="GeometryCollection"?{type:"FeatureCollection",features:M.geometries.map(function(w){return i(u,w)})}:i(u,M)}function i(u,M){var w=M.id,p=M.bbox,_=M.properties==null?{}:M.properties,h=n(u,M);return w==null&&p==null?{type:"Feature",properties:_,geometry:h}:p==null?{type:"Feature",id:w,properties:_,geometry:h}:{type:"Feature",id:w,bbox:p,properties:_,geometry:h}}function n(u,M){var w=A(u.transform),p=u.arcs;function _(F,I){I.length&&I.pop();for(var D=p[F<0?~F:F],R=0,O=D.length;R<O;++R)I.push(w(D[R],R));F<0&&e(I,O)}function h(F){return w(F)}function L(F){for(var I=[],D=0,R=F.length;D<R;++D)_(F[D],I);return I.length<2&&I.push(I[0]),I}function E(F){for(var I=L(F);I.length<4;)I.push(I[0]);return I}function S(F){return F.map(E)}function P(F){var I=F.type,D;switch(I){case"GeometryCollection":return{type:I,geometries:F.geometries.map(P)};case"Point":D=h(F.coordinates);break;case"MultiPoint":D=F.coordinates.map(h);break;case"LineString":D=L(F.arcs);break;case"MultiLineString":D=F.arcs.map(L);break;case"Polygon":D=S(F.arcs);break;case"MultiPolygon":D=F.arcs.map(S);break;default:return null}return{type:I,coordinates:D}}return P(M)}function r(u,M){var w={},p={},_={},h=[],L=-1;M.forEach(function(P,F){var I=u.arcs[P<0?~P:P],D;I.length<3&&!I[1][0]&&!I[1][1]&&(D=M[++L],M[L]=P,M[F]=D)}),M.forEach(function(P){var F=E(P),I=F[0],D=F[1],R,O;if(R=_[I])if(delete _[R.end],R.push(P),R.end=D,O=p[D]){delete p[O.start];var z=O===R?R:R.concat(O);p[z.start=R.start]=_[z.end=O.end]=z}else p[R.start]=_[R.end]=R;else if(R=p[D])if(delete p[R.start],R.unshift(P),R.start=I,O=_[I]){delete _[O.end];var G=O===R?R:O.concat(R);p[G.start=O.start]=_[G.end=R.end]=G}else p[R.start]=_[R.end]=R;else R=[P],p[R.start=I]=_[R.end=D]=R});function E(P){var F=u.arcs[P<0?~P:P],I=F[0],D;return u.transform?(D=[0,0],F.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=F[F.length-1],P<0?[D,I]:[I,D]}function S(P,F){for(var I in P){var D=P[I];delete F[D.start],delete D.start,delete D.end,D.forEach(function(R){w[R<0?~R:R]=1}),h.push(D)}}return S(_,p),S(p,_),M.forEach(function(P){w[P<0?~P:P]||h.push([P])}),h}function v(u){return n(u,s.apply(this,arguments))}function s(u,M,w){var p,_,h;if(arguments.length>1)p=o(u,M,w);else for(_=0,p=new Array(h=u.arcs.length);_<h;++_)p[_]=_;return{type:"MultiLineString",arcs:r(u,p)}}function o(u,M,w){var p=[],_=[],h;function L(I){var D=I<0?~I:I;(_[D]||(_[D]=[])).push({i:I,g:h})}function E(I){I.forEach(L)}function S(I){I.forEach(E)}function P(I){I.forEach(S)}function F(I){switch(h=I,I.type){case"GeometryCollection":I.geometries.forEach(F);break;case"LineString":E(I.arcs);break;case"MultiLineString":case"Polygon":S(I.arcs);break;case"MultiPolygon":P(I.arcs);break}}return F(M),_.forEach(w==null?function(I){p.push(I[0].i)}:function(I){w(I[0].g,I[I.length-1].g)&&p.push(I[0].i)}),p}function b(u){for(var M=-1,w=u.length,p,_=u[w-1],h=0;++M<w;)p=_,_=u[M],h+=p[0]*_[1]-p[1]*_[0];return Math.abs(h)}function g(u){return n(u,d.apply(this,arguments))}function d(u,M){var w={},p=[],_=[];M.forEach(h);function h(S){switch(S.type){case"GeometryCollection":S.geometries.forEach(h);break;case"Polygon":L(S.arcs);break;case"MultiPolygon":S.arcs.forEach(L);break}}function L(S){S.forEach(function(P){P.forEach(function(F){(w[F=F<0?~F:F]||(w[F]=[])).push(S)})}),p.push(S)}function E(S){return b(n(u,{type:"Polygon",arcs:[S]}).coordinates[0])}return p.forEach(function(S){if(!S._){var P=[],F=[S];for(S._=1,_.push(P);S=F.pop();)P.push(S),S.forEach(function(I){I.forEach(function(D){w[D<0?~D:D].forEach(function(R){R._||(R._=1,F.push(R))})})})}}),p.forEach(function(S){delete S._}),{type:"MultiPolygon",arcs:_.map(function(S){var P=[],F;if(S.forEach(function(z){z.forEach(function(G){G.forEach(function(Y){w[Y<0?~Y:Y].length<2&&P.push(Y)})})}),P=r(u,P),(F=P.length)>1)for(var I=1,D=E(P[0]),R,O;I<F;++I)(R=E(P[I]))>D&&(O=P[0],P[0]=P[I],P[I]=O,D=R);return P}).filter(function(S){return S.length>0})}}function f(u,M){for(var w=0,p=u.length;w<p;){var _=w+p>>>1;u[_]<M?w=_+1:p=_}return w}function m(u){var M={},w=u.map(function(){return[]});function p(z,G){z.forEach(function(Y){Y<0&&(Y=~Y);var ee=M[Y];ee?ee.push(G):M[Y]=[G]})}function _(z,G){z.forEach(function(Y){p(Y,G)})}function h(z,G){z.type==="GeometryCollection"?z.geometries.forEach(function(Y){h(Y,G)}):z.type in L&&L[z.type](z.arcs,G)}var L={LineString:p,MultiLineString:_,Polygon:_,MultiPolygon:function(z,G){z.forEach(function(Y){_(Y,G)})}};u.forEach(h);for(var E in M)for(var S=M[E],P=S.length,F=0;F<P;++F)for(var I=F+1;I<P;++I){var D=S[F],R=S[I],O;(O=w[D])[E=f(O,R)]!==R&&O.splice(E,0,R),(O=w[R])[E=f(O,D)]!==D&&O.splice(E,0,D)}return w}function l(u){if(u==null)return c;var M,w,p=u.scale[0],_=u.scale[1],h=u.translate[0],L=u.translate[1];return function(E,S){S||(M=w=0);var P=2,F=E.length,I=new Array(F),D=Math.round((E[0]-h)/p),R=Math.round((E[1]-L)/_);for(I[0]=D-M,M=D,I[1]=R-w,w=R;P<F;)I[P]=E[P],++P;return I}}function x(u,M){if(u.transform)throw new Error("already quantized");if(!M||!M.scale){if(!((L=Math.floor(M))>=2))throw new Error("n must be \u22652");S=u.bbox||T(u);var w=S[0],p=S[1],_=S[2],h=S[3],L;M={scale:[_-w?(_-w)/(L-1):1,h-p?(h-p)/(L-1):1],translate:[w,p]}}else S=u.bbox;var E=l(M),S,P,F=u.objects,I={};function D(z){return E(z)}function R(z){var G;switch(z.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:z.geometries.map(R)};break;case"Point":G={type:"Point",coordinates:D(z.coordinates)};break;case"MultiPoint":G={type:"MultiPoint",coordinates:z.coordinates.map(D)};break;default:return z}return z.id!=null&&(G.id=z.id),z.bbox!=null&&(G.bbox=z.bbox),z.properties!=null&&(G.properties=z.properties),G}function O(z){var G=0,Y=1,ee=z.length,j,X=new Array(ee);for(X[0]=E(z[0],0);++G<ee;)((j=E(z[G],G))[0]||j[1])&&(X[Y++]=j);return Y===1&&(X[Y++]=[0,0]),X.length=Y,X}for(P in F)I[P]=R(F[P]);return{type:"Topology",bbox:S,transform:M,objects:I,arcs:u.arcs.map(O)}}y.bbox=T,y.feature=a,y.merge=g,y.mergeArcs=d,y.mesh=v,y.meshArcs=s,y.neighbors=m,y.quantize=x,y.transform=A,y.untransform=l,Object.defineProperty(y,"__esModule",{value:!0})})},{}],317:[function(t,N,V){var y=t("../prototype/is");N.exports=function(c){if(typeof c!="function"||!hasOwnProperty.call(c,"length"))return!1;try{if(typeof c.length!="number"||typeof c.call!="function"||typeof c.apply!="function")return!1}catch{return!1}return!y(c)}},{"../prototype/is":324}],318:[function(t,N,V){var y=t("../value/is"),c=t("../object/is"),A=t("../string/coerce"),T=t("./to-short-string"),e=function(a,i){return a.replace("%v",T(i))};N.exports=function(a,i,n){if(!c(n))throw new TypeError(e(i,a));if(!y(a)){if("default"in n)return n.default;if(n.isOptional)return null}var r=A(n.errorMessage);throw y(r)||(r=i),new TypeError(e(r,a))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(t,N,V){N.exports=function(y){try{return y.toString()}catch{try{return String(y)}catch{return null}}}},{}],320:[function(t,N,V){var y=t("./safe-to-string"),c=/[\n\r\u2028\u2029]/g;N.exports=function(A){var T=y(A);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(c,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),T)}},{"./safe-to-string":319}],321:[function(t,N,V){var y=t("../value/is"),c={object:!0,function:!0,undefined:!0};N.exports=function(A){return y(A)?hasOwnProperty.call(c,typeof A):!1}},{"../value/is":327}],322:[function(t,N,V){var y=t("../lib/resolve-exception"),c=t("./is");N.exports=function(A){return c(A)?A:y(A,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(t,N,V){var y=t("../function/is"),c=/^\s*class[\s{/}]/,A=Function.prototype.toString;N.exports=function(T){return!(!y(T)||c.test(A.call(T)))}},{"../function/is":317}],324:[function(t,N,V){var y=t("../object/is");N.exports=function(c){if(!y(c))return!1;try{return c.constructor?c.constructor.prototype===c:!1}catch{return!1}}},{"../object/is":321}],325:[function(t,N,V){var y=t("../value/is"),c=t("../object/is"),A=Object.prototype.toString;N.exports=function(T){if(!y(T))return null;if(c(T)){var e=T.toString;if(typeof e!="function"||e===A)return null}try{return""+T}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(t,N,V){var y=t("../lib/resolve-exception"),c=t("./is");N.exports=function(A){return c(A)?A:y(A,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(t,N,V){var y=void 0;N.exports=function(c){return c!==y&&c!==null}},{}],328:[function(t,N,V){(function(y){(function(){var c=t("bit-twiddle"),A=t("dup"),T=t("buffer").Buffer;y.__TYPEDARRAY_POOL||(y.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),BIGUINT64:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),BIGINT64:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var e=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",i=typeof BigInt64Array<"u",n=y.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=A([32,0])),n.BIGUINT64||(n.BIGUINT64=A([32,0])),n.BIGINT64||(n.BIGINT64=A([32,0])),n.BUFFER||(n.BUFFER=A([32,0]));var r=n.DATA,v=n.BUFFER;V.free=function(S){if(T.isBuffer(S))v[c.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var P=S.length||S.byteLength,F=c.log2(P)|0;r[F].push(S)}};function s(E){if(!!E){var S=E.length||E.byteLength,P=c.log2(S);r[P].push(E)}}function o(E){s(E.buffer)}V.freeUint8=V.freeUint16=V.freeUint32=V.freeBigUint64=V.freeInt8=V.freeInt16=V.freeInt32=V.freeBigInt64=V.freeFloat32=V.freeFloat=V.freeFloat64=V.freeDouble=V.freeUint8Clamped=V.freeDataView=o,V.freeArrayBuffer=s,V.freeBuffer=function(S){v[c.log2(S.length)].push(S)},V.malloc=function(S,P){if(P===void 0||P==="arraybuffer")return b(S);switch(P){case"uint8":return g(S);case"uint16":return d(S);case"uint32":return f(S);case"int8":return m(S);case"int16":return l(S);case"int32":return x(S);case"float":case"float32":return u(S);case"double":case"float64":return M(S);case"uint8_clamped":return w(S);case"bigint64":return _(S);case"biguint64":return p(S);case"buffer":return L(S);case"data":case"dataview":return h(S);default:return null}return null};function b(S){var S=c.nextPow2(S),P=c.log2(S),F=r[P];return F.length>0?F.pop():new ArrayBuffer(S)}V.mallocArrayBuffer=b;function g(E){return new Uint8Array(b(E),0,E)}V.mallocUint8=g;function d(E){return new Uint16Array(b(2*E),0,E)}V.mallocUint16=d;function f(E){return new Uint32Array(b(4*E),0,E)}V.mallocUint32=f;function m(E){return new Int8Array(b(E),0,E)}V.mallocInt8=m;function l(E){return new Int16Array(b(2*E),0,E)}V.mallocInt16=l;function x(E){return new Int32Array(b(4*E),0,E)}V.mallocInt32=x;function u(E){return new Float32Array(b(4*E),0,E)}V.mallocFloat32=V.mallocFloat=u;function M(E){return new Float64Array(b(8*E),0,E)}V.mallocFloat64=V.mallocDouble=M;function w(E){return e?new Uint8ClampedArray(b(E),0,E):g(E)}V.mallocUint8Clamped=w;function p(E){return a?new BigUint64Array(b(8*E),0,E):null}V.mallocBigUint64=p;function _(E){return i?new BigInt64Array(b(8*E),0,E):null}V.mallocBigInt64=_;function h(E){return new DataView(b(E),0,E)}V.mallocDataView=h;function L(E){E=c.nextPow2(E);var S=c.log2(E),P=v[S];return P.length>0?P.pop():new T(E)}V.mallocBuffer=L,V.clearCache=function(){for(var S=0;S<32;++S)n.UINT8[S].length=0,n.UINT16[S].length=0,n.UINT32[S].length=0,n.INT8[S].length=0,n.INT16[S].length=0,n.INT32[S].length=0,n.FLOAT[S].length=0,n.DOUBLE[S].length=0,n.BIGUINT64[S].length=0,n.BIGINT64[S].length=0,n.UINT8C[S].length=0,r[S].length=0,v[S].length=0}}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(t,N,V){var y=/[\'\"]/;N.exports=function(A){return A?(y.test(A.charAt(0))&&(A=A.substr(1)),y.test(A.charAt(A.length-1))&&(A=A.substr(0,A.length-1)),A):""}},{}],330:[function(t,N,V){N.exports=function(c,A,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var e=0,a=T.length;e<a;e++){var i=T[e];for(var n in i)if(!(A[n]!==void 0&&!Array.isArray(A[n])&&c[n]===A[n])&&n in A){var r;if(i[n]===!0)r=A[n];else{if(i[n]===!1)continue;if(typeof i[n]=="function"&&(r=i[n](A[n],c,A),r===void 0))continue}c[n]=r}}return c}},{}],331:[function(t,N,V){(function(y){(function(){N.exports=c;function c(T,e){if(A("noDeprecation"))return T;var a=!1;function i(){if(!a){if(A("throwDeprecation"))throw new Error(e);A("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return T.apply(this,arguments)}return i}function A(T){try{if(!y.localStorage)return!1}catch{return!1}var e=y.localStorage[T];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(t,N,V){var y=t("get-canvas-context");N.exports=function(A){return y("webgl",A)}},{"get-canvas-context":194}],333:[function(t,N,V){var y=t("../main"),c=t("object-assign"),A=y.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new y.baseCalendar,c(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(b,g){if(typeof b=="string"){var d=b.match(a);return d?d[0]:""}var f=this._validateYear(b),m=b.month(),l=""+this.toChineseMonth(f,m);return g&&l.length<2&&(l="0"+l),this.isIntercalaryMonth(f,m)&&(l+="i"),l},monthNames:function(b){if(typeof b=="string"){var g=b.match(i);return g?g[0]:""}var d=this._validateYear(b),f=b.month(),m=this.toChineseMonth(d,f),l=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][m-1];return this.isIntercalaryMonth(d,f)&&(l="\u95F0"+l),l},monthNamesShort:function(b){if(typeof b=="string"){var g=b.match(n);return g?g[0]:""}var d=this._validateYear(b),f=b.month(),m=this.toChineseMonth(d,f),l=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][m-1];return this.isIntercalaryMonth(d,f)&&(l="\u95F0"+l),l},parseMonth:function(b,g){b=this._validateYear(b);var d=parseInt(g),f;if(isNaN(d))g[0]==="\u95F0"&&(f=!0,g=g.substring(1)),g[g.length-1]==="\u6708"&&(g=g.substring(0,g.length-1)),d=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(g);else{var m=g[g.length-1];f=m==="i"||m==="I"}var l=this.toMonthIndex(b,d,f);return l},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,g){if(b.year&&(b=b.year()),typeof b!="number"||b<1888||b>2111)throw g.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,g,d){var f=this.intercalaryMonth(b),m=d&&g!==f;if(m||g<1||g>12)throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);var l;return f?!d&&g<=f?l=g-1:l=g:l=g-1,l},toChineseMonth:function(b,g){b.year&&(b=b.year(),g=b.month());var d=this.intercalaryMonth(b),f=d?12:11;if(g<0||g>f)throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);var m;return d?g<d?m=g+1:m=g:m=g+1,m},intercalaryMonth:function(b){b=this._validateYear(b);var g=r[b-r[0]],d=g>>13;return d},isIntercalaryMonth:function(b,g){b.year&&(b=b.year(),g=b.month());var d=this.intercalaryMonth(b);return!!d&&d===g},leapYear:function(b){return this.intercalaryMonth(b)!==0},weekOfYear:function(b,g,d){var f=this._validateYear(b,y.local.invalidyear),m=v[f-v[0]],l=m>>9&4095,x=m>>5&15,u=m&31,M;M=A.newDate(l,x,u),M.add(4-(M.dayOfWeek()||7),"d");var w=this.toJD(b,g,d)-M.toJD();return 1+Math.floor(w/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,g){b.year&&(g=b.month(),b=b.year()),b=this._validateYear(b);var d=r[b-r[0]],f=d>>13,m=f?12:11;if(g>m)throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);var l=d&1<<12-g?30:29;return l},weekDay:function(b,g,d){return(this.dayOfWeek(b,g,d)||7)<6},toJD:function(b,g,d){var f=this._validate(b,l,d,y.local.invalidDate);b=this._validateYear(f.year()),g=f.month(),d=f.day();var m=this.isIntercalaryMonth(b,g),l=this.toChineseMonth(b,g),x=o(b,l,d,m);return A.toJD(x.year,x.month,x.day)},fromJD:function(b){var g=A.fromJD(b),d=s(g.year(),g.month(),g.day()),f=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,f,d.day)},fromString:function(b){var g=b.match(e),d=this._validateYear(+g[1]),f=+g[2],m=!!g[3],l=this.toMonthIndex(d,f,m),x=+g[4];return this.newDate(d,l,x)},add:function(b,g,d){var f=b.year(),m=b.month(),l=this.isIntercalaryMonth(f,m),x=this.toChineseMonth(f,m),u=Object.getPrototypeOf(T.prototype).add.call(this,b,g,d);if(d==="y"){var M=u.year(),w=u.month(),p=this.isIntercalaryMonth(M,x),_=l&&p?this.toMonthIndex(M,x,!0):this.toMonthIndex(M,x,!1);_!==w&&u.month(_)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,i=/^??[]?/m,n=/^??[]?/m;y.calendars.chinese=T;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],v=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(b,g,d,f){var m,l;if(typeof b=="object")m=b,l=g||{};else{var x=typeof b=="number"&&b>=1888&&b<=2111;if(!x)throw new Error("Solar year outside range 1888-2111");var u=typeof g=="number"&&g>=1&&g<=12;if(!u)throw new Error("Solar month outside range 1 - 12");var M=typeof d=="number"&&d>=1&&d<=31;if(!M)throw new Error("Solar day outside range 1 - 31");m={year:b,month:g,day:d},l=f||{}}var w=v[m.year-v[0]],p=m.year<<9|m.month<<5|m.day;l.year=p>=w?m.year:m.year-1,w=v[l.year-v[0]];var _=w>>9&4095,h=w>>5&15,L=w&31,E,S=new Date(_,h-1,L),P=new Date(m.year,m.month-1,m.day);E=Math.round((P-S)/(24*3600*1e3));var F=r[l.year-r[0]],I;for(I=0;I<13;I++){var D=F&1<<12-I?30:29;if(E<D)break;E-=D}var R=F>>13;return!R||I<R?(l.isIntercalary=!1,l.month=1+I):I===R?(l.isIntercalary=!0,l.month=I):(l.isIntercalary=!1,l.month=I),l.day=1+E,l}function o(b,g,d,f,m){var l,x;if(typeof b=="object")x=b,l=g||{};else{var u=typeof b=="number"&&b>=1888&&b<=2111;if(!u)throw new Error("Lunar year outside range 1888-2111");var M=typeof g=="number"&&g>=1&&g<=12;if(!M)throw new Error("Lunar month outside range 1 - 12");var w=typeof d=="number"&&d>=1&&d<=30;if(!w)throw new Error("Lunar day outside range 1 - 30");var p;typeof f=="object"?(p=!1,l=f):(p=!!f,l=m||{}),x={year:b,month:g,day:d,isIntercalary:p}}var _;_=x.day-1;var h=r[x.year-r[0]],L=h>>13,E;L&&(x.month>L||x.isIntercalary)?E=x.month:E=x.month-1;for(var S=0;S<E;S++){var P=h&1<<12-S?30:29;_+=P}var F=v[x.year-v[0]],I=F>>9&4095,D=F>>5&15,R=F&31,O=new Date(I,D-1,R+_);return l.year=O.getFullYear(),l.month=1+O.getMonth(),l.day=O.getDate(),l}},{"../main":347,"object-assign":247}],334:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,y.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,y.local.invalidDate);return T=i.year(),T<0&&T++,i.day()+(i.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(e/30)+1,n=e-(i-1)*30+1;return this.newDate(a,i,n)}}),y.calendars.coptic=A},{"../main":347,"object-assign":247}],335:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),400},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,y.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,i){var n=this._validate(e,a,i,y.local.invalidDate);return(n.day()+1)%8},weekDay:function(e,a,i){var n=this.dayOfWeek(e,a,i);return n>=2&&n<=6},extraInfo:function(e,a,i){var n=this._validate(e,a,i,y.local.invalidDate);return{century:T[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,a,i){var n=this._validate(e,a,i,y.local.invalidDate);return e=n.year()+(n.year()<0?1:0),a=n.month(),i=n.day(),i+(a>1?16:0)+(a>2?(a-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=(a-1)*400,e+=e>15?16:0;var i=Math.floor(e/32)+1,n=e-(i-1)*32+1;return this.newDate(a<=0?a-1:a,i,n)}});var T={20:"Fruitbat",21:"Anchovy"};y.calendars.discworld=A},{"../main":347,"object-assign":247}],336:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,y.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,y.local.invalidDate);return T=i.year(),T<0&&T++,i.day()+(i.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(e/30)+1,n=e-(i-1)*30+1;return this.newDate(a,i,n)}}),y.calendars.ethiopian=A},{"../main":347,"object-assign":247}],337:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(e){return e=e<0?e+1:e,T(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=a.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){return e.year&&(a=e.month(),e=e.year()),this._validate(e,a,this.minDay,y.local.invalidMonth),a===12&&this.leapYear(e)||a===8&&T(this.daysInYear(e),10)===5?30:a===9&&T(this.daysInYear(e),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==6},extraInfo:function(e,a,i){var n=this._validate(e,a,i,y.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,a,i){var n=this._validate(e,a,i,y.local.invalidDate);e=n.year(),a=n.month(),i=n.day();var r=e<=0?e+1:e,v=this.jdEpoch+this._delay1(r)+this._delay2(r)+i+1;if(a<7){for(var s=7;s<=this.monthsInYear(e);s++)v+=this.daysInMonth(e,s);for(var s=1;s<a;s++)v+=this.daysInMonth(e,s)}else for(var s=7;s<a;s++)v+=this.daysInMonth(e,s);return v},_delay1:function(e){var a=Math.floor((235*e-234)/19),i=12084+13753*a,n=a*29+Math.floor(i/25920);return T(3*(n+1),7)<3&&n++,n},_delay2:function(e){var a=this._delay1(e-1),i=this._delay1(e),n=this._delay1(e+1);return n-i===356?2:i-a===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var i=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,i,this.daysInMonth(a,i));)i++;var n=e-this.toJD(a,i,1)+1;return this.newDate(a,i,n)}});function T(e,a){return e-a*Math.floor(e/a)}y.calendars.hebrew=A},{"../main":347,"object-assign":247}],338:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,y.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==5},toJD:function(T,e,a){var i=this._validate(T,e,a,y.local.invalidDate);return T=i.year(),e=i.month(),a=i.day(),T=T<=0?T+1:T,a+Math.ceil(29.5*(e-1))+(T-1)*354+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var e=Math.floor((30*(T-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var a=Math.min(12,Math.ceil((T-29-this.toJD(e,1,1))/29.5)+1),i=T-this.toJD(e,a,1)+1;return this.newDate(e,a,i)}}),y.calendars.islamic=A},{"../main":347,"object-assign":247}],339:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,y.local.invalidYear),a=e.year()<0?e.year()+1:e.year();return a%4===0},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,y.local.invalidDate);return T=i.year(),e=i.month(),a=i.day(),T<0&&T++,e<=2&&(T--,e+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(T){var e=Math.floor(T+.5),a=e+1524,i=Math.floor((a-122.1)/365.25),n=Math.floor(365.25*i),r=Math.floor((a-n)/30.6001),v=r-Math.floor(r<14?1:13),s=i-Math.floor(v>2?4716:4715),o=a-n-Math.floor(30.6001*r);return s<=0&&s--,this.newDate(s,v,o)}}),y.calendars.julian=A},{"../main":347,"object-assign":247}],340:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,y.local.invalidYear),!1},formatYear:function(a){var i=this._validate(a,this.minMonth,this.minDay,y.local.invalidYear);a=i.year();var n=Math.floor(a/400);a=a%400,a+=a<0?400:0;var r=Math.floor(a/20);return n+"."+r+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var i=0,n=0;n<a.length;n++){var r=parseInt(a[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";i=i*20+r}return i},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,y.local.invalidYear),18},weekOfYear:function(a,i,n){return this._validate(a,i,n,y.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,y.local.invalidYear),360},daysInMonth:function(a,i){return this._validate(a,i,this.minDay,y.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,i,n){var r=this._validate(a,i,n,y.local.invalidDate);return r.day()},weekDay:function(a,i,n){return this._validate(a,i,n,y.local.invalidDate),!0},extraInfo:function(a,i,n){var r=this._validate(a,i,n,y.local.invalidDate),v=r.toJD(),s=this._toHaab(v),o=this._toTzolkin(v);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(a){a-=this.jdEpoch;var i=T(a+8+(18-1)*20,365);return[Math.floor(i/20)+1,T(i,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[e(a+20,20),e(a+4,13)]},toJD:function(a,i,n){var r=this._validate(a,i,n,y.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var i=Math.floor(a/360);a=a%360,a+=a<0?360:0;var n=Math.floor(a/20),r=a%20;return this.newDate(i,n,r)}});function T(a,i){return a-i*Math.floor(a/i)}function e(a,i){return T(a-1,i)+1}y.calendars.mayan=A},{"../main":347,"object-assign":247}],341:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar;var T=y.instance("gregorian");c(A.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear);return T.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,y.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,y.local.invalidMonth),r=n.year();r<0&&r++;for(var v=n.day(),s=1;s<n.month();s++)v+=this.daysPerMonth[s-1];return v+T.toJD(r+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;for(var i=e-Math.floor(this.toJD(a,1,1)+.5)+1,n=1;i>this.daysInMonth(a,n);)i-=this.daysInMonth(a,n),n++;return this.newDate(a,n,i)}}),y.calendars.nanakshahi=A},{"../main":347,"object-assign":247}],342:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,y.local.invalidYear);if(T=e.year(),typeof this.NEPALI_CALENDAR_DATA[T]>"u")return this.daysPerYear;for(var a=0,i=this.minMonth;i<=12;i++)a+=this.NEPALI_CALENDAR_DATA[T][i];return a},daysInMonth:function(T,e){return T.year&&(e=T.month(),T=T.year()),this._validate(T,e,this.minDay,y.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[T]>"u"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[T][e]},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==6},toJD:function(T,e,a){var i=this._validate(T,e,a,y.local.invalidDate);T=i.year(),e=i.month(),a=i.day();var n=y.instance(),r=0,v=e,s=T;this._createMissingCalendarData(T);var o=T-(v>9||v===9&&a>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(e!==9&&(r=a,v--);v!==9;)v<=0&&(v=12,s--),r+=this.NEPALI_CALENDAR_DATA[s][v],v--;return e===9?(r+=a-this.NEPALI_CALENDAR_DATA[s][0],r<0&&(r+=n.daysInYear(o))):r+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(o,1,1).add(r,"d").toJD()},fromJD:function(T){var e=y.instance(),a=e.fromJD(T),i=a.year(),n=a.dayOfYear(),r=i+56;this._createMissingCalendarData(r);for(var v=9,s=this.NEPALI_CALENDAR_DATA[r][0],o=this.NEPALI_CALENDAR_DATA[r][v]-s+1;n>o;)v++,v>12&&(v=1,r++),o+=this.NEPALI_CALENDAR_DATA[r][v];var b=this.NEPALI_CALENDAR_DATA[r][v]-(o-n);return this.newDate(r,v,b)},_createMissingCalendarData:function(T){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=T-1;a<T+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]>"u"&&(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),y.calendars.nepali=A},{"../main":347,"object-assign":247}],343:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-((n.dayOfWeek()+1)%7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,y.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==5},toJD:function(e,a,i){var n=this._validate(e,a,i,y.local.invalidDate);e=n.year(),a=n.month(),i=n.day();var r=e-(e>=0?474:473),v=474+T(r,2820);return i+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((v*682-110)/2816)+(v-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var a=e-this.toJD(475,1,1),i=Math.floor(a/1029983),n=T(a,1029983),r=2820;if(n!==1029982){var v=Math.floor(n/366),s=T(n,366);r=Math.floor((2134*v+2816*s+2815)/1028522)+v+1}var o=r+2820*i+474;o=o<=0?o-1:o;var b=e-this.toJD(o,1,1)+1,g=b<=186?Math.ceil(b/31):Math.ceil((b-6)/30),d=e-this.toJD(o,g,1)+1;return this.newDate(o,g,d)}});function T(e,a){return e-a*Math.floor(e/a)}y.calendars.persian=A,y.calendars.jalali=A},{"../main":347,"object-assign":247}],344:[function(t,N,V){var y=t("../main"),c=t("object-assign"),A=y.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new y.baseCalendar,c(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,y.local.invalidYear),i=this._t2gYear(a.year());return A.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,y.local.invalidYear),r=this._t2gYear(n.year());return A.weekOfYear(r,n.month(),n.day())},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,y.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,y.local.invalidDate),r=this._t2gYear(n.year());return A.toJD(r,n.month(),n.day())},fromJD:function(e){var a=A.fromJD(e),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),y.calendars.taiwan=T},{"../main":347,"object-assign":247}],345:[function(t,N,V){var y=t("../main"),c=t("object-assign"),A=y.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new y.baseCalendar,c(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,y.local.invalidYear),i=this._t2gYear(a.year());return A.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,y.local.invalidYear),r=this._t2gYear(n.year());return A.weekOfYear(r,n.month(),n.day())},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,y.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,y.local.invalidDate),r=this._t2gYear(n.year());return A.toJD(r,n.month(),n.day())},fromJD:function(e){var a=A.fromJD(e),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),y.calendars.thai=T},{"../main":347,"object-assign":247}],346:[function(t,N,V){var y=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new y.baseCalendar,c(A.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=0,i=1;i<=12;i++)a+=this.daysInMonth(e,i);return a},daysInMonth:function(e,a){for(var i=this._validate(e,a,this.minDay,y.local.invalidMonth),n=i.toJD()-24e5+.5,r=0,v=0;v<T.length;v++){if(T[v]>n)return T[r]-T[r-1];r++}return 30},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==5},toJD:function(e,a,i){var n=this._validate(e,a,i,y.local.invalidDate),r=12*(n.year()-1)+n.month()-15292,v=n.day()+T[r-1]-1;return v+24e5-.5},fromJD:function(e){for(var a=e-24e5+.5,i=0,n=0;n<T.length&&!(T[n]>a);n++)i++;var r=i+15292,v=Math.floor((r-1)/12),s=v+1,o=r-12*v,b=a-T[i-1]+1;return this.newDate(s,o,b)},isValid:function(e,a,i){var n=y.baseCalendar.prototype.isValid.apply(this,arguments);return n&&(e=e.year!=null?e.year:e,n=e>=1276&&e<=1500),n},_validate:function(e,a,i,n){var r=y.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw n.replace(/\{0\}/,this.local.name);return r}}),y.calendars.ummalqura=A;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(t,N,V){var y=t("object-assign");function c(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}y(c.prototype,{instance:function(n,r){n=(n||"gregorian").toLowerCase(),r=r||"";var v=this._localCals[n+"-"+r];if(!v&&this.calendars[n]&&(v=new this.calendars[n](r),this._localCals[n+"-"+r]=v),!v)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,n);return v},newDate:function(n,r,v,s,o){return s=(n!=null&&n.year?n.calendar():typeof s=="string"?this.instance(s,o):s)||this.instance(),s.newDate(n,r,v)},substituteDigits:function(n){return function(r){return(r+"").replace(/[0-9]/g,function(v){return n[v]})}},substituteChineseDigits:function(n,r){return function(v){for(var s="",o=0;v>0;){var b=v%10;s=(b===0?"":n[b]+r[o])+s,o++,v=Math.floor(v/10)}return s.indexOf(n[1]+r[1])===0&&(s=s.substr(1)),s||n[0]}}});function A(n,r,v,s){if(this._calendar=n,this._year=r,this._month=v,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(n,r){return n=""+n,"000000".substring(0,r-n.length)+n}y(A.prototype,{newDate:function(n,r,v){return this._calendar.newDate(n==null?this:n,r,v)},year:function(n){return arguments.length===0?this._year:this.set(n,"y")},month:function(n){return arguments.length===0?this._month:this.set(n,"m")},day:function(n){return arguments.length===0?this._day:this.set(n,"d")},date:function(n,r,v){if(!this._calendar.isValid(n,r,v))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=n,this._month=r,this._day=v,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(n,r){return this._calendar.add(this,n,r)},set:function(n,r){return this._calendar.set(this,n,r)},compareTo:function(n){if(this._calendar.name!==n._calendar.name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,n._calendar.local.name);var r=this._year!==n._year?this._year-n._year:this._month!==n._month?this.monthOfYear()-n.monthOfYear():this._day-n._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(n){return this._calendar.fromJD(n)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(n){return this._calendar.fromJSDate(n)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}});function e(){this.shortYearCutoff="+10"}y(e.prototype,{_validateLevel:0,newDate:function(n,r,v){return n==null?this.today():(n.year&&(this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),v=n.day(),r=n.month(),n=n.year()),new A(this,n,r,v))},today:function(){return this.fromJSDate(new Date)},epoch:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+T(Math.abs(r.year()),4)},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),12},monthOfYear:function(n,r){var v=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return(v.month()+this.monthsInYear(v)-this.firstMonth)%this.monthsInYear(v)+this.minMonth},fromMonthOfYear:function(n,r){var v=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(n)+this.minMonth;return this._validate(n,v,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth),v},daysInYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(n,r,v){return this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),{}},add:function(n,r,v){return this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate),this._correctAdd(n,this._add(n,r,v),r,v)},_add:function(n,r,v){if(this._validateLevel++,v==="d"||v==="w"){var s=n.toJD()+r*(v==="w"?this.daysInWeek():1),o=n.calendar().fromJD(s);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var b=n.year()+(v==="y"?r:0),g=n.monthOfYear()+(v==="m"?r:0),o=n.day(),d=function(l){for(;g<l.minMonth;)b--,g+=l.monthsInYear(b);for(var x=l.monthsInYear(b);g>x-1+l.minMonth;)b++,g-=x,x=l.monthsInYear(b)};v==="y"?(n.month()!==this.fromMonthOfYear(b,g)&&(g=this.newDate(b,n.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(b)),o=Math.min(o,this.daysInMonth(b,this.fromMonthOfYear(b,g)))):v==="m"&&(d(this),o=Math.min(o,this.daysInMonth(b,this.fromMonthOfYear(b,g))));var f=[b,this.fromMonthOfYear(b,g),o];return this._validateLevel--,f}catch(m){throw this._validateLevel--,m}},_correctAdd:function(n,r,v,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(r[0]===0||n.year()>0!=r[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],b=v<0?-1:1;r=this._add(n,v*o[0]+b*o[1],o[2])}return n.date(r[0],r[1],r[2])},set:function(n,r,v){this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate);var s=v==="y"?r:n.year(),o=v==="m"?r:n.month(),b=v==="d"?r:n.day();return(v==="y"||v==="m")&&(b=Math.min(b,this.daysInMonth(s,o))),n.date(s,o,b)},isValid:function(n,r,v){this._validateLevel++;var s=this.hasYearZero||n!==0;if(s){var o=this.newDate(n,r,this.minDay);s=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(o)&&v>=this.minDay&&v-this.minDay<this.daysInMonth(o)}return this._validateLevel--,s},toJSDate:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return i.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(n){return this.fromJD(i.instance().fromJSDate(n).toJD())},_validate:function(n,r,v,s){if(n.year){if(this._validateLevel===0&&this.name!==n.calendar().name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,n.calendar().local.name);return n}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(n,r,v))throw s.replace(/\{0\}/,this.local.name);var o=this.newDate(n,r,v);return this._validateLevel--,o}catch(b){throw this._validateLevel--,b}}});function a(n){this.local=this.regionalOptions[n]||this.regionalOptions[""]}a.prototype=new e,y(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var r=this._validate(v,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),v=r.year()+(r.year()<0?1:0);return v%4===0&&(v%100!==0||v%400===0)},weekOfYear:function(n,r,v){var s=this.newDate(n,r,v);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(n,r){var v=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(n,r,v){return(this.dayOfWeek(n,r,v)||7)<6},toJD:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);n=s.year(),r=s.month(),v=s.day(),n<0&&n++,r<3&&(r+=12,n--);var o=Math.floor(n/100),b=2-o+Math.floor(o/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(r+1))+v+b-1524.5},fromJD:function(n){var r=Math.floor(n+.5),v=Math.floor((r-186721625e-2)/36524.25);v=r+1+v-Math.floor(v/4);var s=v+1524,o=Math.floor((s-122.1)/365.25),b=Math.floor(365.25*o),g=Math.floor((s-b)/30.6001),d=s-b-Math.floor(g*30.6001),f=g-(g>13.5?13:1),m=o-(f>2.5?4716:4715);return m<=0&&m--,this.newDate(m,f,d)},toJSDate:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),o=new Date(s.year(),s.month()-1,s.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(n){return this.newDate(n.getFullYear(),n.getMonth()+1,n.getDate())}});var i=N.exports=new c;i.cdate=A,i.baseCalendar=e,i.calendars.gregorian=a},{"object-assign":247}],348:[function(t,N,V){var y=t("object-assign"),c=t("./main");y(c.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),c.local=c.regionalOptions[""],y(c.cdate.prototype,{formatDate:function(A,T){return typeof A!="string"&&(T=A,A=""),this._calendar.formatDate(A||"",this,T)}}),y(c.baseCalendar.prototype,{UNIX_EPOCH:c.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:c.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(A,T,e){if(typeof A!="string"&&(e=T,T=A,A=""),!T)return"";if(T.calendar()!==this)throw c.local.invalidFormat||c.regionalOptions[""].invalidFormat;A=A||this.local.dateFormat,e=e||{};var a=e.dayNamesShort||this.local.dayNamesShort,i=e.dayNames||this.local.dayNames,n=e.monthNumbers||this.local.monthNumbers,r=e.monthNamesShort||this.local.monthNamesShort,v=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var s=function(w,p){for(var _=1;M+_<A.length&&A.charAt(M+_)===w;)_++;return M+=_-1,Math.floor(_/(p||1))>1},o=function(w,p,_,h){var L=""+p;if(s(w,h))for(;L.length<_;)L="0"+L;return L},b=function(w,p,_,h){return s(w)?h[p]:_[p]},g=this,d=function(w){return typeof n=="function"?n.call(g,w,s("m")):l(o("m",w.month(),2))},f=function(w,p){return p?typeof v=="function"?v.call(g,w):v[w.month()-g.minMonth]:typeof r=="function"?r.call(g,w):r[w.month()-g.minMonth]},m=this.local.digits,l=function(w){return e.localNumbers&&m?m(w):w},x="",u=!1,M=0;M<A.length;M++)if(u)A.charAt(M)==="'"&&!s("'")?u=!1:x+=A.charAt(M);else switch(A.charAt(M)){case"d":x+=l(o("d",T.day(),2));break;case"D":x+=b("D",T.dayOfWeek(),a,i);break;case"o":x+=o("o",T.dayOfYear(),3);break;case"w":x+=o("w",T.weekOfYear(),2);break;case"m":x+=d(T);break;case"M":x+=f(T,s("M"));break;case"y":x+=s("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":s("Y",2),x+=T.formatYear();break;case"J":x+=T.toJD();break;case"@":x+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?x+="'":u=!0;break;default:x+=A.charAt(M)}return x},parseDate:function(A,T,e){if(T==null)throw c.local.invalidArguments||c.regionalOptions[""].invalidArguments;if(T=typeof T=="object"?T.toString():T+"",T==="")return null;A=A||this.local.dateFormat,e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var i=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,v=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,o=e.monthNames||this.local.monthNames,b=-1,g=-1,d=-1,f=-1,m=-1,l=!1,x=!1,u=function(I,D){for(var R=1;S+R<A.length&&A.charAt(S+R)===I;)R++;return S+=R-1,Math.floor(R/(D||1))>1},M=function(I,D){var R=u(I,D),O=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],z=new RegExp("^-?\\d{1,"+O+"}"),G=T.substring(E).match(z);if(!G)throw(c.local.missingNumberAt||c.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=G[0].length,parseInt(G[0],10)},w=this,p=function(){if(typeof v=="function"){u("m");var I=v.call(w,T.substring(E));return E+=I.length,I}return M("m")},_=function(I,D,R,O){for(var z=u(I,O)?R:D,G=0;G<z.length;G++)if(T.substr(E,z[G].length).toLowerCase()===z[G].toLowerCase())return E+=z[G].length,G+w.minMonth;throw(c.local.unknownNameAt||c.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},h=function(){if(typeof o=="function"){var I=u("M")?o.call(w,T.substring(E)):s.call(w,T.substring(E));return E+=I.length,I}return _("M",s,o)},L=function(){if(T.charAt(E)!==A.charAt(S))throw(c.local.unexpectedLiteralAt||c.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,S=0;S<A.length;S++)if(x)A.charAt(S)==="'"&&!u("'")?x=!1:L();else switch(A.charAt(S)){case"d":f=M("d");break;case"D":_("D",i,n);break;case"o":m=M("o");break;case"w":M("w");break;case"m":d=p();break;case"M":d=h();break;case"y":var P=S;l=!u("y",2),S=P,g=M("y",2);break;case"Y":g=M("Y",2);break;case"J":b=M("J")+.5,T.charAt(E)==="."&&(E++,M("J"));break;case"@":b=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":b=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":u("'")?L():x=!0;break;default:L()}if(E<T.length)throw c.local.unexpectedText||c.regionalOptions[""].unexpectedText;if(g===-1?g=this.today().year():g<100&&l&&(g+=a===-1?1900:this.today().year()-this.today().year()%100-(g<=a?0:100)),typeof d=="string"&&(d=r.call(this,g,d)),m>-1){d=1,f=m;for(var F=this.daysInMonth(g,d);f>F;F=this.daysInMonth(g,d))d++,f-=F}return b>-1?this.fromJD(b):this.newDate(g,d,f)},determineDate:function(A,T,e,a,i){e&&typeof e!="object"&&(i=a,a=e,e=null),typeof a!="string"&&(i=a,a="");var n=this,r=function(v){try{return n.parseDate(a,v,i)}catch{}v=v.toLowerCase();for(var s=(v.match(/^c/)&&e?e.newDate():null)||n.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,b=o.exec(v);b;)s.add(parseInt(b[1],10),b[2]||"d"),b=o.exec(v);return s};return T=T?T.newDate():null,A=A==null?T:typeof A=="string"?r(A):typeof A=="number"?isNaN(A)||A===1/0||A===-1/0?T:n.today().add(A,"d"):n.newDate(A),A}})},{"./main":347,"object-assign":247}],349:[function(t,N,V){N.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(t,N,V){var y=t("./arrow_paths"),c=t("../../plots/font_attributes"),A=t("../../plots/cartesian/constants"),T=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),N.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:y.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:y.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",A.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",A.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",A.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",A.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:c({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("./draw").draw;N.exports=function(i){var n=i._fullLayout,r=y.filterVisible(n.annotations);if(r.length&&i._fullData.length)return y.syncOrAsync([A,T],i)};function T(a){var i=a._fullLayout;y.filterVisible(i.annotations).forEach(function(n){var r=c.getFromId(a,n.xref),v=c.getFromId(a,n.yref),s=c.getRefType(n.xref),o=c.getRefType(n.yref);n._extremes={},s==="range"&&e(n,r),o==="range"&&e(n,v)})}function e(a,i){var n=i._id,r=n.charAt(0),v=a[r],s=a["a"+r],o=a[r+"ref"],b=a["a"+r+"ref"],g=a["_"+r+"padplus"],d=a["_"+r+"padminus"],f={x:1,y:-1}[r]*a[r+"shift"],m=3*a.arrowsize*a.arrowwidth||0,l=m+f,x=m-f,u=3*a.startarrowsize*a.arrowwidth||0,M=u+f,w=u-f,p;if(b===o){var _=c.findExtremes(i,[i.r2c(v)],{ppadplus:l,ppadminus:x}),h=c.findExtremes(i,[i.r2c(s)],{ppadplus:Math.max(g,M),ppadminus:Math.max(d,w)});p={min:[_.min[0],h.min[0]],max:[_.max[0],h.max[0]]}}else M=s?M+s:M,w=s?w-s:w,p=c.findExtremes(i,[i.r2c(v)],{ppadplus:Math.max(g,l,M),ppadminus:Math.max(d,x,w)});a._extremes[n]=p}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(t,N,V){var y=t("../../lib"),c=t("../../registry"),A=t("../../plot_api/plot_template").arrayEditor;N.exports={hasClickToShow:T,onClick:e};function T(n,r){var v=a(n,r);return v.on.length>0||v.explicitOff.length>0}function e(n,r){var v=a(n,r),s=v.on,o=v.off.concat(v.explicitOff),b={},g=n._fullLayout.annotations,d,f;if(!!(s.length||o.length)){for(d=0;d<s.length;d++)f=A(n.layout,"annotations",g[s[d]]),f.modifyItem("visible",!0),y.extendFlat(b,f.getUpdateObj());for(d=0;d<o.length;d++)f=A(n.layout,"annotations",g[o[d]]),f.modifyItem("visible",!1),y.extendFlat(b,f.getUpdateObj());return c.call("update",n,{},b)}}function a(n,r){var v=n._fullLayout.annotations,s=[],o=[],b=[],g=(r||[]).length,d,f,m,l,x,u,M,w;for(d=0;d<v.length;d++)if(m=v[d],l=m.clicktoshow,l){for(f=0;f<g;f++)if(x=r[f],u=x.xaxis,M=x.yaxis,u._id===m.xref&&M._id===m.yref&&u.d2r(x.x)===i(m._xclick,u)&&M.d2r(x.y)===i(m._yclick,M)){m.visible?l==="onout"?w=o:w=b:w=s,w.push(d);break}f===g&&m.visible&&l==="onout"&&o.push(d)}return{on:s,off:o,explicitOff:b}}function i(n,r){return r.type==="log"?r.l2r(n):r.d2r(n)}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(t,N,V){var y=t("../../lib"),c=t("../color");N.exports=function(T,e,a,i){i("opacity");var n=i("bgcolor"),r=i("bordercolor"),v=c.opacity(r);i("borderpad");var s=i("borderwidth"),o=i("showarrow");i("text",o?" ":a._dfltTitle.annotation),i("textangle"),y.coerceFont(i,"font",a.font),i("width"),i("align");var b=i("height");if(b&&i("valign"),o){var g=i("arrowside"),d,f;g.indexOf("end")!==-1&&(d=i("arrowhead"),f=i("arrowsize")),g.indexOf("start")!==-1&&(i("startarrowhead",d),i("startarrowsize",f)),i("arrowcolor",v?e.bordercolor:c.defaultLine),i("arrowwidth",(v&&s||1)*2),i("standoff"),i("startstandoff")}var m=i("hovertext"),l=a.hoverlabel||{};if(m){var x=i("hoverlabel.bgcolor",l.bgcolor||(c.opacity(n)?c.rgb(n):c.defaultLine)),u=i("hoverlabel.bordercolor",l.bordercolor||c.contrast(x));y.coerceFont(i,"hoverlabel.font",{family:l.font.family,size:l.font.size,color:l.font.color||u})}i("captureevents",!!m)}},{"../../lib":515,"../color":367}],354:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib/to_log_range");N.exports=function(T,e,a,i){e=e||{};var n=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!(n||r))return;var v=T._fullLayout.annotations,s=e._id.charAt(0),o,b;function g(f){var m=o[f],l=null;n?l=c(m,e.range):l=Math.pow(10,m),y(l)||(l=null),i(b+f,l)}for(var d=0;d<v.length;d++)o=v[d],b="annotations["+d+"].",o[s+"ref"]===e._id&&g(s),o["a"+s+"ref"]===e._id&&g("a"+s)}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./common_defaults"),e=t("./attributes");N.exports=function(n,r){A(n,r,{name:"annotations",handleItemDefaults:a})};function a(i,n,r){function v(L,E){return y.coerce(i,n,e,L,E)}var s=v("visible"),o=v("clicktoshow");if(!!(s||o)){T(i,n,r,v);for(var b=n.showarrow,g=["x","y"],d=[-10,-30],f={_fullLayout:r},m=0;m<2;m++){var l=g[m],x=c.coerceRef(i,n,f,l,"","paper");if(x!=="paper"){var u=c.getFromId(f,x);u._annIndices.push(n._index)}if(c.coercePosition(n,f,v,x,l,.5),b){var M="a"+l,w=c.coerceRef(i,n,f,M,"pixel",["pixel","paper"]);w!=="pixel"&&w!==x&&(w=n[M]="pixel");var p=w==="pixel"?d[m]:.4;c.coercePosition(n,f,v,w,M,p)}v(l+"anchor"),v(l+"shift")}if(y.noneOrAll(i,n,["x","y"]),b&&y.noneOrAll(i,n,["ax","ay"]),o){var _=v("xclick"),h=v("yclick");n._xclick=_===void 0?n.x:c.cleanPosition(_,f,n.xref),n._yclick=h===void 0?n.y:c.cleanPosition(h,f,n.yref)}}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../registry"),A=t("../../plots/plots"),T=t("../../lib"),e=T.strTranslate,a=t("../../plots/cartesian/axes"),i=t("../color"),n=t("../drawing"),r=t("../fx"),v=t("../../lib/svg_text_utils"),s=t("../../lib/setcursor"),o=t("../dragelement"),b=t("../../plot_api/plot_template").arrayEditor,g=t("./draw_arrow_head");N.exports={draw:d,drawOne:f,drawRaw:l};function d(x){var u=x._fullLayout;u._infolayer.selectAll(".annotation").remove();for(var M=0;M<u.annotations.length;M++)u.annotations[M].visible&&f(x,M);return A.previousPromises(x)}function f(x,u){var M=x._fullLayout,w=M.annotations[u]||{},p=a.getFromId(x,w.xref),_=a.getFromId(x,w.yref);p&&p.setScale(),_&&_.setScale(),l(x,w,u,!1,p,_)}function m(x,u,M,w,p){var _=p[M],h=p[M+"ref"],L=M.indexOf("y")!==-1,E=a.getRefType(h)==="domain",S=L?w.h:w.w;return x?E?_+(L?-u:u)/x._length:x.p2r(x.r2p(_)+u):_+(L?-u:u)/S}function l(x,u,M,w,p,_){var h=x._fullLayout,L=x._fullLayout._size,E=x._context.edits,S,P;w?(S="annotation-"+w,P=w+".annotations"):(S="annotation",P="annotations");var F=b(x.layout,P,u),I=F.modifyBase,D=F.modifyItem,R=F.getUpdateObj;h._infolayer.selectAll("."+S+'[data-index="'+M+'"]').remove();var O="clip"+h._uid+"_ann"+M;if(!u._input||u.visible===!1){y.selectAll("#"+O).remove();return}var z={x:{},y:{}},G=+u.textangle||0,Y=h._infolayer.append("g").classed(S,!0).attr("data-index",String(M)).style("opacity",u.opacity),ee=Y.append("g").classed("annotation-text-g",!0),j=E[u.showarrow?"annotationTail":"annotationPosition"],X=u.captureevents||E.annotationText||j;function ae(le){var _e={index:M,annotation:u._input,fullAnnotation:u,event:le};return w&&(_e.subplotId=w),_e}var he=ee.append("g").style("pointer-events",X?"all":null).call(s,"pointer").on("click",function(){x._dragging=!1,x.emit("plotly_clickannotation",ae(y.event))});u.hovertext&&he.on("mouseover",function(){var le=u.hoverlabel,_e=le.font,fe=this.getBoundingClientRect(),ye=x.getBoundingClientRect();r.loneHover({x0:fe.left-ye.left,x1:fe.right-ye.left,y:(fe.top+fe.bottom)/2-ye.top,text:u.hovertext,color:le.bgcolor,borderColor:le.bordercolor,fontFamily:_e.family,fontSize:_e.size,fontColor:_e.color},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:x})}).on("mouseout",function(){r.loneUnhover(h._hoverlayer.node())});var K=u.borderwidth,J=u.borderpad,U=K+J,H=he.append("rect").attr("class","bg").style("stroke-width",K+"px").call(i.stroke,u.bordercolor).call(i.fill,u.bgcolor),q=u.width||u.height,re=h._topclips.selectAll("#"+O).data(q?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),re.exit().remove();var Z=u.font,Q=h._meta?T.templateString(u.text,h._meta):u.text,ie=he.append("text").classed("annotation-text",!0).text(Q);function oe(le){return le.call(n.font,Z).attr({"text-anchor":{left:"start",right:"end"}[u.align]||"middle"}),v.convertToTspans(le,x,ne),le}function ne(){var le=ie.selectAll("a");if(le.size()===1&&le.text()===ie.text()){var _e=he.insert("a",":first-child").attr({"xlink:xlink:href":le.attr("xlink:href"),"xlink:xlink:show":le.attr("xlink:show")}).style({cursor:"pointer"});_e.node().appendChild(H.node())}var fe=he.select(".annotation-text-math-group"),ye=!fe.empty(),xe=n.bBox((ye?fe:ie).node()),me=xe.width,be=xe.height,ke=u.width||me,De=u.height||be,He=Math.round(ke+2*U),Ae=Math.round(De+2*U);function Le(rr,$t){return $t==="auto"&&(rr<1/3?$t="left":rr>2/3?$t="right":$t="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[$t]}for(var Ze=!1,We=["x","y"],ze=0;ze<We.length;ze++){var Ie=We[ze],Ve=u[Ie+"ref"]||Ie,dt=u["a"+Ie+"ref"],Ft={x:p,y:_}[Ie],Qt=(G+(Ie==="x"?0:-90))*Math.PI/180,Ot=He*Math.cos(Qt),Ct=Ae*Math.sin(Qt),jt=Math.abs(Ot)+Math.abs(Ct),Nt=u[Ie+"anchor"],Lt=u[Ie+"shift"]*(Ie==="x"?1:-1),Xe=z[Ie],it,Ye,Ee,Ge,Ke,qe=a.getRefType(Ve);if(Ft&&qe!=="domain"){var At=Ft.r2fraction(u[Ie]);(At<0||At>1)&&(dt===Ve?(At=Ft.r2fraction(u["a"+Ie]),(At<0||At>1)&&(Ze=!0)):Ze=!0),it=Ft._offset+Ft.r2p(u[Ie]),Ge=.5}else{var mt=qe==="domain";Ie==="x"?(Ee=u[Ie],it=mt?Ft._offset+Ft._length*Ee:it=L.l+L.w*Ee):(Ee=1-u[Ie],it=mt?Ft._offset+Ft._length*Ee:it=L.t+L.h*Ee),Ge=u.showarrow?.5:Ee}if(u.showarrow){Xe.head=it;var Mt=u["a"+Ie];if(Ke=Ot*Le(.5,u.xanchor)-Ct*Le(.5,u.yanchor),dt===Ve){var Gt=a.getRefType(dt);Gt==="domain"?(Ie==="y"&&(Mt=1-Mt),Xe.tail=Ft._offset+Ft._length*Mt):Gt==="paper"?Ie==="y"?(Mt=1-Mt,Xe.tail=L.t+L.h*Mt):Xe.tail=L.l+L.w*Mt:Xe.tail=Ft._offset+Ft.r2p(Mt),Ye=Ke}else Xe.tail=it+Mt,Ye=Ke+Mt;Xe.text=Xe.tail+Ke;var zt=h[Ie==="x"?"width":"height"];if(Ve==="paper"&&(Xe.head=T.constrain(Xe.head,1,zt-1)),dt==="pixel"){var Ht=-Math.max(Xe.tail-3,Xe.text),Zt=Math.min(Xe.tail+3,Xe.text)-zt;Ht>0?(Xe.tail+=Ht,Xe.text+=Ht):Zt>0&&(Xe.tail-=Zt,Xe.text-=Zt)}Xe.tail+=Lt,Xe.head+=Lt}else Ke=jt*Le(Ge,Nt),Ye=Ke,Xe.text=it+Ke;Xe.text+=Lt,Ke+=Lt,Ye+=Lt,u["_"+Ie+"padplus"]=jt/2+Ye,u["_"+Ie+"padminus"]=jt/2-Ye,u["_"+Ie+"size"]=jt,u["_"+Ie+"shift"]=Ke}if(Ze){he.remove();return}var Wt=0,sr=0;if(u.align!=="left"&&(Wt=(ke-me)*(u.align==="center"?.5:1)),u.valign!=="top"&&(sr=(De-be)*(u.valign==="middle"?.5:1)),ye)fe.select("svg").attr({x:U+Wt-1,y:U+sr}).call(n.setClipUrl,q?O:null,x);else{var Gr=U+sr-xe.top,cn=U+Wt-xe.left;ie.call(v.positionText,cn,Gr).call(n.setClipUrl,q?O:null,x)}re.select("rect").call(n.setRect,U,U,ke,De),H.call(n.setRect,K/2,K/2,He-K,Ae-K),he.call(n.setTranslate,Math.round(z.x.text-He/2),Math.round(z.y.text-Ae/2)),ee.attr({transform:"rotate("+G+","+z.x.text+","+z.y.text+")"});var qr=function(rr,$t){Y.selectAll(".annotation-arrow-g").remove();var hr=z.x.head,Sr=z.y.head,tt=z.x.tail+rr,Qe=z.y.tail+$t,lt=z.x.text+rr,ft=z.y.text+$t,Et=T.rotationXYMatrix(G,lt,ft),Vt=T.apply2DTransform(Et),Pe=T.apply2DTransform2(Et),Se=+H.attr("width"),ot=+H.attr("height"),ct=lt-.5*Se,pt=ct+Se,St=ft-.5*ot,xt=St+ot,Pt=[[ct,St,ct,xt],[ct,xt,pt,xt],[pt,xt,pt,St],[pt,St,ct,St]].map(Pe);if(!Pt.reduce(function(at,Rt){return at^!!T.segmentsIntersect(hr,Sr,hr+1e6,Sr+1e6,Rt[0],Rt[1],Rt[2],Rt[3])},!1)){Pt.forEach(function(at){var Rt=T.segmentsIntersect(tt,Qe,hr,Sr,at[0],at[1],at[2],at[3]);Rt&&(tt=Rt.x,Qe=Rt.y)});var Xt=u.arrowwidth,or=u.arrowcolor,Pr=u.arrowside,Ar=Y.append("g").style({opacity:i.opacity(or)}).classed("annotation-arrow-g",!0),Er=Ar.append("path").attr("d","M"+tt+","+Qe+"L"+hr+","+Sr).style("stroke-width",Xt+"px").call(i.stroke,i.rgb(or));if(g(Er,Pr,u),E.annotationPosition&&Er.node().parentNode&&!w){var Jr=hr,lr=Sr;if(u.standoff){var br=Math.sqrt(Math.pow(hr-tt,2)+Math.pow(Sr-Qe,2));Jr+=u.standoff*(tt-hr)/br,lr+=u.standoff*(Qe-Sr)/br}var Fr=Ar.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(tt-Jr)+","+(Qe-lr),transform:e(Jr,lr)}).style("stroke-width",Xt+6+"px").call(i.stroke,"rgba(0,0,0,0)").call(i.fill,"rgba(0,0,0,0)"),Hr,Lr;o.init({element:Fr.node(),gd:x,prepFn:function(){var at=n.getTranslate(he);Hr=at.x,Lr=at.y,p&&p.autorange&&I(p._name+".autorange",!0),_&&_.autorange&&I(_._name+".autorange",!0)},moveFn:function(at,Rt){var Kt=Vt(Hr,Lr),ur=Kt[0]+at,Nr=Kt[1]+Rt;he.call(n.setTranslate,ur,Nr),D("x",m(p,at,"x",L,u)),D("y",m(_,Rt,"y",L,u)),u.axref===u.xref&&D("ax",m(p,at,"ax",L,u)),u.ayref===u.yref&&D("ay",m(_,Rt,"ay",L,u)),Ar.attr("transform",e(at,Rt)),ee.attr({transform:"rotate("+G+","+ur+","+Nr+")"})},doneFn:function(){c.call("_guiRelayout",x,R());var at=document.querySelector(".js-notes-box-panel");at&&at.redraw(at.selectedObj)}})}}};if(u.showarrow&&qr(0,0),j){var st;o.init({element:he.node(),gd:x,prepFn:function(){st=ee.attr("transform")},moveFn:function(rr,$t){var hr="pointer";if(u.showarrow)u.axref===u.xref?D("ax",m(p,rr,"ax",L,u)):D("ax",u.ax+rr),u.ayref===u.yref?D("ay",m(_,$t,"ay",L.w,u)):D("ay",u.ay+$t),qr(rr,$t);else{if(w)return;var Sr,tt;if(p)Sr=m(p,rr,"x",L,u);else{var Qe=u._xsize/L.w,lt=u.x+(u._xshift-u.xshift)/L.w-Qe/2;Sr=o.align(lt+rr/L.w,Qe,0,1,u.xanchor)}if(_)tt=m(_,$t,"y",L,u);else{var ft=u._ysize/L.h,Et=u.y-(u._yshift+u.yshift)/L.h-ft/2;tt=o.align(Et-$t/L.h,ft,0,1,u.yanchor)}D("x",Sr),D("y",tt),(!p||!_)&&(hr=o.getCursor(p?.5:Sr,_?.5:tt,u.xanchor,u.yanchor))}ee.attr({transform:e(rr,$t)+st}),s(he,hr)},clickFn:function(rr,$t){u.captureevents&&x.emit("plotly_clickannotation",ae($t))},doneFn:function(){s(he),c.call("_guiRelayout",x,R());var rr=document.querySelector(".js-notes-box-panel");rr&&rr.redraw(rr.selectedObj)}})}}E.annotationText?ie.call(v.makeEditable,{delegate:he,gd:x}).call(oe).on("edit",function(le){u.text=le,this.call(oe),D("text",le),p&&p.autorange&&I(p._name+".autorange",!0),_&&_.autorange&&I(_._name+".autorange",!0),c.call("_guiRelayout",x,R())}):ie.call(oe)}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(t,N,V){var y=t("@plotly/d3"),c=t("../color"),A=t("./arrow_paths"),T=t("../../lib"),e=T.strScale,a=T.strRotate,i=T.strTranslate;N.exports=function(r,v,s){var o=r.node(),b=A[s.arrowhead||0],g=A[s.startarrowhead||0],d=(s.arrowwidth||1)*(s.arrowsize||1),f=(s.arrowwidth||1)*(s.startarrowsize||1),m=v.indexOf("start")>=0,l=v.indexOf("end")>=0,x=b.backoff*d+s.standoff,u=g.backoff*f+s.startstandoff,M,w,p,_;if(o.nodeName==="line"){M={x:+r.attr("x1"),y:+r.attr("y1")},w={x:+r.attr("x2"),y:+r.attr("y2")};var h=M.x-w.x,L=M.y-w.y;if(p=Math.atan2(L,h),_=p+Math.PI,x&&u&&x+u>Math.sqrt(h*h+L*L)){ee();return}if(x){if(x*x>h*h+L*L){ee();return}var E=x*Math.cos(p),S=x*Math.sin(p);w.x+=E,w.y+=S,r.attr({x2:w.x,y2:w.y})}if(u){if(u*u>h*h+L*L){ee();return}var P=u*Math.cos(p),F=u*Math.sin(p);M.x-=P,M.y-=F,r.attr({x1:M.x,y1:M.y})}}else if(o.nodeName==="path"){var I=o.getTotalLength(),D="";if(I<x+u){ee();return}var R=o.getPointAtLength(0),O=o.getPointAtLength(.1);p=Math.atan2(R.y-O.y,R.x-O.x),M=o.getPointAtLength(Math.min(u,I)),D="0px,"+u+"px,";var z=o.getPointAtLength(I),G=o.getPointAtLength(I-.1);_=Math.atan2(z.y-G.y,z.x-G.x),w=o.getPointAtLength(Math.max(0,I-x));var Y=D?u+x:x;D+=I-Y+"px,"+I+"px",r.style("stroke-dasharray",D)}function ee(){r.style("stroke-dasharray","0px,100px")}function j(X,ae,he,K){!X.path||(X.noRotate&&(he=0),y.select(o.parentNode).append("path").attr({class:r.attr("class"),d:X.path,transform:i(ae.x,ae.y)+a(he*180/Math.PI)+e(K)}).style({fill:c.rgb(s.arrowcolor),"stroke-width":0}))}m&&j(g,M,p,f),l&&j(b,w,_,d)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(t,N,V){var y=t("./draw"),c=t("./click");N.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:y.draw,drawOne:y.drawOne,drawRaw:y.drawRaw,hasClickToShow:c.hasClickToShow,onClick:c.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(t,N,V){var y=t("../annotations/attributes"),c=t("../../plot_api/edit_types").overrideAll,A=t("../../plot_api/plot_template").templatedArray;N.exports=c(A("annotation",{visible:y.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:y.xanchor,xshift:y.xshift,yanchor:y.yanchor,yshift:y.yshift,text:y.text,textangle:y.textangle,font:y.font,width:y.width,height:y.height,opacity:y.opacity,align:y.align,valign:y.valign,bgcolor:y.bgcolor,bordercolor:y.bordercolor,borderpad:y.borderpad,borderwidth:y.borderwidth,showarrow:y.showarrow,arrowcolor:y.arrowcolor,arrowhead:y.arrowhead,startarrowhead:y.startarrowhead,arrowside:y.arrowside,arrowsize:y.arrowsize,startarrowsize:y.startarrowsize,arrowwidth:y.arrowwidth,standoff:y.standoff,startstandoff:y.startstandoff,hovertext:y.hovertext,hoverlabel:y.hoverlabel,captureevents:y.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes");N.exports=function(e){for(var a=e.fullSceneLayout,i=a.annotations,n=0;n<i.length;n++)A(i[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function A(T,e){var a=e.fullSceneLayout,i=a.domain,n=e.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},y.extendFlat(T._xa,r),c.setConvert(T._xa),T._xa._offset=n.l+i.x[0]*n.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*n.w*(i.x[1]-i.x[0])},T._ya={},y.extendFlat(T._ya,r),c.setConvert(T._ya),T._ya._offset=n.t+(1-i.y[1])*n.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*n.h*(i.y[1]-i.y[0])}}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("../annotations/common_defaults"),e=t("./attributes");N.exports=function(n,r,v){A(n,r,{name:"annotations",handleItemDefaults:a,fullLayout:v.fullLayout})};function a(i,n,r,v){function s(g,d){return y.coerce(i,n,e,g,d)}function o(g){var d=g+"axis",f={_fullLayout:{}};return f._fullLayout[d]=r[d],c.coercePosition(n,f,s,g,g,.5)}var b=s("visible");!b||(T(i,n,v.fullLayout,s),o("x"),o("y"),o("z"),y.noneOrAll(i,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",s("ax",-10),s("ay",-30),y.noneOrAll(i,n,["ax","ay"])))}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(t,N,V){var y=t("../annotations/draw").drawRaw,c=t("../../plots/gl3d/project"),A=["x","y","z"];N.exports=function(e){for(var a=e.fullSceneLayout,i=e.dataScale,n=a.annotations,r=0;r<n.length;r++){for(var v=n[r],s=!1,o=0;o<3;o++){var b=A[o],g=v[b],d=a[b+"axis"],f=d.r2fraction(g);if(f<0||f>1){s=!0;break}}s?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+r+'"]').remove():(v._pdata=c(e.glplot.cameraParams,[a.xaxis.r2l(v.x)*i[0],a.yaxis.r2l(v.y)*i[1],a.zaxis.r2l(v.z)*i[2]]),y(e.graphDiv,v,r,e.id,v._xa,v._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(t,N,V){var y=t("../../registry"),c=t("../../lib");N.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:A,convert:t("./convert"),draw:t("./draw")};function A(T,e){var a=y.subplotsRegistry.gl3d;if(!!a)for(var i=a.attrRegex,n=Object.keys(T),r=0;r<n.length;r++){var v=n[r];i.test(v)&&(T[v].annotations||[]).length&&(c.pushUnique(e._basePlotModules,a),c.pushUnique(e._subplots.gl3d,v))}}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(t,N,V){N.exports=t("world-calendars/dist/main"),t("world-calendars/dist/plus"),t("world-calendars/dist/calendars/chinese"),t("world-calendars/dist/calendars/coptic"),t("world-calendars/dist/calendars/discworld"),t("world-calendars/dist/calendars/ethiopian"),t("world-calendars/dist/calendars/hebrew"),t("world-calendars/dist/calendars/islamic"),t("world-calendars/dist/calendars/julian"),t("world-calendars/dist/calendars/mayan"),t("world-calendars/dist/calendars/nanakshahi"),t("world-calendars/dist/calendars/nepali"),t("world-calendars/dist/calendars/persian"),t("world-calendars/dist/calendars/taiwan"),t("world-calendars/dist/calendars/thai"),t("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(t,N,V){var y=t("./calendars"),c=t("../../lib"),A=t("../../constants/numerical"),T=A.EPOCHJD,e=A.ONEDAY,a={valType:"enumerated",values:c.sortObjectKeys(y.calendars),editType:"calc",dflt:"gregorian"},i=function(p,_,h,L){var E={};return E[h]=a,c.coerce(p,_,E,h,L)},n=function(p,_,h,L){for(var E=0;E<h.length;E++)i(p,_,h[E]+"calendar",L.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},v={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},o="##",b={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:o,w:o,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function g(p,_,h){for(var L=Math.floor((_+.05)/e)+T,E=f(h).fromJD(L),S=0,P,F,I,D,R;(S=p.indexOf("%",S))!==-1;)P=p.charAt(S+1),P==="0"||P==="-"||P==="_"?(I=3,F=p.charAt(S+2),P==="_"&&(P="-")):(F=P,P="0",I=2),D=b[F],D?(D===o?R=o:R=E.formatDate(D[P]),p=p.substr(0,S)+R+p.substr(S+I),S+=R.length):S+=I;return p}var d={};function f(p){var _=d[p];return _||(_=d[p]=y.instance(p),_)}function m(p){return c.extendFlat({},a,{description:p})}function l(p){return"Sets the calendar system to use with `"+p+"` date data."}var x={xcalendar:m(l("x"))},u=c.extendFlat({},x,{ycalendar:m(l("y"))}),M=c.extendFlat({},u,{zcalendar:m(l("z"))}),w=m(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));N.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:u,bar:u,box:u,heatmap:u,contour:u,histogram:u,histogram2d:u,histogram2dcontour:u,scatter3d:M,surface:M,mesh3d:M,scattergl:u,ohlc:x,candlestick:x},layout:{calendar:m(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:w},yaxis:{calendar:w},scene:{xaxis:{calendar:w},yaxis:{calendar:w},zaxis:{calendar:w}},polar:{radialaxis:{calendar:w}}},transforms:{filter:{valuecalendar:m(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:m(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:i,handleTraceDefaults:n,CANONICAL_SUNDAY:v,CANONICAL_TICK:r,DFLTRANGE:s,getCal:f,worldCalFmt:g}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(t,N,V){V.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],V.defaultLine="#444",V.lightLine="#eee",V.background="#fff",V.borderLine="#BEC8D9",V.lightFraction=100*(14-4)/(15-4)},{}],367:[function(t,N,V){var y=t("tinycolor2"),c=t("fast-isnumeric"),A=t("../../lib/array").isTypedArray,T=N.exports={},e=t("./attributes");T.defaults=e.defaults;var a=T.defaultLine=e.defaultLine;T.lightLine=e.lightLine;var i=T.background=e.background;T.tinyRGB=function(r){var v=r.toRgb();return"rgb("+Math.round(v.r)+", "+Math.round(v.g)+", "+Math.round(v.b)+")"},T.rgb=function(r){return T.tinyRGB(y(r))},T.opacity=function(r){return r?y(r).getAlpha():0},T.addOpacity=function(r,v){var s=y(r).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+v+")"},T.combine=function(r,v){var s=y(r).toRgb();if(s.a===1)return y(r).toRgbString();var o=y(v||i).toRgb(),b=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},g={r:b.r*(1-s.a)+s.r*s.a,g:b.g*(1-s.a)+s.g*s.a,b:b.b*(1-s.a)+s.b*s.a};return y(g).toRgbString()},T.contrast=function(r,v,s){var o=y(r);o.getAlpha()!==1&&(o=y(T.combine(r,i)));var b=o.isDark()?v?o.lighten(v):i:s?o.darken(s):a;return b.toString()},T.stroke=function(r,v){var s=y(v);r.style({stroke:T.tinyRGB(s),"stroke-opacity":s.getAlpha()})},T.fill=function(r,v){var s=y(v);r.style({fill:T.tinyRGB(s),"fill-opacity":s.getAlpha()})},T.clean=function(r){if(!(!r||typeof r!="object")){var v=Object.keys(r),s,o,b,g;for(s=0;s<v.length;s++)if(b=v[s],g=r[b],b.substr(b.length-5)==="color")if(Array.isArray(g))for(o=0;o<g.length;o++)g[o]=n(g[o]);else r[b]=n(g);else if(b.substr(b.length-10)==="colorscale"&&Array.isArray(g))for(o=0;o<g.length;o++)Array.isArray(g[o])&&(g[o][1]=n(g[o][1]));else if(Array.isArray(g)){var d=g[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(o=0;o<g.length;o++)T.clean(g[o])}else g&&typeof g=="object"&&!A(g)&&T.clean(g)}};function n(r){if(c(r)||typeof r!="string")return r;var v=r.trim();if(v.substr(0,3)!=="rgb")return r;var s=v.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return r;var o=s[1].trim().split(/\s*[\s,]\s*/),b=v.charAt(3)==="a"&&o.length===4;if(!b&&o.length!==3)return r;for(var g=0;g<o.length;g++){if(!o[g].length||(o[g]=Number(o[g]),!(o[g]>=0)))return r;if(g===3)o[g]>1&&(o[g]=1);else if(o[g]>=1)return r}var d=Math.round(o[0]*255)+", "+Math.round(o[1]*255)+", "+Math.round(o[2]*255);return b?"rgba("+d+", "+o[3]+")":"rgb("+d+")"}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(t,N,V){var y=t("../../plots/cartesian/layout_attributes"),c=t("../../plots/font_attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll;N.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:y.linecolor,outlinewidth:y.linewidth,bordercolor:y.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:y.tickmode,nticks:y.nticks,tick0:y.tick0,dtick:y.dtick,tickvals:y.tickvals,ticktext:y.ticktext,ticks:A({},y.ticks,{dflt:""}),ticklabeloverflow:A({},y.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:y.ticklen,tickwidth:y.tickwidth,tickcolor:y.tickcolor,ticklabelstep:y.ticklabelstep,showticklabels:y.showticklabels,tickfont:c({}),tickangle:y.tickangle,tickformat:y.tickformat,tickformatstops:y.tickformatstops,tickprefix:y.tickprefix,showtickprefix:y.showtickprefix,ticksuffix:y.ticksuffix,showticksuffix:y.showticksuffix,separatethousands:y.separatethousands,exponentformat:y.exponentformat,minexponent:y.minexponent,showexponent:y.showexponent,title:{text:{valType:"string"},font:c({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:c({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(t,N,V){N.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(t,N,V){var y=t("../../lib"),c=t("../../plot_api/plot_template"),A=t("../../plots/cartesian/tick_value_defaults"),T=t("../../plots/cartesian/tick_mark_defaults"),e=t("../../plots/cartesian/tick_label_defaults"),a=t("../../plots/cartesian/prefix_suffix_defaults"),i=t("./attributes");N.exports=function(r,v,s){var o=c.newContainer(v,"colorbar"),b=r.colorbar||{};function g(E,S){return y.coerce(b,o,i,E,S)}var d=s.margin||{t:0,b:0,l:0,r:0},f=s.width-d.l-d.r,m=s.height-d.t-d.b,l=g("orientation"),x=l==="v",u=g("thicknessmode");g("thickness",u==="fraction"?30/(x?f:m):30);var M=g("lenmode");g("len",M==="fraction"?1:x?m:f),g("x",x?1.02:.5),g("xanchor",x?"left":"center"),g("xpad"),g("y",x?.5:1.02),g("yanchor",x?"middle":"bottom"),g("ypad"),y.noneOrAll(b,o,["x","y"]),g("outlinecolor"),g("outlinewidth"),g("bordercolor"),g("borderwidth"),g("bgcolor");var w=y.coerce(b,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");g("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),A(b,o,g,"linear");var p=s.font,_={outerTicks:!1,font:p};w.indexOf("inside")!==-1&&(_.bgColor="black"),a(b,o,g,"linear",_),e(b,o,g,"linear",_),T(b,o,g,"linear",_),g("title.text",s._dfltTitle.colorbar);var h=o.tickfont,L=y.extendFlat({},h,{color:p.color,size:y.bigFont(h.size)});y.coerceFont(g,"title.font",L),g("title.side",x?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(t,N,V){var y=t("@plotly/d3"),c=t("tinycolor2"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../plots/cartesian/axes"),a=t("../dragelement"),i=t("../../lib"),n=i.strTranslate,r=t("../../lib/extend").extendFlat,v=t("../../lib/setcursor"),s=t("../drawing"),o=t("../color"),b=t("../titles"),g=t("../../lib/svg_text_utils"),d=t("../colorscale/helpers").flipScale,f=t("../../plots/cartesian/axis_defaults"),m=t("../../plots/cartesian/position_defaults"),l=t("../../plots/cartesian/layout_attributes"),x=t("../../constants/alignment"),u=x.LINE_SPACING,M=x.FROM_TL,w=x.FROM_BR,p=t("./constants").cn;function _(F){var I=F._fullLayout,D=I._infolayer.selectAll("g."+p.colorbar).data(h(F),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(p.colorbar,!0),D.each(function(R){var O=y.select(this);i.ensureSingle(O,"rect",p.cbbg),i.ensureSingle(O,"g",p.cbfills),i.ensureSingle(O,"g",p.cblines),i.ensureSingle(O,"g",p.cbaxis,function(G){G.classed(p.crisp,!0)}),i.ensureSingle(O,"g",p.cbtitleunshift,function(G){G.append("g").classed(p.cbtitle,!0)}),i.ensureSingle(O,"rect",p.cboutline);var z=L(O,R,F);z&&z.then&&(F._promises||[]).push(z),F._context.edits.colorbarPosition&&E(O,R,F)}),D.exit().each(function(R){A.autoMargin(F,R._id)}).remove(),D.order()}function h(F){var I=F._fullLayout,D=F.calcdata,R=[],O,z,G,Y;function ee(Z){return r(Z,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function j(){typeof Y.calc=="function"?Y.calc(F,G,O):(O._fillgradient=z.reversescale?d(z.colorscale):z.colorscale,O._zrange=[z[Y.min],z[Y.max]])}for(var X=0;X<D.length;X++){var ae=D[X];G=ae[0].trace;var he=G._module.colorbar;if(G.visible===!0&&he)for(var K=Array.isArray(he),J=K?he:[he],U=0;U<J.length;U++){Y=J[U];var H=Y.container;z=H?G[H]:G,z&&z.showscale&&(O=ee(z.colorbar),O._id="cb"+G.uid+(K&&H?"-"+H:""),O._traceIndex=G.index,O._propPrefix=(H?H+".":"")+"colorbar.",O._meta=G._meta,j(),R.push(O))}}for(var q in I._colorAxes)if(z=I[q],z.showscale){var re=I._colorAxes[q];O=ee(z.colorbar),O._id="cb"+q,O._propPrefix=q+".colorbar.",O._meta=I._meta,Y={min:"cmin",max:"cmax"},re[0]!=="heatmap"&&(G=re[1],Y.calc=G._module.colorbar.calc),j(),R.push(O)}return R}function L(F,I,D){var R=I.orientation==="v",O=I.len,z=I.lenmode,G=I.thickness,Y=I.thicknessmode,ee=I.outlinewidth,j=I.borderwidth,X=I.bgcolor,ae=I.xanchor,he=I.yanchor,K=I.xpad,J=I.ypad,U=I.x,H=R?I.y:1-I.y,q=D._fullLayout,re=q._size,Z=I._fillcolor,Q=I._line,ie=I.title,oe=ie.side,ne=I._zrange||y.extent((typeof Z=="function"?Z:Q.color).domain()),le=typeof Q.color=="function"?Q.color:function(){return Q.color},_e=typeof Z=="function"?Z:function(){return Z},fe=I._levels,ye=S(D,I,ne),xe=ye.fill,me=ye.line,be=Math.round(G*(Y==="fraction"?R?re.w:re.h:1)),ke=be/(R?re.w:re.h),De=Math.round(O*(z==="fraction"?R?re.h:re.w:1)),He=De/(R?re.h:re.w),Ae=Math.round(R?U*re.w+K:H*re.h+J),Le={center:.5,right:1}[ae]||0,Ze={top:1,middle:.5}[he]||0,We=R?U-Le*ke:H-Ze*ke,ze=R?H-Ze*He:U-Le*He,Ie=Math.round(R?re.h*(1-ze):re.w*ze);I._lenFrac=He,I._thickFrac=ke,I._uFrac=We,I._vFrac=ze;var Ve=I._axis=P(D,I,ne);Ve.position=ke+(R?U+K/re.w:H+J/re.h);var dt=["top","bottom"].indexOf(oe)!==-1;if(R&&dt&&(Ve.title.side=oe,Ve.titlex=U+K/re.w,Ve.titley=ze+(ie.side==="top"?He-J/re.h:J/re.h)),!R&&!dt&&(Ve.title.side=oe,Ve.titley=H+J/re.h,Ve.titlex=ze+K/re.w),Q.color&&I.tickmode==="auto"){Ve.tickmode="linear",Ve.tick0=fe.start;var Ft=fe.size,Qt=i.constrain(De/50,4,15)+1,Ot=(ne[1]-ne[0])/((I.nticks||Qt)*Ft);if(Ot>1){var Ct=Math.pow(10,Math.floor(Math.log(Ot)/Math.LN10));Ft*=Ct*i.roundUp(Ot/Ct,[2,5,10]),(Math.abs(fe.start)/fe.size+1e-6)%1<2e-6&&(Ve.tick0=0)}Ve.dtick=Ft}Ve.domain=R?[ze+J/re.h,ze+He-J/re.h]:[ze+K/re.w,ze+He-K/re.w],Ve.setScale(),F.attr("transform",n(Math.round(re.l),Math.round(re.t)));var jt=F.select("."+p.cbtitleunshift).attr("transform",n(-Math.round(re.l),-Math.round(re.t))),Nt=Ve.ticklabelposition,Lt=Ve.title.font.size,Xe=F.select("."+p.cbaxis),it,Ye=0,Ee=0;function Ge(Mt,Gt){var zt={propContainer:Ve,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:q._dfltTitle.colorbar,containerGroup:F.select("."+p.cbtitle)},Ht=Mt.charAt(0)==="h"?Mt.substr(1):"h"+Mt;F.selectAll("."+Ht+",."+Ht+"-math-group").remove(),b.draw(D,Mt,r(zt,Gt||{}))}function Ke(){if(R&&dt||!R&&!dt){var Mt,Gt;oe==="top"&&(Mt=K+re.l+re.w*U,Gt=J+re.t+re.h*(1-ze-He)+3+Lt*.75),oe==="bottom"&&(Mt=K+re.l+re.w*U,Gt=J+re.t+re.h*(1-ze)-3-Lt*.25),oe==="right"&&(Gt=J+re.t+re.h*H+3+Lt*.75,Mt=K+re.l+re.w*ze),Ge(Ve._id+"title",{attributes:{x:Mt,y:Gt,"text-anchor":R?"start":"middle"}})}}function qe(){if(R&&!dt||!R&&dt){var Mt=Ve.position||0,Gt=Ve._offset+Ve._length/2,zt,Ht;if(oe==="right")Ht=Gt,zt=re.l+re.w*Mt+10+Lt*(Ve.showticklabels?1:.5);else if(zt=Gt,oe==="bottom"&&(Ht=re.t+re.h*Mt+10+(Nt.indexOf("inside")===-1?Ve.tickfont.size:0)+(Ve.ticks!=="intside"&&I.ticklen||0)),oe==="top"){var Zt=ie.text.split("<br>").length;Ht=re.t+re.h*Mt+10-be-u*Lt*Zt}Ge((R?"h":"v")+Ve._id+"title",{avoid:{selection:y.select(D).selectAll("g."+Ve._id+"tick"),side:oe,offsetTop:R?0:re.t,offsetLeft:R?re.l:0,maxShift:R?q.width:q.height},attributes:{x:zt,y:Ht,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function At(){if(!R&&!dt||R&&dt){var Mt=F.select("."+p.cbtitle),Gt=Mt.select("text"),zt=[-ee/2,ee/2],Ht=Mt.select(".h"+Ve._id+"title-math-group").node(),Zt=15.6;Gt.node()&&(Zt=parseInt(Gt.node().style.fontSize,10)*u);var Wt;if(Ht?(Wt=s.bBox(Ht),Ee=Wt.width,Ye=Wt.height,Ye>Zt&&(zt[1]-=(Ye-Zt)/2)):Gt.node()&&!Gt.classed(p.jsPlaceholder)&&(Wt=s.bBox(Gt.node()),Ee=Wt.width,Ye=Wt.height),R){if(Ye){if(Ye+=5,oe==="top")Ve.domain[1]-=Ye/re.h,zt[1]*=-1;else{Ve.domain[0]+=Ye/re.h;var sr=g.lineCount(Gt);zt[1]+=(1-sr)*Zt}Mt.attr("transform",n(zt[0],zt[1])),Ve.setScale()}}else Ee&&(oe==="right"&&(Ve.domain[0]+=(Ee+Lt/2)/re.w),Mt.attr("transform",n(zt[0],zt[1])),Ve.setScale())}F.selectAll("."+p.cbfills+",."+p.cblines).attr("transform",R?n(0,Math.round(re.h*(1-Ve.domain[1]))):n(Math.round(re.w*Ve.domain[0]),0)),Xe.attr("transform",R?n(0,Math.round(-re.t)):n(Math.round(-re.l),0));var Gr=F.select("."+p.cbfills).selectAll("rect."+p.cbfill).attr("style","").data(xe);Gr.enter().append("rect").classed(p.cbfill,!0).style("stroke","none"),Gr.exit().remove();var cn=ne.map(Ve.c2p).map(Math.round).sort(function(hr,Sr){return hr-Sr});Gr.each(function(hr,Sr){var tt=[Sr===0?ne[0]:(xe[Sr]+xe[Sr-1])/2,Sr===xe.length-1?ne[1]:(xe[Sr]+xe[Sr+1])/2].map(Ve.c2p).map(Math.round);R&&(tt[1]=i.constrain(tt[1]+(tt[1]>tt[0])?1:-1,cn[0],cn[1]));var Qe=y.select(this).attr(R?"x":"y",Ae).attr(R?"y":"x",y.min(tt)).attr(R?"width":"height",Math.max(be,2)).attr(R?"height":"width",Math.max(y.max(tt)-y.min(tt),2));if(I._fillgradient)s.gradient(Qe,D,I._id,R?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var lt=_e(hr).replace("e-","");Qe.attr("fill",c(lt).toHexString())}});var qr=F.select("."+p.cblines).selectAll("path."+p.cbline).data(Q.color&&Q.width?me:[]);qr.enter().append("path").classed(p.cbline,!0),qr.exit().remove(),qr.each(function(hr){var Sr=Ae,tt=Math.round(Ve.c2p(hr))+Q.width/2%1;y.select(this).attr("d","M"+(R?Sr+","+tt:tt+","+Sr)+(R?"h":"v")+be).call(s.lineGroupStyle,Q.width,le(hr),Q.dash)}),Xe.selectAll("g."+Ve._id+"tick,path").remove();var st=Ae+be+(ee||0)/2-(I.ticks==="outside"?1:0),rr=e.calcTicks(Ve),$t=e.getTickSigns(Ve)[2];return e.drawTicks(D,Ve,{vals:Ve.ticks==="inside"?e.clipEnds(Ve,rr):rr,layer:Xe,path:e.makeTickPath(Ve,st,$t),transFn:e.makeTransTickFn(Ve)}),e.drawLabels(D,Ve,{vals:rr,layer:Xe,transFn:e.makeTransTickLabelFn(Ve),labelFns:e.makeLabelFns(Ve,st)})}function mt(){var Mt,Gt=be+ee/2;Nt.indexOf("inside")===-1&&(Mt=s.bBox(Xe.node()),Gt+=R?Mt.width:Mt.height),it=jt.select("text");var zt=0,Ht=R&&oe==="top",Zt=!R&&oe==="right",Wt=0;if(it.node()&&!it.classed(p.jsPlaceholder)){var sr,Gr=jt.select(".h"+Ve._id+"title-math-group").node();Gr&&(R&&dt||!R&&!dt)?(Mt=s.bBox(Gr),zt=Mt.width,sr=Mt.height):(Mt=s.bBox(jt.node()),zt=Mt.right-re.l-(R?Ae:Ie),sr=Mt.bottom-re.t-(R?Ie:Ae),!R&&oe==="top"&&(Gt+=Mt.height,Wt=Mt.height)),Zt&&(it.attr("transform",n(zt/2+Lt/2,0)),zt*=2),Gt=Math.max(Gt,R?zt:sr)}var cn=(R?K:J)*2+Gt+j+ee/2,qr=0;!R&&ie.text&&he==="bottom"&&H<=0&&(qr=cn/2,cn+=qr,Wt+=qr),q._hColorbarMoveTitle=qr,q._hColorbarMoveCBTitle=Wt;var st=j+ee;F.select("."+p.cbbg).attr("x",(R?Ae:Ie)-st/2-(R?K:0)).attr("y",(R?Ie:Ae)-(R?De:J+Wt-qr)).attr(R?"width":"height",Math.max(cn-qr,2)).attr(R?"height":"width",Math.max(De+st,2)).call(o.fill,X).call(o.stroke,I.bordercolor).style("stroke-width",j);var rr=Zt?Math.max(zt-10,0):0;if(F.selectAll("."+p.cboutline).attr("x",(R?Ae:Ie+K)+rr).attr("y",(R?Ie+J-De:Ae)+(Ht?Ye:0)).attr(R?"width":"height",Math.max(be,2)).attr(R?"height":"width",Math.max(De-(R?2*J+Ye:2*K+rr),2)).call(o.stroke,I.outlinecolor).style({fill:"none","stroke-width":ee}),F.attr("transform",n(re.l-(R?Le*cn:0),re.t-(R?0:(1-Ze)*cn-Wt))),!R&&(j||c(X).getAlpha()&&!c.equals(q.paper_bgcolor,X))){var $t=Xe.selectAll("text"),hr=$t[0].length,Sr=F.select("."+p.cbbg).node(),tt=s.bBox(Sr),Qe=s.getTranslate(F),lt=2;$t.each(function(ct,pt){var St=0,xt=hr-1;if(pt===St||pt===xt){var Pt=s.bBox(this),Xt=s.getTranslate(this),or;if(pt===xt){var Pr=Pt.right+Xt.x,Ar=tt.right+Qe.x+Ie-j-lt+U;or=Ar-Pr,or>0&&(or=0)}else if(pt===St){var Er=Pt.left+Xt.x,Jr=tt.left+Qe.x+Ie+j+lt;or=Jr-Er,or<0&&(or=0)}or&&(hr<3?this.setAttribute("transform","translate("+or+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var ft={},Et=M[ae],Vt=w[ae],Pe=M[he],Se=w[he],ot=cn-be;R?(z==="pixels"?(ft.y=H,ft.t=De*Pe,ft.b=De*Se):(ft.t=ft.b=0,ft.yt=H+O*Pe,ft.yb=H-O*Se),Y==="pixels"?(ft.x=U,ft.l=cn*Et,ft.r=cn*Vt):(ft.l=ot*Et,ft.r=ot*Vt,ft.xl=U-G*Et,ft.xr=U+G*Vt)):(z==="pixels"?(ft.x=U,ft.l=De*Et,ft.r=De*Vt):(ft.l=ft.r=0,ft.xl=U+O*Et,ft.xr=U-O*Vt),Y==="pixels"?(ft.y=1-H,ft.t=cn*Pe,ft.b=cn*Se):(ft.t=ot*Pe,ft.b=ot*Se,ft.yt=H-G*Pe,ft.yb=H+G*Se)),A.autoMargin(D,I._id,ft)}return i.syncOrAsync([A.previousPromises,Ke,At,qe,A.previousPromises,mt],D)}function E(F,I,D){var R=I.orientation==="v",O=D._fullLayout,z=O._size,G,Y,ee;a.init({element:F.node(),gd:D,prepFn:function(){G=F.attr("transform"),v(F)},moveFn:function(j,X){F.attr("transform",G+n(j,X)),Y=a.align((R?I._uFrac:I._vFrac)+j/z.w,R?I._thickFrac:I._lenFrac,0,1,I.xanchor),ee=a.align((R?I._vFrac:1-I._uFrac)-X/z.h,R?I._lenFrac:I._thickFrac,0,1,I.yanchor);var ae=a.getCursor(Y,ee,I.xanchor,I.yanchor);v(F,ae)},doneFn:function(){if(v(F),Y!==void 0&&ee!==void 0){var j={};j[I._propPrefix+"x"]=Y,j[I._propPrefix+"y"]=ee,I._traceIndex!==void 0?T.call("_guiRestyle",D,j,I._traceIndex):T.call("_guiRelayout",D,j)}}})}function S(F,I,D){var R=I._levels,O=[],z=[],G,Y,ee=R.end+R.size/100,j=R.size,X=1.001*D[0]-.001*D[1],ae=1.001*D[1]-.001*D[0];for(Y=0;Y<1e5&&(G=R.start+Y*j,!(j>0?G>=ee:G<=ee));Y++)G>X&&G<ae&&O.push(G);if(I._fillgradient)z=[0];else if(typeof I._fillcolor=="function"){var he=I._filllevels;if(he)for(ee=he.end+he.size/100,j=he.size,Y=0;Y<1e5&&(G=he.start+Y*j,!(j>0?G>=ee:G<=ee));Y++)G>D[0]&&G<D[1]&&z.push(G);else z=O.map(function(K){return K-R.size/2}),z.push(z[z.length-1]+R.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(z=[0]);return R.size<0&&(O.reverse(),z.reverse()),{line:O,fill:z}}function P(F,I,D){var R=F._fullLayout,O=I.orientation==="v",z={type:"linear",range:D,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},G=O?"y":"x",Y={type:"linear",_id:G+I._id},ee={letter:G,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function j(X,ae){return i.coerce(z,Y,l,X,ae)}return f(z,Y,j,ee,R),m(z,Y,j,ee),Y}N.exports={draw:_}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(t,N,V){var y=t("../../lib");N.exports=function(A){return y.isPlainObject(A.colorbar)}},{"../../lib":515}],373:[function(t,N,V){N.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(t,N,V){var y=t("../colorbar/attributes"),c=t("../../lib/regex").counter,A=t("../../lib/sort_object_keys"),T=t("./scales.js").scales;A(T),N.exports=function(a,i){a=a||"",i=i||{};var n=i.cLetter||"c";"onlyIfNumerical"in i?i.onlyIfNumerical:Boolean(a);var r="noScale"in i?i.noScale:a==="marker.line",v="showScaleDflt"in i?i.showScaleDflt:n==="z",s=typeof i.colorscaleDflt=="string"?T[i.colorscaleDflt]:null,o=i.editTypeOverride||"",b;"colorAttr"in i?(b=i.colorAttr,i.colorAttr):b={z:"z",c:"color"}[n];var g=n+"auto",d=n+"min",f=n+"max",m=n+"mid",l={};l[d]=l[f]=void 0;var x={};x[g]=!1;var u={};return b==="color"&&(u.color={valType:"color",arrayOk:!0,editType:o||"style"},i.anim&&(u.color.anim=!0)),u[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:l},u[d]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:x},u[f]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:x},u[m]={valType:"number",dflt:null,editType:"calc",impliedEdits:l},u.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},u.autocolorscale={valType:"boolean",dflt:i.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},u.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(u.showscale={valType:"boolean",dflt:v,editType:"calc"},u.colorbar=y),i.noColorAxis||(u.coloraxis={valType:"subplotid",regex:c("coloraxis"),dflt:null,editType:"calc"}),u}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("./helpers").extractOpts;N.exports=function(e,a,i){var n=e._fullLayout,r=i.vals,v=i.containerStr,s=v?c.nestedProperty(a,v).get():a,o=A(s),b=o.auto!==!1,g=o.min,d=o.max,f=o.mid,m=function(){return c.aggNums(Math.min,null,r)},l=function(){return c.aggNums(Math.max,null,r)};if(g===void 0?g=m():b&&(s._colorAx&&y(g)?g=Math.min(g,m()):g=m()),d===void 0?d=l():b&&(s._colorAx&&y(d)?d=Math.max(d,l()):d=l()),b&&f!==void 0&&(d-f>f-g?g=f-(d-f):d-f<f-g&&(d=f+(f-g))),g===d&&(g-=.5,d+=.5),o._sync("min",g),o._sync("max",d),o.autocolorscale){var x;g*d<0?x=n.colorscale.diverging:g>=0?x=n.colorscale.sequential:x=n.colorscale.sequentialminus,o._sync("colorscale",x)}}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(t,N,V){var y=t("../../lib"),c=t("./helpers").hasColorscale,A=t("./helpers").extractOpts;N.exports=function(e,a){function i(g,d){var f=g["_"+d];f!==void 0&&(g[d]=f)}function n(g,d){var f=d.container?y.nestedProperty(g,d.container).get():g;if(f)if(f.coloraxis)f._colorAx=a[f.coloraxis];else{var m=A(f),l=m.auto;(l||m.min===void 0)&&i(f,d.min),(l||m.max===void 0)&&i(f,d.max),m.autocolorscale&&i(f,"colorscale")}}for(var r=0;r<e.length;r++){var v=e[r],s=v._module.colorbar;if(s)if(Array.isArray(s))for(var o=0;o<s.length;o++)n(v,s[o]);else n(v,s);c(v,"marker.line")&&n(v,{container:"marker.line",min:"cmin",max:"cmax"})}for(var b in a._colorAxes)n(a[b],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../colorbar/has_colorbar"),T=t("../colorbar/defaults"),e=t("./scales").isValid,a=t("../../registry").traceIs;function i(n,r){var v=r.slice(0,r.length-1);return r?c.nestedProperty(n,v).get()||{}:n}N.exports=function n(r,v,s,o,b){var g=b.prefix,d=b.cLetter,f="_module"in v,m=i(r,g),l=i(v,g),x=i(v._template||{},g)||{},u=function(){return delete r.coloraxis,delete v.coloraxis,n(r,v,s,o,b)};if(f){var M=s._colorAxes||{},w=o(g+"coloraxis");if(w){var p=a(v,"contour")&&c.nestedProperty(v,"contours.coloring").get()||"heatmap",_=M[w];_?(_[2].push(u),_[0]!==p&&(_[0]=!1,c.warn(["Ignoring coloraxis:",w,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[w]=[p,v,[u]];return}}var h=m[d+"min"],L=m[d+"max"],E=y(h)&&y(L)&&h<L,S=o(g+d+"auto",!E);S?o(g+d+"mid"):(o(g+d+"min"),o(g+d+"max"));var P=m.colorscale,F=x.colorscale,I;if(P!==void 0&&(I=!e(P)),F!==void 0&&(I=!e(F)),o(g+"autocolorscale",I),o(g+"colorscale"),o(g+"reversescale"),g!=="marker.line."){var D;g&&f&&(D=A(m));var R=o(g+"showscale",D);R&&(g&&x&&(l._template=x),T(m,l,s))}}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(t,N,V){var y=t("@plotly/d3"),c=t("tinycolor2"),A=t("fast-isnumeric"),T=t("../../lib"),e=t("../color"),a=t("./scales").isValid;function i(f,m,l){var x=m?T.nestedProperty(f,m).get()||{}:f,u=x[l||"color"],M=!1;if(T.isArrayOrTypedArray(u)){for(var w=0;w<u.length;w++)if(A(u[w])){M=!0;break}}return T.isPlainObject(x)&&(M||x.showscale===!0||A(x.cmin)&&A(x.cmax)||a(x.colorscale)||T.isPlainObject(x.colorbar))}var n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function v(f){var m=f._colorAx,l=m||f,x={},u,M,w;for(M=0;M<n.length;M++)w=n[M],x[w]=l[w];if(m)for(u="c",M=0;M<r.length;M++)w=r[M],x[w]=l["c"+w];else{var p;for(M=0;M<r.length;M++){if(w=r[M],p="c"+w,p in l){x[w]=l[p];continue}p="z"+w,p in l&&(x[w]=l[p])}u=p.charAt(0)}return x._sync=function(_,h){var L=r.indexOf(_)!==-1?u+_:_;l[L]=l["_"+L]=h},x}function s(f){for(var m=v(f),l=m.min,x=m.max,u=m.reversescale?o(m.colorscale):m.colorscale,M=u.length,w=new Array(M),p=new Array(M),_=0;_<M;_++){var h=u[_];w[_]=l+h[0]*(x-l),p[_]=h[1]}return{domain:w,range:p}}function o(f){for(var m=f.length,l=new Array(m),x=m-1,u=0;x>=0;x--,u++){var M=f[x];l[u]=[1-M[0],M[1]]}return l}function b(f,m){m=m||{};for(var l=f.domain,x=f.range,u=x.length,M=new Array(u),w=0;w<u;w++){var p=c(x[w]).toRgb();M[w]=[p.r,p.g,p.b,p.a]}var _=y.scale.linear().domain(l).range(M).clamp(!0),h=m.noNumericCheck,L=m.returnArray,E;return h&&L?E=_:h?E=function(S){return d(_(S))}:L?E=function(S){return A(S)?_(S):c(S).isValid()?S:e.defaultLine}:E=function(S){return A(S)?d(_(S)):c(S).isValid()?S:e.defaultLine},E.domain=_.domain,E.range=function(){return x},E}function g(f,m){return b(s(f),m)}function d(f){var m={r:f[0],g:f[1],b:f[2],a:f[3]};return c(m).toRgbString()}N.exports={hasColorscale:i,extractOpts:v,extractScale:s,flipScale:o,makeColorScaleFunc:b,makeColorScaleFuncFromTrace:g}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(t,N,V){var y=t("./scales"),c=t("./helpers");N.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:y.scales,defaultScale:y.defaultScale,getScale:y.get,isValidScale:y.isValid,hasColorscale:c.hasColorscale,extractOpts:c.extractOpts,extractScale:c.extractScale,flipScale:c.flipScale,makeColorScaleFunc:c.makeColorScaleFunc,makeColorScaleFuncFromTrace:c.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(t,N,V){var y=t("../../lib/extend").extendFlat,c=t("./attributes"),A=t("./scales").scales;N.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:A.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:A.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:A.RdBu,editType:"calc"}},coloraxis:y({_isSubplotObj:!0,editType:"calc"},c("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(t,N,V){var y=t("../../lib"),c=t("../../plot_api/plot_template"),A=t("./layout_attributes"),T=t("./defaults");N.exports=function(a,i){function n(f,m){return y.coerce(a,i,A,f,m)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var r=i._colorAxes,v,s;function o(f,m){return y.coerce(v,s,A.coloraxis,f,m)}for(var b in r){var g=r[b];if(g[0])v=a[b]||{},s=c.newContainer(i,b,"coloraxis"),s._name=b,T(v,s,i,o,{prefix:"",cLetter:"c"});else{for(var d=0;d<g[2].length;d++)g[2][d]();delete i._colorAxes[b]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(t,N,V){var y=t("tinycolor2"),c={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},A=c.RdBu;function T(i,n){if(n||(n=A),!i)return n;function r(){try{i=c[i]||JSON.parse(i)}catch{i=n}}return typeof i=="string"&&(r(),typeof i=="string"&&r()),e(i)?i:n}function e(i){var n=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var r=0;r<i.length;r++){var v=i[r];if(v.length!==2||+v[0]<n||!y(v[1]).isValid())return!1;n=+v[0]}return!0}function a(i){return c[i]!==void 0?!0:e(i)}N.exports={scales:c,defaultScale:A,get:T,isValid:a}},{tinycolor2:313}],383:[function(t,N,V){N.exports=function(c,A,T,e,a){var i=(c-T)/(e-T),n=i+A/(e-T),r=(i+n)/2;return a==="left"||a==="bottom"?i:a==="center"||a==="middle"?r:a==="right"||a==="top"?n:i<2/3-r?i:n>4/3-r?n:r}},{}],384:[function(t,N,V){var y=t("../../lib"),c=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];N.exports=function(T,e,a,i){return a==="left"?T=0:a==="center"?T=1:a==="right"?T=2:T=y.constrain(Math.floor(T*3),0,2),i==="bottom"?e=0:i==="middle"?e=1:i==="top"?e=2:e=y.constrain(Math.floor(e*3),0,2),c[e][T]}},{"../../lib":515}],385:[function(t,N,V){V.selectMode=function(y){return y==="lasso"||y==="select"},V.drawMode=function(y){return y==="drawclosedpath"||y==="drawopenpath"||y==="drawline"||y==="drawrect"||y==="drawcircle"},V.openMode=function(y){return y==="drawline"||y==="drawopenpath"},V.rectMode=function(y){return y==="select"||y==="drawline"||y==="drawrect"||y==="drawcircle"},V.freeMode=function(y){return y==="lasso"||y==="drawclosedpath"||y==="drawopenpath"},V.selectingOrDrawing=function(y){return V.freeMode(y)||V.rectMode(y)}},{}],386:[function(t,N,V){var y=t("mouse-event-offset"),c=t("has-hover"),A=t("has-passive-events"),T=t("../../lib").removeElement,e=t("../../plots/cartesian/constants"),a=N.exports={};a.align=t("./align"),a.getCursor=t("./cursor");var i=t("./unhover");a.unhover=i.wrapped,a.unhoverRaw=i.raw,a.init=function(s){var o=s.gd,b=1,g=o._context.doubleClickDelay,d=s.element,f,m,l,x,u,M,w,p;o._mouseDownTime||(o._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=L,A?(d._ontouchstart&&d.removeEventListener("touchstart",d._ontouchstart),d._ontouchstart=L,d.addEventListener("touchstart",L,{passive:!1})):d.ontouchstart=L;function _(P,F,I){return Math.abs(P)<I&&(P=0),Math.abs(F)<I&&(F=0),[P,F]}var h=s.clampFn||_;function L(P){o._dragged=!1,o._dragging=!0;var F=r(P);f=F[0],m=F[1],w=P.target,M=P,p=P.buttons===2||P.ctrlKey,typeof P.clientX>"u"&&typeof P.clientY>"u"&&(P.clientX=f,P.clientY=m),l=new Date().getTime(),l-o._mouseDownTime<g?b+=1:(b=1,o._mouseDownTime=l),s.prepFn&&s.prepFn(P,f,m),c&&!p?(u=n(),u.style.cursor=window.getComputedStyle(d).cursor):c||(u=document,x=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),s.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",E),document.addEventListener("touchmove",E,{passive:!1}))}function E(P){P.preventDefault();var F=r(P),I=s.minDrag||e.MINDRAG,D=h(F[0]-f,F[1]-m,I),R=D[0],O=D[1];(R||O)&&(o._dragged=!0,a.unhover(o,P)),o._dragged&&s.moveFn&&!p&&(o._dragdata={element:d,dx:R,dy:O},s.moveFn(R,O))}function S(P){if(delete o._dragdata,s.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",E)),document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S),c?T(u):x&&(u.documentElement.style.cursor=x,x=null),!o._dragging){o._dragged=!1;return}if(o._dragging=!1,new Date().getTime()-o._mouseDownTime>g&&(b=Math.max(b-1,1)),o._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(b,M),!p){var F;try{F=new MouseEvent("click",P)}catch{var I=r(P);F=document.createEvent("MouseEvents"),F.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,I[0],I[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}w.dispatchEvent(F)}o._dragging=!1,o._dragged=!1}};function n(){var v=document.createElement("div");v.className="dragcover";var s=v.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(v),v}a.coverSlip=n;function r(v){return y(v.changedTouches?v.changedTouches[0]:v,document.body)}},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(t,N,V){var y=t("../../lib/events"),c=t("../../lib/throttle"),A=t("../../lib/dom").getGraphDiv,T=t("../fx/constants"),e=N.exports={};e.wrapped=function(a,i,n){a=A(a),a._fullLayout&&c.clear(a._fullLayout._uid+T.HOVERID),e.raw(a,i,n)},e.raw=function(i,n){var r=i._fullLayout,v=i._hoverdata;n||(n={}),!(n.target&&!i._dragged&&y.triggerHandler(i,"plotly_beforehover",n)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,n.target&&v&&i.emit("plotly_unhover",{event:n,points:v}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(t,N,V){V.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},V.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=c.numberFormat,T=t("fast-isnumeric"),e=t("tinycolor2"),a=t("../../registry"),i=t("../color"),n=t("../colorscale"),r=c.strTranslate,v=t("../../lib/svg_text_utils"),s=t("../../constants/xmlns_namespaces"),o=t("../../constants/alignment"),b=o.LINE_SPACING,g=t("../../constants/interactions").DESELECTDIM,d=t("../../traces/scatter/subtypes"),f=t("../../traces/scatter/make_bubble_size_func"),m=t("../../components/fx/helpers").appendArrayPointValue,l=N.exports={};l.font=function(me,be,ke,De){c.isPlainObject(be)&&(De=be.color,ke=be.size,be=be.family),be&&me.style("font-family",be),ke+1&&me.style("font-size",ke+"px"),De&&me.call(i.fill,De)},l.setPosition=function(me,be,ke){me.attr("x",be).attr("y",ke)},l.setSize=function(me,be,ke){me.attr("width",be).attr("height",ke)},l.setRect=function(me,be,ke,De,He){me.call(l.setPosition,be,ke).call(l.setSize,De,He)},l.translatePoint=function(me,be,ke,De){var He=ke.c2p(me.x),Ae=De.c2p(me.y);if(T(He)&&T(Ae)&&be.node())be.node().nodeName==="text"?be.attr("x",He).attr("y",Ae):be.attr("transform",r(He,Ae));else return!1;return!0},l.translatePoints=function(me,be,ke){me.each(function(De){var He=y.select(this);l.translatePoint(De,He,be,ke)})},l.hideOutsideRangePoint=function(me,be,ke,De,He,Ae){be.attr("display",ke.isPtWithinRange(me,He)&&De.isPtWithinRange(me,Ae)?null:"none")},l.hideOutsideRangePoints=function(me,be){if(!!be._hasClipOnAxisFalse){var ke=be.xaxis,De=be.yaxis;me.each(function(He){var Ae=He[0].trace,Le=Ae.xcalendar,Ze=Ae.ycalendar,We=a.traceIs(Ae,"bar-like")?".bartext":".point,.textpoint";me.selectAll(We).each(function(ze){l.hideOutsideRangePoint(ze,y.select(this),ke,De,Le,Ze)})})}},l.crispRound=function(me,be,ke){return!be||!T(be)?ke||0:me._context.staticPlot?be:be<1?1:Math.round(be)},l.singleLineStyle=function(me,be,ke,De,He){be.style("fill","none");var Ae=(((me||[])[0]||{}).trace||{}).line||{},Le=ke||Ae.width||0,Ze=He||Ae.dash||"";i.stroke(be,De||Ae.color),l.dashLine(be,Ze,Le)},l.lineGroupStyle=function(me,be,ke,De){me.style("fill","none").each(function(He){var Ae=(((He||[])[0]||{}).trace||{}).line||{},Le=be||Ae.width||0,Ze=De||Ae.dash||"";y.select(this).call(i.stroke,ke||Ae.color).call(l.dashLine,Ze,Le)})},l.dashLine=function(me,be,ke){ke=+ke||0,be=l.dashStyle(be,ke),me.style({"stroke-dasharray":be,"stroke-width":ke+"px"})},l.dashStyle=function(me,be){be=+be||1;var ke=Math.max(be,3);return me==="solid"?me="":me==="dot"?me=ke+"px,"+ke+"px":me==="dash"?me=3*ke+"px,"+3*ke+"px":me==="longdash"?me=5*ke+"px,"+5*ke+"px":me==="dashdot"?me=3*ke+"px,"+ke+"px,"+ke+"px,"+ke+"px":me==="longdashdot"&&(me=5*ke+"px,"+2*ke+"px,"+ke+"px,"+2*ke+"px"),me};function x(me,be,ke){var De=be.fillpattern,He=De&&l.getPatternAttr(De.shape,0,"");if(He){var Ae=l.getPatternAttr(De.bgcolor,0,null),Le=l.getPatternAttr(De.fgcolor,0,null),Ze=De.fgopacity,We=l.getPatternAttr(De.size,0,8),ze=l.getPatternAttr(De.solidity,0,.3),Ie=be.uid;l.pattern(me,"point",ke,Ie,He,We,ze,void 0,De.fillmode,Ae,Le,Ze)}else be.fillcolor&&me.call(i.fill,be.fillcolor)}l.singleFillStyle=function(me,be){var ke=y.select(me.node()),De=ke.data(),He=((De[0]||[])[0]||{}).trace||{};x(me,He,be)},l.fillGroupStyle=function(me,be){me.style("stroke-width",0).each(function(ke){var De=y.select(this);ke[0].trace&&x(De,ke[0].trace,be)})};var u=t("./symbol_defs");l.symbolNames=[],l.symbolFuncs=[],l.symbolBackOffs=[],l.symbolNeedLines={},l.symbolNoDot={},l.symbolNoFill={},l.symbolList=[],Object.keys(u).forEach(function(me){var be=u[me],ke=be.n;l.symbolList.push(ke,String(ke),me,ke+100,String(ke+100),me+"-open"),l.symbolNames[ke]=me,l.symbolFuncs[ke]=be.f,l.symbolBackOffs[ke]=be.backoff||0,be.needLine&&(l.symbolNeedLines[ke]=!0),be.noDot?l.symbolNoDot[ke]=!0:l.symbolList.push(ke+200,String(ke+200),me+"-dot",ke+300,String(ke+300),me+"-open-dot"),be.noFill&&(l.symbolNoFill[ke]=!0)});var M=l.symbolNames.length,w="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";l.symbolNumber=function(me){if(T(me))me=+me;else if(typeof me=="string"){var be=0;me.indexOf("-open")>0&&(be=100,me=me.replace("-open","")),me.indexOf("-dot")>0&&(be+=200,me=me.replace("-dot","")),me=l.symbolNames.indexOf(me),me>=0&&(me+=be)}return me%100>=M||me>=400?0:Math.floor(Math.max(me,0))};function p(me,be,ke,De){var He=me%100;return l.symbolFuncs[He](be,ke,De)+(me>=200?w:"")}var _={x1:1,x2:0,y1:0,y2:0},h={x1:0,x2:0,y1:1,y2:0},L=A("~f"),E={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:_},horizontalreversed:{node:"linearGradient",attrs:_,reversed:!0},vertical:{node:"linearGradient",attrs:h},verticalreversed:{node:"linearGradient",attrs:h,reversed:!0}};l.gradient=function(me,be,ke,De,He,Ae){for(var Le=He.length,Ze=E[De],We=new Array(Le),ze=0;ze<Le;ze++)Ze.reversed?We[Le-1-ze]=[L((1-He[ze][0])*100),He[ze][1]]:We[ze]=[L(He[ze][0]*100),He[ze][1]];var Ie=be._fullLayout,Ve="g"+Ie._uid+"-"+ke,dt=Ie._defs.select(".gradients").selectAll("#"+Ve).data([De+We.join(";")],c.identity);dt.exit().remove(),dt.enter().append(Ze.node).each(function(){var Ft=y.select(this);Ze.attrs&&Ft.attr(Ze.attrs),Ft.attr("id",Ve);var Qt=Ft.selectAll("stop").data(We);Qt.exit().remove(),Qt.enter().append("stop"),Qt.each(function(Ot){var Ct=e(Ot[1]);y.select(this).attr({offset:Ot[0]+"%","stop-color":i.tinyRGB(Ct),"stop-opacity":Ct.getAlpha()})})}),me.style(Ae,J(Ve,be)).style(Ae+"-opacity",null),me.classed("gradient_filled",!0)},l.pattern=function(me,be,ke,De,He,Ae,Le,Ze,We,ze,Ie,Ve){var dt=be==="legend";Ze&&(We==="overlay"?(ze=Ze,Ie=i.contrast(ze)):(ze=void 0,Ie=Ze));var Ft=ke._fullLayout,Qt="p"+Ft._uid+"-"+De,Ot,Ct,jt=function(Mt,Gt,zt,Ht,Zt){return Ht+(Zt-Ht)*(Mt-Gt)/(zt-Gt)},Nt,Lt,Xe,it,Ye={},Ee=e(Ie),Ge=i.tinyRGB(Ee),Ke=Ee.getAlpha(),qe=Ve*Ke;switch(He){case"/":Ot=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Nt="M-"+Ot/4+","+Ct/4+"l"+Ot/2+",-"+Ct/2+"M0,"+Ct+"L"+Ot+",0M"+Ot/4*3+","+Ct/4*5+"l"+Ot/2+",-"+Ct/2,Lt=Le*Ae,it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"\\":Ot=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Nt="M"+Ot/4*3+",-"+Ct/4+"l"+Ot/2+","+Ct/2+"M0,0L"+Ot+","+Ct+"M-"+Ot/4+","+Ct/4*3+"l"+Ot/2+","+Ct/2,Lt=Le*Ae,it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"x":Ot=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Nt="M-"+Ot/4+","+Ct/4+"l"+Ot/2+",-"+Ct/2+"M0,"+Ct+"L"+Ot+",0M"+Ot/4*3+","+Ct/4*5+"l"+Ot/2+",-"+Ct/2+"M"+Ot/4*3+",-"+Ct/4+"l"+Ot/2+","+Ct/2+"M0,0L"+Ot+","+Ct+"M-"+Ot/4+","+Ct/4*3+"l"+Ot/2+","+Ct/2,Lt=Ae-Ae*Math.sqrt(1-Le),it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"|":Ot=Ae,Ct=Ae,it="path",Nt="M"+Ot/2+",0L"+Ot/2+","+Ct,Lt=Le*Ae,it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"-":Ot=Ae,Ct=Ae,it="path",Nt="M0,"+Ct/2+"L"+Ot+","+Ct/2,Lt=Le*Ae,it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"+":Ot=Ae,Ct=Ae,it="path",Nt="M"+Ot/2+",0L"+Ot/2+","+Ct+"M0,"+Ct/2+"L"+Ot+","+Ct/2,Lt=Ae-Ae*Math.sqrt(1-Le),it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case".":Ot=Ae,Ct=Ae,Le<Math.PI/4?Xe=Math.sqrt(Le*Ae*Ae/Math.PI):Xe=jt(Le,Math.PI/4,1,Ae/2,Ae/Math.sqrt(2)),it="circle",Ye={cx:Ot/2,cy:Ct/2,r:Xe,opacity:qe,fill:Ge};break}var At=[He||"noSh",ze||"noBg",Ie||"noFg",Ae,Le].join(";"),mt=Ft._defs.select(".patterns").selectAll("#"+Qt).data([At],c.identity);mt.exit().remove(),mt.enter().append("pattern").each(function(){var Mt=y.select(this);if(Mt.attr({id:Qt,width:Ot+"px",height:Ct+"px",patternUnits:"userSpaceOnUse",patternTransform:dt?"scale(0.8)":""}),ze){var Gt=e(ze),zt=i.tinyRGB(Gt),Ht=Gt.getAlpha(),Zt=Mt.selectAll("rect").data([0]);Zt.exit().remove(),Zt.enter().append("rect").attr({width:Ot+"px",height:Ct+"px",fill:zt,"fill-opacity":Ht})}var Wt=Mt.selectAll(it).data([0]);Wt.exit().remove(),Wt.enter().append(it).attr(Ye)}),me.style("fill",J(Qt,ke)).style("fill-opacity",null),me.classed("pattern_filled",!0)},l.initGradients=function(me){var be=me._fullLayout,ke=c.ensureSingle(be._defs,"g","gradients");ke.selectAll("linearGradient,radialGradient").remove(),y.select(me).selectAll(".gradient_filled").classed("gradient_filled",!1)},l.initPatterns=function(me){var be=me._fullLayout,ke=c.ensureSingle(be._defs,"g","patterns");ke.selectAll("pattern").remove(),y.select(me).selectAll(".pattern_filled").classed("pattern_filled",!1)},l.getPatternAttr=function(me,be,ke){return me&&c.isArrayOrTypedArray(me)?be<me.length?me[be]:ke:me},l.pointStyle=function(me,be,ke){if(!!me.size()){var De=l.makePointStyleFns(be);me.each(function(He){l.singlePointStyle(He,y.select(this),be,De,ke)})}},l.singlePointStyle=function(me,be,ke,De,He){var Ae=ke.marker,Le=Ae.line;if(be.style("opacity",De.selectedOpacityFn?De.selectedOpacityFn(me):me.mo===void 0?Ae.opacity:me.mo),De.ms2mrc){var Ze;me.ms==="various"||Ae.size==="various"?Ze=3:Ze=De.ms2mrc(me.ms),me.mrc=Ze,De.selectedSizeFn&&(Ze=me.mrc=De.selectedSizeFn(me));var We=l.symbolNumber(me.mx||Ae.symbol)||0;me.om=We%200>=100;var ze=xe(me,ke),Ie=q(me,ke);be.attr("d",p(We,Ze,ze,Ie))}var Ve=!1,dt,Ft,Qt;if(me.so)Qt=Le.outlierwidth,Ft=Le.outliercolor,dt=Ae.outliercolor;else{var Ot=(Le||{}).width;Qt=(me.mlw+1||Ot+1||(me.trace?(me.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in me?Ft=me.mlcc=De.lineScale(me.mlc):c.isArrayOrTypedArray(Le.color)?Ft=i.defaultLine:Ft=Le.color,c.isArrayOrTypedArray(Ae.color)&&(dt=i.defaultLine,Ve=!0),"mc"in me?dt=me.mcc=De.markerScale(me.mc):dt=Ae.color||"rgba(0,0,0,0)",De.selectedColorFn&&(dt=De.selectedColorFn(me))}if(me.om)be.call(i.stroke,dt).style({"stroke-width":(Qt||1)+"px",fill:"none"});else{be.style("stroke-width",(me.isBlank?0:Qt)+"px");var Ct=Ae.gradient,jt=me.mgt;jt?Ve=!0:jt=Ct&&Ct.type,c.isArrayOrTypedArray(jt)&&(jt=jt[0],E[jt]||(jt=0));var Nt=Ae.pattern,Lt=Nt&&l.getPatternAttr(Nt.shape,me.i,"");if(jt&&jt!=="none"){var Xe=me.mgc;Xe?Ve=!0:Xe=Ct.color;var it=ke.uid;Ve&&(it+="-"+me.i),l.gradient(be,He,it,jt,[[0,Xe],[1,dt]],"fill")}else if(Lt){var Ye=l.getPatternAttr(Nt.bgcolor,me.i,null),Ee=l.getPatternAttr(Nt.fgcolor,me.i,null),Ge=Nt.fgopacity,Ke=l.getPatternAttr(Nt.size,me.i,8),qe=l.getPatternAttr(Nt.solidity,me.i,.3),At=me.mcc||c.isArrayOrTypedArray(Nt.shape)||c.isArrayOrTypedArray(Nt.bgcolor)||c.isArrayOrTypedArray(Nt.size)||c.isArrayOrTypedArray(Nt.solidity),mt=ke.uid;At&&(mt+="-"+me.i),l.pattern(be,"point",He,mt,Lt,Ke,qe,me.mcc,Nt.fillmode,Ye,Ee,Ge)}else i.fill(be,dt);Qt&&i.stroke(be,Ft)}},l.makePointStyleFns=function(me){var be={},ke=me.marker;return be.markerScale=l.tryColorscale(ke,""),be.lineScale=l.tryColorscale(ke,"line"),a.traceIs(me,"symbols")&&(be.ms2mrc=d.isBubble(me)?f(me):function(){return(ke.size||6)/2}),me.selectedpoints&&c.extendFlat(be,l.makeSelectedPointStyleFns(me)),be},l.makeSelectedPointStyleFns=function(me){var be={},ke=me.selected||{},De=me.unselected||{},He=me.marker||{},Ae=ke.marker||{},Le=De.marker||{},Ze=He.opacity,We=Ae.opacity,ze=Le.opacity,Ie=We!==void 0,Ve=ze!==void 0;(c.isArrayOrTypedArray(Ze)||Ie||Ve)&&(be.selectedOpacityFn=function(Xe){var it=Xe.mo===void 0?He.opacity:Xe.mo;return Xe.selected?Ie?We:it:Ve?ze:g*it});var dt=He.color,Ft=Ae.color,Qt=Le.color;(Ft||Qt)&&(be.selectedColorFn=function(Xe){var it=Xe.mcc||dt;return Xe.selected?Ft||it:Qt||it});var Ot=He.size,Ct=Ae.size,jt=Le.size,Nt=Ct!==void 0,Lt=jt!==void 0;return a.traceIs(me,"symbols")&&(Nt||Lt)&&(be.selectedSizeFn=function(Xe){var it=Xe.mrc||Ot/2;return Xe.selected?Nt?Ct/2:it:Lt?jt/2:it}),be},l.makeSelectedTextStyleFns=function(me){var be={},ke=me.selected||{},De=me.unselected||{},He=me.textfont||{},Ae=ke.textfont||{},Le=De.textfont||{},Ze=He.color,We=Ae.color,ze=Le.color;return be.selectedTextColorFn=function(Ie){var Ve=Ie.tc||Ze;return Ie.selected?We||Ve:ze||(We?Ve:i.addOpacity(Ve,g))},be},l.selectedPointStyle=function(me,be){if(!(!me.size()||!be.selectedpoints)){var ke=l.makeSelectedPointStyleFns(be),De=be.marker||{},He=[];ke.selectedOpacityFn&&He.push(function(Ae,Le){Ae.style("opacity",ke.selectedOpacityFn(Le))}),ke.selectedColorFn&&He.push(function(Ae,Le){i.fill(Ae,ke.selectedColorFn(Le))}),ke.selectedSizeFn&&He.push(function(Ae,Le){var Ze=Le.mx||De.symbol||0,We=ke.selectedSizeFn(Le);Ae.attr("d",p(l.symbolNumber(Ze),We,xe(Le,be),q(Le,be))),Le.mrc2=We}),He.length&&me.each(function(Ae){for(var Le=y.select(this),Ze=0;Ze<He.length;Ze++)He[Ze](Le,Ae)})}},l.tryColorscale=function(me,be){var ke=be?c.nestedProperty(me,be).get():me;if(ke){var De=ke.color;if((ke.colorscale||ke._colorAx)&&c.isArrayOrTypedArray(De))return n.makeColorScaleFuncFromTrace(ke)}return c.identity};var S={start:1,end:-1,middle:0,bottom:1,top:-1};function P(me,be,ke,De,He){var Ae=y.select(me.node().parentNode),Le=be.indexOf("top")!==-1?"top":be.indexOf("bottom")!==-1?"bottom":"middle",Ze=be.indexOf("left")!==-1?"end":be.indexOf("right")!==-1?"start":"middle",We=De?De/.8+1:0,ze=(v.lineCount(me)-1)*b+1,Ie=S[Ze]*We,Ve=ke*.75+S[Le]*We+(S[Le]-1)*ze*ke/2;me.attr("text-anchor",Ze),He||Ae.attr("transform",r(Ie,Ve))}function F(me,be){var ke=me.ts||be.textfont.size;return T(ke)&&ke>0?ke:0}l.textPointStyle=function(me,be,ke){if(!!me.size()){var De;if(be.selectedpoints){var He=l.makeSelectedTextStyleFns(be);De=He.selectedTextColorFn}var Ae=be.texttemplate,Le=ke._fullLayout;me.each(function(Ze){var We=y.select(this),ze=Ae?c.extractOption(Ze,be,"txt","texttemplate"):c.extractOption(Ze,be,"tx","text");if(!ze&&ze!==0){We.remove();return}if(Ae){var Ie=be._module.formatLabels,Ve=Ie?Ie(Ze,be,Le):{},dt={};m(dt,be,Ze.i);var Ft=be._meta||{};ze=c.texttemplateString(ze,Ve,Le._d3locale,dt,Ze,Ft)}var Qt=Ze.tp||be.textposition,Ot=F(Ze,be),Ct=De?De(Ze):Ze.tc||be.textfont.color;We.call(l.font,Ze.tf||be.textfont.family,Ot,Ct).text(ze).call(v.convertToTspans,ke).call(P,Qt,Ot,Ze.mrc)})}},l.selectedTextStyle=function(me,be){if(!(!me.size()||!be.selectedpoints)){var ke=l.makeSelectedTextStyleFns(be);me.each(function(De){var He=y.select(this),Ae=ke.selectedTextColorFn(De),Le=De.tp||be.textposition,Ze=F(De,be);i.fill(He,Ae);var We=a.traceIs(be,"bar-like");P(He,Le,Ze,De.mrc2||De.mrc,We)})}};var I=.5;l.smoothopen=function(me,be){if(me.length<3)return"M"+me.join("L");var ke="M"+me[0],De=[],He;for(He=1;He<me.length-1;He++)De.push(Y(me[He-1],me[He],me[He+1],be));for(ke+="Q"+De[0][0]+" "+me[1],He=2;He<me.length-1;He++)ke+="C"+De[He-2][1]+" "+De[He-1][0]+" "+me[He];return ke+="Q"+De[me.length-3][1]+" "+me[me.length-1],ke},l.smoothclosed=function(me,be){if(me.length<3)return"M"+me.join("L")+"Z";var ke="M"+me[0],De=me.length-1,He=[Y(me[De],me[0],me[1],be)],Ae;for(Ae=1;Ae<De;Ae++)He.push(Y(me[Ae-1],me[Ae],me[Ae+1],be));for(He.push(Y(me[De-1],me[De],me[0],be)),Ae=1;Ae<=De;Ae++)ke+="C"+He[Ae-1][1]+" "+He[Ae][0]+" "+me[Ae];return ke+="C"+He[De][1]+" "+He[0][0]+" "+me[0]+"Z",ke};var D,R;function O(me,be,ke){return ke&&(me=X(me)),be?G(me[1]):z(me[0])}function z(me){var be=y.round(me,2);return D=be,be}function G(me){var be=y.round(me,2);return R=be,be}function Y(me,be,ke,De){var He=me[0]-be[0],Ae=me[1]-be[1],Le=ke[0]-be[0],Ze=ke[1]-be[1],We=Math.pow(He*He+Ae*Ae,I/2),ze=Math.pow(Le*Le+Ze*Ze,I/2),Ie=(ze*ze*He-We*We*Le)*De,Ve=(ze*ze*Ae-We*We*Ze)*De,dt=3*ze*(We+ze),Ft=3*We*(We+ze);return[[z(be[0]+(dt&&Ie/dt)),G(be[1]+(dt&&Ve/dt))],[z(be[0]-(Ft&&Ie/Ft)),G(be[1]-(Ft&&Ve/Ft))]]}var ee={hv:function(me,be,ke){return"H"+z(be[0])+"V"+O(be,1,ke)},vh:function(me,be,ke){return"V"+G(be[1])+"H"+O(be,0,ke)},hvh:function(me,be,ke){return"H"+z((me[0]+be[0])/2)+"V"+G(be[1])+"H"+O(be,0,ke)},vhv:function(me,be,ke){return"V"+G((me[1]+be[1])/2)+"H"+z(be[0])+"V"+O(be,1,ke)}},j=function(me,be,ke){return"L"+O(be,0,ke)+","+O(be,1,ke)};l.steps=function(me){var be=ee[me]||j;return function(ke){for(var De="M"+z(ke[0][0])+","+G(ke[0][1]),He=ke.length,Ae=1;Ae<He;Ae++)De+=be(ke[Ae-1],ke[Ae],Ae===He-1);return De}};function X(me,be){var ke=me.backoff,De=me.trace,He=me.d,Ae=me.i;if(ke&&De&&De.marker&&De.marker.angle%360===0&&De.line&&De.line.shape!=="spline"){var Le=c.isArrayOrTypedArray(ke),Ze=me,We=be?be[0]:D||0,ze=be?be[1]:R||0,Ie=Ze[0],Ve=Ze[1],dt=Ie-We,Ft=Ve-ze,Qt=Math.atan2(Ft,dt),Ot=Le?ke[Ae]:ke;if(Ot==="auto"){var Ct=Ze.i;De.type==="scatter"&&Ct--;var jt=Ze.marker;Ot=jt?l.symbolBackOffs[l.symbolNumber(jt.symbol)]*jt.size:0,Ot+=l.getMarkerStandoff(He[Ct],De)||0}var Nt=Ie-Ot*Math.cos(Qt),Lt=Ve-Ot*Math.sin(Qt);(Nt<=Ie&&Nt>=We||Nt>=Ie&&Nt<=We)&&(Lt<=Ve&&Lt>=ze||Lt>=Ve&&Lt<=ze)&&(me=[Nt,Lt])}return me}l.applyBackoff=X,l.makeTester=function(){var me=c.ensureSingleById(y.select("body"),"svg","js-plotly-tester",function(ke){ke.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),be=c.ensureSingle(me,"path","js-reference-point",function(ke){ke.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});l.tester=me,l.testref=be},l.savedBBoxes={};var ae=0,he=1e4;l.bBox=function(me,be,ke){ke||(ke=K(me));var De;if(ke){if(De=l.savedBBoxes[ke],De)return c.extendFlat({},De)}else if(me.childNodes.length===1){var He=me.childNodes[0];if(ke=K(He),ke){var Ae=+He.getAttribute("x")||0,Le=+He.getAttribute("y")||0,Ze=He.getAttribute("transform");if(!Ze){var We=l.bBox(He,!1,ke);return Ae&&(We.left+=Ae,We.right+=Ae),Le&&(We.top+=Le,We.bottom+=Le),We}if(ke+="~"+Ae+"~"+Le+"~"+Ze,De=l.savedBBoxes[ke],De)return c.extendFlat({},De)}}var ze,Ie;be?ze=me:(Ie=l.tester.node(),ze=me.cloneNode(!0),Ie.appendChild(ze)),y.select(ze).attr("transform",null).call(v.positionText,0,0);var Ve=ze.getBoundingClientRect(),dt=l.testref.node().getBoundingClientRect();be||Ie.removeChild(ze);var Ft={height:Ve.height,width:Ve.width,left:Ve.left-dt.left,top:Ve.top-dt.top,right:Ve.right-dt.left,bottom:Ve.bottom-dt.top};return ae>=he&&(l.savedBBoxes={},ae=0),ke&&(l.savedBBoxes[ke]=Ft),ae++,c.extendFlat({},Ft)};function K(me){var be=me.getAttribute("data-unformatted");if(be!==null)return be+me.getAttribute("data-math")+me.getAttribute("text-anchor")+me.getAttribute("style")}l.setClipUrl=function(me,be,ke){me.attr("clip-path",J(be,ke))};function J(me,be){if(!me)return null;var ke=be._context,De=ke._exportedPlot?"":ke._baseUrl||"";return De?"url('"+De+"#"+me+"')":"url(#"+me+")"}l.getTranslate=function(me){var be=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,ke=me.attr?"attr":"getAttribute",De=me[ke]("transform")||"",He=De.replace(be,function(Ae,Le,Ze){return[Le,Ze].join(" ")}).split(" ");return{x:+He[0]||0,y:+He[1]||0}},l.setTranslate=function(me,be,ke){var De=/(\btranslate\(.*?\);?)/,He=me.attr?"attr":"getAttribute",Ae=me.attr?"attr":"setAttribute",Le=me[He]("transform")||"";return be=be||0,ke=ke||0,Le=Le.replace(De,"").trim(),Le+=r(be,ke),Le=Le.trim(),me[Ae]("transform",Le),Le},l.getScale=function(me){var be=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,ke=me.attr?"attr":"getAttribute",De=me[ke]("transform")||"",He=De.replace(be,function(Ae,Le,Ze){return[Le,Ze].join(" ")}).split(" ");return{x:+He[0]||1,y:+He[1]||1}},l.setScale=function(me,be,ke){var De=/(\bscale\(.*?\);?)/,He=me.attr?"attr":"getAttribute",Ae=me.attr?"attr":"setAttribute",Le=me[He]("transform")||"";return be=be||1,ke=ke||1,Le=Le.replace(De,"").trim(),Le+="scale("+be+","+ke+")",Le=Le.trim(),me[Ae]("transform",Le),Le};var U=/\s*sc.*/;l.setPointGroupScale=function(me,be,ke){if(be=be||1,ke=ke||1,!!me){var De=be===1&&ke===1?"":"scale("+be+","+ke+")";me.each(function(){var He=(this.getAttribute("transform")||"").replace(U,"");He+=De,He=He.trim(),this.setAttribute("transform",He)})}};var H=/translate\([^)]*\)\s*$/;l.setTextPointsScale=function(me,be,ke){!me||me.each(function(){var De,He=y.select(this),Ae=He.select("text");if(!!Ae.node()){var Le=parseFloat(Ae.attr("x")||0),Ze=parseFloat(Ae.attr("y")||0),We=(He.attr("transform")||"").match(H);be===1&&ke===1?De=[]:De=[r(Le,Ze),"scale("+be+","+ke+")",r(-Le,-Ze)],We&&De.push(We),He.attr("transform",De.join(""))}})};function q(me,be){var ke;return me&&(ke=me.mf),ke===void 0&&(ke=be.marker&&be.marker.standoff||0),!be._geo&&!be._xA?-ke:ke}l.getMarkerStandoff=q;var re=Math.atan2,Z=Math.cos,Q=Math.sin;function ie(me,be){var ke=be[0],De=be[1];return[ke*Z(me)-De*Q(me),ke*Q(me)+De*Z(me)]}var oe,ne,le,_e,fe,ye;function xe(me,be){var ke=me.ma;ke===void 0&&(ke=be.marker.angle||0);var De,He,Ae=be.marker.angleref;if(Ae==="previous"||Ae==="north"){if(be._geo){var Le=be._geo.project(me.lonlat);De=Le[0],He=Le[1]}else{var Ze=be._xA,We=be._yA;if(Ze&&We)De=Ze.c2p(me.x),He=We.c2p(me.y);else return 90}if(be._geo){var ze=me.lonlat[0],Ie=me.lonlat[1],Ve=be._geo.project([ze,Ie+1e-5]),dt=be._geo.project([ze+1e-5,Ie]),Ft=re(dt[1]-He,dt[0]-De),Qt=re(Ve[1]-He,Ve[0]-De),Ot;if(Ae==="north")Ot=ke/180*Math.PI;else if(Ae==="previous"){var Ct=ze/180*Math.PI,jt=Ie/180*Math.PI,Nt=oe/180*Math.PI,Lt=ne/180*Math.PI,Xe=Nt-Ct,it=Z(Lt)*Q(Xe),Ye=Q(Lt)*Z(jt)-Z(Lt)*Q(jt)*Z(Xe);Ot=-re(it,Ye)-Math.PI,oe=ze,ne=Ie}var Ee=ie(Ft,[Z(Ot),0]),Ge=ie(Qt,[Q(Ot),0]);ke=re(Ee[1]+Ge[1],Ee[0]+Ge[0])/Math.PI*180,Ae==="previous"&&!(ye===be.uid&&me.i===fe+1)&&(ke=null)}if(Ae==="previous"&&!be._geo)if(ye===be.uid&&me.i===fe+1&&T(De)&&T(He)){var Ke=De-le,qe=He-_e,At=be.line&&be.line.shape||"",mt=At.slice(At.length-1);mt==="h"&&(qe=0),mt==="v"&&(Ke=0),ke+=re(qe,Ke)/Math.PI*180+90}else ke=null}return le=De,_e=He,fe=me.i,ye=be.uid,ke}l.getMarkerAngle=xe},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(t,N,V){var y=t("parse-svg-path"),c=t("@plotly/d3").round,A="M0,0Z",T=Math.sqrt(2),e=Math.sqrt(3),a=Math.PI,i=Math.cos,n=Math.sin;N.exports={circle:{n:0,f:function(d,f,m){if(r(f))return A;var l=c(d,2),x="M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z";return m?g(f,m,x):x}},square:{n:1,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")}},diamond:{n:2,f:function(d,f,m){if(r(f))return A;var l=c(d*1.3,2);return g(f,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"Z")}},cross:{n:3,f:function(d,f,m){if(r(f))return A;var l=c(d*.4,2),x=c(d*1.2,2);return g(f,m,"M"+x+","+l+"H"+l+"V"+x+"H-"+l+"V"+l+"H-"+x+"V-"+l+"H-"+l+"V-"+x+"H"+l+"V-"+l+"H"+x+"Z")}},x:{n:4,f:function(d,f,m){if(r(f))return A;var l=c(d*.8/T,2),x="l"+l+","+l,u="l"+l+",-"+l,M="l-"+l+",-"+l,w="l-"+l+","+l;return g(f,m,"M0,"+l+x+u+M+u+M+w+M+w+x+w+x+"Z")}},"triangle-up":{n:5,f:function(d,f,m){if(r(f))return A;var l=c(d*2/e,2),x=c(d/2,2),u=c(d,2);return g(f,m,"M-"+l+","+x+"H"+l+"L0,-"+u+"Z")}},"triangle-down":{n:6,f:function(d,f,m){if(r(f))return A;var l=c(d*2/e,2),x=c(d/2,2),u=c(d,2);return g(f,m,"M-"+l+",-"+x+"H"+l+"L0,"+u+"Z")}},"triangle-left":{n:7,f:function(d,f,m){if(r(f))return A;var l=c(d*2/e,2),x=c(d/2,2),u=c(d,2);return g(f,m,"M"+x+",-"+l+"V"+l+"L-"+u+",0Z")}},"triangle-right":{n:8,f:function(d,f,m){if(r(f))return A;var l=c(d*2/e,2),x=c(d/2,2),u=c(d,2);return g(f,m,"M-"+x+",-"+l+"V"+l+"L"+u+",0Z")}},"triangle-ne":{n:9,f:function(d,f,m){if(r(f))return A;var l=c(d*.6,2),x=c(d*1.2,2);return g(f,m,"M-"+x+",-"+l+"H"+l+"V"+x+"Z")}},"triangle-se":{n:10,f:function(d,f,m){if(r(f))return A;var l=c(d*.6,2),x=c(d*1.2,2);return g(f,m,"M"+l+",-"+x+"V"+l+"H-"+x+"Z")}},"triangle-sw":{n:11,f:function(d,f,m){if(r(f))return A;var l=c(d*.6,2),x=c(d*1.2,2);return g(f,m,"M"+x+","+l+"H-"+l+"V-"+x+"Z")}},"triangle-nw":{n:12,f:function(d,f,m){if(r(f))return A;var l=c(d*.6,2),x=c(d*1.2,2);return g(f,m,"M-"+l+","+x+"V-"+l+"H"+x+"Z")}},pentagon:{n:13,f:function(d,f,m){if(r(f))return A;var l=c(d*.951,2),x=c(d*.588,2),u=c(-d,2),M=c(d*-.309,2),w=c(d*.809,2);return g(f,m,"M"+l+","+M+"L"+x+","+w+"H-"+x+"L-"+l+","+M+"L0,"+u+"Z")}},hexagon:{n:14,f:function(d,f,m){if(r(f))return A;var l=c(d,2),x=c(d/2,2),u=c(d*e/2,2);return g(f,m,"M"+u+",-"+x+"V"+x+"L0,"+l+"L-"+u+","+x+"V-"+x+"L0,-"+l+"Z")}},hexagon2:{n:15,f:function(d,f,m){if(r(f))return A;var l=c(d,2),x=c(d/2,2),u=c(d*e/2,2);return g(f,m,"M-"+x+","+u+"H"+x+"L"+l+",0L"+x+",-"+u+"H-"+x+"L-"+l+",0Z")}},octagon:{n:16,f:function(d,f,m){if(r(f))return A;var l=c(d*.924,2),x=c(d*.383,2);return g(f,m,"M-"+x+",-"+l+"H"+x+"L"+l+",-"+x+"V"+x+"L"+x+","+l+"H-"+x+"L-"+l+","+x+"V-"+x+"Z")}},star:{n:17,f:function(d,f,m){if(r(f))return A;var l=d*1.4,x=c(l*.225,2),u=c(l*.951,2),M=c(l*.363,2),w=c(l*.588,2),p=c(-l,2),_=c(l*-.309,2),h=c(l*.118,2),L=c(l*.809,2),E=c(l*.382,2);return g(f,m,"M"+x+","+_+"H"+u+"L"+M+","+h+"L"+w+","+L+"L0,"+E+"L-"+w+","+L+"L-"+M+","+h+"L-"+u+","+_+"H-"+x+"L0,"+p+"Z")}},hexagram:{n:18,f:function(d,f,m){if(r(f))return A;var l=c(d*.66,2),x=c(d*.38,2),u=c(d*.76,2);return g(f,m,"M-"+u+",0l-"+x+",-"+l+"h"+u+"l"+x+",-"+l+"l"+x+","+l+"h"+u+"l-"+x+","+l+"l"+x+","+l+"h-"+u+"l-"+x+","+l+"l-"+x+",-"+l+"h-"+u+"Z")}},"star-triangle-up":{n:19,f:function(d,f,m){if(r(f))return A;var l=c(d*e*.8,2),x=c(d*.8,2),u=c(d*1.6,2),M=c(d*4,2),w="A "+M+","+M+" 0 0 1 ";return g(f,m,"M-"+l+","+x+w+l+","+x+w+"0,-"+u+w+"-"+l+","+x+"Z")}},"star-triangle-down":{n:20,f:function(d,f,m){if(r(f))return A;var l=c(d*e*.8,2),x=c(d*.8,2),u=c(d*1.6,2),M=c(d*4,2),w="A "+M+","+M+" 0 0 1 ";return g(f,m,"M"+l+",-"+x+w+"-"+l+",-"+x+w+"0,"+u+w+l+",-"+x+"Z")}},"star-square":{n:21,f:function(d,f,m){if(r(f))return A;var l=c(d*1.1,2),x=c(d*2,2),u="A "+x+","+x+" 0 0 1 ";return g(f,m,"M-"+l+",-"+l+u+"-"+l+","+l+u+l+","+l+u+l+",-"+l+u+"-"+l+",-"+l+"Z")}},"star-diamond":{n:22,f:function(d,f,m){if(r(f))return A;var l=c(d*1.4,2),x=c(d*1.9,2),u="A "+x+","+x+" 0 0 1 ";return g(f,m,"M-"+l+",0"+u+"0,"+l+u+l+",0"+u+"0,-"+l+u+"-"+l+",0Z")}},"diamond-tall":{n:23,f:function(d,f,m){if(r(f))return A;var l=c(d*.7,2),x=c(d*1.4,2);return g(f,m,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},"diamond-wide":{n:24,f:function(d,f,m){if(r(f))return A;var l=c(d*1.4,2),x=c(d*.7,2);return g(f,m,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},hourglass:{n:25,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M"+l+","+l+"H-"+l+"L"+l+",-"+l+"H-"+l+"Z")},noDot:!0},bowtie:{n:26,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M"+l+","+l+"V-"+l+"L-"+l+","+l+"V-"+l+"Z")},noDot:!0},"circle-cross":{n:27,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(d,f,m){if(r(f))return A;var l=c(d,2),x=c(d/T,2);return g(f,m,"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(d,f,m){if(r(f))return A;var l=c(d*1.3,2);return g(f,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM0,-"+l+"V"+l+"M-"+l+",0H"+l)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(d,f,m){if(r(f))return A;var l=c(d*1.3,2),x=c(d*.65,2);return g(f,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+x+",-"+x+"L"+x+","+x+"M-"+x+","+x+"L"+x+",-"+x)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(d,f,m){if(r(f))return A;var l=c(d*1.4,2);return g(f,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(d,f,m){if(r(f))return A;var l=c(d*1.2,2),x=c(d*.85,2);return g(f,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(d,f,m){if(r(f))return A;var l=c(d/2,2),x=c(d,2);return g(f,m,"M"+l+","+x+"V-"+x+"M"+(l-x)+",-"+x+"V"+x+"M"+x+","+l+"H-"+x+"M-"+x+","+(l-x)+"H"+x)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(d,f,m){if(r(f))return A;var l=c(d*1.2,2),x=c(d*1.6,2),u=c(d*.8,2);return g(f,m,"M-"+l+","+u+"L0,0M"+l+","+u+"L0,0M0,-"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(d,f,m){if(r(f))return A;var l=c(d*1.2,2),x=c(d*1.6,2),u=c(d*.8,2);return g(f,m,"M-"+l+",-"+u+"L0,0M"+l+",-"+u+"L0,0M0,"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(d,f,m){if(r(f))return A;var l=c(d*1.2,2),x=c(d*1.6,2),u=c(d*.8,2);return g(f,m,"M"+u+","+l+"L0,0M"+u+",-"+l+"L0,0M-"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(d,f,m){if(r(f))return A;var l=c(d*1.2,2),x=c(d*1.6,2),u=c(d*.8,2);return g(f,m,"M-"+u+","+l+"L0,0M-"+u+",-"+l+"L0,0M"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(d,f,m){if(r(f))return A;var l=c(d*1.4,2);return g(f,m,"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(d,f,m){if(r(f))return A;var l=c(d*1.4,2);return g(f,m,"M0,"+l+"V-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(d,f,m){if(r(f))return A;var l=c(d,2);return g(f,m,"M"+l+","+l+"L-"+l+",-"+l)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(d,f,m){if(r(f))return A;var l=c(d,2),x=c(d*2,2);return g(f,m,"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(d,f,m){if(r(f))return A;var l=c(d,2),x=c(d*2,2);return g(f,m,"M0,0L-"+l+",-"+x+"H"+l+"Z")},noDot:!0},"arrow-left":{n:47,f:function(d,f,m){if(r(f))return A;var l=c(d*2,2),x=c(d,2);return g(f,m,"M0,0L"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-right":{n:48,f:function(d,f,m){if(r(f))return A;var l=c(d*2,2),x=c(d,2);return g(f,m,"M0,0L-"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(d,f,m){if(r(f))return A;var l=c(d,2),x=c(d*2,2);return g(f,m,"M-"+l+",0H"+l+"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(d,f,m){if(r(f))return A;var l=c(d,2),x=c(d*2,2);return g(f,m,"M-"+l+",0H"+l+"M0,0L-"+l+",-"+x+"H"+l+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(d,f,m){if(r(f))return A;var l=c(d*2,2),x=c(d,2);return g(f,m,"M0,-"+x+"V"+x+"M0,0L"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(d,f,m){if(r(f))return A;var l=c(d*2,2),x=c(d,2);return g(f,m,"M0,-"+x+"V"+x+"M0,0L-"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(d,f,m){if(r(f))return A;var l=a/2.5,x=2*d*i(l),u=2*d*n(l);return g(f,m,"M0,0L"+-x+","+u+"L"+x+","+u+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(d,f,m){if(r(f))return A;var l=a/4,x=2*d*i(l),u=2*d*n(l);return g(f,m,"M0,0L"+-x+","+u+"A "+2*d+","+2*d+" 0 0 1 "+x+","+u+"Z")},backoff:.4,noDot:!0}};function r(d){return d===null}var v,s,o,b;function g(d,f,m){if((!d||d%360===0)&&!f)return m;if(o===d&&b===f&&v===m)return s;o=d,b=f,v=m;function l(I,D){var R=i(I),O=n(I),z=D[0],G=D[1]+(f||0);return[z*R-G*O,z*O+G*R]}for(var x=d/180*a,u=0,M=0,w=y(m),p="",_=0;_<w.length;_++){var h=w[_],L=h[0],E=u,S=M;if(L==="M"||L==="L")u=+h[1],M=+h[2];else if(L==="m"||L==="l")u+=+h[1],M+=+h[2];else if(L==="H")u=+h[1];else if(L==="h")u+=+h[1];else if(L==="V")M=+h[1];else if(L==="v")M+=+h[1];else if(L==="A"){u=+h[1],M=+h[2];var P=l(x,[+h[6],+h[7]]);h[6]=P[0],h[7]=P[1],h[3]=+h[3]+d}(L==="H"||L==="V")&&(L="L"),(L==="h"||L==="v")&&(L="l"),(L==="m"||L==="l")&&(u-=E,M-=S);var F=l(x,[u,M]);(L==="H"||L==="V")&&(L="L"),(L==="M"||L==="L"||L==="m"||L==="l")&&(h[1]=F[0],h[2]=F[1]),h[0]=L,p+=h[0]+h.slice(1).join(",")}return s=p,p}},{"@plotly/d3":58,"parse-svg-path":250}],391:[function(t,N,V){N.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../registry"),A=t("../../plots/cartesian/axes"),T=t("../../lib"),e=t("./compute_error");N.exports=function(n){for(var r=n.calcdata,v=0;v<r.length;v++){var s=r[v],o=s[0].trace;if(o.visible===!0&&c.traceIs(o,"errorBarsOK")){var b=A.getFromId(n,o.xaxis),g=A.getFromId(n,o.yaxis);a(s,o,b,"x"),a(s,o,g,"y")}}};function a(i,n,r,v){var s=n["error_"+v]||{},o=s.visible&&["linear","log"].indexOf(r.type)!==-1,b=[];if(!!o){for(var g=e(s),d=0;d<i.length;d++){var f=i[d],m=f.i;if(m===void 0)m=d;else if(m===null)continue;var l=f[v];if(!!y(r.c2l(l))){var x=g(l,m);if(y(x[0])&&y(x[1])){var u=f[v+"s"]=l-x[0],M=f[v+"h"]=l+x[1];b.push(u,M)}}}var w=r._id,p=n._extremes[w],_=A.findExtremes(r,b,T.extendFlat({tozero:p.opts.tozero},{padded:!0}));p.min=p.min.concat(_.min),p.max=p.max.concat(_.max)}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(t,N,V){N.exports=function(A){var T=A.type,e=A.symmetric;if(T==="data"){var a=A.array||[];if(e)return function(s,o){var b=+a[o];return[b,b]};var i=A.arrayminus||[];return function(s,o){var b=+a[o],g=+i[o];return!isNaN(b)||!isNaN(g)?[g||0,b||0]:[NaN,NaN]}}else{var n=y(T,A.value),r=y(T,A.valueminus);return e||A.valueminus===void 0?function(s){var o=n(s);return[o,o]}:function(s){return[r(s),n(s)]}}};function y(c,A){if(c==="percent")return function(T){return Math.abs(T*A/100)};if(c==="constant")return function(){return Math.abs(A)};if(c==="sqrt")return function(T){return Math.sqrt(Math.abs(T))}}},{}],394:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../registry"),A=t("../../lib"),T=t("../../plot_api/plot_template"),e=t("./attributes");N.exports=function(a,i,n,r){var v="error_"+r.axis,s=T.newContainer(i,v),o=a[v]||{};function b(u,M){return A.coerce(o,s,e,u,M)}var g=o.array!==void 0||o.value!==void 0||o.type==="sqrt",d=b("visible",g);if(d!==!1){var f=b("type","array"in o?"data":"percent"),m=!0;f!=="sqrt"&&(m=b("symmetric",!((f==="data"?"arrayminus":"valueminus")in o))),f==="data"?(b("array"),b("traceref"),m||(b("arrayminus"),b("tracerefminus"))):(f==="percent"||f==="constant")&&(b("value"),m||b("valueminus"));var l="copy_"+r.inherit+"style";if(r.inherit){var x=i["error_"+r.inherit];(x||{}).visible&&b(l,!(o.color||y(o.thickness)||y(o.width)))}(!r.inherit||!s[l])&&(b("color",n),b("thickness"),b("width",c.traceIs(i,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(t,N,V){var y=t("../../lib"),c=t("../../plot_api/edit_types").overrideAll,A=t("./attributes"),T={error_x:y.extendFlat({},A),error_y:y.extendFlat({},A)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var e={error_x:y.extendFlat({},A),error_y:y.extendFlat({},A),error_z:y.extendFlat({},A)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,N.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:c(e,"calc","nested"),scattergl:c(T,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:a};function a(i,n,r){(n.error_y||{}).visible&&(r.yerr=i.yh-i.y,n.error_y.symmetric||(r.yerrneg=i.y-i.ys)),(n.error_x||{}).visible&&(r.xerr=i.xh-i.x,n.error_x.symmetric||(r.xerrneg=i.x-i.xs))}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../drawing"),T=t("../../traces/scatter/subtypes");N.exports=function(i,n,r,v){var s,o=r.xaxis,b=r.yaxis,g=v&&v.duration>0;n.each(function(d){var f=d[0].trace,m=f.error_x||{},l=f.error_y||{},x;f.ids&&(x=function(p){return p.id});var u=T.hasMarkers(f)&&f.marker.maxdisplayed>0;!l.visible&&!m.visible&&(d=[]);var M=y.select(this).selectAll("g.errorbar").data(d,x);if(M.exit().remove(),!!d.length){m.visible||M.selectAll("path.xerror").remove(),l.visible||M.selectAll("path.yerror").remove(),M.style("opacity",1);var w=M.enter().append("g").classed("errorbar",!0);g&&w.style("opacity",0).transition().duration(v.duration).style("opacity",1),A.setClipUrl(M,r.layerClipId,i),M.each(function(p){var _=y.select(this),h=e(p,o,b);if(!(u&&!p.vis)){var L,E=_.select("path.yerror");if(l.visible&&c(h.x)&&c(h.yh)&&c(h.ys)){var S=l.width;L="M"+(h.x-S)+","+h.yh+"h"+2*S+"m-"+S+",0V"+h.ys,h.noYS||(L+="m-"+S+",0h"+2*S),s=!E.size(),s?E=_.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):g&&(E=E.transition().duration(v.duration).ease(v.easing)),E.attr("d",L)}else E.remove();var P=_.select("path.xerror");if(m.visible&&c(h.y)&&c(h.xh)&&c(h.xs)){var F=(m.copy_ystyle?l:m).width;L="M"+h.xh+","+(h.y-F)+"v"+2*F+"m0,-"+F+"H"+h.xs,h.noXS||(L+="m0,-"+F+"v"+2*F),s=!P.size(),s?P=_.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):g&&(P=P.transition().duration(v.duration).ease(v.easing)),P.attr("d",L)}else P.remove()}})}})};function e(a,i,n){var r={x:i.c2p(a.x),y:n.c2p(a.y)};return a.yh!==void 0&&(r.yh=n.c2p(a.yh),r.ys=n.c2p(a.ys),c(r.ys)||(r.noYS=!0,r.ys=n.c2p(a.ys,!0))),a.xh!==void 0&&(r.xh=i.c2p(a.xh),r.xs=i.c2p(a.xs),c(r.xs)||(r.noXS=!0,r.xs=i.c2p(a.xs,!0))),r}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(t,N,V){var y=t("@plotly/d3"),c=t("../color");N.exports=function(T){T.each(function(e){var a=e[0].trace,i=a.error_y||{},n=a.error_x||{},r=y.select(this);r.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(c.stroke,i.color),n.copy_ystyle&&(n=i),r.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(c.stroke,n.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(t,N,V){var y=t("../../plots/font_attributes"),c=t("./layout_attributes").hoverlabel,A=t("../../lib/extend").extendFlat;N.exports={hoverlabel:{bgcolor:A({},c.bgcolor,{arrayOk:!0}),bordercolor:A({},c.bordercolor,{arrayOk:!0}),font:y({arrayOk:!0,editType:"none"}),align:A({},c.align,{arrayOk:!0}),namelength:A({},c.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(t,N,V){var y=t("../../lib"),c=t("../../registry");N.exports=function(e){var a=e.calcdata,i=e._fullLayout;function n(b){return function(g){return y.coerceHoverinfo({hoverinfo:g},{_module:b._module},i)}}for(var r=0;r<a.length;r++){var v=a[r],s=v[0].trace;if(!c.traceIs(s,"pie-like")){var o=c.traceIs(s,"2dMap")?A:y.fillArray;o(s.hoverinfo,v,"hi",n(s)),s.hovertemplate&&o(s.hovertemplate,v,"ht"),s.hoverlabel&&(o(s.hoverlabel.bgcolor,v,"hbg"),o(s.hoverlabel.bordercolor,v,"hbc"),o(s.hoverlabel.font.size,v,"hts"),o(s.hoverlabel.font.color,v,"htc"),o(s.hoverlabel.font.family,v,"htf"),o(s.hoverlabel.namelength,v,"hnl"),o(s.hoverlabel.align,v,"hta"))}}};function A(T,e,a,i){i=i||y.identity,Array.isArray(T)&&(e[0][a]=i(T))}},{"../../lib":515,"../../registry":647}],400:[function(t,N,V){var y=t("../../registry"),c=t("./hover").hover;N.exports=function(T,e,a){var i=y.getComponentMethod("annotations","onClick")(T,T._hoverdata);a!==void 0&&c(T,e,a,!0);function n(){T.emit("plotly_click",{points:T._hoverdata,event:e})}T._hoverdata&&e&&e.target&&(i&&i.then?i.then(n):n(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(t,N,V){N.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("./hoverlabel_defaults");N.exports=function(e,a,i,n){function r(s,o){return y.coerce(e,a,c,s,o)}var v=y.extendFlat({},n.hoverlabel);a.hovertemplate&&(v.namelength=-1),A(e,a,r,v)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(t,N,V){var y=t("../../lib");V.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},V.isTraceInSubplots=function(i,n){if(i.type==="splom"){for(var r=i.xaxes||[],v=i.yaxes||[],s=0;s<r.length;s++)for(var o=0;o<v.length;o++)if(n.indexOf(r[s]+v[o])!==-1)return!0;return!1}return n.indexOf(V.getSubplot(i))!==-1},V.flat=function(i,n){for(var r=new Array(i.length),v=0;v<i.length;v++)r[v]=n;return r},V.p2c=function(i,n){for(var r=new Array(i.length),v=0;v<i.length;v++)r[v]=i[v].p2c(n);return r},V.getDistanceFunction=function(i,n,r,v){return i==="closest"?v||V.quadrature(n,r):i.charAt(0)==="x"?n:r},V.getClosest=function(i,n,r){if(r.index!==!1)r.index>=0&&r.index<i.length?r.distance=0:r.index=!1;else for(var v=0;v<i.length;v++){var s=n(i[v]);s<=r.distance&&(r.index=v,r.distance=s)}return r},V.inbox=function(i,n,r){return i*n<0||i===0?r:1/0},V.quadrature=function(i,n){return function(r){var v=i(r),s=n(r);return Math.sqrt(v*v+s*s)}},V.makeEventData=function(i,n,r){var v="index"in i?i.index:i.pointNumber,s={data:n._input,fullData:n,curveNumber:n.index,pointNumber:v};if(n._indexToPoints){var o=n._indexToPoints[v];o.length===1?s.pointIndex=o[0]:s.pointIndices=o}else s.pointIndex=v;return n._module.eventData?s=n._module.eventData(s,i,n,r,v):("xVal"in i?s.x=i.xVal:"x"in i&&(s.x=i.x),"yVal"in i?s.y=i.yVal:"y"in i&&(s.y=i.y),i.xa&&(s.xaxis=i.xa),i.ya&&(s.yaxis=i.ya),i.zLabelVal!==void 0&&(s.z=i.zLabelVal)),V.appendArrayPointValue(s,n,v),s},V.appendArrayPointValue=function(i,n,r){var v=n._arrayAttrs;if(!!v)for(var s=0;s<v.length;s++){var o=v[s],b=A(o);if(i[b]===void 0){var g=y.nestedProperty(n,o).get(),d=T(g,r);d!==void 0&&(i[b]=d)}}},V.appendArrayMultiPointValues=function(i,n,r){var v=n._arrayAttrs;if(!!v)for(var s=0;s<v.length;s++){var o=v[s],b=A(o);if(i[b]===void 0){for(var g=y.nestedProperty(n,o).get(),d=new Array(r.length),f=0;f<r.length;f++)d[f]=T(g,r[f]);i[b]=d}}};var c={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function A(i){return c[i]||i}function T(i,n){if(Array.isArray(n)){if(Array.isArray(i)&&Array.isArray(i[n[0]]))return i[n[0]][n[1]]}else return i[n]}var e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};V.isUnifiedHover=function(i){return typeof i!="string"?!1:!!a[i]},V.isXYhover=function(i){return typeof i!="string"?!1:!!e[i]}},{"../../lib":515}],404:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("tinycolor2"),T=t("../../lib"),e=T.strTranslate,a=T.strRotate,i=t("../../lib/events"),n=t("../../lib/svg_text_utils"),r=t("../../lib/override_cursor"),v=t("../drawing"),s=t("../color"),o=t("../dragelement"),b=t("../../plots/cartesian/axes"),g=t("../../registry"),d=t("./helpers"),f=t("./constants"),m=t("../legend/defaults"),l=t("../legend/draw"),x=f.YANGLE,u=Math.PI*x/180,M=1/Math.sin(u),w=Math.cos(u),p=Math.sin(u),_=f.HOVERARROWSIZE,h=f.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};V.hover=function(H,q,re,Z){H=T.getGraphDiv(H);var Q=q.target;T.throttle(H._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){S(H,q,re,Z,Q)})},V.loneHover=function(H,q){var re=!0;Array.isArray(H)||(re=!1,H=[H]);var Z=q.gd,Q=he(Z),ie=K(Z),oe=H.map(function(be){var ke=be._x0||be.x0||be.x||0,De=be._x1||be.x1||be.x||0,He=be._y0||be.y0||be.y||0,Ae=be._y1||be.y1||be.y||0,Le=be.eventData;if(Le){var Ze=Math.min(ke,De),We=Math.max(ke,De),ze=Math.min(He,Ae),Ie=Math.max(He,Ae),Ve=be.trace;if(g.traceIs(Ve,"gl3d")){var dt=Z._fullLayout[Ve.scene]._scene.container,Ft=dt.offsetLeft,Qt=dt.offsetTop;Ze+=Ft,We+=Ft,ze+=Qt,Ie+=Qt}Le.bbox={x0:Ze+ie,x1:We+ie,y0:ze+Q,y1:Ie+Q},q.inOut_bbox&&q.inOut_bbox.push(Le.bbox)}else Le=!1;return{color:be.color||s.defaultLine,x0:be.x0||be.x||0,x1:be.x1||be.x||0,y0:be.y0||be.y||0,y1:be.y1||be.y||0,xLabel:be.xLabel,yLabel:be.yLabel,zLabel:be.zLabel,text:be.text,name:be.name,idealAlign:be.idealAlign,borderColor:be.borderColor,fontFamily:be.fontFamily,fontSize:be.fontSize,fontColor:be.fontColor,nameLength:be.nameLength,textAlign:be.textAlign,trace:be.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:be.hovertemplate||!1,hovertemplateLabels:be.hovertemplateLabels||!1,eventData:Le}}),ne=!1,le=I(oe,{gd:Z,hovermode:"closest",rotateLabels:ne,bgColor:q.bgColor||s.background,container:y.select(q.container),outerContainer:q.outerContainer||q.container}),_e=5,fe=0,ye=0;le.sort(function(be,ke){return be.y0-ke.y0}).each(function(be,ke){var De=be.y0-be.by/2;De-_e<fe?be.offset=fe-De+_e:be.offset=0,fe=De+be.by+be.offset,ke===q.anchorIndex&&(ye=be.offset)}).each(function(be){be.offset-=ye});var xe=Z._fullLayout._invScaleX,me=Z._fullLayout._invScaleY;return O(le,ne,xe,me),re?le:le.node()};function S(U,H,q,re,Z){q||(q="xy");var Q=Array.isArray(q)?q:[q],ie=U._fullLayout,oe=ie._plots||[],ne=oe[q],le=ie._has("cartesian");if(ne){var _e=ne.overlays.map(function(ur){return ur.id});Q=Q.concat(_e)}for(var fe=Q.length,ye=new Array(fe),xe=new Array(fe),me=!1,be=0;be<fe;be++){var ke=Q[be];if(oe[ke])me=!0,ye[be]=oe[ke].xaxis,xe[be]=oe[ke].yaxis;else if(ie[ke]&&ie[ke]._subplot){var De=ie[ke]._subplot;ye[be]=De.xaxis,xe[be]=De.yaxis}else{T.warn("Unrecognized subplot: "+ke);return}}var He=H.hovermode||ie.hovermode;if(He&&!me&&(He="closest"),["x","y","closest","x unified","y unified"].indexOf(He)===-1||!U.calcdata||U.querySelector(".zoombox")||U._dragging)return o.unhoverRaw(U,H);var Ae=ie.hoverdistance;Ae===-1&&(Ae=1/0);var Le=ie.spikedistance;Le===-1&&(Le=1/0);var Ze=[],We=[],ze,Ie,Ve,dt,Ft,Qt,Ot,Ct,jt,Nt,Lt,Xe,it,Ye={hLinePoint:null,vLinePoint:null},Ee=!1;if(Array.isArray(H))for(He="array",Ve=0;Ve<H.length;Ve++)Ft=U.calcdata[H[Ve].curveNumber||0],Ft&&(Qt=Ft[0].trace,Ft[0].trace.hoverinfo!=="skip"&&(We.push(Ft),Qt.orientation==="h"&&(Ee=!0)));else{for(dt=0;dt<U.calcdata.length;dt++)Ft=U.calcdata[dt],Qt=Ft[0].trace,Qt.hoverinfo!=="skip"&&d.isTraceInSubplots(Qt,Q)&&(We.push(Ft),Qt.orientation==="h"&&(Ee=!0));var Ge=!Z,Ke,qe;if(Ge)"xpx"in H?Ke=H.xpx:Ke=ye[0]._length/2,"ypx"in H?qe=H.ypx:qe=xe[0]._length/2;else{if(i.triggerHandler(U,"plotly_beforehover",H)===!1)return;var At=Z.getBoundingClientRect();Ke=H.clientX-At.left,qe=H.clientY-At.top,ie._calcInverseTransform(U);var mt=T.apply3DTransform(ie._invTransform)(Ke,qe);if(Ke=mt[0],qe=mt[1],Ke<0||Ke>ye[0]._length||qe<0||qe>xe[0]._length)return o.unhoverRaw(U,H)}if(H.pointerX=Ke+ye[0]._offset,H.pointerY=qe+xe[0]._offset,"xval"in H?ze=d.flat(Q,H.xval):ze=d.p2c(ye,Ke),"yval"in H?Ie=d.flat(Q,H.yval):Ie=d.p2c(xe,qe),!c(ze[0])||!c(Ie[0]))return T.warn("Fx.hover failed",H,U),o.unhoverRaw(U,H)}var Mt=1/0;function Gt(ur,Nr){for(dt=0;dt<We.length;dt++)if(Ft=We[dt],!(!Ft||!Ft[0]||!Ft[0].trace)&&(Qt=Ft[0].trace,!(Qt.visible!==!0||Qt._length===0)&&["carpet","contourcarpet"].indexOf(Qt._module.name)===-1)){if(Qt.type==="splom"?(Ct=0,Ot=Q[Ct]):(Ot=d.getSubplot(Qt),Ct=Q.indexOf(Ot)),jt=He,d.isUnifiedHover(jt)&&(jt=jt.charAt(0)),Xe={cd:Ft,trace:Qt,xa:ye[Ct],ya:xe[Ct],maxHoverDistance:Ae,maxSpikeDistance:Le,index:!1,distance:Math.min(Mt,Ae),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:Qt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[Ot]&&(Xe.subplot=ie[Ot]._subplot),ie._splomScenes&&ie._splomScenes[Qt.uid]&&(Xe.scene=ie._splomScenes[Qt.uid]),it=Ze.length,jt==="array"){var Vr=H[dt];"pointNumber"in Vr?(Xe.index=Vr.pointNumber,jt="closest"):(jt="","xval"in Vr&&(Nt=Vr.xval,jt="x"),"yval"in Vr&&(Lt=Vr.yval,jt=jt?"closest":"y"))}else ur!==void 0&&Nr!==void 0?(Nt=ur,Lt=Nr):(Nt=ze[Ct],Lt=Ie[Ct]);if(Ae!==0)if(Qt._module&&Qt._module.hoverPoints){var Dr=Qt._module.hoverPoints(Xe,Nt,Lt,jt,{finiteRange:!0,hoverLayer:ie._hoverlayer});if(Dr)for(var Mr,jr=0;jr<Dr.length;jr++)Mr=Dr[jr],c(Mr.x0)&&c(Mr.y0)&&Ze.push(z(Mr,He))}else T.log("Unrecognized trace type in hover:",Qt);if(He==="closest"&&Ze.length>it&&(Ze.splice(0,it),Mt=Ze[0].distance),le&&Le!==0&&Ze.length===0){Xe.distance=Le,Xe.index=!1;var kn=Qt._module.hoverPoints(Xe,Nt,Lt,"closest",{hoverLayer:ie._hoverlayer});if(kn&&(kn=kn.filter(function(ya){return ya.spikeDistance<=Le})),kn&&kn.length){var yn,Wn=kn.filter(function(ya){return ya.xa.showspikes&&ya.xa.spikesnap!=="hovered data"});if(Wn.length){var In=Wn[0];c(In.x0)&&c(In.y0)&&(yn=Ht(In),(!Ye.vLinePoint||Ye.vLinePoint.spikeDistance>yn.spikeDistance)&&(Ye.vLinePoint=yn))}var $n=kn.filter(function(ya){return ya.ya.showspikes&&ya.ya.spikesnap!=="hovered data"});if($n.length){var Kn=$n[0];c(Kn.x0)&&c(Kn.y0)&&(yn=Ht(Kn),(!Ye.hLinePoint||Ye.hLinePoint.spikeDistance>yn.spikeDistance)&&(Ye.hLinePoint=yn))}}}}}Gt();function zt(ur,Nr,Vr){for(var Dr=null,Mr=1/0,jr,kn=0;kn<ur.length;kn++)jr=ur[kn].spikeDistance,Vr&&kn===0&&(jr=-1/0),jr<=Mr&&jr<=Nr&&(Dr=ur[kn],Mr=jr);return Dr}function Ht(ur){return ur?{xa:ur.xa,ya:ur.ya,x:ur.xSpike!==void 0?ur.xSpike:(ur.x0+ur.x1)/2,y:ur.ySpike!==void 0?ur.ySpike:(ur.y0+ur.y1)/2,distance:ur.distance,spikeDistance:ur.spikeDistance,curveNumber:ur.trace.index,color:ur.color,pointNumber:ur.index}:null}var Zt={fullLayout:ie,container:ie._hoverlayer,event:H},Wt=U._spikepoints,sr={vLinePoint:Ye.vLinePoint,hLinePoint:Ye.hLinePoint};U._spikepoints=sr;var Gr=function(){Ze.sort(function(ur,Nr){return ur.distance-Nr.distance}),Ze=X(Ze,He)};Gr();var cn=He.charAt(0),qr=(cn==="x"||cn==="y")&&Ze[0]&&E[Ze[0].trace.type];if(le&&Le!==0&&Ze.length!==0){var st=Ze.filter(function(ur){return ur.ya.showspikes}),rr=zt(st,Le,qr);Ye.hLinePoint=Ht(rr);var $t=Ze.filter(function(ur){return ur.xa.showspikes}),hr=zt($t,Le,qr);Ye.vLinePoint=Ht(hr)}if(Ze.length===0){var Sr=o.unhoverRaw(U,H);return le&&(Ye.hLinePoint!==null||Ye.vLinePoint!==null)&&ee(Wt)&&G(U,Ye,Zt),Sr}if(le&&ee(Wt)&&G(U,Ye,Zt),d.isXYhover(jt)&&Ze[0].length!==0&&Ze[0].trace.type!=="splom"){var tt=Ze[0];L[tt.trace.type]?Ze=Ze.filter(function(ur){return ur.trace.index===tt.trace.index}):Ze=[tt];var Qe=Ze.length,lt=ae("x",tt,ie),ft=ae("y",tt,ie);Gt(lt,ft);var Et=[],Vt={},Pe=0,Se=function(ur){var Nr=L[ur.trace.type]?P(ur):ur.trace.index;if(!Vt[Nr])Pe++,Vt[Nr]=Pe,Et.push(ur);else{var Vr=Vt[Nr]-1,Dr=Et[Vr];Vr>0&&Math.abs(ur.distance)<Math.abs(Dr.distance)&&(Et[Vr]=ur)}},ot;for(ot=0;ot<Qe;ot++)Se(Ze[ot]);for(ot=Ze.length-1;ot>Qe-1;ot--)Se(Ze[ot]);Ze=Et,Gr()}var ct=U._hoverdata,pt=[],St=he(U),xt=K(U);for(Ve=0;Ve<Ze.length;Ve++){var Pt=Ze[Ve],Xt=d.makeEventData(Pt,Pt.trace,Pt.cd);if(Pt.hovertemplate!==!1){var or=!1;Pt.cd[Pt.index]&&Pt.cd[Pt.index].ht&&(or=Pt.cd[Pt.index].ht),Pt.hovertemplate=or||Pt.trace.hovertemplate||!1}if(Pt.xa&&Pt.ya){var Pr=Pt.x0+Pt.xa._offset,Ar=Pt.x1+Pt.xa._offset,Er=Pt.y0+Pt.ya._offset,Jr=Pt.y1+Pt.ya._offset,lr=Math.min(Pr,Ar),br=Math.max(Pr,Ar),Fr=Math.min(Er,Jr),Hr=Math.max(Er,Jr);Xt.bbox={x0:lr+xt,x1:br+xt,y0:Fr+St,y1:Hr+St}}Pt.eventData=[Xt],pt.push(Xt)}U._hoverdata=pt;var Lr=He==="y"&&(We.length>1||Ze.length>1)||He==="closest"&&Ee&&Ze.length>1,at=s.combine(ie.plot_bgcolor||s.background,ie.paper_bgcolor),Rt=I(Ze,{gd:U,hovermode:He,rotateLabels:Lr,bgColor:at,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance});if(d.isUnifiedHover(He)||(R(Rt,Lr?"xa":"ya",ie),O(Rt,Lr,ie._invScaleX,ie._invScaleY)),Z&&Z.tagName){var Kt=g.getComponentMethod("annotations","hasClickToShow")(U,pt);r(y.select(Z),Kt?"pointer":"")}!Z||re||!Y(U,H,ct)||(ct&&U.emit("plotly_unhover",{event:H,points:ct}),U.emit("plotly_hover",{event:H,points:U._hoverdata,xaxes:ye,yaxes:xe,xvals:ze,yvals:Ie}))}function P(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}var F=/<extra>([\s\S]*)<\/extra>/;function I(U,H){var q=H.gd,re=q._fullLayout,Z=H.hovermode,Q=H.rotateLabels,ie=H.bgColor,oe=H.container,ne=H.outerContainer,le=H.commonLabelOpts||{};if(U.length===0)return[[]];var _e=H.fontFamily||f.HOVERFONT,fe=H.fontSize||f.HOVERFONTSIZE,ye=U[0],xe=ye.xa,me=ye.ya,be=Z.charAt(0),ke=be+"Label",De=ye[ke];if(De===void 0&&xe.type==="multicategory")for(var He=0;He<U.length&&(De=U[He][ke],De===void 0);He++);var Ae=J(q,ne),Le=Ae.top,Ze=Ae.width,We=Ae.height,ze=De!==void 0&&ye.distance<=H.hoverdistance&&(Z==="x"||Z==="y");if(ze){var Ie=!0,Ve,dt;for(Ve=0;Ve<U.length;Ve++)if(Ie&&U[Ve].zLabel===void 0&&(Ie=!1),dt=U[Ve].hoverinfo||U[Ve].trace.hoverinfo,dt){var Ft=Array.isArray(dt)?dt:dt.split("+");if(Ft.indexOf("all")===-1&&Ft.indexOf(Z)===-1){ze=!1;break}}Ie&&(ze=!1)}var Qt=oe.selectAll("g.axistext").data(ze?[0]:[]);if(Qt.enter().append("g").classed("axistext",!0),Qt.exit().remove(),Qt.each(function(){var tt=y.select(this),Qe=T.ensureSingle(tt,"path","",function(br){br.style({"stroke-width":"1px"})}),lt=T.ensureSingle(tt,"text","",function(br){br.attr("data-notex",1)}),ft=le.bgcolor||s.defaultLine,Et=le.bordercolor||s.contrast(ft),Vt=s.contrast(ft),Pe={family:le.font.family||_e,size:le.font.size||fe,color:le.font.color||Vt};Qe.style({fill:ft,stroke:Et}),lt.text(De).call(v.font,Pe).call(n.positionText,0,0).call(n.convertToTspans,q),tt.attr("transform","");var Se=J(q,lt.node()),ot,ct;if(Z==="x"){var pt=xe.side==="top"?"-":"";lt.attr("text-anchor","middle").call(n.positionText,0,xe.side==="top"?Le-Se.bottom-_-h:Le-Se.top+_+h),ot=xe._offset+(ye.x0+ye.x1)/2,ct=me._offset+(xe.side==="top"?0:me._length);var St=Se.width/2+h;ot<St?(ot=St,Qe.attr("d","M-"+(St-_)+",0L-"+(St-_*2)+","+pt+_+"H"+(h+Se.width/2)+"v"+pt+(h*2+Se.height)+"H-"+St+"V"+pt+_+"Z")):ot>re.width-St?(ot=re.width-St,Qe.attr("d","M"+(St-_)+",0L"+St+","+pt+_+"v"+pt+(h*2+Se.height)+"H-"+St+"V"+pt+_+"H"+(St-_*2)+"Z")):Qe.attr("d","M0,0L"+_+","+pt+_+"H"+(h+Se.width/2)+"v"+pt+(h*2+Se.height)+"H-"+(h+Se.width/2)+"V"+pt+_+"H-"+_+"Z")}else{var xt,Pt,Xt;me.side==="right"?(xt="start",Pt=1,Xt="",ot=xe._offset+xe._length):(xt="end",Pt=-1,Xt="-",ot=xe._offset),ct=me._offset+(ye.y0+ye.y1)/2,lt.attr("text-anchor",xt),Qe.attr("d","M0,0L"+Xt+_+","+_+"V"+(h+Se.height/2)+"h"+Xt+(h*2+Se.width)+"V-"+(h+Se.height/2)+"H"+Xt+_+"V-"+_+"Z");var or=Se.height/2,Pr=Le-Se.top-or,Ar="clip"+re._uid+"commonlabel"+me._id,Er;if(ot<Se.width+2*h+_){Er="M-"+(_+h)+"-"+or+"h-"+(Se.width-h)+"V"+or+"h"+(Se.width-h)+"Z";var Jr=Se.width-ot+h;n.positionText(lt,Jr,Pr),xt==="end"&&lt.selectAll("tspan").each(function(){var br=y.select(this),Fr=v.tester.append("text").text(br.text()).call(v.font,Pe),Hr=J(q,Fr.node());Math.round(Hr.width)<Math.round(Se.width)&&br.attr("x",Jr-Hr.width),Fr.remove()})}else n.positionText(lt,Pt*(h+_),Pr),Er=null;var lr=re._topclips.selectAll("#"+Ar).data(Er?[0]:[]);lr.enter().append("clipPath").attr("id",Ar).append("path"),lr.exit().remove(),lr.select("path").attr("d",Er),v.setClipUrl(lt,Er?Ar:null,q)}tt.attr("transform",e(ot,ct))}),d.isUnifiedHover(Z)){oe.selectAll("g.hovertext").remove();var Ot=U.filter(function(tt){return tt.hoverinfo!=="none"});if(Ot.length===0)return;var Ct=re.hoverlabel,jt=Ct.font,Nt={showlegend:!0,legend:{title:{text:De,font:jt},font:jt,bgcolor:Ct.bgcolor,bordercolor:Ct.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:re.legend?re.legend.traceorder:void 0,orientation:"v"}},Lt={font:jt};m(Nt,Lt,q._fullData);var Xe=Lt.legend;Xe.entries=[];for(var it=0;it<Ot.length;it++){var Ye=Ot[it];if(Ye.hoverinfo!=="none"){var Ee=D(Ye,!0,Z,re,De),Ge=Ee[0],Ke=Ee[1];Ye.name=Ke,Ke!==""?Ye.text=Ke+" : "+Ge:Ye.text=Ge;var qe=Ye.cd[Ye.index];qe&&(qe.mc&&(Ye.mc=qe.mc),qe.mcc&&(Ye.mc=qe.mcc),qe.mlc&&(Ye.mlc=qe.mlc),qe.mlcc&&(Ye.mlc=qe.mlcc),qe.mlw&&(Ye.mlw=qe.mlw),qe.mrc&&(Ye.mrc=qe.mrc),qe.dir&&(Ye.dir=qe.dir)),Ye._distinct=!0,Xe.entries.push([Ye])}}Xe.entries.sort(function(tt,Qe){return tt[0].trace.index-Qe[0].trace.index}),Xe.layer=oe,Xe._inHover=!0,Xe._groupTitleFont=Ct.grouptitlefont,l(q,Xe);var At=oe.select("g.legend"),mt=J(q,At.node()),Mt=mt.width+2*h,Gt=mt.height+2*h,zt=Ot[0],Ht=(zt.x0+zt.x1)/2,Zt=(zt.y0+zt.y1)/2,Wt=!(g.traceIs(zt.trace,"bar-like")||g.traceIs(zt.trace,"box-violin")),sr,Gr;be==="y"?Wt?(Gr=Zt-h,sr=Zt+h):(Gr=Math.min.apply(null,Ot.map(function(tt){return Math.min(tt.y0,tt.y1)})),sr=Math.max.apply(null,Ot.map(function(tt){return Math.max(tt.y0,tt.y1)}))):Gr=sr=T.mean(Ot.map(function(tt){return(tt.y0+tt.y1)/2}))-Gt/2;var cn,qr;be==="x"?Wt?(cn=Ht+h,qr=Ht-h):(cn=Math.max.apply(null,Ot.map(function(tt){return Math.max(tt.x0,tt.x1)})),qr=Math.min.apply(null,Ot.map(function(tt){return Math.min(tt.x0,tt.x1)}))):cn=qr=T.mean(Ot.map(function(tt){return(tt.x0+tt.x1)/2}))-Mt/2;var st=xe._offset,rr=me._offset;sr+=rr,cn+=st,qr+=st-Mt,Gr+=rr-Gt;var $t,hr;return cn+Mt<Ze&&cn>=0?$t=cn:qr+Mt<Ze&&qr>=0?$t=qr:st+Mt<Ze?$t=st:cn-Ht<Ht-qr+Mt?$t=Ze-Mt:$t=0,$t+=h,sr+Gt<We&&sr>=0?hr=sr:Gr+Gt<We&&Gr>=0?hr=Gr:rr+Gt<We?hr=rr:sr-Zt<Zt-Gr+Gt?hr=We-Gt:hr=0,hr+=h,At.attr("transform",e($t-1,hr-1)),At}var Sr=oe.selectAll("g.hovertext").data(U,function(tt){return P(tt)});return Sr.enter().append("g").classed("hovertext",!0).each(function(){var tt=y.select(this);tt.append("rect").call(s.fill,s.addOpacity(ie,.8)),tt.append("text").classed("name",!0),tt.append("path").style("stroke-width","1px"),tt.append("text").classed("nums",!0).call(v.font,_e,fe)}),Sr.exit().remove(),Sr.each(function(tt){var Qe=y.select(this).attr("transform",""),lt=tt.color;Array.isArray(lt)&&(lt=lt[tt.eventData[0].pointNumber]);var ft=tt.bgcolor||lt,Et=s.combine(s.opacity(ft)?ft:s.defaultLine,ie),Vt=s.combine(s.opacity(lt)?lt:s.defaultLine,ie),Pe=tt.borderColor||s.contrast(Et),Se=D(tt,ze,Z,re,De,Qe),ot=Se[0],ct=Se[1],pt=Qe.select("text.nums").call(v.font,tt.fontFamily||_e,tt.fontSize||fe,tt.fontColor||Pe).text(ot).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q),St=Qe.select("text.name"),xt=0,Pt=0;if(ct&&ct!==ot){St.call(v.font,tt.fontFamily||_e,tt.fontSize||fe,Vt).text(ct).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q);var Xt=J(q,St.node());xt=Xt.width+2*h,Pt=Xt.height+2*h}else St.remove(),Qe.select("rect").remove();Qe.select("path").style({fill:Et,stroke:Pe});var or=tt.xa._offset+(tt.x0+tt.x1)/2,Pr=tt.ya._offset+(tt.y0+tt.y1)/2,Ar=Math.abs(tt.x1-tt.x0),Er=Math.abs(tt.y1-tt.y0),Jr=J(q,pt.node()),lr=Jr.width/re._invScaleX,br=Jr.height/re._invScaleY;tt.ty0=(Le-Jr.top)/re._invScaleY,tt.bx=lr+2*h,tt.by=Math.max(br+2*h,Pt),tt.anchor="start",tt.txwidth=lr,tt.tx2width=xt,tt.offset=0;var Fr=(lr+_+h+xt)*re._invScaleX,Hr,Lr;if(Q)tt.pos=or,Hr=Pr+Er/2+Fr<=We,Lr=Pr-Er/2-Fr>=0,(tt.idealAlign==="top"||!Hr)&&Lr?(Pr-=Er/2,tt.anchor="end"):Hr?(Pr+=Er/2,tt.anchor="start"):tt.anchor="middle";else if(tt.pos=Pr,Hr=or+Ar/2+Fr<=Ze,Lr=or-Ar/2-Fr>=0,(tt.idealAlign==="left"||!Hr)&&Lr)or-=Ar/2,tt.anchor="end";else if(Hr)or+=Ar/2,tt.anchor="start";else{tt.anchor="middle";var at=Fr/2,Rt=or+at-Ze,Kt=or-at;Rt>0&&(or-=Rt),Kt<0&&(or+=-Kt)}pt.attr("text-anchor",tt.anchor),xt&&St.attr("text-anchor",tt.anchor),Qe.attr("transform",e(or,Pr)+(Q?a(x):""))}),Sr}function D(U,H,q,re,Z,Q){var ie="",oe="";U.nameOverride!==void 0&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=T.templateString(U.name,U.trace._meta)),ie=j(U.name,U.nameLength));var ne=q.charAt(0),le=ne==="x"?"y":"x";U.zLabel!==void 0?(U.xLabel!==void 0&&(oe+="x: "+U.xLabel+"<br>"),U.yLabel!==void 0&&(oe+="y: "+U.yLabel+"<br>"),U.trace.type!=="choropleth"&&U.trace.type!=="choroplethmapbox"&&(oe+=(oe?"z: ":"")+U.zLabel)):H&&U[ne+"Label"]===Z?oe=U[le+"Label"]||"":U.xLabel===void 0?U.yLabel!==void 0&&U.trace.type!=="scattercarpet"&&(oe=U.yLabel):U.yLabel===void 0?oe=U.xLabel:oe="("+U.xLabel+", "+U.yLabel+")",(U.text||U.text===0)&&!Array.isArray(U.text)&&(oe+=(oe?"<br>":"")+U.text),U.extraText!==void 0&&(oe+=(oe?"<br>":"")+U.extraText),Q&&oe===""&&!U.hovertemplate&&(ie===""&&Q.remove(),oe=ie);var _e=U.hovertemplate||!1;if(_e){var fe=U.hovertemplateLabels||U;U[ne+"Label"]!==Z&&(fe[ne+"other"]=fe[ne+"Val"],fe[ne+"otherLabel"]=fe[ne+"Label"]),oe=T.hovertemplateString(_e,fe,re._d3locale,U.eventData[0]||{},U.trace._meta),oe=oe.replace(F,function(ye,xe){return ie=j(xe,U.nameLength),""})}return[oe,ie]}function R(U,H,q){var re=0,Z=1,Q=U.size(),ie=new Array(Q),oe=0;U.each(function(ze){var Ie=ze[H],Ve=Ie._id.charAt(0)==="x",dt=Ie.range;oe===0&&dt&&dt[0]>dt[1]!==Ve&&(Z=-1),ie[oe++]=[{datum:ze,traceIndex:ze.trace.index,dp:0,pos:ze.pos,posref:ze.posref,size:ze.by*(Ve?M:1)/2,pmin:0,pmax:Ve?q.width:q.height}]}),ie.sort(function(ze,Ie){return ze[0].posref-Ie[0].posref||Z*(Ie[0].traceIndex-ze[0].traceIndex)});var ne,le,_e,fe,ye,xe,me;function be(ze){var Ie=ze[0],Ve=ze[ze.length-1];if(le=Ie.pmin-Ie.pos-Ie.dp+Ie.size,_e=Ve.pos+Ve.dp+Ve.size-Ie.pmax,le>.01){for(ye=ze.length-1;ye>=0;ye--)ze[ye].dp+=le;ne=!1}if(!(_e<.01)){if(le<-.01){for(ye=ze.length-1;ye>=0;ye--)ze[ye].dp-=_e;ne=!1}if(!!ne){var dt=0;for(fe=0;fe<ze.length;fe++)xe=ze[fe],xe.pos+xe.dp+xe.size>Ie.pmax&&dt++;for(fe=ze.length-1;fe>=0&&!(dt<=0);fe--)xe=ze[fe],xe.pos>Ie.pmax-1&&(xe.del=!0,dt--);for(fe=0;fe<ze.length&&!(dt<=0);fe++)if(xe=ze[fe],xe.pos<Ie.pmin+1)for(xe.del=!0,dt--,_e=xe.size*2,ye=ze.length-1;ye>=0;ye--)ze[ye].dp-=_e;for(fe=ze.length-1;fe>=0&&!(dt<=0);fe--)xe=ze[fe],xe.pos+xe.dp+xe.size>Ie.pmax&&(xe.del=!0,dt--)}}}for(;!ne&&re<=Q;){for(re++,ne=!0,fe=0;fe<ie.length-1;){var ke=ie[fe],De=ie[fe+1],He=ke[ke.length-1],Ae=De[0];if(le=He.pos+He.dp+He.size-Ae.pos-Ae.dp+Ae.size,le>.01&&He.pmin===Ae.pmin&&He.pmax===Ae.pmax){for(ye=De.length-1;ye>=0;ye--)De[ye].dp+=le;for(ke.push.apply(ke,De),ie.splice(fe+1,1),me=0,ye=ke.length-1;ye>=0;ye--)me+=ke[ye].dp;for(_e=me/ke.length,ye=ke.length-1;ye>=0;ye--)ke[ye].dp-=_e;ne=!1}else fe++}ie.forEach(be)}for(fe=ie.length-1;fe>=0;fe--){var Le=ie[fe];for(ye=Le.length-1;ye>=0;ye--){var Ze=Le[ye],We=Ze.datum;We.offset=Ze.dp,We.del=Ze.del}}}function O(U,H,q,re){var Z=function(ie){return ie*q},Q=function(ie){return ie*re};U.each(function(ie){var oe=y.select(this);if(ie.del)return oe.remove();var ne=oe.select("text.nums"),le=ie.anchor,_e=le==="end"?-1:1,fe={start:1,end:-1,middle:0}[le],ye=fe*(_+h),xe=ye+fe*(ie.txwidth+h),me=0,be=ie.offset,ke=le==="middle";ke&&(ye-=ie.tx2width/2,xe+=ie.txwidth/2+h),H&&(be*=-p,me=ie.offset*w),oe.select("path").attr("d",ke?"M-"+Z(ie.bx/2+ie.tx2width/2)+","+Q(be-ie.by/2)+"h"+Z(ie.bx)+"v"+Q(ie.by)+"h-"+Z(ie.bx)+"Z":"M0,0L"+Z(_e*_+me)+","+Q(_+be)+"v"+Q(ie.by/2-_)+"h"+Z(_e*ie.bx)+"v-"+Q(ie.by)+"H"+Z(_e*_+me)+"V"+Q(be-_)+"Z");var De=me+ye,He=be+ie.ty0-ie.by/2+h,Ae=ie.textAlign||"auto";Ae!=="auto"&&(Ae==="left"&&le!=="start"?(ne.attr("text-anchor","start"),De=ke?-ie.bx/2-ie.tx2width/2+h:-ie.bx-h):Ae==="right"&&le!=="end"&&(ne.attr("text-anchor","end"),De=ke?ie.bx/2-ie.tx2width/2-h:ie.bx+h)),ne.call(n.positionText,Z(De),Q(He)),ie.tx2width&&(oe.select("text.name").call(n.positionText,Z(xe+fe*h+me),Q(be+ie.ty0-ie.by/2+h)),oe.select("rect").call(v.setRect,Z(xe+(fe-1)*ie.tx2width/2+me),Q(be-ie.by/2-1),Z(ie.tx2width),Q(ie.by+2)))})}function z(U,H){var q=U.index,re=U.trace||{},Z=U.cd[0],Q=U.cd[q]||{};function ie(ye){return ye||c(ye)&&ye===0}var oe=Array.isArray(q)?function(ye,xe){var me=T.castOption(Z,q,ye);return ie(me)?me:T.extractOption({},re,"",xe)}:function(ye,xe){return T.extractOption(Q,re,ye,xe)};function ne(ye,xe,me){var be=oe(xe,me);ie(be)&&(U[ye]=be)}if(ne("hoverinfo","hi","hoverinfo"),ne("bgcolor","hbg","hoverlabel.bgcolor"),ne("borderColor","hbc","hoverlabel.bordercolor"),ne("fontFamily","htf","hoverlabel.font.family"),ne("fontSize","hts","hoverlabel.font.size"),ne("fontColor","htc","hoverlabel.font.color"),ne("nameLength","hnl","hoverlabel.namelength"),ne("textAlign","hta","hoverlabel.align"),U.posref=H==="y"||H==="closest"&&re.orientation==="h"?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=T.constrain(U.x0,0,U.xa._length),U.x1=T.constrain(U.x1,0,U.xa._length),U.y0=T.constrain(U.y0,0,U.ya._length),U.y1=T.constrain(U.y1,0,U.ya._length),U.xLabelVal!==void 0&&(U.xLabel="xLabel"in U?U.xLabel:b.hoverLabelText(U.xa,U.xLabelVal,re.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),U.yLabelVal!==void 0&&(U.yLabel="yLabel"in U?U.yLabel:b.hoverLabelText(U.ya,U.yLabelVal,re.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),U.zLabelVal!==void 0&&U.zLabel===void 0&&(U.zLabel=String(U.zLabelVal)),!isNaN(U.xerr)&&!(U.xa.type==="log"&&U.xerr<=0)){var le=b.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xerrneg!==void 0?U.xLabel+=" +"+le+" / -"+b.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:U.xLabel+=" \xB1 "+le,H==="x"&&(U.distance+=1)}if(!isNaN(U.yerr)&&!(U.ya.type==="log"&&U.yerr<=0)){var _e=b.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yerrneg!==void 0?U.yLabel+=" +"+_e+" / -"+b.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:U.yLabel+=" \xB1 "+_e,H==="y"&&(U.distance+=1)}var fe=U.hoverinfo||U.trace.hoverinfo;return fe&&fe!=="all"&&(fe=Array.isArray(fe)?fe:fe.split("+"),fe.indexOf("x")===-1&&(U.xLabel=void 0),fe.indexOf("y")===-1&&(U.yLabel=void 0),fe.indexOf("z")===-1&&(U.zLabel=void 0),fe.indexOf("text")===-1&&(U.text=void 0),fe.indexOf("name")===-1&&(U.name=void 0)),U}function G(U,H,q){var re=q.container,Z=q.fullLayout,Q=Z._size,ie=q.event,oe=!!H.hLinePoint,ne=!!H.vLinePoint,le,_e;if(re.selectAll(".spikeline").remove(),!!(ne||oe)){var fe=s.combine(Z.plot_bgcolor,Z.paper_bgcolor);if(oe){var ye=H.hLinePoint,xe,me;le=ye&&ye.xa,_e=ye&&ye.ya;var be=_e.spikesnap;be==="cursor"?(xe=ie.pointerX,me=ie.pointerY):(xe=le._offset+ye.x,me=_e._offset+ye.y);var ke=A.readability(ye.color,fe)<1.5?s.contrast(fe):ye.color,De=_e.spikemode,He=_e.spikethickness,Ae=_e.spikecolor||ke,Le=b.getPxPosition(U,_e),Ze,We;if(De.indexOf("toaxis")!==-1||De.indexOf("across")!==-1){if(De.indexOf("toaxis")!==-1&&(Ze=Le,We=xe),De.indexOf("across")!==-1){var ze=_e._counterDomainMin,Ie=_e._counterDomainMax;_e.anchor==="free"&&(ze=Math.min(ze,_e.position),Ie=Math.max(Ie,_e.position)),Ze=Q.l+ze*Q.w,We=Q.l+Ie*Q.w}re.insert("line",":first-child").attr({x1:Ze,x2:We,y1:me,y2:me,"stroke-width":He,stroke:Ae,"stroke-dasharray":v.dashStyle(_e.spikedash,He)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Ze,x2:We,y1:me,y2:me,"stroke-width":He+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}De.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:Le+(_e.side!=="right"?He:-He),cy:me,r:He,fill:Ae}).classed("spikeline",!0)}if(ne){var Ve=H.vLinePoint,dt,Ft;le=Ve&&Ve.xa,_e=Ve&&Ve.ya;var Qt=le.spikesnap;Qt==="cursor"?(dt=ie.pointerX,Ft=ie.pointerY):(dt=le._offset+Ve.x,Ft=_e._offset+Ve.y);var Ot=A.readability(Ve.color,fe)<1.5?s.contrast(fe):Ve.color,Ct=le.spikemode,jt=le.spikethickness,Nt=le.spikecolor||Ot,Lt=b.getPxPosition(U,le),Xe,it;if(Ct.indexOf("toaxis")!==-1||Ct.indexOf("across")!==-1){if(Ct.indexOf("toaxis")!==-1&&(Xe=Lt,it=Ft),Ct.indexOf("across")!==-1){var Ye=le._counterDomainMin,Ee=le._counterDomainMax;le.anchor==="free"&&(Ye=Math.min(Ye,le.position),Ee=Math.max(Ee,le.position)),Xe=Q.t+(1-Ee)*Q.h,it=Q.t+(1-Ye)*Q.h}re.insert("line",":first-child").attr({x1:dt,x2:dt,y1:Xe,y2:it,"stroke-width":jt,stroke:Nt,"stroke-dasharray":v.dashStyle(le.spikedash,jt)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:dt,x2:dt,y1:Xe,y2:it,"stroke-width":jt+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}Ct.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:dt,cy:Lt-(le.side!=="top"?jt:-jt),r:jt,fill:Nt}).classed("spikeline",!0)}}}function Y(U,H,q){if(!q||q.length!==U._hoverdata.length)return!0;for(var re=q.length-1;re>=0;re--){var Z=q[re],Q=U._hoverdata[re];if(Z.curveNumber!==Q.curveNumber||String(Z.pointNumber)!==String(Q.pointNumber)||String(Z.pointNumbers)!==String(Q.pointNumbers))return!0}return!1}function ee(U,H){return!H||H.vLinePoint!==U._spikepoints.vLinePoint||H.hLinePoint!==U._spikepoints.hLinePoint}function j(U,H){return n.plainText(U||"",{len:H,allowedTags:["br","sub","sup","b","i","em"]})}function X(U,H){for(var q=H.charAt(0),re=[],Z=[],Q=[],ie=0;ie<U.length;ie++){var oe=U[ie];g.traceIs(oe.trace,"bar-like")||g.traceIs(oe.trace,"box-violin")?Q.push(oe):oe.trace[q+"period"]?Z.push(oe):re.push(oe)}return re.concat(Z).concat(Q)}function ae(U,H,q){var re=H[U+"a"],Z=H[U+"Val"],Q=H.cd[0];if(re.type==="category"||re.type==="multicategory")Z=re._categoriesMap[Z];else if(re.type==="date"){var ie=H.trace[U+"periodalignment"];if(ie){var oe=H.cd[H.index],ne=oe[U+"Start"];ne===void 0&&(ne=oe[U]);var le=oe[U+"End"];le===void 0&&(le=oe[U]);var _e=le-ne;ie==="end"?Z+=_e:ie==="middle"&&(Z+=_e/2)}Z=re.d2c(Z)}return Q&&Q.t&&Q.t.posLetter===re._id&&(q.boxmode==="group"||q.violinmode==="group")&&(Z+=Q.t.dPos),Z}function he(U){return U.offsetTop+U.clientTop}function K(U){return U.offsetLeft+U.clientLeft}function J(U,H){var q=U._fullLayout,re=H.getBoundingClientRect(),Z=re.x,Q=re.y,ie=Z+re.width,oe=Q+re.height,ne=T.apply3DTransform(q._invTransform)(Z,Q),le=T.apply3DTransform(q._invTransform)(ie,oe),_e=ne[0],fe=ne[1],ye=le[0],xe=le[1];return{x:_e,y:fe,width:ye-_e,height:xe-fe,top:Math.min(fe,xe),left:Math.min(_e,ye),right:Math.max(_e,ye),bottom:Math.max(fe,xe)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(t,N,V){var y=t("../../lib"),c=t("../color"),A=t("./helpers").isUnifiedHover;N.exports=function(e,a,i,n){n=n||{};var r=a.legend;function v(s){n.font[s]||(n.font[s]=r?a.legend.font[s]:a.font[s])}a&&A(a.hovermode)&&(n.font||(n.font={}),v("size"),v("family"),v("color"),r?(n.bgcolor||(n.bgcolor=c.combine(a.legend.bgcolor,a.paper_bgcolor)),n.bordercolor||(n.bordercolor=a.legend.bordercolor)):n.bgcolor||(n.bgcolor=a.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),y.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return e[i]!==void 0?e[i]:y.coerce(T,e,c,i,n)}return a("clickmode"),a("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../dragelement"),T=t("./helpers"),e=t("./layout_attributes"),a=t("./hover");N.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:e},attributes:t("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:n,castHoverinfo:r,hover:a.hover,unhover:A.unhover,loneHover:a.loneHover,loneUnhover:i,click:t("./click")};function i(v){var s=c.isD3Selection(v)?v:y.select(v);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function n(v,s,o){return c.castOption(v,s,"hoverlabel."+o)}function r(v,s,o){function b(g){return c.coerceHoverinfo({hoverinfo:g},{_module:v._module},s)}return c.castOption(v,o,"hoverinfo",b)}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(t,N,V){var y=t("./constants"),c=t("../../plots/font_attributes"),A=c({editType:"none"});A.family.dflt=y.HOVERFONT,A.size.dflt=y.HOVERFONTSIZE,N.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:A,grouptitlefont:c({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes"),A=t("./hovermode_defaults"),T=t("./hoverlabel_defaults");N.exports=function(a,i){function n(g,d){return y.coerce(a,i,c,g,d)}var r=A(a,i);r&&(n("hoverdistance"),n("spikedistance"));var v=n("dragmode");v==="select"&&n("selectdirection");var s=i._has("mapbox"),o=i._has("geo"),b=i._basePlotModules.length;i.dragmode==="zoom"&&((s||o)&&b===1||s&&o&&b===2)&&(i.dragmode="pan"),T(a,i,n),y.coerceFont(n,"hoverlabel.grouptitlefont",i.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(t,N,V){var y=t("../../lib"),c=t("./hoverlabel_defaults"),A=t("./layout_attributes");N.exports=function(e,a){function i(n,r){return y.coerce(e,a,A,n,r)}c(e,a,i)}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(t,N,V){var y=t("../../lib"),c=t("../../lib/regex").counter,A=t("../../plots/domain").attributes,T=t("../../plots/cartesian/constants").idRegex,e=t("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[c("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:A({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function i(o,b,g){var d=b[g+"axes"],f=Object.keys((o._splomAxes||{})[g]||{});if(Array.isArray(d))return d;if(f.length)return f}function n(o,b){var g=o.grid||{},d=i(b,g,"x"),f=i(b,g,"y");if(!o.grid&&!d&&!f)return;var m=Array.isArray(g.subplots)&&Array.isArray(g.subplots[0]),l=Array.isArray(d),x=Array.isArray(f),u=l&&d!==g.xaxes&&x&&f!==g.yaxes,M,w;m?(M=g.subplots.length,w=g.subplots[0].length):(x&&(M=f.length),l&&(w=d.length));var p=e.newContainer(b,"grid");function _(O,z){return y.coerce(g,p,a,O,z)}var h=_("rows",M),L=_("columns",w);if(!(h*L>1)){delete b.grid;return}if(!m&&!l&&!x){var E=_("pattern")==="independent";E&&(m=!0)}p._hasSubplotGrid=m;var S=_("roworder"),P=S==="top to bottom",F=m?.2:.1,I=m?.3:.1,D,R;u&&b._splomGridDflt&&(D=b._splomGridDflt.xside,R=b._splomGridDflt.yside),p._domains={x:r("x",_,F,D,L),y:r("y",_,I,R,h,P)}}function r(o,b,g,d,f,m){var l=b(o+"gap",g),x=b("domain."+o);b(o+"side",d);for(var u=new Array(f),M=x[0],w=(x[1]-M)/(f-l),p=w*(1-l),_=0;_<f;_++){var h=M+w*_;u[m?f-1-_:_]=[h,h+p]}return u}function v(o,b){var g=b.grid;if(!(!g||!g._domains)){var d=o.grid||{},f=b._subplots,m=g._hasSubplotGrid,l=g.rows,x=g.columns,u=g.pattern==="independent",M,w,p,_,h,L,E,S=g._axisMap={};if(m){var P=d.subplots||[];L=g.subplots=new Array(l);var F=1;for(M=0;M<l;M++){var I=L[M]=new Array(x),D=P[M]||[];for(w=0;w<x;w++)if(u?(h=F===1?"xy":"x"+F+"y"+F,F++):h=D[w],I[w]="",f.cartesian.indexOf(h)!==-1){if(E=h.indexOf("y"),p=h.slice(0,E),_=h.slice(E),S[p]!==void 0&&S[p]!==w||S[_]!==void 0&&S[_]!==M)continue;I[w]=h,S[p]=w,S[_]=M}}}else{var R=i(b,d,"x"),O=i(b,d,"y");g.xaxes=s(R,f.xaxis,x,S,"x"),g.yaxes=s(O,f.yaxis,l,S,"y")}var z=g._anchors={},G=g.roworder==="top to bottom";for(var Y in S){var ee=Y.charAt(0),j=g[ee+"side"],X,ae,he;if(j.length<8)z[Y]="free";else if(ee==="x"){if(j.charAt(0)==="t"===G?(X=0,ae=1,he=l):(X=l-1,ae=-1,he=-1),m){var K=S[Y];for(M=X;M!==he;M+=ae)if(h=L[M][K],!!h&&(E=h.indexOf("y"),h.slice(0,E)===Y)){z[Y]=h.slice(E);break}}else for(M=X;M!==he;M+=ae)if(_=g.yaxes[M],f.cartesian.indexOf(Y+_)!==-1){z[Y]=_;break}}else if(j.charAt(0)==="l"?(X=0,ae=1,he=x):(X=x-1,ae=-1,he=-1),m){var J=S[Y];for(M=X;M!==he;M+=ae)if(h=L[J][M],!!h&&(E=h.indexOf("y"),h.slice(E)===Y)){z[Y]=h.slice(0,E);break}}else for(M=X;M!==he;M+=ae)if(p=g.xaxes[M],f.cartesian.indexOf(p+Y)!==-1){z[Y]=p;break}}}}function s(o,b,g,d,f){var m=new Array(g),l;function x(u,M){b.indexOf(M)!==-1&&d[M]===void 0?(m[u]=M,d[M]=u):m[u]=""}if(Array.isArray(o))for(l=0;l<g;l++)x(l,o[l]);else for(x(0,f),l=1;l<g;l++)x(l,f+(l+1));return m}N.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:n,contentDefaults:v}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(t,N,V){var y=t("../../plots/cartesian/constants"),c=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),N.exports=c("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",y.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",y.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib/to_log_range");N.exports=function(T,e,a,i){e=e||{};var n=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!!(n||r)){for(var v=T._fullLayout.images,s=e._id.charAt(0),o,b,g=0;g<v.length;g++)if(o=v[g],b="images["+g+"].",o[s+"ref"]===e._id){var d=o[s],f=o["size"+s],m=null,l=null;if(n){m=c(d,e.range);var x=f/Math.pow(10,m)/2;l=2*Math.log(x+Math.sqrt(1+x*x))/Math.LN10}else m=Math.pow(10,d),l=m*(Math.pow(10,f/2)-Math.pow(10,-f/2));y(m)?y(l)||(l=null):(m=null,l=null),i(b+s,m),i(b+"size"+s,l)}}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e="images";N.exports=function(n,r){var v={name:e,handleItemDefaults:a};A(n,r,v)};function a(i,n,r){function v(x,u){return y.coerce(i,n,T,x,u)}var s=v("source"),o=v("visible",!!s);if(!o)return n;v("layer"),v("xanchor"),v("yanchor"),v("sizex"),v("sizey"),v("sizing"),v("opacity");for(var b={_fullLayout:r},g=["x","y"],d=0;d<2;d++){var f=g[d],m=c.coerceRef(i,n,b,f,"paper",void 0);if(m!=="paper"){var l=c.getFromId(b,m);l._imgIndices.push(n._index)}c.coercePosition(n,b,v,m,f,0)}return n}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(t,N,V){var y=t("@plotly/d3"),c=t("../drawing"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/axis_ids"),e=t("../../constants/xmlns_namespaces");N.exports=function(i){var n=i._fullLayout,r=[],v={},s=[],o,b;for(b=0;b<n.images.length;b++){var g=n.images[b];if(g.visible)if(g.layer==="below"&&g.xref!=="paper"&&g.yref!=="paper"){o=T.ref2id(g.xref)+T.ref2id(g.yref);var d=n._plots[o];if(!d){s.push(g);continue}d.mainplot&&(o=d.mainplot.id),v[o]||(v[o]=[]),v[o].push(g)}else g.layer==="above"?r.push(g):s.push(g)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function m(_){var h=y.select(this);if(this._imgSrc!==_.source)if(h.attr("xmlns",e.svg),_.source&&_.source.slice(0,5)==="data:")h.attr("xlink:href",_.source),this._imgSrc=_.source;else{var L=new Promise(function(E){var S=new Image;this.img=S,S.setAttribute("crossOrigin","anonymous"),S.onerror=P,S.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height;var I=F.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var D=F.toDataURL("image/png");h.attr("xlink:href",D),E()},h.on("error",P),S.src=_.source,this._imgSrc=_.source;function P(){h.remove(),E()}}.bind(this));i._promises.push(L)}}function l(_){var h=y.select(this),L=A.getFromId(i,_.xref),E=A.getFromId(i,_.yref),S=A.getRefType(_.xref)==="domain",P=A.getRefType(_.yref)==="domain",F=n._size,I,D;L!==void 0?I=typeof _.xref=="string"&&S?L._length*_.sizex:Math.abs(L.l2p(_.sizex)-L.l2p(0)):I=_.sizex*F.w,E!==void 0?D=typeof _.yref=="string"&&P?E._length*_.sizey:Math.abs(E.l2p(_.sizey)-E.l2p(0)):D=_.sizey*F.h;var R=I*f.x[_.xanchor].offset,O=D*f.y[_.yanchor].offset,z=f.x[_.xanchor].sizing+f.y[_.yanchor].sizing,G,Y;switch(L!==void 0?G=typeof _.xref=="string"&&S?L._length*_.x+L._offset:L.r2p(_.x)+L._offset:G=_.x*F.w+F.l,G+=R,E!==void 0?Y=typeof _.yref=="string"&&P?E._length*(1-_.y)+E._offset:E.r2p(_.y)+E._offset:Y=F.h-_.y*F.h+F.t,Y+=O,_.sizing){case"fill":z+=" slice";break;case"stretch":z="none";break}h.attr({x:G,y:Y,width:I,height:D,preserveAspectRatio:z,opacity:_.opacity});var ee=L&&A.getRefType(_.xref)!=="domain"?L._id:"",j=E&&A.getRefType(_.yref)!=="domain"?E._id:"",X=ee+j;c.setClipUrl(h,X?"clip"+n._uid+X:null,i)}var x=n._imageLowerLayer.selectAll("image").data(s),u=n._imageUpperLayer.selectAll("image").data(r);x.enter().append("image"),u.enter().append("image"),x.exit().remove(),u.exit().remove(),x.each(function(_){m.bind(this)(_),l.bind(this)(_)}),u.each(function(_){m.bind(this)(_),l.bind(this)(_)});var M=Object.keys(n._plots);for(b=0;b<M.length;b++){o=M[b];var w=n._plots[o];if(!!w.imagelayer){var p=w.imagelayer.selectAll("image").data(v[o]||[]);p.enter().append("image"),p.exit().remove(),p.each(function(_){m.bind(this)(_),l.bind(this)(_)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(t,N,V){N.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(t,N,V){var y=t("../../plots/font_attributes"),c=t("../color/attributes");N.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:y({editType:"legend"}),grouptitlefont:y({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:y({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(t,N,V){N.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("../../plot_api/plot_template"),T=t("../../plots/attributes"),e=t("./attributes"),a=t("../../plots/layout_attributes"),i=t("./helpers");N.exports=function(r,v,s){var o=r.legend||{},b=A.newContainer(v,"legend");function g(D,R){return c.coerce(o,b,e,D,R)}for(var d,f=function(D,R){var O=d._input,z=d;return c.coerce(O,z,T,D,R)},m=v.font||{},l=c.coerceFont(g,"grouptitlefont",c.extendFlat({},m,{size:Math.round(m.size*1.1)})),x=0,u=!1,M="normal",w=0;w<s.length;w++)d=s[w],d.visible&&((d.showlegend||d._dfltShowLegend&&!(d._module&&d._module.attributes&&d._module.attributes.showlegend&&d._module.attributes.showlegend.dflt===!1))&&(x++,d.showlegend&&(u=!0,(y.traceIs(d,"pie-like")||d._input.showlegend===!0)&&x++),c.coerceFont(f,"legendgrouptitle.font",l)),(y.traceIs(d,"bar")&&v.barmode==="stack"||["tonextx","tonexty"].indexOf(d.fill)!==-1)&&(M=i.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),d.legendgroup!==void 0&&d.legendgroup!==""&&(M=i.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var p=c.coerce(r,v,a,"showlegend",u&&x>1);if(p===!1&&(v.legend=void 0),!(p===!1&&!o.uirevision)&&(g("uirevision",v.uirevision),p!==!1)){g("bgcolor",v.paper_bgcolor),g("bordercolor"),g("borderwidth");var _=c.coerceFont(g,"font",v.font),h=g("orientation"),L=h==="h",E,S,P;L?(E=0,y.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(S=1.1,P="bottom"):(S=-.1,P="top")):(E=1.02,S=1,P="auto"),g("traceorder",M),i.isGrouped(v.legend)&&g("tracegroupgap"),g("entrywidth"),g("entrywidthmode"),g("itemsizing"),g("itemwidth"),g("itemclick"),g("itemdoubleclick"),g("groupclick"),g("x",E),g("xanchor"),g("y",S),g("yanchor",P),g("valign"),c.noneOrAll(o,b,["x","y"]);var F=g("title.text");if(F){g("title.side",L?"left":"top");var I=c.extendFlat({},_,{size:c.bigFont(_.size)});c.coerceFont(g,"title.font",I)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib/events"),a=t("../dragelement"),i=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),v=t("./handle_click"),s=t("./constants"),o=t("../../constants/alignment"),b=o.LINE_SPACING,g=o.FROM_TL,d=o.FROM_BR,f=t("./get_legend_data"),m=t("./style"),l=t("./helpers"),x=1;N.exports=function(O,z){return z||(z=O._fullLayout.legend||{}),u(O,z)};function u(R,O){var z=R._fullLayout,G="legend"+z._uid,Y,ee=O._inHover;if(ee?(Y=O.layer,G+="-hover"):Y=z._infolayer,!!Y){R._legendMouseDownTime||(R._legendMouseDownTime=0);var j;if(ee){if(!O.entries)return;j=f(O.entries,O)}else{if(!R.calcdata)return;j=z.showlegend&&f(R.calcdata,O)}var X=z.hiddenlabels||[];if(!ee&&(!z.showlegend||!j.length))return Y.selectAll(".legend").remove(),z._topdefs.select("#"+G).remove(),A.autoMargin(R,"legend");var ae=c.ensureSingle(Y,"g","legend",function(Q){ee||Q.attr("pointer-events","all")}),he=c.ensureSingleById(z._topdefs,"clipPath",G,function(Q){Q.append("rect")}),K=c.ensureSingle(ae,"rect","bg",function(Q){Q.attr("shape-rendering","crispEdges")});K.call(n.stroke,O.bordercolor).call(n.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px");var J=c.ensureSingle(ae,"g","scrollbox"),U=O.title;if(O._titleWidth=0,O._titleHeight=0,U.text){var H=c.ensureSingle(J,"text","legendtitletext");H.attr("text-anchor","start").call(i.font,U.font).text(U.text),L(H,J,R,O,x)}else J.selectAll(".legendtitletext").remove();var q=c.ensureSingle(ae,"rect","scrollbar",function(Q){Q.attr(s.scrollBarEnterAttrs).call(n.fill,s.scrollBarColor)}),re=J.selectAll("g.groups").data(j);re.enter().append("g").attr("class","groups"),re.exit().remove();var Z=re.selectAll("g.traces").data(c.identity);Z.enter().append("g").attr("class","traces"),Z.exit().remove(),Z.style("opacity",function(Q){var ie=Q[0].trace;return T.traceIs(ie,"pie-like")?X.indexOf(Q[0].label)!==-1?.5:1:ie.visible==="legendonly"?.5:1}).each(function(){y.select(this).call(p,R,O)}).call(m,R,O).each(function(){ee||y.select(this).call(h,R)}),c.syncOrAsync([A.previousPromises,function(){return P(R,re,Z,O)},function(){var Q=z._size,ie=O.borderwidth;if(!ee){var oe=F(R);if(oe)return;var ne=Q.l+Q.w*O.x-g[I(O)]*O._width,le=Q.t+Q.h*(1-O.y)-g[D(O)]*O._effHeight;if(z.margin.autoexpand){var _e=ne,fe=le;ne=c.constrain(ne,0,z.width-O._width),le=c.constrain(le,0,z.height-O._effHeight),ne!==_e&&c.log("Constrain legend.x to make legend fit inside graph"),le!==fe&&c.log("Constrain legend.y to make legend fit inside graph")}i.setTranslate(ae,ne,le)}if(q.on(".drag",null),ae.on("wheel",null),ee||O._height<=O._maxHeight||R._context.staticPlot){var ye=O._effHeight;ee&&(ye=O._height),K.attr({width:O._width-ie,height:ye-ie,x:ie/2,y:ie/2}),i.setTranslate(J,0,0),he.select("rect").attr({width:O._width-2*ie,height:ye-2*ie,x:ie,y:ie}),i.setClipUrl(J,G,R),i.setRect(q,0,0,0,0),delete O._scrollY}else{var xe=Math.max(s.scrollBarMinHeight,O._effHeight*O._effHeight/O._height),me=O._effHeight-xe-2*s.scrollBarMargin,be=O._height-O._effHeight,ke=me/be,De=Math.min(O._scrollY||0,be);K.attr({width:O._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:O._effHeight-ie,x:ie/2,y:ie/2}),he.select("rect").attr({width:O._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:O._effHeight-2*ie,x:ie,y:ie+De}),i.setClipUrl(J,G,R),Ve(De,xe,ke),ae.on("wheel",function(){De=c.constrain(O._scrollY+y.event.deltaY/me*be,0,be),Ve(De,xe,ke),De!==0&&De!==be&&y.event.preventDefault()});var He,Ae,Le,Ze=function(Ct,jt,Nt){var Lt=(Nt-jt)/ke+Ct;return c.constrain(Lt,0,be)},We=function(Ct,jt,Nt){var Lt=(jt-Nt)/ke+Ct;return c.constrain(Lt,0,be)},ze=y.behavior.drag().on("dragstart",function(){var Ct=y.event.sourceEvent;Ct.type==="touchstart"?He=Ct.changedTouches[0].clientY:He=Ct.clientY,Le=De}).on("drag",function(){var Ct=y.event.sourceEvent;Ct.buttons===2||Ct.ctrlKey||(Ct.type==="touchmove"?Ae=Ct.changedTouches[0].clientY:Ae=Ct.clientY,De=Ze(Le,He,Ae),Ve(De,xe,ke))});q.call(ze);var Ie=y.behavior.drag().on("dragstart",function(){var Ct=y.event.sourceEvent;Ct.type==="touchstart"&&(He=Ct.changedTouches[0].clientY,Le=De)}).on("drag",function(){var Ct=y.event.sourceEvent;Ct.type==="touchmove"&&(Ae=Ct.changedTouches[0].clientY,De=We(Le,He,Ae),Ve(De,xe,ke))});J.call(Ie)}function Ve(Ct,jt,Nt){O._scrollY=R._fullLayout.legend._scrollY=Ct,i.setTranslate(J,0,-Ct),i.setRect(q,O._width,s.scrollBarMargin+Ct*Nt,s.scrollBarWidth,jt),he.select("rect").attr("y",ie+Ct)}if(R._context.edits.legendPosition){var dt,Ft,Qt,Ot;ae.classed("cursor-move",!0),a.init({element:ae.node(),gd:R,prepFn:function(){var Ct=i.getTranslate(ae);Qt=Ct.x,Ot=Ct.y},moveFn:function(Ct,jt){var Nt=Qt+Ct,Lt=Ot+jt;i.setTranslate(ae,Nt,Lt),dt=a.align(Nt,0,Q.l,Q.l+Q.w,O.xanchor),Ft=a.align(Lt,0,Q.t+Q.h,Q.t,O.yanchor)},doneFn:function(){dt!==void 0&&Ft!==void 0&&T.call("_guiRelayout",R,{"legend.x":dt,"legend.y":Ft})},clickFn:function(Ct,jt){var Nt=Y.selectAll("g.traces").filter(function(){var Lt=this.getBoundingClientRect();return jt.clientX>=Lt.left&&jt.clientX<=Lt.right&&jt.clientY>=Lt.top&&jt.clientY<=Lt.bottom});Nt.size()>0&&w(R,ae,Nt,Ct,jt)}})}}],R)}}function M(R,O,z){var G=R[0],Y=G.width,ee=O.entrywidthmode,j=G.trace.legendwidth||O.entrywidth;return ee==="fraction"?O._maxWidth*j:z+(j||Y)}function w(R,O,z,G,Y){var ee=z.data()[0][0].trace,j={event:Y,node:z.node(),curveNumber:ee.index,expandedIndex:ee._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};ee._group&&(j.group=ee._group),T.traceIs(ee,"pie-like")&&(j.label=z.datum()[0].label);var X=e.triggerHandler(R,"plotly_legendclick",j);if(X!==!1){if(G===1)O._clickTimeout=setTimeout(function(){!R._fullLayout||v(z,R,G)},R._context.doubleClickDelay);else if(G===2){O._clickTimeout&&clearTimeout(O._clickTimeout),R._legendMouseDownTime=0;var ae=e.triggerHandler(R,"plotly_legenddoubleclick",j);ae!==!1&&v(z,R,G)}}}function p(R,O,z){var G=R.data()[0][0],Y=G.trace,ee=T.traceIs(Y,"pie-like"),j=!z._inHover&&O._context.edits.legendText&&!ee,X=z._maxNameLength,ae,he;G.groupTitle?(ae=G.groupTitle.text,he=G.groupTitle.font):(he=z.font,z.entries?ae=G.text:(ae=ee?G.label:Y.name,Y._meta&&(ae=c.templateString(ae,Y._meta))));var K=c.ensureSingle(R,"text","legendtext");K.attr("text-anchor","start").call(i.font,he).text(j?_(ae,X):ae);var J=z.itemwidth+s.itemGap*2;r.positionText(K,J,0),j?K.call(r.makeEditable,{gd:O,text:ae}).call(L,R,O,z).on("edit",function(U){this.text(_(U,X)).call(L,R,O,z);var H=G.trace._fullInput||{},q={};if(T.hasTransform(H,"groupby")){var re=T.getTransformIndices(H,"groupby"),Z=re[re.length-1],Q=c.keyedContainer(H,"transforms["+Z+"].styles","target","value.name");Q.set(G.trace._group,U),q=Q.constructUpdate()}else q.name=U;return T.call("_guiRestyle",O,q,Y.index)}):L(K,R,O,z)}function _(R,O){var z=Math.max(4,O);if(R&&R.trim().length>=z/2)return R;R=R||"";for(var G=z-R.length;G>0;G--)R+=" ";return R}function h(R,O){var z=O._context.doubleClickDelay,G,Y=1,ee=c.ensureSingle(R,"rect","legendtoggle",function(j){O._context.staticPlot||j.style("cursor","pointer").attr("pointer-events","all"),j.call(n.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(ee.on("mousedown",function(){G=new Date().getTime(),G-O._legendMouseDownTime<z?Y+=1:(Y=1,O._legendMouseDownTime=G)}),ee.on("mouseup",function(){if(!(O._dragged||O._editing)){var j=O._fullLayout.legend;new Date().getTime()-O._legendMouseDownTime>z&&(Y=Math.max(Y-1,1)),w(O,j,R,Y,y.event)}}))}function L(R,O,z,G,Y){G._inHover&&R.attr("data-notex",!0),r.convertToTspans(R,z,function(){E(O,z,G,Y)})}function E(R,O,z,G){var Y=R.data()[0][0];if(!z._inHover&&Y&&!Y.trace.showlegend){R.remove();return}var ee=R.select("g[class*=math-group]"),j=ee.node();z||(z=O._fullLayout.legend);var X=z.borderwidth,ae;G===x?ae=z.title.font:Y.groupTitle?ae=Y.groupTitle.font:ae=z.font;var he=ae.size*b,K,J;if(j){var U=i.bBox(j);K=U.height,J=U.width,G===x?i.setTranslate(ee,X,X+K*.75):i.setTranslate(ee,0,K*.25)}else{var H=R.select(G===x?".legendtitletext":".legendtext"),q=r.lineCount(H),re=H.node();if(K=he*q,J=re?i.bBox(re).width:0,G===x)z.title.side==="left"&&(J+=s.itemGap*2),r.positionText(H,X+s.titlePad,X+he);else{var Z=s.itemGap*2+z.itemwidth;Y.groupTitle&&(Z=s.itemGap,J-=z.itemwidth),r.positionText(H,Z,-he*((q-1)/2-.3))}}G===x?(z._titleWidth=J,z._titleHeight=K):(Y.lineHeight=he,Y.height=Math.max(K,16)+3,Y.width=J)}function S(R){var O=0,z=0,G=R.title.side;return G&&(G.indexOf("left")!==-1&&(O=R._titleWidth),G.indexOf("top")!==-1&&(z=R._titleHeight)),[O,z]}function P(R,O,z,G){var Y=R._fullLayout;G||(G=Y.legend);var ee=Y._size,j=l.isVertical(G),X=l.isGrouped(G),ae=G.entrywidthmode==="fraction",he=G.borderwidth,K=2*he,J=s.itemGap,U=G.itemwidth+J*2,H=2*(he+J),q=D(G),re=G.y<0||G.y===0&&q==="top",Z=G.y>1||G.y===1&&q==="bottom",Q=G.tracegroupgap,ie={};G._maxHeight=Math.max(re||Z?Y.height/2:ee.h,30);var oe=0;G._width=0,G._height=0;var ne=S(G);if(j)z.each(function(Qt){var Ot=Qt[0].height;i.setTranslate(this,he+ne[0],he+ne[1]+G._height+Ot/2+J),G._height+=Ot,G._width=Math.max(G._width,Qt[0].width)}),oe=U+G._width,G._width+=J+U+K,G._height+=H,X&&(O.each(function(Qt,Ot){i.setTranslate(this,0,Ot*G.tracegroupgap)}),G._height+=(G._lgroupsLength-1)*G.tracegroupgap);else{var le=I(G),_e=G.x<0||G.x===0&&le==="right",fe=G.x>1||G.x===1&&le==="left",ye=Z||re,xe=Y.width/2;G._maxWidth=Math.max(_e?ye&&le==="left"?ee.l+ee.w:xe:fe?ye&&le==="right"?ee.r+ee.w:xe:ee.w,2*U);var me=0,be=0;z.each(function(Qt){var Ot=M(Qt,G,U);me=Math.max(me,Ot),be+=Ot}),oe=null;var ke=0;if(X){var De=0,He=0,Ae=0;O.each(function(){var Qt=0,Ot=0;y.select(this).selectAll("g.traces").each(function(jt){var Nt=M(jt,G,U),Lt=jt[0].height;i.setTranslate(this,ne[0],ne[1]+he+J+Lt/2+Ot),Ot+=Lt,Qt=Math.max(Qt,Nt),ie[jt[0].trace.legendgroup]=Qt});var Ct=Qt+J;He>0&&Ct+he+He>G._maxWidth?(ke=Math.max(ke,He),He=0,Ae+=De+Q,De=Ot):De=Math.max(De,Ot),i.setTranslate(this,He,Ae),He+=Ct}),G._width=Math.max(ke,He)+he,G._height=Ae+De+H}else{var Le=z.size(),Ze=be+K+(Le-1)*J<G._maxWidth,We=0,ze=0,Ie=0,Ve=0;z.each(function(Qt){var Ot=Qt[0].height,Ct=M(Qt,G,U),jt=Ze?Ct:me;ae||(jt+=J),jt+he+ze-J>=G._maxWidth&&(ke=Math.max(ke,Ve),ze=0,Ie+=We,G._height+=We,We=0),i.setTranslate(this,ne[0]+he+ze,ne[1]+he+Ie+Ot/2+J),Ve=ze+Ct+J,ze+=jt,We=Math.max(We,Ot)}),Ze?(G._width=ze+K,G._height=We+H):(G._width=Math.max(ke,Ve)+K,G._height+=We+H)}}G._width=Math.ceil(Math.max(G._width+ne[0],G._titleWidth+2*(he+s.titlePad))),G._height=Math.ceil(Math.max(G._height+ne[1],G._titleHeight+2*(he+s.itemGap))),G._effHeight=Math.min(G._height,G._maxHeight);var dt=R._context.edits,Ft=dt.legendText||dt.legendPosition;z.each(function(Qt){var Ot=y.select(this).select(".legendtoggle"),Ct=Qt[0].height,jt=Qt[0].trace.legendgroup,Nt=M(Qt,G,U);X&&jt!==""&&(Nt=ie[jt]);var Lt=Ft?U:oe||Nt;!j&&!ae&&(Lt+=J/2),i.setRect(Ot,0,-Ct/2,Lt,Ct)})}function F(R){var O=R._fullLayout,z=O.legend,G=I(z),Y=D(z);return A.autoMargin(R,"legend",{x:z.x,y:z.y,l:z._width*g[G],r:z._width*d[G],b:z._effHeight*d[Y],t:z._effHeight*g[Y]})}function I(R){return c.isRightAnchor(R)?"right":c.isCenterAnchor(R)?"center":"left"}function D(R){return c.isBottomAnchor(R)?"bottom":c.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(t,N,V){var y=t("../../registry"),c=t("./helpers");N.exports=function(T,e){var a=e._inHover,i=c.isGrouped(e),n=c.isReversed(e),r={},v=[],s=!1,o={},b=0,g=0,d,f;function m(O,z){if(O===""||!c.isGrouped(e)){var G="~~i"+b;v.push(G),r[G]=[z],b++}else v.indexOf(O)===-1?(v.push(O),s=!0,r[O]=[z]):r[O].push(z)}for(d=0;d<T.length;d++){var l=T[d],x=l[0],u=x.trace,M=u.legendgroup;if(!(!a&&(!u.visible||!u.showlegend)))if(y.traceIs(u,"pie-like"))for(o[M]||(o[M]={}),f=0;f<l.length;f++){var w=l[f].label;o[M][w]||(m(M,{label:w,color:l[f].color,i:l[f].i,trace:u,pts:l[f].pts}),o[M][w]=!0,g=Math.max(g,(w||"").length))}else m(M,x),g=Math.max(g,(u.name||"").length)}if(!v.length)return[];var p=!s||!i,_=[];for(d=0;d<v.length;d++){var h=r[v[d]];p?_.push(h[0]):_.push(h)}for(p&&(_=[_]),d=0;d<_.length;d++){var L=1/0;for(f=0;f<_[d].length;f++){var E=_[d][f].trace.legendrank;L>E&&(L=E)}_[d][0]._groupMinRank=L,_[d][0]._preGroupSort=d}var S=function(O,z){return O[0]._groupMinRank-z[0]._groupMinRank||O[0]._preGroupSort-z[0]._preGroupSort},P=function(O,z){return O.trace.legendrank-z.trace.legendrank||O._preSort-z._preSort};for(_.forEach(function(O,z){O[0]._preGroupSort=z}),_.sort(S),d=0;d<_.length;d++){_[d].forEach(function(O,z){O._preSort=z}),_[d].sort(P);var F=_[d][0].trace,I=null;for(f=0;f<_[d].length;f++){var D=_[d][f].trace.legendgrouptitle;if(D&&D.text){I=D,a&&(D.font=e._groupTitleFont);break}}if(n&&_[d].reverse(),I){var R=!1;for(f=0;f<_[d].length;f++)if(y.traceIs(_[d][f].trace,"pie-like")){R=!0;break}_[d].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:e.groupclick==="toggleitem"?!0:F.visible}})}for(f=0;f<_[d].length;f++)_[d][f]=[_[d][f]]}return e._lgroupsLength=_.length,e._maxNameLength=g,_}},{"../../registry":647,"./helpers":423}],422:[function(t,N,V){var y=t("../../lib"),c=t("../../registry"),A=!0;N.exports=function(e,a,i){var n=a._fullLayout;if(a._dragged||a._editing)return;var r=n.legend.itemclick,v=n.legend.itemdoubleclick,s=n.legend.groupclick;i===1&&r==="toggle"&&v==="toggleothers"&&A&&a.data&&a._context.showTips&&y.notifier(y._(a,"Double-click on legend to isolate one trace"),"long"),A=!1;var o;if(i===1?o=r:i===2&&(o=v),!o)return;var b=s==="togglegroup",g=n.hiddenlabels?n.hiddenlabels.slice():[],d=e.data()[0][0];if(d.groupTitle&&d.noClick)return;var f=a._fullData,m=d.trace,l=m.legendgroup,x,u,M,w,p,_,h={},L=[],E=[],S=[];function P(J,U,H){var q=L.indexOf(J),re=h[U];return re||(re=h[U]=[]),L.indexOf(J)===-1&&(L.push(J),q=L.length-1),re[q]=H,q}function F(J,U){if(!(d.groupTitle&&!b)){var H=J._fullInput;if(c.hasTransform(H,"groupby")){var q=E[H.index];if(!q){var re=c.getTransformIndices(H,"groupby"),Z=re[re.length-1];q=y.keyedContainer(H,"transforms["+Z+"].styles","target","value.visible"),E[H.index]=q}var Q=q.get(J._group);Q===void 0&&(Q=!0),Q!==!1&&q.set(J._group,U),S[H.index]=P(H.index,"visible",H.visible!==!1)}else{var ie=H.visible===!1?!1:U;P(H.index,"visible",ie)}}}if(c.traceIs(m,"pie-like")){var I=d.label,D=g.indexOf(I);o==="toggle"?D===-1?g.push(I):g.splice(D,1):o==="toggleothers"&&(g=[],a.calcdata[0].forEach(function(J){I!==J.label&&g.push(J.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===g.length&&D===-1&&(g=[])),c.call("_guiRelayout",a,"hiddenlabels",g)}else{var R=l&&l.length,O=[],z;if(R)for(x=0;x<f.length;x++)z=f[x],!!z.visible&&z.legendgroup===l&&O.push(x);if(o==="toggle"){var G;switch(m.visible){case!0:G="legendonly";break;case!1:G=!1;break;case"legendonly":G=!0;break}if(R)if(b)for(x=0;x<f.length;x++)f[x].visible!==!1&&f[x].legendgroup===l&&F(f[x],G);else F(m,G);else F(m,G)}else if(o==="toggleothers"){var Y,ee,j,X,ae=!0;for(x=0;x<f.length;x++)if(Y=f[x]===m,j=f[x].showlegend!==!0,!(Y||j)&&(ee=R&&f[x].legendgroup===l,!ee&&f[x].visible===!0&&!c.traceIs(f[x],"notLegendIsolatable"))){ae=!1;break}for(x=0;x<f.length;x++)if(f[x].visible!==!1&&!c.traceIs(f[x],"notLegendIsolatable"))switch(m.visible){case"legendonly":F(f[x],!0);break;case!0:X=ae?!0:"legendonly",Y=f[x]===m,j=f[x].showlegend!==!0&&!f[x].legendgroup,ee=Y||R&&f[x].legendgroup===l,F(f[x],ee||j?!0:X);break}}for(x=0;x<E.length;x++)if(M=E[x],!!M){var he=M.constructUpdate(),K=Object.keys(he);for(u=0;u<K.length;u++)w=K[u],_=h[w]=h[w]||[],_[S[x]]=he[w]}for(p=Object.keys(h),x=0;x<p.length;x++)for(w=p[x],u=0;u<L.length;u++)h[w].hasOwnProperty(u)||(h[w][u]=void 0);c.call("_guiRestyle",a,h,L)}}},{"../../lib":515,"../../registry":647}],423:[function(t,N,V){V.isGrouped=function(c){return(c.traceorder||"").indexOf("grouped")!==-1},V.isVertical=function(c){return c.orientation!=="h"},V.isReversed=function(c){return(c.traceorder||"").indexOf("reversed")!==-1}},{}],424:[function(t,N,V){N.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../registry"),A=t("../../lib"),T=A.strTranslate,e=t("../drawing"),a=t("../color"),i=t("../colorscale/helpers").extractOpts,n=t("../../traces/scatter/subtypes"),r=t("../../traces/pie/style_one"),v=t("../../traces/pie/helpers").castOption,s=t("./constants"),o=12,b=5,g=2,d=10,f=5;N.exports=function(M,w,p){var _=w._fullLayout;p||(p=_.legend);var h=p.itemsizing==="constant",L=p.itemwidth,E=(L+s.itemGap*2)/2,S=T(E,0),P=function(K,J,U,H){var q;if(K+1)q=K;else if(J&&J.width>0)q=J.width;else return 0;return h?H:Math.min(q,U)};M.each(function(K){var J=y.select(this),U=A.ensureSingle(J,"g","layers");U.style("opacity",K[0].trace.opacity);var H=p.valign,q=K[0].lineHeight,re=K[0].height;if(H==="middle"||!q||!re)U.attr("transform",null);else{var Z={top:1,bottom:-1}[H],Q=Z*(.5*(q-re+3));U.attr("transform",T(0,Q))}var ie=U.selectAll("g.legendfill").data([K]);ie.enter().append("g").classed("legendfill",!0);var oe=U.selectAll("g.legendlines").data([K]);oe.enter().append("g").classed("legendlines",!0);var ne=U.selectAll("g.legendsymbols").data([K]);ne.enter().append("g").classed("legendsymbols",!0),ne.selectAll("g.legendpoints").data([K]).enter().append("g").classed("legendpoints",!0)}).each(he).each(D).each(O).each(R).each(G).each(X).each(j).each(F).each(I).each(Y).each(ee);function F(K){var J=l(K),U=J.showFill,H=J.showLine,q=J.showGradientLine,re=J.showGradientFill,Z=J.anyFill,Q=J.anyLine,ie=K[0],oe=ie.trace,ne,le,_e=i(oe),fe=_e.colorscale,ye=_e.reversescale,xe=function(Le){if(Le.size())if(U)e.fillGroupStyle(Le,w);else{var Ze="legendfill-"+oe.uid;e.gradient(Le,w,Ze,m(ye),fe,"fill")}},me=function(Le){if(Le.size()){var Ze="legendline-"+oe.uid;e.lineGroupStyle(Le),e.gradient(Le,w,Ze,m(ye),fe,"stroke")}},be=n.hasMarkers(oe)||!Z?"M5,0":Q?"M5,-2":"M5,-3",ke=y.select(this),De=ke.select(".legendfill").selectAll("path").data(U||re?[K]:[]);if(De.enter().append("path").classed("js-fill",!0),De.exit().remove(),De.attr("d",be+"h"+L+"v6h-"+L+"z").call(xe),H||q){var He=P(void 0,oe.line,d,b);le=A.minExtend(oe,{line:{width:He}}),ne=[A.minExtend(ie,{trace:le})]}var Ae=ke.select(".legendlines").selectAll("path").data(H||q?[ne]:[]);Ae.enter().append("path").classed("js-line",!0),Ae.exit().remove(),Ae.attr("d",be+(q?"l"+L+",0.0001":"h"+L)).call(H?e.lineGroupStyle:me)}function I(K){var J=l(K),U=J.anyFill,H=J.anyLine,q=J.showLine,re=J.showMarker,Z=K[0],Q=Z.trace,ie=!re&&!H&&!U&&n.hasText(Q),oe,ne;function le(De,He,Ae,Le){var Ze=A.nestedProperty(Q,De).get(),We=A.isArrayOrTypedArray(Ze)&&He?He(Ze):Ze;if(h&&We&&Le!==void 0&&(We=Le),Ae){if(We<Ae[0])return Ae[0];if(We>Ae[1])return Ae[1]}return We}function _e(De){return Z._distinct&&Z.index&&De[Z.index]?De[Z.index]:De[0]}if(re||ie||q){var fe={},ye={};if(re){fe.mc=le("marker.color",_e),fe.mx=le("marker.symbol",_e),fe.mo=le("marker.opacity",A.mean,[.2,1]),fe.mlc=le("marker.line.color",_e),fe.mlw=le("marker.line.width",A.mean,[0,5],g),ye.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var xe=le("marker.size",A.mean,[2,16],o);fe.ms=xe,ye.marker.size=xe}q&&(ye.line={width:le("line.width",_e,[0,10],b)}),ie&&(fe.tx="Aa",fe.tp=le("textposition",_e),fe.ts=10,fe.tc=le("textfont.color",_e),fe.tf=le("textfont.family",_e)),oe=[A.minExtend(Z,fe)],ne=A.minExtend(Q,ye),ne.selectedpoints=null,ne.texttemplate=null}var me=y.select(this).select("g.legendpoints"),be=me.selectAll("path.scatterpts").data(re?oe:[]);be.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",S),be.exit().remove(),be.call(e.pointStyle,ne,w),re&&(oe[0].mrc=3);var ke=me.selectAll("g.pointtext").data(ie?oe:[]);ke.enter().append("g").classed("pointtext",!0).append("text").attr("transform",S),ke.exit().remove(),ke.selectAll("text").call(e.textPointStyle,ne,w)}function D(K){var J=K[0].trace,U=J.type==="waterfall";if(K[0]._distinct&&U){var H=K[0].trace[K[0].dir].marker;return K[0].mc=H.color,K[0].mlw=H.line.width,K[0].mlc=H.line.color,z(K,this,"waterfall")}var q=[];J.visible&&U&&(q=K[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var re=y.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(q);re.enter().append("path").classed("legendwaterfall",!0).attr("transform",S).style("stroke-miterlimit",1),re.exit().remove(),re.each(function(Z){var Q=y.select(this),ie=J[Z[0]].marker,oe=P(void 0,ie.line,f,g);Q.attr("d",Z[1]).style("stroke-width",oe+"px").call(a.fill,ie.color),oe&&Q.call(a.stroke,ie.line.color)})}function R(K){z(K,this)}function O(K){z(K,this,"funnel")}function z(K,J,U){var H=K[0].trace,q=H.marker||{},re=q.line||{},Z=U?H.visible&&H.type===U:c.traceIs(H,"bar"),Q=y.select(J).select("g.legendpoints").selectAll("path.legend"+U).data(Z?[K]:[]);Q.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),Q.exit().remove(),Q.each(function(ie){var oe=y.select(this),ne=ie[0],le=P(ne.mlw,q.line,f,g);oe.style("stroke-width",le+"px");var _e=ne.mcc;if(!p._inHover&&"mc"in ne){var fe=i(q),ye=fe.mid;ye===void 0&&(ye=(fe.max+fe.min)/2),_e=e.tryColorscale(q,"")(ye)}var xe=_e||ne.mc||q.color,me=q.pattern,be=me&&e.getPatternAttr(me.shape,0,"");if(be){var ke=e.getPatternAttr(me.bgcolor,0,null),De=e.getPatternAttr(me.fgcolor,0,null),He=me.fgopacity,Ae=x(me.size,8,10),Le=x(me.solidity,.5,1),Ze="legend-"+H.uid;oe.call(e.pattern,"legend",w,Ze,be,Ae,Le,_e,me.fillmode,ke,De,He)}else oe.call(a.fill,xe);le&&a.stroke(oe,ne.mlc||re.color)})}function G(K){var J=K[0].trace,U=y.select(this).select("g.legendpoints").selectAll("path.legendbox").data(J.visible&&c.traceIs(J,"box-violin")?[K]:[]);U.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),U.exit().remove(),U.each(function(){var H=y.select(this);if((J.boxpoints==="all"||J.points==="all")&&a.opacity(J.fillcolor)===0&&a.opacity((J.line||{}).color)===0){var q=A.minExtend(J,{marker:{size:h?o:A.constrain(J.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});U.call(e.pointStyle,q,w)}else{var re=P(void 0,J.line,f,g);H.style("stroke-width",re+"px").call(a.fill,J.fillcolor),re&&a.stroke(H,J.line.color)}})}function Y(K){var J=K[0].trace,U=y.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(J.visible&&J.type==="candlestick"?[K,K]:[]);U.enter().append("path").classed("legendcandle",!0).attr("d",function(H,q){return q?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",S).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(H,q){var re=y.select(this),Z=J[q?"increasing":"decreasing"],Q=P(void 0,Z.line,f,g);re.style("stroke-width",Q+"px").call(a.fill,Z.fillcolor),Q&&a.stroke(re,Z.line.color)})}function ee(K){var J=K[0].trace,U=y.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(J.visible&&J.type==="ohlc"?[K,K]:[]);U.enter().append("path").classed("legendohlc",!0).attr("d",function(H,q){return q?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",S).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(H,q){var re=y.select(this),Z=J[q?"increasing":"decreasing"],Q=P(void 0,Z.line,f,g);re.style("fill","none").call(e.dashLine,Z.line.dash,Q),Q&&a.stroke(re,Z.line.color)})}function j(K){ae(K,this,"pie")}function X(K){ae(K,this,"funnelarea")}function ae(K,J,U){var H=K[0],q=H.trace,re=U?q.visible&&q.type===U:c.traceIs(q,U),Z=y.select(J).select("g.legendpoints").selectAll("path.legend"+U).data(re?[K]:[]);if(Z.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),Z.exit().remove(),Z.size()){var Q=(q.marker||{}).line,ie=P(v(Q.width,H.pts),Q,f,g),oe=A.minExtend(q,{marker:{line:{width:ie}}});oe.marker.line.color=Q.color;var ne=A.minExtend(H,{trace:oe});r(Z,ne,oe)}}function he(K){var J=K[0].trace,U,H=[];if(J.visible)switch(J.type){case"histogram2d":case"heatmap":H=[["M-15,-2V4H15V-2Z"]],U=!0;break;case"choropleth":case"choroplethmapbox":H=[["M-6,-6V6H6V-6Z"]],U=!0;break;case"densitymapbox":H=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],U="radial";break;case"cone":H=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],U=!1;break;case"streamtube":H=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],U=!1;break;case"surface":H=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],U=!0;break;case"mesh3d":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!1;break;case"volume":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!0;break;case"isosurface":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],U=!1;break}var q=y.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(H);q.enter().append("path").classed("legend3dandfriends",!0).attr("transform",S).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(re,Z){var Q=y.select(this),ie=i(J),oe=ie.colorscale,ne=ie.reversescale,le=function(xe){if(xe.size()){var me="legendfill-"+J.uid;e.gradient(xe,w,me,m(ne,U==="radial"),oe,"fill")}},_e;if(oe){if(!U){var ye=oe.length;_e=Z===0?oe[ne?ye-1:0][1]:Z===1?oe[ne?0:ye-1][1]:oe[Math.floor((ye-1)/2)][1]}}else{var fe=J.vertexcolor||J.facecolor||J.color;_e=A.isArrayOrTypedArray(fe)?fe[Z]||fe[0]:fe}Q.attr("d",re[0]),_e?Q.call(a.fill,_e):Q.call(le)})}};function m(u,M){var w=M?"radial":"horizontal";return w+(u?"":"reversed")}function l(u){var M=u[0].trace,w=M.contours,p=n.hasLines(M),_=n.hasMarkers(M),h=M.visible&&M.fill&&M.fill!=="none",L=!1,E=!1;if(w){var S=w.coloring;S==="lines"?L=!0:p=S==="none"||S==="heatmap"||w.showlines,w.type==="constraint"?h=w._operation!=="=":(S==="fill"||S==="heatmap")&&(E=!0)}return{showMarker:_,showLine:p,showFill:h,showGradientLine:L,showGradientFill:E,anyLine:p||L,anyFill:h||E}}function x(u,M,w){return u&&A.isArrayOrTypedArray(u)?M:u>w?w:u}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(t,N,V){t("./constants"),N.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(t,N,V){var y=t("../../registry"),c=t("../../plots/plots"),A=t("../../plots/cartesian/axis_ids"),T=t("../../fonts/ploticon"),e=t("../shapes/draw").eraseActiveShape,a=t("../../lib"),i=a._,n=N.exports={};n.toImage={name:"toImage",title:function(u){var M=u._context.toImageButtonOptions||{},w=M.format||"png";return w==="png"?i(u,"Download plot as a png"):i(u,"Download plot")},icon:T.camera,click:function(u){var M=u._context.toImageButtonOptions,w={format:M.format||"png"};a.notifier(i(u,"Taking snapshot - this may take a few seconds"),"long"),w.format!=="svg"&&a.isIE()&&(a.notifier(i(u,"IE only supports svg.  Changing format to svg."),"long"),w.format="svg"),["filename","width","height","scale"].forEach(function(p){p in M&&(w[p]=M[p])}),y.call("downloadImage",u,w).then(function(p){a.notifier(i(u,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){a.notifier(i(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},n.sendDataToCloud={name:"sendDataToCloud",title:function(u){return i(u,"Edit in Chart Studio")},icon:T.disk,click:function(u){c.sendDataToCloud(u)}},n.editInChartStudio={name:"editInChartStudio",title:function(u){return i(u,"Edit in Chart Studio")},icon:T.pencil,click:function(u){c.sendDataToCloud(u)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return i(u,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:r},n.pan2d={name:"pan2d",_cat:"pan",title:function(u){return i(u,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:r},n.select2d={name:"select2d",_cat:"select",title:function(u){return i(u,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:r},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return i(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:r},n.drawclosedpath={name:"drawclosedpath",title:function(u){return i(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:r},n.drawopenpath={name:"drawopenpath",title:function(u){return i(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:r},n.drawline={name:"drawline",title:function(u){return i(u,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:r},n.drawrect={name:"drawrect",title:function(u){return i(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:r},n.drawcircle={name:"drawcircle",title:function(u){return i(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:r},n.eraseshape={name:"eraseshape",title:function(u){return i(u,"Erase active shape")},icon:T.eraseshape,click:e},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:r},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:r},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return i(u,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:r},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return i(u,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:r},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return i(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:r},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return i(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:r};function r(u,M){var w=M.currentTarget,p=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=u._fullLayout,L={},E=A.list(u,null,!0),S=h._cartesianSpikesEnabled,P,F;if(p==="zoom"){var I=_==="in"?.5:2,D=(1+I)/2,R=(1-I)/2,O;for(F=0;F<E.length;F++)if(P=E[F],!P.fixedrange)if(O=P._name,_==="auto")L[O+".autorange"]=!0;else if(_==="reset"){if(P._rangeInitial===void 0)L[O+".autorange"]=!0;else{var z=P._rangeInitial.slice();L[O+".range[0]"]=z[0],L[O+".range[1]"]=z[1]}P._showSpikeInitial!==void 0&&(L[O+".showspikes"]=P._showSpikeInitial,S==="on"&&!P._showSpikeInitial&&(S="off"))}else{var G=[P.r2l(P.range[0]),P.r2l(P.range[1])],Y=[D*G[0]+R*G[1],D*G[1]+R*G[0]];L[O+".range[0]"]=P.l2r(Y[0]),L[O+".range[1]"]=P.l2r(Y[1])}}else p==="hovermode"&&(_==="x"||_==="y")&&(_=h._isHoriz?"y":"x",w.setAttribute("data-val",_)),L[p]=_;h._cartesianSpikesEnabled=S,y.call("_guiRelayout",u,L)}n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return i(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:v},n.pan3d={name:"pan3d",_cat:"pan",title:function(u){return i(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:v},n.orbitRotation={name:"orbitRotation",title:function(u){return i(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:v},n.tableRotation={name:"tableRotation",title:function(u){return i(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:v};function v(u,M){for(var w=M.currentTarget,p=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=u._fullLayout._subplots.gl3d||[],L={},E=p.split("."),S=0;S<h.length;S++)L[h[S]+"."+E[1]]=_;var P=_==="pan"?_:"zoom";L.dragmode=P,y.call("_guiRelayout",u,L)}n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return i(u,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:s},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return i(u,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:s};function s(u,M){for(var w=M.currentTarget,p=w.getAttribute("data-attr"),_=p==="resetLastSave",h=p==="resetDefault",L=u._fullLayout,E=L._subplots.gl3d||[],S={},P=0;P<E.length;P++){var F=E[P],I=F+".camera",D=F+".aspectratio",R=F+".aspectmode",O=L[F]._scene,z;_?(S[I+".up"]=O.viewInitial.up,S[I+".eye"]=O.viewInitial.eye,S[I+".center"]=O.viewInitial.center,z=!0):h&&(S[I+".up"]=null,S[I+".eye"]=null,S[I+".center"]=null,z=!0),z&&(S[D+".x"]=O.viewInitial.aspectratio.x,S[D+".y"]=O.viewInitial.aspectratio.y,S[D+".z"]=O.viewInitial.aspectratio.z,S[R]=O.viewInitial.aspectmode)}y.call("_guiRelayout",u,S)}n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:b};function o(u,M){var w=M.currentTarget,p=w._previousVal,_=u._fullLayout,h=_._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],E={},S={};if(p)S=p,w._previousVal=null;else{for(var P=0;P<h.length;P++){var F=h[P],I=_[F],D=F+".hovermode";E[D]=I.hovermode,S[D]=!1;for(var R=0;R<3;R++){var O=L[R],z=F+"."+O+".showspikes";S[z]=!1,E[z]=I[O].showspikes}}w._previousVal=E}return S}function b(u,M){var w=o(u,M);y.call("_guiRelayout",u,w)}n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:g},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:g},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return i(u,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:g},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:f};function g(u,M){for(var w=M.currentTarget,p=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=u._fullLayout,L=h._subplots.geo||[],E=0;E<L.length;E++){var S=L[E],P=h[S];if(p==="zoom"){var F=P.projection.scale,I=_==="in"?2*F:.5*F;y.call("_guiRelayout",u,S+".projection.scale",I)}}p==="reset"&&x(u,"geo")}n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:f},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:f};function d(u){var M=u._fullLayout;return M.hovermode?!1:M._has("cartesian")?M._isHoriz?"y":"x":"closest"}function f(u){var M=d(u);y.call("_guiRelayout",u,"hovermode",M)}n.resetViewSankey={name:"resetSankeyGroup",title:function(u){return i(u,"Reset view")},icon:T.home,click:function(u){for(var M={"node.groups":[],"node.x":[],"node.y":[]},w=0;w<u._fullData.length;w++){var p=u._fullData[w]._viewInitial;M["node.groups"].push(p.node.groups.slice()),M["node.x"].push(p.node.x.slice()),M["node.y"].push(p.node.y.slice())}y.call("restyle",u,M)}},n.toggleHover={name:"toggleHover",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(u,M){var w=o(u,M);w.hovermode=d(u),y.call("_guiRelayout",u,w)}},n.resetViews={name:"resetViews",title:function(u){return i(u,"Reset views")},icon:T.home,click:function(u,M){var w=M.currentTarget;w.setAttribute("data-attr","zoom"),w.setAttribute("data-val","reset"),r(u,M),w.setAttribute("data-attr","resetLastSave"),s(u,M),x(u,"geo"),x(u,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(u){return i(u,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var M=u._fullLayout,w=M._cartesianSpikesEnabled;M._cartesianSpikesEnabled=w==="on"?"off":"on",y.call("_guiRelayout",u,m(u))}};function m(u){for(var M=u._fullLayout,w=M._cartesianSpikesEnabled==="on",p=A.list(u,null,!0),_={},h=0;h<p.length;h++){var L=p[h];_[L._name+".showspikes"]=w?!0:L._showSpikeInitial}return _}n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return i(u,"Reset view")},attr:"reset",icon:T.home,click:function(u){x(u,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l};function l(u,M){for(var w=M.currentTarget,p=w.getAttribute("data-val"),_=u._fullLayout,h=_._subplots.mapbox||[],L=1.05,E={},S=0;S<h.length;S++){var P=h[S],F=_[P].zoom,I=p==="in"?L*F:F/L;E[P+".zoom"]=I}y.call("_guiRelayout",u,E)}function x(u,M){for(var w=u._fullLayout,p=w._subplots[M]||[],_={},h=0;h<p.length;h++)for(var L=p[h],E=w[L]._subplot,S=E.viewInitial,P=Object.keys(S),F=0;F<P.length;F++){var I=P[F];_[L+"."+I]=S[I]}y.call("_guiRelayout",u,_)}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(t,N,V){var y=t("./buttons"),c=Object.keys(y),A=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(A),e=[],a=function(i){if(T.indexOf(i._cat||i.name)===-1){var n=i.name,r=(i._cat||i.name).toLowerCase();e.indexOf(n)===-1&&e.push(n),e.indexOf(r)===-1&&e.push(r)}};c.forEach(function(i){a(y[i])}),e.sort(),N.exports={DRAW_MODES:A,backButtons:T,foreButtons:e}},{"./buttons":427}],429:[function(t,N,V){var y=t("../../lib"),c=t("../color"),A=t("../../plot_api/plot_template"),T=t("./attributes");N.exports=function(a,i){var n=a.modebar||{},r=A.newContainer(i,"modebar");function v(o,b){return y.coerce(n,r,T,o,b)}v("orientation"),v("bgcolor",c.addOpacity(i.paper_bgcolor,.5));var s=c.contrast(c.rgb(i.modebar.bgcolor));v("color",c.addOpacity(s,.3)),v("activecolor",c.addOpacity(s,.7)),v("uirevision",i.uirevision),v("add"),v("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(t,N,V){N.exports={moduleType:"component",name:"modebar",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),manage:t("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(t,N,V){var y=t("../../plots/cartesian/axis_ids"),c=t("../../traces/scatter/subtypes"),A=t("../../registry"),T=t("../fx/helpers").isUnifiedHover,e=t("./modebar"),a=t("./buttons"),i=t("./constants").DRAW_MODES,n=t("../../lib").extendDeep;N.exports=function(f){var m=f._fullLayout,l=f._context,x=m._modeBar;if(!l.displayModeBar&&!l.watermark){x&&(x.destroy(),delete m._modeBar);return}if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u=l.modeBarButtons,M;Array.isArray(u)&&u.length?M=g(u):!l.displayModeBar&&l.watermark?M=[]:M=r(f),x?x.update(f,M):m._modeBar=e(f,M)};function r(d){var f=d._fullLayout,m=d._fullData,l=d._context;function x(Z,Q){if(typeof Q=="string"){if(Q.toLowerCase()===Z.toLowerCase())return!0}else{var ie=Q.name,oe=Q._cat||Q.name;if(ie===Z||oe===Z.toLowerCase())return!0}return!1}var u=f.modebar.add;typeof u=="string"&&(u=[u]);var M=f.modebar.remove;typeof M=="string"&&(M=[M]);var w=l.modeBarButtonsToAdd.concat(u.filter(function(Z){for(var Q=0;Q<l.modeBarButtonsToRemove.length;Q++)if(x(Z,l.modeBarButtonsToRemove[Q]))return!1;return!0})),p=l.modeBarButtonsToRemove.concat(M.filter(function(Z){for(var Q=0;Q<l.modeBarButtonsToAdd.length;Q++)if(x(Z,l.modeBarButtonsToAdd[Q]))return!1;return!0})),_=f._has("cartesian"),h=f._has("gl3d"),L=f._has("geo"),E=f._has("pie"),S=f._has("funnelarea"),P=f._has("gl2d"),F=f._has("ternary"),I=f._has("mapbox"),D=f._has("polar"),R=f._has("smith"),O=f._has("sankey"),z=v(f),G=T(f.hovermode),Y=[];function ee(Z){if(!!Z.length){for(var Q=[],ie=0;ie<Z.length;ie++){for(var oe=Z[ie],ne=a[oe],le=ne.name.toLowerCase(),_e=(ne._cat||ne.name).toLowerCase(),fe=!1,ye=0;ye<p.length;ye++){var xe=p[ye].toLowerCase();if(xe===le||xe===_e){fe=!0;break}}fe||Q.push(a[oe])}Y.push(Q)}}var j=["toImage"];l.showEditInChartStudio?j.push("editInChartStudio"):l.showSendToCloud&&j.push("sendDataToCloud"),ee(j);var X=[],ae=[],he=[],K=[];(_||P||E||S||F)+L+h+I+D+R>1?(ae=["toggleHover"],he=["resetViews"]):L?(X=["zoomInGeo","zoomOutGeo"],ae=["hoverClosestGeo"],he=["resetGeo"]):h?(ae=["hoverClosest3d"],he=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(X=["zoomInMapbox","zoomOutMapbox"],ae=["toggleHover"],he=["resetViewMapbox"]):P?ae=["hoverClosestGl2d"]:E?ae=["hoverClosestPie"]:O?(ae=["hoverClosestCartesian","hoverCompareCartesian"],he=["resetViewSankey"]):ae=["toggleHover"],_&&(ae=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(o(m)||G)&&(ae=[]),(_||P)&&!z&&(X=["zoomIn2d","zoomOut2d","autoScale2d"],he[0]!=="resetViews"&&(he=["resetScale2d"])),h?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(_||P)&&!z||F?K=["zoom2d","pan2d"]:I||L?K=["pan2d"]:D&&(K=["zoom2d"]),s(m)&&K.push("select2d","lasso2d");var J=[],U=function(Z){J.indexOf(Z)===-1&&ae.indexOf(Z)!==-1&&J.push(Z)};if(Array.isArray(w)){for(var H=[],q=0;q<w.length;q++){var re=w[q];typeof re=="string"?(re=re.toLowerCase(),i.indexOf(re)!==-1?(f._has("mapbox")||f._has("cartesian"))&&K.push(re):re==="togglespikelines"?U("toggleSpikelines"):re==="togglehover"?U("toggleHover"):re==="hovercompare"?U("hoverCompareCartesian"):re==="hoverclosest"?(U("hoverClosestCartesian"),U("hoverClosestGeo"),U("hoverClosest3d"),U("hoverClosestGl2d"),U("hoverClosestPie")):re==="v1hovermode"&&(U("toggleHover"),U("hoverClosestCartesian"),U("hoverCompareCartesian"),U("hoverClosestGeo"),U("hoverClosest3d"),U("hoverClosestGl2d"),U("hoverClosestPie"))):H.push(re)}w=H}return ee(K),ee(X.concat(he)),ee(J),b(Y,w)}function v(d){for(var f=y.list({_fullLayout:d},null,!0),m=0;m<f.length;m++)if(!f[m].fixedrange)return!1;return!0}function s(d){for(var f=!1,m=0;m<d.length&&!f;m++){var l=d[m];!l._module||!l._module.selectPoints||(A.traceIs(l,"scatter-like")?(c.hasMarkers(l)||c.hasText(l))&&(f=!0):A.traceIs(l,"box-violin")?(l.boxpoints==="all"||l.points==="all")&&(f=!0):f=!0)}return f}function o(d){for(var f=0;f<d.length;f++)if(!A.traceIs(d[f],"noHover"))return!1;return!0}function b(d,f){if(f.length)if(Array.isArray(f[0]))for(var m=0;m<f.length;m++)d.push(f[m]);else d.push(f);return d}function g(d){for(var f=n([],d),m=0;m<f.length;m++)for(var l=f[m],x=0;x<l.length;x++){var u=l[x];if(typeof u=="string")if(a[u]!==void 0)f[m][x]=a[u];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return f}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../fonts/ploticon"),e=t("../../version").version,a=new DOMParser;function i(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var n=i.prototype;n.update=function(s,o){this.graphInfo=s;var b=this.graphInfo._context,g=this.graphInfo._fullLayout,d="modebar-"+g._uid;this.element.setAttribute("id",d),this._uid=d,this.element.className="modebar",b.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),g.modebar.orientation==="v"&&(this.element.className+=" vertical",o=o.reverse());var f=g.modebar,m=b.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";A.deleteRelatedStyleRule(d),A.addRelatedStyleRule(d,m+"#"+d+" .modebar-group","background-color: "+f.bgcolor),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+f.color),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+f.activecolor),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+f.activecolor);var l=!this.hasButtons(o),x=this.hasLogo!==b.displaylogo,u=this.locale!==b.locale;if(this.locale=b.locale,(l||x||u)&&(this.removeAllButtons(),this.updateButtons(o),b.watermark||b.displaylogo)){var M=this.getLogo();b.watermark&&(M.className=M.className+" watermark"),g.modebar.orientation==="v"?this.element.insertBefore(M,this.element.childNodes[0]):this.element.appendChild(M),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(s){var o=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(b){var g=o.createGroup();b.forEach(function(d){var f=d.name;if(!f)throw new Error("must provide button 'name' in button config");if(o.buttonsNames.indexOf(f)!==-1)throw new Error("button name '"+f+"' is taken");o.buttonsNames.push(f);var m=o.createButton(d);o.buttonElements.push(m),g.appendChild(m)}),o.element.appendChild(g)})},n.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},n.createButton=function(s){var o=this,b=document.createElement("a");b.setAttribute("rel","tooltip"),b.className="modebar-btn";var g=s.title;g===void 0?g=s.name:typeof g=="function"&&(g=g(this.graphInfo)),(g||g===0)&&b.setAttribute("data-title",g),s.attr!==void 0&&b.setAttribute("data-attr",s.attr);var d=s.val;d!==void 0&&(typeof d=="function"&&(d=d(this.graphInfo)),b.setAttribute("data-val",d));var f=s.click;if(typeof f!="function")throw new Error("must provide button 'click' function in button config");b.addEventListener("click",function(l){s.click(o.graphInfo,l),o.updateActiveButton(l.currentTarget)}),b.setAttribute("data-toggle",s.toggle||!1),s.toggle&&y.select(b).classed("active",!0);var m=s.icon;return typeof m=="function"?b.appendChild(m()):b.appendChild(this.createIcon(m||T.question)),b.setAttribute("data-gravity",s.gravity||"n"),b},n.createIcon=function(s){var o=c(s.height)?Number(s.height):s.ascent-s.descent,b="http://www.w3.org/2000/svg",g;if(s.path){g=document.createElementNS(b,"svg"),g.setAttribute("viewBox",[0,0,s.width,o].join(" ")),g.setAttribute("class","icon");var d=document.createElementNS(b,"path");d.setAttribute("d",s.path),s.transform?d.setAttribute("transform",s.transform):s.ascent!==void 0&&d.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),g.appendChild(d)}if(s.svg){var f=a.parseFromString(s.svg,"application/xml");g=f.childNodes[0]}return g.setAttribute("height","1em"),g.setAttribute("width","1em"),g},n.updateActiveButton=function(s){var o=this.graphInfo._fullLayout,b=s!==void 0?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(g){var d=g.getAttribute("data-val")||!0,f=g.getAttribute("data-attr"),m=g.getAttribute("data-toggle")==="true",l=y.select(g);if(m)f===b&&l.classed("active",!l.classed("active"));else{var x=f===null?f:A.nestedProperty(o,f).get();l.classed("active",x===d)}})},n.hasButtons=function(s){var o=this.buttons;if(!o||s.length!==o.length)return!1;for(var b=0;b<s.length;++b){if(s[b].length!==o[b].length)return!1;for(var g=0;g<s[b].length;g++)if(s[b][g].name!==o[b][g].name)return!1}return!0};function r(s){return s+" (v"+e+")"}n.getLogo=function(){var s=this.createGroup(),o=document.createElement("a");return o.href="https://plotly.com/",o.target="_blank",o.setAttribute("data-title",r(A._(this.graphInfo,"Produced with Plotly.js"))),o.className="modebar-btn plotlyjsicon modebar-btn--logo",o.appendChild(this.createIcon(T.newplotlylogo)),s.appendChild(o),s},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){A.removeElement(this.container.querySelector(".modebar")),A.deleteRelatedStyleRule(this._uid)};function v(s,o){var b=s._fullLayout,g=new i({graphInfo:s,container:b._modebardiv.node(),buttons:o});return b._privateplot&&y.select(g.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),g}N.exports=v},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(t,N,V){var y=t("../../plots/font_attributes"),c=t("../color/attributes"),A=t("../../plot_api/plot_template").templatedArray,T=A("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});N.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:y({editType:"plot"}),bgcolor:{valType:"color",dflt:c.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(t,N,V){N.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(t,N,V){var y=t("../../lib"),c=t("../color"),A=t("../../plot_api/plot_template"),T=t("../../plots/array_container_defaults"),e=t("./attributes"),a=t("./constants");N.exports=function(v,s,o,b,g){var d=v.rangeselector||{},f=A.newContainer(s,"rangeselector");function m(w,p){return y.coerce(d,f,e,w,p)}var l=T(d,f,{name:"buttons",handleItemDefaults:i,calendar:g}),x=m("visible",l.length>0);if(x){var u=n(s,o,b);m("x",u[0]),m("y",u[1]),y.noneOrAll(v,s,["x","y"]),m("xanchor"),m("yanchor"),y.coerceFont(m,"font",o.font);var M=m("bgcolor");m("activecolor",c.contrast(M,a.lightAmount,a.darkAmount)),m("bordercolor"),m("borderwidth")}};function i(r,v,s,o){var b=o.calendar;function g(m,l){return y.coerce(r,v,e.buttons,m,l)}var d=g("visible");if(d){var f=g("step");f!=="all"&&(b&&b!=="gregorian"&&(f==="month"||f==="year")?v.stepmode="backward":g("stepmode"),g("count")),g("label")}}function n(r,v,s){for(var o=s.filter(function(f){return v[f].anchor===r._id}),b=0,g=0;g<o.length;g++){var d=v[o[g]].domain;d&&(b=Math.max(d[1],b))}return[r.domain[0],b+a.yPad]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../registry"),A=t("../../plots/plots"),T=t("../color"),e=t("../drawing"),a=t("../../lib"),i=a.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../plots/cartesian/axis_ids"),v=t("../../constants/alignment"),s=v.LINE_SPACING,o=v.FROM_TL,b=v.FROM_BR,g=t("./constants"),d=t("./get_update_object");N.exports=function(h){var L=h._fullLayout,E=L._infolayer.selectAll(".rangeselector").data(f(h),m);E.enter().append("g").classed("rangeselector",!0),E.exit().remove(),E.style({cursor:"pointer","pointer-events":"all"}),E.each(function(S){var P=y.select(this),F=S,I=F.rangeselector,D=P.selectAll("g.button").data(a.filterVisible(I.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var O=y.select(this),z=d(F,R);R._isActive=l(F,R,z),O.call(x,I,R),O.call(M,I,R,h),O.on("click",function(){h._dragged||c.call("_guiRelayout",h,z)}),O.on("mouseover",function(){R._isHovered=!0,O.call(x,I,R)}),O.on("mouseout",function(){R._isHovered=!1,O.call(x,I,R)})}),p(h,D,I,F._name,P)})};function f(_){for(var h=r.list(_,"x",!0),L=[],E=0;E<h.length;E++){var S=h[E];S.rangeselector&&S.rangeselector.visible&&L.push(S)}return L}function m(_){return _._id}function l(_,h,L){if(h.step==="all")return _.autorange===!0;var E=Object.keys(L);return _.range[0]===L[E[0]]&&_.range[1]===L[E[1]]}function x(_,h,L){var E=a.ensureSingle(_,"rect","selector-rect",function(S){S.attr("shape-rendering","crispEdges")});E.attr({rx:g.rx,ry:g.ry}),E.call(T.stroke,h.bordercolor).call(T.fill,u(h,L)).style("stroke-width",h.borderwidth+"px")}function u(_,h){return h._isActive||h._isHovered?_.activecolor:_.bgcolor}function M(_,h,L,E){function S(F){n.convertToTspans(F,E)}var P=a.ensureSingle(_,"text","selector-text",function(F){F.attr("text-anchor","middle")});P.call(e.font,h.font).text(w(L,E._fullLayout._meta)).call(S)}function w(_,h){return _.label?h?a.templateString(_.label,h):_.label:_.step==="all"?"all":_.count+_.step.charAt(0)}function p(_,h,L,E,S){var P=0,F=0,I=L.borderwidth;h.each(function(){var Y=y.select(this),ee=Y.select(".selector-text"),j=L.font.size*s,X=Math.max(j*n.lineCount(ee),16)+3;F=Math.max(F,X)}),h.each(function(){var Y=y.select(this),ee=Y.select(".selector-rect"),j=Y.select(".selector-text"),X=j.node()&&e.bBox(j.node()).width,ae=L.font.size*s,he=n.lineCount(j),K=Math.max(X+10,g.minButtonWidth);Y.attr("transform",i(I+P,I)),ee.attr({x:0,y:0,width:K,height:F}),n.positionText(j,K/2,F/2-(he-1)*ae/2+3),P+=K+5});var D=_._fullLayout._size,R=D.l+D.w*L.x,O=D.t+D.h*(1-L.y),z="left";a.isRightAnchor(L)&&(R-=P,z="right"),a.isCenterAnchor(L)&&(R-=P/2,z="center");var G="top";a.isBottomAnchor(L)&&(O-=F,G="bottom"),a.isMiddleAnchor(L)&&(O-=F/2,G="middle"),P=Math.ceil(P),F=Math.ceil(F),R=Math.round(R),O=Math.round(O),A.autoMargin(_,E+"-range-selector",{x:L.x,y:L.y,l:P*o[z],r:P*b[z],b:F*b[G],t:F*o[G]}),S.attr("transform",i(R,O))}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(t,N,V){var y=t("d3-time"),c=t("../../lib").titleCase;N.exports=function(e,a){var i=e._name,n={};if(a.step==="all")n[i+".autorange"]=!0;else{var r=A(e,a);n[i+".range[0]"]=r[0],n[i+".range[1]"]=r[1]}return n};function A(T,e){var a=T.range,i=new Date(T.r2l(a[1])),n=e.step,r=y["utc"+c(n)],v=e.count,s;switch(e.stepmode){case"backward":s=T.l2r(+r.offset(i,-v));break;case"todate":var o=r.offset(i,-v);s=T.l2r(+r.ceil(o));break}var b=a[1];return[s,b]}},{"../../lib":515,"d3-time":122}],438:[function(t,N,V){N.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(t,N,V){var y=t("../color/attributes");N.exports={bgcolor:{valType:"color",dflt:y.background,editType:"plot"},bordercolor:{valType:"color",dflt:y.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(t,N,V){var y=t("../../plots/cartesian/axis_ids").list,c=t("../../plots/cartesian/autorange").getAutoRange,A=t("./constants");N.exports=function(e){for(var a=y(e,"x",!0),i=0;i<a.length;i++){var n=a[i],r=n[A.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=c(e,n))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(t,N,V){N.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(t,N,V){var y=t("../../lib"),c=t("../../plot_api/plot_template"),A=t("../../plots/cartesian/axis_ids"),T=t("./attributes"),e=t("./oppaxis_attributes");N.exports=function(i,n,r){var v=i[r],s=n[r];if(!(v.rangeslider||n._requestRangeslider[s._id]))return;y.isPlainObject(v.rangeslider)||(v.rangeslider={});var o=v.rangeslider,b=c.newContainer(s,"rangeslider");function g(E,S){return y.coerce(o,b,T,E,S)}var d,f;function m(E,S){return y.coerce(d,f,e,E,S)}var l=g("visible");if(!!l){g("bgcolor",n.plot_bgcolor),g("bordercolor"),g("borderwidth"),g("thickness"),g("autorange",!s.isValidRange(o.range)),g("range");var x=n._subplots;if(x)for(var u=x.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===A.name2id(r)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),M=y.simpleMap(u,A.id2name),w=0;w<M.length;w++){var p=M[w];d=o[p]||{},f=c.newContainer(b,p,"yaxis");var _=n[p],h;d.range&&_.isValidRange(d.range)&&(h="fixed");var L=m("rangemode",h);L!=="match"&&m("range",_.range.slice())}b._input=o}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../registry"),A=t("../../plots/plots"),T=t("../../lib"),e=T.strTranslate,a=t("../drawing"),i=t("../color"),n=t("../titles"),r=t("../../plots/cartesian"),v=t("../../plots/cartesian/axis_ids"),s=t("../dragelement"),o=t("../../lib/setcursor"),b=t("./constants");N.exports=function(_){for(var h=_._fullLayout,L=h._rangeSliderData,E=0;E<L.length;E++){var S=L[E][b.name];S._clipId=S._id+"-"+h._uid}function P(I){return I._name}var F=h._infolayer.selectAll("g."+b.containerClassName).data(L,P);F.exit().each(function(I){var D=I[b.name];h._topdefs.select("#"+D._clipId).remove()}).remove(),L.length!==0&&(F.enter().append("g").classed(b.containerClassName,!0).attr("pointer-events","all"),F.each(function(I){var D=y.select(this),R=I[b.name],O=h[v.id2name(I.anchor)],z=R[v.id2name(I.anchor)];if(R.range){var G=T.simpleMap(R.range,I.r2l),Y=T.simpleMap(I.range,I.r2l),ee;Y[0]<Y[1]?ee=[Math.min(G[0],Y[0]),Math.max(G[1],Y[1])]:ee=[Math.max(G[0],Y[0]),Math.min(G[1],Y[1])],R.range=R._input.range=T.simpleMap(ee,I.l2r)}I.cleanRange("rangeslider.range");var j=h._size,X=I.domain;R._width=j.w*(X[1]-X[0]);var ae=Math.round(j.l+j.w*X[0]),he=Math.round(j.t+j.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+R._offsetShift+b.extraPad);D.attr("transform",e(ae,he)),R._rl=T.simpleMap(R.range,I.r2l);var K=R._rl[0],J=R._rl[1],U=J-K;if(R.p2d=function(_e){return _e/R._width*U+K},R.d2p=function(_e){return(_e-K)/U*R._width},I.rangebreaks){var H=I.locateBreaks(K,J);if(H.length){var q,re,Z=0;for(q=0;q<H.length;q++)re=H[q],Z+=re.max-re.min;var Q=R._width/(J-K-Z),ie=[-Q*K];for(q=0;q<H.length;q++)re=H[q],ie.push(ie[ie.length-1]-Q*(re.max-re.min));for(R.d2p=function(_e){for(var fe=ie[0],ye=0;ye<H.length;ye++){var xe=H[ye];if(_e>=xe.max)fe=ie[ye+1];else if(_e<xe.min)break}return fe+Q*_e},q=0;q<H.length;q++)re=H[q],re.pmin=R.d2p(re.min),re.pmax=R.d2p(re.max);R.p2d=function(_e){for(var fe=ie[0],ye=0;ye<H.length;ye++){var xe=H[ye];if(_e>=xe.pmax)fe=ie[ye+1];else if(_e<xe.pmin)break}return(_e-fe)/Q}}}if(z.rangemode!=="match"){var oe=O.r2l(z.range[0]),ne=O.r2l(z.range[1]),le=ne-oe;R.d2pOppAxis=function(_e){return(_e-oe)/le*R._height}}D.call(m,_,I,R).call(l,_,I,R).call(x,_,I,R).call(M,_,I,R,z).call(w,_,I,R).call(p,_,I,R),g(D,_,I,R),f(D,_,I,R,O,z),I.side==="bottom"&&n.draw(_,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:h._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:he+R._height+R._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function g(_,h,L,E){if(h._context.staticPlot)return;var S=_.select("rect."+b.slideBoxClassName).node(),P=_.select("rect."+b.grabAreaMinClassName).node(),F=_.select("rect."+b.grabAreaMaxClassName).node();function I(){var D=y.event,R=D.target,O=D.clientX||D.touches[0].clientX,z=O-_.node().getBoundingClientRect().left,G=E.d2p(L._rl[0]),Y=E.d2p(L._rl[1]),ee=s.coverSlip();this.addEventListener("touchmove",j),this.addEventListener("touchend",X),ee.addEventListener("mousemove",j),ee.addEventListener("mouseup",X);function j(ae){var he=ae.clientX||ae.touches[0].clientX,K=+he-O,J,U,H;switch(R){case S:H="ew-resize",J=G+K,U=Y+K;break;case P:H="col-resize",J=G+K,U=Y;break;case F:H="col-resize",J=G,U=Y+K;break;default:H="ew-resize",J=z,U=z+K;break}if(U<J){var q=U;U=J,J=q}E._pixelMin=J,E._pixelMax=U,o(y.select(ee),H),d(_,h,L,E)}function X(){ee.removeEventListener("mousemove",j),ee.removeEventListener("mouseup",X),this.removeEventListener("touchmove",j),this.removeEventListener("touchend",X),T.removeElement(ee)}}_.on("mousedown",I),_.on("touchstart",I)}function d(_,h,L,E){function S(I){return L.l2r(T.constrain(I,E._rl[0],E._rl[1]))}var P=S(E.p2d(E._pixelMin)),F=S(E.p2d(E._pixelMax));window.requestAnimationFrame(function(){c.call("_guiRelayout",h,L._name+".range",[P,F])})}function f(_,h,L,E,S,P){var F=b.handleWidth/2;function I(ae){return T.constrain(ae,0,E._width)}function D(ae){return T.constrain(ae,0,E._height)}function R(ae){return T.constrain(ae,-F,E._width+F)}var O=I(E.d2p(L._rl[0])),z=I(E.d2p(L._rl[1]));if(_.select("rect."+b.slideBoxClassName).attr("x",O).attr("width",z-O),_.select("rect."+b.maskMinClassName).attr("width",O),_.select("rect."+b.maskMaxClassName).attr("x",z).attr("width",E._width-z),P.rangemode!=="match"){var G=E._height-D(E.d2pOppAxis(S._rl[1])),Y=E._height-D(E.d2pOppAxis(S._rl[0]));_.select("rect."+b.maskMinOppAxisClassName).attr("x",O).attr("height",G).attr("width",z-O),_.select("rect."+b.maskMaxOppAxisClassName).attr("x",O).attr("y",Y).attr("height",E._height-Y).attr("width",z-O),_.select("rect."+b.slideBoxClassName).attr("y",G).attr("height",Y-G)}var ee=.5,j=Math.round(R(O-F))-ee,X=Math.round(R(z-F))+ee;_.select("g."+b.grabberMinClassName).attr("transform",e(j,ee)),_.select("g."+b.grabberMaxClassName).attr("transform",e(X,ee))}function m(_,h,L,E){var S=T.ensureSingle(_,"rect",b.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=E.borderwidth%2===0?E.borderwidth:E.borderwidth-1,F=-E._offsetShift,I=a.crispRound(h,E.borderwidth);S.attr({width:E._width+P,height:E._height+P,transform:e(F,F),"stroke-width":I}).call(i.stroke,E.bordercolor).call(i.fill,E.bgcolor)}function l(_,h,L,E){var S=h._fullLayout,P=T.ensureSingleById(S._topdefs,"clipPath",E._clipId,function(F){F.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:E._width,height:E._height})}function x(_,h,L,E){var S=h.calcdata,P=_.selectAll("g."+b.rangePlotClassName).data(L._subplotsWith,T.identity);P.enter().append("g").attr("class",function(I){return b.rangePlotClassName+" "+I}).call(a.setClipUrl,E._clipId,h),P.order(),P.exit().remove();var F;P.each(function(I,D){var R=y.select(this),O=D===0,z=v.getFromId(h,I,"y"),G=z._name,Y=E[G],ee={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:E.range.slice(),calendar:L.calendar},width:E._width,height:E._height,margin:{t:0,b:0,l:0,r:0}},_context:h._context};L.rangebreaks&&(ee.layout.xaxis.rangebreaks=L.rangebreaks),ee.layout[G]={type:z.type,domain:[0,1],range:Y.rangemode!=="match"?Y.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(ee.layout[G].rangebreaks=z.rangebreaks),A.supplyDefaults(ee);var j=ee._fullLayout.xaxis,X=ee._fullLayout[G];j.clearCalc(),j.setScale(),X.clearCalc(),X.setScale();var ae={id:I,plotgroup:R,xaxis:j,yaxis:X,isRangePlot:!0};O?F=ae:(ae.mainplot="xy",ae.mainplotinfo=F),r.rangePlot(h,ae,u(S,I))})}function u(_,h){for(var L=[],E=0;E<_.length;E++){var S=_[E],P=S[0].trace;P.xaxis+P.yaxis===h&&L.push(S)}return L}function M(_,h,L,E,S){var P=T.ensureSingle(_,"rect",b.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",E._height).call(i.fill,b.maskColor);var F=T.ensureSingle(_,"rect",b.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(F.attr("height",E._height).call(i.fill,b.maskColor),S.rangemode!=="match"){var I=T.ensureSingle(_,"rect",b.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",E._width).call(i.fill,b.maskOppAxisColor);var D=T.ensureSingle(_,"rect",b.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",E._width).style("border-top",b.maskOppBorder).call(i.fill,b.maskOppAxisColor)}}function w(_,h,L,E){if(!h._context.staticPlot){var S=T.ensureSingle(_,"rect",b.slideBoxClassName,function(P){P.attr({y:0,cursor:b.slideBoxCursor,"shape-rendering":"crispEdges"})});S.attr({height:E._height,fill:b.slideBoxFill})}}function p(_,h,L,E){var S=T.ensureSingle(_,"g",b.grabberMinClassName),P=T.ensureSingle(_,"g",b.grabberMaxClassName),F={x:0,width:b.handleWidth,rx:b.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":b.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(E._height/4),height:Math.round(E._height/2)},D=T.ensureSingle(S,"rect",b.handleMinClassName,function(Y){Y.attr(F)});D.attr(I);var R=T.ensureSingle(P,"rect",b.handleMaxClassName,function(Y){Y.attr(F)});R.attr(I);var O={width:b.grabAreaWidth,x:0,y:0,fill:b.grabAreaFill,cursor:h._context.staticPlot?void 0:b.grabAreaCursor},z=T.ensureSingle(S,"rect",b.grabAreaMinClassName,function(Y){Y.attr(O)});z.attr("height",E._height);var G=T.ensureSingle(P,"rect",b.grabAreaMaxClassName,function(Y){Y.attr(O)});G.attr("height",E._height)}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(t,N,V){var y=t("../../plots/cartesian/axis_ids"),c=t("../../lib/svg_text_utils"),A=t("./constants"),T=t("../../constants/alignment").LINE_SPACING,e=A.name;function a(i){var n=i&&i[e];return n&&n.visible}V.isVisible=a,V.makeData=function(i){var n=y.list({_fullLayout:i},"x",!0),r=i.margin,v=[];if(!i._has("gl2d"))for(var s=0;s<n.length;s++){var o=n[s];if(a(o)){v.push(o);var b=o[e];b._id=e+o._id,b._height=(i.height-r.b-r.t)*b.thickness,b._offsetShift=Math.floor(b.borderwidth/2)}}i._rangeSliderData=v},V.autoMarginOpts=function(i,n){var r=i._fullLayout,v=n[e],s=n._id.charAt(0),o=0,b=0;if(n.side==="bottom"&&(o=n._depth,n.title.text!==r._dfltTitle[s])){b=1.5*n.title.font.size+10+v._offsetShift;var g=(n.title.text.match(c.BR_TAG_ALL)||[]).length;b+=g*n.title.font.size*T}return{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:v._height+o+Math.max(r.margin.b,b),pad:A.extraPad+v._offsetShift*2}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("./oppaxis_attributes"),T=t("./helpers");N.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:y.extendFlat({},c,{yaxis:A})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(t,N,V){N.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(t,N,V){var y=t("../annotations/attributes"),c=t("../../traces/scatter/attributes").line,A=t("../drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),N.exports=e(a("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},y.xref,{}),yref:T({},y.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:c.color,width:T({},c.width,{min:1,dflt:1}),dash:T({},A,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(t,N,V){N.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e=t("../shapes/helpers");N.exports=function(n,r){A(n,r,{name:"selections",handleItemDefaults:a});for(var v=r.selections,s=0;s<v.length;s++){var o=v[s];!o||o.path===void 0&&(o.x0===void 0||o.x1===void 0||o.y0===void 0||o.y1===void 0)&&(r.selections[s]=null)}};function a(i,n,r){function v(P,F){return y.coerce(i,n,T,P,F)}var s=v("path"),o=s?"path":"rect",b=v("type",o),g=b!=="path";g&&delete n.path,v("opacity"),v("line.color"),v("line.width"),v("line.dash");for(var d=["x","y"],f=0;f<2;f++){var m=d[f],l={_fullLayout:r},x,u,M,w=c.coerceRef(i,n,l,m);if(x=c.getFromId(l,w),x._selectionIndices.push(n._index),M=e.rangeToShapePosition(x),u=e.shapePositionToRange(x),g){var p=m+"0",_=m+"1",h=i[p],L=i[_];i[p]=u(i[p],!0),i[_]=u(i[_],!0),c.coercePosition(n,l,v,w,p),c.coercePosition(n,l,v,w,_);var E=n[p],S=n[_];E!==void 0&&S!==void 0&&(n[p]=M(E),n[_]=M(S),i[p]=h,i[_]=L)}}g&&y.noneOrAll(i,n,["x0","x1","y0","y1"])}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(t,N,V){var y=t("../shapes/draw_newshape/helpers").readPaths,c=t("../shapes/display_outlines"),A=t("../shapes/handle_outline").clearOutlineControllers,T=t("../color"),e=t("../drawing"),a=t("../../plot_api/plot_template").arrayEditor,i=t("../shapes/helpers"),n=i.getPathString;N.exports={draw:r,drawOne:s,activateLastSelection:g};function r(f){var m=f._fullLayout;A(f),m._selectionLayer.selectAll("path").remove();for(var l in m._plots){var x=m._plots[l].selectionLayer;x&&x.selectAll("path").remove()}for(var u=0;u<m.selections.length;u++)s(f,u)}function v(f){return f._context.editSelection}function s(f,m){f._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+m+'"]').remove();var l=i.makeSelectionsOptionsAndPlotinfo(f,m),x=l.options,u=l.plotinfo;if(!x._input)return;M(f._fullLayout._selectionLayer);function M(w){var p=n(f,x),_={"data-index":m,"fill-rule":"evenodd",d:p},h=x.opacity,L="rgba(0,0,0,0)",E=x.line.color||T.contrast(f._fullLayout.plot_bgcolor),S=x.line.width,P=x.line.dash;S||(S=5,P="solid");var F=v(f)&&f._fullLayout._activeSelectionIndex===m;F&&(L=f._fullLayout.activeselection.fillcolor,h=f._fullLayout.activeselection.opacity);for(var I=[],D=1;D>=0;D--){var R=w.append("path").attr(_).style("opacity",D?.1:h).call(T.stroke,E).call(T.fill,L).call(e.dashLine,D?"solid":P,D?4+S:S);if(o(R,f,x),F){var O=a(f.layout,"selections",x);R.style({cursor:"move"});var z={element:R.node(),plotinfo:u,gd:f,editHelpers:O,isActiveSelection:!0},G=y(p,f);c(G,R,z)}else R.style("pointer-events",D?"all":"none");I[D]=R}var Y=I[0],ee=I[1];ee.node().addEventListener("click",function(){return b(f,Y)})}}function o(f,m,l){var x=l.xref+l.yref;e.setClipUrl(f,"clip"+m._fullLayout._uid+x,m)}function b(f,m){if(!!v(f)){var l=m.node(),x=+l.getAttribute("data-index");if(x>=0){if(x===f._fullLayout._activeSelectionIndex){d(f);return}f._fullLayout._activeSelectionIndex=x,f._fullLayout._deactivateSelection=d,r(f)}}}function g(f){if(!!v(f)){var m=f._fullLayout.selections.length-1;f._fullLayout._activeSelectionIndex=m,f._fullLayout._deactivateSelection=d,r(f)}}function d(f){if(!!v(f)){var m=f._fullLayout._activeSelectionIndex;m>=0&&(A(f),delete f._fullLayout._activeSelectionIndex,r(f))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(t,N,V){var y=t("../../drawing/attributes").dash,c=t("../../../lib/extend").extendFlat;N.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:c({},y,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(t,N,V){N.exports=function(c,A,T){T("newselection.mode");var e=T("newselection.line.width");e&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},{}],453:[function(t,N,V){var y=t("../../dragelement/helpers"),c=y.selectMode,A=t("../../shapes/handle_outline"),T=A.clearOutline,e=t("../../shapes/draw_newshape/helpers"),a=e.readPaths,i=e.writePaths,n=e.fixDatesForPaths;N.exports=function(v,s){if(!!v.length){var o=v[0][0];if(!!o){var b=o.getAttribute("d"),g=s.gd,d=g._fullLayout.newselection,f=s.plotinfo,m=f.xaxis,l=f.yaxis,x=s.isActiveSelection,u=s.dragmode,M=(g.layout||{}).selections||[];if(!c(u)&&x!==void 0){var w=g._fullLayout._activeSelectionIndex;if(w<M.length)switch(g._fullLayout.selections[w].type){case"rect":u="select";break;case"path":u="lasso";break}}var p=a(b,g,f,x),_={xref:m._id,yref:l._id,opacity:d.opacity,line:{color:d.line.color,width:d.line.width,dash:d.line.dash}},h;p.length===1&&(h=p[0]),h&&h.length===5&&u==="select"?(_.type="rect",_.x0=h[0][1],_.y0=h[0][2],_.x1=h[2][1],_.y1=h[2][2]):(_.type="path",m&&l&&n(p,m,l),_.path=i(p),h=null),T(g);for(var L=s.editHelpers,E=(L||{}).modifyItem,S=[],P=0;P<M.length;P++){var F=g._fullLayout.selections[P];if(!F){S[P]=F;continue}if(S[P]=F._input,x!==void 0&&P===g._fullLayout._activeSelectionIndex){var I=_;switch(F.type){case"rect":E("x0",I.x0),E("x1",I.x1),E("y0",I.y0),E("y1",I.y1);break;case"path":E("path",I.path);break}}}return x===void 0?(S.push(_),S):L?L.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(t,N,V){var y=t("../../lib").strTranslate;function c(a,i){switch(a.type){case"log":return a.p2d(i);case"date":return a.p2r(i,0,a.calendar);default:return a.p2r(i)}}function A(a,i){switch(a.type){case"log":return a.d2p(i);case"date":return a.r2p(i,0,a.calendar);default:return a.r2p(i)}}function T(a){var i=a._id.charAt(0)==="y"?1:0;return function(n){return c(a,n[i])}}function e(a){return y(a.xaxis._offset,a.yaxis._offset)}N.exports={p2r:c,r2p:A,axValue:T,getTransform:e}},{"../../lib":515}],455:[function(t,N,V){var y=t("./draw"),c=t("./select");N.exports={moduleType:"component",name:"selections",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewSelectionDefaults:t("./draw_newselection/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("selections"),draw:y.draw,drawOne:y.drawOne,reselect:c.reselect,prepSelect:c.prepSelect,clearOutline:c.clearOutline,clearSelectionsCache:c.clearSelectionsCache,selectOnClick:c.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(t,N,V){var y=t("polybooljs"),c=t("point-in-polygon/nested"),A=t("../../registry"),T=t("../drawing").dashStyle,e=t("../color"),a=t("../fx"),i=t("../fx/helpers").makeEventData,n=t("../dragelement/helpers"),r=n.freeMode,v=n.rectMode,s=n.drawMode,o=n.openMode,b=n.selectMode,g=t("../shapes/helpers"),d=t("../shapes/constants"),f=t("../shapes/display_outlines"),m=t("../shapes/handle_outline").clearOutline,l=t("../shapes/draw_newshape/helpers"),x=l.handleEllipse,u=l.readPaths,M=t("../shapes/draw_newshape/newshapes"),w=t("./draw_newselection/newselections"),p=t("./draw").activateLastSelection,_=t("../../lib"),h=_.sorterAsc,L=t("../../lib/polygon"),E=t("../../lib/throttle"),S=t("../../plots/cartesian/axis_ids").getFromId,P=t("../../lib/clear_gl_canvases"),F=t("../../plot_api/subroutines").redrawReglTraces,I=t("./constants"),D=I.MINSELECT,R=L.filter,O=L.tester,z=t("./helpers"),G=z.p2r,Y=z.axValue,ee=z.getTransform;function j(Xe){return Xe.subplot!==void 0}function X(Xe,it,Ye,Ee,Ge){var Ke=!j(Ee),qe=r(Ge),At=v(Ge),mt=o(Ge),Mt=s(Ge),Gt=b(Ge),zt=Ge==="drawline",Ht=Ge==="drawcircle",Zt=zt||Ht,Wt=Ee.gd,sr=Wt._fullLayout,Gr=Gt&&sr.newselection.mode==="immediate"&&Ke,cn=sr._zoomlayer,qr=Ee.element.getBoundingClientRect(),st=Ee.plotinfo,rr=ee(st),$t=it-qr.left,hr=Ye-qr.top;sr._calcInverseTransform(Wt);var Sr=_.apply3DTransform(sr._invTransform)($t,hr);$t=Sr[0],hr=Sr[1];var tt=sr._invScaleX,Qe=sr._invScaleY,lt=$t,ft=hr,Et="M"+$t+","+hr,Vt=Ee.xaxes[0],Pe=Ee.yaxes[0],Se=Vt._length,ot=Pe._length,ct=Xe.altKey&&!(s(Ge)&&mt),pt,St,xt,Pt,Xt,or,Pr;H(Xe,Wt,Ee),qe&&(pt=R([[$t,hr]],I.BENDPX));var Ar=cn.selectAll("path.select-outline-"+st.id).data([1]),Er=Mt?sr.newshape:sr.newselection,Jr=Mt&&!mt?Er.fillcolor:"rgba(0,0,0,0)",lr=Er.line.color||(Ke?e.contrast(Wt._fullLayout.plot_bgcolor):"#7f7f7f");Ar.enter().append("path").attr("class","select-outline select-outline-"+st.id).style({opacity:Mt?Er.opacity/2:1,"stroke-dasharray":T(Er.line.dash,Er.line.width),"stroke-width":Er.line.width+"px","shape-rendering":"crispEdges"}).call(e.stroke,lr).call(e.fill,Jr).attr("fill-rule","evenodd").classed("cursor-move",!!Mt).attr("transform",rr).attr("d",Et+"Z");var br=cn.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",rr).attr("d","M0,0Z"),Fr=sr._uid+I.SELECTID,Hr=[],Lr=ie(Wt,Ee.xaxes,Ee.yaxes,Ee.subplot);Gr&&!Xe.shiftKey&&(Ee._clearSubplotSelections=function(){if(!!Ke){var Rt=Vt._id,Kt=Pe._id;We(Wt,Rt,Kt,Lr);for(var ur=(Wt.layout||{}).selections||[],Nr=[],Vr=!1,Dr=0;Dr<ur.length;Dr++){var Mr=sr.selections[Dr];Mr.xref!==Rt||Mr.yref!==Kt?Nr.push(ur[Dr]):Vr=!0}Vr&&(Wt._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",Wt,{selections:Nr}))}});var at=Ct(Ee);Ee.moveFn=function(Rt,Kt){Ee._clearSubplotSelections&&(Ee._clearSubplotSelections(),Ee._clearSubplotSelections=void 0),lt=Math.max(0,Math.min(Se,tt*Rt+$t)),ft=Math.max(0,Math.min(ot,Qe*Kt+hr));var ur=Math.abs(lt-$t),Nr=Math.abs(ft-hr);if(At){var Vr,Dr,Mr;if(Gt){var jr=sr.selectdirection;switch(jr==="any"?Nr<Math.min(ur*.6,D)?Vr="h":ur<Math.min(Nr*.6,D)?Vr="v":Vr="d":Vr=jr,Vr){case"h":Dr=Ht?ot/2:0,Mr=ot;break;case"v":Dr=Ht?Se/2:0,Mr=Se;break}}if(Mt)switch(sr.newshape.drawdirection){case"vertical":Vr="h",Dr=Ht?ot/2:0,Mr=ot;break;case"horizontal":Vr="v",Dr=Ht?Se/2:0,Mr=Se;break;case"ortho":ur<Nr?(Vr="h",Dr=hr,Mr=ft):(Vr="v",Dr=$t,Mr=lt);break;default:Vr="d"}Vr==="h"?(Pt=Zt?x(Ht,[lt,Dr],[lt,Mr]):[[$t,Dr],[$t,Mr],[lt,Mr],[lt,Dr]],Pt.xmin=Zt?lt:Math.min($t,lt),Pt.xmax=Zt?lt:Math.max($t,lt),Pt.ymin=Math.min(Dr,Mr),Pt.ymax=Math.max(Dr,Mr),br.attr("d","M"+Pt.xmin+","+(hr-D)+"h-4v"+2*D+"h4ZM"+(Pt.xmax-1)+","+(hr-D)+"h4v"+2*D+"h-4Z")):Vr==="v"?(Pt=Zt?x(Ht,[Dr,ft],[Mr,ft]):[[Dr,hr],[Dr,ft],[Mr,ft],[Mr,hr]],Pt.xmin=Math.min(Dr,Mr),Pt.xmax=Math.max(Dr,Mr),Pt.ymin=Zt?ft:Math.min(hr,ft),Pt.ymax=Zt?ft:Math.max(hr,ft),br.attr("d","M"+($t-D)+","+Pt.ymin+"v-4h"+2*D+"v4ZM"+($t-D)+","+(Pt.ymax-1)+"v4h"+2*D+"v-4Z")):Vr==="d"&&(Pt=Zt?x(Ht,[$t,hr],[lt,ft]):[[$t,hr],[$t,ft],[lt,ft],[lt,hr]],Pt.xmin=Math.min($t,lt),Pt.xmax=Math.max($t,lt),Pt.ymin=Math.min(hr,ft),Pt.ymax=Math.max(hr,ft),br.attr("d","M0,0Z"))}else qe&&(pt.addPt([lt,ft]),Pt=pt.filtered);if(Ee.selectionDefs&&Ee.selectionDefs.length?(xt=be(Ee.mergedPolygons,Pt,ct),Pt.subtract=ct,St=U(Ee.selectionDefs.concat([Pt]))):(xt=[Pt],St=O(Pt)),f(De(xt,mt),Ar,Ee),Gt){var kn=Ae(Wt,!1),yn=kn.eventData?kn.eventData.points.slice():[];kn=Ae(Wt,!1,St,Lr,Ee),St=kn.selectionTesters,Pr=kn.eventData;var Wn;pt?Wn=pt.filtered:Wn=Ft(xt),E.throttle(Fr,I.SELECTDELAY,function(){Hr=He(St,Lr);for(var In=Hr.slice(),$n=0;$n<yn.length;$n++){for(var Kn=yn[$n],ya=!1,Ra=0;Ra<In.length;Ra++)if(In[Ra].curveNumber===Kn.curveNumber&&In[Ra].pointNumber===Kn.pointNumber){ya=!0;break}ya||In.push(Kn)}In.length&&(Pr||(Pr={}),Pr.points=In),at(Pr,Wn),jt(Wt,Pr)})}},Ee.clickFn=function(Rt,Kt){if(br.remove(),Wt._fullLayout._activeShapeIndex>=0){Wt._fullLayout._deactivateShape(Wt);return}if(!Mt){var ur=sr.clickmode;E.done(Fr).then(function(){if(E.clear(Fr),Rt===2){for(Ar.remove(),Xt=0;Xt<Lr.length;Xt++)or=Lr[Xt],or._module.selectPoints(or,!1);if(xe(Wt,Lr),Z(Ee),Lt(Wt),Lr.length){var Nr=Lr[0].xaxis,Vr=Lr[0].yaxis;if(Nr&&Vr){for(var Dr=[],Mr=Wt._fullLayout.selections,jr=0;jr<Mr.length;jr++){var kn=Mr[jr];!kn||(kn.xref!==Nr._id||kn.yref!==Vr._id)&&Dr.push(kn)}Dr.length<Mr.length&&(Wt._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",Wt,{selections:Dr}))}}}else ur.indexOf("select")>-1&&ae(Kt,Wt,Ee.xaxes,Ee.yaxes,Ee.subplot,Ee,Ar),ur==="event"&&Nt(Wt,void 0);a.click(Wt,Kt)}).catch(_.error)}},Ee.doneFn=function(){br.remove(),E.done(Fr).then(function(){E.clear(Fr),!Gr&&Pt&&Ee.selectionDefs&&(Pt.subtract=ct,Ee.selectionDefs.push(Pt),Ee.mergedPolygons.length=0,[].push.apply(Ee.mergedPolygons,xt)),(Gr||Mt)&&Z(Ee,Gr),Ee.doneFnCompleted&&Ee.doneFnCompleted(Hr),Gt&&Nt(Wt,Pr)}).catch(_.error)}}function ae(Xe,it,Ye,Ee,Ge,Ke,qe){var At=it._hoverdata,mt=it._fullLayout,Mt=mt.clickmode,Gt=Mt.indexOf("event")>-1,zt=[],Ht,Zt,Wt,sr,Gr,cn,qr,st,rr,$t;if(ne(At)){H(Xe,it,Ke),Ht=ie(it,Ye,Ee,Ge);var hr=le(At,Ht),Sr=hr.pointNumbers.length>0;if(Sr?fe(Ht,hr):ye(Ht)&&(qr=_e(hr))){for(qe&&qe.remove(),$t=0;$t<Ht.length;$t++)Zt=Ht[$t],Zt._module.selectPoints(Zt,!1);xe(it,Ht),Z(Ke),Gt&&Lt(it)}else{st=Xe.shiftKey&&(qr!==void 0?qr:_e(hr)),Wt=he(hr.pointNumber,hr.searchInfo,st);var tt=Ke.selectionDefs.concat([Wt]);for(sr=U(tt),$t=0;$t<Ht.length;$t++)if(Gr=Ht[$t]._module.selectPoints(Ht[$t],sr),cn=ke(Gr,Ht[$t]),zt.length)for(var Qe=0;Qe<cn.length;Qe++)zt.push(cn[Qe]);else zt=cn;if(rr={points:zt},xe(it,Ht,rr),Wt&&Ke&&Ke.selectionDefs.push(Wt),qe){var lt=Ke.mergedPolygons,ft=o(Ke.dragmode);f(De(lt,ft),qe,Ke)}Gt&&Nt(it,rr)}}}function he(Xe,it,Ye){return{pointNumber:Xe,searchInfo:it,subtract:!!Ye}}function K(Xe){return"pointNumber"in Xe&&"searchInfo"in Xe}function J(Xe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(it,Ye,Ee,Ge){var Ke=Xe.searchInfo.cd[0].trace._expandedIndex,qe=Ge.cd[0].trace._expandedIndex;return qe===Ke&&Ee===Xe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Xe.subtract}}function U(Xe){if(!Xe.length)return;for(var it=[],Ye=K(Xe[0])?0:Xe[0][0][0],Ee=Ye,Ge=K(Xe[0])?0:Xe[0][0][1],Ke=Ge,qe=0;qe<Xe.length;qe++)if(K(Xe[qe]))it.push(J(Xe[qe]));else{var At=O(Xe[qe]);At.subtract=!!Xe[qe].subtract,it.push(At),Ye=Math.min(Ye,At.xmin),Ee=Math.max(Ee,At.xmax),Ge=Math.min(Ge,At.ymin),Ke=Math.max(Ke,At.ymax)}function mt(Mt,Gt,zt,Ht){for(var Zt=!1,Wt=0;Wt<it.length;Wt++)it[Wt].contains(Mt,Gt,zt,Ht)&&(Zt=!it[Wt].subtract);return Zt}return{xmin:Ye,xmax:Ee,ymin:Ge,ymax:Ke,pts:[],contains:mt,isRect:!1,degenerate:!1}}function H(Xe,it,Ye){var Ee=it._fullLayout,Ge=Ye.plotinfo,Ke=Ye.dragmode,qe=Ee._lastSelectedSubplot&&Ee._lastSelectedSubplot===Ge.id,At=(Xe.shiftKey||Xe.altKey)&&!(s(Ke)&&o(Ke));qe&&At&&Ge.selection&&Ge.selection.selectionDefs&&!Ye.selectionDefs?(Ye.selectionDefs=Ge.selection.selectionDefs,Ye.mergedPolygons=Ge.selection.mergedPolygons):(!At||!Ge.selection)&&Z(Ye),qe||(m(it),Ee._lastSelectedSubplot=Ge.id)}function q(Xe){return Xe._fullLayout._activeShapeIndex>=0}function re(Xe){return Xe._fullLayout._activeSelectionIndex>=0}function Z(Xe,it){var Ye=Xe.dragmode,Ee=Xe.plotinfo,Ge=Xe.gd;q(Ge)&&Ge._fullLayout._deactivateShape(Ge),re(Ge)&&Ge._fullLayout._deactivateSelection(Ge);var Ke=Ge._fullLayout,qe=Ke._zoomlayer,At=s(Ye),mt=b(Ye);if(At||mt){var Mt=qe.selectAll(".select-outline-"+Ee.id);if(Mt&&Ge._fullLayout._outlining){var Gt;At&&(Gt=M(Mt,Xe)),Gt&&A.call("_guiRelayout",Ge,{shapes:Gt});var zt;mt&&!j(Xe)&&(zt=w(Mt,Xe)),zt&&(Ge._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",Ge,{selections:zt}).then(function(){it&&p(Ge)})),Ge._fullLayout._outlining=!1}}Ee.selection={},Ee.selection.selectionDefs=Xe.selectionDefs=[],Ee.selection.mergedPolygons=Xe.mergedPolygons=[]}function Q(Xe){return Xe._id}function ie(Xe,it,Ye,Ee){if(!Xe.calcdata)return[];var Ge=[],Ke=it.map(Q),qe=Ye.map(Q),At,mt,Mt;for(Mt=0;Mt<Xe.calcdata.length;Mt++)if(At=Xe.calcdata[Mt],mt=At[0].trace,!(mt.visible!==!0||!mt._module||!mt._module.selectPoints))if(j({subplot:Ee})&&(mt.subplot===Ee||mt.geo===Ee))Ge.push(oe(mt._module,At,it[0],Ye[0]));else if(mt.type==="splom"){if(mt._xaxes[Ke[0]]&&mt._yaxes[qe[0]]){var Gt=oe(mt._module,At,it[0],Ye[0]);Gt.scene=Xe._fullLayout._splomScenes[mt.uid],Ge.push(Gt)}}else if(mt.type==="sankey"){var zt=oe(mt._module,At,it[0],Ye[0]);Ge.push(zt)}else{if(Ke.indexOf(mt.xaxis)===-1||qe.indexOf(mt.yaxis)===-1)continue;Ge.push(oe(mt._module,At,S(Xe,mt.xaxis),S(Xe,mt.yaxis)))}return Ge}function oe(Xe,it,Ye,Ee){return{_module:Xe,cd:it,xaxis:Ye,yaxis:Ee}}function ne(Xe){return Xe&&Array.isArray(Xe)&&Xe[0].hoverOnBox!==!0}function le(Xe,it){var Ye=Xe[0],Ee=-1,Ge=[],Ke,qe;for(qe=0;qe<it.length;qe++)if(Ke=it[qe],Ye.fullData._expandedIndex===Ke.cd[0].trace._expandedIndex){if(Ye.hoverOnBox===!0)break;Ye.pointNumber!==void 0?Ee=Ye.pointNumber:Ye.binNumber!==void 0&&(Ee=Ye.binNumber,Ge=Ye.pointNumbers);break}return{pointNumber:Ee,pointNumbers:Ge,searchInfo:Ke}}function _e(Xe){var it=Xe.searchInfo.cd[0].trace,Ye=Xe.pointNumber,Ee=Xe.pointNumbers,Ge=Ee.length>0,Ke=Ge?Ee[0]:Ye;return it.selectedpoints?it.selectedpoints.indexOf(Ke)>-1:!1}function fe(Xe,it){var Ye=[],Ee,Ge,Ke,qe;for(qe=0;qe<Xe.length;qe++)Ee=Xe[qe],Ee.cd[0].trace.selectedpoints&&Ee.cd[0].trace.selectedpoints.length>0&&Ye.push(Ee);if(Ye.length===1&&(Ke=Ye[0]===it.searchInfo,Ke&&(Ge=it.searchInfo.cd[0].trace,Ge.selectedpoints.length===it.pointNumbers.length))){for(qe=0;qe<it.pointNumbers.length;qe++)if(Ge.selectedpoints.indexOf(it.pointNumbers[qe])<0)return!1;return!0}return!1}function ye(Xe){var it=0,Ye,Ee,Ge;for(Ge=0;Ge<Xe.length;Ge++)if(Ye=Xe[Ge],Ee=Ye.cd[0].trace,Ee.selectedpoints&&(Ee.selectedpoints.length>1||(it+=Ee.selectedpoints.length,it>1)))return!1;return it===1}function xe(Xe,it,Ye){var Ee;for(Ee=0;Ee<it.length;Ee++){var Ge=it[Ee].cd[0].trace._fullInput,Ke=Xe._fullLayout._tracePreGUI[Ge.uid]||{};Ke.selectedpoints===void 0&&(Ke.selectedpoints=Ge._input.selectedpoints||null)}var qe;if(Ye){var At=Ye.points||[];for(Ee=0;Ee<it.length;Ee++)qe=it[Ee].cd[0].trace,qe._input.selectedpoints=qe._fullInput.selectedpoints=[],qe._fullInput!==qe&&(qe.selectedpoints=[]);for(var mt=0;mt<At.length;mt++){var Mt=At[mt],Gt=Mt.data,zt=Mt.fullData,Ht=Mt.pointIndex,Zt=Mt.pointIndices;Zt?([].push.apply(Gt.selectedpoints,Zt),qe._fullInput!==qe&&[].push.apply(zt.selectedpoints,Zt)):(Gt.selectedpoints.push(Ht),qe._fullInput!==qe&&zt.selectedpoints.push(Ht))}}else for(Ee=0;Ee<it.length;Ee++)qe=it[Ee].cd[0].trace,delete qe.selectedpoints,delete qe._input.selectedpoints,qe._fullInput!==qe&&delete qe._fullInput.selectedpoints;me(Xe,it)}function me(Xe,it){for(var Ye=!1,Ee=0;Ee<it.length;Ee++){var Ge=it[Ee],Ke=Ge.cd;A.traceIs(Ke[0].trace,"regl")&&(Ye=!0);var qe=Ge._module,At=qe.styleOnSelect||qe.style;At&&(At(Xe,Ke,Ke[0].node3),Ke[0].nodeRangePlot3&&At(Xe,Ke,Ke[0].nodeRangePlot3))}Ye&&(P(Xe),F(Xe))}function be(Xe,it,Ye){for(var Ee=Ye?y.difference:y.union,Ge=Ee({regions:Xe},{regions:[it]}),Ke=Ge.regions.reverse(),qe=0;qe<Ke.length;qe++){var At=Ke[qe];At.subtract=Ve(At,Ke.slice(0,qe))}return Ke}function ke(Xe,it){if(Array.isArray(Xe))for(var Ye=it.cd,Ee=it.cd[0].trace,Ge=0;Ge<Xe.length;Ge++)Xe[Ge]=i(Xe[Ge],Ee,Ye);return Xe}function De(Xe,it){for(var Ye=[],Ee=0;Ee<Xe.length;Ee++){Ye[Ee]=[];for(var Ge=0;Ge<Xe[Ee].length;Ge++){Ye[Ee][Ge]=[],Ye[Ee][Ge][0]=Ge?"L":"M";for(var Ke=0;Ke<Xe[Ee][Ge].length;Ke++)Ye[Ee][Ge].push(Xe[Ee][Ge][Ke])}it||Ye[Ee].push(["Z",Ye[Ee][0][1],Ye[Ee][0][2]])}return Ye}function He(Xe,it){for(var Ye=[],Ee,Ge,Ke=0;Ke<it.length;Ke++){var qe=it[Ke];Ge=qe._module.selectPoints(qe,Xe),Ee=ke(Ge,qe),Ye=Ye.concat(Ee)}return Ye}function Ae(Xe,it,Ye,Ee,Ge){var Ke=!!Ee,qe,At,mt;Ge&&(qe=Ge.plotinfo,At=Ge.xaxes[0]._id,mt=Ge.yaxes[0]._id);var Mt=[],Gt=[],zt=Ie(Xe),Ht=Xe._fullLayout;if(qe){var Zt=Ht._zoomlayer,Wt=Ht.dragmode,sr=s(Wt),Gr=b(Wt);if(sr||Gr){var cn=S(Xe,At,"x"),qr=S(Xe,mt,"y");if(cn&&qr){var st=Zt.selectAll(".select-outline-"+qe.id);if(st&&Xe._fullLayout._outlining&&st.length){for(var rr=st[0][0],$t=rr.getAttribute("d"),hr=u($t,Xe,qe),Sr=[],tt=0;tt<hr.length;tt++){for(var Qe=hr[tt],lt=[],ft=0;ft<Qe.length;ft++)lt.push([dt(cn,Qe[ft][1]),dt(qr,Qe[ft][2])]);lt.xref=At,lt.yref=mt,lt.subtract=Ve(lt,Sr),Sr.push(lt)}zt=zt.concat(Sr)}}}}var Et=At&&mt?[At+mt]:Ht._subplots.cartesian;Le(Xe);for(var Vt={},Pe=0;Pe<Et.length;Pe++){var Se=Et[Pe],ot=Se.indexOf("y"),ct=Se.slice(0,ot),pt=Se.slice(ot),St=At&&mt?Ye:void 0;if(St=ze(zt,ct,pt,St),St){var xt=Ee;if(!Ke){var Pt=S(Xe,ct,"x"),Xt=S(Xe,pt,"y");xt=ie(Xe,[Pt],[Xt],Se);for(var or=0;or<xt.length;or++){var Pr=xt[or],Ar=Pr.cd[0],Er=Ar.trace;if(Pr._module.name==="scattergl"&&!Ar.t.xpx){var Jr=Er.x,lr=Er.y,br=Er._length;Ar.t.xpx=[],Ar.t.ypx=[];for(var Fr=0;Fr<br;Fr++)Ar.t.xpx[Fr]=Pt.c2p(Jr[Fr]),Ar.t.ypx[Fr]=Xt.c2p(lr[Fr])}Pr._module.name==="splom"&&(Vt[Er.uid]||(Vt[Er.uid]=!0))}}var Hr=He(St,xt);Mt=Mt.concat(Hr),Gt=Gt.concat(xt)}}var Lr={points:Mt};xe(Xe,Gt,Lr);var at=Ht.clickmode,Rt=at.indexOf("event")>-1&&it;if(!qe&&it){var Kt=Ie(Xe,!0);if(Kt.length){var ur=Kt[0].xref,Nr=Kt[0].yref;if(ur&&Nr){var Vr=Ft(Kt),Dr=Ot([S(Xe,ur,"x"),S(Xe,Nr,"y")]);Dr(Lr,Vr)}}Xe._fullLayout._noEmitSelectedAtStart?Xe._fullLayout._noEmitSelectedAtStart=!1:Rt&&Nt(Xe,Lr),Ht._reselect=!1}if(!qe&&Ht._deselect){var Mr=Ht._deselect;At=Mr.xref,mt=Mr.yref,Ze(At,mt,Gt)||We(Xe,At,mt,Ee),Rt&&(Lr.points.length?Nt(Xe,Lr):Lt(Xe)),Ht._deselect=!1}return{eventData:Lr,selectionTesters:Ye}}function Le(Xe){var it=Xe.calcdata;if(!!it)for(var Ye=0;Ye<it.length;Ye++){var Ee=it[Ye][0],Ge=Ee.trace,Ke=Xe._fullLayout._splomScenes;if(Ke){var qe=Ke[Ge.uid];qe&&(qe.selectBatch=[])}}}function Ze(Xe,it,Ye){for(var Ee=0;Ee<Ye.length;Ee++){var Ge=Ye[Ee];if(Ge.xaxis&&Ge.xaxis._id===Xe&&Ge.yaxis&&Ge.yaxis._id===it)return!0}return!1}function We(Xe,it,Ye,Ee){Ee=ie(Xe,[S(Xe,it,"x")],[S(Xe,Ye,"y")],it+Ye);for(var Ge=0;Ge<Ee.length;Ge++){var Ke=Ee[Ge];Ke._module.selectPoints(Ke,!1)}xe(Xe,Ee)}function ze(Xe,it,Ye,Ee){for(var Ge,Ke=0;Ke<Xe.length;Ke++){var qe=Xe[Ke];if(!(it!==qe.xref||Ye!==qe.yref))if(Ge){var At=!!qe.subtract;Ge=be(Ge,qe,At),Ee=U(Ge)}else Ge=[qe],Ee=O(qe)}return Ee}function Ie(Xe,it){for(var Ye=[],Ee=Xe._fullLayout,Ge=Ee.selections,Ke=Ge.length,qe=0;qe<Ke;qe++)if(!(it&&qe!==Ee._activeSelectionIndex)){var At=Ge[qe];if(!!At){var mt=At.xref,Mt=At.yref,Gt=S(Xe,mt,"x"),zt=S(Xe,Mt,"y"),Ht,Zt,Wt,sr,Gr;if(At.type==="rect"){Gr=[];var cn=dt(Gt,At.x0),qr=dt(Gt,At.x1),st=dt(zt,At.y0),rr=dt(zt,At.y1);Gr=[[cn,st],[cn,rr],[qr,rr],[qr,st]],Ht=Math.min(cn,qr),Zt=Math.max(cn,qr),Wt=Math.min(st,rr),sr=Math.max(st,rr),Gr.xmin=Ht,Gr.xmax=Zt,Gr.ymin=Wt,Gr.ymax=sr,Gr.xref=mt,Gr.yref=Mt,Gr.subtract=!1,Gr.isRect=!0,Ye.push(Gr)}else if(At.type==="path")for(var $t=At.path.split("Z"),hr=[],Sr=0;Sr<$t.length;Sr++){var tt=$t[Sr];if(!!tt){tt+="Z";var Qe=g.extractPathCoords(tt,d.paramIsX,"raw"),lt=g.extractPathCoords(tt,d.paramIsY,"raw");Ht=1/0,Zt=-1/0,Wt=1/0,sr=-1/0,Gr=[];for(var ft=0;ft<Qe.length;ft++){var Et=dt(Gt,Qe[ft]),Vt=dt(zt,lt[ft]);Gr.push([Et,Vt]),Ht=Math.min(Et,Ht),Zt=Math.max(Et,Zt),Wt=Math.min(Vt,Wt),sr=Math.max(Vt,sr)}Gr.xmin=Ht,Gr.xmax=Zt,Gr.ymin=Wt,Gr.ymax=sr,Gr.xref=mt,Gr.yref=Mt,Gr.subtract=Ve(Gr,hr),hr.push(Gr),Ye.push(Gr)}}}}return Ye}function Ve(Xe,it){for(var Ye=!1,Ee=0;Ee<it.length;Ee++)for(var Ge=it[Ee],Ke=0;Ke<Xe.length;Ke++)if(c(Xe[Ke],Ge)){Ye=!Ye;break}return Ye}function dt(Xe,it){return Xe.type==="date"&&(it=it.replace("_"," ")),Xe.type==="log"?Xe.c2p(it):Xe.r2p(it,null,Xe.calendar)}function Ft(Xe){for(var it=Xe.length,Ye=[],Ee=0;Ee<it;Ee++){var Ge=Xe[Ee];Ye=Ye.concat(Ge),Ye=Ye.concat([Ge[0]])}return Qt(Ye)}function Qt(Xe){return Xe.isRect=Xe.length===5&&Xe[0][0]===Xe[4][0]&&Xe[0][1]===Xe[4][1]&&Xe[0][0]===Xe[1][0]&&Xe[2][0]===Xe[3][0]&&Xe[0][1]===Xe[3][1]&&Xe[1][1]===Xe[2][1]||Xe[0][1]===Xe[1][1]&&Xe[2][1]===Xe[3][1]&&Xe[0][0]===Xe[3][0]&&Xe[1][0]===Xe[2][0],Xe.isRect&&(Xe.xmin=Math.min(Xe[0][0],Xe[2][0]),Xe.xmax=Math.max(Xe[0][0],Xe[2][0]),Xe.ymin=Math.min(Xe[0][1],Xe[2][1]),Xe.ymax=Math.max(Xe[0][1],Xe[2][1])),Xe}function Ot(Xe){return function(it,Ye){for(var Ee,Ge,Ke=0;Ke<Xe.length;Ke++){var qe=Xe[Ke],At=qe._id,mt=At.charAt(0);if(Ye.isRect){Ee||(Ee={});var Mt=Ye[mt+"min"],Gt=Ye[mt+"max"];Mt!==void 0&&Gt!==void 0&&(Ee[At]=[G(qe,Mt),G(qe,Gt)].sort(h))}else Ge||(Ge={}),Ge[At]=Ye.map(Y(qe))}Ee&&(it.range=Ee),Ge&&(it.lassoPoints=Ge)}}function Ct(Xe){var it=Xe.plotinfo;return it.fillRangeItems||Ot(Xe.xaxes.concat(Xe.yaxes))}function jt(Xe,it){Xe.emit("plotly_selecting",it)}function Nt(Xe,it){it&&(it.selections=(Xe.layout||{}).selections||[]),Xe.emit("plotly_selected",it)}function Lt(Xe){Xe.emit("plotly_deselect",null)}N.exports={reselect:Ae,prepSelect:X,clearOutline:m,clearSelectionsCache:Z,selectOnClick:ae}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(t,N,V){var y=t("../annotations/attributes"),c=t("../../traces/scatter/attributes").line,A=t("../drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),N.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},y.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},y.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},c.color,{editType:"arraydraw"}),width:T({},c.width,{editType:"calc+arraydraw"}),dash:T({},A,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("./constants"),T=t("./helpers");N.exports=function(v){var s=v._fullLayout,o=y.filterVisible(s.shapes);if(!(!o.length||!v._fullData.length))for(var b=0;b<o.length;b++){var g=o[b];g._extremes={};var d,f,m=c.getRefType(g.xref),l=c.getRefType(g.yref);if(g.xref!=="paper"&&m!=="domain"){var x=g.xsizemode==="pixel"?g.xanchor:g.x0,u=g.xsizemode==="pixel"?g.xanchor:g.x1;d=c.getFromId(v,g.xref),f=n(d,x,u,g.path,A.paramIsX),f&&(g._extremes[d._id]=c.findExtremes(d,f,e(g)))}if(g.yref!=="paper"&&l!=="domain"){var M=g.ysizemode==="pixel"?g.yanchor:g.y0,w=g.ysizemode==="pixel"?g.yanchor:g.y1;d=c.getFromId(v,g.yref),f=n(d,M,w,g.path,A.paramIsY),f&&(g._extremes[d._id]=c.findExtremes(d,f,a(g)))}}};function e(r){return i(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function a(r){return i(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function i(r,v,s,o,b,g){var d=r/2,f=g;if(v==="pixel"){var m=b?T.extractPathCoords(b,g?A.paramIsY:A.paramIsX):[s,o],l=y.aggNums(Math.max,null,m),x=y.aggNums(Math.min,null,m),u=x<0?Math.abs(x)+d:d,M=l>0?l+d:d;return{ppad:d,ppadplus:f?u:M,ppadminus:f?M:u}}else return{ppad:d}}function n(r,v,s,o,b){var g=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(v!==void 0)return[g(v),g(s)];if(!!o){var d=1/0,f=-1/0,m=o.match(A.segmentRE),l,x,u,M,w;for(r.type==="date"&&(g=T.decodeDate(g)),l=0;l<m.length;l++)x=m[l],u=b[x.charAt(0)].drawn,u!==void 0&&(M=m[l].substr(1).match(A.paramRE),!(!M||M.length<u)&&(w=g(M[u]),w<d&&(d=w),w>f&&(f=w)));if(f>=d)return[d,f]}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(t,N,V){N.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e=t("./helpers");N.exports=function(n,r){A(n,r,{name:"shapes",handleItemDefaults:a})};function a(i,n,r){function v(Y,ee){return y.coerce(i,n,T,Y,ee)}var s=v("visible");if(!!s){var o=v("path"),b=o?"path":"rect",g=v("type",b),d=g!=="path";d&&delete n.path,v("editable"),v("layer"),v("opacity"),v("fillcolor"),v("fillrule");var f=v("line.width");f&&(v("line.color"),v("line.dash"));for(var m=v("xsizemode"),l=v("ysizemode"),x=["x","y"],u=0;u<2;u++){var M=x[u],w=M+"anchor",p=M==="x"?m:l,_={_fullLayout:r},h,L,E,S=c.coerceRef(i,n,_,M,void 0,"paper"),P=c.getRefType(S);if(P==="range"?(h=c.getFromId(_,S),h._shapeIndices.push(n._index),E=e.rangeToShapePosition(h),L=e.shapePositionToRange(h)):L=E=y.identity,d){var F=.25,I=.75,D=M+"0",R=M+"1",O=i[D],z=i[R];i[D]=L(i[D],!0),i[R]=L(i[R],!0),p==="pixel"?(v(D,0),v(R,10)):(c.coercePosition(n,_,v,S,D,F),c.coercePosition(n,_,v,S,R,I)),n[D]=E(n[D]),n[R]=E(n[R]),i[D]=O,i[R]=z}if(p==="pixel"){var G=i[w];i[w]=L(i[w],!0),c.coercePosition(n,_,v,S,w,.25),n[w]=E(n[w]),i[w]=G}}d&&y.noneOrAll(i,n,["x0","x1","y0","y1"])}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(t,N,V){var y=t("../../lib"),c=y.strTranslate,A=t("../dragelement"),T=t("../dragelement/helpers"),e=T.drawMode,a=T.selectMode,i=t("../../registry"),n=t("../color"),r=t("./draw_newshape/constants"),v=r.i000,s=r.i090,o=r.i180,b=r.i270,g=t("./handle_outline"),d=g.clearOutlineControllers,f=t("./draw_newshape/helpers"),m=f.pointsOnRectangle,l=f.pointsOnEllipse,x=f.writePaths,u=t("./draw_newshape/newshapes"),M=t("../selections/draw_newselection/newselections");N.exports=function h(L,E,S,P){P||(P=0);var F=S.gd;function I(){h(L,E,S,P++),l(L[0])&&D({redrawing:!0})}function D(fe){var ye={};S.isActiveShape!==void 0&&(S.isActiveShape=!1,ye=u(E,S)),S.isActiveSelection!==void 0&&(S.isActiveSelection=!1,ye=M(E,S),F._fullLayout._reselect=!0),Object.keys(ye).length&&i.call((fe||{}).redrawing?"relayout":"_guiRelayout",F,ye)}var R=F._fullLayout,O=R._zoomlayer,z=S.dragmode,G=e(z),Y=a(z);(G||Y)&&(F._fullLayout._outlining=!0),d(F),E.attr("d",x(L));var ee,j,X,ae,he;if(!P&&(S.isActiveShape||S.isActiveSelection)){he=w([],L);var K=O.append("g").attr("class","outline-controllers");Z(K),_e()}function J(fe){X=+fe.srcElement.getAttribute("data-i"),ae=+fe.srcElement.getAttribute("data-j"),ee[X][ae].moveFn=U}function U(fe,ye){if(!!L.length){var xe=he[X][ae][1],me=he[X][ae][2],be=L[X],ke=be.length;if(m(be)){var De=fe,He=ye;if(S.isActiveSelection){var Ae=p(be,ae);Ae[1]===be[ae][1]?He=0:De=0}for(var Le=0;Le<ke;Le++)if(Le!==ae){var Ze=be[Le];Ze[1]===be[ae][1]&&(Ze[1]=xe+De),Ze[2]===be[ae][2]&&(Ze[2]=me+He)}if(be[ae][1]=xe+De,be[ae][2]=me+He,!m(be))for(var We=0;We<ke;We++)for(var ze=0;ze<be[We].length;ze++)be[We][ze]=he[X][We][ze]}else be[ae][1]=xe+fe,be[ae][2]=me+ye;I()}}function H(){D()}function q(){if(!!L.length&&!!L[X]&&!!L[X].length){for(var fe=[],ye=0;ye<L[X].length;ye++)ye!==ae&&fe.push(L[X][ye]);fe.length>1&&!(fe.length===2&&fe[1][0]==="Z")&&(ae===0&&(fe[0][0]="M"),L[X]=fe,I(),D())}}function re(fe,ye){if(fe===2){X=+ye.srcElement.getAttribute("data-i"),ae=+ye.srcElement.getAttribute("data-j");var xe=L[X];!m(xe)&&!l(xe)&&q()}}function Z(fe){ee=[];for(var ye=0;ye<L.length;ye++){var xe=L[ye],me=m(xe),be=!me&&l(xe);ee[ye]=[];for(var ke=xe.length,De=0;De<ke;De++)if(xe[De][0]!=="Z"&&!(be&&De!==v&&De!==s&&De!==o&&De!==b)){var He=me&&S.isActiveSelection,Ae;He&&(Ae=p(xe,De));var Le=xe[De][1],Ze=xe[De][2],We=fe.append(He?"rect":"circle").attr("data-i",ye).attr("data-j",De).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(He){var ze=Ae[1]-Le,Ie=Ae[2]-Ze,Ve=Ie?5:Math.max(Math.min(25,Math.abs(ze)-5),5),dt=ze?5:Math.max(Math.min(25,Math.abs(Ie)-5),5);We.classed(Ie?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ve).attr("height",dt).attr("x",Le-Ve/2).attr("y",Ze-dt/2).attr("transform",c(ze/2,Ie/2))}else We.classed("cursor-grab",!0).attr("r",5).attr("cx",Le).attr("cy",Ze);ee[ye][De]={element:We.node(),gd:F,prepFn:J,doneFn:H,clickFn:re},A.init(ee[ye][De])}}}function Q(fe,ye){if(!!L.length)for(var xe=0;xe<L.length;xe++)for(var me=0;me<L[xe].length;me++)for(var be=0;be+2<L[xe][me].length;be+=2)L[xe][me][be+1]=he[xe][me][be+1]+fe,L[xe][me][be+2]=he[xe][me][be+2]+ye}function ie(fe,ye){Q(fe,ye),I()}function oe(fe){X=+fe.srcElement.getAttribute("data-i"),X||(X=0),j[X].moveFn=ie}function ne(){D()}function le(fe){fe===2&&_(F)}function _e(){if(j=[],!!L.length){var fe=0;j[fe]={element:E[0][0],gd:F,prepFn:oe,doneFn:ne,clickFn:le},A.init(j[fe])}}};function w(h,L){for(var E=0;E<L.length;E++){var S=L[E];h[E]=[];for(var P=0;P<S.length;P++){h[E][P]=[];for(var F=0;F<S[P].length;F++)h[E][P][F]=S[P][F]}}return h}function p(h,L){var E=h[L][1],S=h[L][2],P=h.length,F,I,D;return F=(L+1)%P,I=h[F][1],D=h[F][2],I===E&&D===S&&(F=(L+2)%P,I=h[F][1],D=h[F][2]),[F,I,D]}function _(h){if(!!a(h._fullLayout.dragmode)){d(h);var L=h._fullLayout._activeSelectionIndex,E=(h.layout||{}).selections||[];if(L<E.length){for(var S=[],P=0;P<E.length;P++)P!==L&&S.push(E[P]);delete h._fullLayout._activeSelectionIndex;var F=h._fullLayout.selections[L];h._fullLayout._deselect={xref:F.xref,yref:F.yref},i.call("_guiRelayout",h,{selections:S})}}}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("./draw_newshape/helpers").readPaths,e=t("./display_outlines"),a=t("./handle_outline").clearOutlineControllers,i=t("../color"),n=t("../drawing"),r=t("../../plot_api/plot_template").arrayEditor,v=t("../dragelement"),s=t("../../lib/setcursor"),o=t("./constants"),b=t("./helpers"),g=b.getPathString;N.exports={draw:d,drawOne:l,eraseActiveShape:_};function d(h){var L=h._fullLayout;L._shapeUpperLayer.selectAll("path").remove(),L._shapeLowerLayer.selectAll("path").remove();for(var E in L._plots){var S=L._plots[E].shapelayer;S&&S.selectAll("path").remove()}for(var P=0;P<L.shapes.length;P++)L.shapes[P].visible&&l(h,P)}function f(h){return!!h._fullLayout._outlining}function m(h){return!h._context.edits.shapePosition}function l(h,L){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+L+'"]').remove();var E=b.makeShapesOptionsAndPlotinfo(h,L),S=E.options,P=E.plotinfo;if(!S._input||S.visible===!1)return;if(S.layer!=="below")I(h._fullLayout._shapeUpperLayer);else if(S.xref==="paper"||S.yref==="paper")I(h._fullLayout._shapeLowerLayer);else if(P._hadPlotinfo){var F=P.mainplotinfo||P;I(F.shapelayer)}else I(h._fullLayout._shapeLowerLayer);function I(D){var R=g(h,S),O={"data-index":L,"fill-rule":S.fillrule,d:R},z=S.opacity,G=S.fillcolor,Y=S.line.width?S.line.color:"rgba(0,0,0,0)",ee=S.line.width,j=S.line.dash;!ee&&S.editable===!0&&(ee=5,j="solid");var X=R[R.length-1]!=="Z",ae=m(h)&&S.editable&&h._fullLayout._activeShapeIndex===L;ae&&(G=X?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,z=h._fullLayout.activeshape.opacity);var he=D.append("path").attr(O).style("opacity",z).call(i.stroke,Y).call(i.fill,G).call(n.dashLine,j,ee);x(he,h,S);var K;if((ae||h._context.edits.shapePosition)&&(K=r(h.layout,"shapes",S)),ae){he.style({cursor:"move"});var J={element:he.node(),plotinfo:P,gd:h,editHelpers:K,isActiveShape:!0},U=T(R,h);e(U,he,J)}else h._context.edits.shapePosition?u(h,he,S,L,D,K):S.editable===!0&&he.style("pointer-events",X||i.opacity(G)*z<=.5?"stroke":"all");he.node().addEventListener("click",function(){return w(h,he)})}}function x(h,L,E){var S=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(h,S?"clip"+L._fullLayout._uid+S:null,L)}function u(h,L,E,S,P,F){var I=10,D=10,R=E.xsizemode==="pixel",O=E.ysizemode==="pixel",z=E.type==="line",G=E.type==="path",Y=F.modifyItem,ee,j,X,ae,he,K,J,U,H,q,re,Z,Q,ie,oe,ne=A.getFromId(h,E.xref),le=A.getRefType(E.xref),_e=A.getFromId(h,E.yref),fe=A.getRefType(E.yref),ye=b.getDataToPixel(h,ne,!1,le),xe=b.getDataToPixel(h,_e,!0,fe),me=b.getPixelToData(h,ne,!1,le),be=b.getPixelToData(h,_e,!0,fe),ke=Ae(),De={element:ke.node(),gd:h,prepFn:We,doneFn:ze,clickFn:Ie},He;v.init(De),ke.node().onmousemove=Ze;function Ae(){return z?Le():L}function Le(){var Ct=10,jt=Math.max(E.line.width,Ct),Nt=P.append("g").attr("data-index",S);Nt.append("path").attr("d",L.attr("d")).style({cursor:"move","stroke-width":jt,"stroke-opacity":"0"});var Lt={"fill-opacity":"0"},Xe=Math.max(jt/2,Ct);return Nt.append("circle").attr({"data-line-point":"start-point",cx:R?ye(E.xanchor)+E.x0:ye(E.x0),cy:O?xe(E.yanchor)-E.y0:xe(E.y0),r:Xe}).style(Lt).classed("cursor-grab",!0),Nt.append("circle").attr({"data-line-point":"end-point",cx:R?ye(E.xanchor)+E.x1:ye(E.x1),cy:O?xe(E.yanchor)-E.y1:xe(E.y1),r:Xe}).style(Lt).classed("cursor-grab",!0),Nt}function Ze(Ct){if(f(h)){He=null;return}if(z)Ct.target.tagName==="path"?He="move":He=Ct.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var jt=De.element.getBoundingClientRect(),Nt=jt.right-jt.left,Lt=jt.bottom-jt.top,Xe=Ct.clientX-jt.left,it=Ct.clientY-jt.top,Ye=!G&&Nt>I&&Lt>D&&!Ct.shiftKey?v.getCursor(Xe/Nt,1-it/Lt):"move";s(L,Ye),He=Ye.split("-")[0]}}function We(Ct){f(h)||(R&&(he=ye(E.xanchor)),O&&(K=xe(E.yanchor)),E.type==="path"?oe=E.path:(ee=R?E.x0:ye(E.x0),j=O?E.y0:xe(E.y0),X=R?E.x1:ye(E.x1),ae=O?E.y1:xe(E.y1)),ee<X?(H=ee,Q="x0",q=X,ie="x1"):(H=X,Q="x1",q=ee,ie="x0"),!O&&j<ae||O&&j>ae?(J=j,re="y0",U=ae,Z="y1"):(J=ae,re="y1",U=j,Z="y0"),Ze(Ct),Ft(P,E),Ot(L,E,h),De.moveFn=He==="move"?Ve:dt,De.altKey=Ct.altKey)}function ze(){f(h)||(s(L),Qt(P),x(L,h,E),y.call("_guiRelayout",h,F.getUpdateObj()))}function Ie(){f(h)||Qt(P)}function Ve(Ct,jt){if(E.type==="path"){var Nt=function(it){return it},Lt=Nt,Xe=Nt;R?Y("xanchor",E.xanchor=me(he+Ct)):(Lt=function(Ye){return me(ye(Ye)+Ct)},ne&&ne.type==="date"&&(Lt=b.encodeDate(Lt))),O?Y("yanchor",E.yanchor=be(K+jt)):(Xe=function(Ye){return be(xe(Ye)+jt)},_e&&_e.type==="date"&&(Xe=b.encodeDate(Xe))),Y("path",E.path=M(oe,Lt,Xe))}else R?Y("xanchor",E.xanchor=me(he+Ct)):(Y("x0",E.x0=me(ee+Ct)),Y("x1",E.x1=me(X+Ct))),O?Y("yanchor",E.yanchor=be(K+jt)):(Y("y0",E.y0=be(j+jt)),Y("y1",E.y1=be(ae+jt)));L.attr("d",g(h,E)),Ft(P,E)}function dt(Ct,jt){if(G){var Nt=function(Wt){return Wt},Lt=Nt,Xe=Nt;R?Y("xanchor",E.xanchor=me(he+Ct)):(Lt=function(sr){return me(ye(sr)+Ct)},ne&&ne.type==="date"&&(Lt=b.encodeDate(Lt))),O?Y("yanchor",E.yanchor=be(K+jt)):(Xe=function(sr){return be(xe(sr)+jt)},_e&&_e.type==="date"&&(Xe=b.encodeDate(Xe))),Y("path",E.path=M(oe,Lt,Xe))}else if(z){if(He==="resize-over-start-point"){var it=ee+Ct,Ye=O?j-jt:j+jt;Y("x0",E.x0=R?it:me(it)),Y("y0",E.y0=O?Ye:be(Ye))}else if(He==="resize-over-end-point"){var Ee=X+Ct,Ge=O?ae-jt:ae+jt;Y("x1",E.x1=R?Ee:me(Ee)),Y("y1",E.y1=O?Ge:be(Ge))}}else{var Ke=function(Wt){return He.indexOf(Wt)!==-1},qe=Ke("n"),At=Ke("s"),mt=Ke("w"),Mt=Ke("e"),Gt=qe?J+jt:J,zt=At?U+jt:U,Ht=mt?H+Ct:H,Zt=Mt?q+Ct:q;O&&(qe&&(Gt=J-jt),At&&(zt=U-jt)),(!O&&zt-Gt>D||O&&Gt-zt>D)&&(Y(re,E[re]=O?Gt:be(Gt)),Y(Z,E[Z]=O?zt:be(zt))),Zt-Ht>I&&(Y(Q,E[Q]=R?Ht:me(Ht)),Y(ie,E[ie]=R?Zt:me(Zt)))}L.attr("d",g(h,E)),Ft(P,E)}function Ft(Ct,jt){(R||O)&&Nt();function Nt(){var Lt=jt.type!=="path",Xe=Ct.selectAll(".visual-cue").data([0]),it=1;Xe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":it}).classed("visual-cue",!0);var Ye=ye(R?jt.xanchor:c.midRange(Lt?[jt.x0,jt.x1]:b.extractPathCoords(jt.path,o.paramIsX))),Ee=xe(O?jt.yanchor:c.midRange(Lt?[jt.y0,jt.y1]:b.extractPathCoords(jt.path,o.paramIsY)));if(Ye=b.roundPositionForSharpStrokeRendering(Ye,it),Ee=b.roundPositionForSharpStrokeRendering(Ee,it),R&&O){var Ge="M"+(Ye-1-it)+","+(Ee-1-it)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Xe.attr("d",Ge)}else if(R){var Ke="M"+(Ye-1-it)+","+(Ee-9-it)+"v18 h2 v-18 Z";Xe.attr("d",Ke)}else{var qe="M"+(Ye-9-it)+","+(Ee-1-it)+"h18 v2 h-18 Z";Xe.attr("d",qe)}}}function Qt(Ct){Ct.selectAll(".visual-cue").remove()}function Ot(Ct,jt,Nt){var Lt=jt.xref,Xe=jt.yref,it=A.getFromId(Nt,Lt),Ye=A.getFromId(Nt,Xe),Ee="";Lt!=="paper"&&!it.autorange&&(Ee+=Lt),Xe!=="paper"&&!Ye.autorange&&(Ee+=Xe),n.setClipUrl(Ct,Ee?"clip"+Nt._fullLayout._uid+Ee:null,Nt)}}function M(h,L,E){return h.replace(o.segmentRE,function(S){var P=0,F=S.charAt(0),I=o.paramIsX[F],D=o.paramIsY[F],R=o.numParams[F],O=S.substr(1).replace(o.paramRE,function(z){return P>=R||(I[P]?z=L(z):D[P]&&(z=E(z)),P++),z});return F+O})}function w(h,L){if(!!m(h)){var E=L.node(),S=+E.getAttribute("data-index");if(S>=0){if(S===h._fullLayout._activeShapeIndex){p(h);return}h._fullLayout._activeShapeIndex=S,h._fullLayout._deactivateShape=p,d(h)}}}function p(h){if(!!m(h)){var L=h._fullLayout._activeShapeIndex;L>=0&&(a(h),delete h._fullLayout._activeShapeIndex,d(h))}}function _(h){if(!!m(h)){a(h);var L=h._fullLayout._activeShapeIndex,E=(h.layout||{}).shapes||[];if(L<E.length){for(var S=[],P=0;P<E.length;P++)P!==L&&S.push(E[P]);delete h._fullLayout._activeShapeIndex,y.call("_guiRelayout",h,{shapes:S})}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(t,N,V){var y=t("../../drawing/attributes").dash,c=t("../../../lib/extend").extendFlat;N.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:c({},y,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(t,N,V){var y=32;N.exports={CIRCLE_SIDES:y,i000:0,i090:y/4,i180:y/2,i270:y/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(t,N,V){var y=t("../../color");N.exports=function(A,T,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var a=e("newshape.line.width");if(a){var i=(A||{}).plot_bgcolor||"#FFF";e("newshape.line.color",y.contrast(i)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":367}],466:[function(t,N,V){var y=t("parse-svg-path"),c=t("./constants"),A=c.CIRCLE_SIDES,T=c.SQRT2,e=t("../../selections/helpers"),a=e.p2r,i=e.r2p,n=[0,3,4,5,6,1,2],r=[0,3,4,1,2];V.writePaths=function(o){var b=o.length;if(!b)return"M0,0Z";for(var g="",d=0;d<b;d++)for(var f=o[d].length,m=0;m<f;m++){var l=o[d][m][0];if(l==="Z")g+="Z";else for(var x=o[d][m].length,u=0;u<x;u++){var M=u;l==="Q"||l==="S"?M=r[u]:l==="C"&&(M=n[u]),g+=o[d][m][M],u>0&&u<x-1&&(g+=",")}}return g},V.readPaths=function(o,b,g,d){var f=y(o),m=[],l=-1,x=function(){l++,m[l]=[]},u,M=0,w=0,p,_,h=function(){p=M,_=w};h();for(var L=0;L<f.length;L++){var E=[],S,P,F,I,D=f[L][0],R=D;switch(D){case"M":x(),M=+f[L][1],w=+f[L][2],E.push([R,M,w]),h();break;case"Q":case"S":S=+f[L][1],F=+f[L][2],M=+f[L][3],w=+f[L][4],E.push([R,M,w,S,F]);break;case"C":S=+f[L][1],F=+f[L][2],P=+f[L][3],I=+f[L][4],M=+f[L][5],w=+f[L][6],E.push([R,M,w,S,F,P,I]);break;case"T":case"L":M=+f[L][1],w=+f[L][2],E.push([R,M,w]);break;case"H":R="L",M=+f[L][1],E.push([R,M,w]);break;case"V":R="L",w=+f[L][1],E.push([R,M,w]);break;case"A":R="L";var O=+f[L][1],z=+f[L][2];+f[L][4]||(O=-O,z=-z);var G=M-O,Y=w;for(u=1;u<=A/2;u++){var ee=2*Math.PI*u/A;E.push([R,G+O*Math.cos(ee),Y+z*Math.sin(ee)])}break;case"Z":(M!==p||w!==_)&&(M=p,w=_,E.push([R,M,w]));break}for(var j=(g||{}).domain,X=b._fullLayout._size,ae=g&&g.xsizemode==="pixel",he=g&&g.ysizemode==="pixel",K=d===!1,J=0;J<E.length;J++){for(u=0;u+2<7;u+=2){var U=E[J][u+1],H=E[J][u+2];U===void 0||H===void 0||(M=U,w=H,g&&(g.xaxis&&g.xaxis.p2r?(K&&(U-=g.xaxis._offset),ae?U=i(g.xaxis,g.xanchor)+U:U=a(g.xaxis,U)):(K&&(U-=X.l),j?U=j.x[0]+U/X.w:U=U/X.w),g.yaxis&&g.yaxis.p2r?(K&&(H-=g.yaxis._offset),he?H=i(g.yaxis,g.yanchor)-H:H=a(g.yaxis,H)):(K&&(H-=X.t),j?H=j.y[1]-H/X.h:H=1-H/X.h)),E[J][u+1]=U,E[J][u+2]=H)}m[l].push(E[J].slice())}}return m};function v(o,b){return Math.abs(o-b)<=1e-6}function s(o,b){var g=b[1]-o[1],d=b[2]-o[2];return Math.sqrt(g*g+d*d)}V.pointsOnRectangle=function(o){var b=o.length;if(b!==5)return!1;for(var g=1;g<3;g++){var d=o[0][g]-o[1][g],f=o[3][g]-o[2][g];if(!v(d,f))return!1;var m=o[0][g]-o[3][g],l=o[1][g]-o[2][g];if(!v(m,l))return!1}return!v(o[0][1],o[1][1])&&!v(o[0][1],o[3][1])?!1:!!(s(o[0],o[1])*s(o[0],o[3]))},V.pointsOnEllipse=function(o){var b=o.length;if(b!==A+1)return!1;b=A;for(var g=0;g<b;g++){var d=(b*2-g)%b,f=(b/2+d)%b,m=(b/2+g)%b;if(!v(s(o[g],o[m]),s(o[d],o[f])))return!1}return!0},V.handleEllipse=function(o,b,g){if(!o)return[b,g];var d=V.ellipseOver({x0:b[0],y0:b[1],x1:g[0],y1:g[1]}),f=(d.x1+d.x0)/2,m=(d.y1+d.y0)/2,l=(d.x1-d.x0)/2,x=(d.y1-d.y0)/2;l||(l=x=x/T),x||(x=l=l/T);for(var u=[],M=0;M<A;M++){var w=M*2*Math.PI/A;u.push([f+l*Math.cos(w),m+x*Math.sin(w)])}return u},V.ellipseOver=function(o){var b=o.x0,g=o.y0,d=o.x1,f=o.y1,m=d-b,l=f-g;b-=m,g-=l;var x=(b+d)/2,u=(g+f)/2,M=T;return m*=M,l*=M,{x0:x-m,y0:u-l,x1:x+m,y1:u+l}},V.fixDatesForPaths=function(o,b,g){var d=b.type==="date",f=g.type==="date";if(!d&&!f)return o;for(var m=0;m<o.length;m++)for(var l=0;l<o[m].length;l++)for(var x=0;x+2<o[m][l].length;x+=2)d&&(o[m][l][x+1]=o[m][l][x+1].replace(" ","_")),f&&(o[m][l][x+2]=o[m][l][x+2].replace(" ","_"));return o}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(t,N,V){var y=t("../../dragelement/helpers"),c=y.drawMode,A=y.openMode,T=t("./constants"),e=T.i000,a=T.i090,i=T.i180,n=T.i270,r=T.cos45,v=T.sin45,s=t("../../selections/helpers"),o=s.p2r,b=s.r2p,g=t(".././handle_outline"),d=g.clearOutline,f=t("./helpers"),m=f.readPaths,l=f.writePaths,x=f.ellipseOver,u=f.fixDatesForPaths;N.exports=function(w,p){if(!!w.length){var _=w[0][0];if(!!_){var h=_.getAttribute("d"),L=p.gd,E=L._fullLayout.newshape,S=p.plotinfo,P=S.xaxis,F=S.yaxis,I=!!S.domain||!S.xaxis,D=!!S.domain||!S.yaxis,R=p.isActiveShape,O=p.dragmode,z=(L.layout||{}).shapes||[];if(!c(O)&&R!==void 0){var G=L._fullLayout._activeShapeIndex;if(G<z.length)switch(L._fullLayout.shapes[G].type){case"rect":O="drawrect";break;case"circle":O="drawcircle";break;case"line":O="drawline";break;case"path":var Y=z[G].path||"";Y[Y.length-1]==="Z"?O="drawclosedpath":O="drawopenpath";break}}var ee=A(O),j=m(h,L,S,R),X={editable:!0,xref:I?"paper":P._id,yref:D?"paper":F._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};ee||(X.fillcolor=E.fillcolor,X.fillrule=E.fillrule);var ae;if(j.length===1&&(ae=j[0]),ae&&ae.length===5&&O==="drawrect")X.type="rect",X.x0=ae[0][1],X.y0=ae[0][2],X.x1=ae[2][1],X.y1=ae[2][2];else if(ae&&O==="drawline")X.type="line",X.x0=ae[0][1],X.y0=ae[0][2],X.x1=ae[1][1],X.y1=ae[1][2];else if(ae&&O==="drawcircle"){X.type="circle";var he=ae[e][1],K=ae[a][1],J=ae[i][1],U=ae[n][1],H=ae[e][2],q=ae[a][2],re=ae[i][2],Z=ae[n][2],Q=S.xaxis&&(S.xaxis.type==="date"||S.xaxis.type==="log"),ie=S.yaxis&&(S.yaxis.type==="date"||S.yaxis.type==="log");Q&&(he=b(S.xaxis,he),K=b(S.xaxis,K),J=b(S.xaxis,J),U=b(S.xaxis,U)),ie&&(H=b(S.yaxis,H),q=b(S.yaxis,q),re=b(S.yaxis,re),Z=b(S.yaxis,Z));var oe=(K+U)/2,ne=(H+re)/2,le=(U-K+J-he)/2,_e=(Z-q+re-H)/2,fe=x({x0:oe,y0:ne,x1:oe+le*r,y1:ne+_e*v});Q&&(fe.x0=o(S.xaxis,fe.x0),fe.x1=o(S.xaxis,fe.x1)),ie&&(fe.y0=o(S.yaxis,fe.y0),fe.y1=o(S.yaxis,fe.y1)),X.x0=fe.x0,X.y0=fe.y0,X.x1=fe.x1,X.y1=fe.y1}else X.type="path",P&&F&&u(j,P,F),X.path=l(j),ae=null;d(L);for(var ye=p.editHelpers,xe=(ye||{}).modifyItem,me=[],be=0;be<z.length;be++){var ke=L._fullLayout.shapes[be];if(me[be]=ke._input,R!==void 0&&be===L._fullLayout._activeShapeIndex){var De=X;switch(ke.type){case"line":case"rect":case"circle":xe("x0",De.x0),xe("x1",De.x1),xe("y0",De.y0),xe("y1",De.y1);break;case"path":xe("path",De.path);break}}}return R===void 0?(me.push(X),me):ye?ye.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(t,N,V){function y(A){var T=A._fullLayout._zoomlayer;T&&T.selectAll(".outline-controllers").remove()}function c(A){var T=A._fullLayout._zoomlayer;T&&T.selectAll(".select-outline").remove(),A._fullLayout._outlining=!1}N.exports={clearOutlineControllers:y,clearOutline:c}},{}],469:[function(t,N,V){var y=t("./constants"),c=t("../../lib"),A=t("../../plots/cartesian/axes");V.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(a){return a}},V.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(a){return a}},V.decodeDate=function(e){return function(a){return a.replace&&(a=a.replace("_"," ")),e(a)}},V.encodeDate=function(e){return function(a){return e(a).replace(" ","_")}},V.extractPathCoords=function(e,a,i){var n=[],r=e.match(y.segmentRE);return r.forEach(function(v){var s=a[v.charAt(0)].drawn;if(s!==void 0){var o=v.substr(1).match(y.paramRE);if(!(!o||o.length<s)){var b=o[s],g=i?b:c.cleanNumber(b);n.push(g)}}}),n},V.getDataToPixel=function(e,a,i,n){var r=e._fullLayout._size,v;if(a)if(n==="domain")v=function(o){return a._length*(i?1-o:o)+a._offset};else{var s=V.shapePositionToRange(a);v=function(o){return a._offset+a.r2p(s(o,!0))},a.type==="date"&&(v=V.decodeDate(v))}else i?v=function(o){return r.t+r.h*(1-o)}:v=function(o){return r.l+r.w*o};return v},V.getPixelToData=function(e,a,i,n){var r=e._fullLayout._size,v;if(a)if(n==="domain")v=function(o){var b=(o-a._offset)/a._length;return i?1-b:b};else{var s=V.rangeToShapePosition(a);v=function(o){return s(a.p2r(o-a._offset))}}else i?v=function(o){return 1-(o-r.t)/r.h}:v=function(o){return(o-r.l)/r.w};return v},V.roundPositionForSharpStrokeRendering=function(e,a){var i=Math.round(a%2)===1,n=Math.round(e);return i?n+.5:n},V.makeShapesOptionsAndPlotinfo=function(e,a){var i=e._fullLayout.shapes[a]||{},n=e._fullLayout._plots[i.xref+i.yref],r=!!n;return r?n._hadPlotinfo=!0:(n={},i.xref&&i.xref!=="paper"&&(n.xaxis=e._fullLayout[i.xref+"axis"]),i.yref&&i.yref!=="paper"&&(n.yaxis=e._fullLayout[i.yref+"axis"])),n.xsizemode=i.xsizemode,n.ysizemode=i.ysizemode,n.xanchor=i.xanchor,n.yanchor=i.yanchor,{options:i,plotinfo:n}},V.makeSelectionsOptionsAndPlotinfo=function(e,a){var i=e._fullLayout.selections[a]||{},n=e._fullLayout._plots[i.xref+i.yref],r=!!n;return r?n._hadPlotinfo=!0:(n={},i.xref&&(n.xaxis=e._fullLayout[i.xref+"axis"]),i.yref&&(n.yaxis=e._fullLayout[i.yref+"axis"])),{options:i,plotinfo:n}},V.getPathString=function(e,a){var i=a.type,n=A.getRefType(a.xref),r=A.getRefType(a.yref),v=A.getFromId(e,a.xref),s=A.getFromId(e,a.yref),o=e._fullLayout._size,b,g,d,f,m,l,x,u;if(v?n==="domain"?g=function(F){return v._offset+v._length*F}:(b=V.shapePositionToRange(v),g=function(F){return v._offset+v.r2p(b(F,!0))}):g=function(F){return o.l+o.w*F},s?r==="domain"?f=function(F){return s._offset+s._length*(1-F)}:(d=V.shapePositionToRange(s),f=function(F){return s._offset+s.r2p(d(F,!0))}):f=function(F){return o.t+o.h*(1-F)},i==="path")return v&&v.type==="date"&&(g=V.decodeDate(g)),s&&s.type==="date"&&(f=V.decodeDate(f)),T(a,g,f);if(a.xsizemode==="pixel"){var M=g(a.xanchor);m=M+a.x0,l=M+a.x1}else m=g(a.x0),l=g(a.x1);if(a.ysizemode==="pixel"){var w=f(a.yanchor);x=w-a.y0,u=w-a.y1}else x=f(a.y0),u=f(a.y1);if(i==="line")return"M"+m+","+x+"L"+l+","+u;if(i==="rect")return"M"+m+","+x+"H"+l+"V"+u+"H"+m+"Z";var p=(m+l)/2,_=(x+u)/2,h=Math.abs(p-m),L=Math.abs(_-x),E="A"+h+","+L,S=p+h+","+_,P=p+","+(_-L);return"M"+S+E+" 0 1,1 "+P+E+" 0 0,1 "+S+"Z"};function T(e,a,i){var n=e.path,r=e.xsizemode,v=e.ysizemode,s=e.xanchor,o=e.yanchor;return n.replace(y.segmentRE,function(b){var g=0,d=b.charAt(0),f=y.paramIsX[d],m=y.paramIsY[d],l=y.numParams[d],x=b.substr(1).replace(y.paramRE,function(u){return f[g]?r==="pixel"?u=a(s)+Number(u):u=a(u):m[g]&&(v==="pixel"?u=i(o)-Number(u):u=i(u)),g++,g>l&&(u="X"),u});return g>l&&(x=x.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+b)),d+x})}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(t,N,V){var y=t("./draw");N.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewShapeDefaults:t("./draw_newshape/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:y.draw,drawOne:y.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(t,N,V){var y=t("../../plots/font_attributes"),c=t("../../plots/pad_attributes"),A=t("../../lib/extend").extendDeepAll,T=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/animation_attributes"),a=t("../../plot_api/plot_template").templatedArray,i=t("./constants"),n=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});N.exports=T(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:n,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:A(c({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:y({})},font:y({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(t,N,V){N.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("./constants"),e=T.name,a=A.steps;N.exports=function(v,s){c(v,s,{name:e,handleItemDefaults:i})};function i(r,v,s){function o(u,M){return y.coerce(r,v,A,u,M)}for(var b=c(r,v,{name:"steps",handleItemDefaults:n}),g=0,d=0;d<b.length;d++)b[d].visible&&g++;var f;if(g<2?f=v.visible=!1:f=o("visible"),!!f){v._stepCount=g;var m=v._visibleSteps=y.filterVisible(b),l=o("active");(b[l]||{}).visible||(v.active=m[0]._index),o("x"),o("y"),y.noneOrAll(r,v,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),y.coerceFont(o,"font",s.font);var x=o("currentvalue.visible");x&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),y.coerceFont(o,"currentvalue.font",v.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function n(r,v){function s(g,d){return y.coerce(r,v,a,g,d)}var o;if(r.method!=="skip"&&!Array.isArray(r.args)?o=v.visible=!1:o=s("visible"),o){s("method"),s("args");var b=s("label","step-"+v._index);s("value",b),s("execute")}}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../plots/plots"),A=t("../color"),T=t("../drawing"),e=t("../../lib"),a=e.strTranslate,i=t("../../lib/svg_text_utils"),n=t("../../plot_api/plot_template").arrayEditor,r=t("./constants"),v=t("../../constants/alignment"),s=v.LINE_SPACING,o=v.FROM_TL,b=v.FROM_BR;N.exports=function(O){var z=O._fullLayout,G=d(z,O),Y=z._infolayer.selectAll("g."+r.containerClassName).data(G.length>0?[0]:[]);Y.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize");function ee(he){he._commandObserver&&(he._commandObserver.remove(),delete he._commandObserver),c.autoMargin(O,g(he))}if(Y.exit().each(function(){y.select(this).selectAll("g."+r.groupClassName).each(ee)}).remove(),G.length!==0){var j=Y.selectAll("g."+r.groupClassName).data(G,f);j.enter().append("g").classed(r.groupClassName,!0),j.exit().each(ee).remove();for(var X=0;X<G.length;X++){var ae=G[X];m(O,ae)}j.each(function(he){var K=y.select(this);E(he),c.manageCommandObserver(O,he,he._visibleSteps,function(J){var U=K.data()[0];U.active!==J.index&&(U._dragging||_(O,K,U,J.index,!1,!0))}),l(O,y.select(this),he)})}};function g(R){return r.autoMarginIdRoot+R._index}function d(R,O){for(var z=R[r.name],G=[],Y=0;Y<z.length;Y++){var ee=z[Y];!ee.visible||(ee._gd=O,G.push(ee))}return G}function f(R){return R._index}function m(R,O){var z=T.tester.selectAll("g."+r.labelGroupClass).data(O._visibleSteps);z.enter().append("g").classed(r.labelGroupClass,!0);var G=0,Y=0;z.each(function(q){var re=y.select(this),Z=M(re,{step:q},O),Q=Z.node();if(Q){var ie=T.bBox(Q);Y=Math.max(Y,ie.height),G=Math.max(G,ie.width)}}),z.remove();var ee=O._dims={};ee.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var j=R._fullLayout._size;ee.lx=j.l+j.w*O.x,ee.ly=j.t+j.h*(1-O.y),O.lenmode==="fraction"?ee.outerLength=Math.round(j.w*O.len):ee.outerLength=O.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-O.pad.l-O.pad.r);var X=ee.inputAreaLength-2*r.stepInset,ae=X/(O._stepCount-1),he=G+r.labelPadding;if(ee.labelStride=Math.max(1,Math.ceil(he/ae)),ee.labelHeight=Y,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,O.currentvalue.visible){var K=T.tester.append("g");z.each(function(q){var re=x(K,O,q.label),Z=re.node()&&T.bBox(re.node())||{width:0,height:0},Q=i.lineCount(re);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(Z.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(Z.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,Q)}),ee.currentValueTotalHeight=ee.currentValueHeight+O.currentvalue.offset,K.remove()}ee.height=ee.currentValueTotalHeight+r.tickOffset+O.ticklen+r.labelOffset+ee.labelHeight+O.pad.t+O.pad.b;var J="left";e.isRightAnchor(O)&&(ee.lx-=ee.outerLength,J="right"),e.isCenterAnchor(O)&&(ee.lx-=ee.outerLength/2,J="center");var U="top";e.isBottomAnchor(O)&&(ee.ly-=ee.height,U="bottom"),e.isMiddleAnchor(O)&&(ee.ly-=ee.height/2,U="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var H={y:O.y,b:ee.height*b[U],t:ee.height*o[U]};O.lenmode==="fraction"?(H.l=0,H.xl=O.x-O.len*o[J],H.r=0,H.xr=O.x+O.len*b[J]):(H.x=O.x,H.l=ee.outerLength*o[J],H.r=ee.outerLength*b[J]),c.autoMargin(R,g(O),H)}function l(R,O,z){(z.steps[z.active]||{}).visible||(z.active=z._visibleSteps[0]._index),O.call(x,z).call(D,z).call(w,z).call(L,z).call(I,R,z).call(u,R,z);var G=z._dims;T.setTranslate(O,G.lx+z.pad.l,G.ly+z.pad.t),O.call(S,z,!1),O.call(x,z)}function x(R,O,z){if(!!O.currentvalue.visible){var G=O._dims,Y,ee;switch(O.currentvalue.xanchor){case"right":Y=G.inputAreaLength-r.currentValueInset-G.currentValueMaxWidth,ee="left";break;case"center":Y=G.inputAreaLength*.5,ee="middle";break;default:Y=r.currentValueInset,ee="left"}var j=e.ensureSingle(R,"text",r.labelClass,function(U){U.attr({"text-anchor":ee,"data-notex":1})}),X=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof z=="string")X+=z;else{var ae=O.steps[O.active].label,he=O._gd._fullLayout._meta;he&&(ae=e.templateString(ae,he)),X+=ae}O.currentvalue.suffix&&(X+=O.currentvalue.suffix),j.call(T.font,O.currentvalue.font).text(X).call(i.convertToTspans,O._gd);var K=i.lineCount(j),J=(G.currentValueMaxLines+1-K)*O.currentvalue.font.size*s;return i.positionText(j,Y,J),j}}function u(R,O,z){var G=e.ensureSingle(R,"rect",r.gripRectClass,function(Y){Y.call(h,O,R,z).style("pointer-events","all")});G.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(A.stroke,z.bordercolor).call(A.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function M(R,O,z){var G=e.ensureSingle(R,"text",r.labelClass,function(j){j.attr({"text-anchor":"middle","data-notex":1})}),Y=O.step.label,ee=z._gd._fullLayout._meta;return ee&&(Y=e.templateString(Y,ee)),G.call(T.font,z.font).text(Y).call(i.convertToTspans,z._gd),G}function w(R,O){var z=e.ensureSingle(R,"g",r.labelsClass),G=O._dims,Y=z.selectAll("g."+r.labelGroupClass).data(G.labelSteps);Y.enter().append("g").classed(r.labelGroupClass,!0),Y.exit().remove(),Y.each(function(ee){var j=y.select(this);j.call(M,ee,O),T.setTranslate(j,P(O,ee.fraction),r.tickOffset+O.ticklen+O.font.size*s+r.labelOffset+G.currentValueTotalHeight)})}function p(R,O,z,G,Y){var ee=Math.round(G*(z._stepCount-1)),j=z._visibleSteps[ee]._index;j!==z.active&&_(R,O,z,j,!0,Y)}function _(R,O,z,G,Y,ee){var j=z.active;z.active=G,n(R.layout,r.name,z).applyUpdate("active",G);var X=z.steps[z.active];O.call(S,z,ee),O.call(x,z),R.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:Y,previousActive:j}),X&&X.method&&Y&&(O._nextMethod?(O._nextMethod.step=X,O._nextMethod.doCallback=Y,O._nextMethod.doTransition=ee):(O._nextMethod={step:X,doCallback:Y,doTransition:ee},O._nextMethodRaf=window.requestAnimationFrame(function(){var ae=O._nextMethod.step;!ae.method||(ae.execute&&c.executeAPICommand(R,ae.method,ae.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function h(R,O,z){var G=z.node(),Y=y.select(O);function ee(){return z.data()[0]}function j(){var X=ee();O.emit("plotly_sliderstart",{slider:X});var ae=z.select("."+r.gripRectClass);y.event.stopPropagation(),y.event.preventDefault(),ae.call(A.fill,X.activebgcolor);var he=F(X,y.mouse(G)[0]);p(O,z,X,he,!0),X._dragging=!0;function K(){var U=ee(),H=F(U,y.mouse(G)[0]);p(O,z,U,H,!1)}Y.on("mousemove",K),Y.on("touchmove",K);function J(){var U=ee();U._dragging=!1,ae.call(A.fill,U.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),O.emit("plotly_sliderend",{slider:U,step:U.steps[U.active]})}Y.on("mouseup",J),Y.on("touchend",J)}R.on("mousedown",j),R.on("touchstart",j)}function L(R,O){var z=R.selectAll("rect."+r.tickRectClass).data(O._visibleSteps),G=O._dims;z.enter().append("rect").classed(r.tickRectClass,!0),z.exit().remove(),z.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(Y,ee){var j=ee%G.labelStride===0,X=y.select(this);X.attr({height:j?O.ticklen:O.minorticklen}).call(A.fill,O.tickcolor),T.setTranslate(X,P(O,ee/(O._stepCount-1))-.5*O.tickwidth,(j?r.tickOffset:r.minorTickOffset)+G.currentValueTotalHeight)})}function E(R){var O=R._dims;O.labelSteps=[];for(var z=R._stepCount,G=0;G<z;G+=O.labelStride)O.labelSteps.push({fraction:G/(z-1),step:R._visibleSteps[G]})}function S(R,O,z){for(var G=R.select("rect."+r.gripRectClass),Y=0,ee=0;ee<O._stepCount;ee++)if(O._visibleSteps[ee]._index===O.active){Y=ee;break}var j=P(O,Y/(O._stepCount-1));if(!O._invokingCommand){var X=G;z&&O.transition.duration>0&&(X=X.transition().duration(O.transition.duration).ease(O.transition.easing)),X.attr("transform",a(j-r.gripWidth*.5,O._dims.currentValueTotalHeight))}}function P(R,O){var z=R._dims;return z.inputAreaStart+r.stepInset+(z.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,O))}function F(R,O){var z=R._dims;return Math.min(1,Math.max(0,(O-r.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*r.stepInset-2*z.inputAreaStart)))}function I(R,O,z){var G=z._dims,Y=e.ensureSingle(R,"rect",r.railTouchRectClass,function(ee){ee.call(h,O,R,z).style("pointer-events","all")});Y.attr({width:G.inputAreaLength,height:Math.max(G.inputAreaWidth,r.tickOffset+z.ticklen+G.labelHeight)}).call(A.fill,z.bgcolor).attr("opacity",0),T.setTranslate(Y,0,G.currentValueTotalHeight)}function D(R,O){var z=O._dims,G=z.inputAreaLength-r.railInset*2,Y=e.ensureSingle(R,"rect",r.railRectClass);Y.attr({width:G,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(A.stroke,O.bordercolor).call(A.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),T.setTranslate(Y,r.railInset,(z.inputAreaWidth-r.railWidth)*.5+z.currentValueTotalHeight)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(t,N,V){var y=t("./constants");N.exports={moduleType:"component",name:y.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib"),a=e.strTranslate,i=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),v=t("../../constants/interactions"),s=t("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;function b(g,d,f){var m=f.propContainer,l=f.propName,x=f.placeholder,u=f.traceIndex,M=f.avoid||{},w=f.attributes,p=f.transform,_=f.containerGroup,h=g._fullLayout,L=1,E=!1,S=m.title,P=(S&&S.text?S.text:"").trim(),F=S&&S.font?S.font:{},I=F.family,D=F.size,R=F.color,O;l==="title.text"?O="titleText":l.indexOf("axis")!==-1?O="axisTitleText":l.indexOf("colorbar"!==-1)&&(O="colorbarTitleText");var z=g._context.edits[O];P===""?L=0:P.replace(o," % ")===x.replace(o," % ")&&(L=.2,E=!0,z||(P="")),f._meta?P=e.templateString(P,f._meta):h._meta&&(P=e.templateString(P,h._meta));var G=P||z,Y;_||(_=e.ensureSingle(h._infolayer,"g","g-"+d),Y=h._hColorbarMoveTitle);var ee=_.selectAll("text").data(G?[0]:[]);if(ee.enter().append("text"),ee.text(P).attr("class",d),ee.exit().remove(),!G)return _;function j(K){e.syncOrAsync([X,ae],K)}function X(K){var J;return!p&&Y&&(p={}),p?(J="",p.rotate&&(J+="rotate("+[p.rotate,w.x,w.y]+")"),(p.offset||Y)&&(J+=a(0,(p.offset||0)-(Y||0)))):J=null,K.attr("transform",J),K.style({"font-family":I,"font-size":y.round(D,2)+"px",fill:n.rgb(R),opacity:L*n.opacity(R),"font-weight":A.fontWeight}).attr(w).call(r.convertToTspans,g),A.previousPromises(g)}function ae(K){var J=y.select(K.node().parentNode);if(M&&M.selection&&M.side&&P){J.attr("transform",null);var U=s[M.side],H=M.side==="left"||M.side==="top"?-1:1,q=c(M.pad)?M.pad:2,re=i.bBox(J.node()),Z={left:0,top:0,right:h.width,bottom:h.height},Q=M.maxShift||H*(Z[M.side]-re[M.side]),ie=0;if(Q<0)ie=Q;else{var oe=M.offsetLeft||0,ne=M.offsetTop||0;re.left-=oe,re.right-=oe,re.top-=ne,re.bottom-=ne,M.selection.each(function(){var _e=i.bBox(this);e.bBoxIntersect(re,_e,q)&&(ie=Math.max(ie,H*(_e[M.side]-re[U])+q))}),ie=Math.min(Q,ie)}if(ie>0||Q<0){var le={left:[-ie,0],right:[ie,0],top:[0,-ie],bottom:[0,ie]}[M.side];J.attr("transform",a(le[0],le[1]))}}}ee.call(j);function he(){L=0,E=!0,ee.text(x).on("mouseover.opacity",function(){y.select(this).transition().duration(v.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){y.select(this).transition().duration(v.HIDE_PLACEHOLDER).style("opacity",0)})}return z&&(P?ee.on(".opacity",null):he(),ee.call(r.makeEditable,{gd:g}).on("edit",function(K){u!==void 0?T.call("_guiRestyle",g,l,K,u):T.call("_guiRelayout",g,l,K)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(j)}).on("input",function(K){this.text(K||" ").call(r.positionText,w.x,w.y)})),ee.classed("js-placeholder",E),_}N.exports={draw:b}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(t,N,V){var y=t("../../plots/font_attributes"),c=t("../color/attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/pad_attributes"),a=t("../../plot_api/plot_template").templatedArray,i=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});N.exports=T(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:A(e({editType:"arraydraw"}),{}),font:y({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:c.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(t,N,V){N.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],479:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("./constants"),e=T.name,a=A.buttons;N.exports=function(v,s){var o={name:e,handleItemDefaults:i};c(v,s,o)};function i(r,v,s){function o(d,f){return y.coerce(r,v,A,d,f)}var b=c(r,v,{name:"buttons",handleItemDefaults:n}),g=o("visible",b.length>0);!g||(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),y.noneOrAll(r,v,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),y.coerceFont(o,"font",s.font),o("bgcolor",s.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function n(r,v){function s(b,g){return y.coerce(r,v,a,b,g)}var o=s("visible",r.method==="skip"||Array.isArray(r.args));o&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../plots/plots"),A=t("../color"),T=t("../drawing"),e=t("../../lib"),a=t("../../lib/svg_text_utils"),i=t("../../plot_api/plot_template").arrayEditor,n=t("../../constants/alignment").LINE_SPACING,r=t("./constants"),v=t("./scrollbox");N.exports=function(F){var I=F._fullLayout,D=e.filterVisible(I[r.name]);function R(ae){c.autoMargin(F,L(ae))}var O=I._menulayer.selectAll("g."+r.containerClassName).data(D.length>0?[0]:[]);if(O.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){y.select(this).selectAll("g."+r.headerGroupClassName).each(R)}).remove(),D.length!==0){var z=O.selectAll("g."+r.headerGroupClassName).data(D,s);z.enter().append("g").classed(r.headerGroupClassName,!0);for(var G=e.ensureSingle(O,"g",r.dropdownButtonGroupClassName,function(ae){ae.style("pointer-events","all")}),Y=0;Y<D.length;Y++){var ee=D[Y];h(F,ee)}var j="updatemenus"+I._uid,X=new v(F,G,j);z.enter().size()&&(G.node().parentNode.appendChild(G.node()),G.call(S)),z.exit().each(function(ae){G.call(S),R(ae)}).remove(),z.each(function(ae){var he=y.select(this),K=ae.type==="dropdown"?G:null;c.manageCommandObserver(F,ae,ae.buttons,function(J){g(F,ae,ae.buttons[J.index],he,K,X,J.index,!0)}),ae.type==="dropdown"?(d(F,he,G,X,ae),b(G,ae)&&f(F,he,G,X,ae)):f(F,he,null,null,ae)})}};function s(P){return P._index}function o(P){return+P.attr(r.menuIndexAttrName)==-1}function b(P,F){return+P.attr(r.menuIndexAttrName)===F._index}function g(P,F,I,D,R,O,z,G){F.active=z,i(P.layout,r.name,F).applyUpdate("active",z),F.type==="buttons"?f(P,D,null,null,F):F.type==="dropdown"&&(R.attr(r.menuIndexAttrName,"-1"),d(P,D,R,O,F),G||f(P,D,R,O,F))}function d(P,F,I,D,R){var O=e.ensureSingle(F,"g",r.headerClassName,function(ae){ae.style("pointer-events","all")}),z=R._dims,G=R.active,Y=R.buttons[G]||r.blankHeaderOpts,ee={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},j={width:z.headerWidth,height:z.headerHeight};O.call(x,R,Y,P).call(E,R,ee,j);var X=e.ensureSingle(F,"text",r.headerArrowClassName,function(ae){ae.attr("text-anchor","end").call(T.font,R.font).text(r.arrowSymbol[R.direction])});X.attr({x:z.headerWidth-r.arrowOffsetX+R.pad.l,y:z.headerHeight/2+r.textOffsetY+R.pad.t}),O.on("click",function(){I.call(S,String(b(I,R)?-1:R._index)),f(P,F,I,D,R)}),O.on("mouseover",function(){O.call(p)}),O.on("mouseout",function(){O.call(_,R)}),T.setTranslate(F,z.lx,z.ly)}function f(P,F,I,D,R){I||(I=F,I.attr("pointer-events","all"));var O=!o(I)||R.type==="buttons"?R.buttons:[],z=R.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,G=I.selectAll("g."+z).data(e.filterVisible(O)),Y=G.enter().append("g").classed(z,!0),ee=G.exit();R.type==="dropdown"?(Y.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var j=0,X=0,ae=R._dims,he=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(he?X=ae.headerHeight+r.gapButtonHeader:j=ae.headerWidth+r.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(X=-r.gapButtonHeader+r.gapButton-ae.openHeight),R.type==="dropdown"&&R.direction==="left"&&(j=-r.gapButtonHeader+r.gapButton-ae.openWidth);var K={x:ae.lx+j+R.pad.l,y:ae.ly+X+R.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},J={l:K.x+R.borderwidth,t:K.y+R.borderwidth};G.each(function(U,H){var q=y.select(this);q.call(x,R,U,P).call(E,R,K),q.on("click",function(){y.event.defaultPrevented||(U.execute&&(U.args2&&R.active===H?(g(P,R,U,F,I,D,-1),c.executeAPICommand(P,U.method,U.args2)):(g(P,R,U,F,I,D,H),c.executeAPICommand(P,U.method,U.args))),P.emit("plotly_buttonclicked",{menu:R,button:U,active:R.active}))}),q.on("mouseover",function(){q.call(p)}),q.on("mouseout",function(){q.call(_,R),G.call(w,R)})}),G.call(w,R),he?(J.w=Math.max(ae.openWidth,ae.headerWidth),J.h=K.y-J.t):(J.w=K.x-J.l,J.h=Math.max(ae.openHeight,ae.headerHeight)),J.direction=R.direction,D&&(G.size()?m(P,F,I,D,R,J):l(D))}function m(P,F,I,D,R,O){var z=R.direction,G=z==="up"||z==="down",Y=R._dims,ee=R.active,j,X,ae;if(G)for(X=0,ae=0;ae<ee;ae++)X+=Y.heights[ae]+r.gapButton;else for(j=0,ae=0;ae<ee;ae++)j+=Y.widths[ae]+r.gapButton;D.enable(O,j,X),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(P){var F=!!P.hbar,I=!!P.vbar;F&&P.hbar.transition().attr("opacity","0").each("end",function(){F=!1,I||P.disable()}),I&&P.vbar.transition().attr("opacity","0").each("end",function(){I=!1,F||P.disable()})}function x(P,F,I,D){P.call(u,F).call(M,F,I,D)}function u(P,F){var I=e.ensureSingle(P,"rect",r.itemRectClassName,function(D){D.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});I.call(A.stroke,F.bordercolor).call(A.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function M(P,F,I,D){var R=e.ensureSingle(P,"text",r.itemTextClassName,function(G){G.attr({"text-anchor":"start","data-notex":1})}),O=I.label,z=D._fullLayout._meta;z&&(O=e.templateString(O,z)),R.call(T.font,F.font).text(O).call(a.convertToTspans,D)}function w(P,F){var I=F.active;P.each(function(D,R){var O=y.select(this);R===I&&F.showactive&&O.select("rect."+r.itemRectClassName).call(A.fill,r.activeColor)})}function p(P){P.select("rect."+r.itemRectClassName).call(A.fill,r.hoverColor)}function _(P,F){P.select("rect."+r.itemRectClassName).call(A.fill,F.bgcolor)}function h(P,F){var I=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=T.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(F.buttons));D.enter().append("g").classed(r.dropdownButtonClassName,!0);var R=["up","down"].indexOf(F.direction)!==-1;D.each(function(j,X){var ae=y.select(this);ae.call(x,F,j,P);var he=ae.select("."+r.itemTextClassName),K=he.node()&&T.bBox(he.node()).width,J=Math.max(K+r.textPadX,r.minWidth),U=F.font.size*n,H=a.lineCount(he),q=Math.max(U*H,r.minHeight)+r.textOffsetY;q=Math.ceil(q),J=Math.ceil(J),I.widths[X]=J,I.heights[X]=q,I.height1=Math.max(I.height1,q),I.width1=Math.max(I.width1,J),R?(I.totalWidth=Math.max(I.totalWidth,J),I.openWidth=I.totalWidth,I.totalHeight+=q+r.gapButton,I.openHeight+=q+r.gapButton):(I.totalWidth+=J+r.gapButton,I.openWidth+=J+r.gapButton,I.totalHeight=Math.max(I.totalHeight,q),I.openHeight=I.totalHeight)}),R?I.totalHeight-=r.gapButton:I.totalWidth-=r.gapButton,I.headerWidth=I.width1+r.arrowPadX,I.headerHeight=I.height1,F.type==="dropdown"&&(R?(I.width1+=r.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=r.arrowPadX),D.remove();var O=I.totalWidth+F.pad.l+F.pad.r,z=I.totalHeight+F.pad.t+F.pad.b,G=P._fullLayout._size;I.lx=G.l+G.w*F.x,I.ly=G.t+G.h*(1-F.y);var Y="left";e.isRightAnchor(F)&&(I.lx-=O,Y="right"),e.isCenterAnchor(F)&&(I.lx-=O/2,Y="center");var ee="top";e.isBottomAnchor(F)&&(I.ly-=z,ee="bottom"),e.isMiddleAnchor(F)&&(I.ly-=z/2,ee="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),c.autoMargin(P,L(F),{x:F.x,y:F.y,l:O*({right:1,center:.5}[Y]||0),r:O*({left:1,center:.5}[Y]||0),b:z*({top:1,middle:.5}[ee]||0),t:z*({bottom:1,middle:.5}[ee]||0)})}function L(P){return r.autoMarginIdRoot+P._index}function E(P,F,I,D){D=D||{};var R=P.select("."+r.itemRectClassName),O=P.select("."+r.itemTextClassName),z=F.borderwidth,G=I.index,Y=F._dims;T.setTranslate(P,z+I.x,z+I.y);var ee=["up","down"].indexOf(F.direction)!==-1,j=D.height||(ee?Y.heights[G]:Y.height1);R.attr({x:0,y:0,width:D.width||(ee?Y.width1:Y.widths[G]),height:j});var X=F.font.size*n,ae=a.lineCount(O),he=(ae-1)*X/2;a.positionText(O,r.textOffsetX,j/2-he+r.textOffsetY),ee?I.y+=Y.heights[G]+I.yPad:I.x+=Y.widths[G]+I.xPad,I.index++}function S(P,F){P.attr(r.menuIndexAttrName,F||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(t,N,V){arguments[4][475][0].apply(V,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(t,N,V){N.exports=e;var y=t("@plotly/d3"),c=t("../color"),A=t("../drawing"),T=t("../../lib");function e(a,i,n){this.gd=a,this.container=i,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(i,n,r){var v=this.gd._fullLayout,s=v.width,o=v.height;this.position=i;var b=this.position.l,g=this.position.w,d=this.position.t,f=this.position.h,m=this.position.direction,l=m==="down",x=m==="left",u=m==="right",M=m==="up",w=g,p=f,_,h,L,E;!l&&!x&&!u&&!M&&(this.position.direction="down",l=!0);var S=l||M;S?(_=b,h=_+w,l?(L=d,E=Math.min(L+p,o),p=E-L):(E=d+p,L=Math.max(E-p,0),p=E-L)):(L=d,E=L+p,x?(h=b+w,_=Math.max(h-w,0),w=h-_):(_=b,h=Math.min(_+w,s),w=h-_)),this._box={l:_,t:L,w,h:p};var P=g>w,F=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,D=b,R=d+f;R+I>o&&(R=o-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(c.fill,e.barColor),P?(this.hbar=O.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:R,width:F,height:I}),this._hbarXMin=D+F/2,this._hbarTranslateMax=w-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=f>p,G=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,ee=b+g,j=d;ee+G>s&&(ee=s-G);var X=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(c.fill,e.barColor),z?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:ee,y:j,width:G,height:Y}),this._vbarYMin=j+Y/2,this._vbarTranslateMax=p-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var ae=this.id,he=_-.5,K=z?h+G+.5:h+.5,J=L-.5,U=P?E+I+.5:E+.5,H=v._topdefs.selectAll("#"+ae).data(P||z?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",ae).append("rect"),P||z?(this._clipRect=H.select("rect").attr({x:Math.floor(he),y:Math.floor(J),width:Math.ceil(K)-Math.floor(he),height:Math.ceil(U)-Math.floor(J)}),this.container.call(A.setClipUrl,ae,this.gd),this.bg.attr({x:b,y:d,width:g,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(A.setClipUrl,null),delete this._clipRect),P||z){var q=y.behavior.drag().on("dragstart",function(){y.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var re=y.behavior.drag().on("dragstart",function(){y.event.sourceEvent.preventDefault(),y.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(re),z&&this.vbar.on(".drag",null).call(re)}this.setTranslate(n,r)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(A.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i-=y.event.dx),this.vbar&&(n-=y.event.dy),this.setTranslate(i,n)},e.prototype._onBoxWheel=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i+=y.event.deltaY),this.vbar&&(n+=y.event.deltaY),this.setTranslate(i,n)},e.prototype._onBarDrag=function(){var i=this.translateX,n=this.translateY;if(this.hbar){var r=i+this._hbarXMin,v=r+this._hbarTranslateMax,s=T.constrain(y.event.x,r,v),o=(s-r)/(v-r),b=this.position.w-this._box.w;i=o*b}if(this.vbar){var g=n+this._vbarYMin,d=g+this._vbarTranslateMax,f=T.constrain(y.event.y,g,d),m=(f-g)/(d-g),l=this.position.h-this._box.h;n=m*l}this.setTranslate(i,n)},e.prototype.setTranslate=function(i,n){var r=this.position.w-this._box.w,v=this.position.h-this._box.h;if(i=T.constrain(i||0,0,r),n=T.constrain(n||0,0,v),this.translateX=i,this.translateY=n,this.container.call(A.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var s=i/r;this.hbar.call(A.setTranslate,i+s*this._hbarTranslateMax,n)}if(this.vbar){var o=n/v;this.vbar.call(A.setTranslate,i,n+o*this._vbarTranslateMax)}}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(t,N,V){N.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(t,N,V){N.exports={axisRefDescription:function(y,c,A){return["If set to a",y,"axis id (e.g. *"+y+"* or","*"+y+"2*), the `"+y+"` position refers to a",y,"coordinate. If set to *paper*, the `"+y+"`","position refers to the distance from the",c,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",c,"("+A+"). If set to a",y,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",c,"of the domain of that axis: e.g.,","*"+y+"2 domain* refers to the domain of the second",y," axis and a",y,"position of 0.5 refers to the","point between the",c,"and the",A,"of the domain of the","second",y,"axis."].join(" ")}}},{}],485:[function(t,N,V){N.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],486:[function(t,N,V){N.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(t,N,V){N.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(t,N,V){N.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(t,N,V){N.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],490:[function(t,N,V){N.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(t,N,V){N.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(t,N,V){V.xmlns="http://www.w3.org/2000/xmlns/",V.svg="http://www.w3.org/2000/svg",V.xlink="http://www.w3.org/1999/xlink",V.svgAttrs={xmlns:V.svg,"xmlns:xlink":V.xlink}},{}],493:[function(t,N,V){V.version=t("./version").version,t("native-promise-only"),t("../build/plotcss");for(var y=t("./registry"),c=V.register=y.register,A=t("./plot_api"),T=Object.keys(A),e=0;e<T.length;e++){var a=T[e];a.charAt(0)!=="_"&&(V[a]=A[a]),c({moduleType:"apiMethod",name:a,fn:A[a]})}c(t("./traces/scatter")),c([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/selections"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar"),t("./components/modebar")]),c([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(c(window.PlotlyLocales),delete window.PlotlyLocales),V.Icons=t("./fonts/ploticon");var i=t("./components/fx"),n=t("./plots/plots");V.Plots={resize:n.resize,graphJson:n.graphJson,sendDataToCloud:n.sendDataToCloud},V.Fx={hover:i.hover,unhover:i.unhover,loneHover:i.loneHover,loneUnhover:i.loneUnhover},V.Snapshot=t("./snapshot"),V.PlotSchema=t("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(t,N,V){N.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(t,N,V){V.isLeftAnchor=function(c){return c.xanchor==="left"||c.xanchor==="auto"&&c.x<=1/3},V.isCenterAnchor=function(c){return c.xanchor==="center"||c.xanchor==="auto"&&c.x>1/3&&c.x<2/3},V.isRightAnchor=function(c){return c.xanchor==="right"||c.xanchor==="auto"&&c.x>=2/3},V.isTopAnchor=function(c){return c.yanchor==="top"||c.yanchor==="auto"&&c.y>=2/3},V.isMiddleAnchor=function(c){return c.yanchor==="middle"||c.yanchor==="auto"&&c.y>1/3&&c.y<2/3},V.isBottomAnchor=function(c){return c.yanchor==="bottom"||c.yanchor==="auto"&&c.y<=1/3}},{}],496:[function(t,N,V){var y=t("./mod"),c=y.mod,A=y.modHalf,T=Math.PI,e=2*T;function a(m){return m/180*T}function i(m){return m/T*180}function n(m){return Math.abs(m[1]-m[0])>e-1e-14}function r(m,l){return A(l-m,e)}function v(m,l){return Math.abs(r(m,l))}function s(m,l){if(n(l))return!0;var x,u;l[0]<l[1]?(x=l[0],u=l[1]):(x=l[1],u=l[0]),x=c(x,e),u=c(u,e),x>u&&(u+=e);var M=c(m,e),w=M+e;return M>=x&&M<=u||w>=x&&w<=u}function o(m,l,x,u){if(!s(l,u))return!1;var M,w;return x[0]<x[1]?(M=x[0],w=x[1]):(M=x[1],w=x[0]),m>=M&&m<=w}function b(m,l,x,u,M,w,p){M=M||0,w=w||0;var _=n([x,u]),h,L,E,S,P;_?(h=0,L=T,E=e):x<u?(h=x,E=u):(h=u,E=x),m<l?(S=m,P=l):(S=l,P=m);function F(O,z){return[O*Math.cos(z)+M,w-O*Math.sin(z)]}var I=Math.abs(E-h)<=T?0:1;function D(O,z,G){return"A"+[O,O]+" "+[0,I,G]+" "+F(O,z)}var R;return _?S===null?R="M"+F(P,h)+D(P,L,0)+D(P,E,0)+"Z":R="M"+F(S,h)+D(S,L,0)+D(S,E,0)+"ZM"+F(P,h)+D(P,L,1)+D(P,E,1)+"Z":S===null?(R="M"+F(P,h)+D(P,E,0),p&&(R+="L0,0Z")):R="M"+F(S,h)+"L"+F(P,h)+D(P,E,0)+"L"+F(S,E)+D(S,h,1)+"Z",R}function g(m,l,x,u,M){return b(null,m,l,x,u,M,0)}function d(m,l,x,u,M){return b(null,m,l,x,u,M,1)}function f(m,l,x,u,M,w){return b(m,l,x,u,M,w,1)}N.exports={deg2rad:a,rad2deg:i,angleDelta:r,angleDist:v,isFullCircle:n,isAngleInsideSector:s,isPtInsideSector:o,pathArc:g,pathSector:d,pathAnnulus:f}},{"./mod":522}],497:[function(t,N,V){var y=Array.isArray,c=ArrayBuffer,A=DataView;function T(n){return c.isView(n)&&!(n instanceof A)}V.isTypedArray=T;function e(n){return y(n)||T(n)}V.isArrayOrTypedArray=e;function a(n){return!e(n[0])}V.isArray1D=a,V.ensureArray=function(n,r){return y(n)||(n=[]),n.length=r,n},V.concat=function(){var n=[],r=!0,v=0,s,o,b,g,d,f,m,l;for(b=0;b<arguments.length;b++)g=arguments[b],f=g.length,f&&(o?n.push(g):(o=g,d=f),y(g)?s=!1:(r=!1,v?s!==g.constructor&&(s=!1):s=g.constructor),v+=f);if(!v)return[];if(!n.length)return o;if(r)return o.concat.apply(o,n);if(s){for(m=new s(v),m.set(o),b=0;b<n.length;b++)g=n[b],m.set(g,d),d+=g.length;return m}for(m=new Array(v),l=0;l<o.length;l++)m[l]=o[l];for(b=0;b<n.length;b++){for(g=n[b],l=0;l<g.length;l++)m[d+l]=g[l];d+=l}return m},V.maxRowLength=function(n){return i(n,Math.max,0)},V.minRowLength=function(n){return i(n,Math.min,1/0)};function i(n,r,v){if(e(n))if(e(n[0])){for(var s=v,o=0;o<n.length;o++)s=r(s,n[o].length);return s}else return n.length;return 0}},{}],498:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../constants/numerical").BADNUM,A=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;N.exports=function(e){return typeof e=="string"&&(e=e.replace(A,"")),y(e)?Number(e):c}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(t,N,V){N.exports=function(c){var A=c._fullLayout;A._glcanvas&&A._glcanvas.size()&&A._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],500:[function(t,N,V){N.exports=function(c){c._responsiveChartHandler&&(window.removeEventListener("resize",c._responsiveChartHandler),delete c._responsiveChartHandler)}},{}],501:[function(t,N,V){var y=t("fast-isnumeric"),c=t("tinycolor2"),A=t("../plots/attributes"),T=t("../components/colorscale/scales"),e=t("../components/color"),a=t("../constants/interactions").DESELECTDIM,i=t("./nested_property"),n=t("./regex").counter,r=t("./mod").modHalf,v=t("./array").isArrayOrTypedArray;V.valObjectMeta={data_array:{coerceFunction:function(o,b,g){v(o)?b.set(o):g!==void 0&&b.set(g)}},enumerated:{coerceFunction:function(o,b,g,d){d.coerceNumber&&(o=+o),d.values.indexOf(o)===-1?b.set(g):b.set(o)},validateFunction:function(o,b){b.coerceNumber&&(o=+o);for(var g=b.values,d=0;d<g.length;d++){var f=String(g[d]);if(f.charAt(0)==="/"&&f.charAt(f.length-1)==="/"){var m=new RegExp(f.substr(1,f.length-2));if(m.test(o))return!0}else if(o===g[d])return!0}return!1}},boolean:{coerceFunction:function(o,b,g){o===!0||o===!1?b.set(o):b.set(g)}},number:{coerceFunction:function(o,b,g,d){!y(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?b.set(g):b.set(+o)}},integer:{coerceFunction:function(o,b,g,d){o%1||!y(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?b.set(g):b.set(+o)}},string:{coerceFunction:function(o,b,g,d){if(typeof o!="string"){var f=typeof o=="number";d.strict===!0||!f?b.set(g):b.set(String(o))}else d.noBlank&&!o?b.set(g):b.set(o)}},color:{coerceFunction:function(o,b,g){c(o).isValid()?b.set(o):b.set(g)}},colorlist:{coerceFunction:function(o,b,g){function d(f){return c(f).isValid()}!Array.isArray(o)||!o.length?b.set(g):o.every(d)?b.set(o):b.set(g)}},colorscale:{coerceFunction:function(o,b,g){b.set(T.get(o,g))}},angle:{coerceFunction:function(o,b,g){o==="auto"?b.set("auto"):y(o)?b.set(r(+o,360)):b.set(g)}},subplotid:{coerceFunction:function(o,b,g,d){var f=d.regex||n(g);if(typeof o=="string"&&f.test(o)){b.set(o);return}b.set(g)},validateFunction:function(o,b){var g=b.dflt;return o===g?!0:typeof o!="string"?!1:!!n(g).test(o)}},flaglist:{coerceFunction:function(o,b,g,d){if((d.extras||[]).indexOf(o)!==-1){b.set(o);return}if(typeof o!="string"){b.set(g);return}for(var f=o.split("+"),m=0;m<f.length;){var l=f[m];d.flags.indexOf(l)===-1||f.indexOf(l)<m?f.splice(m,1):m++}f.length?b.set(f.join("+")):b.set(g)}},any:{coerceFunction:function(o,b,g){o===void 0?b.set(g):b.set(o)}},info_array:{coerceFunction:function(o,b,g,d){function f(F,I,D){var R,O={set:function(z){R=z}};return D===void 0&&(D=I.dflt),V.valObjectMeta[I.valType].coerceFunction(F,O,D,I),R}var m=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(!Array.isArray(o)){b.set(g);return}var l=d.items,x=[],u=Array.isArray(l),M=u&&m&&Array.isArray(l[0]),w=m&&u&&!M,p=u&&!w?l.length:o.length,_,h,L,E,S,P;if(g=Array.isArray(g)?g:[],m)for(_=0;_<p;_++)for(x[_]=[],L=Array.isArray(o[_])?o[_]:[],w?S=l.length:u?S=l[_].length:S=L.length,h=0;h<S;h++)w?E=l[h]:u?E=l[_][h]:E=l,P=f(L[h],E,(g[_]||[])[h]),P!==void 0&&(x[_][h]=P);else for(_=0;_<p;_++)P=f(o[_],u?l[_]:l,g[_]),P!==void 0&&(x[_]=P);b.set(x)},validateFunction:function(o,b){if(!Array.isArray(o))return!1;var g=b.items,d=Array.isArray(g),f=b.dimensions===2;if(!b.freeLength&&o.length!==g.length)return!1;for(var m=0;m<o.length;m++)if(f){if(!Array.isArray(o[m])||!b.freeLength&&o[m].length!==g[m].length)return!1;for(var l=0;l<o[m].length;l++)if(!s(o[m][l],d?g[m][l]:g))return!1}else if(!s(o[m],d?g[m]:g))return!1;return!0}}},V.coerce=function(o,b,g,d,f){var m=i(g,d).get(),l=i(o,d),x=i(b,d),u=l.get(),M=b._template;if(u===void 0&&M&&(u=i(M,d).get(),M=0),f===void 0&&(f=m.dflt),m.arrayOk&&v(u))return x.set(u),u;var w=V.valObjectMeta[m.valType].coerceFunction;w(u,x,f,m);var p=x.get();return M&&p===f&&!s(u,m)&&(u=i(M,d).get(),w(u,x,f,m),p=x.get()),p},V.coerce2=function(o,b,g,d,f){var m=i(o,d),l=V.coerce(o,b,g,d,f),x=m.get();return x!=null?l:!1},V.coerceFont=function(o,b,g){var d={};return g=g||{},d.family=o(b+".family",g.family),d.size=o(b+".size",g.size),d.color=o(b+".color",g.color),d},V.coercePattern=function(o,b,g,d){var f=o(b+".shape");if(f){o(b+".solidity"),o(b+".size");var m=o(b+".fillmode"),l=m==="overlay";if(!d){var x=o(b+".bgcolor",l?g:void 0);o(b+".fgcolor",l?e.contrast(x):g)}o(b+".fgopacity",l?.5:1)}},V.coerceHoverinfo=function(o,b,g){var d=b._module.attributes,f=d.hoverinfo?d:A,m=f.hoverinfo,l;if(g._dataLength===1){var x=m.dflt==="all"?m.flags.slice():m.dflt.split("+");x.splice(x.indexOf("name"),1),l=x.join("+")}return V.coerce(o,b,f,"hoverinfo",l)},V.coerceSelectionMarkerOpacity=function(o,b){if(!!o.marker){var g=o.marker.opacity;if(g!==void 0){var d,f;!v(g)&&!o.selected&&!o.unselected&&(d=g,f=a*g),b("selected.marker.opacity",d),b("unselected.marker.opacity",f)}}};function s(o,b){var g=V.valObjectMeta[b.valType];if(b.arrayOk&&v(o))return!0;if(g.validateFunction)return g.validateFunction(o,b);var d={},f=d,m={set:function(l){f=l}};return g.coerceFunction(o,m,d,b),f!==d}V.validate=s},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(t,N,V){var y=t("d3-time-format").timeFormat,c=t("fast-isnumeric"),A=t("./loggers"),T=t("./mod").mod,e=t("../constants/numerical"),a=e.BADNUM,i=e.ONEDAY,n=e.ONEHOUR,r=e.ONEMIN,v=e.ONESEC,s=e.EPOCHJD,o=t("../registry"),b=t("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,f=new Date().getFullYear()-70;function m(R){return R&&o.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}V.dateTick0=function(R,O){var z=l(R,!!O);if(O<2)return z;var G=V.dateTime2ms(z,R);return G+=i*(O-1),V.ms2DateTime(G,0,R)};function l(R,O){return m(R)?O?o.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:o.getComponentMethod("calendars","CANONICAL_TICK")[R]:O?"2000-01-02":"2000-01-01"}V.dfltRange=function(R){return m(R)?o.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},V.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var x,u;V.dateTime2ms=function(R,O){if(V.isJSDate(R)){var z=R.getTimezoneOffset()*r,G=(R.getUTCMinutes()-R.getMinutes())*r+(R.getUTCSeconds()-R.getSeconds())*v+(R.getUTCMilliseconds()-R.getMilliseconds());if(G){var Y=3*r;z=z-Y/2+T(G-z+Y/2,Y)}return R=Number(R)-z,R>=x&&R<=u?R:a}if(typeof R!="string"&&typeof R!="number")return a;R=String(R);var ee=m(O),j=R.charAt(0);ee&&(j==="G"||j==="g")&&(R=R.substr(1),O="");var X=ee&&O.substr(0,7)==="chinese",ae=R.match(X?d:g);if(!ae)return a;var he=ae[1],K=ae[3]||"1",J=Number(ae[5]||1),U=Number(ae[7]||0),H=Number(ae[9]||0),q=Number(ae[11]||0);if(ee){if(he.length===2)return a;he=Number(he);var re;try{var Z=o.getComponentMethod("calendars","getCal")(O);if(X){var Q=K.charAt(K.length-1)==="i";K=parseInt(K,10),re=Z.newDate(he,Z.toMonthIndex(he,K,Q),J)}else re=Z.newDate(he,Number(K),J)}catch{return a}return re?(re.toJD()-s)*i+U*n+H*r+q*v:a}he.length===2?he=(Number(he)+2e3-f)%100+f:he=Number(he),K-=1;var ie=new Date(Date.UTC(2e3,K,J,U,H));return ie.setUTCFullYear(he),ie.getUTCMonth()!==K||ie.getUTCDate()!==J?a:ie.getTime()+q*v},x=V.MIN_MS=V.dateTime2ms("-9999"),u=V.MAX_MS=V.dateTime2ms("9999-12-31 23:59:59.9999"),V.isDateTime=function(R,O){return V.dateTime2ms(R,O)!==a};function M(R,O){return String(R+Math.pow(10,O)).substr(1)}var w=90*i,p=3*n,_=5*r;V.ms2DateTime=function(R,O,z){if(typeof R!="number"||!(R>=x&&R<=u))return a;O||(O=0);var G=Math.floor(T(R+.05,1)*10),Y=Math.round(R-G/10),ee,j,X,ae,he,K;if(m(z)){var J=Math.floor(Y/i)+s,U=Math.floor(T(R,i));try{ee=o.getComponentMethod("calendars","getCal")(z).fromJD(J).formatDate("yyyy-mm-dd")}catch{ee=b("G%Y-%m-%d")(new Date(Y))}if(ee.charAt(0)==="-")for(;ee.length<11;)ee="-0"+ee.substr(1);else for(;ee.length<10;)ee="0"+ee;j=O<w?Math.floor(U/n):0,X=O<w?Math.floor(U%n/r):0,ae=O<p?Math.floor(U%r/v):0,he=O<_?U%v*10+G:0}else K=new Date(Y),ee=b("%Y-%m-%d")(K),j=O<w?K.getUTCHours():0,X=O<w?K.getUTCMinutes():0,ae=O<p?K.getUTCSeconds():0,he=O<_?K.getUTCMilliseconds()*10+G:0;return h(ee,j,X,ae,he)},V.ms2DateTimeLocal=function(R){if(!(R>=x+i&&R<=u-i))return a;var O=Math.floor(T(R+.05,1)*10),z=new Date(Math.round(R-O/10)),G=y("%Y-%m-%d")(z),Y=z.getHours(),ee=z.getMinutes(),j=z.getSeconds(),X=z.getUTCMilliseconds()*10+O;return h(G,Y,ee,j,X)};function h(R,O,z,G,Y){if((O||z||G||Y)&&(R+=" "+M(O,2)+":"+M(z,2),(G||Y)&&(R+=":"+M(G,2),Y))){for(var ee=4;Y%10===0;)ee-=1,Y/=10;R+="."+M(Y,ee)}return R}V.cleanDate=function(R,O,z){if(R===a)return O;if(V.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(m(z))return A.error("JS Dates and milliseconds are incompatible with world calendars",R),O;if(R=V.ms2DateTimeLocal(+R),!R&&O!==void 0)return O}else if(!V.isDateTime(R,z))return A.error("unrecognized date",R),O;return R};var L=/%\d?f/g,E=/%h/g,S={1:"1",2:"1",3:"2",4:"2"};function P(R,O,z,G){R=R.replace(L,function(ee){var j=Math.min(+ee.charAt(1)||6,6),X=(O/1e3%1+2).toFixed(j).substr(2).replace(/0+$/,"")||"0";return X});var Y=new Date(Math.floor(O+.05));if(R=R.replace(E,function(){return S[z("%q")(Y)]}),m(G))try{R=o.getComponentMethod("calendars","worldCalFmt")(R,O,G)}catch{return"Invalid"}return z(R)(Y)}var F=[59,59.9,59.99,59.999,59.9999];function I(R,O){var z=T(R+.05,i),G=M(Math.floor(z/n),2)+":"+M(T(Math.floor(z/r),60),2);if(O!=="M"){c(O)||(O=0);var Y=Math.min(T(R/v,60),F[O]),ee=(100+Y).toFixed(O).substr(1);O>0&&(ee=ee.replace(/0+$/,"").replace(/[\.]$/,"")),G+=":"+ee}return G}V.formatDate=function(R,O,z,G,Y,ee){if(Y=m(Y)&&Y,!O)if(z==="y")O=ee.year;else if(z==="m")O=ee.month;else if(z==="d")O=ee.dayMonth+`
`+ee.year;else return I(R,z)+`
`+P(ee.dayMonthYear,R,G,Y);return P(O,R,G,Y)};var D=3*i;V.incrementMonth=function(R,O,z){z=m(z)&&z;var G=T(R,i);if(R=Math.round(R-G),z)try{var Y=Math.round(R/i)+s,ee=o.getComponentMethod("calendars","getCal")(z),j=ee.fromJD(Y);return O%12?ee.add(j,O,"m"):ee.add(j,O/12,"y"),(j.toJD()-s)*i+G}catch{A.error("invalid ms "+R+" in calendar "+z)}var X=new Date(R+D);return X.setUTCMonth(X.getUTCMonth()+O)+G-D},V.findExactDates=function(R,O){for(var z=0,G=0,Y=0,ee=0,j,X,ae=m(O)&&o.getComponentMethod("calendars","getCal")(O),he=0;he<R.length;he++){if(X=R[he],!c(X)){ee++;continue}if(!(X%i))if(ae)try{j=ae.fromJD(X/i+s),j.day()===1?j.month()===1?z++:G++:Y++}catch{}else j=new Date(X),j.getUTCDate()===1?j.getUTCMonth()===0?z++:G++:Y++}G+=z,Y+=G;var K=R.length-ee;return{exactYears:z/K,exactMonths:G/K,exactDays:Y/K}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(t,N,V){var y=t("@plotly/d3"),c=t("./loggers"),A=t("./matrix"),T=t("gl-mat4");function e(f){var m;if(typeof f=="string"){if(m=document.getElementById(f),m===null)throw new Error("No DOM element with id '"+f+"' exists on the page.");return m}else if(f==null)throw new Error("DOM element provided is null or undefined");return f}function a(f){var m=y.select(f);return m.node()instanceof HTMLElement&&m.size()&&m.classed("js-plotly-plot")}function i(f){var m=f&&f.parentNode;m&&m.removeChild(f)}function n(f,m){r("global",f,m)}function r(f,m,l){var x="plotly.js-style-"+f,u=document.getElementById(x);u||(u=document.createElement("style"),u.setAttribute("id",x),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var M=u.sheet;M.insertRule?M.insertRule(m+"{"+l+"}",0):M.addRule?M.addRule(m,l,0):c.warn("addStyleRule failed")}function v(f){var m="plotly.js-style-"+f,l=document.getElementById(m);l&&i(l)}function s(f){var m=b(f),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return m.forEach(function(x){var u=o(x);if(u){var M=A.convertCssMatrix(u);l=T.multiply(l,l,M)}}),l}function o(f){var m=window.getComputedStyle(f,null),l=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("-moz-transform")||m.getPropertyValue("-ms-transform")||m.getPropertyValue("-o-transform")||m.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(x){return+x})}function b(f){for(var m=[];g(f);)m.push(f),f=f.parentNode;return m}function g(f){return f&&(f instanceof Element||f instanceof HTMLElement)}function d(f,m){return f&&m&&f.x===m.x&&f.y===m.y&&f.top===m.top&&f.left===m.left&&f.right===m.right&&f.bottom===m.bottom}N.exports={getGraphDiv:e,isPlotDiv:a,removeElement:i,addStyleRule:n,addRelatedStyleRule:r,deleteRelatedStyleRule:v,getFullTransformMatrix:s,getElementTransformMatrix:o,getElementAndAncestors:b,equalDomRects:d}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(t,N,V){var y=t("events").EventEmitter,c={init:function(A){if(A._ev instanceof y)return A;var T=new y,e=new y;return A._ev=T,A._internalEv=e,A.on=T.on.bind(T),A.once=T.once.bind(T),A.removeListener=T.removeListener.bind(T),A.removeAllListeners=T.removeAllListeners.bind(T),A._internalOn=e.on.bind(e),A._internalOnce=e.once.bind(e),A._removeInternalListener=e.removeListener.bind(e),A._removeAllInternalListeners=e.removeAllListeners.bind(e),A.emit=function(a,i){typeof jQuery<"u"&&jQuery(A).trigger(a,i),T.emit(a,i),e.emit(a,i)},A},triggerHandler:function(A,T,e){var a,i;typeof jQuery<"u"&&(a=jQuery(A).triggerHandler(T,e));var n=A._ev;if(!n)return a;var r=n._events[T];if(!r)return a;function v(o){if(o.listener){if(n.removeListener(T,o.listener),!o.fired)return o.fired=!0,o.listener.apply(n,[e])}else return o.apply(n,[e])}r=Array.isArray(r)?r:[r];var s;for(s=0;s<r.length-1;s++)v(r[s]);return i=v(r[s]),a!==void 0?a:i},purge:function(A){return delete A._ev,delete A.on,delete A.once,delete A.removeListener,delete A.removeAllListeners,delete A.emit,delete A._ev,delete A._internalEv,delete A._internalOn,delete A._internalOnce,delete A._removeInternalListener,delete A._removeAllInternalListeners,A}};N.exports=c},{events:84}],505:[function(t,N,V){var y=t("./is_plain_object.js"),c=Array.isArray;function A(e,a){var i,n;for(i=0;i<e.length;i++){if(n=e[i],n!==null&&typeof n=="object")return!1;n!==void 0&&(a[i]=n)}return!0}V.extendFlat=function(){return T(arguments,!1,!1,!1)},V.extendDeep=function(){return T(arguments,!0,!1,!1)},V.extendDeepAll=function(){return T(arguments,!0,!0,!1)},V.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)};function T(e,a,i,n){var r=e[0],v=e.length,s,o,b,g,d,f,m;if(v===2&&c(r)&&c(e[1])&&r.length===0){if(m=A(e[1],r),m)return r;r.splice(0,r.length)}for(var l=1;l<v;l++){s=e[l];for(o in s)b=r[o],g=s[o],n&&c(g)?r[o]=g:a&&g&&(y(g)||(d=c(g)))?(d?(d=!1,f=b&&c(b)?b:[]):f=b&&y(b)?b:{},r[o]=T([f,g],a,i,n)):(typeof g<"u"||i)&&(r[o]=g)}return r}},{"./is_plain_object.js":516}],506:[function(t,N,V){N.exports=function(c){for(var A={},T=[],e=0,a=0;a<c.length;a++){var i=c[a];A[i]!==1&&(A[i]=1,T[e++]=i)}return T}},{}],507:[function(t,N,V){N.exports=function(e){for(var a=A(e)?c:y,i=[],n=0;n<e.length;n++){var r=e[n];a(r)&&i.push(r)}return i};function y(T){return T.visible===!0}function c(T){var e=T[0].trace;return e.visible===!0&&e._length!==0}function A(T){return Array.isArray(T)&&Array.isArray(T[0])&&T[0][0]&&T[0][0].trace}},{}],508:[function(t,N,V){var y=t("@plotly/d3"),c=t("country-regex"),A=t("@turf/area"),T=t("@turf/centroid"),e=t("@turf/bbox"),a=t("./identity"),i=t("./loggers"),n=t("./is_plain_object"),r=t("./nested_property"),v=t("./polygon"),s=Object.keys(c),o={"ISO-3":a,"USA-states":a,"country names":b};function b(M){for(var w=0;w<s.length;w++){var p=s[w],_=new RegExp(c[p]);if(_.test(M.trim().toLowerCase()))return p}return i.log("Unrecognized country name: "+M+"."),!1}function g(M,w,p){if(!w||typeof w!="string")return!1;var _=o[M](w),h,L,E;if(_){if(M==="USA-states")for(h=[],E=0;E<p.length;E++)L=p[E],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&h.push(L);else h=p;for(E=0;E<h.length;E++)if(L=h[E],L.id===_)return L;i.log(["Location with id",_,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function d(M){var w=M.geometry,p=w.coordinates,_=M.id,h=[],L,E,S,P;function F(I){for(var D=0;D<I.length-1;D++)if(I[D][0]>0&&I[D+1][0]<0)return D;return null}switch(_==="RUS"||_==="FJI"?L=function(I){var D;if(F(I)===null)D=I;else for(D=new Array(I.length),P=0;P<I.length;P++)D[P]=[I[P][0]<0?I[P][0]+360:I[P][0],I[P][1]];h.push(v.tester(D))}:_==="ATA"?L=function(I){var D=F(I);if(D===null)return h.push(v.tester(I));var R=new Array(I.length+1),O=0;for(P=0;P<I.length;P++)P>D?R[O++]=[I[P][0]+360,I[P][1]]:P===D?(R[O++]=I[P],R[O++]=[I[P][0],-90]):R[O++]=I[P];var z=v.tester(R);z.pts.pop(),h.push(z)}:L=function(I){h.push(v.tester(I))},w.type){case"MultiPolygon":for(E=0;E<p.length;E++)for(S=0;S<p[E].length;S++)L(p[E][S]);break;case"Polygon":for(E=0;E<p.length;E++)L(p[E]);break}return h}function f(M){var w=M.geojson,p=window.PlotlyGeoAssets||{},_=typeof w=="string"?p[w]:w;return n(_)?_:(i.error("Oops ... something went wrong when fetching "+w),!1)}function m(M){var w=M[0].trace,p=f(w);if(!p)return!1;var _={},h=[],L;for(L=0;L<w._length;L++){var E=M[L];(E.loc||E.loc===0)&&(_[E.loc]=E)}function S(I){var D=r(I,w.featureidkey||"id").get(),R=_[D];if(R){var O=I.geometry;if(O.type==="Polygon"||O.type==="MultiPolygon"){var z={type:"Feature",id:D,geometry:O,properties:{}};z.properties.ct=l(z),R.fIn=I,R.fOut=z,h.push(z)}else i.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete _[D]}switch(p.type){case"FeatureCollection":var P=p.features;for(L=0;L<P.length;L++)S(P[L]);break;case"Feature":S(p);break;default:return i.warn(["Invalid GeoJSON type",(p.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in _)i.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+w.featureidkey+"*."].join(" "));return h}function l(M){var w=M.geometry,p;if(w.type==="MultiPolygon")for(var _=w.coordinates,h=0,L=0;L<_.length;L++){var E={type:"Polygon",coordinates:_[L]},S=A.default(E);S>h&&(h=S,p=E)}else p=w;return T.default(p).geometry.coordinates}function x(M){var w=window.PlotlyGeoAssets||{},p=[];function _(P){return new Promise(function(F,I){y.json(P,function(D,R){if(D){delete w[P];var O=D.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return I(new Error(O))}return w[P]=R,F(R)})})}function h(P){return new Promise(function(F,I){var D=0,R=setInterval(function(){if(w[P]&&w[P]!=="pending")return clearInterval(R),F(w[P]);if(D>100)return clearInterval(R),I("Unexpected error while fetching from "+P);D++},50)})}for(var L=0;L<M.length;L++){var E=M[L][0].trace,S=E.geojson;typeof S=="string"&&(w[S]?w[S]==="pending"&&p.push(h(S)):(w[S]="pending",p.push(_(S))))}return p}function u(M){return e.default(M)}N.exports={locationToFeature:g,feature2polygons:d,getTraceGeojson:f,extractTraceFeature:m,fetchTraceGeoData:x,computeBbox:u}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(t,N,V){var y=t("../constants/numerical").BADNUM;V.calcTraceToLineCoords=function(c){for(var A=c[0].trace,T=A.connectgaps,e=[],a=[],i=0;i<c.length;i++){var n=c[i],r=n.lonlat;r[0]!==y?a.push(r):!T&&a.length>0&&(e.push(a),a=[])}return a.length>0&&e.push(a),e},V.makeLine=function(c){return c.length===1?{type:"LineString",coordinates:c[0]}:{type:"MultiLineString",coordinates:c}},V.makePolygon=function(c){if(c.length===1)return{type:"Polygon",coordinates:c};for(var A=new Array(c.length),T=0;T<c.length;T++)A[T]=[c[T]];return{type:"MultiPolygon",coordinates:A}},V.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(t,N,V){var y=t("./mod").mod;V.segmentsIntersect=c;function c(i,n,r,v,s,o,b,g){var d=r-i,f=s-i,m=b-s,l=v-n,x=o-n,u=g-o,M=d*u-m*l;if(M===0)return null;var w=(f*u-m*x)/M,p=(f*l-d*x)/M;return p<0||p>1||w<0||w>1?null:{x:i+d*w,y:n+l*w}}V.segmentDistance=function(n,r,v,s,o,b,g,d){if(c(n,r,v,s,o,b,g,d))return 0;var f=v-n,m=s-r,l=g-o,x=d-b,u=f*f+m*m,M=l*l+x*x,w=Math.min(A(f,m,u,o-n,b-r),A(f,m,u,g-n,d-r),A(l,x,M,n-o,r-b),A(l,x,M,v-o,s-b));return Math.sqrt(w)};function A(i,n,r,v,s){var o=v*i+s*n;if(o<0)return v*v+s*s;if(o>r){var b=v-i,g=s-n;return b*b+g*g}else{var d=v*n-s*i;return d*d/r}}var T,e,a;V.getTextLocation=function(n,r,v,s){if((n!==e||s!==a)&&(T={},e=n,a=s),T[v])return T[v];var o=n.getPointAtLength(y(v-s/2,r)),b=n.getPointAtLength(y(v+s/2,r)),g=Math.atan((b.y-o.y)/(b.x-o.x)),d=n.getPointAtLength(y(v,r)),f=(d.x*4+o.x+b.x)/6,m=(d.y*4+o.y+b.y)/6,l={x:f,y:m,theta:g};return T[v]=l,l},V.clearLocationCache=function(){e=null},V.getVisibleSegment=function(n,r,v){var s=r.left,o=r.right,b=r.top,g=r.bottom,d=0,f=n.getTotalLength(),m=f,l,x;function u(w){var p=n.getPointAtLength(w);w===0?l=p:w===f&&(x=p);var _=p.x<s?s-p.x:p.x>o?p.x-o:0,h=p.y<b?b-p.y:p.y>g?p.y-g:0;return Math.sqrt(_*_+h*h)}for(var M=u(d);M;){if(d+=M+v,d>m)return;M=u(d)}for(M=u(m);M;){if(m-=M+v,d>m)return;M=u(m)}return{min:d,max:m,len:m-d,total:f,isClosed:d===0&&m===f&&Math.abs(l.x-x.x)<.1&&Math.abs(l.y-x.y)<.1}},V.findPointOnPath=function(n,r,v,s){s=s||{};for(var o=s.pathLength||n.getTotalLength(),b=s.tolerance||.001,g=s.iterationLimit||30,d=n.getPointAtLength(0)[v]>n.getPointAtLength(o)[v]?-1:1,f=0,m=0,l=o,x,u,M;f<g;){if(x=(m+l)/2,u=n.getPointAtLength(x),M=u[v]-r,Math.abs(M)<b)return u;d*M>0?l=x:m=x,f++}return u}},{"./mod":522}],511:[function(t,N,V){var y=t("fast-isnumeric"),c=t("tinycolor2"),A=t("color-normalize"),T=t("../components/colorscale"),e=t("../components/color/attributes").defaultLine,a=t("./array").isArrayOrTypedArray,i=A(e),n=1;function r(g,d){var f=g;return f[3]*=d,f}function v(g){if(y(g))return i;var d=A(g);return d.length?d:i}function s(g){return y(g)?g:n}function o(g,d,f){var m=g.color,l=a(m),x=a(d),u=T.extractOpts(g),M=[],w,p,_,h,L;if(u.colorscale!==void 0?w=T.makeColorScaleFuncFromTrace(g):w=v,l?p=function(S,P){return S[P]===void 0?i:A(w(S[P]))}:p=v,x?_=function(S,P){return S[P]===void 0?n:s(S[P])}:_=s,l||x)for(var E=0;E<f;E++)h=p(m,E),L=_(d,E),M[E]=r(h,L);else M=r(A(m),d);return M}function b(g){var d=T.extractOpts(g),f=d.colorscale;return d.reversescale&&(f=T.flipScale(d.colorscale)),f.map(function(m){var l=m[0],x=c(m[1]),u=x.toRgb();return{index:l,rgb:[u.r,u.g,u.b,u.a]}})}N.exports={formatColor:o,parseColorScale:b}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(t,N,V){var y=t("./identity");function c(A){return[A]}N.exports={keyFun:function(A){return A.key},repeat:c,descend:y,wrap:c,unwrap:function(A){return A[0]}}},{"./identity":513}],513:[function(t,N,V){N.exports=function(c){return c}},{}],514:[function(t,N,V){N.exports=function(c,A){if(!A)return c;var T=1/Math.abs(A),e=T>1?(T*c+T*A)/T:c+A,a=String(e).length;if(a>16){var i=String(A).length,n=String(c).length;if(a>=n+i){var r=parseFloat(e).toPrecision(12);r.indexOf("e+")===-1&&(e=+r)}}return e}},{}],515:[function(t,N,V){var y=t("@plotly/d3"),c=t("d3-time-format").utcFormat,A=t("d3-format").format,T=t("fast-isnumeric"),e=t("../constants/numerical"),a=e.FP_SAFE,i=-a,n=e.BADNUM,r=N.exports={};r.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var v={};r.warnBadFormat=function(he){var K=String(he);v[K]||(v[K]=1,r.warn('encountered bad format: "'+K+'"'))},r.noFormat=function(he){return String(he)},r.numberFormat=function(he){var K;try{K=A(r.adjustFormat(he))}catch{return r.warnBadFormat(he),r.noFormat}return K},r.nestedProperty=t("./nested_property"),r.keyedContainer=t("./keyed_container"),r.relativeAttr=t("./relative_attr"),r.isPlainObject=t("./is_plain_object"),r.toLogRange=t("./to_log_range"),r.relinkPrivateKeys=t("./relink_private");var s=t("./array");r.isTypedArray=s.isTypedArray,r.isArrayOrTypedArray=s.isArrayOrTypedArray,r.isArray1D=s.isArray1D,r.ensureArray=s.ensureArray,r.concat=s.concat,r.maxRowLength=s.maxRowLength,r.minRowLength=s.minRowLength;var o=t("./mod");r.mod=o.mod,r.modHalf=o.modHalf;var b=t("./coerce");r.valObjectMeta=b.valObjectMeta,r.coerce=b.coerce,r.coerce2=b.coerce2,r.coerceFont=b.coerceFont,r.coercePattern=b.coercePattern,r.coerceHoverinfo=b.coerceHoverinfo,r.coerceSelectionMarkerOpacity=b.coerceSelectionMarkerOpacity,r.validate=b.validate;var g=t("./dates");r.dateTime2ms=g.dateTime2ms,r.isDateTime=g.isDateTime,r.ms2DateTime=g.ms2DateTime,r.ms2DateTimeLocal=g.ms2DateTimeLocal,r.cleanDate=g.cleanDate,r.isJSDate=g.isJSDate,r.formatDate=g.formatDate,r.incrementMonth=g.incrementMonth,r.dateTick0=g.dateTick0,r.dfltRange=g.dfltRange,r.findExactDates=g.findExactDates,r.MIN_MS=g.MIN_MS,r.MAX_MS=g.MAX_MS;var d=t("./search");r.findBin=d.findBin,r.sorterAsc=d.sorterAsc,r.sorterDes=d.sorterDes,r.distinctVals=d.distinctVals,r.roundUp=d.roundUp,r.sort=d.sort,r.findIndexOfMin=d.findIndexOfMin,r.sortObjectKeys=t("./sort_object_keys");var f=t("./stats");r.aggNums=f.aggNums,r.len=f.len,r.mean=f.mean,r.median=f.median,r.midRange=f.midRange,r.variance=f.variance,r.stdev=f.stdev,r.interp=f.interp;var m=t("./matrix");r.init2dArray=m.init2dArray,r.transposeRagged=m.transposeRagged,r.dot=m.dot,r.translationMatrix=m.translationMatrix,r.rotationMatrix=m.rotationMatrix,r.rotationXYMatrix=m.rotationXYMatrix,r.apply3DTransform=m.apply3DTransform,r.apply2DTransform=m.apply2DTransform,r.apply2DTransform2=m.apply2DTransform2,r.convertCssMatrix=m.convertCssMatrix,r.inverseTransformMatrix=m.inverseTransformMatrix;var l=t("./angles");r.deg2rad=l.deg2rad,r.rad2deg=l.rad2deg,r.angleDelta=l.angleDelta,r.angleDist=l.angleDist,r.isFullCircle=l.isFullCircle,r.isAngleInsideSector=l.isAngleInsideSector,r.isPtInsideSector=l.isPtInsideSector,r.pathArc=l.pathArc,r.pathSector=l.pathSector,r.pathAnnulus=l.pathAnnulus;var x=t("./anchor_utils");r.isLeftAnchor=x.isLeftAnchor,r.isCenterAnchor=x.isCenterAnchor,r.isRightAnchor=x.isRightAnchor,r.isTopAnchor=x.isTopAnchor,r.isMiddleAnchor=x.isMiddleAnchor,r.isBottomAnchor=x.isBottomAnchor;var u=t("./geometry2d");r.segmentsIntersect=u.segmentsIntersect,r.segmentDistance=u.segmentDistance,r.getTextLocation=u.getTextLocation,r.clearLocationCache=u.clearLocationCache,r.getVisibleSegment=u.getVisibleSegment,r.findPointOnPath=u.findPointOnPath;var M=t("./extend");r.extendFlat=M.extendFlat,r.extendDeep=M.extendDeep,r.extendDeepAll=M.extendDeepAll,r.extendDeepNoArrays=M.extendDeepNoArrays;var w=t("./loggers");r.log=w.log,r.warn=w.warn,r.error=w.error;var p=t("./regex");r.counterRegex=p.counter;var _=t("./throttle");r.throttle=_.throttle,r.throttleDone=_.done,r.clearThrottle=_.clear;var h=t("./dom");r.getGraphDiv=h.getGraphDiv,r.isPlotDiv=h.isPlotDiv,r.removeElement=h.removeElement,r.addStyleRule=h.addStyleRule,r.addRelatedStyleRule=h.addRelatedStyleRule,r.deleteRelatedStyleRule=h.deleteRelatedStyleRule,r.getFullTransformMatrix=h.getFullTransformMatrix,r.getElementTransformMatrix=h.getElementTransformMatrix,r.getElementAndAncestors=h.getElementAndAncestors,r.equalDomRects=h.equalDomRects,r.clearResponsive=t("./clear_responsive"),r.preserveDrawingBuffer=t("./preserve_drawing_buffer"),r.makeTraceGroups=t("./make_trace_groups"),r._=t("./localize"),r.notifier=t("./notifier"),r.filterUnique=t("./filter_unique"),r.filterVisible=t("./filter_visible"),r.pushUnique=t("./push_unique"),r.increment=t("./increment"),r.cleanNumber=t("./clean_number"),r.ensureNumber=function(K){return T(K)?(K=Number(K),K>a||K<i?n:K):n},r.isIndex=function(he,K){return K!==void 0&&he>=K?!1:T(he)&&he>=0&&he%1===0},r.noop=t("./noop"),r.identity=t("./identity"),r.repeat=function(he,K){for(var J=new Array(K),U=0;U<K;U++)J[U]=he;return J},r.swapAttrs=function(he,K,J,U){J||(J="x"),U||(U="y");for(var H=0;H<K.length;H++){var q=K[H],re=r.nestedProperty(he,q.replace("?",J)),Z=r.nestedProperty(he,q.replace("?",U)),Q=re.get();re.set(Z.get()),Z.set(Q)}},r.raiseToTop=function(K){K.parentNode.appendChild(K)},r.cancelTransition=function(he){return he.transition().duration(0)},r.constrain=function(he,K,J){return K>J?Math.max(J,Math.min(K,he)):Math.max(K,Math.min(J,he))},r.bBoxIntersect=function(he,K,J){return J=J||0,he.left<=K.right+J&&K.left<=he.right+J&&he.top<=K.bottom+J&&K.top<=he.bottom+J},r.simpleMap=function(he,K,J,U,H){for(var q=he.length,re=new Array(q),Z=0;Z<q;Z++)re[Z]=K(he[Z],J,U,H);return re},r.randstr=function he(K,J,U,H){if(U||(U=16),J===void 0&&(J=24),J<=0)return"0";var q=Math.log(Math.pow(2,J))/Math.log(U),re="",Z,Q,ie;for(Z=2;q===1/0;Z*=2)q=Math.log(Math.pow(2,J/Z))/Math.log(U)*Z;var oe=q-Math.floor(q);for(Z=0;Z<Math.floor(q);Z++)ie=Math.floor(Math.random()*U).toString(U),re=ie+re;oe&&(Q=Math.pow(U,oe),ie=Math.floor(Math.random()*Q).toString(U),re=ie+re);var ne=parseInt(re,U);return K&&K[re]||ne!==1/0&&ne>=Math.pow(2,J)?H>10?(r.warn("randstr failed uniqueness"),re):he(K,J,U,(H||0)+1):re},r.OptionControl=function(he,K){he||(he={}),K||(K="opt");var J={};return J.optionList=[],J._newoption=function(U){U[K]=he,J[U.name]=U,J.optionList.push(U)},J["_"+K]=he,J},r.smooth=function(he,K){if(K=Math.round(K)||0,K<2)return he;var J=he.length,U=2*J,H=2*K-1,q=new Array(H),re=new Array(J),Z,Q,ie,oe;for(Z=0;Z<H;Z++)q[Z]=(1-Math.cos(Math.PI*(Z+1)/K))/(2*K);for(Z=0;Z<J;Z++){for(oe=0,Q=0;Q<H;Q++)ie=Z+Q+1-K,ie<-J?ie-=U*Math.round(ie/U):ie>=U&&(ie-=U*Math.floor(ie/U)),ie<0?ie=-1-ie:ie>=J&&(ie=U-1-ie),oe+=he[ie]*q[Q];re[Z]=oe}return re},r.syncOrAsync=function(he,K,J){var U,H;function q(){return r.syncOrAsync(he,K,J)}for(;he.length;)if(H=he.splice(0,1)[0],U=H(K),U&&U.then)return U.then(q);return J&&J(K)},r.stripTrailingSlash=function(he){return he.substr(-1)==="/"?he.substr(0,he.length-1):he},r.noneOrAll=function(he,K,J){if(!!he){var U=!1,H=!0,q,re;for(q=0;q<J.length;q++)re=he[J[q]],re!=null?U=!0:H=!1;if(U&&!H)for(q=0;q<J.length;q++)he[J[q]]=K[J[q]]}},r.mergeArray=function(he,K,J,U){var H=typeof U=="function";if(r.isArrayOrTypedArray(he))for(var q=Math.min(he.length,K.length),re=0;re<q;re++){var Z=he[re];K[re][J]=H?U(Z):Z}},r.mergeArrayCastPositive=function(he,K,J){return r.mergeArray(he,K,J,function(U){var H=+U;return isFinite(H)&&H>0?H:0})},r.fillArray=function(he,K,J,U){if(U=U||r.identity,r.isArrayOrTypedArray(he))for(var H=0;H<K.length;H++)K[H][J]=U(he[H])},r.castOption=function(he,K,J,U){U=U||r.identity;var H=r.nestedProperty(he,J).get();return r.isArrayOrTypedArray(H)?Array.isArray(K)&&r.isArrayOrTypedArray(H[K[0]])?U(H[K[0]][K[1]]):U(H[K]):H},r.extractOption=function(he,K,J,U){if(J in he)return he[J];var H=r.nestedProperty(K,U).get();if(!Array.isArray(H))return H};function L(he){var K={};for(var J in he)for(var U=he[J],H=0;H<U.length;H++)K[U[H]]=+J;return K}r.tagSelected=function(he,K,J){var U=K.selectedpoints,H=K._indexToPoints,q;H&&(q=L(H));function re(ne){return ne!==void 0&&ne<he.length}for(var Z=0;Z<U.length;Z++){var Q=U[Z];if(r.isIndex(Q)||r.isArrayOrTypedArray(Q)&&r.isIndex(Q[0])&&r.isIndex(Q[1])){var ie=q?q[Q]:Q,oe=J?J[ie]:ie;re(oe)&&(he[oe].selected=1)}}},r.selIndices2selPoints=function(he){var K=he.selectedpoints,J=he._indexToPoints;if(J){for(var U=L(J),H=[],q=0;q<K.length;q++){var re=K[q];if(r.isIndex(re)){var Z=U[re];r.isIndex(Z)&&H.push(Z)}}return H}else return K},r.getTargetArray=function(he,K){var J=K.target;if(typeof J=="string"&&J){var U=r.nestedProperty(he,J).get();return Array.isArray(U)?U:!1}else if(Array.isArray(J))return J;return!1},r.minExtend=function(he,K){var J={};typeof K!="object"&&(K={});var U=3,H=Object.keys(he),q,re,Z;for(q=0;q<H.length;q++)re=H[q],Z=he[re],!(re.charAt(0)==="_"||typeof Z=="function")&&(re==="module"?J[re]=Z:Array.isArray(Z)?re==="colorscale"?J[re]=Z.slice():J[re]=Z.slice(0,U):r.isTypedArray(Z)?J[re]=Z.subarray(0,U):Z&&typeof Z=="object"?J[re]=r.minExtend(he[re],K[re]):J[re]=Z);for(H=Object.keys(K),q=0;q<H.length;q++)re=H[q],Z=K[re],(typeof Z!="object"||!(re in J)||typeof J[re]!="object")&&(J[re]=Z);return J},r.titleCase=function(he){return he.charAt(0).toUpperCase()+he.substr(1)},r.containsAny=function(he,K){for(var J=0;J<K.length;J++)if(he.indexOf(K[J])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var E=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return E.test(window.navigator.userAgent)};var S=/iPad|iPhone|iPod/;r.isIOS=function(){return S.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var he=P.exec(window.navigator.userAgent);if(he&&he.length===2){var K=parseInt(he[1]);if(!isNaN(K))return K}return null},r.isD3Selection=function(he){return he instanceof y.selection},r.ensureSingle=function(he,K,J,U){var H=he.select(K+(J?"."+J:""));if(H.size())return H;var q=he.append(K);return J&&q.classed(J,!0),U&&q.call(U),q},r.ensureSingleById=function(he,K,J,U){var H=he.select(K+"#"+J);if(H.size())return H;var q=he.append(K).attr("id",J);return U&&q.call(U),q},r.objectFromPath=function(he,K){for(var J=he.split("."),U,H=U={},q=0;q<J.length;q++){var re=J[q],Z=null,Q=J[q].match(/(.*)\[([0-9]+)\]/);Q?(re=Q[1],Z=Q[2],U=U[re]=[],q===J.length-1?U[Z]=K:U[Z]={},U=U[Z]):(q===J.length-1?U[re]=K:U[re]={},U=U[re])}return H};var F=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(he){var K,J,U,H,q,re,Z;if(typeof he=="object"&&!Array.isArray(he))for(J in he)he.hasOwnProperty(J)&&((K=J.match(F))?(H=he[J],U=K[1],delete he[J],he[U]=r.extendDeepNoArrays(he[U]||{},r.objectFromPath(J,r.expandObjectPaths(H))[U])):(K=J.match(I))?(H=he[J],U=K[1],q=parseInt(K[2]),delete he[J],he[U]=he[U]||[],K[3]==="."?(Z=K[4],re=he[U][q]=he[U][q]||{},r.extendDeepNoArrays(re,r.objectFromPath(Z,r.expandObjectPaths(H)))):he[U][q]=r.expandObjectPaths(H)):he[J]=r.expandObjectPaths(he[J]));return he},r.numSeparate=function(he,K,J){if(J||(J=!1),typeof K!="string"||K.length===0)throw new Error("Separator string required for formatting!");typeof he=="number"&&(he=String(he));var U=/(\d+)(\d{3})/,H=K.charAt(0),q=K.charAt(1),re=he.split("."),Z=re[0],Q=re.length>1?H+re[1]:"";if(q&&(re.length>1||Z.length>4||J))for(;U.test(Z);)Z=Z.replace(U,"$1"+q+"$2");return Z+Q},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;r.templateString=function(he,K){var J={};return he.replace(r.TEMPLATE_STRING_REGEX,function(U,H){var q;return D.test(H)?q=K[H]:(J[H]=J[H]||r.nestedProperty(K,H).get,q=J[H]()),r.isValidTextValue(q)?q:""})};var R={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return G.apply(R,arguments)};var O={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return G.apply(O,arguments)};var z=/^[:|\|]/;function G(he,K,J){var U=this,H=arguments;K||(K={});var q={};return he.replace(r.TEMPLATE_STRING_REGEX,function(re,Z,Q){var ie=Z==="xother"||Z==="yother",oe=Z==="_xother"||Z==="_yother",ne=Z==="_xother_"||Z==="_yother_",le=Z==="xother_"||Z==="yother_",_e=ie||oe||le||ne,fe=Z;(oe||ne)&&(fe=fe.substring(1)),(le||ne)&&(fe=fe.substring(0,fe.length-1));var ye;if(_e){if(ye=K[fe],ye===void 0)return""}else{var xe,me;for(me=3;me<H.length;me++)if(xe=H[me],!!xe){if(xe.hasOwnProperty(fe)){ye=xe[fe];break}if(D.test(fe)||(ye=r.nestedProperty(xe,fe).get(),ye=q[fe]||r.nestedProperty(xe,fe).get(),ye&&(q[fe]=ye)),ye!==void 0)break}}if(ye===void 0&&U)return U.count<U.max&&(r.warn("Variable '"+fe+"' in "+U.name+" could not be found!"),ye=re),U.count===U.max&&r.warn("Too many "+U.name+" warnings - additional warnings will be suppressed"),U.count++,re;if(Q){var be;if(Q[0]===":"&&(be=J?J.numberFormat:r.numberFormat,ye=be(Q.replace(z,""))(ye)),Q[0]==="|"){be=J?J.timeFormat:c;var ke=r.dateTime2ms(ye);ye=r.formatDate(ke,Q.replace(z,""),!1,be)}}else{var De=fe+"Label";K.hasOwnProperty(De)&&(ye=K[De])}return _e&&(ye="("+ye+")",(oe||ne)&&(ye=" "+ye),(le||ne)&&(ye=ye+" ")),ye})}var Y=48,ee=57;r.subplotSort=function(he,K){for(var J=Math.min(he.length,K.length)+1,U=0,H=0,q=0;q<J;q++){var re=he.charCodeAt(q)||0,Z=K.charCodeAt(q)||0,Q=re>=Y&&re<=ee,ie=Z>=Y&&Z<=ee;if(Q&&(U=10*U+re-Y),ie&&(H=10*H+Z-Y),!Q||!ie){if(U!==H)return U-H;if(re!==Z)return re-Z}}return H-U};var j=2e9;r.seedPseudoRandom=function(){j=2e9},r.pseudoRandom=function(){var he=j;return j=(69069*j+1)%4294967296,Math.abs(j-he)<429496729?r.pseudoRandom():j/4294967296},r.fillText=function(he,K,J){var U=Array.isArray(J)?function(re){J.push(re)}:function(re){J.text=re},H=r.extractOption(he,K,"htx","hovertext");if(r.isValidTextValue(H))return U(H);var q=r.extractOption(he,K,"tx","text");if(r.isValidTextValue(q))return U(q)},r.isValidTextValue=function(he){return he||he===0},r.formatPercent=function(he,K){K=K||0;for(var J=(Math.round(100*he*Math.pow(10,K))*Math.pow(.1,K)).toFixed(K)+"%",U=0;U<K;U++)J.indexOf(".")!==-1&&(J=J.replace("0%","%"),J=J.replace(".%","%"));return J},r.isHidden=function(he){var K=window.getComputedStyle(he).display;return!K||K==="none"},r.strTranslate=function(he,K){return he||K?"translate("+he+","+K+")":""},r.strRotate=function(he){return he?"rotate("+he+")":""},r.strScale=function(he){return he!==1?"scale("+he+")":""},r.getTextTransform=function(he){var K=he.noCenter,J=he.textX,U=he.textY,H=he.targetX,q=he.targetY,re=he.anchorX||0,Z=he.anchorY||0,Q=he.rotate,ie=he.scale;return ie?ie>1&&(ie=1):ie=0,r.strTranslate(H-ie*(J+re),q-ie*(U+Z))+r.strScale(ie)+(Q?"rotate("+Q+(K?"":" "+J+" "+U)+")":"")},r.setTransormAndDisplay=function(he,K){he.attr("transform",r.getTextTransform(K)),he.style("display",K.scale?null:"none")},r.ensureUniformFontSize=function(he,K){var J=r.extendFlat({},K);return J.size=Math.max(K.size,he._fullLayout.uniformtext.minsize||0),J},r.join2=function(he,K,J){var U=he.length;return U>1?he.slice(0,-1).join(K)+J+he[U-1]:he.join(K)},r.bigFont=function(he){return Math.round(1.2*he)};var X=r.getFirefoxVersion(),ae=X!==null&&X<86;r.getPositionFromD3Event=function(){return ae?[y.event.layerX,y.event.layerY]:[y.event.offsetX,y.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(t,N,V){N.exports=function(c){return window&&window.process&&window.process.versions?Object.prototype.toString.call(c)==="[object Object]":Object.prototype.toString.call(c)==="[object Object]"&&Object.getPrototypeOf(c).hasOwnProperty("hasOwnProperty")}},{}],517:[function(t,N,V){var y=t("./nested_property"),c=/^\w*$/,A=0,T=1,e=2,a=3,i=4;N.exports=function(r,v,s,o){s=s||"name",o=o||"value";var b,g,d,f={};v&&v.length?(d=y(r,v),g=d.get()):g=r,v=v||"";var m={};if(g)for(b=0;b<g.length;b++)m[g[b][s]]=b;var l=c.test(o),x={set:function(u,M){var w=M===null?i:A;if(!g){if(!d||w===i)return;g=[],d.set(g)}var p=m[u];if(p===void 0){if(w===i)return;w=w|a,p=g.length,m[u]=p}else M!==(l?g[p][o]:y(g[p],o).get())&&(w=w|e);var _=g[p]=g[p]||{};return _[s]=u,l?_[o]=M:y(_,o).set(M),M!==null&&(w=w&~i),f[p]=f[p]|w,x},get:function(u){if(!!g){var M=m[u];if(M!==void 0)return l?g[M][o]:y(g[M],o).get()}},rename:function(u,M){var w=m[u];return w===void 0||(f[w]=f[w]|T,m[M]=w,delete m[u],g[w][s]=M),x},remove:function(u){var M=m[u];if(M===void 0)return x;var w=g[M];if(Object.keys(w).length>2)return f[M]=f[M]|e,x.set(u,null);if(l){for(b=M;b<g.length;b++)f[b]=f[b]|a;for(b=M;b<g.length;b++)m[g[b][s]]--;g.splice(M,1),delete m[u]}else y(w,o).set(null),f[M]=f[M]|e|i;return x},constructUpdate:function(){for(var u,M,w={},p=Object.keys(f),_=0;_<p.length;_++)M=p[_],u=v+"["+M+"]",g[M]?(f[M]&T&&(w[u+"."+s]=g[M][s]),f[M]&e&&(l?w[u+"."+o]=f[M]&i?null:g[M][o]:w[u+"."+o]=f[M]&i?null:y(g[M],o).get())):w[u]=null;return w}};return x}},{"./nested_property":523}],518:[function(t,N,V){var y=t("../registry");N.exports=function(A,T){for(var e=A._context.locale,a=0;a<2;a++){for(var i=A._context.locales,n=0;n<2;n++){var r=(i[e]||{}).dictionary;if(r){var v=r[T];if(v)return v}i=y.localeRegistry}var s=e.split("-")[0];if(s===e)break;e=s}return T}},{"../registry":647}],519:[function(t,N,V){var y=t("../plot_api/plot_config").dfltConfig,c=t("./notifier"),A=N.exports={};A.log=function(){var T;if(y.logging>1){var e=["LOG:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(y.notifyOnLogging>1){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);c(a.join("<br>"),"long")}},A.warn=function(){var T;if(y.logging>0){var e=["WARN:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(y.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);c(a.join("<br>"),"stick")}},A.error=function(){var T;if(y.logging>0){var e=["ERROR:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.error.apply(console,e)}if(y.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);c(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(t,N,V){var y=t("@plotly/d3");N.exports=function(A,T,e){var a=A.selectAll("g."+e.replace(/\s/g,".")).data(T,function(n){return n[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",e),a.order();var i=A.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(n){n[0][i]=y.select(this)}),a}},{"@plotly/d3":58}],521:[function(t,N,V){var y=t("gl-mat4");V.init2dArray=function(c,A){for(var T=new Array(c),e=0;e<c;e++)T[e]=new Array(A);return T},V.transposeRagged=function(c){var A=0,T=c.length,e,a;for(e=0;e<T;e++)A=Math.max(A,c[e].length);var i=new Array(A);for(e=0;e<A;e++)for(i[e]=new Array(T),a=0;a<T;a++)i[e][a]=c[a][e];return i},V.dot=function(c,A){if(!(c.length&&A.length)||c.length!==A.length)return null;var T=c.length,e,a;if(c[0].length)for(e=new Array(T),a=0;a<T;a++)e[a]=V.dot(c[a],A);else if(A[0].length){var i=V.transposeRagged(A);for(e=new Array(i.length),a=0;a<i.length;a++)e[a]=V.dot(c,i[a])}else for(e=0,a=0;a<T;a++)e+=c[a]*A[a];return e},V.translationMatrix=function(c,A){return[[1,0,c],[0,1,A],[0,0,1]]},V.rotationMatrix=function(c){var A=c*Math.PI/180;return[[Math.cos(A),-Math.sin(A),0],[Math.sin(A),Math.cos(A),0],[0,0,1]]},V.rotationXYMatrix=function(c,A,T){return V.dot(V.dot(V.translationMatrix(A,T),V.rotationMatrix(c)),V.translationMatrix(-A,-T))},V.apply3DTransform=function(c){return function(){var A=arguments,T=arguments.length===1?A[0]:[A[0],A[1],A[2]||0];return V.dot(c,[T[0],T[1],T[2],1]).slice(0,3)}},V.apply2DTransform=function(c){return function(){var A=arguments;A.length===3&&(A=A[0]);var T=arguments.length===1?A[0]:[A[0],A[1]];return V.dot(c,[T[0],T[1],1]).slice(0,2)}},V.apply2DTransform2=function(c){var A=V.apply2DTransform(c);return function(T){return A(T.slice(0,2)).concat(A(T.slice(2,4)))}},V.convertCssMatrix=function(c){if(c){var A=c.length;if(A===16)return c;if(A===6)return[c[0],c[1],0,0,c[2],c[3],0,0,0,0,1,0,c[4],c[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V.inverseTransformMatrix=function(c){var A=[];return y.invert(A,c),[[A[0],A[1],A[2],A[3]],[A[4],A[5],A[6],A[7]],[A[8],A[9],A[10],A[11]],[A[12],A[13],A[14],A[15]]]}},{"gl-mat4":210}],522:[function(t,N,V){function y(A,T){var e=A%T;return e<0?e+T:e}function c(A,T){return Math.abs(A)>T/2?A-Math.round(A/T)*T:A}N.exports={mod:y,modHalf:c}},{}],523:[function(t,N,V){var y=t("fast-isnumeric"),c=t("./array").isArrayOrTypedArray;N.exports=function(o,b){if(y(b))b=String(b);else if(typeof b!="string"||b.substr(b.length-4)==="[-1]")throw"bad property string";for(var g=0,d=b.split("."),f,m,l;g<d.length;){if(f=String(d[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),f){if(f[1])d[g]=f[1];else if(g===0)d.splice(0,1);else throw"bad property string";for(m=f[2].substr(1,f[2].length-2).split("]["),l=0;l<m.length;l++)g++,d.splice(g,0,Number(m[l]))}g++}return typeof o!="object"?v(o,b,d):{set:a(o,d,b),get:A(o,d),astr:b,parts:d,obj:o}};function A(s,o){return function(){var b=s,g,d,f,m,l;for(m=0;m<o.length-1;m++){if(g=o[m],g===-1){for(d=!0,f=[],l=0;l<b.length;l++)f[l]=A(b[l],o.slice(m+1))(),f[l]!==f[0]&&(d=!1);return d?f[0]:f}if(typeof g=="number"&&!c(b)||(b=b[g],typeof b!="object"||b===null))return}if(!(typeof b!="object"||b===null)&&(f=b[o[m]],f!==null))return f}}var T=/(^|\.)args\[/;function e(s,o){return s===void 0||s===null&&!o.match(T)}function a(s,o,b){return function(g){var d=s,f="",m=e(g,b),l,x;for(x=0;x<o.length-1;x++){if(l=o[x],typeof l=="number"&&!c(d))throw"array index but container is not an array";if(l===-1){if(m=!n(d,o.slice(x+1),g,b),m)break;return}if(!r(d,l,o[x+1],m))break;if(d=d[l],typeof d!="object"||d===null)throw"container is not an object";f=i(f,l)}if(m){if(x===o.length-1&&(delete d[o[x]],Array.isArray(d)&&+o[x]===d.length-1))for(;d.length&&d[d.length-1]===void 0;)d.pop()}else d[o[x]]=g}}function i(s,o){var b=o;return y(o)?b="["+o+"]":s&&(b="."+o),s+b}function n(s,o,b,g){var d=c(b),f=!0,m=b,l=g.replace("-1",0),x=d?!1:e(b,l),u=o[0],M;for(M=0;M<s.length;M++)l=g.replace("-1",M),d&&(m=b[M%b.length],x=e(m,l)),x&&(f=!1),r(s,M,u,x)&&a(s[M],o,g.replace("-1",M))(m);return f}function r(s,o,b,g){if(s[o]===void 0){if(g)return!1;typeof b=="number"?s[o]=[]:s[o]={}}return!0}function v(s,o,b){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:b,obj:s}}},{"./array":497,"fast-isnumeric":190}],524:[function(t,N,V){N.exports=function(){}},{}],525:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=[];N.exports=function(T,e){if(A.indexOf(T)!==-1)return;A.push(T);var a=1e3;c(e)?a=e:e==="long"&&(a=3e3);var i=y.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var n=i.selectAll(".notifier-note").data(A);function r(v){v.duration(700).style("opacity",0).each("end",function(s){var o=A.indexOf(s);o!==-1&&A.splice(o,1),y.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(v){var s=y.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(r)});for(var o=s.append("p"),b=v.split(/<br\s*\/?>/g),g=0;g<b.length;g++)g&&o.append("br"),o.append("span").text(b[g]);e==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(a).call(r)})}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(t,N,V){var y=t("./setcursor"),c="data-savedcursor",A="!!";N.exports=function(e,a){var i=e.attr(c);if(a){if(!i){for(var n=(e.attr("class")||"").split(" "),r=0;r<n.length;r++){var v=n[r];v.indexOf("cursor-")===0&&e.attr(c,v.substr(7)).classed(v,!1)}e.attr(c)||e.attr(c,A)}y(e,a)}else i&&(e.attr(c,null),i===A?y(e):y(e,i))}},{"./setcursor":536}],527:[function(t,N,V){var y=t("./matrix").dot,c=t("../constants/numerical").BADNUM,A=N.exports={};A.tester=function(e){var a=e.slice(),i=a[0][0],n=i,r=a[0][1],v=r,s;for((a[a.length-1][0]!==a[0][0]||a[a.length-1][1]!==a[0][1])&&a.push(a[0]),s=1;s<a.length;s++)i=Math.min(i,a[s][0]),n=Math.max(n,a[s][0]),r=Math.min(r,a[s][1]),v=Math.max(v,a[s][1]);var o=!1,b;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(o=!0,b=function(l){return l[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(o=!0,b=function(l){return l[1]===a[0][1]}));function g(l,x){var u=l[0],M=l[1];return!(u===c||u<i||u>n||M===c||M<r||M>v||x&&b(l))}function d(l,x){var u=l[0],M=l[1];if(u===c||u<i||u>n||M===c||M<r||M>v)return!1;var w=a.length,p=a[0][0],_=a[0][1],h=0,L,E,S,P,F;for(L=1;L<w;L++)if(E=p,S=_,p=a[L][0],_=a[L][1],P=Math.min(E,p),!(u<P||u>Math.max(E,p)||M>Math.max(S,_)))if(M<Math.min(S,_))u!==P&&h++;else{if(p===E?F=M:F=S+(u-E)*(_-S)/(p-E),M===F)return!(L===1&&x);M<=F&&u!==P&&h++}return h%2===1}var f=!0,m=a[0];for(s=1;s<a.length;s++)if(m[0]!==a[s][0]||m[1]!==a[s][1]){f=!1;break}return{xmin:i,xmax:n,ymin:r,ymax:v,pts:a,contains:o?g:d,isRect:o,degenerate:f}},A.isSegmentBent=function(e,a,i,n){var r=e[a],v=[e[i][0]-r[0],e[i][1]-r[1]],s=y(v,v),o=Math.sqrt(s),b=[-v[1]/o,v[0]/o],g,d,f;for(g=a+1;g<i;g++)if(d=[e[g][0]-r[0],e[g][1]-r[1]],f=y(d,v),f<0||f>s||Math.abs(y(d,b))>n)return!0;return!1},A.filter=function(e,a){var i=[e[0]],n=0,r=0;function v(o){e.push(o);var b=i.length,g=n;i.splice(r+1);for(var d=g+1;d<e.length;d++)(d===e.length-1||A.isSegmentBent(e,g,d+1,a))&&(i.push(e[d]),i.length<b-2&&(n=d,r=i.length-1),g=d)}if(e.length>1){var s=e.pop();v(s)}return{addPt:v,raw:e,filtered:i}}},{"../constants/numerical":491,"./matrix":521}],528:[function(t,N,V){(function(y){(function(){var c=t("./show_no_webgl_msg"),A=t("regl");N.exports=function(e,a,i){var n=e._fullLayout,r=!0;return n._glcanvas.each(function(v){if(v.regl){v.regl.preloadCachedCode(i);return}if(!(v.pick&&!n._has("parcoords"))){try{v.regl=A({canvas:this,attributes:{antialias:!v.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||y.devicePixelRatio,extensions:a||[],cachedCode:i||{}})}catch{r=!1}v.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(s){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:s,layer:v.key})},!1)}}),r||c({container:n._glcontainer.node()}),r}}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(t,N,V){var y=t("fast-isnumeric"),c=t("is-mobile");N.exports=function(e){var a;if(e&&e.hasOwnProperty("userAgent")?a=e.userAgent:a=A(),typeof a!="string")return!0;var i=c({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!i)for(var n=a.split(" "),r=1;r<n.length;r++){var v=n[r];if(v.indexOf("Safari")!==-1)for(var s=r-1;s>-1;s--){var o=n[s];if(o.substr(0,8)==="Version/"){var b=o.substr(8).split(".")[0];if(y(b)&&(b=+b),b>=13)return!0}}}return i};function A(){var T;return typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),T}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(t,N,V){N.exports=function(c,A){if(A instanceof RegExp){for(var T=A.toString(),e=0;e<c.length;e++)if(c[e]instanceof RegExp&&c[e].toString()===T)return c;c.push(A)}else(A||A===0)&&c.indexOf(A)===-1&&c.push(A);return c}},{}],531:[function(t,N,V){var y=t("../lib"),c=t("../plot_api/plot_config").dfltConfig;function A(e,a){for(var i=[],n,r=0;r<a.length;r++)n=a[r],n===e?i[r]=n:typeof n=="object"?i[r]=Array.isArray(n)?y.extendDeep([],n):y.extendDeepAll({},n):i[r]=n;return i}var T={};T.add=function(e,a,i,n,r){var v,s;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(v={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,v),e.undoQueue.index+=1):v=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,v&&(v.undo.calls.unshift(a),v.undo.args.unshift(i),v.redo.calls.push(n),v.redo.args.push(r)),e.undoQueue.queue.length>c.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},T.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},T.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},T.undo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.undo.calls.length;n++)T.plotDo(a,i.undo.calls[n],i.undo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1}},T.redo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.redo.calls.length;n++)T.plotDo(a,i.redo.calls[n],i.redo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},T.plotDo=function(e,a,i){e.autoplay=!0,i=A(e,i),a.apply(null,i)},N.exports=T},{"../lib":515,"../plot_api/plot_config":553}],532:[function(t,N,V){V.counter=function(y,c,A,T){var e=(c||"")+(A?"":"$"),a=T===!1?"":"^";return y==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(a+y+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(t,N,V){var y=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,c=/^[^\.\[\]]+$/;N.exports=function(A,T){for(;T;){var e=A.match(y);if(e)A=e[1];else if(A.match(c))A="";else throw new Error("bad relativeAttr call:"+[A,T]);if(T.charAt(0)==="^")T=T.slice(1);else break}return A&&T.charAt(0)!=="["?A+"."+T:A+T}},{}],534:[function(t,N,V){var y=t("./array").isArrayOrTypedArray,c=t("./is_plain_object");N.exports=function A(T,e){for(var a in e){var i=e[a],n=T[a];if(n!==i)if(a.charAt(0)==="_"||typeof i=="function"){if(a in T)continue;T[a]=i}else if(y(i)&&y(n)&&c(i[0])){if(a==="customdata"||a==="ids")continue;for(var r=Math.min(i.length,n.length),v=0;v<r;v++)n[v]!==i[v]&&c(i[v])&&c(n[v])&&A(n[v],i[v])}else c(i)&&c(n)&&(A(n,i),Object.keys(n).length||delete T[a])}}},{"./array":497,"./is_plain_object":516}],535:[function(t,N,V){var y=t("fast-isnumeric"),c=t("./loggers"),A=t("./identity"),T=t("../constants/numerical").BADNUM,e=1e-9;V.findBin=function(v,s,o){if(y(s.start))return o?Math.ceil((v-s.start)/s.size-e)-1:Math.floor((v-s.start)/s.size+e);var b=0,g=s.length,d=0,f=g>1?(s[g-1]-s[0])/(g-1):1,m,l;for(f>=0?l=o?a:i:l=o?r:n,v+=f*e*(o?-1:1)*(f>=0?1:-1);b<g&&d++<100;)m=Math.floor((b+g)/2),l(s[m],v)?b=m+1:g=m;return d>90&&c.log("Long binary search..."),b-1};function a(v,s){return v<s}function i(v,s){return v<=s}function n(v,s){return v>s}function r(v,s){return v>=s}V.sorterAsc=function(v,s){return v-s},V.sorterDes=function(v,s){return s-v},V.distinctVals=function(v){var s=v.slice();s.sort(V.sorterAsc);var o;for(o=s.length-1;o>-1&&s[o]===T;o--);for(var b=s[o]-s[0]||1,g=b/(o||1)/1e4,d=[],f,m=0;m<=o;m++){var l=s[m],x=l-f;f===void 0?(d.push(l),f=l):x>g&&(b=Math.min(b,x),d.push(l),f=l)}return{vals:d,minDiff:b}},V.roundUp=function(v,s,o){for(var b=0,g=s.length-1,d,f=0,m=o?0:1,l=o?1:0,x=o?Math.ceil:Math.floor;b<g&&f++<100;)d=x((b+g)/2),s[d]<=v?b=d+m:g=d-l;return s[b]},V.sort=function(v,s){for(var o=0,b=0,g=1;g<v.length;g++){var d=s(v[g],v[g-1]);if(d<0?o=1:d>0&&(b=1),o&&b)return v.sort(s)}return b?v:v.reverse()},V.findIndexOfMin=function(v,s){s=s||A;for(var o=1/0,b,g=0;g<v.length;g++){var d=s(v[g]);d<o&&(o=d,b=g)}return b}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(t,N,V){N.exports=function(c,A){(c.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&c.classed(T,!1)}),A&&c.classed("cursor-"+A,!0)}},{}],537:[function(t,N,V){var y=t("../components/color"),c=function(){};N.exports=function(T){for(var e in T)typeof T[e]=="function"&&(T[e]=c);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=y.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=y.lightLine,a.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",a.appendChild(i),T.container.appendChild(a),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(t,N,V){N.exports=function(c){return Object.keys(c).sort()}},{}],539:[function(t,N,V){var y=t("fast-isnumeric"),c=t("./array").isArrayOrTypedArray;V.aggNums=function(A,T,e,a){var i,n;if((!a||a>e.length)&&(a=e.length),y(T)||(T=!1),c(e[0])){for(n=new Array(a),i=0;i<a;i++)n[i]=V.aggNums(A,T,e[i]);e=n}for(i=0;i<a;i++)y(T)?y(e[i])&&(T=A(+T,+e[i])):T=e[i];return T},V.len=function(A){return V.aggNums(function(T){return T+1},0,A)},V.mean=function(A,T){return T||(T=V.len(A)),V.aggNums(function(e,a){return e+a},0,A)/T},V.midRange=function(A){if(!(A===void 0||A.length===0))return(V.aggNums(Math.max,null,A)+V.aggNums(Math.min,null,A))/2},V.variance=function(A,T,e){return T||(T=V.len(A)),y(e)||(e=V.mean(A,T)),V.aggNums(function(a,i){return a+Math.pow(i-e,2)},0,A)/T},V.stdev=function(A,T,e){return Math.sqrt(V.variance(A,T,e))},V.median=function(A){var T=A.slice().sort();return V.interp(T,.5)},V.interp=function(A,T){if(!y(T))throw"n should be a finite number";if(T=T*A.length-.5,T<0)return A[0];if(T>A.length-1)return A[A.length-1];var e=T%1;return e*A[Math.ceil(T)]+(1-e)*A[Math.floor(T)]}},{"./array":497,"fast-isnumeric":190}],540:[function(t,N,V){var y=t("color-normalize");function c(A){return A?y(A):[0,0,0,1]}N.exports=c},{"color-normalize":89}],541:[function(t,N,V){var y=t("@plotly/d3"),c=t("../lib"),A=c.strTranslate,T=t("../constants/xmlns_namespaces"),e=t("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;V.convertToTspans=function(z,G,Y){var ee=z.text(),j=!z.attr("data-notex")&&G&&G._context.typesetMath&&typeof MathJax<"u"&&ee.match(a),X=y.select(z.node().parentNode);if(X.empty())return;var ae=z.attr("class")?z.attr("class").split(" ")[0]:"text";ae+="-math",X.selectAll("svg."+ae).remove(),X.selectAll("g."+ae+"-group").remove(),z.style("display",null).attr({"data-unformatted":ee,"data-math":"N"});function he(){X.empty()||(ae=z.attr("class")+"-math",X.select("svg."+ae).remove()),z.text("").style("white-space","pre");var K=I(z.node(),ee);K&&z.style("pointer-events","all"),V.positionText(z),Y&&Y.call(z)}return j?(G&&G._promises||[]).push(new Promise(function(K){z.style("display","none");var J=parseInt(z.node().style.fontSize,10),U={fontSize:J};s(j[2],U,function(H,q,re){X.selectAll("svg."+ae).remove(),X.selectAll("g."+ae+"-group").remove();var Z=H&&H.select("svg");if(!Z||!Z.node()){he(),K();return}var Q=X.append("g").classed(ae+"-group",!0).attr({"pointer-events":"none","data-unformatted":ee,"data-math":"Y"});Q.node().appendChild(Z.node()),q&&q.node()&&Z.node().insertBefore(q.node().cloneNode(!0),Z.node().firstChild);var ie=re.width,oe=re.height;Z.attr({class:ae,height:oe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ne=z.node().style.fill||"black",le=Z.select("g");le.attr({fill:ne,stroke:ne});var _e=le.node().getBoundingClientRect(),fe=_e.width,ye=_e.height;(fe>ie||ye>oe)&&(Z.style("overflow","hidden"),_e=Z.node().getBoundingClientRect(),fe=_e.width,ye=_e.height);var xe=+z.attr("x"),me=+z.attr("y"),be=J||z.node().getBoundingClientRect().height,ke=-be/4;if(ae[0]==="y")Q.attr({transform:"rotate("+[-90,xe,me]+")"+A(-fe/2,ke-ye/2)});else if(ae[0]==="l")me=ke-ye/2;else if(ae[0]==="a"&&ae.indexOf("atitle")!==0)xe=0,me=ke;else{var De=z.attr("text-anchor");xe=xe-fe*(De==="middle"?.5:De==="end"?1:0),me=me+ke-ye/2}Z.attr({x:xe,y:me}),Y&&Y.call(z,Q),K(Q)})})):he(),z};var i=/(<|&lt;|&#60;)/g,n=/(>|&gt;|&#62;)/g;function r(z){return z.replace(i,"\\lt ").replace(n,"\\gt ")}var v=[["$","$"],["\\(","\\)"]];function s(z,G,Y){var ee=parseInt((MathJax.version||"").split(".")[0]);if(ee!==2&&ee!==3){c.warn("No MathJax version:",MathJax.version);return}var j,X,ae,he,K=function(){return X=c.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:v},displayAlign:"left"})},J=function(){X=c.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=v},U=function(){if(j=MathJax.Hub.config.menuSettings.renderer,j!=="SVG")return MathJax.Hub.setRenderer("SVG")},H=function(){j=MathJax.config.startup.output,j!=="svg"&&(MathJax.config.startup.output="svg")},q=function(){var ne="math-output-"+c.randstr({},64);he=y.select("body").append("div").attr({id:ne}).style({visibility:"hidden",position:"absolute","font-size":G.fontSize+"px"}).text(r(z));var le=he.node();return ee===2?MathJax.Hub.Typeset(le):MathJax.typeset([le])},re=function(){var ne=he.select(ee===2?".MathJax_SVG":".MathJax"),le=!ne.empty()&&he.select("svg").node();if(!le)c.log("There was an error in the tex syntax.",z),Y();else{var _e=le.getBoundingClientRect(),fe;ee===2?fe=y.select("body").select("#MathJax_SVG_glyphs"):fe=ne.select("defs"),Y(ne,fe,_e)}he.remove()},Z=function(){if(j!=="SVG")return MathJax.Hub.setRenderer(j)},Q=function(){j!=="svg"&&(MathJax.config.startup.output=j)},ie=function(){return ae!==void 0&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(X)},oe=function(){MathJax.config=X};ee===2?MathJax.Hub.Queue(K,U,q,re,Z,ie):ee===3&&(J(),H(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){q(),re(),Q(),oe()}))}var o={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},b={sub:"0.3em",sup:"-0.6em"},g={sub:"-0.21em",sup:"0.42em"},d="\u200B",f=["http:","https:","mailto:","",void 0,":"],m=V.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,u=/<br(\s+.*)?>/i;V.BR_TAG_ALL=/<br(\s+.*)?>/gi;var M=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,_=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function h(z,G){if(!z)return null;var Y=z.match(G),ee=Y&&(Y[3]||Y[4]);return ee&&P(ee)}var L=/(^|;)\s*color:/;V.plainText=function(z,G){G=G||{};for(var Y=G.len!==void 0&&G.len!==-1?G.len:1/0,ee=G.allowedTags!==void 0?G.allowedTags:["br"],j="...",X=j.length,ae=z.split(l),he=[],K="",J=0,U=0;U<ae.length;U++){var H=ae[U],q=H.match(x),re=q&&q[2].toLowerCase();if(re)ee.indexOf(re)!==-1&&(he.push(H),K=re);else{var Z=H.length;if(J+Z<Y)he.push(H),J+=Z;else if(J<Y){var Q=Y-J;K&&(K!=="br"||Q<=X||Z<=X)&&he.pop(),Y>X?he.push(H.substr(0,Q-X)+j):he.push(H.substr(0,Q));break}K=""}}return he.join("")};var E={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(z){return z.replace(S,function(G,Y){var ee;return Y.charAt(0)==="#"?ee=F(Y.charAt(1)==="x"?parseInt(Y.substr(2),16):parseInt(Y.substr(1),10)):ee=E[Y],ee||G})}V.convertEntities=P;function F(z){if(!(z>1114111)){var G=String.fromCodePoint;if(G)return G(z);var Y=String.fromCharCode;return z<=65535?Y(z):Y((z>>10)+55232,z%1024+56320)}}function I(z,G){G=G.replace(m," ");var Y=!1,ee=[],j,X=-1;function ae(){X++;var ye=document.createElementNS(T.svg,"tspan");y.select(ye).attr({class:"line",dy:X*e+"em"}),z.appendChild(ye),j=ye;var xe=ee;if(ee=[{node:ye}],xe.length>1)for(var me=1;me<xe.length;me++)he(xe[me])}function he(ye){var xe=ye.type,me={},be;if(xe==="a"){be="a";var ke=ye.target,De=ye.href,He=ye.popup;De&&(me={"xlink:xlink:show":ke==="_blank"||ke.charAt(0)!=="_"?"new":"replace",target:ke,"xlink:xlink:href":De},He&&(me.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+He+'");return false;'))}else be="tspan";ye.style&&(me.style=ye.style);var Ae=document.createElementNS(T.svg,be);if(xe==="sup"||xe==="sub"){K(j,d),j.appendChild(Ae);var Le=document.createElementNS(T.svg,"tspan");K(Le,d),y.select(Le).attr("dy",g[xe]),me.dy=b[xe],j.appendChild(Ae),j.appendChild(Le)}else j.appendChild(Ae);y.select(Ae).attr(me),j=ye.node=Ae,ee.push(ye)}function K(ye,xe){ye.appendChild(document.createTextNode(xe))}function J(ye){if(ee.length===1){c.log("Ignoring unexpected end tag </"+ye+">.",G);return}var xe=ee.pop();ye!==xe.type&&c.log("Start tag <"+xe.type+"> doesnt match end tag <"+ye+">. Pretending it did match.",G),j=ee[ee.length-1].node}var U=u.test(G);U?ae():(j=z,ee=[{node:z}]);for(var H=G.split(l),q=0;q<H.length;q++){var re=H[q],Z=re.match(x),Q=Z&&Z[2].toLowerCase(),ie=o[Q];if(Q==="br")ae();else if(ie===void 0)K(j,P(re));else if(Z[1])J(Q);else{var oe=Z[4],ne={type:Q},le=h(oe,M);if(le?(le=le.replace(L,"$1 fill:"),ie&&(le+=";"+ie)):ie&&(le=ie),le&&(ne.style=le),Q==="a"){Y=!0;var _e=h(oe,w);if(_e){var fe=D(_e);fe&&(ne.href=fe,ne.target=h(oe,p)||"_blank",ne.popup=h(oe,_))}}he(ne)}}return Y}function D(z){var G=encodeURI(decodeURI(z)),Y=document.createElement("a"),ee=document.createElement("a");Y.href=z,ee.href=G;var j=Y.protocol,X=ee.protocol;return f.indexOf(j)!==-1&&f.indexOf(X)!==-1?G:""}V.sanitizeHTML=function(G){G=G.replace(m," ");for(var Y=document.createElement("p"),ee=Y,j=[],X=G.split(l),ae=0;ae<X.length;ae++){var he=X[ae],K=he.match(x),J=K&&K[2].toLowerCase();if(J in o)if(K[1])j.length&&(ee=j.pop());else{var U=K[4],H=h(U,M),q=H?{style:H}:{};if(J==="a"){var re=h(U,w);if(re){var Z=D(re);if(Z){q.href=Z;var Q=h(U,p);Q&&(q.target=Q)}}}var ie=document.createElement(J);ee.appendChild(ie),y.select(ie).attr(q),ee=ie,j.push(ie)}else ee.appendChild(document.createTextNode(P(he)))}var oe="innerHTML";return Y[oe]},V.lineCount=function(G){return G.selectAll("tspan.line").size()||1},V.positionText=function(G,Y,ee){return G.each(function(){var j=y.select(this);function X(K,J){return J===void 0?(J=j.attr(K),J===null&&(j.attr(K,0),J=0)):j.attr(K,J),J}var ae=X("x",Y),he=X("y",ee);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:ae,y:he})})};function R(z,G,Y){var ee=Y.horizontalAlign,j=Y.verticalAlign||"top",X=z.node().getBoundingClientRect(),ae=G.node().getBoundingClientRect(),he,K,J;return j==="bottom"?K=function(){return X.bottom-he.height}:j==="middle"?K=function(){return X.top+(X.height-he.height)/2}:K=function(){return X.top},ee==="right"?J=function(){return X.right-he.width}:ee==="center"?J=function(){return X.left+(X.width-he.width)/2}:J=function(){return X.left},function(){he=this.node().getBoundingClientRect();var U=J()-ae.left,H=K()-ae.top,q=Y.gd||{};if(Y.gd){q._fullLayout._calcInverseTransform(q);var re=c.apply3DTransform(q._fullLayout._invTransform)(U,H);U=re[0],H=re[1]}return this.style({top:H+"px",left:U+"px","z-index":1e3}),this}}var O="1px ";V.makeTextShadow=function(z){var G=O,Y=O,ee=O;return G+Y+ee+z+", -"+G+"-"+Y+ee+z+", "+G+"-"+Y+ee+z+", -"+G+Y+ee+z},V.makeEditable=function(z,G){var Y=G.gd,ee=G.delegate,j=y.dispatch("edit","input","cancel"),X=ee||z;if(z.style({"pointer-events":ee?"none":"all"}),z.size()!==1)throw new Error("boo");function ae(){K(),z.style({opacity:0});var J=X.attr("class"),U;J?U="."+J.split(" ")[0]+"-math-group":U="[class*=-math-group]",U&&y.select(z.node().parentNode).select(U).style({opacity:0})}function he(J){var U=J.node(),H=document.createRange();H.selectNodeContents(U);var q=window.getSelection();q.removeAllRanges(),q.addRange(H),U.focus()}function K(){var J=y.select(Y),U=J.select(".svg-container"),H=U.append("div"),q=z.node().style,re=parseFloat(q.fontSize||12),Z=G.text;Z===void 0&&(Z=z.attr("data-unformatted")),H.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":re,color:G.fill||q.fill||"black",opacity:1,"background-color":G.background||"transparent",outline:"#ffffff33 1px solid",margin:[-re/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(R(z,U,G)).on("blur",function(){Y._editing=!1,z.text(this.textContent).style({opacity:1});var Q=y.select(this).attr("class"),ie;Q?ie="."+Q.split(" ")[0]+"-math-group":ie="[class*=-math-group]",ie&&y.select(z.node().parentNode).select(ie).style({opacity:0});var oe=this.textContent;y.select(this).transition().duration(0).remove(),y.select(document).on("mouseup",null),j.edit.call(z,oe)}).on("focus",function(){var Q=this;Y._editing=!0,y.select(document).on("mouseup",function(){if(y.event.target===Q)return!1;document.activeElement===H.node()&&H.node().blur()})}).on("keyup",function(){y.event.which===27?(Y._editing=!1,z.style({opacity:1}),y.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),j.cancel.call(z,this.textContent)):(j.input.call(z,this.textContent),y.select(this).call(R(z,U,G)))}).on("keydown",function(){y.event.which===13&&this.blur()}).call(he)}return G.immediate?ae():X.on("click",ae),y.rebind(z,j,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(t,N,V){var y={};V.throttle=function(T,e,a){var i=y[T],n=Date.now();if(!i){for(var r in y)y[r].ts<n-6e4&&delete y[r];i=y[T]={ts:0,timer:null}}c(i);function v(){a(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}if(n>i.ts+e){v();return}i.timer=setTimeout(function(){v(),i.timer=null},e)},V.done=function(A){var T=y[A];return!T||!T.timer?Promise.resolve():new Promise(function(e){var a=T.onDone;T.onDone=function(){a&&a(),e(),T.onDone=null}})},V.clear=function(A){if(A)c(y[A]),delete y[A];else for(var T in y)V.clear(T)};function c(A){A&&A.timer!==null&&(clearTimeout(A.timer),A.timer=null)}},{}],543:[function(t,N,V){var y=t("fast-isnumeric");N.exports=function(A,T){if(A>0)return Math.log(A)/Math.LN10;var e=Math.log(Math.min(T[0],T[1]))/Math.LN10;return y(e)||(e=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],544:[function(t,N,V){var y=N.exports={},c=t("../plots/geo/constants").locationmodeToLayer,A=t("topojson-client").feature;y.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},y.getTopojsonPath=function(T,e){return T+e+".json"},y.getTopojsonFeatures=function(T,e){var a=c[T.locationmode],i=e.objects[a];return A(e,i).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(t,N,V){N.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(t,N,V){N.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(t,N,V){var y=t("../registry");N.exports=function(A){for(var T=y.layoutArrayContainers,e=y.layoutArrayRegexes,a=A.split("[")[0],i,n,r=0;r<e.length;r++)if(n=A.match(e[r]),n&&n.index===0){i=n[0];break}if(i||(i=T[T.indexOf(a)]),!i)return!1;var v=A.substr(i.length);return v?(n=v.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),n?{array:i,index:Number(n[1]),property:n[3]||""}:!1):{array:i,index:"",property:""}}},{"../registry":647}],548:[function(t,N,V){var y=t("../lib"),c=y.extendFlat,A=y.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=T.flags.slice().concat(["fullReplot"]),i=e.flags.slice().concat("layoutReplot");N.exports={traces:T,layout:e,traceFlags:function(){return n(a)},layoutFlags:function(){return n(i)},update:function(s,o){var b=o.editType;if(b&&b!=="none")for(var g=b.split("+"),d=0;d<g.length;d++)s[g[d]]=!0},overrideAll:r};function n(s){for(var o={},b=0;b<s.length;b++)o[s[b]]=!1;return o}function r(s,o,b){var g=c({},s);for(var d in g){var f=g[d];A(f)&&(g[d]=v(f,o,b,d))}return b==="from-root"&&(g.editType=o),g}function v(s,o,b,g){if(s.valType){var d=c({},s);if(d.editType=o,Array.isArray(s.items)){d.items=new Array(s.items.length);for(var f=0;f<s.items.length;f++)d.items[f]=v(s.items[f],o)}return d}else return r(s,o,g.charAt(0)==="_"?"nested":"from-root")}},{"../lib":515}],549:[function(t,N,V){var y=t("fast-isnumeric"),c=t("gl-mat4/fromQuat"),A=t("../registry"),T=t("../lib"),e=t("../plots/plots"),a=t("../plots/cartesian/axis_ids"),i=t("../components/color"),n=a.cleanId,r=a.getFromTrace,v=A.traceIs;V.clearPromiseQueue=function(u){Array.isArray(u._promises)&&u._promises.length>0&&T.log("Clearing previous rejected promises from queue."),u._promises=[]},V.cleanLayout=function(u){var M,w;u||(u={}),u.xaxis1&&(u.xaxis||(u.xaxis=u.xaxis1),delete u.xaxis1),u.yaxis1&&(u.yaxis||(u.yaxis=u.yaxis1),delete u.yaxis1),u.scene1&&(u.scene||(u.scene=u.scene1),delete u.scene1);var p=(e.subplotsRegistry.cartesian||{}).attrRegex,_=(e.subplotsRegistry.polar||{}).attrRegex,h=(e.subplotsRegistry.ternary||{}).attrRegex,L=(e.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(u);for(M=0;M<E.length;M++){var S=E[M];if(p&&p.test(S)){var P=u[S];P.anchor&&P.anchor!=="free"&&(P.anchor=n(P.anchor)),P.overlaying&&(P.overlaying=n(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,f(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),o(P)}else if(_&&_.test(S)){var F=u[S];o(F.radialaxis)}else if(h&&h.test(S)){var I=u[S];o(I.aaxis),o(I.baxis),o(I.caxis)}else if(L&&L.test(S)){var D=u[S],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var O=R[0],z=R[1],G=R[2],Y=c([],O),ee=[];for(w=0;w<3;++w)ee[w]=z[w]+G*Y[2+4*w];D.camera={eye:{x:ee[0],y:ee[1],z:ee[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}o(D.xaxis),o(D.yaxis),o(D.zaxis)}}var j=Array.isArray(u.annotations)?u.annotations.length:0;for(M=0;M<j;M++){var X=u.annotations[M];!T.isPlainObject(X)||(X.ref&&(X.ref==="paper"?(X.xref="paper",X.yref="paper"):X.ref==="data"&&(X.xref="x",X.yref="y"),delete X.ref),s(X,"xref"),s(X,"yref"))}var ae=Array.isArray(u.shapes)?u.shapes.length:0;for(M=0;M<ae;M++){var he=u.shapes[M];!T.isPlainObject(he)||(s(he,"xref"),s(he,"yref"))}var K=Array.isArray(u.images)?u.images.length:0;for(M=0;M<K;M++){var J=u.images[M];!T.isPlainObject(J)||(s(J,"xref"),s(J,"yref"))}var U=u.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),o(u),u.dragmode==="rotate"&&(u.dragmode="orbit"),i.clean(u),u.template&&u.template.layout&&V.cleanLayout(u.template.layout),u};function s(u,M){var w=u[M],p=M.charAt(0);w&&w!=="paper"&&(u[M]=n(w,p,!0))}function o(u){u&&((typeof u.title=="string"||typeof u.title=="number")&&(u.title={text:u.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(w,p){var _=u[w],h=u.title&&u.title[p];_&&!h&&(u.title||(u.title={}),u.title[p]=u[w],delete u[w])}}V.cleanData=function(u){for(var M=0;M<u.length;M++){var w=u[M],p;if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var _=i.defaults,h=w.error_y.color||(v(w,"bar")?i.defaultLine:_[M%_.length]);w.error_y.color=i.addOpacity(i.rgb(h),i.opacity(h)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir==="h"&&(v(w,"bar")||w.type.substr(0,9)==="histogram")&&(w.orientation="h",V.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&V.swapXYData(w),(w.type==="histogramx"||w.type==="histogramy")&&(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=n(w.xaxis,"x")),w.yaxis&&(w.yaxis=n(w.yaxis,"y")),v(w,"gl3d")&&w.scene&&(w.scene=e.subplotsRegistry.gl3d.cleanId(w.scene)),!v(w,"pie-like")&&!v(w,"bar-like"))if(Array.isArray(w.textposition))for(p=0;p<w.textposition.length;p++)w.textposition[p]=d(w.textposition[p]);else w.textposition&&(w.textposition=d(w.textposition));var L=A.getModule(w);if(L&&L.colorbar){var E=L.colorbar.container,S=E?w[E]:w;S&&S.colorscale&&(S.colorscale==="YIGnBu"&&(S.colorscale="YlGnBu"),S.colorscale==="YIOrRd"&&(S.colorscale="YlOrRd"))}if(w.type==="surface"&&T.isPlainObject(w.contours)){var P=["x","y","z"];for(p=0;p<P.length;p++){var F=w.contours[P[p]];!T.isPlainObject(F)||(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var I=(w.increasing||{}).showlegend!==!1,D=(w.decreasing||{}).showlegend!==!1,R=b(w.increasing),O=b(w.decreasing);if(R!==!1&&O!==!1){var z=g(R,O,I,D);z&&(w.name=z)}else(R||O)&&!w.name&&(w.name=R||O)}if(Array.isArray(w.transforms)){var G=w.transforms;for(p=0;p<G.length;p++){var Y=G[p];if(!!T.isPlainObject(Y))switch(Y.type){case"filter":Y.filtersrc&&(Y.target=Y.filtersrc,delete Y.filtersrc),Y.calendar&&(Y.valuecalendar||(Y.valuecalendar=Y.calendar),delete Y.calendar);break;case"groupby":if(Y.styles=Y.styles||Y.style,Y.styles&&!Array.isArray(Y.styles)){var ee=Y.styles,j=Object.keys(ee);Y.styles=[];for(var X=0;X<j.length;X++)Y.styles.push({target:j[X],value:ee[j[X]]})}break}}}f(w,"line")&&delete w.line,"marker"in w&&(f(w.marker,"line")&&delete w.marker.line,f(w,"marker")&&delete w.marker),i.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),o(w),w.colorbar&&o(w.colorbar),w.marker&&w.marker.colorbar&&o(w.marker.colorbar),w.line&&w.line.colorbar&&o(w.line.colorbar),w.aaxis&&o(w.aaxis),w.baxis&&o(w.baxis)}};function b(u){if(!T.isPlainObject(u))return!1;var M=u.name;return delete u.name,delete u.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function g(u,M,w,p){if(w&&!p)return u;if(p&&!w||!u.trim())return M;if(!M.trim())return u;var _=Math.min(u.length,M.length),h;for(h=0;h<_&&u.charAt(h)===M.charAt(h);h++);var L=u.substr(0,h);return L.trim()}function d(u){var M="middle",w="center";return typeof u=="string"&&(u.indexOf("top")!==-1?M="top":u.indexOf("bottom")!==-1&&(M="bottom"),u.indexOf("left")!==-1?w="left":u.indexOf("right")!==-1&&(w="right")),M+" "+w}function f(u,M){return M in u&&typeof u[M]=="object"&&Object.keys(u[M]).length===0}V.swapXYData=function(u){var M;if(T.swapAttrs(u,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(u.z)&&Array.isArray(u.z[0])&&(u.transpose?delete u.transpose:u.transpose=!0),u.error_x&&u.error_y){var w=u.error_y,p="copy_ystyle"in w?w.copy_ystyle:!(w.color||w.thickness||w.width);T.swapAttrs(u,["error_?.copy_ystyle"]),p&&T.swapAttrs(u,["error_?.color","error_?.thickness","error_?.width"])}if(typeof u.hoverinfo=="string"){var _=u.hoverinfo.split("+");for(M=0;M<_.length;M++)_[M]==="x"?_[M]="y":_[M]==="y"&&(_[M]="x");u.hoverinfo=_.join("+")}},V.coerceTraceIndices=function(u,M){if(y(M))return[M];if(!Array.isArray(M)||!M.length)return u.data.map(function(_,h){return h});if(Array.isArray(M)){for(var w=[],p=0;p<M.length;p++)T.isIndex(M[p],u.data.length)?w.push(M[p]):T.warn("trace index (",M[p],") is not a number or is out of bounds");return w}return M},V.manageArrayContainers=function(u,M,w){var p=u.obj,_=u.parts,h=_.length,L=_[h-1],E=y(L);if(E&&M===null){var S=_.slice(0,h-1).join("."),P=T.nestedProperty(p,S).get();P.splice(L,1)}else E&&u.get()===void 0&&u.get()===void 0&&(w[u.astr]=null),u.set(M)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(u){var M=u.search(m);if(M>0)return u.substr(0,M)}V.hasParent=function(u,M){for(var w=l(M);w;){if(w in u)return!0;w=l(w)}return!1};var x=["x","y","z"];V.clearAxisTypes=function(u,M,w){for(var p=0;p<M.length;p++)for(var _=u._fullData[p],h=0;h<3;h++){var L=r(u,_,x[h]);if(L&&L.type!=="log"){var E=L._name,S=L._id.substr(1);if(S.substr(0,5)==="scene"){if(w[S]!==void 0)continue;E=S+"."+E}var P=E+".type";w[E]===void 0&&w[P]===void 0&&T.nestedProperty(u.layout,P).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(t,N,V){var y=t("./plot_api");V._doPlot=y._doPlot,V.newPlot=y.newPlot,V.restyle=y.restyle,V.relayout=y.relayout,V.redraw=y.redraw,V.update=y.update,V._guiRestyle=y._guiRestyle,V._guiRelayout=y._guiRelayout,V._guiUpdate=y._guiUpdate,V._storeDirectGUIEdit=y._storeDirectGUIEdit,V.react=y.react,V.extendTraces=y.extendTraces,V.prependTraces=y.prependTraces,V.addTraces=y.addTraces,V.deleteTraces=y.deleteTraces,V.moveTraces=y.moveTraces,V.purge=y.purge,V.addFrames=y.addFrames,V.deleteFrames=y.deleteFrames,V.animate=y.animate,V.setPlotConfig=y.setPlotConfig,V.toImage=t("./to_image"),V.validate=t("./validate"),V.downloadImage=t("../snapshot/download");var c=t("./template_api");V.makeTemplate=c.makeTemplate,V.validateTemplate=c.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(t,N,V){var y=t("../lib/is_plain_object"),c=t("../lib/noop"),A=t("../lib/loggers"),T=t("../lib/search").sorterAsc,e=t("../registry");V.containerArrayMatch=t("./container_array_match");var a=V.isAddVal=function(r){return r==="add"||y(r)},i=V.isRemoveVal=function(r){return r===null||r==="remove"};V.applyContainerArrayChanges=function(r,v,s,o,b){var g=v.astr,d=e.getComponentMethod(g,"supplyLayoutDefaults"),f=e.getComponentMethod(g,"draw"),m=e.getComponentMethod(g,"drawOne"),l=o.replot||o.recalc||d===c||f===c,x=r.layout,u=r._fullLayout;if(s[""]){Object.keys(s).length>1&&A.warn("Full array edits are incompatible with other edits",g);var M=s[""][""];if(i(M))v.set(null);else if(Array.isArray(M))v.set(M);else return A.warn("Unrecognized full array edit value",g,M),!0;return l?!1:(d(x,u),f(r),!0)}var w=Object.keys(s).map(Number).sort(T),p=v.get(),_=p||[],h=b(u,g).get(),L=[],E=-1,S=_.length,P,F,I,D,R,O,z,G;for(P=0;P<w.length;P++){if(I=w[P],D=s[I],R=Object.keys(D),O=D[""],z=a(O),I<0||I>_.length-(z?0:1)){A.warn("index out of range",g,I);continue}if(O!==void 0)R.length>1&&A.warn("Insertion & removal are incompatible with edits to the same index.",g,I),i(O)?L.push(I):z?(O==="add"&&(O={}),_.splice(I,0,O),h&&h.splice(I,0,{})):A.warn("Unrecognized full object edit value",g,I,O),E===-1&&(E=I);else for(F=0;F<R.length;F++)G=g+"["+I+"].",b(_[I],R[F],G).set(D[R[F]])}for(P=L.length-1;P>=0;P--)_.splice(L[P],1),h&&h.splice(L[P],1);if(_.length?p||v.set(_):v.set(null),l)return!1;if(d(x,u),m!==c){var Y;if(E===-1)Y=w;else{for(S=Math.max(_.length,S),Y=[],P=0;P<w.length&&(I=w[P],!(I>=E));P++)Y.push(I);for(P=E;P<S;P++)Y.push(P)}for(P=0;P<Y.length;P++)m(r,Y[P])}else f(r);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("has-hover"),T=t("../lib"),e=T.nestedProperty,a=t("../lib/events"),i=t("../lib/queue"),n=t("../registry"),r=t("./plot_schema"),v=t("../plots/plots"),s=t("../plots/cartesian/axes"),o=t("../components/drawing"),b=t("../components/color"),g=t("../plots/cartesian/graph_interact").initInteractions,d=t("../constants/xmlns_namespaces"),f=t("../components/selections").clearOutline,m=t("./plot_config").dfltConfig,l=t("./manage_arrays"),x=t("./helpers"),u=t("./subroutines"),M=t("./edit_types"),w=t("../plots/cartesian/constants").AX_NAME_PATTERN,p=0,_=5;function h(Ee,Ge,Ke,qe){var At;if(Ee=T.getGraphDiv(Ee),a.init(Ee),T.isPlainObject(Ge)){var mt=Ge;Ge=mt.data,Ke=mt.layout,qe=mt.config,At=mt.frames}var Mt=a.triggerHandler(Ee,"plotly_beforeplot",[Ge,Ke,qe]);if(Mt===!1)return Promise.reject();!Ge&&!Ke&&!T.isPlotDiv(Ee)&&T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ee);function Gt(){if(At)return V.addFrames(Ee,At)}F(Ee,qe),Ke||(Ke={}),y.select(Ee).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(Ee._promises)||(Ee._promises=[]);var zt=(Ee.data||[]).length===0&&Array.isArray(Ge);Array.isArray(Ge)&&(x.cleanData(Ge),zt?Ee.data=Ge:Ee.data.push.apply(Ee.data,Ge),Ee.empty=!1),(!Ee.layout||zt)&&(Ee.layout=x.cleanLayout(Ke)),v.supplyDefaults(Ee);var Ht=Ee._fullLayout,Zt=Ht._has("cartesian");Ht._replotting=!0,(zt||Ht._shouldCreateBgLayer)&&(Ye(Ee),Ht._shouldCreateBgLayer&&delete Ht._shouldCreateBgLayer),o.initGradients(Ee),o.initPatterns(Ee),zt&&s.saveShowSpikeInitial(Ee);var Wt=!Ee.calcdata||Ee.calcdata.length!==(Ee._fullData||[]).length;Wt&&v.doCalcdata(Ee);for(var sr=0;sr<Ee.calcdata.length;sr++)Ee.calcdata[sr][0].trace=Ee._fullData[sr];Ee._context.responsive?Ee._responsiveChartHandler||(Ee._responsiveChartHandler=function(){T.isHidden(Ee)||v.resize(Ee)},window.addEventListener("resize",Ee._responsiveChartHandler)):T.clearResponsive(Ee);var Gr=T.extendFlat({},Ht._size),cn=0;function qr(){for(var ft=Ht._basePlotModules,Et=0;Et<ft.length;Et++)ft[Et].drawFramework&&ft[Et].drawFramework(Ee);!Ht._glcanvas&&Ht._has("gl")&&(Ht._glcanvas=Ht._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(ot){return ot.key}),Ht._glcanvas.enter().append("canvas").attr("class",function(ot){return"gl-canvas gl-canvas-"+ot.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Vt=Ee._context.plotGlPixelRatio;if(Ht._glcanvas){Ht._glcanvas.attr("width",Ht.width*Vt).attr("height",Ht.height*Vt).style("width",Ht.width+"px").style("height",Ht.height+"px");var Pe=Ht._glcanvas.data()[0].regl;if(Pe&&(Math.floor(Ht.width*Vt)!==Pe._gl.drawingBufferWidth||Math.floor(Ht.height*Vt)!==Pe._gl.drawingBufferHeight)){var Se="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(cn)T.error(Se);else return T.log(Se+" Clearing graph and plotting again."),v.cleanPlot([],{},Ee._fullData,Ht),v.supplyDefaults(Ee),Ht=Ee._fullLayout,v.doCalcdata(Ee),cn++,qr()}}return Ht.modebar.orientation==="h"?Ht._modebardiv.style("height",null).style("width","100%"):Ht._modebardiv.style("width",null).style("height",Ht.height+"px"),v.previousPromises(Ee)}function st(){if(v.clearAutoMarginIds(Ee),u.drawMarginPushers(Ee),s.allowAutoMargin(Ee),Ht._has("pie"))for(var ft=Ee._fullData,Et=0;Et<ft.length;Et++){var Vt=ft[Et];Vt.type==="pie"&&Vt.automargin&&v.allowAutoMargin(Ee,"pie."+Vt.uid+".automargin")}return v.doAutoMargin(Ee),v.previousPromises(Ee)}function rr(){if(!!v.didMarginChange(Gr,Ht._size))return T.syncOrAsync([st,u.layoutStyles],Ee)}function $t(){if(!Wt){hr();return}return T.syncOrAsync([n.getComponentMethod("shapes","calcAutorange"),n.getComponentMethod("annotations","calcAutorange"),hr],Ee)}function hr(){Ee._transitioning||(u.doAutoRangeAndConstraints(Ee),zt&&s.saveRangeInitial(Ee),n.getComponentMethod("rangeslider","calcAutorange")(Ee))}function Sr(){return s.draw(Ee,zt?"":"redraw")}var tt=[v.previousPromises,Gt,qr,st,rr];Zt&&tt.push($t),tt.push(u.layoutStyles),Zt&&tt.push(Sr,function(Et){Et._fullLayout._insideTickLabelsAutorange&&ne(Et,Et._fullLayout._insideTickLabelsAutorange).then(function(){Et._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(u.drawData,u.finalDraw,g,v.addLinks,v.rehover,v.redrag,v.reselect,v.doAutoMargin,Qe,v.previousPromises);function Qe(ft){ft._fullLayout._insideTickLabelsAutorange&&zt&&s.saveRangeInitial(ft,!0)}var lt=T.syncOrAsync(tt,Ee);return(!lt||!lt.then)&&(lt=Promise.resolve()),lt.then(function(){return L(Ee),Ee})}function L(Ee){var Ge=Ee._fullLayout;Ge._redrawFromAutoMarginCount?Ge._redrawFromAutoMarginCount--:Ee.emit("plotly_afterplot")}function E(Ee){return T.extendFlat(m,Ee)}function S(Ee,Ge){try{Ee._fullLayout._paper.style("background",Ge)}catch(Ke){T.error(Ke)}}function P(Ee,Ge){var Ke=b.combine(Ge,"white");S(Ee,Ke)}function F(Ee,Ge){if(!Ee._context){Ee._context=T.extendDeep({},m);var Ke=y.select("base");Ee._context._baseUrl=Ke.size()&&Ke.attr("href")?window.location.href.split("#")[0]:""}var qe=Ee._context,At,mt,Mt;if(Ge){for(mt=Object.keys(Ge),At=0;At<mt.length;At++)Mt=mt[At],!(Mt==="editable"||Mt==="edits")&&Mt in qe&&(Mt==="setBackground"&&Ge[Mt]==="opaque"?qe[Mt]=P:qe[Mt]=Ge[Mt]);Ge.plot3dPixelRatio&&!qe.plotGlPixelRatio&&(qe.plotGlPixelRatio=qe.plot3dPixelRatio);var Gt=Ge.editable;if(Gt!==void 0)for(qe.editable=Gt,mt=Object.keys(qe.edits),At=0;At<mt.length;At++)qe.edits[mt[At]]=Gt;if(Ge.edits)for(mt=Object.keys(Ge.edits),At=0;At<mt.length;At++)Mt=mt[At],Mt in qe.edits&&(qe.edits[Mt]=Ge.edits[Mt]);qe._exportedPlot=Ge._exportedPlot}qe.staticPlot&&(qe.editable=!1,qe.edits={},qe.autosizable=!1,qe.scrollZoom=!1,qe.doubleClick=!1,qe.showTips=!1,qe.showLink=!1,qe.displayModeBar=!1),qe.displayModeBar==="hover"&&!A&&(qe.displayModeBar=!0),(qe.setBackground==="transparent"||typeof qe.setBackground!="function")&&(qe.setBackground=S),qe._hasZeroHeight=qe._hasZeroHeight||Ee.clientHeight===0,qe._hasZeroWidth=qe._hasZeroWidth||Ee.clientWidth===0;var zt=qe.scrollZoom,Ht=qe._scrollZoom={};if(zt===!0)Ht.cartesian=1,Ht.gl3d=1,Ht.geo=1,Ht.mapbox=1;else if(typeof zt=="string"){var Zt=zt.split("+");for(At=0;At<Zt.length;At++)Ht[Zt[At]]=1}else zt!==!1&&(Ht.gl3d=1,Ht.geo=1,Ht.mapbox=1)}function I(Ee){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee);return x.cleanData(Ee.data),x.cleanLayout(Ee.layout),Ee.calcdata=void 0,V._doPlot(Ee).then(function(){return Ee.emit("plotly_redraw"),Ee})}function D(Ee,Ge,Ke,qe){return Ee=T.getGraphDiv(Ee),v.cleanPlot([],{},Ee._fullData||[],Ee._fullLayout||{}),v.purge(Ee),V._doPlot(Ee,Ge,Ke,qe)}function R(Ee,Ge){var Ke=Ge+1,qe=[],At,mt;for(At=0;At<Ee.length;At++)mt=Ee[At],mt<0?qe.push(Ke+mt):qe.push(mt);return qe}function O(Ee,Ge,Ke){var qe,At;for(qe=0;qe<Ge.length;qe++){if(At=Ge[qe],At!==parseInt(At,10))throw new Error("all values in "+Ke+" must be integers");if(At>=Ee.data.length||At<-Ee.data.length)throw new Error(Ke+" must be valid indices for gd.data.");if(Ge.indexOf(At,qe+1)>-1||At>=0&&Ge.indexOf(-Ee.data.length+At)>-1||At<0&&Ge.indexOf(Ee.data.length+At)>-1)throw new Error("each index in "+Ke+" must be unique.")}}function z(Ee,Ge,Ke){if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array.");if(typeof Ge>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ge)||(Ge=[Ge]),O(Ee,Ge,"currentIndices"),typeof Ke<"u"&&!Array.isArray(Ke)&&(Ke=[Ke]),typeof Ke<"u"&&O(Ee,Ke,"newIndices"),typeof Ke<"u"&&Ge.length!==Ke.length)throw new Error("current and new indices must be of equal length.")}function G(Ee,Ge,Ke){var qe,At;if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array.");if(typeof Ge>"u")throw new Error("traces must be defined.");for(Array.isArray(Ge)||(Ge=[Ge]),qe=0;qe<Ge.length;qe++)if(At=Ge[qe],typeof At!="object"||Array.isArray(At)||At===null)throw new Error("all values in traces array must be non-array objects");if(typeof Ke<"u"&&!Array.isArray(Ke)&&(Ke=[Ke]),typeof Ke<"u"&&Ke.length!==Ge.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Y(Ee,Ge,Ke,qe){var At=T.isPlainObject(qe);if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(Ge))throw new Error("update must be a key:value object");if(typeof Ke>"u")throw new Error("indices must be an integer or array of integers");O(Ee,Ke,"indices");for(var mt in Ge){if(!Array.isArray(Ge[mt])||Ge[mt].length!==Ke.length)throw new Error("attribute "+mt+" must be an array of length equal to indices array length");if(At&&(!(mt in qe)||!Array.isArray(qe[mt])||qe[mt].length!==Ge[mt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ee(Ee,Ge,Ke,qe){var At=T.isPlainObject(qe),mt=[],Mt,Gt,zt,Ht,Zt;Array.isArray(Ke)||(Ke=[Ke]),Ke=R(Ke,Ee.data.length-1);for(var Wt in Ge)for(var sr=0;sr<Ke.length;sr++){if(Mt=Ee.data[Ke[sr]],zt=e(Mt,Wt),Gt=zt.get(),Ht=Ge[Wt][sr],!T.isArrayOrTypedArray(Ht))throw new Error("attribute: "+Wt+" index: "+sr+" must be an array");if(!T.isArrayOrTypedArray(Gt))throw new Error("cannot extend missing or non-array attribute: "+Wt);if(Gt.constructor!==Ht.constructor)throw new Error("cannot extend array with an array of a different type: "+Wt);Zt=At?qe[Wt][sr]:qe,c(Zt)||(Zt=-1),mt.push({prop:zt,target:Gt,insert:Ht,maxp:Math.floor(Zt)})}return mt}function j(Ee,Ge,Ke,qe,At){Y(Ee,Ge,Ke,qe);for(var mt=ee(Ee,Ge,Ke,qe),Mt={},Gt={},zt=0;zt<mt.length;zt++){var Ht=mt[zt].prop,Zt=mt[zt].maxp,Wt=At(mt[zt].target,mt[zt].insert,Zt);Ht.set(Wt[0]),Array.isArray(Mt[Ht.astr])||(Mt[Ht.astr]=[]),Mt[Ht.astr].push(Wt[1]),Array.isArray(Gt[Ht.astr])||(Gt[Ht.astr]=[]),Gt[Ht.astr].push(mt[zt].target.length)}return{update:Mt,maxPoints:Gt}}function X(Ee,Ge){var Ke=new Ee.constructor(Ee.length+Ge.length);return Ke.set(Ee),Ke.set(Ge,Ee.length),Ke}function ae(Ee,Ge,Ke,qe){Ee=T.getGraphDiv(Ee);function At(zt,Ht,Zt){var Wt,sr;if(T.isTypedArray(zt))if(Zt<0){var Gr=new zt.constructor(0),cn=X(zt,Ht);Zt<0?(Wt=cn,sr=Gr):(Wt=Gr,sr=cn)}else if(Wt=new zt.constructor(Zt),sr=new zt.constructor(zt.length+Ht.length-Zt),Zt===Ht.length)Wt.set(Ht),sr.set(zt);else if(Zt<Ht.length){var qr=Ht.length-Zt;Wt.set(Ht.subarray(qr)),sr.set(zt),sr.set(Ht.subarray(0,qr),zt.length)}else{var st=Zt-Ht.length,rr=zt.length-st;Wt.set(zt.subarray(rr)),Wt.set(Ht,st),sr.set(zt.subarray(0,rr))}else Wt=zt.concat(Ht),sr=Zt>=0&&Zt<Wt.length?Wt.splice(0,Wt.length-Zt):[];return[Wt,sr]}var mt=j(Ee,Ge,Ke,qe,At),Mt=V.redraw(Ee),Gt=[Ee,mt.update,Ke,mt.maxPoints];return i.add(Ee,V.prependTraces,Gt,ae,arguments),Mt}function he(Ee,Ge,Ke,qe){Ee=T.getGraphDiv(Ee);function At(zt,Ht,Zt){var Wt,sr;if(T.isTypedArray(zt))if(Zt<=0){var Gr=new zt.constructor(0),cn=X(Ht,zt);Zt<0?(Wt=cn,sr=Gr):(Wt=Gr,sr=cn)}else if(Wt=new zt.constructor(Zt),sr=new zt.constructor(zt.length+Ht.length-Zt),Zt===Ht.length)Wt.set(Ht),sr.set(zt);else if(Zt<Ht.length){var qr=Ht.length-Zt;Wt.set(Ht.subarray(0,qr)),sr.set(Ht.subarray(qr)),sr.set(zt,qr)}else{var st=Zt-Ht.length;Wt.set(Ht),Wt.set(zt.subarray(0,st),Ht.length),sr.set(zt.subarray(st))}else Wt=Ht.concat(zt),sr=Zt>=0&&Zt<Wt.length?Wt.splice(Zt,Wt.length):[];return[Wt,sr]}var mt=j(Ee,Ge,Ke,qe,At),Mt=V.redraw(Ee),Gt=[Ee,mt.update,Ke,mt.maxPoints];return i.add(Ee,V.extendTraces,Gt,he,arguments),Mt}function K(Ee,Ge,Ke){Ee=T.getGraphDiv(Ee);var qe=[],At=V.deleteTraces,mt=K,Mt=[Ee,qe],Gt=[Ee,Ge],zt,Ht;for(G(Ee,Ge,Ke),Array.isArray(Ge)||(Ge=[Ge]),Ge=Ge.map(function(Zt){return T.extendFlat({},Zt)}),x.cleanData(Ge),zt=0;zt<Ge.length;zt++)Ee.data.push(Ge[zt]);for(zt=0;zt<Ge.length;zt++)qe.push(-Ge.length+zt);if(typeof Ke>"u")return Ht=V.redraw(Ee),i.add(Ee,At,Mt,mt,Gt),Ht;Array.isArray(Ke)||(Ke=[Ke]);try{z(Ee,qe,Ke)}catch(Zt){throw Ee.data.splice(Ee.data.length-Ge.length,Ge.length),Zt}return i.startSequence(Ee),i.add(Ee,At,Mt,mt,Gt),Ht=V.moveTraces(Ee,qe,Ke),i.stopSequence(Ee),Ht}function J(Ee,Ge){Ee=T.getGraphDiv(Ee);var Ke=[],qe=V.addTraces,At=J,mt=[Ee,Ke,Ge],Mt=[Ee,Ge],Gt,zt;if(typeof Ge>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ge)||(Ge=[Ge]),O(Ee,Ge,"indices"),Ge=R(Ge,Ee.data.length-1),Ge.sort(T.sorterDes),Gt=0;Gt<Ge.length;Gt+=1)zt=Ee.data.splice(Ge[Gt],1)[0],Ke.push(zt);var Ht=V.redraw(Ee);return i.add(Ee,qe,mt,At,Mt),Ht}function U(Ee,Ge,Ke){Ee=T.getGraphDiv(Ee);var qe=[],At=[],mt=U,Mt=U,Gt=[Ee,Ke,Ge],zt=[Ee,Ge,Ke],Ht;if(z(Ee,Ge,Ke),Ge=Array.isArray(Ge)?Ge:[Ge],typeof Ke>"u")for(Ke=[],Ht=0;Ht<Ge.length;Ht++)Ke.push(-Ge.length+Ht);for(Ke=Array.isArray(Ke)?Ke:[Ke],Ge=R(Ge,Ee.data.length-1),Ke=R(Ke,Ee.data.length-1),Ht=0;Ht<Ee.data.length;Ht++)Ge.indexOf(Ht)===-1&&qe.push(Ee.data[Ht]);for(Ht=0;Ht<Ge.length;Ht++)At.push({newIndex:Ke[Ht],trace:Ee.data[Ge[Ht]]});for(At.sort(function(Wt,sr){return Wt.newIndex-sr.newIndex}),Ht=0;Ht<At.length;Ht+=1)qe.splice(At[Ht].newIndex,0,At[Ht].trace);Ee.data=qe;var Zt=V.redraw(Ee);return i.add(Ee,mt,Gt,Mt,zt),Zt}function H(Ee,Ge,Ke,qe){Ee=T.getGraphDiv(Ee),x.clearPromiseQueue(Ee);var At={};if(typeof Ge=="string")At[Ge]=Ke;else if(T.isPlainObject(Ge))At=T.extendFlat({},Ge),qe===void 0&&(qe=Ke);else return T.warn("Restyle fail.",Ge,Ke,qe),Promise.reject();Object.keys(At).length&&(Ee.changed=!0);var mt=x.coerceTraceIndices(Ee,qe),Mt=ie(Ee,At,mt),Gt=Mt.flags;Gt.calc&&(Ee.calcdata=void 0),Gt.clearAxisTypes&&x.clearAxisTypes(Ee,mt,{});var zt=[];Gt.fullReplot?zt.push(V._doPlot):(zt.push(v.previousPromises),v.supplyDefaults(Ee),Gt.markerSize&&(v.doCalcdata(Ee),_e(zt)),Gt.style&&zt.push(u.doTraceStyle),Gt.colorbars&&zt.push(u.doColorBars),zt.push(L)),zt.push(v.rehover,v.redrag,v.reselect),i.add(Ee,H,[Ee,Mt.undoit,Mt.traces],H,[Ee,Mt.redoit,Mt.traces]);var Ht=T.syncOrAsync(zt,Ee);return(!Ht||!Ht.then)&&(Ht=Promise.resolve()),Ht.then(function(){return Ee.emit("plotly_restyle",Mt.eventData),Ee})}function q(Ee){return Ee===void 0?null:Ee}function re(Ee,Ge){return Ge?function(Ke,qe,At){var mt=e(Ke,qe),Mt=mt.set;return mt.set=function(Gt){var zt=(At||"")+qe;Z(zt,mt.get(),Gt,Ee),Mt(Gt)},mt}:e}function Z(Ee,Ge,Ke,qe){if(Array.isArray(Ge)||Array.isArray(Ke))for(var At=Array.isArray(Ge)?Ge:[],mt=Array.isArray(Ke)?Ke:[],Mt=Math.max(At.length,mt.length),Gt=0;Gt<Mt;Gt++)Z(Ee+"["+Gt+"]",At[Gt],mt[Gt],qe);else if(T.isPlainObject(Ge)||T.isPlainObject(Ke)){var zt=T.isPlainObject(Ge)?Ge:{},Ht=T.isPlainObject(Ke)?Ke:{},Zt=T.extendFlat({},zt,Ht);for(var Wt in Zt)Z(Ee+"."+Wt,zt[Wt],Ht[Wt],qe)}else qe[Ee]===void 0&&(qe[Ee]=q(Ge))}function Q(Ee,Ge,Ke){for(var qe in Ke){var At=e(Ee,qe);Z(qe,At.get(),Ke[qe],Ge)}}function ie(Ee,Ge,Ke){var qe=Ee._fullLayout,At=Ee._fullData,mt=Ee.data,Mt=qe._guiEditing,Gt=re(qe._preGUI,Mt),zt=T.extendDeepAll({},Ge),Ht;oe(Ge);var Zt=M.traceFlags(),Wt={},sr={},Gr;function cn(){return Ke.map(function(){})}function qr(Kt){var ur=s.id2name(Kt);Gr.indexOf(ur)===-1&&Gr.push(ur)}function st(Kt){return"LAYOUT"+Kt+".autorange"}function rr(Kt){return"LAYOUT"+Kt+".range"}function $t(Kt){for(var ur=Kt;ur<At.length;ur++)if(At[ur]._input===mt[Kt])return At[ur]}function hr(Kt,ur,Nr){if(Array.isArray(Kt)){Kt.forEach(function(jr){hr(jr,ur,Nr)});return}if(!(Kt in Ge||x.hasParent(Ge,Kt))){var Vr;if(Kt.substr(0,6)==="LAYOUT")Vr=Gt(Ee.layout,Kt.replace("LAYOUT",""));else{var Dr=Ke[Nr],Mr=qe._tracePreGUI[$t(Dr)._fullInput.uid];Vr=re(Mr,Mt)(mt[Dr],Kt)}Kt in sr||(sr[Kt]=cn()),sr[Kt][Nr]===void 0&&(sr[Kt][Nr]=q(Vr.get())),ur!==void 0&&Vr.set(ur)}}function Sr(Kt){return function(ur){return At[ur][Kt]}}function tt(Kt){return function(ur,Nr){return ur===!1?At[Ke[Nr]][Kt]:null}}for(var Qe in Ge){if(x.hasParent(Ge,Qe))throw new Error("cannot set "+Qe+" and a parent attribute simultaneously");var lt=Ge[Qe],ft,Et,Vt,Pe,Se,ot;if((Qe==="autobinx"||Qe==="autobiny")&&(Qe=Qe.charAt(Qe.length-1)+"bins",Array.isArray(lt)?lt=lt.map(tt(Qe)):lt===!1?lt=Ke.map(Sr(Qe)):lt=null),Wt[Qe]=lt,Qe.substr(0,6)==="LAYOUT"){Vt=Gt(Ee.layout,Qe.replace("LAYOUT","")),sr[Qe]=[q(Vt.get())],Vt.set(Array.isArray(lt)?lt[0]:lt),Zt.calc=!0;continue}for(sr[Qe]=cn(),Ht=0;Ht<Ke.length;Ht++){ft=mt[Ke[Ht]],Et=$t(Ke[Ht]);var ct=qe._tracePreGUI[Et._fullInput.uid];if(Vt=re(ct,Mt)(ft,Qe),Pe=Vt.get(),Se=Array.isArray(lt)?lt[Ht%lt.length]:lt,Se!==void 0){var pt=Vt.parts[Vt.parts.length-1],St=Qe.substr(0,Qe.length-pt.length-1),xt=St?St+".":"",Pt=St?e(Et,St).get():Et;if(ot=r.getTraceValObject(Et,Vt.parts),ot&&ot.impliedEdits&&Se!==null)for(var Xt in ot.impliedEdits)hr(T.relativeAttr(Qe,Xt),ot.impliedEdits[Xt],Ht);else if((pt==="thicknessmode"||pt==="lenmode")&&Pe!==Se&&(Se==="fraction"||Se==="pixels")&&Pt){var or=qe._size,Pr=Pt.orient,Ar=Pr==="top"||Pr==="bottom";if(pt==="thicknessmode"){var Er=Ar?or.h:or.w;hr(xt+"thickness",Pt.thickness*(Se==="fraction"?1/Er:Er),Ht)}else{var Jr=Ar?or.w:or.h;hr(xt+"len",Pt.len*(Se==="fraction"?1/Jr:Jr),Ht)}}else if(Qe==="type"&&(Se==="pie"!=(Pe==="pie")||Se==="funnelarea"!=(Pe==="funnelarea"))){var lr="x",br="y";(Se==="bar"||Pe==="bar")&&ft.orientation==="h"&&(lr="y",br="x"),T.swapAttrs(ft,["?","?src"],"labels",lr),T.swapAttrs(ft,["d?","?0"],"label",lr),T.swapAttrs(ft,["?","?src"],"values",br),Pe==="pie"||Pe==="funnelarea"?(e(ft,"marker.color").set(e(ft,"marker.colors").get()),qe._pielayer.selectAll("g.trace").remove()):n.traceIs(ft,"cartesian")&&e(ft,"marker.colors").set(e(ft,"marker.color").get())}sr[Qe][Ht]=q(Pe);var Fr=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Fr.indexOf(Qe)!==-1){if(Qe==="orientation"){Vt.set(Se);var Hr=ft.x&&!ft.y?"h":"v";if((Vt.get()||Hr)===Et.orientation)continue}else Qe==="orientationaxes"&&(ft.orientation={v:"h",h:"v"}[Et.orientation]);x.swapXYData(ft),Zt.calc=Zt.clearAxisTypes=!0}else v.dataArrayContainers.indexOf(Vt.parts[0])!==-1?(x.manageArrayContainers(Vt,Se,sr),Zt.calc=!0):(ot?ot.arrayOk&&!n.traceIs(Et,"regl")&&(T.isArrayOrTypedArray(Se)||T.isArrayOrTypedArray(Pe))?Zt.calc=!0:M.update(Zt,ot):Zt.calc=!0,Vt.set(Se))}}if(["swapxyaxes","orientationaxes"].indexOf(Qe)!==-1&&s.swap(Ee,Ke),Qe==="orientationaxes"){var Lr=e(Ee.layout,"hovermode"),at=Lr.get();at==="x"?Lr.set("y"):at==="y"?Lr.set("x"):at==="x unified"?Lr.set("y unified"):at==="y unified"&&Lr.set("x unified")}if(["orientation","type"].indexOf(Qe)!==-1){for(Gr=[],Ht=0;Ht<Ke.length;Ht++){var Rt=mt[Ke[Ht]];n.traceIs(Rt,"cartesian")&&(qr(Rt.xaxis||"x"),qr(Rt.yaxis||"y"))}hr(Gr.map(st),!0,0),hr(Gr.map(rr),[0,1],0)}}return(Zt.calc||Zt.plot)&&(Zt.fullReplot=!0),{flags:Zt,undoit:sr,redoit:Wt,traces:Ke,eventData:T.extendDeepNoArrays([],[zt,Ke])}}function oe(Ee){var Ge=T.counterRegex("axis",".title",!1,!1),Ke=/colorbar\.title$/,qe=Object.keys(Ee),At,mt,Mt;for(At=0;At<qe.length;At++)mt=qe[At],Mt=Ee[mt],(mt==="title"||Ge.test(mt)||Ke.test(mt))&&(typeof Mt=="string"||typeof Mt=="number")?Gt(mt,mt.replace("title","title.text")):mt.indexOf("titlefont")>-1&&mt.indexOf("grouptitlefont")===-1?Gt(mt,mt.replace("titlefont","title.font")):mt.indexOf("titleposition")>-1?Gt(mt,mt.replace("titleposition","title.position")):mt.indexOf("titleside")>-1?Gt(mt,mt.replace("titleside","title.side")):mt.indexOf("titleoffset")>-1&&Gt(mt,mt.replace("titleoffset","title.offset"));function Gt(zt,Ht){Ee[Ht]=Ee[zt],delete Ee[zt]}}function ne(Ee,Ge,Ke){Ee=T.getGraphDiv(Ee),x.clearPromiseQueue(Ee);var qe={};if(typeof Ge=="string")qe[Ge]=Ke;else if(T.isPlainObject(Ge))qe=T.extendFlat({},Ge);else return T.warn("Relayout fail.",Ge,Ke),Promise.reject();Object.keys(qe).length&&(Ee.changed=!0);var At=me(Ee,qe),mt=At.flags;mt.calc&&(Ee.calcdata=void 0);var Mt=[v.previousPromises];mt.layoutReplot?Mt.push(u.layoutReplot):Object.keys(qe).length&&(le(Ee,mt,At)||v.supplyDefaults(Ee),mt.legend&&Mt.push(u.doLegend),mt.layoutstyle&&Mt.push(u.layoutStyles),mt.axrange&&_e(Mt,At.rangesAltered),mt.ticks&&Mt.push(u.doTicksRelayout),mt.modebar&&Mt.push(u.doModeBar),mt.camera&&Mt.push(u.doCamera),mt.colorbars&&Mt.push(u.doColorBars),Mt.push(L)),Mt.push(v.rehover,v.redrag,v.reselect),i.add(Ee,ne,[Ee,At.undoit],ne,[Ee,At.redoit]);var Gt=T.syncOrAsync(Mt,Ee);return(!Gt||!Gt.then)&&(Gt=Promise.resolve(Ee)),Gt.then(function(){return Ee.emit("plotly_relayout",At.eventData),Ee})}function le(Ee,Ge,Ke){var qe=Ee._fullLayout;if(!Ge.axrange)return!1;for(var At in Ge)if(At!=="axrange"&&Ge[At])return!1;for(var mt in Ke.rangesAltered){var Mt=s.id2name(mt),Gt=Ee.layout[Mt],zt=qe[Mt];if(zt.autorange=Gt.autorange,Gt.range&&(zt.range=Gt.range.slice()),zt.cleanRange(),zt._matchGroup){for(var Ht in zt._matchGroup)if(Ht!==mt){var Zt=qe[s.id2name(Ht)];Zt.autorange=zt.autorange,Zt.range=zt.range.slice(),Zt._input.range=zt.range.slice()}}}return!0}function _e(Ee,Ge){var Ke=Ge?function(qe){var At=[],mt=!0;for(var Mt in Ge){var Gt=s.getFromId(qe,Mt);if(At.push(Mt),(Gt.ticklabelposition||"").indexOf("inside")!==-1&&Gt._anchorAxis&&At.push(Gt._anchorAxis._id),Gt._matchGroup)for(var zt in Gt._matchGroup)Ge[zt]||At.push(zt)}return s.draw(qe,At,{skipTitle:mt})}:function(qe){return s.draw(qe,"redraw")};Ee.push(f,u.doAutoRangeAndConstraints,Ke,u.drawData,u.finalDraw)}var fe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ye=/^[xyz]axis[0-9]*\.autorange$/,xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function me(Ee,Ge){var Ke=Ee.layout,qe=Ee._fullLayout,At=qe._guiEditing,mt=re(qe._preGUI,At),Mt=Object.keys(Ge),Gt=s.list(Ee),zt=T.extendDeepAll({},Ge),Ht={},Zt,Wt,sr;for(oe(Ge),Mt=Object.keys(Ge),Wt=0;Wt<Mt.length;Wt++)if(Mt[Wt].indexOf("allaxes")===0){for(sr=0;sr<Gt.length;sr++){var Gr=Gt[sr]._id.substr(1),cn=Gr.indexOf("scene")!==-1?Gr+".":"",qr=Mt[Wt].replace("allaxes",cn+Gt[sr]._name);Ge[qr]||(Ge[qr]=Ge[Mt[Wt]])}delete Ge[Mt[Wt]]}var st=M.layoutFlags(),rr={},$t={};function hr(Dr,Mr){if(Array.isArray(Dr)){Dr.forEach(function(kn){hr(kn,Mr)});return}if(!(Dr in Ge||x.hasParent(Ge,Dr))){var jr=mt(Ke,Dr);Dr in $t||($t[Dr]=q(jr.get())),Mr!==void 0&&jr.set(Mr)}}var Sr={},tt;function Qe(Dr){var Mr=s.name2id(Dr.split(".")[0]);return Sr[Mr]=1,Mr}for(var lt in Ge){if(x.hasParent(Ge,lt))throw new Error("cannot set "+lt+" and a parent attribute simultaneously");for(var ft=mt(Ke,lt),Et=Ge[lt],Vt=ft.parts.length,Pe=Vt-1;Pe>0&&typeof ft.parts[Pe]!="string";)Pe--;var Se=ft.parts[Pe],ot=ft.parts[Pe-1]+"."+Se,ct=ft.parts.slice(0,Pe).join("."),pt=e(Ee.layout,ct).get(),St=e(qe,ct).get(),xt=ft.get();if(Et!==void 0){rr[lt]=Et,$t[lt]=Se==="reverse"?Et:q(xt);var Pt=r.getLayoutValObject(qe,ft.parts);if(Pt&&Pt.impliedEdits&&Et!==null)for(var Xt in Pt.impliedEdits)hr(T.relativeAttr(lt,Xt),Pt.impliedEdits[Xt]);if(["width","height"].indexOf(lt)!==-1)if(Et){hr("autosize",null);var or=lt==="height"?"width":"height";hr(or,qe[or])}else qe[lt]=Ee._initialAutoSize[lt];else if(lt==="autosize")hr("width",Et?null:qe.width),hr("height",Et?null:qe.height);else if(ot.match(fe))Qe(ot),e(qe,ct+"._inputRange").set(null);else if(ot.match(ye)){Qe(ot),e(qe,ct+"._inputRange").set(null);var Pr=e(qe,ct).get();Pr._inputDomain&&(Pr._input.domain=Pr._inputDomain.slice())}else ot.match(xe)&&e(qe,ct+"._inputDomain").set(null);if(Se==="type"){tt=pt;var Ar=St.type==="linear"&&Et==="log",Er=St.type==="log"&&Et==="linear";if(Ar||Er){if(!tt||!tt.range)hr(ct+".autorange",!0);else if(St.autorange)Ar&&(tt.range=tt.range[1]>tt.range[0]?[1,2]:[2,1]);else{var Jr=tt.range[0],lr=tt.range[1];Ar?(Jr<=0&&lr<=0&&hr(ct+".autorange",!0),Jr<=0?Jr=lr/1e6:lr<=0&&(lr=Jr/1e6),hr(ct+".range[0]",Math.log(Jr)/Math.LN10),hr(ct+".range[1]",Math.log(lr)/Math.LN10)):(hr(ct+".range[0]",Math.pow(10,Jr)),hr(ct+".range[1]",Math.pow(10,lr)))}Array.isArray(qe._subplots.polar)&&qe._subplots.polar.length&&qe[ft.parts[0]]&&ft.parts[1]==="radialaxis"&&delete qe[ft.parts[0]]._subplot.viewInitial["radialaxis.range"],n.getComponentMethod("annotations","convertCoords")(Ee,St,Et,hr),n.getComponentMethod("images","convertCoords")(Ee,St,Et,hr)}else hr(ct+".autorange",!0),hr(ct+".range",null);e(qe,ct+"._inputRange").set(null)}else if(Se.match(w)){var br=e(qe,lt).get(),Fr=(Et||{}).type;(!Fr||Fr==="-")&&(Fr="linear"),n.getComponentMethod("annotations","convertCoords")(Ee,br,Fr,hr),n.getComponentMethod("images","convertCoords")(Ee,br,Fr,hr)}var Hr=l.containerArrayMatch(lt);if(Hr){Zt=Hr.array,Wt=Hr.index;var Lr=Hr.property,at=Pt||{editType:"calc"};Wt!==""&&Lr===""&&(l.isAddVal(Et)?$t[lt]=null:l.isRemoveVal(Et)?$t[lt]=(e(Ke,Zt).get()||[])[Wt]:T.warn("unrecognized full object value",Ge)),M.update(st,at),Ht[Zt]||(Ht[Zt]={});var Rt=Ht[Zt][Wt];Rt||(Rt=Ht[Zt][Wt]={}),Rt[Lr]=Et,delete Ge[lt]}else Se==="reverse"?(pt.range?pt.range.reverse():(hr(ct+".autorange",!0),pt.range=[1,0]),St.autorange?st.calc=!0:st.plot=!0):(lt==="dragmode"&&(Et===!1&&xt!==!1||Et!==!1&&xt===!1)||qe._has("scatter-like")&&qe._has("regl")&&lt==="dragmode"&&(Et==="lasso"||Et==="select")&&!(xt==="lasso"||xt==="select")||qe._has("gl2d")?st.plot=!0:Pt?M.update(st,Pt):st.calc=!0,ft.set(Et))}}for(Zt in Ht){var Kt=l.applyContainerArrayChanges(Ee,mt(Ke,Zt),Ht[Zt],st,mt);Kt||(st.plot=!0)}for(var ur in Sr){tt=s.getFromId(Ee,ur);var Nr=tt&&tt._constraintGroup;if(Nr){st.calc=!0;for(var Vr in Nr)Sr[Vr]||(s.getFromId(Ee,Vr)._constraintShrinkable=!0)}}return(be(Ee)||Ge.height||Ge.width)&&(st.plot=!0),(st.plot||st.calc)&&(st.layoutReplot=!0),{flags:st,rangesAltered:Sr,undoit:$t,redoit:rr,eventData:zt}}function be(Ee){var Ge=Ee._fullLayout,Ke=Ge.width,qe=Ge.height;return Ee.layout.autosize&&v.plotAutoSize(Ee,Ee.layout,Ge),Ge.width!==Ke||Ge.height!==qe}function ke(Ee,Ge,Ke,qe){Ee=T.getGraphDiv(Ee),x.clearPromiseQueue(Ee),T.isPlainObject(Ge)||(Ge={}),T.isPlainObject(Ke)||(Ke={}),Object.keys(Ge).length&&(Ee.changed=!0),Object.keys(Ke).length&&(Ee.changed=!0);var At=x.coerceTraceIndices(Ee,qe),mt=ie(Ee,T.extendFlat({},Ge),At),Mt=mt.flags,Gt=me(Ee,T.extendFlat({},Ke)),zt=Gt.flags;(Mt.calc||zt.calc)&&(Ee.calcdata=void 0),Mt.clearAxisTypes&&x.clearAxisTypes(Ee,At,Ke);var Ht=[];zt.layoutReplot?Ht.push(u.layoutReplot):Mt.fullReplot?Ht.push(V._doPlot):(Ht.push(v.previousPromises),le(Ee,zt,Gt)||v.supplyDefaults(Ee),Mt.style&&Ht.push(u.doTraceStyle),(Mt.colorbars||zt.colorbars)&&Ht.push(u.doColorBars),zt.legend&&Ht.push(u.doLegend),zt.layoutstyle&&Ht.push(u.layoutStyles),zt.axrange&&_e(Ht,Gt.rangesAltered),zt.ticks&&Ht.push(u.doTicksRelayout),zt.modebar&&Ht.push(u.doModeBar),zt.camera&&Ht.push(u.doCamera),Ht.push(L)),Ht.push(v.rehover,v.redrag,v.reselect),i.add(Ee,ke,[Ee,mt.undoit,Gt.undoit,mt.traces],ke,[Ee,mt.redoit,Gt.redoit,mt.traces]);var Zt=T.syncOrAsync(Ht,Ee);return(!Zt||!Zt.then)&&(Zt=Promise.resolve(Ee)),Zt.then(function(){return Ee.emit("plotly_update",{data:mt.eventData,layout:Gt.eventData}),Ee})}function De(Ee){return function(Ke){Ke._fullLayout._guiEditing=!0;var qe=Ee.apply(null,arguments);return Ke._fullLayout._guiEditing=!1,qe}}var He=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ae=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Le(Ee,Ge){for(var Ke=0;Ke<Ge.length;Ke++){var qe=Ge[Ke],At=Ee.match(qe.pattern);if(At){var mt=At[1]||"";return{head:mt,tail:Ee.substr(mt.length+1),attr:qe.attr}}}}function Ze(Ee,Ge){var Ke=e(Ge,Ee).get();if(Ke!==void 0)return Ke;var qe=Ee.split(".");for(qe.pop();qe.length>1;)if(qe.pop(),Ke=e(Ge,qe.join(".")+".uirevision").get(),Ke!==void 0)return Ke;return Ge.uirevision}function We(Ee,Ge){for(var Ke=0;Ke<Ge.length;Ke++)if(Ge[Ke]._fullInput.uid===Ee)return Ke;return-1}function ze(Ee,Ge,Ke){for(var qe=0;qe<Ge.length;qe++)if(Ge[qe].uid===Ee)return qe;return!Ge[Ke]||Ge[Ke].uid?-1:Ke}function Ie(Ee,Ge){var Ke=T.isPlainObject(Ee),qe=Array.isArray(Ee);return Ke||qe?(Ke&&T.isPlainObject(Ge)||qe&&Array.isArray(Ge))&&JSON.stringify(Ee)===JSON.stringify(Ge):Ee===Ge}function Ve(Ee,Ge,Ke,qe){var At=qe._preGUI,mt,Mt,Gt,zt,Ht,Zt,Wt,sr,Gr,cn,qr=[],st={},rr={};for(mt in At){if(Ht=Le(mt,He),Ht){if(Gr=Ht.head,cn=Ht.tail,Mt=Ht.attr||Gr+".uirevision",Gt=e(qe,Mt).get(),zt=Gt&&Ze(Mt,Ge),zt&&zt===Gt){if(Zt=At[mt],Zt===null&&(Zt=void 0),Wt=e(Ge,mt),sr=Wt.get(),Ie(sr,Zt)){sr===void 0&&cn==="autorange"&&qr.push(Gr),Wt.set(q(e(qe,mt).get()));continue}else if(cn==="autorange"||cn.substr(0,6)==="range["){var $t=At[Gr+".range[0]"],hr=At[Gr+".range[1]"],Sr=At[Gr+".autorange"];if(Sr||Sr===null&&$t===null&&hr===null){if(!(Gr in st)){var tt=e(Ge,Gr).get();st[Gr]=tt&&(tt.autorange||tt.autorange!==!1&&(!tt.range||tt.range.length!==2))}if(st[Gr]){Wt.set(q(e(qe,mt).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+mt);delete At[mt],Ht&&Ht.tail.substr(0,6)==="range["&&(rr[Ht.head]=1)}for(var Qe=0;Qe<qr.length;Qe++){var lt=qr[Qe];if(rr[lt]){var ft=e(Ge,lt).get();ft&&delete ft.autorange}}var Et=qe._tracePreGUI;for(var Vt in Et){var Pe=Et[Vt],Se=null,ot;for(mt in Pe){if(!Se){var ct=We(Vt,Ke);if(ct<0){delete Et[Vt];break}var pt=Ke[ct];ot=pt._fullInput;var St=ze(Vt,Ee,ot.index);if(St<0){delete Et[Vt];break}Se=Ee[St]}if(Ht=Le(mt,Ae),Ht){if(Ht.attr?(Gt=e(qe,Ht.attr).get(),zt=Gt&&Ze(Ht.attr,Ge)):(Gt=ot.uirevision,zt=Se.uirevision,zt===void 0&&(zt=Ge.uirevision)),zt&&zt===Gt&&(Zt=Pe[mt],Zt===null&&(Zt=void 0),Wt=e(Se,mt),sr=Wt.get(),Ie(sr,Zt))){Wt.set(q(e(ot,mt).get()));continue}}else T.warn("unrecognized GUI edit: "+mt+" in trace uid "+Vt);delete Pe[mt]}}}function dt(Ee,Ge,Ke,qe){var At,mt;function Mt(){return V.addFrames(Ee,At)}Ee=T.getGraphDiv(Ee),x.clearPromiseQueue(Ee);var Gt=Ee._fullData,zt=Ee._fullLayout;if(!T.isPlotDiv(Ee)||!Gt||!zt)mt=V.newPlot(Ee,Ge,Ke,qe);else{if(T.isPlainObject(Ge)){var Ht=Ge;Ge=Ht.data,Ke=Ht.layout,qe=Ht.config,At=Ht.frames}var Zt=!1;if(qe){var Wt=T.extendDeep({},Ee._context);Ee._context=void 0,F(Ee,qe),Zt=Ct(Wt,Ee._context)}Ee.data=Ge||[],x.cleanData(Ee.data),Ee.layout=Ke||{},x.cleanLayout(Ee.layout),Ve(Ee.data,Ee.layout,Gt,zt),v.supplyDefaults(Ee,{skipUpdateCalc:!0});var sr=Ee._fullData,Gr=Ee._fullLayout,cn=Gr.datarevision===void 0,qr=Gr.transition,st=Qt(Ee,zt,Gr,cn,qr),rr=st.newDataRevision,$t=Ft(Ee,Gt,sr,cn,qr,rr);if(be(Ee)&&(st.layoutReplot=!0),$t.calc||st.calc){Ee.calcdata=void 0;for(var hr=Object.getOwnPropertyNames(Gr),Sr=0;Sr<hr.length;Sr++){var tt=hr[Sr],Qe=tt.substring(0,5);if(Qe==="xaxis"||Qe==="yaxis"){var lt=Gr[tt]._emptyCategories;lt&&lt()}}}else v.supplyDefaultsUpdateCalc(Ee.calcdata,sr);var ft=[];if(At&&(Ee._transitionData={},v.createTransitionData(Ee),ft.push(Mt)),Gr.transition&&!Zt&&($t.anim||st.anim))st.ticks&&ft.push(u.doTicksRelayout),v.doCalcdata(Ee),u.doAutoRangeAndConstraints(Ee),ft.push(function(){return v.transitionFromReact(Ee,$t,st,zt)});else if($t.fullReplot||st.layoutReplot||Zt)Ee._fullLayout._skipDefaults=!0,ft.push(V._doPlot);else{for(var Et in st.arrays){var Vt=st.arrays[Et];if(Vt.length){var Pe=n.getComponentMethod(Et,"drawOne");if(Pe!==T.noop)for(var Se=0;Se<Vt.length;Se++)Pe(Ee,Vt[Se]);else{var ot=n.getComponentMethod(Et,"draw");if(ot===T.noop)throw new Error("cannot draw components: "+Et);ot(Ee)}}}ft.push(v.previousPromises),$t.style&&ft.push(u.doTraceStyle),($t.colorbars||st.colorbars)&&ft.push(u.doColorBars),st.legend&&ft.push(u.doLegend),st.layoutstyle&&ft.push(u.layoutStyles),st.axrange&&_e(ft),st.ticks&&ft.push(u.doTicksRelayout),st.modebar&&ft.push(u.doModeBar),st.camera&&ft.push(u.doCamera),ft.push(L)}ft.push(v.rehover,v.redrag,v.reselect),mt=T.syncOrAsync(ft,Ee),(!mt||!mt.then)&&(mt=Promise.resolve(Ee))}return mt.then(function(){return Ee.emit("plotly_react",{data:Ge,layout:Ke}),Ee})}function Ft(Ee,Ge,Ke,qe,At,mt){var Mt=Ge.length===Ke.length;if(!At&&!Mt)return{fullReplot:!0,calc:!0};var Gt=M.traceFlags();Gt.arrays={},Gt.nChanges=0,Gt.nChangesAnim=0;var zt,Ht;function Zt(Gr){var cn=r.getTraceValObject(Ht,Gr);return!Ht._module.animatable&&cn.anim&&(cn.anim=!1),cn}var Wt={getValObject:Zt,flags:Gt,immutable:qe,transition:At,newDataRevision:mt,gd:Ee},sr={};for(zt=0;zt<Ge.length;zt++)if(Ke[zt]){if(Ht=Ke[zt]._fullInput,v.hasMakesDataTransform(Ht)&&(Ht=Ke[zt]),sr[Ht.uid])continue;sr[Ht.uid]=1,Ot(Ge[zt]._fullInput,Ht,[],Wt)}return(Gt.calc||Gt.plot)&&(Gt.fullReplot=!0),At&&Gt.nChanges&&Gt.nChangesAnim&&(Gt.anim=Gt.nChanges===Gt.nChangesAnim&&Mt?"all":"some"),Gt}function Qt(Ee,Ge,Ke,qe,At){var mt=M.layoutFlags();mt.arrays={},mt.rangesAltered={},mt.nChanges=0,mt.nChangesAnim=0;function Mt(zt){return r.getLayoutValObject(Ke,zt)}var Gt={getValObject:Mt,flags:mt,immutable:qe,transition:At,gd:Ee};return Ot(Ge,Ke,[],Gt),(mt.plot||mt.calc)&&(mt.layoutReplot=!0),At&&mt.nChanges&&mt.nChangesAnim&&(mt.anim=mt.nChanges===mt.nChangesAnim?"all":"some"),mt}function Ot(Ee,Ge,Ke,qe){var At,mt,Mt,Gt=qe.getValObject,zt=qe.flags,Ht=qe.immutable,Zt=qe.inArray,Wt=qe.arrayIndex;function sr(){var ct=At.editType;if(Zt&&ct.indexOf("arraydraw")!==-1){T.pushUnique(zt.arrays[Zt],Wt);return}M.update(zt,At),ct!=="none"&&zt.nChanges++,qe.transition&&At.anim&&zt.nChangesAnim++,(fe.test(Mt)||ye.test(Mt))&&(zt.rangesAltered[Ke[0]]=1),xe.test(Mt)&&e(Ge,"_inputDomain").set(null),mt==="datarevision"&&(zt.newDataRevision=1)}function Gr(ct){return ct.valType==="data_array"||ct.arrayOk}for(mt in Ee){if(zt.calc&&!qe.transition)return;var cn=Ee[mt],qr=Ge[mt],st=Ke.concat(mt);if(Mt=st.join("."),!(mt.charAt(0)==="_"||typeof cn=="function"||cn===qr)){if((mt==="tick0"||mt==="dtick")&&Ke[0]!=="geo"){var rr=Ge.tickmode;if(rr==="auto"||rr==="array"||!rr)continue}if(!(mt==="range"&&Ge.autorange)&&!((mt==="zmin"||mt==="zmax")&&Ge.type==="contourcarpet")&&(At=Gt(st),!!At&&!(At._compareAsJSON&&JSON.stringify(cn)===JSON.stringify(qr)))){var $t=At.valType,hr,Sr=Gr(At),tt=Array.isArray(cn),Qe=Array.isArray(qr);if(tt&&Qe){var lt="_input_"+mt,ft=Ee[lt],Et=Ge[lt];if(Array.isArray(ft)&&ft===Et)continue}if(qr===void 0)Sr&&tt?zt.calc=!0:sr();else if(At._isLinkedToArray){var Vt=[],Pe=!1;Zt||(zt.arrays[mt]=Vt);var Se=Math.min(cn.length,qr.length),ot=Math.max(cn.length,qr.length);if(Se!==ot)if(At.editType==="arraydraw")Pe=!0;else{sr();continue}for(hr=0;hr<Se;hr++)Ot(cn[hr],qr[hr],st.concat(hr),T.extendFlat({inArray:mt,arrayIndex:hr},qe));if(Pe)for(hr=Se;hr<ot;hr++)Vt.push(hr)}else!$t&&T.isPlainObject(cn)?Ot(cn,qr,st,qe):Sr?tt&&Qe?(Ht&&(zt.calc=!0),(Ht||qe.newDataRevision)&&sr()):tt!==Qe?zt.calc=!0:sr():tt&&Qe?(cn.length!==qr.length||String(cn)!==String(qr))&&sr():sr()}}}for(mt in Ge)if(!(mt in Ee||mt.charAt(0)==="_"||typeof Ge[mt]=="function"))if(At=Gt(Ke.concat(mt)),Gr(At)&&Array.isArray(Ge[mt])){zt.calc=!0;return}else sr()}function Ct(Ee,Ge){var Ke;for(Ke in Ee)if(Ke.charAt(0)!=="_"){var qe=Ee[Ke],At=Ge[Ke];if(qe!==At)if(T.isPlainObject(qe)&&T.isPlainObject(At)){if(Ct(qe,At))return!0}else if(Array.isArray(qe)&&Array.isArray(At)){if(qe.length!==At.length)return!0;for(var mt=0;mt<qe.length;mt++)if(qe[mt]!==At[mt])if(T.isPlainObject(qe[mt])&&T.isPlainObject(At[mt])){if(Ct(qe[mt],At[mt]))return!0}else return!0}else return!0}}function jt(Ee,Ge,Ke){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var qe=Ee._transitionData;qe._frameQueue||(qe._frameQueue=[]),Ke=v.supplyAnimationDefaults(Ke);var At=Ke.transition,mt=Ke.frame;qe._frameWaitingCnt===void 0&&(qe._frameWaitingCnt=0);function Mt(Ht){return Array.isArray(At)?Ht>=At.length?At[0]:At[Ht]:At}function Gt(Ht){return Array.isArray(mt)?Ht>=mt.length?mt[0]:mt[Ht]:mt}function zt(Ht,Zt){var Wt=0;return function(){if(Ht&&++Wt===Zt)return Ht()}}return new Promise(function(Ht,Zt){function Wt(){if(qe._frameQueue.length!==0){for(;qe._frameQueue.length;){var Se=qe._frameQueue.pop();Se.onInterrupt&&Se.onInterrupt()}Ee.emit("plotly_animationinterrupted",[])}}function sr(Se){if(Se.length!==0){for(var ot=0;ot<Se.length;ot++){var ct;Se[ot].type==="byname"?ct=v.computeFrame(Ee,Se[ot].name):ct=Se[ot].data;var pt=Gt(ot),St=Mt(ot);St.duration=Math.min(St.duration,pt.duration);var xt={frame:ct,name:Se[ot].name,frameOpts:pt,transitionOpts:St};ot===Se.length-1&&(xt.onComplete=zt(Ht,2),xt.onInterrupt=Zt),qe._frameQueue.push(xt)}Ke.mode==="immediate"&&(qe._lastFrameAt=-1/0),qe._animationRaf||qr()}}function Gr(){Ee.emit("plotly_animated"),window.cancelAnimationFrame(qe._animationRaf),qe._animationRaf=null}function cn(){qe._currentFrame&&qe._currentFrame.onComplete&&qe._currentFrame.onComplete();var Se=qe._currentFrame=qe._frameQueue.shift();if(Se){var ot=Se.name?Se.name.toString():null;Ee._fullLayout._currentFrame=ot,qe._lastFrameAt=Date.now(),qe._timeToNext=Se.frameOpts.duration,v.transition(Ee,Se.frame.data,Se.frame.layout,x.coerceTraceIndices(Ee,Se.frame.traces),Se.frameOpts,Se.transitionOpts).then(function(){Se.onComplete&&Se.onComplete()}),Ee.emit("plotly_animatingframe",{name:ot,frame:Se.frame,animation:{frame:Se.frameOpts,transition:Se.transitionOpts}})}else Gr()}function qr(){Ee.emit("plotly_animating"),qe._lastFrameAt=-1/0,qe._timeToNext=0,qe._runningTransitions=0,qe._currentFrame=null;var Se=function(){qe._animationRaf=window.requestAnimationFrame(Se),Date.now()-qe._lastFrameAt>qe._timeToNext&&cn()};Se()}var st=0;function rr(Se){return Array.isArray(At)?st>=At.length?Se.transitionOpts=At[st]:Se.transitionOpts=At[0]:Se.transitionOpts=At,st++,Se}var $t,hr,Sr=[],tt=Ge==null,Qe=Array.isArray(Ge),lt=!tt&&!Qe&&T.isPlainObject(Ge);if(lt)Sr.push({type:"object",data:rr(T.extendFlat({},Ge))});else if(tt||["string","number"].indexOf(typeof Ge)!==-1)for($t=0;$t<qe._frames.length;$t++)hr=qe._frames[$t],!!hr&&(tt||String(hr.group)===String(Ge))&&Sr.push({type:"byname",name:String(hr.name),data:rr({name:hr.name})});else if(Qe)for($t=0;$t<Ge.length;$t++){var ft=Ge[$t];["number","string"].indexOf(typeof ft)!==-1?(ft=String(ft),Sr.push({type:"byname",name:ft,data:rr({name:ft})})):T.isPlainObject(ft)&&Sr.push({type:"object",data:rr(T.extendFlat({},ft))})}for($t=0;$t<Sr.length;$t++)if(hr=Sr[$t],hr.type==="byname"&&!qe._frameHash[hr.data.name]){T.warn('animate failure: frame not found: "'+hr.data.name+'"'),Zt();return}["next","immediate"].indexOf(Ke.mode)!==-1&&Wt(),Ke.direction==="reverse"&&Sr.reverse();var Et=Ee._fullLayout._currentFrame;if(Et&&Ke.fromcurrent){var Vt=-1;for($t=0;$t<Sr.length;$t++)if(hr=Sr[$t],hr.type==="byname"&&hr.name===Et){Vt=$t;break}if(Vt>0&&Vt<Sr.length-1){var Pe=[];for($t=0;$t<Sr.length;$t++)hr=Sr[$t],(Sr[$t].type!=="byname"||$t>Vt)&&Pe.push(hr);Sr=Pe}}Sr.length>0?sr(Sr):(Ee.emit("plotly_animated"),Ht())})}function Nt(Ee,Ge,Ke){if(Ee=T.getGraphDiv(Ee),Ge==null)return Promise.resolve();if(!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var qe,At,mt,Mt,Gt=Ee._transitionData._frames,zt=Ee._transitionData._frameHash;if(!Array.isArray(Ge))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ge);var Ht=Gt.length+Ge.length*2,Zt=[],Wt={};for(qe=Ge.length-1;qe>=0;qe--)if(!!T.isPlainObject(Ge[qe])){var sr=Ge[qe].name,Gr=(zt[sr]||Wt[sr]||{}).name,cn=Ge[qe].name,qr=zt[Gr]||Wt[Gr];Gr&&cn&&typeof cn=="number"&&qr&&p<_&&(p++,T.warn('addFrames: overwriting frame "'+(zt[Gr]||Wt[Gr]).name+'" with a frame whose name of type "number" also equates to "'+Gr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),p===_&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Wt[sr]={name:sr},Zt.push({frame:v.supplyFrameDefaults(Ge[qe]),index:Ke&&Ke[qe]!==void 0&&Ke[qe]!==null?Ke[qe]:Ht+qe})}Zt.sort(function(lt,ft){return lt.index>ft.index?-1:lt.index<ft.index?1:0});var st=[],rr=[],$t=Gt.length;for(qe=Zt.length-1;qe>=0;qe--){if(At=Zt[qe].frame,typeof At.name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!At.name)for(;zt[At.name="frame "+Ee._transitionData._counter++];);if(zt[At.name]){for(mt=0;mt<Gt.length&&(Gt[mt]||{}).name!==At.name;mt++);st.push({type:"replace",index:mt,value:At}),rr.unshift({type:"replace",index:mt,value:Gt[mt]})}else Mt=Math.max(0,Math.min(Zt[qe].index,$t)),st.push({type:"insert",index:Mt,value:At}),rr.unshift({type:"delete",index:Mt}),$t++}var hr=v.modifyFrames,Sr=v.modifyFrames,tt=[Ee,rr],Qe=[Ee,st];return i&&i.add(Ee,hr,tt,Sr,Qe),v.modifyFrames(Ee,st)}function Lt(Ee,Ge){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee);var Ke,qe,At=Ee._transitionData._frames,mt=[],Mt=[];if(!Ge)for(Ge=[],Ke=0;Ke<At.length;Ke++)Ge.push(Ke);for(Ge=Ge.slice(),Ge.sort(),Ke=Ge.length-1;Ke>=0;Ke--)qe=Ge[Ke],mt.push({type:"delete",index:qe}),Mt.unshift({type:"insert",index:qe,value:At[qe]});var Gt=v.modifyFrames,zt=v.modifyFrames,Ht=[Ee,Mt],Zt=[Ee,mt];return i&&i.add(Ee,Gt,Ht,zt,Zt),v.modifyFrames(Ee,mt)}function Xe(Ee){Ee=T.getGraphDiv(Ee);var Ge=Ee._fullLayout||{},Ke=Ee._fullData||[];return v.cleanPlot([],{},Ke,Ge),v.purge(Ee),a.purge(Ee),Ge._container&&Ge._container.remove(),delete Ee._context,Ee}function it(Ee){var Ge=Ee._fullLayout,Ke=Ee.getBoundingClientRect();if(!T.equalDomRects(Ke,Ge._lastBBox)){var qe=Ge._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Ee));Ge._invScaleX=Math.sqrt(qe[0][0]*qe[0][0]+qe[0][1]*qe[0][1]+qe[0][2]*qe[0][2]),Ge._invScaleY=Math.sqrt(qe[1][0]*qe[1][0]+qe[1][1]*qe[1][1]+qe[1][2]*qe[1][2]),Ge._lastBBox=Ke}}function Ye(Ee){var Ge=y.select(Ee),Ke=Ee._fullLayout;if(Ke._calcInverseTransform=it,Ke._calcInverseTransform(Ee),Ke._container=Ge.selectAll(".plot-container").data([0]),Ke._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ke._paperdiv=Ke._container.selectAll(".svg-container").data([0]),Ke._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ke._glcontainer=Ke._paperdiv.selectAll(".gl-container").data([{}]),Ke._glcontainer.enter().append("div").classed("gl-container",!0),Ke._paperdiv.selectAll(".main-svg").remove(),Ke._paperdiv.select(".modebar-container").remove(),Ke._paper=Ke._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ke._toppaper=Ke._paperdiv.append("svg").classed("main-svg",!0),Ke._modebardiv=Ke._paperdiv.append("div"),delete Ke._modeBar,Ke._hoverpaper=Ke._paperdiv.append("svg").classed("main-svg",!0),!Ke._uid){var qe={};y.selectAll("defs").each(function(){this.id&&(qe[this.id.split("-")[1]]=1)}),Ke._uid=T.randstr(qe)}Ke._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),Ke._defs=Ke._paper.append("defs").attr("id","defs-"+Ke._uid),Ke._clips=Ke._defs.append("g").classed("clips",!0),Ke._topdefs=Ke._toppaper.append("defs").attr("id","topdefs-"+Ke._uid),Ke._topclips=Ke._topdefs.append("g").classed("clips",!0),Ke._bgLayer=Ke._paper.append("g").classed("bglayer",!0),Ke._draggers=Ke._paper.append("g").classed("draglayer",!0);var At=Ke._paper.append("g").classed("layer-below",!0);Ke._imageLowerLayer=At.append("g").classed("imagelayer",!0),Ke._shapeLowerLayer=At.append("g").classed("shapelayer",!0),Ke._cartesianlayer=Ke._paper.append("g").classed("cartesianlayer",!0),Ke._polarlayer=Ke._paper.append("g").classed("polarlayer",!0),Ke._smithlayer=Ke._paper.append("g").classed("smithlayer",!0),Ke._ternarylayer=Ke._paper.append("g").classed("ternarylayer",!0),Ke._geolayer=Ke._paper.append("g").classed("geolayer",!0),Ke._funnelarealayer=Ke._paper.append("g").classed("funnelarealayer",!0),Ke._pielayer=Ke._paper.append("g").classed("pielayer",!0),Ke._iciclelayer=Ke._paper.append("g").classed("iciclelayer",!0),Ke._treemaplayer=Ke._paper.append("g").classed("treemaplayer",!0),Ke._sunburstlayer=Ke._paper.append("g").classed("sunburstlayer",!0),Ke._indicatorlayer=Ke._toppaper.append("g").classed("indicatorlayer",!0),Ke._glimages=Ke._paper.append("g").classed("glimages",!0);var mt=Ke._toppaper.append("g").classed("layer-above",!0);Ke._imageUpperLayer=mt.append("g").classed("imagelayer",!0),Ke._shapeUpperLayer=mt.append("g").classed("shapelayer",!0),Ke._selectionLayer=Ke._toppaper.append("g").classed("selectionlayer",!0),Ke._infolayer=Ke._toppaper.append("g").classed("infolayer",!0),Ke._menulayer=Ke._toppaper.append("g").classed("menulayer",!0),Ke._zoomlayer=Ke._toppaper.append("g").classed("zoomlayer",!0),Ke._hoverlayer=Ke._hoverpaper.append("g").classed("hoverlayer",!0),Ke._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ee.emit("plotly_framework")}V.animate=jt,V.addFrames=Nt,V.deleteFrames=Lt,V.addTraces=K,V.deleteTraces=J,V.extendTraces=ae,V.moveTraces=U,V.prependTraces=he,V.newPlot=D,V._doPlot=h,V.purge=Xe,V.react=dt,V.redraw=I,V.relayout=ne,V.restyle=H,V.setPlotConfig=E,V.update=ke,V._guiRelayout=De(ne),V._guiRestyle=De(H),V._guiUpdate=De(ke),V._storeDirectGUIEdit=Q},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(t,N,V){var y={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},c={};function A(T,e){for(var a in T){var i=T[a];i.valType?e[a]=i.dflt:(e[a]||(e[a]={}),A(i,e[a]))}}A(y,c),N.exports={configAttributes:y,dfltConfig:c}},{}],554:[function(t,N,V){var y=t("../registry"),c=t("../lib"),A=t("../plots/attributes"),T=t("../plots/layout_attributes"),e=t("../plots/frame_attributes"),a=t("../plots/animation_attributes"),i=t("./plot_config").configAttributes,n=t("./edit_types"),r=c.extendDeepAll,v=c.isPlainObject,s=c.isArrayOrTypedArray,o=c.nestedProperty,b=c.valObjectMeta,g="_isSubplotObj",d="_isLinkedToArray",f="_arrayAttrRegexps",m="_deprecated",l=[g,d,f,m];V.IS_SUBPLOT_OBJ=g,V.IS_LINKED_TO_ARRAY=d,V.DEPRECATED=m,V.UNDERSCORE_ATTRS=l,V.get=function(){var D={};y.allTypes.forEach(function(O){D[O]=w(O)});var R={};return Object.keys(y.transformsRegistry).forEach(function(O){R[O]=_(O)}),{defs:{valObjects:b,metaKeys:l.concat(["description","role","editType","impliedEdits"]),editType:{traces:n.traces,layout:n.layout},impliedEdits:{}},traces:D,layout:p(),transforms:R,frames:h(),animation:L(a),config:L(i)}},V.crawl=function(D,R,O,z){var G=O||0;z=z||"",Object.keys(D).forEach(function(Y){var ee=D[Y];if(l.indexOf(Y)===-1){var j=(z?z+".":"")+Y;R(ee,Y,D,G,j),!V.isValObject(ee)&&v(ee)&&Y!=="impliedEdits"&&V.crawl(ee,R,G+1,j)}})},V.isValObject=function(D){return D&&D.valType!==void 0},V.findArrayAttributes=function(D){var R=[],O=[],z=[],G,Y;function ee(J,U,H,q){O=O.slice(0,q).concat([U]),z=z.slice(0,q).concat([J&&J._isLinkedToArray]);var re=J&&(J.valType==="data_array"||J.arrayOk===!0)&&!(O[q-1]==="colorbar"&&(U==="ticktext"||U==="tickvals"));!re||j(G,0,"")}function j(J,U,H){var q=J[O[U]],re=H+O[U];if(U===O.length-1)s(q)&&R.push(Y+re);else if(z[U]){if(Array.isArray(q))for(var Z=0;Z<q.length;Z++)v(q[Z])&&j(q[Z],U+1,re+"["+Z+"].")}else v(q)&&j(q,U+1,re+".")}G=D,Y="",V.crawl(A,ee),D._module&&D._module.attributes&&V.crawl(D._module.attributes,ee);var X=D.transforms;if(X)for(var ae=0;ae<X.length;ae++){var he=X[ae],K=he._module;K&&(Y="transforms["+ae+"].",G=he,V.crawl(K.attributes,ee))}return R},V.getTraceValObject=function(D,R){var O=R[0],z=1,G,Y;if(O==="transforms"){if(R.length===1)return A.transforms;var ee=D.transforms;if(!Array.isArray(ee)||!ee.length)return!1;var j=R[1];if(!M(j)||j>=ee.length)return!1;G=(y.transformsRegistry[ee[j].type]||{}).attributes,Y=G&&G[R[2]],z=3}else{var X=D._module;if(X||(X=(y.modules[D.type||A.type.dflt]||{})._module),!X)return!1;if(G=X.attributes,Y=G&&G[O],!Y){var ae=X.basePlotModule;ae&&ae.attributes&&(Y=ae.attributes[O])}Y||(Y=A[O])}return u(Y,R,z)},V.getLayoutValObject=function(D,R){var O=x(D,R[0]);return u(O,R,1)};function x(D,R){var O,z,G,Y,ee=D._basePlotModules;if(ee){var j;for(O=0;O<ee.length;O++){if(G=ee[O],G.attrRegex&&G.attrRegex.test(R)){if(G.layoutAttrOverrides)return G.layoutAttrOverrides;!j&&G.layoutAttributes&&(j=G.layoutAttributes)}var X=G.baseLayoutAttrOverrides;if(X&&R in X)return X[R]}if(j)return j}var ae=D._modules;if(ae){for(O=0;O<ae.length;O++)if(Y=ae[O].layoutAttributes,Y&&R in Y)return Y[R]}for(z in y.componentsRegistry){if(G=y.componentsRegistry[z],G.name==="colorscale"&&R.indexOf("coloraxis")===0)return G.layoutAttributes[R];if(!G.schema&&R===G.name)return G.layoutAttributes}return R in T?T[R]:!1}function u(D,R,O){if(!D)return!1;if(D._isLinkedToArray){if(M(R[O]))O++;else if(O<R.length)return!1}for(;O<R.length;O++){var z=D[R[O]];if(v(z))D=z;else break;if(O===R.length-1)break;if(D._isLinkedToArray){if(O++,!M(R[O]))return!1}else if(D.valType==="info_array"){O++;var G=R[O];if(!M(G))return!1;var Y=D.items;if(Array.isArray(Y)){if(G>=Y.length)return!1;if(D.dimensions===2){if(O++,R.length===O)return D;var ee=R[O];if(!M(ee))return!1;D=Y[G][ee]}else D=Y[G]}else D=Y}}return D}function M(D){return D===Math.round(D)&&D>=0}function w(D){var R,O;R=y.modules[D]._module,O=R.basePlotModule;var z={};z.type=null;var G=r({},A),Y=r({},R.attributes);V.crawl(Y,function(X,ae,he,K,J){o(G,J).set(void 0),X===void 0&&o(Y,J).set(void 0)}),r(z,G),y.traceIs(D,"noOpacity")&&delete z.opacity,y.traceIs(D,"showLegend")||(delete z.showlegend,delete z.legendgroup),y.traceIs(D,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),R.selectPoints||delete z.selectedpoints,r(z,Y),O.attributes&&r(z,O.attributes),z.type=D;var ee={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:L(z)};if(R.layoutAttributes){var j={};r(j,R.layoutAttributes),ee.layoutAttributes=L(j)}return R.animatable||V.crawl(ee,function(X){V.isValObject(X)&&"anim"in X&&delete X.anim}),ee}function p(){var D={},R,O;r(D,T);for(R in y.subplotsRegistry)if(O=y.subplotsRegistry[R],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var z=0;z<O.attr.length;z++)F(D,O,O.attr[z]);else{var G=O.attr==="subplot"?O.name:O.attr;F(D,O,G)}for(R in y.componentsRegistry){O=y.componentsRegistry[R];var Y=O.schema;if(Y&&(Y.subplots||Y.layout)){var ee=Y.subplots;if(ee&&ee.xaxis&&!ee.yaxis)for(var j in ee.xaxis)delete D.yaxis[j]}else O.name==="colorscale"?r(D,O.layoutAttributes):O.layoutAttributes&&I(D,O.layoutAttributes,O.name)}return{layoutAttributes:L(D)}}function _(D){var R=y.transformsRegistry[D],O=r({},R.attributes);return Object.keys(y.componentsRegistry).forEach(function(z){var G=y.componentsRegistry[z];G.schema&&G.schema.transforms&&G.schema.transforms[D]&&Object.keys(G.schema.transforms[D]).forEach(function(Y){I(O,G.schema.transforms[D][Y],Y)})}),{attributes:L(O)}}function h(){var D={frames:r({},e)};return L(D),D.frames}function L(D){return E(D),S(D),P(D),D}function E(D){function R(z){return{valType:"string",editType:"none"}}function O(z,G,Y){V.isValObject(z)?(z.arrayOk===!0||z.valType==="data_array")&&(Y[G+"src"]=R()):v(z)&&(z.role="object")}V.crawl(D,O)}function S(D){function R(O,z,G){if(!!O){var Y=O[d];!Y||(delete O[d],G[z]={items:{}},G[z].items[Y]=O,G[z].role="object")}}V.crawl(D,R)}function P(D){function R(O){for(var z in O)if(v(O[z]))R(O[z]);else if(Array.isArray(O[z]))for(var G=0;G<O[z].length;G++)R(O[z][G]);else O[z]instanceof RegExp&&(O[z]=O[z].toString())}R(D)}function F(D,R,O){var z=o(D,O),G=r({},R.layoutAttributes);G[g]=!0,z.set(G)}function I(D,R,O){var z=o(D,O);z.set(r(z.get()||{},R))}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(t,N,V){var y=t("../lib"),c=t("../plots/attributes"),A="templateitemname",T={name:{valType:"string",editType:"none"}};T[A]={valType:"string",editType:"calc"},V.templatedArray=function(i,n){return n._isLinkedToArray=i,n.name=T.name,n[A]=T[A],n},V.traceTemplater=function(i){var n={},r,v;for(r in i)v=i[r],Array.isArray(v)&&v.length&&(n[r]=0);function s(o){r=y.coerce(o,{},c,"type");var b={type:r,_template:null};if(r in n){v=i[r];var g=n[r]%v.length;n[r]++,b._template=v[g]}return b}return{newTrace:s}},V.newContainer=function(i,n,r){var v=i._template,s=v&&(v[n]||r&&v[r]);y.isPlainObject(s)||(s=null);var o=i[n]={_template:s};return o},V.arrayTemplater=function(i,n,r){var v=i._template,s=v&&v[a(n)],o=v&&v[n];(!Array.isArray(o)||!o.length)&&(o=[]);var b={};function g(f){var m={name:f.name,_input:f},l=m[A]=f[A];if(!e(l))return m._template=s,m;for(var x=0;x<o.length;x++){var u=o[x];if(u.name===l)return b[l]=1,m._template=u,m}return m[r]=f[r]||!1,m._template=!1,m}function d(){for(var f=[],m=0;m<o.length;m++){var l=o[m],x=l.name;if(e(x)&&!b[x]){var u={_template:l,name:x,_input:{_templateitemname:x}};u[A]=l[A],f.push(u),b[x]=1}}return f}return{newItem:g,defaultItems:d}};function e(i){return i&&typeof i=="string"}function a(i){var n=i.length-1;return i.charAt(n)!=="s"&&y.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}V.arrayDefaultKey=a,V.arrayEditor=function(i,n,r){var v=(y.nestedProperty(i,n).get()||[]).length,s=r._index,o=s>=v&&(r._input||{})._templateitemname;o&&(s=v);var b=n+"["+s+"]",g;function d(){g={},o&&(g[b]={},g[b][A]=o)}d();function f(u,M){g[u]=M}function m(u,M){o?y.nestedProperty(g[b],u).set(M):g[b+"."+u]=M}function l(){var u=g;return d(),u}function x(u,M){u&&m(u,M);var w=l();for(var p in w)y.nestedProperty(i,p).set(w[p])}return{modifyBase:f,modifyItem:m,getUpdateObj:l,applyUpdate:x}}},{"../lib":515,"../plots/attributes":562}],556:[function(t,N,V){var y=t("@plotly/d3"),c=t("../registry"),A=t("../plots/plots"),T=t("../lib"),e=t("../lib/clear_gl_canvases"),a=t("../components/color"),i=t("../components/drawing"),n=t("../components/titles"),r=t("../components/modebar"),v=t("../plots/cartesian/axes"),s=t("../constants/alignment"),o=t("../plots/cartesian/constraints"),b=o.enforce,g=o.clean,d=t("../plots/cartesian/autorange").doAutoRange,f="start",m="middle",l="end";V.layoutStyles=function(S){return T.syncOrAsync([A.doAutoMargin,u],S)};function x(S,P,F){for(var I=0;I<F.length;I++){var D=F[I][0],R=F[I][1];if(!(D[0]>=S[1]||D[1]<=S[0])&&R[0]<P[1]&&R[1]>P[0])return!0}return!1}function u(S){var P=S._fullLayout,F=P._size,I=F.p,D=v.list(S,"",!0),R,O,z,G,Y,ee;if(P._paperdiv.style({width:S._context.responsive&&P.autosize&&!S._context._hasZeroWidth&&!S.layout.width?"100%":P.width+"px",height:S._context.responsive&&P.autosize&&!S._context._hasZeroHeight&&!S.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(i.setSize,P.width,P.height),S._context.setBackground(S,P.paper_bgcolor),V.drawMainTitle(S),r.manage(S),!P._has("cartesian"))return A.previousPromises(S);function j(Ct,jt,Nt){var Lt=Ct._lw/2;if(Ct._id.charAt(0)==="x"){if(jt){if(Nt==="top")return jt._offset-I-Lt}else return F.t+F.h*(1-(Ct.position||0))+Lt%1;return jt._offset+jt._length+I+Lt}if(jt){if(Nt==="right")return jt._offset+jt._length+I+Lt}else return F.l+F.w*(Ct.position||0)+Lt%1;return jt._offset-I-Lt}for(R=0;R<D.length;R++){G=D[R];var X=G._anchorAxis;G._linepositions={},G._lw=i.crispRound(S,G.linewidth,1),G._mainLinePosition=j(G,X,G.side),G._mainMirrorPosition=G.mirror&&X?j(G,X,s.OPPOSITE_SIDE[G.side]):null}var ae=[],he=[],K=[],J=a.opacity(P.paper_bgcolor)===1&&a.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(O in P._plots)if(z=P._plots[O],z.mainplot)z.bg&&z.bg.remove(),z.bg=void 0;else{var U=z.xaxis.domain,H=z.yaxis.domain,q=z.plotgroup;if(x(U,H,K)){var re=q.node(),Z=z.bg=T.ensureSingle(q,"rect","bg");re.insertBefore(Z.node(),re.childNodes[0]),he.push(O)}else q.select("rect.bg").remove(),K.push([U,H]),J||(ae.push(O),he.push(O))}var Q=P._bgLayer.selectAll(".bg").data(ae);for(Q.enter().append("rect").classed("bg",!0),Q.exit().remove(),Q.each(function(Ct){P._plots[Ct].bg=y.select(this)}),R=0;R<he.length;R++)z=P._plots[he[R]],Y=z.xaxis,ee=z.yaxis,z.bg&&Y._offset!==void 0&&ee._offset!==void 0&&z.bg.call(i.setRect,Y._offset-I,ee._offset-I,Y._length+2*I,ee._length+2*I).call(a.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(O in P._plots){z=P._plots[O],Y=z.xaxis,ee=z.yaxis;var ie=z.clipId="clip"+P._uid+O+"plot",oe=T.ensureSingleById(P._clips,"clipPath",ie,function(Ct){Ct.classed("plotclip",!0).append("rect")});z.clipRect=oe.select("rect").attr({width:Y._length,height:ee._length}),i.setTranslate(z.plot,Y._offset,ee._offset);var ne,le;z._hasClipOnAxisFalse?(ne=null,le=ie):(ne=ie,le=null),i.setClipUrl(z.plot,ne,S),z.layerClipId=le}var _e,fe,ye,xe,me,be,ke,De,He,Ae,Le,Ze,We;function ze(Ct){return"M"+_e+","+Ct+"H"+fe}function Ie(Ct){return"M"+Y._offset+","+Ct+"h"+Y._length}function Ve(Ct){return"M"+Ct+","+De+"V"+ke}function dt(Ct){return"M"+Ct+","+ee._offset+"v"+ee._length}function Ft(Ct,jt,Nt){if(!Ct.showline||O!==Ct._mainSubplot)return"";if(!Ct._anchorAxis)return Nt(Ct._mainLinePosition);var Lt=jt(Ct._mainLinePosition);return Ct.mirror&&(Lt+=jt(Ct._mainMirrorPosition)),Lt}for(O in P._plots){z=P._plots[O],Y=z.xaxis,ee=z.yaxis;var Qt="M0,0";M(Y,O)&&(me=p(Y,"left",ee,D),_e=Y._offset-(me?I+me:0),be=p(Y,"right",ee,D),fe=Y._offset+Y._length+(be?I+be:0),ye=j(Y,ee,"bottom"),xe=j(Y,ee,"top"),We=!Y._anchorAxis||O!==Y._mainSubplot,We&&(Y.mirror==="allticks"||Y.mirror==="all")&&(Y._linepositions[O]=[ye,xe]),Qt=Ft(Y,ze,Ie),We&&Y.showline&&(Y.mirror==="all"||Y.mirror==="allticks")&&(Qt+=ze(ye)+ze(xe)),z.xlines.style("stroke-width",Y._lw+"px").call(a.stroke,Y.showline?Y.linecolor:"rgba(0,0,0,0)")),z.xlines.attr("d",Qt);var Ot="M0,0";M(ee,O)&&(Le=p(ee,"bottom",Y,D),ke=ee._offset+ee._length+(Le?I:0),Ze=p(ee,"top",Y,D),De=ee._offset-(Ze?I:0),He=j(ee,Y,"left"),Ae=j(ee,Y,"right"),We=!ee._anchorAxis||O!==ee._mainSubplot,We&&(ee.mirror==="allticks"||ee.mirror==="all")&&(ee._linepositions[O]=[He,Ae]),Ot=Ft(ee,Ve,dt),We&&ee.showline&&(ee.mirror==="all"||ee.mirror==="allticks")&&(Ot+=Ve(He)+Ve(Ae)),z.ylines.style("stroke-width",ee._lw+"px").call(a.stroke,ee.showline?ee.linecolor:"rgba(0,0,0,0)")),z.ylines.attr("d",Ot)}return v.makeClipPaths(S),A.previousPromises(S)}function M(S,P){return(S.ticks||S.showline)&&(P===S._mainSubplot||S.mirror==="all"||S.mirror==="allticks")}function w(S,P,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var I=F._anchorAxis;if(!I)return!1;var D=s.FROM_BL[P];return F.side===P?I.domain[D]===S.domain[D]:F.mirror&&I.domain[1-D]===S.domain[1-D]}function p(S,P,F,I){if(w(S,P,F))return F._lw;for(var D=0;D<I.length;D++){var R=I[D];if(R._mainAxis===F._mainAxis&&w(S,P,R))return R._lw}return 0}V.drawMainTitle=function(S){var P=S._fullLayout,F=L(P),I=E(P);n.draw(S,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:_(P,F),y:h(P,I),"text-anchor":F,dy:I}})};function _(S,P){var F=S.title,I=S._size,D=0;switch(P===f?D=F.pad.l:P===l&&(D=-F.pad.r),F.xref){case"paper":return I.l+I.w*F.x+D;case"container":default:return S.width*F.x+D}}function h(S,P){var F=S.title,I=S._size,D=0;if(P==="0em"||!P?D=-F.pad.b:P===s.CAP_SHIFT+"em"&&(D=F.pad.t),F.y==="auto")return I.t/2;switch(F.yref){case"paper":return I.t+I.h-I.h*F.y+D;case"container":default:return S.height-S.height*F.y+D}}function L(S){var P=S.title,F=m;return T.isRightAnchor(P)?F=l:T.isLeftAnchor(P)&&(F=f),F}function E(S){var P=S.title,F="0em";return T.isTopAnchor(P)?F=s.CAP_SHIFT+"em":T.isMiddleAnchor(P)&&(F=s.MID_SHIFT+"em"),F}V.doTraceStyle=function(S){var P=S.calcdata,F=[],I;for(I=0;I<P.length;I++){var D=P[I],R=D[0]||{},O=R.trace||{},z=O._module||{},G=z.arraysToCalcdata;G&&G(D,O);var Y=z.editStyle;Y&&F.push({fn:Y,cd0:R})}if(F.length){for(I=0;I<F.length;I++){var ee=F[I];ee.fn(S,ee.cd0)}e(S),V.redrawReglTraces(S)}return A.style(S),c.getComponentMethod("legend","draw")(S),A.previousPromises(S)},V.doColorBars=function(S){return c.getComponentMethod("colorbar","draw")(S),A.previousPromises(S)},V.layoutReplot=function(S){var P=S.layout;return S.layout=void 0,c.call("_doPlot",S,"",P)},V.doLegend=function(S){return c.getComponentMethod("legend","draw")(S),A.previousPromises(S)},V.doTicksRelayout=function(S){return v.draw(S,"redraw"),S._fullLayout._hasOnlyLargeSploms&&(c.subplotsRegistry.splom.updateGrid(S),e(S),V.redrawReglTraces(S)),V.drawMainTitle(S),A.previousPromises(S)},V.doModeBar=function(S){var P=S._fullLayout;r.manage(S);for(var F=0;F<P._basePlotModules.length;F++){var I=P._basePlotModules[F].updateFx;I&&I(S)}return A.previousPromises(S)},V.doCamera=function(S){for(var P=S._fullLayout,F=P._subplots.gl3d,I=0;I<F.length;I++){var D=P[F[I]],R=D._scene;R.setViewport(D)}},V.drawData=function(S){var P=S._fullLayout;e(S);for(var F=P._basePlotModules,I=0;I<F.length;I++)F[I].plot(S);return V.redrawReglTraces(S),A.style(S),c.getComponentMethod("selections","draw")(S),c.getComponentMethod("shapes","draw")(S),c.getComponentMethod("annotations","draw")(S),c.getComponentMethod("images","draw")(S),P._replotting=!1,A.previousPromises(S)},V.redrawReglTraces=function(S){var P=S._fullLayout;if(P._has("regl")){var F=S._fullData,I=[],D=[],R,O;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),R=0;R<F.length;R++){var z=F[R];z.visible===!0&&z._length!==0&&(z.type==="splom"?P._splomScenes[z.uid].draw():z.type==="scattergl"?T.pushUnique(I,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&T.pushUnique(D,z.subplot))}for(R=0;R<I.length;R++)O=P._plots[I[R]],O._scene&&O._scene.draw();for(R=0;R<D.length;R++)O=P[D[R]]._subplot,O._scene&&O._scene.draw()}},V.doAutoRangeAndConstraints=function(S){for(var P=v.list(S,"",!0),F,I={},D=0;D<P.length;D++)if(F=P[D],!I[F._id]){I[F._id]=1,g(S,F),d(S,F);var R=F._matchGroup;if(R)for(var O in R){var z=v.getFromId(S,O);d(S,z,F.range),I[O]=1}}b(S)},V.finalDraw=function(S){c.getComponentMethod("rangeslider","draw")(S),c.getComponentMethod("rangeselector","draw")(S)},V.drawMarginPushers=function(S){c.getComponentMethod("legend","draw")(S),c.getComponentMethod("rangeselector","draw")(S),c.getComponentMethod("sliders","draw")(S),c.getComponentMethod("updatemenus","draw")(S),c.getComponentMethod("colorbar","draw")(S)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(t,N,V){var y=t("../lib"),c=y.isPlainObject,A=t("./plot_schema"),T=t("../plots/plots"),e=t("../plots/attributes"),a=t("./plot_template"),i=t("./plot_config").dfltConfig;V.makeTemplate=function(f){f=y.isPlainObject(f)?f:y.getGraphDiv(f),f=y.extendDeep({_context:i},{data:f.data,layout:f.layout}),T.supplyDefaults(f);var m=f.data||[],l=f.layout||{};l._basePlotModules=f._fullLayout._basePlotModules,l._modules=f._fullLayout._modules;var x={data:{},layout:{}};m.forEach(function(P){var F={};v(P,F,o.bind(null,P));var I=y.coerce(P,{},e,"type"),D=x.data[I];D||(D=x.data[I]=[]),D.push(F)}),v(l,x.layout,s.bind(null,l)),delete x.layout.template;var u=l.template;if(c(u)){var M=u.layout,w,p,_,h,L,E;c(M)&&n(M,x.layout);var S=u.data;if(c(S)){for(p in x.data)if(_=S[p],Array.isArray(_)){for(L=x.data[p],E=L.length,h=_.length,w=0;w<E;w++)n(_[w%h],L[w]);for(w=E;w<h;w++)L.push(y.extendDeep({},_[w]))}for(p in S)p in x.data||(x.data[p]=y.extendDeep([],S[p]))}}return x};function n(f,m){f=y.extendDeep({},f);var l=Object.keys(f).sort(),x,u;function M(L,E,S){if(c(E)&&c(L))n(L,E);else if(Array.isArray(E)&&Array.isArray(L)){var P=a.arrayTemplater({_template:f},S);for(u=0;u<E.length;u++){var F=E[u],I=P.newItem(F)._template;I&&n(I,F)}var D=P.defaultItems();for(u=0;u<D.length;u++)E.push(D[u]._template);for(u=0;u<E.length;u++)delete E[u].templateitemname}}for(x=0;x<l.length;x++){var w=l[x],p=f[w];if(w in m?M(p,m[w],w):m[w]=p,r(w)===w)for(var _ in m){var h=r(_);_!==h&&h===w&&!(_ in f)&&M(p,m[_],w)}}}function r(f){return f.replace(/[0-9]+$/,"")}function v(f,m,l,x,u){var M=u&&l(u);for(var w in f){var p=f[w],_=b(f,w,x),h=b(f,w,u),L=l(h);if(!L){var E=r(w);E!==w&&(h=b(f,E,u),L=l(h))}if(!(M&&M===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(p)))if(!L.valType&&c(p))v(p,m,l,_,h);else if(L._isLinkedToArray&&Array.isArray(p))for(var S=!1,P=0,F={},I=0;I<p.length;I++){var D=p[I];if(c(D)){var R=D.name;if(R)F[R]||(v(D,m,l,b(p,P,_),b(p,P,h)),P++,F[R]=1);else if(!S){var O=a.arrayDefaultKey(w),z=b(f,O,x),G=b(p,P,_);v(D,m,l,G,b(p,P,h));var Y=y.nestedProperty(m,G),ee=y.nestedProperty(m,z);ee.set(Y.get()),Y.set(null),S=!0}}}else{var j=y.nestedProperty(m,_);j.set(p)}}}function s(f,m){return A.getLayoutValObject(f,y.nestedProperty({},m).parts)}function o(f,m){return A.getTraceValObject(f,y.nestedProperty({},m).parts)}function b(f,m,l){var x;return l?Array.isArray(f)?x=l+"["+m+"]":x=l+"."+m:x=m,x}V.validateTemplate=function(f,m){var l=y.extendDeep({},{_context:i,data:f.data,layout:f.layout}),x=l.layout||{};c(m)||(m=x.template||{});var u=m.layout,M=m.data,w=[];l.layout=x,l.layout.template=m,T.supplyDefaults(l);var p=l._fullLayout,_=l._fullData,h={};function L(z,G){for(var Y in z)if(Y.charAt(0)!=="_"&&c(z[Y])){var ee=r(Y),j=[],X;for(X=0;X<G.length;X++)j.push(b(z,Y,G[X])),ee!==Y&&j.push(b(z,ee,G[X]));for(X=0;X<j.length;X++)h[j[X]]=1;L(z[Y],j)}}function E(z,G){for(var Y in z)if(Y.indexOf("defaults")===-1&&c(z[Y])){var ee=b(z,Y,G);h[ee]?E(z[Y],ee):w.push({code:"unused",path:ee})}}if(c(u)?(L(p,["layout"]),E(u,"layout")):w.push({code:"layout"}),!c(M))w.push({code:"data"});else{for(var S={},P,F=0;F<_.length;F++){var I=_[F];P=I.type,S[P]=(S[P]||0)+1,I._fullInput._template||w.push({code:"missing",index:I._fullInput.index,traceType:P})}for(P in M){var D=M[P].length,R=S[P]||0;D>R?w.push({code:"unused",traceType:P,templateCount:D,dataCount:R}):R>D&&w.push({code:"reused",traceType:P,templateCount:D,dataCount:R})}}function O(z,G){for(var Y in z)if(Y.charAt(0)!=="_"){var ee=z[Y],j=b(z,Y,G);c(ee)?(Array.isArray(z)&&ee._template===!1&&ee.templateitemname&&w.push({code:"missing",path:j,templateitemname:ee.templateitemname}),O(ee,j)):Array.isArray(ee)&&g(ee)&&O(ee,j)}}if(O({data:_,layout:p},""),w.length)return w.map(d)};function g(f){for(var m=0;m<f.length;m++)if(c(f[m]))return!0}function d(f){var m;switch(f.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":f.path?m="There are no templates for item "+f.path+" with name "+f.templateitemname:m="There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":f.path?m="The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?m="Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":m="The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type.";break}return f.msg=m,f}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(t,N,V){var y=t("fast-isnumeric"),c=t("./plot_api"),A=t("../plots/plots"),T=t("../lib"),e=t("../snapshot/helpers"),a=t("../snapshot/tosvg"),i=t("../snapshot/svgtoimg"),n=t("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function v(s,o){o=o||{};var b,g,d,f;T.isPlainObject(s)?(b=s.data||[],g=s.layout||{},d=s.config||{},f={}):(s=T.getGraphDiv(s),b=T.extendDeep([],s.data),g=T.extendDeep({},s.layout),d=s._context,f=s._fullLayout||{});function m(R){return!(R in o)||T.validate(o[R],r[R])}if(!m("width")&&o.width!==null||!m("height")&&o.height!==null)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+T.join2(r.format.values,", "," or ")+".");var l={};function x(R,O){return T.coerce(o,l,r,R,O)}var u=x("format"),M=x("width"),w=x("height"),p=x("scale"),_=x("setBackground"),h=x("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var E=T.extendFlat({},g);M?E.width=M:o.width===null&&y(f.width)&&(E.width=f.width),w?E.height=w:o.height===null&&y(f.height)&&(E.height=f.height);var S=T.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=e.getRedrawFunc(L);function F(){return new Promise(function(R){setTimeout(R,e.getDelay(L._fullLayout))})}function I(){return new Promise(function(R,O){var z=a(L,u,p),G=L._fullLayout.width,Y=L._fullLayout.height;function ee(){c.purge(L),document.body.removeChild(L)}if(u==="full-json"){var j=A.graphJson(L,!1,"keepdata","object",!0,!0);return j.version=n,j=JSON.stringify(j),ee(),R(h?j:e.encodeJSON(j))}if(ee(),u==="svg")return R(h?z:e.encodeSVG(z));var X=document.createElement("canvas");X.id=T.randstr(),i({format:u,width:G,height:Y,scale:p,canvas:X,svg:z,promise:!0}).then(R).catch(O)})}function D(R){return h?R.replace(e.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,O){c.newPlot(L,b,E,S).then(P).then(F).then(I).then(function(z){R(D(z))}).catch(function(z){O(z)})})}N.exports=v},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(t,N,V){var y=t("../lib"),c=t("../plots/plots"),A=t("./plot_schema"),T=t("./plot_config").dfltConfig,e=y.isPlainObject,a=Array.isArray,i=y.isArrayOrTypedArray;N.exports=function(x,u){x===void 0&&(x=[]),u===void 0&&(u={});var M=A.get(),w=[],p={_context:y.extendFlat({},T)},_,h;a(x)?(p.data=y.extendDeep([],x),_=x):(p.data=[],_=[],w.push(o("array","data"))),e(u)?(p.layout=y.extendDeep({},u),h=u):(p.layout={},h={},arguments.length>1&&w.push(o("object","layout"))),c.supplyDefaults(p);for(var L=p._fullData,E=_.length,S=0;S<E;S++){var P=_[S],F=["data",S];if(!e(P)){w.push(o("object",F));continue}var I=L[S],D=I.type,R=M.traces[D].attributes;R.type={valType:"enumerated",values:[D]},I.visible===!1&&P.visible!==!1&&w.push(o("invisible",F)),n(P,I,R,w,F);var O=P.transforms,z=I.transforms;if(O){a(O)||w.push(o("array",F,["transforms"])),F.push("transforms");for(var G=0;G<O.length;G++){var Y=["transforms",G],ee=O[G].type;if(!e(O[G])){w.push(o("object",F,Y));continue}var j=M.transforms[ee]?M.transforms[ee].attributes:{};j.type={valType:"enumerated",values:Object.keys(M.transforms)},n(O[G],z[G],j,w,F,Y)}}}var X=p._fullLayout,ae=r(M,L);return n(h,X,ae,w,"layout"),w.length===0?void 0:w};function n(l,x,u,M,w,p){p=p||[];for(var _=Object.keys(l),h=0;h<_.length;h++){var L=_[h];if(L!=="transforms"){var E=p.slice();E.push(L);var S=l[L],P=x[L],F=g(u,L),I=(F||{}).valType,D=I==="info_array",R=I==="colorscale",O=(F||{}).items;if(!b(u,L))M.push(o("schema",w,E));else if(e(S)&&e(P)&&I!=="any")n(S,P,F,M,w,E);else if(D&&a(S)){S.length>P.length&&M.push(o("unused",w,E.concat(P.length)));var z=P.length,G=Array.isArray(O);G&&(z=Math.min(z,O.length));var Y,ee,j,X,ae;if(F.dimensions===2)for(ee=0;ee<z;ee++)if(a(S[ee])){S[ee].length>P[ee].length&&M.push(o("unused",w,E.concat(ee,P[ee].length)));var he=P[ee].length;for(Y=0;Y<(G?Math.min(he,O[ee].length):he);Y++)j=G?O[ee][Y]:O,X=S[ee][Y],ae=P[ee][Y],y.validate(X,j)?ae!==X&&ae!==+X&&M.push(o("dynamic",w,E.concat(ee,Y),X,ae)):M.push(o("value",w,E.concat(ee,Y),X))}else M.push(o("array",w,E.concat(ee),S[ee]));else for(ee=0;ee<z;ee++)j=G?O[ee]:O,X=S[ee],ae=P[ee],y.validate(X,j)?ae!==X&&ae!==+X&&M.push(o("dynamic",w,E.concat(ee),X,ae)):M.push(o("value",w,E.concat(ee),X))}else if(F.items&&!D&&a(S)){var K=O[Object.keys(O)[0]],J=[],U,H;for(U=0;U<P.length;U++){var q=P[U]._index||U;if(H=E.slice(),H.push(q),e(S[q])&&e(P[U])){J.push(q);var re=S[q],Z=P[U];e(re)&&re.visible!==!1&&Z.visible===!1?M.push(o("invisible",w,H)):n(re,Z,K,M,w,H)}}for(U=0;U<S.length;U++)H=E.slice(),H.push(U),e(S[U])?J.indexOf(U)===-1&&M.push(o("unused",w,H)):M.push(o("object",w,H,S[U]))}else!e(S)&&e(P)?M.push(o("object",w,E,S)):!i(S)&&i(P)&&!D&&!R?M.push(o("array",w,E,S)):L in x?y.validate(S,F)?F.valType==="enumerated"&&(F.coerceNumber&&S!==+P||S!==P)&&M.push(o("dynamic",w,E,S,P)):M.push(o("value",w,E,S)):M.push(o("unused",w,E,S))}}return M}function r(l,x){for(var u=l.layout.layoutAttributes,M=0;M<x.length;M++){var w=x[M],p=l.traces[w.type],_=p.layoutAttributes;_&&(w.subplot?y.extendFlat(u[p.attributes.subplot.dflt],_):y.extendFlat(u,_))}return u}var v={object:function(l,x){var u;return l==="layout"&&x===""?u="The layout argument":l[0]==="data"&&x===""?u="Trace "+l[1]+" in the data argument":u=s(l)+"key "+x,u+" must be linked to an object container"},array:function(l,x){var u;return l==="data"?u="The data argument":u=s(l)+"key "+x,u+" must be linked to an array container"},schema:function(l,x){return s(l)+"key "+x+" is not part of the schema"},unused:function(l,x,u){var M=e(u)?"container":"key";return s(l)+M+" "+x+" did not get coerced"},dynamic:function(l,x,u,M){return[s(l)+"key",x,"(set to '"+u+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(l,x){return(x?s(l)+"item "+x:"Trace "+l[1])+" got defaulted to be not visible"},value:function(l,x,u){return[s(l)+"key "+x,"is set to an invalid value ("+u+")"].join(" ")}};function s(l){return a(l)?"In data trace "+l[1]+", ":"In "+l+", "}function o(l,x,u,M,w){u=u||"";var p,_;a(x)?(p=x[0],_=x[1]):(p=x,_=null);var h=m(u),L=v[l](x,h,M,w);return y.log(L),{code:l,container:p,trace:_,path:u,astr:h,msg:L}}function b(l,x){var u=f(x),M=u.keyMinusId,w=u.id;return M in l&&l[M]._isSubplotObj&&w?!0:x in l}function g(l,x){if(x in l)return l[x];var u=f(x);return l[u.keyMinusId]}var d=y.counterRegex("([a-z]+)");function f(l){var x=l.match(d);return{keyMinusId:x&&x[1],id:x&&x[2]}}function m(l){if(!a(l))return String(l);for(var x="",u=0;u<l.length;u++){var M=l[u];typeof M=="number"?x=x.substr(0,x.length-1)+"["+M+"]":x+=M,u<l.length-1&&(x+=".")}return x}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(t,N,V){N.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(t,N,V){var y=t("../lib"),c=t("../plot_api/plot_template");N.exports=function(T,e,a){var i=a.name,n=a.inclusionAttr||"visible",r=e[i],v=y.isArrayOrTypedArray(T[i])?T[i]:[],s=e[i]=[],o=c.arrayTemplater(e,i,n),b,g;for(b=0;b<v.length;b++){var d=v[b];y.isPlainObject(d)?g=o.newItem(d):(g=o.newItem({}),g[n]=!1),g._index=b,g[n]!==!1&&a.handleItemDefaults(d,g,e,a),s.push(g)}var f=o.defaultItems();for(b=0;b<f.length;b++)g=f[b],g._index=s.length,a.handleItemDefaults({},g,e,a,{}),s.push(g);if(y.isArrayOrTypedArray(r)){var m=Math.min(r.length,s.length);for(b=0;b<m;b++)y.relinkPrivateKeys(s[b],r[b])}return s}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(t,N,V){var y=t("./font_attributes"),c=t("../components/fx/attributes");N.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:y({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:c.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=c.dateTime2ms,T=c.incrementMonth,e=t("../../constants/numerical"),a=e.ONEAVGMONTH;N.exports=function(n,r,v,s){if(r.type!=="date")return{vals:s};var o=n[v+"periodalignment"];if(!o)return{vals:s};var b=n[v+"period"],g;if(y(b)){if(b=+b,b<=0)return{vals:s}}else if(typeof b=="string"&&b.charAt(0)==="M"){var d=+b.substring(1);if(d>0&&Math.round(d)===d)g=d;else return{vals:s}}for(var f=r.calendar,m=o==="start",l=o==="end",x=n[v+"period0"],u=A(x,f)||0,M=[],w=[],p=[],_=s.length,h=0;h<_;h++){var L=s[h],E,S,P;if(g){for(E=Math.round((L-u)/(g*a)),P=T(u,g*E,f);P>L;)P=T(P,-g,f);for(;P<=L;)P=T(P,g,f);S=T(P,-g,f)}else{for(E=Math.round((L-u)/b),P=u+E*b;P>L;)P-=b;for(;P<=L;)P+=b;S=P-b}M[h]=m?S:l?P:(S+P)/2,w[h]=S,p[h]=P}return{vals:M,starts:w,ends:p}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(t,N,V){N.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../constants/numerical").FP_SAFE,e=t("../../registry"),a=t("../../components/drawing"),i=t("./axis_ids"),n=i.getFromId,r=i.isLinked;N.exports={getAutoRange:v,makePadFn:o,doAutoRange:f,findExtremes:m,concatExtremes:d};function v(_,h){var L,E,S=[],P=_._fullLayout,F=o(P,h,0),I=o(P,h,1),D=d(_,h),R=D.min,O=D.max;if(R.length===0||O.length===0)return A.simpleMap(h.range,h.r2l);var z=R[0].val,G=O[0].val;for(L=1;L<R.length&&z===G;L++)z=Math.min(z,R[L].val);for(L=1;L<O.length&&z===G;L++)G=Math.max(G,O[L].val);var Y=!1;if(h.range){var ee=A.simpleMap(h.range,h.r2l);Y=ee[1]<ee[0]}h.autorange==="reversed"&&(Y=!0,h.autorange=!0);var j=h.rangemode,X=j==="tozero",ae=j==="nonnegative",he=h._length,K=he/10,J=0,U,H,q,re,Z,Q;for(L=0;L<R.length;L++)for(U=R[L],E=0;E<O.length;E++)H=O[E],Q=H.val-U.val-s(h,U.val,H.val),Q>0&&(Z=he-F(U)-I(H),Z>K?Q/Z>J&&(q=U,re=H,J=Q/Z):Q/he>J&&(q={val:U.val,nopad:1},re={val:H.val,nopad:1},J=Q/he));function ie(fe,ye){return Math.max(fe,I(ye))}if(z===G){var oe=z-1,ne=z+1;if(X)if(z===0)S=[0,1];else{var le=(z>0?O:R).reduce(ie,0),_e=z/(1-Math.min(.5,le/he));S=z>0?[0,_e]:[_e,0]}else ae?S=[Math.max(0,oe),Math.max(1,ne)]:S=[oe,ne]}else X?(q.val>=0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:0,nopad:1})):ae&&(q.val-J*F(q)<0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:1,nopad:1})),J=(re.val-q.val-s(h,U.val,H.val))/(he-F(q)-I(re)),S=[q.val-J*F(q),re.val+J*I(re)];return Y&&S.reverse(),A.simpleMap(S,h.l2r||Number)}function s(_,h,L){var E=0;if(_.rangebreaks)for(var S=_.locateBreaks(h,L),P=0;P<S.length;P++){var F=S[P];E+=F.max-F.min}return E}function o(_,h,L){var E=.05*h._length,S=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(S.ticklabelposition||"").indexOf("inside")!==-1){var P=h.autorange==="reversed";if(!P){var F=A.simpleMap(h.range,h.r2l);P=F[1]<F[0]}P&&(L=!L)}var I=0;return r(_,h._id)||(I=g(_,h,L)),E=Math.max(I,E),h.constrain==="domain"&&h._inputDomain&&(E*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?E:I)}}var b=3;function g(_,h,L){var E=0,S=h._id.charAt(0)==="x";for(var P in _._plots){var F=_._plots[P];if(!(h._id!==F.xaxis._id&&h._id!==F.yaxis._id)){var I=(S?F.yaxis:F.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(I.side==="left"||I.side==="bottom")||L&&(I.side==="top"||I.side==="right"))){if(I._vals){var D=A.deg2rad(I._tickAngles[I._id+"tick"]||0),R=Math.abs(Math.cos(D)),O=Math.abs(Math.sin(D));if(!I._vals[0].bb){var z=I._id+"tick",G=I._selections[z];G.each(function(he){var K=y.select(this),J=K.select(".text-math-group");J.empty()&&(he.bb=a.bBox(K.node()))})}for(var Y=0;Y<I._vals.length;Y++){var ee=I._vals[Y],j=ee.bb;if(j){var X=2*b+j.width,ae=2*b+j.height;E=Math.max(E,S?Math.max(X*R,ae*O):Math.max(ae*R,X*O))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(E+=I.ticklen||0)}}}return E}function d(_,h,L){var E=h._id,S=_._fullData,P=_._fullLayout,F=[],I=[],D,R,O;function z(X,ae){for(D=0;D<ae.length;D++){var he=X[ae[D]],K=(he._extremes||{})[E];if(he.visible===!0&&K){for(R=0;R<K.min.length;R++)O=K.min[R],l(F,O.val,O.pad,{extrapad:O.extrapad});for(R=0;R<K.max.length;R++)O=K.max[R],x(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(z(S,h._traceIndices),z(P.annotations||[],h._annIndices||[]),z(P.shapes||[],h._shapeIndices||[]),h._matchGroup&&!L){for(var G in h._matchGroup)if(G!==h._id){var Y=n(_,G),ee=d(_,Y,!0),j=h._length/Y._length;for(R=0;R<ee.min.length;R++)O=ee.min[R],l(F,O.val,O.pad*j,{extrapad:O.extrapad});for(R=0;R<ee.max.length;R++)O=ee.max[R],x(I,O.val,O.pad*j,{extrapad:O.extrapad})}}return{min:F,max:I}}function f(_,h,L){if(h.setScale(),h.autorange){h.range=L?L.slice():v(_,h),h._r=h.range.slice(),h._rl=A.simpleMap(h._r,h.r2l);var E=h._input,S={};S[h._attr+".range"]=h.range,S[h._attr+".autorange"]=h.autorange,e.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,S),E.range=h.range.slice(),E.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var F=P.rangeslider[h._name];F&&F.rangemode==="auto"&&(F.range=v(_,h)),P._input.rangeslider[h._name]=A.extendFlat({},F)}}function m(_,h,L){L||(L={}),_._m||_.setScale();var E=[],S=[],P=h.length,F=L.padded||!1,I=L.tozero&&(_.type==="linear"||_.type==="-"),D=_.type==="log",R=!1,O=L.vpadLinearized||!1,z,G,Y,ee,j,X,ae,he,K;function J(oe){if(Array.isArray(oe))return R=!0,function(le){return Math.max(Number(oe[le]||0),0)};var ne=Math.max(Number(oe||0),0);return function(){return ne}}var U=J((_._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),H=J((_._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),q=J(L.vpadplus||L.vpad),re=J(L.vpadminus||L.vpad);if(!R){if(he=1/0,K=-1/0,D)for(z=0;z<P;z++)G=h[z],G<he&&G>0&&(he=G),G>K&&G<T&&(K=G);else for(z=0;z<P;z++)G=h[z],G<he&&G>-T&&(he=G),G>K&&G<T&&(K=G);h=[he,K],P=2}var Z={tozero:I,extrapad:F};function Q(oe){Y=h[oe],c(Y)&&(X=U(oe),ae=H(oe),O?(ee=_.c2l(Y)-re(oe),j=_.c2l(Y)+q(oe)):(he=Y-re(oe),K=Y+q(oe),D&&he<K/10&&(he=K/10),ee=_.c2l(he),j=_.c2l(K)),I&&(ee=Math.min(0,ee),j=Math.max(0,j)),M(ee)&&l(E,ee,ae,Z),M(j)&&x(S,j,X,Z))}var ie=Math.min(6,P);for(z=0;z<ie;z++)Q(z);for(z=P-1;z>=ie;z--)Q(z);return{min:E,max:S,opts:L}}function l(_,h,L,E){u(_,h,L,E,w)}function x(_,h,L,E){u(_,h,L,E,p)}function u(_,h,L,E,S){for(var P=E.tozero,F=E.extrapad,I=!0,D=0;D<_.length&&I;D++){var R=_[D];if(S(R.val,h)&&R.pad>=L&&(R.extrapad||!F)){I=!1;break}else S(h,R.val)&&R.pad<=L&&(F||!R.extrapad)&&(_.splice(D,1),D--)}if(I){var O=P&&h===0;_.push({val:h,pad:O?0:L,extrapad:O?!1:F})}}function M(_){return c(_)&&Math.abs(_)<T}function w(_,h){return _<=h}function p(_,h){return _>=h}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib"),a=e.strTranslate,i=t("../../lib/svg_text_utils"),n=t("../../components/titles"),r=t("../../components/color"),v=t("../../components/drawing"),s=t("./layout_attributes"),o=t("./clean_ticks"),b=t("../../constants/numerical"),g=b.ONEMAXYEAR,d=b.ONEAVGYEAR,f=b.ONEMINYEAR,m=b.ONEMAXQUARTER,l=b.ONEAVGQUARTER,x=b.ONEMINQUARTER,u=b.ONEMAXMONTH,M=b.ONEAVGMONTH,w=b.ONEMINMONTH,p=b.ONEWEEK,_=b.ONEDAY,h=_/2,L=b.ONEHOUR,E=b.ONEMIN,S=b.ONESEC,P=b.MINUS_SIGN,F=b.BADNUM,I={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},O={K:"tick",L:"path"},z={K:"tick",L:"text"},G={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},Y=t("../../constants/alignment"),ee=Y.MID_SHIFT,j=Y.CAP_SHIFT,X=Y.LINE_SPACING,ae=Y.OPPOSITE_SIDE,he=3,K=N.exports={};K.setConvert=t("./set_convert");var J=t("./axis_autotype"),U=t("./axis_ids"),H=U.idSort,q=U.isLinked;K.id2name=U.id2name,K.name2id=U.name2id,K.cleanId=U.cleanId,K.list=U.list,K.listIds=U.listIds,K.getFromId=U.getFromId,K.getFromTrace=U.getFromTrace;var re=t("./autorange");K.getAutoRange=re.getAutoRange,K.findExtremes=re.findExtremes;var Z=1e-4;function Q(Pe){var Se=(Pe[1]-Pe[0])*Z;return[Pe[0]-Se,Pe[1]+Se]}K.coerceRef=function(Pe,Se,ot,ct,pt,St){var xt=ct.charAt(ct.length-1),Pt=ot._fullLayout._subplots[xt+"axis"],Xt=ct+"ref",or={};return pt||(pt=Pt[0]||(typeof St=="string"?St:St[0])),St||(St=pt),Pt=Pt.concat(Pt.map(function(Pr){return Pr+" domain"})),or[Xt]={valType:"enumerated",values:Pt.concat(St?typeof St=="string"?[St]:St:[]),dflt:pt},e.coerce(Pe,Se,or,Xt)},K.getRefType=function(Pe){return Pe===void 0?Pe:Pe==="paper"?"paper":Pe==="pixel"?"pixel":/( domain)$/.test(Pe)?"domain":"range"},K.coercePosition=function(Pe,Se,ot,ct,pt,St){var xt,Pt,Xt=K.getRefType(ct);if(Xt!=="range")xt=e.ensureNumber,Pt=ot(pt,St);else{var or=K.getFromId(Se,ct);St=or.fraction2r(St),Pt=ot(pt,St),xt=or.cleanPos}Pe[pt]=xt(Pt)},K.cleanPosition=function(Pe,Se,ot){var ct=ot==="paper"||ot==="pixel"?e.ensureNumber:K.getFromId(Se,ot).cleanPos;return ct(Pe)},K.redrawComponents=function(Pe,Se){Se=Se||K.listIds(Pe);var ot=Pe._fullLayout;function ct(pt,St,xt,Pt){for(var Xt=T.getComponentMethod(pt,St),or={},Pr=0;Pr<Se.length;Pr++)for(var Ar=ot[K.id2name(Se[Pr])],Er=Ar[xt],Jr=0;Jr<Er.length;Jr++){var lr=Er[Jr];if(!or[lr]&&(Xt(Pe,lr),or[lr]=1,Pt))return}}ct("annotations","drawOne","_annIndices"),ct("shapes","drawOne","_shapeIndices"),ct("images","draw","_imgIndices",!0),ct("selections","drawOne","_selectionIndices")};var ie=K.getDataConversions=function(Pe,Se,ot,ct){var pt,St=ot==="x"||ot==="y"||ot==="z"?ot:ct;if(Array.isArray(St)){if(pt={type:J(ct,void 0,{autotypenumbers:Pe._fullLayout.autotypenumbers}),_categories:[]},K.setConvert(pt),pt.type==="category")for(var xt=0;xt<ct.length;xt++)pt.d2c(ct[xt])}else pt=K.getFromTrace(Pe,Se,St);return pt?{d2c:pt.d2c,c2d:pt.c2d}:St==="ids"?{d2c:ne,c2d:ne}:{d2c:oe,c2d:oe}};function oe(Pe){return+Pe}function ne(Pe){return String(Pe)}K.getDataToCoordFunc=function(Pe,Se,ot,ct){return ie(Pe,Se,ot,ct).d2c},K.counterLetter=function(Pe){var Se=Pe.charAt(0);if(Se==="x")return"y";if(Se==="y")return"x"},K.minDtick=function(Pe,Se,ot,ct){["log","category","multicategory"].indexOf(Pe.type)!==-1||!ct?Pe._minDtick=0:Pe._minDtick===void 0?(Pe._minDtick=Se,Pe._forceTick0=ot):Pe._minDtick&&((Pe._minDtick/Se+1e-6)%1<2e-6&&((ot-Pe._forceTick0)/Se%1+1.000001)%1<2e-6?(Pe._minDtick=Se,Pe._forceTick0=ot):((Se/Pe._minDtick+1e-6)%1>2e-6||((ot-Pe._forceTick0)/Pe._minDtick%1+1.000001)%1>2e-6)&&(Pe._minDtick=0))},K.saveRangeInitial=function(Pe,Se){for(var ot=K.list(Pe,"",!0),ct=!1,pt=0;pt<ot.length;pt++){var St=ot[pt],xt=St._rangeInitial===void 0,Pt=xt||!(St.range[0]===St._rangeInitial[0]&&St.range[1]===St._rangeInitial[1]);(xt&&St.autorange===!1||Se&&Pt)&&(St._rangeInitial=St.range.slice(),ct=!0)}return ct},K.saveShowSpikeInitial=function(Pe,Se){for(var ot=K.list(Pe,"",!0),ct=!1,pt="on",St=0;St<ot.length;St++){var xt=ot[St],Pt=xt._showSpikeInitial===void 0,Xt=Pt||xt.showspikes!==xt._showspikes;(Pt||Se&&Xt)&&(xt._showSpikeInitial=xt.showspikes,ct=!0),pt==="on"&&!xt.showspikes&&(pt="off")}return Pe._fullLayout._cartesianSpikesEnabled=pt,ct},K.autoBin=function(Pe,Se,ot,ct,pt,St){var xt=e.aggNums(Math.min,null,Pe),Pt=e.aggNums(Math.max,null,Pe);if(Se.type==="category"||Se.type==="multicategory")return{start:xt-.5,end:Pt+.5,size:Math.max(1,Math.round(St)||1),_dataSpan:Pt-xt};pt||(pt=Se.calendar);var Xt;if(Se.type==="log"?Xt={type:"linear",range:[xt,Pt]}:Xt={type:Se.type,range:e.simpleMap([xt,Pt],Se.c2r,0,pt),calendar:pt},K.setConvert(Xt),St=St&&o.dtick(St,Xt.type),St)Xt.dtick=St,Xt.tick0=o.tick0(void 0,Xt.type,pt);else{var or;if(ot)or=(Pt-xt)/ot;else{var Pr=e.distinctVals(Pe),Ar=Math.pow(10,Math.floor(Math.log(Pr.minDiff)/Math.LN10)),Er=Ar*e.roundUp(Pr.minDiff/Ar,[.9,1.9,4.9,9.9],!0);or=Math.max(Er,2*e.stdev(Pe)/Math.pow(Pe.length,ct?.25:.4)),c(or)||(or=1)}K.autoTicks(Xt,or)}var Jr=Xt.dtick,lr=K.tickIncrement(K.tickFirst(Xt),Jr,"reverse",pt),br,Fr;if(typeof Jr=="number")lr=le(lr,Pe,Xt,xt,Pt),Fr=1+Math.floor((Pt-lr)/Jr),br=lr+Fr*Jr;else for(Xt.dtick.charAt(0)==="M"&&(lr=_e(lr,Pe,Jr,xt,pt)),br=lr,Fr=0;br<=Pt;)br=K.tickIncrement(br,Jr,!1,pt),Fr++;return{start:Se.c2r(lr,0,pt),end:Se.c2r(br,0,pt),size:Jr,_dataSpan:Pt-xt}};function le(Pe,Se,ot,ct,pt){var St=0,xt=0,Pt=0,Xt=0;function or(Jr){return(1+(Jr-Pe)*100/ot.dtick)%100<2}for(var Pr=0;Pr<Se.length;Pr++)Se[Pr]%1===0?Pt++:c(Se[Pr])||Xt++,or(Se[Pr])&&St++,or(Se[Pr]+ot.dtick/2)&&xt++;var Ar=Se.length-Xt;if(Pt===Ar&&ot.type!=="date")ot.dtick<1?Pe=ct-.5*ot.dtick:(Pe-=.5,Pe+ot.dtick<ct&&(Pe+=ot.dtick));else if(xt<Ar*.1&&(St>Ar*.3||or(ct)||or(pt))){var Er=ot.dtick/2;Pe+=Pe+Er<ct?Er:-Er}return Pe}function _e(Pe,Se,ot,ct,pt){var St=e.findExactDates(Se,pt),xt=.8;if(St.exactDays>xt){var Pt=Number(ot.substr(1));St.exactYears>xt&&Pt%12===0?Pe=K.tickIncrement(Pe,"M6","reverse")+_*1.5:St.exactMonths>xt?Pe=K.tickIncrement(Pe,"M1","reverse")+_*15.5:Pe-=h;var Xt=K.tickIncrement(Pe,ot);if(Xt<=ct)return Xt}return Pe}K.prepMinorTicks=function(Pe,Se,ot){if(!Se.minor.dtick){delete Pe.dtick;var ct=Se.dtick&&c(Se._tmin),pt;if(ct){var St=K.tickIncrement(Se._tmin,Se.dtick,!0);pt=[Se._tmin,St*.99+Se._tmin*.01]}else{var xt=e.simpleMap(Se.range,Se.r2l);pt=[xt[0],.8*xt[0]+.2*xt[1]]}if(Pe.range=e.simpleMap(pt,Se.l2r),Pe._isMinor=!0,K.prepTicks(Pe,ot),ct){var Pt=c(Se.dtick),Xt=c(Pe.dtick),or=Pt?Se.dtick:+Se.dtick.substring(1),Pr=Xt?Pe.dtick:+Pe.dtick.substring(1);Pt&&Xt?fe(or,Pr)?or===2*p&&Pr===2*_&&(Pe.dtick=p):or===2*p&&Pr===3*_?Pe.dtick=p:or===p&&!(Se._input.minor||{}).nticks?Pe.dtick=_:ye(or/Pr,2.5)?Pe.dtick=or/2:Pe.dtick=or:String(Se.dtick).charAt(0)==="M"?Xt?Pe.dtick="M1":fe(or,Pr)?or>=12&&Pr===2&&(Pe.dtick="M3"):Pe.dtick=Se.dtick:String(Pe.dtick).charAt(0)==="L"?String(Se.dtick).charAt(0)==="L"?fe(or,Pr)||(Pe.dtick=ye(or/Pr,2.5)?Se.dtick/2:Se.dtick):Pe.dtick="D1":Pe.dtick==="D2"&&+Se.dtick>1&&(Pe.dtick=1)}Pe.range=Se.range}Se.minor._tick0Init===void 0&&(Pe.tick0=Se.tick0)};function fe(Pe,Se){return Math.abs((Pe/Se+.5)%1-.5)<.001}function ye(Pe,Se){return Math.abs(Pe/Se-1)<.001}K.prepTicks=function(Pe,Se){var ot=e.simpleMap(Pe.range,Pe.r2l,void 0,void 0,Se);if(Pe.tickmode==="auto"||!Pe.dtick){var ct=Pe.nticks,pt;ct||(Pe.type==="category"||Pe.type==="multicategory"?(pt=Pe.tickfont?e.bigFont(Pe.tickfont.size||12):15,ct=Pe._length/pt):(pt=Pe._id.charAt(0)==="y"?40:80,ct=e.constrain(Pe._length/pt,4,9)+1),Pe._name==="radialaxis"&&(ct*=2)),Pe.minor&&Pe.minor.tickmode!=="array"||Pe.tickmode==="array"&&(ct*=100),Pe._roughDTick=Math.abs(ot[1]-ot[0])/ct,K.autoTicks(Pe,Pe._roughDTick),Pe._minDtick>0&&Pe.dtick<Pe._minDtick*2&&(Pe.dtick=Pe._minDtick,Pe.tick0=Pe.l2r(Pe._forceTick0))}Pe.ticklabelmode==="period"&&me(Pe),Pe.tick0||(Pe.tick0=Pe.type==="date"?"2000-01-01":0),Pe.type==="date"&&Pe.dtick<.1&&(Pe.dtick=.1),Ve(Pe)};function xe(Pe){return+Pe.substring(1)}function me(Pe){var Se;function ot(){return!(c(Pe.dtick)||Pe.dtick.charAt(0)!=="M")}var ct=ot(),pt=K.getTickFormat(Pe);if(pt){var St=Pe._dtickInit!==Pe.dtick;/%[fLQsSMX]/.test(pt)||(/%[HI]/.test(pt)?(Se=L,St&&!ct&&Pe.dtick<L&&(Pe.dtick=L)):/%p/.test(pt)?(Se=h,St&&!ct&&Pe.dtick<h&&(Pe.dtick=h)):/%[Aadejuwx]/.test(pt)?(Se=_,St&&!ct&&Pe.dtick<_&&(Pe.dtick=_)):/%[UVW]/.test(pt)?(Se=p,St&&!ct&&Pe.dtick<p&&(Pe.dtick=p)):/%[Bbm]/.test(pt)?(Se=M,St&&(ct?xe(Pe.dtick)<1:Pe.dtick<w)&&(Pe.dtick="M1")):/%[q]/.test(pt)?(Se=l,St&&(ct?xe(Pe.dtick)<3:Pe.dtick<x)&&(Pe.dtick="M3")):/%[Yy]/.test(pt)&&(Se=d,St&&(ct?xe(Pe.dtick)<12:Pe.dtick<f)&&(Pe.dtick="M12")))}ct=ot(),ct&&Pe.tick0===Pe._dowTick0&&(Pe.tick0=Pe._rawTick0),Pe._definedDelta=Se}function be(Pe,Se,ot){for(var ct=0;ct<Pe.length;ct++){var pt=Pe[ct].value,St=ct,xt=ct+1;ct<Pe.length-1?(St=ct,xt=ct+1):ct>0?(St=ct-1,xt=ct):(St=ct,xt=ct);var Pt=Pe[St].value,Xt=Pe[xt].value,or=Math.abs(Xt-Pt),Pr=ot||or,Ar=0;Pr>=f?or>=f&&or<=g?Ar=or:Ar=d:ot===l&&Pr>=x?or>=x&&or<=m?Ar=or:Ar=l:Pr>=w?or>=w&&or<=u?Ar=or:Ar=M:ot===p&&Pr>=p?Ar=p:Pr>=_?Ar=_:ot===h&&Pr>=h?Ar=h:ot===L&&Pr>=L&&(Ar=L);var Er;Ar>=or&&(Ar=or,Er=!0);var Jr=pt+Ar;if(Se.rangebreaks&&Ar>0){for(var lr=84,br=0,Fr=0;Fr<lr;Fr++){var Hr=(Fr+.5)/lr;Se.maskBreaks(pt*(1-Hr)+Hr*Jr)!==F&&br++}Ar*=br/lr,Ar||(Pe[ct].drop=!0),Er&&or>p&&(Ar=or)}(Ar>0||ct===0)&&(Pe[ct].periodX=pt+Ar/2)}}K.calcTicks=function(Se,ot){for(var ct=Se.type,pt=Se.calendar,St=Se.ticklabelstep,xt=Se.ticklabelmode==="period",Pt=e.simpleMap(Se.range,Se.r2l,void 0,void 0,ot),Xt=Pt[1]<Pt[0],or=Math.min(Pt[0],Pt[1]),Pr=Math.max(Pt[0],Pt[1]),Ar=Math.max(1e3,Se._length||0),Er=[],Jr=[],lr=[],br=[],Fr=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),Hr=1;Hr>=(Fr?0:1);Hr--){var Lr=!Hr;Hr?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var at=Hr?Se:e.extendFlat({},Se,Se.minor);if(Lr?K.prepMinorTicks(at,Se,ot):K.prepTicks(at,ot),at.tickmode==="array"){Hr?(lr=[],Er=ke(Se)):(br=[],Jr=ke(Se));continue}var Rt=Q(Pt),Kt=Rt[0],ur=Rt[1],Nr=c(at.dtick),Vr=ct==="log"&&!(Nr||at.dtick.charAt(0)==="L"),Dr=K.tickFirst(at,ot);if(Hr){if(Se._tmin=Dr,Dr<Kt!==Xt)break;(ct==="category"||ct==="multicategory")&&(ur=Xt?Math.max(-.5,ur):Math.min(Se._categories.length-.5,ur))}var Mr=null,jr=Dr,kn;if(Hr){var yn;Nr?yn=Se.dtick:ct==="date"?typeof Se.dtick=="string"&&Se.dtick.charAt(0)==="M"&&(yn=M*Se.dtick.substring(1)):yn=Se._roughDTick,kn=Math.round((Se.r2l(jr)-Se.r2l(Se.tick0))/yn)-1}var Wn=at.dtick;for(at.rangebreaks&&at._tick0Init!==at.tick0&&(jr=ft(jr,Se),Xt||(jr=K.tickIncrement(jr,Wn,!Xt,pt))),Hr&&xt&&(jr=K.tickIncrement(jr,Wn,!Xt,pt),kn--);Xt?jr>=ur:jr<=ur;jr=K.tickIncrement(jr,Wn,Xt,pt)){if(Hr&&kn++,at.rangebreaks&&!Xt){if(jr<Kt)continue;if(at.maskBreaks(jr)===F&&ft(jr,at)>=Pr)break}if(lr.length>Ar||jr===Mr)break;Mr=jr;var In={value:jr};Hr?(Vr&&jr!==(jr|0)&&(In.simpleLabel=!0),St>1&&kn%St&&(In.skipLabel=!0),lr.push(In)):(In.minor=!0,br.push(In))}}if(Fr){var $n=Se.minor.ticks==="inside"&&Se.ticks==="outside"||Se.minor.ticks==="outside"&&Se.ticks==="inside";if(!$n){for(var Kn=lr.map(function(Yt){return Yt.value}),ya=[],Ra=0;Ra<br.length;Ra++){var _i=br[Ra],Ka=_i.value;if(Kn.indexOf(Ka)===-1){for(var ri=!1,ei=0;!ri&&ei<lr.length;ei++)1e7+lr[ei].value===1e7+Ka&&(ri=!0);ri||ya.push(_i)}}br=ya}}xt&&be(lr,Se,Se._definedDelta);var kr;if(Se.rangebreaks){var bn=Se._id.charAt(0)==="y",dn=1;Se.tickmode==="auto"&&(dn=Se.tickfont?Se.tickfont.size:12);var Ln=NaN;for(kr=lr.length-1;kr>-1;kr--){if(lr[kr].drop){lr.splice(kr,1);continue}lr[kr].value=ft(lr[kr].value,Se);var ra=Se.c2p(lr[kr].value);(bn?Ln>ra-dn:Ln<ra+dn)?lr.splice(Xt?kr+1:kr,1):Ln=ra}}lt(Se)&&Math.abs(Pt[1]-Pt[0])===360&&lr.pop(),Se._tmax=(lr[lr.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var ma,sa=function(Yt){Yt.text="",Se._prevDateHead=ma};lr=lr.concat(br);var Bn,Qn;for(kr=0;kr<lr.length;kr++){var Xa=lr[kr].minor,yi=lr[kr].value;Xa?Jr.push({x:yi,minor:!0}):(ma=Se._prevDateHead,Bn=K.tickText(Se,yi,!1,lr[kr].simpleLabel),Qn=lr[kr].periodX,Qn!==void 0&&(Bn.periodX=Qn,(Qn>Pr||Qn<or)&&(Qn>Pr&&(Bn.periodX=Pr),Qn<or&&(Bn.periodX=or),sa(Bn))),lr[kr].skipLabel&&sa(Bn),Er.push(Bn))}return Er=Er.concat(Jr),Se._inCalcTicks=!1,xt&&Er.length&&(Er[0].noTick=!0),Er};function ke(Pe){var Se=e.simpleMap(Pe.range,Pe.r2l),ot=Q(Se),ct=Math.min(ot[0],ot[1]),pt=Math.max(ot[0],ot[1]),St=Pe.type==="category"?Pe.d2l_noadd:Pe.d2l;Pe.type==="log"&&String(Pe.dtick).charAt(0)!=="L"&&(Pe.dtick="L"+Math.pow(10,Math.floor(Math.min(Pe.range[0],Pe.range[1]))-1));for(var xt=[],Pt=0;Pt<=1;Pt++)if(!(Pt&&!Pe.minor)){var Xt=Pt?Pe.minor.tickvals:Pe.tickvals,or=Pt?[]:Pe.ticktext;if(!!Xt){Array.isArray(or)||(or=[]);for(var Pr=0;Pr<Xt.length;Pr++){var Ar=St(Xt[Pr]);if(Ar>ct&&Ar<pt){var Er=or[Pr]===void 0?K.tickText(Pe,Ar):dt(Pe,Ar,String(or[Pr]));Pt&&(Er.minor=!0,Er.text=""),xt.push(Er)}}}}return Pe.rangebreaks&&(xt=xt.filter(function(Jr){return Pe.maskBreaks(Jr.x)!==F})),xt}var De=[2,5,10],He=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Le=[1,2,3,7,14],Ze=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],We=[-.301,0,.301,.699,1],ze=[15,30,45,90,180];function Ie(Pe,Se,ot){return Se*e.roundUp(Pe/Se,ot)}K.autoTicks=function(Pe,Se,ot){var ct;function pt(Ar){return Math.pow(Ar,Math.floor(Math.log(Se)/Math.LN10))}if(Pe.type==="date"){Pe.tick0=e.dateTick0(Pe.calendar,0);var St=2*Se;if(St>d)Se/=d,ct=pt(10),Pe.dtick="M"+12*Ie(Se,ct,De);else if(St>M)Se/=M,Pe.dtick="M"+Ie(Se,1,He);else if(St>_){if(Pe.dtick=Ie(Se,_,Pe._hasDayOfWeekBreaks?[1,2,7,14]:Le),!ot){var xt=K.getTickFormat(Pe),Pt=Pe.ticklabelmode==="period";Pt&&(Pe._rawTick0=Pe.tick0),/%[uVW]/.test(xt)?Pe.tick0=e.dateTick0(Pe.calendar,2):Pe.tick0=e.dateTick0(Pe.calendar,1),Pt&&(Pe._dowTick0=Pe.tick0)}}else St>L?Pe.dtick=Ie(Se,L,He):St>E?Pe.dtick=Ie(Se,E,Ae):St>S?Pe.dtick=Ie(Se,S,Ae):(ct=pt(10),Pe.dtick=Ie(Se,ct,De))}else if(Pe.type==="log"){Pe.tick0=0;var Xt=e.simpleMap(Pe.range,Pe.r2l);if(Pe._isMinor&&(Se*=1.5),Se>.7)Pe.dtick=Math.ceil(Se);else if(Math.abs(Xt[1]-Xt[0])<1){var or=1.5*Math.abs((Xt[1]-Xt[0])/Se);Se=Math.abs(Math.pow(10,Xt[1])-Math.pow(10,Xt[0]))/or,ct=pt(10),Pe.dtick="L"+Ie(Se,ct,De)}else Pe.dtick=Se>.3?"D2":"D1"}else Pe.type==="category"||Pe.type==="multicategory"?(Pe.tick0=0,Pe.dtick=Math.ceil(Math.max(Se,1))):lt(Pe)?(Pe.tick0=0,ct=1,Pe.dtick=Ie(Se,ct,ze)):(Pe.tick0=0,ct=pt(10),Pe.dtick=Ie(Se,ct,De));if(Pe.dtick===0&&(Pe.dtick=1),!c(Pe.dtick)&&typeof Pe.dtick!="string"){var Pr=Pe.dtick;throw Pe.dtick=1,"ax.dtick error: "+String(Pr)}};function Ve(Pe){var Se=Pe.dtick;if(Pe._tickexponent=0,!c(Se)&&typeof Se!="string"&&(Se=1),(Pe.type==="category"||Pe.type==="multicategory")&&(Pe._tickround=null),Pe.type==="date"){var ot=Pe.r2l(Pe.tick0),ct=Pe.l2r(ot).replace(/(^-|i)/g,""),pt=ct.length;if(String(Se).charAt(0)==="M")pt>10||ct.substr(5)!=="01-01"?Pe._tickround="d":Pe._tickround=+Se.substr(1)%12===0?"y":"m";else if(Se>=_&&pt<=10||Se>=_*15)Pe._tickround="d";else if(Se>=E&&pt<=16||Se>=L)Pe._tickround="M";else if(Se>=S&&pt<=19||Se>=E)Pe._tickround="S";else{var St=Pe.l2r(ot+Se).replace(/^-/,"").length;Pe._tickround=Math.max(pt,St)-20,Pe._tickround<0&&(Pe._tickround=4)}}else if(c(Se)||Se.charAt(0)==="L"){var xt=Pe.range.map(Pe.r2d||Number);c(Se)||(Se=Number(Se.substr(1))),Pe._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var Pt=Math.max(Math.abs(xt[0]),Math.abs(xt[1])),Xt=Math.floor(Math.log(Pt)/Math.LN10+.01),or=Pe.minexponent===void 0?3:Pe.minexponent;Math.abs(Xt)>or&&(it(Pe.exponentformat)&&!Ye(Xt)?Pe._tickexponent=3*Math.round((Xt-1)/3):Pe._tickexponent=Xt)}else Pe._tickround=null}K.tickIncrement=function(Pe,Se,ot,ct){var pt=ot?-1:1;if(c(Se))return e.increment(Pe,pt*Se);var St=Se.charAt(0),xt=pt*Number(Se.substr(1));if(St==="M")return e.incrementMonth(Pe,xt,ct);if(St==="L")return Math.log(Math.pow(10,Pe)+xt)/Math.LN10;if(St==="D"){var Pt=Se==="D2"?We:Ze,Xt=Pe+pt*.01,or=e.roundUp(e.mod(Xt,1),Pt,ot);return Math.floor(Xt)+Math.log(y.round(Math.pow(10,or),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},K.tickFirst=function(Pe,Se){var ot=Pe.r2l||Number,ct=e.simpleMap(Pe.range,ot,void 0,void 0,Se),pt=ct[1]<ct[0],St=pt?Math.floor:Math.ceil,xt=Q(ct)[0],Pt=Pe.dtick,Xt=ot(Pe.tick0);if(c(Pt)){var or=St((xt-Xt)/Pt)*Pt+Xt;return(Pe.type==="category"||Pe.type==="multicategory")&&(or=e.constrain(or,0,Pe._categories.length-1)),or}var Pr=Pt.charAt(0),Ar=Number(Pt.substr(1));if(Pr==="M"){for(var Er=0,Jr=Xt,lr,br,Fr;Er<10;){if(lr=K.tickIncrement(Jr,Pt,pt,Pe.calendar),(lr-xt)*(Jr-xt)<=0)return pt?Math.min(Jr,lr):Math.max(Jr,lr);br=(xt-(Jr+lr)/2)/(lr-Jr),Fr=Pr+(Math.abs(Math.round(br))||1)*Ar,Jr=K.tickIncrement(Jr,Fr,br<0?!pt:pt,Pe.calendar),Er++}return e.error("tickFirst did not converge",Pe),Jr}else{if(Pr==="L")return Math.log(St((Math.pow(10,xt)-Xt)/Ar)*Ar+Xt)/Math.LN10;if(Pr==="D"){var Hr=Pt==="D2"?We:Ze,Lr=e.roundUp(e.mod(xt,1),Hr,pt);return Math.floor(xt)+Math.log(y.round(Math.pow(10,Lr),1))/Math.LN10}else throw"unrecognized dtick "+String(Pt)}},K.tickText=function(Pe,Se,ot,ct){var pt=dt(Pe,Se),St=Pe.tickmode==="array",xt=ot||St,Pt=Pe.type,Xt=Pt==="category"?Pe.d2l_noadd:Pe.d2l,or;if(St&&Array.isArray(Pe.ticktext)){var Pr=e.simpleMap(Pe.range,Pe.r2l),Ar=(Math.abs(Pr[1]-Pr[0])-(Pe._lBreaks||0))/1e4;for(or=0;or<Pe.ticktext.length&&!(Math.abs(Se-Xt(Pe.tickvals[or]))<Ar);or++);if(or<Pe.ticktext.length)return pt.text=String(Pe.ticktext[or]),pt}function Er(br){if(br===void 0)return!0;if(ot)return br==="none";var Fr={first:Pe._tmin,last:Pe._tmax}[br];return br!=="all"&&Se!==Fr}var Jr=ot?"never":Pe.exponentformat!=="none"&&Er(Pe.showexponent)?"hide":"";if(Pt==="date"?Ft(Pe,pt,ot,xt):Pt==="log"?Qt(Pe,pt,ot,xt,Jr):Pt==="category"?Ot(Pe,pt):Pt==="multicategory"?Ct(Pe,pt,ot):lt(Pe)?Nt(Pe,pt,ot,xt,Jr):jt(Pe,pt,ot,xt,Jr),ct||(Pe.tickprefix&&!Er(Pe.showtickprefix)&&(pt.text=Pe.tickprefix+pt.text),Pe.ticksuffix&&!Er(Pe.showticksuffix)&&(pt.text+=Pe.ticksuffix)),Pe.tickson==="boundaries"||Pe.showdividers){var lr=function(br){var Fr=Pe.l2p(br);return Fr>=0&&Fr<=Pe._length?br:null};pt.xbnd=[lr(pt.x-.5),lr(pt.x+Pe.dtick-.5)]}return pt},K.hoverLabelText=function(Pe,Se,ot){ot&&(Pe=e.extendFlat({},Pe,{hoverformat:ot}));var ct=Array.isArray(Se)?Se[0]:Se,pt=Array.isArray(Se)?Se[1]:void 0;if(pt!==void 0&&pt!==ct)return K.hoverLabelText(Pe,ct,ot)+" - "+K.hoverLabelText(Pe,pt,ot);var St=Pe.type==="log"&&ct<=0,xt=K.tickText(Pe,Pe.c2l(St?-ct:ct),"hover").text;return St?ct===0?"0":P+xt:xt};function dt(Pe,Se,ot){var ct=Pe.tickfont||{};return{x:Se,dx:0,dy:0,text:ot||"",fontSize:ct.size,font:ct.family,fontColor:ct.color}}function Ft(Pe,Se,ot,ct){var pt=Pe._tickround,St=ot&&Pe.hoverformat||K.getTickFormat(Pe);ct&&(c(pt)?pt=4:pt={y:"m",m:"d",d:"M",M:"S",S:4}[pt]);var xt=e.formatDate(Se.x,St,pt,Pe._dateFormat,Pe.calendar,Pe._extraFormat),Pt,Xt=xt.indexOf(`
`);if(Xt!==-1&&(Pt=xt.substr(Xt+1),xt=xt.substr(0,Xt)),ct&&(xt==="00:00:00"||xt==="00:00"?(xt=Pt,Pt=""):xt.length===8&&(xt=xt.replace(/:00$/,""))),Pt)if(ot)pt==="d"?xt+=", "+Pt:xt=Pt+(xt?", "+xt:"");else if(!Pe._inCalcTicks||Pe._prevDateHead!==Pt)Pe._prevDateHead=Pt,xt+="<br>"+Pt;else{var or=Et(Pe),Pr=Pe._trueSide||Pe.side;(!or&&Pr==="top"||or&&Pr==="bottom")&&(xt+="<br> ")}Se.text=xt}function Qt(Pe,Se,ot,ct,pt){var St=Pe.dtick,xt=Se.x,Pt=Pe.tickformat,Xt=typeof St=="string"&&St.charAt(0);if(pt==="never"&&(pt=""),ct&&Xt!=="L"&&(St="L3",Xt="L"),Pt||Xt==="L")Se.text=Ee(Math.pow(10,xt),Pe,pt,ct);else if(c(St)||Xt==="D"&&e.mod(xt+.01,1)<.1){var or=Math.round(xt),Pr=Math.abs(or),Ar=Pe.exponentformat;Ar==="power"||it(Ar)&&Ye(or)?(or===0?Se.text=1:or===1?Se.text="10":Se.text="10<sup>"+(or>1?"":P)+Pr+"</sup>",Se.fontSize*=1.25):(Ar==="e"||Ar==="E")&&Pr>2?Se.text="1"+Ar+(or>0?"+":P)+Pr:(Se.text=Ee(Math.pow(10,xt),Pe,"","fakehover"),St==="D1"&&Pe._id.charAt(0)==="y"&&(Se.dy-=Se.fontSize/6))}else if(Xt==="D")Se.text=String(Math.round(Math.pow(10,e.mod(xt,1)))),Se.fontSize*=.75;else throw"unrecognized dtick "+String(St);if(Pe.dtick==="D1"){var Er=String(Se.text).charAt(0);(Er==="0"||Er==="1")&&(Pe._id.charAt(0)==="y"?Se.dx-=Se.fontSize/4:(Se.dy+=Se.fontSize/2,Se.dx+=(Pe.range[1]>Pe.range[0]?1:-1)*Se.fontSize*(xt<0?.5:.25)))}}function Ot(Pe,Se){var ot=Pe._categories[Math.round(Se.x)];ot===void 0&&(ot=""),Se.text=String(ot)}function Ct(Pe,Se,ot){var ct=Math.round(Se.x),pt=Pe._categories[ct]||[],St=pt[1]===void 0?"":String(pt[1]),xt=pt[0]===void 0?"":String(pt[0]);ot?Se.text=xt+" - "+St:(Se.text=St,Se.text2=xt)}function jt(Pe,Se,ot,ct,pt){pt==="never"?pt="":Pe.showexponent==="all"&&Math.abs(Se.x/Pe.dtick)<1e-6&&(pt="hide"),Se.text=Ee(Se.x,Pe,pt,ct)}function Nt(Pe,Se,ot,ct,pt){if(Pe.thetaunit==="radians"&&!ot){var St=Se.x/180;if(St===0)Se.text="0";else{var xt=Lt(St);if(xt[1]>=100)Se.text=Ee(e.deg2rad(Se.x),Pe,pt,ct);else{var Pt=Se.x<0;xt[1]===1?xt[0]===1?Se.text="\u03C0":Se.text=xt[0]+"\u03C0":Se.text=["<sup>",xt[0],"</sup>","\u2044","<sub>",xt[1],"</sub>","\u03C0"].join(""),Pt&&(Se.text=P+Se.text)}}}else Se.text=Ee(Se.x,Pe,pt,ct)}function Lt(Pe){function Se(Pt,Xt){return Math.abs(Pt-Xt)<=1e-6}function ot(Pt,Xt){return Se(Xt,0)?Pt:ot(Xt,Pt%Xt)}function ct(Pt){for(var Xt=1;!Se(Math.round(Pt*Xt)/Xt,Pt);)Xt*=10;return Xt}var pt=ct(Pe),St=Pe*pt,xt=Math.abs(ot(St,pt));return[Math.round(St/xt),Math.round(pt/xt)]}var Xe=["f","p","n","\u03BC","m","","k","M","G","T"];function it(Pe){return Pe==="SI"||Pe==="B"}function Ye(Pe){return Pe>14||Pe<-15}function Ee(Pe,Se,ot,ct){var pt=Pe<0,St=Se._tickround,xt=ot||Se.exponentformat||"B",Pt=Se._tickexponent,Xt=K.getTickFormat(Se),or=Se.separatethousands;if(ct){var Pr={exponentformat:xt,minexponent:Se.minexponent,dtick:Se.showexponent==="none"?Se.dtick:c(Pe)&&Math.abs(Pe)||1,range:Se.showexponent==="none"?Se.range.map(Se.r2d):[0,Pe||1]};Ve(Pr),St=(Number(Pr._tickround)||0)+4,Pt=Pr._tickexponent,Se.hoverformat&&(Xt=Se.hoverformat)}if(Xt)return Se._numFormat(Xt)(Pe).replace(/-/g,P);var Ar=Math.pow(10,-St)/2;if(xt==="none"&&(Pt=0),Pe=Math.abs(Pe),Pe<Ar)Pe="0",pt=!1;else{if(Pe+=Ar,Pt&&(Pe*=Math.pow(10,-Pt),St+=Pt),St===0)Pe=String(Math.floor(Pe));else if(St<0){Pe=String(Math.round(Pe)),Pe=Pe.substr(0,Pe.length+St);for(var Er=St;Er<0;Er++)Pe+="0"}else{Pe=String(Pe);var Jr=Pe.indexOf(".")+1;Jr&&(Pe=Pe.substr(0,Jr+St).replace(/\.?0+$/,""))}Pe=e.numSeparate(Pe,Se._separators,or)}if(Pt&&xt!=="hide"){it(xt)&&Ye(Pt)&&(xt="power");var lr;Pt<0?lr=P+-Pt:xt!=="power"?lr="+"+Pt:lr=String(Pt),xt==="e"||xt==="E"?Pe+=xt+lr:xt==="power"?Pe+="\xD710<sup>"+lr+"</sup>":xt==="B"&&Pt===9?Pe+="B":it(xt)&&(Pe+=Xe[Pt/3+5])}return pt?P+Pe:Pe}K.getTickFormat=function(Pe){var Se;function ot(Xt){return typeof Xt!="string"?Xt:Number(Xt.replace("M",""))*M}function ct(Xt,or){var Pr=["L","D"];if(typeof Xt==typeof or){if(typeof Xt=="number")return Xt-or;var Ar=Pr.indexOf(Xt.charAt(0)),Er=Pr.indexOf(or.charAt(0));return Ar===Er?Number(Xt.replace(/(L|D)/g,""))-Number(or.replace(/(L|D)/g,"")):Ar-Er}else return typeof Xt=="number"?1:-1}function pt(Xt,or,Pr){var Ar=Pr||function(lr){return lr},Er=or[0],Jr=or[1];return(!Er&&typeof Er!="number"||Ar(Er)<=Ar(Xt))&&(!Jr&&typeof Jr!="number"||Ar(Jr)>=Ar(Xt))}function St(Xt,or){var Pr=or[0]===null,Ar=or[1]===null,Er=ct(Xt,or[0])>=0,Jr=ct(Xt,or[1])<=0;return(Pr||Er)&&(Ar||Jr)}var xt,Pt;if(Pe.tickformatstops&&Pe.tickformatstops.length>0)switch(Pe.type){case"date":case"linear":{for(Se=0;Se<Pe.tickformatstops.length;Se++)if(Pt=Pe.tickformatstops[Se],Pt.enabled&&pt(Pe.dtick,Pt.dtickrange,ot)){xt=Pt;break}break}case"log":{for(Se=0;Se<Pe.tickformatstops.length;Se++)if(Pt=Pe.tickformatstops[Se],Pt.enabled&&St(Pe.dtick,Pt.dtickrange)){xt=Pt;break}break}}return xt?xt.value:Pe.tickformat},K.getSubplots=function(Pe,Se){var ot=Pe._fullLayout._subplots,ct=ot.cartesian.concat(ot.gl2d||[]),pt=Se?K.findSubplotsWithAxis(ct,Se):ct;return pt.sort(function(St,xt){var Pt=St.substr(1).split("y"),Xt=xt.substr(1).split("y");return Pt[0]===Xt[0]?+Pt[1]-+Xt[1]:+Pt[0]-+Xt[0]}),pt},K.findSubplotsWithAxis=function(Pe,Se){for(var ot=new RegExp(Se._id.charAt(0)==="x"?"^"+Se._id+"y":Se._id+"$"),ct=[],pt=0;pt<Pe.length;pt++){var St=Pe[pt];ot.test(St)&&ct.push(St)}return ct},K.makeClipPaths=function(Pe){var Se=Pe._fullLayout;if(!Se._hasOnlyLargeSploms){var ot={_offset:0,_length:Se.width,_id:""},ct={_offset:0,_length:Se.height,_id:""},pt=K.list(Pe,"x",!0),St=K.list(Pe,"y",!0),xt=[],Pt,Xt;for(Pt=0;Pt<pt.length;Pt++)for(xt.push({x:pt[Pt],y:ct}),Xt=0;Xt<St.length;Xt++)Pt===0&&xt.push({x:ot,y:St[Xt]}),xt.push({x:pt[Pt],y:St[Xt]});var or=Se._clips.selectAll(".axesclip").data(xt,function(Pr){return Pr.x._id+Pr.y._id});or.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Pr){return"clip"+Se._uid+Pr.x._id+Pr.y._id}).append("rect"),or.exit().remove(),or.each(function(Pr){y.select(this).select("rect").attr({x:Pr.x._offset||0,y:Pr.y._offset||0,width:Pr.x._length||1,height:Pr.y._length||1})})}},K.draw=function(Pe,Se,ot){var ct=Pe._fullLayout;Se==="redraw"&&ct._paper.selectAll("g.subplot").each(function(St){var xt=St[0],Pt=ct._plots[xt];if(Pt){var Xt=Pt.xaxis,or=Pt.yaxis;Pt.xaxislayer.selectAll("."+Xt._id+"tick").remove(),Pt.yaxislayer.selectAll("."+or._id+"tick").remove(),Pt.xaxislayer.selectAll("."+Xt._id+"tick2").remove(),Pt.yaxislayer.selectAll("."+or._id+"tick2").remove(),Pt.xaxislayer.selectAll("."+Xt._id+"divider").remove(),Pt.yaxislayer.selectAll("."+or._id+"divider").remove(),Pt.minorGridlayer&&Pt.minorGridlayer.selectAll("path").remove(),Pt.gridlayer&&Pt.gridlayer.selectAll("path").remove(),Pt.zerolinelayer&&Pt.zerolinelayer.selectAll("path").remove(),ct._infolayer.select(".g-"+Xt._id+"title").remove(),ct._infolayer.select(".g-"+or._id+"title").remove()}});var pt=!Se||Se==="redraw"?K.listIds(Pe):Se;return e.syncOrAsync(pt.map(function(St){return function(){if(!!St){var xt=K.getFromId(Pe,St),Pt=K.drawOne(Pe,xt,ot);return xt._r=xt.range.slice(),xt._rl=e.simpleMap(xt._r,xt.r2l),Pt}}}))},K.drawOne=function(Pe,Se,ot){ot=ot||{};var ct,pt,St;Se.setScale();var xt=Pe._fullLayout,Pt=Se._id,Xt=Pt.charAt(0),or=K.counterLetter(Pt),Pr=xt._plots[Se._mainSubplot];if(!Pr)return;var Ar=Pr[Xt+"axislayer"],Er=Se._mainLinePosition,Jr=Se._mainMirrorPosition,lr=Se._vals=K.calcTicks(Se),br=[Se.mirror,Er,Jr].join("_");for(ct=0;ct<lr.length;ct++)lr[ct].axInfo=br;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var Fr={};function Hr(Yt){var gr=Pt+(Yt||"tick");return Fr[gr]||(Fr[gr]=mt(Se,gr)),Fr[gr]}if(!!Se.visible){var Lr=K.makeTransTickFn(Se),at=K.makeTransTickLabelFn(Se),Rt,Kt,ur=Se.ticks==="inside",Nr=Se.ticks==="outside";if(Se.tickson==="boundaries"){var Vr=Ke(Se,lr);Kt=K.clipEnds(Se,Vr),Rt=ur?Kt:Vr}else Kt=K.clipEnds(Se,lr),Rt=ur&&Se.ticklabelmode!=="period"?Kt:lr;var Dr=Se._gridVals=Kt,Mr=At(Se,lr);if(!xt._hasOnlyLargeSploms){var jr=Se._subplotsWith,kn={};for(ct=0;ct<jr.length;ct++){pt=jr[ct],St=xt._plots[pt];var yn=St[or+"axis"],Wn=yn._mainAxis._id;if(!kn[Wn]){kn[Wn]=1;var In=Xt==="x"?"M0,"+yn._offset+"v"+yn._length:"M"+yn._offset+",0h"+yn._length;K.drawGrid(Pe,Se,{vals:Dr,counterAxis:yn,layer:St.gridlayer.select("."+Pt),minorLayer:St.minorGridlayer.select("."+Pt),path:In,transFn:Lr}),K.drawZeroLine(Pe,Se,{counterAxis:yn,layer:St.zerolinelayer,path:In,transFn:Lr})}}}var $n,Kn=K.getTickSigns(Se),ya=K.getTickSigns(Se,"minor");if(Se.ticks||Se.minor&&Se.minor.ticks){var Ra=K.makeTickPath(Se,Er,Kn[2]),_i=K.makeTickPath(Se,Er,ya[2],{minor:!0}),Ka,ri,ei,kr;if(Se._anchorAxis&&Se.mirror&&Se.mirror!==!0?(Ka=K.makeTickPath(Se,Jr,Kn[3]),ri=K.makeTickPath(Se,Jr,ya[3],{minor:!0}),ei=Ra+Ka,kr=_i+ri):(Ka="",ri="",ei=Ra,kr=_i),Se.showdividers&&Nr&&Se.tickson==="boundaries"){var bn={};for(ct=0;ct<Mr.length;ct++)bn[Mr[ct].x]=1;$n=function(Yt){return bn[Yt.x]?Ka:ei}}else $n=function(Yt){return Yt.minor?kr:ei}}if(K.drawTicks(Pe,Se,{vals:Rt,layer:Ar,path:$n,transFn:Lr}),Se.mirror==="allticks"){var dn=Object.keys(Se._linepositions||{});for(ct=0;ct<dn.length;ct++){pt=dn[ct],St=xt._plots[pt];var Ln=Se._linepositions[pt]||[],ra=Ln[0],ma=Ln[1],sa=Ln[2],Bn=K.makeTickPath(Se,ra,sa?Kn[0]:ya[0],{minor:sa})+K.makeTickPath(Se,ma,sa?Kn[1]:ya[1],{minor:sa});K.drawTicks(Pe,Se,{vals:Rt,layer:St[Xt+"axislayer"],path:Bn,transFn:Lr})}}var Qn=[];if(Qn.push(function(){return K.drawLabels(Pe,Se,{vals:lr,layer:Ar,plotinfo:St,transFn:at,labelFns:K.makeLabelFns(Se,Er)})}),Se.type==="multicategory"){var Xa={x:2,y:10}[Xt];Qn.push(function(){var Yt={x:"height",y:"width"}[Xt],gr=Hr()[Yt]+Xa+(Se._tickAngles[Pt+"tick"]?Se.tickfont.size*X:0);return K.drawLabels(Pe,Se,{vals:qe(Se,lr),layer:Ar,cls:Pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Lr,labelFns:K.makeLabelFns(Se,Er+gr*Kn[4])})}),Qn.push(function(){return Se._depth=Kn[4]*(Hr("tick2")[Se.side]-Er),Ht(Pe,Se,{vals:Mr,layer:Ar,path:K.makeTickPath(Se,Er,Kn[4],{len:Se._depth}),transFn:Lr})})}else Se.title.hasOwnProperty("standoff")&&Qn.push(function(){Se._depth=Kn[4]*(Hr()[Se.side]-Er)});var yi=T.getComponentMethod("rangeslider","isVisible")(Se);return Qn.push(function(){var Yt=Se.side.charAt(0),gr=ae[Se.side].charAt(0),un=K.getPxPosition(Pe,Se),mn=Nr?Se.ticklen:0,sn,Cn,Tn,gn;if((Se.automargin||yi)&&(Se.type==="multicategory"?sn=Hr("tick2"):(sn=Hr(),Xt==="x"&&Yt==="b"&&(Se._depth=Math.max(sn.width>0?sn.bottom-un:0,mn)))),Se.automargin){Cn={x:0,y:0,r:0,l:0,t:0,b:0};var _r=[0,1];if(Xt==="x"){if(Yt==="b"?Cn[Yt]=Se._depth:(Cn[Yt]=Se._depth=Math.max(sn.width>0?un-sn.top:0,mn),_r.reverse()),sn.width>0){var wr=sn.right-(Se._offset+Se._length);wr>0&&(Cn.xr=1,Cn.r=wr);var Br=Se._offset-sn.left;Br>0&&(Cn.xl=0,Cn.l=Br)}}else if(Yt==="l"?Cn[Yt]=Se._depth=Math.max(sn.height>0?un-sn.left:0,mn):(Cn[Yt]=Se._depth=Math.max(sn.height>0?sn.right-un:0,mn),_r.reverse()),sn.height>0){var An=sn.bottom-(Se._offset+Se._length);An>0&&(Cn.yb=0,Cn.b=An);var Yn=Se._offset-sn.top;Yn>0&&(Cn.yt=1,Cn.t=Yn)}Cn[or]=Se.anchor==="free"?Se.position:Se._anchorAxis.domain[_r[0]],Se.title.text!==xt._dfltTitle[Xt]&&(Cn[Yt]+=Zt(Se)+(Se.title.standoff||0)),Se.mirror&&Se.anchor!=="free"&&(Tn={x:0,y:0,r:0,l:0,t:0,b:0},Tn[gr]=Se.linewidth,Se.mirror&&Se.mirror!==!0&&(Tn[gr]+=mn),Se.mirror===!0||Se.mirror==="ticks"?Tn[or]=Se._anchorAxis.domain[_r[1]]:(Se.mirror==="all"||Se.mirror==="allticks")&&(Tn[or]=[Se._counterDomainMin,Se._counterDomainMax][_r[1]]))}yi&&(gn=T.getComponentMethod("rangeslider","autoMarginOpts")(Pe,Se)),typeof Se.automargin=="string"&&(Ge(Cn,Se.automargin),Ge(Tn,Se.automargin)),A.autoMargin(Pe,st(Se),Cn),A.autoMargin(Pe,rr(Se),Tn),A.autoMargin(Pe,$t(Se),gn)}),!ot.skipTitle&&!(yi&&Se.side==="bottom")&&Qn.push(function(){return Wt(Pe,Se)}),e.syncOrAsync(Qn)}};function Ge(Pe,Se){if(!!Pe){var ot=Object.keys(G).reduce(function(ct,pt){return Se.indexOf(pt)!==-1&&G[pt].forEach(function(St){ct[St]=1}),ct},{});Object.keys(Pe).forEach(function(ct){ot[ct]||(ct.length===1?Pe[ct]=0:delete Pe[ct])})}}function Ke(Pe,Se){var ot=[],ct,pt=function(St,xt){var Pt=St.xbnd[xt];Pt!==null&&ot.push(e.extendFlat({},St,{x:Pt}))};if(Se.length){for(ct=0;ct<Se.length;ct++)pt(Se[ct],0);pt(Se[ct-1],1)}return ot}function qe(Pe,Se){for(var ot=[],ct={},pt=0;pt<Se.length;pt++){var St=Se[pt];ct[St.text2]?ct[St.text2].push(St.x):ct[St.text2]=[St.x]}for(var xt in ct)ot.push(dt(Pe,e.interp(ct[xt],.5),xt));return ot}function At(Pe,Se){var ot=[],ct,pt,St=Se.length&&Se[Se.length-1].x<Se[0].x,xt=function(Xt,or){var Pr=Xt.xbnd[or];Pr!==null&&ot.push(e.extendFlat({},Xt,{x:Pr}))};if(Pe.showdividers&&Se.length){for(ct=0;ct<Se.length;ct++){var Pt=Se[ct];Pt.text2!==pt&&xt(Pt,St?1:0),pt=Pt.text2}xt(Se[ct-1],St?0:1)}return ot}function mt(Pe,Se){var ot,ct,pt,St;return Pe._selections[Se].size()?(ot=1/0,ct=-1/0,pt=1/0,St=-1/0,Pe._selections[Se].each(function(){var xt=qr(this),Pt=v.bBox(xt.node().parentNode);ot=Math.min(ot,Pt.top),ct=Math.max(ct,Pt.bottom),pt=Math.min(pt,Pt.left),St=Math.max(St,Pt.right)})):(ot=0,ct=0,pt=0,St=0),{top:ot,bottom:ct,left:pt,right:St,height:ct-ot,width:St-pt}}K.getTickSigns=function(Pe,Se){var ot=Pe._id.charAt(0),ct={x:"top",y:"right"}[ot],pt=Pe.side===ct?1:-1,St=[-1,1,pt,-pt],xt=Se?(Pe.minor||{}).ticks:Pe.ticks;return xt!=="inside"==(ot==="x")&&(St=St.map(function(Pt){return-Pt})),Pe.side&&St.push({l:-1,t:-1,r:1,b:1}[Pe.side.charAt(0)]),St},K.makeTransTickFn=function(Pe){return Pe._id.charAt(0)==="x"?function(Se){return a(Pe._offset+Pe.l2p(Se.x),0)}:function(Se){return a(0,Pe._offset+Pe.l2p(Se.x))}},K.makeTransTickLabelFn=function(Pe){var Se=Gt(Pe),ot=Se[0],ct=Se[1];return Pe._id.charAt(0)==="x"?function(pt){return a(ot+Pe._offset+Pe.l2p(Mt(pt)),ct)}:function(pt){return a(ct,ot+Pe._offset+Pe.l2p(Mt(pt)))}};function Mt(Pe){return Pe.periodX!==void 0?Pe.periodX:Pe.x}function Gt(Pe){var Se=Pe.ticklabelposition||"",ot=function(Jr){return Se.indexOf(Jr)!==-1},ct=ot("top"),pt=ot("left"),St=ot("right"),xt=ot("bottom"),Pt=ot("inside"),Xt=xt||pt||ct||St;if(!Xt&&!Pt)return[0,0];var or=Pe.side,Pr=Xt?(Pe.tickwidth||0)/2:0,Ar=he,Er=Pe.tickfont?Pe.tickfont.size:12;return(xt||ct)&&(Pr+=Er*j,Ar+=(Pe.linewidth||0)/2),(pt||St)&&(Pr+=(Pe.linewidth||0)/2,Ar+=he),Pt&&or==="top"&&(Ar-=Er*(1-j)),(pt||ct)&&(Pr=-Pr),(or==="bottom"||or==="right")&&(Ar=-Ar),[Xt?Pr:0,Pt?Ar:0]}K.makeTickPath=function(Pe,Se,ot,ct){ct||(ct={});var pt=ct.minor;if(pt&&!Pe.minor)return"";var St=ct.len!==void 0?ct.len:pt?Pe.minor.ticklen:Pe.ticklen,xt=Pe._id.charAt(0),Pt=(Pe.linewidth||1)/2;return xt==="x"?"M0,"+(Se+Pt*ot)+"v"+St*ot:"M"+(Se+Pt*ot)+",0h"+St*ot},K.makeLabelFns=function(Pe,Se,ot){var ct=Pe.ticklabelposition||"",pt=function(kn){return ct.indexOf(kn)!==-1},St=pt("top"),xt=pt("left"),Pt=pt("right"),Xt=pt("bottom"),or=Xt||xt||St||Pt,Pr=pt("inside"),Ar=ct==="inside"&&Pe.ticks==="inside"||!Pr&&Pe.ticks==="outside"&&Pe.tickson!=="boundaries",Er=0,Jr=0,lr=Ar?Pe.ticklen:0;if(Pr?lr*=-1:or&&(lr=0),Ar&&(Er+=lr,ot)){var br=e.deg2rad(ot);Er=lr*Math.cos(br)+1,Jr=lr*Math.sin(br)}Pe.showticklabels&&(Ar||Pe.showline)&&(Er+=.2*Pe.tickfont.size),Er+=(Pe.linewidth||1)/2*(Pr?-1:1);var Fr={labelStandoff:Er,labelShift:Jr},Hr,Lr,at,Rt,Kt=0,ur=Pe.side,Nr=Pe._id.charAt(0),Vr=Pe.tickangle,Dr;if(Nr==="x")Dr=!Pr&&ur==="bottom"||Pr&&ur==="top",Rt=Dr?1:-1,Pr&&(Rt*=-1),Hr=Jr*Rt,Lr=Se+Er*Rt,at=Dr?1:-.2,Math.abs(Vr)===90&&(Pr?at+=ee:Vr===-90&&ur==="bottom"?at=j:Vr===90&&ur==="top"?at=ee:at=.5,Kt=ee/2*(Vr/90)),Fr.xFn=function(kn){return kn.dx+Hr+Kt*kn.fontSize},Fr.yFn=function(kn){return kn.dy+Lr+kn.fontSize*at},Fr.anchorFn=function(kn,yn){if(or){if(xt)return"end";if(Pt)return"start"}return!c(yn)||yn===0||yn===180?"middle":yn*Rt<0!==Pr?"end":"start"},Fr.heightFn=function(kn,yn,Wn){return yn<-60||yn>60?-.5*Wn:Pe.side==="top"!==Pr?-Wn:0};else if(Nr==="y"){if(Dr=!Pr&&ur==="left"||Pr&&ur==="right",Rt=Dr?1:-1,Pr&&(Rt*=-1),Hr=Er,Lr=Jr*Rt,at=0,!Pr&&Math.abs(Vr)===90&&(Vr===-90&&ur==="left"||Vr===90&&ur==="right"?at=j:at=.5),Pr){var Mr=c(Vr)?+Vr:0;if(Mr!==0){var jr=e.deg2rad(Mr);Kt=Math.abs(Math.sin(jr))*j*Rt,at=0}}Fr.xFn=function(kn){return kn.dx+Se-(Hr+kn.fontSize*at)*Rt+Kt*kn.fontSize},Fr.yFn=function(kn){return kn.dy+Lr+kn.fontSize*ee},Fr.anchorFn=function(kn,yn){return c(yn)&&Math.abs(yn)===90?"middle":Dr?"end":"start"},Fr.heightFn=function(kn,yn,Wn){return Pe.side==="right"&&(yn*=-1),yn<-30?-Wn:yn<30?-.5*Wn:0}}return Fr};function zt(Pe){return[Pe.text,Pe.x,Pe.axInfo,Pe.font,Pe.fontSize,Pe.fontColor].join("_")}K.drawTicks=function(Pe,Se,ot){ot=ot||{};var ct=Se._id+"tick",pt=[].concat(Se.minor&&Se.minor.ticks?ot.vals.filter(function(xt){return xt.minor&&!xt.noTick}):[]).concat(Se.ticks?ot.vals.filter(function(xt){return!xt.minor&&!xt.noTick}):[]),St=ot.layer.selectAll("path."+ct).data(pt,zt);St.exit().remove(),St.enter().append("path").classed(ct,1).classed("ticks",1).classed("crisp",ot.crisp!==!1).each(function(xt){return r.stroke(y.select(this),xt.minor?Se.minor.tickcolor:Se.tickcolor)}).style("stroke-width",function(xt){return v.crispRound(Pe,xt.minor?Se.minor.tickwidth:Se.tickwidth,1)+"px"}).attr("d",ot.path).style("display",null),Vt(Se,[O]),St.attr("transform",ot.transFn)},K.drawGrid=function(Pe,Se,ot){ot=ot||{};var ct=Se._id+"grid",pt=Se.minor&&Se.minor.showgrid,St=pt?ot.vals.filter(function(Hr){return Hr.minor}):[],xt=Se.showgrid?ot.vals.filter(function(Hr){return!Hr.minor}):[],Pt=ot.counterAxis;if(Pt&&K.shouldShowZeroLine(Pe,Se,Pt))for(var Xt=Se.tickmode==="array",or=0;or<xt.length;or++){var Pr=xt[or].x;if(Xt?!Pr:Math.abs(Pr)<Se.dtick/100)if(xt=xt.slice(0,or).concat(xt.slice(or+1)),Xt)or--;else break}Se._gw=v.crispRound(Pe,Se.gridwidth,1);for(var Ar=pt?v.crispRound(Pe,Se.minor.gridwidth,1):0,Er=ot.layer,Jr=ot.minorLayer,lr=1;lr>=0;lr--){var br=lr?Er:Jr;if(!!br){var Fr=br.selectAll("path."+ct).data(lr?xt:St,zt);Fr.exit().remove(),Fr.enter().append("path").classed(ct,1).classed("crisp",ot.crisp!==!1),Fr.attr("transform",ot.transFn).attr("d",ot.path).each(function(Hr){return r.stroke(y.select(this),Hr.minor?Se.minor.gridcolor:Se.gridcolor||"#ddd")}).style("stroke-dasharray",function(Hr){return v.dashStyle(Hr.minor?Se.minor.griddash:Se.griddash,Hr.minor?Se.minor.gridwidth:Se.gridwidth)}).style("stroke-width",function(Hr){return(Hr.minor?Ar:Se._gw)+"px"}).style("display",null),typeof ot.path=="function"&&Fr.attr("d",ot.path)}}Vt(Se,[D,R])},K.drawZeroLine=function(Pe,Se,ot){ot=ot||ot;var ct=Se._id+"zl",pt=K.shouldShowZeroLine(Pe,Se,ot.counterAxis),St=ot.layer.selectAll("path."+ct).data(pt?[{x:0,id:Se._id}]:[]);St.exit().remove(),St.enter().append("path").classed(ct,1).classed("zl",1).classed("crisp",ot.crisp!==!1).each(function(){ot.layer.selectAll("path").sort(function(xt,Pt){return H(xt.id,Pt.id)})}),St.attr("transform",ot.transFn).attr("d",ot.path).call(r.stroke,Se.zerolinecolor||r.defaultLine).style("stroke-width",v.crispRound(Pe,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),Vt(Se,[I])},K.drawLabels=function(Pe,Se,ot){ot=ot||{};var ct=Pe._fullLayout,pt=Se._id,St=pt.charAt(0),xt=ot.cls||pt+"tick",Pt=ot.vals.filter(function(Rt){return Rt.text}),Xt=ot.labelFns,or=ot.secondary?0:Se.tickangle,Pr=(Se._prevTickAngles||{})[xt],Ar=ot.layer.selectAll("g."+xt).data(Se.showticklabels?Pt:[],zt),Er=[];Ar.enter().append("g").classed(xt,1).append("text").attr("text-anchor","middle").each(function(Rt){var Kt=y.select(this),ur=Pe._promises.length;Kt.call(i.positionText,Xt.xFn(Rt),Xt.yFn(Rt)).call(v.font,Rt.font,Rt.fontSize,Rt.fontColor).text(Rt.text).call(i.convertToTspans,Pe),Pe._promises[ur]?Er.push(Pe._promises.pop().then(function(){Jr(Kt,or)})):Jr(Kt,or)}),Vt(Se,[z]),Ar.exit().remove(),ot.repositionOnUpdate&&Ar.each(function(Rt){y.select(this).select("text").call(i.positionText,Xt.xFn(Rt),Xt.yFn(Rt))});function Jr(Rt,Kt){Rt.each(function(ur){var Nr=y.select(this),Vr=Nr.select(".text-math-group"),Dr=Xt.anchorFn(ur,Kt),Mr=ot.transFn.call(Nr.node(),ur)+(c(Kt)&&+Kt!=0?" rotate("+Kt+","+Xt.xFn(ur)+","+(Xt.yFn(ur)-ur.fontSize/2)+")":""),jr=i.lineCount(Nr),kn=X*ur.fontSize,yn=Xt.heightFn(ur,c(Kt)?+Kt:0,(jr-1)*kn);if(yn&&(Mr+=a(0,yn)),Vr.empty()){var Wn=Nr.select("text");Wn.attr({transform:Mr,"text-anchor":Dr}),Wn.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var In=v.bBox(Vr.node()).width,$n=In*{end:-.5,start:.5}[Dr];Vr.attr("transform",Mr+a($n,0))}})}Se._adjustTickLabelsOverflow=function(){var Rt=Se.ticklabeloverflow;if(!(!Rt||Rt==="allow")){var Kt=Rt.indexOf("hide")!==-1,ur=Se._id.charAt(0)==="x",Nr=0,Vr=ur?Pe._fullLayout.width:Pe._fullLayout.height;if(Rt.indexOf("domain")!==-1){var Dr=e.simpleMap(Se.range,Se.r2l);Nr=Se.l2p(Dr[0])+Se._offset,Vr=Se.l2p(Dr[1])+Se._offset}var Mr=Math.min(Nr,Vr),jr=Math.max(Nr,Vr),kn=Se.side,yn=1/0,Wn=-1/0;Ar.each(function(ya){var Ra=y.select(this),_i=Ra.select(".text-math-group");if(_i.empty()){var Ka=v.bBox(Ra.node()),ri=0;ur?(Ka.right>jr||Ka.left<Mr)&&(ri=1):(Ka.bottom>jr||Ka.top+(Se.tickangle?0:ya.fontSize/4)<Mr)&&(ri=1);var ei=Ra.select("text");ri?Kt&&ei.style("opacity",0):(ei.style("opacity",1),kn==="bottom"||kn==="right"?yn=Math.min(yn,ur?Ka.top:Ka.left):yn=-1/0,kn==="top"||kn==="left"?Wn=Math.max(Wn,ur?Ka.bottom:Ka.right):Wn=1/0)}});for(var In in ct._plots){var $n=ct._plots[In];if(!(Se._id!==$n.xaxis._id&&Se._id!==$n.yaxis._id)){var Kn=ur?$n.yaxis:$n.xaxis;Kn&&(Kn["_visibleLabelMin_"+Se._id]=yn,Kn["_visibleLabelMax_"+Se._id]=Wn)}}}},Se._hideCounterAxisInsideTickLabels=function(Rt){var Kt=Se._id.charAt(0)==="x",ur=[];for(var Nr in ct._plots){var Vr=ct._plots[Nr];Se._id!==Vr.xaxis._id&&Se._id!==Vr.yaxis._id||ur.push(Kt?Vr.yaxis:Vr.xaxis)}ur.forEach(function(Dr,Mr){Dr&&Et(Dr)&&(Rt||[I,R,D,O,z]).forEach(function(jr){var kn=jr.K==="tick"&&jr.L==="text"&&Se.ticklabelmode==="period",yn=ct._plots[Se._mainSubplot],Wn;jr.K===I.K?Wn=yn.zerolinelayer.selectAll("."+Se._id+"zl"):jr.K===R.K?Wn=yn.minorGridlayer.selectAll("."+Se._id):jr.K===D.K?Wn=yn.gridlayer.selectAll("."+Se._id):Wn=yn[Se._id.charAt(0)+"axislayer"],Wn.each(function(){var In=y.select(this);jr.L&&(In=In.selectAll(jr.L)),In.each(function($n){var Kn=Se.l2p(kn?Mt($n):$n.x)+Se._offset,ya=y.select(this);Kn<Se["_visibleLabelMax_"+Dr._id]&&Kn>Se["_visibleLabelMin_"+Dr._id]?ya.style("display","none"):jr.K==="tick"&&!Mr&&ya.style("display",null)})})})})},Jr(Ar,Pr+1?Pr:or);function lr(){return Er.length&&Promise.all(Er)}var br=null;function Fr(){if(Jr(Ar,or),Pt.length&&St==="x"&&!c(or)&&(Se.type!=="log"||String(Se.dtick).charAt(0)!=="D")){br=0;var Rt=0,Kt=[],ur;if(Ar.each(function(Ka){Rt=Math.max(Rt,Ka.fontSize);var ri=Se.l2p(Ka.x),ei=qr(this),kr=v.bBox(ei.node());Kt.push({top:0,bottom:10,height:10,left:ri-kr.width/2,right:ri+kr.width/2+2,width:kr.width+2})}),(Se.tickson==="boundaries"||Se.showdividers)&&!ot.secondary){var Nr=2;for(Se.ticks&&(Nr+=Se.tickwidth/2),ur=0;ur<Kt.length;ur++){var Vr=Pt[ur].xbnd,Dr=Kt[ur];if(Vr[0]!==null&&Dr.left-Se.l2p(Vr[0])<Nr||Vr[1]!==null&&Se.l2p(Vr[1])-Dr.right<Nr){br=90;break}}}else{var Mr=Pt.length,jr=Math.abs((Pt[Mr-1].x-Pt[0].x)*Se._m)/(Mr-1),kn=Se.ticklabelposition||"",yn=function(Ka){return kn.indexOf(Ka)!==-1},Wn=yn("top"),In=yn("left"),$n=yn("right"),Kn=yn("bottom"),ya=Kn||In||Wn||$n,Ra=ya?(Se.tickwidth||0)+2*he:0,_i=jr<Rt*2.5||Se.type==="multicategory"||Se._name==="realaxis";for(ur=0;ur<Kt.length-1;ur++)if(e.bBoxIntersect(Kt[ur],Kt[ur+1],Ra)){br=_i?90:30;break}}br&&Jr(Ar,br)}}Se._selections&&(Se._selections[xt]=Ar);var Hr=[lr];Se.automargin&&ct._redrawFromAutoMarginCount&&Pr===90?(br=90,Hr.push(function(){Jr(Ar,Pr)})):Hr.push(Fr),Se._tickAngles&&Hr.push(function(){Se._tickAngles[xt]=br===null?c(or)?or:0:br});var Lr=Se._anchorAxis;Lr&&Lr.autorange&&Et(Se)&&!q(ct,Se._id)&&(ct._insideTickLabelsAutorange||(ct._insideTickLabelsAutorange={}),ct._insideTickLabelsAutorange[Lr._name+".autorange"]=Lr.autorange,Hr.push(function(){Ar.each(function(Kt,ur){var Nr=qr(this),Vr=Nr.select(".text-math-group");Vr.empty()&&(Se._vals[ur].bb=v.bBox(Nr.node()))})}));var at=e.syncOrAsync(Hr);return at&&at.then&&Pe._promises.push(at),at};function Ht(Pe,Se,ot){var ct=Se._id+"divider",pt=ot.vals,St=ot.layer.selectAll("path."+ct).data(pt,zt);St.exit().remove(),St.enter().insert("path",":first-child").classed(ct,1).classed("crisp",1).call(r.stroke,Se.dividercolor).style("stroke-width",v.crispRound(Pe,Se.dividerwidth,1)+"px"),St.attr("transform",ot.transFn).attr("d",ot.path)}K.getPxPosition=function(Pe,Se){var ot=Pe._fullLayout._size,ct=Se._id.charAt(0),pt=Se.side,St;if(Se.anchor!=="free"?St=Se._anchorAxis:ct==="x"?St={_offset:ot.t+(1-(Se.position||0))*ot.h,_length:0}:ct==="y"&&(St={_offset:ot.l+(Se.position||0)*ot.w,_length:0}),pt==="top"||pt==="left")return St._offset;if(pt==="bottom"||pt==="right")return St._offset+St._length};function Zt(Pe){var Se=Pe.title.font.size,ot=(Pe.title.text.match(i.BR_TAG_ALL)||[]).length;return Pe.title.hasOwnProperty("standoff")?ot?Se*(j+ot*X):Se*j:ot?Se*(ot+1)*X:Se}function Wt(Pe,Se){var ot=Pe._fullLayout,ct=Se._id,pt=ct.charAt(0),St=Se.title.font.size,xt;if(Se.title.hasOwnProperty("standoff"))xt=Se._depth+Se.title.standoff+Zt(Se);else{var Pt=Et(Se);if(Se.type==="multicategory")xt=Se._depth;else{var Xt=1.5*St;Pt&&(Xt=.5*St,Se.ticks==="outside"&&(Xt+=Se.ticklen)),xt=10+Xt+(Se.linewidth?Se.linewidth-1:0)}Pt||(pt==="x"?xt+=Se.side==="top"?St*(Se.showticklabels?1:0):St*(Se.showticklabels?1.5:.5):xt+=Se.side==="right"?St*(Se.showticklabels?1:.5):St*(Se.showticklabels?.5:0))}var or=K.getPxPosition(Pe,Se),Pr,Ar,Er;pt==="x"?(Ar=Se._offset+Se._length/2,Er=Se.side==="top"?or-xt:or+xt):(Er=Se._offset+Se._length/2,Ar=Se.side==="right"?or+xt:or-xt,Pr={rotate:"-90",offset:0});var Jr;if(Se.type!=="multicategory"){var lr=Se._selections[Se._id+"tick"];if(Jr={selection:lr,side:Se.side},lr&&lr.node()&&lr.node().parentNode){var br=v.getTranslate(lr.node().parentNode);Jr.offsetLeft=br.x,Jr.offsetTop=br.y}Se.title.hasOwnProperty("standoff")&&(Jr.pad=0)}return n.draw(Pe,ct+"title",{propContainer:Se,propName:Se._name+".title.text",placeholder:ot._dfltTitle[pt],avoid:Jr,transform:Pr,attributes:{x:Ar,y:Er,"text-anchor":"middle"}})}K.shouldShowZeroLine=function(Pe,Se,ot){var ct=e.simpleMap(Se.range,Se.r2l);return ct[0]*ct[1]<=0&&Se.zeroline&&(Se.type==="linear"||Se.type==="-")&&!(Se.rangebreaks&&Se.maskBreaks(0)===F)&&(sr(Se,0)||!Gr(Pe,Se,ot,ct)||cn(Pe,Se))},K.clipEnds=function(Pe,Se){return Se.filter(function(ot){return sr(Pe,ot.x)})};function sr(Pe,Se){var ot=Pe.l2p(Se);return ot>1&&ot<Pe._length-1}function Gr(Pe,Se,ot,ct){var pt=ot._mainAxis;if(!pt)return;var St=Pe._fullLayout,xt=Se._id.charAt(0),Pt=K.counterLetter(Se._id),Xt=Se._offset+(Math.abs(ct[0])<Math.abs(ct[1])==(xt==="x")?0:Se._length);function or(lr){if(!lr.showline||!lr.linewidth)return!1;var br=Math.max((lr.linewidth+Se.zerolinewidth)/2,1);function Fr(at){return typeof at=="number"&&Math.abs(at-Xt)<br}if(Fr(lr._mainLinePosition)||Fr(lr._mainMirrorPosition))return!0;var Hr=lr._linepositions||{};for(var Lr in Hr)if(Fr(Hr[Lr][0])||Fr(Hr[Lr][1]))return!0}var Pr=St._plots[ot._mainSubplot];if(!(Pr.mainplotinfo||Pr).overlays.length)return or(ot);for(var Ar=K.list(Pe,Pt),Er=0;Er<Ar.length;Er++){var Jr=Ar[Er];if(Jr._mainAxis===pt&&or(Jr))return!0}}function cn(Pe,Se){for(var ot=Pe._fullData,ct=Se._mainSubplot,pt=Se._id.charAt(0),St=0;St<ot.length;St++){var xt=ot[St];if(xt.visible===!0&&xt.xaxis+xt.yaxis===ct&&(T.traceIs(xt,"bar-like")&&xt.orientation==={x:"h",y:"v"}[pt]||xt.fill&&xt.fill.charAt(xt.fill.length-1)===pt))return!0}return!1}function qr(Pe){var Se=y.select(Pe),ot=Se.select(".text-math-group");return ot.empty()?Se.select("text"):ot}K.allowAutoMargin=function(Pe){for(var Se=K.list(Pe,"",!0),ot=0;ot<Se.length;ot++){var ct=Se[ot];ct.automargin&&(A.allowAutoMargin(Pe,st(ct)),ct.mirror&&A.allowAutoMargin(Pe,rr(ct))),T.getComponentMethod("rangeslider","isVisible")(ct)&&A.allowAutoMargin(Pe,$t(ct))}};function st(Pe){return Pe._id+".automargin"}function rr(Pe){return st(Pe)+".mirror"}function $t(Pe){return Pe._id+".rangeslider"}K.swap=function(Pe,Se){for(var ot=hr(Pe,Se),ct=0;ct<ot.length;ct++)tt(Pe,ot[ct].x,ot[ct].y)};function hr(Pe,Se){var ot=[],ct,pt;for(ct=0;ct<Se.length;ct++){var St=[],xt=Pe._fullData[Se[ct]].xaxis,Pt=Pe._fullData[Se[ct]].yaxis;if(!(!xt||!Pt)){for(pt=0;pt<ot.length;pt++)(ot[pt].x.indexOf(xt)!==-1||ot[pt].y.indexOf(Pt)!==-1)&&St.push(pt);if(!St.length){ot.push({x:[xt],y:[Pt]});continue}var Xt=ot[St[0]],or;if(St.length>1)for(pt=1;pt<St.length;pt++)or=ot[St[pt]],Sr(Xt.x,or.x),Sr(Xt.y,or.y);Sr(Xt.x,[xt]),Sr(Xt.y,[Pt])}}return ot}function Sr(Pe,Se){for(var ot=0;ot<Se.length;ot++)Pe.indexOf(Se[ot])===-1&&Pe.push(Se[ot])}function tt(Pe,Se,ot){var ct=[],pt=[],St=Pe.layout,xt,Pt;for(xt=0;xt<Se.length;xt++)ct.push(K.getFromId(Pe,Se[xt]));for(xt=0;xt<ot.length;xt++)pt.push(K.getFromId(Pe,ot[xt]));var Xt=Object.keys(s),or=["anchor","domain","overlaying","position","side","tickangle","editType"],Pr=["linear","log"];for(xt=0;xt<Xt.length;xt++){var Ar=Xt[xt],Er=ct[0][Ar],Jr=pt[0][Ar],lr=!0,br=!1,Fr=!1;if(!(Ar.charAt(0)==="_"||typeof Er=="function"||or.indexOf(Ar)!==-1)){for(Pt=1;Pt<ct.length&&lr;Pt++){var Hr=ct[Pt][Ar];Ar==="type"&&Pr.indexOf(Er)!==-1&&Pr.indexOf(Hr)!==-1&&Er!==Hr?br=!0:Hr!==Er&&(lr=!1)}for(Pt=1;Pt<pt.length&&lr;Pt++){var Lr=pt[Pt][Ar];Ar==="type"&&Pr.indexOf(Jr)!==-1&&Pr.indexOf(Lr)!==-1&&Jr!==Lr?Fr=!0:pt[Pt][Ar]!==Jr&&(lr=!1)}lr&&(br&&(St[ct[0]._name].type="linear"),Fr&&(St[pt[0]._name].type="linear"),Qe(St,Ar,ct,pt,Pe._fullLayout._dfltTitle))}}for(xt=0;xt<Pe._fullLayout.annotations.length;xt++){var at=Pe._fullLayout.annotations[xt];Se.indexOf(at.xref)!==-1&&ot.indexOf(at.yref)!==-1&&e.swapAttrs(St.annotations[xt],["?"])}}function Qe(Pe,Se,ot,ct,pt){var St=e.nestedProperty,xt=St(Pe[ot[0]._name],Se).get(),Pt=St(Pe[ct[0]._name],Se).get(),Xt;for(Se==="title"&&(xt&&xt.text===pt.x&&(xt.text=pt.y),Pt&&Pt.text===pt.y&&(Pt.text=pt.x)),Xt=0;Xt<ot.length;Xt++)St(Pe,ot[Xt]._name+"."+Se).set(Pt);for(Xt=0;Xt<ct.length;Xt++)St(Pe,ct[Xt]._name+"."+Se).set(xt)}function lt(Pe){return Pe._id==="angularaxis"}function ft(Pe,Se){for(var ot=Se._rangebreaks.length,ct=0;ct<ot;ct++){var pt=Se._rangebreaks[ct];if(Pe>=pt.min&&Pe<pt.max)return pt.max}return Pe}function Et(Pe){return(Pe.ticklabelposition||"").indexOf("inside")!==-1}function Vt(Pe,Se){Et(Pe._anchorAxis||{})&&Pe._hideCounterAxisInsideTickLabels&&Pe._hideCounterAxisInsideTickLabels(Se)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../constants/numerical").BADNUM,T=c.isArrayOrTypedArray,e=c.isDateTime,a=c.cleanNumber,i=Math.round;N.exports=function(d,f,m){var l=d,x=m.noMultiCategory;if(T(l)&&!l.length)return"-";if(!x&&b(l))return"multicategory";if(x&&Array.isArray(l[0])){for(var u=[],M=0;M<l.length;M++)if(T(l[M]))for(var w=0;w<l[M].length;w++)u.push(l[M][w]);l=u}if(v(l,f))return"date";var p=m.autotypenumbers!=="strict";return o(l,p)?"category":r(l,p)?"linear":"-"};function n(g,d){return d?y(g):typeof g=="number"}function r(g,d){for(var f=g.length,m=0;m<f;m++)if(n(g[m],d))return!0;return!1}function v(g,d){for(var f=g.length,m=s(f),l=0,x=0,u={},M=0;M<f;M+=m){var w=i(M),p=g[w],_=String(p);u[_]||(u[_]=1,e(p,d)&&l++,y(p)&&x++)}return l>x*2}function s(g){return Math.max(1,(g-1)/1e3)}function o(g,d){for(var f=g.length,m=s(f),l=0,x=0,u={},M=0;M<f;M+=m){var w=i(M),p=g[w],_=String(p);if(!u[_]){u[_]=1;var h=typeof p;h==="boolean"?x++:(d?a(p)!==A:h==="number")?l++:h==="string"&&x++}}return x>l*2}function b(g){return T(g[0])&&T(g[1])}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../registry"),A=t("../../lib"),T=t("../../plot_api/plot_template"),e=t("../array_container_defaults"),a=t("./layout_attributes"),i=t("./tick_value_defaults"),n=t("./tick_mark_defaults"),r=t("./tick_label_defaults"),v=t("./prefix_suffix_defaults"),s=t("./category_order_defaults"),o=t("./line_grid_defaults"),b=t("./set_convert"),g=t("./constants").WEEKDAY_PATTERN,d=t("./constants").HOUR_PATTERN;N.exports=function(u,M,w,p,_){var h=p.letter,L=p.font||{},E=p.splomStash||{},S=w("visible",!p.visibleDflt),P=M._template||{},F=M.type||P.type||"-",I;if(F==="date"){var D=c.getComponentMethod("calendars","handleDefaults");D(u,M,"calendar",p.calendar),p.noTicklabelmode||(I=w("ticklabelmode"))}var R="";(!p.noTicklabelposition||F==="multicategory")&&(R=A.coerce(u,M,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:h==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),p.noTicklabeloverflow||w("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":F==="category"||F==="multicategory"?"allow":"hide past div"),b(M,_);var O=!M.isValidRange(u.range);O&&p.reverseDflt&&(O="reversed");var z=w("autorange",O);z&&(F==="linear"||F==="-")&&w("rangemode"),w("range"),M.cleanRange(),s(u,M,w,p),F!=="category"&&!p.noHover&&w("hoverformat");var G=w("color"),Y=G!==a.color.dflt?G:L.color,ee=E.label||_._dfltTitle[h];if(v(u,M,w,F,p),!S)return M;w("title.text",ee),A.coerceFont(w,"title.font",{family:L.family,size:A.bigFont(L.size),color:Y}),i(u,M,w,F);var j=p.hasMinor;if(j&&(T.newContainer(M,"minor"),i(u,M,w,F,{isMinor:!0})),r(u,M,w,F,p),n(u,M,w,p),j){var X=p.isMinor;p.isMinor=!0,n(u,M,w,p),p.isMinor=X}o(u,M,w,{dfltColor:G,bgColor:p.bgColor,showGrid:p.showGrid,hasMinor:j,attributes:a}),j&&!M.minor.ticks&&!M.minor.showgrid&&delete M.minor,(M.showline||M.ticks)&&w("mirror"),p.automargin&&w("automargin");var ae=F==="multicategory";if(!p.noTickson&&(F==="category"||ae)&&(M.ticks||M.showgrid)){var he;ae&&(he="boundaries");var K=w("tickson",he);K==="boundaries"&&delete M.ticklabelposition}if(ae){var J=w("showdividers");J&&(w("dividercolor"),w("dividerwidth"))}if(F==="date")if(e(u,M,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),!M.rangebreaks.length)delete M.rangebreaks;else{for(var U=0;U<M.rangebreaks.length;U++)if(M.rangebreaks[U].pattern===g){M._hasDayOfWeekBreaks=!0;break}if(b(M,_),_._has("scattergl")||_._has("splom"))for(var H=0;H<p.data.length;H++){var q=p.data[H];(q.type==="scattergl"||q.type==="splom")&&(q.visible=!1,A.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}return M};function f(x,u,M){function w(I,D){return A.coerce(x,u,a.rangebreaks,I,D)}var p=w("enabled");if(p){var _=w("bounds");if(_&&_.length>=2){var h="",L,E;if(_.length===2){for(L=0;L<2;L++)if(E=l(_[L]),E){h=g;break}}var S=w("pattern",h);if(S===g)for(L=0;L<2;L++)E=l(_[L]),E&&(u.bounds[L]=_[L]=E-1);if(S)for(L=0;L<2;L++)switch(E=_[L],S){case g:if(!y(E)){u.enabled=!1;return}if(E=+E,E!==Math.floor(E)||E<0||E>=7){u.enabled=!1;return}u.bounds[L]=_[L]=E;break;case d:if(!y(E)){u.enabled=!1;return}if(E=+E,E<0||E>24){u.enabled=!1;return}u.bounds[L]=_[L]=E;break}if(M.autorange===!1){var P=M.range;if(P[0]<P[1]){if(_[0]<P[0]&&_[1]>P[1]){u.enabled=!1;return}}else if(_[0]>P[0]&&_[1]<P[1]){u.enabled=!1;return}}}else{var F=w("values");if(F&&F.length)w("dvalue");else{u.enabled=!1;return}}}}var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function l(x){if(typeof x=="string")return m[x.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(t,N,V){var y=t("../../constants/docs"),c=y.FORMAT_LINK,A=y.DATE_FORMAT_LINK;function T(i,n){return{valType:"string",dflt:"",editType:"none",description:(n?e:a)("hover text",i)+["By default the values are formatted using "+(n?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}}function e(i,n){return["Sets the "+i+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+c+"."].join(" ")}function a(i,n){return e(i,n)+[" And for dates see: "+A+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}N.exports={axisHoverFormat:T,descriptionOnlyNumbers:e,descriptionWithDates:a}},{"../../constants/docs":486}],570:[function(t,N,V){var y=t("../../registry"),c=t("./constants");V.id2name=function(e){if(!(typeof e!="string"||!e.match(c.AX_ID_PATTERN))){var a=e.split(" ")[0].substr(1);return a==="1"&&(a=""),e.charAt(0)+"axis"+a}},V.name2id=function(e){if(!!e.match(c.AX_NAME_PATTERN)){var a=e.substr(5);return a==="1"&&(a=""),e.charAt(0)+a}},V.cleanId=function(e,a,i){var n=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(c.AX_ID_PATTERN))&&!(a&&e.charAt(0)!==a)&&!(n&&!i)){var r=e.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),e.charAt(0)+r+(n&&i?" domain":"")}},V.list=function(T,e,a){var i=T._fullLayout;if(!i)return[];var n=V.listIds(T,e),r=new Array(n.length),v;for(v=0;v<n.length;v++){var s=n[v];r[v]=i[s.charAt(0)+"axis"+s.substr(1)]}if(!a){var o=i._subplots.gl3d||[];for(v=0;v<o.length;v++){var b=i[o[v]];e?r.push(b[e+"axis"]):r.push(b.xaxis,b.yaxis,b.zaxis)}}return r},V.listIds=function(T,e){var a=T._fullLayout;if(!a)return[];var i=a._subplots;return e?i[e+"axis"]:i.xaxis.concat(i.yaxis)},V.getFromId=function(T,e,a){var i=T._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),a==="x"?e=e.replace(/y[0-9]*/,""):a==="y"&&(e=e.replace(/x[0-9]*/,"")),i[V.id2name(e)]},V.getFromTrace=function(T,e,a){var i=T._fullLayout,n=null;if(y.traceIs(e,"gl3d")){var r=e.scene;r.substr(0,5)==="scene"&&(n=i[r][a+"axis"])}else n=V.getFromId(T,e[a+"axis"]||a);return n},V.idSort=function(T,e){var a=T.charAt(0),i=e.charAt(0);return a!==i?a>i?1:-1:+(T.substr(1)||1)-+(e.substr(1)||1)},V.ref2id=function(T){return/^[xyz]/.test(T)?T.split(" ")[0]:!1};function A(T,e){if(e&&e.length){for(var a=0;a<e.length;a++)if(e[a][T])return!0}return!1}V.isLinked=function(T,e){return A(e,T._axisMatchGroups)||A(e,T._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(t,N,V){function y(c,A){var T=A.dataAttr||c._id.charAt(0),e={},a,i,n;if(A.axData)a=A.axData;else for(a=[],i=0;i<A.data.length;i++){var r=A.data[i];r[T+"axis"]===c._id&&a.push(r)}for(i=0;i<a.length;i++){var v=a[i][T];for(n=0;n<v.length;n++){var s=v[n];s!=null&&(e[s]=1)}}return Object.keys(e)}N.exports=function(A,T,e,a){if(T.type==="category"){var i=A.categoryarray,n=Array.isArray(i)&&i.length>0,r;n&&(r="array");var v=e("categoryorder",r),s;v==="array"&&(s=e("categoryarray")),!n&&v==="array"&&(v=T.categoryorder="trace"),v==="trace"?T._initialCategories=[]:v==="array"?T._initialCategories=s.slice():(s=y(T,a).sort(),v==="category ascending"?T._initialCategories=s:v==="category descending"&&(T._initialCategories=s.reverse()))}}},{}],572:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../constants/numerical"),T=A.ONEDAY,e=A.ONEWEEK;V.dtick=function(a,i){var n=i==="log",r=i==="date",v=i==="category",s=r?T:1;if(!a)return s;if(y(a))return a=Number(a),a<=0?s:v?Math.max(1,Math.round(a)):r?Math.max(.1,a):a;if(typeof a!="string"||!(r||n))return s;var o=a.charAt(0),b=a.substr(1);return b=y(b)?Number(b):0,b<=0||!(r&&o==="M"&&b===Math.round(b)||n&&o==="L"||n&&o==="D"&&(b===1||b===2))?s:a},V.tick0=function(a,i,n,r){if(i==="date")return c.cleanDate(a,c.dateTick0(n,r%e===0?1:0));if(!(r==="D1"||r==="D2"))return y(a)?Number(a):0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(t,N,V){var y=t("../../lib/regex").counter;N.exports={idRegex:{x:y("x","( domain)?"),y:y("y","( domain)?")},attrRegex:y("[xy]axis"),xAxisMatch:y("xaxis"),yAxisMatch:y("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(t,N,V){var y=t("../../lib"),c=t("./autorange"),A=t("./axis_ids").id2name,T=t("./layout_attributes"),e=t("./scale_zoom"),a=t("./set_convert"),i=t("../../constants/numerical").ALMOST_EQUAL,n=t("../../constants/alignment").FROM_BL;V.handleDefaults=function(f,m,l){var x=l.axIds,u=l.axHasImage,M=m._axisConstraintGroups=[],w=m._axisMatchGroups=[],p,_,h,L,E,S,P,F;for(p=0;p<x.length;p++)L=A(x[p]),E=f[L],S=m[L],r(E,S,{axIds:x,layoutOut:m,hasImage:u[L]});function I(X,ae){for(p=0;p<X.length;p++){_=X[p];for(h in _)m[A(h)][ae]=_}}for(I(w,"_matchGroup"),p=0;p<M.length;p++){_=M[p];for(h in _)if(S=m[A(h)],S.fixedrange){for(var D in _){var R=A(D);(f[R]||{}).fixedrange===!1&&y.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),m[R].fixedrange=!0}break}}for(p=0;p<M.length;){_=M[p];for(h in _){S=m[A(h)],S._matchGroup&&Object.keys(S._matchGroup).length===Object.keys(_).length&&(M.splice(p,1),p--);break}p++}I(M,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],z=!1,G=!1;function Y(){F=S[P],P==="rangebreaks"&&(G=S._hasDayOfWeekBreaks)}for(p=0;p<w.length;p++){_=w[p];for(var ee=0;ee<O.length;ee++){P=O[ee],F=null;var j;for(h in _)if(L=A(h),E=f[L],S=m[L],P in S){if(!S.matches&&(j=S,P in E)){Y();break}F===null&&P in E&&Y()}if(P==="range"&&F&&(z=!0),P==="autorange"&&F===null&&z&&(F=!1),F===null&&P in j&&(F=j[P]),F!==null)for(h in _)S=m[A(h)],S[P]=P==="range"?F.slice():F,P==="rangebreaks"&&(S._hasDayOfWeekBreaks=G,a(S,m))}}};function r(f,m,l){var x=l.axIds,u=l.layoutOut,M=l.hasImage,w=u._axisConstraintGroups,p=u._axisMatchGroups,_=m._id,h=_.charAt(0),L=((u._splomAxes||{})[h]||{})[_]||{},E=m._id,S=E.charAt(0)==="x";m._matchGroup=null,m._constraintGroup=null;function P(J,U){return y.coerce(f,m,T,J,U)}P("constrain",M?"domain":"range"),y.coerce(f,m,{constraintoward:{valType:"enumerated",values:S?["left","center","right"]:["bottom","middle","top"],dflt:S?"center":"middle"}},"constraintoward");var F=m.type,I,D,R=[];for(I=0;I<x.length;I++)if(D=x[I],D!==E){var O=u[A(D)];O.type===F&&R.push(D)}var z=s(w,E);if(z){var G=[];for(I=0;I<R.length;I++)D=R[I],z[D]||G.push(D);R=G}var Y=R.length,ee,j;Y&&(f.matches||L.matches)&&(ee=y.coerce(f,m,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var X=M&&!S?m.anchor:void 0;if(Y&&!ee&&(f.scaleanchor||X)&&(j=y.coerce(f,m,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",X)),ee){m._matchGroup=o(p,E,ee,1);var ae=u[A(ee)],he=v(u,m)/v(u,ae);S!==(ee.charAt(0)==="x")&&(he=(S?"x":"y")+he),o(w,E,ee,he)}else f.matches&&x.indexOf(f.matches)!==-1&&y.warn("ignored "+m._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(j){var K=P("scaleratio");K||(K=m.scaleratio=1),o(w,E,j,K)}else f.scaleanchor&&x.indexOf(f.scaleanchor)!==-1&&y.warn("ignored "+m._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function v(f,m){var l=m.domain;return l||(l=f[A(m.overlaying)].domain),l[1]-l[0]}function s(f,m){for(var l=0;l<f.length;l++)if(f[l][m])return f[l];return null}function o(f,m,l,x){var u,M,w,p,_,h=s(f,m);h===null?(h={},h[m]=1,_=f.length,f.push(h)):_=f.indexOf(h);var L=Object.keys(h);for(u=0;u<f.length;u++)if(w=f[u],u!==_&&w[l]){var E=w[l];for(M=0;M<L.length;M++)p=L[M],w[p]=b(E,b(x,h[p]));f.splice(_,1);return}if(x!==1)for(M=0;M<L.length;M++){var S=L[M];h[S]=b(x,h[S])}h[l]=1}function b(f,m){var l="",x="",u,M;typeof f=="string"&&(l=f.match(/^[xy]*/)[0],u=l.length,f=+f.substr(u)),typeof m=="string"&&(x=m.match(/^[xy]*/)[0],M=x.length,m=+m.substr(M));var w=f*m;return!u&&!M?w:!u||!M||l.charAt(0)===x.charAt(0)?l+x+f*m:u===M?w:(u>M?l.substr(M):x.substr(u))+w}function g(f,m){for(var l=m._size,x=l.h/l.w,u={},M=Object.keys(f),w=0;w<M.length;w++){var p=M[w],_=f[p];if(typeof _=="string"){var h=_.match(/^[xy]*/)[0],L=h.length;_=+_.substr(L);for(var E=h.charAt(0)==="y"?x:1/x,S=0;S<L;S++)_*=E}u[p]=_}return u}V.enforce=function(m){var l=m._fullLayout,x=l._axisConstraintGroups||[],u,M,w,p,_,h,L,E;for(u=0;u<x.length;u++){w=g(x[u],l);var S=Object.keys(w),P=1/0,F=0,I=1/0,D={},R={},O=!1;for(M=0;M<S.length;M++)p=S[M],R[p]=_=l[A(p)],_._inputDomain?_.domain=_._inputDomain.slice():_._inputDomain=_.domain.slice(),_._inputRange||(_._inputRange=_.range.slice()),_.setScale(),D[p]=h=Math.abs(_._m)/w[p],P=Math.min(P,h),(_.constrain==="domain"||!_._constraintShrinkable)&&(I=Math.min(I,h)),delete _._constraintShrinkable,F=Math.max(F,h),_.constrain==="domain"&&(O=!0);if(!(P>i*F&&!O)){for(M=0;M<S.length;M++)if(p=S[M],h=D[p],_=R[p],L=_.constrain,h!==I||L==="domain")if(E=h/I,L==="range")e(_,E);else{var z=_._inputDomain,G=(_.domain[1]-_.domain[0])/(z[1]-z[0]),Y=(_.r2l(_.range[1])-_.r2l(_.range[0]))/(_.r2l(_._inputRange[1])-_.r2l(_._inputRange[0]));if(E/=G,E*Y<1){_.domain=_._input.domain=z.slice(),e(_,E);continue}if(Y<1&&(_.range=_._input.range=_._inputRange.slice(),E*=Y),_.autorange){var ee=_.r2l(_.range[0]),j=_.r2l(_.range[1]),X=(ee+j)/2,ae=X,he=X,K=Math.abs(j-X),J=X-K*E*1.0001,U=X+K*E*1.0001,H=c.makePadFn(l,_,0),q=c.makePadFn(l,_,1);d(_,E);var re=Math.abs(_._m),Z=c.concatExtremes(m,_),Q=Z.min,ie=Z.max,oe,ne;for(ne=0;ne<Q.length;ne++)oe=Q[ne].val-H(Q[ne])/re,oe>J&&oe<ae&&(ae=oe);for(ne=0;ne<ie.length;ne++)oe=ie[ne].val+q(ie[ne])/re,oe<U&&oe>he&&(he=oe);var le=(he-ae)/(2*K);E/=le,ae=_.l2r(ae),he=_.l2r(he),_.range=_._input.range=ee<j?[ae,he]:[he,ae]}d(_,E)}}}},V.getAxisGroup=function(m,l){for(var x=m._axisMatchGroups,u=0;u<x.length;u++){var M=x[u];if(M[l])return"g"+u}return l},V.clean=function(m,l){if(l._inputDomain){for(var x=!1,u=l._id,M=m._fullLayout._axisConstraintGroups,w=0;w<M.length;w++)if(M[w][u]){x=!0;break}(!x||l.constrain!=="domain")&&(l._input.domain=l.domain=l._inputDomain,delete l._inputDomain)}};function d(f,m){var l=f._inputDomain,x=n[f.constraintoward],u=l[0]+(l[1]-l[0])*x;f.domain=f._input.domain=[u+(l[0]-u)/m,u+(l[1]-u)/m],f.setScale()}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=c.numberFormat,T=t("tinycolor2"),e=t("has-passive-events"),a=t("../../registry"),i=c.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/color"),v=t("../../components/drawing"),s=t("../../components/fx"),o=t("./axes"),b=t("../../lib/setcursor"),g=t("../../components/dragelement"),d=t("../../components/dragelement/helpers"),f=d.selectingOrDrawing,m=d.freeMode,l=t("../../constants/alignment").FROM_TL,x=t("../../lib/clear_gl_canvases"),u=t("../../plot_api/subroutines").redrawReglTraces,M=t("../plots"),w=t("./axis_ids").getFromId,p=t("../../components/selections").prepSelect,_=t("../../components/selections").clearOutline,h=t("../../components/selections").selectOnClick,L=t("./scale_zoom"),E=t("./constants"),S=E.MINDRAG,P=E.MINZOOM,F=!0;function I(oe,ne,le,_e,fe,ye,xe,me){var be=oe._fullLayout._zoomlayer,ke=xe+me==="nsew",De=(xe+me).length===1,He,Ae,Le,Ze,We,ze,Ie,Ve,dt,Ft,Qt,Ot,Ct,jt,Nt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe;function At(){if(He=ne.xaxis,Ae=ne.yaxis,dt=He._length,Ft=Ae._length,Ie=He._offset,Ve=Ae._offset,Le={},Le[He._id]=He,Ze={},Ze[Ae._id]=Ae,xe&&me)for(var Ar=ne.overlays,Er=0;Er<Ar.length;Er++){var Jr=Ar[Er].xaxis;Le[Jr._id]=Jr;var lr=Ar[Er].yaxis;Ze[lr._id]=lr}We=ie(Le),ze=ie(Ze),Ct=O(We,me),jt=O(ze,xe),Nt=!jt&&!Ct,Ot=Z(oe,oe._fullLayout._axisMatchGroups,Le,Ze),Qt=Z(oe,oe._fullLayout._axisConstraintGroups,Le,Ze,Ot);var br=Qt.isSubplotConstrained||Ot.isSubplotConstrained;Lt=me||br,Xe=xe||br;var Fr=oe._fullLayout;it=Fr._has("scattergl"),Ye=Fr._has("splom"),Ee=Fr._has("svg")}At();var mt=j(jt+Ct,oe._fullLayout.dragmode,ke),Mt=R(ne,xe+me+"drag",mt,le,_e,fe,ye);if(Nt&&!ke)return Mt.onmousedown=null,Mt.style.pointerEvents="none",Mt;var Gt={element:Mt,gd:oe,plotinfo:ne};Gt.prepFn=function(Ar,Er,Jr){var lr=Gt.dragmode,br=oe._fullLayout.dragmode;br!==lr&&(Gt.dragmode=br),At(),Ke=oe._fullLayout._invScaleX,qe=oe._fullLayout._invScaleY,Nt||(ke?Ar.shiftKey?br==="pan"?br="zoom":f(br)||(br="pan"):Ar.ctrlKey&&(br="pan"):br="pan"),m(br)?Gt.minDrag=1:Gt.minDrag=void 0,f(br)?(Gt.xaxes=We,Gt.yaxes=ze,p(Ar,Er,Jr,Gt,br)):(Gt.clickFn=Ht,f(lr)&&zt(),Nt||(br==="zoom"?(Gt.moveFn=tt,Gt.doneFn=lt,Gt.minDrag=1,Sr(Ar,Er,Jr)):br==="pan"&&(Gt.moveFn=ot,Gt.doneFn=xt))),oe._fullLayout._redrag=function(){var Fr=oe._dragdata;if(Fr&&Fr.element===Mt){var Hr=oe._fullLayout.dragmode;f(Hr)||(At(),Pt([0,0,dt,Ft]),Gt.moveFn(Fr.dx,Fr.dy))}}};function zt(){Gt.plotinfo.selection=!1,_(oe)}function Ht(Ar,Er){var Jr=Gt.gd;if(Jr._fullLayout._activeShapeIndex>=0){Jr._fullLayout._deactivateShape(Jr);return}var lr=Jr._fullLayout.clickmode;if(J(Jr),Ar===2&&!De&&St(),ke)lr.indexOf("select")>-1&&h(Er,Jr,We,ze,ne.id,Gt),lr.indexOf("event")>-1&&s.click(Jr,Er,ne.id);else if(Ar===1&&De){var br=xe?Ae:He,Fr=xe==="s"||me==="w"?0:1,Hr=br._name+".range["+Fr+"]",Lr=z(br,Fr),at="left",Rt="middle";if(br.fixedrange)return;xe?(Rt=xe==="n"?"top":"bottom",br.side==="right"&&(at="right")):me==="e"&&(at="right"),Jr._context.showAxisRangeEntryBoxes&&y.select(Mt).call(n.makeEditable,{gd:Jr,immediate:!0,background:Jr._fullLayout.paper_bgcolor,text:String(Lr),fill:br.tickfont?br.tickfont.color:"#444",horizontalAlign:at,verticalAlign:Rt}).on("edit",function(Kt){var ur=br.d2r(Kt);ur!==void 0&&a.call("_guiRelayout",Jr,Hr,ur)})}}g.init(Gt);var Zt,Wt,sr,Gr,cn,qr,st,rr,$t,hr;function Sr(Ar,Er,Jr){var lr=Mt.getBoundingClientRect();Zt=Er-lr.left,Wt=Jr-lr.top,oe._fullLayout._calcInverseTransform(oe);var br=c.apply3DTransform(oe._fullLayout._invTransform)(Zt,Wt);Zt=br[0],Wt=br[1],sr={l:Zt,r:Zt,w:0,t:Wt,b:Wt,h:0},Gr=oe._hmpixcount?oe._hmlumcount/oe._hmpixcount:T(oe._fullLayout.plot_bgcolor).getLuminance(),cn="M0,0H"+dt+"V"+Ft+"H0V0",qr=!1,st="xy",hr=!1,rr=X(be,Gr,Ie,Ve,cn),$t=ae(be,Ie,Ve)}function tt(Ar,Er){if(oe._transitioningWithDuration)return!1;var Jr=Math.max(0,Math.min(dt,Ke*Ar+Zt)),lr=Math.max(0,Math.min(Ft,qe*Er+Wt)),br=Math.abs(Jr-Zt),Fr=Math.abs(lr-Wt);sr.l=Math.min(Zt,Jr),sr.r=Math.max(Zt,Jr),sr.t=Math.min(Wt,lr),sr.b=Math.max(Wt,lr);function Hr(){st="",sr.r=sr.l,sr.t=sr.b,$t.attr("d","M0,0Z")}if(Qt.isSubplotConstrained)br>P||Fr>P?(st="xy",br/dt>Fr/Ft?(Fr=br*Ft/dt,Wt>lr?sr.t=Wt-Fr:sr.b=Wt+Fr):(br=Fr*dt/Ft,Zt>Jr?sr.l=Zt-br:sr.r=Zt+br),$t.attr("d",re(sr))):Hr();else if(Ot.isSubplotConstrained)if(br>P||Fr>P){st="xy";var Lr=Math.min(sr.l/dt,(Ft-sr.b)/Ft),at=Math.max(sr.r/dt,(Ft-sr.t)/Ft);sr.l=Lr*dt,sr.r=at*dt,sr.b=(1-Lr)*Ft,sr.t=(1-at)*Ft,$t.attr("d",re(sr))}else Hr();else!jt||Fr<Math.min(Math.max(br*.6,S),P)?br<S||!Ct?Hr():(sr.t=0,sr.b=Ft,st="x",$t.attr("d",H(sr,Wt))):!Ct||br<Math.min(Fr*.6,P)?(sr.l=0,sr.r=dt,st="y",$t.attr("d",q(sr,Zt))):(st="xy",$t.attr("d",re(sr)));sr.w=sr.r-sr.l,sr.h=sr.b-sr.t,st&&(hr=!0),oe._dragged=hr,he(rr,$t,sr,cn,qr,Gr),Qe(),oe.emit("plotly_relayouting",Ge),qr=!0}function Qe(){Ge={},(st==="xy"||st==="x")&&(G(We,sr.l/dt,sr.r/dt,Ge,Qt.xaxes),ct("x",Ge)),(st==="xy"||st==="y")&&(G(ze,(Ft-sr.b)/Ft,(Ft-sr.t)/Ft,Ge,Qt.yaxes),ct("y",Ge))}function lt(){Qe(),J(oe),xt(),U(oe)}var ft=[0,0,dt,Ft],Et=null,Vt=E.REDRAWDELAY,Pe=ne.mainplot?oe._fullLayout._plots[ne.mainplot]:ne;function Se(Ar){if(!oe._context._scrollZoom.cartesian&&!oe._fullLayout._enablescrollzoom)return;if(zt(),oe._transitioningWithDuration){Ar.preventDefault(),Ar.stopPropagation();return}At(),clearTimeout(Et);var Er=-Ar.deltaY;if(isFinite(Er)||(Er=Ar.wheelDelta/10),!isFinite(Er)){c.log("Did not find wheel motion attributes: ",Ar);return}var Jr=Math.exp(-Math.min(Math.max(Er,-20),20)/200),lr=Pe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),br=(Ar.clientX-lr.left)/lr.width,Fr=(lr.bottom-Ar.clientY)/lr.height,Hr;function Lr(at,Rt,Kt){if(at.fixedrange)return;var ur=c.simpleMap(at.range,at.r2l),Nr=ur[0]+(ur[1]-ur[0])*Rt;function Vr(Dr){return at.l2r(Nr+(Dr-Nr)*Kt)}at.range=ur.map(Vr)}if(Lt){for(me||(br=.5),Hr=0;Hr<We.length;Hr++)Lr(We[Hr],br,Jr);ct("x"),ft[2]*=Jr,ft[0]+=ft[2]*br*(1/Jr-1)}if(Xe){for(xe||(Fr=.5),Hr=0;Hr<ze.length;Hr++)Lr(ze[Hr],Fr,Jr);ct("y"),ft[3]*=Jr,ft[1]+=ft[3]*(1-Fr)*(1/Jr-1)}Pt(ft),pt(),oe.emit("plotly_relayouting",Ge),Et=setTimeout(function(){!oe._fullLayout||(ft=[0,0,dt,Ft],xt())},Vt),Ar.preventDefault()}xe.length*me.length!==1&&Q(Mt,Se);function ot(Ar,Er){if(Ar=Ar*Ke,Er=Er*qe,oe._transitioningWithDuration)return;if(oe._fullLayout._replotting=!0,Ct==="ew"||jt==="ns"){var Jr=Ct?-Ar:0,lr=jt?-Er:0;if(Ot.isSubplotConstrained){if(Ct&&jt){var br=(Ar/dt-Er/Ft)/2;Ar=br*dt,Er=-br*Ft,Jr=-Ar,lr=-Er}jt?Jr=-lr*dt/Ft:lr=-Jr*Ft/dt}Ct&&(Y(We,Ar),ct("x")),jt&&(Y(ze,Er),ct("y")),Pt([Jr,lr,dt,Ft]),pt(),oe.emit("plotly_relayouting",Ge);return}function Fr(Vr,Dr,Mr){for(var jr=1-Dr,kn,yn,Wn=0;Wn<Vr.length;Wn++){var In=Vr[Wn];if(!In.fixedrange){kn=In,yn=In._rl[jr]+(In._rl[Dr]-In._rl[jr])/ee(Mr/In._length);var $n=In.l2r(yn);$n!==!1&&$n!==void 0&&(In.range[Dr]=$n)}}return kn._length*(kn._rl[Dr]-yn)/(kn._rl[Dr]-kn._rl[jr])}var Hr=Ct==="w"==(jt==="n")?1:-1;if(Ct&&jt&&(Qt.isSubplotConstrained||Ot.isSubplotConstrained)){var Lr=(Ar/dt+Hr*Er/Ft)/2;Ar=Lr*dt,Er=Hr*Lr*Ft}var at,Rt;if(Ct==="w"?Ar=Fr(We,0,Ar):Ct==="e"?Ar=Fr(We,1,-Ar):Ct||(Ar=0),jt==="n"?Er=Fr(ze,1,Er):jt==="s"?Er=Fr(ze,0,-Er):jt||(Er=0),at=Ct==="w"?Ar:0,Rt=jt==="n"?Er:0,Qt.isSubplotConstrained&&!Ot.isSubplotConstrained||Ot.isSubplotConstrained&&Ct&&jt&&Hr>0){var Kt;if(Ot.isSubplotConstrained||!Ct&&jt.length===1){for(Kt=0;Kt<We.length;Kt++)We[Kt].range=We[Kt]._r.slice(),L(We[Kt],1-Er/Ft);Ar=Er*dt/Ft,at=Ar/2}if(Ot.isSubplotConstrained||!jt&&Ct.length===1){for(Kt=0;Kt<ze.length;Kt++)ze[Kt].range=ze[Kt]._r.slice(),L(ze[Kt],1-Ar/dt);Er=Ar*Ft/dt,Rt=Er/2}}(!Ot.isSubplotConstrained||!jt)&&ct("x"),(!Ot.isSubplotConstrained||!Ct)&&ct("y");var ur=dt-Ar,Nr=Ft-Er;Ot.isSubplotConstrained&&!(Ct&&jt)&&(Ct?(Rt=at?0:Ar*Ft/dt,Nr=ur*Ft/dt):(at=Rt?0:Er*dt/Ft,ur=Nr*dt/Ft)),Pt([at,Rt,ur,Nr]),pt(),oe.emit("plotly_relayouting",Ge)}function ct(Ar,Er){for(var Jr=Ot.isSubplotConstrained?{x:ze,y:We}[Ar]:Ot[Ar+"axes"],lr=Ot.isSubplotConstrained?{x:We,y:ze}[Ar]:[],br=0;br<Jr.length;br++){var Fr=Jr[br],Hr=Fr._id,Lr=Ot.xLinks[Hr]||Ot.yLinks[Hr],at=lr[0]||Le[Lr]||Ze[Lr];at&&(Er?(Er[Fr._name+".range[0]"]=Er[at._name+".range[0]"],Er[Fr._name+".range[1]"]=Er[at._name+".range[1]"]):Fr.range=at.range.slice())}}function pt(){var Ar=[],Er;function Jr(Fr){for(Er=0;Er<Fr.length;Er++)Fr[Er].fixedrange||Ar.push(Fr[Er]._id)}for(Lt&&(Jr(We),Jr(Qt.xaxes),Jr(Ot.xaxes)),Xe&&(Jr(ze),Jr(Qt.yaxes),Jr(Ot.yaxes)),Ge={},Er=0;Er<Ar.length;Er++){var lr=Ar[Er],br=w(oe,lr);o.drawOne(oe,br,{skipTitle:!0}),Ge[br._name+".range[0]"]=br.range[0],Ge[br._name+".range[1]"]=br.range[1]}o.redrawComponents(oe,Ar)}function St(){if(!oe._transitioningWithDuration){var Ar=oe._context.doubleClick,Er=[];Ct&&(Er=Er.concat(We)),jt&&(Er=Er.concat(ze)),Ot.xaxes&&(Er=Er.concat(Ot.xaxes)),Ot.yaxes&&(Er=Er.concat(Ot.yaxes));var Jr={},lr,br,Fr;if(Ar==="reset+autosize"){for(Ar="autosize",br=0;br<Er.length;br++)if(lr=Er[br],lr._rangeInitial&&(lr.range[0]!==lr._rangeInitial[0]||lr.range[1]!==lr._rangeInitial[1])||!lr._rangeInitial&&!lr.autorange){Ar="reset";break}}if(Ar==="autosize")for(br=0;br<Er.length;br++)lr=Er[br],lr.fixedrange||(Jr[lr._name+".autorange"]=!0);else if(Ar==="reset")for((Ct||Qt.isSubplotConstrained)&&(Er=Er.concat(Qt.xaxes)),jt&&!Qt.isSubplotConstrained&&(Er=Er.concat(Qt.yaxes)),Qt.isSubplotConstrained&&(Ct?jt||(Er=Er.concat(ze)):Er=Er.concat(We)),br=0;br<Er.length;br++)lr=Er[br],lr.fixedrange||(lr._rangeInitial?(Fr=lr._rangeInitial,Jr[lr._name+".range[0]"]=Fr[0],Jr[lr._name+".range[1]"]=Fr[1]):Jr[lr._name+".autorange"]=!0);oe.emit("plotly_doubleclick",null),a.call("_guiRelayout",oe,Jr)}}function xt(){Pt([0,0,dt,Ft]),c.syncOrAsync([M.previousPromises,function(){oe._fullLayout._replotting=!1,a.call("_guiRelayout",oe,Ge)}],oe)}function Pt(Ar){var Er=oe._fullLayout,Jr=Er._plots,lr=Er._subplots.cartesian,br,Fr,Hr,Lr;if(Ye&&a.subplotsRegistry.splom.drag(oe),it){for(br=0;br<lr.length;br++)if(Fr=Jr[lr[br]],Hr=Fr.xaxis,Lr=Fr.yaxis,Fr._scene){var at=c.simpleMap(Hr.range,Hr.r2l),Rt=c.simpleMap(Lr.range,Lr.r2l);Fr._scene.update({range:[at[0],Rt[0],at[1],Rt[1]]})}}if((Ye||it)&&(x(oe),u(oe)),Ee){var Kt=Ar[2]/He._length,ur=Ar[3]/Ae._length;for(br=0;br<lr.length;br++){Fr=Jr[lr[br]],Hr=Fr.xaxis,Lr=Fr.yaxis;var Nr=(Lt||Ot.isSubplotConstrained)&&!Hr.fixedrange&&Le[Hr._id],Vr=(Xe||Ot.isSubplotConstrained)&&!Lr.fixedrange&&Ze[Lr._id],Dr,Mr,jr,kn;if(Nr?(Dr=Kt,jr=me||Ot.isSubplotConstrained?Ar[0]:Pr(Hr,Dr)):Ot.xaHash[Hr._id]?(Dr=Kt,jr=Ar[0]*Hr._length/He._length):Ot.yaHash[Hr._id]?(Dr=ur,jr=jt==="ns"?-Ar[1]*Hr._length/Ae._length:Pr(Hr,Dr,{n:"top",s:"bottom"}[jt])):(Dr=Xt(Hr,Kt,ur),jr=or(Hr,Dr)),Vr?(Mr=ur,kn=xe||Ot.isSubplotConstrained?Ar[1]:Pr(Lr,Mr)):Ot.yaHash[Lr._id]?(Mr=ur,kn=Ar[1]*Lr._length/Ae._length):Ot.xaHash[Lr._id]?(Mr=Kt,kn=Ct==="ew"?-Ar[0]*Lr._length/He._length:Pr(Lr,Mr,{e:"right",w:"left"}[Ct])):(Mr=Xt(Lr,Kt,ur),kn=or(Lr,Mr)),!(!Dr&&!Mr)){Dr||(Dr=1),Mr||(Mr=1);var yn=Hr._offset-jr/Dr,Wn=Lr._offset-kn/Mr;Fr.clipRect.call(v.setTranslate,jr,kn).call(v.setScale,Dr,Mr),Fr.plot.call(v.setTranslate,yn,Wn).call(v.setScale,1/Dr,1/Mr),(Dr!==Fr.xScaleFactor||Mr!==Fr.yScaleFactor)&&(v.setPointGroupScale(Fr.zoomScalePts,Dr,Mr),v.setTextPointsScale(Fr.zoomScaleTxt,Dr,Mr)),v.hideOutsideRangePoints(Fr.clipOnAxisFalseTraces,Fr),Fr.xScaleFactor=Dr,Fr.yScaleFactor=Mr}}}}function Xt(Ar,Er,Jr){return Ar.fixedrange?0:Lt&&Qt.xaHash[Ar._id]?Er:Xe&&(Qt.isSubplotConstrained?Qt.xaHash:Qt.yaHash)[Ar._id]?Jr:0}function or(Ar,Er){return Er?(Ar.range=Ar._r.slice(),L(Ar,Er),Pr(Ar,Er)):0}function Pr(Ar,Er,Jr){return Ar._length*(1-Er)*l[Jr||Ar.constraintoward||"middle"]}return Mt}function D(oe,ne,le,_e){var fe=c.ensureSingle(oe.draglayer,ne,le,function(ye){ye.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",oe.id)});return fe.call(b,_e),fe.node()}function R(oe,ne,le,_e,fe,ye,xe){var me=D(oe,"rect",ne,le);return y.select(me).call(v.setRect,_e,fe,ye,xe),me}function O(oe,ne){for(var le=0;le<oe.length;le++)if(!oe[le].fixedrange)return ne;return""}function z(oe,ne){var le=oe.range[ne],_e=Math.abs(le-oe.range[1-ne]),fe;return oe.type==="date"?le:oe.type==="log"?(fe=Math.ceil(Math.max(0,-Math.log(_e)/Math.LN10))+3,A("."+fe+"g")(Math.pow(10,le))):(fe=Math.floor(Math.log(Math.abs(le))/Math.LN10)-Math.floor(Math.log(_e)/Math.LN10)+4,A("."+String(fe)+"g")(le))}function G(oe,ne,le,_e,fe){for(var ye=0;ye<oe.length;ye++){var xe=oe[ye];if(!xe.fixedrange)if(xe.rangebreaks){var me=xe._id.charAt(0)==="y",be=me?1-ne:ne,ke=me?1-le:le;_e[xe._name+".range[0]"]=xe.l2r(xe.p2l(be*xe._length)),_e[xe._name+".range[1]"]=xe.l2r(xe.p2l(ke*xe._length))}else{var De=xe._rl[0],He=xe._rl[1]-De;_e[xe._name+".range[0]"]=xe.l2r(De+He*ne),_e[xe._name+".range[1]"]=xe.l2r(De+He*le)}}if(fe&&fe.length){var Ae=(ne+(1-le))/2;G(fe,Ae,1-Ae,_e,[])}}function Y(oe,ne){for(var le=0;le<oe.length;le++){var _e=oe[le];if(!_e.fixedrange)if(_e.rangebreaks){var fe=0,ye=_e._length,xe=_e.p2l(fe+ne)-_e.p2l(fe),me=_e.p2l(ye+ne)-_e.p2l(ye),be=(xe+me)/2;_e.range=[_e.l2r(_e._rl[0]-be),_e.l2r(_e._rl[1]-be)]}else _e.range=[_e.l2r(_e._rl[0]-ne/_e._m),_e.l2r(_e._rl[1]-ne/_e._m)]}}function ee(oe){return 1-(oe>=0?Math.min(oe,.9):1/(1/Math.max(oe,-.3)+3.222))}function j(oe,ne,le){return oe?oe==="nsew"?le?"":ne==="pan"?"move":"crosshair":oe.toLowerCase()+"-resize":"pointer"}function X(oe,ne,le,_e,fe){return oe.append("path").attr("class","zoombox").style({fill:ne>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(le,_e)).attr("d",fe+"Z")}function ae(oe,ne,le){return oe.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(ne,le)).attr("d","M0,0Z")}function he(oe,ne,le,_e,fe,ye){oe.attr("d",_e+"M"+le.l+","+le.t+"v"+le.h+"h"+le.w+"v-"+le.h+"h-"+le.w+"Z"),K(oe,ne,fe,ye)}function K(oe,ne,le,_e){le||(oe.transition().style("fill",_e>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ne.transition().style("opacity",1).duration(200))}function J(oe){y.select(oe).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(oe){F&&oe.data&&oe._context.showTips&&(c.notifier(c._(oe,"Double-click to zoom back out"),"long"),F=!1)}function H(oe,ne){return"M"+(oe.l-.5)+","+(ne-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(oe.r+.5)+","+(ne-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function q(oe,ne){return"M"+(ne-P-.5)+","+(oe.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(ne-P-.5)+","+(oe.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function re(oe){var ne=Math.floor(Math.min(oe.b-oe.t,oe.r-oe.l,P)/2);return"M"+(oe.l-3.5)+","+(oe.t-.5+ne)+"h3v"+-ne+"h"+ne+"v-3h-"+(ne+3)+"ZM"+(oe.r+3.5)+","+(oe.t-.5+ne)+"h-3v"+-ne+"h"+-ne+"v-3h"+(ne+3)+"ZM"+(oe.r+3.5)+","+(oe.b+.5-ne)+"h-3v"+ne+"h"+-ne+"v3h"+(ne+3)+"ZM"+(oe.l-3.5)+","+(oe.b+.5-ne)+"h3v"+ne+"h"+ne+"v3h-"+(ne+3)+"Z"}function Z(oe,ne,le,_e,fe){for(var ye=!1,xe={},me={},be,ke,De,He,Ae=(fe||{}).xaHash,Le=(fe||{}).yaHash,Ze=0;Ze<ne.length;Ze++){var We=ne[Ze];for(be in le)if(We[be]){for(De in We)!(fe&&(Ae[De]||Le[De]))&&!(De.charAt(0)==="x"?le:_e)[De]&&(xe[De]=be);for(ke in _e)!(fe&&(Ae[ke]||Le[ke]))&&We[ke]&&(ye=!0)}for(ke in _e)if(We[ke])for(He in We)!(fe&&(Ae[He]||Le[He]))&&!(He.charAt(0)==="x"?le:_e)[He]&&(me[He]=ke)}ye&&(c.extendFlat(xe,me),me={});var ze={},Ie=[];for(De in xe){var Ve=w(oe,De);Ie.push(Ve),ze[Ve._id]=Ve}var dt={},Ft=[];for(He in me){var Qt=w(oe,He);Ft.push(Qt),dt[Qt._id]=Qt}return{xaHash:ze,yaHash:dt,xaxes:Ie,yaxes:Ft,xLinks:xe,yLinks:me,isSubplotConstrained:ye}}function Q(oe,ne){if(!e)oe.onwheel!==void 0?oe.onwheel=ne:oe.onmousewheel!==void 0?oe.onmousewheel=ne:oe.isAddedWheelEvent||(oe.isAddedWheelEvent=!0,oe.addEventListener("wheel",ne,{passive:!1}));else{var le=oe.onwheel!==void 0?"wheel":"mousewheel";oe._onwheel&&oe.removeEventListener(le,oe._onwheel),oe._onwheel=ne,oe.addEventListener(le,ne,{passive:!1})}}function ie(oe){var ne=[];for(var le in oe)ne.push(oe[le]);return ne}N.exports={makeDragBox:I,makeDragger:D,makeRectDragger:R,makeZoombox:X,makeCorners:ae,updateZoombox:he,xyCorners:re,transitionZoombox:K,removeZoombox:J,showDoubleClickNotifier:U,attachWheelEventHandler:Q}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/fx"),A=t("../../components/dragelement"),T=t("../../lib/setcursor"),e=t("./dragbox").makeDragBox,a=t("./constants").DRAGGERSIZE;V.initInteractions=function(n){var r=n._fullLayout;if(n._context.staticPlot){y.select(n).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var v=Object.keys(r._plots||{}).sort(function(o,b){if((r._plots[o].mainplot&&!0)===(r._plots[b].mainplot&&!0)){var g=o.split("y"),d=b.split("y");return g[0]===d[0]?Number(g[1]||1)-Number(d[1]||1):Number(g[0]||1)-Number(d[0]||1)}return r._plots[o].mainplot?1:-1});v.forEach(function(o){var b=r._plots[o],g=b.xaxis,d=b.yaxis;if(!b.mainplot){var f=e(n,b,g._offset,d._offset,g._length,d._length,"ns","ew");f.onmousemove=function(x){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===o&&n._fullLayout._plots[o]&&c.hover(n,x,o)},c.hover(n,x,o),n._fullLayout._lasthover=f,n._fullLayout._hoversubplot=o},f.onmouseout=function(x){n._dragging||(n._fullLayout._hoversubplot=null,A.unhover(n,x))},n._context.showAxisDragHandles&&(e(n,b,g._offset-a,d._offset-a,a,a,"n","w"),e(n,b,g._offset+g._length,d._offset-a,a,a,"n","e"),e(n,b,g._offset-a,d._offset+d._length,a,a,"s","w"),e(n,b,g._offset+g._length,d._offset+d._length,a,a,"s","e"))}if(n._context.showAxisDragHandles){if(o===g._mainSubplot){var m=g._mainLinePosition;g.side==="top"&&(m-=a),e(n,b,g._offset+g._length*.1,m,g._length*.8,a,"","ew"),e(n,b,g._offset,m,g._length*.1,a,"","w"),e(n,b,g._offset+g._length*.9,m,g._length*.1,a,"","e")}if(o===d._mainSubplot){var l=d._mainLinePosition;d.side!=="right"&&(l-=a),e(n,b,l,d._offset+d._length*.1,a,d._length*.8,"ns",""),e(n,b,l,d._offset+d._length*.9,a,d._length*.1,"s",""),e(n,b,l,d._offset,a,d._length*.1,"n","")}}});var s=r._hoverlayer.node();s.onmousemove=function(o){o.target=n._fullLayout._lasthover,c.hover(n,o,r._hoversubplot)},s.onclick=function(o){o.target=n._fullLayout._lasthover,c.click(n,o)},s.onmousedown=function(o){n._fullLayout._lasthover.onmousedown(o)},V.updateFx(n)}},V.updateFx=function(i){var n=i._fullLayout,r=n.dragmode==="pan"?"move":"crosshair";T(n._draggers,r)}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("./axis_ids");N.exports=function(e){return function(i,n){var r=i[e];if(!!Array.isArray(r))for(var v=y.subplotsRegistry.cartesian,s=v.idRegex,o=n._subplots,b=o.xaxis,g=o.yaxis,d=o.cartesian,f=n._has("cartesian")||n._has("gl2d"),m=0;m<r.length;m++){var l=r[m];if(!!c.isPlainObject(l)){var x=A.cleanId(l.xref,"x",!1),u=A.cleanId(l.yref,"y",!1),M=s.x.test(x),w=s.y.test(u);if(M||w){f||c.pushUnique(n._basePlotModules,v);var p=!1;M&&b.indexOf(x)===-1&&(b.push(x),p=!0),w&&g.indexOf(u)===-1&&(g.push(u),p=!0),p&&M&&w&&d.push(x+u)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../registry"),A=t("../../lib"),T=t("../plots"),e=t("../../components/drawing"),a=t("../get_data").getModuleCalcData,i=t("./axis_ids"),n=t("./constants"),r=t("../../constants/xmlns_namespaces"),v=A.ensureSingle;function s(m,l,x){return A.ensureSingle(m,l,x,function(u){u.datum(x)})}V.name="cartesian",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=n.idRegex,V.attrRegex=n.attrRegex,V.attributes=t("./attributes"),V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.transitionAxes=t("./transition_axes"),V.finalizeSubplots=function(m,l){var x=l._subplots,u=x.xaxis,M=x.yaxis,w=x.cartesian,p=w.concat(x.gl2d||[]),_={},h={},L,E,S;for(L=0;L<p.length;L++){var P=p[L].split("y");_[P[0]]=1,h["y"+P[1]]=1}for(L=0;L<u.length;L++)E=u[L],_[E]||(S=(m[i.id2name(E)]||{}).anchor,n.idRegex.y.test(S)||(S="y"),w.push(E+S),p.push(E+S),h[S]||(h[S]=1,A.pushUnique(M,S)));for(L=0;L<M.length;L++)S=M[L],h[S]||(E=(m[i.id2name(S)]||{}).anchor,n.idRegex.x.test(E)||(E="x"),w.push(E+S),p.push(E+S),_[E]||(_[E]=1,A.pushUnique(u,E)));if(!p.length){E="",S="";for(var F in m)if(n.attrRegex.test(F)){var I=F.charAt(0);I==="x"?(!E||+F.substr(5)<+E.substr(5))&&(E=F):(!S||+F.substr(5)<+S.substr(5))&&(S=F)}E=E?i.name2id(E):"x",S=S?i.name2id(S):"y",u.push(E),M.push(S),w.push(E+S)}},V.plot=function(m,l,x,u){var M=m._fullLayout,w=M._subplots.cartesian,p=m.calcdata,_;if(!Array.isArray(l))for(l=[],_=0;_<p.length;_++)l.push(_);for(_=0;_<w.length;_++){for(var h=w[_],L=M._plots[h],E=[],S,P=0;P<p.length;P++){var F=p[P],I=F[0].trace;I.xaxis+I.yaxis===h&&((l.indexOf(I.index)!==-1||I.carpet)&&(S&&S[0].trace.xaxis+S[0].trace.yaxis===h&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&E.indexOf(S)===-1&&E.push(S),E.push(F)),S=F)}o(m,L,E,x,u)}};function o(m,l,x,u,M){for(var w=n.traceLayerClasses,p=m._fullLayout,_=p._modules,h,L,E,S=[],P=[],F=0;F<_.length;F++){h=_[F];var I=h.name,D=c.modules[I].categories;if(D.svg){var R=h.layerName||I+"layer",O=h.plot;L=a(x,O),E=L[0],x=L[1],E.length&&S.push({i:w.indexOf(R),className:R,plotMethod:O,cdModule:E}),D.zoomScale&&P.push("."+R)}}S.sort(function(Y,ee){return Y.i-ee.i});var z=l.plot.selectAll("g.mlayer").data(S,function(Y){return Y.className});if(z.enter().append("g").attr("class",function(Y){return Y.className}).classed("mlayer",!0).classed("rangeplot",l.isRangePlot),z.exit().remove(),z.order(),z.each(function(Y){var ee=y.select(this),j=Y.className;Y.plotMethod(m,l,Y.cdModule,ee,u,M),n.clipOnAxisFalseQuery.indexOf("."+j)===-1&&e.setClipUrl(ee,l.layerClipId,m)}),p._has("scattergl")&&(h=c.getModule("scattergl"),E=a(x,h)[0],h.plot(m,l,E)),!m._context.staticPlot&&(l._hasClipOnAxisFalse&&(l.clipOnAxisFalseTraces=l.plot.selectAll(n.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var G=l.plot.selectAll(P.join(",")).selectAll(".trace");l.zoomScalePts=G.selectAll("path.point"),l.zoomScaleTxt=G.selectAll(".textpoint")}}V.clean=function(m,l,x,u){var M=u._plots||{},w=l._plots||{},p=u._subplots||{},_,h,L;if(u._hasOnlyLargeSploms&&!l._hasOnlyLargeSploms)for(L in M)_=M[L],_.plotgroup&&_.plotgroup.remove();var E=u._has&&u._has("gl"),S=l._has&&l._has("gl");if(E&&!S)for(L in M)_=M[L],_._scene&&_._scene.destroy();if(p.xaxis&&p.yaxis){var P=i.listIds({_fullLayout:u});for(h=0;h<P.length;h++){var F=P[h];l[i.id2name(F)]||u._infolayer.selectAll(".g-"+F+"title").remove()}}var I=u._has&&u._has("cartesian"),D=l._has&&l._has("cartesian");if(I&&!D)d(u._cartesianlayer.selectAll(".subplot"),u),u._defs.selectAll(".axesclip").remove(),delete u._axisConstraintGroups,delete u._axisMatchGroups;else if(p.cartesian)for(h=0;h<p.cartesian.length;h++){var R=p.cartesian[h];if(!w[R]){var O="."+R+",."+R+"-x,."+R+"-y";u._cartesianlayer.selectAll(O).remove(),f(R,u)}}},V.drawFramework=function(m){var l=m._fullLayout,x=b(m),u=l._cartesianlayer.selectAll(".subplot").data(x,String);u.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),u.order(),u.exit().call(d,l),u.each(function(M){var w=M[0],p=l._plots[w];p.plotgroup=y.select(this),g(m,p),p.draglayer=v(l._draggers,"g",w)})},V.rangePlot=function(m,l,x){g(m,l),o(m,l,x),T.style(m)};function b(m){var l=m._fullLayout,x=l._subplots.cartesian,u=x.length,M,w,p,_,h,L,E=[],S=[];for(M=0;M<u;M++){p=x[M],_=l._plots[p],h=_.xaxis,L=_.yaxis;var P=h._mainAxis,F=L._mainAxis,I=P._id+F._id,D=l._plots[I];_.overlays=[],I!==p&&D?(_.mainplot=I,_.mainplotinfo=D,S.push(p)):(_.mainplot=void 0,_.mainplotinfo=void 0,E.push(p))}for(M=0;M<S.length;M++)p=S[M],_=l._plots[p],_.mainplotinfo.overlays.push(_);var R=E.concat(S),O=new Array(u);for(M=0;M<u;M++){p=R[M],_=l._plots[p],h=_.xaxis,L=_.yaxis;var z=[p,h.layer,L.layer,h.overlaying||"",L.overlaying||""];for(w=0;w<_.overlays.length;w++)z.push(_.overlays[w].id);O[M]=z}return O}function g(m,l){var x=l.plotgroup,u=l.id,M=n.layerValue2layerClass[l.xaxis.layer],w=n.layerValue2layerClass[l.yaxis.layer],p=m._fullLayout._hasOnlyLargeSploms;if(l.mainplot){var h=l.mainplotinfo,L=h.plotgroup,E=u+"-x",S=u+"-y";l.minorGridlayer=h.minorGridlayer,l.gridlayer=h.gridlayer,l.zerolinelayer=h.zerolinelayer,v(h.overlinesBelow,"path",E),v(h.overlinesBelow,"path",S),v(h.overaxesBelow,"g",E),v(h.overaxesBelow,"g",S),l.plot=v(h.overplot,"g",u),v(h.overlinesAbove,"path",E),v(h.overlinesAbove,"path",S),v(h.overaxesAbove,"g",E),v(h.overaxesAbove,"g",S),l.xlines=L.select(".overlines-"+M).select("."+E),l.ylines=L.select(".overlines-"+w).select("."+S),l.xaxislayer=L.select(".overaxes-"+M).select("."+E),l.yaxislayer=L.select(".overaxes-"+w).select("."+S)}else if(p)l.xlines=v(x,"path","xlines-above"),l.ylines=v(x,"path","ylines-above"),l.xaxislayer=v(x,"g","xaxislayer-above"),l.yaxislayer=v(x,"g","yaxislayer-above");else{var _=v(x,"g","layer-subplot");l.shapelayer=v(_,"g","shapelayer"),l.imagelayer=v(_,"g","imagelayer"),l.minorGridlayer=v(x,"g","minor-gridlayer"),l.gridlayer=v(x,"g","gridlayer"),l.zerolinelayer=v(x,"g","zerolinelayer"),v(x,"path","xlines-below"),v(x,"path","ylines-below"),l.overlinesBelow=v(x,"g","overlines-below"),v(x,"g","xaxislayer-below"),v(x,"g","yaxislayer-below"),l.overaxesBelow=v(x,"g","overaxes-below"),l.plot=v(x,"g","plot"),l.overplot=v(x,"g","overplot"),l.xlines=v(x,"path","xlines-above"),l.ylines=v(x,"path","ylines-above"),l.overlinesAbove=v(x,"g","overlines-above"),v(x,"g","xaxislayer-above"),v(x,"g","yaxislayer-above"),l.overaxesAbove=v(x,"g","overaxes-above"),l.xlines=x.select(".xlines-"+M),l.ylines=x.select(".ylines-"+w),l.xaxislayer=x.select(".xaxislayer-"+M),l.yaxislayer=x.select(".yaxislayer-"+w)}p||(s(l.minorGridlayer,"g",l.xaxis._id),s(l.minorGridlayer,"g",l.yaxis._id),l.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort),s(l.gridlayer,"g",l.xaxis._id),s(l.gridlayer,"g",l.yaxis._id),l.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort)),l.xlines.style("fill","none").classed("crisp",!0),l.ylines.style("fill","none").classed("crisp",!0)}function d(m,l){if(!!m){var x={};m.each(function(h){var L=h[0],E=y.select(this);E.remove(),f(L,l),x[L]=!0});for(var u in l._plots)for(var M=l._plots[u],w=M.overlays||[],p=0;p<w.length;p++){var _=w[p];x[_.id]&&_.plot.selectAll(".trace").remove()}}}function f(m,l){l._draggers.selectAll("g."+m).remove(),l._defs.select("#clip"+l._uid+m+"plot").remove()}V.toSVG=function(m){var l=m._fullLayout._glimages,x=y.select(m).selectAll(".svg-container"),u=x.filter(function(w,p){return p===x.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function M(){var w=this,p=w.toDataURL("image/png"),_=l.append("svg:image");_.attr({xmlns:r.svg,"xlink:href":p,preserveAspectRatio:"none",x:0,y:0,width:w.style.width,height:w.style.height})}u.each(M)},V.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(t,N,V){var y=t("../font_attributes"),c=t("../../components/color/attributes"),A=t("../../components/drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray,a=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,i=t("../../constants/numerical").ONEDAY,n=t("./constants"),r=n.HOUR_PATTERN,v=n.WEEKDAY_PATTERN,s={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function o(_){return{valType:"integer",min:0,dflt:_?5:0,editType:"ticks"}}var b={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"data_array",editType:"ticks"},f={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function m(_){var h={valType:"number",min:0,editType:"ticks"};return _||(h.dflt=5),h}function l(_){var h={valType:"number",min:0,editType:"ticks"};return _||(h.dflt=1),h}var x={valType:"color",dflt:c.defaultLine,editType:"ticks"},u={valType:"color",dflt:c.lightLine,editType:"ticks"};function M(_){var h={valType:"number",min:0,editType:"ticks"};return _||(h.dflt=1),h}var w=T({},A,{editType:"ticks"}),p={valType:"boolean",editType:"ticks"};N.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:c.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:y({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[v,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:i},editType:"calc"}),tickmode:s,nticks:o(),tick0:b,dtick:g,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:d,ticktext:{valType:"data_array",editType:"ticks"},ticks:f,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:m(),tickwidth:l(),tickcolor:x,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},A,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:y({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:p,gridcolor:u,gridwidth:M(),griddash:w,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},minor:{tickmode:s,nticks:o("minor"),tick0:b,dtick:g,tickvals:d,ticks:f,ticklen:m("minor"),tickwidth:l("minor"),tickcolor:x,gridcolor:u,gridwidth:M("minor"),griddash:w,showgrid:p,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:y({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color"),A=t("../../components/fx/helpers").isUnifiedHover,T=t("../../components/fx/hovermode_defaults"),e=t("../../plot_api/plot_template"),a=t("../layout_attributes"),i=t("./layout_attributes"),n=t("./type_defaults"),r=t("./axis_defaults"),v=t("./constraints"),s=t("./position_defaults"),o=t("./axis_ids"),b=o.id2name,g=o.name2id,d=t("./constants").AX_ID_PATTERN,f=t("../../registry"),m=f.traceIs,l=f.getComponentMethod;function x(u,M,w){Array.isArray(u[M])?u[M].push(w):u[M]=[w]}N.exports=function(M,w,p){var _=w.autotypenumbers,h={},L={},E={},S={},P={},F={},I={},D={},R={},O={},z,G;for(z=0;z<p.length;z++){var Y=p[z];if(!(!m(Y,"cartesian")&&!m(Y,"gl2d"))){var ee;if(Y.xaxis)ee=b(Y.xaxis),x(h,ee,Y);else if(Y.xaxes)for(G=0;G<Y.xaxes.length;G++)x(h,b(Y.xaxes[G]),Y);var j;if(Y.yaxis)j=b(Y.yaxis),x(h,j,Y);else if(Y.yaxes)for(G=0;G<Y.yaxes.length;G++)x(h,b(Y.yaxes[G]),Y);if(Y.type==="funnel"?Y.orientation==="h"?(ee&&(L[ee]=!0),j&&(I[j]=!0)):j&&(E[j]=!0):Y.type==="image"?(j&&(D[j]=!0),ee&&(D[ee]=!0)):(j&&(P[j]=!0,F[j]=!0),(!m(Y,"carpet")||Y.type==="carpet"&&!Y._cheater)&&ee&&(S[ee]=!0)),Y.type==="carpet"&&Y._cheater&&ee&&(L[ee]=!0),m(Y,"2dMap")&&(R[ee]=!0,R[j]=!0),m(Y,"oriented")){var X=Y.orientation==="h"?j:ee;O[X]=!0}}}var ae=w._subplots,he=ae.xaxis,K=ae.yaxis,J=y.simpleMap(he,b),U=y.simpleMap(K,b),H=J.concat(U),q=c.background;he.length&&K.length&&(q=y.coerce(M,w,a,"plot_bgcolor"));var re=c.combine(q,w.paper_bgcolor),Z,Q,ie,oe,ne;function le(){var Ye=h[Z]||[];ne._traceIndices=Ye.map(function(Ee){return Ee._expandedIndex}),ne._annIndices=[],ne._shapeIndices=[],ne._selectionIndices=[],ne._imgIndices=[],ne._subplotsWith=[],ne._counterAxes=[],ne._name=ne._attr=Z,ne._id=Q}function _e(Ye,Ee){return y.coerce(oe,ne,i,Ye,Ee)}function fe(Ye,Ee){return y.coerce2(oe,ne,i,Ye,Ee)}function ye(Ye){return Ye==="x"?K:he}function xe(Ye,Ee){for(var Ge=Ye==="x"?J:U,Ke=[],qe=0;qe<Ge.length;qe++){var At=Ge[qe];At!==Ee&&!(M[At]||{}).overlaying&&Ke.push(g(At))}return Ke}var me={x:ye("x"),y:ye("y")},be=me.x.concat(me.y),ke={},De=[];function He(){var Ye=oe.matches;d.test(Ye)&&be.indexOf(Ye)===-1&&(ke[Ye]=oe.type,De=Object.keys(ke))}var Ae=T(M,w),Le=A(Ae);for(z=0;z<H.length;z++){Z=H[z],Q=g(Z),ie=Z.charAt(0),y.isPlainObject(M[Z])||(M[Z]={}),oe=M[Z],ne=e.newContainer(w,Z,ie+"axis"),le();var Ze=ie==="x"&&!S[Z]&&L[Z]||ie==="y"&&!P[Z]&&E[Z],We=ie==="y"&&(!F[Z]&&I[Z]||D[Z]),ze={hasMinor:!0,letter:ie,font:w.font,outerTicks:R[Z],showGrid:!O[Z],data:h[Z]||[],bgColor:re,calendar:w.calendar,automargin:!0,visibleDflt:Ze,reverseDflt:We,autotypenumbersDflt:_,splomStash:((w._splomAxes||{})[ie]||{})[Q]};_e("uirevision",w.uirevision),n(oe,ne,_e,ze),r(oe,ne,_e,ze,w);var Ie=Le&&ie===Ae.charAt(0),Ve=fe("spikecolor",Le?ne.color:void 0),dt=fe("spikethickness",Le?1.5:void 0),Ft=fe("spikedash",Le?"dot":void 0),Qt=fe("spikemode",Le?"across":void 0),Ot=fe("spikesnap"),Ct=_e("showspikes",!!Ie||!!Ve||!!dt||!!Ft||!!Qt||!!Ot);Ct||(delete ne.spikecolor,delete ne.spikethickness,delete ne.spikedash,delete ne.spikemode,delete ne.spikesnap),s(oe,ne,_e,{letter:ie,counterAxes:me[ie],overlayableAxes:xe(ie,Z),grid:w.grid}),_e("title.standoff"),He(),ne._input=oe}for(z=0;z<De.length;){Q=De[z++],Z=b(Q),ie=Z.charAt(0),y.isPlainObject(M[Z])||(M[Z]={}),oe=M[Z],ne=e.newContainer(w,Z,ie+"axis"),le();var jt={letter:ie,font:w.font,outerTicks:R[Z],showGrid:!O[Z],data:[],bgColor:re,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:_,splomStash:((w._splomAxes||{})[ie]||{})[Q]};_e("uirevision",w.uirevision),ne.type=ke[Q]||"linear",r(oe,ne,_e,jt,w),s(oe,ne,_e,{letter:ie,counterAxes:me[ie],overlayableAxes:xe(ie,Z),grid:w.grid}),_e("fixedrange"),He(),ne._input=oe}var Nt=l("rangeslider","handleDefaults"),Lt=l("rangeselector","handleDefaults");for(z=0;z<J.length;z++)Z=J[z],oe=M[Z],ne=w[Z],Nt(M,w,Z),ne.type==="date"&&Lt(oe,ne,w,U,ne.calendar),_e("fixedrange");for(z=0;z<U.length;z++){Z=U[z],oe=M[Z],ne=w[Z];var Xe=w[b(ne.anchor)],it=l("rangeslider","isVisible")(Xe);_e("fixedrange",it)}v.handleDefaults(M,w,{axIds:be.concat(De).sort(o.idSort),axHasImage:D})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(t,N,V){var y=t("tinycolor2").mix,c=t("../../components/color/attributes"),A=t("../../lib");N.exports=function(e,a,i,n){n=n||{};var r=n.dfltColor;function v(E,S){return A.coerce2(e,a,n.attributes,E,S)}var s=v("linecolor",r),o=v("linewidth"),b=i("showline",n.showLine||!!s||!!o);b||(delete a.linecolor,delete a.linewidth);var g=y(r,n.bgColor,n.blend||c.lightFraction).toRgbString(),d=v("gridcolor",g),f=v("gridwidth"),m=v("griddash"),l=i("showgrid",n.showGrid||!!d||!!f||!!m);if(l||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),n.hasMinor){var x=y(a.gridcolor,n.bgColor,67).toRgbString(),u=v("minor.gridcolor",x),M=v("minor.gridwidth",a.gridwidth||1),w=v("minor.griddash",a.griddash||"solid"),p=i("minor.showgrid",!!u||!!M||!!w);p||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!n.noZeroLine){var _=v("zerolinecolor",r),h=v("zerolinewidth"),L=i("zeroline",n.showGrid||!!_||!!h);L||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib");N.exports=function(T,e,a,i){var n=i.counterAxes||[],r=i.overlayableAxes||[],v=i.letter,s=i.grid,o,b,g,d;s&&(b=s._domains[v][s._axisMap[e._id]],o=s._anchors[e._id],b&&(g=s[v+"side"].split(" ")[0],d=s.domain[v][g==="right"||g==="top"?1:0])),b=b||[0,1],o=o||(y(T.position)?"free":n[0]||"free"),g=g||(v==="x"?"bottom":"left"),d=d||0;var f=c.coerce(T,e,{anchor:{valType:"enumerated",values:["free"].concat(n),dflt:o}},"anchor");f==="free"&&a("position",d),c.coerce(T,e,{side:{valType:"enumerated",values:v==="x"?["bottom","top"]:["left","right"],dflt:g}},"side");var m=!1;if(r.length&&(m=c.coerce(T,e,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!m){var l=a("domain",b);l[0]>l[1]-1/4096&&(e.domain=b),c.noneOrAll(T.domain,e.domain,b)}return a("layer"),e}},{"../../lib":515,"fast-isnumeric":190}],583:[function(t,N,V){var y=t("./show_dflt");N.exports=function(A,T,e,a,i){i||(i={});var n=i.tickSuffixDflt,r=y(A),v=e("tickprefix");v&&e("showtickprefix",r);var s=e("ticksuffix",n);s&&e("showticksuffix",r)}},{"./show_dflt":586}],584:[function(t,N,V){var y=t("../../constants/alignment").FROM_BL;N.exports=function(A,T,e){e===void 0&&(e=y[A.constraintoward||"center"]);var a=[A.r2l(A.range[0]),A.r2l(A.range[1])],i=a[0]+(a[1]-a[0])*e;A.range=A._input.range=[A.l2r(i+(a[0]-i)*T),A.l2r(i+(a[1]-i)*T)],A.setScale()}},{"../../constants/alignment":483}],585:[function(t,N,V){var y=t("@plotly/d3"),c=t("d3-time-format").utcFormat,A=t("../../lib"),T=A.numberFormat,e=t("fast-isnumeric"),a=A.cleanNumber,i=A.ms2DateTime,n=A.dateTime2ms,r=A.ensureNumber,v=A.isArrayOrTypedArray,s=t("../../constants/numerical"),o=s.FP_SAFE,b=s.BADNUM,g=s.LOG_CLIP,d=s.ONEWEEK,f=s.ONEDAY,m=s.ONEHOUR,l=s.ONEMIN,x=s.ONESEC,u=t("./axis_ids"),M=t("./constants"),w=M.HOUR_PATTERN,p=M.WEEKDAY_PATTERN;function _(L){return Math.pow(10,L)}function h(L){return L!=null}N.exports=function(E,S){S=S||{};var P=E._id||"x",F=P.charAt(0);function I(H,q){if(H>0)return Math.log(H)/Math.LN10;if(H<=0&&q&&E.range&&E.range.length===2){var re=E.range[0],Z=E.range[1];return .5*(re+Z-2*g*Math.abs(re-Z))}else return b}function D(H,q,re,Z){if((Z||{}).msUTC&&e(H))return+H;var Q=n(H,re||E.calendar);if(Q===b)if(e(H)){H=+H;var ie=Math.floor(A.mod(H+.05,1)*10),oe=Math.round(H-ie/10);Q=n(new Date(oe))+ie/10}else return b;return Q}function R(H,q,re){return i(H,q,re||E.calendar)}function O(H){return E._categories[Math.round(H)]}function z(H){if(h(H)){if(E._categoriesMap===void 0&&(E._categoriesMap={}),E._categoriesMap[H]!==void 0)return E._categoriesMap[H];E._categories.push(typeof H=="number"?String(H):H);var q=E._categories.length-1;return E._categoriesMap[H]=q,q}return b}function G(H,q){for(var re=new Array(q),Z=0;Z<q;Z++){var Q=(H[0]||[])[Z],ie=(H[1]||[])[Z];re[Z]=Y([Q,ie])}return re}function Y(H){if(E._categoriesMap)return E._categoriesMap[H]}function ee(H){var q=Y(H);if(q!==void 0)return q;if(e(H))return+H}function j(H){return e(H)?+H:Y(H)}function X(H,q,re){return y.round(re+q*H,2)}function ae(H,q,re){return(H-re)/q}var he=function(q){return e(q)?X(q,E._m,E._b):b},K=function(H){return ae(H,E._m,E._b)};if(E.rangebreaks){var J=F==="y";he=function(H){if(!e(H))return b;var q=E._rangebreaks.length;if(!q)return X(H,E._m,E._b);var re=J;E.range[0]>E.range[1]&&(re=!re);for(var Z=re?-1:1,Q=Z*H,ie=0,oe=0;oe<q;oe++){var ne=Z*E._rangebreaks[oe].min,le=Z*E._rangebreaks[oe].max;if(Q<ne)break;if(Q>le)ie=oe+1;else{ie=Q<(ne+le)/2?oe:oe+1;break}}var _e=E._B[ie]||0;return isFinite(_e)?X(H,E._m2,_e):0},K=function(H){var q=E._rangebreaks.length;if(!q)return ae(H,E._m,E._b);for(var re=0,Z=0;Z<q&&!(H<E._rangebreaks[Z].pmin);Z++)H>E._rangebreaks[Z].pmax&&(re=Z+1);return ae(H,E._m2,E._B[re])}}E.c2l=E.type==="log"?I:r,E.l2c=E.type==="log"?_:r,E.l2p=he,E.p2l=K,E.c2p=E.type==="log"?function(H,q){return he(I(H,q))}:he,E.p2c=E.type==="log"?function(H){return _(K(H))}:K,["linear","-"].indexOf(E.type)!==-1?(E.d2r=E.r2d=E.d2c=E.r2c=E.d2l=E.r2l=a,E.c2d=E.c2r=E.l2d=E.l2r=r,E.d2p=E.r2p=function(H){return E.l2p(a(H))},E.p2d=E.p2r=K,E.cleanPos=r):E.type==="log"?(E.d2r=E.d2l=function(H,q){return I(a(H),q)},E.r2d=E.r2c=function(H){return _(a(H))},E.d2c=E.r2l=a,E.c2d=E.l2r=r,E.c2r=I,E.l2d=_,E.d2p=function(H,q){return E.l2p(E.d2r(H,q))},E.p2d=function(H){return _(K(H))},E.r2p=function(H){return E.l2p(a(H))},E.p2r=K,E.cleanPos=r):E.type==="date"?(E.d2r=E.r2d=A.identity,E.d2c=E.r2c=E.d2l=E.r2l=D,E.c2d=E.c2r=E.l2d=E.l2r=R,E.d2p=E.r2p=function(H,q,re){return E.l2p(D(H,0,re))},E.p2d=E.p2r=function(H,q,re){return R(K(H),q,re)},E.cleanPos=function(H){return A.cleanDate(H,b,E.calendar)}):E.type==="category"?(E.d2c=E.d2l=z,E.r2d=E.c2d=E.l2d=O,E.d2r=E.d2l_noadd=ee,E.r2c=function(H){var q=j(H);return q!==void 0?q:E.fraction2r(.5)},E.l2r=E.c2r=r,E.r2l=j,E.d2p=function(H){return E.l2p(E.r2c(H))},E.p2d=function(H){return O(K(H))},E.r2p=E.d2p,E.p2r=K,E.cleanPos=function(H){return typeof H=="string"&&H!==""?H:r(H)}):E.type==="multicategory"&&(E.r2d=E.c2d=E.l2d=O,E.d2r=E.d2l_noadd=ee,E.r2c=function(H){var q=ee(H);return q!==void 0?q:E.fraction2r(.5)},E.r2c_just_indices=Y,E.l2r=E.c2r=r,E.r2l=ee,E.d2p=function(H){return E.l2p(E.r2c(H))},E.p2d=function(H){return O(K(H))},E.r2p=E.d2p,E.p2r=K,E.cleanPos=function(H){return Array.isArray(H)||typeof H=="string"&&H!==""?H:r(H)},E.setupMultiCategory=function(H){var q=E._traceIndices,re,Z,Q=E._matchGroup;if(Q&&E._categories.length===0){for(var ie in Q)if(ie!==P){var oe=S[u.id2name(ie)];q=q.concat(oe._traceIndices)}}var ne=[[0,{}],[0,{}]],le=[];for(re=0;re<q.length;re++){var _e=H[q[re]];if(F in _e){var fe=_e[F],ye=_e._length||A.minRowLength(fe);if(v(fe[0])&&v(fe[1]))for(Z=0;Z<ye;Z++){var xe=fe[0][Z],me=fe[1][Z];h(xe)&&h(me)&&(le.push([xe,me]),xe in ne[0][1]||(ne[0][1][xe]=ne[0][0]++),me in ne[1][1]||(ne[1][1][me]=ne[1][0]++))}}}for(le.sort(function(be,ke){var De=ne[0][1],He=De[be[0]]-De[ke[0]];if(He)return He;var Ae=ne[1][1];return Ae[be[1]]-Ae[ke[1]]}),re=0;re<le.length;re++)z(le[re])}),E.fraction2r=function(H){var q=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return E.l2r(q+H*(re-q))},E.r2fraction=function(H){var q=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return(E.r2l(H)-q)/(re-q)},E.cleanRange=function(H,q){q||(q={}),H||(H="range");var re=A.nestedProperty(E,H).get(),Z,Q;if(E.type==="date"?Q=A.dfltRange(E.calendar):F==="y"?Q=M.DFLTRANGEY:E._name==="realaxis"?Q=[0,1]:Q=q.dfltRange||M.DFLTRANGEX,Q=Q.slice(),(E.rangemode==="tozero"||E.rangemode==="nonnegative")&&(Q[0]=0),!re||re.length!==2){A.nestedProperty(E,H).set(Q);return}for(E.type==="date"&&!E.autorange&&(re[0]=A.cleanDate(re[0],b,E.calendar),re[1]=A.cleanDate(re[1],b,E.calendar)),Z=0;Z<2;Z++)if(E.type==="date"){if(!A.isDateTime(re[Z],E.calendar)){E[H]=Q;break}if(E.r2l(re[0])===E.r2l(re[1])){var ie=A.constrain(E.r2l(re[0]),A.MIN_MS+1e3,A.MAX_MS-1e3);re[0]=E.l2r(ie-1e3),re[1]=E.l2r(ie+1e3);break}}else{if(!e(re[Z]))if(e(re[1-Z]))re[Z]=re[1-Z]*(Z?10:.1);else{E[H]=Q;break}if(re[Z]<-o?re[Z]=-o:re[Z]>o&&(re[Z]=o),re[0]===re[1]){var oe=Math.max(1,Math.abs(re[0]*1e-6));re[0]-=oe,re[1]+=oe}}},E.setScale=function(H){var q=S._size;if(E.overlaying){var re=u.getFromId({_fullLayout:S},E.overlaying);E.domain=re.domain}var Z=H&&E._r?"_r":"range",Q=E.calendar;E.cleanRange(Z);var ie=E.r2l(E[Z][0],Q),oe=E.r2l(E[Z][1],Q),ne=F==="y";if(ne?(E._offset=q.t+(1-E.domain[1])*q.h,E._length=q.h*(E.domain[1]-E.domain[0]),E._m=E._length/(ie-oe),E._b=-E._m*oe):(E._offset=q.l+E.domain[0]*q.w,E._length=q.w*(E.domain[1]-E.domain[0]),E._m=E._length/(oe-ie),E._b=-E._m*ie),E._rangebreaks=[],E._lBreaks=0,E._m2=0,E._B=[],E.rangebreaks){var le,_e;if(E._rangebreaks=E.locateBreaks(Math.min(ie,oe),Math.max(ie,oe)),E._rangebreaks.length){for(le=0;le<E._rangebreaks.length;le++)_e=E._rangebreaks[le],E._lBreaks+=Math.abs(_e.max-_e.min);var fe=ne;ie>oe&&(fe=!fe),fe&&E._rangebreaks.reverse();var ye=fe?-1:1;for(E._m2=ye*E._length/(Math.abs(oe-ie)-E._lBreaks),E._B.push(-E._m2*(ne?oe:ie)),le=0;le<E._rangebreaks.length;le++)_e=E._rangebreaks[le],E._B.push(E._B[E._B.length-1]-ye*E._m2*(_e.max-_e.min));for(le=0;le<E._rangebreaks.length;le++)_e=E._rangebreaks[le],_e.pmin=he(_e.min),_e.pmax=he(_e.max)}}if(!isFinite(E._m)||!isFinite(E._b)||E._length<0)throw S._replotting=!1,new Error("Something went wrong with axis scaling")},E.maskBreaks=function(H){var q=E.rangebreaks||[],re,Z,Q,ie,oe;q._cachedPatterns||(q._cachedPatterns=q.map(function(De){return De.enabled&&De.bounds?A.simpleMap(De.bounds,De.pattern?a:E.d2c):null})),q._cachedValues||(q._cachedValues=q.map(function(De){return De.enabled&&De.values?A.simpleMap(De.values,E.d2c).sort(A.sorterAsc):null}));for(var ne=0;ne<q.length;ne++){var le=q[ne];if(le.enabled){if(le.bounds){var _e=le.pattern;switch(re=q._cachedPatterns[ne],Z=re[0],Q=re[1],_e){case p:oe=new Date(H),ie=oe.getUTCDay(),Z>Q&&(Q+=7,ie<Z&&(ie+=7));break;case w:oe=new Date(H);var fe=oe.getUTCHours(),ye=oe.getUTCMinutes(),xe=oe.getUTCSeconds(),me=oe.getUTCMilliseconds();ie=fe+(ye/60+xe/3600+me/36e5),Z>Q&&(Q+=24,ie<Z&&(ie+=24));break;case"":ie=H;break}if(ie>=Z&&ie<Q)return b}else for(var be=q._cachedValues[ne],ke=0;ke<be.length;ke++)if(Z=be[ke],Q=Z+le.dvalue,H>=Z&&H<Q)return b}}return H},E.locateBreaks=function(H,q){var re,Z,Q,ie,oe=[];if(!E.rangebreaks)return oe;var ne=E.rangebreaks.slice().sort(function(Ae,Le){return Ae.pattern===p&&Le.pattern===w?-1:Le.pattern===p&&Ae.pattern===w?1:0}),le=function(Ae,Le){if(Ae=A.constrain(Ae,H,q),Le=A.constrain(Le,H,q),Ae!==Le){for(var Ze=!0,We=0;We<oe.length;We++){var ze=oe[We];Ae<ze.max&&Le>=ze.min&&(Ae<ze.min&&(ze.min=Ae),Le>ze.max&&(ze.max=Le),Ze=!1)}Ze&&oe.push({min:Ae,max:Le})}};for(re=0;re<ne.length;re++){var _e=ne[re];if(_e.enabled)if(_e.bounds){var fe=H,ye=q;_e.pattern&&(fe=Math.floor(fe)),Z=A.simpleMap(_e.bounds,_e.pattern?a:E.r2l),Q=Z[0],ie=Z[1];var xe=new Date(fe),me,be;switch(_e.pattern){case p:be=d,me=((ie<Q?7:0)+(ie-Q))*f,fe+=Q*f-(xe.getUTCDay()*f+xe.getUTCHours()*m+xe.getUTCMinutes()*l+xe.getUTCSeconds()*x+xe.getUTCMilliseconds());break;case w:be=f,me=((ie<Q?24:0)+(ie-Q))*m,fe+=Q*m-(xe.getUTCHours()*m+xe.getUTCMinutes()*l+xe.getUTCSeconds()*x+xe.getUTCMilliseconds());break;default:fe=Math.min(Z[0],Z[1]),ye=Math.max(Z[0],Z[1]),be=ye-fe,me=be}for(var ke=fe;ke<ye;ke+=be)le(ke,ke+me)}else for(var De=A.simpleMap(_e.values,E.d2c),He=0;He<De.length;He++)Q=De[He],ie=Q+_e.dvalue,le(Q,ie)}return oe.sort(function(Ae,Le){return Ae.min-Le.min}),oe},E.makeCalcdata=function(H,q,re){var Z,Q,ie,oe,ne=E.type,le=ne==="date"&&H[q+"calendar"];if(q in H){if(Z=H[q],oe=H._length||A.minRowLength(Z),A.isTypedArray(Z)&&(ne==="linear"||ne==="log")){if(oe===Z.length)return Z;if(Z.subarray)return Z.subarray(0,oe)}if(ne==="multicategory")return G(Z,oe);for(Q=new Array(oe),ie=0;ie<oe;ie++)Q[ie]=E.d2c(Z[ie],0,le,re)}else{var _e=q+"0"in H?E.d2c(H[q+"0"],0,le):0,fe=H["d"+q]?Number(H["d"+q]):1;for(Z=H[{x:"y",y:"x"}[q]],oe=H._length||Z.length,Q=new Array(oe),ie=0;ie<oe;ie++)Q[ie]=_e+ie*fe}if(E.rangebreaks)for(ie=0;ie<oe;ie++)Q[ie]=E.maskBreaks(Q[ie]);return Q},E.isValidRange=function(H){return Array.isArray(H)&&H.length===2&&e(E.r2l(H[0]))&&e(E.r2l(H[1]))},E.isPtWithinRange=function(H,q){var re=E.c2l(H[F],null,q),Z=E.r2l(E.range[0]),Q=E.r2l(E.range[1]);return Z<Q?Z<=re&&re<=Q:Q<=re&&re<=Z},E._emptyCategories=function(){E._categories=[],E._categoriesMap={}},E.clearCalc=function(){var H=E._matchGroup;if(H){var q=null,re=null;for(var Z in H){var Q=S[u.id2name(Z)];if(Q._categories){q=Q._categories,re=Q._categoriesMap;break}}q&&re?(E._categories=q,E._categoriesMap=re):E._emptyCategories()}else E._emptyCategories();if(E._initialCategories)for(var ie=0;ie<E._initialCategories.length;ie++)z(E._initialCategories[ie])},E.sortByInitialCategories=function(){var H=[];if(E._emptyCategories(),E._initialCategories)for(var q=0;q<E._initialCategories.length;q++)z(E._initialCategories[q]);H=H.concat(E._traceIndices);var re=E._matchGroup;for(var Z in re)if(P!==Z){var Q=S[u.id2name(Z)];Q._categories=E._categories,Q._categoriesMap=E._categoriesMap,H=H.concat(Q._traceIndices)}return H};var U=S._d3locale;E.type==="date"&&(E._dateFormat=U?U.timeFormat:c,E._extraFormat=S._extraFormat),E._separators=S.separators,E._numFormat=U?U.numberFormat:T,delete E._minDtick,delete E._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(t,N,V){N.exports=function(c){var A=["showexponent","showtickprefix","showticksuffix"],T=A.filter(function(a){return c[a]!==void 0}),e=function(a){return c[a]===c[T[0]]};if(T.every(e)||T.length===1)return c[T[0]]}},{}],587:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color").contrast,A=t("./layout_attributes"),T=t("./show_dflt"),e=t("../array_container_defaults");N.exports=function(n,r,v,s,o){o||(o={});var b=T(n),g=v("showticklabels");if(g){var d=o.font||{},f=r.color,m=r.ticklabelposition||"",l=m.indexOf("inside")!==-1?c(o.bgColor):f&&f!==A.color.dflt?f:d.color;if(y.coerceFont(v,"tickfont",{family:d.family,size:d.size,color:l}),!o.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&v("ticklabelstep"),o.noAng||v("tickangle"),s!=="category"){var x=v("tickformat");e(n,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),r.tickformatstops.length||delete r.tickformatstops,!o.noExp&&!x&&s!=="date"&&(v("showexponent",b),v("exponentformat"),v("minexponent"),v("separatethousands"))}}};function a(i,n){function r(s,o){return y.coerce(i,n,A.tickformatstops,s,o)}var v=r("enabled");v&&(r("dtickrange"),r("value"))}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(T,e,a,i){var n=i.isMinor,r=n?T.minor||{}:T,v=n?e.minor:e,s=n?c.minor:c,o=n?"minor.":"",b=y.coerce2(r,v,s,"ticklen",n?(e.ticklen||5)*.6:void 0),g=y.coerce2(r,v,s,"tickwidth",n?e.tickwidth||1:void 0),d=y.coerce2(r,v,s,"tickcolor",(n?e.tickcolor:void 0)||v.color),f=a(o+"ticks",!n&&i.outerTicks||b||g||d?"outside":"");f||(delete v.ticklen,delete v.tickwidth,delete v.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(t,N,V){var y=t("./clean_ticks"),c=t("../../lib").isArrayOrTypedArray;N.exports=function(T,e,a,i,n){n||(n={});var r=n.isMinor,v=r?T.minor||{}:T,s=r?e.minor:e,o=r?"minor.":"";function b(M){var w=v[M];return w!==void 0?w:(s._template||{})[M]}var g=b("tick0"),d=b("dtick"),f=b("tickvals"),m=c(f)?"array":d?"linear":"auto",l=a(o+"tickmode",m);if(l==="auto")a(o+"nticks");else if(l==="linear"){var x=s.dtick=y.dtick(d,i);s.tick0=y.tick0(g,i,e.calendar,x)}else if(i!=="multicategory"){var u=a(o+"tickvals");u===void 0?s.tickmode="auto":r||a("ticktext")}}},{"../../lib":515,"./clean_ticks":572}],590:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../registry"),A=t("../../lib"),T=t("../../components/drawing"),e=t("./axes");N.exports=function(i,n,r,v){var s=i._fullLayout;if(n.length===0){e.redrawComponents(i);return}function o(w){var p=w.xaxis,_=w.yaxis;s._defs.select("#"+w.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),w.plot.call(T.setTranslate,p._offset,_._offset).call(T.setScale,1,1);var h=w.plot.selectAll(".scatterlayer .trace");h.selectAll(".point").call(T.setPointGroupScale,1,1),h.selectAll(".textpoint").call(T.setTextPointsScale,1,1),h.call(T.hideOutsideRangePoints,w)}function b(w,p){var _=w.plotinfo,h=_.xaxis,L=_.yaxis,E=h._length,S=L._length,P=!!w.xr1,F=!!w.yr1,I=[];if(P){var D=A.simpleMap(w.xr0,h.r2l),R=A.simpleMap(w.xr1,h.r2l),O=D[1]-D[0],z=R[1]-R[0];I[0]=(D[0]*(1-p)+p*R[0]-D[0])/(D[1]-D[0])*E,I[2]=E*(1-p+p*z/O),h.range[0]=h.l2r(D[0]*(1-p)+p*R[0]),h.range[1]=h.l2r(D[1]*(1-p)+p*R[1])}else I[0]=0,I[2]=E;if(F){var G=A.simpleMap(w.yr0,L.r2l),Y=A.simpleMap(w.yr1,L.r2l),ee=G[1]-G[0],j=Y[1]-Y[0];I[1]=(G[1]*(1-p)+p*Y[1]-G[1])/(G[0]-G[1])*S,I[3]=S*(1-p+p*j/ee),L.range[0]=h.l2r(G[0]*(1-p)+p*Y[0]),L.range[1]=L.l2r(G[1]*(1-p)+p*Y[1])}else I[1]=0,I[3]=S;e.drawOne(i,h,{skipTitle:!0}),e.drawOne(i,L,{skipTitle:!0}),e.redrawComponents(i,[h._id,L._id]);var X=P?E/I[2]:1,ae=F?S/I[3]:1,he=P?I[0]:0,K=F?I[1]:0,J=P?I[0]/I[2]*E:0,U=F?I[1]/I[3]*S:0,H=h._offset-J,q=L._offset-U;_.clipRect.call(T.setTranslate,he,K).call(T.setScale,1/X,1/ae),_.plot.call(T.setTranslate,H,q).call(T.setScale,X,ae),T.setPointGroupScale(_.zoomScalePts,1/X,1/ae),T.setTextPointsScale(_.zoomScaleTxt,1/X,1/ae)}var g;v&&(g=v());function d(){for(var w={},p=0;p<n.length;p++){var _=n[p],h=_.plotinfo.xaxis,L=_.plotinfo.yaxis;_.xr1&&(w[h._name+".range"]=_.xr1.slice()),_.yr1&&(w[L._name+".range"]=_.yr1.slice())}return g&&g(),c.call("relayout",i,w).then(function(){for(var E=0;E<n.length;E++)o(n[E].plotinfo)})}function f(){for(var w={},p=0;p<n.length;p++){var _=n[p],h=_.plotinfo.xaxis,L=_.plotinfo.yaxis;_.xr0&&(w[h._name+".range"]=_.xr0.slice()),_.yr0&&(w[L._name+".range"]=_.yr0.slice())}return c.call("relayout",i,w).then(function(){for(var E=0;E<n.length;E++)o(n[E].plotinfo)})}var m,l,x,u=y.ease(r.easing);i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(x),x=null,f()});function M(){l=Date.now();for(var w=Math.min(1,(l-m)/r.duration),p=u(w),_=0;_<n.length;_++)b(n[_],p);l-m>r.duration?(d(),x=window.cancelAnimationFrame(M)):x=window.requestAnimationFrame(M)}return m=Date.now(),x=window.requestAnimationFrame(M),Promise.resolve()}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(t,N,V){var y=t("../../registry").traceIs,c=t("./axis_autotype");N.exports=function(n,r,v,s){v("autotypenumbers",s.autotypenumbersDflt);var o=v("type",(s.splomStash||{}).type);o==="-"&&(A(r,s.data),r.type==="-"?r.type="linear":n.type=r.type)};function A(i,n){if(i.type==="-"){var r=i._id,v=r.charAt(0),s;r.indexOf("scene")!==-1&&(r=v);var o=T(n,r,v);if(!!o){if(o.type==="histogram"&&v==={v:"y",h:"x"}[o.orientation||"v"]){i.type="linear";return}var b=v+"calendar",g=o[b],d={noMultiCategory:!y(o,"cartesian")||y(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&v==={h:"x",v:"y"}[o.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=i.autotypenumbers,a(o,v)){var f=e(o),m=[];for(s=0;s<n.length;s++){var l=n[s];!y(l,"box-violin")||(l[v+"axis"]||v)!==r||(l[f]!==void 0?m.push(l[f][0]):l.name!==void 0?m.push(l.name):m.push("text"),l[b]!==g&&(g=void 0))}i.type=c(m,g,d)}else if(o.type==="splom"){var x=o.dimensions,u=x[o._axesDim[r]];u.visible&&(i.type=c(u.values,g,d))}else i.type=c(o[v]||[o[v+"0"]],g,d)}}}function T(i,n,r){for(var v=0;v<i.length;v++){var s=i[v];if(s.type==="splom"&&s._length>0&&(s["_"+r+"axes"]||{})[n])return s;if((s[r+"axis"]||r)===n){if(a(s,r))return s;if((s[r]||[]).length||s[r+"0"])return s}}}function e(i){return{v:"x",h:"y"}[i.orientation||"v"]}function a(i,n){var r=e(i),v=y(i,"box-violin"),s=y(i._fullInput||{},"candlestick");return v&&!s&&n===r&&i[r]===void 0&&i[r+"0"]===void 0}},{"../../registry":647,"./axis_autotype":567}],592:[function(t,N,V){var y=t("../registry"),c=t("../lib");V.manageCommandObserver=function(n,r,v,s){var o={},b=!0;r&&r._commandObserver&&(o=r._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var g=V.hasSimpleAPICommandBindings(n,v,o.lookupTable);if(r&&r._commandObserver){if(g)return o;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,o}if(g){A(n,g,o.cache),o.check=function(){if(!!b){var l=A(n,g,o.cache);return l.changed&&s&&o.lookupTable[l.value]!==void 0&&(o.disable(),Promise.resolve(s({value:l.value,type:g.type,prop:g.prop,traces:g.traces,index:o.lookupTable[l.value]})).then(o.enable,o.enable)),l.changed}};for(var d=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<d.length;f++)n._internalOn(d[f],o.check);o.remove=function(){for(var m=0;m<d.length;m++)n._removeInternalListener(d[m],o.check)}}else c.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){b=!1},o.enable=function(){b=!0},r&&(r._commandObserver=o),o},V.hasSimpleAPICommandBindings=function(n,r,v){var s,o=r.length,b;for(s=0;s<o;s++){var g,d=r[s],f=d.method,m=d.args;if(Array.isArray(m)||(m=[]),!f)return!1;var l=V.computeAPICommandBindings(n,f,m);if(l.length!==1)return!1;if(!b)b=l[0],Array.isArray(b.traces)&&b.traces.sort();else{if(g=l[0],g.type!==b.type||g.prop!==b.prop)return!1;if(Array.isArray(b.traces))if(Array.isArray(g.traces)){g.traces.sort();for(var x=0;x<b.traces.length;x++)if(b.traces[x]!==g.traces[x])return!1}else return!1;else if(g.prop!==b.prop)return!1}g=l[0];var u=g.value;if(Array.isArray(u))if(u.length===1)u=u[0];else return!1;v&&(v[u]=s)}return b};function A(n,r,v){var s,o,b,g=!1;if(r.type==="data")s=n._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")s=n._fullLayout;else return!1;return o=c.nestedProperty(s,r.prop).get(),b=v[r.type]=v[r.type]||{},b.hasOwnProperty(r.prop)&&b[r.prop]!==o&&(g=!0),b[r.prop]=o,{changed:g,value:o}}V.executeAPICommand=function(n,r,v){if(r==="skip")return Promise.resolve();var s=y.apiMethodRegistry[r],o=[n];Array.isArray(v)||(v=[]);for(var b=0;b<v.length;b++)o.push(v[b]);return s.apply(null,o).catch(function(g){return c.warn("API call to Plotly."+r+" rejected.",g),Promise.reject(g)})},V.computeAPICommandBindings=function(n,r,v){var s;switch(Array.isArray(v)||(v=[]),r){case"restyle":s=a(n,v);break;case"relayout":s=e(n,v);break;case"update":s=a(n,[v[0],v[2]]).concat(e(n,[v[1]]));break;case"animate":s=T(n,v);break;default:s=[]}return s};function T(n,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function e(n,r){var v=[],s=r[0],o={};if(typeof s=="string")o[s]=r[1];else if(c.isPlainObject(s))o=s;else return v;return i(o,function(b,g,d){v.push({type:"layout",prop:b,value:d})},"",0),v}function a(n,r){var v,s,o,b,g=[];if(s=r[0],o=r[1],v=r[2],b={},typeof s=="string")b[s]=o;else if(c.isPlainObject(s))b=s,v===void 0&&(v=o);else return g;return v===void 0&&(v=null),i(b,function(d,f,m){var l,x;if(Array.isArray(m)){x=m.slice();var u=Math.min(x.length,n.data.length);v&&(u=Math.min(u,v.length)),l=[];for(var M=0;M<u;M++)l[M]=v?v[M]:M}else x=m,l=v?v.slice():null;if(l===null)Array.isArray(x)&&(x=x[0]);else if(Array.isArray(l)){if(!Array.isArray(x)){var w=x;x=[];for(var p=0;p<l.length;p++)x[p]=w}x.length=Math.min(l.length,x.length)}g.push({type:"data",prop:d,traces:l,value:x})},"",0),g}function i(n,r,v,s){Object.keys(n).forEach(function(o){var b=n[o];if(o[0]!=="_"){var g=v+(s>0?".":"")+o;c.isPlainObject(b)?i(b,r,g,s+1):r(g,o,b)}})}},{"../lib":515,"../registry":647}],593:[function(t,N,V){var y=t("../lib/extend").extendFlat;V.attributes=function(c,A){c=c||{},A=A||{};var T={valType:"info_array",editType:c.editType,items:[{valType:"number",min:0,max:1,editType:c.editType},{valType:"number",min:0,max:1,editType:c.editType}],dflt:[0,1]};c.name&&c.name+"",c.trace,A.description&&""+A.description;var e={x:y({},T,{}),y:y({},T,{}),editType:c.editType};return c.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:c.editType},e.column={valType:"integer",min:0,dflt:0,editType:c.editType}),e},V.defaults=function(c,A,T,e){var a=e&&e.x||[0,1],i=e&&e.y||[0,1],n=A.grid;if(n){var r=T("domain.column");r!==void 0&&(r<n.columns?a=n._domains.x[r]:delete c.domain.column);var v=T("domain.row");v!==void 0&&(v<n.rows?i=n._domains.y[v]:delete c.domain.row)}var s=T("domain.x",a),o=T("domain.y",i);s[0]<s[1]||(c.domain.x=a.slice()),o[0]<o[1]||(c.domain.y=i.slice())}},{"../lib/extend":505}],594:[function(t,N,V){N.exports=function(y){var c=y.editType,A=y.colorEditType;A===void 0&&(A=c);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:c},size:{valType:"number",min:1,editType:c},color:{valType:"color",editType:A},editType:c};return y.autoSize&&(T.size.dflt="auto"),y.autoColor&&(T.color.dflt="auto"),y.arrayOk&&(T.family.arrayOk=!0,T.size.arrayOk=!0,T.color.arrayOk=!0),T}},{}],595:[function(t,N,V){N.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(t,N,V){V.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},V.axesNames=["lonaxis","lataxis"],V.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},V.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},V.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},V.clipPad=.001,V.precision=.1,V.landColor="#F0DC82",V.waterColor="#3399FF",V.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},V.sphereSVG={type:"Sphere"},V.fillLayers={ocean:1,land:1,lakes:1},V.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},V.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],V.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],V.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(t,N,V){var y=t("@plotly/d3"),c=t("d3-geo"),A=c.geoPath,T=c.geoDistance,e=t("d3-geo-projection"),a=t("../../registry"),i=t("../../lib"),n=i.strTranslate,r=t("../../components/color"),v=t("../../components/drawing"),s=t("../../components/fx"),o=t("../plots"),b=t("../cartesian/axes"),g=t("../cartesian/autorange").getAutoRange,d=t("../../components/dragelement"),f=t("../../components/selections").prepSelect,m=t("../../components/selections").clearOutline,l=t("../../components/selections").selectOnClick,x=t("./zoom"),u=t("./constants"),M=t("../../lib/geo_location_utils"),w=t("../../lib/topojson_utils"),p=t("topojson-client").feature;function _(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var h=_.prototype;N.exports=function(F){return new _(F)},h.plot=function(P,F,I,D){var R=this;if(D)return R.update(P,F,!0);R._geoCalcData=P,R._fullLayout=F;var O=F[this.id],z=[],G=!1;for(var Y in u.layerNameToAdjective)if(Y!=="frame"&&O["show"+Y]){G=!0;break}for(var ee=!1,j=0;j<P.length;j++){var X=P[0][0].trace;X._geo=R,X.locationmode&&(G=!0);var ae=X.marker;if(ae){var he=ae.angle,K=ae.angleref;(he||K==="north"||K==="previous")&&(ee=!0)}}if(this._hasMarkerAngles=ee,G){var J=w.getTopojsonName(O);(R.topojson===null||J!==R.topojsonName)&&(R.topojsonName=J,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&z.push(R.fetchTopojson()))}z=z.concat(M.fetchTraceGeoData(P)),I.push(new Promise(function(U,H){Promise.all(z).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(P,F),U()}).catch(H)}))},h.fetchTopojson=function(){var P=this,F=w.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(I,D){y.json(F,function(R,O){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=O,I()})})},h.update=function(P,F,I){var D=F[this.id];this.hasChoropleth=!1;for(var R=0;R<P.length;R++){var O=P[R],z=O[0].trace;z.type==="choropleth"&&(this.hasChoropleth=!0),z.visible===!0&&z._length>0&&z._module.calcGeoJSON(O,F)}if(!I){var G=this.updateProjection(P,F);if(G)return;(!this.viewInitial||this.scope!==D.scope)&&this.saveViewInitial(D)}this.scope=D.scope,this.updateBaseLayers(F,D),this.updateDims(F,D),this.updateFx(F,D),o.generalUpdatePerTraceModule(this.graphDiv,this,P,D);var Y=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Y.selectAll(".point"),this.dataPoints.text=Y.selectAll("text"),this.dataPaths.line=Y.selectAll(".js-line");var ee=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=ee.selectAll("path"),this._render()},h.updateProjection=function(P,F){var I=this.graphDiv,D=F[this.id],R=F._size,O=D.domain,z=D.projection,G=D.lonaxis,Y=D.lataxis,ee=G._ax,j=Y._ax,X=this.projection=L(D),ae=[[R.l+R.w*O.x[0],R.t+R.h*(1-O.y[1])],[R.l+R.w*O.x[1],R.t+R.h*(1-O.y[0])]],he=D.center||{},K=z.rotation||{},J=G.range||[],U=Y.range||[];if(D.fitbounds){ee._length=ae[1][0]-ae[0][0],j._length=ae[1][1]-ae[0][1],ee.range=g(I,ee),j.range=g(I,j);var H=(ee.range[0]+ee.range[1])/2,q=(j.range[0]+j.range[1])/2;if(D._isScoped)he={lon:H,lat:q};else if(D._isClipped){he={lon:H,lat:q},K={lon:H,lat:q,roll:K.roll};var re=z.type,Z=u.lonaxisSpan[re]/2||180,Q=u.lataxisSpan[re]/2||90;J=[H-Z,H+Z],U=[q-Q,q+Q]}else he={lon:H,lat:q},K={lon:H,lat:K.lat,roll:K.roll}}X.center([he.lon-K.lon,he.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(z.parallels);var ie=S(J,U);X.fitExtent(ae,ie);var oe=this.bounds=X.getBounds(ie),ne=this.fitScale=X.scale(),le=X.translate();if(D.fitbounds){var _e=X.getBounds(S(ee.range,j.range)),fe=Math.min((oe[1][0]-oe[0][0])/(_e[1][0]-_e[0][0]),(oe[1][1]-oe[0][1])/(_e[1][1]-_e[0][1]));isFinite(fe)?X.scale(fe*ne):i.warn("Something went wrong during"+this.id+"fitbounds computations.")}else X.scale(z.scale*ne);var ye=this.midPt=[(oe[0][0]+oe[1][0])/2,(oe[0][1]+oe[1][1])/2];if(X.translate([le[0]+(ye[0]-le[0]),le[1]+(ye[1]-le[1])]).clipExtent(oe),D._isAlbersUsa){var xe=X([he.lon,he.lat]),me=X.translate();X.translate([me[0]-(xe[0]-me[0]),me[1]-(xe[1]-me[1])])}},h.updateBaseLayers=function(P,F){var I=this,D=I.topojson,R=I.layers,O=I.basePaths;function z(ae){return ae==="lonaxis"||ae==="lataxis"}function G(ae){return Boolean(u.lineLayers[ae])}function Y(ae){return Boolean(u.fillLayers[ae])}var ee=this.hasChoropleth?u.layersForChoropleth:u.layers,j=ee.filter(function(ae){return G(ae)||Y(ae)?F["show"+ae]:z(ae)?F[ae].showgrid:!0}),X=I.framework.selectAll(".layer").data(j,String);X.exit().each(function(ae){delete R[ae],delete O[ae],y.select(this).remove()}),X.enter().append("g").attr("class",function(ae){return"layer "+ae}).each(function(ae){var he=R[ae]=y.select(this);ae==="bg"?I.bgRect=he.append("rect").style("pointer-events","all"):z(ae)?O[ae]=he.append("path").style("fill","none"):ae==="backplot"?he.append("g").classed("choroplethlayer",!0):ae==="frontplot"?he.append("g").classed("scatterlayer",!0):G(ae)?O[ae]=he.append("path").style("fill","none").style("stroke-miterlimit",2):Y(ae)&&(O[ae]=he.append("path").style("stroke","none"))}),X.order(),X.each(function(ae){var he=O[ae],K=u.layerNameToAdjective[ae];ae==="frame"?he.datum(u.sphereSVG):G(ae)||Y(ae)?he.datum(p(D,D.objects[ae])):z(ae)&&he.datum(E(ae,F,P)).call(r.stroke,F[ae].gridcolor).call(v.dashLine,F[ae].griddash,F[ae].gridwidth),G(ae)?he.call(r.stroke,F[K+"color"]).call(v.dashLine,"",F[K+"width"]):Y(ae)&&he.call(r.fill,F[K+"color"])})},h.updateDims=function(P,F){var I=this.bounds,D=(F.framewidth||0)/2,R=I[0][0]-D,O=I[0][1]-D,z=I[1][0]-R+D,G=I[1][1]-O+D;v.setRect(this.clipRect,R,O,z,G),this.bgRect.call(v.setRect,R,O,z,G).call(r.fill,F.bgcolor),this.xaxis._offset=R,this.xaxis._length=z,this.yaxis._offset=O,this.yaxis._length=G},h.updateFx=function(P,F){var I=this,D=I.graphDiv,R=I.bgRect,O=P.dragmode,z=P.clickmode;if(I.isStatic)return;function G(){var X=I.viewInitial,ae={};for(var he in X)ae[I.id+"."+he]=X[he];a.call("_guiRelayout",D,ae),D.emit("plotly_doubleclick",null)}function Y(X){return I.projection.invert([X[0]+I.xaxis._offset,X[1]+I.yaxis._offset])}var ee=function(X,ae){if(ae.isRect){var he=X.range={};he[I.id]=[Y([ae.xmin,ae.ymin]),Y([ae.xmax,ae.ymax])]}else{var K=X.lassoPoints={};K[I.id]=ae.map(Y)}},j={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:ee},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(X){X===2&&m(D)}};O==="pan"?(R.node().onmousedown=null,R.call(x(I,F)),R.on("dblclick.zoom",G),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(R.on(".zoom",null),j.prepFn=function(X,ae,he){f(X,ae,he,j,O)},d.init(j)),R.on("mousemove",function(){var X=I.projection.invert(i.getPositionFromD3Event());if(!X)return d.unhover(D,y.event);I.xaxis.p2c=function(){return X[0]},I.yaxis.p2c=function(){return X[1]},s.hover(D,y.event,I.id)}),R.on("mouseout",function(){D._dragging||d.unhover(D,y.event)}),R.on("click",function(){O!=="select"&&O!=="lasso"&&(z.indexOf("select")>-1&&l(y.event,D,[I.xaxis],[I.yaxis],I.id,j),z.indexOf("event")>-1&&s.click(D,y.event))})},h.makeFramework=function(){var P=this,F=P.graphDiv,I=F._fullLayout,D="clip"+I._uid+P.id;P.clipDef=I._clips.append("clipPath").attr("id",D),P.clipRect=P.clipDef.append("rect"),P.framework=y.select(P.container).append("g").attr("class","geo "+P.id).call(v.setClipUrl,D,F),P.project=function(R){var O=P.projection(R);return O?[O[0]-P.xaxis._offset,O[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(R){return P.project(R)[0]}},P.yaxis={_id:"y",c2p:function(R){return P.project(R)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(P.mockAxis,I)},h.saveViewInitial=function(P){var F=P.center||{},I=P.projection,D=I.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":I.scale};var R;P._isScoped?R={"center.lon":F.lon,"center.lat":F.lat}:P._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":D.lon},i.extendFlat(this.viewInitial,R)},h.render=function(P){this._hasMarkerAngles&&P?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},h._render=function(){var P=this.projection,F=P.getPath(),I;function D(O){var z=P(O.lonlat);return z?n(z[0],z[1]):null}function R(O){return P.isLonLatOverEdges(O.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",F);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(O){return F(O.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",D)};function L(P){var F=P.projection,I=F.type,D=u.projNames[I];D="geo"+i.titleCase(D);for(var R=c[D]||e[D],O=R(),z=P._isSatellite?Math.acos(1/F.distance)*180/Math.PI:P._isClipped?u.lonaxisSpan[I]/2:null,G=["center","rotate","parallels","clipExtent"],Y=function(X){return X?O:[]},ee=0;ee<G.length;ee++){var j=G[ee];typeof O[j]!="function"&&(O[j]=Y)}return O.isLonLatOverEdges=function(X){if(O(X)===null)return!0;if(z){var ae=O.rotate(),he=T(X,[-ae[0],-ae[1]]),K=z*Math.PI/180;return he>K}else return!1},O.getPath=function(){return A().projection(O)},O.getBounds=function(X){return O.getPath().bounds(X)},O.precision(u.precision),P._isSatellite&&O.tilt(F.tilt).distance(F.distance),z&&O.clipAngle(z-u.clipPad),O}function E(P,F,I){var D=1e-6,R=2.5,O=F[P],z=u.scopeDefaults[F.scope],G,Y,ee;P==="lonaxis"?(G=z.lonaxisRange,Y=z.lataxisRange,ee=function(q,re){return[q,re]}):P==="lataxis"&&(G=z.lataxisRange,Y=z.lonaxisRange,ee=function(q,re){return[re,q]});var j={type:"linear",range:[G[0],G[1]-D],tick0:O.tick0,dtick:O.dtick};b.setConvert(j,I);var X=b.calcTicks(j);!F.isScoped&&P==="lonaxis"&&X.pop();for(var ae=X.length,he=new Array(ae),K=0;K<ae;K++)for(var J=X[K].x,U=he[K]=[],H=Y[0];H<Y[1]+R;H+=R)U.push(ee(J,H));return{type:"MultiLineString",coordinates:he}}function S(P,F){var I=u.clipPad,D=P[0]+I,R=P[1]-I,O=F[0]+I,z=F[1]-I;D>0&&R<0&&(R+=360);var G=(R-D)/4;return{type:"Polygon",coordinates:[[[D,O],[D,z],[D+G,z],[D+2*G,z],[D+3*G,z],[R,z],[R,O],[R-G,O],[R-2*G,O],[R-3*G,O],[D,O]]]}}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(t,N,V){var y=t("../../plots/get_data").getSubplotCalcData,c=t("../../lib").counterRegex,A=t("./geo"),T="geo",e=c(T),a={};a[T]={valType:"subplotid",dflt:T,editType:"calc"};function i(v){for(var s=v._fullLayout,o=v.calcdata,b=s._subplots[T],g=0;g<b.length;g++){var d=b[g],f=y(o,T,d),m=s[d],l=m._subplot;l||(l=A({id:d,graphDiv:v,container:s._geolayer.node(),topojsonURL:v._context.topojsonURL,staticPlot:v._context.staticPlot}),s[d]._subplot=l),l.plot(f,s,v._promises)}}function n(v,s,o,b){for(var g=b._subplots[T]||[],d=0;d<g.length;d++){var f=g[d],m=b[f]._subplot;!s[f]&&!!m&&(m.framework.remove(),m.clipDef.remove())}}function r(v){for(var s=v._fullLayout,o=s._subplots[T],b=0;b<o.length;b++){var g=s[o[b]],d=g._subplot;d.updateFx(s,g)}}N.exports={attr:T,name:T,idRoot:T,idRegex:e,attrRegex:e,attributes:a,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:i,updateFx:r,clean:n}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(t,N,V){var y=t("../../components/color/attributes"),c=t("../domain").attributes,A=t("../../components/drawing/attributes").dash,T=t("./constants"),e=t("../../plot_api/edit_types").overrideAll,a=t("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:y.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:A},n=N.exports=e({domain:c({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:y.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:y.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:y.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:y.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:y.background},lonaxis:i,lataxis:i},"plot","from-root");n.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(t,N,V){var y=t("../../lib"),c=t("../subplot_defaults"),A=t("../get_data").getSubplotData,T=t("./constants"),e=t("./layout_attributes"),a=T.axesNames;N.exports=function(r,v,s){c(r,v,s,{type:"geo",attributes:e,handleDefaults:i,fullData:s,partition:"y"})};function i(n,r,v,s){var o=A(s.fullData,"geo",s.id),b=o.map(function(U){return U._expandedIndex}),g=v("resolution"),d=v("scope"),f=T.scopeDefaults[d],m=v("projection.type",f.projType),l=r._isAlbersUsa=m==="albers usa";l&&(d=r.scope="usa");var x=r._isScoped=d!=="world",u=r._isSatellite=m==="satellite",M=r._isConic=m.indexOf("conic")!==-1||m==="albers",w=r._isClipped=!!T.lonaxisSpan[m];if(n.visible===!1){var p=y.extendDeep({},r._template);p.showcoastlines=!1,p.showcountries=!1,p.showframe=!1,p.showlakes=!1,p.showland=!1,p.showocean=!1,p.showrivers=!1,p.showsubunits=!1,p.lonaxis&&(p.lonaxis.showgrid=!1),p.lataxis&&(p.lataxis.showgrid=!1),r._template=p}for(var _=v("visible"),h,L=0;L<a.length;L++){var E=a[L],S=[30,10][L],P;if(x)P=f[E+"Range"];else{var F=T[E+"Span"],I=(F[m]||F["*"])/2,D=v("projection.rotation."+E.substr(0,3),f.projRotate[L]);P=[D-I,D+I]}var R=v(E+".range",P);v(E+".tick0"),v(E+".dtick",S),h=v(E+".showgrid",_?void 0:!1),h&&(v(E+".gridcolor"),v(E+".gridwidth"),v(E+".griddash")),r[E]._ax={type:"linear",_id:E.slice(0,3),_traceIndices:b,setScale:y.identity,c2l:y.identity,r2l:y.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var O=r.lonaxis.range,z=r.lataxis.range,G=O[0],Y=O[1];G>0&&Y<0&&(Y+=360);var ee=(G+Y)/2,j;if(!l){var X=x?f.projRotate:[ee,0,0];j=v("projection.rotation.lon",X[0]),v("projection.rotation.lat",X[1]),v("projection.rotation.roll",X[2]),h=v("showcoastlines",!x&&_),h&&(v("coastlinecolor"),v("coastlinewidth")),h=v("showocean",_?void 0:!1),h&&v("oceancolor")}var ae,he;if(l?(ae=-96.6,he=38.7):(ae=x?ee:j,he=(z[0]+z[1])/2),v("center.lon",ae),v("center.lat",he),u&&(v("projection.tilt"),v("projection.distance")),M){var K=f.projParallels||[0,60];v("projection.parallels",K)}v("projection.scale"),h=v("showland",_?void 0:!1),h&&v("landcolor"),h=v("showlakes",_?void 0:!1),h&&v("lakecolor"),h=v("showrivers",_?void 0:!1),h&&(v("rivercolor"),v("riverwidth")),h=v("showcountries",x&&d!=="usa"&&_),h&&(v("countrycolor"),v("countrywidth")),(d==="usa"||d==="north america"&&g===50)&&(v("showsubunits",_),v("subunitcolor"),v("subunitwidth")),x||(h=v("showframe",_),h&&(v("framecolor"),v("framewidth"))),v("bgcolor");var J=v("fitbounds");J&&(delete r.projection.scale,x?(delete r.center.lon,delete r.center.lat):w?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../registry"),T=Math.PI/180,e=180/Math.PI,a={cursor:"pointer"},i={cursor:"auto"};function n(E,S){var P=E.projection,F;return S._isScoped?F=s:S._isClipped?F=b:F=o,F(E,P)}N.exports=n;function r(E,S){return y.behavior.zoom().translate(S.translate()).scale(S.scale())}function v(E,S,P){var F=E.id,I=E.graphDiv,D=I.layout,R=D[F],O=I._fullLayout,z=O[F],G={},Y={};function ee(j,X){G[F+"."+j]=c.nestedProperty(R,j).get(),A.call("_storeDirectGUIEdit",D,O._preGUI,G);var ae=c.nestedProperty(z,j);ae.get()!==X&&(ae.set(X),c.nestedProperty(R,j).set(X),Y[F+"."+j]=X)}P(ee),ee("projection.scale",S.scale()/E.fitScale),ee("fitbounds",!1),I.emit("plotly_relayout",Y)}function s(E,S){var P=r(E,S);function F(){y.select(this).style(a)}function I(){S.scale(y.event.scale).translate(y.event.translate),E.render(!0);var O=S.invert(E.midPt);E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}function D(O){var z=S.invert(E.midPt);O("center.lon",z[0]),O("center.lat",z[1])}function R(){y.select(this).style(i),v(E,S,D)}return P.on("zoomstart",F).on("zoom",I).on("zoomend",R),P}function o(E,S){var P=r(E,S),F=2,I,D,R,O,z,G,Y,ee,j;function X(H){return S.invert(H)}function ae(H){var q=X(H);if(!q)return!0;var re=S(q);return Math.abs(re[0]-H[0])>F||Math.abs(re[1]-H[1])>F}function he(){y.select(this).style(a),I=y.mouse(this),D=S.rotate(),R=S.translate(),O=D,z=X(I)}function K(){if(G=y.mouse(this),ae(I)){P.scale(S.scale()),P.translate(S.translate());return}S.scale(y.event.scale),S.translate([R[0],y.event.translate[1]]),z?X(G)&&(ee=X(G),Y=[O[0]+(ee[0]-z[0]),D[1],D[2]],S.rotate(Y),O=Y):(I=G,z=X(I)),j=!0,E.render(!0);var H=S.rotate(),q=S.invert(E.midPt);E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.center.lon":q[0],"geo.center.lat":q[1],"geo.projection.rotation.lon":-H[0]})}function J(){y.select(this).style(i),j&&v(E,S,U)}function U(H){var q=S.rotate(),re=S.invert(E.midPt);H("projection.rotation.lon",-q[0]),H("center.lon",re[0]),H("center.lat",re[1])}return P.on("zoomstart",he).on("zoom",K).on("zoomend",J),P}function b(E,S){S.rotate(),S.scale();var P=r(E,S),F=L(P,"zoomstart","zoom","zoomend"),I=0,D=P.on,R;P.on("zoomstart",function(){y.select(this).style(a);var ee=y.mouse(this),j=S.rotate(),X=j,ae=S.translate(),he=d(j);R=g(S,ee),D.call(P,"zoom",function(){var K=y.mouse(this);if(S.scale(y.event.scale),!R)ee=K,R=g(S,ee);else if(g(S,K)){S.rotate(j).translate(ae);var J=g(S,K),U=m(R,J),H=w(f(he,U)),q=l(H,R,X);(!isFinite(q[0])||!isFinite(q[1])||!isFinite(q[2]))&&(q=X),S.rotate(q),X=q}z(F.of(this,arguments))}),O(F.of(this,arguments))}).on("zoomend",function(){y.select(this).style(i),D.call(P,"zoom",null),G(F.of(this,arguments)),v(E,S,Y)}).on("zoom.redraw",function(){E.render(!0);var ee=S.rotate();E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})});function O(ee){I++||ee({type:"zoomstart"})}function z(ee){ee({type:"zoom"})}function G(ee){--I||ee({type:"zoomend"})}function Y(ee){var j=S.rotate();ee("projection.rotation.lon",-j[0]),ee("projection.rotation.lat",-j[1])}return y.rebind(P,F,"on")}function g(E,S){var P=E.invert(S);return P&&isFinite(P[0])&&isFinite(P[1])&&p(P)}function d(E){var S=.5*E[0]*T,P=.5*E[1]*T,F=.5*E[2]*T,I=Math.sin(S),D=Math.cos(S),R=Math.sin(P),O=Math.cos(P),z=Math.sin(F),G=Math.cos(F);return[D*O*G+I*R*z,I*O*G-D*R*z,D*R*G+I*O*z,D*O*z-I*R*G]}function f(E,S){var P=E[0],F=E[1],I=E[2],D=E[3],R=S[0],O=S[1],z=S[2],G=S[3];return[P*R-F*O-I*z-D*G,P*O+F*R+I*G-D*z,P*z-F*G+I*R+D*O,P*G+F*z-I*O+D*R]}function m(E,S){if(!(!E||!S)){var P=h(E,S),F=Math.sqrt(_(P,P)),I=.5*Math.acos(Math.max(-1,Math.min(1,_(E,S)))),D=Math.sin(I)/F;return F&&[Math.cos(I),P[2]*D,-P[1]*D,P[0]*D]}}function l(E,S,P){var F=M(S,2,E[0]);F=M(F,1,E[1]),F=M(F,0,E[2]-P[2]);var I=S[0],D=S[1],R=S[2],O=F[0],z=F[1],G=F[2],Y=Math.atan2(D,I)*e,ee=Math.sqrt(I*I+D*D),j,X;Math.abs(z)>ee?(X=(z>0?90:-90)-Y,j=0):(X=Math.asin(z/ee)*e-Y,j=Math.sqrt(ee*ee-z*z));var ae=180-X-2*Y,he=(Math.atan2(G,O)-Math.atan2(R,j))*e,K=(Math.atan2(G,O)-Math.atan2(R,-j))*e,J=x(P[0],P[1],X,he),U=x(P[0],P[1],ae,K);return J<=U?[X,he,P[2]]:[ae,K,P[2]]}function x(E,S,P,F){var I=u(P-E),D=u(F-S);return Math.sqrt(I*I+D*D)}function u(E){return(E%360+540)%360-180}function M(E,S,P){var F=P*T,I=E.slice(),D=S===0?1:0,R=S===2?1:2,O=Math.cos(F),z=Math.sin(F);return I[D]=E[D]*O-E[R]*z,I[R]=E[R]*O+E[D]*z,I}function w(E){return[Math.atan2(2*(E[0]*E[1]+E[2]*E[3]),1-2*(E[1]*E[1]+E[2]*E[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(E[0]*E[2]-E[3]*E[1]))))*e,Math.atan2(2*(E[0]*E[3]+E[1]*E[2]),1-2*(E[2]*E[2]+E[3]*E[3]))*e]}function p(E){var S=E[0]*T,P=E[1]*T,F=Math.cos(P);return[F*Math.cos(S),F*Math.sin(S),Math.sin(P)]}function _(E,S){for(var P=0,F=0,I=E.length;F<I;++F)P+=E[F]*S[F];return P}function h(E,S){return[E[1]*S[2]-E[2]*S[1],E[2]*S[0]-E[0]*S[2],E[0]*S[1]-E[1]*S[0]]}function L(E){for(var S=0,P=arguments.length,F=[];++S<P;)F.push(arguments[S]);var I=y.dispatch.apply(null,F);return I.of=function(D,R){return function(O){var z;try{z=O.sourceEvent=y.event,O.target=E,y.event=O,I[O.type].apply(D,R)}finally{y.event=z}}},I}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(t,N,V){var y=t("../registry"),c=t("./cartesian/constants").SUBPLOT_PATTERN;V.getSubplotCalcData=function(A,T,e){var a=y.subplotsRegistry[T];if(!a)return[];for(var i=a.attr,n=[],r=0;r<A.length;r++){var v=A[r],s=v[0].trace;s[i]===e&&n.push(v)}return n},V.getModuleCalcData=function(A,T){var e=[],a=[],i;if(typeof T=="string"?i=y.getModule(T).plot:typeof T=="function"?i=T:i=T.plot,!i)return[e,A];for(var n=0;n<A.length;n++){var r=A[n],v=r[0].trace;v.visible!==!0||v._length===0||(v._module.plot===i?e.push(r):a.push(r))}return[e,a]},V.getSubplotData=function(T,e,a){if(!y.subplotsRegistry[e])return[];var i=y.subplotsRegistry[e].attr,n=[],r,v,s;if(e==="gl2d"){var o=a.match(c);v="x"+o[1],s="y"+o[2]}for(var b=0;b<T.length;b++)r=T[b],e==="gl2d"&&y.traceIs(r,"gl2d")?r[i[0]]===v&&r[i[1]]===s&&n.push(r):r[i]===a&&n.push(r);return n}},{"../registry":647,"./cartesian/constants":573}],603:[function(t,N,V){var y=t("mouse-change"),c=t("mouse-wheel"),A=t("mouse-event-offset"),T=t("../cartesian/constants"),e=t("has-passive-events");N.exports=i;function a(n,r){this.element=n,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function i(n){var r=n.mouseContainer,v=n.glplot,s=new a(r,v);function o(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function b(){for(var d=n.graphDiv._fullLayout._axisConstraintGroups,f=n.xaxis._id,m=n.yaxis._id,l=0;l<d.length;l++)if(d[l][f]!==-1){if(d[l][m]!==-1)return!0;break}return!1}s.mouseListener=y(r,g),r.addEventListener("touchstart",function(d){var f=A(d.changedTouches[0],r);g(0,f[0],f[1]),g(1,f[0],f[1]),d.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchmove",function(d){d.preventDefault();var f=A(d.changedTouches[0],r);g(1,f[0],f[1]),d.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchend",function(d){g(0,s.lastPos[0],s.lastPos[1]),d.preventDefault()},e?{passive:!1}:!1);function g(d,f,m){var l=n.calcDataBox(),x=v.viewBox,u=s.lastPos[0],M=s.lastPos[1],w=T.MINDRAG*v.pixelRatio,p=T.MINZOOM*v.pixelRatio,_,h;f*=v.pixelRatio,m*=v.pixelRatio,m=x[3]-x[1]-m;function L(D,R,O){var z=Math.min(R,O),G=Math.max(R,O);z!==G?(l[D]=z,l[D+2]=G,s.dataBox=l,n.setRanges(l)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(n.fullLayout.dragmode){case"zoom":if(d){var E=f/(x[2]-x[0])*(l[2]-l[0])+l[0],S=m/(x[3]-x[1])*(l[3]-l[1])+l[1];s.boxInited||(s.boxStart[0]=E,s.boxStart[1]=S,s.dragStart[0]=f,s.dragStart[1]=m),s.boxEnd[0]=E,s.boxEnd[1]=S,s.boxInited=!0,!s.boxEnabled&&(s.boxStart[0]!==s.boxEnd[0]||s.boxStart[1]!==s.boxEnd[1])&&(s.boxEnabled=!0);var P=Math.abs(s.dragStart[0]-f)<p,F=Math.abs(s.dragStart[1]-m)<p;if(b()&&!(P&&F)){_=s.boxEnd[0]-s.boxStart[0],h=s.boxEnd[1]-s.boxStart[1];var I=(l[3]-l[1])/(l[2]-l[0]);Math.abs(_*I)>Math.abs(h)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(_)*I*(h>=0?1:-1),s.boxEnd[1]<l[1]?(s.boxEnd[1]=l[1],s.boxEnd[0]=s.boxStart[0]+(l[1]-s.boxStart[1])/Math.abs(I)):s.boxEnd[1]>l[3]&&(s.boxEnd[1]=l[3],s.boxEnd[0]=s.boxStart[0]+(l[3]-s.boxStart[1])/Math.abs(I))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(h)/I*(_>=0?1:-1),s.boxEnd[0]<l[0]?(s.boxEnd[0]=l[0],s.boxEnd[1]=s.boxStart[1]+(l[0]-s.boxStart[0])*Math.abs(I)):s.boxEnd[0]>l[2]&&(s.boxEnd[0]=l[2],s.boxEnd[1]=s.boxStart[1]+(l[2]-s.boxStart[0])*Math.abs(I)))}else P&&(s.boxEnd[0]=s.boxStart[0]),F&&(s.boxEnd[1]=s.boxStart[1])}else s.boxEnabled?(_=s.boxStart[0]!==s.boxEnd[0],h=s.boxStart[1]!==s.boxEnd[1],_||h?(_&&(L(0,s.boxStart[0],s.boxEnd[0]),n.xaxis.autorange=!1),h&&(L(1,s.boxStart[1],s.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,d?(s.panning||(s.dragStart[0]=f,s.dragStart[1]=m),Math.abs(s.dragStart[0]-f)<w&&(f=s.dragStart[0]),Math.abs(s.dragStart[1]-m)<w&&(m=s.dragStart[1]),_=(u-f)*(l[2]-l[0])/(v.viewBox[2]-v.viewBox[0]),h=(M-m)*(l[3]-l[1])/(v.viewBox[3]-v.viewBox[1]),l[0]+=_,l[2]+=_,l[1]+=h,l[3]+=h,n.setRanges(l),s.panning=!0,s.lastInputTime=Date.now(),o(),n.cameraChanged(),n.handleAnnotations()):s.panning&&(s.panning=!1,n.relayoutCallback());break}s.lastPos[0]=f,s.lastPos[1]=m}return s.wheelListener=c(r,function(d,f){if(!n.scrollZoom)return!1;var m=n.calcDataBox(),l=v.viewBox,x=s.lastPos[0],u=s.lastPos[1],M=Math.exp(5*f/(l[3]-l[1])),w=x/(l[2]-l[0])*(m[2]-m[0])+m[0],p=u/(l[3]-l[1])*(m[3]-m[1])+m[1];return m[0]=(m[0]-w)*M+w,m[2]=(m[2]-w)*M+w,m[1]=(m[1]-p)*M+p,m[3]=(m[3]-p)*M+p,n.setRanges(m),s.lastInputTime=Date.now(),o(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(t,N,V){var y=t("../cartesian/axes"),c=t("../../lib/str2rgbarray");function A(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=A.prototype,e=["xaxis","yaxis"];T.merge=function(i){this.titleEnable=!1,this.backgroundColor=c(i.plot_bgcolor);var n,r,v,s,o,b,g,d,f,m,l;for(m=0;m<2;++m){n=e[m];var x=n.charAt(0);for(r=i[this.scene[n]._name],v=r.title.text===this.scene.fullLayout._dfltTitle[x]?"":r.title.text,l=0;l<=2;l+=2)this.labelEnable[m+l]=!1,this.labels[m+l]=v,this.labelColor[m+l]=c(r.title.font.color),this.labelFont[m+l]=r.title.font.family,this.labelSize[m+l]=r.title.font.size,this.labelPad[m+l]=this.getLabelPad(n,r),this.tickEnable[m+l]=!1,this.tickColor[m+l]=c((r.tickfont||{}).color),this.tickAngle[m+l]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[m+l]=this.getTickPad(r),this.tickMarkLength[m+l]=0,this.tickMarkWidth[m+l]=r.tickwidth||0,this.tickMarkColor[m+l]=c(r.tickcolor),this.borderLineEnable[m+l]=!1,this.borderLineColor[m+l]=c(r.linecolor),this.borderLineWidth[m+l]=r.linewidth||0;g=this.hasSharedAxis(r),o=this.hasAxisInDfltPos(n,r)&&!g,b=this.hasAxisInAltrPos(n,r)&&!g,s=r.mirror||!1,d=g?String(s).indexOf("all")!==-1:!!s,f=g?s==="allticks":String(s).indexOf("ticks")!==-1,o?this.labelEnable[m]=!0:b&&(this.labelEnable[m+2]=!0),o?this.tickEnable[m]=r.showticklabels:b&&(this.tickEnable[m+2]=r.showticklabels),(o||d)&&(this.borderLineEnable[m]=r.showline),(b||d)&&(this.borderLineEnable[m+2]=r.showline),(o||f)&&(this.tickMarkLength[m]=this.getTickMarkLength(r)),(b||f)&&(this.tickMarkLength[m+2]=this.getTickMarkLength(r)),this.gridLineEnable[m]=r.showgrid,this.gridLineColor[m]=c(r.gridcolor),this.gridLineWidth[m]=r.gridwidth,this.zeroLineEnable[m]=r.zeroline,this.zeroLineColor[m]=c(r.zerolinecolor),this.zeroLineWidth[m]=r.zerolinewidth}},T.hasSharedAxis=function(i){var n=this.scene,r=n.fullLayout._subplots.gl2d,v=y.findSubplotsWithAxis(r,i);return v.indexOf(n.id)!==0},T.hasAxisInDfltPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="bottom";if(i==="yaxis")return r==="left"},T.hasAxisInAltrPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="top";if(i==="yaxis")return r==="right"},T.getLabelPad=function(i,n){var r=1.5,v=n.title.font.size,s=n.showticklabels;if(i==="xaxis")return n.side==="top"?-10+v*(r+(s?1:0)):-10+v*(r+(s?.5:0));if(i==="yaxis")return n.side==="right"?10+v*(r+(s?1:.5)):10+v*(r+(s?.5:0))},T.getTickPad=function(i){return i.ticks==="outside"?10+i.ticklen:15},T.getTickMarkLength=function(i){if(!i.ticks)return 0;var n=i.ticklen;return i.ticks==="inside"?-n:n};function a(i){return new A(i)}N.exports=a},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(t,N,V){var y=t("../../plot_api/edit_types").overrideAll,c=t("./scene2d"),A=t("../layout_attributes"),T=t("../../constants/xmlns_namespaces"),e=t("../cartesian/constants"),a=t("../cartesian"),i=t("../../components/fx/layout_attributes"),n=t("../get_data").getSubplotData;V.name="gl2d",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=e.idRegex,V.attrRegex=e.attrRegex,V.attributes=t("../cartesian/attributes"),V.supplyLayoutDefaults=function(r,v,s){v._has("cartesian")||a.supplyLayoutDefaults(r,v,s)},V.layoutAttrOverrides=y(a.layoutAttributes,"plot","from-root"),V.baseLayoutAttrOverrides=y({plot_bgcolor:A.plot_bgcolor,hoverlabel:i.hoverlabel},"plot","nested"),V.plot=function(v){for(var s=v._fullLayout,o=v._fullData,b=s._subplots.gl2d,g=0;g<b.length;g++){var d=b[g],f=s._plots[d],m=n(o,"gl2d",d),l=f._scene2d;l===void 0&&(l=new c({id:d,graphDiv:v,container:v.querySelector(".gl-container"),staticPlot:v._context.staticPlot,plotGlPixelRatio:v._context.plotGlPixelRatio},s),f._scene2d=l),l.plot(m,v.calcdata,s,v.layout)}},V.clean=function(r,v,s,o){for(var b=o._subplots.gl2d||[],g=0;g<b.length;g++){var d=b[g],f=o._plots[d];if(!!f._scene2d){var m=n(r,"gl2d",d);m.length===0&&(f._scene2d.destroy(),delete o._plots[d])}}a.clean.apply(this,arguments)},V.drawFramework=function(r){r._context.staticPlot||a.drawFramework(r)},V.toSVG=function(r){for(var v=r._fullLayout,s=v._subplots.gl2d,o=0;o<s.length;o++){var b=v._plots[s[o]],g=b._scene2d,d=g.toImage("png"),f=v._glimages.append("svg:image");f.attr({xmlns:T.svg,"xlink:href":d,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),g.destroy()}},V.updateFx=function(r){for(var v=r._fullLayout,s=v._subplots.gl2d,o=0;o<s.length;o++){var b=v._plots[s[o]]._scene2d;b.updateFx(v.dragmode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(t,N,V){var y=t("../../registry"),c=t("../../plots/cartesian/axes"),A=t("../../components/fx"),T=t("../../../stackgl_modules").gl_plot2d,e=t("../../../stackgl_modules").gl_spikes2d,a=t("../../../stackgl_modules").gl_select_box,i=t("webgl-context"),n=t("./convert"),r=t("./camera"),v=t("../../lib/show_no_webgl_msg"),s=t("../cartesian/constraints"),o=s.enforce,b=s.clean,g=t("../cartesian/autorange").doAutoRange,d=t("../../components/dragelement/helpers"),f=d.drawMode,m=d.selectMode,l=["xaxis","yaxis"],x,u,M=t("../cartesian/constants").SUBPLOT_PATTERN;function w(h,L){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=n(this),this.glplotOptions.merge(L),this.glplot=T(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}N.exports=w;var p=w.prototype;p.makeFramework=function(){if(this.staticPlot){if(!u&&(x=document.createElement("canvas"),u=i({canvas:x,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!u))throw new Error("Error creating static canvas/context for image server");this.canvas=x,this.gl=u}else{var h=this.container.querySelector(".gl-canvas-focus"),L=i({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){v(this),this.stopped=!0;return}this.canvas=h,this.gl=L}var E=this.canvas;E.style.width="100%",E.style.height="100%",E.style.position="absolute",E.style.top="0px",E.style.left="0px",E.style["pointer-events"]="none",this.updateSize(E);var S=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");S.style.position="absolute",S.style.top=S.style.left="0px",S.style.width=S.style.height="100%",S.style["z-index"]=20,S.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(S),F.appendChild(P);var I=this;P.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),P.addEventListener("mouseover",function(){I.isMouseOver=!0})},p.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(x),this.updateSize(this.canvas);var L=this.glplot.gl,E=L.drawingBufferWidth,S=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(E*S*4);L.readPixels(0,0,E,S,L.RGBA,L.UNSIGNED_BYTE,P);for(var F=0,I=S-1;F<I;++F,--I)for(var D=0;D<E;++D)for(var R=0;R<4;++R){var O=P[4*(E*F+D)+R];P[4*(E*F+D)+R]=P[4*(E*I+D)+R],P[4*(E*I+D)+R]=O}var z=document.createElement("canvas");z.width=E,z.height=S;var G=z.getContext("2d",{willReadFrequently:!0}),Y=G.createImageData(E,S);Y.data.set(P),G.putImageData(Y,0,0);var ee;switch(h){case"jpeg":ee=z.toDataURL("image/jpeg");break;case"webp":ee=z.toDataURL("image/webp");break;default:ee=z.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(x),ee},p.updateSize=function(h){h||(h=this.canvas);var L=this.pixelRatio,E=this.fullLayout,S=E.width,P=E.height,F=Math.ceil(L*S)|0,I=Math.ceil(L*P)|0;return(h.width!==F||h.height!==I)&&(h.width=F,h.height=I),h},p.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[c.calcTicks(this.xaxis),c.calcTicks(this.yaxis)],L=0;L<2;++L)for(var E=0;E<h[L].length;++E)h[L][E].text=h[L][E].text+"";return h};function _(h,L){for(var E=0;E<2;++E){var S=h[E],P=L[E];if(S.length!==P.length)return!0;for(var F=0;F<S.length;++F)if(S[F].x!==P[F].x)return!0}return!1}p.updateRefs=function(h){this.fullLayout=h;var L=this.id.match(M),E="xaxis"+L[1],S="yaxis"+L[2];this.xaxis=this.fullLayout[E],this.yaxis=this.fullLayout[S]},p.relayoutCallback=function(){var h=this.graphDiv,L=this.xaxis,E=this.yaxis,S=h.layout,P={},F=P[L._name+".range"]=L.range.slice(),I=P[E._name+".range"]=E.range.slice();P[L._name+".autorange"]=L.autorange,P[E._name+".autorange"]=E.autorange,y.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var D=S[L._name];D.range=F,D.autorange=L.autorange;var R=S[E._name];R.range=I,R.autorange=E.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},p.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),E=this.glplotOptions.ticks;_(L,E)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},p.handleAnnotations=function(){for(var h=this.graphDiv,L=this.fullLayout.annotations,E=0;E<L.length;E++){var S=L[E];S.xref===this.xaxis._id&&S.yref===this.yaxis._id&&y.getComponentMethod("annotations","drawOne")(h,E)}},p.destroy=function(){if(!!this.glplot){var h=this.traces;h&&Object.keys(h).map(function(L){h[L].dispose(),delete h[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},p.plot=function(h,L,E){var S=this.glplot;this.updateRefs(E),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,L),this.updateFx(E.dragmode);var P=E.width,F=E.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(E),I.screenBox=[0,0,P,F];var D={_fullLayout:{_axisConstraintGroups:E._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:E._size}};b(D,this.xaxis),b(D,this.yaxis);var R=E._size,O=this.xaxis.domain,z=this.yaxis.domain;I.viewBox=[R.l+O[0]*R.w,R.b+z[0]*R.h,P-R.r-(1-O[1])*R.w,F-R.t-(1-z[1])*R.h],this.mouseContainer.style.width=R.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=R.h*(z[1]-z[0])+"px",this.mouseContainer.height=R.h*(z[1]-z[0]),this.mouseContainer.style.left=R.l+O[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-z[1])*R.h+"px";var G,Y;for(Y=0;Y<2;++Y)G=this[l[Y]],G._length=I.viewBox[Y+2]-I.viewBox[Y],g(this.graphDiv,G),G.setScale();o(D),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(E),S.update(I),this.glplot.draw()},p.calcDataBox=function(){var h=this.xaxis,L=this.yaxis,E=h.range,S=L.range,P=h.r2l,F=L.r2l;return[P(E[0]),F(S[0]),P(E[1]),F(S[1])]},p.setRanges=function(h){var L=this.xaxis,E=this.yaxis,S=L.l2r,P=E.l2r;L.range=[S(h[0]),S(h[2])],E.range=[P(h[1]),P(h[3])]},p.updateTraces=function(h,L){var E=Object.keys(this.traces),S,P,F;this.fullData=h;e:for(S=0;S<E.length;S++){var I=E[S],D=this.traces[I];for(P=0;P<h.length;P++)if(F=h[P],F.uid===I&&F.type===D.type)continue e;D.dispose(),delete this.traces[I]}for(S=0;S<h.length;S++){F=h[S];var R=L[S],O=this.traces[F.uid];O?O.update(F,R):(O=F._module.plot(this,F,R),this.traces[F.uid]=O)}this.glplot.objects.sort(function(z,G){return z._trace.index-G._trace.index})},p.updateFx=function(h){m(h)||f(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),h==="pan"?this.mouseContainer.style.cursor="move":h==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},p.emitPointAction=function(h,L){for(var E=h.trace.uid,S=h.pointIndex,P,F=0;F<this.fullData.length;F++)this.fullData[F].uid===E&&(P=this.fullData[F]);var I={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:P.index,pointNumber:S,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};A.appendArrayPointValue(I,P,S),this.graphDiv.emit(L,{points:[I]})},p.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,L=this.camera,E=L.mouseListener,S=this.lastButtonState===1&&E.buttons===0,P=this.fullLayout;this.lastButtonState=E.buttons,this.cameraChanged();var F=E.x*h.pixelRatio,I=this.canvas.height-h.pixelRatio*E.y,D;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],O=0;O<2;O++)L.boxStart[O]===L.boxEnd[O]&&(R[O]=h.dataBox[O],R[O+2]=h.dataBox[O+2]);h.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var z=P._size,G=this.xaxis.domain,Y=this.yaxis.domain;D=h.pick(F/h.pixelRatio+z.l+G[0]*z.w,I/h.pixelRatio-(z.t+(1-Y[1])*z.h));var ee=D&&D.object._trace.handlePick(D);if(ee&&S&&this.emitPointAction(ee,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&P.hovermode&&ee&&(!this.lastPickResult||this.lastPickResult.traceUid!==ee.trace.uid||this.lastPickResult.dataCoord[0]!==ee.dataCoord[0]||this.lastPickResult.dataCoord[1]!==ee.dataCoord[1])){var j=ee;this.lastPickResult={traceUid:ee.trace?ee.trace.uid:null,dataCoord:ee.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),j.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(D.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(D.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(ee,"plotly_hover");var X=this.fullData[j.trace.index]||{},ae=j.pointIndex,he=A.castHoverinfo(X,P,ae);if(he&&he!=="all"){var K=he.split("+");K.indexOf("x")===-1&&(j.traceCoord[0]=void 0),K.indexOf("y")===-1&&(j.traceCoord[1]=void 0),K.indexOf("z")===-1&&(j.traceCoord[2]=void 0),K.indexOf("text")===-1&&(j.textLabel=void 0),K.indexOf("name")===-1&&(j.name=void 0)}A.loneHover({x:j.screenCoord[0],y:j.screenCoord[1],xLabel:this.hoverFormatter("xaxis",j.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",j.traceCoord[1]),zLabel:j.traceCoord[2],text:j.textLabel,name:j.name,color:A.castHoverOption(X,ae,"bgcolor")||j.color,borderColor:A.castHoverOption(X,ae,"bordercolor"),fontFamily:A.castHoverOption(X,ae,"font.family"),fontSize:A.castHoverOption(X,ae,"font.size"),fontColor:A.castHoverOption(X,ae,"font.color"),nameLength:A.castHoverOption(X,ae,"namelength"),textAlign:A.castHoverOption(X,ae,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),h.draw()}},p.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),A.loneUnhover(this.svgContainer))},p.hoverFormatter=function(h,L){if(L!==void 0){var E=this[h];return c.tickText(E,E.c2l(L),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(t,N,V){var y=t("../../plot_api/edit_types").overrideAll,c=t("../../components/fx/layout_attributes"),A=t("./scene"),T=t("../get_data").getSubplotData,e=t("../../lib"),a=t("../../constants/xmlns_namespaces"),i="gl3d",n="scene";V.name=i,V.attr=n,V.idRoot=n,V.idRegex=V.attrRegex=e.counterRegex("scene"),V.attributes=t("./layout/attributes"),V.layoutAttributes=t("./layout/layout_attributes"),V.baseLayoutAttrOverrides=y({hoverlabel:c.hoverlabel},"plot","nested"),V.supplyLayoutDefaults=t("./layout/defaults"),V.plot=function(v){for(var s=v._fullLayout,o=v._fullData,b=s._subplots[i],g=0;g<b.length;g++){var d=b[g],f=T(o,i,d),m=s[d],l=m.camera,x=m._scene;x||(x=new A({id:d,graphDiv:v,container:v.querySelector(".gl-container"),staticPlot:v._context.staticPlot,plotGlPixelRatio:v._context.plotGlPixelRatio,camera:l},s),m._scene=x),x.viewInitial||(x.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),x.plot(f,s,v.layout)}},V.clean=function(r,v,s,o){for(var b=o._subplots[i]||[],g=0;g<b.length;g++){var d=b[g];!v[d]&&!!o[d]._scene&&(o[d]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+d).remove())}},V.toSVG=function(r){for(var v=r._fullLayout,s=v._subplots[i],o=v._size,b=0;b<s.length;b++){var g=v[s[b]],d=g.domain,f=g._scene,m=f.toImage("png"),l=v._glimages.append("svg:image");l.attr({xmlns:a.svg,"xlink:href":m,x:o.l+o.w*d.x[0],y:o.t+o.h*(1-d.y[1]),width:o.w*(d.x[1]-d.x[0]),height:o.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),f.destroy()}},V.cleanId=function(v){if(!!v.match(/^scene[0-9]*$/)){var s=v.substr(5);return s==="1"&&(s=""),n+s}},V.updateFx=function(r){for(var v=r._fullLayout,s=v._subplots[i],o=0;o<s.length;o++){var b=v[s[o]]._scene;b.updateFx(v.dragmode,v.hovermode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(t,N,V){N.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(t,N,V){var y=t("../../../components/color"),c=t("../../cartesian/layout_attributes"),A=t("../../../lib/extend").extendFlat,T=t("../../../plot_api/edit_types").overrideAll;N.exports=T({visible:c.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:y.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:c.color,categoryorder:c.categoryorder,categoryarray:c.categoryarray,title:{text:c.title.text,font:c.title.font},type:A({},c.type,{values:["-","linear","log","date","category"]}),autotypenumbers:c.autotypenumbers,autorange:c.autorange,rangemode:c.rangemode,range:A({},c.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:c.ticks,mirror:c.mirror,ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,showticklabels:c.showticklabels,tickfont:c.tickfont,tickangle:c.tickangle,tickprefix:c.tickprefix,showtickprefix:c.showtickprefix,ticksuffix:c.ticksuffix,showticksuffix:c.showticksuffix,showexponent:c.showexponent,exponentformat:c.exponentformat,minexponent:c.minexponent,separatethousands:c.separatethousands,tickformat:c.tickformat,tickformatstops:c.tickformatstops,hoverformat:c.hoverformat,showline:c.showline,linecolor:c.linecolor,linewidth:c.linewidth,showgrid:c.showgrid,gridcolor:A({},c.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:c.gridwidth,zeroline:c.zeroline,zerolinecolor:c.zerolinecolor,zerolinewidth:c.zerolinewidth,_deprecated:{title:c._deprecated.title,titlefont:c._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(t,N,V){var y=t("tinycolor2").mix,c=t("../../../lib"),A=t("../../../plot_api/plot_template"),T=t("./axis_attributes"),e=t("../../cartesian/type_defaults"),a=t("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"],n=100*(204-68)/(255-68);N.exports=function(v,s,o){var b,g;function d(l,x){return c.coerce(b,g,T,l,x)}for(var f=0;f<i.length;f++){var m=i[f];b=v[m]||{},g=A.newContainer(s,m),g._id=m[0]+o.scene,g._name=m,e(b,g,d,o),a(b,g,d,{font:o.font,letter:m[0],data:o.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:o.bgColor,calendar:o.calendar},o.fullLayout),d("gridcolor",y(g.color,o.bgColor,n).toRgbString()),d("title.text",m[0]),g.setScale=c.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",g.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(t,N,V){var y=t("../../../lib/str2rgbarray"),c=t("../../../lib"),A=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=T.prototype;e.merge=function(i,n){for(var r=this,v=0;v<3;++v){var s=n[A[v]];if(!s.visible){r.tickEnable[v]=!1,r.labelEnable[v]=!1,r.lineEnable[v]=!1,r.lineTickEnable[v]=!1,r.gridEnable[v]=!1,r.zeroEnable[v]=!1,r.backgroundEnable[v]=!1;continue}r.labels[v]=i._meta?c.templateString(s.title.text,i._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(r.labelColor[v]=y(s.title.font.color)),s.title.font.family&&(r.labelFont[v]=s.title.font.family),s.title.font.size&&(r.labelSize[v]=s.title.font.size)),"showline"in s&&(r.lineEnable[v]=s.showline),"linecolor"in s&&(r.lineColor[v]=y(s.linecolor)),"linewidth"in s&&(r.lineWidth[v]=s.linewidth),"showgrid"in s&&(r.gridEnable[v]=s.showgrid),"gridcolor"in s&&(r.gridColor[v]=y(s.gridcolor)),"gridwidth"in s&&(r.gridWidth[v]=s.gridwidth),s.type==="log"?r.zeroEnable[v]=!1:"zeroline"in s&&(r.zeroEnable[v]=s.zeroline),"zerolinecolor"in s&&(r.zeroLineColor[v]=y(s.zerolinecolor)),"zerolinewidth"in s&&(r.zeroLineWidth[v]=s.zerolinewidth),"ticks"in s&&!!s.ticks?r.lineTickEnable[v]=!0:r.lineTickEnable[v]=!1,"ticklen"in s&&(r.lineTickLength[v]=r._defaultLineTickLength[v]=s.ticklen),"tickcolor"in s&&(r.lineTickColor[v]=y(s.tickcolor)),"tickwidth"in s&&(r.lineTickWidth[v]=s.tickwidth),"tickangle"in s&&(r.tickAngle[v]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(r.tickEnable[v]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(r.tickColor[v]=y(s.tickfont.color)),s.tickfont.family&&(r.tickFont[v]=s.tickfont.family),s.tickfont.size&&(r.tickSize[v]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(r.lineTickMirror[v]=!0,r.lineMirror[v]=!0):s.mirror===!0?(r.lineTickMirror[v]=!1,r.lineMirror[v]=!0):(r.lineTickMirror[v]=!1,r.lineMirror[v]=!1):r.lineMirror[v]=!1,"showbackground"in s&&s.showbackground!==!1?(r.backgroundEnable[v]=!0,r.backgroundColor[v]=y(s.backgroundcolor)):r.backgroundEnable[v]=!1}};function a(i,n){var r=new T;return r.merge(i,n),r}N.exports=a},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(t,N,V){var y=t("../../../lib"),c=t("../../../components/color"),A=t("../../../registry"),T=t("../../subplot_defaults"),e=t("./axis_defaults"),a=t("./layout_attributes"),i=t("../../get_data").getSubplotData,n="gl3d";N.exports=function(s,o,b){var g=o._basePlotModules.length>1;function d(f){if(!g){var m=y.validate(s[f],a[f]);if(m)return s[f]}}T(s,o,b,{type:n,attributes:a,handleDefaults:r,fullLayout:o,font:o.font,fullData:b,getDfltFromLayout:d,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})};function r(v,s,o,b){for(var g=o("bgcolor"),d=c.combine(g,b.paper_bgcolor),f=["up","center","eye"],m=0;m<f.length;m++)o("camera."+f[m]+".x"),o("camera."+f[m]+".y"),o("camera."+f[m]+".z");o("camera.projection.type");var l=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),x=l?"manual":"auto",u=o("aspectmode",x);l||(v.aspectratio=s.aspectratio={x:1,y:1,z:1},u==="manual"&&(s.aspectmode="auto"),v.aspectmode=s.aspectmode);var M=i(b.fullData,n,b.id);e(v,s,{font:b.font,scene:b.id,data:M,bgColor:d,calendar:b.calendar,autotypenumbersDflt:b.autotypenumbersDflt,fullLayout:b.fullLayout}),A.getComponentMethod("annotations3d","handleDefaults")(v,s,b);var w=b.getDfltFromLayout("dragmode");if(w!==!1&&!w)if(w="orbit",v.camera&&v.camera.up){var p=v.camera.up.x,_=v.camera.up.y,h=v.camera.up.z;h!==0&&(!p||!_||!h||h/Math.sqrt(p*p+_*_+h*h)>.999)&&(w="turntable")}else w="turntable";o("dragmode",w),o("hovermode",b.getDfltFromLayout("hovermode"))}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(t,N,V){var y=t("./axis_attributes"),c=t("../../domain").attributes,A=t("../../../lib/extend").extendFlat,T=t("../../../lib").counterRegex;function e(a,i,n){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:i,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}N.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:A(e(0,0,1),{}),center:A(e(0,0,0),{}),eye:A(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:c({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:y,yaxis:y,zaxis:y,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(t,N,V){var y=t("../../../lib/str2rgbarray"),c=["xaxis","yaxis","zaxis"];function A(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var T=A.prototype;T.merge=function(a){for(var i=0;i<3;++i){var n=a[c[i]];if(!n.visible){this.enabled[i]=!1,this.drawSides[i]=!1;continue}this.enabled[i]=n.showspikes,this.colors[i]=y(n.spikecolor),this.drawSides[i]=n.spikesides,this.lineWidth[i]=n.spikethickness}};function e(a){var i=new A;return i.merge(a),i}N.exports=e},{"../../../lib/str2rgbarray":540}],615:[function(t,N,V){N.exports=e;var y=t("../../cartesian/axes"),c=t("../../../lib"),A=["xaxis","yaxis","zaxis"];function T(a){for(var i=new Array(3),n=0;n<3;++n){for(var r=a[n],v=new Array(r.length),s=0;s<r.length;++s)v[s]=r[s].x;i[n]=v}return i}function e(a){for(var i=a.axesOptions,n=a.glplot.axesPixels,r=a.fullSceneLayout,v=[[],[],[]],s=0;s<3;++s){var o=r[A[s]];if(o._length=(n[s].hi-n[s].lo)*n[s].pixelsPerDataUnit/a.dataScale[s],Math.abs(o._length)===1/0||isNaN(o._length))v[s]=[];else{o._input_range=o.range.slice(),o.range[0]=n[s].lo/a.dataScale[s],o.range[1]=n[s].hi/a.dataScale[s],o._m=1/(a.dataScale[s]*n[s].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var b=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var g=o.nticks||c.constrain(o._length/40,4,9);y.autoTicks(o,Math.abs(o.range[1]-o.range[0])/g)}for(var d=y.calcTicks(o,{msUTC:!0}),f=0;f<d.length;++f)d[f].x=d[f].x*a.dataScale[s],o.type==="date"&&(d[f].text=d[f].text.replace(/\<br\>/g," "));v[s]=d,o.tickmode=b}}i.ticks=v;for(var s=0;s<3;++s){.5*(a.glplot.bounds[0][s]+a.glplot.bounds[1][s]);for(var f=0;f<2;++f)i.bounds[f][s]=a.glplot.bounds[f][s]}a.contourLevels=T(v)}},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(t,N,V){function y(A,T){var e=[0,0,0,0],a,i;for(a=0;a<4;++a)for(i=0;i<4;++i)e[i]+=A[4*a+i]*T[a];return e}function c(A,T){var e=y(A.projection,y(A.view,y(A.model,[T[0],T[1],T[2],1])));return e}N.exports=c},{}],617:[function(t,N,V){var y=t("../../../stackgl_modules").gl_plot3d,c=y.createCamera,A=y.createScene,T=t("webgl-context"),e=t("has-passive-events"),a=t("../../registry"),i=t("../../lib"),n=i.preserveDrawingBuffer(),r=t("../../plots/cartesian/axes"),v=t("../../components/fx"),s=t("../../lib/str2rgbarray"),o=t("../../lib/show_no_webgl_msg"),b=t("./project"),g=t("./layout/convert"),d=t("./layout/spikes"),f=t("./layout/tick_marks"),m,l;function x(P,F){var I=document.createElement("div"),D=P.container;this.graphDiv=P.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",I.appendChild(R),this.svgContainer=R,I.id=P.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",D.appendChild(I),this.fullLayout=F,this.id=P.id||"scene",this.fullSceneLayout=F[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(F,F[this.id]),this.spikeOptions=d(F[this.id]),this.container=I,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var u=x.prototype;u.prepareOptions=function(){var P=this,F={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!l&&(m=document.createElement("canvas"),l=T({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");F.gl=l,F.canvas=m}return F};var M=!0;u.tryCreatePlot=function(){var P=this,F=P.prepareOptions(),I=!0;try{P.glplot=A(F)}catch{if(P.staticMode||!M||n)I=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=F.glOptions.preserveDrawingBuffer=!0,P.glplot=A(F)}catch{n=F.glOptions.preserveDrawingBuffer=!1,I=!1}}}return M=!1,I},u.initializeGLCamera=function(){var P=this,F=P.fullSceneLayout.camera,I=F.projection.type==="orthographic";P.camera=c(P.container,{center:[F.center.x,F.center.y,F.center.z],eye:[F.eye.x,F.eye.y,F.eye.z],up:[F.up.x,F.up.y,F.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},u.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var F=P.tryCreatePlot();if(!F)return o(P);P.traces={},P.make4thDimension();var I=P.graphDiv,D=I.layout,R=function(){var z={};return P.isCameraChanged(D)&&(z[P.id+".camera"]=P.getCamera()),P.isAspectChanged(D)&&(z[P.id+".aspectratio"]=P.glplot.getAspectratio(),D[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=D[P.id].aspectmode=z[P.id+".aspectmode"]="manual")),z},O=function(z){if(z.fullSceneLayout.dragmode!==!1){var G=R();z.saveLayout(D),z.graphDiv.emit("plotly_relayout",G)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){O(P)}),P.glplot.canvas.addEventListener("wheel",function(z){if(I._context._scrollZoom.gl3d){if(P.camera._ortho){var G=z.deltaX>z.deltaY?1.1:.9090909090909091,Y=P.glplot.getAspectratio();P.glplot.setAspectratio({x:G*Y.x,y:G*Y.y,z:G*Y.z})}O(P)}},e?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var z=R();P.graphDiv.emit("plotly_relayouting",z)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(z){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:z,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},u.render=function(){var P=this,F=P.graphDiv,I,D=P.svgContainer,R=P.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var O=F._fullLayout._invScaleX,z=F._fullLayout._invScaleY,G=R.width*O,Y=R.height*z;D.setAttributeNS(null,"viewBox","0 0 "+G+" "+Y),D.setAttributeNS(null,"width",G),D.setAttributeNS(null,"height",Y),f(P),P.glplot.axes.update(P.axesOptions);for(var ee=Object.keys(P.traces),j=null,X=P.glplot.selection,ae=0;ae<ee.length;++ae)I=P.traces[ee[ae]],I.data.hoverinfo!=="skip"&&I.handlePick(X)&&(j=I),I.setContourLevels&&I.setContourLevels();function he(_e,fe,ye){var xe=P.fullSceneLayout[_e+"axis"];return xe.type!=="log"&&(fe=xe.d2l(fe)),r.hoverLabelText(xe,fe,ye)}if(j!==null){var K=b(P.glplot.cameraParams,X.dataCoordinate);I=j.data;var J=F._fullData[I.index],U=X.index,H={xLabel:he("x",X.traceCoordinate[0],I.xhoverformat),yLabel:he("y",X.traceCoordinate[1],I.yhoverformat),zLabel:he("z",X.traceCoordinate[2],I.zhoverformat)},q=v.castHoverinfo(J,P.fullLayout,U),re=(q||"").split("+"),Z=q&&q==="all";!J.hovertemplate&&!Z&&(re.indexOf("x")===-1&&(H.xLabel=void 0),re.indexOf("y")===-1&&(H.yLabel=void 0),re.indexOf("z")===-1&&(H.zLabel=void 0),re.indexOf("text")===-1&&(X.textLabel=void 0),re.indexOf("name")===-1&&(j.name=void 0));var Q,ie=[];I.type==="cone"||I.type==="streamtube"?(H.uLabel=he("x",X.traceCoordinate[3],I.uhoverformat),(Z||re.indexOf("u")!==-1)&&ie.push("u: "+H.uLabel),H.vLabel=he("y",X.traceCoordinate[4],I.vhoverformat),(Z||re.indexOf("v")!==-1)&&ie.push("v: "+H.vLabel),H.wLabel=he("z",X.traceCoordinate[5],I.whoverformat),(Z||re.indexOf("w")!==-1)&&ie.push("w: "+H.wLabel),H.normLabel=X.traceCoordinate[6].toPrecision(3),(Z||re.indexOf("norm")!==-1)&&ie.push("norm: "+H.normLabel),I.type==="streamtube"&&(H.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(Z||re.indexOf("divergence")!==-1)&&ie.push("divergence: "+H.divergenceLabel)),X.textLabel&&ie.push(X.textLabel),Q=ie.join("<br>")):I.type==="isosurface"||I.type==="volume"?(H.valueLabel=r.hoverLabelText(P._mockAxis,P._mockAxis.d2l(X.traceCoordinate[3]),I.valuehoverformat),ie.push("value: "+H.valueLabel),X.textLabel&&ie.push(X.textLabel),Q=ie.join("<br>")):Q=X.textLabel;var oe={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:J._input,fullData:J,curveNumber:J.index,pointNumber:U};v.appendArrayPointValue(oe,J,U),I._module.eventData&&(oe=J._module.eventData(oe,X,J,{},U));var ne={points:[oe]};if(P.fullSceneLayout.hovermode){var le=[];v.loneHover({trace:J,x:(.5+.5*K[0]/K[3])*G,y:(.5-.5*K[1]/K[3])*Y,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:Q,name:j.name,color:v.castHoverOption(J,U,"bgcolor")||j.color,borderColor:v.castHoverOption(J,U,"bordercolor"),fontFamily:v.castHoverOption(J,U,"font.family"),fontSize:v.castHoverOption(J,U,"font.size"),fontColor:v.castHoverOption(J,U,"font.color"),nameLength:v.castHoverOption(J,U,"namelength"),textAlign:v.castHoverOption(J,U,"align"),hovertemplate:i.castOption(J,U,"hovertemplate"),hovertemplateLabels:i.extendFlat({},oe,H),eventData:[oe]},{container:D,gd:F,inOut_bbox:le}),oe.bbox=le[0]}X.buttons&&X.distance<5?F.emit("plotly_click",ne):F.emit("plotly_hover",ne),this.oldEventData=ne}else v.loneUnhover(D),this.oldEventData&&F.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},u.recoverContext=function(){var P=this;P.glplot.dispose();var F=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(F);return}if(!P.initializeGLPlot()){i.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(F)};var w=["xaxis","yaxis","zaxis"];function p(P,F,I){for(var D=P.fullSceneLayout,R=0;R<3;R++){var O=w[R],z=O.charAt(0),G=D[O],Y=F[z],ee=F[z+"calendar"],j=F["_"+z+"length"];if(!i.isArrayOrTypedArray(Y))I[0][R]=Math.min(I[0][R],0),I[1][R]=Math.max(I[1][R],j-1);else for(var X,ae=0;ae<(j||Y.length);ae++)if(i.isArrayOrTypedArray(Y[ae]))for(var he=0;he<Y[ae].length;++he)X=G.d2l(Y[ae][he],0,ee),!isNaN(X)&&isFinite(X)&&(I[0][R]=Math.min(I[0][R],X),I[1][R]=Math.max(I[1][R],X));else X=G.d2l(Y[ae],0,ee),!isNaN(X)&&isFinite(X)&&(I[0][R]=Math.min(I[0][R],X),I[1][R]=Math.max(I[1][R],X))}}function _(P,F){for(var I=P.fullSceneLayout,D=I.annotations||[],R=0;R<3;R++)for(var O=w[R],z=O.charAt(0),G=I[O],Y=0;Y<D.length;Y++){var ee=D[Y];if(ee.visible){var j=G.r2l(ee[z]);!isNaN(j)&&isFinite(j)&&(F[0][R]=Math.min(F[0][R],j),F[1][R]=Math.max(F[1][R],j))}}}u.plot=function(P,F,I){var D=this;if(D.plotArgs=[P,F,I],D.glplot.contextLost)return;var R,O,z,G,Y,ee,j=F[D.id],X=I[D.id];D.fullLayout=F,D.fullSceneLayout=j,D.axesOptions.merge(F,j),D.spikeOptions.merge(j),D.setViewport(j),D.updateFx(j.dragmode,j.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(s(j.bgcolor)),D.setConvert(Y),P?Array.isArray(P)||(P=[P]):P=[];var ae=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<P.length;++z)R=P[z],!(R.visible!==!0||R._length===0)&&p(this,R,ae);_(this,ae);var he=[1,1,1];for(G=0;G<3;++G)ae[1][G]===ae[0][G]?he[G]=1:he[G]=1/(ae[1][G]-ae[0][G]);for(D.dataScale=he,D.convertAnnotations(this),z=0;z<P.length;++z)R=P[z],!(R.visible!==!0||R._length===0)&&(O=D.traces[R.uid],O?O.data.type===R.type?O.update(R):(O.dispose(),O=R._module.plot(this,R),D.traces[R.uid]=O):(O=R._module.plot(this,R),D.traces[R.uid]=O),O.name=R.name);var K=Object.keys(D.traces);e:for(z=0;z<K.length;++z){for(G=0;G<P.length;++G)if(P[G].uid===K[z]&&P[G].visible===!0&&P[G]._length!==0)continue e;O=D.traces[K[z]],O.dispose(),delete D.traces[K[z]]}D.glplot.objects.sort(function(Le,Ze){return Le._trace.data.index-Ze._trace.data.index});var J=[[0,0,0],[0,0,0]],U={};for(z=0;z<3;++z){if(Y=j[w[z]],ee=Y.type,ee in U?(U[ee].acc*=he[z],U[ee].count+=1):U[ee]={acc:he[z],count:1},Y.autorange){J[0][z]=1/0,J[1][z]=-1/0;var H=D.glplot.objects,q=D.fullSceneLayout.annotations||[],re=Y._name.charAt(0);for(G=0;G<H.length;G++){var Z=H[G],Q=Z.bounds,ie=Z._trace.data._pad||0;Z.constructor.name==="ErrorBars"&&Y._lowerLogErrorBound?J[0][z]=Math.min(J[0][z],Y._lowerLogErrorBound):J[0][z]=Math.min(J[0][z],Q[0][z]/he[z]-ie),J[1][z]=Math.max(J[1][z],Q[1][z]/he[z]+ie)}for(G=0;G<q.length;G++){var oe=q[G];if(oe.visible){var ne=Y.r2l(oe[re]);J[0][z]=Math.min(J[0][z],ne),J[1][z]=Math.max(J[1][z],ne)}}if("rangemode"in Y&&Y.rangemode==="tozero"&&(J[0][z]=Math.min(J[0][z],0),J[1][z]=Math.max(J[1][z],0)),J[0][z]>J[1][z])J[0][z]=-1,J[1][z]=1;else{var le=J[1][z]-J[0][z];J[0][z]-=le/32,J[1][z]+=le/32}if(Y.autorange==="reversed"){var _e=J[0][z];J[0][z]=J[1][z],J[1][z]=_e}}else{var fe=Y.range;J[0][z]=Y.r2l(fe[0]),J[1][z]=Y.r2l(fe[1])}J[0][z]===J[1][z]&&(J[0][z]-=1,J[1][z]+=1),D.glplot.setBounds(z,{min:J[0][z]*he[z],max:J[1][z]*he[z]})}var ye,xe=j.aspectmode;if(xe==="cube")ye=[1,1,1];else if(xe==="manual"){var me=j.aspectratio;ye=[me.x,me.y,me.z]}else if(xe==="auto"||xe==="data"){var be=[1,1,1];for(z=0;z<3;++z){Y=j[w[z]],ee=Y.type;var ke=U[ee];be[z]=Math.pow(ke.acc,1/ke.count)/he[z]}xe==="data"||Math.max.apply(null,be)/Math.min.apply(null,be)<=4?ye=be:ye=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");j.aspectratio.x=X.aspectratio.x=ye[0],j.aspectratio.y=X.aspectratio.y=ye[1],j.aspectratio.z=X.aspectratio.z=ye[2],D.glplot.setAspectratio(j.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:j.aspectratio.x,y:j.aspectratio.y,z:j.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=j.aspectmode);var De=j.domain||null,He=F._size||null;if(De&&He){var Ae=D.container.style;Ae.position="absolute",Ae.left=He.l+De.x[0]*He.w+"px",Ae.top=He.t+(1-De.y[1])*He.h+"px",Ae.width=He.w*(De.x[1]-De.x[0])+"px",Ae.height=He.h*(De.y[1]-De.y[0])+"px"}D.glplot.redraw()},u.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function h(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}u.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},u.setViewport=function(P){var F=this,I=P.camera;F.camera.lookAt.apply(this,h(I)),F.glplot.setAspectratio(P.aspectratio);var D=I.projection.type==="orthographic",R=F.camera._ortho;D!==R&&(F.glplot.redraw(),F.glplot.clearRGBA(),F.glplot.dispose(),F.initializeGLPlot())},u.isCameraChanged=function(P){var F=this,I=F.getCamera(),D=i.nestedProperty(P,F.id+".camera"),R=D.get();function O(ee,j,X,ae){var he=["up","center","eye"],K=["x","y","z"];return j[he[X]]&&ee[he[X]][K[ae]]===j[he[X]][K[ae]]}var z=!1;if(R===void 0)z=!0;else{for(var G=0;G<3;G++)for(var Y=0;Y<3;Y++)if(!O(I,R,G,Y)){z=!0;break}(!R.projection||I.projection&&I.projection.type!==R.projection.type)&&(z=!0)}return z},u.isAspectChanged=function(P){var F=this,I=F.glplot.getAspectratio(),D=i.nestedProperty(P,F.id+".aspectratio"),R=D.get();return R===void 0||R.x!==I.x||R.y!==I.y||R.z!==I.z},u.saveLayout=function(P){var F=this,I=F.fullLayout,D,R,O,z,G,Y,ee=F.isCameraChanged(P),j=F.isAspectChanged(P),X=ee||j;if(X){var ae={};if(ee&&(D=F.getCamera(),R=i.nestedProperty(P,F.id+".camera"),O=R.get(),ae[F.id+".camera"]=O),j&&(z=F.glplot.getAspectratio(),G=i.nestedProperty(P,F.id+".aspectratio"),Y=G.get(),ae[F.id+".aspectratio"]=Y),a.call("_storeDirectGUIEdit",P,I._preGUI,ae),ee){R.set(D);var he=i.nestedProperty(I,F.id+".camera");he.set(D)}if(j){G.set(z);var K=i.nestedProperty(I,F.id+".aspectratio");K.set(z),F.glplot.redraw()}}return X},u.updateFx=function(P,F){var I=this,D=I.camera;if(D)if(P==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(P==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=I.graphDiv,O=R._fullLayout,z=I.fullSceneLayout.camera,G=z.up.x,Y=z.up.y,ee=z.up.z;if(ee/Math.sqrt(G*G+Y*Y+ee*ee)<.999){var j=I.id+".camera.up",X={x:0,y:0,z:1},ae={};ae[j]=X;var he=R.layout;a.call("_storeDirectGUIEdit",he,O._preGUI,ae),z.up=X,i.nestedProperty(he,j).set(X)}}else D.keyBindingMode=P;I.fullSceneLayout.hovermode=F};function E(P,F,I){for(var D=0,R=I-1;D<R;++D,--R)for(var O=0;O<F;++O)for(var z=0;z<4;++z){var G=4*(F*D+O)+z,Y=4*(F*R+O)+z,ee=P[G];P[G]=P[Y],P[Y]=ee}}function S(P,F,I){for(var D=0;D<I;++D)for(var R=0;R<F;++R){var O=4*(F*D+R),z=P[O+3];if(z>0)for(var G=255/z,Y=0;Y<3;++Y)P[O+Y]=Math.min(G*P[O+Y],255)}}u.toImage=function(P){var F=this;P||(P="png"),F.staticMode&&F.container.appendChild(m),F.glplot.redraw();var I=F.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,O),E(O,D,R),S(O,D,R);var z=document.createElement("canvas");z.width=D,z.height=R;var G=z.getContext("2d",{willReadFrequently:!0}),Y=G.createImageData(D,R);Y.data.set(O),G.putImageData(Y,0,0);var ee;switch(P){case"jpeg":ee=z.toDataURL("image/jpeg");break;case"webp":ee=z.toDataURL("image/webp");break;default:ee=z.toDataURL("image/png")}return F.staticMode&&F.container.removeChild(m),ee},u.setConvert=function(){for(var P=this,F=0;F<3;F++){var I=P.fullSceneLayout[w[F]];r.setConvert(I,P.fullLayout),I.setScale=i.noop}},u.make4thDimension=function(){var P=this,F=P.graphDiv,I=F._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(P._mockAxis,I)},N.exports=x},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(t,N,V){N.exports=function(c,A,T,e){e=e||c.length;for(var a=new Array(e),i=0;i<e;i++)a[i]=[c[i],A[i],T[i]];return a}},{}],619:[function(t,N,V){var y=t("./font_attributes"),c=t("./animation_attributes"),A=t("../components/color/attributes"),T=t("../components/shapes/draw_newshape/attributes"),e=t("../components/selections/draw_newselection/attributes"),a=t("./pad_attributes"),i=t("../lib/extend").extendFlat,n=y({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=A.defaultLine,N.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:y({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(a({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:A.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:A.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:A.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},c.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:y({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(t,N,V){var y=t("../../lib/sort_object_keys"),c="1.10.1",A='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',A].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),i={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:A,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=y(i);N.exports={requiredVersion:c,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:i,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+c+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":538}],621:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){var e=A.split(" "),a=e[0],i=e[1],n=y.isArrayOrTypedArray(T)?y.mean(T):T,r=.5+n/100,v=1.5+n/100,s=["",""],o=[0,0];switch(a){case"top":s[0]="top",o[1]=-v;break;case"bottom":s[0]="bottom",o[1]=v;break}switch(i){case"left":s[1]="right",o[0]=-r;break;case"right":s[1]="left",o[0]=r;break}var b;return s[0]&&s[1]?b=s.join("-"):s[0]?b=s[0]:s[1]?b=s[1]:b="center",{anchor:b,offset:o}}},{"../../lib":515}],622:[function(t,N,V){var y=t("mapbox-gl/dist/mapbox-gl-unminified"),c=t("../../lib"),A=c.strTranslate,T=c.strScale,e=t("../../plots/get_data").getSubplotCalcData,a=t("../../constants/xmlns_namespaces"),i=t("@plotly/d3"),n=t("../../components/drawing"),r=t("../../lib/svg_text_utils"),v=t("./mapbox"),s="mapbox",o=V.constants=t("./constants");V.name=s,V.attr="subplot",V.idRoot=s,V.idRegex=V.attrRegex=c.counterRegex(s),V.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.plot=function(f){var m=f._fullLayout,l=f.calcdata,x=m._subplots[s];if(y.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var u=b(f,x);y.accessToken=u;for(var M=0;M<x.length;M++){var w=x[M],p=e(l,s,w),_=m[w],h=_._subplot;h||(h=new v(f,w),m[w]._subplot=h),h.viewInitial||(h.viewInitial={center:c.extendFlat({},_.center),zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),h.plot(p,m,f._promises)}},V.clean=function(d,f,m,l){for(var x=l._subplots[s]||[],u=0;u<x.length;u++){var M=x[u];!f[M]&&!!l[M]._subplot&&l[M]._subplot.destroy()}},V.toSVG=function(d){for(var f=d._fullLayout,m=f._subplots[s],l=f._size,x=0;x<m.length;x++){var u=f[m[x]],M=u.domain,w=u._subplot,p=w.toImage("png"),_=f._glimages.append("svg:image");_.attr({xmlns:a.svg,"xlink:href":p,x:l.l+l.w*M.x[0],y:l.t+l.h*(1-M.y[1]),width:l.w*(M.x[1]-M.x[0]),height:l.h*(M.y[1]-M.y[0]),preserveAspectRatio:"none"});var h=i.select(u._subplot.div),L=h.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var E=f._glimages.append("g");E.attr("transform",A(l.l+l.w*M.x[0]+10,l.t+l.h*(1-M.y[0])-31)),E.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),E.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),E.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),E.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var S=h.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=f._glimages.append("g"),F=P.append("text");F.text(S).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":S});var I=n.bBox(F.node()),D=l.w*(M.x[1]-M.x[0]);if(I.width>D/2){var R=S.split("|").join("<br>");F.text(R).attr("data-unformatted",R).call(r.convertToTspans,d),I=n.bBox(F.node())}F.attr("transform",A(-3,-I.height+8)),P.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;I.width+6>D&&(O=D/(I.width+6));var z=[l.l+l.w*M.x[1],l.t+l.h*(1-M.y[0])];P.attr("transform",A(z[0],z[1])+T(O))}};function b(d,f){var m=d._fullLayout,l=d._context;if(l.mapboxAccessToken==="")return"";for(var x=[],u=[],M=!1,w=!1,p=0;p<f.length;p++){var _=m[f[p]],h=_.accesstoken;g(_.style)&&(h?c.pushUnique(x,h):(g(_._input.style)&&(c.error("Uses Mapbox map style, but did not set an access token."),M=!0),w=!0)),h&&c.pushUnique(u,h)}if(w){var L=M?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw c.error(L),new Error(L)}return x.length?(x.length>1&&c.warn(o.multipleTokensErrorMsg),x[0]):(u.length&&c.log(["Listed mapbox access token(s)",u.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function g(d){return typeof d=="string"&&(o.styleValuesMapbox.indexOf(d)!==-1||d.indexOf("mapbox://")===0)}V.updateFx=function(d){for(var f=d._fullLayout,m=f._subplots[s],l=0;l<m.length;l++){var x=f[m[l]]._subplot;x.updateFx(f)}}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(t,N,V){var y=t("../../lib"),c=t("../../lib/svg_text_utils").sanitizeHTML,A=t("./convert_text_opts"),T=t("./constants");function e(v,s){this.subplot=v,this.uid=v.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=e.prototype;a.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=i(s)},a.needsNewImage=function(v){var s=this.subplot.map;return s.getSource(this.idSource)&&this.sourceType==="image"&&v.sourcetype==="image"&&(this.source!==v.source||JSON.stringify(this.coordinates)!==JSON.stringify(v.coordinates))},a.needsNewSource=function(v){return this.sourceType!==v.sourcetype||JSON.stringify(this.source)!==JSON.stringify(v.source)||this.layerType!==v.type},a.needsNewLayer=function(v){return this.layerType!==v.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(v){var s=this.subplot.map;s.getSource(this.idSource).updateImage({url:v.source,coordinates:v.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());o!==null&&this.subplot.map.moveLayer(this.idLayer,o)},a.updateSource=function(v){var s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=v.sourcetype,this.source=v.source,!!i(v)){var o=r(v);s.addSource(this.idSource,o)}},a.findFollowingMapboxLayerId=function(v){if(v==="traces")for(var s=this.subplot.getMapLayers(),o=0;o<s.length;o++){var b=s[o].id;if(typeof b=="string"&&b.indexOf(T.traceLayerPrefix)===0){v=b;break}}return v},a.updateLayer=function(v){var s=this.subplot,o=n(v),b=this.lookupBelow(),g=this.findFollowingMapboxLayerId(b);this.removeLayer(),i(v)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":v.sourcelayer||"",type:v.type,minzoom:v.minzoom,maxzoom:v.maxzoom,layout:o.layout,paint:o.paint},g),this.layerType=v.type,this.below=b},a.updateStyle=function(v){if(i(v)){var s=n(v);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},a.removeLayer=function(){var v=this.subplot.map;v.getLayer(this.idLayer)&&v.removeLayer(this.idLayer)},a.dispose=function(){var v=this.subplot.map;v.getLayer(this.idLayer)&&v.removeLayer(this.idLayer),v.getSource(this.idSource)&&v.removeSource(this.idSource)};function i(v){if(!v.visible)return!1;var s=v.source;if(Array.isArray(s)&&s.length>0){for(var o=0;o<s.length;o++)if(typeof s[o]!="string"||s[o].length===0)return!1;return!0}return y.isPlainObject(s)||typeof s=="string"&&s.length>0}function n(v){var s={},o={};switch(v.type){case"circle":y.extendFlat(o,{"circle-radius":v.circle.radius,"circle-color":v.color,"circle-opacity":v.opacity});break;case"line":y.extendFlat(o,{"line-width":v.line.width,"line-color":v.color,"line-opacity":v.opacity,"line-dasharray":v.line.dash});break;case"fill":y.extendFlat(o,{"fill-color":v.color,"fill-outline-color":v.fill.outlinecolor,"fill-opacity":v.opacity});break;case"symbol":var b=v.symbol,g=A(b.textposition,b.iconsize);y.extendFlat(s,{"icon-image":b.icon+"-15","icon-size":b.iconsize/10,"text-field":b.text,"text-size":b.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":b.placement}),y.extendFlat(o,{"icon-color":v.color,"text-color":b.textfont.color,"text-opacity":v.opacity});break;case"raster":y.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":v.opacity});break}return{layout:s,paint:o}}function r(v){var s=v.sourcetype,o=v.source,b={type:s},g;return s==="geojson"?g="data":s==="vector"?g=typeof o=="string"?"url":"tiles":s==="raster"?(g="tiles",b.tileSize=256):s==="image"&&(g="url",b.coordinates=v.coordinates),b[g]=o,v.sourceattribution&&(b.attribution=c(v.sourceattribution)),b}N.exports=function(s,o,b){var g=new e(s,o);return g.update(b),g}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color").defaultLine,A=t("../domain").attributes,T=t("../font_attributes"),e=t("../../traces/scatter/attributes").textposition,a=t("../../plot_api/edit_types").overrideAll,i=t("../../plot_api/plot_template").templatedArray,n=t("./constants"),r=T({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var v=N.exports=a({_arrayAttrRegexps:[y.counterRegex("mapbox",".layers",!0)],domain:A({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:n.styleValuesMapbox.concat(n.styleValuesNonMapbox),dflt:n.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:i("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:c},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:c}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:y.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");v.uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(t,N,V){var y=t("../../lib"),c=t("../subplot_defaults"),A=t("../array_container_defaults"),T=t("./layout_attributes");N.exports=function(n,r,v){c(n,r,v,{type:"mapbox",attributes:T,handleDefaults:e,partition:"y",accessToken:r._mapboxAccessToken})};function e(i,n,r,v){r("accesstoken",v.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var s=r("bounds.west"),o=r("bounds.east"),b=r("bounds.south"),g=r("bounds.north");(s===void 0||o===void 0||b===void 0||g===void 0)&&delete n.bounds,A(i,n,{name:"layers",handleItemDefaults:a}),n._input=i}function a(i,n){function r(d,f){return y.coerce(i,n,T.layers,d,f)}var v=r("visible");if(v){var s=r("sourcetype"),o=s==="raster"||s==="image";r("source"),r("sourceattribution"),s==="vector"&&r("sourcelayer"),s==="image"&&r("coordinates");var b;o&&(b="raster");var g=r("type",b);o&&g!=="raster"&&(g=n.type="raster",y.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),g==="circle"&&r("circle.radius"),g==="line"&&(r("line.width"),r("line.dash")),g==="fill"&&r("fill.outlinecolor"),g==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),y.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(t,N,V){var y=t("mapbox-gl/dist/mapbox-gl-unminified"),c=t("../../lib"),A=t("../../lib/geo_location_utils"),T=t("../../registry"),e=t("../cartesian/axes"),a=t("../../components/dragelement"),i=t("../../components/fx"),n=t("../../components/dragelement/helpers"),r=n.drawMode,v=n.selectMode,s=t("../../components/selections").prepSelect,o=t("../../components/selections").clearOutline,b=t("../../components/selections").clearSelectionsCache,g=t("../../components/selections").selectOnClick,d=t("./constants"),f=t("./layers");function m(p,_){this.id=_,this.gd=p;var h=p._fullLayout,L=p._context;this.container=h._glcontainer.node(),this.isStatic=L.staticPlot,this.uid=h._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(h),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var l=m.prototype;l.plot=function(p,_,h){var L=this,E=_[L.id];L.map&&E.accesstoken!==L.accessToken&&(L.map.remove(),L.map=null,L.styleObj=null,L.traceHash={},L.layerList=[]);var S;L.map?S=new Promise(function(P,F){L.updateMap(p,_,P,F)}):S=new Promise(function(P,F){L.createMap(p,_,P,F)}),h.push(S)},l.createMap=function(p,_,h,L){var E=this,S=_[E.id],P=E.styleObj=u(S.style);E.accessToken=S.accesstoken;var F=S.bounds,I=F?[[F.west,F.south],[F.east,F.north]]:null,D=E.map=new y.Map({container:E.div,style:P.style,center:w(S.center),zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,maxBounds:I,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new y.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",E.rejectOnError(L),E.isStatic||E.initFx(p,_);var R=[];R.push(new Promise(function(O){D.once("load",O)})),R=R.concat(A.fetchTraceGeoData(p)),Promise.all(R).then(function(){E.fillBelowLookup(p,_),E.updateData(p),E.updateLayout(_),E.resolveOnRender(h)}).catch(L)},l.updateMap=function(p,_,h,L){var E=this,S=E.map,P=_[this.id];E.rejectOnError(L);var F=[],I=u(P.style);JSON.stringify(E.styleObj)!==JSON.stringify(I)&&(E.styleObj=I,S.setStyle(I.style),E.traceHash={},F.push(new Promise(function(D){S.once("styledata",D)}))),F=F.concat(A.fetchTraceGeoData(p)),Promise.all(F).then(function(){E.fillBelowLookup(p,_),E.updateData(p),E.updateLayout(_),E.resolveOnRender(h)}).catch(L)},l.fillBelowLookup=function(p,_){var h=_[this.id],L=h.layers,E,S,P=this.belowLookup={},F=!1;for(E=0;E<p.length;E++){var I=p[E][0].trace,D=I._module;typeof I.below=="string"?S=I.below:D.getBelow&&(S=D.getBelow(I,this)),S===""&&(F=!0),P["trace-"+I.uid]=S||""}for(E=0;E<L.length;E++){var R=L[E];typeof R.below=="string"?S=R.below:F?S="traces":S="",P["layout-"+E]=S}var O={},z,G;for(z in P)S=P[z],O[S]?O[S].push(z):O[S]=[z];for(S in O){var Y=O[S];if(Y.length>1)for(E=0;E<Y.length;E++)z=Y[E],z.indexOf("trace-")===0?(G=z.split("trace-")[1],this.traceHash[G]&&(this.traceHash[G].below=null)):z.indexOf("layout-")===0&&(G=z.split("layout-")[1],this.layerList[G]&&(this.layerList[G].below=null))}};var x={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};l.updateData=function(p){var _=this.traceHash,h,L,E,S,P=p.slice().sort(function(O,z){return x[O[0].trace.type]-x[z[0].trace.type]});for(E=0;E<P.length;E++){var F=P[E];L=F[0].trace,h=_[L.uid];var I=!1;h&&(h.type===L.type?(h.update(F),I=!0):h.dispose()),!I&&L._module&&(_[L.uid]=L._module.plot(this,F))}var D=Object.keys(_);e:for(E=0;E<D.length;E++){var R=D[E];for(S=0;S<p.length;S++)if(L=p[S][0].trace,R===L.uid)continue e;h=_[R],h.dispose(),delete _[R]}},l.updateLayout=function(p){var _=this.map,h=p[this.id];!this.dragging&&!this.wheeling&&(_.setCenter(w(h.center)),_.setZoom(h.zoom),_.setBearing(h.bearing),_.setPitch(h.pitch)),this.updateLayers(p),this.updateFramework(p),this.updateFx(p),this.map.resize(),this.gd._context._scrollZoom.mapbox?_.scrollZoom.enable():_.scrollZoom.disable()},l.resolveOnRender=function(p){var _=this.map;_.on("render",function h(){_.loaded()&&(_.off("render",h),setTimeout(p,10))})},l.rejectOnError=function(p){var _=this.map;function h(){p(new Error(d.mapOnErrorMsg))}_.once("error",h),_.once("style.error",h),_.once("source.error",h),_.once("tile.error",h),_.once("layer.error",h)},l.createFramework=function(p){var _=this,h=_.div=document.createElement("div");h.id=_.uid,h.style.position="absolute",_.container.appendChild(h),_.xaxis={_id:"x",c2p:function(L){return _.project(L).x}},_.yaxis={_id:"y",c2p:function(L){return _.project(L).y}},_.updateFramework(p),_.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(_.mockAxis,p)},l.initFx=function(p,_){var h=this,L=h.gd,E=h.map;E.on("moveend",function(F){if(!!h.map){var I=L._fullLayout;if(F.originalEvent||h.wheeling){var D=I[h.id];T.call("_storeDirectGUIEdit",L.layout,I._preGUI,h.getViewEdits(D));var R=h.getView();D._input.center=D.center=R.center,D._input.zoom=D.zoom=R.zoom,D._input.bearing=D.bearing=R.bearing,D._input.pitch=D.pitch=R.pitch,L.emit("plotly_relayout",h.getViewEditsWithDerived(R))}F.originalEvent&&F.originalEvent.type==="mouseup"?h.dragging=!1:h.wheeling&&(h.wheeling=!1),I._rehover&&I._rehover()}}),E.on("wheel",function(){h.wheeling=!0}),E.on("mousemove",function(F){var I=h.div.getBoundingClientRect(),D=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return I},h.xaxis.p2c=function(){return E.unproject(D).lng},h.yaxis.p2c=function(){return E.unproject(D).lat},L._fullLayout._rehover=function(){L._fullLayout._hoversubplot===h.id&&L._fullLayout[h.id]&&i.hover(L,F,h.id)},i.hover(L,F,h.id),L._fullLayout._hoversubplot=h.id});function S(){i.loneUnhover(_._hoverlayer)}E.on("dragstart",function(){h.dragging=!0,S()}),E.on("zoomstart",S),E.on("mouseout",function(){L._fullLayout._hoversubplot=null});function P(){var F=h.getView();L.emit("plotly_relayouting",h.getViewEditsWithDerived(F))}E.on("drag",P),E.on("zoom",P),E.on("dblclick",function(){var F=L._fullLayout[h.id];T.call("_storeDirectGUIEdit",L.layout,L._fullLayout._preGUI,h.getViewEdits(F));var I=h.viewInitial;E.setCenter(w(I.center)),E.setZoom(I.zoom),E.setBearing(I.bearing),E.setPitch(I.pitch);var D=h.getView();F._input.center=F.center=D.center,F._input.zoom=F.zoom=D.zoom,F._input.bearing=F.bearing=D.bearing,F._input.pitch=F.pitch=D.pitch,L.emit("plotly_doubleclick",null),L.emit("plotly_relayout",h.getViewEditsWithDerived(D))}),h.clearOutline=function(){b(h.dragOptions),o(h.dragOptions.gd)},h.onClickInPanFn=function(F){return function(I){var D=L._fullLayout.clickmode;D.indexOf("select")>-1&&g(I.originalEvent,L,[h.xaxis],[h.yaxis],h.id,F),D.indexOf("event")>-1&&i.click(L,I.originalEvent)}}},l.updateFx=function(p){var _=this,h=_.map,L=_.gd;if(_.isStatic)return;function E(I){var D=_.map.unproject(I);return[D.lng,D.lat]}var S=p.dragmode,P;P=function(I,D){if(D.isRect){var R=I.range={};R[_.id]=[E([D.xmin,D.ymin]),E([D.xmax,D.ymax])]}else{var O=I.lassoPoints={};O[_.id]=D.map(E)}};var F=_.dragOptions;_.dragOptions=c.extendDeep(F||{},{dragmode:p.dragmode,element:_.div,gd:L,plotinfo:{id:_.id,domain:p[_.id].domain,xaxis:_.xaxis,yaxis:_.yaxis,fillRangeItems:P},xaxes:[_.xaxis],yaxes:[_.yaxis],subplot:_.id}),h.off("click",_.onClickInPanHandler),v(S)||r(S)?(h.dragPan.disable(),h.on("zoomstart",_.clearOutline),_.dragOptions.prepFn=function(I,D,R){s(I,D,R,_.dragOptions,S)},a.init(_.dragOptions)):(h.dragPan.enable(),h.off("zoomstart",_.clearOutline),_.div.onmousedown=null,_.div.ontouchstart=null,_.div.removeEventListener("touchstart",_.div._ontouchstart),_.onClickInPanHandler=_.onClickInPanFn(_.dragOptions),h.on("click",_.onClickInPanHandler))},l.updateFramework=function(p){var _=p[this.id].domain,h=p._size,L=this.div.style;L.width=h.w*(_.x[1]-_.x[0])+"px",L.height=h.h*(_.y[1]-_.y[0])+"px",L.left=h.l+_.x[0]*h.w+"px",L.top=h.t+(1-_.y[1])*h.h+"px",this.xaxis._offset=h.l+_.x[0]*h.w,this.xaxis._length=h.w*(_.x[1]-_.x[0]),this.yaxis._offset=h.t+(1-_.y[1])*h.h,this.yaxis._length=h.h*(_.y[1]-_.y[0])},l.updateLayers=function(p){var _=p[this.id],h=_.layers,L=this.layerList,E;if(h.length!==L.length){for(E=0;E<L.length;E++)L[E].dispose();for(L=this.layerList=[],E=0;E<h.length;E++)L.push(f(this,E,h[E]))}else for(E=0;E<h.length;E++)L[E].update(h[E])},l.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},l.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},l.setOptions=function(p,_,h){for(var L in h)this.map[_](p,L,h[L])},l.getMapLayers=function(){return this.map.getStyle().layers},l.addLayer=function(p,_){var h=this.map;if(typeof _=="string"){if(_===""){h.addLayer(p,_);return}for(var L=this.getMapLayers(),E=0;E<L.length;E++)if(_===L[E].id){h.addLayer(p,_);return}c.warn(["Trying to add layer with *below* value",_,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}h.addLayer(p)},l.project=function(p){return this.map.project(new y.LngLat(p[0],p[1]))},l.getView=function(){var p=this.map,_=p.getCenter(),h=_.lng,L=_.lat,E={lon:h,lat:L},S=p.getCanvas(),P=parseInt(S.style.width),F=parseInt(S.style.height);return{center:E,zoom:p.getZoom(),bearing:p.getBearing(),pitch:p.getPitch(),_derived:{coordinates:[p.unproject([0,0]).toArray(),p.unproject([P,0]).toArray(),p.unproject([P,F]).toArray(),p.unproject([0,F]).toArray()]}}},l.getViewEdits=function(p){for(var _=this.id,h=["center","zoom","bearing","pitch"],L={},E=0;E<h.length;E++){var S=h[E];L[_+"."+S]=p[S]}return L},l.getViewEditsWithDerived=function(p){var _=this.id,h=this.getViewEdits(p);return h[_+"._derived"]=p._derived,h};function u(p){var _={};return c.isPlainObject(p)?(_.id=p.id,_.style=p):typeof p=="string"?(_.id=p,d.styleValuesMapbox.indexOf(p)!==-1?_.style=M(p):d.stylesNonMapbox[p]?_.style=d.stylesNonMapbox[p]:_.style=p):(_.id=d.styleValueDflt,_.style=M(d.styleValueDflt)),_.transition={duration:0,delay:0},_}function M(p){return d.styleUrlPrefix+p+"-"+d.styleUrlSuffix}function w(p){return[p.lon,p.lat]}N.exports=m},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(t,N,V){N.exports=function(y){var c=y.editType;return{t:{valType:"number",dflt:0,editType:c},r:{valType:"number",dflt:0,editType:c},b:{valType:"number",dflt:0,editType:c},l:{valType:"number",dflt:0,editType:c},editType:c}}},{}],628:[function(t,N,V){var y=t("@plotly/d3"),c=t("d3-time-format").timeFormatLocale,A=t("d3-format").formatLocale,T=t("fast-isnumeric"),e=t("../registry"),a=t("../plot_api/plot_schema"),i=t("../plot_api/plot_template"),n=t("../lib"),r=t("../components/color"),v=t("../constants/numerical").BADNUM,s=t("./cartesian/axis_ids"),o=t("../components/shapes/handle_outline").clearOutline,b=t("./animation_attributes"),g=t("./frame_attributes"),d=t("../plots/get_data").getModuleCalcData,f=n.relinkPrivateKeys,m=n._,l=N.exports={};n.extendFlat(l,e),l.attributes=t("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=t("./font_attributes"),l.layoutAttributes=t("./layout_attributes"),l.fontWeight="normal";var x=l.transformsRegistry,u=t("./command");l.executeAPICommand=u.executeAPICommand,l.computeAPICommandBindings=u.computeAPICommandBindings,l.manageCommandObserver=u.manageCommandObserver,l.hasSimpleAPICommandBindings=u.hasSimpleAPICommandBindings,l.redrawText=function(K){return K=n.getGraphDiv(K),new Promise(function(J){setTimeout(function(){!K._fullLayout||(e.getComponentMethod("annotations","draw")(K),e.getComponentMethod("legend","draw")(K),e.getComponentMethod("colorbar","draw")(K),J(l.previousPromises(K)))},300)})},l.resize=function(K){K=n.getGraphDiv(K);var J,U=new Promise(function(H,q){(!K||n.isHidden(K))&&q(new Error("Resize must be passed a displayed plot div element.")),K._redrawTimer&&clearTimeout(K._redrawTimer),K._resolveResize&&(J=K._resolveResize),K._resolveResize=H,K._redrawTimer=setTimeout(function(){if(!K.layout||K.layout.width&&K.layout.height||n.isHidden(K)){H(K);return}delete K.layout.width,delete K.layout.height;var re=K.changed;K.autoplay=!0,e.call("relayout",K,{autosize:!0}).then(function(){K.changed=re,K._resolveResize===H&&(delete K._resolveResize,H(K))})},100)});return J&&J(U),U},l.previousPromises=function(K){if((K._promises||[]).length)return Promise.all(K._promises).then(function(){K._promises=[]})},l.addLinks=function(K){if(!(!K._context.showLink&&!K._context.showSources)){var J=K._fullLayout,U=n.ensureSingle(J._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var oe=y.select(this);oe.append("tspan").classed("js-link-to-tool",!0),oe.append("tspan").classed("js-link-spacer",!0),oe.append("tspan").classed("js-sourcelinks",!0)})}),H=U.node(),q={y:J._paper.attr("height")-9};document.body.contains(H)&&H.getComputedTextLength()>=J.width-20?(q["text-anchor"]="start",q.x=5):(q["text-anchor"]="end",q.x=J._paper.attr("width")-7),U.attr(q);var re=U.select(".js-link-to-tool"),Z=U.select(".js-link-spacer"),Q=U.select(".js-sourcelinks");K._context.showSources&&K._context.showSources(K),K._context.showLink&&M(K,re),Z.text(re.text()&&Q.text()?" - ":"")}};function M(K,J){J.text("");var U=J.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(K._context.linkText+" "+String.fromCharCode(187));if(K._context.sendData)U.on("click",function(){l.sendDataToCloud(K)});else{var H=window.location.pathname.split("/"),q=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+H[2].split(".")[0]+"/"+H[1]+q})}}l.sendDataToCloud=function(K){var J=(window.PLOTLYENV||{}).BASE_URL||K._context.plotlyServerURL;if(!!J){K.emit("plotly_beforeexport");var U=y.select(K).append("div").attr("id","hiddenform").style("display","none"),H=U.append("form").attr({action:J+"/external",method:"post",target:"_blank"}),q=H.append("input").attr({type:"text",name:"data"});return q.node().value=l.graphJson(K,!1,"keepdata"),H.node().submit(),U.remove(),K.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],p=["year","month","dayMonth","dayMonthYear"];l.supplyDefaults=function(K,J){var U=J&&J.skipUpdateCalc,H=K._fullLayout||{};if(H._skipDefaults){delete H._skipDefaults;return}var q=K._fullLayout={},re=K.layout||{},Z=K._fullData||[],Q=K._fullData=[],ie=K.data||[],oe=K.calcdata||[],ne=K._context||{},le;K._transitionData||l.createTransitionData(K),q._dfltTitle={plot:m(K,"Click to enter Plot title"),x:m(K,"Click to enter X axis title"),y:m(K,"Click to enter Y axis title"),colorbar:m(K,"Click to enter Colorscale title"),annotation:m(K,"new text")},q._traceWord=m(K,"trace");var _e=L(K,w);if(q._mapboxAccessToken=ne.mapboxAccessToken,H._initialAutoSizeIsDone){var fe=H.width,ye=H.height;l.supplyLayoutGlobalDefaults(re,q,_e),re.width||(q.width=fe),re.height||(q.height=ye),l.sanitizeMargins(q)}else{l.supplyLayoutGlobalDefaults(re,q,_e);var xe=!re.width||!re.height,me=q.autosize,be=ne.autosizable,ke=xe&&(me||be);ke?l.plotAutoSize(K,re,q):xe&&l.sanitizeMargins(q),!me&&xe&&(re.width=q.width,re.height=q.height)}q._d3locale=E(_e,q.separators),q._extraFormat=L(K,p),q._initialAutoSizeIsDone=!0,q._dataLength=ie.length,q._modules=[],q._visibleModules=[],q._basePlotModules=[];var De=q._subplots=h(),He=q._splomAxes={x:{},y:{}},Ae=q._splomSubplots={};q._splomGridDflt={},q._scatterStackOpts={},q._firstScatter={},q._alignmentOpts={},q._colorAxes={},q._requestRangeslider={},q._traceUids=_(Z,ie),q._globalTransforms=(K._context||{}).globalTransforms,l.supplyDataDefaults(ie,Q,re,q);var Le=Object.keys(He.x),Ze=Object.keys(He.y);if(Le.length>1&&Ze.length>1){for(e.getComponentMethod("grid","sizeDefaults")(re,q),le=0;le<Le.length;le++)n.pushUnique(De.xaxis,Le[le]);for(le=0;le<Ze.length;le++)n.pushUnique(De.yaxis,Ze[le]);for(var We in Ae)n.pushUnique(De.cartesian,We)}if(q._has=l._hasPlotType.bind(q),Z.length===Q.length)for(le=0;le<Q.length;le++)f(Q[le],Z[le]);l.supplyLayoutModuleDefaults(re,q,Q,K._transitionData);var ze=q._visibleModules,Ie=[];for(le=0;le<ze.length;le++){var Ve=ze[le].crossTraceDefaults;Ve&&n.pushUnique(Ie,Ve)}for(le=0;le<Ie.length;le++)Ie[le](Q,q);q._hasOnlyLargeSploms=q._basePlotModules.length===1&&q._basePlotModules[0].name==="splom"&&Le.length>15&&Ze.length>15&&q.shapes.length===0&&q.images.length===0,l.linkSubplots(Q,q,Z,H),l.cleanPlot(Q,q,Z,H);var dt=!!(H._has&&H._has("gl2d")),Ft=!!(q._has&&q._has("gl2d")),Qt=!!(H._has&&H._has("cartesian")),Ot=!!(q._has&&q._has("cartesian")),Ct=Qt||dt,jt=Ot||Ft;Ct&&!jt?H._bgLayer.remove():jt&&!Ct&&(q._shouldCreateBgLayer=!0),H._zoomlayer&&!K._dragging&&o({_fullLayout:H}),S(Q,q),f(q,H),e.getComponentMethod("colorscale","crossTraceDefaults")(Q,q),q._preGUI||(q._preGUI={}),q._tracePreGUI||(q._tracePreGUI={});var Nt=q._tracePreGUI,Lt={},Xe;for(Xe in Nt)Lt[Xe]="old";for(le=0;le<Q.length;le++)Xe=Q[le]._fullInput.uid,Lt[Xe]||(Nt[Xe]={}),Lt[Xe]="new";for(Xe in Lt)Lt[Xe]==="old"&&delete Nt[Xe];R(q),e.getComponentMethod("rangeslider","makeData")(q),!U&&oe.length===Q.length&&l.supplyDefaultsUpdateCalc(oe,Q)},l.supplyDefaultsUpdateCalc=function(K,J){for(var U=0;U<J.length;U++){var H=J[U],q=(K[U]||[])[0];if(q&&q.trace){var re=q.trace;if(re._hasCalcTransform){var Z=re._arrayAttrs,Q,ie,oe;for(Q=0;Q<Z.length;Q++)ie=Z[Q],oe=n.nestedProperty(re,ie).get().slice(),n.nestedProperty(H,ie).set(oe)}q.trace=H}}};function _(K,J){var U=J.length,H=[],q,re;for(q=0;q<K.length;q++){var Z=K[q]._fullInput;Z!==re&&H.push(Z),re=Z}var Q=H.length,ie=new Array(U),oe={};function ne(fe,ye){ie[ye]=fe,oe[fe]=1}function le(fe,ye){if(fe&&typeof fe=="string"&&!oe[fe])return ne(fe,ye),!0}for(q=0;q<U;q++){var _e=J[q].uid;typeof _e=="number"&&(_e=String(_e)),!le(_e,q)&&(q<Q&&le(H[q].uid,q)||ne(n.randstr(oe),q))}return ie}function h(){var K=e.collectableSubplotTypes,J={},U,H;if(!K){K=[];var q=e.subplotsRegistry;for(var re in q){var Z=q[re],Q=Z.attr;if(Q&&(K.push(re),Array.isArray(Q)))for(H=0;H<Q.length;H++)n.pushUnique(K,Q[H])}}for(U=0;U<K.length;U++)J[K[U]]=[];return J}function L(K,J){var U=K._context.locale;U||(U="en-US");var H=!1,q={};function re(le){for(var _e=!0,fe=0;fe<J.length;fe++){var ye=J[fe];q[ye]||(le[ye]?q[ye]=le[ye]:_e=!1)}_e&&(H=!0)}for(var Z=0;Z<2;Z++){for(var Q=K._context.locales,ie=0;ie<2;ie++){var oe=(Q[U]||{}).format;if(oe&&(re(oe),H))break;Q=e.localeRegistry}var ne=U.split("-")[0];if(H||ne===U)break;U=ne}return H||re(e.localeRegistry.en.format),q}function E(K,J){return K.decimal=J.charAt(0),K.thousands=J.charAt(1),{numberFormat:function(U){try{U=A(K).format(n.adjustFormat(U))}catch{return n.warnBadFormat(U),n.noFormat}return U},timeFormat:c(K).utcFormat}}function S(K,J){var U,H=[];J.meta&&(U=J._meta={meta:J.meta,layout:{meta:J.meta}});for(var q=0;q<K.length;q++){var re=K[q];re.meta?H[re.index]=re._meta={meta:re.meta}:J.meta&&(re._meta={meta:J.meta}),J.meta&&(re._meta.layout={meta:J.meta})}H.length&&(U||(U=J._meta={}),U.data=H)}l.createTransitionData=function(K){K._transitionData||(K._transitionData={}),K._transitionData._frames||(K._transitionData._frames=[]),K._transitionData._frameHash||(K._transitionData._frameHash={}),K._transitionData._counter||(K._transitionData._counter=0),K._transitionData._interruptCallbacks||(K._transitionData._interruptCallbacks=[])},l._hasPlotType=function(K){var J,U=this._basePlotModules||[];for(J=0;J<U.length;J++)if(U[J].name===K)return!0;var H=this._modules||[];for(J=0;J<H.length;J++){var q=H[J].name;if(q===K)return!0;var re=e.modules[q];if(re&&re.categories[K])return!0}return!1},l.cleanPlot=function(K,J,U,H){var q,re,Z=H._basePlotModules||[];for(q=0;q<Z.length;q++){var Q=Z[q];Q.clean&&Q.clean(K,J,U,H)}var ie=H._has&&H._has("gl"),oe=J._has&&J._has("gl");ie&&!oe&&H._glcontainer!==void 0&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.selectAll(".no-webgl").remove(),H._glcanvas=null);var ne=!!H._infolayer;e:for(q=0;q<U.length;q++){var le=U[q],_e=le.uid;for(re=0;re<K.length;re++){var fe=K[re];if(_e===fe.uid)continue e}ne&&H._infolayer.select(".cb"+_e).remove()}},l.linkSubplots=function(K,J,U,H){var q,re,Z=H._plots||{},Q=J._plots={},ie=J._subplots,oe={_fullData:K,_fullLayout:J},ne=ie.cartesian.concat(ie.gl2d||[]);for(q=0;q<ne.length;q++){var le=ne[q],_e=Z[le],fe=s.getFromId(oe,le,"x"),ye=s.getFromId(oe,le,"y"),xe;for(_e?xe=Q[le]=_e:(xe=Q[le]={},xe.id=le),fe._counterAxes.push(ye._id),ye._counterAxes.push(fe._id),fe._subplotsWith.push(le),ye._subplotsWith.push(le),xe.xaxis=fe,xe.yaxis=ye,xe._hasClipOnAxisFalse=!1,re=0;re<K.length;re++){var me=K[re];if(me.xaxis===xe.xaxis._id&&me.yaxis===xe.yaxis._id&&me.cliponaxis===!1){xe._hasClipOnAxisFalse=!0;break}}}var be=s.list(oe,null,!0),ke;for(q=0;q<be.length;q++){ke=be[q];var De=null;ke.overlaying&&(De=s.getFromId(oe,ke.overlaying),De&&De.overlaying&&(ke.overlaying=!1,De=null)),ke._mainAxis=De||ke,De&&(ke.domain=De.domain.slice()),ke._anchorAxis=ke.anchor==="free"?null:s.getFromId(oe,ke.anchor)}for(q=0;q<be.length;q++)if(ke=be[q],ke._counterAxes.sort(s.idSort),ke._subplotsWith.sort(n.subplotSort),ke._mainSubplot=P(ke,J),ke._counterAxes.length&&(ke.spikemode&&ke.spikemode.indexOf("across")!==-1||ke.automargin&&ke.mirror&&ke.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(ke))){var He=1,Ae=0;for(re=0;re<ke._counterAxes.length;re++){var Le=s.getFromId(oe,ke._counterAxes[re]);He=Math.min(He,Le.domain[0]),Ae=Math.max(Ae,Le.domain[1])}He<Ae&&(ke._counterDomainMin=He,ke._counterDomainMax=Ae)}};function P(K,J){var U={_fullLayout:J},H=K._id.charAt(0)==="x",q=K._mainAxis._anchorAxis,re="",Z="",Q="";if(q&&(Q=q._mainAxis._id,re=H?K._id+Q:Q+K._id),!re||!J._plots[re]){re="";for(var ie=K._counterAxes,oe=0;oe<ie.length;oe++){var ne=ie[oe],le=H?K._id+ne:ne+K._id;Z||(Z=le);var _e=s.getFromId(U,ne);if(Q&&_e.overlaying===Q){re=le;break}}}return re||Z}l.clearExpandedTraceDefaultColors=function(K){var J,U,H;function q(Z,Q,ie,oe){U[oe]=Q,U.length=oe+1,Z.valType==="color"&&Z.dflt===void 0&&J.push(U.join("."))}for(U=[],J=K._module._colorAttrs,J||(K._module._colorAttrs=J=[],a.crawl(K._module.attributes,q)),H=0;H<J.length;H++){var re=n.nestedProperty(K,"_input."+J[H]);re.get()||n.nestedProperty(K,J[H]).set(null)}},l.supplyDataDefaults=function(K,J,U,H){var q=H._modules,re=H._visibleModules,Z=H._basePlotModules,Q=0,ie=0,oe,ne,le;H._transformModules=[];function _e(Ze){J.push(Ze);var We=Ze._module;!We||(n.pushUnique(q,We),Ze.visible===!0&&n.pushUnique(re,We),n.pushUnique(Z,Ze._module.basePlotModule),Q++,Ze._input.visible!==!1&&ie++)}var fe={},ye=[],xe=(U.template||{}).data||{},me=i.traceTemplater(xe);for(oe=0;oe<K.length;oe++){if(le=K[oe],ne=me.newTrace(le),ne.uid=H._traceUids[oe],l.supplyTraceDefaults(le,ne,ie,H,oe),ne.index=oe,ne._input=le,ne._expandedIndex=Q,ne.transforms&&ne.transforms.length)for(var be=le.visible!==!1&&ne.visible===!1,ke=I(ne,J,U,H),De=0;De<ke.length;De++){var He=ke[De],Ae={_template:ne._template,type:ne.type,uid:ne.uid+De};be&&He.visible===!1&&delete He.visible,l.supplyTraceDefaults(He,Ae,Q,H,oe),f(Ae,He),Ae.index=oe,Ae._input=le,Ae._fullInput=ne,Ae._expandedIndex=Q,Ae._expandedInput=He,_e(Ae)}else ne._fullInput=ne,ne._expandedInput=ne,_e(ne);e.traceIs(ne,"carpetAxis")&&(fe[ne.carpet]=ne),e.traceIs(ne,"carpetDependent")&&ye.push(oe)}for(oe=0;oe<ye.length;oe++)if(ne=J[ye[oe]],!!ne.visible){var Le=fe[ne.carpet];if(ne._carpet=Le,!Le||!Le.visible){ne.visible=!1;continue}ne.xaxis=Le.xaxis,ne.yaxis=Le.yaxis}},l.supplyAnimationDefaults=function(K){K=K||{};var J,U={};function H(q,re){return n.coerce(K||{},U,b,q,re)}if(H("mode"),H("direction"),H("fromcurrent"),Array.isArray(K.frame))for(U.frame=[],J=0;J<K.frame.length;J++)U.frame[J]=l.supplyAnimationFrameDefaults(K.frame[J]||{});else U.frame=l.supplyAnimationFrameDefaults(K.frame||{});if(Array.isArray(K.transition))for(U.transition=[],J=0;J<K.transition.length;J++)U.transition[J]=l.supplyAnimationTransitionDefaults(K.transition[J]||{});else U.transition=l.supplyAnimationTransitionDefaults(K.transition||{});return U},l.supplyAnimationFrameDefaults=function(K){var J={};function U(H,q){return n.coerce(K||{},J,b.frame,H,q)}return U("duration"),U("redraw"),J},l.supplyAnimationTransitionDefaults=function(K){var J={};function U(H,q){return n.coerce(K||{},J,b.transition,H,q)}return U("duration"),U("easing"),J},l.supplyFrameDefaults=function(K){var J={};function U(H,q){return n.coerce(K,J,g,H,q)}return U("group"),U("name"),U("traces"),U("baseframe"),U("data"),U("layout"),J},l.supplyTraceDefaults=function(K,J,U,H,q){var re=H.colorway||r.defaults,Z=re[U%re.length],Q;function ie(ke,De){return n.coerce(K,J,l.attributes,ke,De)}var oe=ie("visible");ie("type"),ie("name",H._traceWord+" "+q),ie("uirevision",H.uirevision);var ne=l.getModule(J);if(J._module=ne,ne){var le=ne.basePlotModule,_e=le.attr,fe=le.attributes;if(_e&&fe){var ye=H._subplots,xe="";if(oe||le.name!=="gl2d"){if(Array.isArray(_e))for(Q=0;Q<_e.length;Q++){var me=_e[Q],be=n.coerce(K,J,fe,me);ye[me]&&n.pushUnique(ye[me],be),xe+=be}else xe=n.coerce(K,J,fe,_e);ye[le.name]&&n.pushUnique(ye[le.name],xe)}}}return oe&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(J,"showLegend")?(n.coerce(K,J,ne.attributes.showlegend?ne.attributes:l.attributes,"showlegend"),ie("legendwidth"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),J._dfltShowLegend=!0):J._dfltShowLegend=!1,ne&&ne.supplyDefaults(K,J,Z,H),e.traceIs(J,"noOpacity")||ie("opacity"),e.traceIs(J,"notLegendIsolatable")&&(J.visible=!!J.visible),e.traceIs(J,"noHover")||(J.hovertemplate||n.coerceHoverinfo(K,J,H),J.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(K,J,Z,H)),ne&&ne.selectPoints&&ie("selectedpoints"),l.supplyTransformDefaults(K,J,H)),J};function F(K){var J=K.transforms;if(Array.isArray(J)&&J.length)for(var U=0;U<J.length;U++){var H=J[U],q=H._module||x[H.type];if(q&&q.makesData)return!0}return!1}l.hasMakesDataTransform=F,l.supplyTransformDefaults=function(K,J,U){if(!!(J._length||F(K))){var H=U._globalTransforms||[],q=U._transformModules||[];if(!(!Array.isArray(K.transforms)&&H.length===0))for(var re=K.transforms||[],Z=H.concat(re),Q=J.transforms=[],ie=0;ie<Z.length;ie++){var oe=Z[ie],ne=oe.type,le=x[ne],_e,fe=!(oe._module&&oe._module===le),ye=le&&typeof le.transform=="function";le||n.warn("Unrecognized transform type "+ne+"."),le&&le.supplyDefaults&&(fe||ye)?(_e=le.supplyDefaults(oe,J,U,K),_e.type=ne,_e._module=le,n.pushUnique(q,le)):_e=n.extendFlat({},oe),Q.push(_e)}}};function I(K,J,U,H){for(var q=K.transforms,re=[K],Z=0;Z<q.length;Z++){var Q=q[Z],ie=x[Q.type];ie&&ie.transform&&(re=ie.transform(re,{transform:Q,fullTrace:K,fullData:J,layout:U,fullLayout:H,transformIndex:Z}))}return re}l.supplyLayoutGlobalDefaults=function(K,J,U){function H(oe,ne){return n.coerce(K,J,l.layoutAttributes,oe,ne)}var q=K.template;n.isPlainObject(q)&&(J.template=q,J._template=q.layout,J._dataTemplate=q.data),H("autotypenumbers");var re=n.coerceFont(H,"font"),Z=re.size;n.coerceFont(H,"title.font",n.extendFlat({},re,{size:Math.round(Z*1.4)})),H("title.text",J._dfltTitle.plot),H("title.xref"),H("title.yref"),H("title.x"),H("title.y"),H("title.xanchor"),H("title.yanchor"),H("title.pad.t"),H("title.pad.r"),H("title.pad.b"),H("title.pad.l");var Q=H("uniformtext.mode");Q&&H("uniformtext.minsize"),H("autosize",!(K.width&&K.height)),H("width"),H("height"),H("minreducedwidth"),H("minreducedheight"),H("margin.l"),H("margin.r"),H("margin.t"),H("margin.b"),H("margin.pad"),H("margin.autoexpand"),K.width&&K.height&&l.sanitizeMargins(J),e.getComponentMethod("grid","sizeDefaults")(K,J),H("paper_bgcolor"),H("separators",U.decimal+U.thousands),H("hidesources"),H("colorway"),H("datarevision");var ie=H("uirevision");H("editrevision",ie),H("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(K,J),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(K,J,H),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(K,J,H),H("meta"),n.isPlainObject(K.transition)&&(H("transition.duration"),H("transition.easing"),H("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(K,J,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(K,J,H)};function D(K){return typeof K=="string"&&K.substr(K.length-2)==="px"&&parseFloat(K)}l.plotAutoSize=function(J,U,H){var q=J._context||{},re=q.frameMargins,Z,Q,ie=n.isPlotDiv(J);if(ie&&J.emit("plotly_autosize"),q.fillFrame)Z=window.innerWidth,Q=window.innerHeight,document.body.style.overflow="hidden";else{var oe=ie?window.getComputedStyle(J):{};if(Z=D(oe.width)||D(oe.maxWidth)||H.width,Q=D(oe.height)||D(oe.maxHeight)||H.height,T(re)&&re>0){var ne=1-2*re;Z=Math.round(ne*Z),Q=Math.round(ne*Q)}}var le=l.layoutAttributes.width.min,_e=l.layoutAttributes.height.min;Z<le&&(Z=le),Q<_e&&(Q=_e);var fe=!U.width&&Math.abs(H.width-Z)>1,ye=!U.height&&Math.abs(H.height-Q)>1;(ye||fe)&&(fe&&(H.width=Z),ye&&(H.height=Q)),J._initialAutoSize||(J._initialAutoSize={width:Z,height:Q}),l.sanitizeMargins(H)},l.supplyLayoutModuleDefaults=function(K,J,U,H){var q=e.componentsRegistry,re=J._basePlotModules,Z,Q,ie,oe=e.subplotsRegistry.cartesian;for(Z in q)ie=q[Z],ie.includeBasePlot&&ie.includeBasePlot(K,J);re.length||re.push(oe),J._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(K,J),oe.finalizeSubplots(K,J));for(var ne in J._subplots)J._subplots[ne].sort(n.subplotSort);for(Q=0;Q<re.length;Q++)ie=re[Q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,J,U);var le=J._modules;for(Q=0;Q<le.length;Q++)ie=le[Q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,J,U);var _e=J._transformModules;for(Q=0;Q<_e.length;Q++)ie=_e[Q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,J,U,H);for(Z in q)ie=q[Z],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,J,U)},l.purge=function(K){var J=K._fullLayout||{};J._glcontainer!==void 0&&(J._glcontainer.selectAll(".gl-canvas").remove(),J._glcontainer.remove(),J._glcanvas=null),J._modeBar&&J._modeBar.destroy(),K._transitionData&&(K._transitionData._interruptCallbacks&&(K._transitionData._interruptCallbacks.length=0),K._transitionData._animationRaf&&window.cancelAnimationFrame(K._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive(K),delete K.data,delete K.layout,delete K._fullData,delete K._fullLayout,delete K.calcdata,delete K.empty,delete K.fid,delete K.undoqueue,delete K.undonum,delete K.autoplay,delete K.changed,delete K._promises,delete K._redrawTimer,delete K._hmlumcount,delete K._hmpixcount,delete K._transitionData,delete K._transitioning,delete K._initialAutoSize,delete K._transitioningWithDuration,delete K._dragging,delete K._dragged,delete K._dragdata,delete K._hoverdata,delete K._snapshotInProgress,delete K._editing,delete K._mouseDownTime,delete K._legendMouseDownTime,K.removeAllListeners&&K.removeAllListeners()},l.style=function(K){var J=K._fullLayout._visibleModules,U=[],H;for(H=0;H<J.length;H++){var q=J[H];q.style&&n.pushUnique(U,q.style)}for(H=0;H<U.length;H++)U[H](K)},l.sanitizeMargins=function(K){if(!(!K||!K.margin)){var J=K.width,U=K.height,H=K.margin,q=J-(H.l+H.r),re=U-(H.t+H.b),Z;q<0&&(Z=(J-1)/(H.l+H.r),H.l=Math.floor(Z*H.l),H.r=Math.floor(Z*H.r)),re<0&&(Z=(U-1)/(H.t+H.b),H.t=Math.floor(Z*H.t),H.b=Math.floor(Z*H.b))}},l.clearAutoMarginIds=function(K){K._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(K,J){K._fullLayout._pushmarginIds[J]=1};function R(K){var J=K.margin;if(!K._size){var U=K._size={l:Math.round(J.l),r:Math.round(J.r),t:Math.round(J.t),b:Math.round(J.b),p:Math.round(J.pad)};U.w=Math.round(K.width)-U.l-U.r,U.h=Math.round(K.height)-U.t-U.b}K._pushmargin||(K._pushmargin={}),K._pushmarginIds||(K._pushmarginIds={})}var O=2,z=2;l.autoMargin=function(K,J,U){var H=K._fullLayout,q=H.width,re=H.height,Z=H.margin,Q=H.minreducedwidth,ie=H.minreducedheight,oe=n.constrain(q-Z.l-Z.r,O,Q),ne=n.constrain(re-Z.t-Z.b,z,ie),le=Math.max(0,q-oe),_e=Math.max(0,re-ne),fe=H._pushmargin,ye=H._pushmarginIds;if(Z.autoexpand!==!1){if(!U)delete fe[J],delete ye[J];else{var xe=U.pad;if(xe===void 0&&(xe=Math.min(12,Z.l,Z.r,Z.t,Z.b)),le){var me=(U.l+U.r)/le;me>1&&(U.l/=me,U.r/=me)}if(_e){var be=(U.t+U.b)/_e;be>1&&(U.t/=be,U.b/=be)}var ke=U.xl!==void 0?U.xl:U.x,De=U.xr!==void 0?U.xr:U.x,He=U.yt!==void 0?U.yt:U.y,Ae=U.yb!==void 0?U.yb:U.y;fe[J]={l:{val:ke,size:U.l+xe},r:{val:De,size:U.r+xe},b:{val:Ae,size:U.b+xe},t:{val:He,size:U.t+xe}},ye[J]=1}if(!H._replotting)return l.doAutoMargin(K)}},l.doAutoMargin=function(K){var J=K._fullLayout,U=J.width,H=J.height;J._size||(J._size={}),R(J);var q=J._size,re=J.margin,Z=n.extendFlat({},q),Q=re.l,ie=re.r,oe=re.t,ne=re.b,le=J._pushmargin,_e=J._pushmarginIds,fe=J.minreducedwidth,ye=J.minreducedheight;if(J.margin.autoexpand!==!1){for(var xe in le)_e[xe]||delete le[xe];le.base={l:{val:0,size:Q},r:{val:1,size:ie},t:{val:1,size:oe},b:{val:0,size:ne}};for(var me in le){var be=le[me].l||{},ke=le[me].b||{},De=be.val,He=be.size,Ae=ke.val,Le=ke.size;for(var Ze in le){if(T(He)&&le[Ze].r){var We=le[Ze].r.val,ze=le[Ze].r.size;if(We>De){var Ie=(He*We+(ze-U)*De)/(We-De),Ve=(ze*(1-De)+(He-U)*(1-We))/(We-De);Ie+Ve>Q+ie&&(Q=Ie,ie=Ve)}}if(T(Le)&&le[Ze].t){var dt=le[Ze].t.val,Ft=le[Ze].t.size;if(dt>Ae){var Qt=(Le*dt+(Ft-H)*Ae)/(dt-Ae),Ot=(Ft*(1-Ae)+(Le-H)*(1-dt))/(dt-Ae);Qt+Ot>ne+oe&&(ne=Qt,oe=Ot)}}}}}var Ct=n.constrain(U-re.l-re.r,O,fe),jt=n.constrain(H-re.t-re.b,z,ye),Nt=Math.max(0,U-Ct),Lt=Math.max(0,H-jt);if(Nt){var Xe=(Q+ie)/Nt;Xe>1&&(Q/=Xe,ie/=Xe)}if(Lt){var it=(ne+oe)/Lt;it>1&&(ne/=it,oe/=it)}if(q.l=Math.round(Q),q.r=Math.round(ie),q.t=Math.round(oe),q.b=Math.round(ne),q.p=Math.round(re.pad),q.w=Math.round(U)-q.l-q.r,q.h=Math.round(H)-q.t-q.b,!J._replotting&&l.didMarginChange(Z,q)){"_redrawFromAutoMarginCount"in J?J._redrawFromAutoMarginCount++:J._redrawFromAutoMarginCount=1;var Ye=3*(1+Object.keys(_e).length);if(J._redrawFromAutoMarginCount<Ye)return e.call("_doPlot",K);J._size=Z,n.warn("Too many auto-margin redraws.")}G(K)};function G(K){var J=s.list(K,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(U){for(var H=0;H<J.length;H++){var q=J[H][U];q&&q()}})}var Y=["l","r","t","b","p","w","h"];l.didMarginChange=function(K,J){for(var U=0;U<Y.length;U++){var H=Y[U],q=K[H],re=J[H];if(!T(q)||Math.abs(re-q)>1)return!0}return!1},l.graphJson=function(K,J,U,H,q,re){(q&&J&&!K._fullData||q&&!J&&!K._fullLayout)&&l.supplyDefaults(K);var Z=q?K._fullData:K.data,Q=q?K._fullLayout:K.layout,ie=(K._transitionData||{})._frames;function oe(_e,fe){if(typeof _e=="function")return fe?"_function_":null;if(n.isPlainObject(_e)){var ye={},xe;return Object.keys(_e).sort().forEach(function(me){if(["_","["].indexOf(me.charAt(0))===-1){if(typeof _e[me]=="function"){fe&&(ye[me]="_function");return}if(U==="keepdata"){if(me.substr(me.length-3)==="src")return}else if(U==="keepstream"){if(xe=_e[me+"src"],typeof xe=="string"&&xe.indexOf(":")>0&&!n.isPlainObject(_e.stream))return}else if(U!=="keepall"&&(xe=_e[me+"src"],typeof xe=="string"&&xe.indexOf(":")>0))return;ye[me]=oe(_e[me],fe)}}),ye}return Array.isArray(_e)?_e.map(function(me){return oe(me,fe)}):n.isTypedArray(_e)?n.simpleMap(_e,n.identity):n.isJSDate(_e)?n.ms2DateTimeLocal(+_e):_e}var ne={data:(Z||[]).map(function(_e){var fe=oe(_e);return J&&delete fe.fit,fe})};if(!J&&(ne.layout=oe(Q),q)){var le=Q._size;ne.layout.computed={margin:{b:le.b,l:le.l,r:le.r,t:le.t}}}return ie&&(ne.frames=oe(ie)),re&&(ne.config=oe(K._context,!0)),H==="object"?ne:JSON.stringify(ne)},l.modifyFrames=function(K,J){var U,H,q,re=K._transitionData._frames,Z=K._transitionData._frameHash;for(U=0;U<J.length;U++)switch(H=J[U],H.type){case"replace":q=H.value;var Q=(re[H.index]||{}).name,ie=q.name;re[H.index]=Z[ie]=q,ie!==Q&&(delete Z[Q],Z[ie]=q);break;case"insert":q=H.value,Z[q.name]=q,re.splice(H.index,0,q);break;case"delete":q=re[H.index],delete Z[q.name],re.splice(H.index,1);break}return Promise.resolve()},l.computeFrame=function(K,J){var U=K._transitionData._frameHash,H,q,re,Z;if(!J)throw new Error("computeFrame must be given a string frame name");var Q=U[J.toString()];if(!Q)return!1;for(var ie=[Q],oe=[Q.name];Q.baseframe&&(Q=U[Q.baseframe.toString()])&&oe.indexOf(Q.name)===-1;)ie.push(Q),oe.push(Q.name);for(var ne={};Q=ie.pop();)if(Q.layout&&(ne.layout=l.extendLayout(ne.layout,Q.layout)),Q.data){if(ne.data||(ne.data=[]),q=Q.traces,!q)for(q=[],H=0;H<Q.data.length;H++)q[H]=H;for(ne.traces||(ne.traces=[]),H=0;H<Q.data.length;H++)re=q[H],re!=null&&(Z=ne.traces.indexOf(re),Z===-1&&(Z=ne.data.length,ne.traces[Z]=re),ne.data[Z]=l.extendTrace(ne.data[Z],Q.data[H]))}return ne},l.recomputeFrameHash=function(K){for(var J=K._transitionData._frameHash={},U=K._transitionData._frames,H=0;H<U.length;H++){var q=U[H];q&&q.name&&(J[q.name]=q)}},l.extendObjectWithContainers=function(K,J,U){var H,q,re,Z,Q,ie,oe,ne,le=n.extendDeepNoArrays({},J||{}),_e=n.expandObjectPaths(le),fe={};if(U&&U.length)for(re=0;re<U.length;re++)H=n.nestedProperty(_e,U[re]),q=H.get(),q===void 0?n.nestedProperty(fe,U[re]).set(null):(H.set(null),n.nestedProperty(fe,U[re]).set(q));if(K=n.extendDeepNoArrays(K||{},_e),U&&U.length){for(re=0;re<U.length;re++)if(Q=n.nestedProperty(fe,U[re]),oe=Q.get(),!!oe){for(ie=n.nestedProperty(K,U[re]),ne=ie.get(),Array.isArray(ne)||(ne=[],ie.set(ne)),Z=0;Z<oe.length;Z++){var ye=oe[Z];ye===null?ne[Z]=null:ne[Z]=l.extendObjectWithContainers(ne[Z],ye)}ie.set(ne)}}return K},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(K,J){return l.extendObjectWithContainers(K,J,l.dataArrayContainers)},l.extendLayout=function(K,J){return l.extendObjectWithContainers(K,J,l.layoutArrayContainers)},l.transition=function(K,J,U,H,q,re){var Z={redraw:q.redraw},Q={},ie=[];return Z.prepareFn=function(){for(var oe=Array.isArray(J)?J.length:0,ne=H.slice(0,oe),le=0;le<ne.length;le++){var _e=ne[le],fe=K._fullData[_e],ye=fe._module;if(!!ye){if(ye.animatable){var xe=ye.basePlotModule.name;Q[xe]||(Q[xe]=[]),Q[xe].push(_e)}K.data[ne[le]]=l.extendTrace(K.data[ne[le]],J[le])}}var me=n.expandObjectPaths(n.extendDeepNoArrays({},U)),be=/^[xy]axis[0-9]*$/;for(var ke in me)!be.test(ke)||delete me[ke].range;l.extendLayout(K.layout,me),delete K.calcdata,l.supplyDefaults(K),l.doCalcdata(K);var De=n.expandObjectPaths(U);if(De){var He=K._fullLayout._plots;for(var Ae in He){var Le=He[Ae],Ze=Le.xaxis,We=Le.yaxis,ze=Ze.range.slice(),Ie=We.range.slice(),Ve=null,dt=null,Ft=null,Qt=null;Array.isArray(De[Ze._name+".range"])?Ve=De[Ze._name+".range"].slice():Array.isArray((De[Ze._name]||{}).range)&&(Ve=De[Ze._name].range.slice()),Array.isArray(De[We._name+".range"])?dt=De[We._name+".range"].slice():Array.isArray((De[We._name]||{}).range)&&(dt=De[We._name].range.slice()),ze&&Ve&&(Ze.r2l(ze[0])!==Ze.r2l(Ve[0])||Ze.r2l(ze[1])!==Ze.r2l(Ve[1]))&&(Ft={xr0:ze,xr1:Ve}),Ie&&dt&&(We.r2l(Ie[0])!==We.r2l(dt[0])||We.r2l(Ie[1])!==We.r2l(dt[1]))&&(Qt={yr0:Ie,yr1:dt}),(Ft||Qt)&&ie.push(n.extendFlat({plotinfo:Le},Ft,Qt))}}return Promise.resolve()},Z.runFn=function(oe){var ne,le=K._fullLayout._basePlotModules,_e=ie.length,fe;if(U)for(fe=0;fe<le.length;fe++)le[fe].transitionAxes&&le[fe].transitionAxes(K,ie,re,oe);_e?(ne=n.extendFlat({},re),ne.duration=0,delete Q.cartesian):ne=re;for(var ye in Q){var xe=Q[ye],me=K._fullData[xe[0]]._module;me.basePlotModule.plot(K,xe,ne,oe)}},ee(K,re,Z)},l.transitionFromReact=function(K,J,U,H){var q=K._fullLayout,re=q.transition,Z={},Q=[];return Z.prepareFn=function(){var ie=q._plots;Z.redraw=!1,J.anim==="some"&&(Z.redraw=!0),U.anim==="some"&&(Z.redraw=!0);for(var oe in ie){var ne=ie[oe],le=ne.xaxis,_e=ne.yaxis,fe=H[le._name].range.slice(),ye=H[_e._name].range.slice(),xe=le.range.slice(),me=_e.range.slice();le.setScale(),_e.setScale();var be=null,ke=null;(le.r2l(fe[0])!==le.r2l(xe[0])||le.r2l(fe[1])!==le.r2l(xe[1]))&&(be={xr0:fe,xr1:xe}),(_e.r2l(ye[0])!==_e.r2l(me[0])||_e.r2l(ye[1])!==_e.r2l(me[1]))&&(ke={yr0:ye,yr1:me}),(be||ke)&&Q.push(n.extendFlat({plotinfo:ne},be,ke))}return Promise.resolve()},Z.runFn=function(ie){for(var oe=K._fullData,ne=K._fullLayout,le=ne._basePlotModules,_e,fe,ye,xe=[],me=0;me<oe.length;me++)xe.push(me);function be(){if(!!K._fullLayout)for(var De=0;De<le.length;De++)le[De].transitionAxes&&le[De].transitionAxes(K,Q,_e,ie)}function ke(){if(!!K._fullLayout)for(var De=0;De<le.length;De++)le[De].plot(K,ye,fe,ie)}Q.length&&J.anim?re.ordering==="traces first"?(_e=n.extendFlat({},re,{duration:0}),ye=xe,fe=re,setTimeout(be,re.duration),ke()):(_e=re,ye=null,fe=n.extendFlat({},re,{duration:0}),setTimeout(ke,_e.duration),be()):Q.length?(_e=re,be()):J.anim&&(ye=xe,fe=re,ke())},ee(K,re,Z)};function ee(K,J,U){var H=!1;function q(le){var _e=Promise.resolve();if(!le)return _e;for(;le.length;)_e=_e.then(le.shift());return _e}function re(le){if(!!le)for(;le.length;)le.shift()}function Z(){return K.emit("plotly_transitioning",[]),new Promise(function(le){K._transitioning=!0,J.duration>0&&(K._transitioningWithDuration=!0),K._transitionData._interruptCallbacks.push(function(){H=!0}),U.redraw&&K._transitionData._interruptCallbacks.push(function(){return e.call("redraw",K)}),K._transitionData._interruptCallbacks.push(function(){K.emit("plotly_transitioninterrupted",[])});var _e=0,fe=0;function ye(){return _e++,function(){fe++,!H&&fe===_e&&Q(le)}}U.runFn(ye),setTimeout(ye())})}function Q(le){if(!!K._transitionData)return re(K._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(U.redraw)return e.call("redraw",K)}).then(function(){K._transitioning=!1,K._transitioningWithDuration=!1,K.emit("plotly_transitioned",[])}).then(le)}function ie(){if(!!K._transitionData)return K._transitioning=!1,q(K._transitionData._interruptCallbacks)}var oe=[l.previousPromises,ie,U.prepareFn,l.rehover,l.reselect,Z],ne=n.syncOrAsync(oe,K);return(!ne||!ne.then)&&(ne=Promise.resolve()),ne.then(function(){return K})}l.doCalcdata=function(K,J){var U=s.list(K),H=K._fullData,q=K._fullLayout,re,Z,Q,ie,oe=new Array(H.length),ne=(K.calcdata||[]).slice();for(K.calcdata=oe,q._numBoxes=0,q._numViolins=0,q._violinScaleGroupStats={},K._hmpixcount=0,K._hmlumcount=0,q._piecolormap={},q._sunburstcolormap={},q._treemapcolormap={},q._iciclecolormap={},q._funnelareacolormap={},Q=0;Q<H.length;Q++)if(Array.isArray(J)&&J.indexOf(Q)===-1){oe[Q]=ne[Q];continue}for(Q=0;Q<H.length;Q++)re=H[Q],re._arrayAttrs=a.findArrayAttributes(re),re._extremes={};var le=q._subplots.polar||[];for(Q=0;Q<le.length;Q++)U.push(q[le[Q]].radialaxis,q[le[Q]].angularaxis);for(var _e in q._colorAxes){var fe=q[_e];fe.cauto!==!1&&(delete fe.cmin,delete fe.cmax)}var ye=!1;function xe(ke){if(re=H[ke],Z=re._module,re.visible===!0&&re.transforms){if(Z&&Z.calc){var De=Z.calc(K,re);De[0]&&De[0].t&&De[0].t._scene&&delete De[0].t._scene.dirty}for(ie=0;ie<re.transforms.length;ie++){var He=re.transforms[ie];Z=x[He.type],Z&&Z.calcTransform&&(re._hasCalcTransform=!0,ye=!0,Z.calcTransform(K,re,He))}}}function me(ke,De){if(re=H[ke],Z=re._module,!!Z.isContainer===De){var He=[];if(re.visible===!0&&re._length!==0){delete re._indexToPoints;var Ae=re.transforms||[];for(ie=Ae.length-1;ie>=0;ie--)if(Ae[ie].enabled){re._indexToPoints=Ae[ie]._indexToPoints;break}Z&&Z.calc&&(He=Z.calc(K,re))}(!Array.isArray(He)||!He[0])&&(He=[{x:v,y:v}]),He[0].t||(He[0].t={}),He[0].trace=re,oe[ke]=He}}for(ae(U,H,q),Q=0;Q<H.length;Q++)me(Q,!0);for(Q=0;Q<H.length;Q++)xe(Q);for(ye&&ae(U,H,q),Q=0;Q<H.length;Q++)me(Q,!0);for(Q=0;Q<H.length;Q++)me(Q,!1);he(K);var be=X(U,K);if(be.length){for(q._numBoxes=0,q._numViolins=0,Q=0;Q<be.length;Q++)me(be[Q],!0);for(Q=0;Q<be.length;Q++)me(be[Q],!1);he(K)}e.getComponentMethod("fx","calc")(K),e.getComponentMethod("errorbars","calc")(K)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function X(K,J){var U=[],H,q,re,Z,Q;function ie(Ct,jt,Nt){var Lt=jt._id.charAt(0);if(Ct==="histogram2dcontour"){var Xe=jt._counterAxes[0],it=s.getFromId(J,Xe),Ye=Lt==="x"||Xe==="x"&&it.type==="category",Ee=Lt==="y"||Xe==="y"&&it.type==="category";return function(Ge,Ke){return Ge===0||Ke===0||Ye&&Ge===Nt[Ke].length-1||Ee&&Ke===Nt.length-1?-1:(Lt==="y"?Ke:Ge)-1}}else return function(Ge,Ke){return Lt==="y"?Ke:Ge}}var oe={min:function(Ct){return n.aggNums(Math.min,null,Ct)},max:function(Ct){return n.aggNums(Math.max,null,Ct)},sum:function(Ct){return n.aggNums(function(jt,Nt){return jt+Nt},null,Ct)},total:function(Ct){return n.aggNums(function(jt,Nt){return jt+Nt},null,Ct)},mean:function(Ct){return n.mean(Ct)},median:function(Ct){return n.median(Ct)}};for(H=0;H<K.length;H++){var ne=K[H];if(ne.type==="category"){var le=ne.categoryorder.match(j);if(le){var _e=le[1],fe=le[2],ye=ne._id.charAt(0),xe=ye==="x",me=[];for(q=0;q<ne._categories.length;q++)me.push([ne._categories[q],[]]);for(q=0;q<ne._traceIndices.length;q++){var be=ne._traceIndices[q],ke=J._fullData[be];if(ke.visible===!0){var De=ke.type;e.traceIs(ke,"histogram")&&(delete ke._xautoBinFinished,delete ke._yautoBinFinished);var He=De==="splom",Ae=De==="scattergl",Le=J.calcdata[be];for(re=0;re<Le.length;re++){var Ze=Le[re],We,ze;if(He){var Ie=ke._axesDim[ne._id];if(!xe){var Ve=ke._diag[Ie][0];Ve&&(ne=J._fullLayout[s.id2name(Ve)])}var dt=Ze.trace.dimensions[Ie].values;for(Z=0;Z<dt.length;Z++)for(We=ne._categoriesMap[dt[Z]],Q=0;Q<Ze.trace.dimensions.length;Q++)if(Q!==Ie){var Ft=Ze.trace.dimensions[Q];me[We][1].push(Ft.values[Z])}}else if(Ae){for(Z=0;Z<Ze.t.x.length;Z++)xe?(We=Ze.t.x[Z],ze=Ze.t.y[Z]):(We=Ze.t.y[Z],ze=Ze.t.x[Z]),me[We][1].push(ze);Ze.t&&Ze.t._scene&&delete Ze.t._scene.dirty}else if(Ze.hasOwnProperty("z")){ze=Ze.z;var Qt=ie(ke.type,ne,ze);for(Z=0;Z<ze.length;Z++)for(Q=0;Q<ze[Z].length;Q++)We=Qt(Q,Z),We+1&&me[We][1].push(ze[Z][Q])}else for(We=Ze.p,We===void 0&&(We=Ze[ye]),ze=Ze.s,ze===void 0&&(ze=Ze.v),ze===void 0&&(ze=xe?Ze.y:Ze.x),Array.isArray(ze)||(ze===void 0?ze=[]:ze=[ze]),Z=0;Z<ze.length;Z++)me[We][1].push(ze[Z])}}}ne._categoriesValue=me;var Ot=[];for(q=0;q<me.length;q++)Ot.push([me[q][0],oe[_e](me[q][1])]);Ot.sort(function(Ct,jt){return Ct[1]-jt[1]}),ne._categoriesAggregatedValue=Ot,ne._initialCategories=Ot.map(function(Ct){return Ct[0]}),fe==="descending"&&ne._initialCategories.reverse(),U=U.concat(ne.sortByInitialCategories())}}}return U}function ae(K,J,U){var H={};function q(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(J),H[ie._id]=1}n.simpleMap(K,q);for(var re=U._axisMatchGroups||[],Z=0;Z<re.length;Z++)for(var Q in re[Z])H[Q]||q(U[s.id2name(Q)])}function he(K){var J=K._fullLayout,U=J._visibleModules,H={},q,re,Z;for(re=0;re<U.length;re++){var Q=U[re],ie=Q.crossTraceCalc;if(ie){var oe=Q.basePlotModule.name;H[oe]?n.pushUnique(H[oe],ie):H[oe]=[ie]}}for(Z in H){var ne=H[Z],le=J._subplots[Z];if(Array.isArray(le))for(q=0;q<le.length;q++){var _e=le[q],fe=Z==="cartesian"?J._plots[_e]:J[_e];for(re=0;re<ne.length;re++)ne[re](K,fe,_e)}else for(re=0;re<ne.length;re++)ne[re](K)}}l.rehover=function(K){K._fullLayout._rehover&&K._fullLayout._rehover()},l.redrag=function(K){K._fullLayout._redrag&&K._fullLayout._redrag()},l.reselect=function(K){var J=K._fullLayout,U=(K.layout||{}).selections,H=J._previousSelections;J._previousSelections=U;var q=J._reselect||JSON.stringify(U)!==JSON.stringify(H);e.getComponentMethod("selections","reselect")(K,q)},l.generalUpdatePerTraceModule=function(K,J,U,H){var q=J.traceHash,re={},Z;for(Z=0;Z<U.length;Z++){var Q=U[Z],ie=Q[0].trace;ie.visible&&(re[ie.type]=re[ie.type]||[],re[ie.type].push(Q))}for(var oe in q)if(!re[oe]){var ne=q[oe][0],le=ne[0].trace;le.visible=!1,re[oe]=[ne]}for(var _e in re){var fe=re[_e],ye=fe[0][0].trace._module;ye.plot(K,J,n.filterVisible(fe),H)}J.traceHash=re},l.plotBasePlot=function(K,J,U,H,q){var re=e.getModule(K),Z=d(J.calcdata,re)[0];re.plot(J,Z,H,q)},l.cleanBasePlot=function(K,J,U,H,q){var re=q._has&&q._has(K),Z=U._has&&U._has(K);re&&!Z&&q["_"+K+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(t,N,V){N.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(t,N,V){var y=t("../../lib"),c=t("../../lib/polygon").tester,A=y.findIndexOfMin,T=y.isAngleInsideSector,e=y.angleDelta,a=y.angleDist;function i(x,u,M,w,p){if(!T(u,w))return!1;var _,h;M[0]<M[1]?(_=M[0],h=M[1]):(_=M[1],h=M[0]);var L=c(o(_,w[0],w[1],p)),E=c(o(h,w[0],w[1],p)),S=[x*Math.cos(u),x*Math.sin(u)];return E.contains(S)&&!L.contains(S)}function n(x,u,M,w){var p,_,h=w[0],L=w[1],E=d(Math.sin(u)-Math.sin(x)),S=d(Math.cos(u)-Math.cos(x)),P=Math.tan(M),F=d(1/P),I=E/S,D=L-I*h;return F?E&&S?(p=D/(P-I),_=P*p):S?(p=L*F,_=L):(p=h,_=h*P):E&&S?(p=0,_=D):S?(p=0,_=L):p=_=NaN,[p,_]}function r(x,u,M,w){var p=-u*M,_=u*u+1,h=2*(u*p-M),L=p*p+M*M-x*x,E=Math.sqrt(h*h-4*_*L),S=(-h+E)/(2*_),P=(-h-E)/(2*_);return[[S,u*S+p+w],[P,u*P+p+w]]}function v(x,u){var M=u.length,w=new Array(M+1),p;for(p=0;p<M;p++){var _=u[p];w[p]=[x*Math.cos(_),x*Math.sin(_)]}return w[p]=w[0].slice(),w}function s(x,u,M,w){var p=w.length,_=[],h,L;function E(G){return[x*Math.cos(G),x*Math.sin(G)]}function S(G,Y,ee){return n(G,Y,ee,E(G))}function P(G){return y.mod(G,p)}function F(G){return T(G,[u,M])}var I=A(w,function(G){return F(G)?a(G,u):1/0}),D=S(w[I],w[P(I-1)],u);for(_.push(D),h=I,L=0;L<p;h++,L++){var R=w[P(h)];if(!F(R))break;_.push(E(R))}var O=A(w,function(G){return F(G)?a(G,M):1/0}),z=S(w[O],w[P(O+1)],M);return _.push(z),_.push([0,0]),_.push(_[0].slice()),_}function o(x,u,M,w){return y.isFullCircle([u,M])?v(x,w):s(x,u,M,w)}function b(x,u,M,w){for(var p=1/0,_=1/0,h=o(x,u,M,w),L=0;L<h.length;L++){var E=h[L];p=Math.min(p,E[0]),_=Math.min(_,-E[1])}return[p,_]}function g(x,u){var M=function(_){var h=e(_,x);return h>0?h:1/0},w=A(u,M),p=y.mod(w+1,u.length);return[u[w],u[p]]}function d(x){return Math.abs(x)>1e-10?x:0}function f(x,u,M){u=u||0,M=M||0;for(var w=x.length,p=new Array(w),_=0;_<w;_++){var h=x[_];p[_]=[u+h[0],M-h[1]]}return p}function m(x,u,M,w,p,_){var h=o(x,u,M,w);return"M"+f(h,p,_).join("L")}function l(x,u,M,w,p,_,h){var L,E;x<u?(L=x,E=u):(L=u,E=x);var S=f(o(L,M,w,p),_,h),P=f(o(E,M,w,p),_,h);return"M"+P.reverse().join("L")+"M"+S.join("L")}N.exports={isPtInsidePolygon:i,findPolygonOffset:b,findEnclosingVertexAngles:g,findIntersectionXY:n,findXYatLength:r,clampTiny:d,pathPolygon:m,pathPolygonAnnulus:l}},{"../../lib":515,"../../lib/polygon":527}],631:[function(t,N,V){var y=t("../get_data").getSubplotCalcData,c=t("../../lib").counterRegex,A=t("./polar"),T=t("./constants"),e=T.attr,a=T.name,i=c(a),n={};n[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(s){for(var o=s._fullLayout,b=s.calcdata,g=o._subplots[a],d=0;d<g.length;d++){var f=g[d],m=y(b,a,f),l=o[f]._subplot;l||(l=A(s,f),o[f]._subplot=l),l.plot(m,o,s._promises)}}function v(s,o,b,g){for(var d=g._subplots[a]||[],f=g._has&&g._has("gl"),m=o._has&&o._has("gl"),l=f&&!m,x=0;x<d.length;x++){var u=d[x],M=g[u]._subplot;if(!o[u]&&!!M){M.framework.remove(),M.layers["radial-axis-title"].remove();for(var w in M.clipPaths)M.clipPaths[w].remove()}l&&M._scene&&(M._scene.destroy(),M._scene=null)}}N.exports={attr:e,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:v,toSVG:t("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(t,N,V){var y=t("../../components/color/attributes"),c=t("../cartesian/layout_attributes"),A=t("../domain").attributes,T=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=e({color:c.color,showline:T({},c.showline,{dflt:!0}),linecolor:c.linecolor,linewidth:c.linewidth,showgrid:T({},c.showgrid,{dflt:!0}),gridcolor:c.gridcolor,gridwidth:c.gridwidth,griddash:c.griddash},"plot","from-root"),i=e({tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:c.ticks,ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,ticklabelstep:c.ticklabelstep,showticklabels:c.showticklabels,showtickprefix:c.showtickprefix,tickprefix:c.tickprefix,showticksuffix:c.showticksuffix,ticksuffix:c.ticksuffix,showexponent:c.showexponent,exponentformat:c.exponentformat,minexponent:c.minexponent,separatethousands:c.separatethousands,tickfont:c.tickfont,tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,layer:c.layer},"plot","from-root"),n={visible:T({},c.visible,{dflt:!0}),type:T({},c.type,{values:["-","linear","log","date","category"]}),autotypenumbers:c.autotypenumbers,autorange:T({},c.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},c.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:c.categoryorder,categoryarray:c.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},c.title.text,{editType:"plot",dflt:""}),font:T({},c.title.font,{editType:"plot"}),editType:"plot"},hoverformat:c.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:c._deprecated.title,titlefont:c._deprecated.titlefont}};T(n,a,i);var r={visible:T({},c.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:c.autotypenumbers,categoryorder:c.categoryorder,categoryarray:c.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:c.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(r,a,i),N.exports={domain:A({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:y.background},radialaxis:n,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color"),A=t("../../plot_api/plot_template"),T=t("../subplot_defaults"),e=t("../get_data").getSubplotData,a=t("../cartesian/tick_value_defaults"),i=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_label_defaults"),r=t("../cartesian/prefix_suffix_defaults"),v=t("../cartesian/category_order_defaults"),s=t("../cartesian/line_grid_defaults"),o=t("../cartesian/axis_autotype"),b=t("./layout_attributes"),g=t("./set_convert"),d=t("./constants"),f=d.axisNames;function m(x,u,M,w){var p=M("bgcolor");w.bgColor=c.combine(p,w.paper_bgcolor);var _=M("sector");M("hole");var h=e(w.fullData,d.name,w.id),L=w.layoutOut,E;function S(K,J){return M(E+"."+K,J)}for(var P=0;P<f.length;P++){E=f[P],y.isPlainObject(x[E])||(x[E]={});var F=x[E],I=A.newContainer(u,E);I._id=I._name=E,I._attr=w.id+"."+E,I._traceIndices=h.map(function(K){return K._expandedIndex});var D=d.axisName2dataArray[E],R=l(F,I,S,h,D,w);v(F,I,S,{axData:h,dataAttr:D});var O=S("visible");switch(g(I,u,L),S("uirevision",u.uirevision),I._m=1,E){case"radialaxis":var z=S("autorange",!I.isValidRange(F.range));F.autorange=z,z&&(R==="linear"||R==="-")&&S("rangemode"),z==="reversed"&&(I._m=-1),S("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){y.log("Polar plots do not support date angular axes yet.");for(var G=0;G<h.length;G++)h[G].visible=!1;R=F.type=I.type="linear"}S(R==="linear"?"thetaunit":"period");var Y=S("direction");S("rotation",{counterclockwise:0,clockwise:90}[Y]);break}if(r(F,I,S,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),O){var ee,j,X,ae,he=w.font||{};ee=S("color"),j=ee===F.color?ee:he.color,X=he.size,ae=he.family,a(F,I,S,I.type),n(F,I,S,I.type,{font:{color:j,size:X,family:ae}}),i(F,I,S,{outerTicks:!0}),s(F,I,S,{dfltColor:ee,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:b[E]}),S("layer"),E==="radialaxis"&&(S("side"),S("angle",_[0]),S("title.text"),y.coerceFont(S,"title.font",{color:j,size:y.bigFont(X),family:ae}))}R!=="category"&&S("hoverformat"),I._input=F}u.angularaxis.type==="category"&&M("gridshape")}function l(x,u,M,w,p,_){var h=M("autotypenumbers",_.autotypenumbersDflt),L=M("type");if(L==="-"){for(var E,S=0;S<w.length;S++)if(w[S].visible){E=w[S];break}E&&E[p]&&(u.type=o(E[p],"gregorian",{noMultiCategory:!0,autotypenumbers:h})),u.type==="-"?u.type="linear":x.type=u.type}return u.type}N.exports=function(u,M,w){T(u,M,w,{type:d.name,attributes:b,handleDefaults:m,font:M.font,autotypenumbersDflt:M.autotypenumbers,paper_bgcolor:M.paper_bgcolor,fullData:w,layoutOut:M})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(t,N,V){var y=t("@plotly/d3"),c=t("tinycolor2"),A=t("../../registry"),T=t("../../lib"),e=T.strRotate,a=T.strTranslate,i=t("../../components/color"),n=t("../../components/drawing"),r=t("../plots"),v=t("../../plots/cartesian/axes"),s=t("../cartesian/set_convert"),o=t("./set_convert"),b=t("../cartesian/autorange").doAutoRange,g=t("../cartesian/dragbox"),d=t("../../components/dragelement"),f=t("../../components/fx"),m=t("../../components/titles"),l=t("../../components/selections").prepSelect,x=t("../../components/selections").selectOnClick,u=t("../../components/selections").clearOutline,M=t("../../lib/setcursor"),w=t("../../lib/clear_gl_canvases"),p=t("../../plot_api/subroutines").redrawReglTraces,_=t("../../constants/alignment").MID_SHIFT,h=t("./constants"),L=t("./helpers"),E=t("../smith/helpers"),S=E.smith,P=E.reactanceArc,F=E.resistanceArc,I=E.smithTransform,D=T._,R=T.mod,O=T.deg2rad,z=T.rad2deg;function G(he,K,J){this.isSmith=J||!1,this.id=K,this.gd=he,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var U=he._fullLayout,H="clip"+U._uid+K;this.clipIds.forTraces=H+"-for-traces",this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=U["_"+(J?"smith":"polar")+"layer"].append("g").attr("class",K),this.getHole=function(q){return this.isSmith?0:q.hole},this.getSector=function(q){return this.isSmith?[0,360]:q.sector},this.getRadial=function(q){return this.isSmith?q.realaxis:q.radialaxis},this.getAngular=function(q){return this.isSmith?q.imaginaryaxis:q.angularaxis},J||(this.radialTickLayout=null,this.angularTickLayout=null)}var Y=G.prototype;N.exports=function(K,J,U){return new G(K,J,U)},Y.plot=function(he,K){for(var J=this,U=K[J.id],H=!1,q=0;q<he.length;q++){var re=he[q][0].trace;if(re.cliponaxis===!1){H=!0;break}}J._hasClipOnAxisFalse=H,J.updateLayers(K,U),J.updateLayout(K,U),r.generalUpdatePerTraceModule(J.gd,J,he,U),J.updateFx(K,U),J.isSmith&&(delete U.realaxis.range,delete U.imaginaryaxis.range)},Y.updateLayers=function(he,K){var J=this,U=J.isSmith,H=J.layers,q=J.getRadial(K),re=J.getAngular(K),Z=h.layerNames,Q=Z.indexOf("frontplot"),ie=Z.slice(0,Q),oe=re.layer==="below traces",ne=q.layer==="below traces";oe&&ie.push("angular-line"),ne&&ie.push("radial-line"),oe&&ie.push("angular-axis"),ne&&ie.push("radial-axis"),ie.push("frontplot"),oe||ie.push("angular-line"),ne||ie.push("radial-line"),oe||ie.push("angular-axis"),ne||ie.push("radial-axis");var le=(U?"smith":"polar")+"sublayer",_e=J.framework.selectAll("."+le).data(ie,String);_e.enter().append("g").attr("class",function(fe){return le+" "+fe}).each(function(fe){var ye=H[fe]=y.select(this);switch(fe){case"frontplot":U||ye.append("g").classed("barlayer",!0),ye.append("g").classed("scatterlayer",!0);break;case"backplot":ye.append("g").classed("maplayer",!0);break;case"plotbg":H.bg=ye.append("path");break;case"radial-grid":ye.style("fill","none");break;case"angular-grid":ye.style("fill","none");break;case"radial-line":ye.append("line").style("fill","none");break;case"angular-line":ye.append("path").style("fill","none");break}}),_e.order()},Y.updateLayout=function(he,K){var J=this,U=J.layers,H=he._size,q=J.getRadial(K),re=J.getAngular(K),Z=K.domain.x,Q=K.domain.y;J.xOffset=H.l+H.w*Z[0],J.yOffset=H.t+H.h*(1-Q[1]);var ie=J.xLength=H.w*(Z[1]-Z[0]),oe=J.yLength=H.h*(Q[1]-Q[0]),ne=J.getSector(K);J.sectorInRad=ne.map(O);var le=J.sectorBBox=j(ne),_e=le[2]-le[0],fe=le[3]-le[1],ye=oe/ie,xe=Math.abs(fe/_e),me,be,ke,De,He;ye>xe?(me=ie,be=ie*xe,He=(oe-be)/H.h/2,ke=[Z[0],Z[1]],De=[Q[0]+He,Q[1]-He]):(me=oe/xe,be=oe,He=(ie-me)/H.w/2,ke=[Z[0]+He,Z[1]-He],De=[Q[0],Q[1]]),J.xLength2=me,J.yLength2=be,J.xDomain2=ke,J.yDomain2=De;var Ae=J.xOffset2=H.l+H.w*ke[0],Le=J.yOffset2=H.t+H.h*(1-De[1]),Ze=J.radius=me/_e,We=J.innerRadius=J.getHole(K)*Ze,ze=J.cx=Ae-Ze*le[0],Ie=J.cy=Le+Ze*le[3],Ve=J.cxx=ze-Ae,dt=J.cyy=Ie-Le,Ft=q.side,Qt;Ft==="counterclockwise"?(Qt=Ft,Ft="top"):Ft==="clockwise"&&(Qt=Ft,Ft="bottom"),J.radialAxis=J.mockAxis(he,K,q,{_id:"x",side:Ft,_trueSide:Qt,domain:[We/H.w,Ze/H.w]}),J.angularAxis=J.mockAxis(he,K,re,{side:"right",domain:[0,Math.PI],autorange:!1}),J.doAutoRange(he,K),J.updateAngularAxis(he,K),J.updateRadialAxis(he,K),J.updateRadialAxisTitle(he,K),J.xaxis=J.mockCartesianAxis(he,K,{_id:"x",domain:ke}),J.yaxis=J.mockCartesianAxis(he,K,{_id:"y",domain:De});var Ot=J.pathSubplot();J.clipPaths.forTraces.select("path").attr("d",Ot).attr("transform",a(Ve,dt)),U.frontplot.attr("transform",a(Ae,Le)).call(n.setClipUrl,J._hasClipOnAxisFalse?null:J.clipIds.forTraces,J.gd),U.bg.attr("d",Ot).attr("transform",a(ze,Ie)).call(i.fill,K.bgcolor)},Y.mockAxis=function(he,K,J,U){var H=T.extendFlat({},J,U);return o(H,K,he),H},Y.mockCartesianAxis=function(he,K,J){var U=this,H=U.isSmith,q=J._id,re=T.extendFlat({type:"linear"},J);s(re,he);var Z={x:[0,2],y:[1,3]};return re.setRange=function(){var Q=U.sectorBBox,ie=Z[q],oe=U.radialAxis._rl,ne=(oe[1]-oe[0])/(1-U.getHole(K));re.range=[Q[ie[0]]*ne,Q[ie[1]]*ne]},re.isPtWithinRange=q==="x"&&!H?function(Q){return U.isPtInside(Q)}:function(){return!0},re.setRange(),re.setScale(),re},Y.doAutoRange=function(he,K){var J=this,U=J.gd,H=J.radialAxis,q=J.getRadial(K);b(U,H);var re=H.range;q.range=re.slice(),q._input.range=re.slice(),H._rl=[H.r2l(re[0],null,"gregorian"),H.r2l(re[1],null,"gregorian")]},Y.updateRadialAxis=function(he,K){var J=this,U=J.gd,H=J.layers,q=J.radius,re=J.innerRadius,Z=J.cx,Q=J.cy,ie=J.getRadial(K),oe=R(J.getSector(K)[0],360),ne=J.radialAxis,le=re<q,_e=J.isSmith;_e||(J.fillViewInitialKey("radialaxis.angle",ie.angle),J.fillViewInitialKey("radialaxis.range",ne.range.slice()),ne.setGeometry()),ne.tickangle==="auto"&&oe>90&&oe<=270&&(ne.tickangle=180);var fe=_e?function(Ze){var We=I(J,S([Ze.x,0]));return a(We[0]-Z,We[1]-Q)}:function(Ze){return a(ne.l2p(Ze.x)+re,0)},ye=_e?function(Ze){return F(J,Ze.x,-1/0,1/0)}:function(Ze){return J.pathArc(ne.r2p(Ze.x)+re)},xe=ee(ie);if(J.radialTickLayout!==xe&&(H["radial-axis"].selectAll(".xtick").remove(),J.radialTickLayout=xe),le){ne.setScale();var me=0,be=_e?(ne.tickvals||[]).filter(function(Ze){return Ze>=0}).map(function(Ze){return v.tickText(ne,Ze,!0,!1)}):v.calcTicks(ne),ke=_e?be:v.clipEnds(ne,be),De=v.getTickSigns(ne)[2];_e&&((ne.ticks==="top"&&ne.side==="bottom"||ne.ticks==="bottom"&&ne.side==="top")&&(De=-De),ne.ticks==="top"&&ne.side==="top"&&(me=-ne.ticklen),ne.ticks==="bottom"&&ne.side==="bottom"&&(me=ne.ticklen)),v.drawTicks(U,ne,{vals:be,layer:H["radial-axis"],path:v.makeTickPath(ne,0,De),transFn:fe,crisp:!1}),v.drawGrid(U,ne,{vals:ke,layer:H["radial-grid"],path:ye,transFn:T.noop,crisp:!1}),v.drawLabels(U,ne,{vals:be,layer:H["radial-axis"],transFn:fe,labelFns:v.makeLabelFns(ne,me)})}var He=J.radialAxisAngle=J.vangles?z(X(O(ie.angle),J.vangles)):ie.angle,Ae=a(Z,Q),Le=Ae+e(-He);ae(H["radial-axis"],le&&(ie.showticklabels||ie.ticks),{transform:Le}),ae(H["radial-grid"],le&&ie.showgrid,{transform:_e?"":Ae}),ae(H["radial-line"].select("line"),le&&ie.showline,{x1:_e?-q:re,y1:0,x2:q,y2:0,transform:Le}).attr("stroke-width",ie.linewidth).call(i.stroke,ie.linecolor)},Y.updateRadialAxisTitle=function(he,K,J){if(!this.isSmith){var U=this,H=U.gd,q=U.radius,re=U.cx,Z=U.cy,Q=U.getRadial(K),ie=U.id+"title",oe=0;if(Q.title){var ne=n.bBox(U.layers["radial-axis"].node()).height,le=Q.title.font.size,_e=Q.side;oe=_e==="top"?le:_e==="counterclockwise"?-(ne+le*.4):ne+le*.8}var fe=J!==void 0?J:U.radialAxisAngle,ye=O(fe),xe=Math.cos(ye),me=Math.sin(ye),be=re+q/2*xe+oe*me,ke=Z-q/2*me+oe*xe;U.layers["radial-axis-title"]=m.draw(H,ie,{propContainer:Q,propName:U.id+".radialaxis.title",placeholder:D(H,"Click to enter radial axis title"),attributes:{x:be,y:ke,"text-anchor":"middle"},transform:{rotate:-fe}})}},Y.updateAngularAxis=function(he,K){var J=this,U=J.gd,H=J.layers,q=J.radius,re=J.innerRadius,Z=J.cx,Q=J.cy,ie=J.getAngular(K),oe=J.angularAxis,ne=J.isSmith;ne||(J.fillViewInitialKey("angularaxis.rotation",ie.rotation),oe.setGeometry(),oe.setScale());var le=ne?function(We){var ze=I(J,S([0,We.x]));return Math.atan2(ze[0]-Z,ze[1]-Q)-Math.PI/2}:function(We){return oe.t2g(We.x)};oe.type==="linear"&&oe.thetaunit==="radians"&&(oe.tick0=z(oe.tick0),oe.dtick=z(oe.dtick));var _e=function(We){return a(Z+q*Math.cos(We),Q-q*Math.sin(We))},fe=ne?function(We){var ze=I(J,S([0,We.x]));return a(ze[0],ze[1])}:function(We){return _e(le(We))},ye=ne?function(We){var ze=I(J,S([0,We.x])),Ie=Math.atan2(ze[0]-Z,ze[1]-Q)-Math.PI/2;return a(ze[0],ze[1])+e(-z(Ie))}:function(We){var ze=le(We);return _e(ze)+e(-z(ze))},xe=ne?function(We){return P(J,We.x,0,1/0)}:function(We){var ze=le(We),Ie=Math.cos(ze),Ve=Math.sin(ze);return"M"+[Z+re*Ie,Q-re*Ve]+"L"+[Z+q*Ie,Q-q*Ve]},me=v.makeLabelFns(oe,0),be=me.labelStandoff,ke={};ke.xFn=function(We){var ze=le(We);return Math.cos(ze)*be},ke.yFn=function(We){var ze=le(We),Ie=Math.sin(ze)>0?.2:1;return-Math.sin(ze)*(be+We.fontSize*Ie)+Math.abs(Math.cos(ze))*(We.fontSize*_)},ke.anchorFn=function(We){var ze=le(We),Ie=Math.cos(ze);return Math.abs(Ie)<.1?"middle":Ie>0?"start":"end"},ke.heightFn=function(We,ze,Ie){var Ve=le(We);return-.5*(1+Math.sin(Ve))*Ie};var De=ee(ie);J.angularTickLayout!==De&&(H["angular-axis"].selectAll("."+oe._id+"tick").remove(),J.angularTickLayout=De);var He=ne?[1/0].concat(oe.tickvals||[]).map(function(We){return v.tickText(oe,We,!0,!1)}):v.calcTicks(oe);ne&&(He[0].text="\u221E",He[0].fontSize*=1.75);var Ae;if(K.gridshape==="linear"?(Ae=He.map(le),T.angleDelta(Ae[0],Ae[1])<0&&(Ae=Ae.slice().reverse())):Ae=null,J.vangles=Ae,oe.type==="category"&&(He=He.filter(function(We){return T.isAngleInsideSector(le(We),J.sectorInRad)})),oe.visible){var Le=oe.ticks==="inside"?-1:1,Ze=(oe.linewidth||1)/2;v.drawTicks(U,oe,{vals:He,layer:H["angular-axis"],path:"M"+Le*Ze+",0h"+Le*oe.ticklen,transFn:ye,crisp:!1}),v.drawGrid(U,oe,{vals:He,layer:H["angular-grid"],path:xe,transFn:T.noop,crisp:!1}),v.drawLabels(U,oe,{vals:He,layer:H["angular-axis"],repositionOnUpdate:!0,transFn:fe,labelFns:ke})}ae(H["angular-line"].select("path"),ie.showline,{d:J.pathSubplot(),transform:a(Z,Q)}).attr("stroke-width",ie.linewidth).call(i.stroke,ie.linecolor)},Y.updateFx=function(he,K){if(!this.gd._context.staticPlot){var J=!this.isSmith;J&&(this.updateAngularDrag(he),this.updateRadialDrag(he,K,0),this.updateRadialDrag(he,K,1)),this.updateHoverAndMainDrag(he)}},Y.updateHoverAndMainDrag=function(he){var K=this,J=K.isSmith,U=K.gd,H=K.layers,q=he._zoomlayer,re=h.MINZOOM,Z=h.OFFEDGE,Q=K.radius,ie=K.innerRadius,oe=K.cx,ne=K.cy,le=K.cxx,_e=K.cyy,fe=K.sectorInRad,ye=K.vangles,xe=K.radialAxis,me=L.clampTiny,be=L.findXYatLength,ke=L.findEnclosingVertexAngles,De=h.cornerHalfWidth,He=h.cornerLen/2,Ae,Le,Ze=g.makeDragger(H,"path","maindrag",he.dragmode===!1?"none":"crosshair");y.select(Ze).attr("d",K.pathSubplot()).attr("transform",a(oe,ne)),Ze.onmousemove=function(Zt){f.hover(U,Zt,K.id),U._fullLayout._lasthover=Ze,U._fullLayout._hoversubplot=K.id},Ze.onmouseout=function(Zt){U._dragging||d.unhover(U,Zt)};var We={element:Ze,gd:U,subplot:K.id,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis},xaxes:[K.xaxis],yaxes:[K.yaxis]},ze,Ie,Ve,dt,Ft,Qt,Ot,Ct,jt;function Nt(Zt,Wt){return Math.sqrt(Zt*Zt+Wt*Wt)}function Lt(Zt,Wt){return Nt(Zt-le,Wt-_e)}function Xe(Zt,Wt){return Math.atan2(_e-Wt,Zt-le)}function it(Zt,Wt){return[Zt*Math.cos(Wt),Zt*Math.sin(-Wt)]}function Ye(Zt,Wt){if(Zt===0)return K.pathSector(2*De);var sr=He/Zt,Gr=Wt-sr,cn=Wt+sr,qr=Math.max(0,Math.min(Zt,Q)),st=qr-De,rr=qr+De;return"M"+it(st,Gr)+"A"+[st,st]+" 0,0,0 "+it(st,cn)+"L"+it(rr,cn)+"A"+[rr,rr]+" 0,0,1 "+it(rr,Gr)+"Z"}function Ee(Zt,Wt,sr){if(Zt===0)return K.pathSector(2*De);var Gr=it(Zt,Wt),cn=it(Zt,sr),qr=me((Gr[0]+cn[0])/2),st=me((Gr[1]+cn[1])/2),rr,$t;if(qr&&st){var hr=st/qr,Sr=-1/hr,tt=be(De,hr,qr,st);rr=be(He,Sr,tt[0][0],tt[0][1]),$t=be(He,Sr,tt[1][0],tt[1][1])}else{var Qe,lt;st?(Qe=He,lt=De):(Qe=De,lt=He),rr=[[qr-Qe,st-lt],[qr+Qe,st-lt]],$t=[[qr-Qe,st+lt],[qr+Qe,st+lt]]}return"M"+rr.join("L")+"L"+$t.reverse().join("L")+"Z"}function Ge(){Ve=null,dt=null,Ft=K.pathSubplot(),Qt=!1;var Zt=U._fullLayout[K.id];Ot=c(Zt.bgcolor).getLuminance(),Ct=g.makeZoombox(q,Ot,oe,ne,Ft),Ct.attr("fill-rule","evenodd"),jt=g.makeCorners(q,oe,ne),u(U)}function Ke(Zt,Wt){return Wt=Math.max(Math.min(Wt,Q),ie),Zt<Z?Zt=0:Q-Zt<Z?Zt=Q:Wt<Z?Wt=0:Q-Wt<Z&&(Wt=Q),Math.abs(Wt-Zt)>re?(Zt<Wt?(Ve=Zt,dt=Wt):(Ve=Wt,dt=Zt),!0):(Ve=null,dt=null,!1)}function qe(Zt,Wt){Zt=Zt||Ft,Wt=Wt||"M0,0Z",Ct.attr("d",Zt),jt.attr("d",Wt),g.transitionZoombox(Ct,jt,Qt,Ot),Qt=!0;var sr={};zt(sr),U.emit("plotly_relayouting",sr)}function At(Zt,Wt){Zt=Zt*Ae,Wt=Wt*Le;var sr=ze+Zt,Gr=Ie+Wt,cn=Lt(ze,Ie),qr=Math.min(Lt(sr,Gr),Q),st=Xe(ze,Ie),rr,$t;Ke(cn,qr)&&(rr=Ft+K.pathSector(dt),Ve&&(rr+=K.pathSector(Ve)),$t=Ye(Ve,st)+Ye(dt,st)),qe(rr,$t)}function mt(Zt,Wt,sr,Gr){var cn=L.findIntersectionXY(sr,Gr,sr,[Zt-le,_e-Wt]);return Nt(cn[0],cn[1])}function Mt(Zt,Wt){var sr=ze+Zt,Gr=Ie+Wt,cn=Xe(ze,Ie),qr=Xe(sr,Gr),st=ke(cn,ye),rr=ke(qr,ye),$t=mt(ze,Ie,st[0],st[1]),hr=Math.min(mt(sr,Gr,rr[0],rr[1]),Q),Sr,tt;Ke($t,hr)&&(Sr=Ft+K.pathSector(dt),Ve&&(Sr+=K.pathSector(Ve)),tt=[Ee(Ve,st[0],st[1]),Ee(dt,st[0],st[1])].join(" ")),qe(Sr,tt)}function Gt(){if(g.removeZoombox(U),!(Ve===null||dt===null)){var Zt={};zt(Zt),g.showDoubleClickNotifier(U),A.call("_guiRelayout",U,Zt)}}function zt(Zt){var Wt=xe._rl,sr=(Wt[1]-Wt[0])/(1-ie/Q)/Q,Gr=[Wt[0]+(Ve-ie)*sr,Wt[0]+(dt-ie)*sr];Zt[K.id+".radialaxis.range"]=Gr}function Ht(Zt,Wt){var sr=U._fullLayout.clickmode;if(g.removeZoombox(U),Zt===2){var Gr={};for(var cn in K.viewInitial)Gr[K.id+"."+cn]=K.viewInitial[cn];U.emit("plotly_doubleclick",null),A.call("_guiRelayout",U,Gr)}sr.indexOf("select")>-1&&Zt===1&&x(Wt,U,[K.xaxis],[K.yaxis],K.id,We),sr.indexOf("event")>-1&&f.click(U,Wt,K.id)}We.prepFn=function(Zt,Wt,sr){var Gr=U._fullLayout.dragmode,cn=Ze.getBoundingClientRect();U._fullLayout._calcInverseTransform(U);var qr=U._fullLayout._invTransform;Ae=U._fullLayout._invScaleX,Le=U._fullLayout._invScaleY;var st=T.apply3DTransform(qr)(Wt-cn.left,sr-cn.top);if(ze=st[0],Ie=st[1],ye){var rr=L.findPolygonOffset(Q,fe[0],fe[1],ye);ze+=le+rr[0],Ie+=_e+rr[1]}switch(Gr){case"zoom":We.clickFn=Ht,J||(ye?We.moveFn=Mt:We.moveFn=At,We.doneFn=Gt,Ge());break;case"select":case"lasso":l(Zt,Wt,sr,We,Gr);break}},d.init(We)},Y.updateRadialDrag=function(he,K,J){var U=this,H=U.gd,q=U.layers,re=U.radius,Z=U.innerRadius,Q=U.cx,ie=U.cy,oe=U.radialAxis,ne=h.radialDragBoxSize,le=ne/2;if(!oe.visible)return;var _e=O(U.radialAxisAngle),fe=oe._rl,ye=fe[0],xe=fe[1],me=fe[J],be=.75*(fe[1]-fe[0])/(1-U.getHole(K))/re,ke,De,He;J?(ke=Q+(re+le)*Math.cos(_e),De=ie-(re+le)*Math.sin(_e),He="radialdrag"):(ke=Q+(Z-le)*Math.cos(_e),De=ie-(Z-le)*Math.sin(_e),He="radialdrag-inner");var Ae=g.makeRectDragger(q,He,"crosshair",-le,-le,ne,ne),Le={element:Ae,gd:H};he.dragmode===!1&&(Le.dragmode=!1),ae(y.select(Ae),oe.visible&&Z<re,{transform:a(ke,De)});var Ze,We,ze;function Ie(Ot,Ct){if(Ze)Ze(Ot,Ct);else{var jt=[Ot,-Ct],Nt=[Math.cos(_e),Math.sin(_e)],Lt=Math.abs(T.dot(jt,Nt)/Math.sqrt(T.dot(jt,jt)));isNaN(Lt)||(Ze=Lt<.5?Ft:Qt)}var Xe={};Ve(Xe),H.emit("plotly_relayouting",Xe)}function Ve(Ot){We!==null?Ot[U.id+".radialaxis.angle"]=We:ze!==null&&(Ot[U.id+".radialaxis.range["+J+"]"]=ze)}function dt(){We!==null?A.call("_guiRelayout",H,U.id+".radialaxis.angle",We):ze!==null&&A.call("_guiRelayout",H,U.id+".radialaxis.range["+J+"]",ze)}function Ft(Ot,Ct){if(J!==0){var jt=ke+Ot,Nt=De+Ct;We=Math.atan2(ie-Nt,jt-Q),U.vangles&&(We=X(We,U.vangles)),We=z(We);var Lt=a(Q,ie)+e(-We);q["radial-axis"].attr("transform",Lt),q["radial-line"].select("line").attr("transform",Lt);var Xe=U.gd._fullLayout,it=Xe[U.id];U.updateRadialAxisTitle(Xe,it,We)}}function Qt(Ot,Ct){var jt=T.dot([Ot,-Ct],[Math.cos(_e),Math.sin(_e)]);if(ze=me-be*jt,be>0!=(J?ze>ye:ze<xe)){ze=null;return}var Nt=H._fullLayout,Lt=Nt[U.id];oe.range[J]=ze,oe._rl[J]=ze,U.updateRadialAxis(Nt,Lt),U.xaxis.setRange(),U.xaxis.setScale(),U.yaxis.setRange(),U.yaxis.setScale();var Xe=!1;for(var it in U.traceHash){var Ye=U.traceHash[it],Ee=T.filterVisible(Ye),Ge=Ye[0][0].trace._module;Ge.plot(H,U,Ee,Lt),A.traceIs(it,"gl")&&Ee.length&&(Xe=!0)}Xe&&(w(H),p(H))}Le.prepFn=function(){Ze=null,We=null,ze=null,Le.moveFn=Ie,Le.doneFn=dt,u(H)},Le.clampFn=function(Ot,Ct){return Math.sqrt(Ot*Ot+Ct*Ct)<h.MINDRAG&&(Ot=0,Ct=0),[Ot,Ct]},d.init(Le)},Y.updateAngularDrag=function(he){var K=this,J=K.gd,U=K.layers,H=K.radius,q=K.angularAxis,re=K.cx,Z=K.cy,Q=K.cxx,ie=K.cyy,oe=h.angularDragBoxSize,ne=g.makeDragger(U,"path","angulardrag",he.dragmode===!1?"none":"move"),le={element:ne,gd:J};he.dragmode===!1?le.dragmode=!1:y.select(ne).attr("d",K.pathAnnulus(H,H+oe)).attr("transform",a(re,Z)).call(M,"move");function _e(ze,Ie){return Math.atan2(ie+oe-Ie,ze-Q-oe)}var fe=U.frontplot.select(".scatterlayer").selectAll(".trace"),ye=fe.selectAll(".point"),xe=fe.selectAll(".textpoint"),me,be,ke,De,He,Ae;function Le(ze,Ie){var Ve=K.gd._fullLayout,dt=Ve[K.id],Ft=me+ze*he._invScaleX,Qt=be+Ie*he._invScaleY,Ot=_e(Ft,Qt),Ct=z(Ot-Ae);if(De=ke+Ct,U.frontplot.attr("transform",a(K.xOffset2,K.yOffset2)+e([-Ct,Q,ie])),K.vangles){He=K.radialAxisAngle+Ct;var jt=a(re,Z)+e(-Ct),Nt=a(re,Z)+e(-He);U.bg.attr("transform",jt),U["radial-grid"].attr("transform",jt),U["radial-axis"].attr("transform",Nt),U["radial-line"].select("line").attr("transform",Nt),K.updateRadialAxisTitle(Ve,dt,He)}else K.clipPaths.forTraces.select("path").attr("transform",a(Q,ie)+e(Ct));ye.each(function(){var Ke=y.select(this),qe=n.getTranslate(Ke);Ke.attr("transform",a(qe.x,qe.y)+e([Ct]))}),xe.each(function(){var Ke=y.select(this),qe=Ke.select("text"),At=n.getTranslate(Ke);Ke.attr("transform",e([Ct,qe.attr("x"),qe.attr("y")])+a(At.x,At.y))}),q.rotation=T.modHalf(De,360),K.updateAngularAxis(Ve,dt),K._hasClipOnAxisFalse&&!T.isFullCircle(K.sectorInRad)&&fe.call(n.hideOutsideRangePoints,K);var Lt=!1;for(var Xe in K.traceHash)if(A.traceIs(Xe,"gl")){var it=K.traceHash[Xe],Ye=T.filterVisible(it),Ee=it[0][0].trace._module;Ee.plot(J,K,Ye,dt),Ye.length&&(Lt=!0)}Lt&&(w(J),p(J));var Ge={};Ze(Ge),J.emit("plotly_relayouting",Ge)}function Ze(ze){ze[K.id+".angularaxis.rotation"]=De,K.vangles&&(ze[K.id+".radialaxis.angle"]=He)}function We(){xe.select("text").attr("transform",null);var ze={};Ze(ze),A.call("_guiRelayout",J,ze)}le.prepFn=function(ze,Ie,Ve){var dt=he[K.id];ke=dt.angularaxis.rotation;var Ft=ne.getBoundingClientRect();me=Ie-Ft.left,be=Ve-Ft.top,J._fullLayout._calcInverseTransform(J);var Qt=T.apply3DTransform(he._invTransform)(me,be);me=Qt[0],be=Qt[1],Ae=_e(me,be),le.moveFn=Le,le.doneFn=We,u(J)},K.vangles&&!T.isFullCircle(K.sectorInRad)&&(le.prepFn=T.noop,M(y.select(ne),null)),d.init(le)},Y.isPtInside=function(he){if(this.isSmith)return!0;var K=this.sectorInRad,J=this.vangles,U=this.angularAxis.c2g(he.theta),H=this.radialAxis,q=H.c2l(he.r),re=H._rl,Z=J?L.isPtInsidePolygon:T.isPtInsideSector;return Z(q,U,re,K,J)},Y.pathArc=function(he){var K=this.sectorInRad,J=this.vangles,U=J?L.pathPolygon:T.pathArc;return U(he,K[0],K[1],J)},Y.pathSector=function(he){var K=this.sectorInRad,J=this.vangles,U=J?L.pathPolygon:T.pathSector;return U(he,K[0],K[1],J)},Y.pathAnnulus=function(he,K){var J=this.sectorInRad,U=this.vangles,H=U?L.pathPolygonAnnulus:T.pathAnnulus;return H(he,K,J[0],J[1],U)},Y.pathSubplot=function(){var he=this.innerRadius,K=this.radius;return he?this.pathAnnulus(he,K):this.pathSector(K)},Y.fillViewInitialKey=function(he,K){he in this.viewInitial||(this.viewInitial[he]=K)};function ee(he){var K=he.ticks+String(he.ticklen)+String(he.showticklabels);return"side"in he&&(K+=he.side),K}function j(he){var K=he[0],J=he[1],U=J-K,H=R(K,360),q=H+U,re=Math.cos(O(H)),Z=Math.sin(O(H)),Q=Math.cos(O(q)),ie=Math.sin(O(q)),oe,ne,le,_e;return H<=90&&q>=90||H>90&&q>=450?_e=1:Z<=0&&ie<=0?_e=0:_e=Math.max(Z,ie),H<=180&&q>=180||H>180&&q>=540?oe=-1:re>=0&&Q>=0?oe=0:oe=Math.min(re,Q),H<=270&&q>=270||H>270&&q>=630?ne=-1:Z>=0&&ie>=0?ne=0:ne=Math.min(Z,ie),q>=360?le=1:re<=0&&Q<=0?le=0:le=Math.max(re,Q),[oe,ne,le,_e]}function X(he,K){var J=function(H){return T.angleDist(he,H)},U=T.findIndexOfMin(K,J);return K[U]}function ae(he,K,J){return K?(he.attr("display",null),he.attr(J)):he&&he.attr("display","none"),he}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(t,N,V){var y=t("../../lib"),c=t("../cartesian/set_convert"),A=y.deg2rad,T=y.rad2deg;N.exports=function(v,s,o){switch(c(v,o),v._id){case"x":case"radialaxis":e(v,s);break;case"angularaxis":n(v,s);break}};function e(r,v){var s=v._subplot;r.setGeometry=function(){var o=r._rl[0],b=r._rl[1],g=s.innerRadius,d=(s.radius-g)/(b-o),f=g/d,m=o>b?function(l){return l<=0}:function(l){return l>=0};r.c2g=function(l){var x=r.c2l(l)-o;return(m(x)?x:0)+f},r.g2c=function(l){return r.l2c(l+o-f)},r.g2p=function(l){return l*d},r.c2p=function(l){return r.g2p(r.c2g(l))}}}function a(r,v){return v==="degrees"?A(r):r}function i(r,v){return v==="degrees"?T(r):r}function n(r,v){var s=r.type;if(s==="linear"){var o=r.d2c,b=r.c2d;r.d2c=function(g,d){return a(o(g),d)},r.c2d=function(g,d){return b(i(g,d))}}r.makeCalcdata=function(g,d){var f=g[d],m=g._length,l,x,u=function(h){return r.d2c(h,g.thetaunit)};if(f){if(y.isTypedArray(f)&&s==="linear"){if(m===f.length)return f;if(f.subarray)return f.subarray(0,m)}for(l=new Array(m),x=0;x<m;x++)l[x]=u(f[x])}else{var M=d+"0",w="d"+d,p=M in g?u(g[M]):0,_=g[w]?u(g[w]):(r.period||2*Math.PI)/m;for(l=new Array(m),x=0;x<m;x++)l[x]=p+x*_}return l},r.setGeometry=function(){var g=v.sector,d=g.map(A),f={clockwise:-1,counterclockwise:1}[r.direction],m=A(r.rotation),l=function(L){return f*L+m},x=function(L){return(L-m)/f},u,M,w,p;switch(s){case"linear":M=u=y.identity,p=A,w=T,r.range=y.isFullCircle(d)?[g[0],g[0]+360]:d.map(x).map(T);break;case"category":var _=r._categories.length,h=r.period?Math.max(r.period,_):_;h===0&&(h=1),M=p=function(L){return L*2*Math.PI/h},u=w=function(L){return L*h/Math.PI/2},r.range=[0,h];break}r.c2g=function(L){return l(M(L))},r.g2c=function(L){return u(x(L))},r.t2g=function(L){return l(p(L))},r.g2t=function(L){return w(x(L))}}}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(t,N,V){N.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(t,N,V){function y(i){return i<0?-1:i>0?1:0}function c(i){var n=i[0],r=i[1];if(!isFinite(n)||!isFinite(r))return[1,0];var v=(n+1)*(n+1)+r*r;return[(n*n+r*r-1)/v,2*r/v]}function A(i,n){var r=n[0],v=n[1];return[r*i.radius+i.cx,-v*i.radius+i.cy]}function T(i,n){return n*i.radius}function e(i,n,r,v){var s=A(i,c([r,n])),o=s[0],b=s[1],g=A(i,c([v,n])),d=g[0],f=g[1];if(n===0)return["M"+o+","+b,"L"+d+","+f].join(" ");var m=T(i,1/Math.abs(n));return["M"+o+","+b,"A"+m+","+m+" 0 0,"+(n<0?1:0)+" "+d+","+f].join(" ")}function a(i,n,r,v){var s=T(i,1/(n+1)),o=A(i,c([n,r])),b=o[0],g=o[1],d=A(i,c([n,v])),f=d[0],m=d[1];if(y(r)!==y(v)){var l=A(i,c([n,0])),x=l[0],u=l[1];return["M"+b+","+g,"A"+s+","+s+" 0 0,"+(0<r?0:1)+" "+x+","+u,"A"+s+","+s+" 0 0,"+(v<0?0:1)+f+","+m].join(" ")}return["M"+b+","+g,"A"+s+","+s+" 0 0,"+(v<r?0:1)+" "+f+","+m].join(" ")}N.exports={smith:c,reactanceArc:e,resistanceArc:a,smithTransform:A}},{}],638:[function(t,N,V){var y=t("../get_data").getSubplotCalcData,c=t("../../lib").counterRegex,A=t("../polar/polar"),T=t("./constants"),e=T.attr,a=T.name,i=c(a),n={};n[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(s){for(var o=s._fullLayout,b=s.calcdata,g=o._subplots[a],d=0;d<g.length;d++){var f=g[d],m=y(b,a,f),l=o[f]._subplot;l||(l=A(s,f,!0),o[f]._subplot=l),l.plot(m,o,s._promises)}}function v(s,o,b,g){for(var d=g._subplots[a]||[],f=0;f<d.length;f++){var m=d[f],l=g[m]._subplot;if(!o[m]&&!!l){l.framework.remove();for(var x in l.clipPaths)l.clipPaths[x].remove()}}}N.exports={attr:e,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:v,toSVG:t("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(t,N,V){var y=t("../../components/color/attributes"),c=t("../cartesian/layout_attributes"),A=t("../domain").attributes,T=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=e({color:c.color,showline:T({},c.showline,{dflt:!0}),linecolor:c.linecolor,linewidth:c.linewidth,showgrid:T({},c.showgrid,{dflt:!0}),gridcolor:c.gridcolor,gridwidth:c.gridwidth,griddash:c.griddash},"plot","from-root"),i=e({ticklen:c.ticklen,tickwidth:T({},c.tickwidth,{dflt:2}),tickcolor:c.tickcolor,showticklabels:c.showticklabels,showtickprefix:c.showtickprefix,tickprefix:c.tickprefix,showticksuffix:c.showticksuffix,ticksuffix:c.ticksuffix,tickfont:c.tickfont,tickformat:c.tickformat,hoverformat:c.hoverformat,layer:c.layer},"plot","from-root"),n=T({visible:T({},c.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},c.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,i),r=T({visible:T({},c.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:c.ticks,editType:"calc"},a,i);N.exports={domain:A({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:y.background},realaxis:n,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color"),A=t("../../plot_api/plot_template"),T=t("../subplot_defaults"),e=t("../get_data").getSubplotData,a=t("../cartesian/prefix_suffix_defaults"),i=t("../cartesian/tick_label_defaults"),n=t("../cartesian/line_grid_defaults"),r=t("../cartesian/set_convert"),v=t("./layout_attributes"),s=t("./constants"),o=s.axisNames,b=d(function(f){return f.slice().reverse().map(function(m){return-m}).concat([0]).concat(f)},String);function g(f,m,l,x){var u=l("bgcolor");x.bgColor=c.combine(u,x.paper_bgcolor);var M=e(x.fullData,s.name,x.id),w=x.layoutOut,p;function _(Y,ee){return l(p+"."+Y,ee)}for(var h=0;h<o.length;h++){p=o[h],y.isPlainObject(f[p])||(f[p]={});var L=f[p],E=A.newContainer(m,p);E._id=E._name=p,E._attr=x.id+"."+p,E._traceIndices=M.map(function(Y){return Y._expandedIndex});var S=_("visible");if(E.type="linear",r(E,w),a(L,E,_,E.type),S){var P=p==="realaxis";if(P&&_("side"),P)_("tickvals");else{var F=b(m.realaxis.tickvals||v.realaxis.tickvals.dflt);_("tickvals",F)}var I,D,R,O,z=x.font||{};S&&(I=_("color"),D=I===L.color?I:z.color,R=z.size,O=z.family),i(L,E,_,E.type,{noTicklabelstep:!0,noAng:!P,noExp:!0,font:{color:D,size:R,family:O}}),y.coerce2(f,m,v,p+".ticklen"),y.coerce2(f,m,v,p+".tickwidth"),y.coerce2(f,m,v,p+".tickcolor",m.color);var G=_("ticks");G||(delete m[p].ticklen,delete m[p].tickwidth,delete m[p].tickcolor),n(L,E,_,{dfltColor:I,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v[p]}),_("layer")}_("hoverformat"),delete E.type,E._input=L}}N.exports=function(m,l,x){T(m,l,x,{noUirevision:!0,type:s.name,attributes:v,handleDefaults:g,font:l.font,paper_bgcolor:l.paper_bgcolor,fullData:x,layoutOut:l})};function d(f,m){var l={};return function(x){var u=m?m(x):x;if(u in l)return l[u];var M=f(x);return l[u]=M,M}}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(t,N,V){var y=t("../lib"),c=t("../plot_api/plot_template"),A=t("./domain").defaults;N.exports=function(e,a,i,n){var r=n.type,v=n.attributes,s=n.handleDefaults,o=n.partition||"x",b=a._subplots[r],g=b.length,d=g&&b[0].replace(/\d+$/,""),f,m;function l(w,p){return y.coerce(f,m,v,w,p)}for(var x=0;x<g;x++){var u=b[x];e[u]?f=e[u]:f=e[u]={},m=c.newContainer(a,u,d),n.noUirevision||l("uirevision",a.uirevision);var M={};M[o]=[x/g,(x+1)/g],A(m,a,l,M),n.id=u,s(f,m,l,n)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(t,N,V){var y=t("../constants/docs");y.FORMAT_LINK,y.DATE_FORMAT_LINK;function c(A){var T=A.description?" "+A.description:"",e=A.keys||[];if(e.length>0){for(var a=[],i=0;i<e.length;i++)a[i]="`"+e[i]+"`";T=T+"Finally, the template string has access to ",e.length===1?T="variable "+a[0]:T="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return T}V.hovertemplateAttrs=function(A,T){A=A||{},T=T||{},c(T);var e={valType:"string",dflt:"",editType:A.editType||"none"};return A.arrayOk!==!1&&(e.arrayOk=!0),e},V.texttemplateAttrs=function(A,T){A=A||{},T=T||{},c(T);var e={valType:"string",dflt:"",editType:A.editType||"calc"};return A.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(t,N,V){var y=t("./ternary"),c=t("../../plots/get_data").getSubplotCalcData,A=t("../../lib").counterRegex,T="ternary";V.name=T;var e=V.attr="subplot";V.idRoot=T,V.idRegex=V.attrRegex=A(T);var a=V.attributes={};a[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.plot=function(n){for(var r=n._fullLayout,v=n.calcdata,s=r._subplots[T],o=0;o<s.length;o++){var b=s[o],g=c(v,T,b),d=r[b]._subplot;d||(d=new y({id:b,graphDiv:n,container:r._ternarylayer.node()},r),r[b]._subplot=d),d.plot(g,r,n._promises)}},V.clean=function(i,n,r,v){for(var s=v._subplots[T]||[],o=0;o<s.length;o++){var b=s[o],g=v[b]._subplot;!n[b]&&!!g&&(g.plotContainer.remove(),g.clipDef.remove(),g.clipDefRelative.remove(),g.layers["a-title"].remove(),g.layers["b-title"].remove(),g.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(t,N,V){var y=t("../../components/color/attributes"),c=t("../domain").attributes,A=t("../cartesian/layout_attributes"),T=t("../../plot_api/edit_types").overrideAll,e=t("../../lib/extend").extendFlat,a={title:{text:A.title.text,font:A.title.font},color:A.color,tickmode:A.tickmode,nticks:e({},A.nticks,{dflt:6,min:1}),tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickfont:A.tickfont,tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,hoverformat:A.hoverformat,showline:e({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:e({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash,layer:A.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}},i=N.exports=T({domain:c({name:"ternary"}),bgcolor:{valType:"color",dflt:y.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(t,N,V){var y=t("../../components/color"),c=t("../../plot_api/plot_template"),A=t("../../lib"),T=t("../subplot_defaults"),e=t("../cartesian/tick_label_defaults"),a=t("../cartesian/prefix_suffix_defaults"),i=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_value_defaults"),r=t("../cartesian/line_grid_defaults"),v=t("./layout_attributes"),s=["aaxis","baxis","caxis"];N.exports=function(d,f,m){T(d,f,m,{type:"ternary",attributes:v,handleDefaults:o,font:f.font,paper_bgcolor:f.paper_bgcolor})};function o(g,d,f,m){var l=f("bgcolor"),x=f("sum");m.bgColor=y.combine(l,m.paper_bgcolor);for(var u,M,w,p=0;p<s.length;p++)u=s[p],M=g[u]||{},w=c.newContainer(d,u),w._name=u,b(M,w,m,d);var _=d.aaxis,h=d.baxis,L=d.caxis;_.min+h.min+L.min>=x&&(_.min=0,h.min=0,L.min=0,g.aaxis&&delete g.aaxis.min,g.baxis&&delete g.baxis.min,g.caxis&&delete g.caxis.min)}function b(g,d,f,m){var l=v[d._name];function x(E,S){return A.coerce(g,d,l,E,S)}x("uirevision",m.uirevision),d.type="linear";var u=x("color"),M=u!==l.color.dflt?u:f.font.color,w=d._name,p=w.charAt(0).toUpperCase(),_="Component "+p,h=x("title.text",_);d._hovertitle=h===_?h:p,A.coerceFont(x,"title.font",{family:f.font.family,size:A.bigFont(f.font.size),color:M}),x("min"),n(g,d,x,"linear"),a(g,d,x,"linear"),e(g,d,x,"linear"),i(g,d,x,{outerTicks:!0});var L=x("showticklabels");L&&(A.coerceFont(x,"tickfont",{family:f.font.family,size:f.font.size,color:M}),x("tickangle"),x("tickformat")),r(g,d,x,{dfltColor:u,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),x("hoverformat"),x("layer")}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(t,N,V){var y=t("@plotly/d3"),c=t("tinycolor2"),A=t("../../registry"),T=t("../../lib"),e=T.strTranslate,a=T._,i=t("../../components/color"),n=t("../../components/drawing"),r=t("../cartesian/set_convert"),v=t("../../lib/extend").extendFlat,s=t("../plots"),o=t("../cartesian/axes"),b=t("../../components/dragelement"),g=t("../../components/fx"),d=t("../../components/dragelement/helpers"),f=d.freeMode,m=d.rectMode,l=t("../../components/titles"),x=t("../../components/selections").prepSelect,u=t("../../components/selections").selectOnClick,M=t("../../components/selections").clearOutline,w=t("../../components/selections").clearSelectionsCache,p=t("../cartesian/constants");function _(z,G){this.id=z.id,this.graphDiv=z.graphDiv,this.init(G),this.makeFramework(G),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}N.exports=_;var h=_.prototype;h.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},h.plot=function(z,G){var Y=this,ee=G[Y.id],j=G._size;Y._hasClipOnAxisFalse=!1;for(var X=0;X<z.length;X++){var ae=z[X][0].trace;if(ae.cliponaxis===!1){Y._hasClipOnAxisFalse=!0;break}}Y.updateLayers(ee),Y.adjustLayout(ee,j),s.generalUpdatePerTraceModule(Y.graphDiv,Y,z,ee),Y.layers.plotbg.select("path").call(i.fill,ee.bgcolor)},h.makeFramework=function(z){var G=this,Y=G.graphDiv,ee=z[G.id],j=G.clipId="clip"+G.layoutId+G.id,X=G.clipIdRelative="clip-relative"+G.layoutId+G.id;G.clipDef=T.ensureSingleById(z._clips,"clipPath",j,function(ae){ae.append("path").attr("d","M0,0Z")}),G.clipDefRelative=T.ensureSingleById(z._clips,"clipPath",X,function(ae){ae.append("path").attr("d","M0,0Z")}),G.plotContainer=T.ensureSingle(G.container,"g",G.id),G.updateLayers(ee),n.setClipUrl(G.layers.backplot,j,Y),n.setClipUrl(G.layers.grids,j,Y)},h.updateLayers=function(z){var G=this,Y=G.layers,ee=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&ee.push("aaxis","aline"),z.baxis.layer==="below traces"&&ee.push("baxis","bline"),z.caxis.layer==="below traces"&&ee.push("caxis","cline"),ee.push("frontplot"),z.aaxis.layer==="above traces"&&ee.push("aaxis","aline"),z.baxis.layer==="above traces"&&ee.push("baxis","bline"),z.caxis.layer==="above traces"&&ee.push("caxis","cline");var j=G.plotContainer.selectAll("g.toplevel").data(ee,String),X=["agrid","bgrid","cgrid"];j.enter().append("g").attr("class",function(ae){return"toplevel "+ae}).each(function(ae){var he=y.select(this);Y[ae]=he,ae==="frontplot"?he.append("g").classed("scatterlayer",!0):ae==="backplot"?he.append("g").classed("maplayer",!0):ae==="plotbg"?he.append("path").attr("d","M0,0Z"):ae==="aline"||ae==="bline"||ae==="cline"?he.append("path"):ae==="grids"&&X.forEach(function(K){Y[K]=he.append("g").classed("grid "+K,!0)})}),j.order()};var L=Math.sqrt(4/3);h.adjustLayout=function(z,G){var Y=this,ee=z.domain,j=(ee.x[0]+ee.x[1])/2,X=(ee.y[0]+ee.y[1])/2,ae=ee.x[1]-ee.x[0],he=ee.y[1]-ee.y[0],K=ae*G.w,J=he*G.h,U=z.sum,H=z.aaxis.min,q=z.baxis.min,re=z.caxis.min,Z,Q,ie,oe,ne,le;K>L*J?(oe=J,ie=oe*L):(ie=K,oe=ie/L),ne=ae*ie/K,le=he*oe/J,Z=G.l+G.w*j-ie/2,Q=G.t+G.h*(1-X)-oe/2,Y.x0=Z,Y.y0=Q,Y.w=ie,Y.h=oe,Y.sum=U,Y.xaxis={type:"linear",range:[H+2*re-U,U-H-2*q],domain:[j-ne/2,j+ne/2],_id:"x"},r(Y.xaxis,Y.graphDiv._fullLayout),Y.xaxis.setScale(),Y.xaxis.isPtWithinRange=function(Le){return Le.a>=Y.aaxis.range[0]&&Le.a<=Y.aaxis.range[1]&&Le.b>=Y.baxis.range[1]&&Le.b<=Y.baxis.range[0]&&Le.c>=Y.caxis.range[1]&&Le.c<=Y.caxis.range[0]},Y.yaxis={type:"linear",range:[H,U-q-re],domain:[X-le/2,X+le/2],_id:"y"},r(Y.yaxis,Y.graphDiv._fullLayout),Y.yaxis.setScale(),Y.yaxis.isPtWithinRange=function(){return!0};var _e=Y.yaxis.domain[0],fe=Y.aaxis=v({},z.aaxis,{range:[H,U-q-re],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[_e,_e+le*L],anchor:"free",position:0,_id:"y",_length:ie});r(fe,Y.graphDiv._fullLayout),fe.setScale();var ye=Y.baxis=v({},z.baxis,{range:[U-H-re,q],side:"bottom",domain:Y.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ie});r(ye,Y.graphDiv._fullLayout),ye.setScale();var xe=Y.caxis=v({},z.caxis,{range:[U-H-q,re],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[_e,_e+le*L],anchor:"free",position:0,_id:"y",_length:ie});r(xe,Y.graphDiv._fullLayout),xe.setScale();var me="M"+Z+","+(Q+oe)+"h"+ie+"l-"+ie/2+",-"+oe+"Z";Y.clipDef.select("path").attr("d",me),Y.layers.plotbg.select("path").attr("d",me);var be="M0,"+oe+"h"+ie+"l-"+ie/2+",-"+oe+"Z";Y.clipDefRelative.select("path").attr("d",be);var ke=e(Z,Q);Y.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ke),Y.clipDefRelative.select("path").attr("transform",null);var De=e(Z-ye._offset,Q+oe);Y.layers.baxis.attr("transform",De),Y.layers.bgrid.attr("transform",De);var He=e(Z+ie/2,Q)+"rotate(30)"+e(0,-fe._offset);Y.layers.aaxis.attr("transform",He),Y.layers.agrid.attr("transform",He);var Ae=e(Z+ie/2,Q)+"rotate(-30)"+e(0,-xe._offset);Y.layers.caxis.attr("transform",Ae),Y.layers.cgrid.attr("transform",Ae),Y.drawAxes(!0),Y.layers.aline.select("path").attr("d",fe.showline?"M"+Z+","+(Q+oe)+"l"+ie/2+",-"+oe:"M0,0").call(i.stroke,fe.linecolor||"#000").style("stroke-width",(fe.linewidth||0)+"px"),Y.layers.bline.select("path").attr("d",ye.showline?"M"+Z+","+(Q+oe)+"h"+ie:"M0,0").call(i.stroke,ye.linecolor||"#000").style("stroke-width",(ye.linewidth||0)+"px"),Y.layers.cline.select("path").attr("d",xe.showline?"M"+(Z+ie/2)+","+Q+"l"+ie/2+","+oe:"M0,0").call(i.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),Y.graphDiv._context.staticPlot||Y.initInteractions(),n.setClipUrl(Y.layers.frontplot,Y._hasClipOnAxisFalse?null:Y.clipId,Y.graphDiv)},h.drawAxes=function(z){var G=this,Y=G.graphDiv,ee=G.id.substr(7)+"title",j=G.layers,X=G.aaxis,ae=G.baxis,he=G.caxis;if(G.drawAx(X),G.drawAx(ae),G.drawAx(he),z){var K=Math.max(X.showticklabels?X.tickfont.size/2:0,(he.showticklabels?he.tickfont.size*.75:0)+(he.ticks==="outside"?he.ticklen*.87:0)),J=(ae.showticklabels?ae.tickfont.size:0)+(ae.ticks==="outside"?ae.ticklen:0)+3;j["a-title"]=l.draw(Y,"a"+ee,{propContainer:X,propName:G.id+".aaxis.title",placeholder:a(Y,"Click to enter Component A title"),attributes:{x:G.x0+G.w/2,y:G.y0-X.title.font.size/3-K,"text-anchor":"middle"}}),j["b-title"]=l.draw(Y,"b"+ee,{propContainer:ae,propName:G.id+".baxis.title",placeholder:a(Y,"Click to enter Component B title"),attributes:{x:G.x0-J,y:G.y0+G.h+ae.title.font.size*.83+J,"text-anchor":"middle"}}),j["c-title"]=l.draw(Y,"c"+ee,{propContainer:he,propName:G.id+".caxis.title",placeholder:a(Y,"Click to enter Component C title"),attributes:{x:G.x0+G.w+J,y:G.y0+G.h+he.title.font.size*.83+J,"text-anchor":"middle"}})}},h.drawAx=function(z){var G=this,Y=G.graphDiv,ee=z._name,j=ee.charAt(0),X=z._id,ae=G.layers[ee],he=30,K=j+"tickLayout",J=E(z);G[K]!==J&&(ae.selectAll("."+X+"tick").remove(),G[K]=J),z.setScale();var U=o.calcTicks(z),H=o.clipEnds(z,U),q=o.makeTransTickFn(z),re=o.getTickSigns(z)[2],Z=T.deg2rad(he),Q=re*(z.linewidth||1)/2,ie=re*z.ticklen,oe=G.w,ne=G.h,le=j==="b"?"M0,"+Q+"l"+Math.sin(Z)*ie+","+Math.cos(Z)*ie:"M"+Q+",0l"+Math.cos(Z)*ie+","+-Math.sin(Z)*ie,_e={a:"M0,0l"+ne+",-"+oe/2,b:"M0,0l-"+oe/2+",-"+ne,c:"M0,0l-"+ne+","+oe/2}[j];o.drawTicks(Y,z,{vals:z.ticks==="inside"?H:U,layer:ae,path:le,transFn:q,crisp:!1}),o.drawGrid(Y,z,{vals:H,layer:G.layers[j+"grid"],path:_e,transFn:q,crisp:!1}),o.drawLabels(Y,z,{vals:U,layer:ae,transFn:q,labelFns:o.makeLabelFns(z,0,he)})};function E(z){return z.ticks+String(z.ticklen)+String(z.showticklabels)}var S=p.MINZOOM/2+.87,P="m-0.87,.5h"+S+"v3h-"+(S+5.2)+"l"+(S/2+2.6)+",-"+(S*.87+4.5)+"l2.6,1.5l-"+S/2+","+S*.87+"Z",F="m0.87,.5h-"+S+"v3h"+(S+5.2)+"l-"+(S/2+2.6)+",-"+(S*.87+4.5)+"l-2.6,1.5l"+S/2+","+S*.87+"Z",I="m0,1l"+S/2+","+S*.87+"l2.6,-1.5l-"+(S/2+2.6)+",-"+(S*.87+4.5)+"l-"+(S/2+2.6)+","+(S*.87+4.5)+"l2.6,1.5l"+S/2+",-"+S*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;h.clearOutline=function(){w(this.dragOptions),M(this.dragOptions.gd)},h.initInteractions=function(){var z=this,G=z.layers.plotbg.select("path").node(),Y=z.graphDiv,ee=Y._fullLayout._zoomlayer,j,X;this.dragOptions={element:G,gd:Y,plotinfo:{id:z.id,domain:Y._fullLayout[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis},subplot:z.id,prepFn:function(De,He,Ae){z.dragOptions.xaxes=[z.xaxis],z.dragOptions.yaxes=[z.yaxis],j=Y._fullLayout._invScaleX,X=Y._fullLayout._invScaleY;var Le=z.dragOptions.dragmode=Y._fullLayout.dragmode;f(Le)?z.dragOptions.minDrag=1:z.dragOptions.minDrag=void 0,Le==="zoom"?(z.dragOptions.moveFn=ye,z.dragOptions.clickFn=oe,z.dragOptions.doneFn=xe,ne(De,He,Ae)):Le==="pan"?(z.dragOptions.moveFn=be,z.dragOptions.clickFn=oe,z.dragOptions.doneFn=ke,me(),z.clearOutline(Y)):(m(Le)||f(Le))&&x(De,He,Ae,z.dragOptions,Le)}};var ae,he,K,J,U,H,q,re,Z,Q;function ie(De){var He={};return He[z.id+".aaxis.min"]=De.a,He[z.id+".baxis.min"]=De.b,He[z.id+".caxis.min"]=De.c,He}function oe(De,He){var Ae=Y._fullLayout.clickmode;O(Y),De===2&&(Y.emit("plotly_doubleclick",null),A.call("_guiRelayout",Y,ie({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&De===1&&u(He,Y,[z.xaxis],[z.yaxis],z.id,z.dragOptions),Ae.indexOf("event")>-1&&g.click(Y,He,z.id)}function ne(De,He,Ae){var Le=G.getBoundingClientRect();ae=He-Le.left,he=Ae-Le.top,Y._fullLayout._calcInverseTransform(Y);var Ze=Y._fullLayout._invTransform,We=T.apply3DTransform(Ze)(ae,he);ae=We[0],he=We[1],K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},U=K,J=z.aaxis.range[1]-K.a,H=c(z.graphDiv._fullLayout[z.id].bgcolor).getLuminance(),q="M0,"+z.h+"L"+z.w/2+", 0L"+z.w+","+z.h+"Z",re=!1,Z=ee.append("path").attr("class","zoombox").attr("transform",e(z.x0,z.y0)).style({fill:H>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),Q=ee.append("path").attr("class","zoombox-corners").attr("transform",e(z.x0,z.y0)).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z.clearOutline(Y)}function le(De,He){return 1-He/z.h}function _e(De,He){return 1-(De+(z.h-He)/Math.sqrt(3))/z.w}function fe(De,He){return(De-(z.h-He)/Math.sqrt(3))/z.w}function ye(De,He){var Ae=ae+De*j,Le=he+He*X,Ze=Math.max(0,Math.min(1,le(ae,he),le(Ae,Le))),We=Math.max(0,Math.min(1,_e(ae,he),_e(Ae,Le))),ze=Math.max(0,Math.min(1,fe(ae,he),fe(Ae,Le))),Ie=(Ze/2+ze)*z.w,Ve=(1-Ze/2-We)*z.w,dt=(Ie+Ve)/2,Ft=Ve-Ie,Qt=(1-Ze)*z.h,Ot=Qt-Ft/L;Ft<p.MINZOOM?(U=K,Z.attr("d",q),Q.attr("d","M0,0Z")):(U={a:K.a+Ze*J,b:K.b+We*J,c:K.c+ze*J},Z.attr("d",q+"M"+Ie+","+Qt+"H"+Ve+"L"+dt+","+Ot+"L"+Ie+","+Qt+"Z"),Q.attr("d","M"+ae+","+he+D+"M"+Ie+","+Qt+P+"M"+Ve+","+Qt+F+"M"+dt+","+Ot+I)),re||(Z.transition().style("fill",H>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),re=!0),Y.emit("plotly_relayouting",ie(U))}function xe(){O(Y),U!==K&&(A.call("_guiRelayout",Y,ie(U)),R&&Y.data&&Y._context.showTips&&(T.notifier(a(Y,"Double-click to zoom back out"),"long"),R=!1))}function me(){K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},U=K}function be(De,He){var Ae=De/z.xaxis._m,Le=He/z.yaxis._m;U={a:K.a-Le,b:K.b+(Ae+Le)/2,c:K.c-(Ae-Le)/2};var Ze=[U.a,U.b,U.c].sort(T.sorterAsc),We={a:Ze.indexOf(U.a),b:Ze.indexOf(U.b),c:Ze.indexOf(U.c)};Ze[0]<0&&(Ze[1]+Ze[0]/2<0?(Ze[2]+=Ze[0]+Ze[1],Ze[0]=Ze[1]=0):(Ze[2]+=Ze[0]/2,Ze[1]+=Ze[0]/2,Ze[0]=0),U={a:Ze[We.a],b:Ze[We.b],c:Ze[We.c]},He=(K.a-U.a)*z.yaxis._m,De=(K.c-U.c-K.b+U.b)*z.xaxis._m);var ze=e(z.x0+De,z.y0+He);z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ze);var Ie=e(-De,-He);z.clipDefRelative.select("path").attr("transform",Ie),z.aaxis.range=[U.a,z.sum-U.b-U.c],z.baxis.range=[z.sum-U.a-U.c,U.b],z.caxis.range=[z.sum-U.a-U.b,U.c],z.drawAxes(!1),z._hasClipOnAxisFalse&&z.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,z),Y.emit("plotly_relayouting",ie(U))}function ke(){A.call("_guiRelayout",Y,ie(U))}G.onmousemove=function(De){g.hover(Y,De,z.id),Y._fullLayout._lasthover=G,Y._fullLayout._hoversubplot=z.id},G.onmouseout=function(De){Y._dragging||b.unhover(Y,De)},b.init(this.dragOptions)};function O(z){y.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(t,N,V){var y=t("./lib/loggers"),c=t("./lib/noop"),A=t("./lib/push_unique"),T=t("./lib/is_plain_object"),e=t("./lib/dom").addStyleRule,a=t("./lib/extend"),i=t("./plots/attributes"),n=t("./plots/layout_attributes"),r=a.extendFlat,v=a.extendDeepAll;V.modules={},V.allCategories={},V.allTypes=[],V.subplotsRegistry={},V.transformsRegistry={},V.componentsRegistry={},V.layoutArrayContainers=[],V.layoutArrayRegexes=[],V.traceLayoutAttributes={},V.localeRegistry={},V.apiMethodRegistry={},V.collectableSubplotTypes=null,V.register=function(w){if(V.collectableSubplotTypes=null,w)w&&!Array.isArray(w)&&(w=[w]);else throw new Error("No argument passed to Plotly.register.");for(var p=0;p<w.length;p++){var _=w[p];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":s(_);break;case"transform":g(_);break;case"component":b(_);break;case"locale":d(_);break;case"apiMethod":var h=_.name;V.apiMethodRegistry[h]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},V.getModule=function(M){var w=V.modules[u(M)];return w?w._module:!1},V.traceIs=function(M,w){if(M=u(M),M==="various")return!1;var p=V.modules[M];return p||(M&&y.log("Unrecognized trace type "+M+"."),p=V.modules[i.type.dflt]),!!p.categories[w]},V.getTransformIndices=function(M,w){for(var p=[],_=M.transforms||[],h=0;h<_.length;h++)_[h].type===w&&p.push(h);return p},V.hasTransform=function(M,w){for(var p=M.transforms||[],_=0;_<p.length;_++)if(p[_].type===w)return!0;return!1},V.getComponentMethod=function(M,w){var p=V.componentsRegistry[M];return p&&p[w]||c},V.call=function(){var M=arguments[0],w=[].slice.call(arguments,1);return V.apiMethodRegistry[M].apply(null,w)};function s(M){var w=M.name,p=M.categories,_=M.meta;if(V.modules[w]){y.log("Type "+w+" already registered");return}V.subplotsRegistry[M.basePlotModule.name]||o(M.basePlotModule);for(var h={},L=0;L<p.length;L++)h[p[L]]=!0,V.allCategories[p[L]]=!0;V.modules[w]={_module:M,categories:h},_&&Object.keys(_).length&&(V.modules[w].meta=_),V.allTypes.push(w);for(var E in V.componentsRegistry)m(E,w);M.layoutAttributes&&r(V.traceLayoutAttributes,M.layoutAttributes);var S=M.basePlotModule,P=S.name;if(P==="mapbox"){var F=S.constants.styleRules;for(var I in F)e(".js-plotly-plot .plotly .mapboxgl-"+I,F[I])}(P==="geo"||P==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function o(M){var w=M.name;if(V.subplotsRegistry[w]){y.log("Plot type "+w+" already registered.");return}f(M),V.subplotsRegistry[w]=M;for(var p in V.componentsRegistry)x(p,M.name)}function b(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var w=M.name;V.componentsRegistry[w]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&A(V.layoutArrayContainers,w),f(M));for(var p in V.modules)m(w,p);for(var _ in V.subplotsRegistry)x(w,_);for(var h in V.transformsRegistry)l(w,h);M.schema&&M.schema.layout&&v(n,M.schema.layout)}function g(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+M.name,p=typeof M.transform=="function",_=typeof M.calcTransform=="function";if(!p&&!_)throw new Error(w+" is missing a *transform* or *calcTransform* method.");p&&_&&y.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(M.attributes)||y.log(w+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&y.log(w+" registered without a *supplyDefaults* method."),V.transformsRegistry[M.name]=M;for(var h in V.componentsRegistry)l(h,M.name)}function d(M){var w=M.name,p=w.split("-")[0],_=M.dictionary,h=M.format,L=_&&Object.keys(_).length,E=h&&Object.keys(h).length,S=V.localeRegistry,P=S[w];if(P||(S[w]=P={}),p!==w){var F=S[p];F||(S[p]=F={}),L&&F.dictionary===P.dictionary&&(F.dictionary=_),E&&F.format===P.format&&(F.format=h)}L&&(P.dictionary=_),E&&(P.format=h)}function f(M){if(M.layoutAttributes){var w=M.layoutAttributes._arrayAttrRegexps;if(w)for(var p=0;p<w.length;p++)A(V.layoutArrayRegexes,w[p])}}function m(M,w){var p=V.componentsRegistry[M].schema;if(!(!p||!p.traces)){var _=p.traces[w];_&&v(V.modules[w]._module.attributes,_)}}function l(M,w){var p=V.componentsRegistry[M].schema;if(!(!p||!p.transforms)){var _=p.transforms[w];_&&v(V.transformsRegistry[w].attributes,_)}}function x(M,w){var p=V.componentsRegistry[M].schema;if(!(!p||!p.subplots)){var _=V.subplotsRegistry[w],h=_.layoutAttributes,L=_.attr==="subplot"?_.name:_.attr;Array.isArray(L)&&(L=L[0]);var E=p.subplots[L];h&&E&&v(h,E)}}function u(M){return typeof M=="object"&&(M=M.type),M}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(t,N,V){var y=t("../registry"),c=t("../lib"),A=c.extendFlat,T=c.extendDeep;function e(i){var n;switch(i){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}function a(i){var n=["xaxis","yaxis","zaxis"];return n.indexOf(i.slice(0,5))>-1}N.exports=function(n,r){var v,s=n.data,o=n.layout,b=T([],s),g=T({},o,e(r.tileClass)),d=n._context||{};if(r.width&&(g.width=r.width),r.height&&(g.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){g.annotations=[];var f=Object.keys(g);for(v=0;v<f.length;v++)a(f[v])&&(g[f[v]].title={text:""});for(v=0;v<b.length;v++){var m=b[v];m.showscale=!1,m.marker&&(m.marker.showscale=!1),y.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(r.annotations))for(v=0;v<r.annotations.length;v++)g.annotations.push(r.annotations[v]);var l=Object.keys(g).filter(function(p){return p.match(/^scene\d*$/)});if(l.length){var x={};for(r.tileClass==="thumbnail"&&(x={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),v=0;v<l.length;v++){var u=g[l[v]];u.xaxis||(u.xaxis={}),u.yaxis||(u.yaxis={}),u.zaxis||(u.zaxis={}),A(u.xaxis,x),A(u.yaxis,x),A(u.zaxis,x),u._scene=null}}var M=document.createElement("div");r.tileClass&&(M.className=r.tileClass);var w={gd:M,td:M,layout:g,data:b,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return r.setBackground!=="transparent"&&(w.config.setBackground=r.setBackground||"opaque"),w.gd.defaultLayout=e(r.tileClass),w}},{"../lib":515,"../registry":647}],649:[function(t,N,V){var y=t("../lib"),c=t("../plot_api/to_image"),A=t("./filesaver"),T=t("./helpers");function e(a,i){var n;return y.isPlainObject(a)||(n=y.getGraphDiv(a)),i=i||{},i.format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(r,v){n&&n._snapshotInProgress&&v(new Error("Snapshotting already in progress.")),y.isIE()&&i.format!=="svg"&&v(new Error(T.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var s=c(a,i),o=i.filename||a.fn||"newplot";o+="."+i.format.replace("-","."),s.then(function(b){return n&&(n._snapshotInProgress=!1),A(b,o,i.format)}).then(function(b){r(b)}).catch(function(b){n&&(n._snapshotInProgress=!1),v(b)})})}N.exports=e},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(t,N,V){var y=t("../lib"),c=t("./helpers");function A(T,e,a){var i=document.createElement("a"),n="download"in i,r=new Promise(function(v,s){var o,b;if(y.isIE())return o=c.createBlob(T,"svg"),window.navigator.msSaveBlob(o,e),o=null,v(e);if(n)return o=c.createBlob(T,a),b=c.createObjectURL(o),i.href=b,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),c.revokeObjectURL(b),o=null,v(e);if(y.isSafari()){var g=a==="svg"?",":";base64,";return c.octetStream(g+encodeURIComponent(T)),v(e)}s(new Error("download error"))});return r}N.exports=A},{"../lib":515,"./helpers":651}],651:[function(t,N,V){var y=t("../registry");V.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},V.getRedrawFunc=function(T){return function(){y.getComponentMethod("colorbar","draw")(T)}},V.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},V.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var c=window.URL||window.webkitURL;V.createObjectURL=function(T){return c.createObjectURL(T)},V.revokeObjectURL=function(T){return c.revokeObjectURL(T)},V.createBlob=function(T,e){if(e==="svg")return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([T],{type:"application/json;charset=utf-8"});var a=A(window.atob(T));return new window.Blob([a],{type:"image/"+e})},V.octetStream=function(T){document.location.href="data:application/octet-stream"+T};function A(T){for(var e=T.length,a=new ArrayBuffer(e),i=new Uint8Array(a),n=0;n<e;n++)i[n]=T.charCodeAt(n);return a}V.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,V.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(t,N,V){var y=t("./helpers"),c={getDelay:y.getDelay,getRedrawFunc:y.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};N.exports=c},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(t,N,V){var y=t("../lib"),c=t("events").EventEmitter,A=t("./helpers");function T(e){var a=e.emitter||new c,i=new Promise(function(n,r){var v=window.Image,s=e.svg,o=e.format||"png";if(y.isIE()&&o!=="svg"){var b=new Error(A.MSG_IE_BAD_FORMAT);return r(b),e.promise?i:a.emit("error",b)}var g=e.canvas,d=e.scale||1,f=e.width||300,m=e.height||150,l=d*f,x=d*m,u=g.getContext("2d",{willReadFrequently:!0}),M=new v,w,p;o==="svg"||y.isSafari()?p=A.encodeSVG(s):(w=A.createBlob(s,"svg"),p=A.createObjectURL(w)),g.width=l,g.height=x,M.onload=function(){var _;switch(w=null,A.revokeObjectURL(p),o!=="svg"&&u.drawImage(M,0,0,l,x),o){case"jpeg":_=g.toDataURL("image/jpeg");break;case"png":_=g.toDataURL("image/png");break;case"webp":_=g.toDataURL("image/webp");break;case"svg":_=p;break;default:var h="Image format is not jpeg, png, svg or webp.";if(r(new Error(h)),!e.promise)return a.emit("error",h)}n(_),e.promise||a.emit("success",_)},M.onerror=function(_){if(w=null,A.revokeObjectURL(p),r(_),!e.promise)return a.emit("error",_)},M.src=p});return e.promise?i:a}N.exports=T},{"../lib":515,"./helpers":651,events:84}],654:[function(t,N,V){var y=t("events").EventEmitter,c=t("../registry"),A=t("../lib"),T=t("./helpers"),e=t("./cloneplot"),a=t("./tosvg"),i=t("./svgtoimg");function n(r,v){var s=new y,o=e(r,{format:"png"}),b=o.gd;b.style.position="absolute",b.style.left="-5000px",document.body.appendChild(b);function g(){var f=T.getDelay(b._fullLayout);setTimeout(function(){var m=a(b),l=document.createElement("canvas");l.id=A.randstr(),s=i({format:v.format,width:b._fullLayout.width,height:b._fullLayout.height,canvas:l,emitter:s,svg:m}),s.clean=function(){b&&document.body.removeChild(b)}},f)}var d=T.getRedrawFunc(b);return c.call("_doPlot",b,o.data,o.layout,o.config).then(d).then(g).catch(function(f){s.emit("error",f)}),s}N.exports=n},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(t,N,V){var y=t("@plotly/d3"),c=t("../lib"),A=t("../components/drawing"),T=t("../components/color"),e=t("../constants/xmlns_namespaces"),a=/"/g,i="TOBESTRIPPED",n=new RegExp('("'+i+")|("+i+'")',"g");function r(s){var o=y.select("body").append("div").style({display:"none"}).html(""),b=s.replace(/(&[^;]*;)/gi,function(g){return g==="&lt;"?"&#60;":g==="&rt;"?"&#62;":g.indexOf("<")!==-1||g.indexOf(">")!==-1?"":o.html(g).text()});return o.remove(),b}function v(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}N.exports=function(o,b,g){var d=o._fullLayout,f=d._paper,m=d._toppaper,l=d.width,x=d.height,u;f.insert("rect",":first-child").call(A.setRect,0,0,l,x).call(T.fill,d.paper_bgcolor);var M=d._basePlotModules||[];for(u=0;u<M.length;u++){var w=M[u];w.toSVG&&w.toSVG(o)}if(m){var p=m.node().childNodes,_=Array.prototype.slice.call(p);for(u=0;u<_.length;u++){var h=_[u];h.childNodes.length&&f.node().appendChild(h)}}d._draggers&&d._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=y.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){E.remove();return}else E.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&E.style("font-family",S.replace(a,i))}),f.selectAll(".gradient_filled,.pattern_filled").each(function(){var E=y.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&E.style("fill",S.replace(a,i));var P=this.style.stroke;P&&P.indexOf("url(")!==-1&&E.style("stroke",P.replace(a,i))}),(b==="pdf"||b==="eps")&&f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(e.xmlns,"xmlns",e.svg),f.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),b==="svg"&&g&&(f.attr("width",g*l),f.attr("height",g*x),f.attr("viewBox","0 0 "+l+" "+x));var L=new window.XMLSerializer().serializeToString(f.node());return L=r(L),L=v(L),L=L.replace(n,"'"),c.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;y.mergeArray(T.text,A,"tx"),y.mergeArray(T.hovertext,A,"htx");var a=T.marker;if(a){y.mergeArray(a.opacity,A,"mo",!0),y.mergeArray(a.color,A,"mc");var i=a.line;i&&(y.mergeArray(i.color,A,"mlc"),y.mergeArrayCastPositive(i.width,A,"mlw"))}}},{"../../lib":515}],657:[function(t,N,V){var y=t("../scatter/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),a=t("../../plots/font_attributes"),i=t("./constants"),n=t("../../components/drawing/attributes").pattern,r=t("../../lib/extend").extendFlat,v=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=y.marker,o=s.line,b=r({},o.width,{dflt:0}),g=r({width:b,editType:"calc"},e("marker.line")),d=r({line:g,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:n});N.exports={x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:y.text,texttemplate:T({editType:"plot"},{keys:i.eventDataKeys}),hovertext:y.hovertext,hovertemplate:A({},{keys:i.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},v,{}),insidetextfont:r({},v,{}),outsidetextfont:r({},v,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},y.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:y.selected.marker.opacity,color:y.selected.marker.color,editType:"style"},textfont:y.selected.textfont,editType:"style"},unselected:{marker:{opacity:y.unselected.marker.opacity,color:y.unselected.marker.color,editType:"style"},textfont:y.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../plots/cartesian/align_period"),A=t("../../components/colorscale/helpers").hasColorscale,T=t("../../components/colorscale/calc"),e=t("./arrays_to_calcdata"),a=t("../scatter/calc_selection");N.exports=function(n,r){var v=y.getFromId(n,r.xaxis||"x"),s=y.getFromId(n,r.yaxis||"y"),o,b,g,d,f,m,l={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(o=v.makeCalcdata(r,"x",l),g=s.makeCalcdata(r,"y"),d=c(r,s,"y",g),f=!!r.yperiodalignment,m="y"):(o=s.makeCalcdata(r,"y",l),g=v.makeCalcdata(r,"x"),d=c(r,v,"x",g),f=!!r.xperiodalignment,m="x"),b=d.vals;for(var x=Math.min(b.length,o.length),u=new Array(x),M=0;M<x;M++)u[M]={p:b[M],s:o[M]},f&&(u[M].orig_p=g[M],u[M][m+"End"]=d.ends[M],u[M][m+"Start"]=d.starts[M]),r.ids&&(u[M].id=String(r.ids[M]));return A(r,"marker")&&T(n,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),A(r,"marker.line")&&T(n,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(u,r),a(u,r),u}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(t,N,V){N.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib").isArrayOrTypedArray,A=t("../../constants/numerical").BADNUM,T=t("../../registry"),e=t("../../plots/cartesian/axes"),a=t("../../plots/cartesian/constraints").getAxisGroup,i=t("./sieve.js");function n(L,E){for(var S=E.xaxis,P=E.yaxis,F=L._fullLayout,I=L._fullData,D=L.calcdata,R=[],O=[],z=0;z<I.length;z++){var G=I[z];if(G.visible===!0&&T.traceIs(G,"bar")&&G.xaxis===S._id&&G.yaxis===P._id&&(G.orientation==="h"?R.push(D[z]):O.push(D[z]),G._computePh))for(var Y=L.calcdata[z],ee=0;ee<Y.length;ee++)typeof Y[ee].ph0=="function"&&(Y[ee].ph0=Y[ee].ph0()),typeof Y[ee].ph1=="function"&&(Y[ee].ph1=Y[ee].ph1())}var j={xCat:S.type==="category"||S.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};r(L,S,P,O,j),r(L,P,S,R,j)}function r(L,E,S,P,F){if(!!P.length){var I,D,R,O,z;switch(v(S,P),F.mode){case"overlay":s(E,S,P,F);break;case"group":for(I=[],D=[],R=0;R<P.length;R++)O=P[R],z=O[0].trace,z.offset===void 0?D.push(O):I.push(O);D.length&&o(L,E,S,D,F),I.length&&s(E,S,I,F);break;case"stack":case"relative":for(I=[],D=[],R=0;R<P.length;R++)O=P[R],z=O[0].trace,z.base===void 0?D.push(O):I.push(O);D.length&&b(L,E,S,D,F),I.length&&s(E,S,I,F);break}_(P,E)}}function v(L,E){var S,P;for(S=0;S<E.length;S++){var F=E[S],I=F[0].trace,D=I.type==="funnel"?I._base:I.base,R,O=I.orientation==="h"?I.xcalendar:I.ycalendar,z=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(c(D)){for(P=0;P<Math.min(D.length,F.length);P++)R=z(D[P],0,O),y(R)?(F[P].b=+R,F[P].hasB=1):F[P].b=0;for(;P<F.length;P++)F[P].b=0}else{R=z(D,0,O);var G=y(R);for(R=G?R:0,P=0;P<F.length;P++)F[P].b=R,G&&(F[P].hasB=1)}}}function s(L,E,S,P){for(var F=0;F<S.length;F++){var I=S[F],D=new i([I],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});g(L,D,P),P.norm?(M(D),p(E,D,P)):x(E,D)}}function o(L,E,S,P,F){var I=new i(P,{posAxis:E,sepNegVal:!1,overlapNoMerge:!F.norm});d(L,E,I,F),w(I,E),F.norm?(M(I),p(S,I,F)):x(S,I)}function b(L,E,S,P,F){var I=new i(P,{posAxis:E,sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});g(E,I,F),u(S,I,F);for(var D=0;D<P.length;D++)for(var R=P[D],O=0;O<R.length;O++){var z=R[O];if(z.s!==A){var G=z.b+z.s===I.get(z.p,z.s);G&&(z._outmost=!0)}}F.norm&&p(S,I,F)}function g(L,E,S){for(var P=E.minDiff,F=E.traces,I=P*(1-S.gap),D=I,R=D*(1-(S.groupgap||0)),O=-R/2,z=0;z<F.length;z++){var G=F[z],Y=G[0].t;Y.barwidth=R,Y.poffset=O,Y.bargroupwidth=I,Y.bardelta=P}E.binWidth=F[0][0].t.barwidth/100,f(E),m(L,E),l(L,E)}function d(L,E,S,P){for(var F=L._fullLayout,I=S.positions,D=S.distinctPositions,R=S.minDiff,O=S.traces,z=O.length,G=I.length!==D.length,Y=R*(1-P.gap),ee=a(F,E._id)+O[0][0].trace.orientation,j=F._alignmentOpts[ee]||{},X=0;X<z;X++){var ae=O[X],he=ae[0].trace,K=j[he.alignmentgroup]||{},J=Object.keys(K.offsetGroups||{}).length,U;J?U=Y/J:U=G?Y/z:Y;var H=U*(1-(P.groupgap||0)),q;J?q=((2*he._offsetIndex+1-J)*U-H)/2:q=G?((2*X+1-z)*U-H)/2:-H/2;var re=ae[0].t;re.barwidth=H,re.poffset=q,re.bargroupwidth=Y,re.bardelta=R}S.binWidth=O[0][0].t.barwidth/100,f(S),m(E,S),l(E,S,G)}function f(L){var E=L.traces,S,P;for(S=0;S<E.length;S++){var F=E[S],I=F[0],D=I.trace,R=I.t,O=D._offset||D.offset,z=R.poffset,G;if(c(O)){for(G=Array.prototype.slice.call(O,0,F.length),P=0;P<G.length;P++)y(G[P])||(G[P]=z);for(P=G.length;P<F.length;P++)G.push(z);R.poffset=G}else O!==void 0&&(R.poffset=O);var Y=D._width||D.width,ee=R.barwidth;if(c(Y)){var j=Array.prototype.slice.call(Y,0,F.length);for(P=0;P<j.length;P++)y(j[P])||(j[P]=ee);for(P=j.length;P<F.length;P++)j.push(ee);if(R.barwidth=j,O===void 0){for(G=[],P=0;P<F.length;P++)G.push(z+(ee-j[P])/2);R.poffset=G}}else Y!==void 0&&(R.barwidth=Y,O===void 0&&(R.poffset=z+(ee-Y)/2))}}function m(L,E){for(var S=E.traces,P=h(L),F=0;F<S.length;F++)for(var I=S[F],D=I[0].t,R=D.poffset,O=Array.isArray(R),z=D.barwidth,G=Array.isArray(z),Y=0;Y<I.length;Y++){var ee=I[Y],j=ee.w=G?z[Y]:z;ee[P]=ee.p+(O?R[Y]:R)+j/2}}function l(L,E,S){var P=E.traces,F=E.minDiff,I=F/2;e.minDtick(L,E.minDiff,E.distinctPositions[0],S);for(var D=0;D<P.length;D++){var R=P[D],O=R[0],z=O.trace,G=[],Y,ee,j,X;for(X=0;X<R.length;X++)Y=R[X],ee=Y.p-I,j=Y.p+I,G.push(ee,j);if(z.width||z.offset){var ae=O.t,he=ae.poffset,K=ae.barwidth,J=Array.isArray(he),U=Array.isArray(K);for(X=0;X<R.length;X++){Y=R[X];var H=J?he[X]:he,q=U?K[X]:K;ee=Y.p+H,j=ee+q,G.push(ee,j)}}z._extremes[L._id]=e.findExtremes(L,G,{padded:!1})}}function x(L,E){for(var S=E.traces,P=h(L),F=0;F<S.length;F++){for(var I=S[F],D=I[0].trace,R=[],O=!1,z=0;z<I.length;z++){var G=I[z],Y=G.b,ee=Y+G.s;G[P]=ee,R.push(ee),G.hasB&&R.push(Y),(!G.hasB||!G.b)&&(O=!0)}D._extremes[L._id]=e.findExtremes(L,R,{tozero:O,padded:!0})}}function u(L,E,S){var P=h(L),F=E.traces,I,D,R,O,z,G;for(O=0;O<F.length;O++)if(I=F[O],D=I[0].trace,D.type==="funnel")for(z=0;z<I.length;z++)G=I[z],G.s!==A&&E.put(G.p,-.5*G.s);for(O=0;O<F.length;O++){I=F[O],D=I[0].trace,R=D.type==="funnel";var Y=[];for(z=0;z<I.length;z++)if(G=I[z],G.s!==A){var ee;R?ee=G.s:ee=G.s+G.b;var j=E.put(G.p,ee),X=j+ee;G.b=j,G[P]=X,S.norm||(Y.push(X),G.hasB&&Y.push(j))}S.norm||(D._extremes[L._id]=e.findExtremes(L,Y,{tozero:!0,padded:!0}))}}function M(L){for(var E=L.traces,S=0;S<E.length;S++)for(var P=E[S],F=0;F<P.length;F++){var I=P[F];I.s!==A&&L.put(I.p,I.b+I.s)}}function w(L,E){for(var S=L.traces,P=0;P<S.length;P++){var F=S[P],I=F[0].trace;if(I.base===void 0)for(var D=new i([F],{posAxis:E,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<F.length;R++){var O=F[R];if(O.p!==A){var z=D.put(O.p,O.b+O.s);z&&(O.b=z)}}}}function p(L,E,S){var P=E.traces,F=h(L),I=S.norm==="fraction"?1:100,D=I/1e9,R=L.l2c(L.c2l(0)),O=S.mode==="stack"?I:R;function z(q){return y(L.c2l(q))&&(q<R-D||q>O+D||!y(R))}for(var G=0;G<P.length;G++){for(var Y=P[G],ee=Y[0].trace,j=[],X=!1,ae=!1,he=0;he<Y.length;he++){var K=Y[he];if(K.s!==A){var J=Math.abs(I/E.get(K.p,K.s));K.b*=J,K.s*=J;var U=K.b,H=U+K.s;K[F]=H,j.push(H),ae=ae||z(H),K.hasB&&(j.push(U),ae=ae||z(U)),(!K.hasB||!K.b)&&(X=!0)}}ee._extremes[L._id]=e.findExtremes(L,j,{tozero:X,padded:ae})}}function _(L,E){var S=h(E),P={},F,I,D,R=1/0,O=-1/0;for(F=0;F<L.length;F++)for(D=L[F],I=0;I<D.length;I++){var z=D[I].p;y(z)&&(R=Math.min(R,z),O=Math.max(O,z))}var G=1e4/(O-R),Y=P.round=function(J){return String(Math.round(G*(J-R)))};for(F=0;F<L.length;F++){D=L[F],D[0].t.extents=P;var ee=D[0].t.poffset,j=Array.isArray(ee);for(I=0;I<D.length;I++){var X=D[I],ae=X[S]-X.w/2;if(y(ae)){var he=X[S]+X.w/2,K=Y(X.p);P[K]?P[K]=[Math.min(ae,P[K][0]),Math.max(he,P[K][1])]:P[K]=[ae,he]}X.p0=X.p+(j?ee[I]:ee),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s}}}function h(L){return L._id.charAt(0)}N.exports={crossTraceCalc:n,setGroupPositions:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color"),A=t("../../registry"),T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./style_defaults"),i=t("../../plots/cartesian/constraints").getAxisGroup,n=t("./attributes"),r=y.coerceFont;function v(g,d,f,m){function l(p,_){return y.coerce(g,d,n,p,_)}var x=T(g,d,m,l);if(!x){d.visible=!1;return}e(g,d,m,l),l("xhoverformat"),l("yhoverformat"),l("orientation",d.x&&!d.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var u=l("textposition");b(g,d,m,l,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(g,d,l,f,m);var M=(d.marker.line||{}).color,w=A.getComponentMethod("errorbars","supplyDefaults");w(g,d,M||c.defaultLine,{axis:"y"}),w(g,d,M||c.defaultLine,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(d,l)}function s(g,d,f,m){var l=d.orientation,x=d[{v:"x",h:"y"}[l]+"axis"],u=i(f,x)+l,M=f._alignmentOpts||{},w=m("alignmentgroup"),p=M[u];p||(p=M[u]={});var _=p[w];_?_.traces.push(d):_=p[w]={traces:[d],alignmentIndex:Object.keys(p).length,offsetGroups:{}};var h=m("offsetgroup"),L=_.offsetGroups,E=L[h];h&&(E||(E=L[h]={offsetIndex:Object.keys(L).length}),d._offsetIndex=E.offsetIndex)}function o(g,d){var f,m;function l(u){return y.coerce(m._input,m,n,u)}if(d.barmode==="group")for(var x=0;x<g.length;x++)m=g[x],m.type==="bar"&&(f=m._input,s(f,m,d,l))}function b(g,d,f,m,l,x){x=x||{};var u=x.moduleHasSelected!==!1,M=x.moduleHasUnselected!==!1,w=x.moduleHasConstrain!==!1,p=x.moduleHasCliponaxis!==!1,_=x.moduleHasTextangle!==!1,h=x.moduleHasInsideanchor!==!1,L=!!x.hasPathbar,E=Array.isArray(l)||l==="auto",S=E||l==="inside",P=E||l==="outside";if(S||P){var F=r(m,"textfont",f.font),I=y.extendFlat({},F),D=g.textfont&&g.textfont.color,R=!D;if(R&&delete I.color,r(m,"insidetextfont",I),L){var O=y.extendFlat({},F);R&&delete O.color,r(m,"pathbar.textfont",O)}P&&r(m,"outsidetextfont",F),u&&m("selected.textfont.color"),M&&m("unselected.textfont.color"),w&&m("constraintext"),p&&m("cliponaxis"),_&&m("textangle"),m("texttemplate")}S&&h&&m("insidetextanchor")}N.exports={supplyDefaults:v,crossTraceDefaults:o,handleGroupingDefaults:s,handleText:b}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(t,N,V){N.exports=function(c,A,T){return c.x="xVal"in A?A.xVal:A.x,c.y="yVal"in A?A.yVal:A.y,A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),T.orientation==="h"?(c.label=c.y,c.value=c.x):(c.label=c.x,c.value=c.y),c}},{}],663:[function(t,N,V){var y=t("fast-isnumeric"),c=t("tinycolor2"),A=t("../../lib").isArrayOrTypedArray;V.coerceString=function(T,e,a){if(typeof e=="string"){if(e||!T.noBlank)return e}else if((typeof e=="number"||e===!0)&&!T.strict)return String(e);return a!==void 0?a:T.dflt},V.coerceNumber=function(T,e,a){if(y(e)){e=+e;var i=T.min,n=T.max,r=i!==void 0&&e<i||n!==void 0&&e>n;if(!r)return e}return a!==void 0?a:T.dflt},V.coerceColor=function(T,e,a){return c(e).isValid()?e:a!==void 0?a:T.dflt},V.coerceEnumerated=function(T,e,a){return T.coerceNumber&&(e=+e),T.values.indexOf(e)!==-1?e:a!==void 0?a:T.dflt},V.getValue=function(T,e){var a;return Array.isArray(T)?e<T.length&&(a=T[e]):a=T,a},V.getLineWidth=function(T,e){var a=0<e.mlw?e.mlw:A(T.marker.line.width)?0:T.marker.line.width;return a}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(t,N,V){var y=t("../../components/fx"),c=t("../../registry"),A=t("../../components/color"),T=t("../../lib").fillText,e=t("./helpers").getLineWidth,a=t("../../plots/cartesian/axes").hoverLabelText,i=t("../../constants/numerical").BADNUM;function n(s,o,b,g,d){var f=r(s,o,b,g,d);if(f){var m=f.cd,l=m[0].trace,x=m[f.index];return f.color=v(l,x),c.getComponentMethod("errorbars","hoverInfo")(x,l,f),[f]}}function r(s,o,b,g,d){var f=s.cd,m=f[0].trace,l=f[0].t,x=g==="closest",u=m.type==="waterfall",M=s.maxHoverDistance,w=s.maxSpikeDistance,p,_,h,L,E,S,P;m.orientation==="h"?(p=b,_=o,h="y",L="x",E=he,S=j):(p=o,_=b,h="x",L="y",S=he,E=j);var F=m[h+"period"],I=x||F;function D(ne){return O(ne,-1)}function R(ne){return O(ne,1)}function O(ne,le){var _e=ne.w;return ne[h]+le*_e/2}function z(ne){return ne[h+"End"]-ne[h+"Start"]}var G=x?D:F?function(ne){return ne.p-z(ne)/2}:function(ne){return Math.min(D(ne),ne.p-l.bardelta/2)},Y=x?R:F?function(ne){return ne.p+z(ne)/2}:function(ne){return Math.max(R(ne),ne.p+l.bardelta/2)};function ee(ne,le,_e){return d.finiteRange&&(_e=0),y.inbox(ne-p,le-p,_e+Math.min(1,Math.abs(le-ne)/P)-1)}function j(ne){return ee(G(ne),Y(ne),M)}function X(ne){return ee(D(ne),R(ne),w)}function ae(ne){var le=ne[L];if(u){var _e=Math.abs(ne.rawS)||0;_>0?le+=_e:_<0&&(le-=_e)}return le}function he(ne){var le=_,_e=ne.b,fe=ae(ne);return y.inbox(_e-le,fe-le,M+(fe-le)/(fe-_e)-1)}function K(ne){var le=_,_e=ne.b,fe=ae(ne);return y.inbox(_e-le,fe-le,w+(fe-le)/(fe-_e)-1)}var J=s[h+"a"],U=s[L+"a"];P=Math.abs(J.r2c(J.range[1])-J.r2c(J.range[0]));function H(ne){return(E(ne)+S(ne))/2}var q=y.getDistanceFunction(g,E,S,H);if(y.getClosest(f,q,s),s.index!==!1&&f[s.index].p!==i){I||(G=function(ne){return Math.min(D(ne),ne.p-l.bargroupwidth/2)},Y=function(ne){return Math.max(R(ne),ne.p+l.bargroupwidth/2)});var re=s.index,Z=f[re],Q=m.base?Z.b+Z.s:Z.s;s[L+"0"]=s[L+"1"]=U.c2p(Z[L],!0),s[L+"LabelVal"]=Q;var ie=l.extents[l.extents.round(Z.p)];s[h+"0"]=J.c2p(x?G(Z):ie[0],!0),s[h+"1"]=J.c2p(x?Y(Z):ie[1],!0);var oe=Z.orig_p!==void 0;return s[h+"LabelVal"]=oe?Z.orig_p:Z.p,s.labelLabel=a(J,s[h+"LabelVal"],m[h+"hoverformat"]),s.valueLabel=a(U,s[L+"LabelVal"],m[L+"hoverformat"]),s.baseLabel=a(U,Z.b,m[L+"hoverformat"]),s.spikeDistance=(K(Z)+X(Z))/2,s[h+"Spike"]=J.c2p(Z.p,!0),T(Z,m,s),s.hovertemplate=m.hovertemplate,s}}function v(s,o){var b=o.mcc||s.marker.color,g=o.mlcc||s.marker.line.color,d=e(s,o);if(A.opacity(b))return b;if(A.opacity(g)&&d)return g}N.exports={hoverPoints:n,hoverOnBars:r,getTraceColor:v}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(t,N,V){N.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(t,N,V){var y=t("../../registry"),c=t("../../plots/cartesian/axes"),A=t("../../lib"),T=t("./layout_attributes");N.exports=function(e,a,i){function n(l,x){return A.coerce(e,a,T,l,x)}for(var r=!1,v=!1,s=!1,o={},b=n("barmode"),g=0;g<i.length;g++){var d=i[g];if(y.traceIs(d,"bar")&&d.visible)r=!0;else continue;if(b==="group"){var f=d.xaxis+d.yaxis;o[f]&&(s=!0),o[f]=!0}if(d.visible&&d.type==="histogram"){var m=c.getFromId({_fullLayout:a},d[d.orientation==="v"?"xaxis":"yaxis"]);m.type!=="category"&&(v=!0)}}if(!r){delete a.barmode;return}b!=="overlay"&&n("barnorm"),n("bargap",v&&!s?0:.2),n("bargroupgap")}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../lib/svg_text_utils"),e=t("../../components/color"),a=t("../../components/drawing"),i=t("../../registry"),n=t("../../plots/cartesian/axes").tickText,r=t("./uniform_text"),v=r.recordMinTextSize,s=r.clearMinTextSize,o=t("./style"),b=t("./helpers"),g=t("./constants"),d=t("./attributes"),f=d.text,m=d.textposition,l=t("../../components/fx/helpers").appendArrayPointValue,x=g.TEXTPAD;function u(G){return G.id}function M(G){if(G.ids)return u}function w(G,Y){return G<Y?1:-1}function p(G,Y,ee,j){var X=[],ae=[],he=j?Y:ee,K=j?ee:Y;return X[0]=he.c2p(G.s0,!0),ae[0]=K.c2p(G.p0,!0),X[1]=he.c2p(G.s1,!0),ae[1]=K.c2p(G.p1,!0),j?[X,ae]:[ae,X]}function _(G,Y,ee,j){if(!Y.uniformtext.mode&&h(ee)){var X;return j&&(X=j()),G.transition().duration(ee.duration).ease(ee.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()})}else return G}function h(G){return G&&G.duration>0}function L(G,Y,ee,j,X,ae){var he=Y.xaxis,K=Y.yaxis,J=G._fullLayout;X||(X={mode:J.barmode,norm:J.barmode,gap:J.bargap,groupgap:J.bargroupgap},s("bar",J));var U=A.makeTraceGroups(j,ee,"trace bars").each(function(H){var q=y.select(this),re=H[0].trace,Z=re.type==="waterfall",Q=re.type==="funnel",ie=re.type==="bar",oe=ie||Q,ne=0;Z&&re.connector.visible&&re.connector.mode==="between"&&(ne=re.connector.line.width/2);var le=re.orientation==="h",_e=h(X),fe=A.ensureSingle(q,"g","points"),ye=M(re),xe=fe.selectAll("g.point").data(A.identity,ye);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(be,ke){var De=y.select(this),He=p(be,he,K,le),Ae=He[0][0],Le=He[0][1],Ze=He[1][0],We=He[1][1],ze=(le?Le-Ae:We-Ze)===0;ze&&oe&&b.getLineWidth(re,be)&&(ze=!1),ze||(ze=!c(Ae)||!c(Le)||!c(Ze)||!c(We)),be.isBlank=ze,ze&&(le?Le=Ae:We=Ze),ne&&!ze&&(le?(Ae-=w(Ae,Le)*ne,Le+=w(Ae,Le)*ne):(Ze-=w(Ze,We)*ne,We+=w(Ze,We)*ne));var Ie,Ve;if(re.type==="waterfall"){if(!ze){var dt=re[be.dir].marker;Ie=dt.line.width,Ve=dt.color}}else Ie=b.getLineWidth(re,be),Ve=be.mc||re.marker.color;function Ft(Lt){var Xe=y.round(Ie/2%1,2);return X.gap===0&&X.groupgap===0?y.round(Math.round(Lt)-Xe,2):Lt}function Qt(Lt,Xe,it){return it&&Lt===Xe?Lt:Math.abs(Lt-Xe)>=2?Ft(Lt):Lt>Xe?Math.ceil(Lt):Math.floor(Lt)}if(!G._context.staticPlot){var Ot=e.opacity(Ve),Ct=Ot<1||Ie>.01?Ft:Qt;Ae=Ct(Ae,Le,le),Le=Ct(Le,Ae,le),Ze=Ct(Ze,We,!le),We=Ct(We,Ze,!le)}var jt=_(A.ensureSingle(De,"path"),J,X,ae);if(jt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Le-Ae)*(We-Ze))||ze&&G._context.staticPlot?"M0,0Z":"M"+Ae+","+Ze+"V"+We+"H"+Le+"V"+Ze+"Z").call(a.setClipUrl,Y.layerClipId,G),!J.uniformtext.mode&&_e){var Nt=a.makePointStyleFns(re);a.singlePointStyle(be,jt,re,Nt,G)}E(G,Y,De,H,ke,Ae,Le,Ze,We,X,ae),Y.layerClipId&&a.hideOutsideRangePoint(be,De.select("text"),he,K,re.xcalendar,re.ycalendar)});var me=re.cliponaxis===!1;a.setClipUrl(q,me?null:Y.layerClipId,G)});i.getComponentMethod("errorbars","plot")(G,U,Y,X)}function E(G,Y,ee,j,X,ae,he,K,J,U,H){var q=Y.xaxis,re=Y.yaxis,Z=G._fullLayout,Q;function ie(Xe,it,Ye){var Ee=A.ensureSingle(Xe,"text").text(it).attr({class:"bartext bartext-"+Q,"text-anchor":"middle","data-notex":1}).call(a.font,Ye).call(T.convertToTspans,G);return Ee}var oe=j[0].trace,ne=oe.orientation==="h",le=D(Z,j,X,q,re);Q=R(oe,X);var _e=U.mode==="stack"||U.mode==="relative",fe=j[X],ye=!_e||fe._outmost;if(!le||Q==="none"||(fe.isBlank||ae===he||K===J)&&(Q==="auto"||Q==="inside")){ee.select("text").remove();return}var xe=Z.font,me=o.getBarColor(j[X],oe),be=o.getInsideTextFont(oe,X,xe,me),ke=o.getOutsideTextFont(oe,X,xe),De=ee.datum();ne?q.type==="log"&&De.s0<=0&&(q.range[0]<q.range[1]?ae=0:ae=q._length):re.type==="log"&&De.s0<=0&&(re.range[0]<re.range[1]?K=re._length:K=0);var He=Math.abs(he-ae)-2*x,Ae=Math.abs(J-K)-2*x,Le,Ze,We,ze,Ie;if(Q==="outside"&&!ye&&!fe.hasB&&(Q="inside"),Q==="auto")if(ye){Q="inside",Ie=A.ensureUniformFontSize(G,be),Le=ie(ee,le,Ie),Ze=a.bBox(Le.node()),We=Ze.width,ze=Ze.height;var Ve=We>0&&ze>0,dt=We<=He&&ze<=Ae,Ft=We<=Ae&&ze<=He,Qt=ne?He>=We*(Ae/ze):Ae>=ze*(He/We);Ve&&(dt||Ft||Qt)?Q="inside":(Q="outside",Le.remove(),Le=null)}else Q="inside";if(!Le){Ie=A.ensureUniformFontSize(G,Q==="outside"?ke:be),Le=ie(ee,le,Ie);var Ot=Le.attr("transform");if(Le.attr("transform",""),Ze=a.bBox(Le.node()),We=Ze.width,ze=Ze.height,Le.attr("transform",Ot),We<=0||ze<=0){Le.remove();return}}var Ct=oe.textangle,jt,Nt;Q==="outside"?(Nt=oe.constraintext==="both"||oe.constraintext==="outside",jt=I(ae,he,K,J,Ze,{isHorizontal:ne,constrained:Nt,angle:Ct})):(Nt=oe.constraintext==="both"||oe.constraintext==="inside",jt=F(ae,he,K,J,Ze,{isHorizontal:ne,constrained:Nt,angle:Ct,anchor:oe.insidetextanchor})),jt.fontSize=Ie.size,v(oe.type==="histogram"?"bar":oe.type,jt,Z),fe.transform=jt;var Lt=_(Le,Z,U,H);A.setTransormAndDisplay(Lt,jt)}function S(G){return G==="auto"?0:G}function P(G,Y){var ee=Math.PI/180*Y,j=Math.abs(Math.sin(ee)),X=Math.abs(Math.cos(ee));return{x:G.width*X+G.height*j,y:G.width*j+G.height*X}}function F(G,Y,ee,j,X,ae){var he=!!ae.isHorizontal,K=!!ae.constrained,J=ae.angle||0,U=ae.anchor||"end",H=U==="end",q=U==="start",re=ae.leftToRight||0,Z=(re+1)/2,Q=1-Z,ie=X.width,oe=X.height,ne=Math.abs(Y-G),le=Math.abs(j-ee),_e=ne>2*x&&le>2*x?x:0;ne-=2*_e,le-=2*_e;var fe=S(J);J==="auto"&&!(ie<=ne&&oe<=le)&&(ie>ne||oe>le)&&(!(ie>le||oe>ne)||ie<oe!=ne<le)&&(fe+=90);var ye=P(X,fe),xe=1;K&&(xe=Math.min(1,ne/ye.x,le/ye.y));var me=X.left*Q+X.right*Z,be=(X.top+X.bottom)/2,ke=(G+x)*Q+(Y-x)*Z,De=(ee+j)/2,He=0,Ae=0;if(q||H){var Le=(he?ye.x:ye.y)/2,Ze=he?w(G,Y):w(ee,j);he?q?(ke=G+Ze*_e,He=-Ze*Le):(ke=Y-Ze*_e,He=Ze*Le):q?(De=ee+Ze*_e,Ae=-Ze*Le):(De=j-Ze*_e,Ae=Ze*Le)}return{textX:me,textY:be,targetX:ke,targetY:De,anchorX:He,anchorY:Ae,scale:xe,rotate:fe}}function I(G,Y,ee,j,X,ae){var he=!!ae.isHorizontal,K=!!ae.constrained,J=ae.angle||0,U=X.width,H=X.height,q=Math.abs(Y-G),re=Math.abs(j-ee),Z;he?Z=re>2*x?x:0:Z=q>2*x?x:0;var Q=1;K&&(Q=he?Math.min(1,re/H):Math.min(1,q/U));var ie=S(J),oe=P(X,ie),ne=(he?oe.x:oe.y)/2,le=(X.left+X.right)/2,_e=(X.top+X.bottom)/2,fe=(G+Y)/2,ye=(ee+j)/2,xe=0,me=0,be=he?w(Y,G):w(ee,j);return he?(fe=Y-be*Z,xe=be*ne):(ye=j+be*Z,me=-be*ne),{textX:le,textY:_e,targetX:fe,targetY:ye,anchorX:xe,anchorY:me,scale:Q,rotate:ie}}function D(G,Y,ee,j,X){var ae=Y[0].trace,he=ae.texttemplate,K;return he?K=O(G,Y,ee,j,X):ae.textinfo?K=z(Y,ee,j,X):K=b.getValue(ae.text,ee),b.coerceString(f,K)}function R(G,Y){var ee=b.getValue(G.textposition,Y);return b.coerceEnumerated(m,ee)}function O(G,Y,ee,j,X){var ae=Y[0].trace,he=A.castOption(ae,ee,"texttemplate");if(!he)return"";var K=ae.type==="histogram",J=ae.type==="waterfall",U=ae.type==="funnel",H=ae.orientation==="h",q,re,Z,Q;H?(q="y",re=X,Z="x",Q=j):(q="x",re=j,Z="y",Q=X);function ie(xe){return n(re,re.c2l(xe),!0).text}function oe(xe){return n(Q,Q.c2l(xe),!0).text}var ne=Y[ee],le={};le.label=ne.p,le.labelLabel=le[q+"Label"]=ie(ne.p);var _e=A.castOption(ae,ne.i,"text");(_e===0||_e)&&(le.text=_e),le.value=ne.s,le.valueLabel=le[Z+"Label"]=oe(ne.s);var fe={};l(fe,ae,ne.i),(K||fe.x===void 0)&&(fe.x=H?le.value:le.label),(K||fe.y===void 0)&&(fe.y=H?le.label:le.value),(K||fe.xLabel===void 0)&&(fe.xLabel=H?le.valueLabel:le.labelLabel),(K||fe.yLabel===void 0)&&(fe.yLabel=H?le.labelLabel:le.valueLabel),J&&(le.delta=+ne.rawS||ne.s,le.deltaLabel=oe(le.delta),le.final=ne.v,le.finalLabel=oe(le.final),le.initial=le.final-le.delta,le.initialLabel=oe(le.initial)),U&&(le.value=ne.s,le.valueLabel=oe(le.value),le.percentInitial=ne.begR,le.percentInitialLabel=A.formatPercent(ne.begR),le.percentPrevious=ne.difR,le.percentPreviousLabel=A.formatPercent(ne.difR),le.percentTotal=ne.sumR,le.percenTotalLabel=A.formatPercent(ne.sumR));var ye=A.castOption(ae,ne.i,"customdata");return ye&&(le.customdata=ye),A.texttemplateString(he,le,G._d3locale,fe,le,ae._meta||{})}function z(G,Y,ee,j){var X=G[0].trace,ae=X.orientation==="h",he=X.type==="waterfall",K=X.type==="funnel";function J(ye){var xe=ae?j:ee;return n(xe,ye,!0).text}function U(ye){var xe=ae?ee:j;return n(xe,+ye,!0).text}var H=X.textinfo,q=G[Y],re=H.split("+"),Z=[],Q,ie=function(ye){return re.indexOf(ye)!==-1};if(ie("label")&&Z.push(J(G[Y].p)),ie("text")&&(Q=A.castOption(X,q.i,"text"),(Q===0||Q)&&Z.push(Q)),he){var oe=+q.rawS||q.s,ne=q.v,le=ne-oe;ie("initial")&&Z.push(U(le)),ie("delta")&&Z.push(U(oe)),ie("final")&&Z.push(U(ne))}if(K){ie("value")&&Z.push(U(q.s));var _e=0;ie("percent initial")&&_e++,ie("percent previous")&&_e++,ie("percent total")&&_e++;var fe=_e>1;ie("percent initial")&&(Q=A.formatPercent(q.begR),fe&&(Q+=" of initial"),Z.push(Q)),ie("percent previous")&&(Q=A.formatPercent(q.difR),fe&&(Q+=" of previous"),Z.push(Q)),ie("percent total")&&(Q=A.formatPercent(q.sumR),fe&&(Q+=" of total"),Z.push(Q))}return Z.join("<br>")}N.exports={plot:L,toMoveInsideBar:F}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(t,N,V){N.exports=function(A,T){var e=A.cd,a=A.xaxis,i=A.yaxis,n=e[0].trace,r=n.type==="funnel",v=n.orientation==="h",s=[],o;if(T===!1)for(o=0;o<e.length;o++)e[o].selected=0;else for(o=0;o<e.length;o++){var b=e[o],g="ct"in b?b.ct:y(b,a,i,v,r);T.contains(g,!1,o,A)?(s.push({pointNumber:o,x:a.c2d(b.x),y:i.c2d(b.y)}),b.selected=1):b.selected=0}return s};function y(c,A,T,e,a){var i=A.c2p(e?c.s0:c.p0,!0),n=A.c2p(e?c.s1:c.p1,!0),r=T.c2p(e?c.p0:c.s0,!0),v=T.c2p(e?c.p1:c.s1,!0);return a?[(i+n)/2,(r+v)/2]:e?[n,(r+v)/2]:[(i+n)/2,v]}},{}],670:[function(t,N,V){N.exports=A;var y=t("../../lib").distinctVals,c=t("../../constants/numerical").BADNUM;function A(T,e){this.traces=T,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var a=1/0,i=[],n=0;n<T.length;n++){for(var r=T[n],v=0;v<r.length;v++){var s=r[v];s.p!==c&&i.push(s.p)}r[0]&&r[0].width1&&(a=Math.min(r[0].width1,a))}this.positions=i;var o=y(i);this.distinctPositions=o.vals,o.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(o.minDiff,a);var b=(e.posAxis||{}).type;(b==="category"||b==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}A.prototype.put=function(e,a){var i=this.getLabel(e,a),n=this.bins[i]||0;return this.bins[i]=n+a,n},A.prototype.get=function(e,a){var i=this.getLabel(e,a);return this.bins[i]||0},A.prototype.getLabel=function(e,a){var i=a<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?e:Math.round(e/this.binWidth);return i+n}},{"../../constants/numerical":491,"../../lib":515}],671:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/color"),A=t("../../components/drawing"),T=t("../../lib"),e=t("../../registry"),a=t("./uniform_text").resizeText,i=t("./attributes"),n=i.textfont,r=i.insidetextfont,v=i.outsidetextfont,s=t("./helpers");function o(_){var h=y.select(_).selectAll("g.barlayer").selectAll("g.trace");a(_,h,"bar");var L=h.size(),E=_._fullLayout;h.style("opacity",function(S){return S[0].trace.opacity}).each(function(S){(E.barmode==="stack"&&L>1||E.bargap===0&&E.bargroupgap===0&&!S[0].trace.marker.line.width)&&y.select(this).attr("shape-rendering","crispEdges")}),h.selectAll("g.points").each(function(S){var P=y.select(this),F=S[0].trace;b(P,F,_)}),e.getComponentMethod("errorbars","style")(h)}function b(_,h,L){A.pointStyle(_.selectAll("path"),h,L),g(_,h,L)}function g(_,h,L){_.selectAll("text").each(function(E){var S=y.select(this),P=T.ensureUniformFontSize(L,l(S,E,h,L));A.font(S,P)})}function d(_,h,L){var E=h[0].trace;E.selectedpoints?f(L,E,_):(b(L,E,_),e.getComponentMethod("errorbars","style")(L))}function f(_,h,L){A.selectedPointStyle(_.selectAll("path"),h),m(_.selectAll("text"),h,L)}function m(_,h,L){_.each(function(E){var S=y.select(this),P;if(E.selected){P=T.ensureUniformFontSize(L,l(S,E,h,L));var F=h.selected.textfont&&h.selected.textfont.color;F&&(P.color=F),A.font(S,P)}else A.selectedTextStyle(S,h)})}function l(_,h,L,E){var S=E._fullLayout.font,P=L.textfont;if(_.classed("bartext-inside")){var F=p(h,L);P=u(L,h.i,S,F)}else _.classed("bartext-outside")&&(P=M(L,h.i,S));return P}function x(_,h,L){return w(n,_.textfont,h,L)}function u(_,h,L,E){var S=x(_,h,L),P=_._input.textfont===void 0||_._input.textfont.color===void 0||Array.isArray(_.textfont.color)&&_.textfont.color[h]===void 0;return P&&(S={color:c.contrast(E),family:S.family,size:S.size}),w(r,_.insidetextfont,h,S)}function M(_,h,L){var E=x(_,h,L);return w(v,_.outsidetextfont,h,E)}function w(_,h,L,E){h=h||{};var S=s.getValue(h.family,L),P=s.getValue(h.size,L),F=s.getValue(h.color,L);return{family:s.coerceString(_.family,S,E.family),size:s.coerceNumber(_.size,P,E.size),color:s.coerceColor(_.color,F,E.color)}}function p(_,h){return h.type==="waterfall"?h[_.dir].marker.color:_.mcc||_.mc||h.marker.color}N.exports={style:o,styleTextPoints:g,styleOnSelect:d,getInsideTextFont:u,getOutsideTextFont:M,getBarColor:p,resizeText:a}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(t,N,V){var y=t("../../components/color"),c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../lib").coercePattern;N.exports=function(a,i,n,r,v){var s=n("marker.color",r),o=c(a,"marker");o&&A(a,i,v,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",y.defaultLine),c(a,"marker.line")&&A(a,i,v,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),T(n,"marker.pattern",s,o),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib");function A(i,n,r){var v=i._fullLayout,s=v["_"+r+"Text_minsize"];if(s){var o=v.uniformtext.mode==="hide",b;switch(r){case"funnelarea":case"pie":case"sunburst":b="g.slice";break;case"treemap":case"icicle":b="g.slice, g.pathbar";break;default:b="g.points > g.point"}n.selectAll(b).each(function(g){var d=g.transform;if(d){d.scale=o&&d.hide?0:s/d.fontSize;var f=y.select(this).select("text");c.setTransormAndDisplay(f,d)}})}}function T(i,n,r){if(r.uniformtext.mode){var v=a(i),s=r.uniformtext.minsize,o=n.scale*n.fontSize;n.hide=o<s,r[v]=r[v]||1/0,n.hide||(r[v]=Math.min(r[v],Math.max(o,s)))}}function e(i,n){var r=a(i);n[r]=void 0}function a(i){return"_"+i+"Text_minsize"}N.exports={recordMinTextSize:T,clearMinTextSize:e,resizeText:A}},{"../../lib":515,"@plotly/d3":58}],674:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../lib/extend").extendFlat,A=t("../scatterpolar/attributes"),T=t("../bar/attributes");N.exports={r:A.r,theta:A.theta,r0:A.r0,dr:A.dr,theta0:A.theta0,dtheta:A.dtheta,thetaunit:A.thetaunit,base:c({},T.base,{}),offset:c({},T.offset,{}),width:c({},T.width,{}),text:c({},T.text,{}),hovertext:c({},T.hovertext,{}),marker:T.marker,hoverinfo:A.hoverinfo,hovertemplate:y(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(t,N,V){var y=t("../../components/colorscale/helpers").hasColorscale,c=t("../../components/colorscale/calc"),A=t("../bar/arrays_to_calcdata"),T=t("../bar/cross_trace_calc").setGroupPositions,e=t("../scatter/calc_selection"),a=t("../../registry").traceIs,i=t("../../lib").extendFlat;function n(v,s){for(var o=v._fullLayout,b=s.subplot,g=o[b].radialaxis,d=o[b].angularaxis,f=g.makeCalcdata(s,"r"),m=d.makeCalcdata(s,"theta"),l=s._length,x=new Array(l),u=f,M=m,w=0;w<l;w++)x[w]={p:M[w],s:u[w]};function p(_){var h=s[_];h!==void 0&&(s["_"+_]=Array.isArray(h)?d.makeCalcdata(s,_):d.d2c(h,s.thetaunit))}return d.type==="linear"&&(p("width"),p("offset")),y(s,"marker")&&c(v,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),y(s,"marker.line")&&c(v,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),A(x,s),e(x,s),x}function r(v,s,o){for(var b=v.calcdata,g=[],d=0;d<b.length;d++){var f=b[d],m=f[0].trace;m.visible===!0&&a(m,"bar")&&m.subplot===o&&g.push(f)}var l=i({},s.radialaxis,{_id:"x"}),x=s.angularaxis;T(v,x,l,g,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}N.exports={calc:n,crossTraceCalc:r}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(t,N,V){var y=t("../../lib"),c=t("../scatterpolar/defaults").handleRThetaDefaults,A=t("../bar/style_defaults"),T=t("./attributes");N.exports=function(a,i,n,r){function v(o,b){return y.coerce(a,i,T,o,b)}var s=c(a,i,r,v);if(!s){i.visible=!1;return}v("thetaunit"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate"),A(a,i,v,n,r),y.coerceSelectionMarkerOpacity(i,v)}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(t,N,V){var y=t("../../components/fx"),c=t("../../lib"),A=t("../bar/hover").getTraceColor,T=c.fillText,e=t("../scatterpolar/hover").makeHoverPointText,a=t("../../plots/polar/helpers").isPtInsidePolygon;N.exports=function(n,r,v){var s=n.cd,o=s[0].trace,b=n.subplot,g=b.radialAxis,d=b.angularAxis,f=b.vangles,m=f?a:c.isPtInsideSector,l=n.maxHoverDistance,x=d._period||2*Math.PI,u=Math.abs(g.g2p(Math.sqrt(r*r+v*v))),M=Math.atan2(v,r);g.range[0]>g.range[1]&&(M+=Math.PI);var w=function(L){return m(u,M,[L.rp0,L.rp1],[L.thetag0,L.thetag1],f)?l+Math.min(1,Math.abs(L.thetag1-L.thetag0)/x)-1+(L.rp1-u)/(L.rp1-L.rp0)-1:1/0};if(y.getClosest(s,w,n),n.index!==!1){var p=n.index,_=s[p];n.x0=n.x1=_.ct[0],n.y0=n.y1=_.ct[1];var h=c.extendFlat({},_,{r:_.s,theta:_.p});return T(_,o,n),e(h,o,b,n),n.hovertemplate=o.hovertemplate,n.color=A(o,_),n.xLabelVal=n.yLabelVal=void 0,_.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(t,N,V){N.exports={moduleType:"trace",name:"barpolar",basePlotModule:t("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("../scatterpolar/format_labels"),style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(t,N,V){N.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(A,T,e){var a={},i;function n(s,o){return y.coerce(A[i]||{},T[i],c,s,o)}for(var r=0;r<e.length;r++){var v=e[r];v.type==="barpolar"&&v.visible===!0&&(i=v.subplot,a[i]||(n("barmode"),n("bargap"),a[i]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(t,N,V){var y=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../components/drawing"),e=t("../../plots/polar/helpers");N.exports=function(n,r,v){var s=r.xaxis,o=r.yaxis,b=r.radialAxis,g=r.angularAxis,d=a(r),f=r.layers.frontplot.select("g.barlayer");A.makeTraceGroups(f,v,"trace bars").each(function(){var m=y.select(this),l=A.ensureSingle(m,"g","points"),x=l.selectAll("g.point").data(A.identity);x.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(u){var M=y.select(this),w=u.rp0=b.c2p(u.s0),p=u.rp1=b.c2p(u.s1),_=u.thetag0=g.c2g(u.p0),h=u.thetag1=g.c2g(u.p1),L;if(!c(w)||!c(p)||!c(_)||!c(h)||w===p||_===h)L="M0,0Z";else{var E=b.c2g(u.s1),S=(_+h)/2;u.ct=[s.c2p(E*Math.cos(S)),o.c2p(E*Math.sin(S))],L=d(w,p,_,h)}A.ensureSingle(M,"path").attr("d",L)}),T.setClipUrl(m,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,n)})};function a(i){var n=i.cxx,r=i.cyy;return i.vangles?function(v,s,o,b){var g,d;A.angleDelta(o,b)>0?(g=o,d=b):(g=b,d=o);var f=e.findEnclosingVertexAngles(g,i.vangles)[0],m=e.findEnclosingVertexAngles(d,i.vangles)[1],l=[f,(g+d)/2,m];return e.pathPolygonAnnulus(v,s,g,d,l,n,r)}:function(v,s,o,b){return A.pathAnnulus(v,s,o,b,n,r)}}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(t,N,V){var y=t("../scatter/attributes"),c=t("../bar/attributes"),A=t("../../components/color/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../lib/extend").extendFlat,i=y.marker,n=i.line;N.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:a({},i.angle,{arrayOk:!1,editType:"calc"}),size:a({},i.size,{arrayOk:!1,editType:"calc"}),color:a({},i.color,{arrayOk:!1,editType:"style"}),line:{color:a({},n.color,{arrayOk:!1,dflt:A.defaultLine,editType:"style"}),width:a({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:y.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:c.offsetgroup,alignmentgroup:c.alignmentgroup,selected:{marker:y.selected.marker,editType:"style"},unselected:{marker:y.unselected.marker,editType:"style"},text:a({},y.text,{}),hovertext:a({},y.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../plots/cartesian/axes"),A=t("../../plots/cartesian/align_period"),T=t("../../lib"),e=t("../../constants/numerical").BADNUM,a=T._;N.exports=function(M,w){var p=M._fullLayout,_=c.getFromId(M,w.xaxis||"x"),h=c.getFromId(M,w.yaxis||"y"),L=[],E=w.type==="violin"?"_numViolins":"_numBoxes",S,P,F,I,D,R,O;w.orientation==="h"?(F=_,I="x",D=h,R="y",O=!!w.yperiodalignment):(F=h,I="y",D=_,R="x",O=!!w.xperiodalignment);var z=i(w,R,D,p[E]),G=z[0],Y=z[1],ee=T.distinctVals(G,D),j=ee.vals,X=ee.minDiff/2,ae,he,K,J,U,H,q=(w.boxpoints||w.points)==="all"?T.identity:function(Ot){return Ot.v<ae.lf||Ot.v>ae.uf};if(w._hasPreCompStats){var re=w[I],Z=function(Ot){return F.d2c((w[Ot]||[])[S])},Q=1/0,ie=-1/0;for(S=0;S<w._length;S++){var oe=G[S];if(!!y(oe)){if(ae={},ae.pos=ae[R]=oe,O&&Y&&(ae.orig_p=Y[S]),ae.q1=Z("q1"),ae.med=Z("median"),ae.q3=Z("q3"),he=[],re&&T.isArrayOrTypedArray(re[S]))for(P=0;P<re[S].length;P++)H=F.d2c(re[S][P]),H!==e&&(U={v:H,i:[S,P]},s(U,w,[S,P]),he.push(U));if(ae.pts=he.sort(b),K=ae[I]=he.map(g),J=K.length,ae.med!==e&&ae.q1!==e&&ae.q3!==e&&ae.med>=ae.q1&&ae.q3>=ae.med){var ne=Z("lowerfence");ae.lf=ne!==e&&ne<=ae.q1?ne:d(ae,K,J);var le=Z("upperfence");ae.uf=le!==e&&le>=ae.q3?le:f(ae,K,J);var _e=Z("mean");ae.mean=_e!==e?_e:J?T.mean(K,J):(ae.q1+ae.q3)/2;var fe=Z("sd");ae.sd=_e!==e&&fe>=0?fe:J?T.stdev(K,J,ae.mean):ae.q3-ae.q1,ae.lo=m(ae),ae.uo=l(ae);var ye=Z("notchspan");ye=ye!==e&&ye>0?ye:x(ae,J),ae.ln=ae.med-ye,ae.un=ae.med+ye;var xe=ae.lf,me=ae.uf;w.boxpoints&&K.length&&(xe=Math.min(xe,K[0]),me=Math.max(me,K[J-1])),w.notched&&(xe=Math.min(xe,ae.ln),me=Math.max(me,ae.un)),ae.min=xe,ae.max=me}else{T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+ae.q1,"median = "+ae.med,"q3 = "+ae.q3].join(`
`));var be;ae.med!==e?be=ae.med:ae.q1!==e?ae.q3!==e?be=(ae.q1+ae.q3)/2:be=ae.q1:ae.q3!==e?be=ae.q3:be=0,ae.med=be,ae.q1=ae.q3=be,ae.lf=ae.uf=be,ae.mean=ae.sd=be,ae.ln=ae.un=be,ae.min=ae.max=be}Q=Math.min(Q,ae.min),ie=Math.max(ie,ae.max),ae.pts2=he.filter(q),L.push(ae)}}w._extremes[F._id]=c.findExtremes(F,[Q,ie],{padded:!0})}else{var ke=F.makeCalcdata(w,I),De=n(j,X),He=j.length,Ae=r(He);for(S=0;S<w._length;S++)if(H=ke[S],!!y(H)){var Le=T.findBin(G[S],De);Le>=0&&Le<He&&(U={v:H,i:S},s(U,w,S),Ae[Le].push(U))}var Ze=1/0,We=-1/0,ze=w.quartilemethod,Ie=ze==="exclusive",Ve=ze==="inclusive";for(S=0;S<He;S++)if(Ae[S].length>0){if(ae={},ae.pos=ae[R]=j[S],he=ae.pts=Ae[S].sort(b),K=ae[I]=he.map(g),J=K.length,ae.min=K[0],ae.max=K[J-1],ae.mean=T.mean(K,J),ae.sd=T.stdev(K,J,ae.mean),ae.med=T.interp(K,.5),J%2&&(Ie||Ve)){var dt,Ft;Ie?(dt=K.slice(0,J/2),Ft=K.slice(J/2+1)):Ve&&(dt=K.slice(0,J/2+1),Ft=K.slice(J/2)),ae.q1=T.interp(dt,.5),ae.q3=T.interp(Ft,.5)}else ae.q1=T.interp(K,.25),ae.q3=T.interp(K,.75);ae.lf=d(ae,K,J),ae.uf=f(ae,K,J),ae.lo=m(ae),ae.uo=l(ae);var Qt=x(ae,J);ae.ln=ae.med-Qt,ae.un=ae.med+Qt,Ze=Math.min(Ze,ae.ln),We=Math.max(We,ae.un),ae.pts2=he.filter(q),L.push(ae)}w._extremes[F._id]=c.findExtremes(F,w.notched?ke.concat([Ze,We]):ke,{padded:!0})}return o(L,w),L.length>0?(L[0].t={num:p[E],dPos:X,posLetter:R,valLetter:I,labels:{med:a(M,"median:"),min:a(M,"min:"),q1:a(M,"q1:"),q3:a(M,"q3:"),max:a(M,"max:"),mean:w.boxmean==="sd"?a(M,"mean \xB1 \u03C3:"):a(M,"mean:"),lf:a(M,"lower fence:"),uf:a(M,"upper fence:")}},p[E]++,L):[{t:{empty:!0}}]};function i(u,M,w,p){var _=M in u,h=M+"0"in u,L="d"+M in u;if(_||h&&L){var E=w.makeCalcdata(u,M),S=A(u,w,M,E).vals;return[S,E]}var P;h?P=u[M+"0"]:"name"in u&&(w.type==="category"||y(u.name)&&["linear","log"].indexOf(w.type)!==-1||T.isDateTime(u.name)&&w.type==="date")?P=u.name:P=p;for(var F=w.type==="multicategory"?w.r2c_just_indices(P):w.d2c(P,0,u[M+"calendar"]),I=u._length,D=new Array(I),R=0;R<I;R++)D[R]=F;return[D]}function n(u,M){for(var w=u.length,p=new Array(w+1),_=0;_<w;_++)p[_]=u[_]-M;return p[w]=u[w-1]+M,p}function r(u){for(var M=new Array(u),w=0;w<u;w++)M[w]=[];return M}var v={text:"tx",hovertext:"htx"};function s(u,M,w){for(var p in v)T.isArrayOrTypedArray(M[p])&&(Array.isArray(w)?T.isArrayOrTypedArray(M[p][w[0]])&&(u[v[p]]=M[p][w[0]][w[1]]):u[v[p]]=M[p][w])}function o(u,M){if(T.isArrayOrTypedArray(M.selectedpoints))for(var w=0;w<u.length;w++){for(var p=u[w].pts||[],_={},h=0;h<p.length;h++)_[p[h].i]=h;T.tagSelected(p,M,_)}}function b(u,M){return u.v-M.v}function g(u){return u.v}function d(u,M,w){return w===0?u.q1:Math.min(u.q1,M[Math.min(T.findBin(2.5*u.q1-1.5*u.q3,M,!0)+1,w-1)])}function f(u,M,w){return w===0?u.q3:Math.max(u.q3,M[Math.max(T.findBin(2.5*u.q3-1.5*u.q1,M),0)])}function m(u){return 4*u.q1-3*u.q3}function l(u){return 4*u.q3-3*u.q1}function x(u,M){return M===0?0:1.57*(u.q3-u.q1)/Math.sqrt(M)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../lib"),A=t("../../plots/cartesian/constraints").getAxisGroup,T=["v","h"];function e(i,n){for(var r=i.calcdata,v=n.xaxis,s=n.yaxis,o=0;o<T.length;o++){for(var b=T[o],g=b==="h"?s:v,d=[],f=0;f<r.length;f++){var m=r[f],l=m[0].t,x=m[0].trace;x.visible===!0&&(x.type==="box"||x.type==="candlestick")&&!l.empty&&(x.orientation||"v")===b&&x.xaxis===v._id&&x.yaxis===s._id&&d.push(f)}a("box",i,d,g)}}function a(i,n,r,v){var s=n.calcdata,o=n._fullLayout,b=v._id,g=b.charAt(0),d,f,m,l=[],x=0;for(d=0;d<r.length;d++)for(m=s[r[d]],f=0;f<m.length;f++)l.push(v.c2l(m[f].pos,!0)),x+=(m[f].pts2||[]).length;if(!!l.length){var u=c.distinctVals(l);(v.type==="category"||v.type==="multicategory")&&(u.minDiff=1);var M=u.minDiff/2;y.minDtick(v,u.minDiff,u.vals[0],!0);var w=i==="violin"?"_numViolins":"_numBoxes",p=o[w],_=o[i+"mode"]==="group"&&p>1,h=1-o[i+"gap"],L=1-o[i+"groupgap"];for(d=0;d<r.length;d++){m=s[r[d]];var E=m[0].trace,S=m[0].t,P=E.width,F=E.side,I,D,R,O;if(P)I=D=O=P/2,R=0;else if(I=M,_){var z=A(o,v._id)+E.orientation,G=o._alignmentOpts[z]||{},Y=G[E.alignmentgroup]||{},ee=Object.keys(Y.offsetGroups||{}).length,j=ee||p,X=ee?E._offsetIndex:S.num;D=I*h*L/j,R=2*I*(-.5+(X+.5)/j)*h,O=I*h/j}else D=I*h*L,R=0,O=I;S.dPos=I,S.bPos=R,S.bdPos=D,S.wHover=O;var ae,he,K=R+D,J,U,H,q,re,Z,Q=Boolean(P),ie=(E.boxpoints||E.points)&&x>0;if(F==="positive"?(ae=I*(P?1:.5),J=K,he=J=R):F==="negative"?(ae=J=R,he=I*(P?1:.5),U=K):(ae=he=I,J=U=K),ie){var oe=E.pointpos,ne=E.jitter,le=E.marker.size/2,_e=0;oe+ne>=0&&(_e=K*(oe+ne),_e>ae?(Q=!0,re=le,H=_e):_e>J&&(re=le,H=ae)),_e<=ae&&(H=ae);var fe=0;oe-ne<=0&&(fe=-K*(oe-ne),fe>he?(Q=!0,Z=le,q=fe):fe>U&&(Z=le,q=he)),fe<=he&&(q=he)}else H=ae,q=he;var ye=new Array(m.length);for(f=0;f<m.length;f++)ye[f]=m[f].pos;E._extremes[b]=y.findExtremes(v,ye,{padded:Q,vpadminus:q,vpadplus:H,vpadLinearized:!0,ppadminus:{x:Z,y:re}[g],ppadplus:{x:re,y:Z}[g]})}}}N.exports={crossTraceCalc:e,setPositionOffset:a}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(t,N,V){var y=t("../../lib"),c=t("../../registry"),A=t("../../components/color"),T=t("../scatter/period_defaults"),e=t("../bar/defaults").handleGroupingDefaults,a=t("../../plots/cartesian/axis_autotype"),i=t("./attributes");function n(o,b,g,d){function f(_,h){return y.coerce(o,b,i,_,h)}if(r(o,b,f,d),b.visible!==!1){T(o,b,d,f),f("xhoverformat"),f("yhoverformat");var m=b._hasPreCompStats;m&&(f("lowerfence"),f("upperfence")),f("line.color",(o.marker||{}).color||g),f("line.width"),f("fillcolor",A.addOpacity(b.line.color,.5));var l=!1;if(m){var x=f("mean"),u=f("sd");x&&x.length&&(l=!0,u&&u.length&&(l="sd"))}f("boxmean",l),f("whiskerwidth"),f("width"),f("quartilemethod");var M=!1;if(m){var w=f("notchspan");w&&w.length&&(M=!0)}else y.validate(o.notchwidth,i.notchwidth)&&(M=!0);var p=f("notched",M);p&&f("notchwidth"),v(o,b,f,{prefix:"box"})}}function r(o,b,g,d){function f(ee){var j=0;return ee&&ee.length&&(j+=1,y.isArrayOrTypedArray(ee[0])&&ee[0].length&&(j+=1)),j}function m(ee){return y.validate(o[ee],i[ee])}var l=g("y"),x=g("x"),u;if(b.type==="box"){var M=g("q1"),w=g("median"),p=g("q3");b._hasPreCompStats=M&&M.length&&w&&w.length&&p&&p.length,u=Math.min(y.minRowLength(M),y.minRowLength(w),y.minRowLength(p))}var _=f(l),h=f(x),L=_&&y.minRowLength(l),E=h&&y.minRowLength(x),S=d.calendar,P={autotypenumbers:d.autotypenumbers},F,I;if(b._hasPreCompStats)switch(String(h)+String(_)){case"00":var D=m("x0")||m("dx"),R=m("y0")||m("dy");R&&!D?F="h":F="v",I=u;break;case"10":F="v",I=Math.min(u,E);break;case"20":F="h",I=Math.min(u,x.length);break;case"01":F="h",I=Math.min(u,L);break;case"02":F="v",I=Math.min(u,l.length);break;case"12":F="v",I=Math.min(u,E,l.length);break;case"21":F="h",I=Math.min(u,x.length,L);break;case"11":I=0;break;case"22":var O=!1,z;for(z=0;z<x.length;z++)if(a(x[z],S,P)==="category"){O=!0;break}if(O)F="v",I=Math.min(u,E,l.length);else{for(z=0;z<l.length;z++)if(a(l[z],S,P)==="category"){O=!0;break}O?(F="h",I=Math.min(u,x.length,L)):(F="v",I=Math.min(u,E,l.length))}break}else _>0?(F="v",h>0?I=Math.min(E,L):I=Math.min(L)):h>0?(F="h",I=Math.min(E)):I=0;if(!I){b.visible=!1;return}b._length=I;var G=g("orientation",F);b._hasPreCompStats?G==="v"&&h===0?(g("x0",0),g("dx",1)):G==="h"&&_===0&&(g("y0",0),g("dy",1)):G==="v"&&h===0?g("x0"):G==="h"&&_===0&&g("y0");var Y=c.getComponentMethod("calendars","handleTraceDefaults");Y(o,b,["x","y"],d)}function v(o,b,g,d){var f=d.prefix,m=y.coerce2(o,b,i,"marker.outliercolor"),l=g("marker.line.outliercolor"),x="outliers";b._hasPreCompStats?x="all":(m||l)&&(x="suspectedoutliers");var u=g(f+"points",x);u?(g("jitter",u==="all"?.3:0),g("pointpos",u==="all"?-1.5:0),g("marker.symbol"),g("marker.opacity"),g("marker.size"),g("marker.angle"),g("marker.color",b.line.color),g("marker.line.color"),g("marker.line.width"),u==="suspectedoutliers"&&(g("marker.line.outliercolor",b.marker.color),g("marker.line.outlierwidth")),g("selected.marker.color"),g("unselected.marker.color"),g("selected.marker.size"),g("unselected.marker.size"),g("text"),g("hovertext")):delete b.marker;var M=g("hoveron");(M==="all"||M.indexOf("points")!==-1)&&g("hovertemplate"),y.coerceSelectionMarkerOpacity(b,g)}function s(o,b){var g,d;function f(x){return y.coerce(d._input,d,i,x)}for(var m=0;m<o.length;m++){d=o[m];var l=d.type;(l==="box"||l==="violin")&&(g=d._input,b[l+"mode"]==="group"&&e(g,d,b,f))}}N.exports={supplyDefaults:n,crossTraceDefaults:s,handleSampleDefaults:r,handlePointsDefaults:v}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(t,N,V){N.exports=function(c,A){return A.hoverOnBox&&(c.hoverOnBox=A.hoverOnBox),"xVal"in A&&(c.x=A.xVal),"yVal"in A&&(c.y=A.yVal),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),c}},{}],687:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../lib"),A=t("../../components/fx"),T=t("../../components/color"),e=c.fillText;function a(r,v,s,o){var b=r.cd,g=b[0].trace,d=g.hoveron,f=[],m;return d.indexOf("boxes")!==-1&&(f=f.concat(i(r,v,s,o))),d.indexOf("points")!==-1&&(m=n(r,v,s)),o==="closest"?m?[m]:f:(m&&f.push(m),f)}function i(r,v,s,o){var b=r.cd,g=r.xa,d=r.ya,f=b[0].trace,m=b[0].t,l=f.type==="violin",x,u,M,w,p,_,h,L,E,S,P,F=m.bdPos,I,D,R=m.wHover,O=function(fe){return M.c2l(fe.pos)+m.bPos-M.c2l(_)};l&&f.side!=="both"?(f.side==="positive"&&(E=function(fe){var ye=O(fe);return A.inbox(ye,ye+R,S)},I=F,D=0),f.side==="negative"&&(E=function(fe){var ye=O(fe);return A.inbox(ye-R,ye,S)},I=0,D=F)):(E=function(fe){var ye=O(fe);return A.inbox(ye-R,ye+R,S)},I=D=F);var z;l?z=function(fe){return A.inbox(fe.span[0]-p,fe.span[1]-p,S)}:z=function(fe){return A.inbox(fe.min-p,fe.max-p,S)},f.orientation==="h"?(p=v,_=s,h=z,L=E,x="y",M=d,u="x",w=g):(p=s,_=v,h=E,L=z,x="x",M=g,u="y",w=d);var G=Math.min(1,F/Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0])));S=r.maxHoverDistance-G,P=r.maxSpikeDistance-G;function Y(fe){return(h(fe)+L(fe))/2}var ee=A.getDistanceFunction(o,h,L,Y);if(A.getClosest(b,ee,r),r.index===!1)return[];var j=b[r.index],X=f.line.color,ae=(f.marker||{}).color;T.opacity(X)&&f.line.width?r.color=X:T.opacity(ae)&&f.boxpoints?r.color=ae:r.color=f.fillcolor,r[x+"0"]=M.c2p(j.pos+m.bPos-D,!0),r[x+"1"]=M.c2p(j.pos+m.bPos+I,!0),r[x+"LabelVal"]=j.orig_p!==void 0?j.orig_p:j.pos;var he=x+"Spike";r.spikeDistance=Y(j)*P/S,r[he]=M.c2p(j.pos,!0);var K=f.boxmean||(f.meanline||{}).visible,J=f.boxpoints||f.points,U=J&&K?["max","uf","q3","med","mean","q1","lf","min"]:J&&!K?["max","uf","q3","med","q1","lf","min"]:!J&&K?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],H=w.range[1]<w.range[0];f.orientation===(H?"v":"h")&&U.reverse();for(var q=r.spikeDistance,re=r[he],Z=[],Q=0;Q<U.length;Q++){var ie=U[Q];if(ie in j){var oe=j[ie],ne=w.c2p(oe,!0),le=c.extendFlat({},r);le.attr=ie,le[u+"0"]=le[u+"1"]=ne,le[u+"LabelVal"]=oe,le[u+"Label"]=(m.labels?m.labels[ie]+" ":"")+y.hoverLabelText(w,oe,f[u+"hoverformat"]),le.hoverOnBox=!0,ie==="mean"&&"sd"in j&&f.boxmean==="sd"&&(le[u+"err"]=j.sd),le.hovertemplate=!1,Z.push(le)}}r.name="",r.spikeDistance=void 0,r[he]=void 0;for(var _e=0;_e<Z.length;_e++)Z[_e].attr!=="med"?(Z[_e].name="",Z[_e].spikeDistance=void 0,Z[_e][he]=void 0):(Z[_e].spikeDistance=q,Z[_e][he]=re);return Z}function n(r,v,s){for(var o=r.cd,b=r.xa,g=r.ya,d=o[0].trace,f=b.c2p(v),m=g.c2p(s),l,x=function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(b.c2p(z.x)-f)-G,1-3/G)},u=function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(g.c2p(z.y)-m)-G,1-3/G)},M=A.quadrature(x,u),w=!1,p,_,h=0;h<o.length;h++){p=o[h];for(var L=0;L<(p.pts||[]).length;L++){_=p.pts[L];var E=M(_);E<=r.distance&&(r.distance=E,w=[h,L])}}if(!w)return!1;p=o[w[0]],_=p.pts[w[1]];var S=b.c2p(_.x,!0),P=g.c2p(_.y,!0),F=_.mrc||1;l=c.extendFlat({},r,{index:_.i,color:(d.marker||{}).color,name:d.name,x0:S-F,x1:S+F,y0:P-F,y1:P+F,spikeDistance:r.distance,hovertemplate:d.hovertemplate});var I=p.orig_p,D=I!==void 0?I:p.pos,R;d.orientation==="h"?(R=g,l.xLabelVal=_.x,l.yLabelVal=D):(R=b,l.xLabelVal=D,l.yLabelVal=_.y);var O=R._id.charAt(0);return l[O+"Spike"]=R.c2p(p.pos,!0),e(_,d,l),l}N.exports={hoverPoints:a,hoverOnBoxes:i,hoverOnPoints:n}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults").supplyLayoutDefaults,calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"box",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(t,N,V){N.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("./layout_attributes");function T(a,i,n,r,v){for(var s=v+"Layout",o=!1,b=0;b<n.length;b++){var g=n[b];if(y.traceIs(g,s)){o=!0;break}}!o||(r(v+"mode"),r(v+"gap"),r(v+"groupgap"))}function e(a,i,n){function r(v,s){return c.coerce(a,i,A,v,s)}T(a,i,n,r,"box")}N.exports={supplyLayoutDefaults:e,_supply:T}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=5,e=.01;function a(v,s,o,b){var g=s.xaxis,d=s.yaxis;c.makeTraceGroups(b,o,"trace boxes").each(function(f){var m=y.select(this),l=f[0],x=l.t,u=l.trace;if(x.wdPos=x.bdPos*u.whiskerwidth,u.visible!==!0||x.empty){m.remove();return}var M,w;u.orientation==="h"?(M=d,w=g):(M=g,w=d),i(m,{pos:M,val:w},u,x),n(m,{x:g,y:d},u,x),r(m,{pos:M,val:w},u,x)})}function i(v,s,o,b){var g=o.orientation==="h",d=s.val,f=s.pos,m=!!f.rangebreaks,l=b.bPos,x=b.wdPos||0,u=b.bPosPxOffset||0,M=o.whiskerwidth||0,w=o.notched||!1,p=w?1-2*o.notchwidth:1,_,h;Array.isArray(b.bdPos)?(_=b.bdPos[0],h=b.bdPos[1]):(_=b.bdPos,h=b.bdPos);var L=v.selectAll("path.box").data(o.type!=="violin"||o.box.visible?c.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(E){if(E.empty)return"M0,0Z";var S=f.c2l(E.pos+l,!0),P=f.l2p(S-_)+u,F=f.l2p(S+h)+u,I=m?(P+F)/2:f.l2p(S)+u,D=o.whiskerwidth,R=m?P*D+(1-D)*I:f.l2p(S-x)+u,O=m?F*D+(1-D)*I:f.l2p(S+x)+u,z=f.l2p(S-_*p)+u,G=f.l2p(S+h*p)+u,Y=d.c2p(E.q1,!0),ee=d.c2p(E.q3,!0),j=c.constrain(d.c2p(E.med,!0),Math.min(Y,ee)+1,Math.max(Y,ee)-1),X=E.lf===void 0||o.boxpoints===!1,ae=d.c2p(X?E.min:E.lf,!0),he=d.c2p(X?E.max:E.uf,!0),K=d.c2p(E.ln,!0),J=d.c2p(E.un,!0);g?y.select(this).attr("d","M"+j+","+z+"V"+G+"M"+Y+","+P+"V"+F+(w?"H"+K+"L"+j+","+G+"L"+J+","+F:"")+"H"+ee+"V"+P+(w?"H"+J+"L"+j+","+z+"L"+K+","+P:"")+"ZM"+Y+","+I+"H"+ae+"M"+ee+","+I+"H"+he+(M===0?"":"M"+ae+","+R+"V"+O+"M"+he+","+R+"V"+O)):y.select(this).attr("d","M"+z+","+j+"H"+G+"M"+P+","+Y+"H"+F+(w?"V"+K+"L"+G+","+j+"L"+F+","+J:"")+"V"+ee+"H"+P+(w?"V"+J+"L"+z+","+j+"L"+P+","+K:"")+"ZM"+I+","+Y+"V"+ae+"M"+I+","+ee+"V"+he+(M===0?"":"M"+R+","+ae+"H"+O+"M"+R+","+he+"H"+O))})}function n(v,s,o,b){var g=s.x,d=s.y,f=b.bdPos,m=b.bPos,l=o.boxpoints||o.points;c.seedPseudoRandom();var x=function(w){return w.forEach(function(p){p.t=b,p.trace=o}),w},u=v.selectAll("g.points").data(l?x:[]);u.enter().append("g").attr("class","points"),u.exit().remove();var M=u.selectAll("path").data(function(w){var p,_=w.pts2,h=Math.max((w.max-w.min)/10,w.q3-w.q1),L=h*1e-9,E=h*e,S=[],P=0,F;if(o.jitter){if(h===0)for(P=1,S=new Array(_.length),p=0;p<_.length;p++)S[p]=1;else for(p=0;p<_.length;p++){var I=Math.max(0,p-T),D=_[I].v,R=Math.min(_.length-1,p+T),O=_[R].v;l!=="all"&&(_[p].v<w.lf?O=Math.min(O,w.lf):D=Math.max(D,w.uf));var z=Math.sqrt(E*(R-I)/(O-D+L))||0;z=c.constrain(Math.abs(z),0,1),S.push(z),P=Math.max(z,P)}F=o.jitter*2/(P||1)}for(p=0;p<_.length;p++){var G=_[p],Y=G.v,ee=o.jitter?F*S[p]*(c.pseudoRandom()-.5):0,j=w.pos+m+f*(o.pointpos+ee);o.orientation==="h"?(G.y=j,G.x=Y):(G.x=j,G.y=Y),l==="suspectedoutliers"&&Y<w.uo&&Y>w.lo&&(G.so=!0)}return _});M.enter().append("path").classed("point",!0),M.exit().remove(),M.call(A.translatePoints,g,d)}function r(v,s,o,b){var g=s.val,d=s.pos,f=!!d.rangebreaks,m=b.bPos,l=b.bPosPxOffset||0,x=o.boxmean||(o.meanline||{}).visible,u,M;Array.isArray(b.bdPos)?(u=b.bdPos[0],M=b.bdPos[1]):(u=b.bdPos,M=b.bdPos);var w=v.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?c.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(p){var _=d.c2l(p.pos+m,!0),h=d.l2p(_-u)+l,L=d.l2p(_+M)+l,E=f?(h+L)/2:d.l2p(_)+l,S=g.c2p(p.mean,!0),P=g.c2p(p.mean-p.sd,!0),F=g.c2p(p.mean+p.sd,!0);o.orientation==="h"?y.select(this).attr("d","M"+S+","+h+"V"+L+(x==="sd"?"m0,0L"+P+","+E+"L"+S+","+h+"L"+F+","+E+"Z":"")):y.select(this).attr("d","M"+h+","+S+"H"+L+(x==="sd"?"m0,0L"+E+","+P+"L"+h+","+S+"L"+E+","+F+"Z":""))})}N.exports={plot:a,plotBoxAndWhiskers:i,plotPoints:n,plotBoxMean:r}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(t,N,V){N.exports=function(c,A){var T=c.cd,e=c.xaxis,a=c.yaxis,i=[],n,r;if(A===!1)for(n=0;n<T.length;n++)for(r=0;r<(T[n].pts||[]).length;r++)T[n].pts[r].selected=0;else for(n=0;n<T.length;n++)for(r=0;r<(T[n].pts||[]).length;r++){var v=T[n].pts[r],s=e.c2p(v.x),o=a.c2p(v.y);A.contains([s,o],null,v.i,c)?(i.push({pointNumber:v.i,x:e.c2d(v.x),y:a.c2d(v.y)}),v.selected=1):v.selected=0}return i}},{}],693:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/color"),A=t("../../components/drawing");function T(a,i,n){var r=n||y.select(a).selectAll("g.trace.boxes");r.style("opacity",function(v){return v[0].trace.opacity}),r.each(function(v){var s=y.select(this),o=v[0].trace,b=o.line.width;function g(m,l,x,u){m.style("stroke-width",l+"px").call(c.stroke,x).call(c.fill,u)}var d=s.selectAll("path.box");if(o.type==="candlestick")d.each(function(m){if(!m.empty){var l=y.select(this),x=o[m.dir];g(l,x.line.width,x.line.color,x.fillcolor),l.style("opacity",o.selectedpoints&&!m.selected?.3:1)}});else{g(d,b,o.line.color,o.fillcolor),s.selectAll("path.mean").style({"stroke-width":b,"stroke-dasharray":2*b+"px,"+b+"px"}).call(c.stroke,o.line.color);var f=s.selectAll("path.point");A.pointStyle(f,o,a)}})}function e(a,i,n){var r=i[0].trace,v=n.selectAll("path.point");r.selectedpoints?A.selectedPointStyle(v,r):A.pointStyle(v,r,a)}N.exports={style:T,styleOnSelect:e}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(t,N,V){var y=t("../../lib").extendFlat,c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../ohlc/attributes"),T=t("../box/attributes");function e(a){return{line:{color:y({},T.line.color,{dflt:a}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}N.exports={xperiod:A.xperiod,xperiod0:A.xperiod0,xperiodalignment:A.xperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),x:A.x,open:A.open,high:A.high,low:A.low,close:A.close,line:{width:y({},T.line.width,{}),editType:"style"},increasing:e(A.increasing.line.color.dflt),decreasing:e(A.decreasing.line.color.dflt),text:A.text,hovertext:A.hovertext,whiskerwidth:y({},T.whiskerwidth,{dflt:0}),hoverlabel:A.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/cartesian/align_period"),T=t("../ohlc/calc").calcCommon;N.exports=function(a,i){var n=a._fullLayout,r=c.getFromId(a,i.xaxis),v=c.getFromId(a,i.yaxis),s=r.makeCalcdata(i,"x"),o=A(i,r,"x",s).vals,b=T(a,i,s,o,v,e);return b.length?(y.extendFlat(b[0].t,{num:n._numBoxes,dPos:y.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,b):[{t:{empty:!0}}]};function e(a,i,n,r){return{min:n,q1:Math.min(a,r),med:r,q3:Math.max(a,r),max:i}}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color"),A=t("../ohlc/ohlc_defaults"),T=t("../scatter/period_defaults"),e=t("./attributes");N.exports=function(n,r,v,s){function o(g,d){return y.coerce(n,r,e,g,d)}var b=A(n,r,o,s);if(!b){r.visible=!1;return}T(n,r,s,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),a(n,r,o,"increasing"),a(n,r,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),s._requestRangeslider[r.xaxis]=!0};function a(i,n,r,v){var s=r(v+".line.color");r(v+".line.width",n.line.width),r(v+".fillcolor",c.addOpacity(s,.5))}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(t,N,V){N.exports={moduleType:"trace",name:"candlestick",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t("./attributes"),layoutAttributes:t("../box/layout_attributes"),supplyLayoutDefaults:t("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:t("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("../box/plot").plot,layerName:"boxlayer",style:t("../box/style").style,hoverPoints:t("../ohlc/hover").hoverPoints,selectPoints:t("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(t,N,V){var y=t("./axis_defaults"),c=t("../../plot_api/plot_template");N.exports=function(e,a,i,n,r){var v=n("a");v||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),A(e,a,i,r)};function A(T,e,a,i){var n=["aaxis","baxis"];n.forEach(function(r){var v=r.charAt(0),s=T[r]||{},o=c.newContainer(e,r),b={noTicklabelstep:!0,tickfont:"x",id:v+"axis",letter:v,font:e.font,name:r,data:T[v],calendar:e.calendar,dfltColor:i,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};y(s,o,b),o._categories=o._categories||[],!T[r]&&s.type!=="-"&&(T[r]={type:s.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(t,N,V){var y=t("../../lib").isArrayOrTypedArray;N.exports=function(A){return c(A,0)};function c(A,T){if(!y(A)||T>=10)return null;for(var e=1/0,a=-1/0,i=A.length,n=0;n<i;n++){var r=A[n];if(y(r)){var v=c(r,T+1);v&&(e=Math.min(v[0],e),a=Math.max(v[1],a))}else e=Math.min(r,e),a=Math.max(r,a)}return[e,a]}},{"../../lib":515}],700:[function(t,N,V){var y=t("../../plots/font_attributes"),c=t("./axis_attributes"),A=t("../../components/color/attributes"),T=y({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=A.defaultLine,N.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:c,baxis:c,font:T,color:{valType:"color",dflt:A.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(t,N,V){var y=t("../../lib").isArrayOrTypedArray;N.exports=function(c,A,T,e){var a,i,n,r,v,s,o,b,g,d,f,m,l,x=y(T)?"a":"b",u=x==="a"?c.aaxis:c.baxis,M=u.smoothing,w=x==="a"?c.a2i:c.b2j,p=x==="a"?T:e,_=x==="a"?e:T,h=x==="a"?A.a.length:A.b.length,L=x==="a"?A.b.length:A.a.length,E=Math.floor(x==="a"?c.b2j(_):c.a2i(_)),S=x==="a"?function(X){return c.evalxy([],X,E)}:function(X){return c.evalxy([],E,X)};M&&(n=Math.max(0,Math.min(L-2,E)),r=E-n,i=x==="a"?function(X,ae){return c.dxydi([],X,n,ae,r)}:function(X,ae){return c.dxydj([],n,X,r,ae)});var P=w(p[0]),F=w(p[1]),I=P<F?1:-1,D=(F-P)*1e-8,R=I>0?Math.floor:Math.ceil,O=I>0?Math.ceil:Math.floor,z=I>0?Math.min:Math.max,G=I>0?Math.max:Math.min,Y=R(P+D),ee=O(F-D);o=S(P);var j=[[o]];for(a=Y;a*I<ee*I;a+=I)v=[],f=G(P,a),m=z(F,a+I),l=m-f,s=Math.max(0,Math.min(h-2,Math.floor(.5*(f+m)))),b=S(m),M&&(g=i(s,f-s),d=i(s,m-s),v.push([o[0]+g[0]/3*l,o[1]+g[1]/3*l]),v.push([b[0]-d[0]/3*l,b[1]-d[1]/3*l])),v.push(b),j.push(v),o=b;return j}},{"../../lib":515}],702:[function(t,N,V){var y=t("../../plots/font_attributes"),c=t("../../components/color/attributes"),A=t("../../plots/cartesian/layout_attributes"),T=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=t("../../plot_api/edit_types").overrideAll,a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat;N.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:y({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:A.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:y({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:e(A.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:i({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:i({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:c.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:y({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(t,N,V){var y=t("./attributes"),c=t("../../components/color").addOpacity,A=t("../../registry"),T=t("../../lib"),e=t("../../plots/cartesian/tick_value_defaults"),a=t("../../plots/cartesian/tick_label_defaults"),i=t("../../plots/cartesian/prefix_suffix_defaults"),n=t("../../plots/cartesian/category_order_defaults"),r=t("../../plots/cartesian/set_convert"),v=t("../../plots/cartesian/axis_autotype");N.exports=function(b,g,d){var f=d.letter,m=d.font||{},l=y[f+"axis"];function x(Y,ee){return T.coerce(b,g,l,Y,ee)}function u(Y,ee){return T.coerce2(b,g,l,Y,ee)}d.name&&(g._name=d.name,g._id=d.name),x("autotypenumbers",d.autotypenumbersDflt);var M=x("type");if(M==="-"&&(d.data&&s(g,d.data),g.type==="-"?g.type="linear":M=b.type=g.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",f+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),g.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),g._hovertitle=f,M==="date"){var w=A.getComponentMethod("calendars","handleDefaults");w(b,g,"calendar",d.calendar)}r(g,d.fullLayout),g.c2p=T.identity;var p=x("color",d.dfltColor),_=p===b.color?p:m.color,h=x("title.text");h&&(T.coerceFont(x,"title.font",{family:m.family,size:T.bigFont(m.size),color:_}),x("title.offset")),x("tickangle");var L=x("autorange",!g.isValidRange(b.range));L&&x("rangemode"),x("range"),g.cleanRange(),x("fixedrange"),e(b,g,x,M),i(b,g,x,M,d),a(b,g,x,M,d),n(b,g,x,{data:d.data,dataAttr:f});var E=u("gridcolor",c(p,.3)),S=u("gridwidth"),P=u("griddash"),F=x("showgrid");F||(delete g.gridcolor,delete g.gridwidth,delete g.griddash);var I=u("startlinecolor",p),D=u("startlinewidth",S),R=x("startline",g.showgrid||!!I||!!D);R||(delete g.startlinecolor,delete g.startlinewidth);var O=u("endlinecolor",p),z=u("endlinewidth",S),G=x("endline",g.showgrid||!!O||!!z);return G||(delete g.endlinecolor,delete g.endlinewidth),F?(x("minorgridcount"),x("minorgridwidth",S),x("minorgriddash",P),x("minorgridcolor",c(E,.06)),g.minorgridcount||(delete g.minorgridwidth,delete g.minorgriddash,delete g.minorgridcolor)):(delete g.gridcolor,delete g.gridwidth,delete g.griddash),g.showticklabels==="none"&&(delete g.tickfont,delete g.tickangle,delete g.showexponent,delete g.exponentformat,delete g.minexponent,delete g.tickformat,delete g.showticksuffix,delete g.showtickprefix),g.showticksuffix||delete g.ticksuffix,g.showtickprefix||delete g.tickprefix,x("tickmode"),g};function s(o,b){if(o.type==="-"){var g=o._id,d=g.charAt(0),f=d+"calendar",m=o[f];o.type=v(b,m,{autotypenumbers:o.autotypenumbers})}}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../lib").isArray1D,A=t("./cheater_basis"),T=t("./array_minmax"),e=t("./calc_gridlines"),a=t("./calc_labels"),i=t("./calc_clippath"),n=t("../heatmap/clean_2d_array"),r=t("./smooth_fill_2d_array"),v=t("../heatmap/convert_column_xyz"),s=t("./set_convert");N.exports=function(b,g){var d=y.getFromId(b,g.xaxis),f=y.getFromId(b,g.yaxis),m=g.aaxis,l=g.baxis,x=g.x,u=g.y,M=[];x&&c(x)&&M.push("x"),u&&c(u)&&M.push("y"),M.length&&v(g,m,l,"a","b",M);var w=g._a=g._a||g.a,p=g._b=g._b||g.b;x=g._x||g.x,u=g._y||g.y;var _={};if(g._cheater){var h=m.cheatertype==="index"?w.length:w,L=l.cheatertype==="index"?p.length:p;x=A(h,L,g.cheaterslope)}g._x=x=n(x),g._y=u=n(u),r(x,w,p),r(u,w,p),s(g),g.setScale();var E=T(x),S=T(u),P=.5*(E[1]-E[0]),F=.5*(E[1]+E[0]),I=.5*(S[1]-S[0]),D=.5*(S[1]+S[0]),R=1.3;return E=[F-P*R,F+P*R],S=[D-I*R,D+I*R],g._extremes[d._id]=y.findExtremes(d,E,{padded:!0}),g._extremes[f._id]=y.findExtremes(f,S,{padded:!0}),e(g,"a","b"),e(g,"b","a"),a(g,m),a(g,l),_.clipsegments=i(g._xctrl,g._yctrl,m,l),_.x=x,_.y=u,_.a=w,_.b=p,[_]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(t,N,V){N.exports=function(c,A,T,e){var a,i,n,r=[],v=!!T.smoothing,s=!!e.smoothing,o=c[0].length-1,b=c.length-1;for(a=0,i=[],n=[];a<=o;a++)i[a]=c[0][a],n[a]=A[0][a];for(r.push({x:i,y:n,bicubic:v}),a=0,i=[],n=[];a<=b;a++)i[a]=c[a][o],n[a]=A[a][o];for(r.push({x:i,y:n,bicubic:s}),a=o,i=[],n=[];a>=0;a--)i[o-a]=c[b][a],n[o-a]=A[b][a];for(r.push({x:i,y:n,bicubic:v}),a=b,i=[],n=[];a>=0;a--)i[b-a]=c[a][0],n[b-a]=A[a][0];return r.push({x:i,y:n,bicubic:s}),r}},{}],706:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../lib/extend").extendFlat;N.exports=function(T,e,a){var i,n,r,v,s,o,b,g,d,f,m,l,x,u,M=T["_"+e],w=T[e+"axis"],p=w._gridlines=[],_=w._minorgridlines=[],h=w._boundarylines=[],L=T["_"+a],E=T[a+"axis"];w.tickmode==="array"&&(w.tickvals=M.slice());var S=T._xctrl,P=T._yctrl,F=S[0].length,I=S.length,D=T._a.length,R=T._b.length;y.prepTicks(w),w.tickmode==="array"&&delete w.tickvals;var O=w.smoothing?3:1;function z(Y){var ee,j,X,ae,he,K,J,U,H,q,re,Z,Q=[],ie=[],oe={};if(e==="b")for(j=T.b2j(Y),X=Math.floor(Math.max(0,Math.min(R-2,j))),ae=j-X,oe.length=R,oe.crossLength=D,oe.xy=function(ne){return T.evalxy([],ne,j)},oe.dxy=function(ne,le){return T.dxydi([],ne,X,le,ae)},ee=0;ee<D;ee++)K=Math.min(D-2,ee),J=ee-K,U=T.evalxy([],ee,j),E.smoothing&&ee>0&&(H=T.dxydi([],ee-1,X,0,ae),Q.push(he[0]+H[0]/3),ie.push(he[1]+H[1]/3),q=T.dxydi([],ee-1,X,1,ae),Q.push(U[0]-q[0]/3),ie.push(U[1]-q[1]/3)),Q.push(U[0]),ie.push(U[1]),he=U;else for(ee=T.a2i(Y),K=Math.floor(Math.max(0,Math.min(D-2,ee))),J=ee-K,oe.length=D,oe.crossLength=R,oe.xy=function(ne){return T.evalxy([],ee,ne)},oe.dxy=function(ne,le){return T.dxydj([],K,ne,J,le)},j=0;j<R;j++)X=Math.min(R-2,j),ae=j-X,U=T.evalxy([],ee,j),E.smoothing&&j>0&&(re=T.dxydj([],K,j-1,J,0),Q.push(he[0]+re[0]/3),ie.push(he[1]+re[1]/3),Z=T.dxydj([],K,j-1,J,1),Q.push(U[0]-Z[0]/3),ie.push(U[1]-Z[1]/3)),Q.push(U[0]),ie.push(U[1]),he=U;return oe.axisLetter=e,oe.axis=w,oe.crossAxis=E,oe.value=Y,oe.constvar=a,oe.index=g,oe.x=Q,oe.y=ie,oe.smoothing=E.smoothing,oe}function G(Y){var ee,j,X,ae,he,K=[],J=[],U={};if(U.length=M.length,U.crossLength=L.length,e==="b")for(X=Math.max(0,Math.min(R-2,Y)),he=Math.min(1,Math.max(0,Y-X)),U.xy=function(H){return T.evalxy([],H,Y)},U.dxy=function(H,q){return T.dxydi([],H,X,q,he)},ee=0;ee<F;ee++)K[ee]=S[Y*O][ee],J[ee]=P[Y*O][ee];else for(j=Math.max(0,Math.min(D-2,Y)),ae=Math.min(1,Math.max(0,Y-j)),U.xy=function(H){return T.evalxy([],Y,H)},U.dxy=function(H,q){return T.dxydj([],j,H,ae,q)},ee=0;ee<I;ee++)K[ee]=S[ee][Y*O],J[ee]=P[ee][Y*O];return U.axisLetter=e,U.axis=w,U.crossAxis=E,U.value=M[Y],U.constvar=a,U.index=Y,U.x=K,U.y=J,U.smoothing=E.smoothing,U}if(w.tickmode==="array"){for(v=5e-15,s=[Math.floor((M.length-1-w.arraytick0)/w.arraydtick*(1+v)),Math.ceil(-w.arraytick0/w.arraydtick/(1+v))].sort(function(Y,ee){return Y-ee}),o=s[0]-1,b=s[1]+1,g=o;g<b;g++)n=w.arraytick0+w.arraydtick*g,!(n<0||n>M.length-1)&&p.push(c(G(n),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(g=o;g<b;g++)if(r=w.arraytick0+w.arraydtick*g,m=Math.min(r+w.arraydtick,M.length-1),!(r<0||r>M.length-1)&&!(m<0||m>M.length-1))for(l=M[r],x=M[m],i=0;i<w.minorgridcount;i++)u=m-r,!(u<=0)&&(f=l+(x-l)*(i+1)/(w.minorgridcount+1)*(w.arraydtick/u),!(f<M[0]||f>M[M.length-1])&&_.push(c(z(f),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash})));w.startline&&h.push(c(G(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&h.push(c(G(M.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(v=5e-15,s=[Math.floor((M[M.length-1]-w.tick0)/w.dtick*(1+v)),Math.ceil((M[0]-w.tick0)/w.dtick/(1+v))].sort(function(Y,ee){return Y-ee}),o=s[0],b=s[1],g=o;g<=b;g++)d=w.tick0+w.dtick*g,p.push(c(z(d),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(g=o-1;g<b+1;g++)for(d=w.tick0+w.dtick*g,i=0;i<w.minorgridcount;i++)f=d+w.dtick*(i+1)/(w.minorgridcount+1),!(f<M[0]||f>M[M.length-1])&&_.push(c(z(f),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&h.push(c(z(M[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&h.push(c(z(M[M.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../lib/extend").extendFlat;N.exports=function(T,e){var a,i,n,r,v,s=e._labels=[],o=e._gridlines;for(a=0;a<o.length;a++)v=o[a],["start","both"].indexOf(e.showticklabels)!==-1&&(i=y.tickText(e,v.value),c(i,{prefix:n,suffix:r,endAnchor:!0,xy:v.xy(0),dxy:v.dxy(0,0),axis:v.axis,length:v.crossAxis.length,font:v.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i)),["end","both"].indexOf(e.showticklabels)!==-1&&(i=y.tickText(e,v.value),c(i,{endAnchor:!1,xy:v.xy(v.crossLength-1),dxy:v.dxy(v.crossLength-2,1),axis:v.axis,length:v.crossAxis.length,font:v.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(t,N,V){var y=.5;N.exports=function(A,T,e,a){var i=A[0]-T[0],n=A[1]-T[1],r=e[0]-T[0],v=e[1]-T[1],s=Math.pow(i*i+n*n,y/2),o=Math.pow(r*r+v*v,y/2),b=(o*o*i-s*s*r)*a,g=(o*o*n-s*s*v)*a,d=o*(s+o)*3,f=s*(s+o)*3;return[[T[0]+(d&&b/d),T[1]+(d&&g/d)],[T[0]-(f&&b/f),T[1]-(f&&g/f)]]}},{}],709:[function(t,N,V){var y=t("../../lib").isArrayOrTypedArray;N.exports=function(c,A,T){var e,a,i,n,r,v,s=[],o=y(c)?c.length:c,b=y(A)?A.length:A,g=y(c)?c:null,d=y(A)?A:null;g&&(i=(g.length-1)/(g[g.length-1]-g[0])/(o-1)),d&&(n=(d.length-1)/(d[d.length-1]-d[0])/(b-1));var f,m=1/0,l=-1/0;for(a=0;a<b;a++)for(s[a]=[],v=d?(d[a]-d[0])*n:a/(b-1),e=0;e<o;e++)r=g?(g[e]-g[0])*i:e/(o-1),f=r-v*T,m=Math.min(f,m),l=Math.max(f,l),s[a][e]=f;var x=1/(l-m),u=-m*x;for(a=0;a<b;a++)for(e=0;e<o;e++)s[a][e]=x*s[a][e]+u;return s}},{"../../lib":515}],710:[function(t,N,V){var y=t("./catmull_rom"),c=t("../../lib").ensureArray;function A(T,e,a){var i=-.5*a[0]+1.5*e[0],n=-.5*a[1]+1.5*e[1];return[(2*i+T[0])/3,(2*n+T[1])/3]}N.exports=function(e,a,i,n,r,v){var s,o,b,g,d,f,m,l,x,u,M=i[0].length,w=i.length,p=r?3*M-2:M,_=v?3*w-2:w;for(e=c(e,_),a=c(a,_),b=0;b<_;b++)e[b]=c(e[b],p),a[b]=c(a[b],p);for(o=0,g=0;o<w;o++,g+=v?3:1)for(d=e[g],f=a[g],m=i[o],l=n[o],s=0,b=0;s<M;s++,b+=r?3:1)d[b]=m[s],f[b]=l[s];if(r)for(o=0,g=0;o<w;o++,g+=v?3:1){for(s=1,b=3;s<M-1;s++,b+=3)x=y([i[o][s-1],n[o][s-1]],[i[o][s],n[o][s]],[i[o][s+1],n[o][s+1]],r),e[g][b-1]=x[0][0],a[g][b-1]=x[0][1],e[g][b+1]=x[1][0],a[g][b+1]=x[1][1];u=A([e[g][0],a[g][0]],[e[g][2],a[g][2]],[e[g][3],a[g][3]]),e[g][1]=u[0],a[g][1]=u[1],u=A([e[g][p-1],a[g][p-1]],[e[g][p-3],a[g][p-3]],[e[g][p-4],a[g][p-4]]),e[g][p-2]=u[0],a[g][p-2]=u[1]}if(v)for(b=0;b<p;b++){for(g=3;g<_-3;g+=3)x=y([e[g-3][b],a[g-3][b]],[e[g][b],a[g][b]],[e[g+3][b],a[g+3][b]],v),e[g-1][b]=x[0][0],a[g-1][b]=x[0][1],e[g+1][b]=x[1][0],a[g+1][b]=x[1][1];u=A([e[0][b],a[0][b]],[e[2][b],a[2][b]],[e[3][b],a[3][b]]),e[1][b]=u[0],a[1][b]=u[1],u=A([e[_-1][b],a[_-1][b]],[e[_-3][b],a[_-3][b]],[e[_-4][b],a[_-4][b]]),e[_-2][b]=u[0],a[_-2][b]=u[1]}if(r&&v)for(g=1;g<_;g+=(g+1)%3===0?2:1){for(b=3;b<p-3;b+=3)x=y([e[g][b-3],a[g][b-3]],[e[g][b],a[g][b]],[e[g][b+3],a[g][b+3]],r),e[g][b-1]=.5*(e[g][b-1]+x[0][0]),a[g][b-1]=.5*(a[g][b-1]+x[0][1]),e[g][b+1]=.5*(e[g][b+1]+x[1][0]),a[g][b+1]=.5*(a[g][b+1]+x[1][1]);u=A([e[g][0],a[g][0]],[e[g][2],a[g][2]],[e[g][3],a[g][3]]),e[g][1]=.5*(e[g][1]+u[0]),a[g][1]=.5*(a[g][1]+u[1]),u=A([e[g][p-1],a[g][p-1]],[e[g][p-3],a[g][p-3]],[e[g][p-4],a[g][p-4]]),e[g][p-2]=.5*(e[g][p-2]+u[0]),a[g][p-2]=.5*(a[g][p-2]+u[1])}return[e,a]}},{"../../lib":515,"./catmull_rom":708}],711:[function(t,N,V){N.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(t,N,V){N.exports=function(y,c,A){return c&&A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3,a*=3;var d=i*i,f=1-i,m=f*f,l=f*i*2,x=-3*m,u=3*(m-l),M=3*(l-d),w=3*d,p=n*n,_=p*n,h=1-n,L=h*h,E=L*h;for(g=0;g<y.length;g++)b=y[g],r=x*b[a][e]+u*b[a][e+1]+M*b[a][e+2]+w*b[a][e+3],v=x*b[a+1][e]+u*b[a+1][e+1]+M*b[a+1][e+2]+w*b[a+1][e+3],s=x*b[a+2][e]+u*b[a+2][e+1]+M*b[a+2][e+2]+w*b[a+2][e+3],o=x*b[a+3][e]+u*b[a+3][e+1]+M*b[a+3][e+2]+w*b[a+3][e+3],T[g]=E*r+3*(L*n*v+h*p*s)+_*o;return T}:c?function(T,e,a,i,n){T||(T=[]);var r,v,s,o;e*=3;var b=i*i,g=1-i,d=g*g,f=g*i*2,m=-3*d,l=3*(d-f),x=3*(f-b),u=3*b,M=1-n;for(s=0;s<y.length;s++)o=y[s],r=m*o[a][e]+l*o[a][e+1]+x*o[a][e+2]+u*o[a][e+3],v=m*o[a+1][e]+l*o[a+1][e+1]+x*o[a+1][e+2]+u*o[a+1][e+3],T[s]=M*r+n*v;return T}:A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;a*=3;var d=n*n,f=d*n,m=1-n,l=m*m,x=l*m;for(b=0;b<y.length;b++)g=y[b],r=g[a][e+1]-g[a][e],v=g[a+1][e+1]-g[a+1][e],s=g[a+2][e+1]-g[a+2][e],o=g[a+3][e+1]-g[a+3][e],T[b]=x*r+3*(l*n*v+m*d*s)+f*o;return T}:function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b=1-n;for(s=0;s<y.length;s++)o=y[s],r=o[a][e+1]-o[a][e],v=o[a+1][e+1]-o[a+1][e],T[s]=b*r+n*v;return T}}},{}],713:[function(t,N,V){N.exports=function(y,c,A){return c&&A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3,a*=3;var d=i*i,f=d*i,m=1-i,l=m*m,x=l*m,u=n*n,M=1-n,w=M*M,p=M*n*2,_=-3*w,h=3*(w-p),L=3*(p-u),E=3*u;for(g=0;g<y.length;g++)b=y[g],r=_*b[a][e]+h*b[a+1][e]+L*b[a+2][e]+E*b[a+3][e],v=_*b[a][e+1]+h*b[a+1][e+1]+L*b[a+2][e+1]+E*b[a+3][e+1],s=_*b[a][e+2]+h*b[a+1][e+2]+L*b[a+2][e+2]+E*b[a+3][e+2],o=_*b[a][e+3]+h*b[a+1][e+3]+L*b[a+2][e+3]+E*b[a+3][e+3],T[g]=x*r+3*(l*i*v+m*d*s)+f*o;return T}:c?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3;var d=n*n,f=d*n,m=1-n,l=m*m,x=l*m;for(b=0;b<y.length;b++)g=y[b],r=g[a+1][e]-g[a][e],v=g[a+1][e+1]-g[a][e+1],s=g[a+1][e+2]-g[a][e+2],o=g[a+1][e+3]-g[a][e+3],T[b]=x*r+3*(l*n*v+m*d*s)+f*o;return T}:A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o;a*=3;var b=1-i,g=n*n,d=1-n,f=d*d,m=d*n*2,l=-3*f,x=3*(f-m),u=3*(m-g),M=3*g;for(s=0;s<y.length;s++)o=y[s],r=l*o[a][e]+x*o[a+1][e]+u*o[a+2][e]+M*o[a+3][e],v=l*o[a][e+1]+x*o[a+1][e+1]+u*o[a+2][e+1]+M*o[a+3][e+1],T[s]=b*r+i*v;return T}:function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b=1-i;for(s=0;s<y.length;s++)o=y[s],r=o[a+1][e]-o[a][e],v=o[a+1][e+1]-o[a][e+1],T[s]=b*r+i*v;return T}}},{}],714:[function(t,N,V){N.exports=function(y,c,A,T,e){var a=c-2,i=A-2;return T&&e?function(n,r,v){n||(n=[]);var s,o,b,g,d,f,m=Math.max(0,Math.min(Math.floor(r),a)),l=Math.max(0,Math.min(Math.floor(v),i)),x=Math.max(0,Math.min(1,r-m)),u=Math.max(0,Math.min(1,v-l));m*=3,l*=3;var M=x*x,w=M*x,p=1-x,_=p*p,h=_*p,L=u*u,E=L*u,S=1-u,P=S*S,F=P*S;for(f=0;f<y.length;f++)d=y[f],s=h*d[l][m]+3*(_*x*d[l][m+1]+p*M*d[l][m+2])+w*d[l][m+3],o=h*d[l+1][m]+3*(_*x*d[l+1][m+1]+p*M*d[l+1][m+2])+w*d[l+1][m+3],b=h*d[l+2][m]+3*(_*x*d[l+2][m+1]+p*M*d[l+2][m+2])+w*d[l+2][m+3],g=h*d[l+3][m]+3*(_*x*d[l+3][m+1]+p*M*d[l+3][m+2])+w*d[l+3][m+3],n[f]=F*s+3*(P*u*o+S*L*b)+E*g;return n}:T?function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,m,l,x,u;s*=3;var M=b*b,w=M*b,p=1-b,_=p*p,h=_*p,L=1-g;for(x=0;x<y.length;x++)u=y[x],d=L*u[o][s]+g*u[o+1][s],f=L*u[o][s+1]+g*u[o+1][s+1],m=L*u[o][s+2]+g*u[o+1][s+1],l=L*u[o][s+3]+g*u[o+1][s+1],n[x]=h*d+3*(_*b*f+p*M*m)+w*l;return n}:e?function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,m,l,x,u;o*=3;var M=g*g,w=M*g,p=1-g,_=p*p,h=_*p,L=1-b;for(x=0;x<y.length;x++)u=y[x],d=L*u[o][s]+b*u[o][s+1],f=L*u[o+1][s]+b*u[o+1][s+1],m=L*u[o+2][s]+b*u[o+2][s+1],l=L*u[o+3][s]+b*u[o+3][s+1],n[x]=h*d+3*(_*g*f+p*M*m)+w*l;return n}:function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,m,l,x=1-g,u=1-b;for(m=0;m<y.length;m++)l=y[m],d=u*l[o][s]+b*l[o][s+1],f=u*l[o+1][s]+b*l[o+1][s+1],n[m]=x*d+g*f;return n}}},{}],715:[function(t,N,V){var y=t("../../lib"),c=t("./xy_defaults"),A=t("./ab_defaults"),T=t("./attributes"),e=t("../../components/color/attributes");N.exports=function(i,n,r,v){function s(g,d){return y.coerce(i,n,T,g,d)}n._clipPathId="clip"+n.uid+"carpet";var o=s("color",e.defaultLine);if(y.coerceFont(s,"font"),s("carpet"),A(i,n,v,s,o),!n.a||!n.b){n.visible=!1;return}n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0);var b=c(i,n,s);b||(n.visible=!1),n._cheater&&s("cheaterslope")}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),plot:t("./plot"),calc:t("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(t,N,V){N.exports=function(y,c){for(var A=y._fullData.length,T,e=0;e<A;e++){var a=y._fullData[e];if(a.index!==c.index&&a.type==="carpet"&&(T||(T=a),a.carpet===c.carpet))return a}return T}},{}],718:[function(t,N,V){N.exports=function(c,A,T){if(c.length===0)return"";var e,a=[],i=T?3:1;for(e=0;e<c.length;e+=i)a.push(c[e]+","+A[e]),T&&e<c.length-i&&(a.push("C"),a.push([c[e+1]+","+A[e+1],c[e+2]+","+A[e+2]+" "].join(" ")));return a.join(T?"":"L")}},{}],719:[function(t,N,V){var y=t("../../lib").isArrayOrTypedArray;N.exports=function(A,T,e){var a;for(y(A)?A.length>T.length&&(A=A.slice(0,T.length)):A=[],a=0;a<T.length;a++)A[a]=e(T[a]);return A}},{"../../lib":515}],720:[function(t,N,V){N.exports=function(c,A,T,e,a,i){var n=a[0]*c.dpdx(A),r=a[1]*c.dpdy(T),v=1,s=1;if(i){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),b=Math.sqrt(i[0]*i[0]+i[1]*i[1]),g=(a[0]*i[0]+a[1]*i[1])/o/b;s=Math.max(0,g)}var d=Math.atan2(r,n)*180/Math.PI;return d<-90?(d+=180,v=-v):d>90&&(d-=180,v=-v),{angle:d,flip:v,p:c.c2p(e,A,T),offsetMultplier:s}}},{}],721:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/drawing"),A=t("./map_1d_array"),T=t("./makepath"),e=t("./orient_text"),a=t("../../lib/svg_text_utils"),i=t("../../lib"),n=i.strRotate,r=i.strTranslate,v=t("../../constants/alignment");N.exports=function(x,u,M,w){var p=u.xaxis,_=u.yaxis,h=x._fullLayout,L=h._clips;i.makeTraceGroups(w,M,"trace").each(function(E){var S=y.select(this),P=E[0],F=P.trace,I=F.aaxis,D=F.baxis,R=i.ensureSingle(S,"g","minorlayer"),O=i.ensureSingle(S,"g","majorlayer"),z=i.ensureSingle(S,"g","boundarylayer"),G=i.ensureSingle(S,"g","labellayer");S.style("opacity",F.opacity),o(p,_,O,I,"a",I._gridlines),o(p,_,O,D,"b",D._gridlines),o(p,_,R,I,"a",I._minorgridlines),o(p,_,R,D,"b",D._minorgridlines),o(p,_,z,I,"a-boundary",I._boundarylines),o(p,_,z,D,"b-boundary",D._boundarylines);var Y=b(x,p,_,F,P,G,I._labels,"a-label"),ee=b(x,p,_,F,P,G,D._labels,"b-label");g(x,G,F,P,p,_,Y,ee),s(F,P,L,p,_)})};function s(l,x,u,M,w){var p,_,h,L,E=u.select("#"+l._clipPathId);E.size()||(E=u.append("clipPath").classed("carpetclip",!0));var S=i.ensureSingle(E,"path","carpetboundary"),P=x.clipsegments,F=[];for(L=0;L<P.length;L++)p=P[L],_=A([],p.x,M.c2p),h=A([],p.y,w.c2p),F.push(T(_,h,p.bicubic));var I="M"+F.join("L")+"Z";E.attr("id",l._clipPathId),S.attr("d",I)}function o(l,x,u,M,w,p){var _="const-"+w+"-lines",h=u.selectAll("."+_).data(p);h.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),h.each(function(L){var E=L,S=E.x,P=E.y,F=A([],S,l.c2p),I=A([],P,x.c2p),D="M"+T(F,I,E.smoothing),R=y.select(this);R.attr("d",D).style("stroke-width",E.width).style("stroke",E.color).style("stroke-dasharray",c.dashStyle(E.dash,E.width)).style("fill","none")}),h.exit().remove()}function b(l,x,u,M,w,p,_,h){var L=p.selectAll("text."+h).data(_);L.enter().append("text").classed(h,!0);var E=0,S={};return L.each(function(P,F){var I;if(P.axis.tickangle==="auto")I=e(M,x,u,P.xy,P.dxy);else{var D=(P.axis.tickangle+180)*Math.PI/180;I=e(M,x,u,P.xy,[Math.cos(D),Math.sin(D)])}F||(S={angle:I.angle,flip:I.flip});var R=(P.endAnchor?-1:1)*I.flip,O=y.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(c.font,P.font).text(P.text).call(a.convertToTspans,l),z=c.bBox(this);O.attr("transform",r(I.p[0],I.p[1])+n(I.angle)+r(P.axis.labelpadding*R,z.height*.3)),E=Math.max(E,z.width+P.axis.labelpadding)}),L.exit().remove(),S.maxExtent=E,S}function g(l,x,u,M,w,p,_,h){var L,E,S,P,F=i.aggNums(Math.min,null,u.a),I=i.aggNums(Math.max,null,u.a),D=i.aggNums(Math.min,null,u.b),R=i.aggNums(Math.max,null,u.b);L=.5*(F+I),E=D,S=u.ab2xy(L,E,!0),P=u.dxyda_rough(L,E),_.angle===void 0&&i.extendFlat(_,e(u,w,p,S,u.dxydb_rough(L,E))),m(l,x,u,M,S,P,u.aaxis,w,p,_,"a-title"),L=F,E=.5*(D+R),S=u.ab2xy(L,E,!0),P=u.dxydb_rough(L,E),h.angle===void 0&&i.extendFlat(h,e(u,w,p,S,u.dxyda_rough(L,E))),m(l,x,u,M,S,P,u.baxis,w,p,h,"b-title")}var d=v.LINE_SPACING,f=(1-v.MID_SHIFT)/d+1;function m(l,x,u,M,w,p,_,h,L,E,S){var P=[];_.title.text&&P.push(_.title.text);var F=x.selectAll("text."+S).data(P),I=E.maxExtent;F.enter().append("text").classed(S,!0),F.each(function(){var D=e(u,h,L,w,p);["start","both"].indexOf(_.showticklabels)===-1&&(I=0);var R=_.title.font.size;I+=R+_.title.offset;var O=E.angle+(E.flip<0?180:0),z=(O-D.angle+450)%360,G=z>90&&z<270,Y=y.select(this);Y.text(_.title.text).call(a.convertToTspans,l),G&&(I=(-a.lineCount(Y)+f)*d*R-I),Y.attr("transform",r(D.p[0],D.p[1])+n(D.angle)+r(0,I)).attr("text-anchor","middle").call(c.font,_.title.font)}),F.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(t,N,V){var y=t("./constants"),c=t("../../lib/search").findBin,A=t("./compute_control_points"),T=t("./create_spline_evaluator"),e=t("./create_i_derivative_evaluator"),a=t("./create_j_derivative_evaluator");N.exports=function(n){var r=n._a,v=n._b,s=r.length,o=v.length,b=n.aaxis,g=n.baxis,d=r[0],f=r[s-1],m=v[0],l=v[o-1],x=r[r.length-1]-r[0],u=v[v.length-1]-v[0],M=x*y.RELATIVE_CULL_TOLERANCE,w=u*y.RELATIVE_CULL_TOLERANCE;d-=M,f+=M,m-=w,l+=w,n.isVisible=function(p,_){return p>d&&p<f&&_>m&&_<l},n.isOccluded=function(p,_){return p<d||p>f||_<m||_>l},n.setScale=function(){var p=n._x,_=n._y,h=A(n._xctrl,n._yctrl,p,_,b.smoothing,g.smoothing);n._xctrl=h[0],n._yctrl=h[1],n.evalxy=T([n._xctrl,n._yctrl],s,o,b.smoothing,g.smoothing),n.dxydi=e([n._xctrl,n._yctrl],b.smoothing,g.smoothing),n.dxydj=a([n._xctrl,n._yctrl],b.smoothing,g.smoothing)},n.i2a=function(p){var _=Math.max(0,Math.floor(p[0]),s-2),h=p[0]-_;return(1-h)*r[_]+h*r[_+1]},n.j2b=function(p){var _=Math.max(0,Math.floor(p[1]),s-2),h=p[1]-_;return(1-h)*v[_]+h*v[_+1]},n.ij2ab=function(p){return[n.i2a(p[0]),n.j2b(p[1])]},n.a2i=function(p){var _=Math.max(0,Math.min(c(p,r),s-2)),h=r[_],L=r[_+1];return Math.max(0,Math.min(s-1,_+(p-h)/(L-h)))},n.b2j=function(p){var _=Math.max(0,Math.min(c(p,v),o-2)),h=v[_],L=v[_+1];return Math.max(0,Math.min(o-1,_+(p-h)/(L-h)))},n.ab2ij=function(p){return[n.a2i(p[0]),n.b2j(p[1])]},n.i2c=function(p,_){return n.evalxy([],p,_)},n.ab2xy=function(p,_,h){if(!h&&(p<r[0]||p>r[s-1]|_<v[0]||_>v[o-1]))return[!1,!1];var L=n.a2i(p),E=n.b2j(_),S=n.evalxy([],L,E);if(h){var P=0,F=0,I=[],D,R,O,z;p<r[0]?(D=0,R=0,P=(p-r[0])/(r[1]-r[0])):p>r[s-1]?(D=s-2,R=1,P=(p-r[s-1])/(r[s-1]-r[s-2])):(D=Math.max(0,Math.min(s-2,Math.floor(L))),R=L-D),_<v[0]?(O=0,z=0,F=(_-v[0])/(v[1]-v[0])):_>v[o-1]?(O=o-2,z=1,F=(_-v[o-1])/(v[o-1]-v[o-2])):(O=Math.max(0,Math.min(o-2,Math.floor(E))),z=E-O),P&&(n.dxydi(I,D,O,R,z),S[0]+=I[0]*P,S[1]+=I[1]*P),F&&(n.dxydj(I,D,O,R,z),S[0]+=I[0]*F,S[1]+=I[1]*F)}return S},n.c2p=function(p,_,h){return[_.c2p(p[0]),h.c2p(p[1])]},n.p2x=function(p,_,h){return[_.p2c(p[0]),h.p2c(p[1])]},n.dadi=function(p){var _=Math.max(0,Math.min(r.length-2,p));return r[_+1]-r[_]},n.dbdj=function(p){var _=Math.max(0,Math.min(v.length-2,p));return v[_+1]-v[_]},n.dxyda=function(p,_,h,L){var E=n.dxydi(null,p,_,h,L),S=n.dadi(p,h);return[E[0]/S,E[1]/S]},n.dxydb=function(p,_,h,L){var E=n.dxydj(null,p,_,h,L),S=n.dbdj(_,L);return[E[0]/S,E[1]/S]},n.dxyda_rough=function(p,_,h){var L=x*(h||.1),E=n.ab2xy(p+L,_,!0),S=n.ab2xy(p-L,_,!0);return[(E[0]-S[0])*.5/L,(E[1]-S[1])*.5/L]},n.dxydb_rough=function(p,_,h){var L=u*(h||.1),E=n.ab2xy(p,_+L,!0),S=n.ab2xy(p,_-L,!0);return[(E[0]-S[0])*.5/L,(E[1]-S[1])*.5/L]},n.dpdx=function(p){return p._m},n.dpdy=function(p){return p._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T,e){var a,i,n,r=[],v=[],s=A[0].length,o=A.length;function b(j,X){var ae=0,he,K=0;return j>0&&(he=A[X][j-1])!==void 0&&(K++,ae+=he),j<s-1&&(he=A[X][j+1])!==void 0&&(K++,ae+=he),X>0&&(he=A[X-1][j])!==void 0&&(K++,ae+=he),X<o-1&&(he=A[X+1][j])!==void 0&&(K++,ae+=he),ae/Math.max(1,K)}var g=0;for(a=0;a<s;a++)for(i=0;i<o;i++)A[i][a]===void 0&&(r.push(a),v.push(i),A[i][a]=b(a,i)),g=Math.max(g,Math.abs(A[i][a]));if(!r.length)return A;var d,f,m,l,x,u,M,w,p,_,h,L=1e-5,E=0,S=100,P=0,F=r.length;do{for(E=0,n=0;n<F;n++){a=r[n],i=v[n];var I=0,D=0,R,O,z,G,Y,ee;a===0?(Y=Math.min(s-1,2),z=T[Y],G=T[1],R=A[i][Y],O=A[i][1],D+=O+(O-R)*(T[0]-G)/(G-z),I++):a===s-1&&(Y=Math.max(0,s-3),z=T[Y],G=T[s-2],R=A[i][Y],O=A[i][s-2],D+=O+(O-R)*(T[s-1]-G)/(G-z),I++),(a===0||a===s-1)&&i>0&&i<o-1&&(d=e[i+1]-e[i],f=e[i]-e[i-1],D+=(f*A[i+1][a]+d*A[i-1][a])/(f+d),I++),i===0?(ee=Math.min(o-1,2),z=e[ee],G=e[1],R=A[ee][a],O=A[1][a],D+=O+(O-R)*(e[0]-G)/(G-z),I++):i===o-1&&(ee=Math.max(0,o-3),z=e[ee],G=e[o-2],R=A[ee][a],O=A[o-2][a],D+=O+(O-R)*(e[o-1]-G)/(G-z),I++),(i===0||i===o-1)&&a>0&&a<s-1&&(d=T[a+1]-T[a],f=T[a]-T[a-1],D+=(f*A[i][a+1]+d*A[i][a-1])/(f+d),I++),I?D/=I:(m=T[a+1]-T[a],l=T[a]-T[a-1],x=e[i+1]-e[i],u=e[i]-e[i-1],M=m*l*(m+l),w=x*u*(x+u),D=(M*(u*A[i+1][a]+x*A[i-1][a])+w*(l*A[i][a+1]+m*A[i][a-1]))/(w*(l+m)+M*(u+x))),p=D-A[i][a],_=p/g,E+=_*_,h=I?0:.85,A[i][a]+=p*(1+h)}E=Math.sqrt(E)}while(P++<S&&E>L);return y.log("Smoother converged to",E,"after",P,"iterations"),A}},{"../../lib":515}],724:[function(t,N,V){var y=t("../../lib").isArray1D;N.exports=function(A,T,e){var a=e("x"),i=a&&a.length,n=e("y"),r=n&&n.length;if(!i&&!r)return!1;if(T._cheater=!a,(!i||y(a))&&(!r||y(n))){var v=i?a.length:1/0;r&&(v=Math.min(v,n.length)),T.a&&T.a.length&&(v=Math.min(v,T.a.length)),T.b&&T.b.length&&(v=Math.min(v,T.b.length)),T._length=v}else T._length=null;return!0}},{"../../lib":515}],725:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../scattergeo/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../plots/attributes"),e=t("../../components/color/attributes").defaultLine,a=t("../../lib/extend").extendFlat,i=c.marker.line;N.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:c.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},c.geojson,{}),featureidkey:c.featureidkey,text:a({},c.text,{}),hovertext:a({},c.hovertext,{}),marker:{line:{color:a({},i.color,{dflt:e}),width:a({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:c.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:c.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:y(),showlegend:a({},T.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../constants/numerical").BADNUM,A=t("../../components/colorscale/calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection");function a(i){return i&&typeof i=="string"}N.exports=function(n,r){var v=r._length,s=new Array(v),o;r.geojson?o=function(m){return a(m)||y(m)}:o=a;for(var b=0;b<v;b++){var g=s[b]={},d=r.locations[b],f=r.z[b];o(d)&&y(f)?(g.loc=d,g.z=f):(g.loc=null,g.z=c),g.index=b}return T(s,r),A(n,r,{vals:r.z,containerStr:"",cLetter:"z"}),e(s,r),s}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(t,N,V){var y=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(f,m){return y.coerce(e,a,A,f,m)}var v=r("locations"),s=r("z");if(!(v&&v.length&&y.isArrayOrTypedArray(s)&&s.length)){a.visible=!1;return}a._length=Math.min(v.length,s.length);var o=r("geojson"),b;(typeof o=="string"&&o!==""||y.isPlainObject(o))&&(b="geojson-id");var g=r("locationmode",b);g==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var d=r("marker.line.width");d&&r("marker.line.color"),r("marker.opacity"),c(e,a,n,r,{prefix:"",cLetter:"z"}),y.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(t,N,V){N.exports=function(c,A,T,e,a){c.location=A.location,c.z=A.z;var i=e[a];return i.fIn&&i.fIn.properties&&(c.properties=i.fIn.properties),c.ct=i.ct,c}},{}],729:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("./attributes"),A=t("../../lib").fillText;N.exports=function(a,i,n){var r=a.cd,v=r[0].trace,s=a.subplot,o,b,g,d,f=[i,n],m=[i+360,n];for(b=0;b<r.length;b++)if(o=r[b],d=!1,o._polygons){for(g=0;g<o._polygons.length;g++)o._polygons[g].contains(f)&&(d=!d),o._polygons[g].contains(m)&&(d=!d);if(d)break}if(!(!d||!o))return a.x0=a.x1=a.xa.c2p(o.ct),a.y0=a.y1=a.ya.c2p(o.ct),a.index=o.index,a.location=o.loc,a.z=o.z,a.zLabel=y.tickText(s.mockAxis,s.mockAxis.c2l(o.z),"hover").text,a.hovertemplate=o.hovertemplate,T(a,v,o),[a]};function T(e,a,i){if(!a.hovertemplate){var n=i.hi||a.hoverinfo,r=String(i.loc),v=n==="all"?c.hoverinfo.flags:n.split("+"),s=v.indexOf("name")!==-1,o=v.indexOf("location")!==-1,b=v.indexOf("z")!==-1,g=v.indexOf("text")!==-1,d=!s&&o,f=[];d?e.nameOverride=r:(s&&(e.nameOverride=a.name),o&&f.push(r)),b&&f.push(e.zLabel),g&&A(i,a,f),e.extraText=f.join("<br>")}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"choropleth",basePlotModule:t("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../lib/geo_location_utils"),T=t("../../lib/topojson_utils").getTopojsonFeatures,e=t("../../plots/cartesian/autorange").findExtremes,a=t("./style").style;function i(r,v,s){var o=v.layers.backplot.select(".choroplethlayer");c.makeTraceGroups(o,s,"trace choropleth").each(function(b){var g=y.select(this),d=g.selectAll("path.choroplethlocation").data(c.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),a(r,b)})}function n(r,v){for(var s=r[0].trace,o=v[s.geo],b=o._subplot,g=s.locationmode,d=s._length,f=g==="geojson-id"?A.extractTraceFeature(r):T(s,b.topojson),m=[],l=[],x=0;x<d;x++){var u=r[x],M=g==="geojson-id"?u.fOut:A.locationToFeature(g,u.loc,f);if(M){u.geojson=M,u.ct=M.properties.ct,u._polygons=A.feature2polygons(M);var w=A.computeBbox(M);m.push(w[0],w[2]),l.push(w[1],w[3])}else u.geojson=null}if(o.fitbounds==="geojson"&&g==="geojson-id"){var p=A.computeBbox(A.getTraceGeojson(s));m=[p[0],p[2]],l=[p[1],p[3]]}var _={padded:!0};s._extremes.lon=e(o.lonaxis._ax,m,_),s._extremes.lat=e(o.lataxis._ax,l,_)}N.exports={calcGeoJSON:n,plot:i}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(t,N,V){N.exports=function(c,A){var T=c.cd,e=c.xaxis,a=c.yaxis,i=[],n,r,v,s,o;if(A===!1)for(n=0;n<T.length;n++)T[n].selected=0;else for(n=0;n<T.length;n++)r=T[n],v=r.ct,v&&(s=e.c2p(v),o=a.c2p(v),A.contains([s,o],null,n,c)?(i.push({pointNumber:n,lon:v[0],lat:v[1]}),r.selected=1):r.selected=0);return i}},{}],733:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/color"),A=t("../../components/drawing"),T=t("../../components/colorscale");function e(n,r){r&&a(n,r)}function a(n,r){var v=r[0].trace,s=r[0].node3,o=s.selectAll(".choroplethlocation"),b=v.marker||{},g=b.line||{},d=T.makeColorScaleFuncFromTrace(v);o.each(function(f){y.select(this).attr("fill",d(f.z)).call(c.stroke,f.mlc||g.color).call(A.dashLine,"",f.mlw||g.width||0).style("opacity",b.opacity)}),A.selectedPointStyle(o,v)}function i(n,r){var v=r[0].node3,s=r[0].trace;s.selectedpoints?A.selectedPointStyle(v.selectAll(".choroplethlocation"),s):a(n,r)}N.exports={style:e,styleOnSelect:i}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(t,N,V){var y=t("../choropleth/attributes"),c=t("../../components/colorscale/attributes"),A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat;N.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},y.featureidkey,{}),below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,marker:{line:{color:e({},y.marker.line.color,{editType:"plot"}),width:e({},y.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},y.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},y.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},y.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:y.hoverinfo,hovertemplate:A({},{keys:["properties"]}),showlegend:e({},T.showlegend,{dflt:!1})},c("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../components/colorscale"),T=t("../../components/drawing"),e=t("../../lib/geojson_utils").makeBlank,a=t("../../lib/geo_location_utils");function i(r){var v=r[0].trace,s=v.visible===!0&&v._length!==0,o={layout:{visibility:"none"},paint:{}},b={layout:{visibility:"none"},paint:{}},g=v._opts={fill:o,line:b,geojson:e()};if(!s)return g;var d=a.extractTraceFeature(r);if(!d)return g;var f=A.makeColorScaleFuncFromTrace(v),m=v.marker,l=m.line||{},x;c.isArrayOrTypedArray(m.opacity)&&(x=function(E){var S=E.mo;return y(S)?+c.constrain(S,0,1):0});var u;c.isArrayOrTypedArray(l.color)&&(u=function(E){return E.mlc});var M;c.isArrayOrTypedArray(l.width)&&(M=function(E){return E.mlw});for(var w=0;w<r.length;w++){var p=r[w],_=p.fOut;if(_){var h=_.properties;h.fc=f(p.z),x&&(h.mo=x(p)),u&&(h.mlc=u(p)),M&&(h.mlw=M(p)),p.ct=h.ct,p._polygons=a.feature2polygons(_)}}var L=x?{type:"identity",property:"mo"}:m.opacity;return c.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),c.extendFlat(b.paint,{"line-color":u?{type:"identity",property:"mlc"}:l.color,"line-width":M?{type:"identity",property:"mlw"}:l.width,"line-opacity":L}),o.layout.visibility="visible",b.layout.visibility="visible",g.geojson={type:"FeatureCollection",features:d},n(r),g}function n(r){var v=r[0].trace,s=v._opts,o;if(v.selectedpoints){for(var b=T.makeSelectedPointStyleFns(v),g=0;g<r.length;g++){var d=r[g];d.fOut&&(d.fOut.properties.mo2=b.selectedOpacityFn(d))}o={type:"identity",property:"mo2"}}else o=c.isArrayOrTypedArray(v.marker.opacity)?{type:"identity",property:"mo"}:v.marker.opacity;return c.extendFlat(s.fill.paint,{"fill-opacity":o}),c.extendFlat(s.line.paint,{"line-opacity":o}),s}N.exports={convert:i,convertOnSelect:n}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(t,N,V){var y=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(g,d){return y.coerce(e,a,A,g,d)}var v=r("locations"),s=r("z"),o=r("geojson");if(!y.isArrayOrTypedArray(v)||!v.length||!y.isArrayOrTypedArray(s)||!s.length||!(typeof o=="string"&&o!==""||y.isPlainObject(o))){a.visible=!1;return}r("featureidkey"),a._length=Math.min(v.length,s.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var b=r("marker.line.width");b&&r("marker.line.color"),r("marker.opacity"),c(e,a,n,r,{prefix:"",cLetter:"z"}),y.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../choropleth/calc"),plot:t("./plot"),hoverPoints:t("../choropleth/hover"),eventData:t("../choropleth/event_data"),selectPoints:t("../choropleth/select"),styleOnSelect:function(y,c){if(c){var A=c[0].trace;A._glTrace.updateOnSelect(c)}},getBelow:function(y,c){for(var A=c.getMapLayers(),T=A.length-2;T>=0;T--){var e=A[T].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var a=T+1;a<A.length;a++)if(e=A[a].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(t,N,V){var y=t("./convert").convert,c=t("./convert").convertOnSelect,A=t("../../plots/mapbox/constants").traceLayerPrefix;function T(a,i){this.type="choroplethmapbox",this.subplot=a,this.uid=i,this.sourceId="source-"+i,this.layerList=[["fill",A+i+"-fill"],["line",A+i+"-line"]],this.below=null}var e=T.prototype;e.update=function(a){this._update(y(a)),a[0].trace._glTrace=this},e.updateOnSelect=function(a){this._update(c(a))},e._update=function(a){var i=this.subplot,n=this.layerList,r=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var v=0;v<n.length;v++){var s=n[v],o=s[0],b=s[1],g=a[o];i.setOptions(b,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&i.setOptions(b,"setPaintProperty",g.paint)}},e._addLayers=function(a,i){for(var n=this.subplot,r=this.layerList,v=this.sourceId,s=0;s<r.length;s++){var o=r[s],b=o[0],g=a[b];n.addLayer({type:b,id:o[1],source:v,layout:g.layout,paint:g.paint},i)}},e._removeLayers=function(){for(var a=this.subplot.map,i=this.layerList,n=i.length-1;n>=0;n--)a.removeLayer(i[n][1])},e.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},N.exports=function(i,n){var r=n[0].trace,v=new T(i,r.uid),s=v.sourceId,o=y(n),b=v.below=i.belowLookup["trace-"+r.uid];return i.map.addSource(s,{type:"geojson",data:o.geojson}),v._addLayers(o,b),n[0].trace._glTrace=v,v}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(t,N,V){var y=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:A({editType:"calc"},{keys:["norm"]}),uhoverformat:c("u",1),vhoverformat:c("v",1),whoverformat:c("w",1),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(i,y("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=T[r]}),i.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,N.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(t,N,V){var y=t("../../components/colorscale/calc");N.exports=function(A,T){for(var e=T.u,a=T.v,i=T.w,n=Math.min(T.x.length,T.y.length,T.z.length,e.length,a.length,i.length),r=-1/0,v=1/0,s=0;s<n;s++){var o=e[s],b=a[s],g=i[s],d=Math.sqrt(o*o+b*b+g*g);r=Math.max(r,d),v=Math.min(v,d)}T._len=n,T._normMax=r,y(A,T,{vals:[v,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(t,N,V){var y=t("../../../stackgl_modules").gl_cone3d,c=t("../../../stackgl_modules").gl_cone3d.createConeMesh,A=t("../../lib").simpleMap,T=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,a=t("../../plots/gl3d/zip3");function i(g,d){this.scene=g,this.uid=d,this.mesh=null,this.data=null}var n=i.prototype;n.handlePick=function(g){if(g.object===this.mesh){var d=g.index=g.data.index,f=this.data.x[d],m=this.data.y[d],l=this.data.z[d],x=this.data.u[d],u=this.data.v[d],M=this.data.w[d];g.traceCoordinate=[f,m,l,x,u,M,Math.sqrt(x*x+u*u+M*M)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[d]!==void 0?g.textLabel=w[d]:w&&(g.textLabel=w),!0}};var r={xaxis:0,yaxis:1,zaxis:2},v={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function o(g,d){var f=g.fullSceneLayout,m=g.dataScale,l={};function x(p,_){var h=f[_],L=m[r[_]];return A(p,function(E){return h.d2l(E)*L})}l.vectors=a(x(d.u,"xaxis"),x(d.v,"yaxis"),x(d.w,"zaxis"),d._len),l.positions=a(x(d.x,"xaxis"),x(d.y,"yaxis"),x(d.z,"zaxis"),d._len);var u=e(d);l.colormap=T(d),l.vertexIntensityBounds=[u.min/d._normMax,u.max/d._normMax],l.coneOffset=v[d.anchor],d.sizemode==="scaled"?l.coneSize=d.sizeref||.5:l.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5;var M=y(l),w=d.lightposition;return M.lightPosition=[w.x,w.y,w.z],M.ambient=d.lighting.ambient,M.diffuse=d.lighting.diffuse,M.specular=d.lighting.specular,M.roughness=d.lighting.roughness,M.fresnel=d.lighting.fresnel,M.opacity=d.opacity,d._pad=s[d.anchor]*M.vectorScale*M.coneScale*d._normMax,M}n.update=function(g){this.data=g;var d=o(this.scene,g);this.mesh.update(d)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(g,d){var f=g.glplot.gl,m=o(g,d),l=c(f,m),x=new i(g,d.uid);return x.mesh=l,x.data=d,l._trace=x,g.glplot.add(l),x}N.exports=b},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(t,N,V){var y=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(f,m){return y.coerce(e,a,A,f,m)}var v=r("u"),s=r("v"),o=r("w"),b=r("x"),g=r("y"),d=r("z");if(!v||!v.length||!s||!s.length||!o||!o.length||!b||!b.length||!g||!g.length||!d||!d.length){a.visible=!1;return}r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),c(e,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(t,N,V){N.exports={moduleType:"trace",name:"cone",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),eventData:function(y,c){return y.norm=c.traceCoordinate[6],y},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(t,N,V){var y=t("../heatmap/attributes"),c=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes"),T=A.axisHoverFormat,e=A.descriptionOnlyNumbers,a=t("../../components/colorscale/attributes"),i=t("../../components/drawing/attributes").dash,n=t("../../plots/font_attributes"),r=t("../../lib/extend").extendFlat,v=t("../../constants/filter_ops"),s=v.COMPARISON_OPS2,o=v.INTERVAL_OPS,b=c.line;N.exports=r({z:y.z,x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:c.xperiod0,yperiod0:c.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,text:y.text,hovertext:y.hovertext,transpose:y.transpose,xtype:y.xtype,ytype:y.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:y.hovertemplate,texttemplate:r({},y.texttemplate,{}),textfont:r({},y.textfont,{}),hoverongaps:y.hoverongaps,connectgaps:r({},y.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},b.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:i,smoothing:r({},b.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(t,N,V){var y=t("../../components/colorscale"),c=t("../heatmap/calc"),A=t("./set_contours"),T=t("./end_plus");N.exports=function(a,i){var n=c(a,i),r=n[0].z;A(i,r);var v=i.contours,s=y.extractOpts(i),o;if(v.coloring==="heatmap"&&s.auto&&i.autocontour===!1){var b=v.start,g=T(v),d=v.size||1,f=Math.floor((g-b)/d)+1;isFinite(d)||(d=1,f=1);var m=b-d/2,l=m+f*d;o=[m,l]}else o=r;return y.calc(a,i,{vals:o,cLetter:"z"}),n}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(t,N,V){N.exports=function(y,c){var A=y[0],T=A.z,e;switch(c.type){case"levels":var a=Math.min(T[0][0],T[0][1]);for(e=0;e<y.length;e++){var i=y[e];i.prefixBoundary=!i.edgepaths.length&&(a>i.level||i.starts.length&&a===i.level)}break;case"constraint":if(A.prefixBoundary=!1,A.edgepaths.length)return;var n=A.x.length,r=A.y.length,v=-1/0,s=1/0;for(e=0;e<r;e++)s=Math.min(s,T[e][0]),s=Math.min(s,T[e][n-1]),v=Math.max(v,T[e][0]),v=Math.max(v,T[e][n-1]);for(e=1;e<n-1;e++)s=Math.min(s,T[0][e]),s=Math.min(s,T[r-1][e]),v=Math.max(v,T[0][e]),v=Math.max(v,T[r-1][e]);var o=c.value,b,g;switch(c._operation){case">":o>v&&(A.prefixBoundary=!0);break;case"<":(o<s||A.starts.length&&o===s)&&(A.prefixBoundary=!0);break;case"[]":b=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),(g<s||b>v||A.starts.length&&g===s)&&(A.prefixBoundary=!0);break;case"][":b=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),b<s&&g>v&&(A.prefixBoundary=!0);break}break}}},{}],747:[function(t,N,V){var y=t("../../components/colorscale"),c=t("./make_color_map"),A=t("./end_plus");function T(e,a,i){var n=a.contours,r=a.line,v=n.size||1,s=n.coloring,o=c(a,{isColorbar:!0});if(s==="heatmap"){var b=y.extractOpts(a);i._fillgradient=b.reversescale?y.flipScale(b.colorscale):b.colorscale,i._zrange=[b.min,b.max]}else s==="fill"&&(i._fillcolor=o);i._line={color:s==="lines"?o:r.color,width:n.showlines!==!1?r.width:0,dash:r.dash},i._levels={start:n.start,end:A(n),size:v}}N.exports={min:"zmin",max:"zmax",calc:T}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(t,N,V){N.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(t,N,V){var y=t("fast-isnumeric"),c=t("./label_defaults"),A=t("../../components/color"),T=A.addOpacity,e=A.opacity,a=t("../../constants/filter_ops"),i=a.CONSTRAINT_REDUCTION,n=a.COMPARISON_OPS2;N.exports=function(s,o,b,g,d,f){var m=o.contours,l,x,u,M=b("contours.operation");if(m._operation=i[M],r(b,m),M==="="?l=m.showlines=!0:(l=b("contours.showlines"),u=b("fillcolor",T((s.line||{}).color||d,.5))),l){var w=u&&e(u)?T(o.fillcolor,1):d;x=b("line.color",w),b("line.width",2),b("line.dash")}b("line.smoothing"),c(b,g,x,f)};function r(v,s){var o;n.indexOf(s.operation)===-1?(v("contours.value",[0,1]),Array.isArray(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(o=parseFloat(s.value[0]),s.value=[o,o+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:y(s.value)&&(o=parseFloat(s.value),s.value=[o,o+1])):(v("contours.value",0),y(s.value)||(Array.isArray(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(t,N,V){var y=t("../../constants/filter_ops"),c=t("fast-isnumeric");N.exports={"[]":T("[]"),"][":T("]["),">":e(">"),"<":e("<"),"=":e("=")};function A(a,i){var n=Array.isArray(i),r;function v(s){return c(s)?+s:null}return y.COMPARISON_OPS2.indexOf(a)!==-1?r=v(n?i[0]:i):y.INTERVAL_OPS.indexOf(a)!==-1?r=n?[v(i[0]),v(i[1])]:[v(i),v(i)]:y.SET_OPS.indexOf(a)!==-1&&(r=n?i.map(v):[v(i)]),r}function T(a){return function(i){i=A(a,i);var n=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]);return{start:n,end:r,size:r-n}}}function e(a){return function(i){return i=A(a,i),{start:i,end:1/0,size:1/0}}}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(t,N,V){N.exports=function(c,A,T,e){var a=e("contours.start"),i=e("contours.end"),n=a===!1||i===!1,r=T("contours.size"),v;n?v=A.autocontour=!0:v=T("autocontour",!1),(v||!r)&&T("ncontours")}},{}],752:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){var e,a,i,n=function(s){return s.reverse()},r=function(s){return s};switch(T){case"=":case"<":return A;case">":for(A.length!==1&&y.warn("Contour data invalid for the specified inequality operation."),a=A[0],e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=n(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=n(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=n(a.starts[e]);return A;case"][":var v=n;n=r,r=v;case"[]":for(A.length!==2&&y.warn("Contour data invalid for the specified inequality range operation."),a=c(A[0]),i=c(A[1]),e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=n(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=n(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=n(a.starts[e]);for(;i.edgepaths.length;)a.edgepaths.push(r(i.edgepaths.shift()));for(;i.paths.length;)a.paths.push(r(i.paths.shift()));for(;i.starts.length;)a.starts.push(r(i.starts.shift()));return[a]}};function c(A){return y.extendFlat({},A,{edgepaths:y.extendDeep([],A.edgepaths),paths:y.extendDeep([],A.paths),starts:y.extendDeep([],A.starts)})}},{"../../lib":515}],753:[function(t,N,V){var y=t("../../lib"),c=t("../heatmap/xyz_defaults"),A=t("../scatter/period_defaults"),T=t("./constraint_defaults"),e=t("./contours_defaults"),a=t("./style_defaults"),i=t("../heatmap/label_defaults"),n=t("./attributes");N.exports=function(v,s,o,b){function g(l,x){return y.coerce(v,s,n,l,x)}function d(l){return y.coerce2(v,s,n,l)}var f=c(v,s,g,b);if(!f){s.visible=!1;return}A(v,s,b,g),g("xhoverformat"),g("yhoverformat"),g("text"),g("hovertext"),g("hoverongaps"),g("hovertemplate");var m=g("contours.type")==="constraint";g("connectgaps",y.isArray1D(s.z)),m?T(v,s,g,b,o):(e(v,s,g,d),a(v,s,g,b)),s.contours&&s.contours.coloring==="heatmap"&&i(g,b)}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(t,N,V){var y=t("../../lib"),c=t("./constraint_mapping"),A=t("./end_plus");N.exports=function(e,a,i){for(var n=e.type==="constraint"?c[e._operation](e.value):e,r=n.size,v=[],s=A(n),o=i.trace._carpetTrace,b=o?{xaxis:o.aaxis,yaxis:o.baxis,x:i.a,y:i.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:i.x,y:i.y},g=n.start;g<s;g+=r)if(v.push(y.extendFlat({level:g,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},b)),v.length>1e3){y.warn("Too many contours, clipping at 1000",e);break}return v}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(t,N,V){N.exports=function(c){return c.end+c.size/1e6}},{}],756:[function(t,N,V){var y=t("../../lib"),c=t("./constants");N.exports=function(r,v,s){var o,b,g,d,f;for(v=v||.01,s=s||.01,g=0;g<r.length;g++){for(d=r[g],f=0;f<d.starts.length;f++)b=d.starts[f],e(d,b,"edge",v,s);for(o=0;Object.keys(d.crossings).length&&o<1e4;)o++,b=Object.keys(d.crossings)[0].split(",").map(Number),e(d,b,void 0,v,s);o===1e4&&y.log("Infinite loop in contour?")}};function A(n,r,v,s){return Math.abs(n[0]-r[0])<v&&Math.abs(n[1]-r[1])<s}function T(n,r){var v=n[2]-r[2],s=n[3]-r[3];return Math.sqrt(v*v+s*s)}function e(n,r,v,s,o){var b=r.join(","),g=n.crossings[b],d=a(g,v,r),f=[i(n,r,[-d[0],-d[1]])],m=n.z.length,l=n.z[0].length,x=r.slice(),u=d.slice(),M;for(M=0;M<1e4;M++){if(g>20?(g=c.CHOOSESADDLE[g][(d[0]||d[1])<0?0:1],n.crossings[b]=c.SADDLEREMAINDER[g]):delete n.crossings[b],d=c.NEWDELTA[g],!d){y.log("Found bad marching index:",g,r,n.level);break}f.push(i(n,r,d)),r[0]+=d[0],r[1]+=d[1],b=r.join(","),A(f[f.length-1],f[f.length-2],s,o)&&f.pop();var w=d[0]&&(r[0]<0||r[0]>l-2)||d[1]&&(r[1]<0||r[1]>m-2),p=r[0]===x[0]&&r[1]===x[1]&&d[0]===u[0]&&d[1]===u[1];if(p||v&&w)break;g=n.crossings[b]}M===1e4&&y.log("Infinite loop in contour?");var _=A(f[0],f[f.length-1],s,o),h=0,L=.2*n.smoothing,E=[],S=0,P,F,I,D,R,O,z,G,Y,ee,j;for(M=1;M<f.length;M++)z=T(f[M],f[M-1]),h+=z,E.push(z);var X=h/E.length*L;function ae(J){return f[J%f.length]}for(M=f.length-2;M>=S;M--)if(P=E[M],P<X){for(I=0,F=M-1;F>=S&&P+E[F]<X;F--)P+=E[F];if(_&&M===f.length-2)for(I=0;I<F&&P+E[I]<X;I++)P+=E[I];R=M-F+I+1,O=Math.floor((M+F+I+2)/2),!_&&M===f.length-2?D=f[f.length-1]:!_&&F===-1?D=f[0]:R%2?D=ae(O):D=[(ae(O)[0]+ae(O+1)[0])/2,(ae(O)[1]+ae(O+1)[1])/2],f.splice(F+1,M-F+1,D),M=F+1,I&&(S=I),_&&(M===f.length-2?f[I]=f[f.length-1]:M===0&&(f[f.length-1]=f[0]))}for(f.splice(0,S),M=0;M<f.length;M++)f[M].length=2;if(!(f.length<2))if(_)f.pop(),n.paths.push(f);else{v||y.log("Unclosed interior contour?",n.level,x.join(","),f.join("L"));var he=!1;for(G=0;G<n.edgepaths.length;G++)if(ee=n.edgepaths[G],!he&&A(ee[0],f[f.length-1],s,o)){f.pop(),he=!0;var K=!1;for(Y=0;Y<n.edgepaths.length;Y++)if(j=n.edgepaths[Y],A(j[j.length-1],f[0],s,o)){K=!0,f.shift(),n.edgepaths.splice(G,1),Y===G?n.paths.push(f.concat(j)):(Y>G&&Y--,n.edgepaths[Y]=j.concat(f,ee));break}K||(n.edgepaths[G]=f.concat(ee))}for(G=0;G<n.edgepaths.length&&!he;G++)ee=n.edgepaths[G],A(ee[ee.length-1],f[0],s,o)&&(f.shift(),n.edgepaths[G]=ee.concat(f),he=!0);he||n.edgepaths.push(f)}}function a(n,r,v){var s=0,o=0;return n>20&&r?n===208||n===1114?s=v[0]===0?1:-1:o=v[1]===0?1:-1:c.BOTTOMSTART.indexOf(n)!==-1?o=1:c.LEFTSTART.indexOf(n)!==-1?s=1:c.TOPSTART.indexOf(n)!==-1?o=-1:s=-1,[s,o]}function i(n,r,v){var s=r[0]+Math.max(v[0],0),o=r[1]+Math.max(v[1],0),b=n.z[o][s],g=n.xaxis,d=n.yaxis;if(v[1]){var f=(n.level-b)/(n.z[o][s+1]-b),m=(f!==1?(1-f)*g.c2l(n.x[s]):0)+(f!==0?f*g.c2l(n.x[s+1]):0);return[g.c2p(g.l2c(m),!0),d.c2p(n.y[o],!0),s+f,o]}else{var l=(n.level-b)/(n.z[o+1][s]-b),x=(l!==1?(1-l)*d.c2l(n.y[o]):0)+(l!==0?l*d.c2l(n.y[o+1]):0);return[g.c2p(n.x[s],!0),d.c2p(d.l2c(x),!0),s,o+l]}}},{"../../lib":515,"./constants":748}],757:[function(t,N,V){var y=t("../../components/color"),c=t("../heatmap/hover");N.exports=function(T,e,a,i,n){n||(n={}),n.isContour=!0;var r=c(T,e,a,i,n);return r&&r.forEach(function(v){var s=v.trace;s.contours.type==="constraint"&&(s.fillcolor&&y.opacity(s.fillcolor)?v.color=y.addOpacity(s.fillcolor,1):s.contours.showlines&&y.opacity(s.line.color)&&(v.color=y.addOpacity(s.line.color,1)))}),r}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot").plot,style:t("./style"),colorbar:t("./colorbar"),hoverPoints:t("./hover"),moduleType:"trace",name:"contour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T,e,a){a||(a={});var i=A("contours.showlabels");if(i){var n=T.font;y.coerceFont(A,"contours.labelfont",{family:n.family,size:n.size,color:e}),A("contours.labelformat")}a.hasHover!==!1&&A("zhoverformat")}},{"../../lib":515}],760:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/colorscale"),A=t("./end_plus");N.exports=function(e){var a=e.contours,i=a.start,n=A(a),r=a.size||1,v=Math.floor((n-i)/r)+1,s=a.coloring==="lines"?0:1,o=c.extractOpts(e);isFinite(r)||(r=1,v=1);var b=o.reversescale?c.flipScale(o.colorscale):o.colorscale,g=b.length,d=new Array(g),f=new Array(g),m,l;if(a.coloring==="heatmap"){var x=o.min,u=o.max;for(l=0;l<g;l++)m=b[l],d[l]=m[0]*(u-x)+x,f[l]=m[1];var M=y.extent([x,u,a.start,a.start+r*(v-1)]),w=M[x<u?0:1],p=M[x<u?1:0];w!==x&&(d.splice(0,0,w),f.splice(0,0,f[0])),p!==u&&(d.push(p),f.push(f[f.length-1]))}else for(l=0;l<g;l++)m=b[l],d[l]=(m[0]*(v+s-1)-s/2)*r+i,f[l]=m[1];return c.makeColorScaleFunc({domain:d,range:f},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(t,N,V){var y=t("./constants");N.exports=function(T){var e=T[0].z,a=e.length,i=e[0].length,n=a===2||i===2,r,v,s,o,b,g,d,f,m;for(v=0;v<a-1;v++)for(o=[],v===0&&(o=o.concat(y.BOTTOMSTART)),v===a-2&&(o=o.concat(y.TOPSTART)),r=0;r<i-1;r++)for(s=o.slice(),r===0&&(s=s.concat(y.LEFTSTART)),r===i-2&&(s=s.concat(y.RIGHTSTART)),b=r+","+v,g=[[e[v][r],e[v][r+1]],[e[v+1][r],e[v+1][r+1]]],m=0;m<T.length;m++)f=T[m],d=c(f.level,g),d&&(f.crossings[b]=d,s.indexOf(d)!==-1&&(f.starts.push([r,v]),n&&s.indexOf(d,s.indexOf(d)+1)!==-1&&f.starts.push([r,v])))};function c(A,T){var e=(T[0][0]>A?0:1)+(T[0][1]>A?0:2)+(T[1][1]>A?0:4)+(T[1][0]>A?0:8);if(e===5||e===10){var a=(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4;return A>a?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":748}],762:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../components/colorscale"),e=t("../../lib/svg_text_utils"),a=t("../../plots/cartesian/axes"),i=t("../../plots/cartesian/set_convert"),n=t("../heatmap/plot"),r=t("./make_crossings"),v=t("./find_all_paths"),s=t("./empty_pathinfo"),o=t("./convert_to_constraints"),b=t("./close_boundaries"),g=t("./constants"),d=g.LABELOPTIMIZER;V.plot=function(_,h,L,E){var S=h.xaxis,P=h.yaxis;c.makeTraceGroups(E,L,"contour").each(function(F){var I=y.select(this),D=F[0],R=D.trace,O=D.x,z=D.y,G=R.contours,Y=s(G,h,D),ee=c.ensureSingle(I,"g","heatmapcoloring"),j=[];G.coloring==="heatmap"&&(j=[F]),n(_,h,j,ee),r(Y),v(Y);var X=S.c2p(O[0],!0),ae=S.c2p(O[O.length-1],!0),he=P.c2p(z[0],!0),K=P.c2p(z[z.length-1],!0),J=[[X,K],[ae,K],[ae,he],[X,he]],U=Y;G.type==="constraint"&&(U=o(Y,G._operation)),f(I,J,G),m(I,U,J,G),x(I,Y,_,D,G),M(I,h,_,D,J)})};function f(p,_,h){var L=c.ensureSingle(p,"g","contourbg"),E=L.selectAll("path").data(h.coloring==="fill"?[0]:[]);E.enter().append("path"),E.exit().remove(),E.attr("d","M"+_.join("L")+"Z").style("stroke","none")}function m(p,_,h,L){var E=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",S="M"+h.join("L")+"Z";E&&b(_,L);var P=c.ensureSingle(p,"g","contourfill"),F=P.selectAll("path").data(E?_:[]);F.enter().append("path"),F.exit().remove(),F.each(function(I){var D=(I.prefixBoundary?S:"")+l(I,h);D?y.select(this).attr("d",D).style("stroke","none"):y.select(this).remove()})}function l(p,_){var h="",L=0,E=p.edgepaths.map(function(X,ae){return ae}),S=!0,P,F,I,D,R,O;function z(X){return Math.abs(X[1]-_[0][1])<.01}function G(X){return Math.abs(X[1]-_[2][1])<.01}function Y(X){return Math.abs(X[0]-_[0][0])<.01}function ee(X){return Math.abs(X[0]-_[2][0])<.01}for(;E.length;){for(O=A.smoothopen(p.edgepaths[L],p.smoothing),h+=S?O:O.replace(/^M/,"L"),E.splice(E.indexOf(L),1),P=p.edgepaths[L][p.edgepaths[L].length-1],D=-1,I=0;I<4;I++){if(!P){c.log("Missing end?",L,p);break}for(z(P)&&!ee(P)?F=_[1]:Y(P)?F=_[0]:G(P)?F=_[3]:ee(P)&&(F=_[2]),R=0;R<p.edgepaths.length;R++){var j=p.edgepaths[R][0];Math.abs(P[0]-F[0])<.01?Math.abs(P[0]-j[0])<.01&&(j[1]-P[1])*(F[1]-j[1])>=0&&(F=j,D=R):Math.abs(P[1]-F[1])<.01?Math.abs(P[1]-j[1])<.01&&(j[0]-P[0])*(F[0]-j[0])>=0&&(F=j,D=R):c.log("endpt to newendpt is not vert. or horz.",P,F,j)}if(P=F,D>=0)break;h+="L"+F}if(D===p.edgepaths.length){c.log("unclosed perimeter path");break}L=D,S=E.indexOf(L)===-1,S&&(L=E[0],h+="Z")}for(L=0;L<p.paths.length;L++)h+=A.smoothclosed(p.paths[L],p.smoothing);return h}function x(p,_,h,L,E){var S=c.ensureSingle(p,"g","contourlines"),P=E.showlines!==!1,F=E.showlabels,I=P&&F,D=V.createLines(S,P||F,_),R=V.createLineClip(S,I,h,L.trace.uid),O=p.selectAll("g.contourlabels").data(F?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),F){var z=[],G=[];c.clearLocationCache();var Y=V.labelFormatter(h,L),ee=A.tester.append("text").attr("data-notex",1).call(A.font,E.labelfont),j=_[0].xaxis,X=_[0].yaxis,ae=j._length,he=X._length,K=j.range,J=X.range,U=c.aggNums(Math.min,null,L.x),H=c.aggNums(Math.max,null,L.x),q=c.aggNums(Math.min,null,L.y),re=c.aggNums(Math.max,null,L.y),Z=Math.max(j.c2p(U,!0),0),Q=Math.min(j.c2p(H,!0),ae),ie=Math.max(X.c2p(re,!0),0),oe=Math.min(X.c2p(q,!0),he),ne={};K[0]<K[1]?(ne.left=Z,ne.right=Q):(ne.left=Q,ne.right=Z),J[0]<J[1]?(ne.top=ie,ne.bottom=oe):(ne.top=oe,ne.bottom=ie),ne.middle=(ne.top+ne.bottom)/2,ne.center=(ne.left+ne.right)/2,z.push([[ne.left,ne.top],[ne.right,ne.top],[ne.right,ne.bottom],[ne.left,ne.bottom]]);var le=Math.sqrt(ae*ae+he*he),_e=g.LABELDISTANCE*le/Math.max(1,_.length/g.LABELINCREASE);D.each(function(fe){var ye=V.calcTextOpts(fe.level,Y,ee,h);y.select(this).selectAll("path").each(function(){var xe=this,me=c.getVisibleSegment(xe,ne,ye.height/2);if(!!me&&!(me.len<(ye.width+ye.height)*g.LABELMIN))for(var be=Math.min(Math.ceil(me.len/_e),g.LABELMAX),ke=0;ke<be;ke++){var De=V.findBestTextLocation(xe,me,ye,G,ne);if(!De)break;V.addLabelData(De,ye,G,z)}})}),ee.remove(),V.drawLabels(O,G,h,R,I?z:null)}F&&!P&&D.remove()}V.createLines=function(p,_,h){var L=h[0].smoothing,E=p.selectAll("g.contourlevel").data(_?h:[]);if(E.exit().remove(),E.enter().append("g").classed("contourlevel",!0),_){var S=E.selectAll("path.openline").data(function(F){return F.pedgepaths||F.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(F){return A.smoothopen(F,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=E.selectAll("path.closedline").data(function(F){return F.ppaths||F.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(F){return A.smoothclosed(F,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return E},V.createLineClip=function(p,_,h,L){var E=h._fullLayout._clips,S=_?"clipline"+L:null,P=E.selectAll("#"+S).data(_?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",S),A.setClipUrl(p,S,h),P},V.labelFormatter=function(p,_){var h=p._fullLayout,L=_.trace,E=L.contours,S={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(E.labelformat)S.tickformat=E.labelformat,i(S,h);else{var P=T.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)S=P.colorbar._axis;else{if(E.type==="constraint"){var F=E.value;Array.isArray(F)?S.range=[F[0],F[F.length-1]]:S.range=[F,F]}else S.range=[E.start,E.end],S.nticks=(E.end-E.start)/E.size;S.range[0]===S.range[1]&&(S.range[1]+=S.range[0]||1),S.nticks||(S.nticks=1e3),i(S,h),a.prepTicks(S),S._tmin=null,S._tmax=null}}return function(I){return a.tickText(S,I).text}},V.calcTextOpts=function(p,_,h,L){var E=_(p);h.text(E).call(e.convertToTspans,L);var S=h.node(),P=A.bBox(S,!0);return{text:E,width:P.width,height:P.height,fontSize:+S.style["font-size"].replace("px",""),level:p,dy:(P.top+P.bottom)/2}},V.findBestTextLocation=function(p,_,h,L,E){var S=h.width,P,F,I,D,R;_.isClosed?(F=_.len/d.INITIALSEARCHPOINTS,P=_.min+F/2,I=_.max):(F=(_.len-S)/(d.INITIALSEARCHPOINTS+1),P=_.min+F+S/2,I=_.max-(F+S)/2);for(var O=1/0,z=0;z<d.ITERATIONS;z++){for(var G=P;G<I;G+=F){var Y=c.getTextLocation(p,_.total,G,S),ee=u(Y,h,L,E);ee<O&&(O=ee,R=Y,D=G)}if(O>d.MAXCOST*2)break;z&&(F/=2),P=D-F/2,I=P+F*1.5}if(O<=d.MAXCOST)return R};function u(p,_,h,L){var E=_.width/2,S=_.height/2,P=p.x,F=p.y,I=p.theta,D=Math.cos(I)*E,R=Math.sin(I)*E,O=(P>L.center?L.right-P:P-L.left)/(D+Math.abs(Math.sin(I)*S)),z=(F>L.middle?L.bottom-F:F-L.top)/(Math.abs(R)+Math.cos(I)*S);if(O<1||z<1)return 1/0;var G=d.EDGECOST*(1/(O-1)+1/(z-1));G+=d.ANGLECOST*I*I;for(var Y=P-D,ee=F-R,j=P+D,X=F+R,ae=0;ae<h.length;ae++){var he=h[ae],K=Math.cos(he.theta)*he.width/2,J=Math.sin(he.theta)*he.width/2,U=c.segmentDistance(Y,ee,j,X,he.x-K,he.y-J,he.x+K,he.y+J)*2/(_.height+he.height),H=he.level===_.level,q=H?d.SAMELEVELDISTANCE:1;if(U<=q)return 1/0;var re=d.NEIGHBORCOST*(H?d.SAMELEVELFACTOR:1);G+=re/(U-q)}return G}V.addLabelData=function(p,_,h,L){var E=_.fontSize,S=_.width+E/3,P=Math.max(0,_.height-E/3),F=p.x,I=p.y,D=p.theta,R=Math.sin(D),O=Math.cos(D),z=function(Y,ee){return[F+Y*O-ee*R,I+Y*R+ee*O]},G=[z(-S/2,-P/2),z(-S/2,P/2),z(S/2,P/2),z(S/2,-P/2)];h.push({text:_.text,x:F,y:I,dy:_.dy,theta:D,level:_.level,width:S,height:P}),L.push(G)},V.drawLabels=function(p,_,h,L,E){var S=p.selectAll("text").data(_,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(S.exit().remove(),S.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,O=D.y-Math.cos(D.theta)*D.dy;y.select(this).text(D.text).attr({x:R,y:O,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+O+")"}).call(e.convertToTspans,h)}),E){for(var P="",F=0;F<E.length;F++)P+="M"+E[F].join("L")+"Z";var I=c.ensureSingle(L,"path","");I.attr("d",P)}};function M(p,_,h,L,E){var S=L.trace,P=h._fullLayout._clips,F="clip"+S.uid,I=P.selectAll("#"+F).data(S.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",F),I.exit().remove(),S.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:_.xaxis,yaxis:_.yaxis,x:L.x,y:L.y,z:w(L),smoothing:0};r([D]),v([D]),b([D],{type:"levels"});var R=c.ensureSingle(I,"path","");R.attr("d",(D.prefixBoundary?"M"+E.join("L")+"Z":"")+l(D,E))}else F=null;A.setClipUrl(p,F,h)}function w(p){var _=p.trace._emptypoints,h=[],L=p.z.length,E=p.z[0].length,S,P=[],F;for(S=0;S<E;S++)P.push(1);for(S=0;S<L;S++)h.push(P.slice());for(S=0;S<_.length;S++)F=_[S],h[F[0]][F[1]]=0;return p.zmask=h,h}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../lib");N.exports=function(e,a){var i=e.contours;if(e.autocontour){var n=e.zmin,r=e.zmax;(e.zauto||n===void 0)&&(n=c.aggNums(Math.min,null,a)),(e.zauto||r===void 0)&&(r=c.aggNums(Math.max,null,a));var v=A(n,r,e.ncontours);i.size=v.dtick,i.start=y.tickFirst(v),v.range.reverse(),i.end=y.tickFirst(v),i.start===n&&(i.start+=i.size),i.end===r&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),e._input.contours||(e._input.contours={}),c.extendFlat(e._input.contours,{start:i.start,end:i.end,size:i.size}),e._input.autocontour=!0}else if(i.type!=="constraint"){var s=i.start,o=i.end,b=e._input.contours;if(s>o&&(i.start=b.start=o,o=i.end=b.end=s,s=i.start),!(i.size>0)){var g;s===o?g=1:g=A(s,o,e.ncontours).dtick,b.size=i.size=g}}};function A(T,e,a){var i={type:"linear",range:[T,e]};return y.autoTicks(i,(e-T)/(a||15)),i}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../heatmap/style"),T=t("./make_color_map");N.exports=function(a){var i=y.select(a).selectAll("g.contour");i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var r=y.select(this),v=n[0].trace,s=v.contours,o=v.line,b=s.size||1,g=s.start,d=s.type==="constraint",f=!d&&s.coloring==="lines",m=!d&&s.coloring==="fill",l=f||m?T(v):null;r.selectAll("g.contourlevel").each(function(M){y.select(this).selectAll("path").call(c.lineGroupStyle,o.width,f?l(M.level):o.color,o.dash)});var x=s.labelfont;if(r.selectAll("g.contourlabels text").each(function(M){c.font(y.select(this),{family:x.family,size:x.size,color:x.color||(f?l(M.level):o.color)})}),d)r.selectAll("g.contourfill path").style("fill",v.fillcolor);else if(m){var u;r.selectAll("g.contourfill path").style("fill",function(M){return u===void 0&&(u=M.level),l(M.level+.5*b)}),u===void 0&&(u=g),r.selectAll("g.contourbg path").style("fill",l(u-.5*b))}}),A(a)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(t,N,V){var y=t("../../components/colorscale/defaults"),c=t("./label_defaults");N.exports=function(T,e,a,i,n){var r=a("contours.coloring"),v,s="";r==="fill"&&(v=a("contours.showlines")),v!==!1&&(r!=="lines"&&(s=a("line.color","#000")),a("line.width",.5),a("line.dash")),r!=="none"&&(T.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,y(T,e,i,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),c(a,i,s,n)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(t,N,V){var y=t("../heatmap/attributes"),c=t("../contour/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../lib/extend").extendFlat,e=c.contours;N.exports=T({carpet:{valType:"string",editType:"calc"},z:y.z,a:y.x,a0:y.x0,da:y.dx,b:y.y,b0:y.y0,db:y.dy,text:y.text,hovertext:y.hovertext,transpose:y.transpose,atype:y.xtype,btype:y.ytype,fillcolor:c.fillcolor,autocontour:c.autocontour,ncontours:c.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:c.line.color,width:c.line.width,dash:c.line.dash,smoothing:c.line.smoothing,editType:"plot"},transforms:void 0},A("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(t,N,V){var y=t("../../components/colorscale/calc"),c=t("../../lib"),A=t("../heatmap/convert_column_xyz"),T=t("../heatmap/clean_2d_array"),e=t("../heatmap/interp2d"),a=t("../heatmap/find_empties"),i=t("../heatmap/make_bound_array"),n=t("./defaults"),r=t("../carpet/lookup_carpetid"),v=t("../contour/set_contours");N.exports=function(b,g){var d=g._carpetTrace=r(b,g);if(!(!d||!d.visible||d.visible==="legendonly")){if(!g.a||!g.b){var f=b.data[d.index],m=b.data[g.index];m.a||(m.a=f.a),m.b||(m.b=f.b),n(m,g,g._defaultColor,b._fullLayout)}var l=s(b,g);return v(g,g._z),l}};function s(o,b){var g=b._carpetTrace,d=g.aaxis,f=g.baxis,m,l,x,u,M,w,p;d._minDtick=0,f._minDtick=0,c.isArray1D(b.z)&&A(b,d,f,"a","b",["z"]),m=b._a=b._a||b.a,u=b._b=b._b||b.b,m=m?d.makeCalcdata(b,"_a"):[],u=u?f.makeCalcdata(b,"_b"):[],l=b.a0||0,x=b.da||1,M=b.b0||0,w=b.db||1,p=b._z=T(b._z||b.z,b.transpose),b._emptypoints=a(p),e(p,b._emptypoints);var _=c.maxRowLength(p),h=b.xtype==="scaled"?"":m,L=i(b,h,l,x,_,d),E=b.ytype==="scaled"?"":u,S=i(b,E,M,w,p.length,f),P={a:L,b:S,z:p};return b.contours.type==="levels"&&b.contours.coloring!=="none"&&y(o,b,{vals:p,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(t,N,V){var y=t("../../lib"),c=t("../heatmap/xyz_defaults"),A=t("./attributes"),T=t("../contour/constraint_defaults"),e=t("../contour/contours_defaults"),a=t("../contour/style_defaults");N.exports=function(n,r,v,s){function o(f,m){return y.coerce(n,r,A,f,m)}function b(f){return y.coerce2(n,r,A,f)}if(o("carpet"),n.a&&n.b){var g=c(n,r,o,s,"a","b");if(!g){r.visible=!1;return}o("text");var d=o("contours.type")==="constraint";d?T(n,r,o,s,v,{hasHover:!1}):(e(n,r,o,b),a(n,r,o,s,{hasHover:!1}))}else r._defaultColor=v,r._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../contour/colorbar"),calc:t("./calc"),plot:t("./plot"),style:t("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(t,N,V){var y=t("@plotly/d3"),c=t("../carpet/map_1d_array"),A=t("../carpet/makepath"),T=t("../../components/drawing"),e=t("../../lib"),a=t("../contour/make_crossings"),i=t("../contour/find_all_paths"),n=t("../contour/plot"),r=t("../contour/constants"),v=t("../contour/convert_to_constraints"),s=t("../contour/empty_pathinfo"),o=t("../contour/close_boundaries"),b=t("../carpet/lookup_carpetid"),g=t("../carpet/axis_aligned_line");N.exports=function(h,L,E,S){var P=L.xaxis,F=L.yaxis;e.makeTraceGroups(S,E,"contour").each(function(I){var D=y.select(this),R=I[0],O=R.trace,z=O._carpetTrace=b(h,O),G=h.calcdata[z.index][0];if(!z.visible||z.visible==="legendonly")return;var Y=R.a,ee=R.b,j=O.contours,X=s(j,L,R),ae=j.type==="constraint",he=j._operation,K=ae?he==="="?"lines":"fill":j.coloring;function J(_e){var fe=z.ab2xy(_e[0],_e[1],!0);return[P.c2p(fe[0]),F.c2p(fe[1])]}var U=[[Y[0],ee[ee.length-1]],[Y[Y.length-1],ee[ee.length-1]],[Y[Y.length-1],ee[0]],[Y[0],ee[0]]];a(X);var H=(Y[Y.length-1]-Y[0])*1e-8,q=(ee[ee.length-1]-ee[0])*1e-8;i(X,H,q);var re=X;j.type==="constraint"&&(re=v(X,he)),d(X,J);var Z,Q,ie,oe,ne=[];for(oe=G.clipsegments.length-1;oe>=0;oe--)Z=G.clipsegments[oe],Q=c([],Z.x,P.c2p),ie=c([],Z.y,F.c2p),Q.reverse(),ie.reverse(),ne.push(A(Q,ie,Z.bicubic));var le="M"+ne.join("L")+"Z";M(D,G.clipsegments,P,F,ae,K),w(O,D,P,F,re,U,J,z,G,K,le),f(D,X,h,R,j,L,z),T.setClipUrl(D,z._clipPathId,h)})};function d(_,h){var L,E,S,P,F,I,D,R,O;for(L=0;L<_.length;L++){for(P=_[L],F=P.pedgepaths=[],I=P.ppaths=[],E=0;E<P.edgepaths.length;E++){for(O=P.edgepaths[E],D=[],S=0;S<O.length;S++)D[S]=h(O[S]);F.push(D)}for(E=0;E<P.paths.length;E++){for(O=P.paths[E],R=[],S=0;S<O.length;S++)R[S]=h(O[S]);I.push(R)}}}function f(_,h,L,E,S,P,F){var I=e.ensureSingle(_,"g","contourlines"),D=S.showlines!==!1,R=S.showlabels,O=D&&R,z=n.createLines(I,D||R,h),G=n.createLineClip(I,O,L,E.trace.uid),Y=_.selectAll("g.contourlabels").data(R?[0]:[]);if(Y.exit().remove(),Y.enter().append("g").classed("contourlabels",!0),R){var ee=P.xaxis,j=P.yaxis,X=ee._length,ae=j._length,he=[[[0,0],[X,0],[X,ae],[0,ae]]],K=[];e.clearLocationCache();var J=n.labelFormatter(L,E),U=T.tester.append("text").attr("data-notex",1).call(T.font,S.labelfont),H={left:0,right:X,center:X/2,top:0,bottom:ae,middle:ae/2},q=Math.sqrt(X*X+ae*ae),re=r.LABELDISTANCE*q/Math.max(1,h.length/r.LABELINCREASE);z.each(function(Z){var Q=n.calcTextOpts(Z.level,J,U,L);y.select(this).selectAll("path").each(function(ie){var oe=this,ne=e.getVisibleSegment(oe,H,Q.height/2);if(!!ne&&(m(oe,ie,Z,ne,F,Q.height),!(ne.len<(Q.width+Q.height)*r.LABELMIN)))for(var le=Math.min(Math.ceil(ne.len/re),r.LABELMAX),_e=0;_e<le;_e++){var fe=n.findBestTextLocation(oe,ne,Q,K,H);if(!fe)break;n.addLabelData(fe,Q,K,he)}})}),U.remove(),n.drawLabels(Y,K,L,G,O?he:null)}R&&!D&&z.remove()}function m(_,h,L,E,S,P){for(var F,I=0;I<L.pedgepaths.length;I++)h===L.pedgepaths[I]&&(F=L.edgepaths[I]);if(!F)return;var D=S.a[0],R=S.a[S.a.length-1],O=S.b[0],z=S.b[S.b.length-1];function G(ae,he){var K=0,J,U=.1;return(Math.abs(ae[0]-D)<U||Math.abs(ae[0]-R)<U)&&(J=x(S.dxydb_rough(ae[0],ae[1],U)),K=Math.max(K,P*u(he,J)/2)),(Math.abs(ae[1]-O)<U||Math.abs(ae[1]-z)<U)&&(J=x(S.dxyda_rough(ae[0],ae[1],U)),K=Math.max(K,P*u(he,J)/2)),K}var Y=l(_,0,1),ee=l(_,E.total,E.total-1),j=G(F[0],Y),X=E.total-G(F[F.length-1],ee);E.min<j&&(E.min=j),E.max>X&&(E.max=X),E.len=E.max-E.min}function l(_,h,L){var E=_.getPointAtLength(h),S=_.getPointAtLength(L),P=S.x-E.x,F=S.y-E.y,I=Math.sqrt(P*P+F*F);return[P/I,F/I]}function x(_){var h=Math.sqrt(_[0]*_[0]+_[1]*_[1]);return[_[0]/h,_[1]/h]}function u(_,h){var L=Math.abs(_[0]*h[0]+_[1]*h[1]),E=Math.sqrt(1-L*L);return E/L}function M(_,h,L,E,S,P){var F,I,D,R,O=e.ensureSingle(_,"g","contourbg"),z=O.selectAll("path").data(P==="fill"&&!S?[0]:[]);z.enter().append("path"),z.exit().remove();var G=[];for(R=0;R<h.length;R++)F=h[R],I=c([],F.x,L.c2p),D=c([],F.y,E.c2p),G.push(A(I,D,F.bicubic));z.attr("d","M"+G.join("L")+"Z").style("stroke","none")}function w(_,h,L,E,S,P,F,I,D,R,O){var z=R==="fill";z&&o(S,_.contours);var G=e.ensureSingle(h,"g","contourfill"),Y=G.selectAll("path").data(z?S:[]);Y.enter().append("path"),Y.exit().remove(),Y.each(function(ee){var j=(ee.prefixBoundary?O:"")+p(_,ee,P,F,I,D,L,E);j?y.select(this).attr("d",j).style("stroke","none"):y.select(this).remove()})}function p(_,h,L,E,S,P,F,I){var D,R="",O=h.edgepaths.map(function(ie,oe){return oe}),z=!0,G,Y,ee,j,X,ae,he=Math.abs(L[0][0]-L[2][0])*1e-4,K=Math.abs(L[0][1]-L[2][1])*1e-4;function J(ie){return Math.abs(ie[1]-L[0][1])<K}function U(ie){return Math.abs(ie[1]-L[2][1])<K}function H(ie){return Math.abs(ie[0]-L[0][0])<he}function q(ie){return Math.abs(ie[0]-L[2][0])<he}function re(ie,oe){var ne,le,_e,fe,ye="";for(J(ie)&&!q(ie)||U(ie)&&!H(ie)?(fe=S.aaxis,_e=g(S,P,[ie[0],oe[0]],.5*(ie[1]+oe[1]))):(fe=S.baxis,_e=g(S,P,.5*(ie[0]+oe[0]),[ie[1],oe[1]])),ne=1;ne<_e.length;ne++)for(ye+=fe.smoothing?"C":"L",le=0;le<_e[ne].length;le++){var xe=_e[ne][le];ye+=[F.c2p(xe[0]),I.c2p(xe[1])]+" "}return ye}for(D=0,G=null;O.length;){var Z=h.edgepaths[D][0];for(G&&(R+=re(G,Z)),ae=T.smoothopen(h.edgepaths[D].map(E),h.smoothing),R+=z?ae:ae.replace(/^M/,"L"),O.splice(O.indexOf(D),1),G=h.edgepaths[D][h.edgepaths[D].length-1],j=-1,ee=0;ee<4;ee++){if(!G){e.log("Missing end?",D,h);break}for(J(G)&&!q(G)?Y=L[1]:H(G)?Y=L[0]:U(G)?Y=L[3]:q(G)&&(Y=L[2]),X=0;X<h.edgepaths.length;X++){var Q=h.edgepaths[X][0];Math.abs(G[0]-Y[0])<he?Math.abs(G[0]-Q[0])<he&&(Q[1]-G[1])*(Y[1]-Q[1])>=0&&(Y=Q,j=X):Math.abs(G[1]-Y[1])<K?Math.abs(G[1]-Q[1])<K&&(Q[0]-G[0])*(Y[0]-Q[0])>=0&&(Y=Q,j=X):e.log("endpt to newendpt is not vert. or horz.",G,Y,Q)}if(j>=0)break;R+=re(G,Y),G=Y}if(j===h.edgepaths.length){e.log("unclosed perimeter path");break}D=j,z=O.indexOf(D)===-1,z&&(D=O[0],R+=re(G,Y)+"Z",G=null)}for(D=0;D<h.paths.length;D++)R+=T.smoothclosed(h.paths[D].map(E),h.smoothing);return R}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(t,N,V){var y=t("../../components/colorscale/attributes"),c=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../plots/attributes"),T=t("../scattermapbox/attributes"),e=t("../../lib/extend").extendFlat;N.exports=e({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:e({},A.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:c(),showlegend:e({},A.showlegend,{dflt:!1})},y("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib").isArrayOrTypedArray,A=t("../../constants/numerical").BADNUM,T=t("../../components/colorscale/calc"),e=t("../../lib")._;N.exports=function(i,n){for(var r=n._length,v=new Array(r),s=n.z,o=c(s)&&s.length,b=0;b<r;b++){var g=v[b]={},d=n.lon[b],f=n.lat[b];if(g.lonlat=y(d)&&y(f)?[+d,+f]:[A,A],o){var m=s[b];g.z=y(m)?m:A}}return T(i,n,{vals:o?s:[0,1],containerStr:"",cLetter:"z"}),r&&(v[0].t={labels:{lat:e(i,"lat:")+" ",lon:e(i,"lon:")+" "}}),v}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../components/color"),T=t("../../components/colorscale"),e=t("../../constants/numerical").BADNUM,a=t("../../lib/geojson_utils").makeBlank;N.exports=function(n){var r=n[0].trace,v=r.visible===!0&&r._length!==0,s={layout:{visibility:"none"},paint:{}},o=r._opts={heatmap:s,geojson:a()};if(!v)return o;var b=[],g,d=r.z,f=r.radius,m=c.isArrayOrTypedArray(d)&&d.length,l=c.isArrayOrTypedArray(f);for(g=0;g<n.length;g++){var x=n[g],u=x.lonlat;if(u[0]!==e){var M={};if(m){var w=x.z;M.z=w!==e?w:0}l&&(M.r=y(f[g])&&f[g]>0?+f[g]:0),b.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:M})}}var p=T.extractOpts(r),_=p.reversescale?T.flipScale(p.colorscale):p.colorscale,h=_[0][1],L=A.opacity(h)<1?h:A.addOpacity(h,0),E=["interpolate",["linear"],["heatmap-density"],0,L];for(g=1;g<_.length;g++)E.push(_[g][0],_[g][1]);var S=["interpolate",["linear"],["get","z"],p.min,0,p.max,1];return c.extendFlat(o.heatmap.paint,{"heatmap-weight":m?S:1/(p.max-p.min),"heatmap-color":E,"heatmap-radius":l?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),o.geojson={type:"FeatureCollection",features:b},o.heatmap.layout.visibility="visible",o}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(t,N,V){var y=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(b,g){return y.coerce(e,a,A,b,g)}var v=r("lon")||[],s=r("lat")||[],o=Math.min(v.length,s.length);if(!o){a.visible=!1;return}a._length=o,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),c(e,a,n,r,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(t,N,V){N.exports=function(c,A){return c.lon=A.lon,c.lat=A.lat,c.z=A.z,c}},{}],776:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../scattermapbox/hover").hoverPoints,A=t("../scattermapbox/hover").getExtraText;N.exports=function(e,a,i){var n=c(e,a,i);if(!!n){var r=n[0],v=r.cd,s=v[0].trace,o=v[r.index];if(delete r.color,"z"in o){var b=r.subplot.mockAxis;r.z=o.z,r.zLabel=y.tickText(b,b.c2l(o.z),"hover").text}return r.extraText=A(s,o,v[0].t.labels),[r]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),formatLabels:t("../scattermapbox/format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover"),eventData:t("./event_data"),getBelow:function(y,c){for(var A=c.getMapLayers(),T=0;T<A.length;T++){var e=A[T],a=e.id;if(e.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(t,N,V){var y=t("./convert"),c=t("../../plots/mapbox/constants").traceLayerPrefix;function A(e,a){this.type="densitymapbox",this.subplot=e,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",c+a+"-heatmap"]],this.below=null}var T=A.prototype;T.update=function(e){var a=this.subplot,i=this.layerList,n=y(e),r=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var v=0;v<i.length;v++){var s=i[v],o=s[0],b=s[1],g=n[o];a.setOptions(b,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&a.setOptions(b,"setPaintProperty",g.paint)}},T._addLayers=function(e,a){for(var i=this.subplot,n=this.layerList,r=this.sourceId,v=0;v<n.length;v++){var s=n[v],o=s[0],b=e[o];i.addLayer({type:o,id:s[1],source:r,layout:b.layout,paint:b.paint},a)}},T._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,i=a.length-1;i>=0;i--)e.removeLayer(a[i][1])},T.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},N.exports=function(a,i){var n=i[0].trace,r=new A(a,n.uid),v=r.sourceId,s=y(i),o=r.below=a.belowLookup["trace-"+n.uid];return a.map.addSource(v,{type:"geojson",data:s.geojson}),r._addLayers(s,o),r}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;y.mergeArray(T.text,A,"tx"),y.mergeArray(T.hovertext,A,"htx");var a=T.marker;if(a){y.mergeArray(a.opacity,A,"mo"),y.mergeArray(a.color,A,"mc");var i=a.line;i&&(y.mergeArray(i.color,A,"mlc"),y.mergeArrayCastPositive(i.width,A,"mlw"))}}},{"../../lib":515}],780:[function(t,N,V){var y=t("../bar/attributes"),c=t("../scatter/attributes").line,A=t("../../plots/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");N.exports={x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:y.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:n({},A.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),text:y.text,textposition:y.textposition,insidetextanchor:n({},y.insidetextanchor,{dflt:"middle"}),textangle:n({},y.textangle,{dflt:0}),textfont:y.textfont,insidetextfont:y.insidetextfont,outsidetextfont:y.outsidetextfont,constraintext:y.constraintext,cliponaxis:y.cliponaxis,orientation:n({},y.orientation,{}),offset:n({},y.offset,{arrayOk:!1}),width:n({},y.width,{arrayOk:!1}),marker:v(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},c.color,{dflt:r.defaultLine}),width:n({},c.width,{dflt:0,editType:"plot"}),dash:c.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup};function v(){var s=n({},y.marker);return delete s.pattern,s}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../plots/cartesian/align_period"),A=t("./arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;N.exports=function(n,r){var v=y.getFromId(n,r.xaxis||"x"),s=y.getFromId(n,r.yaxis||"y"),o,b,g,d,f,m,l,x;r.orientation==="h"?(o=v.makeCalcdata(r,"x"),g=s.makeCalcdata(r,"y"),d=c(r,s,"y",g),f=!!r.yperiodalignment,m="y"):(o=s.makeCalcdata(r,"y"),g=v.makeCalcdata(r,"x"),d=c(r,v,"x",g),f=!!r.xperiodalignment,m="x"),b=d.vals;var u=Math.min(b.length,o.length),M=new Array(u);for(r._base=[],l=0;l<u;l++){o[l]<0&&(o[l]=e);var w=!1;o[l]!==e&&l+1<u&&o[l+1]!==e&&(w=!0),x=M[l]={p:b[l],s:o[l],cNext:w},r._base[l]=-.5*x.s,f&&(M[l].orig_p=g[l],M[l][m+"End"]=d.ends[l],M[l][m+"Start"]=d.starts[l]),r.ids&&(x.id=String(r.ids[l])),l===0&&(M[0].vTotal=0),M[0].vTotal+=a(x.s),x.begR=a(x.s)/a(M[0].s)}var p;for(l=0;l<u;l++)x=M[l],x.s!==e&&(x.sumR=x.s/M[0].vTotal,x.difR=p!==void 0?x.s/p:1,p=x.s);return A(M,r),T(M,r),M};function a(i){return i===e?0:i}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(t,N,V){N.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(t,N,V){var y=t("../bar/cross_trace_calc").setGroupPositions;N.exports=function(A,T){var e=A._fullLayout,a=A._fullData,i=A.calcdata,n=T.xaxis,r=T.yaxis,v=[],s=[],o=[],b,g;for(g=0;g<a.length;g++){var d=a[g],f=d.orientation==="h";d.visible===!0&&d.xaxis===n._id&&d.yaxis===r._id&&d.type==="funnel"&&(b=i[g],f?o.push(b):s.push(b),v.push(b))}var m={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(y(A,n,r,s,m),y(A,r,n,o,m),g=0;g<v.length;g++){b=v[g];for(var l=0;l<b.length;l++)l+1<b.length&&(b[l].nextP0=b[l+1].p0,b[l].nextS0=b[l+1].s0,b[l].nextP1=b[l+1].p1,b[l].nextS1=b[l+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(t,N,V){var y=t("../../lib"),c=t("../bar/defaults").handleGroupingDefaults,A=t("../bar/defaults").handleText,T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./attributes"),i=t("../../components/color");function n(s,o,b,g){function d(w,p){return y.coerce(s,o,a,w,p)}var f=T(s,o,g,d);if(!f){o.visible=!1;return}e(s,o,g,d),d("xhoverformat"),d("yhoverformat"),d("orientation",o.y&&!o.x?"v":"h"),d("offset"),d("width");var m=d("text");d("hovertext"),d("hovertemplate");var l=d("textposition");A(s,o,g,d,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&!o.texttemplate&&d("textinfo",Array.isArray(m)?"text+value":"value");var x=d("marker.color",b);d("marker.line.color",i.defaultLine),d("marker.line.width");var u=d("connector.visible");if(u){d("connector.fillcolor",r(x));var M=d("connector.line.width");M&&(d("connector.line.color"),d("connector.line.dash"))}}function r(s){var o=y.isArrayOrTypedArray(s)?"#000":s;return i.addOpacity(o,.5*i.opacity(o))}function v(s,o){var b,g;function d(m){return y.coerce(g._input,g,a,m)}if(o.funnelmode==="group")for(var f=0;f<s.length;f++)g=s[f],b=g._input,c(b,g,o,d)}N.exports={supplyDefaults:n,crossTraceDefaults:v}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(t,N,V){N.exports=function(c,A){return c.x="xVal"in A?A.xVal:A.x,c.y="yVal"in A?A.yVal:A.y,"percentInitial"in A&&(c.percentInitial=A.percentInitial),"percentPrevious"in A&&(c.percentPrevious=A.percentPrevious),"percentTotal"in A&&(c.percentTotal=A.percentTotal),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),c}},{}],786:[function(t,N,V){var y=t("../../components/color").opacity,c=t("../bar/hover").hoverOnBars,A=t("../../lib").formatPercent;N.exports=function(a,i,n,r,v){var s=c(a,i,n,r,v);if(!!s){var o=s.cd,b=o[0].trace,g=b.orientation==="h",d=s.index,f=o[d],m=g?"x":"y";s[m+"LabelVal"]=f.s,s.percentInitial=f.begR,s.percentInitialLabel=A(f.begR,1),s.percentPrevious=f.difR,s.percentPreviousLabel=A(f.difR,1),s.percentTotal=f.sumR,s.percentTotalLabel=A(f.sumR,1);var l=f.hi||b.hoverinfo,x=[];if(l&&l!=="none"&&l!=="skip"){var u=l==="all",M=l.split("+"),w=function(p){return u||M.indexOf(p)!==-1};w("percent initial")&&x.push(s.percentInitialLabel+" of initial"),w("percent previous")&&x.push(s.percentPreviousLabel+" of previous"),w("percent total")&&x.push(s.percentTotalLabel+" of total")}return s.extraText=x.join("<br>"),s.color=T(b,f),[s]}};function T(e,a){var i=e.marker,n=a.mc||i.color,r=a.mlc||i.line.color,v=a.mlw||i.line.width;if(y(n))return n;if(y(r)&&v)return r}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(t,N,V){N.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(A,T,e){var a=!1;function i(v,s){return y.coerce(A,T,c,v,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="funnel"){a=!0;break}}a&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),a=t("../bar/uniform_text").clearMinTextSize;N.exports=function(s,o,b,g){var d=s._fullLayout;a("funnel",d),i(s,o,b,g),n(s,o,b,g),e.plot(s,o,b,g,{mode:d.funnelmode,norm:d.funnelmode,gap:d.funnelgap,groupgap:d.funnelgroupgap})};function i(v,s,o,b){var g=s.xaxis,d=s.yaxis;c.makeTraceGroups(b,o,"trace bars").each(function(f){var m=y.select(this),l=f[0].trace,x=c.ensureSingle(m,"g","regions");if(!l.connector||!l.connector.visible){x.remove();return}var u=l.orientation==="h",M=x.selectAll("g.region").data(c.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var w=M.size();M.each(function(p,_){if(!(_!==w-1&&!p.cNext)){var h=r(p,g,d,u),L=h[0],E=h[1],S="";L[0]!==T&&E[0]!==T&&L[1]!==T&&E[1]!==T&&L[2]!==T&&E[2]!==T&&L[3]!==T&&E[3]!==T&&(u?S+="M"+L[0]+","+E[1]+"L"+L[2]+","+E[2]+"H"+L[3]+"L"+L[1]+","+E[1]+"Z":S+="M"+L[1]+","+E[1]+"L"+L[2]+","+E[3]+"V"+E[2]+"L"+L[1]+","+E[0]+"Z"),S===""&&(S="M0,0Z"),c.ensureSingle(y.select(this),"path").attr("d",S).call(A.setClipUrl,s.layerClipId,v)}})})}function n(v,s,o,b){var g=s.xaxis,d=s.yaxis;c.makeTraceGroups(b,o,"trace bars").each(function(f){var m=y.select(this),l=f[0].trace,x=c.ensureSingle(m,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){x.remove();return}var u=l.orientation==="h",M=x.selectAll("g.line").data(c.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var w=M.size();M.each(function(p,_){if(!(_!==w-1&&!p.cNext)){var h=r(p,g,d,u),L=h[0],E=h[1],S="";L[3]!==void 0&&E[3]!==void 0&&(u?(S+="M"+L[0]+","+E[1]+"L"+L[2]+","+E[2],S+="M"+L[1]+","+E[1]+"L"+L[3]+","+E[2]):(S+="M"+L[1]+","+E[1]+"L"+L[2]+","+E[3],S+="M"+L[1]+","+E[0]+"L"+L[2]+","+E[2])),S===""&&(S="M0,0Z"),c.ensureSingle(y.select(this),"path").attr("d",S).call(A.setClipUrl,s.layerClipId,v)}})})}function r(v,s,o,b){var g=[],d=[],f=b?s:o,m=b?o:s;return g[0]=f.c2p(v.s0,!0),d[0]=m.c2p(v.p0,!0),g[1]=f.c2p(v.s1,!0),d[1]=m.c2p(v.p1,!0),g[2]=f.c2p(v.nextS0,!0),d[2]=m.c2p(v.nextP0,!0),g[3]=f.c2p(v.nextS1,!0),d[3]=m.c2p(v.nextP1,!0),b?[g,d]:[d,g]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../components/color"),T=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),a=t("../bar/uniform_text").resizeText,i=e.styleTextPoints;function n(r,v,s){var o=s||y.select(r).selectAll("g.funnellayer").selectAll("g.trace");a(r,o,"funnel"),o.style("opacity",function(b){return b[0].trace.opacity}),o.each(function(b){var g=y.select(this),d=b[0].trace;g.selectAll(".point > path").each(function(f){if(!f.isBlank){var m=d.marker;y.select(this).call(A.fill,f.mc||m.color).call(A.stroke,f.mlc||m.line.color).call(c.dashLine,m.line.dash,f.mlw||m.line.width).style("opacity",d.selectedpoints&&!f.selected?T:1)}}),i(g,d,r),g.selectAll(".regions").each(function(){y.select(this).selectAll("path").style("stroke-width",0).call(A.fill,d.connector.fillcolor)}),g.selectAll(".lines").each(function(){var f=d.connector.line;c.lineGroupStyle(y.select(this).selectAll("path"),f.width,f.color,f.dash)})})}N.exports={style:n}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(t,N,V){var y=t("../pie/attributes"),c=t("../../plots/attributes"),A=t("../../plots/domain").attributes,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../lib/extend").extendFlat;N.exports={labels:y.labels,label0:y.label0,dlabel:y.dlabel,values:y.values,marker:{colors:y.marker.colors,line:{color:a({},y.marker.line.color,{dflt:null}),width:a({},y.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:y.text,hovertext:y.hovertext,scalegroup:a({},y.scalegroup,{}),textinfo:a({},y.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},c.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:a({},y.textposition,{values:["inside","none"],dflt:"inside"}),textfont:y.textfont,insidetextfont:y.insidetextfont,title:{text:y.title.text,font:y.title.font,position:a({},y.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:A({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(t,N,V){var y=t("../../plots/plots");V.name="funnelarea",V.plot=function(c,A,T,e){y.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){y.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],794:[function(t,N,V){var y=t("../pie/calc");function c(T,e){return y.calc(T,e)}function A(T){y.crossTraceCalc(T,{type:"funnelarea"})}N.exports={calc:c,crossTraceCalc:A}},{"../pie/calc":912}],795:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../bar/defaults").handleText,e=t("../pie/defaults").handleLabelsAndValues;N.exports=function(i,n,r,v){function s(w,p){return y.coerce(i,n,c,w,p)}var o=s("labels"),b=s("values"),g=e(o,b),d=g.len;if(n._hasLabels=g.hasLabels,n._hasValues=g.hasValues,!n._hasLabels&&n._hasValues&&(s("label0"),s("dlabel")),!d){n.visible=!1;return}n._length=d;var f=s("marker.line.width");f&&s("marker.line.color",v.paper_bgcolor),s("marker.colors"),s("scalegroup");var m=s("text"),l=s("texttemplate"),x;if(l||(x=s("textinfo",Array.isArray(m)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),l||x&&x!=="none"){var u=s("textposition");T(i,n,v,s,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}A(n,v,s);var M=s("title.text");M&&(s("title.position"),y.coerceFont(s,"title.font",v.font)),s("aspectratio"),s("baseratio")}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(t,N,V){N.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style"),styleOne:t("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(t,N,V){var y=t("../pie/layout_attributes").hiddenlabels;N.exports={hiddenlabels:y,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return y.coerce(T,e,c,i,n)}a("hiddenlabels"),a("funnelareacolorway",e.colorway),a("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../lib"),T=A.strScale,e=A.strTranslate,a=t("../../lib/svg_text_utils"),i=t("../bar/plot"),n=i.toMoveInsideBar,r=t("../bar/uniform_text"),v=r.recordMinTextSize,s=r.clearMinTextSize,o=t("../pie/helpers"),b=t("../pie/plot"),g=b.attachFxHandlers,d=b.determineInsideTextFont,f=b.layoutAreas,m=b.prerenderTitles,l=b.positionTitleOutside,x=b.formatSliceLabel;N.exports=function(_,h){var L=_._context.staticPlot,E=_._fullLayout;s("funnelarea",E),m(h,_),f(h,E._size),A.makeTraceGroups(E._funnelarealayer,h,"trace").each(function(S){var P=y.select(this),F=S[0],I=F.trace;w(S),P.each(function(){var D=y.select(this).selectAll("g.slice").data(S);D.enter().append("g").classed("slice",!0),D.exit().remove(),D.each(function(O,z){if(O.hidden){y.select(this).selectAll("path,g").remove();return}O.pointNumber=O.i,O.curveNumber=I.index;var G=F.cx,Y=F.cy,ee=y.select(this),j=ee.selectAll("path.surface").data([O]);j.enter().append("path").classed("surface",!0).style({"pointer-events":L?"none":"all"}),ee.call(g,_,S);var X="M"+(G+O.TR[0])+","+(Y+O.TR[1])+u(O.TR,O.BR)+u(O.BR,O.BL)+u(O.BL,O.TL)+"Z";j.attr("d",X),x(_,O,F);var ae=o.castOption(I.textposition,O.pts),he=ee.selectAll("g.slicetext").data(O.text&&ae!=="none"?[0]:[]);he.enter().append("g").classed("slicetext",!0),he.exit().remove(),he.each(function(){var K=A.ensureSingle(y.select(this),"text","",function(ie){ie.attr("data-notex",1)}),J=A.ensureUniformFontSize(_,d(I,O,E.font));K.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(c.font,J).call(a.convertToTspans,_);var U=c.bBox(K.node()),H,q,re,Z=Math.min(O.BL[1],O.BR[1])+Y,Q=Math.max(O.TL[1],O.TR[1])+Y;q=Math.max(O.TL[0],O.BL[0])+G,re=Math.min(O.TR[0],O.BR[0])+G,H=n(q,re,Z,Q,U,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),H.fontSize=J.size,v(I.type,H,E),S[z].transform=H,A.setTransormAndDisplay(K,H)})});var R=y.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var O=A.ensureSingle(y.select(this),"text","",function(Y){Y.attr("data-notex",1)}),z=I.title.text;I._meta&&(z=A.templateString(z,I._meta)),O.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(c.font,I.title.font).call(a.convertToTspans,_);var G=l(F,E._size);O.attr("transform",e(G.x,G.y)+T(Math.min(1,G.scale))+e(G.tx,G.ty))})})})};function u(p,_){var h=_[0]-p[0],L=_[1]-p[1];return"l"+h+","+L}function M(p,_){return[.5*(p[0]+_[0]),.5*(p[1]+_[1])]}function w(p){if(!p.length)return;var _=p[0],h=_.trace,L=h.aspectratio,E=h.baseratio;E>.999&&(E=.999);var S=Math.pow(E,2),P=_.vTotal,F=P*S/(1-S),I=P,D=F/P;function R(){var oe=Math.sqrt(D);return{x:oe,y:-oe}}function O(){var oe=R();return[oe.x,oe.y]}var z,G=[];G.push(O());var Y,ee;for(Y=p.length-1;Y>-1;Y--)if(ee=p[Y],!ee.hidden){var j=ee.v/I;D+=j,G.push(O())}var X=1/0,ae=-1/0;for(Y=0;Y<G.length;Y++)z=G[Y],X=Math.min(X,z[1]),ae=Math.max(ae,z[1]);for(Y=0;Y<G.length;Y++)G[Y][1]-=(ae+X)/2;var he=G[G.length-1][0],K=_.r,J=(ae-X)/2,U=K/he,H=K/J*L;for(_.r=H*J,Y=0;Y<G.length;Y++)G[Y][0]*=U,G[Y][1]*=H;z=G[0];var q=[-z[0],z[1]],re=[z[0],z[1]],Z=0;for(Y=p.length-1;Y>-1;Y--)if(ee=p[Y],!ee.hidden){Z+=1;var Q=G[Z][0],ie=G[Z][1];ee.TL=[-Q,ie],ee.TR=[Q,ie],ee.BL=q,ee.BR=re,ee.pxmid=M(ee.TR,ee.BR),q=ee.TL,re=ee.TR}}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(t,N,V){var y=t("@plotly/d3"),c=t("../pie/style_one"),A=t("../bar/uniform_text").resizeText;N.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");A(e,a,"funnelarea"),a.each(function(i){var n=i[0],r=n.trace,v=y.select(this);v.style({opacity:r.opacity}),v.selectAll("path.surface").each(function(s){y.select(this).call(c,s,r)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(t,N,V){var y=t("../scatter/attributes"),c=t("../../plots/attributes"),A=t("../../plots/font_attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat;N.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},y.x,{impliedEdits:{xtype:"array"}}),x0:n({},y.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},y.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},y.y,{impliedEdits:{ytype:"array"}}),y0:n({},y.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},y.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},y.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},y.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},y.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},y.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},y.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},y.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:e(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:A({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:n({},c.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../histogram2d/calc"),a=t("../../components/colorscale/calc"),i=t("./convert_column_xyz"),n=t("./clean_2d_array"),r=t("./interp2d"),v=t("./find_empties"),s=t("./make_bound_array"),o=t("../../constants/numerical").BADNUM;N.exports=function(f,m){var l=A.getFromId(f,m.xaxis||"x"),x=A.getFromId(f,m.yaxis||"y"),u=y.traceIs(m,"contour"),M=y.traceIs(m,"histogram"),w=y.traceIs(m,"gl2d"),p=u?"best":m.zsmooth,_,h,L,E,S,P,F,I,D,R,O;if(l._minDtick=0,x._minDtick=0,M)O=e(f,m),E=O.orig_x,_=O.x,h=O.x0,L=O.dx,I=O.orig_y,S=O.y,P=O.y0,F=O.dy,D=O.z;else{var z=m.z;c.isArray1D(z)?(i(m,l,x,"x","y",["z"]),_=m._x,S=m._y,z=m._z):(E=m.x?l.makeCalcdata(m,"x"):[],I=m.y?x.makeCalcdata(m,"y"):[],_=T(m,l,"x",E).vals,S=T(m,x,"y",I).vals,m._x=_,m._y=S),h=m.x0,L=m.dx,P=m.y0,F=m.dy,D=n(z,m,l,x)}(l.rangebreaks||x.rangebreaks)&&(D=g(_,S,D),M||(_=b(_),S=b(S),m._x=_,m._y=S)),!M&&(u||m.connectgaps)&&(m._emptypoints=v(D),r(D,m._emptypoints));function G(re){p=m._input.zsmooth=m.zsmooth=!1,c.warn('cannot use zsmooth: "fast": '+re)}if(p==="fast"){if(l.type==="log"||x.type==="log")G("log axis found");else if(!M){if(_.length){var Y=(_[_.length-1]-_[0])/(_.length-1),ee=Math.abs(Y/100);for(R=0;R<_.length-1;R++)if(Math.abs(_[R+1]-_[R]-Y)>ee){G("x scale is not linear");break}}if(S.length&&p==="fast"){var j=(S[S.length-1]-S[0])/(S.length-1),X=Math.abs(j/100);for(R=0;R<S.length-1;R++)if(Math.abs(S[R+1]-S[R]-j)>X){G("y scale is not linear");break}}}}var ae=c.maxRowLength(D),he=m.xtype==="scaled"?"":_,K=s(m,he,h,L,ae,l),J=m.ytype==="scaled"?"":S,U=s(m,J,P,F,D.length,x);w||(m._extremes[l._id]=A.findExtremes(l,K),m._extremes[x._id]=A.findExtremes(x,U));var H={x:K,y:U,z:D,text:m._text||m.text,hovertext:m._hovertext||m.hovertext};if(m.xperiodalignment&&E&&(H.orig_x=E),m.yperiodalignment&&I&&(H.orig_y=I),he&&he.length===K.length-1&&(H.xCenter=he),J&&J.length===U.length-1&&(H.yCenter=J),M&&(H.xRanges=O.xRanges,H.yRanges=O.yRanges,H.pts=O.pts),u||a(f,m,{vals:D,cLetter:"z"}),u&&m.contours&&m.contours.coloring==="heatmap"){var q={type:m.type==="contour"?"heatmap":"histogram2d",xcalendar:m.xcalendar,ycalendar:m.ycalendar};H.xfill=s(q,he,h,L,ae,l),H.yfill=s(q,J,P,F,D.length,x)}return[H]};function b(d){for(var f=[],m=d.length,l=0;l<m;l++){var x=d[l];x!==o&&f.push(x)}return f}function g(d,f,m){for(var l=[],x=-1,u=0;u<m.length;u++)if(f[u]!==o){x++,l[x]=[];for(var M=0;M<m[u].length;M++)d[M]!==o&&l[x].push(m[u][M])}return l}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../constants/numerical").BADNUM;N.exports=function(e,a,i,n){var r,v,s,o,b,g;function d(M){if(!!y(M))return+M}if(a&&a.transpose){for(r=0,b=0;b<e.length;b++)r=Math.max(r,e[b].length);if(r===0)return!1;s=function(M){return M.length},o=function(M,w,p){return(M[p]||[])[w]}}else r=e.length,s=function(M,w){return M[w].length},o=function(M,w,p){return(M[w]||[])[p]};var f=function(M,w,p){return w===A||p===A?A:o(M,w,p)};function m(M){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&M&&M.type==="category"&&a["_"+M._id.charAt(0)].length){var w=M._id.charAt(0),p={},_=a["_"+w+"CategoryMap"]||a[w];for(b=0;b<_.length;b++)p[_[b]]=b;return function(h){var L=p[M._categories[h]];return L+1?L:A}}else return c.identity}var l=m(i),x=m(n);n&&n.type==="category"&&(r=n._categories.length);var u=new Array(r);for(b=0;b<r;b++)for(i&&i.type==="category"?v=i._categories.length:v=s(e,b),u[b]=new Array(v),g=0;g<v;g++)u[b][g]=d(f(e,x(b),l(g)));return u}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(t,N,V){N.exports={min:"zmin",max:"zmax"}},{}],805:[function(t,N,V){var y=t("../../lib"),c=t("../../constants/numerical").BADNUM,A=t("../../plots/cartesian/align_period");N.exports=function(e,a,i,n,r,v){var s=e._length,o=a.makeCalcdata(e,n),b=i.makeCalcdata(e,r);o=A(e,a,n,o).vals,b=A(e,i,r,b).vals;var g=e.text,d=g!==void 0&&y.isArray1D(g),f=e.hovertext,m=f!==void 0&&y.isArray1D(f),l,x,u=y.distinctVals(o),M=u.vals,w=y.distinctVals(b),p=w.vals,_=[],h,L,E=p.length,S=M.length;for(l=0;l<v.length;l++)_[l]=y.init2dArray(E,S);d&&(h=y.init2dArray(E,S)),m&&(L=y.init2dArray(E,S));var P=y.init2dArray(E,S);for(l=0;l<s;l++)if(o[l]!==c&&b[l]!==c){var F=y.findBin(o[l]+u.minDiff/2,M),I=y.findBin(b[l]+w.minDiff/2,p);for(x=0;x<v.length;x++){var D=v[x],R=e[D],O=_[x];O[I][F]=R[l],P[I][F]=l}d&&(h[I][F]=g[l]),m&&(L[I][F]=f[l])}for(e["_"+n]=M,e["_"+r]=p,x=0;x<v.length;x++)e["_"+v[x]]=_[x];d&&(e._text=h),m&&(e._hovertext=L),a&&a.type==="category"&&(e["_"+n+"CategoryMap"]=M.map(function(z){return a._categories[z]})),i&&i.type==="category"&&(e["_"+r+"CategoryMap"]=p.map(function(z){return i._categories[z]})),e._after2before=P}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(t,N,V){var y=t("../../lib"),c=t("./xyz_defaults"),A=t("./label_defaults"),T=t("../scatter/period_defaults"),e=t("./style_defaults"),a=t("../../components/colorscale/defaults"),i=t("./attributes");N.exports=function(r,v,s,o){function b(d,f){return y.coerce(r,v,i,d,f)}var g=c(r,v,b,o);if(!g){v.visible=!1;return}T(r,v,o,b),b("xhoverformat"),b("yhoverformat"),b("text"),b("hovertext"),b("hovertemplate"),A(b,o),e(r,v,b,o),b("hoverongaps"),b("connectgaps",y.isArray1D(v.z)&&v.zsmooth!==!1),a(r,v,o,b,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(t,N,V){var y=t("../../lib").maxRowLength;N.exports=function(A){var T=[],e={},a=[],i=A[0],n=[],r=[0,0,0],v=y(A),s,o,b,g,d,f,m,l;for(o=0;o<A.length;o++)for(s=n,n=i,i=A[o+1]||[],b=0;b<v;b++)n[b]===void 0&&(f=(n[b-1]!==void 0?1:0)+(n[b+1]!==void 0?1:0)+(s[b]!==void 0?1:0)+(i[b]!==void 0?1:0),f?(o===0&&f++,b===0&&f++,o===A.length-1&&f++,b===n.length-1&&f++,f<4&&(e[[o,b]]=[o,b,f]),T.push([o,b,f])):a.push([o,b]));for(;a.length;){for(m={},l=!1,d=a.length-1;d>=0;d--)g=a[d],o=g[0],b=g[1],f=((e[[o-1,b]]||r)[2]+(e[[o+1,b]]||r)[2]+(e[[o,b-1]]||r)[2]+(e[[o,b+1]]||r)[2])/20,f&&(m[g]=[o,b,f],a.splice(d,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(g in m)e[g]=m[g],T.push(m[g])}return T.sort(function(x,u){return u[2]-x[2]})}},{"../../lib":515}],808:[function(t,N,V){var y=t("../../components/fx"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../components/colorscale").extractOpts;N.exports=function(a,i,n,r,v){v||(v={});var s=v.isContour,o=a.cd[0],b=o.trace,g=a.xa,d=a.ya,f=o.x,m=o.y,l=o.z,x=o.xCenter,u=o.yCenter,M=o.zmask,w=b.zhoverformat,p=f,_=m,h,L,E,S;if(a.index!==!1){try{E=Math.round(a.index[1]),S=Math.round(a.index[0])}catch{c.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(E<0||E>=l[0].length||S<0||S>l.length)return}else{if(y.inbox(i-f[0],i-f[f.length-1],0)>0||y.inbox(n-m[0],n-m[m.length-1],0)>0)return;if(s){var P;for(p=[2*f[0]-f[1]],P=1;P<f.length;P++)p.push((f[P]+f[P-1])/2);for(p.push([2*f[f.length-1]-f[f.length-2]]),_=[2*m[0]-m[1]],P=1;P<m.length;P++)_.push((m[P]+m[P-1])/2);_.push([2*m[m.length-1]-m[m.length-2]])}E=Math.max(0,Math.min(p.length-2,c.findBin(i,p))),S=Math.max(0,Math.min(_.length-2,c.findBin(n,_)))}var F=g.c2p(f[E]),I=g.c2p(f[E+1]),D=d.c2p(m[S]),R=d.c2p(m[S+1]),O,z;s?(O=o.orig_x||f,z=o.orig_y||m,I=F,h=O[E],R=D,L=z[S]):(O=o.orig_x||x||f,z=o.orig_y||u||m,h=x?O[E]:(O[E]+O[E+1])/2,L=u?z[S]:(z[S]+z[S+1])/2,g&&g.type==="category"&&(h=f[E]),d&&d.type==="category"&&(L=m[S]),b.zsmooth&&(F=I=g.c2p(h),D=R=d.c2p(L)));var G=l[S][E];if(M&&!M[S][E]&&(G=void 0),!(G===void 0&&!b.hoverongaps)){var Y;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[S])?Y=o.hovertext[S][E]:Array.isArray(o.text)&&Array.isArray(o.text[S])&&(Y=o.text[S][E]);var ee=T(b),j={type:"linear",range:[ee.min,ee.max],hoverformat:w,_separators:g._separators,_numFormat:g._numFormat},X=A.tickText(j,G,"hover").text;return[c.extendFlat(a,{index:b._after2before?b._after2before[S][E]:[S,E],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:F,x1:I,y0:D,y1:R,xLabelVal:h,yLabelVal:L,zLabelVal:G,zLabel:X,text:Y})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:t("./colorbar"),style:t("./style"),hoverPoints:t("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(t,N,V){var y=t("../../lib"),c=.01,A=[[-1,0],[1,0],[0,-1],[0,1]];function T(a){return .5-.25*Math.min(1,a*.5)}N.exports=function(i,n){var r=1,v;for(e(i,n),v=0;v<n.length&&!(n[v][2]<4);v++);for(n=n.slice(v),v=0;v<100&&r>c;v++)r=e(i,n,T(r));return r>c&&y.log("interp2d didn't converge quickly",r),i};function e(a,i,n){var r=0,v,s,o,b,g,d,f,m,l,x,u,M,w;for(b=0;b<i.length;b++){for(v=i[b],s=v[0],o=v[1],u=a[s][o],x=0,l=0,g=0;g<4;g++)d=A[g],f=a[s+d[0]],f&&(m=f[o+d[1]],m!==void 0&&(x===0?M=w=m:(M=Math.min(M,m),w=Math.max(w,m)),l++,x+=m));if(l===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[s][o]=x/l,u===void 0?l<4&&(r=1):(a[s][o]=(1+n)*a[s][o]-n*u,w>M&&(r=Math.max(r,Math.abs(a[s][o]-u)/(w-M))))}return r}},{"../../lib":515}],811:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){A("texttemplate");var e=y.extendFlat({},T.font,{color:"auto",size:"auto"});y.coerceFont(A,"textfont",e)}},{"../../lib":515}],812:[function(t,N,V){var y=t("../../registry"),c=t("../../lib").isArrayOrTypedArray;N.exports=function(T,e,a,i,n,r){var v=[],s=y.traceIs(T,"contour"),o=y.traceIs(T,"histogram"),b=y.traceIs(T,"gl2d"),g,d,f,m=c(e)&&e.length>1;if(m&&!o&&r.type!=="category"){var l=e.length;if(l<=n){if(s||b)v=e.slice(0,n);else if(n===1)v=[e[0]-.5,e[0]+.5];else{for(v=[1.5*e[0]-.5*e[1]],f=1;f<l;f++)v.push((e[f-1]+e[f])*.5);v.push(1.5*e[l-1]-.5*e[l-2])}if(l<n){var x=v[v.length-1],u=x-v[v.length-2];for(f=l;f<n;f++)x+=u,v.push(x)}}else return s?e.slice(0,n):e.slice(0,n+1)}else{var M=T[r._id.charAt(0)+"calendar"];if(o)g=r.r2c(a,0,M);else if(c(e)&&e.length===1)g=e[0];else if(a===void 0)g=0;else{var w=r.type==="log"?r.d2c:r.r2c;g=w(a,0,M)}for(d=i||1,f=s||b?0:-.5;f<n;f++)v.push(g+d*f)}return v}},{"../../lib":515,"../../registry":647}],813:[function(t,N,V){var y=t("@plotly/d3"),c=t("tinycolor2"),A=t("../../registry"),T=t("../../components/drawing"),e=t("../../plots/cartesian/axes"),a=t("../../lib"),i=t("../../lib/svg_text_utils"),n=t("../scatter/format_labels"),r=t("../../components/color"),v=t("../../components/colorscale").extractOpts,s=t("../../components/colorscale").makeColorScaleFuncFromTrace,o=t("../../constants/xmlns_namespaces"),b=t("../../constants/alignment"),g=b.LINE_SPACING,d="heatmap-label";function f(M){return M.selectAll("g."+d)}function m(M){f(M).remove()}N.exports=function(M,w,p,_){var h=w.xaxis,L=w.yaxis;a.makeTraceGroups(_,p,"hm").each(function(E){var S=y.select(this),P=E[0],F=P.trace,I=F.xgap||0,D=F.ygap||0,R=P.z,O=P.x,z=P.y,G=P.xCenter,Y=P.yCenter,ee=A.traceIs(F,"contour"),j=ee?"best":F.zsmooth,X=R.length,ae=a.maxRowLength(R),he=!1,K=!1,J,U,H,q,re,Z,Q,ie;for(Z=0;J===void 0&&Z<O.length-1;)J=h.c2p(O[Z]),Z++;for(Z=O.length-1;U===void 0&&Z>0;)U=h.c2p(O[Z]),Z--;for(U<J&&(H=U,U=J,J=H,he=!0),Z=0;q===void 0&&Z<z.length-1;)q=L.c2p(z[Z]),Z++;for(Z=z.length-1;re===void 0&&Z>0;)re=L.c2p(z[Z]),Z--;if(re<q&&(H=q,q=re,re=H,K=!0),ee&&(G=O,Y=z,O=P.xfill,z=P.yfill),j!=="fast"){var oe=j==="best"?0:.5;J=Math.max(-oe*h._length,J),U=Math.min((1+oe)*h._length,U),q=Math.max(-oe*L._length,q),re=Math.min((1+oe)*L._length,re)}var ne=Math.round(U-J),le=Math.round(re-q),_e=ne<=0||le<=0;if(_e){var fe=S.selectAll("image").data([]);fe.exit().remove(),m(S);return}var ye,xe;j==="fast"?(ye=ae,xe=X):(ye=ne,xe=le);var me=document.createElement("canvas");me.width=ye,me.height=xe;var be=me.getContext("2d"),ke=s(F,{noNumericCheck:!0,returnArray:!0}),De,He;j==="fast"?(De=he?function(Dr){return ae-1-Dr}:a.identity,He=K?function(Dr){return X-1-Dr}:a.identity):(De=function(Dr){return a.constrain(Math.round(h.c2p(O[Dr])-J),0,ne)},He=function(Dr){return a.constrain(Math.round(L.c2p(z[Dr])-q),0,le)});var Ae=He(0),Le=[Ae,Ae],Ze=he?0:1,We=K?0:1,ze=0,Ie=0,Ve=0,dt=0,Ft,Qt,Ot,Ct,jt;function Nt(Dr,Mr){if(Dr!==void 0){var jr=ke(Dr);return jr[0]=Math.round(jr[0]),jr[1]=Math.round(jr[1]),jr[2]=Math.round(jr[2]),ze+=Mr,Ie+=jr[0]*Mr,Ve+=jr[1]*Mr,dt+=jr[2]*Mr,jr}return[0,0,0,0]}function Lt(Dr,Mr,jr,kn){var yn=Dr[jr.bin0];if(yn===void 0)return Nt(void 0,1);var Wn=Dr[jr.bin1],In=Mr[jr.bin0],$n=Mr[jr.bin1],Kn=Wn-yn||0,ya=In-yn||0,Ra;return Wn===void 0?$n===void 0?Ra=0:In===void 0?Ra=2*($n-yn):Ra=(2*$n-In-yn)*2/3:$n===void 0?In===void 0?Ra=0:Ra=(2*yn-Wn-In)*2/3:In===void 0?Ra=(2*$n-Wn-yn)*2/3:Ra=$n+yn-Wn-In,Nt(yn+jr.frac*Kn+kn.frac*(ya+jr.frac*Ra))}if(j){var Xe=0,it;try{it=new Uint8Array(ne*le*4)}catch{it=new Array(ne*le*4)}if(j==="best"){var Ye=G||O,Ee=Y||z,Ge=new Array(Ye.length),Ke=new Array(Ee.length),qe=new Array(ne),At=G?x:l,mt=Y?x:l,Mt,Gt,zt;for(Z=0;Z<Ye.length;Z++)Ge[Z]=Math.round(h.c2p(Ye[Z])-J);for(Z=0;Z<Ee.length;Z++)Ke[Z]=Math.round(L.c2p(Ee[Z])-q);for(Z=0;Z<ne;Z++)qe[Z]=At(Z,Ge);for(Q=0;Q<le;Q++)for(Mt=mt(Q,Ke),Gt=R[Mt.bin0],zt=R[Mt.bin1],Z=0;Z<ne;Z++,Xe+=4)jt=Lt(Gt,zt,qe[Z],Mt),u(it,Xe,jt)}else for(Q=0;Q<X;Q++)for(Ct=R[Q],Le=He(Q),Z=0;Z<ne;Z++)jt=Nt(Ct[Z],1),Xe=(Le*ne+De(Z))*4,u(it,Xe,jt);var Ht=be.createImageData(ne,le);try{Ht.data.set(it)}catch{var Zt=Ht.data,Wt=Zt.length;for(Q=0;Q<Wt;Q++)Zt[Q]=it[Q]}be.putImageData(Ht,0,0)}else{var sr=Math.floor(I/2),Gr=Math.floor(D/2);for(Q=0;Q<X;Q++)if(Ct=R[Q],Le.reverse(),Le[We]=He(Q+1),!(Le[0]===Le[1]||Le[0]===void 0||Le[1]===void 0))for(Qt=De(0),Ft=[Qt,Qt],Z=0;Z<ae;Z++)Ft.reverse(),Ft[Ze]=De(Z+1),!(Ft[0]===Ft[1]||Ft[0]===void 0||Ft[1]===void 0)&&(Ot=Ct[Z],jt=Nt(Ot,(Ft[1]-Ft[0])*(Le[1]-Le[0])),be.fillStyle="rgba("+jt.join(",")+")",be.fillRect(Ft[0]+sr,Le[0]+Gr,Ft[1]-Ft[0]-I,Le[1]-Le[0]-D))}Ie=Math.round(Ie/ze),Ve=Math.round(Ve/ze),dt=Math.round(dt/ze);var cn=c("rgb("+Ie+","+Ve+","+dt+")");M._hmpixcount=(M._hmpixcount||0)+ze,M._hmlumcount=(M._hmlumcount||0)+ze*cn.getLuminance();var qr=S.selectAll("image").data(E);qr.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),qr.attr({height:le,width:ne,x:J,y:q,"xlink:href":me.toDataURL("image/png")}),m(S);var st=F.texttemplate;if(st){var rr=v(F),$t={type:"linear",range:[rr.min,rr.max],_separators:h._separators,_numFormat:h._numFormat},hr=F.type==="histogram2dcontour",Sr=F.type==="contour",tt=Sr?1:0,Qe=Sr?X-1:X,lt=Sr?1:0,ft=Sr?ae-1:ae,Et=[];for(Z=tt;Z<Qe;Z++){var Vt;if(Sr)Vt=P.y[Z];else if(hr){if(Z===0||Z===X-1)continue;Vt=P.y[Z]}else if(P.yCenter)Vt=P.yCenter[Z];else{if(Z+1===X&&P.y[Z+1]===void 0)continue;Vt=(P.y[Z]+P.y[Z+1])/2}var Pe=Math.round(L.c2p(Vt));if(!(0>Pe||Pe>L._length))for(Q=lt;Q<ft;Q++){var Se;if(Sr)Se=P.x[Q];else if(hr){if(Q===0||Q===ae-1)continue;Se=P.x[Q]}else if(P.xCenter)Se=P.xCenter[Q];else{if(Q+1===ae&&P.x[Q+1]===void 0)continue;Se=(P.x[Q]+P.x[Q+1])/2}var ot=Math.round(h.c2p(Se));if(!(0>ot||ot>h._length)){var ct=n({x:Se,y:Vt},F,M._fullLayout);ct.x=Se,ct.y=Vt;var pt=P.z[Z][Q];pt===void 0?(ct.z="",ct.zLabel=""):(ct.z=pt,ct.zLabel=e.tickText($t,pt,"hover").text);var St=P.text&&P.text[Z]&&P.text[Z][Q];(St===void 0||St===!1)&&(St=""),ct.text=St;var xt=a.texttemplateString(st,ct,M._fullLayout._d3locale,ct,F._meta||{});if(!!xt){var Pt=xt.split("<br>"),Xt=Pt.length,or=0;for(ie=0;ie<Xt;ie++)or=Math.max(or,Pt[ie].length);Et.push({l:Xt,c:or,t:xt,x:ot,y:Pe,z:pt})}}}}var Pr=F.textfont,Ar=Pr.family,Er=Pr.size,Jr=M._fullLayout.font.size;if(!Er||Er==="auto"){var lr=1/0,br=1/0,Fr=0,Hr=0;for(ie=0;ie<Et.length;ie++){var Lr=Et[ie];if(Fr=Math.max(Fr,Lr.l),Hr=Math.max(Hr,Lr.c),ie<Et.length-1){var at=Et[ie+1],Rt=Math.abs(at.x-Lr.x),Kt=Math.abs(at.y-Lr.y);Rt&&(lr=Math.min(lr,Rt)),Kt&&(br=Math.min(br,Kt))}}!isFinite(lr)||!isFinite(br)?Er=Jr:(lr-=I,br-=D,lr/=Hr,br/=Fr,lr/=g/2,br/=g,Er=Math.min(Math.floor(lr),Math.floor(br),Jr))}if(Er<=0||!isFinite(Er))return;var ur=function(Dr){return Dr.x},Nr=function(Dr){return Dr.y-Er*(Dr.l*g/2-1)},Vr=f(S).data(Et);Vr.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(Dr){var Mr=y.select(this),jr=Pr.color;(!jr||jr==="auto")&&(jr=r.contrast("rgba("+ke(Dr.z).join()+")")),Mr.attr("data-notex",1).call(i.positionText,ur(Dr),Nr(Dr)).call(T.font,Ar,Er,jr).text(Dr.t).call(i.convertToTspans,M)})}})};function l(M,w){var p=w.length-2,_=a.constrain(a.findBin(M,w),0,p),h=w[_],L=w[_+1],E=a.constrain(_+(M-h)/(L-h)-.5,0,p),S=Math.round(E),P=Math.abs(E-S);return!E||E===p||!P?{bin0:S,bin1:S,frac:0}:{bin0:S,frac:P,bin1:Math.round(S+P/(E-S))}}function x(M,w){var p=w.length-1,_=a.constrain(a.findBin(M,w),0,p),h=w[_],L=w[_+1],E=(M-h)/(L-h)||0;return E<=0?{bin0:_,bin1:_,frac:0}:E<.5?{bin0:_,bin1:_+1,frac:E}:{bin0:_+1,bin1:_,frac:1-E}}function u(M,w,p){M[w]=p[0],M[w+1]=p[1],M[w+2]=p[2],M[w+3]=Math.round(p[3]*255)}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(t,N,V){var y=t("@plotly/d3");N.exports=function(A){y.select(A).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],815:[function(t,N,V){N.exports=function(c,A,T){var e=T("zsmooth");e===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],816:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../registry");N.exports=function(i,n,r,v,s,o){var b=r("z");s=s||"x",o=o||"y";var g,d;if(b===void 0||!b.length)return 0;if(c.isArray1D(i.z)){g=r(s),d=r(o);var f=c.minRowLength(g),m=c.minRowLength(d);if(f===0||m===0)return 0;n._length=Math.min(f,m,b.length)}else{if(g=T(s,r),d=T(o,r),!e(b))return 0;r("transpose"),n._length=null}if(i.type==="heatmapgl")return!0;var l=A.getComponentMethod("calendars","handleTraceDefaults");return l(i,n,[s,o],v),!0};function T(a,i){var n=i(a),r=n?i(a+"type","array"):"scaled";return r==="scaled"&&(i(a+"0"),i("d"+a)),n}function e(a){for(var i=!0,n=!1,r=!1,v,s=0;s<a.length;s++){if(v=a[s],!c.isArrayOrTypedArray(v)){i=!1;break}v.length>0&&(n=!0);for(var o=0;o<v.length;o++)if(y(v[o])){r=!0;break}}return i&&n&&r}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(t,N,V){for(var y=t("../heatmap/attributes"),c=t("../../components/colorscale/attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},i=0;i<e.length;i++){var n=e[i];a[n]=y[n]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},A(a,c("",{cLetter:"z",autoColorDflt:!1})),N.exports=T(a,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(t,N,V){var y=t("../../../stackgl_modules").gl_heatmap2d,c=t("../../plots/cartesian/axes"),A=t("../../lib/str2rgbarray");function T(n,r){this.scene=n,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=y(n.glplot,this.options),this.heatmap._trace=this}var e=T.prototype;e.handlePick=function(n){var r=this.options,v=r.shape,s=n.pointId,o=s%v[0],b=Math.floor(s/v[0]),g=s;return{trace:this,dataCoord:n.dataCoord,traceCoord:[r.x[o],r.y[b],r.z[g]],textLabel:this.textLabels[s],name:this.name,pointIndex:[b,o],hoverinfo:this.hoverinfo}},e.update=function(n,r){var v=r[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var s=v.z;this.options.z=[].concat.apply([],s);var o=s[0].length,b=s.length;this.options.shape=[o,b],this.options.x=v.x,this.options.y=v.y,this.options.zsmooth=n.zsmooth;var g=a(n);this.options.colorLevels=g.colorLevels,this.options.colorValues=g.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var d=this.scene.xaxis,f=this.scene.yaxis,m,l;n.zsmooth===!1&&(m={ppad:v.x[1]-v.x[0]},l={ppad:v.y[1]-v.y[0]}),n._extremes[d._id]=c.findExtremes(d,v.x,m),n._extremes[f._id]=c.findExtremes(f,v.y,l)},e.dispose=function(){this.heatmap.dispose()};function a(n){for(var r=n.colorscale,v=n.zmin,s=n.zmax,o=r.length,b=new Array(o),g=new Array(4*o),d=0;d<o;d++){var f=r[d],m=A(f[1]);b[d]=v+f[0]*(s-v);for(var l=0;l<4;l++)g[4*d+l]=m[l]}return{colorLevels:b,colorValues:g}}function i(n,r,v){var s=new T(n,r.uid);return s.update(r,v),s}N.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(t,N,V){var y=t("../../lib"),c=t("../heatmap/xyz_defaults"),A=t("../../components/colorscale/defaults"),T=t("./attributes");N.exports=function(a,i,n,r){function v(o,b){return y.coerce(a,i,T,o,b)}var s=c(a,i,v,r);if(!s){i.visible=!1;return}v("text"),v("zsmooth"),A(a,i,r,v,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../heatmap/calc"),plot:t("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(t,N,V){var y=t("../bar/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../plots/font_attributes"),a=t("./bin_attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:c("x"),yhoverformat:c("y"),text:n({},y.text,{}),hovertext:n({},y.hovertext,{}),orientation:y.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:A({},{keys:i.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:n({},y.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:y.insidetextanchor,textangle:y.textangle,cliponaxis:y.cliponaxis,constraintext:y.constraintext,marker:y.marker,offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup,selected:y.selected,unselected:y.unselected,_deprecated:{bardir:y._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(t,N,V){N.exports=function(c,A){for(var T=c.length,e=0,a=0;a<T;a++)A[a]?(c[a]/=A[a],e+=c[a]):c[a]=null;return e}},{}],823:[function(t,N,V){N.exports=function(c,A){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(t,N,V){var y=t("fast-isnumeric");N.exports={count:function(c,A,T){return T[c]++,1},sum:function(c,A,T,e){var a=e[A];return y(a)?(a=Number(a),T[c]+=a,a):0},avg:function(c,A,T,e,a){var i=e[A];return y(i)&&(i=Number(i),T[c]+=i,a[c]++),0},min:function(c,A,T,e){var a=e[A];if(y(a))if(a=Number(a),y(T[c])){if(T[c]>a){var i=a-T[c];return T[c]=a,i}}else return T[c]=a,a;return 0},max:function(c,A,T,e){var a=e[A];if(y(a))if(a=Number(a),y(T[c])){if(T[c]<a){var i=a-T[c];return T[c]=a,i}}else return T[c]=a,a;return 0}}},{"fast-isnumeric":190}],825:[function(t,N,V){var y=t("../../constants/numerical"),c=y.ONEAVGYEAR,A=y.ONEAVGMONTH,T=y.ONEDAY,e=y.ONEHOUR,a=y.ONEMIN,i=y.ONESEC,n=t("../../plots/cartesian/axes").tickIncrement;N.exports=function(g,d,f,m,l){var x=-1.1*d,u=-.1*d,M=g-u,w=f[0],p=f[1],_=Math.min(r(w+u,w+M,m,l),r(p+u,p+M,m,l)),h=Math.min(r(w+x,w+u,m,l),r(p+x,p+u,m,l)),L,E;if(_>h&&h<Math.abs(p-w)/4e3?(L=_,E=!1):(L=Math.min(_,h),E=!0),m.type==="date"&&L>T){var S=L===c?1:6,P=L===c?"M12":"M1";return function(F,I){var D=m.c2d(F,c,l),R=D.indexOf("-",S);R>0&&(D=D.substr(0,R));var O=m.d2c(D,0,l);if(O<F){var z=n(O,P,!1,l);(O+z)/2<F+g&&(O=z)}return I&&E?n(O,P,!0,l):O}}return function(F,I){var D=L*Math.round(F/L);return D+L/10<F&&D+L*.9<F+g&&(D+=L),I&&E&&(D-=L),D}};function r(b,g,d,f){if(b*g<=0)return 1/0;for(var m=Math.abs(g-b),l=d.type==="date",x=v(m,l),u=0;u<10;u++){var M=v(x*80,l);if(x===M)break;if(s(M,b,g,l,d,f))x=M;else break}return x}function v(b,g){return g&&b>i?b>T?b>c*1.1?c:b>A*1.1?A:T:b>e?e:b>a?a:i:Math.pow(10,Math.floor(Math.log(b)/Math.LN10))}function s(b,g,d,f,m,l){if(f&&b>T){var x=o(g,m,l),u=o(d,m,l),M=b===c?0:1;return x[M]!==u[M]}return Math.floor(d/b)-Math.floor(g/b)>.1}function o(b,g,d){var f=g.c2d(b,c,d).split("-");return f[0]===""&&(f.unshift(),f[0]="-"+f[0]),f}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../registry"),T=t("../../plots/cartesian/axes"),e=t("../bar/arrays_to_calcdata"),a=t("./bin_functions"),i=t("./norm_functions"),n=t("./average"),r=t("./bin_label_vals");function v(d,f){var m=[],l=[],x=f.orientation==="h",u=T.getFromId(d,x?f.yaxis:f.xaxis),M=x?"y":"x",w={x:"y",y:"x"}[M],p=f[M+"calendar"],_=f.cumulative,h,L=s(d,f,u,M),E=L[0],S=L[1],P=typeof E.size=="string",F=[],I=P?F:E,D=[],R=[],O=[],z=0,G=f.histnorm,Y=f.histfunc,ee=G.indexOf("density")!==-1,j,X,ae;_.enabled&&ee&&(G=G.replace(/ ?density$/,""),ee=!1);var he=Y==="max"||Y==="min",K=he?null:0,J=a.count,U=i[G],H=!1,q=function(He){return u.r2c(He,0,p)},re;for(c.isArrayOrTypedArray(f[w])&&Y!=="count"&&(re=f[w],H=Y==="avg",J=a[Y]),h=q(E.start),X=q(E.end)+(h-T.tickIncrement(h,E.size,!1,p))/1e6;h<X&&m.length<1e6&&(j=T.tickIncrement(h,E.size,!1,p),m.push((h+j)/2),l.push(K),O.push([]),F.push(h),ee&&D.push(1/(j-h)),H&&R.push(0),!(j<=h));)h=j;F.push(h),!P&&u.type==="date"&&(I={start:q(I.start),end:q(I.end),size:I.size}),d._fullLayout._roundFnOpts||(d._fullLayout._roundFnOpts={});var Z=f["_"+M+"bingroup"],Q={leftGap:1/0,rightGap:1/0};Z&&(d._fullLayout._roundFnOpts[Z]||(d._fullLayout._roundFnOpts[Z]=Q),Q=d._fullLayout._roundFnOpts[Z]);var ie=l.length,oe=!0,ne=Q.leftGap,le=Q.rightGap,_e={};for(h=0;h<S.length;h++){var fe=S[h];ae=c.findBin(fe,I),ae>=0&&ae<ie&&(z+=J(ae,h,l,re,R),oe&&O[ae].length&&fe!==S[O[ae][0]]&&(oe=!1),O[ae].push(h),_e[h]=ae,ne=Math.min(ne,fe-F[ae]),le=Math.min(le,F[ae+1]-fe))}Q.leftGap=ne,Q.rightGap=le;var ye;oe||(ye=function(He,Ae){return function(){var Le=d._fullLayout._roundFnOpts[Z];return r(Le.leftGap,Le.rightGap,F,u,p)(He,Ae)}}),H&&(z=n(l,R)),U&&U(l,z,D),_.enabled&&g(l,_.direction,_.currentbin);var xe=Math.min(m.length,l.length),me=[],be=0,ke=xe-1;for(h=0;h<xe;h++)if(l[h]){be=h;break}for(h=xe-1;h>=be;h--)if(l[h]){ke=h;break}for(h=be;h<=ke;h++)if(y(m[h])&&y(l[h])){var De={p:m[h],s:l[h],b:0};_.enabled||(De.pts=O[h],oe?De.ph0=De.ph1=O[h].length?S[O[h][0]]:m[h]:(f._computePh=!0,De.ph0=ye(F[h]),De.ph1=ye(F[h+1],!0))),me.push(De)}return me.length===1&&(me[0].width1=T.tickIncrement(me[0].p,E.size,!1,p)-me[0].p),e(me,f),c.isArrayOrTypedArray(f.selectedpoints)&&c.tagSelected(me,f,_e),me}function s(d,f,m,l,x){var u=l+"bins",M=d._fullLayout,w=f["_"+l+"bingroup"],p=M._histogramBinOpts[w],_=M.barmode==="overlay",h,L,E,S,P,F,I,D=function(fe){return m.r2c(fe,0,S)},R=function(fe){return m.c2r(fe,0,S)},O=m.type==="date"?function(fe){return fe||fe===0?c.cleanDate(fe,null,S):null}:function(fe){return y(fe)?Number(fe):null};function z(fe,ye,xe){ye[fe+"Found"]?(ye[fe]=O(ye[fe]),ye[fe]===null&&(ye[fe]=xe[fe])):(F[fe]=ye[fe]=xe[fe],c.nestedProperty(L[0],u+"."+fe).set(xe[fe]))}if(f["_"+l+"autoBinFinished"])delete f["_"+l+"autoBinFinished"];else{L=p.traces;var G=[],Y=!0,ee=!1,j=!1;for(h=0;h<L.length;h++)if(E=L[h],E.visible){var X=p.dirs[h];P=E["_"+X+"pos0"]=m.makeCalcdata(E,X),G=c.concat(G,P),delete E["_"+l+"autoBinFinished"],f.visible===!0&&(Y?Y=!1:(delete E._autoBin,E["_"+l+"autoBinFinished"]=1),A.traceIs(E,"2dMap")&&(ee=!0),E.type==="histogram2dcontour"&&(j=!0))}S=L[0][l+"calendar"];var ae=T.autoBin(G,m,p.nbins,ee,S,p.sizeFound&&p.size),he=L[0]._autoBin={};if(F=he[p.dirs[0]]={},j&&(p.size||(ae.start=R(T.tickIncrement(D(ae.start),ae.size,!0,S))),p.end===void 0&&(ae.end=R(T.tickIncrement(D(ae.end),ae.size,!1,S)))),_&&!A.traceIs(f,"2dMap")&&ae._dataSpan===0&&m.type!=="category"&&m.type!=="multicategory"){if(x)return[ae,P,!0];ae=o(d,f,m,l,u)}I=E.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?ae.start=R(T.tickIncrement(D(ae.start),ae.size,!0,S)):ae.end=R(T.tickIncrement(D(ae.end),ae.size,!1,S))),p.size=ae.size,p.sizeFound||(F.size=ae.size,c.nestedProperty(L[0],u+".size").set(ae.size)),z("start",p,ae),z("end",p,ae)}P=f["_"+l+"pos0"],delete f["_"+l+"pos0"];var K=f._input[u]||{},J=c.extendFlat({},p),U=p.start,H=m.r2l(K.start),q=H!==void 0;if((p.startFound||q)&&H!==m.r2l(U)){var re=q?H:c.aggNums(Math.min,null,P),Z={type:m.type==="category"||m.type==="multicategory"?"linear":m.type,r2l:m.r2l,dtick:p.size,tick0:U,calendar:S,range:[re,T.tickIncrement(re,p.size,!1,S)].map(m.l2r)},Q=T.tickFirst(Z);Q>m.r2l(re)&&(Q=T.tickIncrement(Q,p.size,!0,S)),J.start=m.l2r(Q),q||c.nestedProperty(f,u+".start").set(J.start)}var ie=p.end,oe=m.r2l(K.end),ne=oe!==void 0;if((p.endFound||ne)&&oe!==m.r2l(ie)){var le=ne?oe:c.aggNums(Math.max,null,P);J.end=m.l2r(le),ne||c.nestedProperty(f,u+".start").set(J.end)}var _e="autobin"+l;return f._input[_e]===!1&&(f._input[u]=c.extendFlat({},f[u]||{}),delete f._input[_e],delete f[_e]),[J,P]}function o(d,f,m,l,x){var u=d._fullLayout,M=b(d,f),w=!1,p=1/0,_=[f],h,L,E;for(h=0;h<M.length;h++)if(L=M[h],L===f)w=!0;else if(!w)E=u._histogramBinOpts[L["_"+l+"bingroup"]],p=Math.min(p,E.size||L[x].size);else{var S=s(d,L,m,l,!0),P=S[0],F=S[2];L["_"+l+"autoBinFinished"]=1,L["_"+l+"pos0"]=S[1],F?_.push(L):p=Math.min(p,P.size)}var I=new Array(_.length);for(h=0;h<_.length;h++)for(var D=_[h]["_"+l+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){I[h]=D[R];break}for(isFinite(p)||(p=c.distinctVals(I).minDiff),h=0;h<_.length;h++){L=_[h];var O=L[l+"calendar"],z={start:m.c2r(I[h]-p/2,0,O),end:m.c2r(I[h]+p/2,0,O),size:p};L._input[x]=L[x]=z,E=u._histogramBinOpts[L["_"+l+"bingroup"]],E&&c.extendFlat(E,z)}return f[x]}function b(d,f){for(var m=f.xaxis,l=f.yaxis,x=f.orientation,u=[],M=d._fullData,w=0;w<M.length;w++){var p=M[w];p.type==="histogram"&&p.visible===!0&&p.orientation===x&&p.xaxis===m&&p.yaxis===l&&u.push(p)}return u}function g(d,f,m){var l,x,u;function M(p){u=d[p],d[p]/=2}function w(p){x=d[p],d[p]=u+x/2,u+=x}if(m==="half")if(f==="increasing")for(M(0),l=1;l<d.length;l++)w(l);else for(M(d.length-1),l=d.length-2;l>=0;l--)w(l);else if(f==="increasing"){for(l=1;l<d.length;l++)d[l]+=d[l-1];m==="exclude"&&(d.unshift(0),d.pop())}else{for(l=d.length-2;l>=0;l--)d[l]+=d[l+1];m==="exclude"&&(d.push(0),d.shift())}}N.exports={calc:v,calcAllAutoBins:s}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(t,N,V){N.exports={eventDataKeys:["binNumber"]}},{}],828:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axis_ids"),A=t("../../registry").traceIs,T=t("../bar/defaults").handleGroupingDefaults,e=y.nestedProperty,a=t("../../plots/cartesian/constraints").getAxisGroup,i=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];N.exports=function(v,s){var o=s._histogramBinOpts={},b=[],g={},d=[],f,m,l,x,u,M,w;function p(j,X){return y.coerce(f._input,f,f._module.attributes,j,X)}function _(j){return j.orientation==="v"?"x":"y"}function h(j,X){var ae=c.getFromTrace({_fullLayout:s},j,X);return ae.type}function L(j,X,ae){var he=j.uid+"__"+ae;X||(X=he);var K=h(j,ae),J=j[ae+"calendar"]||"",U=o[X],H=!0;U&&(K===U.axType&&J===U.calendar?(H=!1,U.traces.push(j),U.dirs.push(ae)):(X=he,K!==U.axType&&y.warn(["Attempted to group the bins of trace",j.index,"set on a","type:"+K,"axis","with bins on","type:"+U.axType,"axis."].join(" ")),J!==U.calendar&&y.warn(["Attempted to group the bins of trace",j.index,"set with a",J,"calendar","with bins",U.calendar?"on a "+U.calendar+" calendar":"w/o a set calendar"].join(" ")))),H&&(o[X]={traces:[j],dirs:[ae],axType:K,calendar:j[ae+"calendar"]||""}),j["_"+ae+"bingroup"]=X}for(u=0;u<v.length;u++)f=v[u],A(f,"histogram")&&(b.push(f),delete f._xautoBinFinished,delete f._yautoBinFinished,A(f,"2dMap")||T(f._input,f,s,p));var E=s._alignmentOpts||{};for(u=0;u<b.length;u++){if(f=b[u],l="",!A(f,"2dMap")){if(x=_(f),s.barmode==="group"&&f.alignmentgroup){var S=f[x+"axis"],P=a(s,S)+f.orientation;(E[P]||{})[f.alignmentgroup]&&(l=P)}!l&&s.barmode!=="overlay"&&(l=a(s,f.xaxis)+a(s,f.yaxis)+_(f))}l?(g[l]||(g[l]=[]),g[l].push(f)):d.push(f)}for(l in g){if(m=g[l],m.length===1){d.push(m[0]);continue}var F=!1;for(m.length&&(f=m[0],F=p("bingroup")),l=F||l,u=0;u<m.length;u++){f=m[u];var I=f._input.bingroup;I&&I!==l&&y.warn(["Trace",f.index,"must match","within bingroup",l+".","Ignoring its bingroup:",I,"setting."].join(" ")),f.bingroup=l,L(f,l,_(f))}}for(u=0;u<d.length;u++){f=d[u];var D=p("bingroup");if(A(f,"2dMap"))for(w=0;w<2;w++){x=n[w];var R=p(x+"bingroup",D?D+"__"+x:null);L(f,R,x)}else L(f,D,_(f))}for(l in o){var O=o[l];for(m=O.traces,M=0;M<i.length;M++){var z=i[M],G=z.name,Y,ee;if(!(G==="nbins"&&O.sizeFound)){for(u=0;u<m.length;u++){if(f=m[u],x=O.dirs[u],Y=z.aStr[x],e(f._input,Y).get()!==void 0){O[G]=p(Y),O[G+"Found"]=!0;break}ee=(f._autoBin||{})[x]||{},ee[G]&&e(f,Y).set(ee[G])}if(G==="start"||G==="end")for(;u<m.length;u++)f=m[u],f["_"+x+"bingroup"]&&(ee=(f._autoBin||{})[x]||{},p(Y,ee[G]));G==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(f=m[0],O[G]=p(Y))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("../../components/color"),T=t("../bar/defaults").handleText,e=t("../bar/style_defaults"),a=t("./attributes");N.exports=function(n,r,v,s){function o(h,L){return c.coerce(n,r,a,h,L)}var b=o("x"),g=o("y"),d=o("cumulative.enabled");d&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var f=o("textposition");T(n,r,s,o,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var m=o("orientation",g&&!b?"h":"v"),l=m==="v"?"x":"y",x=m==="v"?"y":"x",u=b&&g?Math.min(c.minRowLength(b)&&c.minRowLength(g)):c.minRowLength(r[l]||[]);if(!u){r.visible=!1;return}r._length=u;var M=y.getComponentMethod("calendars","handleTraceDefaults");M(n,r,["x","y"],s);var w=r[x];w&&o("histfunc"),o("histnorm"),o("autobin"+l),e(n,r,o,v,s),c.coerceSelectionMarkerOpacity(r,o);var p=(r.marker.line||{}).color,_=y.getComponentMethod("errorbars","supplyDefaults");_(n,r,p||A.defaultLine,{axis:"y"}),_(n,r,p||A.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(t,N,V){N.exports=function(c,A,T,e,a){if(c.x="xVal"in A?A.xVal:A.x,c.y="yVal"in A?A.yVal:A.y,"zLabelVal"in A&&(c.z=A.zLabelVal),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),!(T.cumulative||{}).enabled){var i=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;c.pointNumbers=i,c.binNumber=c.pointNumber,delete c.pointNumber,delete c.pointIndex;var n;if(T._indexToPoints){n=[];for(var r=0;r<i.length;r++)n=n.concat(T._indexToPoints[i[r]])}else n=i;c.pointIndices=n}return c}},{}],831:[function(t,N,V){var y=t("../bar/hover").hoverPoints,c=t("../../plots/cartesian/axes").hoverLabelText;N.exports=function(T,e,a,i,n){var r=y(T,e,a,i,n);if(!!r){T=r[0];var v=T.cd[T.index],s=T.cd[0].trace;if(!s.cumulative.enabled){var o=s.orientation==="h"?"y":"x";T[o+"Label"]=c(T[o+"a"],[v.ph0,v.ph1],s[o+"hoverformat"])}return r}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("../bar/layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),supplyLayoutDefaults:t("../bar/layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("../bar/cross_trace_calc").crossTraceCalc,plot:t("../bar/plot").plot,layerName:"barlayer",style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,colorbar:t("../scatter/marker_colorbar"),hoverPoints:t("./hover"),selectPoints:t("../bar/select"),eventData:t("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(t,N,V){N.exports={percent:function(y,c){for(var A=y.length,T=100/c,e=0;e<A;e++)y[e]*=T},probability:function(y,c){for(var A=y.length,T=0;T<A;T++)y[T]/=c},density:function(y,c,A,T){var e=y.length;T=T||1;for(var a=0;a<e;a++)y[a]*=A[a]*T},"probability density":function(y,c,A,T){var e=y.length;T&&(c/=T);for(var a=0;a<e;a++)y[a]*=A[a]/c}}},{}],834:[function(t,N,V){var y=t("../histogram/attributes"),c=t("../histogram/bin_attributes"),A=t("../heatmap/attributes"),T=t("../../plots/attributes"),e=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=t("../../plots/template_attributes").hovertemplateAttrs,i=t("../../plots/template_attributes").texttemplateAttrs,n=t("../../components/colorscale/attributes"),r=t("../../lib/extend").extendFlat;N.exports=r({x:y.x,y:y.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:y.histnorm,histfunc:y.histfunc,nbinsx:y.nbinsx,xbins:c("x"),nbinsy:y.nbinsy,ybins:c("y"),autobinx:y.autobinx,autobiny:y.autobiny,bingroup:r({},y.bingroup,{}),xbingroup:r({},y.bingroup,{}),ybingroup:r({},y.bingroup,{}),xgap:A.xgap,ygap:A.ygap,zsmooth:A.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:A.textfont,showlegend:r({},T.showlegend,{dflt:!1})},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../histogram/bin_functions"),T=t("../histogram/norm_functions"),e=t("../histogram/average"),a=t("../histogram/bin_label_vals"),i=t("../histogram/calc").calcAllAutoBins;N.exports=function(o,b){var g=c.getFromId(o,b.xaxis),d=c.getFromId(o,b.yaxis),f=b.xcalendar,m=b.ycalendar,l=function(Xe){return g.r2c(Xe,0,f)},x=function(Xe){return d.r2c(Xe,0,m)},u=function(Xe){return g.c2r(Xe,0,f)},M=function(Xe){return d.c2r(Xe,0,m)},w,p,_,h,L=i(o,b,g,"x"),E=L[0],S=L[1],P=i(o,b,d,"y"),F=P[0],I=P[1],D=b._length;S.length>D&&S.splice(D,S.length-D),I.length>D&&I.splice(D,I.length-D);var R=[],O=[],z=[],G=typeof E.size=="string",Y=typeof F.size=="string",ee=[],j=[],X=G?ee:E,ae=Y?j:F,he=0,K=[],J=[],U=b.histnorm,H=b.histfunc,q=U.indexOf("density")!==-1,re=H==="max"||H==="min",Z=re?null:0,Q=A.count,ie=T[U],oe=!1,ne=[],le=[],_e="z"in b?b.z:"marker"in b&&Array.isArray(b.marker.color)?b.marker.color:"";_e&&H!=="count"&&(oe=H==="avg",Q=A[H]);var fe=E.size,ye=l(E.start),xe=l(E.end)+(ye-c.tickIncrement(ye,fe,!1,f))/1e6;for(w=ye;w<xe;w=c.tickIncrement(w,fe,!1,f))O.push(Z),ee.push(w),oe&&z.push(0);ee.push(w);var me=O.length,be=(w-ye)/me,ke=u(ye+be/2),De=F.size,He=x(F.start),Ae=x(F.end)+(He-c.tickIncrement(He,De,!1,m))/1e6;for(w=He;w<Ae;w=c.tickIncrement(w,De,!1,m)){R.push(O.slice()),j.push(w);var Le=new Array(me);for(p=0;p<me;p++)Le[p]=[];J.push(Le),oe&&K.push(z.slice())}j.push(w);var Ze=R.length,We=(w-He)/Ze,ze=M(He+We/2);q&&(ne=n(O.length,X,be,G),le=n(R.length,ae,We,Y)),!G&&g.type==="date"&&(X=r(l,X)),!Y&&d.type==="date"&&(ae=r(x,ae));var Ie=!0,Ve=!0,dt=new Array(me),Ft=new Array(Ze),Qt=1/0,Ot=1/0,Ct=1/0,jt=1/0;for(w=0;w<D;w++){var Nt=S[w],Lt=I[w];_=y.findBin(Nt,X),h=y.findBin(Lt,ae),_>=0&&_<me&&h>=0&&h<Ze&&(he+=Q(_,w,R[h],_e,K[h]),J[h][_].push(w),Ie&&(dt[_]===void 0?dt[_]=Nt:dt[_]!==Nt&&(Ie=!1)),Ve&&(Ft[h]===void 0?Ft[h]=Lt:Ft[h]!==Lt&&(Ve=!1)),Qt=Math.min(Qt,Nt-ee[_]),Ot=Math.min(Ot,ee[_+1]-Nt),Ct=Math.min(Ct,Lt-j[h]),jt=Math.min(jt,j[h+1]-Lt))}if(oe)for(h=0;h<Ze;h++)he+=e(R[h],K[h]);if(ie)for(h=0;h<Ze;h++)ie(R[h],he,ne,le[h]);return{x:S,xRanges:v(ee,Ie&&dt,Qt,Ot,g,f),x0:ke,dx:be,y:I,yRanges:v(j,Ve&&Ft,Ct,jt,d,m),y0:ze,dy:We,z:R,pts:J}};function n(s,o,b,g){var d=new Array(s),f;if(g)for(f=0;f<s;f++)d[f]=1/(o[f+1]-o[f]);else{var m=1/b;for(f=0;f<s;f++)d[f]=m}return d}function r(s,o){return{start:s(o.start),end:s(o.end),size:o.size}}function v(s,o,b,g,d,f){var m,l=s.length-1,x=new Array(l),u=a(b,g,s,d,f);for(m=0;m<l;m++){var M=(o||[])[m];x[m]=M===void 0?[u(s[m]),u(s[m+1],!0)]:[M,M]}return x}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(t,N,V){var y=t("../../lib"),c=t("./sample_defaults"),A=t("../heatmap/style_defaults"),T=t("../../components/colorscale/defaults"),e=t("../heatmap/label_defaults"),a=t("./attributes");N.exports=function(n,r,v,s){function o(b,g){return y.coerce(n,r,a,b,g)}c(n,r,o,s),r.visible!==!1&&(A(n,r,o,s),T(n,r,s,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),e(o,s),o("xhoverformat"),o("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(t,N,V){var y=t("../heatmap/hover"),c=t("../../plots/cartesian/axes").hoverLabelText;N.exports=function(T,e,a,i,n){var r=y(T,e,a,i,n);if(!!r){T=r[0];var v=T.index,s=v[0],o=v[1],b=T.cd[0],g=b.trace,d=b.xRanges[o],f=b.yRanges[s];return T.xLabel=c(T.xa,[d[0],d[1]],g.xhoverformat),T.yLabel=c(T.ya,[f[0],f[1]],g.yhoverformat),r}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../heatmap/calc"),plot:t("../heatmap/plot"),layerName:"heatmaplayer",colorbar:t("../heatmap/colorbar"),style:t("../heatmap/style"),hoverPoints:t("./hover"),eventData:t("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(t,N,V){var y=t("../../registry"),c=t("../../lib");N.exports=function(T,e,a,i){var n=a("x"),r=a("y"),v=c.minRowLength(n),s=c.minRowLength(r);if(!v||!s){e.visible=!1;return}e._length=Math.min(v,s);var o=y.getComponentMethod("calendars","handleTraceDefaults");o(T,e,["x","y"],i);var b=a("z")||a("marker.color");b&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":515,"../../registry":647}],840:[function(t,N,V){var y=t("../histogram2d/attributes"),c=t("../contour/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../lib/extend").extendFlat;N.exports=e({x:y.x,y:y.y,z:y.z,marker:y.marker,histnorm:y.histnorm,histfunc:y.histfunc,nbinsx:y.nbinsx,xbins:y.xbins,nbinsy:y.nbinsy,ybins:y.ybins,autobinx:y.autobinx,autobiny:y.autobiny,bingroup:y.bingroup,xbingroup:y.xbingroup,ybingroup:y.ybingroup,autocontour:c.autocontour,ncontours:c.ncontours,contours:c.contours,line:{color:c.line.color,width:e({},c.line.width,{dflt:.5}),dash:c.line.dash,smoothing:c.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:y.hovertemplate,texttemplate:c.texttemplate,textfont:c.textfont},A("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(t,N,V){var y=t("../../lib"),c=t("../histogram2d/sample_defaults"),A=t("../contour/contours_defaults"),T=t("../contour/style_defaults"),e=t("../heatmap/label_defaults"),a=t("./attributes");N.exports=function(n,r,v,s){function o(g,d){return y.coerce(n,r,a,g,d)}function b(g){return y.coerce2(n,r,a,g)}c(n,r,o,s),r.visible!==!1&&(A(n,r,o,b),T(n,r,o,s),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&e(o,s))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../contour/calc"),plot:t("../contour/plot").plot,layerName:"contourlayer",style:t("../contour/style"),colorbar:t("../contour/colorbar"),hoverPoints:t("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../components/colorscale/attributes"),T=t("../../plots/domain").attributes,e=t("../pie/attributes"),a=t("../sunburst/attributes"),i=t("../treemap/attributes"),n=t("../treemap/constants"),r=t("../../lib/extend").extendFlat;N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:a.marker.colors,line:a.marker.line,editType:"calc"},A("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:i.pathbar,text:e.text,textinfo:a.textinfo,texttemplate:c({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:y({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:e.sort,root:a.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(t,N,V){var y=t("../../plots/plots");V.name="icicle",V.plot=function(c,A,T,e){y.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){y.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],845:[function(t,N,V){var y=t("../sunburst/calc");V.calc=function(c,A){return y.calc(c,A)},V.crossTraceCalc=function(c){return y._runCrossTraceCalc("icicle",c)}},{"../sunburst/calc":1060}],846:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("../../components/color"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,a=t("../bar/constants").TEXTPAD,i=t("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;N.exports=function(s,o,b,g){function d(_,h){return y.coerce(s,o,c,_,h)}var f=d("labels"),m=d("parents");if(!f||!f.length||!m||!m.length){o.visible=!1;return}var l=d("values");l&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var x=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(x)?"text+label":"label"),d("hovertext"),d("hovertemplate");var u=d("pathbar.visible"),M="auto";e(s,o,g,d,M,{hasPathbar:u,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var w=d("marker.line.width");w&&d("marker.line.color",g.paper_bgcolor),d("marker.colors");var p=o._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;p&&r(s,o,g,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",p?1:.7),o._hovered={marker:{line:{width:2,color:A.contrast(g.paper_bgcolor)}}},u&&(d("pathbar.thickness",o.pathbar.textfont.size+2*a),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(o,g,d),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("../treemap/constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=t("../sunburst/plot").formatSliceLabel,s=!1;N.exports=function(b,g,d,f,m){var l=m.width,x=m.height,u=m.viewX,M=m.viewY,w=m.pathSlice,p=m.toMoveInsideSlice,_=m.strTransform,h=m.hasTransition,L=m.handleSlicesExit,E=m.makeUpdateSliceInterpolator,S=m.makeUpdateTextInterpolator,P=m.prevEntry,F={},I=b._context.staticPlot,D=b._fullLayout,R=g[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,G=O.textposition.indexOf("right")!==-1,Y=O.textposition.indexOf("bottom")!==-1,ee=e(d,[l,x],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}),j=ee.descendants(),X=1/0,ae=-1/0;j.forEach(function(H){var q=H.depth;q>=O._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(X=Math.min(X,q),ae=Math.max(ae,q))}),f=f.data(j,n.getPtId),O._maxVisibleLayers=isFinite(ae)?ae-X+1:0,f.enter().append("g").classed("slice",!0),L(f,s,F,[l,x],w),f.order();var he=null;if(h&&P){var K=n.getPtId(P);f.each(function(H){he===null&&n.getPtId(H)===K&&(he={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var J=function(){return he||{x0:0,x1:l,y0:0,y1:x}},U=f;return h&&(U=U.transition().each("end",function(){var H=y.select(this);n.setSliceCursor(H,b,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(H){H._x0=u(H.x0),H._x1=u(H.x1),H._y0=M(H.y0),H._y1=M(H.y1),H._hoverX=u(H.x1-O.tiling.pad),H._hoverY=M(Y?H.y1-O.tiling.pad/2:H.y0+O.tiling.pad/2);var q=y.select(this),re=c.ensureSingle(q,"path","surface",function(oe){oe.style("pointer-events",I?"none":"all")});h?re.transition().attrTween("d",function(oe){var ne=E(oe,s,J(),[l,x],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(le){return w(ne(le))}}):re.attr("d",w),q.call(r,d,b,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,b,{isTransitioning:b._transitioning}),re.call(a,H,O,{hovered:!1}),H.x0===H.x1||H.y0===H.y1?H._text="":H._text=v(H,d,O,g,D)||"";var Z=c.ensureSingle(q,"g","slicetext"),Q=c.ensureSingle(Z,"text","",function(oe){oe.attr("data-notex",1)}),ie=c.ensureUniformFontSize(b,n.determineTextFont(O,H,D.font));Q.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",G?"end":z?"start":"middle").call(A.font,ie).call(T.convertToTspans,b),H.textBB=A.bBox(Q.node()),H.transform=p(H,{fontSize:ie.size}),H.transform.fontSize=ie.size,h?Q.transition().attrTween("transform",function(oe){var ne=S(oe,s,J(),[l,x]);return function(le){return _(ne(le))}}):Q.attr("transform",_(H))}),he}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(t,N,V){N.exports={moduleType:"trace",name:"icicle",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(t,N,V){N.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return y.coerce(T,e,c,i,n)}a("iciclecolorway",e.colorway),a("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(t,N,V){var y=t("d3-hierarchy"),c=t("../treemap/flip_tree");N.exports=function(T,e,a){var i=a.flipX,n=a.flipY,r=a.orientation==="h",v=a.maxDepth,s=e[0],o=e[1];v&&(s=(T.height+1)*e[0]/Math.min(T.height+1,v),o=(T.height+1)*e[1]/Math.min(T.height+1,v));var b=y.partition().padding(a.pad.inner).size(r?[e[1],s]:[e[0],o])(T);return(r||i||n)&&c(b,e,{swapXY:r,flipX:i,flipY:n}),b}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(t,N,V){var y=t("../treemap/draw"),c=t("./draw_descendants");N.exports=function(T,e,a,i){return y(T,e,a,i,{type:"icicle",drawDescendants:c})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/color"),A=t("../../lib"),T=t("../bar/uniform_text").resizeText;function e(i){var n=i._fullLayout._iciclelayer.selectAll(".trace");T(i,n,"icicle"),n.each(function(r){var v=y.select(this),s=r[0],o=s.trace;v.style("opacity",o.opacity),v.selectAll("path.surface").each(function(b){y.select(this).call(a,b,o)})})}function a(i,n,r){var v=n.data.data,s=!n.children,o=v.i,b=A.castOption(r,o,"marker.line.color")||c.defaultLine,g=A.castOption(r,o,"marker.line.width")||0;i.style("stroke-width",g).call(c.fill,v.color).call(c.stroke,b).style("opacity",s?r.leaf.opacity:null)}N.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(t,N,V){for(var y=t("../../plots/attributes"),c=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],a=[],i=[],n=0;n<e.length;n++){var r=T[e[n]];a.push("For the `"+e[n]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),i.push("For the `"+e[n]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}N.exports=A({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:A({},y.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:c({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(t,N,V){var y=t("../../lib"),c=t("./constants"),A=t("fast-isnumeric"),T=t("../../plots/cartesian/axes"),e=t("../../lib").maxRowLength,a=t("./helpers").getImageSize;N.exports=function(s,o){var b,g;if(o._hasZ)b=o.z.length,g=e(o.z);else if(o._hasSource){var d=a(o.source);b=d.height,g=d.width}var f=T.getFromId(s,o.xaxis||"x"),m=T.getFromId(s,o.yaxis||"y"),l=f.d2c(o.x0)-o.dx/2,x=m.d2c(o.y0)-o.dy/2,u,M=[l,l+g*o.dx],w=[x,x+b*o.dy];if(f&&f.type==="log")for(u=0;u<g;u++)M.push(l+u*o.dx);if(m&&m.type==="log")for(u=0;u<b;u++)w.push(x+u*o.dy);o._extremes[f._id]=T.findExtremes(f,M),o._extremes[m._id]=T.findExtremes(m,w),o._scaler=r(o);var p={x0:l,y0:x,z:o.z,w:g,h:b};return[p]};function i(v,s,o,b){return function(g){return y.constrain((g-v)*s,o,b)}}function n(v,s){return function(o){return y.constrain(o,v,s)}}function r(v){var s=c.colormodel[v.colormodel],o=s.colormodel||v.colormodel,b=o.length;v._sArray=[];for(var g=0;g<b;g++)s.min[g]!==v.zmin[g]||s.max[g]!==v.zmax[g]?v._sArray.push(i(v.zmin[g],(s.max[g]-s.min[g])/(v.zmax[g]-v.zmin[g]),s.min[g],s.max[g])):v._sArray.push(n(s.min[g],s.max[g]));return function(d){for(var f=d.slice(0,b),m=0;m<b;m++){var l=f[m];if(!A(l))return!1;f[m]=v._sArray[m](l)}return f}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(t,N,V){N.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(y){return y.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(y){return y.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(y){return y.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(y){var c=y.slice(0,3);return c[1]=c[1]+"%",c[2]=c[2]+"%",c},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(y){var c=y.slice(0,4);return c[1]=c[1]+"%",c[2]=c[2]+"%",c},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("./constants"),T=t("../../snapshot/helpers").IMAGE_URL_PREFIX;N.exports=function(a,i){function n(s,o){return y.coerce(a,i,c,s,o)}n("source"),i.source&&!i.source.match(T)&&delete i.source,i._hasSource=!!i.source;var r=n("z");if(i._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!i._hasZ&&!i._hasSource){i.visible=!1;return}n("x0"),n("y0"),n("dx"),n("dy");var v;i._hasZ?(n("colormodel","rgb"),v=A.colormodel[i.colormodel],n("zmin",v.zminDflt||v.min),n("zmax",v.zmaxDflt||v.max)):i._hasSource&&(i.colormodel="rgba256",v=A.colormodel[i.colormodel],i.zmin=v.zminDflt,i.zmax=v.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),i._length=null}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(t,N,V){N.exports=function(c,A){return"xVal"in A&&(c.x=A.xVal),"yVal"in A&&(c.y=A.yVal),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),c.color=A.color,c.colormodel=A.trace.colormodel,c.z||(c.z=A.color),c}},{}],859:[function(t,N,V){var y=t("probe-image-size/sync"),c=t("../../snapshot/helpers").IMAGE_URL_PREFIX,A=t("buffer/").Buffer;V.getImageSize=function(T){var e=T.replace(c,""),a=new A(e,"base64");return y(a)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(t,N,V){var y=t("../../components/fx"),c=t("../../lib"),A=t("./constants");N.exports=function(e,a,i){var n=e.cd[0],r=n.trace,v=e.xa,s=e.ya;if(!(y.inbox(a-n.x0,a-(n.x0+n.w*r.dx),0)>0||y.inbox(i-n.y0,i-(n.y0+n.h*r.dy),0)>0)){var o=Math.floor((a-n.x0)/r.dx),b=Math.floor(Math.abs(i-n.y0)/r.dy),g;if(r._hasZ?g=n.z[b][o]:r._hasSource&&(g=r._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,b,1,1).data),!!g){var d=n.hi||r.hoverinfo,f;if(d){var m=d.split("+");m.indexOf("all")!==-1&&(m=["color"]),m.indexOf("color")!==-1&&(f=!0)}var l=A.colormodel[r.colormodel],x=l.colormodel||r.colormodel,u=x.length,M=r._scaler(g),w=l.suffix,p=[];(r.hovertemplate||f)&&(p.push("["+[M[0]+w[0],M[1]+w[1],M[2]+w[2]].join(", ")),u===4&&p.push(", "+M[3]+w[3]),p.push("]"),p=p.join(""),e.extraText=x.toUpperCase()+": "+p);var _;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[b])?_=r.hovertext[b][o]:Array.isArray(r.text)&&Array.isArray(r.text[b])&&(_=r.text[b][o]);var h=s.c2p(n.y0+(b+.5)*r.dy),L=n.x0+(o+.5)*r.dx,E=n.y0+(b+.5)*r.dy,S="["+g.slice(0,r.colormodel.length).join(", ")+"]";return[c.extendFlat(e,{index:[b,o],x0:v.c2p(n.x0+o*r.dx),x1:v.c2p(n.x0+(o+1)*r.dx),y0:h,y1:h,color:M,xVal:L,xLabelVal:L,yVal:E,yLabelVal:E,zLabelVal:S,text:_,hovertemplateLabels:{zLabel:S,colorLabel:p,"color[0]Label":M[0]+w[0],"color[1]Label":M[1]+w[1],"color[2]Label":M[2]+w[2],"color[3]Label":M[3]+w[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover"),eventData:t("./event_data"),moduleType:"trace",name:"image",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=c.strTranslate,T=t("../../constants/xmlns_namespaces"),e=t("./constants"),a=c.isIOS()||c.isSafari()||c.isIE();N.exports=function(n,r,v,s){var o=r.xaxis,b=r.yaxis,g=!(a||n._context._exportedPlot);c.makeTraceGroups(s,v,"im").each(function(d){var f=y.select(this),m=d[0],l=m.trace,x=(l.zsmooth==="fast"||l.zsmooth===!1&&g)&&!l._hasZ&&l._hasSource&&o.type==="linear"&&b.type==="linear";l._realImage=x;var u=m.z,M=m.x0,w=m.y0,p=m.w,_=m.h,h=l.dx,L=l.dy,E,S,P,F,I,D;for(D=0;E===void 0&&D<p;)E=o.c2p(M+D*h),D++;for(D=p;S===void 0&&D>0;)S=o.c2p(M+D*h),D--;for(D=0;F===void 0&&D<_;)F=b.c2p(w+D*L),D++;for(D=_;I===void 0&&D>0;)I=b.c2p(w+D*L),D--;if(S<E&&(P=S,S=E,E=P),I<F&&(P=F,F=I,I=P),!x){var R=.5;E=Math.max(-R*o._length,E),S=Math.min((1+R)*o._length,S),F=Math.max(-R*b._length,F),I=Math.min((1+R)*b._length,I)}var O=Math.round(S-E),z=Math.round(I-F),G=O<=0||z<=0;if(G){var Y=f.selectAll("image").data([]);Y.exit().remove();return}function ee(re){var Z=document.createElement("canvas");Z.width=O,Z.height=z;var Q=Z.getContext("2d",{willReadFrequently:!0}),ie=function(De){return c.constrain(Math.round(o.c2p(M+De*h)-E),0,O)},oe=function(De){return c.constrain(Math.round(b.c2p(w+De*L)-F),0,z)},ne=e.colormodel[l.colormodel],le=ne.colormodel||l.colormodel,_e=ne.fmt,fe;for(D=0;D<m.w;D++){var ye=ie(D),xe=ie(D+1);if(!(xe===ye||isNaN(xe)||isNaN(ye)))for(var me=0;me<m.h;me++){var be=oe(me),ke=oe(me+1);ke===be||isNaN(ke)||isNaN(be)||!re(D,me)||(fe=l._scaler(re(D,me)),fe?Q.fillStyle=le+"("+_e(fe).join(",")+")":Q.fillStyle="rgba(0,0,0,0)",Q.fillRect(ye,be,xe-ye,ke-be))}}return Z}var j=f.selectAll("image").data([d]);j.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),j.exit().remove();var X=l.zsmooth===!1?e.pixelatedStyle:"";if(x){var ae=c.simpleMap(o.range,o.r2l),he=c.simpleMap(b.range,b.r2l),K=ae[1]<ae[0],J=he[1]>he[0];if(K||J){var U=E+O/2,H=F+z/2;X+="transform:"+A(U+"px",H+"px")+"scale("+(K?-1:1)+","+(J?-1:1)+")"+A(-U+"px",-H+"px")+";"}}j.attr("style",X);var q=new Promise(function(re){if(l._hasZ)re();else if(l._hasSource)if(l._canvas&&l._canvas.el.width===p&&l._canvas.el.height===_&&l._canvas.source===l.source)re();else{var Z=document.createElement("canvas");Z.width=p,Z.height=_;var Q=Z.getContext("2d",{willReadFrequently:!0});l._image=l._image||new Image;var ie=l._image;ie.onload=function(){Q.drawImage(ie,0,0),l._canvas={el:Z,source:l.source},re()},ie.setAttribute("src",l.source)}}).then(function(){var re,Z;if(l._hasZ)Z=ee(function(oe,ne){return u[ne][oe]}),re=Z.toDataURL("image/png");else if(l._hasSource)if(x)re=l.source;else{var Q=l._canvas.el.getContext("2d",{willReadFrequently:!0}),ie=Q.getImageData(0,0,p,_).data;Z=ee(function(oe,ne){var le=4*(ne*p+oe);return[ie[le],ie[le+1],ie[le+2],ie[le+3]]}),re=Z.toDataURL("image/png")}j.attr({"xlink:href":re,height:z,width:O,x:E,y:F})});n._promises.push(q)})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(t,N,V){var y=t("@plotly/d3");N.exports=function(A){y.select(A).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(t,N,V){var y=t("../../lib/extend").extendFlat,c=t("../../lib/extend").extendDeep,A=t("../../plot_api/edit_types").overrideAll,T=t("../../plots/font_attributes"),e=t("../../components/color/attributes"),a=t("../../plots/domain").attributes,i=t("../../plots/cartesian/layout_attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../constants/delta.js"),v=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=T({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},b={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},g=n("step",c({},o,{range:b}));N.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:y({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:v("value")},font:y({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:v("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:y({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:c({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:A({range:b,visible:y({},i.visible,{dflt:!0}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:y({},i.ticks,{dflt:"outside"}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,tickfont:T({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:y({},o.line.color,{}),width:y({},o.line.width,{dflt:1}),editType:"plot"},thickness:y({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(t,N,V){var y=t("../../plots/plots");V.name="indicator",V.plot=function(c,A,T,e){y.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){y.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],866:[function(t,N,V){function y(c,A){var T=[],e=A.value;typeof A._lastValue!="number"&&(A._lastValue=A.value);var a=A._lastValue,i=a;return A._hasDelta&&typeof A.delta.reference=="number"&&(i=A.delta.reference),T[0]={y:e,lastY:a,delta:e-i,relativeDelta:(e-i)/i},T}N.exports={calc:y}},{}],867:[function(t,N,V){N.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../../plot_api/plot_template"),e=t("../../plots/array_container_defaults"),a=t("./constants.js"),i=t("../../plots/cartesian/tick_value_defaults"),n=t("../../plots/cartesian/tick_mark_defaults"),r=t("../../plots/cartesian/tick_label_defaults"),v=t("../../plots/cartesian/prefix_suffix_defaults");function s(b,g,d,f){function m(D,R){return y.coerce(b,g,c,D,R)}A(g,f,m),m("mode"),g._hasNumber=g.mode.indexOf("number")!==-1,g._hasDelta=g.mode.indexOf("delta")!==-1,g._hasGauge=g.mode.indexOf("gauge")!==-1;var l=m("value");g._range=[0,typeof l=="number"?1.5*l:1];var x=new Array(2),u;g._hasNumber&&(m("number.valueformat"),m("number.font.color",f.font.color),m("number.font.family",f.font.family),m("number.font.size"),g.number.font.size===void 0&&(g.number.font.size=a.defaultNumberFontSize,x[0]=!0),m("number.prefix"),m("number.suffix"),u=g.number.font.size);var M;g._hasDelta&&(m("delta.font.color",f.font.color),m("delta.font.family",f.font.family),m("delta.font.size"),g.delta.font.size===void 0&&(g.delta.font.size=(g._hasNumber?.5:1)*(u||a.defaultNumberFontSize),x[1]=!0),m("delta.reference",g.value),m("delta.relative"),m("delta.valueformat",g.delta.relative?"2%":""),m("delta.increasing.symbol"),m("delta.increasing.color"),m("delta.decreasing.symbol"),m("delta.decreasing.color"),m("delta.position"),m("delta.prefix"),m("delta.suffix"),M=g.delta.font.size),g._scaleNumbers=(!g._hasNumber||x[0])&&(!g._hasDelta||x[1])||!1,m("title.font.color",f.font.color),m("title.font.family",f.font.family),m("title.font.size",.25*(u||M||a.defaultNumberFontSize)),m("title.text");var w,p,_,h;function L(D,R){return y.coerce(w,p,c.gauge,D,R)}function E(D,R){return y.coerce(_,h,c.gauge.axis,D,R)}if(g._hasGauge){w=b.gauge,w||(w={}),p=T.newContainer(g,"gauge"),L("shape");var S=g._isBullet=g.gauge.shape==="bullet";S||m("title.align","center");var P=g._isAngular=g.gauge.shape==="angular";P||m("align","center"),L("bgcolor",f.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var F=a.valueThickness*(g.gauge.shape==="bullet"?.5:1);L("bar.thickness",F),e(w,p,{name:"steps",handleItemDefaults:o}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),_={},w&&(_=w.axis||{}),h=T.newContainer(p,"axis"),E("visible"),g._range=E("range",g._range);var I={outerTicks:!0};i(_,h,E,"linear"),v(_,h,E,"linear",I),r(_,h,E,"linear",I),n(_,h,E,I)}else m("title.align","center"),m("align","center"),g._isAngular=g._isBullet=!1;g._length=null}function o(b,g){function d(f,m){return y.coerce(b,g,c.gauge.steps,f,m)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}N.exports={supplyDefaults:s}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(t,N,V){N.exports={moduleType:"trace",name:"indicator",basePlotModule:t("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc").calc,plot:t("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(t,N,V){var y=t("@plotly/d3"),c=t("d3-interpolate").interpolate,A=t("d3-interpolate").interpolateNumber,T=t("../../lib"),e=T.strScale,a=T.strTranslate,i=T.rad2deg,n=t("../../constants/alignment").MID_SHIFT,r=t("../../components/drawing"),v=t("./constants"),s=t("../../lib/svg_text_utils"),o=t("../../plots/cartesian/axes"),b=t("../../plots/cartesian/axis_defaults"),g=t("../../plots/cartesian/position_defaults"),d=t("../../plots/cartesian/layout_attributes"),f=t("../../components/color"),m={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},x=/[yzafpnmkMGTPEZY]/;function u(I){return I&&I.duration>0}N.exports=function(D,R,O,z){var G=D._fullLayout,Y;u(O)&&z&&(Y=z()),T.makeTraceGroups(G._indicatorlayer,R,"trace").each(function(ee){var j=ee[0],X=j.trace,ae=y.select(this),he=X._hasGauge,K=X._isAngular,J=X._isBullet,U=X.domain,H={w:G._size.w*(U.x[1]-U.x[0]),h:G._size.h*(U.y[1]-U.y[0]),l:G._size.l+G._size.w*U.x[0],r:G._size.r+G._size.w*(1-U.x[1]),t:G._size.t+G._size.h*(1-U.y[1]),b:G._size.b+G._size.h*U.y[0]},q=H.l+H.w/2,re=H.t+H.h/2,Z=Math.min(H.w/2,H.h),Q=v.innerRadius*Z,ie,oe,ne,le=X.align||"center";if(oe=re,!he)ie=H.l+l[le]*H.w,ne=function(Ae){return E(Ae,H.w,H.h)};else if(K&&(ie=q,oe=re+Z/2,ne=function(Ae){return S(Ae,.9*Q)}),J){var _e=v.bulletPadding,fe=1-v.bulletNumberDomainSize+_e;ie=H.l+(fe+(1-fe)*l[le])*H.w,ne=function(Ae){return E(Ae,(v.bulletNumberDomainSize-_e)*H.w,H.h)}}p(D,ae,ee,{numbersX:ie,numbersY:oe,numbersScaler:ne,transitionOpts:O,onComplete:Y});var ye,xe;he&&(ye={range:X.gauge.axis.range,color:X.gauge.bgcolor,line:{color:X.gauge.bordercolor,width:0},thickness:1},xe={range:X.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:X.gauge.bordercolor,width:X.gauge.borderwidth},thickness:1});var me=ae.selectAll("g.angular").data(K?ee:[]);me.exit().remove();var be=ae.selectAll("g.angularaxis").data(K?ee:[]);be.exit().remove(),K&&w(D,ae,ee,{radius:Z,innerRadius:Q,gauge:me,layer:be,size:H,gaugeBg:ye,gaugeOutline:xe,transitionOpts:O,onComplete:Y});var ke=ae.selectAll("g.bullet").data(J?ee:[]);ke.exit().remove();var De=ae.selectAll("g.bulletaxis").data(J?ee:[]);De.exit().remove(),J&&M(D,ae,ee,{gauge:ke,layer:De,size:H,gaugeBg:ye,gaugeOutline:xe,transitionOpts:O,onComplete:Y});var He=ae.selectAll("text.title").data(ee);He.exit().remove(),He.enter().append("text").classed("title",!0),He.attr("text-anchor",function(){return J?m.right:m[X.title.align]}).text(X.title.text).call(r.font,X.title.font).call(s.convertToTspans,D),He.attr("transform",function(){var Ae=H.l+H.w*l[X.title.align],Le,Ze=v.titlePadding,We=r.bBox(He.node());if(he){if(K)if(X.gauge.axis.visible){var ze=r.bBox(be.node());Le=ze.top-Ze-We.bottom}else Le=H.t+H.h/2-Z/2-We.bottom-Ze;J&&(Le=oe-(We.top+We.bottom)/2,Ae=H.l-v.bulletPadding*H.w)}else Le=X._numbersTop-Ze-We.bottom;return a(Ae,Le)})})};function M(I,D,R,O){var z=R[0].trace,G=O.gauge,Y=O.layer,ee=O.gaugeBg,j=O.gaugeOutline,X=O.size,ae=z.domain,he=O.transitionOpts,K=O.onComplete,J,U,H,q,re;G.enter().append("g").classed("bullet",!0),G.attr("transform",a(X.l,X.t)),Y.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Y.selectAll("g.xbulletaxistick,path,text").remove();var Z=X.h,Q=z.gauge.bar.thickness*Z,ie=ae.x[0],oe=ae.x[0]+(ae.x[1]-ae.x[0])*(z._hasNumber||z._hasDelta?1-v.bulletNumberDomainSize:1);J=L(I,z.gauge.axis),J._id="xbulletaxis",J.domain=[ie,oe],J.setScale(),U=o.calcTicks(J),H=o.makeTransTickFn(J),q=o.getTickSigns(J)[2],re=X.t+X.h,J.visible&&(o.drawTicks(I,J,{vals:J.ticks==="inside"?o.clipEnds(J,U):U,layer:Y,path:o.makeTickPath(J,re,q),transFn:H}),o.drawLabels(I,J,{vals:U,layer:Y,transFn:H,labelFns:o.makeLabelFns(J,re)}));function ne(be){be.attr("width",function(ke){return Math.max(0,J.c2p(ke.range[1])-J.c2p(ke.range[0]))}).attr("x",function(ke){return J.c2p(ke.range[0])}).attr("y",function(ke){return .5*(1-ke.thickness)*Z}).attr("height",function(ke){return ke.thickness*Z})}var le=[ee].concat(z.gauge.steps),_e=G.selectAll("g.bg-bullet").data(le);_e.enter().append("g").classed("bg-bullet",!0).append("rect"),_e.select("rect").call(ne).call(_),_e.exit().remove();var fe=G.selectAll("g.value-bullet").data([z.gauge.bar]);fe.enter().append("g").classed("value-bullet",!0).append("rect"),fe.select("rect").attr("height",Q).attr("y",(Z-Q)/2).call(_),u(he)?fe.select("rect").transition().duration(he.duration).ease(he.easing).each("end",function(){K&&K()}).each("interrupt",function(){K&&K()}).attr("width",Math.max(0,J.c2p(Math.min(z.gauge.axis.range[1],R[0].y)))):fe.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,J.c2p(Math.min(z.gauge.axis.range[1],R[0].y))):0),fe.exit().remove();var ye=R.filter(function(){return z.gauge.threshold.value||z.gauge.threshold.value===0}),xe=G.selectAll("g.threshold-bullet").data(ye);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",J.c2p(z.gauge.threshold.value)).attr("x2",J.c2p(z.gauge.threshold.value)).attr("y1",(1-z.gauge.threshold.thickness)/2*Z).attr("y2",(1-(1-z.gauge.threshold.thickness)/2)*Z).call(f.stroke,z.gauge.threshold.line.color).style("stroke-width",z.gauge.threshold.line.width),xe.exit().remove();var me=G.selectAll("g.gauge-outline").data([j]);me.enter().append("g").classed("gauge-outline",!0).append("rect"),me.select("rect").call(ne).call(_),me.exit().remove()}function w(I,D,R,O){var z=R[0].trace,G=O.size,Y=O.radius,ee=O.innerRadius,j=O.gaugeBg,X=O.gaugeOutline,ae=[G.l+G.w/2,G.t+G.h/2+Y/2],he=O.gauge,K=O.layer,J=O.transitionOpts,U=O.onComplete,H=Math.PI/2;function q(Ie){var Ve=z.gauge.axis.range[0],dt=z.gauge.axis.range[1],Ft=(Ie-Ve)/(dt-Ve)*Math.PI-H;return Ft<-H?-H:Ft>H?H:Ft}function re(Ie){return y.svg.arc().innerRadius((ee+Y)/2-Ie/2*(Y-ee)).outerRadius((ee+Y)/2+Ie/2*(Y-ee)).startAngle(-H)}function Z(Ie){Ie.attr("d",function(Ve){return re(Ve.thickness).startAngle(q(Ve.range[0])).endAngle(q(Ve.range[1]))()})}var Q,ie,oe,ne;he.enter().append("g").classed("angular",!0),he.attr("transform",a(ae[0],ae[1])),K.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),K.selectAll("g.xangularaxistick,path,text").remove(),Q=L(I,z.gauge.axis),Q.type="linear",Q.range=z.gauge.axis.range,Q._id="xangularaxis",Q.ticklabeloverflow="allow",Q.setScale();var le=function(Ie){return(Q.range[0]-Ie.x)/(Q.range[1]-Q.range[0])*Math.PI+Math.PI},_e={},fe=o.makeLabelFns(Q,0),ye=fe.labelStandoff;_e.xFn=function(Ie){var Ve=le(Ie);return Math.cos(Ve)*ye},_e.yFn=function(Ie){var Ve=le(Ie),dt=Math.sin(Ve)>0?.2:1;return-Math.sin(Ve)*(ye+Ie.fontSize*dt)+Math.abs(Math.cos(Ve))*(Ie.fontSize*n)},_e.anchorFn=function(Ie){var Ve=le(Ie),dt=Math.cos(Ve);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},_e.heightFn=function(Ie,Ve,dt){var Ft=le(Ie);return-.5*(1+Math.sin(Ft))*dt};var xe=function(Ie){return a(ae[0]+Y*Math.cos(Ie),ae[1]-Y*Math.sin(Ie))};oe=function(Ie){return xe(le(Ie))};var me=function(Ie){var Ve=le(Ie);return xe(Ve)+"rotate("+-i(Ve)+")"};if(ie=o.calcTicks(Q),ne=o.getTickSigns(Q)[2],Q.visible){ne=Q.ticks==="inside"?-1:1;var be=(Q.linewidth||1)/2;o.drawTicks(I,Q,{vals:ie,layer:K,path:"M"+ne*be+",0h"+ne*Q.ticklen,transFn:me}),o.drawLabels(I,Q,{vals:ie,layer:K,transFn:oe,labelFns:_e})}var ke=[j].concat(z.gauge.steps),De=he.selectAll("g.bg-arc").data(ke);De.enter().append("g").classed("bg-arc",!0).append("path"),De.select("path").call(Z).call(_),De.exit().remove();var He=re(z.gauge.bar.thickness),Ae=he.selectAll("g.value-arc").data([z.gauge.bar]);Ae.enter().append("g").classed("value-arc",!0).append("path");var Le=Ae.select("path");u(J)?(Le.transition().duration(J.duration).ease(J.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()}).attrTween("d",h(He,q(R[0].lastY),q(R[0].y))),z._lastValue=R[0].y):Le.attr("d",typeof R[0].y=="number"?He.endAngle(q(R[0].y)):"M0,0Z"),Le.call(_),Ae.exit().remove(),ke=[];var Ze=z.gauge.threshold.value;(Ze||Ze===0)&&ke.push({range:[Ze,Ze],color:z.gauge.threshold.color,line:{color:z.gauge.threshold.line.color,width:z.gauge.threshold.line.width},thickness:z.gauge.threshold.thickness});var We=he.selectAll("g.threshold-arc").data(ke);We.enter().append("g").classed("threshold-arc",!0).append("path"),We.select("path").call(Z).call(_),We.exit().remove();var ze=he.selectAll("g.gauge-outline").data([X]);ze.enter().append("g").classed("gauge-outline",!0).append("path"),ze.select("path").call(Z).call(_),ze.exit().remove()}function p(I,D,R,O){var z=R[0].trace,G=O.numbersX,Y=O.numbersY,ee=z.align||"center",j=m[ee],X=O.transitionOpts,ae=O.onComplete,he=T.ensureSingle(D,"g","numbers"),K,J,U,H=[];z._hasNumber&&H.push("number"),z._hasDelta&&(H.push("delta"),z.delta.position==="left"&&H.reverse());var q=he.selectAll("text").data(H);q.enter().append("text"),q.attr("text-anchor",function(){return j}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),q.exit().remove();function re(xe,me,be,ke){if(xe.match("s")&&be>=0!=ke>=0&&!me(be).slice(-1).match(x)&&!me(ke).slice(-1).match(x)){var De=xe.slice().replace("s","f").replace(/\d+/,function(Ae){return parseInt(Ae)-1}),He=L(I,{tickformat:De});return function(Ae){return Math.abs(Ae)<1?o.tickText(He,Ae).text:me(Ae)}}else return me}function Z(){var xe=L(I,{tickformat:z.number.valueformat},z._range);xe.setScale(),o.prepTicks(xe);var me=function(Ae){return o.tickText(xe,Ae).text},be=z.number.suffix,ke=z.number.prefix,De=he.select("text.number");function He(){var Ae=typeof R[0].y=="number"?ke+me(R[0].y)+be:"-";De.text(Ae).call(r.font,z.number.font).call(s.convertToTspans,I)}return u(X)?De.transition().duration(X.duration).ease(X.easing).each("end",function(){He(),ae&&ae()}).each("interrupt",function(){He(),ae&&ae()}).attrTween("text",function(){var Ae=y.select(this),Le=A(R[0].lastY,R[0].y);z._lastValue=R[0].y;var Ze=re(z.number.valueformat,me,R[0].lastY,R[0].y);return function(We){Ae.text(ke+Ze(Le(We))+be)}}):He(),K=P(ke+me(R[0].y)+be,z.number.font,j,I),De}function Q(){var xe=L(I,{tickformat:z.delta.valueformat},z._range);xe.setScale(),o.prepTicks(xe);var me=function(We){return o.tickText(xe,We).text},be=z.delta.suffix,ke=z.delta.prefix,De=function(We){var ze=z.delta.relative?We.relativeDelta:We.delta;return ze},He=function(We,ze){return We===0||typeof We!="number"||isNaN(We)?"-":(We>0?z.delta.increasing.symbol:z.delta.decreasing.symbol)+ke+ze(We)+be},Ae=function(We){return We.delta>=0?z.delta.increasing.color:z.delta.decreasing.color};z._deltaLastValue===void 0&&(z._deltaLastValue=De(R[0]));var Le=he.select("text.delta");Le.call(r.font,z.delta.font).call(f.fill,Ae({delta:z._deltaLastValue}));function Ze(){Le.text(He(De(R[0]),me)).call(f.fill,Ae(R[0])).call(s.convertToTspans,I)}return u(X)?Le.transition().duration(X.duration).ease(X.easing).tween("text",function(){var We=y.select(this),ze=De(R[0]),Ie=z._deltaLastValue,Ve=re(z.delta.valueformat,me,Ie,ze),dt=A(Ie,ze);return z._deltaLastValue=ze,function(Ft){We.text(He(dt(Ft),Ve)),We.call(f.fill,Ae({delta:dt(Ft)}))}}).each("end",function(){Ze(),ae&&ae()}).each("interrupt",function(){Ze(),ae&&ae()}):Ze(),J=P(He(De(R[0]),me),z.delta.font,j,I),Le}var ie=z.mode+z.align,oe;if(z._hasDelta&&(oe=Q(),ie+=z.delta.position+z.delta.font.size+z.delta.font.family+z.delta.valueformat,ie+=z.delta.increasing.symbol+z.delta.decreasing.symbol,U=J),z._hasNumber&&(Z(),ie+=z.number.font.size+z.number.font.family+z.number.valueformat+z.number.suffix+z.number.prefix,U=K),z._hasDelta&&z._hasNumber){var ne=[(K.left+K.right)/2,(K.top+K.bottom)/2],le=[(J.left+J.right)/2,(J.top+J.bottom)/2],_e,fe,ye=.75*z.delta.font.size;z.delta.position==="left"&&(_e=F(z,"deltaPos",0,-1*(K.width*l[z.align]+J.width*(1-l[z.align])+ye),ie,Math.min),fe=ne[1]-le[1],U={width:K.width+J.width+ye,height:Math.max(K.height,J.height),left:J.left+_e,right:K.right,top:Math.min(K.top,J.top+fe),bottom:Math.max(K.bottom,J.bottom+fe)}),z.delta.position==="right"&&(_e=F(z,"deltaPos",0,K.width*(1-l[z.align])+J.width*l[z.align]+ye,ie,Math.max),fe=ne[1]-le[1],U={width:K.width+J.width+ye,height:Math.max(K.height,J.height),left:K.left,right:J.right+_e,top:Math.min(K.top,J.top+fe),bottom:Math.max(K.bottom,J.bottom+fe)}),z.delta.position==="bottom"&&(_e=null,fe=J.height,U={width:Math.max(K.width,J.width),height:K.height+J.height,left:Math.min(K.left,J.left),right:Math.max(K.right,J.right),top:K.bottom-K.height,bottom:K.bottom+J.height}),z.delta.position==="top"&&(_e=null,fe=K.top,U={width:Math.max(K.width,J.width),height:K.height+J.height,left:Math.min(K.left,J.left),right:Math.max(K.right,J.right),top:K.bottom-K.height-J.height,bottom:K.bottom}),oe.attr({dx:_e,dy:fe})}(z._hasNumber||z._hasDelta)&&he.attr("transform",function(){var xe=O.numbersScaler(U);ie+=xe[2];var me=F(z,"numbersScale",1,xe[0],ie,Math.min),be;z._scaleNumbers||(me=1),z._isAngular?be=Y-me*U.bottom:be=Y-me*(U.top+U.bottom)/2,z._numbersTop=me*U.top+be;var ke=U[ee];ee==="center"&&(ke=(U.left+U.right)/2);var De=G-me*ke;return De=F(z,"numbersTranslate",0,De,ie,Math.max),a(De,be)+e(me)})}function _(I){I.each(function(D){f.stroke(y.select(this),D.line.color)}).each(function(D){f.fill(y.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function h(I,D,R){return function(){var O=c(D,R);return function(z){return I.endAngle(O(z))()}}}function L(I,D,R){var O=I._fullLayout,z=T.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),G={type:"linear",_id:"x"+D._id},Y={letter:"x",font:O.font,noHover:!0,noTickson:!0};function ee(j,X){return T.coerce(z,G,d,j,X)}return b(z,G,ee,Y,O),g(z,G,ee,Y),G}function E(I,D,R){var O=Math.min(D/I.width,R/I.height);return[O,I,D+"x"+R]}function S(I,D){var R=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),O=D/R;return[O,I,D]}function P(I,D,R,O){var z=document.createElementNS("http://www.w3.org/2000/svg","text"),G=y.select(z);return G.text(I).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",I).call(s.convertToTspans,O).call(r.font,D),r.bBox(G.node())}function F(I,D,R,O,z,G){var Y="_cache"+D;I[Y]&&I[Y].key===z||(I[Y]={key:z,value:R});var ee=T.aggNums(G,null,[I[Y].value,O],2);return I[Y].value=ee,ee}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(t,N,V){var y=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll;function n(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var v=N.exports=i(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n(),y:n(),z:n()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:A(),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),valuehoverformat:c("value",1),showlegend:a({},e.showlegend,{dflt:!1})},y("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:a({},e.hoverinfo)}),"calc","nested");v.flatshading.dflt=!0,v.lighting.facenormalsepsilon.dflt=0,v.x.editType=v.y.editType=v.z.editType=v.value.editType="calc+clearAxisTypes",v.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(t,N,V){var y=t("../../components/colorscale/calc"),c=t("../streamtube/calc").processGrid,A=t("../streamtube/calc").filter;N.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=A(a.x,a._len),a._y=A(a.y,a._len),a._z=A(a.z,a._len),a._value=A(a.value,a._len);var i=c(a);a._gridFill=i.fill,a._Xs=i.Xs,a._Ys=i.Ys,a._Zs=i.Zs,a._len=i.len;for(var n=1/0,r=-1/0,v=0;v<a._len;v++){var s=a._value[v];n=Math.min(n,s),r=Math.max(r,s)}a._minValues=n,a._maxValues=r,a._vMin=a.isomin===void 0||a.isomin===null?n:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?r:a.isomax,y(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(t,N,V){var y=t("../../../stackgl_modules").gl_mesh3d,c=t("../../lib/gl_format_color").parseColorScale,A=t("../../lib/str2rgbarray"),T=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),a=function(o,b){for(var g=b.length-1;g>0;g--){var d=Math.min(b[g],b[g-1]),f=Math.max(b[g],b[g-1]);if(f>d&&d<o&&o<=f)return{id:g,distRatio:(f-o)/(f-d)}}return{id:0,distRatio:0}};function i(o,b,g){this.scene=o,this.uid=g,this.mesh=b,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(o){if(o.object===this.mesh){var b=o.data.index,g=this.data._meshX[b],d=this.data._meshY[b],f=this.data._meshZ[b],m=this.data._Ys.length,l=this.data._Zs.length,x=a(g,this.data._Xs).id,u=a(d,this.data._Ys).id,M=a(f,this.data._Zs).id,w=o.index=M+l*u+l*m*x;o.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[w]!==void 0?o.textLabel=p[w]:p&&(o.textLabel=p),!0}},n.update=function(o){var b=this.scene,g=b.fullSceneLayout;this.data=v(o);function d(u,M,w,p){return M.map(function(_){return u.d2l(_,0,p)*w})}var f=e(d(g.xaxis,o._meshX,b.dataScale[0],o.xcalendar),d(g.yaxis,o._meshY,b.dataScale[1],o.ycalendar),d(g.zaxis,o._meshZ,b.dataScale[2],o.zcalendar)),m=e(o._meshI,o._meshJ,o._meshK),l={positions:f,cells:m,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:A(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},x=T(o);l.vertexIntensity=o._meshIntensity,l.vertexIntensityBounds=[x.min,x.max],l.colormap=c(o),this.mesh.update(l)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(o){o._meshI=[],o._meshJ=[],o._meshK=[];var b=o.surface.show,g=o.spaceframe.show,d=o.surface.fill,f=o.spaceframe.fill,m=!1,l=!1,x=0,u,M,w=o._Xs,p=o._Ys,_=o._Zs,h=w.length,L=p.length,E=_.length,S=r.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Nt,Lt,Xe){switch(S){case 5:return Xe+E*Lt+E*L*Nt;case 4:return Xe+E*Nt+E*h*Lt;case 3:return Lt+L*Xe+L*E*Nt;case 2:return Lt+L*Nt+L*h*Xe;case 1:return Nt+h*Xe+h*E*Lt;default:return Nt+h*Lt+h*L*Xe}},F=o._minValues,I=o._maxValues,D=o._vMin,R=o._vMax,O,z,G,Y;function ee(Nt,Lt,Xe){for(var it=Y.length,Ye=M;Ye<it;Ye++)if(Nt===O[Ye]&&Lt===z[Ye]&&Xe===G[Ye])return Ye;return-1}function j(){M=u}function X(){O=[],z=[],G=[],Y=[],u=0,j()}function ae(Nt,Lt,Xe,it){return O.push(Nt),z.push(Lt),G.push(Xe),Y.push(it),u++,u-1}function he(Nt,Lt,Xe){return o._meshI.push(Nt),o._meshJ.push(Lt),o._meshK.push(Xe),x++,x-1}function K(Nt,Lt,Xe){for(var it=[],Ye=0;Ye<Nt.length;Ye++)it[Ye]=(Nt[Ye]+Lt[Ye]+Xe[Ye])/3;return it}function J(Nt,Lt,Xe){for(var it=[],Ye=0;Ye<Nt.length;Ye++)it[Ye]=Nt[Ye]*(1-Xe)+Xe*Lt[Ye];return it}var U;function H(Nt){U=Nt}function q(Nt,Lt){var Xe=Nt[0],it=Nt[1],Ye=Nt[2],Ee=K(Xe,it,Ye),Ge=Math.sqrt(1-U),Ke=J(Ee,Xe,Ge),qe=J(Ee,it,Ge),At=J(Ee,Ye,Ge),mt=Lt[0],Mt=Lt[1],Gt=Lt[2];return{xyzv:[[Xe,it,qe],[qe,Ke,Xe],[it,Ye,At],[At,qe,it],[Ye,Xe,Ke],[Ke,At,Ye]],abc:[[mt,Mt,-1],[-1,-1,mt],[Mt,Gt,-1],[-1,-1,Mt],[Gt,mt,-1],[-1,-1,Gt]]}}function re(Nt,Lt){return Nt==="all"||Nt===null?!0:Nt.indexOf(Lt)>-1}function Z(Nt,Lt){return Nt===null?Lt:Nt}function Q(Nt,Lt,Xe){j();var it=[Lt],Ye=[Xe];if(U>=1)it=[Lt],Ye=[Xe];else if(U>0){var Ee=q(Lt,Xe);it=Ee.xyzv,Ye=Ee.abc}for(var Ge=0;Ge<it.length;Ge++){Lt=it[Ge],Xe=Ye[Ge];for(var Ke=[],qe=0;qe<3;qe++){var At=Lt[qe][0],mt=Lt[qe][1],Mt=Lt[qe][2],Gt=Lt[qe][3],zt=Xe[qe]>-1?Xe[qe]:ee(At,mt,Mt);zt>-1?Ke[qe]=zt:Ke[qe]=ae(At,mt,Mt,Z(Nt,Gt))}he(Ke[0],Ke[1],Ke[2])}}function ie(Nt,Lt,Xe){var it=function(Ye,Ee,Ge){Q(Nt,[Lt[Ye],Lt[Ee],Lt[Ge]],[Xe[Ye],Xe[Ee],Xe[Ge]])};it(0,1,2),it(2,3,0)}function oe(Nt,Lt,Xe){var it=function(Ye,Ee,Ge){Q(Nt,[Lt[Ye],Lt[Ee],Lt[Ge]],[Xe[Ye],Xe[Ee],Xe[Ge]])};it(0,1,2),it(3,0,1),it(2,3,0),it(1,2,3)}function ne(Nt,Lt,Xe,it){var Ye=Nt[3];Ye<Xe&&(Ye=Xe),Ye>it&&(Ye=it);for(var Ee=(Nt[3]-Ye)/(Nt[3]-Lt[3]+1e-9),Ge=[],Ke=0;Ke<4;Ke++)Ge[Ke]=(1-Ee)*Nt[Ke]+Ee*Lt[Ke];return Ge}function le(Nt,Lt,Xe){return Nt>=Lt&&Nt<=Xe}function _e(Nt){var Lt=.001*(R-D);return Nt>=D-Lt&&Nt<=R+Lt}function fe(Nt){for(var Lt=[],Xe=0;Xe<4;Xe++){var it=Nt[Xe];Lt.push([o._x[it],o._y[it],o._z[it],o._value[it]])}return Lt}var ye=3;function xe(Nt,Lt,Xe,it,Ye,Ee){Ee||(Ee=1),Xe=[-1,-1,-1];var Ge=!1,Ke=[le(Lt[0][3],it,Ye),le(Lt[1][3],it,Ye),le(Lt[2][3],it,Ye)];if(!Ke[0]&&!Ke[1]&&!Ke[2])return!1;var qe=function(mt,Mt,Gt){return _e(Mt[0][3])&&_e(Mt[1][3])&&_e(Mt[2][3])?(Q(mt,Mt,Gt),!0):Ee<ye?xe(mt,Mt,Gt,D,R,++Ee):!1};if(Ke[0]&&Ke[1]&&Ke[2])return qe(Nt,Lt,Xe)||Ge;var At=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(mt){if(Ke[mt[0]]&&Ke[mt[1]]&&!Ke[mt[2]]){var Mt=Lt[mt[0]],Gt=Lt[mt[1]],zt=Lt[mt[2]],Ht=ne(zt,Mt,it,Ye),Zt=ne(zt,Gt,it,Ye);Ge=qe(Nt,[Zt,Ht,Mt],[-1,-1,Xe[mt[0]]])||Ge,Ge=qe(Nt,[Mt,Gt,Zt],[Xe[mt[0]],Xe[mt[1]],-1])||Ge,At=!0}}),At||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(mt){if(Ke[mt[0]]&&!Ke[mt[1]]&&!Ke[mt[2]]){var Mt=Lt[mt[0]],Gt=Lt[mt[1]],zt=Lt[mt[2]],Ht=ne(Gt,Mt,it,Ye),Zt=ne(zt,Mt,it,Ye);Ge=qe(Nt,[Zt,Ht,Mt],[-1,-1,Xe[mt[0]]])||Ge,At=!0}}),Ge}function me(Nt,Lt,Xe,it){var Ye=!1,Ee=fe(Lt),Ge=[le(Ee[0][3],Xe,it),le(Ee[1][3],Xe,it),le(Ee[2][3],Xe,it),le(Ee[3][3],Xe,it)];if(!Ge[0]&&!Ge[1]&&!Ge[2]&&!Ge[3])return Ye;if(Ge[0]&&Ge[1]&&Ge[2]&&Ge[3])return l&&(Ye=oe(Nt,Ee,Lt)||Ye),Ye;var Ke=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(qe){if(Ge[qe[0]]&&Ge[qe[1]]&&Ge[qe[2]]&&!Ge[qe[3]]){var At=Ee[qe[0]],mt=Ee[qe[1]],Mt=Ee[qe[2]],Gt=Ee[qe[3]];if(l)Ye=Q(Nt,[At,mt,Mt],[Lt[qe[0]],Lt[qe[1]],Lt[qe[2]]])||Ye;else{var zt=ne(Gt,At,Xe,it),Ht=ne(Gt,mt,Xe,it),Zt=ne(Gt,Mt,Xe,it);Ye=Q(null,[zt,Ht,Zt],[-1,-1,-1])||Ye}Ke=!0}}),Ke||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(qe){if(Ge[qe[0]]&&Ge[qe[1]]&&!Ge[qe[2]]&&!Ge[qe[3]]){var At=Ee[qe[0]],mt=Ee[qe[1]],Mt=Ee[qe[2]],Gt=Ee[qe[3]],zt=ne(Mt,At,Xe,it),Ht=ne(Mt,mt,Xe,it),Zt=ne(Gt,mt,Xe,it),Wt=ne(Gt,At,Xe,it);l?(Ye=Q(Nt,[At,Wt,zt],[Lt[qe[0]],-1,-1])||Ye,Ye=Q(Nt,[mt,Ht,Zt],[Lt[qe[1]],-1,-1])||Ye):Ye=ie(null,[zt,Ht,Zt,Wt],[-1,-1,-1,-1])||Ye,Ke=!0}}),Ke)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(qe){if(Ge[qe[0]]&&!Ge[qe[1]]&&!Ge[qe[2]]&&!Ge[qe[3]]){var At=Ee[qe[0]],mt=Ee[qe[1]],Mt=Ee[qe[2]],Gt=Ee[qe[3]],zt=ne(mt,At,Xe,it),Ht=ne(Mt,At,Xe,it),Zt=ne(Gt,At,Xe,it);l?(Ye=Q(Nt,[At,zt,Ht],[Lt[qe[0]],-1,-1])||Ye,Ye=Q(Nt,[At,Ht,Zt],[Lt[qe[0]],-1,-1])||Ye,Ye=Q(Nt,[At,Zt,zt],[Lt[qe[0]],-1,-1])||Ye):Ye=Q(null,[zt,Ht,Zt],[-1,-1,-1])||Ye,Ke=!0}}),Ye}function be(Nt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe,At,mt){var Mt=!1;return m&&(re(Nt,"A")&&(Mt=me(null,[Lt,Xe,it,Ee],At,mt)||Mt),re(Nt,"B")&&(Mt=me(null,[Xe,it,Ye,qe],At,mt)||Mt),re(Nt,"C")&&(Mt=me(null,[Xe,Ee,Ge,qe],At,mt)||Mt),re(Nt,"D")&&(Mt=me(null,[it,Ee,Ke,qe],At,mt)||Mt),re(Nt,"E")&&(Mt=me(null,[Xe,it,Ee,qe],At,mt)||Mt)),l&&(Mt=me(Nt,[Xe,it,Ee,qe],At,mt)||Mt),Mt}function ke(Nt,Lt,Xe,it,Ye,Ee,Ge,Ke){return[Ke[0]===!0?!0:xe(Nt,fe([Lt,Xe,it]),[Lt,Xe,it],Ee,Ge),Ke[1]===!0?!0:xe(Nt,fe([it,Ye,Lt]),[it,Ye,Lt],Ee,Ge)]}function De(Nt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe){return Ke?ke(Nt,Lt,Xe,Ye,it,Ee,Ge,qe):ke(Nt,Xe,Ye,it,Lt,Ee,Ge,qe)}function He(Nt,Lt,Xe,it,Ye,Ee,Ge){var Ke=!1,qe,At,mt,Mt,Gt=function(){Ke=xe(Nt,[qe,At,mt],[-1,-1,-1],Ye,Ee)||Ke,Ke=xe(Nt,[mt,Mt,qe],[-1,-1,-1],Ye,Ee)||Ke},zt=Ge[0],Ht=Ge[1],Zt=Ge[2];return zt&&(qe=J(fe([P(Lt,Xe-0,it-0)])[0],fe([P(Lt-1,Xe-0,it-0)])[0],zt),At=J(fe([P(Lt,Xe-0,it-1)])[0],fe([P(Lt-1,Xe-0,it-1)])[0],zt),mt=J(fe([P(Lt,Xe-1,it-1)])[0],fe([P(Lt-1,Xe-1,it-1)])[0],zt),Mt=J(fe([P(Lt,Xe-1,it-0)])[0],fe([P(Lt-1,Xe-1,it-0)])[0],zt),Gt()),Ht&&(qe=J(fe([P(Lt-0,Xe,it-0)])[0],fe([P(Lt-0,Xe-1,it-0)])[0],Ht),At=J(fe([P(Lt-0,Xe,it-1)])[0],fe([P(Lt-0,Xe-1,it-1)])[0],Ht),mt=J(fe([P(Lt-1,Xe,it-1)])[0],fe([P(Lt-1,Xe-1,it-1)])[0],Ht),Mt=J(fe([P(Lt-1,Xe,it-0)])[0],fe([P(Lt-1,Xe-1,it-0)])[0],Ht),Gt()),Zt&&(qe=J(fe([P(Lt-0,Xe-0,it)])[0],fe([P(Lt-0,Xe-0,it-1)])[0],Zt),At=J(fe([P(Lt-0,Xe-1,it)])[0],fe([P(Lt-0,Xe-1,it-1)])[0],Zt),mt=J(fe([P(Lt-1,Xe-1,it)])[0],fe([P(Lt-1,Xe-1,it-1)])[0],Zt),Mt=J(fe([P(Lt-1,Xe-0,it)])[0],fe([P(Lt-1,Xe-0,it-1)])[0],Zt),Gt()),Ke}function Ae(Nt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe,At,mt,Mt){var Gt=Nt;return Mt?(m&&Nt==="even"&&(Gt=null),be(Gt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe,At,mt)):(m&&Nt==="odd"&&(Gt=null),be(Gt,qe,Ke,Ge,Ee,Ye,it,Xe,Lt,At,mt))}function Le(Nt,Lt,Xe,it,Ye){for(var Ee=[],Ge=0,Ke=0;Ke<Lt.length;Ke++)for(var qe=Lt[Ke],At=1;At<E;At++)for(var mt=1;mt<L;mt++)Ee.push(De(Nt,P(qe,mt-1,At-1),P(qe,mt-1,At),P(qe,mt,At-1),P(qe,mt,At),Xe,it,(qe+mt+At)%2,Ye&&Ye[Ge]?Ye[Ge]:[])),Ge++;return Ee}function Ze(Nt,Lt,Xe,it,Ye){for(var Ee=[],Ge=0,Ke=0;Ke<Lt.length;Ke++)for(var qe=Lt[Ke],At=1;At<h;At++)for(var mt=1;mt<E;mt++)Ee.push(De(Nt,P(At-1,qe,mt-1),P(At,qe,mt-1),P(At-1,qe,mt),P(At,qe,mt),Xe,it,(At+qe+mt)%2,Ye&&Ye[Ge]?Ye[Ge]:[])),Ge++;return Ee}function We(Nt,Lt,Xe,it,Ye){for(var Ee=[],Ge=0,Ke=0;Ke<Lt.length;Ke++)for(var qe=Lt[Ke],At=1;At<L;At++)for(var mt=1;mt<h;mt++)Ee.push(De(Nt,P(mt-1,At-1,qe),P(mt-1,At,qe),P(mt,At-1,qe),P(mt,At,qe),Xe,it,(mt+At+qe)%2,Ye&&Ye[Ge]?Ye[Ge]:[])),Ge++;return Ee}function ze(Nt,Lt,Xe){for(var it=1;it<E;it++)for(var Ye=1;Ye<L;Ye++)for(var Ee=1;Ee<h;Ee++)Ae(Nt,P(Ee-1,Ye-1,it-1),P(Ee-1,Ye-1,it),P(Ee-1,Ye,it-1),P(Ee-1,Ye,it),P(Ee,Ye-1,it-1),P(Ee,Ye-1,it),P(Ee,Ye,it-1),P(Ee,Ye,it),Lt,Xe,(Ee+Ye+it)%2)}function Ie(Nt,Lt,Xe){l=!0,ze(Nt,Lt,Xe),l=!1}function Ve(Nt,Lt,Xe){m=!0,ze(Nt,Lt,Xe),m=!1}function dt(Nt,Lt,Xe,it,Ye,Ee){for(var Ge=[],Ke=0,qe=0;qe<Lt.length;qe++)for(var At=Lt[qe],mt=1;mt<E;mt++)for(var Mt=1;Mt<L;Mt++)Ge.push(He(Nt,At,Mt,mt,Xe,it,Ye[qe],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return Ge}function Ft(Nt,Lt,Xe,it,Ye,Ee){for(var Ge=[],Ke=0,qe=0;qe<Lt.length;qe++)for(var At=Lt[qe],mt=1;mt<h;mt++)for(var Mt=1;Mt<E;Mt++)Ge.push(He(Nt,mt,At,Mt,Xe,it,Ye[qe],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return Ge}function Qt(Nt,Lt,Xe,it,Ye,Ee){for(var Ge=[],Ke=0,qe=0;qe<Lt.length;qe++)for(var At=Lt[qe],mt=1;mt<L;mt++)for(var Mt=1;Mt<h;Mt++)Ge.push(He(Nt,Mt,mt,At,Xe,it,Ye[qe],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return Ge}function Ot(Nt,Lt){for(var Xe=[],it=Nt;it<Lt;it++)Xe.push(it);return Xe}function Ct(){for(var Nt=0;Nt<h;Nt++)for(var Lt=0;Lt<L;Lt++)for(var Xe=0;Xe<E;Xe++){var it=P(Nt,Lt,Xe);ae(o._x[it],o._y[it],o._z[it],o._value[it])}}function jt(){X(),Ct();var Nt=null;if(g&&f&&(H(f),Ie(Nt,D,R)),b&&d){H(d);for(var Lt=o.surface.pattern,Xe=o.surface.count,it=0;it<Xe;it++){var Ye=Xe===1?.5:it/(Xe-1),Ee=(1-Ye)*D+Ye*R,Ge=Math.abs(Ee-F),Ke=Math.abs(Ee-I),qe=Ge>Ke?[F,Ee]:[Ee,I];Ve(Lt,qe[0],qe[1])}}var At=[[Math.min(D,I),Math.max(D,I)],[Math.min(F,R),Math.max(F,R)]];["x","y","z"].forEach(function(mt){for(var Mt=[],Gt=0;Gt<At.length;Gt++){var zt=0,Ht=At[Gt][0],Zt=At[Gt][1],Wt=o.slices[mt];if(Wt.show&&Wt.fill){H(Wt.fill);var sr=[],Gr=[],cn=[];if(Wt.locations.length)for(var qr=0;qr<Wt.locations.length;qr++){var st=a(Wt.locations[qr],mt==="x"?w:mt==="y"?p:_);st.distRatio===0?sr.push(st.id):st.id>0&&(Gr.push(st.id),mt==="x"?cn.push([st.distRatio,0,0]):mt==="y"?cn.push([0,st.distRatio,0]):cn.push([0,0,st.distRatio]))}else mt==="x"?sr=Ot(1,h-1):mt==="y"?sr=Ot(1,L-1):sr=Ot(1,E-1);Gr.length>0&&(mt==="x"?Mt[zt]=dt(Nt,Gr,Ht,Zt,cn,Mt[zt]):mt==="y"?Mt[zt]=Ft(Nt,Gr,Ht,Zt,cn,Mt[zt]):Mt[zt]=Qt(Nt,Gr,Ht,Zt,cn,Mt[zt]),zt++),sr.length>0&&(mt==="x"?Mt[zt]=Le(Nt,sr,Ht,Zt,Mt[zt]):mt==="y"?Mt[zt]=Ze(Nt,sr,Ht,Zt,Mt[zt]):Mt[zt]=We(Nt,sr,Ht,Zt,Mt[zt]),zt++)}var rr=o.caps[mt];rr.show&&rr.fill&&(H(rr.fill),mt==="x"?Mt[zt]=Le(Nt,[0,h-1],Ht,Zt,Mt[zt]):mt==="y"?Mt[zt]=Ze(Nt,[0,L-1],Ht,Zt,Mt[zt]):Mt[zt]=We(Nt,[0,E-1],Ht,Zt,Mt[zt]),zt++)}}),x===0&&X(),o._meshX=O,o._meshY=z,o._meshZ=G,o._meshIntensity=Y,o._Xs=w,o._Ys=p,o._Zs=_}return jt(),o}function s(o,b){var g=o.glplot.gl,d=y({gl:g}),f=new i(o,d,b.uid);return d._trace=f,f.update(b),o.glplot.add(d),f}N.exports={findNearestOnAxis:a,generateIsoMeshes:v,createIsosurfaceTrace:s}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(t,N,V){var y=t("../../lib"),c=t("../../registry"),A=t("./attributes"),T=t("../../components/colorscale/defaults");function e(i,n,r,v){function s(o,b){return y.coerce(i,n,A,o,b)}a(i,n,r,v,s)}function a(i,n,r,v,s){var o=s("isomin"),b=s("isomax");b!=null&&o!==void 0&&o!==null&&o>b&&(n.isomin=null,n.isomax=null);var g=s("x"),d=s("y"),f=s("z"),m=s("value");if(!g||!g.length||!d||!d.length||!f||!f.length||!m||!m.length){n.visible=!1;return}var l=c.getComponentMethod("calendars","handleTraceDefaults");l(i,n,["x","y","z"],v),s("valuehoverformat"),["x","y","z"].forEach(function(w){s(w+"hoverformat");var p="caps."+w,_=s(p+".show");_&&s(p+".fill");var h="slices."+w,L=s(h+".show");L&&(s(h+".fill"),s(h+".locations"))});var x=s("spaceframe.show");x&&s("spaceframe.fill");var u=s("surface.show");u&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var M=s("contour.show");M&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){s(w)}),T(i,n,v,s,{prefix:"",cLetter:"c"}),n._length=null}N.exports={supplyDefaults:e,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(t,N,V){var y=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../surface/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat;N.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:A({editType:"calc"}),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},y("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:a({},T.lightposition.x,{dflt:1e5}),y:a({},T.lightposition.y,{dflt:1e5}),z:a({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"}),showlegend:a({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(t,N,V){var y=t("../../components/colorscale/calc");N.exports=function(A,T){T.intensity&&y(A,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(t,N,V){var y=t("../../../stackgl_modules").gl_mesh3d,c=t("../../../stackgl_modules").delaunay_triangulate,A=t("../../../stackgl_modules").alpha_shape,T=t("../../../stackgl_modules").convex_hull,e=t("../../lib/gl_format_color").parseColorScale,a=t("../../lib/str2rgbarray"),i=t("../../components/colorscale").extractOpts,n=t("../../plots/gl3d/zip3");function r(m,l,x){this.scene=m,this.uid=x,this.mesh=l,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var v=r.prototype;v.handlePick=function(m){if(m.object===this.mesh){var l=m.index=m.data.index;m.data._cellCenter?m.traceCoordinate=m.data.dataCoordinate:m.traceCoordinate=[this.data.x[l],this.data.y[l],this.data.z[l]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[l]!==void 0?m.textLabel=x[l]:x&&(m.textLabel=x),!0}};function s(m){for(var l=[],x=m.length,u=0;u<x;u++)l[u]=a(m[u]);return l}function o(m,l,x,u){for(var M=[],w=l.length,p=0;p<w;p++)M[p]=m.d2l(l[p],0,u)*x;return M}function b(m){for(var l=[],x=m.length,u=0;u<x;u++)l[u]=Math.round(m[u]);return l}function g(m,l){for(var x=["x","y","z"].indexOf(m),u=[],M=l.length,w=0;w<M;w++)u[w]=[l[w][(x+1)%3],l[w][(x+2)%3]];return c(u)}function d(m,l){for(var x=m.length,u=0;u<x;u++)if(m[u]<=-.5||m[u]>=l-.5)return!1;return!0}v.update=function(m){var l=this.scene,x=l.fullSceneLayout;this.data=m;var u=m.x.length,M=n(o(x.xaxis,m.x,l.dataScale[0],m.xcalendar),o(x.yaxis,m.y,l.dataScale[1],m.ycalendar),o(x.zaxis,m.z,l.dataScale[2],m.zcalendar)),w;if(m.i&&m.j&&m.k){if(m.i.length!==m.j.length||m.j.length!==m.k.length||!d(m.i,u)||!d(m.j,u)||!d(m.k,u))return;w=n(b(m.i),b(m.j),b(m.k))}else m.alphahull===0?w=T(M):m.alphahull>0?w=A(m.alphahull,M):w=g(m.delaunayaxis,M);var p={positions:M,cells:w,lightPosition:[m.lightposition.x,m.lightposition.y,m.lightposition.z],ambient:m.lighting.ambient,diffuse:m.lighting.diffuse,specular:m.lighting.specular,roughness:m.lighting.roughness,fresnel:m.lighting.fresnel,vertexNormalsEpsilon:m.lighting.vertexnormalsepsilon,faceNormalsEpsilon:m.lighting.facenormalsepsilon,opacity:m.opacity,contourEnable:m.contour.show,contourColor:a(m.contour.color).slice(0,3),contourWidth:m.contour.width,useFacetNormals:m.flatshading};if(m.intensity){var _=i(m);this.color="#fff";var h=m.intensitymode;p[h+"Intensity"]=m.intensity,p[h+"IntensityBounds"]=[_.min,_.max],p.colormap=e(m)}else m.vertexcolor?(this.color=m.vertexcolor[0],p.vertexColors=s(m.vertexcolor)):m.facecolor?(this.color=m.facecolor[0],p.cellColors=s(m.facecolor)):(this.color=m.color,p.meshColor=a(m.color));this.mesh.update(p)},v.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(m,l){var x=m.glplot.gl,u=y({gl:x}),M=new r(m,u,l.uid);return u._trace=M,M.update(l),m.glplot.add(u),M}N.exports=f},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("../../components/colorscale/defaults"),T=t("./attributes");N.exports=function(a,i,n,r){function v(d,f){return c.coerce(a,i,T,d,f)}function s(d){var f=d.map(function(m){var l=v(m);return l&&c.isArrayOrTypedArray(l)?l:null});return f.every(function(m){return m&&m.length===f[0].length})&&f}var o=s(["x","y","z"]);if(!o){i.visible=!1;return}if(s(["i","j","k"]),i.i&&(!i.j||!i.k)||i.j&&(!i.k||!i.i)||i.k&&(!i.i||!i.j)){i.visible=!1;return}var b=y.getComponentMethod("calendars","handleTraceDefaults");b(a,i,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(d){v(d)});var g=v("contour.show");g&&(v("contour.color"),v("contour.width")),"intensity"in a?(v("intensity"),v("intensitymode"),A(a,i,r,v,{prefix:"",cLetter:"c"})):(i.showscale=!1,"facecolor"in a?v("facecolor"):"vertexcolor"in a?v("vertexcolor"):v("color",n)),v("text"),v("hovertext"),v("hovertemplate"),v("xhoverformat"),v("yhoverformat"),v("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(t,N,V){var y=t("../../lib").extendFlat,c=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../components/drawing/attributes").dash,e=t("../../components/fx/attributes"),a=t("../../constants/delta.js"),i=a.INCREASING.COLOR,n=a.DECREASING.COLOR,r=c.line;function v(s){return{line:{color:y({},r.color,{dflt:s}),width:r.width,dash:T,editType:"style"},editType:"style"}}N.exports={xperiod:c.xperiod,xperiod0:c.xperiod0,xperiodalignment:c.xperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:y({},r.width,{}),dash:y({},T,{}),editType:"style"},increasing:v(i),decreasing:v(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:y({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(t,N,V){var y=t("../../lib"),c=y._,A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM;function a(v,s){var o=A.getFromId(v,s.xaxis),b=A.getFromId(v,s.yaxis),g=r(v,o,s),d=s._minDiff;s._minDiff=null;var f=s._origX;s._origX=null;var m=s._xcalc;s._xcalc=null;var l=n(v,s,f,m,b,i);return s._extremes[o._id]=A.findExtremes(o,m,{vpad:d/2}),l.length?(y.extendFlat(l[0].t,{wHover:d/2,tickLen:g}),l):[{t:{empty:!0}}]}function i(v,s,o,b){return{o:v,h:s,l:o,c:b}}function n(v,s,o,b,g,d){for(var f=g.makeCalcdata(s,"open"),m=g.makeCalcdata(s,"high"),l=g.makeCalcdata(s,"low"),x=g.makeCalcdata(s,"close"),u=Array.isArray(s.text),M=Array.isArray(s.hovertext),w=!0,p=null,_=!!s.xperiodalignment,h=[],L=0;L<b.length;L++){var E=b[L],S=f[L],P=m[L],F=l[L],I=x[L];if(E!==e&&S!==e&&P!==e&&F!==e&&I!==e){I===S?p!==null&&I!==p&&(w=I>p):w=I>S,p=I;var D=d(S,P,F,I);D.pos=E,D.yc=(S+I)/2,D.i=L,D.dir=w?"increasing":"decreasing",D.x=D.pos,D.y=[F,P],_&&(D.orig_p=o[L]),u&&(D.tx=s.text[L]),M&&(D.htx=s.hovertext[L]),h.push(D)}else h.push({pos:E,empty:!0})}return s._extremes[g._id]=A.findExtremes(g,y.concat(l,m),{padded:!0}),h.length&&(h[0].t={labels:{open:c(v,"open:")+" ",high:c(v,"high:")+" ",low:c(v,"low:")+" ",close:c(v,"close:")+" "}}),h}function r(v,s,o){var b=o._minDiff;if(!b){var g=v._fullData,d=[];b=1/0;var f;for(f=0;f<g.length;f++){var m=g[f];if(m.type==="ohlc"&&m.visible===!0&&m.xaxis===s._id){d.push(m);var l=s.makeCalcdata(m,"x");m._origX=l;var x=T(o,s,"x",l).vals;m._xcalc=x;var u=y.distinctVals(x).minDiff;u&&isFinite(u)&&(b=Math.min(b,u))}}for(b===1/0&&(b=1),f=0;f<d.length;f++)d[f]._minDiff=b}return b*o.tickwidth}N.exports={calc:a,calcCommon:n}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(t,N,V){var y=t("../../lib"),c=t("./ohlc_defaults"),A=t("../scatter/period_defaults"),T=t("./attributes");N.exports=function(i,n,r,v){function s(b,g){return y.coerce(i,n,T,b,g)}var o=c(i,n,s,v);if(!o){n.visible=!1;return}A(i,n,v,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),e(i,n,s,"increasing"),e(i,n,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),v._requestRangeslider[n.xaxis]=!0};function e(a,i,n,r){n(r+".line.color"),n(r+".line.width",i.line.width),n(r+".line.dash",i.line.dash)}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../lib"),A=t("../../components/fx"),T=t("../../components/color"),e=t("../../lib").fillText,a=t("../../constants/delta.js"),i={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function n(o,b,g,d){var f=o.cd,m=f[0].trace;return m.hoverlabel.split?v(o,b,g,d):s(o,b,g,d)}function r(o,b,g,d){var f=o.cd,m=o.xa,l=f[0].trace,x=f[0].t,u=l.type,M=u==="ohlc"?"l":"min",w=u==="ohlc"?"h":"max",p,_,h=x.bPos||0,L=function(ee){return ee.pos+h-b},E=x.bdPos||x.tickLen,S=x.wHover,P=Math.min(1,E/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));p=o.maxHoverDistance-P,_=o.maxSpikeDistance-P;function F(ee){var j=L(ee);return A.inbox(j-S,j+S,p)}function I(ee){var j=ee[M],X=ee[w];return j===X||A.inbox(j-g,X-g,p)}function D(ee){return(F(ee)+I(ee))/2}var R=A.getDistanceFunction(d,F,I,D);if(A.getClosest(f,R,o),o.index===!1)return null;var O=f[o.index];if(O.empty)return null;var z=O.dir,G=l[z],Y=G.line.color;return T.opacity(Y)&&G.line.width?o.color=Y:o.color=G.fillcolor,o.x0=m.c2p(O.pos+h-E,!0),o.x1=m.c2p(O.pos+h+E,!0),o.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,o.spikeDistance=D(O)*_/p,o.xSpike=m.c2p(O.pos,!0),o}function v(o,b,g,d){var f=o.cd,m=o.ya,l=f[0].trace,x=f[0].t,u=[],M=r(o,b,g,d);if(!M)return[];var w=M.index,p=f[w],_=p.hi||l.hoverinfo,h=_.split("+"),L=_==="all",E=L||h.indexOf("y")!==-1;if(!E)return[];for(var S=["high","open","close","low"],P={},F=0;F<S.length;F++){var I=S[F],D=l[I][M.index],R=m.c2p(D,!0),O;D in P?(O=P[D],O.yLabel+="<br>"+x.labels[I]+y.hoverLabelText(m,D,l.yhoverformat)):(O=c.extendFlat({},M),O.y0=O.y1=R,O.yLabelVal=D,O.yLabel=x.labels[I]+y.hoverLabelText(m,D,l.yhoverformat),O.name="",u.push(O),P[D]=O)}return u}function s(o,b,g,d){var f=o.cd,m=o.ya,l=f[0].trace,x=f[0].t,u=r(o,b,g,d);if(!u)return[];var M=u.index,w=f[M],p=u.index=w.i,_=w.dir;function h(D){return x.labels[D]+y.hoverLabelText(m,l[D][p],l.yhoverformat)}var L=w.hi||l.hoverinfo,E=L.split("+"),S=L==="all",P=S||E.indexOf("y")!==-1,F=S||E.indexOf("text")!==-1,I=P?[h("open"),h("high"),h("low"),h("close")+"  "+i[_]]:[];return F&&e(w,l,I),u.extraText=I.join("<br>"),u.y0=u.y1=m.c2p(w.yc,!0),[u]}N.exports={hoverPoints:n,hoverSplit:v,hoverOnPoints:s}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(t,N,V){N.exports={moduleType:"trace",name:"ohlc",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc").calc,plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(t,N,V){var y=t("../../registry"),c=t("../../lib");N.exports=function(T,e,a,i){var n=a("x"),r=a("open"),v=a("high"),s=a("low"),o=a("close");a("hoverlabel.split");var b=y.getComponentMethod("calendars","handleTraceDefaults");if(b(T,e,["x"],i),!!(r&&v&&s&&o)){var g=Math.min(r.length,v.length,s.length,o.length);return n&&(g=Math.min(g,c.minRowLength(n))),e._length=g,g}}},{"../../lib":515,"../../registry":647}],887:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib");N.exports=function(T,e,a,i){var n=e.yaxis,r=e.xaxis,v=!!r.rangebreaks;c.makeTraceGroups(i,a,"trace ohlc").each(function(s){var o=y.select(this),b=s[0],g=b.t,d=b.trace;if(d.visible!==!0||g.empty){o.remove();return}var f=g.tickLen,m=o.selectAll("path").data(c.identity);m.enter().append("path"),m.exit().remove(),m.attr("d",function(l){if(l.empty)return"M0,0Z";var x=r.c2p(l.pos-f,!0),u=r.c2p(l.pos+f,!0),M=v?(x+u)/2:r.c2p(l.pos,!0),w=n.c2p(l.o,!0),p=n.c2p(l.h,!0),_=n.c2p(l.l,!0),h=n.c2p(l.c,!0);return"M"+x+","+w+"H"+M+"M"+M+","+p+"V"+_+"M"+u+","+h+"H"+M})})}},{"../../lib":515,"@plotly/d3":58}],888:[function(t,N,V){N.exports=function(c,A){var T=c.cd,e=c.xaxis,a=c.yaxis,i=[],n,r=T[0].t.bPos||0;if(A===!1)for(n=0;n<T.length;n++)T[n].selected=0;else for(n=0;n<T.length;n++){var v=T[n];A.contains([e.c2p(v.pos+r),a.c2p(v.yc)],null,v.i,c)?(i.push({pointNumber:v.i,x:e.c2d(v.pos),y:a.c2d(v.yc)}),v.selected=1):v.selected=0}return i}},{}],889:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../components/color");N.exports=function(e,a,i){var n=i||y.select(e).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var v=r[0].trace;y.select(this).selectAll("path").each(function(s){if(!s.empty){var o=v[s.dir].line;y.select(this).style("fill","none").call(A.stroke,o.color).call(c.dashLine,o.dash,o.width).style("opacity",v.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(t,N,V){var y=t("../../lib/extend").extendFlat,c=t("../../plots/attributes"),A=t("../../plots/font_attributes"),T=t("../../components/colorscale/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/domain").attributes,i=y({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});N.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:y({},c.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:A({editType:"calc"}),tickfont:A({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:i,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(t,N,V){var y=t("../../plots/get_data").getModuleCalcData,c=t("./plot"),A="parcats";V.name=A,V.plot=function(T,e,a,i){var n=y(T.calcdata,A);if(n.length){var r=n[0];c(T,r,a,i)}},V.clean=function(T,e,a,i){var n=i._has&&i._has("parcats"),r=e._has&&e._has("parcats");n&&!r&&i._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(t,N,V){var y=t("../../lib/gup").wrap,c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/calc"),T=t("../../lib/filter_unique.js"),e=t("../../components/drawing"),a=t("../../lib"),i=t("fast-isnumeric");N.exports=function(x,u){var M=a.filterVisible(u.dimensions);if(M.length===0)return[];var w=M.map(function(K){var J;if(K.categoryorder==="trace")J=null;else if(K.categoryorder==="array")J=K.categoryarray;else{J=T(K.values);for(var U=!0,H=0;H<J.length;H++)if(!i(J[H])){U=!1;break}J.sort(U?a.sorterAsc:void 0),K.categoryorder==="category descending"&&(J=J.reverse())}return g(K.values,J)}),p,_,h;a.isArrayOrTypedArray(u.counts)?p=u.counts:p=[u.counts],d(M),M.forEach(function(K,J){f(K,w[J])});var L=u.line,E;L?(c(u,"line")&&A(x,u,{vals:u.line.color,containerStr:"line",cLetter:"c"}),E=e.tryColorscale(L)):E=a.identity;function S(K){var J,U;return a.isArrayOrTypedArray(L.color)?(J=L.color[K%L.color.length],U=J):J=L.color,{color:E(J),rawColor:U}}var P=M[0].values.length,F={},I=w.map(function(K){return K.inds});h=0;var D,R;for(D=0;D<P;D++){var O=[];for(R=0;R<I.length;R++)O.push(I[R][D]);_=p[D%p.length],h+=_;var z=S(D),G=O+"-"+z.rawColor;F[G]===void 0&&(F[G]=o(O,z.color,z.rawColor)),b(F[G],D,_)}var Y=M.map(function(K,J){return r(J,K._index,K._displayindex,K.label,h)});for(D=0;D<P;D++)for(_=p[D%p.length],R=0;R<Y.length;R++){var ee=Y[R].containerInd,j=w[R].inds[D],X=Y[R].categories;if(X[j]===void 0){var ae=u.dimensions[ee]._categoryarray[j],he=u.dimensions[ee]._ticktext[j];X[j]=v(R,j,ae,he)}s(X[j],D,_)}return y(n(Y,F,h))};function n(l,x,u){var M=l.map(function(w){return w.categories.length}).reduce(function(w,p){return Math.max(w,p)});return{dimensions:l,paths:x,trace:void 0,maxCats:M,count:u}}function r(l,x,u,M,w){return{dimensionInd:l,containerInd:x,displayInd:u,dimensionLabel:M,count:w,categories:[],dragX:null}}function v(l,x,u,M){return{dimensionInd:l,categoryInd:x,categoryValue:u,displayInd:x,categoryLabel:M,valueInds:[],count:0,dragY:null}}function s(l,x,u){l.valueInds.push(x),l.count+=u}function o(l,x,u){return{categoryInds:l,color:x,rawColor:u,valueInds:[],count:0}}function b(l,x,u){l.valueInds.push(x),l.count+=u}function g(l,x){x==null?x=[]:x=x.map(function(E){return E});var u={},M={},w=[];x.forEach(function(E,S){u[E]=0,M[E]=S});for(var p=0;p<l.length;p++){var _=l[p],h;u[_]===void 0?(u[_]=1,h=x.push(_)-1,M[_]=h):(u[_]++,h=M[_]),w.push(h)}var L=x.map(function(E){return u[E]});return{uniqueValues:x,uniqueCounts:L,inds:w}}function d(l){var x=l.map(function(M){return M.displayindex}),u;if(m(x))for(u=0;u<l.length;u++)l[u]._displayindex=l[u].displayindex;else for(u=0;u<l.length;u++)l[u]._displayindex=u}function f(l,x){l._categoryarray=x.uniqueValues,l.ticktext===null||l.ticktext===void 0?l._ticktext=[]:l._ticktext=l.ticktext.slice();for(var u=l._ticktext.length;u<x.uniqueValues.length;u++)l._ticktext.push(x.uniqueValues[u])}function m(l){for(var x=new Array(l.length),u=0;u<l.length;u++){if(l[u]<0||l[u]>=l.length||x[l[u]]!==void 0)return!1;x[l[u]]=!0}return!0}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(t,N,V){var y=t("../../lib"),c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),a=t("./attributes"),i=t("../parcoords/merge_length");function n(v,s,o,b,g){g("line.shape"),g("line.hovertemplate");var d=g("line.color",b.colorway[0]);if(c(v,"line")&&y.isArrayOrTypedArray(d)){if(d.length)return g("line.colorscale"),A(v,s,b,g,{prefix:"line.",cLetter:"c"}),d.length;s.line.color=o}return 1/0}function r(v,s){function o(x,u){return y.coerce(v,s,a.dimensions,x,u)}var b=o("values"),g=o("visible");if(b&&b.length||(g=s.visible=!1),g){o("label"),o("displayindex",s._index);var d=v.categoryarray,f=Array.isArray(d)&&d.length>0,m;f&&(m="array");var l=o("categoryorder",m);l==="array"?(o("categoryarray"),o("ticktext")):(delete v.categoryarray,delete v.ticktext),!f&&l==="array"&&(s.categoryorder="trace")}}N.exports=function(s,o,b,g){function d(u,M){return y.coerce(s,o,a,u,M)}var f=e(s,o,{name:"dimensions",handleItemDefaults:r}),m=n(s,o,b,g,d);T(o,g,d),(!Array.isArray(f)||!f.length)&&(o.visible=!1),i(o,f,"values",m),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var l={family:g.font.family,size:Math.round(g.font.size),color:g.font.color};y.coerceFont(d,"labelfont",l);var x={family:g.font.family,size:Math.round(g.font.size/1.2),color:g.font.color};y.coerceFont(d,"tickfont",x)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(t,N,V){var y=t("@plotly/d3"),c=t("d3-interpolate").interpolateNumber,A=t("../../plot_api/plot_api"),T=t("../../components/fx"),e=t("../../lib"),a=e.strTranslate,i=t("../../components/drawing"),n=t("tinycolor2"),r=t("../../lib/svg_text_utils");function v(H,q,re,Z){var Q=q._context.staticPlot,ie=H.map(ae.bind(0,q,re)),oe=Z.selectAll("g.parcatslayer").data([null]);oe.enter().append("g").attr("class","parcatslayer").style("pointer-events",Q?"none":"all");var ne=oe.selectAll("g.trace.parcats").data(ie,s),le=ne.enter().append("g").attr("class","trace parcats");ne.attr("transform",function(Le){return a(Le.x,Le.y)}),le.append("g").attr("class","paths");var _e=ne.select("g.paths"),fe=_e.selectAll("path.path").data(function(Le){return Le.paths},s);fe.attr("fill",function(Le){return Le.model.color});var ye=fe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Le){return Le.model.color}).attr("fill-opacity",0);x(ye),fe.attr("d",function(Le){return Le.svgD}),ye.empty()||fe.sort(b),fe.exit().remove(),fe.on("mouseover",g).on("mouseout",d).on("click",l),le.append("g").attr("class","dimensions");var xe=ne.select("g.dimensions"),me=xe.selectAll("g.dimension").data(function(Le){return Le.dimensions},s);me.enter().append("g").attr("class","dimension"),me.attr("transform",function(Le){return a(Le.x,0)}),me.exit().remove();var be=me.selectAll("g.category").data(function(Le){return Le.categories},s),ke=be.enter().append("g").attr("class","category");be.attr("transform",function(Le){return a(0,Le.y)}),ke.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(Le){return Le.width}).attr("height",function(Le){return Le.height}),w(ke);var De=be.selectAll("rect.bandrect").data(function(Le){return Le.bands},s);De.each(function(){e.raiseToTop(this)}),De.attr("fill",function(Le){return Le.color});var He=De.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Le){return Le.color}).attr("fill-opacity",0);De.attr("fill",function(Le){return Le.color}).attr("width",function(Le){return Le.width}).attr("height",function(Le){return Le.height}).attr("y",function(Le){return Le.y}).attr("cursor",function(Le){return Le.parcatsViewModel.arrangement==="fixed"?"default":Le.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),_(He),De.exit().remove(),ke.append("text").attr("class","catlabel").attr("pointer-events","none");var Ae=q._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(Le){return o(Le)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Ae)).style("fill","rgb(0, 0, 0)").attr("x",function(Le){return o(Le)?Le.width+5:-5}).attr("y",function(Le){return Le.height/2}).text(function(Le){return Le.model.categoryLabel}).each(function(Le){i.font(y.select(this),Le.parcatsViewModel.categorylabelfont),r.convertToTspans(y.select(this),q)}),ke.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Le){return Le.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Le){return Le.width/2}).attr("y",-5).text(function(Le,Ze){return Ze===0?Le.parcatsViewModel.model.dimensions[Le.model.dimensionInd].dimensionLabel:null}).each(function(Le){i.font(y.select(this),Le.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",O),be.exit().remove(),me.call(y.behavior.drag().origin(function(Le){return{x:Le.x,y:0}}).on("dragstart",z).on("drag",G).on("dragend",Y)),ne.each(function(Le){Le.traceSelection=y.select(this),Le.pathSelection=y.select(this).selectAll("g.paths").selectAll("path.path"),Le.dimensionSelection=y.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ne.exit().remove()}N.exports=function(H,q,re,Z){v(re,H,Z,q)};function s(H){return H.key}function o(H){var q=H.parcatsViewModel.dimensions.length,re=H.parcatsViewModel.dimensions[q-1].model.dimensionInd;return H.model.dimensionInd===re}function b(H,q){return H.model.rawColor>q.model.rawColor?1:H.model.rawColor<q.model.rawColor?-1:0}function g(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),u(y.select(this));var q=f(H),re=m(H);if(H.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:y.event,constraints:re}),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z=y.mouse(this)[0],Q=H.parcatsViewModel.graphDiv,ie=H.parcatsViewModel.trace,oe=Q._fullLayout,ne=oe._paperdiv.node().getBoundingClientRect(),le=H.parcatsViewModel.graphDiv.getBoundingClientRect(),_e,fe,ye;for(ye=0;ye<H.leftXs.length-1;ye++)if(H.leftXs[ye]+H.dimWidths[ye]-2<=Z&&Z<=H.leftXs[ye+1]+2){var xe=H.parcatsViewModel.dimensions[ye],me=H.parcatsViewModel.dimensions[ye+1];_e=(xe.x+xe.width+me.x)/2,fe=(H.topYs[ye]+H.topYs[ye+1]+H.height)/2;break}var be=H.parcatsViewModel.x+_e,ke=H.parcatsViewModel.y+fe,De=n.mostReadable(H.model.color,["black","white"]),He=H.model.count,Ae=He/H.parcatsViewModel.model.count,Le={countLabel:He,probabilityLabel:Ae.toFixed(3)},Ze=[];H.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ze.push(["Count:",Le.countLabel].join(" ")),H.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ze.push(["P:",Le.probabilityLabel].join(" "));var We=Ze.join("<br>"),ze=y.mouse(Q)[0];T.loneHover({trace:ie,x:be-ne.left+le.left,y:ke-ne.top+le.top,text:We,color:H.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:De,idealAlign:ze<be?"right":"left",hovertemplate:(ie.line||{}).hovertemplate,hovertemplateLabels:Le,eventData:[{data:ie._input,fullData:ie,count:He,probability:Ae}]},{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:Q})}}}function d(H){if(!H.parcatsViewModel.dragDimension&&(x(y.select(this)),T.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),H.parcatsViewModel.pathSelection.sort(b),H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var q=f(H),re=m(H);H.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:y.event,constraints:re})}}function f(H){for(var q=[],re=ee(H.parcatsViewModel),Z=0;Z<H.model.valueInds.length;Z++){var Q=H.model.valueInds[Z];q.push({curveNumber:re,pointNumber:Q})}return q}function m(H){for(var q={},re=H.parcatsViewModel.model.dimensions,Z=0;Z<re.length;Z++){var Q=re[Z],ie=Q.categories[H.model.categoryInds[Z]];q[Q.containerInd]=ie.categoryValue}return H.model.rawColor!==void 0&&(q.color=H.model.rawColor),q}function l(H){if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=f(H),re=m(H);H.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:y.event,constraints:re})}}function x(H){H.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function u(H){H.attr("fill-opacity",.8).attr("stroke",function(q){return n.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function M(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function p(H){H.attr("stroke","black").attr("stroke-width",1.5)}function _(H){H.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function h(H){var q=H.parcatsViewModel.pathSelection,re=H.categoryViewModel.model.dimensionInd,Z=H.categoryViewModel.model.categoryInd;return q.filter(function(Q){return Q.model.categoryInds[re]===Z&&Q.model.color===H.color})}function L(H){var q=y.select(H.parentNode).selectAll("rect.bandrect");q.each(function(re){var Z=h(re);u(Z),Z.each(function(){e.raiseToTop(this)})}),M(y.select(H.parentNode))}function E(H){var q=y.select(H).datum(),re=h(q);u(re),re.each(function(){e.raiseToTop(this)}),y.select(H.parentNode).selectAll("rect.bandrect").filter(function(Z){return Z.color===q.color}).each(function(){e.raiseToTop(this),p(y.select(this))})}function S(H,q,re){var Z=y.select(H).datum(),Q=Z.categoryViewModel.model,ie=Z.parcatsViewModel.graphDiv,oe=y.select(H.parentNode).selectAll("rect.bandrect"),ne=[];oe.each(function(_e){var fe=h(_e);fe.each(function(ye){Array.prototype.push.apply(ne,f(ye))})});var le={};le[Q.dimensionInd]=Q.categoryValue,ie.emit(q,{points:ne,event:re,constraints:le})}function P(H,q,re){var Z=y.select(H).datum(),Q=Z.categoryViewModel.model,ie=Z.parcatsViewModel.graphDiv,oe=h(Z),ne=[];oe.each(function(_e){Array.prototype.push.apply(ne,f(_e))});var le={};le[Q.dimensionInd]=Q.categoryValue,Z.rawColor!==void 0&&(le.color=Z.rawColor),ie.emit(q,{points:ne,event:re,constraints:le})}function F(H,q,re){H._fullLayout._calcInverseTransform(H);var Z=H._fullLayout._invScaleX,Q=H._fullLayout._invScaleY,ie=y.select(re.parentNode).select("rect.catrect"),oe=ie.node().getBoundingClientRect(),ne=ie.datum(),le=ne.parcatsViewModel,_e=le.model.dimensions[ne.model.dimensionInd],fe=le.trace,ye=oe.top+oe.height/2,xe,me;le.dimensions.length>1&&_e.displayInd===le.dimensions.length-1?(xe=oe.left,me="left"):(xe=oe.left+oe.width,me="right");var be=ne.model.count,ke=ne.model.categoryLabel,De=be/ne.parcatsViewModel.model.count,He={countLabel:be,categoryLabel:ke,probabilityLabel:De.toFixed(3)},Ae=[];ne.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ae.push(["Count:",He.countLabel].join(" ")),ne.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ae.push(["P("+He.categoryLabel+"):",He.probabilityLabel].join(" "));var Le=Ae.join("<br>");return{trace:fe,x:Z*(xe-q.left),y:Q*(ye-q.top),text:Le,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:me,hovertemplate:fe.hovertemplate,hovertemplateLabels:He,eventData:[{data:fe._input,fullData:fe,count:be,category:ke,probability:De}]}}function I(H,q,re){var Z=[];return y.select(re.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Q=this;Z.push(F(H,q,Q))}),Z}function D(H,q,re){H._fullLayout._calcInverseTransform(H);var Z=H._fullLayout._invScaleX,Q=H._fullLayout._invScaleY,ie=re.getBoundingClientRect(),oe=y.select(re).datum(),ne=oe.categoryViewModel,le=ne.parcatsViewModel,_e=le.model.dimensions[ne.model.dimensionInd],fe=le.trace,ye=ie.y+ie.height/2,xe,me;le.dimensions.length>1&&_e.displayInd===le.dimensions.length-1?(xe=ie.left,me="left"):(xe=ie.left+ie.width,me="right");var be=ne.model.categoryLabel,ke=oe.parcatsViewModel.model.count,De=0;oe.categoryViewModel.bands.forEach(function(Ft){Ft.color===oe.color&&(De+=Ft.count)});var He=ne.model.count,Ae=0;le.pathSelection.each(function(Ft){Ft.model.color===oe.color&&(Ae+=Ft.model.count)});var Le=De/ke,Ze=De/Ae,We=De/He,ze={countLabel:ke,categoryLabel:be,probabilityLabel:Le.toFixed(3)},Ie=[];ne.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ie.push(["Count:",ze.countLabel].join(" ")),ne.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ie.push("P(color \u2229 "+be+"): "+ze.probabilityLabel),Ie.push("P("+be+" | color): "+Ze.toFixed(3)),Ie.push("P(color | "+be+"): "+We.toFixed(3)));var Ve=Ie.join("<br>"),dt=n.mostReadable(oe.color,["black","white"]);return{trace:fe,x:Z*(xe-q.left),y:Q*(ye-q.top),text:Ve,color:oe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:me,hovertemplate:fe.hovertemplate,hovertemplateLabels:ze,eventData:[{data:fe._input,fullData:fe,category:be,count:ke,probability:Le,categorycount:He,colorcount:Ae,bandcolorcount:De}]}}function R(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=y.mouse(this)[1];if(q<-1)return;var re=H.parcatsViewModel.graphDiv,Z=re._fullLayout,Q=Z._paperdiv.node().getBoundingClientRect(),ie=H.parcatsViewModel.hoveron,oe=this;if(ie==="color"?(E(oe),P(oe,"plotly_hover",y.event)):(L(oe),S(oe,"plotly_hover",y.event)),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ne;ie==="category"?ne=F(re,Q,oe):ie==="color"?ne=D(re,Q,oe):ie==="dimension"&&(ne=I(re,Q,oe)),ne&&T.loneHover(ne,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:re})}}}function O(H){var q=H.parcatsViewModel;if(!q.dragDimension&&(x(q.pathSelection),w(q.dimensionSelection.selectAll("g.category")),_(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(b),q.hoverinfoItems.indexOf("skip")===-1)){var re=H.parcatsViewModel.hoveron,Z=this;re==="color"?P(Z,"plotly_unhover",y.event):S(Z,"plotly_unhover",y.event)}}function z(H){H.parcatsViewModel.arrangement!=="fixed"&&(H.dragDimensionDisplayInd=H.model.displayInd,H.initialDragDimensionDisplayInds=H.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),H.dragHasMoved=!1,H.dragCategoryDisplayInd=null,y.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var re=y.mouse(this)[0],Z=y.mouse(this)[1];-2<=re&&re<=q.width+2&&-2<=Z&&Z<=q.height+2&&(H.dragCategoryDisplayInd=q.model.displayInd,H.initialDragCategoryDisplayInds=H.model.categories.map(function(Q){return Q.displayInd}),q.model.dragY=q.y,e.raiseToTop(this.parentNode),y.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<Z&&Z<=Q.y+Q.height&&(H.potentialClickBand=this)}))}),H.parcatsViewModel.dragDimension=H,T.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function G(H){if(H.parcatsViewModel.arrangement!=="fixed"&&(H.dragHasMoved=!0,H.dragDimensionDisplayInd!==null)){var q=H.dragDimensionDisplayInd,re=q-1,Z=q+1,Q=H.parcatsViewModel.dimensions[q];if(H.dragCategoryDisplayInd!==null){var ie=Q.categories[H.dragCategoryDisplayInd];ie.model.dragY+=y.event.dy;var oe=ie.model.dragY,ne=ie.model.displayInd,le=Q.categories,_e=le[ne-1],fe=le[ne+1];_e!==void 0&&oe<_e.y+_e.height/2&&(ie.model.displayInd=_e.model.displayInd,_e.model.displayInd=ne),fe!==void 0&&oe+ie.height>fe.y+fe.height/2&&(ie.model.displayInd=fe.model.displayInd,fe.model.displayInd=ne),H.dragCategoryDisplayInd=ie.model.displayInd}if(H.dragCategoryDisplayInd===null||H.parcatsViewModel.arrangement==="freeform"){Q.model.dragX=y.event.x;var ye=H.parcatsViewModel.dimensions[re],xe=H.parcatsViewModel.dimensions[Z];ye!==void 0&&Q.model.dragX<ye.x+ye.width&&(Q.model.displayInd=ye.model.displayInd,ye.model.displayInd=q),xe!==void 0&&Q.model.dragX+Q.width>xe.x&&(Q.model.displayInd=xe.model.displayInd,xe.model.displayInd=H.dragDimensionDisplayInd),H.dragDimensionDisplayInd=Q.model.displayInd}J(H.parcatsViewModel),K(H.parcatsViewModel),X(H.parcatsViewModel),j(H.parcatsViewModel)}}function Y(H){if(H.parcatsViewModel.arrangement!=="fixed"&&H.dragDimensionDisplayInd!==null){y.select(this).selectAll("text").attr("font-weight","normal");var q={},re=ee(H.parcatsViewModel),Z=H.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),Q=H.initialDragDimensionDisplayInds.some(function(xe,me){return xe!==Z[me]});Q&&Z.forEach(function(xe,me){var be=H.parcatsViewModel.model.dimensions[me].containerInd;q["dimensions["+be+"].displayindex"]=xe});var ie=!1;if(H.dragCategoryDisplayInd!==null){var oe=H.model.categories.map(function(xe){return xe.displayInd});if(ie=H.initialDragCategoryDisplayInds.some(function(xe,me){return xe!==oe[me]}),ie){var ne=H.model.categories.slice().sort(function(xe,me){return xe.displayInd-me.displayInd}),le=ne.map(function(xe){return xe.categoryValue}),_e=ne.map(function(xe){return xe.categoryLabel});q["dimensions["+H.model.containerInd+"].categoryarray"]=[le],q["dimensions["+H.model.containerInd+"].ticktext"]=[_e],q["dimensions["+H.model.containerInd+"].categoryorder"]="array"}}if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!H.dragHasMoved&&H.potentialClickBand&&(H.parcatsViewModel.hoveron==="color"?P(H.potentialClickBand,"plotly_click",y.event.sourceEvent):S(H.potentialClickBand,"plotly_click",y.event.sourceEvent)),H.model.dragX=null,H.dragCategoryDisplayInd!==null){var fe=H.parcatsViewModel.dimensions[H.dragDimensionDisplayInd].categories[H.dragCategoryDisplayInd];fe.model.dragY=null,H.dragCategoryDisplayInd=null}H.dragDimensionDisplayInd=null,H.parcatsViewModel.dragDimension=null,H.dragHasMoved=null,H.potentialClickBand=null,J(H.parcatsViewModel),K(H.parcatsViewModel);var ye=y.transition().duration(300).ease("cubic-in-out");ye.each(function(){X(H.parcatsViewModel,!0),j(H.parcatsViewModel,!0)}).each("end",function(){(Q||ie)&&A.restyle(H.parcatsViewModel.graphDiv,q,[re])})}}function ee(H){for(var q,re=H.graphDiv._fullData,Z=0;Z<re.length;Z++)if(H.key===re[Z].uid){q=Z;break}return q}function j(H,q){q===void 0&&(q=!1);function re(Z){return q?Z.transition():Z}H.pathSelection.data(function(Z){return Z.paths},s),re(H.pathSelection).attr("d",function(Z){return Z.svgD})}function X(H,q){q===void 0&&(q=!1);function re(le){return q?le.transition():le}H.dimensionSelection.data(function(le){return le.dimensions},s);var Z=H.dimensionSelection.selectAll("g.category").data(function(le){return le.categories},s);re(H.dimensionSelection).attr("transform",function(le){return a(le.x,0)}),re(Z).attr("transform",function(le){return a(0,le.y)});var Q=Z.select(".dimlabel");Q.text(function(le,_e){return _e===0?le.parcatsViewModel.model.dimensions[le.model.dimensionInd].dimensionLabel:null});var ie=Z.select(".catlabel");ie.attr("text-anchor",function(le){return o(le)?"start":"end"}).attr("x",function(le){return o(le)?le.width+5:-5}).each(function(le){var _e,fe;o(le)?(_e=le.width+5,fe="start"):(_e=-5,fe="end"),y.select(this).selectAll("tspan").attr("x",_e).attr("text-anchor",fe)});var oe=Z.selectAll("rect.bandrect").data(function(le){return le.bands},s),ne=oe.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(le){return le.color}).attr("fill-opacity",0);oe.attr("fill",function(le){return le.color}).attr("width",function(le){return le.width}).attr("height",function(le){return le.height}).attr("y",function(le){return le.y}),_(ne),oe.each(function(){e.raiseToTop(this)}),oe.exit().remove()}function ae(H,q,re){var Z=re[0],Q=q.margin||{l:80,r:80,t:100,b:80},ie=Z.trace,oe=ie.domain,ne=q.width,le=q.height,_e=Math.floor(ne*(oe.x[1]-oe.x[0])),fe=Math.floor(le*(oe.y[1]-oe.y[0])),ye=oe.x[0]*ne+Q.l,xe=q.height-oe.y[1]*q.height+Q.t,me=ie.line.shape,be;ie.hoverinfo==="all"?be=["count","probability"]:be=(ie.hoverinfo||"").split("+");var ke={trace:ie,key:ie.uid,model:Z,x:ye,y:xe,width:_e,height:fe,hoveron:ie.hoveron,hoverinfoItems:be,arrangement:ie.arrangement,bundlecolors:ie.bundlecolors,sortpaths:ie.sortpaths,labelfont:ie.labelfont,categorylabelfont:ie.tickfont,pathShape:me,dragDimension:null,margin:Q,paths:[],dimensions:[],graphDiv:H,traceSelection:null,pathSelection:null,dimensionSelection:null};return Z.dimensions&&(J(ke),K(ke)),ke}function he(H,q,re,Z,Q){var ie=[],oe=[],ne,le;for(le=0;le<re.length-1;le++)ne=c(re[le]+H[le],H[le+1]),ie.push(ne(Q)),oe.push(ne(1-Q));var _e="M "+H[0]+","+q[0];for(_e+="l"+re[0]+",0 ",le=1;le<re.length;le++)_e+="C"+ie[le-1]+","+q[le-1]+" "+oe[le-1]+","+q[le]+" "+H[le]+","+q[le],_e+="l"+re[le]+",0 ";for(_e+="l0,"+Z+" ",_e+="l -"+re[re.length-1]+",0 ",le=re.length-2;le>=0;le--)_e+="C"+oe[le]+","+(q[le+1]+Z)+" "+ie[le]+","+(q[le]+Z)+" "+(H[le]+re[le])+","+(q[le]+Z),_e+="l-"+re[le]+",0 ";return _e+="Z",_e}function K(H){var q=H.dimensions,re=H.model,Z=q.map(function(Ct){return Ct.categories.map(function(jt){return jt.y})}),Q=H.model.dimensions.map(function(Ct){return Ct.categories.map(function(jt){return jt.displayInd})}),ie=H.model.dimensions.map(function(Ct){return Ct.displayInd}),oe=H.dimensions.map(function(Ct){return Ct.model.dimensionInd}),ne=q.map(function(Ct){return Ct.x}),le=q.map(function(Ct){return Ct.width}),_e=[];for(var fe in re.paths)re.paths.hasOwnProperty(fe)&&_e.push(re.paths[fe]);function ye(Ct){var jt=Ct.categoryInds.map(function(Lt,Xe){return Q[Xe][Lt]}),Nt=oe.map(function(Lt){return jt[Lt]});return Nt}_e.sort(function(Ct,jt){var Nt=ye(Ct),Lt=ye(jt);return H.sortpaths==="backward"&&(Nt.reverse(),Lt.reverse()),Nt.push(Ct.valueInds[0]),Lt.push(jt.valueInds[0]),H.bundlecolors&&(Nt.unshift(Ct.rawColor),Lt.unshift(jt.rawColor)),Nt<Lt?-1:Nt>Lt?1:0});for(var xe=new Array(_e.length),me=q[0].model.count,be=q[0].categories.map(function(Ct){return Ct.height}).reduce(function(Ct,jt){return Ct+jt}),ke=0;ke<_e.length;ke++){var De=_e[ke],He;me>0?He=be*(De.count/me):He=0;for(var Ae=new Array(Z.length),Le=0;Le<De.categoryInds.length;Le++){var Ze=De.categoryInds[Le],We=Q[Le][Ze],ze=ie[Le];Ae[ze]=Z[ze][We],Z[ze][We]+=He;var Ie=H.dimensions[ze].categories[We],Ve=Ie.bands.length,dt=Ie.bands[Ve-1];if(dt===void 0||De.rawColor!==dt.rawColor){var Ft=dt===void 0?0:dt.y+dt.height;Ie.bands.push({key:Ft,color:De.color,rawColor:De.rawColor,height:He,width:Ie.width,count:De.count,y:Ft,categoryViewModel:Ie,parcatsViewModel:H})}else{var Qt=Ie.bands[Ve-1];Qt.height+=He,Qt.count+=De.count}}var Ot;H.pathShape==="hspline"?Ot=he(ne,Ae,le,He,.5):Ot=he(ne,Ae,le,He,0),xe[ke]={key:De.valueInds[0],model:De,height:He,leftXs:ne,topYs:Ae,dimWidths:le,svgD:Ot,parcatsViewModel:H}}H.paths=xe}function J(H){var q=H.model.dimensions.map(function(oe){return{displayInd:oe.displayInd,dimensionInd:oe.dimensionInd}});q.sort(function(oe,ne){return oe.displayInd-ne.displayInd});var re=[];for(var Z in q){var Q=q[Z].dimensionInd,ie=H.model.dimensions[Q];re.push(U(H,ie))}H.dimensions=re}function U(H,q){var re=40,Z=16,Q=H.model.dimensions.length,ie=q.displayInd,oe,ne,le;Q>1?oe=(H.width-2*re-Z)/(Q-1):oe=0,ne=re,le=ne+oe*ie;var _e=[],fe=H.model.maxCats,ye=q.categories.length,xe=8,me=q.count,be=H.height-xe*(fe-1),ke,De,He,Ae,Le,Ze=(fe-ye)*xe/2,We=q.categories.map(function(ze){return{displayInd:ze.displayInd,categoryInd:ze.categoryInd}});for(We.sort(function(ze,Ie){return ze.displayInd-Ie.displayInd}),Le=0;Le<ye;Le++)Ae=We[Le].categoryInd,De=q.categories[Ae],me>0?ke=De.count/me*be:ke=0,He={key:De.valueInds[0],model:De,width:Z,height:ke,y:De.dragY!==null?De.dragY:Ze,bands:[],parcatsViewModel:H},Ze=Ze+ke+xe,_e.push(He);return{key:q.dimensionInd,x:q.dragX!==null?q.dragX:le,y:0,width:Z,model:q,categories:_e,parcatsViewModel:H,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(t,N,V){var y=t("./parcats");N.exports=function(A,T,e,a){var i=A._fullLayout,n=i._paper,r=i._size;y(A,n,T,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},e,a)}},{"./parcats":895}],897:[function(t,N,V){var y=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/layout_attributes"),A=t("../../plots/font_attributes"),T=t("../../plots/domain").attributes,e=t("../../lib/extend").extendFlat,a=t("../../plot_api/plot_template").templatedArray;N.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:A({editType:"plot"}),tickfont:A({editType:"plot"}),rangefont:A({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},c.tickvals,{editType:"plot"}),ticktext:e({},c.ticktext,{editType:"plot"}),tickformat:e({},c.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},y("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(t,N,V){var y=t("./constants"),c=t("@plotly/d3"),A=t("../../lib/gup").keyFun,T=t("../../lib/gup").repeat,e=t("../../lib").sorterAsc,a=t("../../lib").strTranslate,i=y.bar.snapRatio;function n(Y,ee){return Y*(1-i)+ee*i}var r=y.bar.snapClose;function v(Y,ee){return Y*(1-r)+ee*r}function s(Y,ee,j,X){if(o(j,X))return j;var ae=Y?-1:1,he=0,K=ee.length-1;if(ae<0){var J=he;he=K,K=J}for(var U=ee[he],H=U,q=he;ae*q<ae*K;q+=ae){var re=q+ae,Z=ee[re];if(ae*j<ae*v(U,Z))return n(U,H);if(ae*j<ae*Z||re===K)return n(Z,U);H=U,U=Z}}function o(Y,ee){for(var j=0;j<ee.length;j++)if(Y>=ee[j][0]&&Y<=ee[j][1])return!0;return!1}function b(Y){Y.attr("x",-y.bar.captureWidth/2).attr("width",y.bar.captureWidth)}function g(Y){Y.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function d(Y){if(!Y.brush.filterSpecified)return"0,"+Y.height;for(var ee=f(Y.brush.filter.getConsolidated(),Y.height),j=[0],X,ae,he,K=ee.length?ee[0][0]:null,J=0;J<ee.length;J++)X=ee[J],ae=X[1]-X[0],j.push(K),j.push(ae),he=J+1,he<ee.length&&(K=ee[he][0]-X[1]);return j.push(Y.height),j}function f(Y,ee){return Y.map(function(j){return j.map(function(X){return Math.max(0,X*ee)}).sort(e)})}function m(Y,ee){var j=y.bar.handleHeight;if(!(ee>Y[1]+j||ee<Y[0]-j))return ee>=.9*Y[1]+.1*Y[0]?"n":ee<=.9*Y[0]+.1*Y[1]?"s":"ns"}function l(){c.select(document.body).style("cursor",null)}function x(Y){Y.attr("stroke-dasharray",d)}function u(Y,ee){var j=c.select(Y).selectAll(".highlight, .highlight-shadow"),X=ee?j.transition().duration(y.bar.snapDuration).each("end",ee):j;x(X)}function M(Y,ee){var j=Y.brush,X=j.filterSpecified,ae=NaN,he={},K;if(X){var J=Y.height,U=j.filter.getConsolidated(),H=f(U,J),q=NaN,re=NaN,Z=NaN;for(K=0;K<=H.length;K++){var Q=H[K];if(Q&&Q[0]<=ee&&ee<=Q[1]){q=K;break}else if(re=K?K-1:NaN,Q&&Q[0]>ee){Z=K;break}}if(ae=q,isNaN(ae)&&(isNaN(re)||isNaN(Z)?ae=isNaN(re)?Z:re:ae=ee-H[re][1]<H[Z][0]-ee?re:Z),!isNaN(ae)){var ie=H[ae],oe=m(ie,ee);oe&&(he.interval=U[ae],he.intervalPix=ie,he.region=oe)}}if(Y.ordinal&&!he.region){var ne=Y.unitTickvals,le=Y.unitToPaddedPx.invert(ee);for(K=0;K<ne.length;K++){var _e=[ne[Math.max(K-1,0)]*.25+ne[K]*.75,ne[Math.min(K+1,ne.length-1)]*.25+ne[K]*.75];if(le>=_e[0]&&le<=_e[1]){he.clickableOrdinalRange=_e;break}}}return he}function w(Y,ee){c.event.sourceEvent.stopPropagation();var j=ee.height-c.mouse(Y)[1]-2*y.verticalPadding,X=ee.unitToPaddedPx.invert(j),ae=ee.brush,he=M(ee,j),K=he.interval,J=ae.svgBrush;if(J.wasDragged=!1,J.grabbingBar=he.region==="ns",J.grabbingBar){var U=K.map(ee.unitToPaddedPx);J.grabPoint=j-U[0]-y.verticalPadding,J.barLength=U[1]-U[0]}J.clickableOrdinalRange=he.clickableOrdinalRange,J.stayingIntervals=ee.multiselect&&ae.filterSpecified?ae.filter.getConsolidated():[],K&&(J.stayingIntervals=J.stayingIntervals.filter(function(H){return H[0]!==K[0]&&H[1]!==K[1]})),J.startExtent=he.region?K[he.region==="s"?1:0]:X,ee.parent.inBrushDrag=!0,J.brushStartCallback()}function p(Y,ee){c.event.sourceEvent.stopPropagation();var j=ee.height-c.mouse(Y)[1]-2*y.verticalPadding,X=ee.brush.svgBrush;X.wasDragged=!0,X._dragging=!0,X.grabbingBar?X.newExtent=[j-X.grabPoint,j+X.barLength-X.grabPoint].map(ee.unitToPaddedPx.invert):X.newExtent=[X.startExtent,ee.unitToPaddedPx.invert(j)].sort(e),ee.brush.filterSpecified=!0,X.extent=X.stayingIntervals.concat([X.newExtent]),X.brushCallback(ee),u(Y.parentNode)}function _(Y,ee){var j=ee.brush,X=j.filter,ae=j.svgBrush;ae._dragging||(h(Y,ee),p(Y,ee),ee.brush.svgBrush.wasDragged=!1),ae._dragging=!1;var he=c.event;he.sourceEvent.stopPropagation();var K=ae.grabbingBar;if(ae.grabbingBar=!1,ae.grabLocation=void 0,ee.parent.inBrushDrag=!1,l(),!ae.wasDragged){ae.wasDragged=void 0,ae.clickableOrdinalRange?j.filterSpecified&&ee.multiselect?ae.extent.push(ae.clickableOrdinalRange):(ae.extent=[ae.clickableOrdinalRange],j.filterSpecified=!0):K?(ae.extent=ae.stayingIntervals,ae.extent.length===0&&I(j)):I(j),ae.brushCallback(ee),u(Y.parentNode),ae.brushEndCallback(j.filterSpecified?X.getConsolidated():[]);return}var J=function(){X.set(X.getConsolidated())};if(ee.ordinal){var U=ee.unitTickvals;U[U.length-1]<U[0]&&U.reverse(),ae.newExtent=[s(0,U,ae.newExtent[0],ae.stayingIntervals),s(1,U,ae.newExtent[1],ae.stayingIntervals)];var H=ae.newExtent[1]>ae.newExtent[0];ae.extent=ae.stayingIntervals.concat(H?[ae.newExtent]:[]),ae.extent.length||I(j),ae.brushCallback(ee),H?u(Y.parentNode,J):(J(),u(Y.parentNode))}else J();ae.brushEndCallback(j.filterSpecified?X.getConsolidated():[])}function h(Y,ee){var j=ee.height-c.mouse(Y)[1]-2*y.verticalPadding,X=M(ee,j),ae="crosshair";X.clickableOrdinalRange?ae="pointer":X.region&&(ae=X.region+"-resize"),c.select(document.body).style("cursor",ae)}function L(Y){Y.on("mousemove",function(ee){c.event.preventDefault(),ee.parent.inBrushDrag||h(this,ee)}).on("mouseleave",function(ee){ee.parent.inBrushDrag||l()}).call(c.behavior.drag().on("dragstart",function(ee){w(this,ee)}).on("drag",function(ee){p(this,ee)}).on("dragend",function(ee){_(this,ee)}))}function E(Y,ee){return Y[0]-ee[0]}function S(Y,ee,j){var X=j._context.staticPlot,ae=Y.selectAll(".background").data(T);ae.enter().append("rect").classed("background",!0).call(b).call(g).style("pointer-events",X?"none":"auto").attr("transform",a(0,y.verticalPadding)),ae.call(L).attr("height",function(J){return J.height-y.verticalPadding});var he=Y.selectAll(".highlight-shadow").data(T);he.enter().append("line").classed("highlight-shadow",!0).attr("x",-y.bar.width/2).attr("stroke-width",y.bar.width+y.bar.strokeWidth).attr("stroke",ee).attr("opacity",y.bar.strokeOpacity).attr("stroke-linecap","butt"),he.attr("y1",function(J){return J.height}).call(x);var K=Y.selectAll(".highlight").data(T);K.enter().append("line").classed("highlight",!0).attr("x",-y.bar.width/2).attr("stroke-width",y.bar.width-y.bar.strokeWidth).attr("stroke",y.bar.fillColor).attr("opacity",y.bar.fillOpacity).attr("stroke-linecap","butt"),K.attr("y1",function(J){return J.height}).call(x)}function P(Y,ee,j){var X=Y.selectAll("."+y.cn.axisBrush).data(T,A);X.enter().append("g").classed(y.cn.axisBrush,!0),S(X,ee,j)}function F(Y){return Y.svgBrush.extent.map(function(ee){return ee.slice()})}function I(Y){Y.filterSpecified=!1,Y.svgBrush.extent=[[-1/0,1/0]]}function D(Y){return function(j){var X=j.brush,ae=F(X),he=ae.slice();X.filter.set(he),Y()}}function R(Y){for(var ee=Y.slice(),j=[],X,ae=ee.shift();ae;){for(X=ae.slice();(ae=ee.shift())&&ae[0]<=X[1];)X[1]=Math.max(X[1],ae[1]);j.push(X)}return j.length===1&&j[0][0]>j[0][1]&&(j=[]),j}function O(){var Y=[],ee,j;return{set:function(X){Y=X.map(function(ae){return ae.slice().sort(e)}).sort(E),Y.length===1&&Y[0][0]===-1/0&&Y[0][1]===1/0&&(Y=[[0,-1]]),ee=R(Y),j=Y.reduce(function(ae,he){return[Math.min(ae[0],he[0]),Math.max(ae[1],he[1])]},[1/0,-1/0])},get:function(){return Y.slice()},getConsolidated:function(){return ee},getBounds:function(){return j}}}function z(Y,ee,j,X,ae,he){var K=O();return K.set(j),{filter:K,filterSpecified:ee,svgBrush:{extent:[],brushStartCallback:X,brushCallback:D(ae),brushEndCallback:he}}}function G(Y,ee){if(Array.isArray(Y[0])?(Y=Y.map(function(X){return X.sort(e)}),ee.multiselect?Y=R(Y.sort(E)):Y=[Y[0]]):Y=[Y.sort(e)],ee.tickvals){var j=ee.tickvals.slice().sort(e);if(Y=Y.map(function(X){var ae=[s(0,j,X[0],[]),s(1,j,X[1],[])];if(ae[1]>ae[0])return ae}).filter(function(X){return X}),!Y.length)return}return Y.length>1?Y:Y[0]}N.exports={makeBrush:z,ensureAxisBrush:P,cleanRanges:G}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../plots/get_data").getModuleCalcData,A=t("./plot"),T=t("../../constants/xmlns_namespaces");V.name="parcoords",V.plot=function(e){var a=c(e.calcdata,"parcoords")[0];a.length&&A(e,a)},V.clean=function(e,a,i,n){var r=n._has&&n._has("parcoords"),v=a._has&&a._has("parcoords");r&&!v&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},V.toSVG=function(e){var a=e._fullLayout._glimages,i=y.select(e).selectAll(".svg-container"),n=i.filter(function(v,s){return s===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var v=this,s=v.toDataURL("image/png"),o=a.append("svg:image");o.attr({xmlns:T.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:v.style.width,height:v.style.height})}n.each(r),window.setTimeout(function(){y.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(t,N,V){var y=t("../../lib").isArrayOrTypedArray,c=t("../../components/colorscale"),A=t("../../lib/gup").wrap;N.exports=function(a,i){var n,r;return c.hasColorscale(i,"line")&&y(i.line.color)?(n=i.line.color,r=c.extractOpts(i.line).colorscale,c.calc(a,i,{vals:n,containerStr:"line",cLetter:"c"})):(n=T(i._length),r=[[0,i.line.color],[1,i.line.color]]),A({lineColor:n,cscale:r})};function T(e){for(var a=new Array(e),i=0;i<e;i++)a[i]=.5;return a}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(t,N,V){N.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(t,N,V){var y=t("../../lib"),c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),a=t("../../plots/cartesian/axes"),i=t("./attributes"),n=t("./axisbrush"),r=t("./constants").maxDimensionCount,v=t("./merge_length");function s(b,g,d,f,m){var l=m("line.color",d);if(c(b,"line")&&y.isArrayOrTypedArray(l)){if(l.length)return m("line.colorscale"),A(b,g,f,m,{prefix:"line.",cLetter:"c"}),l.length;g.line.color=d}return 1/0}function o(b,g,d,f){function m(w,p){return y.coerce(b,g,i.dimensions,w,p)}var l=m("values"),x=m("visible");if(l&&l.length||(x=g.visible=!1),x){m("label"),m("tickvals"),m("ticktext"),m("tickformat");var u=m("range");g._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},a.setConvert(g._ax,f.layout),m("multiselect");var M=m("constraintrange");M&&(g.constraintrange=n.cleanRanges(M,g))}}N.exports=function(g,d,f,m){function l(p,_){return y.coerce(g,d,i,p,_)}var x=g.dimensions;Array.isArray(x)&&x.length>r&&(y.log("parcoords traces support up to "+r+" dimensions at the moment"),x.splice(r));var u=e(g,d,{name:"dimensions",layout:m,handleItemDefaults:o}),M=s(g,d,f,m,l);T(d,m,l),(!Array.isArray(u)||!u.length)&&(d.visible=!1),v(d,u,"values",M);var w={family:m.font.family,size:Math.round(m.font.size/1.2),color:m.font.color};y.coerceFont(l,"labelfont",w),y.coerceFont(l,"tickfont",w),y.coerceFont(l,"rangefont",w),l("labelangle"),l("labelside"),l("unselected.line.color"),l("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(t,N,V){var y=t("../../lib").isTypedArray;V.convertTypedArray=function(c){return y(c)?Array.prototype.slice.call(c):c},V.isOrdinal=function(c){return!!c.tickvals},V.isVisible=function(c){return c.visible||!("visible"in c)}},{"../../lib":515}],905:[function(t,N,V){var y=t("./base_index");y.plot=t("./plot"),N.exports=y},{"./base_index":899,"./plot":909}],906:[function(t,N,V){var y=t("glslify"),c=y([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),A=y([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=t("./constants").maxDimensionCount,e=t("../../lib"),a=1e-6,i=2048,n=new Uint8Array(4),r=new Uint8Array(4),v={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(h){h.read({x:0,y:0,width:1,height:1,data:n})}function o(h,L,E,S,P){var F=h._gl;F.enable(F.SCISSOR_TEST),F.scissor(L,E,S,P),h.clear({color:[0,0,0,0],depth:1})}function b(h,L,E,S,P,F){var I=F.key;function D(R){var O=Math.min(S,P-R*S);R===0&&(window.cancelAnimationFrame(E.currentRafs[I]),delete E.currentRafs[I],o(h,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!E.clearOnly&&(F.count=2*O,F.offset=2*R*S,L(F),R*S+O<P&&(E.currentRafs[I]=window.requestAnimationFrame(function(){D(R+1)})),E.drawCompleted=!1)}E.drawCompleted||(s(h),E.drawCompleted=!0),D(0)}function g(h){return Math.max(a,Math.min(1-a,h))}function d(h,L){for(var E=new Array(256),S=0;S<256;S++)E[S]=h(S/255).concat(L);return E}function f(h,L){return(h>>>8*L)%256/255}function m(h,L,E){for(var S=new Array(h*(T+4)),P=0,F=0;F<h;F++){for(var I=0;I<T;I++)S[P++]=I<L.length?L[I].paddedUnitValues[F]:.5;S[P++]=f(F,2),S[P++]=f(F,1),S[P++]=f(F,0),S[P++]=g(E[F])}return S}function l(h,L,E){for(var S=new Array(L*8),P=0,F=0;F<L;F++)for(var I=0;I<2;I++)for(var D=0;D<4;D++){var R=h*4+D,O=E[F*64+R];R===63&&I===0&&(O*=-1),S[P++]=O}return S}function x(h){var L="0"+h;return L.substr(L.length-2)}function u(h){return h<T?"p"+x(h+1)+"_"+x(h+4):"colors"}function M(h,L,E){for(var S=0;S<=T;S+=4)h[u(S)](l(S/4,L,E))}function w(h){for(var L={},E=0;E<=T;E+=4)L[u(E)]=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function p(h,L,E,S,P,F,I,D,R,O,z,G,Y,ee){for(var j=[[],[]],X=0;X<64;X++)j[0][X]=X===P?1:0,j[1][X]=X===F?1:0;I*=ee,D*=ee,R*=ee,O*=ee;var ae=h.lines.canvasOverdrag*ee,he=h.domain,K=h.canvasWidth*ee,J=h.canvasHeight*ee,U=h.pad.l*ee,H=h.pad.b*ee,q=h.layoutHeight*ee,re=h.layoutWidth*ee,Z=h.deselectedLines.color,Q=h.deselectedLines.opacity,ie=e.extendFlat({key:z,resolution:[K,J],viewBoxPos:[I+ae,D],viewBoxSize:[R,O],i0:P,i1:F,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:G,contextColor:[Z[0]/255,Z[1]/255,Z[2]/255,Q!=="auto"?Z[3]*Q:Math.max(1/255,Math.pow(1/h.lines.color.length,1/3))],scissorX:(S===L?0:I+ae)+(U-ae)+re*he.x[0],scissorWidth:(S===E?K-I+ae:R+.5)+(S===L?I+ae:0),scissorY:D+H+q*he.y[0],scissorHeight:O,viewportX:U-ae+re*he.x[0],viewportY:H+q*he.y[0],viewportWidth:K,viewportHeight:J},Y);return ie}function _(h){var L=i-1,E=Math.max(0,Math.floor(h[0]*L),0),S=Math.min(L,Math.ceil(h[1]*L),L);return[Math.min(E,S),Math.max(E,S)]}N.exports=function(h,L){var E=L.context,S=L.pick,P=L.regl,F=P._gl,I=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,z,G,Y,ee=w(P),j,X=P.texture(v),ae=[];K(L);var he=P({profile:!1,blend:{enable:E,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!E,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:c,frag:A,primitive:"lines",lineWidth:D,attributes:ee,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:X,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function K(Z){O=Z.model,z=Z.viewModel,G=z.dimensions.slice(),Y=G[0]?G[0].values.length:0;var Q=O.lines,ie=S?Q.color.map(function(ne,le){return le/Q.color.length}):Q.color,oe=m(Y,G,ie);M(ee,Y,oe),!E&&!S&&(X=P.texture(e.extendFlat({data:d(O.unitToColor,255)},v)))}function J(Z){var Q,ie,oe,ne=[[],[]];for(oe=0;oe<64;oe++){var le=!Z&&oe<G.length?G[oe].brush.filter.getBounds():[-1/0,1/0];ne[0][oe]=le[0],ne[1][oe]=le[1]}var _e=i*8,fe=new Array(_e);for(Q=0;Q<_e;Q++)fe[Q]=255;if(!Z)for(Q=0;Q<G.length;Q++){var ye=Q%8,xe=(Q-ye)/8,me=Math.pow(2,ye),be=G[Q],ke=be.brush.filter.get();if(!(ke.length<2)){var De=_(ke[0])[1];for(ie=1;ie<ke.length;ie++){var He=_(ke[ie]);for(oe=De+1;oe<He[0];oe++)fe[oe*8+xe]&=~me;De=Math.max(De,He[1])}}}var Ae={shape:[8,i],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:fe};return j?j(Ae):j=P.texture(Ae),{maskTexture:j,maskHeight:i,loA:ne[0].slice(0,16),loB:ne[0].slice(16,32),loC:ne[0].slice(32,48),loD:ne[0].slice(48,64),hiA:ne[1].slice(0,16),hiB:ne[1].slice(16,32),hiC:ne[1].slice(32,48),hiD:ne[1].slice(48,64)}}function U(Z,Q,ie){var oe=Z.length,ne,le,_e,fe=1/0,ye=-1/0;for(ne=0;ne<oe;ne++)Z[ne].dim0.canvasX<fe&&(fe=Z[ne].dim0.canvasX,le=ne),Z[ne].dim1.canvasX>ye&&(ye=Z[ne].dim1.canvasX,_e=ne);oe===0&&o(P,0,0,O.canvasWidth,O.canvasHeight);var xe=J(E);for(ne=0;ne<oe;ne++){var me=Z[ne],be=me.dim0.crossfilterDimensionIndex,ke=me.dim1.crossfilterDimensionIndex,De=me.canvasX,He=me.canvasY,Ae=De+me.panelSizeX,Le=me.plotGlPixelRatio;if(Q||!ae[be]||ae[be][0]!==De||ae[be][1]!==Ae){ae[be]=[De,Ae];var Ze=p(O,le,_e,ne,be,ke,De,He,me.panelSizeX,me.panelSizeY,me.dim0.crossfilterDimensionIndex,E?0:S?2:1,xe,Le);R.clearOnly=ie;var We=Q?O.lines.blockLineCount:Y;b(P,he,R,We,Y,Ze)}}}function H(Z,Q){return P.read({x:Z,y:Q,width:1,height:1,data:r}),r}function q(Z,Q,ie,oe){var ne=new Uint8Array(4*ie*oe);return P.read({x:Z,y:Q,width:ie,height:oe,data:ne}),ne}function re(){h.style["pointer-events"]="none",X.destroy(),j&&j.destroy();for(var Z in ee)ee[Z].destroy()}return{render:U,readPixel:H,readPixels:q,destroy:re,update:K}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(t,N,V){N.exports=function(y,c,A,T){T||(T=1/0);var e,a;for(e=0;e<c.length;e++)a=c[e],a.visible&&(T=Math.min(T,a[A].length));for(T===1/0&&(T=0),y._length=T,e=0;e<c.length;e++)a=c[e],a.visible&&(a._length=T);return T}},{}],908:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=c.numberFormat,T=t("color-rgba"),e=t("../../plots/cartesian/axes"),a=c.strRotate,i=c.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/drawing"),v=t("../../components/colorscale"),s=t("../../lib/gup"),o=s.keyFun,b=s.repeat,g=s.unwrap,d=t("./helpers"),f=t("./constants"),m=t("./axisbrush"),l=t("./lines");function x(j,X,ae){return c.aggNums(j,null,X,ae)}function u(j,X){return w(x(Math.min,j,X),x(Math.max,j,X))}function M(j){var X=j.range;return X?w(X[0],X[1]):u(j.values,j._length)}function w(j,X){return(isNaN(j)||!isFinite(j))&&(j=0),(isNaN(X)||!isFinite(X))&&(X=0),j===X&&(j===0?(j-=1,X+=1):(j*=.9,X*=1.1)),[j,X]}function p(j,X){return X?function(ae,he){var K=X[he];return K==null?j(ae):K}:j}function _(j,X,ae,he,K){var J=M(ae);return he?y.scale.ordinal().domain(he.map(p(A(ae.tickformat),K))).range(he.map(function(U){var H=(U-J[0])/(J[1]-J[0]);return j-X+H*(2*X-j)})):y.scale.linear().domain(J).range([j-X,X])}function h(j,X){return y.scale.linear().range([X,j-X])}function L(j,X){return y.scale.linear().domain(M(j)).range([X,1-X])}function E(j){if(!!j.tickvals){var X=M(j);return y.scale.ordinal().domain(j.tickvals).range(j.tickvals.map(function(ae){return(ae-X[0])/(X[1]-X[0])}))}}function S(j){var X=j.map(function(J){return J[0]}),ae=j.map(function(J){var U=T(J[1]);return y.rgb("rgb("+U[0]+","+U[1]+","+U[2]+")")}),he=function(J){return function(U){return U[J]}},K="rgb".split("").map(function(J){return y.scale.linear().clamp(!0).domain(X).range(ae.map(he(J)))});return function(J){return K.map(function(U){return U(J)})}}function P(j){return j.dimensions.some(function(X){return X.brush.filterSpecified})}function F(j,X,ae){var he=g(X),K=he.trace,J=d.convertTypedArray(he.lineColor),U=K.line,H={color:T(K.unselected.line.color),opacity:K.unselected.line.opacity},q=v.extractOpts(U),re=q.reversescale?v.flipScale(he.cscale):he.cscale,Z=K.domain,Q=K.dimensions,ie=j.width,oe=K.labelangle,ne=K.labelside,le=K.labelfont,_e=K.tickfont,fe=K.rangefont,ye=c.extendDeepNoArrays({},U,{color:J.map(y.scale.linear().domain(M({values:J,range:[q.min,q.max],_length:K._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),xe=Math.floor(ie*(Z.x[1]-Z.x[0])),me=Math.floor(j.height*(Z.y[1]-Z.y[0])),be=j.margin||{l:80,r:80,t:100,b:80},ke=xe,De=me;return{key:ae,colCount:Q.filter(d.isVisible).length,dimensions:Q,tickDistance:f.tickDistance,unitToColor:S(re),lines:ye,deselectedLines:H,labelAngle:oe,labelSide:ne,labelFont:le,tickFont:_e,rangeFont:fe,layoutWidth:ie,layoutHeight:j.height,domain:Z,translateX:Z.x[0]*ie,translateY:j.height-Z.y[1]*j.height,pad:be,canvasWidth:ke*f.canvasPixelRatio+2*ye.canvasOverdrag,canvasHeight:De*f.canvasPixelRatio,width:ke,height:De,canvasPixelRatio:f.canvasPixelRatio}}function I(j,X,ae){var he=ae.width,K=ae.height,J=ae.dimensions,U=ae.canvasPixelRatio,H=function(ie){return he*ie/Math.max(1,ae.colCount-1)},q=f.verticalPadding/K,re=h(K,f.verticalPadding),Z={key:ae.key,xScale:H,model:ae,inBrushDrag:!1},Q={};return Z.dimensions=J.filter(d.isVisible).map(function(ie,oe){var ne=L(ie,q),le=Q[ie.label];Q[ie.label]=(le||0)+1;var _e=ie.label+(le?"__"+le:""),fe=ie.constraintrange,ye=fe&&fe.length;ye&&!Array.isArray(fe[0])&&(fe=[fe]);var xe=ye?fe.map(function(ze){return ze.map(ne)}):[[-1/0,1/0]],me=function(){var ze=Z;ze.focusLayer&&ze.focusLayer.render(ze.panels,!0);var Ie=P(ze);!j.contextShown()&&Ie?(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0),j.contextShown(!0)):j.contextShown()&&!Ie&&(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0,!0),j.contextShown(!1))},be=ie.values;be.length>ie._length&&(be=be.slice(0,ie._length));var ke=ie.tickvals,De;function He(ze,Ie){return{val:ze,text:De[Ie]}}function Ae(ze,Ie){return ze.val-Ie.val}if(Array.isArray(ke)&&ke.length){De=ie.ticktext,!Array.isArray(De)||!De.length?De=ke.map(A(ie.tickformat)):De.length>ke.length?De=De.slice(0,ke.length):ke.length>De.length&&(ke=ke.slice(0,De.length));for(var Le=1;Le<ke.length;Le++)if(ke[Le]<ke[Le-1]){for(var Ze=ke.map(He).sort(Ae),We=0;We<ke.length;We++)ke[We]=Ze[We].val,De[We]=Ze[We].text;break}}else ke=void 0;return be=d.convertTypedArray(be),{key:_e,label:ie.label,tickFormat:ie.tickformat,tickvals:ke,ticktext:De,ordinal:d.isOrdinal(ie),multiselect:ie.multiselect,xIndex:oe,crossfilterDimensionIndex:oe,visibleIndex:ie._index,height:K,values:be,paddedUnitValues:be.map(ne),unitTickvals:ke&&ke.map(ne),xScale:H,x:H(oe),canvasX:H(oe)*U,unitToPaddedPx:re,domainScale:_(K,f.verticalPadding,ie,ke,De),ordinalScale:E(ie),parent:Z,model:ae,brush:m.makeBrush(j,ye,xe,function(){j.linePickActive(!1)},me,function(ze){if(Z.focusLayer.render(Z.panels,!0),Z.pickLayer&&Z.pickLayer.render(Z.panels,!0),j.linePickActive(!0),X&&X.filterChanged){var Ie=ne.invert,Ve=ze.map(function(dt){return dt.map(Ie).sort(c.sorterAsc)}).sort(function(dt,Ft){return dt[0]-Ft[0]});X.filterChanged(Z.key,ie._index,Ve)}})}}),Z}function D(j){j.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var j=!0,X=!1;return{linePickActive:function(ae){return arguments.length?j=!!ae:j},contextShown:function(ae){return arguments.length?X=!!ae:X}}}function O(j,X){var ae=X==="top"?1:-1,he=j*Math.PI/180,K=Math.sin(he),J=Math.cos(he);return{dir:ae,dx:K,dy:J,degrees:j}}function z(j,X,ae){for(var he=X.panels||(X.panels=[]),K=j.data(),J=0;J<K.length-1;J++){var U=he[J]||(he[J]={}),H=K[J],q=K[J+1];U.dim0=H,U.dim1=q,U.canvasX=H.canvasX,U.panelSizeX=q.canvasX-H.canvasX,U.panelSizeY=X.model.canvasHeight,U.y=0,U.canvasY=0,U.plotGlPixelRatio=ae}}function G(j){for(var X=0;X<j.length;X++)for(var ae=0;ae<j[X].length;ae++)for(var he=j[X][ae].trace,K=he.dimensions,J=0;J<K.length;J++){var U=K[J].values,H=K[J]._ax;H&&(H.range?H.range=w(H.range[0],H.range[1]):H.range=u(U,he._length),H.dtick||(H.dtick=.01*(Math.abs(H.range[1]-H.range[0])||1)),H.tickformat=K[J].tickformat,e.calcTicks(H),H.cleanRange())}}function Y(j,X){return e.tickText(j._ax,X,!1).text}function ee(j,X){if(j.ordinal)return"";var ae=j.domainScale.domain(),he=ae[X?ae.length-1:0];return Y(j.model.dimensions[j.visibleIndex],he)}N.exports=function(X,ae,he,K){var J=X._context.staticPlot,U=X._fullLayout,H=U._toppaper,q=U._glcontainer,re=X._context.plotGlPixelRatio,Z=X._fullLayout.paper_bgcolor;G(ae);var Q=R(),ie=ae.filter(function(We){return g(We).trace.visible}).map(F.bind(0,he)).map(I.bind(0,Q,K));q.each(function(We,ze){return c.extendFlat(We,ie[ze])});var oe=q.selectAll(".gl-canvas").each(function(We){We.viewModel=ie[0],We.viewModel.plotGlPixelRatio=re,We.viewModel.paperColor=Z,We.model=We.viewModel?We.viewModel.model:null}),ne=null,le=oe.filter(function(We){return We.pick});le.style("pointer-events",J?"none":"auto").on("mousemove",function(We){if(Q.linePickActive()&&We.lineLayer&&K&&K.hover){var ze=y.event,Ie=this.width,Ve=this.height,dt=y.mouse(this),Ft=dt[0],Qt=dt[1];if(Ft<0||Qt<0||Ft>=Ie||Qt>=Ve)return;var Ot=We.lineLayer.readPixel(Ft,Ve-1-Qt),Ct=Ot[3]!==0,jt=Ct?Ot[2]+256*(Ot[1]+256*Ot[0]):null,Nt={x:Ft,y:Qt,clientX:ze.clientX,clientY:ze.clientY,dataIndex:We.model.key,curveNumber:jt};jt!==ne&&(Ct?K.hover(Nt):K.unhover&&K.unhover(Nt),ne=jt)}}),oe.style("opacity",function(We){return We.pick?0:1}),H.style("background","rgba(255, 255, 255, 0)");var _e=H.selectAll("."+f.cn.parcoords).data(ie,o);_e.exit().remove(),_e.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),_e.attr("transform",function(We){return i(We.model.translateX,We.model.translateY)});var fe=_e.selectAll("."+f.cn.parcoordsControlView).data(b,o);fe.enter().append("g").classed(f.cn.parcoordsControlView,!0),fe.attr("transform",function(We){return i(We.model.pad.l,We.model.pad.t)});var ye=fe.selectAll("."+f.cn.yAxis).data(function(We){return We.dimensions},o);ye.enter().append("g").classed(f.cn.yAxis,!0),fe.each(function(We){z(ye,We,re)}),oe.each(function(We){if(We.viewModel){!We.lineLayer||K?We.lineLayer=l(this,We):We.lineLayer.update(We),(We.key||We.key===0)&&(We.viewModel[We.key]=We.lineLayer);var ze=!We.context||K;We.lineLayer.render(We.viewModel.panels,ze)}}),ye.attr("transform",function(We){return i(We.xScale(We.xIndex),0)}),ye.call(y.behavior.drag().origin(function(We){return We}).on("drag",function(We){var ze=We.parent;Q.linePickActive(!1),We.x=Math.max(-f.overdrag,Math.min(We.model.width+f.overdrag,y.event.x)),We.canvasX=We.x*We.model.canvasPixelRatio,ye.sort(function(Ie,Ve){return Ie.x-Ve.x}).each(function(Ie,Ve){Ie.xIndex=Ve,Ie.x=We===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),z(ye,ze,re),ye.filter(function(Ie){return Math.abs(We.xIndex-Ie.xIndex)!==0}).attr("transform",function(Ie){return i(Ie.xScale(Ie.xIndex),0)}),y.select(this).attr("transform",i(We.x,0)),ye.each(function(Ie,Ve,dt){dt===We.parent.key&&(ze.dimensions[Ve]=Ie)}),ze.contextLayer&&ze.contextLayer.render(ze.panels,!1,!P(ze)),ze.focusLayer.render&&ze.focusLayer.render(ze.panels)}).on("dragend",function(We){var ze=We.parent;We.x=We.xScale(We.xIndex),We.canvasX=We.x*We.model.canvasPixelRatio,z(ye,ze,re),y.select(this).attr("transform",function(Ie){return i(Ie.x,0)}),ze.contextLayer&&ze.contextLayer.render(ze.panels,!1,!P(ze)),ze.focusLayer&&ze.focusLayer.render(ze.panels),ze.pickLayer&&ze.pickLayer.render(ze.panels,!0),Q.linePickActive(!0),K&&K.axesMoved&&K.axesMoved(ze.key,ze.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),ye.exit().remove();var xe=ye.selectAll("."+f.cn.axisOverlays).data(b,o);xe.enter().append("g").classed(f.cn.axisOverlays,!0),xe.selectAll("."+f.cn.axis).remove();var me=xe.selectAll("."+f.cn.axis).data(b,o);me.enter().append("g").classed(f.cn.axis,!0),me.each(function(We){var ze=We.model.height/We.model.tickDistance,Ie=We.domainScale,Ve=Ie.domain();y.select(this).call(y.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(ze,We.tickFormat).tickValues(We.ordinal?Ve:null).tickFormat(function(dt){return d.isOrdinal(We)?dt:Y(We.model.dimensions[We.visibleIndex],dt)}).scale(Ie)),r.font(me.selectAll("text"),We.model.tickFont)}),me.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),me.selectAll("text").style("text-shadow",n.makeTextShadow(Z)).style("cursor","default");var be=xe.selectAll("."+f.cn.axisHeading).data(b,o);be.enter().append("g").classed(f.cn.axisHeading,!0);var ke=be.selectAll("."+f.cn.axisTitle).data(b,o);ke.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",J?"none":"auto"),ke.text(function(We){return We.label}).each(function(We){var ze=y.select(this);r.font(ze,We.model.labelFont),n.convertToTspans(ze,X)}).attr("transform",function(We){var ze=O(We.model.labelAngle,We.model.labelSide),Ie=f.axisTitleOffset;return(ze.dir>0?"":i(0,2*Ie+We.model.height))+a(ze.degrees)+i(-Ie*ze.dx,-Ie*ze.dy)}).attr("text-anchor",function(We){var ze=O(We.model.labelAngle,We.model.labelSide),Ie=Math.abs(ze.dx),Ve=Math.abs(ze.dy);return 2*Ie>Ve?ze.dir*ze.dx<0?"start":"end":"middle"});var De=xe.selectAll("."+f.cn.axisExtent).data(b,o);De.enter().append("g").classed(f.cn.axisExtent,!0);var He=De.selectAll("."+f.cn.axisExtentTop).data(b,o);He.enter().append("g").classed(f.cn.axisExtentTop,!0),He.attr("transform",i(0,-f.axisExtentOffset));var Ae=He.selectAll("."+f.cn.axisExtentTopText).data(b,o);Ae.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(D),Ae.text(function(We){return ee(We,!0)}).each(function(We){r.font(y.select(this),We.model.rangeFont)});var Le=De.selectAll("."+f.cn.axisExtentBottom).data(b,o);Le.enter().append("g").classed(f.cn.axisExtentBottom,!0),Le.attr("transform",function(We){return i(0,We.model.height+f.axisExtentOffset)});var Ze=Le.selectAll("."+f.cn.axisExtentBottomText).data(b,o);Ze.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Ze.text(function(We){return ee(We,!1)}).each(function(We){r.font(y.select(this),We.model.rangeFont)}),m.ensureAxisBrush(xe,Z,X)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(t,N,i){var y=t("./parcoords"),c=t("../../lib/prepare_regl"),A=t("./helpers").isVisible,T={};function e(n,r,v){var s=r.indexOf(v),o=n.indexOf(s);return o===-1&&(o+=r.length),o}function a(n,r){return function(s,o){return e(n,r,s)-e(n,r,o)}}var i=N.exports=function(r,v){var s=r._fullLayout,o=c(r,[],T);if(!!o){var b={},g={},d={},f={},m=s._size;v.forEach(function(w,p){var _=w[0].trace;d[p]=_.index;var h=f[p]=_._fullInput.index;b[p]=r.data[h].dimensions,g[p]=r.data[h].dimensions.slice()});var l=function(w,p,_){var h=g[w][p],L=_.map(function(D){return D.slice()}),E="dimensions["+p+"].constraintrange",S=s._tracePreGUI[r._fullData[d[w]]._fullInput.uid];if(S[E]===void 0){var P=h.constraintrange;S[E]=P||null}var F=r._fullData[d[w]].dimensions[p];L.length?(L.length===1&&(L=L[0]),h.constraintrange=L,F.constraintrange=L.slice(),L=[L]):(delete h.constraintrange,delete F.constraintrange,L=null);var I={};I[E]=L,r.emit("plotly_restyle",[I,[f[w]]])},x=function(w){r.emit("plotly_hover",w)},u=function(w){r.emit("plotly_unhover",w)},M=function(w,p){var _=a(p,g[w].filter(A));b[w].sort(_),g[w].filter(function(h){return!A(h)}).sort(function(h){return g[w].indexOf(h)}).forEach(function(h){b[w].splice(b[w].indexOf(h),1),b[w].splice(g[w].indexOf(h),0,h)}),r.emit("plotly_restyle",[{dimensions:[b[w]]},[f[w]]])};y(r,v,{width:m.w,height:m.h,margin:{t:m.t,r:m.r,b:m.b,l:m.l}},{filterChanged:l,hover:x,unhover:u,axesMoved:M})}};i.reglPrecompiled=T},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(t,N,V){var y=t("../../plots/attributes"),c=t("../../plots/domain").attributes,A=t("../../plots/font_attributes"),T=t("../../components/color/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../lib/extend").extendFlat,n=A({editType:"plot",arrayOk:!0,colorEditType:"plot"});N.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:i({},y.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:i({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:i({},n,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:c({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:i({},n,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(t,N,V){var y=t("../../plots/plots");V.name="pie",V.plot=function(c,A,T,e){y.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){y.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],912:[function(t,N,V){var y=t("fast-isnumeric"),c=t("tinycolor2"),A=t("../../components/color"),T={};function e(r,v){var s=[],o=r._fullLayout,b=o.hiddenlabels||[],g=v.labels,d=v.marker.colors||[],f=v.values,m=v._length,l=v._hasValues&&m,x,u;if(v.dlabel)for(g=new Array(m),x=0;x<m;x++)g[x]=String(v.label0+x*v.dlabel);var M={},w=a(o["_"+v.type+"colormap"]),p=0,_=!1;for(x=0;x<m;x++){var h,L,E;if(l){if(h=f[x],!y(h))continue;h=+h}else h=1;L=g[x],(L===void 0||L==="")&&(L=x),L=String(L);var S=M[L];S===void 0?(M[L]=s.length,E=b.indexOf(L)!==-1,E||(p+=h),s.push({v:h,label:L,color:w(d[x],L),i:x,pts:[x],hidden:E})):(_=!0,u=s[S],u.v+=h,u.pts.push(x),u.hidden||(p+=h),u.color===!1&&d[x]&&(u.color=w(d[x],L)))}s=s.filter(function(F){return F.v>=0});var P=v.type==="funnelarea"?_:v.sort;return P&&s.sort(function(F,I){return I.v-F.v}),s[0]&&(s[0].vTotal=p),s}function a(r){return function(s,o){return!s||(s=c(s),!s.isValid())?!1:(s=A.addOpacity(s,s.getAlpha()),r[o]||(r[o]=s),s)}}function i(r,v){var s=(v||{}).type;s||(s="pie");var o=r._fullLayout,b=r.calcdata,g=o[s+"colorway"],d=o["_"+s+"colormap"];o["extend"+s+"colors"]&&(g=n(g,T));for(var f=0,m=0;m<b.length;m++){var l=b[m],x=l[0].trace.type;if(x===s)for(var u=0;u<l.length;u++){var M=l[u];M.color===!1&&(d[M.label]?M.color=d[M.label]:(d[M.label]=M.color=g[f%g.length],f++))}}}function n(r,v){var s,o=JSON.stringify(r),b=v[o];if(!b){for(b=r.slice(),s=0;s<r.length;s++)b.push(c(r[s]).lighten(20).toHexString());for(s=0;s<r.length;s++)b.push(c(r[s]).darken(20).toHexString());v[o]=b}return b}N.exports={calc:e,crossTraceCalc:i,makePullColorFn:a,generateExtendedColors:n}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("./attributes"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText;function a(n,r){var v=Array.isArray(n),s=c.isArrayOrTypedArray(r),o=Math.min(v?n.length:1/0,s?r.length:1/0);if(isFinite(o)||(o=0),o&&s){for(var b,g=0;g<o;g++){var d=r[g];if(y(d)&&d>0){b=!0;break}}b||(o=0)}return{hasLabels:v,hasValues:s,len:o}}function i(n,r,v,s){function o(E,S){return c.coerce(n,r,A,E,S)}var b=o("labels"),g=o("values"),d=a(b,g),f=d.len;if(r._hasLabels=d.hasLabels,r._hasValues=d.hasValues,!r._hasLabels&&r._hasValues&&(o("label0"),o("dlabel")),!f){r.visible=!1;return}r._length=f;var m=o("marker.line.width");m&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var l=o("text"),x=o("texttemplate"),u;if(x||(u=o("textinfo",Array.isArray(l)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),x||u&&u!=="none"){var M=o("textposition");e(n,r,s,o,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var w=Array.isArray(M)||M==="auto",p=w||M==="outside";p&&o("automargin"),(M==="inside"||M==="auto"||Array.isArray(M))&&o("insidetextorientation")}T(r,s,o);var _=o("hole"),h=o("title.text");if(h){var L=o("title.position",_?"middle center":"top center");!_&&L==="middle center"&&(r.title.position="top center"),c.coerceFont(o,"title.font",s.font)}o("sort"),o("direction"),o("rotation"),o("pull")}N.exports={handleLabelsAndValues:a,supplyDefaults:i}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(t,N,V){var y=t("../../components/fx/helpers").appendArrayMultiPointValues;N.exports=function(A,T){var e={curveNumber:T.index,pointNumbers:A.pts,data:T._input,fullData:T,label:A.label,color:A.color,value:A.v,percent:A.percent,text:A.text,bbox:A.bbox,v:A.v};return A.pts.length===1&&(e.pointNumber=e.i=A.pts[0]),y(e,T,A.pts),T.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":403}],915:[function(t,N,V){var y=t("../../lib");function c(A){return A.indexOf("e")!==-1?A.replace(/[.]?0+e/,"e"):A.indexOf(".")!==-1?A.replace(/[.]?0+$/,""):A}V.formatPiePercent=function(T,e){var a=c((T*100).toPrecision(3));return y.numSeparate(a,e)+"%"},V.formatPieValue=function(T,e){var a=c(T.toPrecision(10));return y.numSeparate(a,e)},V.getFirstFilled=function(T,e){if(!!Array.isArray(T))for(var a=0;a<e.length;a++){var i=T[e[a]];if(i||i===0||i==="")return i}},V.castOption=function(T,e){if(Array.isArray(T))return V.getFirstFilled(T,e);if(T)return T},V.getRotationAngle=function(A){return(A==="auto"?0:A)*Math.PI/180}},{"../../lib":515}],916:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,supplyLayoutDefaults:t("./layout_defaults"),layoutAttributes:t("./layout_attributes"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style"),styleOne:t("./style_one"),moduleType:"trace",name:"pie",basePlotModule:t("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(t,N,V){N.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return y.coerce(T,e,c,i,n)}a("hiddenlabels"),a("piecolorway",e.colorway),a("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../plots/plots"),A=t("../../components/fx"),T=t("../../components/color"),e=t("../../components/drawing"),a=t("../../lib"),i=a.strScale,n=a.strTranslate,r=t("../../lib/svg_text_utils"),v=t("../bar/uniform_text"),s=v.recordMinTextSize,o=v.clearMinTextSize,b=t("../bar/constants").TEXTPAD,g=t("./helpers"),d=t("./event_data"),f=t("../../lib").isValidTextValue;function m(J,U){var H=J._context.staticPlot,q=J._fullLayout,re=q._size;o("pie",q),w(U,J),ee(U,re);var Z=a.makeTraceGroups(q._pielayer,U,"trace").each(function(Q){var ie=y.select(this),oe=Q[0],ne=oe.trace;X(Q),ie.attr("stroke-linejoin","round"),ie.each(function(){var le=y.select(this).selectAll("g.slice").data(Q);le.enter().append("g").classed("slice",!0),le.exit().remove();var _e=[[[],[]],[[],[]]],fe=!1;le.each(function(Ae,Le){if(Ae.hidden){y.select(this).selectAll("path,g").remove();return}Ae.pointNumber=Ae.i,Ae.curveNumber=ne.index,_e[Ae.pxmid[1]<0?0:1][Ae.pxmid[0]<0?0:1].push(Ae);var Ze=oe.cx,We=oe.cy,ze=y.select(this),Ie=ze.selectAll("path.surface").data([Ae]);if(Ie.enter().append("path").classed("surface",!0).style({"pointer-events":H?"none":"all"}),ze.call(x,J,Q),ne.pull){var Ve=+g.castOption(ne.pull,Ae.pts)||0;Ve>0&&(Ze+=Ve*Ae.pxmid[0],We+=Ve*Ae.pxmid[1])}Ae.cxFinal=Ze,Ae.cyFinal=We;function dt(Lt,Xe,it,Ye){var Ee=Ye*(Xe[0]-Lt[0]),Ge=Ye*(Xe[1]-Lt[1]);return"a"+Ye*oe.r+","+Ye*oe.r+" 0 "+Ae.largeArc+(it?" 1 ":" 0 ")+Ee+","+Ge}var Ft=ne.hole;if(Ae.v===oe.vTotal){var Qt="M"+(Ze+Ae.px0[0])+","+(We+Ae.px0[1])+dt(Ae.px0,Ae.pxmid,!0,1)+dt(Ae.pxmid,Ae.px0,!0,1)+"Z";Ft?Ie.attr("d","M"+(Ze+Ft*Ae.px0[0])+","+(We+Ft*Ae.px0[1])+dt(Ae.px0,Ae.pxmid,!1,Ft)+dt(Ae.pxmid,Ae.px0,!1,Ft)+"Z"+Qt):Ie.attr("d",Qt)}else{var Ot=dt(Ae.px0,Ae.px1,!0,1);if(Ft){var Ct=1-Ft;Ie.attr("d","M"+(Ze+Ft*Ae.px1[0])+","+(We+Ft*Ae.px1[1])+dt(Ae.px1,Ae.px0,!1,Ft)+"l"+Ct*Ae.px0[0]+","+Ct*Ae.px0[1]+Ot+"Z")}else Ie.attr("d","M"+Ze+","+We+"l"+Ae.px0[0]+","+Ae.px0[1]+Ot+"Z")}he(J,Ae,oe);var jt=g.castOption(ne.textposition,Ae.pts),Nt=ze.selectAll("g.slicetext").data(Ae.text&&jt!=="none"?[0]:[]);Nt.enter().append("g").classed("slicetext",!0),Nt.exit().remove(),Nt.each(function(){var Lt=a.ensureSingle(y.select(this),"text","",function(At){At.attr("data-notex",1)}),Xe=a.ensureUniformFontSize(J,jt==="outside"?u(ne,Ae,q.font):M(ne,Ae,q.font));Lt.text(Ae.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Xe).call(r.convertToTspans,J);var it=e.bBox(Lt.node()),Ye;if(jt==="outside")Ye=I(it,Ae);else if(Ye=p(it,Ae,oe),jt==="auto"&&Ye.scale<1){var Ee=a.ensureUniformFontSize(J,ne.outsidetextfont);Lt.call(e.font,Ee),it=e.bBox(Lt.node()),Ye=I(it,Ae)}var Ge=Ye.textPosAngle,Ke=Ge===void 0?Ae.pxmid:ae(oe.r,Ge);if(Ye.targetX=Ze+Ke[0]*Ye.rCenter+(Ye.x||0),Ye.targetY=We+Ke[1]*Ye.rCenter+(Ye.y||0),K(Ye,it),Ye.outside){var qe=Ye.targetY;Ae.yLabelMin=qe-it.height/2,Ae.yLabelMid=qe,Ae.yLabelMax=qe+it.height/2,Ae.labelExtraX=0,Ae.labelExtraY=0,fe=!0}Ye.fontSize=Xe.size,s(ne.type,Ye,q),Q[Le].transform=Ye,a.setTransormAndDisplay(Lt,Ye)})});var ye=y.select(this).selectAll("g.titletext").data(ne.title.text?[0]:[]);if(ye.enter().append("g").classed("titletext",!0),ye.exit().remove(),ye.each(function(){var Ae=a.ensureSingle(y.select(this),"text","",function(We){We.attr("data-notex",1)}),Le=ne.title.text;ne._meta&&(Le=a.templateString(Le,ne._meta)),Ae.text(Le).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ne.title.font).call(r.convertToTspans,J);var Ze;ne.title.position==="middle center"?Ze=D(oe):Ze=R(oe,re),Ae.attr("transform",n(Ze.x,Ze.y)+i(Math.min(1,Ze.scale))+n(Ze.tx,Ze.ty))}),fe&&Y(_e,ne),l(le,ne),fe&&ne.automargin){var xe=e.bBox(ie.node()),me=ne.domain,be=re.w*(me.x[1]-me.x[0]),ke=re.h*(me.y[1]-me.y[0]),De=(.5*be-oe.r)/re.w,He=(.5*ke-oe.r)/re.h;c.autoMargin(J,"pie."+ne.uid+".automargin",{xl:me.x[0]-De,xr:me.x[1]+De,yb:me.y[0]-He,yt:me.y[1]+He,l:Math.max(oe.cx-oe.r-xe.left,0),r:Math.max(xe.right-(oe.cx+oe.r),0),b:Math.max(xe.bottom-(oe.cy+oe.r),0),t:Math.max(oe.cy-oe.r-xe.top,0),pad:5})}})});setTimeout(function(){Z.selectAll("tspan").each(function(){var Q=y.select(this);Q.attr("dy")&&Q.attr("dy",Q.attr("dy"))})},0)}function l(J,U){J.each(function(H){var q=y.select(this);if(!H.labelExtraX&&!H.labelExtraY){q.select("path.textline").remove();return}var re=q.select("g.slicetext text");H.transform.targetX+=H.labelExtraX,H.transform.targetY+=H.labelExtraY,a.setTransormAndDisplay(re,H.transform);var Z=H.cxFinal+H.pxmid[0],Q=H.cyFinal+H.pxmid[1],ie="M"+Z+","+Q,oe=(H.yLabelMax-H.yLabelMin)*(H.pxmid[0]<0?-1:1)/4;if(H.labelExtraX){var ne=H.labelExtraX*H.pxmid[1]/H.pxmid[0],le=H.yLabelMid+H.labelExtraY-(H.cyFinal+H.pxmid[1]);Math.abs(ne)>Math.abs(le)?ie+="l"+le*H.pxmid[0]/H.pxmid[1]+","+le+"H"+(Z+H.labelExtraX+oe):ie+="l"+H.labelExtraX+","+ne+"v"+(le-ne)+"h"+oe}else ie+="V"+(H.yLabelMid+H.labelExtraY)+"h"+oe;a.ensureSingle(q,"path","textline").call(T.stroke,U.outsidetextfont.color).attr({"stroke-width":Math.min(2,U.outsidetextfont.size/8),d:ie,fill:"none"})})}function x(J,U,H){var q=H[0],re=q.cx,Z=q.cy,Q=q.trace,ie=Q.type==="funnelarea";"_hasHoverLabel"in Q||(Q._hasHoverLabel=!1),"_hasHoverEvent"in Q||(Q._hasHoverEvent=!1),J.on("mouseover",function(oe){var ne=U._fullLayout,le=U._fullData[Q.index];if(!(U._dragging||ne.hovermode===!1)){var _e=le.hoverinfo;if(Array.isArray(_e)&&(_e=A.castHoverinfo({hoverinfo:[g.castOption(_e,oe.pts)],_module:Q._module},ne,0)),_e==="all"&&(_e="label+text+value+percent+name"),le.hovertemplate||_e!=="none"&&_e!=="skip"&&_e){var fe=oe.rInscribed||0,ye=re+oe.pxmid[0]*(1-fe),xe=Z+oe.pxmid[1]*(1-fe),me=ne.separators,be=[];if(_e&&_e.indexOf("label")!==-1&&be.push(oe.label),oe.text=g.castOption(le.hovertext||le.text,oe.pts),_e&&_e.indexOf("text")!==-1){var ke=oe.text;a.isValidTextValue(ke)&&be.push(ke)}oe.value=oe.v,oe.valueLabel=g.formatPieValue(oe.v,me),_e&&_e.indexOf("value")!==-1&&be.push(oe.valueLabel),oe.percent=oe.v/q.vTotal,oe.percentLabel=g.formatPiePercent(oe.percent,me),_e&&_e.indexOf("percent")!==-1&&be.push(oe.percentLabel);var De=le.hoverlabel,He=De.font,Ae=[];A.loneHover({trace:Q,x0:ye-fe*q.r,x1:ye+fe*q.r,y:xe,_x0:ie?re+oe.TL[0]:ye-fe*q.r,_x1:ie?re+oe.TR[0]:ye+fe*q.r,_y0:ie?Z+oe.TL[1]:xe-fe*q.r,_y1:ie?Z+oe.BL[1]:xe+fe*q.r,text:be.join("<br>"),name:le.hovertemplate||_e.indexOf("name")!==-1?le.name:void 0,idealAlign:oe.pxmid[0]<0?"left":"right",color:g.castOption(De.bgcolor,oe.pts)||oe.color,borderColor:g.castOption(De.bordercolor,oe.pts),fontFamily:g.castOption(He.family,oe.pts),fontSize:g.castOption(He.size,oe.pts),fontColor:g.castOption(He.color,oe.pts),nameLength:g.castOption(De.namelength,oe.pts),textAlign:g.castOption(De.align,oe.pts),hovertemplate:g.castOption(le.hovertemplate,oe.pts),hovertemplateLabels:oe,eventData:[d(oe,le)]},{container:ne._hoverlayer.node(),outerContainer:ne._paper.node(),gd:U,inOut_bbox:Ae}),oe.bbox=Ae[0],Q._hasHoverLabel=!0}Q._hasHoverEvent=!0,U.emit("plotly_hover",{points:[d(oe,le)],event:y.event})}}),J.on("mouseout",function(oe){var ne=U._fullLayout,le=U._fullData[Q.index],_e=y.select(this).datum();Q._hasHoverEvent&&(oe.originalEvent=y.event,U.emit("plotly_unhover",{points:[d(_e,le)],event:y.event}),Q._hasHoverEvent=!1),Q._hasHoverLabel&&(A.loneUnhover(ne._hoverlayer.node()),Q._hasHoverLabel=!1)}),J.on("click",function(oe){var ne=U._fullLayout,le=U._fullData[Q.index];U._dragging||ne.hovermode===!1||(U._hoverdata=[d(oe,le)],A.click(U,y.event))})}function u(J,U,H){var q=g.castOption(J.outsidetextfont.color,U.pts)||g.castOption(J.textfont.color,U.pts)||H.color,re=g.castOption(J.outsidetextfont.family,U.pts)||g.castOption(J.textfont.family,U.pts)||H.family,Z=g.castOption(J.outsidetextfont.size,U.pts)||g.castOption(J.textfont.size,U.pts)||H.size;return{color:q,family:re,size:Z}}function M(J,U,H){var q=g.castOption(J.insidetextfont.color,U.pts);!q&&J._input.textfont&&(q=g.castOption(J._input.textfont.color,U.pts));var re=g.castOption(J.insidetextfont.family,U.pts)||g.castOption(J.textfont.family,U.pts)||H.family,Z=g.castOption(J.insidetextfont.size,U.pts)||g.castOption(J.textfont.size,U.pts)||H.size;return{color:q||T.contrast(U.color),family:re,size:Z}}function w(J,U){for(var H,q,re=0;re<J.length;re++)if(H=J[re][0],q=H.trace,q.title.text){var Z=q.title.text;q._meta&&(Z=a.templateString(Z,q._meta));var Q=e.tester.append("text").attr("data-notex",1).text(Z).call(e.font,q.title.font).call(r.convertToTspans,U),ie=e.bBox(Q.node(),!0);H.titleBox={width:ie.width,height:ie.height},Q.remove()}}function p(J,U,H){var q=H.r||U.rpx1,re=U.rInscribed,Z=U.startangle===U.stopangle;if(Z)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var Q=U.ring,ie=Q===1&&Math.abs(U.startangle-U.stopangle)===Math.PI*2,oe=U.halfangle,ne=U.midangle,le=H.trace.insidetextorientation,_e=le==="horizontal",fe=le==="tangential",ye=le==="radial",xe=le==="auto",me=[],be;if(!xe){var ke=function(ze,Ie){if(_(U,ze)){var Ve=Math.abs(ze-U.startangle),dt=Math.abs(ze-U.stopangle),Ft=Ve<dt?Ve:dt;Ie==="tan"?be=L(J,q,Q,Ft,0):be=h(J,q,Q,Ft,Math.PI/2),be.textPosAngle=ze,me.push(be)}},De;if(_e||fe){for(De=4;De>=-4;De-=2)ke(Math.PI*De,"tan");for(De=4;De>=-4;De-=2)ke(Math.PI*(De+1),"tan")}if(_e||ye){for(De=4;De>=-4;De-=2)ke(Math.PI*(De+1.5),"rad");for(De=4;De>=-4;De-=2)ke(Math.PI*(De+.5),"rad")}}if(ie||xe||_e){var He=Math.sqrt(J.width*J.width+J.height*J.height);if(be={scale:re*q*2/He,rCenter:1-re,rotate:0},be.textPosAngle=(U.startangle+U.stopangle)/2,be.scale>=1)return be;me.push(be)}(xe||ye)&&(be=h(J,q,Q,oe,ne),be.textPosAngle=(U.startangle+U.stopangle)/2,me.push(be)),(xe||fe)&&(be=L(J,q,Q,oe,ne),be.textPosAngle=(U.startangle+U.stopangle)/2,me.push(be));for(var Ae=0,Le=0,Ze=0;Ze<me.length;Ze++){var We=me[Ze].scale;if(Le<We&&(Le=We,Ae=Ze),!xe&&Le>=1)break}return me[Ae]}function _(J,U){var H=J.startangle,q=J.stopangle;return H>U&&U>q||H<U&&U<q}function h(J,U,H,q,re){U=Math.max(0,U-2*b);var Z=J.width/J.height,Q=P(Z,q,U,H);return{scale:Q*2/J.height,rCenter:E(Z,Q/U),rotate:S(re)}}function L(J,U,H,q,re){U=Math.max(0,U-2*b);var Z=J.height/J.width,Q=P(Z,q,U,H);return{scale:Q*2/J.width,rCenter:E(Z,Q/U),rotate:S(re+Math.PI/2)}}function E(J,U){return Math.cos(U)-J*U}function S(J){return(180/Math.PI*J+720)%180-90}function P(J,U,H,q){var re=J+1/(2*Math.tan(U));return H*Math.min(1/(Math.sqrt(re*re+.5)+re),q/(Math.sqrt(J*J+q/2)+J))}function F(J,U){return J.v===U.vTotal&&!U.trace.hole?1:Math.min(1/(1+1/Math.sin(J.halfangle)),J.ring/2)}function I(J,U){var H=U.pxmid[0],q=U.pxmid[1],re=J.width/2,Z=J.height/2;return H<0&&(re*=-1),q<0&&(Z*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(Z)*(re>0?1:-1)/2,y:Z/(1+H*H/(q*q)),outside:!0}}function D(J){var U=Math.sqrt(J.titleBox.width*J.titleBox.width+J.titleBox.height*J.titleBox.height);return{x:J.cx,y:J.cy,scale:J.trace.hole*J.r*2/U,tx:0,ty:-J.titleBox.height/2+J.trace.title.font.size}}function R(J,U){var H=1,q=1,re,Z=J.trace,Q={x:J.cx,y:J.cy},ie={tx:0,ty:0};ie.ty+=Z.title.font.size,re=G(Z),Z.title.position.indexOf("top")!==-1?(Q.y-=(1+re)*J.r,ie.ty-=J.titleBox.height):Z.title.position.indexOf("bottom")!==-1&&(Q.y+=(1+re)*J.r);var oe=O(J.r,J.trace.aspectratio),ne=U.w*(Z.domain.x[1]-Z.domain.x[0])/2;return Z.title.position.indexOf("left")!==-1?(ne=ne+oe,Q.x-=(1+re)*oe,ie.tx+=J.titleBox.width/2):Z.title.position.indexOf("center")!==-1?ne*=2:Z.title.position.indexOf("right")!==-1&&(ne=ne+oe,Q.x+=(1+re)*oe,ie.tx-=J.titleBox.width/2),H=ne/J.titleBox.width,q=z(J,U)/J.titleBox.height,{x:Q.x,y:Q.y,scale:Math.min(H,q),tx:ie.tx,ty:ie.ty}}function O(J,U){return J/(U===void 0?1:U)}function z(J,U){var H=J.trace,q=U.h*(H.domain.y[1]-H.domain.y[0]);return Math.min(J.titleBox.height,q/2)}function G(J){var U=J.pull;if(!U)return 0;var H;if(Array.isArray(U))for(U=0,H=0;H<J.pull.length;H++)J.pull[H]>U&&(U=J.pull[H]);return U}function Y(J,U){var H,q,re,Z,Q,ie,oe,ne,le,_e,fe,ye,xe;function me(He,Ae){return He.pxmid[1]-Ae.pxmid[1]}function be(He,Ae){return Ae.pxmid[1]-He.pxmid[1]}function ke(He,Ae){Ae||(Ae={});var Le=Ae.labelExtraY+(q?Ae.yLabelMax:Ae.yLabelMin),Ze=q?He.yLabelMin:He.yLabelMax,We=q?He.yLabelMax:He.yLabelMin,ze=He.cyFinal+Q(He.px0[1],He.px1[1]),Ie=Le-Ze,Ve,dt,Ft,Qt,Ot,Ct;if(Ie*oe>0&&(He.labelExtraY=Ie),!!Array.isArray(U.pull))for(dt=0;dt<_e.length;dt++)Ft=_e[dt],!(Ft===He||(g.castOption(U.pull,He.pts)||0)>=(g.castOption(U.pull,Ft.pts)||0))&&((He.pxmid[1]-Ft.pxmid[1])*oe>0?(Qt=Ft.cyFinal+Q(Ft.px0[1],Ft.px1[1]),Ie=Qt-Ze-He.labelExtraY,Ie*oe>0&&(He.labelExtraY+=Ie)):(We+He.labelExtraY-ze)*oe>0&&(Ve=3*ie*Math.abs(dt-_e.indexOf(He)),Ot=Ft.cxFinal+Z(Ft.px0[0],Ft.px1[0]),Ct=Ot+Ve-(He.cxFinal+He.pxmid[0])-He.labelExtraX,Ct*ie>0&&(He.labelExtraX+=Ct)))}for(q=0;q<2;q++)for(re=q?me:be,Q=q?Math.max:Math.min,oe=q?1:-1,H=0;H<2;H++){for(Z=H?Math.max:Math.min,ie=H?1:-1,ne=J[q][H],ne.sort(re),le=J[1-q][H],_e=le.concat(ne),ye=[],fe=0;fe<ne.length;fe++)ne[fe].yLabelMid!==void 0&&ye.push(ne[fe]);for(xe=!1,fe=0;q&&fe<le.length;fe++)if(le[fe].yLabelMid!==void 0){xe=le[fe];break}for(fe=0;fe<ye.length;fe++){var De=fe&&ye[fe-1];xe&&!fe&&(De=xe),ke(ye[fe],De)}}}function ee(J,U){for(var H=[],q=0;q<J.length;q++){var re=J[q][0],Z=re.trace,Q=Z.domain,ie=U.w*(Q.x[1]-Q.x[0]),oe=U.h*(Q.y[1]-Q.y[0]);Z.title.text&&Z.title.position!=="middle center"&&(oe-=z(re,U));var ne=ie/2,le=oe/2;Z.type==="funnelarea"&&!Z.scalegroup&&(le/=Z.aspectratio),re.r=Math.min(ne,le)/(1+G(Z)),re.cx=U.l+U.w*(Z.domain.x[1]+Z.domain.x[0])/2,re.cy=U.t+U.h*(1-Z.domain.y[0])-oe/2,Z.title.text&&Z.title.position.indexOf("bottom")!==-1&&(re.cy-=z(re,U)),Z.scalegroup&&H.indexOf(Z.scalegroup)===-1&&H.push(Z.scalegroup)}j(J,H)}function j(J,U){for(var H,q,re,Z=0;Z<U.length;Z++){var Q=1/0,ie=U[Z];for(q=0;q<J.length;q++)if(H=J[q][0],re=H.trace,re.scalegroup===ie){var oe;if(re.type==="pie")oe=H.r*H.r;else if(re.type==="funnelarea"){var ne,le;re.aspectratio>1?(ne=H.r,le=ne/re.aspectratio):(le=H.r,ne=le*re.aspectratio),ne*=(1+re.baseratio)/2,oe=ne*le}Q=Math.min(Q,oe/H.vTotal)}for(q=0;q<J.length;q++)if(H=J[q][0],re=H.trace,re.scalegroup===ie){var _e=Q*H.vTotal;re.type==="funnelarea"&&(_e/=(1+re.baseratio)/2,_e/=re.aspectratio),H.r=Math.sqrt(_e)}}}function X(J){var U=J[0],H=U.r,q=U.trace,re=g.getRotationAngle(q.rotation),Z=2*Math.PI/U.vTotal,Q="px0",ie="px1",oe,ne,le;if(q.direction==="counterclockwise"){for(oe=0;oe<J.length&&J[oe].hidden;oe++);if(oe===J.length)return;re+=Z*J[oe].v,Z*=-1,Q="px1",ie="px0"}for(le=ae(H,re),oe=0;oe<J.length;oe++)ne=J[oe],!ne.hidden&&(ne[Q]=le,ne.startangle=re,re+=Z*ne.v/2,ne.pxmid=ae(H,re),ne.midangle=re,re+=Z*ne.v/2,le=ae(H,re),ne.stopangle=re,ne[ie]=le,ne.largeArc=ne.v>U.vTotal/2?1:0,ne.halfangle=Math.PI*Math.min(ne.v/U.vTotal,.5),ne.ring=1-q.hole,ne.rInscribed=F(ne,U))}function ae(J,U){return[J*Math.sin(U),-J*Math.cos(U)]}function he(J,U,H){var q=J._fullLayout,re=H.trace,Z=re.texttemplate,Q=re.textinfo;if(!Z&&Q&&Q!=="none"){var ie=Q.split("+"),oe=function(Ae){return ie.indexOf(Ae)!==-1},ne=oe("label"),le=oe("text"),_e=oe("value"),fe=oe("percent"),ye=q.separators,xe;if(xe=ne?[U.label]:[],le){var me=g.getFirstFilled(re.text,U.pts);f(me)&&xe.push(me)}_e&&xe.push(g.formatPieValue(U.v,ye)),fe&&xe.push(g.formatPiePercent(U.v/H.vTotal,ye)),U.text=xe.join("<br>")}function be(Ae){return{label:Ae.label,value:Ae.v,valueLabel:g.formatPieValue(Ae.v,q.separators),percent:Ae.v/H.vTotal,percentLabel:g.formatPiePercent(Ae.v/H.vTotal,q.separators),color:Ae.color,text:Ae.text,customdata:a.castOption(re,Ae.i,"customdata")}}if(Z){var ke=a.castOption(re,U.i,"texttemplate");if(!ke)U.text="";else{var De=be(U),He=g.getFirstFilled(re.text,U.pts);(f(He)||He==="")&&(De.text=He),U.text=a.texttemplateString(ke,De,J._fullLayout._d3locale,De,re._meta||{})}}}function K(J,U){var H=J.rotate*Math.PI/180,q=Math.cos(H),re=Math.sin(H),Z=(U.left+U.right)/2,Q=(U.top+U.bottom)/2;J.textX=Z*q-Q*re,J.textY=Z*re+Q*q,J.noCenter=!0}N.exports={plot:m,formatSliceLabel:he,transformInsideText:p,determineInsideTextFont:M,positionTitleOutside:R,prerenderTitles:w,layoutAreas:ee,attachFxHandlers:x,computeTransform:K}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(t,N,V){var y=t("@plotly/d3"),c=t("./style_one"),A=t("../bar/uniform_text").resizeText;N.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");A(e,a,"pie"),a.each(function(i){var n=i[0],r=n.trace,v=y.select(this);v.style({opacity:r.opacity}),v.selectAll("path.surface").each(function(s){y.select(this).call(c,s,r)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(t,N,V){var y=t("../../components/color"),c=t("./helpers").castOption;N.exports=function(T,e,a){var i=a.marker.line,n=c(i.color,e.pts)||y.defaultLine,r=c(i.width,e.pts)||0;T.style("stroke-width",r).call(y.fill,e.color).call(y.stroke,n)}},{"../../components/color":367,"./helpers":915}],922:[function(t,N,V){var y=t("../scatter/attributes");N.exports={x:y.x,y:y.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:y.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(t,N,V){var y=t("../../../stackgl_modules").gl_pointcloud2d,c=t("../../lib/str2rgbarray"),A=t("../../plots/cartesian/autorange").findExtremes,T=t("../scatter/get_trace_color");function e(n,r){this.scene=n,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=y(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=e.prototype;a.handlePick=function(n){var r=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},a.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=T(n,{})},a.updateFast=function(n){var r=this.xData=this.pickXData=n.x,v=this.yData=this.pickYData=n.y,s=this.pickXYData=n.xy,o=n.xbounds&&n.ybounds,b=n.indices,g,d,f,m=this.bounds,l,x,u;if(s){if(f=s,g=s.length>>>1,o)m[0]=n.xbounds[0],m[2]=n.xbounds[1],m[1]=n.ybounds[0],m[3]=n.ybounds[1];else for(u=0;u<g;u++)l=f[u*2],x=f[u*2+1],l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),x<m[1]&&(m[1]=x),x>m[3]&&(m[3]=x);if(b)d=b;else for(d=new Int32Array(g),u=0;u<g;u++)d[u]=u}else for(g=r.length,f=new Float32Array(2*g),d=new Int32Array(g),u=0;u<g;u++)l=r[u],x=v[u],d[u]=u,f[u*2]=l,f[u*2+1]=x,l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),x<m[1]&&(m[1]=x),x>m[3]&&(m[3]=x);this.idToIndex=d,this.pointcloudOptions.idToIndex=d,this.pointcloudOptions.positions=f;var M=c(n.marker.color),w=c(n.marker.border.color),p=n.opacity*n.marker.opacity;M[3]*=p,this.pointcloudOptions.color=M;var _=n.marker.blend;if(_===null){var h=100;_=r.length<h||v.length<h}this.pointcloudOptions.blend=_,w[3]*=p,this.pointcloudOptions.borderColor=w;var L=n.marker.sizemin,E=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=E,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var S=this.scene.xaxis,P=this.scene.yaxis,F=E/2||.5;n._extremes[S._id]=A(S,[m[0],m[2]],{ppad:F}),n._extremes[P._id]=A(P,[m[1],m[3]],{ppad:F})},a.dispose=function(){this.pointcloud.dispose()};function i(n,r){var v=new e(n,r.uid);return v.update(r),v}N.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(t,N,V){var y=t("../../lib"),c=t("./attributes");N.exports=function(T,e,a){function i(n,r){return y.coerce(T,e,c,n,r)}i("x"),i("y"),i("xbounds"),i("ybounds"),T.xy&&T.xy instanceof Float32Array&&(e.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(e.indices=T.indices),i("text"),i("marker.color",a),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",a),i("marker.border.arearatio"),e._length=null}},{"../../lib":515,"./attributes":922}],925:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../scatter3d/calc"),plot:t("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(t,N,V){var y=t("../../plots/font_attributes"),c=t("../../plots/attributes"),A=t("../../components/color/attributes"),T=t("../../components/fx/attributes"),e=t("../../plots/domain").attributes,a=t("../../plots/template_attributes").hovertemplateAttrs,i=t("../../components/colorscale/attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,v=t("../../lib/extend").extendFlat,s=t("../../plot_api/edit_types").overrideAll,o=N.exports=s({hoverinfo:v({},c.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:y({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:A.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:A.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:v(i().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");o.transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(t,N,V){var y=t("../../plot_api/edit_types").overrideAll,c=t("../../plots/get_data").getModuleCalcData,A=t("./plot"),T=t("../../components/fx/layout_attributes"),e=t("../../lib/setcursor"),a=t("../../components/dragelement"),i=t("../../components/selections").prepSelect,n=t("../../lib"),r=t("../../registry"),v="sankey";V.name=v,V.baseLayoutAttrOverrides=y({hoverlabel:T.hoverlabel},"plot","nested"),V.plot=function(o){var b=c(o.calcdata,v)[0];A(o,b),V.updateFx(o)},V.clean=function(o,b,g,d){var f=d._has&&d._has(v),m=b._has&&b._has(v);f&&!m&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},V.updateFx=function(o){for(var b=0;b<o._fullData.length;b++)s(o,b)};function s(o,b){var g=o._fullData[b],d=o._fullLayout,f=d.dragmode,m=d.dragmode==="pan"?"move":"crosshair",l=g._bgRect;if(!!l&&!(f==="pan"||f==="zoom")){e(l,m);var x={_id:"x",c2p:n.identity,_offset:g._sankey.translateX,_length:g._sankey.width},u={_id:"y",c2p:n.identity,_offset:g._sankey.translateY,_length:g._sankey.height},M={gd:o,element:l.node(),plotinfo:{id:b,xaxis:x,yaxis:u,fillRangeItems:n.noop},subplot:b,xaxes:[x],yaxes:[u],doneFnCompleted:function(w){var p=o._fullData[b],_,h=p.node.groups.slice(),L=[];function E(I){for(var D=p._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===I)return D[R]}for(var S=0;S<w.length;S++){var P=E(w[S].pointNumber);if(!!P)if(P.group){for(var F=0;F<P.childrenNodes.length;F++)L.push(P.childrenNodes[F].pointNumber);h[P.pointNumber-p.node._count]=!1}else L.push(P.pointNumber)}_=h.filter(Boolean).concat([L]),r.call("_guiRestyle",o,{"node.groups":[_]},b)}};M.prepFn=function(w,p,_){i(w,p,_,M,f)},a.init(M)}}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(t,N,V){var y=t("strongly-connected-components"),c=t("../../lib"),A=t("../../lib/gup").wrap,T=c.isArrayOrTypedArray,e=c.isIndex,a=t("../../components/colorscale");function i(r){var v=r.node,s=r.link,o=[],b=T(s.color),g=T(s.customdata),d={},f={},m=s.colorscales.length,l;for(l=0;l<m;l++){var x=s.colorscales[l],u=a.extractScale(x,{cLetter:"c"}),M=a.makeColorScaleFunc(u);f[x.label]=M}var w=0;for(l=0;l<s.value.length;l++)s.source[l]>w&&(w=s.source[l]),s.target[l]>w&&(w=s.target[l]);var p=w+1;r.node._count=p;var _,h=r.node.groups,L={};for(l=0;l<h.length;l++){var E=h[l];for(_=0;_<E.length;_++){var S=E[_],P=p+l;L.hasOwnProperty(S)?c.warn("Node "+S+" is already part of a group."):L[S]=P}}var F={source:[],target:[]};for(l=0;l<s.value.length;l++){var I=s.value[l],D=s.source[l],R=s.target[l];if(!!(I>0&&e(D,p)&&e(R,p))&&!(L.hasOwnProperty(D)&&L.hasOwnProperty(R)&&L[D]===L[R])){L.hasOwnProperty(R)&&(R=L[R]),L.hasOwnProperty(D)&&(D=L[D]),D=+D,R=+R,d[D]=d[R]=!0;var O="";s.label&&s.label[l]&&(O=s.label[l]);var z=null;O&&f.hasOwnProperty(O)&&(z=f[O]),o.push({pointNumber:l,label:O,color:b?s.color[l]:s.color,customdata:g?s.customdata[l]:s.customdata,concentrationscale:z,source:D,target:R,value:+I}),F.source.push(D),F.target.push(R)}}var G=p+h.length,Y=T(v.color),ee=T(v.customdata),j=[];for(l=0;l<G;l++)if(!!d[l]){var X=v.label[l];j.push({group:l>p-1,childrenNodes:[],pointNumber:l,label:X,color:Y?v.color[l]:v.color,customdata:ee?v.customdata[l]:v.customdata})}var ae=!1;return n(G,F.source,F.target)&&(ae=!0),{circular:ae,links:o,nodes:j,groups:h,groupLookup:L}}function n(r,v,s){for(var o=c.init2dArray(r,0),b=0;b<Math.min(v.length,s.length);b++)if(c.isIndex(v[b],r)&&c.isIndex(s[b],r)){if(v[b]===s[b])return!0;o[v[b]].push(s[b])}var g=y(o);return g.components.some(function(d){return d.length>1})}N.exports=function(v,s){var o=i(s);return A({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(t,N,V){N.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("../../components/color"),T=t("tinycolor2"),e=t("../../plots/domain").defaults,a=t("../../components/fx/hoverlabel_defaults"),i=t("../../plot_api/plot_template"),n=t("../../plots/array_container_defaults");N.exports=function(s,o,b,g){function d(E,S){return y.coerce(s,o,c,E,S)}var f=y.extendDeep(g.hoverlabel,s.hoverlabel),m=s.node,l=i.newContainer(o,"node");function x(E,S){return y.coerce(m,l,c.node,E,S)}x("label"),x("groups"),x("x"),x("y"),x("pad"),x("thickness"),x("line.color"),x("line.width"),x("hoverinfo",s.hoverinfo),a(m,l,x,f),x("hovertemplate");var u=g.colorway,M=function(E){return u[E%u.length]};x("color",l.label.map(function(E,S){return A.addOpacity(M(S),.8)})),x("customdata");var w=s.link||{},p=i.newContainer(o,"link");function _(E,S){return y.coerce(w,p,c.link,E,S)}_("label"),_("arrowlen"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",s.hoverinfo),a(w,p,_,f),_("hovertemplate");var h=T(g.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",y.repeat(h,p.value.length)),_("customdata"),n(w,p,{name:"colorscales",handleItemDefaults:r}),e(o,g,d),d("orientation"),d("valueformat"),d("valuesuffix");var L;l.x.length&&l.y.length&&(L="freeform"),d("arrangement",L),y.coerceFont(d,"textfont",y.extendFlat({},g.font)),o._length=null};function r(v,s){function o(b,g){return y.coerce(v,s,c.link.colorscales,b,g)}o("label"),o("cmin"),o("cmax"),o("colorscale")}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"sankey",basePlotModule:t("./base_plot"),selectPoints:t("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=c.numberFormat,T=t("./render"),e=t("../../components/fx"),a=t("../../components/color"),i=t("./constants").cn,n=c._;function r(u){return u!==""}function v(u,M){return u.filter(function(w){return w.key===M.traceId})}function s(u,M){y.select(u).select("path").style("fill-opacity",M),y.select(u).select("rect").style("fill-opacity",M)}function o(u){y.select(u).select("text.name").style("fill","black")}function b(u){return function(M){return u.node.sourceLinks.indexOf(M.link)!==-1||u.node.targetLinks.indexOf(M.link)!==-1}}function g(u){return function(M){return M.node.sourceLinks.indexOf(u.link)!==-1||M.node.targetLinks.indexOf(u.link)!==-1}}function d(u,M,w){M&&w&&v(w,M).selectAll("."+i.sankeyLink).filter(b(M)).call(m.bind(0,M,w,!1))}function f(u,M,w){M&&w&&v(w,M).selectAll("."+i.sankeyLink).filter(b(M)).call(l.bind(0,M,w,!1))}function m(u,M,w,p){var _=p.datum().link.label;p.style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),_&&v(M,u).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===_}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),w&&v(M,u).selectAll("."+i.sankeyNode).filter(g(u)).call(d)}function l(u,M,w,p){var _=p.datum().link.label;p.style("fill-opacity",function(h){return h.tinyColorAlpha}),_&&v(M,u).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===_}).style("fill-opacity",function(h){return h.tinyColorAlpha}),w&&v(M,u).selectAll(i.sankeyNode).filter(g(u)).call(f)}function x(u,M){var w=u.hoverlabel||{},p=c.nestedProperty(w,M).get();return Array.isArray(p)?!1:p}N.exports=function(M,w){for(var p=M._fullLayout,_=p._paper,h=p._size,L=0;L<M._fullData.length;L++)if(!!M._fullData[L].visible&&M._fullData[L].type===i.sankey&&!M._fullData[L]._viewInitial){var E=M._fullData[L].node;M._fullData[L]._viewInitial={node:{groups:E.groups.slice(),x:E.x.slice(),y:E.y.slice()}}}var S=function(ae,he){var K=he.link;K.originalEvent=y.event,M._hoverdata=[K],e.click(M,{target:!0})},P=function(ae,he,K){M._fullLayout.hovermode!==!1&&(y.select(ae).call(m.bind(0,he,K,!0)),he.link.trace.link.hoverinfo!=="skip"&&(he.link.fullData=he.link.trace,M.emit("plotly_hover",{event:y.event,points:[he.link]})))},F=n(M,"source:")+" ",I=n(M,"target:")+" ",D=n(M,"concentration:")+" ",R=n(M,"incoming flow count:")+" ",O=n(M,"outgoing flow count:")+" ",z=function(ae,he){if(M._fullLayout.hovermode===!1)return;var K=he.link.trace.link;if(K.hoverinfo==="none"||K.hoverinfo==="skip")return;var J=[];function U(oe){var ne,le;oe.circular?(ne=(oe.circularPathData.leftInnerExtent+oe.circularPathData.rightInnerExtent)/2,le=oe.circularPathData.verticalFullExtent):(ne=(oe.source.x1+oe.target.x0)/2,le=(oe.y0+oe.y1)/2);var _e=[ne,le];return oe.trace.orientation==="v"&&_e.reverse(),_e[0]+=he.parent.translateX,_e[1]+=he.parent.translateY,_e}for(var H=0,q=0;q<he.flow.links.length;q++){var re=he.flow.links[q];if(!(M._fullLayout.hovermode==="closest"&&he.link.pointNumber!==re.pointNumber)){he.link.pointNumber===re.pointNumber&&(H=q),re.fullData=re.trace,K=he.link.trace.link;var Z=U(re),Q={valueLabel:A(he.valueFormat)(re.value)+he.valueSuffix};J.push({x:Z[0],y:Z[1],name:Q.valueLabel,text:[re.label||"",F+re.source.label,I+re.target.label,re.concentrationscale?D+A("%0.2f")(re.flow.labelConcentration):""].filter(r).join("<br>"),color:x(K,"bgcolor")||a.addOpacity(re.color,1),borderColor:x(K,"bordercolor"),fontFamily:x(K,"font.family"),fontSize:x(K,"font.size"),fontColor:x(K,"font.color"),nameLength:x(K,"namelength"),textAlign:x(K,"align"),idealAlign:y.event.x<Z[0]?"right":"left",hovertemplate:K.hovertemplate,hovertemplateLabels:Q,eventData:[re]})}}var ie=e.loneHover(J,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:M,anchorIndex:H});ie.each(function(){var oe=this;he.link.concentrationscale||s(oe,.65),o(oe)})},G=function(ae,he,K){M._fullLayout.hovermode!==!1&&(y.select(ae).call(l.bind(0,he,K,!0)),he.link.trace.link.hoverinfo!=="skip"&&(he.link.fullData=he.link.trace,M.emit("plotly_unhover",{event:y.event,points:[he.link]})),e.loneUnhover(p._hoverlayer.node()))},Y=function(ae,he,K){var J=he.node;J.originalEvent=y.event,M._hoverdata=[J],y.select(ae).call(f,he,K),e.click(M,{target:!0})},ee=function(ae,he,K){M._fullLayout.hovermode!==!1&&(y.select(ae).call(d,he,K),he.node.trace.node.hoverinfo!=="skip"&&(he.node.fullData=he.node.trace,M.emit("plotly_hover",{event:y.event,points:[he.node]})))},j=function(ae,he){if(M._fullLayout.hovermode!==!1){var K=he.node.trace.node;if(!(K.hoverinfo==="none"||K.hoverinfo==="skip")){var J=y.select(ae).select("."+i.nodeRect),U=M._fullLayout._paperdiv.node().getBoundingClientRect(),H=J.node().getBoundingClientRect(),q=H.left-2-U.left,re=H.right+2-U.left,Z=H.top+H.height/4-U.top,Q={valueLabel:A(he.valueFormat)(he.node.value)+he.valueSuffix};he.node.fullData=he.node.trace,M._fullLayout._calcInverseTransform(M);var ie=M._fullLayout._invScaleX,oe=M._fullLayout._invScaleY,ne=e.loneHover({x0:ie*q,x1:ie*re,y:oe*Z,name:A(he.valueFormat)(he.node.value)+he.valueSuffix,text:[he.node.label,R+he.node.targetLinks.length,O+he.node.sourceLinks.length].filter(r).join("<br>"),color:x(K,"bgcolor")||he.tinyColorHue,borderColor:x(K,"bordercolor"),fontFamily:x(K,"font.family"),fontSize:x(K,"font.size"),fontColor:x(K,"font.color"),nameLength:x(K,"namelength"),textAlign:x(K,"align"),idealAlign:"left",hovertemplate:K.hovertemplate,hovertemplateLabels:Q,eventData:[he.node]},{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:M});s(ne,.85),o(ne)}}},X=function(ae,he,K){M._fullLayout.hovermode!==!1&&(y.select(ae).call(f,he,K),he.node.trace.node.hoverinfo!=="skip"&&(he.node.fullData=he.node.trace,M.emit("plotly_unhover",{event:y.event,points:[he.node]})),e.loneUnhover(p._hoverlayer.node()))};T(M,_,w,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:P,follow:z,unhover:G,select:S},nodeEvents:{hover:ee,follow:j,unhover:X,select:Y}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(t,N,V){var y=t("d3-force"),c=t("d3-interpolate").interpolateNumber,A=t("@plotly/d3"),T=t("@plotly/d3-sankey"),e=t("@plotly/d3-sankey-circular"),a=t("./constants"),i=t("tinycolor2"),n=t("../../components/color"),r=t("../../components/drawing"),v=t("../../lib"),s=v.strTranslate,o=v.strRotate,b=t("../../lib/gup"),g=b.keyFun,d=b.repeat,f=b.unwrap,m=t("../../lib/svg_text_utils"),l=t("../../registry"),x=t("../../constants/alignment"),u=x.CAP_SHIFT,M=x.LINE_SPACING,w=3;function p(U,H,q){var re=f(H),Z=re.trace,Q=Z.domain,ie=Z.orientation==="h",oe=Z.node.pad,ne=Z.node.thickness,le=U.width*(Q.x[1]-Q.x[0]),_e=U.height*(Q.y[1]-Q.y[0]),fe=re._nodes,ye=re._links,xe=re.circular,me;xe?me=e.sankeyCircular().circularLinkGap(0):me=T.sankey(),me.iterations(a.sankeyIterations).size(ie?[le,_e]:[_e,le]).nodeWidth(ne).nodePadding(oe).nodeId(function(Ot){return Ot.pointNumber}).nodes(fe).links(ye);var be=me();me.nodePadding()<oe&&v.warn("node.pad was reduced to ",me.nodePadding()," to fit within the figure.");var ke,De,He;for(var Ae in re._groupLookup){var Le=parseInt(re._groupLookup[Ae]),Ze;for(ke=0;ke<be.nodes.length;ke++)if(be.nodes[ke].pointNumber===Le){Ze=be.nodes[ke];break}if(!!Ze){var We={pointNumber:parseInt(Ae),x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};be.nodes.unshift(We),Ze.childrenNodes.unshift(We)}}function ze(){for(ke=0;ke<be.nodes.length;ke++){var Ot=be.nodes[ke],Ct={},jt,Nt;for(De=0;De<Ot.targetLinks.length;De++)Nt=Ot.targetLinks[De],jt=Nt.source.pointNumber+":"+Nt.target.pointNumber,Ct.hasOwnProperty(jt)||(Ct[jt]=[]),Ct[jt].push(Nt);var Lt=Object.keys(Ct);for(De=0;De<Lt.length;De++){jt=Lt[De];var Xe=Ct[jt],it=0,Ye={};for(He=0;He<Xe.length;He++)Nt=Xe[He],Ye[Nt.label]||(Ye[Nt.label]=0),Ye[Nt.label]+=Nt.value,it+=Nt.value;for(He=0;He<Xe.length;He++)Nt=Xe[He],Nt.flow={value:it,labelConcentration:Ye[Nt.label]/it,concentration:Nt.value/it,links:Xe},Nt.concentrationscale&&(Nt.color=i(Nt.concentrationscale(Nt.flow.labelConcentration)))}var Ee=0;for(De=0;De<Ot.sourceLinks.length;De++)Ee+=Ot.sourceLinks[De].value;for(De=0;De<Ot.sourceLinks.length;De++)Nt=Ot.sourceLinks[De],Nt.concentrationOut=Nt.value/Ee;var Ge=0;for(De=0;De<Ot.targetLinks.length;De++)Ge+=Ot.targetLinks[De].value;for(De=0;De<Ot.targetLinks.length;De++)Nt=Ot.targetLinks[De],Nt.concenrationIn=Nt.value/Ge}}ze();function Ie(Ot){Ot.forEach(function(Ct){var jt,Nt,Lt=0,Xe=Ct.length,it;for(Ct.sort(function(Ye,Ee){return Ye.y0-Ee.y0}),it=0;it<Xe;++it)jt=Ct[it],jt.y0>=Lt||(Nt=Lt-jt.y0,Nt>1e-6&&(jt.y0+=Nt,jt.y1+=Nt)),Lt=jt.y1+oe})}function Ve(Ot){var Ct=Ot.map(function(Ee,Ge){return{x0:Ee.x0,index:Ge}}).sort(function(Ee,Ge){return Ee.x0-Ge.x0}),jt=[],Nt=-1,Lt,Xe=-1/0,it;for(ke=0;ke<Ct.length;ke++){var Ye=Ot[Ct[ke].index];Ye.x0>Xe+ne&&(Nt+=1,Lt=Ye.x0),Xe=Ye.x0,jt[Nt]||(jt[Nt]=[]),jt[Nt].push(Ye),it=Lt-Ye.x0,Ye.x0+=it,Ye.x1+=it}return jt}if(Z.node.x.length&&Z.node.y.length){for(ke=0;ke<Math.min(Z.node.x.length,Z.node.y.length,be.nodes.length);ke++)if(Z.node.x[ke]&&Z.node.y[ke]){var dt=[Z.node.x[ke]*le,Z.node.y[ke]*_e];be.nodes[ke].x0=dt[0]-ne/2,be.nodes[ke].x1=dt[0]+ne/2;var Ft=be.nodes[ke].y1-be.nodes[ke].y0;be.nodes[ke].y0=dt[1]-Ft/2,be.nodes[ke].y1=dt[1]+Ft/2}if(Z.arrangement==="snap"){fe=be.nodes;var Qt=Ve(fe);Ie(Qt)}me.update(be)}return{circular:xe,key:q,trace:Z,guid:v.randstr(),horizontal:ie,width:le,height:_e,nodePad:Z.node.pad,nodeLineColor:Z.node.line.color,nodeLineWidth:Z.node.line.width,linkLineColor:Z.link.line.color,linkLineWidth:Z.link.line.width,linkArrowLength:Z.link.arrowlen,valueFormat:Z.valueformat,valueSuffix:Z.valuesuffix,textFont:Z.textfont,translateX:Q.x[0]*U.width+U.margin.l,translateY:U.height-Q.y[1]*U.height+U.margin.t,dragParallel:ie?_e:le,dragPerpendicular:ie?le:_e,arrangement:Z.arrangement,sankey:me,graph:be,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(U,H,q){var re=i(H.color),Z=H.source.label+"|"+H.target.label,Q=Z+"__"+q;return H.trace=U.trace,H.curveNumber=U.trace.index,{circular:U.circular,key:Q,traceId:U.key,pointNumber:H.pointNumber,link:H,tinyColorHue:n.tinyRGB(re),tinyColorAlpha:re.getAlpha(),linkPath:L,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,linkArrowLength:U.linkArrowLength,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:H.flow}}function h(U,H){var q="",re=U.width/2,Z=U.circularPathData;return U.circularLinkType==="top"?q="M "+(Z.targetX-H)+" "+(Z.targetY+re)+" L"+(Z.rightInnerExtent-H)+" "+(Z.targetY+re)+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightSmallArcRadius+re)+" 0 0 1 "+(Z.rightFullExtent-re-H)+" "+(Z.targetY-Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-re-H)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightLargeArcRadius+re)+" 0 0 1 "+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent-re)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent-re)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftLargeArcRadius+re)+" 0 0 1 "+(Z.leftFullExtent+re)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+re)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftSmallArcRadius+re)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.sourceY+re)+"L"+Z.sourceX+" "+(Z.sourceY+re)+"L"+Z.sourceX+" "+(Z.sourceY-re)+"L"+Z.leftInnerExtent+" "+(Z.sourceY-re)+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftSmallArcRadius-re)+" 0 0 0 "+(Z.leftFullExtent-re)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-re)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftLargeArcRadius-re)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent+re)+"L"+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent+re)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightLargeArcRadius-re)+" 0 0 0 "+(Z.rightFullExtent+re-H)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+re-H)+" "+(Z.targetY-Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightSmallArcRadius-re)+" 0 0 0 "+(Z.rightInnerExtent-H)+" "+(Z.targetY-re)+"L"+(Z.targetX-H)+" "+(Z.targetY-re)+(H>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z":q="M "+(Z.targetX-H)+" "+(Z.targetY-re)+" L"+(Z.rightInnerExtent-H)+" "+(Z.targetY-re)+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightSmallArcRadius+re)+" 0 0 0 "+(Z.rightFullExtent-re-H)+" "+(Z.targetY+Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-re-H)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightLargeArcRadius+re)+" 0 0 0 "+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent+re)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent+re)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftLargeArcRadius+re)+" 0 0 0 "+(Z.leftFullExtent+re)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+re)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftSmallArcRadius+re)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.sourceY-re)+"L"+Z.sourceX+" "+(Z.sourceY-re)+"L"+Z.sourceX+" "+(Z.sourceY+re)+"L"+Z.leftInnerExtent+" "+(Z.sourceY+re)+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftSmallArcRadius-re)+" 0 0 1 "+(Z.leftFullExtent-re)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-re)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftLargeArcRadius-re)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent-re)+"L"+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent-re)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightLargeArcRadius-re)+" 0 0 1 "+(Z.rightFullExtent+re-H)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+re-H)+" "+(Z.targetY+Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightSmallArcRadius-re)+" 0 0 1 "+(Z.rightInnerExtent-H)+" "+(Z.targetY+re)+"L"+(Z.targetX-H)+" "+(Z.targetY+re)+(H>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z",q}function L(){var U=.5;function H(q){var re=q.linkArrowLength;if(q.link.circular)return h(q.link,re);var Z=Math.abs((q.link.target.x0-q.link.source.x1)/2);re>Z&&(re=Z);var Q=q.link.source.x1,ie=q.link.target.x0-re,oe=c(Q,ie),ne=oe(U),le=oe(1-U),_e=q.link.y0-q.link.width/2,fe=q.link.y0+q.link.width/2,ye=q.link.y1-q.link.width/2,xe=q.link.y1+q.link.width/2,me="M"+Q+","+_e,be="C"+ne+","+_e+" "+le+","+ye+" "+ie+","+ye,ke="C"+le+","+xe+" "+ne+","+fe+" "+Q+","+fe,De=re>0?"L"+(ie+re)+","+(ye+q.link.width/2):"";return De+="L"+ie+","+xe,me+be+De+ke+"Z"}return H}function E(U,H){var q=i(H.color),re=a.nodePadAcross,Z=U.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var Q=H.dx,ie=Math.max(.5,H.dy),oe="node_"+H.pointNumber;return H.group&&(oe=v.randstr()),H.trace=U.trace,H.curveNumber=U.trace.index,{index:H.pointNumber,key:oe,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:U.key,trace:U.trace,node:H,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(Q),visibleHeight:ie,zoneX:-re,zoneY:-Z,zoneWidth:Q+2*re,zoneHeight:ie+2*Z,labelY:U.horizontal?H.dy/2+1:H.dx/2+1,left:H.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:q.getBrightness()<=128,tinyColorHue:n.tinyRGB(q),tinyColorAlpha:q.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,oe].join("_"),interactionState:U.interactionState,figure:U}}function S(U){U.attr("transform",function(H){return s(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function P(U){U.call(S)}function F(U,H){U.call(P),H.attr("d",L())}function I(U){U.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function D(U){return U.link.width>1||U.linkLineWidth>0}function R(U){var H=s(U.translateX,U.translateY);return H+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(U,H,q){U.on(".basic",null).on("mouseover.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.hover(this,re,H),re.interactionState.hovered=[this,re])}).on("mousemove.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.follow(this,re),re.interactionState.hovered=[this,re])}).on("mouseout.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.unhover(this,re,H),re.interactionState.hovered=!1)}).on("click.basic",function(re){re.interactionState.hovered&&(q.unhover(this,re,H),re.interactionState.hovered=!1),!re.interactionState.dragInProgress&&!re.partOfGroup&&q.select(this,re,H)})}function z(U,H,q,re){var Z=A.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if(Q.arrangement!=="fixed"&&(v.ensureSingle(re._fullLayout._infolayer,"g","dragcover",function(oe){re._fullLayout._dragCover=oe}),v.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,ae(Q.node),Q.interactionState.hovered&&(q.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),Q.arrangement==="snap")){var ie=Q.traceId+"|"+Q.key;Q.forceLayouts[ie]?Q.forceLayouts[ie].alpha(1):G(U,ie,Q),Y(U,H,Q,ie,re)}}).on("drag",function(Q){if(Q.arrangement!=="fixed"){var ie=A.event.x,oe=A.event.y;Q.arrangement==="snap"?(Q.node.x0=ie-Q.visibleWidth/2,Q.node.x1=ie+Q.visibleWidth/2,Q.node.y0=oe-Q.visibleHeight/2,Q.node.y1=oe+Q.visibleHeight/2):(Q.arrangement==="freeform"&&(Q.node.x0=ie-Q.visibleWidth/2,Q.node.x1=ie+Q.visibleWidth/2),oe=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,oe)),Q.node.y0=oe-Q.visibleHeight/2,Q.node.y1=oe+Q.visibleHeight/2),ae(Q.node),Q.arrangement!=="snap"&&(Q.sankey.update(Q.graph),F(U.filter(he(Q)),H))}}).on("dragend",function(Q){if(Q.arrangement!=="fixed"){Q.interactionState.dragInProgress=!1;for(var ie=0;ie<Q.node.childrenNodes.length;ie++)Q.node.childrenNodes[ie].x=Q.node.x,Q.node.childrenNodes[ie].y=Q.node.y;Q.arrangement!=="snap"&&j(Q,re)}});U.on(".drag",null).call(Z)}function G(U,H,q,re){K(q.graph.nodes);var Z=q.graph.nodes.filter(function(Q){return Q.originalX===q.node.originalX}).filter(function(Q){return!Q.partOfGroup});q.forceLayouts[H]=y.forceSimulation(Z).alphaDecay(0).force("collide",y.forceCollide().radius(function(Q){return Q.dy/2+q.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",ee(U,H,Z,q)).stop()}function Y(U,H,q,re,Z){window.requestAnimationFrame(function Q(){var ie;for(ie=0;ie<a.forceTicksPerFrame;ie++)q.forceLayouts[re].tick();var oe=q.graph.nodes;if(J(oe),q.sankey.update(q.graph),F(U.filter(he(q)),H),q.forceLayouts[re].alpha()>0)window.requestAnimationFrame(Q);else{var ne=q.node.originalX;q.node.x0=ne-q.visibleWidth/2,q.node.x1=ne+q.visibleWidth/2,j(q,Z)}})}function ee(U,H,q,re){return function(){for(var Q=0,ie=0;ie<q.length;ie++){var oe=q[ie];oe===re.interactionState.dragInProgress?(oe.x=oe.lastDraggedX,oe.y=oe.lastDraggedY):(oe.vx=(oe.originalX-oe.x)/a.forceTicksPerFrame,oe.y=Math.min(re.size-oe.dy/2,Math.max(oe.dy/2,oe.y))),Q=Math.max(Q,Math.abs(oe.vx),Math.abs(oe.vy))}!re.interactionState.dragInProgress&&Q<.1&&re.forceLayouts[H].alpha()>0&&re.forceLayouts[H].alpha(0)}}function j(U,H){for(var q=[],re=[],Z=0;Z<U.graph.nodes.length;Z++){var Q=(U.graph.nodes[Z].x0+U.graph.nodes[Z].x1)/2,ie=(U.graph.nodes[Z].y0+U.graph.nodes[Z].y1)/2;q.push(Q/U.figure.width),re.push(ie/U.figure.height)}l.call("_guiRestyle",H,{"node.x":[q],"node.y":[re]},U.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function X(U){var H=[],q;for(q=0;q<U.length;q++)U[q].originalX=(U[q].x0+U[q].x1)/2,U[q].originalY=(U[q].y0+U[q].y1)/2,H.indexOf(U[q].originalX)===-1&&H.push(U[q].originalX);for(H.sort(function(re,Z){return re-Z}),q=0;q<U.length;q++)U[q].originalLayerIndex=H.indexOf(U[q].originalX),U[q].originalLayer=U[q].originalLayerIndex/(H.length-1)}function ae(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function he(U){return function(H){return H.node.originalX===U.node.originalX}}function K(U){for(var H=0;H<U.length;H++)U[H].y=(U[H].y0+U[H].y1)/2,U[H].x=(U[H].x0+U[H].x1)/2}function J(U){for(var H=0;H<U.length;H++)U[H].y0=U[H].y-U[H].dy/2,U[H].y1=U[H].y0+U[H].dy,U[H].x0=U[H].x-U[H].dx/2,U[H].x1=U[H].x0+U[H].dx}N.exports=function(U,H,q,re,Z){var Q=U._context.staticPlot,ie=!1;v.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){ie=!0});var oe=U._fullLayout._dragCover,ne=q.filter(function(ke){return f(ke).trace.visible}).map(p.bind(null,re)),le=H.selectAll("."+a.cn.sankey).data(ne,g);le.exit().remove(),le.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Q?"none":"auto").attr("transform",R),le.each(function(ke,De){U._fullData[De]._sankey=ke;var He="bgsankey-"+ke.trace.uid+"-"+De;v.ensureSingle(U._fullLayout._draggers,"rect",He),U._fullData[De]._bgRect=A.select("."+He),U._fullData[De]._bgRect.style("pointer-events",Q?"none":"all").attr("width",ke.width).attr("height",ke.height).attr("x",ke.translateX).attr("y",ke.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),le.transition().ease(a.ease).duration(a.duration).attr("transform",R);var _e=le.selectAll("."+a.cn.sankeyLinks).data(d,g);_e.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var fe=_e.selectAll("."+a.cn.sankeyLink).data(function(ke){var De=ke.graph.links;return De.filter(function(He){return He.value}).map(_.bind(null,ke))},g);fe.enter().append("path").classed(a.cn.sankeyLink,!0).call(O,le,Z.linkEvents),fe.style("stroke",function(ke){return D(ke)?n.tinyRGB(i(ke.linkLineColor)):ke.tinyColorHue}).style("stroke-opacity",function(ke){return D(ke)?n.opacity(ke.linkLineColor):ke.tinyColorAlpha}).style("fill",function(ke){return ke.tinyColorHue}).style("fill-opacity",function(ke){return ke.tinyColorAlpha}).style("stroke-width",function(ke){return D(ke)?ke.linkLineWidth:1}).attr("d",L()),fe.style("opacity",function(){return U._context.staticPlot||ie||oe?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),fe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ye=le.selectAll("."+a.cn.sankeyNodeSet).data(d,g);ye.enter().append("g").classed(a.cn.sankeyNodeSet,!0),ye.style("cursor",function(ke){switch(ke.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var xe=ye.selectAll("."+a.cn.sankeyNode).data(function(ke){var De=ke.graph.nodes;return X(De),De.map(E.bind(null,ke))},g);xe.enter().append("g").classed(a.cn.sankeyNode,!0).call(S).style("opacity",function(ke){return(U._context.staticPlot||ie)&&!ke.partOfGroup?1:0}),xe.call(O,le,Z.nodeEvents).call(z,fe,Z,U),xe.transition().ease(a.ease).duration(a.duration).call(S).style("opacity",function(ke){return ke.partOfGroup?0:1}),xe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var me=xe.selectAll("."+a.cn.nodeRect).data(d);me.enter().append("rect").classed(a.cn.nodeRect,!0).call(I),me.style("stroke-width",function(ke){return ke.nodeLineWidth}).style("stroke",function(ke){return n.tinyRGB(i(ke.nodeLineColor))}).style("stroke-opacity",function(ke){return n.opacity(ke.nodeLineColor)}).style("fill",function(ke){return ke.tinyColorHue}).style("fill-opacity",function(ke){return ke.tinyColorAlpha}),me.transition().ease(a.ease).duration(a.duration).call(I);var be=xe.selectAll("."+a.cn.nodeLabel).data(d);be.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(ke){return ke.node.label}).each(function(ke){var De=A.select(this);r.font(De,ke.textFont),m.convertToTspans(De,U)}).style("text-shadow",m.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",function(ke){return ke.horizontal&&ke.left?"end":"start"}).attr("transform",function(ke){var De=A.select(this),He=m.lineCount(De),Ae=ke.textFont.size*((He-1)*M-u),Le=ke.nodeLineWidth/2+w,Ze=((ke.horizontal?ke.visibleHeight:ke.visibleWidth)-Ae)/2;ke.horizontal&&(ke.left?Le=-Le:Le+=ke.visibleWidth);var We=ke.horizontal?"":"scale(-1,1)"+o(90);return s(ke.horizontal?Le:Ze,ke.horizontal?Ze:Le)+We}),be.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(t,N,V){N.exports=function(c,A){for(var T=c.cd,e=[],a=T[0].trace,i=a._sankey.graph.nodes,n=0;n<i.length;n++){var r=i[n];if(!r.partOfGroup){var v=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];a.orientation==="v"&&v.reverse(),A&&A.contains(v,!1,n,c)&&e.push({pointNumber:r.pointNumber})}}return e}},{}],935:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;y.mergeArray(T.text,A,"tx"),y.mergeArray(T.texttemplate,A,"txt"),y.mergeArray(T.hovertext,A,"htx"),y.mergeArray(T.customdata,A,"data"),y.mergeArray(T.textposition,A,"tp"),T.textfont&&(y.mergeArrayCastPositive(T.textfont.size,A,"ts"),y.mergeArray(T.textfont.color,A,"tc"),y.mergeArray(T.textfont.family,A,"tf"));var a=T.marker;if(a){y.mergeArrayCastPositive(a.size,A,"ms"),y.mergeArrayCastPositive(a.opacity,A,"mo"),y.mergeArray(a.symbol,A,"mx"),y.mergeArray(a.angle,A,"ma"),y.mergeArray(a.standoff,A,"mf"),y.mergeArray(a.color,A,"mc");var i=a.line;a.line&&(y.mergeArray(i.color,A,"mlc"),y.mergeArrayCastPositive(i.width,A,"mlw"));var n=a.gradient;n&&n.type!=="none"&&(y.mergeArray(n.type,A,"mgt"),y.mergeArray(n.color,A,"mgc"))}}},{"../../lib":515}],936:[function(t,N,V){var y=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../components/colorscale/attributes"),e=t("../../plots/font_attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../components/drawing/attributes").pattern,n=t("../../components/drawing"),r=t("./constants"),v=t("../../lib/extend").extendFlat;function s(g){return{valType:"any",dflt:0,editType:"calc"}}function o(g){return{valType:"any",editType:"calc"}}function b(g){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s(),yperiod:s(),xperiod0:o(),yperiod0:o(),xperiodalignment:b(),yperiodalignment:b(),xhoverformat:y("x"),yhoverformat:y("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:c({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:A({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:v({},a,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:i,marker:v({symbol:{valType:"enumerated",values:n.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:v({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM,a=t("./subtypes"),i=t("./colorscale_calc"),n=t("./arrays_to_calcdata"),r=t("./calc_selection");function v(f,m){var l=f._fullLayout,x=m._xA=A.getFromId(f,m.xaxis||"x","x"),u=m._yA=A.getFromId(f,m.yaxis||"y","y"),M=x.makeCalcdata(m,"x"),w=u.makeCalcdata(m,"y"),p=T(m,x,"x",M),_=T(m,u,"y",w),h=p.vals,L=_.vals,E=m._length,S=new Array(E),P=m.ids,F=d(m,l,x,u),I=!1,D,R,O,z,G,Y;b(l,m);var ee="x",j="y",X;if(F)c.pushUnique(F.traceIndices,m._expandedIndex),D=F.orientation==="v",D?(j="s",X="x"):(ee="s",X="y"),G=F.stackgaps==="interpolate";else{var ae=o(m,E);s(f,m,x,u,h,L,ae)}var he=!!m.xperiodalignment,K=!!m.yperiodalignment;for(R=0;R<E;R++){var J=S[R]={},U=y(h[R]),H=y(L[R]);U&&H?(J[ee]=h[R],J[j]=L[R],he&&(J.orig_x=M[R],J.xEnd=p.ends[R],J.xStart=p.starts[R]),K&&(J.orig_y=w[R],J.yEnd=_.ends[R],J.yStart=_.starts[R])):F&&(D?U:H)?(J[X]=D?h[R]:L[R],J.gap=!0,G?(J.s=e,I=!0):J.s=0):J[ee]=J[j]=e,P&&(J.id=String(P[R]))}if(n(S,m),i(f,m),r(S,m),F){for(R=0;R<S.length;)S[R][X]===e?S.splice(R,1):R++;if(c.sort(S,function(Q,ie){return Q[X]-ie[X]||Q.i-ie.i}),I){for(R=0;R<S.length-1&&S[R].gap;)R++;for(Y=S[R].s,Y||(Y=S[R].s=0),O=0;O<R;O++)S[O].s=Y;for(z=S.length-1;z>R&&S[z].gap;)z--;for(Y=S[z].s,O=S.length-1;O>z;O--)S[O].s=Y;for(;R<z;)if(R++,S[R].gap){for(O=R+1;S[O].gap;)O++;for(var q=S[R-1][X],re=S[R-1].s,Z=(S[O].s-re)/(S[O][X]-q);R<O;)S[R].s=re+(S[R][X]-q)*Z,R++}}}return S}function s(f,m,l,x,u,M,w){var p=m._length,_=f._fullLayout,h=l._id,L=x._id,E=_._firstScatter[g(m)]===m.uid,S=(d(m,_,l,x)||{}).orientation,P=m.fill;l._minDtick=0,x._minDtick=0;var F={padded:!0},I={padded:!0};w&&(F.ppad=I.ppad=w);var D=p<2||u[0]!==u[p-1]||M[0]!==M[p-1];D&&(P==="tozerox"||P==="tonextx"&&(E||S==="h"))?F.tozero=!0:!(m.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!a.hasMarkers(m)&&!a.hasText(m))&&(F.padded=!1,F.ppad=0),D&&(P==="tozeroy"||P==="tonexty"&&(E||S==="v"))?I.tozero=!0:(P==="tonextx"||P==="tozerox")&&(I.padded=!1),h&&(m._extremes[h]=A.findExtremes(l,u,F)),L&&(m._extremes[L]=A.findExtremes(x,M,I))}function o(f,m){if(!!a.hasMarkers(f)){var l=f.marker,x=1.6*(f.marker.sizeref||1),u;if(f.marker.sizemode==="area"?u=function(h){return Math.max(Math.sqrt((h||0)/x),3)}:u=function(h){return Math.max((h||0)/x,3)},c.isArrayOrTypedArray(l.size)){var M={type:"linear"};A.setConvert(M);for(var w=M.makeCalcdata(f.marker,"size"),p=new Array(m),_=0;_<m;_++)p[_]=u(w[_]);return p}else return u(l.size)}}function b(f,m){var l=g(m),x=f._firstScatter;x[l]||(x[l]=m.uid)}function g(f){var m=f.stackgroup;return f.xaxis+f.yaxis+f.type+(m?"-"+m:"")}function d(f,m,l,x){var u=f.stackgroup;if(!!u){var M=m._scatterStackOpts[l._id+x._id][u],w=M.orientation==="v"?x:l;if(w.type==="linear"||w.type==="log")return M}}N.exports={calc:v,calcMarkerSize:o,calcAxisExpansion:s,setFirstScatter:b,getStackOpts:d}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){y.isArrayOrTypedArray(T.selectedpoints)&&y.tagSelected(A,T)}},{"../../lib":515}],939:[function(t,N,V){var y=t("../../components/colorscale/helpers").hasColorscale,c=t("../../components/colorscale/calc"),A=t("./subtypes");N.exports=function(e,a){A.hasLines(a)&&y(a,"line")&&c(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),A.hasMarkers(a)&&(y(a,"marker")&&c(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),y(a,"marker.line")&&c(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(t,N,V){N.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(t,N,V){var y=t("./calc");N.exports=function(e,a){var i=a.xaxis,n=a.yaxis,r=i._id+n._id,v=e._fullLayout._scatterStackOpts[r];if(!!v){var s=e.calcdata,o,b,g,d,f,m,l,x,u,M,w,p,_,h,L;for(var E in v){M=v[E];var S=M.traceIndices;if(!!S.length){for(w=M.stackgaps==="interpolate",p=M.groupnorm,M.orientation==="v"?(_="x",h="y"):(_="y",h="x"),L=new Array(S.length),o=0;o<L.length;o++)L[o]=!1;m=s[S[0]];var P=new Array(m.length);for(o=0;o<m.length;o++)P[o]=m[o][_];for(o=1;o<S.length;o++){for(f=s[S[o]],b=g=0;b<f.length;b++){for(l=f[b][_];l>P[g]&&g<P.length;g++)c(f,b,P[g],o,L,w,_),b++;if(l!==P[g]){for(d=0;d<o;d++)c(s[S[d]],g,l,d,L,w,_);P.splice(g,0,l)}g++}for(;g<P.length;g++)c(f,b,P[g],o,L,w,_),b++}var F=P.length;for(b=0;b<m.length;b++){for(x=m[b][h]=m[b].s,o=1;o<S.length;o++)f=s[S[o]],f[0].trace._rawLength=f[0].trace._length,f[0].trace._length=F,x+=f[b].s,f[b][h]=x;if(p)for(u=(p==="fraction"?x:x/100)||1,o=0;o<S.length;o++){var I=s[S[o]][b];I[h]/=u,I.sNorm=I.s/u}}for(o=0;o<S.length;o++){f=s[S[o]];var D=f[0].trace,R=y.calcMarkerSize(D,D._rawLength),O=Array.isArray(R);if(R&&L[o]||O){var z=R;for(R=new Array(F),b=0;b<F;b++)R[b]=f[b].gap?0:O?z[f[b].i]:z}var G=new Array(F),Y=new Array(F);for(b=0;b<F;b++)G[b]=f[b].x,Y[b]=f[b].y;y.calcAxisExpansion(e,D,i,n,G,Y,R),f[0].t.orientation=M.orientation}}}}};function c(T,e,a,i,n,r,v){n[i]=!0;var s={i:null,gap:!0,s:0};if(s[v]=a,T.splice(e,0,s),e&&a===T[e-1][v]){var o=T[e-1];s.s=o.s,s.i=o.i,s.gap=o.gap}else r&&(s.s=A(T,e,a,v));e||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}function A(T,e,a,i){var n=T[e-1],r=T[e+1];return r?n?n.s+(r.s-n.s)*(a-n[i])/(r[i]-n[i]):r.s:n.s}},{"./calc":937}],942:[function(t,N,V){N.exports=function(c){for(var A=0;A<c.length;A++){var T=c[A];if(T.type==="scatter"){var e=T.fill;if(!(e==="none"||e==="toself")&&(T.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var a=A-1;a>=0;a--){var i=c[a];if(i.type==="scatter"&&i.xaxis===T.xaxis&&i.yaxis===T.yaxis){i.opacity=void 0;break}}}}}},{}],943:[function(t,N,V){var y=t("../../lib"),c=t("../../registry"),A=t("./attributes"),T=t("./constants"),e=t("./subtypes"),a=t("./xy_defaults"),i=t("./period_defaults"),n=t("./stack_defaults"),r=t("./marker_defaults"),v=t("./line_defaults"),s=t("./line_shape_defaults"),o=t("./text_defaults"),b=t("./fillcolor_defaults"),g=t("../../lib").coercePattern;N.exports=function(f,m,l,x){function u(S,P){return y.coerce(f,m,A,S,P)}var M=a(f,m,x,u);if(M||(m.visible=!1),!!m.visible){i(f,m,x,u),u("xhoverformat"),u("yhoverformat");var w=n(f,m,x,u),p=!w&&M<T.PTS_LINESONLY?"lines+markers":"lines";u("text"),u("hovertext"),u("mode",p),e.hasLines(m)&&(v(f,m,l,x,u,{backoff:!0}),s(f,m,u),u("connectgaps"),u("line.simplify")),e.hasMarkers(m)&&r(f,m,l,x,u,{gradient:!0}),e.hasText(m)&&(u("texttemplate"),o(f,m,x,u));var _=[];(e.hasMarkers(m)||e.hasText(m))&&(u("cliponaxis"),u("marker.maxdisplayed"),_.push("points")),u("fill",w?w.fillDflt:"none"),m.fill!=="none"&&(b(f,m,l,u),e.hasLines(m)||s(f,m,u),g(u,"fillpattern",m.fillcolor,!1));var h=(m.line||{}).color,L=(m.marker||{}).color;(m.fill==="tonext"||m.fill==="toself")&&_.push("fills"),u("hoveron",_.join("+")||"points"),m.hoveron!=="fills"&&u("hovertemplate");var E=c.getComponentMethod("errorbars","supplyDefaults");E(f,m,h||L||l,{axis:"y"}),E(f,m,h||L||l,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(m,u)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(t,N,V){var y=t("../../components/color"),c=t("../../lib").isArrayOrTypedArray;N.exports=function(T,e,a,i){var n=!1;if(e.marker){var r=e.marker.color,v=(e.marker.line||{}).color;r&&!c(r)?n=r:v&&!c(v)&&(n=v)}i("fillcolor",y.addOpacity((e.line||{}).color||n||a,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(t,N,V){var y=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i={_fullLayout:e},n=y.getFromTrace(i,T,"x"),r=y.getFromTrace(i,T,"y");return a.xLabel=y.tickText(n,n.c2l(A.x),!0).text,a.yLabel=y.tickText(r,r.c2l(A.y),!0).text,a}},{"../../plots/cartesian/axes":566}],946:[function(t,N,V){var y=t("../../components/color"),c=t("./subtypes");N.exports=function(T,e){var a,i;if(T.mode==="lines")return a=T.line.color,a&&y.opacity(a)?a:T.fillcolor;if(T.mode==="none")return T.fill?T.fillcolor:"";var n=e.mcc||(T.marker||{}).color,r=e.mlcc||((T.marker||{}).line||{}).color;return i=n&&y.opacity(n)?n:r&&y.opacity(r)&&(e.mlw||((T.marker||{}).line||{}).width)?r:"",i?y.opacity(i)<.3?y.addOpacity(i,.3):i:(a=(T.line||{}).color,a&&y.opacity(a)&&c.hasLines(T)&&T.line.width?a:T.fillcolor)}},{"../../components/color":367,"./subtypes":961}],947:[function(t,N,V){var y=t("../../lib"),c=t("../../components/fx"),A=t("../../registry"),T=t("./get_trace_color"),e=t("../../components/color"),a=y.fillText;N.exports=function(n,r,v,s){var o=n.cd,b=o[0].trace,g=n.xa,d=n.ya,f=g.c2p(r),m=d.c2p(v),l=[f,m],x=b.hoveron||"",u=b.mode.indexOf("markers")!==-1?3:.5,M=!!b.xperiodalignment,w=!!b.yperiodalignment;if(x.indexOf("points")!==-1){var p=function(ne){if(M){var le=g.c2p(ne.xStart),_e=g.c2p(ne.xEnd);return f>=Math.min(le,_e)&&f<=Math.max(le,_e)?0:1/0}var fe=Math.max(3,ne.mrc||0),ye=1-1/fe,xe=Math.abs(g.c2p(ne.x)-f);return xe<fe?ye*xe/fe:xe-fe+ye},_=function(ne){if(w){var le=d.c2p(ne.yStart),_e=d.c2p(ne.yEnd);return m>=Math.min(le,_e)&&m<=Math.max(le,_e)?0:1/0}var fe=Math.max(3,ne.mrc||0),ye=1-1/fe,xe=Math.abs(d.c2p(ne.y)-m);return xe<fe?ye*xe/fe:xe-fe+ye},h=function(ne){var le=Math.max(u,ne.mrc||0),_e=g.c2p(ne.x)-f,fe=d.c2p(ne.y)-m;return Math.max(Math.sqrt(_e*_e+fe*fe)-le,1-u/le)},L=c.getDistanceFunction(s,p,_,h);if(c.getClosest(o,L,n),n.index!==!1){var E=o[n.index],S=g.c2p(E.x,!0),P=d.c2p(E.y,!0),F=E.mrc||1;n.index=E.i;var I=o[0].t.orientation,D=I&&(E.sNorm||E.s),R=I==="h"?D:E.orig_x!==void 0?E.orig_x:E.x,O=I==="v"?D:E.orig_y!==void 0?E.orig_y:E.y;return y.extendFlat(n,{color:T(b,E),x0:S-F,x1:S+F,xLabelVal:R,y0:P-F,y1:P+F,yLabelVal:O,spikeDistance:h(E),hovertemplate:b.hovertemplate}),a(E,b,n),A.getComponentMethod("errorbars","hoverInfo")(E,b,n),[n]}}if(x.indexOf("fills")!==-1&&b._polygons){var z=b._polygons,G=[],Y=!1,ee=1/0,j=-1/0,X=1/0,ae=-1/0,he,K,J,U,H,q,re,Z,Q;for(he=0;he<z.length;he++)J=z[he],J.contains(l)&&(Y=!Y,G.push(J),X=Math.min(X,J.ymin),ae=Math.max(ae,J.ymax));if(Y){X=Math.max(X,0),ae=Math.min(ae,d._length);var ie=(X+ae)/2;for(he=0;he<G.length;he++)for(U=G[he].pts,K=1;K<U.length;K++)Z=U[K-1][1],Q=U[K][1],Z>ie!=Q>=ie&&(q=U[K-1][0],re=U[K][0],Q-Z&&(H=q+(re-q)*(ie-Z)/(Q-Z),ee=Math.min(ee,H),j=Math.max(j,H)));ee=Math.max(ee,0),j=Math.min(j,g._length);var oe=e.defaultLine;return e.opacity(b.fillcolor)?oe=b.fillcolor:e.opacity((b.line||{}).color)&&(oe=b.line.color),y.extendFlat(n,{distance:n.maxHoverDistance,x0:ee,x1:j,y0:ie,y1:ie,color:oe,hovertemplate:!1}),delete n.index,b.text&&!Array.isArray(b.text)?n.text=String(b.text):n.text=b.name,[n]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(t,N,V){var y=t("./subtypes");N.exports={hasLines:y.hasLines,hasMarkers:y.hasMarkers,hasText:y.hasText,isBubble:y.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(t,N,V){var y=t("../../lib").isArrayOrTypedArray,c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults");N.exports=function(e,a,i,n,r,v){v||(v={});var s=(e.marker||{}).color;if(r("line.color",i),c(e,"line"))A(e,a,n,r,{prefix:"line.",cLetter:"c"});else{var o=(y(s)?!1:s)||i;r("line.color",o)}r("line.width"),v.noDash||r("line.dash"),v.backoff&&r("line.backoff")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(t,N,V){var y=t("../../components/drawing"),c=t("../../constants/numerical"),A=c.BADNUM,T=c.LOG_CLIP,e=T+.5,a=T-.5,i=t("../../lib"),n=i.segmentsIntersect,r=i.constrain,v=t("./constants");N.exports=function(o,b){var g=b.trace||{},d=b.xaxis,f=b.yaxis,m=d.type==="log",l=f.type==="log",x=d._length,u=f._length,M=b.backoff,w=g.marker,p=b.connectGaps,_=b.baseTolerance,h=b.shape,L=h==="linear",E=g.fill&&g.fill!=="none",S=[],P=v.minTolerance,F=o.length,I=new Array(F),D=0,R,O,z,G,Y,ee,j,X,ae,he,K,J,U,H,q,re;function Z(Mt){var Gt=o[Mt];if(!Gt)return!1;var zt=b.linearized?d.l2p(Gt.x):d.c2p(Gt.x),Ht=b.linearized?f.l2p(Gt.y):f.c2p(Gt.y);if(zt===A){if(m&&(zt=d.c2p(Gt.x,!0)),zt===A)return!1;l&&Ht===A&&(zt*=Math.abs(d._m*u*(d._m>0?e:a)/(f._m*x*(f._m>0?e:a)))),zt*=1e3}if(Ht===A){if(l&&(Ht=f.c2p(Gt.y,!0)),Ht===A)return!1;Ht*=1e3}return[zt,Ht]}function Q(Mt,Gt,zt,Ht){var Zt=zt-Mt,Wt=Ht-Gt,sr=.5-Mt,Gr=.5-Gt,cn=Zt*Zt+Wt*Wt,qr=Zt*sr+Wt*Gr;if(qr>0&&qr<cn){var st=sr*Wt-Gr*Zt;if(st*st<cn)return!0}}var ie,oe;function ne(Mt,Gt){var zt=Mt[0]/x,Ht=Mt[1]/u,Zt=Math.max(0,-zt,zt-1,-Ht,Ht-1);return Zt&&ie!==void 0&&Q(zt,Ht,ie,oe)&&(Zt=0),Zt&&Gt&&Q(zt,Ht,Gt[0]/x,Gt[1]/u)&&(Zt=0),(1+v.toleranceGrowth*Zt)*_}function le(Mt,Gt){var zt=Mt[0]-Gt[0],Ht=Mt[1]-Gt[1];return Math.sqrt(zt*zt+Ht*Ht)}var _e=v.maxScreensAway,fe=-x*_e,ye=x*(1+_e),xe=-u*_e,me=u*(1+_e),be=[[fe,xe,ye,xe],[ye,xe,ye,me],[ye,me,fe,me],[fe,me,fe,xe]],ke,De,He,Ae,Le,Ze;function We(Mt,Gt){for(var zt=[],Ht=0,Zt=0;Zt<4;Zt++){var Wt=be[Zt],sr=n(Mt[0],Mt[1],Gt[0],Gt[1],Wt[0],Wt[1],Wt[2],Wt[3]);sr&&(!Ht||Math.abs(sr.x-zt[0][0])>1||Math.abs(sr.y-zt[0][1])>1)&&(sr=[sr.x,sr.y],Ht&&le(sr,Mt)<le(zt[0],Mt)?zt.unshift(sr):zt.push(sr),Ht++)}return zt}function ze(Mt){if(Mt[0]<fe||Mt[0]>ye||Mt[1]<xe||Mt[1]>me)return[r(Mt[0],fe,ye),r(Mt[1],xe,me)]}function Ie(Mt,Gt){if(Mt[0]===Gt[0]&&(Mt[0]===fe||Mt[0]===ye)||Mt[1]===Gt[1]&&(Mt[1]===xe||Mt[1]===me))return!0}function Ve(Mt,Gt){var zt=[],Ht=ze(Mt),Zt=ze(Gt);return Ht&&Zt&&Ie(Ht,Zt)||(Ht&&zt.push(Ht),Zt&&zt.push(Zt)),zt}function dt(Mt,Gt,zt){return function(Ht,Zt){var Wt=ze(Ht),sr=ze(Zt),Gr=[];if(Wt&&sr&&Ie(Wt,sr))return Gr;Wt&&Gr.push(Wt),sr&&Gr.push(sr);var cn=2*i.constrain((Ht[Mt]+Zt[Mt])/2,Gt,zt)-((Wt||Ht)[Mt]+(sr||Zt)[Mt]);if(cn){var qr;Wt&&sr?qr=cn>0==Wt[Mt]>sr[Mt]?Wt:sr:qr=Wt||sr,qr[Mt]+=cn}return Gr}}var Ft;h==="linear"||h==="spline"?Ft=We:h==="hv"||h==="vh"?Ft=Ve:h==="hvh"?Ft=dt(0,fe,ye):h==="vhv"&&(Ft=dt(1,xe,me));function Qt(Mt,Gt){var zt=Gt[0]-Mt[0],Ht=(Gt[1]-Mt[1])/zt,Zt=(Mt[1]*Gt[0]-Gt[1]*Mt[0])/zt;return Zt>0?[Ht>0?fe:ye,me]:[Ht>0?ye:fe,xe]}function Ot(Mt){var Gt=Mt[0],zt=Mt[1],Ht=Gt===I[D-1][0],Zt=zt===I[D-1][1];if(!(Ht&&Zt))if(D>1){var Wt=Gt===I[D-2][0],sr=zt===I[D-2][1];Ht&&(Gt===fe||Gt===ye)&&Wt?sr?D--:I[D-1]=Mt:Zt&&(zt===xe||zt===me)&&sr?Wt?D--:I[D-1]=Mt:I[D++]=Mt}else I[D++]=Mt}function Ct(Mt){I[D-1][0]!==Mt[0]&&I[D-1][1]!==Mt[1]&&Ot([He,Ae]),Ot(Mt),Le=null,He=Ae=0}var jt=i.isArrayOrTypedArray(w);function Nt(Mt){if(Mt&&M&&(Mt.i=R,Mt.d=o,Mt.trace=g,Mt.marker=jt?w[Mt.i]:w,Mt.backoff=M),ie=Mt[0]/x,oe=Mt[1]/u,ke=Mt[0]<fe?fe:Mt[0]>ye?ye:0,De=Mt[1]<xe?xe:Mt[1]>me?me:0,ke||De){if(!D)I[D++]=[ke||Mt[0],De||Mt[1]];else if(Le){var Gt=Ft(Le,Mt);Gt.length>1&&(Ct(Gt[0]),I[D++]=Gt[1])}else Ze=Ft(I[D-1],Mt)[0],I[D++]=Ze;var zt=I[D-1];ke&&De&&(zt[0]!==ke||zt[1]!==De)?(Le&&(He!==ke&&Ae!==De?Ot(He&&Ae?Qt(Le,Mt):[He||ke,Ae||De]):He&&Ae&&Ot([He,Ae])),Ot([ke,De])):He-ke&&Ae-De&&Ot([ke||He,De||Ae]),Le=Mt,He=ke,Ae=De}else Le&&Ct(Ft(Le,Mt)[0]),I[D++]=Mt}for(R=0;R<F;R++)if(O=Z(R),!!O){for(D=0,Le=null,Nt(O),R++;R<F;R++){if(G=Z(R),!G){if(p)continue;break}if(!L||!b.simplify){Nt(G);continue}var Lt=Z(R+1);if(he=le(G,O),!(!(E&&(D===0||D===F-1))&&he<ne(G,Lt)*P)){for(X=[(G[0]-O[0])/he,(G[1]-O[1])/he],Y=O,K=he,J=H=q=0,j=!1,z=G,R++;R<o.length;R++){if(ee=Lt,Lt=Z(R+1),!ee){if(p)continue;break}if(ae=[ee[0]-O[0],ee[1]-O[1]],re=ae[0]*X[1]-ae[1]*X[0],H=Math.min(H,re),q=Math.max(q,re),q-H>ne(ee,Lt))break;z=ee,U=ae[0]*X[0]+ae[1]*X[1],U>K?(K=U,G=ee,j=!1):U<J&&(J=U,Y=ee,j=!0)}if(j?(Nt(G),z!==Y&&Nt(Y)):(Y!==O&&Nt(Y),z!==G&&Nt(G)),Nt(z),R>=o.length||!ee)break;Nt(ee),O=ee}}Le&&Ot([He||Le[0],Ae||Le[1]]),S.push(I.slice(0,D))}var Xe=h.slice(h.length-1);if(M&&Xe!=="h"&&Xe!=="v"){for(var it=!1,Ye=-1,Ee=[],Ge=0;Ge<S.length;Ge++)for(var Ke=0;Ke<S[Ge].length-1;Ke++){var qe=S[Ge][Ke],At=S[Ge][Ke+1],mt=y.applyBackoff(At,qe);(mt[0]!==At[0]||mt[1]!==At[1])&&(it=!0),Ee[Ye+1]||(Ye++,Ee[Ye]=[qe,[mt[0],mt[1]]])}return it?Ee:S}return S}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(t,N,V){N.exports=function(c,A,T){var e=T("line.shape");e==="spline"&&T("line.smoothing")}},{}],952:[function(t,N,V){var y={tonextx:1,tonexty:1,tonext:1};N.exports=function(A,T,e){var a,i,n,r,v,s={},o=!1,b=-1,g=0,d=-1;for(i=0;i<e.length;i++)a=e[i][0].trace,n=a.stackgroup||"",n?n in s?v=s[n]:(v=s[n]=g,g++):a.fill in y&&d>=0?v=d:(v=d=g,g++),v<b&&(o=!0),a._groupIndex=b=v;var f=e.slice();o&&f.sort(function(l,x){var u=l[0].trace,M=x[0].trace;return u._groupIndex-M._groupIndex||u.index-M.index});var m={};for(i=0;i<f.length;i++)a=f[i][0].trace,n=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in y&&(r=m[n],a._prevtrace=r||null,r&&(r._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),m[n]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return f}},{}],953:[function(t,N,V){var y=t("fast-isnumeric");N.exports=function(A,T){T||(T=2);var e=A.marker,a=e.sizeref||1,i=e.sizemin||0,n=e.sizemode==="area"?function(r){return Math.sqrt(r/a)}:function(r){return r/a};return function(r){var v=n(r/T);return y(v)&&v>0?Math.max(v,i):0}}},{"fast-isnumeric":190}],954:[function(t,N,V){N.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(t,N,V){var y=t("../../components/color"),c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("./subtypes");N.exports=function(a,i,n,r,v,s){var o=T.isBubble(a),b=(a.line||{}).color,g;if(s=s||{},b&&(n=b),v("marker.symbol"),v("marker.opacity",o?.7:1),v("marker.size"),s.noAngle||(v("marker.angle"),s.noAngleRef||v("marker.angleref"),s.noStandOff||v("marker.standoff")),v("marker.color",n),c(a,"marker")&&A(a,i,r,v,{prefix:"marker.",cLetter:"c"}),s.noSelect||(v("selected.marker.color"),v("unselected.marker.color"),v("selected.marker.size"),v("unselected.marker.size")),s.noLine||(b&&!Array.isArray(b)&&i.marker.color!==b?g=b:o?g=y.background:g=y.defaultLine,v("marker.line.color",g),c(a,"marker.line")&&A(a,i,r,v,{prefix:"marker.line.",cLetter:"c"}),v("marker.line.width",o?1:0)),o&&(v("marker.sizeref"),v("marker.sizemin"),v("marker.sizemode")),s.gradient){var d=v("marker.gradient.type");d!=="none"&&v("marker.gradient.color")}}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(t,N,V){var y=t("../../lib").dateTick0,c=t("../../constants/numerical"),A=c.ONEWEEK;function T(e,a){return e%A===0?y(a,1):y(a,0)}N.exports=function(a,i,n,r,v){if(v||(v={x:!0,y:!0}),v.x){var s=r("xperiod");s&&(r("xperiod0",T(s,i.xcalendar)),r("xperiodalignment"))}if(v.y){var o=r("yperiod");o&&(r("yperiod0",T(o,i.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../registry"),A=t("../../lib"),T=A.ensureSingle,e=A.identity,a=t("../../components/drawing"),i=t("./subtypes"),n=t("./line_points"),r=t("./link_traces"),v=t("../../lib/polygon").tester;N.exports=function(d,f,m,l,x,u){var M,w,p=!x,_=!!x&&x.duration>0,h=r(d,f,m);if(M=l.selectAll("g.trace").data(h,function(E){return E[0].trace.uid}),M.enter().append("g").attr("class",function(E){return"trace scatter trace"+E[0].trace.uid}).style("stroke-miterlimit",2),M.order(),s(d,M,f),_){u&&(w=u());var L=y.transition().duration(x.duration).ease(x.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()});L.each(function(){l.selectAll("g.trace").each(function(E,S){o(d,S,f,E,h,this,x)})})}else M.each(function(E,S){o(d,S,f,E,h,this,x)});p&&M.exit().remove(),l.selectAll("path:not([d])").remove()};function s(g,d,f){d.each(function(m){var l=T(y.select(this),"g","fills");a.setClipUrl(l,f.layerClipId,g);var x=m[0].trace,u=[];x._ownfill&&u.push("_ownFill"),x._nexttrace&&u.push("_nextFill");var M=l.selectAll("g").data(u,e);M.enter().append("g"),M.exit().each(function(w){x[w]=null}).remove(),M.order().each(function(w){x[w]=T(y.select(this),"path","js-fill")})})}function o(g,d,f,m,l,x,u){var M;b(g,d,f,m,l);var w=!!u&&u.duration>0;function p(He){return w?He.transition():He}var _=f.xaxis,h=f.yaxis,L=m[0].trace,E=L.line,S=y.select(x),P=T(S,"g","errorbars"),F=T(S,"g","lines"),I=T(S,"g","points"),D=T(S,"g","text");if(c.getComponentMethod("errorbars","plot")(g,P,f,u),L.visible!==!0)return;p(S).style("opacity",L.opacity);var R,O,z=L.fill.charAt(L.fill.length-1);z!=="x"&&z!=="y"&&(z=""),m[0][f.isRangePlot?"nodeRangePlot3":"node3"]=S;var G="",Y=[],ee=L._prevtrace;ee&&(G=ee._prevRevpath||"",O=ee._nextFill,Y=ee._polygons);var j,X,ae="",he="",K,J,U,H,q,re,Z,Q=[],ie=A.noop;if(R=L._ownFill,i.hasLines(L)||L.fill!=="none"){for(O&&O.datum(m),["hv","vh","hvh","vhv"].indexOf(E.shape)!==-1?(K=a.steps(E.shape),J=a.steps(E.shape.split("").reverse().join(""))):E.shape==="spline"?K=J=function(He){var Ae=He[He.length-1];return He.length>1&&He[0][0]===Ae[0]&&He[0][1]===Ae[1]?a.smoothclosed(He.slice(1),E.smoothing):a.smoothopen(He,E.smoothing)}:K=J=function(He){return"M"+He.join("L")},U=function(He){return J(He.reverse())},Q=n(m,{xaxis:_,yaxis:h,trace:L,connectGaps:L.connectgaps,baseTolerance:Math.max(E.width||1,3)/4,shape:E.shape,backoff:E.backoff,simplify:E.simplify,fill:L.fill}),Z=L._polygons=new Array(Q.length),M=0;M<Q.length;M++)L._polygons[M]=v(Q[M]);Q.length&&(H=Q[0][0],q=Q[Q.length-1],re=q[q.length-1]),ie=function(He){return function(Ae){if(j=K(Ae),X=U(Ae),ae?z?(ae+="L"+j.substr(1),he=X+("L"+he.substr(1))):(ae+="Z"+j,he=X+"Z"+he):(ae=j,he=X),i.hasLines(L)&&Ae.length>1){var Le=y.select(this);if(Le.datum(m),He)p(Le.style("opacity",0).attr("d",j).call(a.lineGroupStyle)).style("opacity",1);else{var Ze=p(Le);Ze.attr("d",j),a.singleLineStyle(m,Ze)}}}}}var oe=F.selectAll(".js-line").data(Q);p(oe.exit()).style("opacity",0).remove(),oe.each(ie(!1)),oe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(ie(!0)),a.setClipUrl(oe,f.layerClipId,g);function ne(He){p(He).attr("d","M0,0Z")}Q.length?(R?(R.datum(m),H&&re&&(z?(z==="y"?H[1]=re[1]=h.c2p(0,!0):z==="x"&&(H[0]=re[0]=_.c2p(0,!0)),p(R).attr("d","M"+re+"L"+H+"L"+ae.substr(1)).call(a.singleFillStyle,g)):p(R).attr("d",ae+"Z").call(a.singleFillStyle,g))):O&&(L.fill.substr(0,6)==="tonext"&&ae&&G?(L.fill==="tonext"?p(O).attr("d",ae+"Z"+G+"Z").call(a.singleFillStyle,g):p(O).attr("d",ae+"L"+G.substr(1)+"Z").call(a.singleFillStyle,g),L._polygons=L._polygons.concat(Y)):(ne(O),L._polygons=null)),L._prevRevpath=he,L._prevPolygons=Z):(R?ne(R):O&&ne(O),L._polygons=L._prevRevpath=L._prevPolygons=null);function le(He){return He.filter(function(Ae){return!Ae.gap&&Ae.vis})}function _e(He){return He.filter(function(Ae){return Ae.vis})}function fe(He){return He.filter(function(Ae){return!Ae.gap})}function ye(He){return He.id}function xe(He){if(He.ids)return ye}function me(){return!1}function be(He,Ae,Le){var Ze,We,ze,Ie=Le[0].trace,Ve=i.hasMarkers(Ie),dt=i.hasText(Ie),Ft=xe(Ie),Qt=me,Ot=me;if(Ve||dt){var Ct=e,jt=Ie.stackgroup,Nt=jt&&g._fullLayout._scatterStackOpts[_._id+h._id][jt].stackgaps==="infer zero";Ie.marker.maxdisplayed||Ie._needsCull?Ct=Nt?_e:le:jt&&!Nt&&(Ct=fe),Ve&&(Qt=Ct),dt&&(Ot=Ct)}We=He.selectAll("path.point"),Ze=We.data(Qt,Ft);var Lt=Ze.enter().append("path").classed("point",!0);w&&Lt.call(a.pointStyle,Ie,g).call(a.translatePoints,_,h).style("opacity",0).transition().style("opacity",1),Ze.order();var Xe;Ve&&(Xe=a.makePointStyleFns(Ie)),Ze.each(function(it){var Ye=y.select(this),Ee=p(Ye);ze=a.translatePoint(it,Ee,_,h),ze?(a.singlePointStyle(it,Ee,Ie,Xe,g),f.layerClipId&&a.hideOutsideRangePoint(it,Ee,_,h,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&Ye.classed("plotly-customdata",it.data!==null&&it.data!==void 0)):Ee.remove()}),w?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),We=Ae.selectAll("g"),Ze=We.data(Ot,Ft),Ze.enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(it){var Ye=y.select(this),Ee=p(Ye.select("text"));ze=a.translatePoint(it,Ee,_,h),ze?f.layerClipId&&a.hideOutsideRangePoint(it,Ye,_,h,Ie.xcalendar,Ie.ycalendar):Ye.remove()}),Ze.selectAll("text").call(a.textPointStyle,Ie,g).each(function(it){var Ye=_.c2p(it.x),Ee=h.c2p(it.y);y.select(this).selectAll("tspan.line").each(function(){p(y.select(this)).attr({x:Ye,y:Ee})})}),Ze.exit().remove()}I.datum(m),D.datum(m),be(I,D,m);var ke=L.cliponaxis===!1,De=ke?null:f.layerClipId;a.setClipUrl(I,De,g),a.setClipUrl(D,De,g)}function b(g,d,f,m,l){var x=f.xaxis,u=f.yaxis,M=y.extent(A.simpleMap(x.range,x.r2c)),w=y.extent(A.simpleMap(u.range,u.r2c)),p=m[0].trace;if(!!i.hasMarkers(p)){var _=p.marker.maxdisplayed;if(_!==0){var h=m.filter(function(P){return P.x>=M[0]&&P.x<=M[1]&&P.y>=w[0]&&P.y<=w[1]}),L=Math.ceil(h.length/_),E=0;l.forEach(function(P,F){var I=P[0].trace;i.hasMarkers(I)&&I.marker.maxdisplayed>0&&F<d&&E++});var S=Math.round(E*L/3+Math.floor(E/3)*L/7.1);m.forEach(function(P){delete P.vis}),h.forEach(function(P,F){Math.round((F+S)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(t,N,V){var y=t("./subtypes");N.exports=function(A,T){var e=A.cd,a=A.xaxis,i=A.yaxis,n=[],r=e[0].trace,v,s,o,b,g=!y.hasMarkers(r)&&!y.hasText(r);if(g)return[];if(T===!1)for(v=0;v<e.length;v++)e[v].selected=0;else for(v=0;v<e.length;v++)s=e[v],o=a.c2p(s.x),b=i.c2p(s.y),s.i!==null&&T.contains([o,b],!1,v,A)?(n.push({pointNumber:s.i,x:a.c2d(s.x),y:i.c2d(s.y)}),s.selected=1):s.selected=0;return n}},{"./subtypes":961}],959:[function(t,N,V){var y=["orientation","groupnorm","stackgaps"];N.exports=function(A,T,e,a){var i=e._scatterStackOpts,n=a("stackgroup");if(n){var r=T.xaxis+T.yaxis,v=i[r];v||(v=i[r]={});var s=v[n],o=!1;s?s.traces.push(T):(s=v[n]={traceIndices:[],traces:[T]},o=!0);for(var b={orientation:T.x&&!T.y?"h":"v"},g=0;g<y.length;g++){var d=y[g],f=d+"Found";if(!s[f]){var m=A[d]!==void 0,l=d==="orientation";if((m||o)&&(s[d]=a(d,b[d]),l&&(s.fillDflt=s[d]==="h"?"tonextx":"tonexty"),m&&(s[f]=!0,!o&&(delete s.traces[0][d],l))))for(var x=0;x<s.traces.length-1;x++){var u=s.traces[x];u._input.fill!==u.fill&&(u.fill=s.fillDflt)}}}return s}}},{}],960:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../registry");function T(n){var r=y.select(n).selectAll("g.trace.scatter");r.style("opacity",function(v){return v[0].trace.opacity}),r.selectAll("g.points").each(function(v){var s=y.select(this),o=v.trace||v[0].trace;e(s,o,n)}),r.selectAll("g.text").each(function(v){var s=y.select(this),o=v.trace||v[0].trace;a(s,o,n)}),r.selectAll("g.trace path.js-line").call(c.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(c.fillGroupStyle,n),A.getComponentMethod("errorbars","style")(r)}function e(n,r,v){c.pointStyle(n.selectAll("path.point"),r,v)}function a(n,r,v){c.textPointStyle(n.selectAll("text"),r,v)}function i(n,r,v){var s=r[0].trace;s.selectedpoints?(c.selectedPointStyle(v.selectAll("path.point"),s),c.selectedTextStyle(v.selectAll("text"),s)):(e(v,s,n),a(v,s,n))}N.exports={style:T,stylePoints:e,styleText:a,styleOnSelect:i}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(t,N,V){var y=t("../../lib");N.exports={hasLines:function(c){return c.visible&&c.mode&&c.mode.indexOf("lines")!==-1},hasMarkers:function(c){return c.visible&&(c.mode&&c.mode.indexOf("markers")!==-1||c.type==="splom")},hasText:function(c){return c.visible&&c.mode&&c.mode.indexOf("text")!==-1},isBubble:function(c){return y.isPlainObject(c.marker)&&y.isArrayOrTypedArray(c.marker.size)}}},{"../../lib":515}],962:[function(t,N,V){var y=t("../../lib");N.exports=function(c,A,T,e,a){a=a||{},e("textposition"),y.coerceFont(e,"textfont",T.font),a.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(t,N,V){var y=t("../../lib"),c=t("../../registry");N.exports=function(T,e,a,i){var n=i("x"),r=i("y"),v,s=c.getComponentMethod("calendars","handleTraceDefaults");if(s(T,e,["x","y"],a),n){var o=y.minRowLength(n);r?v=Math.min(o,y.minRowLength(r)):(v=o,i("y0"),i("dy"))}else{if(!r)return 0;v=y.minRowLength(r),i("x0"),i("dx")}return e._length=v,v}},{"../../lib":515,"../../registry":647}],964:[function(t,N,V){var y=t("../scatter/attributes"),c=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../plots/attributes"),i=t("../../constants/gl3d_dashes"),n=t("../../constants/gl3d_markers"),r=t("../../lib/extend").extendFlat,v=t("../../plot_api/edit_types").overrideAll,s=t("../../lib/sort_object_keys"),o=y.line,b=y.marker,g=b.line,d=r({width:o.width,dash:{valType:"enumerated",values:s(i),dflt:"solid"}},c("line"));function f(l){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var m=N.exports=v({x:y.x,y:y.y,z:{valType:"data_array"},text:r({},y.text,{}),texttemplate:e({},{}),hovertext:r({},y.hovertext,{}),hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),mode:r({},y.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:f(),y:f(),z:f()},connectgaps:y.connectgaps,line:d,marker:r({symbol:{valType:"enumerated",values:s(n),dflt:"circle",arrayOk:!0},size:r({},b.size,{dflt:8}),sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,opacity:r({},b.opacity,{arrayOk:!1}),colorbar:b.colorbar,line:r({width:r({},g.width,{arrayOk:!1})},c("marker.line"))},c("marker")),textposition:r({},y.textposition,{dflt:"top center"}),textfont:{color:y.textfont.color,size:y.textfont.size,family:r({},y.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:r({},a.hoverinfo)},"calc","nested");m.x.editType=m.y.editType=m.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(t,N,V){var y=t("../scatter/arrays_to_calcdata"),c=t("../scatter/colorscale_calc");N.exports=function(T,e){var a=[{x:!1,y:!1,trace:e,t:{}}];return y(a,e),c(T,e),a}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(t,N,V){var y=t("../../registry");function c(e,a,i,n){if(!a||!a.visible)return null;for(var r=y.getComponentMethod("errorbars","makeComputeError")(a),v=new Array(e.length),s=0;s<e.length;s++){var o=r(+e[s],s);if(n.type==="log"){var b=n.c2l(e[s]),g=e[s]-o[0],d=e[s]+o[1];if(v[s]=[(n.c2l(g,!0)-b)*i,(n.c2l(d,!0)-b)*i],g>0){var f=n.c2l(g);n._lowerLogErrorBound||(n._lowerLogErrorBound=f),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,f)}}else v[s]=[-o[0]*i,o[1]*i]}return v}function A(e){for(var a=0;a<e.length;a++)if(e[a])return e[a].length;return 0}function T(e,a,i){var n=[c(e.x,e.error_x,a[0],i.xaxis),c(e.y,e.error_y,a[1],i.yaxis),c(e.z,e.error_z,a[2],i.zaxis)],r=A(n);if(r===0)return null;for(var v=new Array(r),s=0;s<r;s++){for(var o=[[0,0,0],[0,0,0]],b=0;b<3;b++)if(n[b])for(var g=0;g<2;g++)o[g][b]=n[b][s][g];v[s]=o}return v}N.exports=T},{"../../registry":647}],967:[function(t,N,V){var y=t("../../../stackgl_modules").gl_line3d,c=t("../../../stackgl_modules").gl_scatter3d,A=t("../../../stackgl_modules").gl_error3d,T=t("../../../stackgl_modules").gl_mesh3d,e=t("../../../stackgl_modules").delaunay_triangulate,a=t("../../lib"),i=t("../../lib/str2rgbarray"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/make_bubble_size_func"),v=t("../../constants/gl3d_dashes"),s=t("../../constants/gl3d_markers"),o=t("../../plots/cartesian/axes"),b=t("../../components/fx/helpers").appendArrayPointValue,g=t("./calc_errors");function d(P,F){this.scene=P,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=d.prototype;f.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var F=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||this.textLabels[F]===0)&&(P.textLabel=this.textLabels[F]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}};function m(P,F,I){var D=(I+1)%3,R=(I+2)%3,O=[],z=[],G;for(G=0;G<P.length;++G){var Y=P[G];isNaN(Y[D])||!isFinite(Y[D])||isNaN(Y[R])||!isFinite(Y[R])||(O.push([Y[D],Y[R]]),z.push(G))}var ee=e(O);for(G=0;G<ee.length;++G)for(var j=ee[G],X=0;X<j.length;++X)j[X]=z[j[X]];return{positions:P,cells:ee,meshColor:F}}function l(P){for(var F=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var O=P[R];O&&O.copy_zstyle!==!1&&P[2].visible!==!1&&(O=P[2]),!(!O||!O.visible)&&(F[R]=O.width/2,I[R]=i(O.color),D[R]=O.thickness)}return{capSize:F,color:I,lineWidth:D}}function x(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function u(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function M(P){var F=0,I=0,D=[F,I];if(Array.isArray(P))for(var R=0;R<P.length;R++)D[R]=[F,I],P[R]&&(D[R][0]=x(P[R]),D[R][1]=u(P[R]));else D[0]=x(P),D[1]=u(P);return D}function w(P,F){return F(P*4)}function p(P){return s[P]}function _(P,F,I,D,R){var O=null;if(a.isArrayOrTypedArray(P)){O=[];for(var z=0;z<F;z++)P[z]===void 0?O[z]=D:O[z]=I(P[z],R)}else O=I(P,a.identity);return O}function h(P,F){var I=[],D=P.fullSceneLayout,R=P.dataScale,O=D.xaxis,z=D.yaxis,G=D.zaxis,Y=F.marker,ee=F.line,j=F.x||[],X=F.y||[],ae=F.z||[],he=j.length,K=F.xcalendar,J=F.ycalendar,U=F.zcalendar,H,q,re,Z,Q,ie;for(Q=0;Q<he;Q++)H=O.d2l(j[Q],0,K)*R[0],q=z.d2l(X[Q],0,J)*R[1],re=G.d2l(ae[Q],0,U)*R[2],I[Q]=[H,q,re];if(Array.isArray(F.text))ie=F.text;else if(F.text!==void 0)for(ie=new Array(he),Q=0;Q<he;Q++)ie[Q]=F.text;function oe(We,ze){var Ie=D[We];return o.tickText(Ie,Ie.d2l(ze),!0).text}var ne=F.texttemplate;if(ne){var le=P.fullLayout,_e=le._d3locale,fe=Array.isArray(ne),ye=fe?Math.min(ne.length,he):he,xe=fe?function(We){return ne[We]}:function(){return ne};for(ie=new Array(ye),Q=0;Q<ye;Q++){var me={x:j[Q],y:X[Q],z:ae[Q]},be={xLabel:oe("xaxis",j[Q]),yLabel:oe("yaxis",X[Q]),zLabel:oe("zaxis",ae[Q])},ke={};b(ke,F,Q);var De=F._meta||{};ie[Q]=a.texttemplateString(xe(Q),be,_e,ke,me,De)}}if(Z={position:I,mode:F.mode,text:ie},"line"in F&&(Z.lineColor=n(ee,1,he),Z.lineWidth=ee.width,Z.lineDashes=ee.dash),"marker"in F){var He=r(F);Z.scatterColor=n(Y,1,he),Z.scatterSize=_(Y.size,he,w,20,He),Z.scatterMarker=_(Y.symbol,he,p,"\u25CF"),Z.scatterLineWidth=Y.line.width,Z.scatterLineColor=n(Y.line,1,he),Z.scatterAngle=0}"textposition"in F&&(Z.textOffset=M(F.textposition),Z.textColor=n(F.textfont,1,he),Z.textSize=_(F.textfont.size,he,a.identity,12),Z.textFont=F.textfont.family,Z.textAngle=0);var Ae=["x","y","z"];for(Z.project=[!1,!1,!1],Z.projectScale=[1,1,1],Z.projectOpacity=[1,1,1],Q=0;Q<3;++Q){var Le=F.projection[Ae[Q]];(Z.project[Q]=Le.show)&&(Z.projectOpacity[Q]=Le.opacity,Z.projectScale[Q]=Le.scale)}Z.errorBounds=g(F,R,D);var Ze=l([F.error_x,F.error_y,F.error_z]);return Z.errorColor=Ze.color,Z.errorLineWidth=Ze.lineWidth,Z.errorCapSize=Ze.capSize,Z.delaunayAxis=F.surfaceaxis,Z.delaunayColor=i(F.surfacecolor),Z}function L(P){if(a.isArrayOrTypedArray(P)){var F=P[0];return a.isArrayOrTypedArray(F)&&(P=F),"rgb("+P.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function E(P){return a.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}f.update=function(P){var F=this.scene.glplot.gl,I,D,R,O,z=v.solid;this.data=P;var G=h(this.scene,P);"mode"in G&&(this.mode=G.mode),"lineDashes"in G&&G.lineDashes in v&&(z=v[G.lineDashes]),this.color=E(G.scatterColor)||E(G.lineColor),this.dataPoints=G.position,I={gl:this.scene.glplot.gl,position:G.position,color:G.lineColor,lineWidth:G.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=y(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Y=P.opacity;if(P.marker&&P.marker.opacity&&(Y*=P.marker.opacity),D={gl:this.scene.glplot.gl,position:G.position,color:G.scatterColor,size:G.scatterSize,glyph:G.scatterMarker,opacity:Y,orthographic:!0,lineWidth:G.scatterLineWidth,lineColor:G.scatterLineColor,project:G.project,projectScale:G.projectScale,projectOpacity:G.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=c(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:G.position,glyph:G.text,color:G.textColor,size:G.textSize,angle:G.textAngle,alignment:G.textOffset,font:G.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=c(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:G.position,color:G.errorColor,error:G.errorBounds,lineWidth:G.errorLineWidth,capSize:G.errorCapSize,opacity:P.opacity},this.errorBars?G.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):G.errorBounds&&(this.errorBars=A(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),G.delaunayAxis>=0){var ee=m(G.position,G.delaunayColor,G.delaunayAxis);ee.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(ee):(ee.gl=F,this.delaunayMesh=T(ee),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function S(P,F){var I=new d(P,F.uid);return I.update(F),I}N.exports=S},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/text_defaults"),i=t("./attributes");N.exports=function(v,s,o,b){function g(w,p){return c.coerce(v,s,i,w,p)}var d=n(v,s,g,b);if(!d){s.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),g("zhoverformat"),g("mode"),A.hasLines(s)&&(g("connectgaps"),e(v,s,o,b,g)),A.hasMarkers(s)&&T(v,s,o,b,g,{noSelect:!0,noAngle:!0}),A.hasText(s)&&(g("texttemplate"),a(v,s,b,g,{noSelect:!0}));var f=(s.line||{}).color,m=(s.marker||{}).color;g("surfaceaxis")>=0&&g("surfacecolor",f||m);for(var l=["x","y","z"],x=0;x<3;++x){var u="projection."+l[x];g(u+".show")&&(g(u+".opacity"),g(u+".scale"))}var M=y.getComponentMethod("errorbars","supplyDefaults");M(v,s,f||m||o,{axis:"z"}),M(v,s,f||m||o,{axis:"y",inherit:"z"}),M(v,s,f||m||o,{axis:"x",inherit:"z"})};function n(r,v,s,o){var b=0,g=s("x"),d=s("y"),f=s("z"),m=y.getComponentMethod("calendars","handleTraceDefaults");return m(r,v,["x","y","z"],o),g&&d&&f&&(b=Math.min(g.length,d.length,f.length),v._length=v._xlength=v._ylength=v._zlength=b),b}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(t,N,V){N.exports={plot:t("./convert"),attributes:t("./attributes"),markerSymbols:t("../../constants/gl3d_markers"),supplyDefaults:t("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(t,N,V){var y=t("../scatter/attributes"),c=t("../../plots/attributes"),A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),a=t("../../lib/extend").extendFlat,i=y.marker,n=y.line,r=i.line;N.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},y.mode,{dflt:"markers"}),text:a({},y.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},y.hovertext,{}),line:{color:n.color,width:n.width,dash:n.dash,backoff:n.backoff,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:y.connectgaps,fill:a({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,marker:a({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,angle:i.angle,angleref:i.angleref,standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:a({width:r.width,editType:"calc"},e("marker.line")),gradient:i.gradient,editType:"calc"},e("marker")),textfont:y.textfont,textposition:y.textposition,selected:y.selected,unselected:y.unselected,hoverinfo:a({},c.hoverinfo,{flags:["a","b","text","name"]}),hoveron:y.hoveron,hovertemplate:A()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../scatter/colorscale_calc"),A=t("../scatter/arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,a=t("../carpet/lookup_carpetid");N.exports=function(n,r){var v=r._carpetTrace=a(n,r);if(!(!v||!v.visible||v.visible==="legendonly")){var s;r.xaxis=v.xaxis,r.yaxis=v.yaxis;var o=r._length,b=new Array(o),g,d,f=!1;for(s=0;s<o;s++)if(g=r.a[s],d=r.b[s],y(g)&&y(d)){var m=v.ab2xy(+g,+d,!0),l=v.isVisible(+g,+d);l||(f=!0),b[s]={x:m[0],y:m[1],a:g,b:d,vis:l}}else b[s]={x:!1,y:!1};return r._needsCull=f,b[0].carpet=v,b[0].trace=r,e(r,o),c(n,r),A(b,r),T(b,r),b}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/constants"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/line_shape_defaults"),i=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");N.exports=function(s,o,b,g){function d(w,p){return y.coerce(s,o,r,w,p)}d("carpet"),o.xaxis="x",o.yaxis="y";var f=d("a"),m=d("b"),l=Math.min(f.length,m.length);if(!l){o.visible=!1;return}o._length=l,d("text"),d("texttemplate"),d("hovertext");var x=l<c.PTS_LINESONLY?"lines+markers":"lines";d("mode",x),A.hasLines(o)&&(e(s,o,b,g,d,{backoff:!0}),a(s,o,d),d("connectgaps")),A.hasMarkers(o)&&T(s,o,b,g,d,{gradient:!0}),A.hasText(o)&&i(s,o,g,d);var u=[];(A.hasMarkers(o)||A.hasText(o))&&(d("marker.maxdisplayed"),u.push("points")),d("fill"),o.fill!=="none"&&(n(s,o,b,d),A.hasLines(o)||a(s,o,d)),(o.fill==="tonext"||o.fill==="toself")&&u.push("fills");var M=d("hoveron",u.join("+")||"points");M!=="fills"&&d("hovertemplate"),y.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(t,N,V){N.exports=function(c,A,T,e,a){var i=e[a];return c.a=i.a,c.b=i.b,c.y=i.y,c}},{}],974:[function(t,N,V){N.exports=function(c,A){var T={},e=A._carpet,a=e.ab2ij([c.a,c.b]),i=Math.floor(a[0]),n=a[0]-i,r=Math.floor(a[1]),v=a[1]-r,s=e.evalxy([],i,r,n,v);return T.yLabel=s[1].toFixed(3),T}},{}],975:[function(t,N,V){var y=t("../scatter/hover"),c=t("../../lib").fillText;N.exports=function(T,e,a,i){var n=y(T,e,a,i);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var v=1-r.y0/T.ya._length,s=T.xa._length,o=s*v/2,b=s-o;return r.x0=Math.max(Math.min(r.x0,b),o),r.x1=Math.max(Math.min(r.x1,b),o),n}var g=r.cd[r.index];r.a=g.a,r.b=g.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var d=r.trace,f=d._carpet,m=d._module.formatLabels(g,d);r.yLabel=m.yLabel,delete r.text;var l=[];function x(w,p){var _;w.labelprefix&&w.labelprefix.length>0?_=w.labelprefix.replace(/ = $/,""):_=w._hovertitle,l.push(_+": "+p.toFixed(3)+w.labelsuffix)}if(!d.hovertemplate){var u=g.hi||d.hoverinfo,M=u.split("+");M.indexOf("all")!==-1&&(M=["a","b","text"]),M.indexOf("a")!==-1&&x(f.aaxis,g.a),M.indexOf("b")!==-1&&x(f.baxis,g.b),l.push("y: "+r.yLabel),M.indexOf("text")!==-1&&c(g,d,l),r.extraText=l.join("<br>")}return n}},{"../../lib":515,"../scatter/hover":947}],976:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:t("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(t,N,V){var y=t("../scatter/plot"),c=t("../../plots/cartesian/axes"),A=t("../../components/drawing");N.exports=function(e,a,i,n){var r,v,s,o=i[0][0].carpet,b=c.getFromId(e,o.xaxis||"x"),g=c.getFromId(e,o.yaxis||"y"),d={xaxis:b,yaxis:g,plot:a.plot};for(r=0;r<i.length;r++)v=i[r][0].trace,v._xA=b,v._yA=g;for(y(e,d,i,n),r=0;r<i.length;r++)v=i[r][0].trace,s=n.selectAll("g.trace"+v.uid+" .js-line"),A.setClipUrl(s,i[r][0].carpet._clipPathId,e)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scatter/attributes"),T=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat,n=t("../../plot_api/edit_types").overrideAll,r=A.marker,v=A.line,s=r.line;N.exports=n({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},A.mode,{dflt:"markers"}),text:i({},A.text,{}),texttemplate:c({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},A.hovertext,{}),textfont:A.textfont,textposition:A.textposition,line:{color:v.color,width:v.width,dash:a},connectgaps:A.connectgaps,marker:i({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:i({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:i({width:s.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:A.fillcolor,selected:A.selected,unselected:A.unselected,hoverinfo:i({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:y()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../constants/numerical").BADNUM,A=t("../scatter/colorscale_calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),a=t("../../lib")._;function i(n){return n&&typeof n=="string"}N.exports=function(r,v){var s=Array.isArray(v.locations),o=s?v.locations.length:v._length,b=new Array(o),g;v.geojson?g=function(u){return i(u)||y(u)}:g=i;for(var d=0;d<o;d++){var f=b[d]={};if(s){var m=v.locations[d];f.loc=g(m)?m:null}else{var l=v.lon[d],x=v.lat[d];y(l)&&y(x)?f.lonlat=[+l,+x]:f.lonlat=[c,c]}}return T(b,v),A(r,v),e(b,v),o&&(b[0].t={labels:{lat:a(r,"lat:")+" ",lon:a(r,"lon:")+" "}}),b}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),i=t("./attributes");N.exports=function(r,v,s,o){function b(M,w){return y.coerce(r,v,i,M,w)}var g=b("locations"),d;if(g&&g.length){var f=b("geojson"),m;(typeof f=="string"&&f!==""||y.isPlainObject(f))&&(m="geojson-id");var l=b("locationmode",m);l==="geojson-id"&&b("featureidkey"),d=g.length}else{var x=b("lon")||[],u=b("lat")||[];d=Math.min(x.length,u.length)}if(!d){v.visible=!1;return}v._length=d,b("text"),b("hovertext"),b("hovertemplate"),b("mode"),c.hasLines(v)&&(T(r,v,s,o,b),b("connectgaps")),c.hasMarkers(v)&&A(r,v,s,o,b,{gradient:!0}),c.hasText(v)&&(b("texttemplate"),e(r,v,o,b)),b("fill"),v.fill!=="none"&&a(r,v,s,b),y.coerceSelectionMarkerOpacity(v,b)}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(t,N,V){N.exports=function(c,A,T,e,a){c.lon=A.lon,c.lat=A.lat,c.location=A.loc?A.loc:null;var i=e[a];return i.fIn&&i.fIn.properties&&(c.properties=i.fIn.properties),c}},{}],982:[function(t,N,V){var y=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i=e[T.geo]._subplot,n=i.mockAxis,r=A.lonlat;return a.lonLabel=y.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=y.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],983:[function(t,N,V){var y=t("../../components/fx"),c=t("../../constants/numerical").BADNUM,A=t("../scatter/get_trace_color"),T=t("../../lib").fillText,e=t("./attributes");N.exports=function(n,r,v){var s=n.cd,o=s[0].trace,b=n.xa,g=n.ya,d=n.subplot,f=d.projection.isLonLatOverEdges,m=d.project;function l(h){var L=h.lonlat;if(L[0]===c||f(L))return 1/0;var E=m(L),S=m([r,v]),P=Math.abs(E[0]-S[0]),F=Math.abs(E[1]-S[1]),I=Math.max(3,h.mrc||0);return Math.max(Math.sqrt(P*P+F*F)-I,1-3/I)}if(y.getClosest(s,l,n),n.index!==!1){var x=s[n.index],u=x.lonlat,M=[b.c2p(u),g.c2p(u)],w=x.mrc||1;n.x0=M[0]-w,n.x1=M[0]+w,n.y0=M[1]-w,n.y1=M[1]+w,n.loc=x.loc,n.lon=u[0],n.lat=u[1];var p={};p[o.geo]={_subplot:d};var _=o._module.formatLabels(x,o,p);return n.lonLabel=_.lonLabel,n.latLabel=_.latLabel,n.color=A(o,x),n.extraText=a(o,x,n,s[0].t.labels),n.hovertemplate=o.hovertemplate,[n]}};function a(i,n,r,v){if(i.hovertemplate)return;var s=n.hi||i.hoverinfo,o=s==="all"?e.hoverinfo.flags:s.split("+"),b=o.indexOf("location")!==-1&&Array.isArray(i.locations),g=o.indexOf("lon")!==-1,d=o.indexOf("lat")!==-1,f=o.indexOf("text")!==-1,m=[];function l(x){return x+"\xB0"}return b?m.push(n.loc):g&&d?m.push("("+l(r.latLabel)+", "+l(r.lonLabel)+")"):g?m.push(v.lon+l(r.lonLabel)):d&&m.push(v.lat+l(r.latLabel)),f&&T(n,i,m),m.join("<br>")}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:t("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../lib/topojson_utils").getTopojsonFeatures,T=t("../../lib/geojson_utils"),e=t("../../lib/geo_location_utils"),a=t("../../plots/cartesian/autorange").findExtremes,i=t("../../constants/numerical").BADNUM,n=t("../scatter/calc").calcMarkerSize,r=t("../scatter/subtypes"),v=t("./style");function s(b,g,d){var f=g.layers.frontplot.select(".scatterlayer"),m=c.makeTraceGroups(f,d,"trace scattergeo");function l(x,u){x.lonlat[0]===i&&y.select(u).remove()}m.selectAll("*").remove(),m.each(function(x){var u=y.select(this),M=x[0].trace;if(r.hasLines(M)||M.fill!=="none"){var w=T.calcTraceToLineCoords(x),p=M.fill!=="none"?T.makePolygon(w):T.makeLine(w);u.selectAll("path.js-line").data([{geojson:p,trace:M}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(M)&&u.selectAll("path.point").data(c.identity).enter().append("path").classed("point",!0).each(function(_){l(_,this)}),r.hasText(M)&&u.selectAll("g").data(c.identity).enter().append("g").append("text").each(function(_){l(_,this)}),v(b,x)})}function o(b,g){var d=b[0].trace,f=g[d.geo],m=f._subplot,l=d._length,x,u;if(Array.isArray(d.locations)){var M=d.locationmode,w=M==="geojson-id"?e.extractTraceFeature(b):A(d,m.topojson);for(x=0;x<l;x++){u=b[x];var p=M==="geojson-id"?u.fOut:e.locationToFeature(M,u.loc,w);u.lonlat=p?p.properties.ct:[i,i]}}var _={padded:!0},h,L;if(f.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var E=e.computeBbox(e.getTraceGeojson(d));h=[E[0],E[2]],L=[E[1],E[3]]}else{for(h=new Array(l),L=new Array(l),x=0;x<l;x++)u=b[x],h[x]=u.lonlat[0],L[x]=u.lonlat[1];_.ppad=n(d,l)}d._extremes.lon=a(f.lonaxis._ax,h,_),d._extremes.lat=a(f.lataxis._ax,L,_)}N.exports={calcGeoJSON:o,plot:s}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(t,N,V){var y=t("../scatter/subtypes"),c=t("../../constants/numerical").BADNUM;N.exports=function(T,e){var a=T.cd,i=T.xaxis,n=T.yaxis,r=[],v=a[0].trace,s,o,b,g,d,f=!y.hasMarkers(v)&&!y.hasText(v);if(f)return[];if(e===!1)for(d=0;d<a.length;d++)a[d].selected=0;else for(d=0;d<a.length;d++)s=a[d],o=s.lonlat,o[0]!==c&&(b=i.c2p(o),g=n.c2p(o),e.contains([b,g],null,d,T)?(r.push({pointNumber:d,lon:o[0],lat:o[1]}),s.selected=1):s.selected=0);return r}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../components/color"),T=t("../scatter/style"),e=T.stylePoints,a=T.styleText;N.exports=function(r,v){v&&i(r,v)};function i(n,r){var v=r[0].trace,s=r[0].node3;s.style("opacity",r[0].trace.opacity),e(s,v,n),a(s,v,n),s.selectAll("path.js-line").style("fill","none").each(function(o){var b=y.select(this),g=o.trace,d=g.line||{};b.call(A.stroke,d.color).call(c.dashLine,d.dash||"",d.width||0),g.fill!=="none"&&b.call(A.fill,g.fillcolor)})}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(t,N,V){var y=t("../../plots/attributes"),c=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../components/colorscale/attributes"),e=t("../../lib/sort_object_keys"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll,n=t("./constants").DASHES,r=c.line,v=c.marker,s=v.line,o=N.exports=i({x:c.x,x0:c.x0,dx:c.dx,y:c.y,y0:c.y0,dy:c.dy,xperiod:c.xperiod,yperiod:c.yperiod,xperiod0:c.xperiod0,yperiod0:c.yperiod0,xperiodalignment:c.xperiodalignment,yperiodalignment:c.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),text:c.text,hovertext:c.hovertext,textposition:c.textposition,textfont:c.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(n),dflt:"solid"}},marker:a({},T("marker"),{symbol:v.symbol,angle:v.angle,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,opacity:v.opacity,colorbar:v.colorbar,line:a({},T("marker.line"),{width:s.width})}),connectgaps:c.connectgaps,fill:a({},c.fill,{dflt:"none"}),fillcolor:c.fillcolor,selected:{marker:c.selected.marker,textfont:c.selected.textfont},unselected:{marker:c.unselected.marker,textfont:c.unselected.textfont},opacity:y.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=c.hovertemplate,o.texttemplate=c.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(t,N,V){var y=t("./hover");N.exports={moduleType:"trace",name:"scattergl",basePlotModule:t("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../scatter/cross_trace_defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),hoverPoints:y.hoverPoints,selectPoints:t("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(t,N,V){var y=t("@plotly/point-cluster"),c=t("../../lib"),A=t("../../plots/cartesian/axis_ids"),T=t("../../plots/cartesian/autorange").findExtremes,e=t("../../plots/cartesian/align_period"),a=t("../scatter/calc"),i=a.calcMarkerSize,n=a.calcAxisExpansion,r=a.setFirstScatter,v=t("../scatter/colorscale_calc"),s=t("./convert"),o=t("./scene_update"),b=t("../../constants/numerical").BADNUM,g=t("./constants").TOO_MANY_POINTS;N.exports=function(l,x){var u=l._fullLayout,M=x._xA=A.getFromId(l,x.xaxis,"x"),w=x._yA=A.getFromId(l,x.yaxis,"y"),p=u._plots[x.xaxis+x.yaxis],_=x._length,h=_>=g,L=_*2,E={},S,P=M.makeCalcdata(x,"x"),F=w.makeCalcdata(x,"y"),I=e(x,M,"x",P),D=e(x,w,"y",F),R=I.vals,O=D.vals;x._x=R,x._y=O,x.xperiodalignment&&(x._origX=P,x._xStarts=I.starts,x._xEnds=I.ends),x.yperiodalignment&&(x._origY=F,x._yStarts=D.starts,x._yEnds=D.ends);var z=new Array(L),G=new Array(_);for(S=0;S<_;S++)z[S*2]=R[S]===b?NaN:R[S],z[S*2+1]=O[S]===b?NaN:O[S],G[S]=S;if(M.type==="log")for(S=0;S<L;S+=2)z[S]=M.c2l(z[S]);if(w.type==="log")for(S=1;S<L;S+=2)z[S]=w.c2l(z[S]);h&&M.type!=="log"&&w.type!=="log"?E.tree=y(z):E.ids=G,v(l,x);var Y=f(l,p,x,z,R,O),ee=o(l,p);r(u,x);var j;return h?Y.marker&&(j=Y.marker.sizeAvg||Math.max(Y.marker.size,3)):j=i(x,_),n(l,x,M,w,R,O,j),Y.errorX&&d(x,M,Y.errorX),Y.errorY&&d(x,w,Y.errorY),Y.fill&&!ee.fill2d&&(ee.fill2d=!0),Y.marker&&!ee.scatter2d&&(ee.scatter2d=!0),Y.line&&!ee.line2d&&(ee.line2d=!0),(Y.errorX||Y.errorY)&&!ee.error2d&&(ee.error2d=!0),Y.text&&!ee.glText&&(ee.glText=!0),Y.marker&&(Y.marker.snap=_),ee.lineOptions.push(Y.line),ee.errorXOptions.push(Y.errorX),ee.errorYOptions.push(Y.errorY),ee.fillOptions.push(Y.fill),ee.markerOptions.push(Y.marker),ee.markerSelectedOptions.push(Y.markerSel),ee.markerUnselectedOptions.push(Y.markerUnsel),ee.textOptions.push(Y.text),ee.textSelectedOptions.push(Y.textSel),ee.textUnselectedOptions.push(Y.textUnsel),ee.selectBatch.push([]),ee.unselectBatch.push([]),E._scene=ee,E.index=ee.count,E.x=R,E.y=O,E.positions=z,ee.count++,[{x:!1,y:!1,t:E,trace:x}]};function d(m,l,x){var u=m._extremes[l._id],M=T(l,x._bnds,{padded:!0});u.min=u.min.concat(M.min),u.max=u.max.concat(M.max)}function f(m,l,x,u,M,w){var p=s.style(m,x);if(p.marker&&(p.marker.positions=u),p.line&&u.length>1&&c.extendFlat(p.line,s.linePositions(m,x,u)),p.errorX||p.errorY){var _=s.errorBarPositions(m,x,u,M,w);p.errorX&&c.extendFlat(p.errorX,_.x),p.errorY&&c.extendFlat(p.errorY,_.y)}return p.text&&(c.extendFlat(p.text,{positions:u},s.textPosition(m,x,p.text,p.marker)),c.extendFlat(p.textSel,{positions:u},s.textPosition(m,x,p.text,p.markerSel)),c.extendFlat(p.textUnsel,{positions:u},s.textPosition(m,x,p.text,p.markerUnsel))),p}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(t,N,V){var y=20;N.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:y,SYMBOL_STROKE:y/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(t,N,V){var y=t("fast-isnumeric"),c=t("svg-path-sdf"),A=t("color-normalize"),T=t("../../registry"),e=t("../../lib"),a=t("../../components/drawing"),i=t("../../plots/cartesian/axis_ids"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/subtypes"),v=t("../scatter/make_bubble_size_func"),s=t("./helpers"),o=t("./constants"),b=t("../../constants/interactions").DESELECTDIM,g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},d=t("../../components/fx/helpers").appendArrayPointValue;function f(I,D){var R,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=I._context.plotGlPixelRatio;if(D.visible!==!0)return O;if(r.hasText(D)&&(O.text=m(I,D),O.textSel=u(I,D,D.selected),O.textUnsel=u(I,D,D.unselected)),r.hasMarkers(D)&&(O.marker=l(I,D),O.markerSel=x(I,D,D.selected),O.markerUnsel=x(I,D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var G=D.marker.opacity;for(O.markerUnsel.opacity=new Array(G.length),R=0;R<G.length;R++)O.markerUnsel.opacity[R]=b*G[R]}if(r.hasLines(D)){O.line={overlay:!0,thickness:D.line.width*z,color:D.line.color,opacity:D.opacity};var Y=(o.DASHES[D.line.dash]||[1]).slice();for(R=0;R<Y.length;++R)Y[R]*=D.line.width*z;O.line.dashes=Y}return D.error_x&&D.error_x.visible&&(O.errorX=M(D,D.error_x,z)),D.error_y&&D.error_y.visible&&(O.errorY=M(D,D.error_y,z)),!!D.fill&&D.fill!=="none"&&(O.fill={closed:!0,fill:D.fillcolor,thickness:0}),O}function m(I,D){var R=I._fullLayout,O=D._length,z=D.textfont,G=D.textposition,Y=Array.isArray(G)?G:[G],ee=z.color,j=z.size,X=z.family,ae={},he,K=I._context.plotGlPixelRatio,J=D.texttemplate;if(J){ae.text=[];var U=R._d3locale,H=Array.isArray(J),q=H?Math.min(J.length,O):O,re=H?function(_e){return J[_e]}:function(){return J};for(he=0;he<q;he++){var Z={i:he},Q=D._module.formatLabels(Z,D,R),ie={};d(ie,D,he);var oe=D._meta||{};ae.text.push(e.texttemplateString(re(he),Q,U,ie,Z,oe))}}else Array.isArray(D.text)&&D.text.length<O?ae.text=D.text.slice():ae.text=D.text;if(Array.isArray(ae.text))for(he=ae.text.length;he<O;he++)ae.text[he]="";for(ae.opacity=D.opacity,ae.font={},ae.align=[],ae.baseline=[],he=0;he<Y.length;he++){var ne=Y[he].split(/\s+/);switch(ne[1]){case"left":ae.align.push("right");break;case"right":ae.align.push("left");break;default:ae.align.push(ne[1])}switch(ne[0]){case"top":ae.baseline.push("bottom");break;case"bottom":ae.baseline.push("top");break;default:ae.baseline.push(ne[0])}}if(Array.isArray(ee))for(ae.color=new Array(O),he=0;he<O;he++)ae.color[he]=ee[he];else ae.color=ee;if(e.isArrayOrTypedArray(j)||Array.isArray(X))for(ae.font=new Array(O),he=0;he<O;he++){var le=ae.font[he]={};le.size=(e.isTypedArray(j)?j[he]:Array.isArray(j)?y(j[he])?j[he]:0:j)*K,le.family=Array.isArray(X)?X[he]:X}else ae.font={size:j*K,family:X};return ae}function l(I,D){var R=D._length,O=D.marker,z={},G,Y=e.isArrayOrTypedArray(O.symbol),ee=e.isArrayOrTypedArray(O.angle),j=e.isArrayOrTypedArray(O.color),X=e.isArrayOrTypedArray(O.line.color),ae=e.isArrayOrTypedArray(O.opacity),he=e.isArrayOrTypedArray(O.size),K=e.isArrayOrTypedArray(O.line.width),J;if(Y||(J=s.isOpenSymbol(O.symbol)),Y||j||X||ae||ee){z.symbols=new Array(R),z.angles=new Array(R),z.colors=new Array(R),z.borderColors=new Array(R);var U=O.symbol,H=O.angle,q=n(O,O.opacity,R),re=n(O.line,O.opacity,R);if(!Array.isArray(re[0])){var Z=re;for(re=Array(R),G=0;G<R;G++)re[G]=Z}if(!Array.isArray(q[0])){var Q=q;for(q=Array(R),G=0;G<R;G++)q[G]=Q}if(!Array.isArray(U)){var ie=U;for(U=Array(R),G=0;G<R;G++)U[G]=ie}if(!Array.isArray(H)){var oe=H;for(H=Array(R),G=0;G<R;G++)H[G]=oe}for(z.symbols=U,z.angles=H,z.colors=q,z.borderColors=re,G=0;G<R;G++)Y&&(J=s.isOpenSymbol(O.symbol[G])),J&&(re[G]=q[G].slice(),q[G]=q[G].slice(),q[G][3]=0);for(z.opacity=D.opacity,z.markers=new Array(R),G=0;G<R;G++)z.markers[G]=E({mx:z.symbols[G],ma:z.angles[G]},D)}else J?(z.color=A(O.color,"uint8"),z.color[3]=0,z.borderColor=A(O.color,"uint8")):(z.color=A(O.color,"uint8"),z.borderColor=A(O.line.color,"uint8")),z.opacity=D.opacity*O.opacity,z.marker=E({mx:O.symbol,ma:O.angle},D);var ne=1,le=v(D,ne),_e;if(he||K){var fe=z.sizes=new Array(R),ye=z.borderSizes=new Array(R),xe=0,me;if(he){for(G=0;G<R;G++)fe[G]=le(O.size[G]),xe+=fe[G];me=xe/R}else for(_e=le(O.size),G=0;G<R;G++)fe[G]=_e;if(K)for(G=0;G<R;G++)ye[G]=O.line.width[G];else for(_e=O.line.width,G=0;G<R;G++)ye[G]=_e;z.sizeAvg=me}else z.size=le(O&&O.size||10),z.borderSizes=le(O.line.width);return z}function x(I,D,R){var O=D.marker,z={};return R&&(R.marker&&R.marker.symbol?z=l(I,e.extendFlat({},O,R.marker)):R.marker&&(R.marker.size&&(z.size=R.marker.size),R.marker.color&&(z.colors=R.marker.color),R.marker.opacity!==void 0&&(z.opacity=R.marker.opacity))),z}function u(I,D,R){var O={};if(!R)return O;if(R.textfont){var z={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};R.textfont&&e.extendFlat(z.textfont,R.textfont),O=m(I,z)}return O}function M(I,D,R){var O={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(O=I.error_y),O}var w=o.SYMBOL_SDF_SIZE,p=o.SYMBOL_SIZE,_=o.SYMBOL_STROKE,h={},L=a.symbolFuncs[0](p*.05);function E(I,D){var R=I.mx;if(R==="circle")return null;var O,z,G=a.symbolNumber(R),Y=a.symbolFuncs[G%100],ee=!!a.symbolNoDot[G%100],j=!!a.symbolNoFill[G%100],X=s.isDotSymbol(R);if(I.ma&&(R+="_"+I.ma),h[R])return h[R];var ae=a.getMarkerAngle(I,D);return X&&!ee?O=Y(p*1.1,ae)+L:O=Y(p,ae),z=c(O,{w,h:w,viewBox:[-p,-p,p,p],stroke:j?_:-_}),h[R]=z,z||null}function S(I,D,R){var O=R.length,z=O/2,G,Y;if(r.hasLines(D)&&z)if(D.line.shape==="hv"){for(G=[],Y=0;Y<z-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?G.push(R[Y*2+2],R[Y*2+1]):G.push(NaN,NaN));G.push(R[O-2],R[O-1])}else if(D.line.shape==="hvh"){for(G=[],Y=0;Y<z-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?G.push(R[Y*2],R[Y*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var ee=(R[Y*2]+R[Y*2+2])/2;G.push(R[Y*2],R[Y*2+1],ee,R[Y*2+1],ee,R[Y*2+3])}G.push(R[O-2],R[O-1])}else if(D.line.shape==="vhv"){for(G=[],Y=0;Y<z-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?G.push(R[Y*2],R[Y*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var j=(R[Y*2+1]+R[Y*2+3])/2;G.push(R[Y*2],R[Y*2+1],R[Y*2],j,R[Y*2+2],j)}G.push(R[O-2],R[O-1])}else if(D.line.shape==="vh"){for(G=[],Y=0;Y<z-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?G.push(R[Y*2],R[Y*2+3]):G.push(NaN,NaN));G.push(R[O-2],R[O-1])}else G=R;var X=!1;for(Y=0;Y<G.length;Y++)if(isNaN(G[Y])){X=!0;break}var ae=X||G.length>o.TOO_MANY_POINTS||r.hasMarkers(D)?"rect":"round";if(X&&D.connectgaps){var he=G[0],K=G[1];for(Y=0;Y<G.length;Y+=2)isNaN(G[Y])||isNaN(G[Y+1])?(G[Y]=he,G[Y+1]=K):(he=G[Y],K=G[Y+1])}return{join:ae,positions:G}}function P(I,D,R,O,z){var G=T.getComponentMethod("errorbars","makeComputeError"),Y=i.getFromId(I,D.xaxis,"x"),ee=i.getFromId(I,D.yaxis,"y"),j=R.length/2,X={};function ae(he,K){var J=K._id.charAt(0),U=D["error_"+J];if(U&&U.visible&&(K.type==="linear"||K.type==="log")){for(var H=G(U),q={x:0,y:1}[J],re={x:[0,1,2,3],y:[2,3,0,1]}[J],Z=new Float64Array(4*j),Q=1/0,ie=-1/0,oe=0,ne=0;oe<j;oe++,ne+=4){var le=he[oe];if(y(le)){var _e=R[oe*2+q],fe=H(le,oe),ye=fe[0],xe=fe[1];if(y(ye)&&y(xe)){var me=le-ye,be=le+xe;Z[ne+re[0]]=_e-K.c2l(me),Z[ne+re[1]]=K.c2l(be)-_e,Z[ne+re[2]]=0,Z[ne+re[3]]=0,Q=Math.min(Q,le-ye),ie=Math.max(ie,le+xe)}}}X[J]={positions:R,errors:Z,_bnds:[Q,ie]}}}return ae(O,Y),ae(z,ee),X}function F(I,D,R,O){var z=D._length,G={},Y;if(r.hasMarkers(D)){var ee=R.font,j=R.align,X=R.baseline;for(G.offset=new Array(z),Y=0;Y<z;Y++){var ae=O.sizes?O.sizes[Y]:O.size,he=Array.isArray(ee)?ee[Y].size:ee.size,K=Array.isArray(j)?j.length>1?j[Y]:j[0]:j,J=Array.isArray(X)?X.length>1?X[Y]:X[0]:X,U=g[K],H=g[J],q=ae?ae/.8+1:0,re=-H*q-H*.5;G.offset[Y]=[U*q/he,re/he]}}return G}N.exports={style:f,markerStyle:l,markerSelection:x,linePositions:S,errorBarPositions:P,textPosition:F}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(t,N,V){var y=t("../../lib"),c=t("../../registry"),A=t("./helpers"),T=t("./attributes"),e=t("../scatter/constants"),a=t("../scatter/subtypes"),i=t("../scatter/xy_defaults"),n=t("../scatter/period_defaults"),r=t("../scatter/marker_defaults"),v=t("../scatter/line_defaults"),s=t("../scatter/fillcolor_defaults"),o=t("../scatter/text_defaults");N.exports=function(g,d,f,m){function l(L,E){return y.coerce(g,d,T,L,E)}var x=g.marker?A.isOpenSymbol(g.marker.symbol):!1,u=a.isBubble(g),M=i(g,d,m,l);if(!M){d.visible=!1;return}n(g,d,m,l),l("xhoverformat"),l("yhoverformat");var w=M<e.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("hovertemplate"),l("mode",w),a.hasLines(d)&&(l("connectgaps"),v(g,d,f,m,l),l("line.shape")),a.hasMarkers(d)&&(r(g,d,f,m,l,{noAngleRef:!0,noStandOff:!0}),l("marker.line.width",x||u?1:0)),a.hasText(d)&&(l("texttemplate"),o(g,d,m,l));var p=(d.line||{}).color,_=(d.marker||{}).color;l("fill"),d.fill!=="none"&&s(g,d,f,l);var h=c.getComponentMethod("errorbars","supplyDefaults");h(g,d,p||_||f,{axis:"y"}),h(g,d,p||_||f,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(d,l)}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color"),A=t("../../constants/interactions").DESELECTDIM;function T(e){var a=e[0],i=a.trace,n=a.t,r=n._scene,v=n.index,s=r.selectBatch[v],o=r.unselectBatch[v],b=r.textOptions[v],g=r.textSelectedOptions[v]||{},d=r.textUnselectedOptions[v]||{},f=y.extendFlat({},b),m,l;if(s.length||o.length){var x=g.color,u=d.color,M=b.color,w=Array.isArray(M);for(f.color=new Array(i._length),m=0;m<s.length;m++)l=s[m],f.color[l]=x||(w?M[l]:M);for(m=0;m<o.length;m++){l=o[m];var p=w?M[l]:M;f.color[l]=u||(x?p:c.addOpacity(p,A))}}r.glText[v].update(f)}N.exports={styleTextSelection:T}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(t,N,V){var y=t("../scatter/format_labels");N.exports=function(A,T,e){var a=A.i;return"x"in A||(A.x=T._x[a]),"y"in A||(A.y=T._y[a]),y(A,T,e)}},{"../scatter/format_labels":945}],996:[function(t,N,V){var y=t("./constants");V.isOpenSymbol=function(c){return typeof c=="string"?y.OPEN_RE.test(c):c%200>100},V.isDotSymbol=function(c){return typeof c=="string"?y.DOT_RE.test(c):c>200}},{"./constants":991}],997:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("../scatter/get_trace_color");function T(a,i,n,r){var v=a.cd,s=v[0].t,o=v[0].trace,b=a.xa,g=a.ya,d=s.x,f=s.y,m=b.c2p(i),l=g.c2p(n),x=a.distance,u;if(s.tree){var M=b.p2c(m-x),w=b.p2c(m+x),p=g.p2c(l-x),_=g.p2c(l+x);r==="x"?u=s.tree.range(Math.min(M,w),Math.min(g._rl[0],g._rl[1]),Math.max(M,w),Math.max(g._rl[0],g._rl[1])):u=s.tree.range(Math.min(M,w),Math.min(p,_),Math.max(M,w),Math.max(p,_))}else u=s.ids;var h,L,E,S,P,F,I,D,R,O=x;if(r==="x"){var z=!!o.xperiodalignment,G=!!o.yperiodalignment;for(P=0;P<u.length;P++){if(h=u[P],E=d[h],F=Math.abs(b.c2p(E)-m),z){var Y=b.c2p(o._xStarts[h]),ee=b.c2p(o._xEnds[h]);F=m>=Math.min(Y,ee)&&m<=Math.max(Y,ee)?0:1/0}if(F<O){if(O=F,S=f[h],I=g.c2p(S)-l,G){var j=g.c2p(o._yStarts[h]),X=g.c2p(o._yEnds[h]);I=l>=Math.min(j,X)&&l<=Math.max(j,X)?0:1/0}R=Math.sqrt(F*F+I*I),L=u[P]}}}else for(P=u.length-1;P>-1;P--)h=u[P],E=d[h],S=f[h],F=b.c2p(E)-m,I=g.c2p(S)-l,D=Math.sqrt(F*F+I*I),D<O&&(O=R=D,L=h);return a.index=L,a.distance=O,a.dxy=R,L===void 0?[a]:[e(a,d,f,o)]}function e(a,i,n,r){var v=a.xa,s=a.ya,o=a.distance,b=a.dxy,g=a.index,d={pointNumber:g,x:i[g],y:n[g]};d.tx=Array.isArray(r.text)?r.text[g]:r.text,d.htx=Array.isArray(r.hovertext)?r.hovertext[g]:r.hovertext,d.data=Array.isArray(r.customdata)?r.customdata[g]:r.customdata,d.tp=Array.isArray(r.textposition)?r.textposition[g]:r.textposition;var f=r.textfont;f&&(d.ts=c.isArrayOrTypedArray(f.size)?f.size[g]:f.size,d.tc=Array.isArray(f.color)?f.color[g]:f.color,d.tf=Array.isArray(f.family)?f.family[g]:f.family);var m=r.marker;m&&(d.ms=c.isArrayOrTypedArray(m.size)?m.size[g]:m.size,d.mo=c.isArrayOrTypedArray(m.opacity)?m.opacity[g]:m.opacity,d.mx=c.isArrayOrTypedArray(m.symbol)?m.symbol[g]:m.symbol,d.ma=c.isArrayOrTypedArray(m.angle)?m.angle[g]:m.angle,d.mc=c.isArrayOrTypedArray(m.color)?m.color[g]:m.color);var l=m&&m.line;l&&(d.mlc=Array.isArray(l.color)?l.color[g]:l.color,d.mlw=c.isArrayOrTypedArray(l.width)?l.width[g]:l.width);var x=m&&m.gradient;x&&x.type!=="none"&&(d.mgt=Array.isArray(x.type)?x.type[g]:x.type,d.mgc=Array.isArray(x.color)?x.color[g]:x.color);var u=v.c2p(d.x,!0),M=s.c2p(d.y,!0),w=d.mrc||1,p=r.hoverlabel;p&&(d.hbg=Array.isArray(p.bgcolor)?p.bgcolor[g]:p.bgcolor,d.hbc=Array.isArray(p.bordercolor)?p.bordercolor[g]:p.bordercolor,d.hts=c.isArrayOrTypedArray(p.font.size)?p.font.size[g]:p.font.size,d.htc=Array.isArray(p.font.color)?p.font.color[g]:p.font.color,d.htf=Array.isArray(p.font.family)?p.font.family[g]:p.font.family,d.hnl=c.isArrayOrTypedArray(p.namelength)?p.namelength[g]:p.namelength);var _=r.hoverinfo;_&&(d.hi=Array.isArray(_)?_[g]:_);var h=r.hovertemplate;h&&(d.ht=Array.isArray(h)?h[g]:h);var L={};L[a.index]=d;var E=r._origX,S=r._origY,P=c.extendFlat({},a,{color:A(r,d),x0:u-w,x1:u+w,xLabelVal:E?E[g]:d.x,y0:M-w,y1:M+w,yLabelVal:S?S[g]:d.y,cd:L,distance:o,spikeDistance:b,hovertemplate:d.ht});return d.htx?P.text=d.htx:d.tx?P.text=d.tx:r.text&&(P.text=r.text),c.fillText(d,r,P),y.getComponentMethod("errorbars","hoverInfo")(d,r,P),P}N.exports={hoverPoints:T,calcHover:e}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(t,N,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(t,N,b){var y=t("regl-scatter2d"),c=t("regl-line2d"),A=t("regl-error2d"),T=t("gl-text"),e=t("../../lib"),a=t("../../components/dragelement/helpers").selectMode,i=t("../../lib/prepare_regl"),n=t("../scatter/subtypes"),r=t("../scatter/link_traces"),v=t("./edit_style").styleTextSelection,s={};function o(g,d,f,m){var l=g._size,x=g.width*m,u=g.height*m,M=l.l*m,w=l.b*m,p=l.r*m,_=l.t*m,h=l.w*m,L=l.h*m;return[M+d.domain[0]*h,w+f.domain[0]*L,x-p-(1-d.domain[1])*h,u-_-(1-f.domain[1])*L]}var b=N.exports=function(d,f,m){if(!!m.length){var l=d._fullLayout,x=f._scene,u=f.xaxis,M=f.yaxis,w,p;if(!!x){var _=i(d,["ANGLE_instanced_arrays","OES_element_index_uint"],s);if(!_){x.init();return}var h=x.count,L=l._glcanvas.data()[0].regl;if(r(d,f,m),x.dirty){if(x.error2d===!0&&(x.error2d=A(L)),x.line2d===!0&&(x.line2d=c(L)),x.scatter2d===!0&&(x.scatter2d=y(L)),x.fill2d===!0&&(x.fill2d=c(L)),x.glText===!0)for(x.glText=new Array(h),w=0;w<h;w++)x.glText[w]=new T(L);if(x.glText){if(h>x.glText.length){var E=h-x.glText.length;for(w=0;w<E;w++)x.glText.push(new T(L))}else if(h<x.glText.length){var S=x.glText.length-h,P=x.glText.splice(h,S);P.forEach(function(Z){Z.destroy()})}for(w=0;w<h;w++)x.glText[w].update(x.textOptions[w])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(Z){if(Z&&Z.positions){for(var Q=Z.positions,ie=0;ie<Q.length&&(isNaN(Q[ie])||isNaN(Q[ie+1]));)ie+=2;for(var oe=Q.length-2;oe>ie&&(isNaN(Q[oe])||isNaN(Q[oe+1]));)oe-=2;Z.positions=Q.slice(ie,oe+2)}return Z}),x.line2d.update(x.lineOptions)),x.error2d){var F=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(F)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=e.repeat(null,h),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(Z,Q){var ie=m[Q];if(!(!Z||!ie||!ie[0]||!ie[0].trace)){var oe=ie[0],ne=oe.trace,le=oe.t,_e=x.lineOptions[Q],fe,ye,xe=[];ne._ownfill&&xe.push(Q),ne._nexttrace&&xe.push(Q+1),xe.length&&(x.fillOrder[Q]=xe);var me=[],be=_e&&_e.positions||le.positions,ke,De;if(ne.fill==="tozeroy"){for(ke=0;ke<be.length&&isNaN(be[ke+1]);)ke+=2;for(De=be.length-2;De>ke&&isNaN(be[De+1]);)De-=2;be[ke+1]!==0&&(me=[be[ke],0]),me=me.concat(be.slice(ke,De+2)),be[De+1]!==0&&(me=me.concat([be[De],0]))}else if(ne.fill==="tozerox"){for(ke=0;ke<be.length&&isNaN(be[ke]);)ke+=2;for(De=be.length-2;De>ke&&isNaN(be[De]);)De-=2;be[ke]!==0&&(me=[0,be[ke+1]]),me=me.concat(be.slice(ke,De+2)),be[De]!==0&&(me=me.concat([0,be[De+1]]))}else if(ne.fill==="toself"||ne.fill==="tonext"){for(me=[],fe=0,Z.splitNull=!0,ye=0;ye<be.length;ye+=2)(isNaN(be[ye])||isNaN(be[ye+1]))&&(me=me.concat(be.slice(fe,ye)),me.push(be[fe],be[fe+1]),me.push(null,null),fe=ye+2);me=me.concat(be.slice(fe)),fe&&me.push(be[fe],be[fe+1])}else{var He=ne._nexttrace;if(He){var Ae=x.lineOptions[Q+1];if(Ae){var Le=Ae.positions;if(ne.fill==="tonexty"){for(me=be.slice(),Q=Math.floor(Le.length/2);Q--;){var Ze=Le[Q*2],We=Le[Q*2+1];isNaN(Ze)||isNaN(We)||me.push(Ze,We)}Z.fill=He.fillcolor}}}}if(ne._prevtrace&&ne._prevtrace.fill==="tonext"){var ze=x.lineOptions[Q-1].positions,Ie=me.length/2;fe=Ie;var Ve=[fe];for(ye=0;ye<ze.length;ye+=2)(isNaN(ze[ye])||isNaN(ze[ye+1]))&&(Ve.push(ye/2+Ie+1),fe=ye+2);me=me.concat(ze),Z.hole=Ve}return Z.fillmode=ne.fill,Z.opacity=ne.opacity,Z.positions=me,Z}}),x.fill2d.update(x.fillOptions))}var I=l.dragmode,D=a(I),R=l.clickmode.indexOf("select")>-1;for(w=0;w<h;w++){var O=m[w][0],z=O.trace,G=O.t,Y=G.index,ee=z._length,j=G.x,X=G.y;if(z.selectedpoints||D||R){if(D||(D=!0),z.selectedpoints){var ae=x.selectBatch[Y]=e.selIndices2selPoints(z),he={};for(p=0;p<ae.length;p++)he[ae[p]]=1;var K=[];for(p=0;p<ee;p++)he[p]||K.push(p);x.unselectBatch[Y]=K}var J=G.xpx=new Array(ee),U=G.ypx=new Array(ee);for(p=0;p<ee;p++)J[p]=u.c2p(j[p]),U[p]=M.c2p(X[p])}else G.xpx=G.ypx=null}if(D){if(x.select2d||(x.select2d=y(l._glcanvas.data()[1].regl)),x.scatter2d){var H=new Array(h);for(w=0;w<h;w++)H[w]=x.selectBatch[w].length||x.unselectBatch[w].length?x.markerUnselectedOptions[w]:{};x.scatter2d.update(H)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&m.forEach(function(Z){var Q=((Z||[])[0]||{}).trace||{};n.hasText(Q)&&v(Z)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var q={viewport:o(l,u,M,d._context.plotGlPixelRatio),range:[(u._rl||u.range)[0],(M._rl||M.range)[0],(u._rl||u.range)[1],(M._rl||M.range)[1]]},re=e.repeat(q,x.count);x.fill2d&&x.fill2d.update(re),x.line2d&&x.line2d.update(re),x.error2d&&x.error2d.update(re.concat(re)),x.scatter2d&&x.scatter2d.update(re),x.select2d&&x.select2d.update(re),x.glText&&x.glText.forEach(function(Z){Z.update(q)})}}};b.reglPrecompiled=s},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){var e=T._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},i={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||(e=T._scene={},e.init=function(){y.extendFlat(e,i,a)},e.init(),e.update=function(r){var v=y.repeat(r,e.count);if(e.fill2d&&e.fill2d.update(v),e.scatter2d&&e.scatter2d.update(v),e.line2d&&e.line2d.update(v),e.error2d&&e.error2d.update(v.concat(v)),e.select2d&&e.select2d.update(v),e.glText)for(var s=0;s<e.count;s++)e.glText[s].update(r)},e.draw=function(){for(var r=e.count,v=e.fill2d,s=e.error2d,o=e.line2d,b=e.scatter2d,g=e.glText,d=e.select2d,f=e.selectBatch,m=e.unselectBatch,l=0;l<r;l++){if(v&&e.fillOrder[l]&&v.draw(e.fillOrder[l]),o&&e.lineOptions[l]&&o.draw(l),s&&(e.errorXOptions[l]&&s.draw(l),e.errorYOptions[l]&&s.draw(l+r)),b&&e.markerOptions[l])if(m[l].length){var x=y.repeat([],e.count);x[l]=m[l],b.draw(x)}else f[l].length||b.draw(l);g[l]&&e.textOptions[l]&&g[l].render()}d&&d.draw(f),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(r){r.destroy&&r.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,T._scene=null}),e.dirty||y.extendFlat(e,a),e}},{"../../lib":515}],1001:[function(t,N,V){var y=t("../scatter/subtypes"),c=t("./edit_style").styleTextSelection;N.exports=function(T,e){var a=T.cd,i=T.xaxis,n=T.yaxis,r=[],v=a[0].trace,s=a[0].t,o=v._length,b=s.x,g=s.y,d=s._scene,f=s.index;if(!d)return r;var m=y.hasText(v),l=y.hasMarkers(v),x=!l&&!m;if(v.visible!==!0||x)return r;var u=[],M=[];if(e!==!1&&!e.degenerate)for(var w=0;w<o;w++)e.contains([s.xpx[w],s.ypx[w]],!1,w,T)?(u.push(w),r.push({pointNumber:w,x:i.c2d(b[w]),y:n.c2d(g[w])})):M.push(w);if(l){var p=d.scatter2d;if(!u.length&&!M.length){var _=new Array(d.count);_[f]=d.markerOptions[f],p.update.apply(p,_)}else if(!d.selectBatch[f].length&&!d.unselectBatch[f].length){var h=new Array(d.count);h[f]=d.markerUnselectedOptions[f],p.update.apply(p,h)}}return d.selectBatch[f]=u,d.unselectBatch[f]=M,m&&c(a),r}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scattergeo/attributes"),T=t("../scatter/attributes"),e=t("../../plots/mapbox/layout_attributes"),a=t("../../plots/attributes"),i=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat,r=t("../../plot_api/edit_types").overrideAll,v=t("../../plots/mapbox/layout_attributes"),s=A.line,o=A.marker;N.exports=r({lon:A.lon,lat:A.lat,cluster:{enabled:{valType:"boolean"},maxzoom:n({},v.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:n({},o.opacity,{dflt:1})},mode:n({},T.mode,{dflt:"markers"}),text:n({},T.text,{}),texttemplate:c({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:n({},T.hovertext,{}),line:{color:s.color,width:s.width},connectgaps:T.connectgaps,marker:n({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},i("marker")),fill:A.fill,fillcolor:T.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:n({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:y()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../lib"),A=t("../../constants/numerical").BADNUM,T=t("../../lib/geojson_utils"),e=t("../../components/colorscale"),a=t("../../components/drawing"),i=t("../scatter/make_bubble_size_func"),n=t("../scatter/subtypes"),r=t("../../plots/mapbox/convert_text_opts"),v=t("../../components/fx/helpers").appendArrayPointValue,s=t("../../lib/svg_text_utils").NEWLINES,o=t("../../lib/svg_text_utils").BR_TAG_ALL;N.exports=function(M,w){var p=w[0].trace,_=p.visible===!0&&p._length!==0,h=p.fill!=="none",L=n.hasLines(p),E=n.hasMarkers(p),S=n.hasText(p),P=E&&p.marker.symbol==="circle",F=E&&p.marker.symbol!=="circle",I=p.cluster&&p.cluster.enabled,D=b("fill"),R=b("line"),O=b("circle"),z=b("symbol"),G={fill:D,line:R,circle:O,symbol:z};if(!_)return G;var Y;if((h||L)&&(Y=T.calcTraceToLineCoords(w)),h&&(D.geojson=T.makePolygon(Y),D.layout.visibility="visible",c.extendFlat(D.paint,{"fill-color":p.fillcolor})),L&&(R.geojson=T.makeLine(Y),R.layout.visibility="visible",c.extendFlat(R.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),P){var ee=g(w);O.geojson=ee.geojson,O.layout.visibility="visible",I&&(O.filter=["!",["has","point_count"]],G.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(p.cluster.color,p.cluster.step),"circle-radius":x(p.cluster.size,p.cluster.step),"circle-opacity":x(p.cluster.opacity,p.cluster.step)}},G.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),c.extendFlat(O.paint,{"circle-color":ee.mcc,"circle-radius":ee.mrc,"circle-opacity":ee.mo})}if(P&&I&&(O.filter=["!",["has","point_count"]]),(F||S)&&(z.geojson=d(w,M),c.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(c.extendFlat(z.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&p.marker.angle!=="auto"&&c.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=p.marker.allowoverlap,c.extendFlat(z.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),S)){var j=(p.marker||{}).size,X=r(p.textposition,j);c.extendFlat(z.layout,{"text-size":p.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),c.extendFlat(z.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return G};function b(u){return{type:u,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function g(u){var M=u[0].trace,w=M.marker,p=M.selectedpoints,_=c.isArrayOrTypedArray(w.color),h=c.isArrayOrTypedArray(w.size),L=c.isArrayOrTypedArray(w.opacity),E;function S(j){return M.opacity*j}function P(j){return j/2}var F;_&&(e.hasColorscale(M,"marker")?F=e.makeColorScaleFuncFromTrace(w):F=c.identity);var I;h&&(I=i(M));var D;L&&(D=function(j){var X=y(j)?+c.constrain(j,0,1):0;return S(X)});var R=[];for(E=0;E<u.length;E++){var O=u[E],z=O.lonlat;if(!l(z)){var G={};F&&(G.mcc=O.mcc=F(O.mc)),I&&(G.mrc=O.mrc=I(O.ms)),D&&(G.mo=D(O.mo)),p&&(G.selected=O.selected||0),R.push({type:"Feature",id:E+1,geometry:{type:"Point",coordinates:z},properties:G})}}var Y;if(p)for(Y=a.makeSelectedPointStyleFns(M),E=0;E<R.length;E++){var ee=R[E].properties;Y.selectedOpacityFn&&(ee.mo=S(Y.selectedOpacityFn(ee))),Y.selectedColorFn&&(ee.mcc=Y.selectedColorFn(ee)),Y.selectedSizeFn&&(ee.mrc=Y.selectedSizeFn(ee))}return{geojson:{type:"FeatureCollection",features:R},mcc:_||Y&&Y.selectedColorFn?{type:"identity",property:"mcc"}:w.color,mrc:h||Y&&Y.selectedSizeFn?{type:"identity",property:"mrc"}:P(w.size),mo:L||Y&&Y.selectedOpacityFn?{type:"identity",property:"mo"}:S(w.opacity)}}function d(u,M){for(var w=M._fullLayout,p=u[0].trace,_=p.marker||{},h=_.symbol,L=_.angle,E=h!=="circle"?f(h):m,S=L!=="auto"?f(L,!0):m,P=n.hasText(p)?f(p.text):m,F=[],I=0;I<u.length;I++){var D=u[I];if(!l(D.lonlat)){var R=p.texttemplate,O;if(R){var z=Array.isArray(R)?R[I]||"":R,G=p._module.formatLabels(D,p,w),Y={};v(Y,p,D.i);var ee=p._meta||{};O=c.texttemplateString(z,G,w._d3locale,Y,D,ee)}else O=P(I);O&&(O=O.replace(s,"").replace(o,`
`)),F.push({type:"Feature",geometry:{type:"Point",coordinates:D.lonlat},properties:{symbol:E(I),angle:S(I),text:O}})}}return{type:"FeatureCollection",features:F}}function f(u,M){return c.isArrayOrTypedArray(u)?M?function(w){return y(u[w])?+u[w]:0}:function(w){return u[w]}:u?function(){return u}:m}function m(){return""}function l(u){return u[0]===A}function x(u,M){var w;if(c.isArrayOrTypedArray(u)&&c.isArrayOrTypedArray(M)){w=["step",["get","point_count"],u[0]];for(var p=1;p<u.length;p++)w.push(M[p-1],u[p])}else w=u;return w}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),i=t("./attributes");N.exports=function(v,s,o,b){function g(_,h){return y.coerce(v,s,i,_,h)}function d(_,h){return y.coerce2(v,s,i,_,h)}var f=n(v,s,g);if(!f){s.visible=!1;return}if(g("text"),g("texttemplate"),g("hovertext"),g("hovertemplate"),g("mode"),g("below"),c.hasLines(s)&&(T(v,s,o,b,g,{noDash:!0}),g("connectgaps")),c.hasMarkers(s)){A(v,s,o,b,g,{noLine:!0,noAngle:!0}),g("marker.allowoverlap"),g("marker.angle");var m=s.marker;m.symbol!=="circle"&&(y.isArrayOrTypedArray(m.size)&&(m.size=m.size[0]),y.isArrayOrTypedArray(m.color)&&(m.color=m.color[0]))}var l=d("cluster.maxzoom"),x=d("cluster.step"),u=d("cluster.color",s.marker&&s.marker.color||o),M=d("cluster.size"),w=d("cluster.opacity"),p=l!==!1||x!==!1||u!==!1||M!==!1||w!==!1;g("cluster.enabled",p),c.hasText(s)&&e(v,s,b,g,{noSelect:!0}),g("fill"),s.fill!=="none"&&a(v,s,o,g),y.coerceSelectionMarkerOpacity(s,g)};function n(r,v,s){var o=s("lon")||[],b=s("lat")||[],g=Math.min(o.length,b.length);return v._length=g,g}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(t,N,V){N.exports=function(c,A){return c.lon=A.lon,c.lat=A.lat,c}},{}],1006:[function(t,N,V){var y=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot,n=i.mockAxis,r=A.lonlat;return a.lonLabel=y.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=y.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],1007:[function(t,N,V){var y=t("../../components/fx"),c=t("../../lib"),A=t("../scatter/get_trace_color"),T=c.fillText,e=t("../../constants/numerical").BADNUM,a=t("../../plots/mapbox/constants").traceLayerPrefix;function i(r,v,s){var o=r.cd,b=o[0].trace,g=r.xa,d=r.ya,f=r.subplot,m=[],l=a+b.uid+"-circle",x=b.cluster&&b.cluster.enabled;if(x){var u=f.map.queryRenderedFeatures(null,{layers:[l]});m=u.map(function(R){return R.id})}var M=v>=0?Math.floor((v+180)/360):Math.ceil((v-180)/360),w=M*360,p=v-w;function _(R){var O=R.lonlat;if(O[0]===e||x&&m.indexOf(R.i+1)===-1)return 1/0;var z=c.modHalf(O[0],360),G=O[1],Y=f.project([z,G]),ee=Y.x-g.c2p([p,G]),j=Y.y-d.c2p([z,s]),X=Math.max(3,R.mrc||0);return Math.max(Math.sqrt(ee*ee+j*j)-X,1-3/X)}if(y.getClosest(o,_,r),r.index!==!1){var h=o[r.index],L=h.lonlat,E=[c.modHalf(L[0],360)+w,L[1]],S=g.c2p(E),P=d.c2p(E),F=h.mrc||1;r.x0=S-F,r.x1=S+F,r.y0=P-F,r.y1=P+F;var I={};I[b.subplot]={_subplot:f};var D=b._module.formatLabels(h,b,I);return r.lonLabel=D.lonLabel,r.latLabel=D.latLabel,r.color=A(b,h),r.extraText=n(b,h,o[0].t.labels),r.hovertemplate=b.hovertemplate,[r]}}function n(r,v,s){if(r.hovertemplate)return;var o=v.hi||r.hoverinfo,b=o.split("+"),g=b.indexOf("all")!==-1,d=b.indexOf("lon")!==-1,f=b.indexOf("lat")!==-1,m=v.lonlat,l=[];function x(u){return u+"\xB0"}return g||d&&f?l.push("("+x(m[1])+", "+x(m[0])+")"):d?l.push(s.lon+x(m[0])):f&&l.push(s.lat+x(m[1])),(g||b.indexOf("text")!==-1)&&T(v,r,l),l.join("<br>")}N.exports={hoverPoints:i,getExtraText:n}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/mapbox/constants":620,"../scatter/get_trace_color":946}],1008:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("../scattergeo/calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),styleOnSelect:function(y,c){if(c){var A=c[0].trace;A._glTrace.update(c)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(t,N,V){var y=t("../../lib"),c=t("./convert"),A=t("../../plots/mapbox/constants").traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function e(i,n,r){this.type="scattermapbox",this.subplot=i,this.uid=n,this.clusterEnabled=r,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol",cluster:"source-"+n+"-circle",clusterCount:"source-"+n+"-circle"},this.layerIds={fill:A+n+"-fill",line:A+n+"-line",circle:A+n+"-circle",symbol:A+n+"-symbol",cluster:A+n+"-cluster",clusterCount:A+n+"-cluster-count"},this.below=null}var a=e.prototype;a.addSource=function(i,n,r){var v={type:"geojson",data:n.geojson};r&&r.enabled&&y.extendFlat(v,{cluster:!0,clusterMaxZoom:r.maxzoom}),this.subplot.map.addSource(this.sourceIds[i],v)},a.setSourceData=function(i,n){this.subplot.map.getSource(this.sourceIds[i]).setData(n.geojson)},a.addLayer=function(i,n,r){var v={type:n.type,id:this.layerIds[i],source:this.sourceIds[i],layout:n.layout,paint:n.paint};n.filter&&(v.filter=n.filter),this.subplot.addLayer(v,r)},a.update=function(n){var r=n[0].trace,v=this.subplot,s=v.map,o=c(v.gd,n),b=v.belowLookup["trace-"+this.uid],g,d,f,m=!!(r.cluster&&r.cluster.enabled),l=!!this.clusterEnabled;if(b!==this.below){var x=T.nonCluster;for(g=x.length-1;g>=0;g--)d=x[g],s.removeLayer(this.layerIds[d]);for(g=0;g<x.length;g++)d=x[g],f=o[d],this.addLayer(d,f,b);this.below=b}else if(m&&!l){for(g=T.nonCluster.length-1;g>=0;g--)d=T.nonCluster[g],s.removeLayer(this.layerIds[d]),s.removeSource(this.sourceIds[d]);for(this.addSource("circle",o.circle,r.cluster),g=0;g<T.cluster.length;g++)d=T.cluster[g],f=o[d],this.addLayer(d,f,b);this.clusterEnabled=m}else if(!m&&l){for(g=0;g<T.cluster.length;g++)d=T.cluster[g],s.removeLayer(this.layerIds[d]);for(s.removeSource(this.sourceIds.circle),g=0;g<T.nonCluster.length;g++)d=T.nonCluster[g],f=o[d],this.addSource(d,f,r.cluster),this.addLayer(d,f,b);this.clusterEnabled=m}n[0].trace._glTrace=this},a.dispose=function(){for(var n=this.subplot.map,r=this.clusterEnabled?T.cluster:T.nonCluster,v=r.length-1;v>=0;v--){var s=r[v];n.removeLayer(this.layerIds[s]),n.removeSource(this.sourceIds[s])}},N.exports=function(n,r){var v=r[0].trace,s=v.cluster&&v.cluster.enabled,o=new e(n,v.uid,s),b=c(n.gd,r),g=o.below=n.belowLookup["trace-"+v.uid],d,f,m;if(s)for(o.addSource("circle",b.circle,v.cluster),d=0;d<T.cluster.length;d++)f=T.cluster[d],m=b[f],o.addLayer(f,m,g);else for(d=0;d<T.nonCluster.length;d++)f=T.nonCluster[d],m=b[f],o.addSource(f,m,v.cluster),o.addLayer(f,m,g);return r[0].trace._glTrace=o,o}},{"../../lib":515,"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/subtypes"),A=t("../../constants/numerical").BADNUM;N.exports=function(e,a){var i=e.cd,n=e.xaxis,r=e.yaxis,v=[],s=i[0].trace,o;if(!c.hasMarkers(s))return[];if(a===!1)for(o=0;o<i.length;o++)i[o].selected=0;else for(o=0;o<i.length;o++){var b=i[o],g=b.lonlat;if(g[0]!==A){var d=[y.modHalf(g[0],360),g[1]],f=[n.c2p(d),r.c2p(d)];a.contains(f,null,o,e)?(v.push({pointNumber:o,lon:g[0],lat:g[1]}),b.selected=1):b.selected=0}}return v}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("../scatter/attributes"),e=t("../../plots/attributes"),a=T.line;N.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:c({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:A({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:A({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:A({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:A({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:y(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../constants/numerical").BADNUM,A=t("../../plots/cartesian/axes"),T=t("../scatter/colorscale_calc"),e=t("../scatter/arrays_to_calcdata"),a=t("../scatter/calc_selection"),i=t("../scatter/calc").calcMarkerSize;N.exports=function(r,v){for(var s=r._fullLayout,o=v.subplot,b=s[o].radialaxis,g=s[o].angularaxis,d=b.makeCalcdata(v,"r"),f=g.makeCalcdata(v,"theta"),m=v._length,l=new Array(m),x=0;x<m;x++){var u=d[x],M=f[x],w=l[x]={};y(u)&&y(M)?(w.r=u,w.theta=M):w.r=c}var p=i(v,m);return v._extremes.x=A.findExtremes(b,d,{ppad:p}),T(r,v),e(l,v),a(l,v),l}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");function v(o,b,g,d){function f(x,u){return y.coerce(o,b,r,x,u)}var m=s(o,b,d,f);if(!m){b.visible=!1;return}f("thetaunit"),f("mode",m<n?"lines+markers":"lines"),f("text"),f("hovertext"),b.hoveron!=="fills"&&f("hovertemplate"),c.hasLines(b)&&(T(o,b,g,d,f,{backoff:!0}),e(o,b,f),f("connectgaps")),c.hasMarkers(b)&&A(o,b,g,d,f,{gradient:!0}),c.hasText(b)&&(f("texttemplate"),a(o,b,d,f));var l=[];(c.hasMarkers(b)||c.hasText(b))&&(f("cliponaxis"),f("marker.maxdisplayed"),l.push("points")),f("fill"),b.fill!=="none"&&(i(o,b,g,f),c.hasLines(b)||e(o,b,f)),(b.fill==="tonext"||b.fill==="toself")&&l.push("fills"),f("hoveron",l.join("+")||"points"),y.coerceSelectionMarkerOpacity(b,f)}function s(o,b,g,d){var f=d("r"),m=d("theta"),l;if(f)m?l=Math.min(f.length,m.length):(l=f.length,d("theta0"),d("dtheta"));else{if(!m)return 0;l=b.theta.length,d("r0"),d("dr")}return b._length=l,l}N.exports={handleRThetaDefaults:s,supplyDefaults:v}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes");N.exports=function(T,e,a){var i={},n=a[e.subplot]._subplot,r,v;n?(r=n.radialAxis,v=n.angularAxis):(n=a[e.subplot],r=n.radialaxis,v=n.angularaxis);var s=r.c2l(T.r);i.rLabel=c.tickText(r,s,!0).text;var o=v.thetaunit==="degrees"?y.rad2deg(T.theta):T.theta;return i.thetaLabel=c.tickText(v,o,!0).text,i}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(t,N,V){var y=t("../scatter/hover");function c(T,e,a,i){var n=y(T,e,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var v=T.subplot,s=r.cd[r.index],o=r.trace;if(!!v.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,A(s,o,v,r),r.hovertemplate=o.hovertemplate,n}}function A(T,e,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="r",r._hovertitle="\u03B8";var v={};v[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,v);i.rLabel=s.rLabel,i.thetaLabel=s.thetaLabel;var o=T.hi||e.hoverinfo,b=[];function g(f,m){b.push(f._hovertitle+": "+m)}if(!e.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["r","theta","text"]),d.indexOf("r")!==-1&&g(n,i.rLabel),d.indexOf("theta")!==-1&&g(r,i.thetaLabel),d.indexOf("text")!==-1&&i.text&&(b.push(i.text),delete i.text),i.extraText=b.join("<br>")}}N.exports={hoverPoints:c,makeHoverPointText:A}},{"../scatter/hover":947}],1016:[function(t,N,V){N.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(t,N,V){var y=t("../scatter/plot"),c=t("../../constants/numerical").BADNUM;N.exports=function(T,e,a){for(var i=e.layers.frontplot.select("g.scatterlayer"),n=e.xaxis,r=e.yaxis,v={xaxis:n,yaxis:r,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},s=e.radialAxis,o=e.angularAxis,b=0;b<a.length;b++)for(var g=a[b],d=0;d<g.length;d++){d===0&&(g[0].trace._xA=n,g[0].trace._yA=r);var f=g[d],m=f.r;if(m===c)f.x=f.y=c;else{var l=s.c2g(m),x=o.c2g(f.theta);f.x=l*Math.cos(x),f.y=l*Math.sin(x)}}y(T,v,a,i)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(t,N,V){var y=t("../scatterpolar/attributes"),c=t("../scattergl/attributes"),A=t("../../plots/template_attributes").texttemplateAttrs;N.exports={mode:y.mode,r:y.r,theta:y.theta,r0:y.r0,dr:y.dr,theta0:y.theta0,dtheta:y.dtheta,thetaunit:y.thetaunit,text:y.text,texttemplate:A({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,hovertemplate:y.hovertemplate,line:c.line,connectgaps:c.connectgaps,marker:c.marker,fill:c.fill,fillcolor:c.fillcolor,textposition:c.textposition,textfont:c.textfont,hoverinfo:y.hoverinfo,selected:y.selected,unselected:y.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(t,N,V){N.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(t,N,V){var y=t("../scatter/colorscale_calc"),c=t("../scatter/calc").calcMarkerSize,A=t("../scattergl/convert"),T=t("../../plots/cartesian/axes"),e=t("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(i,n){var r=i._fullLayout,v=n.subplot,s=r[v].radialaxis,o=r[v].angularaxis,b=n._r=s.makeCalcdata(n,"r"),g=n._theta=o.makeCalcdata(n,"theta"),d=n._length,f={};d<b.length&&(b=b.slice(0,d)),d<g.length&&(g=g.slice(0,d)),f.r=b,f.theta=g,y(i,n);var m=f.opts=A.style(i,n),l;return d<e?l=c(n,d):m.marker&&(l=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),n._extremes.x=T.findExtremes(s,b,{ppad:l}),[{x:!1,y:!1,t:f,trace:n}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatterpolar/defaults").handleRThetaDefaults,T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");N.exports=function(s,o,b,g){function d(m,l){return y.coerce(s,o,r,m,l)}var f=A(s,o,g,d);if(!f){o.visible=!1;return}d("thetaunit"),d("mode",f<n?"lines+markers":"lines"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate"),c.hasLines(o)&&(e(s,o,b,g,d),d("connectgaps")),c.hasMarkers(o)&&T(s,o,b,g,d,{noAngleRef:!0,noStandOff:!0}),c.hasText(o)&&(d("texttemplate"),a(s,o,g,d)),d("fill"),o.fill!=="none"&&i(s,o,b,d),y.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(t,N,V){var y=t("../scatterpolar/format_labels");N.exports=function(A,T,e){var a=A.i;return"r"in A||(A.r=T._r[a]),"theta"in A||(A.theta=T._theta[a]),y(A,T,e)}},{"../scatterpolar/format_labels":1014}],1023:[function(t,N,V){var y=t("../scattergl/hover"),c=t("../scatterpolar/hover").makeHoverPointText;function A(T,e,a,i){var n=T.cd,r=n[0].t,v=r.r,s=r.theta,o=y.hoverPoints(T,e,a,i);if(!(!o||o[0].index===!1)){var b=o[0];if(b.index===void 0)return o;var g=T.subplot,d=b.cd[b.index],f=b.trace;if(d.r=v[b.index],d.theta=s[b.index],!!g.isPtInside(d))return b.xLabelVal=void 0,b.yLabelVal=void 0,c(d,f,g,b),o}}N.exports={hoverPoints:A}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(t,N,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(t,N,V){var y=t("@plotly/point-cluster"),c=t("fast-isnumeric"),A=t("../scattergl/plot"),T=t("../scattergl/scene_update"),e=t("../scattergl/convert"),a=t("../../lib"),i=t("../scattergl/constants").TOO_MANY_POINTS,n={};N.exports=function(v,s,o){if(!!o.length){var b=s.radialAxis,g=s.angularAxis,d=T(v,s);return o.forEach(function(f){if(!(!f||!f[0]||!f[0].trace)){var m=f[0],l=m.trace,x=m.t,u=l._length,M=x.r,w=x.theta,p=x.opts,_,h=M.slice(),L=w.slice();for(_=0;_<M.length;_++)s.isPtInside({r:M[_],theta:w[_]})||(h[_]=NaN,L[_]=NaN);var E=new Array(u*2),S=Array(u),P=Array(u);for(_=0;_<u;_++){var F=h[_],I,D;if(c(F)){var R=b.c2g(F),O=g.c2g(L[_],l.thetaunit);I=R*Math.cos(O),D=R*Math.sin(O)}else I=D=NaN;S[_]=E[_*2]=I,P[_]=E[_*2+1]=D}x.tree=y(E),p.marker&&u>=i&&(p.marker.cluster=x.tree),p.marker&&(p.markerSel.positions=p.markerUnsel.positions=p.marker.positions=E),p.line&&E.length>1&&a.extendFlat(p.line,e.linePositions(v,l,E)),p.text&&(a.extendFlat(p.text,{positions:E},e.textPosition(v,l,p.text,p.marker)),a.extendFlat(p.textSel,{positions:E},e.textPosition(v,l,p.text,p.markerSel)),a.extendFlat(p.textUnsel,{positions:E},e.textPosition(v,l,p.text,p.markerUnsel))),p.fill&&!d.fill2d&&(d.fill2d=!0),p.marker&&!d.scatter2d&&(d.scatter2d=!0),p.line&&!d.line2d&&(d.line2d=!0),p.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(p.line),d.fillOptions.push(p.fill),d.markerOptions.push(p.marker),d.markerSelectedOptions.push(p.markerSel),d.markerUnselectedOptions.push(p.markerUnsel),d.textOptions.push(p.text),d.textSelectedOptions.push(p.textSel),d.textUnselectedOptions.push(p.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),x.x=S,x.y=P,x.rawx=S,x.rawy=P,x.r=M,x.theta=w,x.positions=E,x._scene=d,x.index=d.count,d.count++}}),A(v,s,o)}},N.exports.reglPrecompiled=n},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("../scatter/attributes"),e=t("../../plots/attributes"),a=T.line;N.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:c({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:A({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:A({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:A({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:A({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:y(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../../constants/numerical").BADNUM,A=t("../scatter/colorscale_calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),a=t("../scatter/calc").calcMarkerSize;N.exports=function(n,r){for(var v=n._fullLayout,s=r.subplot,o=v[s].realaxis,b=v[s].imaginaryaxis,g=o.makeCalcdata(r,"real"),d=b.makeCalcdata(r,"imag"),f=r._length,m=new Array(f),l=0;l<f;l++){var x=g[l],u=d[l],M=m[l]={};y(x)&&y(u)?(M.real=x,M.imag=u):M.real=c}return a(r,f),A(n,r),T(m,r),e(m,r),m}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");N.exports=function(o,b,g,d){function f(x,u){return y.coerce(o,b,r,x,u)}var m=v(o,b,d,f);if(!m){b.visible=!1;return}f("mode",m<n?"lines+markers":"lines"),f("text"),f("hovertext"),b.hoveron!=="fills"&&f("hovertemplate"),c.hasLines(b)&&(T(o,b,g,d,f,{backoff:!0}),e(o,b,f),f("connectgaps")),c.hasMarkers(b)&&A(o,b,g,d,f,{gradient:!0}),c.hasText(b)&&(f("texttemplate"),a(o,b,d,f));var l=[];(c.hasMarkers(b)||c.hasText(b))&&(f("cliponaxis"),f("marker.maxdisplayed"),l.push("points")),f("fill"),b.fill!=="none"&&(i(o,b,g,f),c.hasLines(b)||e(o,b,f)),(b.fill==="tonext"||b.fill==="toself")&&l.push("fills"),f("hoveron",l.join("+")||"points"),y.coerceSelectionMarkerOpacity(b,f)};function v(s,o,b,g){var d=g("real"),f=g("imag"),m;return d&&f&&(m=Math.min(d.length,f.length)),o._length=m,m}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(t,N,V){var y=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot;return a.realLabel=y.tickText(i.radialAxis,A.real,!0).text,a.imagLabel=y.tickText(i.angularAxis,A.imag,!0).text,a}},{"../../plots/cartesian/axes":566}],1030:[function(t,N,V){var y=t("../scatter/hover");function c(T,e,a,i){var n=y(T,e,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var v=T.subplot,s=r.cd[r.index],o=r.trace;if(!!v.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,A(s,o,v,r),r.hovertemplate=o.hovertemplate,n}}function A(T,e,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="real",r._hovertitle="imag";var v={};v[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,v);i.realLabel=s.realLabel,i.imagLabel=s.imagLabel;var o=T.hi||e.hoverinfo,b=[];function g(f,m){b.push(f._hovertitle+": "+m)}if(!e.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["real","imag","text"]),d.indexOf("real")!==-1&&g(n,i.realLabel),d.indexOf("imag")!==-1&&g(r,i.imagLabel),d.indexOf("text")!==-1&&i.text&&(b.push(i.text),delete i.text),i.extraText=b.join("<br>")}}N.exports={hoverPoints:c,makeHoverPointText:A}},{"../scatter/hover":947}],1031:[function(t,N,V){N.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(t,N,V){var y=t("../scatter/plot"),c=t("../../constants/numerical").BADNUM,A=t("../../plots/smith/helpers"),T=A.smith;N.exports=function(a,i,n){for(var r=i.layers.frontplot.select("g.scatterlayer"),v=i.xaxis,s=i.yaxis,o={xaxis:v,yaxis:s,plot:i.framework,layerClipId:i._hasClipOnAxisFalse?i.clipIds.forTraces:null},b=0;b<n.length;b++)for(var g=n[b],d=0;d<g.length;d++){d===0&&(g[0].trace._xA=v,g[0].trace._yA=s);var f=g[d],m=f.real;if(m===c)f.x=f.y=c;else{var l=T([m,f.imag]);f.x=l[0],f.y=l[1]}}y(a,o,n,r)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scatter/attributes"),T=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat,n=A.marker,r=A.line,v=n.line;N.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},A.mode,{dflt:"markers"}),text:i({},A.text,{}),texttemplate:c({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},A.hovertext,{}),line:{color:r.color,width:r.width,dash:a,backoff:r.backoff,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:A.connectgaps,cliponaxis:A.cliponaxis,fill:i({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A.fillcolor,marker:i({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:n.angleref,standoff:n.standoff,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:i({width:v.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:A.textfont,textposition:A.textposition,selected:A.selected,unselected:A.unselected,hoverinfo:i({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:A.hoveron,hovertemplate:y()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(t,N,V){var y=t("fast-isnumeric"),c=t("../scatter/colorscale_calc"),A=t("../scatter/arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,a=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};N.exports=function(r,v){var s=r._fullLayout[v.subplot],o=s.sum,b=v.sum||o,g={a:v.a,b:v.b,c:v.c},d,f,m,l,x,u;for(d=0;d<a.length;d++)if(m=a[d],!g[m]){for(x=g[i[m][0]],u=g[i[m][1]],l=new Array(x.length),f=0;f<x.length;f++)l[f]=b-x[f]-u[f];g[m]=l}var M=v._length,w=new Array(M),p,_,h,L,E,S;for(d=0;d<M;d++)p=g.a[d],_=g.b[d],h=g.c[d],y(p)&&y(_)&&y(h)?(p=+p,_=+_,h=+h,L=o/(p+_+h),L!==1&&(p*=L,_*=L,h*=L),S=p,E=h-_,w[d]={x:E,y:S,a:p,b:_,c:h}):w[d]={x:!1,y:!1};return e(v,M),c(r,v),A(w,v),T(w,v),w}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/constants"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/line_shape_defaults"),i=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");N.exports=function(s,o,b,g){function d(w,p){return y.coerce(s,o,r,w,p)}var f=d("a"),m=d("b"),l=d("c"),x;if(f?(x=f.length,m?(x=Math.min(x,m.length),l&&(x=Math.min(x,l.length))):l?x=Math.min(x,l.length):x=0):m&&l&&(x=Math.min(m.length,l.length)),!x){o.visible=!1;return}o._length=x,d("sum"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate");var u=x<c.PTS_LINESONLY?"lines+markers":"lines";d("mode",u),A.hasLines(o)&&(e(s,o,b,g,d,{backoff:!0}),a(s,o,d),d("connectgaps")),A.hasMarkers(o)&&T(s,o,b,g,d,{gradient:!0}),A.hasText(o)&&(d("texttemplate"),i(s,o,g,d));var M=[];(A.hasMarkers(o)||A.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),M.push("points")),d("fill"),o.fill!=="none"&&(n(s,o,b,d),A.hasLines(o)||a(s,o,d)),(o.fill==="tonext"||o.fill==="toself")&&M.push("fills"),d("hoveron",M.join("+")||"points"),y.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(t,N,V){N.exports=function(c,A,T,e,a){if(A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),e[a]){var i=e[a];c.a=i.a,c.b=i.b,c.c=i.c}else c.a=A.a,c.b=A.b,c.c=A.c;return c}},{}],1037:[function(t,N,V){var y=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot;return a.aLabel=y.tickText(i.aaxis,A.a,!0).text,a.bLabel=y.tickText(i.baxis,A.b,!0).text,a.cLabel=y.tickText(i.caxis,A.c,!0).text,a}},{"../../plots/cartesian/axes":566}],1038:[function(t,N,V){var y=t("../scatter/hover");N.exports=function(A,T,e,a){var i=y(A,T,e,a);if(!i||i[0].index===!1)return;var n=i[0];if(n.index===void 0){var r=1-n.y0/A.ya._length,v=A.xa._length,s=v*r/2,o=v-s;return n.x0=Math.max(Math.min(n.x0,o),s),n.x1=Math.max(Math.min(n.x1,o),s),i}var b=n.cd[n.index],g=n.trace,d=n.subplot;n.a=b.a,n.b=b.b,n.c=b.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var f={};f[g.subplot]={_subplot:d};var m=g._module.formatLabels(b,g,f);n.aLabel=m.aLabel,n.bLabel=m.bLabel,n.cLabel=m.cLabel;var l=b.hi||g.hoverinfo,x=[];function u(w,p){x.push(w._hovertitle+": "+p)}if(!g.hovertemplate){var M=l.split("+");M.indexOf("all")!==-1&&(M=["a","b","c"]),M.indexOf("a")!==-1&&u(d.aaxis,n.aLabel),M.indexOf("b")!==-1&&u(d.baxis,n.bLabel),M.indexOf("c")!==-1&&u(d.caxis,n.cLabel)}return n.extraText=x.join("<br>"),n.hovertemplate=g.hovertemplate,i}},{"../scatter/hover":947}],1039:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:t("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(t,N,V){var y=t("../scatter/plot");N.exports=function(A,T,e){var a=T.plotContainer;a.select(".scatterlayer").selectAll("*").remove();for(var i=T.xaxis,n=T.yaxis,r={xaxis:i,yaxis:n,plot:a,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},v=T.layers.frontplot.select("g.scatterlayer"),s=0;s<e.length;s++){var o=e[s];o.length&&(o[0].trace._xA=i,o[0].trace._yA=n)}y(A,r,e,v)}},{"../scatter/plot":957}],1041:[function(t,N,V){var y=t("../scatter/attributes"),c=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../scattergl/attributes"),a=t("../../plots/cartesian/constants").idRegex,i=t("../../plot_api/plot_template").templatedArray,n=t("../../lib/extend").extendFlat,r=y.marker,v=r.line,s=n(c("marker.line",{editTypeOverride:"calc"}),{width:n({},v.width,{editType:"calc"}),editType:"calc"}),o=n(c("marker"),{symbol:r.symbol,angle:r.angle,size:n({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:s,editType:"calc"});o.color.editType=o.cmin.editType=o.cmax.editType="style";function b(g){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[g],editType:"plot"}}}N.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},e.text,{}),hovertext:n({},e.hovertext,{}),hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),marker:o,xaxes:b("x"),yaxes:b("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(t,N,V){var y=t("../../registry"),c=t("../../components/grid");N.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select"),editStyle:t("./edit_style"),meta:{}},y.register(c)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(t,N,V){var y=t("regl-line2d"),c=t("../../registry"),A=t("../../lib/prepare_regl"),T=t("../../plots/get_data").getModuleCalcData,e=t("../../plots/cartesian"),a=t("../../plots/cartesian/axis_ids").getFromId,i=t("../../plots/cartesian/axes").shouldShowZeroLine,n="splom",r={};function v(f){var m=f._fullLayout,l=c.getModule(n),x=T(f.calcdata,l)[0],u=A(f,["ANGLE_instanced_arrays","OES_element_index_uint"],r);!u||(m._hasOnlyLargeSploms&&b(f),l.plot(f,{},x))}function s(f){var m=f.calcdata,l=f._fullLayout;l._hasOnlyLargeSploms&&b(f);for(var x=0;x<m.length;x++){var u=m[x][0],M=u.trace,w=l._splomScenes[M.uid];M.type==="splom"&&w&&w.matrix&&o(f,M,w)}}function o(f,m,l){for(var x=l.matrixOptions.data.length,u=m._visibleDims,M=l.viewOpts.ranges=new Array(x),w=0;w<u.length;w++){var p=u[w],_=M[w]=new Array(4),h=a(f,m._diag[p][0]);h&&(_[0]=h.r2l(h.range[0]),_[2]=h.r2l(h.range[1]));var L=a(f,m._diag[p][1]);L&&(_[1]=L.r2l(L.range[0]),_[3]=L.r2l(L.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:M},{ranges:M}):l.matrix.update({ranges:M})}function b(f){var m=f._fullLayout,l=m._glcanvas.data()[0].regl,x=m._splomGrid;x||(x=m._splomGrid=y(l)),x.update(g(f))}function g(f){var m=f._context.plotGlPixelRatio,l=f._fullLayout,x=l._size,u=[0,0,l.width*m,l.height*m],M={},w;function p(ee,j,X,ae,he,K){X*=m,ae*=m,he*=m,K*=m;var J=j[ee+"color"],U=j[ee+"width"],H=String(J+U);H in M?M[H].data.push(NaN,NaN,X,ae,he,K):M[H]={data:[X,ae,he,K],join:"rect",thickness:U*m,color:J,viewport:u,range:u,overlay:!1}}for(w in l._splomSubplots){var _=l._plots[w],h=_.xaxis,L=_.yaxis,E=h._gridVals,S=L._gridVals,P=h._offset,F=h._length,I=L._length,D=x.b+L.domain[0]*x.h,R=-L._m,O=-R*L.r2l(L.range[0],L.calendar),z,G;if(h.showgrid)for(w=0;w<E.length;w++)z=P+h.l2p(E[w].x),p("grid",h,z,D,z,D+I);if(L.showgrid)for(w=0;w<S.length;w++)G=D+O+R*S[w].x,p("grid",L,P,G,P+F,G);i(f,h,L)&&(z=P+h.l2p(0),p("zeroline",h,z,D,z,D+I)),i(f,L,h)&&(G=D+O+0,p("zeroline",L,P,G,P+F,G))}var Y=[];for(w in M)Y.push(M[w]);return Y}function d(f,m,l,x){var u={},M;if(x._splomScenes){for(M=0;M<f.length;M++){var w=f[M];w.type==="splom"&&(u[w.uid]=1)}for(M=0;M<l.length;M++){var p=l[M];if(!u[p.uid]){var _=x._splomScenes[p.uid];_&&_.destroy&&_.destroy(),x._splomScenes[p.uid]=null,delete x._splomScenes[p.uid]}}}Object.keys(x._splomScenes||{}).length===0&&delete x._splomScenes,x._splomGrid&&!m._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),e.clean(f,m,l,x)}N.exports={name:n,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:v,drag:s,updateGrid:b,clean:d,updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:r}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axis_ids"),A=t("../scatter/calc").calcMarkerSize,T=t("../scatter/calc").calcAxisExpansion,e=t("../scatter/colorscale_calc"),a=t("../scattergl/convert").markerSelection,i=t("../scattergl/convert").markerStyle,n=t("./scene_update"),r=t("../../constants/numerical").BADNUM,v=t("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(o,b){var g=b.dimensions,d=b._length,f={},m=f.cdata=[],l=f.data=[],x=b._visibleDims=[],u,M,w,p,_;function h(F,I){for(var D=F.makeCalcdata({v:I.values,vcalendar:b.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===r?NaN:D[R];m.push(D),l.push(F.type==="log"?y.simpleMap(D,F.c2l):D)}for(u=0;u<g.length;u++)if(w=g[u],w.visible){if(p=c.getFromId(o,b._diag[u][0]),_=c.getFromId(o,b._diag[u][1]),p&&_&&p.type!==_.type){y.log("Skipping splom dimension "+u+" with conflicting axis types");continue}p?(h(p,w),_&&_.type==="category"&&(_._categories=p._categories.slice())):h(_,w),x.push(u)}e(o,b),y.extendFlat(f,i(o,b));var L=m.length,E=L*d>v,S;for(E?S=f.sizeAvg||Math.max(f.size,3):S=A(b,d),M=0;M<x.length;M++)u=x[M],w=g[u],p=c.getFromId(o,b._diag[u][0])||{},_=c.getFromId(o,b._diag[u][1])||{},T(o,b,p,_,m[M],m[M],S);var P=n(o,b);return P.matrix||(P.matrix=!0),P.matrixOptions=f,P.selectedOptions=a(o,b,b.selected),P.unselectedOptions=a(o,b,b.unselected),[{x:!1,y:!1,t:{},trace:b}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("../scatter/subtypes"),e=t("../scatter/marker_defaults"),a=t("../parcoords/merge_length"),i=t("../scattergl/helpers").isOpenSymbol;N.exports=function(s,o,b,g){function d(p,_){return y.coerce(s,o,A,p,_)}var f=c(s,o,{name:"dimensions",handleItemDefaults:n}),m=d("diagonal.visible"),l=d("showupperhalf"),x=d("showlowerhalf"),u=a(o,f,"values");if(!u||!m&&!l&&!x){o.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),e(s,o,b,g,d,{noAngleRef:!0,noStandOff:!0});var M=i(o.marker.symbol),w=T.isBubble(o);d("marker.line.width",M||w?1:0),r(s,o,g,d),y.coerceSelectionMarkerOpacity(o,d)};function n(v,s){function o(g,d){return y.coerce(v,s,A.dimensions,g,d)}o("label");var b=o("values");b&&b.length?o("visible"):s.visible=!1,o("axis.type"),o("axis.matches")}function r(v,s,o,b){var g=s.dimensions,d=g.length,f=s.showupperhalf,m=s.showlowerhalf,l=s.diagonal.visible,x,u,M=new Array(d),w=new Array(d);for(x=0;x<d;x++){var p=x?x+1:"";M[x]="x"+p,w[x]="y"+p}var _=b("xaxes",M),h=b("yaxes",w),L=s._diag=new Array(d);s._xaxes={},s._yaxes={};var E=[],S=[];function P(ee,j,X,ae){if(!!ee){var he=ee.charAt(0),K=o._splomAxes[he];if(s["_"+he+"axes"][ee]=1,ae.push(ee),!(ee in K)){var J=K[ee]={};X&&(J.label=X.label||"",X.visible&&X.axis&&(X.axis.type&&(J.type=X.axis.type),X.axis.matches&&(J.matches=j)))}}}var F=!l&&!m,I=!l&&!f;for(s._axesDim={},x=0;x<d;x++){var D=g[x],R=x===0,O=x===d-1,z=R&&F||O&&I?void 0:_[x],G=R&&I||O&&F?void 0:h[x];P(z,G,D,E),P(G,z,D,S),L[x]=[z,G],s._axesDim[z]=x,s._axesDim[G]=x}for(x=0;x<E.length;x++)for(u=0;u<S.length;u++){var Y=E[x]+S[u];(x>u&&f||x<u&&m||x===u&&(l||!m||!f))&&(o._splomSubplots[Y]=1)}(!m||!l&&f&&m)&&(o._splomGridDflt.xside="bottom",o._splomGridDflt.yside="left")}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(t,N,V){var y=t("../../lib"),c=t("../scatter/colorscale_calc"),A=t("../scattergl/convert").markerStyle;N.exports=function(e,a){var i=a.trace,n=e._fullLayout._splomScenes[i.uid];if(n){c(e,i),y.extendFlat(n.matrixOptions,A(e,i));var r=y.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(r,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(t,N,V){V.getDimIndex=function(c,A){for(var T=A._id,e=T.charAt(0),a={x:0,y:1}[e],i=c._visibleDims,n=0;n<i.length;n++){var r=i[n];if(c._diag[r][a]===T)return n}return!1}},{}],1048:[function(t,N,V){var y=t("./helpers"),c=t("../scattergl/hover").calcHover;function A(T,e,a){var i=T.cd,n=i[0].trace,r=T.scene,v=r.matrixOptions.cdata,s=T.xa,o=T.ya,b=s.c2p(e),g=o.c2p(a),d=T.distance,f=y.getDimIndex(n,s),m=y.getDimIndex(n,o);if(f===!1||m===!1)return[T];for(var l=v[f],x=v[m],u,M,w=d,p=0;p<l.length;p++){var _=l[p],h=x[p],L=s.c2p(_)-b,E=o.c2p(h)-g,S=Math.sqrt(L*L+E*E);S<w&&(w=M=S,u=p)}return T.index=u,T.distance=w,T.dxy=M,u===void 0?[T]:[c(T,l,x,n)]}N.exports={hoverPoints:A}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(t,N,V){var y=t("./base_index");y.basePlotModule=t("./base_plot"),N.exports=y},{"./base_index":1042,"./base_plot":1043}],1050:[function(t,N,V){var y=t("regl-splom"),c=t("../../lib"),A=t("../../plots/cartesian/axis_ids"),T=t("../../components/dragelement/helpers").selectMode;N.exports=function(i,n,r){if(!!r.length)for(var v=0;v<r.length;v++)e(i,r[v][0])};function e(a,i){var n=a._fullLayout,r=n._size,v=i.trace,s=i.t,o=n._splomScenes[v.uid],b=o.matrixOptions,g=b.cdata,d=n._glcanvas.data()[0].regl,f=n.dragmode,m,l,x,u,M;if(g.length!==0){b.lower=v.showupperhalf,b.upper=v.showlowerhalf,b.diagonal=v.diagonal.visible;var w=v._visibleDims,p=g.length,_=o.viewOpts={};for(_.ranges=new Array(p),_.domains=new Array(p),M=0;M<w.length;M++){x=w[M];var h=_.ranges[M]=new Array(4),L=_.domains[M]=new Array(4);m=A.getFromId(a,v._diag[x][0]),m&&(h[0]=m._rl[0],h[2]=m._rl[1],L[0]=m.domain[0],L[2]=m.domain[1]),l=A.getFromId(a,v._diag[x][1]),l&&(h[1]=l._rl[0],h[3]=l._rl[1],L[1]=l.domain[0],L[3]=l.domain[1])}var E=a._context.plotGlPixelRatio,S=r.l*E,P=r.b*E,F=r.w*E,I=r.h*E;_.viewport=[S,P,F+S,I+P],o.matrix===!0&&(o.matrix=y(d));var D=n.clickmode.indexOf("select")>-1,R=T(f)||!!v.selectedpoints||D,O=!0;if(R){var z=v._length;if(v.selectedpoints){o.selectBatch=v.selectedpoints;var G=v.selectedpoints,Y={};for(x=0;x<G.length;x++)Y[G[x]]=!0;var ee=[];for(x=0;x<z;x++)Y[x]||ee.push(x);o.unselectBatch=ee}var j=s.xpx=new Array(p),X=s.ypx=new Array(p);for(M=0;M<w.length;M++){if(x=w[M],m=A.getFromId(a,v._diag[x][0]),m)for(j[M]=new Array(z),u=0;u<z;u++)j[M][u]=m.c2p(g[M][u]);if(l=A.getFromId(a,v._diag[x][1]),l)for(X[M]=new Array(z),u=0;u<z;u++)X[M][u]=l.c2p(g[M][u])}if(o.selectBatch.length||o.unselectBatch.length){var ae=c.extendFlat({},b,o.unselectedOptions,_),he=c.extendFlat({},b,o.selectedOptions,_);o.matrix.update(ae,he),O=!1}}else s.xpx=s.ypx=null;if(O){var K=c.extendFlat({},b,_);o.matrix.update(K,null)}}}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(t,N,V){var y=t("../../lib");N.exports=function(A,T){var e=A._fullLayout,a=T.uid,i=e._splomScenes;i||(i=e._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},v=i[T.uid];return v||(v=i[a]=y.extendFlat({},n,r),v.draw=function(){v.matrix&&v.matrix.draw&&(v.selectBatch.length||v.unselectBatch.length?v.matrix.draw(v.unselectBatch,v.selectBatch):v.matrix.draw()),v.dirty=!1},v.destroy=function(){v.matrix&&v.matrix.destroy&&v.matrix.destroy(),v.matrixOptions=null,v.selectBatch=null,v.unselectBatch=null,v=null}),v.dirty||y.extendFlat(v,n),v}},{"../../lib":515}],1052:[function(t,N,V){var y=t("../../lib"),c=y.pushUnique,A=t("../scatter/subtypes"),T=t("./helpers");N.exports=function(a,i){var n=a.cd,r=n[0].trace,v=n[0].t,s=a.scene,o=s.matrixOptions.cdata,b=a.xaxis,g=a.yaxis,d=[];if(!s)return d;var f=!A.hasMarkers(r)&&!A.hasText(r);if(r.visible!==!0||f)return d;var m=T.getDimIndex(r,b),l=T.getDimIndex(r,g);if(m===!1||l===!1)return d;var x=v.xpx[m],u=v.ypx[l],M=o[m],w=o[l],p=(a.scene.selectBatch||[]).slice(),_=[];if(i!==!1&&!i.degenerate)for(var h=0;h<M.length;h++)i.contains([x[h],u[h]],null,h,a)?(d.push({pointNumber:h,x:M[h],y:w[h]}),c(p,h)):p.indexOf(h)!==-1?c(p,h):_.push(h);var L=s.matrixOptions;return!p.length&&!_.length?s.matrix.update(L,null):!s.selectBatch.length&&!s.unselectBatch.length&&s.matrix.update(s.unselectedOptions,y.extendFlat({},L,s.selectedOptions,s.viewOpts)),s.selectBatch=p,s.unselectBatch=_,d}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(t,N,V){var y=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:A({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:c("u",1),vhoverformat:c("v",1),whoverformat:c("w",1),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(i,y("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=T[r]}),i.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,N.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(t,N,V){var y=t("../../lib"),c=t("../../components/colorscale/calc");function A(i,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=a(n.u,n._len),n._v=a(n.v,n._len),n._w=a(n.w,n._len),n._x=a(n.x,n._len),n._y=a(n.y,n._len),n._z=a(n.z,n._len);var r=T(n);n._gridFill=r.fill,n._Xs=r.Xs,n._Ys=r.Ys,n._Zs=r.Zs,n._len=r.len;var v=0,s,o,b;n.starts&&(s=a(n.starts.x||[]),o=a(n.starts.y||[]),b=a(n.starts.z||[]),v=Math.min(s.length,o.length,b.length)),n._startsX=s||[],n._startsY=o||[],n._startsZ=b||[];var g=0,d=1/0,f;for(f=0;f<n._len;f++){var m=n._u[f],l=n._v[f],x=n._w[f],u=Math.sqrt(m*m+l*l+x*x);g=Math.max(g,u),d=Math.min(d,u)}for(c(i,n,{vals:[d,g],containerStr:"",cLetter:"c"}),f=0;f<v;f++){var M=s[f];r.xMax=Math.max(r.xMax,M),r.xMin=Math.min(r.xMin,M);var w=o[f];r.yMax=Math.max(r.yMax,w),r.yMin=Math.min(r.yMin,w);var p=b[f];r.zMax=Math.max(r.zMax,p),r.zMin=Math.min(r.zMin,p)}n._slen=v,n._normMax=g,n._xbnds=[r.xMin,r.xMax],n._ybnds=[r.yMin,r.yMax],n._zbnds=[r.zMin,r.zMax]}function T(i){var n=i._x,r=i._y,v=i._z,s=i._len,o,b,g,d=-1/0,f=1/0,m=-1/0,l=1/0,x=-1/0,u=1/0,M="",w,p,_,h,L,E,S,P,F;for(s&&(h=n[0],E=r[0],P=v[0]),s>1&&(L=n[s-1],S=r[s-1],F=v[s-1]),o=0;o<s;o++)d=Math.max(d,n[o]),f=Math.min(f,n[o]),m=Math.max(m,r[o]),l=Math.min(l,r[o]),x=Math.max(x,v[o]),u=Math.min(u,v[o]),!w&&n[o]!==h&&(w=!0,M+="x"),!p&&r[o]!==E&&(p=!0,M+="y"),!_&&v[o]!==P&&(_=!0,M+="z");w||(M+="x"),p||(M+="y"),_||(M+="z");var I=e(i._x),D=e(i._y),R=e(i._z);M=M.replace("x",(h>L?"-":"+")+"x"),M=M.replace("y",(E>S?"-":"+")+"y"),M=M.replace("z",(P>F?"-":"+")+"z");var O=function(){s=0,I=[],D=[],R=[]};(!s||s<I.length*D.length*R.length)&&O();var z=function(ne){return ne==="x"?n:ne==="y"?r:v},G=function(ne){return ne==="x"?I:ne==="y"?D:R},Y=function(ne){return ne[s-1]<ne[0]?-1:1},ee=z(M[1]),j=z(M[3]),X=z(M[5]),ae=G(M[1]).length,he=G(M[3]).length,K=G(M[5]).length,J=!1,U=function(ne,le,_e){return ae*(he*ne+le)+_e},H=Y(z(M[1])),q=Y(z(M[3])),re=Y(z(M[5]));for(o=0;o<K-1;o++){for(b=0;b<he-1;b++){for(g=0;g<ae-1;g++){var Z=U(o,b,g),Q=U(o,b,g+1),ie=U(o,b+1,g),oe=U(o+1,b,g);if((!(ee[Z]*H<ee[Q]*H)||!(j[Z]*q<j[ie]*q)||!(X[Z]*re<X[oe]*re))&&(J=!0),J)break}if(J)break}if(J)break}return J&&(y.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:f,yMin:l,zMin:u,xMax:d,yMax:m,zMax:x,Xs:I,Ys:D,Zs:R,len:s,fill:M}}function e(i){return y.distinctVals(i).vals}function a(i,n){if(n===void 0&&(n=i.length),y.isTypedArray(i))return i.subarray(0,n);for(var r=[],v=0;v<n;v++)r[v]=+i[v];return r}N.exports={calc:A,filter:a,processGrid:T}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(t,N,V){var y=t("../../../stackgl_modules").gl_streamtube3d,c=y.createTubeMesh,A=t("../../lib"),T=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,a=t("../../plots/gl3d/zip3"),i={xaxis:0,yaxis:1,zaxis:2};function n(g,d){this.scene=g,this.uid=d,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(g){var d=this.scene.fullSceneLayout,f=this.scene.dataScale;function m(u,M){var w=d[M],p=f[i[M]];return w.l2c(u)/p}if(g.object===this.mesh){var l=g.data.position,x=g.data.velocity;return g.traceCoordinate=[m(l[0],"xaxis"),m(l[1],"yaxis"),m(l[2],"zaxis"),m(x[0],"xaxis"),m(x[1],"yaxis"),m(x[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence],g.textLabel=this.data.hovertext||this.data.text,!0}};function v(g){var d=g.length,f;return d>2?f=g.slice(1,d-1):d===2?f=[(g[0]+g[1])/2]:f=g,f}function s(g){var d=g.length;return d===1?[.5,.5]:[g[1]-g[0],g[d-1]-g[d-2]]}function o(g,d){var f=g.fullSceneLayout,m=g.dataScale,l=d._len,x={};function u(he,K){var J=f[K],U=m[i[K]];return A.simpleMap(he,function(H){return J.d2l(H)*U})}if(x.vectors=a(u(d._u,"xaxis"),u(d._v,"yaxis"),u(d._w,"zaxis"),l),!l)return{positions:[],cells:[]};var M=u(d._Xs,"xaxis"),w=u(d._Ys,"yaxis"),p=u(d._Zs,"zaxis");x.meshgrid=[M,w,p],x.gridFill=d._gridFill;var _=d._slen;if(_)x.startingPositions=a(u(d._startsX,"xaxis"),u(d._startsY,"yaxis"),u(d._startsZ,"zaxis"));else{for(var h=w[0],L=v(M),E=v(p),S=new Array(L.length*E.length),P=0,F=0;F<L.length;F++)for(var I=0;I<E.length;I++)S[P++]=[L[F],h,E[I]];x.startingPositions=S}x.colormap=T(d),x.tubeSize=d.sizeref,x.maxLength=d.maxdisplayed;var D=u(d._xbnds,"xaxis"),R=u(d._ybnds,"yaxis"),O=u(d._zbnds,"zaxis"),z=s(M),G=s(w),Y=s(p),ee=[[D[0]-z[0],R[0]-G[0],O[0]-Y[0]],[D[1]+z[1],R[1]+G[1],O[1]+Y[1]]],j=y(x,ee),X=e(d);j.vertexIntensityBounds=[X.min/d._normMax,X.max/d._normMax];var ae=d.lightposition;return j.lightPosition=[ae.x,ae.y,ae.z],j.ambient=d.lighting.ambient,j.diffuse=d.lighting.diffuse,j.specular=d.lighting.specular,j.roughness=d.lighting.roughness,j.fresnel=d.lighting.fresnel,j.opacity=d.opacity,d._pad=j.tubeScale*d.sizeref*2,j}r.update=function(g){this.data=g;var d=o(this.scene,g);this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(g,d){var f=g.glplot.gl,m=o(g,d),l=c(f,m),x=new n(g,d.uid);return x.mesh=l,x.data=d,l._trace=x,g.glplot.add(l),x}N.exports=b},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(t,N,V){var y=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(f,m){return y.coerce(e,a,A,f,m)}var v=r("u"),s=r("v"),o=r("w"),b=r("x"),g=r("y"),d=r("z");if(!v||!v.length||!s||!s.length||!o||!o.length||!b||!b.length||!g||!g.length||!d||!d.length){a.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),c(e,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(t,N,V){N.exports={moduleType:"trace",name:"streamtube",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc").calc,plot:t("./convert"),eventData:function(y,c){return y.tubex=y.x,y.tubey=y.y,y.tubez=y.z,y.tubeu=c.traceCoordinate[3],y.tubev=c.traceCoordinate[4],y.tubew=c.traceCoordinate[5],y.norm=c.traceCoordinate[6],y.divergence=c.traceCoordinate[7],delete y.x,delete y.y,delete y.z,y},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(t,N,V){var y=t("../../plots/attributes"),c=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../plots/template_attributes").texttemplateAttrs,T=t("../../components/colorscale/attributes"),e=t("../../plots/domain").attributes,a=t("../pie/attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;N.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:n({colors:{valType:"data_array",editType:"calc"},line:{color:n({},a.marker.line.color,{dflt:null}),width:n({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:A({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:n({},y.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:c({},{keys:i.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:n({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(t,N,V){var y=t("../../plots/plots");V.name="sunburst",V.plot=function(c,A,T,e){y.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){y.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],1060:[function(t,N,V){var y=t("d3-hierarchy"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../components/colorscale").makeColorScaleFuncFromTrace,e=t("../pie/calc").makePullColorFn,a=t("../pie/calc").generateExtendedColors,i=t("../../components/colorscale").calc,n=t("../../constants/numerical").ALMOST_EQUAL,r={},v={},s={};V.calc=function(b,g){var d=b._fullLayout,f=g.ids,m=A.isArrayOrTypedArray(f),l=g.labels,x=g.parents,u=g.values,M=A.isArrayOrTypedArray(u),w=[],p={},_={},h=function(H,q){p[H]?p[H].push(q):p[H]=[q],_[q]=1},L=function(H){return H||typeof H=="number"},E=function(H){return!M||c(u[H])&&u[H]>=0},S,P,F;m?(S=Math.min(f.length,x.length),P=function(H){return L(f[H])&&E(H)},F=function(H){return String(f[H])}):(S=Math.min(l.length,x.length),P=function(H){return L(l[H])&&E(H)},F=function(H){return String(l[H])}),M&&(S=Math.min(S,u.length));for(var I=0;I<S;I++)if(P(I)){var D=F(I),R=L(x[I])?String(x[I]):"",O={i:I,id:D,pid:R,label:L(l[I])?String(l[I]):""};M&&(O.v=+u[I]),w.push(O),h(R,D)}if(p[""]){if(p[""].length>1){for(var Y=A.randstr(),ee=0;ee<w.length;ee++)w[ee].pid===""&&(w[ee].pid=Y);w.unshift({hasMultipleRoots:!0,id:Y,pid:"",label:""})}}else{var z=[],G;for(G in p)_[G]||z.push(G);if(z.length===1)G=z[0],w.unshift({hasImpliedRoot:!0,id:G,pid:"",label:G});else return A.warn(["Multiple implied roots, cannot build",g.type,"hierarchy of",g.name+".","These roots include:",z.join(", ")].join(" "))}var j;try{j=y.stratify().id(function(H){return H.id}).parentId(function(H){return H.pid})(w)}catch(H){return A.warn(["Failed to build",g.type,"hierarchy of",g.name+".","Error:",H.message].join(" "))}var X=y.hierarchy(j),ae=!1;if(M)switch(g.branchvalues){case"remainder":X.sum(function(H){return H.data.v});break;case"total":X.each(function(H){var q=H.data.data,re=q.v;if(H.children){var Z=H.children.reduce(function(Q,ie){return Q+ie.data.data.v},0);if((q.hasImpliedRoot||q.hasMultipleRoots)&&(re=Z),re<Z*n)return ae=!0,A.warn(["Total value for node",H.data.data.id,"of",g.name,"is smaller than the sum of its children.",`
parent value =`,re,`
children sum =`,Z].join(" "))}H.value=re});break}else o(X,g,{branches:g.count.indexOf("branches")!==-1,leaves:g.count.indexOf("leaves")!==-1});if(!ae){g.sort&&X.sort(function(H,q){return q.value-H.value});var he,K,J=g.marker.colors||[],U=!!J.length;return g._hasColorscale?(U||(J=M?g.values:g._values),i(b,g,{vals:J,containerStr:"marker",cLetter:"c"}),K=T(g.marker)):he=e(d["_"+g.type+"colormap"]),X.each(function(H){var q=H.data.data;q.color=g._hasColorscale?K(J[q.i]):he(J[q.i],q.id)}),w[0].hierarchy=X,w}},V._runCrossTraceCalc=function(b,g){var d=g._fullLayout,f=g.calcdata,m=d[b+"colorway"],l=d["_"+b+"colormap"];d["extend"+b+"colors"]&&(m=a(m,b==="icicle"?s:b==="treemap"?v:r));var x=0,u;function M(h){var L=h.data.data,E=L.id;L.color===!1&&(l[E]?L.color=l[E]:h.parent?h.parent.parent?L.color=h.parent.data.data.color:(l[E]=L.color=m[x%m.length],x++):L.color=u)}for(var w=0;w<f.length;w++){var p=f[w],_=p[0];_.trace.type===b&&_.hierarchy&&(u=_.trace.root.color,_.hierarchy.each(M))}},V.crossTraceCalc=function(b){return V._runCrossTraceCalc("sunburst",b)};function o(b,g,d){var f=0,m=b.children;if(m){for(var l=m.length,x=0;x<l;x++)f+=o(m[x],g,d);d.branches&&f++}else d.leaves&&f++;return b.value=b.data.data.value=f,g._values||(g._values=[]),g._values[b.data.data.i]=f,f}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(t,N,V){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../bar/defaults").handleText,e=t("../../components/colorscale"),a=e.hasColorscale,i=e.handleDefaults;N.exports=function(r,v,s,o){function b(M,w){return y.coerce(r,v,c,M,w)}var g=b("labels"),d=b("parents");if(!g||!g.length||!d||!d.length){v.visible=!1;return}var f=b("values");f&&f.length?b("branchvalues"):b("count"),b("level"),b("maxdepth");var m=b("marker.line.width");m&&b("marker.line.color",o.paper_bgcolor),b("marker.colors");var l=v._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis;l&&i(r,v,o,b,{prefix:"marker.",cLetter:"c"}),b("leaf.opacity",l?1:.7);var x=b("text");b("texttemplate"),v.texttemplate||b("textinfo",Array.isArray(x)?"text+label":"label"),b("hovertext"),b("hovertemplate");var u="auto";T(r,v,o,b,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("insidetextorientation"),b("sort"),b("rotation"),b("root.color"),A(v,o,b),v._length=null}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../registry"),A=t("../../components/fx/helpers").appendArrayPointValue,T=t("../../components/fx"),e=t("../../lib"),a=t("../../lib/events"),i=t("./helpers"),n=t("../pie/helpers"),r=n.formatPieValue;N.exports=function(o,b,g,d,f){var m=d[0],l=m.trace,x=m.hierarchy,u=l.type==="sunburst",M=l.type==="treemap"||l.type==="icicle";"_hasHoverLabel"in l||(l._hasHoverLabel=!1),"_hasHoverEvent"in l||(l._hasHoverEvent=!1);var w=function(h){var L=g._fullLayout;if(!(g._dragging||L.hovermode===!1)){var E=g._fullData[l.index],S=h.data.data,P=S.i,F=i.isHierarchyRoot(h),I=i.getParent(x,h),D=i.getValue(h),R=function(Q){return e.castOption(E,P,Q)},O=R("hovertemplate"),z=T.castHoverinfo(E,L,P),G=L.separators,Y;if(O||z&&z!=="none"&&z!=="skip"){var ee,j;u&&(ee=m.cx+h.pxmid[0]*(1-h.rInscribed),j=m.cy+h.pxmid[1]*(1-h.rInscribed)),M&&(ee=h._hoverX,j=h._hoverY);var X={},ae=[],he=[],K=function(Q){return ae.indexOf(Q)!==-1};z&&(ae=z==="all"?E._module.attributes.hoverinfo.flags:z.split("+")),X.label=S.label,K("label")&&X.label&&he.push(X.label),S.hasOwnProperty("v")&&(X.value=S.v,X.valueLabel=r(X.value,G),K("value")&&he.push(X.valueLabel)),X.currentPath=h.currentPath=i.getPath(h.data),K("current path")&&!F&&he.push(X.currentPath);var J,U=[],H=function(){U.indexOf(J)===-1&&(he.push(J),U.push(J))};X.percentParent=h.percentParent=D/i.getValue(I),X.parent=h.parentString=i.getPtLabel(I),K("percent parent")&&(J=i.formatPercent(X.percentParent,G)+" of "+X.parent,H()),X.percentEntry=h.percentEntry=D/i.getValue(b),X.entry=h.entry=i.getPtLabel(b),K("percent entry")&&!F&&!h.onPathbar&&(J=i.formatPercent(X.percentEntry,G)+" of "+X.entry,H()),X.percentRoot=h.percentRoot=D/i.getValue(x),X.root=h.root=i.getPtLabel(x),K("percent root")&&!F&&(J=i.formatPercent(X.percentRoot,G)+" of "+X.root,H()),X.text=R("hovertext")||R("text"),K("text")&&(J=X.text,e.isValidTextValue(J)&&he.push(J)),Y=[v(h,E,f.eventDataKeys)];var q={trace:E,y:j,_x0:h._x0,_x1:h._x1,_y0:h._y0,_y1:h._y1,text:he.join("<br>"),name:O||K("name")?E.name:void 0,color:R("hoverlabel.bgcolor")||S.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:X,eventData:Y};u&&(q.x0=ee-h.rInscribed*h.rpx1,q.x1=ee+h.rInscribed*h.rpx1,q.idealAlign=h.pxmid[0]<0?"left":"right"),M&&(q.x=ee,q.idealAlign=ee<0?"left":"right");var re=[];T.loneHover(q,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:g,inOut_bbox:re}),Y[0].bbox=re[0],l._hasHoverLabel=!0}if(M){var Z=o.select("path.surface");f.styleOne(Z,h,E,{hovered:!0})}l._hasHoverEvent=!0,g.emit("plotly_hover",{points:Y||[v(h,E,f.eventDataKeys)],event:y.event})}},p=function(h){var L=g._fullLayout,E=g._fullData[l.index],S=y.select(this).datum();if(l._hasHoverEvent&&(h.originalEvent=y.event,g.emit("plotly_unhover",{points:[v(S,E,f.eventDataKeys)],event:y.event}),l._hasHoverEvent=!1),l._hasHoverLabel&&(T.loneUnhover(L._hoverlayer.node()),l._hasHoverLabel=!1),M){var P=o.select("path.surface");f.styleOne(P,S,E,{hovered:!1})}},_=function(h){var L=g._fullLayout,E=g._fullData[l.index],S=u&&(i.isHierarchyRoot(h)||i.isLeaf(h)),P=i.getPtId(h),F=i.isEntry(h)?i.findEntryWithChild(x,P):i.findEntryWithLevel(x,P),I=i.getPtId(F),D={points:[v(h,E,f.eventDataKeys)],event:y.event};S||(D.nextLevel=I);var R=a.triggerHandler(g,"plotly_"+l.type+"click",D);if(R!==!1&&L.hovermode&&(g._hoverdata=[v(h,E,f.eventDataKeys)],T.click(g,y.event)),!S&&R!==!1&&!g._dragging&&!g._transitioning){c.call("_storeDirectGUIEdit",E,L._tracePreGUI[E.uid],{level:E.level});var O={data:[{level:I}],traces:[l.index]},z={frame:{redraw:!1,duration:f.transitionTime},transition:{duration:f.transitionTime,easing:f.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(L._hoverlayer.node()),c.call("animate",g,O,z)}};o.on("mouseover",w),o.on("mouseout",p),o.on("click",_)};function v(s,o,b){for(var g=s.data.data,d={curveNumber:o.index,pointNumber:g.i,data:o._input,fullData:o},f=0;f<b.length;f++){var m=b[f];m in s&&(d[m]=s[m])}return"parentString"in s&&!i.isHierarchyRoot(s)&&(d.parent=s.parentString),A(d,o,g.i),d}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color"),A=t("../../lib/setcursor"),T=t("../pie/helpers");V.findEntryWithLevel=function(n,r){var v;return r&&n.eachAfter(function(s){if(V.getPtId(s)===r)return v=s.copy()}),v||n},V.findEntryWithChild=function(n,r){var v;return n.eachAfter(function(s){for(var o=s.children||[],b=0;b<o.length;b++){var g=o[b];if(V.getPtId(g)===r)return v=s.copy()}}),v||n},V.isEntry=function(n){return!n.parent},V.isLeaf=function(n){return!n.children},V.getPtId=function(n){return n.data.data.id},V.getPtLabel=function(n){return n.data.data.label},V.getValue=function(n){return n.value},V.isHierarchyRoot=function(n){return i(n)===""},V.setSliceCursor=function(n,r,v){var s=v.isTransitioning;if(!s){var o=n.datum();s=v.hideOnRoot&&V.isHierarchyRoot(o)||v.hideOnLeaves&&V.isLeaf(o)}A(n,s?null:"pointer")};function e(n,r,v){return{color:V.getOutsideTextFontKey("color",n,r,v),family:V.getOutsideTextFontKey("family",n,r,v),size:V.getOutsideTextFontKey("size",n,r,v)}}function a(n,r,v,s){var o=(s||{}).onPathbar,b=r.data.data,g=b.i,d=y.castOption(n,g,(o?"pathbar.textfont":"insidetextfont")+".color");return!d&&n._input.textfont&&(d=y.castOption(n._input,g,"textfont.color")),{color:d||c.contrast(b.color),family:V.getInsideTextFontKey("family",n,r,v,s),size:V.getInsideTextFontKey("size",n,r,v,s)}}V.getInsideTextFontKey=function(n,r,v,s,o){var b=(o||{}).onPathbar,g=b?"pathbar.textfont":"insidetextfont",d=v.data.data.i;return y.castOption(r,d,g+"."+n)||y.castOption(r,d,"textfont."+n)||s.size},V.getOutsideTextFontKey=function(n,r,v,s){var o=v.data.data.i;return y.castOption(r,o,"outsidetextfont."+n)||y.castOption(r,o,"textfont."+n)||s.size},V.isOutsideText=function(n,r){return!n._hasColorscale&&V.isHierarchyRoot(r)},V.determineTextFont=function(n,r,v,s){return V.isOutsideText(n,r)?e(n,r,v):a(n,r,v,s)},V.hasTransition=function(n){return!!(n&&n.duration>0)},V.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},V.isHeader=function(n,r){return!(V.isLeaf(n)||n.depth===r._maxDepth-1)};function i(n){return n.data.data.pid}V.getParent=function(n,r){return V.findEntryWithLevel(n,i(r))},V.listPath=function(n,r){var v=n.parent;if(!v)return[];var s=r?[v.data[r]]:[v];return V.listPath(v,r).concat(s)},V.getPath=function(n){return V.listPath(n,"label").join("/")+"/"},V.formatValue=T.formatPieValue,V.formatPercent=function(n,r){var v=y.formatPercent(n,0);return v==="0%"&&(v=T.formatPiePercent(n,r)),v}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(t,N,V){N.exports={moduleType:"trace",name:"sunburst",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(t,N,V){N.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return y.coerce(T,e,c,i,n)}a("sunburstcolorway",e.colorway),a("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(t,N,V){var y=t("@plotly/d3"),c=t("d3-hierarchy"),A=t("d3-interpolate").interpolate,T=t("../../components/drawing"),e=t("../../lib"),a=t("../../lib/svg_text_utils"),i=t("../bar/uniform_text"),n=i.recordMinTextSize,r=i.clearMinTextSize,v=t("../pie/plot"),s=t("../pie/helpers").getRotationAngle,o=v.computeTransform,b=v.transformInsideText,g=t("./style").styleOne,d=t("../bar/style").resizeText,f=t("./fx"),m=t("./constants"),l=t("./helpers");V.plot=function(_,h,L,E){var S=_._fullLayout,P=S._sunburstlayer,F,I,D=!L,R=!S.uniformtext.mode&&l.hasTransition(L);if(r("sunburst",S),F=P.selectAll("g.trace.sunburst").data(h,function(z){return z[0].trace.uid}),F.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),R){E&&(I=E());var O=y.transition().duration(L.duration).ease(L.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});O.each(function(){P.selectAll("g.trace").each(function(z){x(_,z,this,L)})})}else F.each(function(z){x(_,z,this,L)}),S.uniformtext.mode&&d(_,S._sunburstlayer.selectAll(".trace"),"sunburst");D&&F.exit().remove()};function x(_,h,L,E){var S=_._context.staticPlot,P=_._fullLayout,F=!P.uniformtext.mode&&l.hasTransition(E),I=y.select(L),D=I.selectAll("g.slice"),R=h[0],O=R.trace,z=R.hierarchy,G=l.findEntryWithLevel(z,O.level),Y=l.getMaxDepth(O),ee=P._size,j=O.domain,X=ee.w*(j.x[1]-j.x[0]),ae=ee.h*(j.y[1]-j.y[0]),he=.5*Math.min(X,ae),K=R.cx=ee.l+ee.w*(j.x[1]+j.x[0])/2,J=R.cy=ee.t+ee.h*(1-j.y[0])-ae/2;if(!G)return D.remove();var U=null,H={};F&&D.each(function(Le){H[l.getPtId(Le)]={rpx0:Le.rpx0,rpx1:Le.rpx1,x0:Le.x0,x1:Le.x1,transform:Le.transform},!U&&l.isEntry(Le)&&(U=Le)});var q=u(G).descendants(),re=G.height+1,Z=0,Q=Y;R.hasMultipleRoots&&l.isHierarchyRoot(G)&&(q=q.slice(1),re-=1,Z=1,Q+=1),q=q.filter(function(Le){return Le.y1<=Q});var ie=s(O.rotation);ie&&q.forEach(function(Le){Le.x0+=ie,Le.x1+=ie});var oe=Math.min(re,Y),ne=function(Le){return(Le-Z)/oe*he},le=function(Le,Ze){return[Le*Math.cos(Ze),-Le*Math.sin(Ze)]},_e=function(Le){return e.pathAnnulus(Le.rpx0,Le.rpx1,Le.x0,Le.x1,K,J)},fe=function(Le){return K+w(Le)[0]*(Le.transform.rCenter||0)+(Le.transform.x||0)},ye=function(Le){return J+w(Le)[1]*(Le.transform.rCenter||0)+(Le.transform.y||0)};D=D.data(q,l.getPtId),D.enter().append("g").classed("slice",!0),F?D.exit().transition().each(function(){var Le=y.select(this),Ze=Le.select("path.surface");Ze.transition().attrTween("d",function(ze){var Ie=ke(ze);return function(Ve){return _e(Ie(Ve))}});var We=Le.select("g.slicetext");We.attr("opacity",0)}).remove():D.exit().remove(),D.order();var xe=null;if(F&&U){var me=l.getPtId(U);D.each(function(Le){xe===null&&l.getPtId(Le)===me&&(xe=Le.x1)})}var be=D;F&&(be=be.transition().each("end",function(){var Le=y.select(this);l.setSliceCursor(Le,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),be.each(function(Le){var Ze=y.select(this),We=e.ensureSingle(Ze,"path","surface",function(Qt){Qt.style("pointer-events",S?"none":"all")});Le.rpx0=ne(Le.y0),Le.rpx1=ne(Le.y1),Le.xmid=(Le.x0+Le.x1)/2,Le.pxmid=le(Le.rpx1,Le.xmid),Le.midangle=-(Le.xmid-Math.PI/2),Le.startangle=-(Le.x0-Math.PI/2),Le.stopangle=-(Le.x1-Math.PI/2),Le.halfangle=.5*Math.min(e.angleDelta(Le.x0,Le.x1)||Math.PI,Math.PI),Le.ring=1-Le.rpx0/Le.rpx1,Le.rInscribed=M(Le),F?We.transition().attrTween("d",function(Qt){var Ot=De(Qt);return function(Ct){return _e(Ot(Ct))}}):We.attr("d",_e),Ze.call(f,G,_,h,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:_._transitioning}),We.call(g,Le,O);var ze=e.ensureSingle(Ze,"g","slicetext"),Ie=e.ensureSingle(ze,"text","",function(Qt){Qt.attr("data-notex",1)}),Ve=e.ensureUniformFontSize(_,l.determineTextFont(O,Le,P.font));Ie.text(V.formatSliceLabel(Le,G,O,h,P)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Ve).call(a.convertToTspans,_);var dt=T.bBox(Ie.node());Le.transform=b(dt,Le,R),Le.transform.targetX=fe(Le),Le.transform.targetY=ye(Le);var Ft=function(Qt,Ot){var Ct=Qt.transform;return o(Ct,Ot),Ct.fontSize=Ve.size,n(O.type,Ct,P),e.getTextTransform(Ct)};F?Ie.transition().attrTween("transform",function(Qt){var Ot=He(Qt);return function(Ct){return Ft(Ot(Ct),dt)}}):Ie.attr("transform",Ft(Le,dt))});function ke(Le){var Ze=l.getPtId(Le),We=H[Ze],ze=H[l.getPtId(G)],Ie;if(ze){var Ve=(Le.x1>ze.x1?2*Math.PI:0)+ie;Ie=Le.rpx1<ze.rpx1?{x0:Le.x0,x1:Le.x1,rpx0:0,rpx1:0}:{x0:Ve,x1:Ve,rpx0:Le.rpx0,rpx1:Le.rpx1}}else{var dt,Ft=l.getPtId(Le.parent);D.each(function(Nt){if(l.getPtId(Nt)===Ft)return dt=Nt});var Qt=dt.children,Ot;Qt.forEach(function(Nt,Lt){if(l.getPtId(Nt)===Ze)return Ot=Lt});var Ct=Qt.length,jt=A(dt.x0,dt.x1);Ie={rpx0:he,rpx1:he,x0:jt(Ot/Ct),x1:jt((Ot+1)/Ct)}}return A(We,Ie)}function De(Le){var Ze=H[l.getPtId(Le)],We,ze={x0:Le.x0,x1:Le.x1,rpx0:Le.rpx0,rpx1:Le.rpx1};if(Ze)We=Ze;else if(U)if(Le.parent)if(xe){var Ie=(Le.x1>xe?2*Math.PI:0)+ie;We={x0:Ie,x1:Ie}}else We={rpx0:he,rpx1:he},e.extendFlat(We,Ae(Le));else We={rpx0:0,rpx1:0};else We={x0:ie,x1:ie};return A(We,ze)}function He(Le){var Ze=H[l.getPtId(Le)],We,ze=Le.transform;if(Ze)We=Ze;else if(We={rpx1:Le.rpx1,transform:{textPosAngle:ze.textPosAngle,scale:0,rotate:ze.rotate,rCenter:ze.rCenter,x:ze.x,y:ze.y}},U)if(Le.parent)if(xe){var Ie=Le.x1>xe?2*Math.PI:0;We.x0=We.x1=Ie}else e.extendFlat(We,Ae(Le));else We.x0=We.x1=ie;else We.x0=We.x1=ie;var Ve=A(We.transform.textPosAngle,Le.transform.textPosAngle),dt=A(We.rpx1,Le.rpx1),Ft=A(We.x0,Le.x0),Qt=A(We.x1,Le.x1),Ot=A(We.transform.scale,ze.scale),Ct=A(We.transform.rotate,ze.rotate),jt=ze.rCenter===0?3:We.transform.rCenter===0?1/3:1,Nt=A(We.transform.rCenter,ze.rCenter),Lt=function(Xe){return Nt(Math.pow(Xe,jt))};return function(Xe){var it=dt(Xe),Ye=Ft(Xe),Ee=Qt(Xe),Ge=Lt(Xe),Ke=le(it,(Ye+Ee)/2),qe=Ve(Xe),At={pxmid:Ke,rpx1:it,transform:{textPosAngle:qe,rCenter:Ge,x:ze.x,y:ze.y}};return n(O.type,ze,P),{transform:{targetX:fe(At),targetY:ye(At),scale:Ot(Xe),rotate:Ct(Xe),rCenter:Ge}}}}function Ae(Le){var Ze=Le.parent,We=H[l.getPtId(Ze)],ze={};if(We){var Ie=Ze.children,Ve=Ie.indexOf(Le),dt=Ie.length,Ft=A(We.x0,We.x1);ze.x0=Ft(Ve/dt),ze.x1=Ft(Ve/dt)}else ze.x0=ze.x1=0;return ze}}function u(_){return c.partition().size([2*Math.PI,_.height+1])(_)}V.formatSliceLabel=function(_,h,L,E,S){var P=L.texttemplate,F=L.textinfo;if(!P&&(!F||F==="none"))return"";var I=S.separators,D=E[0],R=_.data.data,O=D.hierarchy,z=l.isHierarchyRoot(_),G=l.getParent(O,_),Y=l.getValue(_);if(!P){var ee=F.split("+"),j=function(Z){return ee.indexOf(Z)!==-1},X=[],ae;if(j("label")&&R.label&&X.push(R.label),R.hasOwnProperty("v")&&j("value")&&X.push(l.formatValue(R.v,I)),!z){j("current path")&&X.push(l.getPath(_.data));var he=0;j("percent parent")&&he++,j("percent entry")&&he++,j("percent root")&&he++;var K=he>1;if(he){var J,U=function(Z){ae=l.formatPercent(J,I),K&&(ae+=" of "+Z),X.push(ae)};j("percent parent")&&!z&&(J=Y/l.getValue(G),U("parent")),j("percent entry")&&(J=Y/l.getValue(h),U("entry")),j("percent root")&&(J=Y/l.getValue(O),U("root"))}}return j("text")&&(ae=e.castOption(L,R.i,"text"),e.isValidTextValue(ae)&&X.push(ae)),X.join("<br>")}var H=e.castOption(L,R.i,"texttemplate");if(!H)return"";var q={};R.label&&(q.label=R.label),R.hasOwnProperty("v")&&(q.value=R.v,q.valueLabel=l.formatValue(R.v,I)),q.currentPath=l.getPath(_.data),z||(q.percentParent=Y/l.getValue(G),q.percentParentLabel=l.formatPercent(q.percentParent,I),q.parent=l.getPtLabel(G)),q.percentEntry=Y/l.getValue(h),q.percentEntryLabel=l.formatPercent(q.percentEntry,I),q.entry=l.getPtLabel(h),q.percentRoot=Y/l.getValue(O),q.percentRootLabel=l.formatPercent(q.percentRoot,I),q.root=l.getPtLabel(O),R.hasOwnProperty("color")&&(q.color=R.color);var re=e.castOption(L,R.i,"text");return(e.isValidTextValue(re)||re==="")&&(q.text=re),q.customdata=e.castOption(L,R.i,"customdata"),e.texttemplateString(H,q,S._d3locale,q,L._meta||{})};function M(_){return _.rpx0===0&&e.isFullCircle([_.x0,_.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(_.halfangle)),_.ring/2))}function w(_){return p(_.rpx1,_.transform.textPosAngle)}function p(_,h){return[_*Math.sin(h),-_*Math.cos(h)]}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/color"),A=t("../../lib"),T=t("../bar/uniform_text").resizeText;function e(i){var n=i._fullLayout._sunburstlayer.selectAll(".trace");T(i,n,"sunburst"),n.each(function(r){var v=y.select(this),s=r[0],o=s.trace;v.style("opacity",o.opacity),v.selectAll("path.surface").each(function(b){y.select(this).call(a,b,o)})})}function a(i,n,r){var v=n.data.data,s=!n.children,o=v.i,b=A.castOption(r,o,"marker.line.color")||c.defaultLine,g=A.castOption(r,o,"marker.line.width")||0;i.style("stroke-width",g).call(c.fill,v.color).call(c.stroke,b).style("opacity",s?r.leaf.opacity:null)}N.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(t,N,V){var y=t("../../components/color"),c=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll;function n(s){return{valType:"boolean",dflt:!1}}function r(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n(),y:n(),z:n()},color:{valType:"color",dflt:y.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:y.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var v=N.exports=i(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},c("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},c.zauto,{}),zmin:a({},c.zmin,{}),zmax:a({},c.zmax,{})},hoverinfo:a({},e.hoverinfo),showlegend:a({},e.showlegend,{dflt:!1})}),"calc","nested");v.x.editType=v.y.editType=v.z.editType="calc+clearAxisTypes",v.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(t,N,V){var y=t("../../components/colorscale/calc");N.exports=function(A,T){T.surfacecolor?y(A,T,{vals:T.surfacecolor,containerStr:"",cLetter:"c"}):y(A,T,{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(t,N,V){var y=t("../../../stackgl_modules").gl_surface3d,c=t("../../../stackgl_modules").ndarray,A=t("../../../stackgl_modules").ndarray_linear_interpolate.d2,T=t("../heatmap/interp2d"),e=t("../heatmap/find_empties"),a=t("../../lib").isArrayOrTypedArray,i=t("../../lib/gl_format_color").parseColorScale,n=t("../../lib/str2rgbarray"),r=t("../../components/colorscale").extractOpts;function v(E,S,P){this.scene=E,this.uid=P,this.surface=S,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=v.prototype;s.getXat=function(E,S,P,F){var I=a(this.data.x)?a(this.data.x[0])?this.data.x[S][E]:this.data.x[E]:E;return P===void 0?I:F.d2l(I,0,P)},s.getYat=function(E,S,P,F){var I=a(this.data.y)?a(this.data.y[0])?this.data.y[S][E]:this.data.y[S]:S;return P===void 0?I:F.d2l(I,0,P)},s.getZat=function(E,S,P,F){var I=this.data.z[S][E];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[S][E]),P===void 0?I:F.d2l(I,0,P)},s.handlePick=function(E){if(E.object===this.surface){var S=(E.data.index[0]-1)/this.dataScaleX-1,P=(E.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(S),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);E.index=[F,I],E.traceCoordinate=[this.getXat(F,I),this.getYat(F,I),this.getZat(F,I)],E.dataCoordinate=[this.getXat(F,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=E.dataCoordinate[D];R!=null&&(E.dataCoordinate[D]*=this.scene.dataScale[D])}var O=this.data.hovertext||this.data.text;return Array.isArray(O)&&O[I]&&O[I][F]!==void 0?E.textLabel=O[I][F]:O?E.textLabel=O:E.textLabel="",E.data.dataCoordinate=E.dataCoordinate.slice(),this.surface.highlight(E.data),this.scene.glplot.spikes.position=E.dataCoordinate,!0}};function o(E){var S=E[0].rgb,P=E[E.length-1].rgb;return S[0]===P[0]&&S[1]===P[1]&&S[2]===P[2]&&S[3]===P[3]}var b=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function g(E,S){if(E<S)return 0;for(var P=0;Math.floor(E%S)===0;)E/=S,P++;return P}function d(E){for(var S=[],P=0;P<b.length;P++){var F=b[P];S.push(g(E,F))}return S}function f(E){for(var S=d(E),P=E,F=0;F<b.length;F++)if(S[F]>0){P=b[F];break}return P}function m(E,S){if(!(E<1||S<1)){for(var P=d(E),F=d(S),I=1,D=0;D<b.length;D++)I*=Math.pow(b[D],Math.max(P[D],F[D]));return I}}function l(E){if(E.length!==0){for(var S=1,P=0;P<E.length;P++)S=m(S,E[P]);return S}}s.calcXnums=function(E){var S,P=[];for(S=1;S<E;S++){var F=this.getXat(S-1,0),I=this.getXat(S,0);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?P[S-1]=Math.abs(I-F):P[S-1]=0}var D=0;for(S=1;S<E;S++)D+=P[S-1];for(S=1;S<E;S++)P[S-1]===0?P[S-1]=1:P[S-1]=Math.round(D/P[S-1]);return P},s.calcYnums=function(E){var S,P=[];for(S=1;S<E;S++){var F=this.getYat(0,S-1),I=this.getYat(0,S);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?P[S-1]=Math.abs(I-F):P[S-1]=0}var D=0;for(S=1;S<E;S++)D+=P[S-1];for(S=1;S<E;S++)P[S-1]===0?P[S-1]=1:P[S-1]=Math.round(D/P[S-1]);return P};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=x[9],M=x[13];s.estimateScale=function(E,S){for(var P=S===0?this.calcXnums(E):this.calcYnums(E),F=1+l(P);F<u;)F*=2;for(;F>M;)F--,F/=f(F),F++,F<u&&(F=M);var I=Math.round(F/E);return I>1?I:1};function w(E,S,P){var F=P[8]+P[2]*S[0]+P[5]*S[1];return E[0]=(P[6]+P[0]*S[0]+P[3]*S[1])/F,E[1]=(P[7]+P[1]*S[0]+P[4]*S[1])/F,E}function p(E,S,P){return _(E,S,w,P),E}function _(E,S,P,F){for(var I=[0,0],D=E.shape[0],R=E.shape[1],O=0;O<D;O++)for(var z=0;z<R;z++)P(I,[O,z],F),E.set(O,z,A(S,I[0],I[1]));return E}s.refineCoords=function(E){for(var S=this.dataScaleX,P=this.dataScaleY,F=E[0].shape[0],I=E[0].shape[1],D=Math.floor(E[0].shape[0]*S+1)|0,R=Math.floor(E[0].shape[1]*P+1)|0,O=1+F+1,z=1+I+1,G=c(new Float32Array(O*z),[O,z]),Y=[1/S,0,0,0,1/P,0,0,0,1],ee=0;ee<E.length;++ee){this.surface.padField(G,E[ee]);var j=c(new Float32Array(D*R),[D,R]);p(j,G,Y),E[ee]=j}};function h(E,S){for(var P=!1,F=0;F<E.length;F++)if(S===E[F]){P=!0;break}P===!1&&E.push(S)}s.setContourLevels=function(){var E=[[],[],[]],S=[!1,!1,!1],P=!1,F,I,D;for(F=0;F<3;++F)if(this.showContour[F]&&(P=!0,this.contourSize[F]>0&&this.contourStart[F]!==null&&this.contourEnd[F]!==null&&this.contourEnd[F]>this.contourStart[F]))for(S[F]=!0,I=this.contourStart[F];I<this.contourEnd[F];I+=this.contourSize[F])D=I*this.scene.dataScale[F],h(E[F],D);if(P){var R=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(R[F]=S[F]?E[F]:this.scene.contourLevels[F]);this.surface.update({levels:R})}},s.update=function(E){var S=this.scene,P=S.fullSceneLayout,F=this.surface,I=i(E),D=S.dataScale,R=E.z[0].length,O=E._ylength,z=S.contourLevels;this.data=E;var G,Y,ee,j,X=[];for(G=0;G<3;G++)for(X[G]=[],Y=0;Y<R;Y++)X[G][Y]=[];for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)X[0][Y][ee]=this.getXat(Y,ee,E.xcalendar,P.xaxis),X[1][Y][ee]=this.getYat(Y,ee,E.ycalendar,P.yaxis),X[2][Y][ee]=this.getZat(Y,ee,E.zcalendar,P.zaxis);if(E.connectgaps)for(E._emptypoints=e(X[2]),T(X[2],E._emptypoints),E._interpolatedZ=[],Y=0;Y<R;Y++)for(E._interpolatedZ[Y]=[],ee=0;ee<O;ee++)E._interpolatedZ[Y][ee]=X[2][Y][ee];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[G][Y][ee],j==null?X[G][Y][ee]=NaN:j=X[G][Y][ee]*=D[G];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[G][Y][ee],j!=null&&(this.minValues[G]>j&&(this.minValues[G]=j),this.maxValues[G]<j&&(this.maxValues[G]=j));for(G=0;G<3;G++)this.objectOffset[G]=.5*(this.minValues[G]+this.maxValues[G]);for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[G][Y][ee],j!=null&&(X[G][Y][ee]-=this.objectOffset[G]);var ae=[c(new Float32Array(R*O),[R,O]),c(new Float32Array(R*O),[R,O]),c(new Float32Array(R*O),[R,O])];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)ae[G].set(Y,ee,X[G][Y][ee]);X=[];var he={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!E.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:E.opacityscale,opacity:E.opacity},K=r(E);if(he.intensityBounds=[K.min,K.max],E.surfacecolor){var J=c(new Float32Array(R*O),[R,O]);for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)J.set(Y,ee,E.surfacecolor[ee][Y]);ae.push(J)}else he.intensityBounds[0]*=D[2],he.intensityBounds[1]*=D[2];(M<ae[0].shape[0]||M<ae[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(ae[0].shape[0],0),this.dataScaleY=this.estimateScale(ae[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(ae)),E.surfacecolor&&(he.intensity=ae.pop());var U=[!0,!0,!0],H=["x","y","z"];for(G=0;G<3;++G){var q=E.contours[H[G]];U[G]=q.highlight,he.showContour[G]=q.show||q.highlight,he.showContour[G]&&(he.contourProject[G]=[q.project.x,q.project.y,q.project.z],q.show?(this.showContour[G]=!0,he.levels[G]=z[G],F.highlightColor[G]=he.contourColor[G]=n(q.color),q.usecolormap?F.highlightTint[G]=he.contourTint[G]=0:F.highlightTint[G]=he.contourTint[G]=1,he.contourWidth[G]=q.width,this.contourStart[G]=q.start,this.contourEnd[G]=q.end,this.contourSize[G]=q.size):(this.showContour[G]=!1,this.contourStart[G]=null,this.contourEnd[G]=null,this.contourSize[G]=0),q.highlight&&(he.dynamicColor[G]=n(q.highlightcolor),he.dynamicWidth[G]=q.highlightwidth))}o(I)&&(he.vertexColor=!0),he.objectOffset=this.objectOffset,he.coords=ae,F.update(he),F.visible=E.visible,F.enableDynamic=U,F.enableHighlight=U,F.snapToData=!0,"lighting"in E&&(F.ambientLight=E.lighting.ambient,F.diffuseLight=E.lighting.diffuse,F.specularLight=E.lighting.specular,F.roughness=E.lighting.roughness,F.fresnel=E.lighting.fresnel),"lightposition"in E&&(F.lightPosition=[E.lightposition.x,E.lightposition.y,E.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(E,S){var P=E.glplot.gl,F=y({gl:P}),I=new v(E,F,S.uid);return F._trace=I,I.update(S),E.glplot.add(F),I}N.exports=L},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(t,N,V){var y=t("../../registry"),c=t("../../lib"),A=t("../../components/colorscale/defaults"),T=t("./attributes"),e=.1;function a(s,o){for(var b=[],g=32,d=0;d<g;d++){var f=d/(g-1),m=o+(1-o)*(1-Math.pow(Math.sin(s*f*Math.PI),2));b.push([f,Math.max(0,Math.min(1,m))])}return b}function i(s){var o=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var b=0;b<s.length;b++){var g=s[b];if(g.length!==2||+g[0]<o)return!1;o=+g[0]}return!0}function n(s,o,b,g){var d,f;function m(E,S){return c.coerce(s,o,T,E,S)}var l=m("x"),x=m("y"),u=m("z");if(!u||!u.length||(l?l.length<1:!1)||(x?x.length<1:!1)){o.visible=!1;return}o._xlength=Array.isArray(l)&&c.isArrayOrTypedArray(l[0])?u.length:u[0].length,o._ylength=u.length;var M=y.getComponentMethod("calendars","handleTraceDefaults");M(s,o,["x","y","z"],g),m("text"),m("hovertext"),m("hovertemplate"),m("xhoverformat"),m("yhoverformat"),m("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(E){m(E)});var w=m("surfacecolor"),p=["x","y","z"];for(d=0;d<3;++d){var _="contours."+p[d],h=m(_+".show"),L=m(_+".highlight");if(h||L)for(f=0;f<3;++f)m(_+".project."+p[f]);h&&(m(_+".color"),m(_+".width"),m(_+".usecolormap")),L&&(m(_+".highlightcolor"),m(_+".highlightwidth")),m(_+".start"),m(_+".end"),m(_+".size")}w||(v(s,"zmin","cmin"),v(s,"zmax","cmax"),v(s,"zauto","cauto")),A(s,o,g,m,{prefix:"",cLetter:"c"}),r(s,o,g,m),o._length=null}function r(s,o,b,g){var d=g("opacityscale");d==="max"?o.opacityscale=[[0,e],[1,1]]:d==="min"?o.opacityscale=[[0,1],[1,e]]:d==="extremes"?o.opacityscale=a(1,e):i(d)||(o.opacityscale=void 0)}function v(s,o,b){o in s&&!(b in s)&&(s[b]=s[o])}N.exports={supplyDefaults:n,opacityscaleDefaults:r}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),moduleType:"trace",name:"surface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(t,N,V){var y=t("../../components/annotations/attributes"),c=t("../../lib/extend").extendFlat,A=t("../../plot_api/edit_types").overrideAll,T=t("../../plots/font_attributes"),e=t("../../plots/domain").attributes,a=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,i=N.exports=A({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:c({},y.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:c({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:c({},y.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:c({},T({arrayOk:!0}))}},"calc","from-root");i.transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(t,N,V){var y=t("../../plots/get_data").getModuleCalcData,c=t("./plot"),A="table";V.name=A,V.plot=function(T){var e=y(T.calcdata,A)[0];e.length&&c(T,e)},V.clean=function(T,e,a,i){var n=i._has&&i._has(A),r=e._has&&e._has(A);n&&!r&&i._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(t,N,V){var y=t("../../lib/gup").wrap;N.exports=function(){return y({})}},{"../../lib/gup":512}],1078:[function(t,N,V){N.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(t,N,V){var y=t("./constants"),c=t("../../lib/extend").extendFlat,A=t("fast-isnumeric");N.exports=function(b,g){var d=a(g.cells.values),f=function(Y){return Y.slice(g.header.values.length,Y.length)},m=a(g.header.values);m.length&&!m[0].length&&(m[0]=[""],m=a(m));var l=m.concat(f(d).map(function(){return i((m[0]||[""]).length)})),x=g.domain,u=Math.floor(b._fullLayout._size.w*(x.x[1]-x.x[0])),M=Math.floor(b._fullLayout._size.h*(x.y[1]-x.y[0])),w=g.header.values.length?l[0].map(function(){return g.header.height}):[y.emptyHeaderHeight],p=d.length?d[0].map(function(){return g.cells.height}):[],_=w.reduce(e,0),h=M-_,L=h+y.uplift,E=v(p,L),S=v(w,_),P=r(S,[]),F=r(E,P),I={},D=g._fullInput.columnorder.concat(f(d.map(function(Y,ee){return ee}))),R=l.map(function(Y,ee){var j=Array.isArray(g.columnwidth)?g.columnwidth[Math.min(ee,g.columnwidth.length-1)]:g.columnwidth;return A(j)?Number(j):1}),O=R.reduce(e,0);R=R.map(function(Y){return Y/O*u});var z=Math.max(T(g.header.line.width),T(g.cells.line.width)),G={key:g.uid+b._context.staticPlot,translateX:x.x[0]*b._fullLayout._size.w,translateY:b._fullLayout._size.h*(1-x.y[1]),size:b._fullLayout._size,width:u,maxLineWidth:z,height:M,columnOrder:D,groupHeight:M,rowBlocks:F,headerRowBlocks:P,scrollY:0,cells:c({},g.cells,{values:d}),headerCells:c({},g.header,{values:l}),gdColumns:l.map(function(Y){return Y[0]}),gdColumnsOriginalOrder:l.map(function(Y){return Y[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:l.map(function(Y,ee){var j=I[Y];I[Y]=(j||0)+1;var X=Y+"__"+I[Y];return{key:X,label:Y,specIndex:ee,xIndex:D[ee],xScale:n,x:void 0,calcdata:void 0,columnWidth:R[ee]}})};return G.columns.forEach(function(Y){Y.calcdata=G,Y.x=n(Y)}),G};function T(o){if(Array.isArray(o)){for(var b=0,g=0;g<o.length;g++)b=Math.max(b,T(o[g]));return b}return o}function e(o,b){return o+b}function a(o){var b=o.slice(),g=1/0,d=0,f;for(f=0;f<b.length;f++)Array.isArray(b[f])||(b[f]=[b[f]]),g=Math.min(g,b[f].length),d=Math.max(d,b[f].length);if(g!==d)for(f=0;f<b.length;f++){var m=d-b[f].length;m&&(b[f]=b[f].concat(i(m)))}return b}function i(o){for(var b=new Array(o),g=0;g<o;g++)b[g]="";return b}function n(o){return o.calcdata.columns.reduce(function(b,g){return g.xIndex<o.xIndex?b+g.columnWidth:b},0)}function r(o,b){var g=Object.keys(o);return g.map(function(d){return c({},o[d],{auxiliaryBlocks:b})})}function v(o,b){for(var g={},d,f=0,m=0,l=s(),x=0,u=0,M=0;M<o.length;M++)d=o[M],l.rows.push({rowIndex:M,rowHeight:d}),m+=d,(m>=b||M===o.length-1)&&(g[f]=l,l.key=u++,l.firstRowIndex=x,l.lastRowIndex=M,l=s(),f+=m,x=M+1,m=0);return g}function s(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(t,N,V){var y=t("../../lib/extend").extendFlat;V.splitToPanels=function(A){var T=[0,0],e=y({},A,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:A.calcdata.headerCells.values[A.specIndex],rowBlocks:A.calcdata.headerRowBlocks,calcdata:y({},A.calcdata,{cells:A.calcdata.headerCells})}),a=y({},A,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),i=y({},A,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks});return[a,i,e]},V.splitToCells=function(A){var T=c(A);return(A.values||[]).slice(T[0],T[1]).map(function(e,a){var i=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+i,key:T[0]+a,column:A,calcdata:A.calcdata,page:A.page,rowBlocks:A.rowBlocks,value:e}})};function c(A){var T=A.rowBlocks[A.page],e=T?T.rows[0].rowIndex:0,a=T?e+T.rows.length:0;return[e,a]}},{"../../lib/extend":505}],1081:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("../../plots/domain").defaults;function T(e,a){for(var i=e.columnorder||[],n=e.header.values.length,r=i.slice(0,n),v=r.slice().sort(function(b,g){return b-g}),s=r.map(function(b){return v.indexOf(b)}),o=s.length;o<n;o++)s.push(o);a("columnorder",s)}N.exports=function(a,i,n,r){function v(s,o){return y.coerce(a,i,c,s,o)}A(i,r,v),v("columnwidth"),v("header.values"),v("header.format"),v("header.align"),v("header.prefix"),v("header.suffix"),v("header.height"),v("header.line.width"),v("header.line.color"),v("header.fill.color"),y.coerceFont(v,"header.font",y.extendFlat({},r.font)),T(i,v),v("cells.values"),v("cells.format"),v("cells.align"),v("cells.prefix"),v("cells.suffix"),v("cells.height"),v("cells.line.width"),v("cells.line.color"),v("cells.fill.color"),y.coerceFont(v,"cells.font",y.extendFlat({},r.font)),i._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"table",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(t,N,V){var y=t("./constants"),c=t("@plotly/d3"),A=t("../../lib"),T=A.numberFormat,e=t("../../lib/gup"),a=t("../../components/drawing"),i=t("../../lib/svg_text_utils"),n=t("../../lib").raiseToTop,r=t("../../lib").strTranslate,v=t("../../lib").cancelTransition,s=t("./data_preparation_helper"),o=t("./data_split_helpers"),b=t("../../components/color");N.exports=function(ie,oe){var ne=!ie._context.staticPlot,le=ie._fullLayout._paper.selectAll("."+y.cn.table).data(oe.map(function(ze){var Ie=e.unwrap(ze),Ve=Ie.trace;return s(ie,Ve)}),e.keyFun);le.exit().remove(),le.enter().append("g").classed(y.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),le.attr("width",function(ze){return ze.width+ze.size.l+ze.size.r}).attr("height",function(ze){return ze.height+ze.size.t+ze.size.b}).attr("transform",function(ze){return r(ze.translateX,ze.translateY)});var _e=le.selectAll("."+y.cn.tableControlView).data(e.repeat,e.keyFun),fe=_e.enter().append("g").classed(y.cn.tableControlView,!0).style("box-sizing","content-box");if(ne){var ye="onwheel"in document?"wheel":"mousewheel";fe.on("mousemove",function(ze){_e.filter(function(Ie){return ze===Ie}).call(l,ie)}).on(ye,function(ze){if(!ze.scrollbarState.wheeling){ze.scrollbarState.wheeling=!0;var Ie=ze.scrollY+c.event.deltaY,Ve=j(ie,_e,null,Ie)(ze);Ve||(c.event.stopPropagation(),c.event.preventDefault()),ze.scrollbarState.wheeling=!1}}).call(l,ie,!0)}_e.attr("transform",function(ze){return r(ze.size.l,ze.size.t)});var xe=_e.selectAll("."+y.cn.scrollBackground).data(e.repeat,e.keyFun);xe.enter().append("rect").classed(y.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function(ze){return ze.width}).attr("height",function(ze){return ze.height}),_e.each(function(ze){a.setClipUrl(c.select(this),d(ie,ze),ie)});var me=_e.selectAll("."+y.cn.yColumn).data(function(ze){return ze.columns},e.keyFun);me.enter().append("g").classed(y.cn.yColumn,!0),me.exit().remove(),me.attr("transform",function(ze){return r(ze.x,0)}),ne&&me.call(c.behavior.drag().origin(function(ze){var Ie=c.select(this);return R(Ie,ze,-y.uplift),n(this),ze.calcdata.columnDragInProgress=!0,l(_e.filter(function(Ve){return ze.calcdata.key===Ve.key}),ie),ze}).on("drag",function(ze){var Ie=c.select(this),Ve=function(Qt){return(ze===Qt?c.event.x:Qt.x)+Qt.columnWidth/2};ze.x=Math.max(-y.overdrag,Math.min(ze.calcdata.width+y.overdrag-ze.columnWidth,c.event.x));var dt=m(me).filter(function(Qt){return Qt.calcdata.key===ze.calcdata.key}),Ft=dt.sort(function(Qt,Ot){return Ve(Qt)-Ve(Ot)});Ft.forEach(function(Qt,Ot){Qt.xIndex=Ot,Qt.x=ze===Qt?Qt.x:Qt.xScale(Qt)}),me.filter(function(Qt){return ze!==Qt}).transition().ease(y.transitionEase).duration(y.transitionDuration).attr("transform",function(Qt){return r(Qt.x,0)}),Ie.call(v).attr("transform",r(ze.x,-y.uplift))}).on("dragend",function(ze){var Ie=c.select(this),Ve=ze.calcdata;ze.x=ze.xScale(ze),ze.calcdata.columnDragInProgress=!1,R(Ie,ze,0),I(ie,Ve,Ve.columns.map(function(dt){return dt.xIndex}))})),me.each(function(ze){a.setClipUrl(c.select(this),f(ie,ze),ie)});var be=me.selectAll("."+y.cn.columnBlock).data(o.splitToPanels,e.keyFun);be.enter().append("g").classed(y.cn.columnBlock,!0).attr("id",function(ze){return ze.key}),be.style("cursor",function(ze){return ze.dragHandle?"ew-resize":ze.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ke=be.filter(z),De=be.filter(O);ne&&De.call(c.behavior.drag().origin(function(ze){return c.event.stopPropagation(),ze}).on("drag",j(ie,_e,-1)).on("dragend",function(){})),x(ie,_e,ke,be),x(ie,_e,De,be);var He=_e.selectAll("."+y.cn.scrollAreaClip).data(e.repeat,e.keyFun);He.enter().append("clipPath").classed(y.cn.scrollAreaClip,!0).attr("id",function(ze){return d(ie,ze)});var Ae=He.selectAll("."+y.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);Ae.enter().append("rect").classed(y.cn.scrollAreaClipRect,!0).attr("x",-y.overdrag).attr("y",-y.uplift).attr("fill","none"),Ae.attr("width",function(ze){return ze.width+2*y.overdrag}).attr("height",function(ze){return ze.height+y.uplift});var Le=me.selectAll("."+y.cn.columnBoundary).data(e.repeat,e.keyFun);Le.enter().append("g").classed(y.cn.columnBoundary,!0);var Ze=me.selectAll("."+y.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ze.enter().append("clipPath").classed(y.cn.columnBoundaryClippath,!0),Ze.attr("id",function(ze){return f(ie,ze)});var We=Ze.selectAll("."+y.cn.columnBoundaryRect).data(e.repeat,e.keyFun);We.enter().append("rect").classed(y.cn.columnBoundaryRect,!0).attr("fill","none"),We.attr("width",function(ze){return ze.columnWidth+2*g(ze)}).attr("height",function(ze){return ze.calcdata.height+2*g(ze)+y.uplift}).attr("x",function(ze){return-g(ze)}).attr("y",function(ze){return-g(ze)}),ee(null,De,_e)};function g(Q){return Math.ceil(Q.calcdata.maxLineWidth/2)}function d(Q,ie){return"clip"+Q._fullLayout._uid+"_scrollAreaBottomClip_"+ie.key}function f(Q,ie){return"clip"+Q._fullLayout._uid+"_columnBoundaryClippath_"+ie.calcdata.key+"_"+ie.specIndex}function m(Q){return[].concat.apply([],Q.map(function(ie){return ie})).map(function(ie){return ie.__data__})}function l(Q,ie,oe){function ne(me){var be=me.rowBlocks;return U(be,be.length-1)+(be.length?H(be[be.length-1],1/0):1)}var le=Q.selectAll("."+y.cn.scrollbarKit).data(e.repeat,e.keyFun);le.enter().append("g").classed(y.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),le.each(function(me){var be=me.scrollbarState;be.totalHeight=ne(me),be.scrollableAreaHeight=me.groupHeight-G(me),be.currentlyVisibleHeight=Math.min(be.totalHeight,be.scrollableAreaHeight),be.ratio=be.currentlyVisibleHeight/be.totalHeight,be.barLength=Math.max(be.ratio*be.currentlyVisibleHeight,y.goldenRatio*y.scrollbarWidth),be.barWiggleRoom=be.currentlyVisibleHeight-be.barLength,be.wiggleRoom=Math.max(0,be.totalHeight-be.scrollableAreaHeight),be.topY=be.barWiggleRoom===0?0:me.scrollY/be.wiggleRoom*be.barWiggleRoom,be.bottomY=be.topY+be.barLength,be.dragMultiplier=be.wiggleRoom/be.barWiggleRoom}).attr("transform",function(me){var be=me.width+y.scrollbarWidth/2+y.scrollbarOffset;return r(be,G(me))});var _e=le.selectAll("."+y.cn.scrollbar).data(e.repeat,e.keyFun);_e.enter().append("g").classed(y.cn.scrollbar,!0);var fe=_e.selectAll("."+y.cn.scrollbarSlider).data(e.repeat,e.keyFun);fe.enter().append("g").classed(y.cn.scrollbarSlider,!0),fe.attr("transform",function(me){return r(0,me.scrollbarState.topY||0)});var ye=fe.selectAll("."+y.cn.scrollbarGlyph).data(e.repeat,e.keyFun);ye.enter().append("line").classed(y.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",y.scrollbarWidth).attr("stroke-linecap","round").attr("y1",y.scrollbarWidth/2),ye.attr("y2",function(me){return me.scrollbarState.barLength-y.scrollbarWidth/2}).attr("stroke-opacity",function(me){return me.columnDragInProgress||!me.scrollbarState.barWiggleRoom||oe?0:.4}),ye.transition().delay(0).duration(0),ye.transition().delay(y.scrollbarHideDelay).duration(y.scrollbarHideDuration).attr("stroke-opacity",0);var xe=_e.selectAll("."+y.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);xe.enter().append("line").classed(y.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",y.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(me){var be=c.event.y,ke=this.getBoundingClientRect(),De=me.scrollbarState,He=be-ke.top,Ae=c.scale.linear().domain([0,De.scrollableAreaHeight]).range([0,De.totalHeight]).clamp(!0);De.topY<=He&&He<=De.bottomY||j(ie,Q,null,Ae(He-De.barLength/2))(me)}).call(c.behavior.drag().origin(function(me){return c.event.stopPropagation(),me.scrollbarState.scrollbarScrollInProgress=!0,me}).on("drag",j(ie,Q)).on("dragend",function(){})),xe.attr("y2",function(me){return me.scrollbarState.scrollableAreaHeight}),ie._context.staticPlot&&(ye.remove(),xe.remove())}function x(Q,ie,oe,ne){var le=u(oe),_e=M(le);h(_e);var fe=w(_e);E(fe);var ye=_(_e),xe=p(ye);L(xe),S(xe,ie,ne,Q),J(_e)}function u(Q){var ie=Q.selectAll("."+y.cn.columnCells).data(e.repeat,e.keyFun);return ie.enter().append("g").classed(y.cn.columnCells,!0),ie.exit().remove(),ie}function M(Q){var ie=Q.selectAll("."+y.cn.columnCell).data(o.splitToCells,function(oe){return oe.keyWithinBlock});return ie.enter().append("g").classed(y.cn.columnCell,!0),ie.exit().remove(),ie}function w(Q){var ie=Q.selectAll("."+y.cn.cellRect).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("rect").classed(y.cn.cellRect,!0),ie}function p(Q){var ie=Q.selectAll("."+y.cn.cellText).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("text").classed(y.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){c.event.stopPropagation()}),ie}function _(Q){var ie=Q.selectAll("."+y.cn.cellTextHolder).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("g").classed(y.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}function h(Q){Q.each(function(ie,oe){var ne=ie.calcdata.cells.font,le=ie.column.specIndex,_e={size:D(ne.size,le,oe),color:D(ne.color,le,oe),family:D(ne.family,le,oe)};ie.rowNumber=ie.key,ie.align=D(ie.calcdata.cells.align,le,oe),ie.cellBorderWidth=D(ie.calcdata.cells.line.width,le,oe),ie.font=_e})}function L(Q){Q.each(function(ie){a.font(c.select(this),ie.font)})}function E(Q){Q.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var oe=c.select(this);b.stroke(oe,D(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),b.fill(oe,D(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})}function S(Q,ie,oe,ne){Q.text(function(le){var _e=le.column.specIndex,fe=le.rowNumber,ye=le.value,xe=typeof ye=="string",me=xe&&ye.match(/<br>/i),be=!xe||me;le.mayHaveMarkup=xe&&ye.match(/[<&>]/);var ke=P(ye);le.latex=ke;var De=ke?"":D(le.calcdata.cells.prefix,_e,fe)||"",He=ke?"":D(le.calcdata.cells.suffix,_e,fe)||"",Ae=ke?null:D(le.calcdata.cells.format,_e,fe)||null,Le=De+(Ae?T(Ae)(le.value):le.value)+He,Ze;le.wrappingNeeded=!le.wrapped&&!be&&!ke&&(Ze=F(Le)),le.cellHeightMayIncrease=me||ke||le.mayHaveMarkup||(Ze===void 0?F(Le):Ze),le.needsConvertToTspans=le.mayHaveMarkup||le.wrappingNeeded||le.latex;var We;if(le.wrappingNeeded){var ze=y.wrapSplitCharacter===" "?Le.replace(/<a href=/ig,"<a_href="):Le,Ie=ze.split(y.wrapSplitCharacter),Ve=y.wrapSplitCharacter===" "?Ie.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):Ie;le.fragments=Ve.map(function(dt){return{text:dt,width:null}}),le.fragments.push({fragment:y.wrapSpacer,width:null}),We=Ve.join(y.lineBreaker)+y.lineBreaker+y.wrapSpacer}else delete le.fragments,We=Le;return We}).attr("dy",function(le){return le.needsConvertToTspans?0:"0.75em"}).each(function(le){var _e=this,fe=c.select(_e),ye=le.wrappingNeeded?ae:he;le.needsConvertToTspans?i.convertToTspans(fe,ne,ye(oe,_e,ie,ne,le)):c.select(_e.parentNode).attr("transform",function(xe){return r(K(xe),y.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function P(Q){return typeof Q=="string"&&Q.match(y.latexCheck)}function F(Q){return Q.indexOf(y.wrapSplitCharacter)!==-1}function I(Q,ie,oe){var ne=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(le,_e){return oe[ne.indexOf(le)]-oe[ne.indexOf(_e)]}),ie.columnorder=oe,Q.emit("plotly_restyle")}function D(Q,ie,oe){if(Array.isArray(Q)){var ne=Q[Math.min(ie,Q.length-1)];return Array.isArray(ne)?ne[Math.min(oe,ne.length-1)]:ne}else return Q}function R(Q,ie,oe){Q.transition().ease(y.releaseTransitionEase).duration(y.releaseTransitionDuration).attr("transform",r(ie.x,oe))}function O(Q){return Q.type==="cells"}function z(Q){return Q.type==="header"}function G(Q){var ie=Q.rowBlocks.length?Q.rowBlocks[0].auxiliaryBlocks:[];return ie.reduce(function(oe,ne){return oe+H(ne,1/0)},0)}function Y(Q,ie,oe){for(var ne=[],le=0,_e=0;_e<Q.length;_e++){for(var fe=Q[_e],ye=fe.rows,xe=0,me=0;me<ye.length;me++)xe+=ye[me].rowHeight;fe.allRowsHeight=xe;var be=le+xe,ke=ie,De=ke+oe;ke<be&&De>le&&ne.push(_e),le+=xe}return ne}function ee(Q,ie,oe){var ne=m(ie)[0];if(ne!==void 0){var le=ne.rowBlocks,_e=ne.calcdata,fe=U(le,le.length),ye=ne.calcdata.groupHeight-G(ne),xe=_e.scrollY=Math.max(0,Math.min(fe-ye,_e.scrollY)),me=Y(le,xe,ye);me.length===1&&(me[0]===le.length-1?me.unshift(me[0]-1):me.push(me[0]+1)),me[0]%2&&me.reverse(),ie.each(function(be,ke){be.page=me[ke],be.scrollY=xe}),ie.attr("transform",function(be){var ke=U(be.rowBlocks,be.page)-be.scrollY;return r(0,ke)}),Q&&(X(Q,oe,ie,me,ne.prevPages,ne,0),X(Q,oe,ie,me,ne.prevPages,ne,1),l(oe,Q))}}function j(Q,ie,oe,ne){return function(_e){var fe=_e.calcdata?_e.calcdata:_e,ye=ie.filter(function(ke){return fe.key===ke.key}),xe=oe||fe.scrollbarState.dragMultiplier,me=fe.scrollY;fe.scrollY=ne===void 0?fe.scrollY+xe*c.event.dy:ne;var be=ye.selectAll("."+y.cn.yColumn).selectAll("."+y.cn.columnBlock).filter(O);return ee(Q,be,ye),fe.scrollY===me}}function X(Q,ie,oe,ne,le,_e,fe){var ye=ne[fe]!==le[fe];ye&&(clearTimeout(_e.currentRepaint[fe]),_e.currentRepaint[fe]=setTimeout(function(){var xe=oe.filter(function(me,be){return be===fe&&ne[be]!==le[be]});x(Q,ie,xe,oe),le[fe]=ne[fe]}))}function ae(Q,ie,oe,ne){return function(){var _e=c.select(ie.parentNode);_e.each(function(fe){var ye=fe.fragments;_e.selectAll("tspan.line").each(function(Le,Ze){ye[Ze].width=this.getComputedTextLength()});var xe=ye[ye.length-1].width,me=ye.slice(0,-1),be=[],ke,De,He=0,Ae=fe.column.columnWidth-2*y.cellPad;for(fe.value="";me.length;)ke=me.shift(),De=ke.width+xe,He+De>Ae&&(fe.value+=be.join(y.wrapSpacer)+y.lineBreaker,be=[],He=0),be.push(ke.text),He+=De;He&&(fe.value+=be.join(y.wrapSpacer)),fe.wrapped=!0}),_e.selectAll("tspan.line").remove(),S(_e.select("."+y.cn.cellText),oe,Q,ne),c.select(ie.parentNode.parentNode).call(J)}}function he(Q,ie,oe,ne,le){return function(){if(!le.settledY){var fe=c.select(ie.parentNode),ye=re(le),xe=le.key-ye.firstRowIndex,me=ye.rows[xe].rowHeight,be=le.cellHeightMayIncrease?ie.parentNode.getBoundingClientRect().height+2*y.cellPad:me,ke=Math.max(be,me),De=ke-ye.rows[xe].rowHeight;De&&(ye.rows[xe].rowHeight=ke,Q.selectAll("."+y.cn.columnCell).call(J),ee(null,Q.filter(O),0),l(oe,ne,!0)),fe.attr("transform",function(){var He=this,Ae=He.parentNode,Le=Ae.getBoundingClientRect(),Ze=c.select(He.parentNode).select("."+y.cn.cellRect).node().getBoundingClientRect(),We=He.transform.baseVal.consolidate(),ze=Ze.top-Le.top+(We?We.matrix.f:y.cellPad);return r(K(le,c.select(He.parentNode).select("."+y.cn.cellTextHolder).node().getBoundingClientRect().width),ze)}),le.settledY=!0}}}function K(Q,ie){switch(Q.align){case"left":return y.cellPad;case"right":return Q.column.columnWidth-(ie||0)-y.cellPad;case"center":return(Q.column.columnWidth-(ie||0))/2;default:return y.cellPad}}function J(Q){Q.attr("transform",function(ie){var oe=ie.rowBlocks[0].auxiliaryBlocks.reduce(function(fe,ye){return fe+H(ye,1/0)},0),ne=re(ie),le=H(ne,ie.key),_e=le+oe;return r(0,_e)}).selectAll("."+y.cn.cellRect).attr("height",function(ie){return Z(re(ie),ie.key).rowHeight})}function U(Q,ie){for(var oe=0,ne=ie-1;ne>=0;ne--)oe+=q(Q[ne]);return oe}function H(Q,ie){for(var oe=0,ne=0;ne<Q.rows.length&&Q.rows[ne].rowIndex<ie;ne++)oe+=Q.rows[ne].rowHeight;return oe}function q(Q){var ie=Q.allRowsHeight;if(ie!==void 0)return ie;for(var oe=0,ne=0;ne<Q.rows.length;ne++)oe+=Q.rows[ne].rowHeight;return Q.allRowsHeight=oe,oe}function re(Q){return Q.rowBlocks[Q.page]}function Z(Q,ie){return Q.rows[ie-Q.firstRowIndex]}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(t,N,V){var y=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../components/colorscale/attributes"),T=t("../../plots/domain").attributes,e=t("../pie/attributes"),a=t("../sunburst/attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:n({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},A("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:n({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:c({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:y({},{keys:i.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:a.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(t,N,V){var y=t("../../plots/plots");V.name="treemap",V.plot=function(c,A,T,e){y.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){y.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],1086:[function(t,N,V){var y=t("../sunburst/calc");V.calc=function(c,A){return y.calc(c,A)},V.crossTraceCalc=function(c){return y._runCrossTraceCalc("treemap",c)}},{"../sunburst/calc":1060}],1087:[function(t,N,V){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("../../components/color"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,a=t("../bar/constants").TEXTPAD,i=t("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;N.exports=function(s,o,b,g){function d(S,P){return y.coerce(s,o,c,S,P)}var f=d("labels"),m=d("parents");if(!f||!f.length||!m||!m.length){o.visible=!1;return}var l=d("values");l&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth");var x=d("tiling.packing");x==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var u=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(u)?"text+label":"label"),d("hovertext"),d("hovertemplate");var M=d("pathbar.visible"),w="auto";e(s,o,g,d,w,{hasPathbar:M,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var p=o.textposition.indexOf("bottom")!==-1,_=d("marker.line.width");_&&d("marker.line.color",g.paper_bgcolor);var h=d("marker.colors"),L=o._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;L?r(s,o,g,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(h||[]).length);var E=o.textfont.size*2;d("marker.pad.t",p?E/4:E),d("marker.pad.l",E/4),d("marker.pad.r",E/4),d("marker.pad.b",p?E:E/4),o._hovered={marker:{line:{width:2,color:A.contrast(g.paper_bgcolor)}}},M&&(d("pathbar.thickness",o.pathbar.textfont.size+2*a),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(o,g,d),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(t,N,V){var y=t("@plotly/d3"),c=t("../sunburst/helpers"),A=t("../bar/uniform_text"),T=A.clearMinTextSize,e=t("../bar/style").resizeText,a=t("./plot_one");N.exports=function(n,r,v,s,o){var b=o.type,g=o.drawDescendants,d=n._fullLayout,f=d["_"+b+"layer"],m,l,x=!v;if(T(b,d),m=f.selectAll("g.trace."+b).data(r,function(M){return M[0].trace.uid}),m.enter().append("g").classed("trace",!0).classed(b,!0),m.order(),!d.uniformtext.mode&&c.hasTransition(v)){s&&(l=s());var u=y.transition().duration(v.duration).ease(v.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});u.each(function(){f.selectAll("g.trace").each(function(M){a(n,M,this,v,g)})})}else m.each(function(M){a(n,M,this,v,g)}),d.uniformtext.mode&&e(n,f.selectAll(".trace"),b);x&&m.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=!0;N.exports=function(o,b,g,d,f){var m=f.barDifY,l=f.width,x=f.height,u=f.viewX,M=f.viewY,w=f.pathSlice,p=f.toMoveInsideSlice,_=f.strTransform,h=f.hasTransition,L=f.handleSlicesExit,E=f.makeUpdateSliceInterpolator,S=f.makeUpdateTextInterpolator,P={},F=o._context.staticPlot,I=o._fullLayout,D=b[0],R=D.trace,O=D.hierarchy,z=l/R._entryDepth,G=n.listPath(g.data,"id"),Y=e(O.copy(),[l,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();Y=Y.filter(function(j){var X=G.indexOf(j.data.id);return X===-1?!1:(j.x0=z*X,j.x1=z*(X+1),j.y0=m,j.y1=m+x,j.onPathbar=!0,!0)}),Y.reverse(),d=d.data(Y,n.getPtId),d.enter().append("g").classed("pathbar",!0),L(d,v,P,[l,x],w),d.order();var ee=d;h&&(ee=ee.transition().each("end",function(){var j=y.select(this);n.setSliceCursor(j,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function(j){j._x0=u(j.x0),j._x1=u(j.x1),j._y0=M(j.y0),j._y1=M(j.y1),j._hoverX=u(j.x1-Math.min(l,x)/2),j._hoverY=M(j.y1-x/2);var X=y.select(this),ae=c.ensureSingle(X,"path","surface",function(U){U.style("pointer-events",F?"none":"all")});h?ae.transition().attrTween("d",function(U){var H=E(U,v,P,[l,x]);return function(q){return w(H(q))}}):ae.attr("d",w),X.call(r,g,o,b,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),ae.call(a,j,R,{hovered:!1}),j._text=(n.getPtLabel(j)||"").split("<br>").join(" ")||"";var he=c.ensureSingle(X,"g","slicetext"),K=c.ensureSingle(he,"text","",function(U){U.attr("data-notex",1)}),J=c.ensureUniformFontSize(o,n.determineTextFont(R,j,I.font,{onPathbar:!0}));K.text(j._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(A.font,J).call(T.convertToTspans,o),j.textBB=A.bBox(K.node()),j.transform=p(j,{fontSize:J.size,onPathbar:!0}),j.transform.fontSize=J.size,h?K.transition().attrTween("transform",function(U){var H=S(U,v,P,[l,x]);return function(q){return _(H(q))}}):K.attr("transform",_(j))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=t("../sunburst/plot").formatSliceLabel,s=!1;N.exports=function(b,g,d,f,m){var l=m.width,x=m.height,u=m.viewX,M=m.viewY,w=m.pathSlice,p=m.toMoveInsideSlice,_=m.strTransform,h=m.hasTransition,L=m.handleSlicesExit,E=m.makeUpdateSliceInterpolator,S=m.makeUpdateTextInterpolator,P=m.prevEntry,F={},I=b._context.staticPlot,D=b._fullLayout,R=g[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,G=O.textposition.indexOf("right")!==-1,Y=O.textposition.indexOf("bottom")!==-1,ee=!Y&&!O.marker.pad.t||Y&&!O.marker.pad.b,j=e(d,[l,x],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}),X=j.descendants(),ae=1/0,he=-1/0;X.forEach(function(q){var re=q.depth;re>=O._maxDepth?(q.x0=q.x1=(q.x0+q.x1)/2,q.y0=q.y1=(q.y0+q.y1)/2):(ae=Math.min(ae,re),he=Math.max(he,re))}),f=f.data(X,n.getPtId),O._maxVisibleLayers=isFinite(he)?he-ae+1:0,f.enter().append("g").classed("slice",!0),L(f,s,F,[l,x],w),f.order();var K=null;if(h&&P){var J=n.getPtId(P);f.each(function(q){K===null&&n.getPtId(q)===J&&(K={x0:q.x0,x1:q.x1,y0:q.y0,y1:q.y1})})}var U=function(){return K||{x0:0,x1:l,y0:0,y1:x}},H=f;return h&&(H=H.transition().each("end",function(){var q=y.select(this);n.setSliceCursor(q,b,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(q){var re=n.isHeader(q,O);q._x0=u(q.x0),q._x1=u(q.x1),q._y0=M(q.y0),q._y1=M(q.y1),q._hoverX=u(q.x1-O.marker.pad.r),q._hoverY=M(Y?q.y1-O.marker.pad.b/2:q.y0+O.marker.pad.t/2);var Z=y.select(this),Q=c.ensureSingle(Z,"path","surface",function(le){le.style("pointer-events",I?"none":"all")});h?Q.transition().attrTween("d",function(le){var _e=E(le,s,U(),[l,x]);return function(fe){return w(_e(fe))}}):Q.attr("d",w),Z.call(r,d,b,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,b,{isTransitioning:b._transitioning}),Q.call(a,q,O,{hovered:!1}),q.x0===q.x1||q.y0===q.y1?q._text="":re?q._text=ee?"":n.getPtLabel(q)||"":q._text=v(q,d,O,g,D)||"";var ie=c.ensureSingle(Z,"g","slicetext"),oe=c.ensureSingle(ie,"text","",function(le){le.attr("data-notex",1)}),ne=c.ensureUniformFontSize(b,n.determineTextFont(O,q,D.font));oe.text(q._text||" ").classed("slicetext",!0).attr("text-anchor",G?"end":z||re?"start":"middle").call(A.font,ne).call(T.convertToTspans,b),q.textBB=A.bBox(oe.node()),q.transform=p(q,{fontSize:ne.size,isHeader:re}),q.transform.fontSize=ne.size,h?oe.transition().attrTween("transform",function(le){var _e=S(le,s,U(),[l,x]);return function(fe){return _(_e(fe))}}):oe.attr("transform",_(q))}),K}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(t,N,V){N.exports=function y(c,A,T){var e;T.swapXY&&(e=c.x0,c.x0=c.y0,c.y0=e,e=c.x1,c.x1=c.y1,c.y1=e),T.flipX&&(e=c.x0,c.x0=A[0]-c.x1,c.x1=A[0]-e),T.flipY&&(e=c.y0,c.y0=A[1]-c.y1,c.y1=A[1]-e);var a=c.children;if(a)for(var i=0;i<a.length;i++)y(a[i],A,T)}},{}],1093:[function(t,N,V){N.exports={moduleType:"trace",name:"treemap",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(t,N,V){N.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return y.coerce(T,e,c,i,n)}a("treemapcolorway",e.colorway),a("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(t,N,V){var y=t("d3-hierarchy"),c=t("./flip_tree");N.exports=function(e,a,i){var n=i.flipX,r=i.flipY,v=i.packing==="dice-slice",s=i.pad[r?"bottom":"top"],o=i.pad[n?"right":"left"],b=i.pad[n?"left":"right"],g=i.pad[r?"top":"bottom"],d;v&&(d=o,o=s,s=d,d=b,b=g,g=d);var f=y.treemap().tile(A(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(o).paddingRight(b).paddingTop(s).paddingBottom(g).size(v?[a[1],a[0]]:a)(e);return(v||n||r)&&c(f,a,{swapXY:v,flipX:n,flipY:r}),f};function A(T,e){switch(T){case"squarify":return y.treemapSquarify.ratio(e);case"binary":return y.treemapBinary;case"dice":return y.treemapDice;case"slice":return y.treemapSlice;default:return y.treemapSliceDice}}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(t,N,V){var y=t("./draw"),c=t("./draw_descendants");N.exports=function(T,e,a,i){return y(T,e,a,i,{type:"treemap",drawDescendants:c})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(t,N,V){var y=t("@plotly/d3"),c=t("d3-interpolate").interpolate,A=t("../sunburst/helpers"),T=t("../../lib"),e=t("../bar/constants").TEXTPAD,a=t("../bar/plot"),i=a.toMoveInsideBar,n=t("../bar/uniform_text"),r=n.recordMinTextSize,v=t("./constants"),s=t("./draw_ancestors");function o(b){return A.isHierarchyRoot(b)?"":A.getPtId(b)}N.exports=function(g,d,f,m,l){var x=g._fullLayout,u=d[0],M=u.trace,w=M.type,p=w==="icicle",_=u.hierarchy,h=A.findEntryWithLevel(_,M.level),L=y.select(f),E=L.selectAll("g.pathbar"),S=L.selectAll("g.slice");if(!h){E.remove(),S.remove();return}var P=A.isHierarchyRoot(h),F=!x.uniformtext.mode&&A.hasTransition(m),I=A.getMaxDepth(M),D=function(Ve){return Ve.data.depth-h.data.depth<I},R=x._size,O=M.domain,z=R.w*(O.x[1]-O.x[0]),G=R.h*(O.y[1]-O.y[0]),Y=z,ee=M.pathbar.thickness,j=M.marker.line.width+v.gapWithPathbar,X=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?G+j:-(ee+j):0,ae={x0:Y,x1:Y,y0:X,y1:X+ee},he=function(Ve,dt,Ft){var Qt=M.tiling.pad,Ot=function(Lt){return Lt-Qt<=dt.x0},Ct=function(Lt){return Lt+Qt>=dt.x1},jt=function(Lt){return Lt-Qt<=dt.y0},Nt=function(Lt){return Lt+Qt>=dt.y1};return Ve.x0===dt.x0&&Ve.x1===dt.x1&&Ve.y0===dt.y0&&Ve.y1===dt.y1?{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1}:{x0:Ot(Ve.x0-Qt)?0:Ct(Ve.x0-Qt)?Ft[0]:Ve.x0,x1:Ot(Ve.x1+Qt)?0:Ct(Ve.x1+Qt)?Ft[0]:Ve.x1,y0:jt(Ve.y0-Qt)?0:Nt(Ve.y0-Qt)?Ft[1]:Ve.y0,y1:jt(Ve.y1+Qt)?0:Nt(Ve.y1+Qt)?Ft[1]:Ve.y1}},K=null,J={},U={},H=null,q=function(Ve,dt){return dt?J[o(Ve)]:U[o(Ve)]},re=function(Ve,dt,Ft,Qt){if(dt)return J[o(_)]||ae;var Ot=U[M.level]||Ft;return D(Ve)?he(Ve,Ot,Qt):{}};u.hasMultipleRoots&&P&&I++,M._maxDepth=I,M._backgroundColor=x.paper_bgcolor,M._entryDepth=h.data.depth,M._atRootLevel=P;var Z=-z/2+R.l+R.w*(O.x[1]+O.x[0])/2,Q=-G/2+R.t+R.h*(1-(O.y[1]+O.y[0])/2),ie=function(Ve){return Z+Ve},oe=function(Ve){return Q+Ve},ne=oe(0),le=ie(0),_e=function(Ve){return le+Ve},fe=function(Ve){return ne+Ve};function ye(Ve,dt){return Ve+","+dt}var xe=_e(0),me=function(Ve){Ve.x=Math.max(xe,Ve.x)},be=M.pathbar.edgeshape,ke=function(Ve){var dt=_e(Math.max(Math.min(Ve.x0,Ve.x0),0)),Ft=_e(Math.min(Math.max(Ve.x1,Ve.x1),Y)),Qt=fe(Ve.y0),Ot=fe(Ve.y1),Ct=ee/2,jt={},Nt={};jt.x=dt,Nt.x=Ft,jt.y=Nt.y=(Qt+Ot)/2;var Lt={x:dt,y:Qt},Xe={x:Ft,y:Qt},it={x:Ft,y:Ot},Ye={x:dt,y:Ot};return be===">"?(Lt.x-=Ct,Xe.x-=Ct,it.x-=Ct,Ye.x-=Ct):be==="/"?(it.x-=Ct,Ye.x-=Ct,jt.x-=Ct/2,Nt.x-=Ct/2):be==="\\"?(Lt.x-=Ct,Xe.x-=Ct,jt.x-=Ct/2,Nt.x-=Ct/2):be==="<"&&(jt.x-=Ct,Nt.x-=Ct),me(Lt),me(Ye),me(jt),me(Xe),me(it),me(Nt),"M"+ye(Lt.x,Lt.y)+"L"+ye(Xe.x,Xe.y)+"L"+ye(Nt.x,Nt.y)+"L"+ye(it.x,it.y)+"L"+ye(Ye.x,Ye.y)+"L"+ye(jt.x,jt.y)+"Z"},De=function(Ve){var dt=ie(Ve.x0),Ft=ie(Ve.x1),Qt=oe(Ve.y0),Ot=oe(Ve.y1),Ct=Ft-dt,jt=Ot-Qt;if(!Ct||!jt)return"";var Nt=0,Lt=Ct>2*Nt&&jt>2*Nt?Nt:0,Xe=function(it,Ye){return Lt?"a"+ye(Lt,Lt)+" 0 0 1 "+ye(it,Ye):""};return"M"+ye(dt,Qt+Lt)+Xe(Lt,-Lt)+"L"+ye(Ft-Lt,Qt)+Xe(Lt,Lt)+"L"+ye(Ft,Ot-Lt)+Xe(-Lt,Lt)+"L"+ye(dt+Lt,Ot)+Xe(-Lt,-Lt)+"Z"},He=function(Ve,dt){var Ft=Ve.x0,Qt=Ve.x1,Ot=Ve.y0,Ct=Ve.y1,jt=Ve.textBB,Nt=function(Mt){return M.textposition.indexOf(Mt)!==-1},Lt=Nt("bottom"),Xe=Nt("top")||dt.isHeader&&!Lt,it=Xe?"start":Lt?"end":"middle",Ye=Nt("right"),Ee=Nt("left")||dt.onPathbar,Ge=Ee?-1:Ye?1:0,Ke=M[p?"tiling":"marker"].pad;if(dt.isHeader){if(Ft+=(p?Ke:Ke.l)-e,Qt-=(p?Ke:Ke.r)-e,Ft>=Qt){var qe=(Ft+Qt)/2;Ft=qe,Qt=qe}var At;Lt?(At=Ct-(p?Ke:Ke.b),Ot<At&&At<Ct&&(Ot=At)):(At=Ot+(p?Ke:Ke.t),Ot<At&&At<Ct&&(Ct=At))}var mt=i(Ft,Qt,Ot,Ct,jt,{isHorizontal:!1,constrained:!0,angle:0,anchor:it,leftToRight:Ge});return mt.fontSize=dt.fontSize,mt.targetX=ie(mt.targetX),mt.targetY=oe(mt.targetY),isNaN(mt.targetX)||isNaN(mt.targetY)?{}:(Ft!==Qt&&Ot!==Ct&&r(M.type,mt,x),{scale:mt.scale,rotate:mt.rotate,textX:mt.textX,textY:mt.textY,anchorX:mt.anchorX,anchorY:mt.anchorY,targetX:mt.targetX,targetY:mt.targetY})},Ae=function(Ve,dt){for(var Ft,Qt=0,Ot=Ve;!Ft&&Qt<I;)Qt++,Ot=Ot.parent,Ot?Ft=q(Ot,dt):Qt=I;return Ft||{}},Le=function(Ve,dt,Ft,Qt){var Ot=q(Ve,dt),Ct;if(dt)Ct=ae;else{var jt=q(h,dt);jt?Ct=he(Ve,jt,Qt):Ct={}}return c(Ot,Ct)},Ze=function(Ve,dt,Ft,Qt,Ot){var Ct=q(Ve,dt),jt;if(Ct)jt=Ct;else if(dt)jt=ae;else if(K)if(Ve.parent){var Nt=H||Ft;Nt&&!dt?jt=he(Ve,Nt,Qt):(jt={},T.extendFlat(jt,Ae(Ve,dt)))}else jt=T.extendFlat({},Ve),p&&(Ot.orientation==="h"?Ot.flipX?jt.x0=Ve.x1:jt.x1=0:Ot.flipY?jt.y0=Ve.y1:jt.y1=0);else jt={};return c(jt,{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1})},We=function(Ve,dt,Ft,Qt){var Ot=q(Ve,dt),Ct={},jt=re(Ve,dt,Ft,Qt);T.extendFlat(Ct,{transform:He({x0:jt.x0,x1:jt.x1,y0:jt.y0,y1:jt.y1,textBB:Ve.textBB,_text:Ve._text},{isHeader:A.isHeader(Ve,M)})}),Ot?Ct=Ot:Ve.parent&&T.extendFlat(Ct,Ae(Ve,dt));var Nt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&r(M.type,Nt,x),c(Ct,{transform:{scale:Nt.scale,rotate:Nt.rotate,textX:Nt.textX,textY:Nt.textY,anchorX:Nt.anchorX,anchorY:Nt.anchorY,targetX:Nt.targetX,targetY:Nt.targetY}})},ze=function(Ve,dt,Ft,Qt,Ot){var Ct=Qt[0],jt=Qt[1];F?Ve.exit().transition().each(function(){var Nt=y.select(this),Lt=Nt.select("path.surface");Lt.transition().attrTween("d",function(it){var Ye=Le(it,dt,Ft,[Ct,jt]);return function(Ee){return Ot(Ye(Ee))}});var Xe=Nt.select("g.slicetext");Xe.attr("opacity",0)}).remove():Ve.exit().remove()},Ie=function(Ve){var dt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&r(M.type,dt,x),T.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};F&&(E.each(function(Ve){J[o(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(J[o(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate})}),S.each(function(Ve){U[o(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(U[o(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate}),!K&&A.isEntry(Ve)&&(K=Ve)})),H=l(g,d,h,S,{width:z,height:G,viewX:ie,viewY:oe,pathSlice:De,toMoveInsideSlice:He,prevEntry:K,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:We,handleSlicesExit:ze,hasTransition:F,strTransform:Ie}),M.pathbar.visible?s(g,d,h,E,{barDifY:X,width:Y,height:ee,viewX:_e,viewY:fe,pathSlice:ke,toMoveInsideSlice:He,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:We,handleSlicesExit:ze,hasTransition:F,strTransform:Ie}):E.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/color"),A=t("../../lib"),T=t("../sunburst/helpers"),e=t("../bar/uniform_text").resizeText;function a(n){var r=n._fullLayout._treemaplayer.selectAll(".trace");e(n,r,"treemap"),r.each(function(v){var s=y.select(this),o=v[0],b=o.trace;s.style("opacity",b.opacity),s.selectAll("path.surface").each(function(g){y.select(this).call(i,g,b,{hovered:!1})})})}function i(n,r,v,s){var o=(s||{}).hovered,b=r.data.data,g=b.i,d,f,m=b.color,l=T.isHierarchyRoot(r),x=1;if(o)d=v._hovered.marker.line.color,f=v._hovered.marker.line.width;else if(l&&m===v.root.color)x=100,d="rgba(0,0,0,0)",f=0;else if(d=A.castOption(v,g,"marker.line.color")||c.defaultLine,f=A.castOption(v,g,"marker.line.width")||0,!v._hasColorscale&&!r.onPathbar){var u=v.marker.depthfade;if(u){var M=c.combine(c.addOpacity(v._backgroundColor,.75),m),w;if(u===!0){var p=T.getMaxDepth(v);isFinite(p)?T.isLeaf(r)?w=0:w=v._maxVisibleLayers-(r.data.depth-v._entryDepth):w=r.data.height+1}else w=r.data.depth-v._entryDepth,v._atRootLevel||w++;if(w>0)for(var _=0;_<w;_++){var h=.5*_/w;m=c.combine(c.addOpacity(M,h),m)}}}n.style("stroke-width",f).call(c.fill,m).call(c.stroke,d).style("opacity",x)}N.exports={style:a,styleOne:i}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(t,N,V){var y=t("../box/attributes"),c=t("../../lib/extend").extendFlat,A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat;N.exports={y:y.y,x:y.x,x0:y.x0,y0:y.y0,xhoverformat:A("x"),yhoverformat:A("y"),name:c({},y.name,{}),orientation:c({},y.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:y.fillcolor,points:c({},y.boxpoints,{}),jitter:c({},y.jitter,{}),pointpos:c({},y.pointpos,{}),width:c({},y.width,{}),marker:y.marker,text:y.text,hovertext:y.hovertext,hovertemplate:y.hovertemplate,quartilemethod:y.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup,selected:y.selected,unselected:y.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(t,N,V){var y=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../box/calc"),T=t("./helpers"),e=t("../../constants/numerical").BADNUM;N.exports=function(v,s){var o=A(v,s);if(o[0].t.empty)return o;for(var b=v._fullLayout,g=c.getFromId(v,s[s.orientation==="h"?"xaxis":"yaxis"]),d=1/0,f=-1/0,m=0,l=0,x=0;x<o.length;x++){var u=o[x],M=u.pts.map(T.extractVal),w=u.bandwidth=i(s,u,M),p=u.span=n(s,u,g,w);if(u.min===u.max&&w===0)p=u.span=[u.min,u.max],u.density=[{v:1,t:p[0]}],u.bandwidth=w,m=Math.max(m,1);else{var _=p[1]-p[0],h=Math.ceil(_/(w/3)),L=_/h;if(!isFinite(L)||!isFinite(h))return y.error("Something went wrong with computing the violin span"),o[0].t.empty=!0,o;var E=T.makeKDE(u,s,M);u.density=new Array(h);for(var S=0,P=p[0];P<p[1]+L/2;S++,P+=L){var F=E(P);u.density[S]={v:F,t:P},m=Math.max(m,F)}}l=Math.max(l,M.length),d=Math.min(d,p[0]),f=Math.max(f,p[1])}var I=c.findExtremes(g,[d,f],{padded:!0});if(s._extremes[g._id]=I,s.width)o[0].t.maxKDE=m;else{var D=b._violinScaleGroupStats,R=s.scalegroup,O=D[R];O?(O.maxKDE=Math.max(O.maxKDE,m),O.maxCount=Math.max(O.maxCount,l)):D[R]={maxKDE:m,maxCount:l}}return o[0].t.labels.kde=y._(v,"kde:"),o};function a(r,v,s){var o=Math.min(v,s/1.349);return 1.059*o*Math.pow(r,-.2)}function i(r,v,s){var o=v.max-v.min;if(!o)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,o/1e4);var b=s.length,g=y.stdev(s,b-1,v.mean);return Math.max(a(b,g,v.q3-v.q1),o/100)}function n(r,v,s,o){var b=r.spanmode,g=r.span||[],d=[v.min,v.max],f=[v.min-2*o,v.max+2*o],m;function l(u){var M=g[u],w=s.type==="multicategory"?s.r2c(M):s.d2c(M,0,r[v.valLetter+"calendar"]);return w===e?f[u]:w}b==="soft"?m=f:b==="hard"?m=d:m=[l(0),l(1)];var x={type:"linear",range:m};return c.setConvert(x),x.cleanRange(),m}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(t,N,V){var y=t("../box/cross_trace_calc").setPositionOffset,c=["v","h"];N.exports=function(T,e){for(var a=T.calcdata,i=e.xaxis,n=e.yaxis,r=0;r<c.length;r++){for(var v=c[r],s=v==="h"?n:i,o=[],b=0;b<a.length;b++){var g=a[b],d=g[0].t,f=g[0].trace;f.visible===!0&&f.type==="violin"&&!d.empty&&f.orientation===v&&f.xaxis===i._id&&f.yaxis===n._id&&o.push(b)}y("violin",T,o,s)}}},{"../box/cross_trace_calc":684}],1103:[function(t,N,V){var y=t("../../lib"),c=t("../../components/color"),A=t("../box/defaults"),T=t("./attributes");N.exports=function(a,i,n,r){function v(L,E){return y.coerce(a,i,T,L,E)}function s(L,E){return y.coerce2(a,i,T,L,E)}if(A.handleSampleDefaults(a,i,v,r),i.visible!==!1){v("bandwidth"),v("side");var o=v("width");o||(v("scalegroup",i.name),v("scalemode"));var b=v("span"),g;Array.isArray(b)&&(g="manual"),v("spanmode",g);var d=v("line.color",(a.marker||{}).color||n),f=v("line.width"),m=v("fillcolor",c.addOpacity(i.line.color,.5));A.handlePointsDefaults(a,i,v,{prefix:""});var l=s("box.width"),x=s("box.fillcolor",m),u=s("box.line.color",d),M=s("box.line.width",f),w=v("box.visible",Boolean(l||x||u||M));w||(i.box={visible:!1});var p=s("meanline.color",d),_=s("meanline.width",f),h=v("meanline.visible",Boolean(p||_));h||(i.meanline={visible:!1}),v("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(t,N,V){var y=t("../../lib"),c={gaussian:function(A){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*A*A)}};V.makeKDE=function(A,T,e){var a=e.length,i=c.gaussian,n=A.bandwidth,r=1/(a*n);return function(v){for(var s=0,o=0;o<a;o++)s+=i((v-e[o])/n);return r*s}},V.getPositionOnKdePath=function(A,T,e){var a,i;T.orientation==="h"?(a="y",i="x"):(a="x",i="y");var n=y.findPointOnPath(A.path,e,i,{pathLength:A.pathLength}),r=A.posCenterPx,v=n[a],s=T.side==="both"?2*r-v:r;return[v,s]},V.getKdeValue=function(A,T,e){var a=A.pts.map(V.extractVal),i=V.makeKDE(A,T,a);return i(e)/A.posDensityScale},V.extractVal=function(A){return A.v}},{"../../lib":515}],1105:[function(t,N,V){var y=t("../../components/color"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../box/hover"),e=t("./helpers");N.exports=function(i,n,r,v,s){s||(s={});var o=s.hoverLayer,b=i.cd,g=b[0].trace,d=g.hoveron,f=d.indexOf("violins")!==-1,m=d.indexOf("kde")!==-1,l=[],x,u;if(f||m){var M=T.hoverOnBoxes(i,n,r,v);if(m&&M.length>0){var w=i.xa,p=i.ya,_,h,L,E,S;g.orientation==="h"?(S=n,_="y",L=p,h="x",E=w):(S=r,_="x",L=w,h="y",E=p);var P=b[i.index];if(S>=P.span[0]&&S<=P.span[1]){var F=c.extendFlat({},i),I=E.c2p(S,!0),D=e.getKdeValue(P,g,S),R=e.getPositionOnKdePath(P,g,I),O=L._offset,z=L._length;F[_+"0"]=R[0],F[_+"1"]=R[1],F[h+"0"]=F[h+"1"]=I,F[h+"Label"]=h+": "+A.hoverLabelText(E,S,g[h+"hoverformat"])+", "+b[0].t.labels.kde+" "+D.toFixed(3);for(var G=0,Y=0;Y<M.length;Y++)if(M[Y].attr==="med"){G=Y;break}F.spikeDistance=M[G].spikeDistance;var ee=_+"Spike";F[ee]=M[G][ee],M[G].spikeDistance=void 0,M[G][ee]=void 0,F.hovertemplate=!1,l.push(F),u={},u[_+"1"]=c.constrain(O+R[0],O,O+z),u[_+"2"]=c.constrain(O+R[1],O,O+z),u[h+"1"]=u[h+"2"]=E._offset+I}}f&&(l=l.concat(M))}d.indexOf("points")!==-1&&(x=T.hoverOnPoints(i,n,r));var j=o.selectAll(".violinline-"+g.uid).data(u?[0]:[]);return j.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),j.exit().remove(),j.attr(u).call(y.stroke,i.color),v==="closest"?x?[x]:l:(x&&l.push(x),l)}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../box/select"),moduleType:"trace",name:"violin",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(t,N,V){var y=t("../box/layout_attributes"),c=t("../../lib").extendFlat;N.exports={violinmode:c({},y.boxmode,{}),violingap:c({},y.boxgap,{}),violingroupgap:c({},y.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes"),A=t("../box/layout_defaults");N.exports=function(e,a,i){function n(r,v){return y.coerce(e,a,c,r,v)}A._supply(e,a,i,n,"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../box/plot"),e=t("../scatter/line_points"),a=t("./helpers");N.exports=function(n,r,v,s){var o=n._fullLayout,b=r.xaxis,g=r.yaxis;function d(f,m){var l=e(f,{xaxis:b,yaxis:g,trace:m,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return A.smoothopen(l[0],1)}c.makeTraceGroups(s,v,"trace violins").each(function(f){var m=y.select(this),l=f[0],x=l.t,u=l.trace;if(u.visible!==!0||x.empty){m.remove();return}var M=x.bPos,w=x.bdPos,p=r[x.valLetter+"axis"],_=r[x.posLetter+"axis"],h=u.side==="both",L=h||u.side==="positive",E=h||u.side==="negative",S=m.selectAll("path.violin").data(c.identity);S.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),S.exit().remove(),S.each(function(G){var Y=y.select(this),ee=G.density,j=ee.length,X=_.c2l(G.pos+M,!0),ae=_.l2p(X),he;if(u.width)he=x.maxKDE/w;else{var K=o._violinScaleGroupStats[u.scalegroup];he=u.scalemode==="count"?K.maxKDE/w*(K.maxCount/G.pts.length):K.maxKDE/w}var J,U,H,q,re,Z,Q;if(L){for(Z=new Array(j),q=0;q<j;q++)Q=Z[q]={},Q[x.posLetter]=X+ee[q].v/he,Q[x.valLetter]=p.c2l(ee[q].t,!0);J=d(Z,u)}if(E){for(Z=new Array(j),re=0,q=j-1;re<j;re++,q--)Q=Z[re]={},Q[x.posLetter]=X-ee[q].v/he,Q[x.valLetter]=p.c2l(ee[q].t,!0);U=d(Z,u)}if(h)H=J+"L"+U.substr(1)+"Z";else{var ie=[ae,p.c2p(ee[0].t)],oe=[ae,p.c2p(ee[j-1].t)];u.orientation==="h"&&(ie.reverse(),oe.reverse()),L?H="M"+ie+"L"+J.substr(1)+"L"+oe:H="M"+oe+"L"+U.substr(1)+"L"+ie}Y.attr("d",H),G.posCenterPx=ae,G.posDensityScale=he*w,G.path=Y.node(),G.pathLength=G.path.getTotalLength()/(h?2:1)});var P=u.box,F=P.width,I=(P.line||{}).width,D,R;h?(D=w*F,R=0):L?(D=[0,w*F/2],R=I*{x:1,y:-1}[x.posLetter]):(D=[w*F/2,0],R=I*{x:-1,y:1}[x.posLetter]),T.plotBoxAndWhiskers(m,{pos:_,val:p},u,{bPos:M,bdPos:D,bPosPxOffset:R}),T.plotBoxMean(m,{pos:_,val:p},u,{bPos:M,bdPos:D,bPosPxOffset:R});var O;!u.box.visible&&u.meanline.visible&&(O=c.identity);var z=m.selectAll("path.meanline").data(O||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),z.exit().remove(),z.each(function(G){var Y=p.c2p(G.mean,!0),ee=a.getPositionOnKdePath(G,u,Y);y.select(this).attr("d",u.orientation==="h"?"M"+Y+","+ee[0]+"V"+ee[1]:"M"+ee[0]+","+Y+"H"+ee[1])}),T.plotPoints(m,{x:b,y:g},u,x)})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/color"),A=t("../scatter/style").stylePoints;N.exports=function(e){var a=y.select(e).selectAll("g.trace.violins");a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var n=i[0].trace,r=y.select(this),v=n.box||{},s=v.line||{},o=n.meanline||{},b=o.width;r.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(c.stroke,n.line.color).call(c.fill,n.fillcolor),r.selectAll("path.box").style("stroke-width",s.width+"px").call(c.stroke,s.color).call(c.fill,v.fillcolor);var g={"stroke-width":b+"px","stroke-dasharray":2*b+"px,"+b+"px"};r.selectAll("path.mean").style(g).call(c.stroke,o.color),r.selectAll("path.meanline").style(g).call(c.stroke,o.color),A(r,n,e)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(t,N,V){var y=t("../../components/colorscale/attributes"),c=t("../isosurface/attributes"),A=t("../surface/attributes"),T=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll,i=N.exports=a(e({x:c.x,y:c.y,z:c.z,value:c.value,isomin:c.isomin,isomax:c.isomax,surface:c.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:c.slices,caps:c.caps,text:c.text,hovertext:c.hovertext,xhoverformat:c.xhoverformat,yhoverformat:c.yhoverformat,zhoverformat:c.zhoverformat,valuehoverformat:c.valuehoverformat,hovertemplate:c.hovertemplate},y("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:c.colorbar,opacity:c.opacity,opacityscale:A.opacityscale,lightposition:c.lightposition,lighting:c.lighting,flatshading:c.flatshading,contour:c.contour,hoverinfo:e({},T.hoverinfo),showlegend:e({},T.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(t,N,V){var y=t("../../../stackgl_modules").gl_mesh3d,c=t("../../lib/gl_format_color").parseColorScale,A=t("../../lib/str2rgbarray"),T=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),a=t("../isosurface/convert").findNearestOnAxis,i=t("../isosurface/convert").generateIsoMeshes;function n(s,o,b){this.scene=s,this.uid=b,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(s){if(s.object===this.mesh){var o=s.data.index,b=this.data._meshX[o],g=this.data._meshY[o],d=this.data._meshZ[o],f=this.data._Ys.length,m=this.data._Zs.length,l=a(b,this.data._Xs).id,x=a(g,this.data._Ys).id,u=a(d,this.data._Zs).id,M=s.index=u+m*x+m*f*l;s.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[M]!==void 0?s.textLabel=w[M]:w&&(s.textLabel=w),!0}},r.update=function(s){var o=this.scene,b=o.fullSceneLayout;this.data=i(s);function g(x,u,M,w){return u.map(function(p){return x.d2l(p,0,w)*M})}var d=e(g(b.xaxis,s._meshX,o.dataScale[0],s.xcalendar),g(b.yaxis,s._meshY,o.dataScale[1],s.ycalendar),g(b.zaxis,s._meshZ,o.dataScale[2],s.zcalendar)),f=e(s._meshI,s._meshJ,s._meshK),m={positions:d,cells:f,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:A(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},l=T(s);m.vertexIntensity=s._meshIntensity,m.vertexIntensityBounds=[l.min,l.max],m.colormap=c(s),this.mesh.update(m)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(s,o){var b=s.glplot.gl,g=y({gl:b}),d=new n(s,g,o.uid);return g._trace=d,d.update(o),s.glplot.add(g),d}N.exports=v},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(t,N,V){var y=t("../../lib"),c=t("./attributes"),A=t("../isosurface/defaults").supplyIsoDefaults,T=t("../surface/defaults").opacityscaleDefaults;N.exports=function(a,i,n,r){function v(s,o){return y.coerce(a,i,c,s,o)}A(a,i,n,r,v),T(a,i,r,v)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"volume",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(t,N,V){var y=t("../bar/attributes"),c=t("../scatter/attributes").line,A=t("../../plots/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");function v(s){return{marker:{color:n({},y.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},y.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},y.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}N.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:y.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:n({},A.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label"])}),text:y.text,textposition:y.textposition,insidetextanchor:y.insidetextanchor,textangle:y.textangle,textfont:y.textfont,insidetextfont:y.insidetextfont,outsidetextfont:y.outsidetextfont,constraintext:y.constraintext,cliponaxis:y.cliponaxis,orientation:y.orientation,offset:y.offset,width:y.width,increasing:v(),decreasing:v(),totals:v(),connector:{line:{color:n({},c.color,{dflt:r.defaultLine}),width:n({},c.width,{editType:"plot"}),dash:c.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(t,N,V){var y=t("../../plots/cartesian/axes"),c=t("../../plots/cartesian/align_period"),A=t("../../lib").mergeArray,T=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;function a(n){return n==="a"||n==="absolute"}function i(n){return n==="t"||n==="total"}N.exports=function(r,v){var s=y.getFromId(r,v.xaxis||"x"),o=y.getFromId(r,v.yaxis||"y"),b,g,d,f,m,l;v.orientation==="h"?(b=s.makeCalcdata(v,"x"),d=o.makeCalcdata(v,"y"),f=c(v,o,"y",d),m=!!v.yperiodalignment,l="y"):(b=o.makeCalcdata(v,"y"),d=s.makeCalcdata(v,"x"),f=c(v,s,"x",d),m=!!v.xperiodalignment,l="x"),g=f.vals;for(var x=Math.min(g.length,b.length),u=new Array(x),M=0,w,p=!1,_=0;_<x;_++){var h=b[_]||0,L=!1;(b[_]!==e||i(v.measure[_])||a(v.measure[_]))&&_+1<x&&(b[_+1]!==e||i(v.measure[_+1])||a(v.measure[_+1]))&&(L=!0);var E=u[_]={i:_,p:g[_],s:h,rawS:h,cNext:L};a(v.measure[_])?(M=E.s,E.isSum=!0,E.dir="totals",E.s=M):i(v.measure[_])?(E.isSum=!0,E.dir="totals",E.s=M):(E.isSum=!1,E.dir=E.rawS<0?"decreasing":"increasing",w=E.s,E.s=M+w,M+=w),E.dir==="totals"&&(p=!0),m&&(u[_].orig_p=d[_],u[_][l+"End"]=f.ends[_],u[_][l+"Start"]=f.starts[_]),v.ids&&(E.id=String(v.ids[_])),E.v=(v.base||0)+M}return u.length&&(u[0].hasTotals=p),A(v.text,u,"tx"),A(v.hovertext,u,"htx"),T(u,v),u}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(t,N,V){N.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(t,N,V){var y=t("../bar/cross_trace_calc").setGroupPositions;N.exports=function(A,T){var e=A._fullLayout,a=A._fullData,i=A.calcdata,n=T.xaxis,r=T.yaxis,v=[],s=[],o=[],b,g;for(g=0;g<a.length;g++){var d=a[g];d.visible===!0&&d.xaxis===n._id&&d.yaxis===r._id&&d.type==="waterfall"&&(b=i[g],d.orientation==="h"?o.push(b):s.push(b),v.push(b))}var f={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(y(A,n,r,s,f),y(A,r,n,o,f),g=0;g<v.length;g++){b=v[g];for(var m=0;m<b.length;m++){var l=b[m];l.isSum===!1&&(l.s0+=m===0?0:b[m-1].s),m+1<b.length&&(b[m].nextP0=b[m+1].p0,b[m].nextS0=b[m+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(t,N,V){var y=t("../../lib"),c=t("../bar/defaults").handleGroupingDefaults,A=t("../bar/defaults").handleText,T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./attributes"),i=t("../../components/color"),n=t("../../constants/delta.js"),r=n.INCREASING.COLOR,v=n.DECREASING.COLOR,s="#4499FF";function o(d,f,m){d(f+".marker.color",m),d(f+".marker.line.color",i.defaultLine),d(f+".marker.line.width")}function b(d,f,m,l){function x(_,h){return y.coerce(d,f,a,_,h)}var u=T(d,f,l,x);if(!u){f.visible=!1;return}e(d,f,l,x),x("xhoverformat"),x("yhoverformat"),x("measure"),x("orientation",f.x&&!f.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var M=x("textposition");A(d,f,l,x,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f.textposition!=="none"&&(x("texttemplate"),f.texttemplate||x("textinfo")),o(x,"increasing",r),o(x,"decreasing",v),o(x,"totals",s);var w=x("connector.visible");if(w){x("connector.mode");var p=x("connector.line.width");p&&(x("connector.line.color"),x("connector.line.dash"))}}function g(d,f){var m,l;function x(M){return y.coerce(l._input,l,a,M)}if(f.waterfallmode==="group")for(var u=0;u<d.length;u++)l=d[u],m=l._input,c(m,l,f,x)}N.exports={supplyDefaults:b,crossTraceDefaults:g}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(t,N,V){N.exports=function(c,A){return c.x="xVal"in A?A.xVal:A.x,c.y="yVal"in A?A.yVal:A.y,"initial"in A&&(c.initial=A.initial),"delta"in A&&(c.delta=A.delta),"final"in A&&(c.final=A.final),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),c}},{}],1121:[function(t,N,V){var y=t("../../plots/cartesian/axes").hoverLabelText,c=t("../../components/color").opacity,A=t("../bar/hover").hoverOnBars,T=t("../../constants/delta.js"),e={increasing:T.INCREASING.SYMBOL,decreasing:T.DECREASING.SYMBOL};N.exports=function(n,r,v,s,o){var b=A(n,r,v,s,o);if(!b)return;var g=b.cd,d=g[0].trace,f=d.orientation==="h",m=f?"x":"y",l=f?n.xa:n.ya;function x(P){return y(l,P,d[m+"hoverformat"])}var u=b.index,M=g[u],w=M.isSum?M.b+M.s:M.rawS;if(!M.isSum){b.initial=M.b+M.s-w,b.delta=w,b.final=b.initial+b.delta;var p=x(Math.abs(b.delta));b.deltaLabel=w<0?"("+p+")":p,b.finalLabel=x(b.final),b.initialLabel=x(b.initial)}var _=M.hi||d.hoverinfo,h=[];if(_&&_!=="none"&&_!=="skip"){var L=_==="all",E=_.split("+"),S=function(P){return L||E.indexOf(P)!==-1};M.isSum||(S("final")&&(f?!S("x"):!S("y"))&&h.push(b.finalLabel),S("delta")&&(w<0?h.push(b.deltaLabel+" "+e.decreasing):h.push(b.deltaLabel+" "+e.increasing)),S("initial")&&h.push("Initial: "+b.initialLabel))}return h.length&&(b.extraText=h.join("<br>")),b.color=a(d,M),[b]};function a(i,n){var r=i[n.dir].marker,v=r.color,s=r.line.color,o=r.line.width;if(c(v))return v;if(c(s)&&o)return s}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(t,N,V){N.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(t,N,V){var y=t("../../lib"),c=t("./layout_attributes");N.exports=function(A,T,e){var a=!1;function i(v,s){return y.coerce(A,T,c,v,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="waterfall"){a=!0;break}}a&&(i("waterfallmode"),i("waterfallgap",.2),i("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),a=t("../bar/uniform_text").clearMinTextSize;N.exports=function(v,s,o,b){var g=v._fullLayout;a("waterfall",g),e.plot(v,s,o,b,{mode:g.waterfallmode,norm:g.waterfallmode,gap:g.waterfallgap,groupgap:g.waterfallgroupgap}),i(v,s,o,b)};function i(r,v,s,o){var b=v.xaxis,g=v.yaxis;c.makeTraceGroups(o,s,"trace bars").each(function(d){var f=y.select(this),m=d[0].trace,l=c.ensureSingle(f,"g","lines");if(!m.connector||!m.connector.visible){l.remove();return}var x=m.orientation==="h",u=m.connector.mode,M=l.selectAll("g.line").data(c.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var w=M.size();M.each(function(p,_){if(!(_!==w-1&&!p.cNext)){var h=n(p,b,g,x),L=h[0],E=h[1],S="";L[0]!==T&&E[0]!==T&&L[1]!==T&&E[1]!==T&&(u==="spanning"&&!p.isSum&&_>0&&(x?S+="M"+L[0]+","+E[1]+"V"+E[0]:S+="M"+L[1]+","+E[0]+"H"+L[0]),u!=="between"&&(p.isSum||_<w-1)&&(x?S+="M"+L[1]+","+E[0]+"V"+E[1]:S+="M"+L[0]+","+E[1]+"H"+L[1]),L[2]!==T&&E[2]!==T&&(x?S+="M"+L[1]+","+E[1]+"V"+E[2]:S+="M"+L[1]+","+E[1]+"H"+L[2])),S===""&&(S="M0,0Z"),c.ensureSingle(y.select(this),"path").attr("d",S).call(A.setClipUrl,v.layerClipId,r)}})})}function n(r,v,s,o){var b=[],g=[],d=o?v:s,f=o?s:v;return b[0]=d.c2p(r.s0,!0),g[0]=f.c2p(r.p0,!0),b[1]=d.c2p(r.s1,!0),g[1]=f.c2p(r.p1,!0),b[2]=d.c2p(r.nextS0,!0),g[2]=f.c2p(r.nextP0,!0),o?[b,g]:[g,b]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(t,N,V){var y=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../components/color"),T=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),a=t("../bar/uniform_text").resizeText,i=e.styleTextPoints;function n(r,v,s){var o=s||y.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");a(r,o,"waterfall"),o.style("opacity",function(b){return b[0].trace.opacity}),o.each(function(b){var g=y.select(this),d=b[0].trace;g.selectAll(".point > path").each(function(f){if(!f.isBlank){var m=d[f.dir].marker;y.select(this).call(A.fill,m.color).call(A.stroke,m.line.color).call(c.dashLine,m.line.dash,m.line.width).style("opacity",d.selectedpoints&&!f.selected?T:1)}}),i(g,d,r),g.selectAll(".lines").each(function(){var f=d.connector.line;c.lineGroupStyle(y.select(this).selectAll("path"),f.width,f.color,f.dash)})})}N.exports={style:n}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(t,N,V){var y=t("../plots/cartesian/axes"),c=t("../lib"),A=t("../plot_api/plot_schema"),T=t("./helpers").pointsAccessorFunction,e=t("../constants/numerical").BADNUM;V.moduleType="transform",V.name="aggregate";var a=V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=a.aggregations;V.supplyDefaults=function(b,g){var d={},f;function m(P,F){return c.coerce(b,d,a,P,F)}var l=m("enabled");if(!l)return d;var x=A.findArrayAttributes(g),u={};for(f=0;f<x.length;f++)u[x[f]]=1;var M=m("groups");if(!Array.isArray(M)){if(!u[M])return d.enabled=!1,d;u[M]=0}var w=b.aggregations||[],p=d.aggregations=new Array(w.length),_;function h(P,F){return c.coerce(w[f],_,i,P,F)}for(f=0;f<w.length;f++){_={_index:f};var L=h("target"),E=h("func"),S=h("enabled");S&&L&&(u[L]||E==="count"&&u[L]===void 0)?(E==="stddev"&&h("funcmode"),u[L]=0,p[f]=_):p[f]={enabled:!1,_index:f}}for(f=0;f<x.length;f++)u[x[f]]&&p.push({target:x[f],func:i.func.dflt,enabled:!0,_index:-1});return d},V.calcTransform=function(b,g,d){if(!!d.enabled){var f=d.groups,m=c.getTargetArray(g,{target:f});if(!!m){var l,x,u,M,w={},p={},_=[],h=T(g.transforms,d),L=m.length;for(g._length&&(L=Math.min(L,g._length)),l=0;l<L;l++)x=m[l],u=w[x],u===void 0?(w[x]=_.length,M=[l],_.push(M),p[w[x]]=h(l)):(_[u].push(l),p[w[x]]=(p[w[x]]||[]).concat(h(l)));d._indexToPoints=p;var E=d.aggregations;for(l=0;l<E.length;l++)n(b,g,_,E[l]);typeof f=="string"&&n(b,g,_,{target:f,func:"first",enabled:!0}),g._length=_.length}}};function n(b,g,d,f){if(!!f.enabled){for(var m=f.target,l=c.nestedProperty(g,m),x=l.get(),u=y.getDataConversions(b,g,m,x),M=r(f,u),w=new Array(d.length),p=0;p<d.length;p++)w[p]=M(x,d[p]);l.set(w),f.func==="count"&&c.pushUnique(g._arrayAttrs,m)}}function r(b,g){var d=b.func,f=g.d2c,m=g.c2d;switch(d){case"count":return v;case"first":return s;case"last":return o;case"sum":return function(l,x){for(var u=0,M=0;M<x.length;M++){var w=f(l[x[M]]);w!==e&&(u+=w)}return m(u)};case"avg":return function(l,x){for(var u=0,M=0,w=0;w<x.length;w++){var p=f(l[x[w]]);p!==e&&(u+=p,M++)}return M?m(u/M):e};case"min":return function(l,x){for(var u=1/0,M=0;M<x.length;M++){var w=f(l[x[M]]);w!==e&&(u=Math.min(u,w))}return u===1/0?e:m(u)};case"max":return function(l,x){for(var u=-1/0,M=0;M<x.length;M++){var w=f(l[x[M]]);w!==e&&(u=Math.max(u,w))}return u===-1/0?e:m(u)};case"range":return function(l,x){for(var u=1/0,M=-1/0,w=0;w<x.length;w++){var p=f(l[x[w]]);p!==e&&(u=Math.min(u,p),M=Math.max(M,p))}return M===-1/0||u===1/0?e:m(M-u)};case"change":return function(l,x){var u=f(l[x[0]]),M=f(l[x[x.length-1]]);return u===e||M===e?e:m(M-u)};case"median":return function(l,x){for(var u=[],M=0;M<x.length;M++){var w=f(l[x[M]]);w!==e&&u.push(w)}if(!u.length)return e;u.sort(c.sorterAsc);var p=(u.length-1)/2;return m((u[Math.floor(p)]+u[Math.ceil(p)])/2)};case"mode":return function(l,x){for(var u={},M=0,w=e,p=0;p<x.length;p++){var _=f(l[x[p]]);if(_!==e){var h=u[_]=(u[_]||0)+1;h>M&&(M=h,w=_)}}return M?m(w):e};case"rms":return function(l,x){for(var u=0,M=0,w=0;w<x.length;w++){var p=f(l[x[w]]);p!==e&&(u+=p*p,M++)}return M?m(Math.sqrt(u/M)):e};case"stddev":return function(l,x){var u=0,M=0,w=1,p=e,_;for(_=0;_<x.length&&p===e;_++)p=f(l[x[_]]);if(p===e)return e;for(;_<x.length;_++){var h=f(l[x[_]]);if(h!==e){var L=h-p;u+=L,M+=L*L,w++}}var E=b.funcmode==="sample"?w-1:w;return E?Math.sqrt((M-u*u/w)/E):0}}}function v(b,g){return g.length}function s(b,g){return b[g[0]]}function o(b,g){return b[g[g.length-1]]}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(t,N,V){var y=t("../lib"),c=t("../registry"),A=t("../plots/cartesian/axes"),T=t("./helpers").pointsAccessorFunction,e=t("../constants/filter_ops"),a=e.COMPARISON_OPS,i=e.INTERVAL_OPS,n=e.SET_OPS;V.moduleType="transform",V.name="filter",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(i).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},V.supplyDefaults=function(v){var s={};function o(f,m){return y.coerce(v,s,V.attributes,f,m)}var b=o("enabled");if(b){var g=o("target");if(y.isArrayOrTypedArray(g)&&g.length===0)return s.enabled=!1,s;o("preservegaps"),o("operation"),o("value");var d=c.getComponentMethod("calendars","handleDefaults");d(v,s,"valuecalendar",null),d(v,s,"targetcalendar",null)}return s},V.calcTransform=function(v,s,o){if(!o.enabled)return;var b=y.getTargetArray(s,o);if(!b)return;var g=o.target,d=b.length;s._length&&(d=Math.min(d,s._length));var f=o.targetcalendar,m=s._arrayAttrs,l=o.preservegaps;if(typeof g=="string"){var x=y.nestedProperty(s,g+"calendar").get();x&&(f=x)}var u=A.getDataToCoordFunc(v,s,g,b),M=r(o,u,f),w={},p={},_=0;function h(I,D){for(var R=0;R<m.length;R++){var O=y.nestedProperty(s,m[R]);I(O,D)}}var L,E;l?(L=function(I){w[I.astr]=y.extendDeep([],I.get()),I.set(new Array(d))},E=function(I,D){var R=w[I.astr][D];I.get()[D]=R}):(L=function(I){w[I.astr]=y.extendDeep([],I.get()),I.set([])},E=function(I,D){var R=w[I.astr][D];I.get().push(R)}),h(L);for(var S=T(s.transforms,o),P=0;P<d;P++){var F=M(b[P]);F?(h(E,P),p[_++]=S(P)):l&&_++}o._indexToPoints=p,s._length=_};function r(v,s,o){var b=v.operation,g=v.value,d=Array.isArray(g);function f(u){return u.indexOf(b)!==-1}var m=function(u){return s(u,0,v.valuecalendar)},l=function(u){return s(u,0,o)},x;switch(f(a)?x=m(d?g[0]:g):f(i)?x=d?[m(g[0]),m(g[1])]:[m(g),m(g)]:f(n)&&(x=d?g.map(m):[m(g)]),b){case"=":return function(u){return l(u)===x};case"!=":return function(u){return l(u)!==x};case"<":return function(u){return l(u)<x};case"<=":return function(u){return l(u)<=x};case">":return function(u){return l(u)>x};case">=":return function(u){return l(u)>=x};case"[]":return function(u){var M=l(u);return M>=x[0]&&M<=x[1]};case"()":return function(u){var M=l(u);return M>x[0]&&M<x[1]};case"[)":return function(u){var M=l(u);return M>=x[0]&&M<x[1]};case"(]":return function(u){var M=l(u);return M>x[0]&&M<=x[1]};case"][":return function(u){var M=l(u);return M<=x[0]||M>=x[1]};case")(":return function(u){var M=l(u);return M<x[0]||M>x[1]};case"](":return function(u){var M=l(u);return M<=x[0]||M>x[1]};case")[":return function(u){var M=l(u);return M<x[0]||M>=x[1]};case"{}":return function(u){return x.indexOf(l(u))!==-1};case"}{":return function(u){return x.indexOf(l(u))===-1}}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(t,N,V){var y=t("../lib"),c=t("../plot_api/plot_schema"),A=t("../plots/plots"),T=t("./helpers").pointsAccessorFunction;V.moduleType="transform",V.name="groupby",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},V.supplyDefaults=function(a,i,n){var r,v={};function s(m,l){return y.coerce(a,v,V.attributes,m,l)}var o=s("enabled");if(!o)return v;s("groups"),s("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var b=a.styles,g=v.styles=[];if(b)for(r=0;r<b.length;r++){var d=g[r]={};y.coerce(b[r],g[r],V.attributes.styles,"target");var f=y.coerce(b[r],g[r],V.attributes.styles,"value");y.isPlainObject(f)?d.value=y.extendDeep({},f):f&&delete d.value}return v},V.transform=function(a,i){var n,r,v,s=[];for(r=0;r<a.length;r++)for(n=e(a[r],i),v=0;v<n.length;v++)s.push(n[v]);return s};function e(a,i){var n,r,v,s,o,b,g,d,f,m,l=i.transform,x=i.transformIndex,u=a.transforms[x].groups,M=T(a.transforms,l);if(!y.isArrayOrTypedArray(u)||u.length===0)return[a];var w=y.filterUnique(u),p=new Array(w.length),_=u.length,h=c.findArrayAttributes(a),L=l.styles||[],E={};for(n=0;n<L.length;n++)E[L[n].target]=L[n].value;l.styles&&(m=y.keyedContainer(l,"styles","target","value.name"));var S={},P={};for(n=0;n<w.length;n++){b=w[n],S[b]=n,P[b]=0,g=p[n]=y.extendDeepNoArrays({},a),g._group=b,g.transforms[x]._indexToPoints={};var F=null;for(m&&(F=m.get(b)),F||F===""?g.name=F:g.name=y.templateString(l.nameformat,{trace:a.name,group:b}),d=g.transforms,g.transforms=[],r=0;r<d.length;r++)g.transforms[r]=y.extendDeepNoArrays({},d[r]);for(r=0;r<h.length;r++)y.nestedProperty(g,h[r]).set([])}for(v=0;v<h.length;v++){for(s=h[v],r=0,f=[];r<w.length;r++)f[r]=y.nestedProperty(p[r],s).get();for(o=y.nestedProperty(a,s).get(),r=0;r<_;r++)f[S[u[r]]].push(o[r])}for(r=0;r<_;r++){g=p[S[u[r]]];var I=g.transforms[x]._indexToPoints;I[P[u[r]]]=M(r),P[u[r]]++}for(n=0;n<w.length;n++)b=w[n],g=p[n],A.clearExpandedTraceDefaultColors(g),g=y.extendDeepNoArrays(g,E[b]||{});return p}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(t,N,V){V.pointsAccessorFunction=function(y,c){for(var A,T,e=0;e<y.length&&(A=y[e],A!==c);e++)!A._indexToPoints||A.enabled===!1||(T=A._indexToPoints);var a=T?function(i){return T[i]}:function(i){return[i]};return a}},{}],1131:[function(t,N,V){var y=t("../lib"),c=t("../plots/cartesian/axes"),A=t("./helpers").pointsAccessorFunction,T=t("../constants/numerical").BADNUM;V.moduleType="transform",V.name="sort",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},V.supplyDefaults=function(i){var n={};function r(s,o){return y.coerce(i,n,V.attributes,s,o)}var v=r("enabled");return v&&(r("target"),r("order")),n},V.calcTransform=function(i,n,r){if(!!r.enabled){var v=y.getTargetArray(n,r);if(!!v){var s=r.target,o=v.length;n._length&&(o=Math.min(o,n._length));var b=n._arrayAttrs,g=c.getDataToCoordFunc(i,n,s,v),d=e(r,v,g,o),f=A(n.transforms,r),m={},l,x;for(l=0;l<b.length;l++){var u=y.nestedProperty(n,b[l]),M=u.get(),w=new Array(o);for(x=0;x<o;x++)w[x]=M[d[x]];u.set(w)}for(x=0;x<o;x++)m[x]=f(d[x]);r._indexToPoints=m,n._length=o}}};function e(i,n,r,v){var s=new Array(v),o=new Array(v),b;for(b=0;b<v;b++)s[b]={v:n[b],i:b};for(s.sort(a(i,r)),b=0;b<v;b++)o[b]=s[b].i;return o}function a(i,n){switch(i.order){case"ascending":return function(r,v){var s=n(r.v),o=n(v.v);return s===T?1:o===T?-1:s-o};case"descending":return function(r,v){var s=n(r.v),o=n(v.v);return s===T?1:o===T?-1:o-s}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(t,N,V){V.version="2.16.3"},{}],1133:[function(t,N,V){(function(y){(function(){(function(c){if(typeof V=="object"&&typeof N<"u")N.exports=c();else{var A;typeof window<"u"?A=window:typeof y<"u"?A=y:typeof self<"u"?A=self:A=this,A.stackgl=c()}})(function(){return function(){function c(A,T,e){function a(r,v){if(!T[r]){if(!A[r]){var s=typeof t=="function"&&t;if(!v&&s)return s(r,!0);if(i)return i(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var b=T[r]={exports:{}};A[r][0].call(b.exports,function(g){var d=A[r][1][g];return a(d||g)},b,b.exports,c,A,T,e)}return T[r].exports}for(var i=typeof t=="function"&&t,n=0;n<e.length;n++)a(e[n]);return a}return c}()({1:[function(c,A,T){T.byteLength=o,T.toByteArray=g,T.fromByteArray=m;for(var e=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,v=n.length;r<v;++r)e[r]=n[r],a[n.charCodeAt(r)]=r;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function s(l){var x=l.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=l.indexOf("=");u===-1&&(u=x);var M=u===x?0:4-u%4;return[u,M]}function o(l){var x=s(l),u=x[0],M=x[1];return(u+M)*3/4-M}function b(l,x,u){return(x+u)*3/4-u}function g(l){var x,u=s(l),M=u[0],w=u[1],p=new i(b(l,M,w)),_=0,h=w>0?M-4:M,L;for(L=0;L<h;L+=4)x=a[l.charCodeAt(L)]<<18|a[l.charCodeAt(L+1)]<<12|a[l.charCodeAt(L+2)]<<6|a[l.charCodeAt(L+3)],p[_++]=x>>16&255,p[_++]=x>>8&255,p[_++]=x&255;return w===2&&(x=a[l.charCodeAt(L)]<<2|a[l.charCodeAt(L+1)]>>4,p[_++]=x&255),w===1&&(x=a[l.charCodeAt(L)]<<10|a[l.charCodeAt(L+1)]<<4|a[l.charCodeAt(L+2)]>>2,p[_++]=x>>8&255,p[_++]=x&255),p}function d(l){return e[l>>18&63]+e[l>>12&63]+e[l>>6&63]+e[l&63]}function f(l,x,u){for(var M,w=[],p=x;p<u;p+=3)M=(l[p]<<16&16711680)+(l[p+1]<<8&65280)+(l[p+2]&255),w.push(d(M));return w.join("")}function m(l){for(var x,u=l.length,M=u%3,w=[],p=16383,_=0,h=u-M;_<h;_+=p)w.push(f(l,_,_+p>h?h:_+p));return M===1?(x=l[u-1],w.push(e[x>>2]+e[x<<4&63]+"==")):M===2&&(x=(l[u-2]<<8)+l[u-1],w.push(e[x>>10]+e[x>>4&63]+e[x<<2&63]+"=")),w.join("")}},{}],2:[function(c,A,T){},{}],3:[function(c,A,T){(function(e){(function(){var a=c("base64-js"),i=c("ieee754");T.Buffer=s,T.SlowBuffer=M,T.INSPECT_MAX_BYTES=50;var n=2147483647;T.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=r(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{var fe=new Uint8Array(1);return fe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},fe.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function v(fe){if(fe>n)throw new RangeError('The value "'+fe+'" is invalid for option "size"');var ye=new Uint8Array(fe);return ye.__proto__=s.prototype,ye}function s(fe,ye,xe){if(typeof fe=="number"){if(typeof ye=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(fe)}return o(fe,ye,xe)}typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function o(fe,ye,xe){if(typeof fe=="string")return f(fe,ye);if(ArrayBuffer.isView(fe))return m(fe);if(fe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe);if(le(fe,ArrayBuffer)||fe&&le(fe.buffer,ArrayBuffer))return l(fe,ye,xe);if(typeof fe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=fe.valueOf&&fe.valueOf();if(me!=null&&me!==fe)return s.from(me,ye,xe);var be=x(fe);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof fe[Symbol.toPrimitive]=="function")return s.from(fe[Symbol.toPrimitive]("string"),ye,xe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe)}s.from=function(fe,ye,xe){return o(fe,ye,xe)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function b(fe){if(typeof fe!="number")throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function g(fe,ye,xe){return b(fe),fe<=0?v(fe):ye!==void 0?typeof xe=="string"?v(fe).fill(ye,xe):v(fe).fill(ye):v(fe)}s.alloc=function(fe,ye,xe){return g(fe,ye,xe)};function d(fe){return b(fe),v(fe<0?0:u(fe)|0)}s.allocUnsafe=function(fe){return d(fe)},s.allocUnsafeSlow=function(fe){return d(fe)};function f(fe,ye){if((typeof ye!="string"||ye==="")&&(ye="utf8"),!s.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);var xe=w(fe,ye)|0,me=v(xe),be=me.write(fe,ye);return be!==xe&&(me=me.slice(0,be)),me}function m(fe){for(var ye=fe.length<0?0:u(fe.length)|0,xe=v(ye),me=0;me<ye;me+=1)xe[me]=fe[me]&255;return xe}function l(fe,ye,xe){if(ye<0||fe.byteLength<ye)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<ye+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var me;return ye===void 0&&xe===void 0?me=new Uint8Array(fe):xe===void 0?me=new Uint8Array(fe,ye):me=new Uint8Array(fe,ye,xe),me.__proto__=s.prototype,me}function x(fe){if(s.isBuffer(fe)){var ye=u(fe.length)|0,xe=v(ye);return xe.length===0||fe.copy(xe,0,0,ye),xe}if(fe.length!==void 0)return typeof fe.length!="number"||_e(fe.length)?v(0):m(fe);if(fe.type==="Buffer"&&Array.isArray(fe.data))return m(fe.data)}function u(fe){if(fe>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return fe|0}function M(fe){return+fe!=fe&&(fe=0),s.alloc(+fe)}s.isBuffer=function(ye){return ye!=null&&ye._isBuffer===!0&&ye!==s.prototype},s.compare=function(ye,xe){if(le(ye,Uint8Array)&&(ye=s.from(ye,ye.offset,ye.byteLength)),le(xe,Uint8Array)&&(xe=s.from(xe,xe.offset,xe.byteLength)),!s.isBuffer(ye)||!s.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ye===xe)return 0;for(var me=ye.length,be=xe.length,ke=0,De=Math.min(me,be);ke<De;++ke)if(ye[ke]!==xe[ke]){me=ye[ke],be=xe[ke];break}return me<be?-1:be<me?1:0},s.isEncoding=function(ye){switch(String(ye).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(ye,xe){if(!Array.isArray(ye))throw new TypeError('"list" argument must be an Array of Buffers');if(ye.length===0)return s.alloc(0);var me;if(xe===void 0)for(xe=0,me=0;me<ye.length;++me)xe+=ye[me].length;var be=s.allocUnsafe(xe),ke=0;for(me=0;me<ye.length;++me){var De=ye[me];if(le(De,Uint8Array)&&(De=s.from(De)),!s.isBuffer(De))throw new TypeError('"list" argument must be an Array of Buffers');De.copy(be,ke),ke+=De.length}return be};function w(fe,ye){if(s.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||le(fe,ArrayBuffer))return fe.byteLength;if(typeof fe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof fe);var xe=fe.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&xe===0)return 0;for(var be=!1;;)switch(ye){case"ascii":case"latin1":case"binary":return xe;case"utf8":case"utf-8":return Z(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe*2;case"hex":return xe>>>1;case"base64":return oe(fe).length;default:if(be)return me?-1:Z(fe).length;ye=(""+ye).toLowerCase(),be=!0}}s.byteLength=w;function p(fe,ye,xe){var me=!1;if((ye===void 0||ye<0)&&(ye=0),ye>this.length||((xe===void 0||xe>this.length)&&(xe=this.length),xe<=0)||(xe>>>=0,ye>>>=0,xe<=ye))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return j(this,ye,xe);case"utf8":case"utf-8":return O(this,ye,xe);case"ascii":return Y(this,ye,xe);case"latin1":case"binary":return ee(this,ye,xe);case"base64":return R(this,ye,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,ye,xe);default:if(me)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),me=!0}}s.prototype._isBuffer=!0;function _(fe,ye,xe){var me=fe[ye];fe[ye]=fe[xe],fe[xe]=me}s.prototype.swap16=function(){var ye=this.length;if(ye%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<ye;xe+=2)_(this,xe,xe+1);return this},s.prototype.swap32=function(){var ye=this.length;if(ye%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<ye;xe+=4)_(this,xe,xe+3),_(this,xe+1,xe+2);return this},s.prototype.swap64=function(){var ye=this.length;if(ye%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<ye;xe+=8)_(this,xe,xe+7),_(this,xe+1,xe+6),_(this,xe+2,xe+5),_(this,xe+3,xe+4);return this},s.prototype.toString=function(){var ye=this.length;return ye===0?"":arguments.length===0?O(this,0,ye):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(ye){if(!s.isBuffer(ye))throw new TypeError("Argument must be a Buffer");return this===ye?!0:s.compare(this,ye)===0},s.prototype.inspect=function(){var ye="",xe=T.INSPECT_MAX_BYTES;return ye=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(ye+=" ... "),"<Buffer "+ye+">"},s.prototype.compare=function(ye,xe,me,be,ke){if(le(ye,Uint8Array)&&(ye=s.from(ye,ye.offset,ye.byteLength)),!s.isBuffer(ye))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ye);if(xe===void 0&&(xe=0),me===void 0&&(me=ye?ye.length:0),be===void 0&&(be=0),ke===void 0&&(ke=this.length),xe<0||me>ye.length||be<0||ke>this.length)throw new RangeError("out of range index");if(be>=ke&&xe>=me)return 0;if(be>=ke)return-1;if(xe>=me)return 1;if(xe>>>=0,me>>>=0,be>>>=0,ke>>>=0,this===ye)return 0;for(var De=ke-be,He=me-xe,Ae=Math.min(De,He),Le=this.slice(be,ke),Ze=ye.slice(xe,me),We=0;We<Ae;++We)if(Le[We]!==Ze[We]){De=Le[We],He=Ze[We];break}return De<He?-1:He<De?1:0};function h(fe,ye,xe,me,be){if(fe.length===0)return-1;if(typeof xe=="string"?(me=xe,xe=0):xe>2147483647?xe=2147483647:xe<-2147483648&&(xe=-2147483648),xe=+xe,_e(xe)&&(xe=be?0:fe.length-1),xe<0&&(xe=fe.length+xe),xe>=fe.length){if(be)return-1;xe=fe.length-1}else if(xe<0)if(be)xe=0;else return-1;if(typeof ye=="string"&&(ye=s.from(ye,me)),s.isBuffer(ye))return ye.length===0?-1:L(fe,ye,xe,me,be);if(typeof ye=="number")return ye=ye&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(fe,ye,xe):Uint8Array.prototype.lastIndexOf.call(fe,ye,xe):L(fe,[ye],xe,me,be);throw new TypeError("val must be string, number or Buffer")}function L(fe,ye,xe,me,be){var ke=1,De=fe.length,He=ye.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(fe.length<2||ye.length<2)return-1;ke=2,De/=2,He/=2,xe/=2}function Ae(Ie,Ve){return ke===1?Ie[Ve]:Ie.readUInt16BE(Ve*ke)}var Le;if(be){var Ze=-1;for(Le=xe;Le<De;Le++)if(Ae(fe,Le)===Ae(ye,Ze===-1?0:Le-Ze)){if(Ze===-1&&(Ze=Le),Le-Ze+1===He)return Ze*ke}else Ze!==-1&&(Le-=Le-Ze),Ze=-1}else for(xe+He>De&&(xe=De-He),Le=xe;Le>=0;Le--){for(var We=!0,ze=0;ze<He;ze++)if(Ae(fe,Le+ze)!==Ae(ye,ze)){We=!1;break}if(We)return Le}return-1}s.prototype.includes=function(ye,xe,me){return this.indexOf(ye,xe,me)!==-1},s.prototype.indexOf=function(ye,xe,me){return h(this,ye,xe,me,!0)},s.prototype.lastIndexOf=function(ye,xe,me){return h(this,ye,xe,me,!1)};function E(fe,ye,xe,me){xe=Number(xe)||0;var be=fe.length-xe;me?(me=Number(me),me>be&&(me=be)):me=be;var ke=ye.length;me>ke/2&&(me=ke/2);for(var De=0;De<me;++De){var He=parseInt(ye.substr(De*2,2),16);if(_e(He))return De;fe[xe+De]=He}return De}function S(fe,ye,xe,me){return ne(Z(ye,fe.length-xe),fe,xe,me)}function P(fe,ye,xe,me){return ne(Q(ye),fe,xe,me)}function F(fe,ye,xe,me){return P(fe,ye,xe,me)}function I(fe,ye,xe,me){return ne(oe(ye),fe,xe,me)}function D(fe,ye,xe,me){return ne(ie(ye,fe.length-xe),fe,xe,me)}s.prototype.write=function(ye,xe,me,be){if(xe===void 0)be="utf8",me=this.length,xe=0;else if(me===void 0&&typeof xe=="string")be=xe,me=this.length,xe=0;else if(isFinite(xe))xe=xe>>>0,isFinite(me)?(me=me>>>0,be===void 0&&(be="utf8")):(be=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ke=this.length-xe;if((me===void 0||me>ke)&&(me=ke),ye.length>0&&(me<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var De=!1;;)switch(be){case"hex":return E(this,ye,xe,me);case"utf8":case"utf-8":return S(this,ye,xe,me);case"ascii":return P(this,ye,xe,me);case"latin1":case"binary":return F(this,ye,xe,me);case"base64":return I(this,ye,xe,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,ye,xe,me);default:if(De)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),De=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(fe,ye,xe){return ye===0&&xe===fe.length?a.fromByteArray(fe):a.fromByteArray(fe.slice(ye,xe))}function O(fe,ye,xe){xe=Math.min(fe.length,xe);for(var me=[],be=ye;be<xe;){var ke=fe[be],De=null,He=ke>239?4:ke>223?3:ke>191?2:1;if(be+He<=xe){var Ae,Le,Ze,We;switch(He){case 1:ke<128&&(De=ke);break;case 2:Ae=fe[be+1],(Ae&192)===128&&(We=(ke&31)<<6|Ae&63,We>127&&(De=We));break;case 3:Ae=fe[be+1],Le=fe[be+2],(Ae&192)===128&&(Le&192)===128&&(We=(ke&15)<<12|(Ae&63)<<6|Le&63,We>2047&&(We<55296||We>57343)&&(De=We));break;case 4:Ae=fe[be+1],Le=fe[be+2],Ze=fe[be+3],(Ae&192)===128&&(Le&192)===128&&(Ze&192)===128&&(We=(ke&15)<<18|(Ae&63)<<12|(Le&63)<<6|Ze&63,We>65535&&We<1114112&&(De=We))}}De===null?(De=65533,He=1):De>65535&&(De-=65536,me.push(De>>>10&1023|55296),De=56320|De&1023),me.push(De),be+=He}return G(me)}var z=4096;function G(fe){var ye=fe.length;if(ye<=z)return String.fromCharCode.apply(String,fe);for(var xe="",me=0;me<ye;)xe+=String.fromCharCode.apply(String,fe.slice(me,me+=z));return xe}function Y(fe,ye,xe){var me="";xe=Math.min(fe.length,xe);for(var be=ye;be<xe;++be)me+=String.fromCharCode(fe[be]&127);return me}function ee(fe,ye,xe){var me="";xe=Math.min(fe.length,xe);for(var be=ye;be<xe;++be)me+=String.fromCharCode(fe[be]);return me}function j(fe,ye,xe){var me=fe.length;(!ye||ye<0)&&(ye=0),(!xe||xe<0||xe>me)&&(xe=me);for(var be="",ke=ye;ke<xe;++ke)be+=re(fe[ke]);return be}function X(fe,ye,xe){for(var me=fe.slice(ye,xe),be="",ke=0;ke<me.length;ke+=2)be+=String.fromCharCode(me[ke]+me[ke+1]*256);return be}s.prototype.slice=function(ye,xe){var me=this.length;ye=~~ye,xe=xe===void 0?me:~~xe,ye<0?(ye+=me,ye<0&&(ye=0)):ye>me&&(ye=me),xe<0?(xe+=me,xe<0&&(xe=0)):xe>me&&(xe=me),xe<ye&&(xe=ye);var be=this.subarray(ye,xe);return be.__proto__=s.prototype,be};function ae(fe,ye,xe){if(fe%1!==0||fe<0)throw new RangeError("offset is not uint");if(fe+ye>xe)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(ye,xe,me){ye=ye>>>0,xe=xe>>>0,me||ae(ye,xe,this.length);for(var be=this[ye],ke=1,De=0;++De<xe&&(ke*=256);)be+=this[ye+De]*ke;return be},s.prototype.readUIntBE=function(ye,xe,me){ye=ye>>>0,xe=xe>>>0,me||ae(ye,xe,this.length);for(var be=this[ye+--xe],ke=1;xe>0&&(ke*=256);)be+=this[ye+--xe]*ke;return be},s.prototype.readUInt8=function(ye,xe){return ye=ye>>>0,xe||ae(ye,1,this.length),this[ye]},s.prototype.readUInt16LE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,2,this.length),this[ye]|this[ye+1]<<8},s.prototype.readUInt16BE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,2,this.length),this[ye]<<8|this[ye+1]},s.prototype.readUInt32LE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,4,this.length),(this[ye]|this[ye+1]<<8|this[ye+2]<<16)+this[ye+3]*16777216},s.prototype.readUInt32BE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,4,this.length),this[ye]*16777216+(this[ye+1]<<16|this[ye+2]<<8|this[ye+3])},s.prototype.readIntLE=function(ye,xe,me){ye=ye>>>0,xe=xe>>>0,me||ae(ye,xe,this.length);for(var be=this[ye],ke=1,De=0;++De<xe&&(ke*=256);)be+=this[ye+De]*ke;return ke*=128,be>=ke&&(be-=Math.pow(2,8*xe)),be},s.prototype.readIntBE=function(ye,xe,me){ye=ye>>>0,xe=xe>>>0,me||ae(ye,xe,this.length);for(var be=xe,ke=1,De=this[ye+--be];be>0&&(ke*=256);)De+=this[ye+--be]*ke;return ke*=128,De>=ke&&(De-=Math.pow(2,8*xe)),De},s.prototype.readInt8=function(ye,xe){return ye=ye>>>0,xe||ae(ye,1,this.length),this[ye]&128?(255-this[ye]+1)*-1:this[ye]},s.prototype.readInt16LE=function(ye,xe){ye=ye>>>0,xe||ae(ye,2,this.length);var me=this[ye]|this[ye+1]<<8;return me&32768?me|4294901760:me},s.prototype.readInt16BE=function(ye,xe){ye=ye>>>0,xe||ae(ye,2,this.length);var me=this[ye+1]|this[ye]<<8;return me&32768?me|4294901760:me},s.prototype.readInt32LE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,4,this.length),this[ye]|this[ye+1]<<8|this[ye+2]<<16|this[ye+3]<<24},s.prototype.readInt32BE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,4,this.length),this[ye]<<24|this[ye+1]<<16|this[ye+2]<<8|this[ye+3]},s.prototype.readFloatLE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,4,this.length),i.read(this,ye,!0,23,4)},s.prototype.readFloatBE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,4,this.length),i.read(this,ye,!1,23,4)},s.prototype.readDoubleLE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,8,this.length),i.read(this,ye,!0,52,8)},s.prototype.readDoubleBE=function(ye,xe){return ye=ye>>>0,xe||ae(ye,8,this.length),i.read(this,ye,!1,52,8)};function he(fe,ye,xe,me,be,ke){if(!s.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ye>be||ye<ke)throw new RangeError('"value" argument is out of bounds');if(xe+me>fe.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(ye,xe,me,be){if(ye=+ye,xe=xe>>>0,me=me>>>0,!be){var ke=Math.pow(2,8*me)-1;he(this,ye,xe,me,ke,0)}var De=1,He=0;for(this[xe]=ye&255;++He<me&&(De*=256);)this[xe+He]=ye/De&255;return xe+me},s.prototype.writeUIntBE=function(ye,xe,me,be){if(ye=+ye,xe=xe>>>0,me=me>>>0,!be){var ke=Math.pow(2,8*me)-1;he(this,ye,xe,me,ke,0)}var De=me-1,He=1;for(this[xe+De]=ye&255;--De>=0&&(He*=256);)this[xe+De]=ye/He&255;return xe+me},s.prototype.writeUInt8=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,1,255,0),this[xe]=ye&255,xe+1},s.prototype.writeUInt16LE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,2,65535,0),this[xe]=ye&255,this[xe+1]=ye>>>8,xe+2},s.prototype.writeUInt16BE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,2,65535,0),this[xe]=ye>>>8,this[xe+1]=ye&255,xe+2},s.prototype.writeUInt32LE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,4,4294967295,0),this[xe+3]=ye>>>24,this[xe+2]=ye>>>16,this[xe+1]=ye>>>8,this[xe]=ye&255,xe+4},s.prototype.writeUInt32BE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,4,4294967295,0),this[xe]=ye>>>24,this[xe+1]=ye>>>16,this[xe+2]=ye>>>8,this[xe+3]=ye&255,xe+4},s.prototype.writeIntLE=function(ye,xe,me,be){if(ye=+ye,xe=xe>>>0,!be){var ke=Math.pow(2,8*me-1);he(this,ye,xe,me,ke-1,-ke)}var De=0,He=1,Ae=0;for(this[xe]=ye&255;++De<me&&(He*=256);)ye<0&&Ae===0&&this[xe+De-1]!==0&&(Ae=1),this[xe+De]=(ye/He>>0)-Ae&255;return xe+me},s.prototype.writeIntBE=function(ye,xe,me,be){if(ye=+ye,xe=xe>>>0,!be){var ke=Math.pow(2,8*me-1);he(this,ye,xe,me,ke-1,-ke)}var De=me-1,He=1,Ae=0;for(this[xe+De]=ye&255;--De>=0&&(He*=256);)ye<0&&Ae===0&&this[xe+De+1]!==0&&(Ae=1),this[xe+De]=(ye/He>>0)-Ae&255;return xe+me},s.prototype.writeInt8=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,1,127,-128),ye<0&&(ye=255+ye+1),this[xe]=ye&255,xe+1},s.prototype.writeInt16LE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,2,32767,-32768),this[xe]=ye&255,this[xe+1]=ye>>>8,xe+2},s.prototype.writeInt16BE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,2,32767,-32768),this[xe]=ye>>>8,this[xe+1]=ye&255,xe+2},s.prototype.writeInt32LE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,4,2147483647,-2147483648),this[xe]=ye&255,this[xe+1]=ye>>>8,this[xe+2]=ye>>>16,this[xe+3]=ye>>>24,xe+4},s.prototype.writeInt32BE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||he(this,ye,xe,4,2147483647,-2147483648),ye<0&&(ye=4294967295+ye+1),this[xe]=ye>>>24,this[xe+1]=ye>>>16,this[xe+2]=ye>>>8,this[xe+3]=ye&255,xe+4};function K(fe,ye,xe,me,be,ke){if(xe+me>fe.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("Index out of range")}function J(fe,ye,xe,me,be){return ye=+ye,xe=xe>>>0,be||K(fe,ye,xe,4),i.write(fe,ye,xe,me,23,4),xe+4}s.prototype.writeFloatLE=function(ye,xe,me){return J(this,ye,xe,!0,me)},s.prototype.writeFloatBE=function(ye,xe,me){return J(this,ye,xe,!1,me)};function U(fe,ye,xe,me,be){return ye=+ye,xe=xe>>>0,be||K(fe,ye,xe,8),i.write(fe,ye,xe,me,52,8),xe+8}s.prototype.writeDoubleLE=function(ye,xe,me){return U(this,ye,xe,!0,me)},s.prototype.writeDoubleBE=function(ye,xe,me){return U(this,ye,xe,!1,me)},s.prototype.copy=function(ye,xe,me,be){if(!s.isBuffer(ye))throw new TypeError("argument should be a Buffer");if(me||(me=0),!be&&be!==0&&(be=this.length),xe>=ye.length&&(xe=ye.length),xe||(xe=0),be>0&&be<me&&(be=me),be===me||ye.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),ye.length-xe<be-me&&(be=ye.length-xe+me);var ke=be-me;if(this===ye&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(xe,me,be);else if(this===ye&&me<xe&&xe<be)for(var De=ke-1;De>=0;--De)ye[De+xe]=this[De+me];else Uint8Array.prototype.set.call(ye,this.subarray(me,be),xe);return ke},s.prototype.fill=function(ye,xe,me,be){if(typeof ye=="string"){if(typeof xe=="string"?(be=xe,xe=0,me=this.length):typeof me=="string"&&(be=me,me=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!s.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(ye.length===1){var ke=ye.charCodeAt(0);(be==="utf8"&&ke<128||be==="latin1")&&(ye=ke)}}else typeof ye=="number"&&(ye=ye&255);if(xe<0||this.length<xe||this.length<me)throw new RangeError("Out of range index");if(me<=xe)return this;xe=xe>>>0,me=me===void 0?this.length:me>>>0,ye||(ye=0);var De;if(typeof ye=="number")for(De=xe;De<me;++De)this[De]=ye;else{var He=s.isBuffer(ye)?ye:s.from(ye,be),Ae=He.length;if(Ae===0)throw new TypeError('The value "'+ye+'" is invalid for argument "value"');for(De=0;De<me-xe;++De)this[De+xe]=He[De%Ae]}return this};var H=/[^+/0-9A-Za-z-_]/g;function q(fe){if(fe=fe.split("=")[0],fe=fe.trim().replace(H,""),fe.length<2)return"";for(;fe.length%4!==0;)fe=fe+"=";return fe}function re(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function Z(fe,ye){ye=ye||1/0;for(var xe,me=fe.length,be=null,ke=[],De=0;De<me;++De){if(xe=fe.charCodeAt(De),xe>55295&&xe<57344){if(!be){if(xe>56319){(ye-=3)>-1&&ke.push(239,191,189);continue}else if(De+1===me){(ye-=3)>-1&&ke.push(239,191,189);continue}be=xe;continue}if(xe<56320){(ye-=3)>-1&&ke.push(239,191,189),be=xe;continue}xe=(be-55296<<10|xe-56320)+65536}else be&&(ye-=3)>-1&&ke.push(239,191,189);if(be=null,xe<128){if((ye-=1)<0)break;ke.push(xe)}else if(xe<2048){if((ye-=2)<0)break;ke.push(xe>>6|192,xe&63|128)}else if(xe<65536){if((ye-=3)<0)break;ke.push(xe>>12|224,xe>>6&63|128,xe&63|128)}else if(xe<1114112){if((ye-=4)<0)break;ke.push(xe>>18|240,xe>>12&63|128,xe>>6&63|128,xe&63|128)}else throw new Error("Invalid code point")}return ke}function Q(fe){for(var ye=[],xe=0;xe<fe.length;++xe)ye.push(fe.charCodeAt(xe)&255);return ye}function ie(fe,ye){for(var xe,me,be,ke=[],De=0;De<fe.length&&!((ye-=2)<0);++De)xe=fe.charCodeAt(De),me=xe>>8,be=xe%256,ke.push(be),ke.push(me);return ke}function oe(fe){return a.toByteArray(q(fe))}function ne(fe,ye,xe,me){for(var be=0;be<me&&!(be+xe>=ye.length||be>=fe.length);++be)ye[be+xe]=fe[be];return be}function le(fe,ye){return fe instanceof ye||fe!=null&&fe.constructor!=null&&fe.constructor.name!=null&&fe.constructor.name===ye.name}function _e(fe){return fe!==fe}}).call(this)}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(c,A,T){T.read=function(e,a,i,n,r){var v,s,o=r*8-n-1,b=(1<<o)-1,g=b>>1,d=-7,f=i?r-1:0,m=i?-1:1,l=e[a+f];for(f+=m,v=l&(1<<-d)-1,l>>=-d,d+=o;d>0;v=v*256+e[a+f],f+=m,d-=8);for(s=v&(1<<-d)-1,v>>=-d,d+=n;d>0;s=s*256+e[a+f],f+=m,d-=8);if(v===0)v=1-g;else{if(v===b)return s?NaN:(l?-1:1)*(1/0);s=s+Math.pow(2,n),v=v-g}return(l?-1:1)*s*Math.pow(2,v-n)},T.write=function(e,a,i,n,r,v){var s,o,b,g=v*8-r-1,d=(1<<g)-1,f=d>>1,m=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:v-1,x=n?1:-1,u=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,s=d):(s=Math.floor(Math.log(a)/Math.LN2),a*(b=Math.pow(2,-s))<1&&(s--,b*=2),s+f>=1?a+=m/b:a+=m*Math.pow(2,1-f),a*b>=2&&(s++,b/=2),s+f>=d?(o=0,s=d):s+f>=1?(o=(a*b-1)*Math.pow(2,r),s=s+f):(o=a*Math.pow(2,f-1)*Math.pow(2,r),s=0));r>=8;e[i+l]=o&255,l+=x,o/=256,r-=8);for(s=s<<r|o,g+=r;g>0;e[i+l]=s&255,l+=x,s/=256,g-=8);e[i+l-x]|=u*128}},{}],5:[function(c,A,T){var e=A.exports={},a,i;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=n}catch{a=n}try{typeof clearTimeout=="function"?i=clearTimeout:i=r}catch{i=r}})();function v(u){if(a===setTimeout)return setTimeout(u,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(u,0);try{return a(u,0)}catch{try{return a.call(null,u,0)}catch{return a.call(this,u,0)}}}function s(u){if(i===clearTimeout)return clearTimeout(u);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(u);try{return i(u)}catch{try{return i.call(null,u)}catch{return i.call(this,u)}}}var o=[],b=!1,g,d=-1;function f(){!b||!g||(b=!1,g.length?o=g.concat(o):d=-1,o.length&&m())}function m(){if(!b){var u=v(f);b=!0;for(var M=o.length;M;){for(g=o,o=[];++d<M;)g&&g[d].run();d=-1,M=o.length}g=null,b=!1,s(u)}}e.nextTick=function(u){var M=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)M[w-1]=arguments[w];o.push(new l(u,M)),o.length===1&&!b&&v(m)};function l(u,M){this.fun=u,this.array=M}l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function x(){}e.on=x,e.addListener=x,e.once=x,e.off=x,e.removeListener=x,e.removeAllListeners=x,e.emit=x,e.prependListener=x,e.prependOnceListener=x,e.listeners=function(u){return[]},e.binding=function(u){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(u){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(c,A,T){A.exports={alpha_shape:c("alpha-shape"),convex_hull:c("convex-hull"),delaunay_triangulate:c("delaunay-triangulate"),gl_cone3d:c("gl-cone3d"),gl_error3d:c("gl-error3d"),gl_heatmap2d:c("gl-heatmap2d"),gl_line3d:c("gl-line3d"),gl_mesh3d:c("gl-mesh3d"),gl_plot2d:c("gl-plot2d"),gl_plot3d:c("gl-plot3d"),gl_pointcloud2d:c("gl-pointcloud2d"),gl_scatter3d:c("gl-scatter3d"),gl_select_box:c("gl-select-box"),gl_spikes2d:c("gl-spikes2d"),gl_streamtube3d:c("gl-streamtube3d"),gl_surface3d:c("gl-surface3d"),ndarray:c("ndarray"),ndarray_linear_interpolate:c("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(c,A,T){A.exports=v;var e=c("turntable-camera-controller"),a=c("orbit-camera-controller"),i=c("matrix-camera-controller");function n(s,o){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(b){return s[b]}),this._mode=o,this._active=s[o],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=n.prototype;r.flush=function(s){for(var o=this._controllerList,b=0;b<o.length;++b)o[b].flush(s)},r.idle=function(s){for(var o=this._controllerList,b=0;b<o.length;++b)o[b].idle(s)},r.lookAt=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].lookAt(s,o,b,g)},r.rotate=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].rotate(s,o,b,g)},r.pan=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].pan(s,o,b,g)},r.translate=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].translate(s,o,b,g)},r.setMatrix=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setMatrix(s,o)},r.setDistanceLimits=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setDistanceLimits(s,o)},r.setDistance=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setDistance(s,o)},r.recalcMatrix=function(s){this._active.recalcMatrix(s)},r.getDistance=function(s){return this._active.getDistance(s)},r.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},r.lastT=function(){return this._active.lastT()},r.setMode=function(s){if(s!==this._mode){var o=this._controllerNames.indexOf(s);if(!(o<0)){var b=this._active,g=this._controllerList[o],d=Math.max(b.lastT(),g.lastT());b.recalcMatrix(d),g.setMatrix(d,b.computedMatrix),this._active=g,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode};function v(s){s=s||{};var o=s.eye||[0,0,1],b=s.center||[0,0,0],g=s.up||[0,1,0],d=s.distanceLimits||[0,1/0],f=s.mode||"turntable",m=e(),l=a(),x=i();return m.setDistanceLimits(d[0],d[1]),m.lookAt(0,o,b,g),l.setDistanceLimits(d[0],d[1]),l.lookAt(0,o,b,g),x.setDistanceLimits(d[0],d[1]),x.lookAt(0,o,b,g),new n({turntable:m,orbit:l,matrix:x},f)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(c,A,T){var e=typeof WeakMap>"u"?c("weak-map"):WeakMap,a=c("gl-buffer"),i=c("gl-vao"),n=new e;function r(v){var s=n.get(v),o=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!o||!v.isBuffer(o)){var b=a(v,new Float32Array([-1,-1,-1,4,4,-1]));s=i(v,[{buffer:b,type:v.FLOAT,size:2}]),s._triangleBuffer=b,n.set(v,s)}s.bind(),v.drawArrays(v.TRIANGLES,0,3),s.unbind()}A.exports=r},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(c,A,T){var e=c("pad-left");A.exports=a;function a(i,n,r){n=typeof n=="number"?n:1,r=r||": ";var v=i.split(/\r?\n/),s=String(v.length+n-1).length;return v.map(function(o,b){var g=b+n,d=String(g).length,f=e(g,s-d);return f+r+o}).join(`
`)}},{"pad-left":264}],10:[function(c,A,T){A.exports=i;var e=c("robust-orientation");function a(n,r){for(var v=new Array(r+1),s=0;s<n.length;++s)v[s]=n[s];for(var s=0;s<=n.length;++s){for(var o=n.length;o<=r;++o){for(var b=new Array(r),g=0;g<r;++g)b[g]=Math.pow(o+1-s,g);v[o]=b}var d=e.apply(void 0,v);if(d)return!0}return!1}function i(n){var r=n.length;if(r===0)return[];if(r===1)return[0];for(var v=n[0].length,s=[n[0]],o=[0],b=1;b<r;++b){if(s.push(n[b]),!a(s,v)){s.pop();continue}if(o.push(b),o.length===v+1)return o}return o}},{"robust-orientation":284}],11:[function(c,A,T){A.exports=i;var e=c("delaunay-triangulate"),a=c("circumradius");function i(n,r){return e(r).filter(function(v){for(var s=new Array(v.length),o=0;o<v.length;++o)s[o]=r[v[o]];return a(s)*n<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(c,A,T){A.exports=i;var e=c("alpha-complex"),a=c("simplicial-complex-boundary");function i(n,r){return a(e(n,r))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(c,A,T){A.exports=function(a){return atob(a)}},{}],14:[function(c,A,T){A.exports=i;var e=c("robust-linear-solve");function a(n){for(var r=0,v=0;v<n.length;++v)r+=n[v];return r}function i(n,r){for(var v=r.length,s=new Array(v+1),o=0;o<v;++o){for(var b=new Array(v+1),g=0;g<=v;++g)b[g]=n[g][o];s[o]=b}s[v]=new Array(v+1);for(var o=0;o<=v;++o)s[v][o]=1;for(var d=new Array(v+1),o=0;o<v;++o)d[o]=r[o];d[v]=1;var f=e(s,d),m=a(f[v+1]);m===0&&(m=1);for(var l=new Array(v+1),o=0;o<=v;++o)l[o]=a(f[o])/m;return l}},{"robust-linear-solve":283}],15:[function(c,A,T){var e=c("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]).add(n[0].mul(i[1])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],16:[function(c,A,T){A.exports=e;function e(a,i){return a[0].mul(i[1]).cmp(i[0].mul(a[1]))}},{}],17:[function(c,A,T){var e=c("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]),i[1].mul(n[0]))}},{"./lib/rationalize":25}],18:[function(c,A,T){var e=c("./is-rat"),a=c("./lib/is-bn"),i=c("./lib/num-to-bn"),n=c("./lib/str-to-bn"),r=c("./lib/rationalize"),v=c("./div");A.exports=s;function s(o,b){if(e(o))return b?v(o,s(b)):[o[0].clone(),o[1].clone()];var g=0,d,f;if(a(o))d=o.clone();else if(typeof o=="string")d=n(o);else{if(o===0)return[i(0),i(1)];if(o===Math.floor(o))d=i(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),g-=256;d=i(o)}}if(e(b))d.mul(b[1]),f=b[0].clone();else if(a(b))f=b.clone();else if(typeof b=="string")f=n(b);else if(!b)f=i(1);else if(b===Math.floor(b))f=i(b);else{for(;b!==Math.floor(b);)b=b*Math.pow(2,256),g+=256;f=i(b)}return g>0?d=d.ushln(g):g<0&&(f=f.ushln(-g)),r(d,f)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(c,A,T){var e=c("./lib/is-bn");A.exports=a;function a(i){return Array.isArray(i)&&i.length===2&&e(i[0])&&e(i[1])}},{"./lib/is-bn":23}],20:[function(c,A,T){var e=c("bn.js");A.exports=a;function a(i){return i.cmp(new e(0))}},{"bn.js":33}],21:[function(c,A,T){var e=c("./bn-sign");A.exports=a;function a(i){var n=i.length,r=i.words,v=0;if(n===1)v=r[0];else if(n===2)v=r[0]+r[1]*67108864;else for(var s=0;s<n;s++){var o=r[s];v+=o*Math.pow(67108864,s)}return e(i)*v}},{"./bn-sign":20}],22:[function(c,A,T){var e=c("double-bits"),a=c("bit-twiddle").countTrailingZeros;A.exports=i;function i(n){var r=a(e.lo(n));if(r<32)return r;var v=a(e.hi(n));return v>20?52:v+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(c,A,T){c("bn.js"),A.exports=e;function e(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(c,A,T){var e=c("bn.js"),a=c("double-bits");A.exports=i;function i(n){var r=a.exponent(n);return r<52?new e(n):new e(n*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(c,A,T){var e=c("./num-to-bn"),a=c("./bn-sign");A.exports=i;function i(n,r){var v=a(n),s=a(r);if(v===0)return[e(0),e(1)];if(s===0)return[e(0),e(0)];s<0&&(n=n.neg(),r=r.neg());var o=n.gcd(r);return o.cmpn(1)?[n.div(o),r.div(o)]:[n,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(c,A,T){var e=c("bn.js");A.exports=a;function a(i){return new e(i)}},{"bn.js":33}],27:[function(c,A,T){var e=c("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[0]),i[1].mul(n[1]))}},{"./lib/rationalize":25}],28:[function(c,A,T){var e=c("./lib/bn-sign");A.exports=a;function a(i){return e(i[0])*e(i[1])}},{"./lib/bn-sign":20}],29:[function(c,A,T){var e=c("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]).sub(i[1].mul(n[0])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],30:[function(c,A,T){var e=c("./lib/bn-to-num"),a=c("./lib/ctz");A.exports=i;function i(n){var r=n[0],v=n[1];if(r.cmpn(0)===0)return 0;var s=r.abs().divmod(v.abs()),o=s.div,b=e(o),g=s.mod,d=r.negative!==v.negative?-1:1;if(g.cmpn(0)===0)return d*b;if(b){var f=a(b)+4,m=e(g.ushln(f).divRound(v));return d*(b+m*Math.pow(2,-f))}else{var l=v.bitLength()-g.bitLength()+53,m=e(g.ushln(l).divRound(v));return l<1023?d*m*Math.pow(2,-l):(m*=Math.pow(2,-1023),d*m*Math.pow(2,1023-l))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(c,A,T){function e(s,o,b,g,d){for(var f=d+1;g<=d;){var m=g+d>>>1,l=s[m],x=b!==void 0?b(l,o):l-o;x>=0?(f=m,d=m-1):g=m+1}return f}function a(s,o,b,g,d){for(var f=d+1;g<=d;){var m=g+d>>>1,l=s[m],x=b!==void 0?b(l,o):l-o;x>0?(f=m,d=m-1):g=m+1}return f}function i(s,o,b,g,d){for(var f=g-1;g<=d;){var m=g+d>>>1,l=s[m],x=b!==void 0?b(l,o):l-o;x<0?(f=m,g=m+1):d=m-1}return f}function n(s,o,b,g,d){for(var f=g-1;g<=d;){var m=g+d>>>1,l=s[m],x=b!==void 0?b(l,o):l-o;x<=0?(f=m,g=m+1):d=m-1}return f}function r(s,o,b,g,d){for(;g<=d;){var f=g+d>>>1,m=s[f],l=b!==void 0?b(m,o):m-o;if(l===0)return f;l<=0?g=f+1:d=f-1}return-1}function v(s,o,b,g,d,f){return typeof b=="function"?f(s,o,b,g===void 0?0:g|0,d===void 0?s.length-1:d|0):f(s,o,void 0,b===void 0?0:b|0,g===void 0?s.length-1:g|0)}A.exports={ge:function(s,o,b,g,d){return v(s,o,b,g,d,e)},gt:function(s,o,b,g,d){return v(s,o,b,g,d,a)},lt:function(s,o,b,g,d){return v(s,o,b,g,d,i)},le:function(s,o,b,g,d){return v(s,o,b,g,d,n)},eq:function(s,o,b,g,d){return v(s,o,b,g,d,r)}}},{}],32:[function(c,A,T){var e=32;T.INT_BITS=e,T.INT_MAX=2147483647,T.INT_MIN=-1<<e-1,T.sign=function(n){return(n>0)-(n<0)},T.abs=function(n){var r=n>>e-1;return(n^r)-r},T.min=function(n,r){return r^(n^r)&-(n<r)},T.max=function(n,r){return n^(n^r)&-(n<r)},T.isPow2=function(n){return!(n&n-1)&&!!n},T.log2=function(n){var r,v;return r=(n>65535)<<4,n>>>=r,v=(n>255)<<3,n>>>=v,r|=v,v=(n>15)<<2,n>>>=v,r|=v,v=(n>3)<<1,n>>>=v,r|=v,r|n>>1},T.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},T.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function a(n){var r=32;return n&=-n,n&&r--,n&65535&&(r-=16),n&16711935&&(r-=8),n&252645135&&(r-=4),n&858993459&&(r-=2),n&1431655765&&(r-=1),r}T.countTrailingZeros=a,T.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},T.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},T.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var v=r,s=r,o=7;for(v>>>=1;v;v>>>=1)s<<=1,s|=v&1,--o;n[r]=s<<o&255}})(i),T.reverse=function(n){return i[n&255]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},T.interleave2=function(n,r){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n|r<<1},T.deinterleave2=function(n,r){return n=n>>>r&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},T.interleave3=function(n,r,v){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n|=r<<1,v&=1023,v=(v|v<<16)&4278190335,v=(v|v<<8)&251719695,v=(v|v<<4)&3272356035,v=(v|v<<2)&1227133513,n|v<<2},T.deinterleave3=function(n,r){return n=n>>>r&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},T.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>a(n)+1}},{}],33:[function(c,A,T){(function(e,a){function i(I,D){if(!I)throw new Error(D||"Assertion failed")}function n(I,D){I.super_=D;var R=function(){};R.prototype=D.prototype,I.prototype=new R,I.prototype.constructor=I}function r(I,D,R){if(r.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(I||0,D||10,R||"be"))}typeof e=="object"?e.exports=r:a.BN=r,r.BN=r,r.wordSize=26;var v;try{typeof window<"u"&&typeof window.Buffer<"u"?v=window.Buffer:v=c("buffer").Buffer}catch{}r.isBN=function(D){return D instanceof r?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===r.wordSize&&Array.isArray(D.words)},r.max=function(D,R){return D.cmp(R)>0?D:R},r.min=function(D,R){return D.cmp(R)<0?D:R},r.prototype._init=function(D,R,O){if(typeof D=="number")return this._initNumber(D,R,O);if(typeof D=="object")return this._initArray(D,R,O);R==="hex"&&(R=16),i(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var z=0;D[0]==="-"&&(z++,this.negative=1),z<D.length&&(R===16?this._parseHex(D,z,O):(this._parseBase(D,R,z),O==="le"&&this._initArray(this.toArray(),R,O)))},r.prototype._initNumber=function(D,R,O){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(i(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),R,O)},r.prototype._initArray=function(D,R,O){if(i(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G,Y,ee=0;if(O==="be")for(z=D.length-1,G=0;z>=0;z-=3)Y=D[z]|D[z-1]<<8|D[z-2]<<16,this.words[G]|=Y<<ee&67108863,this.words[G+1]=Y>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,G++);else if(O==="le")for(z=0,G=0;z<D.length;z+=3)Y=D[z]|D[z+1]<<8|D[z+2]<<16,this.words[G]|=Y<<ee&67108863,this.words[G+1]=Y>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,G++);return this.strip()};function s(I,D){var R=I.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function o(I,D,R){var O=s(I,R);return R-1>=D&&(O|=s(I,R-1)<<4),O}r.prototype._parseHex=function(D,R,O){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G=0,Y=0,ee;if(O==="be")for(z=D.length-1;z>=R;z-=2)ee=o(D,R,z)<<G,this.words[Y]|=ee&67108863,G>=18?(G-=18,Y+=1,this.words[Y]|=ee>>>26):G+=8;else{var j=D.length-R;for(z=j%2===0?R+1:R;z<D.length;z+=2)ee=o(D,R,z)<<G,this.words[Y]|=ee&67108863,G>=18?(G-=18,Y+=1,this.words[Y]|=ee>>>26):G+=8}this.strip()};function b(I,D,R,O){for(var z=0,G=Math.min(I.length,R),Y=D;Y<G;Y++){var ee=I.charCodeAt(Y)-48;z*=O,ee>=49?z+=ee-49+10:ee>=17?z+=ee-17+10:z+=ee}return z}r.prototype._parseBase=function(D,R,O){this.words=[0],this.length=1;for(var z=0,G=1;G<=67108863;G*=R)z++;z--,G=G/R|0;for(var Y=D.length-O,ee=Y%z,j=Math.min(Y,Y-ee)+O,X=0,ae=O;ae<j;ae+=z)X=b(D,ae,ae+z,R),this.imuln(G),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(ee!==0){var he=1;for(X=b(D,ae,D.length,R),ae=0;ae<ee;ae++)he*=R;this.imuln(he),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},r.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},r.prototype.clone=function(){var D=new r(null);return this.copy(D),D},r.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(D,R){D=D||10,R=R|0||1;var O;if(D===16||D==="hex"){O="";for(var z=0,G=0,Y=0;Y<this.length;Y++){var ee=this.words[Y],j=((ee<<z|G)&16777215).toString(16);G=ee>>>24-z&16777215,G!==0||Y!==this.length-1?O=g[6-j.length]+j+O:O=j+O,z+=2,z>=26&&(z-=26,Y--)}for(G!==0&&(O=G.toString(16)+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(D===(D|0)&&D>=2&&D<=36){var X=d[D],ae=f[D];O="";var he=this.clone();for(he.negative=0;!he.isZero();){var K=he.modn(ae).toString(D);he=he.idivn(ae),he.isZero()?O=K+O:O=g[X-K.length]+K+O}for(this.isZero()&&(O="0"+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(D,R){return i(typeof v<"u"),this.toArrayLike(v,D,R)},r.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},r.prototype.toArrayLike=function(D,R,O){var z=this.byteLength(),G=O||Math.max(1,z);i(z<=G,"byte array longer than desired length"),i(G>0,"Requested array length <= 0"),this.strip();var Y=R==="le",ee=new D(G),j,X,ae=this.clone();if(Y){for(X=0;!ae.isZero();X++)j=ae.andln(255),ae.iushrn(8),ee[X]=j;for(;X<G;X++)ee[X]=0}else{for(X=0;X<G-z;X++)ee[X]=0;for(X=0;!ae.isZero();X++)j=ae.andln(255),ae.iushrn(8),ee[G-X-1]=j}return ee},Math.clz32?r.prototype._countBits=function(D){return 32-Math.clz32(D)}:r.prototype._countBits=function(D){var R=D,O=0;return R>=4096&&(O+=13,R>>>=13),R>=64&&(O+=7,R>>>=7),R>=8&&(O+=4,R>>>=4),R>=2&&(O+=2,R>>>=2),O+R},r.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,O=0;return(R&8191)===0&&(O+=13,R>>>=13),(R&127)===0&&(O+=7,R>>>=7),(R&15)===0&&(O+=4,R>>>=4),(R&3)===0&&(O+=2,R>>>=2),(R&1)===0&&O++,O},r.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function m(I){for(var D=new Array(I.bitLength()),R=0;R<D.length;R++){var O=R/26|0,z=R%26;D[R]=(I.words[O]&1<<z)>>>z}return D}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var O=this._zeroBits(this.words[R]);if(D+=O,O!==26)break}return D},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},r.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},r.prototype.ior=function(D){return i((this.negative|D.negative)===0),this.iuor(D)},r.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},r.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},r.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var O=0;O<R.length;O++)this.words[O]=this.words[O]&D.words[O];return this.length=R.length,this.strip()},r.prototype.iand=function(D){return i((this.negative|D.negative)===0),this.iuand(D)},r.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},r.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},r.prototype.iuxor=function(D){var R,O;this.length>D.length?(R=this,O=D):(R=D,O=this);for(var z=0;z<O.length;z++)this.words[z]=R.words[z]^O.words[z];if(this!==R)for(;z<R.length;z++)this.words[z]=R.words[z];return this.length=R.length,this.strip()},r.prototype.ixor=function(D){return i((this.negative|D.negative)===0),this.iuxor(D)},r.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},r.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},r.prototype.inotn=function(D){i(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,O=D%26;this._expand(R),O>0&&R--;for(var z=0;z<R;z++)this.words[z]=~this.words[z]&67108863;return O>0&&(this.words[z]=~this.words[z]&67108863>>26-O),this.strip()},r.prototype.notn=function(D){return this.clone().inotn(D)},r.prototype.setn=function(D,R){i(typeof D=="number"&&D>=0);var O=D/26|0,z=D%26;return this._expand(O+1),R?this.words[O]=this.words[O]|1<<z:this.words[O]=this.words[O]&~(1<<z),this.strip()},r.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var O,z;this.length>D.length?(O=this,z=D):(O=D,z=this);for(var G=0,Y=0;Y<z.length;Y++)R=(O.words[Y]|0)+(z.words[Y]|0)+G,this.words[Y]=R&67108863,G=R>>>26;for(;G!==0&&Y<O.length;Y++)R=(O.words[Y]|0)+G,this.words[Y]=R&67108863,G=R>>>26;if(this.length=O.length,G!==0)this.words[this.length]=G,this.length++;else if(O!==this)for(;Y<O.length;Y++)this.words[Y]=O.words[Y];return this},r.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},r.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var O=this.cmp(D);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,G;O>0?(z=this,G=D):(z=D,G=this);for(var Y=0,ee=0;ee<G.length;ee++)R=(z.words[ee]|0)-(G.words[ee]|0)+Y,Y=R>>26,this.words[ee]=R&67108863;for(;Y!==0&&ee<z.length;ee++)R=(z.words[ee]|0)+Y,Y=R>>26,this.words[ee]=R&67108863;if(Y===0&&ee<z.length&&z!==this)for(;ee<z.length;ee++)this.words[ee]=z.words[ee];return this.length=Math.max(this.length,ee),z!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(D){return this.clone().isub(D)};function l(I,D,R){R.negative=D.negative^I.negative;var O=I.length+D.length|0;R.length=O,O=O-1|0;var z=I.words[0]|0,G=D.words[0]|0,Y=z*G,ee=Y&67108863,j=Y/67108864|0;R.words[0]=ee;for(var X=1;X<O;X++){for(var ae=j>>>26,he=j&67108863,K=Math.min(X,D.length-1),J=Math.max(0,X-I.length+1);J<=K;J++){var U=X-J|0;z=I.words[U]|0,G=D.words[J]|0,Y=z*G+he,ae+=Y/67108864|0,he=Y&67108863}R.words[X]=he|0,j=ae|0}return j!==0?R.words[X]=j|0:R.length--,R.strip()}var x=function(D,R,O){var z=D.words,G=R.words,Y=O.words,ee=0,j,X,ae,he=z[0]|0,K=he&8191,J=he>>>13,U=z[1]|0,H=U&8191,q=U>>>13,re=z[2]|0,Z=re&8191,Q=re>>>13,ie=z[3]|0,oe=ie&8191,ne=ie>>>13,le=z[4]|0,_e=le&8191,fe=le>>>13,ye=z[5]|0,xe=ye&8191,me=ye>>>13,be=z[6]|0,ke=be&8191,De=be>>>13,He=z[7]|0,Ae=He&8191,Le=He>>>13,Ze=z[8]|0,We=Ze&8191,ze=Ze>>>13,Ie=z[9]|0,Ve=Ie&8191,dt=Ie>>>13,Ft=G[0]|0,Qt=Ft&8191,Ot=Ft>>>13,Ct=G[1]|0,jt=Ct&8191,Nt=Ct>>>13,Lt=G[2]|0,Xe=Lt&8191,it=Lt>>>13,Ye=G[3]|0,Ee=Ye&8191,Ge=Ye>>>13,Ke=G[4]|0,qe=Ke&8191,At=Ke>>>13,mt=G[5]|0,Mt=mt&8191,Gt=mt>>>13,zt=G[6]|0,Ht=zt&8191,Zt=zt>>>13,Wt=G[7]|0,sr=Wt&8191,Gr=Wt>>>13,cn=G[8]|0,qr=cn&8191,st=cn>>>13,rr=G[9]|0,$t=rr&8191,hr=rr>>>13;O.negative=D.negative^R.negative,O.length=19,j=Math.imul(K,Qt),X=Math.imul(K,Ot),X=X+Math.imul(J,Qt)|0,ae=Math.imul(J,Ot);var Sr=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,j=Math.imul(H,Qt),X=Math.imul(H,Ot),X=X+Math.imul(q,Qt)|0,ae=Math.imul(q,Ot),j=j+Math.imul(K,jt)|0,X=X+Math.imul(K,Nt)|0,X=X+Math.imul(J,jt)|0,ae=ae+Math.imul(J,Nt)|0;var tt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(tt>>>26)|0,tt&=67108863,j=Math.imul(Z,Qt),X=Math.imul(Z,Ot),X=X+Math.imul(Q,Qt)|0,ae=Math.imul(Q,Ot),j=j+Math.imul(H,jt)|0,X=X+Math.imul(H,Nt)|0,X=X+Math.imul(q,jt)|0,ae=ae+Math.imul(q,Nt)|0,j=j+Math.imul(K,Xe)|0,X=X+Math.imul(K,it)|0,X=X+Math.imul(J,Xe)|0,ae=ae+Math.imul(J,it)|0;var Qe=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,j=Math.imul(oe,Qt),X=Math.imul(oe,Ot),X=X+Math.imul(ne,Qt)|0,ae=Math.imul(ne,Ot),j=j+Math.imul(Z,jt)|0,X=X+Math.imul(Z,Nt)|0,X=X+Math.imul(Q,jt)|0,ae=ae+Math.imul(Q,Nt)|0,j=j+Math.imul(H,Xe)|0,X=X+Math.imul(H,it)|0,X=X+Math.imul(q,Xe)|0,ae=ae+Math.imul(q,it)|0,j=j+Math.imul(K,Ee)|0,X=X+Math.imul(K,Ge)|0,X=X+Math.imul(J,Ee)|0,ae=ae+Math.imul(J,Ge)|0;var lt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(lt>>>26)|0,lt&=67108863,j=Math.imul(_e,Qt),X=Math.imul(_e,Ot),X=X+Math.imul(fe,Qt)|0,ae=Math.imul(fe,Ot),j=j+Math.imul(oe,jt)|0,X=X+Math.imul(oe,Nt)|0,X=X+Math.imul(ne,jt)|0,ae=ae+Math.imul(ne,Nt)|0,j=j+Math.imul(Z,Xe)|0,X=X+Math.imul(Z,it)|0,X=X+Math.imul(Q,Xe)|0,ae=ae+Math.imul(Q,it)|0,j=j+Math.imul(H,Ee)|0,X=X+Math.imul(H,Ge)|0,X=X+Math.imul(q,Ee)|0,ae=ae+Math.imul(q,Ge)|0,j=j+Math.imul(K,qe)|0,X=X+Math.imul(K,At)|0,X=X+Math.imul(J,qe)|0,ae=ae+Math.imul(J,At)|0;var ft=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(ft>>>26)|0,ft&=67108863,j=Math.imul(xe,Qt),X=Math.imul(xe,Ot),X=X+Math.imul(me,Qt)|0,ae=Math.imul(me,Ot),j=j+Math.imul(_e,jt)|0,X=X+Math.imul(_e,Nt)|0,X=X+Math.imul(fe,jt)|0,ae=ae+Math.imul(fe,Nt)|0,j=j+Math.imul(oe,Xe)|0,X=X+Math.imul(oe,it)|0,X=X+Math.imul(ne,Xe)|0,ae=ae+Math.imul(ne,it)|0,j=j+Math.imul(Z,Ee)|0,X=X+Math.imul(Z,Ge)|0,X=X+Math.imul(Q,Ee)|0,ae=ae+Math.imul(Q,Ge)|0,j=j+Math.imul(H,qe)|0,X=X+Math.imul(H,At)|0,X=X+Math.imul(q,qe)|0,ae=ae+Math.imul(q,At)|0,j=j+Math.imul(K,Mt)|0,X=X+Math.imul(K,Gt)|0,X=X+Math.imul(J,Mt)|0,ae=ae+Math.imul(J,Gt)|0;var Et=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Et>>>26)|0,Et&=67108863,j=Math.imul(ke,Qt),X=Math.imul(ke,Ot),X=X+Math.imul(De,Qt)|0,ae=Math.imul(De,Ot),j=j+Math.imul(xe,jt)|0,X=X+Math.imul(xe,Nt)|0,X=X+Math.imul(me,jt)|0,ae=ae+Math.imul(me,Nt)|0,j=j+Math.imul(_e,Xe)|0,X=X+Math.imul(_e,it)|0,X=X+Math.imul(fe,Xe)|0,ae=ae+Math.imul(fe,it)|0,j=j+Math.imul(oe,Ee)|0,X=X+Math.imul(oe,Ge)|0,X=X+Math.imul(ne,Ee)|0,ae=ae+Math.imul(ne,Ge)|0,j=j+Math.imul(Z,qe)|0,X=X+Math.imul(Z,At)|0,X=X+Math.imul(Q,qe)|0,ae=ae+Math.imul(Q,At)|0,j=j+Math.imul(H,Mt)|0,X=X+Math.imul(H,Gt)|0,X=X+Math.imul(q,Mt)|0,ae=ae+Math.imul(q,Gt)|0,j=j+Math.imul(K,Ht)|0,X=X+Math.imul(K,Zt)|0,X=X+Math.imul(J,Ht)|0,ae=ae+Math.imul(J,Zt)|0;var Vt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,j=Math.imul(Ae,Qt),X=Math.imul(Ae,Ot),X=X+Math.imul(Le,Qt)|0,ae=Math.imul(Le,Ot),j=j+Math.imul(ke,jt)|0,X=X+Math.imul(ke,Nt)|0,X=X+Math.imul(De,jt)|0,ae=ae+Math.imul(De,Nt)|0,j=j+Math.imul(xe,Xe)|0,X=X+Math.imul(xe,it)|0,X=X+Math.imul(me,Xe)|0,ae=ae+Math.imul(me,it)|0,j=j+Math.imul(_e,Ee)|0,X=X+Math.imul(_e,Ge)|0,X=X+Math.imul(fe,Ee)|0,ae=ae+Math.imul(fe,Ge)|0,j=j+Math.imul(oe,qe)|0,X=X+Math.imul(oe,At)|0,X=X+Math.imul(ne,qe)|0,ae=ae+Math.imul(ne,At)|0,j=j+Math.imul(Z,Mt)|0,X=X+Math.imul(Z,Gt)|0,X=X+Math.imul(Q,Mt)|0,ae=ae+Math.imul(Q,Gt)|0,j=j+Math.imul(H,Ht)|0,X=X+Math.imul(H,Zt)|0,X=X+Math.imul(q,Ht)|0,ae=ae+Math.imul(q,Zt)|0,j=j+Math.imul(K,sr)|0,X=X+Math.imul(K,Gr)|0,X=X+Math.imul(J,sr)|0,ae=ae+Math.imul(J,Gr)|0;var Pe=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,j=Math.imul(We,Qt),X=Math.imul(We,Ot),X=X+Math.imul(ze,Qt)|0,ae=Math.imul(ze,Ot),j=j+Math.imul(Ae,jt)|0,X=X+Math.imul(Ae,Nt)|0,X=X+Math.imul(Le,jt)|0,ae=ae+Math.imul(Le,Nt)|0,j=j+Math.imul(ke,Xe)|0,X=X+Math.imul(ke,it)|0,X=X+Math.imul(De,Xe)|0,ae=ae+Math.imul(De,it)|0,j=j+Math.imul(xe,Ee)|0,X=X+Math.imul(xe,Ge)|0,X=X+Math.imul(me,Ee)|0,ae=ae+Math.imul(me,Ge)|0,j=j+Math.imul(_e,qe)|0,X=X+Math.imul(_e,At)|0,X=X+Math.imul(fe,qe)|0,ae=ae+Math.imul(fe,At)|0,j=j+Math.imul(oe,Mt)|0,X=X+Math.imul(oe,Gt)|0,X=X+Math.imul(ne,Mt)|0,ae=ae+Math.imul(ne,Gt)|0,j=j+Math.imul(Z,Ht)|0,X=X+Math.imul(Z,Zt)|0,X=X+Math.imul(Q,Ht)|0,ae=ae+Math.imul(Q,Zt)|0,j=j+Math.imul(H,sr)|0,X=X+Math.imul(H,Gr)|0,X=X+Math.imul(q,sr)|0,ae=ae+Math.imul(q,Gr)|0,j=j+Math.imul(K,qr)|0,X=X+Math.imul(K,st)|0,X=X+Math.imul(J,qr)|0,ae=ae+Math.imul(J,st)|0;var Se=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Se>>>26)|0,Se&=67108863,j=Math.imul(Ve,Qt),X=Math.imul(Ve,Ot),X=X+Math.imul(dt,Qt)|0,ae=Math.imul(dt,Ot),j=j+Math.imul(We,jt)|0,X=X+Math.imul(We,Nt)|0,X=X+Math.imul(ze,jt)|0,ae=ae+Math.imul(ze,Nt)|0,j=j+Math.imul(Ae,Xe)|0,X=X+Math.imul(Ae,it)|0,X=X+Math.imul(Le,Xe)|0,ae=ae+Math.imul(Le,it)|0,j=j+Math.imul(ke,Ee)|0,X=X+Math.imul(ke,Ge)|0,X=X+Math.imul(De,Ee)|0,ae=ae+Math.imul(De,Ge)|0,j=j+Math.imul(xe,qe)|0,X=X+Math.imul(xe,At)|0,X=X+Math.imul(me,qe)|0,ae=ae+Math.imul(me,At)|0,j=j+Math.imul(_e,Mt)|0,X=X+Math.imul(_e,Gt)|0,X=X+Math.imul(fe,Mt)|0,ae=ae+Math.imul(fe,Gt)|0,j=j+Math.imul(oe,Ht)|0,X=X+Math.imul(oe,Zt)|0,X=X+Math.imul(ne,Ht)|0,ae=ae+Math.imul(ne,Zt)|0,j=j+Math.imul(Z,sr)|0,X=X+Math.imul(Z,Gr)|0,X=X+Math.imul(Q,sr)|0,ae=ae+Math.imul(Q,Gr)|0,j=j+Math.imul(H,qr)|0,X=X+Math.imul(H,st)|0,X=X+Math.imul(q,qr)|0,ae=ae+Math.imul(q,st)|0,j=j+Math.imul(K,$t)|0,X=X+Math.imul(K,hr)|0,X=X+Math.imul(J,$t)|0,ae=ae+Math.imul(J,hr)|0;var ot=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(ot>>>26)|0,ot&=67108863,j=Math.imul(Ve,jt),X=Math.imul(Ve,Nt),X=X+Math.imul(dt,jt)|0,ae=Math.imul(dt,Nt),j=j+Math.imul(We,Xe)|0,X=X+Math.imul(We,it)|0,X=X+Math.imul(ze,Xe)|0,ae=ae+Math.imul(ze,it)|0,j=j+Math.imul(Ae,Ee)|0,X=X+Math.imul(Ae,Ge)|0,X=X+Math.imul(Le,Ee)|0,ae=ae+Math.imul(Le,Ge)|0,j=j+Math.imul(ke,qe)|0,X=X+Math.imul(ke,At)|0,X=X+Math.imul(De,qe)|0,ae=ae+Math.imul(De,At)|0,j=j+Math.imul(xe,Mt)|0,X=X+Math.imul(xe,Gt)|0,X=X+Math.imul(me,Mt)|0,ae=ae+Math.imul(me,Gt)|0,j=j+Math.imul(_e,Ht)|0,X=X+Math.imul(_e,Zt)|0,X=X+Math.imul(fe,Ht)|0,ae=ae+Math.imul(fe,Zt)|0,j=j+Math.imul(oe,sr)|0,X=X+Math.imul(oe,Gr)|0,X=X+Math.imul(ne,sr)|0,ae=ae+Math.imul(ne,Gr)|0,j=j+Math.imul(Z,qr)|0,X=X+Math.imul(Z,st)|0,X=X+Math.imul(Q,qr)|0,ae=ae+Math.imul(Q,st)|0,j=j+Math.imul(H,$t)|0,X=X+Math.imul(H,hr)|0,X=X+Math.imul(q,$t)|0,ae=ae+Math.imul(q,hr)|0;var ct=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(ct>>>26)|0,ct&=67108863,j=Math.imul(Ve,Xe),X=Math.imul(Ve,it),X=X+Math.imul(dt,Xe)|0,ae=Math.imul(dt,it),j=j+Math.imul(We,Ee)|0,X=X+Math.imul(We,Ge)|0,X=X+Math.imul(ze,Ee)|0,ae=ae+Math.imul(ze,Ge)|0,j=j+Math.imul(Ae,qe)|0,X=X+Math.imul(Ae,At)|0,X=X+Math.imul(Le,qe)|0,ae=ae+Math.imul(Le,At)|0,j=j+Math.imul(ke,Mt)|0,X=X+Math.imul(ke,Gt)|0,X=X+Math.imul(De,Mt)|0,ae=ae+Math.imul(De,Gt)|0,j=j+Math.imul(xe,Ht)|0,X=X+Math.imul(xe,Zt)|0,X=X+Math.imul(me,Ht)|0,ae=ae+Math.imul(me,Zt)|0,j=j+Math.imul(_e,sr)|0,X=X+Math.imul(_e,Gr)|0,X=X+Math.imul(fe,sr)|0,ae=ae+Math.imul(fe,Gr)|0,j=j+Math.imul(oe,qr)|0,X=X+Math.imul(oe,st)|0,X=X+Math.imul(ne,qr)|0,ae=ae+Math.imul(ne,st)|0,j=j+Math.imul(Z,$t)|0,X=X+Math.imul(Z,hr)|0,X=X+Math.imul(Q,$t)|0,ae=ae+Math.imul(Q,hr)|0;var pt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(pt>>>26)|0,pt&=67108863,j=Math.imul(Ve,Ee),X=Math.imul(Ve,Ge),X=X+Math.imul(dt,Ee)|0,ae=Math.imul(dt,Ge),j=j+Math.imul(We,qe)|0,X=X+Math.imul(We,At)|0,X=X+Math.imul(ze,qe)|0,ae=ae+Math.imul(ze,At)|0,j=j+Math.imul(Ae,Mt)|0,X=X+Math.imul(Ae,Gt)|0,X=X+Math.imul(Le,Mt)|0,ae=ae+Math.imul(Le,Gt)|0,j=j+Math.imul(ke,Ht)|0,X=X+Math.imul(ke,Zt)|0,X=X+Math.imul(De,Ht)|0,ae=ae+Math.imul(De,Zt)|0,j=j+Math.imul(xe,sr)|0,X=X+Math.imul(xe,Gr)|0,X=X+Math.imul(me,sr)|0,ae=ae+Math.imul(me,Gr)|0,j=j+Math.imul(_e,qr)|0,X=X+Math.imul(_e,st)|0,X=X+Math.imul(fe,qr)|0,ae=ae+Math.imul(fe,st)|0,j=j+Math.imul(oe,$t)|0,X=X+Math.imul(oe,hr)|0,X=X+Math.imul(ne,$t)|0,ae=ae+Math.imul(ne,hr)|0;var St=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(St>>>26)|0,St&=67108863,j=Math.imul(Ve,qe),X=Math.imul(Ve,At),X=X+Math.imul(dt,qe)|0,ae=Math.imul(dt,At),j=j+Math.imul(We,Mt)|0,X=X+Math.imul(We,Gt)|0,X=X+Math.imul(ze,Mt)|0,ae=ae+Math.imul(ze,Gt)|0,j=j+Math.imul(Ae,Ht)|0,X=X+Math.imul(Ae,Zt)|0,X=X+Math.imul(Le,Ht)|0,ae=ae+Math.imul(Le,Zt)|0,j=j+Math.imul(ke,sr)|0,X=X+Math.imul(ke,Gr)|0,X=X+Math.imul(De,sr)|0,ae=ae+Math.imul(De,Gr)|0,j=j+Math.imul(xe,qr)|0,X=X+Math.imul(xe,st)|0,X=X+Math.imul(me,qr)|0,ae=ae+Math.imul(me,st)|0,j=j+Math.imul(_e,$t)|0,X=X+Math.imul(_e,hr)|0,X=X+Math.imul(fe,$t)|0,ae=ae+Math.imul(fe,hr)|0;var xt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(xt>>>26)|0,xt&=67108863,j=Math.imul(Ve,Mt),X=Math.imul(Ve,Gt),X=X+Math.imul(dt,Mt)|0,ae=Math.imul(dt,Gt),j=j+Math.imul(We,Ht)|0,X=X+Math.imul(We,Zt)|0,X=X+Math.imul(ze,Ht)|0,ae=ae+Math.imul(ze,Zt)|0,j=j+Math.imul(Ae,sr)|0,X=X+Math.imul(Ae,Gr)|0,X=X+Math.imul(Le,sr)|0,ae=ae+Math.imul(Le,Gr)|0,j=j+Math.imul(ke,qr)|0,X=X+Math.imul(ke,st)|0,X=X+Math.imul(De,qr)|0,ae=ae+Math.imul(De,st)|0,j=j+Math.imul(xe,$t)|0,X=X+Math.imul(xe,hr)|0,X=X+Math.imul(me,$t)|0,ae=ae+Math.imul(me,hr)|0;var Pt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,j=Math.imul(Ve,Ht),X=Math.imul(Ve,Zt),X=X+Math.imul(dt,Ht)|0,ae=Math.imul(dt,Zt),j=j+Math.imul(We,sr)|0,X=X+Math.imul(We,Gr)|0,X=X+Math.imul(ze,sr)|0,ae=ae+Math.imul(ze,Gr)|0,j=j+Math.imul(Ae,qr)|0,X=X+Math.imul(Ae,st)|0,X=X+Math.imul(Le,qr)|0,ae=ae+Math.imul(Le,st)|0,j=j+Math.imul(ke,$t)|0,X=X+Math.imul(ke,hr)|0,X=X+Math.imul(De,$t)|0,ae=ae+Math.imul(De,hr)|0;var Xt=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,j=Math.imul(Ve,sr),X=Math.imul(Ve,Gr),X=X+Math.imul(dt,sr)|0,ae=Math.imul(dt,Gr),j=j+Math.imul(We,qr)|0,X=X+Math.imul(We,st)|0,X=X+Math.imul(ze,qr)|0,ae=ae+Math.imul(ze,st)|0,j=j+Math.imul(Ae,$t)|0,X=X+Math.imul(Ae,hr)|0,X=X+Math.imul(Le,$t)|0,ae=ae+Math.imul(Le,hr)|0;var or=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(or>>>26)|0,or&=67108863,j=Math.imul(Ve,qr),X=Math.imul(Ve,st),X=X+Math.imul(dt,qr)|0,ae=Math.imul(dt,st),j=j+Math.imul(We,$t)|0,X=X+Math.imul(We,hr)|0,X=X+Math.imul(ze,$t)|0,ae=ae+Math.imul(ze,hr)|0;var Pr=(ee+j|0)+((X&8191)<<13)|0;ee=(ae+(X>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,j=Math.imul(Ve,$t),X=Math.imul(Ve,hr),X=X+Math.imul(dt,$t)|0,ae=Math.imul(dt,hr);var Ar=(ee+j|0)+((X&8191)<<13)|0;return ee=(ae+(X>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,Y[0]=Sr,Y[1]=tt,Y[2]=Qe,Y[3]=lt,Y[4]=ft,Y[5]=Et,Y[6]=Vt,Y[7]=Pe,Y[8]=Se,Y[9]=ot,Y[10]=ct,Y[11]=pt,Y[12]=St,Y[13]=xt,Y[14]=Pt,Y[15]=Xt,Y[16]=or,Y[17]=Pr,Y[18]=Ar,ee!==0&&(Y[19]=ee,O.length++),O};Math.imul||(x=l);function u(I,D,R){R.negative=D.negative^I.negative,R.length=I.length+D.length;for(var O=0,z=0,G=0;G<R.length-1;G++){var Y=z;z=0;for(var ee=O&67108863,j=Math.min(G,D.length-1),X=Math.max(0,G-I.length+1);X<=j;X++){var ae=G-X,he=I.words[ae]|0,K=D.words[X]|0,J=he*K,U=J&67108863;Y=Y+(J/67108864|0)|0,U=U+ee|0,ee=U&67108863,Y=Y+(U>>>26)|0,z+=Y>>>26,Y&=67108863}R.words[G]=ee,O=Y,Y=z}return O!==0?R.words[G]=O:R.length--,R.strip()}function M(I,D,R){var O=new w;return O.mulp(I,D,R)}r.prototype.mulTo=function(D,R){var O,z=this.length+D.length;return this.length===10&&D.length===10?O=x(this,D,R):z<63?O=l(this,D,R):z<1024?O=u(this,D,R):O=M(this,D,R),O};function w(I,D){this.x=I,this.y=D}w.prototype.makeRBT=function(D){for(var R=new Array(D),O=r.prototype._countBits(D)-1,z=0;z<D;z++)R[z]=this.revBin(z,O,D);return R},w.prototype.revBin=function(D,R,O){if(D===0||D===O-1)return D;for(var z=0,G=0;G<R;G++)z|=(D&1)<<R-G-1,D>>=1;return z},w.prototype.permute=function(D,R,O,z,G,Y){for(var ee=0;ee<Y;ee++)z[ee]=R[D[ee]],G[ee]=O[D[ee]]},w.prototype.transform=function(D,R,O,z,G,Y){this.permute(Y,D,R,O,z,G);for(var ee=1;ee<G;ee<<=1)for(var j=ee<<1,X=Math.cos(2*Math.PI/j),ae=Math.sin(2*Math.PI/j),he=0;he<G;he+=j)for(var K=X,J=ae,U=0;U<ee;U++){var H=O[he+U],q=z[he+U],re=O[he+U+ee],Z=z[he+U+ee],Q=K*re-J*Z;Z=K*Z+J*re,re=Q,O[he+U]=H+re,z[he+U]=q+Z,O[he+U+ee]=H-re,z[he+U+ee]=q-Z,U!==j&&(Q=X*K-ae*J,J=X*J+ae*K,K=Q)}},w.prototype.guessLen13b=function(D,R){var O=Math.max(R,D)|1,z=O&1,G=0;for(O=O/2|0;O;O=O>>>1)G++;return 1<<G+1+z},w.prototype.conjugate=function(D,R,O){if(!(O<=1))for(var z=0;z<O/2;z++){var G=D[z];D[z]=D[O-z-1],D[O-z-1]=G,G=R[z],R[z]=-R[O-z-1],R[O-z-1]=-G}},w.prototype.normalize13b=function(D,R){for(var O=0,z=0;z<R/2;z++){var G=Math.round(D[2*z+1]/R)*8192+Math.round(D[2*z]/R)+O;D[z]=G&67108863,G<67108864?O=0:O=G/67108864|0}return D},w.prototype.convert13b=function(D,R,O,z){for(var G=0,Y=0;Y<R;Y++)G=G+(D[Y]|0),O[2*Y]=G&8191,G=G>>>13,O[2*Y+1]=G&8191,G=G>>>13;for(Y=2*R;Y<z;++Y)O[Y]=0;i(G===0),i((G&-8192)===0)},w.prototype.stub=function(D){for(var R=new Array(D),O=0;O<D;O++)R[O]=0;return R},w.prototype.mulp=function(D,R,O){var z=2*this.guessLen13b(D.length,R.length),G=this.makeRBT(z),Y=this.stub(z),ee=new Array(z),j=new Array(z),X=new Array(z),ae=new Array(z),he=new Array(z),K=new Array(z),J=O.words;J.length=z,this.convert13b(D.words,D.length,ee,z),this.convert13b(R.words,R.length,ae,z),this.transform(ee,Y,j,X,z,G),this.transform(ae,Y,he,K,z,G);for(var U=0;U<z;U++){var H=j[U]*he[U]-X[U]*K[U];X[U]=j[U]*K[U]+X[U]*he[U],j[U]=H}return this.conjugate(j,X,z),this.transform(j,X,J,Y,z,G),this.conjugate(J,Y,z),this.normalize13b(J,z),O.negative=D.negative^R.negative,O.length=D.length+R.length,O.strip()},r.prototype.mul=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},r.prototype.mulf=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),M(this,D,R)},r.prototype.imul=function(D){return this.clone().mulTo(D,this)},r.prototype.imuln=function(D){i(typeof D=="number"),i(D<67108864);for(var R=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*D,G=(z&67108863)+(R&67108863);R>>=26,R+=z/67108864|0,R+=G>>>26,this.words[O]=G&67108863}return R!==0&&(this.words[O]=R,this.length++),this},r.prototype.muln=function(D){return this.clone().imuln(D)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(D){var R=m(D);if(R.length===0)return new r(1);for(var O=this,z=0;z<R.length&&R[z]===0;z++,O=O.sqr());if(++z<R.length)for(var G=O.sqr();z<R.length;z++,G=G.sqr())R[z]!==0&&(O=O.mul(G));return O},r.prototype.iushln=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=67108863>>>26-R<<26-R,G;if(R!==0){var Y=0;for(G=0;G<this.length;G++){var ee=this.words[G]&z,j=(this.words[G]|0)-ee<<R;this.words[G]=j|Y,Y=ee>>>26-R}Y&&(this.words[G]=Y,this.length++)}if(O!==0){for(G=this.length-1;G>=0;G--)this.words[G+O]=this.words[G];for(G=0;G<O;G++)this.words[G]=0;this.length+=O}return this.strip()},r.prototype.ishln=function(D){return i(this.negative===0),this.iushln(D)},r.prototype.iushrn=function(D,R,O){i(typeof D=="number"&&D>=0);var z;R?z=(R-R%26)/26:z=0;var G=D%26,Y=Math.min((D-G)/26,this.length),ee=67108863^67108863>>>G<<G,j=O;if(z-=Y,z=Math.max(0,z),j){for(var X=0;X<Y;X++)j.words[X]=this.words[X];j.length=Y}if(Y!==0)if(this.length>Y)for(this.length-=Y,X=0;X<this.length;X++)this.words[X]=this.words[X+Y];else this.words[0]=0,this.length=1;var ae=0;for(X=this.length-1;X>=0&&(ae!==0||X>=z);X--){var he=this.words[X]|0;this.words[X]=ae<<26-G|he>>>G,ae=he&ee}return j&&ae!==0&&(j.words[j.length++]=ae),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(D,R,O){return i(this.negative===0),this.iushrn(D,R,O)},r.prototype.shln=function(D){return this.clone().ishln(D)},r.prototype.ushln=function(D){return this.clone().iushln(D)},r.prototype.shrn=function(D){return this.clone().ishrn(D)},r.prototype.ushrn=function(D){return this.clone().iushrn(D)},r.prototype.testn=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return!1;var G=this.words[O];return!!(G&z)},r.prototype.imaskn=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(R!==0&&O++,this.length=Math.min(O,this.length),R!==0){var z=67108863^67108863>>>R<<R;this.words[this.length-1]&=z}return this.strip()},r.prototype.maskn=function(D){return this.clone().imaskn(D)},r.prototype.iaddn=function(D){return i(typeof D=="number"),i(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},r.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},r.prototype.isubn=function(D){if(i(typeof D=="number"),i(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},r.prototype.addn=function(D){return this.clone().iaddn(D)},r.prototype.subn=function(D){return this.clone().isubn(D)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(D,R,O){var z=D.length+O,G;this._expand(z);var Y,ee=0;for(G=0;G<D.length;G++){Y=(this.words[G+O]|0)+ee;var j=(D.words[G]|0)*R;Y-=j&67108863,ee=(Y>>26)-(j/67108864|0),this.words[G+O]=Y&67108863}for(;G<this.length-O;G++)Y=(this.words[G+O]|0)+ee,ee=Y>>26,this.words[G+O]=Y&67108863;if(ee===0)return this.strip();for(i(ee===-1),ee=0,G=0;G<this.length;G++)Y=-(this.words[G]|0)+ee,ee=Y>>26,this.words[G]=Y&67108863;return this.negative=1,this.strip()},r.prototype._wordDiv=function(D,R){var O=this.length-D.length,z=this.clone(),G=D,Y=G.words[G.length-1]|0,ee=this._countBits(Y);O=26-ee,O!==0&&(G=G.ushln(O),z.iushln(O),Y=G.words[G.length-1]|0);var j=z.length-G.length,X;if(R!=="mod"){X=new r(null),X.length=j+1,X.words=new Array(X.length);for(var ae=0;ae<X.length;ae++)X.words[ae]=0}var he=z.clone()._ishlnsubmul(G,1,j);he.negative===0&&(z=he,X&&(X.words[j]=1));for(var K=j-1;K>=0;K--){var J=(z.words[G.length+K]|0)*67108864+(z.words[G.length+K-1]|0);for(J=Math.min(J/Y|0,67108863),z._ishlnsubmul(G,J,K);z.negative!==0;)J--,z.negative=0,z._ishlnsubmul(G,1,K),z.isZero()||(z.negative^=1);X&&(X.words[K]=J)}return X&&X.strip(),z.strip(),R!=="div"&&O!==0&&z.iushrn(O),{div:X||null,mod:z}},r.prototype.divmod=function(D,R,O){if(i(!D.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var z,G,Y;return this.negative!==0&&D.negative===0?(Y=this.neg().divmod(D,R),R!=="mod"&&(z=Y.div.neg()),R!=="div"&&(G=Y.mod.neg(),O&&G.negative!==0&&G.iadd(D)),{div:z,mod:G}):this.negative===0&&D.negative!==0?(Y=this.divmod(D.neg(),R),R!=="mod"&&(z=Y.div.neg()),{div:z,mod:Y.mod}):(this.negative&D.negative)!==0?(Y=this.neg().divmod(D.neg(),R),R!=="div"&&(G=Y.mod.neg(),O&&G.negative!==0&&G.isub(D)),{div:Y.div,mod:G}):D.length>this.length||this.cmp(D)<0?{div:new r(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new r(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new r(this.modn(D.words[0]))}:this._wordDiv(D,R)},r.prototype.div=function(D){return this.divmod(D,"div",!1).div},r.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},r.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},r.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var O=R.div.negative!==0?R.mod.isub(D):R.mod,z=D.ushrn(1),G=D.andln(1),Y=O.cmp(z);return Y<0||G===1&&Y===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},r.prototype.modn=function(D){i(D<=67108863);for(var R=(1<<26)%D,O=0,z=this.length-1;z>=0;z--)O=(R*O+(this.words[z]|0))%D;return O},r.prototype.idivn=function(D){i(D<=67108863);for(var R=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+R*67108864;this.words[O]=z/D|0,R=z%D}return this.strip()},r.prototype.divn=function(D){return this.clone().idivn(D)},r.prototype.egcd=function(D){i(D.negative===0),i(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new r(1),G=new r(0),Y=new r(0),ee=new r(1),j=0;R.isEven()&&O.isEven();)R.iushrn(1),O.iushrn(1),++j;for(var X=O.clone(),ae=R.clone();!R.isZero();){for(var he=0,K=1;(R.words[0]&K)===0&&he<26;++he,K<<=1);if(he>0)for(R.iushrn(he);he-- >0;)(z.isOdd()||G.isOdd())&&(z.iadd(X),G.isub(ae)),z.iushrn(1),G.iushrn(1);for(var J=0,U=1;(O.words[0]&U)===0&&J<26;++J,U<<=1);if(J>0)for(O.iushrn(J);J-- >0;)(Y.isOdd()||ee.isOdd())&&(Y.iadd(X),ee.isub(ae)),Y.iushrn(1),ee.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(Y),G.isub(ee)):(O.isub(R),Y.isub(z),ee.isub(G))}return{a:Y,b:ee,gcd:O.iushln(j)}},r.prototype._invmp=function(D){i(D.negative===0),i(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new r(1),G=new r(0),Y=O.clone();R.cmpn(1)>0&&O.cmpn(1)>0;){for(var ee=0,j=1;(R.words[0]&j)===0&&ee<26;++ee,j<<=1);if(ee>0)for(R.iushrn(ee);ee-- >0;)z.isOdd()&&z.iadd(Y),z.iushrn(1);for(var X=0,ae=1;(O.words[0]&ae)===0&&X<26;++X,ae<<=1);if(X>0)for(O.iushrn(X);X-- >0;)G.isOdd()&&G.iadd(Y),G.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(G)):(O.isub(R),G.isub(z))}var he;return R.cmpn(1)===0?he=z:he=G,he.cmpn(0)<0&&he.iadd(D),he},r.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),O=D.clone();R.negative=0,O.negative=0;for(var z=0;R.isEven()&&O.isEven();z++)R.iushrn(1),O.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;O.isEven();)O.iushrn(1);var G=R.cmp(O);if(G<0){var Y=R;R=O,O=Y}else if(G===0||O.cmpn(1)===0)break;R.isub(O)}while(!0);return O.iushln(z)},r.prototype.invm=function(D){return this.egcd(D).a.umod(D)},r.prototype.isEven=function(){return(this.words[0]&1)===0},r.prototype.isOdd=function(){return(this.words[0]&1)===1},r.prototype.andln=function(D){return this.words[0]&D},r.prototype.bincn=function(D){i(typeof D=="number");var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return this._expand(O+1),this.words[O]|=z,this;for(var G=z,Y=O;G!==0&&Y<this.length;Y++){var ee=this.words[Y]|0;ee+=G,G=ee>>>26,ee&=67108863,this.words[Y]=ee}return G!==0&&(this.words[Y]=G,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var O;if(this.length>1)O=1;else{R&&(D=-D),i(D<=67108863,"Number is too big");var z=this.words[0]|0;O=z===D?0:z<D?-1:1}return this.negative!==0?-O|0:O},r.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},r.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,O=this.length-1;O>=0;O--){var z=this.words[O]|0,G=D.words[O]|0;if(z!==G){z<G?R=-1:z>G&&(R=1);break}}return R},r.prototype.gtn=function(D){return this.cmpn(D)===1},r.prototype.gt=function(D){return this.cmp(D)===1},r.prototype.gten=function(D){return this.cmpn(D)>=0},r.prototype.gte=function(D){return this.cmp(D)>=0},r.prototype.ltn=function(D){return this.cmpn(D)===-1},r.prototype.lt=function(D){return this.cmp(D)===-1},r.prototype.lten=function(D){return this.cmpn(D)<=0},r.prototype.lte=function(D){return this.cmp(D)<=0},r.prototype.eqn=function(D){return this.cmpn(D)===0},r.prototype.eq=function(D){return this.cmp(D)===0},r.red=function(D){return new P(D)},r.prototype.toRed=function(D){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(D){return this.red=D,this},r.prototype.forceRed=function(D){return i(!this.red,"Already a number in reduction context"),this._forceRed(D)},r.prototype.redAdd=function(D){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},r.prototype.redIAdd=function(D){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},r.prototype.redSub=function(D){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},r.prototype.redISub=function(D){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},r.prototype.redShl=function(D){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},r.prototype.redMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},r.prototype.redIMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(D){return i(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var p={k256:null,p224:null,p192:null,p25519:null};function _(I,D){this.name=I,this.p=new r(D,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var D=new r(null);return D.words=new Array(Math.ceil(this.n/13)),D},_.prototype.ireduce=function(D){var R=D,O;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),O=R.bitLength();while(O>this.n);var z=O<this.n?-1:R.ucmp(this.p);return z===0?(R.words[0]=0,R.length=1):z>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},_.prototype.split=function(D,R){D.iushrn(this.n,0,R)},_.prototype.imulK=function(D){return D.imul(this.k)};function h(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(h,_),h.prototype.split=function(D,R){for(var O=4194303,z=Math.min(D.length,9),G=0;G<z;G++)R.words[G]=D.words[G];if(R.length=z,D.length<=9){D.words[0]=0,D.length=1;return}var Y=D.words[9];for(R.words[R.length++]=Y&O,G=10;G<D.length;G++){var ee=D.words[G]|0;D.words[G-10]=(ee&O)<<4|Y>>>22,Y=ee}Y>>>=22,D.words[G-10]=Y,Y===0&&D.length>10?D.length-=10:D.length-=9},h.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,O=0;O<D.length;O++){var z=D.words[O]|0;R+=z*977,D.words[O]=R&67108863,R=z*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,_);function E(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(E,_);function S(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(S,_),S.prototype.imulK=function(D){for(var R=0,O=0;O<D.length;O++){var z=(D.words[O]|0)*19+R,G=z&67108863;z>>>=26,D.words[O]=G,R=z}return R!==0&&(D.words[D.length++]=R),D},r._prime=function(D){if(p[D])return p[D];var R;if(D==="k256")R=new h;else if(D==="p224")R=new L;else if(D==="p192")R=new E;else if(D==="p25519")R=new S;else throw new Error("Unknown prime "+D);return p[D]=R,R};function P(I){if(typeof I=="string"){var D=r._prime(I);this.m=D.p,this.prime=D}else i(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}P.prototype._verify1=function(D){i(D.negative===0,"red works only with positives"),i(D.red,"red works only with red numbers")},P.prototype._verify2=function(D,R){i((D.negative|R.negative)===0,"red works only with positives"),i(D.red&&D.red===R.red,"red works only with red numbers")},P.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},P.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},P.prototype.add=function(D,R){this._verify2(D,R);var O=D.add(R);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},P.prototype.iadd=function(D,R){this._verify2(D,R);var O=D.iadd(R);return O.cmp(this.m)>=0&&O.isub(this.m),O},P.prototype.sub=function(D,R){this._verify2(D,R);var O=D.sub(R);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},P.prototype.isub=function(D,R){this._verify2(D,R);var O=D.isub(R);return O.cmpn(0)<0&&O.iadd(this.m),O},P.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},P.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},P.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},P.prototype.isqr=function(D){return this.imul(D,D.clone())},P.prototype.sqr=function(D){return this.mul(D,D)},P.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(i(R%2===1),R===3){var O=this.m.add(new r(1)).iushrn(2);return this.pow(D,O)}for(var z=this.m.subn(1),G=0;!z.isZero()&&z.andln(1)===0;)G++,z.iushrn(1);i(!z.isZero());var Y=new r(1).toRed(this),ee=Y.redNeg(),j=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new r(2*X*X).toRed(this);this.pow(X,j).cmp(ee)!==0;)X.redIAdd(ee);for(var ae=this.pow(X,z),he=this.pow(D,z.addn(1).iushrn(1)),K=this.pow(D,z),J=G;K.cmp(Y)!==0;){for(var U=K,H=0;U.cmp(Y)!==0;H++)U=U.redSqr();i(H<J);var q=this.pow(ae,new r(1).iushln(J-H-1));he=he.redMul(q),ae=q.redSqr(),K=K.redMul(ae),J=H}return he},P.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(D,R){if(R.isZero())return new r(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var O=4,z=new Array(1<<O);z[0]=new r(1).toRed(this),z[1]=D;for(var G=2;G<z.length;G++)z[G]=this.mul(z[G-1],D);var Y=z[0],ee=0,j=0,X=R.bitLength()%26;for(X===0&&(X=26),G=R.length-1;G>=0;G--){for(var ae=R.words[G],he=X-1;he>=0;he--){var K=ae>>he&1;if(Y!==z[0]&&(Y=this.sqr(Y)),K===0&&ee===0){j=0;continue}ee<<=1,ee|=K,j++,!(j!==O&&(G!==0||he!==0))&&(Y=this.mul(Y,z[ee]),j=0,ee=0)}X=26}return Y},P.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},P.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},r.mont=function(D){return new F(D)};function F(I){P.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(F,P),F.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},F.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},F.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var O=D.imul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=O.isub(z).iushrn(this.shift),Y=G;return G.cmp(this.m)>=0?Y=G.isub(this.m):G.cmpn(0)<0&&(Y=G.iadd(this.m)),Y._forceRed(this)},F.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new r(0)._forceRed(this);var O=D.mul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=O.isub(z).iushrn(this.shift),Y=G;return G.cmp(this.m)>=0?Y=G.isub(this.m):G.cmpn(0)<0&&(Y=G.iadd(this.m)),Y._forceRed(this)},F.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof A>"u"||A,this)},{buffer:2}],34:[function(c,A,T){A.exports=e;function e(a){var i,n,r,v=a.length,s=0;for(i=0;i<v;++i)s+=a[i].length;var o=new Array(s),b=0;for(i=0;i<v;++i){var g=a[i],d=g.length;for(n=0;n<d;++n){var f=o[b++]=new Array(d-1),m=0;for(r=0;r<d;++r)r!==n&&(f[m++]=g[r]);if(n&1){var l=f[1];f[1]=f[0],f[0]=l}}}return o}},{}],35:[function(c,A,T){A.exports=d;var e=c("typedarray-pool"),a=c("./lib/sweep"),i=c("./lib/intersect");function n(f,m){for(var l=0;l<f;++l)if(!(m[l]<=m[l+f]))return!0;return!1}function r(f,m,l,x){for(var u=0,M=0,w=0,p=f.length;w<p;++w){var _=f[w];if(!n(m,_)){for(var h=0;h<2*m;++h)l[u++]=_[h];x[M++]=w}}return M}function v(f,m,l,x){var u=f.length,M=m.length;if(!(u<=0||M<=0)){var w=f[0].length>>>1;if(!(w<=0)){var p,_=e.mallocDouble(2*w*u),h=e.mallocInt32(u);if(u=r(f,w,_,h),u>0){if(w===1&&x)a.init(u),p=a.sweepComplete(w,l,0,u,_,h,0,u,_,h);else{var L=e.mallocDouble(2*w*M),E=e.mallocInt32(M);M=r(m,w,L,E),M>0&&(a.init(u+M),w===1?p=a.sweepBipartite(w,l,0,u,_,h,0,M,L,E):p=i(w,l,x,u,_,h,M,L,E),e.free(L),e.free(E))}e.free(_),e.free(h)}return p}}}var s;function o(f,m){s.push([f,m])}function b(f){return s=[],v(f,f,o,!0),s}function g(f,m){return s=[],v(f,m,o,!1),s}function d(f,m,l){switch(arguments.length){case 1:return b(f);case 2:return typeof m=="function"?v(f,f,m,!0):g(f,m);case 3:return v(f,m,l,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(c,A,T){function e(){function n(s,o,b,g,d,f,m,l,x,u,M){for(var w=2*s,p=g,_=w*g;p<d;++p,_+=w){var h=f[o+_],L=f[o+_+s],E=m[p];e:for(var S=l,P=w*l;S<x;++S,P+=w){var F=u[o+P],I=u[o+P+s],D=M[S];if(!(I<h||L<F)){for(var R=o+1;R<s;++R){var O=f[R+_],z=f[R+s+_],G=u[R+P],Y=u[R+s+P];if(z<G||Y<O)continue e}var ee=b(E,D);if(ee!==void 0)return ee}}}}function r(s,o,b,g,d,f,m,l,x,u,M){for(var w=2*s,p=l,_=w*l;p<x;++p,_+=w){var h=u[o+_],L=u[o+_+s],E=M[p];e:for(var S=g,P=w*g;S<d;++S,P+=w){var F=f[o+P],I=f[o+P+s],D=m[S];if(!(L<F||I<h)){for(var R=o+1;R<s;++R){var O=f[R+P],z=f[R+s+P],G=u[R+_],Y=u[R+s+_];if(z<G||Y<O)continue e}var ee=b(D,E);if(ee!==void 0)return ee}}}}function v(s,o,b,g,d,f,m,l,x,u,M){return d-g>x-l?n(s,o,b,g,d,f,m,l,x,u,M):r(s,o,b,g,d,f,m,l,x,u,M)}return v}function a(){function n(b,g,d,f,m,l,x,u,M,w,p){for(var _=2*b,h=f,L=_*f;h<m;++h,L+=_){var E=l[g+L],S=l[g+L+b],P=x[h];e:for(var F=u,I=_*u;F<M;++F,I+=_){var D=w[g+I],R=p[F];if(!(D<=E||S<D)){for(var O=g+1;O<b;++O){var z=l[O+L],G=l[O+b+L],Y=w[O+I],ee=w[O+b+I];if(G<Y||ee<z)continue e}var j=d(R,P);if(j!==void 0)return j}}}}function r(b,g,d,f,m,l,x,u,M,w,p){for(var _=2*b,h=f,L=_*f;h<m;++h,L+=_){var E=l[g+L],S=l[g+L+b],P=x[h];e:for(var F=u,I=_*u;F<M;++F,I+=_){var D=w[g+I],R=p[F];if(!(D<E||S<D)){for(var O=g+1;O<b;++O){var z=l[O+L],G=l[O+b+L],Y=w[O+I],ee=w[O+b+I];if(G<Y||ee<z)continue e}var j=d(P,R);if(j!==void 0)return j}}}}function v(b,g,d,f,m,l,x,u,M,w,p){for(var _=2*b,h=u,L=_*u;h<M;++h,L+=_){var E=w[g+L],S=p[h];e:for(var P=f,F=_*f;P<m;++P,F+=_){var I=l[g+F],D=l[g+F+b],R=x[P];if(!(E<=I||D<E)){for(var O=g+1;O<b;++O){var z=l[O+F],G=l[O+b+F],Y=w[O+L],ee=w[O+b+L];if(G<Y||ee<z)continue e}var j=d(S,R);if(j!==void 0)return j}}}}function s(b,g,d,f,m,l,x,u,M,w,p){for(var _=2*b,h=u,L=_*u;h<M;++h,L+=_){var E=w[g+L],S=p[h];e:for(var P=f,F=_*f;P<m;++P,F+=_){var I=l[g+F],D=l[g+F+b],R=x[P];if(!(E<I||D<E)){for(var O=g+1;O<b;++O){var z=l[O+F],G=l[O+b+F],Y=w[O+L],ee=w[O+b+L];if(G<Y||ee<z)continue e}var j=d(R,S);if(j!==void 0)return j}}}}function o(b,g,d,f,m,l,x,u,M,w,p,_){return l-m>w-M?f?n(b,g,d,m,l,x,u,M,w,p,_):r(b,g,d,m,l,x,u,M,w,p,_):f?v(b,g,d,m,l,x,u,M,w,p,_):s(b,g,d,m,l,x,u,M,w,p,_)}return o}function i(n){return n?e():a()}T.partial=i(!1),T.full=i(!0)},{}],37:[function(c,A,T){A.exports=I;var e=c("typedarray-pool"),a=c("bit-twiddle"),i=c("./brute"),n=i.partial,r=i.full,v=c("./sweep"),s=c("./median"),o=c("./partition"),b=128,g=1<<22,d=1<<22,f=o("!(lo>=p0)&&!(p1>=hi)"),m=o("lo===p0"),l=o("lo<p0"),x=o("hi<=p0"),u=o("lo<=p0&&p0<=hi"),M=o("lo<p0&&p0<=hi"),w=6,p=2,_=1024,h=e.mallocInt32(_),L=e.mallocDouble(_);function E(D,R){var O=8*a.log2(R+1)*(D+1)|0,z=a.nextPow2(w*O);h.length<z&&(e.free(h),h=e.mallocInt32(z));var G=a.nextPow2(p*O);L.length<G&&(e.free(L),L=e.mallocDouble(G))}function S(D,R,O,z,G,Y,ee,j,X){var ae=w*D;h[ae]=R,h[ae+1]=O,h[ae+2]=z,h[ae+3]=G,h[ae+4]=Y,h[ae+5]=ee;var he=p*D;L[he]=j,L[he+1]=X}function P(D,R,O,z,G,Y,ee,j,X,ae,he){var K=2*D,J=X*K,U=ae[J+R];e:for(var H=G,q=G*K;H<Y;++H,q+=K){var re=ee[q+R],Z=ee[q+R+D];if(!(U<re||Z<U)&&!(z&&U===re)){for(var Q=j[H],ie=R+1;ie<D;++ie){var re=ee[q+ie],Z=ee[q+ie+D],oe=ae[J+ie],ne=ae[J+ie+D];if(Z<oe||ne<re)continue e}var le;if(z?le=O(he,Q):le=O(Q,he),le!==void 0)return le}}}function F(D,R,O,z,G,Y,ee,j,X,ae){var he=2*D,K=j*he,J=X[K+R];e:for(var U=z,H=z*he;U<G;++U,H+=he){var q=ee[U];if(q!==ae){var re=Y[H+R],Z=Y[H+R+D];if(!(J<re||Z<J)){for(var Q=R+1;Q<D;++Q){var re=Y[H+Q],Z=Y[H+Q+D],ie=X[K+Q],oe=X[K+Q+D];if(Z<ie||oe<re)continue e}var ne=O(q,ae);if(ne!==void 0)return ne}}}}function I(D,R,O,z,G,Y,ee,j,X){E(D,z+ee);var ae=0,he=2*D,K;for(S(ae++,0,0,z,0,ee,O?16:0,-1/0,1/0),O||S(ae++,0,0,ee,0,z,1,-1/0,1/0);ae>0;){ae-=1;var J=ae*w,U=h[J],H=h[J+1],q=h[J+2],re=h[J+3],Z=h[J+4],Q=h[J+5],ie=ae*p,oe=L[ie],ne=L[ie+1],le=Q&1,_e=!!(Q&16),fe=G,ye=Y,xe=j,me=X;if(le&&(fe=j,ye=X,xe=G,me=Y),!(Q&2&&(q=l(D,U,H,q,fe,ye,ne),H>=q))&&!(Q&4&&(H=x(D,U,H,q,fe,ye,oe),H>=q))){var be=q-H,ke=Z-re;if(_e){if(D*be*(be+ke)<d){if(K=v.scanComplete(D,U,R,H,q,fe,ye,re,Z,xe,me),K!==void 0)return K;continue}}else if(D*Math.min(be,ke)<b){if(K=n(D,U,R,le,H,q,fe,ye,re,Z,xe,me),K!==void 0)return K;continue}else if(D*be*ke<g){if(K=v.scanBipartite(D,U,R,le,H,q,fe,ye,re,Z,xe,me),K!==void 0)return K;continue}var De=f(D,U,H,q,fe,ye,oe,ne);if(H<De)if(D*(De-H)<b){if(K=r(D,U+1,R,H,De,fe,ye,re,Z,xe,me),K!==void 0)return K}else if(U===D-2){if(le?K=v.sweepBipartite(D,R,re,Z,xe,me,H,De,fe,ye):K=v.sweepBipartite(D,R,H,De,fe,ye,re,Z,xe,me),K!==void 0)return K}else S(ae++,U+1,H,De,re,Z,le,-1/0,1/0),S(ae++,U+1,re,Z,H,De,le^1,-1/0,1/0);if(De<q){var He=s(D,U,re,Z,xe,me),Ae=xe[he*He+U],Le=m(D,U,He,Z,xe,me,Ae);if(Le<Z&&S(ae++,U,De,q,Le,Z,(le|4)+(_e?16:0),Ae,ne),re<He&&S(ae++,U,De,q,re,He,(le|2)+(_e?16:0),oe,Ae),He+1===Le){if(_e?K=F(D,U,R,De,q,fe,ye,He,xe,me[He]):K=P(D,U,R,le,De,q,fe,ye,He,xe,me[He]),K!==void 0)return K}else if(He<Le){var Ze;if(_e){if(Ze=u(D,U,De,q,fe,ye,Ae),De<Ze){var We=m(D,U,De,Ze,fe,ye,Ae);if(U===D-2){if(De<We&&(K=v.sweepComplete(D,R,De,We,fe,ye,He,Le,xe,me),K!==void 0)||We<Ze&&(K=v.sweepBipartite(D,R,We,Ze,fe,ye,He,Le,xe,me),K!==void 0))return K}else De<We&&S(ae++,U+1,De,We,He,Le,16,-1/0,1/0),We<Ze&&(S(ae++,U+1,We,Ze,He,Le,0,-1/0,1/0),S(ae++,U+1,He,Le,We,Ze,1,-1/0,1/0))}}else le?Ze=M(D,U,De,q,fe,ye,Ae):Ze=u(D,U,De,q,fe,ye,Ae),De<Ze&&(U===D-2?le?K=v.sweepBipartite(D,R,He,Le,xe,me,De,Ze,fe,ye):K=v.sweepBipartite(D,R,De,Ze,fe,ye,He,Le,xe,me):(S(ae++,U+1,De,Ze,He,Le,le,-1/0,1/0),S(ae++,U+1,He,Le,De,Ze,le^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(c,A,T){A.exports=r;var e=c("./partition"),a=e("lo<p0"),i=8;function n(v,s,o,b,g,d){for(var f=2*v,m=f*(o+1)+s,l=o+1;l<b;++l,m+=f)for(var x=g[m],u=l,M=f*(l-1);u>o&&g[M+s]>x;--u,M-=f){for(var w=M,p=M+f,_=0;_<f;++_,++w,++p){var h=g[w];g[w]=g[p],g[p]=h}var L=d[u];d[u]=d[u-1],d[u-1]=L}}function r(v,s,o,b,g,d){if(b<=o+1)return o;for(var f=o,m=b,l=b+o>>>1,x=2*v,u=l,M=g[x*l+s];f<m;){if(m-f<i){n(v,s,f,m,g,d),M=g[x*l+s];break}var w=m-f,p=Math.random()*w+f|0,_=g[x*p+s],h=Math.random()*w+f|0,L=g[x*h+s],E=Math.random()*w+f|0,S=g[x*E+s];_<=L?S>=L?(u=h,M=L):_>=S?(u=p,M=_):(u=E,M=S):L>=S?(u=h,M=L):S>=_?(u=p,M=_):(u=E,M=S);for(var I=x*(m-1),D=x*u,P=0;P<x;++P,++I,++D){var F=g[I];g[I]=g[D],g[D]=F}var R=d[m-1];d[m-1]=d[u],d[u]=R,u=a(v,s,f,m-1,g,d,M);for(var I=x*(m-1),D=x*u,P=0;P<x;++P,++I,++D){var F=g[I];g[I]=g[D],g[D]=F}var R=d[m-1];if(d[m-1]=d[u],d[u]=R,l<u){for(m=u-1;f<m&&g[x*(m-1)+s]===M;)m-=1;m+=1}else if(u<l)for(f=u+1;f<m&&g[x*f+s]===M;)f+=1;else break}return a(v,s,o,l,g,d,g[x*l+s])}},{"./partition":39}],39:[function(c,A,T){A.exports=a;var e={"lo===p0":i,"lo<p0":n,"lo<=p0":r,"hi<=p0":v,"lo<p0&&p0<=hi":o,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":b};function a(g){return e[g]}function i(g,d,f,m,l,x,u){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;m>E;++E,w+=M){var S=l[w+h];if(S===u)if(_===E)_+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[w+P];l[w+P]=l[p],l[p++]=F}var I=x[E];x[E]=x[_],x[_++]=I}}return _}function n(g,d,f,m,l,x,u){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;m>E;++E,w+=M){var S=l[w+h];if(S<u)if(_===E)_+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[w+P];l[w+P]=l[p],l[p++]=F}var I=x[E];x[E]=x[_],x[_++]=I}}return _}function r(g,d,f,m,l,x,u){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;m>E;++E,w+=M){var S=l[w+L];if(S<=u)if(_===E)_+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[w+P];l[w+P]=l[p],l[p++]=F}var I=x[E];x[E]=x[_],x[_++]=I}}return _}function v(g,d,f,m,l,x,u){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;m>E;++E,w+=M){var S=l[w+L];if(S<=u)if(_===E)_+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[w+P];l[w+P]=l[p],l[p++]=F}var I=x[E];x[E]=x[_],x[_++]=I}}return _}function s(g,d,f,m,l,x,u){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;m>E;++E,w+=M){var S=l[w+h],P=l[w+L];if(S<=u&&u<=P)if(_===E)_+=1,p+=M;else{for(var F=0;M>F;++F){var I=l[w+F];l[w+F]=l[p],l[p++]=I}var D=x[E];x[E]=x[_],x[_++]=D}}return _}function o(g,d,f,m,l,x,u){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;m>E;++E,w+=M){var S=l[w+h],P=l[w+L];if(S<u&&u<=P)if(_===E)_+=1,p+=M;else{for(var F=0;M>F;++F){var I=l[w+F];l[w+F]=l[p],l[p++]=I}var D=x[E];x[E]=x[_],x[_++]=D}}return _}function b(g,d,f,m,l,x,u,M){for(var w=2*g,p=w*f,_=p,h=f,L=d,E=g+d,S=f;m>S;++S,p+=w){var P=l[p+L],F=l[p+E];if(!(P>=u)&&!(M>=F))if(h===S)h+=1,_+=w;else{for(var I=0;w>I;++I){var D=l[p+I];l[p+I]=l[_],l[_++]=D}var R=x[S];x[S]=x[h],x[h++]=R}}return h}},{}],40:[function(c,A,T){A.exports=a;var e=32;function a(d,f){f<=4*e?i(0,f-1,d):g(0,f-1,d)}function i(d,f,m){for(var l=2*(d+1),x=d+1;x<=f;++x){for(var u=m[l++],M=m[l++],w=x,p=l-2;w-- >d;){var _=m[p-2],h=m[p-1];if(_<u)break;if(_===u&&h<M)break;m[p]=_,m[p+1]=h,p-=2}m[p]=u,m[p+1]=M}}function n(d,f,m){d*=2,f*=2;var l=m[d],x=m[d+1];m[d]=m[f],m[d+1]=m[f+1],m[f]=l,m[f+1]=x}function r(d,f,m){d*=2,f*=2,m[d]=m[f],m[d+1]=m[f+1]}function v(d,f,m,l){d*=2,f*=2,m*=2;var x=l[d],u=l[d+1];l[d]=l[f],l[d+1]=l[f+1],l[f]=l[m],l[f+1]=l[m+1],l[m]=x,l[m+1]=u}function s(d,f,m,l,x){d*=2,f*=2,x[d]=x[f],x[f]=m,x[d+1]=x[f+1],x[f+1]=l}function o(d,f,m){d*=2,f*=2;var l=m[d],x=m[f];return l<x?!1:l===x?m[d+1]>m[f+1]:!0}function b(d,f,m,l){d*=2;var x=l[d];return x<f?!0:x===f?l[d+1]<m:!1}function g(d,f,m){var l=(f-d+1)/6|0,x=d+l,u=f-l,M=d+f>>1,w=M-l,p=M+l,_=x,h=w,L=M,E=p,S=u,P=d+1,F=f-1,I=0;o(_,h,m)&&(I=_,_=h,h=I),o(E,S,m)&&(I=E,E=S,S=I),o(_,L,m)&&(I=_,_=L,L=I),o(h,L,m)&&(I=h,h=L,L=I),o(_,E,m)&&(I=_,_=E,E=I),o(L,E,m)&&(I=L,L=E,E=I),o(h,S,m)&&(I=h,h=S,S=I),o(h,L,m)&&(I=h,h=L,L=I),o(E,S,m)&&(I=E,E=S,S=I);for(var D=m[2*h],R=m[2*h+1],O=m[2*E],z=m[2*E+1],G=2*_,Y=2*L,ee=2*S,j=2*x,X=2*M,ae=2*u,he=0;he<2;++he){var K=m[G+he],J=m[Y+he],U=m[ee+he];m[j+he]=K,m[X+he]=J,m[ae+he]=U}r(w,d,m),r(p,f,m);for(var H=P;H<=F;++H)if(b(H,D,R,m))H!==P&&n(H,P,m),++P;else if(!b(H,O,z,m))for(;;)if(b(F,O,z,m)){b(F,D,R,m)?(v(H,P,F,m),++P,--F):(n(H,F,m),--F);break}else{if(--F<H)break;continue}s(d,P-1,D,R,m),s(f,F+1,O,z,m),P-2-d<=e?i(d,P-2,m):g(d,P-2,m),f-(F+2)<=e?i(F+2,f,m):g(F+2,f,m),F-P<=e?i(P,F,m):g(P,F,m)}},{}],41:[function(c,A,T){A.exports={init:m,sweepBipartite:u,sweepComplete:M,scanBipartite:w,scanComplete:p};var e=c("typedarray-pool"),a=c("bit-twiddle"),i=c("./sort"),n=1<<28,r=1024,v=e.mallocInt32(r),s=e.mallocInt32(r),o=e.mallocInt32(r),b=e.mallocInt32(r),g=e.mallocInt32(r),d=e.mallocInt32(r),f=e.mallocDouble(r*8);function m(_){var h=a.nextPow2(_);v.length<h&&(e.free(v),v=e.mallocInt32(h)),s.length<h&&(e.free(s),s=e.mallocInt32(h)),o.length<h&&(e.free(o),o=e.mallocInt32(h)),b.length<h&&(e.free(b),b=e.mallocInt32(h)),g.length<h&&(e.free(g),g=e.mallocInt32(h)),d.length<h&&(e.free(d),d=e.mallocInt32(h));var L=8*h;f.length<L&&(e.free(f),f=e.mallocDouble(L))}function l(_,h,L,E){var S=h[E],P=_[L-1];_[S]=P,h[P]=S}function x(_,h,L,E){_[L]=E,h[E]=L}function u(_,h,L,E,S,P,F,I,D,R){for(var O=0,z=2*_,G=_-1,Y=z-1,ee=L;ee<E;++ee){var j=P[ee],X=z*ee;f[O++]=S[X+G],f[O++]=-(j+1),f[O++]=S[X+Y],f[O++]=j}for(var ee=F;ee<I;++ee){var j=R[ee]+n,ae=z*ee;f[O++]=D[ae+G],f[O++]=-j,f[O++]=D[ae+Y],f[O++]=j}var he=O>>>1;i(f,he);for(var K=0,J=0,ee=0;ee<he;++ee){var U=f[2*ee+1]|0;if(U>=n)U=U-n|0,l(o,b,J--,U);else if(U>=0)l(v,s,K--,U);else if(U<=-n){U=-U-n|0;for(var H=0;H<K;++H){var q=h(v[H],U);if(q!==void 0)return q}x(o,b,J++,U)}else{U=-U-1|0;for(var H=0;H<J;++H){var q=h(U,o[H]);if(q!==void 0)return q}x(v,s,K++,U)}}}function M(_,h,L,E,S,P,F,I,D,R){for(var O=0,z=2*_,G=_-1,Y=z-1,ee=L;ee<E;++ee){var j=P[ee]+1<<1,X=z*ee;f[O++]=S[X+G],f[O++]=-j,f[O++]=S[X+Y],f[O++]=j}for(var ee=F;ee<I;++ee){var j=R[ee]+1<<1,ae=z*ee;f[O++]=D[ae+G],f[O++]=-j|1,f[O++]=D[ae+Y],f[O++]=j|1}var he=O>>>1;i(f,he);for(var K=0,J=0,U=0,ee=0;ee<he;++ee){var H=f[2*ee+1]|0,q=H&1;if(ee<he-1&&H>>1===f[2*ee+3]>>1&&(q=2,ee+=1),H<0){for(var re=-(H>>1)-1,Z=0;Z<U;++Z){var Q=h(g[Z],re);if(Q!==void 0)return Q}if(q!==0)for(var Z=0;Z<K;++Z){var Q=h(v[Z],re);if(Q!==void 0)return Q}if(q!==1)for(var Z=0;Z<J;++Z){var Q=h(o[Z],re);if(Q!==void 0)return Q}q===0?x(v,s,K++,re):q===1?x(o,b,J++,re):q===2&&x(g,d,U++,re)}else{var re=(H>>1)-1;q===0?l(v,s,K--,re):q===1?l(o,b,J--,re):q===2&&l(g,d,U--,re)}}}function w(_,h,L,E,S,P,F,I,D,R,O,z){var G=0,Y=2*_,ee=h,j=h+_,X=1,ae=1;E?ae=n:X=n;for(var he=S;he<P;++he){var K=he+X,J=Y*he;f[G++]=F[J+ee],f[G++]=-K,f[G++]=F[J+j],f[G++]=K}for(var he=D;he<R;++he){var K=he+ae,U=Y*he;f[G++]=O[U+ee],f[G++]=-K}var H=G>>>1;i(f,H);for(var q=0,he=0;he<H;++he){var re=f[2*he+1]|0;if(re<0){var K=-re,Z=!1;if(K>=n?(Z=!E,K-=n):(Z=!!E,K-=1),Z)x(v,s,q++,K);else{var Q=z[K],ie=Y*K,oe=O[ie+h+1],ne=O[ie+h+1+_];e:for(var le=0;le<q;++le){var _e=v[le],fe=Y*_e;if(!(ne<F[fe+h+1]||F[fe+h+1+_]<oe)){for(var ye=h+2;ye<_;++ye)if(O[ie+ye+_]<F[fe+ye]||F[fe+ye+_]<O[ie+ye])continue e;var xe=I[_e],me;if(E?me=L(Q,xe):me=L(xe,Q),me!==void 0)return me}}}}else l(v,s,q--,re-X)}}function p(_,h,L,E,S,P,F,I,D,R,O){for(var z=0,G=2*_,Y=h,ee=h+_,j=E;j<S;++j){var X=j+n,ae=G*j;f[z++]=P[ae+Y],f[z++]=-X,f[z++]=P[ae+ee],f[z++]=X}for(var j=I;j<D;++j){var X=j+1,he=G*j;f[z++]=R[he+Y],f[z++]=-X}var K=z>>>1;i(f,K);for(var J=0,j=0;j<K;++j){var U=f[2*j+1]|0;if(U<0){var X=-U;if(X>=n)v[J++]=X-n;else{X-=1;var H=O[X],q=G*X,re=R[q+h+1],Z=R[q+h+1+_];e:for(var Q=0;Q<J;++Q){var ie=v[Q],oe=F[ie];if(oe===H)break;var ne=G*ie;if(!(Z<P[ne+h+1]||P[ne+h+1+_]<re)){for(var le=h+2;le<_;++le)if(R[q+le+_]<P[ne+le]||P[ne+le+_]<R[q+le])continue e;var _e=L(oe,H);if(_e!==void 0)return _e}}}}else{for(var X=U-n,Q=J-1;Q>=0;--Q)if(v[Q]===X){for(var le=Q+1;le<J;++le)v[le-1]=v[le];break}--J}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(c,A,T){var e=c("./lib/monotone"),a=c("./lib/triangulation"),i=c("./lib/delaunay"),n=c("./lib/filter");A.exports=b;function r(g){return[Math.min(g[0],g[1]),Math.max(g[0],g[1])]}function v(g,d){return g[0]-d[0]||g[1]-d[1]}function s(g){return g.map(r).sort(v)}function o(g,d,f){return d in g?g[d]:f}function b(g,d,f){Array.isArray(d)?(f=f||{},d=d||[]):(f=d||{},d=[]);var m=!!o(f,"delaunay",!0),l=!!o(f,"interior",!0),x=!!o(f,"exterior",!0),u=!!o(f,"infinity",!1);if(!l&&!x||g.length===0)return[];var M=e(g,d);if(m||l!==x||u){for(var w=a(g.length,s(d)),p=0;p<M.length;++p){var _=M[p];w.addTriangle(_[0],_[1],_[2])}return m&&i(g,w),x?l?u?n(w,0,u):w.cells():n(w,1,u):n(w,-1)}else return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(c,A,T){var e=c("robust-in-sphere")[4];c("binary-search-bounds"),A.exports=i;function a(n,r,v,s,o,b){var g=r.opposite(s,o);if(!(g<0)){if(o<s){var d=s;s=o,o=d,d=b,b=g,g=d}r.isConstraint(s,o)||e(n[s],n[o],n[b],n[g])<0&&v.push(s,o)}}function i(n,r){for(var v=[],s=n.length,o=r.stars,b=0;b<s;++b)for(var g=o[b],d=1;d<g.length;d+=2){var f=g[d];if(!(f<b)&&!r.isConstraint(b,f)){for(var m=g[d-1],l=-1,x=1;x<g.length;x+=2)if(g[x-1]===f){l=g[x];break}l<0||e(n[b],n[f],n[m],n[l])<0&&v.push(b,f)}}for(;v.length>0;){for(var f=v.pop(),b=v.pop(),m=-1,l=-1,g=o[b],u=1;u<g.length;u+=2){var M=g[u-1],w=g[u];M===f?l=w:w===f&&(m=M)}m<0||l<0||e(n[b],n[f],n[m],n[l])>=0||(r.flip(b,f),a(n,r,v,m,b,l),a(n,r,v,b,l,m),a(n,r,v,l,f,m),a(n,r,v,f,m,l))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(c,A,T){var e=c("binary-search-bounds");A.exports=s;function a(o,b,g,d,f,m,l){this.cells=o,this.neighbor=b,this.flags=d,this.constraint=g,this.active=f,this.next=m,this.boundary=l}var i=a.prototype;function n(o,b){return o[0]-b[0]||o[1]-b[1]||o[2]-b[2]}i.locate=function(){var o=[0,0,0];return function(b,g,d){var f=b,m=g,l=d;return g<d?g<b&&(f=g,m=d,l=b):d<b&&(f=d,m=b,l=g),f<0?-1:(o[0]=f,o[1]=m,o[2]=l,e.eq(this.cells,o,n))}}();function r(o,b){for(var g=o.cells(),d=g.length,f=0;f<d;++f){var m=g[f],l=m[0],x=m[1],u=m[2];x<u?x<l&&(m[0]=x,m[1]=u,m[2]=l):u<l&&(m[0]=u,m[1]=l,m[2]=x)}g.sort(n);for(var M=new Array(d),f=0;f<M.length;++f)M[f]=0;var w=[],p=[],_=new Array(3*d),h=new Array(3*d),L=null;b&&(L=[]);for(var E=new a(g,_,h,M,w,p,L),f=0;f<d;++f)for(var m=g[f],S=0;S<3;++S){var l=m[S],x=m[(S+1)%3],P=_[3*f+S]=E.locate(x,l,o.opposite(x,l)),F=h[3*f+S]=o.isConstraint(l,x);P<0&&(F?p.push(f):(w.push(f),M[f]=1),b&&L.push([x,l,-1]))}return E}function v(o,b,g){for(var d=0,f=0;f<o.length;++f)b[f]===g&&(o[d++]=o[f]);return o.length=d,o}function s(o,b,g){var d=r(o,g);if(b===0)return g?d.cells.concat(d.boundary):d.cells;for(var f=1,m=d.active,l=d.next,x=d.flags,u=d.cells,M=d.constraint,w=d.neighbor;m.length>0||l.length>0;){for(;m.length>0;){var p=m.pop();if(x[p]!==-f){x[p]=f,u[p];for(var _=0;_<3;++_){var h=w[3*p+_];h>=0&&x[h]===0&&(M[3*p+_]?l.push(h):(m.push(h),x[h]=f))}}}var L=l;l=m,m=L,l.length=0,f=-f}var E=v(u,x,b);return g?E.concat(d.boundary):E}},{"binary-search-bounds":31}],45:[function(c,A,T){var e=c("binary-search-bounds"),a=c("robust-orientation")[3],i=0,n=1,r=2;A.exports=l;function v(x,u,M,w,p){this.a=x,this.b=u,this.idx=M,this.lowerIds=w,this.upperIds=p}function s(x,u,M,w){this.a=x,this.b=u,this.type=M,this.idx=w}function o(x,u){var M=x.a[0]-u.a[0]||x.a[1]-u.a[1]||x.type-u.type;return M||x.type!==i&&(M=a(x.a,x.b,u.b),M)?M:x.idx-u.idx}function b(x,u){return a(x.a,x.b,u)}function g(x,u,M,w,p){for(var _=e.lt(u,w,b),h=e.gt(u,w,b),L=_;L<h;++L){for(var E=u[L],S=E.lowerIds,F=S.length;F>1&&a(M[S[F-2]],M[S[F-1]],w)>0;)x.push([S[F-1],S[F-2],p]),F-=1;S.length=F,S.push(p);for(var P=E.upperIds,F=P.length;F>1&&a(M[P[F-2]],M[P[F-1]],w)<0;)x.push([P[F-2],P[F-1],p]),F-=1;P.length=F,P.push(p)}}function d(x,u){var M;return x.a[0]<u.a[0]?M=a(x.a,x.b,u.a):M=a(u.b,u.a,x.a),M||(u.b[0]<x.b[0]?M=a(x.a,x.b,u.b):M=a(u.b,u.a,x.b),M||x.idx-u.idx)}function f(x,u,M){var w=e.le(x,M,d),p=x[w],_=p.upperIds,h=_[_.length-1];p.upperIds=[h],x.splice(w+1,0,new v(M.a,M.b,M.idx,[h],_))}function m(x,u,M){var w=M.a;M.a=M.b,M.b=w;var p=e.eq(x,M,d),_=x[p],h=x[p-1];h.upperIds=_.upperIds,x.splice(p,1)}function l(x,u){for(var M=x.length,w=u.length,p=[],_=0;_<M;++_)p.push(new s(x[_],null,i,_));for(var _=0;_<w;++_){var h=u[_],L=x[h[0]],E=x[h[1]];L[0]<E[0]?p.push(new s(L,E,r,_),new s(E,L,n,_)):L[0]>E[0]&&p.push(new s(E,L,r,_),new s(L,E,n,_))}p.sort(o);for(var S=p[0].a[0]-(1+Math.abs(p[0].a[0]))*Math.pow(2,-52),P=[new v([S,1],[S,0],-1,[],[])],F=[],_=0,I=p.length;_<I;++_){var D=p[_],R=D.type;R===i?g(F,P,x,D.a,D.idx):R===r?f(P,x,D):m(P,x,D)}return F}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(c,A,T){var e=c("binary-search-bounds");A.exports=r;function a(v,s){this.stars=v,this.edges=s}var i=a.prototype;function n(v,s,o){for(var b=1,g=v.length;b<g;b+=2)if(v[b-1]===s&&v[b]===o){v[b-1]=v[g-2],v[b]=v[g-1],v.length=g-2;return}}i.isConstraint=function(){var v=[0,0];function s(o,b){return o[0]-b[0]||o[1]-b[1]}return function(o,b){return v[0]=Math.min(o,b),v[1]=Math.max(o,b),e.eq(this.edges,v,s)>=0}}(),i.removeTriangle=function(v,s,o){var b=this.stars;n(b[v],s,o),n(b[s],o,v),n(b[o],v,s)},i.addTriangle=function(v,s,o){var b=this.stars;b[v].push(s,o),b[s].push(o,v),b[o].push(v,s)},i.opposite=function(v,s){for(var o=this.stars[s],b=1,g=o.length;b<g;b+=2)if(o[b]===v)return o[b-1];return-1},i.flip=function(v,s){var o=this.opposite(v,s),b=this.opposite(s,v);this.removeTriangle(v,s,o),this.removeTriangle(s,v,b),this.addTriangle(v,b,o),this.addTriangle(s,o,b)},i.edges=function(){for(var v=this.stars,s=[],o=0,b=v.length;o<b;++o)for(var g=v[o],d=0,f=g.length;d<f;d+=2)s.push([g[d],g[d+1]]);return s},i.cells=function(){for(var v=this.stars,s=[],o=0,b=v.length;o<b;++o)for(var g=v[o],d=0,f=g.length;d<f;d+=2){var m=g[d],l=g[d+1];o<Math.min(m,l)&&s.push([o,m,l])}return s};function r(v,s){for(var o=new Array(v),b=0;b<v;++b)o[b]=[];return new a(o,s)}},{"binary-search-bounds":31}],47:[function(c,A,T){A.exports=e;function e(a){for(var i=1,n=1;n<a.length;++n)for(var r=0;r<n;++r)if(a[n]<a[r])i=-i;else if(a[r]===a[n])return 0;return i}},{}],48:[function(c,A,T){var e=c("dup"),a=c("robust-linear-solve");function i(v,s){for(var o=0,b=v.length,g=0;g<b;++g)o+=v[g]*s[g];return o}function n(v){var s=v.length;if(s===0)return[];v[0].length;var o=e([v.length+1,v.length+1],1),b=e([v.length+1],1);o[s][s]=0;for(var g=0;g<s;++g){for(var d=0;d<=g;++d)o[d][g]=o[g][d]=2*i(v[g],v[d]);b[g]=i(v[g],v[g])}for(var f=a(o,b),m=0,l=f[s+1],g=0;g<l.length;++g)m+=l[g];for(var x=new Array(s),g=0;g<s;++g){for(var l=f[g],u=0,d=0;d<l.length;++d)u+=l[d];x[g]=u/m}return x}function r(v){if(v.length===0)return[];for(var s=v[0].length,o=e([s]),b=n(v),g=0;g<v.length;++g)for(var d=0;d<s;++d)o[d]+=v[g][d]*b[g];return o}r.barycenetric=n,A.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(c,A,T){A.exports=a;var e=c("circumcenter");function a(i){for(var n=e(i),r=0,v=0;v<i.length;++v)for(var s=i[v],o=0;o<n.length;++o)r+=Math.pow(s[o]-n[o],2);return Math.sqrt(r/i.length)}},{circumcenter:48}],50:[function(c,A,T){A.exports=L;var e=c("union-find"),a=c("box-intersect"),i=c("robust-segment-intersect"),n=c("big-rat"),r=c("big-rat/cmp"),v=c("big-rat/to-float"),s=c("rat-vec"),o=c("nextafter"),b=c("./lib/rat-seg-intersect");function g(E){var S=v(E);return[o(S,-1/0),o(S,1/0)]}function d(E,S){for(var P=new Array(S.length),F=0;F<S.length;++F){var I=S[F],D=E[I[0]],R=E[I[1]];P[F]=[o(Math.min(D[0],R[0]),-1/0),o(Math.min(D[1],R[1]),-1/0),o(Math.max(D[0],R[0]),1/0),o(Math.max(D[1],R[1]),1/0)]}return P}function f(E){for(var S=new Array(E.length),P=0;P<E.length;++P){var F=E[P];S[P]=[o(F[0],-1/0),o(F[1],-1/0),o(F[0],1/0),o(F[1],1/0)]}return S}function m(E,S,P){var F=[];return a(P,function(I,D){var R=S[I],O=S[D];if(!(R[0]===O[0]||R[0]===O[1]||R[1]===O[0]||R[1]===O[1])){var z=E[R[0]],G=E[R[1]],Y=E[O[0]],ee=E[O[1]];i(z,G,Y,ee)&&F.push([I,D])}}),F}function l(E,S,P,F){var I=[];return a(P,F,function(D,R){var O=S[D];if(!(O[0]===R||O[1]===R)){var z=E[R],G=E[O[0]],Y=E[O[1]];i(G,Y,z,z)&&I.push([D,R])}}),I}function x(E,S,P,F,I){var D,R,O=E.map(function(ie){return[n(ie[0]),n(ie[1])]});for(D=0;D<P.length;++D){var z=P[D];R=z[0];var G=z[1],Y=S[R],ee=S[G],j=b(s(E[Y[0]]),s(E[Y[1]]),s(E[ee[0]]),s(E[ee[1]]));if(!!j){var X=E.length;E.push([v(j[0]),v(j[1])]),O.push(j),F.push([R,X],[G,X])}}for(F.sort(function(ie,oe){if(ie[0]!==oe[0])return ie[0]-oe[0];var ne=O[ie[1]],le=O[oe[1]];return r(ne[0],le[0])||r(ne[1],le[1])}),D=F.length-1;D>=0;--D){var ae=F[D];R=ae[0];var he=S[R],K=he[0],J=he[1],U=E[K],H=E[J];if((U[0]-H[0]||U[1]-H[1])<0){var q=K;K=J,J=q}he[0]=K;var re=he[1]=ae[1],Z;for(I&&(Z=he[2]);D>0&&F[D-1][0]===R;){var ae=F[--D],Q=ae[1];I?S.push([re,Q,Z]):S.push([re,Q]),re=Q}I?S.push([re,J,Z]):S.push([re,J])}return O}function u(E,S,P){for(var F=S.length,I=new e(F),D=[],R=0;R<S.length;++R){var O=S[R],z=g(O[0]),G=g(O[1]);D.push([o(z[0],-1/0),o(G[0],-1/0),o(z[1],1/0),o(G[1],1/0)])}a(D,function(ae,he){I.link(ae,he)});for(var Y=!0,ee=new Array(F),R=0;R<F;++R){var j=I.find(R);j!==R&&(Y=!1,E[j]=[Math.min(E[R][0],E[j][0]),Math.min(E[R][1],E[j][1])])}if(Y)return null;for(var X=0,R=0;R<F;++R){var j=I.find(R);j===R?(ee[R]=X,E[X++]=E[R]):ee[R]=-1}E.length=X;for(var R=0;R<F;++R)ee[R]<0&&(ee[R]=ee[I.find(R)]);return ee}function M(E,S){return E[0]-S[0]||E[1]-S[1]}function w(E,S){var P=E[0]-S[0]||E[1]-S[1];return P||(E[2]<S[2]?-1:E[2]>S[2]?1:0)}function p(E,S,P){if(E.length!==0){if(S)for(var F=0;F<E.length;++F){var I=E[F],D=S[I[0]],R=S[I[1]];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}else for(var F=0;F<E.length;++F){var I=E[F],D=I[0],R=I[1];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}P?E.sort(w):E.sort(M);for(var O=1,F=1;F<E.length;++F){var z=E[F-1],G=E[F];G[0]===z[0]&&G[1]===z[1]&&(!P||G[2]===z[2])||(E[O++]=G)}E.length=O}}function _(E,S,P){var F=u(E,[],f(E));return p(S,F,P),!!F}function h(E,S,P){var F=d(E,S),I=m(E,S,F),D=f(E),R=l(E,S,F,D),O=x(E,S,I,R,P),z=u(E,O);return p(S,z,P),z?!0:I.length>0||R.length>0}function L(E,S,P){var F;if(P){F=S;for(var I=new Array(S.length),D=0;D<S.length;++D){var R=S[D];I[D]=[R[0],R[1],P[D]]}S=I}for(var O=_(E,S,!!P);h(E,S,!!P);)O=!0;if(!!P&&O){F.length=0,P.length=0;for(var D=0;D<S.length;++D){var R=S[D];F.push([R[0],R[1]]),P.push(R[2])}}return O}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(c,A,T){A.exports=b;var e=c("big-rat/mul"),a=c("big-rat/div"),i=c("big-rat/sub"),n=c("big-rat/sign"),r=c("rat-vec/sub"),v=c("rat-vec/add"),s=c("rat-vec/muls");function o(g,d){return i(e(g[0],d[1]),e(g[1],d[0]))}function b(g,d,f,m){var l=r(d,g),x=r(m,f),u=o(l,x);if(n(u)===0)return null;var M=r(g,f),w=o(x,M),p=a(w,u),_=s(l,p),h=v(g,_);return h}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(c,A,T){A.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(c,A,T){var e=c("./colorScale"),a=c("lerp");A.exports=i;function i(s){var o,b,g,d,f,m,l,x,p,u,M;if(s||(s={}),x=(s.nshades||72)-1,l=s.format||"hex",m=s.colormap,m||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!e[m])throw Error(m+" not a supported colorscale");f=e[m]}else if(Array.isArray(m))f=m.slice();else throw Error("unsupported colormap option",m);if(f.length>x+1)throw new Error(m+" map requires nshades to be at least size "+f.length);Array.isArray(s.alpha)?s.alpha.length!==2?u=[1,1]:u=s.alpha.slice():typeof s.alpha=="number"?u=[s.alpha,s.alpha]:u=[1,1],o=f.map(function(L){return Math.round(L.index*x)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var w=f.map(function(L,E){var S=f[E].index,P=f[E].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=u[0]+(u[1]-u[0])*S),P}),p=[];for(M=0;M<o.length-1;++M){d=o[M+1]-o[M],b=w[M],g=w[M+1];for(var _=0;_<d;_++){var h=_/d;p.push([Math.round(a(b[0],g[0],h)),Math.round(a(b[1],g[1],h)),Math.round(a(b[2],g[2],h)),a(b[3],g[3],h)])}}return p.push(f[f.length-1].rgb.concat(u[1])),l==="hex"?p=p.map(r):l==="rgbaString"?p=p.map(v):l==="float"&&(p=p.map(n)),p}function n(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function r(s){for(var o,b="#",g=0;g<3;++g)o=s[g],o=o.toString(16),b+=("00"+o).substr(o.length);return b}function v(s){return"rgba("+s.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(c,A,T){A.exports=s;var e=c("robust-orientation"),a=c("signum"),i=c("two-sum"),n=c("robust-product"),r=c("robust-sum");function v(o,b,g){var d=i(o[0],-b[0]),f=i(o[1],-b[1]),m=i(g[0],-b[0]),l=i(g[1],-b[1]),x=r(n(d,m),n(f,l));return x[x.length-1]>=0}function s(o,b,g,d){var f=e(b,g,d);if(f===0){var m=a(e(o,b,g)),l=a(e(o,b,d));if(m===l){if(m===0){var x=v(o,b,g),u=v(o,b,d);return x===u?0:x?1:-1}return 0}else{if(l===0)return m>0||v(o,b,d)?-1:1;if(m===0)return l>0||v(o,b,g)?1:-1}return a(l-m)}var M=e(o,b,g);if(M>0)return f>0&&e(o,b,d)>0?1:-1;if(M<0)return f>0||e(o,b,d)>0?1:-1;var w=e(o,b,d);return w>0||v(o,b,g)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(c,A,T){A.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(c,A,T){A.exports=i;var e=Math.min;function a(n,r){return n-r}function i(n,r){var v=n.length,s=n.length-r.length;if(s)return s;switch(v){case 0:return 0;case 1:return n[0]-r[0];case 2:return n[0]+n[1]-r[0]-r[1]||e(n[0],n[1])-e(r[0],r[1]);case 3:var o=n[0]+n[1],b=r[0]+r[1];if(s=o+n[2]-(b+r[2]),s)return s;var g=e(n[0],n[1]),d=e(r[0],r[1]);return e(g,n[2])-e(d,r[2])||e(g+n[2],o)-e(d+r[2],b);case 4:var f=n[0],m=n[1],l=n[2],x=n[3],u=r[0],M=r[1],w=r[2],p=r[3];return f+m+l+x-(u+M+w+p)||e(f,m,l,x)-e(u,M,w,p,u)||e(f+m,f+l,f+x,m+l,m+x,l+x)-e(u+M,u+w,u+p,M+w,M+p,w+p)||e(f+m+l,f+m+x,f+l+x,m+l+x)-e(u+M+w,u+M+p,u+w+p,M+w+p);default:for(var _=n.slice().sort(a),h=r.slice().sort(a),L=0;L<v;++L)if(s=_[L]-h[L],s)return s;return 0}}},{}],57:[function(c,A,T){var e=c("compare-cell"),a=c("cell-orientation");A.exports=i;function i(n,r){return e(n,r)||a(n)-a(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(c,A,T){var e=c("./lib/ch1d"),a=c("./lib/ch2d"),i=c("./lib/chnd");A.exports=n;function n(r){var v=r.length;if(v===0)return[];if(v===1)return[[0]];var s=r[0].length;return s===0?[]:s===1?e(r):s===2?a(r):i(r,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(c,A,T){A.exports=e;function e(a){for(var i=0,n=0,r=1;r<a.length;++r)a[r][0]<a[i][0]&&(i=r),a[r][0]>a[n][0]&&(n=r);return i<n?[[i],[n]]:i>n?[[n],[i]]:[[i]]}},{}],60:[function(c,A,T){A.exports=a;var e=c("monotone-convex-hull-2d");function a(i){var n=e(i),r=n.length;if(r<=2)return[];for(var v=new Array(r),s=n[r-1],o=0;o<r;++o){var b=n[o];v[o]=[s,b],s=b}return v}},{"monotone-convex-hull-2d":246}],61:[function(c,A,T){A.exports=r;var e=c("incremental-convex-hull"),a=c("affine-hull");function i(v,s){for(var o=v.length,b=new Array(o),g=0;g<s.length;++g)b[g]=v[s[g]];for(var d=s.length,g=0;g<o;++g)s.indexOf(g)<0&&(b[d++]=v[g]);return b}function n(v,s){for(var o=v.length,b=s.length,g=0;g<o;++g)for(var d=v[g],f=0;f<d.length;++f){var m=d[f];if(m<b)d[f]=s[m];else{m=m-b;for(var l=0;l<b;++l)m>=s[l]&&(m+=1);d[f]=m}}return v}function r(v,s){try{return e(v,!0)}catch{var o=a(v);if(o.length<=s)return[];var b=i(v,o),g=e(b,!0);return n(g,o)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(c,A,T){function e(i,n,r,v,s,o){var b=6*s*s-6*s,g=3*s*s-4*s+1,d=-6*s*s+6*s,f=3*s*s-2*s;if(i.length){o||(o=new Array(i.length));for(var m=i.length-1;m>=0;--m)o[m]=b*i[m]+g*n[m]+d*r[m]+f*v[m];return o}return b*i+g*n+d*r[m]+f*v}function a(i,n,r,v,s,o){var b=s-1,g=s*s,d=b*b,f=(1+2*s)*d,m=s*d,l=g*(3-2*s),x=g*b;if(i.length){o||(o=new Array(i.length));for(var u=i.length-1;u>=0;--u)o[u]=f*i[u]+m*n[u]+l*r[u]+x*v[u];return o}return f*i+m*n+l*r+x*v}A.exports=a,A.exports.derivative=e},{}],63:[function(c,A,T){var e=c("incremental-convex-hull"),a=c("uniq");A.exports=v;function i(s,o){this.point=s,this.index=o}function n(s,o){for(var b=s.point,g=o.point,d=b.length,f=0;f<d;++f){var m=g[f]-b[f];if(m)return m}return 0}function r(s,o,b){if(s===1)return b?[[-1,0]]:[];var g=o.map(function(x,u){return[x[0],u]});g.sort(function(x,u){return x[0]-u[0]});for(var d=new Array(s-1),f=1;f<s;++f){var m=g[f-1],l=g[f];d[f-1]=[m[1],l[1]]}return b&&d.push([-1,d[0][1]],[d[s-1][1],-1]),d}function v(s,o){var b=s.length;if(b===0)return[];var g=s[0].length;if(g<1)return[];if(g===1)return r(b,s,o);for(var d=new Array(b),f=1,m=0;m<b;++m){for(var l=s[m],x=new Array(g+1),u=0,M=0;M<g;++M){var w=l[M];x[M]=w,u+=w*w}x[g]=u,d[m]=new i(x,m),f=Math.max(u,f)}a(d,n),b=d.length;for(var p=new Array(b+g+1),_=new Array(b+g+1),h=(g+1)*(g+1)*f,L=new Array(g+1),m=0;m<=g;++m)L[m]=0;L[g]=h,p[0]=L.slice(),_[0]=-1;for(var m=0;m<=g;++m){var x=L.slice();x[m]=1,p[m+1]=x,_[m+1]=-1}for(var m=0;m<b;++m){var E=d[m];p[m+g+1]=E.point,_[m+g+1]=E.index}var S=e(p,!1);if(o?S=S.filter(function(P){for(var F=0,I=0;I<=g;++I){var D=_[P[I]];if(D<0&&++F>=2)return!1;P[I]=D}return!0}):S=S.filter(function(P){for(var F=0;F<=g;++F){var I=_[P[F]];if(I<0)return!1;P[F]=I}return!0}),g&1)for(var m=0;m<S.length;++m){var E=S[m],x=E[0];E[0]=E[1],E[1]=x}return S}},{"incremental-convex-hull":233,uniq:310}],64:[function(c,A,T){(function(e){(function(){var a=!1;if(typeof Float64Array<"u"){var i=new Float64Array(1),n=new Uint32Array(i.buffer);if(i[0]=1,a=!0,n[1]===1072693248){let x=function(w,p){return n[0]=w,n[1]=p,i[0]},u=function(w){return i[0]=w,n[0]},M=function(w){return i[0]=w,n[1]};var v=x,s=u,o=M;A.exports=function(p){return i[0]=p,[n[0],n[1]]},A.exports.pack=x,A.exports.lo=u,A.exports.hi=M}else if(n[0]===1072693248){let x=function(w,p){return n[1]=w,n[0]=p,i[0]},u=function(w){return i[0]=w,n[1]},M=function(w){return i[0]=w,n[0]};var b=x,g=u,d=M;A.exports=function(p){return i[0]=p,[n[1],n[0]]},A.exports.pack=x,A.exports.lo=u,A.exports.hi=M}else a=!1}if(!a){let x=function(w,p){return r.writeUInt32LE(w,0,!0),r.writeUInt32LE(p,4,!0),r.readDoubleLE(0,!0)},u=function(w){return r.writeDoubleLE(w,0,!0),r.readUInt32LE(0,!0)},M=function(w){return r.writeDoubleLE(w,0,!0),r.readUInt32LE(4,!0)};var f=x,m=u,l=M,r=new e(8);A.exports=function(p){return r.writeDoubleLE(p,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},A.exports.pack=x,A.exports.lo=u,A.exports.hi=M}A.exports.sign=function(x){return A.exports.hi(x)>>>31},A.exports.exponent=function(x){var u=A.exports.hi(x);return(u<<1>>>21)-1023},A.exports.fraction=function(x){var u=A.exports.lo(x),M=A.exports.hi(x),w=M&(1<<20)-1;return M&2146435072&&(w+=1<<20),[u,w]},A.exports.denormalized=function(x){var u=A.exports.hi(x);return!(u&2146435072)}}).call(this)}).call(this,c("buffer").Buffer)},{buffer:3}],65:[function(c,A,T){function e(n,r,v){var s=n[v]|0;if(s<=0)return[];var o=new Array(s),b;if(v===n.length-1)for(b=0;b<s;++b)o[b]=r;else for(b=0;b<s;++b)o[b]=e(n,r,v+1);return o}function a(n,r){var v,s;for(v=new Array(n),s=0;s<n;++s)v[s]=r;return v}function i(n,r){switch(typeof r>"u"&&(r=0),typeof n){case"number":if(n>0)return a(n|0,r);break;case"object":if(typeof n.length=="number")return e(n,r,0);break}return[]}A.exports=i},{}],66:[function(c,A,T){A.exports=a;var e=c("uniq");function a(i,n){var r=i.length;if(typeof n!="number"){n=0;for(var v=0;v<r;++v){var s=i[v];n=Math.max(n,s[0],s[1])}n=(n|0)+1}n=n|0;for(var o=new Array(n),v=0;v<n;++v)o[v]=[];for(var v=0;v<r;++v){var s=i[v];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var b=0;b<n;++b)e(o[b],function(g,d){return g-d});return o}},{uniq:310}],67:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i||0,v=n||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[r*a[12]+a[8],r*a[13]+a[9],r*a[14]+a[10],r*a[15]+a[11]],[v*a[12]-a[8],v*a[13]-a[9],v*a[14]-a[10],v*a[15]-a[11]]]}},{}],68:[function(c,A,T){A.exports=s;var e=c("cubic-hermite"),a=c("binary-search-bounds");function i(o,b,g){return Math.min(b,Math.max(o,g))}function n(o,b,g){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=o.slice().reverse(),this._velocity=b.slice().reverse(),this._time=[g],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var r=n.prototype;r.flush=function(o){var b=a.gt(this._time,o)-1;b<=0||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))},r.curve=function(o){var b=this._time,g=b.length,d=a.le(b,o),f=this._scratch[0],m=this._state,l=this._velocity,x=this.dimension,u=this.bounds;if(d<0)for(var M=x-1,w=0;w<x;++w,--M)f[w]=m[M];else if(d>=g-1)for(var M=m.length-1,p=o-b[g-1],w=0;w<x;++w,--M)f[w]=m[M]+p*l[M];else{for(var M=x*(d+1)-1,_=b[d],h=b[d+1],L=h-_||1,E=this._scratch[1],S=this._scratch[2],P=this._scratch[3],F=this._scratch[4],I=!0,w=0;w<x;++w,--M)E[w]=m[M],P[w]=l[M]*L,S[w]=m[M+x],F[w]=l[M+x]*L,I=I&&E[w]===S[w]&&P[w]===F[w]&&P[w]===0;if(I)for(var w=0;w<x;++w)f[w]=E[w];else e(E,P,S,F,(o-_)/L,f)}for(var D=u[0],R=u[1],w=0;w<x;++w)f[w]=i(D[w],R[w],f[w]);return f},r.dcurve=function(o){var b=this._time,g=b.length,d=a.le(b,o),f=this._scratch[0],m=this._state,l=this._velocity,x=this.dimension;if(d>=g-1){var u=m.length-1;o-b[g-1];for(var M=0;M<x;++M,--u)f[M]=l[u]}else{for(var u=x*(d+1)-1,w=b[d],p=b[d+1],_=p-w||1,h=this._scratch[1],L=this._scratch[2],E=this._scratch[3],S=this._scratch[4],P=!0,M=0;M<x;++M,--u)h[M]=m[u],E[M]=l[u]*_,L[M]=m[u+x],S[M]=l[u+x]*_,P=P&&h[M]===L[M]&&E[M]===S[M]&&E[M]===0;if(P)for(var M=0;M<x;++M)f[M]=0;else{e.derivative(h,E,L,S,(o-w)/_,f);for(var M=0;M<x;++M)f[M]/=_}}return f},r.lastT=function(){var o=this._time;return o[o.length-1]},r.stable=function(){for(var o=this._velocity,b=o.length,g=this.dimension-1;g>=0;--g)if(o[--b])return!1;return!0},r.jump=function(o){var b=this.lastT(),g=this.dimension;if(!(o<b||arguments.length!==g+1)){var d=this._state,f=this._velocity,m=d.length-this.dimension,l=this.bounds,x=l[0],u=l[1];this._time.push(b,o);for(var M=0;M<2;++M)for(var w=0;w<g;++w)d.push(d[m++]),f.push(0);this._time.push(o);for(var w=g;w>0;--w)d.push(i(x[w-1],u[w-1],arguments[w])),f.push(0)}},r.push=function(o){var b=this.lastT(),g=this.dimension;if(!(o<b||arguments.length!==g+1)){var d=this._state,f=this._velocity,m=d.length-this.dimension,l=o-b,x=this.bounds,u=x[0],M=x[1],w=l>1e-6?1/l:0;this._time.push(o);for(var p=g;p>0;--p){var _=i(u[p-1],M[p-1],arguments[p]);d.push(_),f.push((_-d[m++])*w)}}},r.set=function(o){var b=this.dimension;if(!(o<this.lastT()||arguments.length!==b+1)){var g=this._state,d=this._velocity,f=this.bounds,m=f[0],l=f[1];this._time.push(o);for(var x=b;x>0;--x)g.push(i(m[x-1],l[x-1],arguments[x])),d.push(0)}},r.move=function(o){var b=this.lastT(),g=this.dimension;if(!(o<=b||arguments.length!==g+1)){var d=this._state,f=this._velocity,m=d.length-this.dimension,l=this.bounds,x=l[0],u=l[1],M=o-b,w=M>1e-6?1/M:0;this._time.push(o);for(var p=g;p>0;--p){var _=arguments[p];d.push(i(x[p-1],u[p-1],d[m++]+_)),f.push(_*w)}}},r.idle=function(o){var b=this.lastT();if(!(o<b)){var g=this.dimension,d=this._state,f=this._velocity,m=d.length-g,l=this.bounds,x=l[0],u=l[1],M=o-b;this._time.push(o);for(var w=g-1;w>=0;--w)d.push(i(x[w],u[w],d[m]+M*f[m])),f.push(0),m+=1}};function v(o){for(var b=new Array(o),g=0;g<o;++g)b[g]=0;return b}function s(o,b,g){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if(typeof o=="number"){var d=v(o);return new n(d,d,0)}else return new n(o,v(o.length),0);case 2:if(typeof b=="number"){var d=v(o.length);return new n(o,d,+b)}else g=0;case 3:if(o.length!==b.length)throw new Error("state and velocity lengths must match");return new n(o,b,g)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(c,A,T){A.exports=M;var e=0,a=1;function i(w,p,_,h,L,E){this._color=w,this.key=p,this.value=_,this.left=h,this.right=L,this._count=E}function n(w){return new i(w._color,w.key,w.value,w.left,w.right,w._count)}function r(w,p){return new i(w,p.key,p.value,p.left,p.right,p._count)}function v(w){w._count=1+(w.left?w.left._count:0)+(w.right?w.right._count:0)}function s(w,p){this._compare=w,this.root=p}var o=s.prototype;Object.defineProperty(o,"keys",{get:function(){var w=[];return this.forEach(function(p,_){w.push(p)}),w}}),Object.defineProperty(o,"values",{get:function(){var w=[];return this.forEach(function(p,_){w.push(_)}),w}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(w,p){for(var _=this._compare,h=this.root,L=[],E=[];h;){var S=_(w,h.key);L.push(h),E.push(S),S<=0?h=h.left:h=h.right}L.push(new i(e,w,p,null,null,1));for(var P=L.length-2;P>=0;--P){var h=L[P];E[P]<=0?L[P]=new i(h._color,h.key,h.value,L[P+1],h.right,h._count+1):L[P]=new i(h._color,h.key,h.value,h.left,L[P+1],h._count+1)}for(var P=L.length-1;P>1;--P){var F=L[P-1],h=L[P];if(F._color===a||h._color===a)break;var I=L[P-2];if(I.left===F)if(F.left===h){var D=I.right;if(D&&D._color===e)F._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.left=F.right,F._color=a,F.right=I,L[P-2]=F,L[P-1]=h,v(I),v(F),P>=3){var R=L[P-3];R.left===I?R.left=F:R.right=F}break}}else{var D=I.right;if(D&&D._color===e)F._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(F.right=h.left,I._color=e,I.left=h.right,h._color=a,h.left=F,h.right=I,L[P-2]=h,L[P-1]=F,v(I),v(F),v(h),P>=3){var R=L[P-3];R.left===I?R.left=h:R.right=h}break}}else if(F.right===h){var D=I.left;if(D&&D._color===e)F._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.right=F.left,F._color=a,F.left=I,L[P-2]=F,L[P-1]=h,v(I),v(F),P>=3){var R=L[P-3];R.right===I?R.right=F:R.left=F}break}}else{var D=I.left;if(D&&D._color===e)F._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(F.left=h.right,I._color=e,I.right=h.left,h._color=a,h.right=F,h.left=I,L[P-2]=h,L[P-1]=F,v(I),v(F),v(h),P>=3){var R=L[P-3];R.right===I?R.right=h:R.left=h}break}}}return L[0]._color=a,new s(_,L[0])};function b(w,p){if(p.left){var _=b(w,p.left);if(_)return _}var _=w(p.key,p.value);if(_)return _;if(p.right)return b(w,p.right)}function g(w,p,_,h){var L=p(w,h.key);if(L<=0){if(h.left){var E=g(w,p,_,h.left);if(E)return E}var E=_(h.key,h.value);if(E)return E}if(h.right)return g(w,p,_,h.right)}function d(w,p,_,h,L){var E=_(w,L.key),S=_(p,L.key),P;if(E<=0&&(L.left&&(P=d(w,p,_,h,L.left),P)||S>0&&(P=h(L.key,L.value),P)))return P;if(S>0&&L.right)return d(w,p,_,h,L.right)}o.forEach=function(p,_,h){if(!!this.root)switch(arguments.length){case 1:return b(p,this.root);case 2:return g(_,this._compare,p,this.root);case 3:return this._compare(_,h)>=0?void 0:d(_,h,this._compare,p,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var w=[],p=this.root;p;)w.push(p),p=p.left;return new f(this,w)}}),Object.defineProperty(o,"end",{get:function(){for(var w=[],p=this.root;p;)w.push(p),p=p.right;return new f(this,w)}}),o.at=function(w){if(w<0)return new f(this,[]);for(var p=this.root,_=[];;){if(_.push(p),p.left){if(w<p.left._count){p=p.left;continue}w-=p.left._count}if(!w)return new f(this,_);if(w-=1,p.right){if(w>=p.right._count)break;p=p.right}else break}return new f(this,[])},o.ge=function(w){for(var p=this._compare,_=this.root,h=[],L=0;_;){var E=p(w,_.key);h.push(_),E<=0&&(L=h.length),E<=0?_=_.left:_=_.right}return h.length=L,new f(this,h)},o.gt=function(w){for(var p=this._compare,_=this.root,h=[],L=0;_;){var E=p(w,_.key);h.push(_),E<0&&(L=h.length),E<0?_=_.left:_=_.right}return h.length=L,new f(this,h)},o.lt=function(w){for(var p=this._compare,_=this.root,h=[],L=0;_;){var E=p(w,_.key);h.push(_),E>0&&(L=h.length),E<=0?_=_.left:_=_.right}return h.length=L,new f(this,h)},o.le=function(w){for(var p=this._compare,_=this.root,h=[],L=0;_;){var E=p(w,_.key);h.push(_),E>=0&&(L=h.length),E<0?_=_.left:_=_.right}return h.length=L,new f(this,h)},o.find=function(w){for(var p=this._compare,_=this.root,h=[];_;){var L=p(w,_.key);if(h.push(_),L===0)return new f(this,h);L<=0?_=_.left:_=_.right}return new f(this,[])},o.remove=function(w){var p=this.find(w);return p?p.remove():this},o.get=function(w){for(var p=this._compare,_=this.root;_;){var h=p(w,_.key);if(h===0)return _.value;h<=0?_=_.left:_=_.right}};function f(w,p){this.tree=w,this._stack=p}var m=f.prototype;Object.defineProperty(m,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(m,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),m.clone=function(){return new f(this.tree,this._stack.slice())};function l(w,p){w.key=p.key,w.value=p.value,w.left=p.left,w.right=p.right,w._color=p._color,w._count=p._count}function x(w){for(var p,_,h,L,E=w.length-1;E>=0;--E){if(p=w[E],E===0){p._color=a;return}if(_=w[E-1],_.left===p){if(h=_.right,h.right&&h.right._color===e){if(h=_.right=n(h),L=h.right=n(h.right),_.right=h.left,h.left=_,h.right=L,h._color=_._color,p._color=a,_._color=a,L._color=a,v(_),v(h),E>1){var S=w[E-2];S.left===_?S.left=h:S.right=h}w[E-1]=h;return}else if(h.left&&h.left._color===e){if(h=_.right=n(h),L=h.left=n(h.left),_.right=L.left,h.left=L.right,L.left=_,L.right=h,L._color=_._color,_._color=a,h._color=a,p._color=a,v(_),v(h),v(L),E>1){var S=w[E-2];S.left===_?S.left=L:S.right=L}w[E-1]=L;return}if(h._color===a)if(_._color===e){_._color=a,_.right=r(e,h);return}else{_.right=r(e,h);continue}else{if(h=n(h),_.right=h.left,h.left=_,h._color=_._color,_._color=e,v(_),v(h),E>1){var S=w[E-2];S.left===_?S.left=h:S.right=h}w[E-1]=h,w[E]=_,E+1<w.length?w[E+1]=p:w.push(p),E=E+2}}else{if(h=_.left,h.left&&h.left._color===e){if(h=_.left=n(h),L=h.left=n(h.left),_.left=h.right,h.right=_,h.left=L,h._color=_._color,p._color=a,_._color=a,L._color=a,v(_),v(h),E>1){var S=w[E-2];S.right===_?S.right=h:S.left=h}w[E-1]=h;return}else if(h.right&&h.right._color===e){if(h=_.left=n(h),L=h.right=n(h.right),_.left=L.right,h.right=L.left,L.right=_,L.left=h,L._color=_._color,_._color=a,h._color=a,p._color=a,v(_),v(h),v(L),E>1){var S=w[E-2];S.right===_?S.right=L:S.left=L}w[E-1]=L;return}if(h._color===a)if(_._color===e){_._color=a,_.left=r(e,h);return}else{_.left=r(e,h);continue}else{if(h=n(h),_.left=h.right,h.right=_,h._color=_._color,_._color=e,v(_),v(h),E>1){var S=w[E-2];S.right===_?S.right=h:S.left=h}w[E-1]=h,w[E]=_,E+1<w.length?w[E+1]=p:w.push(p),E=E+2}}}}m.remove=function(){var w=this._stack;if(w.length===0)return this.tree;var p=new Array(w.length),_=w[w.length-1];p[p.length-1]=new i(_._color,_.key,_.value,_.left,_.right,_._count);for(var h=w.length-2;h>=0;--h){var _=w[h];_.left===w[h+1]?p[h]=new i(_._color,_.key,_.value,p[h+1],_.right,_._count):p[h]=new i(_._color,_.key,_.value,_.left,p[h+1],_._count)}if(_=p[p.length-1],_.left&&_.right){var L=p.length;for(_=_.left;_.right;)p.push(_),_=_.right;var E=p[L-1];p.push(new i(_._color,E.key,E.value,_.left,_.right,_._count)),p[L-1].key=_.key,p[L-1].value=_.value;for(var h=p.length-2;h>=L;--h)_=p[h],p[h]=new i(_._color,_.key,_.value,_.left,p[h+1],_._count);p[L-1].left=p[L]}if(_=p[p.length-1],_._color===e){var S=p[p.length-2];S.left===_?S.left=null:S.right===_&&(S.right=null),p.pop();for(var h=0;h<p.length;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else if(_.left||_.right){_.left?l(_,_.left):_.right&&l(_,_.right),_._color=a;for(var h=0;h<p.length-1;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else{if(p.length===1)return new s(this.tree._compare,null);for(var h=0;h<p.length;++h)p[h]._count--;var P=p[p.length-2];x(p),P.left===_?P.left=null:P.right=null}return new s(this.tree._compare,p[0])},Object.defineProperty(m,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(m,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(m,"index",{get:function(){var w=0,p=this._stack;if(p.length===0){var _=this.tree.root;return _?_._count:0}else p[p.length-1].left&&(w=p[p.length-1].left._count);for(var h=p.length-2;h>=0;--h)p[h+1]===p[h].right&&(++w,p[h].left&&(w+=p[h].left._count));return w},enumerable:!0}),m.next=function(){var w=this._stack;if(w.length!==0){var p=w[w.length-1];if(p.right)for(p=p.right;p;)w.push(p),p=p.left;else for(w.pop();w.length>0&&w[w.length-1].right===p;)p=w[w.length-1],w.pop()}},Object.defineProperty(m,"hasNext",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].right)return!0;for(var p=w.length-1;p>0;--p)if(w[p-1].left===w[p])return!0;return!1}}),m.update=function(w){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var _=new Array(p.length),h=p[p.length-1];_[_.length-1]=new i(h._color,h.key,w,h.left,h.right,h._count);for(var L=p.length-2;L>=0;--L)h=p[L],h.left===p[L+1]?_[L]=new i(h._color,h.key,h.value,_[L+1],h.right,h._count):_[L]=new i(h._color,h.key,h.value,h.left,_[L+1],h._count);return new s(this.tree._compare,_[0])},m.prev=function(){var w=this._stack;if(w.length!==0){var p=w[w.length-1];if(p.left)for(p=p.left;p;)w.push(p),p=p.right;else for(w.pop();w.length>0&&w[w.length-1].left===p;)p=w[w.length-1],w.pop()}},Object.defineProperty(m,"hasPrev",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].left)return!0;for(var p=w.length-1;p>0;--p)if(w[p-1].right===w[p])return!0;return!1}});function u(w,p){return w<p?-1:w>p?1:0}function M(w){return new s(w||u,null)}},{}],70:[function(c,A,T){A.exports=p;var e=c("./lib/text.js"),a=c("./lib/lines.js"),i=c("./lib/background.js"),n=c("./lib/cube.js"),r=c("./lib/ticks.js"),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(_,h){return _[0]=h[0],_[1]=h[1],_[2]=h[2],_}function o(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(_)}var b=o.prototype;b.update=function(_){_=_||{};function h(Y,ee,j){if(j in _){var X=_[j],ae=this[j],he;(Y?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?this[j]=he=[ee(X[0]),ee(X[1]),ee(X[2])]:this[j]=he=[ee(X),ee(X),ee(X)];for(var K=0;K<3;++K)if(he[K]!==ae[K])return!0}return!1}var L=h.bind(this,!1,Number),E=h.bind(this,!1,Boolean),S=h.bind(this,!1,String),P=h.bind(this,!0,function(Y){if(Array.isArray(Y)){if(Y.length===3)return[+Y[0],+Y[1],+Y[2],1];if(Y.length===4)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),F,I=!1,D=!1;if("bounds"in _)for(var R=_.bounds,O=0;O<2;++O)for(var z=0;z<3;++z)R[O][z]!==this.bounds[O][z]&&(D=!0),this.bounds[O][z]=R[O][z];if("ticks"in _){F=_.ticks,I=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else L("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(F=r.create(this.bounds,this.tickSpacing),I=!0),I){for(var O=0;O<3;++O)F[O].sort(function(ee,j){return ee.x-j.x});r.equal(F,this.ticks)?I=!1:this.ticks=F}E("tickEnable"),S("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var G=S("labels");S("labelFont")&&(G=!0),E("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),E("lineEnable"),E("lineMirror"),L("lineWidth"),P("lineColor"),E("lineTickEnable"),E("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),E("gridEnable"),L("gridWidth"),P("gridColor"),E("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),E("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(G||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var d=[new g,new g,new g];function f(_,h,L,E,S){for(var P=_.primalOffset,F=_.primalMinor,I=_.mirrorOffset,D=_.mirrorMinor,R=E[h],O=0;O<3;++O)if(h!==O){var z=P,G=I,Y=F,ee=D;R&1<<O&&(z=I,G=P,Y=D,ee=F),z[O]=L[0][O],G[O]=L[1][O],S[O]>0?(Y[O]=-1,ee[O]=0):(Y[O]=0,ee[O]=1)}}var m=[0,0,0],l={model:v,view:v,projection:v,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(_){};var x=0,u=[0,0,0],M=[0,0,0],w=[0,0,0];b.draw=function(_){_=_||l;for(var ae=this.gl,h=_.model||v,L=_.view||v,E=_.projection||v,S=this.bounds,P=_._ortho||!1,F=n(h,L,E,S,P),I=F.cubeEdges,D=F.axis,R=L[12],O=L[13],z=L[14],G=L[15],Y=P?2:1,ee=Y*this.pixelRatio*(E[3]*R+E[7]*O+E[11]*z+E[15]*G)/ae.drawingBufferHeight,j=0;j<3;++j)this.lastCubeProps.cubeEdges[j]=I[j],this.lastCubeProps.axis[j]=D[j];for(var X=d,j=0;j<3;++j)f(d[j],j,this.bounds,I,D);for(var ae=this.gl,he=m,j=0;j<3;++j)this.backgroundEnable[j]?he[j]=D[j]:he[j]=0;this._background.draw(h,L,E,S,he,this.backgroundColor),this._lines.bind(h,L,E,this);for(var j=0;j<3;++j){var K=[0,0,0];D[j]>0?K[j]=S[1][j]:K[j]=S[0][j];for(var J=0;J<2;++J){var U=(j+1+J)%3,H=(j+1+(J^1))%3;this.gridEnable[U]&&this._lines.drawGrid(U,H,this.bounds,K,this.gridColor[U],this.gridWidth[U]*this.pixelRatio)}for(var J=0;J<2;++J){var U=(j+1+J)%3,H=(j+1+(J^1))%3;this.zeroEnable[H]&&Math.min(S[0][H],S[1][H])<=0&&Math.max(S[0][H],S[1][H])>=0&&this._lines.drawZero(U,H,this.bounds,K,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}}for(var j=0;j<3;++j){this.lineEnable[j]&&this._lines.drawAxisLine(j,this.bounds,X[j].primalOffset,this.lineColor[j],this.lineWidth[j]*this.pixelRatio),this.lineMirror[j]&&this._lines.drawAxisLine(j,this.bounds,X[j].mirrorOffset,this.lineColor[j],this.lineWidth[j]*this.pixelRatio);for(var q=s(u,X[j].primalMinor),re=s(M,X[j].mirrorMinor),Z=this.lineTickLength,J=0;J<3;++J){var Q=ee/h[5*J];q[J]*=Z[J]*Q,re[J]*=Z[J]*Q}this.lineTickEnable[j]&&this._lines.drawAxisTicks(j,X[j].primalOffset,q,this.lineTickColor[j],this.lineTickWidth[j]*this.pixelRatio),this.lineTickMirror[j]&&this._lines.drawAxisTicks(j,X[j].mirrorOffset,re,this.lineTickColor[j],this.lineTickWidth[j]*this.pixelRatio)}this._lines.unbind(),this._text.bind(h,L,E,this.pixelRatio);var ie,oe=.5,ne,le;function _e(ke){le=[0,0,0],le[ke]=1}function fe(ke,De,He){var Ae=(ke+1)%3,Le=(ke+2)%3,Ze=De[Ae],We=De[Le],ze=He[Ae],Ie=He[Le];if(Ze>0&&Ie>0){_e(Ae);return}else if(Ze>0&&Ie<0){_e(Ae);return}else if(Ze<0&&Ie>0){_e(Ae);return}else if(Ze<0&&Ie<0){_e(Ae);return}else if(We>0&&ze>0){_e(Le);return}else if(We>0&&ze<0){_e(Le);return}else if(We<0&&ze>0){_e(Le);return}else if(We<0&&ze<0){_e(Le);return}}for(var j=0;j<3;++j){for(var ye=X[j].primalMinor,xe=X[j].mirrorMinor,me=s(w,X[j].primalOffset),J=0;J<3;++J)this.lineTickEnable[j]&&(me[J]+=ee*ye[J]*Math.max(this.lineTickLength[J],0)/h[5*J]);var be=[0,0,0];if(be[j]=1,this.tickEnable[j]){this.tickAngle[j]===-3600?(this.tickAngle[j]=0,this.tickAlign[j]="auto"):this.tickAlign[j]=-1,ne=1,ie=[this.tickAlign[j],oe,ne],ie[0]==="auto"?ie[0]=x:ie[0]=parseInt(""+ie[0]),le=[0,0,0],fe(j,ye,xe);for(var J=0;J<3;++J)me[J]+=ee*ye[J]*this.tickPad[J]/h[5*J];this._text.drawTicks(j,this.tickSize[j],this.tickAngle[j],me,this.tickColor[j],be,le,ie)}if(this.labelEnable[j]){ne=0,le=[0,0,0],this.labels[j].length>4&&(_e(j),ne=1),ie=[this.labelAlign[j],oe,ne],ie[0]==="auto"?ie[0]=x:ie[0]=parseInt(""+ie[0]);for(var J=0;J<3;++J)me[J]+=ee*ye[J]*this.labelPad[J]/h[5*J];me[j]+=.5*(S[0][j]+S[1][j]),this._text.drawLabel(j,this.labelSize[j],this.labelAngle[j],me,this.labelColor[j],[0,0,0],le,ie)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function p(_,h){var L=new o(_);return L.update(h),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(c,A,T){A.exports=v;var e=c("gl-buffer"),a=c("gl-vao"),i=c("./shaders").bg;function n(s,o,b,g){this.gl=s,this.buffer=o,this.vao=b,this.shader=g}var r=n.prototype;r.draw=function(s,o,b,g,d,f){for(var m=!1,l=0;l<3;++l)m=m||d[l];if(!!m){var x=this.gl;x.enable(x.POLYGON_OFFSET_FILL),x.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:o,projection:b,bounds:g,enable:d,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),x.disable(x.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function v(s){for(var o=[],b=[],g=0,d=0;d<3;++d)for(var f=(d+1)%3,m=(d+2)%3,l=[0,0,0],x=[0,0,0],u=-1;u<=1;u+=2){b.push(g,g+2,g+1,g+1,g+2,g+3),l[d]=u,x[d]=u;for(var M=-1;M<=1;M+=2){l[f]=M;for(var w=-1;w<=1;w+=2)l[m]=w,o.push(l[0],l[1],l[2],x[0],x[1],x[2]),g+=1}var p=f;f=m,m=p}var _=e(s,new Float32Array(o)),h=e(s,new Uint16Array(b),s.ELEMENT_ARRAY_BUFFER),L=a(s,[{buffer:_,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:_,type:s.FLOAT,size:3,offset:12,stride:24}],h),E=i(s);return E.attributes.position.location=0,E.attributes.normal.location=1,new n(s,_,L,E)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(c,A,T){A.exports=u;var e=c("bit-twiddle"),a=c("gl-mat4/multiply"),i=c("split-polygon"),n=c("robust-orientation"),r=new Array(16),v=new Array(8),s=new Array(8),o=new Array(3),b=[0,0,0];(function(){for(var M=0;M<8;++M)v[M]=[1,1,1,1],s[M]=[1,1,1]})();function g(M,w,p){for(var _=0;_<4;++_){M[_]=p[12+_];for(var h=0;h<3;++h)M[_]+=w[h]*p[4*h+_]}}var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function f(M){for(var w=0;w<d.length;++w)if(M=i.positive(M,d[w]),M.length<3)return 0;for(var p=M[0],_=p[0]/p[3],h=p[1]/p[3],L=0,w=1;w+1<M.length;++w){var E=M[w],S=M[w+1],P=E[0]/E[3],F=E[1]/E[3],I=S[0]/S[3],D=S[1]/S[3],R=P-_,O=F-h,z=I-_,G=D-h;L+=Math.abs(R*G-O*z)}return L}var m=[1,1,1],l=[0,0,0],x={cubeEdges:m,axis:l};function u(M,w,p,_,h){a(r,w,M),a(r,p,r);for(var L=0,E=0;E<2;++E){o[2]=_[E][2];for(var S=0;S<2;++S){o[1]=_[S][1];for(var P=0;P<2;++P)o[0]=_[P][0],g(v[L],o,r),L+=1}}for(var F=-1,E=0;E<8;++E){for(var I=v[E][3],D=0;D<3;++D)s[E][D]=v[E][D]/I;h&&(s[E][2]*=-1),I<0&&(F<0||s[E][2]<s[F][2])&&(F=E)}if(F<0){F=0;for(var R=0;R<3;++R){for(var O=(R+2)%3,z=(R+1)%3,G=-1,Y=-1,ee=0;ee<2;++ee){var j=ee<<R,X=j+(ee<<O)+(1-ee<<z),ae=j+(1-ee<<O)+(ee<<z);n(s[j],s[X],s[ae],b)<0||(ee?G=1:Y=1)}if(G<0||Y<0){Y>G&&(F|=1<<R);continue}for(var ee=0;ee<2;++ee){var j=ee<<R,X=j+(ee<<O)+(1-ee<<z),ae=j+(1-ee<<O)+(ee<<z),he=f([v[j],v[X],v[ae],v[j+(1<<O)+(1<<z)]]);ee?G=he:Y=he}if(Y>G){F|=1<<R;continue}}}for(var K=7^F,J=-1,E=0;E<8;++E)E===F||E===K||(J<0||s[J][1]>s[E][1])&&(J=E);for(var U=-1,E=0;E<3;++E){var H=J^1<<E;if(!(H===F||H===K)){U<0&&(U=H);var z=s[H];z[0]<s[U][0]&&(U=H)}}for(var q=-1,E=0;E<3;++E){var H=J^1<<E;if(!(H===F||H===K||H===U)){q<0&&(q=H);var z=s[H];z[0]>s[q][0]&&(q=H)}}var re=m;re[0]=re[1]=re[2]=0,re[e.log2(U^J)]=J&U,re[e.log2(J^q)]=J&q;var Z=q^7;Z===F||Z===K?(Z=U^7,re[e.log2(q^Z)]=Z&q):re[e.log2(U^Z)]=Z&U;for(var Q=l,ie=F,R=0;R<3;++R)ie&1<<R?Q[R]=-1:Q[R]=1;return x}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(c,A,T){A.exports=m;var e=c("gl-buffer"),a=c("gl-vao"),i=c("./shaders").line,n=[0,0,0],r=[0,0,0],v=[0,0,0],s=[0,0,0],o=[1,1];function b(l){return l[0]=l[1]=l[2]=0,l}function g(l,x){return l[0]=x[0],l[1]=x[1],l[2]=x[2],l}function d(l,x,u,M,w,p,_,h){this.gl=l,this.vertBuffer=x,this.vao=u,this.shader=M,this.tickCount=w,this.tickOffset=p,this.gridCount=_,this.gridOffset=h}var f=d.prototype;f.bind=function(l,x,u){this.shader.bind(),this.shader.uniforms.model=l,this.shader.uniforms.view=x,this.shader.uniforms.projection=u,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},f.unbind=function(){this.vao.unbind()},f.drawAxisLine=function(l,x,u,M,w){var p=b(r);this.shader.uniforms.majorAxis=r,p[l]=x[1][l]-x[0][l],this.shader.uniforms.minorAxis=p;var _=g(s,u);_[l]+=x[0][l],this.shader.uniforms.offset=_,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=M;var h=b(v);h[(l+2)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6);var h=b(v);h[(l+1)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6)},f.drawAxisTicks=function(l,x,u,M,w){if(!!this.tickCount[l]){var p=b(n);p[l]=1,this.shader.uniforms.majorAxis=p,this.shader.uniforms.offset=x,this.shader.uniforms.minorAxis=u,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=w;var _=b(v);_[l]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l])}},f.drawGrid=function(l,x,u,M,w,p){if(!!this.gridCount[l]){var _=b(r);_[x]=u[1][x]-u[0][x],this.shader.uniforms.minorAxis=_;var h=g(s,M);h[x]+=u[0][x],this.shader.uniforms.offset=h;var L=b(n);L[l]=1,this.shader.uniforms.majorAxis=L;var E=b(v);E[l]=1,this.shader.uniforms.screenAxis=E,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[l],this.gridOffset[l])}},f.drawZero=function(l,x,u,M,w,p){var _=b(r);this.shader.uniforms.majorAxis=_,_[l]=u[1][l]-u[0][l],this.shader.uniforms.minorAxis=_;var h=g(s,M);h[l]+=u[0][l],this.shader.uniforms.offset=h;var L=b(v);L[x]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},f.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function m(l,x,u){var M=[],w=[0,0,0],p=[0,0,0],_=[0,0,0],h=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var P=M.length/3|0,E=0;E<u[L].length;++E){var S=+u[L][E].x;M.push(S,0,1,S,1,1,S,0,-1,S,0,-1,S,1,1,S,1,-1)}var I=M.length/3|0;w[L]=P,p[L]=I-P;for(var P=M.length/3|0,F=0;F<u[L].length;++F){var S=+u[L][F].x;M.push(S,0,1,S,1,1,S,0,-1,S,0,-1,S,1,1,S,1,-1)}var I=M.length/3|0;_[L]=P,h[L]=I-P}var D=e(l,new Float32Array(M)),R=a(l,[{buffer:D,type:l.FLOAT,size:3,stride:0,offset:0}]),O=i(l);return O.attributes.position.location=0,new d(l,D,R,O,p,w,h,_)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.line=function(b){return a(b,i,n,null,[{name:"position",type:"vec3"}])};var r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),v=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.text=function(b){return a(b,r,v,null,[{name:"position",type:"vec3"}])};var s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);T.bg=function(b){return a(b,s,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(c,A,T){(function(e){(function(){A.exports=m;var a=c("gl-buffer"),i=c("gl-vao"),n=c("vectorize-text"),r=c("./shaders").text,v=window||e.global||{},s=v.__TEXT_CACHE||{};v.__TEXT_CACHE={};var o=3;function b(l,x,u,M){this.gl=l,this.shader=x,this.buffer=u,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var g=b.prototype,d=[0,0];g.bind=function(l,x,u,M){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=l,w.view=x,w.projection=u,w.pixelScale=M,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},g.unbind=function(){this.vao.unbind()},g.update=function(l,x,u,M,w){var p=[];function _(R,O,z,G,Y,ee){var j=s[z];j||(j=s[z]={});var X=j[O];X||(X=j[O]=f(O,{triangles:!0,font:z,textAlign:"center",textBaseline:"middle",lineSpacing:Y,styletags:ee}));for(var ae=(G||12)/12,he=X.positions,K=X.cells,J=0,U=K.length;J<U;++J)for(var H=K[J],q=2;q>=0;--q){var re=he[H[q]];p.push(ae*re[0],-ae*re[1],R)}}for(var h=[0,0,0],L=[0,0,0],E=[0,0,0],S=[0,0,0],P=1.25,F={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){E[I]=p.length/o|0,_(.5*(l[0][I]+l[1][I]),x[I],u[I],12,P,F),S[I]=(p.length/o|0)-E[I],h[I]=p.length/o|0;for(var D=0;D<M[I].length;++D)!M[I][D].text||_(M[I][D].x,M[I][D].text,M[I][D].font||w,M[I][D].fontSize||12,P,F);L[I]=(p.length/o|0)-h[I]}this.buffer.update(p),this.tickOffset=h,this.tickCount=L,this.labelOffset=E,this.labelCount=S},g.drawTicks=function(l,x,u,M,w,p,_,h){!this.tickCount[l]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=w,this.shader.uniforms.angle=u,this.shader.uniforms.scale=x,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},g.drawLabel=function(l,x,u,M,w,p,_,h){!this.labelCount[l]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=w,this.shader.uniforms.angle=u,this.shader.uniforms.scale=x,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function f(l,x){try{return n(l,x)}catch(u){return console.warn('error vectorizing text:"'+l+'" error:',u),{cells:[],positions:[]}}}function m(l,x,u,M,w,p){var _=a(l),h=i(l,[{buffer:_,size:3}]),L=r(l);L.attributes.position.location=0;var E=new b(l,L,_,h);return E.update(x,u,M,w,p),E}}).call(this)}).call(this,c("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(c,A,T){T.create=a,T.equal=i;function e(n,r){var v=n+"",s=v.indexOf("."),o=0;s>=0&&(o=v.length-s-1);var b=Math.pow(10,o),g=Math.round(n*r*b),d=g+"";if(d.indexOf("e")>=0)return d;var f=g/b,m=g%b;g<0?(f=-Math.ceil(f)|0,m=-m|0):(f=Math.floor(f)|0,m=m|0);var l=""+f;if(g<0&&(l="-"+l),o){for(var x=""+m;x.length<o;)x="0"+x;return l+"."+x}else return l}function a(n,r){for(var v=[],s=0;s<3;++s){var o=[];.5*(n[0][s]+n[1][s]);for(var b=0;b*r[s]<=n[1][s];++b)o.push({x:b*r[s],text:e(r[s],b)});for(var b=-1;b*r[s]>=n[0][s];--b)o.push({x:b*r[s],text:e(r[s],b)});v.push(o)}return v}function i(n,r){for(var v=0;v<3;++v){if(n[v].length!==r[v].length)return!1;for(var s=0;s<n[v].length;++s){var o=n[v][s],b=r[v][s];if(o.x!==b.x||o.text!==b.text||o.font!==b.font||o.fontColor!==b.fontColor||o.fontSize!==b.fontSize||o.dx!==b.dx||o.dy!==b.dy)return!1}}return!0}},{}],77:[function(c,A,T){A.exports=x;var e=c("extract-frustum-planes"),a=c("split-polygon"),i=c("./lib/cube.js"),n=c("gl-mat4/multiply"),r=c("gl-mat4/transpose"),v=c("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function b(u,M,w){this.lo=u,this.hi=M,this.pixelsPerDataUnit=w}var g=[0,0,0,1],d=[0,0,0,1];function f(u,M,w,p,_){for(var h=0;h<3;++h){for(var L=g,E=d,S=0;S<3;++S)E[S]=L[S]=w[S];E[3]=L[3]=1,E[h]+=1,v(E,E,M),E[3]<0&&(u[h]=1/0),L[h]-=1,v(L,L,M),L[3]<0&&(u[h]=1/0);var P=(L[0]/L[3]-E[0]/E[3])*p,F=(L[1]/L[3]-E[1]/E[3])*_;u[h]=.25*Math.sqrt(P*P+F*F)}return u}var m=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],l=[0,0,0];function x(u,M,w,p,F){var h=M.model||s,L=M.view||s,E=M.projection||s,S=M._ortho||!1,P=u.bounds,F=F||i(h,L,E,P,S),I=F.axis;n(o,L,h),n(o,E,o);for(var D=m,R=0;R<3;++R)D[R].lo=1/0,D[R].hi=-1/0,D[R].pixelsPerDataUnit=1/0;var O=e(r(o,o));r(o,o);for(var z=0;z<3;++z){var G=(z+1)%3,Y=(z+2)%3,ee=l;e:for(var R=0;R<2;++R){var j=[];if(I[z]<0!=!!R){ee[z]=P[R][z];for(var X=0;X<2;++X){ee[G]=P[X^R][G];for(var ae=0;ae<2;++ae)ee[Y]=P[ae^X^R][Y],j.push(ee.slice())}for(var he=S?5:4,X=he;X===he;++X){if(j.length===0)continue e;j=a.positive(j,O[X])}for(var X=0;X<j.length;++X)for(var Y=j[X],K=f(l,o,Y,w,p),ae=0;ae<3;++ae)D[ae].lo=Math.min(D[ae].lo,Y[ae]),D[ae].hi=Math.max(D[ae].hi,Y[ae]),ae!==z&&(D[ae].pixelsPerDataUnit=Math.min(D[ae].pixelsPerDataUnit,Math.abs(K[ae])))}}}return D}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(c,A,T){var e=c("typedarray-pool"),a=c("ndarray-ops"),i=c("ndarray"),n=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(d,f,m,l,x){this.gl=d,this.type=f,this.handle=m,this.length=l,this.usage=x}var v=r.prototype;v.bind=function(){this.gl.bindBuffer(this.type,this.handle)},v.unbind=function(){this.gl.bindBuffer(this.type,null)},v.dispose=function(){this.gl.deleteBuffer(this.handle)};function s(d,f,m,l,x,u){var M=x.length*x.BYTES_PER_ELEMENT;if(u<0)return d.bufferData(f,x,l),M;if(M+u>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(f,u,x),m}function o(d,f){for(var m=e.malloc(d.length,f),l=d.length,x=0;x<l;++x)m[x]=d[x];return m}function b(d,f){for(var m=1,l=f.length-1;l>=0;--l){if(f[l]!==m)return!1;m*=d[l]}return!0}v.update=function(d,f){if(typeof f!="number"&&(f=-1),this.bind(),typeof d=="object"&&typeof d.shape<"u"){var m=d.dtype;if(n.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var l=gl.getExtension("OES_element_index_uint");l&&m!=="uint16"?m="uint32":m="uint16"}if(m===d.dtype&&b(d.shape,d.stride))d.offset===0&&d.data.length===d.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,d.data,f):this.length=s(this.gl,this.type,this.length,this.usage,d.data.subarray(d.offset,d.shape[0]),f);else{var x=e.malloc(d.size,m),u=i(x,d.shape);a.assign(u,d),f<0?this.length=s(this.gl,this.type,this.length,this.usage,x,f):this.length=s(this.gl,this.type,this.length,this.usage,x.subarray(0,d.size),f),e.free(x)}}else if(Array.isArray(d)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=o(d,"uint16"):M=o(d,"float32"),f<0?this.length=s(this.gl,this.type,this.length,this.usage,M,f):this.length=s(this.gl,this.type,this.length,this.usage,M.subarray(0,d.length),f),e.free(M)}else if(typeof d=="object"&&typeof d.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,d,f);else if(typeof d=="number"||d===void 0){if(f>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");d=d|0,d<=0&&(d=1),this.gl.bufferData(this.type,d|0,this.usage),this.length=d}else throw new Error("gl-buffer: Invalid data type")};function g(d,f,m,l){if(m=m||d.ARRAY_BUFFER,l=l||d.DYNAMIC_DRAW,m!==d.ARRAY_BUFFER&&m!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(l!==d.DYNAMIC_DRAW&&l!==d.STATIC_DRAW&&l!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=d.createBuffer(),u=new r(d,m,x,0,l);return u.update(f),u}A.exports=g},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(c,A,T){var e=c("gl-vec3");A.exports=function(i,n){var r=i.positions,v=i.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),s;for(var o=0,b=1/0,g=-1/0,d=1/0,f=-1/0,m=1/0,l=-1/0,x=null,u=null,M=[],w=1/0,p=!1,_=0;_<r.length;_++){var h=r[_];b=Math.min(h[0],b),g=Math.max(h[0],g),d=Math.min(h[1],d),f=Math.max(h[1],f),m=Math.min(h[2],m),l=Math.max(h[2],l);var L=v[_];if(e.length(L)>o&&(o=e.length(L)),_){var E=2*e.distance(x,h)/(e.length(u)+e.length(L));E?(w=Math.min(w,E),p=!1):p=!0}p||(x=h,u=L),M.push(L)}var S=[b,d,m],P=[g,f,l];n&&(n[0]=S,n[1]=P),o===0&&(o=1);var F=1/o;isFinite(w)||(w=1),s.vectorScale=w;var I=i.coneSize||.5;i.absoluteConeSize&&(I=i.absoluteConeSize*F),s.coneScale=I;for(var _=0,D=0;_<r.length;_++)for(var h=r[_],R=h[0],O=h[1],z=h[2],G=M[_],Y=e.length(G)*F,ee=0,j=8;ee<j;ee++){s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vertexIntensity.push(Y,Y,Y),s.vertexIntensity.push(Y,Y,Y);var X=s.positions.length;s.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return s};var a=c("./lib/shaders");A.exports.createMesh=c("./create_mesh"),A.exports.createConeMesh=function(i,n){return A.exports.createMesh(i,n,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(c,A,T){var e=c("gl-shader"),a=c("gl-buffer"),i=c("gl-vao"),n=c("gl-texture2d"),r=c("gl-mat4/multiply"),v=c("gl-mat4/invert"),s=c("ndarray"),o=c("colormap"),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(M,w,p,_,h,L,E,S,P,F,I){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=p,this.pickShader=_,this.trianglePositions=h,this.triangleVectors=L,this.triangleColors=S,this.triangleUVs=P,this.triangleIds=E,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var d=g.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(M){this.pickId=M};function f(M){for(var w=o({colormap:M,nshades:256,format:"rgba"}),p=new Uint8Array(256*4),_=0;_<256;++_){for(var h=w[_],L=0;L<3;++L)p[4*_+L]=h[L];p[4*_+3]=h[3]*255}return s(p,[256,256,4],[4,0,1])}function m(M){for(var w=M.length,p=new Array(w),_=0;_<w;++_)p[_]=M[_][2];return p}d.update=function(M){M=M||{};var w=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(f(M.colormap)),this.texture.generateMipmap());var p=M.cells,_=M.positions,h=M.vectors;if(!_||!p||!h)return;var L=[],E=[],S=[],P=[],F=[];this.cells=p,this.positions=_,this.vectors=h;var I=M.meshColor||[1,1,1,1],D=M.vertexIntensity,R=1/0,O=-1/0;if(D)if(M.vertexIntensityBounds)R=+M.vertexIntensityBounds[0],O=+M.vertexIntensityBounds[1];else for(var z=0;z<D.length;++z){var G=D[z];R=Math.min(R,G),O=Math.max(O,G)}else for(var z=0;z<_.length;++z){var G=_[z][2];R=Math.min(R,G),O=Math.max(O,G)}D?this.intensity=D:this.intensity=m(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var z=0;z<_.length;++z)for(var Y=_[z],ee=0;ee<3;++ee)isNaN(Y[ee])||!isFinite(Y[ee])||(this.bounds[0][ee]=Math.min(this.bounds[0][ee],Y[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],Y[ee]));var j=0;e:for(var z=0;z<p.length;++z){var X=p[z];switch(X.length){case 3:for(var ee=0;ee<3;++ee)for(var ae=X[ee],Y=_[ae],he=0;he<3;++he)if(isNaN(Y[he])||!isFinite(Y[he]))continue e;for(var ee=0;ee<3;++ee){var ae=X[2-ee],Y=_[ae];L.push(Y[0],Y[1],Y[2],Y[3]);var K=h[ae];E.push(K[0],K[1],K[2],K[3]||0);var J=I;J.length===3?S.push(J[0],J[1],J[2],1):S.push(J[0],J[1],J[2],J[3]);var U;D?U=[(D[ae]-R)/(O-R),0]:U=[(Y[2]-R)/(O-R),0],P.push(U[0],U[1]),F.push(z)}j+=1;break}}this.triangleCount=j,this.trianglePositions.update(L),this.triangleVectors.update(E),this.triangleColors.update(S),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(F))},d.drawTransparent=d.draw=function(M){M=M||{};for(var w=this.gl,p=M.model||b,_=M.view||b,h=M.projection||b,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)L[0][E]=Math.max(L[0][E],this.clipBounds[0][E]),L[1][E]=Math.min(L[1][E],this.clipBounds[1][E]);var S={model:p,view:_,projection:h,inverseModel:b.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};S.inverseModel=v(S.inverseModel,S.model),w.disable(w.CULL_FACE),this.texture.bind(0);var P=new Array(16);r(P,S.view,S.model),r(P,S.projection,P),v(P,P);for(var E=0;E<3;++E)S.eyePosition[E]=P[12+E]/P[15];for(var F=P[15],E=0;E<3;++E)F+=this.lightPosition[E]*P[4*E+3];for(var E=0;E<3;++E){for(var I=P[12+E],D=0;D<3;++D)I+=P[4*D+E]*this.lightPosition[D];S.lightPosition[E]=I/F}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=S,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},d.drawPick=function(M){M=M||{};for(var w=this.gl,p=M.model||b,_=M.view||b,h=M.projection||b,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)L[0][E]=Math.max(L[0][E],this.clipBounds[0][E]),L[1][E]=Math.min(L[1][E],this.clipBounds[1][E]);this._model=[].slice.call(p),this._view=[].slice.call(_),this._projection=[].slice.call(h),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var S={model:p,view:_,projection:h,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=S,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},d.pick=function(M){if(!M||M.id!==this.pickId)return null;var w=M.value[0]+256*M.value[1]+65536*M.value[2],p=this.cells[w],_=this.positions[p[1]].slice(0,3),h={position:_,dataCoordinate:_,index:Math.floor(p[1]/48)};return this.traceType==="cone"?h.index=Math.floor(p[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[p[1]],h.velocity=this.vectors[p[1]].slice(0,3),h.divergence=this.vectors[p[1]][3],h.index=w),h},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function l(M,w){var p=e(M,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return p.attributes.position.location=0,p.attributes.color.location=2,p.attributes.uv.location=3,p.attributes.vector.location=4,p}function x(M,w){var p=e(M,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return p.attributes.position.location=0,p.attributes.id.location=1,p.attributes.vector.location=4,p}function u(M,w,p){var _=p.shaders;arguments.length===1&&(w=M,M=w.gl);var h=l(M,_),L=x(M,_),E=n(M,s(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=M.LINEAR_MIPMAP_LINEAR,E.magFilter=M.LINEAR;var S=a(M),P=a(M),F=a(M),I=a(M),D=a(M),R=i(M,[{buffer:S,type:M.FLOAT,size:4},{buffer:D,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:M.FLOAT,size:4},{buffer:I,type:M.FLOAT,size:2},{buffer:P,type:M.FLOAT,size:4}]),O=new g(M,E,h,L,S,P,D,F,I,R,p.traceType||"cone");return O.update(w),O}A.exports=u},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(c,A,T){var e=c("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},T.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(c,A,T){A.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(c,A,T){var e=c("./1.0/numbers");A.exports=function(i){return e[i]}},{"./1.0/numbers":82}],84:[function(c,A,T){A.exports=g;var e=c("gl-buffer"),a=c("gl-vao"),i=c("./shaders/index"),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(d,f,m,l){this.gl=d,this.shader=l,this.buffer=f,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var v=r.prototype;v.isOpaque=function(){return!this.hasAlpha},v.isTransparent=function(){return this.hasAlpha},v.drawTransparent=v.draw=function(d){var f=this.gl,m=this.shader.uniforms;this.shader.bind();var l=m.view=d.view||n,x=m.projection=d.projection||n;m.model=d.model||n,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var u=l[12],M=l[13],w=l[14],p=l[15],_=d._ortho||!1,h=_?2:1,L=h*this.pixelRatio*(x[3]*u+x[7]*M+x[11]*w+x[15]*p)/f.drawingBufferHeight;this.vao.bind();for(var E=0;E<3;++E)f.lineWidth(this.lineWidth[E]*this.pixelRatio),m.capSize=this.capSize[E]*L,this.lineCount[E]&&f.drawArrays(f.LINES,this.lineOffset[E],this.lineCount[E]);this.vao.unbind()};function s(d,f){for(var m=0;m<3;++m)d[0][m]=Math.min(d[0][m],f[m]),d[1][m]=Math.max(d[1][m],f[m])}var o=function(){for(var d=new Array(3),f=0;f<3;++f){for(var m=[],l=1;l<=2;++l)for(var x=-1;x<=1;x+=2){var u=(l+f)%3,M=[0,0,0];M[u]=x,m.push(M)}d[f]=m}return d}();function b(d,f,m,l){for(var x=o[l],u=0;u<x.length;++u){var M=x[u];d.push(f[0],f[1],f[2],m[0],m[1],m[2],m[3],M[0],M[1],M[2])}return x.length}v.update=function(d){d=d||{},"lineWidth"in d&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=d.color||[[0,0,0],[0,0,0],[0,0,0]],m=d.position,l=d.error;if(Array.isArray(f[0])||(f=[f,f,f]),m&&l){var x=[],u=m.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=M;e:for(var p=0;p<u;++p){for(var _=m[p],h=0;h<3;++h)if(isNaN(_[h])||!isFinite(_[h]))continue e;var L=l[p],E=f[w];if(Array.isArray(E[0])&&(E=f[p]),E.length===3?E=[E[0],E[1],E[2],1]:E.length===4&&(E=[E[0],E[1],E[2],E[3]],!this.hasAlpha&&E[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][w])||isNaN(L[1][w]))){if(L[0][w]<0){var S=_.slice();S[w]+=L[0][w],x.push(_[0],_[1],_[2],E[0],E[1],E[2],E[3],0,0,0,S[0],S[1],S[2],E[0],E[1],E[2],E[3],0,0,0),s(this.bounds,S),M+=2+b(x,S,E,w)}if(L[1][w]>0){var S=_.slice();S[w]+=L[1][w],x.push(_[0],_[1],_[2],E[0],E[1],E[2],E[3],0,0,0,S[0],S[1],S[2],E[0],E[1],E[2],E[3],0,0,0),s(this.bounds,S),M+=2+b(x,S,E,w)}}}this.lineCount[w]=M-this.lineOffset[w]}this.buffer.update(x)}},v.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function g(d){var f=d.gl,m=e(f),l=a(f,[{buffer:m,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:f.FLOAT,size:3,offset:28,stride:40}]),x=i(f);x.attributes.position.location=0,x.attributes.color.location=1,x.attributes.offset.location=2;var u=new r(f,m,l,x);return u.update(d),u}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(c,A,T){var e=c("gl-texture2d");A.exports=M;var a=null,i,n,r,v;function s(w){var p=w.getParameter(w.FRAMEBUFFER_BINDING),_=w.getParameter(w.RENDERBUFFER_BINDING),h=w.getParameter(w.TEXTURE_BINDING_2D);return[p,_,h]}function o(w,p){w.bindFramebuffer(w.FRAMEBUFFER,p[0]),w.bindRenderbuffer(w.RENDERBUFFER,p[1]),w.bindTexture(w.TEXTURE_2D,p[2])}function b(w,p){var _=w.getParameter(p.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(_+1);for(var h=0;h<=_;++h){for(var L=new Array(_),E=0;E<h;++E)L[E]=w.COLOR_ATTACHMENT0+E;for(var E=h;E<_;++E)L[E]=w.NONE;a[h]=L}}function g(w){switch(w){case i:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case v:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(w,p,_,h,L,E){if(!h)return null;var S=e(w,p,_,L,h);return S.magFilter=w.NEAREST,S.minFilter=w.NEAREST,S.mipSamples=1,S.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,E,w.TEXTURE_2D,S.handle,0),S}function f(w,p,_,h,L){var E=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,E),w.renderbufferStorage(w.RENDERBUFFER,h,p,_),w.framebufferRenderbuffer(w.FRAMEBUFFER,L,w.RENDERBUFFER,E),E}function m(w){var p=s(w.gl),_=w.gl,h=w.handle=_.createFramebuffer(),L=w._shape[0],E=w._shape[1],S=w.color.length,P=w._ext,F=w._useStencil,I=w._useDepth,D=w._colorType;_.bindFramebuffer(_.FRAMEBUFFER,h);for(var R=0;R<S;++R)w.color[R]=d(_,L,E,D,_.RGBA,_.COLOR_ATTACHMENT0+R);S===0?(w._color_rb=f(_,L,E,_.RGBA4,_.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(a[0])):S>1&&P.drawBuffersWEBGL(a[S]);var O=_.getExtension("WEBGL_depth_texture");O?F?w.depth=d(_,L,E,O.UNSIGNED_INT_24_8_WEBGL,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):I&&(w.depth=d(_,L,E,_.UNSIGNED_SHORT,_.DEPTH_COMPONENT,_.DEPTH_ATTACHMENT)):I&&F?w._depth_rb=f(_,L,E,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):I?w._depth_rb=f(_,L,E,_.DEPTH_COMPONENT16,_.DEPTH_ATTACHMENT):F&&(w._depth_rb=f(_,L,E,_.STENCIL_INDEX,_.STENCIL_ATTACHMENT));var z=_.checkFramebufferStatus(_.FRAMEBUFFER);if(z!==_.FRAMEBUFFER_COMPLETE){w._destroyed=!0,_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(w.handle),w.handle=null,w.depth&&(w.depth.dispose(),w.depth=null),w._depth_rb&&(_.deleteRenderbuffer(w._depth_rb),w._depth_rb=null);for(var R=0;R<w.color.length;++R)w.color[R].dispose(),w.color[R]=null;w._color_rb&&(_.deleteRenderbuffer(w._color_rb),w._color_rb=null),o(_,p),g(z)}o(_,p)}function l(w,p,_,h,L,E,S,P){this.gl=w,this._shape=[p|0,_|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var F=0;F<L;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=h,this._useDepth=E,this._useStencil=S;var I=this,D=[p|0,_|0];Object.defineProperties(D,{0:{get:function(){return I._shape[0]},set:function(R){return I.width=R}},1:{get:function(){return I._shape[1]},set:function(R){return I.height=R}}}),this._shapeVector=D,m(this)}var x=l.prototype;function u(w,p,_){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(w._shape[0]===p&&w._shape[1]===_)){var h=w.gl,L=h.getParameter(h.MAX_RENDERBUFFER_SIZE);if(p<0||p>L||_<0||_>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=p,w._shape[1]=_;for(var E=s(h),S=0;S<w.color.length;++S)w.color[S].shape=w._shape;w._color_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,w._color_rb),h.renderbufferStorage(h.RENDERBUFFER,h.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&h.renderbufferStorage(h.RENDERBUFFER,h.STENCIL_INDEX,w._shape[0],w._shape[1])),h.bindFramebuffer(h.FRAMEBUFFER,w.handle);var P=h.checkFramebufferStatus(h.FRAMEBUFFER);P!==h.FRAMEBUFFER_COMPLETE&&(w.dispose(),o(h,E),g(P)),o(h,E)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[w|0,w|0]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var p=w[0]|0,_=w[1]|0;return u(this,p,_),[p,_]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return w=w|0,u(this,w,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w=w|0,u(this,this._shape[0],w),w},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var p=0;p<this.color.length;++p)this.color[p].dispose(),this.color[p]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(w,p,_,h){i||(i=w.FRAMEBUFFER_UNSUPPORTED,n=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,v=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=w.getExtension("WEBGL_draw_buffers");if(!a&&L&&b(w,L),Array.isArray(p)&&(h=_,_=p[1]|0,p=p[0]|0),typeof p!="number")throw new Error("gl-fbo: Missing shape parameter");var E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(p<0||p>E||_<0||_>E)throw new Error("gl-fbo: Parameters are too large for FBO");h=h||{};var S=1;if("color"in h){if(S=Math.max(h.color|0,0),S<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(S>1)if(L){if(S>w.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+S+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=w.UNSIGNED_BYTE,F=w.getExtension("OES_texture_float");if(h.float&&S>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");P=w.FLOAT}else h.preferFloat&&S>0&&F&&(P=w.FLOAT);var I=!0;"depth"in h&&(I=!!h.depth);var D=!1;return"stencil"in h&&(D=!!h.stencil),new l(w,p,_,P,S,I,D,L)}},{"gl-texture2d":146}],87:[function(c,A,T){var e=c("sprintf-js").sprintf,a=c("gl-constants/lookup"),i=c("glsl-shader-name"),n=c("add-line-numbers");A.exports=r;function r(v,s,o){var b=i(s)||"of unknown name (see npm glsl-shader-name)",g="unknown type";o!==void 0&&(g=o===a.FRAGMENT_SHADER?"fragment":"vertex");for(var d=e(`Error compiling %s shader %s:
`,g,b),f=e("%s%s",d,v),m=v.split(`
`),l={},x=0;x<m.length;x++){var u=m[x];if(!(u===""||u==="\0")){var M=parseInt(u.split(":")[2]);if(isNaN(M))throw new Error(e("Could not parse error: %s",u));l[M]=u}}for(var w=n(s).split(`
`),x=0;x<w.length;x++)if(!(!l[x+3]&&!l[x+2]&&!l[x+1])){var p=w[x];if(d+=p+`
`,l[x+1]){var _=l[x+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),d+=e(`^^^ %s

`,_)}}return{long:d.trim(),short:f.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(c,A,T){A.exports=g;var e=c("binary-search-bounds"),a=c("iota-array"),i=c("typedarray-pool"),n=c("gl-shader"),r=c("gl-buffer"),v=c("./lib/shaders");function s(d,f,m,l,x,u,M){this.plot=d,this.shader=f,this.pickShader=m,this.positionBuffer=l,this.weightBuffer=x,this.colorBuffer=u,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=s.prototype,b=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var d=[1,0,0,0,1,0,0,0,1];return function(){var f=this.plot,m=this.shader,l=this.bounds,x=this.numVertices;if(!(x<=0)){var u=f.gl,M=f.dataBox,w=l[2]-l[0],p=l[3]-l[1],_=M[2]-M[0],h=M[3]-M[1];d[0]=2*w/_,d[4]=2*p/h,d[6]=2*(l[0]-M[0])/_-1,d[7]=2*(l[1]-M[1])/h-1,m.bind();var L=m.uniforms;L.viewTransform=d,L.shape=this.shape;var E=m.attributes;this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(u.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),E.color.pointer(u.UNSIGNED_BYTE,!0),u.drawArrays(u.TRIANGLES,0,x)}}}(),o.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0];return function(m){var l=this.plot,x=this.pickShader,u=this.bounds,M=this.numVertices;if(!(M<=0)){var w=l.gl,p=l.dataBox,_=u[2]-u[0],h=u[3]-u[1],L=p[2]-p[0],E=p[3]-p[1];d[0]=2*_/L,d[4]=2*h/E,d[6]=2*(u[0]-p[0])/L-1,d[7]=2*(u[1]-p[1])/E-1;for(var S=0;S<4;++S)f[S]=m>>S*8&255;this.pickOffset=m,x.bind();var P=x.uniforms;P.viewTransform=d,P.pickOffset=f,P.shape=this.shape;var F=x.attributes;return this.positionBuffer.bind(),F.position.pointer(),this.weightBuffer.bind(),F.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),F.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,M),m+this.shape[0]*this.shape[1]}}}(),o.pick=function(d,f,m){var l=this.pickOffset,x=this.shape[0]*this.shape[1];if(m<l||m>=l+x)return null;var u=m-l,M=this.xData,w=this.yData;return{object:this,pointId:u,dataCoord:[M[u%this.shape[0]],w[u/this.shape[0]|0]]}},o.update=function(d){d=d||{};var f=d.shape||[0,0],m=d.x||a(f[0]),l=d.y||a(f[1]),x=d.z||new Float32Array(f[0]*f[1]),u=d.zsmooth!==!1;this.xData=m,this.yData=l;var M=d.colorLevels||[0],w=d.colorValues||[0,0,0,1],p=M.length,_=this.bounds,h,L,E,S;u?(h=_[0]=m[0],L=_[1]=l[0],E=_[2]=m[m.length-1],S=_[3]=l[l.length-1]):(h=_[0]=m[0]+(m[1]-m[0])/2,L=_[1]=l[0]+(l[1]-l[0])/2,E=_[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,S=_[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var P=1/(E-h),F=1/(S-L),I=f[0],D=f[1];this.shape=[I,D];var R=(u?(I-1)*(D-1):I*D)*(b.length>>>1);this.numVertices=R;for(var O=i.mallocUint8(R*4),z=i.mallocFloat32(R*2),G=i.mallocUint8(R*2),Y=i.mallocUint32(R),ee=0,j=u?I-1:I,X=u?D-1:D,ae=0;ae<X;++ae){var he,K;u?(he=F*(l[ae]-L),K=F*(l[ae+1]-L)):(he=ae<D-1?F*(l[ae]-(l[ae+1]-l[ae])/2-L):F*(l[ae]-(l[ae]-l[ae-1])/2-L),K=ae<D-1?F*(l[ae]+(l[ae+1]-l[ae])/2-L):F*(l[ae]+(l[ae]-l[ae-1])/2-L));for(var J=0;J<j;++J){var U,H;u?(U=P*(m[J]-h),H=P*(m[J+1]-h)):(U=J<I-1?P*(m[J]-(m[J+1]-m[J])/2-h):P*(m[J]-(m[J]-m[J-1])/2-h),H=J<I-1?P*(m[J]+(m[J+1]-m[J])/2-h):P*(m[J]+(m[J]-m[J-1])/2-h));for(var q=0;q<b.length;q+=2){var re=b[q],Z=b[q+1],Q=u?(ae+Z)*I+(J+re):ae*I+J,ie=x[Q],oe=e.le(M,ie),ne,le,_e,fe;if(oe<0)ne=w[0],le=w[1],_e=w[2],fe=w[3];else if(oe===p-1)ne=w[4*p-4],le=w[4*p-3],_e=w[4*p-2],fe=w[4*p-1];else{var ye=(ie-M[oe])/(M[oe+1]-M[oe]),xe=1-ye,me=4*oe,be=4*(oe+1);ne=xe*w[me]+ye*w[be],le=xe*w[me+1]+ye*w[be+1],_e=xe*w[me+2]+ye*w[be+2],fe=xe*w[me+3]+ye*w[be+3]}O[4*ee]=255*ne,O[4*ee+1]=255*le,O[4*ee+2]=255*_e,O[4*ee+3]=255*fe,z[2*ee]=U*.5+H*.5,z[2*ee+1]=he*.5+K*.5,G[2*ee]=re,G[2*ee+1]=Z,Y[ee]=ae*I+J,ee+=1}}}this.positionBuffer.update(z),this.weightBuffer.update(G),this.colorBuffer.update(O),this.idBuffer.update(Y),i.free(z),i.free(O),i.free(G),i.free(Y)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function g(d,f){var m=d.gl,l=n(m,v.vertex,v.fragment),x=n(m,v.pickVertex,v.pickFragment),u=r(m),M=r(m),w=r(m),p=r(m),_=new s(d,l,x,u,M,w,p);return _.update(f),d.addObject(_),_}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(c,A,T){var e=c("glslify");A.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),v=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];T.createShader=function(s){return a(s,i,n,null,v)},T.createPickShader=function(s){return a(s,i,r,null,v)}},{"gl-shader":132,glslify:231}],91:[function(c,A,T){A.exports=w;var e=c("gl-buffer"),a=c("gl-vao"),i=c("gl-texture2d"),n=new Uint8Array(4),r=new Float32Array(n.buffer);function v(p,_,h,L){return n[0]=L,n[1]=h,n[2]=_,n[3]=p,r[0]}var s=c("binary-search-bounds"),o=c("ndarray"),b=c("./lib/shaders"),g=b.createShader,d=b.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(p,_){for(var h=0,L=0;L<3;++L){var E=p[L]-_[L];h+=E*E}return Math.sqrt(h)}function l(p){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],h=0;h<3;++h)_[0][h]=Math.max(p[0][h],_[0][h]),_[1][h]=Math.min(p[1][h],_[1][h]);return _}function x(p,_,h,L){this.arcLength=p,this.position=_,this.index=h,this.dataCoordinate=L}function u(p,_,h,L,E,S){this.gl=p,this.shader=_,this.pickShader=h,this.buffer=L,this.vao=E,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=S,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=u.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(p){this.pickId=p},M.drawTransparent=M.draw=function(p){if(!!this.vertexCount){var _=this.gl,h=this.shader,L=this.vao;h.bind(),h.uniforms={model:p.model||f,view:p.view||f,projection:p.projection||f,clipBounds:l(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.drawPick=function(p){if(!!this.vertexCount){var _=this.gl,h=this.pickShader,L=this.vao;h.bind(),h.uniforms={model:p.model||f,view:p.view||f,projection:p.projection||f,pickId:this.pickId,clipBounds:l(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.update=function(p){var _,h;this.dirty=!0;var L=!!p.connectGaps;"dashScale"in p&&(this.dashScale=p.dashScale),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var E=[],S=[],P=[],F=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=p.position||p.positions;if(R){var O=p.color||p.colors||[0,0,0,1],z=p.lineWidth||1,G=!1;e:for(_=1;_<R.length;++_){var Y=R[_-1],ee=R[_];for(S.push(F),P.push(Y.slice()),h=0;h<3;++h){if(isNaN(Y[h])||isNaN(ee[h])||!isFinite(Y[h])||!isFinite(ee[h])){if(!L&&E.length>0){for(var j=0;j<24;++j)E.push(E[E.length-12]);I+=2,G=!0}continue e}D[0][h]=Math.min(D[0][h],Y[h],ee[h]),D[1][h]=Math.max(D[1][h],Y[h],ee[h])}var X,ae;Array.isArray(O[0])?(X=O.length>_-1?O[_-1]:O.length>0?O[O.length-1]:[0,0,0,1],ae=O.length>_?O[_]:O.length>0?O[O.length-1]:[0,0,0,1]):X=ae=O,X.length===3&&(X=[X[0],X[1],X[2],1]),ae.length===3&&(ae=[ae[0],ae[1],ae[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0);var he;Array.isArray(z)?he=z.length>_-1?z[_-1]:z.length>0?z[z.length-1]:[0,0,0,1]:he=z;var K=F;if(F+=m(Y,ee),G){for(h=0;h<2;++h)E.push(Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,he,X[0],X[1],X[2],X[3]);I+=2,G=!1}E.push(Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,he,X[0],X[1],X[2],X[3],Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,-he,X[0],X[1],X[2],X[3],ee[0],ee[1],ee[2],Y[0],Y[1],Y[2],F,-he,ae[0],ae[1],ae[2],ae[3],ee[0],ee[1],ee[2],Y[0],Y[1],Y[2],F,he,ae[0],ae[1],ae[2],ae[3]),I+=4}}if(this.buffer.update(E),S.push(F),P.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=P,this.arcLength=S,"dashes"in p){var J=p.dashes,U=J.slice();for(U.unshift(0),_=1;_<U.length;++_)U[_]=U[_-1]+U[_];var H=o(new Array(256*4),[256,1,4]);for(_=0;_<256;++_){for(h=0;h<4;++h)H.set(_,0,h,0);s.le(U,U[U.length-1]*_/255)&1?H.set(_,0,0,0):H.set(_,0,0,255)}this.texture.setPixels(H)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(p){if(!p||p.id!==this.pickId)return null;var _=v(p.value[0],p.value[1],p.value[2],0),h=s.le(this.arcLength,_);if(h<0)return null;if(h===this.arcLength.length-1)return new x(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),h);for(var L=this.points[h],E=this.points[Math.min(h+1,this.points.length-1)],S=(_-this.arcLength[h])/(this.arcLength[h+1]-this.arcLength[h]),P=1-S,F=[0,0,0],I=0;I<3;++I)F[I]=P*L[I]+S*E[I];var D=Math.min(S<.5?h:h+1,this.points.length-1);return new x(_,F,D,this.points[D])};function w(p){var _=p.gl||p.scene&&p.scene.gl,h=g(_);h.attributes.position.location=0,h.attributes.nextPosition.location=1,h.attributes.arcLength.location=2,h.attributes.lineWidth.location=3,h.attributes.color.location=4;var L=d(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var E=e(_),S=a(_,[{buffer:E,size:3,offset:0,stride:48},{buffer:E,size:3,offset:12,stride:48},{buffer:E,size:1,offset:24,stride:48},{buffer:E,size:1,offset:28,stride:48},{buffer:E,size:4,offset:32,stride:48}]),P=o(new Array(256*4),[256,1,4]),F=0;F<256*4;++F)P.data[F]=255;var I=i(_,P);I.wrap=_.REPEAT;var D=new u(_,h,L,E,S,I);return D.update(p),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(c,A,T){A.exports=e;function e(a){var i=new Float32Array(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i}},{}],93:[function(c,A,T){A.exports=e;function e(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3],s=a[4],o=a[5],b=a[6],g=a[7],d=a[8],f=a[9],m=a[10],l=a[11],x=a[12],u=a[13],M=a[14],w=a[15],p=i*o-n*s,_=i*b-r*s,h=i*g-v*s,L=n*b-r*o,E=n*g-v*o,S=r*g-v*b,P=d*u-f*x,F=d*M-m*x,I=d*w-l*x,D=f*M-m*u,R=f*w-l*u,O=m*w-l*M;return p*O-_*R+h*D+L*I-E*F+S*P}},{}],95:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=n+n,b=r+r,g=v+v,d=n*o,f=r*o,m=r*b,l=v*o,x=v*b,u=v*g,M=s*o,w=s*b,p=s*g;return a[0]=1-m-u,a[1]=f+p,a[2]=l-w,a[3]=0,a[4]=f-p,a[5]=1-d-u,a[6]=x+M,a[7]=0,a[8]=l+w,a[9]=x-M,a[10]=1-d-m,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3],b=r+r,g=v+v,d=s+s,f=r*b,m=r*g,l=r*d,x=v*g,u=v*d,M=s*d,w=o*b,p=o*g,_=o*d;return a[0]=1-(x+M),a[1]=m+_,a[2]=l-p,a[3]=0,a[4]=m-_,a[5]=1-(f+M),a[6]=u+w,a[7]=0,a[8]=l+p,a[9]=u-w,a[10]=1-(f+x),a[11]=0,a[12]=n[0],a[13]=n[1],a[14]=n[2],a[15]=1,a}},{}],97:[function(c,A,T){A.exports=e;function e(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=i[4],b=i[5],g=i[6],d=i[7],f=i[8],m=i[9],l=i[10],x=i[11],u=i[12],M=i[13],w=i[14],p=i[15],_=n*b-r*o,h=n*g-v*o,L=n*d-s*o,E=r*g-v*b,S=r*d-s*b,P=v*d-s*g,F=f*M-m*u,I=f*w-l*u,D=f*p-x*u,R=m*w-l*M,O=m*p-x*M,z=l*p-x*w,G=_*z-h*O+L*R+E*D-S*I+P*F;return G?(G=1/G,a[0]=(b*z-g*O+d*R)*G,a[1]=(v*O-r*z-s*R)*G,a[2]=(M*P-w*S+p*E)*G,a[3]=(l*S-m*P-x*E)*G,a[4]=(g*D-o*z-d*I)*G,a[5]=(n*z-v*D+s*I)*G,a[6]=(w*L-u*P-p*h)*G,a[7]=(f*P-l*L+x*h)*G,a[8]=(o*O-b*D+d*F)*G,a[9]=(r*D-n*O-s*F)*G,a[10]=(u*S-M*L+p*_)*G,a[11]=(m*L-f*S-x*_)*G,a[12]=(b*I-o*R-g*F)*G,a[13]=(n*R-r*I+v*F)*G,a[14]=(M*h-u*E-w*_)*G,a[15]=(f*E-m*h+l*_)*G,a):null}},{}],99:[function(c,A,T){var e=c("./identity");A.exports=a;function a(i,n,r,v){var s,o,b,g,d,f,m,l,x,u,M=n[0],w=n[1],p=n[2],_=v[0],h=v[1],L=v[2],E=r[0],S=r[1],P=r[2];return Math.abs(M-E)<1e-6&&Math.abs(w-S)<1e-6&&Math.abs(p-P)<1e-6?e(i):(m=M-E,l=w-S,x=p-P,u=1/Math.sqrt(m*m+l*l+x*x),m*=u,l*=u,x*=u,s=h*x-L*l,o=L*m-_*x,b=_*l-h*m,u=Math.sqrt(s*s+o*o+b*b),u?(u=1/u,s*=u,o*=u,b*=u):(s=0,o=0,b=0),g=l*b-x*o,d=x*s-m*b,f=m*o-l*s,u=Math.sqrt(g*g+d*d+f*f),u?(u=1/u,g*=u,d*=u,f*=u):(g=0,d=0,f=0),i[0]=s,i[1]=g,i[2]=m,i[3]=0,i[4]=o,i[5]=d,i[6]=l,i[7]=0,i[8]=b,i[9]=f,i[10]=x,i[11]=0,i[12]=-(s*M+o*w+b*p),i[13]=-(g*M+d*w+f*p),i[14]=-(m*M+l*w+x*p),i[15]=1,i)}},{"./identity":97}],100:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3],b=i[4],g=i[5],d=i[6],f=i[7],m=i[8],l=i[9],x=i[10],u=i[11],M=i[12],w=i[13],p=i[14],_=i[15],h=n[0],L=n[1],E=n[2],S=n[3];return a[0]=h*r+L*b+E*m+S*M,a[1]=h*v+L*g+E*l+S*w,a[2]=h*s+L*d+E*x+S*p,a[3]=h*o+L*f+E*u+S*_,h=n[4],L=n[5],E=n[6],S=n[7],a[4]=h*r+L*b+E*m+S*M,a[5]=h*v+L*g+E*l+S*w,a[6]=h*s+L*d+E*x+S*p,a[7]=h*o+L*f+E*u+S*_,h=n[8],L=n[9],E=n[10],S=n[11],a[8]=h*r+L*b+E*m+S*M,a[9]=h*v+L*g+E*l+S*w,a[10]=h*s+L*d+E*x+S*p,a[11]=h*o+L*f+E*u+S*_,h=n[12],L=n[13],E=n[14],S=n[15],a[12]=h*r+L*b+E*m+S*M,a[13]=h*v+L*g+E*l+S*w,a[14]=h*s+L*d+E*x+S*p,a[15]=h*o+L*f+E*u+S*_,a}},{}],101:[function(c,A,T){A.exports=e;function e(a,i,n,r,v,s,o){var b=1/(i-n),g=1/(r-v),d=1/(s-o);return a[0]=-2*b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*g,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*d,a[11]=0,a[12]=(i+n)*b,a[13]=(v+r)*g,a[14]=(o+s)*d,a[15]=1,a}},{}],102:[function(c,A,T){A.exports=e;function e(a,i,n,r,v){var s=1/Math.tan(i/2),o=1/(r-v);return a[0]=s/n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(v+r)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*v*r*o,a[15]=0,a}},{}],103:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=r[0],s=r[1],o=r[2],b=Math.sqrt(v*v+s*s+o*o),g,d,f,m,l,x,u,M,w,p,_,h,L,E,S,P,F,I,D,R,O,z,G,Y;return Math.abs(b)<1e-6?null:(b=1/b,v*=b,s*=b,o*=b,g=Math.sin(n),d=Math.cos(n),f=1-d,m=i[0],l=i[1],x=i[2],u=i[3],M=i[4],w=i[5],p=i[6],_=i[7],h=i[8],L=i[9],E=i[10],S=i[11],P=v*v*f+d,F=s*v*f+o*g,I=o*v*f-s*g,D=v*s*f-o*g,R=s*s*f+d,O=o*s*f+v*g,z=v*o*f+s*g,G=s*o*f-v*g,Y=o*o*f+d,a[0]=m*P+M*F+h*I,a[1]=l*P+w*F+L*I,a[2]=x*P+p*F+E*I,a[3]=u*P+_*F+S*I,a[4]=m*D+M*R+h*O,a[5]=l*D+w*R+L*O,a[6]=x*D+p*R+E*O,a[7]=u*D+_*R+S*O,a[8]=m*z+M*G+h*Y,a[9]=l*z+w*G+L*Y,a[10]=x*z+p*G+E*Y,a[11]=u*z+_*G+S*Y,i!==a&&(a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a)}},{}],104:[function(c,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[4],o=i[5],b=i[6],g=i[7],d=i[8],f=i[9],m=i[10],l=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=s*v+d*r,a[5]=o*v+f*r,a[6]=b*v+m*r,a[7]=g*v+l*r,a[8]=d*v-s*r,a[9]=f*v-o*r,a[10]=m*v-b*r,a[11]=l*v-g*r,a}},{}],105:[function(c,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[0],o=i[1],b=i[2],g=i[3],d=i[8],f=i[9],m=i[10],l=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*v-d*r,a[1]=o*v-f*r,a[2]=b*v-m*r,a[3]=g*v-l*r,a[8]=s*r+d*v,a[9]=o*r+f*v,a[10]=b*r+m*v,a[11]=g*r+l*v,a}},{}],106:[function(c,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[0],o=i[1],b=i[2],g=i[3],d=i[4],f=i[5],m=i[6],l=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*v+d*r,a[1]=o*v+f*r,a[2]=b*v+m*r,a[3]=g*v+l*r,a[4]=d*v-s*r,a[5]=f*v-o*r,a[6]=m*v-b*r,a[7]=l*v-g*r,a}},{}],107:[function(c,A,T){A.exports=e;function e(a,i,n){var r=n[0],v=n[1],s=n[2];return a[0]=i[0]*r,a[1]=i[1]*r,a[2]=i[2]*r,a[3]=i[3]*r,a[4]=i[4]*v,a[5]=i[5]*v,a[6]=i[6]*v,a[7]=i[7]*v,a[8]=i[8]*s,a[9]=i[9]*s,a[10]=i[10]*s,a[11]=i[11]*s,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}},{}],108:[function(c,A,T){A.exports=e;function e(a,i,n){var r=n[0],v=n[1],s=n[2],o,b,g,d,f,m,l,x,u,M,w,p;return i===a?(a[12]=i[0]*r+i[4]*v+i[8]*s+i[12],a[13]=i[1]*r+i[5]*v+i[9]*s+i[13],a[14]=i[2]*r+i[6]*v+i[10]*s+i[14],a[15]=i[3]*r+i[7]*v+i[11]*s+i[15]):(o=i[0],b=i[1],g=i[2],d=i[3],f=i[4],m=i[5],l=i[6],x=i[7],u=i[8],M=i[9],w=i[10],p=i[11],a[0]=o,a[1]=b,a[2]=g,a[3]=d,a[4]=f,a[5]=m,a[6]=l,a[7]=x,a[8]=u,a[9]=M,a[10]=w,a[11]=p,a[12]=o*r+f*v+u*s+i[12],a[13]=b*r+m*v+M*s+i[13],a[14]=g*r+l*v+w*s+i[14],a[15]=d*r+x*v+p*s+i[15]),a}},{}],109:[function(c,A,T){A.exports=e;function e(a,i){if(a===i){var n=i[1],r=i[2],v=i[3],s=i[6],o=i[7],b=i[11];a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=n,a[6]=i[9],a[7]=i[13],a[8]=r,a[9]=s,a[11]=i[14],a[12]=v,a[13]=o,a[14]=b}else a[0]=i[0],a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=i[1],a[5]=i[5],a[6]=i[9],a[7]=i[13],a[8]=i[2],a[9]=i[6],a[10]=i[10],a[11]=i[14],a[12]=i[3],a[13]=i[7],a[14]=i[11],a[15]=i[15];return a}},{}],110:[function(c,A,T){var e=c("barycentric"),a=c("polytope-closest-point/lib/closest_point_2d.js");A.exports=s;function i(o,b){for(var g=[0,0,0,0],d=0;d<4;++d)for(var f=0;f<4;++f)g[f]+=o[4*d+f]*b[d];return g}function n(o,b,g,d,f){for(var m=i(d,i(g,i(b,[o[0],o[1],o[2],1]))),l=0;l<3;++l)m[l]/=m[3];return[.5*f[0]*(1+m[0]),.5*f[1]*(1-m[1])]}function r(o,b){if(o.length===2){for(var g=0,d=0,f=0;f<2;++f)g+=Math.pow(b[f]-o[0][f],2),d+=Math.pow(b[f]-o[1][f],2);return g=Math.sqrt(g),d=Math.sqrt(d),g+d<1e-6?[1,0]:[d/(g+d),g/(d+g)]}else if(o.length===3){var m=[0,0];return a(o[0],o[1],o[2],b,m),e(o,m)}return[]}function v(o,b){for(var g=[0,0,0],d=0;d<o.length;++d)for(var f=o[d],m=b[d],l=0;l<3;++l)g[l]+=m*f[l];return g}function s(o,b,g,d,f,m){if(o.length===1)return[0,o[0].slice()];for(var l=new Array(o.length),x=0;x<o.length;++x)l[x]=n(o[x],g,d,f,m);for(var u=0,M=1/0,x=0;x<l.length;++x){for(var w=0,p=0;p<2;++p)w+=Math.pow(l[x][p]-b[p],2);w<M&&(M=w,u=x)}for(var _=r(l,b),h=0,x=0;x<3;++x){if(_[x]<-.001||_[x]>1.0001)return null;h+=_[x]}return Math.abs(h-1)>.001?null:[u,v(o,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(c,A,T){var e=c("glslify"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),v=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),b=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),f=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.wireShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.pointShader={vertex:v,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},T.pickShader={vertex:o,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},T.pointPickShader={vertex:g,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},T.contourShader={vertex:d,fragment:f,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(c,A,T){var e=1e-6,a=1e-6,i=c("gl-shader"),n=c("gl-buffer"),r=c("gl-vao"),v=c("gl-texture2d"),s=c("normals"),o=c("gl-mat4/multiply"),b=c("gl-mat4/invert"),g=c("ndarray"),d=c("colormap"),f=c("simplicial-complex-contour"),m=c("typedarray-pool"),l=c("./lib/shaders"),x=c("./lib/closest-point"),u=l.meshShader,M=l.wireShader,w=l.pointShader,p=l.pickShader,_=l.pointPickShader,h=l.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function E(j,X,ae,he,K,J,U,H,q,re,Z,Q,ie,oe,ne,le,_e,fe,ye,xe,me,be,ke,De,He,Ae,Le){this.gl=j,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=ae,this.lineShader=he,this.pointShader=K,this.pickShader=J,this.pointPickShader=U,this.contourShader=H,this.trianglePositions=q,this.triangleColors=Z,this.triangleNormals=ie,this.triangleUVs=Q,this.triangleIds=re,this.triangleVAO=oe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ne,this.edgeColors=_e,this.edgeUVs=fe,this.edgeIds=le,this.edgeVAO=ye,this.edgeCount=0,this.pointPositions=xe,this.pointColors=be,this.pointUVs=ke,this.pointSizes=De,this.pointIds=me,this.pointVAO=He,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ae,this.contourVAO=Le,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var S=E.prototype;S.isOpaque=function(){return!this.hasAlpha},S.isTransparent=function(){return this.hasAlpha},S.pickSlots=1,S.setPickBase=function(j){this.pickId=j};function P(j,X){if(!X||!X.length)return 1;for(var ae=0;ae<X.length;++ae){if(X.length<2)return 1;if(X[ae][0]===j)return X[ae][1];if(X[ae][0]>j&&ae>0){var he=(X[ae][0]-j)/(X[ae][0]-X[ae-1][0]);return X[ae][1]*(1-he)+he*X[ae-1][1]}}return 1}function F(j,X){for(var ae=d({colormap:j,nshades:256,format:"rgba"}),he=new Uint8Array(256*4),K=0;K<256;++K){for(var J=ae[K],U=0;U<3;++U)he[4*K+U]=J[U];X?he[4*K+3]=255*P(K/255,X):he[4*K+3]=255*J[3]}return g(he,[256,256,4],[4,0,1])}function I(j){for(var X=j.length,ae=new Array(X),he=0;he<X;++he)ae[he]=j[he][2];return ae}S.highlight=function(j){if(!j||!this.contourEnable){this.contourCount=0;return}for(var X=f(this.cells,this.intensity,j.intensity),ae=X.cells,he=X.vertexIds,K=X.vertexWeights,J=ae.length,U=m.mallocFloat32(2*3*J),H=0,q=0;q<J;++q)for(var re=ae[q],Z=0;Z<2;++Z){var Q=re[0];re.length===2&&(Q=re[Z]);for(var ie=he[Q][0],oe=he[Q][1],ne=K[Q],le=1-ne,_e=this.positions[ie],fe=this.positions[oe],ye=0;ye<3;++ye)U[H++]=ne*_e[ye]+le*fe[ye]}this.contourCount=H/3|0,this.contourPositions.update(U.subarray(0,H)),m.free(U)},S.update=function(j){j=j||{};var X=this.gl;this.dirty=!0,"contourEnable"in j&&(this.contourEnable=j.contourEnable),"contourColor"in j&&(this.contourColor=j.contourColor),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"lightPosition"in j&&(this.lightPosition=j.lightPosition),this.hasAlpha=!1,"opacity"in j&&(this.opacity=j.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in j&&(this.opacityscale=j.opacityscale,this.hasAlpha=!0),"ambient"in j&&(this.ambientLight=j.ambient),"diffuse"in j&&(this.diffuseLight=j.diffuse),"specular"in j&&(this.specularLight=j.specular),"roughness"in j&&(this.roughness=j.roughness),"fresnel"in j&&(this.fresnel=j.fresnel),j.texture?(this.texture.dispose(),this.texture=v(X,j.texture)):j.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(F(j.colormap,this.opacityscale)),this.texture.generateMipmap());var ae=j.cells,he=j.positions;if(!he||!ae)return;var K=[],J=[],U=[],H=[],q=[],re=[],Z=[],Q=[],ie=[],oe=[],ne=[],le=[],_e=[],fe=[];this.cells=ae,this.positions=he;var ye=j.vertexNormals,xe=j.cellNormals,me=j.vertexNormalsEpsilon===void 0?e:j.vertexNormalsEpsilon,be=j.faceNormalsEpsilon===void 0?a:j.faceNormalsEpsilon;j.useFacetNormals&&!xe&&(xe=s.faceNormals(ae,he,be)),!xe&&!ye&&(ye=s.vertexNormals(ae,he,me));var ke=j.vertexColors,De=j.cellColors,He=j.meshColor||[1,1,1,1],Ae=j.vertexUVs,Le=j.vertexIntensity,Ze=j.cellUVs,We=j.cellIntensity,ze=1/0,Ie=-1/0;if(!Ae&&!Ze)if(Le)if(j.vertexIntensityBounds)ze=+j.vertexIntensityBounds[0],Ie=+j.vertexIntensityBounds[1];else for(var Ve=0;Ve<Le.length;++Ve){var dt=Le[Ve];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}else if(We)if(j.cellIntensityBounds)ze=+j.cellIntensityBounds[0],Ie=+j.cellIntensityBounds[1];else for(var Ve=0;Ve<We.length;++Ve){var dt=We[Ve];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}else for(var Ve=0;Ve<he.length;++Ve){var dt=he[Ve][2];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}Le?this.intensity=Le:We?this.intensity=We:this.intensity=I(he),this.pickVertex=!(We||De);var Ft=j.pointSizes,Qt=j.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ve=0;Ve<he.length;++Ve)for(var Ot=he[Ve],Ct=0;Ct<3;++Ct)isNaN(Ot[Ct])||!isFinite(Ot[Ct])||(this.bounds[0][Ct]=Math.min(this.bounds[0][Ct],Ot[Ct]),this.bounds[1][Ct]=Math.max(this.bounds[1][Ct],Ot[Ct]));var jt=0,Nt=0,Lt=0;e:for(var Ve=0;Ve<ae.length;++Ve){var Xe=ae[Ve];switch(Xe.length){case 1:for(var it=Xe[0],Ot=he[it],Ct=0;Ct<3;++Ct)if(isNaN(Ot[Ct])||!isFinite(Ot[Ct]))continue e;oe.push(Ot[0],Ot[1],Ot[2]);var Ye;ke?Ye=ke[it]:De?Ye=De[Ve]:Ye=He,this.opacityscale&&Le?J.push(Ye[0],Ye[1],Ye[2],this.opacity*P((Le[it]-ze)/(Ie-ze),this.opacityscale)):Ye.length===3?ne.push(Ye[0],Ye[1],Ye[2],this.opacity):(ne.push(Ye[0],Ye[1],Ye[2],Ye[3]*this.opacity),Ye[3]<1&&(this.hasAlpha=!0));var Ee;Ae?Ee=Ae[it]:Le?Ee=[(Le[it]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ve]:We?Ee=[(We[Ve]-ze)/(Ie-ze),0]:Ee=[(Ot[2]-ze)/(Ie-ze),0],le.push(Ee[0],Ee[1]),Ft?_e.push(Ft[it]):_e.push(Qt),fe.push(Ve),Lt+=1;break;case 2:for(var Ct=0;Ct<2;++Ct)for(var it=Xe[Ct],Ot=he[it],Ge=0;Ge<3;++Ge)if(isNaN(Ot[Ge])||!isFinite(Ot[Ge]))continue e;for(var Ct=0;Ct<2;++Ct){var it=Xe[Ct],Ot=he[it];re.push(Ot[0],Ot[1],Ot[2]);var Ye;ke?Ye=ke[it]:De?Ye=De[Ve]:Ye=He,this.opacityscale&&Le?J.push(Ye[0],Ye[1],Ye[2],this.opacity*P((Le[it]-ze)/(Ie-ze),this.opacityscale)):Ye.length===3?Z.push(Ye[0],Ye[1],Ye[2],this.opacity):(Z.push(Ye[0],Ye[1],Ye[2],Ye[3]*this.opacity),Ye[3]<1&&(this.hasAlpha=!0));var Ee;Ae?Ee=Ae[it]:Le?Ee=[(Le[it]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ve]:We?Ee=[(We[Ve]-ze)/(Ie-ze),0]:Ee=[(Ot[2]-ze)/(Ie-ze),0],Q.push(Ee[0],Ee[1]),ie.push(Ve)}Nt+=1;break;case 3:for(var Ct=0;Ct<3;++Ct)for(var it=Xe[Ct],Ot=he[it],Ge=0;Ge<3;++Ge)if(isNaN(Ot[Ge])||!isFinite(Ot[Ge]))continue e;for(var Ct=0;Ct<3;++Ct){var it=Xe[2-Ct],Ot=he[it];K.push(Ot[0],Ot[1],Ot[2]);var Ye;ke?Ye=ke[it]:De?Ye=De[Ve]:Ye=He,Ye?this.opacityscale&&Le?J.push(Ye[0],Ye[1],Ye[2],this.opacity*P((Le[it]-ze)/(Ie-ze),this.opacityscale)):Ye.length===3?J.push(Ye[0],Ye[1],Ye[2],this.opacity):(J.push(Ye[0],Ye[1],Ye[2],Ye[3]*this.opacity),Ye[3]<1&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1);var Ee;Ae?Ee=Ae[it]:Le?Ee=[(Le[it]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ve]:We?Ee=[(We[Ve]-ze)/(Ie-ze),0]:Ee=[(Ot[2]-ze)/(Ie-ze),0],H.push(Ee[0],Ee[1]);var Ke;ye?Ke=ye[it]:Ke=xe[Ve],U.push(Ke[0],Ke[1],Ke[2]),q.push(Ve)}jt+=1;break}}this.pointCount=Lt,this.edgeCount=Nt,this.triangleCount=jt,this.pointPositions.update(oe),this.pointColors.update(ne),this.pointUVs.update(le),this.pointSizes.update(_e),this.pointIds.update(new Uint32Array(fe)),this.edgePositions.update(re),this.edgeColors.update(Z),this.edgeUVs.update(Q),this.edgeIds.update(new Uint32Array(ie)),this.trianglePositions.update(K),this.triangleColors.update(J),this.triangleUVs.update(H),this.triangleNormals.update(U),this.triangleIds.update(new Uint32Array(q))},S.drawTransparent=S.draw=function(j){j=j||{};for(var X=this.gl,ae=j.model||L,he=j.view||L,K=j.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)J[0][U]=Math.max(J[0][U],this.clipBounds[0][U]),J[1][U]=Math.min(J[1][U],this.clipBounds[1][U]);var H={model:ae,view:he,projection:K,inverseModel:L.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=b(H.inverseModel,H.model),X.disable(X.CULL_FACE),this.texture.bind(0);var q=new Array(16);o(q,H.view,H.model),o(q,H.projection,q),b(q,q);for(var U=0;U<3;++U)H.eyePosition[U]=q[12+U]/q[15];for(var re=q[15],U=0;U<3;++U)re+=this.lightPosition[U]*q[4*U+3];for(var U=0;U<3;++U){for(var Z=q[12+U],Q=0;Q<3;++Q)Z+=q[4*Q+U]*this.lightPosition[Q];H.lightPosition[U]=Z/re}if(this.triangleCount>0){var ie=this.triShader;ie.bind(),ie.uniforms=H,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ie=this.lineShader;ie.bind(),ie.uniforms=H,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ie=this.pointShader;ie.bind(),ie.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ie=this.contourShader;ie.bind(),ie.uniforms=H,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind()}},S.drawPick=function(j){j=j||{};for(var X=this.gl,ae=j.model||L,he=j.view||L,K=j.projection||L,J=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)J[0][U]=Math.max(J[0][U],this.clipBounds[0][U]),J[1][U]=Math.min(J[1][U],this.clipBounds[1][U]);this._model=[].slice.call(ae),this._view=[].slice.call(he),this._projection=[].slice.call(K),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var H={model:ae,view:he,projection:K,clipBounds:J,pickId:this.pickId/255},q=this.pickShader;if(q.bind(),q.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var q=this.pointPickShader;q.bind(),q.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}},S.pick=function(j){if(!j||j.id!==this.pickId)return null;for(var X=j.value[0]+256*j.value[1]+65536*j.value[2],ae=this.cells[X],he=this.positions,K=new Array(ae.length),J=0;J<ae.length;++J)K[J]=he[ae[J]];var U=j.coord[0],H=j.coord[1];if(!this.pickVertex){var q=this.positions[ae[0]],re=this.positions[ae[1]],Z=this.positions[ae[2]],Q=[(q[0]+re[0]+Z[0])/3,(q[1]+re[1]+Z[1])/3,(q[2]+re[2]+Z[2])/3];return{_cellCenter:!0,position:[U,H],index:X,cell:ae,cellId:X,intensity:this.intensity[X],dataCoordinate:Q}}var ie=x(K,[U*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ie)return null;for(var oe=ie[2],ne=0,J=0;J<ae.length;++J)ne+=oe[J]*this.intensity[ae[J]];return{position:ie[1],index:ae[ie[0]],cell:ae,cellId:X,intensity:ne,dataCoordinate:this.positions[ae[ie[0]]]}},S.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(j){var X=i(j,u.vertex,u.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function R(j){var X=i(j,M.vertex,M.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function O(j){var X=i(j,w.vertex,w.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function z(j){var X=i(j,p.vertex,p.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function G(j){var X=i(j,_.vertex,_.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function Y(j){var X=i(j,h.vertex,h.fragment);return X.attributes.position.location=0,X}function ee(j,X){arguments.length===1&&(X=j,j=X.gl);var ae=j.getExtension("OES_standard_derivatives")||j.getExtension("MOZ_OES_standard_derivatives")||j.getExtension("WEBKIT_OES_standard_derivatives");if(!ae)throw new Error("derivatives not supported");var he=D(j),K=R(j),J=O(j),U=z(j),H=G(j),q=Y(j),re=v(j,g(new Uint8Array([255,255,255,255]),[1,1,4]));re.generateMipmap(),re.minFilter=j.LINEAR_MIPMAP_LINEAR,re.magFilter=j.LINEAR;var Z=n(j),Q=n(j),ie=n(j),oe=n(j),ne=n(j),le=r(j,[{buffer:Z,type:j.FLOAT,size:3},{buffer:ne,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:j.FLOAT,size:4},{buffer:ie,type:j.FLOAT,size:2},{buffer:oe,type:j.FLOAT,size:3}]),_e=n(j),fe=n(j),ye=n(j),xe=n(j),me=r(j,[{buffer:_e,type:j.FLOAT,size:3},{buffer:xe,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:j.FLOAT,size:4},{buffer:ye,type:j.FLOAT,size:2}]),be=n(j),ke=n(j),De=n(j),He=n(j),Ae=n(j),Le=r(j,[{buffer:be,type:j.FLOAT,size:3},{buffer:Ae,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ke,type:j.FLOAT,size:4},{buffer:De,type:j.FLOAT,size:2},{buffer:He,type:j.FLOAT,size:1}]),Ze=n(j),We=r(j,[{buffer:Ze,type:j.FLOAT,size:3}]),ze=new E(j,re,he,K,J,U,H,q,Z,ne,Q,ie,oe,le,_e,xe,fe,ye,me,be,Ae,ke,De,He,Le,Ze,We);return ze.update(X),ze}A.exports=ee},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(c,A,T){A.exports=v;var e=c("gl-buffer"),a=c("gl-shader"),i=c("./shaders");function n(s,o,b){this.plot=s,this.vbo=o,this.shader=b}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawBox=function(){var s=[0,0],o=[0,0];return function(b,g,d,f,m){var l=this.plot,x=this.shader,u=l.gl;s[0]=b,s[1]=g,o[0]=d,o[1]=f,x.uniforms.lo=s,x.uniforms.hi=o,x.uniforms.color=m,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function v(s){var o=s.gl,b=e(o,[0,0,0,1,1,0,1,1]),g=a(o,i.boxVert,i.lineFrag);return new n(s,b,g)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(c,A,T){A.exports=o;var e=c("gl-buffer"),a=c("gl-shader"),i=c("binary-search-bounds"),n=c("./shaders");function r(b,g,d,f){this.plot=b,this.vbo=g,this.shader=d,this.tickShader=f,this.ticks=[[],[]]}function v(b,g){return b-g}var s=r.prototype;s.draw=function(){var b=[0,0],g=[0,0],d=[0,0];return function(){for(var f=this.plot,m=this.vbo,l=this.shader,x=this.ticks,u=f.gl,M=f._tickBounds,w=f.dataBox,p=f.viewBox,_=f.gridLineWidth,h=f.gridLineColor,L=f.gridLineEnable,E=f.pixelRatio,S=0;S<2;++S){var P=M[S],F=M[S+2],I=F-P,D=.5*(w[S+2]+w[S]),R=w[S+2]-w[S];g[S]=2*I/R,b[S]=2*(P-D)/R}l.bind(),m.bind(),l.attributes.dataCoord.pointer(),l.uniforms.dataShift=b,l.uniforms.dataScale=g;for(var O=0,S=0;S<2;++S){d[0]=d[1]=0,d[S]=1,l.uniforms.dataAxis=d,l.uniforms.lineWidth=_[S]/(p[S+2]-p[S])*E,l.uniforms.color=h[S];var z=x[S].length*6;L[S]&&z&&u.drawArrays(u.TRIANGLES,O,z),O+=z}}}(),s.drawTickMarks=function(){var b=[0,0],g=[0,0],d=[1,0],f=[0,1],m=[0,0],l=[0,0];return function(){for(var x=this.plot,u=this.vbo,M=this.tickShader,w=this.ticks,p=x.gl,_=x._tickBounds,h=x.dataBox,L=x.viewBox,E=x.pixelRatio,S=x.screenBox,P=S[2]-S[0],F=S[3]-S[1],I=L[2]-L[0],D=L[3]-L[1],R=0;R<2;++R){var O=_[R],z=_[R+2],G=z-O,Y=.5*(h[R+2]+h[R]),ee=h[R+2]-h[R];g[R]=2*G/ee,b[R]=2*(O-Y)/ee}g[0]*=I/P,b[0]*=I/P,g[1]*=D/F,b[1]*=D/F,M.bind(),u.bind(),M.attributes.dataCoord.pointer();var j=M.uniforms;j.dataShift=b,j.dataScale=g;var X=x.tickMarkLength,ae=x.tickMarkWidth,he=x.tickMarkColor,K=0,J=w[0].length*6,U=Math.min(i.ge(w[0],(h[0]-_[0])/(_[2]-_[0]),v),w[0].length),H=Math.min(i.gt(w[0],(h[2]-_[0])/(_[2]-_[0]),v),w[0].length),q=K+6*U,re=6*Math.max(0,H-U),Z=Math.min(i.ge(w[1],(h[1]-_[1])/(_[3]-_[1]),v),w[1].length),Q=Math.min(i.gt(w[1],(h[3]-_[1])/(_[3]-_[1]),v),w[1].length),ie=J+6*Z,oe=6*Math.max(0,Q-Z);m[0]=2*(L[0]-X[1])/P-1,m[1]=(L[3]+L[1])/F-1,l[0]=X[1]*E/P,l[1]=ae[1]*E/F,oe&&(j.color=he[1],j.tickScale=l,j.dataAxis=f,j.screenOffset=m,p.drawArrays(p.TRIANGLES,ie,oe)),m[0]=(L[2]+L[0])/P-1,m[1]=2*(L[1]-X[0])/F-1,l[0]=ae[0]*E/P,l[1]=X[0]*E/F,re&&(j.color=he[0],j.tickScale=l,j.dataAxis=d,j.screenOffset=m,p.drawArrays(p.TRIANGLES,q,re)),m[0]=2*(L[2]+X[3])/P-1,m[1]=(L[3]+L[1])/F-1,l[0]=X[3]*E/P,l[1]=ae[3]*E/F,oe&&(j.color=he[3],j.tickScale=l,j.dataAxis=f,j.screenOffset=m,p.drawArrays(p.TRIANGLES,ie,oe)),m[0]=(L[2]+L[0])/P-1,m[1]=2*(L[3]+X[2])/F-1,l[0]=ae[2]*E/P,l[1]=X[2]*E/F,re&&(j.color=he[2],j.tickScale=l,j.dataAxis=d,j.screenOffset=m,p.drawArrays(p.TRIANGLES,q,re))}}(),s.update=function(){var b=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1];return function(d){var f=d.ticks,m=d.bounds,l=new Float32Array(6*3*(f[0].length+f[1].length));this.plot.zeroLineEnable;for(var x=0,u=[[],[]],M=0;M<2;++M)for(var w=u[M],p=f[M],_=m[M],h=m[M+2],L=0;L<p.length;++L){var E=(p[L].x-_)/(h-_);w.push(E);for(var S=0;S<6;++S)l[x++]=E,l[x++]=b[S],l[x++]=g[S]}this.ticks=u,this.vbo.update(l)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(b){var g=b.gl,d=e(g),f=a(g,n.gridVert,n.gridFrag),m=a(g,n.tickVert,n.gridFrag),l=new r(b,d,f,m);return l}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(c,A,T){A.exports=v;var e=c("gl-buffer"),a=c("gl-shader"),i=c("./shaders");function n(s,o,b){this.plot=s,this.vbo=o,this.shader=b}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawLine=function(){var s=[0,0],o=[0,0];return function(b,g,d,f,m,l){var x=this.plot,u=this.shader,M=x.gl;s[0]=b,s[1]=g,o[0]=d,o[1]=f,u.uniforms.start=s,u.uniforms.end=o,u.uniforms.width=m*x.pixelRatio,u.uniforms.color=l,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function v(s){var o=s.gl,b=e(o,[-1,-1,-1,1,1,-1,1,1]),g=a(o,i.lineVert,i.lineFrag),d=new n(s,b,g);return d}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(c,A,T){var e=c("glslify"),a=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);A.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(c,A,T){A.exports=o;var e=c("gl-buffer"),a=c("gl-shader"),i=c("text-cache"),n=c("binary-search-bounds"),r=c("./shaders");function v(b,g,d){this.plot=b,this.vbo=g,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s=v.prototype;s.drawTicks=function(){var b=[0,0],g=[0,0],d=[0,0];return function(f){var m=this.plot,l=this.shader,x=this.tickX[f],u=this.tickOffset[f],M=m.gl,w=m.viewBox,p=m.dataBox,_=m.screenBox,h=m.pixelRatio,L=m.tickEnable,E=m.tickPad,S=m.tickColor,P=m.tickAngle,F=m.labelEnable,I=m.labelPad,D=m.labelColor,R=m.labelAngle,O=this.labelOffset[f],z=this.labelCount[f],G=n.lt(x,p[f]),Y=n.le(x,p[f+2]);b[0]=b[1]=0,b[f]=1,g[f]=(w[2+f]+w[f])/(_[2+f]-_[f])-1;var ee=2/_[2+(f^1)]-_[f^1];g[f^1]=ee*w[f^1]-1,L[f]&&(g[f^1]-=ee*h*E[f],G<Y&&u[Y]>u[G]&&(l.uniforms.dataAxis=b,l.uniforms.screenOffset=g,l.uniforms.color=S[f],l.uniforms.angle=P[f],M.drawArrays(M.TRIANGLES,u[G],u[Y]-u[G]))),F[f]&&z&&(g[f^1]-=ee*h*I[f],l.uniforms.dataAxis=d,l.uniforms.screenOffset=g,l.uniforms.color=D[f],l.uniforms.angle=R[f],M.drawArrays(M.TRIANGLES,O,z)),g[f^1]=ee*w[2+(f^1)]-1,L[f+2]&&(g[f^1]+=ee*h*E[f+2],G<Y&&u[Y]>u[G]&&(l.uniforms.dataAxis=b,l.uniforms.screenOffset=g,l.uniforms.color=S[f+2],l.uniforms.angle=P[f+2],M.drawArrays(M.TRIANGLES,u[G],u[Y]-u[G]))),F[f+2]&&z&&(g[f^1]+=ee*h*I[f+2],l.uniforms.dataAxis=d,l.uniforms.screenOffset=g,l.uniforms.color=D[f+2],l.uniforms.angle=R[f+2],M.drawArrays(M.TRIANGLES,O,z))}}(),s.drawTitle=function(){var b=[0,0],g=[0,0];return function(){var d=this.plot,f=this.shader,m=d.gl,l=d.screenBox,x=d.titleCenter,u=d.titleAngle,M=d.titleColor,w=d.pixelRatio;if(!!this.titleCount){for(var p=0;p<2;++p)g[p]=2*(x[p]*w-l[p])/(l[2+p]-l[p])-1;f.bind(),f.uniforms.dataAxis=b,f.uniforms.screenOffset=g,f.uniforms.angle=u,f.uniforms.color=M,m.drawArrays(m.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var b=[0,0],g=[0,0],d=[0,0];return function(){var f=this.plot,m=this.shader,l=f._tickBounds,x=f.dataBox,u=f.screenBox,M=f.viewBox;m.bind();for(var w=0;w<2;++w){var p=l[w],_=l[w+2],h=_-p,L=.5*(x[w+2]+x[w]),E=x[w+2]-x[w],S=M[w],P=M[w+2],F=P-S,I=u[w],D=u[w+2],R=D-I;g[w]=2*h/E*F/R,b[w]=2*(p-L)/E*F/R}d[1]=2*f.pixelRatio/(u[3]-u[1]),d[0]=d[1]*(u[3]-u[1])/(u[2]-u[0]),m.uniforms.dataScale=g,m.uniforms.dataShift=b,m.uniforms.textScale=d,this.vbo.bind(),m.attributes.textCoordinate.pointer()}}(),s.update=function(b){var g=[],d=b.ticks,f=b.bounds,m,l,x,u,M;for(M=0;M<2;++M){var w=[Math.floor(g.length/3)],p=[-1/0],_=d[M];for(m=0;m<_.length;++m){var h=_[m],L=h.x,E=h.text,S=h.font||"sans-serif";u=h.fontSize||12;for(var P=1/(f[M+2]-f[M]),F=f[M],I=E.split(`
`),D=0;D<I.length;D++)for(x=i(S,I[D]).data,l=0;l<x.length;l+=2)g.push(x[l]*u,-x[l+1]*u-D*u*1.2,(L-F)*P);w.push(Math.floor(g.length/3)),p.push(L)}this.tickOffset[M]=w,this.tickX[M]=p}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(g.length/3),x=i(b.labelFont[M],b.labels[M],{textAlign:"center"}).data,u=b.labelSize[M],m=0;m<x.length;m+=2)g.push(x[m]*u,-x[m+1]*u,0);this.labelCount[M]=Math.floor(g.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(g.length/3),x=i(b.titleFont,b.title).data,u=b.titleSize,m=0;m<x.length;m+=2)g.push(x[m]*u,-x[m+1]*u,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(b){var g=b.gl,d=e(g),f=a(g,r.textVert,r.textFrag),m=new v(b,d,f);return m}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(c,A,T){A.exports=g;var e=c("gl-select-static"),a=c("./lib/grid"),i=c("./lib/text"),n=c("./lib/line"),r=c("./lib/box");function v(d,f){this.gl=d,this.pickBuffer=f,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=v.prototype;s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){return function(){var d=this.gl,f=this.screenBox,m=this.viewBox,l=this.dataBox,x=this.pixelRatio,u=this.grid,M=this.line,w=this.text,p=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var _=this.borderColor;d.clearColor(_[0]*_[3],_[1]*_[3],_[2]*_[3],_[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),d.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var h=this.backgroundColor;d.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),d.clear(d.COLOR_BUFFER_BIT),u.draw();var L=this.zeroLineEnable,E=this.zeroLineColor,S=this.zeroLineWidth;if(L[0]||L[1]){M.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(l[P]<=0&&l[P+2]>=0))){var F=f[P]-l[P]*(f[P+2]-f[P])/(l[P+2]-l[P]);P===0?M.drawLine(F,f[1],F,f[3],S[P],E[P]):M.drawLine(f[0],F,f[2],F,S[P],E[P])}}for(var P=0;P<p.length;++P)p[P].draw();d.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),d.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),M.bind();var I=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;I[1]&&M.drawLine(m[0],m[1]-.5*D[1]*x,m[0],m[3]+.5*D[3]*x,D[1],R[1]),I[0]&&M.drawLine(m[0]-.5*D[0]*x,m[1],m[2]+.5*D[2]*x,m[1],D[0],R[0]),I[3]&&M.drawLine(m[2],m[1]-.5*D[1]*x,m[2],m[3]+.5*D[3]*x,D[3],R[3]),I[2]&&M.drawLine(m[0]-.5*D[0]*x,m[3],m[2]+.5*D[2]*x,m[3],D[2],R[2]),w.bind();for(var P=0;P<2;++P)w.drawTicks(P);this.titleEnable&&w.drawTitle();for(var O=this.overlays,P=0;P<O.length;++P)O[P].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}}}(),s.drawPick=function(){return function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var f=1,m=this.objects,l=0;l<m.length;++l)f=m[l].drawPick(f);d.end()}}}(),s.pick=function(){return function(d,f){if(!this.static){var m=this.pixelRatio,l=this.pickPixelRatio,x=this.viewBox,u=Math.round((d-x[0]/m)*l)|0,M=Math.round((f-x[1]/m)*l)|0,w=this.pickBuffer.query(u,M,this.pickRadius);if(!w)return null;for(var p=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),_=this.objects,h=0;h<_.length;++h){var L=_[h].pick(u,M,p);if(L)return L}return null}}}();function o(d){for(var f=d.slice(),m=0;m<f.length;++m)f[m]=f[m].slice();return f}function b(d,f){return d.x-f.x}s.setScreenBox=function(d){var f=this.screenBox,m=this.pixelRatio;f[0]=Math.round(d[0]*m)|0,f[1]=Math.round(d[1]*m)|0,f[2]=Math.round(d[2]*m)|0,f[3]=Math.round(d[3]*m)|0,this.setDirty()},s.setDataBox=function(d){var f=this.dataBox,m=f[0]!==d[0]||f[1]!==d[1]||f[2]!==d[2]||f[3]!==d[3];m&&(f[0]=d[0],f[1]=d[1],f[2]=d[2],f[3]=d[3],this.setDirty())},s.setViewBox=function(d){var f=this.pixelRatio,m=this.viewBox;m[0]=Math.round(d[0]*f)|0,m[1]=Math.round(d[1]*f)|0,m[2]=Math.round(d[2]*f)|0,m[3]=Math.round(d[3]*f)|0;var l=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((d[2]-d[0])*l)|0,Math.round((d[3]-d[1])*l)|0],this.setDirty()},s.update=function(d){d=d||{};var f=this.gl;this.pixelRatio=d.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(d.screenBox||[0,0,f.drawingBufferWidth/m,f.drawingBufferHeight/m]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var l=this.viewBox,x=(l[2]-l[0])/(l[3]-l[1]);this.setDataBox(d.dataBox||[-10,-10/x,10,10/x]),this.borderColor=d.borderColor!==!1?(d.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(l[0]+l[2])/m,(l[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var u=d.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var w=0;w<2;++w){var p=u[w].slice(0);p.length!==0&&(p.sort(b),M[w]=Math.min(M[w],p[0].x),M[w+2]=Math.max(M[w+2],p[p.length-1].x))}this.grid.update({bounds:M,ticks:u}),this.text.update({bounds:M,ticks:u,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif"}),this.static=!!d.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();this.objects.length=0;for(var d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},s.removeObject=function(d){for(var f=this.objects,m=0;m<f.length;++m)if(f[m]===d){f.splice(m,1),this.setDirty();break}},s.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},s.removeOverlay=function(d){for(var f=this.overlays,m=0;m<f.length;++m)if(f[m]===d){f.splice(m,1),this.setOverlayDirty();break}};function g(d){var f=d.gl,m=e(f,[f.drawingBufferWidth,f.drawingBufferHeight]),l=new v(f,m);return l.grid=a(l),l.text=i(l),l.line=n(l),l.box=r(l),l.update(d),l}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(c,A,T){A.exports=s;var e=c("right-now"),a=c("3d-view"),i=c("mouse-change"),n=c("mouse-wheel"),r=c("mouse-event-offset"),v=c("has-passive-events");function s(o,b){o=o||document.body,b=b||{};var g=[.01,1/0];"distanceLimits"in b&&(g[0]=b.distanceLimits[0],g[1]=b.distanceLimits[1]),"zoomMin"in b&&(g[0]=b.zoomMin),"zoomMax"in b&&(g[1]=b.zoomMax);var d=a({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:g}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,l=o.clientWidth,x=o.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:d,element:o,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:d.modes,_ortho:b._ortho||b.projection&&b.projection.type==="orthographic"||!1,tick:function(){var M=e(),w=this.delay,p=M-2*w;d.idle(M-w),d.recalcMatrix(p),d.flush(M-(100+w*2));for(var _=!0,h=d.computedMatrix,L=0;L<16;++L)_=_&&f[L]===h[L],f[L]=h[L];var E=o.clientWidth===l&&o.clientHeight===x;return l=o.clientWidth,x=o.clientHeight,_?!E:(m=Math.exp(d.computedRadius[0]),!0)},lookAt:function(M,w,p){d.lookAt(d.lastT(),M,w,p)},rotate:function(M,w,p){d.rotate(d.lastT(),M,w,p)},pan:function(M,w,p){d.pan(d.lastT(),M,w,p)},translate:function(M,w,p){d.translate(d.lastT(),M,w,p)}};return Object.defineProperties(u,{matrix:{get:function(){return d.computedMatrix},set:function(M){return d.setMatrix(d.lastT(),M),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(M){var w=d.computedUp.slice(),p=d.computedEye.slice(),_=d.computedCenter.slice();if(d.setMode(M),M==="turntable"){var h=e();d._active.lookAt(h,p,_,w),d._active.lookAt(h+500,p,_,[0,0,1]),d._active.flush(h)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(M){return d.lookAt(d.lastT(),null,M),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(M){return d.lookAt(d.lastT(),M),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(M){return d.lookAt(d.lastT(),null,null,M),d.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(M){return d.setDistance(d.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(g)},set:function(M){return d.setDistanceLimits(M),M},enumerable:!0}}),o.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),u._lastX=-1,u._lastY=-1,u._lastMods={shift:!1,control:!1,alt:!1,meta:!1},u.enableMouseListeners=function(){u.mouseListener=i(o,M),o.addEventListener("touchstart",function(w){var p=r(w.changedTouches[0],o);M(0,p[0],p[1],u._lastMods),M(1,p[0],p[1],u._lastMods)},v?{passive:!0}:!1),o.addEventListener("touchmove",function(w){var p=r(w.changedTouches[0],o);M(1,p[0],p[1],u._lastMods),w.preventDefault()},v?{passive:!1}:!1),o.addEventListener("touchend",function(w){M(0,u._lastX,u._lastY,u._lastMods)},v?{passive:!0}:!1);function M(w,p,_,h){var L=u.keyBindingMode;if(L!==!1){var E=L==="rotate",S=L==="pan",P=L==="zoom",F=!!h.control,I=!!h.alt,D=!!h.shift,R=!!(w&1),O=!!(w&2),z=!!(w&4),G=1/o.clientHeight,Y=G*(p-u._lastX),ee=G*(_-u._lastY),j=u.flipX?1:-1,X=u.flipY?1:-1,ae=Math.PI*u.rotateSpeed,he=e();if(u._lastX!==-1&&u._lastY!==-1&&((E&&R&&!F&&!I&&!D||R&&!F&&!I&&D)&&d.rotate(he,j*ae*Y,-X*ae*ee,0),(S&&R&&!F&&!I&&!D||O||R&&F&&!I&&!D)&&d.pan(he,-u.translateSpeed*Y*m,u.translateSpeed*ee*m,0),P&&R&&!F&&!I&&!D||z||R&&!F&&I&&!D)){var K=-u.zoomSpeed*ee/window.innerHeight*(he-d.lastT())*100;d.pan(he,0,0,m*(Math.exp(K)-1))}return u._lastX=p,u._lastY=_,u._lastMods=h,!0}}u.wheelListener=n(o,function(w,p){if(u.keyBindingMode!==!1&&!!u.enableWheel){var _=u.flipX?1:-1,h=u.flipY?1:-1,L=e();if(Math.abs(w)>Math.abs(p))d.rotate(L,0,0,-w*_*Math.PI*u.rotateSpeed/window.innerWidth);else if(!u._ortho){var E=-u.zoomSpeed*h*p/window.innerHeight*(L-d.lastT())/20;d.pan(L,0,0,m*(Math.exp(E)-1))}}},!0)},u.enableMouseListeners(),u}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),n=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(c,A,T){var e=c("./camera.js"),a=c("gl-axes3d"),i=c("gl-axes3d/properties"),n=c("gl-spikes3d"),r=c("gl-select-static"),v=c("gl-fbo"),s=c("a-big-triangle"),o=c("mouse-change"),b=c("gl-mat4/perspective"),g=c("gl-mat4/ortho"),d=c("./lib/shader"),f=c("is-mobile")({tablet:!0,featureDetect:!0});A.exports={createScene:M,createCamera:e};function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(p,_){var h=null;try{h=p.getContext("webgl",_),h||(h=p.getContext("experimental-webgl",_))}catch{return null}return h}function x(p){var _=Math.round(Math.log(Math.abs(p))/Math.log(10));if(_<0){var h=Math.round(Math.pow(10,-_));return Math.ceil(p*h)/h}else if(_>0){var h=Math.round(Math.pow(10,_));return Math.ceil(p/h)*h}return Math.ceil(p)}function u(p){return typeof p=="boolean"?p:!0}function M(p){p=p||{},p.camera=p.camera||{};var _=p.canvas;if(!_)if(_=document.createElement("canvas"),p.container){var h=p.container;h.appendChild(_)}else document.body.appendChild(_);var L=p.gl;if(L||(p.glOptions&&(f=!!p.glOptions.preserveDrawingBuffer),L=l(_,p.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:f})),!L)throw new Error("webgl not supported");var E=p.bounds||[[-10,-10,-10],[10,10,10]],S=new m,P=v(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!f}),F=d(L),I=p.cameraObject&&p.cameraObject._ortho===!0||p.camera.projection&&p.camera.projection.type==="orthographic"||!1,D={eye:p.camera.eye||[2,0,0],center:p.camera.center||[0,0,0],up:p.camera.up||[0,1,0],zoomMin:p.camera.zoomMax||.1,zoomMax:p.camera.zoomMin||100,mode:p.camera.mode||"turntable",_ortho:I},R=p.axes||{},O=a(L,R);O.enable=!R.disable;var z=p.spikes||{},G=n(L,z),Y=[],ee=[],j=[],X=[],ae=!0,U=!0,he=new Array(16),K=new Array(16),J={view:null,projection:he,model:K,_ortho:!1},U=!0,H=[L.drawingBufferWidth,L.drawingBufferHeight],q=p.cameraObject||e(_,D),re={gl:L,contextLost:!1,pixelRatio:p.pixelRatio||1,canvas:_,selection:S,camera:q,axes:O,axesPixels:null,spikes:G,bounds:E,objects:Y,shape:H,aspect:p.aspectRatio||[1,1,1],pickRadius:p.pickRadius||10,zNear:p.zNear||.01,zFar:p.zFar||1e3,fovy:p.fovy||Math.PI/4,clearColor:p.clearColor||[0,0,0,0],autoResize:u(p.autoResize),autoBounds:u(p.autoBounds),autoScale:!!p.autoScale,autoCenter:u(p.autoCenter),clipToBounds:u(p.clipToBounds),snapToData:!!p.snapToData,onselect:p.onselect||null,onrender:p.onrender||null,onclick:p.onclick||null,cameraParams:J,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xe){this.aspect[0]=xe.x,this.aspect[1]=xe.y,this.aspect[2]=xe.z,U=!0},setBounds:function(xe,me){this.bounds[0][xe]=me.min,this.bounds[1][xe]=me.max},setClearColor:function(xe){this.clearColor=xe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},Z=[L.drawingBufferWidth/re.pixelRatio|0,L.drawingBufferHeight/re.pixelRatio|0];function Q(){if(!re._stopped&&!!re.autoResize){var xe=_.parentNode,me=1,be=1;xe&&xe!==document.body?(me=xe.clientWidth,be=xe.clientHeight):(me=window.innerWidth,be=window.innerHeight);var ke=Math.ceil(me*re.pixelRatio)|0,De=Math.ceil(be*re.pixelRatio)|0;if(ke!==_.width||De!==_.height){_.width=ke,_.height=De;var He=_.style;He.position=He.position||"absolute",He.left="0px",He.top="0px",He.width=me+"px",He.height=be+"px",ae=!0}}}re.autoResize&&Q(),window.addEventListener("resize",Q);function ie(){for(var xe=Y.length,me=X.length,be=0;be<me;++be)j[be]=0;e:for(var be=0;be<xe;++be){var ke=Y[be],De=ke.pickSlots;if(!De){ee[be]=-1;continue}for(var He=0;He<me;++He)if(j[He]+De<255){ee[be]=He,ke.setPickBase(j[He]+1),j[He]+=De;continue e}var Ae=r(L,H);ee[be]=me,X.push(Ae),j.push(De),ke.setPickBase(1),me+=1}for(;me>0&&j[me-1]===0;)j.pop(),X.pop().dispose()}re.update=function(xe){re._stopped||(ae=!0,U=!0)},re.add=function(xe){re._stopped||(xe.axes=O,Y.push(xe),ee.push(-1),ae=!0,U=!0,ie())},re.remove=function(xe){if(!re._stopped){var me=Y.indexOf(xe);me<0||(Y.splice(me,1),ee.pop(),ae=!0,U=!0,ie())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",Q),_.removeEventListener("webglcontextlost",oe),re.mouseListener.enabled=!1,!re.contextLost)){O.dispose(),G.dispose();for(var xe=0;xe<Y.length;++xe)Y[xe].dispose();P.dispose();for(var xe=0;xe<X.length;++xe)X[xe].dispose();F.dispose(),L=null,O=null,G=null,Y=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=o(_,function(xe,me,be){if(!re._stopped){var ke=X.length,De=Y.length,He=S.object;S.distance=1/0,S.mouse[0]=me,S.mouse[1]=be,S.object=null,S.screen=null,S.dataCoordinate=S.dataPosition=null;var Ae=!1;if(xe&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(U=!0),re._mouseRotating=!1;for(var Le=0;Le<ke;++Le){var Ze=X[Le].query(me,Z[1]-be-1,re.pickRadius);if(Ze){if(Ze.distance>S.distance)continue;for(var We=0;We<De;++We){var ze=Y[We];if(ee[We]===Le){var Ie=ze.pick(Ze);Ie&&(S.buttons=xe,S.screen=Ze.coord,S.distance=Ze.distance,S.object=ze,S.index=Ie.distance,S.dataPosition=Ie.position,S.dataCoordinate=Ie.dataCoordinate,S.data=Ie,Ae=!0)}}}}}He&&He!==S.object&&(He.highlight&&He.highlight(null),ae=!0),S.object&&(S.object.highlight&&S.object.highlight(S.data),ae=!0),Ae=Ae||S.object!==He,Ae&&re.onselect&&re.onselect(S),xe&1&&!(re._prevButtons&1)&&re.onclick&&re.onclick(S),re._prevButtons=xe}})};function oe(){if(re.contextLost)return!0;L.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}_.addEventListener("webglcontextlost",oe);function ne(){if(!oe()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var xe=Y.length,me=X.length,be=0;be<me;++be){var ke=X[be];ke.shape=Z,ke.begin();for(var De=0;De<xe;++De)if(ee[De]===be){var He=Y[De];He.drawPick&&(He.pixelRatio=1,He.drawPick(J))}ke.end()}}}var le=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=[le[0].slice(),le[1].slice()];function fe(){if(!oe()){Q();var xe=re.camera.tick();J.view=re.camera.matrix,ae=ae||xe,U=U||xe,O.pixelRatio=re.pixelRatio,G.pixelRatio=re.pixelRatio;var me=Y.length,be=le[0],ke=le[1];be[0]=be[1]=be[2]=1/0,ke[0]=ke[1]=ke[2]=-1/0;for(var De=0;De<me;++De){var He=Y[De];He.pixelRatio=re.pixelRatio,He.axes=re.axes,ae=ae||!!He.dirty,U=U||!!He.dirty;var Ae=He.bounds;if(Ae)for(var Le=Ae[0],Ze=Ae[1],We=0;We<3;++We)be[We]=Math.min(be[We],Le[We]),ke[We]=Math.max(ke[We],Ze[We])}var ze=re.bounds;if(re.autoBounds)for(var We=0;We<3;++We){if(ke[We]<be[We])be[We]=-1,ke[We]=1;else{be[We]===ke[We]&&(be[We]-=1,ke[We]+=1);var Ie=.05*(ke[We]-be[We]);be[We]=be[We]-Ie,ke[We]=ke[We]+Ie}ze[0][We]=be[We],ze[1][We]=ke[We]}for(var Ve=!1,We=0;We<3;++We)Ve=Ve||_e[0][We]!==ze[0][We]||_e[1][We]!==ze[1][We],_e[0][We]=ze[0][We],_e[1][We]=ze[1][We];if(U=U||Ve,ae=ae||Ve,!!ae){if(Ve){for(var dt=[0,0,0],De=0;De<3;++De)dt[De]=x((ze[1][De]-ze[0][De])/10);O.autoTicks?O.update({bounds:ze,tickSpacing:dt}):O.update({bounds:ze})}var Ft=L.drawingBufferWidth,Qt=L.drawingBufferHeight;H[0]=Ft,H[1]=Qt,Z[0]=Math.max(Ft/re.pixelRatio,1)|0,Z[1]=Math.max(Qt/re.pixelRatio,1)|0,w(re,I);for(var De=0;De<me;++De){var He=Y[De];He.axesBounds=ze,re.clipToBounds&&(He.clipBounds=ze)}S.object&&(re.snapToData?G.position=S.dataCoordinate:G.position=S.dataPosition,G.bounds=ze),U&&(U=!1,ne()),re.axesPixels=i(re.axes,J,Ft,Qt),re.onrender&&re.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Ft,Qt),re.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var Ot=!1;O.enable&&(Ot=Ot||O.isTransparent(),O.draw(J)),G.axes=O,S.object&&G.draw(J),L.disable(L.CULL_FACE);for(var De=0;De<me;++De){var He=Y[De];He.axes=O,He.pixelRatio=re.pixelRatio,He.isOpaque&&He.isOpaque()&&He.draw(J),He.isTransparent&&He.isTransparent()&&(Ot=!0)}if(Ot){P.shape=H,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(J);for(var De=0;De<me;++De){var He=Y[De];He.isOpaque&&He.isOpaque()&&He.draw(J)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(J);for(var De=0;De<me;++De){var He=Y[De];He.isTransparent&&He.isTransparent()&&He.drawTransparent(J)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),F.bind(),P.color[0].bind(0),F.uniforms.accumBuffer=0,s(L),L.disable(L.BLEND)}ae=!1;for(var De=0;De<me;++De)Y[De].dirty=!1}}}function ye(){re._stopped||re.contextLost||(fe(),requestAnimationFrame(ye))}return re.enableMouseListeners(),ye(),re.redraw=function(){re._stopped||(ae=!0,fe())},re}function w(p,_){var h=p.bounds,L=p.cameraParams,E=L.projection,S=L.model,P=p.gl.drawingBufferWidth,F=p.gl.drawingBufferHeight,I=p.zNear,D=p.zFar,R=p.fovy,O=P/F;_?(g(E,-O,O,-1,1,I,D),L._ortho=!0):(b(E,R,O,I,D),L._ortho=!1);for(var z=0;z<16;++z)S[z]=0;S[15]=1;for(var G=0,z=0;z<3;++z)G=Math.max(G,h[1][z]-h[0][z]);for(var z=0;z<3;++z)p.autoScale?S[5*z]=p.aspect[z]/(h[1][z]-h[0][z]):S[5*z]=1/G,p.autoCenter&&(S[12+z]=-S[5*z]*.5*(h[0][z]+h[1][z]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(c,A,T){var e=c("glslify");T.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),T.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),T.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),T.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(c,A,T){var e=c("gl-shader"),a=c("gl-buffer"),i=c("typedarray-pool"),n=c("./lib/shader");A.exports=o;function r(b,g,d,f,m){this.plot=b,this.offsetBuffer=g,this.pickBuffer=d,this.shader=f,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var v=r.prototype;v.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},v.update=function(b){var g;b=b||{};function d(w,p){return w in b?b[w]:p}this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var f=b.positions.length>>>1,m=b.positions instanceof Float32Array,l=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=f,x=b.positions,u=m?x:i.mallocFloat32(x.length),M=l?b.idToIndex:i.mallocInt32(f);if(m||u.set(x),!l)for(u.set(x),g=0;g<f;g++)M[g]=g;this.points=x,this.offsetBuffer.update(u),this.pickBuffer.update(M),m||i.free(u),l||i.free(M),this.pointCount=f,this.pickOffset=0};function s(b,g){var d=0,f=b.length>>>1,m;for(m=0;m<f;m++){var l=b[m*2],x=b[m*2+1];l>=g[0]&&l<=g[2]&&x>=g[1]&&x<=g[3]&&d++}return d}v.unifiedDraw=function(){var b=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(d){var f=d!==void 0,m=f?this.pickShader:this.shader,l=this.plot.gl,x=this.plot.dataBox;if(this.pointCount===0)return d;var u=x[2]-x[0],M=x[3]-x[1],w=s(this.points,x),p=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));b[0]=2/u,b[4]=2/M,b[6]=-2*x[0]/u-1,b[7]=-2*x[1]/M-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=b,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=p<5,m.uniforms.pointSize=p,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),f&&(g[0]=d&255,g[1]=d>>8&255,g[2]=d>>16&255,g[3]=d>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(l.UNSIGNED_BYTE),m.uniforms.pickOffset=g,this.pickOffset=d);var _=l.getParameter(l.BLEND),h=l.getParameter(l.DITHER);return _&&!this.blend&&l.disable(l.BLEND),h&&l.disable(l.DITHER),l.drawArrays(l.POINTS,0,this.pointCount),_&&!this.blend&&l.enable(l.BLEND),h&&l.enable(l.DITHER),d+this.pointCount}}(),v.draw=v.unifiedDraw,v.drawPick=v.unifiedDraw,v.pick=function(b,g,d){var f=this.pickOffset,m=this.pointCount;if(d<f||d>=f+m)return null;var l=d-f,x=this.points;return{object:this,pointId:l,dataCoord:[x[2*l],x[2*l+1]]}};function o(b,g){var d=b.gl,f=a(d),m=a(d),l=e(d,n.pointVertex,n.pointFragment),x=e(d,n.pickVertex,n.pickFragment),u=new r(b,f,m,l,x);return u.update(g),b.addObject(u),u}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2],b=i[3],g=n[0],d=n[1],f=n[2],m=n[3],l,x,u,M,w;return x=v*g+s*d+o*f+b*m,x<0&&(x=-x,g=-g,d=-d,f=-f,m=-m),1-x>1e-6?(l=Math.acos(x),u=Math.sin(l),M=Math.sin((1-r)*l)/u,w=Math.sin(r*l)/u):(M=1-r,w=r),a[0]=M*v+w*g,a[1]=M*s+w*d,a[2]=M*o+w*f,a[3]=M*b+w*m,a}},{}],125:[function(c,A,T){A.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(c,A,T){var e=c("vectorize-text");A.exports=i;var a={};function i(n,r,v){var s=a[r];if(s||(s=a[r]={}),n in s)return s[n];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var b=e(n,o);o.triangles=!1;var g=e(n,o),d,f;if(v&&v!==1){for(d=0;d<b.positions.length;++d)for(f=0;f<b.positions[d].length;++f)b.positions[d][f]/=v;for(d=0;d<g.positions.length;++d)for(f=0;f<g.positions[d].length;++f)g.positions[d][f]/=v}var m=[[1/0,1/0],[-1/0,-1/0]],l=g.positions.length;for(d=0;d<l;++d){var x=g.positions[d];for(f=0;f<2;++f)m[0][f]=Math.min(m[0][f],x[f]),m[1][f]=Math.max(m[1][f],x[f])}return s[n]=[b,g,m]}},{"vectorize-text":311}],127:[function(c,A,T){var e=c("gl-shader"),a=c("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:i,fragment:v,attributes:o},g={vertex:n,fragment:v,attributes:o},d={vertex:r,fragment:v,attributes:o},f={vertex:i,fragment:s,attributes:o},m={vertex:n,fragment:s,attributes:o},l={vertex:r,fragment:s,attributes:o};function x(u,M){var w=e(u,M),p=w.attributes;return p.position.location=0,p.color.location=1,p.glyph.location=2,p.id.location=3,w}T.createPerspective=function(u){return x(u,b)},T.createOrtho=function(u){return x(u,g)},T.createProject=function(u){return x(u,d)},T.createPickPerspective=function(u){return x(u,f)},T.createPickOrtho=function(u){return x(u,m)},T.createPickProject=function(u){return x(u,l)}},{"gl-shader":132,glslify:231}],128:[function(c,A,T){var e=c("is-string-blank"),a=c("gl-buffer"),i=c("gl-vao"),n=c("typedarray-pool"),r=c("gl-mat4/multiply"),v=c("./lib/shaders"),s=c("./lib/glyphs"),o=c("./lib/get-simple-string"),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];A.exports=ee;function g(j,X){var ae=j[0],he=j[1],K=j[2],J=j[3];return j[0]=X[0]*ae+X[4]*he+X[8]*K+X[12]*J,j[1]=X[1]*ae+X[5]*he+X[9]*K+X[13]*J,j[2]=X[2]*ae+X[6]*he+X[10]*K+X[14]*J,j[3]=X[3]*ae+X[7]*he+X[11]*K+X[15]*J,j}function d(j,X,ae,he){return g(he,he),g(he,he),g(he,he)}function f(j,X){this.index=j,this.dataCoordinate=this.position=X}function m(j){return j===!0||j>1?1:j}function l(j,X,ae,he,K,J,U,H,q,re,Z,Q){this.gl=j,this.pixelRatio=1,this.shader=X,this.orthoShader=ae,this.projectShader=he,this.pointBuffer=K,this.colorBuffer=J,this.glyphBuffer=U,this.idBuffer=H,this.vao=q,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=re,this.pickOrthoShader=Z,this.pickProjectShader=Q,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var x=l.prototype;x.pickSlots=1,x.setPickBase=function(j){this.pickId=j},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],M=[0,0,0],w=[0,0,0],p=[0,0,0,1],_=[0,0,0,1],h=b.slice(),L=[0,0,0],E=[[0,0,0],[0,0,0]];function S(j){return j[0]=j[1]=j[2]=0,j}function P(j,X){return j[0]=X[0],j[1]=X[1],j[2]=X[2],j[3]=1,j}function F(j,X,ae,he){return j[0]=X[0],j[1]=X[1],j[2]=X[2],j[ae]=he,j}function I(j){for(var X=E,ae=0;ae<2;++ae)for(var he=0;he<3;++he)X[ae][he]=Math.max(Math.min(j[ae][he],1e8),-1e8);return X}function D(j,X,ae,he){var K=X.axesProject,J=X.gl,U=j.uniforms,H=ae.model||b,q=ae.view||b,re=ae.projection||b,Z=X.axesBounds,Q=I(X.clipBounds),ie;X.axes&&X.axes.lastCubeProps?ie=X.axes.lastCubeProps.axis:ie=[1,1,1],u[0]=2/J.drawingBufferWidth,u[1]=2/J.drawingBufferHeight,j.bind(),U.view=q,U.projection=re,U.screenSize=u,U.highlightId=X.highlightId,U.highlightScale=X.highlightScale,U.clipBounds=Q,U.pickGroup=X.pickId/255,U.pixelRatio=he;for(var oe=0;oe<3;++oe)if(!!K[oe]){U.scale=X.projectScale[oe],U.opacity=X.projectOpacity[oe];for(var ne=h,le=0;le<16;++le)ne[le]=0;for(var le=0;le<4;++le)ne[5*le]=1;ne[5*oe]=0,ie[oe]<0?ne[12+oe]=Z[0][oe]:ne[12+oe]=Z[1][oe],r(ne,H,ne),U.model=ne;var _e=(oe+1)%3,fe=(oe+2)%3,ye=S(M),xe=S(w);ye[_e]=1,xe[fe]=1;var me=d(re,q,H,P(p,ye)),be=d(re,q,H,P(_,xe));if(Math.abs(me[1])>Math.abs(be[1])){var ke=me;me=be,be=ke,ke=ye,ye=xe,xe=ke;var De=_e;_e=fe,fe=De}me[0]<0&&(ye[_e]=-1),be[1]>0&&(xe[fe]=-1);for(var He=0,Ae=0,le=0;le<4;++le)He+=Math.pow(H[4*_e+le],2),Ae+=Math.pow(H[4*fe+le],2);ye[_e]/=Math.sqrt(He),xe[fe]/=Math.sqrt(Ae),U.axes[0]=ye,U.axes[1]=xe,U.fragClipBounds[0]=F(L,Q[0],oe,-1e8),U.fragClipBounds[1]=F(L,Q[1],oe,1e8),X.vao.bind(),X.vao.draw(J.TRIANGLES,X.vertexCount),X.lineWidth>0&&(J.lineWidth(X.lineWidth*he),X.vao.draw(J.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}var R=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],z=[R,O];function G(j,X,ae,he,K,J,U){var H=ae.gl;if((J===ae.projectHasAlpha||U)&&D(X,ae,he,K),J===ae.hasAlpha||U){j.bind();var q=j.uniforms;q.model=he.model||b,q.view=he.view||b,q.projection=he.projection||b,u[0]=2/H.drawingBufferWidth,u[1]=2/H.drawingBufferHeight,q.screenSize=u,q.highlightId=ae.highlightId,q.highlightScale=ae.highlightScale,q.fragClipBounds=z,q.clipBounds=ae.axes.bounds,q.opacity=ae.opacity,q.pickGroup=ae.pickId/255,q.pixelRatio=K,ae.vao.bind(),ae.vao.draw(H.TRIANGLES,ae.vertexCount),ae.lineWidth>0&&(H.lineWidth(ae.lineWidth*K),ae.vao.draw(H.LINES,ae.lineVertexCount,ae.vertexCount)),ae.vao.unbind()}}x.draw=function(j){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,j,this.pixelRatio,!1,!1)},x.drawTransparent=function(j){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,j,this.pixelRatio,!0,!1)},x.drawPick=function(j){var X=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;G(X,this.pickProjectShader,this,j,1,!0,!0)},x.pick=function(j){if(!j||j.id!==this.pickId)return null;var X=j.value[2]+(j.value[1]<<8)+(j.value[0]<<16);if(X>=this.pointCount||X<0)return null;var ae=this.points[X],he=this._selectResult;he.index=X;for(var K=0;K<3;++K)he.position[K]=he.dataCoordinate[K]=ae[K];return he},x.highlight=function(j){if(!j)this.highlightId=[1,1,1,1];else{var X=j.index,ae=X&255,he=X>>8&255,K=X>>16&255;this.highlightId=[ae/255,he/255,K/255,0]}};function Y(j,X,ae,he){var K;Array.isArray(j)?X<j.length?K=j[X]:K=void 0:K=j,K=o(K);var J=!0;e(K)&&(K="\u25BC",J=!1);var U=s(K,ae,he);return{mesh:U[0],lines:U[1],bounds:U[2],visible:J}}x.update=function(j){if(j=j||{},"perspective"in j&&(this.useOrtho=!j.perspective),"orthographic"in j&&(this.useOrtho=!!j.orthographic),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"project"in j)if(Array.isArray(j.project))this.axesProject=j.project;else{var X=!!j.project;this.axesProject=[X,X,X]}if("projectScale"in j)if(Array.isArray(j.projectScale))this.projectScale=j.projectScale.slice();else{var ae=+j.projectScale;this.projectScale=[ae,ae,ae]}if(this.projectHasAlpha=!1,"projectOpacity"in j){if(Array.isArray(j.projectOpacity))this.projectOpacity=j.projectOpacity.slice();else{var ae=+j.projectOpacity;this.projectOpacity=[ae,ae,ae]}for(var he=0;he<3;++he)this.projectOpacity[he]=m(this.projectOpacity[he]),this.projectOpacity[he]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in j&&(this.opacity=m(j.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var K=j.position,J=j.font||"normal",U=j.alignment||[0,0],H,q;if(U.length===2)H=U[0],q=U[1];else{H=[],q=[];for(var he=0;he<U.length;++he)H[he]=U[he][0],q[he]=U[he][1]}var re=[1/0,1/0,1/0],Z=[-1/0,-1/0,-1/0],Q=j.glyph,ie=j.color,oe=j.size,ne=j.angle,le=j.lineColor,_e=-1,fe=0,ye=0,xe=0;if(K.length){xe=K.length;e:for(var he=0;he<xe;++he){for(var me=K[he],be=0;be<3;++be)if(isNaN(me[be])||!isFinite(me[be]))continue e;var ke=Y(Q,he,J,this.pixelRatio),De=ke.mesh,He=ke.lines,Ae=ke.bounds;fe+=De.cells.length*3,ye+=He.edges.length*2}}var Le=fe+ye,Ze=n.mallocFloat(3*Le),We=n.mallocFloat(4*Le),ze=n.mallocFloat(2*Le),Ie=n.mallocUint32(Le);if(Le>0){var Ve=0,dt=fe,Ft=[0,0,0,1],Qt=[0,0,0,1],Ot=Array.isArray(ie)&&Array.isArray(ie[0]),Ct=Array.isArray(le)&&Array.isArray(le[0]);e:for(var he=0;he<xe;++he){_e+=1;for(var me=K[he],be=0;be<3;++be){if(isNaN(me[be])||!isFinite(me[be]))continue e;Z[be]=Math.max(Z[be],me[be]),re[be]=Math.min(re[be],me[be])}var ke=Y(Q,he,J,this.pixelRatio),De=ke.mesh,He=ke.lines,Ae=ke.bounds,jt=ke.visible;if(!jt)Ft=[1,1,1,0];else if(Array.isArray(ie)){var Nt;if(Ot?he<ie.length?Nt=ie[he]:Nt=[0,0,0,0]:Nt=ie,Nt.length===3){for(var be=0;be<3;++be)Ft[be]=Nt[be];Ft[3]=1}else if(Nt.length===4){for(var be=0;be<4;++be)Ft[be]=Nt[be];!this.hasAlpha&&Nt[3]<1&&(this.hasAlpha=!0)}}else Ft[0]=Ft[1]=Ft[2]=0,Ft[3]=1;if(!jt)Qt=[1,1,1,0];else if(Array.isArray(le)){var Nt;if(Ct?he<le.length?Nt=le[he]:Nt=[0,0,0,0]:Nt=le,Nt.length===3){for(var be=0;be<3;++be)Qt[be]=Nt[be];Qt[be]=1}else if(Nt.length===4){for(var be=0;be<4;++be)Qt[be]=Nt[be];!this.hasAlpha&&Nt[3]<1&&(this.hasAlpha=!0)}}else Qt[0]=Qt[1]=Qt[2]=0,Qt[3]=1;var Lt=.5;jt?Array.isArray(oe)?he<oe.length?Lt=+oe[he]:Lt=12:oe?Lt=+oe:this.useOrtho&&(Lt=12):Lt=0;var Xe=0;Array.isArray(ne)?he<ne.length?Xe=+ne[he]:Xe=0:ne&&(Xe=+ne);for(var it=Math.cos(Xe),Ye=Math.sin(Xe),me=K[he],be=0;be<3;++be)Z[be]=Math.max(Z[be],me[be]),re[be]=Math.min(re[be],me[be]);var Ee=H,Ge=q,Ee=0;Array.isArray(H)?he<H.length?Ee=H[he]:Ee=0:H&&(Ee=H);var Ge=0;Array.isArray(q)?he<q.length?Ge=q[he]:Ge=0:q&&(Ge=q),Ee*=Ee>0?1-Ae[0][0]:Ee<0?1+Ae[1][0]:1,Ge*=Ge>0?1-Ae[0][1]:Ge<0?1+Ae[1][1]:1;for(var Ke=[Ee,Ge],Gt=De.cells||[],zt=De.positions||[],be=0;be<Gt.length;++be)for(var qe=Gt[be],At=0;At<3;++At){for(var mt=0;mt<3;++mt)Ze[3*Ve+mt]=me[mt];for(var mt=0;mt<4;++mt)We[4*Ve+mt]=Ft[mt];Ie[Ve]=_e;var Mt=zt[qe[At]];ze[2*Ve]=Lt*(it*Mt[0]-Ye*Mt[1]+Ke[0]),ze[2*Ve+1]=Lt*(Ye*Mt[0]+it*Mt[1]+Ke[1]),Ve+=1}for(var Gt=He.edges,zt=He.positions,be=0;be<Gt.length;++be)for(var qe=Gt[be],At=0;At<2;++At){for(var mt=0;mt<3;++mt)Ze[3*dt+mt]=me[mt];for(var mt=0;mt<4;++mt)We[4*dt+mt]=Qt[mt];Ie[dt]=_e;var Mt=zt[qe[At]];ze[2*dt]=Lt*(it*Mt[0]-Ye*Mt[1]+Ke[0]),ze[2*dt+1]=Lt*(Ye*Mt[0]+it*Mt[1]+Ke[1]),dt+=1}}}this.bounds=[re,Z],this.points=K,this.pointCount=K.length,this.vertexCount=fe,this.lineVertexCount=ye,this.pointBuffer.update(Ze),this.colorBuffer.update(We),this.glyphBuffer.update(ze),this.idBuffer.update(Ie),n.free(Ze),n.free(We),n.free(ze),n.free(Ie)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function ee(j){var X=j.gl,ae=v.createPerspective(X),he=v.createOrtho(X),K=v.createProject(X),J=v.createPickPerspective(X),U=v.createPickOrtho(X),H=v.createPickProject(X),q=a(X),re=a(X),Z=a(X),Q=a(X),ie=i(X,[{buffer:q,size:3,type:X.FLOAT},{buffer:re,size:4,type:X.FLOAT},{buffer:Z,size:2,type:X.FLOAT},{buffer:Q,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),oe=new l(X,ae,he,K,q,re,Z,Q,ie,J,U,H);return oe.update(j),oe}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(c,A,T){var e=c("glslify");T.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),T.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(c,A,T){var e=c("gl-shader"),a=c("gl-buffer"),i=c("./lib/shaders");A.exports=v;function n(s,o,b){this.plot=s,this.boxBuffer=o,this.boxShader=b,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var r=n.prototype;r.draw=function(){if(!!this.enabled){var s=this.plot,o=this.selectBox,b=this.borderWidth;this.innerFill;var g=this.innerColor;this.outerFill;var d=this.outerColor,f=this.borderColor,m=s.box,l=s.screenBox,x=s.dataBox,u=s.viewBox,M=s.pixelRatio,w=(o[0]-x[0])*(u[2]-u[0])/(x[2]-x[0])+u[0],p=(o[1]-x[1])*(u[3]-u[1])/(x[3]-x[1])+u[1],_=(o[2]-x[0])*(u[2]-u[0])/(x[2]-x[0])+u[0],h=(o[3]-x[1])*(u[3]-u[1])/(x[3]-x[1])+u[1];if(w=Math.max(w,u[0]),p=Math.max(p,u[1]),_=Math.min(_,u[2]),h=Math.min(h,u[3]),!(_<w||h<p)){m.bind();var L=l[2]-l[0],E=l[3]-l[1];if(this.outerFill&&(m.drawBox(0,0,L,p,d),m.drawBox(0,p,w,h,d),m.drawBox(0,h,L,E,d),m.drawBox(_,p,L,h,d)),this.innerFill&&m.drawBox(w,p,_,h,g),b>0){var S=b*M;m.drawBox(w-S,p-S,_+S,p+S,f),m.drawBox(w-S,h-S,_+S,h+S,f),m.drawBox(w-S,p-S,w+S,h+S,f),m.drawBox(_-S,p-S,_+S,h+S,f)}}}},r.update=function(s){s=s||{},this.innerFill=!!s.innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function v(s,o){var b=s.gl,g=a(b,[0,0,0,1,1,0,1,1]),d=e(b,i.boxVertex,i.boxFragment),f=new n(s,g,d);return f.update(o),s.addOverlay(f),f}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(c,A,T){A.exports=b;var e=c("gl-fbo"),a=c("typedarray-pool"),i=c("ndarray"),n=c("bit-twiddle").nextPow2,r=function(g,d,f){for(var m=1e8,l=-1,x=-1,u=g.shape[0],M=g.shape[1],w=0;w<u;w++)for(var p=0;p<M;p++){var _=g.get(w,p,0),h=g.get(w,p,1),L=g.get(w,p,2),E=g.get(w,p,3);if(_<255||h<255||L<255||E<255){var S=d-w,P=f-p,F=S*S+P*P;F<m&&(m=F,l=w,x=p)}}return[l,x,m]};function v(g,d,f,m,l){this.coord=[g,d],this.id=f,this.value=m,this.distance=l}function s(g,d,f){this.gl=g,this.fbo=d,this.buffer=f,this._readTimeout=null;var m=this;this._readCallback=function(){!m.gl||(d.bind(),g.readPixels(0,0,d.shape[0],d.shape[1],g.RGBA,g.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}var o=s.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(g){if(!!this.gl){this.fbo.shape=g;var d=this.fbo.shape[0],f=this.fbo.shape[1];if(f*d*4>this.buffer.length){a.free(this.buffer);for(var m=this.buffer=a.mallocUint8(n(f*d*4)),l=0;l<f*d*4;++l)m[l]=255}return g}}}),o.begin=function(){var g=this.gl;this.shape,g&&(this.fbo.bind(),g.clearColor(1,1,1,1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT))},o.end=function(){var g=this.gl;!g||(g.bindFramebuffer(g.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(g,d,f){if(!this.gl)return null;var m=this.fbo.shape.slice();g=g|0,d=d|0,typeof f!="number"&&(f=1);var l=Math.min(Math.max(g-f,0),m[0])|0,x=Math.min(Math.max(g+f,0),m[0])|0,u=Math.min(Math.max(d-f,0),m[1])|0,M=Math.min(Math.max(d+f,0),m[1])|0;if(x<=l||M<=u)return null;var w=[x-l,M-u],p=i(this.buffer,[w[0],w[1],4],[4,m[0]*4,1],4*(l+m[0]*u)),_=r(p.hi(w[0],w[1],1),f,f),h=_[0],L=_[1];if(h<0||Math.pow(this.radius,2)<_[2])return null;var E=p.get(h,L,0),S=p.get(h,L,1),P=p.get(h,L,2),F=p.get(h,L,3);return new v(h+l|0,L+u|0,E,[S,P,F],Math.sqrt(_[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function b(g,d){var f=d[0],m=d[1],l={},x=e(g,f,m,l),u=a.mallocUint8(f*m*4);return new s(g,x,u)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(c,A,T){var e=c("./lib/create-uniforms"),a=c("./lib/create-attributes"),i=c("./lib/reflect"),n=c("./lib/shader-cache"),r=c("./lib/runtime-reflect"),v=c("./lib/GLError");function s(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=s.prototype;o.bind=function(){this.program||this._relink();var d,f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(f>m)for(d=m;d<f;d++)this.gl.enableVertexAttribArray(d);else if(m>f)for(d=f;d<m;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},o.dispose=function(){for(var d=this.gl.lastAttribCount,f=0;f<d;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function b(d,f){return d.name<f.name?-1:1}o.update=function(d,f,m,l){if(!f||arguments.length===1){var x=d;d=x.vertex,f=x.fragment,m=x.uniforms,l=x.attributes}var u=this,M=u.gl,w=u._vref;u._vref=n.shader(M,M.VERTEX_SHADER,d),w&&w.dispose(),u.vertShader=u._vref.shader;var p=this._fref;if(u._fref=n.shader(M,M.FRAGMENT_SHADER,f),p&&p.dispose(),u.fragShader=u._fref.shader,!m||!l){var _=M.createProgram();if(M.attachShader(_,u.fragShader),M.attachShader(_,u.vertShader),M.linkProgram(_),!M.getProgramParameter(_,M.LINK_STATUS)){var h=M.getProgramInfoLog(_);throw new v(h,"Error linking program:"+h)}m=m||r.uniforms(M,_),l=l||r.attributes(M,_),M.deleteProgram(_)}l=l.slice(),l.sort(b);var L=[],E=[],S=[],P;for(P=0;P<l.length;++P){var F=l[P];if(F.type.indexOf("mat")>=0){for(var I=F.type.charAt(F.type.length-1)|0,D=new Array(I),R=0;R<I;++R)D[R]=S.length,E.push(F.name+"["+R+"]"),typeof F.location=="number"?S.push(F.location+R):Array.isArray(F.location)&&F.location.length===I&&typeof F.location[R]=="number"?S.push(F.location[R]|0):S.push(-1);L.push({name:F.name,type:F.type,locations:D})}else L.push({name:F.name,type:F.type,locations:[S.length]}),E.push(F.name),typeof F.location=="number"?S.push(F.location|0):S.push(-1)}var O=0;for(P=0;P<S.length;++P)if(S[P]<0){for(;S.indexOf(O)>=0;)O+=1;S[P]=O}var z=new Array(m.length);function G(){u.program=n.program(M,u._vref,u._fref,E,S);for(var Y=0;Y<m.length;++Y)z[Y]=M.getUniformLocation(u.program,m[Y].name)}G(),u._relink=G,u.types={uniforms:i(m),attributes:i(l)},u.attributes=a(M,u,L,S),Object.defineProperty(u,"uniforms",e(M,u,m,z))};function g(d,f,m,l,x){var u=new s(d);return u.update(f,m,l,x),u}A.exports=g},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(c,A,T){function e(a,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=a||"",this.message="gl-shader: "+(i||a||"")+(n?`
`+n:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,A.exports=e},{}],134:[function(c,A,T){A.exports=s;var e=c("./GLError");function a(o,b,g,d,f,m){this._gl=o,this._wrapper=b,this._index=g,this._locations=d,this._dimension=f,this._constFunc=m}var i=a.prototype;i.pointer=function(b,g,d,f){var m=this,l=m._gl,x=m._locations[m._index];l.vertexAttribPointer(x,m._dimension,b||l.FLOAT,!!g,d||0,f||0),l.enableVertexAttribArray(x)},i.set=function(o,b,g,d){return this._constFunc(this._locations[this._index],o,b,g,d)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(o){return o!==this._locations[this._index]&&(this._locations[this._index]=o|0,this._wrapper.program=null),o|0}});var n=[function(o,b,g){return g.length===void 0?o.vertexAttrib1f(b,g):o.vertexAttrib1fv(b,g)},function(o,b,g,d){return g.length===void 0?o.vertexAttrib2f(b,g,d):o.vertexAttrib2fv(b,g)},function(o,b,g,d,f){return g.length===void 0?o.vertexAttrib3f(b,g,d,f):o.vertexAttrib3fv(b,g)},function(o,b,g,d,f,m){return g.length===void 0?o.vertexAttrib4f(b,g,d,f,m):o.vertexAttrib4fv(b,g)}];function r(o,b,g,d,f,m,l){var x=n[f],u=new a(o,b,g,d,f,x);Object.defineProperty(m,l,{set:function(M){return o.disableVertexAttribArray(d[g]),x(o,d[g],M),M},get:function(){return u},enumerable:!0})}function v(o,b,g,d,f,m,l){for(var x=new Array(f),u=new Array(f),M=0;M<f;++M)r(o,b,g[M],d,f,x,M),u[M]=x[M];Object.defineProperty(x,"location",{set:function(_){if(Array.isArray(_))for(var h=0;h<f;++h)u[h].location=_[h];else for(var h=0;h<f;++h)u[h].location=_+h;return _},get:function(){for(var _=new Array(f),h=0;h<f;++h)_[h]=d[g[h]];return _},enumerable:!0}),x.pointer=function(_,h,L,E){_=_||o.FLOAT,h=!!h,L=L||f*f,E=E||0;for(var S=0;S<f;++S){var P=d[g[S]];o.vertexAttribPointer(P,f,_,h,L,E+S*f),o.enableVertexAttribArray(P)}};var w=new Array(f),p=o["vertexAttrib"+f+"fv"];Object.defineProperty(m,l,{set:function(_){for(var h=0;h<f;++h){var L=d[g[h]];if(o.disableVertexAttribArray(L),Array.isArray(_[0]))p.call(o,L,_[h]);else{for(var E=0;E<f;++E)w[E]=_[f*h+E];p.call(o,L,w)}}return _},get:function(){return x},enumerable:!0})}function s(o,b,g,d){for(var f={},m=0,l=g.length;m<l;++m){var x=g[m],u=x.name,M=x.type,w=x.locations;switch(M){case"bool":case"int":case"float":r(o,b,w[0],d,1,f,u);break;default:if(M.indexOf("vec")>=0){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new e("","Invalid data type for attribute "+u+": "+M);r(o,b,w[0],d,p,f,u)}else if(M.indexOf("mat")>=0){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new e("","Invalid data type for attribute "+u+": "+M);v(o,b,w,d,p,f,u)}else throw new e("","Unknown data type for attribute "+u+": "+M);break}}return f}},{"./GLError":133}],135:[function(c,A,T){var e=c("./reflect"),a=c("./GLError");A.exports=r;function i(v){return function(){return v}}function n(v,s){for(var o=new Array(v),b=0;b<v;++b)o[b]=s;return o}function r(v,s,o,b){function g(M){return function(w,p,_){return w.getUniform(p.program,_[M])}}function d(M){return function(p){for(var _=f("",M),h=0;h<_.length;++h){var L=_[h],E=L[0],S=L[1];if(b[S]){var P=p;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var F=E;if(E.indexOf(".")===0&&(F=E.slice(1)),F.indexOf("]")===F.length-1){var I=F.indexOf("["),D=F.slice(0,I),R=F.slice(I+1,F.length-1);P=D?p[D][R]:p[R]}else P=p[F]}var O=o[S].type,z;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":v.uniform1i(b[S],P);break;case"float":v.uniform1f(b[S],P);break;default:var G=O.indexOf("vec");if(0<=G&&G<=1&&O.length===4+G){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid data type");switch(O.charAt(0)){case"b":case"i":v["uniform"+z+"iv"](b[S],P);break;case"v":v["uniform"+z+"fv"](b[S],P);break;default:throw new a("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+O);v["uniformMatrix"+z+"fv"](b[S],!1,P);break}else throw new a("","Unknown uniform data type for "+name+": "+O)}}}}}function f(M,w){if(typeof w!="object")return[[M,w]];var p=[];for(var _ in w){var h=w[_],L=M;parseInt(_)+""===_?L+="["+_+"]":L+="."+_,typeof h=="object"?p.push.apply(p,f(L,h)):p.push([L,h])}return p}function m(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var w=M.indexOf("vec");if(0<=w&&w<=1&&M.length===4+w){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new a("","Invalid data type");return M.charAt(0)==="b"?n(p,!1):n(p,0)}else if(M.indexOf("mat")===0&&M.length===4){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+M);return n(p*p,0)}else throw new a("","Unknown uniform data type for "+name+": "+M)}}function l(M,w,p){if(typeof p=="object"){var _=x(p);Object.defineProperty(M,w,{get:i(_),set:d(p),enumerable:!0,configurable:!1})}else b[p]?Object.defineProperty(M,w,{get:g(p),set:d(p),enumerable:!0,configurable:!1}):M[w]=m(o[p].type)}function x(M){var w;if(Array.isArray(M)){w=new Array(M.length);for(var p=0;p<M.length;++p)l(w,p,M[p])}else{w={};for(var _ in M)l(w,_,M[_])}return w}var u=e(o,!0);return{get:i(x(u)),set:d(u),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(c,A,T){A.exports=e;function e(a,i){for(var n={},r=0;r<a.length;++r)for(var v=a[r].name,s=v.split("."),o=n,b=0;b<s.length;++b){var g=s[b].split("[");if(g.length>1){g[0]in o||(o[g[0]]=[]),o=o[g[0]];for(var d=1;d<g.length;++d){var f=parseInt(g[d]);d<g.length-1||b<s.length-1?(f in o||(d<g.length-1?o[f]=[]:o[f]={}),o=o[f]):i?o[f]=r:o[f]=a[r].type}}else b<s.length-1?(g[0]in o||(o[g[0]]={}),o=o[g[0]]):i?o[g[0]]=r:o[g[0]]=a[r].type}return n}},{}],137:[function(c,A,T){T.uniforms=n,T.attributes=r;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function i(v,s){if(!a){var o=Object.keys(e);a={};for(var b=0;b<o.length;++b){var g=o[b];a[v[g]]=e[g]}}return a[s]}function n(v,s){for(var o=v.getProgramParameter(s,v.ACTIVE_UNIFORMS),b=[],g=0;g<o;++g){var d=v.getActiveUniform(s,g);if(d){var f=i(v,d.type);if(d.size>1)for(var m=0;m<d.size;++m)b.push({name:d.name.replace("[0]","["+m+"]"),type:f});else b.push({name:d.name,type:f})}}return b}function r(v,s){for(var o=v.getProgramParameter(s,v.ACTIVE_ATTRIBUTES),b=[],g=0;g<o;++g){var d=v.getActiveAttrib(s,g);d&&b.push({name:d.name,type:i(v,d.type)})}return b}},{}],138:[function(c,A,T){T.shader=f,T.program=m;var e=c("./GLError"),a=c("gl-format-compiler-error"),i=typeof WeakMap>"u"?c("weakmap-shim"):WeakMap,n=new i,r=0;function v(l,x,u,M,w,p,_){this.id=l,this.src=x,this.type=u,this.shader=M,this.count=p,this.programs=[],this.cache=_}v.prototype.dispose=function(){if(--this.count===0){for(var l=this.cache,x=l.gl,u=this.programs,M=0,w=u.length;M<w;++M){var p=l.programs[u[M]];p&&(delete l.programs[M],x.deleteProgram(p))}x.deleteShader(this.shader),delete l.shaders[this.type===x.FRAGMENT_SHADER|0][this.src]}};function s(l){this.gl=l,this.shaders=[{},{}],this.programs={}}var o=s.prototype;function b(l,x,u){var M=l.createShader(x);if(l.shaderSource(M,u),l.compileShader(M),!l.getShaderParameter(M,l.COMPILE_STATUS)){var w=l.getShaderInfoLog(M);try{var p=a(w,u,x)}catch(_){throw console.warn("Failed to format compiler error: "+_),new e(w,`Error compiling shader:
`+w)}throw new e(w,p.short,p.long)}return M}o.getShaderReference=function(l,x){var u=this.gl,M=this.shaders[l===u.FRAGMENT_SHADER|0],w=M[x];if(!w||!u.isShader(w.shader)){var p=b(u,l,x);w=M[x]=new v(r++,x,l,p,[],1,this)}else w.count+=1;return w};function g(l,x,u,M,w){var p=l.createProgram();l.attachShader(p,x),l.attachShader(p,u);for(var _=0;_<M.length;++_)l.bindAttribLocation(p,w[_],M[_]);if(l.linkProgram(p),!l.getProgramParameter(p,l.LINK_STATUS)){var h=l.getProgramInfoLog(p);throw new e(h,"Error linking program: "+h)}return p}o.getProgram=function(l,x,u,M){var w=[l.id,x.id,u.join(":"),M.join(":")].join("@"),p=this.programs[w];return(!p||!this.gl.isProgram(p))&&(this.programs[w]=p=g(this.gl,l.shader,x.shader,u,M),l.programs.push(w),x.programs.push(w)),p};function d(l){var x=n.get(l);return x||(x=new s(l),n.set(l,x)),x}function f(l,x,u){return d(l).getShaderReference(x,u)}function m(l,x,u,M,w){return d(l).getProgram(x,u,M,w)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(c,A,T){A.exports=i;function e(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=e.prototype;a.update=function(n){n=n||{},this.enable=(n.enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var n=this.enable,r=this.width,v=this.color,s=this.center,o=this.plot,b=o.line,g=o.dataBox,d=o.viewBox;if(b.bind(),g[0]<=s[0]&&s[0]<=g[2]&&g[1]<=s[1]&&s[1]<=g[3]){var f=d[0]+(s[0]-g[0])/(g[2]-g[0])*(d[2]-d[0]),m=d[1]+(s[1]-g[1])/(g[3]-g[1])*(d[3]-d[1]);n[0]&&b.drawLine(f,m,d[0],m,r[0],v[0]),n[1]&&b.drawLine(f,m,f,d[1],r[1],v[1]),n[2]&&b.drawLine(f,m,d[2],m,r[2],v[2]),n[3]&&b.drawLine(f,m,f,d[3],r[3],v[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function i(n,r){var v=new e(n);return v.update(r),n.addOverlay(v),v}},{}],140:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),n=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(c,A,T){var e=c("gl-buffer"),a=c("gl-vao"),i=c("./shaders/index");A.exports=g;var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(d,f,m,l){this.gl=d,this.buffer=f,this.vao=m,this.shader=l,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var v=r.prototype,s=[0,0,0],o=[0,0,0],b=[0,0];v.isTransparent=function(){return!1},v.drawTransparent=function(d){},v.draw=function(d){var f=this.gl,m=this.vao,l=this.shader;m.bind(),l.bind();var x=d.model||n,u=d.view||n,M=d.projection||n,w;this.axes&&(w=this.axes.lastCubeProps.axis);for(var p=s,_=o,h=0;h<3;++h)w&&w[h]<0?(p[h]=this.bounds[0][h],_[h]=this.bounds[1][h]):(p[h]=this.bounds[1][h],_[h]=this.bounds[0][h]);b[0]=f.drawingBufferWidth,b[1]=f.drawingBufferHeight,l.uniforms.model=x,l.uniforms.view=u,l.uniforms.projection=M,l.uniforms.coordinates=[this.position,p,_],l.uniforms.colors=this.colors,l.uniforms.screenShape=b;for(var h=0;h<3;++h)l.uniforms.lineWidth=this.lineWidth[h]*this.pixelRatio,this.enabled[h]&&(m.draw(f.TRIANGLES,6,6*h),this.drawSides[h]&&m.draw(f.TRIANGLES,12,18+12*h));m.unbind()},v.update=function(d){!d||("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},v.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function g(d,f){var m=[];function l(p,_,h,L,E,S){var P=[p,_,h,0,0,0,1];P[L+3]=1,P[L]=E,m.push.apply(m,P),P[6]=-1,m.push.apply(m,P),P[L]=S,m.push.apply(m,P),m.push.apply(m,P),P[6]=1,m.push.apply(m,P),P[L]=E,m.push.apply(m,P)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var x=e(d,m),u=a(d,[{type:d.FLOAT,buffer:x,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:x,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:x,size:1,offset:24,stride:28}]),M=i(d);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var w=new r(d,x,u,M);return w.update(f),w}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(c,A,T){var e=c("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},T.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(c,A,T){var e=c("gl-vec3"),a=c("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(m,l,x,u){for(var M=m.points,w=m.velocities,p=m.divergences,_=[],h=[],L=[],E=[],S=[],P=[],F=0,I=0,D=a.create(),R=a.create(),O=8,z=0;z<M.length;z++){var G=M[z],Y=w[z],ee=p[z];l===0&&(ee=x*.05),I=e.length(Y)/u,D=a.create(),e.copy(D,Y),D[3]=ee;for(var j=0;j<O;j++)S[j]=[G[0],G[1],G[2],j];if(E.length>0)for(var j=0;j<O;j++){var X=(j+1)%O;_.push(E[j],S[j],S[X],S[X],E[X],E[j]),L.push(R,D,D,D,R,R),P.push(F,I,I,I,F,F);var ae=_.length;h.push([ae-6,ae-5,ae-4],[ae-3,ae-2,ae-1])}var he=E;E=S,S=he;var K=R;R=D,D=K;var J=F;F=I,I=J}return{positions:_,cells:h,vectors:L,vertexIntensity:P}},r=function(m,l,x,u){for(var M=0,w=0;w<m.length;w++)for(var p=m[w].velocities,_=0;_<p.length;_++)M=Math.max(M,e.length(p[_]));for(var h=m.map(function(z){return n(z,x,u,M)}),L=[],E=[],S=[],P=[],w=0;w<h.length;w++){var F=h[w],I=L.length;L=L.concat(F.positions),S=S.concat(F.vectors),P=P.concat(F.vertexIntensity);for(var _=0;_<F.cells.length;_++){var D=F.cells[_],R=[];E.push(R);for(var O=0;O<D.length;O++)R.push(D[O]+I)}}return{positions:L,cells:E,vectors:S,vertexIntensity:P,colormap:l}},v=function(m,l){var x=m.length,u;for(u=0;u<x;u++){var M=m[u];if(M===l)return u;if(M>l)return u-1}return u},s=function(m,l,x){return m<l?l:m>x?x:m},o=function(m,l,x){var u=l.vectors,M=l.meshgrid,w=m[0],p=m[1],_=m[2],h=M[0].length,L=M[1].length,E=M[2].length,S=v(M[0],w),P=v(M[1],p),F=v(M[2],_),I=S+1,D=P+1,R=F+1;if(S=s(S,0,h-1),I=s(I,0,h-1),P=s(P,0,L-1),D=s(D,0,L-1),F=s(F,0,E-1),R=s(R,0,E-1),S<0||P<0||F<0||I>h-1||D>L-1||R>E-1)return e.create();var O=M[0][S],z=M[0][I],G=M[1][P],Y=M[1][D],ee=M[2][F],j=M[2][R],X=(w-O)/(z-O),ae=(p-G)/(Y-G),he=(_-ee)/(j-ee);isFinite(X)||(X=.5),isFinite(ae)||(ae=.5),isFinite(he)||(he=.5);var K,J,U,H,q,re;switch(x.reversedX&&(S=h-1-S,I=h-1-I),x.reversedY&&(P=L-1-P,D=L-1-D),x.reversedZ&&(F=E-1-F,R=E-1-R),x.filled){case 5:q=F,re=R,U=P*E,H=D*E,K=S*E*L,J=I*E*L;break;case 4:q=F,re=R,K=S*E,J=I*E,U=P*E*h,H=D*E*h;break;case 3:U=P,H=D,q=F*L,re=R*L,K=S*L*E,J=I*L*E;break;case 2:U=P,H=D,K=S*L,J=I*L,q=F*L*h,re=R*L*h;break;case 1:K=S,J=I,q=F*h,re=R*h,U=P*h*E,H=D*h*E;break;default:K=S,J=I,U=P*h,H=D*h,q=F*h*L,re=R*h*L;break}var Z=u[K+U+q],Q=u[K+U+re],ie=u[K+H+q],oe=u[K+H+re],ne=u[J+U+q],le=u[J+U+re],_e=u[J+H+q],fe=u[J+H+re],ye=e.create(),xe=e.create(),me=e.create(),be=e.create();e.lerp(ye,Z,ne,X),e.lerp(xe,Q,le,X),e.lerp(me,ie,_e,X),e.lerp(be,oe,fe,X);var ke=e.create(),De=e.create();e.lerp(ke,ye,me,ae),e.lerp(De,xe,be,ae);var He=e.create();return e.lerp(He,ke,De,he),He},b=function(m){var l=1/0;m.sort(function(w,p){return w-p});for(var x=m.length,u=1;u<x;u++){var M=Math.abs(m[u]-m[u-1]);M<l&&(l=M)}return l},g=function(m){for(var l=[],x=[],u=[],M={},w={},p={},_=m.length,h=0;h<_;h++){var L=m[h],E=L[0],S=L[1],P=L[2];M[E]||(l.push(E),M[E]=!0),w[S]||(x.push(S),w[S]=!0),p[P]||(u.push(P),p[P]=!0)}var F=b(l),I=b(x),D=b(u),R=Math.min(F,I,D);return isFinite(R)?R:1};A.exports=function(m,l){var x=m.startingPositions,u=m.maxLength||1e3,M=m.tubeSize||1,w=m.absoluteTubeSize,p=m.gridFill||"+x+y+z",_={};p.indexOf("-x")!==-1&&(_.reversedX=!0),p.indexOf("-y")!==-1&&(_.reversedY=!0),p.indexOf("-z")!==-1&&(_.reversedZ=!0),_.filled=i.indexOf(p.replace(/-/g,"").replace(/\+/g,""));var h=m.getVelocity||function(le){return o(le,m,_)},L=m.getDivergence||function(le,_e){var fe=e.create(),ye=1e-4;e.add(fe,le,[ye,0,0]);var xe=h(fe);e.subtract(xe,xe,_e),e.scale(xe,xe,1/ye),e.add(fe,le,[0,ye,0]);var me=h(fe);e.subtract(me,me,_e),e.scale(me,me,1/ye),e.add(fe,le,[0,0,ye]);var be=h(fe);return e.subtract(be,be,_e),e.scale(be,be,1/ye),e.add(fe,xe,me),e.add(fe,fe,be),fe},E=[],S=l[0][0],P=l[0][1],F=l[0][2],I=l[1][0],D=l[1][1],R=l[1][2],O=function(le){var _e=le[0],fe=le[1],ye=le[2];return!(_e<S||_e>I||fe<P||fe>D||ye<F||ye>R)},z=e.distance(l[0],l[1]),G=10*z/u,Y=G*G,ee=1,j=0,X=x.length;X>1&&(ee=g(x));for(var ae=0;ae<X;ae++){var he=e.create();e.copy(he,x[ae]);var K=[he],J=[],U=h(he),H=he;J.push(U);var q=[],re=L(he,U),Z=e.length(re);isFinite(Z)&&Z>j&&(j=Z),q.push(Z),E.push({points:K,velocities:J,divergences:q});for(var Q=0;Q<u*100&&K.length<u&&O(he);){Q++;var ie=e.clone(U),oe=e.squaredLength(ie);if(oe===0)break;if(oe>Y&&e.scale(ie,ie,G/Math.sqrt(oe)),e.add(ie,ie,he),U=h(ie),e.squaredDistance(H,ie)-Y>-1e-4*Y){K.push(ie),H=ie,J.push(U);var re=L(ie,U),Z=e.length(re);isFinite(Z)&&Z>j&&(j=Z),q.push(Z)}he=ie}}var ne=r(E,m.colormap,j,ee);return w?ne.tubeScale=w:(j===0&&(j=1),ne.tubeScale=M*.5*ee/j),ne};var d=c("./lib/shaders"),f=c("gl-cone3d").createMesh;A.exports.createTubeMesh=function(m,l){return f(m,l,{shaders:d,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(c,A,T){var e=c("gl-shader"),a=c("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),n=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);T.createShader=function(s){var o=e(s,i,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createPickShader=function(s){var o=e(s,i,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createContourShader=function(s){var o=e(s,r,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},T.createPickContourShader=function(s){var o=e(s,r,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(c,A,T){A.exports=J;var e=c("bit-twiddle"),a=c("gl-buffer"),i=c("gl-vao"),n=c("gl-texture2d"),r=c("typedarray-pool"),v=c("colormap"),s=c("ndarray-ops"),o=c("ndarray-pack"),b=c("ndarray"),g=c("surface-nets"),d=c("gl-mat4/multiply"),f=c("gl-mat4/invert"),m=c("binary-search-bounds"),l=c("ndarray-gradient"),x=c("./lib/shaders"),u=x.createShader,M=x.createContourShader,w=x.createPickShader,p=x.createPickContourShader,_=4*(4+3+3),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],E=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var U=0;U<3;++U){var H=E[U],q=(U+1)%3,re=(U+2)%3;H[q+0]=1,H[re+3]=1,H[U+6]=1}})();function S(U,H,q,re,Z){this.position=U,this.index=H,this.uv=q,this.level=re,this.dataCoordinate=Z}var P=256;function F(U,H,q,re,Z,Q,ie,oe,ne,le,_e,fe,ye,xe,me){this.gl=U,this.shape=H,this.bounds=q,this.objectOffset=me,this.intensityBounds=[],this._shader=re,this._pickShader=Z,this._coordinateBuffer=Q,this._vao=ie,this._colorMap=oe,this._contourShader=ne,this._contourPickShader=le,this._contourBuffer=_e,this._contourVAO=fe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new S([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ye,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(r.mallocFloat(1024),[0,0]),b(r.mallocFloat(1024),[0,0]),b(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=F.prototype;I.genColormap=function(U,H){var q=!1,re=o([v({colormap:U,nshades:P,format:"rgba"}).map(function(Z,Q){var ie=H?D(Q/255,H):Z[3];return ie<1&&(q=!0),[Z[0],Z[1],Z[2],255*ie]})]);return s.divseq(re,255),this.hasAlphaScale=q,re},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(U){this.pickId=U};function D(U,H){if(!H||!H.length)return 1;for(var q=0;q<H.length;++q){if(H.length<2)return 1;if(H[q][0]===U)return H[q][1];if(H[q][0]>U&&q>0){var re=(H[q][0]-U)/(H[q][0]-H[q-1][0]);return H[q][1]*(1-re)+re*H[q-1][1]}}return 1}var R=[0,0,0],O={showSurface:!1,showContour:!1,projections:[h.slice(),h.slice(),h.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(U,H){var q,re,Z,Q=H.axes&&H.axes.lastCubeProps.axis||R,ie=H.showSurface,oe=H.showContour;for(q=0;q<3;++q)for(ie=ie||H.surfaceProject[q],re=0;re<3;++re)oe=oe||H.contourProject[q][re];for(q=0;q<3;++q){var ne=O.projections[q];for(re=0;re<16;++re)ne[re]=0;for(re=0;re<4;++re)ne[5*re]=1;ne[5*q]=0,ne[12+q]=H.axesBounds[+(Q[q]>0)][q],d(ne,U.model,ne);var le=O.clipBounds[q];for(Z=0;Z<2;++Z)for(re=0;re<3;++re)le[Z][re]=U.clipBounds[Z][re];le[0][q]=-1e8,le[1][q]=1e8}return O.showSurface=ie,O.showContour=oe,O}var G={model:h,view:h,projection:h,inverseModel:h.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=h.slice(),ee=[1,0,0,0,1,0,0,0,1];function j(U,H){U=U||{};var q=this.gl;q.disable(q.CULL_FACE),this._colorMap.bind(0);var re=G;re.model=U.model||h,re.view=U.view||h,re.projection=U.projection||h,re.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],re.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],re.objectOffset=this.objectOffset,re.contourColor=this.contourColor[0],re.inverseModel=f(re.inverseModel,re.model);for(var Z=0;Z<2;++Z)for(var Q=re.clipBounds[Z],ie=0;ie<3;++ie)Q[ie]=Math.min(Math.max(this.clipBounds[Z][ie],-1e8),1e8);re.kambient=this.ambientLight,re.kdiffuse=this.diffuseLight,re.kspecular=this.specularLight,re.roughness=this.roughness,re.fresnel=this.fresnel,re.opacity=this.opacity,re.height=0,re.permutation=ee,re.vertexColor=this.vertexColor;var oe=Y;for(d(oe,re.view,re.model),d(oe,re.projection,oe),f(oe,oe),Z=0;Z<3;++Z)re.eyePosition[Z]=oe[12+Z]/oe[15];var ne=oe[15];for(Z=0;Z<3;++Z)ne+=this.lightPosition[Z]*oe[4*Z+3];for(Z=0;Z<3;++Z){var le=oe[12+Z];for(ie=0;ie<3;++ie)le+=oe[4*ie+Z]*this.lightPosition[ie];re.lightPosition[Z]=le/ne}var _e=z(re,this);if(_e.showSurface){for(this._shader.bind(),this._shader.uniforms=re,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(q.TRIANGLES,this._vertexCount),Z=0;Z<3;++Z)!this.surfaceProject[Z]||!this.vertexCount||(this._shader.uniforms.model=_e.projections[Z],this._shader.uniforms.clipBounds=_e.clipBounds[Z],this._vao.draw(q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(_e.showContour){var fe=this._contourShader;re.kambient=1,re.kdiffuse=0,re.kspecular=0,re.opacity=1,fe.bind(),fe.uniforms=re;var ye=this._contourVAO;for(ye.bind(),Z=0;Z<3;++Z)for(fe.uniforms.permutation=E[Z],q.lineWidth(this.contourWidth[Z]*this.pixelRatio),ie=0;ie<this.contourLevels[Z].length;++ie)ie===this.highlightLevel[Z]?(fe.uniforms.contourColor=this.highlightColor[Z],fe.uniforms.contourTint=this.highlightTint[Z]):(ie===0||ie-1===this.highlightLevel[Z])&&(fe.uniforms.contourColor=this.contourColor[Z],fe.uniforms.contourTint=this.contourTint[Z]),this._contourCounts[Z][ie]&&(fe.uniforms.height=this.contourLevels[Z][ie],ye.draw(q.LINES,this._contourCounts[Z][ie],this._contourOffsets[Z][ie]));for(Z=0;Z<3;++Z)for(fe.uniforms.model=_e.projections[Z],fe.uniforms.clipBounds=_e.clipBounds[Z],ie=0;ie<3;++ie)if(!!this.contourProject[Z][ie]){fe.uniforms.permutation=E[ie],q.lineWidth(this.contourWidth[ie]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[ie].length;++xe)xe===this.highlightLevel[ie]?(fe.uniforms.contourColor=this.highlightColor[ie],fe.uniforms.contourTint=this.highlightTint[ie]):(xe===0||xe-1===this.highlightLevel[ie])&&(fe.uniforms.contourColor=this.contourColor[ie],fe.uniforms.contourTint=this.contourTint[ie]),this._contourCounts[ie][xe]&&(fe.uniforms.height=this.contourLevels[ie][xe],ye.draw(q.LINES,this._contourCounts[ie][xe],this._contourOffsets[ie][xe]))}for(ye.unbind(),ye=this._dynamicVAO,ye.bind(),Z=0;Z<3;++Z)if(this._dynamicCounts[Z]!==0)for(fe.uniforms.model=re.model,fe.uniforms.clipBounds=re.clipBounds,fe.uniforms.permutation=E[Z],q.lineWidth(this.dynamicWidth[Z]*this.pixelRatio),fe.uniforms.contourColor=this.dynamicColor[Z],fe.uniforms.contourTint=this.dynamicTint[Z],fe.uniforms.height=this.dynamicLevel[Z],ye.draw(q.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]),ie=0;ie<3;++ie)!this.contourProject[ie][Z]||(fe.uniforms.model=_e.projections[ie],fe.uniforms.clipBounds=_e.clipBounds[ie],ye.draw(q.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]));ye.unbind()}}I.draw=function(U){return j.call(this,U,!1)},I.drawTransparent=function(U){return j.call(this,U,!0)};var X={model:h,view:h,projection:h,inverseModel:h,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(U){U=U||{};var H=this.gl;H.disable(H.CULL_FACE);var q=X;q.model=U.model||h,q.view=U.view||h,q.projection=U.projection||h,q.shape=this._field[2].shape,q.pickId=this.pickId/255,q.lowerBound=this.bounds[0],q.upperBound=this.bounds[1],q.objectOffset=this.objectOffset,q.permutation=ee;for(var re=0;re<2;++re)for(var Z=q.clipBounds[re],Q=0;Q<3;++Q)Z[Q]=Math.min(Math.max(this.clipBounds[re][Q],-1e8),1e8);var ie=z(q,this);if(ie.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=q,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),re=0;re<3;++re)!this.surfaceProject[re]||(this._pickShader.uniforms.model=ie.projections[re],this._pickShader.uniforms.clipBounds=ie.clipBounds[re],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ie.showContour){var oe=this._contourPickShader;oe.bind(),oe.uniforms=q;var ne=this._contourVAO;for(ne.bind(),Q=0;Q<3;++Q)for(H.lineWidth(this.contourWidth[Q]*this.pixelRatio),oe.uniforms.permutation=E[Q],re=0;re<this.contourLevels[Q].length;++re)this._contourCounts[Q][re]&&(oe.uniforms.height=this.contourLevels[Q][re],ne.draw(H.LINES,this._contourCounts[Q][re],this._contourOffsets[Q][re]));for(re=0;re<3;++re)for(oe.uniforms.model=ie.projections[re],oe.uniforms.clipBounds=ie.clipBounds[re],Q=0;Q<3;++Q)if(!!this.contourProject[re][Q]){oe.uniforms.permutation=E[Q],H.lineWidth(this.contourWidth[Q]*this.pixelRatio);for(var le=0;le<this.contourLevels[Q].length;++le)this._contourCounts[Q][le]&&(oe.uniforms.height=this.contourLevels[Q][le],ne.draw(H.LINES,this._contourCounts[Q][le],this._contourOffsets[Q][le]))}ne.unbind()}},I.pick=function(U){if(!U||U.id!==this.pickId)return null;var H=this._field[2].shape,q=this._pickResult,re=H[0]*(U.value[0]+(U.value[2]>>4)/16)/255,Z=Math.floor(re),Q=re-Z,ie=H[1]*(U.value[1]+(U.value[2]&15)/16)/255,oe=Math.floor(ie),ne=ie-oe;Z+=1,oe+=1;var le=q.position;le[0]=le[1]=le[2]=0;for(var _e=0;_e<2;++_e)for(var fe=_e?Q:1-Q,ye=0;ye<2;++ye)for(var xe=ye?ne:1-ne,me=Z+_e,be=oe+ye,ke=fe*xe,De=0;De<3;++De)le[De]+=this._field[De].get(me,be)*ke;for(var He=this._pickResult.level,Ae=0;Ae<3;++Ae)if(He[Ae]=m.le(this.contourLevels[Ae],le[Ae]),He[Ae]<0)this.contourLevels[Ae].length>0&&(He[Ae]=0);else if(He[Ae]<this.contourLevels[Ae].length-1){var Le=this.contourLevels[Ae][He[Ae]],Ze=this.contourLevels[Ae][He[Ae]+1];Math.abs(Le-le[Ae])>Math.abs(Ze-le[Ae])&&(He[Ae]+=1)}for(q.index[0]=Q<.5?Z:Z+1,q.index[1]=ne<.5?oe:oe+1,q.uv[0]=re/H[0],q.uv[1]=ie/H[1],De=0;De<3;++De)q.dataCoordinate[De]=this._field[De].get(q.index[0],q.index[1]);return q},I.padField=function(U,H){var q=H.shape.slice(),re=U.shape.slice();s.assign(U.lo(1,1).hi(q[0],q[1]),H),s.assign(U.lo(1).hi(q[0],1),H.hi(q[0],1)),s.assign(U.lo(1,re[1]-1).hi(q[0],1),H.lo(0,q[1]-1).hi(q[0],1)),s.assign(U.lo(0,1).hi(1,q[1]),H.hi(1)),s.assign(U.lo(re[0]-1,1).hi(1,q[1]),H.lo(q[0]-1)),U.set(0,0,H.get(0,0)),U.set(0,re[1]-1,H.get(0,q[1]-1)),U.set(re[0]-1,0,H.get(q[0]-1,0)),U.set(re[0]-1,re[1]-1,H.get(q[0]-1,q[1]-1))};function ae(U,H){return Array.isArray(U)?[H(U[0]),H(U[1]),H(U[2])]:[H(U),H(U),H(U)]}function he(U){return Array.isArray(U)?U.length===3?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function K(U){if(Array.isArray(U)){if(Array.isArray(U))return[he(U[0]),he(U[1]),he(U[2])];var H=he(U);return[H.slice(),H.slice(),H.slice()]}}I.update=function(U){U=U||{},this.objectOffset=U.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in U&&(this.contourWidth=ae(U.contourWidth,Number)),"showContour"in U&&(this.showContour=ae(U.showContour,Boolean)),"showSurface"in U&&(this.showSurface=!!U.showSurface),"contourTint"in U&&(this.contourTint=ae(U.contourTint,Boolean)),"contourColor"in U&&(this.contourColor=K(U.contourColor)),"contourProject"in U&&(this.contourProject=ae(U.contourProject,function(ct){return ae(ct,Boolean)})),"surfaceProject"in U&&(this.surfaceProject=U.surfaceProject),"dynamicColor"in U&&(this.dynamicColor=K(U.dynamicColor)),"dynamicTint"in U&&(this.dynamicTint=ae(U.dynamicTint,Number)),"dynamicWidth"in U&&(this.dynamicWidth=ae(U.dynamicWidth,Number)),"opacity"in U&&(this.opacity=U.opacity),"opacityscale"in U&&(this.opacityscale=U.opacityscale),"colorBounds"in U&&(this.colorBounds=U.colorBounds),"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0),"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));var H=U.field||U.coords&&U.coords[2]||null,q=!1;if(H||(this._field[2].shape[0]||this._field[2].shape[2]?H=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):H=this._field[2].hi(0,0)),"field"in U||"coords"in U){var re=(H.shape[0]+2)*(H.shape[1]+2);re>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(re))),this._field[2]=b(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var Z=this.shape,Q=0;Q<2;++Q)this._field[2].size>this._field[Q].data.length&&(r.freeFloat(this._field[Q].data),this._field[Q].data=r.mallocFloat(this._field[2].size)),this._field[Q]=b(this._field[Q].data,[Z[0]+2,Z[1]+2]);if(U.coords){var ie=U.coords;if(!Array.isArray(ie)||ie.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Q=0;Q<2;++Q){var oe=ie[Q];for(ye=0;ye<2;++ye)if(oe.shape[ye]!==Z[ye])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Q],oe)}}else if(U.ticks){var ne=U.ticks;if(!Array.isArray(ne)||ne.length!==2)throw new Error("gl-surface: invalid ticks");for(Q=0;Q<2;++Q){var le=ne[Q];if((Array.isArray(le)||le.length)&&(le=b(le)),le.shape[0]!==Z[Q])throw new Error("gl-surface: invalid tick length");var _e=b(le.data,Z);_e.stride[Q]=le.stride[0],_e.stride[Q^1]=0,this.padField(this._field[Q],_e)}}else{for(Q=0;Q<2;++Q){var fe=[0,0];fe[Q]=1,this._field[Q]=b(this._field[Q].data,[Z[0]+2,Z[1]+2],fe,0)}this._field[0].set(0,0,0);for(var ye=0;ye<Z[0];++ye)this._field[0].set(ye+1,0,ye);for(this._field[0].set(Z[0]+1,0,Z[0]-1),this._field[1].set(0,0,0),ye=0;ye<Z[1];++ye)this._field[1].set(0,ye+1,ye);this._field[1].set(0,Z[1]+1,Z[1]-1)}var xe=this._field,me=b(r.mallocFloat(xe[2].size*3*2),[3,Z[0]+2,Z[1]+2,2]);for(Q=0;Q<3;++Q)l(me.pick(Q),xe[Q],"mirror");var be=b(r.mallocFloat(xe[2].size*3),[Z[0]+2,Z[1]+2,3]);for(Q=0;Q<Z[0]+2;++Q)for(ye=0;ye<Z[1]+2;++ye){var ke=me.get(0,Q,ye,0),De=me.get(0,Q,ye,1),He=me.get(1,Q,ye,0),Ae=me.get(1,Q,ye,1),Le=me.get(2,Q,ye,0),Ze=me.get(2,Q,ye,1),We=He*Ze-Ae*Le,ze=Le*De-Ze*ke,Ie=ke*Ae-De*He,Ve=Math.sqrt(We*We+ze*ze+Ie*Ie);Ve<1e-8?(Ve=Math.max(Math.abs(We),Math.abs(ze),Math.abs(Ie)),Ve<1e-8?(Ie=1,ze=We=0,Ve=1):Ve=1/Ve):Ve=1/Math.sqrt(Ve),be.set(Q,ye,0,We*Ve),be.set(Q,ye,1,ze*Ve),be.set(Q,ye,2,Ie*Ve)}r.free(me.data);var dt=[1/0,1/0,1/0],Ft=[-1/0,-1/0,-1/0],Qt=1/0,Ot=-1/0,Ct=(Z[0]-1)*(Z[1]-1)*6,jt=r.mallocFloat(e.nextPow2(10*Ct)),Nt=0,Lt=0;for(Q=0;Q<Z[0]-1;++Q){e:for(ye=0;ye<Z[1]-1;++ye){for(var Xe=0;Xe<2;++Xe)for(var it=0;it<2;++it)for(var Ye=0;Ye<3;++Ye){var Ee=this._field[Ye].get(1+Q+Xe,1+ye+it);if(isNaN(Ee)||!isFinite(Ee))continue e}for(Ye=0;Ye<6;++Ye){var Ge=Q+L[Ye][0],Ke=ye+L[Ye][1],qe=this._field[0].get(Ge+1,Ke+1),At=this._field[1].get(Ge+1,Ke+1);Ee=this._field[2].get(Ge+1,Ke+1),We=be.get(Ge+1,Ke+1,0),ze=be.get(Ge+1,Ke+1,1),Ie=be.get(Ge+1,Ke+1,2),U.intensity&&(mt=U.intensity.get(Ge,Ke));var mt=U.intensity?U.intensity.get(Ge,Ke):Ee+this.objectOffset[2];jt[Nt++]=Ge,jt[Nt++]=Ke,jt[Nt++]=qe,jt[Nt++]=At,jt[Nt++]=Ee,jt[Nt++]=0,jt[Nt++]=mt,jt[Nt++]=We,jt[Nt++]=ze,jt[Nt++]=Ie,dt[0]=Math.min(dt[0],qe+this.objectOffset[0]),dt[1]=Math.min(dt[1],At+this.objectOffset[1]),dt[2]=Math.min(dt[2],Ee+this.objectOffset[2]),Qt=Math.min(Qt,mt),Ft[0]=Math.max(Ft[0],qe+this.objectOffset[0]),Ft[1]=Math.max(Ft[1],At+this.objectOffset[1]),Ft[2]=Math.max(Ft[2],Ee+this.objectOffset[2]),Ot=Math.max(Ot,mt),Lt+=1}}}for(U.intensityBounds&&(Qt=+U.intensityBounds[0],Ot=+U.intensityBounds[1]),Q=6;Q<Nt;Q+=10)jt[Q]=(jt[Q]-Qt)/(Ot-Qt);this._vertexCount=Lt,this._coordinateBuffer.update(jt.subarray(0,Nt)),r.freeFloat(jt),r.free(be.data),this.bounds=[dt,Ft],this.intensity=U.intensity||this._field[2],(this.intensityBounds[0]!==Qt||this.intensityBounds[1]!==Ot)&&(q=!0),this.intensityBounds=[Qt,Ot]}if("levels"in U){var Mt=U.levels;for(Array.isArray(Mt[0])?Mt=Mt.slice():Mt=[[],[],Mt],Q=0;Q<3;++Q)Mt[Q]=Mt[Q].slice(),Mt[Q].sort(function(ct,pt){return ct-pt});for(Q=0;Q<3;++Q)for(ye=0;ye<Mt[Q].length;++ye)Mt[Q][ye]-=this.objectOffset[Q];e:for(Q=0;Q<3;++Q){if(Mt[Q].length!==this.contourLevels[Q].length){q=!0;break}for(ye=0;ye<Mt[Q].length;++ye)if(Mt[Q][ye]!==this.contourLevels[Q][ye]){q=!0;break e}}this.contourLevels=Mt}if(q){xe=this._field,Z=this.shape;for(var Gt=[],zt=0;zt<3;++zt){var Ht=this.contourLevels[zt],Zt=[],Wt=[],sr=[0,0,0];for(Q=0;Q<Ht.length;++Q){var Gr=g(this._field[zt],Ht[Q]);Zt.push(Gt.length/5|0),Lt=0;e:for(ye=0;ye<Gr.cells.length;++ye){var cn=Gr.cells[ye];for(Ye=0;Ye<2;++Ye){var qr=Gr.positions[cn[Ye]],st=qr[0],rr=Math.floor(st)|0,$t=st-rr,hr=qr[1],Sr=Math.floor(hr)|0,tt=hr-Sr,Qe=!1;t:for(var lt=0;lt<3;++lt){sr[lt]=0;var ft=(zt+lt+1)%3;for(Xe=0;Xe<2;++Xe){var Et=Xe?$t:1-$t;for(Ge=Math.min(Math.max(rr+Xe,0),Z[0])|0,it=0;it<2;++it){var Vt=it?tt:1-tt;if(Ke=Math.min(Math.max(Sr+it,0),Z[1])|0,lt<2?Ee=this._field[ft].get(Ge,Ke):Ee=(this.intensity.get(Ge,Ke)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ee)||isNaN(Ee)){Qe=!0;break t}var Pe=Et*Vt;sr[lt]+=Pe*Ee}}}if(!Qe)Gt.push(sr[0],sr[1],qr[0],qr[1],sr[2]),Lt+=1;else{if(Ye>0){for(var Se=0;Se<5;++Se)Gt.pop();Lt-=1}continue e}}}Wt.push(Lt)}this._contourOffsets[zt]=Zt,this._contourCounts[zt]=Wt}var ot=r.mallocFloat(Gt.length);for(Q=0;Q<Gt.length;++Q)ot[Q]=Gt[Q];this._contourBuffer.update(ot),r.freeFloat(ot)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var U=0;U<3;++U)r.freeFloat(this._field[U].data)},I.highlight=function(U){var H;if(!U){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(H=0;H<3;++H)this.enableHighlight[H]?this.highlightLevel[H]=U.level[H]:this.highlightLevel[H]=-1;var q;for(this.snapToData?q=U.dataCoordinate:q=U.position,H=0;H<3;++H)q[H]-=this.objectOffset[H];if(!((!this.enableDynamic[0]||q[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||q[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||q[2]===this.dynamicLevel[2]))){for(var re=0,Z=this.shape,Q=r.mallocFloat(12*Z[0]*Z[1]),ie=0;ie<3;++ie){if(!this.enableDynamic[ie]){this.dynamicLevel[ie]=NaN,this._dynamicCounts[ie]=0;continue}this.dynamicLevel[ie]=q[ie];var oe=(ie+1)%3,ne=(ie+2)%3,le=this._field[ie],_e=this._field[oe],fe=this._field[ne],ye=g(le,q[ie]),xe=ye.cells,me=ye.positions;for(this._dynamicOffsets[ie]=re,H=0;H<xe.length;++H)for(var be=xe[H],ke=0;ke<2;++ke){var De=me[be[ke]],He=+De[0],Ae=He|0,Le=Math.min(Ae+1,Z[0])|0,Ze=He-Ae,We=1-Ze,ze=+De[1],Ie=ze|0,Ve=Math.min(Ie+1,Z[1])|0,dt=ze-Ie,Ft=1-dt,Qt=We*Ft,Ot=We*dt,Ct=Ze*Ft,jt=Ze*dt,Nt=Qt*_e.get(Ae,Ie)+Ot*_e.get(Ae,Ve)+Ct*_e.get(Le,Ie)+jt*_e.get(Le,Ve),Lt=Qt*fe.get(Ae,Ie)+Ot*fe.get(Ae,Ve)+Ct*fe.get(Le,Ie)+jt*fe.get(Le,Ve);if(isNaN(Nt)||isNaN(Lt)){ke&&(re-=1);break}Q[2*re+0]=Nt,Q[2*re+1]=Lt,re+=1}this._dynamicCounts[ie]=re-this._dynamicOffsets[ie]}this._dynamicBuffer.update(Q.subarray(0,2*re)),r.freeFloat(Q)}};function J(U){var H=U.gl,q=u(H),re=w(H),Z=M(H),Q=p(H),ie=a(H),oe=i(H,[{buffer:ie,size:4,stride:_,offset:0},{buffer:ie,size:3,stride:_,offset:16},{buffer:ie,size:3,stride:_,offset:28}]),ne=a(H),le=i(H,[{buffer:ne,size:4,stride:20,offset:0},{buffer:ne,size:1,stride:20,offset:16}]),_e=a(H),fe=i(H,[{buffer:_e,size:2,type:H.FLOAT}]),ye=n(H,1,P,H.RGBA,H.UNSIGNED_BYTE);ye.minFilter=H.LINEAR,ye.magFilter=H.LINEAR;var xe=new F(H,[0,0],[[0,0,0],[0,0,0]],q,re,ie,oe,ye,Z,Q,ne,le,_e,fe,[0,0,0]),me={levels:[[],[],[]]};for(var be in U)me[be]=U[be];return me.colormap=me.colormap||"jet",xe.update(me),xe}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(c,A,T){var e=c("ndarray"),a=c("ndarray-ops"),i=c("typedarray-pool");A.exports=p;var n=null,r=null,v=null;function s(_){n=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],r=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],v=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function o(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var b=function(_,h){a.muls(_,h,255)};function g(_,h,L){var E=_.gl,S=E.getParameter(E.MAX_TEXTURE_SIZE);if(h<0||h>S||L<0||L>S)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[h,L],_.bind(),E.texImage2D(E.TEXTURE_2D,0,_.format,h,L,0,_.format,_.type,null),_._mipLevels=[0],_}function d(_,h,L,E,S,P){this.gl=_,this.handle=h,this.format=S,this.type=P,this._shape=[L,E],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return F._wrapS},set:function(R){return F.wrapS=R}},{get:function(){return F._wrapT},set:function(R){return F.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return F._shape[0]},set:function(R){return F.width=R}},{get:function(){return F._shape[1]},set:function(R){return F.height=R}}]),this._shapeVector=D}var f=d.prototype;Object.defineProperties(f,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&n.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&n.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var h=this._anisoSamples;if(this._anisoSamples=Math.max(_,1)|0,h!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),v.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),v.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(v.indexOf(_[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(!Array.isArray(_))_=[_|0,_|0];else if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return g(this,_[0]|0,_[1]|0),[_[0]|0,_[1]|0]}},width:{get:function(){return this._shape[0]},set:function(_){return _=_|0,g(this,_,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _=_|0,g(this,this._shape[0],_),_}}}),f.bind=function(_){var h=this.gl;return _!==void 0&&h.activeTexture(h.TEXTURE0+(_|0)),h.bindTexture(h.TEXTURE_2D,this.handle),_!==void 0?_|0:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},f.dispose=function(){this.gl.deleteTexture(this.handle)},f.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),h=0;_>0;++h,_>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},f.setPixels=function(_,h,L,E){var S=this.gl;this.bind(),Array.isArray(h)?(E=L,L=h[1]|0,h=h[0]|0):(h=h||0,L=L||0),E=E||0;var P=o(_)?_:_.raw;if(P){var F=this._mipLevels.indexOf(E)<0;F?(S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(E)):S.texSubImage2D(S.TEXTURE_2D,E,h,L,this.format,this.type,P)}else if(_.shape&&_.stride&&_.data){if(_.shape.length<2||h+_.shape[1]>this._shape[1]>>>E||L+_.shape[0]>this._shape[0]>>>E||h<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");l(S,h,L,E,this.format,this.type,this._mipLevels,_)}else throw new Error("gl-texture2d: Unsupported data type")};function m(_,h){return _.length===3?h[2]===1&&h[1]===_[0]*_[2]&&h[0]===_[2]:h[0]===1&&h[1]===_[0]}function l(_,h,L,E,S,P,F,I){var D=I.dtype,R=I.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,z=0,G=m(R,I.stride.slice());if(D==="float32"?O=_.FLOAT:D==="float64"?(O=_.FLOAT,G=!1,D="float32"):D==="uint8"?O=_.UNSIGNED_BYTE:(O=_.UNSIGNED_BYTE,G=!1,D="uint8"),R.length===2)z=_.LUMINANCE,R=[R[0],R[1],1],I=e(I.data,R,[I.stride[0],I.stride[1],1],I.offset);else if(R.length===3){if(R[2]===1)z=_.ALPHA;else if(R[2]===2)z=_.LUMINANCE_ALPHA;else if(R[2]===3)z=_.RGB;else if(R[2]===4)z=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");R[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((z===_.LUMINANCE||z===_.ALPHA)&&(S===_.LUMINANCE||S===_.ALPHA)&&(z=S),z!==S)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Y=I.size,ee=F.indexOf(E)<0;if(ee&&F.push(E),O===P&&G)I.offset===0&&I.data.length===Y?ee?_.texImage2D(_.TEXTURE_2D,E,S,R[0],R[1],0,S,P,I.data):_.texSubImage2D(_.TEXTURE_2D,E,h,L,R[0],R[1],S,P,I.data):ee?_.texImage2D(_.TEXTURE_2D,E,S,R[0],R[1],0,S,P,I.data.subarray(I.offset,I.offset+Y)):_.texSubImage2D(_.TEXTURE_2D,E,h,L,R[0],R[1],S,P,I.data.subarray(I.offset,I.offset+Y));else{var j;P===_.FLOAT?j=i.mallocFloat32(Y):j=i.mallocUint8(Y);var X=e(j,R,[R[2],R[2]*R[0],1]);O===_.FLOAT&&P===_.UNSIGNED_BYTE?b(X,I):a.assign(X,I),ee?_.texImage2D(_.TEXTURE_2D,E,S,R[0],R[1],0,S,P,j.subarray(0,Y)):_.texSubImage2D(_.TEXTURE_2D,E,h,L,R[0],R[1],S,P,j.subarray(0,Y)),P===_.FLOAT?i.freeFloat32(j):i.freeUint8(j)}}function x(_){var h=_.createTexture();return _.bindTexture(_.TEXTURE_2D,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),h}function u(_,h,L,E,S){var P=_.getParameter(_.MAX_TEXTURE_SIZE);if(h<0||h>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(S===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=x(_);return _.texImage2D(_.TEXTURE_2D,0,E,h,L,0,E,S,null),new d(_,F,h,L,E,S)}function M(_,h,L,E,S,P){var F=x(_);return _.texImage2D(_.TEXTURE_2D,0,S,S,P,h),new d(_,F,L,E,S,P)}function w(_,h){var L=h.dtype,E=h.shape.slice(),S=_.getParameter(_.MAX_TEXTURE_SIZE);if(E[0]<0||E[0]>S||E[1]<0||E[1]>S)throw new Error("gl-texture2d: Invalid texture size");var P=m(E,h.stride.slice()),F=0;L==="float32"?F=_.FLOAT:L==="float64"?(F=_.FLOAT,P=!1,L="float32"):L==="uint8"?F=_.UNSIGNED_BYTE:(F=_.UNSIGNED_BYTE,P=!1,L="uint8");var I=0;if(E.length===2)I=_.LUMINANCE,E=[E[0],E[1],1],h=e(h.data,E,[h.stride[0],h.stride[1],1],h.offset);else if(E.length===3)if(E[2]===1)I=_.ALPHA;else if(E[2]===2)I=_.LUMINANCE_ALPHA;else if(E[2]===3)I=_.RGB;else if(E[2]===4)I=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");F===_.FLOAT&&!_.getExtension("OES_texture_float")&&(F=_.UNSIGNED_BYTE,P=!1);var D,R,O=h.size;if(P)h.offset===0&&h.data.length===O?D=h.data:D=h.data.subarray(h.offset,h.offset+O);else{var z=[E[2],E[2]*E[0],1];R=i.malloc(O,L);var G=e(R,E,z,0);(L==="float32"||L==="float64")&&F===_.UNSIGNED_BYTE?b(G,h):a.assign(G,h),D=R.subarray(0,O)}var Y=x(_);return _.texImage2D(_.TEXTURE_2D,0,I,E[0],E[1],0,I,F,D),P||i.free(R),new d(_,Y,E[0],E[1],I,F)}function p(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(n||s(_),typeof arguments[1]=="number")return u(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return u(_,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],L=o(h)?h:h.raw;if(L)return M(_,L,h.width|0,h.height|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return w(_,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(c,A,T){function e(a,i,n){i?i.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var r=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var v=0;v<n.length;++v){var s=n[v];if(s.buffer){var o=s.buffer,b=s.size||4,g=s.type||a.FLOAT,d=!!s.normalized,f=s.stride||0,m=s.offset||0;o.bind(),a.enableVertexAttribArray(v),a.vertexAttribPointer(v,b,g,d,f,m)}else{if(typeof s=="number")a.vertexAttrib1f(v,s);else if(s.length===1)a.vertexAttrib1f(v,s[0]);else if(s.length===2)a.vertexAttrib2f(v,s[0],s[1]);else if(s.length===3)a.vertexAttrib3f(v,s[0],s[1],s[2]);else if(s.length===4)a.vertexAttrib4f(v,s[0],s[1],s[2],s[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(v)}}for(;v<r;++v)a.disableVertexAttribArray(v)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var v=0;v<r;++v)a.disableVertexAttribArray(v)}}A.exports=e},{}],148:[function(c,A,T){var e=c("./do-bind.js");function a(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}a.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},a.prototype.update=function(n,r,v){this._elements=r,this._attributes=n,this._elementsType=v||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(n,r,v){v=v||0;var s=this.gl;this._elements?s.drawElements(n,r,this._elementsType,v):s.drawArrays(n,v,r)};function i(n){return new a(n)}A.exports=i},{"./do-bind.js":147}],149:[function(c,A,T){var e=c("./do-bind.js");function a(r,v,s,o,b,g){this.location=r,this.dimension=v,this.a=s,this.b=o,this.c=b,this.d=g}a.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function i(r,v,s){this.gl=r,this._ext=v,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(r,v,s){if(this.bind(),e(this.gl,v,r),this.unbind(),this._attribs.length=0,r)for(var o=0;o<r.length;++o){var b=r[o];typeof b=="number"?this._attribs.push(new a(o,1,b)):Array.isArray(b)&&this._attribs.push(new a(o,b.length,b[0],b[1],b[2],b[3]))}this._useElements=!!v,this._elementsType=s||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(r,v,s){s=s||0;var o=this.gl;this._useElements?o.drawElements(r,v,this._elementsType,s):o.drawArrays(r,s,v)};function n(r,v){return new i(r,v,v.createVertexArrayOES())}A.exports=n},{"./do-bind.js":147}],150:[function(c,A,T){var e=c("./lib/vao-native.js"),a=c("./lib/vao-emulated.js");function i(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}function n(r,v,s,o){var b=r.createVertexArray?new i(r):r.getExtension("OES_vertex_array_object"),g;return b?g=e(r,b):g=a(r),g.update(v,s,o),g}A.exports=n},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a}},{}],152:[function(c,A,T){A.exports=n;var e=c("./fromValues"),a=c("./normalize"),i=c("./dot");function n(r,v){var s=e(r[0],r[1],r[2]),o=e(v[0],v[1],v[2]);a(s,s),a(o,o);var b=i(s,o);return b>1?0:Math.acos(b)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=Math.ceil(i[0]),a[1]=Math.ceil(i[1]),a[2]=Math.ceil(i[2]),a}},{}],154:[function(c,A,T){A.exports=e;function e(a){var i=new Float32Array(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}},{}],155:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a}},{}],156:[function(c,A,T){A.exports=e;function e(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2];return a[0]=v*g-s*b,a[1]=s*o-r*g,a[2]=r*b-v*o,a}},{}],158:[function(c,A,T){A.exports=c("./distance")},{"./distance":159}],159:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2];return Math.sqrt(n*n+r*r+v*v)}},{}],160:[function(c,A,T){A.exports=c("./divide")},{"./divide":161}],161:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a}},{}],162:[function(c,A,T){A.exports=e;function e(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}},{}],163:[function(c,A,T){A.exports=1e-6},{}],164:[function(c,A,T){A.exports=a;var e=c("./epsilon");function a(i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2];return Math.abs(r-o)<=e*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(v-b)<=e*Math.max(1,Math.abs(v),Math.abs(b))&&Math.abs(s-g)<=e*Math.max(1,Math.abs(s),Math.abs(g))}},{"./epsilon":163}],165:[function(c,A,T){A.exports=e;function e(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]}},{}],166:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=Math.floor(i[0]),a[1]=Math.floor(i[1]),a[2]=Math.floor(i[2]),a}},{}],167:[function(c,A,T){A.exports=a;var e=c("./create")();function a(i,n,r,v,s,o){var b,g;for(n||(n=3),r||(r=0),v?g=Math.min(v*n+r,i.length):g=i.length,b=r;b<g;b+=n)e[0]=i[b],e[1]=i[b+1],e[2]=i[b+2],s(e,e,o),i[b]=e[0],i[b+1]=e[1],i[b+2]=e[2];return i}},{"./create":156}],168:[function(c,A,T){A.exports=e;function e(a,i,n){var r=new Float32Array(3);return r[0]=a,r[1]=i,r[2]=n,r}},{}],169:[function(c,A,T){A.exports={EPSILON:c("./epsilon"),create:c("./create"),clone:c("./clone"),angle:c("./angle"),fromValues:c("./fromValues"),copy:c("./copy"),set:c("./set"),equals:c("./equals"),exactEquals:c("./exactEquals"),add:c("./add"),subtract:c("./subtract"),sub:c("./sub"),multiply:c("./multiply"),mul:c("./mul"),divide:c("./divide"),div:c("./div"),min:c("./min"),max:c("./max"),floor:c("./floor"),ceil:c("./ceil"),round:c("./round"),scale:c("./scale"),scaleAndAdd:c("./scaleAndAdd"),distance:c("./distance"),dist:c("./dist"),squaredDistance:c("./squaredDistance"),sqrDist:c("./sqrDist"),length:c("./length"),len:c("./len"),squaredLength:c("./squaredLength"),sqrLen:c("./sqrLen"),negate:c("./negate"),inverse:c("./inverse"),normalize:c("./normalize"),dot:c("./dot"),cross:c("./cross"),lerp:c("./lerp"),random:c("./random"),transformMat4:c("./transformMat4"),transformMat3:c("./transformMat3"),transformQuat:c("./transformQuat"),rotateX:c("./rotateX"),rotateY:c("./rotateY"),rotateZ:c("./rotateZ"),forEach:c("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a}},{}],171:[function(c,A,T){A.exports=c("./length")},{"./length":172}],172:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2];return Math.sqrt(i*i+n*n+r*r)}},{}],173:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2];return a[0]=v+r*(n[0]-v),a[1]=s+r*(n[1]-s),a[2]=o+r*(n[2]-o),a}},{}],174:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a}},{}],175:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a}},{}],176:[function(c,A,T){A.exports=c("./multiply")},{"./multiply":177}],177:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a}},{}],178:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a}},{}],179:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=n*n+r*r+v*v;return s>0&&(s=1/Math.sqrt(s),a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s),a}},{}],180:[function(c,A,T){A.exports=e;function e(a,i){i=i||1;var n=Math.random()*2*Math.PI,r=Math.random()*2-1,v=Math.sqrt(1-r*r)*i;return a[0]=Math.cos(n)*v,a[1]=Math.sin(n)*v,a[2]=r*i,a}},{}],181:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=n[1],s=n[2],o=i[1]-v,b=i[2]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=i[0],a[1]=v+o*d-b*g,a[2]=s+o*g+b*d,a}},{}],182:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=n[0],s=n[2],o=i[0]-v,b=i[2]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=v+b*g+o*d,a[1]=i[1],a[2]=s+b*d-o*g,a}},{}],183:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=n[0],s=n[1],o=i[0]-v,b=i[1]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=v+o*d-b*g,a[1]=s+o*g+b*d,a[2]=i[2],a}},{}],184:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=Math.round(i[0]),a[1]=Math.round(i[1]),a[2]=Math.round(i[2]),a}},{}],185:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a}},{}],186:[function(c,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a}},{}],187:[function(c,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i,a[1]=n,a[2]=r,a}},{}],188:[function(c,A,T){A.exports=c("./squaredDistance")},{"./squaredDistance":190}],189:[function(c,A,T){A.exports=c("./squaredLength")},{"./squaredLength":191}],190:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2];return n*n+r*r+v*v}},{}],191:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2];return i*i+n*n+r*r}},{}],192:[function(c,A,T){A.exports=c("./subtract")},{"./subtract":193}],193:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a}},{}],194:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2];return a[0]=r*n[0]+v*n[3]+s*n[6],a[1]=r*n[1]+v*n[4]+s*n[7],a[2]=r*n[2]+v*n[5]+s*n[8],a}},{}],195:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[3]*r+n[7]*v+n[11]*s+n[15];return o=o||1,a[0]=(n[0]*r+n[4]*v+n[8]*s+n[12])/o,a[1]=(n[1]*r+n[5]*v+n[9]*s+n[13])/o,a[2]=(n[2]*r+n[6]*v+n[10]*s+n[14])/o,a}},{}],196:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2],d=n[3],f=d*r+b*s-g*v,m=d*v+g*r-o*s,l=d*s+o*v-b*r,x=-o*r-b*v-g*s;return a[0]=f*d+x*-o+m*-g-l*-b,a[1]=m*d+x*-b+l*-o-f*-g,a[2]=l*d+x*-g+f*-b-m*-o,a}},{}],197:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a[3]=i[3]+n[3],a}},{}],198:[function(c,A,T){A.exports=e;function e(a){var i=new Float32Array(4);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i}},{}],199:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a}},{}],200:[function(c,A,T){A.exports=e;function e(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2],s=i[3]-a[3];return Math.sqrt(n*n+r*r+v*v+s*s)}},{}],202:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a[3]=i[3]/n[3],a}},{}],203:[function(c,A,T){A.exports=e;function e(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]}},{}],204:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=new Float32Array(4);return v[0]=a,v[1]=i,v[2]=n,v[3]=r,v}},{}],205:[function(c,A,T){A.exports={create:c("./create"),clone:c("./clone"),fromValues:c("./fromValues"),copy:c("./copy"),set:c("./set"),add:c("./add"),subtract:c("./subtract"),multiply:c("./multiply"),divide:c("./divide"),min:c("./min"),max:c("./max"),scale:c("./scale"),scaleAndAdd:c("./scaleAndAdd"),distance:c("./distance"),squaredDistance:c("./squaredDistance"),length:c("./length"),squaredLength:c("./squaredLength"),negate:c("./negate"),inverse:c("./inverse"),normalize:c("./normalize"),dot:c("./dot"),lerp:c("./lerp"),random:c("./random"),transformMat4:c("./transformMat4"),transformQuat:c("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a[3]=1/i[3],a}},{}],207:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3];return Math.sqrt(i*i+n*n+r*r+v*v)}},{}],208:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2],b=i[3];return a[0]=v+r*(n[0]-v),a[1]=s+r*(n[1]-s),a[2]=o+r*(n[2]-o),a[3]=b+r*(n[3]-b),a}},{}],209:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a[3]=Math.max(i[3],n[3]),a}},{}],210:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a[3]=Math.min(i[3],n[3]),a}},{}],211:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a[3]=i[3]*n[3],a}},{}],212:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=-i[3],a}},{}],213:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=n*n+r*r+v*v+s*s;return o>0&&(o=1/Math.sqrt(o),a[0]=n*o,a[1]=r*o,a[2]=v*o,a[3]=s*o),a}},{}],214:[function(c,A,T){var e=c("./normalize"),a=c("./scale");A.exports=i;function i(n,r){return r=r||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),e(n,n),a(n,n,r),n}},{"./normalize":213,"./scale":215}],215:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a[3]=i[3]*n,a}},{}],216:[function(c,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a[3]=i[3]+n[3]*r,a}},{}],217:[function(c,A,T){A.exports=e;function e(a,i,n,r,v){return a[0]=i,a[1]=n,a[2]=r,a[3]=v,a}},{}],218:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2],s=i[3]-a[3];return n*n+r*r+v*v+s*s}},{}],219:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3];return i*i+n*n+r*r+v*v}},{}],220:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a[3]=i[3]-n[3],a}},{}],221:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3];return a[0]=n[0]*r+n[4]*v+n[8]*s+n[12]*o,a[1]=n[1]*r+n[5]*v+n[9]*s+n[13]*o,a[2]=n[2]*r+n[6]*v+n[10]*s+n[14]*o,a[3]=n[3]*r+n[7]*v+n[11]*s+n[15]*o,a}},{}],222:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2],d=n[3],f=d*r+b*s-g*v,m=d*v+g*r-o*s,l=d*s+o*v-b*r,x=-o*r-b*v-g*s;return a[0]=f*d+x*-o+m*-g-l*-b,a[1]=m*d+x*-b+l*-o-f*-g,a[2]=l*d+x*-g+f*-b-m*-o,a[3]=i[3],a}},{}],223:[function(c,A,T){var e=c("glsl-tokenizer"),a=c("atob-lite");A.exports=i;function i(n){for(var r=Array.isArray(n)?n:e(n),v=0;v<r.length;v++){var s=r[v];if(s.type==="preprocessor"){var o=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var b=o[1],g=o[2];return(b?a(g):g).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(c,A,T){A.exports=h;var e=c("./lib/literals"),a=c("./lib/operators"),i=c("./lib/builtins"),n=c("./lib/literals-300es"),r=c("./lib/builtins-300es"),v=999,s=9999,o=0,b=1,g=2,d=3,f=4,m=5,l=6,x=7,u=8,M=9,w=10,p=11,_=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function h(L){var E=0,S=0,P=v,F,I,D=[],R=[],O=1,z=0,G=0,Y=!1,ee=!1,j="",X;L=L||{};var ae=i,he=e;L.version==="300 es"&&(ae=r,he=n);for(var K={},J={},E=0;E<ae.length;E++)K[ae[E]]=!0;for(var E=0;E<he.length;E++)J[he[E]]=!0;return function(me){return R=[],me!==null?H(me):q()};function U(me){me.length&&R.push({type:_[P],data:me,position:G,line:O,column:z})}function H(me){E=0,me.toString&&(me=me.toString()),j+=me.replace(/\r\n/g,`
`),X=j.length;for(var be;F=j[E],E<X;){switch(be=E,P){case o:E=oe();break;case b:E=ie();break;case g:E=Q();break;case d:E=ne();break;case f:E=fe();break;case p:E=_e();break;case m:E=ye();break;case s:E=xe();break;case M:E=Z();break;case v:E=re();break}if(be!==E)switch(j[be]){case`
`:z=0,++O;break;default:++z;break}}return S+=E,j=j.slice(E),R}function q(me){return D.length&&U(D.join("")),P=w,U("(eof)"),R}function re(){return D=D.length?[]:D,I==="/"&&F==="*"?(G=S+E-1,P=o,I=F,E+1):I==="/"&&F==="/"?(G=S+E-1,P=b,I=F,E+1):F==="#"?(P=g,G=S+E,E):/\s/.test(F)?(P=M,G=S+E,E):(Y=/\d/.test(F),ee=/[^\w_]/.test(F),G=S+E,P=Y?f:ee?d:s,E)}function Z(){return/[^\s]/g.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function Q(){return(F==="\r"||F===`
`)&&I!=="\\"?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function ie(){return Q()}function oe(){return F==="/"&&I==="*"?(D.push(F),U(D.join("")),P=v,E+1):(D.push(F),I=F,E+1)}function ne(){if(I==="."&&/\d/.test(F))return P=m,E;if(I==="/"&&F==="*")return P=o,E;if(I==="/"&&F==="/")return P=b,E;if(F==="."&&D.length){for(;le(D););return P=m,E}if(F===";"||F===")"||F==="("){if(D.length)for(;le(D););return U(F),P=v,E+1}var me=D.length===2&&F!=="=";if(/[\w_\d\s]/.test(F)||me){for(;le(D););return P=v,E}return D.push(F),I=F,E+1}function le(me){var be=0,ke,De;do{if(ke=a.indexOf(me.slice(0,me.length+be).join("")),De=a[ke],ke===-1){if(be--+me.length>0)continue;De=me.slice(0,1).join("")}return U(De),G+=De.length,D=D.slice(De.length),D.length}while(1)}function _e(){return/[^a-fA-F0-9]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function fe(){return F==="."||/[eE]/.test(F)?(D.push(F),P=m,I=F,E+1):F==="x"&&D.length===1&&D[0]==="0"?(P=p,D.push(F),I=F,E+1):/[^\d]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function ye(){return F==="f"&&(D.push(F),I=F,E+=1),/[eE]/.test(F)||(F==="-"||F==="+")&&/[eE]/.test(I)?(D.push(F),I=F,E+1):/[^\d]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function xe(){if(/[^\d\w_]/.test(F)){var me=D.join("");return J[me]?P=u:K[me]?P=x:P=l,U(D.join("")),P=v,E}return D.push(F),I=F,E+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(c,A,T){var e=c("./builtins");e=e.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),A.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(c,A,T){A.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(c,A,T){var e=c("./literals");A.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(c,A,T){A.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(c,A,T){A.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(c,A,T){var e=c("./index");A.exports=a;function a(i,n){var r=e(n),v=[];return v=v.concat(r(i)),v=v.concat(r(null)),v}},{"./index":224}],231:[function(c,A,T){A.exports=function(e){typeof e=="string"&&(e=[e]);for(var a=[].slice.call(arguments,1),i=[],n=0;n<e.length-1;n++)i.push(e[n],a[n]||"");return i.push(e[n]),i.join("")}},{}],232:[function(c,A,T){var e=c("is-browser");function a(){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{i=!1}return i}A.exports=e&&a()},{"is-browser":236}],233:[function(c,A,T){A.exports=d;var e=c("robust-orientation"),a=c("simplicial-complex").compareCells;function i(f,m,l){this.vertices=f,this.adjacent=m,this.boundary=l,this.lastVisited=-1}i.prototype.flip=function(){var f=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=f;var m=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=m};function n(f,m,l){this.vertices=f,this.cell=m,this.index=l}function r(f,m){return a(f.vertices,m.vertices)}function v(f){return function(){var m=this.tuple;return f.apply(this,m)}}function s(f){var m=e[f+1];return m||(m=e),v(m)}var o=[];function b(f,m,l){this.dimension=f,this.vertices=m,this.simplices=l,this.interior=l.filter(function(M){return!M.boundary}),this.tuple=new Array(f+1);for(var x=0;x<=f;++x)this.tuple[x]=this.vertices[x];var u=o[f];u||(u=o[f]=s(f)),this.orient=u}var g=b.prototype;g.handleBoundaryDegeneracy=function(f,m){var l=this.dimension,x=this.vertices.length-1,u=this.tuple,M=this.vertices,w=[f];for(f.lastVisited=-x;w.length>0;){f=w.pop();for(var p=f.adjacent,_=0;_<=l;++_){var h=p[_];if(!(!h.boundary||h.lastVisited<=-x)){for(var L=h.vertices,E=0;E<=l;++E){var S=L[E];S<0?u[E]=m:u[E]=M[S]}var P=this.orient();if(P>0)return h;h.lastVisited=-x,P===0&&w.push(h)}}}return null},g.walk=function(f,m){var l=this.vertices.length-1,x=this.dimension,u=this.vertices,M=this.tuple,w=m?this.interior.length*Math.random()|0:this.interior.length-1,p=this.interior[w];e:for(;!p.boundary;){for(var _=p.vertices,h=p.adjacent,L=0;L<=x;++L)M[L]=u[_[L]];p.lastVisited=l;for(var L=0;L<=x;++L){var E=h[L];if(!(E.lastVisited>=l)){var S=M[L];M[L]=f;var P=this.orient();if(M[L]=S,P<0){p=E;continue e}else E.boundary?E.lastVisited=-l:E.lastVisited=l}}return}return p},g.addPeaks=function(f,m){var l=this.vertices.length-1,x=this.dimension,u=this.vertices,M=this.tuple,w=this.interior,p=this.simplices,_=[m];m.lastVisited=l,m.vertices[m.vertices.indexOf(-1)]=l,m.boundary=!1,w.push(m);for(var h=[];_.length>0;){var m=_.pop(),L=m.vertices,E=m.adjacent,S=L.indexOf(l);if(!(S<0)){for(var P=0;P<=x;++P)if(P!==S){var F=E[P];if(!(!F.boundary||F.lastVisited>=l)){var I=F.vertices;if(F.lastVisited!==-l){for(var D=0,R=0;R<=x;++R)I[R]<0?(D=R,M[R]=f):M[R]=u[I[R]];var O=this.orient();if(O>0){I[D]=l,F.boundary=!1,w.push(F),_.push(F),F.lastVisited=l;continue}else F.lastVisited=-l}var z=F.adjacent,G=L.slice(),Y=E.slice(),ee=new i(G,Y,!0);p.push(ee);var j=z.indexOf(m);if(!(j<0)){z[j]=ee,Y[S]=F,G[P]=-1,Y[P]=m,E[P]=ee,ee.flip();for(var R=0;R<=x;++R){var X=G[R];if(!(X<0||X===l)){for(var ae=new Array(x-1),he=0,K=0;K<=x;++K){var J=G[K];J<0||K===R||(ae[he++]=J)}h.push(new n(ae,ee,R))}}}}}}}h.sort(r);for(var P=0;P+1<h.length;P+=2){var U=h[P],H=h[P+1],q=U.index,re=H.index;q<0||re<0||(U.cell.adjacent[U.index]=H.cell,H.cell.adjacent[H.index]=U.cell)}},g.insert=function(f,m){var l=this.vertices;l.push(f);var x=this.walk(f,m);if(!!x){for(var u=this.dimension,M=this.tuple,w=0;w<=u;++w){var p=x.vertices[w];p<0?M[w]=f:M[w]=l[p]}var _=this.orient(M);_<0||_===0&&(x=this.handleBoundaryDegeneracy(x,f),!x)||this.addPeaks(f,x)}},g.boundary=function(){for(var f=this.dimension,m=[],l=this.simplices,x=l.length,u=0;u<x;++u){var M=l[u];if(M.boundary){for(var w=new Array(f),p=M.vertices,_=0,h=0,L=0;L<=f;++L)p[L]>=0?w[_++]=p[L]:h=L&1;if(h===(f&1)){var E=w[0];w[0]=w[1],w[1]=E}m.push(w)}}return m};function d(f,m){var l=f.length;if(l===0)throw new Error("Must have at least d+1 points");var x=f[0].length;if(l<=x)throw new Error("Must input at least d+1 points");var u=f.slice(0,x+1),M=e.apply(void 0,u);if(M===0)throw new Error("Input not in general position");for(var w=new Array(x+1),p=0;p<=x;++p)w[p]=p;M<0&&(w[0]=1,w[1]=0);for(var _=new i(w,new Array(x+1),!1),h=_.adjacent,L=new Array(x+2),p=0;p<=x;++p){for(var E=w.slice(),S=0;S<=x;++S)S===p&&(E[S]=-1);var P=E[0];E[0]=E[1],E[1]=P;var F=new i(E,new Array(x+1),!0);h[p]=F,L[p]=F}L[x+1]=_;for(var p=0;p<=x;++p)for(var E=h[p].vertices,I=h[p].adjacent,S=0;S<=x;++S){var D=E[S];if(D<0){I[S]=_;continue}for(var R=0;R<=x;++R)h[R].vertices.indexOf(D)<0&&(I[S]=h[R])}for(var O=new b(x,u,L),z=!!m,p=x+1;p<l;++p)O.insert(f[p],z);return O.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(c,A,T){var e=c("binary-search-bounds"),a=0,i=1,n=2;A.exports=_;function r(h,L,E,S,P){this.mid=h,this.left=L,this.right=E,this.leftPoints=S,this.rightPoints=P,this.count=(L?L.count:0)+(E?E.count:0)+S.length}var v=r.prototype;function s(h,L){h.mid=L.mid,h.left=L.left,h.right=L.right,h.leftPoints=L.leftPoints,h.rightPoints=L.rightPoints,h.count=L.count}function o(h,L){var E=M(L);h.mid=E.mid,h.left=E.left,h.right=E.right,h.leftPoints=E.leftPoints,h.rightPoints=E.rightPoints,h.count=E.count}function b(h,L){var E=h.intervals([]);E.push(L),o(h,E)}function g(h,L){var E=h.intervals([]),S=E.indexOf(L);return S<0?a:(E.splice(S,1),o(h,E),i)}v.intervals=function(h){return h.push.apply(h,this.leftPoints),this.left&&this.left.intervals(h),this.right&&this.right.intervals(h),h},v.insert=function(h){var L=this.count-this.leftPoints.length;if(this.count+=1,h[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?b(this,h):this.left.insert(h):this.left=M([h]);else if(h[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?b(this,h):this.right.insert(h):this.right=M([h]);else{var E=e.ge(this.leftPoints,h,x),S=e.ge(this.rightPoints,h,u);this.leftPoints.splice(E,0,h),this.rightPoints.splice(S,0,h)}},v.remove=function(h){var L=this.count-this.leftPoints;if(h[1]<this.mid){if(!this.left)return a;var E=this.right?this.right.count:0;if(4*E>3*(L-1))return g(this,h);var S=this.left.remove(h);return S===n?(this.left=null,this.count-=1,i):(S===i&&(this.count-=1),S)}else if(h[0]>this.mid){if(!this.right)return a;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return g(this,h);var S=this.right.remove(h);return S===n?(this.right=null,this.count-=1,i):(S===i&&(this.count-=1),S)}else{if(this.count===1)return this.leftPoints[0]===h?n:a;if(this.leftPoints.length===1&&this.leftPoints[0]===h){if(this.left&&this.right){for(var F=this,I=this.left;I.right;)F=I,I=I.right;if(F===this)I.right=this.right;else{var D=this.left,S=this.right;F.count-=I.count,F.right=I.left,I.left=D,I.right=S}s(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return i}for(var D=e.ge(this.leftPoints,h,x);D<this.leftPoints.length&&this.leftPoints[D][0]===h[0];++D)if(this.leftPoints[D]===h){this.count-=1,this.leftPoints.splice(D,1);for(var S=e.ge(this.rightPoints,h,u);S<this.rightPoints.length&&this.rightPoints[S][1]===h[1];++S)if(this.rightPoints[S]===h)return this.rightPoints.splice(S,1),i}return a}};function d(h,L,E){for(var S=0;S<h.length&&h[S][0]<=L;++S){var P=E(h[S]);if(P)return P}}function f(h,L,E){for(var S=h.length-1;S>=0&&h[S][1]>=L;--S){var P=E(h[S]);if(P)return P}}function m(h,L){for(var E=0;E<h.length;++E){var S=L(h[E]);if(S)return S}}v.queryPoint=function(h,L){if(h<this.mid){if(this.left){var E=this.left.queryPoint(h,L);if(E)return E}return d(this.leftPoints,h,L)}else if(h>this.mid){if(this.right){var E=this.right.queryPoint(h,L);if(E)return E}return f(this.rightPoints,h,L)}else return m(this.leftPoints,L)},v.queryInterval=function(h,L,E){if(h<this.mid&&this.left){var S=this.left.queryInterval(h,L,E);if(S)return S}if(L>this.mid&&this.right){var S=this.right.queryInterval(h,L,E);if(S)return S}return L<this.mid?d(this.leftPoints,L,E):h>this.mid?f(this.rightPoints,h,E):m(this.leftPoints,E)};function l(h,L){return h-L}function x(h,L){var E=h[0]-L[0];return E||h[1]-L[1]}function u(h,L){var E=h[1]-L[1];return E||h[0]-L[0]}function M(h){if(h.length===0)return null;for(var L=[],E=0;E<h.length;++E)L.push(h[E][0],h[E][1]);L.sort(l);for(var S=L[L.length>>1],P=[],F=[],I=[],E=0;E<h.length;++E){var D=h[E];D[1]<S?P.push(D):S<D[0]?F.push(D):I.push(D)}var R=I,O=I.slice();return R.sort(x),O.sort(u),new r(S,M(P),M(F),R,O)}function w(h){this.root=h}var p=w.prototype;p.insert=function(h){this.root?this.root.insert(h):this.root=new r(h[0],null,null,[h],[h])},p.remove=function(h){if(this.root){var L=this.root.remove(h);return L===n&&(this.root=null),L!==a}return!1},p.queryPoint=function(h,L){if(this.root)return this.root.queryPoint(h,L)},p.queryInterval=function(h,L,E){if(h<=L&&this.root)return this.root.queryInterval(h,L,E)},Object.defineProperty(p,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(p,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function _(h){return!h||h.length===0?new w(null):new w(M(h))}},{"binary-search-bounds":31}],235:[function(c,A,T){function e(a){for(var i=new Array(a),n=0;n<a;++n)i[n]=n;return i}A.exports=e},{}],236:[function(c,A,T){A.exports=!0},{}],237:[function(c,A,T){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */A.exports=function(i){return i!=null&&(e(i)||a(i)||!!i._isBuffer)};function e(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function a(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&e(i.slice(0,0))}},{}],238:[function(c,A,T){A.exports=i,A.exports.isMobile=i,A.exports.default=i;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(n){n||(n={});var r=n.ua;if(!r&&typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var v=n.tablet?a.test(r):e.test(r);return!v&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(v=!0),v}},{}],239:[function(c,A,T){A.exports=function(e){for(var a=e.length,i,n=0;n<a;n++)if(i=e.charCodeAt(n),(i<9||i>13)&&i!==32&&i!==133&&i!==160&&i!==5760&&i!==6158&&(i<8192||i>8205)&&i!==8232&&i!==8233&&i!==8239&&i!==8287&&i!==8288&&i!==12288&&i!==65279)return!1;return!0}},{}],240:[function(c,A,T){function e(a,i,n){return a*(1-n)+i*n}A.exports=e},{}],241:[function(c,A,T){var e=c("./normalize"),a=c("gl-mat4/create"),i=c("gl-mat4/clone"),n=c("gl-mat4/determinant"),r=c("gl-mat4/invert"),v=c("gl-mat4/transpose"),s={length:c("gl-vec3/length"),normalize:c("gl-vec3/normalize"),dot:c("gl-vec3/dot"),cross:c("gl-vec3/cross")},o=a(),b=a(),g=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];A.exports=function(M,w,p,_,h,L){if(w||(w=[0,0,0]),p||(p=[0,0,0]),_||(_=[0,0,0]),h||(h=[0,0,0,1]),L||(L=[0,0,0,1]),!e(o,M)||(i(b,o),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(n(b)<1e-8)))return!1;var E=o[3],S=o[7],P=o[11],F=o[12],I=o[13],D=o[14],R=o[15];if(E!==0||S!==0||P!==0){g[0]=E,g[1]=S,g[2]=P,g[3]=R;var O=r(b,b);if(!O)return!1;v(b,b),m(h,g,b)}else h[0]=h[1]=h[2]=0,h[3]=1;if(w[0]=F,w[1]=I,w[2]=D,l(d,o),p[0]=s.length(d[0]),s.normalize(d[0],d[0]),_[0]=s.dot(d[0],d[1]),x(d[1],d[1],d[0],1,-_[0]),p[1]=s.length(d[1]),s.normalize(d[1],d[1]),_[0]/=p[1],_[1]=s.dot(d[0],d[2]),x(d[2],d[2],d[0],1,-_[1]),_[2]=s.dot(d[1],d[2]),x(d[2],d[2],d[1],1,-_[2]),p[2]=s.length(d[2]),s.normalize(d[2],d[2]),_[1]/=p[2],_[2]/=p[2],s.cross(f,d[1],d[2]),s.dot(d[0],f)<0)for(var z=0;z<3;z++)p[z]*=-1,d[z][0]*=-1,d[z][1]*=-1,d[z][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(L[0]=-L[0]),d[0][2]>d[2][0]&&(L[1]=-L[1]),d[1][0]>d[0][1]&&(L[2]=-L[2]),!0};function m(u,M,w){var p=M[0],_=M[1],h=M[2],L=M[3];return u[0]=w[0]*p+w[4]*_+w[8]*h+w[12]*L,u[1]=w[1]*p+w[5]*_+w[9]*h+w[13]*L,u[2]=w[2]*p+w[6]*_+w[10]*h+w[14]*L,u[3]=w[3]*p+w[7]*_+w[11]*h+w[15]*L,u}function l(u,M){u[0][0]=M[0],u[0][1]=M[1],u[0][2]=M[2],u[1][0]=M[4],u[1][1]=M[5],u[1][2]=M[6],u[2][0]=M[8],u[2][1]=M[9],u[2][2]=M[10]}function x(u,M,w,p,_){u[0]=M[0]*p+w[0]*_,u[1]=M[1]*p+w[1]*_,u[2]=M[2]*p+w[2]*_}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(c,A,T){A.exports=function(a,i){var n=i[15];if(n===0)return!1;for(var r=1/n,v=0;v<16;v++)a[v]=i[v]*r;return!0}},{}],243:[function(c,A,T){var e=c("gl-vec3/lerp"),a=c("mat4-recompose"),i=c("mat4-decompose"),n=c("gl-mat4/determinant"),r=c("quat-slerp"),v=g(),s=g(),o=g();A.exports=b;function b(m,l,x,u){if(n(l)===0||n(x)===0)return!1;var M=i(l,v.translate,v.scale,v.skew,v.perspective,v.quaternion),w=i(x,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!M||!w?!1:(e(o.translate,v.translate,s.translate,u),e(o.skew,v.skew,s.skew,u),e(o.scale,v.scale,s.scale,u),e(o.perspective,v.perspective,s.perspective,u),r(o.quaternion,v.quaternion,s.quaternion,u),a(m,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function g(){return{translate:d(),scale:d(1),skew:d(),perspective:f(),quaternion:f()}}function d(m){return[m||0,m||0,m||0]}function f(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(c,A,T){var e={identity:c("gl-mat4/identity"),translate:c("gl-mat4/translate"),multiply:c("gl-mat4/multiply"),create:c("gl-mat4/create"),scale:c("gl-mat4/scale"),fromRotationTranslation:c("gl-mat4/fromRotationTranslation")};e.create();var a=e.create();A.exports=function(n,r,v,s,o,b){return e.identity(n),e.fromRotationTranslation(n,b,r),n[3]=o[0],n[7]=o[1],n[11]=o[2],n[15]=o[3],e.identity(a),s[2]!==0&&(a[9]=s[2],e.multiply(n,n,a)),s[1]!==0&&(a[9]=0,a[8]=s[1],e.multiply(n,n,a)),s[0]!==0&&(a[8]=0,a[4]=s[0],e.multiply(n,n,a)),e.scale(n,n,v),n}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(c,A,T){var e=c("binary-search-bounds"),a=c("mat4-interpolate"),i=c("gl-mat4/invert"),n=c("gl-mat4/rotateX"),r=c("gl-mat4/rotateY"),v=c("gl-mat4/rotateZ"),s=c("gl-mat4/lookAt"),o=c("gl-mat4/translate");c("gl-mat4/scale");var b=c("gl-vec3/normalize"),g=[0,0,0];A.exports=l;function d(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var f=d.prototype;f.recalcMatrix=function(x){var u=this._time,M=e.le(u,x),w=this.computedMatrix;if(!(M<0)){var p=this._components;if(M===u.length-1)for(var _=16*M,h=0;h<16;++h)w[h]=p[_++];else{for(var L=u[M+1]-u[M],_=16*M,E=this.prevMatrix,S=!0,h=0;h<16;++h)E[h]=p[_++];for(var P=this.nextMatrix,h=0;h<16;++h)P[h]=p[_++],S=S&&E[h]===P[h];if(L<1e-6||S)for(var h=0;h<16;++h)w[h]=E[h];else a(w,E,P,(x-u[M])/L)}var F=this.computedUp;F[0]=w[1],F[1]=w[5],F[2]=w[9],b(F,F);var I=this.computedInverse;i(I,w);var D=this.computedEye,R=I[15];D[0]=I[12]/R,D[1]=I[13]/R,D[2]=I[14]/R;for(var O=this.computedCenter,z=Math.exp(this.computedRadius[0]),h=0;h<3;++h)O[h]=D[h]-w[2+4*h]*z}},f.idle=function(x){if(!(x<this.lastT())){for(var u=this._components,M=u.length-16,w=0;w<16;++w)u.push(u[M++]);this._time.push(x)}},f.flush=function(x){var u=e.gt(this._time,x)-2;u<0||(this._time.splice(0,u),this._components.splice(0,16*u))},f.lastT=function(){return this._time[this._time.length-1]},f.lookAt=function(x,u,M,w){this.recalcMatrix(x),u=u||this.computedEye,M=M||g,w=w||this.computedUp,this.setMatrix(x,s(this.computedMatrix,u,M,w));for(var p=0,_=0;_<3;++_)p+=Math.pow(M[_]-u[_],2);p=Math.log(Math.sqrt(p)),this.computedRadius[0]=p},f.rotate=function(x,u,M,w){this.recalcMatrix(x);var p=this.computedInverse;u&&r(p,p,u),M&&n(p,p,M),w&&v(p,p,w),this.setMatrix(x,i(this.computedMatrix,p))};var m=[0,0,0];f.pan=function(x,u,M,w){m[0]=-(u||0),m[1]=-(M||0),m[2]=-(w||0),this.recalcMatrix(x);var p=this.computedInverse;o(p,p,m),this.setMatrix(x,i(p,p))},f.translate=function(x,u,M,w){m[0]=u||0,m[1]=M||0,m[2]=w||0,this.recalcMatrix(x);var p=this.computedMatrix;o(p,p,m),this.setMatrix(x,p)},f.setMatrix=function(x,u){if(!(x<this.lastT())){this._time.push(x);for(var M=0;M<16;++M)this._components.push(u[M])}},f.setDistance=function(x,u){this.computedRadius[0]=u},f.setDistanceLimits=function(x,u){var M=this._limits;M[0]=x,M[1]=u},f.getDistanceLimits=function(x){var u=this._limits;return x?(x[0]=u[0],x[1]=u[1],x):u};function l(x){x=x||{};var u=x.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(u)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(c,A,T){A.exports=a;var e=c("robust-orientation")[3];function a(i){var n=i.length;if(n<3){for(var f=new Array(n),r=0;r<n;++r)f[r]=r;return n===2&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:f}for(var v=new Array(n),r=0;r<n;++r)v[r]=r;v.sort(function(u,M){var w=i[u][0]-i[M][0];return w||i[u][1]-i[M][1]});for(var s=[v[0],v[1]],o=[v[0],v[1]],r=2;r<n;++r){for(var b=v[r],g=i[b],d=s.length;d>1&&e(i[s[d-2]],i[s[d-1]],g)<=0;)d-=1,s.pop();for(s.push(b),d=o.length;d>1&&e(i[o[d-2]],i[o[d-1]],g)>=0;)d-=1,o.pop();o.push(b)}for(var f=new Array(o.length+s.length-2),m=0,r=0,l=s.length;r<l;++r)f[m++]=s[r];for(var x=o.length-2;x>0;--x)f[m++]=o[x];return f}},{"robust-orientation":284}],247:[function(c,A,T){A.exports=a;var e=c("mouse-event");function a(i,n){n||(n=i,i=window);var r=0,v=0,s=0,o={shift:!1,alt:!1,control:!1,meta:!1},b=!1;function g(h){var L=!1;return"altKey"in h&&(L=L||h.altKey!==o.alt,o.alt=!!h.altKey),"shiftKey"in h&&(L=L||h.shiftKey!==o.shift,o.shift=!!h.shiftKey),"ctrlKey"in h&&(L=L||h.ctrlKey!==o.control,o.control=!!h.ctrlKey),"metaKey"in h&&(L=L||h.metaKey!==o.meta,o.meta=!!h.metaKey),L}function d(h,L){var E=e.x(L),S=e.y(L);"buttons"in L&&(h=L.buttons|0),(h!==r||E!==v||S!==s||g(L))&&(r=h|0,v=E||0,s=S||0,n&&n(r,v,s,o))}function f(h){d(0,h)}function m(){(r||v||s||o.shift||o.alt||o.meta||o.control)&&(v=s=0,r=0,o.shift=o.alt=o.control=o.meta=!1,n&&n(0,0,0,o))}function l(h){g(h)&&n&&n(r,v,s,o)}function x(h){e.buttons(h)===0?d(0,h):d(r,h)}function u(h){d(r|e.buttons(h),h)}function M(h){d(r&~e.buttons(h),h)}function w(){b||(b=!0,i.addEventListener("mousemove",x),i.addEventListener("mousedown",u),i.addEventListener("mouseup",M),i.addEventListener("mouseleave",f),i.addEventListener("mouseenter",f),i.addEventListener("mouseout",f),i.addEventListener("mouseover",f),i.addEventListener("blur",m),i.addEventListener("keyup",l),i.addEventListener("keydown",l),i.addEventListener("keypress",l),i!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function p(){!b||(b=!1,i.removeEventListener("mousemove",x),i.removeEventListener("mousedown",u),i.removeEventListener("mouseup",M),i.removeEventListener("mouseleave",f),i.removeEventListener("mouseenter",f),i.removeEventListener("mouseout",f),i.removeEventListener("mouseover",f),i.removeEventListener("blur",m),i.removeEventListener("keyup",l),i.removeEventListener("keydown",l),i.removeEventListener("keypress",l),i!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}w();var _={element:i};return Object.defineProperties(_,{enabled:{get:function(){return b},set:function(h){h?w():p()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),_}},{"mouse-event":249}],248:[function(c,A,T){var e={left:0,top:0};A.exports=a;function a(n,r,v){r=r||n.currentTarget||n.srcElement,Array.isArray(v)||(v=[0,0]);var s=n.clientX||0,o=n.clientY||0,b=i(r);return v[0]=s-b.left,v[1]=o-b.top,v}function i(n){return n===window||n===document||n===document.body?e:n.getBoundingClientRect()}},{}],249:[function(c,A,T){function e(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){var v=r.which;if(v===2)return 4;if(v===3)return 2;if(v>0)return 1<<v-1}else if("button"in r){var v=r.button;if(v===1)return 4;if(v===2)return 2;if(v>=0)return 1<<v}}return 0}T.buttons=e;function a(r){return r.target||r.srcElement||window}T.element=a;function i(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var v=a(r),s=v.getBoundingClientRect();return r.clientX-s.left}return 0}T.x=i;function n(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var v=a(r),s=v.getBoundingClientRect();return r.clientY-s.top}return 0}T.y=n},{}],250:[function(c,A,T){var e=c("to-px");A.exports=a;function a(i,n,r){typeof i=="function"&&(r=!!n,n=i,i=window);var v=e("ex",i),s=function(o){r&&o.preventDefault();var b=o.deltaX||0,g=o.deltaY||0,d=o.deltaZ||0,f=o.deltaMode,m=1;switch(f){case 1:m=v;break;case 2:m=window.innerHeight;break}if(b*=m,g*=m,d*=m,b||g||d)return n(b,g,d,o)};return i.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(c,A,T){var e=c("typedarray-pool");A.exports=n;var a={"false,0,1":function(v,s,o,b,g){return function(f,m,l,x){var u=f.shape[0]|0,M=f.shape[1]|0,w=f.data,p=f.offset|0,_=f.stride[0]|0,h=f.stride[1]|0,L=p,E,S=-_|0,P=0,F=-h|0,I=0,D=-_-h|0,R=0,O=_|0,z=h-_*u|0,G=0,Y=0,ee=0,j=2*u|0,X=b(j),ae=b(j),he=0,K=0,J=-1,U=-1,H=0,q=-u|0,re=u|0,Z=0,Q=-u-1|0,ie=u-1|0,oe=0,ne=0,le=0;for(G=0;G<u;++G)X[he++]=o(w[L],m,l,x),L+=O;if(L+=z,M>0){if(Y=1,X[he++]=o(w[L],m,l,x),L+=O,u>0)for(G=1,E=w[L],K=X[he]=o(E,m,l,x),H=X[he+J],Z=X[he+q],oe=X[he+Q],(K!==H||K!==Z||K!==oe)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,H,Z,oe,m,l,x),ne=ae[he]=ee++),he+=1,L+=O,G=2;G<u;++G)E=w[L],K=X[he]=o(E,m,l,x),H=X[he+J],Z=X[he+q],oe=X[he+Q],(K!==H||K!==Z||K!==oe)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,H,Z,oe,m,l,x),ne=ae[he]=ee++,oe!==H&&s(ae[he+J],ne,R,P,oe,H,m,l,x)),he+=1,L+=O;for(L+=z,he=0,le=J,J=U,U=le,le=q,q=re,re=le,le=Q,Q=ie,ie=le,Y=2;Y<M;++Y){if(X[he++]=o(w[L],m,l,x),L+=O,u>0)for(G=1,E=w[L],K=X[he]=o(E,m,l,x),H=X[he+J],Z=X[he+q],oe=X[he+Q],(K!==H||K!==Z||K!==oe)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,H,Z,oe,m,l,x),ne=ae[he]=ee++,oe!==Z&&s(ae[he+q],ne,I,R,Z,oe,m,l,x)),he+=1,L+=O,G=2;G<u;++G)E=w[L],K=X[he]=o(E,m,l,x),H=X[he+J],Z=X[he+q],oe=X[he+Q],(K!==H||K!==Z||K!==oe)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,H,Z,oe,m,l,x),ne=ae[he]=ee++,oe!==Z&&s(ae[he+q],ne,I,R,Z,oe,m,l,x),oe!==H&&s(ae[he+J],ne,R,P,oe,H,m,l,x)),he+=1,L+=O;Y&1&&(he=0),le=J,J=U,U=le,le=q,q=re,re=le,le=Q,Q=ie,ie=le,L+=z}}g(ae),g(X)}},"false,1,0":function(v,s,o,b,g){return function(f,m,l,x){var u=f.shape[0]|0,M=f.shape[1]|0,w=f.data,p=f.offset|0,_=f.stride[0]|0,h=f.stride[1]|0,L=p,E,S=-_|0,P=0,F=-h|0,I=0,D=-_-h|0,R=0,O=h|0,z=_-h*M|0,G=0,Y=0,ee=0,j=2*M|0,X=b(j),ae=b(j),he=0,K=0,J=-1,U=-1,H=0,q=-M|0,re=M|0,Z=0,Q=-M-1|0,ie=M-1|0,oe=0,ne=0,le=0;for(Y=0;Y<M;++Y)X[he++]=o(w[L],m,l,x),L+=O;if(L+=z,u>0){if(G=1,X[he++]=o(w[L],m,l,x),L+=O,M>0)for(Y=1,E=w[L],K=X[he]=o(E,m,l,x),Z=X[he+q],H=X[he+J],oe=X[he+Q],(K!==Z||K!==H||K!==oe)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,Z,H,oe,m,l,x),ne=ae[he]=ee++),he+=1,L+=O,Y=2;Y<M;++Y)E=w[L],K=X[he]=o(E,m,l,x),Z=X[he+q],H=X[he+J],oe=X[he+Q],(K!==Z||K!==H||K!==oe)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,Z,H,oe,m,l,x),ne=ae[he]=ee++,oe!==H&&s(ae[he+J],ne,I,R,H,oe,m,l,x)),he+=1,L+=O;for(L+=z,he=0,le=q,q=re,re=le,le=J,J=U,U=le,le=Q,Q=ie,ie=le,G=2;G<u;++G){if(X[he++]=o(w[L],m,l,x),L+=O,M>0)for(Y=1,E=w[L],K=X[he]=o(E,m,l,x),Z=X[he+q],H=X[he+J],oe=X[he+Q],(K!==Z||K!==H||K!==oe)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,Z,H,oe,m,l,x),ne=ae[he]=ee++,oe!==Z&&s(ae[he+q],ne,R,P,oe,Z,m,l,x)),he+=1,L+=O,Y=2;Y<M;++Y)E=w[L],K=X[he]=o(E,m,l,x),Z=X[he+q],H=X[he+J],oe=X[he+Q],(K!==Z||K!==H||K!==oe)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,Z,H,oe,m,l,x),ne=ae[he]=ee++,oe!==H&&s(ae[he+J],ne,I,R,H,oe,m,l,x),oe!==Z&&s(ae[he+q],ne,R,P,oe,Z,m,l,x)),he+=1,L+=O;G&1&&(he=0),le=q,q=re,re=le,le=J,J=U,U=le,le=Q,Q=ie,ie=le,L+=z}}g(ae),g(X)}}};function i(r,v,s,o,b,g){var d=[g,b].join(","),f=a[d];return f(r,v,s,e.mallocUint32,e.freeUint32)}function n(r){function v(m){throw new Error("ndarray-extract-contour: "+m)}typeof r!="object"&&v("Must specify arguments");var s=r.order;Array.isArray(s)||v("Must specify order");var o=r.arrayArguments||1;o<1&&v("Must have at least one array argument");var b=r.scalarArguments||0;b<0&&v("Scalar arg count must be > 0"),typeof r.vertex!="function"&&v("Must specify vertex creation function"),typeof r.cell!="function"&&v("Must specify cell creation function"),typeof r.phase!="function"&&v("Must specify phase function");for(var g=r.getters||[],d=new Array(o),f=0;f<o;++f)g.indexOf(f)>=0?d[f]=!0:d[f]=!1;return i(r.vertex,r.cell,r.phase,b,s,d)}},{"typedarray-pool":308}],252:[function(c,A,T){var e=c("dup"),a={zero:function(l,x,u,M){var w=l[0],p=u[0];M|=0;var _=0,h=p;for(_=0;_<w;++_)x[M]=0,M+=h},fdTemplate1:function(l,x,u,M,w,p,_){var h=l[0],L=u[0],E=p[0],S=-1*L,P=L;M|=0,_|=0;var F=0,I=L,D=E;for(F=0;F<h;++F)w[_]=.5*(x[M+S]-x[M+P]),M+=I,_+=D},fdTemplate2:function(l,x,u,M,w,p,_,h,L,E){var S=l[0],P=l[1],F=u[0],I=u[1],D=p[0],R=p[1],O=L[0],z=L[1],G=-1*F,Y=F,ee=-1*I,j=I;M|=0,_|=0,E|=0;var X=0,ae=0,he=I,K=F-P*I,J=R,U=D-P*R,H=z,q=O-P*z;for(ae=0;ae<S;++ae){for(X=0;X<P;++X)w[_]=.5*(x[M+G]-x[M+Y]),h[E]=.5*(x[M+ee]-x[M+j]),M+=he,_+=J,E+=H;M+=K,_+=U,E+=q}}},i={cdiff:function(l){var x={};return function(M,w,p){var _=M.dtype,h=M.order,L=w.dtype,E=w.order,S=p.dtype,P=p.order,F=[_,h.join(),L,E.join(),S,P.join()].join(),I=x[F];return I||(x[F]=I=l([_,h,L,E,S,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,p.data,p.stride,p.offset|0)}},zero:function(l){var x={};return function(M){var w=M.dtype,p=M.order,_=[w,p.join()].join(),h=x[_];return h||(x[_]=h=l([w,p])),h(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(l){var x={};return function(M,w){var p=M.dtype,_=M.order,h=w.dtype,L=w.order,E=[p,_.join(),h,L.join()].join(),S=x[E];return S||(x[E]=S=l([p,_,h,L])),S(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0)}},fdTemplate2:function(l){var x={};return function(M,w,p){var _=M.dtype,h=M.order,L=w.dtype,E=w.order,S=p.dtype,P=p.order,F=[_,h.join(),L,E.join(),S,P.join()].join(),I=x[F];return I||(x[F]=I=l([_,h,L,E,S,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,p.data,p.stride,p.offset|0)}}};function n(l){var x=i[l.funcName];return x(r.bind(void 0,l))}function r(l){return a[l.funcName]}function v(l){return n({funcName:l.funcName})}var s={},o={},b=v({funcName:"cdiff"}),g=v({funcName:"zero"});function d(l){return l in s?s[l]:s[l]=v({funcName:"fdTemplate"+l})}function f(l,x,u,M){return function(w,p){var _=p.shape.slice();return _[0]>2&&_[1]>2&&M(p.pick(-1,-1).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,0).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,1).lo(1,1).hi(_[0]-2,_[1]-2)),_[1]>2&&(u(p.pick(0,-1).lo(1).hi(_[1]-2),w.pick(0,-1,1).lo(1).hi(_[1]-2)),x(w.pick(0,-1,0).lo(1).hi(_[1]-2))),_[1]>2&&(u(p.pick(_[0]-1,-1).lo(1).hi(_[1]-2),w.pick(_[0]-1,-1,1).lo(1).hi(_[1]-2)),x(w.pick(_[0]-1,-1,0).lo(1).hi(_[1]-2))),_[0]>2&&(u(p.pick(-1,0).lo(1).hi(_[0]-2),w.pick(-1,0,0).lo(1).hi(_[0]-2)),x(w.pick(-1,0,1).lo(1).hi(_[0]-2))),_[0]>2&&(u(p.pick(-1,_[1]-1).lo(1).hi(_[0]-2),w.pick(-1,_[1]-1,0).lo(1).hi(_[0]-2)),x(w.pick(-1,_[1]-1,1).lo(1).hi(_[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(_[0]-1,0,0,0),w.set(_[0]-1,0,1,0),w.set(0,_[1]-1,0,0),w.set(0,_[1]-1,1,0),w.set(_[0]-1,_[1]-1,0,0),w.set(_[0]-1,_[1]-1,1,0),w}}function m(l){var x=l.join(),_=o[x];if(_)return _;for(var u=l.length,M=[b,g],w=1;w<=u;++w)M.push(d(w));var p=f,_=p.apply(void 0,M);return o[x]=_,_}A.exports=function(x,u,M){if(Array.isArray(M)||(typeof M=="string"?M=e(u.dimension,M):M=e(u.dimension,"clamp")),u.size===0)return x;if(u.dimension===0)return x.set(0),x;var w=m(M);return w(x,u)}},{dup:65}],253:[function(c,A,T){function e(v,s){var o=Math.floor(s),b=s-o,g=0<=o&&o<v.shape[0],d=0<=o+1&&o+1<v.shape[0],f=g?+v.get(o):0,m=d?+v.get(o+1):0;return(1-b)*f+b*m}function a(v,s,o){var b=Math.floor(s),g=s-b,d=0<=b&&b<v.shape[0],f=0<=b+1&&b+1<v.shape[0],m=Math.floor(o),l=o-m,x=0<=m&&m<v.shape[1],u=0<=m+1&&m+1<v.shape[1],M=d&&x?v.get(b,m):0,w=d&&u?v.get(b,m+1):0,p=f&&x?v.get(b+1,m):0,_=f&&u?v.get(b+1,m+1):0;return(1-l)*((1-g)*M+g*p)+l*((1-g)*w+g*_)}function i(v,s,o,b){var g=Math.floor(s),d=s-g,f=0<=g&&g<v.shape[0],m=0<=g+1&&g+1<v.shape[0],l=Math.floor(o),x=o-l,u=0<=l&&l<v.shape[1],M=0<=l+1&&l+1<v.shape[1],w=Math.floor(b),p=b-w,_=0<=w&&w<v.shape[2],h=0<=w+1&&w+1<v.shape[2],L=f&&u&&_?v.get(g,l,w):0,E=f&&M&&_?v.get(g,l+1,w):0,S=m&&u&&_?v.get(g+1,l,w):0,P=m&&M&&_?v.get(g+1,l+1,w):0,F=f&&u&&h?v.get(g,l,w+1):0,I=f&&M&&h?v.get(g,l+1,w+1):0,D=m&&u&&h?v.get(g+1,l,w+1):0,R=m&&M&&h?v.get(g+1,l+1,w+1):0;return(1-p)*((1-x)*((1-d)*L+d*S)+x*((1-d)*E+d*P))+p*((1-x)*((1-d)*F+d*D)+x*((1-d)*I+d*R))}function n(v){var s=v.shape.length|0,o=new Array(s),b=new Array(s),g=new Array(s),d=new Array(s),f,m;for(f=0;f<s;++f)m=+arguments[f+1],o[f]=Math.floor(m),b[f]=m-o[f],g[f]=0<=o[f]&&o[f]<v.shape[f],d[f]=0<=o[f]+1&&o[f]+1<v.shape[f];var l=0,x,u,M;e:for(f=0;f<1<<s;++f){for(u=1,M=v.offset,x=0;x<s;++x)if(f&1<<x){if(!d[x])continue e;u*=b[x],M+=v.stride[x]*(o[x]+1)}else{if(!g[x])continue e;u*=1-b[x],M+=v.stride[x]*o[x]}l+=u*v.data[M]}return l}function r(v,s,o,b){switch(v.shape.length){case 0:return 0;case 1:return e(v,s);case 2:return a(v,s,o);case 3:return i(v,s,o,b);default:return n.apply(void 0,arguments)}}A.exports=r,A.exports.d1=e,A.exports.d2=a,A.exports.d3=i},{}],254:[function(c,A,T){var e={"float64,2,1,0":function(){return function(b,g,d,f,m){var l=b[0],x=b[1],u=b[2],M=d[0],w=d[1],p=d[2];f|=0;var _=0,h=0,L=0,E=p,S=w-u*p,P=M-x*w;for(L=0;L<l;++L){for(h=0;h<x;++h){for(_=0;_<u;++_)g[f]/=m,f+=E;f+=S}f+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(b,g,d,f,m,l,x,u){var M=b[0],w=b[1],p=b[2],_=d[0],h=d[1],L=d[2],E=l[0],S=l[1],P=l[2];f|=0,x|=0;for(var F=f,I=x,D=b[0]|0;D>0;){D<64?(M=D,D=0):(M=64,D-=64);for(var R=b[1]|0;R>0;){R<64?(w=R,R=0):(w=64,R-=64),f=F+D*_+R*h,x=I+D*E+R*S;var O=0,z=0,G=0,Y=L,ee=_-p*L,j=h-M*_,X=P,ae=E-p*P,he=S-M*E;for(G=0;G<w;++G){for(z=0;z<M;++z){for(O=0;O<p;++O)g[f]=m[x]*u,f+=Y,x+=X;f+=ee,x+=ae}f+=j,x+=he}}}}},"float32,1,0,float32,1,0":function(){return function(b,g,d,f,m,l,x){var u=b[0],M=b[1],w=d[0],p=d[1],_=l[0],h=l[1];f|=0,x|=0;var L=0,E=0,S=p,P=w-M*p,F=h,I=_-M*h;for(E=0;E<u;++E){for(L=0;L<M;++L)g[f]=m[x],f+=S,x+=F;f+=P,x+=I}}},"float32,1,0,float32,0,1":function(){return function(b,g,d,f,m,l,x){var u=b[0],M=b[1],w=d[0],p=d[1],_=l[0],h=l[1];f|=0,x|=0;for(var L=f,E=x,S=b[1]|0;S>0;){S<64?(M=S,S=0):(M=64,S-=64);for(var P=b[0]|0;P>0;){P<64?(u=P,P=0):(u=64,P-=64),f=L+S*p+P*w,x=E+S*h+P*_;var F=0,I=0,D=p,R=w-M*p,O=h,z=_-M*h;for(I=0;I<u;++I){for(F=0;F<M;++F)g[f]=m[x],f+=D,x+=O;f+=R,x+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(b,g,d,f,m,l,x){var u=b[0],M=b[1],w=b[2],p=d[0],_=d[1],h=d[2],L=l[0],E=l[1],S=l[2];f|=0,x|=0;for(var P=f,F=x,I=b[2]|0;I>0;){I<64?(w=I,I=0):(w=64,I-=64);for(var D=b[0]|0;D>0;){D<64?(u=D,D=0):(u=64,D-=64);for(var R=b[1]|0;R>0;){R<64?(M=R,R=0):(M=64,R-=64),f=P+I*h+D*p+R*_,x=F+I*S+D*L+R*E;var O=0,z=0,G=0,Y=h,ee=p-w*h,j=_-u*p,X=S,ae=L-w*S,he=E-u*L;for(G=0;G<M;++G){for(z=0;z<u;++z){for(O=0;O<w;++O)g[f]=m[x],f+=Y,x+=X;f+=ee,x+=ae}f+=j,x+=he}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(b,g,d,f,m,l,x){var u=b[0],M=b[1],w=b[2],p=d[0],_=d[1],h=d[2],L=l[0],E=l[1],S=l[2];f|=0,x|=0;var P=0,F=0,I=0,D=h,R=p-w*h,O=_-u*p,z=S,G=L-w*S,Y=E-u*L;for(I=0;I<M;++I){for(F=0;F<u;++F){for(P=0;P<w;++P)g[f]=m[x],f+=D,x+=z;f+=R,x+=G}f+=O,x+=Y}}}};function a(o,b){var g=b.join(","),d=e[g];return d()}var i=a,n={mul:function(o){var b={};return function(d,f,m){var l=d.dtype,x=d.order,u=f.dtype,M=f.order,w=m.dtype,p=m.order,_=[l,x.join(),u,M.join(),w,p.join()].join(),h=b[_];return h||(b[_]=h=o([l,x,u,M,w,p])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,m.data,m.stride,m.offset|0)}},muls:function(o){var b={};return function(d,f,m){var l=d.dtype,x=d.order,u=f.dtype,M=f.order,w=[l,x.join(),u,M.join()].join(),p=b[w];return p||(b[w]=p=o([l,x,u,M])),p(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,m)}},mulseq:function(o){var b={};return function(d,f){var m=d.dtype,l=d.order,x=[m,l.join()].join(),u=b[x];return u||(b[x]=u=o([m,l])),u(d.shape.slice(0),d.data,d.stride,d.offset|0,f)}},div:function(o){var b={};return function(d,f,m){var l=d.dtype,x=d.order,u=f.dtype,M=f.order,w=m.dtype,p=m.order,_=[l,x.join(),u,M.join(),w,p.join()].join(),h=b[_];return h||(b[_]=h=o([l,x,u,M,w,p])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,m.data,m.stride,m.offset|0)}},divs:function(o){var b={};return function(d,f,m){var l=d.dtype,x=d.order,u=f.dtype,M=f.order,w=[l,x.join(),u,M.join()].join(),p=b[w];return p||(b[w]=p=o([l,x,u,M])),p(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,m)}},divseq:function(o){var b={};return function(d,f){var m=d.dtype,l=d.order,x=[m,l.join()].join(),u=b[x];return u||(b[x]=u=o([m,l])),u(d.shape.slice(0),d.data,d.stride,d.offset|0,f)}},assign:function(o){var b={};return function(d,f){var m=d.dtype,l=d.order,x=f.dtype,u=f.order,M=[m,l.join(),x,u.join()].join(),w=b[M];return w||(b[M]=w=o([m,l,x,u])),w(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0)}}};function r(o){var b=n[o.funcName];return b(i.bind(void 0,o))}function v(o){return r({funcName:o.funcName})}var s={mul:"*",div:"/"};(function(){for(var o in s)T[o]=v({funcName:o}),T[o+"s"]=v({funcName:o+"s"}),T[o+"seq"]=v({funcName:o+"seq"})})(),T.assign=v({funcName:"assign"})},{}],255:[function(c,A,T){var e=c("ndarray"),a=c("./doConvert.js");A.exports=function(n,r){for(var v=[],s=n,o=1;Array.isArray(s);)v.push(s.length),o*=s.length,s=s[0];return v.length===0?e():(r||(r=e(new Float64Array(o),v)),a(r,n),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(c,A,T){function e(){return function(s,o,b,g,d){var f=s[0],m=s[1],l=s[2],x=b[0],u=b[1],M=b[2],w=[0,0,0];g|=0;var p=0,_=0,h=0,L=M,E=u-l*M,S=x-m*u;for(h=0;h<f;++h){for(_=0;_<m;++_){for(p=0;p<l;++p){{var P=d,F;for(F=0;F<w.length-1;++F)P=P[w[F]];o[g]=P[w[w.length-1]]}g+=L,++w[2]}g+=E,w[2]-=l,++w[1]}g+=S,w[1]-=m,++w[0]}}}function a(){return e()}var i=a;function n(s){var o={};return function(g,d){var f=g.dtype,m=g.order,l=[f,m.join()].join(),x=o[l];return x||(o[l]=x=s([f,m])),x(g.shape.slice(0),g.data,g.stride,g.offset|0,d)}}function r(s){return n(i.bind(void 0,s))}function v(s){return r({funcName:s.funcName})}A.exports=v({funcName:"convert"})},{}],257:[function(c,A,T){var e=c("typedarray-pool");function a(b){switch(b){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var i={"uint32,1,0":function(b,g){return function(f,m,l,x,u,M,w,p,_,h,L){var E,S,P,F=f*u+x,I,D=b(p),R,O,z,G;for(E=f+1;E<=m;++E){for(S=E,F+=u,P=F,R=0,O=F,I=0;I<p;++I)D[R++]=l[O],O+=_;e:for(;S-- >f;){R=0,O=P-u;t:for(I=0;I<p;++I){if(z=l[O],G=D[R],z<G)break e;if(z>G)break t;O+=h,R+=L}for(R=P,O=P-u,I=0;I<p;++I)l[R]=l[O],R+=_,O+=_;P-=u}for(R=P,O=0,I=0;I<p;++I)l[R]=D[O++],R+=_}g(D)}}};function n(b,g){var d=a(g),f=[g,b].join(","),m=i[f];return d?m(d[0],d[1]):m()}var r={"uint32,1,0":function(b,g,d){return function f(m,l,x,u,M,w,p,_,h,L,E){var S=(l-m+1)/6|0,P=m+S,F=l-S,I=m+l>>1,D=I-S,R=I+S,O=P,z=D,G=I,Y=R,ee=F,j=m+1,X=l-1,ae=!0,he,K,J,U,H,q,re,Z,Q,ie=0,oe=0,ne=0,le,_e,fe,ye,xe,me,be,ke,De,He,Ae,Le,Ze,We,ze,Ie,Ve=_,dt=g(Ve),Ft=g(Ve);_e=M*O,fe=M*z,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=O,O=z,z=K;break e}if(ne<0)break e;Ie+=L}_e=M*Y,fe=M*ee,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=Y,Y=ee,ee=K;break e}if(ne<0)break e;Ie+=L}_e=M*O,fe=M*G,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=O,O=G,G=K;break e}if(ne<0)break e;Ie+=L}_e=M*z,fe=M*G,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=z,z=G,G=K;break e}if(ne<0)break e;Ie+=L}_e=M*O,fe=M*Y,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=O,O=Y,Y=K;break e}if(ne<0)break e;Ie+=L}_e=M*G,fe=M*Y,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=G,G=Y,Y=K;break e}if(ne<0)break e;Ie+=L}_e=M*z,fe=M*ee,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=z,z=ee,ee=K;break e}if(ne<0)break e;Ie+=L}_e=M*z,fe=M*G,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=z,z=G,G=K;break e}if(ne<0)break e;Ie+=L}_e=M*Y,fe=M*ee,Ie=u;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ne=x[re]-x[Z],ne>0){K=Y,Y=ee,ee=K;break e}if(ne<0)break e;Ie+=L}for(_e=M*O,fe=M*z,ye=M*G,xe=M*Y,me=M*ee,be=M*P,ke=M*I,De=M*F,ze=0,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,Q=ye+Ie,He=xe+Ie,Ae=me+Ie,Le=be+Ie,Ze=ke+Ie,We=De+Ie,dt[ze]=x[Z],Ft[ze]=x[He],ae=ae&&dt[ze]===Ft[ze],J=x[re],U=x[Q],H=x[Ae],x[Le]=J,x[Ze]=U,x[We]=H,++ze,Ie+=h;for(_e=M*D,fe=M*m,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,x[re]=x[Z],Ie+=h;for(_e=M*R,fe=M*l,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,x[re]=x[Z],Ie+=h;if(ae)for(q=j;q<=X;++q){re=u+q*M,ze=0;e:for(le=0;le<_;++le){if(ne=x[re]-dt[ze],ne!==0)break e;ze+=E,re+=L}if(ne!==0)if(ne<0){if(q!==j)for(_e=M*q,fe=M*j,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;++j}else for(;;){re=u+X*M,ze=0;e:for(le=0;le<_;++le){if(ne=x[re]-dt[ze],ne!==0)break e;ze+=E,re+=L}if(ne>0)X--;else if(ne<0){for(_e=M*q,fe=M*j,ye=M*X,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,Q=ye+Ie,he=x[re],x[re]=x[Z],x[Z]=x[Q],x[Q]=he,Ie+=h;++j,--X;break}else{for(_e=M*q,fe=M*X,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;--X;break}}}else for(q=j;q<=X;++q){re=u+q*M,ze=0;e:for(le=0;le<_;++le){if(ie=x[re]-dt[ze],ie!==0)break e;ze+=E,re+=L}if(ie<0){if(q!==j)for(_e=M*q,fe=M*j,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;++j}else{re=u+q*M,ze=0;e:for(le=0;le<_;++le){if(oe=x[re]-Ft[ze],oe!==0)break e;ze+=E,re+=L}if(oe>0)for(;;){re=u+X*M,ze=0;e:for(le=0;le<_;++le){if(ne=x[re]-Ft[ze],ne!==0)break e;ze+=E,re+=L}if(ne>0){if(--X<q)break;continue}else{re=u+X*M,ze=0;e:for(le=0;le<_;++le){if(ne=x[re]-dt[ze],ne!==0)break e;ze+=E,re+=L}if(ne<0){for(_e=M*q,fe=M*j,ye=M*X,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,Q=ye+Ie,he=x[re],x[re]=x[Z],x[Z]=x[Q],x[Q]=he,Ie+=h;++j,--X}else{for(_e=M*q,fe=M*X,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;--X}break}}}}for(_e=M*m,fe=M*(j-1),ze=0,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,x[re]=x[Z],x[Z]=dt[ze],++ze,Ie+=h;for(_e=M*l,fe=M*(X+1),ze=0,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,x[re]=x[Z],x[Z]=Ft[ze],++ze,Ie+=h;if(j-2-m<=32?b(m,j-2,x,u,M,w,p,_,h,L,E):f(m,j-2,x,u,M,w,p,_,h,L,E),l-(X+2)<=32?b(X+2,l,x,u,M,w,p,_,h,L,E):f(X+2,l,x,u,M,w,p,_,h,L,E),ae){d(dt),d(Ft);return}if(j<P&&X>F){e:for(;;){for(re=u+j*M,ze=0,Ie=u,le=0;le<_;++le){if(x[re]!==dt[ze])break e;++ze,re+=h}++j}e:for(;;){for(re=u+X*M,ze=0,Ie=u,le=0;le<_;++le){if(x[re]!==Ft[ze])break e;++ze,re+=h}--X}for(q=j;q<=X;++q){re=u+q*M,ze=0;e:for(le=0;le<_;++le){if(ie=x[re]-dt[ze],ie!==0)break e;ze+=E,re+=L}if(ie===0){if(q!==j)for(_e=M*q,fe=M*j,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;++j}else{re=u+q*M,ze=0;e:for(le=0;le<_;++le){if(oe=x[re]-Ft[ze],oe!==0)break e;ze+=E,re+=L}if(oe===0)for(;;){re=u+X*M,ze=0;e:for(le=0;le<_;++le){if(ne=x[re]-Ft[ze],ne!==0)break e;ze+=E,re+=L}if(ne===0){if(--X<q)break;continue}else{re=u+X*M,ze=0;e:for(le=0;le<_;++le){if(ne=x[re]-dt[ze],ne!==0)break e;ze+=E,re+=L}if(ne<0){for(_e=M*q,fe=M*j,ye=M*X,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,Q=ye+Ie,he=x[re],x[re]=x[Z],x[Z]=x[Q],x[Q]=he,Ie+=h;++j,--X}else{for(_e=M*q,fe=M*X,Ie=u,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;--X}break}}}}}d(dt),d(Ft),X-j<=32?b(j,X,x,u,M,w,p,_,h,L,E):f(j,X,x,u,M,w,p,_,h,L,E)}}};function v(b,g,d){var f=a(g),m=[g,b].join(","),l=r[m];return b.length>1&&f?l(d,f[0],f[1]):l(d)}var s={"uint32,1,0":function(b,g){return function(d){var f=d.data,m=d.offset|0,l=d.shape,x=d.stride,u=x[0]|0,M=l[0]|0,w=x[1]|0,p=l[1]|0,_=w,h=w,L=1;M<=32?b(0,M-1,f,m,u,w,M,p,_,h,L):g(0,M-1,f,m,u,w,M,p,_,h,L)}}};function o(b,g){var d=[g,b].join(","),f=s[d],m=n(b,g),l=v(b,g,m);return f(m,l)}A.exports=o},{"typedarray-pool":308}],258:[function(c,A,T){var e=c("./lib/compile_sort.js"),a={};function i(n){var r=n.order,v=n.dtype,s=[r,v],o=s.join(":"),b=a[o];return b||(a[o]=b=e(r,v)),b(n),n}A.exports=i},{"./lib/compile_sort.js":257}],259:[function(c,A,T){var e=c("is-buffer"),a=typeof Float64Array<"u";function i(g,d){return g[0]-d[0]}function n(){var g=this.stride,d=new Array(g.length),f;for(f=0;f<d.length;++f)d[f]=[Math.abs(g[f]),f];d.sort(i);var m=new Array(d.length);for(f=0;f<m.length;++f)m[f]=d[f][1];return m}var r={T:function(g){function d(m){this.data=m}var f=d.prototype;return f.dtype=g,f.index=function(){return-1},f.size=0,f.dimension=-1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new d(this.data)},f.get=f.set=function(){},f.pick=function(){return null},function(l){return new d(l)}},0:function(g,d){function f(l,x){this.data=l,this.offset=x}var m=f.prototype;return m.dtype=g,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new f(this.data,this.offset)},m.pick=function(){return d(this.data)},m.valueOf=m.get=function(){return g==="generic"?this.data.get(this.offset):this.data[this.offset]},m.set=function(x){return g==="generic"?this.data.set(this.offset,x):this.data[this.offset]=x},function(x,u,M,w){return new f(x,w)}},1:function(g,d,f){function m(x,u,M,w){this.data=x,this.shape=[u],this.stride=[M],this.offset=w|0}var l=m.prototype;return l.dtype=g,l.dimension=1,Object.defineProperty(l,"size",{get:function(){return this.shape[0]}}),l.order=[0],l.set=function(u,M){return g==="generic"?this.data.set(this.offset+this.stride[0]*u,M):this.data[this.offset+this.stride[0]*u]=M},l.get=function(u){return g==="generic"?this.data.get(this.offset+this.stride[0]*u):this.data[this.offset+this.stride[0]*u]},l.index=function(u){return this.offset+this.stride[0]*u},l.hi=function(u){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,this.stride[0],this.offset)},l.lo=function(u){var M=this.offset,w=0,p=this.shape[0],_=this.stride[0];return typeof u=="number"&&u>=0&&(w=u|0,M+=_*w,p-=w),new m(this.data,p,_,M)},l.step=function(u){var M=this.shape[0],w=this.stride[0],p=this.offset,_=0,h=Math.ceil;return typeof u=="number"&&(_=u|0,_<0?(p+=w*(M-1),M=h(-M/_)):M=h(M/_),w*=_),new m(this.data,M,w,p)},l.transpose=function(u){u=u===void 0?0:u|0;var M=this.shape,w=this.stride;return new m(this.data,M[u],w[u],this.offset)},l.pick=function(u){var M=[],w=[],p=this.offset;typeof u=="number"&&u>=0?p=p+this.stride[0]*u|0:(M.push(this.shape[0]),w.push(this.stride[0]));var _=d[M.length+1];return _(this.data,M,w,p)},function(u,M,w,p){return new m(u,M[0],w[0],p)}},2:function(g,d,f){function m(x,u,M,w,p,_){this.data=x,this.shape=[u,M],this.stride=[w,p],this.offset=_|0}var l=m.prototype;return l.dtype=g,l.dimension=2,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(l,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),l.set=function(u,M,w){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*M,w):this.data[this.offset+this.stride[0]*u+this.stride[1]*M]=w},l.get=function(u,M){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*M):this.data[this.offset+this.stride[0]*u+this.stride[1]*M]},l.index=function(u,M){return this.offset+this.stride[0]*u+this.stride[1]*M},l.hi=function(u,M){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},l.lo=function(u,M){var w=this.offset,p=0,_=this.shape[0],h=this.shape[1],L=this.stride[0],E=this.stride[1];return typeof u=="number"&&u>=0&&(p=u|0,w+=L*p,_-=p),typeof M=="number"&&M>=0&&(p=M|0,w+=E*p,h-=p),new m(this.data,_,h,L,E,w)},l.step=function(u,M){var w=this.shape[0],p=this.shape[1],_=this.stride[0],h=this.stride[1],L=this.offset,E=0,S=Math.ceil;return typeof u=="number"&&(E=u|0,E<0?(L+=_*(w-1),w=S(-w/E)):w=S(w/E),_*=E),typeof M=="number"&&(E=M|0,E<0?(L+=h*(p-1),p=S(-p/E)):p=S(p/E),h*=E),new m(this.data,w,p,_,h,L)},l.transpose=function(u,M){u=u===void 0?0:u|0,M=M===void 0?1:M|0;var w=this.shape,p=this.stride;return new m(this.data,w[u],w[M],p[u],p[M],this.offset)},l.pick=function(u,M){var w=[],p=[],_=this.offset;typeof u=="number"&&u>=0?_=_+this.stride[0]*u|0:(w.push(this.shape[0]),p.push(this.stride[0])),typeof M=="number"&&M>=0?_=_+this.stride[1]*M|0:(w.push(this.shape[1]),p.push(this.stride[1]));var h=d[w.length+1];return h(this.data,w,p,_)},function(u,M,w,p){return new m(u,M[0],M[1],w[0],w[1],p)}},3:function(g,d,f){function m(x,u,M,w,p,_,h,L){this.data=x,this.shape=[u,M,w],this.stride=[p,_,h],this.offset=L|0}var l=m.prototype;return l.dtype=g,l.dimension=3,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(l,"order",{get:function(){var u=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return u>M?M>w?[2,1,0]:u>w?[1,2,0]:[1,0,2]:u>w?[2,0,1]:w>M?[0,1,2]:[0,2,1]}}),l.set=function(u,M,w,p){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w,p):this.data[this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w]=p},l.get=function(u,M,w){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w):this.data[this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w]},l.index=function(u,M,w){return this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w},l.hi=function(u,M,w){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},l.lo=function(u,M,w){var p=this.offset,_=0,h=this.shape[0],L=this.shape[1],E=this.shape[2],S=this.stride[0],P=this.stride[1],F=this.stride[2];return typeof u=="number"&&u>=0&&(_=u|0,p+=S*_,h-=_),typeof M=="number"&&M>=0&&(_=M|0,p+=P*_,L-=_),typeof w=="number"&&w>=0&&(_=w|0,p+=F*_,E-=_),new m(this.data,h,L,E,S,P,F,p)},l.step=function(u,M,w){var p=this.shape[0],_=this.shape[1],h=this.shape[2],L=this.stride[0],E=this.stride[1],S=this.stride[2],P=this.offset,F=0,I=Math.ceil;return typeof u=="number"&&(F=u|0,F<0?(P+=L*(p-1),p=I(-p/F)):p=I(p/F),L*=F),typeof M=="number"&&(F=M|0,F<0?(P+=E*(_-1),_=I(-_/F)):_=I(_/F),E*=F),typeof w=="number"&&(F=w|0,F<0?(P+=S*(h-1),h=I(-h/F)):h=I(h/F),S*=F),new m(this.data,p,_,h,L,E,S,P)},l.transpose=function(u,M,w){u=u===void 0?0:u|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0;var p=this.shape,_=this.stride;return new m(this.data,p[u],p[M],p[w],_[u],_[M],_[w],this.offset)},l.pick=function(u,M,w){var p=[],_=[],h=this.offset;typeof u=="number"&&u>=0?h=h+this.stride[0]*u|0:(p.push(this.shape[0]),_.push(this.stride[0])),typeof M=="number"&&M>=0?h=h+this.stride[1]*M|0:(p.push(this.shape[1]),_.push(this.stride[1])),typeof w=="number"&&w>=0?h=h+this.stride[2]*w|0:(p.push(this.shape[2]),_.push(this.stride[2]));var L=d[p.length+1];return L(this.data,p,_,h)},function(u,M,w,p){return new m(u,M[0],M[1],M[2],w[0],w[1],w[2],p)}},4:function(g,d,f){function m(x,u,M,w,p,_,h,L,E,S){this.data=x,this.shape=[u,M,w,p],this.stride=[_,h,L,E],this.offset=S|0}var l=m.prototype;return l.dtype=g,l.dimension=4,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(l,"order",{get:f}),l.set=function(u,M,w,p,_){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p,_):this.data[this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p]=_},l.get=function(u,M,w,p){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p):this.data[this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p]},l.index=function(u,M,w,p){return this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p},l.hi=function(u,M,w,p){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,typeof p!="number"||p<0?this.shape[3]:p|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},l.lo=function(u,M,w,p){var _=this.offset,h=0,L=this.shape[0],E=this.shape[1],S=this.shape[2],P=this.shape[3],F=this.stride[0],I=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof u=="number"&&u>=0&&(h=u|0,_+=F*h,L-=h),typeof M=="number"&&M>=0&&(h=M|0,_+=I*h,E-=h),typeof w=="number"&&w>=0&&(h=w|0,_+=D*h,S-=h),typeof p=="number"&&p>=0&&(h=p|0,_+=R*h,P-=h),new m(this.data,L,E,S,P,F,I,D,R,_)},l.step=function(u,M,w,p){var _=this.shape[0],h=this.shape[1],L=this.shape[2],E=this.shape[3],S=this.stride[0],P=this.stride[1],F=this.stride[2],I=this.stride[3],D=this.offset,R=0,O=Math.ceil;return typeof u=="number"&&(R=u|0,R<0?(D+=S*(_-1),_=O(-_/R)):_=O(_/R),S*=R),typeof M=="number"&&(R=M|0,R<0?(D+=P*(h-1),h=O(-h/R)):h=O(h/R),P*=R),typeof w=="number"&&(R=w|0,R<0?(D+=F*(L-1),L=O(-L/R)):L=O(L/R),F*=R),typeof p=="number"&&(R=p|0,R<0?(D+=I*(E-1),E=O(-E/R)):E=O(E/R),I*=R),new m(this.data,_,h,L,E,S,P,F,I,D)},l.transpose=function(u,M,w,p){u=u===void 0?0:u|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0,p=p===void 0?3:p|0;var _=this.shape,h=this.stride;return new m(this.data,_[u],_[M],_[w],_[p],h[u],h[M],h[w],h[p],this.offset)},l.pick=function(u,M,w,p){var _=[],h=[],L=this.offset;typeof u=="number"&&u>=0?L=L+this.stride[0]*u|0:(_.push(this.shape[0]),h.push(this.stride[0])),typeof M=="number"&&M>=0?L=L+this.stride[1]*M|0:(_.push(this.shape[1]),h.push(this.stride[1])),typeof w=="number"&&w>=0?L=L+this.stride[2]*w|0:(_.push(this.shape[2]),h.push(this.stride[2])),typeof p=="number"&&p>=0?L=L+this.stride[3]*p|0:(_.push(this.shape[3]),h.push(this.stride[3]));var E=d[_.length+1];return E(this.data,_,h,L)},function(u,M,w,p){return new m(u,M[0],M[1],M[2],M[3],w[0],w[1],w[2],w[3],p)}},5:function(d,f,m){function l(u,M,w,p,_,h,L,E,S,P,F,I){this.data=u,this.shape=[M,w,p,_,h],this.stride=[L,E,S,P,F],this.offset=I|0}var x=l.prototype;return x.dtype=d,x.dimension=5,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(x,"order",{get:m}),x.set=function(M,w,p,_,h,L){return d==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h,L):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h]=L},x.get=function(M,w,p,_,h){return d==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h]},x.index=function(M,w,p,_,h){return this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h},x.hi=function(M,w,p,_,h){return new l(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof w!="number"||w<0?this.shape[1]:w|0,typeof p!="number"||p<0?this.shape[2]:p|0,typeof _!="number"||_<0?this.shape[3]:_|0,typeof h!="number"||h<0?this.shape[4]:h|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},x.lo=function(M,w,p,_,h){var L=this.offset,E=0,S=this.shape[0],P=this.shape[1],F=this.shape[2],I=this.shape[3],D=this.shape[4],R=this.stride[0],O=this.stride[1],z=this.stride[2],G=this.stride[3],Y=this.stride[4];return typeof M=="number"&&M>=0&&(E=M|0,L+=R*E,S-=E),typeof w=="number"&&w>=0&&(E=w|0,L+=O*E,P-=E),typeof p=="number"&&p>=0&&(E=p|0,L+=z*E,F-=E),typeof _=="number"&&_>=0&&(E=_|0,L+=G*E,I-=E),typeof h=="number"&&h>=0&&(E=h|0,L+=Y*E,D-=E),new l(this.data,S,P,F,I,D,R,O,z,G,Y,L)},x.step=function(M,w,p,_,h){var L=this.shape[0],E=this.shape[1],S=this.shape[2],P=this.shape[3],F=this.shape[4],I=this.stride[0],D=this.stride[1],R=this.stride[2],O=this.stride[3],z=this.stride[4],G=this.offset,Y=0,ee=Math.ceil;return typeof M=="number"&&(Y=M|0,Y<0?(G+=I*(L-1),L=ee(-L/Y)):L=ee(L/Y),I*=Y),typeof w=="number"&&(Y=w|0,Y<0?(G+=D*(E-1),E=ee(-E/Y)):E=ee(E/Y),D*=Y),typeof p=="number"&&(Y=p|0,Y<0?(G+=R*(S-1),S=ee(-S/Y)):S=ee(S/Y),R*=Y),typeof _=="number"&&(Y=_|0,Y<0?(G+=O*(P-1),P=ee(-P/Y)):P=ee(P/Y),O*=Y),typeof h=="number"&&(Y=h|0,Y<0?(G+=z*(F-1),F=ee(-F/Y)):F=ee(F/Y),z*=Y),new l(this.data,L,E,S,P,F,I,D,R,O,z,G)},x.transpose=function(M,w,p,_,h){M=M===void 0?0:M|0,w=w===void 0?1:w|0,p=p===void 0?2:p|0,_=_===void 0?3:_|0,h=h===void 0?4:h|0;var L=this.shape,E=this.stride;return new l(this.data,L[M],L[w],L[p],L[_],L[h],E[M],E[w],E[p],E[_],E[h],this.offset)},x.pick=function(M,w,p,_,h){var L=[],E=[],S=this.offset;typeof M=="number"&&M>=0?S=S+this.stride[0]*M|0:(L.push(this.shape[0]),E.push(this.stride[0])),typeof w=="number"&&w>=0?S=S+this.stride[1]*w|0:(L.push(this.shape[1]),E.push(this.stride[1])),typeof p=="number"&&p>=0?S=S+this.stride[2]*p|0:(L.push(this.shape[2]),E.push(this.stride[2])),typeof _=="number"&&_>=0?S=S+this.stride[3]*_|0:(L.push(this.shape[3]),E.push(this.stride[3])),typeof h=="number"&&h>=0?S=S+this.stride[4]*h|0:(L.push(this.shape[4]),E.push(this.stride[4]));var P=f[L.length+1];return P(this.data,L,E,S)},function(M,w,p,_){return new l(M,w[0],w[1],w[2],w[3],w[4],p[0],p[1],p[2],p[3],p[4],_)}}};function v(g,d){var f=d===-1?"T":String(d),m=r[f];return d===-1?m(g):d===0?m(g,o[g][0]):m(g,o[g],n)}function s(g){if(e(g))return"buffer";if(a)switch(Object.prototype.toString.call(g)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(g)?"array":"generic"}var o={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function b(g,d,f,m){if(g===void 0){var p=o.array[0];return p([])}else typeof g=="number"&&(g=[g]);d===void 0&&(d=[g.length]);var l=d.length;if(f===void 0){f=new Array(l);for(var x=l-1,u=1;x>=0;--x)f[x]=u,u*=d[x]}if(m===void 0){m=0;for(var x=0;x<l;++x)f[x]<0&&(m-=(d[x]-1)*f[x])}for(var M=s(g),w=o[M];w.length<=l+1;)w.push(v(M,w.length-1));var p=w[l+1];return p(g,d,f,m)}A.exports=b},{"is-buffer":237}],260:[function(c,A,T){var e=c("double-bits"),a=Math.pow(2,-1074),i=-1>>>0;A.exports=n;function n(r,v){if(isNaN(r)||isNaN(v))return NaN;if(r===v)return r;if(r===0)return v<0?-a:a;var s=e.hi(r),o=e.lo(r);return v>r==r>0?o===i?(s+=1,o=0):o+=1:o===0?(o=i,s-=1):o-=1,e.pack(o,s)}},{"double-bits":64}],261:[function(c,A,T){var e=1e-6,a=1e-6;T.vertexNormals=function(i,n,r){for(var v=n.length,s=new Array(v),o=r===void 0?e:r,b=0;b<v;++b)s[b]=[0,0,0];for(var b=0;b<i.length;++b)for(var g=i[b],d=0,f=g[g.length-1],m=g[0],l=0;l<g.length;++l){d=f,f=m,m=g[(l+1)%g.length];for(var x=n[d],u=n[f],M=n[m],w=new Array(3),p=0,_=new Array(3),h=0,L=0;L<3;++L)w[L]=x[L]-u[L],p+=w[L]*w[L],_[L]=M[L]-u[L],h+=_[L]*_[L];if(p*h>o)for(var E=s[f],S=1/Math.sqrt(p*h),L=0;L<3;++L){var P=(L+1)%3,F=(L+2)%3;E[L]+=S*(_[P]*w[F]-_[F]*w[P])}}for(var b=0;b<v;++b){for(var E=s[b],I=0,L=0;L<3;++L)I+=E[L]*E[L];if(I>o)for(var S=1/Math.sqrt(I),L=0;L<3;++L)E[L]*=S;else for(var L=0;L<3;++L)E[L]=0}return s},T.faceNormals=function(i,n,r){for(var v=i.length,s=new Array(v),o=r===void 0?a:r,b=0;b<v;++b){for(var g=i[b],d=new Array(3),f=0;f<3;++f)d[f]=n[g[f]];for(var m=new Array(3),l=new Array(3),f=0;f<3;++f)m[f]=d[1][f]-d[0][f],l[f]=d[2][f]-d[0][f];for(var x=new Array(3),u=0,f=0;f<3;++f){var M=(f+1)%3,w=(f+2)%3;x[f]=m[M]*l[w]-m[w]*l[M],u+=x[f]*x[f]}u>o?u=1/Math.sqrt(u):u=0;for(var f=0;f<3;++f)x[f]*=u;s[b]=x}return s}},{}],262:[function(c,A,T){A.exports=e;function e(a,i,n,r,v,s,o,b,g,d){var f=i+s+d;if(m>0){var m=Math.sqrt(f+1);a[0]=.5*(o-g)/m,a[1]=.5*(b-r)/m,a[2]=.5*(n-s)/m,a[3]=.5*m}else{var l=Math.max(i,s,d),m=Math.sqrt(2*l-f+1);i>=l?(a[0]=.5*m,a[1]=.5*(v+n)/m,a[2]=.5*(b+r)/m,a[3]=.5*(o-g)/m):s>=l?(a[0]=.5*(n+v)/m,a[1]=.5*m,a[2]=.5*(g+o)/m,a[3]=.5*(b-r)/m):(a[0]=.5*(r+b)/m,a[1]=.5*(o+g)/m,a[2]=.5*m,a[3]=.5*(n-v)/m)}return a}},{}],263:[function(c,A,T){A.exports=d;var e=c("filtered-vector"),a=c("gl-mat4/lookAt"),i=c("gl-mat4/fromQuat"),n=c("gl-mat4/invert"),r=c("./lib/quatFromFrame");function v(f,m,l){return Math.sqrt(Math.pow(f,2)+Math.pow(m,2)+Math.pow(l,2))}function s(f,m,l,x){return Math.sqrt(Math.pow(f,2)+Math.pow(m,2)+Math.pow(l,2)+Math.pow(x,2))}function o(f,m){var l=m[0],x=m[1],u=m[2],M=m[3],w=s(l,x,u,M);w>1e-6?(f[0]=l/w,f[1]=x/w,f[2]=u/w,f[3]=M/w):(f[0]=f[1]=f[2]=0,f[3]=1)}function b(f,m,l){this.radius=e([l]),this.center=e(m),this.rotation=e(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=b.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var m=this.computedRotation;o(m,m);var l=this.computedMatrix;i(l,m);var x=this.computedCenter,u=this.computedEye,M=this.computedUp,w=Math.exp(this.computedRadius[0]);u[0]=x[0]+w*l[2],u[1]=x[1]+w*l[6],u[2]=x[2]+w*l[10],M[0]=l[1],M[1]=l[5],M[2]=l[9];for(var p=0;p<3;++p){for(var _=0,h=0;h<3;++h)_+=l[p+4*h]*u[h];l[12+p]=-_}},g.getMatrix=function(f,m){this.recalcMatrix(f);var l=this.computedMatrix;if(m){for(var x=0;x<16;++x)m[x]=l[x];return m}return l},g.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},g.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},g.pan=function(f,m,l,x){m=m||0,l=l||0,x=x||0,this.recalcMatrix(f);var u=this.computedMatrix,M=u[1],w=u[5],p=u[9],_=v(M,w,p);M/=_,w/=_,p/=_;var h=u[0],L=u[4],E=u[8],S=h*M+L*w+E*p;h-=M*S,L-=w*S,E-=p*S;var P=v(h,L,E);h/=P,L/=P,E/=P,u[2],u[6],u[10];var F=h*m+M*l,I=L*m+w*l,D=E*m+p*l;this.center.move(f,F,I,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+x),this.radius.set(f,Math.log(R))},g.rotate=function(f,m,l,x){this.recalcMatrix(f),m=m||0,l=l||0;var u=this.computedMatrix,M=u[0],w=u[4],p=u[8],_=u[1],h=u[5],L=u[9],E=u[2],S=u[6],P=u[10],F=m*M+l*_,I=m*w+l*h,D=m*p+l*L,R=-(S*D-P*I),O=-(P*F-E*D),z=-(E*I-S*F),G=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(O,2)-Math.pow(z,2))),Y=s(R,O,z,G);Y>1e-6?(R/=Y,O/=Y,z/=Y,G/=Y):(R=O=z=0,G=1);var ee=this.computedRotation,j=ee[0],X=ee[1],ae=ee[2],he=ee[3],K=j*G+he*R+X*z-ae*O,J=X*G+he*O+ae*R-j*z,U=ae*G+he*z+j*O-X*R,H=he*G-j*R-X*O-ae*z;if(x){R=E,O=S,z=P;var q=Math.sin(x)/v(R,O,z);R*=q,O*=q,z*=q,G=Math.cos(m),K=K*G+H*R+J*z-U*O,J=J*G+H*O+U*R-K*z,U=U*G+H*z+K*O-J*R,H=H*G-K*R-J*O-U*z}var re=s(K,J,U,H);re>1e-6?(K/=re,J/=re,U/=re,H/=re):(K=J=U=0,H=1),this.rotation.set(f,K,J,U,H)},g.lookAt=function(f,m,l,x){this.recalcMatrix(f),l=l||this.computedCenter,m=m||this.computedEye,x=x||this.computedUp;var u=this.computedMatrix;a(u,m,l,x);var M=this.computedRotation;r(M,u[0],u[1],u[2],u[4],u[5],u[6],u[8],u[9],u[10]),o(M,M),this.rotation.set(f,M[0],M[1],M[2],M[3]);for(var w=0,p=0;p<3;++p)w+=Math.pow(l[p]-m[p],2);this.radius.set(f,.5*Math.log(Math.max(w,1e-6))),this.center.set(f,l[0],l[1],l[2])},g.translate=function(f,m,l,x){this.center.move(f,m||0,l||0,x||0)},g.setMatrix=function(f,m){var l=this.computedRotation;r(l,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),o(l,l),this.rotation.set(f,l[0],l[1],l[2],l[3]);var x=this.computedMatrix;n(x,m);var u=x[15];if(Math.abs(u)>1e-6){var M=x[12]/u,w=x[13]/u,p=x[14]/u;this.recalcMatrix(f);var _=Math.exp(this.computedRadius[0]);this.center.set(f,M-x[2]*_,w-x[6]*_,p-x[10]*_),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},g.setDistance=function(f,m){m>0&&this.radius.set(f,Math.log(m))},g.setDistanceLimits=function(f,m){f>0?f=Math.log(f):f=-1/0,m>0?m=Math.log(m):m=1/0,m=Math.max(m,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(f){var m=this.radius.bounds;return f?(f[0]=Math.exp(m[0][0]),f[1]=Math.exp(m[1][0]),f):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(f){var m=this.lastT(),l=f.center;l&&this.center.set(m,l[0],l[1],l[2]);var x=f.rotation;x&&this.rotation.set(m,x[0],x[1],x[2],x[3]);var u=f.distance;u&&u>0&&this.radius.set(m,Math.log(u)),this.setDistanceLimits(f.zoomMin,f.zoomMax)};function d(f){f=f||{};var m=f.center||[0,0,0],l=f.rotation||[0,0,0,1],x=f.radius||1;m=[].slice.call(m,0,3),l=[].slice.call(l,0,4),o(l,l);var u=new b(l,m,Math.log(x));return u.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&u.lookAt(0,f.eye,f.center,f.up),u}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(c,A,T){var e=c("repeat-string");A.exports=function(i,n,r){return r=typeof r<"u"?r+"":" ",e(r,n)+i}},{"repeat-string":277}],265:[function(c,A,T){A.exports=function(a,i){i||(i=[0,""]),a=String(a);var n=parseFloat(a,10);return i[0]=n,i[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},{}],266:[function(c,A,T){A.exports=a;var e=c("compare-angle");function a(i,n){for(var r=n.length|0,v=i.length,s=[new Array(r),new Array(r)],o=0;o<r;++o)s[0][o]=[],s[1][o]=[];for(var o=0;o<v;++o){var b=i[o];s[0][b[0]].push(b),s[1][b[1]].push(b)}for(var g=[],o=0;o<r;++o)s[0][o].length+s[1][o].length===0&&g.push([o]);function d(w,p){var _=s[p][w[p]];_.splice(_.indexOf(w),1)}function f(w,p,_){for(var h,L,E,S=0;S<2;++S)if(s[S][p].length>0){h=s[S][p][0],E=S;break}L=h[E^1];for(var P=0;P<2;++P)for(var F=s[P][p],I=0;I<F.length;++I){var D=F[I],R=D[P^1],O=e(n[w],n[p],n[L],n[R]);O>0&&(h=D,L=R,E=P)}return _||h&&d(h,E),L}function m(w,p){var _=s[p][w][0],h=[w];d(_,p);for(var L=_[p^1];;){for(;L!==w;)h.push(L),L=f(h[h.length-2],L,!1);if(s[0][w].length+s[1][w].length===0)break;var E=h[h.length-1],S=w,P=h[1],F=f(E,S,!0);if(e(n[E],n[S],n[P],n[F])<0)break;h.push(w),L=f(E,S)}return h}function l(w,p){return p[1]===p[p.length-1]}for(var o=0;o<r;++o)for(var x=0;x<2;++x){for(var u=[];s[x][o].length>0;){s[0][o].length;var M=m(o,x);l(u,M)?u.push.apply(u,M):(u.length>0&&g.push(u),u=M)}u.length>0&&g.push(u)}return g}},{"compare-angle":54}],267:[function(c,A,T){A.exports=a;var e=c("edges-to-adjacency-list");function a(i,n){for(var r=e(i,n.length),v=new Array(n.length),s=new Array(n.length),o=[],b=0;b<n.length;++b){var g=r[b].length;s[b]=g,v[b]=!0,g<=1&&o.push(b)}for(;o.length>0;){var d=o.pop();v[d]=!1;for(var f=r[d],b=0;b<f.length;++b){var m=f[b];--s[m]===0&&o.push(m)}}for(var l=new Array(n.length),x=[],b=0;b<n.length;++b)if(v[b]){var d=x.length;l[b]=d,x.push(n[b])}else l[b]=-1;for(var u=[],b=0;b<i.length;++b){var M=i[b];v[M[0]]&&v[M[1]]&&u.push([l[M[0]],l[M[1]]])}return[u,x]}},{"edges-to-adjacency-list":66}],268:[function(c,A,T){A.exports=g;var e=c("edges-to-adjacency-list"),a=c("planar-dual"),i=c("point-in-big-polygon"),n=c("two-product"),r=c("robust-sum"),v=c("uniq"),s=c("./lib/trim-leaves");function o(d,f){for(var m=new Array(d),l=0;l<d;++l)m[l]=f;return m}function b(d){for(var f=new Array(d),m=0;m<d;++m)f[m]=[];return f}function g(d,f){var H=s(d,f);d=H[0],f=H[1];var m=f.length;d.length;for(var l=e(d,f.length),x=0;x<m;++x)if(l[x].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var u=a(d,f);function M(ne){for(var le=ne.length,_e=[0],fe=0;fe<le;++fe){var ye=f[ne[fe]],xe=f[ne[(fe+1)%le]],me=n(-ye[0],ye[1]),be=n(-ye[0],xe[1]),ke=n(xe[0],ye[1]),De=n(xe[0],xe[1]);_e=r(_e,r(r(me,be),r(ke,De)))}return _e[_e.length-1]>0}u=u.filter(M);for(var w=u.length,p=new Array(w),_=new Array(w),x=0;x<w;++x){p[x]=x;var h=new Array(w),L=u[x].map(function(le){return f[le]}),E=i([L]),S=0;e:for(var P=0;P<w;++P)if(h[P]=0,x!==P){for(var F=u[P],I=F.length,D=0;D<I;++D){var R=E(f[F[D]]);if(R!==0){R<0&&(h[P]=1,S+=1);continue e}}h[P]=1,S+=1}_[x]=[S,x,h]}_.sort(function(ne,le){return le[0]-ne[0]});for(var x=0;x<w;++x)for(var h=_[x],O=h[1],z=h[2],P=0;P<w;++P)z[P]&&(p[P]=O);for(var G=b(w),x=0;x<w;++x)G[x].push(p[x]),G[p[x]].push(x);for(var Y={},ee=o(m,!1),x=0;x<w;++x)for(var F=u[x],I=F.length,P=0;P<I;++P){var j=F[P],X=F[(P+1)%I],ae=Math.min(j,X)+":"+Math.max(j,X);if(ae in Y){var he=Y[ae];G[he].push(x),G[x].push(he),ee[j]=ee[X]=!0}else Y[ae]=x}function K(ne){for(var le=ne.length,_e=0;_e<le;++_e)if(!ee[ne[_e]])return!1;return!0}for(var J=[],U=o(w,-1),x=0;x<w;++x)p[x]===x&&!K(u[x])?(J.push(x),U[x]=0):U[x]=-1;for(var H=[];J.length>0;){var q=J.pop(),re=G[q];v(re,function(ne,le){return ne-le});var Z=re.length,Q=U[q],ie;if(Q===0){var F=u[q];ie=[F]}for(var x=0;x<Z;++x){var oe=re[x];if(!(U[oe]>=0)&&(U[oe]=Q^1,J.push(oe),Q===0)){var F=u[oe];K(F)||(F.reverse(),ie.push(F))}}Q===0&&H.push(ie)}return H}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(c,A,T){A.exports=f;var e=c("robust-orientation")[3],a=c("slab-decomposition"),i=c("interval-tree-1d"),n=c("binary-search-bounds");function r(){return!0}function v(m){return function(l,x){var u=m[l];return u?!!u.queryPoint(x,r):!1}}function s(m){for(var l={},x=0;x<m.length;++x){var u=m[x],M=u[0][0],w=u[0][1],p=u[1][1],_=[Math.min(w,p),Math.max(w,p)];M in l?l[M].push(_):l[M]=[_]}for(var h={},L=Object.keys(l),x=0;x<L.length;++x){var E=l[L[x]];h[L[x]]=i(E)}return v(h)}function o(m,l){return function(x){var u=n.le(l,x[0]);if(u<0)return 1;var M=m[u];if(!M)if(u>0&&l[u]===x[0])M=m[u-1];else return 1;for(var w=1;M;){var p=M.key,_=e(x,p[0],p[1]);if(p[0][0]<p[1][0])if(_<0)M=M.left;else if(_>0)w=-1,M=M.right;else return 0;else if(_>0)M=M.left;else if(_<0)w=1,M=M.right;else return 0}return w}}function b(m){return 1}function g(m){return function(x){return m(x[0],x[1])?0:1}}function d(m,l){return function(u){return m(u[0],u[1])?0:l(u)}}function f(m){for(var l=m.length,x=[],u=[],M=0;M<l;++M)for(var w=m[M],p=w.length,_=p-1,h=0;h<p;_=h++){var L=w[_],E=w[h];L[0]===E[0]?u.push([L,E]):x.push([L,E])}if(x.length===0)return u.length===0?b:g(s(u));var S=a(x),P=o(S.slabs,S.coordinates);return u.length===0?P:d(s(u),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(c,A,T){var e=new Float64Array(4),a=new Float64Array(4),i=new Float64Array(4);function n(r,v,s,o,b){e.length<o.length&&(e=new Float64Array(o.length),a=new Float64Array(o.length),i=new Float64Array(o.length));for(var g=0;g<o.length;++g)e[g]=r[g]-o[g],a[g]=v[g]-r[g],i[g]=s[g]-r[g];for(var d=0,f=0,m=0,l=0,x=0,u=0,g=0;g<o.length;++g){var M=a[g],w=i[g],p=e[g];d+=M*M,f+=M*w,m+=w*w,l+=p*M,x+=p*w,u+=p*p}var _=Math.abs(d*m-f*f),h=f*x-m*l,L=f*l-d*x,E;if(h+L<=_)if(h<0)L<0&&l<0?(L=0,-l>=d?(h=1,E=d+2*l+u):(h=-l/d,E=l*h+u)):(h=0,x>=0?(L=0,E=u):-x>=m?(L=1,E=m+2*x+u):(L=-x/m,E=x*L+u));else if(L<0)L=0,l>=0?(h=0,E=u):-l>=d?(h=1,E=d+2*l+u):(h=-l/d,E=l*h+u);else{var S=1/_;h*=S,L*=S,E=h*(d*h+f*L+2*l)+L*(f*h+m*L+2*x)+u}else{var P,F,I,D;h<0?(P=f+l,F=m+x,F>P?(I=F-P,D=d-2*f+m,I>=D?(h=1,L=0,E=d+2*l+u):(h=I/D,L=1-h,E=h*(d*h+f*L+2*l)+L*(f*h+m*L+2*x)+u)):(h=0,F<=0?(L=1,E=m+2*x+u):x>=0?(L=0,E=u):(L=-x/m,E=x*L+u))):L<0?(P=f+x,F=d+l,F>P?(I=F-P,D=d-2*f+m,I>=D?(L=1,h=0,E=m+2*x+u):(L=I/D,h=1-L,E=h*(d*h+f*L+2*l)+L*(f*h+m*L+2*x)+u)):(L=0,F<=0?(h=1,E=d+2*l+u):l>=0?(h=0,E=u):(h=-l/d,E=l*h+u))):(I=m+x-f-l,I<=0?(h=0,L=1,E=m+2*x+u):(D=d-2*f+m,I>=D?(h=1,L=0,E=d+2*l+u):(h=I/D,L=1-h,E=h*(d*h+f*L+2*l)+L*(f*h+m*L+2*x)+u)))}for(var R=1-h-L,g=0;g<o.length;++g)b[g]=R*r[g]+h*v[g]+L*s[g];return E<0?0:E}A.exports=n},{}],271:[function(c,A,T){A.exports=c("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(c,A,T){var e=c("big-rat/add");A.exports=a;function a(i,n){for(var r=i.length,v=new Array(r),s=0;s<r;++s)v[s]=e(i[s],n[s]);return v}},{"big-rat/add":15}],273:[function(c,A,T){A.exports=a;var e=c("big-rat");function a(i){for(var n=new Array(i.length),r=0;r<i.length;++r)n[r]=e(i[r]);return n}},{"big-rat":18}],274:[function(c,A,T){var e=c("big-rat"),a=c("big-rat/mul");A.exports=i;function i(n,r){for(var v=e(r),s=n.length,o=new Array(s),b=0;b<s;++b)o[b]=a(n[b],v);return o}},{"big-rat":18,"big-rat/mul":27}],275:[function(c,A,T){var e=c("big-rat/sub");A.exports=a;function a(i,n){for(var r=i.length,v=new Array(r),s=0;s<r;++s)v[s]=e(i[s],n[s]);return v}},{"big-rat/sub":29}],276:[function(c,A,T){var e=c("compare-cell"),a=c("compare-oriented-cell"),i=c("cell-orientation");A.exports=n;function n(r){r.sort(a);for(var v=r.length,s=0,o=0;o<v;++o){var b=r[o],g=i(b);if(g!==0){if(s>0){var d=r[s-1];if(e(b,d)===0&&i(d)!==g){s-=1;continue}}r[s++]=b}}return r.length=s,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(c,A,T){var e="",a;A.exports=i;function i(n,r){if(typeof n!="string")throw new TypeError("expected a string");if(r===1)return n;if(r===2)return n+n;var v=n.length*r;if(a!==n||typeof a>"u")a=n,e="";else if(e.length>=v)return e.substr(0,v);for(;v>e.length&&r>1;)r&1&&(e+=n),r>>=1,n+=n;return e+=n,e=e.substr(0,v),e}},{}],278:[function(c,A,T){(function(e){(function(){A.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof y<"u"?y:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(c,A,T){A.exports=e;function e(a){for(var i=a.length,n=a[a.length-1],r=i,v=i-2;v>=0;--v){var s=n,o=a[v];n=s+o;var b=n-s,g=o-b;g&&(a[--r]=n,n=g)}for(var d=0,v=r;v<i;++v){var s=a[v],o=n;n=s+o;var b=n-s,g=o-b;g&&(a[d++]=g)}return a[d++]=n,a.length=d,a}},{}],280:[function(c,A,T){var e=c("two-product"),a=c("robust-sum"),i=c("robust-scale"),n=c("robust-compress"),r=6;function v(l,x,u,M){return function(p){return M(l(u(p[0][0],p[1][1]),u(-p[0][1],p[1][0])))}}function s(l,x,u,M){return function(p){return M(l(x(l(u(p[1][1],p[2][2]),u(-p[1][2],p[2][1])),p[0][0]),l(x(l(u(p[1][0],p[2][2]),u(-p[1][2],p[2][0])),-p[0][1]),x(l(u(p[1][0],p[2][1]),u(-p[1][1],p[2][0])),p[0][2]))))}}function o(l,x,u,M){return function(p){return M(l(l(x(l(x(l(u(p[2][2],p[3][3]),u(-p[2][3],p[3][2])),p[1][1]),l(x(l(u(p[2][1],p[3][3]),u(-p[2][3],p[3][1])),-p[1][2]),x(l(u(p[2][1],p[3][2]),u(-p[2][2],p[3][1])),p[1][3]))),p[0][0]),x(l(x(l(u(p[2][2],p[3][3]),u(-p[2][3],p[3][2])),p[1][0]),l(x(l(u(p[2][0],p[3][3]),u(-p[2][3],p[3][0])),-p[1][2]),x(l(u(p[2][0],p[3][2]),u(-p[2][2],p[3][0])),p[1][3]))),-p[0][1])),l(x(l(x(l(u(p[2][1],p[3][3]),u(-p[2][3],p[3][1])),p[1][0]),l(x(l(u(p[2][0],p[3][3]),u(-p[2][3],p[3][0])),-p[1][1]),x(l(u(p[2][0],p[3][1]),u(-p[2][1],p[3][0])),p[1][3]))),p[0][2]),x(l(x(l(u(p[2][1],p[3][2]),u(-p[2][2],p[3][1])),p[1][0]),l(x(l(u(p[2][0],p[3][2]),u(-p[2][2],p[3][0])),-p[1][1]),x(l(u(p[2][0],p[3][1]),u(-p[2][1],p[3][0])),p[1][2]))),-p[0][3]))))}}function b(l,x,u,M){return function(p){return M(l(l(x(l(l(x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][2]),l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),-p[2][3]),x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][4]))),p[1][1]),x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][1]),l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][3]),x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][4]))),-p[1][2])),l(x(l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][1]),l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][2]),x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][4]))),p[1][3]),x(l(x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][1]),l(x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),-p[2][2]),x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][3]))),-p[1][4]))),p[0][0]),x(l(l(x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][2]),l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),-p[2][3]),x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][4]))),p[1][0]),x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][3]),x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),p[2][4]))),-p[1][2])),l(x(l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][2]),x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][4]))),p[1][3]),x(l(x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][0]),l(x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][2]),x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][3]))),-p[1][4]))),-p[0][1])),l(x(l(l(x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][1]),l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][3]),x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][4]))),p[1][0]),x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][3]),x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),p[2][4]))),-p[1][1])),l(x(l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][4]))),p[1][3]),x(l(x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][3]))),-p[1][4]))),p[0][2]),l(x(l(l(x(l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][1]),l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][2]),x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][4]))),p[1][0]),x(l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][2]),x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][4]))),-p[1][1])),l(x(l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][4]))),p[1][2]),x(l(x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][2]))),-p[1][4]))),-p[0][3]),x(l(l(x(l(x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][1]),l(x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),-p[2][2]),x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][3]))),p[1][0]),x(l(x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][0]),l(x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][2]),x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][3]))),-p[1][1])),l(x(l(x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][3]))),p[1][2]),x(l(x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][2]))),-p[1][3]))),p[0][4])))))}}function g(l){var x=l===2?v:l===3?s:l===4?o:l===5?b:void 0;return x(a,i,e,n)}var d=[function(){return[0]},function(x){return[x[0][0]]}];function f(l,x,u,M,w,p,_,h){return function(E){switch(E.length){case 0:return l(E);case 1:return x(E);case 2:return u(E);case 3:return M(E);case 4:return w(E);case 5:return p(E)}var S=_[E.length];return S||(S=_[E.length]=h(E.length)),S(E)}}function m(){for(;d.length<r;)d.push(g(d.length));A.exports=f.apply(void 0,d.concat([d,g]));for(var l=0;l<d.length;++l)A.exports[l]=d[l]}m()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(c,A,T){var e=c("two-product"),a=c("robust-sum");A.exports=i;function i(n,r){for(var v=e(n[0],r[0]),s=1;s<n.length;++s)v=a(v,e(n[s],r[s]));return v}},{"robust-sum":289,"two-product":306}],282:[function(c,A,T){var e=c("two-product"),a=c("robust-sum"),i=c("robust-subtract"),n=c("robust-scale"),r=6;function v(w){var p=w===3?g:w===4?d:w===5?f:m;return p(a,i,e,n)}function s(){return 0}function o(){return 0}function b(){return 0}function g(w,p,_,h){function L(E,S,P){var F=_(E[0],E[0]),I=h(F,S[0]),D=h(F,P[0]),R=_(S[0],S[0]),O=h(R,E[0]),z=h(R,P[0]),G=_(P[0],P[0]),Y=h(G,E[0]),ee=h(G,S[0]),j=w(p(ee,z),p(O,I)),X=p(Y,D),ae=p(j,X);return ae[ae.length-1]}return L}function d(w,p,_,h){function L(E,S,P,F){var I=w(_(E[0],E[0]),_(E[1],E[1])),D=h(I,S[0]),R=h(I,P[0]),O=h(I,F[0]),z=w(_(S[0],S[0]),_(S[1],S[1])),G=h(z,E[0]),Y=h(z,P[0]),ee=h(z,F[0]),j=w(_(P[0],P[0]),_(P[1],P[1])),X=h(j,E[0]),ae=h(j,S[0]),he=h(j,F[0]),K=w(_(F[0],F[0]),_(F[1],F[1])),J=h(K,E[0]),U=h(K,S[0]),H=h(K,P[0]),q=w(w(h(p(H,he),S[1]),w(h(p(U,ee),-P[1]),h(p(ae,Y),F[1]))),w(h(p(U,ee),E[1]),w(h(p(J,O),-S[1]),h(p(G,D),F[1])))),re=w(w(h(p(H,he),E[1]),w(h(p(J,O),-P[1]),h(p(X,R),F[1]))),w(h(p(ae,Y),E[1]),w(h(p(X,R),-S[1]),h(p(G,D),P[1])))),Z=p(q,re);return Z[Z.length-1]}return L}function f(w,p,_,h){function L(E,S,P,F,I){var D=w(_(E[0],E[0]),w(_(E[1],E[1]),_(E[2],E[2]))),R=h(D,S[0]),O=h(D,P[0]),z=h(D,F[0]),G=h(D,I[0]),Y=w(_(S[0],S[0]),w(_(S[1],S[1]),_(S[2],S[2]))),ee=h(Y,E[0]),j=h(Y,P[0]),X=h(Y,F[0]),ae=h(Y,I[0]),he=w(_(P[0],P[0]),w(_(P[1],P[1]),_(P[2],P[2]))),K=h(he,E[0]),J=h(he,S[0]),U=h(he,F[0]),H=h(he,I[0]),q=w(_(F[0],F[0]),w(_(F[1],F[1]),_(F[2],F[2]))),re=h(q,E[0]),Z=h(q,S[0]),Q=h(q,P[0]),ie=h(q,I[0]),oe=w(_(I[0],I[0]),w(_(I[1],I[1]),_(I[2],I[2]))),ne=h(oe,E[0]),le=h(oe,S[0]),_e=h(oe,P[0]),fe=h(oe,F[0]),ye=w(w(w(h(w(h(p(fe,ie),P[1]),w(h(p(_e,H),-F[1]),h(p(Q,U),I[1]))),S[2]),w(h(w(h(p(fe,ie),S[1]),w(h(p(le,ae),-F[1]),h(p(Z,X),I[1]))),-P[2]),h(w(h(p(_e,H),S[1]),w(h(p(le,ae),-P[1]),h(p(J,j),I[1]))),F[2]))),w(h(w(h(p(Q,U),S[1]),w(h(p(Z,X),-P[1]),h(p(J,j),F[1]))),-I[2]),w(h(w(h(p(fe,ie),S[1]),w(h(p(le,ae),-F[1]),h(p(Z,X),I[1]))),E[2]),h(w(h(p(fe,ie),E[1]),w(h(p(ne,G),-F[1]),h(p(re,z),I[1]))),-S[2])))),w(w(h(w(h(p(le,ae),E[1]),w(h(p(ne,G),-S[1]),h(p(ee,R),I[1]))),F[2]),w(h(w(h(p(Z,X),E[1]),w(h(p(re,z),-S[1]),h(p(ee,R),F[1]))),-I[2]),h(w(h(p(Q,U),S[1]),w(h(p(Z,X),-P[1]),h(p(J,j),F[1]))),E[2]))),w(h(w(h(p(Q,U),E[1]),w(h(p(re,z),-P[1]),h(p(K,O),F[1]))),-S[2]),w(h(w(h(p(Z,X),E[1]),w(h(p(re,z),-S[1]),h(p(ee,R),F[1]))),P[2]),h(w(h(p(J,j),E[1]),w(h(p(K,O),-S[1]),h(p(ee,R),P[1]))),-F[2]))))),xe=w(w(w(h(w(h(p(fe,ie),P[1]),w(h(p(_e,H),-F[1]),h(p(Q,U),I[1]))),E[2]),h(w(h(p(fe,ie),E[1]),w(h(p(ne,G),-F[1]),h(p(re,z),I[1]))),-P[2])),w(h(w(h(p(_e,H),E[1]),w(h(p(ne,G),-P[1]),h(p(K,O),I[1]))),F[2]),h(w(h(p(Q,U),E[1]),w(h(p(re,z),-P[1]),h(p(K,O),F[1]))),-I[2]))),w(w(h(w(h(p(_e,H),S[1]),w(h(p(le,ae),-P[1]),h(p(J,j),I[1]))),E[2]),h(w(h(p(_e,H),E[1]),w(h(p(ne,G),-P[1]),h(p(K,O),I[1]))),-S[2])),w(h(w(h(p(le,ae),E[1]),w(h(p(ne,G),-S[1]),h(p(ee,R),I[1]))),P[2]),h(w(h(p(J,j),E[1]),w(h(p(K,O),-S[1]),h(p(ee,R),P[1]))),-I[2])))),me=p(ye,xe);return me[me.length-1]}return L}function m(w,p,_,h){function L(E,S,P,F,I,D){var R=w(w(_(E[0],E[0]),_(E[1],E[1])),w(_(E[2],E[2]),_(E[3],E[3]))),O=h(R,S[0]),z=h(R,P[0]),G=h(R,F[0]),Y=h(R,I[0]),ee=h(R,D[0]),j=w(w(_(S[0],S[0]),_(S[1],S[1])),w(_(S[2],S[2]),_(S[3],S[3]))),X=h(j,E[0]),ae=h(j,P[0]),he=h(j,F[0]),K=h(j,I[0]),J=h(j,D[0]),U=w(w(_(P[0],P[0]),_(P[1],P[1])),w(_(P[2],P[2]),_(P[3],P[3]))),H=h(U,E[0]),q=h(U,S[0]),re=h(U,F[0]),Z=h(U,I[0]),Q=h(U,D[0]),ie=w(w(_(F[0],F[0]),_(F[1],F[1])),w(_(F[2],F[2]),_(F[3],F[3]))),oe=h(ie,E[0]),ne=h(ie,S[0]),le=h(ie,P[0]),_e=h(ie,I[0]),fe=h(ie,D[0]),ye=w(w(_(I[0],I[0]),_(I[1],I[1])),w(_(I[2],I[2]),_(I[3],I[3]))),xe=h(ye,E[0]),me=h(ye,S[0]),be=h(ye,P[0]),ke=h(ye,F[0]),De=h(ye,D[0]),He=w(w(_(D[0],D[0]),_(D[1],D[1])),w(_(D[2],D[2]),_(D[3],D[3]))),Ae=h(He,E[0]),Le=h(He,S[0]),Ze=h(He,P[0]),We=h(He,F[0]),ze=h(He,I[0]),Ie=w(w(w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),P[2]),h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),-F[2])),w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),I[2]),h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),-D[2]))),S[3]),w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),S[2]),h(w(h(p(ze,De),S[1]),w(h(p(Le,J),-I[1]),h(p(me,K),D[1]))),-F[2])),w(h(w(h(p(We,fe),S[1]),w(h(p(Le,J),-F[1]),h(p(ne,he),D[1]))),I[2]),h(w(h(p(ke,_e),S[1]),w(h(p(me,K),-F[1]),h(p(ne,he),I[1]))),-D[2]))),-P[3]),h(w(w(h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),S[2]),h(w(h(p(ze,De),S[1]),w(h(p(Le,J),-I[1]),h(p(me,K),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,J),-P[1]),h(p(q,ae),D[1]))),I[2]),h(w(h(p(be,Z),S[1]),w(h(p(me,K),-P[1]),h(p(q,ae),I[1]))),-D[2]))),F[3]))),w(w(h(w(w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),S[2]),h(w(h(p(We,fe),S[1]),w(h(p(Le,J),-F[1]),h(p(ne,he),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,J),-P[1]),h(p(q,ae),D[1]))),F[2]),h(w(h(p(le,re),S[1]),w(h(p(ne,he),-P[1]),h(p(q,ae),F[1]))),-D[2]))),-I[3]),h(w(w(h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),S[2]),h(w(h(p(ke,_e),S[1]),w(h(p(me,K),-F[1]),h(p(ne,he),I[1]))),-P[2])),w(h(w(h(p(be,Z),S[1]),w(h(p(me,K),-P[1]),h(p(q,ae),I[1]))),F[2]),h(w(h(p(le,re),S[1]),w(h(p(ne,he),-P[1]),h(p(q,ae),F[1]))),-I[2]))),D[3])),w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),S[2]),h(w(h(p(ze,De),S[1]),w(h(p(Le,J),-I[1]),h(p(me,K),D[1]))),-F[2])),w(h(w(h(p(We,fe),S[1]),w(h(p(Le,J),-F[1]),h(p(ne,he),D[1]))),I[2]),h(w(h(p(ke,_e),S[1]),w(h(p(me,K),-F[1]),h(p(ne,he),I[1]))),-D[2]))),E[3]),h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-F[2])),w(h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),I[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-D[2]))),-S[3])))),w(w(w(h(w(w(h(w(h(p(ze,De),S[1]),w(h(p(Le,J),-I[1]),h(p(me,K),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-S[2])),w(h(w(h(p(Le,J),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),I[2]),h(w(h(p(me,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),-D[2]))),F[3]),h(w(w(h(w(h(p(We,fe),S[1]),w(h(p(Le,J),-F[1]),h(p(ne,he),D[1]))),E[2]),h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),-S[2])),w(h(w(h(p(Le,J),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),F[2]),h(w(h(p(ne,he),E[1]),w(h(p(oe,G),-S[1]),h(p(X,O),F[1]))),-D[2]))),-I[3])),w(h(w(w(h(w(h(p(ke,_e),S[1]),w(h(p(me,K),-F[1]),h(p(ne,he),I[1]))),E[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-S[2])),w(h(w(h(p(me,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),F[2]),h(w(h(p(ne,he),E[1]),w(h(p(oe,G),-S[1]),h(p(X,O),F[1]))),-I[2]))),D[3]),h(w(w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),S[2]),h(w(h(p(We,fe),S[1]),w(h(p(Le,J),-F[1]),h(p(ne,he),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,J),-P[1]),h(p(q,ae),D[1]))),F[2]),h(w(h(p(le,re),S[1]),w(h(p(ne,he),-P[1]),h(p(q,ae),F[1]))),-D[2]))),E[3]))),w(w(h(w(w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),E[2]),h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),F[2]),h(w(h(p(le,re),E[1]),w(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-D[2]))),-S[3]),h(w(w(h(w(h(p(We,fe),S[1]),w(h(p(Le,J),-F[1]),h(p(ne,he),D[1]))),E[2]),h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),-S[2])),w(h(w(h(p(Le,J),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),F[2]),h(w(h(p(ne,he),E[1]),w(h(p(oe,G),-S[1]),h(p(X,O),F[1]))),-D[2]))),P[3])),w(h(w(w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,J),-P[1]),h(p(q,ae),D[1]))),E[2]),h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),-S[2])),w(h(w(h(p(Le,J),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),P[2]),h(w(h(p(q,ae),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-D[2]))),-F[3]),h(w(w(h(w(h(p(le,re),S[1]),w(h(p(ne,he),-P[1]),h(p(q,ae),F[1]))),E[2]),h(w(h(p(le,re),E[1]),w(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-S[2])),w(h(w(h(p(ne,he),E[1]),w(h(p(oe,G),-S[1]),h(p(X,O),F[1]))),P[2]),h(w(h(p(q,ae),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-F[2]))),D[3]))))),Ve=w(w(w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),P[2]),h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),-F[2])),w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),I[2]),h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),-D[2]))),E[3]),w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-F[2])),w(h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),I[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-D[2]))),-P[3]),h(w(w(h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),I[2]),h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-D[2]))),F[3]))),w(w(h(w(w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),E[2]),h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),F[2]),h(w(h(p(le,re),E[1]),w(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-D[2]))),-I[3]),h(w(w(h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),E[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-P[2])),w(h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),F[2]),h(w(h(p(le,re),E[1]),w(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-I[2]))),D[3])),w(h(w(w(h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),S[2]),h(w(h(p(ze,De),S[1]),w(h(p(Le,J),-I[1]),h(p(me,K),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,J),-P[1]),h(p(q,ae),D[1]))),I[2]),h(w(h(p(be,Z),S[1]),w(h(p(me,K),-P[1]),h(p(q,ae),I[1]))),-D[2]))),E[3]),h(w(w(h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),I[2]),h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-D[2]))),-S[3])))),w(w(w(h(w(w(h(w(h(p(ze,De),S[1]),w(h(p(Le,J),-I[1]),h(p(me,K),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-S[2])),w(h(w(h(p(Le,J),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),I[2]),h(w(h(p(me,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),-D[2]))),P[3]),h(w(w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,J),-P[1]),h(p(q,ae),D[1]))),E[2]),h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),-S[2])),w(h(w(h(p(Le,J),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),P[2]),h(w(h(p(q,ae),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-D[2]))),-I[3])),w(h(w(w(h(w(h(p(be,Z),S[1]),w(h(p(me,K),-P[1]),h(p(q,ae),I[1]))),E[2]),h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-S[2])),w(h(w(h(p(me,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),P[2]),h(w(h(p(q,ae),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-I[2]))),D[3]),h(w(w(h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),S[2]),h(w(h(p(ke,_e),S[1]),w(h(p(me,K),-F[1]),h(p(ne,he),I[1]))),-P[2])),w(h(w(h(p(be,Z),S[1]),w(h(p(me,K),-P[1]),h(p(q,ae),I[1]))),F[2]),h(w(h(p(le,re),S[1]),w(h(p(ne,he),-P[1]),h(p(q,ae),F[1]))),-I[2]))),E[3]))),w(w(h(w(w(h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),E[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-P[2])),w(h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),F[2]),h(w(h(p(le,re),E[1]),w(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-I[2]))),-S[3]),h(w(w(h(w(h(p(ke,_e),S[1]),w(h(p(me,K),-F[1]),h(p(ne,he),I[1]))),E[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-S[2])),w(h(w(h(p(me,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),F[2]),h(w(h(p(ne,he),E[1]),w(h(p(oe,G),-S[1]),h(p(X,O),F[1]))),-I[2]))),P[3])),w(h(w(w(h(w(h(p(be,Z),S[1]),w(h(p(me,K),-P[1]),h(p(q,ae),I[1]))),E[2]),h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-S[2])),w(h(w(h(p(me,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),P[2]),h(w(h(p(q,ae),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-I[2]))),-F[3]),h(w(w(h(w(h(p(le,re),S[1]),w(h(p(ne,he),-P[1]),h(p(q,ae),F[1]))),E[2]),h(w(h(p(le,re),E[1]),w(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-S[2])),w(h(w(h(p(ne,he),E[1]),w(h(p(oe,G),-S[1]),h(p(X,O),F[1]))),P[2]),h(w(h(p(q,ae),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-F[2]))),I[3]))))),dt=p(Ie,Ve);return dt[dt.length-1]}return L}var l=[s,o,b];function x(w){var p=l[w.length];return p||(p=l[w.length]=v(w.length)),p.apply(void 0,w)}function u(w,p,_,h,L,E,S,P){function F(I,D,R,O,z,G){switch(arguments.length){case 0:case 1:return 0;case 2:return h(I,D);case 3:return L(I,D,R);case 4:return E(I,D,R,O);case 5:return S(I,D,R,O,z);case 6:return P(I,D,R,O,z,G)}for(var Y=new Array(arguments.length),ee=0;ee<arguments.length;++ee)Y[ee]=arguments[ee];return w(Y)}return F}function M(){for(;l.length<=r;)l.push(v(l.length));A.exports=u.apply(void 0,[x].concat(l));for(var w=0;w<=r;++w)A.exports[w]=l[w]}M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(c,A,T){var e=c("robust-determinant"),a=6;function i(l){var x=l===2?v:l===3?s:l===4?o:l===5?b:g;return l<6?x(e[l]):x(e)}function n(){return[[0]]}function r(l,x){return[[x[0]],[l[0][0]]]}function v(l){return function(u,M){return[l([[+M[0],+u[0][1]],[+M[1],+u[1][1]]]),l([[+u[0][0],+M[0]],[+u[1][0],+M[1]]]),l(u)]}}function s(l){return function(u,M){return[l([[+M[0],+u[0][1],+u[0][2]],[+M[1],+u[1][1],+u[1][2]],[+M[2],+u[2][1],+u[2][2]]]),l([[+u[0][0],+M[0],+u[0][2]],[+u[1][0],+M[1],+u[1][2]],[+u[2][0],+M[2],+u[2][2]]]),l([[+u[0][0],+u[0][1],+M[0]],[+u[1][0],+u[1][1],+M[1]],[+u[2][0],+u[2][1],+M[2]]]),l(u)]}}function o(l){return function(u,M){return[l([[+M[0],+u[0][1],+u[0][2],+u[0][3]],[+M[1],+u[1][1],+u[1][2],+u[1][3]],[+M[2],+u[2][1],+u[2][2],+u[2][3]],[+M[3],+u[3][1],+u[3][2],+u[3][3]]]),l([[+u[0][0],+M[0],+u[0][2],+u[0][3]],[+u[1][0],+M[1],+u[1][2],+u[1][3]],[+u[2][0],+M[2],+u[2][2],+u[2][3]],[+u[3][0],+M[3],+u[3][2],+u[3][3]]]),l([[+u[0][0],+u[0][1],+M[0],+u[0][3]],[+u[1][0],+u[1][1],+M[1],+u[1][3]],[+u[2][0],+u[2][1],+M[2],+u[2][3]],[+u[3][0],+u[3][1],+M[3],+u[3][3]]]),l([[+u[0][0],+u[0][1],+u[0][2],+M[0]],[+u[1][0],+u[1][1],+u[1][2],+M[1]],[+u[2][0],+u[2][1],+u[2][2],+M[2]],[+u[3][0],+u[3][1],+u[3][2],+M[3]]]),l(u)]}}function b(l){return function(u,M){return[l([[+M[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4]],[+M[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4]],[+M[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4]],[+M[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4]],[+M[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+M[0],+u[0][2],+u[0][3],+u[0][4]],[+u[1][0],+M[1],+u[1][2],+u[1][3],+u[1][4]],[+u[2][0],+M[2],+u[2][2],+u[2][3],+u[2][4]],[+u[3][0],+M[3],+u[3][2],+u[3][3],+u[3][4]],[+u[4][0],+M[4],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+M[0],+u[0][3],+u[0][4]],[+u[1][0],+u[1][1],+M[1],+u[1][3],+u[1][4]],[+u[2][0],+u[2][1],+M[2],+u[2][3],+u[2][4]],[+u[3][0],+u[3][1],+M[3],+u[3][3],+u[3][4]],[+u[4][0],+u[4][1],+M[4],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+M[0],+u[0][4]],[+u[1][0],+u[1][1],+u[1][2],+M[1],+u[1][4]],[+u[2][0],+u[2][1],+u[2][2],+M[2],+u[2][4]],[+u[3][0],+u[3][1],+u[3][2],+M[3],+u[3][4]],[+u[4][0],+u[4][1],+u[4][2],+M[4],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+M[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+M[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+M[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+M[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+M[4]]]),l(u)]}}function g(l){return function(u,M){return[l([[+M[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+M[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+M[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+M[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+M[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+M[5],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+M[0],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+M[1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+M[2],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+M[3],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+M[4],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+M[5],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+M[0],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+M[1],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+M[2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+M[3],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+M[4],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+M[5],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+M[0],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+M[1],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+M[2],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+M[3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+M[4],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+M[5],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+M[0],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+M[1],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+M[2],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+M[3],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+M[4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+M[5],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+M[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+M[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+M[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+M[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+M[4]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+M[5]]]),l(u)]}}var d=[n,r];function f(l,x,u,M,w,p,_,h){return function(E,S){switch(E.length){case 0:return l(E,S);case 1:return x(E,S);case 2:return u(E,S);case 3:return M(E,S);case 4:return w(E,S);case 5:return p(E,S)}var P=_[E.length];return P||(P=_[E.length]=h(E.length)),P(E,S)}}function m(){for(;d.length<a;)d.push(i(d.length));A.exports=f.apply(void 0,d.concat([d,i]));for(var l=0;l<a;++l)A.exports[l]=d[l]}m()},{"robust-determinant":280}],284:[function(c,A,T){var e=c("two-product"),a=c("robust-sum"),i=c("robust-scale"),n=c("robust-subtract"),r=5,v=11102230246251565e-32,s=(3+16*v)*v,o=(7+56*v)*v;function b(p,_,h,L){return function(S,P,F){var I=p(p(_(P[1],F[0]),_(-F[1],P[0])),p(_(S[1],P[0]),_(-P[1],S[0]))),D=p(_(S[1],F[0]),_(-F[1],S[0])),R=L(I,D);return R[R.length-1]}}function g(p,_,h,L){return function(S,P,F,I){var D=p(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),P[2]),p(h(p(_(P[1],I[0]),_(-I[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),I[2]))),p(h(p(_(P[1],I[0]),_(-I[1],P[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),I[2])))),R=p(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),I[2]))),p(h(p(_(P[1],F[0]),_(-F[1],P[0])),S[2]),p(h(p(_(S[1],F[0]),_(-F[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),F[2])))),O=L(D,R);return O[O.length-1]}}function d(p,_,h,L){return function(S,P,F,I,D){var R=p(p(p(h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),F[2]),p(h(p(_(F[1],D[0]),_(-D[1],F[0])),-I[2]),h(p(_(F[1],I[0]),_(-I[1],F[0])),D[2]))),P[3]),p(h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),P[2]),p(h(p(_(P[1],D[0]),_(-D[1],P[0])),-I[2]),h(p(_(P[1],I[0]),_(-I[1],P[0])),D[2]))),-F[3]),h(p(h(p(_(F[1],D[0]),_(-D[1],F[0])),P[2]),p(h(p(_(P[1],D[0]),_(-D[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),D[2]))),I[3]))),p(h(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),P[2]),p(h(p(_(P[1],I[0]),_(-I[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),I[2]))),-D[3]),p(h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),P[2]),p(h(p(_(P[1],D[0]),_(-D[1],P[0])),-I[2]),h(p(_(P[1],I[0]),_(-I[1],P[0])),D[2]))),S[3]),h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-I[2]),h(p(_(S[1],I[0]),_(-I[1],S[0])),D[2]))),-P[3])))),p(p(h(p(h(p(_(P[1],D[0]),_(-D[1],P[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),D[2]))),I[3]),p(h(p(h(p(_(P[1],I[0]),_(-I[1],P[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),I[2]))),-D[3]),h(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),P[2]),p(h(p(_(P[1],I[0]),_(-I[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),I[2]))),S[3]))),p(h(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),I[2]))),-P[3]),p(h(p(h(p(_(P[1],I[0]),_(-I[1],P[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),I[2]))),F[3]),h(p(h(p(_(P[1],F[0]),_(-F[1],P[0])),S[2]),p(h(p(_(S[1],F[0]),_(-F[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),F[2]))),-I[3]))))),O=p(p(p(h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),F[2]),p(h(p(_(F[1],D[0]),_(-D[1],F[0])),-I[2]),h(p(_(F[1],I[0]),_(-I[1],F[0])),D[2]))),S[3]),h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-I[2]),h(p(_(S[1],I[0]),_(-I[1],S[0])),D[2]))),-F[3])),p(h(p(h(p(_(F[1],D[0]),_(-D[1],F[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),D[2]))),I[3]),h(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),I[2]))),-D[3]))),p(p(h(p(h(p(_(F[1],D[0]),_(-D[1],F[0])),P[2]),p(h(p(_(P[1],D[0]),_(-D[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),D[2]))),S[3]),h(p(h(p(_(F[1],D[0]),_(-D[1],F[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),D[2]))),-P[3])),p(h(p(h(p(_(P[1],D[0]),_(-D[1],P[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),D[2]))),F[3]),h(p(h(p(_(P[1],F[0]),_(-F[1],P[0])),S[2]),p(h(p(_(S[1],F[0]),_(-F[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),F[2]))),-D[3])))),z=L(R,O);return z[z.length-1]}}function f(p){var _=p===3?b:p===4?g:d;return _(a,e,i,n)}var m=f(3),l=f(4),x=[function(){return 0},function(){return 0},function(_,h){return h[0]-_[0]},function(_,h,L){var E=(_[1]-L[1])*(h[0]-L[0]),S=(_[0]-L[0])*(h[1]-L[1]),P=E-S,F;if(E>0){if(S<=0)return P;F=E+S}else if(E<0){if(S>=0)return P;F=-(E+S)}else return P;var I=s*F;return P>=I||P<=-I?P:m(_,h,L)},function(_,h,L,E){var S=_[0]-E[0],P=h[0]-E[0],F=L[0]-E[0],I=_[1]-E[1],D=h[1]-E[1],R=L[1]-E[1],O=_[2]-E[2],z=h[2]-E[2],G=L[2]-E[2],Y=P*R,ee=F*D,j=F*I,X=S*R,ae=S*D,he=P*I,K=O*(Y-ee)+z*(j-X)+G*(ae-he),J=(Math.abs(Y)+Math.abs(ee))*Math.abs(O)+(Math.abs(j)+Math.abs(X))*Math.abs(z)+(Math.abs(ae)+Math.abs(he))*Math.abs(G),U=o*J;return K>U||-K>U?K:l(_,h,L,E)}];function u(p){var _=x[p.length];return _||(_=x[p.length]=f(p.length)),_.apply(void 0,p)}function M(p,_,h,L,E,S,P){return function(I,D,R,O,z){switch(arguments.length){case 0:case 1:return 0;case 2:return L(I,D);case 3:return E(I,D,R);case 4:return S(I,D,R,O);case 5:return P(I,D,R,O,z)}for(var G=new Array(arguments.length),Y=0;Y<arguments.length;++Y)G[Y]=arguments[Y];return p(G)}}function w(){for(;x.length<=r;)x.push(f(x.length));A.exports=M.apply(void 0,[u].concat(x));for(var p=0;p<=r;++p)A.exports[p]=x[p]}w()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(c,A,T){var e=c("robust-sum"),a=c("robust-scale");A.exports=i;function i(n,r){if(n.length===1)return a(r,n[0]);if(r.length===1)return a(n,r[0]);if(n.length===0||r.length===0)return[0];var v=[0];if(n.length<r.length)for(var s=0;s<n.length;++s)v=e(v,a(r,n[s]));else for(var s=0;s<r.length;++s)v=e(v,a(n,r[s]));return v}},{"robust-scale":286,"robust-sum":289}],286:[function(c,A,T){var e=c("two-product"),a=c("two-sum");A.exports=i;function i(n,r){var v=n.length;if(v===1){var s=e(n[0],r);return s[0]?s:[s[1]]}var o=new Array(2*v),b=[.1,.1],g=[.1,.1],d=0;e(n[0],r,b),b[0]&&(o[d++]=b[0]);for(var f=1;f<v;++f){e(n[f],r,g);var m=b[1];a(m,g[0],b),b[0]&&(o[d++]=b[0]);var l=g[1],x=b[1],u=l+x,M=u-l,w=x-M;b[1]=u,w&&(o[d++]=w)}return b[1]&&(o[d++]=b[1]),d===0&&(o[d++]=0),o.length=d,o}},{"two-product":306,"two-sum":307}],287:[function(c,A,T){A.exports=i;var e=c("robust-orientation")[3];function a(n,r,v,s){for(var o=0;o<2;++o){var b=n[o],g=r[o],d=Math.min(b,g),f=Math.max(b,g),m=v[o],l=s[o],x=Math.min(m,l),u=Math.max(m,l);if(u<d||f<x)return!1}return!0}function i(n,r,v,s){var o=e(n,v,s),b=e(r,v,s);if(o>0&&b>0||o<0&&b<0)return!1;var g=e(v,n,r),d=e(s,n,r);return g>0&&d>0||g<0&&d<0?!1:o===0&&b===0&&g===0&&d===0?a(n,r,v,s):!0}},{"robust-orientation":284}],288:[function(c,A,T){A.exports=a;function e(i,n){var r=i+n,v=r-i,s=r-v,o=n-v,b=i-s,g=b+o;return g?[g,r]:[r]}function a(i,n){var r=i.length|0,v=n.length|0;if(r===1&&v===1)return e(i[0],-n[0]);var s=r+v,o=new Array(s),b=0,g=0,d=0,f=Math.abs,m=i[g],l=f(m),x=-n[d],u=f(x),M,w;l<u?(w=m,g+=1,g<r&&(m=i[g],l=f(m))):(w=x,d+=1,d<v&&(x=-n[d],u=f(x))),g<r&&l<u||d>=v?(M=m,g+=1,g<r&&(m=i[g],l=f(m))):(M=x,d+=1,d<v&&(x=-n[d],u=f(x)));for(var p=M+w,_=p-M,h=w-_,L=h,E=p,S,P,F,I,D;g<r&&d<v;)l<u?(M=m,g+=1,g<r&&(m=i[g],l=f(m))):(M=x,d+=1,d<v&&(x=-n[d],u=f(x))),w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S;for(;g<r;)M=m,w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,g+=1,g<r&&(m=i[g]);for(;d<v;)M=x,w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,d+=1,d<v&&(x=-n[d]);return L&&(o[b++]=L),E&&(o[b++]=E),b||(o[b++]=0),o.length=b,o}},{}],289:[function(c,A,T){A.exports=a;function e(i,n){var r=i+n,v=r-i,s=r-v,o=n-v,b=i-s,g=b+o;return g?[g,r]:[r]}function a(i,n){var r=i.length|0,v=n.length|0;if(r===1&&v===1)return e(i[0],n[0]);var s=r+v,o=new Array(s),b=0,g=0,d=0,f=Math.abs,m=i[g],l=f(m),x=n[d],u=f(x),M,w;l<u?(w=m,g+=1,g<r&&(m=i[g],l=f(m))):(w=x,d+=1,d<v&&(x=n[d],u=f(x))),g<r&&l<u||d>=v?(M=m,g+=1,g<r&&(m=i[g],l=f(m))):(M=x,d+=1,d<v&&(x=n[d],u=f(x)));for(var p=M+w,_=p-M,h=w-_,L=h,E=p,S,P,F,I,D;g<r&&d<v;)l<u?(M=m,g+=1,g<r&&(m=i[g],l=f(m))):(M=x,d+=1,d<v&&(x=n[d],u=f(x))),w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S;for(;g<r;)M=m,w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,g+=1,g<r&&(m=i[g]);for(;d<v;)M=x,w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,d+=1,d<v&&(x=n[d]);return L&&(o[b++]=L),E&&(o[b++]=E),b||(o[b++]=0),o.length=b,o}},{}],290:[function(c,A,T){A.exports=i;var e=c("boundary-cells"),a=c("reduce-simplicial-complex");function i(n){return a(e(n))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(c,A,T){A.exports=d;var e=c("ndarray"),a=c("typedarray-pool"),i=c("ndarray-sort"),n=c("./lib/codegen");function r(f){for(var m=f.length,l=0,x=0;x<m;++x)l=Math.max(l,f[x].length)|0;return l-1}function v(f,m){for(var l=f.length,x=a.mallocUint8(l),u=0;u<l;++u)x[u]=f[u]<m|0;return x}function s(f,m){for(var l=f.length,x=m*(m+1)/2*l|0,u=a.mallocUint32(x*2),M=0,w=0;w<l;++w)for(var p=f[w],m=p.length,_=0;_<m;++_)for(var h=0;h<_;++h){var L=p[h],E=p[_];u[M++]=Math.min(L,E)|0,u[M++]=Math.max(L,E)|0}var S=M/2|0;i(e(u,[S,2]));for(var P=2,w=2;w<M;w+=2)u[w-2]===u[w]&&u[w-1]===u[w+1]||(u[P++]=u[w],u[P++]=u[w+1]);return e(u,[P/2|0,2])}function o(f,m,l,x){for(var u=f.data,M=f.shape[0],w=a.mallocDouble(M),p=0,_=0;_<M;++_){var h=u[2*_],L=u[2*_+1];if(l[h]!==l[L]){var E=m[h],S=m[L];u[2*p]=h,u[2*p+1]=L,w[p++]=(S-x)/(S-E)}}return f.shape[0]=p,e(w,[p])}function b(f,m){var l=a.mallocInt32(m*2),x=f.shape[0],u=f.data;l[0]=0;for(var M=0,w=0;w<x;++w){var p=u[2*w];if(p!==M){for(l[2*M+1]=w;++M<p;)l[2*M]=w,l[2*M+1]=w;l[2*M]=w}}for(l[2*M+1]=x;++M<m;)l[2*M]=l[2*M+1]=x;return l}function g(f){for(var m=f.shape[0]|0,l=f.data,x=new Array(m),u=0;u<m;++u)x[u]=[l[2*u],l[2*u+1]];return x}function d(f,m,l,x){l=l||0,typeof x>"u"&&(x=r(f));var u=f.length;if(u===0||x<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=v(m,+l),w=s(f,x),p=o(w,m,M,+l),_=b(w,m.length|0),h=n(x)(f,w.data,_,M),L=g(w),E=[].slice.call(p.data,0,p.shape[0]);return a.free(M),a.free(w.data),a.free(p.data),a.free(_),{cells:h,vertexIds:L,vertexWeights:E}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(c,A,T){A.exports=a;var e=[function(){function n(r,v,s,o){for(var b=r.length,g=[],d=0;d<b;++d){var f=r[d];f.length}return g}return n},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],m=v[2*g+1];f<m;){var l=f+m>>1,x=s[2*l+1];if(x===d)return l;d<x?m=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var m=v[f],l=m.length;if(l===2){var x=(b[m[0]]<<0)+(b[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0])]);break}}}return d}return r},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],m=v[2*g+1];f<m;){var l=f+m>>1,x=s[2*l+1];if(x===d)return l;d<x?m=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var m=v[f],l=m.length;if(l===3){var x=(b[m[0]]<<0)+(b[m[1]]<<1)+(b[m[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:d.push([n(o,s,m[0],m[2]),n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0]),n(o,s,m[1],m[2])]);break;case 3:d.push([n(o,s,m[0],m[2]),n(o,s,m[1],m[2])]);break;case 4:d.push([n(o,s,m[2],m[1]),n(o,s,m[2],m[0])]);break;case 5:d.push([n(o,s,m[2],m[1]),n(o,s,m[0],m[1])]);break;case 6:d.push([n(o,s,m[1],m[0]),n(o,s,m[2],m[0])]);break}}else if(l===2){var x=(b[m[0]]<<0)+(b[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0])]);break}}}return d}return r},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],m=v[2*g+1];f<m;){var l=f+m>>1,x=s[2*l+1];if(x===d)return l;d<x?m=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var m=v[f],l=m.length;if(l===4){var x=(b[m[0]]<<0)+(b[m[1]]<<1)+(b[m[2]]<<2)+(b[m[3]]<<3);if(x===0||x===15)continue;switch(x){case 0:break;case 1:d.push([n(o,s,m[0],m[1]),n(o,s,m[0],m[2]),n(o,s,m[0],m[3])]);break;case 2:d.push([n(o,s,m[1],m[2]),n(o,s,m[1],m[0]),n(o,s,m[1],m[3])]);break;case 3:d.push([n(o,s,m[1],m[2]),n(o,s,m[0],m[2]),n(o,s,m[0],m[3])],[n(o,s,m[1],m[3]),n(o,s,m[1],m[2]),n(o,s,m[0],m[3])]);break;case 4:d.push([n(o,s,m[2],m[0]),n(o,s,m[2],m[1]),n(o,s,m[2],m[3])]);break;case 5:d.push([n(o,s,m[0],m[1]),n(o,s,m[2],m[1]),n(o,s,m[0],m[3])],[n(o,s,m[2],m[1]),n(o,s,m[2],m[3]),n(o,s,m[0],m[3])]);break;case 6:d.push([n(o,s,m[2],m[0]),n(o,s,m[1],m[0]),n(o,s,m[1],m[3])],[n(o,s,m[2],m[3]),n(o,s,m[2],m[0]),n(o,s,m[1],m[3])]);break;case 7:d.push([n(o,s,m[0],m[3]),n(o,s,m[1],m[3]),n(o,s,m[2],m[3])]);break;case 8:d.push([n(o,s,m[3],m[1]),n(o,s,m[3],m[0]),n(o,s,m[3],m[2])]);break;case 9:d.push([n(o,s,m[3],m[1]),n(o,s,m[0],m[1]),n(o,s,m[0],m[2])],[n(o,s,m[3],m[2]),n(o,s,m[3],m[1]),n(o,s,m[0],m[2])]);break;case 10:d.push([n(o,s,m[1],m[0]),n(o,s,m[3],m[0]),n(o,s,m[1],m[2])],[n(o,s,m[3],m[0]),n(o,s,m[3],m[2]),n(o,s,m[1],m[2])]);break;case 11:d.push([n(o,s,m[1],m[2]),n(o,s,m[0],m[2]),n(o,s,m[3],m[2])]);break;case 12:d.push([n(o,s,m[3],m[0]),n(o,s,m[2],m[0]),n(o,s,m[2],m[1])],[n(o,s,m[3],m[1]),n(o,s,m[3],m[0]),n(o,s,m[2],m[1])]);break;case 13:d.push([n(o,s,m[0],m[1]),n(o,s,m[2],m[1]),n(o,s,m[3],m[1])]);break;case 14:d.push([n(o,s,m[2],m[0]),n(o,s,m[1],m[0]),n(o,s,m[3],m[0])]);break}}else if(l===3){var x=(b[m[0]]<<0)+(b[m[1]]<<1)+(b[m[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:d.push([n(o,s,m[0],m[2]),n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0]),n(o,s,m[1],m[2])]);break;case 3:d.push([n(o,s,m[0],m[2]),n(o,s,m[1],m[2])]);break;case 4:d.push([n(o,s,m[2],m[1]),n(o,s,m[2],m[0])]);break;case 5:d.push([n(o,s,m[2],m[1]),n(o,s,m[0],m[1])]);break;case 6:d.push([n(o,s,m[1],m[0]),n(o,s,m[2],m[0])]);break}}else if(l===2){var x=(b[m[0]]<<0)+(b[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,m[0],m[1])]);break;case 2:d.push([n(o,s,m[1],m[0])]);break}}}return d}return r}];function a(i){return e[i]()}},{}],293:[function(c,A,T){var e=c("bit-twiddle"),a=c("union-find");function i(p){for(var _=0,h=Math.max,L=0,E=p.length;L<E;++L)_=h(_,p[L].length);return _-1}T.dimension=i;function n(p){for(var _=-1,h=Math.max,L=0,E=p.length;L<E;++L)for(var S=p[L],P=0,F=S.length;P<F;++P)_=h(_,S[P]);return _+1}T.countVertices=n;function r(p){for(var _=new Array(p.length),h=0,L=p.length;h<L;++h)_[h]=p[h].slice(0);return _}T.cloneCells=r;function v(p,_){var h=p.length,L=p.length-_.length,E=Math.min;if(L)return L;switch(h){case 0:return 0;case 1:return p[0]-_[0];case 2:var D=p[0]+p[1]-_[0]-_[1];return D||E(p[0],p[1])-E(_[0],_[1]);case 3:var S=p[0]+p[1],P=_[0]+_[1];if(D=S+p[2]-(P+_[2]),D)return D;var F=E(p[0],p[1]),I=E(_[0],_[1]),D=E(F,p[2])-E(I,_[2]);return D||E(F+p[2],S)-E(I+_[2],P);default:var R=p.slice(0);R.sort();var O=_.slice(0);O.sort();for(var z=0;z<h;++z)if(L=R[z]-O[z],L)return L;return 0}}T.compareCells=v;function s(p,_){return v(p[0],_[0])}function o(p,_){if(_){for(var h=p.length,L=new Array(h),E=0;E<h;++E)L[E]=[p[E],_[E]];L.sort(s);for(var E=0;E<h;++E)p[E]=L[E][0],_[E]=L[E][1];return p}else return p.sort(v),p}T.normalize=o;function b(p){if(p.length===0)return[];for(var _=1,h=p.length,L=1;L<h;++L){var E=p[L];if(v(E,p[L-1])){if(L===_){_++;continue}p[_++]=E}}return p.length=_,p}T.unique=b;function g(p,_){for(var h=0,L=p.length-1,E=-1;h<=L;){var S=h+L>>1,P=v(p[S],_);P<=0?(P===0&&(E=S),h=S+1):P>0&&(L=S-1)}return E}T.findCell=g;function d(p,_){for(var h=new Array(p.length),L=0,E=h.length;L<E;++L)h[L]=[];for(var S=[],L=0,P=_.length;L<P;++L)for(var F=_[L],I=F.length,D=1,R=1<<I;D<R;++D){S.length=e.popCount(D);for(var O=0,z=0;z<I;++z)D&1<<z&&(S[O++]=F[z]);var G=g(p,S);if(!(G<0))for(;h[G++].push(L),!(G>=p.length||v(p[G],S)!==0););}return h}T.incidence=d;function f(p,_){if(!_)return d(b(l(p,0)),p);for(var h=new Array(_),L=0;L<_;++L)h[L]=[];for(var L=0,E=p.length;L<E;++L)for(var S=p[L],P=0,F=S.length;P<F;++P)h[S[P]].push(L);return h}T.dual=f;function m(p){for(var _=[],h=0,L=p.length;h<L;++h)for(var E=p[h],S=E.length|0,P=1,F=1<<S;P<F;++P){for(var I=[],D=0;D<S;++D)P>>>D&1&&I.push(E[D]);_.push(I)}return o(_)}T.explode=m;function l(p,_){if(_<0)return[];for(var h=[],L=(1<<_+1)-1,E=0;E<p.length;++E)for(var S=p[E],P=L;P<1<<S.length;P=e.nextCombination(P)){for(var F=new Array(_+1),I=0,D=0;D<S.length;++D)P&1<<D&&(F[I++]=S[D]);h.push(F)}return o(h)}T.skeleton=l;function x(p){for(var _=[],h=0,L=p.length;h<L;++h)for(var E=p[h],S=0,P=E.length;S<P;++S){for(var F=new Array(E.length-1),I=0,D=0;I<P;++I)I!==S&&(F[D++]=E[I]);_.push(F)}return o(_)}T.boundary=x;function u(p,_){for(var h=new a(_),L=0;L<p.length;++L)for(var E=p[L],S=0;S<E.length;++S)for(var P=S+1;P<E.length;++P)h.link(E[S],E[P]);for(var F=[],I=h.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<p.length;++L){var D=h.find(p[L][0]);I[D]<0?(I[D]=F.length,F.push([p[L].slice(0)])):F[I[D]].push(p[L].slice(0))}return F}function M(p){for(var _=b(o(l(p,0))),h=new a(_.length),L=0;L<p.length;++L)for(var E=p[L],S=0;S<E.length;++S)for(var P=g(_,[E[S]]),F=S+1;F<E.length;++F)h.link(P,g(_,[E[F]]));for(var I=[],D=h.ranks,L=0;L<D.length;++L)D[L]=-1;for(var L=0;L<p.length;++L){var R=h.find(g(_,[p[L][0]]));D[R]<0?(D[R]=I.length,I.push([p[L].slice(0)])):I[D[R]].push(p[L].slice(0))}return I}function w(p,_){return _?u(p,_):M(p)}T.connectedComponents=w},{"bit-twiddle":32,"union-find":309}],294:[function(c,A,T){arguments[4][32][0].apply(T,arguments)},{dup:32}],295:[function(c,A,T){arguments[4][293][0].apply(T,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(c,A,T){A.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var i=0;i<a;++i)this.roots[i]=i,this.ranks[i]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.prototype.find=function(a){for(var i=this.roots;i[a]!==a;){var n=i[a];i[a]=i[n],a=n}return a},e.prototype.link=function(a,i){var n=this.find(a),r=this.find(i);if(n!==r){var v=this.ranks,s=this.roots,o=v[n],b=v[r];o<b?s[n]=r:b<o?s[r]=n:(s[r]=n,++v[n])}}},{}],297:[function(c,A,T){A.exports=n;var e=c("robust-orientation"),a=c("simplicial-complex");function i(r,v,s){var o=Math.abs(e(r,v,s)),b=Math.sqrt(Math.pow(v[0]-s[0],2)+Math.pow(v[1]-s[1],2));return o/b}function n(r,v,s){for(var o=v.length,b=r.length,g=new Array(o),d=new Array(o),f=new Array(o),m=new Array(o),l=0;l<o;++l)g[l]=d[l]=-1,f[l]=1/0,m[l]=!1;for(var l=0;l<b;++l){var x=r[l];if(x.length!==2)throw new Error("Input must be a graph");var u=x[1],M=x[0];d[M]!==-1?d[M]=-2:d[M]=u,g[u]!==-1?g[u]=-2:g[u]=M}function w(j){if(m[j])return 1/0;var X=g[j],ae=d[j];return X<0||ae<0?1/0:i(v[j],v[X],v[ae])}function p(j,X){var ae=I[j],he=I[X];I[j]=he,I[X]=ae,D[ae]=X,D[he]=j}function _(j){return f[I[j]]}function h(j){return j&1?j-1>>1:(j>>1)-1}function L(j){for(var X=_(j);;){var ae=X,he=2*j+1,K=2*(j+1),J=j;if(he<O){var U=_(he);U<ae&&(J=he,ae=U)}if(K<O){var H=_(K);H<ae&&(J=K)}if(J===j)return j;p(j,J),j=J}}function E(j){for(var X=_(j);j>0;){var ae=h(j);if(ae>=0){var he=_(ae);if(X<he){p(j,ae),j=ae;continue}}return j}}function S(){if(O>0){var j=I[0];return p(0,O-1),O-=1,L(0),j}return-1}function P(j,X){var ae=I[j];return f[ae]===X?j:(f[ae]=-1/0,E(j),S(),f[ae]=X,O+=1,E(O-1))}function F(j){if(!m[j]){m[j]=!0;var X=g[j],ae=d[j];g[ae]>=0&&(g[ae]=X),d[X]>=0&&(d[X]=ae),D[X]>=0&&P(D[X],w(X)),D[ae]>=0&&P(D[ae],w(ae))}}for(var I=[],D=new Array(o),l=0;l<o;++l){var R=f[l]=w(l);R<1/0?(D[l]=I.length,I.push(l)):D[l]=-1}for(var O=I.length,l=O>>1;l>=0;--l)L(l);for(;;){var z=S();if(z<0||f[z]>s)break;F(z)}for(var G=[],l=0;l<o;++l)m[l]||(D[l]=G.length,G.push(v[l].slice()));G.length;function Y(j,X){if(j[X]<0)return X;var ae=X,he=X;do{var K=j[he];if(!m[he]||K<0||K===he||(he=K,K=j[he],!m[he]||K<0||K===he))break;he=K,ae=j[ae]}while(ae!==he);for(var J=X;J!==he;J=j[J])j[J]=he;return he}var ee=[];return r.forEach(function(j){var X=Y(g,j[0]),ae=Y(d,j[1]);if(X>=0&&ae>=0&&X!==ae){var he=D[X],K=D[ae];he!==K&&ee.push([he,K])}}),a.unique(a.normalize(ee)),{positions:G,edges:ee}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(c,A,T){A.exports=i;var e=c("robust-orientation");function a(n,r){var v,s;if(r[0][0]<r[1][0])v=r[0],s=r[1];else if(r[0][0]>r[1][0])v=r[1],s=r[0];else{var o=Math.min(n[0][1],n[1][1]),b=Math.max(n[0][1],n[1][1]),g=Math.min(r[0][1],r[1][1]),d=Math.max(r[0][1],r[1][1]);return b<g?b-g:o>d?o-d:b-d}var f,m;n[0][1]<n[1][1]?(f=n[0],m=n[1]):(f=n[1],m=n[0]);var l=e(s,v,f);return l||(l=e(s,v,m),l)?l:m-s}function i(n,r){var v,s;if(r[0][0]<r[1][0])v=r[0],s=r[1];else if(r[0][0]>r[1][0])v=r[1],s=r[0];else return a(r,n);var o,b;if(n[0][0]<n[1][0])o=n[0],b=n[1];else if(n[0][0]>n[1][0])o=n[1],b=n[0];else return-a(n,r);var g=e(v,s,b),d=e(v,s,o);if(g<0){if(d<=0)return g}else if(g>0){if(d>=0)return g}else if(d)return d;if(g=e(b,o,s),d=e(b,o,v),g<0){if(d<=0)return g}else if(g>0){if(d>=0)return g}else if(d)return d;return s[0]-b[0]}},{"robust-orientation":284}],299:[function(c,A,T){A.exports=d;var e=c("binary-search-bounds"),a=c("functional-red-black-tree"),i=c("robust-orientation"),n=c("./lib/order-segments");function r(f,m,l){this.slabs=f,this.coordinates=m,this.horizontal=l}var v=r.prototype;function s(f,m){return f.y-m}function o(f,m){for(var l=null;f;){var x=f.key,u,M;x[0][0]<x[1][0]?(u=x[0],M=x[1]):(u=x[1],M=x[0]);var w=i(u,M,m);if(w<0)f=f.left;else if(w>0)if(m[0]!==x[1][0])l=f,f=f.right;else{var p=o(f.right,m);if(p)return p;f=f.left}else{if(m[0]!==x[1][0])return f;var p=o(f.right,m);if(p)return p;f=f.left}}return l}v.castUp=function(f){var m=e.le(this.coordinates,f[0]);if(m<0)return-1;this.slabs[m];var l=o(this.slabs[m],f),x=-1;if(l&&(x=l.value),this.coordinates[m]===f[0]){var u=null;if(l&&(u=l.key),m>0){var M=o(this.slabs[m-1],f);M&&(u?n(M.key,u)>0&&(u=M.key,x=M.value):(x=M.value,u=M.key))}var w=this.horizontal[m];if(w.length>0){var p=e.ge(w,f[1],s);if(p<w.length){var _=w[p];if(f[1]===_.y){if(_.closed)return _.index;for(;p<w.length-1&&w[p+1].y===f[1];)if(p=p+1,_=w[p],_.closed)return _.index;if(_.y===f[1]&&!_.start){if(p=p+1,p>=w.length)return x;_=w[p]}}if(_.start)if(u){var h=i(u[0],u[1],[f[0],_.y]);u[0][0]>u[1][0]&&(h=-h),h>0&&(x=_.index)}else x=_.index;else _.y!==f[1]&&(x=_.index)}}}return x};function b(f,m,l,x){this.y=f,this.index=m,this.start=l,this.closed=x}function g(f,m,l,x){this.x=f,this.segment=m,this.create=l,this.index=x}function d(f){for(var m=f.length,l=2*m,x=new Array(l),u=0;u<m;++u){var M=f[u],w=M[0][0]<M[1][0];x[2*u]=new g(M[0][0],M,w,u),x[2*u+1]=new g(M[1][0],M,!w,u)}x.sort(function(F,I){var D=F.x-I.x;return D||(D=F.create-I.create,D)?D:Math.min(F.segment[0][1],F.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var p=a(n),_=[],h=[],L=[],u=0;u<l;){for(var E=x[u].x,S=[];u<l;){var P=x[u];if(P.x!==E)break;u+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(S.push(new b(P.segment[0][1],P.index,!0,!0)),S.push(new b(P.segment[1][1],P.index,!1,!1))):(S.push(new b(P.segment[1][1],P.index,!0,!1)),S.push(new b(P.segment[0][1],P.index,!1,!0)))):P.create?p=p.insert(P.segment,P.index):p=p.remove(P.segment)}_.push(p.root),h.push(E),L.push(S)}return new r(_,h,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(c,A,T){var e=c("robust-dot-product"),a=c("robust-sum");A.exports=r,A.exports.positive=v,A.exports.negative=s;function i(o,b){var g=a(e(o,b),[b[b.length-1]]);return g[g.length-1]}function n(o,b,g,d){var f=d-b,m=-b/f;m<0?m=0:m>1&&(m=1);for(var l=1-m,x=o.length,u=new Array(x),M=0;M<x;++M)u[M]=m*o[M]+l*g[M];return u}function r(o,b){for(var g=[],d=[],f=i(o[o.length-1],b),m=o[o.length-1],l=o[0],x=0;x<o.length;++x,m=l){l=o[x];var u=i(l,b);if(f<0&&u>0||f>0&&u<0){var M=n(m,u,l,f);g.push(M),d.push(M.slice())}u<0?d.push(l.slice()):u>0?g.push(l.slice()):(g.push(l.slice()),d.push(l.slice())),f=u}return{positive:g,negative:d}}function v(o,b){for(var g=[],d=i(o[o.length-1],b),f=o[o.length-1],m=o[0],l=0;l<o.length;++l,f=m){m=o[l];var x=i(m,b);(d<0&&x>0||d>0&&x<0)&&g.push(n(f,x,m,d)),x>=0&&g.push(m.slice()),d=x}return g}function s(o,b){for(var g=[],d=i(o[o.length-1],b),f=o[o.length-1],m=o[0],l=0;l<o.length;++l,f=m){m=o[l];var x=i(m,b);(d<0&&x>0||d>0&&x<0)&&g.push(n(f,x,m,d)),x<=0&&g.push(m.slice()),d=x}return g}},{"robust-dot-product":281,"robust-sum":289}],301:[function(c,A,T){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(s){return n(v(s),arguments)}function i(s,o){return a.apply(null,[s].concat(o||[]))}function n(s,o){var b=1,g=s.length,d,f="",m,l,x,u,M,w,p,_;for(m=0;m<g;m++)if(typeof s[m]=="string")f+=s[m];else if(typeof s[m]=="object"){if(x=s[m],x.keys)for(d=o[b],l=0;l<x.keys.length;l++){if(d==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[l],x.keys[l-1]));d=d[x.keys[l]]}else x.param_no?d=o[x.param_no]:d=o[b++];if(e.not_type.test(x.type)&&e.not_primitive.test(x.type)&&d instanceof Function&&(d=d()),e.numeric_arg.test(x.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(a("[sprintf] expecting number but found %T",d));switch(e.number.test(x.type)&&(p=d>=0),x.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,x.width?parseInt(x.width):0);break;case"e":d=x.precision?parseFloat(d).toExponential(x.precision):parseFloat(d).toExponential();break;case"f":d=x.precision?parseFloat(d).toFixed(x.precision):parseFloat(d);break;case"g":d=x.precision?String(Number(d.toPrecision(x.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=x.precision?d.substring(0,x.precision):d;break;case"t":d=String(!!d),d=x.precision?d.substring(0,x.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=x.precision?d.substring(0,x.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=x.precision?d.substring(0,x.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}e.json.test(x.type)?f+=d:(e.number.test(x.type)&&(!p||x.sign)?(_=p?"+":"-",d=d.toString().replace(e.sign,"")):_="",M=x.pad_char?x.pad_char==="0"?"0":x.pad_char.charAt(1):" ",w=x.width-(_+d).length,u=x.width&&w>0?M.repeat(w):"",f+=x.align?_+d+u:M==="0"?_+u+d:u+_+d)}return f}var r=Object.create(null);function v(s){if(r[s])return r[s];for(var o=s,b,g=[],d=0;o;){if((b=e.text.exec(o))!==null)g.push(b[0]);else if((b=e.modulo.exec(o))!==null)g.push("%");else if((b=e.placeholder.exec(o))!==null){if(b[2]){d|=1;var f=[],m=b[2],l=[];if((l=e.key.exec(m))!==null)for(f.push(l[1]);(m=m.substring(l[0].length))!=="";)if((l=e.key_access.exec(m))!==null)f.push(l[1]);else if((l=e.index_access.exec(m))!==null)f.push(l[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");b[2]=f}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(b[0].length)}return r[s]=g}typeof T<"u"&&(T.sprintf=a,T.vsprintf=i),typeof window<"u"&&(window.sprintf=a,window.vsprintf=i)})()},{}],302:[function(c,A,T){A.exports=s;var e=c("ndarray-extract-contour"),a=c("zero-crossings"),i={"2d":function(o,b,g){var d=o({order:b,scalarArguments:3,getters:g==="generic"?[0]:void 0,phase:function(m,l,x,u){return m>u|0},vertex:function(m,l,x,u,M,w,p,_,h,L,E,S,P){var F=(p<<0)+(_<<1)+(h<<2)+(L<<3)|0;if(!(F===0||F===15))switch(F){case 0:E.push([m-.5,l-.5]);break;case 1:E.push([m-.25-.25*(u+x-2*P)/(x-u),l-.25-.25*(M+x-2*P)/(x-M)]);break;case 2:E.push([m-.75-.25*(-u-x+2*P)/(u-x),l-.25-.25*(w+u-2*P)/(u-w)]);break;case 3:E.push([m-.5,l-.5-.5*(M+x+w+u-4*P)/(x-M+u-w)]);break;case 4:E.push([m-.25-.25*(w+M-2*P)/(M-w),l-.75-.25*(-M-x+2*P)/(M-x)]);break;case 5:E.push([m-.5-.5*(u+x+w+M-4*P)/(x-u+M-w),l-.5]);break;case 6:E.push([m-.5-.25*(-u-x+w+M)/(u-x+M-w),l-.5-.25*(-M-x+w+u)/(M-x+u-w)]);break;case 7:E.push([m-.75-.25*(w+M-2*P)/(M-w),l-.75-.25*(w+u-2*P)/(u-w)]);break;case 8:E.push([m-.75-.25*(-w-M+2*P)/(w-M),l-.75-.25*(-w-u+2*P)/(w-u)]);break;case 9:E.push([m-.5-.25*(u+x+-w-M)/(x-u+w-M),l-.5-.25*(M+x+-w-u)/(x-M+w-u)]);break;case 10:E.push([m-.5-.5*(-u-x+-w-M+4*P)/(u-x+w-M),l-.5]);break;case 11:E.push([m-.25-.25*(-w-M+2*P)/(w-M),l-.75-.25*(M+x-2*P)/(x-M)]);break;case 12:E.push([m-.5,l-.5-.5*(-M-x+-w-u+4*P)/(M-x+w-u)]);break;case 13:E.push([m-.75-.25*(u+x-2*P)/(x-u),l-.25-.25*(-w-u+2*P)/(w-u)]);break;case 14:E.push([m-.25-.25*(-u-x+2*P)/(u-x),l-.25-.25*(-M-x+2*P)/(M-x)]);break;case 15:E.push([m-.5,l-.5]);break}},cell:function(m,l,x,u,M,w,p,_,h){M?_.push([m,l]):_.push([l,m])}});return function(f,m){var l=[],x=[];return d(f,l,x,m),{positions:l,cells:x}}}};function n(o,b){var g=o.length+"d",d=i[g];if(d)return d(e,o,b)}function r(o,b){for(var g=a(o,b),d=g.length,f=new Array(d),m=new Array(d),l=0;l<d;++l)f[l]=[g[l]],m[l]=[l];return{positions:f,cells:m}}var v={};function s(o,f){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return r(o,f);var g=o.order.join()+"-"+o.dtype,d=v[g],f=+f||0;return d||(d=v[g]=n(o.order,o.dtype)),d(o,f)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(c,A,T){(function(e){(function(){A.exports=v;var a=c("vectorize-text"),i=window||e.global||{},n=i.__TEXT_CACHE||{};i.__TEXT_CACHE={};function r(s){for(var o=s.cells,b=s.positions,g=new Float32Array(o.length*6),d=0,f=0,m=0;m<o.length;++m)for(var l=o[m],x=0;x<3;++x){var u=b[l[x]];g[d++]=u[0],g[d++]=u[1]+1.4,f=Math.max(u[0],f)}return{data:g,shape:f}}function v(s,o,g){var g=g||{},d=n[s];d||(d=n[s]={" ":{data:new Float32Array(0),shape:.2}});var f=d[o];if(!f)if(o.length<=1||!/\d/.test(o))f=d[o]=r(a(o,{triangles:!0,font:s,textAlign:g.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=o.split(/(\d|\s)/),l=new Array(m.length),x=0,u=0,M=0;M<m.length;++M)l[M]=v(s,m[M]),x+=l[M].data.length,u+=l[M].shape,M>0&&(u+=.02);for(var w=new Float32Array(x),p=0,_=-.5*u,M=0;M<l.length;++M){for(var h=l[M].data,L=0;L<h.length;L+=2)w[p++]=h[L]+_,w[p++]=h[L+1];_+=l[M].shape+.02}f=d[o]={data:w,shape:u}}return f}}).call(this)}).call(this,c("_process"))},{_process:5,"vectorize-text":311}],304:[function(c,A,T){var e=c("parse-unit");A.exports=r;var a=96;function i(v,s){var o=e(getComputedStyle(v).getPropertyValue(s));return o[0]*r(o[1],v)}function n(v,s){var o=document.createElement("div");o.style["font-size"]="128"+v,s.appendChild(o);var b=i(o,"font-size")/128;return s.removeChild(o),b}function r(v,s){switch(s=s||document.body,v=(v||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),v){case"%":return s.clientHeight/100;case"ch":case"ex":return n(v,s);case"em":return i(s,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(c,A,T){A.exports=m;var e=c("filtered-vector"),a=c("gl-mat4/invert"),i=c("gl-mat4/rotate"),n=c("gl-vec3/cross"),r=c("gl-vec3/normalize"),v=c("gl-vec3/dot");function s(l,x,u){return Math.sqrt(Math.pow(l,2)+Math.pow(x,2)+Math.pow(u,2))}function o(l){return Math.min(1,Math.max(-1,l))}function b(l){var x=Math.abs(l[0]),u=Math.abs(l[1]),M=Math.abs(l[2]),w=[0,0,0];x>Math.max(u,M)?w[2]=1:u>Math.max(x,M)?w[0]=1:w[1]=1;for(var p=0,_=0,h=0;h<3;++h)p+=l[h]*l[h],_+=w[h]*l[h];for(var h=0;h<3;++h)w[h]-=_/p*l[h];return r(w,w),w}function g(l,x,u,M,w,p,_,h){this.center=e(u),this.up=e(M),this.right=e(w),this.radius=e([p]),this.angle=e([_,h]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(l,x),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var d=g.prototype;d.setDistanceLimits=function(l,x){l>0?l=Math.log(l):l=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=x},d.getDistanceLimits=function(l){var x=this.radius.bounds[0];return l?(l[0]=Math.exp(x[0][0]),l[1]=Math.exp(x[1][0]),l):[Math.exp(x[0][0]),Math.exp(x[1][0])]},d.recalcMatrix=function(l){this.center.curve(l),this.up.curve(l),this.right.curve(l),this.radius.curve(l),this.angle.curve(l);for(var x=this.computedUp,u=this.computedRight,M=0,w=0,p=0;p<3;++p)w+=x[p]*u[p],M+=x[p]*x[p];for(var _=Math.sqrt(M),h=0,p=0;p<3;++p)u[p]-=x[p]*w/M,h+=u[p]*u[p],x[p]/=_;for(var L=Math.sqrt(h),p=0;p<3;++p)u[p]/=L;var E=this.computedToward;n(E,x,u),r(E,E);for(var S=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],F=this.computedAngle[1],I=Math.cos(P),D=Math.sin(P),R=Math.cos(F),O=Math.sin(F),z=this.computedCenter,G=I*R,Y=D*R,ee=O,j=-I*O,X=-D*O,ae=R,he=this.computedEye,K=this.computedMatrix,p=0;p<3;++p){var J=G*u[p]+Y*E[p]+ee*x[p];K[4*p+1]=j*u[p]+X*E[p]+ae*x[p],K[4*p+2]=J,K[4*p+3]=0}var U=K[1],H=K[5],q=K[9],re=K[2],Z=K[6],Q=K[10],ie=H*Q-q*Z,oe=q*re-U*Q,ne=U*Z-H*re,le=s(ie,oe,ne);ie/=le,oe/=le,ne/=le,K[0]=ie,K[4]=oe,K[8]=ne;for(var p=0;p<3;++p)he[p]=z[p]+K[2+4*p]*S;for(var p=0;p<3;++p){for(var h=0,_e=0;_e<3;++_e)h+=K[p+4*_e]*he[_e];K[12+p]=-h}K[15]=1},d.getMatrix=function(l,x){this.recalcMatrix(l);var u=this.computedMatrix;if(x){for(var M=0;M<16;++M)x[M]=u[M];return x}return u};var f=[0,0,0];d.rotate=function(l,x,u,M){if(this.angle.move(l,x,u),M){this.recalcMatrix(l);var w=this.computedMatrix;f[0]=w[2],f[1]=w[6],f[2]=w[10];for(var p=this.computedUp,_=this.computedRight,h=this.computedToward,L=0;L<3;++L)w[4*L]=p[L],w[4*L+1]=_[L],w[4*L+2]=h[L];i(w,w,M,f);for(var L=0;L<3;++L)p[L]=w[4*L],_[L]=w[4*L+1];this.up.set(l,p[0],p[1],p[2]),this.right.set(l,_[0],_[1],_[2])}},d.pan=function(l,x,u,M){x=x||0,u=u||0,M=M||0,this.recalcMatrix(l);var w=this.computedMatrix;Math.exp(this.computedRadius[0]);var p=w[1],_=w[5],h=w[9],L=s(p,_,h);p/=L,_/=L,h/=L;var E=w[0],S=w[4],P=w[8],F=E*p+S*_+P*h;E-=p*F,S-=_*F,P-=h*F;var I=s(E,S,P);E/=I,S/=I,P/=I;var D=E*x+p*u,R=S*x+_*u,O=P*x+h*u;this.center.move(l,D,R,O);var z=Math.exp(this.computedRadius[0]);z=Math.max(1e-4,z+M),this.radius.set(l,Math.log(z))},d.translate=function(l,x,u,M){this.center.move(l,x||0,u||0,M||0)},d.setMatrix=function(l,x,u,M){var w=1;typeof u=="number"&&(w=u|0),(w<0||w>3)&&(w=1);var p=(w+2)%3;x||(this.recalcMatrix(l),x=this.computedMatrix);var _=x[w],h=x[w+4],L=x[w+8];if(M){var S=Math.abs(_),P=Math.abs(h),F=Math.abs(L),I=Math.max(S,P,F);S===I?(_=_<0?-1:1,h=L=0):F===I?(L=L<0?-1:1,_=h=0):(h=h<0?-1:1,_=L=0)}else{var E=s(_,h,L);_/=E,h/=E,L/=E}var D=x[p],R=x[p+4],O=x[p+8],z=D*_+R*h+O*L;D-=_*z,R-=h*z,O-=L*z;var G=s(D,R,O);D/=G,R/=G,O/=G;var Y=h*O-L*R,ee=L*D-_*O,j=_*R-h*D,X=s(Y,ee,j);Y/=X,ee/=X,j/=X,this.center.jump(l,me,be,ke),this.radius.idle(l),this.up.jump(l,_,h,L),this.right.jump(l,D,R,O);var ae,he;if(w===2){var K=x[1],J=x[5],U=x[9],H=K*D+J*R+U*O,q=K*Y+J*ee+U*j;ie<0?ae=-Math.PI/2:ae=Math.PI/2,he=Math.atan2(q,H)}else{var re=x[2],Z=x[6],Q=x[10],ie=re*_+Z*h+Q*L,oe=re*D+Z*R+Q*O,ne=re*Y+Z*ee+Q*j;ae=Math.asin(o(ie)),he=Math.atan2(ne,oe)}this.angle.jump(l,he,ae),this.recalcMatrix(l);var le=x[2],_e=x[6],fe=x[10],ye=this.computedMatrix;a(ye,x);var xe=ye[15],me=ye[12]/xe,be=ye[13]/xe,ke=ye[14]/xe,De=Math.exp(this.computedRadius[0]);this.center.jump(l,me-le*De,be-_e*De,ke-fe*De)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(l){this.center.idle(l),this.up.idle(l),this.right.idle(l),this.radius.idle(l),this.angle.idle(l)},d.flush=function(l){this.center.flush(l),this.up.flush(l),this.right.flush(l),this.radius.flush(l),this.angle.flush(l)},d.setDistance=function(l,x){x>0&&this.radius.set(l,Math.log(x))},d.lookAt=function(l,x,u,M){this.recalcMatrix(l),x=x||this.computedEye,u=u||this.computedCenter,M=M||this.computedUp;var w=M[0],p=M[1],_=M[2],h=s(w,p,_);if(!(h<1e-6)){w/=h,p/=h,_/=h;var L=x[0]-u[0],E=x[1]-u[1],S=x[2]-u[2],P=s(L,E,S);if(!(P<1e-6)){L/=P,E/=P,S/=P;var F=this.computedRight,I=F[0],D=F[1],R=F[2],O=w*I+p*D+_*R;I-=O*w,D-=O*p,R-=O*_;var z=s(I,D,R);if(!(z<.01&&(I=p*S-_*E,D=_*L-w*S,R=w*E-p*L,z=s(I,D,R),z<1e-6))){I/=z,D/=z,R/=z,this.up.set(l,w,p,_),this.right.set(l,I,D,R),this.center.set(l,u[0],u[1],u[2]),this.radius.set(l,Math.log(P));var G=p*R-_*D,Y=_*I-w*R,ee=w*D-p*I,j=s(G,Y,ee);G/=j,Y/=j,ee/=j;var X=w*L+p*E+_*S,ae=I*L+D*E+R*S,he=G*L+Y*E+ee*S,K=Math.asin(o(X)),J=Math.atan2(he,ae),U=this.angle._state,H=U[U.length-1],q=U[U.length-2];H=H%(2*Math.PI);var re=Math.abs(H+2*Math.PI-J),Z=Math.abs(H-J),Q=Math.abs(H-2*Math.PI-J);re<Z&&(H+=2*Math.PI),Q<Z&&(H-=2*Math.PI),this.angle.jump(this.angle.lastT(),H,q),this.angle.set(l,J,K)}}}};function m(l){l=l||{};var x=l.center||[0,0,0],u=l.up||[0,1,0],M=l.right||b(u),w=l.radius||1,p=l.theta||0,_=l.phi||0;if(x=[].slice.call(x,0,3),u=[].slice.call(u,0,3),r(u,u),M=[].slice.call(M,0,3),r(M,M),"eye"in l){var h=l.eye,L=[h[0]-x[0],h[1]-x[1],h[2]-x[2]];n(M,L,u),s(M[0],M[1],M[2])<1e-6?M=b(u):r(M,M),w=s(L[0],L[1],L[2]);var E=v(u,L)/w,S=v(M,L)/w;_=Math.acos(E),p=Math.acos(S)}return w=Math.log(w),new g(l.zoomMin,l.zoomMax,x,u,M,w,p,_)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(c,A,T){A.exports=a;var e=+(Math.pow(2,27)+1);function a(i,n,r){var v=i*n,s=e*i,o=s-i,b=s-o,g=i-b,d=e*n,f=d-n,m=d-f,l=n-m,x=v-b*m,u=x-g*m,M=u-b*l,w=g*l-M;return r?(r[0]=w,r[1]=v,r):[w,v]}},{}],307:[function(c,A,T){A.exports=e;function e(a,i,n){var r=a+i,v=r-a,s=r-v,o=i-v,b=a-s;return n?(n[0]=b+o,n[1]=r,n):[b+o,r]}},{}],308:[function(c,A,T){(function(e){(function(){var a=c("bit-twiddle"),i=c("dup"),n=c("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var r=typeof Uint8ClampedArray<"u",v=typeof BigUint64Array<"u",s=typeof BigInt64Array<"u",o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=i([32,0])),o.BIGUINT64||(o.BIGUINT64=i([32,0])),o.BIGINT64||(o.BIGINT64=i([32,0])),o.BUFFER||(o.BUFFER=i([32,0]));var b=o.DATA,g=o.BUFFER;T.free=function(D){if(n.isBuffer(D))g[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,O=a.log2(R)|0;b[O].push(D)}};function d(I){if(!!I){var D=I.length||I.byteLength,R=a.log2(D);b[R].push(I)}}function f(I){d(I.buffer)}T.freeUint8=T.freeUint16=T.freeUint32=T.freeBigUint64=T.freeInt8=T.freeInt16=T.freeInt32=T.freeBigInt64=T.freeFloat32=T.freeFloat=T.freeFloat64=T.freeDouble=T.freeUint8Clamped=T.freeDataView=f,T.freeArrayBuffer=d,T.freeBuffer=function(D){g[a.log2(D.length)].push(D)},T.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return m(D);switch(R){case"uint8":return l(D);case"uint16":return x(D);case"uint32":return u(D);case"int8":return M(D);case"int16":return w(D);case"int32":return p(D);case"float":case"float32":return _(D);case"double":case"float64":return h(D);case"uint8_clamped":return L(D);case"bigint64":return S(D);case"biguint64":return E(D);case"buffer":return F(D);case"data":case"dataview":return P(D);default:return null}return null};function m(D){var D=a.nextPow2(D),R=a.log2(D),O=b[R];return O.length>0?O.pop():new ArrayBuffer(D)}T.mallocArrayBuffer=m;function l(I){return new Uint8Array(m(I),0,I)}T.mallocUint8=l;function x(I){return new Uint16Array(m(2*I),0,I)}T.mallocUint16=x;function u(I){return new Uint32Array(m(4*I),0,I)}T.mallocUint32=u;function M(I){return new Int8Array(m(I),0,I)}T.mallocInt8=M;function w(I){return new Int16Array(m(2*I),0,I)}T.mallocInt16=w;function p(I){return new Int32Array(m(4*I),0,I)}T.mallocInt32=p;function _(I){return new Float32Array(m(4*I),0,I)}T.mallocFloat32=T.mallocFloat=_;function h(I){return new Float64Array(m(8*I),0,I)}T.mallocFloat64=T.mallocDouble=h;function L(I){return r?new Uint8ClampedArray(m(I),0,I):l(I)}T.mallocUint8Clamped=L;function E(I){return v?new BigUint64Array(m(8*I),0,I):null}T.mallocBigUint64=E;function S(I){return s?new BigInt64Array(m(8*I),0,I):null}T.mallocBigInt64=S;function P(I){return new DataView(m(I),0,I)}T.mallocDataView=P;function F(I){I=a.nextPow2(I);var D=a.log2(I),R=g[D];return R.length>0?R.pop():new n(I)}T.mallocBuffer=F,T.clearCache=function(){for(var D=0;D<32;++D)o.UINT8[D].length=0,o.UINT16[D].length=0,o.UINT32[D].length=0,o.INT8[D].length=0,o.INT16[D].length=0,o.INT32[D].length=0,o.FLOAT[D].length=0,o.DOUBLE[D].length=0,o.BIGUINT64[D].length=0,o.BIGINT64[D].length=0,o.UINT8C[D].length=0,b[D].length=0,g[D].length=0}}).call(this)}).call(this,typeof y<"u"?y:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(c,A,T){A.exports=e;function e(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}var a=e.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},a.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var v=r[n];r[n]=i,n=v}return i},a.link=function(i,n){var r=this.find(i),v=this.find(n);if(r!==v){var s=this.ranks,o=this.roots,b=s[r],g=s[v];b<g?o[r]=v:g<b?o[v]=r:(o[v]=r,++s[r])}}},{}],310:[function(c,A,T){function e(n,r){for(var v=1,s=n.length,o=n[0],b=n[0],g=1;g<s;++g)if(b=o,o=n[g],r(o,b)){if(g===v){v++;continue}n[v++]=o}return n.length=v,n}function a(n){for(var r=1,v=n.length,s=n[0],o=n[0],b=1;b<v;++b,o=s)if(o=s,s=n[b],s!==o){if(b===r){r++;continue}n[r++]=s}return n.length=r,n}function i(n,r,v){return n.length===0?n:r?(v||n.sort(r),e(n,r)):(v||n.sort(),a(n))}A.exports=i},{}],311:[function(c,A,T){A.exports=n;var e=c("./lib/vtext"),a=null,i=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,i=a.getContext("2d"));function n(r,v){return(typeof v!="object"||v===null)&&(v={}),e(r,v.canvas||a,v.context||i,v)}},{"./lib/vtext":312}],312:[function(c,A,T){A.exports=E,A.exports.processPixels=L;var e=c("surface-nets"),a=c("ndarray"),i=c("simplify-planar-graph"),n=c("clean-pslg"),r=c("cdt2d"),v=c("planar-graph-to-polyline"),s="b",o="b|",b="i",g="i|",d="sup",f="+",m="+1",l="sub",x="-",u="-1";function M(S,P,F,I){for(var D="<"+S+">",R="</"+S+">",O=D.length,z=R.length,G=P[0]===f||P[0]===x,Y=0,ee=-z;Y>-1&&(Y=F.indexOf(D,Y),!(Y===-1||(ee=F.indexOf(R,Y+O),ee===-1)||ee<=Y));){for(var j=Y;j<ee+z;++j)if(j<Y+O||j>=ee)I[j]=null,F=F.substr(0,j)+" "+F.substr(j+1);else if(I[j]!==null){var X=I[j].indexOf(P[0]);X===-1?I[j]+=P:G&&(I[j]=I[j].substr(0,X+1)+(1+parseInt(I[j][X+1]))+I[j].substr(X+2))}var ae=Y+O,he=F.substr(ae,ee-ae),K=he.indexOf(D);K!==-1?Y=K:Y=ee+z}return I}function w(S,P,F){for(var I=P.textAlign||"start",D=P.textBaseline||"alphabetic",R=[1<<30,1<<30],O=[0,0],z=S.length,G=0;G<z;++G)for(var Y=S[G],ee=0;ee<2;++ee)R[ee]=Math.min(R[ee],Y[ee])|0,O[ee]=Math.max(O[ee],Y[ee])|0;var j=0;switch(I){case"center":j=-.5*(R[0]+O[0]);break;case"right":case"end":j=-O[0];break;case"left":case"start":j=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var X=0;switch(D){case"hanging":case"top":X=-R[1];break;case"middle":X=-.5*(R[1]+O[1]);break;case"alphabetic":case"ideographic":X=-3*F;break;case"bottom":X=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var ae=1/F;return"lineHeight"in P?ae*=+P.lineHeight:"width"in P?ae=P.width/(O[0]-R[0]):"height"in P&&(ae=P.height/(O[1]-R[1])),S.map(function(he){return[ae*(he[0]+j),ae*(he[1]+X)]})}function p(S,P,F,I,D,R){F=F.replace(/\n/g,""),R.breaklines===!0?F=F.replace(/\<br\>/g,`
`):F=F.replace(/\<br\>/g," ");var O="",z=[];for(H=0;H<F.length;++H)z[H]=O;R.bolds===!0&&(z=M(s,o,F,z)),R.italics===!0&&(z=M(b,g,F,z)),R.superscripts===!0&&(z=M(d,m,F,z)),R.subscripts===!0&&(z=M(l,u,F,z));var G=[],Y="";for(H=0;H<F.length;++H)z[H]!==null&&(Y+=F[H],G.push(z[H]));var ee=Y.split(`
`),j=ee.length,X=Math.round(D*I),ae=I,he=I*2,K=0,J=j*X+he;S.height<J&&(S.height=J),P.fillStyle="#000",P.fillRect(0,0,S.width,S.height),P.fillStyle="#fff";var U,H,q,re,Z,Q=0,ie="";function oe(){if(ie!==""){var ke=P.measureText(ie).width;P.fillText(ie,ae+q,he+re),q+=ke}}function ne(){return""+Math.round(Z)+"px "}function le(ke,De){var He=""+P.font;if(R.subscripts===!0){var Ae=ke.indexOf(x),Le=De.indexOf(x),Ze=Ae>-1?parseInt(ke[1+Ae]):0,We=Le>-1?parseInt(De[1+Le]):0;Ze!==We&&(He=He.replace(ne(),"?px "),Z*=Math.pow(.75,We-Ze),He=He.replace("?px ",ne())),re+=.25*X*(We-Ze)}if(R.superscripts===!0){var ze=ke.indexOf(f),Ie=De.indexOf(f),Ve=ze>-1?parseInt(ke[1+ze]):0,dt=Ie>-1?parseInt(De[1+Ie]):0;Ve!==dt&&(He=He.replace(ne(),"?px "),Z*=Math.pow(.75,dt-Ve),He=He.replace("?px ",ne())),re-=.25*X*(dt-Ve)}if(R.bolds===!0){var Ft=ke.indexOf(o)>-1,Qt=De.indexOf(o)>-1;!Ft&&Qt&&(Ot?He=He.replace("italic ","italic bold "):He="bold "+He),Ft&&!Qt&&(He=He.replace("bold ",""))}if(R.italics===!0){var Ot=ke.indexOf(g)>-1,Ct=De.indexOf(g)>-1;!Ot&&Ct&&(He="italic "+He),Ot&&!Ct&&(He=He.replace("italic ",""))}P.font=He}for(U=0;U<j;++U){var _e=ee[U]+`
`;for(q=0,re=U*X,Z=I,ie="",H=0;H<_e.length;++H){var fe=H+Q<G.length?G[H+Q]:G[G.length-1];O===fe?ie+=_e[H]:(oe(),ie=_e[H],fe!==void 0&&(le(O,fe),O=fe))}oe(),Q+=_e.length;var ye=Math.round(q+2*ae)|0;K<ye&&(K=ye)}var xe=K,me=he+X*j,be=a(P.getImageData(0,0,xe,me).data,[me,xe,4]);return be.pick(-1,-1,0).transpose(1,0)}function _(S,P){var F=e(S,128);return P?i(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function h(S,P,F,I){var D=_(S,I),R=w(D.positions,P,F),O=D.edges,z=P.orientation==="ccw";if(n(R,O),P.polygons||P.polygon||P.polyline){for(var G=v(O,R),Y=new Array(G.length),ee=0;ee<G.length;++ee){for(var j=G[ee],X=new Array(j.length),ae=0;ae<j.length;++ae){for(var he=j[ae],K=new Array(he.length),J=0;J<he.length;++J)K[J]=R[he[J]].slice();z&&K.reverse(),X[ae]=K}Y[ee]=X}return Y}else return P.triangles||P.triangulate||P.triangle?{cells:r(R,O,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:O,positions:R}}function L(S,P,F){try{return h(S,P,F,!0)}catch{}try{return h(S,P,F,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function E(S,P,F,I){var D=64,R=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(D=I.size),I.lineSpacing&&I.lineSpacing>0&&(R=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(O.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(O.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(O.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(O.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(O.superscripts=!!I.styletags.superscripts)),F.font=[I.fontStyle,I.fontVariant,I.fontWeight,D+"px",I.font].filter(function(G){return G}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr";var z=p(P,F,S,D,R,O);return L(z,I,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(c,A,T){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(L){L.permitHostObjects___&&L.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var i=!1;if(typeof WeakMap=="function"){var n=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var r=new n,v=Object.freeze({});if(r.set(v,1),r.get(v)!==1)i=!0;else{A.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,o=Object.defineProperty,b=Object.isExtensible,g="weakmap:",d=g+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var f=new ArrayBuffer(25),m=new Uint8Array(f);crypto.getRandomValues(m),d=g+"rand:"+Array.prototype.map.call(m,function(L){return(L%36).toString(36)}).join("")+"___"}function l(L){return!(L.substr(0,g.length)==g&&L.substr(L.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(E){return s(E).filter(l)}}),"getPropertyNames"in Object){var x=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(E){return x(E).filter(l)}})}function u(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var E=L[d];if(E&&E.key===L)return E;if(!!b(L)){E={key:L};try{return o(L,d,{value:E,writable:!1,enumerable:!1,configurable:!1}),E}catch{return}}}(function(){var L=Object.freeze;o(Object,"freeze",{value:function(F){return u(F),L(F)}});var E=Object.seal;o(Object,"seal",{value:function(F){return u(F),E(F)}});var S=Object.preventExtensions;o(Object,"preventExtensions",{value:function(F){return u(F),S(F)}})})();function M(L){return L.prototype=null,Object.freeze(L)}var w=!1;function p(){!w&&typeof console<"u"&&(w=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var _=0,h=function(){this instanceof h||p();var L=[],E=[],S=_++;function P(R,O){var z,G=u(R);return G?S in G?G[S]:O:(z=L.indexOf(R),z>=0?E[z]:O)}function F(R){var O=u(R);return O?S in O:L.indexOf(R)>=0}function I(R,O){var z,G=u(R);return G?G[S]=O:(z=L.indexOf(R),z>=0?E[z]=O:(z=L.length,E[z]=O,L[z]=R)),this}function D(R){var O=u(R),z,G;return O?S in O&&delete O[S]:(z=L.indexOf(R),z<0?!1:(G=L.length-1,L[z]=void 0,E[z]=E[G],L[z]=L[G],L.length=G,E.length=G,!0))}return Object.create(h.prototype,{get___:{value:M(P)},has___:{value:M(F)},set___:{value:M(I)},delete___:{value:M(D)}})};h.prototype=Object.create(Object.prototype,{get:{value:function(E,S){return this.get___(E,S)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,S){return this.set___(E,S)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof n=="function"?function(){i&&typeof Proxy<"u"&&(Proxy=void 0);function L(){this instanceof h||p();var E=new n,S=void 0,P=!1;function F(O,z){return S?E.has(O)?E.get(O):S.get___(O,z):E.get(O,z)}function I(O){return E.has(O)||(S?S.has___(O):!1)}var D;i?D=function(O,z){return E.set(O,z),E.has(O)||(S||(S=new h),S.set(O,z)),this}:D=function(O,z){if(P)try{E.set(O,z)}catch{S||(S=new h),S.set___(O,z)}else E.set(O,z);return this};function R(O){var z=!!E.delete(O);return S&&S.delete___(O)||z}return Object.create(h.prototype,{get___:{value:M(F)},has___:{value:M(I)},set___:{value:M(D)},delete___:{value:M(R)},permitHostObjects___:{value:M(function(O){if(O===a)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=h.prototype,A.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),A.exports=h)})()},{}],314:[function(c,A,T){var e=c("./hidden-store.js");A.exports=a;function a(){var i={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var r=n.valueOf(i);return r&&r.identity===i?r:e(n,i)}}},{"./hidden-store.js":315}],315:[function(c,A,T){A.exports=e;function e(a,i){var n={identity:i},r=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(v){return v!==i?r.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(c,A,T){var e=c("./create-store.js");A.exports=a;function a(){var i=e();return{get:function(n,r){var v=i(n);return v.hasOwnProperty("value")?v.value:r},set:function(n,r){return i(n).value=r,this},has:function(n){return"value"in i(n)},delete:function(n){return delete i(n).value}}}},{"./create-store.js":314}],317:[function(c,A,T){function e(){return function(s,o,b,g,d,f){var m=s[0],l=b[0],x=[0],u=l;g|=0;var M=0,w=l;for(M=0;M<m;++M){{var p=o[g]-f,_=o[g+u]-f;p>=0!=_>=0&&d.push(x[0]+.5+.5*(p+_)/(p-_))}g+=w,++x[0]}}}function a(){return e()}var i=a;function n(s){var o={};return function(g,d,f){var m=g.dtype,l=g.order,x=[m,l.join()].join(),u=o[x];return u||(o[x]=u=s([m,l])),u(g.shape.slice(0),g.data,g.stride,g.offset|0,d,f)}}function r(s){return n(i.bind(void 0,s))}function v(s){return r({funcName:s.funcName})}A.exports=v({funcName:"zeroCrossings"})},{}],318:[function(c,A,T){A.exports=a;var e=c("./lib/zc-core");function a(i,n){var r=[];return n=+n||0,e(i.hi(i.shape[0]-1),r,n),r}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Uo<"u"?Uo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})})(Nx);const Ym=gA(Nx.exports),mA=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function xA(se){return mA.test(se)}function Bx(){var se=URL.createObjectURL(new Blob),ue=se.toString();return URL.revokeObjectURL(se),ue.split(/[:\/]/g).pop().toLowerCase()}Bx.valid=xA;function bA(se){if(!se.ok)throw new Error(se.status+" "+se.statusText);if(!(se.status===204||se.status===205))return se.json()}function _A(se,ue){return fetch(se,ue).then(bA)}function Xh(se,ue,t){this.k=se,this.x=ue,this.y=t}Xh.prototype={constructor:Xh,scale:function(se){return se===1?this:new Xh(this.k*se,this.x,this.y)},translate:function(se,ue){return se===0&ue===0?this:new Xh(this.k,this.x+this.k*se,this.y+this.k*ue)},apply:function(se){return[se[0]*this.k+this.x,se[1]*this.k+this.y]},applyX:function(se){return se*this.k+this.x},applyY:function(se){return se*this.k+this.y},invert:function(se){return[(se[0]-this.x)/this.k,(se[1]-this.y)/this.k]},invertX:function(se){return(se-this.x)/this.k},invertY:function(se){return(se-this.y)/this.k},rescaleX:function(se){return se.copy().domain(se.range().map(this.invertX,this).map(se.invert,se))},rescaleY:function(se){return se.copy().domain(se.range().map(this.invertY,this).map(se.invert,se))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Xh(1,0,0);Xh.prototype;const Cg=dA("counter",()=>{const se=Af([]),ue=Af({}),t=Af({}),N=Af([]);se.value=Wm(),ue.value={displayModeBar:!0},t.value={margin:{l:20,r:20,t:30,b:20}};function V(){se.value=Wm()}(async()=>{const c=await _A("https://api.exchangerate.host/latest");N.value=Object.keys(c.rates)})();function y(c){var A=se.value;c=="pie"&&(A=[{values:se.value[0].y,labels:se.value[0].x,type:c,sort:!1}]);const T=ue.value,e=t.value;return{data:JSON.parse(JSON.stringify(A)),config:JSON.parse(JSON.stringify(T)),layout:JSON.parse(JSON.stringify(e))}}return{data:se,config:ue,layout:t,changeData:V,getData:y,currencies:N}});function Wm(){return[{x:[1,2,3,4],y:[10+Math.random(),15+Math.random(),13+Math.random(),27*Math.random()],type:"scatter"}]}const wA=["id"],TA={__name:"PlotlyEx",props:["type","fill","hole"],setup(se){const ue=se,t=Cg();ud({get(){return this.debouncedHeight},set(c){this.heightTimeout&&clearTimeout(this.heightTimeout),this.heightTimeout=setTimeout(()=>{this.debouncedHeight=c},1e3)}}),ud({get(){return this.debouncedWidth},set(c){this.widthTimeout&&clearTimeout(this.widthTimeout),this.widthTimeout=setTimeout(()=>{this.debouncedWidth=c},1e3)}});function N(c=!0){const A=y();c?Ym.newPlot(V,A.data,A.layout,A.config):Ym.react(V,A.data,A.layout,A.config)}const V=Bx();Ag(()=>{window.removeEventListener("resize",N)}),Tg(()=>{window.addEventListener("resize",N),N()}),t.$subscribe((c,A)=>{N(!1)});function y(){const c=t.getData(ue.type);return c.data[0].type=ue.type,c.data[0].fill=ue.fill,ue.hole&&(c.data[0].hole=ue.hole),ue.type=="bubble"&&(c.data[0].mode="markers",c.data[0].marker={size:c.data[0].y}),c}return(c,A)=>(Ls(),au("div",{id:ad(V)},null,8,wA))}};var AA=Object.defineProperty,MA=Object.defineProperties,EA=Object.getOwnPropertyDescriptors,Xm=Object.getOwnPropertySymbols,SA=Object.prototype.hasOwnProperty,kA=Object.prototype.propertyIsEnumerable,jm=(se,ue,t)=>ue in se?AA(se,ue,{enumerable:!0,configurable:!0,writable:!0,value:t}):se[ue]=t,Uh=(se,ue)=>{for(var t in ue||(ue={}))SA.call(ue,t)&&jm(se,t,ue[t]);if(Xm)for(var t of Xm(ue))kA.call(ue,t)&&jm(se,t,ue[t]);return se},Zm=(se,ue)=>MA(se,EA(ue));const CA={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(se){this.autoscroll&&se&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var se;const ue=((se=this.$refs.dropdownMenu)==null?void 0:se.children[this.typeAheadPointer])||!1;if(ue){const t=this.getDropdownViewport(),{top:N,bottom:V,height:y}=ue.getBoundingClientRect();if(N<t.top)return this.$refs.dropdownMenu.scrollTop=ue.offsetTop;if(V>t.bottom)return this.$refs.dropdownMenu.scrollTop=ue.offsetTop-(t.height-y)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},LA={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let se=0;se<this.filteredOptions.length;se++)if(this.selectable(this.filteredOptions[se])){this.typeAheadPointer=se;break}},open(se){se&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let se=this.typeAheadPointer-1;se>=0;se--)if(this.selectable(this.filteredOptions[se])){this.typeAheadPointer=se;break}},typeAheadDown(){for(let se=this.typeAheadPointer+1;se<this.filteredOptions.length;se++)if(this.selectable(this.filteredOptions[se])){this.typeAheadPointer=se;break}},typeAheadSelect(){const se=this.filteredOptions[this.typeAheadPointer];se&&this.selectable(se)&&this.select(se)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},PA={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(se){this.mutableLoading=se}},methods:{toggleLoading(se=null){return se==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=se}}},Lg=(se,ue)=>{const t=se.__vccOpts||se;for(const[N,V]of ue)t[N]=V;return t},DA={},RA={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},IA=fl("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),FA=[IA];function zA(se,ue){return Ls(),au("svg",RA,FA)}const OA=Lg(DA,[["render",zA]]),NA={},BA={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},UA=fl("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),VA=[UA];function HA(se,ue){return Ls(),au("svg",BA,VA)}const GA=Lg(NA,[["render",HA]]),Km={Deselect:OA,OpenIndicator:GA},YA={mounted(se,{instance:ue}){if(ue.appendToBody){const{height:t,top:N,left:V,width:y}=ue.$refs.toggle.getBoundingClientRect();let c=window.scrollX||window.pageXOffset,A=window.scrollY||window.pageYOffset;se.unbindPosition=ue.calculatePosition(se,ue,{width:y+"px",left:c+V+"px",top:A+N+t+"px"}),document.body.appendChild(se)}},unmounted(se,{instance:ue}){ue.appendToBody&&(se.unbindPosition&&typeof se.unbindPosition=="function"&&se.unbindPosition(),se.parentNode&&se.parentNode.removeChild(se))}};function WA(se){const ue={};return Object.keys(se).sort().forEach(t=>{ue[t]=se[t]}),JSON.stringify(ue)}let XA=0;function jA(){return++XA}const ZA={components:Uh({},Km),directives:{appendToBody:YA},mixins:[CA,LA,PA],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:se=>se},selectable:{type:Function,default:se=>!0},getOptionLabel:{type:Function,default(se){return typeof se=="object"?se.hasOwnProperty(this.label)?se[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(se)}.
https://vue-select.org/api/props.html#getoptionlabel`):se}},getOptionKey:{type:Function,default(se){if(typeof se!="object")return se;try{return se.hasOwnProperty("id")?se.id:WA(se)}catch(ue){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,se,ue)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(se,ue,t){return(ue||"").toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}},filter:{type:Function,default(se,ue){return se.filter(t=>{let N=this.getOptionLabel(t);return typeof N=="number"&&(N=N.toString()),this.filterBy(t,N,ue)})}},createOption:{type:Function,default(se){return typeof this.optionList[0]=="object"?{[this.label]:se}:se}},resetOnOptionsChange:{default:!1,validator:se=>["function","boolean"].includes(typeof se)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:se,multiple:ue}){return se&&!ue}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(se,ue)=>se},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(se,ue,{width:t,top:N,left:V}){se.style.top=N,se.style.left=V,se.style.width=t}},dropdownShouldOpen:{type:Function,default({noDrop:se,open:ue,mutableLoading:t}){return se?!1:ue&&!t}},uid:{type:[String,Number],default:()=>jA()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let se=this.modelValue;return this.isTrackingValues&&(se=this.$data._value),se!=null&&se!==""?[].concat(se):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const se={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:Uh({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:ue=>this.search=ue.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:se,listFooter:se,header:Zm(Uh({},se),{deselect:this.deselect}),footer:Zm(Uh({},se),{deselect:this.deselect})}},childComponents(){return Uh(Uh({},Km),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const se=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return se;const ue=this.search.length?this.filter(se,this.search,this):se;if(this.taggable&&this.search.length){const t=this.createOption(this.search);this.optionExists(t)||ue.unshift(t)}return ue},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(se,ue){const t=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(se,ue,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&t()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(se){this.isTrackingValues&&this.setInternalValueFromOptions(se)}},multiple(){this.clearSelection()},open(se){this.$emit(se?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(se){Array.isArray(se)?this.$data._value=se.map(ue=>this.findOptionFromReducedValue(ue)):this.$data._value=this.findOptionFromReducedValue(se)},select(se){this.$emit("option:selecting",se),this.isOptionSelected(se)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(se):(this.taggable&&!this.optionExists(se)&&(this.$emit("option:created",se),this.pushTag(se)),this.multiple&&(se=this.selectedValue.concat(se)),this.updateValue(se),this.$emit("option:selected",se)),this.onAfterSelect(se)},deselect(se){this.$emit("option:deselecting",se),this.updateValue(this.selectedValue.filter(ue=>!this.optionComparator(ue,se))),this.$emit("option:deselected",se)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(se){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(se){typeof this.modelValue>"u"&&(this.$data._value=se),se!==null&&(Array.isArray(se)?se=se.map(ue=>this.reduce(ue)):se=this.reduce(se)),this.$emit("update:modelValue",se)},toggleDropdown(se){const ue=se.target!==this.searchEl;ue&&se.preventDefault();const t=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||t.filter(Boolean).some(N=>N.contains(se.target)||N===se.target)){se.preventDefault();return}this.open&&ue?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(se){return this.selectedValue.some(ue=>this.optionComparator(ue,se))},isOptionDeselectable(se){return this.isOptionSelected(se)&&this.deselectFromDropdown},optionComparator(se,ue){return this.getOptionKey(se)===this.getOptionKey(ue)},findOptionFromReducedValue(se){const ue=N=>JSON.stringify(this.reduce(N))===JSON.stringify(se),t=[...this.options,...this.pushedTags].filter(ue);return t.length===1?t[0]:t.find(N=>this.optionComparator(N,this.$data._value))||se},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let se=null;this.multiple&&(se=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(se)}},optionExists(se){return this.optionList.some(ue=>this.optionComparator(ue,se))},normalizeOptionForSlot(se){return typeof se=="object"?se:{[this.label]:se}},pushTag(se){this.pushedTags.push(se)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:se,multiple:ue}=this;this.clearSearchOnBlur({clearSearchOnSelect:se,multiple:ue})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(se){const ue=V=>(V.preventDefault(),!this.isComposing&&this.typeAheadSelect()),t={8:V=>this.maybeDeleteValue(),9:V=>this.onTab(),27:V=>this.onEscape(),38:V=>(V.preventDefault(),this.typeAheadUp()),40:V=>(V.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(V=>t[V]=ue);const N=this.mapKeydown(t,this);if(typeof N[se.keyCode]=="function")return N[se.keyCode](se)}}},KA=["dir"],JA=["id","aria-expanded","aria-owns"],$A={ref:"selectedOptions",class:"vs__selected-options"},QA=["disabled","title","aria-label","onClick"],qA={ref:"actions",class:"vs__actions"},e5=["disabled"],t5={class:"vs__spinner"},r5=["id"],n5=["id","aria-selected","onMouseover","onClick"],a5={key:0,class:"vs__no-options"},i5=ld(" Sorry, no matching options. "),o5=["id"];function s5(se,ue,t,N,V,y){const c=tT("append-to-body");return Ls(),au("div",{dir:t.dir,class:sh(["v-select",y.stateClasses])},[_c(se.$slots,"header",bc(wc(y.scope.header))),fl("div",{id:`vs${t.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":y.dropdownOpen.toString(),"aria-owns":`vs${t.uid}__listbox`,"aria-label":"Search for option",onMousedown:ue[1]||(ue[1]=A=>y.toggleDropdown(A))},[fl("div",$A,[(Ls(!0),au(iu,null,xm(y.selectedValue,(A,T)=>_c(se.$slots,"selected-option-container",{option:y.normalizeOptionForSlot(A),deselect:y.deselect,multiple:t.multiple,disabled:t.disabled},()=>[(Ls(),au("span",{key:t.getOptionKey(A),class:"vs__selected"},[_c(se.$slots,"selected-option",bc(wc(y.normalizeOptionForSlot(A))),()=>[ld(N0(t.getOptionLabel(A)),1)]),t.multiple?(Ls(),au("button",{key:0,ref_for:!0,ref:e=>V.deselectButtons[T]=e,disabled:t.disabled,type:"button",class:"vs__deselect",title:`Deselect ${t.getOptionLabel(A)}`,"aria-label":`Deselect ${t.getOptionLabel(A)}`,onClick:e=>y.deselect(A)},[(Ls(),$h(m0(y.childComponents.Deselect)))],8,QA)):_0("",!0)]))])),256)),_c(se.$slots,"search",bc(wc(y.scope.search)),()=>[fl("input",$0({class:"vs__search"},y.scope.search.attributes,rT(y.scope.search.events)),null,16)])],512),fl("div",qA,[y0(fl("button",{ref:"clearButton",disabled:t.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:ue[0]||(ue[0]=(...A)=>y.clearSelection&&y.clearSelection(...A))},[(Ls(),$h(m0(y.childComponents.Deselect)))],8,e5),[[Vm,y.showClearButton]]),_c(se.$slots,"open-indicator",bc(wc(y.scope.openIndicator)),()=>[t.noDrop?_0("",!0):(Ls(),$h(m0(y.childComponents.OpenIndicator),bc($0({key:0},y.scope.openIndicator.attributes)),null,16))]),_c(se.$slots,"spinner",bc(wc(y.scope.spinner)),()=>[y0(fl("div",t5,"Loading...",512),[[Vm,se.mutableLoading]])])],512)],40,JA),Js(kg,{name:t.transition},{default:lx(()=>[y.dropdownOpen?y0((Ls(),au("ul",{id:`vs${t.uid}__listbox`,ref:"dropdownMenu",key:`vs${t.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:ue[2]||(ue[2]=Um((...A)=>y.onMousedown&&y.onMousedown(...A),["prevent"])),onMouseup:ue[3]||(ue[3]=(...A)=>y.onMouseUp&&y.onMouseUp(...A))},[_c(se.$slots,"list-header",bc(wc(y.scope.listHeader))),(Ls(!0),au(iu,null,xm(y.filteredOptions,(A,T)=>(Ls(),au("li",{id:`vs${t.uid}__option-${T}`,key:t.getOptionKey(A),role:"option",class:sh(["vs__dropdown-option",{"vs__dropdown-option--deselect":y.isOptionDeselectable(A)&&T===se.typeAheadPointer,"vs__dropdown-option--selected":y.isOptionSelected(A),"vs__dropdown-option--highlight":T===se.typeAheadPointer,"vs__dropdown-option--disabled":!t.selectable(A)}]),"aria-selected":T===se.typeAheadPointer?!0:null,onMouseover:e=>t.selectable(A)?se.typeAheadPointer=T:null,onClick:Um(e=>t.selectable(A)?y.select(A):null,["prevent","stop"])},[_c(se.$slots,"option",bc(wc(y.normalizeOptionForSlot(A))),()=>[ld(N0(t.getOptionLabel(A)),1)])],42,n5))),128)),y.filteredOptions.length===0?(Ls(),au("li",a5,[_c(se.$slots,"no-options",bc(wc(y.scope.noOptions)),()=>[i5])])):_0("",!0),_c(se.$slots,"list-footer",bc(wc(y.scope.listFooter)))],40,r5)),[[c]]):(Ls(),au("ul",{key:1,id:`vs${t.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,o5))]),_:3},8,["name"]),_c(se.$slots,"footer",bc(wc(y.scope.footer)))],10,KA)}const l5=Lg(ZA,[["render",s5]]);const u5={style:{"--vs-dropdown-color":"black"}},c5={__name:"DataChanger",setup(se){const ue=Cg();return(t,N)=>(Ls(),au("div",u5,[Js(ad(l5),{options:ad(ue).currencies},null,8,["options"])]))}},f5={__name:"TimeTrigger",setup(se){const ue=Cg(),t=Af(!1),N=Af();function V(){t.value?(t.value=!1,clearInterval(N.value)):(t.value=!0,N.value=setInterval(ue.changeData,1e3))}return(y,c)=>(Ls(),au("button",{class:sh([t.value?"btn btn-outline-danger":"btn btn-outline-info"]),onClick:V},N0(t.value?" ON ":"OFF"),3))}},h5={class:"container-fluid p-5 bg-primary text-white text-center"},v5=fl("h1",null,"Exchange rate history",-1),p5=fl("p",null,"Presse one of the buttons.",-1),d5={class:"container mt-5"},g5={class:"row"},y5={class:"card"},m5=fl("h3",{class:"text-center"},"Line ",-1),x5={__name:"MainPage",setup(se){return(ue,t)=>(Ls(),au(iu,null,[fl("div",h5,[v5,p5,Js(c5),Js(f5)]),fl("div",d5,[fl("div",g5,[fl("div",y5,[m5,fl("div",null,[Js(TA,{type:"scatter"})])])])])],64))}},b5={__name:"App",setup(se){return(ue,t)=>(Ls(),$h(x5))}};var ou="top",Yu="bottom",Wu="right",su="left",Cd="auto",fv=[ou,Yu,Wu,su],lh="start",tv="end",Ux="clippingParents",Pg="viewport",Gh="popper",Vx="reference",tg=fv.reduce(function(se,ue){return se.concat([ue+"-"+lh,ue+"-"+tv])},[]),Dg=[].concat(fv,[Cd]).reduce(function(se,ue){return se.concat([ue,ue+"-"+lh,ue+"-"+tv])},[]),Hx="beforeRead",Gx="read",Yx="afterRead",Wx="beforeMain",Xx="main",jx="afterMain",Zx="beforeWrite",Kx="write",Jx="afterWrite",$x=[Hx,Gx,Yx,Wx,Xx,jx,Zx,Kx,Jx];function Hc(se){return se?(se.nodeName||"").toLowerCase():null}function cc(se){if(se==null)return window;if(se.toString()!=="[object Window]"){var ue=se.ownerDocument;return ue&&ue.defaultView||window}return se}function uh(se){var ue=cc(se).Element;return se instanceof ue||se instanceof Element}function lc(se){var ue=cc(se).HTMLElement;return se instanceof ue||se instanceof HTMLElement}function Rg(se){if(typeof ShadowRoot>"u")return!1;var ue=cc(se).ShadowRoot;return se instanceof ue||se instanceof ShadowRoot}function _5(se){var ue=se.state;Object.keys(ue.elements).forEach(function(t){var N=ue.styles[t]||{},V=ue.attributes[t]||{},y=ue.elements[t];!lc(y)||!Hc(y)||(Object.assign(y.style,N),Object.keys(V).forEach(function(c){var A=V[c];A===!1?y.removeAttribute(c):y.setAttribute(c,A===!0?"":A)}))})}function w5(se){var ue=se.state,t={popper:{position:ue.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(ue.elements.popper.style,t.popper),ue.styles=t,ue.elements.arrow&&Object.assign(ue.elements.arrow.style,t.arrow),function(){Object.keys(ue.elements).forEach(function(N){var V=ue.elements[N],y=ue.attributes[N]||{},c=Object.keys(ue.styles.hasOwnProperty(N)?ue.styles[N]:t[N]),A=c.reduce(function(T,e){return T[e]="",T},{});!lc(V)||!Hc(V)||(Object.assign(V.style,A),Object.keys(y).forEach(function(T){V.removeAttribute(T)}))})}}const Ig={name:"applyStyles",enabled:!0,phase:"write",fn:_5,effect:w5,requires:["computeStyles"]};function Bc(se){return se.split("-")[0]}var oh=Math.max,cd=Math.min,rv=Math.round;function rg(){var se=navigator.userAgentData;return se!=null&&se.brands?se.brands.map(function(ue){return ue.brand+"/"+ue.version}).join(" "):navigator.userAgent}function Qx(){return!/^((?!chrome|android).)*safari/i.test(rg())}function nv(se,ue,t){ue===void 0&&(ue=!1),t===void 0&&(t=!1);var N=se.getBoundingClientRect(),V=1,y=1;ue&&lc(se)&&(V=se.offsetWidth>0&&rv(N.width)/se.offsetWidth||1,y=se.offsetHeight>0&&rv(N.height)/se.offsetHeight||1);var c=uh(se)?cc(se):window,A=c.visualViewport,T=!Qx()&&t,e=(N.left+(T&&A?A.offsetLeft:0))/V,a=(N.top+(T&&A?A.offsetTop:0))/y,i=N.width/V,n=N.height/y;return{width:i,height:n,top:a,right:e+i,bottom:a+n,left:e,x:e,y:a}}function Fg(se){var ue=nv(se),t=se.offsetWidth,N=se.offsetHeight;return Math.abs(ue.width-t)<=1&&(t=ue.width),Math.abs(ue.height-N)<=1&&(N=ue.height),{x:se.offsetLeft,y:se.offsetTop,width:t,height:N}}function qx(se,ue){var t=ue.getRootNode&&ue.getRootNode();if(se.contains(ue))return!0;if(t&&Rg(t)){var N=ue;do{if(N&&se.isSameNode(N))return!0;N=N.parentNode||N.host}while(N)}return!1}function tf(se){return cc(se).getComputedStyle(se)}function T5(se){return["table","td","th"].indexOf(Hc(se))>=0}function Rf(se){return((uh(se)?se.ownerDocument:se.document)||window.document).documentElement}function Ld(se){return Hc(se)==="html"?se:se.assignedSlot||se.parentNode||(Rg(se)?se.host:null)||Rf(se)}function Jm(se){return!lc(se)||tf(se).position==="fixed"?null:se.offsetParent}function A5(se){var ue=/firefox/i.test(rg()),t=/Trident/i.test(rg());if(t&&lc(se)){var N=tf(se);if(N.position==="fixed")return null}var V=Ld(se);for(Rg(V)&&(V=V.host);lc(V)&&["html","body"].indexOf(Hc(V))<0;){var y=tf(V);if(y.transform!=="none"||y.perspective!=="none"||y.contain==="paint"||["transform","perspective"].indexOf(y.willChange)!==-1||ue&&y.willChange==="filter"||ue&&y.filter&&y.filter!=="none")return V;V=V.parentNode}return null}function rp(se){for(var ue=cc(se),t=Jm(se);t&&T5(t)&&tf(t).position==="static";)t=Jm(t);return t&&(Hc(t)==="html"||Hc(t)==="body"&&tf(t).position==="static")?ue:t||A5(se)||ue}function zg(se){return["top","bottom"].indexOf(se)>=0?"x":"y"}function jv(se,ue,t){return oh(se,cd(ue,t))}function M5(se,ue,t){var N=jv(se,ue,t);return N>t?t:N}function eb(){return{top:0,right:0,bottom:0,left:0}}function tb(se){return Object.assign({},eb(),se)}function rb(se,ue){return ue.reduce(function(t,N){return t[N]=se,t},{})}var E5=function(ue,t){return ue=typeof ue=="function"?ue(Object.assign({},t.rects,{placement:t.placement})):ue,tb(typeof ue!="number"?ue:rb(ue,fv))};function S5(se){var ue,t=se.state,N=se.name,V=se.options,y=t.elements.arrow,c=t.modifiersData.popperOffsets,A=Bc(t.placement),T=zg(A),e=[su,Wu].indexOf(A)>=0,a=e?"height":"width";if(!(!y||!c)){var i=E5(V.padding,t),n=Fg(y),r=T==="y"?ou:su,v=T==="y"?Yu:Wu,s=t.rects.reference[a]+t.rects.reference[T]-c[T]-t.rects.popper[a],o=c[T]-t.rects.reference[T],b=rp(y),g=b?T==="y"?b.clientHeight||0:b.clientWidth||0:0,d=s/2-o/2,f=i[r],m=g-n[a]-i[v],l=g/2-n[a]/2+d,x=jv(f,l,m),u=T;t.modifiersData[N]=(ue={},ue[u]=x,ue.centerOffset=x-l,ue)}}function k5(se){var ue=se.state,t=se.options,N=t.element,V=N===void 0?"[data-popper-arrow]":N;V!=null&&(typeof V=="string"&&(V=ue.elements.popper.querySelector(V),!V)||!qx(ue.elements.popper,V)||(ue.elements.arrow=V))}const nb={name:"arrow",enabled:!0,phase:"main",fn:S5,effect:k5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function av(se){return se.split("-")[1]}var C5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function L5(se){var ue=se.x,t=se.y,N=window,V=N.devicePixelRatio||1;return{x:rv(ue*V)/V||0,y:rv(t*V)/V||0}}function $m(se){var ue,t=se.popper,N=se.popperRect,V=se.placement,y=se.variation,c=se.offsets,A=se.position,T=se.gpuAcceleration,e=se.adaptive,a=se.roundOffsets,i=se.isFixed,n=c.x,r=n===void 0?0:n,v=c.y,s=v===void 0?0:v,o=typeof a=="function"?a({x:r,y:s}):{x:r,y:s};r=o.x,s=o.y;var b=c.hasOwnProperty("x"),g=c.hasOwnProperty("y"),d=su,f=ou,m=window;if(e){var l=rp(t),x="clientHeight",u="clientWidth";if(l===cc(t)&&(l=Rf(t),tf(l).position!=="static"&&A==="absolute"&&(x="scrollHeight",u="scrollWidth")),l=l,V===ou||(V===su||V===Wu)&&y===tv){f=Yu;var M=i&&l===m&&m.visualViewport?m.visualViewport.height:l[x];s-=M-N.height,s*=T?1:-1}if(V===su||(V===ou||V===Yu)&&y===tv){d=Wu;var w=i&&l===m&&m.visualViewport?m.visualViewport.width:l[u];r-=w-N.width,r*=T?1:-1}}var p=Object.assign({position:A},e&&C5),_=a===!0?L5({x:r,y:s}):{x:r,y:s};if(r=_.x,s=_.y,T){var h;return Object.assign({},p,(h={},h[f]=g?"0":"",h[d]=b?"0":"",h.transform=(m.devicePixelRatio||1)<=1?"translate("+r+"px, "+s+"px)":"translate3d("+r+"px, "+s+"px, 0)",h))}return Object.assign({},p,(ue={},ue[f]=g?s+"px":"",ue[d]=b?r+"px":"",ue.transform="",ue))}function P5(se){var ue=se.state,t=se.options,N=t.gpuAcceleration,V=N===void 0?!0:N,y=t.adaptive,c=y===void 0?!0:y,A=t.roundOffsets,T=A===void 0?!0:A,e={placement:Bc(ue.placement),variation:av(ue.placement),popper:ue.elements.popper,popperRect:ue.rects.popper,gpuAcceleration:V,isFixed:ue.options.strategy==="fixed"};ue.modifiersData.popperOffsets!=null&&(ue.styles.popper=Object.assign({},ue.styles.popper,$m(Object.assign({},e,{offsets:ue.modifiersData.popperOffsets,position:ue.options.strategy,adaptive:c,roundOffsets:T})))),ue.modifiersData.arrow!=null&&(ue.styles.arrow=Object.assign({},ue.styles.arrow,$m(Object.assign({},e,{offsets:ue.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:T})))),ue.attributes.popper=Object.assign({},ue.attributes.popper,{"data-popper-placement":ue.placement})}const Og={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:P5,data:{}};var Hp={passive:!0};function D5(se){var ue=se.state,t=se.instance,N=se.options,V=N.scroll,y=V===void 0?!0:V,c=N.resize,A=c===void 0?!0:c,T=cc(ue.elements.popper),e=[].concat(ue.scrollParents.reference,ue.scrollParents.popper);return y&&e.forEach(function(a){a.addEventListener("scroll",t.update,Hp)}),A&&T.addEventListener("resize",t.update,Hp),function(){y&&e.forEach(function(a){a.removeEventListener("scroll",t.update,Hp)}),A&&T.removeEventListener("resize",t.update,Hp)}}const Ng={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:D5,data:{}};var R5={left:"right",right:"left",bottom:"top",top:"bottom"};function qp(se){return se.replace(/left|right|bottom|top/g,function(ue){return R5[ue]})}var I5={start:"end",end:"start"};function Qm(se){return se.replace(/start|end/g,function(ue){return I5[ue]})}function Bg(se){var ue=cc(se),t=ue.pageXOffset,N=ue.pageYOffset;return{scrollLeft:t,scrollTop:N}}function Ug(se){return nv(Rf(se)).left+Bg(se).scrollLeft}function F5(se,ue){var t=cc(se),N=Rf(se),V=t.visualViewport,y=N.clientWidth,c=N.clientHeight,A=0,T=0;if(V){y=V.width,c=V.height;var e=Qx();(e||!e&&ue==="fixed")&&(A=V.offsetLeft,T=V.offsetTop)}return{width:y,height:c,x:A+Ug(se),y:T}}function z5(se){var ue,t=Rf(se),N=Bg(se),V=(ue=se.ownerDocument)==null?void 0:ue.body,y=oh(t.scrollWidth,t.clientWidth,V?V.scrollWidth:0,V?V.clientWidth:0),c=oh(t.scrollHeight,t.clientHeight,V?V.scrollHeight:0,V?V.clientHeight:0),A=-N.scrollLeft+Ug(se),T=-N.scrollTop;return tf(V||t).direction==="rtl"&&(A+=oh(t.clientWidth,V?V.clientWidth:0)-y),{width:y,height:c,x:A,y:T}}function Vg(se){var ue=tf(se),t=ue.overflow,N=ue.overflowX,V=ue.overflowY;return/auto|scroll|overlay|hidden/.test(t+V+N)}function ab(se){return["html","body","#document"].indexOf(Hc(se))>=0?se.ownerDocument.body:lc(se)&&Vg(se)?se:ab(Ld(se))}function Zv(se,ue){var t;ue===void 0&&(ue=[]);var N=ab(se),V=N===((t=se.ownerDocument)==null?void 0:t.body),y=cc(N),c=V?[y].concat(y.visualViewport||[],Vg(N)?N:[]):N,A=ue.concat(c);return V?A:A.concat(Zv(Ld(c)))}function ng(se){return Object.assign({},se,{left:se.x,top:se.y,right:se.x+se.width,bottom:se.y+se.height})}function O5(se,ue){var t=nv(se,!1,ue==="fixed");return t.top=t.top+se.clientTop,t.left=t.left+se.clientLeft,t.bottom=t.top+se.clientHeight,t.right=t.left+se.clientWidth,t.width=se.clientWidth,t.height=se.clientHeight,t.x=t.left,t.y=t.top,t}function qm(se,ue,t){return ue===Pg?ng(F5(se,t)):uh(ue)?O5(ue,t):ng(z5(Rf(se)))}function N5(se){var ue=Zv(Ld(se)),t=["absolute","fixed"].indexOf(tf(se).position)>=0,N=t&&lc(se)?rp(se):se;return uh(N)?ue.filter(function(V){return uh(V)&&qx(V,N)&&Hc(V)!=="body"}):[]}function B5(se,ue,t,N){var V=ue==="clippingParents"?N5(se):[].concat(ue),y=[].concat(V,[t]),c=y[0],A=y.reduce(function(T,e){var a=qm(se,e,N);return T.top=oh(a.top,T.top),T.right=cd(a.right,T.right),T.bottom=cd(a.bottom,T.bottom),T.left=oh(a.left,T.left),T},qm(se,c,N));return A.width=A.right-A.left,A.height=A.bottom-A.top,A.x=A.left,A.y=A.top,A}function ib(se){var ue=se.reference,t=se.element,N=se.placement,V=N?Bc(N):null,y=N?av(N):null,c=ue.x+ue.width/2-t.width/2,A=ue.y+ue.height/2-t.height/2,T;switch(V){case ou:T={x:c,y:ue.y-t.height};break;case Yu:T={x:c,y:ue.y+ue.height};break;case Wu:T={x:ue.x+ue.width,y:A};break;case su:T={x:ue.x-t.width,y:A};break;default:T={x:ue.x,y:ue.y}}var e=V?zg(V):null;if(e!=null){var a=e==="y"?"height":"width";switch(y){case lh:T[e]=T[e]-(ue[a]/2-t[a]/2);break;case tv:T[e]=T[e]+(ue[a]/2-t[a]/2);break}}return T}function iv(se,ue){ue===void 0&&(ue={});var t=ue,N=t.placement,V=N===void 0?se.placement:N,y=t.strategy,c=y===void 0?se.strategy:y,A=t.boundary,T=A===void 0?Ux:A,e=t.rootBoundary,a=e===void 0?Pg:e,i=t.elementContext,n=i===void 0?Gh:i,r=t.altBoundary,v=r===void 0?!1:r,s=t.padding,o=s===void 0?0:s,b=tb(typeof o!="number"?o:rb(o,fv)),g=n===Gh?Vx:Gh,d=se.rects.popper,f=se.elements[v?g:n],m=B5(uh(f)?f:f.contextElement||Rf(se.elements.popper),T,a,c),l=nv(se.elements.reference),x=ib({reference:l,element:d,strategy:"absolute",placement:V}),u=ng(Object.assign({},d,x)),M=n===Gh?u:l,w={top:m.top-M.top+b.top,bottom:M.bottom-m.bottom+b.bottom,left:m.left-M.left+b.left,right:M.right-m.right+b.right},p=se.modifiersData.offset;if(n===Gh&&p){var _=p[V];Object.keys(w).forEach(function(h){var L=[Wu,Yu].indexOf(h)>=0?1:-1,E=[ou,Yu].indexOf(h)>=0?"y":"x";w[h]+=_[E]*L})}return w}function U5(se,ue){ue===void 0&&(ue={});var t=ue,N=t.placement,V=t.boundary,y=t.rootBoundary,c=t.padding,A=t.flipVariations,T=t.allowedAutoPlacements,e=T===void 0?Dg:T,a=av(N),i=a?A?tg:tg.filter(function(v){return av(v)===a}):fv,n=i.filter(function(v){return e.indexOf(v)>=0});n.length===0&&(n=i);var r=n.reduce(function(v,s){return v[s]=iv(se,{placement:s,boundary:V,rootBoundary:y,padding:c})[Bc(s)],v},{});return Object.keys(r).sort(function(v,s){return r[v]-r[s]})}function V5(se){if(Bc(se)===Cd)return[];var ue=qp(se);return[Qm(se),ue,Qm(ue)]}function H5(se){var ue=se.state,t=se.options,N=se.name;if(!ue.modifiersData[N]._skip){for(var V=t.mainAxis,y=V===void 0?!0:V,c=t.altAxis,A=c===void 0?!0:c,T=t.fallbackPlacements,e=t.padding,a=t.boundary,i=t.rootBoundary,n=t.altBoundary,r=t.flipVariations,v=r===void 0?!0:r,s=t.allowedAutoPlacements,o=ue.options.placement,b=Bc(o),g=b===o,d=T||(g||!v?[qp(o)]:V5(o)),f=[o].concat(d).reduce(function(G,Y){return G.concat(Bc(Y)===Cd?U5(ue,{placement:Y,boundary:a,rootBoundary:i,padding:e,flipVariations:v,allowedAutoPlacements:s}):Y)},[]),m=ue.rects.reference,l=ue.rects.popper,x=new Map,u=!0,M=f[0],w=0;w<f.length;w++){var p=f[w],_=Bc(p),h=av(p)===lh,L=[ou,Yu].indexOf(_)>=0,E=L?"width":"height",S=iv(ue,{placement:p,boundary:a,rootBoundary:i,altBoundary:n,padding:e}),P=L?h?Wu:su:h?Yu:ou;m[E]>l[E]&&(P=qp(P));var F=qp(P),I=[];if(y&&I.push(S[_]<=0),A&&I.push(S[P]<=0,S[F]<=0),I.every(function(G){return G})){M=p,u=!1;break}x.set(p,I)}if(u)for(var D=v?3:1,R=function(Y){var ee=f.find(function(j){var X=x.get(j);if(X)return X.slice(0,Y).every(function(ae){return ae})});if(ee)return M=ee,"break"},O=D;O>0;O--){var z=R(O);if(z==="break")break}ue.placement!==M&&(ue.modifiersData[N]._skip=!0,ue.placement=M,ue.reset=!0)}}const ob={name:"flip",enabled:!0,phase:"main",fn:H5,requiresIfExists:["offset"],data:{_skip:!1}};function e1(se,ue,t){return t===void 0&&(t={x:0,y:0}),{top:se.top-ue.height-t.y,right:se.right-ue.width+t.x,bottom:se.bottom-ue.height+t.y,left:se.left-ue.width-t.x}}function t1(se){return[ou,Wu,Yu,su].some(function(ue){return se[ue]>=0})}function G5(se){var ue=se.state,t=se.name,N=ue.rects.reference,V=ue.rects.popper,y=ue.modifiersData.preventOverflow,c=iv(ue,{elementContext:"reference"}),A=iv(ue,{altBoundary:!0}),T=e1(c,N),e=e1(A,V,y),a=t1(T),i=t1(e);ue.modifiersData[t]={referenceClippingOffsets:T,popperEscapeOffsets:e,isReferenceHidden:a,hasPopperEscaped:i},ue.attributes.popper=Object.assign({},ue.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":i})}const sb={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:G5};function Y5(se,ue,t){var N=Bc(se),V=[su,ou].indexOf(N)>=0?-1:1,y=typeof t=="function"?t(Object.assign({},ue,{placement:se})):t,c=y[0],A=y[1];return c=c||0,A=(A||0)*V,[su,Wu].indexOf(N)>=0?{x:A,y:c}:{x:c,y:A}}function W5(se){var ue=se.state,t=se.options,N=se.name,V=t.offset,y=V===void 0?[0,0]:V,c=Dg.reduce(function(a,i){return a[i]=Y5(i,ue.rects,y),a},{}),A=c[ue.placement],T=A.x,e=A.y;ue.modifiersData.popperOffsets!=null&&(ue.modifiersData.popperOffsets.x+=T,ue.modifiersData.popperOffsets.y+=e),ue.modifiersData[N]=c}const lb={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:W5};function X5(se){var ue=se.state,t=se.name;ue.modifiersData[t]=ib({reference:ue.rects.reference,element:ue.rects.popper,strategy:"absolute",placement:ue.placement})}const Hg={name:"popperOffsets",enabled:!0,phase:"read",fn:X5,data:{}};function j5(se){return se==="x"?"y":"x"}function Z5(se){var ue=se.state,t=se.options,N=se.name,V=t.mainAxis,y=V===void 0?!0:V,c=t.altAxis,A=c===void 0?!1:c,T=t.boundary,e=t.rootBoundary,a=t.altBoundary,i=t.padding,n=t.tether,r=n===void 0?!0:n,v=t.tetherOffset,s=v===void 0?0:v,o=iv(ue,{boundary:T,rootBoundary:e,padding:i,altBoundary:a}),b=Bc(ue.placement),g=av(ue.placement),d=!g,f=zg(b),m=j5(f),l=ue.modifiersData.popperOffsets,x=ue.rects.reference,u=ue.rects.popper,M=typeof s=="function"?s(Object.assign({},ue.rects,{placement:ue.placement})):s,w=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),p=ue.modifiersData.offset?ue.modifiersData.offset[ue.placement]:null,_={x:0,y:0};if(!!l){if(y){var h,L=f==="y"?ou:su,E=f==="y"?Yu:Wu,S=f==="y"?"height":"width",P=l[f],F=P+o[L],I=P-o[E],D=r?-u[S]/2:0,R=g===lh?x[S]:u[S],O=g===lh?-u[S]:-x[S],z=ue.elements.arrow,G=r&&z?Fg(z):{width:0,height:0},Y=ue.modifiersData["arrow#persistent"]?ue.modifiersData["arrow#persistent"].padding:eb(),ee=Y[L],j=Y[E],X=jv(0,x[S],G[S]),ae=d?x[S]/2-D-X-ee-w.mainAxis:R-X-ee-w.mainAxis,he=d?-x[S]/2+D+X+j+w.mainAxis:O+X+j+w.mainAxis,K=ue.elements.arrow&&rp(ue.elements.arrow),J=K?f==="y"?K.clientTop||0:K.clientLeft||0:0,U=(h=p==null?void 0:p[f])!=null?h:0,H=P+ae-U-J,q=P+he-U,re=jv(r?cd(F,H):F,P,r?oh(I,q):I);l[f]=re,_[f]=re-P}if(A){var Z,Q=f==="x"?ou:su,ie=f==="x"?Yu:Wu,oe=l[m],ne=m==="y"?"height":"width",le=oe+o[Q],_e=oe-o[ie],fe=[ou,su].indexOf(b)!==-1,ye=(Z=p==null?void 0:p[m])!=null?Z:0,xe=fe?le:oe-x[ne]-u[ne]-ye+w.altAxis,me=fe?oe+x[ne]+u[ne]-ye-w.altAxis:_e,be=r&&fe?M5(xe,oe,me):jv(r?xe:le,oe,r?me:_e);l[m]=be,_[m]=be-oe}ue.modifiersData[N]=_}}const ub={name:"preventOverflow",enabled:!0,phase:"main",fn:Z5,requiresIfExists:["offset"]};function K5(se){return{scrollLeft:se.scrollLeft,scrollTop:se.scrollTop}}function J5(se){return se===cc(se)||!lc(se)?Bg(se):K5(se)}function $5(se){var ue=se.getBoundingClientRect(),t=rv(ue.width)/se.offsetWidth||1,N=rv(ue.height)/se.offsetHeight||1;return t!==1||N!==1}function Q5(se,ue,t){t===void 0&&(t=!1);var N=lc(ue),V=lc(ue)&&$5(ue),y=Rf(ue),c=nv(se,V,t),A={scrollLeft:0,scrollTop:0},T={x:0,y:0};return(N||!N&&!t)&&((Hc(ue)!=="body"||Vg(y))&&(A=J5(ue)),lc(ue)?(T=nv(ue,!0),T.x+=ue.clientLeft,T.y+=ue.clientTop):y&&(T.x=Ug(y))),{x:c.left+A.scrollLeft-T.x,y:c.top+A.scrollTop-T.y,width:c.width,height:c.height}}function q5(se){var ue=new Map,t=new Set,N=[];se.forEach(function(y){ue.set(y.name,y)});function V(y){t.add(y.name);var c=[].concat(y.requires||[],y.requiresIfExists||[]);c.forEach(function(A){if(!t.has(A)){var T=ue.get(A);T&&V(T)}}),N.push(y)}return se.forEach(function(y){t.has(y.name)||V(y)}),N}function eM(se){var ue=q5(se);return $x.reduce(function(t,N){return t.concat(ue.filter(function(V){return V.phase===N}))},[])}function tM(se){var ue;return function(){return ue||(ue=new Promise(function(t){Promise.resolve().then(function(){ue=void 0,t(se())})})),ue}}function rM(se){var ue=se.reduce(function(t,N){var V=t[N.name];return t[N.name]=V?Object.assign({},V,N,{options:Object.assign({},V.options,N.options),data:Object.assign({},V.data,N.data)}):N,t},{});return Object.keys(ue).map(function(t){return ue[t]})}var r1={placement:"bottom",modifiers:[],strategy:"absolute"};function n1(){for(var se=arguments.length,ue=new Array(se),t=0;t<se;t++)ue[t]=arguments[t];return!ue.some(function(N){return!(N&&typeof N.getBoundingClientRect=="function")})}function Pd(se){se===void 0&&(se={});var ue=se,t=ue.defaultModifiers,N=t===void 0?[]:t,V=ue.defaultOptions,y=V===void 0?r1:V;return function(A,T,e){e===void 0&&(e=y);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},r1,y),modifiersData:{},elements:{reference:A,popper:T},attributes:{},styles:{}},i=[],n=!1,r={state:a,setOptions:function(b){var g=typeof b=="function"?b(a.options):b;s(),a.options=Object.assign({},y,a.options,g),a.scrollParents={reference:uh(A)?Zv(A):A.contextElement?Zv(A.contextElement):[],popper:Zv(T)};var d=eM(rM([].concat(N,a.options.modifiers)));return a.orderedModifiers=d.filter(function(f){return f.enabled}),v(),r.update()},forceUpdate:function(){if(!n){var b=a.elements,g=b.reference,d=b.popper;if(!!n1(g,d)){a.rects={reference:Q5(g,rp(d),a.options.strategy==="fixed"),popper:Fg(d)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(w){return a.modifiersData[w.name]=Object.assign({},w.data)});for(var f=0;f<a.orderedModifiers.length;f++){if(a.reset===!0){a.reset=!1,f=-1;continue}var m=a.orderedModifiers[f],l=m.fn,x=m.options,u=x===void 0?{}:x,M=m.name;typeof l=="function"&&(a=l({state:a,options:u,name:M,instance:r})||a)}}}},update:tM(function(){return new Promise(function(o){r.forceUpdate(),o(a)})}),destroy:function(){s(),n=!0}};if(!n1(A,T))return r;r.setOptions(e).then(function(o){!n&&e.onFirstUpdate&&e.onFirstUpdate(o)});function v(){a.orderedModifiers.forEach(function(o){var b=o.name,g=o.options,d=g===void 0?{}:g,f=o.effect;if(typeof f=="function"){var m=f({state:a,name:b,instance:r,options:d}),l=function(){};i.push(m||l)}})}function s(){i.forEach(function(o){return o()}),i=[]}return r}}var nM=Pd(),aM=[Ng,Hg,Og,Ig],iM=Pd({defaultModifiers:aM}),oM=[Ng,Hg,Og,Ig,lb,ob,ub,nb,sb],Gg=Pd({defaultModifiers:oM});const Yg=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Pd,detectOverflow:iv,createPopperBase:nM,createPopper:Gg,createPopperLite:iM,top:ou,bottom:Yu,right:Wu,left:su,auto:Cd,basePlacements:fv,start:lh,end:tv,clippingParents:Ux,viewport:Pg,popper:Gh,reference:Vx,variationPlacements:tg,placements:Dg,beforeRead:Hx,read:Gx,afterRead:Yx,beforeMain:Wx,main:Xx,afterMain:jx,beforeWrite:Zx,write:Kx,afterWrite:Jx,modifierPhases:$x,applyStyles:Ig,arrow:nb,computeStyles:Og,eventListeners:Ng,flip:ob,hide:sb,offset:lb,popperOffsets:Hg,preventOverflow:ub},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const sM=1e6,lM=1e3,ag="transitionend",uM=se=>se==null?`${se}`:Object.prototype.toString.call(se).match(/\s([a-z]+)/i)[1].toLowerCase(),cM=se=>{do se+=Math.floor(Math.random()*sM);while(document.getElementById(se));return se},cb=se=>{let ue=se.getAttribute("data-bs-target");if(!ue||ue==="#"){let t=se.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),ue=t&&t!=="#"?t.trim():null}return ue},fb=se=>{const ue=cb(se);return ue&&document.querySelector(ue)?ue:null},$c=se=>{const ue=cb(se);return ue?document.querySelector(ue):null},fM=se=>{if(!se)return 0;let{transitionDuration:ue,transitionDelay:t}=window.getComputedStyle(se);const N=Number.parseFloat(ue),V=Number.parseFloat(t);return!N&&!V?0:(ue=ue.split(",")[0],t=t.split(",")[0],(Number.parseFloat(ue)+Number.parseFloat(t))*lM)},hb=se=>{se.dispatchEvent(new Event(ag))},Qc=se=>!se||typeof se!="object"?!1:(typeof se.jquery<"u"&&(se=se[0]),typeof se.nodeType<"u"),Lf=se=>Qc(se)?se.jquery?se[0]:se:typeof se=="string"&&se.length>0?document.querySelector(se):null,hv=se=>{if(!Qc(se)||se.getClientRects().length===0)return!1;const ue=getComputedStyle(se).getPropertyValue("visibility")==="visible",t=se.closest("details:not([open])");if(!t)return ue;if(t!==se){const N=se.closest("summary");if(N&&N.parentNode!==t||N===null)return!1}return ue},Pf=se=>!se||se.nodeType!==Node.ELEMENT_NODE||se.classList.contains("disabled")?!0:typeof se.disabled<"u"?se.disabled:se.hasAttribute("disabled")&&se.getAttribute("disabled")!=="false",vb=se=>{if(!document.documentElement.attachShadow)return null;if(typeof se.getRootNode=="function"){const ue=se.getRootNode();return ue instanceof ShadowRoot?ue:null}return se instanceof ShadowRoot?se:se.parentNode?vb(se.parentNode):null},fd=()=>{},np=se=>{se.offsetHeight},pb=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,M0=[],hM=se=>{document.readyState==="loading"?(M0.length||document.addEventListener("DOMContentLoaded",()=>{for(const ue of M0)ue()}),M0.push(se)):se()},uc=()=>document.documentElement.dir==="rtl",fc=se=>{hM(()=>{const ue=pb();if(ue){const t=se.NAME,N=ue.fn[t];ue.fn[t]=se.jQueryInterface,ue.fn[t].Constructor=se,ue.fn[t].noConflict=()=>(ue.fn[t]=N,se.jQueryInterface)}})},Jc=se=>{typeof se=="function"&&se()},db=(se,ue,t=!0)=>{if(!t){Jc(se);return}const N=5,V=fM(ue)+N;let y=!1;const c=({target:A})=>{A===ue&&(y=!0,ue.removeEventListener(ag,c),Jc(se))};ue.addEventListener(ag,c),setTimeout(()=>{y||hb(ue)},V)},Wg=(se,ue,t,N)=>{const V=se.length;let y=se.indexOf(ue);return y===-1?!t&&N?se[V-1]:se[0]:(y+=t?1:-1,N&&(y=(y+V)%V),se[Math.max(0,Math.min(y,V-1))])},vM=/[^.]*(?=\..*)\.|.*/,pM=/\..*/,dM=/::\d+$/,E0={};let a1=1;const gb={mouseenter:"mouseover",mouseleave:"mouseout"},gM=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function yb(se,ue){return ue&&`${ue}::${a1++}`||se.uidEvent||a1++}function mb(se){const ue=yb(se);return se.uidEvent=ue,E0[ue]=E0[ue]||{},E0[ue]}function yM(se,ue){return function t(N){return Xg(N,{delegateTarget:se}),t.oneOff&&Sa.off(se,N.type,ue),ue.apply(se,[N])}}function mM(se,ue,t){return function N(V){const y=se.querySelectorAll(ue);for(let{target:c}=V;c&&c!==this;c=c.parentNode)for(const A of y)if(A===c)return Xg(V,{delegateTarget:c}),N.oneOff&&Sa.off(se,V.type,ue,t),t.apply(c,[V])}}function xb(se,ue,t=null){return Object.values(se).find(N=>N.callable===ue&&N.delegationSelector===t)}function bb(se,ue,t){const N=typeof ue=="string",V=N?t:ue||t;let y=_b(se);return gM.has(y)||(y=se),[N,V,y]}function i1(se,ue,t,N,V){if(typeof ue!="string"||!se)return;let[y,c,A]=bb(ue,t,N);ue in gb&&(c=(v=>function(s){if(!s.relatedTarget||s.relatedTarget!==s.delegateTarget&&!s.delegateTarget.contains(s.relatedTarget))return v.call(this,s)})(c));const T=mb(se),e=T[A]||(T[A]={}),a=xb(e,c,y?t:null);if(a){a.oneOff=a.oneOff&&V;return}const i=yb(c,ue.replace(vM,"")),n=y?mM(se,t,c):yM(se,c);n.delegationSelector=y?t:null,n.callable=c,n.oneOff=V,n.uidEvent=i,e[i]=n,se.addEventListener(A,n,y)}function ig(se,ue,t,N,V){const y=xb(ue[t],N,V);!y||(se.removeEventListener(t,y,Boolean(V)),delete ue[t][y.uidEvent])}function xM(se,ue,t,N){const V=ue[t]||{};for(const y of Object.keys(V))if(y.includes(N)){const c=V[y];ig(se,ue,t,c.callable,c.delegationSelector)}}function _b(se){return se=se.replace(pM,""),gb[se]||se}const Sa={on(se,ue,t,N){i1(se,ue,t,N,!1)},one(se,ue,t,N){i1(se,ue,t,N,!0)},off(se,ue,t,N){if(typeof ue!="string"||!se)return;const[V,y,c]=bb(ue,t,N),A=c!==ue,T=mb(se),e=T[c]||{},a=ue.startsWith(".");if(typeof y<"u"){if(!Object.keys(e).length)return;ig(se,T,c,y,V?t:null);return}if(a)for(const i of Object.keys(T))xM(se,T,i,ue.slice(1));for(const i of Object.keys(e)){const n=i.replace(dM,"");if(!A||ue.includes(n)){const r=e[i];ig(se,T,c,r.callable,r.delegationSelector)}}},trigger(se,ue,t){if(typeof ue!="string"||!se)return null;const N=pb(),V=_b(ue),y=ue!==V;let c=null,A=!0,T=!0,e=!1;y&&N&&(c=N.Event(ue,t),N(se).trigger(c),A=!c.isPropagationStopped(),T=!c.isImmediatePropagationStopped(),e=c.isDefaultPrevented());let a=new Event(ue,{bubbles:A,cancelable:!0});return a=Xg(a,t),e&&a.preventDefault(),T&&se.dispatchEvent(a),a.defaultPrevented&&c&&c.preventDefault(),a}};function Xg(se,ue){for(const[t,N]of Object.entries(ue||{}))try{se[t]=N}catch{Object.defineProperty(se,t,{configurable:!0,get(){return N}})}return se}const _f=new Map,S0={set(se,ue,t){_f.has(se)||_f.set(se,new Map);const N=_f.get(se);if(!N.has(ue)&&N.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(N.keys())[0]}.`);return}N.set(ue,t)},get(se,ue){return _f.has(se)&&_f.get(se).get(ue)||null},remove(se,ue){if(!_f.has(se))return;const t=_f.get(se);t.delete(ue),t.size===0&&_f.delete(se)}};function o1(se){if(se==="true")return!0;if(se==="false")return!1;if(se===Number(se).toString())return Number(se);if(se===""||se==="null")return null;if(typeof se!="string")return se;try{return JSON.parse(decodeURIComponent(se))}catch{return se}}function k0(se){return se.replace(/[A-Z]/g,ue=>`-${ue.toLowerCase()}`)}const qc={setDataAttribute(se,ue,t){se.setAttribute(`data-bs-${k0(ue)}`,t)},removeDataAttribute(se,ue){se.removeAttribute(`data-bs-${k0(ue)}`)},getDataAttributes(se){if(!se)return{};const ue={},t=Object.keys(se.dataset).filter(N=>N.startsWith("bs")&&!N.startsWith("bsConfig"));for(const N of t){let V=N.replace(/^bs/,"");V=V.charAt(0).toLowerCase()+V.slice(1,V.length),ue[V]=o1(se.dataset[N])}return ue},getDataAttribute(se,ue){return o1(se.getAttribute(`data-bs-${k0(ue)}`))}};class ap{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(ue){return ue=this._mergeConfigObj(ue),ue=this._configAfterMerge(ue),this._typeCheckConfig(ue),ue}_configAfterMerge(ue){return ue}_mergeConfigObj(ue,t){const N=Qc(t)?qc.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof N=="object"?N:{},...Qc(t)?qc.getDataAttributes(t):{},...typeof ue=="object"?ue:{}}}_typeCheckConfig(ue,t=this.constructor.DefaultType){for(const N of Object.keys(t)){const V=t[N],y=ue[N],c=Qc(y)?"element":uM(y);if(!new RegExp(V).test(c))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${N}" provided type "${c}" but expected type "${V}".`)}}}const bM="5.2.3";class Ec extends ap{constructor(ue,t){super(),ue=Lf(ue),ue&&(this._element=ue,this._config=this._getConfig(t),S0.set(this._element,this.constructor.DATA_KEY,this))}dispose(){S0.remove(this._element,this.constructor.DATA_KEY),Sa.off(this._element,this.constructor.EVENT_KEY);for(const ue of Object.getOwnPropertyNames(this))this[ue]=null}_queueCallback(ue,t,N=!0){db(ue,t,N)}_getConfig(ue){return ue=this._mergeConfigObj(ue,this._element),ue=this._configAfterMerge(ue),this._typeCheckConfig(ue),ue}static getInstance(ue){return S0.get(Lf(ue),this.DATA_KEY)}static getOrCreateInstance(ue,t={}){return this.getInstance(ue)||new this(ue,typeof t=="object"?t:null)}static get VERSION(){return bM}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(ue){return`${ue}${this.EVENT_KEY}`}}const Dd=(se,ue="hide")=>{const t=`click.dismiss${se.EVENT_KEY}`,N=se.NAME;Sa.on(document,t,`[data-bs-dismiss="${N}"]`,function(V){if(["A","AREA"].includes(this.tagName)&&V.preventDefault(),Pf(this))return;const y=$c(this)||this.closest(`.${N}`);se.getOrCreateInstance(y)[ue]()})},_M="alert",wM="bs.alert",wb=`.${wM}`,TM=`close${wb}`,AM=`closed${wb}`,MM="fade",EM="show";class Rd extends Ec{static get NAME(){return _M}close(){if(Sa.trigger(this._element,TM).defaultPrevented)return;this._element.classList.remove(EM);const t=this._element.classList.contains(MM);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),Sa.trigger(this._element,AM),this.dispose()}static jQueryInterface(ue){return this.each(function(){const t=Rd.getOrCreateInstance(this);if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue](this)}})}}Dd(Rd,"close");fc(Rd);const SM="button",kM="bs.button",CM=`.${kM}`,LM=".data-api",PM="active",s1='[data-bs-toggle="button"]',DM=`click${CM}${LM}`;class Id extends Ec{static get NAME(){return SM}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(PM))}static jQueryInterface(ue){return this.each(function(){const t=Id.getOrCreateInstance(this);ue==="toggle"&&t[ue]()})}}Sa.on(document,DM,s1,se=>{se.preventDefault();const ue=se.target.closest(s1);Id.getOrCreateInstance(ue).toggle()});fc(Id);const Xi={find(se,ue=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(ue,se))},findOne(se,ue=document.documentElement){return Element.prototype.querySelector.call(ue,se)},children(se,ue){return[].concat(...se.children).filter(t=>t.matches(ue))},parents(se,ue){const t=[];let N=se.parentNode.closest(ue);for(;N;)t.push(N),N=N.parentNode.closest(ue);return t},prev(se,ue){let t=se.previousElementSibling;for(;t;){if(t.matches(ue))return[t];t=t.previousElementSibling}return[]},next(se,ue){let t=se.nextElementSibling;for(;t;){if(t.matches(ue))return[t];t=t.nextElementSibling}return[]},focusableChildren(se){const ue=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(ue,se).filter(t=>!Pf(t)&&hv(t))}},RM="swipe",vv=".bs.swipe",IM=`touchstart${vv}`,FM=`touchmove${vv}`,zM=`touchend${vv}`,OM=`pointerdown${vv}`,NM=`pointerup${vv}`,BM="touch",UM="pen",VM="pointer-event",HM=40,GM={endCallback:null,leftCallback:null,rightCallback:null},YM={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class hd extends ap{constructor(ue,t){super(),this._element=ue,!(!ue||!hd.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return GM}static get DefaultType(){return YM}static get NAME(){return RM}dispose(){Sa.off(this._element,vv)}_start(ue){if(!this._supportPointerEvents){this._deltaX=ue.touches[0].clientX;return}this._eventIsPointerPenTouch(ue)&&(this._deltaX=ue.clientX)}_end(ue){this._eventIsPointerPenTouch(ue)&&(this._deltaX=ue.clientX-this._deltaX),this._handleSwipe(),Jc(this._config.endCallback)}_move(ue){this._deltaX=ue.touches&&ue.touches.length>1?0:ue.touches[0].clientX-this._deltaX}_handleSwipe(){const ue=Math.abs(this._deltaX);if(ue<=HM)return;const t=ue/this._deltaX;this._deltaX=0,t&&Jc(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Sa.on(this._element,OM,ue=>this._start(ue)),Sa.on(this._element,NM,ue=>this._end(ue)),this._element.classList.add(VM)):(Sa.on(this._element,IM,ue=>this._start(ue)),Sa.on(this._element,FM,ue=>this._move(ue)),Sa.on(this._element,zM,ue=>this._end(ue)))}_eventIsPointerPenTouch(ue){return this._supportPointerEvents&&(ue.pointerType===UM||ue.pointerType===BM)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const WM="carousel",XM="bs.carousel",If=`.${XM}`,Tb=".data-api",jM="ArrowLeft",ZM="ArrowRight",KM=500,Bv="next",Vh="prev",Yh="left",ed="right",JM=`slide${If}`,C0=`slid${If}`,$M=`keydown${If}`,QM=`mouseenter${If}`,qM=`mouseleave${If}`,eE=`dragstart${If}`,tE=`load${If}${Tb}`,rE=`click${If}${Tb}`,Ab="carousel",Gp="active",nE="slide",aE="carousel-item-end",iE="carousel-item-start",oE="carousel-item-next",sE="carousel-item-prev",Mb=".active",Eb=".carousel-item",lE=Mb+Eb,uE=".carousel-item img",cE=".carousel-indicators",fE="[data-bs-slide], [data-bs-slide-to]",hE='[data-bs-ride="carousel"]',vE={[jM]:ed,[ZM]:Yh},pE={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},dE={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ip extends Ec{constructor(ue,t){super(ue,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Xi.findOne(cE,this._element),this._addEventListeners(),this._config.ride===Ab&&this.cycle()}static get Default(){return pE}static get DefaultType(){return dE}static get NAME(){return WM}next(){this._slide(Bv)}nextWhenVisible(){!document.hidden&&hv(this._element)&&this.next()}prev(){this._slide(Vh)}pause(){this._isSliding&&hb(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){Sa.one(this._element,C0,()=>this.cycle());return}this.cycle()}}to(ue){const t=this._getItems();if(ue>t.length-1||ue<0)return;if(this._isSliding){Sa.one(this._element,C0,()=>this.to(ue));return}const N=this._getItemIndex(this._getActive());if(N===ue)return;const V=ue>N?Bv:Vh;this._slide(V,t[ue])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(ue){return ue.defaultInterval=ue.interval,ue}_addEventListeners(){this._config.keyboard&&Sa.on(this._element,$M,ue=>this._keydown(ue)),this._config.pause==="hover"&&(Sa.on(this._element,QM,()=>this.pause()),Sa.on(this._element,qM,()=>this._maybeEnableCycle())),this._config.touch&&hd.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const N of Xi.find(uE,this._element))Sa.on(N,eE,V=>V.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(Yh)),rightCallback:()=>this._slide(this._directionToOrder(ed)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),KM+this._config.interval))}};this._swipeHelper=new hd(this._element,t)}_keydown(ue){if(/input|textarea/i.test(ue.target.tagName))return;const t=vE[ue.key];t&&(ue.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(ue){return this._getItems().indexOf(ue)}_setActiveIndicatorElement(ue){if(!this._indicatorsElement)return;const t=Xi.findOne(Mb,this._indicatorsElement);t.classList.remove(Gp),t.removeAttribute("aria-current");const N=Xi.findOne(`[data-bs-slide-to="${ue}"]`,this._indicatorsElement);N&&(N.classList.add(Gp),N.setAttribute("aria-current","true"))}_updateInterval(){const ue=this._activeElement||this._getActive();if(!ue)return;const t=Number.parseInt(ue.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(ue,t=null){if(this._isSliding)return;const N=this._getActive(),V=ue===Bv,y=t||Wg(this._getItems(),N,V,this._config.wrap);if(y===N)return;const c=this._getItemIndex(y),A=r=>Sa.trigger(this._element,r,{relatedTarget:y,direction:this._orderToDirection(ue),from:this._getItemIndex(N),to:c});if(A(JM).defaultPrevented||!N||!y)return;const e=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(c),this._activeElement=y;const a=V?iE:aE,i=V?oE:sE;y.classList.add(i),np(y),N.classList.add(a),y.classList.add(a);const n=()=>{y.classList.remove(a,i),y.classList.add(Gp),N.classList.remove(Gp,i,a),this._isSliding=!1,A(C0)};this._queueCallback(n,N,this._isAnimated()),e&&this.cycle()}_isAnimated(){return this._element.classList.contains(nE)}_getActive(){return Xi.findOne(lE,this._element)}_getItems(){return Xi.find(Eb,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(ue){return uc()?ue===Yh?Vh:Bv:ue===Yh?Bv:Vh}_orderToDirection(ue){return uc()?ue===Vh?Yh:ed:ue===Vh?ed:Yh}static jQueryInterface(ue){return this.each(function(){const t=ip.getOrCreateInstance(this,ue);if(typeof ue=="number"){t.to(ue);return}if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}Sa.on(document,rE,fE,function(se){const ue=$c(this);if(!ue||!ue.classList.contains(Ab))return;se.preventDefault();const t=ip.getOrCreateInstance(ue),N=this.getAttribute("data-bs-slide-to");if(N){t.to(N),t._maybeEnableCycle();return}if(qc.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});Sa.on(window,tE,()=>{const se=Xi.find(hE);for(const ue of se)ip.getOrCreateInstance(ue)});fc(ip);const gE="collapse",yE="bs.collapse",op=`.${yE}`,mE=".data-api",xE=`show${op}`,bE=`shown${op}`,_E=`hide${op}`,wE=`hidden${op}`,TE=`click${op}${mE}`,L0="show",jh="collapse",Yp="collapsing",AE="collapsed",ME=`:scope .${jh} .${jh}`,EE="collapse-horizontal",SE="width",kE="height",CE=".collapse.show, .collapse.collapsing",og='[data-bs-toggle="collapse"]',LE={parent:null,toggle:!0},PE={parent:"(null|element)",toggle:"boolean"};class tp extends Ec{constructor(ue,t){super(ue,t),this._isTransitioning=!1,this._triggerArray=[];const N=Xi.find(og);for(const V of N){const y=fb(V),c=Xi.find(y).filter(A=>A===this._element);y!==null&&c.length&&this._triggerArray.push(V)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return LE}static get DefaultType(){return PE}static get NAME(){return gE}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let ue=[];if(this._config.parent&&(ue=this._getFirstLevelChildren(CE).filter(A=>A!==this._element).map(A=>tp.getOrCreateInstance(A,{toggle:!1}))),ue.length&&ue[0]._isTransitioning||Sa.trigger(this._element,xE).defaultPrevented)return;for(const A of ue)A.hide();const N=this._getDimension();this._element.classList.remove(jh),this._element.classList.add(Yp),this._element.style[N]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const V=()=>{this._isTransitioning=!1,this._element.classList.remove(Yp),this._element.classList.add(jh,L0),this._element.style[N]="",Sa.trigger(this._element,bE)},c=`scroll${N[0].toUpperCase()+N.slice(1)}`;this._queueCallback(V,this._element,!0),this._element.style[N]=`${this._element[c]}px`}hide(){if(this._isTransitioning||!this._isShown()||Sa.trigger(this._element,_E).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,np(this._element),this._element.classList.add(Yp),this._element.classList.remove(jh,L0);for(const V of this._triggerArray){const y=$c(V);y&&!this._isShown(y)&&this._addAriaAndCollapsedClass([V],!1)}this._isTransitioning=!0;const N=()=>{this._isTransitioning=!1,this._element.classList.remove(Yp),this._element.classList.add(jh),Sa.trigger(this._element,wE)};this._element.style[t]="",this._queueCallback(N,this._element,!0)}_isShown(ue=this._element){return ue.classList.contains(L0)}_configAfterMerge(ue){return ue.toggle=Boolean(ue.toggle),ue.parent=Lf(ue.parent),ue}_getDimension(){return this._element.classList.contains(EE)?SE:kE}_initializeChildren(){if(!this._config.parent)return;const ue=this._getFirstLevelChildren(og);for(const t of ue){const N=$c(t);N&&this._addAriaAndCollapsedClass([t],this._isShown(N))}}_getFirstLevelChildren(ue){const t=Xi.find(ME,this._config.parent);return Xi.find(ue,this._config.parent).filter(N=>!t.includes(N))}_addAriaAndCollapsedClass(ue,t){if(!!ue.length)for(const N of ue)N.classList.toggle(AE,!t),N.setAttribute("aria-expanded",t)}static jQueryInterface(ue){const t={};return typeof ue=="string"&&/show|hide/.test(ue)&&(t.toggle=!1),this.each(function(){const N=tp.getOrCreateInstance(this,t);if(typeof ue=="string"){if(typeof N[ue]>"u")throw new TypeError(`No method named "${ue}"`);N[ue]()}})}}Sa.on(document,TE,og,function(se){(se.target.tagName==="A"||se.delegateTarget&&se.delegateTarget.tagName==="A")&&se.preventDefault();const ue=fb(this),t=Xi.find(ue);for(const N of t)tp.getOrCreateInstance(N,{toggle:!1}).toggle()});fc(tp);const l1="dropdown",DE="bs.dropdown",ch=`.${DE}`,jg=".data-api",RE="Escape",u1="Tab",IE="ArrowUp",c1="ArrowDown",FE=2,zE=`hide${ch}`,OE=`hidden${ch}`,NE=`show${ch}`,BE=`shown${ch}`,Sb=`click${ch}${jg}`,kb=`keydown${ch}${jg}`,UE=`keyup${ch}${jg}`,Wh="show",VE="dropup",HE="dropend",GE="dropstart",YE="dropup-center",WE="dropdown-center",rh='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',XE=`${rh}.${Wh}`,td=".dropdown-menu",jE=".navbar",ZE=".navbar-nav",KE=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",JE=uc()?"top-end":"top-start",$E=uc()?"top-start":"top-end",QE=uc()?"bottom-end":"bottom-start",qE=uc()?"bottom-start":"bottom-end",eS=uc()?"left-start":"right-start",tS=uc()?"right-start":"left-start",rS="top",nS="bottom",aS={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},iS={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Uc extends Ec{constructor(ue,t){super(ue,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Xi.next(this._element,td)[0]||Xi.prev(this._element,td)[0]||Xi.findOne(td,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return aS}static get DefaultType(){return iS}static get NAME(){return l1}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Pf(this._element)||this._isShown())return;const ue={relatedTarget:this._element};if(!Sa.trigger(this._element,NE,ue).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(ZE))for(const N of[].concat(...document.body.children))Sa.on(N,"mouseover",fd);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Wh),this._element.classList.add(Wh),Sa.trigger(this._element,BE,ue)}}hide(){if(Pf(this._element)||!this._isShown())return;const ue={relatedTarget:this._element};this._completeHide(ue)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(ue){if(!Sa.trigger(this._element,zE,ue).defaultPrevented){if("ontouchstart"in document.documentElement)for(const N of[].concat(...document.body.children))Sa.off(N,"mouseover",fd);this._popper&&this._popper.destroy(),this._menu.classList.remove(Wh),this._element.classList.remove(Wh),this._element.setAttribute("aria-expanded","false"),qc.removeDataAttribute(this._menu,"popper"),Sa.trigger(this._element,OE,ue)}}_getConfig(ue){if(ue=super._getConfig(ue),typeof ue.reference=="object"&&!Qc(ue.reference)&&typeof ue.reference.getBoundingClientRect!="function")throw new TypeError(`${l1.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return ue}_createPopper(){if(typeof Yg>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let ue=this._element;this._config.reference==="parent"?ue=this._parent:Qc(this._config.reference)?ue=Lf(this._config.reference):typeof this._config.reference=="object"&&(ue=this._config.reference);const t=this._getPopperConfig();this._popper=Gg(ue,this._menu,t)}_isShown(){return this._menu.classList.contains(Wh)}_getPlacement(){const ue=this._parent;if(ue.classList.contains(HE))return eS;if(ue.classList.contains(GE))return tS;if(ue.classList.contains(YE))return rS;if(ue.classList.contains(WE))return nS;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return ue.classList.contains(VE)?t?$E:JE:t?qE:QE}_detectNavbar(){return this._element.closest(jE)!==null}_getOffset(){const{offset:ue}=this._config;return typeof ue=="string"?ue.split(",").map(t=>Number.parseInt(t,10)):typeof ue=="function"?t=>ue(t,this._element):ue}_getPopperConfig(){const ue={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(qc.setDataAttribute(this._menu,"popper","static"),ue.modifiers=[{name:"applyStyles",enabled:!1}]),{...ue,...typeof this._config.popperConfig=="function"?this._config.popperConfig(ue):this._config.popperConfig}}_selectMenuItem({key:ue,target:t}){const N=Xi.find(KE,this._menu).filter(V=>hv(V));!N.length||Wg(N,t,ue===c1,!N.includes(t)).focus()}static jQueryInterface(ue){return this.each(function(){const t=Uc.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof t[ue]>"u")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}static clearMenus(ue){if(ue.button===FE||ue.type==="keyup"&&ue.key!==u1)return;const t=Xi.find(XE);for(const N of t){const V=Uc.getInstance(N);if(!V||V._config.autoClose===!1)continue;const y=ue.composedPath(),c=y.includes(V._menu);if(y.includes(V._element)||V._config.autoClose==="inside"&&!c||V._config.autoClose==="outside"&&c||V._menu.contains(ue.target)&&(ue.type==="keyup"&&ue.key===u1||/input|select|option|textarea|form/i.test(ue.target.tagName)))continue;const A={relatedTarget:V._element};ue.type==="click"&&(A.clickEvent=ue),V._completeHide(A)}}static dataApiKeydownHandler(ue){const t=/input|textarea/i.test(ue.target.tagName),N=ue.key===RE,V=[IE,c1].includes(ue.key);if(!V&&!N||t&&!N)return;ue.preventDefault();const y=this.matches(rh)?this:Xi.prev(this,rh)[0]||Xi.next(this,rh)[0]||Xi.findOne(rh,ue.delegateTarget.parentNode),c=Uc.getOrCreateInstance(y);if(V){ue.stopPropagation(),c.show(),c._selectMenuItem(ue);return}c._isShown()&&(ue.stopPropagation(),c.hide(),y.focus())}}Sa.on(document,kb,rh,Uc.dataApiKeydownHandler);Sa.on(document,kb,td,Uc.dataApiKeydownHandler);Sa.on(document,Sb,Uc.clearMenus);Sa.on(document,UE,Uc.clearMenus);Sa.on(document,Sb,rh,function(se){se.preventDefault(),Uc.getOrCreateInstance(this).toggle()});fc(Uc);const f1=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",h1=".sticky-top",Wp="padding-right",v1="margin-right";class sg{constructor(){this._element=document.body}getWidth(){const ue=document.documentElement.clientWidth;return Math.abs(window.innerWidth-ue)}hide(){const ue=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Wp,t=>t+ue),this._setElementAttributes(f1,Wp,t=>t+ue),this._setElementAttributes(h1,v1,t=>t-ue)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Wp),this._resetElementAttributes(f1,Wp),this._resetElementAttributes(h1,v1)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(ue,t,N){const V=this.getWidth(),y=c=>{if(c!==this._element&&window.innerWidth>c.clientWidth+V)return;this._saveInitialAttribute(c,t);const A=window.getComputedStyle(c).getPropertyValue(t);c.style.setProperty(t,`${N(Number.parseFloat(A))}px`)};this._applyManipulationCallback(ue,y)}_saveInitialAttribute(ue,t){const N=ue.style.getPropertyValue(t);N&&qc.setDataAttribute(ue,t,N)}_resetElementAttributes(ue,t){const N=V=>{const y=qc.getDataAttribute(V,t);if(y===null){V.style.removeProperty(t);return}qc.removeDataAttribute(V,t),V.style.setProperty(t,y)};this._applyManipulationCallback(ue,N)}_applyManipulationCallback(ue,t){if(Qc(ue)){t(ue);return}for(const N of Xi.find(ue,this._element))t(N)}}const Cb="backdrop",oS="fade",p1="show",d1=`mousedown.bs.${Cb}`,sS={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},lS={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Lb extends ap{constructor(ue){super(),this._config=this._getConfig(ue),this._isAppended=!1,this._element=null}static get Default(){return sS}static get DefaultType(){return lS}static get NAME(){return Cb}show(ue){if(!this._config.isVisible){Jc(ue);return}this._append();const t=this._getElement();this._config.isAnimated&&np(t),t.classList.add(p1),this._emulateAnimation(()=>{Jc(ue)})}hide(ue){if(!this._config.isVisible){Jc(ue);return}this._getElement().classList.remove(p1),this._emulateAnimation(()=>{this.dispose(),Jc(ue)})}dispose(){!this._isAppended||(Sa.off(this._element,d1),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const ue=document.createElement("div");ue.className=this._config.className,this._config.isAnimated&&ue.classList.add(oS),this._element=ue}return this._element}_configAfterMerge(ue){return ue.rootElement=Lf(ue.rootElement),ue}_append(){if(this._isAppended)return;const ue=this._getElement();this._config.rootElement.append(ue),Sa.on(ue,d1,()=>{Jc(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(ue){db(ue,this._getElement(),this._config.isAnimated)}}const uS="focustrap",cS="bs.focustrap",vd=`.${cS}`,fS=`focusin${vd}`,hS=`keydown.tab${vd}`,vS="Tab",pS="forward",g1="backward",dS={autofocus:!0,trapElement:null},gS={autofocus:"boolean",trapElement:"element"};class Pb extends ap{constructor(ue){super(),this._config=this._getConfig(ue),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return dS}static get DefaultType(){return gS}static get NAME(){return uS}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Sa.off(document,vd),Sa.on(document,fS,ue=>this._handleFocusin(ue)),Sa.on(document,hS,ue=>this._handleKeydown(ue)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,Sa.off(document,vd))}_handleFocusin(ue){const{trapElement:t}=this._config;if(ue.target===document||ue.target===t||t.contains(ue.target))return;const N=Xi.focusableChildren(t);N.length===0?t.focus():this._lastTabNavDirection===g1?N[N.length-1].focus():N[0].focus()}_handleKeydown(ue){ue.key===vS&&(this._lastTabNavDirection=ue.shiftKey?g1:pS)}}const yS="modal",mS="bs.modal",Sc=`.${mS}`,xS=".data-api",bS="Escape",_S=`hide${Sc}`,wS=`hidePrevented${Sc}`,Db=`hidden${Sc}`,Rb=`show${Sc}`,TS=`shown${Sc}`,AS=`resize${Sc}`,MS=`click.dismiss${Sc}`,ES=`mousedown.dismiss${Sc}`,SS=`keydown.dismiss${Sc}`,kS=`click${Sc}${xS}`,y1="modal-open",CS="fade",m1="show",P0="modal-static",LS=".modal.show",PS=".modal-dialog",DS=".modal-body",RS='[data-bs-toggle="modal"]',IS={backdrop:!0,focus:!0,keyboard:!0},FS={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ov extends Ec{constructor(ue,t){super(ue,t),this._dialog=Xi.findOne(PS,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new sg,this._addEventListeners()}static get Default(){return IS}static get DefaultType(){return FS}static get NAME(){return yS}toggle(ue){return this._isShown?this.hide():this.show(ue)}show(ue){this._isShown||this._isTransitioning||Sa.trigger(this._element,Rb,{relatedTarget:ue}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(y1),this._adjustDialog(),this._backdrop.show(()=>this._showElement(ue)))}hide(){!this._isShown||this._isTransitioning||Sa.trigger(this._element,_S).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(m1),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const ue of[window,this._dialog])Sa.off(ue,Sc);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Lb({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Pb({trapElement:this._element})}_showElement(ue){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Xi.findOne(DS,this._dialog);t&&(t.scrollTop=0),np(this._element),this._element.classList.add(m1);const N=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Sa.trigger(this._element,TS,{relatedTarget:ue})};this._queueCallback(N,this._dialog,this._isAnimated())}_addEventListeners(){Sa.on(this._element,SS,ue=>{if(ue.key===bS){if(this._config.keyboard){ue.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),Sa.on(window,AS,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Sa.on(this._element,ES,ue=>{Sa.one(this._element,MS,t=>{if(!(this._element!==ue.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(y1),this._resetAdjustments(),this._scrollBar.reset(),Sa.trigger(this._element,Db)})}_isAnimated(){return this._element.classList.contains(CS)}_triggerBackdropTransition(){if(Sa.trigger(this._element,wS).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,N=this._element.style.overflowY;N==="hidden"||this._element.classList.contains(P0)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(P0),this._queueCallback(()=>{this._element.classList.remove(P0),this._queueCallback(()=>{this._element.style.overflowY=N},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const ue=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),N=t>0;if(N&&!ue){const V=uc()?"paddingLeft":"paddingRight";this._element.style[V]=`${t}px`}if(!N&&ue){const V=uc()?"paddingRight":"paddingLeft";this._element.style[V]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(ue,t){return this.each(function(){const N=ov.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof N[ue]>"u")throw new TypeError(`No method named "${ue}"`);N[ue](t)}})}}Sa.on(document,kS,RS,function(se){const ue=$c(this);["A","AREA"].includes(this.tagName)&&se.preventDefault(),Sa.one(ue,Rb,V=>{V.defaultPrevented||Sa.one(ue,Db,()=>{hv(this)&&this.focus()})});const t=Xi.findOne(LS);t&&ov.getInstance(t).hide(),ov.getOrCreateInstance(ue).toggle(this)});Dd(ov);fc(ov);const zS="offcanvas",OS="bs.offcanvas",nf=`.${OS}`,Ib=".data-api",NS=`load${nf}${Ib}`,BS="Escape",x1="show",b1="showing",_1="hiding",US="offcanvas-backdrop",Fb=".offcanvas.show",VS=`show${nf}`,HS=`shown${nf}`,GS=`hide${nf}`,w1=`hidePrevented${nf}`,zb=`hidden${nf}`,YS=`resize${nf}`,WS=`click${nf}${Ib}`,XS=`keydown.dismiss${nf}`,jS='[data-bs-toggle="offcanvas"]',ZS={backdrop:!0,keyboard:!0,scroll:!1},KS={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Df extends Ec{constructor(ue,t){super(ue,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ZS}static get DefaultType(){return KS}static get NAME(){return zS}toggle(ue){return this._isShown?this.hide():this.show(ue)}show(ue){if(this._isShown||Sa.trigger(this._element,VS,{relatedTarget:ue}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new sg().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(b1);const N=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(x1),this._element.classList.remove(b1),Sa.trigger(this._element,HS,{relatedTarget:ue})};this._queueCallback(N,this._element,!0)}hide(){if(!this._isShown||Sa.trigger(this._element,GS).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(_1),this._backdrop.hide();const t=()=>{this._element.classList.remove(x1,_1),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new sg().reset(),Sa.trigger(this._element,zb)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const ue=()=>{if(this._config.backdrop==="static"){Sa.trigger(this._element,w1);return}this.hide()},t=Boolean(this._config.backdrop);return new Lb({className:US,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?ue:null})}_initializeFocusTrap(){return new Pb({trapElement:this._element})}_addEventListeners(){Sa.on(this._element,XS,ue=>{if(ue.key===BS){if(!this._config.keyboard){Sa.trigger(this._element,w1);return}this.hide()}})}static jQueryInterface(ue){return this.each(function(){const t=Df.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue](this)}})}}Sa.on(document,WS,jS,function(se){const ue=$c(this);if(["A","AREA"].includes(this.tagName)&&se.preventDefault(),Pf(this))return;Sa.one(ue,zb,()=>{hv(this)&&this.focus()});const t=Xi.findOne(Fb);t&&t!==ue&&Df.getInstance(t).hide(),Df.getOrCreateInstance(ue).toggle(this)});Sa.on(window,NS,()=>{for(const se of Xi.find(Fb))Df.getOrCreateInstance(se).show()});Sa.on(window,YS,()=>{for(const se of Xi.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(se).position!=="fixed"&&Df.getOrCreateInstance(se).hide()});Dd(Df);fc(Df);const JS=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),$S=/^aria-[\w-]*$/i,QS=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,qS=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,e4=(se,ue)=>{const t=se.nodeName.toLowerCase();return ue.includes(t)?JS.has(t)?Boolean(QS.test(se.nodeValue)||qS.test(se.nodeValue)):!0:ue.filter(N=>N instanceof RegExp).some(N=>N.test(t))},Ob={"*":["class","dir","id","lang","role",$S],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function t4(se,ue,t){if(!se.length)return se;if(t&&typeof t=="function")return t(se);const V=new window.DOMParser().parseFromString(se,"text/html"),y=[].concat(...V.body.querySelectorAll("*"));for(const c of y){const A=c.nodeName.toLowerCase();if(!Object.keys(ue).includes(A)){c.remove();continue}const T=[].concat(...c.attributes),e=[].concat(ue["*"]||[],ue[A]||[]);for(const a of T)e4(a,e)||c.removeAttribute(a.nodeName)}return V.body.innerHTML}const r4="TemplateFactory",n4={allowList:Ob,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},a4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},i4={entry:"(string|element|function|null)",selector:"(string|element)"};class o4 extends ap{constructor(ue){super(),this._config=this._getConfig(ue)}static get Default(){return n4}static get DefaultType(){return a4}static get NAME(){return r4}getContent(){return Object.values(this._config.content).map(ue=>this._resolvePossibleFunction(ue)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(ue){return this._checkContent(ue),this._config.content={...this._config.content,...ue},this}toHtml(){const ue=document.createElement("div");ue.innerHTML=this._maybeSanitize(this._config.template);for(const[V,y]of Object.entries(this._config.content))this._setContent(ue,y,V);const t=ue.children[0],N=this._resolvePossibleFunction(this._config.extraClass);return N&&t.classList.add(...N.split(" ")),t}_typeCheckConfig(ue){super._typeCheckConfig(ue),this._checkContent(ue.content)}_checkContent(ue){for(const[t,N]of Object.entries(ue))super._typeCheckConfig({selector:t,entry:N},i4)}_setContent(ue,t,N){const V=Xi.findOne(N,ue);if(!!V){if(t=this._resolvePossibleFunction(t),!t){V.remove();return}if(Qc(t)){this._putElementInTemplate(Lf(t),V);return}if(this._config.html){V.innerHTML=this._maybeSanitize(t);return}V.textContent=t}}_maybeSanitize(ue){return this._config.sanitize?t4(ue,this._config.allowList,this._config.sanitizeFn):ue}_resolvePossibleFunction(ue){return typeof ue=="function"?ue(this):ue}_putElementInTemplate(ue,t){if(this._config.html){t.innerHTML="",t.append(ue);return}t.textContent=ue.textContent}}const s4="tooltip",l4=new Set(["sanitize","allowList","sanitizeFn"]),D0="fade",u4="modal",Xp="show",c4=".tooltip-inner",T1=`.${u4}`,A1="hide.bs.modal",Uv="hover",R0="focus",f4="click",h4="manual",v4="hide",p4="hidden",d4="show",g4="shown",y4="inserted",m4="click",x4="focusin",b4="focusout",_4="mouseenter",w4="mouseleave",T4={AUTO:"auto",TOP:"top",RIGHT:uc()?"left":"right",BOTTOM:"bottom",LEFT:uc()?"right":"left"},A4={allowList:Ob,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},M4={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class pv extends Ec{constructor(ue,t){if(typeof Yg>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(ue,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return A4}static get DefaultType(){return M4}static get NAME(){return s4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),Sa.off(this._element.closest(T1),A1,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const ue=Sa.trigger(this._element,this.constructor.eventName(d4)),N=(vb(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(ue.defaultPrevented||!N)return;this._disposePopper();const V=this._getTipElement();this._element.setAttribute("aria-describedby",V.getAttribute("id"));const{container:y}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(y.append(V),Sa.trigger(this._element,this.constructor.eventName(y4))),this._popper=this._createPopper(V),V.classList.add(Xp),"ontouchstart"in document.documentElement)for(const A of[].concat(...document.body.children))Sa.on(A,"mouseover",fd);const c=()=>{Sa.trigger(this._element,this.constructor.eventName(g4)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(c,this.tip,this._isAnimated())}hide(){if(!this._isShown()||Sa.trigger(this._element,this.constructor.eventName(v4)).defaultPrevented)return;if(this._getTipElement().classList.remove(Xp),"ontouchstart"in document.documentElement)for(const V of[].concat(...document.body.children))Sa.off(V,"mouseover",fd);this._activeTrigger[f4]=!1,this._activeTrigger[R0]=!1,this._activeTrigger[Uv]=!1,this._isHovered=null;const N=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Sa.trigger(this._element,this.constructor.eventName(p4)))};this._queueCallback(N,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(ue){const t=this._getTemplateFactory(ue).toHtml();if(!t)return null;t.classList.remove(D0,Xp),t.classList.add(`bs-${this.constructor.NAME}-auto`);const N=cM(this.constructor.NAME).toString();return t.setAttribute("id",N),this._isAnimated()&&t.classList.add(D0),t}setContent(ue){this._newContent=ue,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(ue){return this._templateFactory?this._templateFactory.changeContent(ue):this._templateFactory=new o4({...this._config,content:ue,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[c4]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(ue){return this.constructor.getOrCreateInstance(ue.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(D0)}_isShown(){return this.tip&&this.tip.classList.contains(Xp)}_createPopper(ue){const t=typeof this._config.placement=="function"?this._config.placement.call(this,ue,this._element):this._config.placement,N=T4[t.toUpperCase()];return Gg(this._element,ue,this._getPopperConfig(N))}_getOffset(){const{offset:ue}=this._config;return typeof ue=="string"?ue.split(",").map(t=>Number.parseInt(t,10)):typeof ue=="function"?t=>ue(t,this._element):ue}_resolvePossibleFunction(ue){return typeof ue=="function"?ue.call(this._element):ue}_getPopperConfig(ue){const t={placement:ue,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:N=>{this._getTipElement().setAttribute("data-popper-placement",N.state.placement)}}]};return{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_setListeners(){const ue=this._config.trigger.split(" ");for(const t of ue)if(t==="click")Sa.on(this._element,this.constructor.eventName(m4),this._config.selector,N=>{this._initializeOnDelegatedTarget(N).toggle()});else if(t!==h4){const N=t===Uv?this.constructor.eventName(_4):this.constructor.eventName(x4),V=t===Uv?this.constructor.eventName(w4):this.constructor.eventName(b4);Sa.on(this._element,N,this._config.selector,y=>{const c=this._initializeOnDelegatedTarget(y);c._activeTrigger[y.type==="focusin"?R0:Uv]=!0,c._enter()}),Sa.on(this._element,V,this._config.selector,y=>{const c=this._initializeOnDelegatedTarget(y);c._activeTrigger[y.type==="focusout"?R0:Uv]=c._element.contains(y.relatedTarget),c._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Sa.on(this._element.closest(T1),A1,this._hideModalHandler)}_fixTitle(){const ue=this._element.getAttribute("title");!ue||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",ue),this._element.setAttribute("data-bs-original-title",ue),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(ue,t){clearTimeout(this._timeout),this._timeout=setTimeout(ue,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(ue){const t=qc.getDataAttributes(this._element);for(const N of Object.keys(t))l4.has(N)&&delete t[N];return ue={...t,...typeof ue=="object"&&ue?ue:{}},ue=this._mergeConfigObj(ue),ue=this._configAfterMerge(ue),this._typeCheckConfig(ue),ue}_configAfterMerge(ue){return ue.container=ue.container===!1?document.body:Lf(ue.container),typeof ue.delay=="number"&&(ue.delay={show:ue.delay,hide:ue.delay}),typeof ue.title=="number"&&(ue.title=ue.title.toString()),typeof ue.content=="number"&&(ue.content=ue.content.toString()),ue}_getDelegateConfig(){const ue={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(ue[t]=this._config[t]);return ue.selector=!1,ue.trigger="manual",ue}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(ue){return this.each(function(){const t=pv.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof t[ue]>"u")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}fc(pv);const E4="popover",S4=".popover-header",k4=".popover-body",C4={...pv.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},L4={...pv.DefaultType,content:"(null|string|element|function)"};class Zg extends pv{static get Default(){return C4}static get DefaultType(){return L4}static get NAME(){return E4}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[S4]:this._getTitle(),[k4]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(ue){return this.each(function(){const t=Zg.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof t[ue]>"u")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}fc(Zg);const P4="scrollspy",D4="bs.scrollspy",Kg=`.${D4}`,R4=".data-api",I4=`activate${Kg}`,M1=`click${Kg}`,F4=`load${Kg}${R4}`,z4="dropdown-item",Hh="active",O4='[data-bs-spy="scroll"]',I0="[href]",N4=".nav, .list-group",E1=".nav-link",B4=".nav-item",U4=".list-group-item",V4=`${E1}, ${B4} > ${E1}, ${U4}`,H4=".dropdown",G4=".dropdown-toggle",Y4={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},W4={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Fd extends Ec{constructor(ue,t){super(ue,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Y4}static get DefaultType(){return W4}static get NAME(){return P4}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const ue of this._observableSections.values())this._observer.observe(ue)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(ue){return ue.target=Lf(ue.target)||document.body,ue.rootMargin=ue.offset?`${ue.offset}px 0px -30%`:ue.rootMargin,typeof ue.threshold=="string"&&(ue.threshold=ue.threshold.split(",").map(t=>Number.parseFloat(t))),ue}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(Sa.off(this._config.target,M1),Sa.on(this._config.target,M1,I0,ue=>{const t=this._observableSections.get(ue.target.hash);if(t){ue.preventDefault();const N=this._rootElement||window,V=t.offsetTop-this._element.offsetTop;if(N.scrollTo){N.scrollTo({top:V,behavior:"smooth"});return}N.scrollTop=V}}))}_getNewObserver(){const ue={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),ue)}_observerCallback(ue){const t=c=>this._targetLinks.get(`#${c.target.id}`),N=c=>{this._previousScrollData.visibleEntryTop=c.target.offsetTop,this._process(t(c))},V=(this._rootElement||document.documentElement).scrollTop,y=V>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=V;for(const c of ue){if(!c.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(c));continue}const A=c.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(y&&A){if(N(c),!V)return;continue}!y&&!A&&N(c)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const ue=Xi.find(I0,this._config.target);for(const t of ue){if(!t.hash||Pf(t))continue;const N=Xi.findOne(t.hash,this._element);hv(N)&&(this._targetLinks.set(t.hash,t),this._observableSections.set(t.hash,N))}}_process(ue){this._activeTarget!==ue&&(this._clearActiveClass(this._config.target),this._activeTarget=ue,ue.classList.add(Hh),this._activateParents(ue),Sa.trigger(this._element,I4,{relatedTarget:ue}))}_activateParents(ue){if(ue.classList.contains(z4)){Xi.findOne(G4,ue.closest(H4)).classList.add(Hh);return}for(const t of Xi.parents(ue,N4))for(const N of Xi.prev(t,V4))N.classList.add(Hh)}_clearActiveClass(ue){ue.classList.remove(Hh);const t=Xi.find(`${I0}.${Hh}`,ue);for(const N of t)N.classList.remove(Hh)}static jQueryInterface(ue){return this.each(function(){const t=Fd.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}Sa.on(window,F4,()=>{for(const se of Xi.find(O4))Fd.getOrCreateInstance(se)});fc(Fd);const X4="tab",j4="bs.tab",fh=`.${j4}`,Z4=`hide${fh}`,K4=`hidden${fh}`,J4=`show${fh}`,$4=`shown${fh}`,Q4=`click${fh}`,q4=`keydown${fh}`,ek=`load${fh}`,tk="ArrowLeft",S1="ArrowRight",rk="ArrowUp",k1="ArrowDown",nh="active",C1="fade",F0="show",nk="dropdown",ak=".dropdown-toggle",ik=".dropdown-menu",z0=":not(.dropdown-toggle)",ok='.list-group, .nav, [role="tablist"]',sk=".nav-item, .list-group-item",lk=`.nav-link${z0}, .list-group-item${z0}, [role="tab"]${z0}`,Nb='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',O0=`${lk}, ${Nb}`,uk=`.${nh}[data-bs-toggle="tab"], .${nh}[data-bs-toggle="pill"], .${nh}[data-bs-toggle="list"]`;class sv extends Ec{constructor(ue){super(ue),this._parent=this._element.closest(ok),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Sa.on(this._element,q4,t=>this._keydown(t)))}static get NAME(){return X4}show(){const ue=this._element;if(this._elemIsActive(ue))return;const t=this._getActiveElem(),N=t?Sa.trigger(t,Z4,{relatedTarget:ue}):null;Sa.trigger(ue,J4,{relatedTarget:t}).defaultPrevented||N&&N.defaultPrevented||(this._deactivate(t,ue),this._activate(ue,t))}_activate(ue,t){if(!ue)return;ue.classList.add(nh),this._activate($c(ue));const N=()=>{if(ue.getAttribute("role")!=="tab"){ue.classList.add(F0);return}ue.removeAttribute("tabindex"),ue.setAttribute("aria-selected",!0),this._toggleDropDown(ue,!0),Sa.trigger(ue,$4,{relatedTarget:t})};this._queueCallback(N,ue,ue.classList.contains(C1))}_deactivate(ue,t){if(!ue)return;ue.classList.remove(nh),ue.blur(),this._deactivate($c(ue));const N=()=>{if(ue.getAttribute("role")!=="tab"){ue.classList.remove(F0);return}ue.setAttribute("aria-selected",!1),ue.setAttribute("tabindex","-1"),this._toggleDropDown(ue,!1),Sa.trigger(ue,K4,{relatedTarget:t})};this._queueCallback(N,ue,ue.classList.contains(C1))}_keydown(ue){if(![tk,S1,rk,k1].includes(ue.key))return;ue.stopPropagation(),ue.preventDefault();const t=[S1,k1].includes(ue.key),N=Wg(this._getChildren().filter(V=>!Pf(V)),ue.target,t,!0);N&&(N.focus({preventScroll:!0}),sv.getOrCreateInstance(N).show())}_getChildren(){return Xi.find(O0,this._parent)}_getActiveElem(){return this._getChildren().find(ue=>this._elemIsActive(ue))||null}_setInitialAttributes(ue,t){this._setAttributeIfNotExists(ue,"role","tablist");for(const N of t)this._setInitialAttributesOnChild(N)}_setInitialAttributesOnChild(ue){ue=this._getInnerElement(ue);const t=this._elemIsActive(ue),N=this._getOuterElement(ue);ue.setAttribute("aria-selected",t),N!==ue&&this._setAttributeIfNotExists(N,"role","presentation"),t||ue.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(ue,"role","tab"),this._setInitialAttributesOnTargetPanel(ue)}_setInitialAttributesOnTargetPanel(ue){const t=$c(ue);!t||(this._setAttributeIfNotExists(t,"role","tabpanel"),ue.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`#${ue.id}`))}_toggleDropDown(ue,t){const N=this._getOuterElement(ue);if(!N.classList.contains(nk))return;const V=(y,c)=>{const A=Xi.findOne(y,N);A&&A.classList.toggle(c,t)};V(ak,nh),V(ik,F0),N.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(ue,t,N){ue.hasAttribute(t)||ue.setAttribute(t,N)}_elemIsActive(ue){return ue.classList.contains(nh)}_getInnerElement(ue){return ue.matches(O0)?ue:Xi.findOne(O0,ue)}_getOuterElement(ue){return ue.closest(sk)||ue}static jQueryInterface(ue){return this.each(function(){const t=sv.getOrCreateInstance(this);if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}Sa.on(document,Q4,Nb,function(se){["A","AREA"].includes(this.tagName)&&se.preventDefault(),!Pf(this)&&sv.getOrCreateInstance(this).show()});Sa.on(window,ek,()=>{for(const se of Xi.find(uk))sv.getOrCreateInstance(se)});fc(sv);const ck="toast",fk="bs.toast",Ff=`.${fk}`,hk=`mouseover${Ff}`,vk=`mouseout${Ff}`,pk=`focusin${Ff}`,dk=`focusout${Ff}`,gk=`hide${Ff}`,yk=`hidden${Ff}`,mk=`show${Ff}`,xk=`shown${Ff}`,bk="fade",L1="hide",jp="show",Zp="showing",_k={animation:"boolean",autohide:"boolean",delay:"number"},wk={animation:!0,autohide:!0,delay:5e3};class zd extends Ec{constructor(ue,t){super(ue,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return wk}static get DefaultType(){return _k}static get NAME(){return ck}show(){if(Sa.trigger(this._element,mk).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(bk);const t=()=>{this._element.classList.remove(Zp),Sa.trigger(this._element,xk),this._maybeScheduleHide()};this._element.classList.remove(L1),np(this._element),this._element.classList.add(jp,Zp),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||Sa.trigger(this._element,gk).defaultPrevented)return;const t=()=>{this._element.classList.add(L1),this._element.classList.remove(Zp,jp),Sa.trigger(this._element,yk)};this._element.classList.add(Zp),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(jp),super.dispose()}isShown(){return this._element.classList.contains(jp)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(ue,t){switch(ue.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const N=ue.relatedTarget;this._element===N||this._element.contains(N)||this._maybeScheduleHide()}_setListeners(){Sa.on(this._element,hk,ue=>this._onInteraction(ue,!0)),Sa.on(this._element,vk,ue=>this._onInteraction(ue,!1)),Sa.on(this._element,pk,ue=>this._onInteraction(ue,!0)),Sa.on(this._element,dk,ue=>this._onInteraction(ue,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(ue){return this.each(function(){const t=zd.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof t[ue]>"u")throw new TypeError(`No method named "${ue}"`);t[ue](this)}})}}Dd(zd);fc(zd);var Tk={exports:{}};const Ak=yA(Yg);/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(se,ue){(function(t,N){se.exports=N(Ak)})(Uo,function(t){function N(Yr){if(Yr&&Yr.__esModule)return Yr;const et=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(Yr){for(const Jt in Yr)if(Jt!=="default"){const Kr=Object.getOwnPropertyDescriptor(Yr,Jt);Object.defineProperty(et,Jt,Kr.get?Kr:{enumerable:!0,get:()=>Yr[Jt]})}}return et.default=Yr,Object.freeze(et)}const V=N(t),y=1e6,c=1e3,A="transitionend",T=Yr=>Yr==null?`${Yr}`:Object.prototype.toString.call(Yr).match(/\s([a-z]+)/i)[1].toLowerCase(),e=Yr=>{do Yr+=Math.floor(Math.random()*y);while(document.getElementById(Yr));return Yr},a=Yr=>{let et=Yr.getAttribute("data-bs-target");if(!et||et==="#"){let Jt=Yr.getAttribute("href");if(!Jt||!Jt.includes("#")&&!Jt.startsWith("."))return null;Jt.includes("#")&&!Jt.startsWith("#")&&(Jt=`#${Jt.split("#")[1]}`),et=Jt&&Jt!=="#"?Jt.trim():null}return et},i=Yr=>{const et=a(Yr);return et&&document.querySelector(et)?et:null},n=Yr=>{const et=a(Yr);return et?document.querySelector(et):null},r=Yr=>{if(!Yr)return 0;let{transitionDuration:et,transitionDelay:Jt}=window.getComputedStyle(Yr);const Kr=Number.parseFloat(et),Hn=Number.parseFloat(Jt);return!Kr&&!Hn?0:(et=et.split(",")[0],Jt=Jt.split(",")[0],(Number.parseFloat(et)+Number.parseFloat(Jt))*c)},v=Yr=>{Yr.dispatchEvent(new Event(A))},s=Yr=>!Yr||typeof Yr!="object"?!1:(typeof Yr.jquery<"u"&&(Yr=Yr[0]),typeof Yr.nodeType<"u"),o=Yr=>s(Yr)?Yr.jquery?Yr[0]:Yr:typeof Yr=="string"&&Yr.length>0?document.querySelector(Yr):null,b=Yr=>{if(!s(Yr)||Yr.getClientRects().length===0)return!1;const et=getComputedStyle(Yr).getPropertyValue("visibility")==="visible",Jt=Yr.closest("details:not([open])");if(!Jt)return et;if(Jt!==Yr){const Kr=Yr.closest("summary");if(Kr&&Kr.parentNode!==Jt||Kr===null)return!1}return et},g=Yr=>!Yr||Yr.nodeType!==Node.ELEMENT_NODE||Yr.classList.contains("disabled")?!0:typeof Yr.disabled<"u"?Yr.disabled:Yr.hasAttribute("disabled")&&Yr.getAttribute("disabled")!=="false",d=Yr=>{if(!document.documentElement.attachShadow)return null;if(typeof Yr.getRootNode=="function"){const et=Yr.getRootNode();return et instanceof ShadowRoot?et:null}return Yr instanceof ShadowRoot?Yr:Yr.parentNode?d(Yr.parentNode):null},f=()=>{},m=Yr=>{Yr.offsetHeight},l=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,x=[],u=Yr=>{document.readyState==="loading"?(x.length||document.addEventListener("DOMContentLoaded",()=>{for(const et of x)et()}),x.push(Yr)):Yr()},M=()=>document.documentElement.dir==="rtl",w=Yr=>{u(()=>{const et=l();if(et){const Jt=Yr.NAME,Kr=et.fn[Jt];et.fn[Jt]=Yr.jQueryInterface,et.fn[Jt].Constructor=Yr,et.fn[Jt].noConflict=()=>(et.fn[Jt]=Kr,Yr.jQueryInterface)}})},p=Yr=>{typeof Yr=="function"&&Yr()},_=(Yr,et,Jt=!0)=>{if(!Jt){p(Yr);return}const Kr=5,Hn=r(et)+Kr;let ta=!1;const ea=({target:vi})=>{vi===et&&(ta=!0,et.removeEventListener(A,ea),p(Yr))};et.addEventListener(A,ea),setTimeout(()=>{ta||v(et)},Hn)},h=(Yr,et,Jt,Kr)=>{const Hn=Yr.length;let ta=Yr.indexOf(et);return ta===-1?!Jt&&Kr?Yr[Hn-1]:Yr[0]:(ta+=Jt?1:-1,Kr&&(ta=(ta+Hn)%Hn),Yr[Math.max(0,Math.min(ta,Hn-1))])},L=/[^.]*(?=\..*)\.|.*/,E=/\..*/,S=/::\d+$/,P={};let F=1;const I={mouseenter:"mouseover",mouseleave:"mouseout"},D=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function R(Yr,et){return et&&`${et}::${F++}`||Yr.uidEvent||F++}function O(Yr){const et=R(Yr);return Yr.uidEvent=et,P[et]=P[et]||{},P[et]}function z(Yr,et){return function Jt(Kr){return J(Kr,{delegateTarget:Yr}),Jt.oneOff&&K.off(Yr,Kr.type,et),et.apply(Yr,[Kr])}}function G(Yr,et,Jt){return function Kr(Hn){const ta=Yr.querySelectorAll(et);for(let{target:ea}=Hn;ea&&ea!==this;ea=ea.parentNode)for(const vi of ta)if(vi===ea)return J(Hn,{delegateTarget:ea}),Kr.oneOff&&K.off(Yr,Hn.type,et,Jt),Jt.apply(ea,[Hn])}}function Y(Yr,et,Jt=null){return Object.values(Yr).find(Kr=>Kr.callable===et&&Kr.delegationSelector===Jt)}function ee(Yr,et,Jt){const Kr=typeof et=="string",Hn=Kr?Jt:et||Jt;let ta=he(Yr);return D.has(ta)||(ta=Yr),[Kr,Hn,ta]}function j(Yr,et,Jt,Kr,Hn){if(typeof et!="string"||!Yr)return;let[ta,ea,vi]=ee(et,Jt,Kr);et in I&&(ea=(Ue=>function(Be){if(!Be.relatedTarget||Be.relatedTarget!==Be.delegateTarget&&!Be.delegateTarget.contains(Be.relatedTarget))return Ue.call(this,Be)})(ea));const Di=O(Yr),Ji=Di[vi]||(Di[vi]={}),Ri=Y(Ji,ea,ta?Jt:null);if(Ri){Ri.oneOff=Ri.oneOff&&Hn;return}const ce=R(ea,et.replace(L,"")),Te=ta?G(Yr,Jt,ea):z(Yr,ea);Te.delegationSelector=ta?Jt:null,Te.callable=ea,Te.oneOff=Hn,Te.uidEvent=ce,Ji[ce]=Te,Yr.addEventListener(vi,Te,ta)}function X(Yr,et,Jt,Kr,Hn){const ta=Y(et[Jt],Kr,Hn);!ta||(Yr.removeEventListener(Jt,ta,Boolean(Hn)),delete et[Jt][ta.uidEvent])}function ae(Yr,et,Jt,Kr){const Hn=et[Jt]||{};for(const ta of Object.keys(Hn))if(ta.includes(Kr)){const ea=Hn[ta];X(Yr,et,Jt,ea.callable,ea.delegationSelector)}}function he(Yr){return Yr=Yr.replace(E,""),I[Yr]||Yr}const K={on(Yr,et,Jt,Kr){j(Yr,et,Jt,Kr,!1)},one(Yr,et,Jt,Kr){j(Yr,et,Jt,Kr,!0)},off(Yr,et,Jt,Kr){if(typeof et!="string"||!Yr)return;const[Hn,ta,ea]=ee(et,Jt,Kr),vi=ea!==et,Di=O(Yr),Ji=Di[ea]||{},Ri=et.startsWith(".");if(typeof ta<"u"){if(!Object.keys(Ji).length)return;X(Yr,Di,ea,ta,Hn?Jt:null);return}if(Ri)for(const ce of Object.keys(Di))ae(Yr,Di,ce,et.slice(1));for(const ce of Object.keys(Ji)){const Te=ce.replace(S,"");if(!vi||et.includes(Te)){const Re=Ji[ce];X(Yr,Di,ea,Re.callable,Re.delegationSelector)}}},trigger(Yr,et,Jt){if(typeof et!="string"||!Yr)return null;const Kr=l(),Hn=he(et),ta=et!==Hn;let ea=null,vi=!0,Di=!0,Ji=!1;ta&&Kr&&(ea=Kr.Event(et,Jt),Kr(Yr).trigger(ea),vi=!ea.isPropagationStopped(),Di=!ea.isImmediatePropagationStopped(),Ji=ea.isDefaultPrevented());let Ri=new Event(et,{bubbles:vi,cancelable:!0});return Ri=J(Ri,Jt),Ji&&Ri.preventDefault(),Di&&Yr.dispatchEvent(Ri),Ri.defaultPrevented&&ea&&ea.preventDefault(),Ri}};function J(Yr,et){for(const[Jt,Kr]of Object.entries(et||{}))try{Yr[Jt]=Kr}catch{Object.defineProperty(Yr,Jt,{configurable:!0,get(){return Kr}})}return Yr}const U=new Map,H={set(Yr,et,Jt){U.has(Yr)||U.set(Yr,new Map);const Kr=U.get(Yr);if(!Kr.has(et)&&Kr.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Kr.keys())[0]}.`);return}Kr.set(et,Jt)},get(Yr,et){return U.has(Yr)&&U.get(Yr).get(et)||null},remove(Yr,et){if(!U.has(Yr))return;const Jt=U.get(Yr);Jt.delete(et),Jt.size===0&&U.delete(Yr)}};function q(Yr){if(Yr==="true")return!0;if(Yr==="false")return!1;if(Yr===Number(Yr).toString())return Number(Yr);if(Yr===""||Yr==="null")return null;if(typeof Yr!="string")return Yr;try{return JSON.parse(decodeURIComponent(Yr))}catch{return Yr}}function re(Yr){return Yr.replace(/[A-Z]/g,et=>`-${et.toLowerCase()}`)}const Z={setDataAttribute(Yr,et,Jt){Yr.setAttribute(`data-bs-${re(et)}`,Jt)},removeDataAttribute(Yr,et){Yr.removeAttribute(`data-bs-${re(et)}`)},getDataAttributes(Yr){if(!Yr)return{};const et={},Jt=Object.keys(Yr.dataset).filter(Kr=>Kr.startsWith("bs")&&!Kr.startsWith("bsConfig"));for(const Kr of Jt){let Hn=Kr.replace(/^bs/,"");Hn=Hn.charAt(0).toLowerCase()+Hn.slice(1,Hn.length),et[Hn]=q(Yr.dataset[Kr])}return et},getDataAttribute(Yr,et){return q(Yr.getAttribute(`data-bs-${re(et)}`))}};class Q{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(et){return et=this._mergeConfigObj(et),et=this._configAfterMerge(et),this._typeCheckConfig(et),et}_configAfterMerge(et){return et}_mergeConfigObj(et,Jt){const Kr=s(Jt)?Z.getDataAttribute(Jt,"config"):{};return{...this.constructor.Default,...typeof Kr=="object"?Kr:{},...s(Jt)?Z.getDataAttributes(Jt):{},...typeof et=="object"?et:{}}}_typeCheckConfig(et,Jt=this.constructor.DefaultType){for(const Kr of Object.keys(Jt)){const Hn=Jt[Kr],ta=et[Kr],ea=s(ta)?"element":T(ta);if(!new RegExp(Hn).test(ea))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Kr}" provided type "${ea}" but expected type "${Hn}".`)}}}const ie="5.2.3";class oe extends Q{constructor(et,Jt){super(),et=o(et),et&&(this._element=et,this._config=this._getConfig(Jt),H.set(this._element,this.constructor.DATA_KEY,this))}dispose(){H.remove(this._element,this.constructor.DATA_KEY),K.off(this._element,this.constructor.EVENT_KEY);for(const et of Object.getOwnPropertyNames(this))this[et]=null}_queueCallback(et,Jt,Kr=!0){_(et,Jt,Kr)}_getConfig(et){return et=this._mergeConfigObj(et,this._element),et=this._configAfterMerge(et),this._typeCheckConfig(et),et}static getInstance(et){return H.get(o(et),this.DATA_KEY)}static getOrCreateInstance(et,Jt={}){return this.getInstance(et)||new this(et,typeof Jt=="object"?Jt:null)}static get VERSION(){return ie}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(et){return`${et}${this.EVENT_KEY}`}}const ne=(Yr,et="hide")=>{const Jt=`click.dismiss${Yr.EVENT_KEY}`,Kr=Yr.NAME;K.on(document,Jt,`[data-bs-dismiss="${Kr}"]`,function(Hn){if(["A","AREA"].includes(this.tagName)&&Hn.preventDefault(),g(this))return;const ta=n(this)||this.closest(`.${Kr}`);Yr.getOrCreateInstance(ta)[et]()})},le="alert",fe=".bs.alert",ye=`close${fe}`,xe=`closed${fe}`,me="fade",be="show";class ke extends oe{static get NAME(){return le}close(){if(K.trigger(this._element,ye).defaultPrevented)return;this._element.classList.remove(be);const Jt=this._element.classList.contains(me);this._queueCallback(()=>this._destroyElement(),this._element,Jt)}_destroyElement(){this._element.remove(),K.trigger(this._element,xe),this.dispose()}static jQueryInterface(et){return this.each(function(){const Jt=ke.getOrCreateInstance(this);if(typeof et=="string"){if(Jt[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);Jt[et](this)}})}}ne(ke,"close"),w(ke);const De="button",Ae=".bs.button",Le=".data-api",Ze="active",We='[data-bs-toggle="button"]',ze=`click${Ae}${Le}`;class Ie extends oe{static get NAME(){return De}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Ze))}static jQueryInterface(et){return this.each(function(){const Jt=Ie.getOrCreateInstance(this);et==="toggle"&&Jt[et]()})}}K.on(document,ze,We,Yr=>{Yr.preventDefault();const et=Yr.target.closest(We);Ie.getOrCreateInstance(et).toggle()}),w(Ie);const Ve={find(Yr,et=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(et,Yr))},findOne(Yr,et=document.documentElement){return Element.prototype.querySelector.call(et,Yr)},children(Yr,et){return[].concat(...Yr.children).filter(Jt=>Jt.matches(et))},parents(Yr,et){const Jt=[];let Kr=Yr.parentNode.closest(et);for(;Kr;)Jt.push(Kr),Kr=Kr.parentNode.closest(et);return Jt},prev(Yr,et){let Jt=Yr.previousElementSibling;for(;Jt;){if(Jt.matches(et))return[Jt];Jt=Jt.previousElementSibling}return[]},next(Yr,et){let Jt=Yr.nextElementSibling;for(;Jt;){if(Jt.matches(et))return[Jt];Jt=Jt.nextElementSibling}return[]},focusableChildren(Yr){const et=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(Jt=>`${Jt}:not([tabindex^="-"])`).join(",");return this.find(et,Yr).filter(Jt=>!g(Jt)&&b(Jt))}},dt="swipe",Ft=".bs.swipe",Qt=`touchstart${Ft}`,Ot=`touchmove${Ft}`,Ct=`touchend${Ft}`,jt=`pointerdown${Ft}`,Nt=`pointerup${Ft}`,Lt="touch",Xe="pen",it="pointer-event",Ye=40,Ee={endCallback:null,leftCallback:null,rightCallback:null},Ge={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ke extends Q{constructor(et,Jt){super(),this._element=et,!(!et||!Ke.isSupported())&&(this._config=this._getConfig(Jt),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Ee}static get DefaultType(){return Ge}static get NAME(){return dt}dispose(){K.off(this._element,Ft)}_start(et){if(!this._supportPointerEvents){this._deltaX=et.touches[0].clientX;return}this._eventIsPointerPenTouch(et)&&(this._deltaX=et.clientX)}_end(et){this._eventIsPointerPenTouch(et)&&(this._deltaX=et.clientX-this._deltaX),this._handleSwipe(),p(this._config.endCallback)}_move(et){this._deltaX=et.touches&&et.touches.length>1?0:et.touches[0].clientX-this._deltaX}_handleSwipe(){const et=Math.abs(this._deltaX);if(et<=Ye)return;const Jt=et/this._deltaX;this._deltaX=0,Jt&&p(Jt>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(K.on(this._element,jt,et=>this._start(et)),K.on(this._element,Nt,et=>this._end(et)),this._element.classList.add(it)):(K.on(this._element,Qt,et=>this._start(et)),K.on(this._element,Ot,et=>this._move(et)),K.on(this._element,Ct,et=>this._end(et)))}_eventIsPointerPenTouch(et){return this._supportPointerEvents&&(et.pointerType===Xe||et.pointerType===Lt)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const qe="carousel",mt=".bs.carousel",Mt=".data-api",Gt="ArrowLeft",zt="ArrowRight",Ht=500,Zt="next",Wt="prev",sr="left",Gr="right",cn=`slide${mt}`,qr=`slid${mt}`,st=`keydown${mt}`,rr=`mouseenter${mt}`,$t=`mouseleave${mt}`,hr=`dragstart${mt}`,Sr=`load${mt}${Mt}`,tt=`click${mt}${Mt}`,Qe="carousel",lt="active",ft="slide",Et="carousel-item-end",Vt="carousel-item-start",Pe="carousel-item-next",Se="carousel-item-prev",ot=".active",ct=".carousel-item",pt=ot+ct,St=".carousel-item img",xt=".carousel-indicators",Pt="[data-bs-slide], [data-bs-slide-to]",Xt='[data-bs-ride="carousel"]',or={[Gt]:Gr,[zt]:sr},Pr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ar={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Er extends oe{constructor(et,Jt){super(et,Jt),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ve.findOne(xt,this._element),this._addEventListeners(),this._config.ride===Qe&&this.cycle()}static get Default(){return Pr}static get DefaultType(){return Ar}static get NAME(){return qe}next(){this._slide(Zt)}nextWhenVisible(){!document.hidden&&b(this._element)&&this.next()}prev(){this._slide(Wt)}pause(){this._isSliding&&v(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){K.one(this._element,qr,()=>this.cycle());return}this.cycle()}}to(et){const Jt=this._getItems();if(et>Jt.length-1||et<0)return;if(this._isSliding){K.one(this._element,qr,()=>this.to(et));return}const Kr=this._getItemIndex(this._getActive());if(Kr===et)return;const Hn=et>Kr?Zt:Wt;this._slide(Hn,Jt[et])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(et){return et.defaultInterval=et.interval,et}_addEventListeners(){this._config.keyboard&&K.on(this._element,st,et=>this._keydown(et)),this._config.pause==="hover"&&(K.on(this._element,rr,()=>this.pause()),K.on(this._element,$t,()=>this._maybeEnableCycle())),this._config.touch&&Ke.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const Kr of Ve.find(St,this._element))K.on(Kr,hr,Hn=>Hn.preventDefault());const Jt={leftCallback:()=>this._slide(this._directionToOrder(sr)),rightCallback:()=>this._slide(this._directionToOrder(Gr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Ht+this._config.interval))}};this._swipeHelper=new Ke(this._element,Jt)}_keydown(et){if(/input|textarea/i.test(et.target.tagName))return;const Jt=or[et.key];Jt&&(et.preventDefault(),this._slide(this._directionToOrder(Jt)))}_getItemIndex(et){return this._getItems().indexOf(et)}_setActiveIndicatorElement(et){if(!this._indicatorsElement)return;const Jt=Ve.findOne(ot,this._indicatorsElement);Jt.classList.remove(lt),Jt.removeAttribute("aria-current");const Kr=Ve.findOne(`[data-bs-slide-to="${et}"]`,this._indicatorsElement);Kr&&(Kr.classList.add(lt),Kr.setAttribute("aria-current","true"))}_updateInterval(){const et=this._activeElement||this._getActive();if(!et)return;const Jt=Number.parseInt(et.getAttribute("data-bs-interval"),10);this._config.interval=Jt||this._config.defaultInterval}_slide(et,Jt=null){if(this._isSliding)return;const Kr=this._getActive(),Hn=et===Zt,ta=Jt||h(this._getItems(),Kr,Hn,this._config.wrap);if(ta===Kr)return;const ea=this._getItemIndex(ta),vi=Re=>K.trigger(this._element,Re,{relatedTarget:ta,direction:this._orderToDirection(et),from:this._getItemIndex(Kr),to:ea});if(vi(cn).defaultPrevented||!Kr||!ta)return;const Ji=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ea),this._activeElement=ta;const Ri=Hn?Vt:Et,ce=Hn?Pe:Se;ta.classList.add(ce),m(ta),Kr.classList.add(Ri),ta.classList.add(Ri);const Te=()=>{ta.classList.remove(Ri,ce),ta.classList.add(lt),Kr.classList.remove(lt,ce,Ri),this._isSliding=!1,vi(qr)};this._queueCallback(Te,Kr,this._isAnimated()),Ji&&this.cycle()}_isAnimated(){return this._element.classList.contains(ft)}_getActive(){return Ve.findOne(pt,this._element)}_getItems(){return Ve.find(ct,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(et){return M()?et===sr?Wt:Zt:et===sr?Zt:Wt}_orderToDirection(et){return M()?et===Wt?sr:Gr:et===Wt?Gr:sr}static jQueryInterface(et){return this.each(function(){const Jt=Er.getOrCreateInstance(this,et);if(typeof et=="number"){Jt.to(et);return}if(typeof et=="string"){if(Jt[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);Jt[et]()}})}}K.on(document,tt,Pt,function(Yr){const et=n(this);if(!et||!et.classList.contains(Qe))return;Yr.preventDefault();const Jt=Er.getOrCreateInstance(et),Kr=this.getAttribute("data-bs-slide-to");if(Kr){Jt.to(Kr),Jt._maybeEnableCycle();return}if(Z.getDataAttribute(this,"slide")==="next"){Jt.next(),Jt._maybeEnableCycle();return}Jt.prev(),Jt._maybeEnableCycle()}),K.on(window,Sr,()=>{const Yr=Ve.find(Xt);for(const et of Yr)Er.getOrCreateInstance(et)}),w(Er);const Jr="collapse",br=".bs.collapse",Fr=".data-api",Hr=`show${br}`,Lr=`shown${br}`,at=`hide${br}`,Rt=`hidden${br}`,Kt=`click${br}${Fr}`,ur="show",Nr="collapse",Vr="collapsing",Dr="collapsed",Mr=`:scope .${Nr} .${Nr}`,jr="collapse-horizontal",kn="width",yn="height",Wn=".collapse.show, .collapse.collapsing",In='[data-bs-toggle="collapse"]',$n={parent:null,toggle:!0},Kn={parent:"(null|element)",toggle:"boolean"};class ya extends oe{constructor(et,Jt){super(et,Jt),this._isTransitioning=!1,this._triggerArray=[];const Kr=Ve.find(In);for(const Hn of Kr){const ta=i(Hn),ea=Ve.find(ta).filter(vi=>vi===this._element);ta!==null&&ea.length&&this._triggerArray.push(Hn)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return $n}static get DefaultType(){return Kn}static get NAME(){return Jr}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let et=[];if(this._config.parent&&(et=this._getFirstLevelChildren(Wn).filter(vi=>vi!==this._element).map(vi=>ya.getOrCreateInstance(vi,{toggle:!1}))),et.length&&et[0]._isTransitioning||K.trigger(this._element,Hr).defaultPrevented)return;for(const vi of et)vi.hide();const Kr=this._getDimension();this._element.classList.remove(Nr),this._element.classList.add(Vr),this._element.style[Kr]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Hn=()=>{this._isTransitioning=!1,this._element.classList.remove(Vr),this._element.classList.add(Nr,ur),this._element.style[Kr]="",K.trigger(this._element,Lr)},ea=`scroll${Kr[0].toUpperCase()+Kr.slice(1)}`;this._queueCallback(Hn,this._element,!0),this._element.style[Kr]=`${this._element[ea]}px`}hide(){if(this._isTransitioning||!this._isShown()||K.trigger(this._element,at).defaultPrevented)return;const Jt=this._getDimension();this._element.style[Jt]=`${this._element.getBoundingClientRect()[Jt]}px`,m(this._element),this._element.classList.add(Vr),this._element.classList.remove(Nr,ur);for(const Hn of this._triggerArray){const ta=n(Hn);ta&&!this._isShown(ta)&&this._addAriaAndCollapsedClass([Hn],!1)}this._isTransitioning=!0;const Kr=()=>{this._isTransitioning=!1,this._element.classList.remove(Vr),this._element.classList.add(Nr),K.trigger(this._element,Rt)};this._element.style[Jt]="",this._queueCallback(Kr,this._element,!0)}_isShown(et=this._element){return et.classList.contains(ur)}_configAfterMerge(et){return et.toggle=Boolean(et.toggle),et.parent=o(et.parent),et}_getDimension(){return this._element.classList.contains(jr)?kn:yn}_initializeChildren(){if(!this._config.parent)return;const et=this._getFirstLevelChildren(In);for(const Jt of et){const Kr=n(Jt);Kr&&this._addAriaAndCollapsedClass([Jt],this._isShown(Kr))}}_getFirstLevelChildren(et){const Jt=Ve.find(Mr,this._config.parent);return Ve.find(et,this._config.parent).filter(Kr=>!Jt.includes(Kr))}_addAriaAndCollapsedClass(et,Jt){if(!!et.length)for(const Kr of et)Kr.classList.toggle(Dr,!Jt),Kr.setAttribute("aria-expanded",Jt)}static jQueryInterface(et){const Jt={};return typeof et=="string"&&/show|hide/.test(et)&&(Jt.toggle=!1),this.each(function(){const Kr=ya.getOrCreateInstance(this,Jt);if(typeof et=="string"){if(typeof Kr[et]>"u")throw new TypeError(`No method named "${et}"`);Kr[et]()}})}}K.on(document,Kt,In,function(Yr){(Yr.target.tagName==="A"||Yr.delegateTarget&&Yr.delegateTarget.tagName==="A")&&Yr.preventDefault();const et=i(this),Jt=Ve.find(et);for(const Kr of Jt)ya.getOrCreateInstance(Kr,{toggle:!1}).toggle()}),w(ya);const Ra="dropdown",Ka=".bs.dropdown",ri=".data-api",ei="Escape",kr="Tab",bn="ArrowUp",dn="ArrowDown",Ln=2,ra=`hide${Ka}`,ma=`hidden${Ka}`,sa=`show${Ka}`,Bn=`shown${Ka}`,Qn=`click${Ka}${ri}`,Xa=`keydown${Ka}${ri}`,yi=`keyup${Ka}${ri}`,Yt="show",gr="dropup",un="dropend",mn="dropstart",sn="dropup-center",Cn="dropdown-center",Tn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',gn=`${Tn}.${Yt}`,_r=".dropdown-menu",wr=".navbar",Br=".navbar-nav",An=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Yn=M()?"top-end":"top-start",ua=M()?"top-start":"top-end",Sn=M()?"bottom-end":"bottom-start",na=M()?"bottom-start":"bottom-end",fa=M()?"left-start":"right-start",Ma=M()?"right-start":"left-start",ka="top",ga="bottom",Ia={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ao={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ro extends oe{constructor(et,Jt){super(et,Jt),this._popper=null,this._parent=this._element.parentNode,this._menu=Ve.next(this._element,_r)[0]||Ve.prev(this._element,_r)[0]||Ve.findOne(_r,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ia}static get DefaultType(){return Ao}static get NAME(){return Ra}toggle(){return this._isShown()?this.hide():this.show()}show(){if(g(this._element)||this._isShown())return;const et={relatedTarget:this._element};if(!K.trigger(this._element,sa,et).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Br))for(const Kr of[].concat(...document.body.children))K.on(Kr,"mouseover",f);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Yt),this._element.classList.add(Yt),K.trigger(this._element,Bn,et)}}hide(){if(g(this._element)||!this._isShown())return;const et={relatedTarget:this._element};this._completeHide(et)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(et){if(!K.trigger(this._element,ra,et).defaultPrevented){if("ontouchstart"in document.documentElement)for(const Kr of[].concat(...document.body.children))K.off(Kr,"mouseover",f);this._popper&&this._popper.destroy(),this._menu.classList.remove(Yt),this._element.classList.remove(Yt),this._element.setAttribute("aria-expanded","false"),Z.removeDataAttribute(this._menu,"popper"),K.trigger(this._element,ma,et)}}_getConfig(et){if(et=super._getConfig(et),typeof et.reference=="object"&&!s(et.reference)&&typeof et.reference.getBoundingClientRect!="function")throw new TypeError(`${Ra.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return et}_createPopper(){if(typeof V>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let et=this._element;this._config.reference==="parent"?et=this._parent:s(this._config.reference)?et=o(this._config.reference):typeof this._config.reference=="object"&&(et=this._config.reference);const Jt=this._getPopperConfig();this._popper=V.createPopper(et,this._menu,Jt)}_isShown(){return this._menu.classList.contains(Yt)}_getPlacement(){const et=this._parent;if(et.classList.contains(un))return fa;if(et.classList.contains(mn))return Ma;if(et.classList.contains(sn))return ka;if(et.classList.contains(Cn))return ga;const Jt=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return et.classList.contains(gr)?Jt?ua:Yn:Jt?na:Sn}_detectNavbar(){return this._element.closest(wr)!==null}_getOffset(){const{offset:et}=this._config;return typeof et=="string"?et.split(",").map(Jt=>Number.parseInt(Jt,10)):typeof et=="function"?Jt=>et(Jt,this._element):et}_getPopperConfig(){const et={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Z.setDataAttribute(this._menu,"popper","static"),et.modifiers=[{name:"applyStyles",enabled:!1}]),{...et,...typeof this._config.popperConfig=="function"?this._config.popperConfig(et):this._config.popperConfig}}_selectMenuItem({key:et,target:Jt}){const Kr=Ve.find(An,this._menu).filter(Hn=>b(Hn));!Kr.length||h(Kr,Jt,et===dn,!Kr.includes(Jt)).focus()}static jQueryInterface(et){return this.each(function(){const Jt=ro.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof Jt[et]>"u")throw new TypeError(`No method named "${et}"`);Jt[et]()}})}static clearMenus(et){if(et.button===Ln||et.type==="keyup"&&et.key!==kr)return;const Jt=Ve.find(gn);for(const Kr of Jt){const Hn=ro.getInstance(Kr);if(!Hn||Hn._config.autoClose===!1)continue;const ta=et.composedPath(),ea=ta.includes(Hn._menu);if(ta.includes(Hn._element)||Hn._config.autoClose==="inside"&&!ea||Hn._config.autoClose==="outside"&&ea||Hn._menu.contains(et.target)&&(et.type==="keyup"&&et.key===kr||/input|select|option|textarea|form/i.test(et.target.tagName)))continue;const vi={relatedTarget:Hn._element};et.type==="click"&&(vi.clickEvent=et),Hn._completeHide(vi)}}static dataApiKeydownHandler(et){const Jt=/input|textarea/i.test(et.target.tagName),Kr=et.key===ei,Hn=[bn,dn].includes(et.key);if(!Hn&&!Kr||Jt&&!Kr)return;et.preventDefault();const ta=this.matches(Tn)?this:Ve.prev(this,Tn)[0]||Ve.next(this,Tn)[0]||Ve.findOne(Tn,et.delegateTarget.parentNode),ea=ro.getOrCreateInstance(ta);if(Hn){et.stopPropagation(),ea.show(),ea._selectMenuItem(et);return}ea._isShown()&&(et.stopPropagation(),ea.hide(),ta.focus())}}K.on(document,Xa,Tn,ro.dataApiKeydownHandler),K.on(document,Xa,_r,ro.dataApiKeydownHandler),K.on(document,Qn,ro.clearMenus),K.on(document,yi,ro.clearMenus),K.on(document,Qn,Tn,function(Yr){Yr.preventDefault(),ro.getOrCreateInstance(this).toggle()}),w(ro);const $o=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",$s=".sticky-top",Hs="padding-right",Wl="margin-right";class Ai{constructor(){this._element=document.body}getWidth(){const et=document.documentElement.clientWidth;return Math.abs(window.innerWidth-et)}hide(){const et=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Hs,Jt=>Jt+et),this._setElementAttributes($o,Hs,Jt=>Jt+et),this._setElementAttributes($s,Wl,Jt=>Jt-et)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Hs),this._resetElementAttributes($o,Hs),this._resetElementAttributes($s,Wl)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(et,Jt,Kr){const Hn=this.getWidth(),ta=ea=>{if(ea!==this._element&&window.innerWidth>ea.clientWidth+Hn)return;this._saveInitialAttribute(ea,Jt);const vi=window.getComputedStyle(ea).getPropertyValue(Jt);ea.style.setProperty(Jt,`${Kr(Number.parseFloat(vi))}px`)};this._applyManipulationCallback(et,ta)}_saveInitialAttribute(et,Jt){const Kr=et.style.getPropertyValue(Jt);Kr&&Z.setDataAttribute(et,Jt,Kr)}_resetElementAttributes(et,Jt){const Kr=Hn=>{const ta=Z.getDataAttribute(Hn,Jt);if(ta===null){Hn.style.removeProperty(Jt);return}Z.removeDataAttribute(Hn,Jt),Hn.style.setProperty(Jt,ta)};this._applyManipulationCallback(et,Kr)}_applyManipulationCallback(et,Jt){if(s(et)){Jt(et);return}for(const Kr of Ve.find(et,this._element))Jt(Kr)}}const Gs="backdrop",Ys="fade",Zi="show",Ro=`mousedown.bs.${Gs}`,Cl={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},_s={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Fi extends Q{constructor(et){super(),this._config=this._getConfig(et),this._isAppended=!1,this._element=null}static get Default(){return Cl}static get DefaultType(){return _s}static get NAME(){return Gs}show(et){if(!this._config.isVisible){p(et);return}this._append();const Jt=this._getElement();this._config.isAnimated&&m(Jt),Jt.classList.add(Zi),this._emulateAnimation(()=>{p(et)})}hide(et){if(!this._config.isVisible){p(et);return}this._getElement().classList.remove(Zi),this._emulateAnimation(()=>{this.dispose(),p(et)})}dispose(){!this._isAppended||(K.off(this._element,Ro),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const et=document.createElement("div");et.className=this._config.className,this._config.isAnimated&&et.classList.add(Ys),this._element=et}return this._element}_configAfterMerge(et){return et.rootElement=o(et.rootElement),et}_append(){if(this._isAppended)return;const et=this._getElement();this._config.rootElement.append(et),K.on(et,Ro,()=>{p(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(et){_(et,this._getElement(),this._config.isAnimated)}}const vl="focustrap",zi=".bs.focustrap",po=`focusin${zi}`,no=`keydown.tab${zi}`,us="Tab",Qs="forward",lu="backward",es={autofocus:!0,trapElement:null},Au={autofocus:"boolean",trapElement:"element"};class Rs extends Q{constructor(et){super(),this._config=this._getConfig(et),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return es}static get DefaultType(){return Au}static get NAME(){return vl}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),K.off(document,zi),K.on(document,po,et=>this._handleFocusin(et)),K.on(document,no,et=>this._handleKeydown(et)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,K.off(document,zi))}_handleFocusin(et){const{trapElement:Jt}=this._config;if(et.target===document||et.target===Jt||Jt.contains(et.target))return;const Kr=Ve.focusableChildren(Jt);Kr.length===0?Jt.focus():this._lastTabNavDirection===lu?Kr[Kr.length-1].focus():Kr[0].focus()}_handleKeydown(et){et.key===us&&(this._lastTabNavDirection=et.shiftKey?lu:Qs)}}const Oo="modal",So=".bs.modal",Is=".data-api",Xl="Escape",Xu=`hide${So}`,ju=`hidePrevented${So}`,Ws=`hidden${So}`,Ll=`show${So}`,Fs=`shown${So}`,uu=`resize${So}`,pl=`click.dismiss${So}`,cu=`mousedown.dismiss${So}`,Mu=`keydown.dismiss${So}`,jl=`click${So}${Is}`,Eu="modal-open",qs="fade",Zl="show",dl="modal-static",ws=".modal.show",Pl=".modal-dialog",fu=".modal-body",Su='[data-bs-toggle="modal"]',ku={backdrop:!0,focus:!0,keyboard:!0},Kl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class el extends oe{constructor(et,Jt){super(et,Jt),this._dialog=Ve.findOne(Pl,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ai,this._addEventListeners()}static get Default(){return ku}static get DefaultType(){return Kl}static get NAME(){return Oo}toggle(et){return this._isShown?this.hide():this.show(et)}show(et){this._isShown||this._isTransitioning||K.trigger(this._element,Ll,{relatedTarget:et}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Eu),this._adjustDialog(),this._backdrop.show(()=>this._showElement(et)))}hide(){!this._isShown||this._isTransitioning||K.trigger(this._element,Xu).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Zl),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const et of[window,this._dialog])K.off(et,So);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Fi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Rs({trapElement:this._element})}_showElement(et){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const Jt=Ve.findOne(fu,this._dialog);Jt&&(Jt.scrollTop=0),m(this._element),this._element.classList.add(Zl);const Kr=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,K.trigger(this._element,Fs,{relatedTarget:et})};this._queueCallback(Kr,this._dialog,this._isAnimated())}_addEventListeners(){K.on(this._element,Mu,et=>{if(et.key===Xl){if(this._config.keyboard){et.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),K.on(window,uu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),K.on(this._element,cu,et=>{K.one(this._element,pl,Jt=>{if(!(this._element!==et.target||this._element!==Jt.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Eu),this._resetAdjustments(),this._scrollBar.reset(),K.trigger(this._element,Ws)})}_isAnimated(){return this._element.classList.contains(qs)}_triggerBackdropTransition(){if(K.trigger(this._element,ju).defaultPrevented)return;const Jt=this._element.scrollHeight>document.documentElement.clientHeight,Kr=this._element.style.overflowY;Kr==="hidden"||this._element.classList.contains(dl)||(Jt||(this._element.style.overflowY="hidden"),this._element.classList.add(dl),this._queueCallback(()=>{this._element.classList.remove(dl),this._queueCallback(()=>{this._element.style.overflowY=Kr},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const et=this._element.scrollHeight>document.documentElement.clientHeight,Jt=this._scrollBar.getWidth(),Kr=Jt>0;if(Kr&&!et){const Hn=M()?"paddingLeft":"paddingRight";this._element.style[Hn]=`${Jt}px`}if(!Kr&&et){const Hn=M()?"paddingRight":"paddingLeft";this._element.style[Hn]=`${Jt}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(et,Jt){return this.each(function(){const Kr=el.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof Kr[et]>"u")throw new TypeError(`No method named "${et}"`);Kr[et](Jt)}})}}K.on(document,jl,Su,function(Yr){const et=n(this);["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),K.one(et,Ll,Hn=>{Hn.defaultPrevented||K.one(et,Ws,()=>{b(this)&&this.focus()})});const Jt=Ve.findOne(ws);Jt&&el.getInstance(Jt).hide(),el.getOrCreateInstance(et).toggle(this)}),ne(el),w(el);const Cu="offcanvas",Yo=".bs.offcanvas",tl=".data-api",hu=`load${Yo}${tl}`,Ts="Escape",Io="show",Dl="showing",As="hiding",zs="offcanvas-backdrop",go=".offcanvas.show",Rl=`show${Yo}`,Il=`shown${Yo}`,rl=`hide${Yo}`,fs=`hidePrevented${Yo}`,yl=`hidden${Yo}`,ml=`resize${Yo}`,Jl=`click${Yo}${tl}`,Fl=`keydown.dismiss${Yo}`,nl='[data-bs-toggle="offcanvas"]',Zu={backdrop:!0,keyboard:!0,scroll:!1},hs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Xs extends oe{constructor(et,Jt){super(et,Jt),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Zu}static get DefaultType(){return hs}static get NAME(){return Cu}toggle(et){return this._isShown?this.hide():this.show(et)}show(et){if(this._isShown||K.trigger(this._element,Rl,{relatedTarget:et}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ai().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Dl);const Kr=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Io),this._element.classList.remove(Dl),K.trigger(this._element,Il,{relatedTarget:et})};this._queueCallback(Kr,this._element,!0)}hide(){if(!this._isShown||K.trigger(this._element,rl).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(As),this._backdrop.hide();const Jt=()=>{this._element.classList.remove(Io,As),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ai().reset(),K.trigger(this._element,yl)};this._queueCallback(Jt,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const et=()=>{if(this._config.backdrop==="static"){K.trigger(this._element,fs);return}this.hide()},Jt=Boolean(this._config.backdrop);return new Fi({className:zs,isVisible:Jt,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:Jt?et:null})}_initializeFocusTrap(){return new Rs({trapElement:this._element})}_addEventListeners(){K.on(this._element,Fl,et=>{if(et.key===Ts){if(!this._config.keyboard){K.trigger(this._element,fs);return}this.hide()}})}static jQueryInterface(et){return this.each(function(){const Jt=Xs.getOrCreateInstance(this,et);if(typeof et=="string"){if(Jt[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);Jt[et](this)}})}}K.on(document,Jl,nl,function(Yr){const et=n(this);if(["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),g(this))return;K.one(et,yl,()=>{b(this)&&this.focus()});const Jt=Ve.findOne(go);Jt&&Jt!==et&&Xs.getInstance(Jt).hide(),Xs.getOrCreateInstance(et).toggle(this)}),K.on(window,hu,()=>{for(const Yr of Ve.find(go))Xs.getOrCreateInstance(Yr).show()}),K.on(window,ml,()=>{for(const Yr of Ve.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(Yr).position!=="fixed"&&Xs.getOrCreateInstance(Yr).hide()}),ne(Xs),w(Xs);const vu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),xl=/^aria-[\w-]*$/i,zl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,al=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Ol=(Yr,et)=>{const Jt=Yr.nodeName.toLowerCase();return et.includes(Jt)?vu.has(Jt)?Boolean(zl.test(Yr.nodeValue)||al.test(Yr.nodeValue)):!0:et.filter(Kr=>Kr instanceof RegExp).some(Kr=>Kr.test(Jt))},pu={"*":["class","dir","id","lang","role",xl],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Lu(Yr,et,Jt){if(!Yr.length)return Yr;if(Jt&&typeof Jt=="function")return Jt(Yr);const Hn=new window.DOMParser().parseFromString(Yr,"text/html"),ta=[].concat(...Hn.body.querySelectorAll("*"));for(const ea of ta){const vi=ea.nodeName.toLowerCase();if(!Object.keys(et).includes(vi)){ea.remove();continue}const Di=[].concat(...ea.attributes),Ji=[].concat(et["*"]||[],et[vi]||[]);for(const Ri of Di)Ol(Ri,Ji)||ea.removeAttribute(Ri.nodeName)}return Hn.body.innerHTML}const vc="TemplateFactory",Bi={allowList:pu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},bl={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},il={entry:"(string|element|function|null)",selector:"(string|element)"};class ts extends Q{constructor(et){super(),this._config=this._getConfig(et)}static get Default(){return Bi}static get DefaultType(){return bl}static get NAME(){return vc}getContent(){return Object.values(this._config.content).map(et=>this._resolvePossibleFunction(et)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(et){return this._checkContent(et),this._config.content={...this._config.content,...et},this}toHtml(){const et=document.createElement("div");et.innerHTML=this._maybeSanitize(this._config.template);for(const[Hn,ta]of Object.entries(this._config.content))this._setContent(et,ta,Hn);const Jt=et.children[0],Kr=this._resolvePossibleFunction(this._config.extraClass);return Kr&&Jt.classList.add(...Kr.split(" ")),Jt}_typeCheckConfig(et){super._typeCheckConfig(et),this._checkContent(et.content)}_checkContent(et){for(const[Jt,Kr]of Object.entries(et))super._typeCheckConfig({selector:Jt,entry:Kr},il)}_setContent(et,Jt,Kr){const Hn=Ve.findOne(Kr,et);if(!!Hn){if(Jt=this._resolvePossibleFunction(Jt),!Jt){Hn.remove();return}if(s(Jt)){this._putElementInTemplate(o(Jt),Hn);return}if(this._config.html){Hn.innerHTML=this._maybeSanitize(Jt);return}Hn.textContent=Jt}}_maybeSanitize(et){return this._config.sanitize?Lu(et,this._config.allowList,this._config.sanitizeFn):et}_resolvePossibleFunction(et){return typeof et=="function"?et(this):et}_putElementInTemplate(et,Jt){if(this._config.html){Jt.innerHTML="",Jt.append(et);return}Jt.textContent=et.textContent}}const vs="tooltip",Nl=new Set(["sanitize","allowList","sanitizeFn"]),uo="fade",Pu="modal",Wo="show",js=".tooltip-inner",Os=`.${Pu}`,Ms="hide.bs.modal",Vo="hover",Ki="focus",No="click",ps="manual",Du="hide",$l="hidden",Ru="show",bt="shown",Bt="inserted",dr="click",cr="focusin",Or="focusout",ln="mouseenter",_n="mouseleave",Pn={AUTO:"auto",TOP:"top",RIGHT:M()?"left":"right",BOTTOM:"bottom",LEFT:M()?"right":"left"},zn={allowList:pu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class wn extends oe{constructor(et,Jt){if(typeof V>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(et,Jt),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return zn}static get DefaultType(){return Xn}static get NAME(){return vs}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),K.off(this._element.closest(Os),Ms,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const et=K.trigger(this._element,this.constructor.eventName(Ru)),Kr=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(et.defaultPrevented||!Kr)return;this._disposePopper();const Hn=this._getTipElement();this._element.setAttribute("aria-describedby",Hn.getAttribute("id"));const{container:ta}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ta.append(Hn),K.trigger(this._element,this.constructor.eventName(Bt))),this._popper=this._createPopper(Hn),Hn.classList.add(Wo),"ontouchstart"in document.documentElement)for(const vi of[].concat(...document.body.children))K.on(vi,"mouseover",f);const ea=()=>{K.trigger(this._element,this.constructor.eventName(bt)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(ea,this.tip,this._isAnimated())}hide(){if(!this._isShown()||K.trigger(this._element,this.constructor.eventName(Du)).defaultPrevented)return;if(this._getTipElement().classList.remove(Wo),"ontouchstart"in document.documentElement)for(const Hn of[].concat(...document.body.children))K.off(Hn,"mouseover",f);this._activeTrigger[No]=!1,this._activeTrigger[Ki]=!1,this._activeTrigger[Vo]=!1,this._isHovered=null;const Kr=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),K.trigger(this._element,this.constructor.eventName($l)))};this._queueCallback(Kr,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(et){const Jt=this._getTemplateFactory(et).toHtml();if(!Jt)return null;Jt.classList.remove(uo,Wo),Jt.classList.add(`bs-${this.constructor.NAME}-auto`);const Kr=e(this.constructor.NAME).toString();return Jt.setAttribute("id",Kr),this._isAnimated()&&Jt.classList.add(uo),Jt}setContent(et){this._newContent=et,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(et){return this._templateFactory?this._templateFactory.changeContent(et):this._templateFactory=new ts({...this._config,content:et,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[js]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(et){return this.constructor.getOrCreateInstance(et.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(uo)}_isShown(){return this.tip&&this.tip.classList.contains(Wo)}_createPopper(et){const Jt=typeof this._config.placement=="function"?this._config.placement.call(this,et,this._element):this._config.placement,Kr=Pn[Jt.toUpperCase()];return V.createPopper(this._element,et,this._getPopperConfig(Kr))}_getOffset(){const{offset:et}=this._config;return typeof et=="string"?et.split(",").map(Jt=>Number.parseInt(Jt,10)):typeof et=="function"?Jt=>et(Jt,this._element):et}_resolvePossibleFunction(et){return typeof et=="function"?et.call(this._element):et}_getPopperConfig(et){const Jt={placement:et,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:Kr=>{this._getTipElement().setAttribute("data-popper-placement",Kr.state.placement)}}]};return{...Jt,...typeof this._config.popperConfig=="function"?this._config.popperConfig(Jt):this._config.popperConfig}}_setListeners(){const et=this._config.trigger.split(" ");for(const Jt of et)if(Jt==="click")K.on(this._element,this.constructor.eventName(dr),this._config.selector,Kr=>{this._initializeOnDelegatedTarget(Kr).toggle()});else if(Jt!==ps){const Kr=Jt===Vo?this.constructor.eventName(ln):this.constructor.eventName(cr),Hn=Jt===Vo?this.constructor.eventName(_n):this.constructor.eventName(Or);K.on(this._element,Kr,this._config.selector,ta=>{const ea=this._initializeOnDelegatedTarget(ta);ea._activeTrigger[ta.type==="focusin"?Ki:Vo]=!0,ea._enter()}),K.on(this._element,Hn,this._config.selector,ta=>{const ea=this._initializeOnDelegatedTarget(ta);ea._activeTrigger[ta.type==="focusout"?Ki:Vo]=ea._element.contains(ta.relatedTarget),ea._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},K.on(this._element.closest(Os),Ms,this._hideModalHandler)}_fixTitle(){const et=this._element.getAttribute("title");!et||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",et),this._element.setAttribute("data-bs-original-title",et),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(et,Jt){clearTimeout(this._timeout),this._timeout=setTimeout(et,Jt)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(et){const Jt=Z.getDataAttributes(this._element);for(const Kr of Object.keys(Jt))Nl.has(Kr)&&delete Jt[Kr];return et={...Jt,...typeof et=="object"&&et?et:{}},et=this._mergeConfigObj(et),et=this._configAfterMerge(et),this._typeCheckConfig(et),et}_configAfterMerge(et){return et.container=et.container===!1?document.body:o(et.container),typeof et.delay=="number"&&(et.delay={show:et.delay,hide:et.delay}),typeof et.title=="number"&&(et.title=et.title.toString()),typeof et.content=="number"&&(et.content=et.content.toString()),et}_getDelegateConfig(){const et={};for(const Jt in this._config)this.constructor.Default[Jt]!==this._config[Jt]&&(et[Jt]=this._config[Jt]);return et.selector=!1,et.trigger="manual",et}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(et){return this.each(function(){const Jt=wn.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof Jt[et]>"u")throw new TypeError(`No method named "${et}"`);Jt[et]()}})}}w(wn);const Un="popover",On=".popover-header",jn=".popover-body",ia={...wn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ga={...wn.DefaultType,content:"(null|string|element|function)"};class za extends wn{static get Default(){return ia}static get DefaultType(){return Ga}static get NAME(){return Un}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[On]:this._getTitle(),[jn]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(et){return this.each(function(){const Jt=za.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof Jt[et]>"u")throw new TypeError(`No method named "${et}"`);Jt[et]()}})}}w(za);const Ya="scrollspy",aa=".bs.scrollspy",ba=".data-api",Qa=`activate${aa}`,si=`click${aa}`,Mi=`load${aa}${ba}`,Ei="dropdown-item",wi="active",Pi='[data-bs-spy="scroll"]',hi="[href]",ko=".nav, .list-group",ao=".nav-link",ki=`${ao}, .nav-item > ${ao}, .list-group-item`,bo=".dropdown",Mo=".dropdown-toggle",ds={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ns={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Co extends oe{constructor(et,Jt){super(et,Jt),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ds}static get DefaultType(){return Ns}static get NAME(){return Ya}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const et of this._observableSections.values())this._observer.observe(et)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(et){return et.target=o(et.target)||document.body,et.rootMargin=et.offset?`${et.offset}px 0px -30%`:et.rootMargin,typeof et.threshold=="string"&&(et.threshold=et.threshold.split(",").map(Jt=>Number.parseFloat(Jt))),et}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(K.off(this._config.target,si),K.on(this._config.target,si,hi,et=>{const Jt=this._observableSections.get(et.target.hash);if(Jt){et.preventDefault();const Kr=this._rootElement||window,Hn=Jt.offsetTop-this._element.offsetTop;if(Kr.scrollTo){Kr.scrollTo({top:Hn,behavior:"smooth"});return}Kr.scrollTop=Hn}}))}_getNewObserver(){const et={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(Jt=>this._observerCallback(Jt),et)}_observerCallback(et){const Jt=ea=>this._targetLinks.get(`#${ea.target.id}`),Kr=ea=>{this._previousScrollData.visibleEntryTop=ea.target.offsetTop,this._process(Jt(ea))},Hn=(this._rootElement||document.documentElement).scrollTop,ta=Hn>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Hn;for(const ea of et){if(!ea.isIntersecting){this._activeTarget=null,this._clearActiveClass(Jt(ea));continue}const vi=ea.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ta&&vi){if(Kr(ea),!Hn)return;continue}!ta&&!vi&&Kr(ea)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const et=Ve.find(hi,this._config.target);for(const Jt of et){if(!Jt.hash||g(Jt))continue;const Kr=Ve.findOne(Jt.hash,this._element);b(Kr)&&(this._targetLinks.set(Jt.hash,Jt),this._observableSections.set(Jt.hash,Kr))}}_process(et){this._activeTarget!==et&&(this._clearActiveClass(this._config.target),this._activeTarget=et,et.classList.add(wi),this._activateParents(et),K.trigger(this._element,Qa,{relatedTarget:et}))}_activateParents(et){if(et.classList.contains(Ei)){Ve.findOne(Mo,et.closest(bo)).classList.add(wi);return}for(const Jt of Ve.parents(et,ko))for(const Kr of Ve.prev(Jt,ki))Kr.classList.add(wi)}_clearActiveClass(et){et.classList.remove(wi);const Jt=Ve.find(`${hi}.${wi}`,et);for(const Kr of Jt)Kr.classList.remove(wi)}static jQueryInterface(et){return this.each(function(){const Jt=Co.getOrCreateInstance(this,et);if(typeof et=="string"){if(Jt[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);Jt[et]()}})}}K.on(window,Mi,()=>{for(const Yr of Ve.find(Pi))Co.getOrCreateInstance(Yr)}),w(Co);const ol="tab",Fo=".bs.tab",Lo=`hide${Fo}`,Ql=`hidden${Fo}`,du=`show${Fo}`,gs=`shown${Fo}`,Iu=`click${Fo}`,ql=`keydown${Fo}`,Gc=`load${Fo}`,Ku="ArrowLeft",gu="ArrowRight",Ju="ArrowUp",Es="ArrowDown",_l="active",Fu="fade",yu="show",Xo="dropdown",$u=".dropdown-toggle",kc=".dropdown-menu",rs=":not(.dropdown-toggle)",zu='.list-group, .nav, [role="tablist"]',Ou=".nav-item, .list-group-item",Qu=`.nav-link${rs}, .list-group-item${rs}, [role="tab"]${rs}`,Oe='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',je=`${Qu}, ${Oe}`,nt=`.${_l}[data-bs-toggle="tab"], .${_l}[data-bs-toggle="pill"], .${_l}[data-bs-toggle="list"]`;class ut extends oe{constructor(et){super(et),this._parent=this._element.closest(zu),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),K.on(this._element,ql,Jt=>this._keydown(Jt)))}static get NAME(){return ol}show(){const et=this._element;if(this._elemIsActive(et))return;const Jt=this._getActiveElem(),Kr=Jt?K.trigger(Jt,Lo,{relatedTarget:et}):null;K.trigger(et,du,{relatedTarget:Jt}).defaultPrevented||Kr&&Kr.defaultPrevented||(this._deactivate(Jt,et),this._activate(et,Jt))}_activate(et,Jt){if(!et)return;et.classList.add(_l),this._activate(n(et));const Kr=()=>{if(et.getAttribute("role")!=="tab"){et.classList.add(yu);return}et.removeAttribute("tabindex"),et.setAttribute("aria-selected",!0),this._toggleDropDown(et,!0),K.trigger(et,gs,{relatedTarget:Jt})};this._queueCallback(Kr,et,et.classList.contains(Fu))}_deactivate(et,Jt){if(!et)return;et.classList.remove(_l),et.blur(),this._deactivate(n(et));const Kr=()=>{if(et.getAttribute("role")!=="tab"){et.classList.remove(yu);return}et.setAttribute("aria-selected",!1),et.setAttribute("tabindex","-1"),this._toggleDropDown(et,!1),K.trigger(et,Ql,{relatedTarget:Jt})};this._queueCallback(Kr,et,et.classList.contains(Fu))}_keydown(et){if(![Ku,gu,Ju,Es].includes(et.key))return;et.stopPropagation(),et.preventDefault();const Jt=[gu,Es].includes(et.key),Kr=h(this._getChildren().filter(Hn=>!g(Hn)),et.target,Jt,!0);Kr&&(Kr.focus({preventScroll:!0}),ut.getOrCreateInstance(Kr).show())}_getChildren(){return Ve.find(je,this._parent)}_getActiveElem(){return this._getChildren().find(et=>this._elemIsActive(et))||null}_setInitialAttributes(et,Jt){this._setAttributeIfNotExists(et,"role","tablist");for(const Kr of Jt)this._setInitialAttributesOnChild(Kr)}_setInitialAttributesOnChild(et){et=this._getInnerElement(et);const Jt=this._elemIsActive(et),Kr=this._getOuterElement(et);et.setAttribute("aria-selected",Jt),Kr!==et&&this._setAttributeIfNotExists(Kr,"role","presentation"),Jt||et.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(et,"role","tab"),this._setInitialAttributesOnTargetPanel(et)}_setInitialAttributesOnTargetPanel(et){const Jt=n(et);!Jt||(this._setAttributeIfNotExists(Jt,"role","tabpanel"),et.id&&this._setAttributeIfNotExists(Jt,"aria-labelledby",`#${et.id}`))}_toggleDropDown(et,Jt){const Kr=this._getOuterElement(et);if(!Kr.classList.contains(Xo))return;const Hn=(ta,ea)=>{const vi=Ve.findOne(ta,Kr);vi&&vi.classList.toggle(ea,Jt)};Hn($u,_l),Hn(kc,yu),Kr.setAttribute("aria-expanded",Jt)}_setAttributeIfNotExists(et,Jt,Kr){et.hasAttribute(Jt)||et.setAttribute(Jt,Kr)}_elemIsActive(et){return et.classList.contains(_l)}_getInnerElement(et){return et.matches(je)?et:Ve.findOne(je,et)}_getOuterElement(et){return et.closest(Ou)||et}static jQueryInterface(et){return this.each(function(){const Jt=ut.getOrCreateInstance(this);if(typeof et=="string"){if(Jt[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);Jt[et]()}})}}K.on(document,Iu,Oe,function(Yr){["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),!g(this)&&ut.getOrCreateInstance(this).show()}),K.on(window,Gc,()=>{for(const Yr of Ve.find(nt))ut.getOrCreateInstance(Yr)}),w(ut);const Tt="toast",kt=".bs.toast",vr=`mouseover${kt}`,yr=`mouseout${kt}`,fr=`focusin${kt}`,Tr=`focusout${kt}`,zr=`hide${kt}`,Qr=`hidden${kt}`,on=`show${kt}`,En=`shown${kt}`,Nn="fade",Jn="hide",Ta="show",Ea="showing",ni={animation:"boolean",autohide:"boolean",delay:"number"},qa={animation:!0,autohide:!0,delay:5e3};class ai extends oe{constructor(et,Jt){super(et,Jt),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return qa}static get DefaultType(){return ni}static get NAME(){return Tt}show(){if(K.trigger(this._element,on).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Nn);const Jt=()=>{this._element.classList.remove(Ea),K.trigger(this._element,En),this._maybeScheduleHide()};this._element.classList.remove(Jn),m(this._element),this._element.classList.add(Ta,Ea),this._queueCallback(Jt,this._element,this._config.animation)}hide(){if(!this.isShown()||K.trigger(this._element,zr).defaultPrevented)return;const Jt=()=>{this._element.classList.add(Jn),this._element.classList.remove(Ea,Ta),K.trigger(this._element,Qr)};this._element.classList.add(Ea),this._queueCallback(Jt,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ta),super.dispose()}isShown(){return this._element.classList.contains(Ta)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(et,Jt){switch(et.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=Jt;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=Jt;break}}if(Jt){this._clearTimeout();return}const Kr=et.relatedTarget;this._element===Kr||this._element.contains(Kr)||this._maybeScheduleHide()}_setListeners(){K.on(this._element,vr,et=>this._onInteraction(et,!0)),K.on(this._element,yr,et=>this._onInteraction(et,!1)),K.on(this._element,fr,et=>this._onInteraction(et,!0)),K.on(this._element,Tr,et=>this._onInteraction(et,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(et){return this.each(function(){const Jt=ai.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof Jt[et]>"u")throw new TypeError(`No method named "${et}"`);Jt[et](this)}})}}return ne(ai),w(ai),{Alert:ke,Button:Ie,Carousel:Er,Collapse:ya,Dropdown:ro,Modal:el,Offcanvas:Xs,Popover:za,ScrollSpy:Co,Tab:ut,Toast:ai,Tooltip:wn}})})(Tk);const Bb=sA(b5);Bb.use(cA());Bb.mount("#app");
