(function(){const ue=document.createElement("link").relList;if(ue&&ue.supports&&ue.supports("modulepreload"))return;for(const V of document.querySelectorAll('link[rel="modulepreload"]'))N(V);new MutationObserver(V=>{for(const m of V)if(m.type==="childList")for(const u of m.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&N(u)}).observe(document,{childList:!0,subtree:!0});function t(V){const m={};return V.integrity&&(m.integrity=V.integrity),V.referrerpolicy&&(m.referrerPolicy=V.referrerpolicy),V.crossorigin==="use-credentials"?m.credentials="include":V.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function N(V){if(V.ep)return;V.ep=!0;const m=t(V);fetch(V.href,m)}})();function lg(ne,ue){const t=Object.create(null),N=ne.split(",");for(let V=0;V<N.length;V++)t[N[V]]=!0;return ue?V=>!!t[V.toLowerCase()]:V=>!!t[V]}function ug(ne){if(Si(ne)){const ue={};for(let t=0;t<ne.length;t++){const N=ne[t],V=Js(N)?Dw(N):ug(N);if(V)for(const m in V)ue[m]=V[m]}return ue}else{if(Js(ne))return ne;if(Jo(ne))return ne}}const Cw=/;(?![^(]*\))/g,Lw=/:([^]+)/,Pw=/\/\*.*?\*\//gs;function Dw(ne){const ue={};return ne.replace(Pw,"").split(Cw).forEach(t=>{if(t){const N=t.split(Lw);N.length>1&&(ue[N[0].trim()]=N[1].trim())}}),ue}function cg(ne){let ue="";if(Js(ne))ue=ne;else if(Si(ne))for(let t=0;t<ne.length;t++){const N=cg(ne[t]);N&&(ue+=N+" ")}else if(Jo(ne))for(const t in ne)ne[t]&&(ue+=t+" ");return ue.trim()}const Rw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Iw=lg(Rw);function S1(ne){return!!ne||ne===""}const jf=ne=>Js(ne)?ne:ne==null?"":Si(ne)||Jo(ne)&&(ne.toString===P1||!ji(ne.toString))?JSON.stringify(ne,k1,2):String(ne),k1=(ne,ue)=>ue&&ue.__v_isRef?k1(ne,ue.value):$h(ue)?{[`Map(${ue.size})`]:[...ue.entries()].reduce((t,[N,V])=>(t[`${N} =>`]=V,t),{})}:C1(ue)?{[`Set(${ue.size})`]:[...ue.values()]}:Jo(ue)&&!Si(ue)&&!D1(ue)?String(ue):ue,$o={},Kh=[],Ac=()=>{},Fw=()=>!1,zw=/^on[^a-z]/,md=ne=>zw.test(ne),fg=ne=>ne.startsWith("onUpdate:"),Sl=Object.assign,hg=(ne,ue)=>{const t=ne.indexOf(ue);t>-1&&ne.splice(t,1)},Ow=Object.prototype.hasOwnProperty,po=(ne,ue)=>Ow.call(ne,ue),Si=Array.isArray,$h=ne=>yd(ne)==="[object Map]",C1=ne=>yd(ne)==="[object Set]",ji=ne=>typeof ne=="function",Js=ne=>typeof ne=="string",vg=ne=>typeof ne=="symbol",Jo=ne=>ne!==null&&typeof ne=="object",L1=ne=>Jo(ne)&&ji(ne.then)&&ji(ne.catch),P1=Object.prototype.toString,yd=ne=>P1.call(ne),Nw=ne=>yd(ne).slice(8,-1),D1=ne=>yd(ne)==="[object Object]",pg=ne=>Js(ne)&&ne!=="NaN"&&ne[0]!=="-"&&""+parseInt(ne,10)===ne,ed=lg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xd=ne=>{const ue=Object.create(null);return t=>ue[t]||(ue[t]=ne(t))},Bw=/-(\w)/g,qh=xd(ne=>ne.replace(Bw,(ue,t)=>t?t.toUpperCase():"")),Uw=/\B([A-Z])/g,ch=xd(ne=>ne.replace(Uw,"-$1").toLowerCase()),R1=xd(ne=>ne.charAt(0).toUpperCase()+ne.slice(1)),d0=xd(ne=>ne?`on${R1(ne)}`:""),qv=(ne,ue)=>!Object.is(ne,ue),g0=(ne,ue)=>{for(let t=0;t<ne.length;t++)ne[t](ue)},od=(ne,ue,t)=>{Object.defineProperty(ne,ue,{configurable:!0,enumerable:!1,value:t})},dg=ne=>{const ue=parseFloat(ne);return isNaN(ue)?ne:ue};let oy;const Vw=()=>oy||(oy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Gu;class I1{constructor(ue=!1){this.detached=ue,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Gu,!ue&&Gu&&(this.index=(Gu.scopes||(Gu.scopes=[])).push(this)-1)}run(ue){if(this.active){const t=Gu;try{return Gu=this,ue()}finally{Gu=t}}}on(){Gu=this}off(){Gu=this.parent}stop(ue){if(this.active){let t,N;for(t=0,N=this.effects.length;t<N;t++)this.effects[t].stop();for(t=0,N=this.cleanups.length;t<N;t++)this.cleanups[t]();if(this.scopes)for(t=0,N=this.scopes.length;t<N;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!ue){const V=this.parent.scopes.pop();V&&V!==this&&(this.parent.scopes[this.index]=V,V.index=this.index)}this.parent=void 0,this.active=!1}}}function F1(ne){return new I1(ne)}function Hw(ne,ue=Gu){ue&&ue.active&&ue.effects.push(ne)}function Gw(){return Gu}function Yw(ne){Gu&&Gu.cleanups.push(ne)}const gg=ne=>{const ue=new Set(ne);return ue.w=0,ue.n=0,ue},z1=ne=>(ne.w&kf)>0,O1=ne=>(ne.n&kf)>0,Ww=({deps:ne})=>{if(ne.length)for(let ue=0;ue<ne.length;ue++)ne[ue].w|=kf},Xw=ne=>{const{deps:ue}=ne;if(ue.length){let t=0;for(let N=0;N<ue.length;N++){const V=ue[N];z1(V)&&!O1(V)?V.delete(ne):ue[t++]=V,V.w&=~kf,V.n&=~kf}ue.length=t}},B0=new WeakMap;let Yv=0,kf=1;const U0=30;let wc;const ih=Symbol(""),V0=Symbol("");class mg{constructor(ue,t=null,N){this.fn=ue,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,Hw(this,N)}run(){if(!this.active)return this.fn();let ue=wc,t=Mf;for(;ue;){if(ue===this)return;ue=ue.parent}try{return this.parent=wc,wc=this,Mf=!0,kf=1<<++Yv,Yv<=U0?Ww(this):sy(this),this.fn()}finally{Yv<=U0&&Xw(this),kf=1<<--Yv,wc=this.parent,Mf=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){wc===this?this.deferStop=!0:this.active&&(sy(this),this.onStop&&this.onStop(),this.active=!1)}}function sy(ne){const{deps:ue}=ne;if(ue.length){for(let t=0;t<ue.length;t++)ue[t].delete(ne);ue.length=0}}let Mf=!0;const N1=[];function cv(){N1.push(Mf),Mf=!1}function fv(){const ne=N1.pop();Mf=ne===void 0?!0:ne}function Yu(ne,ue,t){if(Mf&&wc){let N=B0.get(ne);N||B0.set(ne,N=new Map);let V=N.get(t);V||N.set(t,V=gg()),B1(V)}}function B1(ne,ue){let t=!1;Yv<=U0?O1(ne)||(ne.n|=kf,t=!z1(ne)):t=!ne.has(wc),t&&(ne.add(wc),wc.deps.push(ne))}function ef(ne,ue,t,N,V,m){const u=B0.get(ne);if(!u)return;let A=[];if(ue==="clear")A=[...u.values()];else if(t==="length"&&Si(ne)){const T=dg(N);u.forEach((e,a)=>{(a==="length"||a>=T)&&A.push(e)})}else switch(t!==void 0&&A.push(u.get(t)),ue){case"add":Si(ne)?pg(t)&&A.push(u.get("length")):(A.push(u.get(ih)),$h(ne)&&A.push(u.get(V0)));break;case"delete":Si(ne)||(A.push(u.get(ih)),$h(ne)&&A.push(u.get(V0)));break;case"set":$h(ne)&&A.push(u.get(ih));break}if(A.length===1)A[0]&&H0(A[0]);else{const T=[];for(const e of A)e&&T.push(...e);H0(gg(T))}}function H0(ne,ue){const t=Si(ne)?ne:[...ne];for(const N of t)N.computed&&ly(N);for(const N of t)N.computed||ly(N)}function ly(ne,ue){(ne!==wc||ne.allowRecurse)&&(ne.scheduler?ne.scheduler():ne.run())}const jw=lg("__proto__,__v_isRef,__isVue"),U1=new Set(Object.getOwnPropertyNames(Symbol).filter(ne=>ne!=="arguments"&&ne!=="caller").map(ne=>Symbol[ne]).filter(vg)),Zw=yg(),Kw=yg(!1,!0),$w=yg(!0),uy=Jw();function Jw(){const ne={};return["includes","indexOf","lastIndexOf"].forEach(ue=>{ne[ue]=function(...t){const N=bo(this);for(let m=0,u=this.length;m<u;m++)Yu(N,"get",m+"");const V=N[ue](...t);return V===-1||V===!1?N[ue](...t.map(bo)):V}}),["push","pop","shift","unshift","splice"].forEach(ue=>{ne[ue]=function(...t){cv();const N=bo(this)[ue].apply(this,t);return fv(),N}}),ne}function yg(ne=!1,ue=!1){return function(N,V,m){if(V==="__v_isReactive")return!ne;if(V==="__v_isReadonly")return ne;if(V==="__v_isShallow")return ue;if(V==="__v_raw"&&m===(ne?ue?v3:W1:ue?Y1:G1).get(N))return N;const u=Si(N);if(!ne&&u&&po(uy,V))return Reflect.get(uy,V,m);const A=Reflect.get(N,V,m);return(vg(V)?U1.has(V):jw(V))||(ne||Yu(N,"get",V),ue)?A:Ps(A)?u&&pg(V)?A:A.value:Jo(A)?ne?X1(A):_d(A):A}}const Qw=V1(),qw=V1(!0);function V1(ne=!1){return function(t,N,V,m){let u=t[N];if(ev(u)&&Ps(u)&&!Ps(V))return!1;if(!ne&&(!sd(V)&&!ev(V)&&(u=bo(u),V=bo(V)),!Si(t)&&Ps(u)&&!Ps(V)))return u.value=V,!0;const A=Si(t)&&pg(N)?Number(N)<t.length:po(t,N),T=Reflect.set(t,N,V,m);return t===bo(m)&&(A?qv(V,u)&&ef(t,"set",N,V):ef(t,"add",N,V)),T}}function e3(ne,ue){const t=po(ne,ue);ne[ue];const N=Reflect.deleteProperty(ne,ue);return N&&t&&ef(ne,"delete",ue,void 0),N}function t3(ne,ue){const t=Reflect.has(ne,ue);return(!vg(ue)||!U1.has(ue))&&Yu(ne,"has",ue),t}function r3(ne){return Yu(ne,"iterate",Si(ne)?"length":ih),Reflect.ownKeys(ne)}const H1={get:Zw,set:Qw,deleteProperty:e3,has:t3,ownKeys:r3},n3={get:$w,set(ne,ue){return!0},deleteProperty(ne,ue){return!0}},a3=Sl({},H1,{get:Kw,set:qw}),xg=ne=>ne,bd=ne=>Reflect.getPrototypeOf(ne);function Up(ne,ue,t=!1,N=!1){ne=ne.__v_raw;const V=bo(ne),m=bo(ue);t||(ue!==m&&Yu(V,"get",ue),Yu(V,"get",m));const{has:u}=bd(V),A=N?xg:t?wg:ep;if(u.call(V,ue))return A(ne.get(ue));if(u.call(V,m))return A(ne.get(m));ne!==V&&ne.get(ue)}function Vp(ne,ue=!1){const t=this.__v_raw,N=bo(t),V=bo(ne);return ue||(ne!==V&&Yu(N,"has",ne),Yu(N,"has",V)),ne===V?t.has(ne):t.has(ne)||t.has(V)}function Hp(ne,ue=!1){return ne=ne.__v_raw,!ue&&Yu(bo(ne),"iterate",ih),Reflect.get(ne,"size",ne)}function cy(ne){ne=bo(ne);const ue=bo(this);return bd(ue).has.call(ue,ne)||(ue.add(ne),ef(ue,"add",ne,ne)),this}function fy(ne,ue){ue=bo(ue);const t=bo(this),{has:N,get:V}=bd(t);let m=N.call(t,ne);m||(ne=bo(ne),m=N.call(t,ne));const u=V.call(t,ne);return t.set(ne,ue),m?qv(ue,u)&&ef(t,"set",ne,ue):ef(t,"add",ne,ue),this}function hy(ne){const ue=bo(this),{has:t,get:N}=bd(ue);let V=t.call(ue,ne);V||(ne=bo(ne),V=t.call(ue,ne)),N&&N.call(ue,ne);const m=ue.delete(ne);return V&&ef(ue,"delete",ne,void 0),m}function vy(){const ne=bo(this),ue=ne.size!==0,t=ne.clear();return ue&&ef(ne,"clear",void 0,void 0),t}function Gp(ne,ue){return function(N,V){const m=this,u=m.__v_raw,A=bo(u),T=ue?xg:ne?wg:ep;return!ne&&Yu(A,"iterate",ih),u.forEach((e,a)=>N.call(V,T(e),T(a),m))}}function Yp(ne,ue,t){return function(...N){const V=this.__v_raw,m=bo(V),u=$h(m),A=ne==="entries"||ne===Symbol.iterator&&u,T=ne==="keys"&&u,e=V[ne](...N),a=t?xg:ue?wg:ep;return!ue&&Yu(m,"iterate",T?V0:ih),{next(){const{value:i,done:n}=e.next();return n?{value:i,done:n}:{value:A?[a(i[0]),a(i[1])]:a(i),done:n}},[Symbol.iterator](){return this}}}}function yf(ne){return function(...ue){return ne==="delete"?!1:this}}function i3(){const ne={get(m){return Up(this,m)},get size(){return Hp(this)},has:Vp,add:cy,set:fy,delete:hy,clear:vy,forEach:Gp(!1,!1)},ue={get(m){return Up(this,m,!1,!0)},get size(){return Hp(this)},has:Vp,add:cy,set:fy,delete:hy,clear:vy,forEach:Gp(!1,!0)},t={get(m){return Up(this,m,!0)},get size(){return Hp(this,!0)},has(m){return Vp.call(this,m,!0)},add:yf("add"),set:yf("set"),delete:yf("delete"),clear:yf("clear"),forEach:Gp(!0,!1)},N={get(m){return Up(this,m,!0,!0)},get size(){return Hp(this,!0)},has(m){return Vp.call(this,m,!0)},add:yf("add"),set:yf("set"),delete:yf("delete"),clear:yf("clear"),forEach:Gp(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{ne[m]=Yp(m,!1,!1),t[m]=Yp(m,!0,!1),ue[m]=Yp(m,!1,!0),N[m]=Yp(m,!0,!0)}),[ne,t,ue,N]}const[o3,s3,l3,u3]=i3();function bg(ne,ue){const t=ue?ne?u3:l3:ne?s3:o3;return(N,V,m)=>V==="__v_isReactive"?!ne:V==="__v_isReadonly"?ne:V==="__v_raw"?N:Reflect.get(po(t,V)&&V in N?t:N,V,m)}const c3={get:bg(!1,!1)},f3={get:bg(!1,!0)},h3={get:bg(!0,!1)},G1=new WeakMap,Y1=new WeakMap,W1=new WeakMap,v3=new WeakMap;function p3(ne){switch(ne){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function d3(ne){return ne.__v_skip||!Object.isExtensible(ne)?0:p3(Nw(ne))}function _d(ne){return ev(ne)?ne:_g(ne,!1,H1,c3,G1)}function g3(ne){return _g(ne,!1,a3,f3,Y1)}function X1(ne){return _g(ne,!0,n3,h3,W1)}function _g(ne,ue,t,N,V){if(!Jo(ne)||ne.__v_raw&&!(ue&&ne.__v_isReactive))return ne;const m=V.get(ne);if(m)return m;const u=d3(ne);if(u===0)return ne;const A=new Proxy(ne,u===2?N:t);return V.set(ne,A),A}function Ef(ne){return ev(ne)?Ef(ne.__v_raw):!!(ne&&ne.__v_isReactive)}function ev(ne){return!!(ne&&ne.__v_isReadonly)}function sd(ne){return!!(ne&&ne.__v_isShallow)}function j1(ne){return Ef(ne)||ev(ne)}function bo(ne){const ue=ne&&ne.__v_raw;return ue?bo(ue):ne}function tv(ne){return od(ne,"__v_skip",!0),ne}const ep=ne=>Jo(ne)?_d(ne):ne,wg=ne=>Jo(ne)?X1(ne):ne;function Z1(ne){Mf&&wc&&(ne=bo(ne),B1(ne.dep||(ne.dep=gg())))}function K1(ne,ue){ne=bo(ne),ne.dep&&H0(ne.dep)}function Ps(ne){return!!(ne&&ne.__v_isRef===!0)}function Kc(ne){return m3(ne,!1)}function m3(ne,ue){return Ps(ne)?ne:new y3(ne,ue)}class y3{constructor(ue,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?ue:bo(ue),this._value=t?ue:ep(ue)}get value(){return Z1(this),this._value}set value(ue){const t=this.__v_isShallow||sd(ue)||ev(ue);ue=t?ue:bo(ue),qv(ue,this._rawValue)&&(this._rawValue=ue,this._value=t?ue:ep(ue),K1(this))}}function Wv(ne){return Ps(ne)?ne.value:ne}const x3={get:(ne,ue,t)=>Wv(Reflect.get(ne,ue,t)),set:(ne,ue,t,N)=>{const V=ne[ue];return Ps(V)&&!Ps(t)?(V.value=t,!0):Reflect.set(ne,ue,t,N)}};function $1(ne){return Ef(ne)?ne:new Proxy(ne,x3)}function b3(ne){const ue=Si(ne)?new Array(ne.length):{};for(const t in ne)ue[t]=w3(ne,t);return ue}class _3{constructor(ue,t,N){this._object=ue,this._key=t,this._defaultValue=N,this.__v_isRef=!0}get value(){const ue=this._object[this._key];return ue===void 0?this._defaultValue:ue}set value(ue){this._object[this._key]=ue}}function w3(ne,ue,t){const N=ne[ue];return Ps(N)?N:new _3(ne,ue,t)}var J1;class T3{constructor(ue,t,N,V){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[J1]=!1,this._dirty=!0,this.effect=new mg(ue,()=>{this._dirty||(this._dirty=!0,K1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!V,this.__v_isReadonly=N}get value(){const ue=bo(this);return Z1(ue),(ue._dirty||!ue._cacheable)&&(ue._dirty=!1,ue._value=ue.effect.run()),ue._value}set value(ue){this._setter(ue)}}J1="__v_isReadonly";function A3(ne,ue,t=!1){let N,V;const m=ji(ne);return m?(N=ne,V=Ac):(N=ne.get,V=ne.set),new T3(N,V,m||!V,t)}function Sf(ne,ue,t,N){let V;try{V=N?ne(...N):ne()}catch(m){wd(m,ue,t)}return V}function lc(ne,ue,t,N){if(ji(ne)){const m=Sf(ne,ue,t,N);return m&&L1(m)&&m.catch(u=>{wd(u,ue,t)}),m}const V=[];for(let m=0;m<ne.length;m++)V.push(lc(ne[m],ue,t,N));return V}function wd(ne,ue,t,N=!0){const V=ue?ue.vnode:null;if(ue){let m=ue.parent;const u=ue.proxy,A=t;for(;m;){const e=m.ec;if(e){for(let a=0;a<e.length;a++)if(e[a](ne,u,A)===!1)return}m=m.parent}const T=ue.appContext.config.errorHandler;if(T){Sf(T,null,10,[ne,u,A]);return}}M3(ne,t,V,N)}function M3(ne,ue,t,N=!0){console.error(ne)}let tp=!1,G0=!1;const Gl=[];let Nc=0;const Jh=[];let Zc=null,qf=0;const Q1=Promise.resolve();let Tg=null;function q1(ne){const ue=Tg||Q1;return ne?ue.then(this?ne.bind(this):ne):ue}function E3(ne){let ue=Nc+1,t=Gl.length;for(;ue<t;){const N=ue+t>>>1;rp(Gl[N])<ne?ue=N+1:t=N}return ue}function Ag(ne){(!Gl.length||!Gl.includes(ne,tp&&ne.allowRecurse?Nc+1:Nc))&&(ne.id==null?Gl.push(ne):Gl.splice(E3(ne.id),0,ne),ex())}function ex(){!tp&&!G0&&(G0=!0,Tg=Q1.then(rx))}function S3(ne){const ue=Gl.indexOf(ne);ue>Nc&&Gl.splice(ue,1)}function k3(ne){Si(ne)?Jh.push(...ne):(!Zc||!Zc.includes(ne,ne.allowRecurse?qf+1:qf))&&Jh.push(ne),ex()}function py(ne,ue=tp?Nc+1:0){for(;ue<Gl.length;ue++){const t=Gl[ue];t&&t.pre&&(Gl.splice(ue,1),ue--,t())}}function tx(ne){if(Jh.length){const ue=[...new Set(Jh)];if(Jh.length=0,Zc){Zc.push(...ue);return}for(Zc=ue,Zc.sort((t,N)=>rp(t)-rp(N)),qf=0;qf<Zc.length;qf++)Zc[qf]();Zc=null,qf=0}}const rp=ne=>ne.id==null?1/0:ne.id,C3=(ne,ue)=>{const t=rp(ne)-rp(ue);if(t===0){if(ne.pre&&!ue.pre)return-1;if(ue.pre&&!ne.pre)return 1}return t};function rx(ne){G0=!1,tp=!0,Gl.sort(C3);const ue=Ac;try{for(Nc=0;Nc<Gl.length;Nc++){const t=Gl[Nc];t&&t.active!==!1&&Sf(t,null,14)}}finally{Nc=0,Gl.length=0,tx(),tp=!1,Tg=null,(Gl.length||Jh.length)&&rx()}}function L3(ne,ue,...t){if(ne.isUnmounted)return;const N=ne.vnode.props||$o;let V=t;const m=ue.startsWith("update:"),u=m&&ue.slice(7);if(u&&u in N){const a=`${u==="modelValue"?"model":u}Modifiers`,{number:i,trim:n}=N[a]||$o;n&&(V=t.map(r=>Js(r)?r.trim():r)),i&&(V=t.map(dg))}let A,T=N[A=d0(ue)]||N[A=d0(qh(ue))];!T&&m&&(T=N[A=d0(ch(ue))]),T&&lc(T,ne,6,V);const e=N[A+"Once"];if(e){if(!ne.emitted)ne.emitted={};else if(ne.emitted[A])return;ne.emitted[A]=!0,lc(e,ne,6,V)}}function nx(ne,ue,t=!1){const N=ue.emitsCache,V=N.get(ne);if(V!==void 0)return V;const m=ne.emits;let u={},A=!1;if(!ji(ne)){const T=e=>{const a=nx(e,ue,!0);a&&(A=!0,Sl(u,a))};!t&&ue.mixins.length&&ue.mixins.forEach(T),ne.extends&&T(ne.extends),ne.mixins&&ne.mixins.forEach(T)}return!m&&!A?(Jo(ne)&&N.set(ne,null),null):(Si(m)?m.forEach(T=>u[T]=null):Sl(u,m),Jo(ne)&&N.set(ne,u),u)}function Td(ne,ue){return!ne||!md(ue)?!1:(ue=ue.slice(2).replace(/Once$/,""),po(ne,ue[0].toLowerCase()+ue.slice(1))||po(ne,ch(ue))||po(ne,ue))}let Yl=null,ax=null;function ld(ne){const ue=Yl;return Yl=ne,ax=ne&&ne.type.__scopeId||null,ue}function Y0(ne,ue=Yl,t){if(!ue||ne._n)return ne;const N=(...V)=>{N._d&&Ay(-1);const m=ld(ue);let u;try{u=ne(...V)}finally{ld(m),N._d&&Ay(1)}return u};return N._n=!0,N._c=!0,N._d=!0,N}function m0(ne){const{type:ue,vnode:t,proxy:N,withProxy:V,props:m,propsOptions:[u],slots:A,attrs:T,emit:e,render:a,renderCache:i,data:n,setupState:r,ctx:v,inheritAttrs:s}=ne;let o,b;const g=ld(ne);try{if(t.shapeFlag&4){const f=V||N;o=Oc(a.call(f,f,i,m,r,n,v)),b=T}else{const f=ue;o=Oc(f.length>1?f(m,{attrs:T,slots:A,emit:e}):f(m,null)),b=ue.props?T:P3(T)}}catch(f){Kv.length=0,wd(f,ne,1),o=no(uc)}let d=o;if(b&&s!==!1){const f=Object.keys(b),{shapeFlag:y}=d;f.length&&y&7&&(u&&f.some(fg)&&(b=D3(b,u)),d=Cf(d,b))}return t.dirs&&(d=Cf(d),d.dirs=d.dirs?d.dirs.concat(t.dirs):t.dirs),t.transition&&(d.transition=t.transition),o=d,ld(g),o}const P3=ne=>{let ue;for(const t in ne)(t==="class"||t==="style"||md(t))&&((ue||(ue={}))[t]=ne[t]);return ue},D3=(ne,ue)=>{const t={};for(const N in ne)(!fg(N)||!(N.slice(9)in ue))&&(t[N]=ne[N]);return t};function R3(ne,ue,t){const{props:N,children:V,component:m}=ne,{props:u,children:A,patchFlag:T}=ue,e=m.emitsOptions;if(ue.dirs||ue.transition)return!0;if(t&&T>=0){if(T&1024)return!0;if(T&16)return N?dy(N,u,e):!!u;if(T&8){const a=ue.dynamicProps;for(let i=0;i<a.length;i++){const n=a[i];if(u[n]!==N[n]&&!Td(e,n))return!0}}}else return(V||A)&&(!A||!A.$stable)?!0:N===u?!1:N?u?dy(N,u,e):!0:!!u;return!1}function dy(ne,ue,t){const N=Object.keys(ue);if(N.length!==Object.keys(ne).length)return!0;for(let V=0;V<N.length;V++){const m=N[V];if(ue[m]!==ne[m]&&!Td(t,m))return!0}return!1}function I3({vnode:ne,parent:ue},t){for(;ue&&ue.subTree===ne;)(ne=ue.vnode).el=t,ue=ue.parent}const F3=ne=>ne.__isSuspense;function z3(ne,ue){ue&&ue.pendingBranch?Si(ne)?ue.effects.push(...ne):ue.effects.push(ne):k3(ne)}function O3(ne,ue){if(El){let t=El.provides;const N=El.parent&&El.parent.provides;N===t&&(t=El.provides=Object.create(N)),t[ne]=ue}}function Xv(ne,ue,t=!1){const N=El||Yl;if(N){const V=N.parent==null?N.vnode.appContext&&N.vnode.appContext.provides:N.parent.provides;if(V&&ne in V)return V[ne];if(arguments.length>1)return t&&ji(ue)?ue.call(N.proxy):ue}}const Wp={};function td(ne,ue,t){return ix(ne,ue,t)}function ix(ne,ue,{immediate:t,deep:N,flush:V,onTrack:m,onTrigger:u}=$o){const A=El;let T,e=!1,a=!1;if(Ps(ne)?(T=()=>ne.value,e=sd(ne)):Ef(ne)?(T=()=>ne,N=!0):Si(ne)?(a=!0,e=ne.some(d=>Ef(d)||sd(d)),T=()=>ne.map(d=>{if(Ps(d))return d.value;if(Ef(d))return rh(d);if(ji(d))return Sf(d,A,2)})):ji(ne)?ue?T=()=>Sf(ne,A,2):T=()=>{if(!(A&&A.isUnmounted))return i&&i(),lc(ne,A,3,[n])}:T=Ac,ue&&N){const d=T;T=()=>rh(d())}let i,n=d=>{i=b.onStop=()=>{Sf(d,A,4)}},r;if(ap)if(n=Ac,ue?t&&lc(ue,A,3,[T(),a?[]:void 0,n]):T(),V==="sync"){const d=CT();r=d.__watcherHandles||(d.__watcherHandles=[])}else return Ac;let v=a?new Array(ne.length).fill(Wp):Wp;const s=()=>{if(!!b.active)if(ue){const d=b.run();(N||e||(a?d.some((f,y)=>qv(f,v[y])):qv(d,v)))&&(i&&i(),lc(ue,A,3,[d,v===Wp?void 0:a&&v[0]===Wp?[]:v,n]),v=d)}else b.run()};s.allowRecurse=!!ue;let o;V==="sync"?o=s:V==="post"?o=()=>Tu(s,A&&A.suspense):(s.pre=!0,A&&(s.id=A.uid),o=()=>Ag(s));const b=new mg(T,o);ue?t?s():v=b.run():V==="post"?Tu(b.run.bind(b),A&&A.suspense):b.run();const g=()=>{b.stop(),A&&A.scope&&hg(A.scope.effects,b)};return r&&r.push(g),g}function N3(ne,ue,t){const N=this.proxy,V=Js(ne)?ne.includes(".")?ox(N,ne):()=>N[ne]:ne.bind(N,N);let m;ji(ue)?m=ue:(m=ue.handler,t=ue);const u=El;rv(this);const A=ix(V,m.bind(N),t);return u?rv(u):oh(),A}function ox(ne,ue){const t=ue.split(".");return()=>{let N=ne;for(let V=0;V<t.length&&N;V++)N=N[t[V]];return N}}function rh(ne,ue){if(!Jo(ne)||ne.__v_skip||(ue=ue||new Set,ue.has(ne)))return ne;if(ue.add(ne),Ps(ne))rh(ne.value,ue);else if(Si(ne))for(let t=0;t<ne.length;t++)rh(ne[t],ue);else if(C1(ne)||$h(ne))ne.forEach(t=>{rh(t,ue)});else if(D1(ne))for(const t in ne)rh(ne[t],ue);return ne}function B3(){const ne={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mg(()=>{ne.isMounted=!0}),fx(()=>{ne.isUnmounting=!0}),ne}const oc=[Function,Array],U3={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:oc,onEnter:oc,onAfterEnter:oc,onEnterCancelled:oc,onBeforeLeave:oc,onLeave:oc,onAfterLeave:oc,onLeaveCancelled:oc,onBeforeAppear:oc,onAppear:oc,onAfterAppear:oc,onAppearCancelled:oc},setup(ne,{slots:ue}){const t=Tx(),N=B3();let V;return()=>{const m=ue.default&&ux(ue.default(),!0);if(!m||!m.length)return;let u=m[0];if(m.length>1){for(const s of m)if(s.type!==uc){u=s;break}}const A=bo(ne),{mode:T}=A;if(N.isLeaving)return y0(u);const e=gy(u);if(!e)return y0(u);const a=W0(e,A,N,t);X0(e,a);const i=t.subTree,n=i&&gy(i);let r=!1;const{getTransitionKey:v}=e.type;if(v){const s=v();V===void 0?V=s:s!==V&&(V=s,r=!0)}if(n&&n.type!==uc&&(!eh(e,n)||r)){const s=W0(n,A,N,t);if(X0(n,s),T==="out-in")return N.isLeaving=!0,s.afterLeave=()=>{N.isLeaving=!1,t.update.active!==!1&&t.update()},y0(u);T==="in-out"&&e.type!==uc&&(s.delayLeave=(o,b,g)=>{const d=lx(N,n);d[String(n.key)]=n,o._leaveCb=()=>{b(),o._leaveCb=void 0,delete a.delayedLeave},a.delayedLeave=g})}return u}}},sx=U3;function lx(ne,ue){const{leavingVNodes:t}=ne;let N=t.get(ue.type);return N||(N=Object.create(null),t.set(ue.type,N)),N}function W0(ne,ue,t,N){const{appear:V,mode:m,persisted:u=!1,onBeforeEnter:A,onEnter:T,onAfterEnter:e,onEnterCancelled:a,onBeforeLeave:i,onLeave:n,onAfterLeave:r,onLeaveCancelled:v,onBeforeAppear:s,onAppear:o,onAfterAppear:b,onAppearCancelled:g}=ue,d=String(ne.key),f=lx(t,ne),y=(c,M)=>{c&&lc(c,N,9,M)},l=(c,M)=>{const w=M[1];y(c,M),Si(c)?c.every(p=>p.length<=1)&&w():c.length<=1&&w()},x={mode:m,persisted:u,beforeEnter(c){let M=A;if(!t.isMounted)if(V)M=s||A;else return;c._leaveCb&&c._leaveCb(!0);const w=f[d];w&&eh(ne,w)&&w.el._leaveCb&&w.el._leaveCb(),y(M,[c])},enter(c){let M=T,w=e,p=a;if(!t.isMounted)if(V)M=o||T,w=b||e,p=g||a;else return;let _=!1;const h=c._enterCb=L=>{_||(_=!0,L?y(p,[c]):y(w,[c]),x.delayedLeave&&x.delayedLeave(),c._enterCb=void 0)};M?l(M,[c,h]):h()},leave(c,M){const w=String(ne.key);if(c._enterCb&&c._enterCb(!0),t.isUnmounting)return M();y(i,[c]);let p=!1;const _=c._leaveCb=h=>{p||(p=!0,M(),h?y(v,[c]):y(r,[c]),c._leaveCb=void 0,f[w]===ne&&delete f[w])};f[w]=ne,n?l(n,[c,_]):_()},clone(c){return W0(c,ue,t,N)}};return x}function y0(ne){if(Ad(ne))return ne=Cf(ne),ne.children=null,ne}function gy(ne){return Ad(ne)?ne.children?ne.children[0]:void 0:ne}function X0(ne,ue){ne.shapeFlag&6&&ne.component?X0(ne.component.subTree,ue):ne.shapeFlag&128?(ne.ssContent.transition=ue.clone(ne.ssContent),ne.ssFallback.transition=ue.clone(ne.ssFallback)):ne.transition=ue}function ux(ne,ue=!1,t){let N=[],V=0;for(let m=0;m<ne.length;m++){let u=ne[m];const A=t==null?u.key:String(t)+String(u.key!=null?u.key:m);u.type===iu?(u.patchFlag&128&&V++,N=N.concat(ux(u.children,ue,A))):(ue||u.type!==uc)&&N.push(A!=null?Cf(u,{key:A}):u)}if(V>1)for(let m=0;m<N.length;m++)N[m].patchFlag=-2;return N}const jv=ne=>!!ne.type.__asyncLoader,Ad=ne=>ne.type.__isKeepAlive;function V3(ne,ue){cx(ne,"a",ue)}function H3(ne,ue){cx(ne,"da",ue)}function cx(ne,ue,t=El){const N=ne.__wdc||(ne.__wdc=()=>{let V=t;for(;V;){if(V.isDeactivated)return;V=V.parent}return ne()});if(Md(ue,N,t),t){let V=t.parent;for(;V&&V.parent;)Ad(V.parent.vnode)&&G3(N,ue,t,V),V=V.parent}}function G3(ne,ue,t,N){const V=Md(ue,ne,N,!0);Eg(()=>{hg(N[ue],V)},t)}function Md(ne,ue,t=El,N=!1){if(t){const V=t[ne]||(t[ne]=[]),m=ue.__weh||(ue.__weh=(...u)=>{if(t.isUnmounted)return;cv(),rv(t);const A=lc(ue,t,ne,u);return oh(),fv(),A});return N?V.unshift(m):V.push(m),m}}const rf=ne=>(ue,t=El)=>(!ap||ne==="sp")&&Md(ne,(...N)=>ue(...N),t),Y3=rf("bm"),Mg=rf("m"),W3=rf("bu"),X3=rf("u"),fx=rf("bum"),Eg=rf("um"),j3=rf("sp"),Z3=rf("rtg"),K3=rf("rtc");function $3(ne,ue=El){Md("ec",ne,ue)}function Nv(ne,ue){const t=Yl;if(t===null)return ne;const N=kd(t)||t.proxy,V=ne.dirs||(ne.dirs=[]);for(let m=0;m<ue.length;m++){let[u,A,T,e=$o]=ue[m];u&&(ji(u)&&(u={mounted:u,updated:u}),u.deep&&rh(A),V.push({dir:u,instance:N,value:A,oldValue:void 0,arg:T,modifiers:e}))}return ne}function Zf(ne,ue,t,N){const V=ne.dirs,m=ue&&ue.dirs;for(let u=0;u<V.length;u++){const A=V[u];m&&(A.oldValue=m[u].value);let T=A.dir[N];T&&(cv(),lc(T,t,8,[ne.el,A,ne,ue]),fv())}}const J3=Symbol();function my(ne,ue,t,N){let V;const m=t&&t[N];if(Si(ne)||Js(ne)){V=new Array(ne.length);for(let u=0,A=ne.length;u<A;u++)V[u]=ue(ne[u],u,void 0,m&&m[u])}else if(typeof ne=="number"){V=new Array(ne);for(let u=0;u<ne;u++)V[u]=ue(u+1,u,void 0,m&&m[u])}else if(Jo(ne))if(ne[Symbol.iterator])V=Array.from(ne,(u,A)=>ue(u,A,void 0,m&&m[A]));else{const u=Object.keys(ne);V=new Array(u.length);for(let A=0,T=u.length;A<T;A++){const e=u[A];V[A]=ue(ne[e],e,A,m&&m[A])}}else V=[];return t&&(t[N]=V),V}function nu(ne,ue,t={},N,V){if(Yl.isCE||Yl.parent&&jv(Yl.parent)&&Yl.parent.isCE)return ue!=="default"&&(t.name=ue),no("slot",t,N&&N());let m=ne[ue];m&&m._c&&(m._d=!1),$s();const u=m&&hx(m(t)),A=Au(iu,{key:t.key||u&&u.key||`_${ue}`},u||(N?N():[]),u&&ne._===1?64:-2);return!V&&A.scopeId&&(A.slotScopeIds=[A.scopeId+"-s"]),m&&m._c&&(m._d=!0),A}function hx(ne){return ne.some(ue=>cd(ue)?!(ue.type===uc||ue.type===iu&&!hx(ue.children)):!0)?ne:null}const j0=ne=>ne?Ax(ne)?kd(ne)||ne.proxy:j0(ne.parent):null,Zv=Sl(Object.create(null),{$:ne=>ne,$el:ne=>ne.vnode.el,$data:ne=>ne.data,$props:ne=>ne.props,$attrs:ne=>ne.attrs,$slots:ne=>ne.slots,$refs:ne=>ne.refs,$parent:ne=>j0(ne.parent),$root:ne=>j0(ne.root),$emit:ne=>ne.emit,$options:ne=>Sg(ne),$forceUpdate:ne=>ne.f||(ne.f=()=>Ag(ne.update)),$nextTick:ne=>ne.n||(ne.n=q1.bind(ne.proxy)),$watch:ne=>N3.bind(ne)}),x0=(ne,ue)=>ne!==$o&&!ne.__isScriptSetup&&po(ne,ue),Q3={get({_:ne},ue){const{ctx:t,setupState:N,data:V,props:m,accessCache:u,type:A,appContext:T}=ne;let e;if(ue[0]!=="$"){const r=u[ue];if(r!==void 0)switch(r){case 1:return N[ue];case 2:return V[ue];case 4:return t[ue];case 3:return m[ue]}else{if(x0(N,ue))return u[ue]=1,N[ue];if(V!==$o&&po(V,ue))return u[ue]=2,V[ue];if((e=ne.propsOptions[0])&&po(e,ue))return u[ue]=3,m[ue];if(t!==$o&&po(t,ue))return u[ue]=4,t[ue];Z0&&(u[ue]=0)}}const a=Zv[ue];let i,n;if(a)return ue==="$attrs"&&Yu(ne,"get",ue),a(ne);if((i=A.__cssModules)&&(i=i[ue]))return i;if(t!==$o&&po(t,ue))return u[ue]=4,t[ue];if(n=T.config.globalProperties,po(n,ue))return n[ue]},set({_:ne},ue,t){const{data:N,setupState:V,ctx:m}=ne;return x0(V,ue)?(V[ue]=t,!0):N!==$o&&po(N,ue)?(N[ue]=t,!0):po(ne.props,ue)||ue[0]==="$"&&ue.slice(1)in ne?!1:(m[ue]=t,!0)},has({_:{data:ne,setupState:ue,accessCache:t,ctx:N,appContext:V,propsOptions:m}},u){let A;return!!t[u]||ne!==$o&&po(ne,u)||x0(ue,u)||(A=m[0])&&po(A,u)||po(N,u)||po(Zv,u)||po(V.config.globalProperties,u)},defineProperty(ne,ue,t){return t.get!=null?ne._.accessCache[ue]=0:po(t,"value")&&this.set(ne,ue,t.value,null),Reflect.defineProperty(ne,ue,t)}};let Z0=!0;function q3(ne){const ue=Sg(ne),t=ne.proxy,N=ne.ctx;Z0=!1,ue.beforeCreate&&yy(ue.beforeCreate,ne,"bc");const{data:V,computed:m,methods:u,watch:A,provide:T,inject:e,created:a,beforeMount:i,mounted:n,beforeUpdate:r,updated:v,activated:s,deactivated:o,beforeDestroy:b,beforeUnmount:g,destroyed:d,unmounted:f,render:y,renderTracked:l,renderTriggered:x,errorCaptured:c,serverPrefetch:M,expose:w,inheritAttrs:p,components:_,directives:h,filters:L}=ue;if(e&&eT(e,N,null,ne.appContext.config.unwrapInjectedRef),u)for(const P in u){const F=u[P];ji(F)&&(N[P]=F.bind(t))}if(V){const P=V.call(t,t);Jo(P)&&(ne.data=_d(P))}if(Z0=!0,m)for(const P in m){const F=m[P],I=ji(F)?F.bind(t,t):ji(F.get)?F.get.bind(t,t):Ac,D=!ji(F)&&ji(F.set)?F.set.bind(t):Ac,R=fd({get:I,set:D});Object.defineProperty(N,P,{enumerable:!0,configurable:!0,get:()=>R.value,set:O=>R.value=O})}if(A)for(const P in A)vx(A[P],N,t,P);if(T){const P=ji(T)?T.call(t):T;Reflect.ownKeys(P).forEach(F=>{O3(F,P[F])})}a&&yy(a,ne,"c");function S(P,F){Si(F)?F.forEach(I=>P(I.bind(t))):F&&P(F.bind(t))}if(S(Y3,i),S(Mg,n),S(W3,r),S(X3,v),S(V3,s),S(H3,o),S($3,c),S(K3,l),S(Z3,x),S(fx,g),S(Eg,f),S(j3,M),Si(w))if(w.length){const P=ne.exposed||(ne.exposed={});w.forEach(F=>{Object.defineProperty(P,F,{get:()=>t[F],set:I=>t[F]=I})})}else ne.exposed||(ne.exposed={});y&&ne.render===Ac&&(ne.render=y),p!=null&&(ne.inheritAttrs=p),_&&(ne.components=_),h&&(ne.directives=h)}function eT(ne,ue,t=Ac,N=!1){Si(ne)&&(ne=K0(ne));for(const V in ne){const m=ne[V];let u;Jo(m)?"default"in m?u=Xv(m.from||V,m.default,!0):u=Xv(m.from||V):u=Xv(m),Ps(u)&&N?Object.defineProperty(ue,V,{enumerable:!0,configurable:!0,get:()=>u.value,set:A=>u.value=A}):ue[V]=u}}function yy(ne,ue,t){lc(Si(ne)?ne.map(N=>N.bind(ue.proxy)):ne.bind(ue.proxy),ue,t)}function vx(ne,ue,t,N){const V=N.includes(".")?ox(t,N):()=>t[N];if(Js(ne)){const m=ue[ne];ji(m)&&td(V,m)}else if(ji(ne))td(V,ne.bind(t));else if(Jo(ne))if(Si(ne))ne.forEach(m=>vx(m,ue,t,N));else{const m=ji(ne.handler)?ne.handler.bind(t):ue[ne.handler];ji(m)&&td(V,m,ne)}}function Sg(ne){const ue=ne.type,{mixins:t,extends:N}=ue,{mixins:V,optionsCache:m,config:{optionMergeStrategies:u}}=ne.appContext,A=m.get(ue);let T;return A?T=A:!V.length&&!t&&!N?T=ue:(T={},V.length&&V.forEach(e=>ud(T,e,u,!0)),ud(T,ue,u)),Jo(ue)&&m.set(ue,T),T}function ud(ne,ue,t,N=!1){const{mixins:V,extends:m}=ue;m&&ud(ne,m,t,!0),V&&V.forEach(u=>ud(ne,u,t,!0));for(const u in ue)if(!(N&&u==="expose")){const A=tT[u]||t&&t[u];ne[u]=A?A(ne[u],ue[u]):ue[u]}return ne}const tT={data:xy,props:Qf,emits:Qf,methods:Qf,computed:Qf,beforeCreate:au,created:au,beforeMount:au,mounted:au,beforeUpdate:au,updated:au,beforeDestroy:au,beforeUnmount:au,destroyed:au,unmounted:au,activated:au,deactivated:au,errorCaptured:au,serverPrefetch:au,components:Qf,directives:Qf,watch:nT,provide:xy,inject:rT};function xy(ne,ue){return ue?ne?function(){return Sl(ji(ne)?ne.call(this,this):ne,ji(ue)?ue.call(this,this):ue)}:ue:ne}function rT(ne,ue){return Qf(K0(ne),K0(ue))}function K0(ne){if(Si(ne)){const ue={};for(let t=0;t<ne.length;t++)ue[ne[t]]=ne[t];return ue}return ne}function au(ne,ue){return ne?[...new Set([].concat(ne,ue))]:ue}function Qf(ne,ue){return ne?Sl(Sl(Object.create(null),ne),ue):ue}function nT(ne,ue){if(!ne)return ue;if(!ue)return ne;const t=Sl(Object.create(null),ne);for(const N in ue)t[N]=au(ne[N],ue[N]);return t}function aT(ne,ue,t,N=!1){const V={},m={};od(m,Sd,1),ne.propsDefaults=Object.create(null),px(ne,ue,V,m);for(const u in ne.propsOptions[0])u in V||(V[u]=void 0);t?ne.props=N?V:g3(V):ne.type.props?ne.props=V:ne.props=m,ne.attrs=m}function iT(ne,ue,t,N){const{props:V,attrs:m,vnode:{patchFlag:u}}=ne,A=bo(V),[T]=ne.propsOptions;let e=!1;if((N||u>0)&&!(u&16)){if(u&8){const a=ne.vnode.dynamicProps;for(let i=0;i<a.length;i++){let n=a[i];if(Td(ne.emitsOptions,n))continue;const r=ue[n];if(T)if(po(m,n))r!==m[n]&&(m[n]=r,e=!0);else{const v=qh(n);V[v]=$0(T,A,v,r,ne,!1)}else r!==m[n]&&(m[n]=r,e=!0)}}}else{px(ne,ue,V,m)&&(e=!0);let a;for(const i in A)(!ue||!po(ue,i)&&((a=ch(i))===i||!po(ue,a)))&&(T?t&&(t[i]!==void 0||t[a]!==void 0)&&(V[i]=$0(T,A,i,void 0,ne,!0)):delete V[i]);if(m!==A)for(const i in m)(!ue||!po(ue,i)&&!0)&&(delete m[i],e=!0)}e&&ef(ne,"set","$attrs")}function px(ne,ue,t,N){const[V,m]=ne.propsOptions;let u=!1,A;if(ue)for(let T in ue){if(ed(T))continue;const e=ue[T];let a;V&&po(V,a=qh(T))?!m||!m.includes(a)?t[a]=e:(A||(A={}))[a]=e:Td(ne.emitsOptions,T)||(!(T in N)||e!==N[T])&&(N[T]=e,u=!0)}if(m){const T=bo(t),e=A||$o;for(let a=0;a<m.length;a++){const i=m[a];t[i]=$0(V,T,i,e[i],ne,!po(e,i))}}return u}function $0(ne,ue,t,N,V,m){const u=ne[t];if(u!=null){const A=po(u,"default");if(A&&N===void 0){const T=u.default;if(u.type!==Function&&ji(T)){const{propsDefaults:e}=V;t in e?N=e[t]:(rv(V),N=e[t]=T.call(null,ue),oh())}else N=T}u[0]&&(m&&!A?N=!1:u[1]&&(N===""||N===ch(t))&&(N=!0))}return N}function dx(ne,ue,t=!1){const N=ue.propsCache,V=N.get(ne);if(V)return V;const m=ne.props,u={},A=[];let T=!1;if(!ji(ne)){const a=i=>{T=!0;const[n,r]=dx(i,ue,!0);Sl(u,n),r&&A.push(...r)};!t&&ue.mixins.length&&ue.mixins.forEach(a),ne.extends&&a(ne.extends),ne.mixins&&ne.mixins.forEach(a)}if(!m&&!T)return Jo(ne)&&N.set(ne,Kh),Kh;if(Si(m))for(let a=0;a<m.length;a++){const i=qh(m[a]);by(i)&&(u[i]=$o)}else if(m)for(const a in m){const i=qh(a);if(by(i)){const n=m[a],r=u[i]=Si(n)||ji(n)?{type:n}:Object.assign({},n);if(r){const v=Ty(Boolean,r.type),s=Ty(String,r.type);r[0]=v>-1,r[1]=s<0||v<s,(v>-1||po(r,"default"))&&A.push(i)}}}const e=[u,A];return Jo(ne)&&N.set(ne,e),e}function by(ne){return ne[0]!=="$"}function _y(ne){const ue=ne&&ne.toString().match(/^\s*function (\w+)/);return ue?ue[1]:ne===null?"null":""}function wy(ne,ue){return _y(ne)===_y(ue)}function Ty(ne,ue){return Si(ue)?ue.findIndex(t=>wy(t,ne)):ji(ue)&&wy(ue,ne)?0:-1}const gx=ne=>ne[0]==="_"||ne==="$stable",kg=ne=>Si(ne)?ne.map(Oc):[Oc(ne)],oT=(ne,ue,t)=>{if(ue._n)return ue;const N=Y0((...V)=>kg(ue(...V)),t);return N._c=!1,N},mx=(ne,ue,t)=>{const N=ne._ctx;for(const V in ne){if(gx(V))continue;const m=ne[V];if(ji(m))ue[V]=oT(V,m,N);else if(m!=null){const u=kg(m);ue[V]=()=>u}}},yx=(ne,ue)=>{const t=kg(ue);ne.slots.default=()=>t},sT=(ne,ue)=>{if(ne.vnode.shapeFlag&32){const t=ue._;t?(ne.slots=bo(ue),od(ue,"_",t)):mx(ue,ne.slots={})}else ne.slots={},ue&&yx(ne,ue);od(ne.slots,Sd,1)},lT=(ne,ue,t)=>{const{vnode:N,slots:V}=ne;let m=!0,u=$o;if(N.shapeFlag&32){const A=ue._;A?t&&A===1?m=!1:(Sl(V,ue),!t&&A===1&&delete V._):(m=!ue.$stable,mx(ue,V)),u=ue}else ue&&(yx(ne,ue),u={default:1});if(m)for(const A in V)!gx(A)&&!(A in u)&&delete V[A]};function xx(){return{app:null,config:{isNativeTag:Fw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uT=0;function cT(ne,ue){return function(N,V=null){ji(N)||(N=Object.assign({},N)),V!=null&&!Jo(V)&&(V=null);const m=xx(),u=new Set;let A=!1;const T=m.app={_uid:uT++,_component:N,_props:V,_container:null,_context:m,_instance:null,version:LT,get config(){return m.config},set config(e){},use(e,...a){return u.has(e)||(e&&ji(e.install)?(u.add(e),e.install(T,...a)):ji(e)&&(u.add(e),e(T,...a))),T},mixin(e){return m.mixins.includes(e)||m.mixins.push(e),T},component(e,a){return a?(m.components[e]=a,T):m.components[e]},directive(e,a){return a?(m.directives[e]=a,T):m.directives[e]},mount(e,a,i){if(!A){const n=no(N,V);return n.appContext=m,a&&ue?ue(n,e):ne(n,e,i),A=!0,T._container=e,e.__vue_app__=T,kd(n.component)||n.component.proxy}},unmount(){A&&(ne(null,T._container),delete T._container.__vue_app__)},provide(e,a){return m.provides[e]=a,T}};return T}}function J0(ne,ue,t,N,V=!1){if(Si(ne)){ne.forEach((n,r)=>J0(n,ue&&(Si(ue)?ue[r]:ue),t,N,V));return}if(jv(N)&&!V)return;const m=N.shapeFlag&4?kd(N.component)||N.component.proxy:N.el,u=V?null:m,{i:A,r:T}=ne,e=ue&&ue.r,a=A.refs===$o?A.refs={}:A.refs,i=A.setupState;if(e!=null&&e!==T&&(Js(e)?(a[e]=null,po(i,e)&&(i[e]=null)):Ps(e)&&(e.value=null)),ji(T))Sf(T,A,12,[u,a]);else{const n=Js(T),r=Ps(T);if(n||r){const v=()=>{if(ne.f){const s=n?po(i,T)?i[T]:a[T]:T.value;V?Si(s)&&hg(s,m):Si(s)?s.includes(m)||s.push(m):n?(a[T]=[m],po(i,T)&&(i[T]=a[T])):(T.value=[m],ne.k&&(a[ne.k]=T.value))}else n?(a[T]=u,po(i,T)&&(i[T]=u)):r&&(T.value=u,ne.k&&(a[ne.k]=u))};u?(v.id=-1,Tu(v,t)):v()}}}const Tu=z3;function fT(ne){return hT(ne)}function hT(ne,ue){const t=Vw();t.__VUE__=!0;const{insert:N,remove:V,patchProp:m,createElement:u,createText:A,createComment:T,setText:e,setElementText:a,parentNode:i,nextSibling:n,setScopeId:r=Ac,insertStaticContent:v}=ne,s=($,U,H,q=null,re=null,Z=null,Q=!1,oe=null,se=!!U.dynamicChildren)=>{if($===U)return;$&&!eh($,U)&&(q=j($),O($,re,Z,!0),$=null),U.patchFlag===-2&&(se=!1,U.dynamicChildren=null);const{type:ae,ref:le,shapeFlag:_e}=U;switch(ae){case Ed:o($,U,H,q);break;case uc:b($,U,H,q);break;case b0:$==null&&g(U,H,q,Q);break;case iu:_($,U,H,q,re,Z,Q,oe,se);break;default:_e&1?y($,U,H,q,re,Z,Q,oe,se):_e&6?h($,U,H,q,re,Z,Q,oe,se):(_e&64||_e&128)&&ae.process($,U,H,q,re,Z,Q,oe,se,ie)}le!=null&&re&&J0(le,$&&$.ref,Z,U||$,!U)},o=($,U,H,q)=>{if($==null)N(U.el=A(U.children),H,q);else{const re=U.el=$.el;U.children!==$.children&&e(re,U.children)}},b=($,U,H,q)=>{$==null?N(U.el=T(U.children||""),H,q):U.el=$.el},g=($,U,H,q)=>{[$.el,$.anchor]=v($.children,U,H,q,$.el,$.anchor)},d=({el:$,anchor:U},H,q)=>{let re;for(;$&&$!==U;)re=n($),N($,H,q),$=re;N(U,H,q)},f=({el:$,anchor:U})=>{let H;for(;$&&$!==U;)H=n($),V($),$=H;V(U)},y=($,U,H,q,re,Z,Q,oe,se)=>{Q=Q||U.type==="svg",$==null?l(U,H,q,re,Z,Q,oe,se):M($,U,re,Z,Q,oe,se)},l=($,U,H,q,re,Z,Q,oe)=>{let se,ae;const{type:le,props:_e,shapeFlag:fe,transition:me,dirs:xe}=$;if(se=$.el=u($.type,Z,_e&&_e.is,_e),fe&8?a(se,$.children):fe&16&&c($.children,se,null,q,re,Z&&le!=="foreignObject",Q,oe),xe&&Zf($,null,q,"created"),_e){for(const be in _e)be!=="value"&&!ed(be)&&m(se,be,null,_e[be],Z,$.children,q,re,ee);"value"in _e&&m(se,"value",null,_e.value),(ae=_e.onVnodeBeforeMount)&&Fc(ae,q,$)}x(se,$,$.scopeId,Q,q),xe&&Zf($,null,q,"beforeMount");const ye=(!re||re&&!re.pendingBranch)&&me&&!me.persisted;ye&&me.beforeEnter(se),N(se,U,H),((ae=_e&&_e.onVnodeMounted)||ye||xe)&&Tu(()=>{ae&&Fc(ae,q,$),ye&&me.enter(se),xe&&Zf($,null,q,"mounted")},re)},x=($,U,H,q,re)=>{if(H&&r($,H),q)for(let Z=0;Z<q.length;Z++)r($,q[Z]);if(re){let Z=re.subTree;if(U===Z){const Q=re.vnode;x($,Q,Q.scopeId,Q.slotScopeIds,re.parent)}}},c=($,U,H,q,re,Z,Q,oe,se=0)=>{for(let ae=se;ae<$.length;ae++){const le=$[ae]=oe?Tf($[ae]):Oc($[ae]);s(null,le,U,H,q,re,Z,Q,oe)}},M=($,U,H,q,re,Z,Q)=>{const oe=U.el=$.el;let{patchFlag:se,dynamicChildren:ae,dirs:le}=U;se|=$.patchFlag&16;const _e=$.props||$o,fe=U.props||$o;let me;H&&Kf(H,!1),(me=fe.onVnodeBeforeUpdate)&&Fc(me,H,U,$),le&&Zf(U,$,H,"beforeUpdate"),H&&Kf(H,!0);const xe=re&&U.type!=="foreignObject";if(ae?w($.dynamicChildren,ae,oe,H,q,xe,Z):Q||F($,U,oe,null,H,q,xe,Z,!1),se>0){if(se&16)p(oe,U,_e,fe,H,q,re);else if(se&2&&_e.class!==fe.class&&m(oe,"class",null,fe.class,re),se&4&&m(oe,"style",_e.style,fe.style,re),se&8){const ye=U.dynamicProps;for(let be=0;be<ye.length;be++){const ke=ye[be],De=_e[ke],He=fe[ke];(He!==De||ke==="value")&&m(oe,ke,De,He,re,$.children,H,q,ee)}}se&1&&$.children!==U.children&&a(oe,U.children)}else!Q&&ae==null&&p(oe,U,_e,fe,H,q,re);((me=fe.onVnodeUpdated)||le)&&Tu(()=>{me&&Fc(me,H,U,$),le&&Zf(U,$,H,"updated")},q)},w=($,U,H,q,re,Z,Q)=>{for(let oe=0;oe<U.length;oe++){const se=$[oe],ae=U[oe],le=se.el&&(se.type===iu||!eh(se,ae)||se.shapeFlag&70)?i(se.el):H;s(se,ae,le,null,q,re,Z,Q,!0)}},p=($,U,H,q,re,Z,Q)=>{if(H!==q){if(H!==$o)for(const oe in H)!ed(oe)&&!(oe in q)&&m($,oe,H[oe],null,Q,U.children,re,Z,ee);for(const oe in q){if(ed(oe))continue;const se=q[oe],ae=H[oe];se!==ae&&oe!=="value"&&m($,oe,ae,se,Q,U.children,re,Z,ee)}"value"in q&&m($,"value",H.value,q.value)}},_=($,U,H,q,re,Z,Q,oe,se)=>{const ae=U.el=$?$.el:A(""),le=U.anchor=$?$.anchor:A("");let{patchFlag:_e,dynamicChildren:fe,slotScopeIds:me}=U;me&&(oe=oe?oe.concat(me):me),$==null?(N(ae,H,q),N(le,H,q),c(U.children,H,le,re,Z,Q,oe,se)):_e>0&&_e&64&&fe&&$.dynamicChildren?(w($.dynamicChildren,fe,H,re,Z,Q,oe),(U.key!=null||re&&U===re.subTree)&&bx($,U,!0)):F($,U,H,le,re,Z,Q,oe,se)},h=($,U,H,q,re,Z,Q,oe,se)=>{U.slotScopeIds=oe,$==null?U.shapeFlag&512?re.ctx.activate(U,H,q,Q,se):L(U,H,q,re,Z,Q,se):E($,U,se)},L=($,U,H,q,re,Z,Q)=>{const oe=$.component=_T($,q,re);if(Ad($)&&(oe.ctx.renderer=ie),wT(oe),oe.asyncDep){if(re&&re.registerDep(oe,S),!$.el){const se=oe.subTree=no(uc);b(null,se,U,H)}return}S(oe,$,U,H,re,Z,Q)},E=($,U,H)=>{const q=U.component=$.component;if(R3($,U,H))if(q.asyncDep&&!q.asyncResolved){P(q,U,H);return}else q.next=U,S3(q.update),q.update();else U.el=$.el,q.vnode=U},S=($,U,H,q,re,Z,Q)=>{const oe=()=>{if($.isMounted){let{next:le,bu:_e,u:fe,parent:me,vnode:xe}=$,ye=le,be;Kf($,!1),le?(le.el=xe.el,P($,le,Q)):le=xe,_e&&g0(_e),(be=le.props&&le.props.onVnodeBeforeUpdate)&&Fc(be,me,le,xe),Kf($,!0);const ke=m0($),De=$.subTree;$.subTree=ke,s(De,ke,i(De.el),j(De),$,re,Z),le.el=ke.el,ye===null&&I3($,ke.el),fe&&Tu(fe,re),(be=le.props&&le.props.onVnodeUpdated)&&Tu(()=>Fc(be,me,le,xe),re)}else{let le;const{el:_e,props:fe}=U,{bm:me,m:xe,parent:ye}=$,be=jv(U);if(Kf($,!1),me&&g0(me),!be&&(le=fe&&fe.onVnodeBeforeMount)&&Fc(le,ye,U),Kf($,!0),_e&&K){const ke=()=>{$.subTree=m0($),K(_e,$.subTree,$,re,null)};be?U.type.__asyncLoader().then(()=>!$.isUnmounted&&ke()):ke()}else{const ke=$.subTree=m0($);s(null,ke,H,q,$,re,Z),U.el=ke.el}if(xe&&Tu(xe,re),!be&&(le=fe&&fe.onVnodeMounted)){const ke=U;Tu(()=>Fc(le,ye,ke),re)}(U.shapeFlag&256||ye&&jv(ye.vnode)&&ye.vnode.shapeFlag&256)&&$.a&&Tu($.a,re),$.isMounted=!0,U=H=q=null}},se=$.effect=new mg(oe,()=>Ag(ae),$.scope),ae=$.update=()=>se.run();ae.id=$.uid,Kf($,!0),ae()},P=($,U,H)=>{U.component=$;const q=$.vnode.props;$.vnode=U,$.next=null,iT($,U.props,q,H),lT($,U.children,H),cv(),py(),fv()},F=($,U,H,q,re,Z,Q,oe,se=!1)=>{const ae=$&&$.children,le=$?$.shapeFlag:0,_e=U.children,{patchFlag:fe,shapeFlag:me}=U;if(fe>0){if(fe&128){D(ae,_e,H,q,re,Z,Q,oe,se);return}else if(fe&256){I(ae,_e,H,q,re,Z,Q,oe,se);return}}me&8?(le&16&&ee(ae,re,Z),_e!==ae&&a(H,_e)):le&16?me&16?D(ae,_e,H,q,re,Z,Q,oe,se):ee(ae,re,Z,!0):(le&8&&a(H,""),me&16&&c(_e,H,q,re,Z,Q,oe,se))},I=($,U,H,q,re,Z,Q,oe,se)=>{$=$||Kh,U=U||Kh;const ae=$.length,le=U.length,_e=Math.min(ae,le);let fe;for(fe=0;fe<_e;fe++){const me=U[fe]=se?Tf(U[fe]):Oc(U[fe]);s($[fe],me,H,null,re,Z,Q,oe,se)}ae>le?ee($,re,Z,!0,!1,_e):c(U,H,q,re,Z,Q,oe,se,_e)},D=($,U,H,q,re,Z,Q,oe,se)=>{let ae=0;const le=U.length;let _e=$.length-1,fe=le-1;for(;ae<=_e&&ae<=fe;){const me=$[ae],xe=U[ae]=se?Tf(U[ae]):Oc(U[ae]);if(eh(me,xe))s(me,xe,H,null,re,Z,Q,oe,se);else break;ae++}for(;ae<=_e&&ae<=fe;){const me=$[_e],xe=U[fe]=se?Tf(U[fe]):Oc(U[fe]);if(eh(me,xe))s(me,xe,H,null,re,Z,Q,oe,se);else break;_e--,fe--}if(ae>_e){if(ae<=fe){const me=fe+1,xe=me<le?U[me].el:q;for(;ae<=fe;)s(null,U[ae]=se?Tf(U[ae]):Oc(U[ae]),H,xe,re,Z,Q,oe,se),ae++}}else if(ae>fe)for(;ae<=_e;)O($[ae],re,Z,!0),ae++;else{const me=ae,xe=ae,ye=new Map;for(ae=xe;ae<=fe;ae++){const We=U[ae]=se?Tf(U[ae]):Oc(U[ae]);We.key!=null&&ye.set(We.key,ae)}let be,ke=0;const De=fe-xe+1;let He=!1,Ae=0;const Le=new Array(De);for(ae=0;ae<De;ae++)Le[ae]=0;for(ae=me;ae<=_e;ae++){const We=$[ae];if(ke>=De){O(We,re,Z,!0);continue}let ze;if(We.key!=null)ze=ye.get(We.key);else for(be=xe;be<=fe;be++)if(Le[be-xe]===0&&eh(We,U[be])){ze=be;break}ze===void 0?O(We,re,Z,!0):(Le[ze-xe]=ae+1,ze>=Ae?Ae=ze:He=!0,s(We,U[ze],H,null,re,Z,Q,oe,se),ke++)}const Ze=He?vT(Le):Kh;for(be=Ze.length-1,ae=De-1;ae>=0;ae--){const We=xe+ae,ze=U[We],Ie=We+1<le?U[We+1].el:q;Le[ae]===0?s(null,ze,H,Ie,re,Z,Q,oe,se):He&&(be<0||ae!==Ze[be]?R(ze,H,Ie,2):be--)}}},R=($,U,H,q,re=null)=>{const{el:Z,type:Q,transition:oe,children:se,shapeFlag:ae}=$;if(ae&6){R($.component.subTree,U,H,q);return}if(ae&128){$.suspense.move(U,H,q);return}if(ae&64){Q.move($,U,H,ie);return}if(Q===iu){N(Z,U,H);for(let _e=0;_e<se.length;_e++)R(se[_e],U,H,q);N($.anchor,U,H);return}if(Q===b0){d($,U,H);return}if(q!==2&&ae&1&&oe)if(q===0)oe.beforeEnter(Z),N(Z,U,H),Tu(()=>oe.enter(Z),re);else{const{leave:_e,delayLeave:fe,afterLeave:me}=oe,xe=()=>N(Z,U,H),ye=()=>{_e(Z,()=>{xe(),me&&me()})};fe?fe(Z,xe,ye):ye()}else N(Z,U,H)},O=($,U,H,q=!1,re=!1)=>{const{type:Z,props:Q,ref:oe,children:se,dynamicChildren:ae,shapeFlag:le,patchFlag:_e,dirs:fe}=$;if(oe!=null&&J0(oe,null,H,$,!0),le&256){U.ctx.deactivate($);return}const me=le&1&&fe,xe=!jv($);let ye;if(xe&&(ye=Q&&Q.onVnodeBeforeUnmount)&&Fc(ye,U,$),le&6)Y($.component,H,q);else{if(le&128){$.suspense.unmount(H,q);return}me&&Zf($,null,U,"beforeUnmount"),le&64?$.type.remove($,U,H,re,ie,q):ae&&(Z!==iu||_e>0&&_e&64)?ee(ae,U,H,!1,!0):(Z===iu&&_e&384||!re&&le&16)&&ee(se,U,H),q&&z($)}(xe&&(ye=Q&&Q.onVnodeUnmounted)||me)&&Tu(()=>{ye&&Fc(ye,U,$),me&&Zf($,null,U,"unmounted")},H)},z=$=>{const{type:U,el:H,anchor:q,transition:re}=$;if(U===iu){G(H,q);return}if(U===b0){f($);return}const Z=()=>{V(H),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if($.shapeFlag&1&&re&&!re.persisted){const{leave:Q,delayLeave:oe}=re,se=()=>Q(H,Z);oe?oe($.el,Z,se):se()}else Z()},G=($,U)=>{let H;for(;$!==U;)H=n($),V($),$=H;V(U)},Y=($,U,H)=>{const{bum:q,scope:re,update:Z,subTree:Q,um:oe}=$;q&&g0(q),re.stop(),Z&&(Z.active=!1,O(Q,$,U,H)),oe&&Tu(oe,U),Tu(()=>{$.isUnmounted=!0},U),U&&U.pendingBranch&&!U.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===U.pendingId&&(U.deps--,U.deps===0&&U.resolve())},ee=($,U,H,q=!1,re=!1,Z=0)=>{for(let Q=Z;Q<$.length;Q++)O($[Q],U,H,q,re)},j=$=>$.shapeFlag&6?j($.component.subTree):$.shapeFlag&128?$.suspense.next():n($.anchor||$.el),X=($,U,H)=>{$==null?U._vnode&&O(U._vnode,null,null,!0):s(U._vnode||null,$,U,null,null,null,H),py(),tx(),U._vnode=$},ie={p:s,um:O,m:R,r:z,mt:L,mc:c,pc:F,pbc:w,n:j,o:ne};let he,K;return ue&&([he,K]=ue(ie)),{render:X,hydrate:he,createApp:cT(X,he)}}function Kf({effect:ne,update:ue},t){ne.allowRecurse=ue.allowRecurse=t}function bx(ne,ue,t=!1){const N=ne.children,V=ue.children;if(Si(N)&&Si(V))for(let m=0;m<N.length;m++){const u=N[m];let A=V[m];A.shapeFlag&1&&!A.dynamicChildren&&((A.patchFlag<=0||A.patchFlag===32)&&(A=V[m]=Tf(V[m]),A.el=u.el),t||bx(u,A)),A.type===Ed&&(A.el=u.el)}}function vT(ne){const ue=ne.slice(),t=[0];let N,V,m,u,A;const T=ne.length;for(N=0;N<T;N++){const e=ne[N];if(e!==0){if(V=t[t.length-1],ne[V]<e){ue[N]=V,t.push(N);continue}for(m=0,u=t.length-1;m<u;)A=m+u>>1,ne[t[A]]<e?m=A+1:u=A;e<ne[t[m]]&&(m>0&&(ue[N]=t[m-1]),t[m]=N)}}for(m=t.length,u=t[m-1];m-- >0;)t[m]=u,u=ue[u];return t}const pT=ne=>ne.__isTeleport,iu=Symbol(void 0),Ed=Symbol(void 0),uc=Symbol(void 0),b0=Symbol(void 0),Kv=[];let Tc=null;function $s(ne=!1){Kv.push(Tc=ne?null:[])}function dT(){Kv.pop(),Tc=Kv[Kv.length-1]||null}let np=1;function Ay(ne){np+=ne}function _x(ne){return ne.dynamicChildren=np>0?Tc||Kh:null,dT(),np>0&&Tc&&Tc.push(ne),ne}function op(ne,ue,t,N,V,m){return _x(sc(ne,ue,t,N,V,m,!0))}function Au(ne,ue,t,N,V){return _x(no(ne,ue,t,N,V,!0))}function cd(ne){return ne?ne.__v_isVNode===!0:!1}function eh(ne,ue){return ne.type===ue.type&&ne.key===ue.key}const Sd="__vInternal",wx=({key:ne})=>ne!=null?ne:null,rd=({ref:ne,ref_key:ue,ref_for:t})=>ne!=null?Js(ne)||Ps(ne)||ji(ne)?{i:Yl,r:ne,k:ue,f:!!t}:ne:null;function sc(ne,ue=null,t=null,N=0,V=null,m=ne===iu?0:1,u=!1,A=!1){const T={__v_isVNode:!0,__v_skip:!0,type:ne,props:ue,key:ue&&wx(ue),ref:ue&&rd(ue),scopeId:ax,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:N,dynamicProps:V,dynamicChildren:null,appContext:null,ctx:Yl};return A?(Cg(T,t),m&128&&ne.normalize(T)):t&&(T.shapeFlag|=Js(t)?8:16),np>0&&!u&&Tc&&(T.patchFlag>0||m&6)&&T.patchFlag!==32&&Tc.push(T),T}const no=gT;function gT(ne,ue=null,t=null,N=0,V=null,m=!1){if((!ne||ne===J3)&&(ne=uc),cd(ne)){const A=Cf(ne,ue,!0);return t&&Cg(A,t),np>0&&!m&&Tc&&(A.shapeFlag&6?Tc[Tc.indexOf(ne)]=A:Tc.push(A)),A.patchFlag|=-2,A}if(ET(ne)&&(ne=ne.__vccOpts),ue){ue=mT(ue);let{class:A,style:T}=ue;A&&!Js(A)&&(ue.class=cg(A)),Jo(T)&&(j1(T)&&!Si(T)&&(T=Sl({},T)),ue.style=ug(T))}const u=Js(ne)?1:F3(ne)?128:pT(ne)?64:Jo(ne)?4:ji(ne)?2:0;return sc(ne,ue,t,N,V,u,m,!0)}function mT(ne){return ne?j1(ne)||Sd in ne?Sl({},ne):ne:null}function Cf(ne,ue,t=!1){const{props:N,ref:V,patchFlag:m,children:u}=ne,A=ue?yT(N||{},ue):N;return{__v_isVNode:!0,__v_skip:!0,type:ne.type,props:A,key:A&&wx(A),ref:ue&&ue.ref?t&&V?Si(V)?V.concat(rd(ue)):[V,rd(ue)]:rd(ue):V,scopeId:ne.scopeId,slotScopeIds:ne.slotScopeIds,children:u,target:ne.target,targetAnchor:ne.targetAnchor,staticCount:ne.staticCount,shapeFlag:ne.shapeFlag,patchFlag:ue&&ne.type!==iu?m===-1?16:m|16:m,dynamicProps:ne.dynamicProps,dynamicChildren:ne.dynamicChildren,appContext:ne.appContext,dirs:ne.dirs,transition:ne.transition,component:ne.component,suspense:ne.suspense,ssContent:ne.ssContent&&Cf(ne.ssContent),ssFallback:ne.ssFallback&&Cf(ne.ssFallback),el:ne.el,anchor:ne.anchor,ctx:ne.ctx}}function Qh(ne=" ",ue=0){return no(Ed,null,ne,ue)}function xf(ne="",ue=!1){return ue?($s(),Au(uc,null,ne)):no(uc,null,ne)}function Oc(ne){return ne==null||typeof ne=="boolean"?no(uc):Si(ne)?no(iu,null,ne.slice()):typeof ne=="object"?Tf(ne):no(Ed,null,String(ne))}function Tf(ne){return ne.el===null&&ne.patchFlag!==-1||ne.memo?ne:Cf(ne)}function Cg(ne,ue){let t=0;const{shapeFlag:N}=ne;if(ue==null)ue=null;else if(Si(ue))t=16;else if(typeof ue=="object")if(N&65){const V=ue.default;V&&(V._c&&(V._d=!1),Cg(ne,V()),V._c&&(V._d=!0));return}else{t=32;const V=ue._;!V&&!(Sd in ue)?ue._ctx=Yl:V===3&&Yl&&(Yl.slots._===1?ue._=1:(ue._=2,ne.patchFlag|=1024))}else ji(ue)?(ue={default:ue,_ctx:Yl},t=32):(ue=String(ue),N&64?(t=16,ue=[Qh(ue)]):t=8);ne.children=ue,ne.shapeFlag|=t}function yT(...ne){const ue={};for(let t=0;t<ne.length;t++){const N=ne[t];for(const V in N)if(V==="class")ue.class!==N.class&&(ue.class=cg([ue.class,N.class]));else if(V==="style")ue.style=ug([ue.style,N.style]);else if(md(V)){const m=ue[V],u=N[V];u&&m!==u&&!(Si(m)&&m.includes(u))&&(ue[V]=m?[].concat(m,u):u)}else V!==""&&(ue[V]=N[V])}return ue}function Fc(ne,ue,t,N=null){lc(ne,ue,7,[t,N])}const xT=xx();let bT=0;function _T(ne,ue,t){const N=ne.type,V=(ue?ue.appContext:ne.appContext)||xT,m={uid:bT++,vnode:ne,type:N,parent:ue,appContext:V,root:null,next:null,subTree:null,effect:null,update:null,scope:new I1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:ue?ue.provides:Object.create(V.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:dx(N,V),emitsOptions:nx(N,V),emit:null,emitted:null,propsDefaults:$o,inheritAttrs:N.inheritAttrs,ctx:$o,data:$o,props:$o,attrs:$o,slots:$o,refs:$o,setupState:$o,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=ue?ue.root:m,m.emit=L3.bind(null,m),ne.ce&&ne.ce(m),m}let El=null;const Tx=()=>El||Yl,rv=ne=>{El=ne,ne.scope.on()},oh=()=>{El&&El.scope.off(),El=null};function Ax(ne){return ne.vnode.shapeFlag&4}let ap=!1;function wT(ne,ue=!1){ap=ue;const{props:t,children:N}=ne.vnode,V=Ax(ne);aT(ne,t,V,ue),sT(ne,N);const m=V?TT(ne,ue):void 0;return ap=!1,m}function TT(ne,ue){const t=ne.type;ne.accessCache=Object.create(null),ne.proxy=tv(new Proxy(ne.ctx,Q3));const{setup:N}=t;if(N){const V=ne.setupContext=N.length>1?MT(ne):null;rv(ne),cv();const m=Sf(N,ne,0,[ne.props,V]);if(fv(),oh(),L1(m)){if(m.then(oh,oh),ue)return m.then(u=>{My(ne,u,ue)}).catch(u=>{wd(u,ne,0)});ne.asyncDep=m}else My(ne,m,ue)}else Mx(ne,ue)}function My(ne,ue,t){ji(ue)?ne.type.__ssrInlineRender?ne.ssrRender=ue:ne.render=ue:Jo(ue)&&(ne.setupState=$1(ue)),Mx(ne,t)}let Ey;function Mx(ne,ue,t){const N=ne.type;if(!ne.render){if(!ue&&Ey&&!N.render){const V=N.template||Sg(ne).template;if(V){const{isCustomElement:m,compilerOptions:u}=ne.appContext.config,{delimiters:A,compilerOptions:T}=N,e=Sl(Sl({isCustomElement:m,delimiters:A},u),T);N.render=Ey(V,e)}}ne.render=N.render||Ac}rv(ne),cv(),q3(ne),fv(),oh()}function AT(ne){return new Proxy(ne.attrs,{get(ue,t){return Yu(ne,"get","$attrs"),ue[t]}})}function MT(ne){const ue=N=>{ne.exposed=N||{}};let t;return{get attrs(){return t||(t=AT(ne))},slots:ne.slots,emit:ne.emit,expose:ue}}function kd(ne){if(ne.exposed)return ne.exposeProxy||(ne.exposeProxy=new Proxy($1(tv(ne.exposed)),{get(ue,t){if(t in ue)return ue[t];if(t in Zv)return Zv[t](ne)},has(ue,t){return t in ue||t in Zv}}))}function ET(ne){return ji(ne)&&"__vccOpts"in ne}const fd=(ne,ue)=>A3(ne,ue,ap);function ST(ne,ue,t){const N=arguments.length;return N===2?Jo(ue)&&!Si(ue)?cd(ue)?no(ne,null,[ue]):no(ne,ue):no(ne,null,ue):(N>3?t=Array.prototype.slice.call(arguments,2):N===3&&cd(t)&&(t=[t]),no(ne,ue,t))}const kT=Symbol(""),CT=()=>Xv(kT),LT="3.2.45",PT="http://www.w3.org/2000/svg",th=typeof document<"u"?document:null,Sy=th&&th.createElement("template"),DT={insert:(ne,ue,t)=>{ue.insertBefore(ne,t||null)},remove:ne=>{const ue=ne.parentNode;ue&&ue.removeChild(ne)},createElement:(ne,ue,t,N)=>{const V=ue?th.createElementNS(PT,ne):th.createElement(ne,t?{is:t}:void 0);return ne==="select"&&N&&N.multiple!=null&&V.setAttribute("multiple",N.multiple),V},createText:ne=>th.createTextNode(ne),createComment:ne=>th.createComment(ne),setText:(ne,ue)=>{ne.nodeValue=ue},setElementText:(ne,ue)=>{ne.textContent=ue},parentNode:ne=>ne.parentNode,nextSibling:ne=>ne.nextSibling,querySelector:ne=>th.querySelector(ne),setScopeId(ne,ue){ne.setAttribute(ue,"")},insertStaticContent(ne,ue,t,N,V,m){const u=t?t.previousSibling:ue.lastChild;if(V&&(V===m||V.nextSibling))for(;ue.insertBefore(V.cloneNode(!0),t),!(V===m||!(V=V.nextSibling)););else{Sy.innerHTML=N?`<svg>${ne}</svg>`:ne;const A=Sy.content;if(N){const T=A.firstChild;for(;T.firstChild;)A.appendChild(T.firstChild);A.removeChild(T)}ue.insertBefore(A,t)}return[u?u.nextSibling:ue.firstChild,t?t.previousSibling:ue.lastChild]}};function RT(ne,ue,t){const N=ne._vtc;N&&(ue=(ue?[ue,...N]:[...N]).join(" ")),ue==null?ne.removeAttribute("class"):t?ne.setAttribute("class",ue):ne.className=ue}function IT(ne,ue,t){const N=ne.style,V=Js(t);if(t&&!V){for(const m in t)Q0(N,m,t[m]);if(ue&&!Js(ue))for(const m in ue)t[m]==null&&Q0(N,m,"")}else{const m=N.display;V?ue!==t&&(N.cssText=t):ue&&ne.removeAttribute("style"),"_vod"in ne&&(N.display=m)}}const ky=/\s*!important$/;function Q0(ne,ue,t){if(Si(t))t.forEach(N=>Q0(ne,ue,N));else if(t==null&&(t=""),ue.startsWith("--"))ne.setProperty(ue,t);else{const N=FT(ne,ue);ky.test(t)?ne.setProperty(ch(N),t.replace(ky,""),"important"):ne[N]=t}}const Cy=["Webkit","Moz","ms"],_0={};function FT(ne,ue){const t=_0[ue];if(t)return t;let N=qh(ue);if(N!=="filter"&&N in ne)return _0[ue]=N;N=R1(N);for(let V=0;V<Cy.length;V++){const m=Cy[V]+N;if(m in ne)return _0[ue]=m}return ue}const Ly="http://www.w3.org/1999/xlink";function zT(ne,ue,t,N,V){if(N&&ue.startsWith("xlink:"))t==null?ne.removeAttributeNS(Ly,ue.slice(6,ue.length)):ne.setAttributeNS(Ly,ue,t);else{const m=Iw(ue);t==null||m&&!S1(t)?ne.removeAttribute(ue):ne.setAttribute(ue,m?"":t)}}function OT(ne,ue,t,N,V,m,u){if(ue==="innerHTML"||ue==="textContent"){N&&u(N,V,m),ne[ue]=t==null?"":t;return}if(ue==="value"&&ne.tagName!=="PROGRESS"&&!ne.tagName.includes("-")){ne._value=t;const T=t==null?"":t;(ne.value!==T||ne.tagName==="OPTION")&&(ne.value=T),t==null&&ne.removeAttribute(ue);return}let A=!1;if(t===""||t==null){const T=typeof ne[ue];T==="boolean"?t=S1(t):t==null&&T==="string"?(t="",A=!0):T==="number"&&(t=0,A=!0)}try{ne[ue]=t}catch{}A&&ne.removeAttribute(ue)}function NT(ne,ue,t,N){ne.addEventListener(ue,t,N)}function BT(ne,ue,t,N){ne.removeEventListener(ue,t,N)}function UT(ne,ue,t,N,V=null){const m=ne._vei||(ne._vei={}),u=m[ue];if(N&&u)u.value=N;else{const[A,T]=VT(ue);if(N){const e=m[ue]=YT(N,V);NT(ne,A,e,T)}else u&&(BT(ne,A,u,T),m[ue]=void 0)}}const Py=/(?:Once|Passive|Capture)$/;function VT(ne){let ue;if(Py.test(ne)){ue={};let N;for(;N=ne.match(Py);)ne=ne.slice(0,ne.length-N[0].length),ue[N[0].toLowerCase()]=!0}return[ne[2]===":"?ne.slice(3):ch(ne.slice(2)),ue]}let w0=0;const HT=Promise.resolve(),GT=()=>w0||(HT.then(()=>w0=0),w0=Date.now());function YT(ne,ue){const t=N=>{if(!N._vts)N._vts=Date.now();else if(N._vts<=t.attached)return;lc(WT(N,t.value),ue,5,[N])};return t.value=ne,t.attached=GT(),t}function WT(ne,ue){if(Si(ue)){const t=ne.stopImmediatePropagation;return ne.stopImmediatePropagation=()=>{t.call(ne),ne._stopped=!0},ue.map(N=>V=>!V._stopped&&N&&N(V))}else return ue}const Dy=/^on[a-z]/,XT=(ne,ue,t,N,V=!1,m,u,A,T)=>{ue==="class"?RT(ne,N,V):ue==="style"?IT(ne,t,N):md(ue)?fg(ue)||UT(ne,ue,t,N,u):(ue[0]==="."?(ue=ue.slice(1),!0):ue[0]==="^"?(ue=ue.slice(1),!1):jT(ne,ue,N,V))?OT(ne,ue,N,m,u,A,T):(ue==="true-value"?ne._trueValue=N:ue==="false-value"&&(ne._falseValue=N),zT(ne,ue,N,V))};function jT(ne,ue,t,N){return N?!!(ue==="innerHTML"||ue==="textContent"||ue in ne&&Dy.test(ue)&&ji(t)):ue==="spellcheck"||ue==="draggable"||ue==="translate"||ue==="form"||ue==="list"&&ne.tagName==="INPUT"||ue==="type"&&ne.tagName==="TEXTAREA"||Dy.test(ue)&&Js(t)?!1:ue in ne}const bf="transition",Bv="animation",hd=(ne,{slots:ue})=>ST(sx,ZT(ne),ue);hd.displayName="Transition";const Ex={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};hd.props=Sl({},sx.props,Ex);const $f=(ne,ue=[])=>{Si(ne)?ne.forEach(t=>t(...ue)):ne&&ne(...ue)},Ry=ne=>ne?Si(ne)?ne.some(ue=>ue.length>1):ne.length>1:!1;function ZT(ne){const ue={};for(const _ in ne)_ in Ex||(ue[_]=ne[_]);if(ne.css===!1)return ue;const{name:t="v",type:N,duration:V,enterFromClass:m=`${t}-enter-from`,enterActiveClass:u=`${t}-enter-active`,enterToClass:A=`${t}-enter-to`,appearFromClass:T=m,appearActiveClass:e=u,appearToClass:a=A,leaveFromClass:i=`${t}-leave-from`,leaveActiveClass:n=`${t}-leave-active`,leaveToClass:r=`${t}-leave-to`}=ne,v=KT(V),s=v&&v[0],o=v&&v[1],{onBeforeEnter:b,onEnter:g,onEnterCancelled:d,onLeave:f,onLeaveCancelled:y,onBeforeAppear:l=b,onAppear:x=g,onAppearCancelled:c=d}=ue,M=(_,h,L)=>{Jf(_,h?a:A),Jf(_,h?e:u),L&&L()},w=(_,h)=>{_._isLeaving=!1,Jf(_,i),Jf(_,r),Jf(_,n),h&&h()},p=_=>(h,L)=>{const E=_?x:g,S=()=>M(h,_,L);$f(E,[h,S]),Iy(()=>{Jf(h,_?T:m),_f(h,_?a:A),Ry(E)||Fy(h,N,s,S)})};return Sl(ue,{onBeforeEnter(_){$f(b,[_]),_f(_,m),_f(_,u)},onBeforeAppear(_){$f(l,[_]),_f(_,T),_f(_,e)},onEnter:p(!1),onAppear:p(!0),onLeave(_,h){_._isLeaving=!0;const L=()=>w(_,h);_f(_,i),QT(),_f(_,n),Iy(()=>{!_._isLeaving||(Jf(_,i),_f(_,r),Ry(f)||Fy(_,N,o,L))}),$f(f,[_,L])},onEnterCancelled(_){M(_,!1),$f(d,[_])},onAppearCancelled(_){M(_,!0),$f(c,[_])},onLeaveCancelled(_){w(_),$f(y,[_])}})}function KT(ne){if(ne==null)return null;if(Jo(ne))return[T0(ne.enter),T0(ne.leave)];{const ue=T0(ne);return[ue,ue]}}function T0(ne){return dg(ne)}function _f(ne,ue){ue.split(/\s+/).forEach(t=>t&&ne.classList.add(t)),(ne._vtc||(ne._vtc=new Set)).add(ue)}function Jf(ne,ue){ue.split(/\s+/).forEach(N=>N&&ne.classList.remove(N));const{_vtc:t}=ne;t&&(t.delete(ue),t.size||(ne._vtc=void 0))}function Iy(ne){requestAnimationFrame(()=>{requestAnimationFrame(ne)})}let $T=0;function Fy(ne,ue,t,N){const V=ne._endId=++$T,m=()=>{V===ne._endId&&N()};if(t)return setTimeout(m,t);const{type:u,timeout:A,propCount:T}=JT(ne,ue);if(!u)return N();const e=u+"end";let a=0;const i=()=>{ne.removeEventListener(e,n),m()},n=r=>{r.target===ne&&++a>=T&&i()};setTimeout(()=>{a<T&&i()},A+1),ne.addEventListener(e,n)}function JT(ne,ue){const t=window.getComputedStyle(ne),N=v=>(t[v]||"").split(", "),V=N(`${bf}Delay`),m=N(`${bf}Duration`),u=zy(V,m),A=N(`${Bv}Delay`),T=N(`${Bv}Duration`),e=zy(A,T);let a=null,i=0,n=0;ue===bf?u>0&&(a=bf,i=u,n=m.length):ue===Bv?e>0&&(a=Bv,i=e,n=T.length):(i=Math.max(u,e),a=i>0?u>e?bf:Bv:null,n=a?a===bf?m.length:T.length:0);const r=a===bf&&/\b(transform|all)(,|$)/.test(N(`${bf}Property`).toString());return{type:a,timeout:i,propCount:n,hasTransform:r}}function zy(ne,ue){for(;ne.length<ue.length;)ne=ne.concat(ne);return Math.max(...ue.map((t,N)=>Oy(t)+Oy(ne[N])))}function Oy(ne){return Number(ne.slice(0,-1).replace(",","."))*1e3}function QT(){return document.body.offsetHeight}const qT=["ctrl","shift","alt","meta"],eA={stop:ne=>ne.stopPropagation(),prevent:ne=>ne.preventDefault(),self:ne=>ne.target!==ne.currentTarget,ctrl:ne=>!ne.ctrlKey,shift:ne=>!ne.shiftKey,alt:ne=>!ne.altKey,meta:ne=>!ne.metaKey,left:ne=>"button"in ne&&ne.button!==0,middle:ne=>"button"in ne&&ne.button!==1,right:ne=>"button"in ne&&ne.button!==2,exact:(ne,ue)=>qT.some(t=>ne[`${t}Key`]&&!ue.includes(t))},Ks=(ne,ue)=>(t,...N)=>{for(let V=0;V<ue.length;V++){const m=eA[ue[V]];if(m&&m(t,ue))return}return ne(t,...N)},tA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zc=(ne,ue)=>t=>{if(!("key"in t))return;const N=ch(t.key);if(ue.some(V=>V===N||tA[V]===N))return ne(t)},Uv={beforeMount(ne,{value:ue},{transition:t}){ne._vod=ne.style.display==="none"?"":ne.style.display,t&&ue?t.beforeEnter(ne):Vv(ne,ue)},mounted(ne,{value:ue},{transition:t}){t&&ue&&t.enter(ne)},updated(ne,{value:ue,oldValue:t},{transition:N}){!ue!=!t&&(N?ue?(N.beforeEnter(ne),Vv(ne,!0),N.enter(ne)):N.leave(ne,()=>{Vv(ne,!1)}):Vv(ne,ue))},beforeUnmount(ne,{value:ue}){Vv(ne,ue)}};function Vv(ne,ue){ne.style.display=ue?ne._vod:"none"}const rA=Sl({patchProp:XT},DT);let Ny;function nA(){return Ny||(Ny=fT(rA))}const aA=(...ne)=>{const ue=nA().createApp(...ne),{mount:t}=ue;return ue.mount=N=>{const V=iA(N);if(!V)return;const m=ue._component;!ji(m)&&!m.render&&!m.template&&(m.template=V.innerHTML),V.innerHTML="";const u=t(V,!1,V instanceof SVGElement);return V instanceof Element&&(V.removeAttribute("v-cloak"),V.setAttribute("data-v-app","")),u},ue};function iA(ne){return Js(ne)?document.querySelector(ne):ne}var oA=!1;/*!
  * pinia v2.0.25
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let Sx;const Cd=ne=>Sx=ne,kx=Symbol();function q0(ne){return ne&&typeof ne=="object"&&Object.prototype.toString.call(ne)==="[object Object]"&&typeof ne.toJSON!="function"}var $v;(function(ne){ne.direct="direct",ne.patchObject="patch object",ne.patchFunction="patch function"})($v||($v={}));function sA(){const ne=F1(!0),ue=ne.run(()=>Kc({}));let t=[],N=[];const V=tv({install(m){Cd(V),V._a=m,m.provide(kx,V),m.config.globalProperties.$pinia=V,N.forEach(u=>t.push(u)),N=[]},use(m){return!this._a&&!oA?N.push(m):t.push(m),this},_p:t,_a:null,_e:ne,_s:new Map,state:ue});return V}const Cx=()=>{};function By(ne,ue,t,N=Cx){ne.push(ue);const V=()=>{const m=ne.indexOf(ue);m>-1&&(ne.splice(m,1),N())};return!t&&Gw()&&Yw(V),V}function Uh(ne,...ue){ne.slice().forEach(t=>{t(...ue)})}function eg(ne,ue){ne instanceof Map&&ue instanceof Map&&ue.forEach((t,N)=>ne.set(N,t)),ne instanceof Set&&ue instanceof Set&&ue.forEach(ne.add,ne);for(const t in ue){if(!ue.hasOwnProperty(t))continue;const N=ue[t],V=ne[t];q0(V)&&q0(N)&&ne.hasOwnProperty(t)&&!Ps(N)&&!Ef(N)?ne[t]=eg(V,N):ne[t]=N}return ne}const lA=Symbol();function uA(ne){return!q0(ne)||!ne.hasOwnProperty(lA)}const{assign:Af}=Object;function cA(ne){return!!(Ps(ne)&&ne.effect)}function fA(ne,ue,t,N){const{state:V,actions:m,getters:u}=ue,A=t.state.value[ne];let T;function e(){A||(t.state.value[ne]=V?V():{});const a=b3(t.state.value[ne]);return Af(a,m,Object.keys(u||{}).reduce((i,n)=>(i[n]=tv(fd(()=>{Cd(t);const r=t._s.get(ne);return u[n].call(r,r)})),i),{}))}return T=Lx(ne,e,ue,t,N,!0),T.$reset=function(){const i=V?V():{};this.$patch(n=>{Af(n,i)})},T}function Lx(ne,ue,t={},N,V,m){let u;const A=Af({actions:{}},t),T={deep:!0};let e,a,i=tv([]),n=tv([]),r;const v=N.state.value[ne];!m&&!v&&(N.state.value[ne]={}),Kc({});let s;function o(x){let c;e=a=!1,typeof x=="function"?(x(N.state.value[ne]),c={type:$v.patchFunction,storeId:ne,events:r}):(eg(N.state.value[ne],x),c={type:$v.patchObject,payload:x,storeId:ne,events:r});const M=s=Symbol();q1().then(()=>{s===M&&(e=!0)}),a=!0,Uh(i,c,N.state.value[ne])}const b=Cx;function g(){u.stop(),i=[],n=[],N._s.delete(ne)}function d(x,c){return function(){Cd(N);const M=Array.from(arguments),w=[],p=[];function _(E){w.push(E)}function h(E){p.push(E)}Uh(n,{args:M,name:x,store:y,after:_,onError:h});let L;try{L=c.apply(this&&this.$id===ne?this:y,M)}catch(E){throw Uh(p,E),E}return L instanceof Promise?L.then(E=>(Uh(w,E),E)).catch(E=>(Uh(p,E),Promise.reject(E))):(Uh(w,L),L)}}const f={_p:N,$id:ne,$onAction:By.bind(null,n),$patch:o,$reset:b,$subscribe(x,c={}){const M=By(i,x,c.detached,()=>w()),w=u.run(()=>td(()=>N.state.value[ne],p=>{(c.flush==="sync"?a:e)&&x({storeId:ne,type:$v.direct,events:r},p)},Af({},T,c)));return M},$dispose:g},y=_d(f);N._s.set(ne,y);const l=N._e.run(()=>(u=F1(),u.run(()=>ue())));for(const x in l){const c=l[x];if(Ps(c)&&!cA(c)||Ef(c))m||(v&&uA(c)&&(Ps(c)?c.value=v[x]:eg(c,v[x])),N.state.value[ne][x]=c);else if(typeof c=="function"){const M=d(x,c);l[x]=M,A.actions[x]=c}}return Af(y,l),Af(bo(y),l),Object.defineProperty(y,"$state",{get:()=>N.state.value[ne],set:x=>{o(c=>{Af(c,x)})}}),N._p.forEach(x=>{Af(y,u.run(()=>x({store:y,app:N._a,pinia:N,options:A})))}),v&&m&&t.hydrate&&t.hydrate(y.$state,v),e=!0,a=!0,y}function hA(ne,ue,t){let N,V;const m=typeof ue=="function";typeof ne=="string"?(N=ne,V=m?t:ue):(V=ne,N=ne.id);function u(A,T){const e=Tx();return A=A||e&&Xv(kx),A&&Cd(A),A=Sx,A._s.has(N)||(m?Lx(N,ue,V,A):fA(N,V,A)),A._s.get(N)}return u.$id=N,u}var Vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vA(ne){return ne&&ne.__esModule&&Object.prototype.hasOwnProperty.call(ne,"default")?ne.default:ne}function pA(ne){var ue=ne.default;if(typeof ue=="function"){var t=function(){return ue.apply(this,arguments)};t.prototype=ue.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(ne).forEach(function(N){var V=Object.getOwnPropertyDescriptor(ne,N);Object.defineProperty(t,N,V.get?V:{enumerable:!0,get:function(){return ne[N]}})}),t}function Xp(ne){throw new Error('Could not dynamically require "'+ne+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Px={exports:{}};(function(ne,ue){(function(t){ne.exports=t()})(function(){return function(){function t(N,V,m){function u(e,a){if(!V[e]){if(!N[e]){var i=typeof Xp=="function"&&Xp;if(!a&&i)return i(e,!0);if(A)return A(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=V[e]={exports:{}};N[e][0].call(r.exports,function(v){var s=N[e][1][v];return u(s||v)},r,r.exports,t,N,V,m)}return V[e].exports}for(var A=typeof Xp=="function"&&Xp,T=0;T<m.length;T++)u(m[T]);return u}return t}()({1:[function(t,N,V){var m=t("../src/lib"),u={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var A in u){var T=A.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");m.addStyleRule(T,u[A])}},{"../src/lib":515}],2:[function(t,N,V){N.exports=t("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(t,N,V){N.exports=t("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(t,N,V){N.exports=t("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(t,N,V){N.exports=t("../src/traces/box")},{"../src/traces/box":688}],6:[function(t,N,V){N.exports=t("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(t,N,V){N.exports=t("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(t,N,V){N.exports=t("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(t,N,V){N.exports=t("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(t,N,V){N.exports=t("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(t,N,V){N.exports=t("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(t,N,V){N.exports=t("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(t,N,V){N.exports=t("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(t,N,V){N.exports=t("../src/core")},{"../src/core":493}],15:[function(t,N,V){N.exports=t("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(t,N,V){N.exports=t("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(t,N,V){N.exports=t("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(t,N,V){N.exports=t("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(t,N,V){N.exports=t("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(t,N,V){N.exports=t("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(t,N,V){N.exports=t("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(t,N,V){N.exports=t("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(t,N,V){N.exports=t("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(t,N,V){N.exports=t("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(t,N,V){N.exports=t("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(t,N,V){N.exports=t("../src/traces/image")},{"../src/traces/image":861}],27:[function(t,N,V){var m=t("./core");m.register([t("./bar"),t("./box"),t("./heatmap"),t("./histogram"),t("./histogram2d"),t("./histogram2dcontour"),t("./contour"),t("./scatterternary"),t("./violin"),t("./funnel"),t("./waterfall"),t("./image"),t("./pie"),t("./sunburst"),t("./treemap"),t("./icicle"),t("./funnelarea"),t("./scatter3d"),t("./surface"),t("./isosurface"),t("./volume"),t("./mesh3d"),t("./cone"),t("./streamtube"),t("./scattergeo"),t("./choropleth"),t("./scattergl"),t("./splom"),t("./pointcloud"),t("./heatmapgl"),t("./parcoords"),t("./parcats"),t("./scattermapbox"),t("./choroplethmapbox"),t("./densitymapbox"),t("./sankey"),t("./indicator"),t("./table"),t("./carpet"),t("./scattercarpet"),t("./contourcarpet"),t("./ohlc"),t("./candlestick"),t("./scatterpolar"),t("./scatterpolargl"),t("./barpolar"),t("./scattersmith"),t("./aggregate"),t("./filter"),t("./groupby"),t("./sort"),t("./calendars")]),N.exports=m},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(t,N,V){N.exports=t("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(t,N,V){N.exports=t("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(t,N,V){N.exports=t("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(t,N,V){N.exports=t("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(t,N,V){N.exports=t("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(t,N,V){N.exports=t("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(t,N,V){N.exports=t("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(t,N,V){N.exports=t("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(t,N,V){N.exports=t("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(t,N,V){N.exports=t("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(t,N,V){N.exports=t("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(t,N,V){N.exports=t("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(t,N,V){N.exports=t("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(t,N,V){N.exports=t("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(t,N,V){N.exports=t("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(t,N,V){N.exports=t("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(t,N,V){N.exports=t("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(t,N,V){N.exports=t("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(t,N,V){N.exports=t("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(t,N,V){N.exports=t("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(t,N,V){N.exports=t("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(t,N,V){N.exports=t("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(t,N,V){N.exports=t("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(t,N,V){N.exports=t("../src/traces/table")},{"../src/traces/table":1082}],52:[function(t,N,V){N.exports=t("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(t,N,V){N.exports=t("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(t,N,V){N.exports=t("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(t,N,V){N.exports=t("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V,t("d3-array"),t("d3-collection"),t("d3-shape"),t("elementary-circuits-directed-graph")):u(m.d3=m.d3||{},m.d3,m.d3,m.d3,null)})(this,function(m,u,A,T,e){e=e&&e.hasOwnProperty("default")?e.default:e;function a(fe){return fe.target.depth}function i(fe){return fe.depth}function n(fe,me){return me-1-fe.height}function r(fe,me){return fe.sourceLinks.length?fe.depth:me-1}function v(fe){return fe.targetLinks.length?fe.depth:fe.sourceLinks.length?u.min(fe.sourceLinks,a)-1:0}function s(fe){return function(){return fe}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe};function b(fe,me){return d(fe.source,me.source)||fe.index-me.index}function g(fe,me){return d(fe.target,me.target)||fe.index-me.index}function d(fe,me){return fe.partOfCycle===me.partOfCycle?fe.y0-me.y0:fe.circularLinkType==="top"||me.circularLinkType==="bottom"?-1:1}function f(fe){return fe.value}function y(fe){return(fe.y0+fe.y1)/2}function l(fe){return y(fe.source)}function x(fe){return y(fe.target)}function c(fe){return fe.index}function M(fe){return fe.nodes}function w(fe){return fe.links}function p(fe,me){var xe=fe.get(me);if(!xe)throw new Error("missing: "+me);return xe}function _(fe,me){return me(fe)}var h=25,L=10,E=.3;function S(){var fe=0,me=0,xe=1,ye=1,be=24,ke,De=c,He=r,Ae=M,Le=w,Ze=32,We=2,ze,Ie=null;function Ve(){var Lt={nodes:Ae.apply(null,arguments),links:Le.apply(null,arguments)};dt(Lt),P(Lt,De,Ie),Ft(Lt),Ct(Lt),F(Lt,De),jt(Lt,Ze,De),Nt(Lt);for(var Xe=4,it=0;it<Xe;it++)Q(Lt,ye,De),oe(Lt,ye,De),q(Lt,me,ye,De),Q(Lt,ye,De),oe(Lt,ye,De);return _e(Lt,me,ye),G(Lt,We,ye,De),Lt}Ve.nodeId=function(Lt){return arguments.length?(De=typeof Lt=="function"?Lt:s(Lt),Ve):De},Ve.nodeAlign=function(Lt){return arguments.length?(He=typeof Lt=="function"?Lt:s(Lt),Ve):He},Ve.nodeWidth=function(Lt){return arguments.length?(be=+Lt,Ve):be},Ve.nodePadding=function(Lt){return arguments.length?(ke=+Lt,Ve):ke},Ve.nodes=function(Lt){return arguments.length?(Ae=typeof Lt=="function"?Lt:s(Lt),Ve):Ae},Ve.links=function(Lt){return arguments.length?(Le=typeof Lt=="function"?Lt:s(Lt),Ve):Le},Ve.size=function(Lt){return arguments.length?(fe=me=0,xe=+Lt[0],ye=+Lt[1],Ve):[xe-fe,ye-me]},Ve.extent=function(Lt){return arguments.length?(fe=+Lt[0][0],xe=+Lt[1][0],me=+Lt[0][1],ye=+Lt[1][1],Ve):[[fe,me],[xe,ye]]},Ve.iterations=function(Lt){return arguments.length?(Ze=+Lt,Ve):Ze},Ve.circularLinkGap=function(Lt){return arguments.length?(We=+Lt,Ve):We},Ve.nodePaddingRatio=function(Lt){return arguments.length?(ze=+Lt,Ve):ze},Ve.sortNodes=function(Lt){return arguments.length?(Ie=Lt,Ve):Ie},Ve.update=function(Lt){return F(Lt,De),Nt(Lt),Lt.links.forEach(function(Xe){Xe.circular&&(Xe.circularLinkType=Xe.y0+Xe.y1<ye?"top":"bottom",Xe.source.circularLinkType=Xe.circularLinkType,Xe.target.circularLinkType=Xe.circularLinkType)}),Q(Lt,ye,De,!1),oe(Lt,ye,De),G(Lt,We,ye,De),Lt};function dt(Lt){Lt.nodes.forEach(function(it,Ye){it.index=Ye,it.sourceLinks=[],it.targetLinks=[]});var Xe=A.map(Lt.nodes,De);return Lt.links.forEach(function(it,Ye){it.index=Ye;var Ee=it.source,Ge=it.target;(typeof Ee>"u"?"undefined":o(Ee))!=="object"&&(Ee=it.source=p(Xe,Ee)),(typeof Ge>"u"?"undefined":o(Ge))!=="object"&&(Ge=it.target=p(Xe,Ge)),Ee.sourceLinks.push(it),Ge.targetLinks.push(it)}),Lt}function Ft(Lt){Lt.nodes.forEach(function(Xe){Xe.partOfCycle=!1,Xe.value=Math.max(u.sum(Xe.sourceLinks,f),u.sum(Xe.targetLinks,f)),Xe.sourceLinks.forEach(function(it){it.circular&&(Xe.partOfCycle=!0,Xe.circularLinkType=it.circularLinkType)}),Xe.targetLinks.forEach(function(it){it.circular&&(Xe.partOfCycle=!0,Xe.circularLinkType=it.circularLinkType)})})}function Qt(Lt){var Xe=0,it=0,Ye=0,Ee=0,Ge=u.max(Lt.nodes,function(Ke){return Ke.column});return Lt.links.forEach(function(Ke){Ke.circular&&(Ke.circularLinkType=="top"?Xe=Xe+Ke.width:it=it+Ke.width,Ke.target.column==0&&(Ee=Ee+Ke.width),Ke.source.column==Ge&&(Ye=Ye+Ke.width))}),Xe=Xe>0?Xe+h+L:Xe,it=it>0?it+h+L:it,Ye=Ye>0?Ye+h+L:Ye,Ee=Ee>0?Ee+h+L:Ee,{top:Xe,bottom:it,left:Ee,right:Ye}}function Ot(Lt,Xe){var it=u.max(Lt.nodes,function(yt){return yt.column}),Ye=xe-fe,Ee=ye-me,Ge=Ye+Xe.right+Xe.left,Ke=Ee+Xe.top+Xe.bottom,qe=Ye/Ge,At=Ee/Ke;return fe=fe*qe+Xe.left,xe=Xe.right==0?xe:xe*qe,me=me*At+Xe.top,ye=ye*At,Lt.nodes.forEach(function(yt){yt.x0=fe+yt.column*((xe-fe-be)/it),yt.x1=yt.x0+be}),At}function Ct(Lt){var Xe,it,Ye;for(Xe=Lt.nodes,it=[],Ye=0;Xe.length;++Ye,Xe=it,it=[])Xe.forEach(function(Ee){Ee.depth=Ye,Ee.sourceLinks.forEach(function(Ge){it.indexOf(Ge.target)<0&&!Ge.circular&&it.push(Ge.target)})});for(Xe=Lt.nodes,it=[],Ye=0;Xe.length;++Ye,Xe=it,it=[])Xe.forEach(function(Ee){Ee.height=Ye,Ee.targetLinks.forEach(function(Ge){it.indexOf(Ge.source)<0&&!Ge.circular&&it.push(Ge.source)})});Lt.nodes.forEach(function(Ee){Ee.column=Math.floor(He.call(null,Ee,Ye))})}function jt(Lt,Xe,it){var Ye=A.nest().key(function(yt){return yt.column}).sortKeys(u.ascending).entries(Lt.nodes).map(function(yt){return yt.values});Ke(it),At();for(var Ee=1,Ge=Xe;Ge>0;--Ge)qe(Ee*=.99,it),At();function Ke(yt){if(ze){var Mt=1/0;Ye.forEach(function(Zt){var Wt=ye*ze/(Zt.length+1);Mt=Wt<Mt?Wt:Mt}),ke=Mt}var Gt=u.min(Ye,function(Zt){return(ye-me-(Zt.length-1)*ke)/u.sum(Zt,f)});Gt=Gt*E,Lt.links.forEach(function(Zt){Zt.width=Zt.value*Gt});var zt=Qt(Lt),Ht=Ot(Lt,zt);Gt=Gt*Ht,Lt.links.forEach(function(Zt){Zt.width=Zt.value*Gt}),Ye.forEach(function(Zt){var Wt=Zt.length;Zt.forEach(function(sr,Gr){sr.depth==Ye.length-1&&Wt==1||sr.depth==0&&Wt==1?(sr.y0=ye/2-sr.value*Gt,sr.y1=sr.y0+sr.value*Gt):sr.partOfCycle?R(sr,yt)==0?(sr.y0=ye/2+Gr,sr.y1=sr.y0+sr.value*Gt):sr.circularLinkType=="top"?(sr.y0=me+Gr,sr.y1=sr.y0+sr.value*Gt):(sr.y0=ye-sr.value*Gt-Gr,sr.y1=sr.y0+sr.value*Gt):zt.top==0||zt.bottom==0?(sr.y0=(ye-me)/Wt*Gr,sr.y1=sr.y0+sr.value*Gt):(sr.y0=(ye-me)/2-Wt/2+Gr,sr.y1=sr.y0+sr.value*Gt)})})}function qe(yt,Mt){var Gt=Ye.length;Ye.forEach(function(zt){var Ht=zt.length,Zt=zt[0].depth;zt.forEach(function(Wt){var sr;if((Wt.sourceLinks.length||Wt.targetLinks.length)&&!(Wt.partOfCycle&&R(Wt,Mt)>0))if(Zt==0&&Ht==1)sr=Wt.y1-Wt.y0,Wt.y0=ye/2-sr/2,Wt.y1=ye/2+sr/2;else if(Zt==Gt-1&&Ht==1)sr=Wt.y1-Wt.y0,Wt.y0=ye/2-sr/2,Wt.y1=ye/2+sr/2;else{var Gr=0,cn=u.mean(Wt.sourceLinks,x),qr=u.mean(Wt.targetLinks,l);cn&&qr?Gr=(cn+qr)/2:Gr=cn||qr;var st=(Gr-y(Wt))*yt;Wt.y0+=st,Wt.y1+=st}})})}function At(){Ye.forEach(function(yt){var Mt,Gt,zt=me,Ht=yt.length,Zt;for(yt.sort(d),Zt=0;Zt<Ht;++Zt)Mt=yt[Zt],Gt=zt-Mt.y0,Gt>0&&(Mt.y0+=Gt,Mt.y1+=Gt),zt=Mt.y1+ke;if(Gt=zt-ke-ye,Gt>0)for(zt=Mt.y0-=Gt,Mt.y1-=Gt,Zt=Ht-2;Zt>=0;--Zt)Mt=yt[Zt],Gt=Mt.y1+ke-zt,Gt>0&&(Mt.y0-=Gt,Mt.y1-=Gt),zt=Mt.y0})}}function Nt(Lt){Lt.nodes.forEach(function(Xe){Xe.sourceLinks.sort(g),Xe.targetLinks.sort(b)}),Lt.nodes.forEach(function(Xe){var it=Xe.y0,Ye=it,Ee=Xe.y1,Ge=Ee;Xe.sourceLinks.forEach(function(Ke){Ke.circular?(Ke.y0=Ee-Ke.width/2,Ee=Ee-Ke.width):(Ke.y0=it+Ke.width/2,it+=Ke.width)}),Xe.targetLinks.forEach(function(Ke){Ke.circular?(Ke.y1=Ge-Ke.width/2,Ge=Ge-Ke.width):(Ke.y1=Ye+Ke.width/2,Ye+=Ke.width)})})}return Ve}function P(fe,me,xe){var ye=0;if(xe===null){for(var be=[],ke=0;ke<fe.links.length;ke++){var De=fe.links[ke],He=De.source.index,Ae=De.target.index;be[He]||(be[He]=[]),be[Ae]||(be[Ae]=[]),be[He].indexOf(Ae)===-1&&be[He].push(Ae)}var Le=e(be);Le.sort(function(Ie,Ve){return Ie.length-Ve.length});var Ze={};for(ke=0;ke<Le.length;ke++){var We=Le[ke],ze=We.slice(-2);Ze[ze[0]]||(Ze[ze[0]]={}),Ze[ze[0]][ze[1]]=!0}fe.links.forEach(function(Ie){var Ve=Ie.target.index,dt=Ie.source.index;Ve===dt||Ze[dt]&&Ze[dt][Ve]?(Ie.circular=!0,Ie.circularLinkID=ye,ye=ye+1):Ie.circular=!1})}else fe.links.forEach(function(Ie){Ie.source[xe]<Ie.target[xe]?Ie.circular=!1:(Ie.circular=!0,Ie.circularLinkID=ye,ye=ye+1)})}function F(fe,me){var xe=0,ye=0;fe.links.forEach(function(be){be.circular&&(be.source.circularLinkType||be.target.circularLinkType?be.circularLinkType=be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:be.circularLinkType=xe<ye?"top":"bottom",be.circularLinkType=="top"?xe=xe+1:ye=ye+1,fe.nodes.forEach(function(ke){(_(ke,me)==_(be.source,me)||_(ke,me)==_(be.target,me))&&(ke.circularLinkType=be.circularLinkType)}))}),fe.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),le(be,me)&&(be.circularLinkType=be.source.circularLinkType))})}function I(fe){var me=Math.abs(fe.y1-fe.y0),xe=Math.abs(fe.target.x0-fe.source.x1);return Math.atan(xe/me)}function D(fe,me){return fe.source.column<me.target.column?!1:!(fe.target.column>me.source.column)}function R(fe,me){var xe=0;fe.sourceLinks.forEach(function(be){xe=be.circular&&!le(be,me)?xe+1:xe});var ye=0;return fe.targetLinks.forEach(function(be){ye=be.circular&&!le(be,me)?ye+1:ye}),xe+ye}function O(fe){var me=fe.source.sourceLinks,xe=0;me.forEach(function(ke){xe=ke.circular?xe+1:xe});var ye=fe.target.targetLinks,be=0;return ye.forEach(function(ke){be=ke.circular?be+1:be}),!(xe>1||be>1)}function z(fe,me,xe){return fe.sort(ee),fe.forEach(function(ye,be){var ke=0;if(le(ye,xe)&&O(ye))ye.circularPathData.verticalBuffer=ke+ye.width/2;else{var De=0;for(De;De<be;De++)if(D(fe[be],fe[De])){var He=fe[De].circularPathData.verticalBuffer+fe[De].width/2+me;ke=He>ke?He:ke}ye.circularPathData.verticalBuffer=ke+ye.width/2}}),fe}function G(fe,me,xe,ye){var be=5,ke=u.min(fe.links,function(Ae){return Ae.source.y0});fe.links.forEach(function(Ae){Ae.circular&&(Ae.circularPathData={})});var De=fe.links.filter(function(Ae){return Ae.circularLinkType=="top"});z(De,me,ye);var He=fe.links.filter(function(Ae){return Ae.circularLinkType=="bottom"});z(He,me,ye),fe.links.forEach(function(Ae){if(Ae.circular){if(Ae.circularPathData.arcRadius=Ae.width+L,Ae.circularPathData.leftNodeBuffer=be,Ae.circularPathData.rightNodeBuffer=be,Ae.circularPathData.sourceWidth=Ae.source.x1-Ae.source.x0,Ae.circularPathData.sourceX=Ae.source.x0+Ae.circularPathData.sourceWidth,Ae.circularPathData.targetX=Ae.target.x0,Ae.circularPathData.sourceY=Ae.y0,Ae.circularPathData.targetY=Ae.y1,le(Ae,ye)&&O(Ae))Ae.circularPathData.leftSmallArcRadius=L+Ae.width/2,Ae.circularPathData.leftLargeArcRadius=L+Ae.width/2,Ae.circularPathData.rightSmallArcRadius=L+Ae.width/2,Ae.circularPathData.rightLargeArcRadius=L+Ae.width/2,Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Ae.source.y1+h+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ae.source.y0-h-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius);else{var Le=Ae.source.column,Ze=Ae.circularLinkType,We=fe.links.filter(function(Ve){return Ve.source.column==Le&&Ve.circularLinkType==Ze});Ae.circularLinkType=="bottom"?We.sort(X):We.sort(j);var ze=0;We.forEach(function(Ve,dt){Ve.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.leftSmallArcRadius=L+Ae.width/2+ze,Ae.circularPathData.leftLargeArcRadius=L+Ae.width/2+dt*me+ze),ze=ze+Ve.width}),Le=Ae.target.column,We=fe.links.filter(function(Ve){return Ve.target.column==Le&&Ve.circularLinkType==Ze}),Ae.circularLinkType=="bottom"?We.sort(he):We.sort(ie),ze=0,We.forEach(function(Ve,dt){Ve.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.rightSmallArcRadius=L+Ae.width/2+ze,Ae.circularPathData.rightLargeArcRadius=L+Ae.width/2+dt*me+ze),ze=ze+Ve.width}),Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Math.max(xe,Ae.source.y1,Ae.target.y1)+h+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=ke-h-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius)}Ae.circularPathData.leftInnerExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightInnerExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightNodeBuffer,Ae.circularPathData.leftFullExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftLargeArcRadius+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightFullExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightLargeArcRadius-Ae.circularPathData.rightNodeBuffer}if(Ae.circular)Ae.path=Y(Ae);else{var Ie=T.linkHorizontal().source(function(Ve){var dt=Ve.source.x0+(Ve.source.x1-Ve.source.x0),Ft=Ve.y0;return[dt,Ft]}).target(function(Ve){var dt=Ve.target.x0,Ft=Ve.y1;return[dt,Ft]});Ae.path=Ie(Ae)}})}function Y(fe){var me="";return fe.circularLinkType=="top"?me="M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 0 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY-fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 0 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 0 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY-fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 0 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY:me="M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 1 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY+fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 1 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 1 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY+fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 1 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY,me}function ee(fe,me){return K(fe)==K(me)?fe.circularLinkType=="bottom"?X(fe,me):j(fe,me):K(me)-K(fe)}function j(fe,me){return fe.y0-me.y0}function X(fe,me){return me.y0-fe.y0}function ie(fe,me){return fe.y1-me.y1}function he(fe,me){return me.y1-fe.y1}function K(fe){return fe.target.column-fe.source.column}function $(fe){return fe.target.x0-fe.source.x1}function U(fe,me){var xe=I(fe),ye=$(me)/Math.tan(xe),be=ae(fe)=="up"?fe.y1+ye:fe.y1-ye;return be}function H(fe,me){var xe=I(fe),ye=$(me)/Math.tan(xe),be=ae(fe)=="up"?fe.y1-ye:fe.y1+ye;return be}function q(fe,me,xe,ye){fe.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var ke=be.source.column+1,De=be.target.column-1,He=1,Ae=De-ke+1;for(He=1;ke<=De;ke++,He++)fe.nodes.forEach(function(Le){if(Le.column==ke){var Ze=He/(Ae+1),We=Math.pow(1-Ze,3),ze=3*Ze*Math.pow(1-Ze,2),Ie=3*Math.pow(Ze,2)*(1-Ze),Ve=Math.pow(Ze,3),dt=We*be.y0+ze*be.y0+Ie*be.y1+Ve*be.y1,Ft=dt-be.width/2,Qt=dt+be.width/2,Ot;Ft>Le.y0&&Ft<Le.y1?(Ot=Le.y1-Ft+10,Ot=Le.circularLinkType=="bottom"?Ot:-Ot,Le=Z(Le,Ot,me,xe),fe.nodes.forEach(function(Ct){_(Ct,ye)==_(Le,ye)||Ct.column!=Le.column||re(Le,Ct)&&Z(Ct,Ot,me,xe)})):Qt>Le.y0&&Qt<Le.y1?(Ot=Qt-Le.y0+10,Le=Z(Le,Ot,me,xe),fe.nodes.forEach(function(Ct){_(Ct,ye)==_(Le,ye)||Ct.column!=Le.column||Ct.y0<Le.y1&&Ct.y1>Le.y1&&Z(Ct,Ot,me,xe)})):Ft<Le.y0&&Qt>Le.y1&&(Ot=Qt-Le.y0+10,Le=Z(Le,Ot,me,xe),fe.nodes.forEach(function(Ct){_(Ct,ye)==_(Le,ye)||Ct.column!=Le.column||Ct.y0<Le.y1&&Ct.y1>Le.y1&&Z(Ct,Ot,me,xe)}))}})}})}function re(fe,me){return fe.y0>me.y0&&fe.y0<me.y1||fe.y1>me.y0&&fe.y1<me.y1?!0:fe.y0<me.y0&&fe.y1>me.y1}function Z(fe,me,xe,ye){return fe.y0+me>=xe&&fe.y1+me<=ye&&(fe.y0=fe.y0+me,fe.y1=fe.y1+me,fe.targetLinks.forEach(function(be){be.y1=be.y1+me}),fe.sourceLinks.forEach(function(be){be.y0=be.y0+me})),fe}function Q(fe,me,xe,ye){fe.nodes.forEach(function(be){ye&&be.y+(be.y1-be.y0)>me&&(be.y=be.y-(be.y+(be.y1-be.y0)-me));var ke=fe.links.filter(function(Ae){return _(Ae.source,xe)==_(be,xe)}),De=ke.length;De>1&&ke.sort(function(Ae,Le){if(!Ae.circular&&!Le.circular){if(Ae.target.column==Le.target.column)return Ae.y1-Le.y1;if(se(Ae,Le)){if(Ae.target.column>Le.target.column){var Ze=H(Le,Ae);return Ae.y1-Ze}if(Le.target.column>Ae.target.column){var We=H(Ae,Le);return We-Le.y1}}else return Ae.y1-Le.y1}if(Ae.circular&&!Le.circular)return Ae.circularLinkType=="top"?-1:1;if(Le.circular&&!Ae.circular)return Le.circularLinkType=="top"?1:-1;if(Ae.circular&&Le.circular)return Ae.circularLinkType===Le.circularLinkType&&Ae.circularLinkType=="top"?Ae.target.column===Le.target.column?Ae.target.y1-Le.target.y1:Le.target.column-Ae.target.column:Ae.circularLinkType===Le.circularLinkType&&Ae.circularLinkType=="bottom"?Ae.target.column===Le.target.column?Le.target.y1-Ae.target.y1:Ae.target.column-Le.target.column:Ae.circularLinkType=="top"?-1:1});var He=be.y0;ke.forEach(function(Ae){Ae.y0=He+Ae.width/2,He=He+Ae.width}),ke.forEach(function(Ae,Le){if(Ae.circularLinkType=="bottom"){var Ze=Le+1,We=0;for(Ze;Ze<De;Ze++)We=We+ke[Ze].width;Ae.y0=be.y1-We-Ae.width/2}})})}function oe(fe,me,xe){fe.nodes.forEach(function(ye){var be=fe.links.filter(function(He){return _(He.target,xe)==_(ye,xe)}),ke=be.length;ke>1&&be.sort(function(He,Ae){if(!He.circular&&!Ae.circular){if(He.source.column==Ae.source.column)return He.y0-Ae.y0;if(se(He,Ae)){if(Ae.source.column<He.source.column){var Le=U(Ae,He);return He.y0-Le}if(He.source.column<Ae.source.column){var Ze=U(He,Ae);return Ze-Ae.y0}}else return He.y0-Ae.y0}if(He.circular&&!Ae.circular)return He.circularLinkType=="top"?-1:1;if(Ae.circular&&!He.circular)return Ae.circularLinkType=="top"?1:-1;if(He.circular&&Ae.circular)return He.circularLinkType===Ae.circularLinkType&&He.circularLinkType=="top"?He.source.column===Ae.source.column?He.source.y1-Ae.source.y1:He.source.column-Ae.source.column:He.circularLinkType===Ae.circularLinkType&&He.circularLinkType=="bottom"?He.source.column===Ae.source.column?He.source.y1-Ae.source.y1:Ae.source.column-He.source.column:He.circularLinkType=="top"?-1:1});var De=ye.y0;be.forEach(function(He){He.y1=De+He.width/2,De=De+He.width}),be.forEach(function(He,Ae){if(He.circularLinkType=="bottom"){var Le=Ae+1,Ze=0;for(Le;Le<ke;Le++)Ze=Ze+be[Le].width;He.y1=ye.y1-Ze-He.width/2}})})}function se(fe,me){return ae(fe)==ae(me)}function ae(fe){return fe.y0-fe.y1>0?"up":"down"}function le(fe,me){return _(fe.source,me)==_(fe.target,me)}function _e(fe,me,xe){var ye=fe.nodes,be=fe.links,ke=!1,De=!1;if(be.forEach(function(ze){ze.circularLinkType=="top"?ke=!0:ze.circularLinkType=="bottom"&&(De=!0)}),ke==!1||De==!1){var He=u.min(ye,function(ze){return ze.y0}),Ae=u.max(ye,function(ze){return ze.y1}),Le=Ae-He,Ze=xe-me,We=Ze/Le;ye.forEach(function(ze){var Ie=(ze.y1-ze.y0)*We;ze.y0=(ze.y0-He)*We,ze.y1=ze.y0+Ie}),be.forEach(function(ze){ze.y0=(ze.y0-He)*We,ze.y1=(ze.y1-He)*We,ze.width=ze.width*We})}}m.sankeyCircular=S,m.sankeyCenter=v,m.sankeyLeft=i,m.sankeyRight=n,m.sankeyJustify=r,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V,t("d3-array"),t("d3-collection"),t("d3-shape")):u(m.d3=m.d3||{},m.d3,m.d3,m.d3)})(this,function(m,u,A,T){function e(L){return L.target.depth}function a(L){return L.depth}function i(L,E){return E-1-L.height}function n(L,E){return L.sourceLinks.length?L.depth:E-1}function r(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?u.min(L.sourceLinks,e)-1:0}function v(L){return function(){return L}}function s(L,E){return b(L.source,E.source)||L.index-E.index}function o(L,E){return b(L.target,E.target)||L.index-E.index}function b(L,E){return L.y0-E.y0}function g(L){return L.value}function d(L){return(L.y0+L.y1)/2}function f(L){return d(L.source)*L.value}function y(L){return d(L.target)*L.value}function l(L){return L.index}function x(L){return L.nodes}function c(L){return L.links}function M(L,E){var S=L.get(E);if(!S)throw new Error("missing: "+E);return S}var w=function(){var L=0,E=0,S=1,P=1,F=24,I=8,D=l,R=n,O=x,z=c,G=32,Y=2/3;function ee(){var $={nodes:O.apply(null,arguments),links:z.apply(null,arguments)};return j($),X($),ie($),he($),K($),$}ee.update=function($){return K($),$},ee.nodeId=function($){return arguments.length?(D=typeof $=="function"?$:v($),ee):D},ee.nodeAlign=function($){return arguments.length?(R=typeof $=="function"?$:v($),ee):R},ee.nodeWidth=function($){return arguments.length?(F=+$,ee):F},ee.nodePadding=function($){return arguments.length?(I=+$,ee):I},ee.nodes=function($){return arguments.length?(O=typeof $=="function"?$:v($),ee):O},ee.links=function($){return arguments.length?(z=typeof $=="function"?$:v($),ee):z},ee.size=function($){return arguments.length?(L=E=0,S=+$[0],P=+$[1],ee):[S-L,P-E]},ee.extent=function($){return arguments.length?(L=+$[0][0],S=+$[1][0],E=+$[0][1],P=+$[1][1],ee):[[L,E],[S,P]]},ee.iterations=function($){return arguments.length?(G=+$,ee):G};function j($){$.nodes.forEach(function(H,q){H.index=q,H.sourceLinks=[],H.targetLinks=[]});var U=A.map($.nodes,D);$.links.forEach(function(H,q){H.index=q;var re=H.source,Z=H.target;typeof re!="object"&&(re=H.source=M(U,re)),typeof Z!="object"&&(Z=H.target=M(U,Z)),re.sourceLinks.push(H),Z.targetLinks.push(H)})}function X($){$.nodes.forEach(function(U){U.value=Math.max(u.sum(U.sourceLinks,g),u.sum(U.targetLinks,g))})}function ie($){var U,H,q;for(U=$.nodes,H=[],q=0;U.length;++q,U=H,H=[])U.forEach(function(Z){Z.depth=q,Z.sourceLinks.forEach(function(Q){H.indexOf(Q.target)<0&&H.push(Q.target)})});for(U=$.nodes,H=[],q=0;U.length;++q,U=H,H=[])U.forEach(function(Z){Z.height=q,Z.targetLinks.forEach(function(Q){H.indexOf(Q.source)<0&&H.push(Q.source)})});var re=(S-L-F)/(q-1);$.nodes.forEach(function(Z){Z.x1=(Z.x0=L+Math.max(0,Math.min(q-1,Math.floor(R.call(null,Z,q))))*re)+F})}function he($){var U=A.nest().key(function(se){return se.x0}).sortKeys(u.ascending).entries($.nodes).map(function(se){return se.values});re(),oe();for(var H=1,q=G;q>0;--q)Q(H*=.99),oe(),Z(H),oe();function re(){var se=u.max(U,function(_e){return _e.length}),ae=Y*(P-E)/(se-1);I>ae&&(I=ae);var le=u.min(U,function(_e){return(P-E-(_e.length-1)*I)/u.sum(_e,g)});U.forEach(function(_e){_e.forEach(function(fe,me){fe.y1=(fe.y0=me)+fe.value*le})}),$.links.forEach(function(_e){_e.width=_e.value*le})}function Z(se){U.forEach(function(ae){ae.forEach(function(le){if(le.targetLinks.length){var _e=(u.sum(le.targetLinks,f)/u.sum(le.targetLinks,g)-d(le))*se;le.y0+=_e,le.y1+=_e}})})}function Q(se){U.slice().reverse().forEach(function(ae){ae.forEach(function(le){if(le.sourceLinks.length){var _e=(u.sum(le.sourceLinks,y)/u.sum(le.sourceLinks,g)-d(le))*se;le.y0+=_e,le.y1+=_e}})})}function oe(){U.forEach(function(se){var ae,le,_e=E,fe=se.length,me;for(se.sort(b),me=0;me<fe;++me)ae=se[me],le=_e-ae.y0,le>0&&(ae.y0+=le,ae.y1+=le),_e=ae.y1+I;if(le=_e-I-P,le>0)for(_e=ae.y0-=le,ae.y1-=le,me=fe-2;me>=0;--me)ae=se[me],le=ae.y1+I-_e,le>0&&(ae.y0-=le,ae.y1-=le),_e=ae.y0})}}function K($){$.nodes.forEach(function(U){U.sourceLinks.sort(o),U.targetLinks.sort(s)}),$.nodes.forEach(function(U){var H=U.y0,q=H;U.sourceLinks.forEach(function(re){re.y0=H+re.width/2,H+=re.width}),U.targetLinks.forEach(function(re){re.y1=q+re.width/2,q+=re.width})})}return ee};function p(L){return[L.source.x1,L.y0]}function _(L){return[L.target.x0,L.y1]}var h=function(){return T.linkHorizontal().source(p).target(_)};m.sankey=w,m.sankeyCenter=r,m.sankeyLeft=a,m.sankeyRight=i,m.sankeyJustify=n,m.sankeyLinkHorizontal=h,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(t,N,V){(function(){var m={version:"3.8.0"},u=[].slice,A=function(ce){return u.call(ce)},T=self.document;function e(ce){return ce&&(ce.ownerDocument||ce.document||ce).documentElement}function a(ce){return ce&&(ce.ownerDocument&&ce.ownerDocument.defaultView||ce.document&&ce||ce.defaultView)}if(T)try{A(T.documentElement.childNodes)[0].nodeType}catch{A=function(Te){for(var Re=Te.length,Ue=new Array(Re);Re--;)Ue[Re]=Te[Re];return Ue}}if(Date.now||(Date.now=function(){return+new Date}),T)try{T.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,v=this.CSSStyleDeclaration.prototype,s=v.setProperty;i.setAttribute=function(Te,Re){n.call(this,Te,Re+"")},i.setAttributeNS=function(Te,Re,Ue){r.call(this,Te,Re,Ue+"")},v.setProperty=function(Te,Re,Ue){s.call(this,Te,Re+"",Ue)}}m.ascending=o;function o(ce,Te){return ce<Te?-1:ce>Te?1:ce>=Te?0:NaN}m.descending=function(ce,Te){return Te<ce?-1:Te>ce?1:Te>=ce?0:NaN},m.min=function(ce,Te){var Re=-1,Ue=ce.length,Be,Je;if(arguments.length===1){for(;++Re<Ue;)if((Je=ce[Re])!=null&&Je>=Je){Be=Je;break}for(;++Re<Ue;)(Je=ce[Re])!=null&&Be>Je&&(Be=Je)}else{for(;++Re<Ue;)if((Je=Te.call(ce,ce[Re],Re))!=null&&Je>=Je){Be=Je;break}for(;++Re<Ue;)(Je=Te.call(ce,ce[Re],Re))!=null&&Be>Je&&(Be=Je)}return Be},m.max=function(ce,Te){var Re=-1,Ue=ce.length,Be,Je;if(arguments.length===1){for(;++Re<Ue;)if((Je=ce[Re])!=null&&Je>=Je){Be=Je;break}for(;++Re<Ue;)(Je=ce[Re])!=null&&Je>Be&&(Be=Je)}else{for(;++Re<Ue;)if((Je=Te.call(ce,ce[Re],Re))!=null&&Je>=Je){Be=Je;break}for(;++Re<Ue;)(Je=Te.call(ce,ce[Re],Re))!=null&&Je>Be&&(Be=Je)}return Be},m.extent=function(ce,Te){var Re=-1,Ue=ce.length,Be,Je,wt;if(arguments.length===1){for(;++Re<Ue;)if((Je=ce[Re])!=null&&Je>=Je){Be=wt=Je;break}for(;++Re<Ue;)(Je=ce[Re])!=null&&(Be>Je&&(Be=Je),wt<Je&&(wt=Je))}else{for(;++Re<Ue;)if((Je=Te.call(ce,ce[Re],Re))!=null&&Je>=Je){Be=wt=Je;break}for(;++Re<Ue;)(Je=Te.call(ce,ce[Re],Re))!=null&&(Be>Je&&(Be=Je),wt<Je&&(wt=Je))}return[Be,wt]};function b(ce){return ce===null?NaN:+ce}function g(ce){return!isNaN(ce)}m.sum=function(ce,Te){var Re=0,Ue=ce.length,Be,Je=-1;if(arguments.length===1)for(;++Je<Ue;)g(Be=+ce[Je])&&(Re+=Be);else for(;++Je<Ue;)g(Be=+Te.call(ce,ce[Je],Je))&&(Re+=Be);return Re},m.mean=function(ce,Te){var Re=0,Ue=ce.length,Be,Je=-1,wt=Ue;if(arguments.length===1)for(;++Je<Ue;)g(Be=b(ce[Je]))?Re+=Be:--wt;else for(;++Je<Ue;)g(Be=b(Te.call(ce,ce[Je],Je)))?Re+=Be:--wt;if(wt)return Re/wt},m.quantile=function(ce,Te){var Re=(ce.length-1)*Te+1,Ue=Math.floor(Re),Be=+ce[Ue-1],Je=Re-Ue;return Je?Be+Je*(ce[Ue]-Be):Be},m.median=function(ce,Te){var Re=[],Ue=ce.length,Be,Je=-1;if(arguments.length===1)for(;++Je<Ue;)g(Be=b(ce[Je]))&&Re.push(Be);else for(;++Je<Ue;)g(Be=b(Te.call(ce,ce[Je],Je)))&&Re.push(Be);if(Re.length)return m.quantile(Re.sort(o),.5)},m.variance=function(ce,Te){var Re=ce.length,Ue=0,Be,Je,wt=0,gt=-1,It=0;if(arguments.length===1)for(;++gt<Re;)g(Be=b(ce[gt]))&&(Je=Be-Ue,Ue+=Je/++It,wt+=Je*(Be-Ue));else for(;++gt<Re;)g(Be=b(Te.call(ce,ce[gt],gt)))&&(Je=Be-Ue,Ue+=Je/++It,wt+=Je*(Be-Ue));if(It>1)return wt/(It-1)},m.deviation=function(){var ce=m.variance.apply(this,arguments);return ce&&Math.sqrt(ce)};function d(ce){return{left:function(Te,Re,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var Je=Ue+Be>>>1;ce(Te[Je],Re)<0?Ue=Je+1:Be=Je}return Ue},right:function(Te,Re,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var Je=Ue+Be>>>1;ce(Te[Je],Re)>0?Be=Je:Ue=Je+1}return Ue}}}var f=d(o);m.bisectLeft=f.left,m.bisect=m.bisectRight=f.right,m.bisector=function(ce){return d(ce.length===1?function(Te,Re){return o(ce(Te),Re)}:ce)},m.shuffle=function(ce,Te,Re){(Ue=arguments.length)<3&&(Re=ce.length,Ue<2&&(Te=0));for(var Ue=Re-Te,Be,Je;Ue;)Je=Math.random()*Ue--|0,Be=ce[Ue+Te],ce[Ue+Te]=ce[Je+Te],ce[Je+Te]=Be;return ce},m.permute=function(ce,Te){for(var Re=Te.length,Ue=new Array(Re);Re--;)Ue[Re]=ce[Te[Re]];return Ue},m.pairs=function(ce){for(var Te=0,Re=ce.length-1,Ue=ce[0],Be=new Array(Re<0?0:Re);Te<Re;)Be[Te]=[Ue,Ue=ce[++Te]];return Be},m.transpose=function(ce){if(!(Je=ce.length))return[];for(var Te=-1,Re=m.min(ce,y),Ue=new Array(Re);++Te<Re;)for(var Be=-1,Je,wt=Ue[Te]=new Array(Je);++Be<Je;)wt[Be]=ce[Be][Te];return Ue};function y(ce){return ce.length}m.zip=function(){return m.transpose(arguments)},m.keys=function(ce){var Te=[];for(var Re in ce)Te.push(Re);return Te},m.values=function(ce){var Te=[];for(var Re in ce)Te.push(ce[Re]);return Te},m.entries=function(ce){var Te=[];for(var Re in ce)Te.push({key:Re,value:ce[Re]});return Te},m.merge=function(ce){for(var Te=ce.length,Re,Ue=-1,Be=0,Je,wt;++Ue<Te;)Be+=ce[Ue].length;for(Je=new Array(Be);--Te>=0;)for(wt=ce[Te],Re=wt.length;--Re>=0;)Je[--Be]=wt[Re];return Je};var l=Math.abs;m.range=function(ce,Te,Re){if(arguments.length<3&&(Re=1,arguments.length<2&&(Te=ce,ce=0)),(Te-ce)/Re===1/0)throw new Error("infinite range");var Ue=[],Be=x(l(Re)),Je=-1,wt;if(ce*=Be,Te*=Be,Re*=Be,Re<0)for(;(wt=ce+Re*++Je)>Te;)Ue.push(wt/Be);else for(;(wt=ce+Re*++Je)<Te;)Ue.push(wt/Be);return Ue};function x(ce){for(var Te=1;ce*Te%1;)Te*=10;return Te}function c(ce,Te){for(var Re in Te)Object.defineProperty(ce.prototype,Re,{value:Te[Re],enumerable:!1})}m.map=function(ce,Te){var Re=new M;if(ce instanceof M)ce.forEach(function(gt,It){Re.set(gt,It)});else if(Array.isArray(ce)){var Ue=-1,Be=ce.length,Je;if(arguments.length===1)for(;++Ue<Be;)Re.set(Ue,ce[Ue]);else for(;++Ue<Be;)Re.set(Te.call(ce,Je=ce[Ue],Ue),Je)}else for(var wt in ce)Re.set(wt,ce[wt]);return Re};function M(){this._=Object.create(null)}var w="__proto__",p="\0";c(M,{has:L,get:function(ce){return this._[_(ce)]},set:function(ce,Te){return this._[_(ce)]=Te},remove:E,keys:S,values:function(){var ce=[];for(var Te in this._)ce.push(this._[Te]);return ce},entries:function(){var ce=[];for(var Te in this._)ce.push({key:h(Te),value:this._[Te]});return ce},size:P,empty:F,forEach:function(ce){for(var Te in this._)ce.call(this,h(Te),this._[Te])}});function _(ce){return(ce+="")===w||ce[0]===p?p+ce:ce}function h(ce){return(ce+="")[0]===p?ce.slice(1):ce}function L(ce){return _(ce)in this._}function E(ce){return(ce=_(ce))in this._&&delete this._[ce]}function S(){var ce=[];for(var Te in this._)ce.push(h(Te));return ce}function P(){var ce=0;for(var Te in this._)++ce;return ce}function F(){for(var ce in this._)return!1;return!0}m.nest=function(){var ce={},Te=[],Re=[],Ue,Be;function Je(gt,It,qt){if(qt>=Te.length)return Be?Be.call(ce,It):Ue?It.sort(Ue):It;for(var nr=-1,ar=It.length,Cr=Te[qt++],nn,pn,Ir,Wr=new M,en;++nr<ar;)(en=Wr.get(nn=Cr(pn=It[nr])))?en.push(pn):Wr.set(nn,[pn]);return gt?(pn=gt(),Ir=function(fn,vn){pn.set(fn,Je(gt,vn,qt))}):(pn={},Ir=function(fn,vn){pn[fn]=Je(gt,vn,qt)}),Wr.forEach(Ir),pn}function wt(gt,It){if(It>=Te.length)return gt;var qt=[],nr=Re[It++];return gt.forEach(function(ar,Cr){qt.push({key:ar,values:wt(Cr,It)})}),nr?qt.sort(function(ar,Cr){return nr(ar.key,Cr.key)}):qt}return ce.map=function(gt,It){return Je(It,gt,0)},ce.entries=function(gt){return wt(Je(m.map,gt,0),0)},ce.key=function(gt){return Te.push(gt),ce},ce.sortKeys=function(gt){return Re[Te.length-1]=gt,ce},ce.sortValues=function(gt){return Ue=gt,ce},ce.rollup=function(gt){return Be=gt,ce},ce},m.set=function(ce){var Te=new I;if(ce)for(var Re=0,Ue=ce.length;Re<Ue;++Re)Te.add(ce[Re]);return Te};function I(){this._=Object.create(null)}c(I,{has:L,add:function(ce){return this._[_(ce+="")]=!0,ce},remove:E,values:S,size:P,empty:F,forEach:function(ce){for(var Te in this._)ce.call(this,h(Te))}}),m.behavior={};function D(ce){return ce}m.rebind=function(ce,Te){for(var Re=1,Ue=arguments.length,Be;++Re<Ue;)ce[Be=arguments[Re]]=R(ce,Te,Te[Be]);return ce};function R(ce,Te,Re){return function(){var Ue=Re.apply(Te,arguments);return Ue===Te?ce:Ue}}function O(ce,Te){if(Te in ce)return Te;Te=Te.charAt(0).toUpperCase()+Te.slice(1);for(var Re=0,Ue=z.length;Re<Ue;++Re){var Be=z[Re]+Te;if(Be in ce)return Be}}var z=["webkit","ms","moz","Moz","o","O"];function G(){}m.dispatch=function(){for(var ce=new Y,Te=-1,Re=arguments.length;++Te<Re;)ce[arguments[Te]]=ee(ce);return ce};function Y(){}Y.prototype.on=function(ce,Te){var Re=ce.indexOf("."),Ue="";if(Re>=0&&(Ue=ce.slice(Re+1),ce=ce.slice(0,Re)),ce)return arguments.length<2?this[ce].on(Ue):this[ce].on(Ue,Te);if(arguments.length===2){if(Te==null)for(ce in this)this.hasOwnProperty(ce)&&this[ce].on(Ue,null);return this}};function ee(ce){var Te=[],Re=new M;function Ue(){for(var Be=Te,Je=-1,wt=Be.length,gt;++Je<wt;)(gt=Be[Je].on)&&gt.apply(this,arguments);return ce}return Ue.on=function(Be,Je){var wt=Re.get(Be),gt;return arguments.length<2?wt&&wt.on:(wt&&(wt.on=null,Te=Te.slice(0,gt=Te.indexOf(wt)).concat(Te.slice(gt+1)),Re.remove(Be)),Je&&Te.push(Re.set(Be,{on:Je})),ce)},Ue}m.event=null;function j(){m.event.preventDefault()}function X(){for(var ce=m.event,Te;Te=ce.sourceEvent;)ce=Te;return ce}function ie(ce){for(var Te=new Y,Re=0,Ue=arguments.length;++Re<Ue;)Te[arguments[Re]]=ee(Te);return Te.of=function(Be,Je){return function(wt){try{var gt=wt.sourceEvent=m.event;wt.target=ce,m.event=wt,Te[wt.type].apply(Be,Je)}finally{m.event=gt}}},Te}m.requote=function(ce){return ce.replace(he,"\\$&")};var he=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,K={}.__proto__?function(ce,Te){ce.__proto__=Te}:function(ce,Te){for(var Re in Te)ce[Re]=Te[Re]};function $(ce){return K(ce,re),ce}var U=function(ce,Te){return Te.querySelector(ce)},H=function(ce,Te){return Te.querySelectorAll(ce)},q=function(ce,Te){var Re=ce.matches||ce[O(ce,"matchesSelector")];return q=function(Ue,Be){return Re.call(Ue,Be)},q(ce,Te)};typeof Sizzle=="function"&&(U=function(ce,Te){return Sizzle(ce,Te)[0]||null},H=Sizzle,q=Sizzle.matchesSelector),m.selection=function(){return m.select(T.documentElement)};var re=m.selection.prototype=[];re.select=function(ce){var Te=[],Re,Ue,Be,Je;ce=Z(ce);for(var wt=-1,gt=this.length;++wt<gt;){Te.push(Re=[]),Re.parentNode=(Be=this[wt]).parentNode;for(var It=-1,qt=Be.length;++It<qt;)(Je=Be[It])?(Re.push(Ue=ce.call(Je,Je.__data__,It,wt)),Ue&&"__data__"in Je&&(Ue.__data__=Je.__data__)):Re.push(null)}return $(Te)};function Z(ce){return typeof ce=="function"?ce:function(){return U(ce,this)}}re.selectAll=function(ce){var Te=[],Re,Ue;ce=Q(ce);for(var Be=-1,Je=this.length;++Be<Je;)for(var wt=this[Be],gt=-1,It=wt.length;++gt<It;)(Ue=wt[gt])&&(Te.push(Re=A(ce.call(Ue,Ue.__data__,gt,Be))),Re.parentNode=Ue);return $(Te)};function Q(ce){return typeof ce=="function"?ce:function(){return H(ce,this)}}var oe="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:oe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};m.ns={prefix:se,qualify:function(ce){var Te=ce.indexOf(":"),Re=ce;return Te>=0&&(Re=ce.slice(0,Te))!=="xmlns"&&(ce=ce.slice(Te+1)),se.hasOwnProperty(Re)?{space:se[Re],local:ce}:ce}},re.attr=function(ce,Te){if(arguments.length<2){if(typeof ce=="string"){var Re=this.node();return ce=m.ns.qualify(ce),ce.local?Re.getAttributeNS(ce.space,ce.local):Re.getAttribute(ce)}for(Te in ce)this.each(ae(Te,ce[Te]));return this}return this.each(ae(ce,Te))};function ae(ce,Te){ce=m.ns.qualify(ce);function Re(){this.removeAttribute(ce)}function Ue(){this.removeAttributeNS(ce.space,ce.local)}function Be(){this.setAttribute(ce,Te)}function Je(){this.setAttributeNS(ce.space,ce.local,Te)}function wt(){var It=Te.apply(this,arguments);It==null?this.removeAttribute(ce):this.setAttribute(ce,It)}function gt(){var It=Te.apply(this,arguments);It==null?this.removeAttributeNS(ce.space,ce.local):this.setAttributeNS(ce.space,ce.local,It)}return Te==null?ce.local?Ue:Re:typeof Te=="function"?ce.local?gt:wt:ce.local?Je:Be}function le(ce){return ce.trim().replace(/\s+/g," ")}re.classed=function(ce,Te){if(arguments.length<2){if(typeof ce=="string"){var Re=this.node(),Ue=(ce=fe(ce)).length,Be=-1;if(Te=Re.classList){for(;++Be<Ue;)if(!Te.contains(ce[Be]))return!1}else for(Te=Re.getAttribute("class");++Be<Ue;)if(!_e(ce[Be]).test(Te))return!1;return!0}for(Te in ce)this.each(me(Te,ce[Te]));return this}return this.each(me(ce,Te))};function _e(ce){return new RegExp("(?:^|\\s+)"+m.requote(ce)+"(?:\\s+|$)","g")}function fe(ce){return(ce+"").trim().split(/^|\s+/)}function me(ce,Te){ce=fe(ce).map(xe);var Re=ce.length;function Ue(){for(var Je=-1;++Je<Re;)ce[Je](this,Te)}function Be(){for(var Je=-1,wt=Te.apply(this,arguments);++Je<Re;)ce[Je](this,wt)}return typeof Te=="function"?Be:Ue}function xe(ce){var Te=_e(ce);return function(Re,Ue){if(Be=Re.classList)return Ue?Be.add(ce):Be.remove(ce);var Be=Re.getAttribute("class")||"";Ue?(Te.lastIndex=0,Te.test(Be)||Re.setAttribute("class",le(Be+" "+ce))):Re.setAttribute("class",le(Be.replace(Te," ")))}}re.style=function(ce,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof ce!="string"){Ue<2&&(Te="");for(Re in ce)this.each(ye(Re,ce[Re],Te));return this}if(Ue<2){var Be=this.node();return a(Be).getComputedStyle(Be,null).getPropertyValue(ce)}Re=""}return this.each(ye(ce,Te,Re))};function ye(ce,Te,Re){function Ue(){this.style.removeProperty(ce)}function Be(){this.style.setProperty(ce,Te,Re)}function Je(){var wt=Te.apply(this,arguments);wt==null?this.style.removeProperty(ce):this.style.setProperty(ce,wt,Re)}return Te==null?Ue:typeof Te=="function"?Je:Be}re.property=function(ce,Te){if(arguments.length<2){if(typeof ce=="string")return this.node()[ce];for(Te in ce)this.each(be(Te,ce[Te]));return this}return this.each(be(ce,Te))};function be(ce,Te){function Re(){delete this[ce]}function Ue(){this[ce]=Te}function Be(){var Je=Te.apply(this,arguments);Je==null?delete this[ce]:this[ce]=Je}return Te==null?Re:typeof Te=="function"?Be:Ue}re.text=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var Te=ce.apply(this,arguments);this.textContent=Te==null?"":Te}:ce==null?function(){this.textContent=""}:function(){this.textContent=ce}):this.node().textContent},re.html=function(ce){return arguments.length?this.each(typeof ce=="function"?function(){var Te=ce.apply(this,arguments);this.innerHTML=Te==null?"":Te}:ce==null?function(){this.innerHTML=""}:function(){this.innerHTML=ce}):this.node().innerHTML},re.append=function(ce){return ce=ke(ce),this.select(function(){return this.appendChild(ce.apply(this,arguments))})};function ke(ce){function Te(){var Ue=this.ownerDocument,Be=this.namespaceURI;return Be===oe&&Ue.documentElement.namespaceURI===oe?Ue.createElement(ce):Ue.createElementNS(Be,ce)}function Re(){return this.ownerDocument.createElementNS(ce.space,ce.local)}return typeof ce=="function"?ce:(ce=m.ns.qualify(ce)).local?Re:Te}re.insert=function(ce,Te){return ce=ke(ce),Te=Z(Te),this.select(function(){return this.insertBefore(ce.apply(this,arguments),Te.apply(this,arguments)||null)})},re.remove=function(){return this.each(De)};function De(){var ce=this.parentNode;ce&&ce.removeChild(this)}re.data=function(ce,Te){var Re=-1,Ue=this.length,Be,Je;if(!arguments.length){for(ce=new Array(Ue=(Be=this[0]).length);++Re<Ue;)(Je=Be[Re])&&(ce[Re]=Je.__data__);return ce}function wt(nr,ar){var Cr,nn=nr.length,pn=ar.length,Ir=Math.min(nn,pn),Wr=new Array(pn),en=new Array(pn),fn=new Array(nn),vn,tn;if(Te){var Zn=new M,ha=new Array(nn),Pa;for(Cr=-1;++Cr<nn;)(vn=nr[Cr])&&(Zn.has(Pa=Te.call(vn,vn.__data__,Cr))?fn[Cr]=vn:Zn.set(Pa,vn),ha[Cr]=Pa);for(Cr=-1;++Cr<pn;)(vn=Zn.get(Pa=Te.call(ar,tn=ar[Cr],Cr)))?vn!==!0&&(Wr[Cr]=vn,vn.__data__=tn):en[Cr]=He(tn),Zn.set(Pa,!0);for(Cr=-1;++Cr<nn;)Cr in ha&&Zn.get(ha[Cr])!==!0&&(fn[Cr]=nr[Cr])}else{for(Cr=-1;++Cr<Ir;)vn=nr[Cr],tn=ar[Cr],vn?(vn.__data__=tn,Wr[Cr]=vn):en[Cr]=He(tn);for(;Cr<pn;++Cr)en[Cr]=He(ar[Cr]);for(;Cr<nn;++Cr)fn[Cr]=nr[Cr]}en.update=Wr,en.parentNode=Wr.parentNode=fn.parentNode=nr.parentNode,gt.push(en),It.push(Wr),qt.push(fn)}var gt=We([]),It=$([]),qt=$([]);if(typeof ce=="function")for(;++Re<Ue;)wt(Be=this[Re],ce.call(Be,Be.parentNode.__data__,Re));else for(;++Re<Ue;)wt(Be=this[Re],ce);return It.enter=function(){return gt},It.exit=function(){return qt},It};function He(ce){return{__data__:ce}}re.datum=function(ce){return arguments.length?this.property("__data__",ce):this.property("__data__")},re.filter=function(ce){var Te=[],Re,Ue,Be;typeof ce!="function"&&(ce=Ae(ce));for(var Je=0,wt=this.length;Je<wt;Je++){Te.push(Re=[]),Re.parentNode=(Ue=this[Je]).parentNode;for(var gt=0,It=Ue.length;gt<It;gt++)(Be=Ue[gt])&&ce.call(Be,Be.__data__,gt,Je)&&Re.push(Be)}return $(Te)};function Ae(ce){return function(){return q(this,ce)}}re.order=function(){for(var ce=-1,Te=this.length;++ce<Te;)for(var Re=this[ce],Ue=Re.length-1,Be=Re[Ue],Je;--Ue>=0;)(Je=Re[Ue])&&(Be&&Be!==Je.nextSibling&&Be.parentNode.insertBefore(Je,Be),Be=Je);return this},re.sort=function(ce){ce=Le.apply(this,arguments);for(var Te=-1,Re=this.length;++Te<Re;)this[Te].sort(ce);return this.order()};function Le(ce){return arguments.length||(ce=o),function(Te,Re){return Te&&Re?ce(Te.__data__,Re.__data__):!Te-!Re}}re.each=function(ce){return Ze(this,function(Te,Re,Ue){ce.call(Te,Te.__data__,Re,Ue)})};function Ze(ce,Te){for(var Re=0,Ue=ce.length;Re<Ue;Re++)for(var Be=ce[Re],Je=0,wt=Be.length,gt;Je<wt;Je++)(gt=Be[Je])&&Te(gt,Je,Re);return ce}re.call=function(ce){var Te=A(arguments);return ce.apply(Te[0]=this,Te),this},re.empty=function(){return!this.node()},re.node=function(){for(var ce=0,Te=this.length;ce<Te;ce++)for(var Re=this[ce],Ue=0,Be=Re.length;Ue<Be;Ue++){var Je=Re[Ue];if(Je)return Je}return null},re.size=function(){var ce=0;return Ze(this,function(){++ce}),ce};function We(ce){return K(ce,ze),ce}var ze=[];m.selection.enter=We,m.selection.enter.prototype=ze,ze.append=re.append,ze.empty=re.empty,ze.node=re.node,ze.call=re.call,ze.size=re.size,ze.select=function(ce){for(var Te=[],Re,Ue,Be,Je,wt,gt=-1,It=this.length;++gt<It;){Be=(Je=this[gt]).update,Te.push(Re=[]),Re.parentNode=Je.parentNode;for(var qt=-1,nr=Je.length;++qt<nr;)(wt=Je[qt])?(Re.push(Be[qt]=Ue=ce.call(Je.parentNode,wt.__data__,qt,gt)),Ue.__data__=wt.__data__):Re.push(null)}return $(Te)},ze.insert=function(ce,Te){return arguments.length<2&&(Te=Ie(this)),re.insert.call(this,ce,Te)};function Ie(ce){var Te,Re;return function(Ue,Be,Je){var wt=ce[Je].update,gt=wt.length,It;for(Je!=Re&&(Re=Je,Te=0),Be>=Te&&(Te=Be+1);!(It=wt[Te])&&++Te<gt;);return It}}m.select=function(ce){var Te;return typeof ce=="string"?(Te=[U(ce,T)],Te.parentNode=T.documentElement):(Te=[ce],Te.parentNode=e(ce)),$([Te])},m.selectAll=function(ce){var Te;return typeof ce=="string"?(Te=A(H(ce,T)),Te.parentNode=T.documentElement):(Te=A(ce),Te.parentNode=null),$([Te])},re.on=function(ce,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof ce!="string"){Ue<2&&(Te=!1);for(Re in ce)this.each(Ve(Re,ce[Re],Te));return this}if(Ue<2)return(Ue=this.node()["__on"+ce])&&Ue._;Re=!1}return this.each(Ve(ce,Te,Re))};function Ve(ce,Te,Re){var Ue="__on"+ce,Be=ce.indexOf("."),Je=Ft;Be>0&&(ce=ce.slice(0,Be));var wt=dt.get(ce);wt&&(ce=wt,Je=Qt);function gt(){var nr=this[Ue];nr&&(this.removeEventListener(ce,nr,nr.$),delete this[Ue])}function It(){var nr=Je(Te,A(arguments));gt.call(this),this.addEventListener(ce,this[Ue]=nr,nr.$=Re),nr._=Te}function qt(){var nr=new RegExp("^__on([^.]+)"+m.requote(ce)+"$"),ar;for(var Cr in this)if(ar=Cr.match(nr)){var nn=this[Cr];this.removeEventListener(ar[1],nn,nn.$),delete this[Cr]}}return Be?Te?It:gt:Te?G:qt}var dt=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});T&&dt.forEach(function(ce){"on"+ce in T&&dt.remove(ce)});function Ft(ce,Te){return function(Re){var Ue=m.event;m.event=Re,Te[0]=this.__data__;try{ce.apply(this,Te)}finally{m.event=Ue}}}function Qt(ce,Te){var Re=Ft(ce,Te);return function(Ue){var Be=this,Je=Ue.relatedTarget;(!Je||Je!==Be&&!(Je.compareDocumentPosition(Be)&8))&&Re.call(Be,Ue)}}var Ot,Ct=0;function jt(ce){var Te=".dragsuppress-"+ ++Ct,Re="click"+Te,Ue=m.select(a(ce)).on("touchmove"+Te,j).on("dragstart"+Te,j).on("selectstart"+Te,j);if(Ot==null&&(Ot="onselectstart"in ce?!1:O(ce.style,"userSelect")),Ot){var Be=e(ce).style,Je=Be[Ot];Be[Ot]="none"}return function(wt){if(Ue.on(Te,null),Ot&&(Be[Ot]=Je),wt){var gt=function(){Ue.on(Re,null)};Ue.on(Re,function(){j(),gt()},!0),setTimeout(gt,0)}}}m.mouse=function(ce){return Lt(ce,X())};var Nt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Lt(ce,Te){Te.changedTouches&&(Te=Te.changedTouches[0]);var Re=ce.ownerSVGElement||ce;if(Re.createSVGPoint){var Ue=Re.createSVGPoint();if(Nt<0){var Be=a(ce);if(Be.scrollX||Be.scrollY){Re=m.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Je=Re[0][0].getScreenCTM();Nt=!(Je.f||Je.e),Re.remove()}}return Nt?(Ue.x=Te.pageX,Ue.y=Te.pageY):(Ue.x=Te.clientX,Ue.y=Te.clientY),Ue=Ue.matrixTransform(ce.getScreenCTM().inverse()),[Ue.x,Ue.y]}var wt=ce.getBoundingClientRect();return[Te.clientX-wt.left-ce.clientLeft,Te.clientY-wt.top-ce.clientTop]}m.touch=function(ce,Te,Re){if(arguments.length<3&&(Re=Te,Te=X().changedTouches),Te){for(var Ue=0,Be=Te.length,Je;Ue<Be;++Ue)if((Je=Te[Ue]).identifier===Re)return Lt(ce,Je)}},m.behavior.drag=function(){var ce=ie(Be,"drag","dragstart","dragend"),Te=null,Re=Je(G,m.mouse,a,"mousemove","mouseup"),Ue=Je(Xe,m.touch,D,"touchmove","touchend");function Be(){this.on("mousedown.drag",Re).on("touchstart.drag",Ue)}function Je(wt,gt,It,qt,nr){return function(){var ar=this,Cr=m.event.target.correspondingElement||m.event.target,nn=ar.parentNode,pn=ce.of(ar,arguments),Ir=0,Wr=wt(),en=".drag"+(Wr==null?"":"-"+Wr),fn,vn=m.select(It(Cr)).on(qt+en,ha).on(nr+en,Pa),tn=jt(Cr),Zn=gt(nn,Wr);Te?(fn=Te.apply(ar,arguments),fn=[fn.x-Zn[0],fn.y-Zn[1]]):fn=[0,0],pn({type:"dragstart"});function ha(){var pa=gt(nn,Wr),Na,xa;!pa||(Na=pa[0]-Zn[0],xa=pa[1]-Zn[1],Ir|=Na|xa,Zn=pa,pn({type:"drag",x:pa[0]+fn[0],y:pa[1]+fn[1],dx:Na,dy:xa}))}function Pa(){!gt(nn,Wr)||(vn.on(qt+en,null).on(nr+en,null),tn(Ir),pn({type:"dragend"}))}}}return Be.origin=function(wt){return arguments.length?(Te=wt,Be):Te},m.rebind(Be,ce,"on")};function Xe(){return m.event.changedTouches[0].identifier}m.touches=function(ce,Te){return arguments.length<2&&(Te=X().touches),Te?A(Te).map(function(Re){var Ue=Lt(ce,Re);return Ue.identifier=Re.identifier,Ue}):[]};var it=1e-6,Ye=it*it,Ee=Math.PI,Ge=2*Ee,Ke=Ge-it,qe=Ee/2,At=Ee/180,yt=180/Ee;function Mt(ce,Te,Re){return(Te[0]-ce[0])*(Re[1]-ce[1])-(Te[1]-ce[1])*(Re[0]-ce[0])}function Gt(ce){return ce>1?qe:ce<-1?-qe:Math.asin(ce)}function zt(ce){return((ce=Math.exp(ce))-1/ce)/2}function Ht(ce){return((ce=Math.exp(ce))+1/ce)/2}function Zt(ce){return((ce=Math.exp(2*ce))-1)/(ce+1)}var Wt=Math.SQRT2,sr=2,Gr=4;m.interpolateZoom=function(ce,Te){var Re=ce[0],Ue=ce[1],Be=ce[2],Je=Te[0],wt=Te[1],gt=Te[2],It=Je-Re,qt=wt-Ue,nr=It*It+qt*qt,ar,Cr;if(nr<Ye)Cr=Math.log(gt/Be)/Wt,ar=function(fn){return[Re+fn*It,Ue+fn*qt,Be*Math.exp(Wt*fn*Cr)]};else{var nn=Math.sqrt(nr),pn=(gt*gt-Be*Be+Gr*nr)/(2*Be*sr*nn),Ir=(gt*gt-Be*Be-Gr*nr)/(2*gt*sr*nn),Wr=Math.log(Math.sqrt(pn*pn+1)-pn),en=Math.log(Math.sqrt(Ir*Ir+1)-Ir);Cr=(en-Wr)/Wt,ar=function(fn){var vn=fn*Cr,tn=Ht(Wr),Zn=Be/(sr*nn)*(tn*Zt(Wt*vn+Wr)-zt(Wr));return[Re+Zn*It,Ue+Zn*qt,Be*tn/Ht(Wt*vn+Wr)]}}return ar.duration=Cr*1e3,ar},m.behavior.zoom=function(){var ce={x:0,y:0,k:1},Te,Re,Ue,Be=[960,500],Je=cn,wt=250,gt=0,It="mousedown.zoom",qt="mousemove.zoom",nr="mouseup.zoom",ar,Cr="touchstart.zoom",nn,pn=ie(vn,"zoomstart","zoom","zoomend"),Ir,Wr,en,fn;st||(st="onwheel"in T?(qr=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in T?(qr=function(){return m.event.wheelDelta},"mousewheel"):(qr=function(){return-m.event.detail},"MozMousePixelScroll"));function vn(_a){_a.on(It,ui).on(st+".zoom",Do).on("dblclick.zoom",Ji).on(Cr,Li)}vn.event=function(_a){_a.each(function(){var di=pn.of(this,arguments),ii=ce;qa?m.select(this).transition().each("start.zoom",function(){ce=this.__chart__||{x:0,y:0,k:1},xa(di)}).tween("zoom:zoom",function(){var Ui=Be[0],yi=Be[1],So=Re?Re[0]:Ui/2,yo=Re?Re[1]:yi/2,Oo=m.interpolateZoom([(So-ce.x)/ce.k,(yo-ce.y)/ce.k,Ui/ce.k],[(So-ii.x)/ii.k,(yo-ii.y)/ii.k,Ui/ii.k]);return function(ys){var as=Oo(ys),xs=Ui/as[2];this.__chart__=ce={x:So-as[0]*xs,y:yo-as[1]*xs,k:xs},Ja(di)}}).each("interrupt.zoom",function(){Va(di)}).each("end.zoom",function(){Va(di)}):(this.__chart__=ce,xa(di),Ja(di),Va(di))})},vn.translate=function(_a){return arguments.length?(ce={x:+_a[0],y:+_a[1],k:ce.k},Na(),vn):[ce.x,ce.y]},vn.scale=function(_a){return arguments.length?(ce={x:ce.x,y:ce.y,k:null},ha(+_a),Na(),vn):ce.k},vn.scaleExtent=function(_a){return arguments.length?(Je=_a==null?cn:[+_a[0],+_a[1]],vn):Je},vn.center=function(_a){return arguments.length?(Ue=_a&&[+_a[0],+_a[1]],vn):Ue},vn.size=function(_a){return arguments.length?(Be=_a&&[+_a[0],+_a[1]],vn):Be},vn.duration=function(_a){return arguments.length?(wt=+_a,vn):wt},vn.x=function(_a){return arguments.length?(Wr=_a,Ir=_a.copy(),ce={x:0,y:0,k:1},vn):Wr},vn.y=function(_a){return arguments.length?(fn=_a,en=_a.copy(),ce={x:0,y:0,k:1},vn):fn};function tn(_a){return[(_a[0]-ce.x)/ce.k,(_a[1]-ce.y)/ce.k]}function Zn(_a){return[_a[0]*ce.k+ce.x,_a[1]*ce.k+ce.y]}function ha(_a){ce.k=Math.max(Je[0],Math.min(Je[1],_a))}function Pa(_a,di){di=Zn(di),ce.x+=_a[0]-di[0],ce.y+=_a[1]-di[1]}function pa(_a,di,ii,Ui){_a.__chart__={x:ce.x,y:ce.y,k:ce.k},ha(Math.pow(2,Ui)),Pa(Re=di,ii),_a=m.select(_a),wt>0&&(_a=_a.transition().duration(wt)),_a.call(vn.event)}function Na(){Wr&&Wr.domain(Ir.range().map(function(_a){return(_a-ce.x)/ce.k}).map(Ir.invert)),fn&&fn.domain(en.range().map(function(_a){return(_a-ce.y)/ce.k}).map(en.invert))}function xa(_a){gt++||_a({type:"zoomstart"})}function Ja(_a){Na(),_a({type:"zoom",scale:ce.k,translate:[ce.x,ce.y]})}function Va(_a){--gt||(_a({type:"zoomend"}),Re=null)}function ui(){var _a=this,di=pn.of(_a,arguments),ii=0,Ui=m.select(a(_a)).on(qt,yo).on(nr,Oo),yi=tn(m.mouse(_a)),So=jt(_a);Nn.call(_a),xa(di);function yo(){ii=1,Pa(m.mouse(_a),yi),Ja(di)}function Oo(){Ui.on(qt,null).on(nr,null),So(ii),Va(di)}}function Li(){var _a=this,di=pn.of(_a,arguments),ii={},Ui=0,yi,So=".zoom-"+m.event.changedTouches[0].identifier,yo="touchmove"+So,Oo="touchend"+So,ys=[],as=m.select(_a),xs=jt(_a);eo(),xa(di),as.on(It,null).on(Cr,eo);function oo(){var Uo=m.touches(_a);return yi=ce.k,Uo.forEach(function(wo){wo.identifier in ii&&(ii[wo.identifier]=tn(wo))}),Uo}function eo(){var Uo=m.event.target;m.select(Uo).on(yo,Za).on(Oo,oi),ys.push(Uo);for(var wo=m.event.changedTouches,qo=0,fo=wo.length;qo<fo;++qo)ii[wo[qo].identifier]=null;var bs=oo(),js=Date.now();if(bs.length===1){if(js-nn<500){var Bu=bs[0];pa(_a,Bu,ii[Bu.identifier],Math.floor(Math.log(ce.k)/Math.LN2)+1),j()}nn=js}else if(bs.length>1){var Bu=bs[0],ho=bs[1],af=Bu[0]-ho[0],yu=Bu[1]-ho[1];Ui=af*af+yu*yu}}function Za(){var Uo=m.touches(_a),wo,qo,fo,bs;Nn.call(_a);for(var js=0,Bu=Uo.length;js<Bu;++js,bs=null)if(fo=Uo[js],bs=ii[fo.identifier]){if(qo)break;wo=fo,qo=bs}if(bs){var ho=(ho=fo[0]-wo[0])*ho+(ho=fo[1]-wo[1])*ho,af=Ui&&Math.sqrt(ho/Ui);wo=[(wo[0]+fo[0])/2,(wo[1]+fo[1])/2],qo=[(qo[0]+bs[0])/2,(qo[1]+bs[1])/2],ha(af*yi)}nn=null,Pa(wo,qo),Ja(di)}function oi(){if(m.event.touches.length){for(var Uo=m.event.changedTouches,wo=0,qo=Uo.length;wo<qo;++wo)delete ii[Uo[wo].identifier];for(var fo in ii)return void oo()}m.selectAll(ys).on(So,null),as.on(It,ui).on(Cr,Li),xs(),Va(di)}}function Do(){var _a=pn.of(this,arguments);ar?clearTimeout(ar):(Nn.call(this),Te=tn(Re=Ue||m.mouse(this)),xa(_a)),ar=setTimeout(function(){ar=null,Va(_a)},50),j(),ha(Math.pow(2,qr()*.002)*ce.k),Pa(Re,Te),Ja(_a)}function Ji(){var _a=m.mouse(this),di=Math.log(ce.k)/Math.LN2;pa(this,_a,tn(_a),m.event.shiftKey?Math.ceil(di)-1:Math.floor(di)+1)}return m.rebind(vn,pn,"on")};var cn=[0,1/0],qr,st;m.color=rr;function rr(){}rr.prototype.toString=function(){return this.rgb()+""},m.hsl=Jt;function Jt(ce,Te,Re){return this instanceof Jt?(this.h=+ce,this.s=+Te,void(this.l=+Re)):arguments.length<2?ce instanceof Jt?new Jt(ce.h,ce.s,ce.l):$r(""+ce,lr,Jt):new Jt(ce,Te,Re)}var hr=Jt.prototype=new rr;hr.brighter=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Jt(this.h,this.s,this.l/ce)},hr.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Jt(this.h,this.s,ce*this.l)},hr.rgb=function(){return Sr(this.h,this.s,this.l)};function Sr(ce,Te,Re){var Ue,Be;ce=isNaN(ce)?0:(ce%=360)<0?ce+360:ce,Te=isNaN(Te)||Te<0?0:Te>1?1:Te,Re=Re<0?0:Re>1?1:Re,Be=Re<=.5?Re*(1+Te):Re+Te-Re*Te,Ue=2*Re-Be;function Je(gt){return gt>360?gt-=360:gt<0&&(gt+=360),gt<60?Ue+(Be-Ue)*gt/60:gt<180?Be:gt<240?Ue+(Be-Ue)*(240-gt)/60:Ue}function wt(gt){return Math.round(Je(gt)*255)}return new Xt(wt(ce+120),wt(ce),wt(ce-120))}m.hcl=tt;function tt(ce,Te,Re){return this instanceof tt?(this.h=+ce,this.c=+Te,void(this.l=+Re)):arguments.length<2?ce instanceof tt?new tt(ce.h,ce.c,ce.l):ce instanceof ft?pt(ce.l,ce.a,ce.b):pt((ce=br((ce=m.rgb(ce)).r,ce.g,ce.b)).l,ce.a,ce.b):new tt(ce,Te,Re)}var Qe=tt.prototype=new rr;Qe.brighter=function(ce){return new tt(this.h,this.c,Math.min(100,this.l+Et*(arguments.length?ce:1)))},Qe.darker=function(ce){return new tt(this.h,this.c,Math.max(0,this.l-Et*(arguments.length?ce:1)))},Qe.rgb=function(){return lt(this.h,this.c,this.l).rgb()};function lt(ce,Te,Re){return isNaN(ce)&&(ce=0),isNaN(Te)&&(Te=0),new ft(Re,Math.cos(ce*=At)*Te,Math.sin(ce)*Te)}m.lab=ft;function ft(ce,Te,Re){return this instanceof ft?(this.l=+ce,this.a=+Te,void(this.b=+Re)):arguments.length<2?ce instanceof ft?new ft(ce.l,ce.a,ce.b):ce instanceof tt?lt(ce.h,ce.c,ce.l):br((ce=Xt(ce)).r,ce.g,ce.b):new ft(ce,Te,Re)}var Et=18,Vt=.95047,Pe=1,Se=1.08883,ot=ft.prototype=new rr;ot.brighter=function(ce){return new ft(Math.min(100,this.l+Et*(arguments.length?ce:1)),this.a,this.b)},ot.darker=function(ce){return new ft(Math.max(0,this.l-Et*(arguments.length?ce:1)),this.a,this.b)},ot.rgb=function(){return ct(this.l,this.a,this.b)};function ct(ce,Te,Re){var Ue=(ce+16)/116,Be=Ue+Te/500,Je=Ue-Re/200;return Be=St(Be)*Vt,Ue=St(Ue)*Pe,Je=St(Je)*Se,new Xt(Pt(3.2404542*Be-1.5371385*Ue-.4985314*Je),Pt(-.969266*Be+1.8760108*Ue+.041556*Je),Pt(.0556434*Be-.2040259*Ue+1.0572252*Je))}function pt(ce,Te,Re){return ce>0?new tt(Math.atan2(Re,Te)*yt,Math.sqrt(Te*Te+Re*Re),ce):new tt(NaN,NaN,ce)}function St(ce){return ce>.206893034?ce*ce*ce:(ce-4/29)/7.787037}function xt(ce){return ce>.008856?Math.pow(ce,1/3):7.787037*ce+4/29}function Pt(ce){return Math.round(255*(ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055))}m.rgb=Xt;function Xt(ce,Te,Re){return this instanceof Xt?(this.r=~~ce,this.g=~~Te,void(this.b=~~Re)):arguments.length<2?ce instanceof Xt?new Xt(ce.r,ce.g,ce.b):$r(""+ce,Xt,Sr):new Xt(ce,Te,Re)}function or(ce){return new Xt(ce>>16,ce>>8&255,ce&255)}function Pr(ce){return or(ce)+""}var Ar=Xt.prototype=new rr;Ar.brighter=function(ce){ce=Math.pow(.7,arguments.length?ce:1);var Te=this.r,Re=this.g,Ue=this.b,Be=30;return!Te&&!Re&&!Ue?new Xt(Be,Be,Be):(Te&&Te<Be&&(Te=Be),Re&&Re<Be&&(Re=Be),Ue&&Ue<Be&&(Ue=Be),new Xt(Math.min(255,Te/ce),Math.min(255,Re/ce),Math.min(255,Ue/ce)))},Ar.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Xt(ce*this.r,ce*this.g,ce*this.b)},Ar.hsl=function(){return lr(this.r,this.g,this.b)},Ar.toString=function(){return"#"+Er(this.r)+Er(this.g)+Er(this.b)};function Er(ce){return ce<16?"0"+Math.max(0,ce).toString(16):Math.min(255,ce).toString(16)}function $r(ce,Te,Re){var Ue=0,Be=0,Je=0,wt,gt,It;if(wt=/([a-z]+)\((.*)\)/.exec(ce=ce.toLowerCase()),wt)switch(gt=wt[2].split(","),wt[1]){case"hsl":return Re(parseFloat(gt[0]),parseFloat(gt[1])/100,parseFloat(gt[2])/100);case"rgb":return Te(Hr(gt[0]),Hr(gt[1]),Hr(gt[2]))}return(It=Lr.get(ce))?Te(It.r,It.g,It.b):(ce!=null&&ce.charAt(0)==="#"&&!isNaN(It=parseInt(ce.slice(1),16))&&(ce.length===4?(Ue=(It&3840)>>4,Ue=Ue>>4|Ue,Be=It&240,Be=Be>>4|Be,Je=It&15,Je=Je<<4|Je):ce.length===7&&(Ue=(It&16711680)>>16,Be=(It&65280)>>8,Je=It&255)),Te(Ue,Be,Je))}function lr(ce,Te,Re){var Ue=Math.min(ce/=255,Te/=255,Re/=255),Be=Math.max(ce,Te,Re),Je=Be-Ue,wt,gt,It=(Be+Ue)/2;return Je?(gt=It<.5?Je/(Be+Ue):Je/(2-Be-Ue),ce==Be?wt=(Te-Re)/Je+(Te<Re?6:0):Te==Be?wt=(Re-ce)/Je+2:wt=(ce-Te)/Je+4,wt*=60):(wt=NaN,gt=It>0&&It<1?0:wt),new Jt(wt,gt,It)}function br(ce,Te,Re){ce=Fr(ce),Te=Fr(Te),Re=Fr(Re);var Ue=xt((.4124564*ce+.3575761*Te+.1804375*Re)/Vt),Be=xt((.2126729*ce+.7151522*Te+.072175*Re)/Pe),Je=xt((.0193339*ce+.119192*Te+.9503041*Re)/Se);return ft(116*Be-16,500*(Ue-Be),200*(Be-Je))}function Fr(ce){return(ce/=255)<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function Hr(ce){var Te=parseFloat(ce);return ce.charAt(ce.length-1)==="%"?Math.round(Te*2.55):Te}var Lr=m.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Lr.forEach(function(ce,Te){Lr.set(ce,or(Te))});function at(ce){return typeof ce=="function"?ce:function(){return ce}}m.functor=at,m.xhr=Rt(D);function Rt(ce){return function(Te,Re,Ue){return arguments.length===2&&typeof Re=="function"&&(Ue=Re,Re=null),Kt(Te,Re,ce,Ue)}}function Kt(ce,Te,Re,Ue){var Be={},Je=m.dispatch("beforesend","progress","load","error"),wt={},gt=new XMLHttpRequest,It=null;self.XDomainRequest&&!("withCredentials"in gt)&&/^(http(s)?:)?\/\//.test(ce)&&(gt=new XDomainRequest),"onload"in gt?gt.onload=gt.onerror=qt:gt.onreadystatechange=function(){gt.readyState>3&&qt()};function qt(){var nr=gt.status,ar;if(!nr&&Nr(gt)||nr>=200&&nr<300||nr===304){try{ar=Re.call(Be,gt)}catch(Cr){Je.error.call(Be,Cr);return}Je.load.call(Be,ar)}else Je.error.call(Be,gt)}return gt.onprogress=function(nr){var ar=m.event;m.event=nr;try{Je.progress.call(Be,gt)}finally{m.event=ar}},Be.header=function(nr,ar){return nr=(nr+"").toLowerCase(),arguments.length<2?wt[nr]:(ar==null?delete wt[nr]:wt[nr]=ar+"",Be)},Be.mimeType=function(nr){return arguments.length?(Te=nr==null?null:nr+"",Be):Te},Be.responseType=function(nr){return arguments.length?(It=nr,Be):It},Be.response=function(nr){return Re=nr,Be},["get","post"].forEach(function(nr){Be[nr]=function(){return Be.send.apply(Be,[nr].concat(A(arguments)))}}),Be.send=function(nr,ar,Cr){if(arguments.length===2&&typeof ar=="function"&&(Cr=ar,ar=null),gt.open(nr,ce,!0),Te!=null&&!("accept"in wt)&&(wt.accept=Te+",*/*"),gt.setRequestHeader)for(var nn in wt)gt.setRequestHeader(nn,wt[nn]);return Te!=null&&gt.overrideMimeType&&gt.overrideMimeType(Te),It!=null&&(gt.responseType=It),Cr!=null&&Be.on("error",Cr).on("load",function(pn){Cr(null,pn)}),Je.beforesend.call(Be,gt),gt.send(ar==null?null:ar),Be},Be.abort=function(){return gt.abort(),Be},m.rebind(Be,Je,"on"),Ue==null?Be:Be.get(ur(Ue))}function ur(ce){return ce.length===1?function(Te,Re){ce(Te==null?Re:null)}:ce}function Nr(ce){var Te=ce.responseType;return Te&&Te!=="text"?ce.response:ce.responseText}m.dsv=function(ce,Te){var Re=new RegExp('["'+ce+`
]`),Ue=ce.charCodeAt(0);function Be(qt,nr,ar){arguments.length<3&&(ar=nr,nr=null);var Cr=Kt(qt,Te,nr==null?Je:wt(nr),ar);return Cr.row=function(nn){return arguments.length?Cr.response((nr=nn)==null?Je:wt(nn)):nr},Cr}function Je(qt){return Be.parse(qt.responseText)}function wt(qt){return function(nr){return Be.parse(nr.responseText,qt)}}Be.parse=function(qt,nr){var ar;return Be.parseRows(qt,function(Cr,nn){if(ar)return ar(Cr,nn-1);var pn=function(Ir){for(var Wr={},en=Cr.length,fn=0;fn<en;++fn)Wr[Cr[fn]]=Ir[fn];return Wr};ar=nr?function(Ir,Wr){return nr(pn(Ir),Wr)}:pn})},Be.parseRows=function(qt,nr){var ar={},Cr={},nn=[],pn=qt.length,Ir=0,Wr=0,en,fn;function vn(){if(Ir>=pn)return Cr;if(fn)return fn=!1,ar;var Zn=Ir;if(qt.charCodeAt(Zn)===34){for(var ha=Zn;ha++<pn;)if(qt.charCodeAt(ha)===34){if(qt.charCodeAt(ha+1)!==34)break;++ha}Ir=ha+2;var Pa=qt.charCodeAt(ha+1);return Pa===13?(fn=!0,qt.charCodeAt(ha+2)===10&&++Ir):Pa===10&&(fn=!0),qt.slice(Zn+1,ha).replace(/""/g,'"')}for(;Ir<pn;){var Pa=qt.charCodeAt(Ir++),pa=1;if(Pa===10)fn=!0;else if(Pa===13)fn=!0,qt.charCodeAt(Ir)===10&&(++Ir,++pa);else if(Pa!==Ue)continue;return qt.slice(Zn,Ir-pa)}return qt.slice(Zn)}for(;(en=vn())!==Cr;){for(var tn=[];en!==ar&&en!==Cr;)tn.push(en),en=vn();nr&&(tn=nr(tn,Wr++))==null||nn.push(tn)}return nn},Be.format=function(qt){if(Array.isArray(qt[0]))return Be.formatRows(qt);var nr=new I,ar=[];return qt.forEach(function(Cr){for(var nn in Cr)nr.has(nn)||ar.push(nr.add(nn))}),[ar.map(It).join(ce)].concat(qt.map(function(Cr){return ar.map(function(nn){return It(Cr[nn])}).join(ce)})).join(`
`)},Be.formatRows=function(qt){return qt.map(gt).join(`
`)};function gt(qt){return qt.map(It).join(ce)}function It(qt){return Re.test(qt)?'"'+qt.replace(/\"/g,'""')+'"':qt}return Be},m.csv=m.dsv(",","text/csv"),m.tsv=m.dsv("	","text/tab-separated-values");var Vr,Dr,Mr,jr,kn=this[O(this,"requestAnimationFrame")]||function(ce){setTimeout(ce,17)};m.timer=function(){mn.apply(this,arguments)};function mn(ce,Te,Re){var Ue=arguments.length;Ue<2&&(Te=0),Ue<3&&(Re=Date.now());var Be=Re+Te,Je={c:ce,t:Be,n:null};return Dr?Dr.n=Je:Vr=Je,Dr=Je,Mr||(jr=clearTimeout(jr),Mr=1,kn(Wn)),Je}function Wn(){var ce=In(),Te=Jn()-ce;Te>24?(isFinite(Te)&&(clearTimeout(jr),jr=setTimeout(Wn,Te)),Mr=0):(Mr=1,kn(Wn))}m.timer.flush=function(){In(),Jn()};function In(){for(var ce=Date.now(),Te=Vr;Te;)ce>=Te.t&&Te.c(ce-Te.t)&&(Te.c=null),Te=Te.n;return ce}function Jn(){for(var ce,Te=Vr,Re=1/0;Te;)Te.c?(Te.t<Re&&(Re=Te.t),Te=(ce=Te).n):Te=ce?ce.n=Te.n:Vr=Te.n;return Dr=ce,Re}m.round=function(ce,Te){return Te?Math.round(ce*(Te=Math.pow(10,Te)))/Te:Math.round(ce)},m.geom={};function Kn(ce){return ce[0]}function ma(ce){return ce[1]}m.geom.hull=function(ce){var Te=Kn,Re=ma;if(arguments.length)return Ue(ce);function Ue(Be){if(Be.length<3)return[];var Je=at(Te),wt=at(Re),gt,It=Be.length,qt=[],nr=[];for(gt=0;gt<It;gt++)qt.push([+Je.call(this,Be[gt],gt),+wt.call(this,Be[gt],gt),gt]);for(qt.sort(_i),gt=0;gt<It;gt++)nr.push([qt[gt][0],-qt[gt][1]]);var ar=Ra(qt),Cr=Ra(nr),nn=Cr[0]===ar[0],pn=Cr[Cr.length-1]===ar[ar.length-1],Ir=[];for(gt=ar.length-1;gt>=0;--gt)Ir.push(Be[qt[ar[gt]][2]]);for(gt=+nn;gt<Cr.length-pn;++gt)Ir.push(Be[qt[Cr[gt]][2]]);return Ir}return Ue.x=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.y=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue};function Ra(ce){for(var Te=ce.length,Re=[0,1],Ue=2,Be=2;Be<Te;Be++){for(;Ue>1&&Mt(ce[Re[Ue-2]],ce[Re[Ue-1]],ce[Be])<=0;)--Ue;Re[Ue++]=Be}return Re.slice(0,Ue)}function _i(ce,Te){return ce[0]-Te[0]||ce[1]-Te[1]}m.geom.polygon=function(ce){return K(ce,Ka),ce};var Ka=m.geom.polygon.prototype=[];Ka.area=function(){for(var ce=-1,Te=this.length,Re,Ue=this[Te-1],Be=0;++ce<Te;)Re=Ue,Ue=this[ce],Be+=Re[1]*Ue[0]-Re[0]*Ue[1];return Be*.5},Ka.centroid=function(ce){var Te=-1,Re=this.length,Ue=0,Be=0,Je,wt=this[Re-1],gt;for(arguments.length||(ce=-1/(6*this.area()));++Te<Re;)Je=wt,wt=this[Te],gt=Je[0]*wt[1]-wt[0]*Je[1],Ue+=(Je[0]+wt[0])*gt,Be+=(Je[1]+wt[1])*gt;return[Ue*ce,Be*ce]},Ka.clip=function(ce){for(var Te,Re=kr(ce),Ue=-1,Be=this.length-kr(this),Je,wt,gt=this[Be-1],It,qt,nr;++Ue<Be;){for(Te=ce.slice(),ce.length=0,It=this[Ue],qt=Te[(wt=Te.length-Re)-1],Je=-1;++Je<wt;)nr=Te[Je],ri(nr,gt,It)?(ri(qt,gt,It)||ce.push(ei(qt,nr,gt,It)),ce.push(nr)):ri(qt,gt,It)&&ce.push(ei(qt,nr,gt,It)),qt=nr;Re&&ce.push(ce[0]),gt=It}return ce};function ri(ce,Te,Re){return(Re[0]-Te[0])*(ce[1]-Te[1])<(Re[1]-Te[1])*(ce[0]-Te[0])}function ei(ce,Te,Re,Ue){var Be=ce[0],Je=Re[0],wt=Te[0]-Be,gt=Ue[0]-Je,It=ce[1],qt=Re[1],nr=Te[1]-It,ar=Ue[1]-qt,Cr=(gt*(It-qt)-ar*(Be-Je))/(ar*wt-gt*nr);return[Be+Cr*wt,It+Cr*nr]}function kr(ce){var Te=ce[0],Re=ce[ce.length-1];return!(Te[0]-Re[0]||Te[1]-Re[1])}var bn,dn,Ln,ra=[],ya,sa,Bn=[];function Qn(){ga(this),this.edge=this.site=this.circle=null}function Xa(ce){var Te=ra.pop()||new Qn;return Te.site=ce,Te}function mi(ce){wr(ce),Ln.remove(ce),ra.push(ce),ga(ce)}function Yt(ce){var Te=ce.circle,Re=Te.x,Ue=Te.cy,Be={x:Re,y:Ue},Je=ce.P,wt=ce.N,gt=[ce];mi(ce);for(var It=Je;It.circle&&l(Re-It.circle.x)<it&&l(Ue-It.circle.cy)<it;)Je=It.P,gt.unshift(It),mi(It),It=Je;gt.unshift(It),wr(It);for(var qt=wt;qt.circle&&l(Re-qt.circle.x)<it&&l(Ue-qt.circle.cy)<it;)wt=qt.N,gt.push(qt),mi(qt),qt=wt;gt.push(qt),wr(qt);var nr=gt.length,ar;for(ar=1;ar<nr;++ar)qt=gt[ar],It=gt[ar-1],fa(qt.edge,It.site,qt.site,Be);It=gt[0],qt=gt[nr-1],qt.edge=Sn(It.site,qt.site,null,Be),_r(It),_r(qt)}function gr(ce){for(var Te=ce.x,Re=ce.y,Ue,Be,Je,wt,gt=Ln._;gt;)if(Je=un(gt,Re)-Te,Je>it)gt=gt.L;else if(wt=Te-yn(gt,Re),wt>it){if(!gt.R){Ue=gt;break}gt=gt.R}else{Je>-it?(Ue=gt.P,Be=gt):wt>-it?(Ue=gt,Be=gt.N):Ue=Be=gt;break}var It=Xa(ce);if(Ln.insert(Ue,It),!(!Ue&&!Be)){if(Ue===Be){wr(Ue),Be=Xa(Ue.site),Ln.insert(It,Be),It.edge=Be.edge=Sn(Ue.site,It.site),_r(Ue),_r(Be);return}if(!Be){It.edge=Sn(Ue.site,It.site);return}wr(Ue),wr(Be);var qt=Ue.site,nr=qt.x,ar=qt.y,Cr=ce.x-nr,nn=ce.y-ar,pn=Be.site,Ir=pn.x-nr,Wr=pn.y-ar,en=2*(Cr*Wr-nn*Ir),fn=Cr*Cr+nn*nn,vn=Ir*Ir+Wr*Wr,tn={x:(Wr*fn-nn*vn)/en+nr,y:(Cr*vn-Ir*fn)/en+ar};fa(Be.edge,qt,pn,tn),It.edge=Sn(qt,ce,null,tn),Be.edge=Sn(ce,pn,null,tn),_r(Ue),_r(Be)}}function un(ce,Te){var Re=ce.site,Ue=Re.x,Be=Re.y,Je=Be-Te;if(!Je)return Ue;var wt=ce.P;if(!wt)return-1/0;Re=wt.site;var gt=Re.x,It=Re.y,qt=It-Te;if(!qt)return gt;var nr=gt-Ue,ar=1/Je-1/qt,Cr=nr/qt;return ar?(-Cr+Math.sqrt(Cr*Cr-2*ar*(nr*nr/(-2*qt)-It+qt/2+Be-Je/2)))/ar+Ue:(Ue+gt)/2}function yn(ce,Te){var Re=ce.N;if(Re)return un(Re,Te);var Ue=ce.site;return Ue.y===Te?Ue.x:1/0}function sn(ce){this.site=ce,this.edges=[]}sn.prototype.prepare=function(){for(var ce=this.edges,Te=ce.length,Re;Te--;)Re=ce[Te].edge,(!Re.b||!Re.a)&&ce.splice(Te,1);return ce.sort(Tn),ce.length};function Cn(ce){for(var Te=ce[0][0],Re=ce[1][0],Ue=ce[0][1],Be=ce[1][1],Je,wt,gt,It,qt=dn,nr=qt.length,ar,Cr,nn,pn,Ir,Wr;nr--;)if(ar=qt[nr],!(!ar||!ar.prepare()))for(nn=ar.edges,pn=nn.length,Cr=0;Cr<pn;)Wr=nn[Cr].end(),gt=Wr.x,It=Wr.y,Ir=nn[++Cr%pn].start(),Je=Ir.x,wt=Ir.y,(l(gt-Je)>it||l(It-wt)>it)&&(nn.splice(Cr,0,new Ma(na(ar.site,Wr,l(gt-Te)<it&&Be-It>it?{x:Te,y:l(Je-Te)<it?wt:Be}:l(It-Be)<it&&Re-gt>it?{x:l(wt-Be)<it?Je:Re,y:Be}:l(gt-Re)<it&&It-Ue>it?{x:Re,y:l(Je-Re)<it?wt:Ue}:l(It-Ue)<it&&gt-Te>it?{x:l(wt-Ue)<it?Je:Te,y:Ue}:null),ar.site,null)),++pn)}function Tn(ce,Te){return Te.angle-ce.angle}function gn(){ga(this),this.x=this.y=this.arc=this.site=this.cy=null}function _r(ce){var Te=ce.P,Re=ce.N;if(!(!Te||!Re)){var Ue=Te.site,Be=ce.site,Je=Re.site;if(Ue!==Je){var wt=Be.x,gt=Be.y,It=Ue.x-wt,qt=Ue.y-gt,nr=Je.x-wt,Wr=Je.y-gt,ar=2*(It*Wr-qt*nr);if(!(ar>=-Ye)){var Cr=It*It+qt*qt,nn=nr*nr+Wr*Wr,pn=(Wr*Cr-qt*nn)/ar,Ir=(It*nn-nr*Cr)/ar,Wr=Ir+gt,en=Bn.pop()||new gn;en.arc=ce,en.site=Be,en.x=pn+wt,en.y=Wr+Math.sqrt(pn*pn+Ir*Ir),en.cy=Wr,ce.circle=en;for(var fn=null,vn=sa._;vn;)if(en.y<vn.y||en.y===vn.y&&en.x<=vn.x)if(vn.L)vn=vn.L;else{fn=vn.P;break}else if(vn.R)vn=vn.R;else{fn=vn;break}sa.insert(fn,en),fn||(ya=en)}}}}function wr(ce){var Te=ce.circle;Te&&(Te.P||(ya=Te.N),sa.remove(Te),Bn.push(Te),ga(Te),ce.circle=null)}function Br(ce,Te,Re,Ue){return function(Be){var Je=Be.a,wt=Be.b,gt=Je.x,It=Je.y,qt=wt.x,nr=wt.y,ar=0,Cr=1,nn=qt-gt,pn=nr-It,Ir;if(Ir=ce-gt,!(!nn&&Ir>0)){if(Ir/=nn,nn<0){if(Ir<ar)return;Ir<Cr&&(Cr=Ir)}else if(nn>0){if(Ir>Cr)return;Ir>ar&&(ar=Ir)}if(Ir=Re-gt,!(!nn&&Ir<0)){if(Ir/=nn,nn<0){if(Ir>Cr)return;Ir>ar&&(ar=Ir)}else if(nn>0){if(Ir<ar)return;Ir<Cr&&(Cr=Ir)}if(Ir=Te-It,!(!pn&&Ir>0)){if(Ir/=pn,pn<0){if(Ir<ar)return;Ir<Cr&&(Cr=Ir)}else if(pn>0){if(Ir>Cr)return;Ir>ar&&(ar=Ir)}if(Ir=Ue-It,!(!pn&&Ir<0)){if(Ir/=pn,pn<0){if(Ir>Cr)return;Ir>ar&&(ar=Ir)}else if(pn>0){if(Ir<ar)return;Ir<Cr&&(Cr=Ir)}return ar>0&&(Be.a={x:gt+ar*nn,y:It+ar*pn}),Cr<1&&(Be.b={x:gt+Cr*nn,y:It+Cr*pn}),Be}}}}}}function An(ce){for(var Te=bn,Re=Br(ce[0][0],ce[0][1],ce[1][0],ce[1][1]),Ue=Te.length,Be;Ue--;)Be=Te[Ue],(!Yn(Be,ce)||!Re(Be)||l(Be.a.x-Be.b.x)<it&&l(Be.a.y-Be.b.y)<it)&&(Be.a=Be.b=null,Te.splice(Ue,1))}function Yn(ce,Te){var Re=ce.b;if(Re)return!0;var Ue=ce.a,Be=Te[0][0],Je=Te[1][0],wt=Te[0][1],gt=Te[1][1],It=ce.l,qt=ce.r,nr=It.x,ar=It.y,Cr=qt.x,nn=qt.y,pn=(nr+Cr)/2,Ir=(ar+nn)/2,Wr,en;if(nn===ar){if(pn<Be||pn>=Je)return;if(nr>Cr){if(!Ue)Ue={x:pn,y:wt};else if(Ue.y>=gt)return;Re={x:pn,y:gt}}else{if(!Ue)Ue={x:pn,y:gt};else if(Ue.y<wt)return;Re={x:pn,y:wt}}}else if(Wr=(nr-Cr)/(nn-ar),en=Ir-Wr*pn,Wr<-1||Wr>1)if(nr>Cr){if(!Ue)Ue={x:(wt-en)/Wr,y:wt};else if(Ue.y>=gt)return;Re={x:(gt-en)/Wr,y:gt}}else{if(!Ue)Ue={x:(gt-en)/Wr,y:gt};else if(Ue.y<wt)return;Re={x:(wt-en)/Wr,y:wt}}else if(ar<nn){if(!Ue)Ue={x:Be,y:Wr*Be+en};else if(Ue.x>=Je)return;Re={x:Je,y:Wr*Je+en}}else{if(!Ue)Ue={x:Je,y:Wr*Je+en};else if(Ue.x<Be)return;Re={x:Be,y:Wr*Be+en}}return ce.a=Ue,ce.b=Re,!0}function ua(ce,Te){this.l=ce,this.r=Te,this.a=this.b=null}function Sn(ce,Te,Re,Ue){var Be=new ua(ce,Te);return bn.push(Be),Re&&fa(Be,ce,Te,Re),Ue&&fa(Be,Te,ce,Ue),dn[ce.i].edges.push(new Ma(Be,ce,Te)),dn[Te.i].edges.push(new Ma(Be,Te,ce)),Be}function na(ce,Te,Re){var Ue=new ua(ce,null);return Ue.a=Te,Ue.b=Re,bn.push(Ue),Ue}function fa(ce,Te,Re,Ue){!ce.a&&!ce.b?(ce.a=Ue,ce.l=Te,ce.r=Re):ce.l===Re?ce.b=Ue:ce.a=Ue}function Ma(ce,Te,Re){var Ue=ce.a,Be=ce.b;this.edge=ce,this.site=Te,this.angle=Re?Math.atan2(Re.y-Te.y,Re.x-Te.x):ce.l===Te?Math.atan2(Be.x-Ue.x,Ue.y-Be.y):Math.atan2(Ue.x-Be.x,Be.y-Ue.y)}Ma.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ka(){this._=null}function ga(ce){ce.U=ce.C=ce.L=ce.R=ce.P=ce.N=null}ka.prototype={insert:function(ce,Te){var Re,Ue,Be;if(ce){if(Te.P=ce,Te.N=ce.N,ce.N&&(ce.N.P=Te),ce.N=Te,ce.R){for(ce=ce.R;ce.L;)ce=ce.L;ce.L=Te}else ce.R=Te;Re=ce}else this._?(ce=ro(this._),Te.P=null,Te.N=ce,ce.P=ce.L=Te,Re=ce):(Te.P=Te.N=null,this._=Te,Re=null);for(Te.L=Te.R=null,Te.U=Re,Te.C=!0,ce=Te;Re&&Re.C;)Ue=Re.U,Re===Ue.L?(Be=Ue.R,Be&&Be.C?(Re.C=Be.C=!1,Ue.C=!0,ce=Ue):(ce===Re.R&&(Ia(this,Re),ce=Re,Re=ce.U),Re.C=!1,Ue.C=!0,Mo(this,Ue))):(Be=Ue.L,Be&&Be.C?(Re.C=Be.C=!1,Ue.C=!0,ce=Ue):(ce===Re.L&&(Mo(this,Re),ce=Re,Re=ce.U),Re.C=!1,Ue.C=!0,Ia(this,Ue))),Re=ce.U;this._.C=!1},remove:function(ce){ce.N&&(ce.N.P=ce.P),ce.P&&(ce.P.N=ce.N),ce.N=ce.P=null;var Te=ce.U,Re,Ue=ce.L,Be=ce.R,Je,wt;if(Ue?Be?Je=ro(Be):Je=Ue:Je=Be,Te?Te.L===ce?Te.L=Je:Te.R=Je:this._=Je,Ue&&Be?(wt=Je.C,Je.C=ce.C,Je.L=Ue,Ue.U=Je,Je!==Be?(Te=Je.U,Je.U=ce.U,ce=Je.R,Te.L=ce,Je.R=Be,Be.U=Je):(Je.U=Te,Te=Je,ce=Je.R)):(wt=ce.C,ce=Je),ce&&(ce.U=Te),!wt){if(ce&&ce.C){ce.C=!1;return}do{if(ce===this._)break;if(ce===Te.L){if(Re=Te.R,Re.C&&(Re.C=!1,Te.C=!0,Ia(this,Te),Re=Te.R),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.R||!Re.R.C)&&(Re.L.C=!1,Re.C=!0,Mo(this,Re),Re=Te.R),Re.C=Te.C,Te.C=Re.R.C=!1,Ia(this,Te),ce=this._;break}}else if(Re=Te.L,Re.C&&(Re.C=!1,Te.C=!0,Mo(this,Te),Re=Te.L),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.L||!Re.L.C)&&(Re.R.C=!1,Re.C=!0,Ia(this,Re),Re=Te.L),Re.C=Te.C,Te.C=Re.L.C=!1,Mo(this,Te),ce=this._;break}Re.C=!0,ce=Te,Te=Te.U}while(!ce.C);ce&&(ce.C=!1)}}};function Ia(ce,Te){var Re=Te,Ue=Te.R,Be=Re.U;Be?Be.L===Re?Be.L=Ue:Be.R=Ue:ce._=Ue,Ue.U=Be,Re.U=Ue,Re.R=Ue.L,Re.R&&(Re.R.U=Re),Ue.L=Re}function Mo(ce,Te){var Re=Te,Ue=Te.L,Be=Re.U;Be?Be.L===Re?Be.L=Ue:Be.R=Ue:ce._=Ue,Ue.U=Be,Re.U=Ue,Re.L=Ue.R,Re.L&&(Re.L.U=Re),Ue.R=Re}function ro(ce){for(;ce.L;)ce=ce.L;return ce}function Qo(ce,Te){var Re=ce.sort(Qs).pop(),Ue,Be,Je;for(bn=[],dn=new Array(ce.length),Ln=new ka,sa=new ka;;)if(Je=ya,Re&&(!Je||Re.y<Je.y||Re.y===Je.y&&Re.x<Je.x))(Re.x!==Ue||Re.y!==Be)&&(dn[Re.i]=new sn(Re),gr(Re),Ue=Re.x,Be=Re.y),Re=ce.pop();else if(Je)Yt(Je.arc);else break;Te&&(An(Te),Cn(Te));var wt={cells:dn,edges:bn};return Ln=sa=bn=dn=null,wt}function Qs(ce,Te){return Te.y-ce.y||Te.x-ce.x}m.geom.voronoi=function(ce){var Te=Kn,Re=ma,Ue=Te,Be=Re,Je=Vs;if(ce)return wt(ce);function wt(It){var qt=new Array(It.length),nr=Je[0][0],ar=Je[0][1],Cr=Je[1][0],nn=Je[1][1];return Qo(gt(It),Je).cells.forEach(function(pn,Ir){var Wr=pn.edges,en=pn.site,fn=qt[Ir]=Wr.length?Wr.map(function(vn){var tn=vn.start();return[tn.x,tn.y]}):en.x>=nr&&en.x<=Cr&&en.y>=ar&&en.y<=nn?[[nr,nn],[Cr,nn],[Cr,ar],[nr,ar]]:[];fn.point=It[Ir]}),qt}function gt(It){return It.map(function(qt,nr){return{x:Math.round(Ue(qt,nr)/it)*it,y:Math.round(Be(qt,nr)/it)*it,i:nr}})}return wt.links=function(It){return Qo(gt(It)).edges.filter(function(qt){return qt.l&&qt.r}).map(function(qt){return{source:It[qt.l.i],target:It[qt.r.i]}})},wt.triangles=function(It){var qt=[];return Qo(gt(It)).cells.forEach(function(nr,ar){for(var Cr=nr.site,nn=nr.edges.sort(Tn),pn=-1,Ir=nn.length,Wr,en=nn[Ir-1].edge,fn=en.l===Cr?en.r:en.l;++pn<Ir;)Wr=fn,en=nn[pn].edge,fn=en.l===Cr?en.r:en.l,ar<Wr.i&&ar<fn.i&&Wl(Cr,Wr,fn)<0&&qt.push([It[ar],It[Wr.i],It[fn.i]])}),qt},wt.x=function(It){return arguments.length?(Ue=at(Te=It),wt):Te},wt.y=function(It){return arguments.length?(Be=at(Re=It),wt):Re},wt.clipExtent=function(It){return arguments.length?(Je=It==null?Vs:It,wt):Je===Vs?null:Je},wt.size=function(It){return arguments.length?wt.clipExtent(It&&[[0,0],It]):Je===Vs?null:Je&&Je[1]},wt};var Vs=[[-1e6,-1e6],[1e6,1e6]];function Wl(ce,Te,Re){return(ce.x-Re.x)*(Te.y-ce.y)-(ce.x-Te.x)*(Re.y-ce.y)}m.geom.delaunay=function(ce){return m.geom.voronoi().triangles(ce)},m.geom.quadtree=function(ce,Te,Re,Ue,Be){var Je=Kn,wt=ma,gt;if(gt=arguments.length)return Je=Ai,wt=Hs,gt===3&&(Be=Re,Ue=Te,Re=Te=0),It(ce);function It(qt){var nr,ar=at(Je),Cr=at(wt),nn,pn,Ir,Wr,en,fn,vn,tn;if(Te!=null)en=Te,fn=Re,vn=Ue,tn=Be;else if(vn=tn=-(en=fn=1/0),nn=[],pn=[],Wr=qt.length,gt)for(Ir=0;Ir<Wr;++Ir)nr=qt[Ir],nr.x<en&&(en=nr.x),nr.y<fn&&(fn=nr.y),nr.x>vn&&(vn=nr.x),nr.y>tn&&(tn=nr.y),nn.push(nr.x),pn.push(nr.y);else for(Ir=0;Ir<Wr;++Ir){var Zn=+ar(nr=qt[Ir],Ir),ha=+Cr(nr,Ir);Zn<en&&(en=Zn),ha<fn&&(fn=ha),Zn>vn&&(vn=Zn),ha>tn&&(tn=ha),nn.push(Zn),pn.push(ha)}var Pa=vn-en,pa=tn-fn;Pa>pa?tn=fn+Pa:vn=en+pa;function Na(Va,ui,Li,Do,Ji,_a,di,ii){if(!(isNaN(Li)||isNaN(Do)))if(Va.leaf){var Ui=Va.x,yi=Va.y;if(Ui!=null)if(l(Ui-Li)+l(yi-Do)<.01)xa(Va,ui,Li,Do,Ji,_a,di,ii);else{var So=Va.point;Va.x=Va.y=Va.point=null,xa(Va,So,Ui,yi,Ji,_a,di,ii),xa(Va,ui,Li,Do,Ji,_a,di,ii)}else Va.x=Li,Va.y=Do,Va.point=ui}else xa(Va,ui,Li,Do,Ji,_a,di,ii)}function xa(Va,ui,Li,Do,Ji,_a,di,ii){var Ui=(Ji+di)*.5,yi=(_a+ii)*.5,So=Li>=Ui,yo=Do>=yi,Oo=yo<<1|So;Va.leaf=!1,Va=Va.nodes[Oo]||(Va.nodes[Oo]=Gs()),So?Ji=Ui:di=Ui,yo?_a=yi:ii=yi,Na(Va,ui,Li,Do,Ji,_a,di,ii)}var Ja=Gs();if(Ja.add=function(Va){Na(Ja,Va,+ar(Va,++Ir),+Cr(Va,Ir),en,fn,vn,tn)},Ja.visit=function(Va){Zi(Va,Ja,en,fn,vn,tn)},Ja.find=function(Va){return Io(Ja,Va[0],Va[1],en,fn,vn,tn)},Ir=-1,Te==null){for(;++Ir<Wr;)Na(Ja,qt[Ir],nn[Ir],pn[Ir],en,fn,vn,tn);--Ir}else qt.forEach(Ja.add);return nn=pn=qt=nr=null,Ja}return It.x=function(qt){return arguments.length?(Je=qt,It):Je},It.y=function(qt){return arguments.length?(wt=qt,It):wt},It.extent=function(qt){return arguments.length?(qt==null?Te=Re=Ue=Be=null:(Te=+qt[0][0],Re=+qt[0][1],Ue=+qt[1][0],Be=+qt[1][1]),It):Te==null?null:[[Te,Re],[Ue,Be]]},It.size=function(qt){return arguments.length?(qt==null?Te=Re=Ue=Be=null:(Te=Re=0,Ue=+qt[0],Be=+qt[1]),It):Te==null?null:[Ue-Te,Be-Re]},It};function Ai(ce){return ce.x}function Hs(ce){return ce.y}function Gs(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Zi(ce,Te,Re,Ue,Be,Je){if(!ce(Te,Re,Ue,Be,Je)){var wt=(Re+Be)*.5,gt=(Ue+Je)*.5,It=Te.nodes;It[0]&&Zi(ce,It[0],Re,Ue,wt,gt),It[1]&&Zi(ce,It[1],wt,Ue,Be,gt),It[2]&&Zi(ce,It[2],Re,gt,wt,Je),It[3]&&Zi(ce,It[3],wt,gt,Be,Je)}}function Io(ce,Te,Re,Ue,Be,Je,wt){var gt=1/0,It;return function qt(nr,ar,Cr,nn,pn){if(!(ar>Je||Cr>wt||nn<Ue||pn<Be)){if(Ir=nr.point){var Ir,Wr=Te-nr.x,en=Re-nr.y,fn=Wr*Wr+en*en;if(fn<gt){var vn=Math.sqrt(gt=fn);Ue=Te-vn,Be=Re-vn,Je=Te+vn,wt=Re+vn,It=Ir}}for(var tn=nr.nodes,Zn=(ar+nn)*.5,ha=(Cr+pn)*.5,Pa=Te>=Zn,pa=Re>=ha,Na=pa<<1|Pa,xa=Na+4;Na<xa;++Na)if(nr=tn[Na&3])switch(Na&3){case 0:qt(nr,ar,Cr,Zn,ha);break;case 1:qt(nr,Zn,Cr,nn,ha);break;case 2:qt(nr,ar,ha,Zn,pn);break;case 3:qt(nr,Zn,ha,nn,pn);break}}}(ce,Ue,Be,Je,wt),It}m.interpolateRgb=kl;function kl(ce,Te){ce=m.rgb(ce),Te=m.rgb(Te);var Re=ce.r,Ue=ce.g,Be=ce.b,Je=Te.r-Re,wt=Te.g-Ue,gt=Te.b-Be;return function(It){return"#"+Er(Math.round(Re+Je*It))+Er(Math.round(Ue+wt*It))+Er(Math.round(Be+gt*It))}}m.interpolateObject=ws;function ws(ce,Te){var Re={},Ue={},Be;for(Be in ce)Be in Te?Re[Be]=go(ce[Be],Te[Be]):Ue[Be]=ce[Be];for(Be in Te)Be in ce||(Ue[Be]=Te[Be]);return function(Je){for(Be in Re)Ue[Be]=Re[Be](Je);return Ue}}m.interpolateNumber=Fi;function Fi(ce,Te){return ce=+ce,Te=+Te,function(Re){return ce*(1-Re)+Te*Re}}m.interpolateString=hl;function hl(ce,Te){var Re=uo.lastIndex=zi.lastIndex=0,Ue,Be,Je,wt=-1,gt=[],It=[];for(ce=ce+"",Te=Te+"";(Ue=uo.exec(ce))&&(Be=zi.exec(Te));)(Je=Be.index)>Re&&(Je=Te.slice(Re,Je),gt[wt]?gt[wt]+=Je:gt[++wt]=Je),(Ue=Ue[0])===(Be=Be[0])?gt[wt]?gt[wt]+=Be:gt[++wt]=Be:(gt[++wt]=null,It.push({i:wt,x:Fi(Ue,Be)})),Re=zi.lastIndex;return Re<Te.length&&(Je=Te.slice(Re),gt[wt]?gt[wt]+=Je:gt[++wt]=Je),gt.length<2?It[0]?(Te=It[0].x,function(qt){return Te(qt)+""}):function(){return Te}:(Te=It.length,function(qt){for(var nr=0,ar;nr<Te;++nr)gt[(ar=It[nr]).i]=ar.x(qt);return gt.join("")})}var uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zi=new RegExp(uo.source,"g");m.interpolate=go;function go(ce,Te){for(var Re=m.interpolators.length,Ue;--Re>=0&&!(Ue=m.interpolators[Re](ce,Te)););return Ue}m.interpolators=[function(ce,Te){var Re=typeof Te;return(Re==="string"?Lr.has(Te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Te)?kl:hl:Te instanceof rr?kl:Array.isArray(Te)?ao:Re==="object"&&isNaN(Te)?ws:Fi)(ce,Te)}],m.interpolateArray=ao;function ao(ce,Te){var Re=[],Ue=[],Be=ce.length,Je=Te.length,wt=Math.min(ce.length,Te.length),gt;for(gt=0;gt<wt;++gt)Re.push(go(ce[gt],Te[gt]));for(;gt<Be;++gt)Ue[gt]=ce[gt];for(;gt<Je;++gt)Ue[gt]=Te[gt];return function(It){for(gt=0;gt<wt;++gt)Ue[gt]=Re[gt](It);return Ue}}var cs=function(){return D},qs=m.map({linear:cs,poly:Rs,quad:function(){return No},cubic:function(){return pc},sin:function(){return Xl},exp:function(){return ju},circle:function(){return Zu},elastic:Ys,back:Cl,bounce:function(){return Is}}),lu=m.map({in:D,out:Mu,"in-out":Ds,"out-in":function(ce){return Ds(Mu(ce))}});m.ease=function(ce){var Te=ce.indexOf("-"),Re=Te>=0?ce.slice(0,Te):ce,Ue=Te>=0?ce.slice(Te+1):"in";return Re=qs.get(Re)||cs,Ue=lu.get(Ue)||D,ts(Ue(Re.apply(null,u.call(arguments,1))))};function ts(ce){return function(Te){return Te<=0?0:Te>=1?1:ce(Te)}}function Mu(ce){return function(Te){return 1-ce(1-Te)}}function Ds(ce){return function(Te){return .5*(Te<.5?ce(2*Te):2-ce(2-2*Te))}}function No(ce){return ce*ce}function pc(ce){return ce*ce*ce}function ko(ce){if(ce<=0)return 0;if(ce>=1)return 1;var Te=ce*ce,Re=Te*ce;return 4*(ce<.5?Re:3*(ce-Te)+Re-.75)}function Rs(ce){return function(Te){return Math.pow(Te,ce)}}function Xl(ce){return 1-Math.cos(ce*qe)}function ju(ce){return Math.pow(2,10*(ce-1))}function Zu(ce){return 1-Math.sqrt(1-ce*ce)}function Ys(ce,Te){var Re;return arguments.length<2&&(Te=.45),arguments.length?Re=Te/Ge*Math.asin(1/ce):(ce=1,Re=Te/4),function(Ue){return 1+ce*Math.pow(2,-10*Ue)*Math.sin((Ue-Re)*Ge/Te)}}function Cl(ce){return ce||(ce=1.70158),function(Te){return Te*Te*((ce+1)*Te-ce)}}function Is(ce){return ce<1/2.75?7.5625*ce*ce:ce<2/2.75?7.5625*(ce-=1.5/2.75)*ce+.75:ce<2.5/2.75?7.5625*(ce-=2.25/2.75)*ce+.9375:7.5625*(ce-=2.625/2.75)*ce+.984375}m.interpolateHcl=uu;function uu(ce,Te){ce=m.hcl(ce),Te=m.hcl(Te);var Re=ce.h,Ue=ce.c,Be=ce.l,Je=Te.h-Re,wt=Te.c-Ue,gt=Te.l-Be;return isNaN(wt)&&(wt=0,Ue=isNaN(Ue)?Te.c:Ue),isNaN(Je)?(Je=0,Re=isNaN(Re)?Te.h:Re):Je>180?Je-=360:Je<-180&&(Je+=360),function(It){return lt(Re+Je*It,Ue+wt*It,Be+gt*It)+""}}m.interpolateHsl=vl;function vl(ce,Te){ce=m.hsl(ce),Te=m.hsl(Te);var Re=ce.h,Ue=ce.s,Be=ce.l,Je=Te.h-Re,wt=Te.s-Ue,gt=Te.l-Be;return isNaN(wt)&&(wt=0,Ue=isNaN(Ue)?Te.s:Ue),isNaN(Je)?(Je=0,Re=isNaN(Re)?Te.h:Re):Je>180?Je-=360:Je<-180&&(Je+=360),function(It){return Sr(Re+Je*It,Ue+wt*It,Be+gt*It)+""}}m.interpolateLab=cu;function cu(ce,Te){ce=m.lab(ce),Te=m.lab(Te);var Re=ce.l,Ue=ce.a,Be=ce.b,Je=Te.l-Re,wt=Te.a-Ue,gt=Te.b-Be;return function(It){return ct(Re+Je*It,Ue+wt*It,Be+gt*It)+""}}m.interpolateRound=Eu;function Eu(ce,Te){return Te-=ce,function(Re){return Math.round(ce+Te*Re)}}m.transform=function(ce){var Te=T.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(Re){if(Re!=null){Te.setAttribute("transform",Re);var Ue=Te.transform.baseVal.consolidate()}return new jl(Ue?Ue.matrix:pl)})(ce)};function jl(ce){var Te=[ce.a,ce.b],Re=[ce.c,ce.d],Ue=el(Te),Be=Su(Te,Re),Je=el(Zl(Re,Te,-Be))||0;Te[0]*Re[1]<Re[0]*Te[1]&&(Te[0]*=-1,Te[1]*=-1,Ue*=-1,Be*=-1),this.rotate=(Ue?Math.atan2(Te[1],Te[0]):Math.atan2(-Re[0],Re[1]))*yt,this.translate=[ce.e,ce.f],this.scale=[Ue,Je],this.skew=Je?Math.atan2(Be,Je)*yt:0}jl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Su(ce,Te){return ce[0]*Te[0]+ce[1]*Te[1]}function el(ce){var Te=Math.sqrt(Su(ce,ce));return Te&&(ce[0]/=Te,ce[1]/=Te),Te}function Zl(ce,Te,Re){return ce[0]+=Re*Te[0],ce[1]+=Re*Te[1],ce}var pl={a:1,b:0,c:0,d:1,e:0,f:0};m.interpolateTransform=Kl;function Ts(ce){return ce.length?ce.pop()+",":""}function Ll(ce,Te,Re,Ue){if(ce[0]!==Te[0]||ce[1]!==Te[1]){var Be=Re.push("translate(",null,",",null,")");Ue.push({i:Be-4,x:Fi(ce[0],Te[0])},{i:Be-2,x:Fi(ce[1],Te[1])})}else(Te[0]||Te[1])&&Re.push("translate("+Te+")")}function fu(ce,Te,Re,Ue){ce!==Te?(ce-Te>180?Te+=360:Te-ce>180&&(ce+=360),Ue.push({i:Re.push(Ts(Re)+"rotate(",null,")")-2,x:Fi(ce,Te)})):Te&&Re.push(Ts(Re)+"rotate("+Te+")")}function ku(ce,Te,Re,Ue){ce!==Te?Ue.push({i:Re.push(Ts(Re)+"skewX(",null,")")-2,x:Fi(ce,Te)}):Te&&Re.push(Ts(Re)+"skewX("+Te+")")}function Cu(ce,Te,Re,Ue){if(ce[0]!==Te[0]||ce[1]!==Te[1]){var Be=Re.push(Ts(Re)+"scale(",null,",",null,")");Ue.push({i:Be-4,x:Fi(ce[0],Te[0])},{i:Be-2,x:Fi(ce[1],Te[1])})}else(Te[0]!==1||Te[1]!==1)&&Re.push(Ts(Re)+"scale("+Te+")")}function Kl(ce,Te){var Re=[],Ue=[];return ce=m.transform(ce),Te=m.transform(Te),Ll(ce.translate,Te.translate,Re,Ue),fu(ce.rotate,Te.rotate,Re,Ue),ku(ce.skew,Te.skew,Re,Ue),Cu(ce.scale,Te.scale,Re,Ue),ce=Te=null,function(Be){for(var Je=-1,wt=Ue.length,gt;++Je<wt;)Re[(gt=Ue[Je]).i]=gt.x(Be);return Re.join("")}}function tl(ce,Te){return Te=(Te-=ce=+ce)||1/Te,function(Re){return(Re-ce)/Te}}function Lu(ce,Te){return Te=(Te-=ce=+ce)||1/Te,function(Re){return Math.max(0,Math.min(1,(Re-ce)/Te))}}m.layout={},m.layout.bundle=function(){return function(ce){for(var Te=[],Re=-1,Ue=ce.length;++Re<Ue;)Te.push(fs(ce[Re]));return Te}};function fs(ce){for(var Te=ce.source,Re=ce.target,Ue=rl(Te,Re),Be=[Te];Te!==Ue;)Te=Te.parent,Be.push(Te);for(var Je=Be.length;Re!==Ue;)Be.splice(Je,0,Re),Re=Re.parent;return Be}function Wo(ce){for(var Te=[],Re=ce.parent;Re!=null;)Te.push(ce),ce=Re,Re=Re.parent;return Te.push(ce),Te}function rl(ce,Te){if(ce===Te)return ce;for(var Re=Wo(ce),Ue=Wo(Te),Be=Re.pop(),Je=Ue.pop(),wt=null;Be===Je;)wt=Be,Be=Re.pop(),Je=Ue.pop();return wt}m.layout.chord=function(){var ce={},Te,Re,Ue,Be,Je=0,wt,gt,It;function qt(){var ar={},Cr=[],nn=m.range(Be),pn=[],Ir,Wr,en,fn,vn;for(Te=[],Re=[],Ir=0,fn=-1;++fn<Be;){for(Wr=0,vn=-1;++vn<Be;)Wr+=Ue[fn][vn];Cr.push(Wr),pn.push(m.range(Be)),Ir+=Wr}for(wt&&nn.sort(function(Ja,Va){return wt(Cr[Ja],Cr[Va])}),gt&&pn.forEach(function(Ja,Va){Ja.sort(function(ui,Li){return gt(Ue[Va][ui],Ue[Va][Li])})}),Ir=(Ge-Je*Be)/Ir,Wr=0,fn=-1;++fn<Be;){for(en=Wr,vn=-1;++vn<Be;){var tn=nn[fn],Zn=pn[tn][vn],ha=Ue[tn][Zn],Pa=Wr,pa=Wr+=ha*Ir;ar[tn+"-"+Zn]={index:tn,subindex:Zn,startAngle:Pa,endAngle:pa,value:ha}}Re[tn]={index:tn,startAngle:en,endAngle:Wr,value:Cr[tn]},Wr+=Je}for(fn=-1;++fn<Be;)for(vn=fn-1;++vn<Be;){var Na=ar[fn+"-"+vn],xa=ar[vn+"-"+fn];(Na.value||xa.value)&&Te.push(Na.value<xa.value?{source:xa,target:Na}:{source:Na,target:xa})}It&&nr()}function nr(){Te.sort(function(ar,Cr){return It((ar.source.value+ar.target.value)/2,(Cr.source.value+Cr.target.value)/2)})}return ce.matrix=function(ar){return arguments.length?(Be=(Ue=ar)&&Ue.length,Te=Re=null,ce):Ue},ce.padding=function(ar){return arguments.length?(Je=ar,Te=Re=null,ce):Je},ce.sortGroups=function(ar){return arguments.length?(wt=ar,Te=Re=null,ce):wt},ce.sortSubgroups=function(ar){return arguments.length?(gt=ar,Te=null,ce):gt},ce.sortChords=function(ar){return arguments.length?(It=ar,Te&&nr(),ce):It},ce.chords=function(){return Te||qt(),Te},ce.groups=function(){return Re||qt(),Re},ce},m.layout.force=function(){var ce={},Te=m.dispatch("start","tick","end"),Re,Ue=[1,1],Be,Je,wt=.9,gt=Fs,It=mo,qt=-30,nr=Dl,ar=.1,Cr=.64,nn=[],pn=[],Ir,Wr,en;function fn(tn){return function(Zn,ha,Pa,pa){if(Zn.point!==tn){var Na=Zn.cx-tn.x,xa=Zn.cy-tn.y,Ja=pa-ha,Va=Na*Na+xa*xa;if(Ja*Ja/Cr<Va){if(Va<nr){var ui=Zn.charge/Va;tn.px-=Na*ui,tn.py-=xa*ui}return!0}if(Zn.point&&Va&&Va<nr){var ui=Zn.pointCharge/Va;tn.px-=Na*ui,tn.py-=xa*ui}}return!Zn.charge}}ce.tick=function(){if((Je*=.99)<.005)return Re=null,Te.end({type:"end",alpha:Je=0}),!0;var tn=nn.length,Zn=pn.length,ha,Pa,pa,Na,xa,Ja,Va,ui,Li;for(Pa=0;Pa<Zn;++Pa)pa=pn[Pa],Na=pa.source,xa=pa.target,ui=xa.x-Na.x,Li=xa.y-Na.y,(Ja=ui*ui+Li*Li)&&(Ja=Je*Wr[Pa]*((Ja=Math.sqrt(Ja))-Ir[Pa])/Ja,ui*=Ja,Li*=Ja,xa.x-=ui*(Va=Na.weight+xa.weight?Na.weight/(Na.weight+xa.weight):.5),xa.y-=Li*Va,Na.x+=ui*(Va=1-Va),Na.y+=Li*Va);if((Va=Je*ar)&&(ui=Ue[0]/2,Li=Ue[1]/2,Pa=-1,Va))for(;++Pa<tn;)pa=nn[Pa],pa.x+=(ui-pa.x)*Va,pa.y+=(Li-pa.y)*Va;if(qt)for(Ms(ha=m.geom.quadtree(nn),Je,en),Pa=-1;++Pa<tn;)(pa=nn[Pa]).fixed||ha.visit(fn(pa));for(Pa=-1;++Pa<tn;)pa=nn[Pa],pa.fixed?(pa.x=pa.px,pa.y=pa.py):(pa.x-=(pa.px-(pa.px=pa.x))*wt,pa.y-=(pa.py-(pa.py=pa.y))*wt);Te.tick({type:"tick",alpha:Je})},ce.nodes=function(tn){return arguments.length?(nn=tn,ce):nn},ce.links=function(tn){return arguments.length?(pn=tn,ce):pn},ce.size=function(tn){return arguments.length?(Ue=tn,ce):Ue},ce.linkDistance=function(tn){return arguments.length?(gt=typeof tn=="function"?tn:+tn,ce):gt},ce.distance=ce.linkDistance,ce.linkStrength=function(tn){return arguments.length?(It=typeof tn=="function"?tn:+tn,ce):It},ce.friction=function(tn){return arguments.length?(wt=+tn,ce):wt},ce.charge=function(tn){return arguments.length?(qt=typeof tn=="function"?tn:+tn,ce):qt},ce.chargeDistance=function(tn){return arguments.length?(nr=tn*tn,ce):Math.sqrt(nr)},ce.gravity=function(tn){return arguments.length?(ar=+tn,ce):ar},ce.theta=function(tn){return arguments.length?(Cr=tn*tn,ce):Math.sqrt(Cr)},ce.alpha=function(tn){return arguments.length?(tn=+tn,Je?tn>0?Je=tn:(Re.c=null,Re.t=NaN,Re=null,Te.end({type:"end",alpha:Je=0})):tn>0&&(Te.start({type:"start",alpha:Je=tn}),Re=mn(ce.tick)),ce):Je},ce.start=function(){var tn,Zn=nn.length,ha=pn.length,Pa=Ue[0],pa=Ue[1],Na,xa;for(tn=0;tn<Zn;++tn)(xa=nn[tn]).index=tn,xa.weight=0;for(tn=0;tn<ha;++tn)xa=pn[tn],typeof xa.source=="number"&&(xa.source=nn[xa.source]),typeof xa.target=="number"&&(xa.target=nn[xa.target]),++xa.source.weight,++xa.target.weight;for(tn=0;tn<Zn;++tn)xa=nn[tn],isNaN(xa.x)&&(xa.x=Ja("x",Pa)),isNaN(xa.y)&&(xa.y=Ja("y",pa)),isNaN(xa.px)&&(xa.px=xa.x),isNaN(xa.py)&&(xa.py=xa.y);if(Ir=[],typeof gt=="function")for(tn=0;tn<ha;++tn)Ir[tn]=+gt.call(this,pn[tn],tn);else for(tn=0;tn<ha;++tn)Ir[tn]=gt;if(Wr=[],typeof It=="function")for(tn=0;tn<ha;++tn)Wr[tn]=+It.call(this,pn[tn],tn);else for(tn=0;tn<ha;++tn)Wr[tn]=It;if(en=[],typeof qt=="function")for(tn=0;tn<Zn;++tn)en[tn]=+qt.call(this,nn[tn],tn);else for(tn=0;tn<Zn;++tn)en[tn]=qt;function Ja(Va,ui){if(!Na){for(Na=new Array(Zn),Ji=0;Ji<Zn;++Ji)Na[Ji]=[];for(Ji=0;Ji<ha;++Ji){var Li=pn[Ji];Na[Li.source.index].push(Li.target),Na[Li.target.index].push(Li.source)}}for(var Do=Na[tn],Ji=-1,_a=Do.length,di;++Ji<_a;)if(!isNaN(di=Do[Ji][Va]))return di;return Math.random()*ui}return ce.resume()},ce.resume=function(){return ce.alpha(.1)},ce.stop=function(){return ce.alpha(0)},ce.drag=function(){if(Be||(Be=m.behavior.drag().origin(D).on("dragstart.force",hu).on("drag.force",vn).on("dragend.force",As)),!arguments.length)return Be;this.on("mouseover.force",Fo).on("mouseout.force",Pl).call(Be)};function vn(tn){tn.px=m.event.x,tn.py=m.event.y,ce.resume()}return m.rebind(ce,Te,"on")};function hu(ce){ce.fixed|=2}function As(ce){ce.fixed&=-7}function Fo(ce){ce.fixed|=4,ce.px=ce.x,ce.py=ce.y}function Pl(ce){ce.fixed&=-5}function Ms(ce,Te,Re){var Ue=0,Be=0;if(ce.charge=0,!ce.leaf)for(var Je=ce.nodes,wt=Je.length,gt=-1,It;++gt<wt;)It=Je[gt],It!=null&&(Ms(It,Te,Re),ce.charge+=It.charge,Ue+=It.charge*It.cx,Be+=It.charge*It.cy);if(ce.point){ce.leaf||(ce.point.x+=Math.random()-.5,ce.point.y+=Math.random()-.5);var qt=Te*Re[ce.point.index];ce.charge+=ce.pointCharge=qt,Ue+=qt*ce.point.x,Be+=qt*ce.point.y}ce.cx=Ue/ce.charge,ce.cy=Be/ce.charge}var Fs=20,mo=1,Dl=1/0;m.layout.hierarchy=function(){var ce=$l,Te=dl,Re=ml;function Ue(Be){var Je=[Be],wt=[],gt;for(Be.depth=0;(gt=Je.pop())!=null;)if(wt.push(gt),(qt=Te.call(Ue,gt,gt.depth))&&(It=qt.length)){for(var It,qt,nr;--It>=0;)Je.push(nr=qt[It]),nr.parent=gt,nr.depth=gt.depth+1;Re&&(gt.value=0),gt.children=qt}else Re&&(gt.value=+Re.call(Ue,gt,gt.depth)||0),delete gt.children;return hs(Be,function(ar){var Cr,nn;ce&&(Cr=ar.children)&&Cr.sort(ce),Re&&(nn=ar.parent)&&(nn.value+=ar.value)}),wt}return Ue.sort=function(Be){return arguments.length?(ce=Be,Ue):ce},Ue.children=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.value=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue.revalue=function(Be){return Re&&(nl(Be,function(Je){Je.children&&(Je.value=0)}),hs(Be,function(Je){var wt;Je.children||(Je.value=+Re.call(Ue,Je,Je.depth)||0),(wt=Je.parent)&&(wt.value+=Je.value)})),Be},Ue};function Rl(ce,Te){return m.rebind(ce,Te,"sort","children","value"),ce.nodes=ce,ce.links=Il,ce}function nl(ce,Te){for(var Re=[ce];(ce=Re.pop())!=null;)if(Te(ce),(Be=ce.children)&&(Ue=Be.length))for(var Ue,Be;--Ue>=0;)Re.push(Be[Ue])}function hs(ce,Te){for(var Re=[ce],Ue=[];(ce=Re.pop())!=null;)if(Ue.push(ce),(wt=ce.children)&&(Je=wt.length))for(var Be=-1,Je,wt;++Be<Je;)Re.push(wt[Be]);for(;(ce=Ue.pop())!=null;)Te(ce)}function dl(ce){return ce.children}function ml(ce){return ce.value}function $l(ce,Te){return Te.value-ce.value}function Il(ce){return m.merge(ce.map(function(Te){return(Te.children||[]).map(function(Re){return{source:Te,target:Re}})}))}m.layout.partition=function(){var ce=m.layout.hierarchy(),Te=[1,1];function Re(Je,wt,gt,It){var qt=Je.children;if(Je.x=wt,Je.y=Je.depth*It,Je.dx=gt,Je.dy=It,qt&&(ar=qt.length)){var nr=-1,ar,Cr,nn;for(gt=Je.value?gt/Je.value:0;++nr<ar;)Re(Cr=qt[nr],wt,nn=Cr.value*gt,It),wt+=nn}}function Ue(Je){var wt=Je.children,gt=0;if(wt&&(qt=wt.length))for(var It=-1,qt;++It<qt;)gt=Math.max(gt,Ue(wt[It]));return 1+gt}function Be(Je,wt){var gt=ce.call(this,Je,wt);return Re(gt[0],0,Te[0],Te[1]/Ue(gt[0])),gt}return Be.size=function(Je){return arguments.length?(Te=Je,Be):Te},Rl(Be,ce)},m.layout.pie=function(){var ce=Number,Te=al,Re=0,Ue=Ge,Be=0;function Je(wt){var gt=wt.length,It=wt.map(function(fn,vn){return+ce.call(Je,fn,vn)}),qt=+(typeof Re=="function"?Re.apply(this,arguments):Re),nr=(typeof Ue=="function"?Ue.apply(this,arguments):Ue)-qt,ar=Math.min(Math.abs(nr)/gt,+(typeof Be=="function"?Be.apply(this,arguments):Be)),Cr=ar*(nr<0?-1:1),nn=m.sum(It),pn=nn?(nr-gt*Cr)/nn:0,Ir=m.range(gt),Wr=[],en;return Te!=null&&Ir.sort(Te===al?function(fn,vn){return It[vn]-It[fn]}:function(fn,vn){return Te(wt[fn],wt[vn])}),Ir.forEach(function(fn){Wr[fn]={data:wt[fn],value:en=It[fn],startAngle:qt,endAngle:qt+=en*pn+Cr,padAngle:ar}}),Wr}return Je.value=function(wt){return arguments.length?(ce=wt,Je):ce},Je.sort=function(wt){return arguments.length?(Te=wt,Je):Te},Je.startAngle=function(wt){return arguments.length?(Re=wt,Je):Re},Je.endAngle=function(wt){return arguments.length?(Ue=wt,Je):Ue},Je.padAngle=function(wt){return arguments.length?(Be=wt,Je):Be},Je};var al={};m.layout.stack=function(){var ce=D,Te=Fl,Re=il,Ue=Ws,Be=Ku,Je=vs;function wt(gt,It){if(!(pn=gt.length))return gt;var qt=gt.map(function(fn,vn){return ce.call(wt,fn,vn)}),nr=qt.map(function(fn){return fn.map(function(vn,tn){return[Be.call(wt,vn,tn),Je.call(wt,vn,tn)]})}),ar=Te.call(wt,nr,It);qt=m.permute(qt,ar),nr=m.permute(nr,ar);var Cr=Re.call(wt,nr,It),nn=qt[0].length,pn,Ir,Wr,en;for(Wr=0;Wr<nn;++Wr)for(Ue.call(wt,qt[0][Wr],en=Cr[Wr],nr[0][Wr][1]),Ir=1;Ir<pn;++Ir)Ue.call(wt,qt[Ir][Wr],en+=nr[Ir-1][Wr][1],nr[Ir][Wr][1]);return gt}return wt.values=function(gt){return arguments.length?(ce=gt,wt):ce},wt.order=function(gt){return arguments.length?(Te=typeof gt=="function"?gt:vu.get(gt)||Fl,wt):Te},wt.offset=function(gt){return arguments.length?(Re=typeof gt=="function"?gt:yl.get(gt)||il,wt):Re},wt.x=function(gt){return arguments.length?(Be=gt,wt):Be},wt.y=function(gt){return arguments.length?(Je=gt,wt):Je},wt.out=function(gt){return arguments.length?(Ue=gt,wt):Ue},wt};function Ku(ce){return ce.x}function vs(ce){return ce.y}function Ws(ce,Te,Re){ce.y0=Te,ce.y=Re}var vu=m.map({"inside-out":function(ce){var Te=ce.length,Re,Ue,Be=ce.map(zl),Je=ce.map(pu),wt=m.range(Te).sort(function(ar,Cr){return Be[ar]-Be[Cr]}),gt=0,It=0,qt=[],nr=[];for(Re=0;Re<Te;++Re)Ue=wt[Re],gt<It?(gt+=Je[Ue],qt.push(Ue)):(It+=Je[Ue],nr.push(Ue));return nr.reverse().concat(qt)},reverse:function(ce){return m.range(ce.length).reverse()},default:Fl}),yl=m.map({silhouette:function(ce){var Te=ce.length,Re=ce[0].length,Ue=[],Be=0,Je,wt,gt,It=[];for(wt=0;wt<Re;++wt){for(Je=0,gt=0;Je<Te;Je++)gt+=ce[Je][wt][1];gt>Be&&(Be=gt),Ue.push(gt)}for(wt=0;wt<Re;++wt)It[wt]=(Be-Ue[wt])/2;return It},wiggle:function(ce){var Te=ce.length,Re=ce[0],Ue=Re.length,Be,Je,wt,gt,It,qt,nr,ar,Cr,nn=[];for(nn[0]=ar=Cr=0,Je=1;Je<Ue;++Je){for(Be=0,gt=0;Be<Te;++Be)gt+=ce[Be][Je][1];for(Be=0,It=0,nr=Re[Je][0]-Re[Je-1][0];Be<Te;++Be){for(wt=0,qt=(ce[Be][Je][1]-ce[Be][Je-1][1])/(2*nr);wt<Be;++wt)qt+=(ce[wt][Je][1]-ce[wt][Je-1][1])/nr;It+=qt*ce[Be][Je][1]}nn[Je]=ar-=gt?It/gt*nr:0,ar<Cr&&(Cr=ar)}for(Je=0;Je<Ue;++Je)nn[Je]-=Cr;return nn},expand:function(ce){var Te=ce.length,Re=ce[0].length,Ue=1/Te,Be,Je,wt,gt=[];for(Je=0;Je<Re;++Je){for(Be=0,wt=0;Be<Te;Be++)wt+=ce[Be][Je][1];if(wt)for(Be=0;Be<Te;Be++)ce[Be][Je][1]/=wt;else for(Be=0;Be<Te;Be++)ce[Be][Je][1]=Ue}for(Je=0;Je<Re;++Je)gt[Je]=0;return gt},zero:il});function Fl(ce){return m.range(ce.length)}function il(ce){for(var Te=-1,Re=ce[0].length,Ue=[];++Te<Re;)Ue[Te]=0;return Ue}function zl(ce){for(var Te=1,Re=0,Ue=ce[0][1],Be,Je=ce.length;Te<Je;++Te)(Be=ce[Te][1])>Ue&&(Re=Te,Ue=Be);return Re}function pu(ce){return ce.reduce(Pu,0)}function Pu(ce,Te){return ce+Te[1]}m.layout.histogram=function(){var ce=!0,Te=Number,Re=xl,Ue=dc;function Be(Je,Cr){for(var gt=[],It=Je.map(Te,this),qt=Re.call(this,It,Cr),nr=Ue.call(this,qt,It,Cr),ar,Cr=-1,nn=It.length,pn=nr.length-1,Ir=ce?1:1/nn,Wr;++Cr<pn;)ar=gt[Cr]=[],ar.dx=nr[Cr+1]-(ar.x=nr[Cr]),ar.y=0;if(pn>0)for(Cr=-1;++Cr<nn;)Wr=It[Cr],Wr>=qt[0]&&Wr<=qt[1]&&(ar=gt[m.bisect(nr,Wr,1,pn)-1],ar.y+=Ir,ar.push(Je[Cr]));return gt}return Be.value=function(Je){return arguments.length?(Te=Je,Be):Te},Be.range=function(Je){return arguments.length?(Re=at(Je),Be):Re},Be.bins=function(Je){return arguments.length?(Ue=typeof Je=="number"?function(wt){return Bi(wt,Je)}:at(Je),Be):Ue},Be.frequency=function(Je){return arguments.length?(ce=!!Je,Be):ce},Be};function dc(ce,Te){return Bi(ce,Math.ceil(Math.log(Te.length)/Math.LN2+1))}function Bi(ce,Te){for(var Re=-1,Ue=+ce[0],Be=(ce[1]-Ue)/Te,Je=[];++Re<=Te;)Je[Re]=Be*Re+Ue;return Je}function xl(ce){return[m.min(ce),m.max(ce)]}m.layout.pack=function(){var ce=m.layout.hierarchy().sort(ol),Te=0,Re=[1,1],Ue;function Be(Je,wt){var gt=ce.call(this,Je,wt),It=gt[0],qt=Re[0],nr=Re[1],ar=Ue==null?Math.sqrt:typeof Ue=="function"?Ue:function(){return Ue};if(It.x=It.y=0,hs(It,function(nn){nn.r=+ar(nn.value)}),hs(It,co),Te){var Cr=Te*(Ue?1:Math.max(2*It.r/qt,2*It.r/nr))/2;hs(It,function(nn){nn.r+=Cr}),hs(It,co),hs(It,function(nn){nn.r-=Cr})}return Xs(It,qt/2,nr/2,Ue?1:1/Math.max(2*It.r/qt,2*It.r/nr)),gt}return Be.size=function(Je){return arguments.length?(Re=Je,Be):Re},Be.radius=function(Je){return arguments.length?(Ue=Je==null||typeof Je=="function"?Je:+Je,Be):Ue},Be.padding=function(Je){return arguments.length?(Te=+Je,Be):Te},Rl(Be,ce)};function ol(ce,Te){return ce.value-Te.value}function rs(ce,Te){var Re=ce._pack_next;ce._pack_next=Te,Te._pack_prev=ce,Te._pack_next=Re,Re._pack_prev=Te}function ps(ce,Te){ce._pack_next=Te,Te._pack_prev=ce}function Ol(ce,Te){var Re=Te.x-ce.x,Ue=Te.y-ce.y,Be=ce.r+Te.r;return .999*Be*Be>Re*Re+Ue*Ue}function co(ce){if(!(Te=ce.children)||!(Cr=Te.length))return;var Te,Re=1/0,Ue=-1/0,Be=1/0,Je=-1/0,wt,gt,It,qt,nr,ar,Cr;function nn(tn){Re=Math.min(tn.x-tn.r,Re),Ue=Math.max(tn.x+tn.r,Ue),Be=Math.min(tn.y-tn.r,Be),Je=Math.max(tn.y+tn.r,Je)}if(Te.forEach(Du),wt=Te[0],wt.x=-wt.r,wt.y=0,nn(wt),Cr>1&&(gt=Te[1],gt.x=gt.r,gt.y=0,nn(gt),Cr>2))for(It=Te[2],zs(wt,gt,It),nn(It),rs(wt,It),wt._pack_prev=It,rs(It,gt),gt=wt._pack_next,qt=3;qt<Cr;qt++){zs(wt,gt,It=Te[qt]);var pn=0,Ir=1,Wr=1;for(nr=gt._pack_next;nr!==gt;nr=nr._pack_next,Ir++)if(Ol(nr,It)){pn=1;break}if(pn==1)for(ar=wt._pack_prev;ar!==nr._pack_prev&&!Ol(ar,It);ar=ar._pack_prev,Wr++);pn?(Ir<Wr||Ir==Wr&&gt.r<wt.r?ps(wt,gt=nr):ps(wt=ar,gt),qt--):(rs(wt,It),gt=It,nn(It))}var en=(Re+Ue)/2,fn=(Be+Je)/2,vn=0;for(qt=0;qt<Cr;qt++)It=Te[qt],It.x-=en,It.y-=fn,vn=Math.max(vn,It.r+Math.sqrt(It.x*It.x+It.y*It.y));ce.r=vn,Te.forEach(Xo)}function Du(ce){ce._pack_next=ce._pack_prev=ce}function Xo(ce){delete ce._pack_next,delete ce._pack_prev}function Xs(ce,Te,Re,Ue){var Be=ce.children;if(ce.x=Te+=Ue*ce.x,ce.y=Re+=Ue*ce.y,ce.r*=Ue,Be)for(var Je=-1,wt=Be.length;++Je<wt;)Xs(Be[Je],Te,Re,Ue)}function zs(ce,Te,Re){var Ue=ce.r+Re.r,Be=Te.x-ce.x,Je=Te.y-ce.y;if(Ue&&(Be||Je)){var wt=Te.r+Re.r,gt=Be*Be+Je*Je;wt*=wt,Ue*=Ue;var It=.5+(Ue-wt)/(2*gt),qt=Math.sqrt(Math.max(0,2*wt*(Ue+gt)-(Ue-=gt)*Ue-wt*wt))/(2*gt);Re.x=ce.x+It*Be+qt*Je,Re.y=ce.y+It*Je-qt*Be}else Re.x=ce.x+Ue,Re.y=ce.y}m.layout.tree=function(){var ce=m.layout.hierarchy().sort(null).value(null),Te=Es,Re=[1,1],Ue=null;function Be(nr,ar){var Cr=ce.call(this,nr,ar),nn=Cr[0],pn=Je(nn);if(hs(pn,wt),pn.parent.m=-pn.z,nl(pn,gt),Ue)nl(nn,qt);else{var Ir=nn,Wr=nn,en=nn;nl(nn,function(Zn){Zn.x<Ir.x&&(Ir=Zn),Zn.x>Wr.x&&(Wr=Zn),Zn.depth>en.depth&&(en=Zn)});var fn=Te(Ir,Wr)/2-Ir.x,vn=Re[0]/(Wr.x+Te(Wr,Ir)/2+fn),tn=Re[1]/(en.depth||1);nl(nn,function(Zn){Zn.x=(Zn.x+fn)*vn,Zn.y=Zn.depth*tn})}return Cr}function Je(nr){for(var ar={A:null,children:[nr]},Cr=[ar],nn;(nn=Cr.pop())!=null;)for(var pn=nn.children,Ir,Wr=0,en=pn.length;Wr<en;++Wr)Cr.push((pn[Wr]=Ir={_:pn[Wr],parent:nn,children:(Ir=pn[Wr].children)&&Ir.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Wr}).a=Ir);return ar.children[0]}function wt(nr){var ar=nr.children,Cr=nr.parent.children,nn=nr.i?Cr[nr.i-1]:null;if(ar.length){ds(nr);var pn=(ar[0].z+ar[ar.length-1].z)/2;nn?(nr.z=nn.z+Te(nr._,nn._),nr.m=nr.z-pn):nr.z=pn}else nn&&(nr.z=nn.z+Te(nr._,nn._));nr.parent.A=It(nr,nn,nr.parent.A||Cr[0])}function gt(nr){nr._.x=nr.z+nr.parent.m,nr.m+=nr.parent.m}function It(nr,ar,Cr){if(ar){for(var nn=nr,pn=nr,Ir=ar,Wr=nn.parent.children[0],en=nn.m,fn=pn.m,vn=Ir.m,tn=Wr.m,Zn;Ir=Ki(Ir),nn=Ho(nn),Ir&&nn;)Wr=Ho(Wr),pn=Ki(pn),pn.a=nr,Zn=Ir.z+vn-nn.z-en+Te(Ir._,nn._),Zn>0&&(Bo(Ru(Ir,nr,Cr),nr,Zn),en+=Zn,fn+=Zn),vn+=Ir.m,en+=nn.m,tn+=Wr.m,fn+=pn.m;Ir&&!Ki(pn)&&(pn.t=Ir,pn.m+=vn-fn),nn&&!Ho(Wr)&&(Wr.t=nn,Wr.m+=en-tn,Cr=nr)}return Cr}function qt(nr){nr.x*=Re[0],nr.y=nr.depth*Re[1]}return Be.separation=function(nr){return arguments.length?(Te=nr,Be):Te},Be.size=function(nr){return arguments.length?(Ue=(Re=nr)==null?qt:null,Be):Ue?null:Re},Be.nodeSize=function(nr){return arguments.length?(Ue=(Re=nr)==null?null:qt,Be):Ue?Re:null},Rl(Be,ce)};function Es(ce,Te){return ce.parent==Te.parent?1:2}function Ho(ce){var Te=ce.children;return Te.length?Te[0]:ce.t}function Ki(ce){var Te=ce.children,Re;return(Re=Te.length)?Te[Re-1]:ce.t}function Bo(ce,Te,Re){var Ue=Re/(Te.i-ce.i);Te.c-=Ue,Te.s+=Re,ce.c+=Ue,Te.z+=Re,Te.m+=Re}function ds(ce){for(var Te=0,Re=0,Ue=ce.children,Be=Ue.length,Je;--Be>=0;)Je=Ue[Be],Je.z+=Te,Je.m+=Te,Te+=Je.s+(Re+=Je.c)}function Ru(ce,Te,Re){return ce.a.parent===Te.parent?ce.a:Re}m.layout.cluster=function(){var ce=m.layout.hierarchy().sort(null).value(null),Te=Es,Re=[1,1],Ue=!1;function Be(Je,wt){var gt=ce.call(this,Je,wt),It=gt[0],qt,nr=0;hs(It,function(Ir){var Wr=Ir.children;Wr&&Wr.length?(Ir.x=Iu(Wr),Ir.y=Jl(Wr)):(Ir.x=qt?nr+=Te(Ir,qt):0,Ir.y=0,qt=Ir)});var ar=bt(It),Cr=Bt(It),nn=ar.x-Te(ar,Cr)/2,pn=Cr.x+Te(Cr,ar)/2;return hs(It,Ue?function(Ir){Ir.x=(Ir.x-It.x)*Re[0],Ir.y=(It.y-Ir.y)*Re[1]}:function(Ir){Ir.x=(Ir.x-nn)/(pn-nn)*Re[0],Ir.y=(1-(It.y?Ir.y/It.y:1))*Re[1]}),gt}return Be.separation=function(Je){return arguments.length?(Te=Je,Be):Te},Be.size=function(Je){return arguments.length?(Ue=(Re=Je)==null,Be):Ue?null:Re},Be.nodeSize=function(Je){return arguments.length?(Ue=(Re=Je)!=null,Be):Ue?Re:null},Rl(Be,ce)};function Jl(ce){return 1+m.max(ce,function(Te){return Te.y})}function Iu(ce){return ce.reduce(function(Te,Re){return Te+Re.x},0)/ce.length}function bt(ce){var Te=ce.children;return Te&&Te.length?bt(Te[0]):ce}function Bt(ce){var Te=ce.children,Re;return Te&&(Re=Te.length)?Bt(Te[Re-1]):ce}m.layout.treemap=function(){var ce=m.layout.hierarchy(),Te=Math.round,Re=[1,1],Ue=null,Be=dr,Je=!1,wt,gt="squarify",It=.5*(1+Math.sqrt(5));function qt(Ir,Wr){for(var en=-1,fn=Ir.length,vn,tn;++en<fn;)tn=(vn=Ir[en]).value*(Wr<0?0:Wr),vn.area=isNaN(tn)||tn<=0?0:tn}function nr(Ir){var Wr=Ir.children;if(Wr&&Wr.length){var en=Be(Ir),fn=[],vn=Wr.slice(),tn,Zn=1/0,ha,Pa=gt==="slice"?en.dx:gt==="dice"?en.dy:gt==="slice-dice"?Ir.depth&1?en.dy:en.dx:Math.min(en.dx,en.dy),pa;for(qt(vn,en.dx*en.dy/Ir.value),fn.area=0;(pa=vn.length)>0;)fn.push(tn=vn[pa-1]),fn.area+=tn.area,gt!=="squarify"||(ha=Cr(fn,Pa))<=Zn?(vn.pop(),Zn=ha):(fn.area-=fn.pop().area,nn(fn,Pa,en,!1),Pa=Math.min(en.dx,en.dy),fn.length=fn.area=0,Zn=1/0);fn.length&&(nn(fn,Pa,en,!0),fn.length=fn.area=0),Wr.forEach(nr)}}function ar(Ir){var Wr=Ir.children;if(Wr&&Wr.length){var en=Be(Ir),fn=Wr.slice(),vn,tn=[];for(qt(fn,en.dx*en.dy/Ir.value),tn.area=0;vn=fn.pop();)tn.push(vn),tn.area+=vn.area,vn.z!=null&&(nn(tn,vn.z?en.dx:en.dy,en,!fn.length),tn.length=tn.area=0);Wr.forEach(ar)}}function Cr(Ir,Wr){for(var en=Ir.area,fn,vn=0,tn=1/0,Zn=-1,ha=Ir.length;++Zn<ha;)!(fn=Ir[Zn].area)||(fn<tn&&(tn=fn),fn>vn&&(vn=fn));return en*=en,Wr*=Wr,en?Math.max(Wr*vn*It/en,en/(Wr*tn*It)):1/0}function nn(Ir,Wr,en,fn){var vn=-1,tn=Ir.length,Zn=en.x,ha=en.y,Pa=Wr?Te(Ir.area/Wr):0,pa;if(Wr==en.dx){for((fn||Pa>en.dy)&&(Pa=en.dy);++vn<tn;)pa=Ir[vn],pa.x=Zn,pa.y=ha,pa.dy=Pa,Zn+=pa.dx=Math.min(en.x+en.dx-Zn,Pa?Te(pa.area/Pa):0);pa.z=!0,pa.dx+=en.x+en.dx-Zn,en.y+=Pa,en.dy-=Pa}else{for((fn||Pa>en.dx)&&(Pa=en.dx);++vn<tn;)pa=Ir[vn],pa.x=Zn,pa.y=ha,pa.dx=Pa,ha+=pa.dy=Math.min(en.y+en.dy-ha,Pa?Te(pa.area/Pa):0);pa.z=!1,pa.dy+=en.y+en.dy-ha,en.x+=Pa,en.dx-=Pa}}function pn(Ir){var Wr=wt||ce(Ir),en=Wr[0];return en.x=en.y=0,en.value?(en.dx=Re[0],en.dy=Re[1]):en.dx=en.dy=0,wt&&ce.revalue(en),qt([en],en.dx*en.dy/en.value),(wt?ar:nr)(en),Je&&(wt=Wr),Wr}return pn.size=function(Ir){return arguments.length?(Re=Ir,pn):Re},pn.padding=function(Ir){if(!arguments.length)return Ue;function Wr(vn){var tn=Ir.call(pn,vn,vn.depth);return tn==null?dr(vn):cr(vn,typeof tn=="number"?[tn,tn,tn,tn]:tn)}function en(vn){return cr(vn,Ir)}var fn;return Be=(Ue=Ir)==null?dr:(fn=typeof Ir)=="function"?Wr:(fn==="number"&&(Ir=[Ir,Ir,Ir,Ir]),en),pn},pn.round=function(Ir){return arguments.length?(Te=Ir?Math.round:Number,pn):Te!=Number},pn.sticky=function(Ir){return arguments.length?(Je=Ir,wt=null,pn):Je},pn.ratio=function(Ir){return arguments.length?(It=Ir,pn):It},pn.mode=function(Ir){return arguments.length?(gt=Ir+"",pn):gt},Rl(pn,ce)};function dr(ce){return{x:ce.x,y:ce.y,dx:ce.dx,dy:ce.dy}}function cr(ce,Te){var Re=ce.x+Te[3],Ue=ce.y+Te[0],Be=ce.dx-Te[1]-Te[3],Je=ce.dy-Te[0]-Te[2];return Be<0&&(Re+=Be/2,Be=0),Je<0&&(Ue+=Je/2,Je=0),{x:Re,y:Ue,dx:Be,dy:Je}}m.random={normal:function(ce,Te){var Re=arguments.length;return Re<2&&(Te=1),Re<1&&(ce=0),function(){var Ue,Be,Je;do Ue=Math.random()*2-1,Be=Math.random()*2-1,Je=Ue*Ue+Be*Be;while(!Je||Je>1);return ce+Te*Ue*Math.sqrt(-2*Math.log(Je)/Je)}},logNormal:function(){var ce=m.random.normal.apply(m,arguments);return function(){return Math.exp(ce())}},bates:function(ce){var Te=m.random.irwinHall(ce);return function(){return Te()/ce}},irwinHall:function(ce){return function(){for(var Te=0,Re=0;Re<ce;Re++)Te+=Math.random();return Te}}},m.scale={};function Or(ce){var Te=ce[0],Re=ce[ce.length-1];return Te<Re?[Te,Re]:[Re,Te]}function ln(ce){return ce.rangeExtent?ce.rangeExtent():Or(ce.range())}function _n(ce,Te,Re,Ue){var Be=Re(ce[0],ce[1]),Je=Ue(Te[0],Te[1]);return function(wt){return Je(Be(wt))}}function Pn(ce,Te){var Re=0,Ue=ce.length-1,Be=ce[Re],Je=ce[Ue],wt;return Je<Be&&(wt=Re,Re=Ue,Ue=wt,wt=Be,Be=Je,Je=wt),ce[Re]=Te.floor(Be),ce[Ue]=Te.ceil(Je),ce}function zn(ce){return ce?{floor:function(Te){return Math.floor(Te/ce)*ce},ceil:function(Te){return Math.ceil(Te/ce)*ce}}:Xn}var Xn={floor:D,ceil:D};function wn(ce,Te,Re,Ue){var Be=[],Je=[],wt=0,gt=Math.min(ce.length,Te.length)-1;for(ce[gt]<ce[0]&&(ce=ce.slice().reverse(),Te=Te.slice().reverse());++wt<=gt;)Be.push(Re(ce[wt-1],ce[wt])),Je.push(Ue(Te[wt-1],Te[wt]));return function(It){var qt=m.bisect(ce,It,1,gt)-1;return Je[qt](Be[qt](It))}}m.scale.linear=function(){return Un([0,1],[0,1],go,!1)};function Un(ce,Te,Re,Ue){var Be,Je;function wt(){var It=Math.min(ce.length,Te.length)>2?wn:_n,qt=Ue?Lu:tl;return Be=It(ce,Te,qt,Re),Je=It(Te,ce,qt,go),gt}function gt(It){return Be(It)}return gt.invert=function(It){return Je(It)},gt.domain=function(It){return arguments.length?(ce=It.map(Number),wt()):ce},gt.range=function(It){return arguments.length?(Te=It,wt()):Te},gt.rangeRound=function(It){return gt.range(It).interpolate(Eu)},gt.clamp=function(It){return arguments.length?(Ue=It,wt()):Ue},gt.interpolate=function(It){return arguments.length?(Re=It,wt()):Re},gt.ticks=function(It){return Ga(ce,It)},gt.tickFormat=function(It,qt){return d3_scale_linearTickFormat(ce,It,qt)},gt.nice=function(It){return jn(ce,It),wt()},gt.copy=function(){return Un(ce,Te,Re,Ue)},wt()}function On(ce,Te){return m.rebind(ce,Te,"range","rangeRound","interpolate","clamp")}function jn(ce,Te){return Pn(ce,zn(ia(ce,Te)[2])),Pn(ce,zn(ia(ce,Te)[2])),ce}function ia(ce,Te){Te==null&&(Te=10);var Re=Or(ce),Ue=Re[1]-Re[0],Be=Math.pow(10,Math.floor(Math.log(Ue/Te)/Math.LN10)),Je=Te/Ue*Be;return Je<=.15?Be*=10:Je<=.35?Be*=5:Je<=.75&&(Be*=2),Re[0]=Math.ceil(Re[0]/Be)*Be,Re[1]=Math.floor(Re[1]/Be)*Be+Be*.5,Re[2]=Be,Re}function Ga(ce,Te){return m.range.apply(m,ia(ce,Te))}m.scale.log=function(){return za(m.scale.linear().domain([0,1]),10,!0,[1,10])};function za(ce,Te,Re,Ue){function Be(gt){return(Re?Math.log(gt<0?0:gt):-Math.log(gt>0?0:-gt))/Math.log(Te)}function Je(gt){return Re?Math.pow(Te,gt):-Math.pow(Te,-gt)}function wt(gt){return ce(Be(gt))}return wt.invert=function(gt){return Je(ce.invert(gt))},wt.domain=function(gt){return arguments.length?(Re=gt[0]>=0,ce.domain((Ue=gt.map(Number)).map(Be)),wt):Ue},wt.base=function(gt){return arguments.length?(Te=+gt,ce.domain(Ue.map(Be)),wt):Te},wt.nice=function(){var gt=Pn(Ue.map(Be),Re?Math:Ya);return ce.domain(gt),Ue=gt.map(Je),wt},wt.ticks=function(){var gt=Or(Ue),It=[],qt=gt[0],nr=gt[1],ar=Math.floor(Be(qt)),Cr=Math.ceil(Be(nr)),nn=Te%1?2:Te;if(isFinite(Cr-ar)){if(Re){for(;ar<Cr;ar++)for(var pn=1;pn<nn;pn++)It.push(Je(ar)*pn);It.push(Je(ar))}else for(It.push(Je(ar));ar++<Cr;)for(var pn=nn-1;pn>0;pn--)It.push(Je(ar)*pn);for(ar=0;It[ar]<qt;ar++);for(Cr=It.length;It[Cr-1]>nr;Cr--);It=It.slice(ar,Cr)}return It},wt.copy=function(){return za(ce.copy(),Te,Re,Ue)},On(wt,ce)}var Ya={floor:function(ce){return-Math.ceil(-ce)},ceil:function(ce){return-Math.floor(-ce)}};m.scale.pow=function(){return ja(m.scale.linear(),1,[0,1])};function ja(ce,Te,Re){var Ue=aa(Te),Be=aa(1/Te);function Je(wt){return ce(Ue(wt))}return Je.invert=function(wt){return Be(ce.invert(wt))},Je.domain=function(wt){return arguments.length?(ce.domain((Re=wt.map(Number)).map(Ue)),Je):Re},Je.ticks=function(wt){return Ga(Re,wt)},Je.tickFormat=function(wt,gt){return d3_scale_linearTickFormat(Re,wt,gt)},Je.nice=function(wt){return Je.domain(jn(Re,wt))},Je.exponent=function(wt){return arguments.length?(Ue=aa(Te=wt),Be=aa(1/Te),ce.domain(Re.map(Ue)),Je):Te},Je.copy=function(){return ja(ce.copy(),Te,Re)},On(Je,ce)}function aa(ce){return function(Te){return Te<0?-Math.pow(-Te,ce):Math.pow(Te,ce)}}m.scale.sqrt=function(){return m.scale.pow().exponent(.5)},m.scale.ordinal=function(){return ba([],{t:"range",a:[[]]})};function ba(ce,Te){var Re,Ue,Be;function Je(gt){return Ue[((Re.get(gt)||(Te.t==="range"?Re.set(gt,ce.push(gt)):NaN))-1)%Ue.length]}function wt(gt,It){return m.range(ce.length).map(function(qt){return gt+It*qt})}return Je.domain=function(gt){if(!arguments.length)return ce;ce=[],Re=new M;for(var It=-1,qt=gt.length,nr;++It<qt;)Re.has(nr=gt[It])||Re.set(nr,ce.push(nr));return Je[Te.t].apply(Je,Te.a)},Je.range=function(gt){return arguments.length?(Ue=gt,Be=0,Te={t:"range",a:arguments},Je):Ue},Je.rangePoints=function(gt,It){arguments.length<2&&(It=0);var qt=gt[0],nr=gt[1],ar=ce.length<2?(qt=(qt+nr)/2,0):(nr-qt)/(ce.length-1+It);return Ue=wt(qt+ar*It/2,ar),Be=0,Te={t:"rangePoints",a:arguments},Je},Je.rangeRoundPoints=function(gt,It){arguments.length<2&&(It=0);var qt=gt[0],nr=gt[1],ar=ce.length<2?(qt=nr=Math.round((qt+nr)/2),0):(nr-qt)/(ce.length-1+It)|0;return Ue=wt(qt+Math.round(ar*It/2+(nr-qt-(ce.length-1+It)*ar)/2),ar),Be=0,Te={t:"rangeRoundPoints",a:arguments},Je},Je.rangeBands=function(gt,It,qt){arguments.length<2&&(It=0),arguments.length<3&&(qt=It);var nr=gt[1]<gt[0],ar=gt[nr-0],Cr=gt[1-nr],nn=(Cr-ar)/(ce.length-It+2*qt);return Ue=wt(ar+nn*qt,nn),nr&&Ue.reverse(),Be=nn*(1-It),Te={t:"rangeBands",a:arguments},Je},Je.rangeRoundBands=function(gt,It,qt){arguments.length<2&&(It=0),arguments.length<3&&(qt=It);var nr=gt[1]<gt[0],ar=gt[nr-0],Cr=gt[1-nr],nn=Math.floor((Cr-ar)/(ce.length-It+2*qt));return Ue=wt(ar+Math.round((Cr-ar-(ce.length-It)*nn)/2),nn),nr&&Ue.reverse(),Be=Math.round(nn*(1-It)),Te={t:"rangeRoundBands",a:arguments},Je},Je.rangeBand=function(){return Be},Je.rangeExtent=function(){return Or(Te.a[0])},Je.copy=function(){return ba(ce,Te)},Je.domain(ce)}m.scale.category10=function(){return m.scale.ordinal().range(Qa)},m.scale.category20=function(){return m.scale.ordinal().range(si)},m.scale.category20b=function(){return m.scale.ordinal().range(Mi)},m.scale.category20c=function(){return m.scale.ordinal().range(Ei)};var Qa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Pr),si=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Pr),Mi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Pr),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Pr);m.scale.quantile=function(){return wi([],[])};function wi(ce,Te){var Re;function Ue(){var Je=0,wt=Te.length;for(Re=[];++Je<wt;)Re[Je-1]=m.quantile(ce,Je/wt);return Be}function Be(Je){if(!isNaN(Je=+Je))return Te[m.bisect(Re,Je)]}return Be.domain=function(Je){return arguments.length?(ce=Je.map(b).filter(g).sort(o),Ue()):ce},Be.range=function(Je){return arguments.length?(Te=Je,Ue()):Te},Be.quantiles=function(){return Re},Be.invertExtent=function(Je){return Je=Te.indexOf(Je),Je<0?[NaN,NaN]:[Je>0?Re[Je-1]:ce[0],Je<Re.length?Re[Je]:ce[ce.length-1]]},Be.copy=function(){return wi(ce,Te)},Ue()}m.scale.quantize=function(){return Pi(0,1,[0,1])};function Pi(ce,Te,Re){var Ue,Be;function Je(gt){return Re[Math.max(0,Math.min(Be,Math.floor(Ue*(gt-ce))))]}function wt(){return Ue=Re.length/(Te-ce),Be=Re.length-1,Je}return Je.domain=function(gt){return arguments.length?(ce=+gt[0],Te=+gt[gt.length-1],wt()):[ce,Te]},Je.range=function(gt){return arguments.length?(Re=gt,wt()):Re},Je.invertExtent=function(gt){return gt=Re.indexOf(gt),gt=gt<0?NaN:gt/Ue+ce,[gt,gt+1/Ue]},Je.copy=function(){return Pi(ce,Te,Re)},wt()}m.scale.threshold=function(){return hi([.5],[0,1])};function hi(ce,Te){function Re(Ue){if(Ue<=Ue)return Te[m.bisect(ce,Ue)]}return Re.domain=function(Ue){return arguments.length?(ce=Ue,Re):ce},Re.range=function(Ue){return arguments.length?(Te=Ue,Re):Te},Re.invertExtent=function(Ue){return Ue=Te.indexOf(Ue),[ce[Ue-1],ce[Ue]]},Re.copy=function(){return hi(ce,Te)},Re}m.scale.identity=function(){return Co([0,1])};function Co(ce){function Te(Re){return+Re}return Te.invert=Te,Te.domain=Te.range=function(Re){return arguments.length?(ce=Re.map(Te),Te):ce},Te.ticks=function(Re){return Ga(ce,Re)},Te.tickFormat=function(Re,Ue){return d3_scale_linearTickFormat(ce,Re,Ue)},Te.copy=function(){return Co(ce)},Te}m.svg={};function io(){return 0}m.svg.arc=function(){var ce=Aa,Te=ki,Re=io,Ue=li,Be=_o,Je=Eo,wt=gs;function gt(){var qt=Math.max(0,+ce.apply(this,arguments)),nr=Math.max(0,+Te.apply(this,arguments)),ar=Be.apply(this,arguments)-qe,Cr=Je.apply(this,arguments)-qe,nn=Math.abs(Cr-ar),pn=ar>Cr?0:1;if(nr<qt&&(Ir=nr,nr=qt,qt=Ir),nn>=Ke)return It(nr,pn)+(qt?It(qt,1-pn):"")+"Z";var Ir,Wr,en,fn,vn=0,tn=0,Zn,ha,Pa,pa,Na,xa,Ja,Va,ui=[];if((fn=(+wt.apply(this,arguments)||0)/2)&&(en=Ue===li?Math.sqrt(qt*qt+nr*nr):+Ue.apply(this,arguments),pn||(tn*=-1),nr&&(tn=Gt(en/nr*Math.sin(fn))),qt&&(vn=Gt(en/qt*Math.sin(fn)))),nr){Zn=nr*Math.cos(ar+tn),ha=nr*Math.sin(ar+tn),Pa=nr*Math.cos(Cr-tn),pa=nr*Math.sin(Cr-tn);var Li=Math.abs(Cr-ar-2*tn)<=Ee?0:1;if(tn&&Os(Zn,ha,Pa,pa)===pn^Li){var Do=(ar+Cr)/2;Zn=nr*Math.cos(Do),ha=nr*Math.sin(Do),Pa=pa=null}}else Zn=ha=0;if(qt){Na=qt*Math.cos(Cr-vn),xa=qt*Math.sin(Cr-vn),Ja=qt*Math.cos(ar+vn),Va=qt*Math.sin(ar+vn);var Ji=Math.abs(ar-Cr+2*vn)<=Ee?0:1;if(vn&&Os(Na,xa,Ja,Va)===1-pn^Ji){var _a=(ar+Cr)/2;Na=qt*Math.cos(_a),xa=qt*Math.sin(_a),Ja=Va=null}}else Na=xa=0;if(nn>it&&(Ir=Math.min(Math.abs(nr-qt)/2,+Re.apply(this,arguments)))>.001){Wr=qt<nr^pn?0:1;var di=Ir,ii=Ir;if(nn<Ee){var Ui=Ja==null?[Na,xa]:Pa==null?[Zn,ha]:ei([Zn,ha],[Ja,Va],[Pa,pa],[Na,xa]),yi=Zn-Ui[0],So=ha-Ui[1],yo=Pa-Ui[0],Oo=pa-Ui[1],ys=1/Math.sin(Math.acos((yi*yo+So*Oo)/(Math.sqrt(yi*yi+So*So)*Math.sqrt(yo*yo+Oo*Oo)))/2),as=Math.sqrt(Ui[0]*Ui[0]+Ui[1]*Ui[1]);ii=Math.min(Ir,(qt-as)/(ys-1)),di=Math.min(Ir,(nr-as)/(ys+1))}if(Pa!=null){var xs=Lo(Ja==null?[Na,xa]:[Ja,Va],[Zn,ha],nr,di,pn),oo=Lo([Pa,pa],[Na,xa],nr,di,pn);Ir===di?ui.push("M",xs[0],"A",di,",",di," 0 0,",Wr," ",xs[1],"A",nr,",",nr," 0 ",1-pn^Os(xs[1][0],xs[1][1],oo[1][0],oo[1][1]),",",pn," ",oo[1],"A",di,",",di," 0 0,",Wr," ",oo[0]):ui.push("M",xs[0],"A",di,",",di," 0 1,",Wr," ",oo[0])}else ui.push("M",Zn,",",ha);if(Ja!=null){var eo=Lo([Zn,ha],[Ja,Va],qt,-ii,pn),Za=Lo([Na,xa],Pa==null?[Zn,ha]:[Pa,pa],qt,-ii,pn);Ir===ii?ui.push("L",Za[0],"A",ii,",",ii," 0 0,",Wr," ",Za[1],"A",qt,",",qt," 0 ",pn^Os(Za[1][0],Za[1][1],eo[1][0],eo[1][1]),",",1-pn," ",eo[1],"A",ii,",",ii," 0 0,",Wr," ",eo[0]):ui.push("L",Za[0],"A",ii,",",ii," 0 0,",Wr," ",eo[0])}else ui.push("L",Na,",",xa)}else ui.push("M",Zn,",",ha),Pa!=null&&ui.push("A",nr,",",nr," 0 ",Li,",",pn," ",Pa,",",pa),ui.push("L",Na,",",xa),Ja!=null&&ui.push("A",qt,",",qt," 0 ",Ji,",",1-pn," ",Ja,",",Va);return ui.push("Z"),ui.join("")}function It(qt,nr){return"M0,"+qt+"A"+qt+","+qt+" 0 1,"+nr+" 0,"+-qt+"A"+qt+","+qt+" 0 1,"+nr+" 0,"+qt}return gt.innerRadius=function(qt){return arguments.length?(ce=at(qt),gt):ce},gt.outerRadius=function(qt){return arguments.length?(Te=at(qt),gt):Te},gt.cornerRadius=function(qt){return arguments.length?(Re=at(qt),gt):Re},gt.padRadius=function(qt){return arguments.length?(Ue=qt==li?li:at(qt),gt):Ue},gt.startAngle=function(qt){return arguments.length?(Be=at(qt),gt):Be},gt.endAngle=function(qt){return arguments.length?(Je=at(qt),gt):Je},gt.padAngle=function(qt){return arguments.length?(wt=at(qt),gt):wt},gt.centroid=function(){var qt=(+ce.apply(this,arguments)+ +Te.apply(this,arguments))/2,nr=(+Be.apply(this,arguments)+ +Je.apply(this,arguments))/2-qe;return[Math.cos(nr)*qt,Math.sin(nr)*qt]},gt};var li="auto";function Aa(ce){return ce.innerRadius}function ki(ce){return ce.outerRadius}function _o(ce){return ce.startAngle}function Eo(ce){return ce.endAngle}function gs(ce){return ce&&ce.padAngle}function Os(ce,Te,Re,Ue){return(ce-Re)*Te-(Te-Ue)*ce>0?0:1}function Lo(ce,Te,Re,Ue,Be){var Je=ce[0]-Te[0],wt=ce[1]-Te[1],gt=(Be?Ue:-Ue)/Math.sqrt(Je*Je+wt*wt),It=gt*wt,qt=-gt*Je,nr=ce[0]+It,ar=ce[1]+qt,Cr=Te[0]+It,nn=Te[1]+qt,pn=(nr+Cr)/2,Ir=(ar+nn)/2,Wr=Cr-nr,en=nn-ar,fn=Wr*Wr+en*en,vn=Re-Ue,tn=nr*nn-Cr*ar,Zn=(en<0?-1:1)*Math.sqrt(Math.max(0,vn*vn*fn-tn*tn)),ha=(tn*en-Wr*Zn)/fn,Pa=(-tn*Wr-en*Zn)/fn,pa=(tn*en+Wr*Zn)/fn,Na=(-tn*Wr+en*Zn)/fn,xa=ha-pn,Ja=Pa-Ir,Va=pa-pn,ui=Na-Ir;return xa*xa+Ja*Ja>Va*Va+ui*ui&&(ha=pa,Pa=Na),[[ha-It,Pa-qt],[ha*Re/vn,Pa*Re/vn]]}function sl(){return!0}function Ns(ce){var Te=Kn,Re=ma,Ue=sl,Be=Po,Je=Be.key,wt=.7;function gt(It){var qt=[],nr=[],ar=-1,Cr=It.length,nn,pn=at(Te),Ir=at(Re);function Wr(){qt.push("M",Be(ce(nr),wt))}for(;++ar<Cr;)Ue.call(this,nn=It[ar],ar)?nr.push([+pn.call(this,nn,ar),+Ir.call(this,nn,ar)]):nr.length&&(Wr(),nr=[]);return nr.length&&Wr(),qt.length?qt.join(""):null}return gt.x=function(It){return arguments.length?(Te=It,gt):Te},gt.y=function(It){return arguments.length?(Re=It,gt):Re},gt.defined=function(It){return arguments.length?(Ue=It,gt):Ue},gt.interpolate=function(It){return arguments.length?(typeof It=="function"?Je=Be=It:Je=(Be=zo.get(It)||Po).key,gt):Je},gt.tension=function(It){return arguments.length?(wt=It,gt):wt},gt}m.svg.line=function(){return Ns(D)};var zo=m.map({linear:Po,"linear-closed":Ql,step:du,"step-before":ms,"step-after":Fu,basis:Ss,"basis-open":bl,"basis-closed":zu,bundle:mu,cardinal:$u,"cardinal-open":ql,"cardinal-closed":Hc,monotone:je});zo.forEach(function(ce,Te){Te.key=ce,Te.closed=/-closed$/.test(ce)});function Po(ce){return ce.length>1?ce.join("L"):ce+"Z"}function Ql(ce){return ce.join("L")+"Z"}function du(ce){for(var Te=0,Re=ce.length,Ue=ce[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("H",(Ue[0]+(Ue=ce[Te])[0])/2,"V",Ue[1]);return Re>1&&Be.push("H",Ue[0]),Be.join("")}function ms(ce){for(var Te=0,Re=ce.length,Ue=ce[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("V",(Ue=ce[Te])[1],"H",Ue[0]);return Be.join("")}function Fu(ce){for(var Te=0,Re=ce.length,Ue=ce[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("H",(Ue=ce[Te])[0],"V",Ue[1]);return Be.join("")}function ql(ce,Te){return ce.length<4?Po(ce):ce[1]+gu(ce.slice(1,-1),Ju(ce,Te))}function Hc(ce,Te){return ce.length<3?Ql(ce):ce[0]+gu((ce.push(ce[0]),ce),Ju([ce[ce.length-2]].concat(ce,[ce[1]]),Te))}function $u(ce,Te){return ce.length<3?Po(ce):ce[0]+gu(ce,Ju(ce,Te))}function gu(ce,Te){if(Te.length<1||ce.length!=Te.length&&ce.length!=Te.length+2)return Po(ce);var Re=ce.length!=Te.length,Ue="",Be=ce[0],Je=ce[1],wt=Te[0],gt=wt,It=1;if(Re&&(Ue+="Q"+(Je[0]-wt[0]*2/3)+","+(Je[1]-wt[1]*2/3)+","+Je[0]+","+Je[1],Be=ce[1],It=2),Te.length>1){gt=Te[1],Je=ce[It],It++,Ue+="C"+(Be[0]+wt[0])+","+(Be[1]+wt[1])+","+(Je[0]-gt[0])+","+(Je[1]-gt[1])+","+Je[0]+","+Je[1];for(var qt=2;qt<Te.length;qt++,It++)Je=ce[It],gt=Te[qt],Ue+="S"+(Je[0]-gt[0])+","+(Je[1]-gt[1])+","+Je[0]+","+Je[1]}if(Re){var nr=ce[It];Ue+="Q"+(Je[0]+gt[0]*2/3)+","+(Je[1]+gt[1]*2/3)+","+nr[0]+","+nr[1]}return Ue}function Ju(ce,Te){for(var Re=[],Ue=(1-Te)/2,Be,Je=ce[0],wt=ce[1],gt=1,It=ce.length;++gt<It;)Be=Je,Je=wt,wt=ce[gt],Re.push([Ue*(wt[0]-Be[0]),Ue*(wt[1]-Be[1])]);return Re}function Ss(ce){if(ce.length<3)return Po(ce);var Te=1,Re=ce.length,Ue=ce[0],Be=Ue[0],Je=Ue[1],wt=[Be,Be,Be,(Ue=ce[1])[0]],gt=[Je,Je,Je,Ue[1]],It=[Be,",",Je,"L",jo(ns,wt),",",jo(ns,gt)];for(ce.push(ce[Re-1]);++Te<=Re;)Ue=ce[Te],wt.shift(),wt.push(Ue[0]),gt.shift(),gt.push(Ue[1]),Ou(It,wt,gt);return ce.pop(),It.push("L",Ue),It.join("")}function bl(ce){if(ce.length<4)return Po(ce);for(var Te=[],Re=-1,Ue=ce.length,Be,Je=[0],wt=[0];++Re<3;)Be=ce[Re],Je.push(Be[0]),wt.push(Be[1]);for(Te.push(jo(ns,Je)+","+jo(ns,wt)),--Re;++Re<Ue;)Be=ce[Re],Je.shift(),Je.push(Be[0]),wt.shift(),wt.push(Be[1]),Ou(Te,Je,wt);return Te.join("")}function zu(ce){for(var Te,Re=-1,Ue=ce.length,Be=Ue+4,Je,wt=[],gt=[];++Re<4;)Je=ce[Re%Ue],wt.push(Je[0]),gt.push(Je[1]);for(Te=[jo(ns,wt),",",jo(ns,gt)],--Re;++Re<Be;)Je=ce[Re%Ue],wt.shift(),wt.push(Je[0]),gt.shift(),gt.push(Je[1]),Ou(Te,wt,gt);return Te.join("")}function mu(ce,Te){var Re=ce.length-1;if(Re)for(var Ue=ce[0][0],Be=ce[0][1],Je=ce[Re][0]-Ue,wt=ce[Re][1]-Be,gt=-1,It,qt;++gt<=Re;)It=ce[gt],qt=gt/Re,It[0]=Te*It[0]+(1-Te)*(Ue+qt*Je),It[1]=Te*It[1]+(1-Te)*(Be+qt*wt);return Ss(ce)}function jo(ce,Te){return ce[0]*Te[0]+ce[1]*Te[1]+ce[2]*Te[2]+ce[3]*Te[3]}var Qu=[0,2/3,1/3,0],Sc=[0,1/3,2/3,0],ns=[0,1/6,2/3,1/6];function Ou(ce,Te,Re){ce.push("C",jo(Qu,Te),",",jo(Qu,Re),",",jo(Sc,Te),",",jo(Sc,Re),",",jo(ns,Te),",",jo(ns,Re))}function Nu(ce,Te){return(Te[1]-ce[1])/(Te[0]-ce[0])}function qu(ce){for(var Te=0,Re=ce.length-1,Ue=[],Be=ce[0],Je=ce[1],wt=Ue[0]=Nu(Be,Je);++Te<Re;)Ue[Te]=(wt+(wt=Nu(Be=Je,Je=ce[Te+1])))/2;return Ue[Te]=wt,Ue}function Oe(ce){for(var Te=[],Re,Ue,Be,Je,wt=qu(ce),gt=-1,It=ce.length-1;++gt<It;)Re=Nu(ce[gt],ce[gt+1]),l(Re)<it?wt[gt]=wt[gt+1]=0:(Ue=wt[gt]/Re,Be=wt[gt+1]/Re,Je=Ue*Ue+Be*Be,Je>9&&(Je=Re*3/Math.sqrt(Je),wt[gt]=Je*Ue,wt[gt+1]=Je*Be));for(gt=-1;++gt<=It;)Je=(ce[Math.min(It,gt+1)][0]-ce[Math.max(0,gt-1)][0])/(6*(1+wt[gt]*wt[gt])),Te.push([Je||0,wt[gt]*Je||0]);return Te}function je(ce){return ce.length<3?Po(ce):ce[0]+gu(ce,Oe(ce))}m.svg.line.radial=function(){var ce=Ns(nt);return ce.radius=ce.x,delete ce.x,ce.angle=ce.y,delete ce.y,ce};function nt(ce){for(var Te,Re=-1,Ue=ce.length,Be,Je;++Re<Ue;)Te=ce[Re],Be=Te[0],Je=Te[1]-qe,Te[0]=Be*Math.cos(Je),Te[1]=Be*Math.sin(Je);return ce}function ut(ce){var Te=Kn,Re=Kn,Ue=0,Be=ma,Je=sl,wt=Po,gt=wt.key,It=wt,qt="L",nr=.7;function ar(Cr){var nn=[],pn=[],Ir=[],Wr=-1,en=Cr.length,fn,vn=at(Te),tn=at(Ue),Zn=Te===Re?function(){return Pa}:at(Re),ha=Ue===Be?function(){return pa}:at(Be),Pa,pa;function Na(){nn.push("M",wt(ce(Ir),nr),qt,It(ce(pn.reverse()),nr),"Z")}for(;++Wr<en;)Je.call(this,fn=Cr[Wr],Wr)?(pn.push([Pa=+vn.call(this,fn,Wr),pa=+tn.call(this,fn,Wr)]),Ir.push([+Zn.call(this,fn,Wr),+ha.call(this,fn,Wr)])):pn.length&&(Na(),pn=[],Ir=[]);return pn.length&&Na(),nn.length?nn.join(""):null}return ar.x=function(Cr){return arguments.length?(Te=Re=Cr,ar):Re},ar.x0=function(Cr){return arguments.length?(Te=Cr,ar):Te},ar.x1=function(Cr){return arguments.length?(Re=Cr,ar):Re},ar.y=function(Cr){return arguments.length?(Ue=Be=Cr,ar):Be},ar.y0=function(Cr){return arguments.length?(Ue=Cr,ar):Ue},ar.y1=function(Cr){return arguments.length?(Be=Cr,ar):Be},ar.defined=function(Cr){return arguments.length?(Je=Cr,ar):Je},ar.interpolate=function(Cr){return arguments.length?(typeof Cr=="function"?gt=wt=Cr:gt=(wt=zo.get(Cr)||Po).key,It=wt.reverse||wt,qt=wt.closed?"M":"L",ar):gt},ar.tension=function(Cr){return arguments.length?(nr=Cr,ar):nr},ar}ms.reverse=Fu,Fu.reverse=ms,m.svg.area=function(){return ut(D)},m.svg.area.radial=function(){var ce=ut(nt);return ce.radius=ce.x,delete ce.x,ce.innerRadius=ce.x0,delete ce.x0,ce.outerRadius=ce.x1,delete ce.x1,ce.angle=ce.y,delete ce.y,ce.startAngle=ce.y0,delete ce.y0,ce.endAngle=ce.y1,delete ce.y1,ce};function Tt(ce){return ce.source}function _t(ce){return ce.target}m.svg.chord=function(){var ce=Tt,Te=_t,Re=kt,Ue=_o,Be=Eo;function Je(nr,ar){var Cr=wt(this,ce,nr,ar),nn=wt(this,Te,nr,ar);return"M"+Cr.p0+It(Cr.r,Cr.p1,Cr.a1-Cr.a0)+(gt(Cr,nn)?qt(Cr.r,Cr.p1,Cr.r,Cr.p0):qt(Cr.r,Cr.p1,nn.r,nn.p0)+It(nn.r,nn.p1,nn.a1-nn.a0)+qt(nn.r,nn.p1,Cr.r,Cr.p0))+"Z"}function wt(nr,ar,Cr,nn){var pn=ar.call(nr,Cr,nn),Ir=Re.call(nr,pn,nn),Wr=Ue.call(nr,pn,nn)-qe,en=Be.call(nr,pn,nn)-qe;return{r:Ir,a0:Wr,a1:en,p0:[Ir*Math.cos(Wr),Ir*Math.sin(Wr)],p1:[Ir*Math.cos(en),Ir*Math.sin(en)]}}function gt(nr,ar){return nr.a0==ar.a0&&nr.a1==ar.a1}function It(nr,ar,Cr){return"A"+nr+","+nr+" 0 "+ +(Cr>Ee)+",1 "+ar}function qt(nr,ar,Cr,nn){return"Q 0,0 "+nn}return Je.radius=function(nr){return arguments.length?(Re=at(nr),Je):Re},Je.source=function(nr){return arguments.length?(ce=at(nr),Je):ce},Je.target=function(nr){return arguments.length?(Te=at(nr),Je):Te},Je.startAngle=function(nr){return arguments.length?(Ue=at(nr),Je):Ue},Je.endAngle=function(nr){return arguments.length?(Be=at(nr),Je):Be},Je};function kt(ce){return ce.radius}m.svg.diagonal=function(){var ce=Tt,Te=_t,Re=vr;function Ue(Be,Je){var wt=ce.call(this,Be,Je),gt=Te.call(this,Be,Je),It=(wt.y+gt.y)/2,qt=[wt,{x:wt.x,y:It},{x:gt.x,y:It},gt];return qt=qt.map(Re),"M"+qt[0]+"C"+qt[1]+" "+qt[2]+" "+qt[3]}return Ue.source=function(Be){return arguments.length?(ce=at(Be),Ue):ce},Ue.target=function(Be){return arguments.length?(Te=at(Be),Ue):Te},Ue.projection=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue};function vr(ce){return[ce.x,ce.y]}m.svg.diagonal.radial=function(){var ce=m.svg.diagonal(),Te=vr,Re=ce.projection;return ce.projection=function(Ue){return arguments.length?Re(mr(Te=Ue)):Te},ce};function mr(ce){return function(){var Te=ce.apply(this,arguments),Re=Te[0],Ue=Te[1]-qe;return[Re*Math.cos(Ue),Re*Math.sin(Ue)]}}m.svg.symbol=function(){var ce=Tr,Te=fr;function Re(Ue,Be){return(Qr.get(ce.call(this,Ue,Be))||zr)(Te.call(this,Ue,Be))}return Re.type=function(Ue){return arguments.length?(ce=at(Ue),Re):ce},Re.size=function(Ue){return arguments.length?(Te=at(Ue),Re):Te},Re};function fr(){return 64}function Tr(){return"circle"}function zr(ce){var Te=Math.sqrt(ce/Ee);return"M0,"+Te+"A"+Te+","+Te+" 0 1,1 0,"+-Te+"A"+Te+","+Te+" 0 1,1 0,"+Te+"Z"}var Qr=m.map({circle:zr,cross:function(ce){var Te=Math.sqrt(ce/5)/2;return"M"+-3*Te+","+-Te+"H"+-Te+"V"+-3*Te+"H"+Te+"V"+-Te+"H"+3*Te+"V"+Te+"H"+Te+"V"+3*Te+"H"+-Te+"V"+Te+"H"+-3*Te+"Z"},diamond:function(ce){var Te=Math.sqrt(ce/(2*En)),Re=Te*En;return"M0,"+-Te+"L"+Re+",0 0,"+Te+" "+-Re+",0Z"},square:function(ce){var Te=Math.sqrt(ce)/2;return"M"+-Te+","+-Te+"L"+Te+","+-Te+" "+Te+","+Te+" "+-Te+","+Te+"Z"},"triangle-down":function(ce){var Te=Math.sqrt(ce/on),Re=Te*on/2;return"M0,"+Re+"L"+Te+","+-Re+" "+-Te+","+-Re+"Z"},"triangle-up":function(ce){var Te=Math.sqrt(ce/on),Re=Te*on/2;return"M0,"+-Re+"L"+Te+","+Re+" "+-Te+","+Re+"Z"}});m.svg.symbolTypes=Qr.keys();var on=Math.sqrt(3),En=Math.tan(30*At);re.transition=function(ce){for(var Te=qa||++ni,Re=et(ce),Ue=[],Be,Je,wt=ai||{time:Date.now(),ease:ko,delay:0,duration:250},gt=-1,It=this.length;++gt<It;){Ue.push(Be=[]);for(var qt=this[gt],nr=-1,ar=qt.length;++nr<ar;)(Je=qt[nr])&&$t(Je,nr,Re,Te,wt),Be.push(Je)}return Ta(Ue,Re,Te)},re.interrupt=function(ce){return this.each(ce==null?Nn:$n(et(ce)))};var Nn=$n(et());function $n(ce){return function(){var Te,Re,Ue;(Te=this[ce])&&(Ue=Te[Re=Te.active])&&(Ue.timer.c=null,Ue.timer.t=NaN,--Te.count?delete Te[Re]:delete this[ce],Te.active+=.5,Ue.event&&Ue.event.interrupt.call(this,this.__data__,Ue.index))}}function Ta(ce,Te,Re){return K(ce,Ea),ce.namespace=Te,ce.id=Re,ce}var Ea=[],ni=0,qa,ai;Ea.call=re.call,Ea.empty=re.empty,Ea.node=re.node,Ea.size=re.size,m.transition=function(ce,Te){return ce&&ce.transition?qa?ce.transition(Te):ce:m.selection().transition(ce)},m.transition.prototype=Ea,Ea.select=function(ce){var Te=this.id,Re=this.namespace,Ue=[],Be,Je,wt;ce=Z(ce);for(var gt=-1,It=this.length;++gt<It;){Ue.push(Be=[]);for(var qt=this[gt],nr=-1,ar=qt.length;++nr<ar;)(wt=qt[nr])&&(Je=ce.call(wt,wt.__data__,nr,gt))?("__data__"in wt&&(Je.__data__=wt.__data__),$t(Je,nr,Re,Te,wt[Re][Te]),Be.push(Je)):Be.push(null)}return Ta(Ue,Re,Te)},Ea.selectAll=function(ce){var Te=this.id,Re=this.namespace,Ue=[],Be,Je,wt,gt,It;ce=Q(ce);for(var qt=-1,nr=this.length;++qt<nr;)for(var ar=this[qt],Cr=-1,nn=ar.length;++Cr<nn;)if(wt=ar[Cr]){It=wt[Re][Te],Je=ce.call(wt,wt.__data__,Cr,qt),Ue.push(Be=[]);for(var pn=-1,Ir=Je.length;++pn<Ir;)(gt=Je[pn])&&$t(gt,pn,Re,Te,It),Be.push(gt)}return Ta(Ue,Re,Te)},Ea.filter=function(ce){var Te=[],Re,Ue,Be;typeof ce!="function"&&(ce=Ae(ce));for(var Je=0,wt=this.length;Je<wt;Je++){Te.push(Re=[]);for(var Ue=this[Je],gt=0,It=Ue.length;gt<It;gt++)(Be=Ue[gt])&&ce.call(Be,Be.__data__,gt,Je)&&Re.push(Be)}return Ta(Te,this.namespace,this.id)},Ea.tween=function(ce,Te){var Re=this.id,Ue=this.namespace;return arguments.length<2?this.node()[Ue][Re].tween.get(ce):Ze(this,Te==null?function(Be){Be[Ue][Re].tween.remove(ce)}:function(Be){Be[Ue][Re].tween.set(ce,Te)})};function Ti(ce,Te,Re,Ue){var Be=ce.id,Je=ce.namespace;return Ze(ce,typeof Re=="function"?function(wt,gt,It){wt[Je][Be].tween.set(Te,Ue(Re.call(wt,wt.__data__,gt,It)))}:(Re=Ue(Re),function(wt){wt[Je][Be].tween.set(Te,Re)}))}Ea.attr=function(ce,Te){if(arguments.length<2){for(Te in ce)this.attr(Te,ce[Te]);return this}var Re=ce=="transform"?Kl:go,Ue=m.ns.qualify(ce);function Be(){this.removeAttribute(Ue)}function Je(){this.removeAttributeNS(Ue.space,Ue.local)}function wt(It){return It==null?Be:(It+="",function(){var qt=this.getAttribute(Ue),nr;return qt!==It&&(nr=Re(qt,It),function(ar){this.setAttribute(Ue,nr(ar))})})}function gt(It){return It==null?Je:(It+="",function(){var qt=this.getAttributeNS(Ue.space,Ue.local),nr;return qt!==It&&(nr=Re(qt,It),function(ar){this.setAttributeNS(Ue.space,Ue.local,nr(ar))})})}return Ti(this,"attr."+ce,Te,Ue.local?gt:wt)},Ea.attrTween=function(ce,Te){var Re=m.ns.qualify(ce);function Ue(Je,wt){var gt=Te.call(this,Je,wt,this.getAttribute(Re));return gt&&function(It){this.setAttribute(Re,gt(It))}}function Be(Je,wt){var gt=Te.call(this,Je,wt,this.getAttributeNS(Re.space,Re.local));return gt&&function(It){this.setAttributeNS(Re.space,Re.local,gt(It))}}return this.tween("attr."+ce,Re.local?Be:Ue)},Ea.style=function(ce,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof ce!="string"){Ue<2&&(Te="");for(Re in ce)this.style(Re,ce[Re],Te);return this}Re=""}function Be(){this.style.removeProperty(ce)}function Je(wt){return wt==null?Be:(wt+="",function(){var gt=a(this).getComputedStyle(this,null).getPropertyValue(ce),It;return gt!==wt&&(It=go(gt,wt),function(qt){this.style.setProperty(ce,It(qt),Re)})})}return Ti(this,"style."+ce,Te,Je)},Ea.styleTween=function(ce,Te,Re){arguments.length<3&&(Re="");function Ue(Be,Je){var wt=Te.call(this,Be,Je,a(this).getComputedStyle(this,null).getPropertyValue(ce));return wt&&function(gt){this.style.setProperty(ce,wt(gt),Re)}}return this.tween("style."+ce,Ue)},Ea.text=function(ce){return Ti(this,"text",ce,Yr)};function Yr(ce){return ce==null&&(ce=""),function(){this.textContent=ce}}Ea.remove=function(){var ce=this.namespace;return this.each("end.transition",function(){var Te;this[ce].count<2&&(Te=this.parentNode)&&Te.removeChild(this)})},Ea.ease=function(ce){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].ease:(typeof ce!="function"&&(ce=m.ease.apply(m,arguments)),Ze(this,function(Ue){Ue[Re][Te].ease=ce}))},Ea.delay=function(ce){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].delay:Ze(this,typeof ce=="function"?function(Ue,Be,Je){Ue[Re][Te].delay=+ce.call(Ue,Ue.__data__,Be,Je)}:(ce=+ce,function(Ue){Ue[Re][Te].delay=ce}))},Ea.duration=function(ce){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].duration:Ze(this,typeof ce=="function"?function(Ue,Be,Je){Ue[Re][Te].duration=Math.max(1,ce.call(Ue,Ue.__data__,Be,Je))}:(ce=Math.max(1,ce),function(Ue){Ue[Re][Te].duration=ce}))},Ea.each=function(ce,Te){var Re=this.id,Ue=this.namespace;if(arguments.length<2){var Be=ai,Je=qa;try{qa=Re,Ze(this,function(wt,gt,It){ai=wt[Ue][Re],ce.call(wt,wt.__data__,gt,It)})}finally{ai=Be,qa=Je}}else Ze(this,function(wt){var gt=wt[Ue][Re];(gt.event||(gt.event=m.dispatch("start","end","interrupt"))).on(ce,Te)});return this},Ea.transition=function(){for(var ce=this.id,Te=++ni,Re=this.namespace,Ue=[],Be,Je,wt,gt,It=0,qt=this.length;It<qt;It++){Ue.push(Be=[]);for(var Je=this[It],nr=0,ar=Je.length;nr<ar;nr++)(wt=Je[nr])&&(gt=wt[Re][ce],$t(wt,nr,Re,Te,{time:gt.time,ease:gt.ease,delay:gt.delay+gt.duration,duration:gt.duration})),Be.push(wt)}return Ta(Ue,Re,Te)};function et(ce){return ce==null?"__transition__":"__transition_"+ce+"__"}function $t(ce,Te,Re,Ue,Be){var Je=ce[Re]||(ce[Re]={active:0,count:0}),wt=Je[Ue],gt,It,qt,nr,ar;function Cr(Ir){var Wr=wt.delay;if(It.t=Wr+gt,Wr<=Ir)return nn(Ir-Wr);It.c=nn}function nn(Ir){var Wr=Je.active,en=Je[Wr];en&&(en.timer.c=null,en.timer.t=NaN,--Je.count,delete Je[Wr],en.event&&en.event.interrupt.call(ce,ce.__data__,en.index));for(var fn in Je)if(+fn<Ue){var vn=Je[fn];vn.timer.c=null,vn.timer.t=NaN,--Je.count,delete Je[fn]}It.c=pn,mn(function(){return It.c&&pn(Ir||1)&&(It.c=null,It.t=NaN),1},0,gt),Je.active=Ue,wt.event&&wt.event.start.call(ce,ce.__data__,Te),ar=[],wt.tween.forEach(function(tn,Zn){(Zn=Zn.call(ce,ce.__data__,Te))&&ar.push(Zn)}),nr=wt.ease,qt=wt.duration}function pn(Ir){for(var Wr=Ir/qt,en=nr(Wr),fn=ar.length;fn>0;)ar[--fn].call(ce,en);if(Wr>=1)return wt.event&&wt.event.end.call(ce,ce.__data__,Te),--Je.count?delete Je[Ue]:delete ce[Re],1}wt||(gt=Be.time,It=mn(Cr,0,gt),wt=Je[Ue]={tween:new M,time:gt,timer:It,delay:Be.delay,duration:Be.duration,ease:Be.ease,index:Te},Be=null,++Je.count)}m.svg.axis=function(){var ce=m.scale.linear(),Te=Kr,Re=6,Ue=6,Be=3,Je=[10],wt=null,gt;function It(qt){qt.each(function(){var nr=m.select(this),ar=this.__chart__||ce,Cr=this.__chart__=ce.copy(),nn=wt==null?Cr.ticks?Cr.ticks.apply(Cr,Je):Cr.domain():wt,pn=gt==null?Cr.tickFormat?Cr.tickFormat.apply(Cr,Je):D:gt,Ir=nr.selectAll(".tick").data(nn,Cr),Wr=Ir.enter().insert("g",".domain").attr("class","tick").style("opacity",it),en=m.transition(Ir.exit()).style("opacity",it).remove(),fn=m.transition(Ir.order()).style("opacity",1),vn=Math.max(Re,0)+Be,tn,Zn=ln(Cr),ha=nr.selectAll(".domain").data([0]),Pa=(ha.enter().append("path").attr("class","domain"),m.transition(ha));Wr.append("line"),Wr.append("text");var pa=Wr.select("line"),Na=fn.select("line"),xa=Ir.select("text").text(pn),Ja=Wr.select("text"),Va=fn.select("text"),ui=Te==="top"||Te==="left"?-1:1,Li,Do,Ji,_a;if(Te==="bottom"||Te==="top"?(tn=ta,Li="x",Ji="y",Do="x2",_a="y2",xa.attr("dy",ui<0?"0em":".71em").style("text-anchor","middle"),Pa.attr("d","M"+Zn[0]+","+ui*Ue+"V0H"+Zn[1]+"V"+ui*Ue)):(tn=ea,Li="y",Ji="x",Do="y2",_a="x2",xa.attr("dy",".32em").style("text-anchor",ui<0?"end":"start"),Pa.attr("d","M"+ui*Ue+","+Zn[0]+"H0V"+Zn[1]+"H"+ui*Ue)),pa.attr(_a,ui*Re),Ja.attr(Ji,ui*vn),Na.attr(Do,0).attr(_a,ui*Re),Va.attr(Li,0).attr(Ji,ui*vn),Cr.rangeBand){var di=Cr,ii=di.rangeBand()/2;ar=Cr=function(Ui){return di(Ui)+ii}}else ar.rangeBand?ar=Cr:en.call(tn,Cr,ar);Wr.call(tn,ar,Cr),fn.call(tn,Cr,Cr)})}return It.scale=function(qt){return arguments.length?(ce=qt,It):ce},It.orient=function(qt){return arguments.length?(Te=qt in Hn?qt+"":Kr,It):Te},It.ticks=function(){return arguments.length?(Je=A(arguments),It):Je},It.tickValues=function(qt){return arguments.length?(wt=qt,It):wt},It.tickFormat=function(qt){return arguments.length?(gt=qt,It):gt},It.tickSize=function(qt){var nr=arguments.length;return nr?(Re=+qt,Ue=+arguments[nr-1],It):Re},It.innerTickSize=function(qt){return arguments.length?(Re=+qt,It):Re},It.outerTickSize=function(qt){return arguments.length?(Ue=+qt,It):Ue},It.tickPadding=function(qt){return arguments.length?(Be=+qt,It):Be},It.tickSubdivide=function(){return arguments.length&&It},It};var Kr="bottom",Hn={top:1,right:1,bottom:1,left:1};function ta(ce,Te,Re){ce.attr("transform",function(Ue){var Be=Te(Ue);return"translate("+(isFinite(Be)?Be:Re(Ue))+",0)"})}function ea(ce,Te,Re){ce.attr("transform",function(Ue){var Be=Te(Ue);return"translate(0,"+(isFinite(Be)?Be:Re(Ue))+")"})}m.svg.brush=function(){var ce=ie(nr,"brushstart","brush","brushend"),Te=null,Re=null,Ue=[0,0],Be=[0,0],Je,wt,gt=!0,It=!0,qt=Di[0];function nr(Ir){Ir.each(function(){var Wr=m.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",pn).on("touchstart.brush",pn),en=Wr.selectAll(".background").data([0]);en.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Wr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var fn=Wr.selectAll(".resize").data(qt,D);fn.exit().remove(),fn.enter().append("g").attr("class",function(ha){return"resize "+ha}).style("cursor",function(ha){return vi[ha]}).append("rect").attr("x",function(ha){return/[ew]$/.test(ha)?-3:null}).attr("y",function(ha){return/^[ns]/.test(ha)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),fn.style("display",nr.empty()?"none":null);var vn=m.transition(Wr),tn=m.transition(en),Zn;Te&&(Zn=ln(Te),tn.attr("x",Zn[0]).attr("width",Zn[1]-Zn[0]),Cr(vn)),Re&&(Zn=ln(Re),tn.attr("y",Zn[0]).attr("height",Zn[1]-Zn[0]),nn(vn)),ar(vn)})}nr.event=function(Ir){Ir.each(function(){var Wr=ce.of(this,arguments),en={x:Ue,y:Be,i:Je,j:wt},fn=this.__chart__||en;this.__chart__=en,qa?m.select(this).transition().each("start.brush",function(){Je=fn.i,wt=fn.j,Ue=fn.x,Be=fn.y,Wr({type:"brushstart"})}).tween("brush:brush",function(){var vn=ao(Ue,en.x),tn=ao(Be,en.y);return Je=wt=null,function(Zn){Ue=en.x=vn(Zn),Be=en.y=tn(Zn),Wr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Je=en.i,wt=en.j,Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"})}):(Wr({type:"brushstart"}),Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"}))})};function ar(Ir){Ir.selectAll(".resize").attr("transform",function(Wr){return"translate("+Ue[+/e$/.test(Wr)]+","+Be[+/^s/.test(Wr)]+")"})}function Cr(Ir){Ir.select(".extent").attr("x",Ue[0]),Ir.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function nn(Ir){Ir.select(".extent").attr("y",Be[0]),Ir.selectAll(".extent,.e>rect,.w>rect").attr("height",Be[1]-Be[0])}function pn(){var Ir=this,Wr=m.select(m.event.target),en=ce.of(Ir,arguments),fn=m.select(Ir),vn=Wr.datum(),tn=!/^(n|s)$/.test(vn)&&Te,Zn=!/^(e|w)$/.test(vn)&&Re,ha=Wr.classed("extent"),Pa=jt(Ir),pa,Na=m.mouse(Ir),xa,Ja=m.select(a(Ir)).on("keydown.brush",Li).on("keyup.brush",Do);if(m.event.changedTouches?Ja.on("touchmove.brush",Ji).on("touchend.brush",di):Ja.on("mousemove.brush",Ji).on("mouseup.brush",di),fn.interrupt().selectAll("*").interrupt(),ha)Na[0]=Ue[0]-Na[0],Na[1]=Be[0]-Na[1];else if(vn){var Va=+/w$/.test(vn),ui=+/^n/.test(vn);xa=[Ue[1-Va]-Na[0],Be[1-ui]-Na[1]],Na[0]=Ue[Va],Na[1]=Be[ui]}else m.event.altKey&&(pa=Na.slice());fn.style("pointer-events","none").selectAll(".resize").style("display",null),m.select("body").style("cursor",Wr.style("cursor")),en({type:"brushstart"}),Ji();function Li(){m.event.keyCode==32&&(ha||(pa=null,Na[0]-=Ue[1],Na[1]-=Be[1],ha=2),j())}function Do(){m.event.keyCode==32&&ha==2&&(Na[0]+=Ue[1],Na[1]+=Be[1],ha=0,j())}function Ji(){var ii=m.mouse(Ir),Ui=!1;xa&&(ii[0]+=xa[0],ii[1]+=xa[1]),ha||(m.event.altKey?(pa||(pa=[(Ue[0]+Ue[1])/2,(Be[0]+Be[1])/2]),Na[0]=Ue[+(ii[0]<pa[0])],Na[1]=Be[+(ii[1]<pa[1])]):pa=null),tn&&_a(ii,Te,0)&&(Cr(fn),Ui=!0),Zn&&_a(ii,Re,1)&&(nn(fn),Ui=!0),Ui&&(ar(fn),en({type:"brush",mode:ha?"move":"resize"}))}function _a(ii,Ui,yi){var So=ln(Ui),yo=So[0],Oo=So[1],ys=Na[yi],as=yi?Be:Ue,xs=as[1]-as[0],oo,eo;if(ha&&(yo-=ys,Oo-=xs+ys),oo=(yi?It:gt)?Math.max(yo,Math.min(Oo,ii[yi])):ii[yi],ha?eo=(oo+=ys)+xs:(pa&&(ys=Math.max(yo,Math.min(Oo,2*pa[yi]-oo))),ys<oo?(eo=oo,oo=ys):eo=ys),as[0]!=oo||as[1]!=eo)return yi?wt=null:Je=null,as[0]=oo,as[1]=eo,!0}function di(){Ji(),fn.style("pointer-events","all").selectAll(".resize").style("display",nr.empty()?"none":null),m.select("body").style("cursor",null),Ja.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Pa(),en({type:"brushend"})}}return nr.x=function(Ir){return arguments.length?(Te=Ir,qt=Di[!Te<<1|!Re],nr):Te},nr.y=function(Ir){return arguments.length?(Re=Ir,qt=Di[!Te<<1|!Re],nr):Re},nr.clamp=function(Ir){return arguments.length?(Te&&Re?(gt=!!Ir[0],It=!!Ir[1]):Te?gt=!!Ir:Re&&(It=!!Ir),nr):Te&&Re?[gt,It]:Te?gt:Re?It:null},nr.extent=function(Ir){var Wr,en,fn,vn,tn;return arguments.length?(Te&&(Wr=Ir[0],en=Ir[1],Re&&(Wr=Wr[0],en=en[0]),Je=[Wr,en],Te.invert&&(Wr=Te(Wr),en=Te(en)),en<Wr&&(tn=Wr,Wr=en,en=tn),(Wr!=Ue[0]||en!=Ue[1])&&(Ue=[Wr,en])),Re&&(fn=Ir[0],vn=Ir[1],Te&&(fn=fn[1],vn=vn[1]),wt=[fn,vn],Re.invert&&(fn=Re(fn),vn=Re(vn)),vn<fn&&(tn=fn,fn=vn,vn=tn),(fn!=Be[0]||vn!=Be[1])&&(Be=[fn,vn])),nr):(Te&&(Je?(Wr=Je[0],en=Je[1]):(Wr=Ue[0],en=Ue[1],Te.invert&&(Wr=Te.invert(Wr),en=Te.invert(en)),en<Wr&&(tn=Wr,Wr=en,en=tn))),Re&&(wt?(fn=wt[0],vn=wt[1]):(fn=Be[0],vn=Be[1],Re.invert&&(fn=Re.invert(fn),vn=Re.invert(vn)),vn<fn&&(tn=fn,fn=vn,vn=tn))),Te&&Re?[[Wr,fn],[en,vn]]:Te?[Wr,en]:Re&&[fn,vn])},nr.clear=function(){return nr.empty()||(Ue=[0,0],Be=[0,0],Je=wt=null),nr},nr.empty=function(){return!!Te&&Ue[0]==Ue[1]||!!Re&&Be[0]==Be[1]},m.rebind(nr,ce,"on")};var vi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Di=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];m.text=Rt(function(ce){return ce.responseText}),m.json=function(ce,Te){return Kt(ce,"application/json",$i,Te)};function $i(ce){return JSON.parse(ce.responseText)}m.html=function(ce,Te){return Kt(ce,"text/html",Ri,Te)};function Ri(ce){var Te=T.createRange();return Te.selectNode(T.body),Te.createContextualFragment(ce.responseText)}m.xml=Rt(function(ce){return ce.responseXML}),typeof N=="object"&&N.exports?N.exports=m:this.d3=m}).apply(self)},{}],59:[function(t,N,V){N.exports=t("./quad")},{"./quad":60}],60:[function(t,N,V){var m=t("binary-search-bounds"),u=t("clamp"),A=t("parse-rect"),T=t("array-bounds"),e=t("pick-by-alias"),a=t("defined"),i=t("flatten-vertex-data"),n=t("is-obj"),r=t("dtype"),v=t("math-log2"),s=1073741824;N.exports=function(g,d){d||(d={}),g=i(g,"float64"),d=e(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var f=a(d.maxDepth,255),y=a(d.bounds,T(g,2));y[0]===y[2]&&y[2]++,y[1]===y[3]&&y[3]++;var l=o(g,y),x=g.length>>>1,c;d.dtype||(d.dtype="array"),typeof d.dtype=="string"?c=new(r(d.dtype))(x):d.dtype&&(c=d.dtype,Array.isArray(c)&&(c.length=x));for(var M=0;M<x;++M)c[M]=M;var w=[],p=[],_=[],h=[];D(0,0,1,c,0,1);for(var L=0,E=0;E<w.length;E++){var S=w[E];if(c.set)c.set(S,L);else for(var P=0,F=S.length;P<F;P++)c[P+L]=S[P];var I=L+w[E].length;h[E]=[L,I],L=I}return c.range=R,c;function D(G,Y,ee,j,X,ie){if(!j.length)return null;var he=w[X]||(w[X]=[]),K=_[X]||(_[X]=[]),$=p[X]||(p[X]=[]),U=he.length;if(X++,X>f||ie>s){for(var H=0;H<j.length;H++)he.push(j[H]),K.push(ie),$.push(null,null,null,null);return U}if(he.push(j[0]),K.push(ie),j.length<=1)return $.push(null,null,null,null),U;for(var q=ee*.5,re=G+q,Z=Y+q,Q=[],oe=[],se=[],ae=[],le=1,_e=j.length;le<_e;le++){var fe=j[le],me=l[fe*2],xe=l[fe*2+1];me<re?xe<Z?Q.push(fe):oe.push(fe):xe<Z?se.push(fe):ae.push(fe)}return ie<<=2,$.push(D(G,Y,q,Q,X,ie),D(G,Z,q,oe,X,ie+1),D(re,Y,q,se,X,ie+2),D(re,Z,q,ae,X,ie+3)),U}function R(){for(var G=[],Y=arguments.length;Y--;)G[Y]=arguments[Y];var ee;if(n(G[G.length-1])){var j=G.pop();!G.length&&(j.x!=null||j.l!=null||j.left!=null)&&(G=[j],ee={}),ee=e(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else ee={};G.length||(G=y);var X=A.apply(void 0,G),ie=[Math.min(X.x,X.x+X.width),Math.min(X.y,X.y+X.height),Math.max(X.x,X.x+X.width),Math.max(X.y,X.y+X.height)],he=ie[0],K=ie[1],$=ie[2],U=ie[3],H=o([he,K,$,U],y),q=H[0],re=H[1],Z=H[2],Q=H[3],oe=a(ee.level,w.length);if(ee.d!=null){var se;typeof ee.d=="number"?se=[ee.d,ee.d]:ee.d.length&&(se=ee.d),oe=Math.min(Math.max(Math.ceil(-v(Math.abs(se[0])/(y[2]-y[0]))),Math.ceil(-v(Math.abs(se[1])/(y[3]-y[1])))),oe)}if(oe=Math.min(oe,w.length),ee.lod)return O(q,re,Z,Q,oe);var ae=[];le(0,0,1,0,0,1);function le(fe,me,xe,ye,be,ke){if(!(be===null||ke===null)){var De=fe+xe,He=me+xe;if(!(q>De||re>He||Z<fe||Q<me)&&!(ye>=oe)&&be!==ke){var Ae=w[ye];ke===void 0&&(ke=Ae.length);for(var Le=be;Le<ke;Le++){var Ze=Ae[Le],We=g[Ze*2],ze=g[Ze*2+1];We>=he&&We<=$&&ze>=K&&ze<=U&&ae.push(Ze)}var Ie=p[ye],Ve=Ie[be*4+0],dt=Ie[be*4+1],Ft=Ie[be*4+2],Qt=Ie[be*4+3],Ot=_e(Ie,be+1),Ct=xe*.5,jt=ye+1;le(fe,me,Ct,jt,Ve,dt||Ft||Qt||Ot),le(fe,me+Ct,Ct,jt,dt,Ft||Qt||Ot),le(fe+Ct,me,Ct,jt,Ft,Qt||Ot),le(fe+Ct,me+Ct,Ct,jt,Qt,Ot)}}}function _e(fe,me){for(var xe=null,ye=0;xe===null;)if(xe=fe[me*4+ye],ye++,ye>fe.length)return null;return xe}return ae}function O(G,Y,ee,j,X){for(var ie=[],he=0;he<X;he++){var K=_[he],$=h[he][0],U=z(G,Y,he),H=z(ee,j,he),q=m.ge(K,U),re=m.gt(K,H,q,K.length-1);ie[he]=[q+$,re+$]}return ie}function z(G,Y,ee){for(var j=1,X=.5,ie=.5,he=.5,K=0;K<ee;K++)j<<=2,j+=G<X?Y<ie?0:1:Y<ie?2:3,he*=.5,X+=G<X?-he:he,ie+=Y<ie?-he:he;return j}};function o(b,g){for(var d=g[0],f=g[1],y=g[2],l=g[3],x=1/(y-d),c=1/(l-f),M=new Array(b.length),w=0,p=b.length/2;w<p;w++)M[2*w]=u((b[2*w]-d)*x,0,1),M[2*w+1]=u((b[2*w+1]-f)*c,0,1);return M}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/meta"),u=6378137;function A(n){return m.geomReduce(n,function(r,v){return r+T(v)},0)}V.default=A;function T(n){var r=0,v;switch(n.type){case"Polygon":return e(n.coordinates);case"MultiPolygon":for(v=0;v<n.coordinates.length;v++)r+=e(n.coordinates[v]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(n){var r=0;if(n&&n.length>0){r+=Math.abs(a(n[0]));for(var v=1;v<n.length;v++)r-=Math.abs(a(n[v]))}return r}function a(n){var r,v,s,o,b,g,d,f=0,y=n.length;if(y>2){for(d=0;d<y;d++)d===y-2?(o=y-2,b=y-1,g=0):d===y-1?(o=y-1,b=0,g=1):(o=d,b=d+1,g=d+2),r=n[o],v=n[b],s=n[g],f+=(i(s[0])-i(r[0]))*Math.sin(i(v[1]));f=f*u*u/2}return f}function i(n){return n*Math.PI/180}},{"@turf/meta":63}],62:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius*1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1.0936133},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(E,S,P){P===void 0&&(P={});var F={type:"Feature"};return(P.id===0||P.id)&&(F.id=P.id),P.bbox&&(F.bbox=P.bbox),F.properties=S||{},F.geometry=E,F}V.feature=m;function u(E,S,P){switch(E){case"Point":return A(S).geometry;case"LineString":return i(S).geometry;case"Polygon":return e(S).geometry;case"MultiPoint":return s(S).geometry;case"MultiLineString":return v(S).geometry;case"MultiPolygon":return o(S).geometry;default:throw new Error(E+" is invalid")}}V.geometry=u;function A(E,S,P){if(P===void 0&&(P={}),!E)throw new Error("coordinates is required");if(!Array.isArray(E))throw new Error("coordinates must be an Array");if(E.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(E[0])||!p(E[1]))throw new Error("coordinates must contain numbers");var F={type:"Point",coordinates:E};return m(F,S,P)}V.point=A;function T(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return A(F,S)}),P)}V.points=T;function e(E,S,P){P===void 0&&(P={});for(var F=0,I=E;F<I.length;F++){var D=I[F];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:E};return m(O,S,P)}V.polygon=e;function a(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return e(F,S)}),P)}V.polygons=a;function i(E,S,P){if(P===void 0&&(P={}),E.length<2)throw new Error("coordinates must be an array of two or more positions");var F={type:"LineString",coordinates:E};return m(F,S,P)}V.lineString=i;function n(E,S,P){return P===void 0&&(P={}),r(E.map(function(F){return i(F,S)}),P)}V.lineStrings=n;function r(E,S){S===void 0&&(S={});var P={type:"FeatureCollection"};return S.id&&(P.id=S.id),S.bbox&&(P.bbox=S.bbox),P.features=E,P}V.featureCollection=r;function v(E,S,P){P===void 0&&(P={});var F={type:"MultiLineString",coordinates:E};return m(F,S,P)}V.multiLineString=v;function s(E,S,P){P===void 0&&(P={});var F={type:"MultiPoint",coordinates:E};return m(F,S,P)}V.multiPoint=s;function o(E,S,P){P===void 0&&(P={});var F={type:"MultiPolygon",coordinates:E};return m(F,S,P)}V.multiPolygon=o;function b(E,S,P){P===void 0&&(P={});var F={type:"GeometryCollection",geometries:E};return m(F,S,P)}V.geometryCollection=b;function g(E,S){if(S===void 0&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,S||0);return Math.round(E*P)/P}V.round=g;function d(E,S){S===void 0&&(S="kilometers");var P=V.factors[S];if(!P)throw new Error(S+" units is invalid");return E*P}V.radiansToLength=d;function f(E,S){S===void 0&&(S="kilometers");var P=V.factors[S];if(!P)throw new Error(S+" units is invalid");return E/P}V.lengthToRadians=f;function y(E,S){return x(f(E,S))}V.lengthToDegrees=y;function l(E){var S=E%360;return S<0&&(S+=360),S}V.bearingToAzimuth=l;function x(E){var S=E%(2*Math.PI);return S*180/Math.PI}V.radiansToDegrees=x;function c(E){var S=E%360;return S*Math.PI/180}V.degreesToRadians=c;function M(E,S,P){if(S===void 0&&(S="kilometers"),P===void 0&&(P="kilometers"),!(E>=0))throw new Error("length must be a positive number");return d(f(E,S),P)}V.convertLength=M;function w(E,S,P){if(S===void 0&&(S="meters"),P===void 0&&(P="kilometers"),!(E>=0))throw new Error("area must be a positive number");var F=V.areaFactors[S];if(!F)throw new Error("invalid original units");var I=V.areaFactors[P];if(!I)throw new Error("invalid final units");return E/F*I}V.convertArea=w;function p(E){return!isNaN(E)&&E!==null&&!Array.isArray(E)}V.isNumber=p;function _(E){return!!E&&E.constructor===Object}V.isObject=_;function h(E){if(!E)throw new Error("bbox is required");if(!Array.isArray(E))throw new Error("bbox must be an Array");if(E.length!==4&&E.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");E.forEach(function(S){if(!p(S))throw new Error("bbox must only contain numbers")})}V.validateBBox=h;function L(E){if(!E)throw new Error("id is required");if(["string","number"].indexOf(typeof E)===-1)throw new Error("id must be a number or a string")}V.validateId=L},{}],63:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/helpers");function u(x,c,M){if(x!==null)for(var w,p,_,h,L,E,S,P=0,F=0,I,D=x.type,R=D==="FeatureCollection",O=D==="Feature",z=R?x.features.length:1,G=0;G<z;G++){S=R?x.features[G].geometry:O?x.geometry:x,I=S?S.type==="GeometryCollection":!1,L=I?S.geometries.length:1;for(var Y=0;Y<L;Y++){var ee=0,j=0;if(h=I?S.geometries[Y]:S,h!==null){E=h.coordinates;var X=h.type;switch(P=M&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(c(E,F,G,ee,j)===!1)return!1;F++,ee++;break;case"LineString":case"MultiPoint":for(w=0;w<E.length;w++){if(c(E[w],F,G,ee,j)===!1)return!1;F++,X==="MultiPoint"&&ee++}X==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(w=0;w<E.length;w++){for(p=0;p<E[w].length-P;p++){if(c(E[w][p],F,G,ee,j)===!1)return!1;F++}X==="MultiLineString"&&ee++,X==="Polygon"&&j++}X==="Polygon"&&ee++;break;case"MultiPolygon":for(w=0;w<E.length;w++){for(j=0,p=0;p<E[w].length;p++){for(_=0;_<E[w][p].length-P;_++){if(c(E[w][p][_],F,G,ee,j)===!1)return!1;F++}j++}ee++}break;case"GeometryCollection":for(w=0;w<h.geometries.length;w++)if(u(h.geometries[w],c,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(x,c,M,w){var p=M;return u(x,function(_,h,L,E,S){h===0&&M===void 0?p=_:p=c(p,_,h,L,E,S)},w),p}function T(x,c){var M;switch(x.type){case"FeatureCollection":for(M=0;M<x.features.length&&c(x.features[M].properties,M)!==!1;M++);break;case"Feature":c(x.properties,0);break}}function e(x,c,M){var w=M;return T(x,function(p,_){_===0&&M===void 0?w=p:w=c(w,p,_)}),w}function a(x,c){if(x.type==="Feature")c(x,0);else if(x.type==="FeatureCollection")for(var M=0;M<x.features.length&&c(x.features[M],M)!==!1;M++);}function i(x,c,M){var w=M;return a(x,function(p,_){_===0&&M===void 0?w=p:w=c(w,p,_)}),w}function n(x){var c=[];return u(x,function(M){c.push(M)}),c}function r(x,c){var M,w,p,_,h,L,E,S,P,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",O=D?x.features.length:1;for(M=0;M<O;M++){for(L=D?x.features[M].geometry:R?x.geometry:x,S=D?x.features[M].properties:R?x.properties:{},P=D?x.features[M].bbox:R?x.bbox:void 0,F=D?x.features[M].id:R?x.id:void 0,E=L?L.type==="GeometryCollection":!1,h=E?L.geometries.length:1,p=0;p<h;p++){if(_=E?L.geometries[p]:L,_===null){if(c(null,I,S,P,F)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(_,I,S,P,F)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<_.geometries.length;w++)if(c(_.geometries[w],I,S,P,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function v(x,c,M){var w=M;return r(x,function(p,_,h,L,E){_===0&&M===void 0?w=p:w=c(w,p,_,h,L,E)}),w}function s(x,c){r(x,function(M,w,p,_,h){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return c(m.feature(M,p,{bbox:_,id:h}),w,0)===!1?!1:void 0}var E;switch(L){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon";break}for(var S=0;S<M.coordinates.length;S++){var P=M.coordinates[S],F={type:E,coordinates:P};if(c(m.feature(F,p),w,S)===!1)return!1}})}function o(x,c,M){var w=M;return s(x,function(p,_,h){_===0&&h===0&&M===void 0?w=p:w=c(w,p,_,h)}),w}function b(x,c){s(x,function(M,w,p){var _=0;if(!!M.geometry){var h=M.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,E=0,S=0,P=0;if(u(M,function(F,I,D,R,O){if(L===void 0||w>E||R>S||O>P){L=F,E=w,S=R,P=O,_=0;return}var z=m.lineString([L,F],M.properties);if(c(z,w,p,O,_)===!1)return!1;_++,L=F})===!1)return!1}}})}function g(x,c,M){var w=M,p=!1;return b(x,function(_,h,L,E,S){p===!1&&M===void 0?w=_:w=c(w,_,h,L,E,S),p=!0}),w}function d(x,c){if(!x)throw new Error("geojson is required");s(x,function(M,w,p){if(M.geometry!==null){var _=M.geometry.type,h=M.geometry.coordinates;switch(_){case"LineString":if(c(M,w,p,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(c(m.lineString(h[L],M.properties),w,p,L)===!1)return!1;break}}})}function f(x,c,M){var w=M;return d(x,function(p,_,h,L){_===0&&M===void 0?w=p:w=c(w,p,_,h,L)}),w}function y(x,c){if(c=c||{},!m.isObject(c))throw new Error("options is invalid");var M=c.featureIndex||0,w=c.multiFeatureIndex||0,p=c.geometryIndex||0,_=c.segmentIndex||0,h=c.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=E.length+_-1),m.lineString([E[_],E[_+1]],h,c);case"Polygon":return p<0&&(p=E.length+p),_<0&&(_=E[p].length+_-1),m.lineString([E[p][_],E[p][_+1]],h,c);case"MultiLineString":return w<0&&(w=E.length+w),_<0&&(_=E[w].length+_-1),m.lineString([E[w][_],E[w][_+1]],h,c);case"MultiPolygon":return w<0&&(w=E.length+w),p<0&&(p=E[w].length+p),_<0&&(_=E[w][p].length-_-1),m.lineString([E[w][p][_],E[w][p][_+1]],h,c)}throw new Error("geojson is invalid")}function l(x,c){if(c=c||{},!m.isObject(c))throw new Error("options is invalid");var M=c.featureIndex||0,w=c.multiFeatureIndex||0,p=c.geometryIndex||0,_=c.coordIndex||0,h=c.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":return m.point(E,h,c);case"MultiPoint":return w<0&&(w=E.length+w),m.point(E[w],h,c);case"LineString":return _<0&&(_=E.length+_),m.point(E[_],h,c);case"Polygon":return p<0&&(p=E.length+p),_<0&&(_=E[p].length+_),m.point(E[p][_],h,c);case"MultiLineString":return w<0&&(w=E.length+w),_<0&&(_=E[w].length+_),m.point(E[w][_],h,c);case"MultiPolygon":return w<0&&(w=E.length+w),p<0&&(p=E[w].length+p),_<0&&(_=E[w][p].length-_),m.point(E[w][p][_],h,c)}throw new Error("geojson is invalid")}V.coordEach=u,V.coordReduce=A,V.propEach=T,V.propReduce=e,V.featureEach=a,V.featureReduce=i,V.coordAll=n,V.geomEach=r,V.geomReduce=v,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=b,V.segmentReduce=g,V.lineEach=d,V.lineReduce=f,V.findSegment=y,V.findPoint=l},{"@turf/helpers":62}],64:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/meta");function u(A){var T=[1/0,1/0,-1/0,-1/0];return m.coordEach(A,function(e){T[0]>e[0]&&(T[0]=e[0]),T[1]>e[1]&&(T[1]=e[1]),T[2]<e[0]&&(T[2]=e[0]),T[3]<e[1]&&(T[3]=e[1])}),T}u.default=u,V.default=u},{"@turf/meta":66}],65:[function(t,N,V){arguments[4][62][0].apply(V,arguments)},{dup:62}],66:[function(t,N,V){arguments[4][63][0].apply(V,arguments)},{"@turf/helpers":65,dup:63}],67:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/meta"),u=t("@turf/helpers");function A(T,e){e===void 0&&(e={});var a=0,i=0,n=0;return m.coordEach(T,function(r){a+=r[0],i+=r[1],n++}),u.point([a/n,i/n],e.properties)}V.default=A},{"@turf/helpers":68,"@turf/meta":69}],68:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius/1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1/1.0936},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(O,z,G){G===void 0&&(G={});var Y={type:"Feature"};return(G.id===0||G.id)&&(Y.id=G.id),G.bbox&&(Y.bbox=G.bbox),Y.properties=z||{},Y.geometry=O,Y}V.feature=m;function u(O,z,G){switch(O){case"Point":return A(z).geometry;case"LineString":return i(z).geometry;case"Polygon":return e(z).geometry;case"MultiPoint":return s(z).geometry;case"MultiLineString":return v(z).geometry;case"MultiPolygon":return o(z).geometry;default:throw new Error(O+" is invalid")}}V.geometry=u;function A(O,z,G){G===void 0&&(G={});var Y={type:"Point",coordinates:O};return m(Y,z,G)}V.point=A;function T(O,z,G){return G===void 0&&(G={}),r(O.map(function(Y){return A(Y,z)}),G)}V.points=T;function e(O,z,G){G===void 0&&(G={});for(var Y=0,ee=O;Y<ee.length;Y++){var j=ee[Y];if(j.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<j[j.length-1].length;X++)if(j[j.length-1][X]!==j[0][X])throw new Error("First and last Position are not equivalent.")}var ie={type:"Polygon",coordinates:O};return m(ie,z,G)}V.polygon=e;function a(O,z,G){return G===void 0&&(G={}),r(O.map(function(Y){return e(Y,z)}),G)}V.polygons=a;function i(O,z,G){if(G===void 0&&(G={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var Y={type:"LineString",coordinates:O};return m(Y,z,G)}V.lineString=i;function n(O,z,G){return G===void 0&&(G={}),r(O.map(function(Y){return i(Y,z)}),G)}V.lineStrings=n;function r(O,z){z===void 0&&(z={});var G={type:"FeatureCollection"};return z.id&&(G.id=z.id),z.bbox&&(G.bbox=z.bbox),G.features=O,G}V.featureCollection=r;function v(O,z,G){G===void 0&&(G={});var Y={type:"MultiLineString",coordinates:O};return m(Y,z,G)}V.multiLineString=v;function s(O,z,G){G===void 0&&(G={});var Y={type:"MultiPoint",coordinates:O};return m(Y,z,G)}V.multiPoint=s;function o(O,z,G){G===void 0&&(G={});var Y={type:"MultiPolygon",coordinates:O};return m(Y,z,G)}V.multiPolygon=o;function b(O,z,G){G===void 0&&(G={});var Y={type:"GeometryCollection",geometries:O};return m(Y,z,G)}V.geometryCollection=b;function g(O,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,z||0);return Math.round(O*G)/G}V.round=g;function d(O,z){z===void 0&&(z="kilometers");var G=V.factors[z];if(!G)throw new Error(z+" units is invalid");return O*G}V.radiansToLength=d;function f(O,z){z===void 0&&(z="kilometers");var G=V.factors[z];if(!G)throw new Error(z+" units is invalid");return O/G}V.lengthToRadians=f;function y(O,z){return x(f(O,z))}V.lengthToDegrees=y;function l(O){var z=O%360;return z<0&&(z+=360),z}V.bearingToAzimuth=l;function x(O){var z=O%(2*Math.PI);return z*180/Math.PI}V.radiansToDegrees=x;function c(O){var z=O%360;return z*Math.PI/180}V.degreesToRadians=c;function M(O,z,G){if(z===void 0&&(z="kilometers"),G===void 0&&(G="kilometers"),!(O>=0))throw new Error("length must be a positive number");return d(f(O,z),G)}V.convertLength=M;function w(O,z,G){if(z===void 0&&(z="meters"),G===void 0&&(G="kilometers"),!(O>=0))throw new Error("area must be a positive number");var Y=V.areaFactors[z];if(!Y)throw new Error("invalid original units");var ee=V.areaFactors[G];if(!ee)throw new Error("invalid final units");return O/Y*ee}V.convertArea=w;function p(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}V.isNumber=p;function _(O){return!!O&&O.constructor===Object}V.isObject=_;function h(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(z){if(!p(z))throw new Error("bbox must only contain numbers")})}V.validateBBox=h;function L(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}V.validateId=L;function E(){throw new Error("method has been renamed to `radiansToDegrees`")}V.radians2degrees=E;function S(){throw new Error("method has been renamed to `degreesToRadians`")}V.degrees2radians=S;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}V.distanceToDegrees=P;function F(){throw new Error("method has been renamed to `lengthToRadians`")}V.distanceToRadians=F;function I(){throw new Error("method has been renamed to `radiansToLength`")}V.radiansToDistance=I;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}V.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}V.convertDistance=R},{}],69:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/helpers");function u(x,c,M){if(x!==null)for(var w,p,_,h,L,E,S,P=0,F=0,I,D=x.type,R=D==="FeatureCollection",O=D==="Feature",z=R?x.features.length:1,G=0;G<z;G++){S=R?x.features[G].geometry:O?x.geometry:x,I=S?S.type==="GeometryCollection":!1,L=I?S.geometries.length:1;for(var Y=0;Y<L;Y++){var ee=0,j=0;if(h=I?S.geometries[Y]:S,h!==null){E=h.coordinates;var X=h.type;switch(P=M&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(c(E,F,G,ee,j)===!1)return!1;F++,ee++;break;case"LineString":case"MultiPoint":for(w=0;w<E.length;w++){if(c(E[w],F,G,ee,j)===!1)return!1;F++,X==="MultiPoint"&&ee++}X==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(w=0;w<E.length;w++){for(p=0;p<E[w].length-P;p++){if(c(E[w][p],F,G,ee,j)===!1)return!1;F++}X==="MultiLineString"&&ee++,X==="Polygon"&&j++}X==="Polygon"&&ee++;break;case"MultiPolygon":for(w=0;w<E.length;w++){for(j=0,p=0;p<E[w].length;p++){for(_=0;_<E[w][p].length-P;_++){if(c(E[w][p][_],F,G,ee,j)===!1)return!1;F++}j++}ee++}break;case"GeometryCollection":for(w=0;w<h.geometries.length;w++)if(u(h.geometries[w],c,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(x,c,M,w){var p=M;return u(x,function(_,h,L,E,S){h===0&&M===void 0?p=_:p=c(p,_,h,L,E,S)},w),p}function T(x,c){var M;switch(x.type){case"FeatureCollection":for(M=0;M<x.features.length&&c(x.features[M].properties,M)!==!1;M++);break;case"Feature":c(x.properties,0);break}}function e(x,c,M){var w=M;return T(x,function(p,_){_===0&&M===void 0?w=p:w=c(w,p,_)}),w}function a(x,c){if(x.type==="Feature")c(x,0);else if(x.type==="FeatureCollection")for(var M=0;M<x.features.length&&c(x.features[M],M)!==!1;M++);}function i(x,c,M){var w=M;return a(x,function(p,_){_===0&&M===void 0?w=p:w=c(w,p,_)}),w}function n(x){var c=[];return u(x,function(M){c.push(M)}),c}function r(x,c){var M,w,p,_,h,L,E,S,P,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",O=D?x.features.length:1;for(M=0;M<O;M++){for(L=D?x.features[M].geometry:R?x.geometry:x,S=D?x.features[M].properties:R?x.properties:{},P=D?x.features[M].bbox:R?x.bbox:void 0,F=D?x.features[M].id:R?x.id:void 0,E=L?L.type==="GeometryCollection":!1,h=E?L.geometries.length:1,p=0;p<h;p++){if(_=E?L.geometries[p]:L,_===null){if(c(null,I,S,P,F)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(_,I,S,P,F)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<_.geometries.length;w++)if(c(_.geometries[w],I,S,P,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function v(x,c,M){var w=M;return r(x,function(p,_,h,L,E){_===0&&M===void 0?w=p:w=c(w,p,_,h,L,E)}),w}function s(x,c){r(x,function(M,w,p,_,h){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return c(m.feature(M,p,{bbox:_,id:h}),w,0)===!1?!1:void 0}var E;switch(L){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon";break}for(var S=0;S<M.coordinates.length;S++){var P=M.coordinates[S],F={type:E,coordinates:P};if(c(m.feature(F,p),w,S)===!1)return!1}})}function o(x,c,M){var w=M;return s(x,function(p,_,h){_===0&&h===0&&M===void 0?w=p:w=c(w,p,_,h)}),w}function b(x,c){s(x,function(M,w,p){var _=0;if(!!M.geometry){var h=M.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,E=0,S=0,P=0;if(u(M,function(F,I,D,R,O){if(L===void 0||w>E||R>S||O>P){L=F,E=w,S=R,P=O,_=0;return}var z=m.lineString([L,F],M.properties);if(c(z,w,p,O,_)===!1)return!1;_++,L=F})===!1)return!1}}})}function g(x,c,M){var w=M,p=!1;return b(x,function(_,h,L,E,S){p===!1&&M===void 0?w=_:w=c(w,_,h,L,E,S),p=!0}),w}function d(x,c){if(!x)throw new Error("geojson is required");s(x,function(M,w,p){if(M.geometry!==null){var _=M.geometry.type,h=M.geometry.coordinates;switch(_){case"LineString":if(c(M,w,p,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(c(m.lineString(h[L],M.properties),w,p,L)===!1)return!1;break}}})}function f(x,c,M){var w=M;return d(x,function(p,_,h,L){_===0&&M===void 0?w=p:w=c(w,p,_,h,L)}),w}function y(x,c){if(c=c||{},!m.isObject(c))throw new Error("options is invalid");var M=c.featureIndex||0,w=c.multiFeatureIndex||0,p=c.geometryIndex||0,_=c.segmentIndex||0,h=c.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=E.length+_-1),m.lineString([E[_],E[_+1]],h,c);case"Polygon":return p<0&&(p=E.length+p),_<0&&(_=E[p].length+_-1),m.lineString([E[p][_],E[p][_+1]],h,c);case"MultiLineString":return w<0&&(w=E.length+w),_<0&&(_=E[w].length+_-1),m.lineString([E[w][_],E[w][_+1]],h,c);case"MultiPolygon":return w<0&&(w=E.length+w),p<0&&(p=E[w].length+p),_<0&&(_=E[w][p].length-_-1),m.lineString([E[w][p][_],E[w][p][_+1]],h,c)}throw new Error("geojson is invalid")}function l(x,c){if(c=c||{},!m.isObject(c))throw new Error("options is invalid");var M=c.featureIndex||0,w=c.multiFeatureIndex||0,p=c.geometryIndex||0,_=c.coordIndex||0,h=c.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var E=L.coordinates;switch(L.type){case"Point":return m.point(E,h,c);case"MultiPoint":return w<0&&(w=E.length+w),m.point(E[w],h,c);case"LineString":return _<0&&(_=E.length+_),m.point(E[_],h,c);case"Polygon":return p<0&&(p=E.length+p),_<0&&(_=E[p].length+_),m.point(E[p][_],h,c);case"MultiLineString":return w<0&&(w=E.length+w),_<0&&(_=E[w].length+_),m.point(E[w][_],h,c);case"MultiPolygon":return w<0&&(w=E.length+w),p<0&&(p=E[w].length+p),_<0&&(_=E[w][p].length-_),m.point(E[w][p][_],h,c)}throw new Error("geojson is invalid")}V.coordEach=u,V.coordReduce=A,V.propEach=T,V.propReduce=e,V.featureEach=a,V.featureReduce=i,V.coordAll=n,V.geomEach=r,V.geomReduce=v,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=b,V.segmentReduce=g,V.lineEach=d,V.lineReduce=f,V.findSegment=y,V.findPoint=l},{"@turf/helpers":68}],70:[function(t,N,V){N.exports=m;function m(u){var A=0,T=0,e=0,a=0;return u.map(function(i){i=i.slice();var n=i[0],r=n.toUpperCase();if(n!=r)switch(i[0]=r,n){case"a":i[6]+=e,i[7]+=a;break;case"v":i[1]+=a;break;case"h":i[1]+=e;break;default:for(var v=1;v<i.length;)i[v++]+=e,i[v++]+=a}switch(r){case"Z":e=A,a=T;break;case"H":e=i[1];break;case"V":a=i[1];break;case"M":e=A=i[1],a=T=i[2];break;default:e=i[i.length-2],a=i[i.length-1]}return i})}},{}],71:[function(t,N,V){N.exports=m;function m(u,A){if(!u||u.length==null)throw Error("Argument should be an array");A==null?A=1:A=Math.floor(A);for(var T=Array(A*2),e=0;e<A;e++){for(var a=-1/0,i=1/0,n=e,r=u.length;n<r;n+=A)u[n]>a&&(a=u[n]),u[n]<i&&(i=u[n]);T[e]=i,T[A+e]=a}return T}},{}],72:[function(t,N,V){N.exports=function(m,u,A){if(typeof Array.prototype.findIndex=="function")return m.findIndex(u,A);if(typeof u!="function")throw new TypeError("predicate must be a function");var T=Object(m),e=T.length;if(e===0)return-1;for(var a=0;a<e;a++)if(u.call(A,T[a],a,T))return a;return-1}},{}],73:[function(t,N,V){var m=t("array-bounds");N.exports=u;function u(A,T,e){if(!A||A.length==null)throw Error("Argument should be an array");T==null&&(T=1),e==null&&(e=m(A,T));for(var a=0;a<T;a++){var i=e[T+a],n=e[a],r=a,v=A.length;if(i===1/0&&n===-1/0)for(r=a;r<v;r+=T)A[r]=A[r]===i?1:A[r]===n?0:.5;else if(i===1/0)for(r=a;r<v;r+=T)A[r]=A[r]===i?1:0;else if(n===-1/0)for(r=a;r<v;r+=T)A[r]=A[r]===n?0:1;else{var s=i-n;for(r=a;r<v;r+=T)isNaN(A[r])||(A[r]=s===0?.5:(A[r]-n)/s)}}return A}},{"array-bounds":71}],74:[function(t,N,V){N.exports=function(u,A){var T=typeof u=="number",e=typeof A=="number";T&&!e?(A=u,u=0):!T&&!e&&(u=0,A=0),u=u|0,A=A|0;var a=A-u;if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),n=0,r=u;n<a;n++,r++)i[n]=r;return i}},{}],75:[function(t,N,V){(function(m){(function(){var u=t("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function A(S,P){if(S===P)return 0;for(var F=S.length,I=P.length,D=0,R=Math.min(F,I);D<R;++D)if(S[D]!==P[D]){F=S[D],I=P[D];break}return F<I?-1:I<F?1:0}function T(S){return m.Buffer&&typeof m.Buffer.isBuffer=="function"?m.Buffer.isBuffer(S):!!(S!=null&&S._isBuffer)}var e=t("util/"),a=Object.prototype.hasOwnProperty,i=Array.prototype.slice,n=function(){return function(){}.name==="foo"}();function r(S){return Object.prototype.toString.call(S)}function v(S){return T(S)||typeof m.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(S):S?!!(S instanceof DataView||S.buffer&&S.buffer instanceof ArrayBuffer):!1}var s=N.exports=l,o=/\s*function\s+([^\(\s]*)\s*/;function b(S){if(!!e.isFunction(S)){if(n)return S.name;var P=S.toString(),F=P.match(o);return F&&F[1]}}s.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var F=P.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var I=new Error;if(I.stack){var D=I.stack,R=b(F),O=D.indexOf(`
`+R);if(O>=0){var z=D.indexOf(`
`,O+1);D=D.substring(z+1)}this.stack=D}}},e.inherits(s.AssertionError,Error);function g(S,P){return typeof S=="string"?S.length<P?S:S.slice(0,P):S}function d(S){if(n||!e.isFunction(S))return e.inspect(S);var P=b(S),F=P?": "+P:"";return"[Function"+F+"]"}function f(S){return g(d(S.actual),128)+" "+S.operator+" "+g(d(S.expected),128)}function y(S,P,F,I,D){throw new s.AssertionError({message:F,actual:S,expected:P,operator:I,stackStartFunction:D})}s.fail=y;function l(S,P){S||y(S,!0,P,"==",s.ok)}s.ok=l,s.equal=function(P,F,I){P!=F&&y(P,F,I,"==",s.equal)},s.notEqual=function(P,F,I){P==F&&y(P,F,I,"!=",s.notEqual)},s.deepEqual=function(P,F,I){x(P,F,!1)||y(P,F,I,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(P,F,I){x(P,F,!0)||y(P,F,I,"deepStrictEqual",s.deepStrictEqual)};function x(S,P,F,I){if(S===P)return!0;if(T(S)&&T(P))return A(S,P)===0;if(e.isDate(S)&&e.isDate(P))return S.getTime()===P.getTime();if(e.isRegExp(S)&&e.isRegExp(P))return S.source===P.source&&S.global===P.global&&S.multiline===P.multiline&&S.lastIndex===P.lastIndex&&S.ignoreCase===P.ignoreCase;if((S===null||typeof S!="object")&&(P===null||typeof P!="object"))return F?S===P:S==P;if(v(S)&&v(P)&&r(S)===r(P)&&!(S instanceof Float32Array||S instanceof Float64Array))return A(new Uint8Array(S.buffer),new Uint8Array(P.buffer))===0;if(T(S)!==T(P))return!1;I=I||{actual:[],expected:[]};var D=I.actual.indexOf(S);return D!==-1&&D===I.expected.indexOf(P)?!0:(I.actual.push(S),I.expected.push(P),M(S,P,F,I))}function c(S){return Object.prototype.toString.call(S)=="[object Arguments]"}function M(S,P,F,I){if(S==null||P===null||P===void 0)return!1;if(e.isPrimitive(S)||e.isPrimitive(P))return S===P;if(F&&Object.getPrototypeOf(S)!==Object.getPrototypeOf(P))return!1;var D=c(S),R=c(P);if(D&&!R||!D&&R)return!1;if(D)return S=i.call(S),P=i.call(P),x(S,P,F);var O=E(S),z=E(P),G,Y;if(O.length!==z.length)return!1;for(O.sort(),z.sort(),Y=O.length-1;Y>=0;Y--)if(O[Y]!==z[Y])return!1;for(Y=O.length-1;Y>=0;Y--)if(G=O[Y],!x(S[G],P[G],F,I))return!1;return!0}s.notDeepEqual=function(P,F,I){x(P,F,!1)&&y(P,F,I,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=w;function w(S,P,F){x(S,P,!0)&&y(S,P,F,"notDeepStrictEqual",w)}s.strictEqual=function(P,F,I){P!==F&&y(P,F,I,"===",s.strictEqual)},s.notStrictEqual=function(P,F,I){P===F&&y(P,F,I,"!==",s.notStrictEqual)};function p(S,P){if(!S||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(S);try{if(S instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},S)===!0}function _(S){var P;try{S()}catch(F){P=F}return P}function h(S,P,F,I){var D;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof F=="string"&&(I=F,F=null),D=_(P),I=(F&&F.name?" ("+F.name+").":".")+(I?" "+I:"."),S&&!D&&y(D,F,"Missing expected exception"+I);var R=typeof I=="string",O=!S&&e.isError(D),z=!S&&D&&!F;if((O&&R&&p(D,F)||z)&&y(D,F,"Got unwanted exception"+I),S&&D&&F&&!p(D,F)||!S&&D)throw D}s.throws=function(S,P,F){h(!0,S,P,F)},s.doesNotThrow=function(S,P,F){h(!1,S,P,F)},s.ifError=function(S){if(S)throw S};function L(S,P){S||y(S,!0,P,"==",L)}s.strict=u(L,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var E=Object.keys||function(S){var P=[];for(var F in S)a.call(S,F)&&P.push(F);return P}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(t,N,V){typeof Object.create=="function"?N.exports=function(u,A){u.super_=A,u.prototype=Object.create(A.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}})}:N.exports=function(u,A){u.super_=A;var T=function(){};T.prototype=A.prototype,u.prototype=new T,u.prototype.constructor=u}},{}],77:[function(t,N,V){N.exports=function(u){return u&&typeof u=="object"&&typeof u.copy=="function"&&typeof u.fill=="function"&&typeof u.readUInt8=="function"}},{}],78:[function(t,N,V){(function(m,u){(function(){var A=/%[sdj%]/g;V.format=function(z){if(!M(z)){for(var G=[],Y=0;Y<arguments.length;Y++)G.push(a(arguments[Y]));return G.join(" ")}for(var Y=1,ee=arguments,j=ee.length,X=String(z).replace(A,function(he){if(he==="%%")return"%";if(Y>=j)return he;switch(he){case"%s":return String(ee[Y++]);case"%d":return Number(ee[Y++]);case"%j":try{return JSON.stringify(ee[Y++])}catch{return"[Circular]"}default:return he}}),ie=ee[Y];Y<j;ie=ee[++Y])l(ie)||!h(ie)?X+=" "+ie:X+=" "+a(ie);return X},V.deprecate=function(z,G){if(p(u.process))return function(){return V.deprecate(z,G).apply(this,arguments)};if(m.noDeprecation===!0)return z;var Y=!1;function ee(){if(!Y){if(m.throwDeprecation)throw new Error(G);m.traceDeprecation?console.trace(G):console.error(G),Y=!0}return z.apply(this,arguments)}return ee};var T={},e;V.debuglog=function(z){if(p(e)&&(e=m.env.NODE_DEBUG||""),z=z.toUpperCase(),!T[z])if(new RegExp("\\b"+z+"\\b","i").test(e)){var G=m.pid;T[z]=function(){var Y=V.format.apply(V,arguments);console.error("%s %d: %s",z,G,Y)}}else T[z]=function(){};return T[z]};function a(z,G){var Y={seen:[],stylize:n};return arguments.length>=3&&(Y.depth=arguments[2]),arguments.length>=4&&(Y.colors=arguments[3]),y(G)?Y.showHidden=G:G&&V._extend(Y,G),p(Y.showHidden)&&(Y.showHidden=!1),p(Y.depth)&&(Y.depth=2),p(Y.colors)&&(Y.colors=!1),p(Y.customInspect)&&(Y.customInspect=!0),Y.colors&&(Y.stylize=i),v(Y,z,Y.depth)}V.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i(z,G){var Y=a.styles[G];return Y?"\x1B["+a.colors[Y][0]+"m"+z+"\x1B["+a.colors[Y][1]+"m":z}function n(z,G){return z}function r(z){var G={};return z.forEach(function(Y,ee){G[Y]=!0}),G}function v(z,G,Y){if(z.customInspect&&G&&S(G.inspect)&&G.inspect!==V.inspect&&!(G.constructor&&G.constructor.prototype===G)){var ee=G.inspect(Y,z);return M(ee)||(ee=v(z,ee,Y)),ee}var j=s(z,G);if(j)return j;var X=Object.keys(G),ie=r(X);if(z.showHidden&&(X=Object.getOwnPropertyNames(G)),E(G)&&(X.indexOf("message")>=0||X.indexOf("description")>=0))return o(G);if(X.length===0){if(S(G)){var he=G.name?": "+G.name:"";return z.stylize("[Function"+he+"]","special")}if(_(G))return z.stylize(RegExp.prototype.toString.call(G),"regexp");if(L(G))return z.stylize(Date.prototype.toString.call(G),"date");if(E(G))return o(G)}var K="",$=!1,U=["{","}"];if(f(G)&&($=!0,U=["[","]"]),S(G)){var H=G.name?": "+G.name:"";K=" [Function"+H+"]"}if(_(G)&&(K=" "+RegExp.prototype.toString.call(G)),L(G)&&(K=" "+Date.prototype.toUTCString.call(G)),E(G)&&(K=" "+o(G)),X.length===0&&(!$||G.length==0))return U[0]+K+U[1];if(Y<0)return _(G)?z.stylize(RegExp.prototype.toString.call(G),"regexp"):z.stylize("[Object]","special");z.seen.push(G);var q;return $?q=b(z,G,Y,ie,X):q=X.map(function(re){return g(z,G,Y,ie,re,$)}),z.seen.pop(),d(q,K,U)}function s(z,G){if(p(G))return z.stylize("undefined","undefined");if(M(G)){var Y="'"+JSON.stringify(G).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(Y,"string")}if(c(G))return z.stylize(""+G,"number");if(y(G))return z.stylize(""+G,"boolean");if(l(G))return z.stylize("null","null")}function o(z){return"["+Error.prototype.toString.call(z)+"]"}function b(z,G,Y,ee,j){for(var X=[],ie=0,he=G.length;ie<he;++ie)O(G,String(ie))?X.push(g(z,G,Y,ee,String(ie),!0)):X.push("");return j.forEach(function(K){K.match(/^\d+$/)||X.push(g(z,G,Y,ee,K,!0))}),X}function g(z,G,Y,ee,j,X){var ie,he,K;if(K=Object.getOwnPropertyDescriptor(G,j)||{value:G[j]},K.get?K.set?he=z.stylize("[Getter/Setter]","special"):he=z.stylize("[Getter]","special"):K.set&&(he=z.stylize("[Setter]","special")),O(ee,j)||(ie="["+j+"]"),he||(z.seen.indexOf(K.value)<0?(l(Y)?he=v(z,K.value,null):he=v(z,K.value,Y-1),he.indexOf(`
`)>-1&&(X?he=he.split(`
`).map(function($){return"  "+$}).join(`
`).substr(2):he=`
`+he.split(`
`).map(function($){return"   "+$}).join(`
`))):he=z.stylize("[Circular]","special")),p(ie)){if(X&&j.match(/^\d+$/))return he;ie=JSON.stringify(""+j),ie.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ie=ie.substr(1,ie.length-2),ie=z.stylize(ie,"name")):(ie=ie.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ie=z.stylize(ie,"string"))}return ie+": "+he}function d(z,G,Y){var ee=z.reduce(function(j,X){return X.indexOf(`
`)>=0,j+X.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ee>60?Y[0]+(G===""?"":G+`
 `)+" "+z.join(`,
  `)+" "+Y[1]:Y[0]+G+" "+z.join(", ")+" "+Y[1]}function f(z){return Array.isArray(z)}V.isArray=f;function y(z){return typeof z=="boolean"}V.isBoolean=y;function l(z){return z===null}V.isNull=l;function x(z){return z==null}V.isNullOrUndefined=x;function c(z){return typeof z=="number"}V.isNumber=c;function M(z){return typeof z=="string"}V.isString=M;function w(z){return typeof z=="symbol"}V.isSymbol=w;function p(z){return z===void 0}V.isUndefined=p;function _(z){return h(z)&&F(z)==="[object RegExp]"}V.isRegExp=_;function h(z){return typeof z=="object"&&z!==null}V.isObject=h;function L(z){return h(z)&&F(z)==="[object Date]"}V.isDate=L;function E(z){return h(z)&&(F(z)==="[object Error]"||z instanceof Error)}V.isError=E;function S(z){return typeof z=="function"}V.isFunction=S;function P(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}V.isPrimitive=P,V.isBuffer=t("./support/isBuffer");function F(z){return Object.prototype.toString.call(z)}function I(z){return z<10?"0"+z.toString(10):z.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var z=new Date,G=[I(z.getHours()),I(z.getMinutes()),I(z.getSeconds())].join(":");return[z.getDate(),D[z.getMonth()],G].join(" ")}V.log=function(){console.log("%s - %s",R(),V.format.apply(V,arguments))},V.inherits=t("inherits"),V._extend=function(z,G){if(!G||!h(G))return z;for(var Y=Object.keys(G),ee=Y.length;ee--;)z[Y[ee]]=G[Y[ee]];return z};function O(z,G){return Object.prototype.hasOwnProperty.call(z,G)}}).call(this)}).call(this,t("_process"),typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(t,N,V){V.byteLength=n,V.toByteArray=v,V.fromByteArray=b;for(var m=[],u=[],A=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,a=T.length;e<a;++e)m[e]=T[e],u[T.charCodeAt(e)]=e;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63;function i(g){var d=g.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=g.indexOf("=");f===-1&&(f=d);var y=f===d?0:4-f%4;return[f,y]}function n(g){var d=i(g),f=d[0],y=d[1];return(f+y)*3/4-y}function r(g,d,f){return(d+f)*3/4-f}function v(g){var d,f=i(g),y=f[0],l=f[1],x=new A(r(g,y,l)),c=0,M=l>0?y-4:y,w;for(w=0;w<M;w+=4)d=u[g.charCodeAt(w)]<<18|u[g.charCodeAt(w+1)]<<12|u[g.charCodeAt(w+2)]<<6|u[g.charCodeAt(w+3)],x[c++]=d>>16&255,x[c++]=d>>8&255,x[c++]=d&255;return l===2&&(d=u[g.charCodeAt(w)]<<2|u[g.charCodeAt(w+1)]>>4,x[c++]=d&255),l===1&&(d=u[g.charCodeAt(w)]<<10|u[g.charCodeAt(w+1)]<<4|u[g.charCodeAt(w+2)]>>2,x[c++]=d>>8&255,x[c++]=d&255),x}function s(g){return m[g>>18&63]+m[g>>12&63]+m[g>>6&63]+m[g&63]}function o(g,d,f){for(var y,l=[],x=d;x<f;x+=3)y=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(g[x+2]&255),l.push(s(y));return l.join("")}function b(g){for(var d,f=g.length,y=f%3,l=[],x=16383,c=0,M=f-y;c<M;c+=x)l.push(o(g,c,c+x>M?M:c+x));return y===1?(d=g[f-1],l.push(m[d>>2]+m[d<<4&63]+"==")):y===2&&(d=(g[f-2]<<8)+g[f-1],l.push(m[d>>10]+m[d>>4&63]+m[d<<2&63]+"=")),l.join("")}},{}],80:[function(t,N,V){function m(i,n,r,v,s){for(var o=s+1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d>=0?(o=b,s=b-1):v=b+1}return o}function u(i,n,r,v,s){for(var o=s+1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d>0?(o=b,s=b-1):v=b+1}return o}function A(i,n,r,v,s){for(var o=v-1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d<0?(o=b,v=b+1):s=b-1}return o}function T(i,n,r,v,s){for(var o=v-1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d<=0?(o=b,v=b+1):s=b-1}return o}function e(i,n,r,v,s){for(;v<=s;){var o=v+s>>>1,b=i[o],g=r!==void 0?r(b,n):b-n;if(g===0)return o;g<=0?v=o+1:s=o-1}return-1}function a(i,n,r,v,s,o){return typeof r=="function"?o(i,n,r,v===void 0?0:v|0,s===void 0?i.length-1:s|0):o(i,n,void 0,r===void 0?0:r|0,v===void 0?i.length-1:v|0)}N.exports={ge:function(i,n,r,v,s){return a(i,n,r,v,s,m)},gt:function(i,n,r,v,s){return a(i,n,r,v,s,u)},lt:function(i,n,r,v,s){return a(i,n,r,v,s,A)},le:function(i,n,r,v,s){return a(i,n,r,v,s,T)},eq:function(i,n,r,v,s){return a(i,n,r,v,s,e)}}},{}],81:[function(t,N,V){var m=32;V.INT_BITS=m,V.INT_MAX=2147483647,V.INT_MIN=-1<<m-1,V.sign=function(T){return(T>0)-(T<0)},V.abs=function(T){var e=T>>m-1;return(T^e)-e},V.min=function(T,e){return e^(T^e)&-(T<e)},V.max=function(T,e){return T^(T^e)&-(T<e)},V.isPow2=function(T){return!(T&T-1)&&!!T},V.log2=function(T){var e,a;return e=(T>65535)<<4,T>>>=e,a=(T>255)<<3,T>>>=a,e|=a,a=(T>15)<<2,T>>>=a,e|=a,a=(T>3)<<1,T>>>=a,e|=a,e|T>>1},V.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},V.popCount=function(T){return T=T-(T>>>1&1431655765),T=(T&858993459)+(T>>>2&858993459),(T+(T>>>4)&252645135)*16843009>>>24};function u(T){var e=32;return T&=-T,T&&e--,T&65535&&(e-=16),T&16711935&&(e-=8),T&252645135&&(e-=4),T&858993459&&(e-=2),T&1431655765&&(e-=1),e}V.countTrailingZeros=u,V.nextPow2=function(T){return T+=T===0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T+1},V.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T-(T>>>1)},V.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,T&=15,27030>>>T&1};var A=new Array(256);(function(T){for(var e=0;e<256;++e){var a=e,i=e,n=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=a&1,--n;T[e]=i<<n&255}})(A),V.reverse=function(T){return A[T&255]<<24|A[T>>>8&255]<<16|A[T>>>16&255]<<8|A[T>>>24&255]},V.interleave2=function(T,e){return T&=65535,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,T|e<<1},V.deinterleave2=function(T,e){return T=T>>>e&1431655765,T=(T|T>>>1)&858993459,T=(T|T>>>2)&252645135,T=(T|T>>>4)&16711935,T=(T|T>>>16)&65535,T<<16>>16},V.interleave3=function(T,e,a){return T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,T|=e<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,T|a<<2},V.deinterleave3=function(T,e){return T=T>>>e&1227133513,T=(T|T>>>2)&3272356035,T=(T|T>>>4)&251719695,T=(T|T>>>8)&4278190335,T=(T|T>>>16)&1023,T<<22>>22},V.nextCombination=function(T){var e=T|T-1;return e+1|(~e&-~e)-1>>>u(T)+1}},{}],82:[function(t,N,V){var m=t("clamp");N.exports=A;var u=1e20;function A(a,i){i||(i={});var n=i.cutoff==null?.25:i.cutoff,r=i.radius==null?8:i.radius,v=i.channel||0,s,o,b,g,d,f,y,l,x,c,M;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!i.width||!i.height)throw Error("For raw data width and height should be provided by options");s=i.width,o=i.height,g=a,i.stride?f=i.stride:f=Math.floor(a.length/s/o)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(l=a,y=l.getContext("2d"),s=l.width,o=l.height,x=y.getImageData(0,0,s,o),g=x.data,f=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(l=a.canvas,y=a,s=l.width,o=l.height,x=y.getImageData(0,0,s,o),g=x.data,f=4):window.ImageData&&a instanceof window.ImageData&&(x=a,s=a.width,o=a.height,g=x.data,f=4);if(b=Math.max(s,o),window.Uint8ClampedArray&&g instanceof window.Uint8ClampedArray||window.Uint8Array&&g instanceof window.Uint8Array)for(d=g,g=Array(s*o),c=0,M=d.length;c<M;c++)g[c]=d[c*f+v]/255;else if(f!==1)throw Error("Raw data can have only 1 value per pixel");var w=Array(s*o),p=Array(s*o),_=Array(b),h=Array(b),L=Array(b+1),E=Array(b);for(c=0,M=s*o;c<M;c++){var S=g[c];w[c]=S===1?0:S===0?u:Math.pow(Math.max(0,.5-S),2),p[c]=S===1?u:S===0?0:Math.pow(Math.max(0,S-.5),2)}T(w,s,o,_,h,E,L),T(p,s,o,_,h,E,L);var P=window.Float32Array?new Float32Array(s*o):new Array(s*o);for(c=0,M=s*o;c<M;c++)P[c]=m(1-((w[c]-p[c])/r+n),0,1);return P}function T(a,i,n,r,v,s,o){for(var b=0;b<i;b++){for(var g=0;g<n;g++)r[g]=a[g*i+b];for(e(r,v,s,o,n),g=0;g<n;g++)a[g*i+b]=v[g]}for(g=0;g<n;g++){for(b=0;b<i;b++)r[b]=a[g*i+b];for(e(r,v,s,o,i),b=0;b<i;b++)a[g*i+b]=Math.sqrt(v[b])}}function e(a,i,n,r,v){n[0]=0,r[0]=-u,r[1]=+u;for(var s=1,o=0;s<v;s++){for(var b=(a[s]+s*s-(a[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);b<=r[o];)o--,b=(a[s]+s*s-(a[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);o++,n[o]=s,r[o]=b,r[o+1]=+u}for(s=0,o=0;s<v;s++){for(;r[o+1]<s;)o++;i[s]=(s-n[o])*(s-n[o])+a[n[o]]}}},{clamp:86}],83:[function(t,N,V){},{}],84:[function(t,N,V){var m=typeof Reflect=="object"?Reflect:null,u=m&&typeof m.apply=="function"?m.apply:function(c,M,w){return Function.prototype.apply.call(c,M,w)},A;m&&typeof m.ownKeys=="function"?A=m.ownKeys:Object.getOwnPropertySymbols?A=function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:A=function(c){return Object.getOwnPropertyNames(c)};function T(x){console&&console.warn&&console.warn(x)}var e=Number.isNaN||function(c){return c!==c};function a(){a.init.call(this)}N.exports=a,N.exports.once=l,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function n(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(x){if(typeof x!="number"||x<0||e(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");i=x}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||e(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this};function r(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}a.prototype.getMaxListeners=function(){return r(this)},a.prototype.emit=function(c){for(var M=[],w=1;w<arguments.length;w++)M.push(arguments[w]);var p=c==="error",_=this._events;if(_!==void 0)p=p&&_.error===void 0;else if(!p)return!1;if(p){var h;if(M.length>0&&(h=M[0]),h instanceof Error)throw h;var L=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw L.context=h,L}var E=_[c];if(E===void 0)return!1;if(typeof E=="function")u(E,this,M);else for(var S=E.length,P=d(E,S),w=0;w<S;++w)u(P[w],this,M);return!0};function v(x,c,M,w){var p,_,h;if(n(M),_=x._events,_===void 0?(_=x._events=Object.create(null),x._eventsCount=0):(_.newListener!==void 0&&(x.emit("newListener",c,M.listener?M.listener:M),_=x._events),h=_[c]),h===void 0)h=_[c]=M,++x._eventsCount;else if(typeof h=="function"?h=_[c]=w?[M,h]:[h,M]:w?h.unshift(M):h.push(M),p=r(x),p>0&&h.length>p&&!h.warned){h.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=x,L.type=c,L.count=h.length,T(L)}return x}a.prototype.addListener=function(c,M){return v(this,c,M,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(c,M){return v(this,c,M,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(x,c,M){var w={fired:!1,wrapFn:void 0,target:x,type:c,listener:M},p=s.bind(w);return p.listener=M,w.wrapFn=p,p}a.prototype.once=function(c,M){return n(M),this.on(c,o(this,c,M)),this},a.prototype.prependOnceListener=function(c,M){return n(M),this.prependListener(c,o(this,c,M)),this},a.prototype.removeListener=function(c,M){var w,p,_,h,L;if(n(M),p=this._events,p===void 0)return this;if(w=p[c],w===void 0)return this;if(w===M||w.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete p[c],p.removeListener&&this.emit("removeListener",c,w.listener||M));else if(typeof w!="function"){for(_=-1,h=w.length-1;h>=0;h--)if(w[h]===M||w[h].listener===M){L=w[h].listener,_=h;break}if(_<0)return this;_===0?w.shift():f(w,_),w.length===1&&(p[c]=w[0]),p.removeListener!==void 0&&this.emit("removeListener",c,L||M)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(c){var M,w,p;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[c]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[c]),this;if(arguments.length===0){var _=Object.keys(w),h;for(p=0;p<_.length;++p)h=_[p],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=w[c],typeof M=="function")this.removeListener(c,M);else if(M!==void 0)for(p=M.length-1;p>=0;p--)this.removeListener(c,M[p]);return this};function b(x,c,M){var w=x._events;if(w===void 0)return[];var p=w[c];return p===void 0?[]:typeof p=="function"?M?[p.listener||p]:[p]:M?y(p):d(p,p.length)}a.prototype.listeners=function(c){return b(this,c,!0)},a.prototype.rawListeners=function(c){return b(this,c,!1)},a.listenerCount=function(x,c){return typeof x.listenerCount=="function"?x.listenerCount(c):g.call(x,c)},a.prototype.listenerCount=g;function g(x){var c=this._events;if(c!==void 0){var M=c[x];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?A(this._events):[]};function d(x,c){for(var M=new Array(c),w=0;w<c;++w)M[w]=x[w];return M}function f(x,c){for(;c+1<x.length;c++)x[c]=x[c+1];x.pop()}function y(x){for(var c=new Array(x.length),M=0;M<c.length;++M)c[M]=x[M].listener||x[M];return c}function l(x,c){return new Promise(function(M,w){function p(){_!==void 0&&x.removeListener("error",_),M([].slice.call(arguments))}var _;c!=="error"&&(_=function(L){x.removeListener(c,p),w(L)},x.once("error",_)),x.once(c,p)})}},{}],85:[function(t,N,V){(function(m){(function(){var u=t("base64-js"),A=t("ieee754");V.Buffer=i,V.SlowBuffer=y,V.INSPECT_MAX_BYTES=50;var T=2147483647;V.kMaxLength=T,i.TYPED_ARRAY_SUPPORT=e(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var se=new Uint8Array(1);return se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},se.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.byteOffset}});function a(se){if(se>T)throw new RangeError('The value "'+se+'" is invalid for option "size"');var ae=new Uint8Array(se);return ae.__proto__=i.prototype,ae}function i(se,ae,le){if(typeof se=="number"){if(typeof ae=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(se)}return n(se,ae,le)}typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192;function n(se,ae,le){if(typeof se=="string")return o(se,ae);if(ArrayBuffer.isView(se))return b(se);if(se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(Q(se,ArrayBuffer)||se&&Q(se.buffer,ArrayBuffer))return g(se,ae,le);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=se.valueOf&&se.valueOf();if(_e!=null&&_e!==se)return i.from(_e,ae,le);var fe=d(se);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return i.from(se[Symbol.toPrimitive]("string"),ae,le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}i.from=function(se,ae,le){return n(se,ae,le)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array;function r(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function v(se,ae,le){return r(se),se<=0?a(se):ae!==void 0?typeof le=="string"?a(se).fill(ae,le):a(se).fill(ae):a(se)}i.alloc=function(se,ae,le){return v(se,ae,le)};function s(se){return r(se),a(se<0?0:f(se)|0)}i.allocUnsafe=function(se){return s(se)},i.allocUnsafeSlow=function(se){return s(se)};function o(se,ae){if((typeof ae!="string"||ae==="")&&(ae="utf8"),!i.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);var le=l(se,ae)|0,_e=a(le),fe=_e.write(se,ae);return fe!==le&&(_e=_e.slice(0,fe)),_e}function b(se){for(var ae=se.length<0?0:f(se.length)|0,le=a(ae),_e=0;_e<ae;_e+=1)le[_e]=se[_e]&255;return le}function g(se,ae,le){if(ae<0||se.byteLength<ae)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<ae+(le||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return ae===void 0&&le===void 0?_e=new Uint8Array(se):le===void 0?_e=new Uint8Array(se,ae):_e=new Uint8Array(se,ae,le),_e.__proto__=i.prototype,_e}function d(se){if(i.isBuffer(se)){var ae=f(se.length)|0,le=a(ae);return le.length===0||se.copy(le,0,0,ae),le}if(se.length!==void 0)return typeof se.length!="number"||oe(se.length)?a(0):b(se);if(se.type==="Buffer"&&Array.isArray(se.data))return b(se.data)}function f(se){if(se>=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return se|0}function y(se){return+se!=se&&(se=0),i.alloc(+se)}i.isBuffer=function(ae){return ae!=null&&ae._isBuffer===!0&&ae!==i.prototype},i.compare=function(ae,le){if(Q(ae,Uint8Array)&&(ae=i.from(ae,ae.offset,ae.byteLength)),Q(le,Uint8Array)&&(le=i.from(le,le.offset,le.byteLength)),!i.isBuffer(ae)||!i.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ae===le)return 0;for(var _e=ae.length,fe=le.length,me=0,xe=Math.min(_e,fe);me<xe;++me)if(ae[me]!==le[me]){_e=ae[me],fe=le[me];break}return _e<fe?-1:fe<_e?1:0},i.isEncoding=function(ae){switch(String(ae).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(ae,le){if(!Array.isArray(ae))throw new TypeError('"list" argument must be an Array of Buffers');if(ae.length===0)return i.alloc(0);var _e;if(le===void 0)for(le=0,_e=0;_e<ae.length;++_e)le+=ae[_e].length;var fe=i.allocUnsafe(le),me=0;for(_e=0;_e<ae.length;++_e){var xe=ae[_e];if(Q(xe,Uint8Array)&&(xe=i.from(xe)),!i.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(fe,me),me+=xe.length}return fe};function l(se,ae){if(i.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||Q(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);var le=se.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&le===0)return 0;for(var fe=!1;;)switch(ae){case"ascii":case"latin1":case"binary":return le;case"utf8":case"utf-8":return U(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le*2;case"hex":return le>>>1;case"base64":return re(se).length;default:if(fe)return _e?-1:U(se).length;ae=(""+ae).toLowerCase(),fe=!0}}i.byteLength=l;function x(se,ae,le){var _e=!1;if((ae===void 0||ae<0)&&(ae=0),ae>this.length||((le===void 0||le>this.length)&&(le=this.length),le<=0)||(le>>>=0,ae>>>=0,le<=ae))return"";for(se||(se="utf8");;)switch(se){case"hex":return z(this,ae,le);case"utf8":case"utf-8":return F(this,ae,le);case"ascii":return R(this,ae,le);case"latin1":case"binary":return O(this,ae,le);case"base64":return P(this,ae,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,ae,le);default:if(_e)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),_e=!0}}i.prototype._isBuffer=!0;function c(se,ae,le){var _e=se[ae];se[ae]=se[le],se[le]=_e}i.prototype.swap16=function(){var ae=this.length;if(ae%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<ae;le+=2)c(this,le,le+1);return this},i.prototype.swap32=function(){var ae=this.length;if(ae%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<ae;le+=4)c(this,le,le+3),c(this,le+1,le+2);return this},i.prototype.swap64=function(){var ae=this.length;if(ae%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<ae;le+=8)c(this,le,le+7),c(this,le+1,le+6),c(this,le+2,le+5),c(this,le+3,le+4);return this},i.prototype.toString=function(){var ae=this.length;return ae===0?"":arguments.length===0?F(this,0,ae):x.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(ae){if(!i.isBuffer(ae))throw new TypeError("Argument must be a Buffer");return this===ae?!0:i.compare(this,ae)===0},i.prototype.inspect=function(){var ae="",le=V.INSPECT_MAX_BYTES;return ae=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(ae+=" ... "),"<Buffer "+ae+">"},i.prototype.compare=function(ae,le,_e,fe,me){if(Q(ae,Uint8Array)&&(ae=i.from(ae,ae.offset,ae.byteLength)),!i.isBuffer(ae))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ae);if(le===void 0&&(le=0),_e===void 0&&(_e=ae?ae.length:0),fe===void 0&&(fe=0),me===void 0&&(me=this.length),le<0||_e>ae.length||fe<0||me>this.length)throw new RangeError("out of range index");if(fe>=me&&le>=_e)return 0;if(fe>=me)return-1;if(le>=_e)return 1;if(le>>>=0,_e>>>=0,fe>>>=0,me>>>=0,this===ae)return 0;for(var xe=me-fe,ye=_e-le,be=Math.min(xe,ye),ke=this.slice(fe,me),De=ae.slice(le,_e),He=0;He<be;++He)if(ke[He]!==De[He]){xe=ke[He],ye=De[He];break}return xe<ye?-1:ye<xe?1:0};function M(se,ae,le,_e,fe){if(se.length===0)return-1;if(typeof le=="string"?(_e=le,le=0):le>2147483647?le=2147483647:le<-2147483648&&(le=-2147483648),le=+le,oe(le)&&(le=fe?0:se.length-1),le<0&&(le=se.length+le),le>=se.length){if(fe)return-1;le=se.length-1}else if(le<0)if(fe)le=0;else return-1;if(typeof ae=="string"&&(ae=i.from(ae,_e)),i.isBuffer(ae))return ae.length===0?-1:w(se,ae,le,_e,fe);if(typeof ae=="number")return ae=ae&255,typeof Uint8Array.prototype.indexOf=="function"?fe?Uint8Array.prototype.indexOf.call(se,ae,le):Uint8Array.prototype.lastIndexOf.call(se,ae,le):w(se,[ae],le,_e,fe);throw new TypeError("val must be string, number or Buffer")}function w(se,ae,le,_e,fe){var me=1,xe=se.length,ye=ae.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(se.length<2||ae.length<2)return-1;me=2,xe/=2,ye/=2,le/=2}function be(Le,Ze){return me===1?Le[Ze]:Le.readUInt16BE(Ze*me)}var ke;if(fe){var De=-1;for(ke=le;ke<xe;ke++)if(be(se,ke)===be(ae,De===-1?0:ke-De)){if(De===-1&&(De=ke),ke-De+1===ye)return De*me}else De!==-1&&(ke-=ke-De),De=-1}else for(le+ye>xe&&(le=xe-ye),ke=le;ke>=0;ke--){for(var He=!0,Ae=0;Ae<ye;Ae++)if(be(se,ke+Ae)!==be(ae,Ae)){He=!1;break}if(He)return ke}return-1}i.prototype.includes=function(ae,le,_e){return this.indexOf(ae,le,_e)!==-1},i.prototype.indexOf=function(ae,le,_e){return M(this,ae,le,_e,!0)},i.prototype.lastIndexOf=function(ae,le,_e){return M(this,ae,le,_e,!1)};function p(se,ae,le,_e){le=Number(le)||0;var fe=se.length-le;_e?(_e=Number(_e),_e>fe&&(_e=fe)):_e=fe;var me=ae.length;_e>me/2&&(_e=me/2);for(var xe=0;xe<_e;++xe){var ye=parseInt(ae.substr(xe*2,2),16);if(oe(ye))return xe;se[le+xe]=ye}return xe}function _(se,ae,le,_e){return Z(U(ae,se.length-le),se,le,_e)}function h(se,ae,le,_e){return Z(H(ae),se,le,_e)}function L(se,ae,le,_e){return h(se,ae,le,_e)}function E(se,ae,le,_e){return Z(re(ae),se,le,_e)}function S(se,ae,le,_e){return Z(q(ae,se.length-le),se,le,_e)}i.prototype.write=function(ae,le,_e,fe){if(le===void 0)fe="utf8",_e=this.length,le=0;else if(_e===void 0&&typeof le=="string")fe=le,_e=this.length,le=0;else if(isFinite(le))le=le>>>0,isFinite(_e)?(_e=_e>>>0,fe===void 0&&(fe="utf8")):(fe=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var me=this.length-le;if((_e===void 0||_e>me)&&(_e=me),ae.length>0&&(_e<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");for(var xe=!1;;)switch(fe){case"hex":return p(this,ae,le,_e);case"utf8":case"utf-8":return _(this,ae,le,_e);case"ascii":return h(this,ae,le,_e);case"latin1":case"binary":return L(this,ae,le,_e);case"base64":return E(this,ae,le,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,ae,le,_e);default:if(xe)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),xe=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(se,ae,le){return ae===0&&le===se.length?u.fromByteArray(se):u.fromByteArray(se.slice(ae,le))}function F(se,ae,le){le=Math.min(se.length,le);for(var _e=[],fe=ae;fe<le;){var me=se[fe],xe=null,ye=me>239?4:me>223?3:me>191?2:1;if(fe+ye<=le){var be,ke,De,He;switch(ye){case 1:me<128&&(xe=me);break;case 2:be=se[fe+1],(be&192)===128&&(He=(me&31)<<6|be&63,He>127&&(xe=He));break;case 3:be=se[fe+1],ke=se[fe+2],(be&192)===128&&(ke&192)===128&&(He=(me&15)<<12|(be&63)<<6|ke&63,He>2047&&(He<55296||He>57343)&&(xe=He));break;case 4:be=se[fe+1],ke=se[fe+2],De=se[fe+3],(be&192)===128&&(ke&192)===128&&(De&192)===128&&(He=(me&15)<<18|(be&63)<<12|(ke&63)<<6|De&63,He>65535&&He<1114112&&(xe=He))}}xe===null?(xe=65533,ye=1):xe>65535&&(xe-=65536,_e.push(xe>>>10&1023|55296),xe=56320|xe&1023),_e.push(xe),fe+=ye}return D(_e)}var I=4096;function D(se){var ae=se.length;if(ae<=I)return String.fromCharCode.apply(String,se);for(var le="",_e=0;_e<ae;)le+=String.fromCharCode.apply(String,se.slice(_e,_e+=I));return le}function R(se,ae,le){var _e="";le=Math.min(se.length,le);for(var fe=ae;fe<le;++fe)_e+=String.fromCharCode(se[fe]&127);return _e}function O(se,ae,le){var _e="";le=Math.min(se.length,le);for(var fe=ae;fe<le;++fe)_e+=String.fromCharCode(se[fe]);return _e}function z(se,ae,le){var _e=se.length;(!ae||ae<0)&&(ae=0),(!le||le<0||le>_e)&&(le=_e);for(var fe="",me=ae;me<le;++me)fe+=$(se[me]);return fe}function G(se,ae,le){for(var _e=se.slice(ae,le),fe="",me=0;me<_e.length;me+=2)fe+=String.fromCharCode(_e[me]+_e[me+1]*256);return fe}i.prototype.slice=function(ae,le){var _e=this.length;ae=~~ae,le=le===void 0?_e:~~le,ae<0?(ae+=_e,ae<0&&(ae=0)):ae>_e&&(ae=_e),le<0?(le+=_e,le<0&&(le=0)):le>_e&&(le=_e),le<ae&&(le=ae);var fe=this.subarray(ae,le);return fe.__proto__=i.prototype,fe};function Y(se,ae,le){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+ae>le)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(ae,le,_e){ae=ae>>>0,le=le>>>0,_e||Y(ae,le,this.length);for(var fe=this[ae],me=1,xe=0;++xe<le&&(me*=256);)fe+=this[ae+xe]*me;return fe},i.prototype.readUIntBE=function(ae,le,_e){ae=ae>>>0,le=le>>>0,_e||Y(ae,le,this.length);for(var fe=this[ae+--le],me=1;le>0&&(me*=256);)fe+=this[ae+--le]*me;return fe},i.prototype.readUInt8=function(ae,le){return ae=ae>>>0,le||Y(ae,1,this.length),this[ae]},i.prototype.readUInt16LE=function(ae,le){return ae=ae>>>0,le||Y(ae,2,this.length),this[ae]|this[ae+1]<<8},i.prototype.readUInt16BE=function(ae,le){return ae=ae>>>0,le||Y(ae,2,this.length),this[ae]<<8|this[ae+1]},i.prototype.readUInt32LE=function(ae,le){return ae=ae>>>0,le||Y(ae,4,this.length),(this[ae]|this[ae+1]<<8|this[ae+2]<<16)+this[ae+3]*16777216},i.prototype.readUInt32BE=function(ae,le){return ae=ae>>>0,le||Y(ae,4,this.length),this[ae]*16777216+(this[ae+1]<<16|this[ae+2]<<8|this[ae+3])},i.prototype.readIntLE=function(ae,le,_e){ae=ae>>>0,le=le>>>0,_e||Y(ae,le,this.length);for(var fe=this[ae],me=1,xe=0;++xe<le&&(me*=256);)fe+=this[ae+xe]*me;return me*=128,fe>=me&&(fe-=Math.pow(2,8*le)),fe},i.prototype.readIntBE=function(ae,le,_e){ae=ae>>>0,le=le>>>0,_e||Y(ae,le,this.length);for(var fe=le,me=1,xe=this[ae+--fe];fe>0&&(me*=256);)xe+=this[ae+--fe]*me;return me*=128,xe>=me&&(xe-=Math.pow(2,8*le)),xe},i.prototype.readInt8=function(ae,le){return ae=ae>>>0,le||Y(ae,1,this.length),this[ae]&128?(255-this[ae]+1)*-1:this[ae]},i.prototype.readInt16LE=function(ae,le){ae=ae>>>0,le||Y(ae,2,this.length);var _e=this[ae]|this[ae+1]<<8;return _e&32768?_e|4294901760:_e},i.prototype.readInt16BE=function(ae,le){ae=ae>>>0,le||Y(ae,2,this.length);var _e=this[ae+1]|this[ae]<<8;return _e&32768?_e|4294901760:_e},i.prototype.readInt32LE=function(ae,le){return ae=ae>>>0,le||Y(ae,4,this.length),this[ae]|this[ae+1]<<8|this[ae+2]<<16|this[ae+3]<<24},i.prototype.readInt32BE=function(ae,le){return ae=ae>>>0,le||Y(ae,4,this.length),this[ae]<<24|this[ae+1]<<16|this[ae+2]<<8|this[ae+3]},i.prototype.readFloatLE=function(ae,le){return ae=ae>>>0,le||Y(ae,4,this.length),A.read(this,ae,!0,23,4)},i.prototype.readFloatBE=function(ae,le){return ae=ae>>>0,le||Y(ae,4,this.length),A.read(this,ae,!1,23,4)},i.prototype.readDoubleLE=function(ae,le){return ae=ae>>>0,le||Y(ae,8,this.length),A.read(this,ae,!0,52,8)},i.prototype.readDoubleBE=function(ae,le){return ae=ae>>>0,le||Y(ae,8,this.length),A.read(this,ae,!1,52,8)};function ee(se,ae,le,_e,fe,me){if(!i.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae>fe||ae<me)throw new RangeError('"value" argument is out of bounds');if(le+_e>se.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(ae,le,_e,fe){if(ae=+ae,le=le>>>0,_e=_e>>>0,!fe){var me=Math.pow(2,8*_e)-1;ee(this,ae,le,_e,me,0)}var xe=1,ye=0;for(this[le]=ae&255;++ye<_e&&(xe*=256);)this[le+ye]=ae/xe&255;return le+_e},i.prototype.writeUIntBE=function(ae,le,_e,fe){if(ae=+ae,le=le>>>0,_e=_e>>>0,!fe){var me=Math.pow(2,8*_e)-1;ee(this,ae,le,_e,me,0)}var xe=_e-1,ye=1;for(this[le+xe]=ae&255;--xe>=0&&(ye*=256);)this[le+xe]=ae/ye&255;return le+_e},i.prototype.writeUInt8=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,1,255,0),this[le]=ae&255,le+1},i.prototype.writeUInt16LE=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,2,65535,0),this[le]=ae&255,this[le+1]=ae>>>8,le+2},i.prototype.writeUInt16BE=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,2,65535,0),this[le]=ae>>>8,this[le+1]=ae&255,le+2},i.prototype.writeUInt32LE=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,4,4294967295,0),this[le+3]=ae>>>24,this[le+2]=ae>>>16,this[le+1]=ae>>>8,this[le]=ae&255,le+4},i.prototype.writeUInt32BE=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,4,4294967295,0),this[le]=ae>>>24,this[le+1]=ae>>>16,this[le+2]=ae>>>8,this[le+3]=ae&255,le+4},i.prototype.writeIntLE=function(ae,le,_e,fe){if(ae=+ae,le=le>>>0,!fe){var me=Math.pow(2,8*_e-1);ee(this,ae,le,_e,me-1,-me)}var xe=0,ye=1,be=0;for(this[le]=ae&255;++xe<_e&&(ye*=256);)ae<0&&be===0&&this[le+xe-1]!==0&&(be=1),this[le+xe]=(ae/ye>>0)-be&255;return le+_e},i.prototype.writeIntBE=function(ae,le,_e,fe){if(ae=+ae,le=le>>>0,!fe){var me=Math.pow(2,8*_e-1);ee(this,ae,le,_e,me-1,-me)}var xe=_e-1,ye=1,be=0;for(this[le+xe]=ae&255;--xe>=0&&(ye*=256);)ae<0&&be===0&&this[le+xe+1]!==0&&(be=1),this[le+xe]=(ae/ye>>0)-be&255;return le+_e},i.prototype.writeInt8=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,1,127,-128),ae<0&&(ae=255+ae+1),this[le]=ae&255,le+1},i.prototype.writeInt16LE=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,2,32767,-32768),this[le]=ae&255,this[le+1]=ae>>>8,le+2},i.prototype.writeInt16BE=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,2,32767,-32768),this[le]=ae>>>8,this[le+1]=ae&255,le+2},i.prototype.writeInt32LE=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,4,2147483647,-2147483648),this[le]=ae&255,this[le+1]=ae>>>8,this[le+2]=ae>>>16,this[le+3]=ae>>>24,le+4},i.prototype.writeInt32BE=function(ae,le,_e){return ae=+ae,le=le>>>0,_e||ee(this,ae,le,4,2147483647,-2147483648),ae<0&&(ae=4294967295+ae+1),this[le]=ae>>>24,this[le+1]=ae>>>16,this[le+2]=ae>>>8,this[le+3]=ae&255,le+4};function j(se,ae,le,_e,fe,me){if(le+_e>se.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("Index out of range")}function X(se,ae,le,_e,fe){return ae=+ae,le=le>>>0,fe||j(se,ae,le,4),A.write(se,ae,le,_e,23,4),le+4}i.prototype.writeFloatLE=function(ae,le,_e){return X(this,ae,le,!0,_e)},i.prototype.writeFloatBE=function(ae,le,_e){return X(this,ae,le,!1,_e)};function ie(se,ae,le,_e,fe){return ae=+ae,le=le>>>0,fe||j(se,ae,le,8),A.write(se,ae,le,_e,52,8),le+8}i.prototype.writeDoubleLE=function(ae,le,_e){return ie(this,ae,le,!0,_e)},i.prototype.writeDoubleBE=function(ae,le,_e){return ie(this,ae,le,!1,_e)},i.prototype.copy=function(ae,le,_e,fe){if(!i.isBuffer(ae))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!fe&&fe!==0&&(fe=this.length),le>=ae.length&&(le=ae.length),le||(le=0),fe>0&&fe<_e&&(fe=_e),fe===_e||ae.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),ae.length-le<fe-_e&&(fe=ae.length-le+_e);var me=fe-_e;if(this===ae&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(le,_e,fe);else if(this===ae&&_e<le&&le<fe)for(var xe=me-1;xe>=0;--xe)ae[xe+le]=this[xe+_e];else Uint8Array.prototype.set.call(ae,this.subarray(_e,fe),le);return me},i.prototype.fill=function(ae,le,_e,fe){if(typeof ae=="string"){if(typeof le=="string"?(fe=le,le=0,_e=this.length):typeof _e=="string"&&(fe=_e,_e=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!i.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(ae.length===1){var me=ae.charCodeAt(0);(fe==="utf8"&&me<128||fe==="latin1")&&(ae=me)}}else typeof ae=="number"&&(ae=ae&255);if(le<0||this.length<le||this.length<_e)throw new RangeError("Out of range index");if(_e<=le)return this;le=le>>>0,_e=_e===void 0?this.length:_e>>>0,ae||(ae=0);var xe;if(typeof ae=="number")for(xe=le;xe<_e;++xe)this[xe]=ae;else{var ye=i.isBuffer(ae)?ae:i.from(ae,fe),be=ye.length;if(be===0)throw new TypeError('The value "'+ae+'" is invalid for argument "value"');for(xe=0;xe<_e-le;++xe)this[xe+le]=ye[xe%be]}return this};var he=/[^+/0-9A-Za-z-_]/g;function K(se){if(se=se.split("=")[0],se=se.trim().replace(he,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function $(se){return se<16?"0"+se.toString(16):se.toString(16)}function U(se,ae){ae=ae||1/0;for(var le,_e=se.length,fe=null,me=[],xe=0;xe<_e;++xe){if(le=se.charCodeAt(xe),le>55295&&le<57344){if(!fe){if(le>56319){(ae-=3)>-1&&me.push(239,191,189);continue}else if(xe+1===_e){(ae-=3)>-1&&me.push(239,191,189);continue}fe=le;continue}if(le<56320){(ae-=3)>-1&&me.push(239,191,189),fe=le;continue}le=(fe-55296<<10|le-56320)+65536}else fe&&(ae-=3)>-1&&me.push(239,191,189);if(fe=null,le<128){if((ae-=1)<0)break;me.push(le)}else if(le<2048){if((ae-=2)<0)break;me.push(le>>6|192,le&63|128)}else if(le<65536){if((ae-=3)<0)break;me.push(le>>12|224,le>>6&63|128,le&63|128)}else if(le<1114112){if((ae-=4)<0)break;me.push(le>>18|240,le>>12&63|128,le>>6&63|128,le&63|128)}else throw new Error("Invalid code point")}return me}function H(se){for(var ae=[],le=0;le<se.length;++le)ae.push(se.charCodeAt(le)&255);return ae}function q(se,ae){for(var le,_e,fe,me=[],xe=0;xe<se.length&&!((ae-=2)<0);++xe)le=se.charCodeAt(xe),_e=le>>8,fe=le%256,me.push(fe),me.push(_e);return me}function re(se){return u.toByteArray(K(se))}function Z(se,ae,le,_e){for(var fe=0;fe<_e&&!(fe+le>=ae.length||fe>=se.length);++fe)ae[fe+le]=se[fe];return fe}function Q(se,ae){return se instanceof ae||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===ae.name}function oe(se){return se!==se}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(t,N,V){N.exports=m;function m(u,A,T){return A<T?u<A?A:u>T?T:u:u<T?T:u>A?A:u}},{}],87:[function(t,N,V){var m=t("clamp");N.exports=u,N.exports.to=u,N.exports.from=A;function u(T,e){e==null&&(e=!0);var a=T[0],i=T[1],n=T[2],r=T[3];r==null&&(r=e?1:255),e&&(a*=255,i*=255,n*=255,r*=255),a=m(a,0,255)&255,i=m(i,0,255)&255,n=m(n,0,255)&255,r=m(r,0,255)&255;var v=a*16777216+(i<<16)+(n<<8)+r;return v}function A(T,e){T=+T;var a=T>>>24,i=(T&16711680)>>>16,n=(T&65280)>>>8,r=T&255;return e===!1?[a,i,n,r]:[a/255,i/255,n/255,r/255]}},{clamp:86}],88:[function(t,N,V){N.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(t,N,V){var m=t("color-rgba"),u=t("clamp"),A=t("dtype");N.exports=function(a,i){(i==="float"||!i)&&(i="array"),i==="uint"&&(i="uint8"),i==="uint_clamped"&&(i="uint8_clamped");var n=A(i),r=new n(4),v=i!=="uint8"&&i!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=m(a),a[0]/=255,a[1]/=255,a[2]/=255),T(a)?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:255,v&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(v?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:1):(r[0]=u(Math.floor(a[0]*255),0,255),r[1]=u(Math.floor(a[1]*255),0,255),r[2]=u(Math.floor(a[2]*255),0,255),r[3]=a[3]==null?255:u(Math.floor(a[3]*255),0,255)),r)};function T(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(t,N,V){(function(m){(function(){var u=t("color-name"),A=t("is-plain-obj"),T=t("defined");N.exports=a;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(i){var n,r=[],v=1,s;if(typeof i=="string")if(u[i])r=u[i].slice(),s="rgb";else if(i==="transparent")v=0,s="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),b=o.length,g=b<=4;v=1,g?(r=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],b===4&&(v=parseInt(o[3]+o[3],16)/255)):(r=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],b===8&&(v=parseInt(o[6]+o[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),s="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var d=n[1],f=d==="rgb",o=d.replace(/a$/,"");s=o;var b=o==="cmyk"?4:o==="gray"?1:3;r=n[2].trim().split(/\s*,\s*/).map(function(c,M){if(/%$/.test(c))return M===b?parseFloat(c)/100:o==="rgb"?parseFloat(c)*255/100:parseFloat(c);if(o[M]==="h"){if(/deg$/.test(c))return parseFloat(c);if(e[c]!==void 0)return e[c]}return parseFloat(c)}),d===o&&r.push(1),v=f||r[b]===void 0?1:r[b],r=r.slice(0,b)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(r=i.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(i))s="rgb",r=[i>>>16,(i&65280)>>>8,i&255];else if(A(i)){var y=T(i.r,i.red,i.R,null);y!==null?(s="rgb",r=[y,T(i.g,i.green,i.G),T(i.b,i.blue,i.B)]):(s="hsl",r=[T(i.h,i.hue,i.H),T(i.s,i.saturation,i.S),T(i.l,i.lightness,i.L,i.b,i.brightness)]),v=T(i.a,i.alpha,i.opacity,1),i.opacity!=null&&(v/=100)}else(Array.isArray(i)||m.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(r=[i[0],i[1],i[2]],s="rgb",v=i.length===4?i[3]:1);return{space:s,values:r,alpha:v}}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(t,N,V){var m=t("color-parse"),u=t("color-space/hsl"),A=t("clamp");N.exports=function(e){var a,i=m(e);return i.space?(a=Array(3),a[0]=A(i.values[0],0,255),a[1]=A(i.values[1],0,255),a[2]=A(i.values[2],0,255),i.space[0]==="h"&&(a=u.rgb(a)),a.push(A(i.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(t,N,V){var m=t("./rgb");N.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(u){var A=u[0]/360,T=u[1]/100,e=u[2]/100,a,i,n,r,v;if(T===0)return v=e*255,[v,v,v];e<.5?i=e*(1+T):i=e+T-e*T,a=2*e-i,r=[0,0,0];for(var s=0;s<3;s++)n=A+1/3*-(s-1),n<0?n++:n>1&&n--,6*n<1?v=a+(i-a)*6*n:2*n<1?v=i:3*n<2?v=a+(i-a)*(2/3-n)*6:v=a,r[s]=v*255;return r}},m.hsl=function(u){var A=u[0]/255,T=u[1]/255,e=u[2]/255,a=Math.min(A,T,e),i=Math.max(A,T,e),n=i-a,r,v,s;return i===a?r=0:A===i?r=(T-e)/n:T===i?r=2+(e-A)/n:e===i&&(r=4+(A-T)/n),r=Math.min(r*60,360),r<0&&(r+=360),s=(a+i)/2,i===a?v=0:s<=.5?v=n/(i+a):v=n/(2-i-a),[r,v*100,s*100]}},{"./rgb":93}],93:[function(t,N,V){N.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(t,N,V){N.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(t,N,V){N.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(t,N,V){N.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(t,N,V){N.exports=["normal","italic","oblique"]},{}],98:[function(t,N,V){N.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(t,N,V){N.exports={parse:t("./parse"),stringify:t("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(t,N,V){var m=t("css-font-size-keywords");N.exports={isSize:function(A){return/^[\d\.]/.test(A)||A.indexOf("/")!==-1||m.indexOf(A)!==-1}}},{"css-font-size-keywords":95}],101:[function(t,N,V){var m=t("unquote"),u=t("css-global-keywords"),A=t("css-system-font-keywords"),T=t("css-font-weight-keywords"),e=t("css-font-style-keywords"),a=t("css-font-stretch-keywords"),i=t("string-split-by"),n=t("./lib/util").isSize;N.exports=v;var r=v.cache={};function v(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(r[o])return r[o];if(o==="")throw new Error("Cannot parse an empty string.");if(A.indexOf(o)!==-1)return r[o]={system:o};for(var b={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},g=i(o,/\s+/),d;d=g.shift();){if(u.indexOf(d)!==-1)return["style","variant","weight","stretch"].forEach(function(y){b[y]=d}),r[o]=b;if(e.indexOf(d)!==-1){b.style=d;continue}if(d==="normal"||d==="small-caps"){b.variant=d;continue}if(a.indexOf(d)!==-1){b.stretch=d;continue}if(T.indexOf(d)!==-1){b.weight=d;continue}if(n(d)){var f=i(d,"/");if(b.size=f[0],f[1]!=null?b.lineHeight=s(f[1]):g[0]==="/"&&(g.shift(),b.lineHeight=s(g.shift())),!g.length)throw new Error("Missing required font-family.");return b.family=i(g.join(" "),/\s*,\s*/).map(m),r[o]=b}throw new Error("Unknown or unsupported font token: "+d)}throw new Error("Missing required font-size.")}function s(o){var b=parseFloat(o);return b.toString()===o?b:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(t,N,V){var m=t("pick-by-alias"),u=t("./lib/util").isSize,A=o(t("css-global-keywords")),T=o(t("css-system-font-keywords")),e=o(t("css-font-weight-keywords")),a=o(t("css-font-style-keywords")),i=o(t("css-font-stretch-keywords")),n={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},v={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};N.exports=function(g){if(g=m(g,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),g.system)return g.system&&s(g.system,T),g.system;if(s(g.style,a),s(g.variant,n),s(g.weight,e),s(g.stretch,i),g.size==null&&(g.size=v.size),typeof g.size=="number"&&(g.size+="px"),!u)throw Error("Bad size value `"+g.size+"`");g.family||(g.family=v.family),Array.isArray(g.family)&&(g.family.length||(g.family=[v.family]),g.family=g.family.map(function(f){return r[f]?f:'"'+f+'"'}).join(", "));var d=[];return d.push(g.style),g.variant!==g.style&&d.push(g.variant),g.weight!==g.variant&&g.weight!==g.style&&d.push(g.weight),g.stretch!==g.weight&&g.stretch!==g.variant&&g.stretch!==g.style&&d.push(g.stretch),d.push(g.size+(g.lineHeight==null||g.lineHeight==="normal"||g.lineHeight+""=="1"?"":"/"+g.lineHeight)),d.push(g.family),d.filter(Boolean).join(" ")};function s(b,g){if(b&&!g[b]&&!A[b])throw Error("Unknown keyword `"+b+"`");return b}function o(b){for(var g={},d=0;d<b.length;d++)g[b[d]]=1;return g}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(t,N,V){N.exports=["inherit","initial","unset"]},{}],104:[function(t,N,V){N.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(t,N,V){var m=t("type/value/is"),u=t("type/value/ensure"),A=t("type/plain-function/ensure"),T=t("es5-ext/object/copy"),e=t("es5-ext/object/normalize-options"),a=t("es5-ext/object/map"),i=Function.prototype.bind,n=Object.defineProperty,r=Object.prototype.hasOwnProperty,v;v=function(s,o,b){var g=u(o)&&A(o.value),d;return d=T(o),delete d.writable,delete d.value,d.get=function(){return!b.overwriteDefinition&&r.call(this,s)?g:(o.value=i.call(g,b.resolveContext?b.resolveContext(this):this),n(this,s,o),this[s])},d},N.exports=function(s){var o=e(arguments[1]);return m(o.resolveContext)&&A(o.resolveContext),a(s,function(b,g){return v(g,b,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(t,N,V){var m=t("type/value/is"),u=t("type/plain-function/is"),A=t("es5-ext/object/assign"),T=t("es5-ext/object/normalize-options"),e=t("es5-ext/string/#/contains"),a=N.exports=function(i,n){var r,v,s,o,b;return arguments.length<2||typeof i!="string"?(o=n,n=i,i=null):o=arguments[2],m(i)?(r=e.call(i,"c"),v=e.call(i,"e"),s=e.call(i,"w")):(r=s=!0,v=!1),b={value:n,configurable:r,enumerable:v,writable:s},o?A(T(o),b):b};a.gs=function(i,n,r){var v,s,o,b;return typeof i!="string"?(o=r,r=n,n=i,i=null):o=arguments[3],m(n)?u(n)?m(r)?u(r)||(o=r,r=void 0):r=void 0:(o=n,n=r=void 0):n=void 0,m(i)?(v=e.call(i,"c"),s=e.call(i,"e")):(v=!0,s=!1),b={get:n,set:r,configurable:v,enumerable:s},o?A(T(o),b):b}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(t,N,V){(function(m,u){u(typeof V=="object"&&typeof N<"u"?V:m.d3=m.d3||{})})(this,function(m){function u(U,H){return U<H?-1:U>H?1:U>=H?0:NaN}function A(U){return U.length===1&&(U=T(U)),{left:function(H,q,re,Z){for(re==null&&(re=0),Z==null&&(Z=H.length);re<Z;){var Q=re+Z>>>1;U(H[Q],q)<0?re=Q+1:Z=Q}return re},right:function(H,q,re,Z){for(re==null&&(re=0),Z==null&&(Z=H.length);re<Z;){var Q=re+Z>>>1;U(H[Q],q)>0?Z=Q:re=Q+1}return re}}}function T(U){return function(H,q){return u(U(H),q)}}var e=A(u),a=e.right,i=e.left;function n(U,H){H==null&&(H=r);for(var q=0,re=U.length-1,Z=U[0],Q=new Array(re<0?0:re);q<re;)Q[q]=H(Z,Z=U[++q]);return Q}function r(U,H){return[U,H]}function v(U,H,q){var re=U.length,Z=H.length,Q=new Array(re*Z),oe,se,ae,le;for(q==null&&(q=r),oe=ae=0;oe<re;++oe)for(le=U[oe],se=0;se<Z;++se,++ae)Q[ae]=q(le,H[se]);return Q}function s(U,H){return H<U?-1:H>U?1:H>=U?0:NaN}function o(U){return U===null?NaN:+U}function b(U,H){var q=U.length,re=0,Z=-1,Q=0,oe,se,ae=0;if(H==null)for(;++Z<q;)isNaN(oe=o(U[Z]))||(se=oe-Q,Q+=se/++re,ae+=se*(oe-Q));else for(;++Z<q;)isNaN(oe=o(H(U[Z],Z,U)))||(se=oe-Q,Q+=se/++re,ae+=se*(oe-Q));if(re>1)return ae/(re-1)}function g(U,H){var q=b(U,H);return q&&Math.sqrt(q)}function d(U,H){var q=U.length,re=-1,Z,Q,oe;if(H==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=oe=Z;++re<q;)(Z=U[re])!=null&&(Q>Z&&(Q=Z),oe<Z&&(oe=Z))}else for(;++re<q;)if((Z=H(U[re],re,U))!=null&&Z>=Z)for(Q=oe=Z;++re<q;)(Z=H(U[re],re,U))!=null&&(Q>Z&&(Q=Z),oe<Z&&(oe=Z));return[Q,oe]}var f=Array.prototype,y=f.slice,l=f.map;function x(U){return function(){return U}}function c(U){return U}function M(U,H,q){U=+U,H=+H,q=(Z=arguments.length)<2?(H=U,U=0,1):Z<3?1:+q;for(var re=-1,Z=Math.max(0,Math.ceil((H-U)/q))|0,Q=new Array(Z);++re<Z;)Q[re]=U+re*q;return Q}var w=Math.sqrt(50),p=Math.sqrt(10),_=Math.sqrt(2);function h(U,H,q){var re,Z=-1,Q,oe,se;if(H=+H,U=+U,q=+q,U===H&&q>0)return[U];if((re=H<U)&&(Q=U,U=H,H=Q),(se=L(U,H,q))===0||!isFinite(se))return[];if(se>0)for(U=Math.ceil(U/se),H=Math.floor(H/se),oe=new Array(Q=Math.ceil(H-U+1));++Z<Q;)oe[Z]=(U+Z)*se;else for(U=Math.floor(U*se),H=Math.ceil(H*se),oe=new Array(Q=Math.ceil(U-H+1));++Z<Q;)oe[Z]=(U-Z)/se;return re&&oe.reverse(),oe}function L(U,H,q){var re=(H-U)/Math.max(0,q),Z=Math.floor(Math.log(re)/Math.LN10),Q=re/Math.pow(10,Z);return Z>=0?(Q>=w?10:Q>=p?5:Q>=_?2:1)*Math.pow(10,Z):-Math.pow(10,-Z)/(Q>=w?10:Q>=p?5:Q>=_?2:1)}function E(U,H,q){var re=Math.abs(H-U)/Math.max(0,q),Z=Math.pow(10,Math.floor(Math.log(re)/Math.LN10)),Q=re/Z;return Q>=w?Z*=10:Q>=p?Z*=5:Q>=_&&(Z*=2),H<U?-Z:Z}function S(U){return Math.ceil(Math.log(U.length)/Math.LN2)+1}function P(){var U=c,H=d,q=S;function re(Z){var Q,oe=Z.length,se,ae=new Array(oe);for(Q=0;Q<oe;++Q)ae[Q]=U(Z[Q],Q,Z);var le=H(ae),_e=le[0],fe=le[1],me=q(ae,_e,fe);Array.isArray(me)||(me=E(_e,fe,me),me=M(Math.ceil(_e/me)*me,fe,me));for(var xe=me.length;me[0]<=_e;)me.shift(),--xe;for(;me[xe-1]>fe;)me.pop(),--xe;var ye=new Array(xe+1),be;for(Q=0;Q<=xe;++Q)be=ye[Q]=[],be.x0=Q>0?me[Q-1]:_e,be.x1=Q<xe?me[Q]:fe;for(Q=0;Q<oe;++Q)se=ae[Q],_e<=se&&se<=fe&&ye[a(me,se,0,xe)].push(Z[Q]);return ye}return re.value=function(Z){return arguments.length?(U=typeof Z=="function"?Z:x(Z),re):U},re.domain=function(Z){return arguments.length?(H=typeof Z=="function"?Z:x([Z[0],Z[1]]),re):H},re.thresholds=function(Z){return arguments.length?(q=typeof Z=="function"?Z:Array.isArray(Z)?x(y.call(Z)):x(Z),re):q},re}function F(U,H,q){if(q==null&&(q=o),!!(re=U.length)){if((H=+H)<=0||re<2)return+q(U[0],0,U);if(H>=1)return+q(U[re-1],re-1,U);var re,Z=(re-1)*H,Q=Math.floor(Z),oe=+q(U[Q],Q,U),se=+q(U[Q+1],Q+1,U);return oe+(se-oe)*(Z-Q)}}function I(U,H,q){return U=l.call(U,o).sort(u),Math.ceil((q-H)/(2*(F(U,.75)-F(U,.25))*Math.pow(U.length,-1/3)))}function D(U,H,q){return Math.ceil((q-H)/(3.5*g(U)*Math.pow(U.length,-1/3)))}function R(U,H){var q=U.length,re=-1,Z,Q;if(H==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=U[re])!=null&&Z>Q&&(Q=Z)}else for(;++re<q;)if((Z=H(U[re],re,U))!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=H(U[re],re,U))!=null&&Z>Q&&(Q=Z);return Q}function O(U,H){var q=U.length,re=q,Z=-1,Q,oe=0;if(H==null)for(;++Z<q;)isNaN(Q=o(U[Z]))?--re:oe+=Q;else for(;++Z<q;)isNaN(Q=o(H(U[Z],Z,U)))?--re:oe+=Q;if(re)return oe/re}function z(U,H){var q=U.length,re=-1,Z,Q=[];if(H==null)for(;++re<q;)isNaN(Z=o(U[re]))||Q.push(Z);else for(;++re<q;)isNaN(Z=o(H(U[re],re,U)))||Q.push(Z);return F(Q.sort(u),.5)}function G(U){for(var H=U.length,q,re=-1,Z=0,Q,oe;++re<H;)Z+=U[re].length;for(Q=new Array(Z);--H>=0;)for(oe=U[H],q=oe.length;--q>=0;)Q[--Z]=oe[q];return Q}function Y(U,H){var q=U.length,re=-1,Z,Q;if(H==null){for(;++re<q;)if((Z=U[re])!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=U[re])!=null&&Q>Z&&(Q=Z)}else for(;++re<q;)if((Z=H(U[re],re,U))!=null&&Z>=Z)for(Q=Z;++re<q;)(Z=H(U[re],re,U))!=null&&Q>Z&&(Q=Z);return Q}function ee(U,H){for(var q=H.length,re=new Array(q);q--;)re[q]=U[H[q]];return re}function j(U,H){if(!!(q=U.length)){var q,re=0,Z=0,Q,oe=U[Z];for(H==null&&(H=u);++re<q;)(H(Q=U[re],oe)<0||H(oe,oe)!==0)&&(oe=Q,Z=re);if(H(oe,oe)===0)return Z}}function X(U,H,q){for(var re=(q==null?U.length:q)-(H=H==null?0:+H),Z,Q;re;)Q=Math.random()*re--|0,Z=U[re+H],U[re+H]=U[Q+H],U[Q+H]=Z;return U}function ie(U,H){var q=U.length,re=-1,Z,Q=0;if(H==null)for(;++re<q;)(Z=+U[re])&&(Q+=Z);else for(;++re<q;)(Z=+H(U[re],re,U))&&(Q+=Z);return Q}function he(U){if(!(Q=U.length))return[];for(var H=-1,q=Y(U,K),re=new Array(q);++H<q;)for(var Z=-1,Q,oe=re[H]=new Array(Q);++Z<Q;)oe[Z]=U[Z][H];return re}function K(U){return U.length}function $(){return he(arguments)}m.bisect=a,m.bisectRight=a,m.bisectLeft=i,m.ascending=u,m.bisector=A,m.cross=v,m.descending=s,m.deviation=g,m.extent=d,m.histogram=P,m.thresholdFreedmanDiaconis=I,m.thresholdScott=D,m.thresholdSturges=S,m.max=R,m.mean=O,m.median=z,m.merge=G,m.min=Y,m.pairs=n,m.permute=ee,m.quantile=F,m.range=M,m.scan=j,m.shuffle=X,m.sum=ie,m.ticks=h,m.tickIncrement=L,m.tickStep=E,m.transpose=he,m.variance=b,m.zip=$,Object.defineProperty(m,"__esModule",{value:!0})})},{}],108:[function(t,N,V){(function(m,u){u(typeof V=="object"&&typeof N<"u"?V:m.d3=m.d3||{})})(this,function(m){var u="$";function A(){}A.prototype=T.prototype={constructor:A,has:function(f){return u+f in this},get:function(f){return this[u+f]},set:function(f,y){return this[u+f]=y,this},remove:function(f){var y=u+f;return y in this&&delete this[y]},clear:function(){for(var f in this)f[0]===u&&delete this[f]},keys:function(){var f=[];for(var y in this)y[0]===u&&f.push(y.slice(1));return f},values:function(){var f=[];for(var y in this)y[0]===u&&f.push(this[y]);return f},entries:function(){var f=[];for(var y in this)y[0]===u&&f.push({key:y.slice(1),value:this[y]});return f},size:function(){var f=0;for(var y in this)y[0]===u&&++f;return f},empty:function(){for(var f in this)if(f[0]===u)return!1;return!0},each:function(f){for(var y in this)y[0]===u&&f(this[y],y.slice(1),this)}};function T(f,y){var l=new A;if(f instanceof A)f.each(function(p,_){l.set(_,p)});else if(Array.isArray(f)){var x=-1,c=f.length,M;if(y==null)for(;++x<c;)l.set(x,f[x]);else for(;++x<c;)l.set(y(M=f[x],x,f),M)}else if(f)for(var w in f)l.set(w,f[w]);return l}function e(){var f=[],y=[],l,x,c;function M(p,_,h,L){if(_>=f.length)return l!=null&&p.sort(l),x!=null?x(p):p;for(var E=-1,S=p.length,P=f[_++],F,I,D=T(),R,O=h();++E<S;)(R=D.get(F=P(I=p[E])+""))?R.push(I):D.set(F,[I]);return D.each(function(z,G){L(O,G,M(z,_,h,L))}),O}function w(p,_){if(++_>f.length)return p;var h,L=y[_-1];return x!=null&&_>=f.length?h=p.entries():(h=[],p.each(function(E,S){h.push({key:S,values:w(E,_)})})),L!=null?h.sort(function(E,S){return L(E.key,S.key)}):h}return c={object:function(p){return M(p,0,a,i)},map:function(p){return M(p,0,n,r)},entries:function(p){return w(M(p,0,n,r),0)},key:function(p){return f.push(p),c},sortKeys:function(p){return y[f.length-1]=p,c},sortValues:function(p){return l=p,c},rollup:function(p){return x=p,c}}}function a(){return{}}function i(f,y,l){f[y]=l}function n(){return T()}function r(f,y,l){f.set(y,l)}function v(){}var s=T.prototype;v.prototype=o.prototype={constructor:v,has:s.has,add:function(f){return f+="",this[u+f]=f,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};function o(f,y){var l=new v;if(f instanceof v)f.each(function(M){l.add(M)});else if(f){var x=-1,c=f.length;if(y==null)for(;++x<c;)l.add(f[x]);else for(;++x<c;)l.add(y(f[x],x,f))}return l}function b(f){var y=[];for(var l in f)y.push(l);return y}function g(f){var y=[];for(var l in f)y.push(f[l]);return y}function d(f){var y=[];for(var l in f)y.push({key:l,value:f[l]});return y}m.nest=e,m.set=o,m.map=T,m.keys=b,m.values=g,m.entries=d,Object.defineProperty(m,"__esModule",{value:!0})})},{}],109:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=m||self,u(m.d3=m.d3||{}))})(this,function(m){function u(Ie,Ve,dt){Ie.prototype=Ve.prototype=dt,dt.constructor=Ie}function A(Ie,Ve){var dt=Object.create(Ie.prototype);for(var Ft in Ve)dt[Ft]=Ve[Ft];return dt}function T(){}var e=.7,a=1/e,i="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),o=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),b=new RegExp("^rgba\\("+[i,i,i,n]+"\\)$"),g=new RegExp("^rgba\\("+[r,r,r,n]+"\\)$"),d=new RegExp("^hsl\\("+[n,r,r]+"\\)$"),f=new RegExp("^hsla\\("+[n,r,r,n]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};u(T,M,{copy:function(Ie){return Object.assign(new this.constructor,this,Ie)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:x,formatRgb:c,toString:c});function l(){return this.rgb().formatHex()}function x(){return I(this).formatHsl()}function c(){return this.rgb().formatRgb()}function M(Ie){var Ve,dt;return Ie=(Ie+"").trim().toLowerCase(),(Ve=v.exec(Ie))?(dt=Ve[1].length,Ve=parseInt(Ve[1],16),dt===6?w(Ve):dt===3?new L(Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,(Ve&15)<<4|Ve&15,1):dt===8?p(Ve>>24&255,Ve>>16&255,Ve>>8&255,(Ve&255)/255):dt===4?p(Ve>>12&15|Ve>>8&240,Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,((Ve&15)<<4|Ve&15)/255):null):(Ve=s.exec(Ie))?new L(Ve[1],Ve[2],Ve[3],1):(Ve=o.exec(Ie))?new L(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,1):(Ve=b.exec(Ie))?p(Ve[1],Ve[2],Ve[3],Ve[4]):(Ve=g.exec(Ie))?p(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,Ve[4]):(Ve=d.exec(Ie))?F(Ve[1],Ve[2]/100,Ve[3]/100,1):(Ve=f.exec(Ie))?F(Ve[1],Ve[2]/100,Ve[3]/100,Ve[4]):y.hasOwnProperty(Ie)?w(y[Ie]):Ie==="transparent"?new L(NaN,NaN,NaN,0):null}function w(Ie){return new L(Ie>>16&255,Ie>>8&255,Ie&255,1)}function p(Ie,Ve,dt,Ft){return Ft<=0&&(Ie=Ve=dt=NaN),new L(Ie,Ve,dt,Ft)}function _(Ie){return Ie instanceof T||(Ie=M(Ie)),Ie?(Ie=Ie.rgb(),new L(Ie.r,Ie.g,Ie.b,Ie.opacity)):new L}function h(Ie,Ve,dt,Ft){return arguments.length===1?_(Ie):new L(Ie,Ve,dt,Ft==null?1:Ft)}function L(Ie,Ve,dt,Ft){this.r=+Ie,this.g=+Ve,this.b=+dt,this.opacity=+Ft}u(L,h,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatRgb:S,toString:S}));function E(){return"#"+P(this.r)+P(this.g)+P(this.b)}function S(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ie===1?")":", "+Ie+")")}function P(Ie){return Ie=Math.max(0,Math.min(255,Math.round(Ie)||0)),(Ie<16?"0":"")+Ie.toString(16)}function F(Ie,Ve,dt,Ft){return Ft<=0?Ie=Ve=dt=NaN:dt<=0||dt>=1?Ie=Ve=NaN:Ve<=0&&(Ie=NaN),new R(Ie,Ve,dt,Ft)}function I(Ie){if(Ie instanceof R)return new R(Ie.h,Ie.s,Ie.l,Ie.opacity);if(Ie instanceof T||(Ie=M(Ie)),!Ie)return new R;if(Ie instanceof R)return Ie;Ie=Ie.rgb();var Ve=Ie.r/255,dt=Ie.g/255,Ft=Ie.b/255,Qt=Math.min(Ve,dt,Ft),Ot=Math.max(Ve,dt,Ft),Ct=NaN,jt=Ot-Qt,Nt=(Ot+Qt)/2;return jt?(Ve===Ot?Ct=(dt-Ft)/jt+(dt<Ft)*6:dt===Ot?Ct=(Ft-Ve)/jt+2:Ct=(Ve-dt)/jt+4,jt/=Nt<.5?Ot+Qt:2-Ot-Qt,Ct*=60):jt=Nt>0&&Nt<1?0:Ct,new R(Ct,jt,Nt,Ie.opacity)}function D(Ie,Ve,dt,Ft){return arguments.length===1?I(Ie):new R(Ie,Ve,dt,Ft==null?1:Ft)}function R(Ie,Ve,dt,Ft){this.h=+Ie,this.s=+Ve,this.l=+dt,this.opacity=+Ft}u(R,D,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new R(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new R(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=this.h%360+(this.h<0)*360,Ve=isNaN(Ie)||isNaN(this.s)?0:this.s,dt=this.l,Ft=dt+(dt<.5?dt:1-dt)*Ve,Qt=2*dt-Ft;return new L(O(Ie>=240?Ie-240:Ie+120,Qt,Ft),O(Ie,Qt,Ft),O(Ie<120?Ie+240:Ie-120,Qt,Ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ie===1?")":", "+Ie+")")}}));function O(Ie,Ve,dt){return(Ie<60?Ve+(dt-Ve)*Ie/60:Ie<180?dt:Ie<240?Ve+(dt-Ve)*(240-Ie)/60:Ve)*255}var z=Math.PI/180,G=180/Math.PI,Y=18,ee=.96422,j=1,X=.82521,ie=4/29,he=6/29,K=3*he*he,$=he*he*he;function U(Ie){if(Ie instanceof re)return new re(Ie.l,Ie.a,Ie.b,Ie.opacity);if(Ie instanceof fe)return me(Ie);Ie instanceof L||(Ie=_(Ie));var Ve=se(Ie.r),dt=se(Ie.g),Ft=se(Ie.b),Qt=Z((.2225045*Ve+.7168786*dt+.0606169*Ft)/j),Ot,Ct;return Ve===dt&&dt===Ft?Ot=Ct=Qt:(Ot=Z((.4360747*Ve+.3850649*dt+.1430804*Ft)/ee),Ct=Z((.0139322*Ve+.0971045*dt+.7141733*Ft)/X)),new re(116*Qt-16,500*(Ot-Qt),200*(Qt-Ct),Ie.opacity)}function H(Ie,Ve){return new re(Ie,0,0,Ve==null?1:Ve)}function q(Ie,Ve,dt,Ft){return arguments.length===1?U(Ie):new re(Ie,Ve,dt,Ft==null?1:Ft)}function re(Ie,Ve,dt,Ft){this.l=+Ie,this.a=+Ve,this.b=+dt,this.opacity=+Ft}u(re,q,A(T,{brighter:function(Ie){return new re(this.l+Y*(Ie==null?1:Ie),this.a,this.b,this.opacity)},darker:function(Ie){return new re(this.l-Y*(Ie==null?1:Ie),this.a,this.b,this.opacity)},rgb:function(){var Ie=(this.l+16)/116,Ve=isNaN(this.a)?Ie:Ie+this.a/500,dt=isNaN(this.b)?Ie:Ie-this.b/200;return Ve=ee*Q(Ve),Ie=j*Q(Ie),dt=X*Q(dt),new L(oe(3.1338561*Ve-1.6168667*Ie-.4906146*dt),oe(-.9787684*Ve+1.9161415*Ie+.033454*dt),oe(.0719453*Ve-.2289914*Ie+1.4052427*dt),this.opacity)}}));function Z(Ie){return Ie>$?Math.pow(Ie,1/3):Ie/K+ie}function Q(Ie){return Ie>he?Ie*Ie*Ie:K*(Ie-ie)}function oe(Ie){return 255*(Ie<=.0031308?12.92*Ie:1.055*Math.pow(Ie,1/2.4)-.055)}function se(Ie){return(Ie/=255)<=.04045?Ie/12.92:Math.pow((Ie+.055)/1.055,2.4)}function ae(Ie){if(Ie instanceof fe)return new fe(Ie.h,Ie.c,Ie.l,Ie.opacity);if(Ie instanceof re||(Ie=U(Ie)),Ie.a===0&&Ie.b===0)return new fe(NaN,0<Ie.l&&Ie.l<100?0:NaN,Ie.l,Ie.opacity);var Ve=Math.atan2(Ie.b,Ie.a)*G;return new fe(Ve<0?Ve+360:Ve,Math.sqrt(Ie.a*Ie.a+Ie.b*Ie.b),Ie.l,Ie.opacity)}function le(Ie,Ve,dt,Ft){return arguments.length===1?ae(Ie):new fe(dt,Ve,Ie,Ft==null?1:Ft)}function _e(Ie,Ve,dt,Ft){return arguments.length===1?ae(Ie):new fe(Ie,Ve,dt,Ft==null?1:Ft)}function fe(Ie,Ve,dt,Ft){this.h=+Ie,this.c=+Ve,this.l=+dt,this.opacity=+Ft}function me(Ie){if(isNaN(Ie.h))return new re(Ie.l,0,0,Ie.opacity);var Ve=Ie.h*z;return new re(Ie.l,Math.cos(Ve)*Ie.c,Math.sin(Ve)*Ie.c,Ie.opacity)}u(fe,_e,A(T,{brighter:function(Ie){return new fe(this.h,this.c,this.l+Y*(Ie==null?1:Ie),this.opacity)},darker:function(Ie){return new fe(this.h,this.c,this.l-Y*(Ie==null?1:Ie),this.opacity)},rgb:function(){return me(this).rgb()}}));var xe=-.14861,ye=1.78277,be=-.29227,ke=-.90649,De=1.97294,He=De*ke,Ae=De*ye,Le=ye*be-ke*xe;function Ze(Ie){if(Ie instanceof ze)return new ze(Ie.h,Ie.s,Ie.l,Ie.opacity);Ie instanceof L||(Ie=_(Ie));var Ve=Ie.r/255,dt=Ie.g/255,Ft=Ie.b/255,Qt=(Le*Ft+He*Ve-Ae*dt)/(Le+He-Ae),Ot=Ft-Qt,Ct=(De*(dt-Qt)-be*Ot)/ke,jt=Math.sqrt(Ct*Ct+Ot*Ot)/(De*Qt*(1-Qt)),Nt=jt?Math.atan2(Ct,Ot)*G-120:NaN;return new ze(Nt<0?Nt+360:Nt,jt,Qt,Ie.opacity)}function We(Ie,Ve,dt,Ft){return arguments.length===1?Ze(Ie):new ze(Ie,Ve,dt,Ft==null?1:Ft)}function ze(Ie,Ve,dt,Ft){this.h=+Ie,this.s=+Ve,this.l=+dt,this.opacity=+Ft}u(ze,We,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new ze(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new ze(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=isNaN(this.h)?0:(this.h+120)*z,Ve=+this.l,dt=isNaN(this.s)?0:this.s*Ve*(1-Ve),Ft=Math.cos(Ie),Qt=Math.sin(Ie);return new L(255*(Ve+dt*(xe*Ft+ye*Qt)),255*(Ve+dt*(be*Ft+ke*Qt)),255*(Ve+dt*(De*Ft)),this.opacity)}})),m.color=M,m.cubehelix=We,m.gray=H,m.hcl=_e,m.hsl=D,m.lab=q,m.lch=le,m.rgb=h,Object.defineProperty(m,"__esModule",{value:!0})})},{}],110:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=m||self,u(m.d3=m.d3||{}))})(this,function(m){var u={value:function(){}};function A(){for(var n=0,r=arguments.length,v={},s;n<r;++n){if(!(s=arguments[n]+"")||s in v||/[\s.]/.test(s))throw new Error("illegal type: "+s);v[s]=[]}return new T(v)}function T(n){this._=n}function e(n,r){return n.trim().split(/^|\s+/).map(function(v){var s="",o=v.indexOf(".");if(o>=0&&(s=v.slice(o+1),v=v.slice(0,o)),v&&!r.hasOwnProperty(v))throw new Error("unknown type: "+v);return{type:v,name:s}})}T.prototype=A.prototype={constructor:T,on:function(n,r){var v=this._,s=e(n+"",v),o,b=-1,g=s.length;if(arguments.length<2){for(;++b<g;)if((o=(n=s[b]).type)&&(o=a(v[o],n.name)))return o;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++b<g;)if(o=(n=s[b]).type)v[o]=i(v[o],n.name,r);else if(r==null)for(o in v)v[o]=i(v[o],n.name,null);return this},copy:function(){var n={},r=this._;for(var v in r)n[v]=r[v].slice();return new T(n)},call:function(n,r){if((o=arguments.length-2)>0)for(var v=new Array(o),s=0,o,b;s<o;++s)v[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(b=this._[n],s=0,o=b.length;s<o;++s)b[s].value.apply(r,v)},apply:function(n,r,v){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],o=0,b=s.length;o<b;++o)s[o].value.apply(r,v)}};function a(n,r){for(var v=0,s=n.length,o;v<s;++v)if((o=n[v]).name===r)return o.value}function i(n,r,v){for(var s=0,o=n.length;s<o;++s)if(n[s].name===r){n[s]=u,n=n.slice(0,s).concat(n.slice(s+1));break}return v!=null&&n.push({name:r,value:v}),n}m.dispatch=A,Object.defineProperty(m,"__esModule",{value:!0})})},{}],111:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):u(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3)})(this,function(m,u,A,T,e){function a(_,h){var L;_==null&&(_=0),h==null&&(h=0);function E(){var S,P=L.length,F,I=0,D=0;for(S=0;S<P;++S)F=L[S],I+=F.x,D+=F.y;for(I=I/P-_,D=D/P-h,S=0;S<P;++S)F=L[S],F.x-=I,F.y-=D}return E.initialize=function(S){L=S},E.x=function(S){return arguments.length?(_=+S,E):_},E.y=function(S){return arguments.length?(h=+S,E):h},E}function i(_){return function(){return _}}function n(){return(Math.random()-.5)*1e-6}function r(_){return _.x+_.vx}function v(_){return _.y+_.vy}function s(_){var h,L,E=1,S=1;typeof _!="function"&&(_=i(_==null?1:+_));function P(){for(var D,R=h.length,O,z,G,Y,ee,j,X=0;X<S;++X)for(O=u.quadtree(h,r,v).visitAfter(F),D=0;D<R;++D)z=h[D],ee=L[z.index],j=ee*ee,G=z.x+z.vx,Y=z.y+z.vy,O.visit(ie);function ie(he,K,$,U,H){var q=he.data,re=he.r,Z=ee+re;if(q){if(q.index>z.index){var Q=G-q.x-q.vx,oe=Y-q.y-q.vy,se=Q*Q+oe*oe;se<Z*Z&&(Q===0&&(Q=n(),se+=Q*Q),oe===0&&(oe=n(),se+=oe*oe),se=(Z-(se=Math.sqrt(se)))/se*E,z.vx+=(Q*=se)*(Z=(re*=re)/(j+re)),z.vy+=(oe*=se)*Z,q.vx-=Q*(Z=1-Z),q.vy-=oe*Z)}return}return K>G+Z||U<G-Z||$>Y+Z||H<Y-Z}}function F(D){if(D.data)return D.r=L[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function I(){if(!!h){var D,R=h.length,O;for(L=new Array(R),D=0;D<R;++D)O=h[D],L[O.index]=+_(O,D,h)}}return P.initialize=function(D){h=D,I()},P.iterations=function(D){return arguments.length?(S=+D,P):S},P.strength=function(D){return arguments.length?(E=+D,P):E},P.radius=function(D){return arguments.length?(_=typeof D=="function"?D:i(+D),I(),P):_},P}function o(_){return _.index}function b(_,h){var L=_.get(h);if(!L)throw new Error("missing: "+h);return L}function g(_){var h=o,L=O,E,S=i(30),P,F,I,D,R=1;_==null&&(_=[]);function O(j){return 1/Math.min(I[j.source.index],I[j.target.index])}function z(j){for(var X=0,ie=_.length;X<R;++X)for(var he=0,K,$,U,H,q,re,Z;he<ie;++he)K=_[he],$=K.source,U=K.target,H=U.x+U.vx-$.x-$.vx||n(),q=U.y+U.vy-$.y-$.vy||n(),re=Math.sqrt(H*H+q*q),re=(re-P[he])/re*j*E[he],H*=re,q*=re,U.vx-=H*(Z=D[he]),U.vy-=q*Z,$.vx+=H*(Z=1-Z),$.vy+=q*Z}function G(){if(!!F){var j,X=F.length,ie=_.length,he=A.map(F,h),K;for(j=0,I=new Array(X);j<ie;++j)K=_[j],K.index=j,typeof K.source!="object"&&(K.source=b(he,K.source)),typeof K.target!="object"&&(K.target=b(he,K.target)),I[K.source.index]=(I[K.source.index]||0)+1,I[K.target.index]=(I[K.target.index]||0)+1;for(j=0,D=new Array(ie);j<ie;++j)K=_[j],D[j]=I[K.source.index]/(I[K.source.index]+I[K.target.index]);E=new Array(ie),Y(),P=new Array(ie),ee()}}function Y(){if(!!F)for(var j=0,X=_.length;j<X;++j)E[j]=+L(_[j],j,_)}function ee(){if(!!F)for(var j=0,X=_.length;j<X;++j)P[j]=+S(_[j],j,_)}return z.initialize=function(j){F=j,G()},z.links=function(j){return arguments.length?(_=j,G(),z):_},z.id=function(j){return arguments.length?(h=j,z):h},z.iterations=function(j){return arguments.length?(R=+j,z):R},z.strength=function(j){return arguments.length?(L=typeof j=="function"?j:i(+j),Y(),z):L},z.distance=function(j){return arguments.length?(S=typeof j=="function"?j:i(+j),ee(),z):S},z}function d(_){return _.x}function f(_){return _.y}var y=10,l=Math.PI*(3-Math.sqrt(5));function x(_){var h,L=1,E=.001,S=1-Math.pow(E,1/300),P=0,F=.6,I=A.map(),D=e.timer(O),R=T.dispatch("tick","end");_==null&&(_=[]);function O(){z(),R.call("tick",h),L<E&&(D.stop(),R.call("end",h))}function z(ee){var j,X=_.length,ie;ee===void 0&&(ee=1);for(var he=0;he<ee;++he)for(L+=(P-L)*S,I.each(function(K){K(L)}),j=0;j<X;++j)ie=_[j],ie.fx==null?ie.x+=ie.vx*=F:(ie.x=ie.fx,ie.vx=0),ie.fy==null?ie.y+=ie.vy*=F:(ie.y=ie.fy,ie.vy=0);return h}function G(){for(var ee=0,j=_.length,X;ee<j;++ee){if(X=_[ee],X.index=ee,X.fx!=null&&(X.x=X.fx),X.fy!=null&&(X.y=X.fy),isNaN(X.x)||isNaN(X.y)){var ie=y*Math.sqrt(ee),he=ee*l;X.x=ie*Math.cos(he),X.y=ie*Math.sin(he)}(isNaN(X.vx)||isNaN(X.vy))&&(X.vx=X.vy=0)}}function Y(ee){return ee.initialize&&ee.initialize(_),ee}return G(),h={tick:z,restart:function(){return D.restart(O),h},stop:function(){return D.stop(),h},nodes:function(ee){return arguments.length?(_=ee,G(),I.each(Y),h):_},alpha:function(ee){return arguments.length?(L=+ee,h):L},alphaMin:function(ee){return arguments.length?(E=+ee,h):E},alphaDecay:function(ee){return arguments.length?(S=+ee,h):+S},alphaTarget:function(ee){return arguments.length?(P=+ee,h):P},velocityDecay:function(ee){return arguments.length?(F=1-ee,h):1-F},force:function(ee,j){return arguments.length>1?(j==null?I.remove(ee):I.set(ee,Y(j)),h):I.get(ee)},find:function(ee,j,X){var ie=0,he=_.length,K,$,U,H,q;for(X==null?X=1/0:X*=X,ie=0;ie<he;++ie)H=_[ie],K=ee-H.x,$=j-H.y,U=K*K+$*$,U<X&&(q=H,X=U);return q},on:function(ee,j){return arguments.length>1?(R.on(ee,j),h):R.on(ee)}}}function c(){var _,h,L,E=i(-30),S,P=1,F=1/0,I=.81;function D(G){var Y,ee=_.length,j=u.quadtree(_,d,f).visitAfter(O);for(L=G,Y=0;Y<ee;++Y)h=_[Y],j.visit(z)}function R(){if(!!_){var G,Y=_.length,ee;for(S=new Array(Y),G=0;G<Y;++G)ee=_[G],S[ee.index]=+E(ee,G,_)}}function O(G){var Y=0,ee,j,X=0,ie,he,K;if(G.length){for(ie=he=K=0;K<4;++K)(ee=G[K])&&(j=Math.abs(ee.value))&&(Y+=ee.value,X+=j,ie+=j*ee.x,he+=j*ee.y);G.x=ie/X,G.y=he/X}else{ee=G,ee.x=ee.data.x,ee.y=ee.data.y;do Y+=S[ee.data.index];while(ee=ee.next)}G.value=Y}function z(G,Y,ee,j){if(!G.value)return!0;var X=G.x-h.x,ie=G.y-h.y,he=j-Y,K=X*X+ie*ie;if(he*he/I<K)return K<F&&(X===0&&(X=n(),K+=X*X),ie===0&&(ie=n(),K+=ie*ie),K<P&&(K=Math.sqrt(P*K)),h.vx+=X*G.value*L/K,h.vy+=ie*G.value*L/K),!0;if(G.length||K>=F)return;(G.data!==h||G.next)&&(X===0&&(X=n(),K+=X*X),ie===0&&(ie=n(),K+=ie*ie),K<P&&(K=Math.sqrt(P*K)));do G.data!==h&&(he=S[G.data.index]*L/K,h.vx+=X*he,h.vy+=ie*he);while(G=G.next)}return D.initialize=function(G){_=G,R()},D.strength=function(G){return arguments.length?(E=typeof G=="function"?G:i(+G),R(),D):E},D.distanceMin=function(G){return arguments.length?(P=G*G,D):Math.sqrt(P)},D.distanceMax=function(G){return arguments.length?(F=G*G,D):Math.sqrt(F)},D.theta=function(G){return arguments.length?(I=G*G,D):Math.sqrt(I)},D}function M(_,h,L){var E,S=i(.1),P,F;typeof _!="function"&&(_=i(+_)),h==null&&(h=0),L==null&&(L=0);function I(R){for(var O=0,z=E.length;O<z;++O){var G=E[O],Y=G.x-h||1e-6,ee=G.y-L||1e-6,j=Math.sqrt(Y*Y+ee*ee),X=(F[O]-j)*P[O]*R/j;G.vx+=Y*X,G.vy+=ee*X}}function D(){if(!!E){var R,O=E.length;for(P=new Array(O),F=new Array(O),R=0;R<O;++R)F[R]=+_(E[R],R,E),P[R]=isNaN(F[R])?0:+S(E[R],R,E)}}return I.initialize=function(R){E=R,D()},I.strength=function(R){return arguments.length?(S=typeof R=="function"?R:i(+R),D(),I):S},I.radius=function(R){return arguments.length?(_=typeof R=="function"?R:i(+R),D(),I):_},I.x=function(R){return arguments.length?(h=+R,I):h},I.y=function(R){return arguments.length?(L=+R,I):L},I}function w(_){var h=i(.1),L,E,S;typeof _!="function"&&(_=i(_==null?0:+_));function P(I){for(var D=0,R=L.length,O;D<R;++D)O=L[D],O.vx+=(S[D]-O.x)*E[D]*I}function F(){if(!!L){var I,D=L.length;for(E=new Array(D),S=new Array(D),I=0;I<D;++I)E[I]=isNaN(S[I]=+_(L[I],I,L))?0:+h(L[I],I,L)}}return P.initialize=function(I){L=I,F()},P.strength=function(I){return arguments.length?(h=typeof I=="function"?I:i(+I),F(),P):h},P.x=function(I){return arguments.length?(_=typeof I=="function"?I:i(+I),F(),P):_},P}function p(_){var h=i(.1),L,E,S;typeof _!="function"&&(_=i(_==null?0:+_));function P(I){for(var D=0,R=L.length,O;D<R;++D)O=L[D],O.vy+=(S[D]-O.y)*E[D]*I}function F(){if(!!L){var I,D=L.length;for(E=new Array(D),S=new Array(D),I=0;I<D;++I)E[I]=isNaN(S[I]=+_(L[I],I,L))?0:+h(L[I],I,L)}}return P.initialize=function(I){L=I,F()},P.strength=function(I){return arguments.length?(h=typeof I=="function"?I:i(+I),F(),P):h},P.y=function(I){return arguments.length?(_=typeof I=="function"?I:i(+I),F(),P):_},P}m.forceCenter=a,m.forceCollide=s,m.forceLink=g,m.forceManyBody=c,m.forceRadial=M,m.forceSimulation=x,m.forceX=w,m.forceY=p,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=typeof globalThis<"u"?globalThis:m||self,u(m.d3=m.d3||{}))})(this,function(m){function u(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function A(_,h){if((L=(_=h?_.toExponential(h-1):_.toExponential()).indexOf("e"))<0)return null;var L,E=_.slice(0,L);return[E.length>1?E[0]+E.slice(2):E,+_.slice(L+1)]}function T(_){return _=A(Math.abs(_)),_?_[1]:NaN}function e(_,h){return function(L,E){for(var S=L.length,P=[],F=0,I=_[0],D=0;S>0&&I>0&&(D+I+1>E&&(I=Math.max(1,E-D)),P.push(L.substring(S-=I,S+I)),!((D+=I+1)>E));)I=_[F=(F+1)%_.length];return P.reverse().join(h)}}function a(_){return function(h){return h.replace(/[0-9]/g,function(L){return _[+L]})}}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(_){if(!(h=i.exec(_)))throw new Error("invalid format: "+_);var h;return new r({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}n.prototype=r.prototype;function r(_){this.fill=_.fill===void 0?" ":_.fill+"",this.align=_.align===void 0?">":_.align+"",this.sign=_.sign===void 0?"-":_.sign+"",this.symbol=_.symbol===void 0?"":_.symbol+"",this.zero=!!_.zero,this.width=_.width===void 0?void 0:+_.width,this.comma=!!_.comma,this.precision=_.precision===void 0?void 0:+_.precision,this.trim=!!_.trim,this.type=_.type===void 0?"":_.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v(_){e:for(var h=_.length,L=1,E=-1,S;L<h;++L)switch(_[L]){case".":E=S=L;break;case"0":E===0&&(E=L),S=L;break;default:if(!+_[L])break e;E>0&&(E=0);break}return E>0?_.slice(0,E)+_.slice(S+1):_}var s;function o(_,h){var L=A(_,h);if(!L)return _+"";var E=L[0],S=L[1],P=S-(s=Math.max(-8,Math.min(8,Math.floor(S/3)))*3)+1,F=E.length;return P===F?E:P>F?E+new Array(P-F+1).join("0"):P>0?E.slice(0,P)+"."+E.slice(P):"0."+new Array(1-P).join("0")+A(_,Math.max(0,h+P-1))[0]}function b(_,h){var L=A(_,h);if(!L)return _+"";var E=L[0],S=L[1];return S<0?"0."+new Array(-S).join("0")+E:E.length>S+1?E.slice(0,S+1)+"."+E.slice(S+1):E+new Array(S-E.length+2).join("0")}var g={"%":function(_,h){return(_*100).toFixed(h)},b:function(_){return Math.round(_).toString(2)},c:function(_){return _+""},d:u,e:function(_,h){return _.toExponential(h)},f:function(_,h){return _.toFixed(h)},g:function(_,h){return _.toPrecision(h)},o:function(_){return Math.round(_).toString(8)},p:function(_,h){return b(_*100,h)},r:b,s:o,X:function(_){return Math.round(_).toString(16).toUpperCase()},x:function(_){return Math.round(_).toString(16)}};function d(_){return _}var f=Array.prototype.map,y=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(_){var h=_.grouping===void 0||_.thousands===void 0?d:e(f.call(_.grouping,Number),_.thousands+""),L=_.currency===void 0?"":_.currency[0]+"",E=_.currency===void 0?"":_.currency[1]+"",S=_.decimal===void 0?".":_.decimal+"",P=_.numerals===void 0?d:a(f.call(_.numerals,String)),F=_.percent===void 0?"%":_.percent+"",I=_.minus===void 0?"-":_.minus+"",D=_.nan===void 0?"NaN":_.nan+"";function R(z){z=n(z);var G=z.fill,Y=z.align,ee=z.sign,j=z.symbol,X=z.zero,ie=z.width,he=z.comma,K=z.precision,$=z.trim,U=z.type;U==="n"?(he=!0,U="g"):g[U]||(K===void 0&&(K=12),$=!0,U="g"),(X||G==="0"&&Y==="=")&&(X=!0,G="0",Y="=");var H=j==="$"?L:j==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",q=j==="$"?E:/[%p]/.test(U)?F:"",re=g[U],Z=/[defgprs%]/.test(U);K=K===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function Q(oe){var se=H,ae=q,le,_e,fe;if(U==="c")ae=re(oe)+ae,oe="";else{oe=+oe;var me=oe<0||1/oe<0;if(oe=isNaN(oe)?D:re(Math.abs(oe),K),$&&(oe=v(oe)),me&&+oe==0&&ee!=="+"&&(me=!1),se=(me?ee==="("?ee:I:ee==="-"||ee==="("?"":ee)+se,ae=(U==="s"?y[8+s/3]:"")+ae+(me&&ee==="("?")":""),Z){for(le=-1,_e=oe.length;++le<_e;)if(fe=oe.charCodeAt(le),48>fe||fe>57){ae=(fe===46?S+oe.slice(le+1):oe.slice(le))+ae,oe=oe.slice(0,le);break}}}he&&!X&&(oe=h(oe,1/0));var xe=se.length+oe.length+ae.length,ye=xe<ie?new Array(ie-xe+1).join(G):"";switch(he&&X&&(oe=h(ye+oe,ye.length?ie-ae.length:1/0),ye=""),Y){case"<":oe=se+oe+ae+ye;break;case"=":oe=se+ye+oe+ae;break;case"^":oe=ye.slice(0,xe=ye.length>>1)+se+oe+ae+ye.slice(xe);break;default:oe=ye+se+oe+ae;break}return P(oe)}return Q.toString=function(){return z+""},Q}function O(z,G){var Y=R((z=n(z),z.type="f",z)),ee=Math.max(-8,Math.min(8,Math.floor(T(G)/3)))*3,j=Math.pow(10,-ee),X=y[8+ee/3];return function(ie){return Y(j*ie)+X}}return{format:R,formatPrefix:O}}var x;c({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function c(_){return x=l(_),m.format=x.format,m.formatPrefix=x.formatPrefix,x}function M(_){return Math.max(0,-T(Math.abs(_)))}function w(_,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(T(h)/3)))*3-T(Math.abs(_)))}function p(_,h){return _=Math.abs(_),h=Math.abs(h)-_,Math.max(0,T(h)-T(_))+1}m.FormatSpecifier=r,m.formatDefaultLocale=c,m.formatLocale=l,m.formatSpecifier=n,m.precisionFixed=M,m.precisionPrefix=w,m.precisionRound=p,Object.defineProperty(m,"__esModule",{value:!0})})},{}],113:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V,t("d3-geo"),t("d3-array")):u(m.d3=m.d3||{},m.d3,m.d3)})(this,function(m,u,A){var T=Math.abs,e=Math.atan,a=Math.atan2,i=Math.cos,n=Math.exp,r=Math.floor,v=Math.log,s=Math.max,o=Math.min,b=Math.pow,g=Math.round,d=Math.sign||function(Oe){return Oe>0?1:Oe<0?-1:0},f=Math.sin,y=Math.tan,l=1e-6,x=1e-12,c=Math.PI,M=c/2,w=c/4,p=Math.SQRT1_2,_=D(2),h=D(c),L=c*2,E=180/c,S=c/180;function P(Oe){return Oe?Oe/Math.sin(Oe):1}function F(Oe){return Oe>1?M:Oe<-1?-M:Math.asin(Oe)}function I(Oe){return Oe>1?0:Oe<-1?c:Math.acos(Oe)}function D(Oe){return Oe>0?Math.sqrt(Oe):0}function R(Oe){return Oe=n(2*Oe),(Oe-1)/(Oe+1)}function O(Oe){return(n(Oe)-n(-Oe))/2}function z(Oe){return(n(Oe)+n(-Oe))/2}function G(Oe){return v(Oe+D(Oe*Oe+1))}function Y(Oe){return v(Oe+D(Oe*Oe-1))}function ee(Oe){var je=y(Oe/2),nt=2*v(i(Oe/2))/(je*je);function ut(Tt,_t){var kt=i(Tt),vr=i(_t),mr=f(_t),fr=vr*kt,Tr=-((1-fr?v((1+fr)/2)/(1-fr):-.5)+nt/(1+fr));return[Tr*vr*f(Tt),Tr*mr]}return ut.invert=function(Tt,_t){var kt=D(Tt*Tt+_t*_t),vr=-Oe/2,mr=50,fr;if(!kt)return[0,0];do{var Tr=vr/2,zr=i(Tr),Qr=f(Tr),on=Qr/zr,En=-v(T(zr));vr-=fr=(2/on*En-nt*on-kt)/(-En/(Qr*Qr)+1-nt/(2*zr*zr))*(zr<0?.7:1)}while(T(fr)>l&&--mr>0);var Nn=f(vr);return[a(Tt*Nn,kt*i(vr)),F(_t*Nn/kt)]},ut}function j(){var Oe=M,je=u.geoProjectionMutator(ee),nt=je(Oe);return nt.radius=function(ut){return arguments.length?je(Oe=ut*S):Oe*E},nt.scale(179.976).clipAngle(147)}function X(Oe,je){var nt=i(je),ut=P(I(nt*i(Oe/=2)));return[2*nt*f(Oe)*ut,f(je)*ut]}X.invert=function(Oe,je){if(!(Oe*Oe+4*je*je>c*c+l)){var nt=Oe,ut=je,Tt=25;do{var _t=f(nt),kt=f(nt/2),vr=i(nt/2),mr=f(ut),fr=i(ut),Tr=f(2*ut),zr=mr*mr,Qr=fr*fr,on=kt*kt,En=1-Qr*vr*vr,Nn=En?I(fr*vr)*D($n=1/En):$n=0,$n,Ta=2*Nn*fr*kt-Oe,Ea=Nn*mr-je,ni=$n*(Qr*on+Nn*fr*vr*zr),qa=$n*(.5*_t*Tr-Nn*2*mr*kt),ai=$n*.25*(Tr*kt-Nn*mr*Qr*_t),Ti=$n*(zr*vr+Nn*on*fr),Yr=qa*ai-Ti*ni;if(!Yr)break;var et=(Ea*qa-Ta*Ti)/Yr,$t=(Ta*ai-Ea*ni)/Yr;nt-=et,ut-=$t}while((T(et)>l||T($t)>l)&&--Tt>0);return[nt,ut]}};function ie(){return u.geoProjection(X).scale(152.63)}function he(Oe){var je=f(Oe),nt=i(Oe),ut=Oe>=0?1:-1,Tt=y(ut*Oe),_t=(1+je-nt)/2;function kt(vr,mr){var fr=i(mr),Tr=i(vr/=2);return[(1+fr)*f(vr),(ut*mr>-a(Tr,Tt)-.001?0:-ut*10)+_t+f(mr)*nt-(1+fr)*je*Tr]}return kt.invert=function(vr,mr){var fr=0,Tr=0,zr=50;do{var Qr=i(fr),on=f(fr),En=i(Tr),Nn=f(Tr),$n=1+En,Ta=$n*on-vr,Ea=_t+Nn*nt-$n*je*Qr-mr,ni=$n*Qr/2,qa=-on*Nn,ai=je*$n*on/2,Ti=nt*En+je*Qr*Nn,Yr=qa*ai-Ti*ni,et=(Ea*qa-Ta*Ti)/Yr/2,$t=(Ta*ai-Ea*ni)/Yr;T($t)>2&&($t/=2),fr-=et,Tr-=$t}while((T(et)>l||T($t)>l)&&--zr>0);return ut*Tr>-a(i(fr),Tt)-.001?[fr*2,Tr]:null},kt}function K(){var Oe=20*S,je=Oe>=0?1:-1,nt=y(je*Oe),ut=u.geoProjectionMutator(he),Tt=ut(Oe),_t=Tt.stream;return Tt.parallel=function(kt){return arguments.length?(nt=y((je=(Oe=kt*S)>=0?1:-1)*Oe),ut(Oe)):Oe*E},Tt.stream=function(kt){var vr=Tt.rotate(),mr=_t(kt),fr=(Tt.rotate([0,0]),_t(kt)),Tr=Tt.precision();return Tt.rotate(vr),mr.sphere=function(){fr.polygonStart(),fr.lineStart();for(var zr=je*-180;je*zr<180;zr+=je*90)fr.point(zr,je*90);if(Oe)for(;je*(zr-=3*je*Tr)>=-180;)fr.point(zr,je*-a(i(zr*S/2),nt)*E);fr.lineEnd(),fr.polygonEnd()},mr},Tt.scale(218.695).center([0,28.0974])}function $(Oe,je){var nt=y(je/2),ut=D(1-nt*nt),Tt=1+ut*i(Oe/=2),_t=f(Oe)*ut/Tt,kt=nt/Tt,vr=_t*_t,mr=kt*kt;return[4/3*_t*(3+vr-3*mr),4/3*kt*(3+3*vr-mr)]}$.invert=function(Oe,je){if(Oe*=3/8,je*=3/8,!Oe&&T(je)>1)return null;var nt=Oe*Oe,ut=je*je,Tt=1+nt+ut,_t=D((Tt-D(Tt*Tt-4*je*je))/2),kt=F(_t)/3,vr=_t?Y(T(je/_t))/3:G(T(Oe))/3,mr=i(kt),fr=z(vr),Tr=fr*fr-mr*mr;return[d(Oe)*2*a(O(vr)*mr,.25-Tr),d(je)*2*a(fr*f(kt),.25+Tr)]};function U(){return u.geoProjection($).scale(66.1603)}var H=D(8),q=v(1+_);function re(Oe,je){var nt=T(je);return nt<w?[Oe,v(y(w+je/2))]:[Oe*i(nt)*(2*_-1/f(nt)),d(je)*(2*_*(nt-w)-v(y(nt/2)))]}re.invert=function(Oe,je){if((_t=T(je))<q)return[Oe,2*e(n(je))-M];var nt=w,ut=25,Tt,_t;do{var kt=i(nt/2),vr=y(nt/2);nt-=Tt=(H*(nt-w)-v(vr)-_t)/(H-kt*kt/(2*vr))}while(T(Tt)>x&&--ut>0);return[Oe/(i(nt)*(H-1/f(nt))),d(je)*nt]};function Z(){return u.geoProjection(re).scale(112.314)}function Q(Oe){var je=2*c/Oe;function nt(ut,Tt){var _t=u.geoAzimuthalEquidistantRaw(ut,Tt);if(T(ut)>M){var kt=a(_t[1],_t[0]),vr=D(_t[0]*_t[0]+_t[1]*_t[1]),mr=je*g((kt-M)/je)+M,fr=a(f(kt-=mr),2-i(kt));kt=mr+F(c/vr*f(fr))-fr,_t[0]=vr*i(kt),_t[1]=vr*f(kt)}return _t}return nt.invert=function(ut,Tt){var _t=D(ut*ut+Tt*Tt);if(_t>M){var kt=a(Tt,ut),vr=je*g((kt-M)/je)+M,mr=kt>vr?-1:1,fr=_t*i(vr-kt),Tr=1/y(mr*I((fr-c)/D(c*(c-2*fr)+_t*_t)));kt=vr+2*e((Tr+mr*D(Tr*Tr-3))/3),ut=_t*i(kt),Tt=_t*f(kt)}return u.geoAzimuthalEquidistantRaw.invert(ut,Tt)},nt}function oe(){var Oe=5,je=u.geoProjectionMutator(Q),nt=je(Oe),ut=nt.stream,Tt=.01,_t=-i(Tt*S),kt=f(Tt*S);return nt.lobes=function(vr){return arguments.length?je(Oe=+vr):Oe},nt.stream=function(vr){var mr=nt.rotate(),fr=ut(vr),Tr=(nt.rotate([0,0]),ut(vr));return nt.rotate(mr),fr.sphere=function(){Tr.polygonStart(),Tr.lineStart();for(var zr=0,Qr=360/Oe,on=2*c/Oe,En=90-180/Oe,Nn=M;zr<Oe;++zr,En-=Qr,Nn-=on)Tr.point(a(kt*i(Nn),_t)*E,F(kt*f(Nn))*E),En<-90?(Tr.point(-90,-180-En-Tt),Tr.point(-90,-180-En+Tt)):(Tr.point(90,En+Tt),Tr.point(90,En-Tt));Tr.lineEnd(),Tr.polygonEnd()},fr},nt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function se(Oe,je){if(arguments.length<2&&(je=Oe),je===1)return u.geoAzimuthalEqualAreaRaw;if(je===1/0)return ae;function nt(ut,Tt){var _t=u.geoAzimuthalEqualAreaRaw(ut/je,Tt);return _t[0]*=Oe,_t}return nt.invert=function(ut,Tt){var _t=u.geoAzimuthalEqualAreaRaw.invert(ut/Oe,Tt);return _t[0]*=je,_t},nt}function ae(Oe,je){return[Oe*i(je)/i(je/=2),2*f(je)]}ae.invert=function(Oe,je){var nt=2*F(je/2);return[Oe*i(nt/2)/i(nt),nt]};function le(){var Oe=2,je=u.geoProjectionMutator(se),nt=je(Oe);return nt.coefficient=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(169.529)}function _e(Oe,je,nt){var ut=100,Tt,_t,kt;nt=nt===void 0?0:+nt,je=+je;do _t=Oe(nt),kt=Oe(nt+l),_t===kt&&(kt=_t+l),nt-=Tt=-1*l*(_t-je)/(_t-kt);while(ut-- >0&&T(Tt)>l);return ut<0?NaN:nt}function fe(Oe,je,nt){return je===void 0&&(je=40),nt===void 0&&(nt=x),function(ut,Tt,_t,kt){var vr,mr,fr;_t=_t===void 0?0:+_t,kt=kt===void 0?0:+kt;for(var Tr=0;Tr<je;Tr++){var zr=Oe(_t,kt),Qr=zr[0]-ut,on=zr[1]-Tt;if(T(Qr)<nt&&T(on)<nt)break;var En=Qr*Qr+on*on;if(En>vr){_t-=mr/=2,kt-=fr/=2;continue}vr=En;var Nn=(_t>0?-1:1)*nt,$n=(kt>0?-1:1)*nt,Ta=Oe(_t+Nn,kt),Ea=Oe(_t,kt+$n),ni=(Ta[0]-zr[0])/Nn,qa=(Ta[1]-zr[1])/Nn,ai=(Ea[0]-zr[0])/$n,Ti=(Ea[1]-zr[1])/$n,Yr=Ti*ni-qa*ai,et=(T(Yr)<.5?.5:1)/Yr;if(mr=(on*ai-Qr*Ti)*et,fr=(Qr*qa-on*ni)*et,_t+=mr,kt+=fr,T(mr)<nt&&T(fr)<nt)break}return[_t,kt]}}function me(){var Oe=se(1.68,2),je=1.4,nt=12;function ut(Tt,_t){if(Tt+_t<-je){var kt=(Tt-_t+1.6)*(Tt+_t+je)/8;Tt+=kt,_t-=.8*kt*f(_t+c/2)}var vr=Oe(Tt,_t),mr=(1-i(Tt*_t))/nt;return vr[1]<0&&(vr[0]*=1+mr),vr[1]>0&&(vr[1]*=1+mr/1.5*vr[0]*vr[0]),vr}return ut.invert=fe(ut),ut}function xe(){return u.geoProjection(me()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ye(Oe,je){var nt=Oe*f(je),ut=30,Tt;do je-=Tt=(je+f(je)-nt)/(1+i(je));while(T(Tt)>l&&--ut>0);return je/2}function be(Oe,je,nt){function ut(Tt,_t){return[Oe*Tt*i(_t=ye(nt,_t)),je*f(_t)]}return ut.invert=function(Tt,_t){return _t=F(_t/je),[Tt/(Oe*i(_t)),F((2*_t+f(2*_t))/nt)]},ut}var ke=be(_/M,_,c);function De(){return u.geoProjection(ke).scale(169.529)}var He=2.00276,Ae=1.11072;function Le(Oe,je){var nt=ye(c,je);return[He*Oe/(1/i(je)+Ae/i(nt)),(je+_*f(nt))/He]}Le.invert=function(Oe,je){var nt=He*je,ut=je<0?-w:w,Tt=25,_t,kt;do kt=nt-_*f(ut),ut-=_t=(f(2*ut)+2*ut-c*f(kt))/(2*i(2*ut)+2+c*i(kt)*_*i(ut));while(T(_t)>l&&--Tt>0);return kt=nt-_*f(ut),[Oe*(1/i(kt)+Ae/i(ut))/He,kt]};function Ze(){return u.geoProjection(Le).scale(160.857)}function We(Oe){var je=0,nt=u.geoProjectionMutator(Oe),ut=nt(je);return ut.parallel=function(Tt){return arguments.length?nt(je=Tt*S):je*E},ut}function ze(Oe,je){return[Oe*i(je),je]}ze.invert=function(Oe,je){return[Oe/i(je),je]};function Ie(){return u.geoProjection(ze).scale(152.63)}function Ve(Oe){if(!Oe)return ze;var je=1/y(Oe);function nt(ut,Tt){var _t=je+Oe-Tt,kt=_t&&ut*i(Tt)/_t;return[_t*f(kt),je-_t*i(kt)]}return nt.invert=function(ut,Tt){var _t=D(ut*ut+(Tt=je-Tt)*Tt),kt=je+Oe-_t;return[_t/i(kt)*a(ut,Tt),kt]},nt}function dt(){return We(Ve).scale(123.082).center([0,26.1441]).parallel(45)}function Ft(Oe){function je(nt,ut){var Tt=M-ut,_t=Tt&&nt*Oe*f(Tt)/Tt;return[Tt*f(_t)/Oe,M-Tt*i(_t)]}return je.invert=function(nt,ut){var Tt=nt*Oe,_t=M-ut,kt=D(Tt*Tt+_t*_t),vr=a(Tt,_t);return[(kt?kt/f(kt):1)*vr/Oe,M-kt]},je}function Qt(){var Oe=.5,je=u.geoProjectionMutator(Ft),nt=je(Oe);return nt.fraction=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(158.837)}var Ot=be(1,4/c,c);function Ct(){return u.geoProjection(Ot).scale(152.63)}function jt(Oe,je,nt,ut,Tt,_t){var kt=i(_t),vr;if(T(Oe)>1||T(_t)>1)vr=I(nt*Tt+je*ut*kt);else{var mr=f(Oe/2),fr=f(_t/2);vr=2*F(D(mr*mr+je*ut*fr*fr))}return T(vr)>l?[vr,a(ut*f(_t),je*Tt-nt*ut*kt)]:[0,0]}function Nt(Oe,je,nt){return I((Oe*Oe+je*je-nt*nt)/(2*Oe*je))}function Lt(Oe){return Oe-2*c*r((Oe+c)/(2*c))}function Xe(Oe,je,nt){for(var ut=[[Oe[0],Oe[1],f(Oe[1]),i(Oe[1])],[je[0],je[1],f(je[1]),i(je[1])],[nt[0],nt[1],f(nt[1]),i(nt[1])]],Tt=ut[2],_t,kt=0;kt<3;++kt,Tt=_t)_t=ut[kt],Tt.v=jt(_t[1]-Tt[1],Tt[3],Tt[2],_t[3],_t[2],_t[0]-Tt[0]),Tt.point=[0,0];var vr=Nt(ut[0].v[0],ut[2].v[0],ut[1].v[0]),mr=Nt(ut[0].v[0],ut[1].v[0],ut[2].v[0]),fr=c-vr;ut[2].point[1]=0,ut[0].point[0]=-(ut[1].point[0]=ut[0].v[0]/2);var Tr=[ut[2].point[0]=ut[0].point[0]+ut[2].v[0]*i(vr),2*(ut[0].point[1]=ut[1].point[1]=ut[2].v[0]*f(vr))];function zr(Qr,on){var En=f(on),Nn=i(on),$n=new Array(3),Ta;for(Ta=0;Ta<3;++Ta){var Ea=ut[Ta];if($n[Ta]=jt(on-Ea[1],Ea[3],Ea[2],Nn,En,Qr-Ea[0]),!$n[Ta][0])return Ea.point;$n[Ta][1]=Lt($n[Ta][1]-Ea.v[1])}var ni=Tr.slice();for(Ta=0;Ta<3;++Ta){var qa=Ta==2?0:Ta+1,ai=Nt(ut[Ta].v[0],$n[Ta][0],$n[qa][0]);$n[Ta][1]<0&&(ai=-ai),Ta?Ta==1?(ai=mr-ai,ni[0]-=$n[Ta][0]*i(ai),ni[1]-=$n[Ta][0]*f(ai)):(ai=fr-ai,ni[0]+=$n[Ta][0]*i(ai),ni[1]+=$n[Ta][0]*f(ai)):(ni[0]+=$n[Ta][0]*i(ai),ni[1]-=$n[Ta][0]*f(ai))}return ni[0]/=3,ni[1]/=3,ni}return zr}function it(Oe){return Oe[0]*=S,Oe[1]*=S,Oe}function Ye(){return Ee([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ee(Oe,je,nt){var ut=u.geoCentroid({type:"MultiPoint",coordinates:[Oe,je,nt]}),Tt=[-ut[0],-ut[1]],_t=u.geoRotation(Tt),kt=Xe(it(_t(Oe)),it(_t(je)),it(_t(nt)));kt.invert=fe(kt);var vr=u.geoProjection(kt).rotate(Tt),mr=vr.center;return delete vr.rotate,vr.center=function(fr){return arguments.length?mr(_t(fr)):_t.invert(mr())},vr.clipAngle(90)}function Ge(Oe,je){var nt=D(1-f(je));return[2/h*Oe*nt,h*(1-nt)]}Ge.invert=function(Oe,je){var nt=(nt=je/h-1)*nt;return[nt>0?Oe*D(c/nt)/2:0,F(1-nt)]};function Ke(){return u.geoProjection(Ge).scale(95.6464).center([0,30])}function qe(Oe){var je=y(Oe);function nt(ut,Tt){return[ut,(ut?ut/f(ut):1)*(f(Tt)*i(ut)-je*i(Tt))]}return nt.invert=je?function(ut,Tt){ut&&(Tt*=f(ut)/ut);var _t=i(ut);return[ut,2*a(D(_t*_t+je*je-Tt*Tt)-_t,je-Tt)]}:function(ut,Tt){return[ut,F(ut?Tt*y(ut)/ut:Tt)]},nt}function At(){return We(qe).scale(249.828).clipAngle(90)}var yt=D(3);function Mt(Oe,je){return[yt*Oe*(2*i(2*je/3)-1)/h,yt*h*f(je/3)]}Mt.invert=function(Oe,je){var nt=3*F(je/(yt*h));return[h*Oe/(yt*(2*i(2*nt/3)-1)),nt]};function Gt(){return u.geoProjection(Mt).scale(156.19)}function zt(Oe){var je=i(Oe);function nt(ut,Tt){return[ut*je,f(Tt)/je]}return nt.invert=function(ut,Tt){return[ut/je,F(Tt*je)]},nt}function Ht(){return We(zt).parallel(38.58).scale(195.044)}function Zt(Oe){var je=i(Oe);function nt(ut,Tt){return[ut*je,(1+je)*y(Tt/2)]}return nt.invert=function(ut,Tt){return[ut/je,e(Tt/(1+je))*2]},nt}function Wt(){return We(Zt).scale(124.75)}function sr(Oe,je){var nt=D(8/(3*c));return[nt*Oe*(1-T(je)/c),nt*je]}sr.invert=function(Oe,je){var nt=D(8/(3*c)),ut=je/nt;return[Oe/(nt*(1-T(ut)/c)),ut]};function Gr(){return u.geoProjection(sr).scale(165.664)}function cn(Oe,je){var nt=D(4-3*f(T(je)));return[2/D(6*c)*Oe*nt,d(je)*D(2*c/3)*(2-nt)]}cn.invert=function(Oe,je){var nt=2-T(je)/D(2*c/3);return[Oe*D(6*c)/(2*nt),d(je)*F((4-nt*nt)/3)]};function qr(){return u.geoProjection(cn).scale(165.664)}function st(Oe,je){var nt=D(c*(4+c));return[2/nt*Oe*(1+D(1-4*je*je/(c*c))),4/nt*je]}st.invert=function(Oe,je){var nt=D(c*(4+c))/2;return[Oe*nt/(1+D(1-je*je*(4+c)/(4*c))),je*nt/2]};function rr(){return u.geoProjection(st).scale(180.739)}function Jt(Oe,je){var nt=(2+M)*f(je);je/=2;for(var ut=0,Tt=1/0;ut<10&&T(Tt)>l;ut++){var _t=i(je);je-=Tt=(je+f(je)*(_t+2)-nt)/(2*_t*(1+_t))}return[2/D(c*(4+c))*Oe*(1+i(je)),2*D(c/(4+c))*f(je)]}Jt.invert=function(Oe,je){var nt=je*D((4+c)/c)/2,ut=F(nt),Tt=i(ut);return[Oe/(2/D(c*(4+c))*(1+Tt)),F((ut+nt*(Tt+2))/(2+M))]};function hr(){return u.geoProjection(Jt).scale(180.739)}function Sr(Oe,je){return[Oe*(1+i(je))/D(2+c),2*je/D(2+c)]}Sr.invert=function(Oe,je){var nt=D(2+c),ut=je*nt/2;return[nt*Oe/(1+i(ut)),ut]};function tt(){return u.geoProjection(Sr).scale(173.044)}function Qe(Oe,je){for(var nt=(1+M)*f(je),ut=0,Tt=1/0;ut<10&&T(Tt)>l;ut++)je-=Tt=(je+f(je)-nt)/(1+i(je));return nt=D(2+c),[Oe*(1+i(je))/nt,2*je/nt]}Qe.invert=function(Oe,je){var nt=1+M,ut=D(nt/2);return[Oe*2*ut/(1+i(je*=ut)),F((je+f(je))/nt)]};function lt(){return u.geoProjection(Qe).scale(173.044)}var ft=3+2*_;function Et(Oe,je){var nt=f(Oe/=2),ut=i(Oe),Tt=D(i(je)),_t=i(je/=2),kt=f(je)/(_t+_*ut*Tt),vr=D(2/(1+kt*kt)),mr=D((_*_t+(ut+nt)*Tt)/(_*_t+(ut-nt)*Tt));return[ft*(vr*(mr-1/mr)-2*v(mr)),ft*(vr*kt*(mr+1/mr)-2*e(kt))]}Et.invert=function(Oe,je){if(!(_t=$.invert(Oe/1.2,je*1.065)))return null;var nt=_t[0],ut=_t[1],Tt=20,_t;Oe/=ft,je/=ft;do{var kt=nt/2,vr=ut/2,mr=f(kt),fr=i(kt),Tr=f(vr),zr=i(vr),Qr=i(ut),on=D(Qr),En=Tr/(zr+_*fr*on),Nn=En*En,$n=D(2/(1+Nn)),Ta=_*zr+(fr+mr)*on,Ea=_*zr+(fr-mr)*on,ni=Ta/Ea,qa=D(ni),ai=qa-1/qa,Ti=qa+1/qa,Yr=$n*ai-2*v(qa)-Oe,et=$n*En*Ti-2*e(En)-je,$t=Tr&&p*on*mr*Nn/Tr,Kr=(_*fr*zr+on)/(2*(zr+_*fr*on)*(zr+_*fr*on)*on),Hn=-.5*En*$n*$n*$n,ta=Hn*$t,ea=Hn*Kr,vi=(vi=2*zr+_*on*(fr-mr))*vi*qa,Di=(_*fr*zr*on+Qr)/vi,$i=-(_*mr*Tr)/(on*vi),Ri=ai*ta-2*Di/qa+$n*(Di+Di/ni),ce=ai*ea-2*$i/qa+$n*($i+$i/ni),Te=En*Ti*ta-2*$t/(1+Nn)+$n*Ti*$t+$n*En*(Di-Di/ni),Re=En*Ti*ea-2*Kr/(1+Nn)+$n*Ti*Kr+$n*En*($i-$i/ni),Ue=ce*Te-Re*Ri;if(!Ue)break;var Be=(et*ce-Yr*Re)/Ue,Je=(Yr*Te-et*Ri)/Ue;nt-=Be,ut=s(-M,o(M,ut-Je))}while((T(Be)>l||T(Je)>l)&&--Tt>0);return T(T(ut)-M)<l?[0,ut]:Tt&&[nt,ut]};function Vt(){return u.geoProjection(Et).scale(62.5271)}var Pe=i(35*S);function Se(Oe,je){var nt=y(je/2);return[Oe*Pe*D(1-nt*nt),(1+Pe)*nt]}Se.invert=function(Oe,je){var nt=je/(1+Pe);return[Oe&&Oe/(Pe*D(1-nt*nt)),2*e(nt)]};function ot(){return u.geoProjection(Se).scale(137.152)}function ct(Oe,je){var nt=je/2,ut=i(nt);return[2*Oe/h*i(je)*ut*ut,h*y(nt)]}ct.invert=function(Oe,je){var nt=e(je/h),ut=i(nt),Tt=2*nt;return[Oe*h/2/(i(Tt)*ut*ut),Tt]};function pt(){return u.geoProjection(ct).scale(135.264)}function St(Oe){var je=1-Oe,nt=_t(c,0)[0]-_t(-c,0)[0],ut=_t(0,M)[1]-_t(0,-M)[1],Tt=D(2*ut/nt);function _t(mr,fr){var Tr=i(fr),zr=f(fr);return[Tr/(je+Oe*Tr)*mr,je*fr+Oe*zr]}function kt(mr,fr){var Tr=_t(mr,fr);return[Tr[0]*Tt,Tr[1]/Tt]}function vr(mr){return kt(0,mr)[1]}return kt.invert=function(mr,fr){var Tr=_e(vr,fr),zr=mr/Tt*(Oe+je/i(Tr));return[zr,Tr]},kt}function xt(){var Oe=.5,je=u.geoProjectionMutator(St),nt=je(Oe);return nt.alpha=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(168.725)}function Pt(Oe){return[Oe[0]/2,F(y(Oe[1]/2*S))*E]}function Xt(Oe){return[Oe[0]*2,2*e(f(Oe[1]*S))*E]}function or(Oe){Oe==null&&(Oe=u.geoOrthographic);var je=Oe(),nt=u.geoEquirectangular().scale(E).precision(0).clipAngle(null).translate([0,0]);function ut(_t){return je(Pt(_t))}je.invert&&(ut.invert=function(_t){return Xt(je.invert(_t))}),ut.stream=function(_t){var kt=je.stream(_t),vr=nt.stream({point:function(mr,fr){kt.point(mr/2,F(y(-fr/2*S))*E)},lineStart:function(){kt.lineStart()},lineEnd:function(){kt.lineEnd()},polygonStart:function(){kt.polygonStart()},polygonEnd:function(){kt.polygonEnd()}});return vr.sphere=kt.sphere,vr};function Tt(_t){ut[_t]=function(){return arguments.length?(je[_t].apply(je,arguments),ut):je[_t]()}}return ut.rotate=function(_t){return arguments.length?(nt.rotate(_t),ut):nt.rotate()},ut.center=function(_t){return arguments.length?(je.center(Pt(_t)),ut):Xt(je.center())},Tt("angle"),Tt("clipAngle"),Tt("clipExtent"),Tt("fitExtent"),Tt("fitHeight"),Tt("fitSize"),Tt("fitWidth"),Tt("scale"),Tt("translate"),Tt("precision"),ut.scale(249.5)}function Pr(Oe,je){var nt=2*c/je,ut=Oe*Oe;function Tt(_t,kt){var vr=u.geoAzimuthalEquidistantRaw(_t,kt),mr=vr[0],fr=vr[1],Tr=mr*mr+fr*fr;if(Tr>ut){var zr=D(Tr),Qr=a(fr,mr),on=nt*g(Qr/nt),En=Qr-on,Nn=Oe*i(En),$n=(Oe*f(En)-En*f(Nn))/(M-Nn),Ta=Ar(En,$n),Ea=(c-Oe)/Er(Ta,Nn,c);mr=zr;var ni=50,qa;do mr-=qa=(Oe+Er(Ta,Nn,mr)*Ea-zr)/(Ta(mr)*Ea);while(T(qa)>l&&--ni>0);fr=En*f(mr),mr<M&&(fr-=$n*(mr-M));var ai=f(on),Ti=i(on);vr[0]=mr*Ti-fr*ai,vr[1]=mr*ai+fr*Ti}return vr}return Tt.invert=function(_t,kt){var vr=_t*_t+kt*kt;if(vr>ut){var mr=D(vr),fr=a(kt,_t),Tr=nt*g(fr/nt),zr=fr-Tr;_t=mr*i(zr),kt=mr*f(zr);for(var Qr=_t-M,on=f(_t),En=kt/on,Nn=_t<M?1/0:0,$n=10;;){var Ta=Oe*f(En),Ea=Oe*i(En),ni=f(Ea),qa=M-Ea,ai=(Ta-En*ni)/qa,Ti=Ar(En,ai);if(T(Nn)<x||!--$n)break;En-=Nn=(En*on-ai*Qr-kt)/(on-Qr*2*(qa*(Ea+En*Ta*i(Ea)-ni)-Ta*(Ta-En*ni))/(qa*qa))}mr=Oe+Er(Ti,Ea,_t)*(c-Oe)/Er(Ti,Ea,c),fr=Tr+En,_t=mr*i(fr),kt=mr*f(fr)}return u.geoAzimuthalEquidistantRaw.invert(_t,kt)},Tt}function Ar(Oe,je){return function(nt){var ut=Oe*i(nt);return nt<M&&(ut-=je),D(1+ut*ut)}}function Er(Oe,je,nt){for(var ut=50,Tt=(nt-je)/ut,_t=Oe(je)+Oe(nt),kt=1,vr=je;kt<ut;++kt)_t+=2*Oe(vr+=Tt);return _t*.5*Tt}function $r(){var Oe=6,je=30*S,nt=i(je),ut=f(je),Tt=u.geoProjectionMutator(Pr),_t=Tt(je,Oe),kt=_t.stream,vr=.01,mr=-i(vr*S),fr=f(vr*S);return _t.radius=function(Tr){return arguments.length?(nt=i(je=Tr*S),ut=f(je),Tt(je,Oe)):je*E},_t.lobes=function(Tr){return arguments.length?Tt(je,Oe=+Tr):Oe},_t.stream=function(Tr){var zr=_t.rotate(),Qr=kt(Tr),on=(_t.rotate([0,0]),kt(Tr));return _t.rotate(zr),Qr.sphere=function(){on.polygonStart(),on.lineStart();for(var En=0,Nn=2*c/Oe,$n=0;En<Oe;++En,$n-=Nn)on.point(a(fr*i($n),mr)*E,F(fr*f($n))*E),on.point(a(ut*i($n-Nn/2),nt)*E,F(ut*f($n-Nn/2))*E);on.lineEnd(),on.polygonEnd()},Qr},_t.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function lr(Oe,je,nt,ut,Tt,_t,kt,vr){arguments.length<8&&(vr=0);function mr(fr,Tr){if(!Tr)return[Oe*fr/c,0];var zr=Tr*Tr,Qr=Oe+zr*(je+zr*(nt+zr*ut)),on=Tr*(Tt-1+zr*(_t-vr+zr*kt)),En=(Qr*Qr+on*on)/(2*on),Nn=fr*F(Qr/En)/c;return[En*f(Nn),Tr*(1+zr*vr)+En*(1-i(Nn))]}return mr.invert=function(fr,Tr){var zr=c*fr/Oe,Qr=Tr,on,En,Nn=50;do{var $n=Qr*Qr,Ta=Oe+$n*(je+$n*(nt+$n*ut)),Ea=Qr*(Tt-1+$n*(_t-vr+$n*kt)),ni=Ta*Ta+Ea*Ea,qa=2*Ea,ai=ni/qa,Ti=ai*ai,Yr=F(Ta/ai)/c,et=zr*Yr,$t=Ta*Ta,Kr=(2*je+$n*(4*nt+$n*6*ut))*Qr,Hn=Tt+$n*(3*_t+$n*5*kt),ta=2*(Ta*Kr+Ea*(Hn-1)),ea=2*(Hn-1),vi=(ta*qa-ni*ea)/(qa*qa),Di=i(et),$i=f(et),Ri=ai*Di,ce=ai*$i,Te=zr/c*(1/D(1-$t/Ti))*(Kr*ai-Ta*vi)/Ti,Re=ce-fr,Ue=Qr*(1+$n*vr)+ai-Ri-Tr,Be=vi*$i+Ri*Te,Je=Ri*Yr,wt=1+vi-(vi*Di-ce*Te),gt=ce*Yr,It=Be*gt-wt*Je;if(!It)break;zr-=on=(Ue*Be-Re*wt)/It,Qr-=En=(Re*gt-Ue*Je)/It}while((T(on)>l||T(En)>l)&&--Nn>0);return[zr,Qr]},mr}var br=lr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Fr(){return u.geoProjection(br).scale(149.995)}var Hr=lr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Lr(){return u.geoProjection(Hr).scale(153.93)}var at=lr(5/6*c,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Rt(){return u.geoProjection(at).scale(130.945)}function Kt(Oe,je){var nt=Oe*Oe,ut=je*je;return[Oe*(1-.162388*ut)*(.87-952426e-9*nt*nt),je*(1+ut/12)]}Kt.invert=function(Oe,je){var nt=Oe,ut=je,Tt=50,_t;do{var kt=ut*ut;ut-=_t=(ut*(1+kt/12)-je)/(1+kt/4)}while(T(_t)>l&&--Tt>0);Tt=50,Oe/=1-.162388*kt;do{var vr=(vr=nt*nt)*vr;nt-=_t=(nt*(.87-952426e-9*vr)-Oe)/(.87-.00476213*vr)}while(T(_t)>l&&--Tt>0);return[nt,ut]};function ur(){return u.geoProjection(Kt).scale(131.747)}var Nr=lr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Vr(){return u.geoProjection(Nr).scale(131.087)}function Dr(Oe){var je=Oe(M,0)[0]-Oe(-M,0)[0];function nt(ut,Tt){var _t=ut>0?-.5:.5,kt=Oe(ut+_t*c,Tt);return kt[0]-=_t*je,kt}return Oe.invert&&(nt.invert=function(ut,Tt){var _t=ut>0?-.5:.5,kt=Oe.invert(ut+_t*je,Tt),vr=kt[0]-_t*c;return vr<-c?vr+=2*c:vr>c&&(vr-=2*c),kt[0]=vr,kt}),nt}function Mr(Oe,je){var nt=d(Oe),ut=d(je),Tt=i(je),_t=i(Oe)*Tt,kt=f(Oe)*Tt,vr=f(ut*je);Oe=T(a(kt,vr)),je=F(_t),T(Oe-M)>l&&(Oe%=M);var mr=jr(Oe>c/4?M-Oe:Oe,je);return Oe>c/4&&(vr=mr[0],mr[0]=-mr[1],mr[1]=-vr),mr[0]*=nt,mr[1]*=-ut,mr}Mr.invert=function(Oe,je){T(Oe)>1&&(Oe=d(Oe)*2-Oe),T(je)>1&&(je=d(je)*2-je);var nt=d(Oe),ut=d(je),Tt=-nt*Oe,_t=-ut*je,kt=_t/Tt<1,vr=kn(kt?_t:Tt,kt?Tt:_t),mr=vr[0],fr=vr[1],Tr=i(fr);return kt&&(mr=-M-mr),[nt*(a(f(mr)*Tr,-f(fr))+c),ut*F(i(mr)*Tr)]};function jr(Oe,je){if(je===M)return[0,0];var nt=f(je),ut=nt*nt,Tt=ut*ut,_t=1+Tt,kt=1+3*Tt,vr=1-Tt,mr=F(1/D(_t)),fr=vr+ut*_t*mr,Tr=(1-nt)/fr,zr=D(Tr),Qr=Tr*_t,on=D(Qr),En=zr*vr,Nn,$n;if(Oe===0)return[0,-(En+ut*on)];var Ta=i(je),Ea=1/Ta,ni=2*nt*Ta,qa=(-3*ut+mr*kt)*ni,ai=(-fr*Ta-(1-nt)*qa)/(fr*fr),Ti=.5*ai/zr,Yr=vr*Ti-2*ut*zr*ni,et=ut*_t*ai+Tr*kt*ni,$t=-Ea*ni,Kr=-Ea*et,Hn=-2*Ea*Yr,ta=4*Oe/c,ea;if(Oe>.222*c||je<c/4&&Oe>.175*c){if(Nn=(En+ut*D(Qr*(1+Tt)-En*En))/(1+Tt),Oe>c/4)return[Nn,Nn];var vi=Nn,Di=.5*Nn;Nn=.5*(Di+vi),$n=50;do{var $i=D(Qr-Nn*Nn),Ri=Nn*(Hn+$t*$i)+Kr*F(Nn/on)-ta;if(!Ri)break;Ri<0?Di=Nn:vi=Nn,Nn=.5*(Di+vi)}while(T(vi-Di)>l&&--$n>0)}else{Nn=l,$n=25;do{var ce=Nn*Nn,Te=D(Qr-ce),Re=Hn+$t*Te,Ue=Nn*Re+Kr*F(Nn/on)-ta,Be=Re+(Kr-$t*ce)/Te;Nn-=ea=Te?Ue/Be:0}while(T(ea)>l&&--$n>0)}return[Nn,-En-ut*D(Qr-Nn*Nn)]}function kn(Oe,je){for(var nt=0,ut=1,Tt=.5,_t=50;;){var kt=Tt*Tt,vr=D(Tt),mr=F(1/D(1+kt)),fr=1-kt+Tt*(1+kt)*mr,Tr=(1-vr)/fr,zr=D(Tr),Qr=Tr*(1+kt),on=zr*(1-kt),En=Qr-Oe*Oe,Nn=D(En),$n=je+on+Tt*Nn;if(T(ut-nt)<x||--_t===0||$n===0)break;$n>0?nt=Tt:ut=Tt,Tt=.5*(nt+ut)}if(!_t)return null;var Ta=F(vr),Ea=i(Ta),ni=1/Ea,qa=2*vr*Ea,ai=(-3*Tt+mr*(1+3*kt))*qa,Ti=(-fr*Ea-(1-vr)*ai)/(fr*fr),Yr=.5*Ti/zr,et=(1-kt)*Yr-2*Tt*zr*qa,$t=-2*ni*et,Kr=-ni*qa,Hn=-ni*(Tt*(1+kt)*Ti+Tr*(1+3*kt)*qa);return[c/4*(Oe*($t+Kr*Nn)+Hn*F(Oe/D(Qr))),Ta]}function mn(){return u.geoProjection(Dr(Mr)).scale(239.75)}function Wn(Oe,je,nt){var ut,Tt,_t;return Oe?(ut=In(Oe,nt),je?(Tt=In(je,1-nt),_t=Tt[1]*Tt[1]+nt*ut[0]*ut[0]*Tt[0]*Tt[0],[[ut[0]*Tt[2]/_t,ut[1]*ut[2]*Tt[0]*Tt[1]/_t],[ut[1]*Tt[1]/_t,-ut[0]*ut[2]*Tt[0]*Tt[2]/_t],[ut[2]*Tt[1]*Tt[2]/_t,-nt*ut[0]*ut[1]*Tt[0]/_t]]):[[ut[0],0],[ut[1],0],[ut[2],0]]):(Tt=In(je,1-nt),[[0,Tt[0]/Tt[1]],[1/Tt[1],0],[Tt[2]/Tt[1],0]])}function In(Oe,je){var nt,ut,Tt,_t,kt;if(je<l)return _t=f(Oe),ut=i(Oe),nt=je*(Oe-_t*ut)/4,[_t-nt*ut,ut+nt*_t,1-je*_t*_t/2,Oe-nt];if(je>=1-l)return nt=(1-je)/4,ut=z(Oe),_t=R(Oe),Tt=1/ut,kt=ut*O(Oe),[_t+nt*(kt-Oe)/(ut*ut),Tt-nt*_t*Tt*(kt-Oe),Tt+nt*_t*Tt*(kt+Oe),2*e(n(Oe))-M+nt*(kt-Oe)/ut];var vr=[1,0,0,0,0,0,0,0,0],mr=[D(je),0,0,0,0,0,0,0,0],fr=0;for(ut=D(1-je),kt=1;T(mr[fr]/vr[fr])>l&&fr<8;)nt=vr[fr++],mr[fr]=(nt-ut)/2,vr[fr]=(nt+ut)/2,ut=D(nt*ut),kt*=2;Tt=kt*vr[fr]*Oe;do _t=mr[fr]*f(ut=Tt)/vr[fr],Tt=(F(_t)+Tt)/2;while(--fr);return[f(Tt),_t=i(Tt),_t/i(Tt-ut),Tt]}function Jn(Oe,je,nt){var ut=T(Oe),Tt=T(je),_t=O(Tt);if(ut){var kt=1/f(ut),vr=1/(y(ut)*y(ut)),mr=-(vr+nt*(_t*_t*kt*kt)-1+nt),fr=(nt-1)*vr,Tr=(-mr+D(mr*mr-4*fr))/2;return[Kn(e(1/D(Tr)),nt)*d(Oe),Kn(e(D((Tr/vr-1)/nt)),1-nt)*d(je)]}return[0,Kn(e(_t),1-nt)*d(je)]}function Kn(Oe,je){if(!je)return Oe;if(je===1)return v(y(Oe/2+w));for(var nt=1,ut=D(1-je),Tt=D(je),_t=0;T(Tt)>l;_t++){if(Oe%c){var kt=e(ut*y(Oe)/nt);kt<0&&(kt+=c),Oe+=kt+~~(Oe/c)*c}else Oe+=Oe;Tt=(nt+ut)/2,ut=D(nt*ut),Tt=((nt=Tt)-ut)/2}return Oe/(b(2,_t)*nt)}function ma(Oe,je){var nt=(_-1)/(_+1),ut=D(1-nt*nt),Tt=Kn(M,ut*ut),_t=-1,kt=v(y(c/4+T(je)/2)),vr=n(_t*kt)/D(nt),mr=Ra(vr*i(_t*Oe),vr*f(_t*Oe)),fr=Jn(mr[0],mr[1],ut*ut);return[-fr[1],(je>=0?1:-1)*(.5*Tt-fr[0])]}function Ra(Oe,je){var nt=Oe*Oe,ut=je+1,Tt=1-nt-je*je;return[.5*((Oe>=0?M:-M)-a(Tt,2*Oe)),-.25*v(Tt*Tt+4*nt)+.5*v(ut*ut+nt)]}function _i(Oe,je){var nt=je[0]*je[0]+je[1]*je[1];return[(Oe[0]*je[0]+Oe[1]*je[1])/nt,(Oe[1]*je[0]-Oe[0]*je[1])/nt]}ma.invert=function(Oe,je){var nt=(_-1)/(_+1),ut=D(1-nt*nt),Tt=Kn(M,ut*ut),_t=-1,kt=Wn(.5*Tt-je,-Oe,ut*ut),vr=_i(kt[0],kt[1]),mr=a(vr[1],vr[0])/_t;return[mr,2*e(n(.5/_t*v(nt*vr[0]*vr[0]+nt*vr[1]*vr[1])))-M]};function Ka(){return u.geoProjection(Dr(ma)).scale(151.496)}function ri(Oe){var je=f(Oe),nt=i(Oe),ut=ei(Oe);ut.invert=ei(-Oe);function Tt(_t,kt){var vr=ut(_t,kt);_t=vr[0],kt=vr[1];var mr=f(kt),fr=i(kt),Tr=i(_t),zr=I(je*mr+nt*fr*Tr),Qr=f(zr),on=T(Qr)>l?zr/Qr:1;return[on*nt*f(_t),(T(_t)>M?on:-on)*(je*fr-nt*mr*Tr)]}return Tt.invert=function(_t,kt){var vr=D(_t*_t+kt*kt),mr=-f(vr),fr=i(vr),Tr=vr*fr,zr=-kt*mr,Qr=vr*je,on=D(Tr*Tr+zr*zr-Qr*Qr),En=a(Tr*Qr+zr*on,zr*Qr-Tr*on),Nn=(vr>M?-1:1)*a(_t*mr,vr*i(En)*fr+kt*f(En)*mr);return ut.invert(Nn,En)},Tt}function ei(Oe){var je=f(Oe),nt=i(Oe);return function(ut,Tt){var _t=i(Tt),kt=i(ut)*_t,vr=f(ut)*_t,mr=f(Tt);return[a(vr,kt*nt-mr*je),F(mr*nt+kt*je)]}}function kr(){var Oe=0,je=u.geoProjectionMutator(ri),nt=je(Oe),ut=nt.rotate,Tt=nt.stream,_t=u.geoCircle();return nt.parallel=function(kt){if(!arguments.length)return Oe*E;var vr=nt.rotate();return je(Oe=kt*S).rotate(vr)},nt.rotate=function(kt){return arguments.length?(ut.call(nt,[kt[0],kt[1]-Oe*E]),_t.center([-kt[0],-kt[1]]),nt):(kt=ut.call(nt),kt[1]+=Oe*E,kt)},nt.stream=function(kt){return kt=Tt(kt),kt.sphere=function(){kt.polygonStart();var vr=.01,mr=_t.radius(90-vr)().coordinates[0],fr=mr.length-1,Tr=-1,zr;for(kt.lineStart();++Tr<fr;)kt.point((zr=mr[Tr])[0],zr[1]);for(kt.lineEnd(),mr=_t.radius(90+vr)().coordinates[0],fr=mr.length-1,kt.lineStart();--Tr>=0;)kt.point((zr=mr[Tr])[0],zr[1]);kt.lineEnd(),kt.polygonEnd()},kt},nt.scale(79.4187).parallel(45).clipAngle(180-.001)}var bn=3,dn=F(1-1/bn)*E,Ln=zt(0);function ra(Oe){var je=dn*S,nt=Ge(c,je)[0]-Ge(-c,je)[0],ut=Ln(0,je)[1],Tt=Ge(0,je)[1],_t=h-Tt,kt=L/Oe,vr=4/L,mr=ut+_t*_t*4/L;function fr(Tr,zr){var Qr,on=T(zr);if(on>je){var En=o(Oe-1,s(0,r((Tr+c)/kt)));Tr+=c*(Oe-1)/Oe-En*kt,Qr=Ge(Tr,on),Qr[0]=Qr[0]*L/nt-L*(Oe-1)/(2*Oe)+En*L/Oe,Qr[1]=ut+(Qr[1]-Tt)*4*_t/L,zr<0&&(Qr[1]=-Qr[1])}else Qr=Ln(Tr,zr);return Qr[0]*=vr,Qr[1]/=mr,Qr}return fr.invert=function(Tr,zr){Tr/=vr,zr*=mr;var Qr=T(zr);if(Qr>ut){var on=o(Oe-1,s(0,r((Tr+c)/kt)));Tr=(Tr+c*(Oe-1)/Oe-on*kt)*nt/L;var En=Ge.invert(Tr,.25*(Qr-ut)*L/_t+Tt);return En[0]-=c*(Oe-1)/Oe-on*kt,zr<0&&(En[1]=-En[1]),En}return Ln.invert(Tr,zr)},fr}function ya(Oe,je){return[Oe,je&1?90-l:dn]}function sa(Oe,je){return[Oe,je&1?-90+l:-dn]}function Bn(Oe){return[Oe[0]*(1-l),Oe[1]]}function Qn(Oe){var je=[].concat(A.range(-180,180+Oe/2,Oe).map(ya),A.range(180,-180-Oe/2,-Oe).map(sa));return{type:"Polygon",coordinates:[Oe===180?je.map(Bn):je]}}function Xa(){var Oe=4,je=u.geoProjectionMutator(ra),nt=je(Oe),ut=nt.stream;return nt.lobes=function(Tt){return arguments.length?je(Oe=+Tt):Oe},nt.stream=function(Tt){var _t=nt.rotate(),kt=ut(Tt),vr=(nt.rotate([0,0]),ut(Tt));return nt.rotate(_t),kt.sphere=function(){u.geoStream(Qn(180/Oe),vr)},kt},nt.scale(239.75)}function mi(Oe){var je=1+Oe,nt=f(1/je),ut=F(nt),Tt=2*D(c/(_t=c+4*ut*je)),_t,kt=.5*Tt*(je+D(Oe*(2+Oe))),vr=Oe*Oe,mr=je*je;function fr(Tr,zr){var Qr=1-f(zr),on,En;if(Qr&&Qr<2){var Nn=M-zr,$n=25,Ta;do{var Ea=f(Nn),ni=i(Nn),qa=ut+a(Ea,je-ni),ai=1+mr-2*je*ni;Nn-=Ta=(Nn-vr*ut-je*Ea+ai*qa-.5*Qr*_t)/(2*je*Ea*qa)}while(T(Ta)>x&&--$n>0);on=Tt*D(ai),En=Tr*qa/c}else on=Tt*(Oe+Qr),En=Tr*ut/c;return[on*f(En),kt-on*i(En)]}return fr.invert=function(Tr,zr){var Qr=Tr*Tr+(zr-=kt)*zr,on=(1+mr-Qr/(Tt*Tt))/(2*je),En=I(on),Nn=f(En),$n=ut+a(Nn,je-on);return[F(Tr/D(Qr))*c/$n,F(1-2*(En-vr*ut-je*Nn+(1+mr-2*je*on)*$n)/_t)]},fr}function Yt(){var Oe=1,je=u.geoProjectionMutator(mi),nt=je(Oe);return nt.ratio=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(167.774).center([0,18.67])}var gr=.7109889596207567,un=.0528035274542;function yn(Oe,je){return je>-gr?(Oe=ke(Oe,je),Oe[1]+=un,Oe):ze(Oe,je)}yn.invert=function(Oe,je){return je>-gr?ke.invert(Oe,je-un):ze.invert(Oe,je)};function sn(){return u.geoProjection(yn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Cn(Oe,je){return T(je)>gr?(Oe=ke(Oe,je),Oe[1]-=je>0?un:-un,Oe):ze(Oe,je)}Cn.invert=function(Oe,je){return T(je)>gr?ke.invert(Oe,je+(je>0?un:-un)):ze.invert(Oe,je)};function Tn(){return u.geoProjection(Cn).scale(152.63)}function gn(Oe,je,nt,ut){var Tt=D(4*c/(2*nt+(1+Oe-je/2)*f(2*nt)+(Oe+je)/2*f(4*nt)+je/2*f(6*nt))),_t=D(ut*f(nt)*D((1+Oe*i(2*nt)+je*i(4*nt))/(1+Oe+je))),kt=nt*mr(1);function vr(zr){return D(1+Oe*i(2*zr)+je*i(4*zr))}function mr(zr){var Qr=zr*nt;return(2*Qr+(1+Oe-je/2)*f(2*Qr)+(Oe+je)/2*f(4*Qr)+je/2*f(6*Qr))/nt}function fr(zr){return vr(zr)*f(zr)}var Tr=function(zr,Qr){var on=nt*_e(mr,kt*f(Qr)/nt,Qr/c);isNaN(on)&&(on=nt*d(Qr));var En=Tt*vr(on);return[En*_t*zr/c*i(on),En/_t*f(on)]};return Tr.invert=function(zr,Qr){var on=_e(fr,Qr*_t/Tt);return[zr*c/(i(on)*Tt*_t*vr(on)),F(nt*mr(on/nt)/kt)]},nt===0&&(Tt=D(ut/c),Tr=function(zr,Qr){return[zr*Tt,f(Qr)/Tt]},Tr.invert=function(zr,Qr){return[zr/Tt,F(Qr*Tt)]}),Tr}function _r(){var Oe=1,je=0,nt=45*S,ut=2,Tt=u.geoProjectionMutator(gn),_t=Tt(Oe,je,nt,ut);return _t.a=function(kt){return arguments.length?Tt(Oe=+kt,je,nt,ut):Oe},_t.b=function(kt){return arguments.length?Tt(Oe,je=+kt,nt,ut):je},_t.psiMax=function(kt){return arguments.length?Tt(Oe,je,nt=+kt*S,ut):nt*E},_t.ratio=function(kt){return arguments.length?Tt(Oe,je,nt,ut=+kt):ut},_t.scale(180.739)}function wr(Oe,je,nt,ut,Tt,_t,kt,vr,mr,fr,Tr){if(Tr.nanEncountered)return NaN;var zr,Qr,on,En,Nn,$n,Ta,Ea,ni,qa;if(zr=nt-je,Qr=Oe(je+zr*.25),on=Oe(nt-zr*.25),isNaN(Qr)){Tr.nanEncountered=!0;return}if(isNaN(on)){Tr.nanEncountered=!0;return}return En=zr*(ut+4*Qr+Tt)/12,Nn=zr*(Tt+4*on+_t)/12,$n=En+Nn,qa=($n-kt)/15,fr>mr?(Tr.maxDepthCount++,$n+qa):Math.abs(qa)<vr?$n+qa:(Ta=je+zr*.5,Ea=wr(Oe,je,Ta,ut,Qr,Tt,En,vr*.5,mr,fr+1,Tr),isNaN(Ea)?(Tr.nanEncountered=!0,NaN):(ni=wr(Oe,Ta,nt,Tt,on,_t,Nn,vr*.5,mr,fr+1,Tr),isNaN(ni)?(Tr.nanEncountered=!0,NaN):Ea+ni))}function Br(Oe,je,nt,ut,Tt){var _t={maxDepthCount:0,nanEncountered:!1};ut===void 0&&(ut=1e-8),Tt===void 0&&(Tt=20);var kt=Oe(je),vr=Oe(.5*(je+nt)),mr=Oe(nt),fr=(kt+4*vr+mr)*(nt-je)/6,Tr=wr(Oe,je,nt,kt,vr,mr,fr,ut,Tt,1,_t);return Tr}function An(Oe,je,nt){function ut(on){return Oe+(1-Oe)*b(1-b(on,je),1/je)}function Tt(on){return Br(ut,0,on,1e-4)}for(var _t=1/Tt(1),kt=1e3,vr=(1+1e-8)*_t,mr=[],fr=0;fr<=kt;fr++)mr.push(Tt(fr/kt)*vr);function Tr(on){var En=0,Nn=kt,$n=kt>>1;do mr[$n]>on?Nn=$n:En=$n,$n=En+Nn>>1;while($n>En);var Ta=mr[$n+1]-mr[$n];return Ta&&(Ta=(on-mr[$n+1])/Ta),($n+1+Ta)/kt}var zr=2*Tr(1)/c*_t/nt,Qr=function(on,En){var Nn=Tr(T(f(En))),$n=ut(Nn)*on;return Nn/=zr,[$n,En>=0?Nn:-Nn]};return Qr.invert=function(on,En){var Nn;return En*=zr,T(En)<1&&(Nn=d(En)*F(Tt(T(En))*_t)),[on/ut(T(En)),Nn]},Qr}function Yn(){var Oe=0,je=2.5,nt=1.183136,ut=u.geoProjectionMutator(An),Tt=ut(Oe,je,nt);return Tt.alpha=function(_t){return arguments.length?ut(Oe=+_t,je,nt):Oe},Tt.k=function(_t){return arguments.length?ut(Oe,je=+_t,nt):je},Tt.gamma=function(_t){return arguments.length?ut(Oe,je,nt=+_t):nt},Tt.scale(152.63)}function ua(Oe,je){return T(Oe[0]-je[0])<l&&T(Oe[1]-je[1])<l}function Sn(Oe,je){for(var nt=-1,ut=Oe.length,Tt=Oe[0],_t,kt,vr,mr=[];++nt<ut;){_t=Oe[nt],kt=(_t[0]-Tt[0])/je,vr=(_t[1]-Tt[1])/je;for(var fr=0;fr<je;++fr)mr.push([Tt[0]+fr*kt,Tt[1]+fr*vr]);Tt=_t}return mr.push(_t),mr}function na(Oe){var je=[],nt,ut,Tt,_t,kt,vr,mr,fr=Oe[0].length;for(mr=0;mr<fr;++mr)nt=Oe[0][mr],ut=nt[0][0],Tt=nt[0][1],_t=nt[1][1],kt=nt[2][0],vr=nt[2][1],je.push(Sn([[ut+l,Tt+l],[ut+l,_t-l],[kt-l,_t-l],[kt-l,vr+l]],30));for(mr=Oe[1].length-1;mr>=0;--mr)nt=Oe[1][mr],ut=nt[0][0],Tt=nt[0][1],_t=nt[1][1],kt=nt[2][0],vr=nt[2][1],je.push(Sn([[kt-l,vr-l],[kt-l,_t+l],[ut+l,_t+l],[ut+l,Tt-l]],30));return{type:"Polygon",coordinates:[A.merge(je)]}}function fa(Oe,je,nt){var ut,Tt;function _t(mr,fr){for(var Tr=fr<0?-1:1,zr=je[+(fr<0)],Qr=0,on=zr.length-1;Qr<on&&mr>zr[Qr][2][0];++Qr);var En=Oe(mr-zr[Qr][1][0],fr);return En[0]+=Oe(zr[Qr][1][0],Tr*fr>Tr*zr[Qr][0][1]?zr[Qr][0][1]:fr)[0],En}nt?_t.invert=nt(_t):Oe.invert&&(_t.invert=function(mr,fr){for(var Tr=Tt[+(fr<0)],zr=je[+(fr<0)],Qr=0,on=Tr.length;Qr<on;++Qr){var En=Tr[Qr];if(En[0][0]<=mr&&mr<En[1][0]&&En[0][1]<=fr&&fr<En[1][1]){var Nn=Oe.invert(mr-Oe(zr[Qr][1][0],0)[0],fr);return Nn[0]+=zr[Qr][1][0],ua(_t(Nn[0],Nn[1]),[mr,fr])?Nn:null}}});var kt=u.geoProjection(_t),vr=kt.stream;return kt.stream=function(mr){var fr=kt.rotate(),Tr=vr(mr),zr=(kt.rotate([0,0]),vr(mr));return kt.rotate(fr),Tr.sphere=function(){u.geoStream(ut,zr)},Tr},kt.lobes=function(mr){return arguments.length?(ut=na(mr),je=mr.map(function(fr){return fr.map(function(Tr){return[[Tr[0][0]*S,Tr[0][1]*S],[Tr[1][0]*S,Tr[1][1]*S],[Tr[2][0]*S,Tr[2][1]*S]]})}),Tt=je.map(function(fr){return fr.map(function(Tr){var zr=Oe(Tr[0][0],Tr[0][1])[0],Qr=Oe(Tr[2][0],Tr[2][1])[0],on=Oe(Tr[1][0],Tr[0][1])[1],En=Oe(Tr[1][0],Tr[1][1])[1],Nn;return on>En&&(Nn=on,on=En,En=Nn),[[zr,on],[Qr,En]]})}),kt):je.map(function(fr){return fr.map(function(Tr){return[[Tr[0][0]*E,Tr[0][1]*E],[Tr[1][0]*E,Tr[1][1]*E],[Tr[2][0]*E,Tr[2][1]*E]]})})},je!=null&&kt.lobes(je),kt}var Ma=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ka(){return fa(Le,Ma).scale(160.857)}var ga=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ia(){return fa(Cn,ga).scale(152.63)}var Mo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ro(){return fa(ke,Mo).scale(169.529)}var Qo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Qs(){return fa(ke,Qo).scale(169.529).rotate([20,0])}var Vs=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Wl(){return fa(yn,Vs,fe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ai=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Hs(){return fa(ze,Ai).scale(152.63).rotate([-20,0])}function Gs(Oe,je){return[3/L*Oe*D(c*c/3-je*je),je]}Gs.invert=function(Oe,je){return[L/3*Oe/D(c*c/3-je*je),je]};function Zi(){return u.geoProjection(Gs).scale(158.837)}function Io(Oe){function je(nt,ut){if(T(T(ut)-M)<l)return[0,ut<0?-2:2];var Tt=f(ut),_t=b((1+Tt)/(1-Tt),Oe/2),kt=.5*(_t+1/_t)+i(nt*=Oe);return[2*f(nt)/kt,(_t-1/_t)/kt]}return je.invert=function(nt,ut){var Tt=T(ut);if(T(Tt-2)<l)return nt?null:[0,d(ut)*M];if(Tt>2)return null;nt/=2,ut/=2;var _t=nt*nt,kt=ut*ut,vr=2*ut/(1+_t+kt);return vr=b((1+vr)/(1-vr),1/Oe),[a(2*nt,1-_t-kt)/Oe,F((vr-1)/(vr+1))]},je}function kl(){var Oe=.5,je=u.geoProjectionMutator(Io),nt=je(Oe);return nt.spacing=function(ut){return arguments.length?je(Oe=+ut):Oe},nt.scale(124.75)}var ws=c/_;function Fi(Oe,je){return[Oe*(1+D(i(je)))/2,je/(i(je/2)*i(Oe/6))]}Fi.invert=function(Oe,je){var nt=T(Oe),ut=T(je),Tt=l,_t=M;ut<ws?_t*=ut/ws:Tt+=6*I(ws/ut);for(var kt=0;kt<25;kt++){var vr=f(_t),mr=D(i(_t)),fr=f(_t/2),Tr=i(_t/2),zr=f(Tt/6),Qr=i(Tt/6),on=.5*Tt*(1+mr)-nt,En=_t/(Tr*Qr)-ut,Nn=mr?-.25*Tt*vr/mr:0,$n=.5*(1+mr),Ta=(1+.5*_t*fr/Tr)/(Tr*Qr),Ea=_t/Tr*(zr/6)/(Qr*Qr),ni=Nn*Ea-Ta*$n,qa=(on*Ea-En*$n)/ni,ai=(En*Nn-on*Ta)/ni;if(_t-=qa,Tt-=ai,T(qa)<l&&T(ai)<l)break}return[Oe<0?-Tt:Tt,je<0?-_t:_t]};function hl(){return u.geoProjection(Fi).scale(97.2672)}function uo(Oe,je){var nt=Oe*Oe,ut=je*je;return[Oe*(.975534+ut*(-.119161+nt*-.0143059+ut*-.0547009)),je*(1.00384+nt*(.0802894+ut*-.02855+nt*199025e-9)+ut*(.0998909+ut*-.0491032))]}uo.invert=function(Oe,je){var nt=d(Oe)*c,ut=je/2,Tt=50;do{var _t=nt*nt,kt=ut*ut,vr=nt*ut,mr=nt*(.975534+kt*(-.119161+_t*-.0143059+kt*-.0547009))-Oe,fr=ut*(1.00384+_t*(.0802894+kt*-.02855+_t*199025e-9)+kt*(.0998909+kt*-.0491032))-je,Tr=.975534-kt*(.119161+3*_t*.0143059+kt*.0547009),zr=-vr*(2*.119161+4*.0547009*kt+2*.0143059*_t),Qr=vr*(2*.0802894+4*199025e-9*_t+2*-.02855*kt),on=1.00384+_t*(.0802894+199025e-9*_t)+kt*(3*(.0998909-.02855*_t)-5*.0491032*kt),En=zr*Qr-on*Tr,Nn=(fr*zr-mr*on)/En,$n=(mr*Qr-fr*Tr)/En;nt-=Nn,ut-=$n}while((T(Nn)>l||T($n)>l)&&--Tt>0);return Tt&&[nt,ut]};function zi(){return u.geoProjection(uo).scale(139.98)}function go(Oe,je){return[f(Oe)/i(je),y(je)*i(Oe)]}go.invert=function(Oe,je){var nt=Oe*Oe,ut=je*je,Tt=ut+1,_t=nt+Tt,kt=Oe?p*D((_t-D(_t*_t-4*nt))/nt):1/D(Tt);return[F(Oe*kt),d(je)*I(kt)]};function ao(){return u.geoProjection(go).scale(144.049).clipAngle(90-.001)}function cs(Oe){var je=i(Oe),nt=y(w+Oe/2);function ut(Tt,_t){var kt=_t-Oe,vr=T(kt)<l?Tt*je:T(vr=w+_t/2)<l||T(T(vr)-M)<l?0:Tt*kt/v(y(vr)/nt);return[vr,kt]}return ut.invert=function(Tt,_t){var kt,vr=_t+Oe;return[T(_t)<l?Tt/je:T(kt=w+vr/2)<l||T(T(kt)-M)<l?0:Tt*v(y(kt)/nt)/_t,vr]},ut}function qs(){return We(cs).parallel(40).scale(158.837)}function lu(Oe,je){return[Oe,1.25*v(y(w+.4*je))]}lu.invert=function(Oe,je){return[Oe,2.5*e(n(.8*je))-.625*c]};function ts(){return u.geoProjection(lu).scale(108.318)}function Mu(Oe){var je=Oe.length-1;function nt(ut,Tt){for(var _t=i(Tt),kt=2/(1+_t*i(ut)),vr=kt*_t*f(ut),mr=kt*f(Tt),fr=je,Tr=Oe[fr],zr=Tr[0],Qr=Tr[1],on;--fr>=0;)Tr=Oe[fr],zr=Tr[0]+vr*(on=zr)-mr*Qr,Qr=Tr[1]+vr*Qr+mr*on;return zr=vr*(on=zr)-mr*Qr,Qr=vr*Qr+mr*on,[zr,Qr]}return nt.invert=function(ut,Tt){var _t=20,kt=ut,vr=Tt;do{for(var mr=je,fr=Oe[mr],Tr=fr[0],zr=fr[1],Qr=0,on=0,En;--mr>=0;)fr=Oe[mr],Qr=Tr+kt*(En=Qr)-vr*on,on=zr+kt*on+vr*En,Tr=fr[0]+kt*(En=Tr)-vr*zr,zr=fr[1]+kt*zr+vr*En;Qr=Tr+kt*(En=Qr)-vr*on,on=zr+kt*on+vr*En,Tr=kt*(En=Tr)-vr*zr-ut,zr=kt*zr+vr*En-Tt;var Nn=Qr*Qr+on*on,$n,Ta;kt-=$n=(Tr*Qr+zr*on)/Nn,vr-=Ta=(zr*Qr-Tr*on)/Nn}while(T($n)+T(Ta)>l*l&&--_t>0);if(_t){var Ea=D(kt*kt+vr*vr),ni=2*e(Ea*.5),qa=f(ni);return[a(kt*qa,Ea*i(ni)),Ea?F(vr*qa/Ea):0]}},nt}var Ds=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],No=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],pc=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ko=[[.9245,0],[0,0],[.01943,0]],Rs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Xl(){return Is(Ds,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function ju(){return Is(No,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Zu(){return Is(pc,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ys(){return Is(ko,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Cl(){return Is(Rs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Is(Oe,je){var nt=u.geoProjection(Mu(Oe)).rotate(je).clipAngle(90),ut=u.geoRotation(je),Tt=nt.center;return delete nt.rotate,nt.center=function(_t){return arguments.length?Tt(ut(_t)):ut.invert(Tt())},nt}var uu=D(6),vl=D(7);function cu(Oe,je){var nt=F(7*f(je)/(3*uu));return[uu*Oe*(2*i(2*nt/3)-1)/vl,9*f(nt/3)/vl]}cu.invert=function(Oe,je){var nt=3*F(je*vl/9);return[Oe*vl/(uu*(2*i(2*nt/3)-1)),F(f(nt)*3*uu/7)]};function Eu(){return u.geoProjection(cu).scale(164.859)}function jl(Oe,je){for(var nt=(1+p)*f(je),ut=je,Tt=0,_t;Tt<25&&(ut-=_t=(f(ut/2)+f(ut)-nt)/(.5*i(ut/2)+i(ut)),!(T(_t)<l));Tt++);return[Oe*(1+2*i(ut)/i(ut/2))/(3*_),2*D(3)*f(ut/2)/D(2+_)]}jl.invert=function(Oe,je){var nt=je*D(2+_)/(2*D(3)),ut=2*F(nt);return[3*_*Oe/(1+2*i(ut)/i(ut/2)),F((nt+f(ut))/(1+p))]};function Su(){return u.geoProjection(jl).scale(188.209)}function el(Oe,je){for(var nt=D(6/(4+c)),ut=(1+c/4)*f(je),Tt=je/2,_t=0,kt;_t<25&&(Tt-=kt=(Tt/2+f(Tt)-ut)/(.5+i(Tt)),!(T(kt)<l));_t++);return[nt*(.5+i(Tt))*Oe/1.5,nt*Tt]}el.invert=function(Oe,je){var nt=D(6/(4+c)),ut=je/nt;return T(T(ut)-M)<l&&(ut=ut<0?-M:M),[1.5*Oe/(nt*(.5+i(ut))),F((ut/2+f(ut))/(1+c/4))]};function Zl(){return u.geoProjection(el).scale(166.518)}function pl(Oe,je){var nt=je*je,ut=nt*nt,Tt=nt*ut;return[Oe*(.84719-.13063*nt+Tt*Tt*(-.04515+.05494*nt-.02326*ut+.00331*Tt)),je*(1.01183+ut*ut*(-.02625+.01926*nt-.00396*ut))]}pl.invert=function(Oe,je){var nt=je,ut=25,Tt,_t,kt,vr;do _t=nt*nt,kt=_t*_t,nt-=Tt=(nt*(1.01183+kt*kt*(-.02625+.01926*_t-.00396*kt))-je)/(1.01183+kt*kt*(9*-.02625+11*.01926*_t+13*-.00396*kt));while(T(Tt)>x&&--ut>0);return _t=nt*nt,kt=_t*_t,vr=_t*kt,[Oe/(.84719-.13063*_t+vr*vr*(-.04515+.05494*_t-.02326*kt+.00331*vr)),nt]};function Ts(){return u.geoProjection(pl).scale(175.295)}function Ll(Oe,je){return[Oe*(1+i(je))/2,2*(je-y(je/2))]}Ll.invert=function(Oe,je){for(var nt=je/2,ut=0,Tt=1/0;ut<10&&T(Tt)>l;++ut){var _t=i(je/2);je-=Tt=(je-y(je/2)-nt)/(1-.5/(_t*_t))}return[2*Oe/(1+i(je)),je]};function fu(){return u.geoProjection(Ll).scale(152.63)}var ku=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Cu(){return fa(se(1/0),ku).rotate([20,0]).scale(152.63)}function Kl(Oe,je){var nt=f(je),ut=i(je),Tt=d(Oe);if(Oe===0||T(je)===M)return[0,je];if(je===0)return[Oe,0];if(T(Oe)===M)return[Oe*ut,M*nt];var _t=c/(2*Oe)-2*Oe/c,kt=2*je/c,vr=(1-kt*kt)/(nt-kt),mr=_t*_t,fr=vr*vr,Tr=1+mr/fr,zr=1+fr/mr,Qr=(_t*nt/vr-_t/2)/Tr,on=(fr*nt/mr+vr/2)/zr,En=Qr*Qr+ut*ut/Tr,Nn=on*on-(fr*nt*nt/mr+vr*nt-1)/zr;return[M*(Qr+D(En)*Tt),M*(on+D(Nn<0?0:Nn)*d(-je*_t)*Tt)]}Kl.invert=function(Oe,je){Oe/=M,je/=M;var nt=Oe*Oe,ut=je*je,Tt=nt+ut,_t=c*c;return[Oe?(Tt-1+D((1-Tt)*(1-Tt)+4*nt))/(2*Oe)*M:0,_e(function(kt){return Tt*(c*f(kt)-2*kt)*c+4*kt*kt*(je-f(kt))+2*c*kt-_t*je},0)]};function tl(){return u.geoProjection(Kl).scale(127.267)}var Lu=1.0148,fs=.23185,Wo=-.14499,rl=.02406,hu=Lu,As=5*fs,Fo=7*Wo,Pl=9*rl,Ms=1.790857183;function Fs(Oe,je){var nt=je*je;return[Oe,je*(Lu+nt*nt*(fs+nt*(Wo+rl*nt)))]}Fs.invert=function(Oe,je){je>Ms?je=Ms:je<-Ms&&(je=-Ms);var nt=je,ut;do{var Tt=nt*nt;nt-=ut=(nt*(Lu+Tt*Tt*(fs+Tt*(Wo+rl*Tt)))-je)/(hu+Tt*Tt*(As+Tt*(Fo+Pl*Tt)))}while(T(ut)>l);return[Oe,nt]};function mo(){return u.geoProjection(Fs).scale(139.319)}function Dl(Oe,je){if(T(je)<l)return[Oe,0];var nt=y(je),ut=Oe*f(je);return[f(ut)/nt,je+(1-i(ut))/nt]}Dl.invert=function(Oe,je){if(T(je)<l)return[Oe,0];var nt=Oe*Oe+je*je,ut=je*.5,Tt=10,_t;do{var kt=y(ut),vr=1/i(ut),mr=nt-2*je*ut+ut*ut;ut-=_t=(kt*mr+2*(ut-je))/(2+mr*vr*vr+2*(ut-je)*kt)}while(T(_t)>l&&--Tt>0);return kt=y(ut),[(T(je)<T(ut+1/kt)?F(Oe*kt):d(je)*d(Oe)*(I(T(Oe*kt))+M))/f(ut),ut]};function Rl(){return u.geoProjection(Dl).scale(103.74)}function nl(Oe,je){var nt=ml(Oe[1],Oe[0]),ut=ml(je[1],je[0]),Tt=Il(nt,ut),_t=$l(nt)/$l(ut);return dl([1,0,Oe[0][0],0,1,Oe[0][1]],dl([_t,0,0,0,_t,0],dl([i(Tt),f(Tt),0,-f(Tt),i(Tt),0],[1,0,-je[0][0],0,1,-je[0][1]])))}function hs(Oe){var je=1/(Oe[0]*Oe[4]-Oe[1]*Oe[3]);return[je*Oe[4],-je*Oe[1],je*(Oe[1]*Oe[5]-Oe[2]*Oe[4]),-je*Oe[3],je*Oe[0],je*(Oe[2]*Oe[3]-Oe[0]*Oe[5])]}function dl(Oe,je){return[Oe[0]*je[0]+Oe[1]*je[3],Oe[0]*je[1]+Oe[1]*je[4],Oe[0]*je[2]+Oe[1]*je[5]+Oe[2],Oe[3]*je[0]+Oe[4]*je[3],Oe[3]*je[1]+Oe[4]*je[4],Oe[3]*je[2]+Oe[4]*je[5]+Oe[5]]}function ml(Oe,je){return[Oe[0]-je[0],Oe[1]-je[1]]}function $l(Oe){return D(Oe[0]*Oe[0]+Oe[1]*Oe[1])}function Il(Oe,je){return a(Oe[0]*je[1]-Oe[1]*je[0],Oe[0]*je[0]+Oe[1]*je[1])}function al(Oe,je,nt){ut(Oe,{transform:null});function ut(fr,Tr){if(fr.edges=vu(fr.face),Tr.face){var zr=fr.shared=Ws(fr.face,Tr.face),Qr=nl(zr.map(Tr.project),zr.map(fr.project));fr.transform=Tr.transform?dl(Tr.transform,Qr):Qr;for(var on=Tr.edges,En=0,Nn=on.length;En<Nn;++En)vs(zr[0],on[En][1])&&vs(zr[1],on[En][0])&&(on[En]=fr),vs(zr[0],on[En][0])&&vs(zr[1],on[En][1])&&(on[En]=fr);for(on=fr.edges,En=0,Nn=on.length;En<Nn;++En)vs(zr[0],on[En][0])&&vs(zr[1],on[En][1])&&(on[En]=Tr),vs(zr[0],on[En][1])&&vs(zr[1],on[En][0])&&(on[En]=Tr)}else fr.transform=Tr.transform;return fr.children&&fr.children.forEach(function($n){ut($n,fr)}),fr}function Tt(fr,Tr){var zr=je(fr,Tr),Qr=zr.project([fr*E,Tr*E]),on;return(on=zr.transform)?[on[0]*Qr[0]+on[1]*Qr[1]+on[2],-(on[3]*Qr[0]+on[4]*Qr[1]+on[5])]:(Qr[1]=-Qr[1],Qr)}yl(Oe)&&(Tt.invert=function(fr,Tr){var zr=_t(Oe,[fr,-Tr]);return zr&&(zr[0]*=S,zr[1]*=S,zr)});function _t(fr,Tr){var zr=fr.project.invert,Qr=fr.transform,on=Tr;if(Qr&&(Qr=hs(Qr),on=[Qr[0]*on[0]+Qr[1]*on[1]+Qr[2],Qr[3]*on[0]+Qr[4]*on[1]+Qr[5]]),zr&&fr===kt(En=zr(on)))return En;for(var En,Nn=fr.children,$n=0,Ta=Nn&&Nn.length;$n<Ta;++$n)if(En=_t(Nn[$n],Tr))return En}function kt(fr){return je(fr[0]*S,fr[1]*S)}var vr=u.geoProjection(Tt),mr=vr.stream;return vr.stream=function(fr){var Tr=vr.rotate(),zr=mr(fr),Qr=(vr.rotate([0,0]),mr(fr));return vr.rotate(Tr),zr.sphere=function(){Qr.polygonStart(),Qr.lineStart(),Ku(Qr,Oe),Qr.lineEnd(),Qr.polygonEnd()},zr},vr.angle(nt==null?-30:nt*E)}function Ku(Oe,je,nt){var ut,Tt=je.edges,_t=Tt.length,kt,vr={type:"MultiPoint",coordinates:je.face},mr=je.face.filter(function(Nn){return T(Nn[1])!==90}),fr=u.geoBounds({type:"MultiPoint",coordinates:mr}),Tr=!1,zr=-1,Qr=fr[1][0]-fr[0][0],on=Qr===180||Qr===360?[(fr[0][0]+fr[1][0])/2,(fr[0][1]+fr[1][1])/2]:u.geoCentroid(vr);if(nt)for(;++zr<_t&&Tt[zr]!==nt;);++zr;for(var En=0;En<_t;++En)kt=Tt[(En+zr)%_t],Array.isArray(kt)?(Tr||(Oe.point((ut=u.geoInterpolate(kt[0],on)(l))[0],ut[1]),Tr=!0),Oe.point((ut=u.geoInterpolate(kt[1],on)(l))[0],ut[1])):(Tr=!1,kt!==nt&&Ku(Oe,kt,je))}function vs(Oe,je){return Oe&&je&&Oe[0]===je[0]&&Oe[1]===je[1]}function Ws(Oe,je){for(var nt,ut,Tt=Oe.length,_t=null,kt=0;kt<Tt;++kt){nt=Oe[kt];for(var vr=je.length;--vr>=0;)if(ut=je[vr],nt[0]===ut[0]&&nt[1]===ut[1]){if(_t)return[_t,nt];_t=nt}}}function vu(Oe){for(var je=Oe.length,nt=[],ut=Oe[je-1],Tt=0;Tt<je;++Tt)nt.push([ut,ut=Oe[Tt]]);return nt}function yl(Oe){return Oe.project.invert||Oe.children&&Oe.children.some(yl)}var Fl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],il=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Oe){return Oe.map(function(je){return Fl[je]})});function zl(Oe){Oe=Oe||function(nt){var ut=u.geoCentroid({type:"MultiPoint",coordinates:nt});return u.geoGnomonic().scale(1).translate([0,0]).rotate([-ut[0],-ut[1]])};var je=il.map(function(nt){return{face:nt,project:Oe(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,ut){var Tt=je[nt];Tt&&(Tt.children||(Tt.children=[])).push(je[ut])}),al(je[0],function(nt,ut){return je[nt<-c/2?ut<0?6:4:nt<0?ut<0?2:0:nt<c/2?ut<0?3:1:ut<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var pu=2/D(3);function Pu(Oe,je){var nt=Ge(Oe,je);return[nt[0]*pu,nt[1]]}Pu.invert=function(Oe,je){return Ge.invert(Oe/pu,je)};function dc(Oe){Oe=Oe||function(nt){var ut=u.geoCentroid({type:"MultiPoint",coordinates:nt});return u.geoProjection(Pu).translate([0,0]).scale(1).rotate(ut[1]>0?[-ut[0],0]:[180-ut[0],180])};var je=il.map(function(nt){return{face:nt,project:Oe(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,ut){var Tt=je[nt];Tt&&(Tt.children||(Tt.children=[])).push(je[ut])}),al(je[0],function(nt,ut){return je[nt<-c/2?ut<0?6:4:nt<0?ut<0?2:0:nt<c/2?ut<0?3:1:ut<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Bi(Oe){Oe=Oe||function(kt){var vr=kt.length===6?u.geoCentroid({type:"MultiPoint",coordinates:kt}):kt[0];return u.geoGnomonic().scale(1).translate([0,0]).rotate([-vr[0],-vr[1]])};var je=il.map(function(kt){for(var vr=kt.map(ps),mr=vr.length,fr=vr[mr-1],Tr,zr=[],Qr=0;Qr<mr;++Qr)Tr=vr[Qr],zr.push(rs([fr[0]*.9486832980505138+Tr[0]*.31622776601683794,fr[1]*.9486832980505138+Tr[1]*.31622776601683794,fr[2]*.9486832980505138+Tr[2]*.31622776601683794]),rs([Tr[0]*.9486832980505138+fr[0]*.31622776601683794,Tr[1]*.9486832980505138+fr[1]*.31622776601683794,Tr[2]*.9486832980505138+fr[2]*.31622776601683794])),fr=Tr;return zr}),nt=[],ut=[-1,0,0,1,0,1,4,5];je.forEach(function(kt,vr){for(var mr=il[vr],fr=mr.length,Tr=nt[vr]=[],zr=0;zr<fr;++zr)je.push([mr[zr],kt[(zr*2+2)%(2*fr)],kt[(zr*2+1)%(2*fr)]]),ut.push(vr),Tr.push(ol(ps(kt[(zr*2+2)%(2*fr)]),ps(kt[(zr*2+1)%(2*fr)])))});var Tt=je.map(function(kt){return{project:Oe(kt),face:kt}});ut.forEach(function(kt,vr){var mr=Tt[kt];mr&&(mr.children||(mr.children=[])).push(Tt[vr])});function _t(kt,vr){var mr=i(vr),fr=[mr*i(kt),mr*f(kt),f(vr)],Tr=kt<-c/2?vr<0?6:4:kt<0?vr<0?2:0:kt<c/2?vr<0?3:1:vr<0?7:5,zr=nt[Tr];return Tt[xl(zr[0],fr)<0?8+3*Tr:xl(zr[1],fr)<0?8+3*Tr+1:xl(zr[2],fr)<0?8+3*Tr+2:Tr]}return al(Tt[0],_t).angle(-30).scale(110.625).center([0,45])}function xl(Oe,je){for(var nt=0,ut=Oe.length,Tt=0;nt<ut;++nt)Tt+=Oe[nt]*je[nt];return Tt}function ol(Oe,je){return[Oe[1]*je[2]-Oe[2]*je[1],Oe[2]*je[0]-Oe[0]*je[2],Oe[0]*je[1]-Oe[1]*je[0]]}function rs(Oe){return[a(Oe[1],Oe[0])*E,F(s(-1,o(1,Oe[2])))*E]}function ps(Oe){var je=Oe[0]*S,nt=Oe[1]*S,ut=i(nt);return[ut*i(je),ut*f(je),f(nt)]}function Ol(){}function co(Oe){if((nt=Oe.length)<4)return!1;for(var je=0,nt,ut=Oe[nt-1][1]*Oe[0][0]-Oe[nt-1][0]*Oe[0][1];++je<nt;)ut+=Oe[je-1][1]*Oe[je][0]-Oe[je-1][0]*Oe[je][1];return ut<=0}function Du(Oe,je){for(var nt=je[0],ut=je[1],Tt=!1,_t=0,kt=Oe.length,vr=kt-1;_t<kt;vr=_t++){var mr=Oe[_t],fr=mr[0],Tr=mr[1],zr=Oe[vr],Qr=zr[0],on=zr[1];Tr>ut^on>ut&&nt<(Qr-fr)*(ut-Tr)/(on-Tr)+fr&&(Tt=!Tt)}return Tt}function Xo(Oe,je){var nt=je.stream,ut;if(!nt)throw new Error("invalid projection");switch(Oe&&Oe.type){case"Feature":ut=zs;break;case"FeatureCollection":ut=Xs;break;default:ut=Ho;break}return ut(Oe,nt)}function Xs(Oe,je){return{type:"FeatureCollection",features:Oe.features.map(function(nt){return zs(nt,je)})}}function zs(Oe,je){return{type:"Feature",id:Oe.id,properties:Oe.properties,geometry:Ho(Oe.geometry,je)}}function Es(Oe,je){return{type:"GeometryCollection",geometries:Oe.geometries.map(function(nt){return Ho(nt,je)})}}function Ho(Oe,je){if(!Oe)return null;if(Oe.type==="GeometryCollection")return Es(Oe,je);var nt;switch(Oe.type){case"Point":nt=ds;break;case"MultiPoint":nt=ds;break;case"LineString":nt=Ru;break;case"MultiLineString":nt=Ru;break;case"Polygon":nt=Jl;break;case"MultiPolygon":nt=Jl;break;case"Sphere":nt=Jl;break;default:return null}return u.geoStream(Oe,je(nt)),nt.result()}var Ki=[],Bo=[],ds={point:function(Oe,je){Ki.push([Oe,je])},result:function(){var Oe=Ki.length?Ki.length<2?{type:"Point",coordinates:Ki[0]}:{type:"MultiPoint",coordinates:Ki}:null;return Ki=[],Oe}},Ru={lineStart:Ol,point:function(Oe,je){Ki.push([Oe,je])},lineEnd:function(){Ki.length&&(Bo.push(Ki),Ki=[])},result:function(){var Oe=Bo.length?Bo.length<2?{type:"LineString",coordinates:Bo[0]}:{type:"MultiLineString",coordinates:Bo}:null;return Bo=[],Oe}},Jl={polygonStart:Ol,lineStart:Ol,point:function(Oe,je){Ki.push([Oe,je])},lineEnd:function(){var Oe=Ki.length;if(Oe){do Ki.push(Ki[0].slice());while(++Oe<4);Bo.push(Ki),Ki=[]}},polygonEnd:Ol,result:function(){if(!Bo.length)return null;var Oe=[],je=[];return Bo.forEach(function(nt){co(nt)?Oe.push([nt]):je.push(nt)}),je.forEach(function(nt){var ut=nt[0];Oe.some(function(Tt){if(Du(Tt[0],ut))return Tt.push(nt),!0})||Oe.push([nt])}),Bo=[],Oe.length?Oe.length>1?{type:"MultiPolygon",coordinates:Oe}:{type:"Polygon",coordinates:Oe[0]}:null}};function Iu(Oe){var je=Oe(M,0)[0]-Oe(-M,0)[0];function nt(ut,Tt){var _t=T(ut)<M,kt=Oe(_t?ut:ut>0?ut-c:ut+c,Tt),vr=(kt[0]-kt[1])*p,mr=(kt[0]+kt[1])*p;if(_t)return[vr,mr];var fr=je*p,Tr=vr>0^mr>0?-1:1;return[Tr*vr-d(mr)*fr,Tr*mr-d(vr)*fr]}return Oe.invert&&(nt.invert=function(ut,Tt){var _t=(ut+Tt)*p,kt=(Tt-ut)*p,vr=T(_t)<.5*je&&T(kt)<.5*je;if(!vr){var mr=je*p,fr=_t>0^kt>0?-1:1,Tr=-fr*ut+(kt>0?1:-1)*mr,zr=-fr*Tt+(_t>0?1:-1)*mr;_t=(-Tr-zr)*p,kt=(Tr-zr)*p}var Qr=Oe.invert(_t,kt);return vr||(Qr[0]+=_t>0?c:-c),Qr}),u.geoProjection(nt).rotate([-90,-90,45]).clipAngle(180-.001)}function bt(){return Iu(Mr).scale(176.423)}function Bt(){return Iu(ma).scale(111.48)}function dr(Oe,je){if(!(0<=(je=+je)&&je<=20))throw new Error("invalid digits");function nt(fr){var Tr=fr.length,zr=2,Qr=new Array(Tr);for(Qr[0]=+fr[0].toFixed(je),Qr[1]=+fr[1].toFixed(je);zr<Tr;)Qr[zr]=fr[zr],++zr;return Qr}function ut(fr){return fr.map(nt)}function Tt(fr){for(var Tr=nt(fr[0]),zr=[Tr],Qr=1;Qr<fr.length;Qr++){var on=nt(fr[Qr]);(on.length>2||on[0]!=Tr[0]||on[1]!=Tr[1])&&(zr.push(on),Tr=on)}return zr.length===1&&fr.length>1&&zr.push(nt(fr[fr.length-1])),zr}function _t(fr){return fr.map(Tt)}function kt(fr){if(fr==null)return fr;var Tr;switch(fr.type){case"GeometryCollection":Tr={type:"GeometryCollection",geometries:fr.geometries.map(kt)};break;case"Point":Tr={type:"Point",coordinates:nt(fr.coordinates)};break;case"MultiPoint":Tr={type:fr.type,coordinates:ut(fr.coordinates)};break;case"LineString":Tr={type:fr.type,coordinates:Tt(fr.coordinates)};break;case"MultiLineString":case"Polygon":Tr={type:fr.type,coordinates:_t(fr.coordinates)};break;case"MultiPolygon":Tr={type:"MultiPolygon",coordinates:fr.coordinates.map(_t)};break;default:return fr}return fr.bbox!=null&&(Tr.bbox=fr.bbox),Tr}function vr(fr){var Tr={type:"Feature",properties:fr.properties,geometry:kt(fr.geometry)};return fr.id!=null&&(Tr.id=fr.id),fr.bbox!=null&&(Tr.bbox=fr.bbox),Tr}if(Oe!=null)switch(Oe.type){case"Feature":return vr(Oe);case"FeatureCollection":{var mr={type:"FeatureCollection",features:Oe.features.map(vr)};return Oe.bbox!=null&&(mr.bbox=Oe.bbox),mr}default:return kt(Oe)}return Oe}function cr(Oe){var je=f(Oe);function nt(ut,Tt){var _t=je?y(ut*je/2)/je:ut/2;if(!Tt)return[2*_t,-Oe];var kt=2*e(_t*f(Tt)),vr=1/y(Tt);return[f(kt)*vr,Tt+(1-i(kt))*vr-Oe]}return nt.invert=function(ut,Tt){if(T(Tt+=Oe)<l)return[je?2*e(je*ut/2)/je:ut,0];var _t=ut*ut+Tt*Tt,kt=0,vr=10,mr;do{var fr=y(kt),Tr=1/i(kt),zr=_t-2*Tt*kt+kt*kt;kt-=mr=(fr*zr+2*(kt-Tt))/(2+zr*Tr*Tr+2*(kt-Tt)*fr)}while(T(mr)>l&&--vr>0);var Qr=ut*(fr=y(kt)),on=y(T(Tt)<T(kt+1/fr)?F(Qr)*.5:I(Qr)*.5+c/4)/f(kt);return[je?2*e(je*on)/je:2*on,kt]},nt}function Or(){return We(cr).scale(131.215)}var ln=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];ln.forEach(function(Oe){Oe[1]*=1.0144});function _n(Oe,je){var nt=o(18,T(je)*36/c),ut=r(nt),Tt=nt-ut,_t=(zr=ln[ut])[0],kt=zr[1],vr=(zr=ln[++ut])[0],mr=zr[1],fr=(zr=ln[o(19,++ut)])[0],Tr=zr[1],zr;return[Oe*(vr+Tt*(fr-_t)/2+Tt*Tt*(fr-2*vr+_t)/2),(je>0?M:-M)*(mr+Tt*(Tr-kt)/2+Tt*Tt*(Tr-2*mr+kt)/2)]}_n.invert=function(Oe,je){var nt=je/M,ut=nt*90,Tt=o(18,T(ut/5)),_t=s(0,r(Tt));do{var kt=ln[_t][1],vr=ln[_t+1][1],mr=ln[o(19,_t+2)][1],fr=mr-kt,Tr=mr-2*vr+kt,zr=2*(T(nt)-vr)/fr,Qr=Tr/fr,on=zr*(1-Qr*zr*(1-2*Qr*zr));if(on>=0||_t===1){ut=(je>=0?5:-5)*(on+Tt);var En=50,Nn;do Tt=o(18,T(ut)/5),_t=r(Tt),on=Tt-_t,kt=ln[_t][1],vr=ln[_t+1][1],mr=ln[o(19,_t+2)][1],ut-=(Nn=(je>=0?M:-M)*(vr+on*(mr-kt)/2+on*on*(mr-2*vr+kt)/2)-je)*E;while(T(Nn)>x&&--En>0);break}}while(--_t>=0);var $n=ln[_t][0],Ta=ln[_t+1][0],Ea=ln[o(19,_t+2)][0];return[Oe/(Ta+on*(Ea-$n)/2+on*on*(Ea-2*Ta+$n)/2),ut*S]};function Pn(){return u.geoProjection(_n).scale(152.63)}function zn(Oe){function je(nt,ut){var Tt=i(ut),_t=(Oe-1)/(Oe-Tt*i(nt));return[_t*Tt*f(nt),_t*f(ut)]}return je.invert=function(nt,ut){var Tt=nt*nt+ut*ut,_t=D(Tt),kt=(Oe-D(1-Tt*(Oe+1)/(Oe-1)))/((Oe-1)/_t+_t/(Oe-1));return[a(nt*kt,_t*D(1-kt*kt)),_t?F(ut*kt/_t):0]},je}function Xn(Oe,je){var nt=zn(Oe);if(!je)return nt;var ut=i(je),Tt=f(je);function _t(kt,vr){var mr=nt(kt,vr),fr=mr[1],Tr=fr*Tt/(Oe-1)+ut;return[mr[0]*ut/Tr,fr/Tr]}return _t.invert=function(kt,vr){var mr=(Oe-1)/(Oe-1-vr*Tt);return nt.invert(mr*kt,mr*vr*ut)},_t}function wn(){var Oe=2,je=0,nt=u.geoProjectionMutator(Xn),ut=nt(Oe,je);return ut.distance=function(Tt){return arguments.length?nt(Oe=+Tt,je):Oe},ut.tilt=function(Tt){return arguments.length?nt(Oe,je=Tt*S):je*E},ut.scale(432.147).clipAngle(I(1/Oe)*E-1e-6)}var Un=1e-4,On=1e4,jn=-180,ia=jn+Un,Ga=180,za=Ga-Un,Ya=-90,ja=Ya+Un,aa=90,ba=aa-Un;function Qa(Oe){return Oe.length>0}function si(Oe){return Math.floor(Oe*On)/On}function Mi(Oe){return Oe===Ya||Oe===aa?[0,Oe]:[jn,si(Oe)]}function Ei(Oe){var je=Oe[0],nt=Oe[1],ut=!1;return je<=ia?(je=jn,ut=!0):je>=za&&(je=Ga,ut=!0),nt<=ja?(nt=Ya,ut=!0):nt>=ba&&(nt=aa,ut=!0),ut?[je,nt]:Oe}function wi(Oe){return Oe.map(Ei)}function Pi(Oe,je,nt){for(var ut=0,Tt=Oe.length;ut<Tt;++ut){var _t=Oe[ut].slice();nt.push({index:-1,polygon:je,ring:_t});for(var kt=0,vr=_t.length;kt<vr;++kt){var mr=_t[kt],fr=mr[0],Tr=mr[1];if(fr<=ia||fr>=za||Tr<=ja||Tr>=ba){_t[kt]=Ei(mr);for(var zr=kt+1;zr<vr;++zr){var Qr=_t[zr],on=Qr[0],En=Qr[1];if(on>ia&&on<za&&En>ja&&En<ba)break}if(zr===kt+1)continue;if(kt){var Nn={index:-1,polygon:je,ring:_t.slice(0,kt+1)};Nn.ring[Nn.ring.length-1]=Mi(Tr),nt[nt.length-1]=Nn}else nt.pop();if(zr>=vr)break;nt.push({index:-1,polygon:je,ring:_t=_t.slice(zr-1)}),_t[0]=Mi(_t[0][1]),kt=-1,vr=_t.length}}}}function hi(Oe){var je,nt=Oe.length,ut={},Tt={},_t,kt,vr,mr,fr;for(je=0;je<nt;++je){if(_t=Oe[je],kt=_t.ring[0],mr=_t.ring[_t.ring.length-1],kt[0]===mr[0]&&kt[1]===mr[1]){_t.polygon.push(_t.ring),Oe[je]=null;continue}_t.index=je,ut[kt]=Tt[mr]=_t}for(je=0;je<nt;++je)if(_t=Oe[je],_t){if(kt=_t.ring[0],mr=_t.ring[_t.ring.length-1],vr=Tt[kt],fr=ut[mr],delete ut[kt],delete Tt[mr],kt[0]===mr[0]&&kt[1]===mr[1]){_t.polygon.push(_t.ring);continue}vr?(delete Tt[kt],delete ut[vr.ring[0]],vr.ring.pop(),Oe[vr.index]=null,_t={index:-1,polygon:vr.polygon,ring:vr.ring.concat(_t.ring)},vr===fr?_t.polygon.push(_t.ring):(_t.index=nt++,Oe.push(ut[_t.ring[0]]=Tt[_t.ring[_t.ring.length-1]]=_t))):fr?(delete ut[mr],delete Tt[fr.ring[fr.ring.length-1]],_t.ring.pop(),_t={index:nt++,polygon:fr.polygon,ring:_t.ring.concat(fr.ring)},Oe[fr.index]=null,Oe.push(ut[_t.ring[0]]=Tt[_t.ring[_t.ring.length-1]]=_t)):(_t.ring.push(_t.ring[0]),_t.polygon.push(_t.ring))}}function Co(Oe){var je={type:"Feature",geometry:io(Oe.geometry)};return Oe.id!=null&&(je.id=Oe.id),Oe.bbox!=null&&(je.bbox=Oe.bbox),Oe.properties!=null&&(je.properties=Oe.properties),je}function io(Oe){if(Oe==null)return Oe;var je,nt,ut,Tt;switch(Oe.type){case"GeometryCollection":je={type:"GeometryCollection",geometries:Oe.geometries.map(io)};break;case"Point":je={type:"Point",coordinates:Ei(Oe.coordinates)};break;case"MultiPoint":case"LineString":je={type:Oe.type,coordinates:wi(Oe.coordinates)};break;case"MultiLineString":je={type:"MultiLineString",coordinates:Oe.coordinates.map(wi)};break;case"Polygon":{var _t=[];Pi(Oe.coordinates,_t,nt=[]),hi(nt),je={type:"Polygon",coordinates:_t};break}case"MultiPolygon":{nt=[],ut=-1,Tt=Oe.coordinates.length;for(var kt=new Array(Tt);++ut<Tt;)Pi(Oe.coordinates[ut],kt[ut]=[],nt);hi(nt),je={type:"MultiPolygon",coordinates:kt.filter(Qa)};break}default:return Oe}return Oe.bbox!=null&&(je.bbox=Oe.bbox),je}function li(Oe){if(Oe==null)return Oe;switch(Oe.type){case"Feature":return Co(Oe);case"FeatureCollection":{var je={type:"FeatureCollection",features:Oe.features.map(Co)};return Oe.bbox!=null&&(je.bbox=Oe.bbox),je}default:return io(Oe)}}function Aa(Oe,je){var nt=y(je/2),ut=f(w*nt);return[Oe*(.74482-.34588*ut*ut),1.70711*nt]}Aa.invert=function(Oe,je){var nt=je/1.70711,ut=f(w*nt);return[Oe/(.74482-.34588*ut*ut),2*e(nt)]};function ki(){return u.geoProjection(Aa).scale(146.153)}function _o(Oe,je,nt){var ut=u.geoInterpolate(je,nt),Tt=ut(.5),_t=u.geoRotation([-Tt[0],-Tt[1]])(je),kt=ut.distance/2,vr=-F(f(_t[1]*S)/f(kt)),mr=[-Tt[0],-Tt[1],-(_t[0]>0?c-vr:vr)*E],fr=u.geoProjection(Oe(kt)).rotate(mr),Tr=u.geoRotation(mr),zr=fr.center;return delete fr.rotate,fr.center=function(Qr){return arguments.length?zr(Tr(Qr)):Tr.invert(zr())},fr.clipAngle(90)}function Eo(Oe){var je=i(Oe);function nt(ut,Tt){var _t=u.geoGnomonicRaw(ut,Tt);return _t[0]*=je,_t}return nt.invert=function(ut,Tt){return u.geoGnomonicRaw.invert(ut/je,Tt)},nt}function gs(){return Os([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Os(Oe,je){return _o(Eo,Oe,je)}function Lo(Oe){if(!(Oe*=2))return u.geoAzimuthalEquidistantRaw;var je=-Oe/2,nt=-je,ut=Oe*Oe,Tt=y(nt),_t=.5/f(nt);function kt(vr,mr){var fr=I(i(mr)*i(vr-je)),Tr=I(i(mr)*i(vr-nt)),zr=mr<0?-1:1;return fr*=fr,Tr*=Tr,[(fr-Tr)/(2*Oe),zr*D(4*ut*Tr-(ut-fr+Tr)*(ut-fr+Tr))/(2*Oe)]}return kt.invert=function(vr,mr){var fr=mr*mr,Tr=i(D(fr+(Qr=vr+je)*Qr)),zr=i(D(fr+(Qr=vr+nt)*Qr)),Qr,on;return[a(on=Tr-zr,Qr=(Tr+zr)*Tt),(mr<0?-1:1)*I(D(Qr*Qr+on*on)*_t)]},kt}function sl(){return Ns([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ns(Oe,je){return _o(Lo,Oe,je)}function zo(Oe,je){if(T(je)<l)return[Oe,0];var nt=T(je/M),ut=F(nt);if(T(Oe)<l||T(T(je)-M)<l)return[0,d(je)*c*y(ut/2)];var Tt=i(ut),_t=T(c/Oe-Oe/c)/2,kt=_t*_t,vr=Tt/(nt+Tt-1),mr=vr*(2/nt-1),fr=mr*mr,Tr=fr+kt,zr=vr-fr,Qr=kt+vr;return[d(Oe)*c*(_t*zr+D(kt*zr*zr-Tr*(vr*vr-fr)))/Tr,d(je)*c*(mr*Qr-_t*D((kt+1)*Tr-Qr*Qr))/Tr]}zo.invert=function(Oe,je){if(T(je)<l)return[Oe,0];if(T(Oe)<l)return[0,M*f(2*e(je/c))];var nt=(Oe/=c)*Oe,ut=(je/=c)*je,Tt=nt+ut,_t=Tt*Tt,kt=-T(je)*(1+Tt),vr=kt-2*ut+nt,mr=-2*kt+1+2*ut+_t,fr=ut/mr+(2*vr*vr*vr/(mr*mr*mr)-9*kt*vr/(mr*mr))/27,Tr=(kt-vr*vr/(3*mr))/mr,zr=2*D(-Tr/3),Qr=I(3*fr/(Tr*zr))/3;return[c*(Tt-1+D(1+2*(nt-ut)+_t))/(2*Oe),d(je)*c*(-zr*i(Qr+c/3)-vr/(3*mr))]};function Po(){return u.geoProjection(zo).scale(79.4183)}function Ql(Oe,je){if(T(je)<l)return[Oe,0];var nt=T(je/M),ut=F(nt);if(T(Oe)<l||T(T(je)-M)<l)return[0,d(je)*c*y(ut/2)];var Tt=i(ut),_t=T(c/Oe-Oe/c)/2,kt=_t*_t,vr=Tt*(D(1+kt)-_t*Tt)/(1+kt*nt*nt);return[d(Oe)*c*vr,d(je)*c*D(1-vr*(2*_t+vr))]}Ql.invert=function(Oe,je){if(!Oe)return[0,M*f(2*e(je/c))];var nt=T(Oe/c),ut=(1-nt*nt-(je/=c)*je)/(2*nt),Tt=ut*ut,_t=D(Tt+1);return[d(Oe)*c*(_t-ut),d(je)*M*f(2*a(D((1-2*ut*nt)*(ut+_t)-nt),D(_t+ut+nt)))]};function du(){return u.geoProjection(Ql).scale(79.4183)}function ms(Oe,je){if(T(je)<l)return[Oe,0];var nt=je/M,ut=F(nt);if(T(Oe)<l||T(T(je)-M)<l)return[0,c*y(ut/2)];var Tt=(c/Oe-Oe/c)/2,_t=nt/(1+i(ut));return[c*(d(Oe)*D(Tt*Tt+1-_t*_t)-Tt),c*_t]}ms.invert=function(Oe,je){if(!je)return[Oe,0];var nt=je/c,ut=(c*c*(1-nt*nt)-Oe*Oe)/(2*c*Oe);return[Oe?c*(d(Oe)*D(ut*ut+1)-ut):0,M*f(2*e(nt))]};function Fu(){return u.geoProjection(ms).scale(79.4183)}function ql(Oe,je){if(!je)return[Oe,0];var nt=T(je);if(!Oe||nt===M)return[0,je];var ut=nt/M,Tt=ut*ut,_t=(8*ut-Tt*(Tt+2)-5)/(2*Tt*(ut-1)),kt=_t*_t,vr=ut*_t,mr=Tt+kt+2*vr,fr=ut+3*_t,Tr=Oe/M,zr=Tr+1/Tr,Qr=d(T(Oe)-M)*D(zr*zr-4),on=Qr*Qr,En=mr*(Tt+kt*on-1)+(1-Tt)*(Tt*(fr*fr+4*kt)+12*vr*kt+4*kt*kt),Nn=(Qr*(mr+kt-1)+2*D(En))/(4*mr+on);return[d(Oe)*M*Nn,d(je)*M*D(1+Qr*T(Nn)-Nn*Nn)]}ql.invert=function(Oe,je){var nt;if(!Oe||!je)return[Oe,je];je/=c;var ut=d(Oe)*Oe/M,Tt=(ut*ut-1+4*je*je)/T(ut),_t=Tt*Tt,kt=2*je,vr=50;do{var mr=kt*kt,fr=(8*kt-mr*(mr+2)-5)/(2*mr*(kt-1)),Tr=(3*kt-mr*kt-10)/(2*mr*kt),zr=fr*fr,Qr=kt*fr,on=kt+fr,En=on*on,Nn=kt+3*fr,$n=En*(mr+zr*_t-1)+(1-mr)*(mr*(Nn*Nn+4*zr)+zr*(12*Qr+4*zr)),Ta=-2*on*(4*Qr*zr+(1-4*mr+3*mr*mr)*(1+Tr)+zr*(-6+14*mr-_t+(-8+8*mr-2*_t)*Tr)+Qr*(-8+12*mr+(-10+10*mr-_t)*Tr)),Ea=D($n),ni=Tt*(En+zr-1)+2*Ea-ut*(4*En+_t),qa=Tt*(2*fr*Tr+2*on*(1+Tr))+Ta/Ea-8*on*(Tt*(-1+zr+En)+2*Ea)*(1+Tr)/(_t+4*En);kt-=nt=ni/qa}while(nt>l&&--vr>0);return[d(Oe)*(D(Tt*Tt+4)+Tt)*c/4,M*kt]};function Hc(){return u.geoProjection(ql).scale(127.16)}function $u(Oe,je,nt,ut,Tt){function _t(kt,vr){var mr=nt*f(ut*vr),fr=D(1-mr*mr),Tr=D(2/(1+fr*i(kt*=Tt)));return[Oe*fr*Tr*f(kt),je*mr*Tr]}return _t.invert=function(kt,vr){var mr=kt/Oe,fr=vr/je,Tr=D(mr*mr+fr*fr),zr=2*F(Tr/2);return[a(kt*y(zr),Oe*Tr)/Tt,Tr&&F(vr*f(zr)/(je*nt*Tr))/ut]},_t}function gu(Oe,je,nt,ut){var Tt=c/3;Oe=s(Oe,l),je=s(je,l),Oe=o(Oe,M),je=o(je,c-l),nt=s(nt,0),nt=o(nt,100-l),ut=s(ut,l);var _t=nt/100+1,kt=ut/100,vr=I(_t*i(Tt))/Tt,mr=f(Oe)/f(vr*M),fr=je/c,Tr=D(kt*f(Oe/2)/f(je/2)),zr=Tr/D(fr*mr*vr),Qr=1/(Tr*D(fr*mr*vr));return $u(zr,Qr,mr,vr,fr)}function Ju(){var Oe=65*S,je=60*S,nt=20,ut=200,Tt=u.geoProjectionMutator(gu),_t=Tt(Oe,je,nt,ut);return _t.poleline=function(kt){return arguments.length?Tt(Oe=+kt*S,je,nt,ut):Oe*E},_t.parallels=function(kt){return arguments.length?Tt(Oe,je=+kt*S,nt,ut):je*E},_t.inflation=function(kt){return arguments.length?Tt(Oe,je,nt=+kt,ut):nt},_t.ratio=function(kt){return arguments.length?Tt(Oe,je,nt,ut=+kt):ut},_t.scale(163.775)}function Ss(){return Ju().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var bl=4*c+3*D(3),zu=2*D(2*c*D(3)/bl),mu=be(zu*D(3)/c,zu,bl/6);function jo(){return u.geoProjection(mu).scale(176.84)}function Qu(Oe,je){return[Oe*D(1-3*je*je/(c*c)),je]}Qu.invert=function(Oe,je){return[Oe/D(1-3*je*je/(c*c)),je]};function Sc(){return u.geoProjection(Qu).scale(152.63)}function ns(Oe,je){var nt=i(je),ut=i(Oe)*nt,Tt=1-ut,_t=i(Oe=a(f(Oe)*nt,-f(je))),kt=f(Oe);return nt=D(1-ut*ut),[kt*nt-_t*Tt,-_t*nt-kt*Tt]}ns.invert=function(Oe,je){var nt=(Oe*Oe+je*je)/-2,ut=D(-nt*(2+nt)),Tt=je*nt+Oe*ut,_t=Oe*nt-je*ut,kt=D(_t*_t+Tt*Tt);return[a(ut*Tt,kt*(1+nt)),kt?-F(ut*_t/kt):0]};function Ou(){return u.geoProjection(ns).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Nu(Oe,je){var nt=X(Oe,je);return[(nt[0]+Oe/M)/2,(nt[1]+je)/2]}Nu.invert=function(Oe,je){var nt=Oe,ut=je,Tt=25;do{var _t=i(ut),kt=f(ut),vr=f(2*ut),mr=kt*kt,fr=_t*_t,Tr=f(nt),zr=i(nt/2),Qr=f(nt/2),on=Qr*Qr,En=1-fr*zr*zr,Nn=En?I(_t*zr)*D($n=1/En):$n=0,$n,Ta=.5*(2*Nn*_t*Qr+nt/M)-Oe,Ea=.5*(Nn*kt+ut)-je,ni=.5*$n*(fr*on+Nn*_t*zr*mr)+.5/M,qa=$n*(Tr*vr/4-Nn*kt*Qr),ai=.125*$n*(vr*Qr-Nn*kt*fr*Tr),Ti=.5*$n*(mr*zr+Nn*on*_t)+.5,Yr=qa*ai-Ti*ni,et=(Ea*qa-Ta*Ti)/Yr,$t=(Ta*ai-Ea*ni)/Yr;nt-=et,ut-=$t}while((T(et)>l||T($t)>l)&&--Tt>0);return[nt,ut]};function qu(){return u.geoProjection(Nu).scale(158.837)}m.geoNaturalEarth=u.geoNaturalEarth1,m.geoNaturalEarthRaw=u.geoNaturalEarth1Raw,m.geoAiry=j,m.geoAiryRaw=ee,m.geoAitoff=ie,m.geoAitoffRaw=X,m.geoArmadillo=K,m.geoArmadilloRaw=he,m.geoAugust=U,m.geoAugustRaw=$,m.geoBaker=Z,m.geoBakerRaw=re,m.geoBerghaus=oe,m.geoBerghausRaw=Q,m.geoBertin1953=xe,m.geoBertin1953Raw=me,m.geoBoggs=Ze,m.geoBoggsRaw=Le,m.geoBonne=dt,m.geoBonneRaw=Ve,m.geoBottomley=Qt,m.geoBottomleyRaw=Ft,m.geoBromley=Ct,m.geoBromleyRaw=Ot,m.geoChamberlin=Ee,m.geoChamberlinRaw=Xe,m.geoChamberlinAfrica=Ye,m.geoCollignon=Ke,m.geoCollignonRaw=Ge,m.geoCraig=At,m.geoCraigRaw=qe,m.geoCraster=Gt,m.geoCrasterRaw=Mt,m.geoCylindricalEqualArea=Ht,m.geoCylindricalEqualAreaRaw=zt,m.geoCylindricalStereographic=Wt,m.geoCylindricalStereographicRaw=Zt,m.geoEckert1=Gr,m.geoEckert1Raw=sr,m.geoEckert2=qr,m.geoEckert2Raw=cn,m.geoEckert3=rr,m.geoEckert3Raw=st,m.geoEckert4=hr,m.geoEckert4Raw=Jt,m.geoEckert5=tt,m.geoEckert5Raw=Sr,m.geoEckert6=lt,m.geoEckert6Raw=Qe,m.geoEisenlohr=Vt,m.geoEisenlohrRaw=Et,m.geoFahey=ot,m.geoFaheyRaw=Se,m.geoFoucaut=pt,m.geoFoucautRaw=ct,m.geoFoucautSinusoidal=xt,m.geoFoucautSinusoidalRaw=St,m.geoGilbert=or,m.geoGingery=$r,m.geoGingeryRaw=Pr,m.geoGinzburg4=Fr,m.geoGinzburg4Raw=br,m.geoGinzburg5=Lr,m.geoGinzburg5Raw=Hr,m.geoGinzburg6=Rt,m.geoGinzburg6Raw=at,m.geoGinzburg8=ur,m.geoGinzburg8Raw=Kt,m.geoGinzburg9=Vr,m.geoGinzburg9Raw=Nr,m.geoGringorten=mn,m.geoGringortenRaw=Mr,m.geoGuyou=Ka,m.geoGuyouRaw=ma,m.geoHammer=le,m.geoHammerRaw=se,m.geoHammerRetroazimuthal=kr,m.geoHammerRetroazimuthalRaw=ri,m.geoHealpix=Xa,m.geoHealpixRaw=ra,m.geoHill=Yt,m.geoHillRaw=mi,m.geoHomolosine=Tn,m.geoHomolosineRaw=Cn,m.geoHufnagel=_r,m.geoHufnagelRaw=gn,m.geoHyperelliptical=Yn,m.geoHyperellipticalRaw=An,m.geoInterrupt=fa,m.geoInterruptedBoggs=ka,m.geoInterruptedHomolosine=Ia,m.geoInterruptedMollweide=ro,m.geoInterruptedMollweideHemispheres=Qs,m.geoInterruptedSinuMollweide=Wl,m.geoInterruptedSinusoidal=Hs,m.geoKavrayskiy7=Zi,m.geoKavrayskiy7Raw=Gs,m.geoLagrange=kl,m.geoLagrangeRaw=Io,m.geoLarrivee=hl,m.geoLarriveeRaw=Fi,m.geoLaskowski=zi,m.geoLaskowskiRaw=uo,m.geoLittrow=ao,m.geoLittrowRaw=go,m.geoLoximuthal=qs,m.geoLoximuthalRaw=cs,m.geoMiller=ts,m.geoMillerRaw=lu,m.geoModifiedStereographic=Is,m.geoModifiedStereographicRaw=Mu,m.geoModifiedStereographicAlaska=Xl,m.geoModifiedStereographicGs48=ju,m.geoModifiedStereographicGs50=Zu,m.geoModifiedStereographicMiller=Ys,m.geoModifiedStereographicLee=Cl,m.geoMollweide=De,m.geoMollweideRaw=ke,m.geoMtFlatPolarParabolic=Eu,m.geoMtFlatPolarParabolicRaw=cu,m.geoMtFlatPolarQuartic=Su,m.geoMtFlatPolarQuarticRaw=jl,m.geoMtFlatPolarSinusoidal=Zl,m.geoMtFlatPolarSinusoidalRaw=el,m.geoNaturalEarth2=Ts,m.geoNaturalEarth2Raw=pl,m.geoNellHammer=fu,m.geoNellHammerRaw=Ll,m.geoInterruptedQuarticAuthalic=Cu,m.geoNicolosi=tl,m.geoNicolosiRaw=Kl,m.geoPatterson=mo,m.geoPattersonRaw=Fs,m.geoPolyconic=Rl,m.geoPolyconicRaw=Dl,m.geoPolyhedral=al,m.geoPolyhedralButterfly=zl,m.geoPolyhedralCollignon=dc,m.geoPolyhedralWaterman=Bi,m.geoProject=Xo,m.geoGringortenQuincuncial=bt,m.geoPeirceQuincuncial=Bt,m.geoPierceQuincuncial=Bt,m.geoQuantize=dr,m.geoQuincuncial=Iu,m.geoRectangularPolyconic=Or,m.geoRectangularPolyconicRaw=cr,m.geoRobinson=Pn,m.geoRobinsonRaw=_n,m.geoSatellite=wn,m.geoSatelliteRaw=Xn,m.geoSinuMollweide=sn,m.geoSinuMollweideRaw=yn,m.geoSinusoidal=Ie,m.geoSinusoidalRaw=ze,m.geoStitch=li,m.geoTimes=ki,m.geoTimesRaw=Aa,m.geoTwoPointAzimuthal=Os,m.geoTwoPointAzimuthalRaw=Eo,m.geoTwoPointAzimuthalUsa=gs,m.geoTwoPointEquidistant=Ns,m.geoTwoPointEquidistantRaw=Lo,m.geoTwoPointEquidistantUsa=sl,m.geoVanDerGrinten=Po,m.geoVanDerGrintenRaw=zo,m.geoVanDerGrinten2=du,m.geoVanDerGrinten2Raw=Ql,m.geoVanDerGrinten3=Fu,m.geoVanDerGrinten3Raw=ms,m.geoVanDerGrinten4=Hc,m.geoVanDerGrinten4Raw=ql,m.geoWagner=Ju,m.geoWagner7=Ss,m.geoWagnerRaw=gu,m.geoWagner4=jo,m.geoWagner4Raw=mu,m.geoWagner6=Sc,m.geoWagner6Raw=Qu,m.geoWiechel=Ou,m.geoWiechelRaw=ns,m.geoWinkel3=qu,m.geoWinkel3Raw=Nu,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V,t("d3-array")):(m=m||self,u(m.d3=m.d3||{},m.d3))})(this,function(m,u){function A(){return new T}function T(){this.reset()}T.prototype={constructor:T,reset:function(){this.s=this.t=0},add:function(bt){a(e,bt,this.t),a(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new T;function a(bt,Bt,dr){var cr=bt.s=Bt+dr,Or=cr-Bt,ln=cr-Or;bt.t=Bt-ln+(dr-Or)}var i=1e-6,n=1e-12,r=Math.PI,v=r/2,s=r/4,o=r*2,b=180/r,g=r/180,d=Math.abs,f=Math.atan,y=Math.atan2,l=Math.cos,x=Math.ceil,c=Math.exp,M=Math.log,w=Math.pow,p=Math.sin,_=Math.sign||function(bt){return bt>0?1:bt<0?-1:0},h=Math.sqrt,L=Math.tan;function E(bt){return bt>1?0:bt<-1?r:Math.acos(bt)}function S(bt){return bt>1?v:bt<-1?-v:Math.asin(bt)}function P(bt){return(bt=p(bt/2))*bt}function F(){}function I(bt,Bt){bt&&R.hasOwnProperty(bt.type)&&R[bt.type](bt,Bt)}var D={Feature:function(bt,Bt){I(bt.geometry,Bt)},FeatureCollection:function(bt,Bt){for(var dr=bt.features,cr=-1,Or=dr.length;++cr<Or;)I(dr[cr].geometry,Bt)}},R={Sphere:function(bt,Bt){Bt.sphere()},Point:function(bt,Bt){bt=bt.coordinates,Bt.point(bt[0],bt[1],bt[2])},MultiPoint:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)bt=dr[cr],Bt.point(bt[0],bt[1],bt[2])},LineString:function(bt,Bt){O(bt.coordinates,Bt,0)},MultiLineString:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)O(dr[cr],Bt,0)},Polygon:function(bt,Bt){z(bt.coordinates,Bt)},MultiPolygon:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)z(dr[cr],Bt)},GeometryCollection:function(bt,Bt){for(var dr=bt.geometries,cr=-1,Or=dr.length;++cr<Or;)I(dr[cr],Bt)}};function O(bt,Bt,dr){var cr=-1,Or=bt.length-dr,ln;for(Bt.lineStart();++cr<Or;)ln=bt[cr],Bt.point(ln[0],ln[1],ln[2]);Bt.lineEnd()}function z(bt,Bt){var dr=-1,cr=bt.length;for(Bt.polygonStart();++dr<cr;)O(bt[dr],Bt,1);Bt.polygonEnd()}function G(bt,Bt){bt&&D.hasOwnProperty(bt.type)?D[bt.type](bt,Bt):I(bt,Bt)}var Y=A(),ee=A(),j,X,ie,he,K,$={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Y.reset(),$.lineStart=U,$.lineEnd=H},polygonEnd:function(){var bt=+Y;ee.add(bt<0?o+bt:bt),this.lineStart=this.lineEnd=this.point=F},sphere:function(){ee.add(o)}};function U(){$.point=q}function H(){re(j,X)}function q(bt,Bt){$.point=re,j=bt,X=Bt,bt*=g,Bt*=g,ie=bt,he=l(Bt=Bt/2+s),K=p(Bt)}function re(bt,Bt){bt*=g,Bt*=g,Bt=Bt/2+s;var dr=bt-ie,cr=dr>=0?1:-1,Or=cr*dr,ln=l(Bt),_n=p(Bt),Pn=K*_n,zn=he*ln+Pn*l(Or),Xn=Pn*cr*p(Or);Y.add(y(Xn,zn)),ie=bt,he=ln,K=_n}function Z(bt){return ee.reset(),G(bt,$),ee*2}function Q(bt){return[y(bt[1],bt[0]),S(bt[2])]}function oe(bt){var Bt=bt[0],dr=bt[1],cr=l(dr);return[cr*l(Bt),cr*p(Bt),p(dr)]}function se(bt,Bt){return bt[0]*Bt[0]+bt[1]*Bt[1]+bt[2]*Bt[2]}function ae(bt,Bt){return[bt[1]*Bt[2]-bt[2]*Bt[1],bt[2]*Bt[0]-bt[0]*Bt[2],bt[0]*Bt[1]-bt[1]*Bt[0]]}function le(bt,Bt){bt[0]+=Bt[0],bt[1]+=Bt[1],bt[2]+=Bt[2]}function _e(bt,Bt){return[bt[0]*Bt,bt[1]*Bt,bt[2]*Bt]}function fe(bt){var Bt=h(bt[0]*bt[0]+bt[1]*bt[1]+bt[2]*bt[2]);bt[0]/=Bt,bt[1]/=Bt,bt[2]/=Bt}var me,xe,ye,be,ke,De,He,Ae,Le=A(),Ze,We,ze={point:Ie,lineStart:dt,lineEnd:Ft,polygonStart:function(){ze.point=Qt,ze.lineStart=Ot,ze.lineEnd=Ct,Le.reset(),$.polygonStart()},polygonEnd:function(){$.polygonEnd(),ze.point=Ie,ze.lineStart=dt,ze.lineEnd=Ft,Y<0?(me=-(ye=180),xe=-(be=90)):Le>i?be=90:Le<-i&&(xe=-90),We[0]=me,We[1]=ye},sphere:function(){me=-(ye=180),xe=-(be=90)}};function Ie(bt,Bt){Ze.push(We=[me=bt,ye=bt]),Bt<xe&&(xe=Bt),Bt>be&&(be=Bt)}function Ve(bt,Bt){var dr=oe([bt*g,Bt*g]);if(Ae){var cr=ae(Ae,dr),Or=[cr[1],-cr[0],0],ln=ae(Or,cr);fe(ln),ln=Q(ln);var _n=bt-ke,Pn=_n>0?1:-1,zn=ln[0]*b*Pn,Xn,wn=d(_n)>180;wn^(Pn*ke<zn&&zn<Pn*bt)?(Xn=ln[1]*b,Xn>be&&(be=Xn)):(zn=(zn+360)%360-180,wn^(Pn*ke<zn&&zn<Pn*bt)?(Xn=-ln[1]*b,Xn<xe&&(xe=Xn)):(Bt<xe&&(xe=Bt),Bt>be&&(be=Bt))),wn?bt<ke?jt(me,bt)>jt(me,ye)&&(ye=bt):jt(bt,ye)>jt(me,ye)&&(me=bt):ye>=me?(bt<me&&(me=bt),bt>ye&&(ye=bt)):bt>ke?jt(me,bt)>jt(me,ye)&&(ye=bt):jt(bt,ye)>jt(me,ye)&&(me=bt)}else Ze.push(We=[me=bt,ye=bt]);Bt<xe&&(xe=Bt),Bt>be&&(be=Bt),Ae=dr,ke=bt}function dt(){ze.point=Ve}function Ft(){We[0]=me,We[1]=ye,ze.point=Ie,Ae=null}function Qt(bt,Bt){if(Ae){var dr=bt-ke;Le.add(d(dr)>180?dr+(dr>0?360:-360):dr)}else De=bt,He=Bt;$.point(bt,Bt),Ve(bt,Bt)}function Ot(){$.lineStart()}function Ct(){Qt(De,He),$.lineEnd(),d(Le)>i&&(me=-(ye=180)),We[0]=me,We[1]=ye,Ae=null}function jt(bt,Bt){return(Bt-=bt)<0?Bt+360:Bt}function Nt(bt,Bt){return bt[0]-Bt[0]}function Lt(bt,Bt){return bt[0]<=bt[1]?bt[0]<=Bt&&Bt<=bt[1]:Bt<bt[0]||bt[1]<Bt}function Xe(bt){var Bt,dr,cr,Or,ln,_n,Pn;if(be=ye=-(me=xe=1/0),Ze=[],G(bt,ze),dr=Ze.length){for(Ze.sort(Nt),Bt=1,cr=Ze[0],ln=[cr];Bt<dr;++Bt)Or=Ze[Bt],Lt(cr,Or[0])||Lt(cr,Or[1])?(jt(cr[0],Or[1])>jt(cr[0],cr[1])&&(cr[1]=Or[1]),jt(Or[0],cr[1])>jt(cr[0],cr[1])&&(cr[0]=Or[0])):ln.push(cr=Or);for(_n=-1/0,dr=ln.length-1,Bt=0,cr=ln[dr];Bt<=dr;cr=Or,++Bt)Or=ln[Bt],(Pn=jt(cr[1],Or[0]))>_n&&(_n=Pn,me=Or[0],ye=cr[1])}return Ze=We=null,me===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[me,xe],[ye,be]]}var it,Ye,Ee,Ge,Ke,qe,At,yt,Mt,Gt,zt,Ht,Zt,Wt,sr,Gr,cn={sphere:F,point:qr,lineStart:rr,lineEnd:Sr,polygonStart:function(){cn.lineStart=tt,cn.lineEnd=Qe},polygonEnd:function(){cn.lineStart=rr,cn.lineEnd=Sr}};function qr(bt,Bt){bt*=g,Bt*=g;var dr=l(Bt);st(dr*l(bt),dr*p(bt),p(Bt))}function st(bt,Bt,dr){++it,Ee+=(bt-Ee)/it,Ge+=(Bt-Ge)/it,Ke+=(dr-Ke)/it}function rr(){cn.point=Jt}function Jt(bt,Bt){bt*=g,Bt*=g;var dr=l(Bt);Wt=dr*l(bt),sr=dr*p(bt),Gr=p(Bt),cn.point=hr,st(Wt,sr,Gr)}function hr(bt,Bt){bt*=g,Bt*=g;var dr=l(Bt),cr=dr*l(bt),Or=dr*p(bt),ln=p(Bt),_n=y(h((_n=sr*ln-Gr*Or)*_n+(_n=Gr*cr-Wt*ln)*_n+(_n=Wt*Or-sr*cr)*_n),Wt*cr+sr*Or+Gr*ln);Ye+=_n,qe+=_n*(Wt+(Wt=cr)),At+=_n*(sr+(sr=Or)),yt+=_n*(Gr+(Gr=ln)),st(Wt,sr,Gr)}function Sr(){cn.point=qr}function tt(){cn.point=lt}function Qe(){ft(Ht,Zt),cn.point=qr}function lt(bt,Bt){Ht=bt,Zt=Bt,bt*=g,Bt*=g,cn.point=ft;var dr=l(Bt);Wt=dr*l(bt),sr=dr*p(bt),Gr=p(Bt),st(Wt,sr,Gr)}function ft(bt,Bt){bt*=g,Bt*=g;var dr=l(Bt),cr=dr*l(bt),Or=dr*p(bt),ln=p(Bt),_n=sr*ln-Gr*Or,Pn=Gr*cr-Wt*ln,zn=Wt*Or-sr*cr,Xn=h(_n*_n+Pn*Pn+zn*zn),wn=S(Xn),Un=Xn&&-wn/Xn;Mt+=Un*_n,Gt+=Un*Pn,zt+=Un*zn,Ye+=wn,qe+=wn*(Wt+(Wt=cr)),At+=wn*(sr+(sr=Or)),yt+=wn*(Gr+(Gr=ln)),st(Wt,sr,Gr)}function Et(bt){it=Ye=Ee=Ge=Ke=qe=At=yt=Mt=Gt=zt=0,G(bt,cn);var Bt=Mt,dr=Gt,cr=zt,Or=Bt*Bt+dr*dr+cr*cr;return Or<n&&(Bt=qe,dr=At,cr=yt,Ye<i&&(Bt=Ee,dr=Ge,cr=Ke),Or=Bt*Bt+dr*dr+cr*cr,Or<n)?[NaN,NaN]:[y(dr,Bt)*b,S(cr/h(Or))*b]}function Vt(bt){return function(){return bt}}function Pe(bt,Bt){function dr(cr,Or){return cr=bt(cr,Or),Bt(cr[0],cr[1])}return bt.invert&&Bt.invert&&(dr.invert=function(cr,Or){return cr=Bt.invert(cr,Or),cr&&bt.invert(cr[0],cr[1])}),dr}function Se(bt,Bt){return[d(bt)>r?bt+Math.round(-bt/o)*o:bt,Bt]}Se.invert=Se;function ot(bt,Bt,dr){return(bt%=o)?Bt||dr?Pe(pt(bt),St(Bt,dr)):pt(bt):Bt||dr?St(Bt,dr):Se}function ct(bt){return function(Bt,dr){return Bt+=bt,[Bt>r?Bt-o:Bt<-r?Bt+o:Bt,dr]}}function pt(bt){var Bt=ct(bt);return Bt.invert=ct(-bt),Bt}function St(bt,Bt){var dr=l(bt),cr=p(bt),Or=l(Bt),ln=p(Bt);function _n(Pn,zn){var Xn=l(zn),wn=l(Pn)*Xn,Un=p(Pn)*Xn,On=p(zn),jn=On*dr+wn*cr;return[y(Un*Or-jn*ln,wn*dr-On*cr),S(jn*Or+Un*ln)]}return _n.invert=function(Pn,zn){var Xn=l(zn),wn=l(Pn)*Xn,Un=p(Pn)*Xn,On=p(zn),jn=On*Or-Un*ln;return[y(Un*Or+On*ln,wn*dr+jn*cr),S(jn*dr-wn*cr)]},_n}function xt(bt){bt=ot(bt[0]*g,bt[1]*g,bt.length>2?bt[2]*g:0);function Bt(dr){return dr=bt(dr[0]*g,dr[1]*g),dr[0]*=b,dr[1]*=b,dr}return Bt.invert=function(dr){return dr=bt.invert(dr[0]*g,dr[1]*g),dr[0]*=b,dr[1]*=b,dr},Bt}function Pt(bt,Bt,dr,cr,Or,ln){if(!!dr){var _n=l(Bt),Pn=p(Bt),zn=cr*dr;Or==null?(Or=Bt+cr*o,ln=Bt-zn/2):(Or=Xt(_n,Or),ln=Xt(_n,ln),(cr>0?Or<ln:Or>ln)&&(Or+=cr*o));for(var Xn,wn=Or;cr>0?wn>ln:wn<ln;wn-=zn)Xn=Q([_n,-Pn*l(wn),-Pn*p(wn)]),bt.point(Xn[0],Xn[1])}}function Xt(bt,Bt){Bt=oe(Bt),Bt[0]-=bt,fe(Bt);var dr=E(-Bt[1]);return((-Bt[2]<0?-dr:dr)+o-i)%o}function or(){var bt=Vt([0,0]),Bt=Vt(90),dr=Vt(6),cr,Or,ln={point:_n};function _n(zn,Xn){cr.push(zn=Or(zn,Xn)),zn[0]*=b,zn[1]*=b}function Pn(){var zn=bt.apply(this,arguments),Xn=Bt.apply(this,arguments)*g,wn=dr.apply(this,arguments)*g;return cr=[],Or=ot(-zn[0]*g,-zn[1]*g,0).invert,Pt(ln,Xn,wn,1),zn={type:"Polygon",coordinates:[cr]},cr=Or=null,zn}return Pn.center=function(zn){return arguments.length?(bt=typeof zn=="function"?zn:Vt([+zn[0],+zn[1]]),Pn):bt},Pn.radius=function(zn){return arguments.length?(Bt=typeof zn=="function"?zn:Vt(+zn),Pn):Bt},Pn.precision=function(zn){return arguments.length?(dr=typeof zn=="function"?zn:Vt(+zn),Pn):dr},Pn}function Pr(){var bt=[],Bt;return{point:function(dr,cr,Or){Bt.push([dr,cr,Or])},lineStart:function(){bt.push(Bt=[])},lineEnd:F,rejoin:function(){bt.length>1&&bt.push(bt.pop().concat(bt.shift()))},result:function(){var dr=bt;return bt=[],Bt=null,dr}}}function Ar(bt,Bt){return d(bt[0]-Bt[0])<i&&d(bt[1]-Bt[1])<i}function Er(bt,Bt,dr,cr){this.x=bt,this.z=Bt,this.o=dr,this.e=cr,this.v=!1,this.n=this.p=null}function $r(bt,Bt,dr,cr,Or){var ln=[],_n=[],Pn,zn;if(bt.forEach(function(ia){if(!((Ga=ia.length-1)<=0)){var Ga,za=ia[0],Ya=ia[Ga],ja;if(Ar(za,Ya)){if(!za[2]&&!Ya[2]){for(Or.lineStart(),Pn=0;Pn<Ga;++Pn)Or.point((za=ia[Pn])[0],za[1]);Or.lineEnd();return}Ya[0]+=2*i}ln.push(ja=new Er(za,ia,null,!0)),_n.push(ja.o=new Er(za,null,ja,!1)),ln.push(ja=new Er(Ya,ia,null,!1)),_n.push(ja.o=new Er(Ya,null,ja,!0))}}),!!ln.length){for(_n.sort(Bt),lr(ln),lr(_n),Pn=0,zn=_n.length;Pn<zn;++Pn)_n[Pn].e=dr=!dr;for(var Xn=ln[0],wn,Un;;){for(var On=Xn,jn=!0;On.v;)if((On=On.n)===Xn)return;wn=On.z,Or.lineStart();do{if(On.v=On.o.v=!0,On.e){if(jn)for(Pn=0,zn=wn.length;Pn<zn;++Pn)Or.point((Un=wn[Pn])[0],Un[1]);else cr(On.x,On.n.x,1,Or);On=On.n}else{if(jn)for(wn=On.p.z,Pn=wn.length-1;Pn>=0;--Pn)Or.point((Un=wn[Pn])[0],Un[1]);else cr(On.x,On.p.x,-1,Or);On=On.p}On=On.o,wn=On.z,jn=!jn}while(!On.v);Or.lineEnd()}}}function lr(bt){if(!!(Bt=bt.length)){for(var Bt,dr=0,cr=bt[0],Or;++dr<Bt;)cr.n=Or=bt[dr],Or.p=cr,cr=Or;cr.n=Or=bt[0],Or.p=cr}}var br=A();function Fr(bt){return d(bt[0])<=r?bt[0]:_(bt[0])*((d(bt[0])+r)%o-r)}function Hr(bt,Bt){var dr=Fr(Bt),cr=Bt[1],Or=p(cr),ln=[p(dr),-l(dr),0],_n=0,Pn=0;br.reset(),Or===1?cr=v+i:Or===-1&&(cr=-v-i);for(var zn=0,Xn=bt.length;zn<Xn;++zn)if(!!(Un=(wn=bt[zn]).length))for(var wn,Un,On=wn[Un-1],jn=Fr(On),ia=On[1]/2+s,Ga=p(ia),za=l(ia),Ya=0;Ya<Un;++Ya,jn=aa,Ga=Qa,za=si,On=ja){var ja=wn[Ya],aa=Fr(ja),ba=ja[1]/2+s,Qa=p(ba),si=l(ba),Mi=aa-jn,Ei=Mi>=0?1:-1,wi=Ei*Mi,Pi=wi>r,hi=Ga*Qa;if(br.add(y(hi*Ei*p(wi),za*si+hi*l(wi))),_n+=Pi?Mi+Ei*o:Mi,Pi^jn>=dr^aa>=dr){var Co=ae(oe(On),oe(ja));fe(Co);var io=ae(ln,Co);fe(io);var li=(Pi^Mi>=0?-1:1)*S(io[2]);(cr>li||cr===li&&(Co[0]||Co[1]))&&(Pn+=Pi^Mi>=0?1:-1)}}return(_n<-i||_n<i&&br<-i)^Pn&1}function Lr(bt,Bt,dr,cr){return function(Or){var ln=Bt(Or),_n=Pr(),Pn=Bt(_n),zn=!1,Xn,wn,Un,On={point:jn,lineStart:Ga,lineEnd:za,polygonStart:function(){On.point=Ya,On.lineStart=ja,On.lineEnd=aa,wn=[],Xn=[]},polygonEnd:function(){On.point=jn,On.lineStart=Ga,On.lineEnd=za,wn=u.merge(wn);var ba=Hr(Xn,cr);wn.length?(zn||(Or.polygonStart(),zn=!0),$r(wn,Rt,ba,dr,Or)):ba&&(zn||(Or.polygonStart(),zn=!0),Or.lineStart(),dr(null,null,1,Or),Or.lineEnd()),zn&&(Or.polygonEnd(),zn=!1),wn=Xn=null},sphere:function(){Or.polygonStart(),Or.lineStart(),dr(null,null,1,Or),Or.lineEnd(),Or.polygonEnd()}};function jn(ba,Qa){bt(ba,Qa)&&Or.point(ba,Qa)}function ia(ba,Qa){ln.point(ba,Qa)}function Ga(){On.point=ia,ln.lineStart()}function za(){On.point=jn,ln.lineEnd()}function Ya(ba,Qa){Un.push([ba,Qa]),Pn.point(ba,Qa)}function ja(){Pn.lineStart(),Un=[]}function aa(){Ya(Un[0][0],Un[0][1]),Pn.lineEnd();var ba=Pn.clean(),Qa=_n.result(),si,Mi=Qa.length,Ei,wi,Pi;if(Un.pop(),Xn.push(Un),Un=null,!!Mi){if(ba&1){if(wi=Qa[0],(Ei=wi.length-1)>0){for(zn||(Or.polygonStart(),zn=!0),Or.lineStart(),si=0;si<Ei;++si)Or.point((Pi=wi[si])[0],Pi[1]);Or.lineEnd()}return}Mi>1&&ba&2&&Qa.push(Qa.pop().concat(Qa.shift())),wn.push(Qa.filter(at))}}return On}}function at(bt){return bt.length>1}function Rt(bt,Bt){return((bt=bt.x)[0]<0?bt[1]-v-i:v-bt[1])-((Bt=Bt.x)[0]<0?Bt[1]-v-i:v-Bt[1])}var Kt=Lr(function(){return!0},ur,Vr,[-r,-v]);function ur(bt){var Bt=NaN,dr=NaN,cr=NaN,Or;return{lineStart:function(){bt.lineStart(),Or=1},point:function(ln,_n){var Pn=ln>0?r:-r,zn=d(ln-Bt);d(zn-r)<i?(bt.point(Bt,dr=(dr+_n)/2>0?v:-v),bt.point(cr,dr),bt.lineEnd(),bt.lineStart(),bt.point(Pn,dr),bt.point(ln,dr),Or=0):cr!==Pn&&zn>=r&&(d(Bt-cr)<i&&(Bt-=cr*i),d(ln-Pn)<i&&(ln-=Pn*i),dr=Nr(Bt,dr,ln,_n),bt.point(cr,dr),bt.lineEnd(),bt.lineStart(),bt.point(Pn,dr),Or=0),bt.point(Bt=ln,dr=_n),cr=Pn},lineEnd:function(){bt.lineEnd(),Bt=dr=NaN},clean:function(){return 2-Or}}}function Nr(bt,Bt,dr,cr){var Or,ln,_n=p(bt-dr);return d(_n)>i?f((p(Bt)*(ln=l(cr))*p(dr)-p(cr)*(Or=l(Bt))*p(bt))/(Or*ln*_n)):(Bt+cr)/2}function Vr(bt,Bt,dr,cr){var Or;if(bt==null)Or=dr*v,cr.point(-r,Or),cr.point(0,Or),cr.point(r,Or),cr.point(r,0),cr.point(r,-Or),cr.point(0,-Or),cr.point(-r,-Or),cr.point(-r,0),cr.point(-r,Or);else if(d(bt[0]-Bt[0])>i){var ln=bt[0]<Bt[0]?r:-r;Or=dr*ln/2,cr.point(-ln,Or),cr.point(0,Or),cr.point(ln,Or)}else cr.point(Bt[0],Bt[1])}function Dr(bt){var Bt=l(bt),dr=6*g,cr=Bt>0,Or=d(Bt)>i;function ln(wn,Un,On,jn){Pt(jn,bt,dr,On,wn,Un)}function _n(wn,Un){return l(wn)*l(Un)>Bt}function Pn(wn){var Un,On,jn,ia,Ga;return{lineStart:function(){ia=jn=!1,Ga=1},point:function(za,Ya){var ja=[za,Ya],aa,ba=_n(za,Ya),Qa=cr?ba?0:Xn(za,Ya):ba?Xn(za+(za<0?r:-r),Ya):0;if(!Un&&(ia=jn=ba)&&wn.lineStart(),ba!==jn&&(aa=zn(Un,ja),(!aa||Ar(Un,aa)||Ar(ja,aa))&&(ja[2]=1)),ba!==jn)Ga=0,ba?(wn.lineStart(),aa=zn(ja,Un),wn.point(aa[0],aa[1])):(aa=zn(Un,ja),wn.point(aa[0],aa[1],2),wn.lineEnd()),Un=aa;else if(Or&&Un&&cr^ba){var si;!(Qa&On)&&(si=zn(ja,Un,!0))&&(Ga=0,cr?(wn.lineStart(),wn.point(si[0][0],si[0][1]),wn.point(si[1][0],si[1][1]),wn.lineEnd()):(wn.point(si[1][0],si[1][1]),wn.lineEnd(),wn.lineStart(),wn.point(si[0][0],si[0][1],3)))}ba&&(!Un||!Ar(Un,ja))&&wn.point(ja[0],ja[1]),Un=ja,jn=ba,On=Qa},lineEnd:function(){jn&&wn.lineEnd(),Un=null},clean:function(){return Ga|(ia&&jn)<<1}}}function zn(wn,Un,On){var jn=oe(wn),ia=oe(Un),Ga=[1,0,0],za=ae(jn,ia),Ya=se(za,za),ja=za[0],aa=Ya-ja*ja;if(!aa)return!On&&wn;var ba=Bt*Ya/aa,Qa=-Bt*ja/aa,si=ae(Ga,za),Mi=_e(Ga,ba),Ei=_e(za,Qa);le(Mi,Ei);var wi=si,Pi=se(Mi,wi),hi=se(wi,wi),Co=Pi*Pi-hi*(se(Mi,Mi)-1);if(!(Co<0)){var io=h(Co),li=_e(wi,(-Pi-io)/hi);if(le(li,Mi),li=Q(li),!On)return li;var Aa=wn[0],ki=Un[0],_o=wn[1],Eo=Un[1],gs;ki<Aa&&(gs=Aa,Aa=ki,ki=gs);var Os=ki-Aa,Lo=d(Os-r)<i,sl=Lo||Os<i;if(!Lo&&Eo<_o&&(gs=_o,_o=Eo,Eo=gs),sl?Lo?_o+Eo>0^li[1]<(d(li[0]-Aa)<i?_o:Eo):_o<=li[1]&&li[1]<=Eo:Os>r^(Aa<=li[0]&&li[0]<=ki)){var Ns=_e(wi,(-Pi+io)/hi);return le(Ns,Mi),[li,Q(Ns)]}}}function Xn(wn,Un){var On=cr?bt:r-bt,jn=0;return wn<-On?jn|=1:wn>On&&(jn|=2),Un<-On?jn|=4:Un>On&&(jn|=8),jn}return Lr(_n,Pn,ln,cr?[0,-bt]:[-r,bt-r])}function Mr(bt,Bt,dr,cr,Or,ln){var _n=bt[0],Pn=bt[1],zn=Bt[0],Xn=Bt[1],wn=0,Un=1,On=zn-_n,jn=Xn-Pn,ia;if(ia=dr-_n,!(!On&&ia>0)){if(ia/=On,On<0){if(ia<wn)return;ia<Un&&(Un=ia)}else if(On>0){if(ia>Un)return;ia>wn&&(wn=ia)}if(ia=Or-_n,!(!On&&ia<0)){if(ia/=On,On<0){if(ia>Un)return;ia>wn&&(wn=ia)}else if(On>0){if(ia<wn)return;ia<Un&&(Un=ia)}if(ia=cr-Pn,!(!jn&&ia>0)){if(ia/=jn,jn<0){if(ia<wn)return;ia<Un&&(Un=ia)}else if(jn>0){if(ia>Un)return;ia>wn&&(wn=ia)}if(ia=ln-Pn,!(!jn&&ia<0)){if(ia/=jn,jn<0){if(ia>Un)return;ia>wn&&(wn=ia)}else if(jn>0){if(ia<wn)return;ia<Un&&(Un=ia)}return wn>0&&(bt[0]=_n+wn*On,bt[1]=Pn+wn*jn),Un<1&&(Bt[0]=_n+Un*On,Bt[1]=Pn+Un*jn),!0}}}}}var jr=1e9,kn=-jr;function mn(bt,Bt,dr,cr){function Or(Xn,wn){return bt<=Xn&&Xn<=dr&&Bt<=wn&&wn<=cr}function ln(Xn,wn,Un,On){var jn=0,ia=0;if(Xn==null||(jn=_n(Xn,Un))!==(ia=_n(wn,Un))||zn(Xn,wn)<0^Un>0)do On.point(jn===0||jn===3?bt:dr,jn>1?cr:Bt);while((jn=(jn+Un+4)%4)!==ia);else On.point(wn[0],wn[1])}function _n(Xn,wn){return d(Xn[0]-bt)<i?wn>0?0:3:d(Xn[0]-dr)<i?wn>0?2:1:d(Xn[1]-Bt)<i?wn>0?1:0:wn>0?3:2}function Pn(Xn,wn){return zn(Xn.x,wn.x)}function zn(Xn,wn){var Un=_n(Xn,1),On=_n(wn,1);return Un!==On?Un-On:Un===0?wn[1]-Xn[1]:Un===1?Xn[0]-wn[0]:Un===2?Xn[1]-wn[1]:wn[0]-Xn[0]}return function(Xn){var wn=Xn,Un=Pr(),On,jn,ia,Ga,za,Ya,ja,aa,ba,Qa,si,Mi={point:Ei,lineStart:Co,lineEnd:io,polygonStart:Pi,polygonEnd:hi};function Ei(Aa,ki){Or(Aa,ki)&&wn.point(Aa,ki)}function wi(){for(var Aa=0,ki=0,_o=jn.length;ki<_o;++ki)for(var Eo=jn[ki],gs=1,Os=Eo.length,Lo=Eo[0],sl,Ns,zo=Lo[0],Po=Lo[1];gs<Os;++gs)sl=zo,Ns=Po,Lo=Eo[gs],zo=Lo[0],Po=Lo[1],Ns<=cr?Po>cr&&(zo-sl)*(cr-Ns)>(Po-Ns)*(bt-sl)&&++Aa:Po<=cr&&(zo-sl)*(cr-Ns)<(Po-Ns)*(bt-sl)&&--Aa;return Aa}function Pi(){wn=Un,On=[],jn=[],si=!0}function hi(){var Aa=wi(),ki=si&&Aa,_o=(On=u.merge(On)).length;(ki||_o)&&(Xn.polygonStart(),ki&&(Xn.lineStart(),ln(null,null,1,Xn),Xn.lineEnd()),_o&&$r(On,Pn,Aa,ln,Xn),Xn.polygonEnd()),wn=Xn,On=jn=ia=null}function Co(){Mi.point=li,jn&&jn.push(ia=[]),Qa=!0,ba=!1,ja=aa=NaN}function io(){On&&(li(Ga,za),Ya&&ba&&Un.rejoin(),On.push(Un.result())),Mi.point=Ei,ba&&wn.lineEnd()}function li(Aa,ki){var _o=Or(Aa,ki);if(jn&&ia.push([Aa,ki]),Qa)Ga=Aa,za=ki,Ya=_o,Qa=!1,_o&&(wn.lineStart(),wn.point(Aa,ki));else if(_o&&ba)wn.point(Aa,ki);else{var Eo=[ja=Math.max(kn,Math.min(jr,ja)),aa=Math.max(kn,Math.min(jr,aa))],gs=[Aa=Math.max(kn,Math.min(jr,Aa)),ki=Math.max(kn,Math.min(jr,ki))];Mr(Eo,gs,bt,Bt,dr,cr)?(ba||(wn.lineStart(),wn.point(Eo[0],Eo[1])),wn.point(gs[0],gs[1]),_o||wn.lineEnd(),si=!1):_o&&(wn.lineStart(),wn.point(Aa,ki),si=!1)}ja=Aa,aa=ki,ba=_o}return Mi}}function Wn(){var bt=0,Bt=0,dr=960,cr=500,Or,ln,_n;return _n={stream:function(Pn){return Or&&ln===Pn?Or:Or=mn(bt,Bt,dr,cr)(ln=Pn)},extent:function(Pn){return arguments.length?(bt=+Pn[0][0],Bt=+Pn[0][1],dr=+Pn[1][0],cr=+Pn[1][1],Or=ln=null,_n):[[bt,Bt],[dr,cr]]}}}var In=A(),Jn,Kn,ma,Ra={sphere:F,point:F,lineStart:_i,lineEnd:F,polygonStart:F,polygonEnd:F};function _i(){Ra.point=ri,Ra.lineEnd=Ka}function Ka(){Ra.point=Ra.lineEnd=F}function ri(bt,Bt){bt*=g,Bt*=g,Jn=bt,Kn=p(Bt),ma=l(Bt),Ra.point=ei}function ei(bt,Bt){bt*=g,Bt*=g;var dr=p(Bt),cr=l(Bt),Or=d(bt-Jn),ln=l(Or),_n=p(Or),Pn=cr*_n,zn=ma*dr-Kn*cr*ln,Xn=Kn*dr+ma*cr*ln;In.add(y(h(Pn*Pn+zn*zn),Xn)),Jn=bt,Kn=dr,ma=cr}function kr(bt){return In.reset(),G(bt,Ra),+In}var bn=[null,null],dn={type:"LineString",coordinates:bn};function Ln(bt,Bt){return bn[0]=bt,bn[1]=Bt,kr(dn)}var ra={Feature:function(bt,Bt){return sa(bt.geometry,Bt)},FeatureCollection:function(bt,Bt){for(var dr=bt.features,cr=-1,Or=dr.length;++cr<Or;)if(sa(dr[cr].geometry,Bt))return!0;return!1}},ya={Sphere:function(){return!0},Point:function(bt,Bt){return Bn(bt.coordinates,Bt)},MultiPoint:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)if(Bn(dr[cr],Bt))return!0;return!1},LineString:function(bt,Bt){return Qn(bt.coordinates,Bt)},MultiLineString:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)if(Qn(dr[cr],Bt))return!0;return!1},Polygon:function(bt,Bt){return Xa(bt.coordinates,Bt)},MultiPolygon:function(bt,Bt){for(var dr=bt.coordinates,cr=-1,Or=dr.length;++cr<Or;)if(Xa(dr[cr],Bt))return!0;return!1},GeometryCollection:function(bt,Bt){for(var dr=bt.geometries,cr=-1,Or=dr.length;++cr<Or;)if(sa(dr[cr],Bt))return!0;return!1}};function sa(bt,Bt){return bt&&ya.hasOwnProperty(bt.type)?ya[bt.type](bt,Bt):!1}function Bn(bt,Bt){return Ln(bt,Bt)===0}function Qn(bt,Bt){for(var dr,cr,Or,ln=0,_n=bt.length;ln<_n;ln++){if(cr=Ln(bt[ln],Bt),cr===0||ln>0&&(Or=Ln(bt[ln],bt[ln-1]),Or>0&&dr<=Or&&cr<=Or&&(dr+cr-Or)*(1-Math.pow((dr-cr)/Or,2))<n*Or))return!0;dr=cr}return!1}function Xa(bt,Bt){return!!Hr(bt.map(mi),Yt(Bt))}function mi(bt){return bt=bt.map(Yt),bt.pop(),bt}function Yt(bt){return[bt[0]*g,bt[1]*g]}function gr(bt,Bt){return(bt&&ra.hasOwnProperty(bt.type)?ra[bt.type]:sa)(bt,Bt)}function un(bt,Bt,dr){var cr=u.range(bt,Bt-i,dr).concat(Bt);return function(Or){return cr.map(function(ln){return[Or,ln]})}}function yn(bt,Bt,dr){var cr=u.range(bt,Bt-i,dr).concat(Bt);return function(Or){return cr.map(function(ln){return[ln,Or]})}}function sn(){var bt,Bt,dr,cr,Or,ln,_n,Pn,zn=10,Xn=zn,wn=90,Un=360,On,jn,ia,Ga,za=2.5;function Ya(){return{type:"MultiLineString",coordinates:ja()}}function ja(){return u.range(x(cr/wn)*wn,dr,wn).map(ia).concat(u.range(x(Pn/Un)*Un,_n,Un).map(Ga)).concat(u.range(x(Bt/zn)*zn,bt,zn).filter(function(aa){return d(aa%wn)>i}).map(On)).concat(u.range(x(ln/Xn)*Xn,Or,Xn).filter(function(aa){return d(aa%Un)>i}).map(jn))}return Ya.lines=function(){return ja().map(function(aa){return{type:"LineString",coordinates:aa}})},Ya.outline=function(){return{type:"Polygon",coordinates:[ia(cr).concat(Ga(_n).slice(1),ia(dr).reverse().slice(1),Ga(Pn).reverse().slice(1))]}},Ya.extent=function(aa){return arguments.length?Ya.extentMajor(aa).extentMinor(aa):Ya.extentMinor()},Ya.extentMajor=function(aa){return arguments.length?(cr=+aa[0][0],dr=+aa[1][0],Pn=+aa[0][1],_n=+aa[1][1],cr>dr&&(aa=cr,cr=dr,dr=aa),Pn>_n&&(aa=Pn,Pn=_n,_n=aa),Ya.precision(za)):[[cr,Pn],[dr,_n]]},Ya.extentMinor=function(aa){return arguments.length?(Bt=+aa[0][0],bt=+aa[1][0],ln=+aa[0][1],Or=+aa[1][1],Bt>bt&&(aa=Bt,Bt=bt,bt=aa),ln>Or&&(aa=ln,ln=Or,Or=aa),Ya.precision(za)):[[Bt,ln],[bt,Or]]},Ya.step=function(aa){return arguments.length?Ya.stepMajor(aa).stepMinor(aa):Ya.stepMinor()},Ya.stepMajor=function(aa){return arguments.length?(wn=+aa[0],Un=+aa[1],Ya):[wn,Un]},Ya.stepMinor=function(aa){return arguments.length?(zn=+aa[0],Xn=+aa[1],Ya):[zn,Xn]},Ya.precision=function(aa){return arguments.length?(za=+aa,On=un(ln,Or,90),jn=yn(Bt,bt,za),ia=un(Pn,_n,90),Ga=yn(cr,dr,za),Ya):za},Ya.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function Cn(){return sn()()}function Tn(bt,Bt){var dr=bt[0]*g,cr=bt[1]*g,Or=Bt[0]*g,ln=Bt[1]*g,_n=l(cr),Pn=p(cr),zn=l(ln),Xn=p(ln),wn=_n*l(dr),Un=_n*p(dr),On=zn*l(Or),jn=zn*p(Or),ia=2*S(h(P(ln-cr)+_n*zn*P(Or-dr))),Ga=p(ia),za=ia?function(Ya){var ja=p(Ya*=ia)/Ga,aa=p(ia-Ya)/Ga,ba=aa*wn+ja*On,Qa=aa*Un+ja*jn,si=aa*Pn+ja*Xn;return[y(Qa,ba)*b,y(si,h(ba*ba+Qa*Qa))*b]}:function(){return[dr*b,cr*b]};return za.distance=ia,za}function gn(bt){return bt}var _r=A(),wr=A(),Br,An,Yn,ua,Sn={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Sn.lineStart=na,Sn.lineEnd=ka},polygonEnd:function(){Sn.lineStart=Sn.lineEnd=Sn.point=F,_r.add(d(wr)),wr.reset()},result:function(){var bt=_r/2;return _r.reset(),bt}};function na(){Sn.point=fa}function fa(bt,Bt){Sn.point=Ma,Br=Yn=bt,An=ua=Bt}function Ma(bt,Bt){wr.add(ua*bt-Yn*Bt),Yn=bt,ua=Bt}function ka(){Ma(Br,An)}var ga=1/0,Ia=ga,Mo=-ga,ro=Mo,Qo={point:Qs,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var bt=[[ga,Ia],[Mo,ro]];return Mo=ro=-(Ia=ga=1/0),bt}};function Qs(bt,Bt){bt<ga&&(ga=bt),bt>Mo&&(Mo=bt),Bt<Ia&&(Ia=Bt),Bt>ro&&(ro=Bt)}var Vs=0,Wl=0,Ai=0,Hs=0,Gs=0,Zi=0,Io=0,kl=0,ws=0,Fi,hl,uo,zi,go={point:ao,lineStart:cs,lineEnd:ts,polygonStart:function(){go.lineStart=Mu,go.lineEnd=Ds},polygonEnd:function(){go.point=ao,go.lineStart=cs,go.lineEnd=ts},result:function(){var bt=ws?[Io/ws,kl/ws]:Zi?[Hs/Zi,Gs/Zi]:Ai?[Vs/Ai,Wl/Ai]:[NaN,NaN];return Vs=Wl=Ai=Hs=Gs=Zi=Io=kl=ws=0,bt}};function ao(bt,Bt){Vs+=bt,Wl+=Bt,++Ai}function cs(){go.point=qs}function qs(bt,Bt){go.point=lu,ao(uo=bt,zi=Bt)}function lu(bt,Bt){var dr=bt-uo,cr=Bt-zi,Or=h(dr*dr+cr*cr);Hs+=Or*(uo+bt)/2,Gs+=Or*(zi+Bt)/2,Zi+=Or,ao(uo=bt,zi=Bt)}function ts(){go.point=ao}function Mu(){go.point=No}function Ds(){pc(Fi,hl)}function No(bt,Bt){go.point=pc,ao(Fi=uo=bt,hl=zi=Bt)}function pc(bt,Bt){var dr=bt-uo,cr=Bt-zi,Or=h(dr*dr+cr*cr);Hs+=Or*(uo+bt)/2,Gs+=Or*(zi+Bt)/2,Zi+=Or,Or=zi*bt-uo*Bt,Io+=Or*(uo+bt),kl+=Or*(zi+Bt),ws+=Or*3,ao(uo=bt,zi=Bt)}function ko(bt){this._context=bt}ko.prototype={_radius:4.5,pointRadius:function(bt){return this._radius=bt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(bt,Bt){switch(this._point){case 0:{this._context.moveTo(bt,Bt),this._point=1;break}case 1:{this._context.lineTo(bt,Bt);break}default:{this._context.moveTo(bt+this._radius,Bt),this._context.arc(bt,Bt,this._radius,0,o);break}}},result:F};var Rs=A(),Xl,ju,Zu,Ys,Cl,Is={point:F,lineStart:function(){Is.point=uu},lineEnd:function(){Xl&&vl(ju,Zu),Is.point=F},polygonStart:function(){Xl=!0},polygonEnd:function(){Xl=null},result:function(){var bt=+Rs;return Rs.reset(),bt}};function uu(bt,Bt){Is.point=vl,ju=Ys=bt,Zu=Cl=Bt}function vl(bt,Bt){Ys-=bt,Cl-=Bt,Rs.add(h(Ys*Ys+Cl*Cl)),Ys=bt,Cl=Bt}function cu(){this._string=[]}cu.prototype={_radius:4.5,_circle:Eu(4.5),pointRadius:function(bt){return(bt=+bt)!==this._radius&&(this._radius=bt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(bt,Bt){switch(this._point){case 0:{this._string.push("M",bt,",",Bt),this._point=1;break}case 1:{this._string.push("L",bt,",",Bt);break}default:{this._circle==null&&(this._circle=Eu(this._radius)),this._string.push("M",bt,",",Bt,this._circle);break}}},result:function(){if(this._string.length){var bt=this._string.join("");return this._string=[],bt}else return null}};function Eu(bt){return"m0,"+bt+"a"+bt+","+bt+" 0 1,1 0,"+-2*bt+"a"+bt+","+bt+" 0 1,1 0,"+2*bt+"z"}function jl(bt,Bt){var dr=4.5,cr,Or;function ln(_n){return _n&&(typeof dr=="function"&&Or.pointRadius(+dr.apply(this,arguments)),G(_n,cr(Or))),Or.result()}return ln.area=function(_n){return G(_n,cr(Sn)),Sn.result()},ln.measure=function(_n){return G(_n,cr(Is)),Is.result()},ln.bounds=function(_n){return G(_n,cr(Qo)),Qo.result()},ln.centroid=function(_n){return G(_n,cr(go)),go.result()},ln.projection=function(_n){return arguments.length?(cr=_n==null?(bt=null,gn):(bt=_n).stream,ln):bt},ln.context=function(_n){return arguments.length?(Or=_n==null?(Bt=null,new cu):new ko(Bt=_n),typeof dr!="function"&&Or.pointRadius(dr),ln):Bt},ln.pointRadius=function(_n){return arguments.length?(dr=typeof _n=="function"?_n:(Or.pointRadius(+_n),+_n),ln):dr},ln.projection(bt).context(Bt)}function Su(bt){return{stream:el(bt)}}function el(bt){return function(Bt){var dr=new Zl;for(var cr in bt)dr[cr]=bt[cr];return dr.stream=Bt,dr}}function Zl(){}Zl.prototype={constructor:Zl,point:function(bt,Bt){this.stream.point(bt,Bt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function pl(bt,Bt,dr){var cr=bt.clipExtent&&bt.clipExtent();return bt.scale(150).translate([0,0]),cr!=null&&bt.clipExtent(null),G(dr,bt.stream(Qo)),Bt(Qo.result()),cr!=null&&bt.clipExtent(cr),bt}function Ts(bt,Bt,dr){return pl(bt,function(cr){var Or=Bt[1][0]-Bt[0][0],ln=Bt[1][1]-Bt[0][1],_n=Math.min(Or/(cr[1][0]-cr[0][0]),ln/(cr[1][1]-cr[0][1])),Pn=+Bt[0][0]+(Or-_n*(cr[1][0]+cr[0][0]))/2,zn=+Bt[0][1]+(ln-_n*(cr[1][1]+cr[0][1]))/2;bt.scale(150*_n).translate([Pn,zn])},dr)}function Ll(bt,Bt,dr){return Ts(bt,[[0,0],Bt],dr)}function fu(bt,Bt,dr){return pl(bt,function(cr){var Or=+Bt,ln=Or/(cr[1][0]-cr[0][0]),_n=(Or-ln*(cr[1][0]+cr[0][0]))/2,Pn=-ln*cr[0][1];bt.scale(150*ln).translate([_n,Pn])},dr)}function ku(bt,Bt,dr){return pl(bt,function(cr){var Or=+Bt,ln=Or/(cr[1][1]-cr[0][1]),_n=-ln*cr[0][0],Pn=(Or-ln*(cr[1][1]+cr[0][1]))/2;bt.scale(150*ln).translate([_n,Pn])},dr)}var Cu=16,Kl=l(30*g);function tl(bt,Bt){return+Bt?fs(bt,Bt):Lu(bt)}function Lu(bt){return el({point:function(Bt,dr){Bt=bt(Bt,dr),this.stream.point(Bt[0],Bt[1])}})}function fs(bt,Bt){function dr(cr,Or,ln,_n,Pn,zn,Xn,wn,Un,On,jn,ia,Ga,za){var Ya=Xn-cr,ja=wn-Or,aa=Ya*Ya+ja*ja;if(aa>4*Bt&&Ga--){var ba=_n+On,Qa=Pn+jn,si=zn+ia,Mi=h(ba*ba+Qa*Qa+si*si),Ei=S(si/=Mi),wi=d(d(si)-1)<i||d(ln-Un)<i?(ln+Un)/2:y(Qa,ba),Pi=bt(wi,Ei),hi=Pi[0],Co=Pi[1],io=hi-cr,li=Co-Or,Aa=ja*io-Ya*li;(Aa*Aa/aa>Bt||d((Ya*io+ja*li)/aa-.5)>.3||_n*On+Pn*jn+zn*ia<Kl)&&(dr(cr,Or,ln,_n,Pn,zn,hi,Co,wi,ba/=Mi,Qa/=Mi,si,Ga,za),za.point(hi,Co),dr(hi,Co,wi,ba,Qa,si,Xn,wn,Un,On,jn,ia,Ga,za))}}return function(cr){var Or,ln,_n,Pn,zn,Xn,wn,Un,On,jn,ia,Ga,za={point:Ya,lineStart:ja,lineEnd:ba,polygonStart:function(){cr.polygonStart(),za.lineStart=Qa},polygonEnd:function(){cr.polygonEnd(),za.lineStart=ja}};function Ya(Ei,wi){Ei=bt(Ei,wi),cr.point(Ei[0],Ei[1])}function ja(){Un=NaN,za.point=aa,cr.lineStart()}function aa(Ei,wi){var Pi=oe([Ei,wi]),hi=bt(Ei,wi);dr(Un,On,wn,jn,ia,Ga,Un=hi[0],On=hi[1],wn=Ei,jn=Pi[0],ia=Pi[1],Ga=Pi[2],Cu,cr),cr.point(Un,On)}function ba(){za.point=Ya,cr.lineEnd()}function Qa(){ja(),za.point=si,za.lineEnd=Mi}function si(Ei,wi){aa(Or=Ei,wi),ln=Un,_n=On,Pn=jn,zn=ia,Xn=Ga,za.point=aa}function Mi(){dr(Un,On,wn,jn,ia,Ga,ln,_n,Or,Pn,zn,Xn,Cu,cr),za.lineEnd=ba,ba()}return za}}var Wo=el({point:function(bt,Bt){this.stream.point(bt*g,Bt*g)}});function rl(bt){return el({point:function(Bt,dr){var cr=bt(Bt,dr);return this.stream.point(cr[0],cr[1])}})}function hu(bt,Bt,dr,cr,Or){function ln(_n,Pn){return _n*=cr,Pn*=Or,[Bt+bt*_n,dr-bt*Pn]}return ln.invert=function(_n,Pn){return[(_n-Bt)/bt*cr,(dr-Pn)/bt*Or]},ln}function As(bt,Bt,dr,cr,Or,ln){var _n=l(ln),Pn=p(ln),zn=_n*bt,Xn=Pn*bt,wn=_n/bt,Un=Pn/bt,On=(Pn*dr-_n*Bt)/bt,jn=(Pn*Bt+_n*dr)/bt;function ia(Ga,za){return Ga*=cr,za*=Or,[zn*Ga-Xn*za+Bt,dr-Xn*Ga-zn*za]}return ia.invert=function(Ga,za){return[cr*(wn*Ga-Un*za+On),Or*(jn-Un*Ga-wn*za)]},ia}function Fo(bt){return Pl(function(){return bt})()}function Pl(bt){var Bt,dr=150,cr=480,Or=250,ln=0,_n=0,Pn=0,zn=0,Xn=0,wn,Un=0,On=1,jn=1,ia=null,Ga=Kt,za=null,Ya,ja,aa,ba=gn,Qa=.5,si,Mi,Ei,wi,Pi;function hi(Aa){return Ei(Aa[0]*g,Aa[1]*g)}function Co(Aa){return Aa=Ei.invert(Aa[0],Aa[1]),Aa&&[Aa[0]*b,Aa[1]*b]}hi.stream=function(Aa){return wi&&Pi===Aa?wi:wi=Wo(rl(wn)(Ga(si(ba(Pi=Aa)))))},hi.preclip=function(Aa){return arguments.length?(Ga=Aa,ia=void 0,li()):Ga},hi.postclip=function(Aa){return arguments.length?(ba=Aa,za=Ya=ja=aa=null,li()):ba},hi.clipAngle=function(Aa){return arguments.length?(Ga=+Aa?Dr(ia=Aa*g):(ia=null,Kt),li()):ia*b},hi.clipExtent=function(Aa){return arguments.length?(ba=Aa==null?(za=Ya=ja=aa=null,gn):mn(za=+Aa[0][0],Ya=+Aa[0][1],ja=+Aa[1][0],aa=+Aa[1][1]),li()):za==null?null:[[za,Ya],[ja,aa]]},hi.scale=function(Aa){return arguments.length?(dr=+Aa,io()):dr},hi.translate=function(Aa){return arguments.length?(cr=+Aa[0],Or=+Aa[1],io()):[cr,Or]},hi.center=function(Aa){return arguments.length?(ln=Aa[0]%360*g,_n=Aa[1]%360*g,io()):[ln*b,_n*b]},hi.rotate=function(Aa){return arguments.length?(Pn=Aa[0]%360*g,zn=Aa[1]%360*g,Xn=Aa.length>2?Aa[2]%360*g:0,io()):[Pn*b,zn*b,Xn*b]},hi.angle=function(Aa){return arguments.length?(Un=Aa%360*g,io()):Un*b},hi.reflectX=function(Aa){return arguments.length?(On=Aa?-1:1,io()):On<0},hi.reflectY=function(Aa){return arguments.length?(jn=Aa?-1:1,io()):jn<0},hi.precision=function(Aa){return arguments.length?(si=tl(Mi,Qa=Aa*Aa),li()):h(Qa)},hi.fitExtent=function(Aa,ki){return Ts(hi,Aa,ki)},hi.fitSize=function(Aa,ki){return Ll(hi,Aa,ki)},hi.fitWidth=function(Aa,ki){return fu(hi,Aa,ki)},hi.fitHeight=function(Aa,ki){return ku(hi,Aa,ki)};function io(){var Aa=As(dr,0,0,On,jn,Un).apply(null,Bt(ln,_n)),ki=(Un?As:hu)(dr,cr-Aa[0],Or-Aa[1],On,jn,Un);return wn=ot(Pn,zn,Xn),Mi=Pe(Bt,ki),Ei=Pe(wn,Mi),si=tl(Mi,Qa),li()}function li(){return wi=Pi=null,hi}return function(){return Bt=bt.apply(this,arguments),hi.invert=Bt.invert&&Co,io()}}function Ms(bt){var Bt=0,dr=r/3,cr=Pl(bt),Or=cr(Bt,dr);return Or.parallels=function(ln){return arguments.length?cr(Bt=ln[0]*g,dr=ln[1]*g):[Bt*b,dr*b]},Or}function Fs(bt){var Bt=l(bt);function dr(cr,Or){return[cr*Bt,p(Or)/Bt]}return dr.invert=function(cr,Or){return[cr/Bt,S(Or*Bt)]},dr}function mo(bt,Bt){var dr=p(bt),cr=(dr+p(Bt))/2;if(d(cr)<i)return Fs(bt);var Or=1+dr*(2*cr-dr),ln=h(Or)/cr;function _n(Pn,zn){var Xn=h(Or-2*cr*p(zn))/cr;return[Xn*p(Pn*=cr),ln-Xn*l(Pn)]}return _n.invert=function(Pn,zn){var Xn=ln-zn,wn=y(Pn,d(Xn))*_(Xn);return Xn*cr<0&&(wn-=r*_(Pn)*_(Xn)),[wn/cr,S((Or-(Pn*Pn+Xn*Xn)*cr*cr)/(2*cr))]},_n}function Dl(){return Ms(mo).scale(155.424).center([0,33.6442])}function Rl(){return Dl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function nl(bt){var Bt=bt.length;return{point:function(dr,cr){for(var Or=-1;++Or<Bt;)bt[Or].point(dr,cr)},sphere:function(){for(var dr=-1;++dr<Bt;)bt[dr].sphere()},lineStart:function(){for(var dr=-1;++dr<Bt;)bt[dr].lineStart()},lineEnd:function(){for(var dr=-1;++dr<Bt;)bt[dr].lineEnd()},polygonStart:function(){for(var dr=-1;++dr<Bt;)bt[dr].polygonStart()},polygonEnd:function(){for(var dr=-1;++dr<Bt;)bt[dr].polygonEnd()}}}function hs(){var bt,Bt,dr=Rl(),cr,Or=Dl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ln,_n=Dl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Pn,zn,Xn={point:function(On,jn){zn=[On,jn]}};function wn(On){var jn=On[0],ia=On[1];return zn=null,cr.point(jn,ia),zn||(ln.point(jn,ia),zn)||(Pn.point(jn,ia),zn)}wn.invert=function(On){var jn=dr.scale(),ia=dr.translate(),Ga=(On[0]-ia[0])/jn,za=(On[1]-ia[1])/jn;return(za>=.12&&za<.234&&Ga>=-.425&&Ga<-.214?Or:za>=.166&&za<.234&&Ga>=-.214&&Ga<-.115?_n:dr).invert(On)},wn.stream=function(On){return bt&&Bt===On?bt:bt=nl([dr.stream(Bt=On),Or.stream(On),_n.stream(On)])},wn.precision=function(On){return arguments.length?(dr.precision(On),Or.precision(On),_n.precision(On),Un()):dr.precision()},wn.scale=function(On){return arguments.length?(dr.scale(On),Or.scale(On*.35),_n.scale(On),wn.translate(dr.translate())):dr.scale()},wn.translate=function(On){if(!arguments.length)return dr.translate();var jn=dr.scale(),ia=+On[0],Ga=+On[1];return cr=dr.translate(On).clipExtent([[ia-.455*jn,Ga-.238*jn],[ia+.455*jn,Ga+.238*jn]]).stream(Xn),ln=Or.translate([ia-.307*jn,Ga+.201*jn]).clipExtent([[ia-.425*jn+i,Ga+.12*jn+i],[ia-.214*jn-i,Ga+.234*jn-i]]).stream(Xn),Pn=_n.translate([ia-.205*jn,Ga+.212*jn]).clipExtent([[ia-.214*jn+i,Ga+.166*jn+i],[ia-.115*jn-i,Ga+.234*jn-i]]).stream(Xn),Un()},wn.fitExtent=function(On,jn){return Ts(wn,On,jn)},wn.fitSize=function(On,jn){return Ll(wn,On,jn)},wn.fitWidth=function(On,jn){return fu(wn,On,jn)},wn.fitHeight=function(On,jn){return ku(wn,On,jn)};function Un(){return bt=Bt=null,wn}return wn.scale(1070)}function dl(bt){return function(Bt,dr){var cr=l(Bt),Or=l(dr),ln=bt(cr*Or);return[ln*Or*p(Bt),ln*p(dr)]}}function ml(bt){return function(Bt,dr){var cr=h(Bt*Bt+dr*dr),Or=bt(cr),ln=p(Or),_n=l(Or);return[y(Bt*ln,cr*_n),S(cr&&dr*ln/cr)]}}var $l=dl(function(bt){return h(2/(1+bt))});$l.invert=ml(function(bt){return 2*S(bt/2)});function Il(){return Fo($l).scale(124.75).clipAngle(180-.001)}var al=dl(function(bt){return(bt=E(bt))&&bt/p(bt)});al.invert=ml(function(bt){return bt});function Ku(){return Fo(al).scale(79.4188).clipAngle(180-.001)}function vs(bt,Bt){return[bt,M(L((v+Bt)/2))]}vs.invert=function(bt,Bt){return[bt,2*f(c(Bt))-v]};function Ws(){return vu(vs).scale(961/o)}function vu(bt){var Bt=Fo(bt),dr=Bt.center,cr=Bt.scale,Or=Bt.translate,ln=Bt.clipExtent,_n=null,Pn,zn,Xn;Bt.scale=function(Un){return arguments.length?(cr(Un),wn()):cr()},Bt.translate=function(Un){return arguments.length?(Or(Un),wn()):Or()},Bt.center=function(Un){return arguments.length?(dr(Un),wn()):dr()},Bt.clipExtent=function(Un){return arguments.length?(Un==null?_n=Pn=zn=Xn=null:(_n=+Un[0][0],Pn=+Un[0][1],zn=+Un[1][0],Xn=+Un[1][1]),wn()):_n==null?null:[[_n,Pn],[zn,Xn]]};function wn(){var Un=r*cr(),On=Bt(xt(Bt.rotate()).invert([0,0]));return ln(_n==null?[[On[0]-Un,On[1]-Un],[On[0]+Un,On[1]+Un]]:bt===vs?[[Math.max(On[0]-Un,_n),Pn],[Math.min(On[0]+Un,zn),Xn]]:[[_n,Math.max(On[1]-Un,Pn)],[zn,Math.min(On[1]+Un,Xn)]])}return wn()}function yl(bt){return L((v+bt)/2)}function Fl(bt,Bt){var dr=l(bt),cr=bt===Bt?p(bt):M(dr/l(Bt))/M(yl(Bt)/yl(bt)),Or=dr*w(yl(bt),cr)/cr;if(!cr)return vs;function ln(_n,Pn){Or>0?Pn<-v+i&&(Pn=-v+i):Pn>v-i&&(Pn=v-i);var zn=Or/w(yl(Pn),cr);return[zn*p(cr*_n),Or-zn*l(cr*_n)]}return ln.invert=function(_n,Pn){var zn=Or-Pn,Xn=_(cr)*h(_n*_n+zn*zn),wn=y(_n,d(zn))*_(zn);return zn*cr<0&&(wn-=r*_(_n)*_(zn)),[wn/cr,2*f(w(Or/Xn,1/cr))-v]},ln}function il(){return Ms(Fl).scale(109.5).parallels([30,30])}function zl(bt,Bt){return[bt,Bt]}zl.invert=zl;function pu(){return Fo(zl).scale(152.63)}function Pu(bt,Bt){var dr=l(bt),cr=bt===Bt?p(bt):(dr-l(Bt))/(Bt-bt),Or=dr/cr+bt;if(d(cr)<i)return zl;function ln(_n,Pn){var zn=Or-Pn,Xn=cr*_n;return[zn*p(Xn),Or-zn*l(Xn)]}return ln.invert=function(_n,Pn){var zn=Or-Pn,Xn=y(_n,d(zn))*_(zn);return zn*cr<0&&(Xn-=r*_(_n)*_(zn)),[Xn/cr,Or-_(cr)*h(_n*_n+zn*zn)]},ln}function dc(){return Ms(Pu).scale(131.154).center([0,13.9389])}var Bi=1.340264,xl=-.081106,ol=893e-6,rs=.003796,ps=h(3)/2,Ol=12;function co(bt,Bt){var dr=S(ps*p(Bt)),cr=dr*dr,Or=cr*cr*cr;return[bt*l(dr)/(ps*(Bi+3*xl*cr+Or*(7*ol+9*rs*cr))),dr*(Bi+xl*cr+Or*(ol+rs*cr))]}co.invert=function(bt,Bt){for(var dr=Bt,cr=dr*dr,Or=cr*cr*cr,ln=0,_n,Pn,zn;ln<Ol&&(Pn=dr*(Bi+xl*cr+Or*(ol+rs*cr))-Bt,zn=Bi+3*xl*cr+Or*(7*ol+9*rs*cr),dr-=_n=Pn/zn,cr=dr*dr,Or=cr*cr*cr,!(d(_n)<n));++ln);return[ps*bt*(Bi+3*xl*cr+Or*(7*ol+9*rs*cr))/l(dr),S(p(dr)/ps)]};function Du(){return Fo(co).scale(177.158)}function Xo(bt,Bt){var dr=l(Bt),cr=l(bt)*dr;return[dr*p(bt)/cr,p(Bt)/cr]}Xo.invert=ml(f);function Xs(){return Fo(Xo).scale(144.049).clipAngle(60)}function zs(){var bt=1,Bt=0,dr=0,cr=1,Or=1,ln=0,_n,Pn,zn=null,Xn,wn,Un,On=1,jn=1,ia=el({point:function(ba,Qa){var si=aa([ba,Qa]);this.stream.point(si[0],si[1])}}),Ga=gn,za,Ya;function ja(){return On=bt*cr,jn=bt*Or,za=Ya=null,aa}function aa(ba){var Qa=ba[0]*On,si=ba[1]*jn;if(ln){var Mi=si*_n-Qa*Pn;Qa=Qa*_n+si*Pn,si=Mi}return[Qa+Bt,si+dr]}return aa.invert=function(ba){var Qa=ba[0]-Bt,si=ba[1]-dr;if(ln){var Mi=si*_n+Qa*Pn;Qa=Qa*_n-si*Pn,si=Mi}return[Qa/On,si/jn]},aa.stream=function(ba){return za&&Ya===ba?za:za=ia(Ga(Ya=ba))},aa.postclip=function(ba){return arguments.length?(Ga=ba,zn=Xn=wn=Un=null,ja()):Ga},aa.clipExtent=function(ba){return arguments.length?(Ga=ba==null?(zn=Xn=wn=Un=null,gn):mn(zn=+ba[0][0],Xn=+ba[0][1],wn=+ba[1][0],Un=+ba[1][1]),ja()):zn==null?null:[[zn,Xn],[wn,Un]]},aa.scale=function(ba){return arguments.length?(bt=+ba,ja()):bt},aa.translate=function(ba){return arguments.length?(Bt=+ba[0],dr=+ba[1],ja()):[Bt,dr]},aa.angle=function(ba){return arguments.length?(ln=ba%360*g,Pn=p(ln),_n=l(ln),ja()):ln*b},aa.reflectX=function(ba){return arguments.length?(cr=ba?-1:1,ja()):cr<0},aa.reflectY=function(ba){return arguments.length?(Or=ba?-1:1,ja()):Or<0},aa.fitExtent=function(ba,Qa){return Ts(aa,ba,Qa)},aa.fitSize=function(ba,Qa){return Ll(aa,ba,Qa)},aa.fitWidth=function(ba,Qa){return fu(aa,ba,Qa)},aa.fitHeight=function(ba,Qa){return ku(aa,ba,Qa)},aa}function Es(bt,Bt){var dr=Bt*Bt,cr=dr*dr;return[bt*(.8707-.131979*dr+cr*(-.013791+cr*(.003971*dr-.001529*cr))),Bt*(1.007226+dr*(.015085+cr*(-.044475+.028874*dr-.005916*cr)))]}Es.invert=function(bt,Bt){var dr=Bt,cr=25,Or;do{var ln=dr*dr,_n=ln*ln;dr-=Or=(dr*(1.007226+ln*(.015085+_n*(-.044475+.028874*ln-.005916*_n)))-Bt)/(1.007226+ln*(.015085*3+_n*(-.044475*7+.028874*9*ln-.005916*11*_n)))}while(d(Or)>i&&--cr>0);return[bt/(.8707+(ln=dr*dr)*(-.131979+ln*(-.013791+ln*ln*ln*(.003971-.001529*ln)))),dr]};function Ho(){return Fo(Es).scale(175.295)}function Ki(bt,Bt){return[l(Bt)*p(bt),p(Bt)]}Ki.invert=ml(S);function Bo(){return Fo(Ki).scale(249.5).clipAngle(90+i)}function ds(bt,Bt){var dr=l(Bt),cr=1+l(bt)*dr;return[dr*p(bt)/cr,p(Bt)/cr]}ds.invert=ml(function(bt){return 2*f(bt)});function Ru(){return Fo(ds).scale(250).clipAngle(142)}function Jl(bt,Bt){return[M(L((v+Bt)/2)),-bt]}Jl.invert=function(bt,Bt){return[-Bt,2*f(c(bt))-v]};function Iu(){var bt=vu(Jl),Bt=bt.center,dr=bt.rotate;return bt.center=function(cr){return arguments.length?Bt([-cr[1],cr[0]]):(cr=Bt(),[cr[1],-cr[0]])},bt.rotate=function(cr){return arguments.length?dr([cr[0],cr[1],cr.length>2?cr[2]+90:90]):(cr=dr(),[cr[0],cr[1],cr[2]-90])},dr([0,0,90]).scale(159.155)}m.geoAlbers=Rl,m.geoAlbersUsa=hs,m.geoArea=Z,m.geoAzimuthalEqualArea=Il,m.geoAzimuthalEqualAreaRaw=$l,m.geoAzimuthalEquidistant=Ku,m.geoAzimuthalEquidistantRaw=al,m.geoBounds=Xe,m.geoCentroid=Et,m.geoCircle=or,m.geoClipAntimeridian=Kt,m.geoClipCircle=Dr,m.geoClipExtent=Wn,m.geoClipRectangle=mn,m.geoConicConformal=il,m.geoConicConformalRaw=Fl,m.geoConicEqualArea=Dl,m.geoConicEqualAreaRaw=mo,m.geoConicEquidistant=dc,m.geoConicEquidistantRaw=Pu,m.geoContains=gr,m.geoDistance=Ln,m.geoEqualEarth=Du,m.geoEqualEarthRaw=co,m.geoEquirectangular=pu,m.geoEquirectangularRaw=zl,m.geoGnomonic=Xs,m.geoGnomonicRaw=Xo,m.geoGraticule=sn,m.geoGraticule10=Cn,m.geoIdentity=zs,m.geoInterpolate=Tn,m.geoLength=kr,m.geoMercator=Ws,m.geoMercatorRaw=vs,m.geoNaturalEarth1=Ho,m.geoNaturalEarth1Raw=Es,m.geoOrthographic=Bo,m.geoOrthographicRaw=Ki,m.geoPath=jl,m.geoProjection=Fo,m.geoProjectionMutator=Pl,m.geoRotation=xt,m.geoStereographic=Ru,m.geoStereographicRaw=ds,m.geoStream=G,m.geoTransform=Su,m.geoTransverseMercator=Iu,m.geoTransverseMercatorRaw=Jl,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=m||self,u(m.d3=m.d3||{}))})(this,function(m){function u(Ye,Ee){return Ye.parent===Ee.parent?1:2}function A(Ye){return Ye.reduce(T,0)/Ye.length}function T(Ye,Ee){return Ye+Ee.x}function e(Ye){return 1+Ye.reduce(a,0)}function a(Ye,Ee){return Math.max(Ye,Ee.y)}function i(Ye){for(var Ee;Ee=Ye.children;)Ye=Ee[0];return Ye}function n(Ye){for(var Ee;Ee=Ye.children;)Ye=Ee[Ee.length-1];return Ye}function r(){var Ye=u,Ee=1,Ge=1,Ke=!1;function qe(At){var yt,Mt=0;At.eachAfter(function(Wt){var sr=Wt.children;sr?(Wt.x=A(sr),Wt.y=e(sr)):(Wt.x=yt?Mt+=Ye(Wt,yt):0,Wt.y=0,yt=Wt)});var Gt=i(At),zt=n(At),Ht=Gt.x-Ye(Gt,zt)/2,Zt=zt.x+Ye(zt,Gt)/2;return At.eachAfter(Ke?function(Wt){Wt.x=(Wt.x-At.x)*Ee,Wt.y=(At.y-Wt.y)*Ge}:function(Wt){Wt.x=(Wt.x-Ht)/(Zt-Ht)*Ee,Wt.y=(1-(At.y?Wt.y/At.y:1))*Ge})}return qe.separation=function(At){return arguments.length?(Ye=At,qe):Ye},qe.size=function(At){return arguments.length?(Ke=!1,Ee=+At[0],Ge=+At[1],qe):Ke?null:[Ee,Ge]},qe.nodeSize=function(At){return arguments.length?(Ke=!0,Ee=+At[0],Ge=+At[1],qe):Ke?[Ee,Ge]:null},qe}function v(Ye){var Ee=0,Ge=Ye.children,Ke=Ge&&Ge.length;if(!Ke)Ee=1;else for(;--Ke>=0;)Ee+=Ge[Ke].value;Ye.value=Ee}function s(){return this.eachAfter(v)}function o(Ye){var Ee=this,Ge,Ke=[Ee],qe,At,yt;do for(Ge=Ke.reverse(),Ke=[];Ee=Ge.pop();)if(Ye(Ee),qe=Ee.children,qe)for(At=0,yt=qe.length;At<yt;++At)Ke.push(qe[At]);while(Ke.length);return this}function b(Ye){for(var Ee=this,Ge=[Ee],Ke,qe;Ee=Ge.pop();)if(Ye(Ee),Ke=Ee.children,Ke)for(qe=Ke.length-1;qe>=0;--qe)Ge.push(Ke[qe]);return this}function g(Ye){for(var Ee=this,Ge=[Ee],Ke=[],qe,At,yt;Ee=Ge.pop();)if(Ke.push(Ee),qe=Ee.children,qe)for(At=0,yt=qe.length;At<yt;++At)Ge.push(qe[At]);for(;Ee=Ke.pop();)Ye(Ee);return this}function d(Ye){return this.eachAfter(function(Ee){for(var Ge=+Ye(Ee.data)||0,Ke=Ee.children,qe=Ke&&Ke.length;--qe>=0;)Ge+=Ke[qe].value;Ee.value=Ge})}function f(Ye){return this.eachBefore(function(Ee){Ee.children&&Ee.children.sort(Ye)})}function y(Ye){for(var Ee=this,Ge=l(Ee,Ye),Ke=[Ee];Ee!==Ge;)Ee=Ee.parent,Ke.push(Ee);for(var qe=Ke.length;Ye!==Ge;)Ke.splice(qe,0,Ye),Ye=Ye.parent;return Ke}function l(Ye,Ee){if(Ye===Ee)return Ye;var Ge=Ye.ancestors(),Ke=Ee.ancestors(),qe=null;for(Ye=Ge.pop(),Ee=Ke.pop();Ye===Ee;)qe=Ye,Ye=Ge.pop(),Ee=Ke.pop();return qe}function x(){for(var Ye=this,Ee=[Ye];Ye=Ye.parent;)Ee.push(Ye);return Ee}function c(){var Ye=[];return this.each(function(Ee){Ye.push(Ee)}),Ye}function M(){var Ye=[];return this.eachBefore(function(Ee){Ee.children||Ye.push(Ee)}),Ye}function w(){var Ye=this,Ee=[];return Ye.each(function(Ge){Ge!==Ye&&Ee.push({source:Ge.parent,target:Ge})}),Ee}function p(Ye,Ee){var Ge=new S(Ye),Ke=+Ye.value&&(Ge.value=Ye.value),qe,At=[Ge],yt,Mt,Gt,zt;for(Ee==null&&(Ee=h);qe=At.pop();)if(Ke&&(qe.value=+qe.data.value),(Mt=Ee(qe.data))&&(zt=Mt.length))for(qe.children=new Array(zt),Gt=zt-1;Gt>=0;--Gt)At.push(yt=qe.children[Gt]=new S(Mt[Gt])),yt.parent=qe,yt.depth=qe.depth+1;return Ge.eachBefore(E)}function _(){return p(this).eachBefore(L)}function h(Ye){return Ye.children}function L(Ye){Ye.data=Ye.data.data}function E(Ye){var Ee=0;do Ye.height=Ee;while((Ye=Ye.parent)&&Ye.height<++Ee)}function S(Ye){this.data=Ye,this.depth=this.height=0,this.parent=null}S.prototype=p.prototype={constructor:S,count:s,each:o,eachAfter:g,eachBefore:b,sum:d,sort:f,path:y,ancestors:x,descendants:c,leaves:M,links:w,copy:_};var P=Array.prototype.slice;function F(Ye){for(var Ee=Ye.length,Ge,Ke;Ee;)Ke=Math.random()*Ee--|0,Ge=Ye[Ee],Ye[Ee]=Ye[Ke],Ye[Ke]=Ge;return Ye}function I(Ye){for(var Ee=0,Ge=(Ye=F(P.call(Ye))).length,Ke=[],qe,At;Ee<Ge;)qe=Ye[Ee],At&&O(At,qe)?++Ee:(At=G(Ke=D(Ke,qe)),Ee=0);return At}function D(Ye,Ee){var Ge,Ke;if(z(Ee,Ye))return[Ee];for(Ge=0;Ge<Ye.length;++Ge)if(R(Ee,Ye[Ge])&&z(ee(Ye[Ge],Ee),Ye))return[Ye[Ge],Ee];for(Ge=0;Ge<Ye.length-1;++Ge)for(Ke=Ge+1;Ke<Ye.length;++Ke)if(R(ee(Ye[Ge],Ye[Ke]),Ee)&&R(ee(Ye[Ge],Ee),Ye[Ke])&&R(ee(Ye[Ke],Ee),Ye[Ge])&&z(j(Ye[Ge],Ye[Ke],Ee),Ye))return[Ye[Ge],Ye[Ke],Ee];throw new Error}function R(Ye,Ee){var Ge=Ye.r-Ee.r,Ke=Ee.x-Ye.x,qe=Ee.y-Ye.y;return Ge<0||Ge*Ge<Ke*Ke+qe*qe}function O(Ye,Ee){var Ge=Ye.r-Ee.r+1e-6,Ke=Ee.x-Ye.x,qe=Ee.y-Ye.y;return Ge>0&&Ge*Ge>Ke*Ke+qe*qe}function z(Ye,Ee){for(var Ge=0;Ge<Ee.length;++Ge)if(!O(Ye,Ee[Ge]))return!1;return!0}function G(Ye){switch(Ye.length){case 1:return Y(Ye[0]);case 2:return ee(Ye[0],Ye[1]);case 3:return j(Ye[0],Ye[1],Ye[2])}}function Y(Ye){return{x:Ye.x,y:Ye.y,r:Ye.r}}function ee(Ye,Ee){var Ge=Ye.x,Ke=Ye.y,qe=Ye.r,At=Ee.x,yt=Ee.y,Mt=Ee.r,Gt=At-Ge,zt=yt-Ke,Ht=Mt-qe,Zt=Math.sqrt(Gt*Gt+zt*zt);return{x:(Ge+At+Gt/Zt*Ht)/2,y:(Ke+yt+zt/Zt*Ht)/2,r:(Zt+qe+Mt)/2}}function j(Ye,Ee,Ge){var Ke=Ye.x,qe=Ye.y,At=Ye.r,yt=Ee.x,Mt=Ee.y,Gt=Ee.r,zt=Ge.x,Ht=Ge.y,Zt=Ge.r,Wt=Ke-yt,sr=Ke-zt,Gr=qe-Mt,cn=qe-Ht,qr=Gt-At,st=Zt-At,rr=Ke*Ke+qe*qe-At*At,Jt=rr-yt*yt-Mt*Mt+Gt*Gt,hr=rr-zt*zt-Ht*Ht+Zt*Zt,Sr=sr*Gr-Wt*cn,tt=(Gr*hr-cn*Jt)/(Sr*2)-Ke,Qe=(cn*qr-Gr*st)/Sr,lt=(sr*Jt-Wt*hr)/(Sr*2)-qe,ft=(Wt*st-sr*qr)/Sr,Et=Qe*Qe+ft*ft-1,Vt=2*(At+tt*Qe+lt*ft),Pe=tt*tt+lt*lt-At*At,Se=-(Et?(Vt+Math.sqrt(Vt*Vt-4*Et*Pe))/(2*Et):Pe/Vt);return{x:Ke+tt+Qe*Se,y:qe+lt+ft*Se,r:Se}}function X(Ye,Ee,Ge){var Ke=Ye.x-Ee.x,qe,At,yt=Ye.y-Ee.y,Mt,Gt,zt=Ke*Ke+yt*yt;zt?(At=Ee.r+Ge.r,At*=At,Gt=Ye.r+Ge.r,Gt*=Gt,At>Gt?(qe=(zt+Gt-At)/(2*zt),Mt=Math.sqrt(Math.max(0,Gt/zt-qe*qe)),Ge.x=Ye.x-qe*Ke-Mt*yt,Ge.y=Ye.y-qe*yt+Mt*Ke):(qe=(zt+At-Gt)/(2*zt),Mt=Math.sqrt(Math.max(0,At/zt-qe*qe)),Ge.x=Ee.x+qe*Ke-Mt*yt,Ge.y=Ee.y+qe*yt+Mt*Ke)):(Ge.x=Ee.x+Ge.r,Ge.y=Ee.y)}function ie(Ye,Ee){var Ge=Ye.r+Ee.r-1e-6,Ke=Ee.x-Ye.x,qe=Ee.y-Ye.y;return Ge>0&&Ge*Ge>Ke*Ke+qe*qe}function he(Ye){var Ee=Ye._,Ge=Ye.next._,Ke=Ee.r+Ge.r,qe=(Ee.x*Ge.r+Ge.x*Ee.r)/Ke,At=(Ee.y*Ge.r+Ge.y*Ee.r)/Ke;return qe*qe+At*At}function K(Ye){this._=Ye,this.next=null,this.previous=null}function $(Ye){if(!(qe=Ye.length))return 0;var Ee,Ge,Ke,qe,At,yt,Mt,Gt,zt,Ht,Zt;if(Ee=Ye[0],Ee.x=0,Ee.y=0,!(qe>1))return Ee.r;if(Ge=Ye[1],Ee.x=-Ge.r,Ge.x=Ee.r,Ge.y=0,!(qe>2))return Ee.r+Ge.r;X(Ge,Ee,Ke=Ye[2]),Ee=new K(Ee),Ge=new K(Ge),Ke=new K(Ke),Ee.next=Ke.previous=Ge,Ge.next=Ee.previous=Ke,Ke.next=Ge.previous=Ee;e:for(Mt=3;Mt<qe;++Mt){X(Ee._,Ge._,Ke=Ye[Mt]),Ke=new K(Ke),Gt=Ge.next,zt=Ee.previous,Ht=Ge._.r,Zt=Ee._.r;do if(Ht<=Zt){if(ie(Gt._,Ke._)){Ge=Gt,Ee.next=Ge,Ge.previous=Ee,--Mt;continue e}Ht+=Gt._.r,Gt=Gt.next}else{if(ie(zt._,Ke._)){Ee=zt,Ee.next=Ge,Ge.previous=Ee,--Mt;continue e}Zt+=zt._.r,zt=zt.previous}while(Gt!==zt.next);for(Ke.previous=Ee,Ke.next=Ge,Ee.next=Ge.previous=Ge=Ke,At=he(Ee);(Ke=Ke.next)!==Ge;)(yt=he(Ke))<At&&(Ee=Ke,At=yt);Ge=Ee.next}for(Ee=[Ge._],Ke=Ge;(Ke=Ke.next)!==Ge;)Ee.push(Ke._);for(Ke=I(Ee),Mt=0;Mt<qe;++Mt)Ee=Ye[Mt],Ee.x-=Ke.x,Ee.y-=Ke.y;return Ke.r}function U(Ye){return $(Ye),Ye}function H(Ye){return Ye==null?null:q(Ye)}function q(Ye){if(typeof Ye!="function")throw new Error;return Ye}function re(){return 0}function Z(Ye){return function(){return Ye}}function Q(Ye){return Math.sqrt(Ye.value)}function oe(){var Ye=null,Ee=1,Ge=1,Ke=re;function qe(At){return At.x=Ee/2,At.y=Ge/2,Ye?At.eachBefore(se(Ye)).eachAfter(ae(Ke,.5)).eachBefore(le(1)):At.eachBefore(se(Q)).eachAfter(ae(re,1)).eachAfter(ae(Ke,At.r/Math.min(Ee,Ge))).eachBefore(le(Math.min(Ee,Ge)/(2*At.r))),At}return qe.radius=function(At){return arguments.length?(Ye=H(At),qe):Ye},qe.size=function(At){return arguments.length?(Ee=+At[0],Ge=+At[1],qe):[Ee,Ge]},qe.padding=function(At){return arguments.length?(Ke=typeof At=="function"?At:Z(+At),qe):Ke},qe}function se(Ye){return function(Ee){Ee.children||(Ee.r=Math.max(0,+Ye(Ee)||0))}}function ae(Ye,Ee){return function(Ge){if(Ke=Ge.children){var Ke,qe,At=Ke.length,yt=Ye(Ge)*Ee||0,Mt;if(yt)for(qe=0;qe<At;++qe)Ke[qe].r+=yt;if(Mt=$(Ke),yt)for(qe=0;qe<At;++qe)Ke[qe].r-=yt;Ge.r=Mt+yt}}}function le(Ye){return function(Ee){var Ge=Ee.parent;Ee.r*=Ye,Ge&&(Ee.x=Ge.x+Ye*Ee.x,Ee.y=Ge.y+Ye*Ee.y)}}function _e(Ye){Ye.x0=Math.round(Ye.x0),Ye.y0=Math.round(Ye.y0),Ye.x1=Math.round(Ye.x1),Ye.y1=Math.round(Ye.y1)}function fe(Ye,Ee,Ge,Ke,qe){for(var At=Ye.children,yt,Mt=-1,Gt=At.length,zt=Ye.value&&(Ke-Ee)/Ye.value;++Mt<Gt;)yt=At[Mt],yt.y0=Ge,yt.y1=qe,yt.x0=Ee,yt.x1=Ee+=yt.value*zt}function me(){var Ye=1,Ee=1,Ge=0,Ke=!1;function qe(yt){var Mt=yt.height+1;return yt.x0=yt.y0=Ge,yt.x1=Ye,yt.y1=Ee/Mt,yt.eachBefore(At(Ee,Mt)),Ke&&yt.eachBefore(_e),yt}function At(yt,Mt){return function(Gt){Gt.children&&fe(Gt,Gt.x0,yt*(Gt.depth+1)/Mt,Gt.x1,yt*(Gt.depth+2)/Mt);var zt=Gt.x0,Ht=Gt.y0,Zt=Gt.x1-Ge,Wt=Gt.y1-Ge;Zt<zt&&(zt=Zt=(zt+Zt)/2),Wt<Ht&&(Ht=Wt=(Ht+Wt)/2),Gt.x0=zt,Gt.y0=Ht,Gt.x1=Zt,Gt.y1=Wt}}return qe.round=function(yt){return arguments.length?(Ke=!!yt,qe):Ke},qe.size=function(yt){return arguments.length?(Ye=+yt[0],Ee=+yt[1],qe):[Ye,Ee]},qe.padding=function(yt){return arguments.length?(Ge=+yt,qe):Ge},qe}var xe="$",ye={depth:-1},be={};function ke(Ye){return Ye.id}function De(Ye){return Ye.parentId}function He(){var Ye=ke,Ee=De;function Ge(Ke){var qe,At,yt=Ke.length,Mt,Gt,zt,Ht=new Array(yt),Zt,Wt,sr={};for(At=0;At<yt;++At)qe=Ke[At],zt=Ht[At]=new S(qe),(Zt=Ye(qe,At,Ke))!=null&&(Zt+="")&&(Wt=xe+(zt.id=Zt),sr[Wt]=Wt in sr?be:zt);for(At=0;At<yt;++At)if(zt=Ht[At],Zt=Ee(Ke[At],At,Ke),Zt==null||!(Zt+="")){if(Mt)throw new Error("multiple roots");Mt=zt}else{if(Gt=sr[xe+Zt],!Gt)throw new Error("missing: "+Zt);if(Gt===be)throw new Error("ambiguous: "+Zt);Gt.children?Gt.children.push(zt):Gt.children=[zt],zt.parent=Gt}if(!Mt)throw new Error("no root");if(Mt.parent=ye,Mt.eachBefore(function(Gr){Gr.depth=Gr.parent.depth+1,--yt}).eachBefore(E),Mt.parent=null,yt>0)throw new Error("cycle");return Mt}return Ge.id=function(Ke){return arguments.length?(Ye=q(Ke),Ge):Ye},Ge.parentId=function(Ke){return arguments.length?(Ee=q(Ke),Ge):Ee},Ge}function Ae(Ye,Ee){return Ye.parent===Ee.parent?1:2}function Le(Ye){var Ee=Ye.children;return Ee?Ee[0]:Ye.t}function Ze(Ye){var Ee=Ye.children;return Ee?Ee[Ee.length-1]:Ye.t}function We(Ye,Ee,Ge){var Ke=Ge/(Ee.i-Ye.i);Ee.c-=Ke,Ee.s+=Ge,Ye.c+=Ke,Ee.z+=Ge,Ee.m+=Ge}function ze(Ye){for(var Ee=0,Ge=0,Ke=Ye.children,qe=Ke.length,At;--qe>=0;)At=Ke[qe],At.z+=Ee,At.m+=Ee,Ee+=At.s+(Ge+=At.c)}function Ie(Ye,Ee,Ge){return Ye.a.parent===Ee.parent?Ye.a:Ge}function Ve(Ye,Ee){this._=Ye,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ee}Ve.prototype=Object.create(S.prototype);function dt(Ye){for(var Ee=new Ve(Ye,0),Ge,Ke=[Ee],qe,At,yt,Mt;Ge=Ke.pop();)if(At=Ge._.children)for(Ge.children=new Array(Mt=At.length),yt=Mt-1;yt>=0;--yt)Ke.push(qe=Ge.children[yt]=new Ve(At[yt],yt)),qe.parent=Ge;return(Ee.parent=new Ve(null,0)).children=[Ee],Ee}function Ft(){var Ye=Ae,Ee=1,Ge=1,Ke=null;function qe(zt){var Ht=dt(zt);if(Ht.eachAfter(At),Ht.parent.m=-Ht.z,Ht.eachBefore(yt),Ke)zt.eachBefore(Gt);else{var Zt=zt,Wt=zt,sr=zt;zt.eachBefore(function(rr){rr.x<Zt.x&&(Zt=rr),rr.x>Wt.x&&(Wt=rr),rr.depth>sr.depth&&(sr=rr)});var Gr=Zt===Wt?1:Ye(Zt,Wt)/2,cn=Gr-Zt.x,qr=Ee/(Wt.x+Gr+cn),st=Ge/(sr.depth||1);zt.eachBefore(function(rr){rr.x=(rr.x+cn)*qr,rr.y=rr.depth*st})}return zt}function At(zt){var Ht=zt.children,Zt=zt.parent.children,Wt=zt.i?Zt[zt.i-1]:null;if(Ht){ze(zt);var sr=(Ht[0].z+Ht[Ht.length-1].z)/2;Wt?(zt.z=Wt.z+Ye(zt._,Wt._),zt.m=zt.z-sr):zt.z=sr}else Wt&&(zt.z=Wt.z+Ye(zt._,Wt._));zt.parent.A=Mt(zt,Wt,zt.parent.A||Zt[0])}function yt(zt){zt._.x=zt.z+zt.parent.m,zt.m+=zt.parent.m}function Mt(zt,Ht,Zt){if(Ht){for(var Wt=zt,sr=zt,Gr=Ht,cn=Wt.parent.children[0],qr=Wt.m,st=sr.m,rr=Gr.m,Jt=cn.m,hr;Gr=Ze(Gr),Wt=Le(Wt),Gr&&Wt;)cn=Le(cn),sr=Ze(sr),sr.a=zt,hr=Gr.z+rr-Wt.z-qr+Ye(Gr._,Wt._),hr>0&&(We(Ie(Gr,zt,Zt),zt,hr),qr+=hr,st+=hr),rr+=Gr.m,qr+=Wt.m,Jt+=cn.m,st+=sr.m;Gr&&!Ze(sr)&&(sr.t=Gr,sr.m+=rr-st),Wt&&!Le(cn)&&(cn.t=Wt,cn.m+=qr-Jt,Zt=zt)}return Zt}function Gt(zt){zt.x*=Ee,zt.y=zt.depth*Ge}return qe.separation=function(zt){return arguments.length?(Ye=zt,qe):Ye},qe.size=function(zt){return arguments.length?(Ke=!1,Ee=+zt[0],Ge=+zt[1],qe):Ke?null:[Ee,Ge]},qe.nodeSize=function(zt){return arguments.length?(Ke=!0,Ee=+zt[0],Ge=+zt[1],qe):Ke?[Ee,Ge]:null},qe}function Qt(Ye,Ee,Ge,Ke,qe){for(var At=Ye.children,yt,Mt=-1,Gt=At.length,zt=Ye.value&&(qe-Ge)/Ye.value;++Mt<Gt;)yt=At[Mt],yt.x0=Ee,yt.x1=Ke,yt.y0=Ge,yt.y1=Ge+=yt.value*zt}var Ot=(1+Math.sqrt(5))/2;function Ct(Ye,Ee,Ge,Ke,qe,At){for(var yt=[],Mt=Ee.children,Gt,zt,Ht=0,Zt=0,Wt=Mt.length,sr,Gr,cn=Ee.value,qr,st,rr,Jt,hr,Sr,tt;Ht<Wt;){sr=qe-Ge,Gr=At-Ke;do qr=Mt[Zt++].value;while(!qr&&Zt<Wt);for(st=rr=qr,Sr=Math.max(Gr/sr,sr/Gr)/(cn*Ye),tt=qr*qr*Sr,hr=Math.max(rr/tt,tt/st);Zt<Wt;++Zt){if(qr+=zt=Mt[Zt].value,zt<st&&(st=zt),zt>rr&&(rr=zt),tt=qr*qr*Sr,Jt=Math.max(rr/tt,tt/st),Jt>hr){qr-=zt;break}hr=Jt}yt.push(Gt={value:qr,dice:sr<Gr,children:Mt.slice(Ht,Zt)}),Gt.dice?fe(Gt,Ge,Ke,qe,cn?Ke+=Gr*qr/cn:At):Qt(Gt,Ge,Ke,cn?Ge+=sr*qr/cn:qe,At),cn-=qr,Ht=Zt}return yt}var jt=function Ye(Ee){function Ge(Ke,qe,At,yt,Mt){Ct(Ee,Ke,qe,At,yt,Mt)}return Ge.ratio=function(Ke){return Ye((Ke=+Ke)>1?Ke:1)},Ge}(Ot);function Nt(){var Ye=jt,Ee=!1,Ge=1,Ke=1,qe=[0],At=re,yt=re,Mt=re,Gt=re,zt=re;function Ht(Wt){return Wt.x0=Wt.y0=0,Wt.x1=Ge,Wt.y1=Ke,Wt.eachBefore(Zt),qe=[0],Ee&&Wt.eachBefore(_e),Wt}function Zt(Wt){var sr=qe[Wt.depth],Gr=Wt.x0+sr,cn=Wt.y0+sr,qr=Wt.x1-sr,st=Wt.y1-sr;qr<Gr&&(Gr=qr=(Gr+qr)/2),st<cn&&(cn=st=(cn+st)/2),Wt.x0=Gr,Wt.y0=cn,Wt.x1=qr,Wt.y1=st,Wt.children&&(sr=qe[Wt.depth+1]=At(Wt)/2,Gr+=zt(Wt)-sr,cn+=yt(Wt)-sr,qr-=Mt(Wt)-sr,st-=Gt(Wt)-sr,qr<Gr&&(Gr=qr=(Gr+qr)/2),st<cn&&(cn=st=(cn+st)/2),Ye(Wt,Gr,cn,qr,st))}return Ht.round=function(Wt){return arguments.length?(Ee=!!Wt,Ht):Ee},Ht.size=function(Wt){return arguments.length?(Ge=+Wt[0],Ke=+Wt[1],Ht):[Ge,Ke]},Ht.tile=function(Wt){return arguments.length?(Ye=q(Wt),Ht):Ye},Ht.padding=function(Wt){return arguments.length?Ht.paddingInner(Wt).paddingOuter(Wt):Ht.paddingInner()},Ht.paddingInner=function(Wt){return arguments.length?(At=typeof Wt=="function"?Wt:Z(+Wt),Ht):At},Ht.paddingOuter=function(Wt){return arguments.length?Ht.paddingTop(Wt).paddingRight(Wt).paddingBottom(Wt).paddingLeft(Wt):Ht.paddingTop()},Ht.paddingTop=function(Wt){return arguments.length?(yt=typeof Wt=="function"?Wt:Z(+Wt),Ht):yt},Ht.paddingRight=function(Wt){return arguments.length?(Mt=typeof Wt=="function"?Wt:Z(+Wt),Ht):Mt},Ht.paddingBottom=function(Wt){return arguments.length?(Gt=typeof Wt=="function"?Wt:Z(+Wt),Ht):Gt},Ht.paddingLeft=function(Wt){return arguments.length?(zt=typeof Wt=="function"?Wt:Z(+Wt),Ht):zt},Ht}function Lt(Ye,Ee,Ge,Ke,qe){var At=Ye.children,yt,Mt=At.length,Gt,zt=new Array(Mt+1);for(zt[0]=Gt=yt=0;yt<Mt;++yt)zt[yt+1]=Gt+=At[yt].value;Ht(0,Mt,Ye.value,Ee,Ge,Ke,qe);function Ht(Zt,Wt,sr,Gr,cn,qr,st){if(Zt>=Wt-1){var rr=At[Zt];rr.x0=Gr,rr.y0=cn,rr.x1=qr,rr.y1=st;return}for(var Jt=zt[Zt],hr=sr/2+Jt,Sr=Zt+1,tt=Wt-1;Sr<tt;){var Qe=Sr+tt>>>1;zt[Qe]<hr?Sr=Qe+1:tt=Qe}hr-zt[Sr-1]<zt[Sr]-hr&&Zt+1<Sr&&--Sr;var lt=zt[Sr]-Jt,ft=sr-lt;if(qr-Gr>st-cn){var Et=(Gr*ft+qr*lt)/sr;Ht(Zt,Sr,lt,Gr,cn,Et,st),Ht(Sr,Wt,ft,Et,cn,qr,st)}else{var Vt=(cn*ft+st*lt)/sr;Ht(Zt,Sr,lt,Gr,cn,qr,Vt),Ht(Sr,Wt,ft,Gr,Vt,qr,st)}}}function Xe(Ye,Ee,Ge,Ke,qe){(Ye.depth&1?Qt:fe)(Ye,Ee,Ge,Ke,qe)}var it=function Ye(Ee){function Ge(Ke,qe,At,yt,Mt){if((Gt=Ke._squarify)&&Gt.ratio===Ee)for(var Gt,zt,Ht,Zt,Wt=-1,sr,Gr=Gt.length,cn=Ke.value;++Wt<Gr;){for(zt=Gt[Wt],Ht=zt.children,Zt=zt.value=0,sr=Ht.length;Zt<sr;++Zt)zt.value+=Ht[Zt].value;zt.dice?fe(zt,qe,At,yt,At+=(Mt-At)*zt.value/cn):Qt(zt,qe,At,qe+=(yt-qe)*zt.value/cn,Mt),cn-=zt.value}else Ke._squarify=Gt=Ct(Ee,Ke,qe,At,yt,Mt),Gt.ratio=Ee}return Ge.ratio=function(Ke){return Ye((Ke=+Ke)>1?Ke:1)},Ge}(Ot);m.cluster=r,m.hierarchy=p,m.pack=oe,m.packEnclose=I,m.packSiblings=U,m.partition=me,m.stratify=He,m.tree=Ft,m.treemap=Nt,m.treemapBinary=Lt,m.treemapDice=fe,m.treemapResquarify=it,m.treemapSlice=Qt,m.treemapSliceDice=Xe,m.treemapSquarify=jt,Object.defineProperty(m,"__esModule",{value:!0})})},{}],116:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V,t("d3-color")):(m=m||self,u(m.d3=m.d3||{},m.d3))})(this,function(m,u){function A(Ae,Le,Ze,We,ze){var Ie=Ae*Ae,Ve=Ie*Ae;return((1-3*Ae+3*Ie-Ve)*Le+(4-6*Ie+3*Ve)*Ze+(1+3*Ae+3*Ie-3*Ve)*We+Ve*ze)/6}function T(Ae){var Le=Ae.length-1;return function(Ze){var We=Ze<=0?Ze=0:Ze>=1?(Ze=1,Le-1):Math.floor(Ze*Le),ze=Ae[We],Ie=Ae[We+1],Ve=We>0?Ae[We-1]:2*ze-Ie,dt=We<Le-1?Ae[We+2]:2*Ie-ze;return A((Ze-We/Le)*Le,Ve,ze,Ie,dt)}}function e(Ae){var Le=Ae.length;return function(Ze){var We=Math.floor(((Ze%=1)<0?++Ze:Ze)*Le),ze=Ae[(We+Le-1)%Le],Ie=Ae[We%Le],Ve=Ae[(We+1)%Le],dt=Ae[(We+2)%Le];return A((Ze-We/Le)*Le,ze,Ie,Ve,dt)}}function a(Ae){return function(){return Ae}}function i(Ae,Le){return function(Ze){return Ae+Ze*Le}}function n(Ae,Le,Ze){return Ae=Math.pow(Ae,Ze),Le=Math.pow(Le,Ze)-Ae,Ze=1/Ze,function(We){return Math.pow(Ae+We*Le,Ze)}}function r(Ae,Le){var Ze=Le-Ae;return Ze?i(Ae,Ze>180||Ze<-180?Ze-360*Math.round(Ze/360):Ze):a(isNaN(Ae)?Le:Ae)}function v(Ae){return(Ae=+Ae)==1?s:function(Le,Ze){return Ze-Le?n(Le,Ze,Ae):a(isNaN(Le)?Ze:Le)}}function s(Ae,Le){var Ze=Le-Ae;return Ze?i(Ae,Ze):a(isNaN(Ae)?Le:Ae)}var o=function Ae(Le){var Ze=v(Le);function We(ze,Ie){var Ve=Ze((ze=u.rgb(ze)).r,(Ie=u.rgb(Ie)).r),dt=Ze(ze.g,Ie.g),Ft=Ze(ze.b,Ie.b),Qt=s(ze.opacity,Ie.opacity);return function(Ot){return ze.r=Ve(Ot),ze.g=dt(Ot),ze.b=Ft(Ot),ze.opacity=Qt(Ot),ze+""}}return We.gamma=Ae,We}(1);function b(Ae){return function(Le){var Ze=Le.length,We=new Array(Ze),ze=new Array(Ze),Ie=new Array(Ze),Ve,dt;for(Ve=0;Ve<Ze;++Ve)dt=u.rgb(Le[Ve]),We[Ve]=dt.r||0,ze[Ve]=dt.g||0,Ie[Ve]=dt.b||0;return We=Ae(We),ze=Ae(ze),Ie=Ae(Ie),dt.opacity=1,function(Ft){return dt.r=We(Ft),dt.g=ze(Ft),dt.b=Ie(Ft),dt+""}}}var g=b(T),d=b(e);function f(Ae,Le){Le||(Le=[]);var Ze=Ae?Math.min(Le.length,Ae.length):0,We=Le.slice(),ze;return function(Ie){for(ze=0;ze<Ze;++ze)We[ze]=Ae[ze]*(1-Ie)+Le[ze]*Ie;return We}}function y(Ae){return ArrayBuffer.isView(Ae)&&!(Ae instanceof DataView)}function l(Ae,Le){return(y(Le)?f:x)(Ae,Le)}function x(Ae,Le){var Ze=Le?Le.length:0,We=Ae?Math.min(Ze,Ae.length):0,ze=new Array(We),Ie=new Array(Ze),Ve;for(Ve=0;Ve<We;++Ve)ze[Ve]=S(Ae[Ve],Le[Ve]);for(;Ve<Ze;++Ve)Ie[Ve]=Le[Ve];return function(dt){for(Ve=0;Ve<We;++Ve)Ie[Ve]=ze[Ve](dt);return Ie}}function c(Ae,Le){var Ze=new Date;return Ae=+Ae,Le=+Le,function(We){return Ze.setTime(Ae*(1-We)+Le*We),Ze}}function M(Ae,Le){return Ae=+Ae,Le=+Le,function(Ze){return Ae*(1-Ze)+Le*Ze}}function w(Ae,Le){var Ze={},We={},ze;(Ae===null||typeof Ae!="object")&&(Ae={}),(Le===null||typeof Le!="object")&&(Le={});for(ze in Le)ze in Ae?Ze[ze]=S(Ae[ze],Le[ze]):We[ze]=Le[ze];return function(Ie){for(ze in Ze)We[ze]=Ze[ze](Ie);return We}}var p=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(p.source,"g");function h(Ae){return function(){return Ae}}function L(Ae){return function(Le){return Ae(Le)+""}}function E(Ae,Le){var Ze=p.lastIndex=_.lastIndex=0,We,ze,Ie,Ve=-1,dt=[],Ft=[];for(Ae=Ae+"",Le=Le+"";(We=p.exec(Ae))&&(ze=_.exec(Le));)(Ie=ze.index)>Ze&&(Ie=Le.slice(Ze,Ie),dt[Ve]?dt[Ve]+=Ie:dt[++Ve]=Ie),(We=We[0])===(ze=ze[0])?dt[Ve]?dt[Ve]+=ze:dt[++Ve]=ze:(dt[++Ve]=null,Ft.push({i:Ve,x:M(We,ze)})),Ze=_.lastIndex;return Ze<Le.length&&(Ie=Le.slice(Ze),dt[Ve]?dt[Ve]+=Ie:dt[++Ve]=Ie),dt.length<2?Ft[0]?L(Ft[0].x):h(Le):(Le=Ft.length,function(Qt){for(var Ot=0,Ct;Ot<Le;++Ot)dt[(Ct=Ft[Ot]).i]=Ct.x(Qt);return dt.join("")})}function S(Ae,Le){var Ze=typeof Le,We;return Le==null||Ze==="boolean"?a(Le):(Ze==="number"?M:Ze==="string"?(We=u.color(Le))?(Le=We,o):E:Le instanceof u.color?o:Le instanceof Date?c:y(Le)?f:Array.isArray(Le)?x:typeof Le.valueOf!="function"&&typeof Le.toString!="function"||isNaN(Le)?w:M)(Ae,Le)}function P(Ae){var Le=Ae.length;return function(Ze){return Ae[Math.max(0,Math.min(Le-1,Math.floor(Ze*Le)))]}}function F(Ae,Le){var Ze=r(+Ae,+Le);return function(We){var ze=Ze(We);return ze-360*Math.floor(ze/360)}}function I(Ae,Le){return Ae=+Ae,Le=+Le,function(Ze){return Math.round(Ae*(1-Ze)+Le*Ze)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O(Ae,Le,Ze,We,ze,Ie){var Ve,dt,Ft;return(Ve=Math.sqrt(Ae*Ae+Le*Le))&&(Ae/=Ve,Le/=Ve),(Ft=Ae*Ze+Le*We)&&(Ze-=Ae*Ft,We-=Le*Ft),(dt=Math.sqrt(Ze*Ze+We*We))&&(Ze/=dt,We/=dt,Ft/=dt),Ae*We<Le*Ze&&(Ae=-Ae,Le=-Le,Ft=-Ft,Ve=-Ve),{translateX:ze,translateY:Ie,rotate:Math.atan2(Le,Ae)*D,skewX:Math.atan(Ft)*D,scaleX:Ve,scaleY:dt}}var z,G,Y,ee;function j(Ae){return Ae==="none"?R:(z||(z=document.createElement("DIV"),G=document.documentElement,Y=document.defaultView),z.style.transform=Ae,Ae=Y.getComputedStyle(G.appendChild(z),null).getPropertyValue("transform"),G.removeChild(z),Ae=Ae.slice(7,-1).split(","),O(+Ae[0],+Ae[1],+Ae[2],+Ae[3],+Ae[4],+Ae[5]))}function X(Ae){return Ae==null||(ee||(ee=document.createElementNS("http://www.w3.org/2000/svg","g")),ee.setAttribute("transform",Ae),!(Ae=ee.transform.baseVal.consolidate()))?R:(Ae=Ae.matrix,O(Ae.a,Ae.b,Ae.c,Ae.d,Ae.e,Ae.f))}function ie(Ae,Le,Ze,We){function ze(Qt){return Qt.length?Qt.pop()+" ":""}function Ie(Qt,Ot,Ct,jt,Nt,Lt){if(Qt!==Ct||Ot!==jt){var Xe=Nt.push("translate(",null,Le,null,Ze);Lt.push({i:Xe-4,x:M(Qt,Ct)},{i:Xe-2,x:M(Ot,jt)})}else(Ct||jt)&&Nt.push("translate("+Ct+Le+jt+Ze)}function Ve(Qt,Ot,Ct,jt){Qt!==Ot?(Qt-Ot>180?Ot+=360:Ot-Qt>180&&(Qt+=360),jt.push({i:Ct.push(ze(Ct)+"rotate(",null,We)-2,x:M(Qt,Ot)})):Ot&&Ct.push(ze(Ct)+"rotate("+Ot+We)}function dt(Qt,Ot,Ct,jt){Qt!==Ot?jt.push({i:Ct.push(ze(Ct)+"skewX(",null,We)-2,x:M(Qt,Ot)}):Ot&&Ct.push(ze(Ct)+"skewX("+Ot+We)}function Ft(Qt,Ot,Ct,jt,Nt,Lt){if(Qt!==Ct||Ot!==jt){var Xe=Nt.push(ze(Nt)+"scale(",null,",",null,")");Lt.push({i:Xe-4,x:M(Qt,Ct)},{i:Xe-2,x:M(Ot,jt)})}else(Ct!==1||jt!==1)&&Nt.push(ze(Nt)+"scale("+Ct+","+jt+")")}return function(Qt,Ot){var Ct=[],jt=[];return Qt=Ae(Qt),Ot=Ae(Ot),Ie(Qt.translateX,Qt.translateY,Ot.translateX,Ot.translateY,Ct,jt),Ve(Qt.rotate,Ot.rotate,Ct,jt),dt(Qt.skewX,Ot.skewX,Ct,jt),Ft(Qt.scaleX,Qt.scaleY,Ot.scaleX,Ot.scaleY,Ct,jt),Qt=Ot=null,function(Nt){for(var Lt=-1,Xe=jt.length,it;++Lt<Xe;)Ct[(it=jt[Lt]).i]=it.x(Nt);return Ct.join("")}}}var he=ie(j,"px, ","px)","deg)"),K=ie(X,", ",")",")"),$=Math.SQRT2,U=2,H=4,q=1e-12;function re(Ae){return((Ae=Math.exp(Ae))+1/Ae)/2}function Z(Ae){return((Ae=Math.exp(Ae))-1/Ae)/2}function Q(Ae){return((Ae=Math.exp(2*Ae))-1)/(Ae+1)}function oe(Ae,Le){var Ze=Ae[0],We=Ae[1],ze=Ae[2],Ie=Le[0],Ve=Le[1],dt=Le[2],Ft=Ie-Ze,Qt=Ve-We,Ot=Ft*Ft+Qt*Qt,Ct,jt;if(Ot<q)jt=Math.log(dt/ze)/$,Ct=function(Ee){return[Ze+Ee*Ft,We+Ee*Qt,ze*Math.exp($*Ee*jt)]};else{var Nt=Math.sqrt(Ot),Lt=(dt*dt-ze*ze+H*Ot)/(2*ze*U*Nt),Xe=(dt*dt-ze*ze-H*Ot)/(2*dt*U*Nt),it=Math.log(Math.sqrt(Lt*Lt+1)-Lt),Ye=Math.log(Math.sqrt(Xe*Xe+1)-Xe);jt=(Ye-it)/$,Ct=function(Ee){var Ge=Ee*jt,Ke=re(it),qe=ze/(U*Nt)*(Ke*Q($*Ge+it)-Z(it));return[Ze+qe*Ft,We+qe*Qt,ze*Ke/re($*Ge+it)]}}return Ct.duration=jt*1e3,Ct}function se(Ae){return function(Le,Ze){var We=Ae((Le=u.hsl(Le)).h,(Ze=u.hsl(Ze)).h),ze=s(Le.s,Ze.s),Ie=s(Le.l,Ze.l),Ve=s(Le.opacity,Ze.opacity);return function(dt){return Le.h=We(dt),Le.s=ze(dt),Le.l=Ie(dt),Le.opacity=Ve(dt),Le+""}}}var ae=se(r),le=se(s);function _e(Ae,Le){var Ze=s((Ae=u.lab(Ae)).l,(Le=u.lab(Le)).l),We=s(Ae.a,Le.a),ze=s(Ae.b,Le.b),Ie=s(Ae.opacity,Le.opacity);return function(Ve){return Ae.l=Ze(Ve),Ae.a=We(Ve),Ae.b=ze(Ve),Ae.opacity=Ie(Ve),Ae+""}}function fe(Ae){return function(Le,Ze){var We=Ae((Le=u.hcl(Le)).h,(Ze=u.hcl(Ze)).h),ze=s(Le.c,Ze.c),Ie=s(Le.l,Ze.l),Ve=s(Le.opacity,Ze.opacity);return function(dt){return Le.h=We(dt),Le.c=ze(dt),Le.l=Ie(dt),Le.opacity=Ve(dt),Le+""}}}var me=fe(r),xe=fe(s);function ye(Ae){return function Le(Ze){Ze=+Ze;function We(ze,Ie){var Ve=Ae((ze=u.cubehelix(ze)).h,(Ie=u.cubehelix(Ie)).h),dt=s(ze.s,Ie.s),Ft=s(ze.l,Ie.l),Qt=s(ze.opacity,Ie.opacity);return function(Ot){return ze.h=Ve(Ot),ze.s=dt(Ot),ze.l=Ft(Math.pow(Ot,Ze)),ze.opacity=Qt(Ot),ze+""}}return We.gamma=Le,We}(1)}var be=ye(r),ke=ye(s);function De(Ae,Le){for(var Ze=0,We=Le.length-1,ze=Le[0],Ie=new Array(We<0?0:We);Ze<We;)Ie[Ze]=Ae(ze,ze=Le[++Ze]);return function(Ve){var dt=Math.max(0,Math.min(We-1,Math.floor(Ve*=We)));return Ie[dt](Ve-dt)}}function He(Ae,Le){for(var Ze=new Array(Le),We=0;We<Le;++We)Ze[We]=Ae(We/(Le-1));return Ze}m.interpolate=S,m.interpolateArray=l,m.interpolateBasis=T,m.interpolateBasisClosed=e,m.interpolateCubehelix=be,m.interpolateCubehelixLong=ke,m.interpolateDate=c,m.interpolateDiscrete=P,m.interpolateHcl=me,m.interpolateHclLong=xe,m.interpolateHsl=ae,m.interpolateHslLong=le,m.interpolateHue=F,m.interpolateLab=_e,m.interpolateNumber=M,m.interpolateNumberArray=f,m.interpolateObject=w,m.interpolateRgb=o,m.interpolateRgbBasis=g,m.interpolateRgbBasisClosed=d,m.interpolateRound=I,m.interpolateString=E,m.interpolateTransformCss=he,m.interpolateTransformSvg=K,m.interpolateZoom=oe,m.piecewise=De,m.quantize=He,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=m||self,u(m.d3=m.d3||{}))})(this,function(m){var u=Math.PI,A=2*u,T=1e-6,e=A-T;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new a}a.prototype=i.prototype={constructor:a,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,v,s){this._+="Q"+ +n+","+ +r+","+(this._x1=+v)+","+(this._y1=+s)},bezierCurveTo:function(n,r,v,s,o,b){this._+="C"+ +n+","+ +r+","+ +v+","+ +s+","+(this._x1=+o)+","+(this._y1=+b)},arcTo:function(n,r,v,s,o){n=+n,r=+r,v=+v,s=+s,o=+o;var b=this._x1,g=this._y1,d=v-n,f=s-r,y=b-n,l=g-r,x=y*y+l*l;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(x>T)if(!(Math.abs(l*d-f*y)>T)||!o)this._+="L"+(this._x1=n)+","+(this._y1=r);else{var c=v-b,M=s-g,w=d*d+f*f,p=c*c+M*M,_=Math.sqrt(w),h=Math.sqrt(x),L=o*Math.tan((u-Math.acos((w+x-p)/(2*_*h)))/2),E=L/h,S=L/_;Math.abs(E-1)>T&&(this._+="L"+(n+E*y)+","+(r+E*l)),this._+="A"+o+","+o+",0,0,"+ +(l*c>y*M)+","+(this._x1=n+S*d)+","+(this._y1=r+S*f)}},arc:function(n,r,v,s,o,b){n=+n,r=+r,v=+v,b=!!b;var g=v*Math.cos(s),d=v*Math.sin(s),f=n+g,y=r+d,l=1^b,x=b?s-o:o-s;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+f+","+y:(Math.abs(this._x1-f)>T||Math.abs(this._y1-y)>T)&&(this._+="L"+f+","+y),v&&(x<0&&(x=x%A+A),x>e?this._+="A"+v+","+v+",0,1,"+l+","+(n-g)+","+(r-d)+"A"+v+","+v+",0,1,"+l+","+(this._x1=f)+","+(this._y1=y):x>T&&(this._+="A"+v+","+v+",0,"+ +(x>=u)+","+l+","+(this._x1=n+v*Math.cos(o))+","+(this._y1=r+v*Math.sin(o))))},rect:function(n,r,v,s){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +v+"v"+ +s+"h"+-v+"Z"},toString:function(){return this._}},m.path=i,Object.defineProperty(m,"__esModule",{value:!0})})},{}],118:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=m||self,u(m.d3=m.d3||{}))})(this,function(m){function u(_){var h=+this._x.call(null,_),L=+this._y.call(null,_);return A(this.cover(h,L),h,L,_)}function A(_,h,L,E){if(isNaN(h)||isNaN(L))return _;var S,P=_._root,F={data:E},I=_._x0,D=_._y0,R=_._x1,O=_._y1,z,G,Y,ee,j,X,ie,he;if(!P)return _._root=F,_;for(;P.length;)if((j=h>=(z=(I+R)/2))?I=z:R=z,(X=L>=(G=(D+O)/2))?D=G:O=G,S=P,!(P=P[ie=X<<1|j]))return S[ie]=F,_;if(Y=+_._x.call(null,P.data),ee=+_._y.call(null,P.data),h===Y&&L===ee)return F.next=P,S?S[ie]=F:_._root=F,_;do S=S?S[ie]=new Array(4):_._root=new Array(4),(j=h>=(z=(I+R)/2))?I=z:R=z,(X=L>=(G=(D+O)/2))?D=G:O=G;while((ie=X<<1|j)===(he=(ee>=G)<<1|Y>=z));return S[he]=P,S[ie]=F,_}function T(_){var h,L,E=_.length,S,P,F=new Array(E),I=new Array(E),D=1/0,R=1/0,O=-1/0,z=-1/0;for(L=0;L<E;++L)isNaN(S=+this._x.call(null,h=_[L]))||isNaN(P=+this._y.call(null,h))||(F[L]=S,I[L]=P,S<D&&(D=S),S>O&&(O=S),P<R&&(R=P),P>z&&(z=P));if(D>O||R>z)return this;for(this.cover(D,R).cover(O,z),L=0;L<E;++L)A(this,F[L],I[L],_[L]);return this}function e(_,h){if(isNaN(_=+_)||isNaN(h=+h))return this;var L=this._x0,E=this._y0,S=this._x1,P=this._y1;if(isNaN(L))S=(L=Math.floor(_))+1,P=(E=Math.floor(h))+1;else{for(var F=S-L,I=this._root,D,R;L>_||_>=S||E>h||h>=P;)switch(R=(h<E)<<1|_<L,D=new Array(4),D[R]=I,I=D,F*=2,R){case 0:S=L+F,P=E+F;break;case 1:L=S-F,P=E+F;break;case 2:S=L+F,E=P-F;break;case 3:L=S-F,E=P-F;break}this._root&&this._root.length&&(this._root=I)}return this._x0=L,this._y0=E,this._x1=S,this._y1=P,this}function a(){var _=[];return this.visit(function(h){if(!h.length)do _.push(h.data);while(h=h.next)}),_}function i(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function n(_,h,L,E,S){this.node=_,this.x0=h,this.y0=L,this.x1=E,this.y1=S}function r(_,h,L){var E,S=this._x0,P=this._y0,F,I,D,R,O=this._x1,z=this._y1,G=[],Y=this._root,ee,j;for(Y&&G.push(new n(Y,S,P,O,z)),L==null?L=1/0:(S=_-L,P=h-L,O=_+L,z=h+L,L*=L);ee=G.pop();)if(!(!(Y=ee.node)||(F=ee.x0)>O||(I=ee.y0)>z||(D=ee.x1)<S||(R=ee.y1)<P))if(Y.length){var X=(F+D)/2,ie=(I+R)/2;G.push(new n(Y[3],X,ie,D,R),new n(Y[2],F,ie,X,R),new n(Y[1],X,I,D,ie),new n(Y[0],F,I,X,ie)),(j=(h>=ie)<<1|_>=X)&&(ee=G[G.length-1],G[G.length-1]=G[G.length-1-j],G[G.length-1-j]=ee)}else{var he=_-+this._x.call(null,Y.data),K=h-+this._y.call(null,Y.data),$=he*he+K*K;if($<L){var U=Math.sqrt(L=$);S=_-U,P=h-U,O=_+U,z=h+U,E=Y.data}}return E}function v(_){if(isNaN(O=+this._x.call(null,_))||isNaN(z=+this._y.call(null,_)))return this;var h,L=this._root,E,S,P,F=this._x0,I=this._y0,D=this._x1,R=this._y1,O,z,G,Y,ee,j,X,ie;if(!L)return this;if(L.length)for(;;){if((ee=O>=(G=(F+D)/2))?F=G:D=G,(j=z>=(Y=(I+R)/2))?I=Y:R=Y,h=L,!(L=L[X=j<<1|ee]))return this;if(!L.length)break;(h[X+1&3]||h[X+2&3]||h[X+3&3])&&(E=h,ie=X)}for(;L.data!==_;)if(S=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,S?(P?S.next=P:delete S.next,this):h?(P?h[X]=P:delete h[X],(L=h[0]||h[1]||h[2]||h[3])&&L===(h[3]||h[2]||h[1]||h[0])&&!L.length&&(E?E[ie]=L:this._root=L),this):(this._root=P,this)}function s(_){for(var h=0,L=_.length;h<L;++h)this.remove(_[h]);return this}function o(){return this._root}function b(){var _=0;return this.visit(function(h){if(!h.length)do++_;while(h=h.next)}),_}function g(_){var h=[],L,E=this._root,S,P,F,I,D;for(E&&h.push(new n(E,this._x0,this._y0,this._x1,this._y1));L=h.pop();)if(!_(E=L.node,P=L.x0,F=L.y0,I=L.x1,D=L.y1)&&E.length){var R=(P+I)/2,O=(F+D)/2;(S=E[3])&&h.push(new n(S,R,O,I,D)),(S=E[2])&&h.push(new n(S,P,O,R,D)),(S=E[1])&&h.push(new n(S,R,F,I,O)),(S=E[0])&&h.push(new n(S,P,F,R,O))}return this}function d(_){var h=[],L=[],E;for(this._root&&h.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));E=h.pop();){var S=E.node;if(S.length){var P,F=E.x0,I=E.y0,D=E.x1,R=E.y1,O=(F+D)/2,z=(I+R)/2;(P=S[0])&&h.push(new n(P,F,I,O,z)),(P=S[1])&&h.push(new n(P,O,I,D,z)),(P=S[2])&&h.push(new n(P,F,z,O,R)),(P=S[3])&&h.push(new n(P,O,z,D,R))}L.push(E)}for(;E=L.pop();)_(E.node,E.x0,E.y0,E.x1,E.y1);return this}function f(_){return _[0]}function y(_){return arguments.length?(this._x=_,this):this._x}function l(_){return _[1]}function x(_){return arguments.length?(this._y=_,this):this._y}function c(_,h,L){var E=new M(h==null?f:h,L==null?l:L,NaN,NaN,NaN,NaN);return _==null?E:E.addAll(_)}function M(_,h,L,E,S,P){this._x=_,this._y=h,this._x0=L,this._y0=E,this._x1=S,this._y1=P,this._root=void 0}function w(_){for(var h={data:_.data},L=h;_=_.next;)L=L.next={data:_.data};return h}var p=c.prototype=M.prototype;p.copy=function(){var _=new M(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root,L,E;if(!h)return _;if(!h.length)return _._root=w(h),_;for(L=[{source:h,target:_._root=new Array(4)}];h=L.pop();)for(var S=0;S<4;++S)(E=h.source[S])&&(E.length?L.push({source:E,target:h.target[S]=new Array(4)}):h.target[S]=w(E));return _},p.add=u,p.addAll=T,p.cover=e,p.data=a,p.extent=i,p.find=r,p.remove=v,p.removeAll=s,p.root=o,p.size=b,p.visit=g,p.visitAfter=d,p.x=y,p.y=x,m.quadtree=c,Object.defineProperty(m,"__esModule",{value:!0})})},{}],119:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V,t("d3-path")):(m=m||self,u(m.d3=m.d3||{},m.d3))})(this,function(m,u){function A(at){return function(){return at}}var T=Math.abs,e=Math.atan2,a=Math.cos,i=Math.max,n=Math.min,r=Math.sin,v=Math.sqrt,s=1e-12,o=Math.PI,b=o/2,g=2*o;function d(at){return at>1?0:at<-1?o:Math.acos(at)}function f(at){return at>=1?b:at<=-1?-b:Math.asin(at)}function y(at){return at.innerRadius}function l(at){return at.outerRadius}function x(at){return at.startAngle}function c(at){return at.endAngle}function M(at){return at&&at.padAngle}function w(at,Rt,Kt,ur,Nr,Vr,Dr,Mr){var jr=Kt-at,kn=ur-Rt,mn=Dr-Nr,Wn=Mr-Vr,In=Wn*jr-mn*kn;if(!(In*In<s))return In=(mn*(Rt-Vr)-Wn*(at-Nr))/In,[at+In*jr,Rt+In*kn]}function p(at,Rt,Kt,ur,Nr,Vr,Dr){var Mr=at-Kt,jr=Rt-ur,kn=(Dr?Vr:-Vr)/v(Mr*Mr+jr*jr),mn=kn*jr,Wn=-kn*Mr,In=at+mn,Jn=Rt+Wn,Kn=Kt+mn,ma=ur+Wn,Ra=(In+Kn)/2,_i=(Jn+ma)/2,Ka=Kn-In,ri=ma-Jn,ei=Ka*Ka+ri*ri,kr=Nr-Vr,bn=In*ma-Kn*Jn,dn=(ri<0?-1:1)*v(i(0,kr*kr*ei-bn*bn)),Ln=(bn*ri-Ka*dn)/ei,ra=(-bn*Ka-ri*dn)/ei,ya=(bn*ri+Ka*dn)/ei,sa=(-bn*Ka+ri*dn)/ei,Bn=Ln-Ra,Qn=ra-_i,Xa=ya-Ra,mi=sa-_i;return Bn*Bn+Qn*Qn>Xa*Xa+mi*mi&&(Ln=ya,ra=sa),{cx:Ln,cy:ra,x01:-mn,y01:-Wn,x11:Ln*(Nr/kr-1),y11:ra*(Nr/kr-1)}}function _(){var at=y,Rt=l,Kt=A(0),ur=null,Nr=x,Vr=c,Dr=M,Mr=null;function jr(){var kn,mn,Wn=+at.apply(this,arguments),In=+Rt.apply(this,arguments),Jn=Nr.apply(this,arguments)-b,Kn=Vr.apply(this,arguments)-b,ma=T(Kn-Jn),Ra=Kn>Jn;if(Mr||(Mr=kn=u.path()),In<Wn&&(mn=In,In=Wn,Wn=mn),!(In>s))Mr.moveTo(0,0);else if(ma>g-s)Mr.moveTo(In*a(Jn),In*r(Jn)),Mr.arc(0,0,In,Jn,Kn,!Ra),Wn>s&&(Mr.moveTo(Wn*a(Kn),Wn*r(Kn)),Mr.arc(0,0,Wn,Kn,Jn,Ra));else{var _i=Jn,Ka=Kn,ri=Jn,ei=Kn,kr=ma,bn=ma,dn=Dr.apply(this,arguments)/2,Ln=dn>s&&(ur?+ur.apply(this,arguments):v(Wn*Wn+In*In)),ra=n(T(In-Wn)/2,+Kt.apply(this,arguments)),ya=ra,sa=ra,Bn,Qn;if(Ln>s){var Xa=f(Ln/Wn*r(dn)),mi=f(Ln/In*r(dn));(kr-=Xa*2)>s?(Xa*=Ra?1:-1,ri+=Xa,ei-=Xa):(kr=0,ri=ei=(Jn+Kn)/2),(bn-=mi*2)>s?(mi*=Ra?1:-1,_i+=mi,Ka-=mi):(bn=0,_i=Ka=(Jn+Kn)/2)}var Yt=In*a(_i),gr=In*r(_i),un=Wn*a(ei),yn=Wn*r(ei);if(ra>s){var sn=In*a(Ka),Cn=In*r(Ka),Tn=Wn*a(ri),gn=Wn*r(ri),_r;if(ma<o&&(_r=w(Yt,gr,Tn,gn,sn,Cn,un,yn))){var wr=Yt-_r[0],Br=gr-_r[1],An=sn-_r[0],Yn=Cn-_r[1],ua=1/r(d((wr*An+Br*Yn)/(v(wr*wr+Br*Br)*v(An*An+Yn*Yn)))/2),Sn=v(_r[0]*_r[0]+_r[1]*_r[1]);ya=n(ra,(Wn-Sn)/(ua-1)),sa=n(ra,(In-Sn)/(ua+1))}}bn>s?sa>s?(Bn=p(Tn,gn,Yt,gr,In,sa,Ra),Qn=p(sn,Cn,un,yn,In,sa,Ra),Mr.moveTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),sa<ra?Mr.arc(Bn.cx,Bn.cy,sa,e(Bn.y01,Bn.x01),e(Qn.y01,Qn.x01),!Ra):(Mr.arc(Bn.cx,Bn.cy,sa,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Ra),Mr.arc(0,0,In,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e(Qn.cy+Qn.y11,Qn.cx+Qn.x11),!Ra),Mr.arc(Qn.cx,Qn.cy,sa,e(Qn.y11,Qn.x11),e(Qn.y01,Qn.x01),!Ra))):(Mr.moveTo(Yt,gr),Mr.arc(0,0,In,_i,Ka,!Ra)):Mr.moveTo(Yt,gr),!(Wn>s)||!(kr>s)?Mr.lineTo(un,yn):ya>s?(Bn=p(un,yn,sn,Cn,Wn,-ya,Ra),Qn=p(Yt,gr,Tn,gn,Wn,-ya,Ra),Mr.lineTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),ya<ra?Mr.arc(Bn.cx,Bn.cy,ya,e(Bn.y01,Bn.x01),e(Qn.y01,Qn.x01),!Ra):(Mr.arc(Bn.cx,Bn.cy,ya,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Ra),Mr.arc(0,0,Wn,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e(Qn.cy+Qn.y11,Qn.cx+Qn.x11),Ra),Mr.arc(Qn.cx,Qn.cy,ya,e(Qn.y11,Qn.x11),e(Qn.y01,Qn.x01),!Ra))):Mr.arc(0,0,Wn,ei,ri,Ra)}if(Mr.closePath(),kn)return Mr=null,kn+""||null}return jr.centroid=function(){var kn=(+at.apply(this,arguments)+ +Rt.apply(this,arguments))/2,mn=(+Nr.apply(this,arguments)+ +Vr.apply(this,arguments))/2-o/2;return[a(mn)*kn,r(mn)*kn]},jr.innerRadius=function(kn){return arguments.length?(at=typeof kn=="function"?kn:A(+kn),jr):at},jr.outerRadius=function(kn){return arguments.length?(Rt=typeof kn=="function"?kn:A(+kn),jr):Rt},jr.cornerRadius=function(kn){return arguments.length?(Kt=typeof kn=="function"?kn:A(+kn),jr):Kt},jr.padRadius=function(kn){return arguments.length?(ur=kn==null?null:typeof kn=="function"?kn:A(+kn),jr):ur},jr.startAngle=function(kn){return arguments.length?(Nr=typeof kn=="function"?kn:A(+kn),jr):Nr},jr.endAngle=function(kn){return arguments.length?(Vr=typeof kn=="function"?kn:A(+kn),jr):Vr},jr.padAngle=function(kn){return arguments.length?(Dr=typeof kn=="function"?kn:A(+kn),jr):Dr},jr.context=function(kn){return arguments.length?(Mr=kn==null?null:kn,jr):Mr},jr}function h(at){this._context=at}h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;default:this._context.lineTo(at,Rt);break}}};function L(at){return new h(at)}function E(at){return at[0]}function S(at){return at[1]}function P(){var at=E,Rt=S,Kt=A(!0),ur=null,Nr=L,Vr=null;function Dr(Mr){var jr,kn=Mr.length,mn,Wn=!1,In;for(ur==null&&(Vr=Nr(In=u.path())),jr=0;jr<=kn;++jr)!(jr<kn&&Kt(mn=Mr[jr],jr,Mr))===Wn&&((Wn=!Wn)?Vr.lineStart():Vr.lineEnd()),Wn&&Vr.point(+at(mn,jr,Mr),+Rt(mn,jr,Mr));if(In)return Vr=null,In+""||null}return Dr.x=function(Mr){return arguments.length?(at=typeof Mr=="function"?Mr:A(+Mr),Dr):at},Dr.y=function(Mr){return arguments.length?(Rt=typeof Mr=="function"?Mr:A(+Mr),Dr):Rt},Dr.defined=function(Mr){return arguments.length?(Kt=typeof Mr=="function"?Mr:A(!!Mr),Dr):Kt},Dr.curve=function(Mr){return arguments.length?(Nr=Mr,ur!=null&&(Vr=Nr(ur)),Dr):Nr},Dr.context=function(Mr){return arguments.length?(Mr==null?ur=Vr=null:Vr=Nr(ur=Mr),Dr):ur},Dr}function F(){var at=E,Rt=null,Kt=A(0),ur=S,Nr=A(!0),Vr=null,Dr=L,Mr=null;function jr(mn){var Wn,In,Jn,Kn=mn.length,ma,Ra=!1,_i,Ka=new Array(Kn),ri=new Array(Kn);for(Vr==null&&(Mr=Dr(_i=u.path())),Wn=0;Wn<=Kn;++Wn){if(!(Wn<Kn&&Nr(ma=mn[Wn],Wn,mn))===Ra)if(Ra=!Ra)In=Wn,Mr.areaStart(),Mr.lineStart();else{for(Mr.lineEnd(),Mr.lineStart(),Jn=Wn-1;Jn>=In;--Jn)Mr.point(Ka[Jn],ri[Jn]);Mr.lineEnd(),Mr.areaEnd()}Ra&&(Ka[Wn]=+at(ma,Wn,mn),ri[Wn]=+Kt(ma,Wn,mn),Mr.point(Rt?+Rt(ma,Wn,mn):Ka[Wn],ur?+ur(ma,Wn,mn):ri[Wn]))}if(_i)return Mr=null,_i+""||null}function kn(){return P().defined(Nr).curve(Dr).context(Vr)}return jr.x=function(mn){return arguments.length?(at=typeof mn=="function"?mn:A(+mn),Rt=null,jr):at},jr.x0=function(mn){return arguments.length?(at=typeof mn=="function"?mn:A(+mn),jr):at},jr.x1=function(mn){return arguments.length?(Rt=mn==null?null:typeof mn=="function"?mn:A(+mn),jr):Rt},jr.y=function(mn){return arguments.length?(Kt=typeof mn=="function"?mn:A(+mn),ur=null,jr):Kt},jr.y0=function(mn){return arguments.length?(Kt=typeof mn=="function"?mn:A(+mn),jr):Kt},jr.y1=function(mn){return arguments.length?(ur=mn==null?null:typeof mn=="function"?mn:A(+mn),jr):ur},jr.lineX0=jr.lineY0=function(){return kn().x(at).y(Kt)},jr.lineY1=function(){return kn().x(at).y(ur)},jr.lineX1=function(){return kn().x(Rt).y(Kt)},jr.defined=function(mn){return arguments.length?(Nr=typeof mn=="function"?mn:A(!!mn),jr):Nr},jr.curve=function(mn){return arguments.length?(Dr=mn,Vr!=null&&(Mr=Dr(Vr)),jr):Dr},jr.context=function(mn){return arguments.length?(mn==null?Vr=Mr=null:Mr=Dr(Vr=mn),jr):Vr},jr}function I(at,Rt){return Rt<at?-1:Rt>at?1:Rt>=at?0:NaN}function D(at){return at}function R(){var at=D,Rt=I,Kt=null,ur=A(0),Nr=A(g),Vr=A(0);function Dr(Mr){var jr,kn=Mr.length,mn,Wn,In=0,Jn=new Array(kn),Kn=new Array(kn),ma=+ur.apply(this,arguments),Ra=Math.min(g,Math.max(-g,Nr.apply(this,arguments)-ma)),_i,Ka=Math.min(Math.abs(Ra)/kn,Vr.apply(this,arguments)),ri=Ka*(Ra<0?-1:1),ei;for(jr=0;jr<kn;++jr)(ei=Kn[Jn[jr]=jr]=+at(Mr[jr],jr,Mr))>0&&(In+=ei);for(Rt!=null?Jn.sort(function(kr,bn){return Rt(Kn[kr],Kn[bn])}):Kt!=null&&Jn.sort(function(kr,bn){return Kt(Mr[kr],Mr[bn])}),jr=0,Wn=In?(Ra-kn*ri)/In:0;jr<kn;++jr,ma=_i)mn=Jn[jr],ei=Kn[mn],_i=ma+(ei>0?ei*Wn:0)+ri,Kn[mn]={data:Mr[mn],index:jr,value:ei,startAngle:ma,endAngle:_i,padAngle:Ka};return Kn}return Dr.value=function(Mr){return arguments.length?(at=typeof Mr=="function"?Mr:A(+Mr),Dr):at},Dr.sortValues=function(Mr){return arguments.length?(Rt=Mr,Kt=null,Dr):Rt},Dr.sort=function(Mr){return arguments.length?(Kt=Mr,Rt=null,Dr):Kt},Dr.startAngle=function(Mr){return arguments.length?(ur=typeof Mr=="function"?Mr:A(+Mr),Dr):ur},Dr.endAngle=function(Mr){return arguments.length?(Nr=typeof Mr=="function"?Mr:A(+Mr),Dr):Nr},Dr.padAngle=function(Mr){return arguments.length?(Vr=typeof Mr=="function"?Mr:A(+Mr),Dr):Vr},Dr}var O=G(L);function z(at){this._curve=at}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(at,Rt){this._curve.point(Rt*Math.sin(at),Rt*-Math.cos(at))}};function G(at){function Rt(Kt){return new z(at(Kt))}return Rt._curve=at,Rt}function Y(at){var Rt=at.curve;return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at.curve=function(Kt){return arguments.length?Rt(G(Kt)):Rt()._curve},at}function ee(){return Y(P().curve(O))}function j(){var at=F().curve(O),Rt=at.curve,Kt=at.lineX0,ur=at.lineX1,Nr=at.lineY0,Vr=at.lineY1;return at.angle=at.x,delete at.x,at.startAngle=at.x0,delete at.x0,at.endAngle=at.x1,delete at.x1,at.radius=at.y,delete at.y,at.innerRadius=at.y0,delete at.y0,at.outerRadius=at.y1,delete at.y1,at.lineStartAngle=function(){return Y(Kt())},delete at.lineX0,at.lineEndAngle=function(){return Y(ur())},delete at.lineX1,at.lineInnerRadius=function(){return Y(Nr())},delete at.lineY0,at.lineOuterRadius=function(){return Y(Vr())},delete at.lineY1,at.curve=function(Dr){return arguments.length?Rt(G(Dr)):Rt()._curve},at}function X(at,Rt){return[(Rt=+Rt)*Math.cos(at-=Math.PI/2),Rt*Math.sin(at)]}var ie=Array.prototype.slice;function he(at){return at.source}function K(at){return at.target}function $(at){var Rt=he,Kt=K,ur=E,Nr=S,Vr=null;function Dr(){var Mr,jr=ie.call(arguments),kn=Rt.apply(this,jr),mn=Kt.apply(this,jr);if(Vr||(Vr=Mr=u.path()),at(Vr,+ur.apply(this,(jr[0]=kn,jr)),+Nr.apply(this,jr),+ur.apply(this,(jr[0]=mn,jr)),+Nr.apply(this,jr)),Mr)return Vr=null,Mr+""||null}return Dr.source=function(Mr){return arguments.length?(Rt=Mr,Dr):Rt},Dr.target=function(Mr){return arguments.length?(Kt=Mr,Dr):Kt},Dr.x=function(Mr){return arguments.length?(ur=typeof Mr=="function"?Mr:A(+Mr),Dr):ur},Dr.y=function(Mr){return arguments.length?(Nr=typeof Mr=="function"?Mr:A(+Mr),Dr):Nr},Dr.context=function(Mr){return arguments.length?(Vr=Mr==null?null:Mr,Dr):Vr},Dr}function U(at,Rt,Kt,ur,Nr){at.moveTo(Rt,Kt),at.bezierCurveTo(Rt=(Rt+ur)/2,Kt,Rt,Nr,ur,Nr)}function H(at,Rt,Kt,ur,Nr){at.moveTo(Rt,Kt),at.bezierCurveTo(Rt,Kt=(Kt+Nr)/2,ur,Kt,ur,Nr)}function q(at,Rt,Kt,ur,Nr){var Vr=X(Rt,Kt),Dr=X(Rt,Kt=(Kt+Nr)/2),Mr=X(ur,Kt),jr=X(ur,Nr);at.moveTo(Vr[0],Vr[1]),at.bezierCurveTo(Dr[0],Dr[1],Mr[0],Mr[1],jr[0],jr[1])}function re(){return $(U)}function Z(){return $(H)}function Q(){var at=$(q);return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at}var oe={draw:function(at,Rt){var Kt=Math.sqrt(Rt/o);at.moveTo(Kt,0),at.arc(0,0,Kt,0,g)}},se={draw:function(at,Rt){var Kt=Math.sqrt(Rt/5)/2;at.moveTo(-3*Kt,-Kt),at.lineTo(-Kt,-Kt),at.lineTo(-Kt,-3*Kt),at.lineTo(Kt,-3*Kt),at.lineTo(Kt,-Kt),at.lineTo(3*Kt,-Kt),at.lineTo(3*Kt,Kt),at.lineTo(Kt,Kt),at.lineTo(Kt,3*Kt),at.lineTo(-Kt,3*Kt),at.lineTo(-Kt,Kt),at.lineTo(-3*Kt,Kt),at.closePath()}},ae=Math.sqrt(1/3),le=ae*2,_e={draw:function(at,Rt){var Kt=Math.sqrt(Rt/le),ur=Kt*ae;at.moveTo(0,-Kt),at.lineTo(ur,0),at.lineTo(0,Kt),at.lineTo(-ur,0),at.closePath()}},fe=.8908130915292852,me=Math.sin(o/10)/Math.sin(7*o/10),xe=Math.sin(g/10)*me,ye=-Math.cos(g/10)*me,be={draw:function(at,Rt){var Kt=Math.sqrt(Rt*fe),ur=xe*Kt,Nr=ye*Kt;at.moveTo(0,-Kt),at.lineTo(ur,Nr);for(var Vr=1;Vr<5;++Vr){var Dr=g*Vr/5,Mr=Math.cos(Dr),jr=Math.sin(Dr);at.lineTo(jr*Kt,-Mr*Kt),at.lineTo(Mr*ur-jr*Nr,jr*ur+Mr*Nr)}at.closePath()}},ke={draw:function(at,Rt){var Kt=Math.sqrt(Rt),ur=-Kt/2;at.rect(ur,ur,Kt,Kt)}},De=Math.sqrt(3),He={draw:function(at,Rt){var Kt=-Math.sqrt(Rt/(De*3));at.moveTo(0,Kt*2),at.lineTo(-De*Kt,-Kt),at.lineTo(De*Kt,-Kt),at.closePath()}},Ae=-.5,Le=Math.sqrt(3)/2,Ze=1/Math.sqrt(12),We=(Ze/2+1)*3,ze={draw:function(at,Rt){var Kt=Math.sqrt(Rt/We),ur=Kt/2,Nr=Kt*Ze,Vr=ur,Dr=Kt*Ze+Kt,Mr=-Vr,jr=Dr;at.moveTo(ur,Nr),at.lineTo(Vr,Dr),at.lineTo(Mr,jr),at.lineTo(Ae*ur-Le*Nr,Le*ur+Ae*Nr),at.lineTo(Ae*Vr-Le*Dr,Le*Vr+Ae*Dr),at.lineTo(Ae*Mr-Le*jr,Le*Mr+Ae*jr),at.lineTo(Ae*ur+Le*Nr,Ae*Nr-Le*ur),at.lineTo(Ae*Vr+Le*Dr,Ae*Dr-Le*Vr),at.lineTo(Ae*Mr+Le*jr,Ae*jr-Le*Mr),at.closePath()}},Ie=[oe,se,_e,ke,be,He,ze];function Ve(){var at=A(oe),Rt=A(64),Kt=null;function ur(){var Nr;if(Kt||(Kt=Nr=u.path()),at.apply(this,arguments).draw(Kt,+Rt.apply(this,arguments)),Nr)return Kt=null,Nr+""||null}return ur.type=function(Nr){return arguments.length?(at=typeof Nr=="function"?Nr:A(Nr),ur):at},ur.size=function(Nr){return arguments.length?(Rt=typeof Nr=="function"?Nr:A(+Nr),ur):Rt},ur.context=function(Nr){return arguments.length?(Kt=Nr==null?null:Nr,ur):Kt},ur}function dt(){}function Ft(at,Rt,Kt){at._context.bezierCurveTo((2*at._x0+at._x1)/3,(2*at._y0+at._y1)/3,(at._x0+2*at._x1)/3,(at._y0+2*at._y1)/3,(at._x0+4*at._x1+Rt)/6,(at._y0+4*at._y1+Kt)/6)}function Qt(at){this._context=at}Qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ft(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ft(this,at,Rt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Rt}};function Ot(at){return new Qt(at)}function Ct(at){this._context=at}Ct.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._x2=at,this._y2=Rt;break;case 1:this._point=2,this._x3=at,this._y3=Rt;break;case 2:this._point=3,this._x4=at,this._y4=Rt,this._context.moveTo((this._x0+4*this._x1+at)/6,(this._y0+4*this._y1+Rt)/6);break;default:Ft(this,at,Rt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Rt}};function jt(at){return new Ct(at)}function Nt(at){this._context=at}Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Kt=(this._x0+4*this._x1+at)/6,ur=(this._y0+4*this._y1+Rt)/6;this._line?this._context.lineTo(Kt,ur):this._context.moveTo(Kt,ur);break;case 3:this._point=4;default:Ft(this,at,Rt);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Rt}};function Lt(at){return new Nt(at)}function Xe(at,Rt){this._basis=new Qt(at),this._beta=Rt}Xe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var at=this._x,Rt=this._y,Kt=at.length-1;if(Kt>0)for(var ur=at[0],Nr=Rt[0],Vr=at[Kt]-ur,Dr=Rt[Kt]-Nr,Mr=-1,jr;++Mr<=Kt;)jr=Mr/Kt,this._basis.point(this._beta*at[Mr]+(1-this._beta)*(ur+jr*Vr),this._beta*Rt[Mr]+(1-this._beta)*(Nr+jr*Dr));this._x=this._y=null,this._basis.lineEnd()},point:function(at,Rt){this._x.push(+at),this._y.push(+Rt)}};var it=function at(Rt){function Kt(ur){return Rt===1?new Qt(ur):new Xe(ur,Rt)}return Kt.beta=function(ur){return at(+ur)},Kt}(.85);function Ye(at,Rt,Kt){at._context.bezierCurveTo(at._x1+at._k*(at._x2-at._x0),at._y1+at._k*(at._y2-at._y0),at._x2+at._k*(at._x1-Rt),at._y2+at._k*(at._y1-Kt),at._x2,at._y2)}function Ee(at,Rt){this._context=at,this._k=(1-Rt)/6}Ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ye(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2,this._x1=at,this._y1=Rt;break;case 2:this._point=3;default:Ye(this,at,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var Ge=function at(Rt){function Kt(ur){return new Ee(ur,Rt)}return Kt.tension=function(ur){return at(+ur)},Kt}(0);function Ke(at,Rt){this._context=at,this._k=(1-Rt)/6}Ke.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._x3=at,this._y3=Rt;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Rt);break;case 2:this._point=3,this._x5=at,this._y5=Rt;break;default:Ye(this,at,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var qe=function at(Rt){function Kt(ur){return new Ke(ur,Rt)}return Kt.tension=function(ur){return at(+ur)},Kt}(0);function At(at,Rt){this._context=at,this._k=(1-Rt)/6}At.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,at,Rt);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var yt=function at(Rt){function Kt(ur){return new At(ur,Rt)}return Kt.tension=function(ur){return at(+ur)},Kt}(0);function Mt(at,Rt,Kt){var ur=at._x1,Nr=at._y1,Vr=at._x2,Dr=at._y2;if(at._l01_a>s){var Mr=2*at._l01_2a+3*at._l01_a*at._l12_a+at._l12_2a,jr=3*at._l01_a*(at._l01_a+at._l12_a);ur=(ur*Mr-at._x0*at._l12_2a+at._x2*at._l01_2a)/jr,Nr=(Nr*Mr-at._y0*at._l12_2a+at._y2*at._l01_2a)/jr}if(at._l23_a>s){var kn=2*at._l23_2a+3*at._l23_a*at._l12_a+at._l12_2a,mn=3*at._l23_a*(at._l23_a+at._l12_a);Vr=(Vr*kn+at._x1*at._l23_2a-Rt*at._l12_2a)/mn,Dr=(Dr*kn+at._y1*at._l23_2a-Kt*at._l12_2a)/mn}at._context.bezierCurveTo(ur,Nr,Vr,Dr,at._x2,at._y2)}function Gt(at,Rt){this._context=at,this._alpha=Rt}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){if(at=+at,Rt=+Rt,this._point){var Kt=this._x2-at,ur=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Kt*Kt+ur*ur,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;break;case 2:this._point=3;default:Mt(this,at,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var zt=function at(Rt){function Kt(ur){return Rt?new Gt(ur,Rt):new Ee(ur,0)}return Kt.alpha=function(ur){return at(+ur)},Kt}(.5);function Ht(at,Rt){this._context=at,this._alpha=Rt}Ht.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Rt){if(at=+at,Rt=+Rt,this._point){var Kt=this._x2-at,ur=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Kt*Kt+ur*ur,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=Rt;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Rt);break;case 2:this._point=3,this._x5=at,this._y5=Rt;break;default:Mt(this,at,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var Zt=function at(Rt){function Kt(ur){return Rt?new Ht(ur,Rt):new Ke(ur,0)}return Kt.alpha=function(ur){return at(+ur)},Kt}(.5);function Wt(at,Rt){this._context=at,this._alpha=Rt}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){if(at=+at,Rt=+Rt,this._point){var Kt=this._x2-at,ur=this._y2-Rt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Kt*Kt+ur*ur,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mt(this,at,Rt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Rt}};var sr=function at(Rt){function Kt(ur){return Rt?new Wt(ur,Rt):new At(ur,0)}return Kt.alpha=function(ur){return at(+ur)},Kt}(.5);function Gr(at){this._context=at}Gr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(at,Rt){at=+at,Rt=+Rt,this._point?this._context.lineTo(at,Rt):(this._point=1,this._context.moveTo(at,Rt))}};function cn(at){return new Gr(at)}function qr(at){return at<0?-1:1}function st(at,Rt,Kt){var ur=at._x1-at._x0,Nr=Rt-at._x1,Vr=(at._y1-at._y0)/(ur||Nr<0&&-0),Dr=(Kt-at._y1)/(Nr||ur<0&&-0),Mr=(Vr*Nr+Dr*ur)/(ur+Nr);return(qr(Vr)+qr(Dr))*Math.min(Math.abs(Vr),Math.abs(Dr),.5*Math.abs(Mr))||0}function rr(at,Rt){var Kt=at._x1-at._x0;return Kt?(3*(at._y1-at._y0)/Kt-Rt)/2:Rt}function Jt(at,Rt,Kt){var ur=at._x0,Nr=at._y0,Vr=at._x1,Dr=at._y1,Mr=(Vr-ur)/3;at._context.bezierCurveTo(ur+Mr,Nr+Mr*Rt,Vr-Mr,Dr-Mr*Kt,Vr,Dr)}function hr(at){this._context=at}hr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jt(this,this._t0,rr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Rt){var Kt=NaN;if(at=+at,Rt=+Rt,!(at===this._x1&&Rt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;break;case 2:this._point=3,Jt(this,rr(this,Kt=st(this,at,Rt)),Kt);break;default:Jt(this,this._t0,Kt=st(this,at,Rt));break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Rt,this._t0=Kt}}};function Sr(at){this._context=new tt(at)}(Sr.prototype=Object.create(hr.prototype)).point=function(at,Rt){hr.prototype.point.call(this,Rt,at)};function tt(at){this._context=at}tt.prototype={moveTo:function(at,Rt){this._context.moveTo(Rt,at)},closePath:function(){this._context.closePath()},lineTo:function(at,Rt){this._context.lineTo(Rt,at)},bezierCurveTo:function(at,Rt,Kt,ur,Nr,Vr){this._context.bezierCurveTo(Rt,at,ur,Kt,Vr,Nr)}};function Qe(at){return new hr(at)}function lt(at){return new Sr(at)}function ft(at){this._context=at}ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var at=this._x,Rt=this._y,Kt=at.length;if(Kt)if(this._line?this._context.lineTo(at[0],Rt[0]):this._context.moveTo(at[0],Rt[0]),Kt===2)this._context.lineTo(at[1],Rt[1]);else for(var ur=Et(at),Nr=Et(Rt),Vr=0,Dr=1;Dr<Kt;++Vr,++Dr)this._context.bezierCurveTo(ur[0][Vr],Nr[0][Vr],ur[1][Vr],Nr[1][Vr],at[Dr],Rt[Dr]);(this._line||this._line!==0&&Kt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(at,Rt){this._x.push(+at),this._y.push(+Rt)}};function Et(at){var Rt,Kt=at.length-1,ur,Nr=new Array(Kt),Vr=new Array(Kt),Dr=new Array(Kt);for(Nr[0]=0,Vr[0]=2,Dr[0]=at[0]+2*at[1],Rt=1;Rt<Kt-1;++Rt)Nr[Rt]=1,Vr[Rt]=4,Dr[Rt]=4*at[Rt]+2*at[Rt+1];for(Nr[Kt-1]=2,Vr[Kt-1]=7,Dr[Kt-1]=8*at[Kt-1]+at[Kt],Rt=1;Rt<Kt;++Rt)ur=Nr[Rt]/Vr[Rt-1],Vr[Rt]-=ur,Dr[Rt]-=ur*Dr[Rt-1];for(Nr[Kt-1]=Dr[Kt-1]/Vr[Kt-1],Rt=Kt-2;Rt>=0;--Rt)Nr[Rt]=(Dr[Rt]-Nr[Rt+1])/Vr[Rt];for(Vr[Kt-1]=(at[Kt]+Nr[Kt-1])/2,Rt=0;Rt<Kt-1;++Rt)Vr[Rt]=2*at[Rt+1]-Nr[Rt+1];return[Nr,Vr]}function Vt(at){return new ft(at)}function Pe(at,Rt){this._context=at,this._t=Rt}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(at,Rt){switch(at=+at,Rt=+Rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Rt):this._context.moveTo(at,Rt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Rt),this._context.lineTo(at,Rt);else{var Kt=this._x*(1-this._t)+at*this._t;this._context.lineTo(Kt,this._y),this._context.lineTo(Kt,Rt)}break}}this._x=at,this._y=Rt}};function Se(at){return new Pe(at,.5)}function ot(at){return new Pe(at,0)}function ct(at){return new Pe(at,1)}function pt(at,Rt){if((Dr=at.length)>1)for(var Kt=1,ur,Nr,Vr=at[Rt[0]],Dr,Mr=Vr.length;Kt<Dr;++Kt)for(Nr=Vr,Vr=at[Rt[Kt]],ur=0;ur<Mr;++ur)Vr[ur][1]+=Vr[ur][0]=isNaN(Nr[ur][1])?Nr[ur][0]:Nr[ur][1]}function St(at){for(var Rt=at.length,Kt=new Array(Rt);--Rt>=0;)Kt[Rt]=Rt;return Kt}function xt(at,Rt){return at[Rt]}function Pt(){var at=A([]),Rt=St,Kt=pt,ur=xt;function Nr(Vr){var Dr=at.apply(this,arguments),Mr,jr=Vr.length,kn=Dr.length,mn=new Array(kn),Wn;for(Mr=0;Mr<kn;++Mr){for(var In=Dr[Mr],Jn=mn[Mr]=new Array(jr),Kn=0,ma;Kn<jr;++Kn)Jn[Kn]=ma=[0,+ur(Vr[Kn],In,Kn,Vr)],ma.data=Vr[Kn];Jn.key=In}for(Mr=0,Wn=Rt(mn);Mr<kn;++Mr)mn[Wn[Mr]].index=Mr;return Kt(mn,Wn),mn}return Nr.keys=function(Vr){return arguments.length?(at=typeof Vr=="function"?Vr:A(ie.call(Vr)),Nr):at},Nr.value=function(Vr){return arguments.length?(ur=typeof Vr=="function"?Vr:A(+Vr),Nr):ur},Nr.order=function(Vr){return arguments.length?(Rt=Vr==null?St:typeof Vr=="function"?Vr:A(ie.call(Vr)),Nr):Rt},Nr.offset=function(Vr){return arguments.length?(Kt=Vr==null?pt:Vr,Nr):Kt},Nr}function Xt(at,Rt){if((ur=at.length)>0){for(var Kt,ur,Nr=0,Vr=at[0].length,Dr;Nr<Vr;++Nr){for(Dr=Kt=0;Kt<ur;++Kt)Dr+=at[Kt][Nr][1]||0;if(Dr)for(Kt=0;Kt<ur;++Kt)at[Kt][Nr][1]/=Dr}pt(at,Rt)}}function or(at,Rt){if((jr=at.length)>0)for(var Kt,ur=0,Nr,Vr,Dr,Mr,jr,kn=at[Rt[0]].length;ur<kn;++ur)for(Dr=Mr=0,Kt=0;Kt<jr;++Kt)(Vr=(Nr=at[Rt[Kt]][ur])[1]-Nr[0])>0?(Nr[0]=Dr,Nr[1]=Dr+=Vr):Vr<0?(Nr[1]=Mr,Nr[0]=Mr+=Vr):(Nr[0]=0,Nr[1]=Vr)}function Pr(at,Rt){if((Nr=at.length)>0){for(var Kt=0,ur=at[Rt[0]],Nr,Vr=ur.length;Kt<Vr;++Kt){for(var Dr=0,Mr=0;Dr<Nr;++Dr)Mr+=at[Dr][Kt][1]||0;ur[Kt][1]+=ur[Kt][0]=-Mr/2}pt(at,Rt)}}function Ar(at,Rt){if(!(!((Dr=at.length)>0)||!((Vr=(Nr=at[Rt[0]]).length)>0))){for(var Kt=0,ur=1,Nr,Vr,Dr;ur<Vr;++ur){for(var Mr=0,jr=0,kn=0;Mr<Dr;++Mr){for(var mn=at[Rt[Mr]],Wn=mn[ur][1]||0,In=mn[ur-1][1]||0,Jn=(Wn-In)/2,Kn=0;Kn<Mr;++Kn){var ma=at[Rt[Kn]],Ra=ma[ur][1]||0,_i=ma[ur-1][1]||0;Jn+=Ra-_i}jr+=Wn,kn+=Jn*Wn}Nr[ur-1][1]+=Nr[ur-1][0]=Kt,jr&&(Kt-=kn/jr)}Nr[ur-1][1]+=Nr[ur-1][0]=Kt,pt(at,Rt)}}function Er(at){var Rt=at.map($r);return St(at).sort(function(Kt,ur){return Rt[Kt]-Rt[ur]})}function $r(at){for(var Rt=-1,Kt=0,ur=at.length,Nr,Vr=-1/0;++Rt<ur;)(Nr=+at[Rt][1])>Vr&&(Vr=Nr,Kt=Rt);return Kt}function lr(at){var Rt=at.map(br);return St(at).sort(function(Kt,ur){return Rt[Kt]-Rt[ur]})}function br(at){for(var Rt=0,Kt=-1,ur=at.length,Nr;++Kt<ur;)(Nr=+at[Kt][1])&&(Rt+=Nr);return Rt}function Fr(at){return lr(at).reverse()}function Hr(at){var Rt=at.length,Kt,ur,Nr=at.map(br),Vr=Er(at),Dr=0,Mr=0,jr=[],kn=[];for(Kt=0;Kt<Rt;++Kt)ur=Vr[Kt],Dr<Mr?(Dr+=Nr[ur],jr.push(ur)):(Mr+=Nr[ur],kn.push(ur));return kn.reverse().concat(jr)}function Lr(at){return St(at).reverse()}m.arc=_,m.area=F,m.areaRadial=j,m.curveBasis=Ot,m.curveBasisClosed=jt,m.curveBasisOpen=Lt,m.curveBundle=it,m.curveCardinal=Ge,m.curveCardinalClosed=qe,m.curveCardinalOpen=yt,m.curveCatmullRom=zt,m.curveCatmullRomClosed=Zt,m.curveCatmullRomOpen=sr,m.curveLinear=L,m.curveLinearClosed=cn,m.curveMonotoneX=Qe,m.curveMonotoneY=lt,m.curveNatural=Vt,m.curveStep=Se,m.curveStepAfter=ct,m.curveStepBefore=ot,m.line=P,m.lineRadial=ee,m.linkHorizontal=re,m.linkRadial=Q,m.linkVertical=Z,m.pie=R,m.pointRadial=X,m.radialArea=j,m.radialLine=ee,m.stack=Pt,m.stackOffsetDiverging=or,m.stackOffsetExpand=Xt,m.stackOffsetNone=pt,m.stackOffsetSilhouette=Pr,m.stackOffsetWiggle=Ar,m.stackOrderAppearance=Er,m.stackOrderAscending=lr,m.stackOrderDescending=Fr,m.stackOrderInsideOut=Hr,m.stackOrderNone=St,m.stackOrderReverse=Lr,m.symbol=Ve,m.symbolCircle=oe,m.symbolCross=se,m.symbolDiamond=_e,m.symbolSquare=ke,m.symbolStar=be,m.symbolTriangle=He,m.symbolWye=ze,m.symbols=Ie,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V,t("d3-time")):(m=m||self,u(m.d3=m.d3||{},m.d3))})(this,function(m,u){function A(Xe){if(0<=Xe.y&&Xe.y<100){var it=new Date(-1,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L);return it.setFullYear(Xe.y),it}return new Date(Xe.y,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L)}function T(Xe){if(0<=Xe.y&&Xe.y<100){var it=new Date(Date.UTC(-1,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L));return it.setUTCFullYear(Xe.y),it}return new Date(Date.UTC(Xe.y,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L))}function e(Xe,it,Ye){return{y:Xe,m:it,d:Ye,H:0,M:0,S:0,L:0}}function a(Xe){var it=Xe.dateTime,Ye=Xe.date,Ee=Xe.time,Ge=Xe.periods,Ke=Xe.days,qe=Xe.shortDays,At=Xe.months,yt=Xe.shortMonths,Mt=b(Ge),Gt=g(Ge),zt=b(Ke),Ht=g(Ke),Zt=b(qe),Wt=g(qe),sr=b(At),Gr=g(At),cn=b(yt),qr=g(yt),st={a:ct,A:pt,b:St,B:xt,c:null,d:z,e:z,f:X,H:G,I:Y,j:ee,L:j,m:ie,M:he,p:Pt,q:Xt,Q:Ve,s:dt,S:K,u:$,U,V:H,w:q,W:re,x:null,X:null,y:Z,Y:Q,Z:oe,"%":Ie},rr={a:or,A:Pr,b:Ar,B:Er,c:null,d:se,e:se,f:me,H:ae,I:le,j:_e,L:fe,m:xe,M:ye,p:$r,q:lr,Q:Ve,s:dt,S:be,u:ke,U:De,V:He,w:Ae,W:Le,x:null,X:null,y:Ze,Y:We,Z:ze,"%":Ie},Jt={a:lt,A:ft,b:Et,B:Vt,c:Pe,d:h,e:h,f:I,H:E,I:E,j:L,L:F,m:_,M:S,p:Qe,q:p,Q:R,s:O,S:P,u:f,U:y,V:l,w:d,W:x,x:Se,X:ot,y:M,Y:c,Z:w,"%":D};st.x=hr(Ye,st),st.X=hr(Ee,st),st.c=hr(it,st),rr.x=hr(Ye,rr),rr.X=hr(Ee,rr),rr.c=hr(it,rr);function hr(br,Fr){return function(Hr){var Lr=[],at=-1,Rt=0,Kt=br.length,ur,Nr,Vr;for(Hr instanceof Date||(Hr=new Date(+Hr));++at<Kt;)br.charCodeAt(at)===37&&(Lr.push(br.slice(Rt,at)),(Nr=i[ur=br.charAt(++at)])!=null?ur=br.charAt(++at):Nr=ur==="e"?" ":"0",(Vr=Fr[ur])&&(ur=Vr(Hr,Nr)),Lr.push(ur),Rt=at+1);return Lr.push(br.slice(Rt,at)),Lr.join("")}}function Sr(br,Fr){return function(Hr){var Lr=e(1900,void 0,1),at=tt(Lr,br,Hr+="",0),Rt,Kt;if(at!=Hr.length)return null;if("Q"in Lr)return new Date(Lr.Q);if("s"in Lr)return new Date(Lr.s*1e3+("L"in Lr?Lr.L:0));if(Fr&&!("Z"in Lr)&&(Lr.Z=0),"p"in Lr&&(Lr.H=Lr.H%12+Lr.p*12),Lr.m===void 0&&(Lr.m="q"in Lr?Lr.q:0),"V"in Lr){if(Lr.V<1||Lr.V>53)return null;"w"in Lr||(Lr.w=1),"Z"in Lr?(Rt=T(e(Lr.y,0,1)),Kt=Rt.getUTCDay(),Rt=Kt>4||Kt===0?u.utcMonday.ceil(Rt):u.utcMonday(Rt),Rt=u.utcDay.offset(Rt,(Lr.V-1)*7),Lr.y=Rt.getUTCFullYear(),Lr.m=Rt.getUTCMonth(),Lr.d=Rt.getUTCDate()+(Lr.w+6)%7):(Rt=A(e(Lr.y,0,1)),Kt=Rt.getDay(),Rt=Kt>4||Kt===0?u.timeMonday.ceil(Rt):u.timeMonday(Rt),Rt=u.timeDay.offset(Rt,(Lr.V-1)*7),Lr.y=Rt.getFullYear(),Lr.m=Rt.getMonth(),Lr.d=Rt.getDate()+(Lr.w+6)%7)}else("W"in Lr||"U"in Lr)&&("w"in Lr||(Lr.w="u"in Lr?Lr.u%7:"W"in Lr?1:0),Kt="Z"in Lr?T(e(Lr.y,0,1)).getUTCDay():A(e(Lr.y,0,1)).getDay(),Lr.m=0,Lr.d="W"in Lr?(Lr.w+6)%7+Lr.W*7-(Kt+5)%7:Lr.w+Lr.U*7-(Kt+6)%7);return"Z"in Lr?(Lr.H+=Lr.Z/100|0,Lr.M+=Lr.Z%100,T(Lr)):A(Lr)}}function tt(br,Fr,Hr,Lr){for(var at=0,Rt=Fr.length,Kt=Hr.length,ur,Nr;at<Rt;){if(Lr>=Kt)return-1;if(ur=Fr.charCodeAt(at++),ur===37){if(ur=Fr.charAt(at++),Nr=Jt[ur in i?Fr.charAt(at++):ur],!Nr||(Lr=Nr(br,Hr,Lr))<0)return-1}else if(ur!=Hr.charCodeAt(Lr++))return-1}return Lr}function Qe(br,Fr,Hr){var Lr=Mt.exec(Fr.slice(Hr));return Lr?(br.p=Gt[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function lt(br,Fr,Hr){var Lr=Zt.exec(Fr.slice(Hr));return Lr?(br.w=Wt[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function ft(br,Fr,Hr){var Lr=zt.exec(Fr.slice(Hr));return Lr?(br.w=Ht[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Et(br,Fr,Hr){var Lr=cn.exec(Fr.slice(Hr));return Lr?(br.m=qr[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Vt(br,Fr,Hr){var Lr=sr.exec(Fr.slice(Hr));return Lr?(br.m=Gr[Lr[0].toLowerCase()],Hr+Lr[0].length):-1}function Pe(br,Fr,Hr){return tt(br,it,Fr,Hr)}function Se(br,Fr,Hr){return tt(br,Ye,Fr,Hr)}function ot(br,Fr,Hr){return tt(br,Ee,Fr,Hr)}function ct(br){return qe[br.getDay()]}function pt(br){return Ke[br.getDay()]}function St(br){return yt[br.getMonth()]}function xt(br){return At[br.getMonth()]}function Pt(br){return Ge[+(br.getHours()>=12)]}function Xt(br){return 1+~~(br.getMonth()/3)}function or(br){return qe[br.getUTCDay()]}function Pr(br){return Ke[br.getUTCDay()]}function Ar(br){return yt[br.getUTCMonth()]}function Er(br){return At[br.getUTCMonth()]}function $r(br){return Ge[+(br.getUTCHours()>=12)]}function lr(br){return 1+~~(br.getUTCMonth()/3)}return{format:function(br){var Fr=hr(br+="",st);return Fr.toString=function(){return br},Fr},parse:function(br){var Fr=Sr(br+="",!1);return Fr.toString=function(){return br},Fr},utcFormat:function(br){var Fr=hr(br+="",rr);return Fr.toString=function(){return br},Fr},utcParse:function(br){var Fr=Sr(br+="",!0);return Fr.toString=function(){return br},Fr}}}var i={"-":"",_:" ",0:"0"},n=/^\s*\d+/,r=/^%/,v=/[\\^$*+?|[\]().{}]/g;function s(Xe,it,Ye){var Ee=Xe<0?"-":"",Ge=(Ee?-Xe:Xe)+"",Ke=Ge.length;return Ee+(Ke<Ye?new Array(Ye-Ke+1).join(it)+Ge:Ge)}function o(Xe){return Xe.replace(v,"\\$&")}function b(Xe){return new RegExp("^(?:"+Xe.map(o).join("|")+")","i")}function g(Xe){for(var it={},Ye=-1,Ee=Xe.length;++Ye<Ee;)it[Xe[Ye].toLowerCase()]=Ye;return it}function d(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+1));return Ee?(Xe.w=+Ee[0],Ye+Ee[0].length):-1}function f(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+1));return Ee?(Xe.u=+Ee[0],Ye+Ee[0].length):-1}function y(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.U=+Ee[0],Ye+Ee[0].length):-1}function l(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.V=+Ee[0],Ye+Ee[0].length):-1}function x(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.W=+Ee[0],Ye+Ee[0].length):-1}function c(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+4));return Ee?(Xe.y=+Ee[0],Ye+Ee[0].length):-1}function M(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.y=+Ee[0]+(+Ee[0]>68?1900:2e3),Ye+Ee[0].length):-1}function w(Xe,it,Ye){var Ee=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(it.slice(Ye,Ye+6));return Ee?(Xe.Z=Ee[1]?0:-(Ee[2]+(Ee[3]||"00")),Ye+Ee[0].length):-1}function p(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+1));return Ee?(Xe.q=Ee[0]*3-3,Ye+Ee[0].length):-1}function _(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.m=Ee[0]-1,Ye+Ee[0].length):-1}function h(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.d=+Ee[0],Ye+Ee[0].length):-1}function L(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+3));return Ee?(Xe.m=0,Xe.d=+Ee[0],Ye+Ee[0].length):-1}function E(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.H=+Ee[0],Ye+Ee[0].length):-1}function S(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.M=+Ee[0],Ye+Ee[0].length):-1}function P(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+2));return Ee?(Xe.S=+Ee[0],Ye+Ee[0].length):-1}function F(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+3));return Ee?(Xe.L=+Ee[0],Ye+Ee[0].length):-1}function I(Xe,it,Ye){var Ee=n.exec(it.slice(Ye,Ye+6));return Ee?(Xe.L=Math.floor(Ee[0]/1e3),Ye+Ee[0].length):-1}function D(Xe,it,Ye){var Ee=r.exec(it.slice(Ye,Ye+1));return Ee?Ye+Ee[0].length:-1}function R(Xe,it,Ye){var Ee=n.exec(it.slice(Ye));return Ee?(Xe.Q=+Ee[0],Ye+Ee[0].length):-1}function O(Xe,it,Ye){var Ee=n.exec(it.slice(Ye));return Ee?(Xe.s=+Ee[0],Ye+Ee[0].length):-1}function z(Xe,it){return s(Xe.getDate(),it,2)}function G(Xe,it){return s(Xe.getHours(),it,2)}function Y(Xe,it){return s(Xe.getHours()%12||12,it,2)}function ee(Xe,it){return s(1+u.timeDay.count(u.timeYear(Xe),Xe),it,3)}function j(Xe,it){return s(Xe.getMilliseconds(),it,3)}function X(Xe,it){return j(Xe,it)+"000"}function ie(Xe,it){return s(Xe.getMonth()+1,it,2)}function he(Xe,it){return s(Xe.getMinutes(),it,2)}function K(Xe,it){return s(Xe.getSeconds(),it,2)}function $(Xe){var it=Xe.getDay();return it===0?7:it}function U(Xe,it){return s(u.timeSunday.count(u.timeYear(Xe)-1,Xe),it,2)}function H(Xe,it){var Ye=Xe.getDay();return Xe=Ye>=4||Ye===0?u.timeThursday(Xe):u.timeThursday.ceil(Xe),s(u.timeThursday.count(u.timeYear(Xe),Xe)+(u.timeYear(Xe).getDay()===4),it,2)}function q(Xe){return Xe.getDay()}function re(Xe,it){return s(u.timeMonday.count(u.timeYear(Xe)-1,Xe),it,2)}function Z(Xe,it){return s(Xe.getFullYear()%100,it,2)}function Q(Xe,it){return s(Xe.getFullYear()%1e4,it,4)}function oe(Xe){var it=Xe.getTimezoneOffset();return(it>0?"-":(it*=-1,"+"))+s(it/60|0,"0",2)+s(it%60,"0",2)}function se(Xe,it){return s(Xe.getUTCDate(),it,2)}function ae(Xe,it){return s(Xe.getUTCHours(),it,2)}function le(Xe,it){return s(Xe.getUTCHours()%12||12,it,2)}function _e(Xe,it){return s(1+u.utcDay.count(u.utcYear(Xe),Xe),it,3)}function fe(Xe,it){return s(Xe.getUTCMilliseconds(),it,3)}function me(Xe,it){return fe(Xe,it)+"000"}function xe(Xe,it){return s(Xe.getUTCMonth()+1,it,2)}function ye(Xe,it){return s(Xe.getUTCMinutes(),it,2)}function be(Xe,it){return s(Xe.getUTCSeconds(),it,2)}function ke(Xe){var it=Xe.getUTCDay();return it===0?7:it}function De(Xe,it){return s(u.utcSunday.count(u.utcYear(Xe)-1,Xe),it,2)}function He(Xe,it){var Ye=Xe.getUTCDay();return Xe=Ye>=4||Ye===0?u.utcThursday(Xe):u.utcThursday.ceil(Xe),s(u.utcThursday.count(u.utcYear(Xe),Xe)+(u.utcYear(Xe).getUTCDay()===4),it,2)}function Ae(Xe){return Xe.getUTCDay()}function Le(Xe,it){return s(u.utcMonday.count(u.utcYear(Xe)-1,Xe),it,2)}function Ze(Xe,it){return s(Xe.getUTCFullYear()%100,it,2)}function We(Xe,it){return s(Xe.getUTCFullYear()%1e4,it,4)}function ze(){return"+0000"}function Ie(){return"%"}function Ve(Xe){return+Xe}function dt(Xe){return Math.floor(+Xe/1e3)}var Ft;Qt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qt(Xe){return Ft=a(Xe),m.timeFormat=Ft.format,m.timeParse=Ft.parse,m.utcFormat=Ft.utcFormat,m.utcParse=Ft.utcParse,Ft}var Ot="%Y-%m-%dT%H:%M:%S.%LZ";function Ct(Xe){return Xe.toISOString()}var jt=Date.prototype.toISOString?Ct:m.utcFormat(Ot);function Nt(Xe){var it=new Date(Xe);return isNaN(it)?null:it}var Lt=+new Date("2000-01-01T00:00:00.000Z")?Nt:m.utcParse(Ot);m.isoFormat=jt,m.isoParse=Lt,m.timeFormatDefaultLocale=Qt,m.timeFormatLocale=a,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=m||self,u(m.d3=m.d3||{}))})(this,function(m){var u=new Date,A=new Date;function T(Ae,Le,Ze,We){function ze(Ie){return Ae(Ie=arguments.length===0?new Date:new Date(+Ie)),Ie}return ze.floor=function(Ie){return Ae(Ie=new Date(+Ie)),Ie},ze.ceil=function(Ie){return Ae(Ie=new Date(Ie-1)),Le(Ie,1),Ae(Ie),Ie},ze.round=function(Ie){var Ve=ze(Ie),dt=ze.ceil(Ie);return Ie-Ve<dt-Ie?Ve:dt},ze.offset=function(Ie,Ve){return Le(Ie=new Date(+Ie),Ve==null?1:Math.floor(Ve)),Ie},ze.range=function(Ie,Ve,dt){var Ft=[],Qt;if(Ie=ze.ceil(Ie),dt=dt==null?1:Math.floor(dt),!(Ie<Ve)||!(dt>0))return Ft;do Ft.push(Qt=new Date(+Ie)),Le(Ie,dt),Ae(Ie);while(Qt<Ie&&Ie<Ve);return Ft},ze.filter=function(Ie){return T(function(Ve){if(Ve>=Ve)for(;Ae(Ve),!Ie(Ve);)Ve.setTime(Ve-1)},function(Ve,dt){if(Ve>=Ve)if(dt<0)for(;++dt<=0;)for(;Le(Ve,-1),!Ie(Ve););else for(;--dt>=0;)for(;Le(Ve,1),!Ie(Ve););})},Ze&&(ze.count=function(Ie,Ve){return u.setTime(+Ie),A.setTime(+Ve),Ae(u),Ae(A),Math.floor(Ze(u,A))},ze.every=function(Ie){return Ie=Math.floor(Ie),!isFinite(Ie)||!(Ie>0)?null:Ie>1?ze.filter(We?function(Ve){return We(Ve)%Ie===0}:function(Ve){return ze.count(0,Ve)%Ie===0}):ze}),ze}var e=T(function(){},function(Ae,Le){Ae.setTime(+Ae+Le)},function(Ae,Le){return Le-Ae});e.every=function(Ae){return Ae=Math.floor(Ae),!isFinite(Ae)||!(Ae>0)?null:Ae>1?T(function(Le){Le.setTime(Math.floor(Le/Ae)*Ae)},function(Le,Ze){Le.setTime(+Le+Ze*Ae)},function(Le,Ze){return(Ze-Le)/Ae}):e};var a=e.range,i=1e3,n=6e4,r=36e5,v=864e5,s=6048e5,o=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds())},function(Ae,Le){Ae.setTime(+Ae+Le*i)},function(Ae,Le){return(Le-Ae)/i},function(Ae){return Ae.getUTCSeconds()}),b=o.range,g=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*i)},function(Ae,Le){Ae.setTime(+Ae+Le*n)},function(Ae,Le){return(Le-Ae)/n},function(Ae){return Ae.getMinutes()}),d=g.range,f=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*i-Ae.getMinutes()*n)},function(Ae,Le){Ae.setTime(+Ae+Le*r)},function(Ae,Le){return(Le-Ae)/r},function(Ae){return Ae.getHours()}),y=f.range,l=T(function(Ae){Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setDate(Ae.getDate()+Le)},function(Ae,Le){return(Le-Ae-(Le.getTimezoneOffset()-Ae.getTimezoneOffset())*n)/v},function(Ae){return Ae.getDate()-1}),x=l.range;function c(Ae){return T(function(Le){Le.setDate(Le.getDate()-(Le.getDay()+7-Ae)%7),Le.setHours(0,0,0,0)},function(Le,Ze){Le.setDate(Le.getDate()+Ze*7)},function(Le,Ze){return(Ze-Le-(Ze.getTimezoneOffset()-Le.getTimezoneOffset())*n)/s})}var M=c(0),w=c(1),p=c(2),_=c(3),h=c(4),L=c(5),E=c(6),S=M.range,P=w.range,F=p.range,I=_.range,D=h.range,R=L.range,O=E.range,z=T(function(Ae){Ae.setDate(1),Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setMonth(Ae.getMonth()+Le)},function(Ae,Le){return Le.getMonth()-Ae.getMonth()+(Le.getFullYear()-Ae.getFullYear())*12},function(Ae){return Ae.getMonth()}),G=z.range,Y=T(function(Ae){Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setFullYear(Ae.getFullYear()+Le)},function(Ae,Le){return Le.getFullYear()-Ae.getFullYear()},function(Ae){return Ae.getFullYear()});Y.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:T(function(Le){Le.setFullYear(Math.floor(Le.getFullYear()/Ae)*Ae),Le.setMonth(0,1),Le.setHours(0,0,0,0)},function(Le,Ze){Le.setFullYear(Le.getFullYear()+Ze*Ae)})};var ee=Y.range,j=T(function(Ae){Ae.setUTCSeconds(0,0)},function(Ae,Le){Ae.setTime(+Ae+Le*n)},function(Ae,Le){return(Le-Ae)/n},function(Ae){return Ae.getUTCMinutes()}),X=j.range,ie=T(function(Ae){Ae.setUTCMinutes(0,0,0)},function(Ae,Le){Ae.setTime(+Ae+Le*r)},function(Ae,Le){return(Le-Ae)/r},function(Ae){return Ae.getUTCHours()}),he=ie.range,K=T(function(Ae){Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCDate(Ae.getUTCDate()+Le)},function(Ae,Le){return(Le-Ae)/v},function(Ae){return Ae.getUTCDate()-1}),$=K.range;function U(Ae){return T(function(Le){Le.setUTCDate(Le.getUTCDate()-(Le.getUTCDay()+7-Ae)%7),Le.setUTCHours(0,0,0,0)},function(Le,Ze){Le.setUTCDate(Le.getUTCDate()+Ze*7)},function(Le,Ze){return(Ze-Le)/s})}var H=U(0),q=U(1),re=U(2),Z=U(3),Q=U(4),oe=U(5),se=U(6),ae=H.range,le=q.range,_e=re.range,fe=Z.range,me=Q.range,xe=oe.range,ye=se.range,be=T(function(Ae){Ae.setUTCDate(1),Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCMonth(Ae.getUTCMonth()+Le)},function(Ae,Le){return Le.getUTCMonth()-Ae.getUTCMonth()+(Le.getUTCFullYear()-Ae.getUTCFullYear())*12},function(Ae){return Ae.getUTCMonth()}),ke=be.range,De=T(function(Ae){Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCFullYear(Ae.getUTCFullYear()+Le)},function(Ae,Le){return Le.getUTCFullYear()-Ae.getUTCFullYear()},function(Ae){return Ae.getUTCFullYear()});De.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:T(function(Le){Le.setUTCFullYear(Math.floor(Le.getUTCFullYear()/Ae)*Ae),Le.setUTCMonth(0,1),Le.setUTCHours(0,0,0,0)},function(Le,Ze){Le.setUTCFullYear(Le.getUTCFullYear()+Ze*Ae)})};var He=De.range;m.timeDay=l,m.timeDays=x,m.timeFriday=L,m.timeFridays=R,m.timeHour=f,m.timeHours=y,m.timeInterval=T,m.timeMillisecond=e,m.timeMilliseconds=a,m.timeMinute=g,m.timeMinutes=d,m.timeMonday=w,m.timeMondays=P,m.timeMonth=z,m.timeMonths=G,m.timeSaturday=E,m.timeSaturdays=O,m.timeSecond=o,m.timeSeconds=b,m.timeSunday=M,m.timeSundays=S,m.timeThursday=h,m.timeThursdays=D,m.timeTuesday=p,m.timeTuesdays=F,m.timeWednesday=_,m.timeWednesdays=I,m.timeWeek=M,m.timeWeeks=S,m.timeYear=Y,m.timeYears=ee,m.utcDay=K,m.utcDays=$,m.utcFriday=oe,m.utcFridays=xe,m.utcHour=ie,m.utcHours=he,m.utcMillisecond=e,m.utcMilliseconds=a,m.utcMinute=j,m.utcMinutes=X,m.utcMonday=q,m.utcMondays=le,m.utcMonth=be,m.utcMonths=ke,m.utcSaturday=se,m.utcSaturdays=ye,m.utcSecond=o,m.utcSeconds=b,m.utcSunday=H,m.utcSundays=ae,m.utcThursday=Q,m.utcThursdays=me,m.utcTuesday=re,m.utcTuesdays=_e,m.utcWednesday=Z,m.utcWednesdays=fe,m.utcWeek=H,m.utcWeeks=ae,m.utcYear=De,m.utcYears=He,Object.defineProperty(m,"__esModule",{value:!0})})},{}],122:[function(t,N,V){arguments[4][121][0].apply(V,arguments)},{dup:121}],123:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=m||self,u(m.d3=m.d3||{}))})(this,function(m){var u=0,A=0,T=0,e=1e3,a,i,n=0,r=0,v=0,s=typeof performance=="object"&&performance.now?performance:Date,o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(_){setTimeout(_,17)};function b(){return r||(o(g),r=s.now()+v)}function g(){r=0}function d(){this._call=this._time=this._next=null}d.prototype=f.prototype={constructor:d,restart:function(_,h,L){if(typeof _!="function")throw new TypeError("callback is not a function");L=(L==null?b():+L)+(h==null?0:+h),!this._next&&i!==this&&(i?i._next=this:a=this,i=this),this._call=_,this._time=L,M()},stop:function(){this._call&&(this._call=null,this._time=1/0,M())}};function f(_,h,L){var E=new d;return E.restart(_,h,L),E}function y(){b(),++u;for(var _=a,h;_;)(h=r-_._time)>=0&&_._call.call(null,h),_=_._next;--u}function l(){r=(n=s.now())+v,u=A=0;try{y()}finally{u=0,c(),r=0}}function x(){var _=s.now(),h=_-n;h>e&&(v-=h,n=_)}function c(){for(var _,h=a,L,E=1/0;h;)h._call?(E>h._time&&(E=h._time),_=h,h=h._next):(L=h._next,h._next=null,h=_?_._next=L:a=L);i=_,M(E)}function M(_){if(!u){A&&(A=clearTimeout(A));var h=_-r;h>24?(_<1/0&&(A=setTimeout(l,_-s.now()-v)),T&&(T=clearInterval(T))):(T||(n=s.now(),T=setInterval(x,e)),u=1,o(l))}}function w(_,h,L){var E=new d;return h=h==null?0:+h,E.restart(function(S){E.stop(),_(S+h)},h,L),E}function p(_,h,L){var E=new d,S=h;return h==null?(E.restart(_,h,L),E):(h=+h,L=L==null?b():+L,E.restart(function P(F){F+=S,E.restart(P,S+=h,L),_(F)},h,L),E)}m.interval=p,m.now=b,m.timeout=w,m.timer=f,m.timerFlush=y,Object.defineProperty(m,"__esModule",{value:!0})})},{}],124:[function(t,N,V){N.exports=function(){for(var m=0;m<arguments.length;m++)if(arguments[m]!==void 0)return arguments[m]}},{}],125:[function(t,N,V){N.exports=T;var m=T.canvas=document.createElement("canvas"),u=m.getContext("2d"),A=e([32,126]);T.createPairs=e,T.ascii=A;function T(a,i){Array.isArray(a)&&(a=a.join(", "));var n={},r,v=16,s=.05;i&&(i.length===2&&typeof i[0]=="number"?r=e(i):Array.isArray(i)?r=i:(i.o?r=e(i.o):i.pairs&&(r=i.pairs),i.fontSize&&(v=i.fontSize),i.threshold!=null&&(s=i.threshold))),r||(r=A),u.font=v+"px "+a;for(var o=0;o<r.length;o++){var b=r[o],g=u.measureText(b[0]).width+u.measureText(b[1]).width,d=u.measureText(b).width;if(Math.abs(g-d)>v*s){var f=(d-g)/v;n[b]=f*1e3}}return n}function e(a){for(var i=[],n=a[0];n<=a[1];n++)for(var r=String.fromCharCode(n),v=a[0];v<a[1];v++){var s=String.fromCharCode(v),o=r+s;i.push(o)}return i}},{}],126:[function(t,N,V){var m=t("abs-svg-path"),u=t("normalize-svg-path"),A={M:"moveTo",C:"bezierCurveTo"};N.exports=function(T,e){T.beginPath(),u(m(e)).forEach(function(a){var i=a[0],n=a.slice(1);T[A[i]].apply(T,n)}),T.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(t,N,V){N.exports=function(m){switch(m){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(t,N,V){function m(T,e,a){var i=T[a]|0;if(i<=0)return[];var n=new Array(i),r;if(a===T.length-1)for(r=0;r<i;++r)n[r]=e;else for(r=0;r<i;++r)n[r]=m(T,e,a+1);return n}function u(T,e){var a,i;for(a=new Array(T),i=0;i<T;++i)a[i]=e;return a}function A(T,e){switch(typeof e>"u"&&(e=0),typeof T){case"number":if(T>0)return u(T|0,e);break;case"object":if(typeof T.length=="number")return m(T,e,0);break}return[]}N.exports=A},{}],129:[function(t,N,V){N.exports=m,N.exports.default=m;function m(R,O,z){z=z||2;var G=O&&O.length,Y=G?O[0]*z:R.length,ee=u(R,0,Y,z,!0),j=[];if(!ee||ee.next===ee.prev)return j;var X,ie,he,K,$,U,H;if(G&&(ee=r(R,O,ee,z)),R.length>80*z){X=he=R[0],ie=K=R[1];for(var q=z;q<Y;q+=z)$=R[q],U=R[q+1],$<X&&(X=$),U<ie&&(ie=U),$>he&&(he=$),U>K&&(K=U);H=Math.max(he-X,K-ie),H=H!==0?1/H:0}return T(ee,j,z,X,ie,H),j}function u(R,O,z,G,Y){var ee,j;if(Y===D(R,O,z,G)>0)for(ee=O;ee<z;ee+=G)j=P(ee,R[ee],R[ee+1],j);else for(ee=z-G;ee>=O;ee-=G)j=P(ee,R[ee],R[ee+1],j);return j&&M(j,j.next)&&(F(j),j=j.next),j}function A(R,O){if(!R)return R;O||(O=R);var z=R,G;do if(G=!1,!z.steiner&&(M(z,z.next)||c(z.prev,z,z.next)===0)){if(F(z),z=O=z.prev,z===z.next)break;G=!0}else z=z.next;while(G||z!==O);return O}function T(R,O,z,G,Y,ee,j){if(!!R){!j&&ee&&g(R,G,Y,ee);for(var X=R,ie,he;R.prev!==R.next;){if(ie=R.prev,he=R.next,ee?a(R,G,Y,ee):e(R)){O.push(ie.i/z),O.push(R.i/z),O.push(he.i/z),F(R),R=he.next,X=he.next;continue}if(R=he,R===X){j?j===1?(R=i(A(R),O,z),T(R,O,z,G,Y,ee,2)):j===2&&n(R,O,z,G,Y,ee):T(A(R),O,z,G,Y,ee,1);break}}}}function e(R){var O=R.prev,z=R,G=R.next;if(c(O,z,G)>=0)return!1;for(var Y=R.next.next;Y!==R.prev;){if(l(O.x,O.y,z.x,z.y,G.x,G.y,Y.x,Y.y)&&c(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function a(R,O,z,G){var Y=R.prev,ee=R,j=R.next;if(c(Y,ee,j)>=0)return!1;for(var X=Y.x<ee.x?Y.x<j.x?Y.x:j.x:ee.x<j.x?ee.x:j.x,ie=Y.y<ee.y?Y.y<j.y?Y.y:j.y:ee.y<j.y?ee.y:j.y,he=Y.x>ee.x?Y.x>j.x?Y.x:j.x:ee.x>j.x?ee.x:j.x,K=Y.y>ee.y?Y.y>j.y?Y.y:j.y:ee.y>j.y?ee.y:j.y,$=f(X,ie,O,z,G),U=f(he,K,O,z,G),H=R.prevZ,q=R.nextZ;H&&H.z>=$&&q&&q.z<=U;){if(H!==R.prev&&H!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,H.x,H.y)&&c(H.prev,H,H.next)>=0||(H=H.prevZ,q!==R.prev&&q!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,q.x,q.y)&&c(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;H&&H.z>=$;){if(H!==R.prev&&H!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,H.x,H.y)&&c(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;q&&q.z<=U;){if(q!==R.prev&&q!==R.next&&l(Y.x,Y.y,ee.x,ee.y,j.x,j.y,q.x,q.y)&&c(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function i(R,O,z){var G=R;do{var Y=G.prev,ee=G.next.next;!M(Y,ee)&&w(Y,G,G.next,ee)&&L(Y,ee)&&L(ee,Y)&&(O.push(Y.i/z),O.push(G.i/z),O.push(ee.i/z),F(G),F(G.next),G=R=ee),G=G.next}while(G!==R);return A(G)}function n(R,O,z,G,Y,ee){var j=R;do{for(var X=j.next.next;X!==j.prev;){if(j.i!==X.i&&x(j,X)){var ie=S(j,X);j=A(j,j.next),ie=A(ie,ie.next),T(j,O,z,G,Y,ee),T(ie,O,z,G,Y,ee);return}X=X.next}j=j.next}while(j!==R)}function r(R,O,z,G){var Y=[],ee,j,X,ie,he;for(ee=0,j=O.length;ee<j;ee++)X=O[ee]*G,ie=ee<j-1?O[ee+1]*G:R.length,he=u(R,X,ie,G,!1),he===he.next&&(he.steiner=!0),Y.push(y(he));for(Y.sort(v),ee=0;ee<Y.length;ee++)s(Y[ee],z),z=A(z,z.next);return z}function v(R,O){return R.x-O.x}function s(R,O){if(O=o(R,O),O){var z=S(O,R);A(O,O.next),A(z,z.next)}}function o(R,O){var z=O,G=R.x,Y=R.y,ee=-1/0,j;do{if(Y<=z.y&&Y>=z.next.y&&z.next.y!==z.y){var X=z.x+(Y-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(X<=G&&X>ee){if(ee=X,X===G){if(Y===z.y)return z;if(Y===z.next.y)return z.next}j=z.x<z.next.x?z:z.next}}z=z.next}while(z!==O);if(!j)return null;if(G===ee)return j;var ie=j,he=j.x,K=j.y,$=1/0,U;z=j;do G>=z.x&&z.x>=he&&G!==z.x&&l(Y<K?G:ee,Y,he,K,Y<K?ee:G,Y,z.x,z.y)&&(U=Math.abs(Y-z.y)/(G-z.x),L(z,R)&&(U<$||U===$&&(z.x>j.x||z.x===j.x&&b(j,z)))&&(j=z,$=U)),z=z.next;while(z!==ie);return j}function b(R,O){return c(R.prev,R,O.prev)<0&&c(O.next,R,R.next)<0}function g(R,O,z,G){var Y=R;do Y.z===null&&(Y.z=f(Y.x,Y.y,O,z,G)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==R);Y.prevZ.nextZ=null,Y.prevZ=null,d(Y)}function d(R){var O,z,G,Y,ee,j,X,ie,he=1;do{for(z=R,R=null,ee=null,j=0;z;){for(j++,G=z,X=0,O=0;O<he&&(X++,G=G.nextZ,!!G);O++);for(ie=he;X>0||ie>0&&G;)X!==0&&(ie===0||!G||z.z<=G.z)?(Y=z,z=z.nextZ,X--):(Y=G,G=G.nextZ,ie--),ee?ee.nextZ=Y:R=Y,Y.prevZ=ee,ee=Y;z=G}ee.nextZ=null,he*=2}while(j>1);return R}function f(R,O,z,G,Y){return R=32767*(R-z)*Y,O=32767*(O-G)*Y,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,R|O<<1}function y(R){var O=R,z=R;do(O.x<z.x||O.x===z.x&&O.y<z.y)&&(z=O),O=O.next;while(O!==R);return z}function l(R,O,z,G,Y,ee,j,X){return(Y-j)*(O-X)-(R-j)*(ee-X)>=0&&(R-j)*(G-X)-(z-j)*(O-X)>=0&&(z-j)*(ee-X)-(Y-j)*(G-X)>=0}function x(R,O){return R.next.i!==O.i&&R.prev.i!==O.i&&!h(R,O)&&(L(R,O)&&L(O,R)&&E(R,O)&&(c(R.prev,R,O.prev)||c(R,O.prev,O))||M(R,O)&&c(R.prev,R,R.next)>0&&c(O.prev,O,O.next)>0)}function c(R,O,z){return(O.y-R.y)*(z.x-O.x)-(O.x-R.x)*(z.y-O.y)}function M(R,O){return R.x===O.x&&R.y===O.y}function w(R,O,z,G){var Y=_(c(R,O,z)),ee=_(c(R,O,G)),j=_(c(z,G,R)),X=_(c(z,G,O));return!!(Y!==ee&&j!==X||Y===0&&p(R,z,O)||ee===0&&p(R,G,O)||j===0&&p(z,R,G)||X===0&&p(z,O,G))}function p(R,O,z){return O.x<=Math.max(R.x,z.x)&&O.x>=Math.min(R.x,z.x)&&O.y<=Math.max(R.y,z.y)&&O.y>=Math.min(R.y,z.y)}function _(R){return R>0?1:R<0?-1:0}function h(R,O){var z=R;do{if(z.i!==R.i&&z.next.i!==R.i&&z.i!==O.i&&z.next.i!==O.i&&w(z,z.next,R,O))return!0;z=z.next}while(z!==R);return!1}function L(R,O){return c(R.prev,R,R.next)<0?c(R,O,R.next)>=0&&c(R,R.prev,O)>=0:c(R,O,R.prev)<0||c(R,R.next,O)<0}function E(R,O){var z=R,G=!1,Y=(R.x+O.x)/2,ee=(R.y+O.y)/2;do z.y>ee!=z.next.y>ee&&z.next.y!==z.y&&Y<(z.next.x-z.x)*(ee-z.y)/(z.next.y-z.y)+z.x&&(G=!G),z=z.next;while(z!==R);return G}function S(R,O){var z=new I(R.i,R.x,R.y),G=new I(O.i,O.x,O.y),Y=R.next,ee=O.prev;return R.next=O,O.prev=R,z.next=Y,Y.prev=z,G.next=z,z.prev=G,ee.next=G,G.prev=ee,G}function P(R,O,z,G){var Y=new I(R,O,z);return G?(Y.next=G.next,Y.prev=G,G.next.prev=Y,G.next=Y):(Y.prev=Y,Y.next=Y),Y}function F(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,O,z){this.i=R,this.x=O,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}m.deviation=function(R,O,z,G){var Y=O&&O.length,ee=Y?O[0]*z:R.length,j=Math.abs(D(R,0,ee,z));if(Y)for(var X=0,ie=O.length;X<ie;X++){var he=O[X]*z,K=X<ie-1?O[X+1]*z:R.length;j-=Math.abs(D(R,he,K,z))}var $=0;for(X=0;X<G.length;X+=3){var U=G[X]*z,H=G[X+1]*z,q=G[X+2]*z;$+=Math.abs((R[U]-R[q])*(R[H+1]-R[U+1])-(R[U]-R[H])*(R[q+1]-R[U+1]))}return j===0&&$===0?0:Math.abs(($-j)/j)};function D(R,O,z,G){for(var Y=0,ee=O,j=z-G;ee<z;ee+=G)Y+=(R[j]-R[ee])*(R[ee+1]+R[j+1]),j=ee;return Y}m.flatten=function(R){for(var O=R[0][0].length,z={vertices:[],holes:[],dimensions:O},G=0,Y=0;Y<R.length;Y++){for(var ee=0;ee<R[Y].length;ee++)for(var j=0;j<O;j++)z.vertices.push(R[Y][ee][j]);Y>0&&(G+=R[Y-1].length,z.holes.push(G))}return z}},{}],130:[function(t,N,V){var m=t("strongly-connected-components");N.exports=function(A,T){var e=[],a=[],i=[],n={},r=[],v;function s(M){i[M]=!1,n.hasOwnProperty(M)&&Object.keys(n[M]).forEach(function(w){delete n[M][w],i[w]&&s(w)})}function o(M){var w=!1;a.push(M),i[M]=!0;var p,_;for(p=0;p<r[M].length;p++)_=r[M][p],_===v?(b(v,a),w=!0):i[_]||(w=o(_));if(w)s(M);else for(p=0;p<r[M].length;p++){_=r[M][p];var h=n[_];h||(h={},n[_]=h),h[_]=!0}return a.pop(),w}function b(M,w){var p=[].concat(w).concat(M);T?T(o):e.push(p)}function g(M){for(var w=0;w<A.length;w++)w<M&&(A[w]=[]),A[w]=A[w].filter(function(p){return p>=M})}function d(M){g(M);for(var w=A,p=m(w),_=p.components.filter(function(I){return I.length>1}),h=1/0,L,E=0;E<_.length;E++)for(var S=0;S<_[E].length;S++)_[E][S]<h&&(h=_[E][S],L=E);var P=_[L];if(!P)return!1;var F=A.map(function(I,D){return P.indexOf(D)===-1?[]:I.filter(function(R){return P.indexOf(R)!==-1})});return{leastVertex:h,adjList:F}}v=0;for(var f=A.length;v<f;){var y=d(v);if(v=y.leastVertex,r=y.adjList,r){for(var l=0;l<r.length;l++)for(var x=0;x<r[l].length;x++){var c=r[l][x];i[+c]=!1,n[c]={}}o(v),v=v+1}else v=f}if(!T)return e}},{"strongly-connected-components":307}],131:[function(t,N,V){var m=t("../../object/valid-value");N.exports=function(){return m(this).length=0,this}},{"../../object/valid-value":162}],132:[function(t,N,V){N.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(t,N,V){N.exports=function(){var m=Array.from,u,A;return typeof m!="function"?!1:(u=["raz","dwa"],A=m(u),Boolean(A&&A!==u&&A[1]==="dwa"))}},{}],134:[function(t,N,V){var m=t("es6-symbol").iterator,u=t("../../function/is-arguments"),A=t("../../function/is-function"),T=t("../../number/to-pos-integer"),e=t("../../object/valid-callable"),a=t("../../object/valid-value"),i=t("../../object/is-value"),n=t("../../string/is-string"),r=Array.isArray,v=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;N.exports=function(b){var g=arguments[1],d=arguments[2],f,y,l,x,c,M,w,p,_,h;if(b=Object(a(b)),i(g)&&e(g),!this||this===Array||!A(this)){if(!g){if(u(b))return c=b.length,c!==1?Array.apply(null,b):(x=new Array(1),x[0]=b[0],x);if(r(b)){for(x=new Array(c=b.length),y=0;y<c;++y)x[y]=b[y];return x}}x=[]}else f=this;if(!r(b)){if((_=b[m])!==void 0){for(w=e(_).call(b),f&&(x=new f),p=w.next(),y=0;!p.done;)h=g?v.call(g,d,p.value,y):p.value,f?(s.value=h,o(x,y,s)):x[y]=h,p=w.next(),++y;c=y}else if(n(b)){for(c=b.length,f&&(x=new f),y=0,l=0;y<c;++y)h=b[y],y+1<c&&(M=h.charCodeAt(0),M>=55296&&M<=56319&&(h+=b[++y])),h=g?v.call(g,d,h,l):h,f?(s.value=h,o(x,l,s)):x[l]=h,++l;c=l}}if(c===void 0)for(c=T(b.length),f&&(x=new f(c)),y=0;y<c;++y)h=g?v.call(g,d,b[y],y):b[y],f?(s.value=h,o(x,y,s)):x[y]=h;return f&&(s.value=null,x.length=c),x}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(t,N,V){var m=Object.prototype.toString,u=m.call(function(){return arguments}());N.exports=function(A){return m.call(A)===u}},{}],136:[function(t,N,V){var m=Object.prototype.toString,u=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);N.exports=function(A){return typeof A=="function"&&u(m.call(A))}},{}],137:[function(t,N,V){N.exports=function(){}},{}],138:[function(t,N,V){N.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(t,N,V){N.exports=function(){var m=Math.sign;return typeof m!="function"?!1:m(10)===1&&m(-20)===-1}},{}],140:[function(t,N,V){N.exports=function(m){return m=Number(m),isNaN(m)||m===0?m:m>0?1:-1}},{}],141:[function(t,N,V){var m=t("../math/sign"),u=Math.abs,A=Math.floor;N.exports=function(T){return isNaN(T)?0:(T=Number(T),T===0||!isFinite(T)?T:m(T)*A(u(T)))}},{"../math/sign":138}],142:[function(t,N,V){var m=t("./to-integer"),u=Math.max;N.exports=function(A){return u(0,m(A))}},{"./to-integer":141}],143:[function(t,N,V){var m=t("./valid-callable"),u=t("./valid-value"),A=Function.prototype.bind,T=Function.prototype.call,e=Object.keys,a=Object.prototype.propertyIsEnumerable;N.exports=function(i,n){return function(r,v){var s,o=arguments[2],b=arguments[3];return r=Object(u(r)),m(v),s=e(r),b&&s.sort(typeof b=="function"?A.call(b,r):void 0),typeof i!="function"&&(i=s[i]),T.call(i,s,function(g,d){return a.call(r,g)?T.call(v,o,r[g],g,r,d):n})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(t,N,V){N.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(t,N,V){N.exports=function(){var m=Object.assign,u;return typeof m!="function"?!1:(u={foo:"raz"},m(u,{bar:"dwa"},{trzy:"trzy"}),u.foo+u.bar+u.trzy==="razdwatrzy")}},{}],146:[function(t,N,V){var m=t("../keys"),u=t("../valid-value"),A=Math.max;N.exports=function(T,e){var a,i,n=A(arguments.length,2),r;for(T=Object(u(T)),r=function(v){try{T[v]=e[v]}catch(s){a||(a=s)}},i=1;i<n;++i)e=arguments[i],m(e).forEach(r);if(a!==void 0)throw a;return T}},{"../keys":152,"../valid-value":162}],147:[function(t,N,V){var m=t("../array/from"),u=t("./assign"),A=t("./valid-value");N.exports=function(T){var e=Object(A(T)),a=arguments[1],i=Object(arguments[2]);if(e!==T&&!a)return e;var n={};return a?m(a,function(r){(i.ensure||r in T)&&(n[r]=T[r])}):u(n,T),n}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(t,N,V){var m=Object.create,u;t("./set-prototype-of/is-implemented")()||(u=t("./set-prototype-of/shim")),N.exports=function(){var A,T,e;return!u||u.level!==1?m:(A={},T={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){T[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}T[a]=e}),Object.defineProperties(A,T),Object.defineProperty(u,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:A}),function(a,i){return m(a===null?A:a,i)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(t,N,V){N.exports=t("./_iterate")("forEach")},{"./_iterate":143}],150:[function(t,N,V){var m=t("./is-value"),u={function:!0,object:!0};N.exports=function(A){return m(A)&&u[typeof A]||!1}},{"./is-value":151}],151:[function(t,N,V){var m=t("../function/noop")();N.exports=function(u){return u!==m&&u!==null}},{"../function/noop":137}],152:[function(t,N,V){N.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(t,N,V){N.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(t,N,V){var m=t("../is-value"),u=Object.keys;N.exports=function(A){return u(m(A)?Object(A):A)}},{"../is-value":151}],155:[function(t,N,V){var m=t("./valid-callable"),u=t("./for-each"),A=Function.prototype.call;N.exports=function(T,e){var a={},i=arguments[2];return m(e),u(T,function(n,r,v,s){a[r]=A.call(e,i,n,r,v,s)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(t,N,V){var m=t("./is-value"),u=Array.prototype.forEach,A=Object.create,T=function(e,a){var i;for(i in e)a[i]=e[i]};N.exports=function(e){var a=A(null);return u.call(arguments,function(i){!m(i)||T(Object(i),a)}),a}},{"./is-value":151}],157:[function(t,N,V){N.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(t,N,V){var m=Object.create,u=Object.getPrototypeOf,A={};N.exports=function(){var T=Object.setPrototypeOf,e=arguments[0]||m;return typeof T!="function"?!1:u(T(e(null),A))===A}},{}],159:[function(t,N,V){var m=t("../is-object"),u=t("../valid-value"),A=Object.prototype.isPrototypeOf,T=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(i,n){if(u(i),n===null||m(n))return i;throw new TypeError("Prototype must be null or an object")},N.exports=function(i){var n,r;return i?(i.level===2?i.set?(r=i.set,n=function(v,s){return r.call(a(v,s),s),v}):n=function(v,s){return a(v,s).__proto__=s,v}:n=function v(s,o){var b;return a(s,o),b=A.call(v.nullPolyfill,s),b&&delete v.nullPolyfill.__proto__,o===null&&(o=v.nullPolyfill),s.__proto__=o,b&&T(v.nullPolyfill,"__proto__",e),s},Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null}(function(){var i=Object.create(null),n={},r,v=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(v){try{r=v.set,r.call(i,n)}catch{}if(Object.getPrototypeOf(i)===n)return{set:r,level:2}}return i.__proto__=n,Object.getPrototypeOf(i)===n?{level:2}:(i={},i.__proto__=n,Object.getPrototypeOf(i)===n?{level:1}:!1)}()),t("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(t,N,V){N.exports=function(m){if(typeof m!="function")throw new TypeError(m+" is not a function");return m}},{}],161:[function(t,N,V){var m=t("./is-object");N.exports=function(u){if(!m(u))throw new TypeError(u+" is not an Object");return u}},{"./is-object":150}],162:[function(t,N,V){var m=t("./is-value");N.exports=function(u){if(!m(u))throw new TypeError("Cannot use null or undefined");return u}},{"./is-value":151}],163:[function(t,N,V){N.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(t,N,V){var m="razdwatrzy";N.exports=function(){return typeof m.contains!="function"?!1:m.contains("dwa")===!0&&m.contains("foo")===!1}},{}],165:[function(t,N,V){var m=String.prototype.indexOf;N.exports=function(u){return m.call(this,u,arguments[1])>-1}},{}],166:[function(t,N,V){var m=Object.prototype.toString,u=m.call("");N.exports=function(A){return typeof A=="string"||A&&typeof A=="object"&&(A instanceof String||m.call(A)===u)||!1}},{}],167:[function(t,N,V){var m=Object.create(null),u=Math.random;N.exports=function(){var A;do A=u().toString(36).slice(2);while(m[A]);return A}},{}],168:[function(t,N,V){var m=t("es5-ext/object/set-prototype-of"),u=t("es5-ext/string/#/contains"),A=t("d"),T=t("es6-symbol"),e=t("./"),a=Object.defineProperty,i;i=N.exports=function(n,r){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");e.call(this,n),r?u.call(r,"key+value")?r="key+value":u.call(r,"key")?r="key":r="value":r="value",a(this,"__kind__",A("",r))},m&&m(i,e),delete i.prototype.constructor,i.prototype=Object.create(e.prototype,{_resolve:A(function(n){return this.__kind__==="value"?this.__list__[n]:this.__kind__==="key+value"?[n,this.__list__[n]]:n})}),a(i.prototype,T.toStringTag,A("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(t,N,V){var m=t("es5-ext/function/is-arguments"),u=t("es5-ext/object/valid-callable"),A=t("es5-ext/string/is-string"),T=t("./get"),e=Array.isArray,a=Function.prototype.call,i=Array.prototype.some;N.exports=function(n,r){var v,s=arguments[2],o,b,g,d,f,y,l;if(e(n)||m(n)?v="array":A(n)?v="string":n=T(n),u(r),b=function(){g=!0},v==="array"){i.call(n,function(x){return a.call(r,s,x,b),g});return}if(v==="string"){for(f=n.length,d=0;d<f&&(y=n[d],d+1<f&&(l=y.charCodeAt(0),l>=55296&&l<=56319&&(y+=n[++d])),a.call(r,s,y,b),!g);++d);return}for(o=n.next();!o.done;){if(a.call(r,s,o.value,b),g)return;o=n.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(t,N,V){var m=t("es5-ext/function/is-arguments"),u=t("es5-ext/string/is-string"),A=t("./array"),T=t("./string"),e=t("./valid-iterable"),a=t("es6-symbol").iterator;N.exports=function(i){return typeof e(i)[a]=="function"?i[a]():m(i)?new A(i):u(i)?new T(i):new A(i)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(t,N,V){var m=t("es5-ext/array/#/clear"),u=t("es5-ext/object/assign"),A=t("es5-ext/object/valid-callable"),T=t("es5-ext/object/valid-value"),e=t("d"),a=t("d/auto-bind"),i=t("es6-symbol"),n=Object.defineProperty,r=Object.defineProperties,v;N.exports=v=function(s,o){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");r(this,{__list__:e("w",T(s)),__context__:e("w",o),__nextIndex__:e("w",0)}),o&&(A(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete v.prototype.constructor,r(v.prototype,u({_next:e(function(){var s;if(!!this.__list__){if(this.__redo__&&(s=this.__redo__.shift(),s!==void 0))return s;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:e(function(s){return this.__list__[s]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(s){if(!(s>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){n(this,"__redo__",e("c",[s]));return}this.__redo__.forEach(function(o,b){o>=s&&(this.__redo__[b]=++o)},this),this.__redo__.push(s)}}),_onDelete:e(function(s){var o;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(o=this.__redo__.indexOf(s),o!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(b,g){b>s&&(this.__redo__[g]=--b)},this)))}),_onClear:e(function(){this.__redo__&&m.call(this.__redo__),this.__nextIndex__=0})}))),n(v.prototype,i.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(t,N,V){var m=t("es5-ext/function/is-arguments"),u=t("es5-ext/object/is-value"),A=t("es5-ext/string/is-string"),T=t("es6-symbol").iterator,e=Array.isArray;N.exports=function(a){return u(a)?e(a)||A(a)||m(a)?!0:typeof a[T]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(t,N,V){var m=t("es5-ext/object/set-prototype-of"),u=t("d"),A=t("es6-symbol"),T=t("./"),e=Object.defineProperty,a;a=N.exports=function(i){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");i=String(i),T.call(this,i),e(this,"__length__",u("",i.length))},m&&m(a,T),delete a.prototype.constructor,a.prototype=Object.create(T.prototype,{_next:u(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:u(function(i){var n=this.__list__[i],r;return this.__nextIndex__===this.__length__?n:(r=n.charCodeAt(0),r>=55296&&r<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),e(a.prototype,A.toStringTag,u("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(t,N,V){var m=t("./is-iterable");N.exports=function(u){if(!m(u))throw new TypeError(u+" is not iterable");return u}},{"./is-iterable":172}],175:[function(t,N,V){N.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(t,N,V){var m=t("ext/global-this"),u={object:!0,symbol:!0};N.exports=function(){var A=m.Symbol,T;if(typeof A!="function")return!1;T=A("test symbol");try{String(T)}catch{return!1}return!(!u[typeof A.iterator]||!u[typeof A.toPrimitive]||!u[typeof A.toStringTag])}},{"ext/global-this":188}],177:[function(t,N,V){N.exports=function(m){return m?typeof m=="symbol"?!0:!m.constructor||m.constructor.name!=="Symbol"?!1:m[m.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(t,N,V){var m=t("d"),u=Object.create,A=Object.defineProperty,T=Object.prototype,e=u(null);N.exports=function(a){for(var i=0,n,r;e[a+(i||"")];)++i;return a+=i||"",e[a]=!0,n="@@"+a,A(T,n,m.gs(null,function(v){r||(r=!0,A(this,n,m(v)),r=!1)})),n}},{d:106}],179:[function(t,N,V){var m=t("d"),u=t("ext/global-this").Symbol;N.exports=function(A){return Object.defineProperties(A,{hasInstance:m("",u&&u.hasInstance||A("hasInstance")),isConcatSpreadable:m("",u&&u.isConcatSpreadable||A("isConcatSpreadable")),iterator:m("",u&&u.iterator||A("iterator")),match:m("",u&&u.match||A("match")),replace:m("",u&&u.replace||A("replace")),search:m("",u&&u.search||A("search")),species:m("",u&&u.species||A("species")),split:m("",u&&u.split||A("split")),toPrimitive:m("",u&&u.toPrimitive||A("toPrimitive")),toStringTag:m("",u&&u.toStringTag||A("toStringTag")),unscopables:m("",u&&u.unscopables||A("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(t,N,V){var m=t("d"),u=t("../../../validate-symbol"),A=Object.create(null);N.exports=function(T){return Object.defineProperties(T,{for:m(function(e){return A[e]?A[e]:A[e]=T(String(e))}),keyFor:m(function(e){var a;u(e);for(a in A)if(A[a]===e)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(t,N,V){var m=t("d"),u=t("./validate-symbol"),A=t("ext/global-this").Symbol,T=t("./lib/private/generate-name"),e=t("./lib/private/setup/standard-symbols"),a=t("./lib/private/setup/symbol-registry"),i=Object.create,n=Object.defineProperties,r=Object.defineProperty,v,s,o;if(typeof A=="function")try{String(A()),o=!0}catch{}else A=null;s=function(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return v(g)},N.exports=v=function b(g){var d;if(this instanceof b)throw new TypeError("Symbol is not a constructor");return o?A(g):(d=i(s.prototype),g=g===void 0?"":String(g),n(d,{__description__:m("",g),__name__:m("",T(g))}))},e(v),a(v),n(s.prototype,{constructor:m(v),toString:m("",function(){return this.__name__})}),n(v.prototype,{toString:m(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:m(function(){return u(this)})}),r(v.prototype,v.toPrimitive,m("",function(){var b=u(this);return typeof b=="symbol"?b:b.toString()})),r(v.prototype,v.toStringTag,m("c","Symbol")),r(s.prototype,v.toStringTag,m("c",v.prototype[v.toStringTag])),r(s.prototype,v.toPrimitive,m("c",v.prototype[v.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(t,N,V){var m=t("./is-symbol");N.exports=function(u){if(!m(u))throw new TypeError(u+" is not a symbol");return u}},{"./is-symbol":177}],183:[function(t,N,V){N.exports=t("./is-implemented")()?WeakMap:t("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(t,N,V){N.exports=function(){var m,u;if(typeof WeakMap!="function")return!1;try{m=new WeakMap([[u={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(m)!=="[object WeakMap]"||typeof m.set!="function"||m.set({},1)!==m||typeof m.delete!="function"||typeof m.has!="function"||m.get(u)!=="one")}},{}],185:[function(t,N,V){N.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(t,N,V){var m=t("es5-ext/object/is-value"),u=t("es5-ext/object/set-prototype-of"),A=t("es5-ext/object/valid-object"),T=t("es5-ext/object/valid-value"),e=t("es5-ext/string/random-uniq"),a=t("d"),i=t("es6-iterator/get"),n=t("es6-iterator/for-of"),r=t("es6-symbol").toStringTag,v=t("./is-native-implemented"),s=Array.isArray,o=Object.defineProperty,b=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf,d;N.exports=d=function(){var f=arguments[0],y;if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return y=v&&u&&WeakMap!==d?u(new WeakMap,g(this)):this,m(f)&&(s(f)||(f=i(f))),o(y,"__weakMapData__",a("c","$weakMap$"+e())),f&&n(f,function(l){T(l),y.set(l[0],l[1])}),y},v&&(u&&u(d,WeakMap),d.prototype=Object.create(WeakMap.prototype,{constructor:a(d)})),Object.defineProperties(d.prototype,{delete:a(function(f){return b.call(A(f),this.__weakMapData__)?(delete f[this.__weakMapData__],!0):!1}),get:a(function(f){if(!!b.call(A(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:a(function(f){return b.call(A(f),this.__weakMapData__)}),set:a(function(f,y){return o(A(f),this.__weakMapData__,a("c",y)),this}),toString:a(function(){return"[object WeakMap]"})}),o(d.prototype,r,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(t,N,V){var m=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};N.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return m()}try{return __global__||m()}finally{delete Object.prototype.__global__}}()},{}],188:[function(t,N,V){N.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(t,N,V){N.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(t,N,V){var m=t("is-string-blank");N.exports=function(u){var A=typeof u;if(A==="string"){var T=u;if(u=+u,u===0&&m(T))return!1}else if(A!=="number")return!1;return u-u<1}},{"is-string-blank":237}],191:[function(t,N,V){var m=t("dtype");N.exports=u;function u(A,T,e){if(!A)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(A)&&A[0]&&typeof A[0][0]=="number"){var a=A[0].length,i=A.length*a,n,r,v,s;(!T||typeof T=="string")&&(T=new(m(T||"float32"))(i+e));var o=T.length-e;if(i!==o)throw new Error("source length "+i+" ("+a+"x"+A.length+") does not match destination length "+o);for(n=0,v=e;n<A.length;n++)for(r=0;r<a;r++)T[v++]=A[n][r]===null?NaN:A[n][r]}else if(!T||typeof T=="string"){var b=m(T||"float32");if(Array.isArray(A)||T==="array")for(T=new b(A.length+e),n=0,v=e,s=T.length;v<s;v++,n++)T[v]=A[n]===null?NaN:A[n];else e===0?T=new b(A):(T=new b(A.length+e),T.set(A,e))}else T.set(A,e);return T}},{dtype:127}],192:[function(t,N,V){var m=t("css-font/stringify"),u=[32,126];N.exports=A;function A(T){T=T||{};var e=T.shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],a=T.canvas||document.createElement("canvas"),i=T.font,n=typeof T.step=="number"?[T.step,T.step]:T.step||[32,32],r=T.chars||u;if(i&&typeof i!="string"&&(i=m(i)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var v=[],s=r[0],o=0;s<=r[1];s++)v[o++]=String.fromCharCode(s);r=v}e=e.slice(),a.width=e[0],a.height=e[1];var b=a.getContext("2d");b.fillStyle="#000",b.fillRect(0,0,a.width,a.height),b.font=i,b.textAlign="center",b.textBaseline="middle",b.fillStyle="#fff";for(var g=n[0]/2,d=n[1]/2,s=0;s<r.length;s++)b.fillText(r[s],g,d),(g+=n[0])>e[0]-n[0]/2&&(g=n[0]/2,d+=n[1]);return a}},{"css-font/stringify":102}],193:[function(t,N,V){N.exports=m,m.canvas=document.createElement("canvas"),m.cache={};function m(s,a){a||(a={}),(typeof s=="string"||Array.isArray(s))&&(a.family=s);var i=Array.isArray(a.family)?a.family.join(", "):a.family;if(!i)throw Error("`family` must be defined");var n=a.size||a.fontSize||a.em||48,r=a.weight||a.fontWeight||"",v=a.style||a.fontStyle||"",s=[v,r,n].join(" ")+"px "+i,o=a.origin||"top";if(m.cache[i]&&n<=m.cache[i].em)return u(m.cache[i],o);var b=a.canvas||m.canvas,g=b.getContext("2d"),d={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},f=Math.ceil(n*1.5);b.height=f,b.width=f*.5,g.font=s;var y="H",l={top:0};g.clearRect(0,0,f,f),g.textBaseline="top",g.fillStyle="black",g.fillText(y,0,0);var x=A(g.getImageData(0,0,f,f));g.clearRect(0,0,f,f),g.textBaseline="bottom",g.fillText(y,0,f);var c=A(g.getImageData(0,0,f,f));l.lineHeight=l.bottom=f-c+x,g.clearRect(0,0,f,f),g.textBaseline="alphabetic",g.fillText(y,0,f);var M=A(g.getImageData(0,0,f,f)),w=f-M-1+x;l.baseline=l.alphabetic=w,g.clearRect(0,0,f,f),g.textBaseline="middle",g.fillText(y,0,f*.5);var p=A(g.getImageData(0,0,f,f));l.median=l.middle=f-p-1+x-f*.5,g.clearRect(0,0,f,f),g.textBaseline="hanging",g.fillText(y,0,f*.5);var _=A(g.getImageData(0,0,f,f));l.hanging=f-_-1+x-f*.5,g.clearRect(0,0,f,f),g.textBaseline="ideographic",g.fillText(y,0,f);var h=A(g.getImageData(0,0,f,f));if(l.ideographic=f-h-1+x,d.upper&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.upper,0,0),l.upper=A(g.getImageData(0,0,f,f)),l.capHeight=l.baseline-l.upper),d.lower&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.lower,0,0),l.lower=A(g.getImageData(0,0,f,f)),l.xHeight=l.baseline-l.lower),d.tittle&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.tittle,0,0),l.tittle=A(g.getImageData(0,0,f,f))),d.ascent&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.ascent,0,0),l.ascent=A(g.getImageData(0,0,f,f))),d.descent&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.descent,0,0),l.descent=T(g.getImageData(0,0,f,f))),d.overshoot){g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.overshoot,0,0);var L=T(g.getImageData(0,0,f,f));l.overshoot=L-w}for(var E in l)l[E]/=n;return l.em=n,m.cache[i]=l,u(l,o)}function u(e,a){var i={};typeof a=="string"&&(a=e[a]);for(var n in e)n!=="em"&&(i[n]=e[n]-a);return i}function A(e){for(var a=e.height,i=e.data,n=3;n<i.length;n+=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}function T(e){for(var a=e.height,i=e.data,n=i.length-1;n>0;n-=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}},{}],194:[function(t,N,V){N.exports=m;function m(u,A){if(typeof u!="string")throw new TypeError("must specify type string");if(A=A||{},typeof document>"u"&&!A.canvas)return null;var T=A.canvas||document.createElement("canvas");typeof A.width=="number"&&(T.width=A.width),typeof A.height=="number"&&(T.height=A.height);var e=A,a;try{var i=[u];u.indexOf("webgl")===0&&i.push("experimental-"+u);for(var n=0;n<i.length;n++)if(a=T.getContext(i[n],e),a)return a}catch{a=null}return a||null}},{}],195:[function(t,N,V){N.exports=m;function m(u,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=A[4],r=A[5],v=A[6],s=A[7],o=A[8],b=A[9],g=A[10],d=A[11],f=A[12],y=A[13],l=A[14],x=A[15];return u[0]=r*(g*x-d*l)-b*(v*x-s*l)+y*(v*d-s*g),u[1]=-(e*(g*x-d*l)-b*(a*x-i*l)+y*(a*d-i*g)),u[2]=e*(v*x-s*l)-r*(a*x-i*l)+y*(a*s-i*v),u[3]=-(e*(v*d-s*g)-r*(a*d-i*g)+b*(a*s-i*v)),u[4]=-(n*(g*x-d*l)-o*(v*x-s*l)+f*(v*d-s*g)),u[5]=T*(g*x-d*l)-o*(a*x-i*l)+f*(a*d-i*g),u[6]=-(T*(v*x-s*l)-n*(a*x-i*l)+f*(a*s-i*v)),u[7]=T*(v*d-s*g)-n*(a*d-i*g)+o*(a*s-i*v),u[8]=n*(b*x-d*y)-o*(r*x-s*y)+f*(r*d-s*b),u[9]=-(T*(b*x-d*y)-o*(e*x-i*y)+f*(e*d-i*b)),u[10]=T*(r*x-s*y)-n*(e*x-i*y)+f*(e*s-i*r),u[11]=-(T*(r*d-s*b)-n*(e*d-i*b)+o*(e*s-i*r)),u[12]=-(n*(b*l-g*y)-o*(r*l-v*y)+f*(r*g-v*b)),u[13]=T*(b*l-g*y)-o*(e*l-a*y)+f*(e*g-a*b),u[14]=-(T*(r*l-v*y)-n*(e*l-a*y)+f*(e*v-a*r)),u[15]=T*(r*g-v*b)-n*(e*g-a*b)+o*(e*v-a*r),u}},{}],196:[function(t,N,V){N.exports=m;function m(u){var A=new Float32Array(16);return A[0]=u[0],A[1]=u[1],A[2]=u[2],A[3]=u[3],A[4]=u[4],A[5]=u[5],A[6]=u[6],A[7]=u[7],A[8]=u[8],A[9]=u[9],A[10]=u[10],A[11]=u[11],A[12]=u[12],A[13]=u[13],A[14]=u[14],A[15]=u[15],A}},{}],197:[function(t,N,V){N.exports=m;function m(u,A){return u[0]=A[0],u[1]=A[1],u[2]=A[2],u[3]=A[3],u[4]=A[4],u[5]=A[5],u[6]=A[6],u[7]=A[7],u[8]=A[8],u[9]=A[9],u[10]=A[10],u[11]=A[11],u[12]=A[12],u[13]=A[13],u[14]=A[14],u[15]=A[15],u}},{}],198:[function(t,N,V){N.exports=m;function m(){var u=new Float32Array(16);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}},{}],199:[function(t,N,V){N.exports=m;function m(u){var A=u[0],T=u[1],e=u[2],a=u[3],i=u[4],n=u[5],r=u[6],v=u[7],s=u[8],o=u[9],b=u[10],g=u[11],d=u[12],f=u[13],y=u[14],l=u[15],x=A*n-T*i,c=A*r-e*i,M=A*v-a*i,w=T*r-e*n,p=T*v-a*n,_=e*v-a*r,h=s*f-o*d,L=s*y-b*d,E=s*l-g*d,S=o*y-b*f,P=o*l-g*f,F=b*l-g*y;return x*F-c*P+M*S+w*E-p*L+_*h}},{}],200:[function(t,N,V){N.exports=m;function m(u,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=T+T,r=e+e,v=a+a,s=T*n,o=e*n,b=e*r,g=a*n,d=a*r,f=a*v,y=i*n,l=i*r,x=i*v;return u[0]=1-b-f,u[1]=o+x,u[2]=g-l,u[3]=0,u[4]=o-x,u[5]=1-s-f,u[6]=d+y,u[7]=0,u[8]=g+l,u[9]=d-y,u[10]=1-s-b,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}},{}],201:[function(t,N,V){N.exports=m;function m(u,A,T){var e,a,i,n=T[0],r=T[1],v=T[2],s=Math.sqrt(n*n+r*r+v*v);return Math.abs(s)<1e-6?null:(s=1/s,n*=s,r*=s,v*=s,e=Math.sin(A),a=Math.cos(A),i=1-a,u[0]=n*n*i+a,u[1]=r*n*i+v*e,u[2]=v*n*i-r*e,u[3]=0,u[4]=n*r*i-v*e,u[5]=r*r*i+a,u[6]=v*r*i+n*e,u[7]=0,u[8]=n*v*i+r*e,u[9]=r*v*i-n*e,u[10]=v*v*i+a,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u)}},{}],202:[function(t,N,V){N.exports=m;function m(u,A,T){var e=A[0],a=A[1],i=A[2],n=A[3],r=e+e,v=a+a,s=i+i,o=e*r,b=e*v,g=e*s,d=a*v,f=a*s,y=i*s,l=n*r,x=n*v,c=n*s;return u[0]=1-(d+y),u[1]=b+c,u[2]=g-x,u[3]=0,u[4]=b-c,u[5]=1-(o+y),u[6]=f+l,u[7]=0,u[8]=g+x,u[9]=f-l,u[10]=1-(o+d),u[11]=0,u[12]=T[0],u[13]=T[1],u[14]=T[2],u[15]=1,u}},{}],203:[function(t,N,V){N.exports=m;function m(u,A){return u[0]=A[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=A[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=A[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}},{}],204:[function(t,N,V){N.exports=m;function m(u,A){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=A[0],u[13]=A[1],u[14]=A[2],u[15]=1,u}},{}],205:[function(t,N,V){N.exports=m;function m(u,A){var T=Math.sin(A),e=Math.cos(A);return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=e,u[6]=T,u[7]=0,u[8]=0,u[9]=-T,u[10]=e,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}},{}],206:[function(t,N,V){N.exports=m;function m(u,A){var T=Math.sin(A),e=Math.cos(A);return u[0]=e,u[1]=0,u[2]=-T,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=T,u[9]=0,u[10]=e,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}},{}],207:[function(t,N,V){N.exports=m;function m(u,A){var T=Math.sin(A),e=Math.cos(A);return u[0]=e,u[1]=T,u[2]=0,u[3]=0,u[4]=-T,u[5]=e,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}},{}],208:[function(t,N,V){N.exports=m;function m(u,A,T,e,a,i,n){var r=1/(T-A),v=1/(a-e),s=1/(i-n);return u[0]=i*2*r,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i*2*v,u[6]=0,u[7]=0,u[8]=(T+A)*r,u[9]=(a+e)*v,u[10]=(n+i)*s,u[11]=-1,u[12]=0,u[13]=0,u[14]=n*i*2*s,u[15]=0,u}},{}],209:[function(t,N,V){N.exports=m;function m(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}},{}],210:[function(t,N,V){N.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(t,N,V){N.exports=m;function m(u,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=A[4],r=A[5],v=A[6],s=A[7],o=A[8],b=A[9],g=A[10],d=A[11],f=A[12],y=A[13],l=A[14],x=A[15],c=T*r-e*n,M=T*v-a*n,w=T*s-i*n,p=e*v-a*r,_=e*s-i*r,h=a*s-i*v,L=o*y-b*f,E=o*l-g*f,S=o*x-d*f,P=b*l-g*y,F=b*x-d*y,I=g*x-d*l,D=c*I-M*F+w*P+p*S-_*E+h*L;return D?(D=1/D,u[0]=(r*I-v*F+s*P)*D,u[1]=(a*F-e*I-i*P)*D,u[2]=(y*h-l*_+x*p)*D,u[3]=(g*_-b*h-d*p)*D,u[4]=(v*S-n*I-s*E)*D,u[5]=(T*I-a*S+i*E)*D,u[6]=(l*w-f*h-x*M)*D,u[7]=(o*h-g*w+d*M)*D,u[8]=(n*F-r*S+s*L)*D,u[9]=(e*S-T*F-i*L)*D,u[10]=(f*_-y*w+x*c)*D,u[11]=(b*w-o*_-d*c)*D,u[12]=(r*E-n*P-v*L)*D,u[13]=(T*P-e*E+a*L)*D,u[14]=(y*M-f*p-l*c)*D,u[15]=(o*p-b*M+g*c)*D,u):null}},{}],212:[function(t,N,V){var m=t("./identity");N.exports=u;function u(A,T,e,a){var i,n,r,v,s,o,b,g,d,f,y=T[0],l=T[1],x=T[2],c=a[0],M=a[1],w=a[2],p=e[0],_=e[1],h=e[2];return Math.abs(y-p)<1e-6&&Math.abs(l-_)<1e-6&&Math.abs(x-h)<1e-6?m(A):(b=y-p,g=l-_,d=x-h,f=1/Math.sqrt(b*b+g*g+d*d),b*=f,g*=f,d*=f,i=M*d-w*g,n=w*b-c*d,r=c*g-M*b,f=Math.sqrt(i*i+n*n+r*r),f?(f=1/f,i*=f,n*=f,r*=f):(i=0,n=0,r=0),v=g*r-d*n,s=d*i-b*r,o=b*n-g*i,f=Math.sqrt(v*v+s*s+o*o),f?(f=1/f,v*=f,s*=f,o*=f):(v=0,s=0,o=0),A[0]=i,A[1]=v,A[2]=b,A[3]=0,A[4]=n,A[5]=s,A[6]=g,A[7]=0,A[8]=r,A[9]=o,A[10]=d,A[11]=0,A[12]=-(i*y+n*l+r*x),A[13]=-(v*y+s*l+o*x),A[14]=-(b*y+g*l+d*x),A[15]=1,A)}},{"./identity":209}],213:[function(t,N,V){N.exports=m;function m(u,A,T){var e=A[0],a=A[1],i=A[2],n=A[3],r=A[4],v=A[5],s=A[6],o=A[7],b=A[8],g=A[9],d=A[10],f=A[11],y=A[12],l=A[13],x=A[14],c=A[15],M=T[0],w=T[1],p=T[2],_=T[3];return u[0]=M*e+w*r+p*b+_*y,u[1]=M*a+w*v+p*g+_*l,u[2]=M*i+w*s+p*d+_*x,u[3]=M*n+w*o+p*f+_*c,M=T[4],w=T[5],p=T[6],_=T[7],u[4]=M*e+w*r+p*b+_*y,u[5]=M*a+w*v+p*g+_*l,u[6]=M*i+w*s+p*d+_*x,u[7]=M*n+w*o+p*f+_*c,M=T[8],w=T[9],p=T[10],_=T[11],u[8]=M*e+w*r+p*b+_*y,u[9]=M*a+w*v+p*g+_*l,u[10]=M*i+w*s+p*d+_*x,u[11]=M*n+w*o+p*f+_*c,M=T[12],w=T[13],p=T[14],_=T[15],u[12]=M*e+w*r+p*b+_*y,u[13]=M*a+w*v+p*g+_*l,u[14]=M*i+w*s+p*d+_*x,u[15]=M*n+w*o+p*f+_*c,u}},{}],214:[function(t,N,V){N.exports=m;function m(u,A,T,e,a,i,n){var r=1/(A-T),v=1/(e-a),s=1/(i-n);return u[0]=-2*r,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*v,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*s,u[11]=0,u[12]=(A+T)*r,u[13]=(a+e)*v,u[14]=(n+i)*s,u[15]=1,u}},{}],215:[function(t,N,V){N.exports=m;function m(u,A,T,e,a){var i=1/Math.tan(A/2),n=1/(e-a);return u[0]=i/T,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=(a+e)*n,u[11]=-1,u[12]=0,u[13]=0,u[14]=2*a*e*n,u[15]=0,u}},{}],216:[function(t,N,V){N.exports=m;function m(u,A,T,e){var a=Math.tan(A.upDegrees*Math.PI/180),i=Math.tan(A.downDegrees*Math.PI/180),n=Math.tan(A.leftDegrees*Math.PI/180),r=Math.tan(A.rightDegrees*Math.PI/180),v=2/(n+r),s=2/(a+i);return u[0]=v,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=s,u[6]=0,u[7]=0,u[8]=-((n-r)*v*.5),u[9]=(a-i)*s*.5,u[10]=e/(T-e),u[11]=-1,u[12]=0,u[13]=0,u[14]=e*T/(T-e),u[15]=0,u}},{}],217:[function(t,N,V){N.exports=m;function m(u,A,T,e){var a=e[0],i=e[1],n=e[2],r=Math.sqrt(a*a+i*i+n*n),v,s,o,b,g,d,f,y,l,x,c,M,w,p,_,h,L,E,S,P,F,I,D,R;return Math.abs(r)<1e-6?null:(r=1/r,a*=r,i*=r,n*=r,v=Math.sin(T),s=Math.cos(T),o=1-s,b=A[0],g=A[1],d=A[2],f=A[3],y=A[4],l=A[5],x=A[6],c=A[7],M=A[8],w=A[9],p=A[10],_=A[11],h=a*a*o+s,L=i*a*o+n*v,E=n*a*o-i*v,S=a*i*o-n*v,P=i*i*o+s,F=n*i*o+a*v,I=a*n*o+i*v,D=i*n*o-a*v,R=n*n*o+s,u[0]=b*h+y*L+M*E,u[1]=g*h+l*L+w*E,u[2]=d*h+x*L+p*E,u[3]=f*h+c*L+_*E,u[4]=b*S+y*P+M*F,u[5]=g*S+l*P+w*F,u[6]=d*S+x*P+p*F,u[7]=f*S+c*P+_*F,u[8]=b*I+y*D+M*R,u[9]=g*I+l*D+w*R,u[10]=d*I+x*D+p*R,u[11]=f*I+c*D+_*R,A!==u&&(u[12]=A[12],u[13]=A[13],u[14]=A[14],u[15]=A[15]),u)}},{}],218:[function(t,N,V){N.exports=m;function m(u,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[4],n=A[5],r=A[6],v=A[7],s=A[8],o=A[9],b=A[10],g=A[11];return A!==u&&(u[0]=A[0],u[1]=A[1],u[2]=A[2],u[3]=A[3],u[12]=A[12],u[13]=A[13],u[14]=A[14],u[15]=A[15]),u[4]=i*a+s*e,u[5]=n*a+o*e,u[6]=r*a+b*e,u[7]=v*a+g*e,u[8]=s*a-i*e,u[9]=o*a-n*e,u[10]=b*a-r*e,u[11]=g*a-v*e,u}},{}],219:[function(t,N,V){N.exports=m;function m(u,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[0],n=A[1],r=A[2],v=A[3],s=A[8],o=A[9],b=A[10],g=A[11];return A!==u&&(u[4]=A[4],u[5]=A[5],u[6]=A[6],u[7]=A[7],u[12]=A[12],u[13]=A[13],u[14]=A[14],u[15]=A[15]),u[0]=i*a-s*e,u[1]=n*a-o*e,u[2]=r*a-b*e,u[3]=v*a-g*e,u[8]=i*e+s*a,u[9]=n*e+o*a,u[10]=r*e+b*a,u[11]=v*e+g*a,u}},{}],220:[function(t,N,V){N.exports=m;function m(u,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[0],n=A[1],r=A[2],v=A[3],s=A[4],o=A[5],b=A[6],g=A[7];return A!==u&&(u[8]=A[8],u[9]=A[9],u[10]=A[10],u[11]=A[11],u[12]=A[12],u[13]=A[13],u[14]=A[14],u[15]=A[15]),u[0]=i*a+s*e,u[1]=n*a+o*e,u[2]=r*a+b*e,u[3]=v*a+g*e,u[4]=s*a-i*e,u[5]=o*a-n*e,u[6]=b*a-r*e,u[7]=g*a-v*e,u}},{}],221:[function(t,N,V){N.exports=m;function m(u,A,T){var e=T[0],a=T[1],i=T[2];return u[0]=A[0]*e,u[1]=A[1]*e,u[2]=A[2]*e,u[3]=A[3]*e,u[4]=A[4]*a,u[5]=A[5]*a,u[6]=A[6]*a,u[7]=A[7]*a,u[8]=A[8]*i,u[9]=A[9]*i,u[10]=A[10]*i,u[11]=A[11]*i,u[12]=A[12],u[13]=A[13],u[14]=A[14],u[15]=A[15],u}},{}],222:[function(t,N,V){N.exports=m;function m(u){return"mat4("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+", "+u[6]+", "+u[7]+", "+u[8]+", "+u[9]+", "+u[10]+", "+u[11]+", "+u[12]+", "+u[13]+", "+u[14]+", "+u[15]+")"}},{}],223:[function(t,N,V){N.exports=m;function m(u,A,T){var e=T[0],a=T[1],i=T[2],n,r,v,s,o,b,g,d,f,y,l,x;return A===u?(u[12]=A[0]*e+A[4]*a+A[8]*i+A[12],u[13]=A[1]*e+A[5]*a+A[9]*i+A[13],u[14]=A[2]*e+A[6]*a+A[10]*i+A[14],u[15]=A[3]*e+A[7]*a+A[11]*i+A[15]):(n=A[0],r=A[1],v=A[2],s=A[3],o=A[4],b=A[5],g=A[6],d=A[7],f=A[8],y=A[9],l=A[10],x=A[11],u[0]=n,u[1]=r,u[2]=v,u[3]=s,u[4]=o,u[5]=b,u[6]=g,u[7]=d,u[8]=f,u[9]=y,u[10]=l,u[11]=x,u[12]=n*e+o*a+f*i+A[12],u[13]=r*e+b*a+y*i+A[13],u[14]=v*e+g*a+l*i+A[14],u[15]=s*e+d*a+x*i+A[15]),u}},{}],224:[function(t,N,V){N.exports=m;function m(u,A){if(u===A){var T=A[1],e=A[2],a=A[3],i=A[6],n=A[7],r=A[11];u[1]=A[4],u[2]=A[8],u[3]=A[12],u[4]=T,u[6]=A[9],u[7]=A[13],u[8]=e,u[9]=i,u[11]=A[14],u[12]=a,u[13]=n,u[14]=r}else u[0]=A[0],u[1]=A[4],u[2]=A[8],u[3]=A[12],u[4]=A[1],u[5]=A[5],u[6]=A[9],u[7]=A[13],u[8]=A[2],u[9]=A[6],u[10]=A[10],u[11]=A[14],u[12]=A[3],u[13]=A[7],u[14]=A[11],u[15]=A[15];return u}},{}],225:[function(t,N,V){var m=t("css-font"),u=t("pick-by-alias"),A=t("regl"),T=t("gl-util/context"),e=t("es6-weak-map"),a=t("color-normalize"),i=t("font-atlas"),n=t("typedarray-pool"),r=t("parse-rect"),v=t("is-plain-obj"),s=t("parse-unit"),o=t("to-px"),b=t("detect-kerning"),g=t("object-assign"),d=t("font-measure"),f=t("flatten-vertex-data"),y=t("bit-twiddle"),l=y.nextPow2,x=new e,c=!1;if(document.body){var M=document.body.appendChild(document.createElement("div"));M.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(M).fontStretch&&(c=!0),document.body.removeChild(M)}var w=function(h){p(h)?(h={regl:h},this.gl=h.regl._gl):this.gl=T(h),this.shader=x.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=h.regl||A({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(v(h)?h:{})};w.prototype.createShader=function(){var h=this.regl,L=h({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:h.prop("count"),offset:h.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:h.this("sizeBuffer")},width:{offset:0,stride:8,buffer:h.this("sizeBuffer")},char:h.this("charBuffer"),position:h.this("position")},uniforms:{atlasSize:function(S,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(S,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(S,P){return P.atlas.texture},charStep:function(S,P){return P.atlas.step},em:function(S,P){return P.atlas.em},color:h.prop("color"),opacity:h.prop("opacity"),viewport:h.this("viewportArray"),scale:h.this("scale"),align:h.prop("align"),baseline:h.prop("baseline"),translate:h.this("translate"),positionOffset:h.prop("positionOffset")},primitive:"points",viewport:h.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),E={};return{regl:h,draw:L,atlas:E}},w.prototype.update=function(h){var L=this;if(typeof h=="string")h={text:h};else if(!h)return;h=u(h,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),h.opacity!=null&&(Array.isArray(h.opacity)?this.opacity=h.opacity.map(function(Ae){return parseFloat(Ae)}):this.opacity=parseFloat(h.opacity)),h.viewport!=null&&(this.viewport=r(h.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),h.kerning!=null&&(this.kerning=h.kerning),h.offset!=null&&(typeof h.offset=="number"&&(h.offset=[h.offset,0]),this.positionOffset=f(h.offset)),h.direction&&(this.direction=h.direction),h.range&&(this.range=h.range,this.scale=[1/(h.range[2]-h.range[0]),1/(h.range[3]-h.range[1])],this.translate=[-h.range[0],-h.range[1]]),h.scale&&(this.scale=h.scale),h.translate&&(this.translate=h.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!h.font&&(h.font=w.baseFontSize+"px sans-serif");var E=!1,S=!1;if(h.font&&(Array.isArray(h.font)?h.font:[h.font]).forEach(function(Ae,Le){if(typeof Ae=="string")try{Ae=m.parse(Ae)}catch{Ae=m.parse(w.baseFontSize+"px "+Ae)}else Ae=m.parse(m.stringify(Ae));var Ze=m.stringify({size:w.baseFontSize,family:Ae.family,stretch:c?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style}),We=s(Ae.size),ze=Math.round(We[0]*o(We[1]));if(ze!==L.fontSize[Le]&&(S=!0,L.fontSize[Le]=ze),(!L.font[Le]||Ze!=L.font[Le].baseString)&&(E=!0,L.font[Le]=w.fonts[Ze],!L.font[Le])){var Ie=Ae.family.join(", "),Ve=[Ae.style];Ae.style!=Ae.variant&&Ve.push(Ae.variant),Ae.variant!=Ae.weight&&Ve.push(Ae.weight),c&&Ae.weight!=Ae.stretch&&Ve.push(Ae.stretch),L.font[Le]={baseString:Ze,family:Ie,weight:Ae.weight,stretch:Ae.stretch,style:Ae.style,variant:Ae.variant,width:{},kerning:{},metrics:d(Ie,{origin:"top",fontSize:w.baseFontSize,fontStyle:Ve.join(" ")})},w.fonts[Ze]=L.font[Le]}}),(E||S)&&this.font.forEach(function(Ae,Le){var Ze=m.stringify({size:L.fontSize[Le],family:Ae.family,stretch:c?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style});if(L.fontAtlas[Le]=L.shader.atlas[Ze],!L.fontAtlas[Le]){var We=Ae.metrics;L.shader.atlas[Ze]=L.fontAtlas[Le]={fontString:Ze,step:Math.ceil(L.fontSize[Le]*We.bottom*.5)*2,em:L.fontSize[Le],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}h.text==null&&(h.text=L.text)}),typeof h.text=="string"&&h.position&&h.position.length>2){for(var P=Array(h.position.length*.5),F=0;F<P.length;F++)P[F]=h.text;h.text=P}var I;if(h.text!=null||E){if(this.textOffsets=[0],Array.isArray(h.text)){this.count=h.text[0].length,this.counts=[this.count];for(var D=1;D<h.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+h.text[D-1].length,this.count+=h.text[D].length,this.counts.push(h.text[D].length);this.text=h.text.join("")}else this.text=h.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(Ae,Le){w.atlasContext.font=Ae.baseString;for(var Ze=L.fontAtlas[Le],We=0;We<L.text.length;We++){var ze=L.text.charAt(We);if(Ze.ids[ze]==null&&(Ze.ids[ze]=Ze.chars.length,Ze.chars.push(ze),I.push(ze)),Ae.width[ze]==null&&(Ae.width[ze]=w.atlasContext.measureText(ze).width/w.baseFontSize,L.kerning)){var Ie=[];for(var Ve in Ae.width)Ie.push(Ve+ze,ze+Ve);g(Ae.kerning,b(Ae.family,{pairs:Ie}))}}})}if(h.position)if(h.position.length>2){for(var R=!h.position[0].length,O=n.mallocFloat(this.count*2),z=0,G=0;z<this.counts.length;z++){var Y=this.counts[z];if(R)for(var ee=0;ee<Y;ee++)O[G++]=h.position[z*2],O[G++]=h.position[z*2+1];else for(var j=0;j<Y;j++)O[G++]=h.position[z][0],O[G++]=h.position[z][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),n.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:h.position};if(h.text||E){var X=n.mallocUint8(this.count),ie=n.mallocFloat(this.count*2);this.textWidth=[];for(var he=0,K=0;he<this.counts.length;he++){for(var $=this.counts[he],U=this.font[he]||this.font[0],H=this.fontAtlas[he]||this.fontAtlas[0],q=0;q<$;q++){var re=this.text.charAt(K),Z=this.text.charAt(K-1);if(X[K]=H.ids[re],ie[K*2]=U.width[re],q){var Q=ie[K*2-2],oe=ie[K*2],se=ie[K*2-1],ae=se+Q*.5+oe*.5;if(this.kerning){var le=U.kerning[Z+re];le&&(ae+=le*.001)}ie[K*2+1]=ae}else ie[K*2+1]=ie[K*2]*.5;K++}this.textWidth.push(ie.length?ie[K*2-2]*.5+ie[K*2-1]:0)}h.align||(h.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:ie,type:"float",usage:"stream"}),n.freeUint8(X),n.freeFloat(ie),I.length&&this.font.forEach(function(Ae,Le){var Ze=L.fontAtlas[Le],We=Ze.step,ze=Math.floor(w.maxAtlasSize/We),Ie=Math.min(ze,Ze.chars.length),Ve=Math.ceil(Ze.chars.length/Ie),dt=l(Ie*We),Ft=l(Ve*We);Ze.width=dt,Ze.height=Ft,Ze.rows=Ve,Ze.cols=Ie,Ze.em&&Ze.texture({data:i({canvas:w.atlasCanvas,font:Ze.fontString,chars:Ze.chars,shape:[dt,Ft],step:[We,We]})})})}if(h.align&&(this.align=h.align,this.alignOffset=this.textWidth.map(function(Ae,Le){var Ze=Array.isArray(L.align)?L.align.length>1?L.align[Le]:L.align[0]:L.align;if(typeof Ze=="number")return Ze;switch(Ze){case"right":case"end":return-Ae;case"center":case"centre":case"middle":return-Ae*.5}return 0})),this.baseline==null&&h.baseline==null&&(h.baseline=0),h.baseline!=null&&(this.baseline=h.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Ae,Le){var Ze=(L.font[Le]||L.font[0]).metrics,We=0;return We+=Ze.bottom*.5,typeof Ae=="number"?We+=Ae-Ze.baseline:We+=-Ze[Ae],We*=-1,We})),h.color!=null)if(h.color||(h.color="transparent"),typeof h.color=="string"||!isNaN(h.color))this.color=a(h.color,"uint8");else{var _e;if(typeof h.color[0]=="number"&&h.color.length>this.counts.length){var fe=h.color.length;_e=n.mallocUint8(fe);for(var me=(h.color.subarray||h.color.slice).bind(h.color),xe=0;xe<fe;xe+=4)_e.set(a(me(xe,xe+4),"uint8"),xe)}else{var ye=h.color.length;_e=n.mallocUint8(ye*4);for(var be=0;be<ye;be++)_e.set(a(h.color[be]||0,"uint8"),be*4)}this.color=_e}if(h.position||h.text||h.color||h.baseline||h.align||h.font||h.offset||h.opacity){var ke=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(ke){var De=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(De);for(var He=0;He<this.batch.length;He++)this.batch[He]={count:this.counts.length>1?this.counts[He]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[He]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(He*4,He*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[He]:this.opacity,baseline:this.baselineOffset[He]!=null?this.baselineOffset[He]:this.baselineOffset[0],align:this.align?this.alignOffset[He]!=null?this.alignOffset[He]:this.alignOffset[0]:0,atlas:this.fontAtlas[He]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(He*2,He*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={};function p(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer}N.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(t,N,V){(function(m){(function(){var u=t("pick-by-alias");N.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},T(r)?r={container:r}:e(r)?r={container:r}:a(r)?r={gl:r}:r=u(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=m.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var v=document.querySelector(r.container);if(!v)throw Error("Element "+r.container+" is not found");r.container=v}T(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=i(),r.container.appendChild(r.canvas),A(r))}else if(!r.canvas)if(typeof document<"u")r.container=document.body||document.documentElement,r.canvas=i(),r.container.appendChild(r.canvas),A(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{r.gl=r.canvas.getContext(s,r.attrs)}catch{}return r.gl}),r.gl};function A(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*m.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*m.innerHeight);else{var r=n.container.getBoundingClientRect();n.canvas.width=n.width||r.right-r.left,n.canvas.height=n.height||r.bottom-r.top}}function T(n){return typeof n.getContext=="function"&&"width"in n&&"height"in n}function e(n){return typeof n.nodeName=="string"&&typeof n.appendChild=="function"&&typeof n.getBoundingClientRect=="function"}function a(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}function i(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(t,N,V){N.exports=function(m){typeof m=="string"&&(m=[m]);for(var u=[].slice.call(arguments,1),A=[],T=0;T<m.length-1;T++)A.push(m[T],u[T]||"");return A.push(m[T]),A.join("")}},{}],228:[function(t,N,V){(function(m){(function(){var u=t("is-browser"),A;typeof m.matchMedia=="function"?A=!m.matchMedia("(hover: none)").matches:A=u,N.exports=A}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(t,N,V){var m=t("is-browser");function u(){var A=!1;try{var T=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch{A=!1}return A}N.exports=m&&u()},{"is-browser":232}],230:[function(t,N,V){V.read=function(m,u,A,T,e){var a,i,n=e*8-T-1,r=(1<<n)-1,v=r>>1,s=-7,o=A?e-1:0,b=A?-1:1,g=m[u+o];for(o+=b,a=g&(1<<-s)-1,g>>=-s,s+=n;s>0;a=a*256+m[u+o],o+=b,s-=8);for(i=a&(1<<-s)-1,a>>=-s,s+=T;s>0;i=i*256+m[u+o],o+=b,s-=8);if(a===0)a=1-v;else{if(a===r)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,T),a=a-v}return(g?-1:1)*i*Math.pow(2,a-T)},V.write=function(m,u,A,T,e,a){var i,n,r,v=a*8-e-1,s=(1<<v)-1,o=s>>1,b=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=T?0:a-1,d=T?1:-1,f=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(n=isNaN(u)?1:0,i=s):(i=Math.floor(Math.log(u)/Math.LN2),u*(r=Math.pow(2,-i))<1&&(i--,r*=2),i+o>=1?u+=b/r:u+=b*Math.pow(2,1-o),u*r>=2&&(i++,r/=2),i+o>=s?(n=0,i=s):i+o>=1?(n=(u*r-1)*Math.pow(2,e),i=i+o):(n=u*Math.pow(2,o-1)*Math.pow(2,e),i=0));e>=8;m[A+g]=n&255,g+=d,n/=256,e-=8);for(i=i<<e|n,v+=e;v>0;m[A+g]=i&255,g+=d,i/=256,v-=8);m[A+g-d]|=f*128}},{}],231:[function(t,N,V){typeof Object.create=="function"?N.exports=function(u,A){A&&(u.super_=A,u.prototype=Object.create(A.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}))}:N.exports=function(u,A){if(A){u.super_=A;var T=function(){};T.prototype=A.prototype,u.prototype=new T,u.prototype.constructor=u}}},{}],232:[function(t,N,V){N.exports=!0},{}],233:[function(t,N,V){N.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(t,N,V){N.exports=A,N.exports.isMobile=A,N.exports.default=A;var m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,u=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function A(T){T||(T={});var e=T.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var a=T.tablet?u.test(e):m.test(e);return!a&&T.tablet&&T.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(t,N,V){N.exports=function(m){var u=typeof m;return m!==null&&(u==="object"||u==="function")}},{}],236:[function(t,N,V){var m=Object.prototype.toString;N.exports=function(u){var A;return m.call(u)==="[object Object]"&&(A=Object.getPrototypeOf(u),A===null||A===Object.getPrototypeOf({}))}},{}],237:[function(t,N,V){N.exports=function(m){for(var u=m.length,A,T=0;T<u;T++)if(A=m.charCodeAt(T),(A<9||A>13)&&A!==32&&A!==133&&A!==160&&A!==5760&&A!==6158&&(A<8192||A>8205)&&A!==8232&&A!==8233&&A!==8239&&A!==8287&&A!==8288&&A!==12288&&A!==65279)return!1;return!0}},{}],238:[function(t,N,V){N.exports=function(u){return typeof u!="string"?!1:(u=u.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(u)&&/[\dz]$/i.test(u)&&u.length>4))}},{}],239:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?N.exports=u():(m=m||self,m.mapboxgl=u())})(this,function(){var m,u,A;function T(e,a){if(!m)m=a;else if(!u)u=a;else{var i="var sharedChunk = {}; ("+m+")(sharedChunk); ("+u+")(sharedChunk);",n={};m(n),A=a(n),A.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}return T(["exports"],function(e){function a(k,C){return C={exports:{}},k(C,C.exports),C.exports}var i="1.10.1",n=r;function r(k,C,B,te){this.cx=3*k,this.bx=3*(B-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*(te-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=te,this.p2x=B,this.p2y=te}r.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},r.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},r.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},r.prototype.solveCurveX=function(k,C){typeof C>"u"&&(C=1e-6);var B,te,pe,we,Me;for(pe=k,Me=0;Me<8;Me++){if(we=this.sampleCurveX(pe)-k,Math.abs(we)<C)return pe;var Ne=this.sampleCurveDerivativeX(pe);if(Math.abs(Ne)<1e-6)break;pe=pe-we/Ne}if(B=0,te=1,pe=k,pe<B)return B;if(pe>te)return te;for(;B<te;){if(we=this.sampleCurveX(pe),Math.abs(we-k)<C)return pe;k>we?B=pe:te=pe,pe=(te-B)*.5+B}return pe},r.prototype.solve=function(k,C){return this.sampleCurveY(this.solveCurveX(k,C))};var v=s;function s(k,C){this.x=k,this.y=C}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,C){return this.clone()._rotateAround(k,C)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var C=k.x-this.x,B=k.y-this.y;return C*C+B*B},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,C){return Math.atan2(this.x*C-this.y*k,this.x*k+this.y*C)},_matMult:function(k){var C=k[0]*this.x+k[1]*this.y,B=k[2]*this.x+k[3]*this.y;return this.x=C,this.y=B,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var C=Math.cos(k),B=Math.sin(k),te=C*this.x-B*this.y,pe=B*this.x+C*this.y;return this.x=te,this.y=pe,this},_rotateAround:function(k,C){var B=Math.cos(k),te=Math.sin(k),pe=C.x+B*(this.x-C.x)-te*(this.y-C.y),we=C.y+te*(this.x-C.x)+B*(this.y-C.y);return this.x=pe,this.y=we,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(k){return k instanceof s?k:Array.isArray(k)?new s(k[0],k[1]):k};function o(k,C){if(Array.isArray(k)){if(!Array.isArray(C)||k.length!==C.length)return!1;for(var B=0;B<k.length;B++)if(!o(k[B],C[B]))return!1;return!0}if(typeof k=="object"&&k!==null&&C!==null){if(typeof C!="object")return!1;var te=Object.keys(k);if(te.length!==Object.keys(C).length)return!1;for(var pe in k)if(!o(k[pe],C[pe]))return!1;return!0}return k===C}function b(k){if(k<=0)return 0;if(k>=1)return 1;var C=k*k,B=C*k;return 4*(k<.5?B:3*(k-C)+B-.75)}function g(k,C,B,te){var pe=new n(k,C,B,te);return function(we){return pe.solve(we)}}var d=g(.25,.1,.25,1);function f(k,C,B){return Math.min(B,Math.max(C,k))}function y(k,C,B){var te=B-C,pe=((k-C)%te+te)%te+C;return pe===C?B:pe}function l(k,C,B){if(!k.length)return B(null,[]);var te=k.length,pe=new Array(k.length),we=null;k.forEach(function(Me,Ne){C(Me,function(rt,vt){rt&&(we=rt),pe[Ne]=vt,--te===0&&B(we,pe)})})}function x(k){var C=[];for(var B in k)C.push(k[B]);return C}function c(k,C){var B=[];for(var te in k)te in C||B.push(te);return B}function M(k){for(var C=[],B=arguments.length-1;B-- >0;)C[B]=arguments[B+1];for(var te=0,pe=C;te<pe.length;te+=1){var we=pe[te];for(var Me in we)k[Me]=we[Me]}return k}function w(k,C){for(var B={},te=0;te<C.length;te++){var pe=C[te];pe in k&&(B[pe]=k[pe])}return B}var p=1;function _(){return p++}function h(){function k(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,k)}return k()}function L(k){return k?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(k):!1}function E(k,C){k.forEach(function(B){!C[B]||(C[B]=C[B].bind(C))})}function S(k,C){return k.indexOf(C,k.length-C.length)!==-1}function P(k,C,B){var te={};for(var pe in k)te[pe]=C.call(B||this,k[pe],pe,k);return te}function F(k,C,B){var te={};for(var pe in k)C.call(B||this,k[pe],pe,k)&&(te[pe]=k[pe]);return te}function I(k){return Array.isArray(k)?k.map(I):typeof k=="object"&&k?P(k,I):k}function D(k,C){for(var B=0;B<k.length;B++)if(C.indexOf(k[B])>=0)return!0;return!1}var R={};function O(k){R[k]||(typeof console<"u"&&console.warn(k),R[k]=!0)}function z(k,C,B){return(B.y-k.y)*(C.x-k.x)>(C.y-k.y)*(B.x-k.x)}function G(k){for(var C=0,B=0,te=k.length,pe=te-1,we=void 0,Me=void 0;B<te;pe=B++)we=k[B],Me=k[pe],C+=(Me.x-we.x)*(we.y+Me.y);return C}function Y(k){var C=k[0],B=k[1],te=k[2];return B+=90,B*=Math.PI/180,te*=Math.PI/180,{x:C*Math.cos(B)*Math.sin(te),y:C*Math.sin(B)*Math.sin(te),z:C*Math.cos(te)}}function ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function j(k){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,B={};if(k.replace(C,function(pe,we,Me,Ne){var rt=Me||Ne;return B[we]=rt?rt.toLowerCase():!0,""}),B["max-age"]){var te=parseInt(B["max-age"],10);isNaN(te)?delete B["max-age"]:B["max-age"]=te}return B}var X=null;function ie(k){if(X==null){var C=k.navigator?k.navigator.userAgent:null;X=!!k.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return X}function he(k){try{var C=self[k];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function K(k){return self.btoa(encodeURIComponent(k).replace(/%([0-9A-F]{2})/g,function(C,B){return String.fromCharCode(Number("0x"+B))}))}function $(k){return decodeURIComponent(self.atob(k).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var U=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),H=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,re,Z,Q={now:U,frame:function(C){var B=H(C);return{cancel:function(){return q(B)}}},getImageData:function(C,B){B===void 0&&(B=0);var te=self.document.createElement("canvas"),pe=te.getContext("2d");if(!pe)throw new Error("failed to create canvas 2d context");return te.width=C.width,te.height=C.height,pe.drawImage(C,0,0,C.width,C.height),pe.getImageData(-B,-B,C.width+2*B,C.height+2*B)},resolveURL:function(C){return re||(re=self.document.createElement("a")),re.href=C,re.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(Z==null&&(Z=self.matchMedia("(prefers-reduced-motion: reduce)")),Z.matches):!1}},oe={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},se={supported:!1,testSupport:me},ae,le=!1,_e,fe=!1;self.document&&(_e=self.document.createElement("img"),_e.onload=function(){ae&&xe(ae),ae=null,fe=!0},_e.onerror=function(){le=!0,ae=null},_e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function me(k){le||!_e||(fe?xe(k):ae=k)}function xe(k){var C=k.createTexture();k.bindTexture(k.TEXTURE_2D,C);try{if(k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,_e),k.isContextLost())return;se.supported=!0}catch{}k.deleteTexture(C),le=!0}var ye="01";function be(){for(var k="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",B="",te=0;te<10;te++)B+=C[Math.floor(Math.random()*62)];var pe=12*60*60*1e3,we=[k,ye,B].join(""),Me=Date.now()+pe;return{token:we,tokenExpiresAt:Me}}var ke=function(C,B){this._transformRequestFn=C,this._customAccessToken=B,this._createSkuToken()};ke.prototype._createSkuToken=function(){var C=be();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},ke.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ke.prototype.transformRequest=function(C,B){return this._transformRequestFn?this._transformRequestFn(C,B)||{url:C}:{url:C}},ke.prototype.normalizeStyleURL=function(C,B){if(!De(C))return C;var te=ze(C);return te.path="/styles/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||B)},ke.prototype.normalizeGlyphsURL=function(C,B){if(!De(C))return C;var te=ze(C);return te.path="/fonts/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||B)},ke.prototype.normalizeSourceURL=function(C,B){if(!De(C))return C;var te=ze(C);return te.path="/v4/"+te.authority+".json",te.params.push("secure"),this._makeAPIURL(te,this._customAccessToken||B)},ke.prototype.normalizeSpriteURL=function(C,B,te,pe){var we=ze(C);return De(C)?(we.path="/styles/v1"+we.path+"/sprite"+B+te,this._makeAPIURL(we,this._customAccessToken||pe)):(we.path+=""+B+te,Ie(we))},ke.prototype.normalizeTileURL=function(C,B){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!De(C))return C;var te=ze(C),pe=/(\.(png|jpg)\d*)(?=$)/,we=/^.+\/v4\//,Me=Q.devicePixelRatio>=2||B===512?"@2x":"",Ne=se.supported?".webp":"$1";te.path=te.path.replace(pe,""+Me+Ne),te.path=te.path.replace(we,"/"),te.path="/v4"+te.path;var rt=this._customAccessToken||Ze(te.params)||oe.ACCESS_TOKEN;return oe.REQUIRE_ACCESS_TOKEN&&rt&&this._skuToken&&te.params.push("sku="+this._skuToken),this._makeAPIURL(te,rt)},ke.prototype.canonicalizeTileURL=function(C,B){var te="/v4/",pe=/\.[\w]+$/,we=ze(C);if(!we.path.match(/(^\/v4\/)/)||!we.path.match(pe))return C;var Me="mapbox://tiles/";Me+=we.path.replace(te,"");var Ne=we.params;return B&&(Ne=Ne.filter(function(rt){return!rt.match(/^access_token=/)})),Ne.length&&(Me+="?"+Ne.join("&")),Me},ke.prototype.canonicalizeTileset=function(C,B){for(var te=B?De(B):!1,pe=[],we=0,Me=C.tiles||[];we<Me.length;we+=1){var Ne=Me[we];Ae(Ne)?pe.push(this.canonicalizeTileURL(Ne,te)):pe.push(Ne)}return pe},ke.prototype._makeAPIURL=function(C,B){var te="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",pe=ze(oe.API_URL);if(C.protocol=pe.protocol,C.authority=pe.authority,pe.path!=="/"&&(C.path=""+pe.path+C.path),!oe.REQUIRE_ACCESS_TOKEN)return Ie(C);if(B=B||oe.ACCESS_TOKEN,!B)throw new Error("An API access token is required to use Mapbox GL. "+te);if(B[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+te);return C.params=C.params.filter(function(we){return we.indexOf("access_token")===-1}),C.params.push("access_token="+B),Ie(C)};function De(k){return k.indexOf("mapbox:")===0}var He=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ae(k){return He.test(k)}function Le(k){return k.indexOf("sku=")>0&&Ae(k)}function Ze(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C],pe=te.match(/^access_token=(.*)$/);if(pe)return pe[1]}return null}var We=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ze(k){var C=k.match(We);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function Ie(k){var C=k.params.length?"?"+k.params.join("&"):"";return k.protocol+"://"+k.authority+k.path+C}var Ve="mapbox.eventData";function dt(k){if(!k)return null;var C=k.split(".");if(!C||C.length!==3)return null;try{var B=JSON.parse($(C[1]));return B}catch{return null}}var Ft=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ft.prototype.getStorageKey=function(C){var B=dt(oe.ACCESS_TOKEN),te="";return B&&B.u?te=K(B.u):te=oe.ACCESS_TOKEN||"",C?Ve+"."+C+":"+te:Ve+":"+te},Ft.prototype.fetchEventData=function(){var C=he("localStorage"),B=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{var pe=self.localStorage.getItem(B);pe&&(this.eventData=JSON.parse(pe));var we=self.localStorage.getItem(te);we&&(this.anonId=we)}catch{O("Unable to read from LocalStorage")}},Ft.prototype.saveEventData=function(){var C=he("localStorage"),B=this.getStorageKey(),te=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(te,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(B,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Ft.prototype.processRequests=function(C){},Ft.prototype.postEvent=function(C,B,te,pe){var we=this;if(!!oe.EVENTS_URL){var Me=ze(oe.EVENTS_URL);Me.params.push("access_token="+(pe||oe.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:ye,userId:this.anonId},rt=B?M(Ne,B):Ne,vt={url:Ie(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([rt])};this.pendingRequest=Et(vt,function(mt){we.pendingRequest=null,te(mt),we.saveEventData(),we.processRequests(pe)})}},Ft.prototype.queueRequest=function(C,B){this.queue.push(C),this.processRequests(B)};var Qt=function(k){function C(){k.call(this,"map.load"),this.success={},this.skuToken=""}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function(te,pe,we,Me){this.skuToken=we,(oe.EVENTS_URL&&Me||oe.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(Ne){return De(Ne)||Ae(Ne)}))&&this.queueRequest({id:pe,timestamp:Date.now()},Me)},C.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){var we=this.queue.shift(),Me=we.id,Ne=we.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=h()),this.postEvent(Ne,{skuToken:this.skuToken},function(rt){rt||Me&&(pe.success[Me]=!0)},te))}},C}(Ft),Ot=function(k){function C(B){k.call(this,"appUserTurnstile"),this._customAccessToken=B}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function(te,pe){oe.EVENTS_URL&&oe.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(we){return De(we)||Ae(we)})&&this.queueRequest(Date.now(),pe)},C.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var we=dt(oe.ACCESS_TOKEN),Me=we?we.u:oe.ACCESS_TOKEN,Ne=Me!==this.eventData.tokenU;L(this.anonId)||(this.anonId=h(),Ne=!0);var rt=this.queue.shift();if(this.eventData.lastSuccess){var vt=new Date(this.eventData.lastSuccess),mt=new Date(rt),Ut=(rt-this.eventData.lastSuccess)/(24*60*60*1e3);Ne=Ne||Ut>=1||Ut<-1||vt.getDate()!==mt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(rt,{"enabled.telemetry":!1},function(ir){ir||(pe.eventData.lastSuccess=rt,pe.eventData.tokenU=Me)},te)}},C}(Ft),Ct=new Ot,jt=Ct.postTurnstileEvent.bind(Ct),Nt=new Qt,Lt=Nt.postMapLoadEvent.bind(Nt),Xe="mapbox-tiles",it=500,Ye=50,Ee=1e3*60*7,Ge;function Ke(){self.caches&&!Ge&&(Ge=self.caches.open(Xe))}var qe;function At(k,C){if(qe===void 0)try{new Response(new ReadableStream),qe=!0}catch{qe=!1}qe?C(k.body):k.blob().then(C)}function yt(k,C,B){if(Ke(),!!Ge){var te={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(Me,Ne){return te.headers.set(Ne,Me)});var pe=j(C.headers.get("Cache-Control")||"");if(!pe["no-store"]){pe["max-age"]&&te.headers.set("Expires",new Date(B+pe["max-age"]*1e3).toUTCString());var we=new Date(te.headers.get("Expires")).getTime()-B;we<Ee||At(C,function(Me){var Ne=new self.Response(Me,te);Ke(),Ge&&Ge.then(function(rt){return rt.put(Mt(k.url),Ne)}).catch(function(rt){return O(rt.message)})})}}}function Mt(k){var C=k.indexOf("?");return C<0?k:k.slice(0,C)}function Gt(k,C){if(Ke(),!Ge)return C(null);var B=Mt(k.url);Ge.then(function(te){te.match(B).then(function(pe){var we=zt(pe);te.delete(B),we&&te.put(B,pe.clone()),C(null,pe,we)}).catch(C)}).catch(C)}function zt(k){if(!k)return!1;var C=new Date(k.headers.get("Expires")||0),B=j(k.headers.get("Cache-Control")||"");return C>Date.now()&&!B["no-cache"]}var Ht=1/0;function Zt(k){Ht++,Ht>Ye&&(k.getActor().send("enforceCacheSizeLimit",it),Ht=0)}function Wt(k){Ke(),Ge&&Ge.then(function(C){C.keys().then(function(B){for(var te=0;te<B.length-k;te++)C.delete(B[te])})})}function sr(k){var C=self.caches.delete(Xe);k&&C.catch(k).then(function(){return k()})}function Gr(k,C){it=k,Ye=C}var cn;function qr(){return cn==null&&(cn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),cn}var st={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(st);var rr=function(k){function C(B,te,pe){te===401&&Ae(pe)&&(B+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),k.call(this,B),this.status=te,this.url=pe,this.name=this.constructor.name,this.message=B}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),Jt=ee()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},hr=function(k){return/^file:/.test(k)||/^file:/.test(Jt())&&!/^\w+:/.test(k)};function Sr(k,C){var B=new self.AbortController,te=new self.Request(k.url,{method:k.method||"GET",body:k.body,credentials:k.credentials,headers:k.headers,referrer:Jt(),signal:B.signal}),pe=!1,we=!1,Me=Le(te.url);k.type==="json"&&te.headers.set("Accept","application/json");var Ne=function(vt,mt,Ut){if(!we){if(vt&&vt.message!=="SecurityError"&&O(vt),mt&&Ut)return rt(mt);var ir=Date.now();self.fetch(te).then(function(tr){if(tr.ok){var xr=Me?tr.clone():null;return rt(tr,xr,ir)}else return C(new rr(tr.statusText,tr.status,k.url))}).catch(function(tr){tr.code!==20&&C(new Error(tr.message))})}},rt=function(vt,mt,Ut){(k.type==="arrayBuffer"?vt.arrayBuffer():k.type==="json"?vt.json():vt.text()).then(function(ir){we||(mt&&Ut&&yt(te,mt,Ut),pe=!0,C(null,ir,vt.headers.get("Cache-Control"),vt.headers.get("Expires")))}).catch(function(ir){we||C(new Error(ir.message))})};return Me?Gt(te,Ne):Ne(null,null),{cancel:function(){we=!0,pe||B.abort()}}}function tt(k,C){var B=new self.XMLHttpRequest;B.open(k.method||"GET",k.url,!0),k.type==="arrayBuffer"&&(B.responseType="arraybuffer");for(var te in k.headers)B.setRequestHeader(te,k.headers[te]);return k.type==="json"&&(B.responseType="text",B.setRequestHeader("Accept","application/json")),B.withCredentials=k.credentials==="include",B.onerror=function(){C(new Error(B.statusText))},B.onload=function(){if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){var pe=B.response;if(k.type==="json")try{pe=JSON.parse(B.response)}catch(we){return C(we)}C(null,pe,B.getResponseHeader("Cache-Control"),B.getResponseHeader("Expires"))}else C(new rr(B.statusText,B.status,k.url))},B.send(k.body),{cancel:function(){return B.abort()}}}var Qe=function(k,C){if(!hr(k.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Sr(k,C);if(ee()&&self.worker&&self.worker.actor){var B=!0;return self.worker.actor.send("getResource",k,C,void 0,B)}}return tt(k,C)},lt=function(k,C){return Qe(M(k,{type:"json"}),C)},ft=function(k,C){return Qe(M(k,{type:"arrayBuffer"}),C)},Et=function(k,C){return Qe(M(k,{method:"POST"}),C)};function Vt(k){var C=self.document.createElement("a");return C.href=k,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Se(k,C,B,te){var pe=new self.Image,we=self.URL;pe.onload=function(){C(null,pe),we.revokeObjectURL(pe.src)},pe.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Me=new self.Blob([new Uint8Array(k)],{type:"image/png"});pe.cacheControl=B,pe.expires=te,pe.src=k.byteLength?we.createObjectURL(Me):Pe}function ot(k,C){var B=new self.Blob([new Uint8Array(k)],{type:"image/png"});self.createImageBitmap(B).then(function(te){C(null,te)}).catch(function(te){C(new Error("Could not load image because of "+te.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var ct,pt,St=function(){ct=[],pt=0};St();var xt=function(k,C){if(se.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),pt>=oe.MAX_PARALLEL_IMAGE_REQUESTS){var B={requestParameters:k,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return ct.push(B),B}pt++;var te=!1,pe=function(){if(!te)for(te=!0,pt--;ct.length&&pt<oe.MAX_PARALLEL_IMAGE_REQUESTS;){var Me=ct.shift(),Ne=Me.requestParameters,rt=Me.callback,vt=Me.cancelled;vt||(Me.cancel=xt(Ne,rt).cancel)}},we=ft(k,function(Me,Ne,rt,vt){pe(),Me?C(Me):Ne&&(qr()?ot(Ne,C):Se(Ne,C,rt,vt))});return{cancel:function(){we.cancel(),pe()}}},Pt=function(k,C){var B=self.document.createElement("video");B.muted=!0,B.onloadstart=function(){C(null,B)};for(var te=0;te<k.length;te++){var pe=self.document.createElement("source");Vt(k[te])||(B.crossOrigin="Anonymous"),pe.src=k[te],B.appendChild(pe)}return{cancel:function(){}}};function Xt(k,C,B){var te=B[k]&&B[k].indexOf(C)!==-1;te||(B[k]=B[k]||[],B[k].push(C))}function or(k,C,B){if(B&&B[k]){var te=B[k].indexOf(C);te!==-1&&B[k].splice(te,1)}}var Pr=function(C,B){B===void 0&&(B={}),M(this,B),this.type=C},Ar=function(k){function C(B,te){te===void 0&&(te={}),k.call(this,"error",M({error:B},te))}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(Pr),Er=function(){};Er.prototype.on=function(C,B){return this._listeners=this._listeners||{},Xt(C,B,this._listeners),this},Er.prototype.off=function(C,B){return or(C,B,this._listeners),or(C,B,this._oneTimeListeners),this},Er.prototype.once=function(C,B){return this._oneTimeListeners=this._oneTimeListeners||{},Xt(C,B,this._oneTimeListeners),this},Er.prototype.fire=function(C,B){typeof C=="string"&&(C=new Pr(C,B||{}));var te=C.type;if(this.listens(te)){C.target=this;for(var pe=this._listeners&&this._listeners[te]?this._listeners[te].slice():[],we=0,Me=pe;we<Me.length;we+=1){var Ne=Me[we];Ne.call(this,C)}for(var rt=this._oneTimeListeners&&this._oneTimeListeners[te]?this._oneTimeListeners[te].slice():[],vt=0,mt=rt;vt<mt.length;vt+=1){var Ut=mt[vt];or(te,Ut,this._oneTimeListeners),Ut.call(this,C)}var ir=this._eventedParent;ir&&(M(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ir.fire(C))}else C instanceof Ar&&console.error(C.error);return this},Er.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},Er.prototype.setEventedParent=function(C,B){return this._eventedParent=C,this._eventedParentData=B,this};var $r=8,lr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},br={"*":{type:"source"}},Fr=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Hr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Lr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},at={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Rt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Kt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},ur={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Nr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Vr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Dr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Mr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},mn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wn={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},In={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Jn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kn={type:"array",value:"*"},ma={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Ra={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},_i={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Ka={type:"array",value:"*",minimum:1},ri={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ei={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},kr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],bn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},dn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Ln={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ra={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ya={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},sa={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Bn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Qn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xa={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},mi={"*":{type:"string"}},Yt={$version:$r,$root:lr,sources:br,source:Fr,source_vector:Hr,source_raster:Lr,source_raster_dem:at,source_geojson:Rt,source_video:Kt,source_image:ur,layer:Nr,layout:Vr,layout_background:Dr,layout_fill:Mr,layout_circle:jr,layout_heatmap:kn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:mn,layout_symbol:Wn,layout_raster:In,layout_hillshade:Jn,filter:Kn,filter_operator:ma,geometry_type:Ra,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:_i,expression:Ka,expression_name:ri,light:ei,paint:kr,paint_fill:bn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:dn,paint_circle:Ln,paint_heatmap:ra,paint_symbol:ya,paint_raster:sa,paint_hillshade:Bn,paint_background:Qn,transition:Xa,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:mi},gr=function(C,B,te,pe){this.message=(C?C+": ":"")+te,pe&&(this.identifier=pe),B!=null&&B.__line__&&(this.line=B.__line__)};function un(k){var C=k.key,B=k.value;return B?[new gr(C,B,"constants have been deprecated as of v8")]:[]}function yn(k){for(var C=[],B=arguments.length-1;B-- >0;)C[B]=arguments[B+1];for(var te=0,pe=C;te<pe.length;te+=1){var we=pe[te];for(var Me in we)k[Me]=we[Me]}return k}function sn(k){return k instanceof Number||k instanceof String||k instanceof Boolean?k.valueOf():k}function Cn(k){if(Array.isArray(k))return k.map(Cn);if(k instanceof Object&&!(k instanceof Number||k instanceof String||k instanceof Boolean)){var C={};for(var B in k)C[B]=Cn(k[B]);return C}return sn(k)}var Tn=function(k){function C(B,te){k.call(this,te),this.message=te,this.key=B}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(Error),gn=function(C,B){B===void 0&&(B=[]),this.parent=C,this.bindings={};for(var te=0,pe=B;te<pe.length;te+=1){var we=pe[te],Me=we[0],Ne=we[1];this.bindings[Me]=Ne}};gn.prototype.concat=function(C){return new gn(this,C)},gn.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},gn.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var _r={kind:"null"},wr={kind:"number"},Br={kind:"string"},An={kind:"boolean"},Yn={kind:"color"},ua={kind:"object"},Sn={kind:"value"},na={kind:"error"},fa={kind:"collator"},Ma={kind:"formatted"},ka={kind:"resolvedImage"};function ga(k,C){return{kind:"array",itemType:k,N:C}}function Ia(k){if(k.kind==="array"){var C=Ia(k.itemType);return typeof k.N=="number"?"array<"+C+", "+k.N+">":k.itemType.kind==="value"?"array":"array<"+C+">"}else return k.kind}var Mo=[_r,wr,Br,An,Yn,Ma,ua,ga(Sn),ka];function ro(k,C){if(C.kind==="error")return null;if(k.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!ro(k.itemType,C.itemType))&&(typeof k.N!="number"||k.N===C.N))return null}else{if(k.kind===C.kind)return null;if(k.kind==="value")for(var B=0,te=Mo;B<te.length;B+=1){var pe=te[B];if(!ro(pe,C))return null}}return"Expected "+Ia(k)+" but found "+Ia(C)+" instead."}function Qo(k,C){return C.some(function(B){return B.kind===k.kind})}function Qs(k,C){return C.some(function(B){return B==="null"?k===null:B==="array"?Array.isArray(k):B==="object"?k&&!Array.isArray(k)&&typeof k=="object":B===typeof k})}var Vs=a(function(k,C){var B={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function te(vt){return vt=Math.round(vt),vt<0?0:vt>255?255:vt}function pe(vt){return vt<0?0:vt>1?1:vt}function we(vt){return vt[vt.length-1]==="%"?te(parseFloat(vt)/100*255):te(parseInt(vt))}function Me(vt){return vt[vt.length-1]==="%"?pe(parseFloat(vt)/100):pe(parseFloat(vt))}function Ne(vt,mt,Ut){return Ut<0?Ut+=1:Ut>1&&(Ut-=1),Ut*6<1?vt+(mt-vt)*Ut*6:Ut*2<1?mt:Ut*3<2?vt+(mt-vt)*(2/3-Ut)*6:vt}function rt(vt){var mt=vt.replace(/ /g,"").toLowerCase();if(mt in B)return B[mt].slice();if(mt[0]==="#"){if(mt.length===4){var Ut=parseInt(mt.substr(1),16);return Ut>=0&&Ut<=4095?[(Ut&3840)>>4|(Ut&3840)>>8,Ut&240|(Ut&240)>>4,Ut&15|(Ut&15)<<4,1]:null}else if(mt.length===7){var Ut=parseInt(mt.substr(1),16);return Ut>=0&&Ut<=16777215?[(Ut&16711680)>>16,(Ut&65280)>>8,Ut&255,1]:null}return null}var ir=mt.indexOf("("),tr=mt.indexOf(")");if(ir!==-1&&tr+1===mt.length){var xr=mt.substr(0,ir),Ur=mt.substr(ir+1,tr-(ir+1)).split(","),hn=1;switch(xr){case"rgba":if(Ur.length!==4)return null;hn=Me(Ur.pop());case"rgb":return Ur.length!==3?null:[we(Ur[0]),we(Ur[1]),we(Ur[2]),hn];case"hsla":if(Ur.length!==4)return null;hn=Me(Ur.pop());case"hsl":if(Ur.length!==3)return null;var an=(parseFloat(Ur[0])%360+360)%360/360,Rn=Me(Ur[1]),Mn=Me(Ur[2]),Dn=Mn<=.5?Mn*(Rn+1):Mn+Rn-Mn*Rn,Vn=Mn*2-Dn;return[te(Ne(Vn,Dn,an+1/3)*255),te(Ne(Vn,Dn,an)*255),te(Ne(Vn,Dn,an-1/3)*255),hn];default:return null}}return null}try{C.parseCSSColor=rt}catch{}}),Wl=Vs.parseCSSColor,Ai=function(C,B,te,pe){pe===void 0&&(pe=1),this.r=C,this.g=B,this.b=te,this.a=pe};Ai.parse=function(C){if(!!C){if(C instanceof Ai)return C;if(typeof C=="string"){var B=Wl(C);if(!!B)return new Ai(B[0]/255*B[3],B[1]/255*B[3],B[2]/255*B[3],B[3])}}},Ai.prototype.toString=function(){var C=this.toArray(),B=C[0],te=C[1],pe=C[2],we=C[3];return"rgba("+Math.round(B)+","+Math.round(te)+","+Math.round(pe)+","+we+")"},Ai.prototype.toArray=function(){var C=this,B=C.r,te=C.g,pe=C.b,we=C.a;return we===0?[0,0,0,0]:[B*255/we,te*255/we,pe*255/we,we]},Ai.black=new Ai(0,0,0,1),Ai.white=new Ai(1,1,1,1),Ai.transparent=new Ai(0,0,0,0),Ai.red=new Ai(1,0,0,1);var Hs=function(C,B,te){C?this.sensitivity=B?"variant":"case":this.sensitivity=B?"accent":"base",this.locale=te,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Hs.prototype.compare=function(C,B){return this.collator.compare(C,B)},Hs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Gs=function(C,B,te,pe,we){this.text=C,this.image=B,this.scale=te,this.fontStack=pe,this.textColor=we},Zi=function(C){this.sections=C};Zi.fromString=function(C){return new Zi([new Gs(C,null,null,null,null)])},Zi.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},Zi.factory=function(C){return C instanceof Zi?C:Zi.fromString(C)},Zi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},Zi.prototype.serialize=function(){for(var C=["format"],B=0,te=this.sections;B<te.length;B+=1){var pe=te[B];if(pe.image){C.push(["image",pe.image.name]);continue}C.push(pe.text);var we={};pe.fontStack&&(we["text-font"]=["literal",pe.fontStack.split(",")]),pe.scale&&(we["font-scale"]=pe.scale),pe.textColor&&(we["text-color"]=["rgba"].concat(pe.textColor.toArray())),C.push(we)}return C};var Io=function(C){this.name=C.name,this.available=C.available};Io.prototype.toString=function(){return this.name},Io.fromString=function(C){return C?new Io({name:C,available:!1}):null},Io.prototype.serialize=function(){return["image",this.name]};function kl(k,C,B,te){if(!(typeof k=="number"&&k>=0&&k<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof B=="number"&&B>=0&&B<=255)){var pe=typeof te=="number"?[k,C,B,te]:[k,C,B];return"Invalid rgba value ["+pe.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof te>"u"||typeof te=="number"&&te>=0&&te<=1?null:"Invalid rgba value ["+[k,C,B,te].join(", ")+"]: 'a' must be between 0 and 1."}function ws(k){if(k===null)return!0;if(typeof k=="string")return!0;if(typeof k=="boolean")return!0;if(typeof k=="number")return!0;if(k instanceof Ai)return!0;if(k instanceof Hs)return!0;if(k instanceof Zi)return!0;if(k instanceof Io)return!0;if(Array.isArray(k)){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(!ws(te))return!1}return!0}else if(typeof k=="object"){for(var pe in k)if(!ws(k[pe]))return!1;return!0}else return!1}function Fi(k){if(k===null)return _r;if(typeof k=="string")return Br;if(typeof k=="boolean")return An;if(typeof k=="number")return wr;if(k instanceof Ai)return Yn;if(k instanceof Hs)return fa;if(k instanceof Zi)return Ma;if(k instanceof Io)return ka;if(Array.isArray(k)){for(var C=k.length,B,te=0,pe=k;te<pe.length;te+=1){var we=pe[te],Me=Fi(we);if(!B)B=Me;else{if(B===Me)continue;B=Sn;break}}return ga(B||Sn,C)}else return ua}function hl(k){var C=typeof k;return k===null?"":C==="string"||C==="number"||C==="boolean"?String(k):k instanceof Ai||k instanceof Zi||k instanceof Io?k.toString():JSON.stringify(k)}var uo=function(C,B){this.type=C,this.value=B};uo.parse=function(C,B){if(C.length!==2)return B.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!ws(C[1]))return B.error("invalid value");var te=C[1],pe=Fi(te),we=B.expectedType;return pe.kind==="array"&&pe.N===0&&we&&we.kind==="array"&&(typeof we.N!="number"||we.N===0)&&(pe=we),new uo(pe,te)},uo.prototype.evaluate=function(){return this.value},uo.prototype.eachChild=function(){},uo.prototype.outputDefined=function(){return!0},uo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ai?["rgba"].concat(this.value.toArray()):this.value instanceof Zi?this.value.serialize():this.value};var zi=function(C){this.name="ExpressionEvaluationError",this.message=C};zi.prototype.toJSON=function(){return this.message};var go={string:Br,number:wr,boolean:An,object:ua},ao=function(C,B){this.type=C,this.args=B};ao.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var te=1,pe,we=C[0];if(we==="array"){var Me;if(C.length>2){var Ne=C[1];if(typeof Ne!="string"||!(Ne in go)||Ne==="object")return B.error('The item type argument of "array" must be one of string, number, boolean',1);Me=go[Ne],te++}else Me=Sn;var rt;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return B.error('The length argument to "array" must be a positive integer literal',2);rt=C[2],te++}pe=ga(Me,rt)}else pe=go[we];for(var vt=[];te<C.length;te++){var mt=B.parse(C[te],te,Sn);if(!mt)return null;vt.push(mt)}return new ao(pe,vt)},ao.prototype.evaluate=function(C){for(var B=0;B<this.args.length;B++){var te=this.args[B].evaluate(C),pe=ro(this.type,Fi(te));if(pe){if(B===this.args.length-1)throw new zi("Expected value to be of type "+Ia(this.type)+", but found "+Ia(Fi(te))+" instead.")}else return te}return null},ao.prototype.eachChild=function(C){this.args.forEach(C)},ao.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},ao.prototype.serialize=function(){var C=this.type,B=[C.kind];if(C.kind==="array"){var te=C.itemType;if(te.kind==="string"||te.kind==="number"||te.kind==="boolean"){B.push(te.kind);var pe=C.N;(typeof pe=="number"||this.args.length>1)&&B.push(pe)}}return B.concat(this.args.map(function(we){return we.serialize()}))};var cs=function(C){this.type=Ma,this.sections=C};cs.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var te=C[1];if(!Array.isArray(te)&&typeof te=="object")return B.error("First argument must be an image or text section.");for(var pe=[],we=!1,Me=1;Me<=C.length-1;++Me){var Ne=C[Me];if(we&&typeof Ne=="object"&&!Array.isArray(Ne)){we=!1;var rt=null;if(Ne["font-scale"]&&(rt=B.parse(Ne["font-scale"],1,wr),!rt))return null;var vt=null;if(Ne["text-font"]&&(vt=B.parse(Ne["text-font"],1,ga(Br)),!vt))return null;var mt=null;if(Ne["text-color"]&&(mt=B.parse(Ne["text-color"],1,Yn),!mt))return null;var Ut=pe[pe.length-1];Ut.scale=rt,Ut.font=vt,Ut.textColor=mt}else{var ir=B.parse(C[Me],1,Sn);if(!ir)return null;var tr=ir.type.kind;if(tr!=="string"&&tr!=="value"&&tr!=="null"&&tr!=="resolvedImage")return B.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");we=!0,pe.push({content:ir,scale:null,font:null,textColor:null})}}return new cs(pe)},cs.prototype.evaluate=function(C){var B=function(te){var pe=te.content.evaluate(C);return Fi(pe)===ka?new Gs("",pe,null,null,null):new Gs(hl(pe),null,te.scale?te.scale.evaluate(C):null,te.font?te.font.evaluate(C).join(","):null,te.textColor?te.textColor.evaluate(C):null)};return new Zi(this.sections.map(B))},cs.prototype.eachChild=function(C){for(var B=0,te=this.sections;B<te.length;B+=1){var pe=te[B];C(pe.content),pe.scale&&C(pe.scale),pe.font&&C(pe.font),pe.textColor&&C(pe.textColor)}},cs.prototype.outputDefined=function(){return!1},cs.prototype.serialize=function(){for(var C=["format"],B=0,te=this.sections;B<te.length;B+=1){var pe=te[B];C.push(pe.content.serialize());var we={};pe.scale&&(we["font-scale"]=pe.scale.serialize()),pe.font&&(we["text-font"]=pe.font.serialize()),pe.textColor&&(we["text-color"]=pe.textColor.serialize()),C.push(we)}return C};var qs=function(C){this.type=ka,this.input=C};qs.parse=function(C,B){if(C.length!==2)return B.error("Expected two arguments.");var te=B.parse(C[1],1,Br);return te?new qs(te):B.error("No image name provided.")},qs.prototype.evaluate=function(C){var B=this.input.evaluate(C),te=Io.fromString(B);return te&&C.availableImages&&(te.available=C.availableImages.indexOf(B)>-1),te},qs.prototype.eachChild=function(C){C(this.input)},qs.prototype.outputDefined=function(){return!1},qs.prototype.serialize=function(){return["image",this.input.serialize()]};var lu={"to-boolean":An,"to-color":Yn,"to-number":wr,"to-string":Br},ts=function(C,B){this.type=C,this.args=B};ts.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var te=C[0];if((te==="to-boolean"||te==="to-string")&&C.length!==2)return B.error("Expected one argument.");for(var pe=lu[te],we=[],Me=1;Me<C.length;Me++){var Ne=B.parse(C[Me],Me,Sn);if(!Ne)return null;we.push(Ne)}return new ts(pe,we)},ts.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var B,te,pe=0,we=this.args;pe<we.length;pe+=1){var Me=we[pe];if(B=Me.evaluate(C),te=null,B instanceof Ai)return B;if(typeof B=="string"){var Ne=C.parseColor(B);if(Ne)return Ne}else if(Array.isArray(B)&&(B.length<3||B.length>4?te="Invalid rbga value "+JSON.stringify(B)+": expected an array containing either three or four numeric values.":te=kl(B[0],B[1],B[2],B[3]),!te))return new Ai(B[0]/255,B[1]/255,B[2]/255,B[3])}throw new zi(te||"Could not parse color from value '"+(typeof B=="string"?B:String(JSON.stringify(B)))+"'")}else if(this.type.kind==="number"){for(var rt=null,vt=0,mt=this.args;vt<mt.length;vt+=1){var Ut=mt[vt];if(rt=Ut.evaluate(C),rt===null)return 0;var ir=Number(rt);if(!isNaN(ir))return ir}throw new zi("Could not convert "+JSON.stringify(rt)+" to number.")}else return this.type.kind==="formatted"?Zi.fromString(hl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?Io.fromString(hl(this.args[0].evaluate(C))):hl(this.args[0].evaluate(C))},ts.prototype.eachChild=function(C){this.args.forEach(C)},ts.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},ts.prototype.serialize=function(){if(this.type.kind==="formatted")return new cs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new qs(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(B){C.push(B.serialize())}),C};var Mu=["Unknown","Point","LineString","Polygon"],Ds=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ds.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ds.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Mu[this.feature.type]:this.feature.type:null},Ds.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ds.prototype.canonicalID=function(){return this.canonical},Ds.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ds.prototype.parseColor=function(C){var B=this._parseColorCache[C];return B||(B=this._parseColorCache[C]=Ai.parse(C)),B};var No=function(C,B,te,pe){this.name=C,this.type=B,this._evaluate=te,this.args=pe};No.prototype.evaluate=function(C){return this._evaluate(C,this.args)},No.prototype.eachChild=function(C){this.args.forEach(C)},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},No.parse=function(C,B){var te,pe=C[0],we=No.definitions[pe];if(!we)return B.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(we)?we[0]:we.type,Ne=Array.isArray(we)?[[we[1],we[2]]]:we.overloads,rt=Ne.filter(function(Ua){var Ha=Ua[0];return!Array.isArray(Ha)||Ha.length===C.length-1}),vt=null,mt=0,Ut=rt;mt<Ut.length;mt+=1){var ir=Ut[mt],tr=ir[0],xr=ir[1];vt=new Fo(B.registry,B.path,null,B.scope);for(var Ur=[],hn=!1,an=1;an<C.length;an++){var Rn=C[an],Mn=Array.isArray(tr)?tr[an-1]:tr.type,Dn=vt.parse(Rn,1+Ur.length,Mn);if(!Dn){hn=!0;break}Ur.push(Dn)}if(!hn){if(Array.isArray(tr)&&tr.length!==Ur.length){vt.error("Expected "+tr.length+" arguments, but found "+Ur.length+" instead.");continue}for(var Vn=0;Vn<Ur.length;Vn++){var qn=Array.isArray(tr)?tr[Vn]:tr.type,da=Ur[Vn];vt.concat(Vn+1).checkSubtype(qn,da.type)}if(vt.errors.length===0)return new No(pe,Me,xr,Ur)}}if(rt.length===1)(te=B.errors).push.apply(te,vt.errors);else{for(var va=rt.length?rt:Ne,Wa=va.map(function(Ua){var Ha=Ua[0];return pc(Ha)}).join(" | "),Da=[],Oa=1;Oa<C.length;Oa++){var fi=B.parse(C[Oa],1+Da.length);if(!fi)return null;Da.push(Ia(fi.type))}B.error("Expected arguments of type "+Wa+", but found ("+Da.join(", ")+") instead.")}return null},No.register=function(C,B){No.definitions=B;for(var te in B)C[te]=No};function pc(k){return Array.isArray(k)?"("+k.map(Ia).join(", ")+")":"("+Ia(k.type)+"...)"}var ko=function(C,B,te){this.type=fa,this.locale=te,this.caseSensitive=C,this.diacriticSensitive=B};ko.parse=function(C,B){if(C.length!==2)return B.error("Expected one argument.");var te=C[1];if(typeof te!="object"||Array.isArray(te))return B.error("Collator options argument must be an object.");var pe=B.parse(te["case-sensitive"]===void 0?!1:te["case-sensitive"],1,An);if(!pe)return null;var we=B.parse(te["diacritic-sensitive"]===void 0?!1:te["diacritic-sensitive"],1,An);if(!we)return null;var Me=null;return te.locale&&(Me=B.parse(te.locale,1,Br),!Me)?null:new ko(pe,we,Me)},ko.prototype.evaluate=function(C){return new Hs(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},ko.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},ko.prototype.outputDefined=function(){return!1},ko.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var Rs=8192;function Xl(k,C){k[0]=Math.min(k[0],C[0]),k[1]=Math.min(k[1],C[1]),k[2]=Math.max(k[2],C[0]),k[3]=Math.max(k[3],C[1])}function ju(k){return(180+k)/360}function Zu(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function Ys(k,C){return!(k[0]<=C[0]||k[2]>=C[2]||k[1]<=C[1]||k[3]>=C[3])}function Cl(k,C){var B=ju(k[0]),te=Zu(k[1]),pe=Math.pow(2,C.z);return[Math.round(B*pe*Rs),Math.round(te*pe*Rs)]}function Is(k,C,B){var te=k[0]-C[0],pe=k[1]-C[1],we=k[0]-B[0],Me=k[1]-B[1];return te*Me-we*pe===0&&te*we<=0&&pe*Me<=0}function uu(k,C,B){return C[1]>k[1]!=B[1]>k[1]&&k[0]<(B[0]-C[0])*(k[1]-C[1])/(B[1]-C[1])+C[0]}function vl(k,C){for(var B=!1,te=0,pe=C.length;te<pe;te++)for(var we=C[te],Me=0,Ne=we.length;Me<Ne-1;Me++){if(Is(k,we[Me],we[Me+1]))return!1;uu(k,we[Me],we[Me+1])&&(B=!B)}return B}function cu(k,C){for(var B=0;B<C.length;B++)if(vl(k,C[B]))return!0;return!1}function Eu(k,C){return k[0]*C[1]-k[1]*C[0]}function jl(k,C,B,te){var pe=k[0]-B[0],we=k[1]-B[1],Me=C[0]-B[0],Ne=C[1]-B[1],rt=te[0]-B[0],vt=te[1]-B[1],mt=pe*vt-rt*we,Ut=Me*vt-rt*Ne;return mt>0&&Ut<0||mt<0&&Ut>0}function Su(k,C,B,te){var pe=[C[0]-k[0],C[1]-k[1]],we=[te[0]-B[0],te[1]-B[1]];return Eu(we,pe)===0?!1:!!(jl(k,C,B,te)&&jl(B,te,k,C))}function el(k,C,B){for(var te=0,pe=B;te<pe.length;te+=1)for(var we=pe[te],Me=0;Me<we.length-1;++Me)if(Su(k,C,we[Me],we[Me+1]))return!0;return!1}function Zl(k,C){for(var B=0;B<k.length;++B)if(!vl(k[B],C))return!1;for(var te=0;te<k.length-1;++te)if(el(k[te],k[te+1],C))return!1;return!0}function pl(k,C){for(var B=0;B<C.length;B++)if(Zl(k,C[B]))return!0;return!1}function Ts(k,C,B){for(var te=[],pe=0;pe<k.length;pe++){for(var we=[],Me=0;Me<k[pe].length;Me++){var Ne=Cl(k[pe][Me],B);Xl(C,Ne),we.push(Ne)}te.push(we)}return te}function Ll(k,C,B){for(var te=[],pe=0;pe<k.length;pe++){var we=Ts(k[pe],C,B);te.push(we)}return te}function fu(k,C,B,te){if(k[0]<B[0]||k[0]>B[2]){var pe=te*.5,we=k[0]-B[0]>pe?-te:B[0]-k[0]>pe?te:0;we===0&&(we=k[0]-B[2]>pe?-te:B[2]-k[0]>pe?te:0),k[0]+=we}Xl(C,k)}function ku(k){k[0]=k[1]=1/0,k[2]=k[3]=-1/0}function Cu(k,C,B,te){for(var pe=Math.pow(2,te.z)*Rs,we=[te.x*Rs,te.y*Rs],Me=[],Ne=0,rt=k;Ne<rt.length;Ne+=1)for(var vt=rt[Ne],mt=0,Ut=vt;mt<Ut.length;mt+=1){var ir=Ut[mt],tr=[ir.x+we[0],ir.y+we[1]];fu(tr,C,B,pe),Me.push(tr)}return Me}function Kl(k,C,B,te){for(var pe=Math.pow(2,te.z)*Rs,we=[te.x*Rs,te.y*Rs],Me=[],Ne=0,rt=k;Ne<rt.length;Ne+=1){for(var vt=rt[Ne],mt=[],Ut=0,ir=vt;Ut<ir.length;Ut+=1){var tr=ir[Ut],xr=[tr.x+we[0],tr.y+we[1]];Xl(C,xr),mt.push(xr)}Me.push(mt)}if(C[2]-C[0]<=pe/2){ku(C);for(var Ur=0,hn=Me;Ur<hn.length;Ur+=1)for(var an=hn[Ur],Rn=0,Mn=an;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];fu(Dn,C,B,pe)}}return Me}function tl(k,C){var B=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=k.canonicalID();if(C.type==="Polygon"){var we=Ts(C.coordinates,te,pe),Me=Cu(k.geometry(),B,te,pe);if(!Ys(B,te))return!1;for(var Ne=0,rt=Me;Ne<rt.length;Ne+=1){var vt=rt[Ne];if(!vl(vt,we))return!1}}if(C.type==="MultiPolygon"){var mt=Ll(C.coordinates,te,pe),Ut=Cu(k.geometry(),B,te,pe);if(!Ys(B,te))return!1;for(var ir=0,tr=Ut;ir<tr.length;ir+=1){var xr=tr[ir];if(!cu(xr,mt))return!1}}return!0}function Lu(k,C){var B=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=k.canonicalID();if(C.type==="Polygon"){var we=Ts(C.coordinates,te,pe),Me=Kl(k.geometry(),B,te,pe);if(!Ys(B,te))return!1;for(var Ne=0,rt=Me;Ne<rt.length;Ne+=1){var vt=rt[Ne];if(!Zl(vt,we))return!1}}if(C.type==="MultiPolygon"){var mt=Ll(C.coordinates,te,pe),Ut=Kl(k.geometry(),B,te,pe);if(!Ys(B,te))return!1;for(var ir=0,tr=Ut;ir<tr.length;ir+=1){var xr=tr[ir];if(!pl(xr,mt))return!1}}return!0}var fs=function(C,B){this.type=An,this.geojson=C,this.geometries=B};fs.parse=function(C,B){if(C.length!==2)return B.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(ws(C[1])){var te=C[1];if(te.type==="FeatureCollection")for(var pe=0;pe<te.features.length;++pe){var we=te.features[pe].geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new fs(te,te.features[pe].geometry)}else if(te.type==="Feature"){var Me=te.geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new fs(te,te.geometry)}else if(te.type==="Polygon"||te.type==="MultiPolygon")return new fs(te,te)}return B.error("'within' expression requires valid geojson object that contains polygon geometry type.")},fs.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return tl(C,this.geometries);if(C.geometryType()==="LineString")return Lu(C,this.geometries)}return!1},fs.prototype.eachChild=function(){},fs.prototype.outputDefined=function(){return!0},fs.prototype.serialize=function(){return["within",this.geojson]};function Wo(k){if(k instanceof No){if(k.name==="get"&&k.args.length===1)return!1;if(k.name==="feature-state")return!1;if(k.name==="has"&&k.args.length===1)return!1;if(k.name==="properties"||k.name==="geometry-type"||k.name==="id")return!1;if(/^filter-/.test(k.name))return!1}if(k instanceof fs)return!1;var C=!0;return k.eachChild(function(B){C&&!Wo(B)&&(C=!1)}),C}function rl(k){if(k instanceof No&&k.name==="feature-state")return!1;var C=!0;return k.eachChild(function(B){C&&!rl(B)&&(C=!1)}),C}function hu(k,C){if(k instanceof No&&C.indexOf(k.name)>=0)return!1;var B=!0;return k.eachChild(function(te){B&&!hu(te,C)&&(B=!1)}),B}var As=function(C,B){this.type=B.type,this.name=C,this.boundExpression=B};As.parse=function(C,B){if(C.length!==2||typeof C[1]!="string")return B.error("'var' expression requires exactly one string literal argument.");var te=C[1];return B.scope.has(te)?new As(te,B.scope.get(te)):B.error('Unknown variable "'+te+'". Make sure "'+te+'" has been bound in an enclosing "let" expression before using it.',1)},As.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},As.prototype.eachChild=function(){},As.prototype.outputDefined=function(){return!1},As.prototype.serialize=function(){return["var",this.name]};var Fo=function(C,B,te,pe,we){B===void 0&&(B=[]),pe===void 0&&(pe=new gn),we===void 0&&(we=[]),this.registry=C,this.path=B,this.key=B.map(function(Me){return"["+Me+"]"}).join(""),this.scope=pe,this.errors=we,this.expectedType=te};Fo.prototype.parse=function(C,B,te,pe,we){return we===void 0&&(we={}),B?this.concat(B,te,pe)._parse(C,we):this._parse(C,we)},Fo.prototype._parse=function(C,B){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function te(mt,Ut,ir){return ir==="assert"?new ao(Ut,[mt]):ir==="coerce"?new ts(Ut,[mt]):mt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var pe=C[0];if(typeof pe!="string")return this.error("Expression name must be a string, but found "+typeof pe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var we=this.registry[pe];if(we){var Me=we.parse(C,this);if(!Me)return null;if(this.expectedType){var Ne=this.expectedType,rt=Me.type;if((Ne.kind==="string"||Ne.kind==="number"||Ne.kind==="boolean"||Ne.kind==="object"||Ne.kind==="array")&&rt.kind==="value")Me=te(Me,Ne,B.typeAnnotation||"assert");else if((Ne.kind==="color"||Ne.kind==="formatted"||Ne.kind==="resolvedImage")&&(rt.kind==="value"||rt.kind==="string"))Me=te(Me,Ne,B.typeAnnotation||"coerce");else if(this.checkSubtype(Ne,rt))return null}if(!(Me instanceof uo)&&Me.type.kind!=="resolvedImage"&&Pl(Me)){var vt=new Ds;try{Me=new uo(Me.type,Me.evaluate(vt))}catch(mt){return this.error(mt.message),null}}return Me}return this.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C>"u"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},Fo.prototype.concat=function(C,B,te){var pe=typeof C=="number"?this.path.concat(C):this.path,we=te?this.scope.concat(te):this.scope;return new Fo(this.registry,pe,B||null,we,this.errors)},Fo.prototype.error=function(C){for(var B=[],te=arguments.length-1;te-- >0;)B[te]=arguments[te+1];var pe=""+this.key+B.map(function(we){return"["+we+"]"}).join("");this.errors.push(new Tn(pe,C))},Fo.prototype.checkSubtype=function(C,B){var te=ro(C,B);return te&&this.error(te),te};function Pl(k){if(k instanceof As)return Pl(k.boundExpression);if(k instanceof No&&k.name==="error")return!1;if(k instanceof ko)return!1;if(k instanceof fs)return!1;var C=k instanceof ts||k instanceof ao,B=!0;return k.eachChild(function(te){C?B=B&&Pl(te):B=B&&te instanceof uo}),B?Wo(k)&&hu(k,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Ms(k,C){for(var B=k.length-1,te=0,pe=B,we=0,Me,Ne;te<=pe;)if(we=Math.floor((te+pe)/2),Me=k[we],Ne=k[we+1],Me<=C){if(we===B||C<Ne)return we;te=we+1}else if(Me>C)pe=we-1;else throw new zi("Input is not a number.");return 0}var Fs=function(C,B,te){this.type=C,this.input=B,this.labels=[],this.outputs=[];for(var pe=0,we=te;pe<we.length;pe+=1){var Me=we[pe],Ne=Me[0],rt=Me[1];this.labels.push(Ne),this.outputs.push(rt)}};Fs.parse=function(C,B){if(C.length-1<4)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return B.error("Expected an even number of arguments.");var te=B.parse(C[1],1,wr);if(!te)return null;var pe=[],we=null;B.expectedType&&B.expectedType.kind!=="value"&&(we=B.expectedType);for(var Me=1;Me<C.length;Me+=2){var Ne=Me===1?-1/0:C[Me],rt=C[Me+1],vt=Me,mt=Me+1;if(typeof Ne!="number")return B.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',vt);if(pe.length&&pe[pe.length-1][0]>=Ne)return B.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',vt);var Ut=B.parse(rt,mt,we);if(!Ut)return null;we=we||Ut.type,pe.push([Ne,Ut])}return new Fs(we,te,pe)},Fs.prototype.evaluate=function(C){var B=this.labels,te=this.outputs;if(B.length===1)return te[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=B[0])return te[0].evaluate(C);var we=B.length;if(pe>=B[we-1])return te[we-1].evaluate(C);var Me=Ms(B,pe);return te[Me].evaluate(C)},Fs.prototype.eachChild=function(C){C(this.input);for(var B=0,te=this.outputs;B<te.length;B+=1){var pe=te[B];C(pe)}},Fs.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Fs.prototype.serialize=function(){for(var C=["step",this.input.serialize()],B=0;B<this.labels.length;B++)B>0&&C.push(this.labels[B]),C.push(this.outputs[B].serialize());return C};function mo(k,C,B){return k*(1-B)+C*B}function Dl(k,C,B){return new Ai(mo(k.r,C.r,B),mo(k.g,C.g,B),mo(k.b,C.b,B),mo(k.a,C.a,B))}function Rl(k,C,B){return k.map(function(te,pe){return mo(te,C[pe],B)})}var nl=Object.freeze({__proto__:null,number:mo,color:Dl,array:Rl}),hs=.95047,dl=1,ml=1.08883,$l=4/29,Il=6/29,al=3*Il*Il,Ku=Il*Il*Il,vs=Math.PI/180,Ws=180/Math.PI;function vu(k){return k>Ku?Math.pow(k,1/3):k/al+$l}function yl(k){return k>Il?k*k*k:al*(k-$l)}function Fl(k){return 255*(k<=.0031308?12.92*k:1.055*Math.pow(k,1/2.4)-.055)}function il(k){return k/=255,k<=.04045?k/12.92:Math.pow((k+.055)/1.055,2.4)}function zl(k){var C=il(k.r),B=il(k.g),te=il(k.b),pe=vu((.4124564*C+.3575761*B+.1804375*te)/hs),we=vu((.2126729*C+.7151522*B+.072175*te)/dl),Me=vu((.0193339*C+.119192*B+.9503041*te)/ml);return{l:116*we-16,a:500*(pe-we),b:200*(we-Me),alpha:k.a}}function pu(k){var C=(k.l+16)/116,B=isNaN(k.a)?C:C+k.a/500,te=isNaN(k.b)?C:C-k.b/200;return C=dl*yl(C),B=hs*yl(B),te=ml*yl(te),new Ai(Fl(3.2404542*B-1.5371385*C-.4985314*te),Fl(-.969266*B+1.8760108*C+.041556*te),Fl(.0556434*B-.2040259*C+1.0572252*te),k.alpha)}function Pu(k,C,B){return{l:mo(k.l,C.l,B),a:mo(k.a,C.a,B),b:mo(k.b,C.b,B),alpha:mo(k.alpha,C.alpha,B)}}function dc(k){var C=zl(k),B=C.l,te=C.a,pe=C.b,we=Math.atan2(pe,te)*Ws;return{h:we<0?we+360:we,c:Math.sqrt(te*te+pe*pe),l:B,alpha:k.a}}function Bi(k){var C=k.h*vs,B=k.c,te=k.l;return pu({l:te,a:Math.cos(C)*B,b:Math.sin(C)*B,alpha:k.alpha})}function xl(k,C,B){var te=C-k;return k+B*(te>180||te<-180?te-360*Math.round(te/360):te)}function ol(k,C,B){return{h:xl(k.h,C.h,B),c:mo(k.c,C.c,B),l:mo(k.l,C.l,B),alpha:mo(k.alpha,C.alpha,B)}}var rs={forward:zl,reverse:pu,interpolate:Pu},ps={forward:dc,reverse:Bi,interpolate:ol},Ol=Object.freeze({__proto__:null,lab:rs,hcl:ps}),co=function(C,B,te,pe,we){this.type=C,this.operator=B,this.interpolation=te,this.input=pe,this.labels=[],this.outputs=[];for(var Me=0,Ne=we;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=rt[0],mt=rt[1];this.labels.push(vt),this.outputs.push(mt)}};co.interpolationFactor=function(C,B,te,pe){var we=0;if(C.name==="exponential")we=Du(B,C.base,te,pe);else if(C.name==="linear")we=Du(B,1,te,pe);else if(C.name==="cubic-bezier"){var Me=C.controlPoints,Ne=new n(Me[0],Me[1],Me[2],Me[3]);we=Ne.solve(Du(B,1,te,pe))}return we},co.parse=function(C,B){var te=C[0],pe=C[1],we=C[2],Me=C.slice(3);if(!Array.isArray(pe)||pe.length===0)return B.error("Expected an interpolation type expression.",1);if(pe[0]==="linear")pe={name:"linear"};else if(pe[0]==="exponential"){var Ne=pe[1];if(typeof Ne!="number")return B.error("Exponential interpolation requires a numeric base.",1,1);pe={name:"exponential",base:Ne}}else if(pe[0]==="cubic-bezier"){var rt=pe.slice(1);if(rt.length!==4||rt.some(function(an){return typeof an!="number"||an<0||an>1}))return B.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);pe={name:"cubic-bezier",controlPoints:rt}}else return B.error("Unknown interpolation type "+String(pe[0]),1,0);if(C.length-1<4)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return B.error("Expected an even number of arguments.");if(we=B.parse(we,2,wr),!we)return null;var vt=[],mt=null;te==="interpolate-hcl"||te==="interpolate-lab"?mt=Yn:B.expectedType&&B.expectedType.kind!=="value"&&(mt=B.expectedType);for(var Ut=0;Ut<Me.length;Ut+=2){var ir=Me[Ut],tr=Me[Ut+1],xr=Ut+3,Ur=Ut+4;if(typeof ir!="number")return B.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',xr);if(vt.length&&vt[vt.length-1][0]>=ir)return B.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',xr);var hn=B.parse(tr,Ur,mt);if(!hn)return null;mt=mt||hn.type,vt.push([ir,hn])}return mt.kind!=="number"&&mt.kind!=="color"&&!(mt.kind==="array"&&mt.itemType.kind==="number"&&typeof mt.N=="number")?B.error("Type "+Ia(mt)+" is not interpolatable."):new co(mt,te,pe,we,vt)},co.prototype.evaluate=function(C){var B=this.labels,te=this.outputs;if(B.length===1)return te[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=B[0])return te[0].evaluate(C);var we=B.length;if(pe>=B[we-1])return te[we-1].evaluate(C);var Me=Ms(B,pe),Ne=B[Me],rt=B[Me+1],vt=co.interpolationFactor(this.interpolation,pe,Ne,rt),mt=te[Me].evaluate(C),Ut=te[Me+1].evaluate(C);return this.operator==="interpolate"?nl[this.type.kind.toLowerCase()](mt,Ut,vt):this.operator==="interpolate-hcl"?ps.reverse(ps.interpolate(ps.forward(mt),ps.forward(Ut),vt)):rs.reverse(rs.interpolate(rs.forward(mt),rs.forward(Ut),vt))},co.prototype.eachChild=function(C){C(this.input);for(var B=0,te=this.outputs;B<te.length;B+=1){var pe=te[B];C(pe)}},co.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},co.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var B=[this.operator,C,this.input.serialize()],te=0;te<this.labels.length;te++)B.push(this.labels[te],this.outputs[te].serialize());return B};function Du(k,C,B,te){var pe=te-B,we=k-B;return pe===0?0:C===1?we/pe:(Math.pow(C,we)-1)/(Math.pow(C,pe)-1)}var Xo=function(C,B){this.type=C,this.args=B};Xo.parse=function(C,B){if(C.length<2)return B.error("Expectected at least one argument.");var te=null,pe=B.expectedType;pe&&pe.kind!=="value"&&(te=pe);for(var we=[],Me=0,Ne=C.slice(1);Me<Ne.length;Me+=1){var rt=Ne[Me],vt=B.parse(rt,1+we.length,te,void 0,{typeAnnotation:"omit"});if(!vt)return null;te=te||vt.type,we.push(vt)}var mt=pe&&we.some(function(Ut){return ro(pe,Ut.type)});return mt?new Xo(Sn,we):new Xo(te,we)},Xo.prototype.evaluate=function(C){for(var B=null,te=0,pe,we=0,Me=this.args;we<Me.length;we+=1){var Ne=Me[we];if(te++,B=Ne.evaluate(C),B&&B instanceof Io&&!B.available&&(pe||(pe=B.name),B=null,te===this.args.length&&(B=pe)),B!==null)break}return B},Xo.prototype.eachChild=function(C){this.args.forEach(C)},Xo.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Xo.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(B){C.push(B.serialize())}),C};var Xs=function(C,B){this.type=B.type,this.bindings=[].concat(C),this.result=B};Xs.prototype.evaluate=function(C){return this.result.evaluate(C)},Xs.prototype.eachChild=function(C){for(var B=0,te=this.bindings;B<te.length;B+=1){var pe=te[B];C(pe[1])}C(this.result)},Xs.parse=function(C,B){if(C.length<4)return B.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var te=[],pe=1;pe<C.length-1;pe+=2){var we=C[pe];if(typeof we!="string")return B.error("Expected string, but found "+typeof we+" instead.",pe);if(/[^a-zA-Z0-9_]/.test(we))return B.error("Variable names must contain only alphanumeric characters or '_'.",pe);var Me=B.parse(C[pe+1],pe+1);if(!Me)return null;te.push([we,Me])}var Ne=B.parse(C[C.length-1],C.length-1,B.expectedType,te);return Ne?new Xs(te,Ne):null},Xs.prototype.outputDefined=function(){return this.result.outputDefined()},Xs.prototype.serialize=function(){for(var C=["let"],B=0,te=this.bindings;B<te.length;B+=1){var pe=te[B],we=pe[0],Me=pe[1];C.push(we,Me.serialize())}return C.push(this.result.serialize()),C};var zs=function(C,B,te){this.type=C,this.index=B,this.input=te};zs.parse=function(C,B){if(C.length!==3)return B.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1,wr),pe=B.parse(C[2],2,ga(B.expectedType||Sn));if(!te||!pe)return null;var we=pe.type;return new zs(we.itemType,te,pe)},zs.prototype.evaluate=function(C){var B=this.index.evaluate(C),te=this.input.evaluate(C);if(B<0)throw new zi("Array index out of bounds: "+B+" < 0.");if(B>=te.length)throw new zi("Array index out of bounds: "+B+" > "+(te.length-1)+".");if(B!==Math.floor(B))throw new zi("Array index must be an integer, but found "+B+" instead.");return te[B]},zs.prototype.eachChild=function(C){C(this.index),C(this.input)},zs.prototype.outputDefined=function(){return!1},zs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Es=function(C,B){this.type=An,this.needle=C,this.haystack=B};Es.parse=function(C,B){if(C.length!==3)return B.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1,Sn),pe=B.parse(C[2],2,Sn);return!te||!pe?null:Qo(te.type,[An,Br,wr,_r,Sn])?new Es(te,pe):B.error("Expected first argument to be of type boolean, string, number or null, but found "+Ia(te.type)+" instead")},Es.prototype.evaluate=function(C){var B=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!te)return!1;if(!Qs(B,["boolean","string","number","null"]))throw new zi("Expected first argument to be of type boolean, string, number or null, but found "+Ia(Fi(B))+" instead.");if(!Qs(te,["string","array"]))throw new zi("Expected second argument to be of type array or string, but found "+Ia(Fi(te))+" instead.");return te.indexOf(B)>=0},Es.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},Es.prototype.outputDefined=function(){return!0},Es.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ho=function(C,B,te){this.type=wr,this.needle=C,this.haystack=B,this.fromIndex=te};Ho.parse=function(C,B){if(C.length<=2||C.length>=5)return B.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1,Sn),pe=B.parse(C[2],2,Sn);if(!te||!pe)return null;if(!Qo(te.type,[An,Br,wr,_r,Sn]))return B.error("Expected first argument to be of type boolean, string, number or null, but found "+Ia(te.type)+" instead");if(C.length===4){var we=B.parse(C[3],3,wr);return we?new Ho(te,pe,we):null}else return new Ho(te,pe)},Ho.prototype.evaluate=function(C){var B=this.needle.evaluate(C),te=this.haystack.evaluate(C);if(!Qs(B,["boolean","string","number","null"]))throw new zi("Expected first argument to be of type boolean, string, number or null, but found "+Ia(Fi(B))+" instead.");if(!Qs(te,["string","array"]))throw new zi("Expected second argument to be of type array or string, but found "+Ia(Fi(te))+" instead.");if(this.fromIndex){var pe=this.fromIndex.evaluate(C);return te.indexOf(B,pe)}return te.indexOf(B)},Ho.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},Ho.prototype.outputDefined=function(){return!1},Ho.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ki=function(C,B,te,pe,we,Me){this.inputType=C,this.type=B,this.input=te,this.cases=pe,this.outputs=we,this.otherwise=Me};Ki.parse=function(C,B){if(C.length<5)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!==1)return B.error("Expected an even number of arguments.");var te,pe;B.expectedType&&B.expectedType.kind!=="value"&&(pe=B.expectedType);for(var we={},Me=[],Ne=2;Ne<C.length-1;Ne+=2){var rt=C[Ne],vt=C[Ne+1];Array.isArray(rt)||(rt=[rt]);var mt=B.concat(Ne);if(rt.length===0)return mt.error("Expected at least one branch label.");for(var Ut=0,ir=rt;Ut<ir.length;Ut+=1){var tr=ir[Ut];if(typeof tr!="number"&&typeof tr!="string")return mt.error("Branch labels must be numbers or strings.");if(typeof tr=="number"&&Math.abs(tr)>Number.MAX_SAFE_INTEGER)return mt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof tr=="number"&&Math.floor(tr)!==tr)return mt.error("Numeric branch labels must be integer values.");if(!te)te=Fi(tr);else if(mt.checkSubtype(te,Fi(tr)))return null;if(typeof we[String(tr)]<"u")return mt.error("Branch labels must be unique.");we[String(tr)]=Me.length}var xr=B.parse(vt,Ne,pe);if(!xr)return null;pe=pe||xr.type,Me.push(xr)}var Ur=B.parse(C[1],1,Sn);if(!Ur)return null;var hn=B.parse(C[C.length-1],C.length-1,pe);return!hn||Ur.type.kind!=="value"&&B.concat(1).checkSubtype(te,Ur.type)?null:new Ki(te,pe,Ur,we,Me,hn)},Ki.prototype.evaluate=function(C){var B=this.input.evaluate(C),te=Fi(B)===this.inputType&&this.outputs[this.cases[B]]||this.otherwise;return te.evaluate(C)},Ki.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Ki.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Ki.prototype.serialize=function(){for(var C=this,B=["match",this.input.serialize()],te=Object.keys(this.cases).sort(),pe=[],we={},Me=0,Ne=te;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=we[this.cases[rt]];vt===void 0?(we[this.cases[rt]]=pe.length,pe.push([this.cases[rt],[rt]])):pe[vt][1].push(rt)}for(var mt=function(Ur){return C.inputType.kind==="number"?Number(Ur):Ur},Ut=0,ir=pe;Ut<ir.length;Ut+=1){var tr=ir[Ut],vt=tr[0],xr=tr[1];xr.length===1?B.push(mt(xr[0])):B.push(xr.map(mt)),B.push(this.outputs[outputIndex$1].serialize())}return B.push(this.otherwise.serialize()),B};var Bo=function(C,B,te){this.type=C,this.branches=B,this.otherwise=te};Bo.parse=function(C,B){if(C.length<4)return B.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!==0)return B.error("Expected an odd number of arguments.");var te;B.expectedType&&B.expectedType.kind!=="value"&&(te=B.expectedType);for(var pe=[],we=1;we<C.length-1;we+=2){var Me=B.parse(C[we],we,An);if(!Me)return null;var Ne=B.parse(C[we+1],we+1,te);if(!Ne)return null;pe.push([Me,Ne]),te=te||Ne.type}var rt=B.parse(C[C.length-1],C.length-1,te);return rt?new Bo(te,pe,rt):null},Bo.prototype.evaluate=function(C){for(var B=0,te=this.branches;B<te.length;B+=1){var pe=te[B],we=pe[0],Me=pe[1];if(we.evaluate(C))return Me.evaluate(C)}return this.otherwise.evaluate(C)},Bo.prototype.eachChild=function(C){for(var B=0,te=this.branches;B<te.length;B+=1){var pe=te[B],we=pe[0],Me=pe[1];C(we),C(Me)}C(this.otherwise)},Bo.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var B=C[1];return B.outputDefined()})&&this.otherwise.outputDefined()},Bo.prototype.serialize=function(){var C=["case"];return this.eachChild(function(B){C.push(B.serialize())}),C};var ds=function(C,B,te,pe){this.type=C,this.input=B,this.beginIndex=te,this.endIndex=pe};ds.parse=function(C,B){if(C.length<=2||C.length>=5)return B.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1,Sn),pe=B.parse(C[2],2,wr);if(!te||!pe)return null;if(!Qo(te.type,[ga(Sn),Br,Sn]))return B.error("Expected first argument to be of type array or string, but found "+Ia(te.type)+" instead");if(C.length===4){var we=B.parse(C[3],3,wr);return we?new ds(te.type,te,pe,we):null}else return new ds(te.type,te,pe)},ds.prototype.evaluate=function(C){var B=this.input.evaluate(C),te=this.beginIndex.evaluate(C);if(!Qs(B,["string","array"]))throw new zi("Expected first argument to be of type array or string, but found "+Ia(Fi(B))+" instead.");if(this.endIndex){var pe=this.endIndex.evaluate(C);return B.slice(te,pe)}return B.slice(te)},ds.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},ds.prototype.outputDefined=function(){return!1},ds.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Ru(k,C){return k==="=="||k==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function Jl(k,C,B){return C===B}function Iu(k,C,B){return C!==B}function bt(k,C,B){return C<B}function Bt(k,C,B){return C>B}function dr(k,C,B){return C<=B}function cr(k,C,B){return C>=B}function Or(k,C,B,te){return te.compare(C,B)===0}function ln(k,C,B,te){return!Or(k,C,B,te)}function _n(k,C,B,te){return te.compare(C,B)<0}function Pn(k,C,B,te){return te.compare(C,B)>0}function zn(k,C,B,te){return te.compare(C,B)<=0}function Xn(k,C,B,te){return te.compare(C,B)>=0}function wn(k,C,B){var te=k!=="=="&&k!=="!=";return function(){function pe(we,Me,Ne){this.type=An,this.lhs=we,this.rhs=Me,this.collator=Ne,this.hasUntypedArgument=we.type.kind==="value"||Me.type.kind==="value"}return pe.parse=function(Me,Ne){if(Me.length!==3&&Me.length!==4)return Ne.error("Expected two or three arguments.");var rt=Me[0],vt=Ne.parse(Me[1],1,Sn);if(!vt)return null;if(!Ru(rt,vt.type))return Ne.concat(1).error('"'+rt+`" comparisons are not supported for type '`+Ia(vt.type)+"'.");var mt=Ne.parse(Me[2],2,Sn);if(!mt)return null;if(!Ru(rt,mt.type))return Ne.concat(2).error('"'+rt+`" comparisons are not supported for type '`+Ia(mt.type)+"'.");if(vt.type.kind!==mt.type.kind&&vt.type.kind!=="value"&&mt.type.kind!=="value")return Ne.error("Cannot compare types '"+Ia(vt.type)+"' and '"+Ia(mt.type)+"'.");te&&(vt.type.kind==="value"&&mt.type.kind!=="value"?vt=new ao(mt.type,[vt]):vt.type.kind!=="value"&&mt.type.kind==="value"&&(mt=new ao(vt.type,[mt])));var Ut=null;if(Me.length===4){if(vt.type.kind!=="string"&&mt.type.kind!=="string"&&vt.type.kind!=="value"&&mt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(Ut=Ne.parse(Me[3],3,fa),!Ut)return null}return new pe(vt,mt,Ut)},pe.prototype.evaluate=function(Me){var Ne=this.lhs.evaluate(Me),rt=this.rhs.evaluate(Me);if(te&&this.hasUntypedArgument){var vt=Fi(Ne),mt=Fi(rt);if(vt.kind!==mt.kind||!(vt.kind==="string"||vt.kind==="number"))throw new zi('Expected arguments for "'+k+'" to be (string, string) or (number, number), but found ('+vt.kind+", "+mt.kind+") instead.")}if(this.collator&&!te&&this.hasUntypedArgument){var Ut=Fi(Ne),ir=Fi(rt);if(Ut.kind!=="string"||ir.kind!=="string")return C(Me,Ne,rt)}return this.collator?B(Me,Ne,rt,this.collator.evaluate(Me)):C(Me,Ne,rt)},pe.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var Me=[k];return this.eachChild(function(Ne){Me.push(Ne.serialize())}),Me},pe}()}var Un=wn("==",Jl,Or),On=wn("!=",Iu,ln),jn=wn("<",bt,_n),ia=wn(">",Bt,Pn),Ga=wn("<=",dr,zn),za=wn(">=",cr,Xn),Ya=function(C,B,te,pe,we){this.type=Br,this.number=C,this.locale=B,this.currency=te,this.minFractionDigits=pe,this.maxFractionDigits=we};Ya.parse=function(C,B){if(C.length!==3)return B.error("Expected two arguments.");var te=B.parse(C[1],1,wr);if(!te)return null;var pe=C[2];if(typeof pe!="object"||Array.isArray(pe))return B.error("NumberFormat options argument must be an object.");var we=null;if(pe.locale&&(we=B.parse(pe.locale,1,Br),!we))return null;var Me=null;if(pe.currency&&(Me=B.parse(pe.currency,1,Br),!Me))return null;var Ne=null;if(pe["min-fraction-digits"]&&(Ne=B.parse(pe["min-fraction-digits"],1,wr),!Ne))return null;var rt=null;return pe["max-fraction-digits"]&&(rt=B.parse(pe["max-fraction-digits"],1,wr),!rt)?null:new Ya(te,we,Me,Ne,rt)},Ya.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Ya.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Ya.prototype.outputDefined=function(){return!1},Ya.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var ja=function(C){this.type=wr,this.input=C};ja.parse=function(C,B){if(C.length!==2)return B.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var te=B.parse(C[1],1);return te?te.type.kind!=="array"&&te.type.kind!=="string"&&te.type.kind!=="value"?B.error("Expected argument of type string or array, but found "+Ia(te.type)+" instead."):new ja(te):null},ja.prototype.evaluate=function(C){var B=this.input.evaluate(C);if(typeof B=="string")return B.length;if(Array.isArray(B))return B.length;throw new zi("Expected value to be of type string or array, but found "+Ia(Fi(B))+" instead.")},ja.prototype.eachChild=function(C){C(this.input)},ja.prototype.outputDefined=function(){return!1},ja.prototype.serialize=function(){var C=["length"];return this.eachChild(function(B){C.push(B.serialize())}),C};var aa={"==":Un,"!=":On,">":ia,"<":jn,">=":za,"<=":Ga,array:ao,at:zs,boolean:ao,case:Bo,coalesce:Xo,collator:ko,format:cs,image:qs,in:Es,"index-of":Ho,interpolate:co,"interpolate-hcl":co,"interpolate-lab":co,length:ja,let:Xs,literal:uo,match:Ki,number:ao,"number-format":Ya,object:ao,slice:ds,step:Fs,string:ao,"to-boolean":ts,"to-color":ts,"to-number":ts,"to-string":ts,var:As,within:fs};function ba(k,C){var B=C[0],te=C[1],pe=C[2],we=C[3];B=B.evaluate(k),te=te.evaluate(k),pe=pe.evaluate(k);var Me=we?we.evaluate(k):1,Ne=kl(B,te,pe,Me);if(Ne)throw new zi(Ne);return new Ai(B/255*Me,te/255*Me,pe/255*Me,Me)}function Qa(k,C){return k in C}function si(k,C){var B=C[k];return typeof B>"u"?null:B}function Mi(k,C,B,te){for(;B<=te;){var pe=B+te>>1;if(C[pe]===k)return!0;C[pe]>k?te=pe-1:B=pe+1}return!1}function Ei(k){return{type:k}}No.register(aa,{error:[na,[Br],function(k,C){var B=C[0];throw new zi(B.evaluate(k))}],typeof:[Br,[Sn],function(k,C){var B=C[0];return Ia(Fi(B.evaluate(k)))}],"to-rgba":[ga(wr,4),[Yn],function(k,C){var B=C[0];return B.evaluate(k).toArray()}],rgb:[Yn,[wr,wr,wr],ba],rgba:[Yn,[wr,wr,wr,wr],ba],has:{type:An,overloads:[[[Br],function(k,C){var B=C[0];return Qa(B.evaluate(k),k.properties())}],[[Br,ua],function(k,C){var B=C[0],te=C[1];return Qa(B.evaluate(k),te.evaluate(k))}]]},get:{type:Sn,overloads:[[[Br],function(k,C){var B=C[0];return si(B.evaluate(k),k.properties())}],[[Br,ua],function(k,C){var B=C[0],te=C[1];return si(B.evaluate(k),te.evaluate(k))}]]},"feature-state":[Sn,[Br],function(k,C){var B=C[0];return si(B.evaluate(k),k.featureState||{})}],properties:[ua,[],function(k){return k.properties()}],"geometry-type":[Br,[],function(k){return k.geometryType()}],id:[Sn,[],function(k){return k.id()}],zoom:[wr,[],function(k){return k.globals.zoom}],"heatmap-density":[wr,[],function(k){return k.globals.heatmapDensity||0}],"line-progress":[wr,[],function(k){return k.globals.lineProgress||0}],accumulated:[Sn,[],function(k){return k.globals.accumulated===void 0?null:k.globals.accumulated}],"+":[wr,Ei(wr),function(k,C){for(var B=0,te=0,pe=C;te<pe.length;te+=1){var we=pe[te];B+=we.evaluate(k)}return B}],"*":[wr,Ei(wr),function(k,C){for(var B=1,te=0,pe=C;te<pe.length;te+=1){var we=pe[te];B*=we.evaluate(k)}return B}],"-":{type:wr,overloads:[[[wr,wr],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)-te.evaluate(k)}],[[wr],function(k,C){var B=C[0];return-B.evaluate(k)}]]},"/":[wr,[wr,wr],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)/te.evaluate(k)}],"%":[wr,[wr,wr],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)%te.evaluate(k)}],ln2:[wr,[],function(){return Math.LN2}],pi:[wr,[],function(){return Math.PI}],e:[wr,[],function(){return Math.E}],"^":[wr,[wr,wr],function(k,C){var B=C[0],te=C[1];return Math.pow(B.evaluate(k),te.evaluate(k))}],sqrt:[wr,[wr],function(k,C){var B=C[0];return Math.sqrt(B.evaluate(k))}],log10:[wr,[wr],function(k,C){var B=C[0];return Math.log(B.evaluate(k))/Math.LN10}],ln:[wr,[wr],function(k,C){var B=C[0];return Math.log(B.evaluate(k))}],log2:[wr,[wr],function(k,C){var B=C[0];return Math.log(B.evaluate(k))/Math.LN2}],sin:[wr,[wr],function(k,C){var B=C[0];return Math.sin(B.evaluate(k))}],cos:[wr,[wr],function(k,C){var B=C[0];return Math.cos(B.evaluate(k))}],tan:[wr,[wr],function(k,C){var B=C[0];return Math.tan(B.evaluate(k))}],asin:[wr,[wr],function(k,C){var B=C[0];return Math.asin(B.evaluate(k))}],acos:[wr,[wr],function(k,C){var B=C[0];return Math.acos(B.evaluate(k))}],atan:[wr,[wr],function(k,C){var B=C[0];return Math.atan(B.evaluate(k))}],min:[wr,Ei(wr),function(k,C){return Math.min.apply(Math,C.map(function(B){return B.evaluate(k)}))}],max:[wr,Ei(wr),function(k,C){return Math.max.apply(Math,C.map(function(B){return B.evaluate(k)}))}],abs:[wr,[wr],function(k,C){var B=C[0];return Math.abs(B.evaluate(k))}],round:[wr,[wr],function(k,C){var B=C[0],te=B.evaluate(k);return te<0?-Math.round(-te):Math.round(te)}],floor:[wr,[wr],function(k,C){var B=C[0];return Math.floor(B.evaluate(k))}],ceil:[wr,[wr],function(k,C){var B=C[0];return Math.ceil(B.evaluate(k))}],"filter-==":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1];return k.properties()[B.value]===te.value}],"filter-id-==":[An,[Sn],function(k,C){var B=C[0];return k.id()===B.value}],"filter-type-==":[An,[Br],function(k,C){var B=C[0];return k.geometryType()===B.value}],"filter-<":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1],pe=k.properties()[B.value],we=te.value;return typeof pe==typeof we&&pe<we}],"filter-id-<":[An,[Sn],function(k,C){var B=C[0],te=k.id(),pe=B.value;return typeof te==typeof pe&&te<pe}],"filter->":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1],pe=k.properties()[B.value],we=te.value;return typeof pe==typeof we&&pe>we}],"filter-id->":[An,[Sn],function(k,C){var B=C[0],te=k.id(),pe=B.value;return typeof te==typeof pe&&te>pe}],"filter-<=":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1],pe=k.properties()[B.value],we=te.value;return typeof pe==typeof we&&pe<=we}],"filter-id-<=":[An,[Sn],function(k,C){var B=C[0],te=k.id(),pe=B.value;return typeof te==typeof pe&&te<=pe}],"filter->=":[An,[Br,Sn],function(k,C){var B=C[0],te=C[1],pe=k.properties()[B.value],we=te.value;return typeof pe==typeof we&&pe>=we}],"filter-id->=":[An,[Sn],function(k,C){var B=C[0],te=k.id(),pe=B.value;return typeof te==typeof pe&&te>=pe}],"filter-has":[An,[Sn],function(k,C){var B=C[0];return B.value in k.properties()}],"filter-has-id":[An,[],function(k){return k.id()!==null&&k.id()!==void 0}],"filter-type-in":[An,[ga(Br)],function(k,C){var B=C[0];return B.value.indexOf(k.geometryType())>=0}],"filter-id-in":[An,[ga(Sn)],function(k,C){var B=C[0];return B.value.indexOf(k.id())>=0}],"filter-in-small":[An,[Br,ga(Sn)],function(k,C){var B=C[0],te=C[1];return te.value.indexOf(k.properties()[B.value])>=0}],"filter-in-large":[An,[Br,ga(Sn)],function(k,C){var B=C[0],te=C[1];return Mi(k.properties()[B.value],te.value,0,te.value.length-1)}],all:{type:An,overloads:[[[An,An],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)&&te.evaluate(k)}],[Ei(An),function(k,C){for(var B=0,te=C;B<te.length;B+=1){var pe=te[B];if(!pe.evaluate(k))return!1}return!0}]]},any:{type:An,overloads:[[[An,An],function(k,C){var B=C[0],te=C[1];return B.evaluate(k)||te.evaluate(k)}],[Ei(An),function(k,C){for(var B=0,te=C;B<te.length;B+=1){var pe=te[B];if(pe.evaluate(k))return!0}return!1}]]},"!":[An,[An],function(k,C){var B=C[0];return!B.evaluate(k)}],"is-supported-script":[An,[Br],function(k,C){var B=C[0],te=k.globals&&k.globals.isSupportedScript;return te?te(B.evaluate(k)):!0}],upcase:[Br,[Br],function(k,C){var B=C[0];return B.evaluate(k).toUpperCase()}],downcase:[Br,[Br],function(k,C){var B=C[0];return B.evaluate(k).toLowerCase()}],concat:[Br,Ei(Sn),function(k,C){return C.map(function(B){return hl(B.evaluate(k))}).join("")}],"resolved-locale":[Br,[fa],function(k,C){var B=C[0];return B.evaluate(k).resolvedLocale()}]});function wi(k){return{result:"success",value:k}}function Pi(k){return{result:"error",value:k}}function hi(k){return k["property-type"]==="data-driven"||k["property-type"]==="cross-faded-data-driven"}function Co(k){return!!k.expression&&k.expression.parameters.indexOf("zoom")>-1}function io(k){return!!k.expression&&k.expression.interpolated}function li(k){return k instanceof Number?"number":k instanceof String?"string":k instanceof Boolean?"boolean":Array.isArray(k)?"array":k===null?"null":typeof k}function Aa(k){return typeof k=="object"&&k!==null&&!Array.isArray(k)}function ki(k){return k}function _o(k,C){var B=C.type==="color",te=k.stops&&typeof k.stops[0][0]=="object",pe=te||k.property!==void 0,we=te||!pe,Me=k.type||(io(C)?"exponential":"interval");if(B&&(k=yn({},k),k.stops&&(k.stops=k.stops.map(function(va){return[va[0],Ai.parse(va[1])]})),k.default?k.default=Ai.parse(k.default):k.default=Ai.parse(C.default)),k.colorSpace&&k.colorSpace!=="rgb"&&!Ol[k.colorSpace])throw new Error("Unknown color space: "+k.colorSpace);var Ne,rt,vt;if(Me==="exponential")Ne=Lo;else if(Me==="interval")Ne=Os;else if(Me==="categorical"){Ne=gs,rt=Object.create(null);for(var mt=0,Ut=k.stops;mt<Ut.length;mt+=1){var ir=Ut[mt];rt[ir[0]]=ir[1]}vt=typeof k.stops[0][0]}else if(Me==="identity")Ne=sl;else throw new Error('Unknown function type "'+Me+'"');if(te){for(var tr={},xr=[],Ur=0;Ur<k.stops.length;Ur++){var hn=k.stops[Ur],an=hn[0].zoom;tr[an]===void 0&&(tr[an]={zoom:an,type:k.type,property:k.property,default:k.default,stops:[]},xr.push(an)),tr[an].stops.push([hn[0].value,hn[1]])}for(var Rn=[],Mn=0,Dn=xr;Mn<Dn.length;Mn+=1){var Vn=Dn[Mn];Rn.push([tr[Vn].zoom,_o(tr[Vn],C)])}var qn={name:"linear"};return{kind:"composite",interpolationType:qn,interpolationFactor:co.interpolationFactor.bind(void 0,qn),zoomStops:Rn.map(function(va){return va[0]}),evaluate:function(Wa,Da){var Oa=Wa.zoom;return Lo({stops:Rn,base:k.base},C,Oa).evaluate(Oa,Da)}}}else if(we){var da=Me==="exponential"?{name:"exponential",base:k.base!==void 0?k.base:1}:null;return{kind:"camera",interpolationType:da,interpolationFactor:co.interpolationFactor.bind(void 0,da),zoomStops:k.stops.map(function(va){return va[0]}),evaluate:function(va){var Wa=va.zoom;return Ne(k,C,Wa,rt,vt)}}}else return{kind:"source",evaluate:function(Wa,Da){var Oa=Da&&Da.properties?Da.properties[k.property]:void 0;return Oa===void 0?Eo(k.default,C.default):Ne(k,C,Oa,rt,vt)}}}function Eo(k,C,B){if(k!==void 0)return k;if(C!==void 0)return C;if(B!==void 0)return B}function gs(k,C,B,te,pe){var we=typeof B===pe?te[B]:void 0;return Eo(we,k.default,C.default)}function Os(k,C,B){if(li(B)!=="number")return Eo(k.default,C.default);var te=k.stops.length;if(te===1||B<=k.stops[0][0])return k.stops[0][1];if(B>=k.stops[te-1][0])return k.stops[te-1][1];var pe=Ms(k.stops.map(function(we){return we[0]}),B);return k.stops[pe][1]}function Lo(k,C,B){var te=k.base!==void 0?k.base:1;if(li(B)!=="number")return Eo(k.default,C.default);var pe=k.stops.length;if(pe===1||B<=k.stops[0][0])return k.stops[0][1];if(B>=k.stops[pe-1][0])return k.stops[pe-1][1];var we=Ms(k.stops.map(function(Ut){return Ut[0]}),B),Me=Ns(B,te,k.stops[we][0],k.stops[we+1][0]),Ne=k.stops[we][1],rt=k.stops[we+1][1],vt=nl[C.type]||ki;if(k.colorSpace&&k.colorSpace!=="rgb"){var mt=Ol[k.colorSpace];vt=function(Ut,ir){return mt.reverse(mt.interpolate(mt.forward(Ut),mt.forward(ir),Me))}}return typeof Ne.evaluate=="function"?{evaluate:function(){for(var ir=[],tr=arguments.length;tr--;)ir[tr]=arguments[tr];var xr=Ne.evaluate.apply(void 0,ir),Ur=rt.evaluate.apply(void 0,ir);if(!(xr===void 0||Ur===void 0))return vt(xr,Ur,Me)}}:vt(Ne,rt,Me)}function sl(k,C,B){return C.type==="color"?B=Ai.parse(B):C.type==="formatted"?B=Zi.fromString(B.toString()):C.type==="resolvedImage"?B=Io.fromString(B.toString()):li(B)!==C.type&&(C.type!=="enum"||!C.values[B])&&(B=void 0),Eo(B,k.default,C.default)}function Ns(k,C,B,te){var pe=te-B,we=k-B;return pe===0?0:C===1?we/pe:(Math.pow(C,we)-1)/(Math.pow(C,pe)-1)}var zo=function(C,B){this.expression=C,this._warningHistory={},this._evaluator=new Ds,this._defaultValue=B?Ju(B):null,this._enumValues=B&&B.type==="enum"?B.values:null};zo.prototype.evaluateWithoutErrorHandling=function(C,B,te,pe,we,Me){return this._evaluator.globals=C,this._evaluator.feature=B,this._evaluator.featureState=te,this._evaluator.canonical=pe,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},zo.prototype.evaluate=function(C,B,te,pe,we,Me){this._evaluator.globals=C,this._evaluator.feature=B||null,this._evaluator.featureState=te||null,this._evaluator.canonical=pe,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=Me||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!==Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new zi("Expected value to be one of "+Object.keys(this._enumValues).map(function(rt){return JSON.stringify(rt)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(rt){return this._warningHistory[rt.message]||(this._warningHistory[rt.message]=!0,typeof console<"u"&&console.warn(rt.message)),this._defaultValue}};function Po(k){return Array.isArray(k)&&k.length>0&&typeof k[0]=="string"&&k[0]in aa}function Ql(k,C){var B=new Fo(aa,[],C?gu(C):void 0),te=B.parse(k,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return te?wi(new zo(te,C)):Pi(B.errors)}var du=function(C,B){this.kind=C,this._styleExpression=B,this.isStateDependent=C!=="constant"&&!rl(B.expression)};du.prototype.evaluateWithoutErrorHandling=function(C,B,te,pe,we,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,B,te,pe,we,Me)},du.prototype.evaluate=function(C,B,te,pe,we,Me){return this._styleExpression.evaluate(C,B,te,pe,we,Me)};var ms=function(C,B,te,pe){this.kind=C,this.zoomStops=te,this._styleExpression=B,this.isStateDependent=C!=="camera"&&!rl(B.expression),this.interpolationType=pe};ms.prototype.evaluateWithoutErrorHandling=function(C,B,te,pe,we,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,B,te,pe,we,Me)},ms.prototype.evaluate=function(C,B,te,pe,we,Me){return this._styleExpression.evaluate(C,B,te,pe,we,Me)},ms.prototype.interpolationFactor=function(C,B,te){return this.interpolationType?co.interpolationFactor(this.interpolationType,C,B,te):0};function Fu(k,C){if(k=Ql(k,C),k.result==="error")return k;var B=k.value.expression,te=Wo(B);if(!te&&!hi(C))return Pi([new Tn("","data expressions not supported")]);var pe=hu(B,["zoom"]);if(!pe&&!Co(C))return Pi([new Tn("","zoom expressions not supported")]);var we=$u(B);if(!we&&!pe)return Pi([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(we instanceof Tn)return Pi([we]);if(we instanceof co&&!io(C))return Pi([new Tn("",'"interpolate" expressions cannot be used with this property')]);if(!we)return wi(te?new du("constant",k.value):new du("source",k.value));var Me=we instanceof co?we.interpolation:void 0;return wi(te?new ms("camera",k.value,we.labels,Me):new ms("composite",k.value,we.labels,Me))}var ql=function(C,B){this._parameters=C,this._specification=B,yn(this,_o(this._parameters,this._specification))};ql.deserialize=function(C){return new ql(C._parameters,C._specification)},ql.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function Hc(k,C){if(Aa(k))return new ql(k,C);if(Po(k)){var B=Fu(k,C);if(B.result==="error")throw new Error(B.value.map(function(pe){return pe.key+": "+pe.message}).join(", "));return B.value}else{var te=k;return typeof k=="string"&&C.type==="color"&&(te=Ai.parse(k)),{kind:"constant",evaluate:function(){return te}}}}function $u(k){var C=null;if(k instanceof Xs)C=$u(k.result);else if(k instanceof Xo)for(var B=0,te=k.args;B<te.length;B+=1){var pe=te[B];if(C=$u(pe),C)break}else(k instanceof Fs||k instanceof co)&&k.input instanceof No&&k.input.name==="zoom"&&(C=k);return C instanceof Tn||k.eachChild(function(we){var Me=$u(we);Me instanceof Tn?C=Me:!C&&Me?C=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&Me&&C!==Me&&(C=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function gu(k){var C={color:Yn,string:Br,number:wr,enum:Br,boolean:An,formatted:Ma,resolvedImage:ka};return k.type==="array"?ga(C[k.value]||Sn,k.length):C[k.type]}function Ju(k){return k.type==="color"&&Aa(k.default)?new Ai(0,0,0,0):k.type==="color"?Ai.parse(k.default)||null:k.default===void 0?null:k.default}function Ss(k){var C=k.key,B=k.value,te=k.valueSpec||{},pe=k.objectElementValidators||{},we=k.style,Me=k.styleSpec,Ne=[],rt=li(B);if(rt!=="object")return[new gr(C,B,"object expected, "+rt+" found")];for(var vt in B){var mt=vt.split(".")[0],Ut=te[mt]||te["*"],ir=void 0;if(pe[mt])ir=pe[mt];else if(te[mt])ir=Ti;else if(pe["*"])ir=pe["*"];else if(te["*"])ir=Ti;else{Ne.push(new gr(C,B[vt],'unknown property "'+vt+'"'));continue}Ne=Ne.concat(ir({key:(C&&C+".")+vt,value:B[vt],valueSpec:Ut,style:we,styleSpec:Me,object:B,objectKey:vt},B))}for(var tr in te)pe[tr]||te[tr].required&&te[tr].default===void 0&&B[tr]===void 0&&Ne.push(new gr(C,B,'missing required property "'+tr+'"'));return Ne}function bl(k){var C=k.value,B=k.valueSpec,te=k.style,pe=k.styleSpec,we=k.key,Me=k.arrayElementValidator||Ti;if(li(C)!=="array")return[new gr(we,C,"array expected, "+li(C)+" found")];if(B.length&&C.length!==B.length)return[new gr(we,C,"array length "+B.length+" expected, length "+C.length+" found")];if(B["min-length"]&&C.length<B["min-length"])return[new gr(we,C,"array length at least "+B["min-length"]+" expected, length "+C.length+" found")];var Ne={type:B.value,values:B.values};pe.$version<7&&(Ne.function=B.function),li(B.value)==="object"&&(Ne=B.value);for(var rt=[],vt=0;vt<C.length;vt++)rt=rt.concat(Me({array:C,arrayIndex:vt,value:C[vt],valueSpec:Ne,style:te,styleSpec:pe,key:we+"["+vt+"]"}));return rt}function zu(k){var C=k.key,B=k.value,te=k.valueSpec,pe=li(B);return pe==="number"&&B!==B&&(pe="NaN"),pe!=="number"?[new gr(C,B,"number expected, "+pe+" found")]:"minimum"in te&&B<te.minimum?[new gr(C,B,B+" is less than the minimum value "+te.minimum)]:"maximum"in te&&B>te.maximum?[new gr(C,B,B+" is greater than the maximum value "+te.maximum)]:[]}function mu(k){var C=k.valueSpec,B=sn(k.value.type),te,pe={},we,Me,Ne=B!=="categorical"&&k.value.property===void 0,rt=!Ne,vt=li(k.value.stops)==="array"&&li(k.value.stops[0])==="array"&&li(k.value.stops[0][0])==="object",mt=Ss({key:k.key,value:k.value,valueSpec:k.styleSpec.function,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{stops:Ut,default:xr}});return B==="identity"&&Ne&&mt.push(new gr(k.key,k.value,'missing required property "property"')),B!=="identity"&&!k.value.stops&&mt.push(new gr(k.key,k.value,'missing required property "stops"')),B==="exponential"&&k.valueSpec.expression&&!io(k.valueSpec)&&mt.push(new gr(k.key,k.value,"exponential functions not supported")),k.styleSpec.$version>=8&&(rt&&!hi(k.valueSpec)?mt.push(new gr(k.key,k.value,"property functions not supported")):Ne&&!Co(k.valueSpec)&&mt.push(new gr(k.key,k.value,"zoom functions not supported"))),(B==="categorical"||vt)&&k.value.property===void 0&&mt.push(new gr(k.key,k.value,'"property" property is required')),mt;function Ut(Ur){if(B==="identity")return[new gr(Ur.key,Ur.value,'identity function may not have a "stops" property')];var hn=[],an=Ur.value;return hn=hn.concat(bl({key:Ur.key,value:an,valueSpec:Ur.valueSpec,style:Ur.style,styleSpec:Ur.styleSpec,arrayElementValidator:ir})),li(an)==="array"&&an.length===0&&hn.push(new gr(Ur.key,an,"array must have at least one stop")),hn}function ir(Ur){var hn=[],an=Ur.value,Rn=Ur.key;if(li(an)!=="array")return[new gr(Rn,an,"array expected, "+li(an)+" found")];if(an.length!==2)return[new gr(Rn,an,"array length 2 expected, length "+an.length+" found")];if(vt){if(li(an[0])!=="object")return[new gr(Rn,an,"object expected, "+li(an[0])+" found")];if(an[0].zoom===void 0)return[new gr(Rn,an,"object stop key must have zoom")];if(an[0].value===void 0)return[new gr(Rn,an,"object stop key must have value")];if(Me&&Me>sn(an[0].zoom))return[new gr(Rn,an[0].zoom,"stop zoom values must appear in ascending order")];sn(an[0].zoom)!==Me&&(Me=sn(an[0].zoom),we=void 0,pe={}),hn=hn.concat(Ss({key:Rn+"[0]",value:an[0],valueSpec:{zoom:{}},style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{zoom:zu,value:tr}}))}else hn=hn.concat(tr({key:Rn+"[0]",value:an[0],valueSpec:{},style:Ur.style,styleSpec:Ur.styleSpec},an));return Po(Cn(an[1]))?hn.concat([new gr(Rn+"[1]",an[1],"expressions are not allowed in function stops.")]):hn.concat(Ti({key:Rn+"[1]",value:an[1],valueSpec:C,style:Ur.style,styleSpec:Ur.styleSpec}))}function tr(Ur,hn){var an=li(Ur.value),Rn=sn(Ur.value),Mn=Ur.value!==null?Ur.value:hn;if(!te)te=an;else if(an!==te)return[new gr(Ur.key,Mn,an+" stop domain type must match previous stop domain type "+te)];if(an!=="number"&&an!=="string"&&an!=="boolean")return[new gr(Ur.key,Mn,"stop domain value must be a number, string, or boolean")];if(an!=="number"&&B!=="categorical"){var Dn="number expected, "+an+" found";return hi(C)&&B===void 0&&(Dn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gr(Ur.key,Mn,Dn)]}return B==="categorical"&&an==="number"&&(!isFinite(Rn)||Math.floor(Rn)!==Rn)?[new gr(Ur.key,Mn,"integer expected, found "+Rn)]:B!=="categorical"&&an==="number"&&we!==void 0&&Rn<we?[new gr(Ur.key,Mn,"stop domain values must appear in ascending order")]:(we=Rn,B==="categorical"&&Rn in pe?[new gr(Ur.key,Mn,"stop domain values must be unique")]:(pe[Rn]=!0,[]))}function xr(Ur){return Ti({key:Ur.key,value:Ur.value,valueSpec:C,style:Ur.style,styleSpec:Ur.styleSpec})}}function jo(k){var C=(k.expressionContext==="property"?Fu:Ql)(Cn(k.value),k.valueSpec);if(C.result==="error")return C.value.map(function(te){return new gr(""+k.key+te.key,k.value,te.message)});var B=C.value.expression||C.value._styleExpression.expression;if(k.expressionContext==="property"&&k.propertyKey==="text-font"&&!B.outputDefined())return[new gr(k.key,k.value,'Invalid data expression for "'+k.propertyKey+'". Output values must be contained as literals within the expression.')];if(k.expressionContext==="property"&&k.propertyType==="layout"&&!rl(B))return[new gr(k.key,k.value,'"feature-state" data expressions are not supported with layout properties.')];if(k.expressionContext==="filter"&&!rl(B))return[new gr(k.key,k.value,'"feature-state" data expressions are not supported with filters.')];if(k.expressionContext&&k.expressionContext.indexOf("cluster")===0){if(!hu(B,["zoom","feature-state"]))return[new gr(k.key,k.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(k.expressionContext==="cluster-initial"&&!Wo(B))return[new gr(k.key,k.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qu(k){var C=k.value,B=k.key,te=li(C);return te!=="boolean"?[new gr(B,C,"boolean expected, "+te+" found")]:[]}function Sc(k){var C=k.key,B=k.value,te=li(B);return te!=="string"?[new gr(C,B,"color expected, "+te+" found")]:Wl(B)===null?[new gr(C,B,'color expected, "'+B+'" found')]:[]}function ns(k){var C=k.key,B=k.value,te=k.valueSpec,pe=[];return Array.isArray(te.values)?te.values.indexOf(sn(B))===-1&&pe.push(new gr(C,B,"expected one of ["+te.values.join(", ")+"], "+JSON.stringify(B)+" found")):Object.keys(te.values).indexOf(sn(B))===-1&&pe.push(new gr(C,B,"expected one of ["+Object.keys(te.values).join(", ")+"], "+JSON.stringify(B)+" found")),pe}function Ou(k){if(k===!0||k===!1)return!0;if(!Array.isArray(k)||k.length===0)return!1;switch(k[0]){case"has":return k.length>=2&&k[1]!=="$id"&&k[1]!=="$type";case"in":return k.length>=3&&(typeof k[1]!="string"||Array.isArray(k[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return k.length!==3||Array.isArray(k[1])||Array.isArray(k[2]);case"any":case"all":for(var C=0,B=k.slice(1);C<B.length;C+=1){var te=B[C];if(!Ou(te)&&typeof te!="boolean")return!1}return!0;default:return!0}}var Nu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qu(k){if(k==null)return{filter:function(){return!0},needGeometry:!1};Ou(k)||(k=nt(k));var C=Ql(k,Nu);if(C.result==="error")throw new Error(C.value.map(function(te){return te.key+": "+te.message}).join(", "));var B=je(k);return{filter:function(te,pe,we){return C.value.evaluate(te,pe,{},we)},needGeometry:B}}function Oe(k,C){return k<C?-1:k>C?1:0}function je(k){if(!Array.isArray(k))return!1;if(k[0]==="within")return!0;for(var C=1;C<k.length;C++)if(je(k[C]))return!0;return!1}function nt(k){if(!k)return!0;var C=k[0];if(k.length<=1)return C!=="any";var B=C==="=="?ut(k[1],k[2],"=="):C==="!="?vr(ut(k[1],k[2],"==")):C==="<"||C===">"||C==="<="||C===">="?ut(k[1],k[2],C):C==="any"?Tt(k.slice(1)):C==="all"?["all"].concat(k.slice(1).map(nt)):C==="none"?["all"].concat(k.slice(1).map(nt).map(vr)):C==="in"?_t(k[1],k.slice(2)):C==="!in"?vr(_t(k[1],k.slice(2))):C==="has"?kt(k[1]):C==="!has"?vr(kt(k[1])):C==="within"?k:!0;return B}function ut(k,C,B){switch(k){case"$type":return["filter-type-"+B,C];case"$id":return["filter-id-"+B,C];default:return["filter-"+B,k,C]}}function Tt(k){return["any"].concat(k.map(nt))}function _t(k,C){if(C.length===0)return!1;switch(k){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(B){return typeof B!=typeof C[0]})?["filter-in-large",k,["literal",C.sort(Oe)]]:["filter-in-small",k,["literal",C]]}}function kt(k){switch(k){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",k]}}function vr(k){return["!",k]}function mr(k){return Ou(Cn(k.value))?jo(yn({},k,{expressionContext:"filter",valueSpec:{value:"boolean"}})):fr(k)}function fr(k){var C=k.value,B=k.key;if(li(C)!=="array")return[new gr(B,C,"array expected, "+li(C)+" found")];var te=k.styleSpec,pe,we=[];if(C.length<1)return[new gr(B,C,"filter array must have at least 1 element")];switch(we=we.concat(ns({key:B+"[0]",value:C[0],valueSpec:te.filter_operator,style:k.style,styleSpec:k.styleSpec})),sn(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&sn(C[1])==="$type"&&we.push(new gr(B,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&we.push(new gr(B,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(pe=li(C[1]),pe!=="string"&&we.push(new gr(B+"[1]",C[1],"string expected, "+pe+" found")));for(var Me=2;Me<C.length;Me++)pe=li(C[Me]),sn(C[1])==="$type"?we=we.concat(ns({key:B+"["+Me+"]",value:C[Me],valueSpec:te.geometry_type,style:k.style,styleSpec:k.styleSpec})):pe!=="string"&&pe!=="number"&&pe!=="boolean"&&we.push(new gr(B+"["+Me+"]",C[Me],"string, number, or boolean expected, "+pe+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<C.length;Ne++)we=we.concat(fr({key:B+"["+Ne+"]",value:C[Ne],style:k.style,styleSpec:k.styleSpec}));break;case"has":case"!has":pe=li(C[1]),C.length!==2?we.push(new gr(B,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="string"&&we.push(new gr(B+"[1]",C[1],"string expected, "+pe+" found"));break;case"within":pe=li(C[1]),C.length!==2?we.push(new gr(B,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="object"&&we.push(new gr(B+"[1]",C[1],"object expected, "+pe+" found"));break}return we}function Tr(k,C){var B=k.key,te=k.style,pe=k.styleSpec,we=k.value,Me=k.objectKey,Ne=pe[C+"_"+k.layerType];if(!Ne)return[];var rt=Me.match(/^(.*)-transition$/);if(C==="paint"&&rt&&Ne[rt[1]]&&Ne[rt[1]].transition)return Ti({key:B,value:we,valueSpec:pe.transition,style:te,styleSpec:pe});var vt=k.valueSpec||Ne[Me];if(!vt)return[new gr(B,we,'unknown property "'+Me+'"')];var mt;if(li(we)==="string"&&hi(vt)&&!vt.tokens&&(mt=/^{([^}]+)}$/.exec(we)))return[new gr(B,we,'"'+Me+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(mt[1])+" }`.")];var Ut=[];return k.layerType==="symbol"&&(Me==="text-field"&&te&&!te.glyphs&&Ut.push(new gr(B,we,'use of "text-field" requires a style "glyphs" property')),Me==="text-font"&&Aa(Cn(we))&&sn(we.type)==="identity"&&Ut.push(new gr(B,we,'"text-font" does not support identity functions'))),Ut.concat(Ti({key:k.key,value:we,valueSpec:vt,style:te,styleSpec:pe,expressionContext:"property",propertyType:C,propertyKey:Me}))}function zr(k){return Tr(k,"paint")}function Qr(k){return Tr(k,"layout")}function on(k){var C=[],B=k.value,te=k.key,pe=k.style,we=k.styleSpec;!B.type&&!B.ref&&C.push(new gr(te,B,'either "type" or "ref" is required'));var Me=sn(B.type),Ne=sn(B.ref);if(B.id)for(var rt=sn(B.id),vt=0;vt<k.arrayIndex;vt++){var mt=pe.layers[vt];sn(mt.id)===rt&&C.push(new gr(te,B.id,'duplicate layer id "'+B.id+'", previously used at line '+mt.id.__line__))}if("ref"in B){["type","source","source-layer","filter","layout"].forEach(function(xr){xr in B&&C.push(new gr(te,B[xr],'"'+xr+'" is prohibited for ref layers'))});var Ut;pe.layers.forEach(function(xr){sn(xr.id)===Ne&&(Ut=xr)}),Ut?Ut.ref?C.push(new gr(te,B.ref,"ref cannot reference another ref layer")):Me=sn(Ut.type):C.push(new gr(te,B.ref,'ref layer "'+Ne+'" not found'))}else if(Me!=="background")if(!B.source)C.push(new gr(te,B,'missing required property "source"'));else{var ir=pe.sources&&pe.sources[B.source],tr=ir&&sn(ir.type);ir?tr==="vector"&&Me==="raster"?C.push(new gr(te,B.source,'layer "'+B.id+'" requires a raster source')):tr==="raster"&&Me!=="raster"?C.push(new gr(te,B.source,'layer "'+B.id+'" requires a vector source')):tr==="vector"&&!B["source-layer"]?C.push(new gr(te,B,'layer "'+B.id+'" must specify a "source-layer"')):tr==="raster-dem"&&Me!=="hillshade"?C.push(new gr(te,B.source,"raster-dem source can only be used with layer type 'hillshade'.")):Me==="line"&&B.paint&&B.paint["line-gradient"]&&(tr!=="geojson"||!ir.lineMetrics)&&C.push(new gr(te,B,'layer "'+B.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new gr(te,B.source,'source "'+B.source+'" not found'))}return C=C.concat(Ss({key:te,value:B,valueSpec:we.layer,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ti({key:te+".type",value:B.type,valueSpec:we.layer.type,style:k.style,styleSpec:k.styleSpec,object:B,objectKey:"type"})},filter:mr,layout:function(Ur){return Ss({layer:B,key:Ur.key,value:Ur.value,style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{"*":function(an){return Qr(yn({layerType:Me},an))}}})},paint:function(Ur){return Ss({layer:B,key:Ur.key,value:Ur.value,style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{"*":function(an){return zr(yn({layerType:Me},an))}}})}}})),C}function En(k){var C=k.value,B=k.key,te=li(C);return te!=="string"?[new gr(B,C,"string expected, "+te+" found")]:[]}var Nn={promoteId:Ta};function $n(k){var C=k.value,B=k.key,te=k.styleSpec,pe=k.style;if(!C.type)return[new gr(B,C,'"type" is required')];var we=sn(C.type),Me;switch(we){case"vector":case"raster":case"raster-dem":return Me=Ss({key:B,value:C,valueSpec:te["source_"+we.replace("-","_")],style:k.style,styleSpec:te,objectElementValidators:Nn}),Me;case"geojson":if(Me=Ss({key:B,value:C,valueSpec:te.source_geojson,style:pe,styleSpec:te,objectElementValidators:Nn}),C.cluster)for(var Ne in C.clusterProperties){var rt=C.clusterProperties[Ne],vt=rt[0],mt=rt[1],Ut=typeof vt=="string"?[vt,["accumulated"],["get",Ne]]:vt;Me.push.apply(Me,jo({key:B+"."+Ne+".map",value:mt,expressionContext:"cluster-map"})),Me.push.apply(Me,jo({key:B+"."+Ne+".reduce",value:Ut,expressionContext:"cluster-reduce"}))}return Me;case"video":return Ss({key:B,value:C,valueSpec:te.source_video,style:pe,styleSpec:te});case"image":return Ss({key:B,value:C,valueSpec:te.source_image,style:pe,styleSpec:te});case"canvas":return[new gr(B,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ns({key:B+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:te})}}function Ta(k){var C=k.key,B=k.value;if(li(B)==="string")return En({key:C,value:B});var te=[];for(var pe in B)te.push.apply(te,En({key:C+"."+pe,value:B[pe]}));return te}function Ea(k){var C=k.value,B=k.styleSpec,te=B.light,pe=k.style,we=[],Me=li(C);if(C===void 0)return we;if(Me!=="object")return we=we.concat([new gr("light",C,"object expected, "+Me+" found")]),we;for(var Ne in C){var rt=Ne.match(/^(.*)-transition$/);rt&&te[rt[1]]&&te[rt[1]].transition?we=we.concat(Ti({key:Ne,value:C[Ne],valueSpec:B.transition,style:pe,styleSpec:B})):te[Ne]?we=we.concat(Ti({key:Ne,value:C[Ne],valueSpec:te[Ne],style:pe,styleSpec:B})):we=we.concat([new gr(Ne,C[Ne],'unknown property "'+Ne+'"')])}return we}function ni(k){return En(k).length===0?[]:jo(k)}function qa(k){return En(k).length===0?[]:jo(k)}var ai={"*":function(){return[]},array:bl,boolean:Qu,number:zu,color:Sc,constants:un,enum:ns,filter:mr,function:mu,layer:on,object:Ss,source:$n,light:Ea,string:En,formatted:ni,resolvedImage:qa};function Ti(k){var C=k.value,B=k.valueSpec,te=k.styleSpec;if(B.expression&&Aa(sn(C)))return mu(k);if(B.expression&&Po(Cn(C)))return jo(k);if(B.type&&ai[B.type])return ai[B.type](k);var pe=Ss(yn({},k,{valueSpec:B.type?te[B.type]:B}));return pe}function Yr(k){var C=k.value,B=k.key,te=En(k);return te.length||(C.indexOf("{fontstack}")===-1&&te.push(new gr(B,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&te.push(new gr(B,C,'"glyphs" url must include a "{range}" token'))),te}function et(k,C){C===void 0&&(C=Yt);var B=[];return B=B.concat(Ti({key:"",value:k,valueSpec:C.$root,styleSpec:C,style:k,objectElementValidators:{glyphs:Yr,"*":function(){return[]}}})),k.constants&&(B=B.concat(un({key:"constants",value:k.constants,style:k,styleSpec:C}))),$t(B)}et.source=Kr($n),et.light=Kr(Ea),et.layer=Kr(on),et.filter=Kr(mr),et.paintProperty=Kr(zr),et.layoutProperty=Kr(Qr);function $t(k){return[].concat(k).sort(function(C,B){return C.line-B.line})}function Kr(k){return function(){for(var C=[],B=arguments.length;B--;)C[B]=arguments[B];return $t(k.apply(this,C))}}var Hn=et,ta=Hn.light,ea=Hn.paintProperty,vi=Hn.layoutProperty;function Di(k,C){var B=!1;if(C&&C.length)for(var te=0,pe=C;te<pe.length;te+=1){var we=pe[te];k.fire(new Ar(new Error(we.message))),B=!0}return B}var $i=ce,Ri=3;function ce(k,C,B){var te=this.cells=[];if(k instanceof ArrayBuffer){this.arrayBuffer=k;var pe=new Int32Array(this.arrayBuffer);k=pe[0],C=pe[1],B=pe[2],this.d=C+2*B;for(var we=0;we<this.d*this.d;we++){var Me=pe[Ri+we],Ne=pe[Ri+we+1];te.push(Me===Ne?null:pe.subarray(Me,Ne))}var rt=pe[Ri+te.length],vt=pe[Ri+te.length+1];this.keys=pe.subarray(rt,vt),this.bboxes=pe.subarray(vt),this.insert=this._insertReadonly}else{this.d=C+2*B;for(var mt=0;mt<this.d*this.d;mt++)te.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=k,this.padding=B,this.scale=C/k,this.uid=0;var Ut=B/C*k;this.min=-Ut,this.max=k+Ut}ce.prototype.insert=function(k,C,B,te,pe){this._forEachCell(C,B,te,pe,this._insertCell,this.uid++),this.keys.push(k),this.bboxes.push(C),this.bboxes.push(B),this.bboxes.push(te),this.bboxes.push(pe)},ce.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ce.prototype._insertCell=function(k,C,B,te,pe,we){this.cells[pe].push(we)},ce.prototype.query=function(k,C,B,te,pe){var we=this.min,Me=this.max;if(k<=we&&C<=we&&Me<=B&&Me<=te&&!pe)return Array.prototype.slice.call(this.keys);var Ne=[],rt={};return this._forEachCell(k,C,B,te,this._queryCell,Ne,rt,pe),Ne},ce.prototype._queryCell=function(k,C,B,te,pe,we,Me,Ne){var rt=this.cells[pe];if(rt!==null)for(var vt=this.keys,mt=this.bboxes,Ut=0;Ut<rt.length;Ut++){var ir=rt[Ut];if(Me[ir]===void 0){var tr=ir*4;(Ne?Ne(mt[tr+0],mt[tr+1],mt[tr+2],mt[tr+3]):k<=mt[tr+2]&&C<=mt[tr+3]&&B>=mt[tr+0]&&te>=mt[tr+1])?(Me[ir]=!0,we.push(vt[ir])):Me[ir]=!1}}},ce.prototype._forEachCell=function(k,C,B,te,pe,we,Me,Ne){for(var rt=this._convertToCellCoord(k),vt=this._convertToCellCoord(C),mt=this._convertToCellCoord(B),Ut=this._convertToCellCoord(te),ir=rt;ir<=mt;ir++)for(var tr=vt;tr<=Ut;tr++){var xr=this.d*tr+ir;if(!(Ne&&!Ne(this._convertFromCellCoord(ir),this._convertFromCellCoord(tr),this._convertFromCellCoord(ir+1),this._convertFromCellCoord(tr+1)))&&pe.call(this,k,C,B,te,xr,we,Me,Ne))return}},ce.prototype._convertFromCellCoord=function(k){return(k-this.padding)/this.scale},ce.prototype._convertToCellCoord=function(k){return Math.max(0,Math.min(this.d-1,Math.floor(k*this.scale)+this.padding))},ce.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var k=this.cells,C=Ri+this.cells.length+1+1,B=0,te=0;te<this.cells.length;te++)B+=this.cells[te].length;var pe=new Int32Array(C+B+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var we=C,Me=0;Me<k.length;Me++){var Ne=k[Me];pe[Ri+Me]=we,pe.set(Ne,we),we+=Ne.length}return pe[Ri+k.length]=we,pe.set(this.keys,we),we+=this.keys.length,pe[Ri+k.length+1]=we,pe.set(this.bboxes,we),we+=this.bboxes.length,pe.buffer};var Te=self.ImageData,Re=self.ImageBitmap,Ue={};function Be(k,C,B){B===void 0&&(B={}),Object.defineProperty(C,"_classRegistryKey",{value:k,writeable:!1}),Ue[k]={klass:C,omit:B.omit||[],shallow:B.shallow||[]}}Be("Object",Object),$i.serialize=function(C,B){var te=C.toArrayBuffer();return B&&B.push(te),{buffer:te}},$i.deserialize=function(C){return new $i(C.buffer)},Be("Grid",$i),Be("Color",Ai),Be("Error",Error),Be("ResolvedImage",Io),Be("StylePropertyFunction",ql),Be("StyleExpression",zo,{omit:["_evaluator"]}),Be("ZoomDependentExpression",ms),Be("ZoomConstantExpression",du),Be("CompoundExpression",No,{omit:["_evaluate"]});for(var Je in aa)aa[Je]._classRegistryKey||Be("Expression_"+Je,aa[Je]);function wt(k){return k&&typeof ArrayBuffer<"u"&&(k instanceof ArrayBuffer||k.constructor&&k.constructor.name==="ArrayBuffer")}function gt(k){return Re&&k instanceof Re}function It(k,C){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp)return k;if(wt(k)||gt(k))return C&&C.push(k),k;if(ArrayBuffer.isView(k)){var B=k;return C&&C.push(B.buffer),B}if(k instanceof Te)return C&&C.push(k.data.buffer),k;if(Array.isArray(k)){for(var te=[],pe=0,we=k;pe<we.length;pe+=1){var Me=we[pe];te.push(It(Me,C))}return te}if(typeof k=="object"){var Ne=k.constructor,rt=Ne._classRegistryKey;if(!rt)throw new Error("can't serialize object of unregistered class");var vt=Ne.serialize?Ne.serialize(k,C):{};if(!Ne.serialize){for(var mt in k)if(!!k.hasOwnProperty(mt)&&!(Ue[rt].omit.indexOf(mt)>=0)){var Ut=k[mt];vt[mt]=Ue[rt].shallow.indexOf(mt)>=0?Ut:It(Ut,C)}k instanceof Error&&(vt.message=k.message)}if(vt.$name)throw new Error("$name property is reserved for worker serialization logic.");return rt!=="Object"&&(vt.$name=rt),vt}throw new Error("can't serialize object of type "+typeof k)}function qt(k){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp||wt(k)||gt(k)||ArrayBuffer.isView(k)||k instanceof Te)return k;if(Array.isArray(k))return k.map(qt);if(typeof k=="object"){var C=k.$name||"Object",B=Ue[C],te=B.klass;if(!te)throw new Error("can't deserialize unregistered class "+C);if(te.deserialize)return te.deserialize(k);for(var pe=Object.create(te.prototype),we=0,Me=Object.keys(k);we<Me.length;we+=1){var Ne=Me[we];if(Ne!=="$name"){var rt=k[Ne];pe[Ne]=Ue[C].shallow.indexOf(Ne)>=0?rt:qt(rt)}}return pe}throw new Error("can't deserialize object of type "+typeof k)}var nr=function(){this.first=!0};nr.prototype.update=function(C,B){var te=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=te,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=te,!0):(this.lastFloorZoom>te?(this.lastIntegerZoom=te+1,this.lastIntegerZoomTime=B):this.lastFloorZoom<te&&(this.lastIntegerZoom=te,this.lastIntegerZoomTime=B),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=te,!0):!1)};var ar={"Latin-1 Supplement":function(k){return k>=128&&k<=255},Arabic:function(k){return k>=1536&&k<=1791},"Arabic Supplement":function(k){return k>=1872&&k<=1919},"Arabic Extended-A":function(k){return k>=2208&&k<=2303},"Hangul Jamo":function(k){return k>=4352&&k<=4607},"Unified Canadian Aboriginal Syllabics":function(k){return k>=5120&&k<=5759},Khmer:function(k){return k>=6016&&k<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(k){return k>=6320&&k<=6399},"General Punctuation":function(k){return k>=8192&&k<=8303},"Letterlike Symbols":function(k){return k>=8448&&k<=8527},"Number Forms":function(k){return k>=8528&&k<=8591},"Miscellaneous Technical":function(k){return k>=8960&&k<=9215},"Control Pictures":function(k){return k>=9216&&k<=9279},"Optical Character Recognition":function(k){return k>=9280&&k<=9311},"Enclosed Alphanumerics":function(k){return k>=9312&&k<=9471},"Geometric Shapes":function(k){return k>=9632&&k<=9727},"Miscellaneous Symbols":function(k){return k>=9728&&k<=9983},"Miscellaneous Symbols and Arrows":function(k){return k>=11008&&k<=11263},"CJK Radicals Supplement":function(k){return k>=11904&&k<=12031},"Kangxi Radicals":function(k){return k>=12032&&k<=12255},"Ideographic Description Characters":function(k){return k>=12272&&k<=12287},"CJK Symbols and Punctuation":function(k){return k>=12288&&k<=12351},Hiragana:function(k){return k>=12352&&k<=12447},Katakana:function(k){return k>=12448&&k<=12543},Bopomofo:function(k){return k>=12544&&k<=12591},"Hangul Compatibility Jamo":function(k){return k>=12592&&k<=12687},Kanbun:function(k){return k>=12688&&k<=12703},"Bopomofo Extended":function(k){return k>=12704&&k<=12735},"CJK Strokes":function(k){return k>=12736&&k<=12783},"Katakana Phonetic Extensions":function(k){return k>=12784&&k<=12799},"Enclosed CJK Letters and Months":function(k){return k>=12800&&k<=13055},"CJK Compatibility":function(k){return k>=13056&&k<=13311},"CJK Unified Ideographs Extension A":function(k){return k>=13312&&k<=19903},"Yijing Hexagram Symbols":function(k){return k>=19904&&k<=19967},"CJK Unified Ideographs":function(k){return k>=19968&&k<=40959},"Yi Syllables":function(k){return k>=40960&&k<=42127},"Yi Radicals":function(k){return k>=42128&&k<=42191},"Hangul Jamo Extended-A":function(k){return k>=43360&&k<=43391},"Hangul Syllables":function(k){return k>=44032&&k<=55215},"Hangul Jamo Extended-B":function(k){return k>=55216&&k<=55295},"Private Use Area":function(k){return k>=57344&&k<=63743},"CJK Compatibility Ideographs":function(k){return k>=63744&&k<=64255},"Arabic Presentation Forms-A":function(k){return k>=64336&&k<=65023},"Vertical Forms":function(k){return k>=65040&&k<=65055},"CJK Compatibility Forms":function(k){return k>=65072&&k<=65103},"Small Form Variants":function(k){return k>=65104&&k<=65135},"Arabic Presentation Forms-B":function(k){return k>=65136&&k<=65279},"Halfwidth and Fullwidth Forms":function(k){return k>=65280&&k<=65519}};function Cr(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(Wr(te.charCodeAt(0)))return!0}return!1}function nn(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(!pn(te.charCodeAt(0)))return!1}return!0}function pn(k){return!(ar.Arabic(k)||ar["Arabic Supplement"](k)||ar["Arabic Extended-A"](k)||ar["Arabic Presentation Forms-A"](k)||ar["Arabic Presentation Forms-B"](k))}function Ir(k){return k<11904?!1:!!(ar["Bopomofo Extended"](k)||ar.Bopomofo(k)||ar["CJK Compatibility Forms"](k)||ar["CJK Compatibility Ideographs"](k)||ar["CJK Compatibility"](k)||ar["CJK Radicals Supplement"](k)||ar["CJK Strokes"](k)||ar["CJK Symbols and Punctuation"](k)||ar["CJK Unified Ideographs Extension A"](k)||ar["CJK Unified Ideographs"](k)||ar["Enclosed CJK Letters and Months"](k)||ar["Halfwidth and Fullwidth Forms"](k)||ar.Hiragana(k)||ar["Ideographic Description Characters"](k)||ar["Kangxi Radicals"](k)||ar["Katakana Phonetic Extensions"](k)||ar.Katakana(k)||ar["Vertical Forms"](k)||ar["Yi Radicals"](k)||ar["Yi Syllables"](k))}function Wr(k){return k===746||k===747?!0:k<4352?!1:!!(ar["Bopomofo Extended"](k)||ar.Bopomofo(k)||ar["CJK Compatibility Forms"](k)&&!(k>=65097&&k<=65103)||ar["CJK Compatibility Ideographs"](k)||ar["CJK Compatibility"](k)||ar["CJK Radicals Supplement"](k)||ar["CJK Strokes"](k)||ar["CJK Symbols and Punctuation"](k)&&!(k>=12296&&k<=12305)&&!(k>=12308&&k<=12319)&&k!==12336||ar["CJK Unified Ideographs Extension A"](k)||ar["CJK Unified Ideographs"](k)||ar["Enclosed CJK Letters and Months"](k)||ar["Hangul Compatibility Jamo"](k)||ar["Hangul Jamo Extended-A"](k)||ar["Hangul Jamo Extended-B"](k)||ar["Hangul Jamo"](k)||ar["Hangul Syllables"](k)||ar.Hiragana(k)||ar["Ideographic Description Characters"](k)||ar.Kanbun(k)||ar["Kangxi Radicals"](k)||ar["Katakana Phonetic Extensions"](k)||ar.Katakana(k)&&k!==12540||ar["Halfwidth and Fullwidth Forms"](k)&&k!==65288&&k!==65289&&k!==65293&&!(k>=65306&&k<=65310)&&k!==65339&&k!==65341&&k!==65343&&!(k>=65371&&k<=65503)&&k!==65507&&!(k>=65512&&k<=65519)||ar["Small Form Variants"](k)&&!(k>=65112&&k<=65118)&&!(k>=65123&&k<=65126)||ar["Unified Canadian Aboriginal Syllabics"](k)||ar["Unified Canadian Aboriginal Syllabics Extended"](k)||ar["Vertical Forms"](k)||ar["Yijing Hexagram Symbols"](k)||ar["Yi Syllables"](k)||ar["Yi Radicals"](k))}function en(k){return!!(ar["Latin-1 Supplement"](k)&&(k===167||k===169||k===174||k===177||k===188||k===189||k===190||k===215||k===247)||ar["General Punctuation"](k)&&(k===8214||k===8224||k===8225||k===8240||k===8241||k===8251||k===8252||k===8258||k===8263||k===8264||k===8265||k===8273)||ar["Letterlike Symbols"](k)||ar["Number Forms"](k)||ar["Miscellaneous Technical"](k)&&(k>=8960&&k<=8967||k>=8972&&k<=8991||k>=8996&&k<=9e3||k===9003||k>=9085&&k<=9114||k>=9150&&k<=9165||k===9167||k>=9169&&k<=9179||k>=9186&&k<=9215)||ar["Control Pictures"](k)&&k!==9251||ar["Optical Character Recognition"](k)||ar["Enclosed Alphanumerics"](k)||ar["Geometric Shapes"](k)||ar["Miscellaneous Symbols"](k)&&!(k>=9754&&k<=9759)||ar["Miscellaneous Symbols and Arrows"](k)&&(k>=11026&&k<=11055||k>=11088&&k<=11097||k>=11192&&k<=11243)||ar["CJK Symbols and Punctuation"](k)||ar.Katakana(k)||ar["Private Use Area"](k)||ar["CJK Compatibility Forms"](k)||ar["Small Form Variants"](k)||ar["Halfwidth and Fullwidth Forms"](k)||k===8734||k===8756||k===8757||k>=9984&&k<=10087||k>=10102&&k<=10131||k===65532||k===65533)}function fn(k){return!(Wr(k)||en(k))}function vn(k){return ar.Arabic(k)||ar["Arabic Supplement"](k)||ar["Arabic Extended-A"](k)||ar["Arabic Presentation Forms-A"](k)||ar["Arabic Presentation Forms-B"](k)}function tn(k){return k>=1424&&k<=2303||ar["Arabic Presentation Forms-A"](k)||ar["Arabic Presentation Forms-B"](k)}function Zn(k,C){return!(!C&&tn(k)||k>=2304&&k<=3583||k>=3840&&k<=4255||ar.Khmer(k))}function ha(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(tn(te.charCodeAt(0)))return!0}return!1}function Pa(k,C){for(var B=0,te=k;B<te.length;B+=1){var pe=te[B];if(!Zn(pe.charCodeAt(0),C))return!1}return!0}var pa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Na=null,xa=pa.unavailable,Ja=null,Va=function(k){k&&typeof k=="string"&&k.indexOf("NetworkError")>-1&&(xa=pa.error),Na&&Na(k)};function ui(){Li.fire(new Pr("pluginStateChange",{pluginStatus:xa,pluginURL:Ja}))}var Li=new Er,Do=function(){return xa},Ji=function(k){return k({pluginStatus:xa,pluginURL:Ja}),Li.on("pluginStateChange",k),k},_a=function(k,C,B){if(B===void 0&&(B=!1),xa===pa.deferred||xa===pa.loading||xa===pa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ja=Q.resolveURL(k),xa=pa.deferred,Na=C,ui(),B||di()},di=function(){if(xa!==pa.deferred||!Ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xa=pa.loading,ui(),Ja&&ft({url:Ja},function(k){k?Va(k):(xa=pa.loaded,ui())})},ii={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return xa===pa.loaded||ii.applyArabicShaping!=null},isLoading:function(){return xa===pa.loading},setState:function(C){xa=C.pluginStatus,Ja=C.pluginURL},isParsed:function(){return ii.applyArabicShaping!=null&&ii.processBidirectionalText!=null&&ii.processStyledBidirectionalText!=null},getPluginURL:function(){return Ja}},Ui=function(){!ii.isLoading()&&!ii.isLoaded()&&Do()==="deferred"&&di()},yi=function(C,B){this.zoom=C,B?(this.now=B.now,this.fadeDuration=B.fadeDuration,this.zoomHistory=B.zoomHistory,this.transition=B.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nr,this.transition={})};yi.prototype.isSupportedScript=function(C){return Pa(C,ii.isLoaded())},yi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},yi.prototype.getCrossfadeParameters=function(){var C=this.zoom,B=C-Math.floor(C),te=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:B+(1-B)*te}:{fromScale:.5,toScale:1,t:1-(1-te)*B}};var So=function(C,B){this.property=C,this.value=B,this.expression=Hc(B===void 0?C.specification.default:B,C.specification)};So.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},So.prototype.possiblyEvaluate=function(C,B,te){return this.property.possiblyEvaluate(this,C,B,te)};var yo=function(C){this.property=C,this.value=new So(C,void 0)};yo.prototype.transitioned=function(C,B){return new ys(this.property,this.value,B,M({},C.transition,this.transition),C.now)},yo.prototype.untransitioned=function(){return new ys(this.property,this.value,null,{},0)};var Oo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};Oo.prototype.getValue=function(C){return I(this._values[C].value.value)},Oo.prototype.setValue=function(C,B){this._values.hasOwnProperty(C)||(this._values[C]=new yo(this._values[C].property)),this._values[C].value=new So(this._values[C].property,B===null?void 0:I(B))},Oo.prototype.getTransition=function(C){return I(this._values[C].transition)},Oo.prototype.setTransition=function(C,B){this._values.hasOwnProperty(C)||(this._values[C]=new yo(this._values[C].property)),this._values[C].transition=I(B)||void 0},Oo.prototype.serialize=function(){for(var C={},B=0,te=Object.keys(this._values);B<te.length;B+=1){var pe=te[B],we=this.getValue(pe);we!==void 0&&(C[pe]=we);var Me=this.getTransition(pe);Me!==void 0&&(C[pe+"-transition"]=Me)}return C},Oo.prototype.transitioned=function(C,B){for(var te=new as(this._properties),pe=0,we=Object.keys(this._values);pe<we.length;pe+=1){var Me=we[pe];te._values[Me]=this._values[Me].transitioned(C,B._values[Me])}return te},Oo.prototype.untransitioned=function(){for(var C=new as(this._properties),B=0,te=Object.keys(this._values);B<te.length;B+=1){var pe=te[B];C._values[pe]=this._values[pe].untransitioned()}return C};var ys=function(C,B,te,pe,we){this.property=C,this.value=B,this.begin=we+pe.delay||0,this.end=this.begin+pe.duration||0,C.specification.transition&&(pe.delay||pe.duration)&&(this.prior=te)};ys.prototype.possiblyEvaluate=function(C,B,te){var pe=C.now||0,we=this.value.possiblyEvaluate(C,B,te),Me=this.prior;if(Me){if(pe>this.end)return this.prior=null,we;if(this.value.isDataDriven())return this.prior=null,we;if(pe<this.begin)return Me.possiblyEvaluate(C,B,te);var Ne=(pe-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(C,B,te),we,b(Ne))}else return we};var as=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};as.prototype.possiblyEvaluate=function(C,B,te){for(var pe=new eo(this._properties),we=0,Me=Object.keys(this._values);we<Me.length;we+=1){var Ne=Me[we];pe._values[Ne]=this._values[Ne].possiblyEvaluate(C,B,te)}return pe},as.prototype.hasTransition=function(){for(var C=0,B=Object.keys(this._values);C<B.length;C+=1){var te=B[C];if(this._values[te].prior)return!0}return!1};var xs=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};xs.prototype.getValue=function(C){return I(this._values[C].value)},xs.prototype.setValue=function(C,B){this._values[C]=new So(this._values[C].property,B===null?void 0:I(B))},xs.prototype.serialize=function(){for(var C={},B=0,te=Object.keys(this._values);B<te.length;B+=1){var pe=te[B],we=this.getValue(pe);we!==void 0&&(C[pe]=we)}return C},xs.prototype.possiblyEvaluate=function(C,B,te){for(var pe=new eo(this._properties),we=0,Me=Object.keys(this._values);we<Me.length;we+=1){var Ne=Me[we];pe._values[Ne]=this._values[Ne].possiblyEvaluate(C,B,te)}return pe};var oo=function(C,B,te){this.property=C,this.value=B,this.parameters=te};oo.prototype.isConstant=function(){return this.value.kind==="constant"},oo.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},oo.prototype.evaluate=function(C,B,te,pe){return this.property.evaluate(this.value,this.parameters,C,B,te,pe)};var eo=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};eo.prototype.get=function(C){return this._values[C]};var Za=function(C){this.specification=C};Za.prototype.possiblyEvaluate=function(C,B){return C.expression.evaluate(B)},Za.prototype.interpolate=function(C,B,te){var pe=nl[this.specification.type];return pe?pe(C,B,te):C};var oi=function(C,B){this.specification=C,this.overrides=B};oi.prototype.possiblyEvaluate=function(C,B,te,pe){return C.expression.kind==="constant"||C.expression.kind==="camera"?new oo(this,{kind:"constant",value:C.expression.evaluate(B,null,{},te,pe)},B):new oo(this,C.expression,B)},oi.prototype.interpolate=function(C,B,te){if(C.value.kind!=="constant"||B.value.kind!=="constant")return C;if(C.value.value===void 0||B.value.value===void 0)return new oo(this,{kind:"constant",value:void 0},C.parameters);var pe=nl[this.specification.type];return pe?new oo(this,{kind:"constant",value:pe(C.value.value,B.value.value,te)},C.parameters):C},oi.prototype.evaluate=function(C,B,te,pe,we,Me){return C.kind==="constant"?C.value:C.evaluate(B,te,pe,we,Me)};var Uo=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,pe,we,Me){if(te.value===void 0)return new oo(this,{kind:"constant",value:void 0},pe);if(te.expression.kind==="constant"){var Ne=te.expression.evaluate(pe,null,{},we,Me),rt=te.property.specification.type==="resolvedImage",vt=rt&&typeof Ne!="string"?Ne.name:Ne,mt=this._calculate(vt,vt,vt,pe);return new oo(this,{kind:"constant",value:mt},pe)}else if(te.expression.kind==="camera"){var Ut=this._calculate(te.expression.evaluate({zoom:pe.zoom-1}),te.expression.evaluate({zoom:pe.zoom}),te.expression.evaluate({zoom:pe.zoom+1}),pe);return new oo(this,{kind:"constant",value:Ut},pe)}else return new oo(this,te.expression,pe)},C.prototype.evaluate=function(te,pe,we,Me,Ne,rt){if(te.kind==="source"){var vt=te.evaluate(pe,we,Me,Ne,rt);return this._calculate(vt,vt,vt,pe)}else return te.kind==="composite"?this._calculate(te.evaluate({zoom:Math.floor(pe.zoom)-1},we,Me),te.evaluate({zoom:Math.floor(pe.zoom)},we,Me),te.evaluate({zoom:Math.floor(pe.zoom)+1},we,Me),pe):te.value},C.prototype._calculate=function(te,pe,we,Me){var Ne=Me.zoom;return Ne>Me.zoomHistory.lastIntegerZoom?{from:te,to:pe}:{from:we,to:pe}},C.prototype.interpolate=function(te){return te},C}(oi),wo=function(C){this.specification=C};wo.prototype.possiblyEvaluate=function(C,B,te,pe){if(C.value!==void 0)if(C.expression.kind==="constant"){var we=C.expression.evaluate(B,null,{},te,pe);return this._calculate(we,we,we,B)}else return this._calculate(C.expression.evaluate(new yi(Math.floor(B.zoom-1),B)),C.expression.evaluate(new yi(Math.floor(B.zoom),B)),C.expression.evaluate(new yi(Math.floor(B.zoom+1),B)),B)},wo.prototype._calculate=function(C,B,te,pe){var we=pe.zoom;return we>pe.zoomHistory.lastIntegerZoom?{from:C,to:B}:{from:te,to:B}},wo.prototype.interpolate=function(C){return C};var qo=function(C){this.specification=C};qo.prototype.possiblyEvaluate=function(C,B,te,pe){return!!C.expression.evaluate(B,null,{},te,pe)},qo.prototype.interpolate=function(){return!1};var fo=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var B in C){var te=C[B];te.specification.overridable&&this.overridableProperties.push(B);var pe=this.defaultPropertyValues[B]=new So(te,void 0),we=this.defaultTransitionablePropertyValues[B]=new yo(te);this.defaultTransitioningPropertyValues[B]=we.untransitioned(),this.defaultPossiblyEvaluatedValues[B]=pe.possiblyEvaluate({})}};Be("DataDrivenProperty",oi),Be("DataConstantProperty",Za),Be("CrossFadedDataDrivenProperty",Uo),Be("CrossFadedProperty",wo),Be("ColorRampProperty",qo);var bs="-transition",js=function(k){function C(B,te){if(k.call(this),this.id=B.id,this.type=B.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},B.type!=="custom"&&(B=B,this.metadata=B.metadata,this.minzoom=B.minzoom,this.maxzoom=B.maxzoom,B.type!=="background"&&(this.source=B.source,this.sourceLayer=B["source-layer"],this.filter=B.filter),te.layout&&(this._unevaluatedLayout=new xs(te.layout)),te.paint)){this._transitionablePaint=new Oo(te.paint);for(var pe in B.paint)this.setPaintProperty(pe,B.paint[pe],{validate:!1});for(var we in B.layout)this.setLayoutProperty(we,B.layout[we],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eo(te.paint)}}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function(te){return te==="visibility"?this.visibility:this._unevaluatedLayout.getValue(te)},C.prototype.setLayoutProperty=function(te,pe,we){if(we===void 0&&(we={}),pe!=null){var Me="layers."+this.id+".layout."+te;if(this._validate(vi,Me,te,pe,we))return}if(te==="visibility"){this.visibility=pe;return}this._unevaluatedLayout.setValue(te,pe)},C.prototype.getPaintProperty=function(te){return S(te,bs)?this._transitionablePaint.getTransition(te.slice(0,-bs.length)):this._transitionablePaint.getValue(te)},C.prototype.setPaintProperty=function(te,pe,we){if(we===void 0&&(we={}),pe!=null){var Me="layers."+this.id+".paint."+te;if(this._validate(ea,Me,te,pe,we))return!1}if(S(te,bs))return this._transitionablePaint.setTransition(te.slice(0,-bs.length),pe||void 0),!1;var Ne=this._transitionablePaint._values[te],rt=Ne.property.specification["property-type"]==="cross-faded-data-driven",vt=Ne.value.isDataDriven(),mt=Ne.value;this._transitionablePaint.setValue(te,pe),this._handleSpecialPaintPropertyUpdate(te);var Ut=this._transitionablePaint._values[te].value,ir=Ut.isDataDriven();return ir||vt||rt||this._handleOverridablePaintPropertyUpdate(te,mt,Ut)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){},C.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,we){return!1},C.prototype.isHidden=function(te){return this.minzoom&&te<this.minzoom||this.maxzoom&&te>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function(te){this._transitioningPaint=this._transitionablePaint.transitioned(te,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function(te,pe){te.getCrossfadeParameters&&(this._crossfadeParameters=te.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(te,void 0,pe)),this.paint=this._transitioningPaint.possiblyEvaluate(te,void 0,pe)},C.prototype.serialize=function(){var te={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(te.layout=te.layout||{},te.layout.visibility=this.visibility),F(te,function(pe,we){return pe!==void 0&&!(we==="layout"&&!Object.keys(pe).length)&&!(we==="paint"&&!Object.keys(pe).length)})},C.prototype._validate=function(te,pe,we,Me,Ne){return Ne===void 0&&(Ne={}),Ne&&Ne.validate===!1?!1:Di(this,te.call(Hn,{key:pe,layerType:this.type,objectKey:we,value:Me,styleSpec:Yt,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var te in this.paint._values){var pe=this.paint.get(te);if(!(!(pe instanceof oo)||!hi(pe.property.specification))&&(pe.value.kind==="source"||pe.value.kind==="composite")&&pe.value.isStateDependent)return!0}return!1},C}(Er),Bu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ho=function(C,B){this._structArray=C,this._pos1=B*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},af=128,yu=5,qi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};qi.serialize=function(C,B){return C._trim(),B&&(C.isTransferred=!0,B.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},qi.deserialize=function(C){var B=Object.create(this.prototype);return B.arrayBuffer=C.arrayBuffer,B.length=C.length,B.capacity=C.arrayBuffer.byteLength/B.bytesPerElement,B._refreshViews(),B},qi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},qi.prototype.clear=function(){this.length=0},qi.prototype.resize=function(C){this.reserve(C),this.length=C},qi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*yu),af),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var B=this.uint8;this._refreshViews(),B&&this.uint8.set(B)}},qi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function es(k,C){C===void 0&&(C=1);var B=0,te=0,pe=k.map(function(Me){var Ne=Nd(Me.type),rt=B=vh(B,Math.max(C,Ne)),vt=Me.components||1;return te=Math.max(te,Ne),B+=Ne*vt,{name:Me.name,type:Me.type,components:vt,offset:rt}}),we=vh(B,Math.max(te,C));return{members:pe,size:we,alignment:C}}function Nd(k){return Bu[k].BYTES_PER_ELEMENT}function vh(k,C){return Math.ceil(k/C)*C}var zf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},C.prototype.emplace=function(te,pe,we){var Me=te*2;return this.int16[Me+0]=pe,this.int16[Me+1]=we,te},C}(qi);zf.prototype.bytesPerElement=4,Be("StructArrayLayout2i4",zf);var kc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,pe,we,Me)},C.prototype.emplace=function(te,pe,we,Me,Ne){var rt=te*4;return this.int16[rt+0]=pe,this.int16[rt+1]=we,this.int16[rt+2]=Me,this.int16[rt+3]=Ne,te},C}(qi);kc.prototype.bytesPerElement=8,Be("StructArrayLayout4i8",kc);var of=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,pe,we,Me,Ne,rt)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt){var mt=te*6;return this.int16[mt+0]=pe,this.int16[mt+1]=we,this.int16[mt+2]=Me,this.int16[mt+3]=Ne,this.int16[mt+4]=rt,this.int16[mt+5]=vt,te},C}(qi);of.prototype.bytesPerElement=12,Be("StructArrayLayout2i4i12",of);var ph=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,pe,we,Me,Ne,rt)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt){var mt=te*4,Ut=te*8;return this.int16[mt+0]=pe,this.int16[mt+1]=we,this.uint8[Ut+4]=Me,this.uint8[Ut+5]=Ne,this.uint8[Ut+6]=rt,this.uint8[Ut+7]=vt,te},C}(qi);ph.prototype.bytesPerElement=8,Be("StructArrayLayout2i4ub8",ph);var _l=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir){var tr=this.length;return this.resize(tr+1),this.emplace(tr,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr){var xr=te*9,Ur=te*18;return this.uint16[xr+0]=pe,this.uint16[xr+1]=we,this.uint16[xr+2]=Me,this.uint16[xr+3]=Ne,this.uint16[xr+4]=rt,this.uint16[xr+5]=vt,this.uint16[xr+6]=mt,this.uint16[xr+7]=Ut,this.uint8[Ur+16]=ir,this.uint8[Ur+17]=tr,te},C}(qi);_l.prototype.bytesPerElement=18,Be("StructArrayLayout8ui2ub18",_l);var Cc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr){var Ur=this.length;return this.resize(Ur+1),this.emplace(Ur,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur){var hn=te*12;return this.int16[hn+0]=pe,this.int16[hn+1]=we,this.int16[hn+2]=Me,this.int16[hn+3]=Ne,this.uint16[hn+4]=rt,this.uint16[hn+5]=vt,this.uint16[hn+6]=mt,this.uint16[hn+7]=Ut,this.int16[hn+8]=ir,this.int16[hn+9]=tr,this.int16[hn+10]=xr,this.int16[hn+11]=Ur,te},C}(qi);Cc.prototype.bytesPerElement=24,Be("StructArrayLayout4i4ui4i24",Cc);var gv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},C.prototype.emplace=function(te,pe,we,Me){var Ne=te*3;return this.float32[Ne+0]=pe,this.float32[Ne+1]=we,this.float32[Ne+2]=Me,te},C}(qi);gv.prototype.bytesPerElement=12,Be("StructArrayLayout3f12",gv);var mv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var we=te*1;return this.uint32[we+0]=pe,te},C}(qi);mv.prototype.bytesPerElement=4,Be("StructArrayLayout1ul4",mv);var Of=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,mt,Ut){var ir=this.length;return this.resize(ir+1),this.emplace(ir,te,pe,we,Me,Ne,rt,vt,mt,Ut)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir){var tr=te*10,xr=te*5;return this.int16[tr+0]=pe,this.int16[tr+1]=we,this.int16[tr+2]=Me,this.int16[tr+3]=Ne,this.int16[tr+4]=rt,this.int16[tr+5]=vt,this.uint32[xr+3]=mt,this.uint16[tr+8]=Ut,this.uint16[tr+9]=ir,te},C}(qi);Of.prototype.bytesPerElement=20,Be("StructArrayLayout6i1ul2ui20",Of);var dh=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,te,pe,we,Me,Ne,rt)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt){var mt=te*6;return this.int16[mt+0]=pe,this.int16[mt+1]=we,this.int16[mt+2]=Me,this.int16[mt+3]=Ne,this.int16[mt+4]=rt,this.int16[mt+5]=vt,te},C}(qi);dh.prototype.bytesPerElement=12,Be("StructArrayLayout2i2i2i12",dh);var gc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne){var rt=this.length;return this.resize(rt+1),this.emplace(rt,te,pe,we,Me,Ne)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt){var vt=te*4,mt=te*8;return this.float32[vt+0]=pe,this.float32[vt+1]=we,this.float32[vt+2]=Me,this.int16[mt+6]=Ne,this.int16[mt+7]=rt,te},C}(qi);gc.prototype.bytesPerElement=16,Be("StructArrayLayout2f1f2i16",gc);var Nl=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,pe,we,Me)},C.prototype.emplace=function(te,pe,we,Me,Ne){var rt=te*12,vt=te*3;return this.uint8[rt+0]=pe,this.uint8[rt+1]=we,this.float32[vt+1]=Me,this.float32[vt+2]=Ne,te},C}(qi);Nl.prototype.bytesPerElement=12,Be("StructArrayLayout2ub2f12",Nl);var mc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},C.prototype.emplace=function(te,pe,we,Me){var Ne=te*3;return this.uint16[Ne+0]=pe,this.uint16[Ne+1]=we,this.uint16[Ne+2]=Me,te},C}(qi);mc.prototype.bytesPerElement=6,Be("StructArrayLayout3ui6",mc);var Nf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn){var Dn=this.length;return this.resize(Dn+1),this.emplace(Dn,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn){var Vn=te*24,qn=te*12,da=te*48;return this.int16[Vn+0]=pe,this.int16[Vn+1]=we,this.uint16[Vn+2]=Me,this.uint16[Vn+3]=Ne,this.uint32[qn+2]=rt,this.uint32[qn+3]=vt,this.uint32[qn+4]=mt,this.uint16[Vn+10]=Ut,this.uint16[Vn+11]=ir,this.uint16[Vn+12]=tr,this.float32[qn+7]=xr,this.float32[qn+8]=Ur,this.uint8[da+36]=hn,this.uint8[da+37]=an,this.uint8[da+38]=Rn,this.uint32[qn+10]=Mn,this.int16[Vn+22]=Dn,te},C}(qi);Nf.prototype.bytesPerElement=48,Be("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Nf);var gh=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,fi,Ua,Ha){var bi=this.length;return this.resize(bi+1),this.emplace(bi,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,fi,Ua,Ha)},C.prototype.emplace=function(te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va,Wa,Da,Oa,fi,Ua,Ha,bi){var ci=te*34,Vi=te*17;return this.int16[ci+0]=pe,this.int16[ci+1]=we,this.int16[ci+2]=Me,this.int16[ci+3]=Ne,this.int16[ci+4]=rt,this.int16[ci+5]=vt,this.int16[ci+6]=mt,this.int16[ci+7]=Ut,this.uint16[ci+8]=ir,this.uint16[ci+9]=tr,this.uint16[ci+10]=xr,this.uint16[ci+11]=Ur,this.uint16[ci+12]=hn,this.uint16[ci+13]=an,this.uint16[ci+14]=Rn,this.uint16[ci+15]=Mn,this.uint16[ci+16]=Dn,this.uint16[ci+17]=Vn,this.uint16[ci+18]=qn,this.uint16[ci+19]=da,this.uint16[ci+20]=va,this.uint16[ci+21]=Wa,this.uint16[ci+22]=Da,this.uint32[Vi+12]=Oa,this.float32[Vi+13]=fi,this.float32[Vi+14]=Ua,this.float32[Vi+15]=Ha,this.float32[Vi+16]=bi,te},C}(qi);gh.prototype.bytesPerElement=68,Be("StructArrayLayout8i15ui1ul4f68",gh);var sf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var we=te*1;return this.float32[we+0]=pe,te},C}(qi);sf.prototype.bytesPerElement=4,Be("StructArrayLayout1f4",sf);var yv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},C.prototype.emplace=function(te,pe,we,Me){var Ne=te*3;return this.int16[Ne+0]=pe,this.int16[Ne+1]=we,this.int16[Ne+2]=Me,te},C}(qi);yv.prototype.bytesPerElement=6,Be("StructArrayLayout3i6",yv);var Lc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},C.prototype.emplace=function(te,pe,we,Me){var Ne=te*2,rt=te*4;return this.uint32[Ne+0]=pe,this.uint16[rt+2]=we,this.uint16[rt+3]=Me,te},C}(qi);Lc.prototype.bytesPerElement=8,Be("StructArrayLayout1ul2ui8",Lc);var Bf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},C.prototype.emplace=function(te,pe,we){var Me=te*2;return this.uint16[Me+0]=pe,this.uint16[Me+1]=we,te},C}(qi);Bf.prototype.bytesPerElement=4,Be("StructArrayLayout2ui4",Bf);var lf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},C.prototype.emplace=function(te,pe){var we=te*1;return this.uint16[we+0]=pe,te},C}(qi);lf.prototype.bytesPerElement=2,Be("StructArrayLayout1ui2",lf);var Pc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},C.prototype.emplace=function(te,pe,we){var Me=te*2;return this.float32[Me+0]=pe,this.float32[Me+1]=we,te},C}(qi);Pc.prototype.bytesPerElement=8,Be("StructArrayLayout2f8",Pc);var xv=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(te,pe,we,Me){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,te,pe,we,Me)},C.prototype.emplace=function(te,pe,we,Me,Ne){var rt=te*4;return this.float32[rt+0]=pe,this.float32[rt+1]=we,this.float32[rt+2]=Me,this.float32[rt+3]=Ne,te},C}(qi);xv.prototype.bytesPerElement=16,Be("StructArrayLayout4f16",xv);var hp=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var B={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return B.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},B.x1.get=function(){return this._structArray.int16[this._pos2+2]},B.y1.get=function(){return this._structArray.int16[this._pos2+3]},B.x2.get=function(){return this._structArray.int16[this._pos2+4]},B.y2.get=function(){return this._structArray.int16[this._pos2+5]},B.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},B.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},B.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},B.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,B),C}(ho);hp.prototype.size=20;var Dc=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new hp(this,te)},C}(Of);Be("CollisionBoxArray",Dc);var bv=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var B={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return B.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},B.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},B.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},B.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},B.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},B.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},B.segment.get=function(){return this._structArray.uint16[this._pos2+10]},B.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},B.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},B.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},B.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},B.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},B.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},B.placedOrientation.set=function(te){this._structArray.uint8[this._pos1+37]=te},B.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},B.hidden.set=function(te){this._structArray.uint8[this._pos1+38]=te},B.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},B.crossTileID.set=function(te){this._structArray.uint32[this._pos4+10]=te},B.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,B),C}(ho);bv.prototype.size=48;var uf=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new bv(this,te)},C}(Nf);Be("PlacedSymbolArray",uf);var vp=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var B={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return B.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},B.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},B.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},B.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},B.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},B.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},B.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},B.key.get=function(){return this._structArray.uint16[this._pos2+8]},B.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},B.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},B.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},B.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},B.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},B.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},B.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},B.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},B.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},B.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},B.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},B.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},B.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},B.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},B.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},B.crossTileID.set=function(te){this._structArray.uint32[this._pos4+12]=te},B.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},B.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},B.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},B.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,B),C}(ho);vp.prototype.size=68;var pp=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new vp(this,te)},C}(gh);Be("SymbolInstanceArray",pp);var Uu=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function(te){return this.float32[te*1+0]},C}(sf);Be("GlyphOffsetArray",Uu);var dp=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.getx=function(te){return this.int16[te*3+0]},C.prototype.gety=function(te){return this.int16[te*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function(te){return this.int16[te*3+2]},C}(yv);Be("SymbolLineVertexArray",dp);var gp=function(k){function C(){k.apply(this,arguments)}k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C;var B={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return B.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},B.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},B.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,B),C}(ho);gp.prototype.size=8;var _v=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.get=function(te){return new gp(this,te)},C}(Lc);Be("FeatureIndexArray",_v);var mp=es([{name:"a_pos",components:2,type:"Int16"}],4),ve=mp.members,W=function(C){C===void 0&&(C=[]),this.segments=C};W.prototype.prepareSegment=function(C,B,te,pe){var we=this.segments[this.segments.length-1];return C>W.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+W.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!we||we.vertexLength+C>W.MAX_VERTEX_ARRAY_LENGTH||we.sortKey!==pe)&&(we={vertexOffset:B.length,primitiveOffset:te.length,vertexLength:0,primitiveLength:0},pe!==void 0&&(we.sortKey=pe),this.segments.push(we)),we},W.prototype.get=function(){return this.segments},W.prototype.destroy=function(){for(var C=0,B=this.segments;C<B.length;C+=1){var te=B[C];for(var pe in te.vaos)te.vaos[pe].destroy()}},W.simpleSegment=function(C,B,te,pe){return new W([{vertexOffset:C,primitiveOffset:B,vertexLength:te,primitiveLength:pe,vaos:{},sortKey:0}])},W.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Be("SegmentVector",W);function de(k,C){return k=f(Math.floor(k),0,255),C=f(Math.floor(C),0,255),256*k+C}var J=es([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ge=a(function(k){function C(B,te){var pe,we,Me,Ne,rt,vt,mt,Ut;for(pe=B.length&3,we=B.length-pe,Me=te,rt=3432918353,vt=461845907,Ut=0;Ut<we;)mt=B.charCodeAt(Ut)&255|(B.charCodeAt(++Ut)&255)<<8|(B.charCodeAt(++Ut)&255)<<16|(B.charCodeAt(++Ut)&255)<<24,++Ut,mt=(mt&65535)*rt+(((mt>>>16)*rt&65535)<<16)&4294967295,mt=mt<<15|mt>>>17,mt=(mt&65535)*vt+(((mt>>>16)*vt&65535)<<16)&4294967295,Me^=mt,Me=Me<<13|Me>>>19,Ne=(Me&65535)*5+(((Me>>>16)*5&65535)<<16)&4294967295,Me=(Ne&65535)+27492+(((Ne>>>16)+58964&65535)<<16);switch(mt=0,pe){case 3:mt^=(B.charCodeAt(Ut+2)&255)<<16;case 2:mt^=(B.charCodeAt(Ut+1)&255)<<8;case 1:mt^=B.charCodeAt(Ut)&255,mt=(mt&65535)*rt+(((mt>>>16)*rt&65535)<<16)&4294967295,mt=mt<<15|mt>>>17,mt=(mt&65535)*vt+(((mt>>>16)*vt&65535)<<16)&4294967295,Me^=mt}return Me^=B.length,Me^=Me>>>16,Me=(Me&65535)*2246822507+(((Me>>>16)*2246822507&65535)<<16)&4294967295,Me^=Me>>>13,Me=(Me&65535)*3266489909+(((Me>>>16)*3266489909&65535)<<16)&4294967295,Me^=Me>>>16,Me>>>0}k.exports=C}),Ce=a(function(k){function C(B,te){for(var pe=B.length,we=te^pe,Me=0,Ne;pe>=4;)Ne=B.charCodeAt(Me)&255|(B.charCodeAt(++Me)&255)<<8|(B.charCodeAt(++Me)&255)<<16|(B.charCodeAt(++Me)&255)<<24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),Ne^=Ne>>>24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)^Ne,pe-=4,++Me;switch(pe){case 3:we^=(B.charCodeAt(Me+2)&255)<<16;case 2:we^=(B.charCodeAt(Me+1)&255)<<8;case 1:we^=B.charCodeAt(Me)&255,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)}return we^=we>>>13,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16),we^=we>>>15,we>>>0}k.exports=C}),Fe=ge,$e=ge,ht=Ce;Fe.murmur3=$e,Fe.murmur2=ht;var Dt=function(){this.ids=[],this.positions=[],this.indexed=!1};Dt.prototype.add=function(C,B,te,pe){this.ids.push(pr(C)),this.positions.push(B,te,pe)},Dt.prototype.getPositions=function(C){for(var B=pr(C),te=0,pe=this.ids.length-1;te<pe;){var we=te+pe>>1;this.ids[we]>=B?pe=we:te=we+1}for(var Me=[];this.ids[te]===B;){var Ne=this.positions[3*te],rt=this.positions[3*te+1],vt=this.positions[3*te+2];Me.push({index:Ne,start:rt,end:vt}),te++}return Me},Dt.serialize=function(C,B){var te=new Float64Array(C.ids),pe=new Uint32Array(C.positions);return yr(te,pe,0,te.length-1),B&&B.push(te.buffer,pe.buffer),{ids:te,positions:pe}},Dt.deserialize=function(C){var B=new Dt;return B.ids=C.ids,B.positions=C.positions,B.indexed=!0,B};var er=Math.pow(2,53)-1;function pr(k){var C=+k;return!isNaN(C)&&C<=er?C:Fe(String(k))}function yr(k,C,B,te){for(;B<te;){for(var pe=k[B+te>>1],we=B-1,Me=te+1;;){do we++;while(k[we]<pe);do Me--;while(k[Me]>pe);if(we>=Me)break;Rr(k,we,Me),Rr(C,3*we,3*Me),Rr(C,3*we+1,3*Me+1),Rr(C,3*we+2,3*Me+2)}Me-B<te-Me?(yr(k,C,B,Me),B=Me+1):(yr(k,C,Me+1,te),te=Me)}}function Rr(k,C,B){var te=k[C];k[C]=k[B],k[B]=te}Be("FeaturePositionMap",Dt);var Zr=function(C,B){this.gl=C.gl,this.location=B},Jr=function(k){function C(B,te){k.call(this,B,te),this.current=0}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1i(this.location,te))},C}(Zr),Xr=function(k){function C(B,te){k.call(this,B,te),this.current=0}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1f(this.location,te))},C}(Zr),rn=function(k){function C(B,te){k.call(this,B,te),this.current=[0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1])&&(this.current=te,this.gl.uniform2f(this.location,te[0],te[1]))},C}(Zr),xn=function(k){function C(B,te){k.call(this,B,te),this.current=[0,0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2])&&(this.current=te,this.gl.uniform3f(this.location,te[0],te[1],te[2]))},C}(Zr),Fn=function(k){function C(B,te){k.call(this,B,te),this.current=[0,0,0,0]}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2]||te[3]!==this.current[3])&&(this.current=te,this.gl.uniform4f(this.location,te[0],te[1],te[2],te[3]))},C}(Zr),Gn=function(k){function C(B,te){k.call(this,B,te),this.current=Ai.transparent}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){(te.r!==this.current.r||te.g!==this.current.g||te.b!==this.current.b||te.a!==this.current.a)&&(this.current=te,this.gl.uniform4f(this.location,te.r,te.g,te.b,te.a))},C}(Zr),oa=new Float32Array(16),ca=function(k){function C(B,te){k.call(this,B,te),this.current=oa}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.set=function(te){if(te[12]!==this.current[12]||te[0]!==this.current[0]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);return}for(var pe=1;pe<16;pe++)if(te[pe]!==this.current[pe]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);break}},C}(Zr);function la(k){return[de(255*k.r,255*k.g),de(255*k.b,255*k.a)]}var wa=function(C,B,te){this.value=C,this.uniformNames=B.map(function(pe){return"u_"+pe}),this.type=te};wa.prototype.setUniform=function(C,B,te){C.set(te.constantOr(this.value))},wa.prototype.getBinding=function(C,B,te){return this.type==="color"?new Gn(C,B):new Xr(C,B)};var La=function(C,B){this.uniformNames=B.map(function(te){return"u_"+te}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};La.prototype.setConstantPatternPositions=function(C,B){this.pixelRatioFrom=B.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=B.tlbr,this.patternTo=C.tlbr},La.prototype.setUniform=function(C,B,te,pe){var we=pe==="u_pattern_to"?this.patternTo:pe==="u_pattern_from"?this.patternFrom:pe==="u_pixel_ratio_to"?this.pixelRatioTo:pe==="u_pixel_ratio_from"?this.pixelRatioFrom:null;we&&C.set(we)},La.prototype.getBinding=function(C,B,te){return te.substr(0,9)==="u_pattern"?new Fn(C,B):new Xr(C,B)};var Ca=function(C,B,te,pe){this.expression=C,this.type=te,this.maxValue=0,this.paintVertexAttributes=B.map(function(we){return{name:"a_"+we,type:"Float32",components:te==="color"?2:1,offset:0}}),this.paintVertexArray=new pe};Ca.prototype.populatePaintArray=function(C,B,te,pe,we){var Me=this.paintVertexArray.length,Ne=this.expression.evaluate(new yi(0),B,{},pe,[],we);this.paintVertexArray.resize(C),this._setPaintValue(Me,C,Ne)},Ca.prototype.updatePaintArray=function(C,B,te,pe){var we=this.expression.evaluate({zoom:0},te,pe);this._setPaintValue(C,B,we)},Ca.prototype._setPaintValue=function(C,B,te){if(this.type==="color")for(var pe=la(te),we=C;we<B;we++)this.paintVertexArray.emplace(we,pe[0],pe[1]);else{for(var Me=C;Me<B;Me++)this.paintVertexArray.emplace(Me,te);this.maxValue=Math.max(this.maxValue,Math.abs(te))}},Ca.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Fa=function(C,B,te,pe,we,Me){this.expression=C,this.uniformNames=B.map(function(Ne){return"u_"+Ne+"_t"}),this.type=te,this.useIntegerZoom=pe,this.zoom=we,this.maxValue=0,this.paintVertexAttributes=B.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:te==="color"?4:2,offset:0}}),this.paintVertexArray=new Me};Fa.prototype.populatePaintArray=function(C,B,te,pe,we){var Me=this.expression.evaluate(new yi(this.zoom),B,{},pe,[],we),Ne=this.expression.evaluate(new yi(this.zoom+1),B,{},pe,[],we),rt=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(rt,C,Me,Ne)},Fa.prototype.updatePaintArray=function(C,B,te,pe){var we=this.expression.evaluate({zoom:this.zoom},te,pe),Me=this.expression.evaluate({zoom:this.zoom+1},te,pe);this._setPaintValue(C,B,we,Me)},Fa.prototype._setPaintValue=function(C,B,te,pe){if(this.type==="color")for(var we=la(te),Me=la(pe),Ne=C;Ne<B;Ne++)this.paintVertexArray.emplace(Ne,we[0],we[1],Me[0],Me[1]);else{for(var rt=C;rt<B;rt++)this.paintVertexArray.emplace(rt,te,pe);this.maxValue=Math.max(this.maxValue,Math.abs(te),Math.abs(pe))}},Fa.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Fa.prototype.setUniform=function(C,B){var te=this.useIntegerZoom?Math.floor(B.zoom):B.zoom,pe=f(this.expression.interpolationFactor(te,this.zoom,this.zoom+1),0,1);C.set(pe)},Fa.prototype.getBinding=function(C,B,te){return new Xr(C,B)};var Ba=function(C,B,te,pe,we,Me){this.expression=C,this.type=B,this.useIntegerZoom=te,this.zoom=pe,this.layerId=Me,this.zoomInPaintVertexArray=new we,this.zoomOutPaintVertexArray=new we};Ba.prototype.populatePaintArray=function(C,B,te){var pe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(pe,C,B.patterns&&B.patterns[this.layerId],te)},Ba.prototype.updatePaintArray=function(C,B,te,pe,we){this._setPaintValues(C,B,te.patterns&&te.patterns[this.layerId],we)},Ba.prototype._setPaintValues=function(C,B,te,pe){if(!(!pe||!te)){var we=te.min,Me=te.mid,Ne=te.max,rt=pe[we],vt=pe[Me],mt=pe[Ne];if(!(!rt||!vt||!mt))for(var Ut=C;Ut<B;Ut++)this.zoomInPaintVertexArray.emplace(Ut,vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],rt.tl[0],rt.tl[1],rt.br[0],rt.br[1],vt.pixelRatio,rt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ut,vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],mt.tl[0],mt.tl[1],mt.br[0],mt.br[1],vt.pixelRatio,mt.pixelRatio)}},Ba.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,J.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,J.members,this.expression.isStateDependent))},Ba.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ti=function(C,B,te,pe){this.binders={},this.layoutAttributes=pe,this._buffers=[];var we=[];for(var Me in C.paint._values)if(!!te(Me)){var Ne=C.paint.get(Me);if(!(!(Ne instanceof oo)||!hi(Ne.property.specification))){var rt=Yi(Me,C.type),vt=Ne.value,mt=Ne.property.specification.type,Ut=Ne.property.useIntegerZoom,ir=Ne.property.specification["property-type"],tr=ir==="cross-faded"||ir==="cross-faded-data-driven";if(vt.kind==="constant")this.binders[Me]=tr?new La(vt.value,rt):new wa(vt.value,rt,mt),we.push("/u_"+Me);else if(vt.kind==="source"||tr){var xr=Ci(Me,mt,"source");this.binders[Me]=tr?new Ba(vt,mt,Ut,B,xr,C.id):new Ca(vt,rt,mt,xr),we.push("/a_"+Me)}else{var Ur=Ci(Me,mt,"composite");this.binders[Me]=new Fa(vt,rt,mt,Ut,B,Ur),we.push("/z_"+Me)}}}this.cacheKey=we.sort().join("")};ti.prototype.getMaxValue=function(C){var B=this.binders[C];return B instanceof Ca||B instanceof Fa?B.maxValue:0},ti.prototype.populatePaintArrays=function(C,B,te,pe,we){for(var Me in this.binders){var Ne=this.binders[Me];(Ne instanceof Ca||Ne instanceof Fa||Ne instanceof Ba)&&Ne.populatePaintArray(C,B,te,pe,we)}},ti.prototype.setConstantPatternPositions=function(C,B){for(var te in this.binders){var pe=this.binders[te];pe instanceof La&&pe.setConstantPatternPositions(C,B)}},ti.prototype.updatePaintArrays=function(C,B,te,pe,we){var Me=!1;for(var Ne in C)for(var rt=B.getPositions(Ne),vt=0,mt=rt;vt<mt.length;vt+=1){var Ut=mt[vt],ir=te.feature(Ut.index);for(var tr in this.binders){var xr=this.binders[tr];if((xr instanceof Ca||xr instanceof Fa||xr instanceof Ba)&&xr.expression.isStateDependent===!0){var Ur=pe.paint.get(tr);xr.expression=Ur.value,xr.updatePaintArray(Ut.start,Ut.end,ir,C[Ne],we),Me=!0}}}return Me},ti.prototype.defines=function(){var C=[];for(var B in this.binders){var te=this.binders[B];(te instanceof wa||te instanceof La)&&C.push.apply(C,te.uniformNames.map(function(pe){return"#define HAS_UNIFORM_"+pe}))}return C},ti.prototype.getPaintVertexBuffers=function(){return this._buffers},ti.prototype.getUniforms=function(C,B){var te=[];for(var pe in this.binders){var we=this.binders[pe];if(we instanceof wa||we instanceof La||we instanceof Fa)for(var Me=0,Ne=we.uniformNames;Me<Ne.length;Me+=1){var rt=Ne[Me];if(B[rt]){var vt=we.getBinding(C,B[rt],rt);te.push({name:rt,property:pe,binding:vt})}}}return te},ti.prototype.setUniforms=function(C,B,te,pe){for(var we=0,Me=B;we<Me.length;we+=1){var Ne=Me[we],rt=Ne.name,vt=Ne.property,mt=Ne.binding;this.binders[vt].setUniform(mt,pe,te.get(vt),rt)}},ti.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var B in this.binders){var te=this.binders[B];if(C&&te instanceof Ba){var pe=C.fromScale===2?te.zoomInPaintVertexBuffer:te.zoomOutPaintVertexBuffer;pe&&this._buffers.push(pe)}else(te instanceof Ca||te instanceof Fa)&&te.paintVertexBuffer&&this._buffers.push(te.paintVertexBuffer)}},ti.prototype.upload=function(C){for(var B in this.binders){var te=this.binders[B];(te instanceof Ca||te instanceof Fa||te instanceof Ba)&&te.upload(C)}this.updatePaintBuffers()},ti.prototype.destroy=function(){for(var C in this.binders){var B=this.binders[C];(B instanceof Ca||B instanceof Fa||B instanceof Ba)&&B.destroy()}};var pi=function(C,B,te,pe){pe===void 0&&(pe=function(){return!0}),this.programConfigurations={};for(var we=0,Me=B;we<Me.length;we+=1){var Ne=Me[we];this.programConfigurations[Ne.id]=new ti(Ne,te,pe,C)}this.needsUpload=!1,this._featureMap=new Dt,this._bufferOffset=0};pi.prototype.populatePaintArrays=function(C,B,te,pe,we,Me){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(C,B,pe,we,Me);B.id!==void 0&&this._featureMap.add(B.id,te,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},pi.prototype.updatePaintArrays=function(C,B,te,pe){for(var we=0,Me=te;we<Me.length;we+=1){var Ne=Me[we];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(C,this._featureMap,B,Ne,pe)||this.needsUpload}},pi.prototype.get=function(C){return this.programConfigurations[C]},pi.prototype.upload=function(C){if(!!this.needsUpload){for(var B in this.programConfigurations)this.programConfigurations[B].upload(C);this.needsUpload=!1}},pi.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function Yi(k,C){var B={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return B[k]||[k.replace(C+"-","").replace(/-/g,"_")]}function xi(k){var C={"line-pattern":{source:_l,composite:_l},"fill-pattern":{source:_l,composite:_l},"fill-extrusion-pattern":{source:_l,composite:_l}};return C[k]}function Ci(k,C,B){var te={color:{source:Pc,composite:xv},number:{source:sf,composite:Pc}},pe=xi(k);return pe&&pe[B]||te[C][B]}Be("ConstantBinder",wa),Be("CrossFadedConstantBinder",La),Be("SourceExpressionBinder",Ca),Be("CrossFadedCompositeBinder",Ba),Be("CompositeExpressionBinder",Fa),Be("ProgramConfiguration",ti,{omit:["_buffers"]}),Be("ProgramConfigurationSet",pi);var $a=8192;function Wi(k){return{min:-1*Math.pow(2,k-1),max:Math.pow(2,k-1)-1}}var Qi=Wi(15);function to(k){for(var C=$a/k.extent,B=k.loadGeometry(),te=0;te<B.length;te++)for(var pe=B[te],we=0;we<pe.length;we++){var Me=pe[we];Me.x=Math.round(Me.x*C),Me.y=Math.round(Me.y*C),(Me.x<Qi.min||Me.x>Qi.max||Me.y<Qi.min||Me.y>Qi.max)&&(O("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Me.x=f(Me.x,Qi.min,Qi.max),Me.y=f(Me.y,Qi.min,Qi.max))}return B}function Ii(k,C,B,te,pe){k.emplaceBack(C*2+(te+1)/2,B*2+(pe+1)/2)}var vo=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new zf,this.indexArray=new mc,this.segments=new W,this.programConfigurations=new pi(ve,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};vo.prototype.populate=function(C,B,te){var pe=this.layers[0],we=[],Me=null;pe.type==="circle"&&(Me=pe.layout.get("circle-sort-key"));for(var Ne=0,rt=C;Ne<rt.length;Ne+=1){var vt=rt[Ne],mt=vt.feature,Ut=vt.id,ir=vt.index,tr=vt.sourceLayerIndex,xr=this.layers[0]._featureFilter.needGeometry,Ur={type:mt.type,id:Ut,properties:mt.properties,geometry:xr?to(mt):[]};if(!!this.layers[0]._featureFilter.filter(new yi(this.zoom),Ur,te)){xr||(Ur.geometry=to(mt));var hn=Me?Me.evaluate(Ur,{},te):void 0,an={id:Ut,properties:mt.properties,type:mt.type,sourceLayerIndex:tr,index:ir,geometry:Ur.geometry,patterns:{},sortKey:hn};we.push(an)}}Me&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var Rn=0,Mn=we;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn],Vn=Dn,qn=Vn.geometry,da=Vn.index,va=Vn.sourceLayerIndex,Wa=C[da].feature;this.addFeature(Dn,qn,da,te),B.featureIndex.insert(Wa,qn,da,va,this.index)}},vo.prototype.update=function(C,B,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,te)},vo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vo.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ve),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},vo.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vo.prototype.addFeature=function(C,B,te,pe){for(var we=0,Me=B;we<Me.length;we+=1)for(var Ne=Me[we],rt=0,vt=Ne;rt<vt.length;rt+=1){var mt=vt[rt],Ut=mt.x,ir=mt.y;if(!(Ut<0||Ut>=$a||ir<0||ir>=$a)){var tr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),xr=tr.vertexLength;Ii(this.layoutVertexArray,Ut,ir,-1,-1),Ii(this.layoutVertexArray,Ut,ir,1,-1),Ii(this.layoutVertexArray,Ut,ir,1,1),Ii(this.layoutVertexArray,Ut,ir,-1,1),this.indexArray.emplaceBack(xr,xr+1,xr+2),this.indexArray.emplaceBack(xr,xr+3,xr+2),tr.vertexLength+=4,tr.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,{},pe)},Be("CircleBucket",vo,{omit:["layers"]});function gi(k,C){for(var B=0;B<k.length;B++)if(wl(C,k[B]))return!0;for(var te=0;te<C.length;te++)if(wl(k,C[te]))return!0;return!!bu(k,C)}function Oi(k,C,B){return!!(wl(k,C)||tc(C,k,B))}function Go(k,C){if(k.length===1)return rc(C,k[0]);for(var B=0;B<C.length;B++)for(var te=C[B],pe=0;pe<te.length;pe++)if(wl(k,te[pe]))return!0;for(var we=0;we<k.length;we++)if(rc(C,k[we]))return!0;for(var Me=0;Me<C.length;Me++)if(bu(k,C[Me]))return!0;return!1}function is(k,C,B){for(var te=0;te<C.length;te++){var pe=C[te];if(k.length>=3){for(var we=0;we<pe.length;we++)if(wl(k,pe[we]))return!0}if(xu(k,pe,B))return!0}return!1}function xu(k,C,B){if(k.length>1){if(bu(k,C))return!0;for(var te=0;te<C.length;te++)if(tc(C[te],k,B))return!0}for(var pe=0;pe<k.length;pe++)if(tc(k[pe],C,B))return!0;return!1}function bu(k,C){if(k.length===0||C.length===0)return!1;for(var B=0;B<k.length-1;B++)for(var te=k[B],pe=k[B+1],we=0;we<C.length-1;we++){var Me=C[we],Ne=C[we+1];if(ec(te,pe,Me,Ne))return!0}return!1}function ec(k,C,B,te){return z(k,B,te)!==z(C,B,te)&&z(k,C,B)!==z(k,C,te)}function tc(k,C,B){var te=B*B;if(C.length===1)return k.distSqr(C[0])<te;for(var pe=1;pe<C.length;pe++){var we=C[pe-1],Me=C[pe];if(yc(k,we,Me)<te)return!0}return!1}function yc(k,C,B){var te=C.distSqr(B);if(te===0)return k.distSqr(C);var pe=((k.x-C.x)*(B.x-C.x)+(k.y-C.y)*(B.y-C.y))/te;return pe<0?k.distSqr(C):pe>1?k.distSqr(B):k.distSqr(B.sub(C)._mult(pe)._add(C))}function rc(k,C){for(var B=!1,te,pe,we,Me=0;Me<k.length;Me++){te=k[Me];for(var Ne=0,rt=te.length-1;Ne<te.length;rt=Ne++)pe=te[Ne],we=te[rt],pe.y>C.y!=we.y>C.y&&C.x<(we.x-pe.x)*(C.y-pe.y)/(we.y-pe.y)+pe.x&&(B=!B)}return B}function wl(k,C){for(var B=!1,te=0,pe=k.length-1;te<k.length;pe=te++){var we=k[te],Me=k[pe];we.y>C.y!=Me.y>C.y&&C.x<(Me.x-we.x)*(C.y-we.y)/(Me.y-we.y)+we.x&&(B=!B)}return B}function Rc(k,C,B,te,pe){for(var we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we];if(C<=Ne.x&&B<=Ne.y&&te>=Ne.x&&pe>=Ne.y)return!0}var rt=[new v(C,B),new v(C,pe),new v(te,pe),new v(te,B)];if(k.length>2)for(var vt=0,mt=rt;vt<mt.length;vt+=1){var Ut=mt[vt];if(wl(k,Ut))return!0}for(var ir=0;ir<k.length-1;ir++){var tr=k[ir],xr=k[ir+1];if(Zs(tr,xr,rt))return!0}return!1}function Zs(k,C,B){var te=B[0],pe=B[2];if(k.x<te.x&&C.x<te.x||k.x>pe.x&&C.x>pe.x||k.y<te.y&&C.y<te.y||k.y>pe.y&&C.y>pe.y)return!1;var we=z(k,C,B[0]);return we!==z(k,C,B[1])||we!==z(k,C,B[2])||we!==z(k,C,B[3])}function eu(k,C,B){var te=C.paint.get(k).value;return te.kind==="constant"?te.value:B.programConfigurations.get(C.id).getMaxValue(k)}function nc(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])}function Vu(k,C,B,te,pe){if(!C[0]&&!C[1])return k;var we=v.convert(C)._mult(pe);B==="viewport"&&we._rotate(-te);for(var Me=[],Ne=0;Ne<k.length;Ne++){var rt=k[Ne];Me.push(rt.sub(we))}return Me}var ac=new fo({"circle-sort-key":new oi(Yt.layout_circle["circle-sort-key"])}),mh=new fo({"circle-radius":new oi(Yt.paint_circle["circle-radius"]),"circle-color":new oi(Yt.paint_circle["circle-color"]),"circle-blur":new oi(Yt.paint_circle["circle-blur"]),"circle-opacity":new oi(Yt.paint_circle["circle-opacity"]),"circle-translate":new Za(Yt.paint_circle["circle-translate"]),"circle-translate-anchor":new Za(Yt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Za(Yt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Za(Yt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new oi(Yt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new oi(Yt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new oi(Yt.paint_circle["circle-stroke-opacity"])}),Gc={paint:mh,layout:ac},Bs=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var k=arguments,C=0,B=arguments.length;B--;)C+=k[B]*k[B];return Math.sqrt(C)});function Uf(){var k=new Bs(4);return Bs!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k}function ll(k,C,B){var te=C[0],pe=C[1],we=C[2],Me=C[3],Ne=Math.sin(B),rt=Math.cos(B);return k[0]=te*rt+we*Ne,k[1]=pe*rt+Me*Ne,k[2]=te*-Ne+we*rt,k[3]=pe*-Ne+Me*rt,k}function Vf(){var k=new Bs(9);return Bs!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function yh(k,C){var B=Math.sin(C),te=Math.cos(C);return k[0]=te,k[1]=B,k[2]=0,k[3]=-B,k[4]=te,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function xh(){var k=new Bs(16);return Bs!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=0,k[12]=0,k[13]=0,k[14]=0),k[0]=1,k[5]=1,k[10]=1,k[15]=1,k}function yp(k){var C=new Bs(16);return C[0]=k[0],C[1]=k[1],C[2]=k[2],C[3]=k[3],C[4]=k[4],C[5]=k[5],C[6]=k[6],C[7]=k[7],C[8]=k[8],C[9]=k[9],C[10]=k[10],C[11]=k[11],C[12]=k[12],C[13]=k[13],C[14]=k[14],C[15]=k[15],C}function bh(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}function cf(k,C){var B=C[0],te=C[1],pe=C[2],we=C[3],Me=C[4],Ne=C[5],rt=C[6],vt=C[7],mt=C[8],Ut=C[9],ir=C[10],tr=C[11],xr=C[12],Ur=C[13],hn=C[14],an=C[15],Rn=B*Ne-te*Me,Mn=B*rt-pe*Me,Dn=B*vt-we*Me,Vn=te*rt-pe*Ne,qn=te*vt-we*Ne,da=pe*vt-we*rt,va=mt*Ur-Ut*xr,Wa=mt*hn-ir*xr,Da=mt*an-tr*xr,Oa=Ut*hn-ir*Ur,fi=Ut*an-tr*Ur,Ua=ir*an-tr*hn,Ha=Rn*Ua-Mn*fi+Dn*Oa+Vn*Da-qn*Wa+da*va;return Ha?(Ha=1/Ha,k[0]=(Ne*Ua-rt*fi+vt*Oa)*Ha,k[1]=(pe*fi-te*Ua-we*Oa)*Ha,k[2]=(Ur*da-hn*qn+an*Vn)*Ha,k[3]=(ir*qn-Ut*da-tr*Vn)*Ha,k[4]=(rt*Da-Me*Ua-vt*Wa)*Ha,k[5]=(B*Ua-pe*Da+we*Wa)*Ha,k[6]=(hn*Dn-xr*da-an*Mn)*Ha,k[7]=(mt*da-ir*Dn+tr*Mn)*Ha,k[8]=(Me*fi-Ne*Da+vt*va)*Ha,k[9]=(te*Da-B*fi-we*va)*Ha,k[10]=(xr*qn-Ur*Dn+an*Rn)*Ha,k[11]=(Ut*Dn-mt*qn-tr*Rn)*Ha,k[12]=(Ne*Wa-Me*Oa-rt*va)*Ha,k[13]=(B*Oa-te*Wa+pe*va)*Ha,k[14]=(Ur*Mn-xr*Vn-hn*Rn)*Ha,k[15]=(mt*Vn-Ut*Mn+ir*Rn)*Ha,k):null}function ff(k,C,B){var te=C[0],pe=C[1],we=C[2],Me=C[3],Ne=C[4],rt=C[5],vt=C[6],mt=C[7],Ut=C[8],ir=C[9],tr=C[10],xr=C[11],Ur=C[12],hn=C[13],an=C[14],Rn=C[15],Mn=B[0],Dn=B[1],Vn=B[2],qn=B[3];return k[0]=Mn*te+Dn*Ne+Vn*Ut+qn*Ur,k[1]=Mn*pe+Dn*rt+Vn*ir+qn*hn,k[2]=Mn*we+Dn*vt+Vn*tr+qn*an,k[3]=Mn*Me+Dn*mt+Vn*xr+qn*Rn,Mn=B[4],Dn=B[5],Vn=B[6],qn=B[7],k[4]=Mn*te+Dn*Ne+Vn*Ut+qn*Ur,k[5]=Mn*pe+Dn*rt+Vn*ir+qn*hn,k[6]=Mn*we+Dn*vt+Vn*tr+qn*an,k[7]=Mn*Me+Dn*mt+Vn*xr+qn*Rn,Mn=B[8],Dn=B[9],Vn=B[10],qn=B[11],k[8]=Mn*te+Dn*Ne+Vn*Ut+qn*Ur,k[9]=Mn*pe+Dn*rt+Vn*ir+qn*hn,k[10]=Mn*we+Dn*vt+Vn*tr+qn*an,k[11]=Mn*Me+Dn*mt+Vn*xr+qn*Rn,Mn=B[12],Dn=B[13],Vn=B[14],qn=B[15],k[12]=Mn*te+Dn*Ne+Vn*Ut+qn*Ur,k[13]=Mn*pe+Dn*rt+Vn*ir+qn*hn,k[14]=Mn*we+Dn*vt+Vn*tr+qn*an,k[15]=Mn*Me+Dn*mt+Vn*xr+qn*Rn,k}function Zo(k,C,B){var te=B[0],pe=B[1],we=B[2],Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur,hn,an;return C===k?(k[12]=C[0]*te+C[4]*pe+C[8]*we+C[12],k[13]=C[1]*te+C[5]*pe+C[9]*we+C[13],k[14]=C[2]*te+C[6]*pe+C[10]*we+C[14],k[15]=C[3]*te+C[7]*pe+C[11]*we+C[15]):(Me=C[0],Ne=C[1],rt=C[2],vt=C[3],mt=C[4],Ut=C[5],ir=C[6],tr=C[7],xr=C[8],Ur=C[9],hn=C[10],an=C[11],k[0]=Me,k[1]=Ne,k[2]=rt,k[3]=vt,k[4]=mt,k[5]=Ut,k[6]=ir,k[7]=tr,k[8]=xr,k[9]=Ur,k[10]=hn,k[11]=an,k[12]=Me*te+mt*pe+xr*we+C[12],k[13]=Ne*te+Ut*pe+Ur*we+C[13],k[14]=rt*te+ir*pe+hn*we+C[14],k[15]=vt*te+tr*pe+an*we+C[15]),k}function Bl(k,C,B){var te=B[0],pe=B[1],we=B[2];return k[0]=C[0]*te,k[1]=C[1]*te,k[2]=C[2]*te,k[3]=C[3]*te,k[4]=C[4]*pe,k[5]=C[5]*pe,k[6]=C[6]*pe,k[7]=C[7]*pe,k[8]=C[8]*we,k[9]=C[9]*we,k[10]=C[10]*we,k[11]=C[11]*we,k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15],k}function Ul(k,C,B){var te=Math.sin(B),pe=Math.cos(B),we=C[4],Me=C[5],Ne=C[6],rt=C[7],vt=C[8],mt=C[9],Ut=C[10],ir=C[11];return C!==k&&(k[0]=C[0],k[1]=C[1],k[2]=C[2],k[3]=C[3],k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15]),k[4]=we*pe+vt*te,k[5]=Me*pe+mt*te,k[6]=Ne*pe+Ut*te,k[7]=rt*pe+ir*te,k[8]=vt*pe-we*te,k[9]=mt*pe-Me*te,k[10]=Ut*pe-Ne*te,k[11]=ir*pe-rt*te,k}function _h(k,C,B){var te=Math.sin(B),pe=Math.cos(B),we=C[0],Me=C[1],Ne=C[2],rt=C[3],vt=C[4],mt=C[5],Ut=C[6],ir=C[7];return C!==k&&(k[8]=C[8],k[9]=C[9],k[10]=C[10],k[11]=C[11],k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15]),k[0]=we*pe+vt*te,k[1]=Me*pe+mt*te,k[2]=Ne*pe+Ut*te,k[3]=rt*pe+ir*te,k[4]=vt*pe-we*te,k[5]=mt*pe-Me*te,k[6]=Ut*pe-Ne*te,k[7]=ir*pe-rt*te,k}function wv(k,C,B,te,pe){var we=1/Math.tan(C/2),Me;return k[0]=we/B,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=we,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=-1,k[12]=0,k[13]=0,k[15]=0,pe!=null&&pe!==1/0?(Me=1/(te-pe),k[10]=(pe+te)*Me,k[14]=2*pe*te*Me):(k[10]=-1,k[14]=-2*te),k}function Bd(k,C,B,te,pe,we,Me){var Ne=1/(C-B),rt=1/(te-pe),vt=1/(we-Me);return k[0]=-2*Ne,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=-2*rt,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=2*vt,k[11]=0,k[12]=(C+B)*Ne,k[13]=(pe+te)*rt,k[14]=(Me+we)*vt,k[15]=1,k}var Ud=ff;function Hf(){var k=new Bs(3);return Bs!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),k}function Vd(k){var C=new Bs(3);return C[0]=k[0],C[1]=k[1],C[2]=k[2],C}function wh(k,C,B){return k[0]=C[0]+B[0],k[1]=C[1]+B[1],k[2]=C[2]+B[2],k}function Hd(k,C,B){return k[0]=C[0]-B[0],k[1]=C[1]-B[1],k[2]=C[2]-B[2],k}function Gd(k,C,B){return k[0]=C[0]*B,k[1]=C[1]*B,k[2]=C[2]*B,k}function Tv(k,C){var B=C[0],te=C[1],pe=C[2],we=B*B+te*te+pe*pe;return we>0&&(we=1/Math.sqrt(we)),k[0]=C[0]*we,k[1]=C[1]*we,k[2]=C[2]*we,k}function Ob(k,C){return k[0]*C[0]+k[1]*C[1]+k[2]*C[2]}function Nb(k,C,B){var te=C[0],pe=C[1],we=C[2],Me=B[0],Ne=B[1],rt=B[2];return k[0]=pe*rt-we*Ne,k[1]=we*Me-te*rt,k[2]=te*Ne-pe*Me,k}function Bb(k,C,B){var te=C[0],pe=C[1],we=C[2];return k[0]=te*B[0]+pe*B[3]+we*B[6],k[1]=te*B[1]+pe*B[4]+we*B[7],k[2]=te*B[2]+pe*B[5]+we*B[8],k}var Ub=Hd;(function(){var k=Hf();return function(C,B,te,pe,we,Me){var Ne,rt;for(B||(B=3),te||(te=0),pe?rt=Math.min(pe*B+te,C.length):rt=C.length,Ne=te;Ne<rt;Ne+=B)k[0]=C[Ne],k[1]=C[Ne+1],k[2]=C[Ne+2],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1],C[Ne+2]=k[2];return C}})();function Vb(){var k=new Bs(4);return Bs!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0,k[3]=0),k}function Hb(k,C,B){return k[0]=C[0]*B,k[1]=C[1]*B,k[2]=C[2]*B,k[3]=C[3]*B,k}function Gb(k,C){return k[0]*C[0]+k[1]*C[1]+k[2]*C[2]+k[3]*C[3]}function xp(k,C,B){var te=C[0],pe=C[1],we=C[2],Me=C[3];return k[0]=B[0]*te+B[4]*pe+B[8]*we+B[12]*Me,k[1]=B[1]*te+B[5]*pe+B[9]*we+B[13]*Me,k[2]=B[2]*te+B[6]*pe+B[10]*we+B[14]*Me,k[3]=B[3]*te+B[7]*pe+B[11]*we+B[15]*Me,k}(function(){var k=Vb();return function(C,B,te,pe,we,Me){var Ne,rt;for(B||(B=4),te||(te=0),pe?rt=Math.min(pe*B+te,C.length):rt=C.length,Ne=te;Ne<rt;Ne+=B)k[0]=C[Ne],k[1]=C[Ne+1],k[2]=C[Ne+2],k[3]=C[Ne+3],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1],C[Ne+2]=k[2],C[Ne+3]=k[3];return C}})();function Yb(){var k=new Bs(2);return Bs!=Float32Array&&(k[0]=0,k[1]=0),k}function Wb(k){var C=k[0],B=k[1];return C*C+B*B}var Xb=Wb;(function(){var k=Yb();return function(C,B,te,pe,we,Me){var Ne,rt;for(B||(B=2),te||(te=0),pe?rt=Math.min(pe*B+te,C.length):rt=C.length,Ne=te;Ne<rt;Ne+=B)k[0]=C[Ne],k[1]=C[Ne+1],we(k,k,Me),C[Ne]=k[0],C[Ne+1]=k[1];return C}})();var jb=function(k){function C(B){k.call(this,B,Gc)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new vo(te)},C.prototype.queryRadius=function(te){var pe=te;return eu("circle-radius",this,pe)+eu("circle-stroke-width",this,pe)+nc(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,we,Me,Ne,rt,vt,mt){for(var Ut=Vu(te,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),rt.angle,vt),ir=this.paint.get("circle-radius").evaluate(pe,we),tr=this.paint.get("circle-stroke-width").evaluate(pe,we),xr=ir+tr,Ur=this.paint.get("circle-pitch-alignment")==="map",hn=Ur?Ut:Zb(Ut,mt),an=Ur?xr*vt:xr,Rn=0,Mn=Me;Rn<Mn.length;Rn+=1)for(var Dn=Mn[Rn],Vn=0,qn=Dn;Vn<qn.length;Vn+=1){var da=qn[Vn],va=Ur?da:Kg(da,mt),Wa=an,Da=xp([],[da.x,da.y,0,1],mt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Wa*=Da[3]/rt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Wa*=rt.cameraToCenterDistance/Da[3]),Oi(hn,va,Wa))return!0}return!1},C}(js);function Kg(k,C){var B=xp([],[k.x,k.y,0,1],C);return new v(B[0]/B[3],B[1]/B[3])}function Zb(k,C){return k.map(function(B){return Kg(B,C)})}var $g=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(vo);Be("HeatmapBucket",$g,{omit:["layers"]});function Yd(k,C,B,te){var pe=C.width,we=C.height;if(!te)te=new Uint8Array(pe*we*B);else if(te instanceof Uint8ClampedArray)te=new Uint8Array(te.buffer);else if(te.length!==pe*we*B)throw new RangeError("mismatched image size");return k.width=pe,k.height=we,k.data=te,k}function Jg(k,C,B){var te=C.width,pe=C.height;if(!(te===k.width&&pe===k.height)){var we=Yd({},{width:te,height:pe},B);Wd(k,we,{x:0,y:0},{x:0,y:0},{width:Math.min(k.width,te),height:Math.min(k.height,pe)},B),k.width=te,k.height=pe,k.data=we.data}}function Wd(k,C,B,te,pe,we){if(pe.width===0||pe.height===0)return C;if(pe.width>k.width||pe.height>k.height||B.x>k.width-pe.width||B.y>k.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>C.width||pe.height>C.height||te.x>C.width-pe.width||te.y>C.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Me=k.data,Ne=C.data,rt=0;rt<pe.height;rt++)for(var vt=((B.y+rt)*k.width+B.x)*we,mt=((te.y+rt)*C.width+te.x)*we,Ut=0;Ut<pe.width*we;Ut++)Ne[mt+Ut]=Me[vt+Ut];return C}var Gf=function(C,B){Yd(this,C,1,B)};Gf.prototype.resize=function(C){Jg(this,C,1)},Gf.prototype.clone=function(){return new Gf({width:this.width,height:this.height},new Uint8Array(this.data))},Gf.copy=function(C,B,te,pe,we){Wd(C,B,te,pe,we,1)};var Vl=function(C,B){Yd(this,C,4,B)};Vl.prototype.resize=function(C){Jg(this,C,4)},Vl.prototype.replace=function(C,B){B?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},Vl.prototype.clone=function(){return new Vl({width:this.width,height:this.height},new Uint8Array(this.data))},Vl.copy=function(C,B,te,pe,we){Wd(C,B,te,pe,we,4)},Be("AlphaImage",Gf),Be("RGBAImage",Vl);var Kb=new fo({"heatmap-radius":new oi(Yt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new oi(Yt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Za(Yt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qo(Yt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Za(Yt.paint_heatmap["heatmap-opacity"])}),$b={paint:Kb};function Qg(k,C){for(var B=new Uint8Array(1024),te={},pe=0,we=0;pe<256;pe++,we+=4){te[C]=pe/255;var Me=k.evaluate(te);B[we+0]=Math.floor(Me.r*255/Me.a),B[we+1]=Math.floor(Me.g*255/Me.a),B[we+2]=Math.floor(Me.b*255/Me.a),B[we+3]=Math.floor(Me.a*255)}return new Vl({width:256,height:1},B)}var Jb=function(k){function C(B){k.call(this,B,$b),this._updateColorRamp()}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new $g(te)},C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var te=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Qg(te,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(js),Qb=new fo({"hillshade-illumination-direction":new Za(Yt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Za(Yt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Za(Yt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Za(Yt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Za(Yt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Za(Yt.paint_hillshade["hillshade-accent-color"])}),qb={paint:Qb},e_=function(k){function C(B){k.call(this,B,qb)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(js),t_=es([{name:"a_pos",components:2,type:"Int16"}],4),qg=t_.members,Xd=bp,r_=bp;function bp(k,C,B){B=B||2;var te=C&&C.length,pe=te?C[0]*B:k.length,we=em(k,0,pe,B,!0),Me=[];if(!we||we.next===we.prev)return Me;var Ne,rt,vt,mt,Ut,ir,tr;if(te&&(we=s_(k,C,we,B)),k.length>80*B){Ne=vt=k[0],rt=mt=k[1];for(var xr=B;xr<pe;xr+=B)Ut=k[xr],ir=k[xr+1],Ut<Ne&&(Ne=Ut),ir<rt&&(rt=ir),Ut>vt&&(vt=Ut),ir>mt&&(mt=ir);tr=Math.max(vt-Ne,mt-rt),tr=tr!==0?1/tr:0}return Av(we,Me,B,Ne,rt,tr),Me}function em(k,C,B,te,pe){var we,Me;if(pe===Kd(k,C,B,te)>0)for(we=C;we<B;we+=te)Me=nm(we,k[we],k[we+1],Me);else for(we=B-te;we>=C;we-=te)Me=nm(we,k[we],k[we+1],Me);return Me&&_p(Me,Me.next)&&(Ev(Me),Me=Me.next),Me}function hf(k,C){if(!k)return k;C||(C=k);var B=k,te;do if(te=!1,!B.steiner&&(_p(B,B.next)||os(B.prev,B,B.next)===0)){if(Ev(B),B=C=B.prev,B===B.next)break;te=!0}else B=B.next;while(te||B!==C);return C}function Av(k,C,B,te,pe,we,Me){if(!!k){!Me&&we&&h_(k,te,pe,we);for(var Ne=k,rt,vt;k.prev!==k.next;){if(rt=k.prev,vt=k.next,we?a_(k,te,pe,we):n_(k)){C.push(rt.i/B),C.push(k.i/B),C.push(vt.i/B),Ev(k),k=vt.next,Ne=vt.next;continue}if(k=vt,k===Ne){Me?Me===1?(k=i_(hf(k),C,B),Av(k,C,B,te,pe,we,2)):Me===2&&o_(k,C,B,te,pe,we):Av(hf(k),C,B,te,pe,we,1);break}}}}function n_(k){var C=k.prev,B=k,te=k.next;if(os(C,B,te)>=0)return!1;for(var pe=k.next.next;pe!==k.prev;){if(Th(C.x,C.y,B.x,B.y,te.x,te.y,pe.x,pe.y)&&os(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function a_(k,C,B,te){var pe=k.prev,we=k,Me=k.next;if(os(pe,we,Me)>=0)return!1;for(var Ne=pe.x<we.x?pe.x<Me.x?pe.x:Me.x:we.x<Me.x?we.x:Me.x,rt=pe.y<we.y?pe.y<Me.y?pe.y:Me.y:we.y<Me.y?we.y:Me.y,vt=pe.x>we.x?pe.x>Me.x?pe.x:Me.x:we.x>Me.x?we.x:Me.x,mt=pe.y>we.y?pe.y>Me.y?pe.y:Me.y:we.y>Me.y?we.y:Me.y,Ut=jd(Ne,rt,C,B,te),ir=jd(vt,mt,C,B,te),tr=k.prevZ,xr=k.nextZ;tr&&tr.z>=Ut&&xr&&xr.z<=ir;){if(tr!==k.prev&&tr!==k.next&&Th(pe.x,pe.y,we.x,we.y,Me.x,Me.y,tr.x,tr.y)&&os(tr.prev,tr,tr.next)>=0||(tr=tr.prevZ,xr!==k.prev&&xr!==k.next&&Th(pe.x,pe.y,we.x,we.y,Me.x,Me.y,xr.x,xr.y)&&os(xr.prev,xr,xr.next)>=0))return!1;xr=xr.nextZ}for(;tr&&tr.z>=Ut;){if(tr!==k.prev&&tr!==k.next&&Th(pe.x,pe.y,we.x,we.y,Me.x,Me.y,tr.x,tr.y)&&os(tr.prev,tr,tr.next)>=0)return!1;tr=tr.prevZ}for(;xr&&xr.z<=ir;){if(xr!==k.prev&&xr!==k.next&&Th(pe.x,pe.y,we.x,we.y,Me.x,Me.y,xr.x,xr.y)&&os(xr.prev,xr,xr.next)>=0)return!1;xr=xr.nextZ}return!0}function i_(k,C,B){var te=k;do{var pe=te.prev,we=te.next.next;!_p(pe,we)&&tm(pe,te,te.next,we)&&Mv(pe,we)&&Mv(we,pe)&&(C.push(pe.i/B),C.push(te.i/B),C.push(we.i/B),Ev(te),Ev(te.next),te=k=we),te=te.next}while(te!==k);return hf(te)}function o_(k,C,B,te,pe,we){var Me=k;do{for(var Ne=Me.next.next;Ne!==Me.prev;){if(Me.i!==Ne.i&&d_(Me,Ne)){var rt=rm(Me,Ne);Me=hf(Me,Me.next),rt=hf(rt,rt.next),Av(Me,C,B,te,pe,we),Av(rt,C,B,te,pe,we);return}Ne=Ne.next}Me=Me.next}while(Me!==k)}function s_(k,C,B,te){var pe=[],we,Me,Ne,rt,vt;for(we=0,Me=C.length;we<Me;we++)Ne=C[we]*te,rt=we<Me-1?C[we+1]*te:k.length,vt=em(k,Ne,rt,te,!1),vt===vt.next&&(vt.steiner=!0),pe.push(p_(vt));for(pe.sort(l_),we=0;we<pe.length;we++)u_(pe[we],B),B=hf(B,B.next);return B}function l_(k,C){return k.x-C.x}function u_(k,C){if(C=c_(k,C),C){var B=rm(C,k);hf(C,C.next),hf(B,B.next)}}function c_(k,C){var B=C,te=k.x,pe=k.y,we=-1/0,Me;do{if(pe<=B.y&&pe>=B.next.y&&B.next.y!==B.y){var Ne=B.x+(pe-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(Ne<=te&&Ne>we){if(we=Ne,Ne===te){if(pe===B.y)return B;if(pe===B.next.y)return B.next}Me=B.x<B.next.x?B:B.next}}B=B.next}while(B!==C);if(!Me)return null;if(te===we)return Me;var rt=Me,vt=Me.x,mt=Me.y,Ut=1/0,ir;B=Me;do te>=B.x&&B.x>=vt&&te!==B.x&&Th(pe<mt?te:we,pe,vt,mt,pe<mt?we:te,pe,B.x,B.y)&&(ir=Math.abs(pe-B.y)/(te-B.x),Mv(B,k)&&(ir<Ut||ir===Ut&&(B.x>Me.x||B.x===Me.x&&f_(Me,B)))&&(Me=B,Ut=ir)),B=B.next;while(B!==rt);return Me}function f_(k,C){return os(k.prev,k,C.prev)<0&&os(C.next,k,k.next)<0}function h_(k,C,B,te){var pe=k;do pe.z===null&&(pe.z=jd(pe.x,pe.y,C,B,te)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==k);pe.prevZ.nextZ=null,pe.prevZ=null,v_(pe)}function v_(k){var C,B,te,pe,we,Me,Ne,rt,vt=1;do{for(B=k,k=null,we=null,Me=0;B;){for(Me++,te=B,Ne=0,C=0;C<vt&&(Ne++,te=te.nextZ,!!te);C++);for(rt=vt;Ne>0||rt>0&&te;)Ne!==0&&(rt===0||!te||B.z<=te.z)?(pe=B,B=B.nextZ,Ne--):(pe=te,te=te.nextZ,rt--),we?we.nextZ=pe:k=pe,pe.prevZ=we,we=pe;B=te}we.nextZ=null,vt*=2}while(Me>1);return k}function jd(k,C,B,te,pe){return k=32767*(k-B)*pe,C=32767*(C-te)*pe,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,k|C<<1}function p_(k){var C=k,B=k;do(C.x<B.x||C.x===B.x&&C.y<B.y)&&(B=C),C=C.next;while(C!==k);return B}function Th(k,C,B,te,pe,we,Me,Ne){return(pe-Me)*(C-Ne)-(k-Me)*(we-Ne)>=0&&(k-Me)*(te-Ne)-(B-Me)*(C-Ne)>=0&&(B-Me)*(we-Ne)-(pe-Me)*(te-Ne)>=0}function d_(k,C){return k.next.i!==C.i&&k.prev.i!==C.i&&!g_(k,C)&&(Mv(k,C)&&Mv(C,k)&&m_(k,C)&&(os(k.prev,k,C.prev)||os(k,C.prev,C))||_p(k,C)&&os(k.prev,k,k.next)>0&&os(C.prev,C,C.next)>0)}function os(k,C,B){return(C.y-k.y)*(B.x-C.x)-(C.x-k.x)*(B.y-C.y)}function _p(k,C){return k.x===C.x&&k.y===C.y}function tm(k,C,B,te){var pe=Tp(os(k,C,B)),we=Tp(os(k,C,te)),Me=Tp(os(B,te,k)),Ne=Tp(os(B,te,C));return!!(pe!==we&&Me!==Ne||pe===0&&wp(k,B,C)||we===0&&wp(k,te,C)||Me===0&&wp(B,k,te)||Ne===0&&wp(B,C,te))}function wp(k,C,B){return C.x<=Math.max(k.x,B.x)&&C.x>=Math.min(k.x,B.x)&&C.y<=Math.max(k.y,B.y)&&C.y>=Math.min(k.y,B.y)}function Tp(k){return k>0?1:k<0?-1:0}function g_(k,C){var B=k;do{if(B.i!==k.i&&B.next.i!==k.i&&B.i!==C.i&&B.next.i!==C.i&&tm(B,B.next,k,C))return!0;B=B.next}while(B!==k);return!1}function Mv(k,C){return os(k.prev,k,k.next)<0?os(k,C,k.next)>=0&&os(k,k.prev,C)>=0:os(k,C,k.prev)<0||os(k,k.next,C)<0}function m_(k,C){var B=k,te=!1,pe=(k.x+C.x)/2,we=(k.y+C.y)/2;do B.y>we!=B.next.y>we&&B.next.y!==B.y&&pe<(B.next.x-B.x)*(we-B.y)/(B.next.y-B.y)+B.x&&(te=!te),B=B.next;while(B!==k);return te}function rm(k,C){var B=new Zd(k.i,k.x,k.y),te=new Zd(C.i,C.x,C.y),pe=k.next,we=C.prev;return k.next=C,C.prev=k,B.next=pe,pe.prev=B,te.next=B,B.prev=te,we.next=te,te.prev=we,te}function nm(k,C,B,te){var pe=new Zd(k,C,B);return te?(pe.next=te.next,pe.prev=te,te.next.prev=pe,te.next=pe):(pe.prev=pe,pe.next=pe),pe}function Ev(k){k.next.prev=k.prev,k.prev.next=k.next,k.prevZ&&(k.prevZ.nextZ=k.nextZ),k.nextZ&&(k.nextZ.prevZ=k.prevZ)}function Zd(k,C,B){this.i=k,this.x=C,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}bp.deviation=function(k,C,B,te){var pe=C&&C.length,we=pe?C[0]*B:k.length,Me=Math.abs(Kd(k,0,we,B));if(pe)for(var Ne=0,rt=C.length;Ne<rt;Ne++){var vt=C[Ne]*B,mt=Ne<rt-1?C[Ne+1]*B:k.length;Me-=Math.abs(Kd(k,vt,mt,B))}var Ut=0;for(Ne=0;Ne<te.length;Ne+=3){var ir=te[Ne]*B,tr=te[Ne+1]*B,xr=te[Ne+2]*B;Ut+=Math.abs((k[ir]-k[xr])*(k[tr+1]-k[ir+1])-(k[ir]-k[tr])*(k[xr+1]-k[ir+1]))}return Me===0&&Ut===0?0:Math.abs((Ut-Me)/Me)};function Kd(k,C,B,te){for(var pe=0,we=C,Me=B-te;we<B;we+=te)pe+=(k[Me]-k[we])*(k[we+1]+k[Me+1]),Me=we;return pe}bp.flatten=function(k){for(var C=k[0][0].length,B={vertices:[],holes:[],dimensions:C},te=0,pe=0;pe<k.length;pe++){for(var we=0;we<k[pe].length;we++)for(var Me=0;Me<C;Me++)B.vertices.push(k[pe][we][Me]);pe>0&&(te+=k[pe-1].length,B.holes.push(te))}return B},Xd.default=r_;function y_(k,C,B,te,pe){am(k,C,B||0,te||k.length-1,pe||x_)}function am(k,C,B,te,pe){for(;te>B;){if(te-B>600){var we=te-B+1,Me=C-B+1,Ne=Math.log(we),rt=.5*Math.exp(2*Ne/3),vt=.5*Math.sqrt(Ne*rt*(we-rt)/we)*(Me-we/2<0?-1:1),mt=Math.max(B,Math.floor(C-Me*rt/we+vt)),Ut=Math.min(te,Math.floor(C+(we-Me)*rt/we+vt));am(k,C,mt,Ut,pe)}var ir=k[C],tr=B,xr=te;for(Sv(k,B,C),pe(k[te],ir)>0&&Sv(k,B,te);tr<xr;){for(Sv(k,tr,xr),tr++,xr--;pe(k[tr],ir)<0;)tr++;for(;pe(k[xr],ir)>0;)xr--}pe(k[B],ir)===0?Sv(k,B,xr):(xr++,Sv(k,xr,te)),xr<=C&&(B=xr+1),C<=xr&&(te=xr-1)}}function Sv(k,C,B){var te=k[C];k[C]=k[B],k[B]=te}function x_(k,C){return k<C?-1:k>C?1:0}function $d(k,C){var B=k.length;if(B<=1)return[k];for(var te=[],pe,we,Me=0;Me<B;Me++){var Ne=G(k[Me]);Ne!==0&&(k[Me].area=Math.abs(Ne),we===void 0&&(we=Ne<0),we===Ne<0?(pe&&te.push(pe),pe=[k[Me]]):pe.push(k[Me]))}if(pe&&te.push(pe),C>1)for(var rt=0;rt<te.length;rt++)te[rt].length<=C||(y_(te[rt],C,1,te[rt].length-1,b_),te[rt]=te[rt].slice(0,C));return te}function b_(k,C){return C.area-k.area}function Jd(k,C,B){for(var te=B.patternDependencies,pe=!1,we=0,Me=C;we<Me.length;we+=1){var Ne=Me[we],rt=Ne.paint.get(k+"-pattern");rt.isConstant()||(pe=!0);var vt=rt.constantOr(null);vt&&(pe=!0,te[vt.to]=!0,te[vt.from]=!0)}return pe}function Qd(k,C,B,te,pe){for(var we=pe.patternDependencies,Me=0,Ne=C;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=rt.paint.get(k+"-pattern"),mt=vt.value;if(mt.kind!=="constant"){var Ut=mt.evaluate({zoom:te-1},B,{},pe.availableImages),ir=mt.evaluate({zoom:te},B,{},pe.availableImages),tr=mt.evaluate({zoom:te+1},B,{},pe.availableImages);Ut=Ut&&Ut.name?Ut.name:Ut,ir=ir&&ir.name?ir.name:ir,tr=tr&&tr.name?tr.name:tr,we[Ut]=!0,we[ir]=!0,we[tr]=!0,B.patterns[rt.id]={min:Ut,mid:ir,max:tr}}}return B}var __=500,xc=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zf,this.indexArray=new mc,this.indexArray2=new Bf,this.programConfigurations=new pi(qg,C.layers,C.zoom),this.segments=new W,this.segments2=new W,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};xc.prototype.populate=function(C,B,te){this.hasPattern=Jd("fill",this.layers,B);for(var pe=this.layers[0].layout.get("fill-sort-key"),we=[],Me=0,Ne=C;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=rt.feature,mt=rt.id,Ut=rt.index,ir=rt.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,xr={type:vt.type,id:mt,properties:vt.properties,geometry:tr?to(vt):[]};if(!!this.layers[0]._featureFilter.filter(new yi(this.zoom),xr,te)){tr||(xr.geometry=to(vt));var Ur=pe?pe.evaluate(xr,{},te,B.availableImages):void 0,hn={id:mt,properties:vt.properties,type:vt.type,sourceLayerIndex:ir,index:Ut,geometry:xr.geometry,patterns:{},sortKey:Ur};we.push(hn)}}pe&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var an=0,Rn=we;an<Rn.length;an+=1){var Mn=Rn[an],Dn=Mn,Vn=Dn.geometry,qn=Dn.index,da=Dn.sourceLayerIndex;if(this.hasPattern){var va=Qd("fill",this.layers,Mn,this.zoom,B);this.patternFeatures.push(va)}else this.addFeature(Mn,Vn,qn,te,{});var Wa=C[qn].feature;B.featureIndex.insert(Wa,Vn,qn,da,this.index)}},xc.prototype.update=function(C,B,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,te)},xc.prototype.addFeatures=function(C,B,te){for(var pe=0,we=this.patternFeatures;pe<we.length;pe+=1){var Me=we[pe];this.addFeature(Me,Me.geometry,Me.index,B,te)}},xc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},xc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xc.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,qg),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},xc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},xc.prototype.addFeature=function(C,B,te,pe,we){for(var Me=0,Ne=$d(B,__);Me<Ne.length;Me+=1){for(var rt=Ne[Me],vt=0,mt=0,Ut=rt;mt<Ut.length;mt+=1){var ir=Ut[mt];vt+=ir.length}for(var tr=this.segments.prepareSegment(vt,this.layoutVertexArray,this.indexArray),xr=tr.vertexLength,Ur=[],hn=[],an=0,Rn=rt;an<Rn.length;an+=1){var Mn=Rn[an];if(Mn.length!==0){Mn!==rt[0]&&hn.push(Ur.length/2);var Dn=this.segments2.prepareSegment(Mn.length,this.layoutVertexArray,this.indexArray2),Vn=Dn.vertexLength;this.layoutVertexArray.emplaceBack(Mn[0].x,Mn[0].y),this.indexArray2.emplaceBack(Vn+Mn.length-1,Vn),Ur.push(Mn[0].x),Ur.push(Mn[0].y);for(var qn=1;qn<Mn.length;qn++)this.layoutVertexArray.emplaceBack(Mn[qn].x,Mn[qn].y),this.indexArray2.emplaceBack(Vn+qn-1,Vn+qn),Ur.push(Mn[qn].x),Ur.push(Mn[qn].y);Dn.vertexLength+=Mn.length,Dn.primitiveLength+=Mn.length}}for(var da=Xd(Ur,hn),va=0;va<da.length;va+=3)this.indexArray.emplaceBack(xr+da[va],xr+da[va+1],xr+da[va+2]);tr.vertexLength+=vt,tr.primitiveLength+=da.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,pe)},Be("FillBucket",xc,{omit:["layers","patternFeatures"]});var w_=new fo({"fill-sort-key":new oi(Yt.layout_fill["fill-sort-key"])}),T_=new fo({"fill-antialias":new Za(Yt.paint_fill["fill-antialias"]),"fill-opacity":new oi(Yt.paint_fill["fill-opacity"]),"fill-color":new oi(Yt.paint_fill["fill-color"]),"fill-outline-color":new oi(Yt.paint_fill["fill-outline-color"]),"fill-translate":new Za(Yt.paint_fill["fill-translate"]),"fill-translate-anchor":new Za(Yt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Uo(Yt.paint_fill["fill-pattern"])}),A_={paint:T_,layout:w_},M_=function(k){function C(B){k.call(this,B,A_)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,pe){k.prototype.recalculate.call(this,te,pe);var we=this.paint._values["fill-outline-color"];we.value.kind==="constant"&&we.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function(te){return new xc(te)},C.prototype.queryRadius=function(){return nc(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,we,Me,Ne,rt,vt){var mt=Vu(te,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),rt.angle,vt);return Go(mt,Me)},C.prototype.isTileClipped=function(){return!0},C}(js),E_=es([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),im=E_.members,om=Ah;function Ah(k,C,B,te,pe){this.properties={},this.extent=B,this.type=0,this._pbf=k,this._geometry=-1,this._keys=te,this._values=pe,k.readFields(S_,this,C)}function S_(k,C,B){k==1?C.id=B.readVarint():k==2?k_(B,C):k==3?C.type=B.readVarint():k==4&&(C._geometry=B.pos)}function k_(k,C){for(var B=k.readVarint()+k.pos;k.pos<B;){var te=C._keys[k.readVarint()],pe=C._values[k.readVarint()];C.properties[te]=pe}}Ah.types=["Unknown","Point","LineString","Polygon"],Ah.prototype.loadGeometry=function(){var k=this._pbf;k.pos=this._geometry;for(var C=k.readVarint()+k.pos,B=1,te=0,pe=0,we=0,Me=[],Ne;k.pos<C;){if(te<=0){var rt=k.readVarint();B=rt&7,te=rt>>3}if(te--,B===1||B===2)pe+=k.readSVarint(),we+=k.readSVarint(),B===1&&(Ne&&Me.push(Ne),Ne=[]),Ne.push(new v(pe,we));else if(B===7)Ne&&Ne.push(Ne[0].clone());else throw new Error("unknown command "+B)}return Ne&&Me.push(Ne),Me},Ah.prototype.bbox=function(){var k=this._pbf;k.pos=this._geometry;for(var C=k.readVarint()+k.pos,B=1,te=0,pe=0,we=0,Me=1/0,Ne=-1/0,rt=1/0,vt=-1/0;k.pos<C;){if(te<=0){var mt=k.readVarint();B=mt&7,te=mt>>3}if(te--,B===1||B===2)pe+=k.readSVarint(),we+=k.readSVarint(),pe<Me&&(Me=pe),pe>Ne&&(Ne=pe),we<rt&&(rt=we),we>vt&&(vt=we);else if(B!==7)throw new Error("unknown command "+B)}return[Me,rt,Ne,vt]},Ah.prototype.toGeoJSON=function(k,C,B){var te=this.extent*Math.pow(2,B),pe=this.extent*k,we=this.extent*C,Me=this.loadGeometry(),Ne=Ah.types[this.type],rt,vt;function mt(tr){for(var xr=0;xr<tr.length;xr++){var Ur=tr[xr],hn=180-(Ur.y+we)*360/te;tr[xr]=[(Ur.x+pe)*360/te-180,360/Math.PI*Math.atan(Math.exp(hn*Math.PI/180))-90]}}switch(this.type){case 1:var Ut=[];for(rt=0;rt<Me.length;rt++)Ut[rt]=Me[rt][0];Me=Ut,mt(Me);break;case 2:for(rt=0;rt<Me.length;rt++)mt(Me[rt]);break;case 3:for(Me=C_(Me),rt=0;rt<Me.length;rt++)for(vt=0;vt<Me[rt].length;vt++)mt(Me[rt][vt]);break}Me.length===1?Me=Me[0]:Ne="Multi"+Ne;var ir={type:"Feature",geometry:{type:Ne,coordinates:Me},properties:this.properties};return"id"in this&&(ir.id=this.id),ir};function C_(k){var C=k.length;if(C<=1)return[k];for(var B=[],te,pe,we=0;we<C;we++){var Me=L_(k[we]);Me!==0&&(pe===void 0&&(pe=Me<0),pe===Me<0?(te&&B.push(te),te=[k[we]]):te.push(k[we]))}return te&&B.push(te),B}function L_(k){for(var C=0,B=0,te=k.length,pe=te-1,we,Me;B<te;pe=B++)we=k[B],Me=k[pe],C+=(Me.x-we.x)*(we.y+Me.y);return C}var sm=lm;function lm(k,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=k,this._keys=[],this._values=[],this._features=[],k.readFields(P_,this,C),this.length=this._features.length}function P_(k,C,B){k===15?C.version=B.readVarint():k===1?C.name=B.readString():k===5?C.extent=B.readVarint():k===2?C._features.push(B.pos):k===3?C._keys.push(B.readString()):k===4&&C._values.push(D_(B))}function D_(k){for(var C=null,B=k.readVarint()+k.pos;k.pos<B;){var te=k.readVarint()>>3;C=te===1?k.readString():te===2?k.readFloat():te===3?k.readDouble():te===4?k.readVarint64():te===5?k.readVarint():te===6?k.readSVarint():te===7?k.readBoolean():null}return C}lm.prototype.feature=function(k){if(k<0||k>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[k];var C=this._pbf.readVarint()+this._pbf.pos;return new om(this._pbf,C,this.extent,this._keys,this._values)};var R_=I_;function I_(k,C){this.layers=k.readFields(F_,{},C)}function F_(k,C,B){if(k===3){var te=new sm(B,B.readVarint()+B.pos);te.length&&(C[te.name]=te)}}var z_=R_,O_=om,N_=sm,Mh={VectorTile:z_,VectorTileFeature:O_,VectorTileLayer:N_},B_=Mh.VectorTileFeature.types,U_=500,qd=Math.pow(2,13);function kv(k,C,B,te,pe,we,Me,Ne){k.emplaceBack(C,B,Math.floor(te*qd)*2+Me,pe*qd*2,we*qd*2,Math.round(Ne))}var bc=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new of,this.indexArray=new mc,this.programConfigurations=new pi(im,C.layers,C.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};bc.prototype.populate=function(C,B,te){this.features=[],this.hasPattern=Jd("fill-extrusion",this.layers,B);for(var pe=0,we=C;pe<we.length;pe+=1){var Me=we[pe],Ne=Me.feature,rt=Me.id,vt=Me.index,mt=Me.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,ir={type:Ne.type,id:rt,properties:Ne.properties,geometry:Ut?to(Ne):[]};if(!!this.layers[0]._featureFilter.filter(new yi(this.zoom),ir,te)){var tr={id:rt,sourceLayerIndex:mt,index:vt,geometry:Ut?ir.geometry:to(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};typeof Ne.id<"u"&&(tr.id=Ne.id),this.hasPattern?this.features.push(Qd("fill-extrusion",this.layers,tr,this.zoom,B)):this.addFeature(tr,tr.geometry,vt,te,{}),B.featureIndex.insert(Ne,tr.geometry,vt,mt,this.index,!0)}}},bc.prototype.addFeatures=function(C,B,te){for(var pe=0,we=this.features;pe<we.length;pe+=1){var Me=we[pe],Ne=Me.geometry;this.addFeature(Me,Ne,Me.index,B,te)}},bc.prototype.update=function(C,B,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,te)},bc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bc.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,im),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},bc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bc.prototype.addFeature=function(C,B,te,pe,we){for(var Me=0,Ne=$d(B,U_);Me<Ne.length;Me+=1){for(var rt=Ne[Me],vt=0,mt=0,Ut=rt;mt<Ut.length;mt+=1){var ir=Ut[mt];vt+=ir.length}for(var tr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),xr=0,Ur=rt;xr<Ur.length;xr+=1){var hn=Ur[xr];if(hn.length!==0&&!H_(hn))for(var an=0,Rn=0;Rn<hn.length;Rn++){var Mn=hn[Rn];if(Rn>=1){var Dn=hn[Rn-1];if(!V_(Mn,Dn)){tr.vertexLength+4>W.MAX_VERTEX_ARRAY_LENGTH&&(tr=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Vn=Mn.sub(Dn)._perp()._unit(),qn=Dn.dist(Mn);an+qn>32768&&(an=0),kv(this.layoutVertexArray,Mn.x,Mn.y,Vn.x,Vn.y,0,0,an),kv(this.layoutVertexArray,Mn.x,Mn.y,Vn.x,Vn.y,0,1,an),an+=qn,kv(this.layoutVertexArray,Dn.x,Dn.y,Vn.x,Vn.y,0,0,an),kv(this.layoutVertexArray,Dn.x,Dn.y,Vn.x,Vn.y,0,1,an);var da=tr.vertexLength;this.indexArray.emplaceBack(da,da+2,da+1),this.indexArray.emplaceBack(da+1,da+2,da+3),tr.vertexLength+=4,tr.primitiveLength+=2}}}}if(tr.vertexLength+vt>W.MAX_VERTEX_ARRAY_LENGTH&&(tr=this.segments.prepareSegment(vt,this.layoutVertexArray,this.indexArray)),B_[C.type]==="Polygon"){for(var va=[],Wa=[],Da=tr.vertexLength,Oa=0,fi=rt;Oa<fi.length;Oa+=1){var Ua=fi[Oa];if(Ua.length!==0){Ua!==rt[0]&&Wa.push(va.length/2);for(var Ha=0;Ha<Ua.length;Ha++){var bi=Ua[Ha];kv(this.layoutVertexArray,bi.x,bi.y,0,0,1,1,0),va.push(bi.x),va.push(bi.y)}}}for(var ci=Xd(va,Wa),Vi=0;Vi<ci.length;Vi+=3)this.indexArray.emplaceBack(Da+ci[Vi],Da+ci[Vi+2],Da+ci[Vi+1]);tr.primitiveLength+=ci.length/3,tr.vertexLength+=vt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,pe)},Be("FillExtrusionBucket",bc,{omit:["layers","features"]});function V_(k,C){return k.x===C.x&&(k.x<0||k.x>$a)||k.y===C.y&&(k.y<0||k.y>$a)}function H_(k){return k.every(function(C){return C.x<0})||k.every(function(C){return C.x>$a})||k.every(function(C){return C.y<0})||k.every(function(C){return C.y>$a})}var G_=new fo({"fill-extrusion-opacity":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Uo(Yt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new oi(Yt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Za(Yt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),Y_={paint:G_},W_=function(k){function C(B){k.call(this,B,Y_)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(te){return new bc(te)},C.prototype.queryRadius=function(){return nc(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function(te,pe,we,Me,Ne,rt,vt,mt){var Ut=Vu(te,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),rt.angle,vt),ir=this.paint.get("fill-extrusion-height").evaluate(pe,we),tr=this.paint.get("fill-extrusion-base").evaluate(pe,we),xr=Z_(Ut,mt,rt,0),Ur=j_(Me,tr,ir,mt),hn=Ur[0],an=Ur[1];return X_(hn,an,xr)},C}(js);function Cv(k,C){return k.x*C.x+k.y*C.y}function um(k,C){if(k.length===1){for(var B=0,te=C[B++],pe;!pe||te.equals(pe);)if(pe=C[B++],!pe)return 1/0;for(;B<C.length;B++){var we=C[B],Me=k[0],Ne=pe.sub(te),rt=we.sub(te),vt=Me.sub(te),mt=Cv(Ne,Ne),Ut=Cv(Ne,rt),ir=Cv(rt,rt),tr=Cv(vt,Ne),xr=Cv(vt,rt),Ur=mt*ir-Ut*Ut,hn=(ir*tr-Ut*xr)/Ur,an=(mt*xr-Ut*tr)/Ur,Rn=1-hn-an,Mn=te.z*Rn+pe.z*hn+we.z*an;if(isFinite(Mn))return Mn}return 1/0}else{for(var Dn=1/0,Vn=0,qn=C;Vn<qn.length;Vn+=1){var da=qn[Vn];Dn=Math.min(Dn,da.z)}return Dn}}function X_(k,C,B){var te=1/0;Go(B,C)&&(te=um(B,C[0]));for(var pe=0;pe<C.length;pe++)for(var we=C[pe],Me=k[pe],Ne=0;Ne<we.length-1;Ne++){var rt=we[Ne],vt=we[Ne+1],mt=Me[Ne],Ut=Me[Ne+1],ir=[rt,vt,Ut,mt,rt];gi(B,ir)&&(te=Math.min(te,um(B,ir)))}return te===1/0?!1:te}function j_(k,C,B,te){for(var pe=[],we=[],Me=te[8]*C,Ne=te[9]*C,rt=te[10]*C,vt=te[11]*C,mt=te[8]*B,Ut=te[9]*B,ir=te[10]*B,tr=te[11]*B,xr=0,Ur=k;xr<Ur.length;xr+=1){for(var hn=Ur[xr],an=[],Rn=[],Mn=0,Dn=hn;Mn<Dn.length;Mn+=1){var Vn=Dn[Mn],qn=Vn.x,da=Vn.y,va=te[0]*qn+te[4]*da+te[12],Wa=te[1]*qn+te[5]*da+te[13],Da=te[2]*qn+te[6]*da+te[14],Oa=te[3]*qn+te[7]*da+te[15],fi=va+Me,Ua=Wa+Ne,Ha=Da+rt,bi=Oa+vt,ci=va+mt,Vi=Wa+Ut,lo=Da+ir,Hi=Oa+tr,Gi=new v(fi/bi,Ua/bi);Gi.z=Ha/bi,an.push(Gi);var Ni=new v(ci/Hi,Vi/Hi);Ni.z=lo/Hi,Rn.push(Ni)}pe.push(an),we.push(Rn)}return[pe,we]}function Z_(k,C,B,te){for(var pe=[],we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we],rt=[Ne.x,Ne.y,te,1];xp(rt,rt,C),pe.push(new v(rt[0]/rt[3],rt[1]/rt[3]))}return pe}var K_=es([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),cm=K_.members,$_=Mh.VectorTileFeature.types,fm=63,J_=Math.cos(75/2*(Math.PI/180)),Q_=15,q_=20,e2=15,hm=1/2,vm=Math.pow(2,e2-1)/hm,Hl=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ph,this.indexArray=new mc,this.programConfigurations=new pi(cm,C.layers,C.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};Hl.prototype.populate=function(C,B,te){this.hasPattern=Jd("line",this.layers,B);for(var pe=this.layers[0].layout.get("line-sort-key"),we=[],Me=0,Ne=C;Me<Ne.length;Me+=1){var rt=Ne[Me],vt=rt.feature,mt=rt.id,Ut=rt.index,ir=rt.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,xr={type:vt.type,id:mt,properties:vt.properties,geometry:tr?to(vt):[]};if(!!this.layers[0]._featureFilter.filter(new yi(this.zoom),xr,te)){tr||(xr.geometry=to(vt));var Ur=pe?pe.evaluate(xr,{},te):void 0,hn={id:mt,properties:vt.properties,type:vt.type,sourceLayerIndex:ir,index:Ut,geometry:xr.geometry,patterns:{},sortKey:Ur};we.push(hn)}}pe&&we.sort(function(Da,Oa){return Da.sortKey-Oa.sortKey});for(var an=0,Rn=we;an<Rn.length;an+=1){var Mn=Rn[an],Dn=Mn,Vn=Dn.geometry,qn=Dn.index,da=Dn.sourceLayerIndex;if(this.hasPattern){var va=Qd("line",this.layers,Mn,this.zoom,B);this.patternFeatures.push(va)}else this.addFeature(Mn,Vn,qn,te,{});var Wa=C[qn].feature;B.featureIndex.insert(Wa,Vn,qn,da,this.index)}},Hl.prototype.update=function(C,B,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,te)},Hl.prototype.addFeatures=function(C,B,te){for(var pe=0,we=this.patternFeatures;pe<we.length;pe+=1){var Me=we[pe];this.addFeature(Me,Me.geometry,Me.index,B,te)}},Hl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Hl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Hl.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,cm),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Hl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Hl.prototype.addFeature=function(C,B,te,pe,we){for(var Me=this.layers[0].layout,Ne=Me.get("line-join").evaluate(C,{}),rt=Me.get("line-cap"),vt=Me.get("line-miter-limit"),mt=Me.get("line-round-limit"),Ut=0,ir=B;Ut<ir.length;Ut+=1){var tr=ir[Ut];this.addLine(tr,C,Ne,rt,vt,mt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,te,we,pe)},Hl.prototype.addLine=function(C,B,te,pe,we,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!B.properties&&B.properties.hasOwnProperty("mapbox_clip_start")&&B.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+B.properties.mapbox_clip_start,this.clipEnd=+B.properties.mapbox_clip_end;for(var Ne=0;Ne<C.length-1;Ne++)this.totalDistance+=C[Ne].dist(C[Ne+1]);this.updateScaledDistance()}for(var rt=$_[B.type]==="Polygon",vt=C.length;vt>=2&&C[vt-1].equals(C[vt-2]);)vt--;for(var mt=0;mt<vt-1&&C[mt].equals(C[mt+1]);)mt++;if(!(vt<(rt?3:2))){te==="bevel"&&(we=1.05);var Ut=this.overscaling<=16?Q_*$a/(512*this.overscaling):0,ir=this.segments.prepareSegment(vt*10,this.layoutVertexArray,this.indexArray),tr,xr=void 0,Ur=void 0,hn=void 0,an=void 0;this.e1=this.e2=-1,rt&&(tr=C[vt-2],an=C[mt].sub(tr)._unit()._perp());for(var Rn=mt;Rn<vt;Rn++)if(Ur=Rn===vt-1?rt?C[mt+1]:void 0:C[Rn+1],!(Ur&&C[Rn].equals(Ur))){an&&(hn=an),tr&&(xr=tr),tr=C[Rn],an=Ur?Ur.sub(tr)._unit()._perp():hn,hn=hn||an;var Mn=hn.add(an);(Mn.x!==0||Mn.y!==0)&&Mn._unit();var Dn=hn.x*an.x+hn.y*an.y,Vn=Mn.x*an.x+Mn.y*an.y,qn=Vn!==0?1/Vn:1/0,da=2*Math.sqrt(2-2*Vn),va=Vn<J_&&xr&&Ur,Wa=hn.x*an.y-hn.y*an.x>0;if(va&&Rn>mt){var Da=tr.dist(xr);if(Da>2*Ut){var Oa=tr.sub(tr.sub(xr)._mult(Ut/Da)._round());this.updateDistance(xr,Oa),this.addCurrentVertex(Oa,hn,0,0,ir),xr=Oa}}var fi=xr&&Ur,Ua=fi?te:rt?"butt":pe;if(fi&&Ua==="round"&&(qn<Me?Ua="miter":qn<=2&&(Ua="fakeround")),Ua==="miter"&&qn>we&&(Ua="bevel"),Ua==="bevel"&&(qn>2&&(Ua="flipbevel"),qn<we&&(Ua="miter")),xr&&this.updateDistance(xr,tr),Ua==="miter")Mn._mult(qn),this.addCurrentVertex(tr,Mn,0,0,ir);else if(Ua==="flipbevel"){if(qn>100)Mn=an.mult(-1);else{var Ha=qn*hn.add(an).mag()/hn.sub(an).mag();Mn._perp()._mult(Ha*(Wa?-1:1))}this.addCurrentVertex(tr,Mn,0,0,ir),this.addCurrentVertex(tr,Mn.mult(-1),0,0,ir)}else if(Ua==="bevel"||Ua==="fakeround"){var bi=-Math.sqrt(qn*qn-1),ci=Wa?bi:0,Vi=Wa?0:bi;if(xr&&this.addCurrentVertex(tr,hn,ci,Vi,ir),Ua==="fakeround")for(var lo=Math.round(da*180/Math.PI/q_),Hi=1;Hi<lo;Hi++){var Gi=Hi/lo;if(Gi!==.5){var Ni=Gi-.5,xo=1.0904+Dn*(-3.2452+Dn*(3.55645-Dn*1.43519)),Ao=.848013+Dn*(-1.06021+Dn*.215638);Gi=Gi+Gi*Ni*(Gi-1)*(xo*Ni*Ni+Ao)}var Yo=an.sub(hn)._mult(Gi)._add(hn)._unit()._mult(Wa?-1:1);this.addHalfVertex(tr,Yo.x,Yo.y,!1,Wa,0,ir)}Ur&&this.addCurrentVertex(tr,an,-ci,-Vi,ir)}else if(Ua==="butt")this.addCurrentVertex(tr,Mn,0,0,ir);else if(Ua==="square"){var Ko=xr?1:-1;this.addCurrentVertex(tr,Mn,Ko,Ko,ir)}else Ua==="round"&&(xr&&(this.addCurrentVertex(tr,hn,0,0,ir),this.addCurrentVertex(tr,hn,1,1,ir,!0)),Ur&&(this.addCurrentVertex(tr,an,-1,-1,ir,!0),this.addCurrentVertex(tr,an,0,0,ir)));if(va&&Rn<vt-1){var Cs=tr.dist(Ur);if(Cs>2*Ut){var us=tr.add(Ur.sub(tr)._mult(Ut/Cs)._round());this.updateDistance(tr,us),this.addCurrentVertex(us,an,0,0,ir),tr=us}}}}},Hl.prototype.addCurrentVertex=function(C,B,te,pe,we,Me){Me===void 0&&(Me=!1);var Ne=B.x+B.y*te,rt=B.y-B.x*te,vt=-B.x+B.y*pe,mt=-B.y-B.x*pe;this.addHalfVertex(C,Ne,rt,Me,!1,te,we),this.addHalfVertex(C,vt,mt,Me,!0,-pe,we),this.distance>vm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,B,te,pe,we,Me))},Hl.prototype.addHalfVertex=function(C,B,te,pe,we,Me,Ne){var rt=C.x,vt=C.y,mt=this.scaledDistance*hm;this.layoutVertexArray.emplaceBack((rt<<1)+(pe?1:0),(vt<<1)+(we?1:0),Math.round(fm*B)+128,Math.round(fm*te)+128,(Me===0?0:Me<0?-1:1)+1|(mt&63)<<2,mt>>6);var Ut=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ut),Ne.primitiveLength++),we?this.e2=Ut:this.e1=Ut},Hl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(vm-1):this.distance},Hl.prototype.updateDistance=function(C,B){this.distance+=C.dist(B),this.updateScaledDistance()},Be("LineBucket",Hl,{omit:["layers","patternFeatures"]});var t2=new fo({"line-cap":new Za(Yt.layout_line["line-cap"]),"line-join":new oi(Yt.layout_line["line-join"]),"line-miter-limit":new Za(Yt.layout_line["line-miter-limit"]),"line-round-limit":new Za(Yt.layout_line["line-round-limit"]),"line-sort-key":new oi(Yt.layout_line["line-sort-key"])}),r2=new fo({"line-opacity":new oi(Yt.paint_line["line-opacity"]),"line-color":new oi(Yt.paint_line["line-color"]),"line-translate":new Za(Yt.paint_line["line-translate"]),"line-translate-anchor":new Za(Yt.paint_line["line-translate-anchor"]),"line-width":new oi(Yt.paint_line["line-width"]),"line-gap-width":new oi(Yt.paint_line["line-gap-width"]),"line-offset":new oi(Yt.paint_line["line-offset"]),"line-blur":new oi(Yt.paint_line["line-blur"]),"line-dasharray":new wo(Yt.paint_line["line-dasharray"]),"line-pattern":new Uo(Yt.paint_line["line-pattern"]),"line-gradient":new qo(Yt.paint_line["line-gradient"])}),pm={paint:r2,layout:t2},n2=function(k){function C(){k.apply(this,arguments)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(te,pe){return pe=new yi(Math.floor(pe.zoom),{now:pe.now,fadeDuration:pe.fadeDuration,zoomHistory:pe.zoomHistory,transition:pe.transition}),k.prototype.possiblyEvaluate.call(this,te,pe)},C.prototype.evaluate=function(te,pe,we,Me){return pe=M({},pe,{zoom:Math.floor(pe.zoom)}),k.prototype.evaluate.call(this,te,pe,we,Me)},C}(oi),dm=new n2(pm.paint.properties["line-width"].specification);dm.useIntegerZoom=!0;var a2=function(k){function C(B){k.call(this,B,pm)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var te=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Qg(te,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function(te,pe){k.prototype.recalculate.call(this,te,pe),this.paint._values["line-floorwidth"]=dm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,te)},C.prototype.createBucket=function(te){return new Hl(te)},C.prototype.queryRadius=function(te){var pe=te,we=gm(eu("line-width",this,pe),eu("line-gap-width",this,pe)),Me=eu("line-offset",this,pe);return we/2+Math.abs(Me)+nc(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function(te,pe,we,Me,Ne,rt,vt){var mt=Vu(te,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),rt.angle,vt),Ut=vt/2*gm(this.paint.get("line-width").evaluate(pe,we),this.paint.get("line-gap-width").evaluate(pe,we)),ir=this.paint.get("line-offset").evaluate(pe,we);return ir&&(Me=i2(Me,ir*vt)),is(mt,Me,Ut)},C.prototype.isTileClipped=function(){return!0},C}(js);function gm(k,C){return C>0?C+2*k:k}function i2(k,C){for(var B=[],te=new v(0,0),pe=0;pe<k.length;pe++){for(var we=k[pe],Me=[],Ne=0;Ne<we.length;Ne++){var rt=we[Ne-1],vt=we[Ne],mt=we[Ne+1],Ut=Ne===0?te:vt.sub(rt)._unit()._perp(),ir=Ne===we.length-1?te:mt.sub(vt)._unit()._perp(),tr=Ut._add(ir)._unit(),xr=tr.x*ir.x+tr.y*ir.y;tr._mult(1/xr),Me.push(tr._mult(C)._add(vt))}B.push(Me)}return B}var e0=es([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),o2=es([{name:"a_projected_pos",components:3,type:"Float32"}],4);es([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var s2=es([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);es([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var mm=es([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),l2=es([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);es([{name:"triangle",components:3,type:"Uint16"}]),es([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),es([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),es([{type:"Float32",name:"offsetX"}]),es([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function u2(k,C,B){var te=C.layout.get("text-transform").evaluate(B,{});return te==="uppercase"?k=k.toLocaleUpperCase():te==="lowercase"&&(k=k.toLocaleLowerCase()),ii.applyArabicShaping&&(k=ii.applyArabicShaping(k)),k}function c2(k,C,B){return k.sections.forEach(function(te){te.text=u2(te.text,C,B)}),k}function f2(k){var C={},B={},te=[],pe=0;function we(an){te.push(k[an]),pe++}function Me(an,Rn,Mn){var Dn=B[an];return delete B[an],B[Rn]=Dn,te[Dn].geometry[0].pop(),te[Dn].geometry[0]=te[Dn].geometry[0].concat(Mn[0]),Dn}function Ne(an,Rn,Mn){var Dn=C[Rn];return delete C[Rn],C[an]=Dn,te[Dn].geometry[0].shift(),te[Dn].geometry[0]=Mn[0].concat(te[Dn].geometry[0]),Dn}function rt(an,Rn,Mn){var Dn=Mn?Rn[0][Rn[0].length-1]:Rn[0][0];return an+":"+Dn.x+":"+Dn.y}for(var vt=0;vt<k.length;vt++){var mt=k[vt],Ut=mt.geometry,ir=mt.text?mt.text.toString():null;if(!ir){we(vt);continue}var tr=rt(ir,Ut),xr=rt(ir,Ut,!0);if(tr in B&&xr in C&&B[tr]!==C[xr]){var Ur=Ne(tr,xr,Ut),hn=Me(tr,xr,te[Ur].geometry);delete C[tr],delete B[xr],B[rt(ir,te[hn].geometry,!0)]=hn,te[Ur].geometry=null}else tr in B?Me(tr,xr,Ut):xr in C?Ne(tr,xr,Ut):(we(vt),C[tr]=pe-1,B[xr]=pe-1)}return te.filter(function(an){return an.geometry})}var Lv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function h2(k){for(var C="",B=0;B<k.length;B++){var te=k.charCodeAt(B+1)||null,pe=k.charCodeAt(B-1)||null,we=(!te||!fn(te)||Lv[k[B+1]])&&(!pe||!fn(pe)||Lv[k[B-1]]);we&&Lv[k[B]]?C+=Lv[k[B]]:C+=k[B]}return C}var Us=24,v2=function(k,C,B,te,pe){var we,Me,Ne=pe*8-te-1,rt=(1<<Ne)-1,vt=rt>>1,mt=-7,Ut=B?pe-1:0,ir=B?-1:1,tr=k[C+Ut];for(Ut+=ir,we=tr&(1<<-mt)-1,tr>>=-mt,mt+=Ne;mt>0;we=we*256+k[C+Ut],Ut+=ir,mt-=8);for(Me=we&(1<<-mt)-1,we>>=-mt,mt+=te;mt>0;Me=Me*256+k[C+Ut],Ut+=ir,mt-=8);if(we===0)we=1-vt;else{if(we===rt)return Me?NaN:(tr?-1:1)*(1/0);Me=Me+Math.pow(2,te),we=we-vt}return(tr?-1:1)*Me*Math.pow(2,we-te)},p2=function(k,C,B,te,pe,we){var Me,Ne,rt,vt=we*8-pe-1,mt=(1<<vt)-1,Ut=mt>>1,ir=pe===23?Math.pow(2,-24)-Math.pow(2,-77):0,tr=te?0:we-1,xr=te?1:-1,Ur=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Ne=isNaN(C)?1:0,Me=mt):(Me=Math.floor(Math.log(C)/Math.LN2),C*(rt=Math.pow(2,-Me))<1&&(Me--,rt*=2),Me+Ut>=1?C+=ir/rt:C+=ir*Math.pow(2,1-Ut),C*rt>=2&&(Me++,rt/=2),Me+Ut>=mt?(Ne=0,Me=mt):Me+Ut>=1?(Ne=(C*rt-1)*Math.pow(2,pe),Me=Me+Ut):(Ne=C*Math.pow(2,Ut-1)*Math.pow(2,pe),Me=0));pe>=8;k[B+tr]=Ne&255,tr+=xr,Ne/=256,pe-=8);for(Me=Me<<pe|Ne,vt+=pe;vt>0;k[B+tr]=Me&255,tr+=xr,Me/=256,vt-=8);k[B+tr-xr]|=Ur*128},Ap={read:v2,write:p2},Mp=To;function To(k){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(k)?k:new Uint8Array(k||0),this.pos=0,this.type=0,this.length=this.buf.length}To.Varint=0,To.Fixed64=1,To.Bytes=2,To.Fixed32=5;var t0=(1<<16)*(1<<16),ym=1/t0,d2=12,xm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");To.prototype={destroy:function(){this.buf=null},readFields:function(k,C,B){for(B=B||this.length;this.pos<B;){var te=this.readVarint(),pe=te>>3,we=this.pos;this.type=te&7,k(pe,C,this),this.pos===we&&this.skip(te)}return C},readMessage:function(k,C){return this.readFields(k,C,this.readVarint()+this.pos)},readFixed32:function(){var k=Ep(this.buf,this.pos);return this.pos+=4,k},readSFixed32:function(){var k=_m(this.buf,this.pos);return this.pos+=4,k},readFixed64:function(){var k=Ep(this.buf,this.pos)+Ep(this.buf,this.pos+4)*t0;return this.pos+=8,k},readSFixed64:function(){var k=Ep(this.buf,this.pos)+_m(this.buf,this.pos+4)*t0;return this.pos+=8,k},readFloat:function(){var k=Ap.read(this.buf,this.pos,!0,23,4);return this.pos+=4,k},readDouble:function(){var k=Ap.read(this.buf,this.pos,!0,52,8);return this.pos+=8,k},readVarint:function(k){var C=this.buf,B,te;return te=C[this.pos++],B=te&127,te<128||(te=C[this.pos++],B|=(te&127)<<7,te<128)||(te=C[this.pos++],B|=(te&127)<<14,te<128)||(te=C[this.pos++],B|=(te&127)<<21,te<128)?B:(te=C[this.pos],B|=(te&15)<<28,g2(B,k,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var k=this.readVarint();return k%2===1?(k+1)/-2:k/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var k=this.readVarint()+this.pos,C=this.pos;return this.pos=k,k-C>=d2&&xm?L2(this.buf,C,k):C2(this.buf,C,k)},readBytes:function(){var k=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,k);return this.pos=k,C},readPackedVarint:function(k,C){if(this.type!==To.Bytes)return k.push(this.readVarint(C));var B=Yc(this);for(k=k||[];this.pos<B;)k.push(this.readVarint(C));return k},readPackedSVarint:function(k){if(this.type!==To.Bytes)return k.push(this.readSVarint());var C=Yc(this);for(k=k||[];this.pos<C;)k.push(this.readSVarint());return k},readPackedBoolean:function(k){if(this.type!==To.Bytes)return k.push(this.readBoolean());var C=Yc(this);for(k=k||[];this.pos<C;)k.push(this.readBoolean());return k},readPackedFloat:function(k){if(this.type!==To.Bytes)return k.push(this.readFloat());var C=Yc(this);for(k=k||[];this.pos<C;)k.push(this.readFloat());return k},readPackedDouble:function(k){if(this.type!==To.Bytes)return k.push(this.readDouble());var C=Yc(this);for(k=k||[];this.pos<C;)k.push(this.readDouble());return k},readPackedFixed32:function(k){if(this.type!==To.Bytes)return k.push(this.readFixed32());var C=Yc(this);for(k=k||[];this.pos<C;)k.push(this.readFixed32());return k},readPackedSFixed32:function(k){if(this.type!==To.Bytes)return k.push(this.readSFixed32());var C=Yc(this);for(k=k||[];this.pos<C;)k.push(this.readSFixed32());return k},readPackedFixed64:function(k){if(this.type!==To.Bytes)return k.push(this.readFixed64());var C=Yc(this);for(k=k||[];this.pos<C;)k.push(this.readFixed64());return k},readPackedSFixed64:function(k){if(this.type!==To.Bytes)return k.push(this.readSFixed64());var C=Yc(this);for(k=k||[];this.pos<C;)k.push(this.readSFixed64());return k},skip:function(k){var C=k&7;if(C===To.Varint)for(;this.buf[this.pos++]>127;);else if(C===To.Bytes)this.pos=this.readVarint()+this.pos;else if(C===To.Fixed32)this.pos+=4;else if(C===To.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(k,C){this.writeVarint(k<<3|C)},realloc:function(k){for(var C=this.length||16;C<this.pos+k;)C*=2;if(C!==this.length){var B=new Uint8Array(C);B.set(this.buf),this.buf=B,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(k){this.realloc(4),Sh(this.buf,k,this.pos),this.pos+=4},writeSFixed32:function(k){this.realloc(4),Sh(this.buf,k,this.pos),this.pos+=4},writeFixed64:function(k){this.realloc(8),Sh(this.buf,k&-1,this.pos),Sh(this.buf,Math.floor(k*ym),this.pos+4),this.pos+=8},writeSFixed64:function(k){this.realloc(8),Sh(this.buf,k&-1,this.pos),Sh(this.buf,Math.floor(k*ym),this.pos+4),this.pos+=8},writeVarint:function(k){if(k=+k||0,k>268435455||k<0){m2(k,this);return}this.realloc(4),this.buf[this.pos++]=k&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=(k>>>=7)&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=(k>>>=7)&127|(k>127?128:0),!(k<=127)&&(this.buf[this.pos++]=k>>>7&127)))},writeSVarint:function(k){this.writeVarint(k<0?-k*2-1:k*2)},writeBoolean:function(k){this.writeVarint(Boolean(k))},writeString:function(k){k=String(k),this.realloc(k.length*4),this.pos++;var C=this.pos;this.pos=P2(this.buf,k,this.pos);var B=this.pos-C;B>=128&&bm(C,B,this),this.pos=C-1,this.writeVarint(B),this.pos+=B},writeFloat:function(k){this.realloc(4),Ap.write(this.buf,k,this.pos,!0,23,4),this.pos+=4},writeDouble:function(k){this.realloc(8),Ap.write(this.buf,k,this.pos,!0,52,8),this.pos+=8},writeBytes:function(k){var C=k.length;this.writeVarint(C),this.realloc(C);for(var B=0;B<C;B++)this.buf[this.pos++]=k[B]},writeRawMessage:function(k,C){this.pos++;var B=this.pos;k(C,this);var te=this.pos-B;te>=128&&bm(B,te,this),this.pos=B-1,this.writeVarint(te),this.pos+=te},writeMessage:function(k,C,B){this.writeTag(k,To.Bytes),this.writeRawMessage(C,B)},writePackedVarint:function(k,C){C.length&&this.writeMessage(k,b2,C)},writePackedSVarint:function(k,C){C.length&&this.writeMessage(k,_2,C)},writePackedBoolean:function(k,C){C.length&&this.writeMessage(k,A2,C)},writePackedFloat:function(k,C){C.length&&this.writeMessage(k,w2,C)},writePackedDouble:function(k,C){C.length&&this.writeMessage(k,T2,C)},writePackedFixed32:function(k,C){C.length&&this.writeMessage(k,M2,C)},writePackedSFixed32:function(k,C){C.length&&this.writeMessage(k,E2,C)},writePackedFixed64:function(k,C){C.length&&this.writeMessage(k,S2,C)},writePackedSFixed64:function(k,C){C.length&&this.writeMessage(k,k2,C)},writeBytesField:function(k,C){this.writeTag(k,To.Bytes),this.writeBytes(C)},writeFixed32Field:function(k,C){this.writeTag(k,To.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(k,C){this.writeTag(k,To.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(k,C){this.writeTag(k,To.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(k,C){this.writeTag(k,To.Fixed64),this.writeSFixed64(C)},writeVarintField:function(k,C){this.writeTag(k,To.Varint),this.writeVarint(C)},writeSVarintField:function(k,C){this.writeTag(k,To.Varint),this.writeSVarint(C)},writeStringField:function(k,C){this.writeTag(k,To.Bytes),this.writeString(C)},writeFloatField:function(k,C){this.writeTag(k,To.Fixed32),this.writeFloat(C)},writeDoubleField:function(k,C){this.writeTag(k,To.Fixed64),this.writeDouble(C)},writeBooleanField:function(k,C){this.writeVarintField(k,Boolean(C))}};function g2(k,C,B){var te=B.buf,pe,we;if(we=te[B.pos++],pe=(we&112)>>4,we<128||(we=te[B.pos++],pe|=(we&127)<<3,we<128)||(we=te[B.pos++],pe|=(we&127)<<10,we<128)||(we=te[B.pos++],pe|=(we&127)<<17,we<128)||(we=te[B.pos++],pe|=(we&127)<<24,we<128)||(we=te[B.pos++],pe|=(we&1)<<31,we<128))return Eh(k,pe,C);throw new Error("Expected varint not more than 10 bytes")}function Yc(k){return k.type===To.Bytes?k.readVarint()+k.pos:k.pos+1}function Eh(k,C,B){return B?C*4294967296+(k>>>0):(C>>>0)*4294967296+(k>>>0)}function m2(k,C){var B,te;if(k>=0?(B=k%4294967296|0,te=k/4294967296|0):(B=~(-k%4294967296),te=~(-k/4294967296),B^4294967295?B=B+1|0:(B=0,te=te+1|0)),k>=18446744073709552e3||k<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),y2(B,te,C),x2(te,C)}function y2(k,C,B){B.buf[B.pos++]=k&127|128,k>>>=7,B.buf[B.pos++]=k&127|128,k>>>=7,B.buf[B.pos++]=k&127|128,k>>>=7,B.buf[B.pos++]=k&127|128,k>>>=7,B.buf[B.pos]=k&127}function x2(k,C){var B=(k&7)<<4;C.buf[C.pos++]|=B|((k>>>=3)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=k&127)))))}function bm(k,C,B){var te=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));B.realloc(te);for(var pe=B.pos-1;pe>=k;pe--)B.buf[pe+te]=B.buf[pe]}function b2(k,C){for(var B=0;B<k.length;B++)C.writeVarint(k[B])}function _2(k,C){for(var B=0;B<k.length;B++)C.writeSVarint(k[B])}function w2(k,C){for(var B=0;B<k.length;B++)C.writeFloat(k[B])}function T2(k,C){for(var B=0;B<k.length;B++)C.writeDouble(k[B])}function A2(k,C){for(var B=0;B<k.length;B++)C.writeBoolean(k[B])}function M2(k,C){for(var B=0;B<k.length;B++)C.writeFixed32(k[B])}function E2(k,C){for(var B=0;B<k.length;B++)C.writeSFixed32(k[B])}function S2(k,C){for(var B=0;B<k.length;B++)C.writeFixed64(k[B])}function k2(k,C){for(var B=0;B<k.length;B++)C.writeSFixed64(k[B])}function Ep(k,C){return(k[C]|k[C+1]<<8|k[C+2]<<16)+k[C+3]*16777216}function Sh(k,C,B){k[B]=C,k[B+1]=C>>>8,k[B+2]=C>>>16,k[B+3]=C>>>24}function _m(k,C){return(k[C]|k[C+1]<<8|k[C+2]<<16)+(k[C+3]<<24)}function C2(k,C,B){for(var te="",pe=C;pe<B;){var we=k[pe],Me=null,Ne=we>239?4:we>223?3:we>191?2:1;if(pe+Ne>B)break;var rt,vt,mt;Ne===1?we<128&&(Me=we):Ne===2?(rt=k[pe+1],(rt&192)===128&&(Me=(we&31)<<6|rt&63,Me<=127&&(Me=null))):Ne===3?(rt=k[pe+1],vt=k[pe+2],(rt&192)===128&&(vt&192)===128&&(Me=(we&15)<<12|(rt&63)<<6|vt&63,(Me<=2047||Me>=55296&&Me<=57343)&&(Me=null))):Ne===4&&(rt=k[pe+1],vt=k[pe+2],mt=k[pe+3],(rt&192)===128&&(vt&192)===128&&(mt&192)===128&&(Me=(we&15)<<18|(rt&63)<<12|(vt&63)<<6|mt&63,(Me<=65535||Me>=1114112)&&(Me=null))),Me===null?(Me=65533,Ne=1):Me>65535&&(Me-=65536,te+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|Me&1023),te+=String.fromCharCode(Me),pe+=Ne}return te}function L2(k,C,B){return xm.decode(k.subarray(C,B))}function P2(k,C,B){for(var te=0,pe,we;te<C.length;te++){if(pe=C.charCodeAt(te),pe>55295&&pe<57344)if(we)if(pe<56320){k[B++]=239,k[B++]=191,k[B++]=189,we=pe;continue}else pe=we-55296<<10|pe-56320|65536,we=null;else{pe>56319||te+1===C.length?(k[B++]=239,k[B++]=191,k[B++]=189):we=pe;continue}else we&&(k[B++]=239,k[B++]=191,k[B++]=189,we=null);pe<128?k[B++]=pe:(pe<2048?k[B++]=pe>>6|192:(pe<65536?k[B++]=pe>>12|224:(k[B++]=pe>>18|240,k[B++]=pe>>12&63|128),k[B++]=pe>>6&63|128),k[B++]=pe&63|128)}return B}var r0=3;function D2(k,C,B){k===1&&B.readMessage(R2,C)}function R2(k,C,B){if(k===3){var te=B.readMessage(I2,{}),pe=te.id,we=te.bitmap,Me=te.width,Ne=te.height,rt=te.left,vt=te.top,mt=te.advance;C.push({id:pe,bitmap:new Gf({width:Me+2*r0,height:Ne+2*r0},we),metrics:{width:Me,height:Ne,left:rt,top:vt,advance:mt}})}}function I2(k,C,B){k===1?C.id=B.readVarint():k===2?C.bitmap=B.readBytes():k===3?C.width=B.readVarint():k===4?C.height=B.readVarint():k===5?C.left=B.readSVarint():k===6?C.top=B.readSVarint():k===7&&(C.advance=B.readVarint())}function F2(k){return new Mp(k).readFields(D2,[])}var wm=r0;function Tm(k){for(var C=0,B=0,te=0,pe=k;te<pe.length;te+=1){var we=pe[te];C+=we.w*we.h,B=Math.max(B,we.w)}k.sort(function(hn,an){return an.h-hn.h});for(var Me=Math.max(Math.ceil(Math.sqrt(C/.95)),B),Ne=[{x:0,y:0,w:Me,h:1/0}],rt=0,vt=0,mt=0,Ut=k;mt<Ut.length;mt+=1)for(var ir=Ut[mt],tr=Ne.length-1;tr>=0;tr--){var xr=Ne[tr];if(!(ir.w>xr.w||ir.h>xr.h)){if(ir.x=xr.x,ir.y=xr.y,vt=Math.max(vt,ir.y+ir.h),rt=Math.max(rt,ir.x+ir.w),ir.w===xr.w&&ir.h===xr.h){var Ur=Ne.pop();tr<Ne.length&&(Ne[tr]=Ur)}else ir.h===xr.h?(xr.x+=ir.w,xr.w-=ir.w):ir.w===xr.w?(xr.y+=ir.h,xr.h-=ir.h):(Ne.push({x:xr.x+ir.w,y:xr.y,w:xr.w-ir.w,h:ir.h}),xr.y+=ir.h,xr.h-=ir.h);break}}return{w:rt,h:vt,fill:C/(rt*vt)||0}}var tu=1,Sp=function(C,B){var te=B.pixelRatio,pe=B.version,we=B.stretchX,Me=B.stretchY,Ne=B.content;this.paddedRect=C,this.pixelRatio=te,this.stretchX=we,this.stretchY=Me,this.content=Ne,this.version=pe},Pv={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Pv.tl.get=function(){return[this.paddedRect.x+tu,this.paddedRect.y+tu]},Pv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-tu,this.paddedRect.y+this.paddedRect.h-tu]},Pv.tlbr.get=function(){return this.tl.concat(this.br)},Pv.displaySize.get=function(){return[(this.paddedRect.w-tu*2)/this.pixelRatio,(this.paddedRect.h-tu*2)/this.pixelRatio]},Object.defineProperties(Sp.prototype,Pv);var Dv=function(C,B){var te={},pe={};this.haveRenderCallbacks=[];var we=[];this.addImages(C,te,we),this.addImages(B,pe,we);var Me=Tm(we),Ne=Me.w,rt=Me.h,vt=new Vl({width:Ne||1,height:rt||1});for(var mt in C){var Ut=C[mt],ir=te[mt].paddedRect;Vl.copy(Ut.data,vt,{x:0,y:0},{x:ir.x+tu,y:ir.y+tu},Ut.data)}for(var tr in B){var xr=B[tr],Ur=pe[tr].paddedRect,hn=Ur.x+tu,an=Ur.y+tu,Rn=xr.data.width,Mn=xr.data.height;Vl.copy(xr.data,vt,{x:0,y:0},{x:hn,y:an},xr.data),Vl.copy(xr.data,vt,{x:0,y:Mn-1},{x:hn,y:an-1},{width:Rn,height:1}),Vl.copy(xr.data,vt,{x:0,y:0},{x:hn,y:an+Mn},{width:Rn,height:1}),Vl.copy(xr.data,vt,{x:Rn-1,y:0},{x:hn-1,y:an},{width:1,height:Mn}),Vl.copy(xr.data,vt,{x:0,y:0},{x:hn+Rn,y:an},{width:1,height:Mn})}this.image=vt,this.iconPositions=te,this.patternPositions=pe};Dv.prototype.addImages=function(C,B,te){for(var pe in C){var we=C[pe],Me={x:0,y:0,w:we.data.width+2*tu,h:we.data.height+2*tu};te.push(Me),B[pe]=new Sp(Me,we),we.hasRenderCallback&&this.haveRenderCallbacks.push(pe)}},Dv.prototype.patchUpdatedImages=function(C,B){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var te in C.updatedImages)this.patchUpdatedImage(this.iconPositions[te],C.getImage(te),B),this.patchUpdatedImage(this.patternPositions[te],C.getImage(te),B)},Dv.prototype.patchUpdatedImage=function(C,B,te){if(!(!C||!B)&&C.version!==B.version){C.version=B.version;var pe=C.tl,we=pe[0],Me=pe[1];te.update(B.data,void 0,{x:we,y:Me})}},Be("ImagePosition",Sp),Be("ImageAtlas",Dv);var _u={horizontal:1,vertical:2,horizontalOnly:3},Rv=-17;function z2(k){for(var C=0,B=k;C<B.length;C+=1){var te=B[C];if(te.positionedGlyphs.length!==0)return!1}return!0}var Am=57344,Mm=63743,kh=function(){this.scale=1,this.fontStack="",this.imageName=null};kh.forText=function(C,B){var te=new kh;return te.scale=C||1,te.fontStack=B,te},kh.forImage=function(C){var B=new kh;return B.imageName=C,B};var ul=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};ul.fromFeature=function(C,B){for(var te=new ul,pe=0;pe<C.sections.length;pe++){var we=C.sections[pe];we.image?te.addImageSection(we):te.addTextSection(we,B)}return te},ul.prototype.length=function(){return this.text.length},ul.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},ul.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},ul.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},ul.prototype.verticalizePunctuation=function(){this.text=h2(this.text)},ul.prototype.trim=function(){for(var C=0,B=0;B<this.text.length&&Ic[this.text.charCodeAt(B)];B++)C++;for(var te=this.text.length,pe=this.text.length-1;pe>=0&&pe>=C&&Ic[this.text.charCodeAt(pe)];pe--)te--;this.text=this.text.substring(C,te),this.sectionIndex=this.sectionIndex.slice(C,te)},ul.prototype.substring=function(C,B){var te=new ul;return te.text=this.text.substring(C,B),te.sectionIndex=this.sectionIndex.slice(C,B),te.sections=this.sections,te},ul.prototype.toString=function(){return this.text},ul.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(B,te){return Math.max(B,C.sections[te].scale)},0)},ul.prototype.addTextSection=function(C,B){this.text+=C.text,this.sections.push(kh.forText(C.scale,C.fontStack||B));for(var te=this.sections.length-1,pe=0;pe<C.text.length;++pe)this.sectionIndex.push(te)},ul.prototype.addImageSection=function(C){var B=C.image?C.image.name:"";if(B.length===0){O("Can't add FormattedSection with an empty image.");return}var te=this.getNextImageSectionCharCode();if(!te){O("Reached maximum number of images "+(Mm-Am+2));return}this.text+=String.fromCharCode(te),this.sections.push(kh.forImage(B)),this.sectionIndex.push(this.sections.length-1)},ul.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=Mm?null:++this.imageSectionID:(this.imageSectionID=Am,this.imageSectionID)};function O2(k,C){for(var B=[],te=k.text,pe=0,we=0,Me=C;we<Me.length;we+=1){var Ne=Me[we];B.push(k.substring(pe,Ne)),pe=Ne}return pe<te.length&&B.push(k.substring(pe,te.length)),B}function kp(k,C,B,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur){var hn=ul.fromFeature(k,pe);Ut===_u.vertical&&hn.verticalizePunctuation();var an,Rn=ii.processBidirectionalText,Mn=ii.processStyledBidirectionalText;if(Rn&&hn.sections.length===1){an=[];for(var Dn=Rn(hn.toString(),n0(hn,vt,we,C,te,tr,xr)),Vn=0,qn=Dn;Vn<qn.length;Vn+=1){var da=qn[Vn],va=new ul;va.text=da,va.sections=hn.sections;for(var Wa=0;Wa<da.length;Wa++)va.sectionIndex.push(0);an.push(va)}}else if(Mn){an=[];for(var Da=Mn(hn.text,hn.sectionIndex,n0(hn,vt,we,C,te,tr,xr)),Oa=0,fi=Da;Oa<fi.length;Oa+=1){var Ua=fi[Oa],Ha=new ul;Ha.text=Ua[0],Ha.sectionIndex=Ua[1],Ha.sections=hn.sections,an.push(Ha)}}else an=O2(hn,n0(hn,vt,we,C,te,tr,xr));var bi=[],ci={positionedLines:bi,text:hn.toString(),top:mt[1],bottom:mt[1],left:mt[0],right:mt[0],writingMode:Ut,iconsInText:!1,verticalizable:!1};return U2(ci,C,B,te,an,Me,Ne,rt,Ut,vt,ir,Ur),z2(bi)?!1:ci}var Ic={};Ic[9]=!0,Ic[10]=!0,Ic[11]=!0,Ic[12]=!0,Ic[13]=!0,Ic[32]=!0;var ru={};ru[10]=!0,ru[32]=!0,ru[38]=!0,ru[40]=!0,ru[41]=!0,ru[43]=!0,ru[45]=!0,ru[47]=!0,ru[173]=!0,ru[183]=!0,ru[8203]=!0,ru[8208]=!0,ru[8211]=!0,ru[8231]=!0;function Em(k,C,B,te,pe,we){if(C.imageName){var rt=te[C.imageName];return rt?rt.displaySize[0]*C.scale*Us/we+pe:0}else{var Me=B[C.fontStack],Ne=Me&&Me[k];return Ne?Ne.metrics.advance*C.scale+pe:0}}function N2(k,C,B,te,pe,we){for(var Me=0,Ne=0;Ne<k.length();Ne++){var rt=k.getSection(Ne);Me+=Em(k.getCharCode(Ne),rt,te,pe,C,we)}var vt=Math.max(1,Math.ceil(Me/B));return Me/vt}function Sm(k,C,B,te){var pe=Math.pow(k-C,2);return te?k<C?pe/2:pe*2:pe+Math.abs(B)*B}function B2(k,C,B){var te=0;return k===10&&(te-=1e4),B&&(te+=150),(k===40||k===65288)&&(te+=50),(C===41||C===65289)&&(te+=50),te}function km(k,C,B,te,pe,we){for(var Me=null,Ne=Sm(C,B,pe,we),rt=0,vt=te;rt<vt.length;rt+=1){var mt=vt[rt],Ut=C-mt.x,ir=Sm(Ut,B,pe,we)+mt.badness;ir<=Ne&&(Me=mt,Ne=ir)}return{index:k,x:C,priorBreak:Me,badness:Ne}}function Cm(k){return k?Cm(k.priorBreak).concat(k.index):[]}function n0(k,C,B,te,pe,we,Me){if(we!=="point")return[];if(!k)return[];for(var Ne=[],rt=N2(k,C,B,te,pe,Me),vt=k.text.indexOf("\u200B")>=0,mt=0,Ut=0;Ut<k.length();Ut++){var ir=k.getSection(Ut),tr=k.getCharCode(Ut);if(Ic[tr]||(mt+=Em(tr,ir,te,pe,C,Me)),Ut<k.length()-1){var xr=Ir(tr);(ru[tr]||xr||ir.imageName)&&Ne.push(km(Ut+1,mt,rt,Ne,B2(tr,k.getCharCode(Ut+1),xr&&vt),!1))}}return Cm(km(k.length(),mt,rt,Ne,0,!0))}function a0(k){var C=.5,B=.5;switch(k){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(k){case"bottom":case"bottom-right":case"bottom-left":B=1;break;case"top":case"top-right":case"top-left":B=0;break}return{horizontalAlign:C,verticalAlign:B}}function U2(k,C,B,te,pe,we,Me,Ne,rt,vt,mt,Ut){for(var ir=0,tr=Rv,xr=0,Ur=0,hn=Ne==="right"?1:Ne==="left"?0:.5,an=0,Rn=0,Mn=pe;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];Dn.trim();var Vn=Dn.getMaxScale(),qn=(Vn-1)*Us,da={positionedGlyphs:[],lineOffset:0};k.positionedLines[an]=da;var va=da.positionedGlyphs,Wa=0;if(!Dn.length()){tr+=we,++an;continue}for(var Da=0;Da<Dn.length();Da++){var Oa=Dn.getSection(Da),fi=Dn.getSectionIndex(Da),Ua=Dn.getCharCode(Da),Ha=0,bi=null,ci=null,Vi=null,lo=Us,Hi=!(rt===_u.horizontal||!mt&&!Wr(Ua)||mt&&(Ic[Ua]||vn(Ua)));if(Oa.imageName){var Yo=te[Oa.imageName];if(!Yo)continue;Vi=Oa.imageName,k.iconsInText=k.iconsInText||!0,ci=Yo.paddedRect;var Ko=Yo.displaySize;Oa.scale=Oa.scale*Us/Ut,bi={width:Ko[0],height:Ko[1],left:tu,top:-wm,advance:Hi?Ko[1]:Ko[0]};var Cs=Us-Ko[1]*Oa.scale;Ha=qn+Cs,lo=bi.advance;var us=Hi?Ko[0]*Oa.scale-Us*Vn:Ko[1]*Oa.scale-Us*Vn;us>0&&us>Wa&&(Wa=us)}else{var Gi=B[Oa.fontStack],Ni=Gi&&Gi[Ua];if(Ni&&Ni.rect)ci=Ni.rect,bi=Ni.metrics;else{var xo=C[Oa.fontStack],Ao=xo&&xo[Ua];if(!Ao)continue;bi=Ao.metrics}Ha=(Vn-Oa.scale)*Us}Hi?(k.verticalizable=!0,va.push({glyph:Ua,imageName:Vi,x:ir,y:tr+Ha,vertical:Hi,scale:Oa.scale,fontStack:Oa.fontStack,sectionIndex:fi,metrics:bi,rect:ci}),ir+=lo*Oa.scale+vt):(va.push({glyph:Ua,imageName:Vi,x:ir,y:tr+Ha,vertical:Hi,scale:Oa.scale,fontStack:Oa.fontStack,sectionIndex:fi,metrics:bi,rect:ci}),ir+=bi.advance*Oa.scale+vt)}if(va.length!==0){var cl=ir-vt;xr=Math.max(cl,xr),V2(va,0,va.length-1,hn,Wa)}ir=0;var fl=we*Vn+Wa;da.lineOffset=Math.max(Wa,qn),tr+=fl,Ur=Math.max(fl,Ur),++an}var Ls=tr-Rv,Tl=a0(Me),Al=Tl.horizontalAlign,_s=Tl.verticalAlign;H2(k.positionedLines,hn,Al,_s,xr,Ur,we,Ls,pe.length),k.top+=-_s*Ls,k.bottom=k.top+Ls,k.left+=-Al*xr,k.right=k.left+xr}function V2(k,C,B,te,pe){if(!(!te&&!pe))for(var we=k[B],Me=we.metrics.advance*we.scale,Ne=(k[B].x+Me)*te,rt=C;rt<=B;rt++)k[rt].x-=Ne,k[rt].y+=pe}function H2(k,C,B,te,pe,we,Me,Ne,rt){var vt=(C-B)*pe,mt=0;we!==Me?mt=-Ne*te-Rv:mt=(-te*rt+.5)*Me;for(var Ut=0,ir=k;Ut<ir.length;Ut+=1)for(var tr=ir[Ut],xr=0,Ur=tr.positionedGlyphs;xr<Ur.length;xr+=1){var hn=Ur[xr];hn.x+=vt,hn.y+=mt}}function G2(k,C,B){var te=a0(B),pe=te.horizontalAlign,we=te.verticalAlign,Me=C[0],Ne=C[1],rt=Me-k.displaySize[0]*pe,vt=rt+k.displaySize[0],mt=Ne-k.displaySize[1]*we,Ut=mt+k.displaySize[1];return{image:k,top:mt,bottom:Ut,left:rt,right:vt}}function Lm(k,C,B,te,pe,we){var Me=k.image,Ne;if(Me.content){var rt=Me.content,vt=Me.pixelRatio||1;Ne=[rt[0]/vt,rt[1]/vt,Me.displaySize[0]-rt[2]/vt,Me.displaySize[1]-rt[3]/vt]}var mt=C.left*we,Ut=C.right*we,ir,tr,xr,Ur;B==="width"||B==="both"?(Ur=pe[0]+mt-te[3],tr=pe[0]+Ut+te[1]):(Ur=pe[0]+(mt+Ut-Me.displaySize[0])/2,tr=Ur+Me.displaySize[0]);var hn=C.top*we,an=C.bottom*we;return B==="height"||B==="both"?(ir=pe[1]+hn-te[0],xr=pe[1]+an+te[2]):(ir=pe[1]+(hn+an-Me.displaySize[1])/2,xr=ir+Me.displaySize[1]),{image:Me,top:ir,right:tr,bottom:xr,left:Ur,collisionPadding:Ne}}var Ch=function(k){function C(B,te,pe,we){k.call(this,B,te),this.angle=pe,we!==void 0&&(this.segment=we)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(v);Be("Anchor",Ch);var _c=128;function i0(k,C){var B=C.expression;if(B.kind==="constant"){var te=B.evaluate(new yi(k+1));return{kind:"constant",layoutSize:te}}else{if(B.kind==="source")return{kind:"source"};for(var pe=B.zoomStops,we=B.interpolationType,Me=0;Me<pe.length&&pe[Me]<=k;)Me++;Me=Math.max(0,Me-1);for(var Ne=Me;Ne<pe.length&&pe[Ne]<k+1;)Ne++;Ne=Math.min(pe.length-1,Ne);var rt=pe[Me],vt=pe[Ne];if(B.kind==="composite")return{kind:"composite",minZoom:rt,maxZoom:vt,interpolationType:we};var mt=B.evaluate(new yi(rt)),Ut=B.evaluate(new yi(vt));return{kind:"camera",minZoom:rt,maxZoom:vt,minSize:mt,maxSize:Ut,interpolationType:we}}}function Pm(k,C,B){var te=C.uSize,pe=C.uSizeT,we=B.lowerSize,Me=B.upperSize;return k.kind==="source"?we/_c:k.kind==="composite"?mo(we/_c,Me/_c,pe):te}function Dm(k,C){var B=0,te=0;if(k.kind==="constant")te=k.layoutSize;else if(k.kind!=="source"){var pe=k.interpolationType,we=k.minZoom,Me=k.maxZoom,Ne=pe?f(co.interpolationFactor(pe,C,we,Me),0,1):0;k.kind==="camera"?te=mo(k.minSize,k.maxSize,Ne):B=Ne}return{uSizeT:B,uSize:te}}var Y2=Object.freeze({__proto__:null,getSizeData:i0,evaluateSizeForFeature:Pm,evaluateSizeForZoom:Dm,SIZE_PACK_FACTOR:_c});function Rm(k,C,B,te,pe){if(C.segment===void 0)return!0;for(var we=C,Me=C.segment+1,Ne=0;Ne>-B/2;){if(Me--,Me<0)return!1;Ne-=k[Me].dist(we),we=k[Me]}Ne+=k[Me].dist(k[Me+1]),Me++;for(var rt=[],vt=0;Ne<B/2;){var mt=k[Me-1],Ut=k[Me],ir=k[Me+1];if(!ir)return!1;var tr=mt.angleTo(Ut)-Ut.angleTo(ir);for(tr=Math.abs((tr+3*Math.PI)%(Math.PI*2)-Math.PI),rt.push({distance:Ne,angleDelta:tr}),vt+=tr;Ne-rt[0].distance>te;)vt-=rt.shift().angleDelta;if(vt>pe)return!1;Me++,Ne+=Ut.dist(ir)}return!0}function Im(k){for(var C=0,B=0;B<k.length-1;B++)C+=k[B].dist(k[B+1]);return C}function Fm(k,C,B){return k?3/5*C*B:0}function zm(k,C){return Math.max(k?k.right-k.left:0,C?C.right-C.left:0)}function W2(k,C,B,te,pe,we){for(var Me=Fm(B,pe,we),Ne=zm(B,te)*we,rt=0,vt=Im(k)/2,mt=0;mt<k.length-1;mt++){var Ut=k[mt],ir=k[mt+1],tr=Ut.dist(ir);if(rt+tr>vt){var xr=(vt-rt)/tr,Ur=mo(Ut.x,ir.x,xr),hn=mo(Ut.y,ir.y,xr),an=new Ch(Ur,hn,ir.angleTo(Ut),mt);return an._round(),!Me||Rm(k,an,Ne,Me,C)?an:void 0}rt+=tr}}function X2(k,C,B,te,pe,we,Me,Ne,rt){var vt=Fm(te,we,Me),mt=zm(te,pe),Ut=mt*Me,ir=k[0].x===0||k[0].x===rt||k[0].y===0||k[0].y===rt;C-Ut<C/4&&(C=Ut+C/4);var tr=we*2,xr=ir?C/2*Ne%C:(mt/2+tr)*Me*Ne%C;return Om(k,xr,C,vt,B,Ut,ir,!1,rt)}function Om(k,C,B,te,pe,we,Me,Ne,rt){for(var vt=we/2,mt=Im(k),Ut=0,ir=C-B,tr=[],xr=0;xr<k.length-1;xr++){for(var Ur=k[xr],hn=k[xr+1],an=Ur.dist(hn),Rn=hn.angleTo(Ur);ir+B<Ut+an;){ir+=B;var Mn=(ir-Ut)/an,Dn=mo(Ur.x,hn.x,Mn),Vn=mo(Ur.y,hn.y,Mn);if(Dn>=0&&Dn<rt&&Vn>=0&&Vn<rt&&ir-vt>=0&&ir+vt<=mt){var qn=new Ch(Dn,Vn,Rn,xr);qn._round(),(!te||Rm(k,qn,we,te,pe))&&tr.push(qn)}}Ut+=an}return!Ne&&!tr.length&&!Me&&(tr=Om(k,Ut/2,B,te,pe,we,Me,!0,rt)),tr}function Nm(k,C,B,te,pe){for(var we=[],Me=0;Me<k.length;Me++)for(var Ne=k[Me],rt=void 0,vt=0;vt<Ne.length-1;vt++){var mt=Ne[vt],Ut=Ne[vt+1];mt.x<C&&Ut.x<C||(mt.x<C?mt=new v(C,mt.y+(Ut.y-mt.y)*((C-mt.x)/(Ut.x-mt.x)))._round():Ut.x<C&&(Ut=new v(C,mt.y+(Ut.y-mt.y)*((C-mt.x)/(Ut.x-mt.x)))._round()),!(mt.y<B&&Ut.y<B)&&(mt.y<B?mt=new v(mt.x+(Ut.x-mt.x)*((B-mt.y)/(Ut.y-mt.y)),B)._round():Ut.y<B&&(Ut=new v(mt.x+(Ut.x-mt.x)*((B-mt.y)/(Ut.y-mt.y)),B)._round()),!(mt.x>=te&&Ut.x>=te)&&(mt.x>=te?mt=new v(te,mt.y+(Ut.y-mt.y)*((te-mt.x)/(Ut.x-mt.x)))._round():Ut.x>=te&&(Ut=new v(te,mt.y+(Ut.y-mt.y)*((te-mt.x)/(Ut.x-mt.x)))._round()),!(mt.y>=pe&&Ut.y>=pe)&&(mt.y>=pe?mt=new v(mt.x+(Ut.x-mt.x)*((pe-mt.y)/(Ut.y-mt.y)),pe)._round():Ut.y>=pe&&(Ut=new v(mt.x+(Ut.x-mt.x)*((pe-mt.y)/(Ut.y-mt.y)),pe)._round()),(!rt||!mt.equals(rt[rt.length-1]))&&(rt=[mt],we.push(rt)),rt.push(Ut)))))}return we}var Lh=tu;function Bm(k,C,B,te){var pe=[],we=k.image,Me=we.pixelRatio,Ne=we.paddedRect.w-2*Lh,rt=we.paddedRect.h-2*Lh,vt=k.right-k.left,mt=k.bottom-k.top,Ut=we.stretchX||[[0,Ne]],ir=we.stretchY||[[0,rt]],tr=function(Gi,Ni){return Gi+Ni[1]-Ni[0]},xr=Ut.reduce(tr,0),Ur=ir.reduce(tr,0),hn=Ne-xr,an=rt-Ur,Rn=0,Mn=xr,Dn=0,Vn=Ur,qn=0,da=hn,va=0,Wa=an;if(we.content&&te){var Da=we.content;Rn=Cp(Ut,0,Da[0]),Dn=Cp(ir,0,Da[1]),Mn=Cp(Ut,Da[0],Da[2]),Vn=Cp(ir,Da[1],Da[3]),qn=Da[0]-Rn,va=Da[1]-Dn,da=Da[2]-Da[0]-Mn,Wa=Da[3]-Da[1]-Vn}var Oa=function(Gi,Ni,xo,Ao){var Yo=Lp(Gi.stretch-Rn,Mn,vt,k.left),Ko=Pp(Gi.fixed-qn,da,Gi.stretch,xr),Cs=Lp(Ni.stretch-Dn,Vn,mt,k.top),us=Pp(Ni.fixed-va,Wa,Ni.stretch,Ur),cl=Lp(xo.stretch-Rn,Mn,vt,k.left),fl=Pp(xo.fixed-qn,da,xo.stretch,xr),Ls=Lp(Ao.stretch-Dn,Vn,mt,k.top),Tl=Pp(Ao.fixed-va,Wa,Ao.stretch,Ur),Al=new v(Yo,Cs),_s=new v(cl,Cs),Ml=new v(cl,Ls),wu=new v(Yo,Ls),jc=new v(Ko/Me,us/Me),df=new v(fl/Me,Tl/Me),gf=C*Math.PI/180;if(gf){var mf=Math.sin(gf),Nh=Math.cos(gf),ic=[Nh,-mf,mf,Nh];Al._matMult(ic),_s._matMult(ic),wu._matMult(ic),Ml._matMult(ic)}var Op=Gi.stretch+Gi.fixed,v0=xo.stretch+xo.fixed,Np=Ni.stretch+Ni.fixed,p0=Ao.stretch+Ao.fixed,Hu={x:we.paddedRect.x+Lh+Op,y:we.paddedRect.y+Lh+Np,w:v0-Op,h:p0-Np},Bh=da/Me/vt,Bp=Wa/Me/mt;return{tl:Al,tr:_s,bl:wu,br:Ml,tex:Hu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:jc,pixelOffsetBR:df,minFontScaleX:Bh,minFontScaleY:Bp,isSDF:B}};if(!te||!we.stretchX&&!we.stretchY)pe.push(Oa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:rt+1}));else for(var fi=Um(Ut,hn,xr),Ua=Um(ir,an,Ur),Ha=0;Ha<fi.length-1;Ha++)for(var bi=fi[Ha],ci=fi[Ha+1],Vi=0;Vi<Ua.length-1;Vi++){var lo=Ua[Vi],Hi=Ua[Vi+1];pe.push(Oa(bi,lo,ci,Hi))}return pe}function Cp(k,C,B){for(var te=0,pe=0,we=k;pe<we.length;pe+=1){var Me=we[pe];te+=Math.max(C,Math.min(B,Me[1]))-Math.max(C,Math.min(B,Me[0]))}return te}function Um(k,C,B){for(var te=[{fixed:-Lh,stretch:0}],pe=0,we=k;pe<we.length;pe+=1){var Me=we[pe],Ne=Me[0],rt=Me[1],vt=te[te.length-1];te.push({fixed:Ne-vt.stretch,stretch:vt.stretch}),te.push({fixed:Ne-vt.stretch,stretch:vt.stretch+(rt-Ne)})}return te.push({fixed:C+Lh,stretch:B}),te}function Lp(k,C,B,te){return k/C*B+te}function Pp(k,C,B,te){return k-C*B/te}function j2(k,C,B,te,pe,we,Me,Ne){for(var rt=te.layout.get("text-rotate").evaluate(we,{})*Math.PI/180,vt=[],mt=0,Ut=C.positionedLines;mt<Ut.length;mt+=1)for(var ir=Ut[mt],tr=0,xr=ir.positionedGlyphs;tr<xr.length;tr+=1){var Ur=xr[tr];if(!!Ur.rect){var hn=Ur.rect||{},an=1,Rn=wm+an,Mn=!0,Dn=1,Vn=0,qn=(pe||Ne)&&Ur.vertical,da=Ur.metrics.advance*Ur.scale/2;if(Ne&&C.verticalizable){var va=(Ur.scale-1)*Us,Wa=(Us-Ur.metrics.width*Ur.scale)/2;Vn=ir.lineOffset/2-(Ur.imageName?-Wa:va)}if(Ur.imageName){var Da=Me[Ur.imageName];Mn=Da.sdf,Dn=Da.pixelRatio,Rn=tu/Dn}var Oa=pe?[Ur.x+da,Ur.y]:[0,0],fi=pe?[0,0]:[Ur.x+da+B[0],Ur.y+B[1]-Vn],Ua=[0,0];qn&&(Ua=fi,fi=[0,0]);var Ha=(Ur.metrics.left-Rn)*Ur.scale-da+fi[0],bi=(-Ur.metrics.top-Rn)*Ur.scale+fi[1],ci=Ha+hn.w*Ur.scale/Dn,Vi=bi+hn.h*Ur.scale/Dn,lo=new v(Ha,bi),Hi=new v(ci,bi),Gi=new v(Ha,Vi),Ni=new v(ci,Vi);if(qn){var xo=new v(-da,da-Rv),Ao=-Math.PI/2,Yo=Us/2-da,Ko=Ur.imageName?Yo:0,Cs=new v(5-Rv-Yo,-Ko),us=new(Function.prototype.bind.apply(v,[null].concat(Ua)));lo._rotateAround(Ao,xo)._add(Cs)._add(us),Hi._rotateAround(Ao,xo)._add(Cs)._add(us),Gi._rotateAround(Ao,xo)._add(Cs)._add(us),Ni._rotateAround(Ao,xo)._add(Cs)._add(us)}if(rt){var cl=Math.sin(rt),fl=Math.cos(rt),Ls=[fl,-cl,cl,fl];lo._matMult(Ls),Hi._matMult(Ls),Gi._matMult(Ls),Ni._matMult(Ls)}var Tl=new v(0,0),Al=new v(0,0),_s=0,Ml=0;vt.push({tl:lo,tr:Hi,bl:Gi,br:Ni,tex:hn,writingMode:C.writingMode,glyphOffset:Oa,sectionIndex:Ur.sectionIndex,isSDF:Mn,pixelOffsetTL:Tl,pixelOffsetBR:Al,minFontScaleX:_s,minFontScaleY:Ml})}}return vt}var Dp=function(C,B,te,pe,we,Me,Ne,rt,vt,mt){if(this.boxStartIndex=C.length,vt){var Ut=Me.top,ir=Me.bottom,tr=Me.collisionPadding;tr&&(Ut-=tr[1],ir+=tr[3]);var xr=ir-Ut;xr>0&&(xr=Math.max(10,xr),this.circleDiameter=xr)}else{var Ur=Me.top*Ne-rt,hn=Me.bottom*Ne+rt,an=Me.left*Ne-rt,Rn=Me.right*Ne+rt,Mn=Me.collisionPadding;if(Mn&&(an-=Mn[0]*Ne,Ur-=Mn[1]*Ne,Rn+=Mn[2]*Ne,hn+=Mn[3]*Ne),mt){var Dn=new v(an,Ur),Vn=new v(Rn,Ur),qn=new v(an,hn),da=new v(Rn,hn),va=mt*Math.PI/180;Dn._rotate(va),Vn._rotate(va),qn._rotate(va),da._rotate(va),an=Math.min(Dn.x,Vn.x,qn.x,da.x),Rn=Math.max(Dn.x,Vn.x,qn.x,da.x),Ur=Math.min(Dn.y,Vn.y,qn.y,da.y),hn=Math.max(Dn.y,Vn.y,qn.y,da.y)}C.emplaceBack(B.x,B.y,an,Ur,Rn,hn,te,pe,we)}this.boxEndIndex=C.length},Ph=function(C,B){if(C===void 0&&(C=[]),B===void 0&&(B=Z2),this.data=C,this.length=this.data.length,this.compare=B,this.length>0)for(var te=(this.length>>1)-1;te>=0;te--)this._down(te)};Ph.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},Ph.prototype.pop=function(){if(this.length!==0){var C=this.data[0],B=this.data.pop();return this.length--,this.length>0&&(this.data[0]=B,this._down(0)),C}},Ph.prototype.peek=function(){return this.data[0]},Ph.prototype._up=function(C){for(var B=this,te=B.data,pe=B.compare,we=te[C];C>0;){var Me=C-1>>1,Ne=te[Me];if(pe(we,Ne)>=0)break;te[C]=Ne,C=Me}te[C]=we},Ph.prototype._down=function(C){for(var B=this,te=B.data,pe=B.compare,we=this.length>>1,Me=te[C];C<we;){var Ne=(C<<1)+1,rt=te[Ne],vt=Ne+1;if(vt<this.length&&pe(te[vt],rt)<0&&(Ne=vt,rt=te[vt]),pe(rt,Me)>=0)break;te[C]=rt,C=Ne}te[C]=Me};function Z2(k,C){return k<C?-1:k>C?1:0}function K2(k,C,B){C===void 0&&(C=1),B===void 0&&(B=!1);for(var te=1/0,pe=1/0,we=-1/0,Me=-1/0,Ne=k[0],rt=0;rt<Ne.length;rt++){var vt=Ne[rt];(!rt||vt.x<te)&&(te=vt.x),(!rt||vt.y<pe)&&(pe=vt.y),(!rt||vt.x>we)&&(we=vt.x),(!rt||vt.y>Me)&&(Me=vt.y)}var mt=we-te,Ut=Me-pe,ir=Math.min(mt,Ut),tr=ir/2,xr=new Ph([],$2);if(ir===0)return new v(te,pe);for(var Ur=te;Ur<we;Ur+=ir)for(var hn=pe;hn<Me;hn+=ir)xr.push(new Dh(Ur+tr,hn+tr,tr,k));for(var an=Q2(k),Rn=xr.length;xr.length;){var Mn=xr.pop();(Mn.d>an.d||!an.d)&&(an=Mn,B&&console.log("found best %d after %d probes",Math.round(1e4*Mn.d)/1e4,Rn)),!(Mn.max-an.d<=C)&&(tr=Mn.h/2,xr.push(new Dh(Mn.p.x-tr,Mn.p.y-tr,tr,k)),xr.push(new Dh(Mn.p.x+tr,Mn.p.y-tr,tr,k)),xr.push(new Dh(Mn.p.x-tr,Mn.p.y+tr,tr,k)),xr.push(new Dh(Mn.p.x+tr,Mn.p.y+tr,tr,k)),Rn+=4)}return B&&(console.log("num probes: "+Rn),console.log("best distance: "+an.d)),an.p}function $2(k,C){return C.max-k.max}function Dh(k,C,B,te){this.p=new v(k,C),this.h=B,this.d=J2(this.p,te),this.max=this.d+this.h*Math.SQRT2}function J2(k,C){for(var B=!1,te=1/0,pe=0;pe<C.length;pe++)for(var we=C[pe],Me=0,Ne=we.length,rt=Ne-1;Me<Ne;rt=Me++){var vt=we[Me],mt=we[rt];vt.y>k.y!=mt.y>k.y&&k.x<(mt.x-vt.x)*(k.y-vt.y)/(mt.y-vt.y)+vt.x&&(B=!B),te=Math.min(te,yc(k,vt,mt))}return(B?1:-1)*Math.sqrt(te)}function Q2(k){for(var C=0,B=0,te=0,pe=k[0],we=0,Me=pe.length,Ne=Me-1;we<Me;Ne=we++){var rt=pe[we],vt=pe[Ne],mt=rt.x*vt.y-vt.x*rt.y;B+=(rt.x+vt.x)*mt,te+=(rt.y+vt.y)*mt,C+=mt*3}return new Dh(B/C,te/C,0,k)}var Rh=7,o0=Number.POSITIVE_INFINITY;function Vm(k,C){function B(pe,we){var Me=0,Ne=0;we<0&&(we=0);var rt=we/Math.sqrt(2);switch(pe){case"top-right":case"top-left":Ne=rt-Rh;break;case"bottom-right":case"bottom-left":Ne=-rt+Rh;break;case"bottom":Ne=-we+Rh;break;case"top":Ne=we-Rh;break}switch(pe){case"top-right":case"bottom-right":Me=-rt;break;case"top-left":case"bottom-left":Me=rt;break;case"left":Me=we;break;case"right":Me=-we;break}return[Me,Ne]}function te(pe,we,Me){var Ne=0,rt=0;switch(we=Math.abs(we),Me=Math.abs(Me),pe){case"top-right":case"top-left":case"top":rt=Me-Rh;break;case"bottom-right":case"bottom-left":case"bottom":rt=-Me+Rh;break}switch(pe){case"top-right":case"bottom-right":case"right":Ne=-we;break;case"top-left":case"bottom-left":case"left":Ne=we;break}return[Ne,rt]}return C[1]!==o0?te(k,C[0],C[1]):B(k,C[0])}function q2(k,C,B,te,pe,we,Me){k.createArrays();var Ne=512*k.overscaling;k.tilePixelRatio=$a/Ne,k.compareText={},k.iconsNeedLinear=!1;var rt=k.layers[0].layout,vt=k.layers[0]._unevaluatedLayout._values,mt={};if(k.textSizeData.kind==="composite"){var Ut=k.textSizeData,ir=Ut.minZoom,tr=Ut.maxZoom;mt.compositeTextSizes=[vt["text-size"].possiblyEvaluate(new yi(ir),Me),vt["text-size"].possiblyEvaluate(new yi(tr),Me)]}if(k.iconSizeData.kind==="composite"){var xr=k.iconSizeData,Ur=xr.minZoom,hn=xr.maxZoom;mt.compositeIconSizes=[vt["icon-size"].possiblyEvaluate(new yi(Ur),Me),vt["icon-size"].possiblyEvaluate(new yi(hn),Me)]}mt.layoutTextSize=vt["text-size"].possiblyEvaluate(new yi(k.zoom+1),Me),mt.layoutIconSize=vt["icon-size"].possiblyEvaluate(new yi(k.zoom+1),Me),mt.textMaxSize=vt["text-size"].possiblyEvaluate(new yi(18));for(var an=rt.get("text-line-height")*Us,Rn=rt.get("text-rotation-alignment")==="map"&&rt.get("symbol-placement")!=="point",Mn=rt.get("text-keep-upright"),Dn=rt.get("text-size"),Vn=function(){var va=da[qn],Wa=rt.get("text-font").evaluate(va,{},Me).join(","),Da=Dn.evaluate(va,{},Me),Oa=mt.layoutTextSize.evaluate(va,{},Me),fi=mt.layoutIconSize.evaluate(va,{},Me),Ua={horizontal:{},vertical:void 0},Ha=va.text,bi=[0,0];if(Ha){var ci=Ha.toString(),Vi=rt.get("text-letter-spacing").evaluate(va,{},Me)*Us,lo=nn(ci)?Vi:0,Hi=rt.get("text-anchor").evaluate(va,{},Me),Gi=rt.get("text-variable-anchor");if(!Gi){var Ni=rt.get("text-radial-offset").evaluate(va,{},Me);Ni?bi=Vm(Hi,[Ni*Us,o0]):bi=rt.get("text-offset").evaluate(va,{},Me).map(function(jc){return jc*Us})}var xo=Rn?"center":rt.get("text-justify").evaluate(va,{},Me),Ao=rt.get("symbol-placement"),Yo=Ao==="point"?rt.get("text-max-width").evaluate(va,{},Me)*Us:0,Ko=function(){k.allowVerticalPlacement&&Cr(ci)&&(Ua.vertical=kp(Ha,C,B,pe,Wa,Yo,an,Hi,"left",lo,bi,_u.vertical,!0,Ao,Oa,Da))};if(!Rn&&Gi){for(var Cs=xo==="auto"?Gi.map(function(jc){return s0(jc)}):[xo],us=!1,cl=0;cl<Cs.length;cl++){var fl=Cs[cl];if(!Ua.horizontal[fl])if(us)Ua.horizontal[fl]=Ua.horizontal[0];else{var Ls=kp(Ha,C,B,pe,Wa,Yo,an,"center",fl,lo,bi,_u.horizontal,!1,Ao,Oa,Da);Ls&&(Ua.horizontal[fl]=Ls,us=Ls.positionedLines.length===1)}}Ko()}else{xo==="auto"&&(xo=s0(Hi));var Tl=kp(Ha,C,B,pe,Wa,Yo,an,Hi,xo,lo,bi,_u.horizontal,!1,Ao,Oa,Da);Tl&&(Ua.horizontal[xo]=Tl),Ko(),Cr(ci)&&Rn&&Mn&&(Ua.vertical=kp(Ha,C,B,pe,Wa,Yo,an,Hi,xo,lo,bi,_u.vertical,!1,Ao,Oa,Da))}}var Al=void 0,_s=!1;if(va.icon&&va.icon.name){var Ml=te[va.icon.name];Ml&&(Al=G2(pe[va.icon.name],rt.get("icon-offset").evaluate(va,{},Me),rt.get("icon-anchor").evaluate(va,{},Me)),_s=Ml.sdf,k.sdfIcons===void 0?k.sdfIcons=Ml.sdf:k.sdfIcons!==Ml.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ml.pixelRatio!==k.pixelRatio||rt.get("icon-rotate").constantOr(1)!==0)&&(k.iconsNeedLinear=!0))}var wu=Gm(Ua.horizontal)||Ua.vertical;k.iconsInText=wu?wu.iconsInText:!1,(wu||Al)&&ew(k,va,Ua,Al,te,mt,Oa,fi,bi,_s,Me)},qn=0,da=k.features;qn<da.length;qn+=1)Vn();we&&k.generateCollisionDebugBuffers()}function s0(k){switch(k){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ew(k,C,B,te,pe,we,Me,Ne,rt,vt,mt){var Ut=we.textMaxSize.evaluate(C,{});Ut===void 0&&(Ut=Me);var ir=k.layers[0].layout,tr=ir.get("icon-offset").evaluate(C,{},mt),xr=Gm(B.horizontal),Ur=24,hn=Me/Ur,an=k.tilePixelRatio*hn,Rn=k.tilePixelRatio*Ut/Ur,Mn=k.tilePixelRatio*Ne,Dn=k.tilePixelRatio*ir.get("symbol-spacing"),Vn=ir.get("text-padding")*k.tilePixelRatio,qn=ir.get("icon-padding")*k.tilePixelRatio,da=ir.get("text-max-angle")/180*Math.PI,va=ir.get("text-rotation-alignment")==="map"&&ir.get("symbol-placement")!=="point",Wa=ir.get("icon-rotation-alignment")==="map"&&ir.get("symbol-placement")!=="point",Da=ir.get("symbol-placement"),Oa=Dn/2,fi=ir.get("icon-text-fit"),Ua;te&&fi!=="none"&&(k.allowVerticalPlacement&&B.vertical&&(Ua=Lm(te,B.vertical,fi,ir.get("icon-text-fit-padding"),tr,hn)),xr&&(te=Lm(te,xr,fi,ir.get("icon-text-fit-padding"),tr,hn)));var Ha=function(Nh,ic){ic.x<0||ic.x>=$a||ic.y<0||ic.y>=$a||tw(k,ic,Nh,B,te,pe,Ua,k.layers[0],k.collisionBoxArray,C.index,C.sourceLayerIndex,k.index,an,Vn,va,rt,Mn,qn,Wa,tr,C,we,vt,mt,Me)};if(Da==="line")for(var bi=0,ci=Nm(C.geometry,0,0,$a,$a);bi<ci.length;bi+=1)for(var Vi=ci[bi],lo=X2(Vi,Dn,da,B.vertical||xr,te,Ur,Rn,k.overscaling,$a),Hi=0,Gi=lo;Hi<Gi.length;Hi+=1){var Ni=Gi[Hi],xo=xr;(!xo||!rw(k,xo.text,Oa,Ni))&&Ha(Vi,Ni)}else if(Da==="line-center")for(var Ao=0,Yo=C.geometry;Ao<Yo.length;Ao+=1){var Ko=Yo[Ao];if(Ko.length>1){var Cs=W2(Ko,da,B.vertical||xr,te,Ur,Rn);Cs&&Ha(Ko,Cs)}}else if(C.type==="Polygon")for(var us=0,cl=$d(C.geometry,0);us<cl.length;us+=1){var fl=cl[us],Ls=K2(fl,16);Ha(fl[0],new Ch(Ls.x,Ls.y,0))}else if(C.type==="LineString")for(var Tl=0,Al=C.geometry;Tl<Al.length;Tl+=1){var _s=Al[Tl];Ha(_s,new Ch(_s[0].x,_s[0].y,0))}else if(C.type==="Point")for(var Ml=0,wu=C.geometry;Ml<wu.length;Ml+=1)for(var jc=wu[Ml],df=0,gf=jc;df<gf.length;df+=1){var mf=gf[df];Ha([mf],new Ch(mf.x,mf.y,0))}}var Iv=255,vf=Iv*_c;function Hm(k,C,B,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr){var Ur=j2(C,B,Ne,pe,we,Me,te,k.allowVerticalPlacement),hn=k.textSizeData,an=null;hn.kind==="source"?(an=[_c*pe.layout.get("text-size").evaluate(Me,{})],an[0]>vf&&O(k.layerIds[0]+': Value for "text-size" is >= '+Iv+'. Reduce your "text-size".')):hn.kind==="composite"&&(an=[_c*tr.compositeTextSizes[0].evaluate(Me,{},xr),_c*tr.compositeTextSizes[1].evaluate(Me,{},xr)],(an[0]>vf||an[1]>vf)&&O(k.layerIds[0]+': Value for "text-size" is >= '+Iv+'. Reduce your "text-size".')),k.addSymbols(k.text,Ur,an,Ne,we,Me,vt,C,rt.lineStartIndex,rt.lineLength,ir,xr);for(var Rn=0,Mn=mt;Rn<Mn.length;Rn+=1){var Dn=Mn[Rn];Ut[Dn]=k.text.placedSymbolArray.length-1}return Ur.length*4}function Gm(k){for(var C in k)return k[C];return null}function tw(k,C,B,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir,tr,xr,Ur,hn,an,Rn,Mn,Dn,Vn,qn,da,va){var Wa,Da=k.addToLineVertexArray(C,B),Oa,fi,Ua,Ha,bi=0,ci=0,Vi=0,lo=0,Hi=-1,Gi=-1,Ni={},xo=Fe(""),Ao=0,Yo=0;if(Ne._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Wa=Ne.layout.get("text-offset").evaluate(Dn,{},da).map(function(Ov){return Ov*Us}),Ao=Wa[0],Yo=Wa[1]):(Ao=Ne.layout.get("text-radial-offset").evaluate(Dn,{},da)*Us,Yo=o0),k.allowVerticalPlacement&&te.vertical){var Ko=Ne.layout.get("text-rotate").evaluate(Dn,{},da),Cs=Ko+90,us=te.vertical;Ua=new Dp(rt,C,vt,mt,Ut,us,ir,tr,xr,Cs),Me&&(Ha=new Dp(rt,C,vt,mt,Ut,Me,hn,an,xr,Cs))}if(pe){var cl=Ne.layout.get("icon-rotate").evaluate(Dn,{}),fl=Ne.layout.get("icon-text-fit")!=="none",Ls=Bm(pe,cl,qn,fl),Tl=Me?Bm(Me,cl,qn,fl):void 0;fi=new Dp(rt,C,vt,mt,Ut,pe,hn,an,!1,cl),bi=Ls.length*4;var Al=k.iconSizeData,_s=null;Al.kind==="source"?(_s=[_c*Ne.layout.get("icon-size").evaluate(Dn,{})],_s[0]>vf&&O(k.layerIds[0]+': Value for "icon-size" is >= '+Iv+'. Reduce your "icon-size".')):Al.kind==="composite"&&(_s=[_c*Vn.compositeIconSizes[0].evaluate(Dn,{},da),_c*Vn.compositeIconSizes[1].evaluate(Dn,{},da)],(_s[0]>vf||_s[1]>vf)&&O(k.layerIds[0]+': Value for "icon-size" is >= '+Iv+'. Reduce your "icon-size".')),k.addSymbols(k.icon,Ls,_s,Mn,Rn,Dn,!1,C,Da.lineStartIndex,Da.lineLength,-1,da),Hi=k.icon.placedSymbolArray.length-1,Tl&&(ci=Tl.length*4,k.addSymbols(k.icon,Tl,_s,Mn,Rn,Dn,_u.vertical,C,Da.lineStartIndex,Da.lineLength,-1,da),Gi=k.icon.placedSymbolArray.length-1)}for(var Ml in te.horizontal){var wu=te.horizontal[Ml];if(!Oa){xo=Fe(wu.text);var jc=Ne.layout.get("text-rotate").evaluate(Dn,{},da);Oa=new Dp(rt,C,vt,mt,Ut,wu,ir,tr,xr,jc)}var df=wu.positionedLines.length===1;if(Vi+=Hm(k,C,wu,we,Ne,xr,Dn,Ur,Da,te.vertical?_u.horizontal:_u.horizontalOnly,df?Object.keys(te.horizontal):[Ml],Ni,Hi,Vn,da),df)break}te.vertical&&(lo+=Hm(k,C,te.vertical,we,Ne,xr,Dn,Ur,Da,_u.vertical,["vertical"],Ni,Gi,Vn,da));var gf=Oa?Oa.boxStartIndex:k.collisionBoxArray.length,mf=Oa?Oa.boxEndIndex:k.collisionBoxArray.length,Nh=Ua?Ua.boxStartIndex:k.collisionBoxArray.length,ic=Ua?Ua.boxEndIndex:k.collisionBoxArray.length,Op=fi?fi.boxStartIndex:k.collisionBoxArray.length,v0=fi?fi.boxEndIndex:k.collisionBoxArray.length,Np=Ha?Ha.boxStartIndex:k.collisionBoxArray.length,p0=Ha?Ha.boxEndIndex:k.collisionBoxArray.length,Hu=-1,Bh=function(Ov,iy){return Ov&&Ov.circleDiameter?Math.max(Ov.circleDiameter,iy):iy};Hu=Bh(Oa,Hu),Hu=Bh(Ua,Hu),Hu=Bh(fi,Hu),Hu=Bh(Ha,Hu);var Bp=Hu>-1?1:0;Bp&&(Hu*=va/Us),k.glyphOffsetArray.length>=so.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dn.sortKey!==void 0&&k.addToSortKeyRanges(k.symbolInstances.length,Dn.sortKey),k.symbolInstances.emplaceBack(C.x,C.y,Ni.right>=0?Ni.right:-1,Ni.center>=0?Ni.center:-1,Ni.left>=0?Ni.left:-1,Ni.vertical||-1,Hi,Gi,xo,gf,mf,Nh,ic,Op,v0,Np,p0,vt,Vi,lo,bi,ci,Bp,0,ir,Ao,Yo,Hu)}function rw(k,C,B,te){var pe=k.compareText;if(!(C in pe))pe[C]=[];else for(var we=pe[C],Me=we.length-1;Me>=0;Me--)if(te.dist(we[Me])<B)return!0;return pe[C].push(te),!1}var nw=Mh.VectorTileFeature.types,aw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Rp(k,C,B,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir){var tr=Ne?Math.min(vf,Math.round(Ne[0])):0,xr=Ne?Math.min(vf,Math.round(Ne[1])):0;k.emplaceBack(C,B,Math.round(te*32),Math.round(pe*32),we,Me,(tr<<1)+(rt?1:0),xr,vt*16,mt*16,Ut*256,ir*256)}function l0(k,C,B){k.emplaceBack(C.x,C.y,B),k.emplaceBack(C.x,C.y,B),k.emplaceBack(C.x,C.y,B),k.emplaceBack(C.x,C.y,B)}function iw(k){for(var C=0,B=k.sections;C<B.length;C+=1){var te=B[C];if(ha(te.text))return!0}return!1}var Ih=function(C){this.layoutVertexArray=new Cc,this.indexArray=new mc,this.programConfigurations=C,this.segments=new W,this.dynamicLayoutVertexArray=new gv,this.opacityVertexArray=new mv,this.placedSymbolArray=new uf};Ih.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ih.prototype.upload=function(C,B,te,pe){this.isEmpty()||(te&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,e0.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,B),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,o2.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,aw,!0),this.opacityVertexBuffer.itemSize=1),(te||pe)&&this.programConfigurations.upload(C))},Ih.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Be("SymbolBuffers",Ih);var Fv=function(C,B,te){this.layoutVertexArray=new C,this.layoutAttributes=B,this.indexArray=new te,this.segments=new W,this.collisionVertexArray=new Nl};Fv.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,s2.members,!0)},Fv.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Be("CollisionBuffers",Fv);var so=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(rt){return rt.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bh([]),this.placementViewportMatrix=bh([]);var B=this.layers[0],te=B._unevaluatedLayout._values;this.textSizeData=i0(this.zoom,te["text-size"]),this.iconSizeData=i0(this.zoom,te["icon-size"]);var pe=this.layers[0].layout,we=pe.get("symbol-sort-key"),Me=pe.get("symbol-z-order");this.sortFeaturesByKey=Me!=="viewport-y"&&we.constantOr(1)!==void 0;var Ne=Me==="viewport-y"||Me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ne&&(pe.get("text-allow-overlap")||pe.get("icon-allow-overlap")||pe.get("text-ignore-placement")||pe.get("icon-ignore-placement")),pe.get("symbol-placement")==="point"&&(this.writingModes=pe.get("text-writing-mode").map(function(rt){return _u[rt]})),this.stateDependentLayerIds=this.layers.filter(function(rt){return rt.isStateDependent()}).map(function(rt){return rt.id}),this.sourceID=C.sourceID};so.prototype.createArrays=function(){this.text=new Ih(new pi(e0.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new Ih(new pi(e0.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new Uu,this.lineVertexArray=new dp,this.symbolInstances=new pp},so.prototype.calculateGlyphDependencies=function(C,B,te,pe,we){for(var Me=0;Me<C.length;Me++)if(B[C.charCodeAt(Me)]=!0,(te||pe)&&we){var Ne=Lv[C.charAt(Me)];Ne&&(B[Ne.charCodeAt(0)]=!0)}},so.prototype.populate=function(C,B,te){var pe=this.layers[0],we=pe.layout,Me=we.get("text-font"),Ne=we.get("text-field"),rt=we.get("icon-image"),vt=(Ne.value.kind!=="constant"||Ne.value.value instanceof Zi&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Me.value.kind!=="constant"||Me.value.value.length>0),mt=rt.value.kind!=="constant"||!!rt.value.value||Object.keys(rt.parameters).length>0,Ut=we.get("symbol-sort-key");if(this.features=[],!(!vt&&!mt)){for(var ir=B.iconDependencies,tr=B.glyphDependencies,xr=B.availableImages,Ur=new yi(this.zoom),hn=0,an=C;hn<an.length;hn+=1){var Rn=an[hn],Mn=Rn.feature,Dn=Rn.id,Vn=Rn.index,qn=Rn.sourceLayerIndex,da=pe._featureFilter.needGeometry,va={type:Mn.type,id:Dn,properties:Mn.properties,geometry:da?to(Mn):[]};if(!!pe._featureFilter.filter(Ur,va,te)){da||(va.geometry=to(Mn));var Wa=void 0;if(vt){var Da=pe.getValueAndResolveTokens("text-field",va,te,xr),Oa=Zi.factory(Da);iw(Oa)&&(this.hasRTLText=!0),(!this.hasRTLText||Do()==="unavailable"||this.hasRTLText&&ii.isParsed())&&(Wa=c2(Oa,pe,va))}var fi=void 0;if(mt){var Ua=pe.getValueAndResolveTokens("icon-image",va,te,xr);Ua instanceof Io?fi=Ua:fi=Io.fromString(Ua)}if(!(!Wa&&!fi)){var Ha=this.sortFeaturesByKey?Ut.evaluate(va,{},te):void 0,bi={id:Dn,text:Wa,icon:fi,index:Vn,sourceLayerIndex:qn,geometry:to(Mn),properties:Mn.properties,type:nw[Mn.type],sortKey:Ha};if(this.features.push(bi),fi&&(ir[fi.name]=!0),Wa){var ci=Me.evaluate(va,{},te).join(","),Vi=we.get("text-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_u.vertical)>=0;for(var lo=0,Hi=Wa.sections;lo<Hi.length;lo+=1){var Gi=Hi[lo];if(Gi.image)ir[Gi.image.name]=!0;else{var Ni=Cr(Wa.toString()),xo=Gi.fontStack||ci,Ao=tr[xo]=tr[xo]||{};this.calculateGlyphDependencies(Gi.text,Ao,Vi,this.allowVerticalPlacement,Ni)}}}}}}we.get("symbol-placement")==="line"&&(this.features=f2(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Yo,Ko){return Yo.sortKey-Ko.sortKey})}},so.prototype.update=function(C,B,te){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,B,this.layers,te),this.icon.programConfigurations.updatePaintArrays(C,B,this.layers,te))},so.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},so.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},so.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},so.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},so.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},so.prototype.addToLineVertexArray=function(C,B){var te=this.lineVertexArray.length;if(C.segment!==void 0){for(var pe=C.dist(B[C.segment+1]),we=C.dist(B[C.segment]),Me={},Ne=C.segment+1;Ne<B.length;Ne++)Me[Ne]={x:B[Ne].x,y:B[Ne].y,tileUnitDistanceFromAnchor:pe},Ne<B.length-1&&(pe+=B[Ne+1].dist(B[Ne]));for(var rt=C.segment||0;rt>=0;rt--)Me[rt]={x:B[rt].x,y:B[rt].y,tileUnitDistanceFromAnchor:we},rt>0&&(we+=B[rt-1].dist(B[rt]));for(var vt=0;vt<B.length;vt++){var mt=Me[vt];this.lineVertexArray.emplaceBack(mt.x,mt.y,mt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:te,lineLength:this.lineVertexArray.length-te}},so.prototype.addSymbols=function(C,B,te,pe,we,Me,Ne,rt,vt,mt,Ut,ir){for(var tr=C.indexArray,xr=C.layoutVertexArray,Ur=C.segments.prepareSegment(4*B.length,xr,tr,Me.sortKey),hn=this.glyphOffsetArray.length,an=Ur.vertexLength,Rn=this.allowVerticalPlacement&&Ne===_u.vertical?Math.PI/2:0,Mn=Me.text&&Me.text.sections,Dn=0;Dn<B.length;Dn++){var Vn=B[Dn],qn=Vn.tl,da=Vn.tr,va=Vn.bl,Wa=Vn.br,Da=Vn.tex,Oa=Vn.pixelOffsetTL,fi=Vn.pixelOffsetBR,Ua=Vn.minFontScaleX,Ha=Vn.minFontScaleY,bi=Vn.glyphOffset,ci=Vn.isSDF,Vi=Vn.sectionIndex,lo=Ur.vertexLength,Hi=bi[1];Rp(xr,rt.x,rt.y,qn.x,Hi+qn.y,Da.x,Da.y,te,ci,Oa.x,Oa.y,Ua,Ha),Rp(xr,rt.x,rt.y,da.x,Hi+da.y,Da.x+Da.w,Da.y,te,ci,fi.x,Oa.y,Ua,Ha),Rp(xr,rt.x,rt.y,va.x,Hi+va.y,Da.x,Da.y+Da.h,te,ci,Oa.x,fi.y,Ua,Ha),Rp(xr,rt.x,rt.y,Wa.x,Hi+Wa.y,Da.x+Da.w,Da.y+Da.h,te,ci,fi.x,fi.y,Ua,Ha),l0(C.dynamicLayoutVertexArray,rt,Rn),tr.emplaceBack(lo,lo+1,lo+2),tr.emplaceBack(lo+1,lo+2,lo+3),Ur.vertexLength+=4,Ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bi[0]),(Dn===B.length-1||Vi!==B[Dn+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(xr.length,Me,Me.index,{},ir,Mn&&Mn[Vi])}C.placedSymbolArray.emplaceBack(rt.x,rt.y,hn,this.glyphOffsetArray.length-hn,an,vt,mt,rt.segment,te?te[0]:0,te?te[1]:0,pe[0],pe[1],Ne,0,!1,0,Ut)},so.prototype._addCollisionDebugVertex=function(C,B,te,pe,we,Me){return B.emplaceBack(0,0),C.emplaceBack(te.x,te.y,pe,we,Math.round(Me.x),Math.round(Me.y))},so.prototype.addCollisionDebugVertices=function(C,B,te,pe,we,Me,Ne){var rt=we.segments.prepareSegment(4,we.layoutVertexArray,we.indexArray),vt=rt.vertexLength,mt=we.layoutVertexArray,Ut=we.collisionVertexArray,ir=Ne.anchorX,tr=Ne.anchorY;this._addCollisionDebugVertex(mt,Ut,Me,ir,tr,new v(C,B)),this._addCollisionDebugVertex(mt,Ut,Me,ir,tr,new v(te,B)),this._addCollisionDebugVertex(mt,Ut,Me,ir,tr,new v(te,pe)),this._addCollisionDebugVertex(mt,Ut,Me,ir,tr,new v(C,pe)),rt.vertexLength+=4;var xr=we.indexArray;xr.emplaceBack(vt,vt+1),xr.emplaceBack(vt+1,vt+2),xr.emplaceBack(vt+2,vt+3),xr.emplaceBack(vt+3,vt),rt.primitiveLength+=4},so.prototype.addDebugCollisionBoxes=function(C,B,te,pe){for(var we=C;we<B;we++){var Me=this.collisionBoxArray.get(we),Ne=Me.x1,rt=Me.y1,vt=Me.x2,mt=Me.y2;this.addCollisionDebugVertices(Ne,rt,vt,mt,pe?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,te)}},so.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fv(dh,mm.members,Bf),this.iconCollisionBox=new Fv(dh,mm.members,Bf);for(var C=0;C<this.symbolInstances.length;C++){var B=this.symbolInstances.get(C);this.addDebugCollisionBoxes(B.textBoxStartIndex,B.textBoxEndIndex,B,!0),this.addDebugCollisionBoxes(B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B,!0),this.addDebugCollisionBoxes(B.iconBoxStartIndex,B.iconBoxEndIndex,B,!1),this.addDebugCollisionBoxes(B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex,B,!1)}},so.prototype._deserializeCollisionBoxesForSymbol=function(C,B,te,pe,we,Me,Ne,rt,vt){for(var mt={},Ut=B;Ut<te;Ut++){var ir=C.get(Ut);mt.textBox={x1:ir.x1,y1:ir.y1,x2:ir.x2,y2:ir.y2,anchorPointX:ir.anchorPointX,anchorPointY:ir.anchorPointY},mt.textFeatureIndex=ir.featureIndex;break}for(var tr=pe;tr<we;tr++){var xr=C.get(tr);mt.verticalTextBox={x1:xr.x1,y1:xr.y1,x2:xr.x2,y2:xr.y2,anchorPointX:xr.anchorPointX,anchorPointY:xr.anchorPointY},mt.verticalTextFeatureIndex=xr.featureIndex;break}for(var Ur=Me;Ur<Ne;Ur++){var hn=C.get(Ur);mt.iconBox={x1:hn.x1,y1:hn.y1,x2:hn.x2,y2:hn.y2,anchorPointX:hn.anchorPointX,anchorPointY:hn.anchorPointY},mt.iconFeatureIndex=hn.featureIndex;break}for(var an=rt;an<vt;an++){var Rn=C.get(an);mt.verticalIconBox={x1:Rn.x1,y1:Rn.y1,x2:Rn.x2,y2:Rn.y2,anchorPointX:Rn.anchorPointX,anchorPointY:Rn.anchorPointY},mt.verticalIconFeatureIndex=Rn.featureIndex;break}return mt},so.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var B=0;B<this.symbolInstances.length;B++){var te=this.symbolInstances.get(B);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,te.textBoxStartIndex,te.textBoxEndIndex,te.verticalTextBoxStartIndex,te.verticalTextBoxEndIndex,te.iconBoxStartIndex,te.iconBoxEndIndex,te.verticalIconBoxStartIndex,te.verticalIconBoxEndIndex))}},so.prototype.hasTextData=function(){return this.text.segments.get().length>0},so.prototype.hasIconData=function(){return this.icon.segments.get().length>0},so.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},so.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},so.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},so.prototype.addIndicesForPlacedSymbol=function(C,B){for(var te=C.placedSymbolArray.get(B),pe=te.vertexStartIndex+te.numGlyphs*4,we=te.vertexStartIndex;we<pe;we+=4)C.indexArray.emplaceBack(we,we+1,we+2),C.indexArray.emplaceBack(we+1,we+2,we+3)},so.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var B=Math.sin(C),te=Math.cos(C),pe=[],we=[],Me=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Me.push(Ne);var rt=this.symbolInstances.get(Ne);pe.push(Math.round(B*rt.anchorX+te*rt.anchorY)|0),we.push(rt.featureIndex)}return Me.sort(function(vt,mt){return pe[vt]-pe[mt]||we[mt]-we[vt]}),Me},so.prototype.addToSortKeyRanges=function(C,B){var te=this.sortKeyRanges[this.sortKeyRanges.length-1];te&&te.sortKey===B?te.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:B,symbolInstanceStart:C,symbolInstanceEnd:C+1})},so.prototype.sortFeatures=function(C){var B=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var te=0,pe=this.symbolInstanceIndexes;te<pe.length;te+=1){var we=pe[te],Me=this.symbolInstances.get(we);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Ne,rt,vt){Ne>=0&&vt.indexOf(Ne)===rt&&B.addIndicesForPlacedSymbol(B.text,Ne)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Be("SymbolBucket",so,{omit:["layers","collisionBoxArray","features","compareText"]}),so.MAX_GLYPHS=65535,so.addDynamicAttributes=l0;function ow(k,C){return C.replace(/{([^{}]+)}/g,function(B,te){return te in k?String(k[te]):""})}var sw=new fo({"symbol-placement":new Za(Yt.layout_symbol["symbol-placement"]),"symbol-spacing":new Za(Yt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Za(Yt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new oi(Yt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Za(Yt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Za(Yt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Za(Yt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Za(Yt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Za(Yt.layout_symbol["icon-rotation-alignment"]),"icon-size":new oi(Yt.layout_symbol["icon-size"]),"icon-text-fit":new Za(Yt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Za(Yt.layout_symbol["icon-text-fit-padding"]),"icon-image":new oi(Yt.layout_symbol["icon-image"]),"icon-rotate":new oi(Yt.layout_symbol["icon-rotate"]),"icon-padding":new Za(Yt.layout_symbol["icon-padding"]),"icon-keep-upright":new Za(Yt.layout_symbol["icon-keep-upright"]),"icon-offset":new oi(Yt.layout_symbol["icon-offset"]),"icon-anchor":new oi(Yt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Za(Yt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Za(Yt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Za(Yt.layout_symbol["text-rotation-alignment"]),"text-field":new oi(Yt.layout_symbol["text-field"]),"text-font":new oi(Yt.layout_symbol["text-font"]),"text-size":new oi(Yt.layout_symbol["text-size"]),"text-max-width":new oi(Yt.layout_symbol["text-max-width"]),"text-line-height":new Za(Yt.layout_symbol["text-line-height"]),"text-letter-spacing":new oi(Yt.layout_symbol["text-letter-spacing"]),"text-justify":new oi(Yt.layout_symbol["text-justify"]),"text-radial-offset":new oi(Yt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Za(Yt.layout_symbol["text-variable-anchor"]),"text-anchor":new oi(Yt.layout_symbol["text-anchor"]),"text-max-angle":new Za(Yt.layout_symbol["text-max-angle"]),"text-writing-mode":new Za(Yt.layout_symbol["text-writing-mode"]),"text-rotate":new oi(Yt.layout_symbol["text-rotate"]),"text-padding":new Za(Yt.layout_symbol["text-padding"]),"text-keep-upright":new Za(Yt.layout_symbol["text-keep-upright"]),"text-transform":new oi(Yt.layout_symbol["text-transform"]),"text-offset":new oi(Yt.layout_symbol["text-offset"]),"text-allow-overlap":new Za(Yt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Za(Yt.layout_symbol["text-ignore-placement"]),"text-optional":new Za(Yt.layout_symbol["text-optional"])}),lw=new fo({"icon-opacity":new oi(Yt.paint_symbol["icon-opacity"]),"icon-color":new oi(Yt.paint_symbol["icon-color"]),"icon-halo-color":new oi(Yt.paint_symbol["icon-halo-color"]),"icon-halo-width":new oi(Yt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new oi(Yt.paint_symbol["icon-halo-blur"]),"icon-translate":new Za(Yt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Za(Yt.paint_symbol["icon-translate-anchor"]),"text-opacity":new oi(Yt.paint_symbol["text-opacity"]),"text-color":new oi(Yt.paint_symbol["text-color"],{runtimeType:Yn,getOverride:function(k){return k.textColor},hasOverride:function(k){return!!k.textColor}}),"text-halo-color":new oi(Yt.paint_symbol["text-halo-color"]),"text-halo-width":new oi(Yt.paint_symbol["text-halo-width"]),"text-halo-blur":new oi(Yt.paint_symbol["text-halo-blur"]),"text-translate":new Za(Yt.paint_symbol["text-translate"]),"text-translate-anchor":new Za(Yt.paint_symbol["text-translate-anchor"])}),u0={paint:lw,layout:sw},Fh=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:_r,this.defaultValue=C};Fh.prototype.evaluate=function(C){if(C.formattedSection){var B=this.defaultValue.property.overrides;if(B&&B.hasOverride(C.formattedSection))return B.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},Fh.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var B=this.defaultValue.value;C(B._styleExpression.expression)}},Fh.prototype.outputDefined=function(){return!1},Fh.prototype.serialize=function(){return null},Be("FormatSectionOverride",Fh,{omit:["defaultValue"]});var uw=function(k){function C(B){k.call(this,B,u0)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(te,pe){if(k.prototype.recalculate.call(this,te,pe),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var we=this.layout.get("text-writing-mode");if(we){for(var Me=[],Ne=0,rt=we;Ne<rt.length;Ne+=1){var vt=rt[Ne];Me.indexOf(vt)<0&&Me.push(vt)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function(te,pe,we,Me){var Ne=this.layout.get(te).evaluate(pe,{},we,Me),rt=this._unevaluatedLayout._values[te];return!rt.isDataDriven()&&!Po(rt.value)&&Ne?ow(pe.properties,Ne):Ne},C.prototype.createBucket=function(te){return new so(te)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var te=0,pe=u0.paint.overridableProperties;te<pe.length;te+=1){var we=pe[te];if(!!C.hasPaintOverride(this.layout,we)){var Me=this.paint.get(we),Ne=new Fh(Me),rt=new zo(Ne,Me.property.specification),vt=null;Me.value.kind==="constant"||Me.value.kind==="source"?vt=new du("source",rt):vt=new ms("composite",rt,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[we]=new oo(Me.property,vt,Me.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,we){return!this.layout||pe.isDataDriven()||we.isDataDriven()?!1:C.hasPaintOverride(this.layout,te)},C.hasPaintOverride=function(te,pe){var we=te.get("text-field"),Me=u0.paint.properties[pe],Ne=!1,rt=function(Ut){for(var ir=0,tr=Ut;ir<tr.length;ir+=1){var xr=tr[ir];if(Me.overrides&&Me.overrides.hasOverride(xr)){Ne=!0;return}}};if(we.value.kind==="constant"&&we.value.value instanceof Zi)rt(we.value.value.sections);else if(we.value.kind==="source"){var vt=function(Ut){if(!Ne)if(Ut instanceof uo&&Fi(Ut.value)===Ma){var ir=Ut.value;rt(ir.sections)}else Ut instanceof cs?rt(Ut.sections):Ut.eachChild(vt)},mt=we.value;mt._styleExpression&&vt(mt._styleExpression.expression)}return Ne},C}(js),cw=new fo({"background-color":new Za(Yt.paint_background["background-color"]),"background-pattern":new wo(Yt.paint_background["background-pattern"]),"background-opacity":new Za(Yt.paint_background["background-opacity"])}),fw={paint:cw},hw=function(k){function C(B){k.call(this,B,fw)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(js),vw=new fo({"raster-opacity":new Za(Yt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Za(Yt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Za(Yt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Za(Yt.paint_raster["raster-brightness-max"]),"raster-saturation":new Za(Yt.paint_raster["raster-saturation"]),"raster-contrast":new Za(Yt.paint_raster["raster-contrast"]),"raster-resampling":new Za(Yt.paint_raster["raster-resampling"]),"raster-fade-duration":new Za(Yt.paint_raster["raster-fade-duration"])}),pw={paint:vw},dw=function(k){function C(B){k.call(this,B,pw)}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C}(js);function gw(k){var C=[],B=k.id;return B===void 0&&C.push({message:"layers."+B+': missing required property "id"'}),k.render===void 0&&C.push({message:"layers."+B+': missing required method "render"'}),k.renderingMode&&k.renderingMode!=="2d"&&k.renderingMode!=="3d"&&C.push({message:"layers."+B+': property "renderingMode" must be either "2d" or "3d"'}),C}var mw=function(k){function C(B){k.call(this,B,{}),this.implementation=B}return k&&(C.__proto__=k),C.prototype=Object.create(k&&k.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function(te){this.implementation.onAdd&&this.implementation.onAdd(te,te.painter.context.gl)},C.prototype.onRemove=function(te){this.implementation.onRemove&&this.implementation.onRemove(te,te.painter.context.gl)},C}(js),yw={circle:jb,heatmap:Jb,hillshade:e_,fill:M_,"fill-extrusion":W_,line:a2,symbol:uw,background:hw,raster:dw};function xw(k){return k.type==="custom"?new mw(k):new yw[k.type](k)}var Ym=self.HTMLImageElement,Wm=self.HTMLCanvasElement,Xm=self.HTMLVideoElement,jm=self.ImageData,Ip=self.ImageBitmap,Yf=function(C,B,te,pe){this.context=C,this.format=te,this.texture=C.gl.createTexture(),this.update(B,pe)};Yf.prototype.update=function(C,B,te){var pe=C.width,we=C.height,Me=(!this.size||this.size[0]!==pe||this.size[1]!==we)&&!te,Ne=this,rt=Ne.context,vt=rt.gl;if(this.useMipmap=Boolean(B&&B.useMipmap),vt.bindTexture(vt.TEXTURE_2D,this.texture),rt.pixelStoreUnpackFlipY.set(!1),rt.pixelStoreUnpack.set(1),rt.pixelStoreUnpackPremultiplyAlpha.set(this.format===vt.RGBA&&(!B||B.premultiply!==!1)),Me)this.size=[pe,we],C instanceof Ym||C instanceof Wm||C instanceof Xm||C instanceof jm||Ip&&C instanceof Ip?vt.texImage2D(vt.TEXTURE_2D,0,this.format,this.format,vt.UNSIGNED_BYTE,C):vt.texImage2D(vt.TEXTURE_2D,0,this.format,pe,we,0,this.format,vt.UNSIGNED_BYTE,C.data);else{var mt=te||{x:0,y:0},Ut=mt.x,ir=mt.y;C instanceof Ym||C instanceof Wm||C instanceof Xm||C instanceof jm||Ip&&C instanceof Ip?vt.texSubImage2D(vt.TEXTURE_2D,0,Ut,ir,vt.RGBA,vt.UNSIGNED_BYTE,C):vt.texSubImage2D(vt.TEXTURE_2D,0,Ut,ir,pe,we,vt.RGBA,vt.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&vt.generateMipmap(vt.TEXTURE_2D)},Yf.prototype.bind=function(C,B,te){var pe=this,we=pe.context,Me=we.gl;Me.bindTexture(Me.TEXTURE_2D,this.texture),te===Me.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(te=Me.LINEAR),C!==this.filter&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,C),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,te||C),this.filter=C),B!==this.wrap&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,B),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,B),this.wrap=B)},Yf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Yf.prototype.destroy=function(){var C=this.context,B=C.gl;B.deleteTexture(this.texture),this.texture=null};var c0=function(C){var B=this;this._callback=C,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){B._triggered=!1,B._callback()})};c0.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},c0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var zh=function(C,B,te){this.target=C,this.parent=B,this.mapId=te,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},E(["receive","process"],this),this.invoker=new c0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?C:self};zh.prototype.send=function(C,B,te,pe,we){var Me=this;we===void 0&&(we=!1);var Ne=Math.round(Math.random()*1e18).toString(36).substring(0,10);te&&(this.callbacks[Ne]=te);var rt=ie(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:C,hasCallback:!!te,targetMapId:pe,mustQueue:we,sourceMapId:this.mapId,data:It(B,rt)},rt),{cancel:function(){te&&delete Me.callbacks[Ne],Me.target.postMessage({id:Ne,type:"<cancel>",targetMapId:pe,sourceMapId:Me.mapId})}}},zh.prototype.receive=function(C){var B=C.data,te=B.id;if(!!te&&!(B.targetMapId&&this.mapId!==B.targetMapId))if(B.type==="<cancel>"){delete this.tasks[te];var pe=this.cancelCallbacks[te];delete this.cancelCallbacks[te],pe&&pe()}else ee()||B.mustQueue?(this.tasks[te]=B,this.taskQueue.push(te),this.invoker.trigger()):this.processTask(te,B)},zh.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),B=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),B&&this.processTask(C,B)}},zh.prototype.processTask=function(C,B){var te=this;if(B.type==="<response>"){var pe=this.callbacks[C];delete this.callbacks[C],pe&&(B.error?pe(qt(B.error)):pe(null,qt(B.data)))}else{var we=!1,Me=ie(this.globalScope)?void 0:[],Ne=B.hasCallback?function(ir,tr){we=!0,delete te.cancelCallbacks[C],te.target.postMessage({id:C,type:"<response>",sourceMapId:te.mapId,error:ir?It(ir):null,data:It(tr,Me)},Me)}:function(ir){we=!0},rt=null,vt=qt(B.data);if(this.parent[B.type])rt=this.parent[B.type](B.sourceMapId,vt,Ne);else if(this.parent.getWorkerSource){var mt=B.type.split("."),Ut=this.parent.getWorkerSource(B.sourceMapId,mt[0],vt.source);rt=Ut[mt[1]](vt,Ne)}else Ne(new Error("Could not find function "+B.type));!we&&rt&&rt.cancel&&(this.cancelCallbacks[C]=rt.cancel)}},zh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function bw(k,C,B){C=Math.pow(2,B)-C-1;var te=Zm(k*256,C*256,B),pe=Zm((k+1)*256,(C+1)*256,B);return te[0]+","+te[1]+","+pe[0]+","+pe[1]}function Zm(k,C,B){var te=2*Math.PI*6378137/256/Math.pow(2,B),pe=k*te-2*Math.PI*6378137/2,we=C*te-2*Math.PI*6378137/2;return[pe,we]}var ss=function(C,B){C&&(B?this.setSouthWest(C).setNorthEast(B):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};ss.prototype.setNorthEast=function(C){return this._ne=C instanceof Ro?new Ro(C.lng,C.lat):Ro.convert(C),this},ss.prototype.setSouthWest=function(C){return this._sw=C instanceof Ro?new Ro(C.lng,C.lat):Ro.convert(C),this},ss.prototype.extend=function(C){var B=this._sw,te=this._ne,pe,we;if(C instanceof Ro)pe=C,we=C;else if(C instanceof ss){if(pe=C._sw,we=C._ne,!pe||!we)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var Me=C;return this.extend(ss.convert(Me))}else{var Ne=C;return this.extend(Ro.convert(Ne))}return this}return!B&&!te?(this._sw=new Ro(pe.lng,pe.lat),this._ne=new Ro(we.lng,we.lat)):(B.lng=Math.min(pe.lng,B.lng),B.lat=Math.min(pe.lat,B.lat),te.lng=Math.max(we.lng,te.lng),te.lat=Math.max(we.lat,te.lat)),this},ss.prototype.getCenter=function(){return new Ro((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ss.prototype.getSouthWest=function(){return this._sw},ss.prototype.getNorthEast=function(){return this._ne},ss.prototype.getNorthWest=function(){return new Ro(this.getWest(),this.getNorth())},ss.prototype.getSouthEast=function(){return new Ro(this.getEast(),this.getSouth())},ss.prototype.getWest=function(){return this._sw.lng},ss.prototype.getSouth=function(){return this._sw.lat},ss.prototype.getEast=function(){return this._ne.lng},ss.prototype.getNorth=function(){return this._ne.lat},ss.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ss.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ss.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ss.prototype.contains=function(C){var B=Ro.convert(C),te=B.lng,pe=B.lat,we=this._sw.lat<=pe&&pe<=this._ne.lat,Me=this._sw.lng<=te&&te<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=te&&te>=this._ne.lng),we&&Me},ss.convert=function(C){return!C||C instanceof ss?C:new ss(C)};var Km=63710088e-1,Ro=function(C,B){if(isNaN(C)||isNaN(B))throw new Error("Invalid LngLat object: ("+C+", "+B+")");if(this.lng=+C,this.lat=+B,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ro.prototype.wrap=function(){return new Ro(y(this.lng,-180,180),this.lat)},Ro.prototype.toArray=function(){return[this.lng,this.lat]},Ro.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ro.prototype.distanceTo=function(C){var B=Math.PI/180,te=this.lat*B,pe=C.lat*B,we=Math.sin(te)*Math.sin(pe)+Math.cos(te)*Math.cos(pe)*Math.cos((C.lng-this.lng)*B),Me=Km*Math.acos(Math.min(we,1));return Me},Ro.prototype.toBounds=function(C){C===void 0&&(C=0);var B=40075017,te=360*C/B,pe=te/Math.cos(Math.PI/180*this.lat);return new ss(new Ro(this.lng-pe,this.lat-te),new Ro(this.lng+pe,this.lat+te))},Ro.convert=function(C){if(C instanceof Ro)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new Ro(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new Ro(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var $m=2*Math.PI*Km;function Jm(k){return $m*Math.cos(k*Math.PI/180)}function Qm(k){return(180+k)/360}function qm(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function ey(k,C){return k/Jm(C)}function _w(k){return k*360-180}function f0(k){var C=180-k*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function ww(k,C){return k*Jm(f0(C))}function Tw(k){return 1/Math.cos(k*Math.PI/180)}var Wf=function(C,B,te){te===void 0&&(te=0),this.x=+C,this.y=+B,this.z=+te};Wf.fromLngLat=function(C,B){B===void 0&&(B=0);var te=Ro.convert(C);return new Wf(Qm(te.lng),qm(te.lat),ey(B,te.lat))},Wf.prototype.toLngLat=function(){return new Ro(_w(this.x),f0(this.y))},Wf.prototype.toAltitude=function(){return ww(this.z,this.y)},Wf.prototype.meterInMercatorCoordinateUnits=function(){return 1/$m*Tw(f0(this.y))};var Xf=function(C,B,te){this.z=C,this.x=B,this.y=te,this.key=zv(0,C,C,B,te)};Xf.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},Xf.prototype.url=function(C,B){var te=bw(this.x,this.y,this.z),pe=Aw(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(B==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pe).replace("{bbox-epsg-3857}",te)},Xf.prototype.getTilePoint=function(C){var B=Math.pow(2,this.z);return new v((C.x*B-this.x)*$a,(C.y*B-this.y)*$a)},Xf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ty=function(C,B){this.wrap=C,this.canonical=B,this.key=zv(C,B.z,B.z,B.x,B.y)},ls=function(C,B,te,pe,we){this.overscaledZ=C,this.wrap=B,this.canonical=new Xf(te,+pe,+we),this.key=zv(B,C,te,pe,we)};ls.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},ls.prototype.scaledTo=function(C){var B=this.canonical.z-C;return C>this.canonical.z?new ls(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ls(C,this.wrap,C,this.canonical.x>>B,this.canonical.y>>B)},ls.prototype.calculateScaledKey=function(C,B){var te=this.canonical.z-C;return C>this.canonical.z?zv(this.wrap*+B,C,this.canonical.z,this.canonical.x,this.canonical.y):zv(this.wrap*+B,C,C,this.canonical.x>>te,this.canonical.y>>te)},ls.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var B=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>B&&C.canonical.y===this.canonical.y>>B},ls.prototype.children=function(C){if(this.overscaledZ>=C)return[new ls(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var B=this.canonical.z+1,te=this.canonical.x*2,pe=this.canonical.y*2;return[new ls(B,this.wrap,B,te,pe),new ls(B,this.wrap,B,te+1,pe),new ls(B,this.wrap,B,te,pe+1),new ls(B,this.wrap,B,te+1,pe+1)]},ls.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},ls.prototype.wrapped=function(){return new ls(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ls.prototype.unwrapTo=function(C){return new ls(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},ls.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ls.prototype.toUnwrapped=function(){return new ty(this.wrap,this.canonical)},ls.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ls.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new Wf(C.x-this.wrap,C.y))};function zv(k,C,B,te,pe){k*=2,k<0&&(k=k*-1-1);var we=1<<B;return(we*we*k+we*pe+te).toString(36)+B.toString(36)+C.toString(36)}function Aw(k,C,B){for(var te="",pe,we=k;we>0;we--)pe=1<<we-1,te+=(C&pe?1:0)+(B&pe?2:0);return te}Be("CanonicalTileID",Xf),Be("OverscaledTileID",ls,{omit:["posMatrix"]});var Wc=function(C,B,te){if(this.uid=C,B.height!==B.width)throw new RangeError("DEM tiles must be square");if(te&&te!=="mapbox"&&te!=="terrarium")return O('"'+te+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=B.height;var pe=this.dim=B.height-2;this.data=new Uint32Array(B.data.buffer),this.encoding=te||"mapbox";for(var we=0;we<pe;we++)this.data[this._idx(-1,we)]=this.data[this._idx(0,we)],this.data[this._idx(pe,we)]=this.data[this._idx(pe-1,we)],this.data[this._idx(we,-1)]=this.data[this._idx(we,0)],this.data[this._idx(we,pe)]=this.data[this._idx(we,pe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe-1,0)],this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe-1)],this.data[this._idx(pe,pe)]=this.data[this._idx(pe-1,pe-1)]};Wc.prototype.get=function(C,B){var te=new Uint8Array(this.data.buffer),pe=this._idx(C,B)*4,we=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return we(te[pe],te[pe+1],te[pe+2])},Wc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Wc.prototype._idx=function(C,B){if(C<-1||C>=this.dim+1||B<-1||B>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(B+1)*this.stride+(C+1)},Wc.prototype._unpackMapbox=function(C,B,te){return(C*256*256+B*256+te)/10-1e4},Wc.prototype._unpackTerrarium=function(C,B,te){return C*256+B+te/256-32768},Wc.prototype.getPixels=function(){return new Vl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Wc.prototype.backfillBorder=function(C,B,te){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var pe=B*this.dim,we=B*this.dim+this.dim,Me=te*this.dim,Ne=te*this.dim+this.dim;switch(B){case-1:pe=we-1;break;case 1:we=pe+1;break}switch(te){case-1:Me=Ne-1;break;case 1:Ne=Me+1;break}for(var rt=-B*this.dim,vt=-te*this.dim,mt=Me;mt<Ne;mt++)for(var Ut=pe;Ut<we;Ut++)this.data[this._idx(Ut,mt)]=C.data[this._idx(Ut+rt,mt+vt)]},Be("DEMData",Wc);function Mw(k,C){var B={};if(!C)return B;for(var te=function(){var Me=we[pe],Ne=Me.layerIds.map(function(Ut){return C.getLayer(Ut)}).filter(Boolean);if(Ne.length!==0){Me.layers=Ne,Me.stateDependentLayerIds&&(Me.stateDependentLayers=Me.stateDependentLayerIds.map(function(Ut){return Ne.filter(function(ir){return ir.id===Ut})[0]}));for(var rt=0,vt=Ne;rt<vt.length;rt+=1){var mt=vt[rt];B[mt.id]=Me}}},pe=0,we=k;pe<we.length;pe+=1)te();return B}var Fp=function(C){this._stringToNumber={},this._numberToString=[];for(var B=0;B<C.length;B++){var te=C[B];this._stringToNumber[te]=B,this._numberToString[B]=te}};Fp.prototype.encode=function(C){return this._stringToNumber[C]},Fp.prototype.decode=function(C){return this._numberToString[C]};var zp=function(C,B,te,pe,we){this.type="Feature",this._vectorTileFeature=C,C._z=B,C._x=te,C._y=pe,this.properties=C.properties,this.id=we},h0={geometry:{configurable:!0}};h0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},h0.geometry.set=function(k){this._geometry=k},zp.prototype.toJSON=function(){var C={geometry:this.geometry};for(var B in this)B==="_geometry"||B==="_vectorTileFeature"||(C[B]=this[B]);return C},Object.defineProperties(zp.prototype,h0);var Oh=function(){this.state={},this.stateChanges={},this.deletedStates={}};Oh.prototype.updateState=function(C,B,te){var pe=String(B);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][pe]=this.stateChanges[C][pe]||{},M(this.stateChanges[C][pe],te),this.deletedStates[C]===null){this.deletedStates[C]={};for(var we in this.state[C])we!==pe&&(this.deletedStates[C][we]=null)}else{var Me=this.deletedStates[C]&&this.deletedStates[C][pe]===null;if(Me){this.deletedStates[C][pe]={};for(var Ne in this.state[C][pe])te[Ne]||(this.deletedStates[C][pe][Ne]=null)}else for(var rt in te){var vt=this.deletedStates[C]&&this.deletedStates[C][pe]&&this.deletedStates[C][pe][rt]===null;vt&&delete this.deletedStates[C][pe][rt]}}},Oh.prototype.removeFeatureState=function(C,B,te){var pe=this.deletedStates[C]===null;if(!pe){var we=String(B);if(this.deletedStates[C]=this.deletedStates[C]||{},te&&B!==void 0)this.deletedStates[C][we]!==null&&(this.deletedStates[C][we]=this.deletedStates[C][we]||{},this.deletedStates[C][we][te]=null);else if(B!==void 0){var Me=this.stateChanges[C]&&this.stateChanges[C][we];if(Me){this.deletedStates[C][we]={};for(te in this.stateChanges[C][we])this.deletedStates[C][we][te]=null}else this.deletedStates[C][we]=null}else this.deletedStates[C]=null}},Oh.prototype.getState=function(C,B){var te=String(B),pe=this.state[C]||{},we=this.stateChanges[C]||{},Me=M({},pe[te],we[te]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Ne=this.deletedStates[C][B];if(Ne===null)return{};for(var rt in Ne)delete Me[rt]}return Me},Oh.prototype.initializeTileState=function(C,B){C.setFeatureState(this.state,B)},Oh.prototype.coalesceChanges=function(C,B){var te={};for(var pe in this.stateChanges){this.state[pe]=this.state[pe]||{};var we={};for(var Me in this.stateChanges[pe])this.state[pe][Me]||(this.state[pe][Me]={}),M(this.state[pe][Me],this.stateChanges[pe][Me]),we[Me]=this.state[pe][Me];te[pe]=we}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var rt={};if(this.deletedStates[Ne]===null)for(var vt in this.state[Ne])rt[vt]={},this.state[Ne][vt]={};else for(var mt in this.deletedStates[Ne]){var Ut=this.deletedStates[Ne][mt]===null;if(Ut)this.state[Ne][mt]={};else for(var ir=0,tr=Object.keys(this.deletedStates[Ne][mt]);ir<tr.length;ir+=1){var xr=tr[ir];delete this.state[Ne][mt][xr]}rt[mt]=this.state[Ne][mt]}te[Ne]=te[Ne]||{},M(te[Ne],rt)}if(this.stateChanges={},this.deletedStates={},Object.keys(te).length!==0)for(var Ur in C){var hn=C[Ur];hn.setFeatureState(te,B)}};var Xc=function(C,B){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new $i($a,16,0),this.grid3D=new $i($a,16,0),this.featureIndexArray=new _v,this.promoteId=B};Xc.prototype.insert=function(C,B,te,pe,we,Me){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(te,pe,we);for(var rt=Me?this.grid3D:this.grid,vt=0;vt<B.length;vt++){for(var mt=B[vt],Ut=[1/0,1/0,-1/0,-1/0],ir=0;ir<mt.length;ir++){var tr=mt[ir];Ut[0]=Math.min(Ut[0],tr.x),Ut[1]=Math.min(Ut[1],tr.y),Ut[2]=Math.max(Ut[2],tr.x),Ut[3]=Math.max(Ut[3],tr.y)}Ut[0]<$a&&Ut[1]<$a&&Ut[2]>=0&&Ut[3]>=0&&rt.insert(Ne,Ut[0],Ut[1],Ut[2],Ut[3])}},Xc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Mh.VectorTile(new Mp(this.rawTileData)).layers,this.sourceLayerCoder=new Fp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Xc.prototype.query=function(C,B,te,pe){var we=this;this.loadVTLayers();for(var Me=C.params||{},Ne=$a/C.tileSize/C.scale,rt=qu(Me.filter),vt=C.queryGeometry,mt=C.queryPadding*Ne,Ut=ny(vt),ir=this.grid.query(Ut.minX-mt,Ut.minY-mt,Ut.maxX+mt,Ut.maxY+mt),tr=ny(C.cameraQueryGeometry),xr=this.grid3D.query(tr.minX-mt,tr.minY-mt,tr.maxX+mt,tr.maxY+mt,function(qn,da,va,Wa){return Rc(C.cameraQueryGeometry,qn-mt,da-mt,va+mt,Wa+mt)}),Ur=0,hn=xr;Ur<hn.length;Ur+=1){var an=hn[Ur];ir.push(an)}ir.sort(Ew);for(var Rn={},Mn,Dn=function(qn){var da=ir[qn];if(da!==Mn){Mn=da;var va=we.featureIndexArray.get(da),Wa=null;we.loadMatchingFeature(Rn,va.bucketIndex,va.sourceLayerIndex,va.featureIndex,rt,Me.layers,Me.availableImages,B,te,pe,function(Da,Oa,fi){return Wa||(Wa=to(Da)),Oa.queryIntersectsFeature(vt,Da,fi,Wa,we.z,C.transform,Ne,C.pixelPosMatrix)})}},Vn=0;Vn<ir.length;Vn++)Dn(Vn);return Rn},Xc.prototype.loadMatchingFeature=function(C,B,te,pe,we,Me,Ne,rt,vt,mt,Ut){var ir=this.bucketLayerIDs[B];if(!(Me&&!D(Me,ir))){var tr=this.sourceLayerCoder.decode(te),xr=this.vtLayers[tr],Ur=xr.feature(pe);if(!!we.filter(new yi(this.tileID.overscaledZ),Ur))for(var hn=this.getId(Ur,tr),an=0;an<ir.length;an++){var Rn=ir[an];if(!(Me&&Me.indexOf(Rn)<0)){var Mn=rt[Rn];if(!!Mn){var Dn={};hn!==void 0&&mt&&(Dn=mt.getState(Mn.sourceLayer||"_geojsonTileLayer",hn));var Vn=vt[Rn];Vn.paint=ry(Vn.paint,Mn.paint,Ur,Dn,Ne),Vn.layout=ry(Vn.layout,Mn.layout,Ur,Dn,Ne);var qn=!Ut||Ut(Ur,Mn,Dn);if(!!qn){var da=new zp(Ur,this.z,this.x,this.y,hn);da.layer=Vn;var va=C[Rn];va===void 0&&(va=C[Rn]=[]),va.push({featureIndex:pe,feature:da,intersectionZ:qn})}}}}}},Xc.prototype.lookupSymbolFeatures=function(C,B,te,pe,we,Me,Ne,rt){var vt={};this.loadVTLayers();for(var mt=qu(we),Ut=0,ir=C;Ut<ir.length;Ut+=1){var tr=ir[Ut];this.loadMatchingFeature(vt,te,pe,tr,mt,Me,Ne,rt,B)}return vt},Xc.prototype.hasLayer=function(C){for(var B=0,te=this.bucketLayerIDs;B<te.length;B+=1)for(var pe=te[B],we=0,Me=pe;we<Me.length;we+=1){var Ne=Me[we];if(C===Ne)return!0}return!1},Xc.prototype.getId=function(C,B){var te=C.id;if(this.promoteId){var pe=typeof this.promoteId=="string"?this.promoteId:this.promoteId[B];te=C.properties[pe],typeof te=="boolean"&&(te=Number(te))}return te},Be("FeatureIndex",Xc,{omit:["rawTileData","sourceLayerCoder"]});function ry(k,C,B,te,pe){return P(k,function(we,Me){var Ne=C instanceof eo?C.get(Me):null;return Ne&&Ne.evaluate?Ne.evaluate(B,te,pe):Ne})}function ny(k){for(var C=1/0,B=1/0,te=-1/0,pe=-1/0,we=0,Me=k;we<Me.length;we+=1){var Ne=Me[we];C=Math.min(C,Ne.x),B=Math.min(B,Ne.y),te=Math.max(te,Ne.x),pe=Math.max(pe,Ne.y)}return{minX:C,minY:B,maxX:te,maxY:pe}}function Ew(k,C){return C-k}var Sw=3e4,ks=function(C,B){this.tileID=C,this.uid=_(),this.uses=0,this.tileSize=B,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ks.prototype.registerFadeDuration=function(C){var B=C+this.timeAdded;B<Q.now()||this.fadeEndTime&&B<this.fadeEndTime||(this.fadeEndTime=B)},ks.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ks.prototype.loadVectorData=function(C,B,te){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Dc;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=Mw(C.buckets,B.style),this.hasSymbolBuckets=!1;for(var pe in this.buckets){var we=this.buckets[pe];if(we instanceof so)if(this.hasSymbolBuckets=!0,te)we.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Ne=this.buckets[Me];if(Ne instanceof so&&Ne.hasRTLText){this.hasRTLText=!0,Ui();break}}this.queryPadding=0;for(var rt in this.buckets){var vt=this.buckets[rt];this.queryPadding=Math.max(this.queryPadding,B.style.getLayer(rt).queryRadius(vt))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},ks.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ks.prototype.getBucket=function(C){return this.buckets[C.id]},ks.prototype.upload=function(C){for(var B in this.buckets){var te=this.buckets[B];te.uploadPending()&&te.upload(C)}var pe=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Yf(C,this.imageAtlas.image,pe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Yf(C,this.glyphAtlasImage,pe.ALPHA),this.glyphAtlasImage=null)},ks.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},ks.prototype.queryRenderedFeatures=function(C,B,te,pe,we,Me,Ne,rt,vt,mt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:pe,cameraQueryGeometry:we,scale:Me,tileSize:this.tileSize,pixelPosMatrix:mt,transform:rt,params:Ne,queryPadding:this.queryPadding*vt},C,B,te)},ks.prototype.querySourceFeatures=function(C,B){var te=this.latestFeatureIndex;if(!(!te||!te.rawTileData)){var pe=te.loadVTLayers(),we=B?B.sourceLayer:"",Me=pe._geojsonTileLayer||pe[we];if(!!Me)for(var Ne=qu(B&&B.filter),rt=this.tileID.canonical,vt=rt.z,mt=rt.x,Ut=rt.y,ir={z:vt,x:mt,y:Ut},tr=0;tr<Me.length;tr++){var xr=Me.feature(tr);if(Ne.filter(new yi(this.tileID.overscaledZ),xr)){var Ur=te.getId(xr,we),hn=new zp(xr,vt,mt,Ut,Ur);hn.tile=ir,C.push(hn)}}}},ks.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ks.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ks.prototype.setExpiryData=function(C){var B=this.expirationTime;if(C.cacheControl){var te=j(C.cacheControl);te["max-age"]&&(this.expirationTime=Date.now()+te["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var pe=Date.now(),we=!1;if(this.expirationTime>pe)we=!1;else if(!B)we=!0;else if(this.expirationTime<B)we=!0;else{var Me=this.expirationTime-B;Me?this.expirationTime=pe+Math.max(Me,Sw):we=!0}we?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ks.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ks.prototype.setFeatureState=function(C,B){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var te=this.latestFeatureIndex.loadVTLayers();for(var pe in this.buckets)if(!!B.style.hasLayer(pe)){var we=this.buckets[pe],Me=we.layers[0].sourceLayer||"_geojsonTileLayer",Ne=te[Me],rt=C[Me];if(!(!Ne||!rt||Object.keys(rt).length===0)){we.update(rt,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var vt=B&&B.style&&B.style.getLayer(pe);vt&&(this.queryPadding=Math.max(this.queryPadding,vt.queryRadius(we)))}}}},ks.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ks.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},ks.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ks.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=Q.now()+C},ks.prototype.setDependencies=function(C,B){for(var te={},pe=0,we=B;pe<we.length;pe+=1){var Me=we[pe];te[Me]=!0}this.dependencies[C]=te},ks.prototype.hasDependency=function(C,B){for(var te=0,pe=C;te<pe.length;te+=1){var we=pe[te],Me=this.dependencies[we];if(Me)for(var Ne=0,rt=B;Ne<rt.length;Ne+=1){var vt=rt[Ne];if(Me[vt])return!0}}return!1};var kw=["type","source","source-layer","minzoom","maxzoom","filter","layout"],pf=self.performance,ay=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},pf.mark(this._marks.start)};ay.prototype.finish=function(){pf.mark(this._marks.end);var C=pf.getEntriesByName(this._marks.measure);return C.length===0&&(pf.measure(this._marks.measure,this._marks.start,this._marks.end),C=pf.getEntriesByName(this._marks.measure),pf.clearMarks(this._marks.start),pf.clearMarks(this._marks.end),pf.clearMeasures(this._marks.measure)),C},e.Actor=zh,e.AlphaImage=Gf,e.CanonicalTileID=Xf,e.CollisionBoxArray=Dc,e.Color=Ai,e.DEMData=Wc,e.DataConstantProperty=Za,e.DictionaryCoder=Fp,e.EXTENT=$a,e.ErrorEvent=Ar,e.EvaluationParameters=yi,e.Event=Pr,e.Evented=Er,e.FeatureIndex=Xc,e.FillBucket=xc,e.FillExtrusionBucket=bc,e.ImageAtlas=Dv,e.ImagePosition=Sp,e.LineBucket=Hl,e.LngLat=Ro,e.LngLatBounds=ss,e.MercatorCoordinate=Wf,e.ONE_EM=Us,e.OverscaledTileID=ls,e.Point=v,e.Point$1=v,e.Properties=fo,e.Protobuf=Mp,e.RGBAImage=Vl,e.RequestManager=ke,e.RequestPerformance=ay,e.ResourceType=st,e.SegmentVector=W,e.SourceFeatureState=Oh,e.StructArrayLayout1ui2=lf,e.StructArrayLayout2f1f2i16=gc,e.StructArrayLayout2i4=zf,e.StructArrayLayout3ui6=mc,e.StructArrayLayout4i8=kc,e.SymbolBucket=so,e.Texture=Yf,e.Tile=ks,e.Transitionable=Oo,e.Uniform1f=Xr,e.Uniform1i=Jr,e.Uniform2f=rn,e.Uniform3f=xn,e.Uniform4f=Fn,e.UniformColor=Gn,e.UniformMatrix4f=ca,e.UnwrappedTileID=ty,e.ValidationError=gr,e.WritingMode=_u,e.ZoomHistory=nr,e.add=wh,e.addDynamicAttributes=l0,e.asyncAll=l,e.bezier=g,e.bindAll=E,e.browser=Q,e.cacheEntryPossiblyAdded=Zt,e.clamp=f,e.clearTileCache=sr,e.clipLine=Nm,e.clone=yp,e.clone$1=I,e.clone$2=Vd,e.collisionCircleLayout=l2,e.config=oe,e.create=xh,e.create$1=Vf,e.create$2=Uf,e.createCommonjsModule=a,e.createExpression=Ql,e.createLayout=es,e.createStyleLayer=xw,e.cross=Nb,e.deepEqual=o,e.dot=Ob,e.dot$1=Gb,e.ease=d,e.emitValidationErrors=Di,e.endsWith=S,e.enforceCacheSizeLimit=Wt,e.evaluateSizeForFeature=Pm,e.evaluateSizeForZoom=Dm,e.evaluateVariableOffset=Vm,e.evented=Li,e.extend=M,e.featureFilter=qu,e.filterObject=F,e.fromRotation=yh,e.getAnchorAlignment=a0,e.getAnchorJustification=s0,e.getArrayBuffer=ft,e.getImage=xt,e.getJSON=lt,e.getRTLTextPluginStatus=Do,e.getReferrer=Jt,e.getVideo=Pt,e.identity=bh,e.invert=cf,e.isChar=ar,e.isMapboxURL=De,e.keysDifference=c,e.makeRequest=Qe,e.mapObject=P,e.mercatorXfromLng=Qm,e.mercatorYfromLat=qm,e.mercatorZfromAltitude=ey,e.mul=Ud,e.multiply=ff,e.mvt=Mh,e.normalize=Tv,e.number=mo,e.offscreenCanvasSupported=qr,e.ortho=Bd,e.parseGlyphPBF=F2,e.pbf=Mp,e.performSymbolLayout=q2,e.perspective=wv,e.pick=w,e.plugin=ii,e.polygonIntersectsPolygon=gi,e.postMapLoadEvent=Lt,e.postTurnstileEvent=jt,e.potpack=Tm,e.refProperties=kw,e.register=Be,e.registerForPluginStateChange=Ji,e.rotate=ll,e.rotateX=Ul,e.rotateZ=_h,e.scale=Bl,e.scale$1=Hb,e.scale$2=Gd,e.setCacheLimits=Gr,e.setRTLTextPlugin=_a,e.sphericalToCartesian=Y,e.sqrLen=Xb,e.styleSpec=Yt,e.sub=Ub,e.symbolSize=Y2,e.transformMat3=Bb,e.transformMat4=xp,e.translate=Zo,e.triggerPluginCompletionEvent=Va,e.uniqueId=_,e.validateCustomStyleLayer=gw,e.validateLight=ta,e.validateStyle=Hn,e.values=x,e.vectorTile=Mh,e.version=i,e.warnOnce=O,e.webpSupported=se,e.window=self,e.wrap=y}),T(["./shared"],function(e){function a(tt){var Qe=typeof tt;if(Qe==="number"||Qe==="boolean"||Qe==="string"||tt===void 0||tt===null)return JSON.stringify(tt);if(Array.isArray(tt)){for(var lt="[",ft=0,Et=tt;ft<Et.length;ft+=1){var Vt=Et[ft];lt+=a(Vt)+","}return lt+"]"}for(var Pe=Object.keys(tt).sort(),Se="{",ot=0;ot<Pe.length;ot++)Se+=JSON.stringify(Pe[ot])+":"+a(tt[Pe[ot]])+",";return Se+"}"}function i(tt){for(var Qe="",lt=0,ft=e.refProperties;lt<ft.length;lt+=1){var Et=ft[lt];Qe+="/"+a(tt[Et])}return Qe}function n(tt,Qe){for(var lt={},ft=0;ft<tt.length;ft++){var Et=Qe&&Qe[tt[ft].id]||i(tt[ft]);Qe&&(Qe[tt[ft].id]=Et);var Vt=lt[Et];Vt||(Vt=lt[Et]=[]),Vt.push(tt[ft])}var Pe=[];for(var Se in lt)Pe.push(lt[Se]);return Pe}var r=function(Qe){this.keyCache={},Qe&&this.replace(Qe)};r.prototype.replace=function(Qe){this._layerConfigs={},this._layers={},this.update(Qe,[])},r.prototype.update=function(Qe,lt){for(var ft=this,Et=0,Vt=Qe;Et<Vt.length;Et+=1){var Pe=Vt[Et];this._layerConfigs[Pe.id]=Pe;var Se=this._layers[Pe.id]=e.createStyleLayer(Pe);Se._featureFilter=e.featureFilter(Se.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(var ot=0,ct=lt;ot<ct.length;ot+=1){var pt=ct[ot];delete this.keyCache[pt],delete this._layerConfigs[pt],delete this._layers[pt]}this.familiesBySource={};for(var St=n(e.values(this._layerConfigs),this.keyCache),xt=0,Pt=St;xt<Pt.length;xt+=1){var Xt=Pt[xt],or=Xt.map(function(br){return ft._layers[br.id]}),Pr=or[0];if(Pr.visibility!=="none"){var Ar=Pr.source||"",Er=this.familiesBySource[Ar];Er||(Er=this.familiesBySource[Ar]={});var $r=Pr.sourceLayer||"_geojsonTileLayer",lr=Er[$r];lr||(lr=Er[$r]=[]),lr.push(or)}}};var v=1,s=function(Qe){var lt={},ft=[];for(var Et in Qe){var Vt=Qe[Et],Pe=lt[Et]={};for(var Se in Vt){var ot=Vt[+Se];if(!(!ot||ot.bitmap.width===0||ot.bitmap.height===0)){var ct={x:0,y:0,w:ot.bitmap.width+2*v,h:ot.bitmap.height+2*v};ft.push(ct),Pe[Se]={rect:ct,metrics:ot.metrics}}}}var pt=e.potpack(ft),St=pt.w,xt=pt.h,Pt=new e.AlphaImage({width:St||1,height:xt||1});for(var Xt in Qe){var or=Qe[Xt];for(var Pr in or){var Ar=or[+Pr];if(!(!Ar||Ar.bitmap.width===0||Ar.bitmap.height===0)){var Er=lt[Xt][Pr].rect;e.AlphaImage.copy(Ar.bitmap,Pt,{x:0,y:0},{x:Er.x+v,y:Er.y+v},Ar.bitmap)}}}this.image=Pt,this.positions=lt};e.register("GlyphAtlas",s);var o=function(Qe){this.tileID=new e.OverscaledTileID(Qe.tileID.overscaledZ,Qe.tileID.wrap,Qe.tileID.canonical.z,Qe.tileID.canonical.x,Qe.tileID.canonical.y),this.uid=Qe.uid,this.zoom=Qe.zoom,this.pixelRatio=Qe.pixelRatio,this.tileSize=Qe.tileSize,this.source=Qe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Qe.showCollisionBoxes,this.collectResourceTiming=!!Qe.collectResourceTiming,this.returnDependencies=!!Qe.returnDependencies,this.promoteId=Qe.promoteId};o.prototype.parse=function(Qe,lt,ft,Et,Vt){var Pe=this;this.status="parsing",this.data=Qe,this.collisionBoxArray=new e.CollisionBoxArray;var Se=new e.DictionaryCoder(Object.keys(Qe.layers).sort()),ot=new e.FeatureIndex(this.tileID,this.promoteId);ot.bucketLayerIDs=[];var ct={},pt={featureIndex:ot,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ft},St=lt.familiesBySource[this.source];for(var xt in St){var Pt=Qe.layers[xt];if(!!Pt){Pt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+xt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Xt=Se.encode(xt),or=[],Pr=0;Pr<Pt.length;Pr++){var Ar=Pt.feature(Pr),Er=ot.getId(Ar,xt);or.push({feature:Ar,id:Er,index:Pr,sourceLayerIndex:Xt})}for(var $r=0,lr=St[xt];$r<lr.length;$r+=1){var br=lr[$r],Fr=br[0];if(!(Fr.minzoom&&this.zoom<Math.floor(Fr.minzoom))&&!(Fr.maxzoom&&this.zoom>=Fr.maxzoom)&&Fr.visibility!=="none"){b(br,this.zoom,ft);var Hr=ct[Fr.id]=Fr.createBucket({index:ot.bucketLayerIDs.length,layers:br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xt,sourceID:this.source});Hr.populate(or,pt,this.tileID.canonical),ot.bucketLayerIDs.push(br.map(function(Mr){return Mr.id}))}}}}var Lr,at,Rt,Kt,ur=e.mapObject(pt.glyphDependencies,function(Mr){return Object.keys(Mr).map(Number)});Object.keys(ur).length?Et.send("getGlyphs",{uid:this.uid,stacks:ur},function(Mr,jr){Lr||(Lr=Mr,at=jr,Dr.call(Pe))}):at={};var Nr=Object.keys(pt.iconDependencies);Nr.length?Et.send("getImages",{icons:Nr,source:this.source,tileID:this.tileID,type:"icons"},function(Mr,jr){Lr||(Lr=Mr,Rt=jr,Dr.call(Pe))}):Rt={};var Vr=Object.keys(pt.patternDependencies);Vr.length?Et.send("getImages",{icons:Vr,source:this.source,tileID:this.tileID,type:"patterns"},function(Mr,jr){Lr||(Lr=Mr,Kt=jr,Dr.call(Pe))}):Kt={},Dr.call(this);function Dr(){if(Lr)return Vt(Lr);if(at&&Rt&&Kt){var Mr=new s(at),jr=new e.ImageAtlas(Rt,Kt);for(var kn in ct){var mn=ct[kn];mn instanceof e.SymbolBucket?(b(mn.layers,this.zoom,ft),e.performSymbolLayout(mn,at,Mr.positions,Rt,jr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):mn.hasPattern&&(mn instanceof e.LineBucket||mn instanceof e.FillBucket||mn instanceof e.FillExtrusionBucket)&&(b(mn.layers,this.zoom,ft),mn.addFeatures(pt,this.tileID.canonical,jr.patternPositions))}this.status="done",Vt(null,{buckets:e.values(ct).filter(function(Wn){return!Wn.isEmpty()}),featureIndex:ot,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Mr.image,imageAtlas:jr,glyphMap:this.returnDependencies?at:null,iconMap:this.returnDependencies?Rt:null,glyphPositions:this.returnDependencies?Mr.positions:null})}}};function b(tt,Qe,lt){for(var ft=new e.EvaluationParameters(Qe),Et=0,Vt=tt;Et<Vt.length;Et+=1){var Pe=Vt[Et];Pe.recalculate(ft,lt)}}function g(tt,Qe){var lt=e.getArrayBuffer(tt.request,function(ft,Et,Vt,Pe){ft?Qe(ft):Et&&Qe(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Et)),rawData:Et,cacheControl:Vt,expires:Pe})});return function(){lt.cancel(),Qe()}}var d=function(Qe,lt,ft,Et){this.actor=Qe,this.layerIndex=lt,this.availableImages=ft,this.loadVectorData=Et||g,this.loading={},this.loaded={}};d.prototype.loadTile=function(Qe,lt){var ft=this,Et=Qe.uid;this.loading||(this.loading={});var Vt=Qe&&Qe.request&&Qe.request.collectResourceTiming?new e.RequestPerformance(Qe.request):!1,Pe=this.loading[Et]=new o(Qe);Pe.abort=this.loadVectorData(Qe,function(Se,ot){if(delete ft.loading[Et],Se||!ot)return Pe.status="done",ft.loaded[Et]=Pe,lt(Se);var ct=ot.rawData,pt={};ot.expires&&(pt.expires=ot.expires),ot.cacheControl&&(pt.cacheControl=ot.cacheControl);var St={};if(Vt){var xt=Vt.finish();xt&&(St.resourceTiming=JSON.parse(JSON.stringify(xt)))}Pe.vectorTile=ot.vectorTile,Pe.parse(ot.vectorTile,ft.layerIndex,ft.availableImages,ft.actor,function(Pt,Xt){if(Pt||!Xt)return lt(Pt);lt(null,e.extend({rawTileData:ct.slice(0)},Xt,pt,St))}),ft.loaded=ft.loaded||{},ft.loaded[Et]=Pe})},d.prototype.reloadTile=function(Qe,lt){var ft=this,Et=this.loaded,Vt=Qe.uid,Pe=this;if(Et&&Et[Vt]){var Se=Et[Vt];Se.showCollisionBoxes=Qe.showCollisionBoxes;var ot=function(ct,pt){var St=Se.reloadCallback;St&&(delete Se.reloadCallback,Se.parse(Se.vectorTile,Pe.layerIndex,ft.availableImages,Pe.actor,St)),lt(ct,pt)};Se.status==="parsing"?Se.reloadCallback=ot:Se.status==="done"&&(Se.vectorTile?Se.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor,ot):ot())}},d.prototype.abortTile=function(Qe,lt){var ft=this.loading,Et=Qe.uid;ft&&ft[Et]&&ft[Et].abort&&(ft[Et].abort(),delete ft[Et]),lt()},d.prototype.removeTile=function(Qe,lt){var ft=this.loaded,Et=Qe.uid;ft&&ft[Et]&&delete ft[Et],lt()};var f=e.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function(Qe,lt){var ft=Qe.uid,Et=Qe.encoding,Vt=Qe.rawImageData,Pe=f&&Vt instanceof f?this.getImageData(Vt):Vt,Se=new e.DEMData(ft,Pe,Et);this.loaded=this.loaded||{},this.loaded[ft]=Se,lt(null,Se)},y.prototype.getImageData=function(Qe){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Qe.width,Qe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Qe.width,this.offscreenCanvas.height=Qe.height,this.offscreenCanvasContext.drawImage(Qe,0,0,Qe.width,Qe.height);var lt=this.offscreenCanvasContext.getImageData(-1,-1,Qe.width+2,Qe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:lt.width,height:lt.height},lt.data)},y.prototype.removeTile=function(Qe){var lt=this.loaded,ft=Qe.uid;lt&&lt[ft]&&delete lt[ft]};var l=x;function x(tt,Qe){var lt=tt&&tt.type,ft;if(lt==="FeatureCollection")for(ft=0;ft<tt.features.length;ft++)x(tt.features[ft],Qe);else if(lt==="GeometryCollection")for(ft=0;ft<tt.geometries.length;ft++)x(tt.geometries[ft],Qe);else if(lt==="Feature")x(tt.geometry,Qe);else if(lt==="Polygon")c(tt.coordinates,Qe);else if(lt==="MultiPolygon")for(ft=0;ft<tt.coordinates.length;ft++)c(tt.coordinates[ft],Qe);return tt}function c(tt,Qe){if(tt.length!==0){M(tt[0],Qe);for(var lt=1;lt<tt.length;lt++)M(tt[lt],!Qe)}}function M(tt,Qe){for(var lt=0,ft=0,Et=tt.length,Vt=Et-1;ft<Et;Vt=ft++)lt+=(tt[ft][0]-tt[Vt][0])*(tt[Vt][1]+tt[ft][1]);lt>=0!=!!Qe&&tt.reverse()}var w=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(Qe){this._feature=Qe,this.extent=e.EXTENT,this.type=Qe.type,this.properties=Qe.tags,"id"in Qe&&!isNaN(Qe.id)&&(this.id=parseInt(Qe.id,10))};p.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Qe=[],lt=0,ft=this._feature.geometry;lt<ft.length;lt+=1){var Et=ft[lt];Qe.push([new e.Point$1(Et[0],Et[1])])}return Qe}else{for(var Vt=[],Pe=0,Se=this._feature.geometry;Pe<Se.length;Pe+=1){for(var ot=Se[Pe],ct=[],pt=0,St=ot;pt<St.length;pt+=1){var xt=St[pt];ct.push(new e.Point$1(xt[0],xt[1]))}Vt.push(ct)}return Vt}},p.prototype.toGeoJSON=function(Qe,lt,ft){return w.call(this,Qe,lt,ft)};var _=function(Qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Qe.length,this._features=Qe};_.prototype.feature=function(Qe){return new p(this._features[Qe])};var h=e.vectorTile.VectorTileFeature,L=E;function E(tt,Qe){this.options=Qe||{},this.features=tt,this.length=tt.length}E.prototype.feature=function(tt){return new S(this.features[tt],this.options.extent)};function S(tt,Qe){this.id=typeof tt.id=="number"?tt.id:void 0,this.type=tt.type,this.rawGeometry=tt.type===1?[tt.geometry]:tt.geometry,this.properties=tt.tags,this.extent=Qe||4096}S.prototype.loadGeometry=function(){var tt=this.rawGeometry;this.geometry=[];for(var Qe=0;Qe<tt.length;Qe++){for(var lt=tt[Qe],ft=[],Et=0;Et<lt.length;Et++)ft.push(new e.Point$1(lt[Et][0],lt[Et][1]));this.geometry.push(ft)}return this.geometry},S.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var tt=this.geometry,Qe=1/0,lt=-1/0,ft=1/0,Et=-1/0,Vt=0;Vt<tt.length;Vt++)for(var Pe=tt[Vt],Se=0;Se<Pe.length;Se++){var ot=Pe[Se];Qe=Math.min(Qe,ot.x),lt=Math.max(lt,ot.x),ft=Math.min(ft,ot.y),Et=Math.max(Et,ot.y)}return[Qe,ft,lt,Et]},S.prototype.toGeoJSON=h.prototype.toGeoJSON;var P=R,F=R,I=O,D=L;function R(tt){var Qe=new e.pbf;return z(tt,Qe),Qe.finish()}function O(tt,Qe){Qe=Qe||{};var lt={};for(var ft in tt)lt[ft]=new L(tt[ft].features,Qe),lt[ft].name=ft,lt[ft].version=Qe.version,lt[ft].extent=Qe.extent;return R({layers:lt})}function z(tt,Qe){for(var lt in tt.layers)Qe.writeMessage(3,G,tt.layers[lt])}function G(tt,Qe){Qe.writeVarintField(15,tt.version||1),Qe.writeStringField(1,tt.name||""),Qe.writeVarintField(5,tt.extent||4096);var lt,ft={keys:[],values:[],keycache:{},valuecache:{}};for(lt=0;lt<tt.length;lt++)ft.feature=tt.feature(lt),Qe.writeMessage(2,Y,ft);var Et=ft.keys;for(lt=0;lt<Et.length;lt++)Qe.writeStringField(3,Et[lt]);var Vt=ft.values;for(lt=0;lt<Vt.length;lt++)Qe.writeMessage(4,he,Vt[lt])}function Y(tt,Qe){var lt=tt.feature;lt.id!==void 0&&Qe.writeVarintField(1,lt.id),Qe.writeMessage(2,ee,tt),Qe.writeVarintField(3,lt.type),Qe.writeMessage(4,ie,lt)}function ee(tt,Qe){var lt=tt.feature,ft=tt.keys,Et=tt.values,Vt=tt.keycache,Pe=tt.valuecache;for(var Se in lt.properties){var ot=Vt[Se];typeof ot>"u"&&(ft.push(Se),ot=ft.length-1,Vt[Se]=ot),Qe.writeVarint(ot);var ct=lt.properties[Se],pt=typeof ct;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&(ct=JSON.stringify(ct));var St=pt+":"+ct,xt=Pe[St];typeof xt>"u"&&(Et.push(ct),xt=Et.length-1,Pe[St]=xt),Qe.writeVarint(xt)}}function j(tt,Qe){return(Qe<<3)+(tt&7)}function X(tt){return tt<<1^tt>>31}function ie(tt,Qe){for(var lt=tt.loadGeometry(),ft=tt.type,Et=0,Vt=0,Pe=lt.length,Se=0;Se<Pe;Se++){var ot=lt[Se],ct=1;ft===1&&(ct=ot.length),Qe.writeVarint(j(1,ct));for(var pt=ft===3?ot.length-1:ot.length,St=0;St<pt;St++){St===1&&ft!==1&&Qe.writeVarint(j(2,pt-1));var xt=ot[St].x-Et,Pt=ot[St].y-Vt;Qe.writeVarint(X(xt)),Qe.writeVarint(X(Pt)),Et+=xt,Vt+=Pt}ft===3&&Qe.writeVarint(j(7,1))}}function he(tt,Qe){var lt=typeof tt;lt==="string"?Qe.writeStringField(1,tt):lt==="boolean"?Qe.writeBooleanField(7,tt):lt==="number"&&(tt%1!==0?Qe.writeDoubleField(3,tt):tt<0?Qe.writeSVarintField(6,tt):Qe.writeVarintField(5,tt))}P.fromVectorTileJs=F,P.fromGeojsonVt=I,P.GeoJSONWrapper=D;function K(tt,Qe,lt,ft,Et,Vt){if(!(Et-ft<=lt)){var Pe=ft+Et>>1;$(tt,Qe,Pe,ft,Et,Vt%2),K(tt,Qe,lt,ft,Pe-1,Vt+1),K(tt,Qe,lt,Pe+1,Et,Vt+1)}}function $(tt,Qe,lt,ft,Et,Vt){for(;Et>ft;){if(Et-ft>600){var Pe=Et-ft+1,Se=lt-ft+1,ot=Math.log(Pe),ct=.5*Math.exp(2*ot/3),pt=.5*Math.sqrt(ot*ct*(Pe-ct)/Pe)*(Se-Pe/2<0?-1:1),St=Math.max(ft,Math.floor(lt-Se*ct/Pe+pt)),xt=Math.min(Et,Math.floor(lt+(Pe-Se)*ct/Pe+pt));$(tt,Qe,lt,St,xt,Vt)}var Pt=Qe[2*lt+Vt],Xt=ft,or=Et;for(U(tt,Qe,ft,lt),Qe[2*Et+Vt]>Pt&&U(tt,Qe,ft,Et);Xt<or;){for(U(tt,Qe,Xt,or),Xt++,or--;Qe[2*Xt+Vt]<Pt;)Xt++;for(;Qe[2*or+Vt]>Pt;)or--}Qe[2*ft+Vt]===Pt?U(tt,Qe,ft,or):(or++,U(tt,Qe,or,Et)),or<=lt&&(ft=or+1),lt<=or&&(Et=or-1)}}function U(tt,Qe,lt,ft){H(tt,lt,ft),H(Qe,2*lt,2*ft),H(Qe,2*lt+1,2*ft+1)}function H(tt,Qe,lt){var ft=tt[Qe];tt[Qe]=tt[lt],tt[lt]=ft}function q(tt,Qe,lt,ft,Et,Vt,Pe){for(var Se=[0,tt.length-1,0],ot=[],ct,pt;Se.length;){var St=Se.pop(),xt=Se.pop(),Pt=Se.pop();if(xt-Pt<=Pe){for(var Xt=Pt;Xt<=xt;Xt++)ct=Qe[2*Xt],pt=Qe[2*Xt+1],ct>=lt&&ct<=Et&&pt>=ft&&pt<=Vt&&ot.push(tt[Xt]);continue}var or=Math.floor((Pt+xt)/2);ct=Qe[2*or],pt=Qe[2*or+1],ct>=lt&&ct<=Et&&pt>=ft&&pt<=Vt&&ot.push(tt[or]);var Pr=(St+1)%2;(St===0?lt<=ct:ft<=pt)&&(Se.push(Pt),Se.push(or-1),Se.push(Pr)),(St===0?Et>=ct:Vt>=pt)&&(Se.push(or+1),Se.push(xt),Se.push(Pr))}return ot}function re(tt,Qe,lt,ft,Et,Vt){for(var Pe=[0,tt.length-1,0],Se=[],ot=Et*Et;Pe.length;){var ct=Pe.pop(),pt=Pe.pop(),St=Pe.pop();if(pt-St<=Vt){for(var xt=St;xt<=pt;xt++)Z(Qe[2*xt],Qe[2*xt+1],lt,ft)<=ot&&Se.push(tt[xt]);continue}var Pt=Math.floor((St+pt)/2),Xt=Qe[2*Pt],or=Qe[2*Pt+1];Z(Xt,or,lt,ft)<=ot&&Se.push(tt[Pt]);var Pr=(ct+1)%2;(ct===0?lt-Et<=Xt:ft-Et<=or)&&(Pe.push(St),Pe.push(Pt-1),Pe.push(Pr)),(ct===0?lt+Et>=Xt:ft+Et>=or)&&(Pe.push(Pt+1),Pe.push(pt),Pe.push(Pr))}return Se}function Z(tt,Qe,lt,ft){var Et=tt-lt,Vt=Qe-ft;return Et*Et+Vt*Vt}var Q=function(tt){return tt[0]},oe=function(tt){return tt[1]},se=function(Qe,lt,ft,Et,Vt){lt===void 0&&(lt=Q),ft===void 0&&(ft=oe),Et===void 0&&(Et=64),Vt===void 0&&(Vt=Float64Array),this.nodeSize=Et,this.points=Qe;for(var Pe=Qe.length<65536?Uint16Array:Uint32Array,Se=this.ids=new Pe(Qe.length),ot=this.coords=new Vt(Qe.length*2),ct=0;ct<Qe.length;ct++)Se[ct]=ct,ot[2*ct]=lt(Qe[ct]),ot[2*ct+1]=ft(Qe[ct]);K(Se,ot,Et,0,Se.length-1,0)};se.prototype.range=function(Qe,lt,ft,Et){return q(this.ids,this.coords,Qe,lt,ft,Et,this.nodeSize)},se.prototype.within=function(Qe,lt,ft){return re(this.ids,this.coords,Qe,lt,ft,this.nodeSize)};var ae={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(tt){return tt}},le=function(Qe){this.options=He(Object.create(ae),Qe),this.trees=new Array(this.options.maxZoom+1)};le.prototype.load=function(Qe){var lt=this.options,ft=lt.log,Et=lt.minZoom,Vt=lt.maxZoom,Pe=lt.nodeSize;ft&&console.time("total time");var Se="prepare "+Qe.length+" points";ft&&console.time(Se),this.points=Qe;for(var ot=[],ct=0;ct<Qe.length;ct++)!Qe[ct].geometry||ot.push(fe(Qe[ct],ct));this.trees[Vt+1]=new se(ot,Ae,Le,Pe,Float32Array),ft&&console.timeEnd(Se);for(var pt=Vt;pt>=Et;pt--){var St=+Date.now();ot=this._cluster(ot,pt),this.trees[pt]=new se(ot,Ae,Le,Pe,Float32Array),ft&&console.log("z%d: %d clusters in %dms",pt,ot.length,+Date.now()-St)}return ft&&console.timeEnd("total time"),this},le.prototype.getClusters=function(Qe,lt){var ft=((Qe[0]+180)%360+360)%360-180,Et=Math.max(-90,Math.min(90,Qe[1])),Vt=Qe[2]===180?180:((Qe[2]+180)%360+360)%360-180,Pe=Math.max(-90,Math.min(90,Qe[3]));if(Qe[2]-Qe[0]>=360)ft=-180,Vt=180;else if(ft>Vt){var Se=this.getClusters([ft,Et,180,Pe],lt),ot=this.getClusters([-180,Et,Vt,Pe],lt);return Se.concat(ot)}for(var ct=this.trees[this._limitZoom(lt)],pt=ct.range(ye(ft),be(Pe),ye(Vt),be(Et)),St=[],xt=0,Pt=pt;xt<Pt.length;xt+=1){var Xt=Pt[xt],or=ct.points[Xt];St.push(or.numPoints?me(or):this.points[or.index])}return St},le.prototype.getChildren=function(Qe){var lt=this._getOriginId(Qe),ft=this._getOriginZoom(Qe),Et="No cluster with the specified id.",Vt=this.trees[ft];if(!Vt)throw new Error(Et);var Pe=Vt.points[lt];if(!Pe)throw new Error(Et);for(var Se=this.options.radius/(this.options.extent*Math.pow(2,ft-1)),ot=Vt.within(Pe.x,Pe.y,Se),ct=[],pt=0,St=ot;pt<St.length;pt+=1){var xt=St[pt],Pt=Vt.points[xt];Pt.parentId===Qe&&ct.push(Pt.numPoints?me(Pt):this.points[Pt.index])}if(ct.length===0)throw new Error(Et);return ct},le.prototype.getLeaves=function(Qe,lt,ft){lt=lt||10,ft=ft||0;var Et=[];return this._appendLeaves(Et,Qe,lt,ft,0),Et},le.prototype.getTile=function(Qe,lt,ft){var Et=this.trees[this._limitZoom(Qe)],Vt=Math.pow(2,Qe),Pe=this.options,Se=Pe.extent,ot=Pe.radius,ct=ot/Se,pt=(ft-ct)/Vt,St=(ft+1+ct)/Vt,xt={features:[]};return this._addTileFeatures(Et.range((lt-ct)/Vt,pt,(lt+1+ct)/Vt,St),Et.points,lt,ft,Vt,xt),lt===0&&this._addTileFeatures(Et.range(1-ct/Vt,pt,1,St),Et.points,Vt,ft,Vt,xt),lt===Vt-1&&this._addTileFeatures(Et.range(0,pt,ct/Vt,St),Et.points,-1,ft,Vt,xt),xt.features.length?xt:null},le.prototype.getClusterExpansionZoom=function(Qe){for(var lt=this._getOriginZoom(Qe)-1;lt<=this.options.maxZoom;){var ft=this.getChildren(Qe);if(lt++,ft.length!==1)break;Qe=ft[0].properties.cluster_id}return lt},le.prototype._appendLeaves=function(Qe,lt,ft,Et,Vt){for(var Pe=this.getChildren(lt),Se=0,ot=Pe;Se<ot.length;Se+=1){var ct=ot[Se],pt=ct.properties;if(pt&&pt.cluster?Vt+pt.point_count<=Et?Vt+=pt.point_count:Vt=this._appendLeaves(Qe,pt.cluster_id,ft,Et,Vt):Vt<Et?Vt++:Qe.push(ct),Qe.length===ft)break}return Vt},le.prototype._addTileFeatures=function(Qe,lt,ft,Et,Vt,Pe){for(var Se=0,ot=Qe;Se<ot.length;Se+=1){var ct=ot[Se],pt=lt[ct],St=pt.numPoints,xt={type:1,geometry:[[Math.round(this.options.extent*(pt.x*Vt-ft)),Math.round(this.options.extent*(pt.y*Vt-Et))]],tags:St?xe(pt):this.points[pt.index].properties},Pt=void 0;St?Pt=pt.id:this.options.generateId?Pt=pt.index:this.points[pt.index].id&&(Pt=this.points[pt.index].id),Pt!==void 0&&(xt.id=Pt),Pe.features.push(xt)}},le.prototype._limitZoom=function(Qe){return Math.max(this.options.minZoom,Math.min(Qe,this.options.maxZoom+1))},le.prototype._cluster=function(Qe,lt){for(var ft=[],Et=this.options,Vt=Et.radius,Pe=Et.extent,Se=Et.reduce,ot=Vt/(Pe*Math.pow(2,lt)),ct=0;ct<Qe.length;ct++){var pt=Qe[ct];if(!(pt.zoom<=lt)){pt.zoom=lt;for(var St=this.trees[lt+1],xt=St.within(pt.x,pt.y,ot),Pt=pt.numPoints||1,Xt=pt.x*Pt,or=pt.y*Pt,Pr=Se&&Pt>1?this._map(pt,!0):null,Ar=(ct<<5)+(lt+1)+this.points.length,Er=0,$r=xt;Er<$r.length;Er+=1){var lr=$r[Er],br=St.points[lr];if(!(br.zoom<=lt)){br.zoom=lt;var Fr=br.numPoints||1;Xt+=br.x*Fr,or+=br.y*Fr,Pt+=Fr,br.parentId=Ar,Se&&(Pr||(Pr=this._map(pt,!0)),Se(Pr,this._map(br)))}}Pt===1?ft.push(pt):(pt.parentId=Ar,ft.push(_e(Xt/Pt,or/Pt,Ar,Pt,Pr)))}}return ft},le.prototype._getOriginId=function(Qe){return Qe-this.points.length>>5},le.prototype._getOriginZoom=function(Qe){return(Qe-this.points.length)%32},le.prototype._map=function(Qe,lt){if(Qe.numPoints)return lt?He({},Qe.properties):Qe.properties;var ft=this.points[Qe.index].properties,Et=this.options.map(ft);return lt&&Et===ft?He({},Et):Et};function _e(tt,Qe,lt,ft,Et){return{x:tt,y:Qe,zoom:1/0,id:lt,parentId:-1,numPoints:ft,properties:Et}}function fe(tt,Qe){var lt=tt.geometry.coordinates,ft=lt[0],Et=lt[1];return{x:ye(ft),y:be(Et),zoom:1/0,index:Qe,parentId:-1}}function me(tt){return{type:"Feature",id:tt.id,properties:xe(tt),geometry:{type:"Point",coordinates:[ke(tt.x),De(tt.y)]}}}function xe(tt){var Qe=tt.numPoints,lt=Qe>=1e4?Math.round(Qe/1e3)+"k":Qe>=1e3?Math.round(Qe/100)/10+"k":Qe;return He(He({},tt.properties),{cluster:!0,cluster_id:tt.id,point_count:Qe,point_count_abbreviated:lt})}function ye(tt){return tt/360+.5}function be(tt){var Qe=Math.sin(tt*Math.PI/180),lt=.5-.25*Math.log((1+Qe)/(1-Qe))/Math.PI;return lt<0?0:lt>1?1:lt}function ke(tt){return(tt-.5)*360}function De(tt){var Qe=(180-tt*360)*Math.PI/180;return 360*Math.atan(Math.exp(Qe))/Math.PI-90}function He(tt,Qe){for(var lt in Qe)tt[lt]=Qe[lt];return tt}function Ae(tt){return tt.x}function Le(tt){return tt.y}function Ze(tt,Qe,lt,ft){for(var Et=ft,Vt=lt-Qe>>1,Pe=lt-Qe,Se,ot=tt[Qe],ct=tt[Qe+1],pt=tt[lt],St=tt[lt+1],xt=Qe+3;xt<lt;xt+=3){var Pt=We(tt[xt],tt[xt+1],ot,ct,pt,St);if(Pt>Et)Se=xt,Et=Pt;else if(Pt===Et){var Xt=Math.abs(xt-Vt);Xt<Pe&&(Se=xt,Pe=Xt)}}Et>ft&&(Se-Qe>3&&Ze(tt,Qe,Se,ft),tt[Se+2]=Et,lt-Se>3&&Ze(tt,Se,lt,ft))}function We(tt,Qe,lt,ft,Et,Vt){var Pe=Et-lt,Se=Vt-ft;if(Pe!==0||Se!==0){var ot=((tt-lt)*Pe+(Qe-ft)*Se)/(Pe*Pe+Se*Se);ot>1?(lt=Et,ft=Vt):ot>0&&(lt+=Pe*ot,ft+=Se*ot)}return Pe=tt-lt,Se=Qe-ft,Pe*Pe+Se*Se}function ze(tt,Qe,lt,ft){var Et={id:typeof tt>"u"?null:tt,type:Qe,geometry:lt,tags:ft,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ie(Et),Et}function Ie(tt){var Qe=tt.geometry,lt=tt.type;if(lt==="Point"||lt==="MultiPoint"||lt==="LineString")Ve(tt,Qe);else if(lt==="Polygon"||lt==="MultiLineString")for(var ft=0;ft<Qe.length;ft++)Ve(tt,Qe[ft]);else if(lt==="MultiPolygon")for(ft=0;ft<Qe.length;ft++)for(var Et=0;Et<Qe[ft].length;Et++)Ve(tt,Qe[ft][Et])}function Ve(tt,Qe){for(var lt=0;lt<Qe.length;lt+=3)tt.minX=Math.min(tt.minX,Qe[lt]),tt.minY=Math.min(tt.minY,Qe[lt+1]),tt.maxX=Math.max(tt.maxX,Qe[lt]),tt.maxY=Math.max(tt.maxY,Qe[lt+1])}function dt(tt,Qe){var lt=[];if(tt.type==="FeatureCollection")for(var ft=0;ft<tt.features.length;ft++)Ft(lt,tt.features[ft],Qe,ft);else tt.type==="Feature"?Ft(lt,tt,Qe):Ft(lt,{geometry:tt},Qe);return lt}function Ft(tt,Qe,lt,ft){if(!!Qe.geometry){var Et=Qe.geometry.coordinates,Vt=Qe.geometry.type,Pe=Math.pow(lt.tolerance/((1<<lt.maxZoom)*lt.extent),2),Se=[],ot=Qe.id;if(lt.promoteId?ot=Qe.properties[lt.promoteId]:lt.generateId&&(ot=ft||0),Vt==="Point")Qt(Et,Se);else if(Vt==="MultiPoint")for(var ct=0;ct<Et.length;ct++)Qt(Et[ct],Se);else if(Vt==="LineString")Ot(Et,Se,Pe,!1);else if(Vt==="MultiLineString")if(lt.lineMetrics){for(ct=0;ct<Et.length;ct++)Se=[],Ot(Et[ct],Se,Pe,!1),tt.push(ze(ot,"LineString",Se,Qe.properties));return}else Ct(Et,Se,Pe,!1);else if(Vt==="Polygon")Ct(Et,Se,Pe,!0);else if(Vt==="MultiPolygon")for(ct=0;ct<Et.length;ct++){var pt=[];Ct(Et[ct],pt,Pe,!0),Se.push(pt)}else if(Vt==="GeometryCollection"){for(ct=0;ct<Qe.geometry.geometries.length;ct++)Ft(tt,{id:ot,geometry:Qe.geometry.geometries[ct],properties:Qe.properties},lt,ft);return}else throw new Error("Input data is not a valid GeoJSON object.");tt.push(ze(ot,Vt,Se,Qe.properties))}}function Qt(tt,Qe){Qe.push(jt(tt[0])),Qe.push(Nt(tt[1])),Qe.push(0)}function Ot(tt,Qe,lt,ft){for(var Et,Vt,Pe=0,Se=0;Se<tt.length;Se++){var ot=jt(tt[Se][0]),ct=Nt(tt[Se][1]);Qe.push(ot),Qe.push(ct),Qe.push(0),Se>0&&(ft?Pe+=(Et*ct-ot*Vt)/2:Pe+=Math.sqrt(Math.pow(ot-Et,2)+Math.pow(ct-Vt,2))),Et=ot,Vt=ct}var pt=Qe.length-3;Qe[2]=1,Ze(Qe,0,pt,lt),Qe[pt+2]=1,Qe.size=Math.abs(Pe),Qe.start=0,Qe.end=Qe.size}function Ct(tt,Qe,lt,ft){for(var Et=0;Et<tt.length;Et++){var Vt=[];Ot(tt[Et],Vt,lt,ft),Qe.push(Vt)}}function jt(tt){return tt/360+.5}function Nt(tt){var Qe=Math.sin(tt*Math.PI/180),lt=.5-.25*Math.log((1+Qe)/(1-Qe))/Math.PI;return lt<0?0:lt>1?1:lt}function Lt(tt,Qe,lt,ft,Et,Vt,Pe,Se){if(lt/=Qe,ft/=Qe,Vt>=lt&&Pe<ft)return tt;if(Pe<lt||Vt>=ft)return null;for(var ot=[],ct=0;ct<tt.length;ct++){var pt=tt[ct],St=pt.geometry,xt=pt.type,Pt=Et===0?pt.minX:pt.minY,Xt=Et===0?pt.maxX:pt.maxY;if(Pt>=lt&&Xt<ft){ot.push(pt);continue}else if(Xt<lt||Pt>=ft)continue;var or=[];if(xt==="Point"||xt==="MultiPoint")Xe(St,or,lt,ft,Et);else if(xt==="LineString")it(St,or,lt,ft,Et,!1,Se.lineMetrics);else if(xt==="MultiLineString")Ee(St,or,lt,ft,Et,!1);else if(xt==="Polygon")Ee(St,or,lt,ft,Et,!0);else if(xt==="MultiPolygon")for(var Pr=0;Pr<St.length;Pr++){var Ar=[];Ee(St[Pr],Ar,lt,ft,Et,!0),Ar.length&&or.push(Ar)}if(or.length){if(Se.lineMetrics&&xt==="LineString"){for(Pr=0;Pr<or.length;Pr++)ot.push(ze(pt.id,xt,or[Pr],pt.tags));continue}(xt==="LineString"||xt==="MultiLineString")&&(or.length===1?(xt="LineString",or=or[0]):xt="MultiLineString"),(xt==="Point"||xt==="MultiPoint")&&(xt=or.length===3?"Point":"MultiPoint"),ot.push(ze(pt.id,xt,or,pt.tags))}}return ot.length?ot:null}function Xe(tt,Qe,lt,ft,Et){for(var Vt=0;Vt<tt.length;Vt+=3){var Pe=tt[Vt+Et];Pe>=lt&&Pe<=ft&&(Qe.push(tt[Vt]),Qe.push(tt[Vt+1]),Qe.push(tt[Vt+2]))}}function it(tt,Qe,lt,ft,Et,Vt,Pe){for(var Se=Ye(tt),ot=Et===0?Ke:qe,ct=tt.start,pt,St,xt=0;xt<tt.length-3;xt+=3){var Pt=tt[xt],Xt=tt[xt+1],or=tt[xt+2],Pr=tt[xt+3],Ar=tt[xt+4],Er=Et===0?Pt:Xt,$r=Et===0?Pr:Ar,lr=!1;Pe&&(pt=Math.sqrt(Math.pow(Pt-Pr,2)+Math.pow(Xt-Ar,2))),Er<lt?$r>lt&&(St=ot(Se,Pt,Xt,Pr,Ar,lt),Pe&&(Se.start=ct+pt*St)):Er>ft?$r<ft&&(St=ot(Se,Pt,Xt,Pr,Ar,ft),Pe&&(Se.start=ct+pt*St)):Ge(Se,Pt,Xt,or),$r<lt&&Er>=lt&&(St=ot(Se,Pt,Xt,Pr,Ar,lt),lr=!0),$r>ft&&Er<=ft&&(St=ot(Se,Pt,Xt,Pr,Ar,ft),lr=!0),!Vt&&lr&&(Pe&&(Se.end=ct+pt*St),Qe.push(Se),Se=Ye(tt)),Pe&&(ct+=pt)}var br=tt.length-3;Pt=tt[br],Xt=tt[br+1],or=tt[br+2],Er=Et===0?Pt:Xt,Er>=lt&&Er<=ft&&Ge(Se,Pt,Xt,or),br=Se.length-3,Vt&&br>=3&&(Se[br]!==Se[0]||Se[br+1]!==Se[1])&&Ge(Se,Se[0],Se[1],Se[2]),Se.length&&Qe.push(Se)}function Ye(tt){var Qe=[];return Qe.size=tt.size,Qe.start=tt.start,Qe.end=tt.end,Qe}function Ee(tt,Qe,lt,ft,Et,Vt){for(var Pe=0;Pe<tt.length;Pe++)it(tt[Pe],Qe,lt,ft,Et,Vt,!1)}function Ge(tt,Qe,lt,ft){tt.push(Qe),tt.push(lt),tt.push(ft)}function Ke(tt,Qe,lt,ft,Et,Vt){var Pe=(Vt-Qe)/(ft-Qe);return tt.push(Vt),tt.push(lt+(Et-lt)*Pe),tt.push(1),Pe}function qe(tt,Qe,lt,ft,Et,Vt){var Pe=(Vt-lt)/(Et-lt);return tt.push(Qe+(ft-Qe)*Pe),tt.push(Vt),tt.push(1),Pe}function At(tt,Qe){var lt=Qe.buffer/Qe.extent,ft=tt,Et=Lt(tt,1,-1-lt,lt,0,-1,2,Qe),Vt=Lt(tt,1,1-lt,2+lt,0,-1,2,Qe);return(Et||Vt)&&(ft=Lt(tt,1,-lt,1+lt,0,-1,2,Qe)||[],Et&&(ft=yt(Et,1).concat(ft)),Vt&&(ft=ft.concat(yt(Vt,-1)))),ft}function yt(tt,Qe){for(var lt=[],ft=0;ft<tt.length;ft++){var Et=tt[ft],Vt=Et.type,Pe;if(Vt==="Point"||Vt==="MultiPoint"||Vt==="LineString")Pe=Mt(Et.geometry,Qe);else if(Vt==="MultiLineString"||Vt==="Polygon"){Pe=[];for(var Se=0;Se<Et.geometry.length;Se++)Pe.push(Mt(Et.geometry[Se],Qe))}else if(Vt==="MultiPolygon")for(Pe=[],Se=0;Se<Et.geometry.length;Se++){for(var ot=[],ct=0;ct<Et.geometry[Se].length;ct++)ot.push(Mt(Et.geometry[Se][ct],Qe));Pe.push(ot)}lt.push(ze(Et.id,Vt,Pe,Et.tags))}return lt}function Mt(tt,Qe){var lt=[];lt.size=tt.size,tt.start!==void 0&&(lt.start=tt.start,lt.end=tt.end);for(var ft=0;ft<tt.length;ft+=3)lt.push(tt[ft]+Qe,tt[ft+1],tt[ft+2]);return lt}function Gt(tt,Qe){if(tt.transformed)return tt;var lt=1<<tt.z,ft=tt.x,Et=tt.y,Vt,Pe,Se;for(Vt=0;Vt<tt.features.length;Vt++){var ot=tt.features[Vt],ct=ot.geometry,pt=ot.type;if(ot.geometry=[],pt===1)for(Pe=0;Pe<ct.length;Pe+=2)ot.geometry.push(zt(ct[Pe],ct[Pe+1],Qe,lt,ft,Et));else for(Pe=0;Pe<ct.length;Pe++){var St=[];for(Se=0;Se<ct[Pe].length;Se+=2)St.push(zt(ct[Pe][Se],ct[Pe][Se+1],Qe,lt,ft,Et));ot.geometry.push(St)}}return tt.transformed=!0,tt}function zt(tt,Qe,lt,ft,Et,Vt){return[Math.round(lt*(tt*ft-Et)),Math.round(lt*(Qe*ft-Vt))]}function Ht(tt,Qe,lt,ft,Et){for(var Vt=Qe===Et.maxZoom?0:Et.tolerance/((1<<Qe)*Et.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:lt,y:ft,z:Qe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Se=0;Se<tt.length;Se++){Pe.numFeatures++,Zt(Pe,tt[Se],Vt,Et);var ot=tt[Se].minX,ct=tt[Se].minY,pt=tt[Se].maxX,St=tt[Se].maxY;ot<Pe.minX&&(Pe.minX=ot),ct<Pe.minY&&(Pe.minY=ct),pt>Pe.maxX&&(Pe.maxX=pt),St>Pe.maxY&&(Pe.maxY=St)}return Pe}function Zt(tt,Qe,lt,ft){var Et=Qe.geometry,Vt=Qe.type,Pe=[];if(Vt==="Point"||Vt==="MultiPoint")for(var Se=0;Se<Et.length;Se+=3)Pe.push(Et[Se]),Pe.push(Et[Se+1]),tt.numPoints++,tt.numSimplified++;else if(Vt==="LineString")Wt(Pe,Et,tt,lt,!1,!1);else if(Vt==="MultiLineString"||Vt==="Polygon")for(Se=0;Se<Et.length;Se++)Wt(Pe,Et[Se],tt,lt,Vt==="Polygon",Se===0);else if(Vt==="MultiPolygon")for(var ot=0;ot<Et.length;ot++){var ct=Et[ot];for(Se=0;Se<ct.length;Se++)Wt(Pe,ct[Se],tt,lt,!0,Se===0)}if(Pe.length){var pt=Qe.tags||null;if(Vt==="LineString"&&ft.lineMetrics){pt={};for(var St in Qe.tags)pt[St]=Qe.tags[St];pt.mapbox_clip_start=Et.start/Et.size,pt.mapbox_clip_end=Et.end/Et.size}var xt={geometry:Pe,type:Vt==="Polygon"||Vt==="MultiPolygon"?3:Vt==="LineString"||Vt==="MultiLineString"?2:1,tags:pt};Qe.id!==null&&(xt.id=Qe.id),tt.features.push(xt)}}function Wt(tt,Qe,lt,ft,Et,Vt){var Pe=ft*ft;if(ft>0&&Qe.size<(Et?Pe:ft)){lt.numPoints+=Qe.length/3;return}for(var Se=[],ot=0;ot<Qe.length;ot+=3)(ft===0||Qe[ot+2]>Pe)&&(lt.numSimplified++,Se.push(Qe[ot]),Se.push(Qe[ot+1])),lt.numPoints++;Et&&sr(Se,Vt),tt.push(Se)}function sr(tt,Qe){for(var lt=0,ft=0,Et=tt.length,Vt=Et-2;ft<Et;Vt=ft,ft+=2)lt+=(tt[ft]-tt[Vt])*(tt[ft+1]+tt[Vt+1]);if(lt>0===Qe)for(ft=0,Et=tt.length;ft<Et/2;ft+=2){var Pe=tt[ft],Se=tt[ft+1];tt[ft]=tt[Et-2-ft],tt[ft+1]=tt[Et-1-ft],tt[Et-2-ft]=Pe,tt[Et-1-ft]=Se}}function Gr(tt,Qe){return new cn(tt,Qe)}function cn(tt,Qe){Qe=this.options=st(Object.create(this.options),Qe);var lt=Qe.debug;if(lt&&console.time("preprocess data"),Qe.maxZoom<0||Qe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Qe.promoteId&&Qe.generateId)throw new Error("promoteId and generateId cannot be used together.");var ft=dt(tt,Qe);this.tiles={},this.tileCoords=[],lt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Qe.indexMaxZoom,Qe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ft=At(ft,Qe),ft.length&&this.splitTile(ft,0,0,0),lt&&(ft.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}cn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},cn.prototype.splitTile=function(tt,Qe,lt,ft,Et,Vt,Pe){for(var Se=[tt,Qe,lt,ft],ot=this.options,ct=ot.debug;Se.length;){ft=Se.pop(),lt=Se.pop(),Qe=Se.pop(),tt=Se.pop();var pt=1<<Qe,St=qr(Qe,lt,ft),xt=this.tiles[St];if(!xt&&(ct>1&&console.time("creation"),xt=this.tiles[St]=Ht(tt,Qe,lt,ft,ot),this.tileCoords.push({z:Qe,x:lt,y:ft}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Qe,lt,ft,xt.numFeatures,xt.numPoints,xt.numSimplified),console.timeEnd("creation"));var Pt="z"+Qe;this.stats[Pt]=(this.stats[Pt]||0)+1,this.total++}if(xt.source=tt,Et){if(Qe===ot.maxZoom||Qe===Et)continue;var Xt=1<<Et-Qe;if(lt!==Math.floor(Vt/Xt)||ft!==Math.floor(Pe/Xt))continue}else if(Qe===ot.indexMaxZoom||xt.numPoints<=ot.indexMaxPoints)continue;if(xt.source=null,tt.length!==0){ct>1&&console.time("clipping");var or=.5*ot.buffer/ot.extent,Pr=.5-or,Ar=.5+or,Er=1+or,$r,lr,br,Fr,Hr,Lr;$r=lr=br=Fr=null,Hr=Lt(tt,pt,lt-or,lt+Ar,0,xt.minX,xt.maxX,ot),Lr=Lt(tt,pt,lt+Pr,lt+Er,0,xt.minX,xt.maxX,ot),tt=null,Hr&&($r=Lt(Hr,pt,ft-or,ft+Ar,1,xt.minY,xt.maxY,ot),lr=Lt(Hr,pt,ft+Pr,ft+Er,1,xt.minY,xt.maxY,ot),Hr=null),Lr&&(br=Lt(Lr,pt,ft-or,ft+Ar,1,xt.minY,xt.maxY,ot),Fr=Lt(Lr,pt,ft+Pr,ft+Er,1,xt.minY,xt.maxY,ot),Lr=null),ct>1&&console.timeEnd("clipping"),Se.push($r||[],Qe+1,lt*2,ft*2),Se.push(lr||[],Qe+1,lt*2,ft*2+1),Se.push(br||[],Qe+1,lt*2+1,ft*2),Se.push(Fr||[],Qe+1,lt*2+1,ft*2+1)}}},cn.prototype.getTile=function(tt,Qe,lt){var ft=this.options,Et=ft.extent,Vt=ft.debug;if(tt<0||tt>24)return null;var Pe=1<<tt;Qe=(Qe%Pe+Pe)%Pe;var Se=qr(tt,Qe,lt);if(this.tiles[Se])return Gt(this.tiles[Se],Et);Vt>1&&console.log("drilling down to z%d-%d-%d",tt,Qe,lt);for(var ot=tt,ct=Qe,pt=lt,St;!St&&ot>0;)ot--,ct=Math.floor(ct/2),pt=Math.floor(pt/2),St=this.tiles[qr(ot,ct,pt)];return!St||!St.source?null:(Vt>1&&console.log("found parent tile z%d-%d-%d",ot,ct,pt),Vt>1&&console.time("drilling down"),this.splitTile(St.source,ot,ct,pt,tt,Qe,lt),Vt>1&&console.timeEnd("drilling down"),this.tiles[Se]?Gt(this.tiles[Se],Et):null)};function qr(tt,Qe,lt){return((1<<tt)*lt+Qe)*32+tt}function st(tt,Qe){for(var lt in Qe)tt[lt]=Qe[lt];return tt}function rr(tt,Qe){var lt=tt.tileID.canonical;if(!this._geoJSONIndex)return Qe(null,null);var ft=this._geoJSONIndex.getTile(lt.z,lt.x,lt.y);if(!ft)return Qe(null,null);var Et=new _(ft.features),Vt=P(Et);(Vt.byteOffset!==0||Vt.byteLength!==Vt.buffer.byteLength)&&(Vt=new Uint8Array(Vt)),Qe(null,{vectorTile:Et,rawData:Vt.buffer})}var Jt=function(tt){function Qe(lt,ft,Et,Vt){tt.call(this,lt,ft,Et,rr),Vt&&(this.loadGeoJSON=Vt)}return tt&&(Qe.__proto__=tt),Qe.prototype=Object.create(tt&&tt.prototype),Qe.prototype.constructor=Qe,Qe.prototype.loadData=function(ft,Et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Et,this._pendingLoadDataParams=ft,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Qe.prototype._loadData=function(){var ft=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Et=this._pendingCallback,Vt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Pe=Vt&&Vt.request&&Vt.request.collectResourceTiming?new e.RequestPerformance(Vt.request):!1;this.loadGeoJSON(Vt,function(Se,ot){if(Se||!ot)return Et(Se);if(typeof ot!="object")return Et(new Error("Input data given to '"+Vt.source+"' is not a valid GeoJSON object."));l(ot,!0);try{ft._geoJSONIndex=Vt.cluster?new le(hr(Vt)).load(ot.features):Gr(ot,Vt.geojsonVtOptions)}catch(St){return Et(St)}ft.loaded={};var ct={};if(Pe){var pt=Pe.finish();pt&&(ct.resourceTiming={},ct.resourceTiming[Vt.source]=JSON.parse(JSON.stringify(pt)))}Et(null,ct)})}},Qe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Qe.prototype.reloadTile=function(ft,Et){var Vt=this.loaded,Pe=ft.uid;return Vt&&Vt[Pe]?tt.prototype.reloadTile.call(this,ft,Et):this.loadTile(ft,Et)},Qe.prototype.loadGeoJSON=function(ft,Et){if(ft.request)e.getJSON(ft.request,Et);else if(typeof ft.data=="string")try{return Et(null,JSON.parse(ft.data))}catch{return Et(new Error("Input data given to '"+ft.source+"' is not a valid GeoJSON object."))}else return Et(new Error("Input data given to '"+ft.source+"' is not a valid GeoJSON object."))},Qe.prototype.removeSource=function(ft,Et){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Et()},Qe.prototype.getClusterExpansionZoom=function(ft,Et){try{Et(null,this._geoJSONIndex.getClusterExpansionZoom(ft.clusterId))}catch(Vt){Et(Vt)}},Qe.prototype.getClusterChildren=function(ft,Et){try{Et(null,this._geoJSONIndex.getChildren(ft.clusterId))}catch(Vt){Et(Vt)}},Qe.prototype.getClusterLeaves=function(ft,Et){try{Et(null,this._geoJSONIndex.getLeaves(ft.clusterId,ft.limit,ft.offset))}catch(Vt){Et(Vt)}},Qe}(d);function hr(tt){var Qe=tt.superclusterOptions,lt=tt.clusterProperties;if(!lt||!Qe)return Qe;for(var ft={},Et={},Vt={accumulated:null,zoom:0},Pe={properties:null},Se=Object.keys(lt),ot=0,ct=Se;ot<ct.length;ot+=1){var pt=ct[ot],St=lt[pt],xt=St[0],Pt=St[1],Xt=e.createExpression(Pt),or=e.createExpression(typeof xt=="string"?[xt,["accumulated"],["get",pt]]:xt);ft[pt]=Xt.value,Et[pt]=or.value}return Qe.map=function(Pr){Pe.properties=Pr;for(var Ar={},Er=0,$r=Se;Er<$r.length;Er+=1){var lr=$r[Er];Ar[lr]=ft[lr].evaluate(Vt,Pe)}return Ar},Qe.reduce=function(Pr,Ar){Pe.properties=Ar;for(var Er=0,$r=Se;Er<$r.length;Er+=1){var lr=$r[Er];Vt.accumulated=Pr[lr],Pr[lr]=Et[lr].evaluate(Vt,Pe)}},Qe}var Sr=function(Qe){var lt=this;this.self=Qe,this.actor=new e.Actor(Qe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:Jt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ft,Et){if(lt.workerSourceTypes[ft])throw new Error('Worker source with name "'+ft+'" already registered.');lt.workerSourceTypes[ft]=Et},this.self.registerRTLTextPlugin=function(ft){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ft.applyArabicShaping,e.plugin.processBidirectionalText=ft.processBidirectionalText,e.plugin.processStyledBidirectionalText=ft.processStyledBidirectionalText}};return Sr.prototype.setReferrer=function(Qe,lt){this.referrer=lt},Sr.prototype.setImages=function(Qe,lt,ft){this.availableImages[Qe]=lt;for(var Et in this.workerSources[Qe]){var Vt=this.workerSources[Qe][Et];for(var Pe in Vt)Vt[Pe].availableImages=lt}ft()},Sr.prototype.setLayers=function(Qe,lt,ft){this.getLayerIndex(Qe).replace(lt),ft()},Sr.prototype.updateLayers=function(Qe,lt,ft){this.getLayerIndex(Qe).update(lt.layers,lt.removedIds),ft()},Sr.prototype.loadTile=function(Qe,lt,ft){this.getWorkerSource(Qe,lt.type,lt.source).loadTile(lt,ft)},Sr.prototype.loadDEMTile=function(Qe,lt,ft){this.getDEMWorkerSource(Qe,lt.source).loadTile(lt,ft)},Sr.prototype.reloadTile=function(Qe,lt,ft){this.getWorkerSource(Qe,lt.type,lt.source).reloadTile(lt,ft)},Sr.prototype.abortTile=function(Qe,lt,ft){this.getWorkerSource(Qe,lt.type,lt.source).abortTile(lt,ft)},Sr.prototype.removeTile=function(Qe,lt,ft){this.getWorkerSource(Qe,lt.type,lt.source).removeTile(lt,ft)},Sr.prototype.removeDEMTile=function(Qe,lt){this.getDEMWorkerSource(Qe,lt.source).removeTile(lt)},Sr.prototype.removeSource=function(Qe,lt,ft){if(!(!this.workerSources[Qe]||!this.workerSources[Qe][lt.type]||!this.workerSources[Qe][lt.type][lt.source])){var Et=this.workerSources[Qe][lt.type][lt.source];delete this.workerSources[Qe][lt.type][lt.source],Et.removeSource!==void 0?Et.removeSource(lt,ft):ft()}},Sr.prototype.loadWorkerSource=function(Qe,lt,ft){try{this.self.importScripts(lt.url),ft()}catch(Et){ft(Et.toString())}},Sr.prototype.syncRTLPluginState=function(Qe,lt,ft){try{e.plugin.setState(lt);var Et=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Et!=null){this.self.importScripts(Et);var Vt=e.plugin.isParsed(),Pe=Vt?void 0:new Error("RTL Text Plugin failed to import scripts from "+Et);ft(Pe,Vt)}}catch(Se){ft(Se.toString())}},Sr.prototype.getAvailableImages=function(Qe){var lt=this.availableImages[Qe];return lt||(lt=[]),lt},Sr.prototype.getLayerIndex=function(Qe){var lt=this.layerIndexes[Qe];return lt||(lt=this.layerIndexes[Qe]=new r),lt},Sr.prototype.getWorkerSource=function(Qe,lt,ft){var Et=this;if(this.workerSources[Qe]||(this.workerSources[Qe]={}),this.workerSources[Qe][lt]||(this.workerSources[Qe][lt]={}),!this.workerSources[Qe][lt][ft]){var Vt={send:function(Pe,Se,ot){Et.actor.send(Pe,Se,ot,Qe)}};this.workerSources[Qe][lt][ft]=new this.workerSourceTypes[lt](Vt,this.getLayerIndex(Qe),this.getAvailableImages(Qe))}return this.workerSources[Qe][lt][ft]},Sr.prototype.getDEMWorkerSource=function(Qe,lt){return this.demWorkerSources[Qe]||(this.demWorkerSources[Qe]={}),this.demWorkerSources[Qe][lt]||(this.demWorkerSources[Qe][lt]=new y),this.demWorkerSources[Qe][lt]},Sr.prototype.enforceCacheSizeLimit=function(Qe,lt){e.enforceCacheSizeLimit(lt)},typeof WorkerGlobalScope<"u"&&typeof e.window<"u"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Sr(e.window)),Sr}),T(["./shared"],function(e){var a=e.createCommonjsModule(function(ve){ve.exports?ve.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=de);function W(Xr){return!de(Xr)}function de(Xr){if(!J())return"not a browser";if(!ge())return"insufficent Array support";if(!Ce())return"insufficient Function support";if(!Fe())return"insufficient Object support";if(!$e())return"insufficient JSON support";if(!ht())return"insufficient worker support";if(!Dt())return"insufficient Uint8ClampedArray support";if(!er())return"insufficient ArrayBuffer support";if(!pr())return"insufficient Canvas/getImageData support";if(!Rr(Xr&&Xr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function J(){return typeof window<"u"&&typeof document<"u"}function ge(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ce(){return Function.prototype&&Function.prototype.bind}function Fe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function $e(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ht(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Xr=new Blob([""],{type:"text/javascript"}),rn=URL.createObjectURL(Xr),xn,Fn;try{Fn=new Worker(rn),xn=!0}catch{xn=!1}return Fn&&Fn.terminate(),URL.revokeObjectURL(rn),xn}function Dt(){return"Uint8ClampedArray"in window}function er(){return ArrayBuffer.isView}function pr(){var Xr=document.createElement("canvas");Xr.width=Xr.height=1;var rn=Xr.getContext("2d");if(!rn)return!1;var xn=rn.getImageData(0,0,1,1);return xn&&xn.width===Xr.width}var yr={};function Rr(Xr){return yr[Xr]===void 0&&(yr[Xr]=Jr(Xr)),yr[Xr]}W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Zr(Xr){var rn=document.createElement("canvas"),xn=Object.create(W.webGLContextAttributes);return xn.failIfMajorPerformanceCaveat=Xr,rn.probablySupportsContext?rn.probablySupportsContext("webgl",xn)||rn.probablySupportsContext("experimental-webgl",xn):rn.supportsContext?rn.supportsContext("webgl",xn)||rn.supportsContext("experimental-webgl",xn):rn.getContext("webgl",xn)||rn.getContext("experimental-webgl",xn)}function Jr(Xr){var rn=Zr(Xr);if(!rn)return!1;var xn=rn.createShader(rn.VERTEX_SHADER);return!xn||rn.isContextLost()?!1:(rn.shaderSource(xn,"void main() {}"),rn.compileShader(xn),rn.getShaderParameter(xn,rn.COMPILE_STATUS)===!0)}}),i={};i.create=function(ve,W,de){var J=e.window.document.createElement(ve);return W!==void 0&&(J.className=W),de&&de.appendChild(J),J},i.createNS=function(ve,W){var de=e.window.document.createElementNS(ve,W);return de};var n=e.window.document.documentElement.style;function r(ve){if(!n)return ve[0];for(var W=0;W<ve.length;W++)if(ve[W]in n)return ve[W];return ve[0]}var v=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s;i.disableDrag=function(){n&&v&&(s=n[v],n[v]="none")},i.enableDrag=function(){n&&v&&(n[v]=s)};var o=r(["transform","WebkitTransform"]);i.setTransform=function(ve,W){ve.style[o]=W};var b=!1;try{var g=Object.defineProperty({},"passive",{get:function(){b=!0}});e.window.addEventListener("test",g,g),e.window.removeEventListener("test",g,g)}catch{b=!1}i.addEventListener=function(ve,W,de,J){J===void 0&&(J={}),"passive"in J&&b?ve.addEventListener(W,de,J):ve.addEventListener(W,de,J.capture)},i.removeEventListener=function(ve,W,de,J){J===void 0&&(J={}),"passive"in J&&b?ve.removeEventListener(W,de,J):ve.removeEventListener(W,de,J.capture)};var d=function(ve){ve.preventDefault(),ve.stopPropagation(),e.window.removeEventListener("click",d,!0)};i.suppressClick=function(){e.window.addEventListener("click",d,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",d,!0)},0)},i.mousePos=function(ve,W){var de=ve.getBoundingClientRect();return new e.Point(W.clientX-de.left-ve.clientLeft,W.clientY-de.top-ve.clientTop)},i.touchPos=function(ve,W){for(var de=ve.getBoundingClientRect(),J=[],ge=0;ge<W.length;ge++)J.push(new e.Point(W[ge].clientX-de.left-ve.clientLeft,W[ge].clientY-de.top-ve.clientTop));return J},i.mouseButton=function(ve){return typeof e.window.InstallTrigger<"u"&&ve.button===2&&ve.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ve.button},i.remove=function(ve){ve.parentNode&&ve.parentNode.removeChild(ve)};function f(ve,W,de){var J,ge,Ce,Fe=e.browser.devicePixelRatio>1?"@2x":"",$e=e.getJSON(W.transformRequest(W.normalizeSpriteURL(ve,Fe,".json"),e.ResourceType.SpriteJSON),function(er,pr){$e=null,Ce||(Ce=er,J=pr,Dt())}),ht=e.getImage(W.transformRequest(W.normalizeSpriteURL(ve,Fe,".png"),e.ResourceType.SpriteImage),function(er,pr){ht=null,Ce||(Ce=er,ge=pr,Dt())});function Dt(){if(Ce)de(Ce);else if(J&&ge){var er=e.browser.getImageData(ge),pr={};for(var yr in J){var Rr=J[yr],Zr=Rr.width,Jr=Rr.height,Xr=Rr.x,rn=Rr.y,xn=Rr.sdf,Fn=Rr.pixelRatio,Gn=Rr.stretchX,oa=Rr.stretchY,ca=Rr.content,la=new e.RGBAImage({width:Zr,height:Jr});e.RGBAImage.copy(er,la,{x:Xr,y:rn},{x:0,y:0},{width:Zr,height:Jr}),pr[yr]={data:la,pixelRatio:Fn,sdf:xn,stretchX:Gn,stretchY:oa,content:ca}}de(null,pr)}}return{cancel:function(){$e&&($e.cancel(),$e=null),ht&&(ht.cancel(),ht=null)}}}function y(ve){var W=ve.userImage;if(W&&W.render){var de=W.render();if(de)return ve.data.replace(new Uint8Array(W.data.buffer)),!0}return!1}var l=1,x=function(ve){function W(){ve.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(J){if(this.loaded!==J&&(this.loaded=J,J)){for(var ge=0,Ce=this.requestors;ge<Ce.length;ge+=1){var Fe=Ce[ge],$e=Fe.ids,ht=Fe.callback;this._notify($e,ht)}this.requestors=[]}},W.prototype.getImage=function(J){return this.images[J]},W.prototype.addImage=function(J,ge){this._validate(J,ge)&&(this.images[J]=ge)},W.prototype._validate=function(J,ge){var Ce=!0;return this._validateStretch(ge.stretchX,ge.data&&ge.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchX" value'))),Ce=!1),this._validateStretch(ge.stretchY,ge.data&&ge.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchY" value'))),Ce=!1),this._validateContent(ge.content,ge)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "content" value'))),Ce=!1),Ce},W.prototype._validateStretch=function(J,ge){if(!J)return!0;for(var Ce=0,Fe=0,$e=J;Fe<$e.length;Fe+=1){var ht=$e[Fe];if(ht[0]<Ce||ht[1]<ht[0]||ge<ht[1])return!1;Ce=ht[1]}return!0},W.prototype._validateContent=function(J,ge){return J?!(J.length!==4||J[0]<0||ge.data.width<J[0]||J[1]<0||ge.data.height<J[1]||J[2]<0||ge.data.width<J[2]||J[3]<0||ge.data.height<J[3]||J[2]<J[0]||J[3]<J[1]):!0},W.prototype.updateImage=function(J,ge){var Ce=this.images[J];ge.version=Ce.version+1,this.images[J]=ge,this.updatedImages[J]=!0},W.prototype.removeImage=function(J){var ge=this.images[J];delete this.images[J],delete this.patterns[J],ge.userImage&&ge.userImage.onRemove&&ge.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(J,ge){var Ce=!0;if(!this.isLoaded())for(var Fe=0,$e=J;Fe<$e.length;Fe+=1){var ht=$e[Fe];this.images[ht]||(Ce=!1)}this.isLoaded()||Ce?this._notify(J,ge):this.requestors.push({ids:J,callback:ge})},W.prototype._notify=function(J,ge){for(var Ce={},Fe=0,$e=J;Fe<$e.length;Fe+=1){var ht=$e[Fe];this.images[ht]||this.fire(new e.Event("styleimagemissing",{id:ht}));var Dt=this.images[ht];Dt?Ce[ht]={data:Dt.data.clone(),pixelRatio:Dt.pixelRatio,sdf:Dt.sdf,version:Dt.version,stretchX:Dt.stretchX,stretchY:Dt.stretchY,content:Dt.content,hasRenderCallback:Boolean(Dt.userImage&&Dt.userImage.render)}:e.warnOnce('Image "'+ht+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ge(null,Ce)},W.prototype.getPixelSize=function(){var J=this.atlasImage,ge=J.width,Ce=J.height;return{width:ge,height:Ce}},W.prototype.getPattern=function(J){var ge=this.patterns[J],Ce=this.getImage(J);if(!Ce)return null;if(ge&&ge.position.version===Ce.version)return ge.position;if(ge)ge.position.version=Ce.version;else{var Fe=Ce.data.width+l*2,$e=Ce.data.height+l*2,ht={w:Fe,h:$e,x:0,y:0},Dt=new e.ImagePosition(ht,Ce);this.patterns[J]={bin:ht,position:Dt}}return this._updatePatternAtlas(),this.patterns[J].position},W.prototype.bind=function(J){var ge=J.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(J,this.atlasImage,ge.RGBA),this.atlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var J=[];for(var ge in this.patterns)J.push(this.patterns[ge].bin);var Ce=e.potpack(J),Fe=Ce.w,$e=Ce.h,ht=this.atlasImage;ht.resize({width:Fe||1,height:$e||1});for(var Dt in this.patterns){var er=this.patterns[Dt],pr=er.bin,yr=pr.x+l,Rr=pr.y+l,Zr=this.images[Dt].data,Jr=Zr.width,Xr=Zr.height;e.RGBAImage.copy(Zr,ht,{x:0,y:0},{x:yr,y:Rr},{width:Jr,height:Xr}),e.RGBAImage.copy(Zr,ht,{x:0,y:Xr-1},{x:yr,y:Rr-1},{width:Jr,height:1}),e.RGBAImage.copy(Zr,ht,{x:0,y:0},{x:yr,y:Rr+Xr},{width:Jr,height:1}),e.RGBAImage.copy(Zr,ht,{x:Jr-1,y:0},{x:yr-1,y:Rr},{width:1,height:Xr}),e.RGBAImage.copy(Zr,ht,{x:0,y:0},{x:yr+Jr,y:Rr},{width:1,height:Xr})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(J){for(var ge=0,Ce=J;ge<Ce.length;ge+=1){var Fe=Ce[ge];if(!this.callbackDispatchedThisFrame[Fe]){this.callbackDispatchedThisFrame[Fe]=!0;var $e=this.images[Fe],ht=y($e);ht&&this.updateImage(Fe,$e)}}},W}(e.Evented);function c(ve,W,de,J,ge){var Ce=W*256,Fe=Ce+255,$e=J.transformRequest(J.normalizeGlyphsURL(de).replace("{fontstack}",ve).replace("{range}",Ce+"-"+Fe),e.ResourceType.Glyphs);e.getArrayBuffer($e,function(ht,Dt){if(ht)ge(ht);else if(Dt){for(var er={},pr=0,yr=e.parseGlyphPBF(Dt);pr<yr.length;pr+=1){var Rr=yr[pr];er[Rr.id]=Rr}ge(null,er)}})}var M=_,w=_,p=1e20;function _(ve,W,de,J,ge,Ce){this.fontSize=ve||24,this.buffer=W===void 0?3:W,this.cutoff=J||.25,this.fontFamily=ge||"sans-serif",this.fontWeight=Ce||"normal",this.radius=de||8;var Fe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Fe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Fe*Fe),this.gridInner=new Float64Array(Fe*Fe),this.f=new Float64Array(Fe),this.d=new Float64Array(Fe),this.z=new Float64Array(Fe+1),this.v=new Int16Array(Fe),this.middle=Math.round(Fe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}_.prototype.draw=function(ve){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ve,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),de=new Uint8ClampedArray(this.size*this.size),J=0;J<this.size*this.size;J++){var ge=W.data[J*4+3]/255;this.gridOuter[J]=ge===1?0:ge===0?p:Math.pow(Math.max(0,.5-ge),2),this.gridInner[J]=ge===1?p:ge===0?0:Math.pow(Math.max(0,ge-.5),2)}for(h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),J=0;J<this.size*this.size;J++){var Ce=this.gridOuter[J]-this.gridInner[J];de[J]=Math.max(0,Math.min(255,Math.round(255-255*(Ce/this.radius+this.cutoff))))}return de};function h(ve,W,de,J,ge,Ce,Fe){for(var $e=0;$e<W;$e++){for(var ht=0;ht<de;ht++)J[ht]=ve[ht*W+$e];for(L(J,ge,Ce,Fe,de),ht=0;ht<de;ht++)ve[ht*W+$e]=ge[ht]}for(ht=0;ht<de;ht++){for($e=0;$e<W;$e++)J[$e]=ve[ht*W+$e];for(L(J,ge,Ce,Fe,W),$e=0;$e<W;$e++)ve[ht*W+$e]=Math.sqrt(ge[$e])}}function L(ve,W,de,J,ge){de[0]=0,J[0]=-p,J[1]=+p;for(var Ce=1,Fe=0;Ce<ge;Ce++){for(var $e=(ve[Ce]+Ce*Ce-(ve[de[Fe]]+de[Fe]*de[Fe]))/(2*Ce-2*de[Fe]);$e<=J[Fe];)Fe--,$e=(ve[Ce]+Ce*Ce-(ve[de[Fe]]+de[Fe]*de[Fe]))/(2*Ce-2*de[Fe]);Fe++,de[Fe]=Ce,J[Fe]=$e,J[Fe+1]=+p}for(Ce=0,Fe=0;Ce<ge;Ce++){for(;J[Fe+1]<Ce;)Fe++;W[Ce]=(Ce-de[Fe])*(Ce-de[Fe])+ve[de[Fe]]}}M.default=w;var E=function(W,de){this.requestManager=W,this.localIdeographFontFamily=de,this.entries={}};E.prototype.setURL=function(W){this.url=W},E.prototype.getGlyphs=function(W,de){var J=this,ge=[];for(var Ce in W)for(var Fe=0,$e=W[Ce];Fe<$e.length;Fe+=1){var ht=$e[Fe];ge.push({stack:Ce,id:ht})}e.asyncAll(ge,function(Dt,er){var pr=Dt.stack,yr=Dt.id,Rr=J.entries[pr];Rr||(Rr=J.entries[pr]={glyphs:{},requests:{},ranges:{}});var Zr=Rr.glyphs[yr];if(Zr!==void 0){er(null,{stack:pr,id:yr,glyph:Zr});return}if(Zr=J._tinySDF(Rr,pr,yr),Zr){Rr.glyphs[yr]=Zr,er(null,{stack:pr,id:yr,glyph:Zr});return}var Jr=Math.floor(yr/256);if(Jr*256>65535){er(new Error("glyphs > 65535 not supported"));return}if(Rr.ranges[Jr]){er(null,{stack:pr,id:yr,glyph:Zr});return}var Xr=Rr.requests[Jr];Xr||(Xr=Rr.requests[Jr]=[],E.loadGlyphRange(pr,Jr,J.url,J.requestManager,function(rn,xn){if(xn){for(var Fn in xn)J._doesCharSupportLocalGlyph(+Fn)||(Rr.glyphs[+Fn]=xn[+Fn]);Rr.ranges[Jr]=!0}for(var Gn=0,oa=Xr;Gn<oa.length;Gn+=1){var ca=oa[Gn];ca(rn,xn)}delete Rr.requests[Jr]})),Xr.push(function(rn,xn){rn?er(rn):xn&&er(null,{stack:pr,id:yr,glyph:xn[yr]||null})})},function(Dt,er){if(Dt)de(Dt);else if(er){for(var pr={},yr=0,Rr=er;yr<Rr.length;yr+=1){var Zr=Rr[yr],Jr=Zr.stack,Xr=Zr.id,rn=Zr.glyph;(pr[Jr]||(pr[Jr]={}))[Xr]=rn&&{id:rn.id,bitmap:rn.bitmap.clone(),metrics:rn.metrics}}de(null,pr)}})},E.prototype._doesCharSupportLocalGlyph=function(W){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](W)||e.isChar["Hangul Syllables"](W)||e.isChar.Hiragana(W)||e.isChar.Katakana(W))},E.prototype._tinySDF=function(W,de,J){var ge=this.localIdeographFontFamily;if(!!ge&&!!this._doesCharSupportLocalGlyph(J)){var Ce=W.tinySDF;if(!Ce){var Fe="400";/bold/i.test(de)?Fe="900":/medium/i.test(de)?Fe="500":/light/i.test(de)&&(Fe="200"),Ce=W.tinySDF=new E.TinySDF(24,3,8,.25,ge,Fe)}return{id:J,bitmap:new e.AlphaImage({width:30,height:30},Ce.draw(String.fromCharCode(J))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},E.loadGlyphRange=c,E.TinySDF=M;var S=function(){this.specification=e.styleSpec.light.position};S.prototype.possiblyEvaluate=function(W,de){return e.sphericalToCartesian(W.expression.evaluate(de))},S.prototype.interpolate=function(W,de,J){return{x:e.number(W.x,de.x,J),y:e.number(W.y,de.y,J),z:e.number(W.z,de.z,J)}};var P=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new S,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F="-transition",I=function(ve){function W(de){ve.call(this),this._transitionable=new e.Transitionable(P),this.setLight(de),this._transitioning=this._transitionable.untransitioned()}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(J,ge){if(ge===void 0&&(ge={}),!this._validate(e.validateLight,J,ge))for(var Ce in J){var Fe=J[Ce];e.endsWith(Ce,F)?this._transitionable.setTransition(Ce.slice(0,-F.length),Fe):this._transitionable.setValue(Ce,Fe)}},W.prototype.updateTransitions=function(J){this._transitioning=this._transitionable.transitioned(J,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(J){this.properties=this._transitioning.possiblyEvaluate(J)},W.prototype._validate=function(J,ge,Ce){return Ce&&Ce.validate===!1?!1:e.emitValidationErrors(this,J.call(e.validateStyle,e.extend({value:ge,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},W}(e.Evented),D=function(W,de){this.width=W,this.height=de,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(W,de){var J=W.join(",")+String(de);return this.dashEntry[J]||(this.dashEntry[J]=this.addDash(W,de)),this.dashEntry[J]},D.prototype.getDashRanges=function(W,de,J){var ge=W.length%2===1,Ce=[],Fe=ge?-W[W.length-1]*J:0,$e=W[0]*J,ht=!0;Ce.push({left:Fe,right:$e,isDash:ht,zeroLength:W[0]===0});for(var Dt=W[0],er=1;er<W.length;er++){ht=!ht;var pr=W[er];Fe=Dt*J,Dt+=pr,$e=Dt*J,Ce.push({left:Fe,right:$e,isDash:ht,zeroLength:pr===0})}return Ce},D.prototype.addRoundDash=function(W,de,J){for(var ge=de/2,Ce=-J;Ce<=J;Ce++)for(var Fe=this.nextRow+J+Ce,$e=this.width*Fe,ht=0,Dt=W[ht],er=0;er<this.width;er++){er/Dt.right>1&&(Dt=W[++ht]);var pr=Math.abs(er-Dt.left),yr=Math.abs(er-Dt.right),Rr=Math.min(pr,yr),Zr=void 0,Jr=Ce/J*(ge+1);if(Dt.isDash){var Xr=ge-Math.abs(Jr);Zr=Math.sqrt(Rr*Rr+Xr*Xr)}else Zr=ge-Math.sqrt(Rr*Rr+Jr*Jr);this.data[$e+er]=Math.max(0,Math.min(255,Zr+128))}},D.prototype.addRegularDash=function(W){for(var de=W.length-1;de>=0;--de){var J=W[de],ge=W[de+1];J.zeroLength?W.splice(de,1):ge&&ge.isDash===J.isDash&&(ge.left=J.left,W.splice(de,1))}var Ce=W[0],Fe=W[W.length-1];Ce.isDash===Fe.isDash&&(Ce.left=Fe.left-this.width,Fe.right=Ce.right+this.width);for(var $e=this.width*this.nextRow,ht=0,Dt=W[ht],er=0;er<this.width;er++){er/Dt.right>1&&(Dt=W[++ht]);var pr=Math.abs(er-Dt.left),yr=Math.abs(er-Dt.right),Rr=Math.min(pr,yr),Zr=Dt.isDash?Rr:-Rr;this.data[$e+er]=Math.max(0,Math.min(255,Zr+128))}},D.prototype.addDash=function(W,de){var J=de?7:0,ge=2*J+1;if(this.nextRow+ge>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ce=0,Fe=0;Fe<W.length;Fe++)Ce+=W[Fe];if(Ce!==0){var $e=this.width/Ce,ht=this.getDashRanges(W,this.width,$e);de?this.addRoundDash(ht,$e,J):this.addRegularDash(ht)}var Dt={y:(this.nextRow+J+.5)/this.height,height:2*J/this.height,width:Ce};return this.nextRow+=ge,this.dirty=!0,Dt},D.prototype.bind=function(W){var de=W.gl;this.texture?(de.bindTexture(de.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,de.texSubImage2D(de.TEXTURE_2D,0,0,0,this.width,this.height,de.ALPHA,de.UNSIGNED_BYTE,this.data))):(this.texture=de.createTexture(),de.bindTexture(de.TEXTURE_2D,this.texture),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),de.texImage2D(de.TEXTURE_2D,0,de.ALPHA,this.width,this.height,0,de.ALPHA,de.UNSIGNED_BYTE,this.data))};var R=function ve(W,de){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var J=this.workerPool.acquire(this.id),ge=0;ge<J.length;ge++){var Ce=J[ge],Fe=new ve.Actor(Ce,de,this.id);Fe.name="Worker "+ge,this.actors.push(Fe)}};R.prototype.broadcast=function(W,de,J){J=J||function(){},e.asyncAll(this.actors,function(ge,Ce){ge.send(W,de,Ce)},J)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(W){W.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=e.Actor;function O(ve,W,de){var J=function(ge,Ce){if(ge)return de(ge);if(Ce){var Fe=e.pick(e.extend(Ce,ve),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ce.vector_layers&&(Fe.vectorLayers=Ce.vector_layers,Fe.vectorLayerIds=Fe.vectorLayers.map(function($e){return $e.id})),Fe.tiles=W.canonicalizeTileset(Fe,ve.url),de(null,Fe)}};return ve.url?e.getJSON(W.transformRequest(W.normalizeSourceURL(ve.url),e.ResourceType.Source),J):e.browser.frame(function(){return J(null,ve)})}var z=function(W,de,J){this.bounds=e.LngLatBounds.convert(this.validateBounds(W)),this.minzoom=de||0,this.maxzoom=J||24};z.prototype.validateBounds=function(W){return!Array.isArray(W)||W.length!==4?[-180,-90,180,90]:[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]},z.prototype.contains=function(W){var de=Math.pow(2,W.z),J={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*de),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*de),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*de),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*de)},ge=W.x>=J.minX&&W.x<J.maxX&&W.y>=J.minY&&W.y<J.maxY;return ge};var G=function(ve){function W(de,J,ge,Ce){if(ve.call(this),this.id=de,this.dispatcher=ge,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(J,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},J),this._collectResourceTiming=J.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ce)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(ge,Ce){J._tileJSONRequest=null,J._loaded=!0,ge?J.fire(new e.ErrorEvent(ge)):Ce&&(e.extend(J,Ce),Ce.bounds&&(J.tileBounds=new z(Ce.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Ce.tiles,J.map._requestManager._customAccessToken),e.postMapLoadEvent(Ce.tiles,J.map._getMapId(),J.map._requestManager._skuToken,J.map._requestManager._customAccessToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.loadTile=function(J,ge){var Ce=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme)),Fe={request:this.map._requestManager.transformRequest(Ce,e.ResourceType.Tile),uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,tileSize:this.tileSize*J.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Fe.request.collectResourceTiming=this._collectResourceTiming,!J.actor||J.state==="expired"?(J.actor=this.dispatcher.getActor(),J.request=J.actor.send("loadTile",Fe,$e.bind(this))):J.state==="loading"?J.reloadCallback=ge:J.request=J.actor.send("reloadTile",Fe,$e.bind(this));function $e(ht,Dt){if(delete J.request,J.aborted)return ge(null);if(ht&&ht.status!==404)return ge(ht);Dt&&Dt.resourceTiming&&(J.resourceTiming=Dt.resourceTiming),this.map._refreshExpiredTiles&&Dt&&J.setExpiryData(Dt),J.loadVectorData(Dt,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),ge(null),J.reloadCallback&&(this.loadTile(J,J.reloadCallback),J.reloadCallback=null)}},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.actor&&J.actor.send("abortTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(J){J.unloadVectorData(),J.actor&&J.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(e.Evented),Y=function(ve){function W(de,J,ge,Ce){ve.call(this),this.id=de,this.dispatcher=ge,this.setEventedParent(Ce),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},J),e.extend(this,e.pick(J,["url","scheme","tileSize"]))}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(ge,Ce){J._tileJSONRequest=null,J._loaded=!0,ge?J.fire(new e.ErrorEvent(ge)):Ce&&(e.extend(J,Ce),Ce.bounds&&(J.tileBounds=new z(Ce.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Ce.tiles),e.postMapLoadEvent(Ce.tiles,J.map._getMapId(),J.map._requestManager._skuToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.loadTile=function(J,ge){var Ce=this,Fe=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Fe,e.ResourceType.Tile),function($e,ht){if(delete J.request,J.aborted)J.state="unloaded",ge(null);else if($e)J.state="errored",ge($e);else if(ht){Ce.map._refreshExpiredTiles&&J.setExpiryData(ht),delete ht.cacheControl,delete ht.expires;var Dt=Ce.map.painter.context,er=Dt.gl;J.texture=Ce.map.painter.getTileTexture(ht.width),J.texture?J.texture.update(ht,{useMipmap:!0}):(J.texture=new e.Texture(Dt,ht,er.RGBA,{useMipmap:!0}),J.texture.bind(er.LINEAR,er.CLAMP_TO_EDGE,er.LINEAR_MIPMAP_NEAREST),Dt.extTextureFilterAnisotropic&&er.texParameterf(er.TEXTURE_2D,Dt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Dt.extTextureFilterAnisotropicMax)),J.state="loaded",e.cacheEntryPossiblyAdded(Ce.dispatcher),ge(null)}})},W.prototype.abortTile=function(J,ge){J.request&&(J.request.cancel(),delete J.request),ge()},W.prototype.unloadTile=function(J,ge){J.texture&&this.map.painter.saveTileTexture(J.texture),ge()},W.prototype.hasTransition=function(){return!1},W}(e.Evented),ee=function(ve){function W(de,J,ge,Ce){ve.call(this,de,J,ge,Ce),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},J),this.encoding=J.encoding||"mapbox"}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(J,ge){var Ce=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Ce,e.ResourceType.Tile),Fe.bind(this)),J.neighboringTiles=this._getNeighboringTiles(J.tileID);function Fe(ht,Dt){if(delete J.request,J.aborted)J.state="unloaded",ge(null);else if(ht)J.state="errored",ge(ht);else if(Dt){this.map._refreshExpiredTiles&&J.setExpiryData(Dt),delete Dt.cacheControl,delete Dt.expires;var er=e.window.ImageBitmap&&Dt instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),pr=er?Dt:e.browser.getImageData(Dt,1),yr={uid:J.uid,coord:J.tileID,source:this.id,rawImageData:pr,encoding:this.encoding};(!J.actor||J.state==="expired")&&(J.actor=this.dispatcher.getActor(),J.actor.send("loadDEMTile",yr,$e.bind(this)))}}function $e(ht,Dt){ht&&(J.state="errored",ge(ht)),Dt&&(J.dem=Dt,J.needsHillshadePrepare=!0,J.state="loaded",ge(null))}},W.prototype._getNeighboringTiles=function(J){var ge=J.canonical,Ce=Math.pow(2,ge.z),Fe=(ge.x-1+Ce)%Ce,$e=ge.x===0?J.wrap-1:J.wrap,ht=(ge.x+1+Ce)%Ce,Dt=ge.x+1===Ce?J.wrap+1:J.wrap,er={};return er[new e.OverscaledTileID(J.overscaledZ,$e,ge.z,Fe,ge.y).key]={backfilled:!1},er[new e.OverscaledTileID(J.overscaledZ,Dt,ge.z,ht,ge.y).key]={backfilled:!1},ge.y>0&&(er[new e.OverscaledTileID(J.overscaledZ,$e,ge.z,Fe,ge.y-1).key]={backfilled:!1},er[new e.OverscaledTileID(J.overscaledZ,J.wrap,ge.z,ge.x,ge.y-1).key]={backfilled:!1},er[new e.OverscaledTileID(J.overscaledZ,Dt,ge.z,ht,ge.y-1).key]={backfilled:!1}),ge.y+1<Ce&&(er[new e.OverscaledTileID(J.overscaledZ,$e,ge.z,Fe,ge.y+1).key]={backfilled:!1},er[new e.OverscaledTileID(J.overscaledZ,J.wrap,ge.z,ge.x,ge.y+1).key]={backfilled:!1},er[new e.OverscaledTileID(J.overscaledZ,Dt,ge.z,ht,ge.y+1).key]={backfilled:!1}),er},W.prototype.unloadTile=function(J){J.demTexture&&this.map.painter.saveTileTexture(J.demTexture),J.fbo&&(J.fbo.destroy(),delete J.fbo),J.dem&&delete J.dem,delete J.neighboringTiles,J.state="unloaded",J.actor&&J.actor.send("removeDEMTile",{uid:J.uid,source:this.id})},W}(Y),j=function(ve){function W(de,J,ge,Ce){ve.call(this),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ge.getActor(),this.setEventedParent(Ce),this._data=J.data,this._options=e.extend({},J),this._collectResourceTiming=J.collectResourceTiming,this._resourceTiming=[],J.maxzoom!==void 0&&(this.maxzoom=J.maxzoom),J.type&&(this.type=J.type),J.attribution&&(this.attribution=J.attribution),this.promoteId=J.promoteId;var Fe=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:J.cluster||!1,geojsonVtOptions:{buffer:(J.buffer!==void 0?J.buffer:128)*Fe,tolerance:(J.tolerance!==void 0?J.tolerance:.375)*Fe,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:J.lineMetrics||!1,generateId:J.generateId||!1},superclusterOptions:{maxZoom:J.clusterMaxZoom!==void 0?Math.min(J.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(J.clusterRadius||50)*Fe,log:!1,generateId:J.generateId||!1},clusterProperties:J.clusterProperties},J.workerOptions)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ge){if(ge){J.fire(new e.ErrorEvent(ge));return}var Ce={dataType:"source",sourceDataType:"metadata"};J._collectResourceTiming&&J._resourceTiming&&J._resourceTiming.length>0&&(Ce.resourceTiming=J._resourceTiming,J._resourceTiming=[]),J.fire(new e.Event("data",Ce))})},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setData=function(J){var ge=this;return this._data=J,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ce){if(Ce){ge.fire(new e.ErrorEvent(Ce));return}var Fe={dataType:"source",sourceDataType:"content"};ge._collectResourceTiming&&ge._resourceTiming&&ge._resourceTiming.length>0&&(Fe.resourceTiming=ge._resourceTiming,ge._resourceTiming=[]),ge.fire(new e.Event("data",Fe))}),this},W.prototype.getClusterExpansionZoom=function(J,ge){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:J,source:this.id},ge),this},W.prototype.getClusterChildren=function(J,ge){return this.actor.send("geojson.getClusterChildren",{clusterId:J,source:this.id},ge),this},W.prototype.getClusterLeaves=function(J,ge,Ce,Fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:J,limit:ge,offset:Ce},Fe),this},W.prototype._updateWorkerData=function(J){var ge=this;this._loaded=!1;var Ce=e.extend({},this.workerOptions),Fe=this._data;typeof Fe=="string"?(Ce.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Fe),e.ResourceType.Source),Ce.request.collectResourceTiming=this._collectResourceTiming):Ce.data=JSON.stringify(Fe),this.actor.send(this.type+".loadData",Ce,function($e,ht){ge._removed||ht&&ht.abandoned||(ge._loaded=!0,ht&&ht.resourceTiming&&ht.resourceTiming[ge.id]&&(ge._resourceTiming=ht.resourceTiming[ge.id].slice(0)),ge.actor.send(ge.type+".coalesce",{source:Ce.source},null),J($e))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(J,ge){var Ce=this,Fe=J.actor?"reloadTile":"loadTile";J.actor=this.actor;var $e={type:this.type,uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};J.request=this.actor.send(Fe,$e,function(ht,Dt){return delete J.request,J.unloadVectorData(),J.aborted?ge(null):ht?ge(ht):(J.loadVectorData(Dt,Ce.map.painter,Fe==="reloadTile"),ge(null))})},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.aborted=!0},W.prototype.unloadTile=function(J){J.unloadVectorData(),this.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(e.Evented),X=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ie=function(ve){function W(de,J,ge,Ce){ve.call(this),this.id=de,this.dispatcher=ge,this.coordinates=J.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ce),this.options=J}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(J,ge){var Ce=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Fe,$e){Ce._loaded=!0,Fe?Ce.fire(new e.ErrorEvent(Fe)):$e&&(Ce.image=$e,J&&(Ce.coordinates=J),ge&&ge(),Ce._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(J){var ge=this;return!this.image||!J.url?this:(this.options.url=J.url,this.load(J.coordinates,function(){ge.texture=null}),this)},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setCoordinates=function(J){var ge=this;this.coordinates=J;var Ce=J.map(e.MercatorCoordinate.fromLngLat);this.tileID=he(Ce),this.minzoom=this.maxzoom=this.tileID.z;var Fe=Ce.map(function($e){return ge.tileID.getTilePoint($e)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Fe[0].x,Fe[0].y,0,0),this._boundsArray.emplaceBack(Fe[1].x,Fe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Fe[3].x,Fe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Fe[2].x,Fe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var J=this.map.painter.context,ge=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(J,this.image,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ce in this.tiles){var Fe=this.tiles[Ce];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},W.prototype.loadTile=function(J,ge){this.tileID&&this.tileID.equals(J.tileID.canonical)?(this.tiles[String(J.tileID.wrap)]=J,J.buckets={},ge(null)):(J.state="errored",ge(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(e.Evented);function he(ve){for(var W=1/0,de=1/0,J=-1/0,ge=-1/0,Ce=0,Fe=ve;Ce<Fe.length;Ce+=1){var $e=Fe[Ce];W=Math.min(W,$e.x),de=Math.min(de,$e.y),J=Math.max(J,$e.x),ge=Math.max(ge,$e.y)}var ht=J-W,Dt=ge-de,er=Math.max(ht,Dt),pr=Math.max(0,Math.floor(-Math.log(er)/Math.LN2)),yr=Math.pow(2,pr);return new e.CanonicalTileID(pr,Math.floor((W+J)/2*yr),Math.floor((de+ge)/2*yr))}var K=function(ve){function W(de,J,ge,Ce){ve.call(this,de,J,ge,Ce),this.roundZoom=!0,this.type="video",this.options=J}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1;var ge=this.options;this.urls=[];for(var Ce=0,Fe=ge.urls;Ce<Fe.length;Ce+=1){var $e=Fe[Ce];this.urls.push(this.map._requestManager.transformRequest($e,e.ResourceType.Source).url)}e.getVideo(this.urls,function(ht,Dt){J._loaded=!0,ht?J.fire(new e.ErrorEvent(ht)):Dt&&(J.video=Dt,J.video.loop=!0,J.video.addEventListener("playing",function(){J.map.triggerRepaint()}),J.map&&J.video.play(),J._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(J){if(this.video){var ge=this.video.seekable;J<ge.start(0)||J>ge.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ge.start(0)+" and "+ge.end(0)+"-second mark."))):this.video.currentTime=J}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(J){this.map||(this.map=J,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var J=this.map.painter.context,ge=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),ge.texSubImage2D(ge.TEXTURE_2D,0,0,0,ge.RGBA,ge.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(J,this.video,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ce in this.tiles){var Fe=this.tiles[Ce];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(ie),$=function(ve){function W(de,J,ge,Ce){ve.call(this,de,J,ge,Ce),J.coordinates?(!Array.isArray(J.coordinates)||J.coordinates.length!==4||J.coordinates.some(function(Fe){return!Array.isArray(Fe)||Fe.length!==2||Fe.some(function($e){return typeof $e!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "coordinates"'))),J.animate&&typeof J.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'optional "animate" property must be a boolean value'))),J.canvas?typeof J.canvas!="string"&&!(J.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "canvas"'))),this.options=J,this.animate=J.animate!==void 0?J.animate:!0}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(J){this.map=J,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var J=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,J=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,J=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ge=this.map.painter.context,Ce=ge.gl;this.boundsBuffer||(this.boundsBuffer=ge.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(J||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(ge,this.canvas,Ce.RGBA,{premultiply:!0});for(var Fe in this.tiles){var $e=this.tiles[Fe];$e.state!=="loaded"&&($e.state="loaded",$e.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var J=0,ge=[this.canvas.width,this.canvas.height];J<ge.length;J+=1){var Ce=ge[J];if(isNaN(Ce)||Ce<=0)return!0}return!1},W}(ie),U={vector:G,raster:Y,"raster-dem":ee,geojson:j,video:K,image:ie,canvas:$},H=function(ve,W,de,J){var ge=new U[W.type](ve,W,de,J);if(ge.id!==ve)throw new Error("Expected Source id to be "+ve+" instead of "+ge.id);return e.bindAll(["load","abort","unload","serialize","prepare"],ge),ge},q=function(ve){return U[ve]},re=function(ve,W){U[ve]=W};function Z(ve,W){var de=e.identity([]);return e.translate(de,de,[1,1,0]),e.scale(de,de,[ve.width*.5,ve.height*.5,1]),e.multiply(de,de,ve.calculatePosMatrix(W.toUnwrapped()))}function Q(ve,W,de){if(ve)for(var J=0,ge=ve;J<ge.length;J+=1){var Ce=ge[J],Fe=W[Ce];if(Fe&&Fe.source===de&&Fe.type==="fill-extrusion")return!0}else for(var $e in W){var ht=W[$e];if(ht.source===de&&ht.type==="fill-extrusion")return!0}return!1}function oe(ve,W,de,J,ge,Ce){var Fe=Q(ge&&ge.layers,W,ve.id),$e=Ce.maxPitchScaleFactor(),ht=ve.tilesIn(J,$e,Fe);ht.sort(le);for(var Dt=[],er=0,pr=ht;er<pr.length;er+=1){var yr=pr[er];Dt.push({wrappedTileID:yr.tileID.wrapped().key,queryResults:yr.tile.queryRenderedFeatures(W,de,ve._state,yr.queryGeometry,yr.cameraQueryGeometry,yr.scale,ge,Ce,$e,Z(ve.transform,yr.tileID))})}var Rr=_e(Dt);for(var Zr in Rr)Rr[Zr].forEach(function(Jr){var Xr=Jr.feature,rn=ve.getFeatureState(Xr.layer["source-layer"],Xr.id);Xr.source=Xr.layer.source,Xr.layer["source-layer"]&&(Xr.sourceLayer=Xr.layer["source-layer"]),Xr.state=rn});return Rr}function se(ve,W,de,J,ge,Ce,Fe){for(var $e={},ht=Ce.queryRenderedSymbols(J),Dt=[],er=0,pr=Object.keys(ht).map(Number);er<pr.length;er+=1){var yr=pr[er];Dt.push(Fe[yr])}Dt.sort(le);for(var Rr=function(){var xn=Jr[Zr],Fn=xn.featureIndex.lookupSymbolFeatures(ht[xn.bucketInstanceId],W,xn.bucketIndex,xn.sourceLayerIndex,ge.filter,ge.layers,ge.availableImages,ve);for(var Gn in Fn){var oa=$e[Gn]=$e[Gn]||[],ca=Fn[Gn];ca.sort(function(Ca,Fa){var Ba=xn.featureSortOrder;if(Ba){var ti=Ba.indexOf(Ca.featureIndex),pi=Ba.indexOf(Fa.featureIndex);return pi-ti}else return Fa.featureIndex-Ca.featureIndex});for(var la=0,wa=ca;la<wa.length;la+=1){var La=wa[la];oa.push(La)}}},Zr=0,Jr=Dt;Zr<Jr.length;Zr+=1)Rr();var Xr=function(xn){$e[xn].forEach(function(Fn){var Gn=Fn.feature,oa=ve[xn],ca=de[oa.source],la=ca.getFeatureState(Gn.layer["source-layer"],Gn.id);Gn.source=Gn.layer.source,Gn.layer["source-layer"]&&(Gn.sourceLayer=Gn.layer["source-layer"]),Gn.state=la})};for(var rn in $e)Xr(rn);return $e}function ae(ve,W){for(var de=ve.getRenderableIds().map(function(ht){return ve.getTileByID(ht)}),J=[],ge={},Ce=0;Ce<de.length;Ce++){var Fe=de[Ce],$e=Fe.tileID.canonical.key;ge[$e]||(ge[$e]=!0,Fe.querySourceFeatures(J,W))}return J}function le(ve,W){var de=ve.tileID,J=W.tileID;return de.overscaledZ-J.overscaledZ||de.canonical.y-J.canonical.y||de.wrap-J.wrap||de.canonical.x-J.canonical.x}function _e(ve){for(var W={},de={},J=0,ge=ve;J<ge.length;J+=1){var Ce=ge[J],Fe=Ce.queryResults,$e=Ce.wrappedTileID,ht=de[$e]=de[$e]||{};for(var Dt in Fe)for(var er=Fe[Dt],pr=ht[Dt]=ht[Dt]||{},yr=W[Dt]=W[Dt]||[],Rr=0,Zr=er;Rr<Zr.length;Rr+=1){var Jr=Zr[Rr];pr[Jr.featureIndex]||(pr[Jr.featureIndex]=!0,yr.push(Jr))}}return W}var fe=function(W,de){this.max=W,this.onRemove=de,this.reset()};fe.prototype.reset=function(){for(var W in this.data)for(var de=0,J=this.data[W];de<J.length;de+=1){var ge=J[de];ge.timeout&&clearTimeout(ge.timeout),this.onRemove(ge.value)}return this.data={},this.order=[],this},fe.prototype.add=function(W,de,J){var ge=this,Ce=W.wrapped().key;this.data[Ce]===void 0&&(this.data[Ce]=[]);var Fe={value:de,timeout:void 0};if(J!==void 0&&(Fe.timeout=setTimeout(function(){ge.remove(W,Fe)},J)),this.data[Ce].push(Fe),this.order.push(Ce),this.order.length>this.max){var $e=this._getAndRemoveByKey(this.order[0]);$e&&this.onRemove($e)}return this},fe.prototype.has=function(W){return W.wrapped().key in this.data},fe.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null},fe.prototype._getAndRemoveByKey=function(W){var de=this.data[W].shift();return de.timeout&&clearTimeout(de.timeout),this.data[W].length===0&&delete this.data[W],this.order.splice(this.order.indexOf(W),1),de.value},fe.prototype.getByKey=function(W){var de=this.data[W];return de?de[0].value:null},fe.prototype.get=function(W){if(!this.has(W))return null;var de=this.data[W.wrapped().key][0];return de.value},fe.prototype.remove=function(W,de){if(!this.has(W))return this;var J=W.wrapped().key,ge=de===void 0?0:this.data[J].indexOf(de),Ce=this.data[J][ge];return this.data[J].splice(ge,1),Ce.timeout&&clearTimeout(Ce.timeout),this.data[J].length===0&&delete this.data[J],this.onRemove(Ce.value),this.order.splice(this.order.indexOf(J),1),this},fe.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;){var de=this._getAndRemoveByKey(this.order[0]);de&&this.onRemove(de)}return this},fe.prototype.filter=function(W){var de=[];for(var J in this.data)for(var ge=0,Ce=this.data[J];ge<Ce.length;ge+=1){var Fe=Ce[ge];W(Fe.value)||de.push(Fe)}for(var $e=0,ht=de;$e<ht.length;$e+=1){var Dt=ht[$e];this.remove(Dt.value.tileID,Dt)}};var me=function(W,de,J){this.context=W;var ge=W.gl;this.buffer=ge.createBuffer(),this.dynamicDraw=Boolean(J),this.context.unbindVAO(),W.bindElementBuffer.set(this.buffer),ge.bufferData(ge.ELEMENT_ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?ge.DYNAMIC_DRAW:ge.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};me.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},me.prototype.updateData=function(W){var de=this.context.gl;this.context.unbindVAO(),this.bind(),de.bufferSubData(de.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)},me.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ye=function(W,de,J,ge){this.length=de.length,this.attributes=J,this.itemSize=de.bytesPerElement,this.dynamicDraw=ge,this.context=W;var Ce=W.gl;this.buffer=Ce.createBuffer(),W.bindVertexBuffer.set(this.buffer),Ce.bufferData(Ce.ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?Ce.DYNAMIC_DRAW:Ce.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ye.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ye.prototype.updateData=function(W){var de=this.context.gl;this.bind(),de.bufferSubData(de.ARRAY_BUFFER,0,W.arrayBuffer)},ye.prototype.enableAttributes=function(W,de){for(var J=0;J<this.attributes.length;J++){var ge=this.attributes[J],Ce=de.attributes[ge.name];Ce!==void 0&&W.enableVertexAttribArray(Ce)}},ye.prototype.setVertexAttribPointers=function(W,de,J){for(var ge=0;ge<this.attributes.length;ge++){var Ce=this.attributes[ge],Fe=de.attributes[Ce.name];Fe!==void 0&&W.vertexAttribPointer(Fe,Ce.components,W[xe[Ce.type]],!1,this.itemSize,Ce.offset+this.itemSize*(J||0))}},ye.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var be=function(W){this.gl=W.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};be.prototype.get=function(){return this.current},be.prototype.set=function(W){},be.prototype.getDefault=function(){return this.default},be.prototype.setDefault=function(){this.set(this.default)};var ke=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var ge=this.current;J.r===ge.r&&J.g===ge.g&&J.b===ge.b&&J.a===ge.a&&!this.dirty||(this.gl.clearColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(be),De=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearDepth(J),this.current=J,this.dirty=!1)},W}(be),He=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearStencil(J),this.current=J,this.dirty=!1)},W}(be),Ae=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&J[3]===ge[3]&&!this.dirty||(this.gl.colorMask(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(be),Le=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthMask(J),this.current=J,this.dirty=!1)},W}(be),Ze=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.stencilMask(J),this.current=J,this.dirty=!1)},W}(be),We=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(J){var ge=this.current;J.func===ge.func&&J.ref===ge.ref&&J.mask===ge.mask&&!this.dirty||(this.gl.stencilFunc(J.func,J.ref,J.mask),this.current=J,this.dirty=!1)},W}(be),ze=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.KEEP,J.KEEP,J.KEEP]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&!this.dirty||(this.gl.stencilOp(J[0],J[1],J[2]),this.current=J,this.dirty=!1)},W}(be),Ie=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.STENCIL_TEST):ge.disable(ge.STENCIL_TEST),this.current=J,this.dirty=!1}},W}(be),Ve=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&!this.dirty||(this.gl.depthRange(J[0],J[1]),this.current=J,this.dirty=!1)},W}(be),dt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.DEPTH_TEST):ge.disable(ge.DEPTH_TEST),this.current=J,this.dirty=!1}},W}(be),Ft=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthFunc(J),this.current=J,this.dirty=!1)},W}(be),Qt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.BLEND):ge.disable(ge.BLEND),this.current=J,this.dirty=!1}},W}(be),Ot=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.ONE,J.ZERO]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&!this.dirty||(this.gl.blendFunc(J[0],J[1]),this.current=J,this.dirty=!1)},W}(be),Ct=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var ge=this.current;J.r===ge.r&&J.g===ge.g&&J.b===ge.b&&J.a===ge.a&&!this.dirty||(this.gl.blendColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(be),jt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.blendEquation(J),this.current=J,this.dirty=!1)},W}(be),Nt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.CULL_FACE):ge.disable(ge.CULL_FACE),this.current=J,this.dirty=!1}},W}(be),Lt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.cullFace(J),this.current=J,this.dirty=!1)},W}(be),Xe=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.frontFace(J),this.current=J,this.dirty=!1)},W}(be),it=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.useProgram(J),this.current=J,this.dirty=!1)},W}(be),Ye=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.activeTexture(J),this.current=J,this.dirty=!1)},W}(be),Ee=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[0,0,J.drawingBufferWidth,J.drawingBufferHeight]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&J[3]===ge[3]&&!this.dirty||(this.gl.viewport(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(be),Ge=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindFramebuffer(ge.FRAMEBUFFER,J),this.current=J,this.dirty=!1}},W}(be),Ke=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindRenderbuffer(ge.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(be),qe=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindTexture(ge.TEXTURE_2D,J),this.current=J,this.dirty=!1}},W}(be),At=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindBuffer(ge.ARRAY_BUFFER,J),this.current=J,this.dirty=!1}},W}(be),yt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){var ge=this.gl;ge.bindBuffer(ge.ELEMENT_ARRAY_BUFFER,J),this.current=J,this.dirty=!1},W}(be),Mt=function(ve){function W(de){ve.call(this,de),this.vao=de.extVertexArrayObject}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){!this.vao||J===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(J),this.current=J,this.dirty=!1)},W}(be),Gt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_ALIGNMENT,J),this.current=J,this.dirty=!1}},W}(be),zt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J),this.current=J,this.dirty=!1}},W}(be),Ht=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,J),this.current=J,this.dirty=!1}},W}(be),Zt=function(ve){function W(de,J){ve.call(this,de),this.context=de,this.parent=J}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(be),Wt=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_2D,J,0),this.current=J,this.dirty=!1}},W}(Zt),sr=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferRenderbuffer(ge.FRAMEBUFFER,ge.DEPTH_ATTACHMENT,ge.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(Zt),Gr=function(W,de,J,ge){this.context=W,this.width=de,this.height=J;var Ce=W.gl,Fe=this.framebuffer=Ce.createFramebuffer();this.colorAttachment=new Wt(W,Fe),ge&&(this.depthAttachment=new sr(W,Fe))};Gr.prototype.destroy=function(){var W=this.context.gl,de=this.colorAttachment.get();if(de&&W.deleteTexture(de),this.depthAttachment){var J=this.depthAttachment.get();J&&W.deleteRenderbuffer(J)}W.deleteFramebuffer(this.framebuffer)};var cn=519,qr=function(W,de,J){this.func=W,this.mask=de,this.range=J};qr.ReadOnly=!1,qr.ReadWrite=!0,qr.disabled=new qr(cn,qr.ReadOnly,[0,1]);var st=519,rr=7680,Jt=function(W,de,J,ge,Ce,Fe){this.test=W,this.ref=de,this.mask=J,this.fail=ge,this.depthFail=Ce,this.pass=Fe};Jt.disabled=new Jt({func:st,mask:0},0,0,rr,rr,rr);var hr=0,Sr=1,tt=771,Qe=function(W,de,J){this.blendFunction=W,this.blendColor=de,this.mask=J};Qe.Replace=[Sr,hr],Qe.disabled=new Qe(Qe.Replace,e.Color.transparent,[!1,!1,!1,!1]),Qe.unblended=new Qe(Qe.Replace,e.Color.transparent,[!0,!0,!0,!0]),Qe.alphaBlended=new Qe([Sr,tt],e.Color.transparent,[!0,!0,!0,!0]);var lt=1029,ft=2305,Et=function(W,de,J){this.enable=W,this.mode=de,this.frontFace=J};Et.disabled=new Et(!1,lt,ft),Et.backCCW=new Et(!0,lt,ft);var Vt=function(W){this.gl=W,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ke(this),this.clearDepth=new De(this),this.clearStencil=new He(this),this.colorMask=new Ae(this),this.depthMask=new Le(this),this.stencilMask=new Ze(this),this.stencilFunc=new We(this),this.stencilOp=new ze(this),this.stencilTest=new Ie(this),this.depthRange=new Ve(this),this.depthTest=new dt(this),this.depthFunc=new Ft(this),this.blend=new Qt(this),this.blendFunc=new Ot(this),this.blendColor=new Ct(this),this.blendEquation=new jt(this),this.cullFace=new Nt(this),this.cullFaceSide=new Lt(this),this.frontFace=new Xe(this),this.program=new it(this),this.activeTexture=new Ye(this),this.viewport=new Ee(this),this.bindFramebuffer=new Ge(this),this.bindRenderbuffer=new Ke(this),this.bindTexture=new qe(this),this.bindVertexBuffer=new At(this),this.bindElementBuffer=new yt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Mt(this),this.pixelStoreUnpack=new Gt(this),this.pixelStoreUnpackPremultiplyAlpha=new zt(this),this.pixelStoreUnpackFlipY=new Ht(this),this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query")};Vt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Vt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Vt.prototype.createIndexBuffer=function(W,de){return new me(this,W,de)},Vt.prototype.createVertexBuffer=function(W,de,J){return new ye(this,W,de,J)},Vt.prototype.createRenderbuffer=function(W,de,J){var ge=this.gl,Ce=ge.createRenderbuffer();return this.bindRenderbuffer.set(Ce),ge.renderbufferStorage(ge.RENDERBUFFER,W,de,J),this.bindRenderbuffer.set(null),Ce},Vt.prototype.createFramebuffer=function(W,de,J){return new Gr(this,W,de,J)},Vt.prototype.clear=function(W){var de=W.color,J=W.depth,ge=this.gl,Ce=0;de&&(Ce|=ge.COLOR_BUFFER_BIT,this.clearColor.set(de),this.colorMask.set([!0,!0,!0,!0])),typeof J<"u"&&(Ce|=ge.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(J),this.depthMask.set(!0)),ge.clear(Ce)},Vt.prototype.setCullFace=function(W){W.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))},Vt.prototype.setDepthMode=function(W){W.func===this.gl.ALWAYS&&!W.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range))},Vt.prototype.setStencilMode=function(W){W.test.func===this.gl.ALWAYS&&!W.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask}))},Vt.prototype.setColorMode=function(W){e.deepEqual(W.blendFunction,Qe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),this.blendColor.set(W.blendColor)),this.colorMask.set(W.mask)},Vt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(ve){function W(de,J,ge){var Ce=this;ve.call(this),this.id=de,this.dispatcher=ge,this.on("data",function(Fe){Fe.dataType==="source"&&Fe.sourceDataType==="metadata"&&(Ce._sourceLoaded=!0),Ce._sourceLoaded&&!Ce._paused&&Fe.dataType==="source"&&Fe.sourceDataType==="content"&&(Ce.reload(),Ce.transform&&Ce.update(Ce.transform))}),this.on("error",function(){Ce._sourceErrored=!0}),this._source=H(de,J,ge,this),this._tiles={},this._cache=new fe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){this.map=J,this._maxTileCacheSize=J?J._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(J)},W.prototype.onRemove=function(J){this._source&&this._source.onRemove&&this._source.onRemove(J)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var J in this._tiles){var ge=this._tiles[J];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(!!this._paused){var J=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,J&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(J,ge){return this._source.loadTile(J,ge)},W.prototype._unloadTile=function(J){if(this._source.unloadTile)return this._source.unloadTile(J,function(){})},W.prototype._abortTile=function(J){if(this._source.abortTile)return this._source.abortTile(J,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(J){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ge in this._tiles){var Ce=this._tiles[ge];Ce.upload(J),Ce.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return e.values(this._tiles).map(function(J){return J.tileID}).sort(Se).map(function(J){return J.key})},W.prototype.getRenderableIds=function(J){var ge=this,Ce=[];for(var Fe in this._tiles)this._isIdRenderable(Fe,J)&&Ce.push(this._tiles[Fe]);return J?Ce.sort(function($e,ht){var Dt=$e.tileID,er=ht.tileID,pr=new e.Point(Dt.canonical.x,Dt.canonical.y)._rotate(ge.transform.angle),yr=new e.Point(er.canonical.x,er.canonical.y)._rotate(ge.transform.angle);return Dt.overscaledZ-er.overscaledZ||yr.y-pr.y||yr.x-pr.x}).map(function($e){return $e.tileID.key}):Ce.map(function($e){return $e.tileID}).sort(Se).map(function($e){return $e.key})},W.prototype.hasRenderableParent=function(J){var ge=this.findLoadedParent(J,0);return ge?this._isIdRenderable(ge.tileID.key):!1},W.prototype._isIdRenderable=function(J,ge){return this._tiles[J]&&this._tiles[J].hasData()&&!this._coveredTiles[J]&&(ge||!this._tiles[J].holdingForFade())},W.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var J in this._tiles)this._tiles[J].state!=="errored"&&this._reloadTile(J,"reloading")},W.prototype._reloadTile=function(J,ge){var Ce=this._tiles[J];!Ce||(Ce.state!=="loading"&&(Ce.state=ge),this._loadTile(Ce,this._tileLoaded.bind(this,Ce,J,ge)))},W.prototype._tileLoaded=function(J,ge,Ce,Fe){if(Fe){J.state="errored",Fe.status!==404?this._source.fire(new e.ErrorEvent(Fe,{tile:J})):this.update(this.transform);return}J.timeAdded=e.browser.now(),Ce==="expired"&&(J.refreshedUponExpiration=!0),this._setTileReloadTimer(ge,J),this.getSource().type==="raster-dem"&&J.dem&&this._backfillDEM(J),this._state.initializeTileState(J,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:J,coord:J.tileID}))},W.prototype._backfillDEM=function(J){for(var ge=this.getRenderableIds(),Ce=0;Ce<ge.length;Ce++){var Fe=ge[Ce];if(J.neighboringTiles&&J.neighboringTiles[Fe]){var $e=this.getTileByID(Fe);ht(J,$e),ht($e,J)}}function ht(Dt,er){Dt.needsHillshadePrepare=!0;var pr=er.tileID.canonical.x-Dt.tileID.canonical.x,yr=er.tileID.canonical.y-Dt.tileID.canonical.y,Rr=Math.pow(2,Dt.tileID.canonical.z),Zr=er.tileID.key;pr===0&&yr===0||Math.abs(yr)>1||(Math.abs(pr)>1&&(Math.abs(pr+Rr)===1?pr+=Rr:Math.abs(pr-Rr)===1&&(pr-=Rr)),!(!er.dem||!Dt.dem)&&(Dt.dem.backfillBorder(er.dem,pr,yr),Dt.neighboringTiles&&Dt.neighboringTiles[Zr]&&(Dt.neighboringTiles[Zr].backfilled=!0)))}},W.prototype.getTile=function(J){return this.getTileByID(J.key)},W.prototype.getTileByID=function(J){return this._tiles[J]},W.prototype._retainLoadedChildren=function(J,ge,Ce,Fe){for(var $e in this._tiles){var ht=this._tiles[$e];if(!(Fe[$e]||!ht.hasData()||ht.tileID.overscaledZ<=ge||ht.tileID.overscaledZ>Ce)){for(var Dt=ht.tileID;ht&&ht.tileID.overscaledZ>ge+1;){var er=ht.tileID.scaledTo(ht.tileID.overscaledZ-1);ht=this._tiles[er.key],ht&&ht.hasData()&&(Dt=er)}for(var pr=Dt;pr.overscaledZ>ge;)if(pr=pr.scaledTo(pr.overscaledZ-1),J[pr.key]){Fe[Dt.key]=Dt;break}}}},W.prototype.findLoadedParent=function(J,ge){if(J.key in this._loadedParentTiles){var Ce=this._loadedParentTiles[J.key];return Ce&&Ce.tileID.overscaledZ>=ge?Ce:null}for(var Fe=J.overscaledZ-1;Fe>=ge;Fe--){var $e=J.scaledTo(Fe),ht=this._getLoadedTile($e);if(ht)return ht}},W.prototype._getLoadedTile=function(J){var ge=this._tiles[J.key];if(ge&&ge.hasData())return ge;var Ce=this._cache.getByKey(J.wrapped().key);return Ce},W.prototype.updateCacheSize=function(J){var ge=Math.ceil(J.width/this._source.tileSize)+1,Ce=Math.ceil(J.height/this._source.tileSize)+1,Fe=ge*Ce,$e=5,ht=Math.floor(Fe*$e),Dt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ht):ht;this._cache.setMaxSize(Dt)},W.prototype.handleWrapJump=function(J){var ge=this._prevLng===void 0?J:this._prevLng,Ce=J-ge,Fe=Ce/360,$e=Math.round(Fe);if(this._prevLng=J,$e){var ht={};for(var Dt in this._tiles){var er=this._tiles[Dt];er.tileID=er.tileID.unwrapTo(er.tileID.wrap+$e),ht[er.tileID.key]=er}this._tiles=ht;for(var pr in this._timers)clearTimeout(this._timers[pr]),delete this._timers[pr];for(var yr in this._tiles){var Rr=this._tiles[yr];this._setTileReloadTimer(yr,Rr)}}},W.prototype.update=function(J){var ge=this;if(this.transform=J,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(J),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ce;this.used?this._source.tileID?Ce=J.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ca){return new e.OverscaledTileID(Ca.canonical.z,Ca.wrap,Ca.canonical.z,Ca.canonical.x,Ca.canonical.y)}):(Ce=J.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ce=Ce.filter(function(Ca){return ge._source.hasTile(Ca)}))):Ce=[];var Fe=J.coveringZoomLevel(this._source),$e=Math.max(Fe-W.maxOverzooming,this._source.minzoom),ht=Math.max(Fe+W.maxUnderzooming,this._source.minzoom),Dt=this._updateRetainedTiles(Ce,Fe);if(ot(this._source.type)){for(var er={},pr={},yr=Object.keys(Dt),Rr=0,Zr=yr;Rr<Zr.length;Rr+=1){var Jr=Zr[Rr],Xr=Dt[Jr],rn=this._tiles[Jr];if(!(!rn||rn.fadeEndTime&&rn.fadeEndTime<=e.browser.now())){var xn=this.findLoadedParent(Xr,$e);xn&&(this._addTile(xn.tileID),er[xn.tileID.key]=xn.tileID),pr[Jr]=Xr}}this._retainLoadedChildren(pr,Fe,ht,Dt);for(var Fn in er)Dt[Fn]||(this._coveredTiles[Fn]=!0,Dt[Fn]=er[Fn])}for(var Gn in Dt)this._tiles[Gn].clearFadeHold();for(var oa=e.keysDifference(this._tiles,Dt),ca=0,la=oa;ca<la.length;ca+=1){var wa=la[ca],La=this._tiles[wa];La.hasSymbolBuckets&&!La.holdingForFade()?La.setHoldDuration(this.map._fadeDuration):(!La.hasSymbolBuckets||La.symbolFadeFinished())&&this._removeTile(wa)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var J in this._tiles)this._tiles[J].holdingForFade()&&this._removeTile(J)},W.prototype._updateRetainedTiles=function(J,ge){for(var Ce={},Fe={},$e=Math.max(ge-W.maxOverzooming,this._source.minzoom),ht=Math.max(ge+W.maxUnderzooming,this._source.minzoom),Dt={},er=0,pr=J;er<pr.length;er+=1){var yr=pr[er],Rr=this._addTile(yr);Ce[yr.key]=yr,!Rr.hasData()&&ge<this._source.maxzoom&&(Dt[yr.key]=yr)}this._retainLoadedChildren(Dt,ge,ht,Ce);for(var Zr=0,Jr=J;Zr<Jr.length;Zr+=1){var Xr=Jr[Zr],rn=this._tiles[Xr.key];if(!rn.hasData()){if(ge+1>this._source.maxzoom){var xn=Xr.children(this._source.maxzoom)[0],Fn=this.getTile(xn);if(!!Fn&&Fn.hasData()){Ce[xn.key]=xn;continue}}else{var Gn=Xr.children(this._source.maxzoom);if(Ce[Gn[0].key]&&Ce[Gn[1].key]&&Ce[Gn[2].key]&&Ce[Gn[3].key])continue}for(var oa=rn.wasRequested(),ca=Xr.overscaledZ-1;ca>=$e;--ca){var la=Xr.scaledTo(ca);if(Fe[la.key]||(Fe[la.key]=!0,rn=this.getTile(la),!rn&&oa&&(rn=this._addTile(la)),rn&&(Ce[la.key]=la,oa=rn.wasRequested(),rn.hasData())))break}}}return Ce},W.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var J in this._tiles){for(var ge=[],Ce=void 0,Fe=this._tiles[J].tileID;Fe.overscaledZ>0;){if(Fe.key in this._loadedParentTiles){Ce=this._loadedParentTiles[Fe.key];break}ge.push(Fe.key);var $e=Fe.scaledTo(Fe.overscaledZ-1);if(Ce=this._getLoadedTile($e),Ce)break;Fe=$e}for(var ht=0,Dt=ge;ht<Dt.length;ht+=1){var er=Dt[ht];this._loadedParentTiles[er]=Ce}}},W.prototype._addTile=function(J){var ge=this._tiles[J.key];if(ge)return ge;ge=this._cache.getAndRemove(J),ge&&(this._setTileReloadTimer(J.key,ge),ge.tileID=J,this._state.initializeTileState(ge,this.map?this.map.painter:null),this._cacheTimers[J.key]&&(clearTimeout(this._cacheTimers[J.key]),delete this._cacheTimers[J.key],this._setTileReloadTimer(J.key,ge)));var Ce=Boolean(ge);return Ce||(ge=new e.Tile(J,this._source.tileSize*J.overscaleFactor()),this._loadTile(ge,this._tileLoaded.bind(this,ge,J.key,ge.state))),ge?(ge.uses++,this._tiles[J.key]=ge,Ce||this._source.fire(new e.Event("dataloading",{tile:ge,coord:ge.tileID,dataType:"source"})),ge):null},W.prototype._setTileReloadTimer=function(J,ge){var Ce=this;J in this._timers&&(clearTimeout(this._timers[J]),delete this._timers[J]);var Fe=ge.getExpiryTimeout();Fe&&(this._timers[J]=setTimeout(function(){Ce._reloadTile(J,"expired"),delete Ce._timers[J]},Fe))},W.prototype._removeTile=function(J){var ge=this._tiles[J];!ge||(ge.uses--,delete this._tiles[J],this._timers[J]&&(clearTimeout(this._timers[J]),delete this._timers[J]),!(ge.uses>0)&&(ge.hasData()&&ge.state!=="reloading"?this._cache.add(ge.tileID,ge,ge.getExpiryTimeout()):(ge.aborted=!0,this._abortTile(ge),this._unloadTile(ge))))},W.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var J in this._tiles)this._removeTile(J);this._cache.reset()},W.prototype.tilesIn=function(J,ge,Ce){var Fe=this,$e=[],ht=this.transform;if(!ht)return $e;for(var Dt=Ce?ht.getCameraQueryGeometry(J):J,er=J.map(function(ca){return ht.pointCoordinate(ca)}),pr=Dt.map(function(ca){return ht.pointCoordinate(ca)}),yr=this.getIds(),Rr=1/0,Zr=1/0,Jr=-1/0,Xr=-1/0,rn=0,xn=pr;rn<xn.length;rn+=1){var Fn=xn[rn];Rr=Math.min(Rr,Fn.x),Zr=Math.min(Zr,Fn.y),Jr=Math.max(Jr,Fn.x),Xr=Math.max(Xr,Fn.y)}for(var Gn=function(ca){var la=Fe._tiles[yr[ca]];if(!la.holdingForFade()){var wa=la.tileID,La=Math.pow(2,ht.zoom-la.tileID.overscaledZ),Ca=ge*la.queryPadding*e.EXTENT/la.tileSize/La,Fa=[wa.getTilePoint(new e.MercatorCoordinate(Rr,Zr)),wa.getTilePoint(new e.MercatorCoordinate(Jr,Xr))];if(Fa[0].x-Ca<e.EXTENT&&Fa[0].y-Ca<e.EXTENT&&Fa[1].x+Ca>=0&&Fa[1].y+Ca>=0){var Ba=er.map(function(pi){return wa.getTilePoint(pi)}),ti=pr.map(function(pi){return wa.getTilePoint(pi)});$e.push({tile:la,tileID:wa,queryGeometry:Ba,cameraQueryGeometry:ti,scale:La})}}},oa=0;oa<yr.length;oa++)Gn(oa);return $e},W.prototype.getVisibleCoordinates=function(J){for(var ge=this,Ce=this.getRenderableIds(J).map(function(Dt){return ge._tiles[Dt].tileID}),Fe=0,$e=Ce;Fe<$e.length;Fe+=1){var ht=$e[Fe];ht.posMatrix=this.transform.calculatePosMatrix(ht.toUnwrapped())}return Ce},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ot(this._source.type))for(var J in this._tiles){var ge=this._tiles[J];if(ge.fadeEndTime!==void 0&&ge.fadeEndTime>=e.browser.now())return!0}return!1},W.prototype.setFeatureState=function(J,ge,Ce){J=J||"_geojsonTileLayer",this._state.updateState(J,ge,Ce)},W.prototype.removeFeatureState=function(J,ge,Ce){J=J||"_geojsonTileLayer",this._state.removeFeatureState(J,ge,Ce)},W.prototype.getFeatureState=function(J,ge){return J=J||"_geojsonTileLayer",this._state.getState(J,ge)},W.prototype.setDependencies=function(J,ge,Ce){var Fe=this._tiles[J];Fe&&Fe.setDependencies(ge,Ce)},W.prototype.reloadTilesForDependencies=function(J,ge){for(var Ce in this._tiles){var Fe=this._tiles[Ce];Fe.hasDependency(J,ge)&&this._reloadTile(Ce,"reloading")}this._cache.filter(function($e){return!$e.hasDependency(J,ge)})},W}(e.Evented);Pe.maxOverzooming=10,Pe.maxUnderzooming=3;function Se(ve,W){var de=Math.abs(ve.wrap*2)-+(ve.wrap<0),J=Math.abs(W.wrap*2)-+(W.wrap<0);return ve.overscaledZ-W.overscaledZ||J-de||W.canonical.y-ve.canonical.y||W.canonical.x-ve.canonical.x}function ot(ve){return ve==="raster"||ve==="image"||ve==="video"}function ct(){return new e.window.Worker(mp.workerUrl)}var pt="mapboxgl_preloaded_worker_pool",St=function(){this.active={}};St.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<St.workerCount;)this.workers.push(new ct);return this.active[W]=!0,this.workers.slice()},St.prototype.release=function(W){delete this.active[W],this.numActive()===0&&(this.workers.forEach(function(de){de.terminate()}),this.workers=null)},St.prototype.isPreloaded=function(){return!!this.active[pt]},St.prototype.numActive=function(){return Object.keys(this.active).length};var xt=Math.floor(e.browser.hardwareConcurrency/2);St.workerCount=Math.max(Math.min(xt,6),1);var Pt;function Xt(){return Pt||(Pt=new St),Pt}function or(){var ve=Xt();ve.acquire(pt)}function Pr(){var ve=Pt;ve&&(ve.isPreloaded()&&ve.numActive()===1?(ve.release(pt),Pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Ar(ve,W){var de={};for(var J in ve)J!=="ref"&&(de[J]=ve[J]);return e.refProperties.forEach(function(ge){ge in W&&(de[ge]=W[ge])}),de}function Er(ve){ve=ve.slice();for(var W=Object.create(null),de=0;de<ve.length;de++)W[ve[de].id]=ve[de];for(var J=0;J<ve.length;J++)"ref"in ve[J]&&(ve[J]=Ar(ve[J],W[ve[J].ref]));return ve}function $r(){var ve={},W=e.styleSpec.$version;for(var de in e.styleSpec.$root){var J=e.styleSpec.$root[de];if(J.required){var ge=null;de==="version"?ge=W:J.type==="array"?ge=[]:ge={},ge!=null&&(ve[de]=ge)}}return ve}var lr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function br(ve,W,de){de.push({command:lr.addSource,args:[ve,W[ve]]})}function Fr(ve,W,de){W.push({command:lr.removeSource,args:[ve]}),de[ve]=!0}function Hr(ve,W,de,J){Fr(ve,de,J),br(ve,W,de)}function Lr(ve,W,de){var J;for(J in ve[de])if(!!ve[de].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(ve[de][J],W[de][J]))return!1;for(J in W[de])if(!!W[de].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(ve[de][J],W[de][J]))return!1;return!0}function at(ve,W,de,J){ve=ve||{},W=W||{};var ge;for(ge in ve)!ve.hasOwnProperty(ge)||W.hasOwnProperty(ge)||Fr(ge,de,J);for(ge in W)!W.hasOwnProperty(ge)||(ve.hasOwnProperty(ge)?e.deepEqual(ve[ge],W[ge])||(ve[ge].type==="geojson"&&W[ge].type==="geojson"&&Lr(ve,W,ge)?de.push({command:lr.setGeoJSONSourceData,args:[ge,W[ge].data]}):Hr(ge,W,de,J)):br(ge,W,de))}function Rt(ve,W,de,J,ge,Ce){ve=ve||{},W=W||{};var Fe;for(Fe in ve)!ve.hasOwnProperty(Fe)||e.deepEqual(ve[Fe],W[Fe])||de.push({command:Ce,args:[J,Fe,W[Fe],ge]});for(Fe in W)!W.hasOwnProperty(Fe)||ve.hasOwnProperty(Fe)||e.deepEqual(ve[Fe],W[Fe])||de.push({command:Ce,args:[J,Fe,W[Fe],ge]})}function Kt(ve){return ve.id}function ur(ve,W){return ve[W.id]=W,ve}function Nr(ve,W,de){ve=ve||[],W=W||[];var J=ve.map(Kt),ge=W.map(Kt),Ce=ve.reduce(ur,{}),Fe=W.reduce(ur,{}),$e=J.slice(),ht=Object.create(null),Dt,er,pr,yr,Rr,Zr,Jr;for(Dt=0,er=0;Dt<J.length;Dt++)pr=J[Dt],Fe.hasOwnProperty(pr)?er++:(de.push({command:lr.removeLayer,args:[pr]}),$e.splice($e.indexOf(pr,er),1));for(Dt=0,er=0;Dt<ge.length;Dt++)pr=ge[ge.length-1-Dt],$e[$e.length-1-Dt]!==pr&&(Ce.hasOwnProperty(pr)?(de.push({command:lr.removeLayer,args:[pr]}),$e.splice($e.lastIndexOf(pr,$e.length-er),1)):er++,Zr=$e[$e.length-Dt],de.push({command:lr.addLayer,args:[Fe[pr],Zr]}),$e.splice($e.length-Dt,0,pr),ht[pr]=!0);for(Dt=0;Dt<ge.length;Dt++)if(pr=ge[Dt],yr=Ce[pr],Rr=Fe[pr],!(ht[pr]||e.deepEqual(yr,Rr))){if(!e.deepEqual(yr.source,Rr.source)||!e.deepEqual(yr["source-layer"],Rr["source-layer"])||!e.deepEqual(yr.type,Rr.type)){de.push({command:lr.removeLayer,args:[pr]}),Zr=$e[$e.lastIndexOf(pr)+1],de.push({command:lr.addLayer,args:[Rr,Zr]});continue}Rt(yr.layout,Rr.layout,de,pr,null,lr.setLayoutProperty),Rt(yr.paint,Rr.paint,de,pr,null,lr.setPaintProperty),e.deepEqual(yr.filter,Rr.filter)||de.push({command:lr.setFilter,args:[pr,Rr.filter]}),(!e.deepEqual(yr.minzoom,Rr.minzoom)||!e.deepEqual(yr.maxzoom,Rr.maxzoom))&&de.push({command:lr.setLayerZoomRange,args:[pr,Rr.minzoom,Rr.maxzoom]});for(Jr in yr)!yr.hasOwnProperty(Jr)||Jr==="layout"||Jr==="paint"||Jr==="filter"||Jr==="metadata"||Jr==="minzoom"||Jr==="maxzoom"||(Jr.indexOf("paint.")===0?Rt(yr[Jr],Rr[Jr],de,pr,Jr.slice(6),lr.setPaintProperty):e.deepEqual(yr[Jr],Rr[Jr])||de.push({command:lr.setLayerProperty,args:[pr,Jr,Rr[Jr]]}));for(Jr in Rr)!Rr.hasOwnProperty(Jr)||yr.hasOwnProperty(Jr)||Jr==="layout"||Jr==="paint"||Jr==="filter"||Jr==="metadata"||Jr==="minzoom"||Jr==="maxzoom"||(Jr.indexOf("paint.")===0?Rt(yr[Jr],Rr[Jr],de,pr,Jr.slice(6),lr.setPaintProperty):e.deepEqual(yr[Jr],Rr[Jr])||de.push({command:lr.setLayerProperty,args:[pr,Jr,Rr[Jr]]}))}}function Vr(ve,W){if(!ve)return[{command:lr.setStyle,args:[W]}];var de=[];try{if(!e.deepEqual(ve.version,W.version))return[{command:lr.setStyle,args:[W]}];e.deepEqual(ve.center,W.center)||de.push({command:lr.setCenter,args:[W.center]}),e.deepEqual(ve.zoom,W.zoom)||de.push({command:lr.setZoom,args:[W.zoom]}),e.deepEqual(ve.bearing,W.bearing)||de.push({command:lr.setBearing,args:[W.bearing]}),e.deepEqual(ve.pitch,W.pitch)||de.push({command:lr.setPitch,args:[W.pitch]}),e.deepEqual(ve.sprite,W.sprite)||de.push({command:lr.setSprite,args:[W.sprite]}),e.deepEqual(ve.glyphs,W.glyphs)||de.push({command:lr.setGlyphs,args:[W.glyphs]}),e.deepEqual(ve.transition,W.transition)||de.push({command:lr.setTransition,args:[W.transition]}),e.deepEqual(ve.light,W.light)||de.push({command:lr.setLight,args:[W.light]});var J={},ge=[];at(ve.sources,W.sources,ge,J);var Ce=[];ve.layers&&ve.layers.forEach(function(Fe){J[Fe.source]?de.push({command:lr.removeLayer,args:[Fe.id]}):Ce.push(Fe)}),de=de.concat(ge),Nr(Ce,W.layers,de)}catch(Fe){console.warn("Unable to compute style diff:",Fe),de=[{command:lr.setStyle,args:[W]}]}return de}var Dr=function(W,de){this.reset(W,de)};Dr.prototype.reset=function(W,de){this.points=W||[],this._distances=[0];for(var J=1;J<this.points.length;J++)this._distances[J]=this._distances[J-1]+this.points[J].dist(this.points[J-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(de||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Dr.prototype.lerp=function(W){if(this.points.length===1)return this.points[0];W=e.clamp(W,0,1);for(var de=1,J=this._distances[de],ge=W*this.paddedLength+this.padding;J<ge&&de<this._distances.length;)J=this._distances[++de];var Ce=de-1,Fe=this._distances[Ce],$e=J-Fe,ht=$e>0?(ge-Fe)/$e:0;return this.points[Ce].mult(1-ht).add(this.points[de].mult(ht))};var Mr=function(W,de,J){var ge=this.boxCells=[],Ce=this.circleCells=[];this.xCellCount=Math.ceil(W/J),this.yCellCount=Math.ceil(de/J);for(var Fe=0;Fe<this.xCellCount*this.yCellCount;Fe++)ge.push([]),Ce.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=W,this.height=de,this.xScale=this.xCellCount/W,this.yScale=this.yCellCount/de,this.boxUid=0,this.circleUid=0};Mr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Mr.prototype.insert=function(W,de,J,ge,Ce){this._forEachCell(de,J,ge,Ce,this._insertBoxCell,this.boxUid++),this.boxKeys.push(W),this.bboxes.push(de),this.bboxes.push(J),this.bboxes.push(ge),this.bboxes.push(Ce)},Mr.prototype.insertCircle=function(W,de,J,ge){this._forEachCell(de-ge,J-ge,de+ge,J+ge,this._insertCircleCell,this.circleUid++),this.circleKeys.push(W),this.circles.push(de),this.circles.push(J),this.circles.push(ge)},Mr.prototype._insertBoxCell=function(W,de,J,ge,Ce,Fe){this.boxCells[Ce].push(Fe)},Mr.prototype._insertCircleCell=function(W,de,J,ge,Ce,Fe){this.circleCells[Ce].push(Fe)},Mr.prototype._query=function(W,de,J,ge,Ce,Fe){if(J<0||W>this.width||ge<0||de>this.height)return Ce?!1:[];var $e=[];if(W<=0&&de<=0&&this.width<=J&&this.height<=ge){if(Ce)return!0;for(var ht=0;ht<this.boxKeys.length;ht++)$e.push({key:this.boxKeys[ht],x1:this.bboxes[ht*4],y1:this.bboxes[ht*4+1],x2:this.bboxes[ht*4+2],y2:this.bboxes[ht*4+3]});for(var Dt=0;Dt<this.circleKeys.length;Dt++){var er=this.circles[Dt*3],pr=this.circles[Dt*3+1],yr=this.circles[Dt*3+2];$e.push({key:this.circleKeys[Dt],x1:er-yr,y1:pr-yr,x2:er+yr,y2:pr+yr})}return Fe?$e.filter(Fe):$e}else{var Rr={hitTest:Ce,seenUids:{box:{},circle:{}}};return this._forEachCell(W,de,J,ge,this._queryCell,$e,Rr,Fe),Ce?$e.length>0:$e}},Mr.prototype._queryCircle=function(W,de,J,ge,Ce){var Fe=W-J,$e=W+J,ht=de-J,Dt=de+J;if($e<0||Fe>this.width||Dt<0||ht>this.height)return ge?!1:[];var er=[],pr={hitTest:ge,circle:{x:W,y:de,radius:J},seenUids:{box:{},circle:{}}};return this._forEachCell(Fe,ht,$e,Dt,this._queryCellCircle,er,pr,Ce),ge?er.length>0:er},Mr.prototype.query=function(W,de,J,ge,Ce){return this._query(W,de,J,ge,!1,Ce)},Mr.prototype.hitTest=function(W,de,J,ge,Ce){return this._query(W,de,J,ge,!0,Ce)},Mr.prototype.hitTestCircle=function(W,de,J,ge){return this._queryCircle(W,de,J,!0,ge)},Mr.prototype._queryCell=function(W,de,J,ge,Ce,Fe,$e,ht){var Dt=$e.seenUids,er=this.boxCells[Ce];if(er!==null)for(var pr=this.bboxes,yr=0,Rr=er;yr<Rr.length;yr+=1){var Zr=Rr[yr];if(!Dt.box[Zr]){Dt.box[Zr]=!0;var Jr=Zr*4;if(W<=pr[Jr+2]&&de<=pr[Jr+3]&&J>=pr[Jr+0]&&ge>=pr[Jr+1]&&(!ht||ht(this.boxKeys[Zr]))){if($e.hitTest)return Fe.push(!0),!0;Fe.push({key:this.boxKeys[Zr],x1:pr[Jr],y1:pr[Jr+1],x2:pr[Jr+2],y2:pr[Jr+3]})}}}var Xr=this.circleCells[Ce];if(Xr!==null)for(var rn=this.circles,xn=0,Fn=Xr;xn<Fn.length;xn+=1){var Gn=Fn[xn];if(!Dt.circle[Gn]){Dt.circle[Gn]=!0;var oa=Gn*3;if(this._circleAndRectCollide(rn[oa],rn[oa+1],rn[oa+2],W,de,J,ge)&&(!ht||ht(this.circleKeys[Gn]))){if($e.hitTest)return Fe.push(!0),!0;var ca=rn[oa],la=rn[oa+1],wa=rn[oa+2];Fe.push({key:this.circleKeys[Gn],x1:ca-wa,y1:la-wa,x2:ca+wa,y2:la+wa})}}}},Mr.prototype._queryCellCircle=function(W,de,J,ge,Ce,Fe,$e,ht){var Dt=$e.circle,er=$e.seenUids,pr=this.boxCells[Ce];if(pr!==null)for(var yr=this.bboxes,Rr=0,Zr=pr;Rr<Zr.length;Rr+=1){var Jr=Zr[Rr];if(!er.box[Jr]){er.box[Jr]=!0;var Xr=Jr*4;if(this._circleAndRectCollide(Dt.x,Dt.y,Dt.radius,yr[Xr+0],yr[Xr+1],yr[Xr+2],yr[Xr+3])&&(!ht||ht(this.boxKeys[Jr])))return Fe.push(!0),!0}}var rn=this.circleCells[Ce];if(rn!==null)for(var xn=this.circles,Fn=0,Gn=rn;Fn<Gn.length;Fn+=1){var oa=Gn[Fn];if(!er.circle[oa]){er.circle[oa]=!0;var ca=oa*3;if(this._circlesCollide(xn[ca],xn[ca+1],xn[ca+2],Dt.x,Dt.y,Dt.radius)&&(!ht||ht(this.circleKeys[oa])))return Fe.push(!0),!0}}},Mr.prototype._forEachCell=function(W,de,J,ge,Ce,Fe,$e,ht){for(var Dt=this._convertToXCellCoord(W),er=this._convertToYCellCoord(de),pr=this._convertToXCellCoord(J),yr=this._convertToYCellCoord(ge),Rr=Dt;Rr<=pr;Rr++)for(var Zr=er;Zr<=yr;Zr++){var Jr=this.xCellCount*Zr+Rr;if(Ce.call(this,W,de,J,ge,Jr,Fe,$e,ht))return}},Mr.prototype._convertToXCellCoord=function(W){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))},Mr.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))},Mr.prototype._circlesCollide=function(W,de,J,ge,Ce,Fe){var $e=ge-W,ht=Ce-de,Dt=J+Fe;return Dt*Dt>$e*$e+ht*ht},Mr.prototype._circleAndRectCollide=function(W,de,J,ge,Ce,Fe,$e){var ht=(Fe-ge)/2,Dt=Math.abs(W-(ge+ht));if(Dt>ht+J)return!1;var er=($e-Ce)/2,pr=Math.abs(de-(Ce+er));if(pr>er+J)return!1;if(Dt<=ht||pr<=er)return!0;var yr=Dt-ht,Rr=pr-er;return yr*yr+Rr*Rr<=J*J};function jr(ve,W,de,J,ge){var Ce=e.create();return W?(e.scale(Ce,Ce,[1/ge,1/ge,1]),de||e.rotateZ(Ce,Ce,J.angle)):e.multiply(Ce,J.labelPlaneMatrix,ve),Ce}function kn(ve,W,de,J,ge){if(W){var Ce=e.clone(ve);return e.scale(Ce,Ce,[ge,ge,1]),de||e.rotateZ(Ce,Ce,-J.angle),Ce}else return J.glCoordMatrix}function mn(ve,W){var de=[ve.x,ve.y,0,1];kr(de,de,W);var J=de[3];return{point:new e.Point(de[0]/J,de[1]/J),signedDistanceFromCamera:J}}function Wn(ve,W){return .5+.5*(ve/W)}function In(ve,W){var de=ve[0]/ve[3],J=ve[1]/ve[3],ge=de>=-W[0]&&de<=W[0]&&J>=-W[1]&&J<=W[1];return ge}function Jn(ve,W,de,J,ge,Ce,Fe,$e){var ht=J?ve.textSizeData:ve.iconSizeData,Dt=e.evaluateSizeForZoom(ht,de.transform.zoom),er=[256/de.width*2+1,256/de.height*2+1],pr=J?ve.text.dynamicLayoutVertexArray:ve.icon.dynamicLayoutVertexArray;pr.clear();for(var yr=ve.lineVertexArray,Rr=J?ve.text.placedSymbolArray:ve.icon.placedSymbolArray,Zr=de.transform.width/de.transform.height,Jr=!1,Xr=0;Xr<Rr.length;Xr++){var rn=Rr.get(Xr);if(rn.hidden||rn.writingMode===e.WritingMode.vertical&&!Jr){ei(rn.numGlyphs,pr);continue}Jr=!1;var xn=[rn.anchorX,rn.anchorY,0,1];if(e.transformMat4(xn,xn,W),!In(xn,er)){ei(rn.numGlyphs,pr);continue}var Fn=xn[3],Gn=Wn(de.transform.cameraToCenterDistance,Fn),oa=e.evaluateSizeForFeature(ht,Dt,rn),ca=Fe?oa/Gn:oa*Gn,la=new e.Point(rn.anchorX,rn.anchorY),wa=mn(la,ge).point,La={},Ca=Ra(rn,ca,!1,$e,W,ge,Ce,ve.glyphOffsetArray,yr,pr,wa,la,La,Zr);Jr=Ca.useVertical,(Ca.notEnoughRoom||Jr||Ca.needsFlipping&&Ra(rn,ca,!0,$e,W,ge,Ce,ve.glyphOffsetArray,yr,pr,wa,la,La,Zr).notEnoughRoom)&&ei(rn.numGlyphs,pr)}J?ve.text.dynamicLayoutVertexBuffer.updateData(pr):ve.icon.dynamicLayoutVertexBuffer.updateData(pr)}function Kn(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt,er){var pr=$e.glyphStartIndex+$e.numGlyphs,yr=$e.lineStartIndex,Rr=$e.lineStartIndex+$e.lineLength,Zr=W.getoffsetX($e.glyphStartIndex),Jr=W.getoffsetX(pr-1),Xr=Ka(ve*Zr,de,J,ge,Ce,Fe,$e.segment,yr,Rr,ht,Dt,er);if(!Xr)return null;var rn=Ka(ve*Jr,de,J,ge,Ce,Fe,$e.segment,yr,Rr,ht,Dt,er);return rn?{first:Xr,last:rn}:null}function ma(ve,W,de,J){if(ve===e.WritingMode.horizontal){var ge=Math.abs(de.y-W.y),Ce=Math.abs(de.x-W.x)*J;if(ge>Ce)return{useVertical:!0}}return(ve===e.WritingMode.vertical?W.y<de.y:W.x>de.x)?{needsFlipping:!0}:null}function Ra(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt,er,pr,yr,Rr){var Zr=W/24,Jr=ve.lineOffsetX*Zr,Xr=ve.lineOffsetY*Zr,rn;if(ve.numGlyphs>1){var xn=ve.glyphStartIndex+ve.numGlyphs,Fn=ve.lineStartIndex,Gn=ve.lineStartIndex+ve.lineLength,oa=Kn(Zr,$e,Jr,Xr,de,er,pr,ve,ht,Ce,yr);if(!oa)return{notEnoughRoom:!0};var ca=mn(oa.first.point,Fe).point,la=mn(oa.last.point,Fe).point;if(J&&!de){var wa=ma(ve.writingMode,ca,la,Rr);if(wa)return wa}rn=[oa.first];for(var La=ve.glyphStartIndex+1;La<xn-1;La++)rn.push(Ka(Zr*$e.getoffsetX(La),Jr,Xr,de,er,pr,ve.segment,Fn,Gn,ht,Ce,yr));rn.push(oa.last)}else{if(J&&!de){var Ca=mn(pr,ge).point,Fa=ve.lineStartIndex+ve.segment+1,Ba=new e.Point(ht.getx(Fa),ht.gety(Fa)),ti=mn(Ba,ge),pi=ti.signedDistanceFromCamera>0?ti.point:_i(pr,Ba,Ca,1,ge),Yi=ma(ve.writingMode,Ca,pi,Rr);if(Yi)return Yi}var xi=Ka(Zr*$e.getoffsetX(ve.glyphStartIndex),Jr,Xr,de,er,pr,ve.segment,ve.lineStartIndex,ve.lineStartIndex+ve.lineLength,ht,Ce,yr);if(!xi)return{notEnoughRoom:!0};rn=[xi]}for(var Ci=0,$a=rn;Ci<$a.length;Ci+=1){var Wi=$a[Ci];e.addDynamicAttributes(Dt,Wi.point,Wi.angle)}return{}}function _i(ve,W,de,J,ge){var Ce=mn(ve.add(ve.sub(W)._unit()),ge).point,Fe=de.sub(Ce);return de.add(Fe._mult(J/Fe.mag()))}function Ka(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt,er,pr){var yr=J?ve-W:ve+W,Rr=yr>0?1:-1,Zr=0;J&&(Rr*=-1,Zr=Math.PI),Rr<0&&(Zr+=Math.PI);for(var Jr=Rr>0?$e+Fe:$e+Fe+1,Xr=ge,rn=ge,xn=0,Fn=0,Gn=Math.abs(yr),oa=[];xn+Fn<=Gn;){if(Jr+=Rr,Jr<$e||Jr>=ht)return null;if(rn=Xr,oa.push(Xr),Xr=pr[Jr],Xr===void 0){var ca=new e.Point(Dt.getx(Jr),Dt.gety(Jr)),la=mn(ca,er);if(la.signedDistanceFromCamera>0)Xr=pr[Jr]=la.point;else{var wa=Jr-Rr,La=xn===0?Ce:new e.Point(Dt.getx(wa),Dt.gety(wa));Xr=_i(La,ca,rn,Gn-xn+1,er)}}xn+=Fn,Fn=rn.dist(Xr)}var Ca=(Gn-xn)/Fn,Fa=Xr.sub(rn),Ba=Fa.mult(Ca)._add(rn);Ba._add(Fa._unit()._perp()._mult(de*Rr));var ti=Zr+Math.atan2(Xr.y-rn.y,Xr.x-rn.x);return oa.push(Ba),{point:Ba,angle:ti,path:oa}}var ri=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ei(ve,W){for(var de=0;de<ve;de++){var J=W.length;W.resize(J+4),W.float32.set(ri,J*3)}}function kr(ve,W,de){var J=W[0],ge=W[1];return ve[0]=de[0]*J+de[4]*ge+de[12],ve[1]=de[1]*J+de[5]*ge+de[13],ve[3]=de[3]*J+de[7]*ge+de[15],ve}var bn=100,dn=function(W,de,J){de===void 0&&(de=new Mr(W.width+2*bn,W.height+2*bn,25)),J===void 0&&(J=new Mr(W.width+2*bn,W.height+2*bn,25)),this.transform=W,this.grid=de,this.ignoredGrid=J,this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance,this.screenRightBoundary=W.width+bn,this.screenBottomBoundary=W.height+bn,this.gridRightBoundary=W.width+2*bn,this.gridBottomBoundary=W.height+2*bn};dn.prototype.placeCollisionBox=function(W,de,J,ge,Ce){var Fe=this.projectAndGetPerspectiveRatio(ge,W.anchorPointX,W.anchorPointY),$e=J*Fe.perspectiveRatio,ht=W.x1*$e+Fe.point.x,Dt=W.y1*$e+Fe.point.y,er=W.x2*$e+Fe.point.x,pr=W.y2*$e+Fe.point.y;return!this.isInsideGrid(ht,Dt,er,pr)||!de&&this.grid.hitTest(ht,Dt,er,pr,Ce)?{box:[],offscreen:!1}:{box:[ht,Dt,er,pr],offscreen:this.isOffscreen(ht,Dt,er,pr)}},dn.prototype.placeCollisionCircles=function(W,de,J,ge,Ce,Fe,$e,ht,Dt,er,pr,yr,Rr){var Zr=[],Jr=new e.Point(de.anchorX,de.anchorY),Xr=mn(Jr,Fe),rn=Wn(this.transform.cameraToCenterDistance,Xr.signedDistanceFromCamera),xn=er?Ce/rn:Ce*rn,Fn=xn/e.ONE_EM,Gn=mn(Jr,$e).point,oa={},ca=de.lineOffsetX*Fn,la=de.lineOffsetY*Fn,wa=Kn(Fn,ge,ca,la,!1,Gn,Jr,de,J,$e,oa),La=!1,Ca=!1,Fa=!0;if(wa){for(var Ba=yr*.5*rn+Rr,ti=new e.Point(-bn,-bn),pi=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Yi=new Dr,xi=wa.first,Ci=wa.last,$a=[],Wi=xi.path.length-1;Wi>=1;Wi--)$a.push(xi.path[Wi]);for(var Qi=1;Qi<Ci.path.length;Qi++)$a.push(Ci.path[Qi]);var to=Ba*2.5;if(ht){var Ii=$a.map(function(ac){return mn(ac,ht)});Ii.some(function(ac){return ac.signedDistanceFromCamera<=0})?$a=[]:$a=Ii.map(function(ac){return ac.point})}var vo=[];if($a.length>0){for(var gi=$a[0].clone(),Oi=$a[0].clone(),Go=1;Go<$a.length;Go++)gi.x=Math.min(gi.x,$a[Go].x),gi.y=Math.min(gi.y,$a[Go].y),Oi.x=Math.max(Oi.x,$a[Go].x),Oi.y=Math.max(Oi.y,$a[Go].y);gi.x>=ti.x&&Oi.x<=pi.x&&gi.y>=ti.y&&Oi.y<=pi.y?vo=[$a]:Oi.x<ti.x||gi.x>pi.x||Oi.y<ti.y||gi.y>pi.y?vo=[]:vo=e.clipLine([$a],ti.x,ti.y,pi.x,pi.y)}for(var is=0,xu=vo;is<xu.length;is+=1){var bu=xu[is];Yi.reset(bu,Ba*.25);var ec=0;Yi.length<=.5*Ba?ec=1:ec=Math.ceil(Yi.paddedLength/to)+1;for(var tc=0;tc<ec;tc++){var yc=tc/Math.max(ec-1,1),rc=Yi.lerp(yc),wl=rc.x+bn,Rc=rc.y+bn;Zr.push(wl,Rc,Ba,0);var Zs=wl-Ba,eu=Rc-Ba,nc=wl+Ba,Vu=Rc+Ba;if(Fa=Fa&&this.isOffscreen(Zs,eu,nc,Vu),Ca=Ca||this.isInsideGrid(Zs,eu,nc,Vu),!W&&this.grid.hitTestCircle(wl,Rc,Ba,pr)&&(La=!0,!Dt))return{circles:[],offscreen:!1,collisionDetected:La}}}}return{circles:!Dt&&La||!Ca?[]:Zr,offscreen:Fa,collisionDetected:La}},dn.prototype.queryRenderedSymbols=function(W){if(W.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var de=[],J=1/0,ge=1/0,Ce=-1/0,Fe=-1/0,$e=0,ht=W;$e<ht.length;$e+=1){var Dt=ht[$e],er=new e.Point(Dt.x+bn,Dt.y+bn);J=Math.min(J,er.x),ge=Math.min(ge,er.y),Ce=Math.max(Ce,er.x),Fe=Math.max(Fe,er.y),de.push(er)}for(var pr=this.grid.query(J,ge,Ce,Fe).concat(this.ignoredGrid.query(J,ge,Ce,Fe)),yr={},Rr={},Zr=0,Jr=pr;Zr<Jr.length;Zr+=1){var Xr=Jr[Zr],rn=Xr.key;if(yr[rn.bucketInstanceId]===void 0&&(yr[rn.bucketInstanceId]={}),!yr[rn.bucketInstanceId][rn.featureIndex]){var xn=[new e.Point(Xr.x1,Xr.y1),new e.Point(Xr.x2,Xr.y1),new e.Point(Xr.x2,Xr.y2),new e.Point(Xr.x1,Xr.y2)];!e.polygonIntersectsPolygon(de,xn)||(yr[rn.bucketInstanceId][rn.featureIndex]=!0,Rr[rn.bucketInstanceId]===void 0&&(Rr[rn.bucketInstanceId]=[]),Rr[rn.bucketInstanceId].push(rn.featureIndex))}}return Rr},dn.prototype.insertCollisionBox=function(W,de,J,ge,Ce){var Fe=de?this.ignoredGrid:this.grid,$e={bucketInstanceId:J,featureIndex:ge,collisionGroupID:Ce};Fe.insert($e,W[0],W[1],W[2],W[3])},dn.prototype.insertCollisionCircles=function(W,de,J,ge,Ce){for(var Fe=de?this.ignoredGrid:this.grid,$e={bucketInstanceId:J,featureIndex:ge,collisionGroupID:Ce},ht=0;ht<W.length;ht+=4)Fe.insertCircle($e,W[ht],W[ht+1],W[ht+2])},dn.prototype.projectAndGetPerspectiveRatio=function(W,de,J){var ge=[de,J,0,1];kr(ge,ge,W);var Ce=new e.Point((ge[0]/ge[3]+1)/2*this.transform.width+bn,(-ge[1]/ge[3]+1)/2*this.transform.height+bn);return{point:Ce,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ge[3])}},dn.prototype.isOffscreen=function(W,de,J,ge){return J<bn||W>=this.screenRightBoundary||ge<bn||de>this.screenBottomBoundary},dn.prototype.isInsideGrid=function(W,de,J,ge){return J>=0&&W<this.gridRightBoundary&&ge>=0&&de<this.gridBottomBoundary},dn.prototype.getViewportMatrix=function(){var W=e.identity([]);return e.translate(W,W,[-bn,-bn,0]),W};function Ln(ve,W,de){return W*(e.EXTENT/(ve.tileSize*Math.pow(2,de-ve.tileID.overscaledZ)))}var ra=function(W,de,J,ge){W?this.opacity=Math.max(0,Math.min(1,W.opacity+(W.placed?de:-de))):this.opacity=ge&&J?1:0,this.placed=J};ra.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ya=function(W,de,J,ge,Ce){this.text=new ra(W?W.text:null,de,J,Ce),this.icon=new ra(W?W.icon:null,de,ge,Ce)};ya.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var sa=function(W,de,J){this.text=W,this.icon=de,this.skipFade=J},Bn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Qn=function(W,de,J,ge,Ce){this.bucketInstanceId=W,this.featureIndex=de,this.sourceLayerIndex=J,this.bucketIndex=ge,this.tileID=Ce},Xa=function(W){this.crossSourceCollisions=W,this.maxGroupID=0,this.collisionGroups={}};Xa.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var de=++this.maxGroupID;this.collisionGroups[W]={ID:de,predicate:function(J){return J.collisionGroupID===de}}}return this.collisionGroups[W]};function mi(ve,W,de,J,ge){var Ce=e.getAnchorAlignment(ve),Fe=Ce.horizontalAlign,$e=Ce.verticalAlign,ht=-(Fe-.5)*W,Dt=-($e-.5)*de,er=e.evaluateVariableOffset(ve,J);return new e.Point(ht+er[0]*ge,Dt+er[1]*ge)}function Yt(ve,W,de,J,ge,Ce){var Fe=ve.x1,$e=ve.x2,ht=ve.y1,Dt=ve.y2,er=ve.anchorPointX,pr=ve.anchorPointY,yr=new e.Point(W,de);return J&&yr._rotate(ge?Ce:-Ce),{x1:Fe+yr.x,y1:ht+yr.y,x2:$e+yr.x,y2:Dt+yr.y,anchorPointX:er,anchorPointY:pr}}var gr=function(W,de,J,ge){this.transform=W.clone(),this.collisionIndex=new dn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=de,this.retainedQueryData={},this.collisionGroups=new Xa(J),this.collisionCircleArrays={},this.prevPlacement=ge,ge&&(ge.prevPlacement=void 0),this.placedOrientations={}};gr.prototype.getBucketParts=function(W,de,J,ge){var Ce=J.getBucket(de),Fe=J.latestFeatureIndex;if(!(!Ce||!Fe||de.id!==Ce.layerIds[0])){var $e=J.collisionBoxArray,ht=Ce.layers[0].layout,Dt=Math.pow(2,this.transform.zoom-J.tileID.overscaledZ),er=J.tileSize/e.EXTENT,pr=this.transform.calculatePosMatrix(J.tileID.toUnwrapped()),yr=ht.get("text-pitch-alignment")==="map",Rr=ht.get("text-rotation-alignment")==="map",Zr=Ln(J,1,this.transform.zoom),Jr=jr(pr,yr,Rr,this.transform,Zr),Xr=null;if(yr){var rn=kn(pr,yr,Rr,this.transform,Zr);Xr=e.multiply([],this.transform.labelPlaneMatrix,rn)}this.retainedQueryData[Ce.bucketInstanceId]=new Qn(Ce.bucketInstanceId,Fe,Ce.sourceLayerIndex,Ce.index,J.tileID);var xn={bucket:Ce,layout:ht,posMatrix:pr,textLabelPlaneMatrix:Jr,labelToScreenMatrix:Xr,scale:Dt,textPixelRatio:er,holdingForFade:J.holdingForFade(),collisionBoxArray:$e,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ce.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ce.sourceID)};if(ge)for(var Fn=0,Gn=Ce.sortKeyRanges;Fn<Gn.length;Fn+=1){var oa=Gn[Fn],ca=oa.sortKey,la=oa.symbolInstanceStart,wa=oa.symbolInstanceEnd;W.push({sortKey:ca,symbolInstanceStart:la,symbolInstanceEnd:wa,parameters:xn})}else W.push({symbolInstanceStart:0,symbolInstanceEnd:Ce.symbolInstances.length,parameters:xn})}},gr.prototype.attemptAnchorPlacement=function(W,de,J,ge,Ce,Fe,$e,ht,Dt,er,pr,yr,Rr,Zr,Jr){var Xr=[yr.textOffset0,yr.textOffset1],rn=mi(W,J,ge,Xr,Ce),xn=this.collisionIndex.placeCollisionBox(Yt(de,rn.x,rn.y,Fe,$e,this.transform.angle),pr,ht,Dt,er.predicate);if(Jr){var Fn=this.collisionIndex.placeCollisionBox(Yt(Jr,rn.x,rn.y,Fe,$e,this.transform.angle),pr,ht,Dt,er.predicate);if(Fn.box.length===0)return}if(xn.box.length>0){var Gn;return this.prevPlacement&&this.prevPlacement.variableOffsets[yr.crossTileID]&&this.prevPlacement.placements[yr.crossTileID]&&this.prevPlacement.placements[yr.crossTileID].text&&(Gn=this.prevPlacement.variableOffsets[yr.crossTileID].anchor),this.variableOffsets[yr.crossTileID]={textOffset:Xr,width:J,height:ge,anchor:W,textBoxScale:Ce,prevAnchor:Gn},this.markUsedJustification(Rr,W,yr,Zr),Rr.allowVerticalPlacement&&(this.markUsedOrientation(Rr,Zr,yr),this.placedOrientations[yr.crossTileID]=Zr),{shift:rn,placedGlyphBoxes:xn}}},gr.prototype.placeLayerBucketPart=function(W,de,J){var ge=this,Ce=W.parameters,Fe=Ce.bucket,$e=Ce.layout,ht=Ce.posMatrix,Dt=Ce.textLabelPlaneMatrix,er=Ce.labelToScreenMatrix,pr=Ce.textPixelRatio,yr=Ce.holdingForFade,Rr=Ce.collisionBoxArray,Zr=Ce.partiallyEvaluatedTextSize,Jr=Ce.collisionGroup,Xr=$e.get("text-optional"),rn=$e.get("icon-optional"),xn=$e.get("text-allow-overlap"),Fn=$e.get("icon-allow-overlap"),Gn=$e.get("text-rotation-alignment")==="map",oa=$e.get("text-pitch-alignment")==="map",ca=$e.get("icon-text-fit")!=="none",la=$e.get("symbol-z-order")==="viewport-y",wa=xn&&(Fn||!Fe.hasIconData()||rn),La=Fn&&(xn||!Fe.hasTextData()||Xr);!Fe.collisionArrays&&Rr&&Fe.deserializeCollisionBoxes(Rr);var Ca=function(xi,Ci){if(!de[xi.crossTileID]){if(yr){ge.placements[xi.crossTileID]=new sa(!1,!1,!1);return}var $a=!1,Wi=!1,Qi=!0,to=null,Ii={box:null,offscreen:null},vo={box:null,offscreen:null},gi=null,Oi=null,Go=null,is=0,xu=0,bu=0;Ci.textFeatureIndex?is=Ci.textFeatureIndex:xi.useRuntimeCollisionCircles&&(is=xi.featureIndex),Ci.verticalTextFeatureIndex&&(xu=Ci.verticalTextFeatureIndex);var ec=Ci.textBox;if(ec){var tc=function(Zo){var Bl=e.WritingMode.horizontal;if(Fe.allowVerticalPlacement&&!Zo&&ge.prevPlacement){var Ul=ge.prevPlacement.placedOrientations[xi.crossTileID];Ul&&(ge.placedOrientations[xi.crossTileID]=Ul,Bl=Ul,ge.markUsedOrientation(Fe,Bl,xi))}return Bl},yc=function(Zo,Bl){if(Fe.allowVerticalPlacement&&xi.numVerticalGlyphVertices>0&&Ci.verticalTextBox)for(var Ul=0,_h=Fe.writingModes;Ul<_h.length;Ul+=1){var wv=_h[Ul];if(wv===e.WritingMode.vertical?(Ii=Bl(),vo=Ii):Ii=Zo(),Ii&&Ii.box&&Ii.box.length)break}else Ii=Zo()};if($e.get("text-variable-anchor")){var Zs=$e.get("text-variable-anchor");if(ge.prevPlacement&&ge.prevPlacement.variableOffsets[xi.crossTileID]){var eu=ge.prevPlacement.variableOffsets[xi.crossTileID];Zs.indexOf(eu.anchor)>0&&(Zs=Zs.filter(function(Zo){return Zo!==eu.anchor}),Zs.unshift(eu.anchor))}var nc=function(Zo,Bl,Ul){for(var _h=Zo.x2-Zo.x1,wv=Zo.y2-Zo.y1,Bd=xi.textBoxScale,Ud=ca&&!Fn?Bl:null,Hf={box:[],offscreen:!1},Vd=xn?Zs.length*2:Zs.length,wh=0;wh<Vd;++wh){var Hd=Zs[wh%Zs.length],Gd=wh>=Zs.length,Tv=ge.attemptAnchorPlacement(Hd,Zo,_h,wv,Bd,Gn,oa,pr,ht,Jr,Gd,xi,Fe,Ul,Ud);if(Tv&&(Hf=Tv.placedGlyphBoxes,Hf&&Hf.box&&Hf.box.length)){$a=!0,to=Tv.shift;break}}return Hf},Vu=function(){return nc(ec,Ci.iconBox,e.WritingMode.horizontal)},ac=function(){var Zo=Ci.verticalTextBox,Bl=Ii&&Ii.box&&Ii.box.length;return Fe.allowVerticalPlacement&&!Bl&&xi.numVerticalGlyphVertices>0&&Zo?nc(Zo,Ci.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};yc(Vu,ac),Ii&&($a=Ii.box,Qi=Ii.offscreen);var mh=tc(Ii&&Ii.box);if(!$a&&ge.prevPlacement){var Gc=ge.prevPlacement.variableOffsets[xi.crossTileID];Gc&&(ge.variableOffsets[xi.crossTileID]=Gc,ge.markUsedJustification(Fe,Gc.anchor,xi,mh))}}else{var rc=function(Zo,Bl){var Ul=ge.collisionIndex.placeCollisionBox(Zo,xn,pr,ht,Jr.predicate);return Ul&&Ul.box&&Ul.box.length&&(ge.markUsedOrientation(Fe,Bl,xi),ge.placedOrientations[xi.crossTileID]=Bl),Ul},wl=function(){return rc(ec,e.WritingMode.horizontal)},Rc=function(){var Zo=Ci.verticalTextBox;return Fe.allowVerticalPlacement&&xi.numVerticalGlyphVertices>0&&Zo?rc(Zo,e.WritingMode.vertical):{box:null,offscreen:null}};yc(wl,Rc),tc(Ii&&Ii.box&&Ii.box.length)}}if(gi=Ii,$a=gi&&gi.box&&gi.box.length>0,Qi=gi&&gi.offscreen,xi.useRuntimeCollisionCircles){var Bs=Fe.text.placedSymbolArray.get(xi.centerJustifiedTextSymbolIndex),Uf=e.evaluateSizeForFeature(Fe.textSizeData,Zr,Bs),ll=$e.get("text-padding"),Vf=xi.collisionCircleDiameter;Oi=ge.collisionIndex.placeCollisionCircles(xn,Bs,Fe.lineVertexArray,Fe.glyphOffsetArray,Uf,ht,Dt,er,J,oa,Jr.predicate,Vf,ll),$a=xn||Oi.circles.length>0&&!Oi.collisionDetected,Qi=Qi&&Oi.offscreen}if(Ci.iconFeatureIndex&&(bu=Ci.iconFeatureIndex),Ci.iconBox){var yh=function(Zo){var Bl=ca&&to?Yt(Zo,to.x,to.y,Gn,oa,ge.transform.angle):Zo;return ge.collisionIndex.placeCollisionBox(Bl,Fn,pr,ht,Jr.predicate)};vo&&vo.box&&vo.box.length&&Ci.verticalIconBox?(Go=yh(Ci.verticalIconBox),Wi=Go.box.length>0):(Go=yh(Ci.iconBox),Wi=Go.box.length>0),Qi=Qi&&Go.offscreen}var xh=Xr||xi.numHorizontalGlyphVertices===0&&xi.numVerticalGlyphVertices===0,yp=rn||xi.numIconVertices===0;if(!xh&&!yp?Wi=$a=Wi&&$a:yp?xh||(Wi=Wi&&$a):$a=Wi&&$a,$a&&gi&&gi.box&&(vo&&vo.box&&xu?ge.collisionIndex.insertCollisionBox(gi.box,$e.get("text-ignore-placement"),Fe.bucketInstanceId,xu,Jr.ID):ge.collisionIndex.insertCollisionBox(gi.box,$e.get("text-ignore-placement"),Fe.bucketInstanceId,is,Jr.ID)),Wi&&Go&&ge.collisionIndex.insertCollisionBox(Go.box,$e.get("icon-ignore-placement"),Fe.bucketInstanceId,bu,Jr.ID),Oi&&($a&&ge.collisionIndex.insertCollisionCircles(Oi.circles,$e.get("text-ignore-placement"),Fe.bucketInstanceId,is,Jr.ID),J)){var bh=Fe.bucketInstanceId,cf=ge.collisionCircleArrays[bh];cf===void 0&&(cf=ge.collisionCircleArrays[bh]=new Bn);for(var ff=0;ff<Oi.circles.length;ff+=4)cf.circles.push(Oi.circles[ff+0]),cf.circles.push(Oi.circles[ff+1]),cf.circles.push(Oi.circles[ff+2]),cf.circles.push(Oi.collisionDetected?1:0)}ge.placements[xi.crossTileID]=new sa($a||wa,Wi||La,Qi||Fe.justReloaded),de[xi.crossTileID]=!0}};if(la)for(var Fa=Fe.getSortedSymbolIndexes(this.transform.angle),Ba=Fa.length-1;Ba>=0;--Ba){var ti=Fa[Ba];Ca(Fe.symbolInstances.get(ti),Fe.collisionArrays[ti])}else for(var pi=W.symbolInstanceStart;pi<W.symbolInstanceEnd;pi++)Ca(Fe.symbolInstances.get(pi),Fe.collisionArrays[pi]);if(J&&Fe.bucketInstanceId in this.collisionCircleArrays){var Yi=this.collisionCircleArrays[Fe.bucketInstanceId];e.invert(Yi.invProjMatrix,ht),Yi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Fe.justReloaded=!1},gr.prototype.markUsedJustification=function(W,de,J,ge){var Ce={left:J.leftJustifiedTextSymbolIndex,center:J.centerJustifiedTextSymbolIndex,right:J.rightJustifiedTextSymbolIndex},Fe;ge===e.WritingMode.vertical?Fe=J.verticalPlacedTextSymbolIndex:Fe=Ce[e.getAnchorJustification(de)];for(var $e=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex,J.verticalPlacedTextSymbolIndex],ht=0,Dt=$e;ht<Dt.length;ht+=1){var er=Dt[ht];er>=0&&(Fe>=0&&er!==Fe?W.text.placedSymbolArray.get(er).crossTileID=0:W.text.placedSymbolArray.get(er).crossTileID=J.crossTileID)}},gr.prototype.markUsedOrientation=function(W,de,J){for(var ge=de===e.WritingMode.horizontal||de===e.WritingMode.horizontalOnly?de:0,Ce=de===e.WritingMode.vertical?de:0,Fe=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex],$e=0,ht=Fe;$e<ht.length;$e+=1){var Dt=ht[$e];W.text.placedSymbolArray.get(Dt).placedOrientation=ge}J.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).placedOrientation=Ce)},gr.prototype.commit=function(W){this.commitTime=W,this.zoomAtLastRecencyCheck=this.transform.zoom;var de=this.prevPlacement,J=!1;this.prevZoomAdjustment=de?de.zoomAdjustment(this.transform.zoom):0;var ge=de?de.symbolFadeChange(W):1,Ce=de?de.opacities:{},Fe=de?de.variableOffsets:{},$e=de?de.placedOrientations:{};for(var ht in this.placements){var Dt=this.placements[ht],er=Ce[ht];er?(this.opacities[ht]=new ya(er,ge,Dt.text,Dt.icon),J=J||Dt.text!==er.text.placed||Dt.icon!==er.icon.placed):(this.opacities[ht]=new ya(null,ge,Dt.text,Dt.icon,Dt.skipFade),J=J||Dt.text||Dt.icon)}for(var pr in Ce){var yr=Ce[pr];if(!this.opacities[pr]){var Rr=new ya(yr,ge,!1,!1);Rr.isHidden()||(this.opacities[pr]=Rr,J=J||yr.text.placed||yr.icon.placed)}}for(var Zr in Fe)!this.variableOffsets[Zr]&&this.opacities[Zr]&&!this.opacities[Zr].isHidden()&&(this.variableOffsets[Zr]=Fe[Zr]);for(var Jr in $e)!this.placedOrientations[Jr]&&this.opacities[Jr]&&!this.opacities[Jr].isHidden()&&(this.placedOrientations[Jr]=$e[Jr]);J?this.lastPlacementChangeTime=W:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=de?de.lastPlacementChangeTime:W)},gr.prototype.updateLayerOpacities=function(W,de){for(var J={},ge=0,Ce=de;ge<Ce.length;ge+=1){var Fe=Ce[ge],$e=Fe.getBucket(W);$e&&Fe.latestFeatureIndex&&W.id===$e.layerIds[0]&&this.updateBucketOpacities($e,J,Fe.collisionBoxArray)}},gr.prototype.updateBucketOpacities=function(W,de,J){var ge=this;W.hasTextData()&&W.text.opacityVertexArray.clear(),W.hasIconData()&&W.icon.opacityVertexArray.clear(),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear(),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var Ce=W.layers[0].layout,Fe=new ya(null,0,!1,!1,!0),$e=Ce.get("text-allow-overlap"),ht=Ce.get("icon-allow-overlap"),Dt=Ce.get("text-variable-anchor"),er=Ce.get("text-rotation-alignment")==="map",pr=Ce.get("text-pitch-alignment")==="map",yr=Ce.get("icon-text-fit")!=="none",Rr=new ya(null,0,$e&&(ht||!W.hasIconData()||Ce.get("icon-optional")),ht&&($e||!W.hasTextData()||Ce.get("text-optional")),!0);!W.collisionArrays&&J&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes(J);for(var Zr=function(xn,Fn,Gn){for(var oa=0;oa<Fn/4;oa++)xn.opacityVertexArray.emplaceBack(Gn)},Jr=function(xn){var Fn=W.symbolInstances.get(xn),Gn=Fn.numHorizontalGlyphVertices,oa=Fn.numVerticalGlyphVertices,ca=Fn.crossTileID,la=de[ca],wa=ge.opacities[ca];la?wa=Fe:wa||(wa=Rr,ge.opacities[ca]=wa),de[ca]=!0;var La=Gn>0||oa>0,Ca=Fn.numIconVertices>0,Fa=ge.placedOrientations[Fn.crossTileID],Ba=Fa===e.WritingMode.vertical,ti=Fa===e.WritingMode.horizontal||Fa===e.WritingMode.horizontalOnly;if(La){var pi=Br(wa.text),Yi=Ba?An:pi;Zr(W.text,Gn,Yi);var xi=ti?An:pi;Zr(W.text,oa,xi);var Ci=wa.text.isHidden();[Fn.rightJustifiedTextSymbolIndex,Fn.centerJustifiedTextSymbolIndex,Fn.leftJustifiedTextSymbolIndex].forEach(function(bu){bu>=0&&(W.text.placedSymbolArray.get(bu).hidden=Ci||Ba?1:0)}),Fn.verticalPlacedTextSymbolIndex>=0&&(W.text.placedSymbolArray.get(Fn.verticalPlacedTextSymbolIndex).hidden=Ci||ti?1:0);var $a=ge.variableOffsets[Fn.crossTileID];$a&&ge.markUsedJustification(W,$a.anchor,Fn,Fa);var Wi=ge.placedOrientations[Fn.crossTileID];Wi&&(ge.markUsedJustification(W,"left",Fn,Wi),ge.markUsedOrientation(W,Wi,Fn))}if(Ca){var Qi=Br(wa.icon),to=!(yr&&Fn.verticalPlacedIconSymbolIndex&&Ba);if(Fn.placedIconSymbolIndex>=0){var Ii=to?Qi:An;Zr(W.icon,Fn.numIconVertices,Ii),W.icon.placedSymbolArray.get(Fn.placedIconSymbolIndex).hidden=wa.icon.isHidden()}if(Fn.verticalPlacedIconSymbolIndex>=0){var vo=to?An:Qi;Zr(W.icon,Fn.numVerticalIconVertices,vo),W.icon.placedSymbolArray.get(Fn.verticalPlacedIconSymbolIndex).hidden=wa.icon.isHidden()}}if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData()){var gi=W.collisionArrays[xn];if(gi){var Oi=new e.Point(0,0);if(gi.textBox||gi.verticalTextBox){var Go=!0;if(Dt){var is=ge.variableOffsets[ca];is?(Oi=mi(is.anchor,is.width,is.height,is.textOffset,is.textBoxScale),er&&Oi._rotate(pr?ge.transform.angle:-ge.transform.angle)):Go=!1}gi.textBox&&un(W.textCollisionBox.collisionVertexArray,wa.text.placed,!Go||Ba,Oi.x,Oi.y),gi.verticalTextBox&&un(W.textCollisionBox.collisionVertexArray,wa.text.placed,!Go||ti,Oi.x,Oi.y)}var xu=Boolean(!ti&&gi.verticalIconBox);gi.iconBox&&un(W.iconCollisionBox.collisionVertexArray,wa.icon.placed,xu,yr?Oi.x:0,yr?Oi.y:0),gi.verticalIconBox&&un(W.iconCollisionBox.collisionVertexArray,wa.icon.placed,!xu,yr?Oi.x:0,yr?Oi.y:0)}}},Xr=0;Xr<W.symbolInstances.length;Xr++)Jr(Xr);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),W.bucketInstanceId in this.collisionCircleArrays){var rn=this.collisionCircleArrays[W.bucketInstanceId];W.placementInvProjMatrix=rn.invProjMatrix,W.placementViewportMatrix=rn.viewportMatrix,W.collisionCircleArray=rn.circles,delete this.collisionCircleArrays[W.bucketInstanceId]}},gr.prototype.symbolFadeChange=function(W){return this.fadeDuration===0?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},gr.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)},gr.prototype.hasTransitions=function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration},gr.prototype.stillRecent=function(W,de){var J=this.zoomAtLastRecencyCheck===de?1-this.zoomAdjustment(de):1;return this.zoomAtLastRecencyCheck=de,this.commitTime+this.fadeDuration*J>W},gr.prototype.setStale=function(){this.stale=!0};function un(ve,W,de,J,ge){ve.emplaceBack(W?1:0,de?1:0,J||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,J||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,J||0,ge||0),ve.emplaceBack(W?1:0,de?1:0,J||0,ge||0)}var yn=Math.pow(2,25),sn=Math.pow(2,24),Cn=Math.pow(2,17),Tn=Math.pow(2,16),gn=Math.pow(2,9),_r=Math.pow(2,8),wr=Math.pow(2,1);function Br(ve){if(ve.opacity===0&&!ve.placed)return 0;if(ve.opacity===1&&ve.placed)return 4294967295;var W=ve.placed?1:0,de=Math.floor(ve.opacity*127);return de*yn+W*sn+de*Cn+W*Tn+de*gn+W*_r+de*wr+W}var An=0,Yn=function(W){this._sortAcrossTiles=W.layout.get("symbol-z-order")!=="viewport-y"&&W.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yn.prototype.continuePlacement=function(W,de,J,ge,Ce){for(var Fe=this._bucketParts;this._currentTileIndex<W.length;){var $e=W[this._currentTileIndex];if(de.getBucketParts(Fe,ge,$e,this._sortAcrossTiles),this._currentTileIndex++,Ce())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Fe.sort(function(Dt,er){return Dt.sortKey-er.sortKey}));this._currentPartIndex<Fe.length;){var ht=Fe[this._currentPartIndex];if(de.placeLayerBucketPart(ht,this._seenCrossTileIDs,J),this._currentPartIndex++,Ce())return!0}return!1};var ua=function(W,de,J,ge,Ce,Fe,$e){this.placement=new gr(W,Ce,Fe,$e),this._currentPlacementIndex=de.length-1,this._forceFullPlacement=J,this._showCollisionBoxes=ge,this._done=!1};ua.prototype.isDone=function(){return this._done},ua.prototype.continuePlacement=function(W,de,J){for(var ge=this,Ce=e.browser.now(),Fe=function(){var pr=e.browser.now()-Ce;return ge._forceFullPlacement?!1:pr>2};this._currentPlacementIndex>=0;){var $e=W[this._currentPlacementIndex],ht=de[$e],Dt=this.placement.collisionIndex.transform.zoom;if(ht.type==="symbol"&&(!ht.minzoom||ht.minzoom<=Dt)&&(!ht.maxzoom||ht.maxzoom>Dt)){this._inProgressLayer||(this._inProgressLayer=new Yn(ht));var er=this._inProgressLayer.continuePlacement(J[ht.source],this.placement,this._showCollisionBoxes,ht,Fe);if(er)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ua.prototype.commit=function(W){return this.placement.commit(W),this.placement};var Sn=512/e.EXTENT/2,na=function(W,de,J){this.tileID=W,this.indexedSymbolInstances={},this.bucketInstanceId=J;for(var ge=0;ge<de.length;ge++){var Ce=de.get(ge),Fe=Ce.key;this.indexedSymbolInstances[Fe]||(this.indexedSymbolInstances[Fe]=[]),this.indexedSymbolInstances[Fe].push({crossTileID:Ce.crossTileID,coord:this.getScaledCoordinates(Ce,W)})}};na.prototype.getScaledCoordinates=function(W,de){var J=de.canonical.z-this.tileID.canonical.z,ge=Sn/Math.pow(2,J);return{x:Math.floor((de.canonical.x*e.EXTENT+W.anchorX)*ge),y:Math.floor((de.canonical.y*e.EXTENT+W.anchorY)*ge)}},na.prototype.findMatches=function(W,de,J){for(var ge=this.tileID.canonical.z<de.canonical.z?1:Math.pow(2,this.tileID.canonical.z-de.canonical.z),Ce=0;Ce<W.length;Ce++){var Fe=W.get(Ce);if(!Fe.crossTileID){var $e=this.indexedSymbolInstances[Fe.key];if(!!$e)for(var ht=this.getScaledCoordinates(Fe,de),Dt=0,er=$e;Dt<er.length;Dt+=1){var pr=er[Dt];if(Math.abs(pr.coord.x-ht.x)<=ge&&Math.abs(pr.coord.y-ht.y)<=ge&&!J[pr.crossTileID]){J[pr.crossTileID]=!0,Fe.crossTileID=pr.crossTileID;break}}}}};var fa=function(){this.maxCrossTileID=0};fa.prototype.generate=function(){return++this.maxCrossTileID};var Ma=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ma.prototype.handleWrapJump=function(W){var de=Math.round((W-this.lng)/360);if(de!==0)for(var J in this.indexes){var ge=this.indexes[J],Ce={};for(var Fe in ge){var $e=ge[Fe];$e.tileID=$e.tileID.unwrapTo($e.tileID.wrap+de),Ce[$e.tileID.key]=$e}this.indexes[J]=Ce}this.lng=W},Ma.prototype.addBucket=function(W,de,J){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===de.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var ge=0;ge<de.symbolInstances.length;ge++){var Ce=de.symbolInstances.get(ge);Ce.crossTileID=0}this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});var Fe=this.usedCrossTileIDs[W.overscaledZ];for(var $e in this.indexes){var ht=this.indexes[$e];if(Number($e)>W.overscaledZ)for(var Dt in ht){var er=ht[Dt];er.tileID.isChildOf(W)&&er.findMatches(de.symbolInstances,W,Fe)}else{var pr=W.scaledTo(Number($e)),yr=ht[pr.key];yr&&yr.findMatches(de.symbolInstances,W,Fe)}}for(var Rr=0;Rr<de.symbolInstances.length;Rr++){var Zr=de.symbolInstances.get(Rr);Zr.crossTileID||(Zr.crossTileID=J.generate(),Fe[Zr.crossTileID]=!0)}return this.indexes[W.overscaledZ]===void 0&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new na(W,de.symbolInstances,de.bucketInstanceId),!0},Ma.prototype.removeBucketCrossTileIDs=function(W,de){for(var J in de.indexedSymbolInstances)for(var ge=0,Ce=de.indexedSymbolInstances[J];ge<Ce.length;ge+=1){var Fe=Ce[ge];delete this.usedCrossTileIDs[W][Fe.crossTileID]}},Ma.prototype.removeStaleBuckets=function(W){var de=!1;for(var J in this.indexes){var ge=this.indexes[J];for(var Ce in ge)W[ge[Ce].bucketInstanceId]||(this.removeBucketCrossTileIDs(J,ge[Ce]),delete ge[Ce],de=!0)}return de};var ka=function(){this.layerIndexes={},this.crossTileIDs=new fa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ka.prototype.addLayer=function(W,de,J){var ge=this.layerIndexes[W.id];ge===void 0&&(ge=this.layerIndexes[W.id]=new Ma);var Ce=!1,Fe={};ge.handleWrapJump(J);for(var $e=0,ht=de;$e<ht.length;$e+=1){var Dt=ht[$e],er=Dt.getBucket(W);!er||W.id!==er.layerIds[0]||(er.bucketInstanceId||(er.bucketInstanceId=++this.maxBucketInstanceId),ge.addBucket(Dt.tileID,er,this.crossTileIDs)&&(Ce=!0),Fe[er.bucketInstanceId]=!0)}return ge.removeStaleBuckets(Fe)&&(Ce=!0),Ce},ka.prototype.pruneUnusedLayers=function(W){var de={};W.forEach(function(ge){de[ge]=!0});for(var J in this.layerIndexes)de[J]||delete this.layerIndexes[J]};var ga=function(ve,W){return e.emitValidationErrors(ve,W&&W.filter(function(de){return de.identifier!=="source.canvas"}))},Ia=e.pick(lr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Mo=e.pick(lr,["setCenter","setZoom","setBearing","setPitch"]),ro=$r(),Qo=function(ve){function W(de,J){var ge=this;J===void 0&&(J={}),ve.call(this),this.map=de,this.dispatcher=new R(Xt(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new E(de._requestManager,J.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new ka,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ce=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(Fe){var $e={pluginStatus:Fe.pluginStatus,pluginURL:Fe.pluginURL};Ce.dispatcher.broadcast("syncRTLPluginState",$e,function(ht,Dt){if(e.triggerPluginCompletionEvent(ht),Dt){var er=Dt.every(function(yr){return yr});if(er)for(var pr in Ce.sourceCaches)Ce.sourceCaches[pr].reload()}})}),this.on("data",function(Fe){if(!(Fe.dataType!=="source"||Fe.sourceDataType!=="metadata")){var $e=ge.sourceCaches[Fe.sourceId];if(!!$e){var ht=$e.getSource();if(!(!ht||!ht.vectorLayerIds))for(var Dt in ge._layers){var er=ge._layers[Dt];er.source===ht.id&&ge._validateLayer(er)}}}})}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.loadURL=function(J,ge){var Ce=this;ge===void 0&&(ge={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Fe=typeof ge.validate=="boolean"?ge.validate:!e.isMapboxURL(J);J=this.map._requestManager.normalizeStyleURL(J,ge.accessToken);var $e=this.map._requestManager.transformRequest(J,e.ResourceType.Style);this._request=e.getJSON($e,function(ht,Dt){Ce._request=null,ht?Ce.fire(new e.ErrorEvent(ht)):Dt&&Ce._load(Dt,Fe)})},W.prototype.loadJSON=function(J,ge){var Ce=this;ge===void 0&&(ge={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ce._request=null,Ce._load(J,ge.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(ro,!1)},W.prototype._load=function(J,ge){if(!(ge&&ga(this,e.validateStyle(J)))){this._loaded=!0,this.stylesheet=J;for(var Ce in J.sources)this.addSource(Ce,J.sources[Ce],{validate:!1});J.sprite?this._loadSprite(J.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(J.glyphs);var Fe=Er(this.stylesheet.layers);this._order=Fe.map(function(er){return er.id}),this._layers={},this._serializedLayers={};for(var $e=0,ht=Fe;$e<ht.length;$e+=1){var Dt=ht[$e];Dt=e.createStyleLayer(Dt),Dt.setEventedParent(this,{layer:{id:Dt.id}}),this._layers[Dt.id]=Dt,this._serializedLayers[Dt.id]=Dt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},W.prototype._loadSprite=function(J){var ge=this;this._spriteRequest=f(J,this.map._requestManager,function(Ce,Fe){if(ge._spriteRequest=null,Ce)ge.fire(new e.ErrorEvent(Ce));else if(Fe)for(var $e in Fe)ge.imageManager.addImage($e,Fe[$e]);ge.imageManager.setLoaded(!0),ge._availableImages=ge.imageManager.listImages(),ge.dispatcher.broadcast("setImages",ge._availableImages),ge.fire(new e.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(J){var ge=this.sourceCaches[J.source];if(!!ge){var Ce=J.sourceLayer;if(!!Ce){var Fe=ge.getSource();(Fe.type==="geojson"||Fe.vectorLayerIds&&Fe.vectorLayerIds.indexOf(Ce)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ce+'" does not exist on source "'+Fe.id+'" as specified by style layer "'+J.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var J in this.sourceCaches)if(!this.sourceCaches[J].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(J){for(var ge=[],Ce=0,Fe=J;Ce<Fe.length;Ce+=1){var $e=Fe[Ce],ht=this._layers[$e];ht.type!=="custom"&&ge.push(ht.serialize())}return ge},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var J in this.sourceCaches)if(this.sourceCaches[J].hasTransition())return!0;for(var ge in this._layers)if(this._layers[ge].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(J){if(!!this._loaded){var ge=this._changed;if(this._changed){var Ce=Object.keys(this._updatedLayers),Fe=Object.keys(this._removedLayers);(Ce.length||Fe.length)&&this._updateWorkerLayers(Ce,Fe);for(var $e in this._updatedSources){var ht=this._updatedSources[$e];ht==="reload"?this._reloadSource($e):ht==="clear"&&this._clearSource($e)}this._updateTilesForChangedImages();for(var Dt in this._updatedPaintProps)this._layers[Dt].updateTransitions(J);this.light.updateTransitions(J),this._resetUpdates()}for(var er in this.sourceCaches)this.sourceCaches[er].used=!1;for(var pr=0,yr=this._order;pr<yr.length;pr+=1){var Rr=yr[pr],Zr=this._layers[Rr];Zr.recalculate(J,this._availableImages),!Zr.isHidden(J.zoom)&&Zr.source&&(this.sourceCaches[Zr.source].used=!0)}this.light.recalculate(J),this.z=J.zoom,ge&&this.fire(new e.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var J=Object.keys(this._changedImages);if(J.length){for(var ge in this.sourceCaches)this.sourceCaches[ge].reloadTilesForDependencies(["icons","patterns"],J);this._changedImages={}}},W.prototype._updateWorkerLayers=function(J,ge){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(J),removedIds:ge})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(J){var ge=this;if(this._checkLoaded(),ga(this,e.validateStyle(J)))return!1;J=e.clone$1(J),J.layers=Er(J.layers);var Ce=Vr(this.serialize(),J).filter(function($e){return!($e.command in Mo)});if(Ce.length===0)return!1;var Fe=Ce.filter(function($e){return!($e.command in Ia)});if(Fe.length>0)throw new Error("Unimplemented: "+Fe.map(function($e){return $e.command}).join(", ")+".");return Ce.forEach(function($e){$e.command!=="setTransition"&&ge[$e.command].apply(ge,$e.args)}),this.stylesheet=J,!0},W.prototype.addImage=function(J,ge){if(this.getImage(J))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(J,ge),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.updateImage=function(J,ge){this.imageManager.updateImage(J,ge)},W.prototype.getImage=function(J){return this.imageManager.getImage(J)},W.prototype.removeImage=function(J){if(!this.getImage(J))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(J),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(J,ge,Ce){var Fe=this;if(Ce===void 0&&(Ce={}),this._checkLoaded(),this.sourceCaches[J]!==void 0)throw new Error("There is already a source with this ID");if(!ge.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ge).join(", ")+".");var $e=["vector","raster","geojson","video","image"],ht=$e.indexOf(ge.type)>=0;if(!(ht&&this._validate(e.validateStyle.source,"sources."+J,ge,null,Ce))){this.map&&this.map._collectResourceTiming&&(ge.collectResourceTiming=!0);var Dt=this.sourceCaches[J]=new Pe(J,ge,this.dispatcher);Dt.style=this,Dt.setEventedParent(this,function(){return{isSourceLoaded:Fe.loaded(),source:Dt.serialize(),sourceId:J}}),Dt.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(J){if(this._checkLoaded(),this.sourceCaches[J]===void 0)throw new Error("There is no source with this ID");for(var ge in this._layers)if(this._layers[ge].source===J)return this.fire(new e.ErrorEvent(new Error('Source "'+J+'" cannot be removed while layer "'+ge+'" is using it.')));var Ce=this.sourceCaches[J];delete this.sourceCaches[J],delete this._updatedSources[J],Ce.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:J})),Ce.setEventedParent(null),Ce.clearTiles(),Ce.onRemove&&Ce.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(J,ge){this._checkLoaded();var Ce=this.sourceCaches[J].getSource();Ce.setData(ge),this._changed=!0},W.prototype.getSource=function(J){return this.sourceCaches[J]&&this.sourceCaches[J].getSource()},W.prototype.addLayer=function(J,ge,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Fe=J.id;if(this.getLayer(Fe)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Fe+'" already exists on this map')));return}var $e;if(J.type==="custom"){if(ga(this,e.validateCustomStyleLayer(J)))return;$e=e.createStyleLayer(J)}else{if(typeof J.source=="object"&&(this.addSource(Fe,J.source),J=e.clone$1(J),J=e.extend(J,{source:Fe})),this._validate(e.validateStyle.layer,"layers."+Fe,J,{arrayIndex:-1},Ce))return;$e=e.createStyleLayer(J),this._validateLayer($e),$e.setEventedParent(this,{layer:{id:Fe}}),this._serializedLayers[$e.id]=$e.serialize()}var ht=ge?this._order.indexOf(ge):this._order.length;if(ge&&ht===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}if(this._order.splice(ht,0,Fe),this._layerOrderChanged=!0,this._layers[Fe]=$e,this._removedLayers[Fe]&&$e.source&&$e.type!=="custom"){var Dt=this._removedLayers[Fe];delete this._removedLayers[Fe],Dt.type!==$e.type?this._updatedSources[$e.source]="clear":(this._updatedSources[$e.source]="reload",this.sourceCaches[$e.source].pause())}this._updateLayer($e),$e.onAdd&&$e.onAdd(this.map)},W.prototype.moveLayer=function(J,ge){this._checkLoaded(),this._changed=!0;var Ce=this._layers[J];if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be moved.")));return}if(J!==ge){var Fe=this._order.indexOf(J);this._order.splice(Fe,1);var $e=ge?this._order.indexOf(ge):this._order.length;if(ge&&$e===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}this._order.splice($e,0,J),this._layerOrderChanged=!0}},W.prototype.removeLayer=function(J){this._checkLoaded();var ge=this._layers[J];if(!ge){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be removed.")));return}ge.setEventedParent(null);var Ce=this._order.indexOf(J);this._order.splice(Ce,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[J]=ge,delete this._layers[J],delete this._serializedLayers[J],delete this._updatedLayers[J],delete this._updatedPaintProps[J],ge.onRemove&&ge.onRemove(this.map)},W.prototype.getLayer=function(J){return this._layers[J]},W.prototype.hasLayer=function(J){return J in this._layers},W.prototype.setLayerZoomRange=function(J,ge,Ce){this._checkLoaded();var Fe=this.getLayer(J);if(!Fe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot have zoom extent.")));return}Fe.minzoom===ge&&Fe.maxzoom===Ce||(ge!=null&&(Fe.minzoom=ge),Ce!=null&&(Fe.maxzoom=Ce),this._updateLayer(Fe))},W.prototype.setFilter=function(J,ge,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Fe=this.getLayer(J);if(!Fe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Fe.filter,ge)){if(ge==null){Fe.filter=void 0,this._updateLayer(Fe);return}this._validate(e.validateStyle.filter,"layers."+Fe.id+".filter",ge,null,Ce)||(Fe.filter=e.clone$1(ge),this._updateLayer(Fe))}},W.prototype.getFilter=function(J){return e.clone$1(this.getLayer(J).filter)},W.prototype.setLayoutProperty=function(J,ge,Ce,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var $e=this.getLayer(J);if(!$e){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual($e.getLayoutProperty(ge),Ce)||($e.setLayoutProperty(ge,Ce,Fe),this._updateLayer($e))},W.prototype.getLayoutProperty=function(J,ge){var Ce=this.getLayer(J);if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style.")));return}return Ce.getLayoutProperty(ge)},W.prototype.setPaintProperty=function(J,ge,Ce,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var $e=this.getLayer(J);if(!$e){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual($e.getPaintProperty(ge),Ce)){var ht=$e.setPaintProperty(ge,Ce,Fe);ht&&this._updateLayer($e),this._changed=!0,this._updatedPaintProps[J]=!0}},W.prototype.getPaintProperty=function(J,ge){return this.getLayer(J).getPaintProperty(ge)},W.prototype.setFeatureState=function(J,ge){this._checkLoaded();var Ce=J.source,Fe=J.sourceLayer,$e=this.sourceCaches[Ce];if($e===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ce+"' does not exist in the map's style.")));return}var ht=$e.getSource().type;if(ht==="geojson"&&Fe){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ht==="vector"&&!Fe){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),$e.setFeatureState(Fe,J.id,ge)},W.prototype.removeFeatureState=function(J,ge){this._checkLoaded();var Ce=J.source,Fe=this.sourceCaches[Ce];if(Fe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ce+"' does not exist in the map's style.")));return}var $e=Fe.getSource().type,ht=$e==="vector"?J.sourceLayer:void 0;if($e==="vector"&&!ht){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ge&&typeof J.id!="string"&&typeof J.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Fe.removeFeatureState(ht,J.id,ge)},W.prototype.getFeatureState=function(J){this._checkLoaded();var ge=J.source,Ce=J.sourceLayer,Fe=this.sourceCaches[ge];if(Fe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+ge+"' does not exist in the map's style.")));return}var $e=Fe.getSource().type;if($e==="vector"&&!Ce){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Fe.getFeatureState(Ce,J.id)},W.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(J){return J.serialize()}),layers:this._serializeLayers(this._order)},function(J){return J!==void 0})},W.prototype._updateLayer=function(J){this._updatedLayers[J.id]=!0,J.source&&!this._updatedSources[J.source]&&this.sourceCaches[J.source].getSource().type!=="raster"&&(this._updatedSources[J.source]="reload",this.sourceCaches[J.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(J){for(var ge=this,Ce=function(ti){return ge._layers[ti].type==="fill-extrusion"},Fe={},$e=[],ht=this._order.length-1;ht>=0;ht--){var Dt=this._order[ht];if(Ce(Dt)){Fe[Dt]=ht;for(var er=0,pr=J;er<pr.length;er+=1){var yr=pr[er],Rr=yr[Dt];if(Rr)for(var Zr=0,Jr=Rr;Zr<Jr.length;Zr+=1){var Xr=Jr[Zr];$e.push(Xr)}}}}$e.sort(function(ti,pi){return pi.intersectionZ-ti.intersectionZ});for(var rn=[],xn=this._order.length-1;xn>=0;xn--){var Fn=this._order[xn];if(Ce(Fn))for(var Gn=$e.length-1;Gn>=0;Gn--){var oa=$e[Gn].feature;if(Fe[oa.layer.id]<xn)break;rn.push(oa),$e.pop()}else for(var ca=0,la=J;ca<la.length;ca+=1){var wa=la[ca],La=wa[Fn];if(La)for(var Ca=0,Fa=La;Ca<Fa.length;Ca+=1){var Ba=Fa[Ca];rn.push(Ba.feature)}}}return rn},W.prototype.queryRenderedFeatures=function(J,ge,Ce){ge&&ge.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",ge.filter,null,ge);var Fe={};if(ge&&ge.layers){if(!Array.isArray(ge.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var $e=0,ht=ge.layers;$e<ht.length;$e+=1){var Dt=ht[$e],er=this._layers[Dt];if(!er)return this.fire(new e.ErrorEvent(new Error("The layer '"+Dt+"' does not exist in the map's style and cannot be queried for features."))),[];Fe[er.source]=!0}}var pr=[];ge.availableImages=this._availableImages;for(var yr in this.sourceCaches)ge.layers&&!Fe[yr]||pr.push(oe(this.sourceCaches[yr],this._layers,this._serializedLayers,J,ge,Ce));return this.placement&&pr.push(se(this._layers,this._serializedLayers,this.sourceCaches,J,ge,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(pr)},W.prototype.querySourceFeatures=function(J,ge){ge&&ge.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",ge.filter,null,ge);var Ce=this.sourceCaches[J];return Ce?ae(Ce,ge):[]},W.prototype.addSourceType=function(J,ge,Ce){if(W.getSourceType(J))return Ce(new Error('A source type called "'+J+'" already exists.'));if(W.setSourceType(J,ge),!ge.workerSourceURL)return Ce(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:J,url:ge.workerSourceURL},Ce)},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(J,ge){ge===void 0&&(ge={}),this._checkLoaded();var Ce=this.light.getLight(),Fe=!1;for(var $e in J)if(!e.deepEqual(J[$e],Ce[$e])){Fe=!0;break}if(!!Fe){var ht={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(J,ge),this.light.updateTransitions(ht)}},W.prototype._validate=function(J,ge,Ce,Fe,$e){return $e===void 0&&($e={}),$e&&$e.validate===!1?!1:ga(this,J.call(e.validateStyle,e.extend({key:ge,style:this.serialize(),value:Ce,styleSpec:e.styleSpec},Fe)))},W.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var J in this._layers){var ge=this._layers[J];ge.setEventedParent(null)}for(var Ce in this.sourceCaches)this.sourceCaches[Ce].clearTiles(),this.sourceCaches[Ce].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(J){this.sourceCaches[J].clearTiles()},W.prototype._reloadSource=function(J){this.sourceCaches[J].resume(),this.sourceCaches[J].reload()},W.prototype._updateSources=function(J){for(var ge in this.sourceCaches)this.sourceCaches[ge].update(J)},W.prototype._generateCollisionBoxes=function(){for(var J in this.sourceCaches)this._reloadSource(J)},W.prototype._updatePlacement=function(J,ge,Ce,Fe,$e){$e===void 0&&($e=!1);for(var ht=!1,Dt=!1,er={},pr=0,yr=this._order;pr<yr.length;pr+=1){var Rr=yr[pr],Zr=this._layers[Rr];if(Zr.type==="symbol"){if(!er[Zr.source]){var Jr=this.sourceCaches[Zr.source];er[Zr.source]=Jr.getRenderableIds(!0).map(function(ca){return Jr.getTileByID(ca)}).sort(function(ca,la){return la.tileID.overscaledZ-ca.tileID.overscaledZ||(ca.tileID.isLessThan(la.tileID)?-1:1)})}var Xr=this.crossTileSymbolIndex.addLayer(Zr,er[Zr.source],J.center.lng);ht=ht||Xr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),$e=$e||this._layerOrderChanged||Ce===0,($e||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),J.zoom))&&(this.pauseablePlacement=new ua(J,this._order,$e,ge,Ce,Fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,er),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Dt=!0),ht&&this.pauseablePlacement.placement.setStale()),Dt||ht)for(var rn=0,xn=this._order;rn<xn.length;rn+=1){var Fn=xn[rn],Gn=this._layers[Fn];Gn.type==="symbol"&&this.placement.updateLayerOpacities(Gn,er[Gn.source])}var oa=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return oa},W.prototype._releaseSymbolFadeTiles=function(){for(var J in this.sourceCaches)this.sourceCaches[J].releaseSymbolFadeTiles()},W.prototype.getImages=function(J,ge,Ce){this.imageManager.getImages(ge.icons,Ce),this._updateTilesForChangedImages();var Fe=this.sourceCaches[ge.source];Fe&&Fe.setDependencies(ge.tileID.key,ge.type,ge.icons)},W.prototype.getGlyphs=function(J,ge,Ce){this.glyphManager.getGlyphs(ge.stacks,Ce)},W.prototype.getResource=function(J,ge,Ce){return e.makeRequest(ge,Ce)},W}(e.Evented);Qo.getSourceType=q,Qo.setSourceType=re,Qo.registerForPluginStateChange=e.registerForPluginStateChange;var Qs=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Vs=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Wl=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Ai=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hs="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Gs=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zi="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Io=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,kl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,ws="void main() {gl_FragColor=vec4(1.0);}",Fi="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",hl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,uo=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,zi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,go="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",ao="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",cs="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",qs="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",lu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",ts="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Mu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Ds=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,No=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,pc=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ko=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Rs=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Xl=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,ju=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Ys=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cl=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Is=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,uu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,vl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cu="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Eu=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jl="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Su=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,el=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Zl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,pl=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ts=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ll=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,fu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ku=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Cu=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Kl="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",tl=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Lu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,fs=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wo=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,rl=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,As=Bi(Vs,Wl),Fo=Bi(Ai,Hs),Pl=Bi(Gs,Zi),Ms=Bi(Io,kl),Fs=Bi(ws,Fi),mo=Bi(hl,uo),Dl=Bi(zi,go),Rl=Bi(ao,cs),nl=Bi(qs,lu),hs=Bi(ts,Mu),dl=Bi(Ds,No),ml=Bi(pc,ko),$l=Bi(Rs,Xl),Il=Bi(ju,Zu),al=Bi(Ys,Cl),Ku=Bi(Is,uu),vs=Bi(vl,cu),Ws=Bi(Eu,jl),vu=Bi(Su,el),yl=Bi(Zl,pl),Fl=Bi(Ts,Ll),il=Bi(fu,ku),zl=Bi(Cu,Kl),pu=Bi(tl,Lu),Pu=Bi(fs,Wo),dc=Bi(rl,hu);function Bi(ve,W){var de=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,J={};return ve=ve.replace(de,function(ge,Ce,Fe,$e,ht){return J[ht]=!0,Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
varying `+Fe+" "+$e+" "+ht+`;
#else
uniform `+Fe+" "+$e+" u_"+ht+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+$e+" "+ht+" = u_"+ht+`;
#endif
`}),W=W.replace(de,function(ge,Ce,Fe,$e,ht){var Dt=$e==="float"?"vec2":"vec4",er=ht.match(/color/)?"color":Dt;return J[ht]?Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
uniform lowp float u_`+ht+`_t;
attribute `+Fe+" "+Dt+" a_"+ht+`;
varying `+Fe+" "+$e+" "+ht+`;
#else
uniform `+Fe+" "+$e+" u_"+ht+`;
#endif
`:er==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+ht+" = a_"+ht+`;
#else
    `+Fe+" "+$e+" "+ht+" = u_"+ht+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+ht+" = unpack_mix_"+er+"(a_"+ht+", u_"+ht+`_t);
#else
    `+Fe+" "+$e+" "+ht+" = u_"+ht+`;
#endif
`:Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ht+`
uniform lowp float u_`+ht+`_t;
attribute `+Fe+" "+Dt+" a_"+ht+`;
#else
uniform `+Fe+" "+$e+" u_"+ht+`;
#endif
`:er==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+$e+" "+ht+" = a_"+ht+`;
#else
    `+Fe+" "+$e+" "+ht+" = u_"+ht+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ht+`
    `+Fe+" "+$e+" "+ht+" = unpack_mix_"+er+"(a_"+ht+", u_"+ht+`_t);
#else
    `+Fe+" "+$e+" "+ht+" = u_"+ht+`;
#endif
`}),{fragmentSource:ve,vertexSource:W}}var xl=Object.freeze({__proto__:null,prelude:As,background:Fo,backgroundPattern:Pl,circle:Ms,clippingMask:Fs,heatmap:mo,heatmapTexture:Dl,collisionBox:Rl,collisionCircle:nl,debug:hs,fill:dl,fillOutline:ml,fillOutlinePattern:$l,fillPattern:Il,fillExtrusion:al,fillExtrusionPattern:Ku,hillshadePrepare:vs,hillshade:Ws,line:vu,lineGradient:yl,linePattern:Fl,lineSDF:il,raster:zl,symbolIcon:pu,symbolSDF:Pu,symbolTextAndIcon:dc}),ol=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ol.prototype.bind=function(W,de,J,ge,Ce,Fe,$e,ht){this.context=W;for(var Dt=this.boundPaintVertexBuffers.length!==ge.length,er=0;!Dt&&er<ge.length;er++)this.boundPaintVertexBuffers[er]!==ge[er]&&(Dt=!0);var pr=!this.vao||this.boundProgram!==de||this.boundLayoutVertexBuffer!==J||Dt||this.boundIndexBuffer!==Ce||this.boundVertexOffset!==Fe||this.boundDynamicVertexBuffer!==$e||this.boundDynamicVertexBuffer2!==ht;!W.extVertexArrayObject||pr?this.freshBind(de,J,ge,Ce,Fe,$e,ht):(W.bindVertexArrayOES.set(this.vao),$e&&$e.bind(),Ce&&Ce.dynamicDraw&&Ce.bind(),ht&&ht.bind())},ol.prototype.freshBind=function(W,de,J,ge,Ce,Fe,$e){var ht,Dt=W.numAttributes,er=this.context,pr=er.gl;if(er.extVertexArrayObject)this.vao&&this.destroy(),this.vao=er.extVertexArrayObject.createVertexArrayOES(),er.bindVertexArrayOES.set(this.vao),ht=0,this.boundProgram=W,this.boundLayoutVertexBuffer=de,this.boundPaintVertexBuffers=J,this.boundIndexBuffer=ge,this.boundVertexOffset=Ce,this.boundDynamicVertexBuffer=Fe,this.boundDynamicVertexBuffer2=$e;else{ht=er.currentNumAttributes||0;for(var yr=Dt;yr<ht;yr++)pr.disableVertexAttribArray(yr)}de.enableAttributes(pr,W);for(var Rr=0,Zr=J;Rr<Zr.length;Rr+=1){var Jr=Zr[Rr];Jr.enableAttributes(pr,W)}Fe&&Fe.enableAttributes(pr,W),$e&&$e.enableAttributes(pr,W),de.bind(),de.setVertexAttribPointers(pr,W,Ce);for(var Xr=0,rn=J;Xr<rn.length;Xr+=1){var xn=rn[Xr];xn.bind(),xn.setVertexAttribPointers(pr,W,Ce)}Fe&&(Fe.bind(),Fe.setVertexAttribPointers(pr,W,Ce)),ge&&ge.bind(),$e&&($e.bind(),$e.setVertexAttribPointers(pr,W,Ce)),er.currentNumAttributes=Dt},ol.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var rs=function(W,de,J,ge,Ce){var Fe=W.gl;this.program=Fe.createProgram();var $e=J?J.defines():[];Ce&&$e.push("#define OVERDRAW_INSPECTOR;");var ht=$e.concat(As.fragmentSource,de.fragmentSource).join(`
`),Dt=$e.concat(As.vertexSource,de.vertexSource).join(`
`),er=Fe.createShader(Fe.FRAGMENT_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(er,ht),Fe.compileShader(er),Fe.attachShader(this.program,er);var pr=Fe.createShader(Fe.VERTEX_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(pr,Dt),Fe.compileShader(pr),Fe.attachShader(this.program,pr);for(var yr=J?J.layoutAttributes:[],Rr=0;Rr<yr.length;Rr++)Fe.bindAttribLocation(this.program,Rr,yr[Rr].name);Fe.linkProgram(this.program),Fe.deleteShader(pr),Fe.deleteShader(er),this.numAttributes=Fe.getProgramParameter(this.program,Fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Zr={},Jr=0;Jr<this.numAttributes;Jr++){var Xr=Fe.getActiveAttrib(this.program,Jr);Xr&&(this.attributes[Xr.name]=Fe.getAttribLocation(this.program,Xr.name))}for(var rn=Fe.getProgramParameter(this.program,Fe.ACTIVE_UNIFORMS),xn=0;xn<rn;xn++){var Fn=Fe.getActiveUniform(this.program,xn);Fn&&(Zr[Fn.name]=Fe.getUniformLocation(this.program,Fn.name))}this.fixedUniforms=ge(W,Zr),this.binderUniforms=J?J.getUniforms(W,Zr):[]};rs.prototype.draw=function(W,de,J,ge,Ce,Fe,$e,ht,Dt,er,pr,yr,Rr,Zr,Jr,Xr){var rn,xn=W.gl;if(!this.failedToCreate){W.program.set(this.program),W.setDepthMode(J),W.setStencilMode(ge),W.setColorMode(Ce),W.setCullFace(Fe);for(var Fn in this.fixedUniforms)this.fixedUniforms[Fn].set($e[Fn]);Zr&&Zr.setUniforms(W,this.binderUniforms,yr,{zoom:Rr});for(var Gn=(rn={},rn[xn.LINES]=2,rn[xn.TRIANGLES]=3,rn[xn.LINE_STRIP]=1,rn)[de],oa=0,ca=pr.get();oa<ca.length;oa+=1){var la=ca[oa],wa=la.vaos||(la.vaos={}),La=wa[ht]||(wa[ht]=new ol);La.bind(W,this,Dt,Zr?Zr.getPaintVertexBuffers():[],er,la.vertexOffset,Jr,Xr),xn.drawElements(de,la.primitiveLength*Gn,xn.UNSIGNED_SHORT,la.primitiveOffset*Gn*2)}}};function ps(ve,W,de){var J=1/Ln(de,1,W.transform.tileZoom),ge=Math.pow(2,de.tileID.overscaledZ),Ce=de.tileSize*Math.pow(2,W.transform.tileZoom)/ge,Fe=Ce*(de.tileID.canonical.x+de.tileID.wrap*ge),$e=Ce*de.tileID.canonical.y;return{u_image:0,u_texsize:de.imageAtlasTexture.size,u_scale:[J,ve.fromScale,ve.toScale],u_fade:ve.t,u_pixel_coord_upper:[Fe>>16,$e>>16],u_pixel_coord_lower:[Fe&65535,$e&65535]}}function Ol(ve,W,de,J){var ge=de.imageManager.getPattern(ve.from.toString()),Ce=de.imageManager.getPattern(ve.to.toString()),Fe=de.imageManager.getPixelSize(),$e=Fe.width,ht=Fe.height,Dt=Math.pow(2,J.tileID.overscaledZ),er=J.tileSize*Math.pow(2,de.transform.tileZoom)/Dt,pr=er*(J.tileID.canonical.x+J.tileID.wrap*Dt),yr=er*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:Ce.tl,u_pattern_br_b:Ce.br,u_texsize:[$e,ht],u_mix:W.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:Ce.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/Ln(J,1,de.transform.tileZoom),u_pixel_coord_upper:[pr>>16,yr>>16],u_pixel_coord_lower:[pr&65535,yr&65535]}}var co=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_lightpos:new e.Uniform3f(ve,W.u_lightpos),u_lightintensity:new e.Uniform1f(ve,W.u_lightintensity),u_lightcolor:new e.Uniform3f(ve,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ve,W.u_vertical_gradient),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},Du=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_lightpos:new e.Uniform3f(ve,W.u_lightpos),u_lightintensity:new e.Uniform1f(ve,W.u_lightintensity),u_lightcolor:new e.Uniform3f(ve,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ve,W.u_vertical_gradient),u_height_factor:new e.Uniform1f(ve,W.u_height_factor),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},Xo=function(ve,W,de,J){var ge=W.style.light,Ce=ge.properties.get("position"),Fe=[Ce.x,Ce.y,Ce.z],$e=e.create$1();ge.properties.get("anchor")==="viewport"&&e.fromRotation($e,-W.transform.angle),e.transformMat3(Fe,Fe,$e);var ht=ge.properties.get("color");return{u_matrix:ve,u_lightpos:Fe,u_lightintensity:ge.properties.get("intensity"),u_lightcolor:[ht.r,ht.g,ht.b],u_vertical_gradient:+de,u_opacity:J}},Xs=function(ve,W,de,J,ge,Ce,Fe){return e.extend(Xo(ve,W,de,J),ps(Ce,W,Fe),{u_height_factor:-Math.pow(2,ge.overscaledZ)/Fe.tileSize/8})},zs=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},Es=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},Ho=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world)}},Ki=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world),u_image:new e.Uniform1i(ve,W.u_image),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},Bo=function(ve){return{u_matrix:ve}},ds=function(ve,W,de,J){return e.extend(Bo(ve),ps(de,W,J))},Ru=function(ve,W){return{u_matrix:ve,u_world:W}},Jl=function(ve,W,de,J,ge){return e.extend(ds(ve,W,de,J),{u_world:ge})},Iu=function(ve,W){return{u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(ve,W.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(ve,W.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},bt=function(ve,W,de,J){var ge=ve.transform,Ce,Fe;if(J.paint.get("circle-pitch-alignment")==="map"){var $e=Ln(de,1,ge.zoom);Ce=!0,Fe=[$e,$e]}else Ce=!1,Fe=ge.pixelsToGLUnits;return{u_camera_to_center_distance:ge.cameraToCenterDistance,u_scale_with_map:+(J.paint.get("circle-pitch-scale")==="map"),u_matrix:ve.translatePosMatrix(W.posMatrix,de,J.paint.get("circle-translate"),J.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ce,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Fe}},Bt=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(ve,W.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(ve,W.u_extrude_scale),u_overscale_factor:new e.Uniform1f(ve,W.u_overscale_factor)}},dr=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_inv_matrix:new e.UniformMatrix4f(ve,W.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(ve,W.u_viewport_size)}},cr=function(ve,W,de){var J=Ln(de,1,W.zoom),ge=Math.pow(2,W.zoom-de.tileID.overscaledZ),Ce=de.tileID.overscaleFactor();return{u_matrix:ve,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:J,u_extrude_scale:[W.pixelsToGLUnits[0]/(J*ge),W.pixelsToGLUnits[1]/(J*ge)],u_overscale_factor:Ce}},Or=function(ve,W,de){return{u_matrix:ve,u_inv_matrix:W,u_camera_to_center_distance:de.cameraToCenterDistance,u_viewport_size:[de.width,de.height]}},ln=function(ve,W){return{u_color:new e.UniformColor(ve,W.u_color),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_overlay:new e.Uniform1i(ve,W.u_overlay),u_overlay_scale:new e.Uniform1f(ve,W.u_overlay_scale)}},_n=function(ve,W,de){return de===void 0&&(de=1),{u_matrix:ve,u_color:W,u_overlay:0,u_overlay_scale:de}},Pn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},zn=function(ve){return{u_matrix:ve}},Xn=function(ve,W){return{u_extrude_scale:new e.Uniform1f(ve,W.u_extrude_scale),u_intensity:new e.Uniform1f(ve,W.u_intensity),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix)}},wn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_world:new e.Uniform2f(ve,W.u_world),u_image:new e.Uniform1i(ve,W.u_image),u_color_ramp:new e.Uniform1i(ve,W.u_color_ramp),u_opacity:new e.Uniform1f(ve,W.u_opacity)}},Un=function(ve,W,de,J){return{u_matrix:ve,u_extrude_scale:Ln(W,1,de),u_intensity:J}},On=function(ve,W,de,J){var ge=e.create();e.ortho(ge,0,ve.width,ve.height,0,0,1);var Ce=ve.context.gl;return{u_matrix:ge,u_world:[Ce.drawingBufferWidth,Ce.drawingBufferHeight],u_image:de,u_color_ramp:J,u_opacity:W.paint.get("heatmap-opacity")}},jn=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_latrange:new e.Uniform2f(ve,W.u_latrange),u_light:new e.Uniform2f(ve,W.u_light),u_shadow:new e.UniformColor(ve,W.u_shadow),u_highlight:new e.UniformColor(ve,W.u_highlight),u_accent:new e.UniformColor(ve,W.u_accent)}},ia=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_image:new e.Uniform1i(ve,W.u_image),u_dimension:new e.Uniform2f(ve,W.u_dimension),u_zoom:new e.Uniform1f(ve,W.u_zoom),u_maxzoom:new e.Uniform1f(ve,W.u_maxzoom),u_unpack:new e.Uniform4f(ve,W.u_unpack)}},Ga=function(ve,W,de){var J=de.paint.get("hillshade-shadow-color"),ge=de.paint.get("hillshade-highlight-color"),Ce=de.paint.get("hillshade-accent-color"),Fe=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=ve.transform.angle);var $e=!ve.options.moving;return{u_matrix:ve.transform.calculatePosMatrix(W.tileID.toUnwrapped(),$e),u_image:0,u_latrange:Ya(ve,W.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Fe],u_shadow:J,u_highlight:ge,u_accent:Ce}},za=function(ve,W,de){var J=W.stride,ge=e.create();return e.ortho(ge,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(ge,ge,[0,-e.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[J,J],u_zoom:ve.overscaledZ,u_maxzoom:de,u_unpack:W.getUnpackVector()}};function Ya(ve,W){var de=Math.pow(2,W.canonical.z),J=W.canonical.y;return[new e.MercatorCoordinate(0,J/de).toLngLat().lat,new e.MercatorCoordinate(0,(J+1)/de).toLngLat().lat]}var ja=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels)}},aa=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_image:new e.Uniform1i(ve,W.u_image)}},ba=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_image:new e.Uniform1i(ve,W.u_image),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_scale:new e.Uniform3f(ve,W.u_scale),u_fade:new e.Uniform1f(ve,W.u_fade)}},Qa=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_ratio:new e.Uniform1f(ve,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ve,W.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(ve,W.u_patternscale_a),u_patternscale_b:new e.Uniform2f(ve,W.u_patternscale_b),u_sdfgamma:new e.Uniform1f(ve,W.u_sdfgamma),u_image:new e.Uniform1i(ve,W.u_image),u_tex_y_a:new e.Uniform1f(ve,W.u_tex_y_a),u_tex_y_b:new e.Uniform1f(ve,W.u_tex_y_b),u_mix:new e.Uniform1f(ve,W.u_mix)}},si=function(ve,W,de){var J=ve.transform;return{u_matrix:hi(ve,W,de),u_ratio:1/Ln(W,1,J.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/J.pixelsToGLUnits[0],1/J.pixelsToGLUnits[1]]}},Mi=function(ve,W,de){return e.extend(si(ve,W,de),{u_image:0})},Ei=function(ve,W,de,J){var ge=ve.transform,Ce=Pi(W,ge);return{u_matrix:hi(ve,W,de),u_texsize:W.imageAtlasTexture.size,u_ratio:1/Ln(W,1,ge.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ce,J.fromScale,J.toScale],u_fade:J.t,u_units_to_pixels:[1/ge.pixelsToGLUnits[0],1/ge.pixelsToGLUnits[1]]}},wi=function(ve,W,de,J,ge){var Ce=ve.transform,Fe=ve.lineAtlas,$e=Pi(W,Ce),ht=de.layout.get("line-cap")==="round",Dt=Fe.getDash(J.from,ht),er=Fe.getDash(J.to,ht),pr=Dt.width*ge.fromScale,yr=er.width*ge.toScale;return e.extend(si(ve,W,de),{u_patternscale_a:[$e/pr,-Dt.height/2],u_patternscale_b:[$e/yr,-er.height/2],u_sdfgamma:Fe.width/(Math.min(pr,yr)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Dt.y,u_tex_y_b:er.y,u_mix:ge.t})};function Pi(ve,W){return 1/Ln(ve,1,W.tileZoom)}function hi(ve,W,de){return ve.translatePosMatrix(W.tileID.posMatrix,W,de.paint.get("line-translate"),de.paint.get("line-translate-anchor"))}var Co=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_tl_parent:new e.Uniform2f(ve,W.u_tl_parent),u_scale_parent:new e.Uniform1f(ve,W.u_scale_parent),u_buffer_scale:new e.Uniform1f(ve,W.u_buffer_scale),u_fade_t:new e.Uniform1f(ve,W.u_fade_t),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_image0:new e.Uniform1i(ve,W.u_image0),u_image1:new e.Uniform1i(ve,W.u_image1),u_brightness_low:new e.Uniform1f(ve,W.u_brightness_low),u_brightness_high:new e.Uniform1f(ve,W.u_brightness_high),u_saturation_factor:new e.Uniform1f(ve,W.u_saturation_factor),u_contrast_factor:new e.Uniform1f(ve,W.u_contrast_factor),u_spin_weights:new e.Uniform3f(ve,W.u_spin_weights)}},io=function(ve,W,de,J,ge){return{u_matrix:ve,u_tl_parent:W,u_scale_parent:de,u_buffer_scale:1,u_fade_t:J.mix,u_opacity:J.opacity*ge.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ge.paint.get("raster-brightness-min"),u_brightness_high:ge.paint.get("raster-brightness-max"),u_saturation_factor:ki(ge.paint.get("raster-saturation")),u_contrast_factor:Aa(ge.paint.get("raster-contrast")),u_spin_weights:li(ge.paint.get("raster-hue-rotate"))}};function li(ve){ve*=Math.PI/180;var W=Math.sin(ve),de=Math.cos(ve);return[(2*de+1)/3,(-Math.sqrt(3)*W-de+1)/3,(Math.sqrt(3)*W-de+1)/3]}function Aa(ve){return ve>0?1/(1-ve):1+ve}function ki(ve){return ve>0?1-1/(1.001-ve):-ve}var _o=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texture:new e.Uniform1i(ve,W.u_texture)}},Eo=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texture:new e.Uniform1i(ve,W.u_texture),u_gamma_scale:new e.Uniform1f(ve,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ve,W.u_is_halo)}},gs=function(ve,W){return{u_is_size_zoom_constant:new e.Uniform1i(ve,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ve,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ve,W.u_size_t),u_size:new e.Uniform1f(ve,W.u_size),u_camera_to_center_distance:new e.Uniform1f(ve,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ve,W.u_pitch),u_rotate_symbol:new e.Uniform1i(ve,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ve,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(ve,W.u_fade_change),u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ve,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ve,W.u_coord_matrix),u_is_text:new e.Uniform1i(ve,W.u_is_text),u_pitch_with_map:new e.Uniform1i(ve,W.u_pitch_with_map),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_texsize_icon:new e.Uniform2f(ve,W.u_texsize_icon),u_texture:new e.Uniform1i(ve,W.u_texture),u_texture_icon:new e.Uniform1i(ve,W.u_texture_icon),u_gamma_scale:new e.Uniform1f(ve,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ve,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ve,W.u_is_halo)}},Os=function(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt){var er=ge.transform;return{u_is_size_zoom_constant:+(ve==="constant"||ve==="source"),u_is_size_feature_constant:+(ve==="constant"||ve==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:er.cameraToCenterDistance,u_pitch:er.pitch/360*2*Math.PI,u_rotate_symbol:+de,u_aspect_ratio:er.width/er.height,u_fade_change:ge.options.fadeDuration?ge.symbolFadeChange:1,u_matrix:Ce,u_label_plane_matrix:Fe,u_coord_matrix:$e,u_is_text:+ht,u_pitch_with_map:+J,u_texsize:Dt,u_texture:0}},Lo=function(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt,er){var pr=ge.transform;return e.extend(Os(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt),{u_gamma_scale:J?Math.cos(pr._pitch)*pr.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+er})},sl=function(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt){return e.extend(Lo(ve,W,de,J,ge,Ce,Fe,$e,!0,ht,!0),{u_texsize_icon:Dt,u_texture_icon:1})},Ns=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_color:new e.UniformColor(ve,W.u_color)}},zo=function(ve,W){return{u_matrix:new e.UniformMatrix4f(ve,W.u_matrix),u_opacity:new e.Uniform1f(ve,W.u_opacity),u_image:new e.Uniform1i(ve,W.u_image),u_pattern_tl_a:new e.Uniform2f(ve,W.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(ve,W.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(ve,W.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(ve,W.u_pattern_br_b),u_texsize:new e.Uniform2f(ve,W.u_texsize),u_mix:new e.Uniform1f(ve,W.u_mix),u_pattern_size_a:new e.Uniform2f(ve,W.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(ve,W.u_pattern_size_b),u_scale_a:new e.Uniform1f(ve,W.u_scale_a),u_scale_b:new e.Uniform1f(ve,W.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(ve,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ve,W.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(ve,W.u_tile_units_to_pixels)}},Po=function(ve,W,de){return{u_matrix:ve,u_opacity:W,u_color:de}},Ql=function(ve,W,de,J,ge,Ce){return e.extend(Ol(J,Ce,de,ge),{u_matrix:ve,u_opacity:W})},du={fillExtrusion:co,fillExtrusionPattern:Du,fill:zs,fillPattern:Es,fillOutline:Ho,fillOutlinePattern:Ki,circle:Iu,collisionBox:Bt,collisionCircle:dr,debug:ln,clippingMask:Pn,heatmap:Xn,heatmapTexture:wn,hillshade:jn,hillshadePrepare:ia,line:ja,lineGradient:aa,linePattern:ba,lineSDF:Qa,raster:Co,symbolIcon:_o,symbolSDF:Eo,symbolTextAndIcon:gs,background:Ns,backgroundPattern:zo},ms;function Fu(ve,W,de,J,ge,Ce,Fe){for(var $e=ve.context,ht=$e.gl,Dt=ve.useProgram("collisionBox"),er=[],pr=0,yr=0,Rr=0;Rr<J.length;Rr++){var Zr=J[Rr],Jr=W.getTile(Zr),Xr=Jr.getBucket(de);if(!!Xr){var rn=Zr.posMatrix;(ge[0]!==0||ge[1]!==0)&&(rn=ve.translatePosMatrix(Zr.posMatrix,Jr,ge,Ce));var xn=Fe?Xr.textCollisionBox:Xr.iconCollisionBox,Fn=Xr.collisionCircleArray;if(Fn.length>0){var Gn=e.create(),oa=rn;e.mul(Gn,Xr.placementInvProjMatrix,ve.transform.glCoordMatrix),e.mul(Gn,Gn,Xr.placementViewportMatrix),er.push({circleArray:Fn,circleOffset:yr,transform:oa,invTransform:Gn}),pr+=Fn.length/4,yr=pr}!xn||Dt.draw($e,ht.LINES,qr.disabled,Jt.disabled,ve.colorModeForRenderPass(),Et.disabled,cr(rn,ve.transform,Jr),de.id,xn.layoutVertexBuffer,xn.indexBuffer,xn.segments,null,ve.transform.zoom,null,null,xn.collisionVertexBuffer)}}if(!(!Fe||!er.length)){var ca=ve.useProgram("collisionCircle"),la=new e.StructArrayLayout2f1f2i16;la.resize(pr*4),la._trim();for(var wa=0,La=0,Ca=er;La<Ca.length;La+=1)for(var Fa=Ca[La],Ba=0;Ba<Fa.circleArray.length/4;Ba++){var ti=Ba*4,pi=Fa.circleArray[ti+0],Yi=Fa.circleArray[ti+1],xi=Fa.circleArray[ti+2],Ci=Fa.circleArray[ti+3];la.emplace(wa++,pi,Yi,xi,Ci,0),la.emplace(wa++,pi,Yi,xi,Ci,1),la.emplace(wa++,pi,Yi,xi,Ci,2),la.emplace(wa++,pi,Yi,xi,Ci,3)}(!ms||ms.length<pr*2)&&(ms=ql(pr));for(var $a=$e.createIndexBuffer(ms,!0),Wi=$e.createVertexBuffer(la,e.collisionCircleLayout.members,!0),Qi=0,to=er;Qi<to.length;Qi+=1){var Ii=to[Qi],vo=Or(Ii.transform,Ii.invTransform,ve.transform);ca.draw($e,ht.TRIANGLES,qr.disabled,Jt.disabled,ve.colorModeForRenderPass(),Et.disabled,vo,de.id,Wi,$a,e.SegmentVector.simpleSegment(0,Ii.circleOffset*2,Ii.circleArray.length,Ii.circleArray.length/2),null,ve.transform.zoom,null,null,null)}Wi.destroy(),$a.destroy()}}function ql(ve){var W=ve*2,de=new e.StructArrayLayout3ui6;de.resize(W),de._trim();for(var J=0;J<W;J++){var ge=J*6;de.uint16[ge+0]=J*4+0,de.uint16[ge+1]=J*4+1,de.uint16[ge+2]=J*4+2,de.uint16[ge+3]=J*4+2,de.uint16[ge+4]=J*4+3,de.uint16[ge+5]=J*4+0}return de}var Hc=e.identity(new Float32Array(16));function $u(ve,W,de,J,ge){if(ve.renderPass==="translucent"){var Ce=Jt.disabled,Fe=ve.colorModeForRenderPass(),$e=de.layout.get("text-variable-anchor");$e&&Ju(J,ve,de,W,de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),ge),de.paint.get("icon-opacity").constantOr(1)!==0&&zu(ve,W,de,J,!1,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),de.layout.get("icon-rotation-alignment"),de.layout.get("icon-pitch-alignment"),de.layout.get("icon-keep-upright"),Ce,Fe),de.paint.get("text-opacity").constantOr(1)!==0&&zu(ve,W,de,J,!0,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),de.layout.get("text-keep-upright"),Ce,Fe),W.map.showCollisionBoxes&&(Fu(ve,W,de,J,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),!0),Fu(ve,W,de,J,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),!1))}}function gu(ve,W,de,J,ge,Ce){var Fe=e.getAnchorAlignment(ve),$e=Fe.horizontalAlign,ht=Fe.verticalAlign,Dt=-($e-.5)*W,er=-(ht-.5)*de,pr=e.evaluateVariableOffset(ve,J);return new e.Point((Dt/ge+pr[0])*Ce,(er/ge+pr[1])*Ce)}function Ju(ve,W,de,J,ge,Ce,Fe){for(var $e=W.transform,ht=ge==="map",Dt=Ce==="map",er=0,pr=ve;er<pr.length;er+=1){var yr=pr[er],Rr=J.getTile(yr),Zr=Rr.getBucket(de);if(!(!Zr||!Zr.text||!Zr.text.segments.get().length)){var Jr=Zr.textSizeData,Xr=e.evaluateSizeForZoom(Jr,$e.zoom),rn=Ln(Rr,1,W.transform.zoom),xn=jr(yr.posMatrix,Dt,ht,W.transform,rn),Fn=de.layout.get("icon-text-fit")!=="none"&&Zr.hasIconData();if(Xr){var Gn=Math.pow(2,$e.zoom-Rr.tileID.overscaledZ);Ss(Zr,ht,Dt,Fe,e.symbolSize,$e,xn,yr.posMatrix,Gn,Xr,Fn)}}}}function Ss(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt,er){var pr=ve.text.placedSymbolArray,yr=ve.text.dynamicLayoutVertexArray,Rr=ve.icon.dynamicLayoutVertexArray,Zr={};yr.clear();for(var Jr=0;Jr<pr.length;Jr++){var Xr=pr.get(Jr),rn=ve.allowVerticalPlacement&&!Xr.placedOrientation,xn=!Xr.hidden&&Xr.crossTileID&&!rn?J[Xr.crossTileID]:null;if(!xn)ei(Xr.numGlyphs,yr);else{var Fn=new e.Point(Xr.anchorX,Xr.anchorY),Gn=mn(Fn,de?$e:Fe),oa=Wn(Ce.cameraToCenterDistance,Gn.signedDistanceFromCamera),ca=ge.evaluateSizeForFeature(ve.textSizeData,Dt,Xr)*oa/e.ONE_EM;de&&(ca*=ve.tilePixelRatio/ht);for(var la=xn.width,wa=xn.height,La=xn.anchor,Ca=xn.textOffset,Fa=xn.textBoxScale,Ba=gu(La,la,wa,Ca,Fa,ca),ti=de?mn(Fn.add(Ba),Fe).point:Gn.point.add(W?Ba.rotate(-Ce.angle):Ba),pi=ve.allowVerticalPlacement&&Xr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Yi=0;Yi<Xr.numGlyphs;Yi++)e.addDynamicAttributes(yr,ti,pi);er&&Xr.associatedIconIndex>=0&&(Zr[Xr.associatedIconIndex]={shiftedAnchor:ti,angle:pi})}}if(er){Rr.clear();for(var xi=ve.icon.placedSymbolArray,Ci=0;Ci<xi.length;Ci++){var $a=xi.get(Ci);if($a.hidden)ei($a.numGlyphs,Rr);else{var Wi=Zr[Ci];if(!Wi)ei($a.numGlyphs,Rr);else for(var Qi=0;Qi<$a.numGlyphs;Qi++)e.addDynamicAttributes(Rr,Wi.shiftedAnchor,Wi.angle)}}ve.icon.dynamicLayoutVertexBuffer.updateData(Rr)}ve.text.dynamicLayoutVertexBuffer.updateData(yr)}function bl(ve,W,de){return de.iconsInText&&W?"symbolTextAndIcon":ve?"symbolSDF":"symbolIcon"}function zu(ve,W,de,J,ge,Ce,Fe,$e,ht,Dt,er,pr){for(var yr=ve.context,Rr=yr.gl,Zr=ve.transform,Jr=$e==="map",Xr=ht==="map",rn=Jr&&de.layout.get("symbol-placement")!=="point",xn=Jr&&!Xr&&!rn,Fn=de.layout.get("symbol-sort-key").constantOr(1)!==void 0,Gn=ve.depthModeForSublayer(0,qr.ReadOnly),oa=de.layout.get("text-variable-anchor"),ca=[],la=0,wa=J;la<wa.length;la+=1){var La=wa[la],Ca=W.getTile(La),Fa=Ca.getBucket(de);if(!!Fa){var Ba=ge?Fa.text:Fa.icon;if(!(!Ba||!Ba.segments.get().length)){var ti=Ba.programConfigurations.get(de.id),pi=ge||Fa.sdfIcons,Yi=ge?Fa.textSizeData:Fa.iconSizeData,xi=Xr||Zr.pitch!==0,Ci=ve.useProgram(bl(pi,ge,Fa),ti),$a=e.evaluateSizeForZoom(Yi,Zr.zoom),Wi=void 0,Qi=[0,0],to=void 0,Ii=void 0,vo=null,gi=void 0;if(ge){if(to=Ca.glyphAtlasTexture,Ii=Rr.LINEAR,Wi=Ca.glyphAtlasTexture.size,Fa.iconsInText){Qi=Ca.imageAtlasTexture.size,vo=Ca.imageAtlasTexture;var Oi=Yi.kind==="composite"||Yi.kind==="camera";gi=xi||ve.options.rotating||ve.options.zooming||Oi?Rr.LINEAR:Rr.NEAREST}}else{var Go=de.layout.get("icon-size").constantOr(0)!==1||Fa.iconsNeedLinear;to=Ca.imageAtlasTexture,Ii=pi||ve.options.rotating||ve.options.zooming||Go||xi?Rr.LINEAR:Rr.NEAREST,Wi=Ca.imageAtlasTexture.size}var is=Ln(Ca,1,ve.transform.zoom),xu=jr(La.posMatrix,Xr,Jr,ve.transform,is),bu=kn(La.posMatrix,Xr,Jr,ve.transform,is),ec=oa&&Fa.hasTextData(),tc=de.layout.get("icon-text-fit")!=="none"&&ec&&Fa.hasIconData();rn&&Jn(Fa,La.posMatrix,ve,ge,xu,bu,Xr,Dt);var yc=ve.translatePosMatrix(La.posMatrix,Ca,Ce,Fe),rc=rn||ge&&oa||tc?Hc:xu,wl=ve.translatePosMatrix(bu,Ca,Ce,Fe,!0),Rc=pi&&de.paint.get(ge?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Zs=void 0;pi?Fa.iconsInText?Zs=sl(Yi.kind,$a,xn,Xr,ve,yc,rc,wl,Wi,Qi):Zs=Lo(Yi.kind,$a,xn,Xr,ve,yc,rc,wl,ge,Wi,!0):Zs=Os(Yi.kind,$a,xn,Xr,ve,yc,rc,wl,ge,Wi);var eu={program:Ci,buffers:Ba,uniformValues:Zs,atlasTexture:to,atlasTextureIcon:vo,atlasInterpolation:Ii,atlasInterpolationIcon:gi,isSDF:pi,hasHalo:Rc};if(Fn)for(var nc=Ba.segments.get(),Vu=0,ac=nc;Vu<ac.length;Vu+=1){var mh=ac[Vu];ca.push({segments:new e.SegmentVector([mh]),sortKey:mh.sortKey,state:eu})}else ca.push({segments:Ba.segments,sortKey:0,state:eu})}}}Fn&&ca.sort(function(yh,xh){return yh.sortKey-xh.sortKey});for(var Gc=0,Bs=ca;Gc<Bs.length;Gc+=1){var Uf=Bs[Gc],ll=Uf.state;if(yr.activeTexture.set(Rr.TEXTURE0),ll.atlasTexture.bind(ll.atlasInterpolation,Rr.CLAMP_TO_EDGE),ll.atlasTextureIcon&&(yr.activeTexture.set(Rr.TEXTURE1),ll.atlasTextureIcon&&ll.atlasTextureIcon.bind(ll.atlasInterpolationIcon,Rr.CLAMP_TO_EDGE)),ll.isSDF){var Vf=ll.uniformValues;ll.hasHalo&&(Vf.u_is_halo=1,mu(ll.buffers,Uf.segments,de,ve,ll.program,Gn,er,pr,Vf)),Vf.u_is_halo=0}mu(ll.buffers,Uf.segments,de,ve,ll.program,Gn,er,pr,ll.uniformValues)}}function mu(ve,W,de,J,ge,Ce,Fe,$e,ht){var Dt=J.context,er=Dt.gl;ge.draw(Dt,er.TRIANGLES,Ce,Fe,$e,Et.disabled,ht,de.id,ve.layoutVertexBuffer,ve.indexBuffer,W,de.paint,J.transform.zoom,ve.programConfigurations.get(de.id),ve.dynamicLayoutVertexBuffer,ve.opacityVertexBuffer)}function jo(ve,W,de,J){if(ve.renderPass==="translucent"){var ge=de.paint.get("circle-opacity"),Ce=de.paint.get("circle-stroke-width"),Fe=de.paint.get("circle-stroke-opacity"),$e=de.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ge.constantOr(1)===0&&(Ce.constantOr(1)===0||Fe.constantOr(1)===0))){for(var ht=ve.context,Dt=ht.gl,er=ve.depthModeForSublayer(0,qr.ReadOnly),pr=Jt.disabled,yr=ve.colorModeForRenderPass(),Rr=[],Zr=0;Zr<J.length;Zr++){var Jr=J[Zr],Xr=W.getTile(Jr),rn=Xr.getBucket(de);if(!!rn){var xn=rn.programConfigurations.get(de.id),Fn=ve.useProgram("circle",xn),Gn=rn.layoutVertexBuffer,oa=rn.indexBuffer,ca=bt(ve,Jr,Xr,de),la={programConfiguration:xn,program:Fn,layoutVertexBuffer:Gn,indexBuffer:oa,uniformValues:ca};if($e)for(var wa=rn.segments.get(),La=0,Ca=wa;La<Ca.length;La+=1){var Fa=Ca[La];Rr.push({segments:new e.SegmentVector([Fa]),sortKey:Fa.sortKey,state:la})}else Rr.push({segments:rn.segments,sortKey:0,state:la})}}$e&&Rr.sort(function(Ii,vo){return Ii.sortKey-vo.sortKey});for(var Ba=0,ti=Rr;Ba<ti.length;Ba+=1){var pi=ti[Ba],Yi=pi.state,xi=Yi.programConfiguration,Ci=Yi.program,$a=Yi.layoutVertexBuffer,Wi=Yi.indexBuffer,Qi=Yi.uniformValues,to=pi.segments;Ci.draw(ht,Dt.TRIANGLES,er,pr,yr,Et.disabled,Qi,de.id,$a,Wi,to,de.paint,ve.transform.zoom,xi)}}}}function Qu(ve,W,de,J){if(de.paint.get("heatmap-opacity")!==0)if(ve.renderPass==="offscreen"){var ge=ve.context,Ce=ge.gl,Fe=Jt.disabled,$e=new Qe([Ce.ONE,Ce.ONE],e.Color.transparent,[!0,!0,!0,!0]);Sc(ge,ve,de),ge.clear({color:e.Color.transparent});for(var ht=0;ht<J.length;ht++){var Dt=J[ht];if(!W.hasRenderableParent(Dt)){var er=W.getTile(Dt),pr=er.getBucket(de);if(!!pr){var yr=pr.programConfigurations.get(de.id),Rr=ve.useProgram("heatmap",yr),Zr=ve.transform,Jr=Zr.zoom;Rr.draw(ge,Ce.TRIANGLES,qr.disabled,Fe,$e,Et.disabled,Un(Dt.posMatrix,er,Jr,de.paint.get("heatmap-intensity")),de.id,pr.layoutVertexBuffer,pr.indexBuffer,pr.segments,de.paint,ve.transform.zoom,yr)}}}ge.viewport.set([0,0,ve.width,ve.height])}else ve.renderPass==="translucent"&&(ve.context.setColorMode(ve.colorModeForRenderPass()),Ou(ve,de))}function Sc(ve,W,de){var J=ve.gl;ve.activeTexture.set(J.TEXTURE1),ve.viewport.set([0,0,W.width/4,W.height/4]);var ge=de.heatmapFbo;if(ge)J.bindTexture(J.TEXTURE_2D,ge.colorAttachment.get()),ve.bindFramebuffer.set(ge.framebuffer);else{var Ce=J.createTexture();J.bindTexture(J.TEXTURE_2D,Ce),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),ge=de.heatmapFbo=ve.createFramebuffer(W.width/4,W.height/4,!1),ns(ve,W,Ce,ge)}}function ns(ve,W,de,J){var ge=ve.gl,Ce=ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:ge.UNSIGNED_BYTE;ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,W.width/4,W.height/4,0,ge.RGBA,Ce,null),J.colorAttachment.set(de)}function Ou(ve,W){var de=ve.context,J=de.gl,ge=W.heatmapFbo;if(!!ge){de.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,ge.colorAttachment.get()),de.activeTexture.set(J.TEXTURE1);var Ce=W.colorRampTexture;Ce||(Ce=W.colorRampTexture=new e.Texture(de,W.colorRamp,J.RGBA)),Ce.bind(J.LINEAR,J.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(de,J.TRIANGLES,qr.disabled,Jt.disabled,ve.colorModeForRenderPass(),Et.disabled,On(ve,W,0,1),W.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,W.paint,ve.transform.zoom)}}function Nu(ve,W,de,J){if(ve.renderPass==="translucent"){var ge=de.paint.get("line-opacity"),Ce=de.paint.get("line-width");if(!(ge.constantOr(1)===0||Ce.constantOr(1)===0)){var Fe=ve.depthModeForSublayer(0,qr.ReadOnly),$e=ve.colorModeForRenderPass(),ht=de.paint.get("line-dasharray"),Dt=de.paint.get("line-pattern"),er=Dt.constantOr(1),pr=de.paint.get("line-gradient"),yr=de.getCrossfadeParameters(),Rr=er?"linePattern":ht?"lineSDF":pr?"lineGradient":"line",Zr=ve.context,Jr=Zr.gl,Xr=!0;if(pr){Zr.activeTexture.set(Jr.TEXTURE0);var rn=de.gradientTexture;if(!de.gradient)return;rn||(rn=de.gradientTexture=new e.Texture(Zr,de.gradient,Jr.RGBA)),rn.bind(Jr.LINEAR,Jr.CLAMP_TO_EDGE)}for(var xn=0,Fn=J;xn<Fn.length;xn+=1){var Gn=Fn[xn],oa=W.getTile(Gn);if(!(er&&!oa.patternsLoaded())){var ca=oa.getBucket(de);if(!!ca){var la=ca.programConfigurations.get(de.id),wa=ve.context.program.get(),La=ve.useProgram(Rr,la),Ca=Xr||La.program!==wa,Fa=Dt.constantOr(null);if(Fa&&oa.imageAtlas){var Ba=oa.imageAtlas,ti=Ba.patternPositions[Fa.to.toString()],pi=Ba.patternPositions[Fa.from.toString()];ti&&pi&&la.setConstantPatternPositions(ti,pi)}var Yi=er?Ei(ve,oa,de,yr):ht?wi(ve,oa,de,ht,yr):pr?Mi(ve,oa,de):si(ve,oa,de);er?(Zr.activeTexture.set(Jr.TEXTURE0),oa.imageAtlasTexture.bind(Jr.LINEAR,Jr.CLAMP_TO_EDGE),la.updatePaintBuffers(yr)):ht&&(Ca||ve.lineAtlas.dirty)&&(Zr.activeTexture.set(Jr.TEXTURE0),ve.lineAtlas.bind(Zr)),La.draw(Zr,Jr.TRIANGLES,Fe,ve.stencilModeForClipping(Gn),$e,Et.disabled,Yi,de.id,ca.layoutVertexBuffer,ca.indexBuffer,ca.segments,de.paint,ve.transform.zoom,la),Xr=!1}}}}}}function qu(ve,W,de,J){var ge=de.paint.get("fill-color"),Ce=de.paint.get("fill-opacity");if(Ce.constantOr(1)!==0){var Fe=ve.colorModeForRenderPass(),$e=de.paint.get("fill-pattern"),ht=ve.opaquePassEnabledForLayer()&&!$e.constantOr(1)&&ge.constantOr(e.Color.transparent).a===1&&Ce.constantOr(0)===1?"opaque":"translucent";if(ve.renderPass===ht){var Dt=ve.depthModeForSublayer(1,ve.renderPass==="opaque"?qr.ReadWrite:qr.ReadOnly);Oe(ve,W,de,J,Dt,Fe,!1)}if(ve.renderPass==="translucent"&&de.paint.get("fill-antialias")){var er=ve.depthModeForSublayer(de.getPaintProperty("fill-outline-color")?2:0,qr.ReadOnly);Oe(ve,W,de,J,er,Fe,!0)}}}function Oe(ve,W,de,J,ge,Ce,Fe){var $e=ve.context.gl,ht=de.paint.get("fill-pattern"),Dt=ht&&ht.constantOr(1),er=de.getCrossfadeParameters(),pr,yr,Rr,Zr,Jr;Fe?(yr=Dt&&!de.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pr=$e.LINES):(yr=Dt?"fillPattern":"fill",pr=$e.TRIANGLES);for(var Xr=0,rn=J;Xr<rn.length;Xr+=1){var xn=rn[Xr],Fn=W.getTile(xn);if(!(Dt&&!Fn.patternsLoaded())){var Gn=Fn.getBucket(de);if(!!Gn){var oa=Gn.programConfigurations.get(de.id),ca=ve.useProgram(yr,oa);Dt&&(ve.context.activeTexture.set($e.TEXTURE0),Fn.imageAtlasTexture.bind($e.LINEAR,$e.CLAMP_TO_EDGE),oa.updatePaintBuffers(er));var la=ht.constantOr(null);if(la&&Fn.imageAtlas){var wa=Fn.imageAtlas,La=wa.patternPositions[la.to.toString()],Ca=wa.patternPositions[la.from.toString()];La&&Ca&&oa.setConstantPatternPositions(La,Ca)}var Fa=ve.translatePosMatrix(xn.posMatrix,Fn,de.paint.get("fill-translate"),de.paint.get("fill-translate-anchor"));if(!Fe)Zr=Gn.indexBuffer,Jr=Gn.segments,Rr=Dt?ds(Fa,ve,er,Fn):Bo(Fa);else{Zr=Gn.indexBuffer2,Jr=Gn.segments2;var Ba=[$e.drawingBufferWidth,$e.drawingBufferHeight];Rr=yr==="fillOutlinePattern"&&Dt?Jl(Fa,ve,er,Fn,Ba):Ru(Fa,Ba)}ca.draw(ve.context,pr,ge,ve.stencilModeForClipping(xn),Ce,Et.disabled,Rr,de.id,Gn.layoutVertexBuffer,Zr,Jr,de.paint,ve.transform.zoom,oa)}}}}function je(ve,W,de,J){var ge=de.paint.get("fill-extrusion-opacity");if(ge!==0&&ve.renderPass==="translucent"){var Ce=new qr(ve.context.gl.LEQUAL,qr.ReadWrite,ve.depthRangeFor3D);if(ge===1&&!de.paint.get("fill-extrusion-pattern").constantOr(1)){var Fe=ve.colorModeForRenderPass();nt(ve,W,de,J,Ce,Jt.disabled,Fe)}else nt(ve,W,de,J,Ce,Jt.disabled,Qe.disabled),nt(ve,W,de,J,Ce,ve.stencilModeFor3D(),ve.colorModeForRenderPass())}}function nt(ve,W,de,J,ge,Ce,Fe){for(var $e=ve.context,ht=$e.gl,Dt=de.paint.get("fill-extrusion-pattern"),er=Dt.constantOr(1),pr=de.getCrossfadeParameters(),yr=de.paint.get("fill-extrusion-opacity"),Rr=0,Zr=J;Rr<Zr.length;Rr+=1){var Jr=Zr[Rr],Xr=W.getTile(Jr),rn=Xr.getBucket(de);if(!!rn){var xn=rn.programConfigurations.get(de.id),Fn=ve.useProgram(er?"fillExtrusionPattern":"fillExtrusion",xn);er&&(ve.context.activeTexture.set(ht.TEXTURE0),Xr.imageAtlasTexture.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),xn.updatePaintBuffers(pr));var Gn=Dt.constantOr(null);if(Gn&&Xr.imageAtlas){var oa=Xr.imageAtlas,ca=oa.patternPositions[Gn.to.toString()],la=oa.patternPositions[Gn.from.toString()];ca&&la&&xn.setConstantPatternPositions(ca,la)}var wa=ve.translatePosMatrix(Jr.posMatrix,Xr,de.paint.get("fill-extrusion-translate"),de.paint.get("fill-extrusion-translate-anchor")),La=de.paint.get("fill-extrusion-vertical-gradient"),Ca=er?Xs(wa,ve,La,yr,Jr,pr,Xr):Xo(wa,ve,La,yr);Fn.draw($e,$e.gl.TRIANGLES,ge,Ce,Fe,Et.backCCW,Ca,de.id,rn.layoutVertexBuffer,rn.indexBuffer,rn.segments,de.paint,ve.transform.zoom,xn)}}}function ut(ve,W,de,J){if(!(ve.renderPass!=="offscreen"&&ve.renderPass!=="translucent")){for(var ge=ve.context,Ce=W.getSource().maxzoom,Fe=ve.depthModeForSublayer(0,qr.ReadOnly),$e=ve.colorModeForRenderPass(),ht=ve.renderPass==="translucent"?ve.stencilConfigForOverlap(J):[{},J],Dt=ht[0],er=ht[1],pr=0,yr=er;pr<yr.length;pr+=1){var Rr=yr[pr],Zr=W.getTile(Rr);Zr.needsHillshadePrepare&&ve.renderPass==="offscreen"?_t(ve,Zr,de,Ce,Fe,Jt.disabled,$e):ve.renderPass==="translucent"&&Tt(ve,Zr,de,Fe,Dt[Rr.overscaledZ],$e)}ge.viewport.set([0,0,ve.width,ve.height])}}function Tt(ve,W,de,J,ge,Ce){var Fe=ve.context,$e=Fe.gl,ht=W.fbo;if(!!ht){var Dt=ve.useProgram("hillshade");Fe.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_2D,ht.colorAttachment.get());var er=Ga(ve,W,de);Dt.draw(Fe,$e.TRIANGLES,J,ge,Ce,Et.disabled,er,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function _t(ve,W,de,J,ge,Ce,Fe){var $e=ve.context,ht=$e.gl,Dt=W.dem;if(Dt&&Dt.data){var er=Dt.dim,pr=Dt.stride,yr=Dt.getPixels();if($e.activeTexture.set(ht.TEXTURE1),$e.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||ve.getTileTexture(pr),W.demTexture){var Rr=W.demTexture;Rr.update(yr,{premultiply:!1}),Rr.bind(ht.NEAREST,ht.CLAMP_TO_EDGE)}else W.demTexture=new e.Texture($e,yr,ht.RGBA,{premultiply:!1}),W.demTexture.bind(ht.NEAREST,ht.CLAMP_TO_EDGE);$e.activeTexture.set(ht.TEXTURE0);var Zr=W.fbo;if(!Zr){var Jr=new e.Texture($e,{width:er,height:er,data:null},ht.RGBA);Jr.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),Zr=W.fbo=$e.createFramebuffer(er,er,!0),Zr.colorAttachment.set(Jr.texture)}$e.bindFramebuffer.set(Zr.framebuffer),$e.viewport.set([0,0,er,er]),ve.useProgram("hillshadePrepare").draw($e,ht.TRIANGLES,ge,Ce,Fe,Et.disabled,za(W.tileID,Dt,J),de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function kt(ve,W,de,J){if(ve.renderPass==="translucent"&&de.paint.get("raster-opacity")!==0&&!!J.length)for(var ge=ve.context,Ce=ge.gl,Fe=W.getSource(),$e=ve.useProgram("raster"),ht=ve.colorModeForRenderPass(),Dt=Fe instanceof ie?[{},J]:ve.stencilConfigForOverlap(J),er=Dt[0],pr=Dt[1],yr=pr[pr.length-1].overscaledZ,Rr=!ve.options.moving,Zr=0,Jr=pr;Zr<Jr.length;Zr+=1){var Xr=Jr[Zr],rn=ve.depthModeForSublayer(Xr.overscaledZ-yr,de.paint.get("raster-opacity")===1?qr.ReadWrite:qr.ReadOnly,Ce.LESS),xn=W.getTile(Xr),Fn=ve.transform.calculatePosMatrix(Xr.toUnwrapped(),Rr);xn.registerFadeDuration(de.paint.get("raster-fade-duration"));var Gn=W.findLoadedParent(Xr,0),oa=vr(xn,Gn,W,de,ve.transform),ca=void 0,la=void 0,wa=de.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR;ge.activeTexture.set(Ce.TEXTURE0),xn.texture.bind(wa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ge.activeTexture.set(Ce.TEXTURE1),Gn?(Gn.texture.bind(wa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ca=Math.pow(2,Gn.tileID.overscaledZ-xn.tileID.overscaledZ),la=[xn.tileID.canonical.x*ca%1,xn.tileID.canonical.y*ca%1]):xn.texture.bind(wa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);var La=io(Fn,la||[0,0],ca||1,oa,de);Fe instanceof ie?$e.draw(ge,Ce.TRIANGLES,rn,Jt.disabled,ht,Et.disabled,La,de.id,Fe.boundsBuffer,ve.quadTriangleIndexBuffer,Fe.boundsSegments):$e.draw(ge,Ce.TRIANGLES,rn,er[Xr.overscaledZ],ht,Et.disabled,La,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function vr(ve,W,de,J,ge){var Ce=J.paint.get("raster-fade-duration");if(Ce>0){var Fe=e.browser.now(),$e=(Fe-ve.timeAdded)/Ce,ht=W?(Fe-W.timeAdded)/Ce:-1,Dt=de.getSource(),er=ge.coveringZoomLevel({tileSize:Dt.tileSize,roundZoom:Dt.roundZoom}),pr=!W||Math.abs(W.tileID.overscaledZ-er)>Math.abs(ve.tileID.overscaledZ-er),yr=pr&&ve.refreshedUponExpiration?1:e.clamp(pr?$e:1-ht,0,1);return ve.refreshedUponExpiration&&$e>=1&&(ve.refreshedUponExpiration=!1),W?{opacity:1,mix:1-yr}:{opacity:yr,mix:0}}else return{opacity:1,mix:0}}function mr(ve,W,de){var J=de.paint.get("background-color"),ge=de.paint.get("background-opacity");if(ge!==0){var Ce=ve.context,Fe=Ce.gl,$e=ve.transform,ht=$e.tileSize,Dt=de.paint.get("background-pattern");if(!ve.isPatternMissing(Dt)){var er=!Dt&&J.a===1&&ge===1&&ve.opaquePassEnabledForLayer()?"opaque":"translucent";if(ve.renderPass===er){var pr=Jt.disabled,yr=ve.depthModeForSublayer(0,er==="opaque"?qr.ReadWrite:qr.ReadOnly),Rr=ve.colorModeForRenderPass(),Zr=ve.useProgram(Dt?"backgroundPattern":"background"),Jr=$e.coveringTiles({tileSize:ht});Dt&&(Ce.activeTexture.set(Fe.TEXTURE0),ve.imageManager.bind(ve.context));for(var Xr=de.getCrossfadeParameters(),rn=0,xn=Jr;rn<xn.length;rn+=1){var Fn=xn[rn],Gn=ve.transform.calculatePosMatrix(Fn.toUnwrapped()),oa=Dt?Ql(Gn,ge,ve,Dt,{tileID:Fn,tileSize:ht},Xr):Po(Gn,ge,J);Zr.draw(Ce,Fe.TRIANGLES,yr,pr,Rr,Et.disabled,oa,de.id,ve.tileExtentBuffer,ve.quadTriangleIndexBuffer,ve.tileExtentSegments)}}}}}var fr=new e.Color(1,0,0,1),Tr=new e.Color(0,1,0,1),zr=new e.Color(0,0,1,1),Qr=new e.Color(1,0,1,1),on=new e.Color(0,1,1,1);function En(ve){var W=ve.transform.padding,de=3;$n(ve,ve.transform.height-(W.top||0),de,fr),$n(ve,W.bottom||0,de,Tr),Ta(ve,W.left||0,de,zr),Ta(ve,ve.transform.width-(W.right||0),de,Qr);var J=ve.transform.centerPoint;Nn(ve,J.x,ve.transform.height-J.y,on)}function Nn(ve,W,de,J){var ge=20,Ce=2;Ea(ve,W-Ce/2,de-ge/2,Ce,ge,J),Ea(ve,W-ge/2,de-Ce/2,ge,Ce,J)}function $n(ve,W,de,J){Ea(ve,0,W+de/2,ve.transform.width,de,J)}function Ta(ve,W,de,J){Ea(ve,W-de/2,0,de,ve.transform.height,J)}function Ea(ve,W,de,J,ge,Ce){var Fe=ve.context,$e=Fe.gl;$e.enable($e.SCISSOR_TEST),$e.scissor(W*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio,J*e.browser.devicePixelRatio,ge*e.browser.devicePixelRatio),Fe.clear({color:Ce}),$e.disable($e.SCISSOR_TEST)}function ni(ve,W,de){for(var J=0;J<de.length;J++)qa(ve,W,de[J])}function qa(ve,W,de){var J=ve.context,ge=J.gl,Ce=de.posMatrix,Fe=ve.useProgram("debug"),$e=qr.disabled,ht=Jt.disabled,Dt=ve.colorModeForRenderPass(),er="$debug";J.activeTexture.set(ge.TEXTURE0),ve.emptyTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Fe.draw(J,ge.LINE_STRIP,$e,ht,Dt,Et.disabled,_n(Ce,e.Color.red),er,ve.debugBuffer,ve.tileBorderIndexBuffer,ve.debugSegments);var pr=W.getTileByID(de.key).latestRawTileData,yr=pr&&pr.byteLength||0,Rr=Math.floor(yr/1024),Zr=W.getTile(de).tileSize,Jr=512/Math.min(Zr,512)*(de.overscaledZ/ve.transform.zoom)*.5,Xr=de.canonical.toString();de.overscaledZ!==de.canonical.z&&(Xr+=" => "+de.overscaledZ);var rn=Xr+" "+Rr+"kb";ai(ve,rn),Fe.draw(J,ge.TRIANGLES,$e,ht,Qe.alphaBlended,Et.disabled,_n(Ce,e.Color.transparent,Jr),er,ve.debugBuffer,ve.quadTriangleIndexBuffer,ve.debugSegments)}function ai(ve,W){ve.initDebugOverlayCanvas();var de=ve.debugOverlayCanvas,J=ve.context.gl,ge=ve.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,de.width,de.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold "+36+"px Open Sans, sans-serif",ge.fillText(W,5,5),ge.strokeText(W,5,5),ve.debugOverlayTexture.update(de),ve.debugOverlayTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE)}function Ti(ve,W,de){var J=ve.context,ge=de.implementation;if(ve.renderPass==="offscreen"){var Ce=ge.prerender;Ce&&(ve.setCustomLayerDefaults(),J.setColorMode(ve.colorModeForRenderPass()),Ce.call(ge,J.gl,ve.transform.customLayerMatrix()),J.setDirty(),ve.setBaseState())}else if(ve.renderPass==="translucent"){ve.setCustomLayerDefaults(),J.setColorMode(ve.colorModeForRenderPass()),J.setStencilMode(Jt.disabled);var Fe=ge.renderingMode==="3d"?new qr(ve.context.gl.LEQUAL,qr.ReadWrite,ve.depthRangeFor3D):ve.depthModeForSublayer(0,qr.ReadOnly);J.setDepthMode(Fe),ge.render(J.gl,ve.transform.customLayerMatrix()),J.setDirty(),ve.setBaseState(),J.bindFramebuffer.set(null)}}var Yr={symbol:$u,circle:jo,heatmap:Qu,line:Nu,fill:qu,"fill-extrusion":je,hillshade:ut,raster:kt,background:mr,debug:ni,custom:Ti},et=function(W,de){this.context=new Vt(W),this.transform=de,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ka,this.gpuTimers={}};et.prototype.resize=function(W,de){if(this.width=W*e.browser.devicePixelRatio,this.height=de*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var J=0,ge=this.style._order;J<ge.length;J+=1){var Ce=ge[J];this.style._layers[Ce].resize()}},et.prototype.setup=function(){var W=this.context,de=new e.StructArrayLayout2i4;de.emplaceBack(0,0),de.emplaceBack(e.EXTENT,0),de.emplaceBack(0,e.EXTENT),de.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=W.createVertexBuffer(de,Qs.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var J=new e.StructArrayLayout2i4;J.emplaceBack(0,0),J.emplaceBack(e.EXTENT,0),J.emplaceBack(0,e.EXTENT),J.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=W.createVertexBuffer(J,Qs.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var ge=new e.StructArrayLayout4i8;ge.emplaceBack(0,0,0,0),ge.emplaceBack(e.EXTENT,0,e.EXTENT,0),ge.emplaceBack(0,e.EXTENT,0,e.EXTENT),ge.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=W.createVertexBuffer(ge,X.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ce=new e.StructArrayLayout2i4;Ce.emplaceBack(0,0),Ce.emplaceBack(1,0),Ce.emplaceBack(0,1),Ce.emplaceBack(1,1),this.viewportBuffer=W.createVertexBuffer(Ce,Qs.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Fe=new e.StructArrayLayout1ui2;Fe.emplaceBack(0),Fe.emplaceBack(1),Fe.emplaceBack(3),Fe.emplaceBack(2),Fe.emplaceBack(0),this.tileBorderIndexBuffer=W.createIndexBuffer(Fe);var $e=new e.StructArrayLayout3ui6;$e.emplaceBack(0,1,2),$e.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=W.createIndexBuffer($e),this.emptyTexture=new e.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},W.gl.RGBA);var ht=this.context.gl;this.stencilClearMode=new Jt({func:ht.ALWAYS,mask:0},0,255,ht.ZERO,ht.ZERO,ht.ZERO)},et.prototype.clearStencil=function(){var W=this.context,de=W.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var J=e.create();e.ortho(J,0,this.width,this.height,0,0,1),e.scale(J,J,[de.drawingBufferWidth,de.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(W,de.TRIANGLES,qr.disabled,this.stencilClearMode,Qe.disabled,Et.disabled,zn(J),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},et.prototype._renderTileClippingMasks=function(W,de){if(!(this.currentStencilSource===W.source||!W.isTileClipped()||!de||!de.length)){this.currentStencilSource=W.source;var J=this.context,ge=J.gl;this.nextStencilID+de.length>256&&this.clearStencil(),J.setColorMode(Qe.disabled),J.setDepthMode(qr.disabled);var Ce=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Fe=0,$e=de;Fe<$e.length;Fe+=1){var ht=$e[Fe],Dt=this._tileClippingMaskIDs[ht.key]=this.nextStencilID++;Ce.draw(J,ge.TRIANGLES,qr.disabled,new Jt({func:ge.ALWAYS,mask:0},Dt,255,ge.KEEP,ge.KEEP,ge.REPLACE),Qe.disabled,Et.disabled,zn(ht.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},et.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var W=this.nextStencilID++,de=this.context.gl;return new Jt({func:de.NOTEQUAL,mask:255},W,255,de.KEEP,de.KEEP,de.REPLACE)},et.prototype.stencilModeForClipping=function(W){var de=this.context.gl;return new Jt({func:de.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,de.KEEP,de.KEEP,de.REPLACE)},et.prototype.stencilConfigForOverlap=function(W){var de,J=this.context.gl,ge=W.sort(function(Dt,er){return er.overscaledZ-Dt.overscaledZ}),Ce=ge[ge.length-1].overscaledZ,Fe=ge[0].overscaledZ-Ce+1;if(Fe>1){this.currentStencilSource=void 0,this.nextStencilID+Fe>256&&this.clearStencil();for(var $e={},ht=0;ht<Fe;ht++)$e[ht+Ce]=new Jt({func:J.GEQUAL,mask:255},ht+this.nextStencilID,255,J.KEEP,J.KEEP,J.REPLACE);return this.nextStencilID+=Fe,[$e,ge]}return[(de={},de[Ce]=Jt.disabled,de),ge]},et.prototype.colorModeForRenderPass=function(){var W=this.context.gl;if(this._showOverdrawInspector){var de=8,J=1/de;return new Qe([W.CONSTANT_COLOR,W.ONE],new e.Color(J,J,J,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Qe.unblended:Qe.alphaBlended},et.prototype.depthModeForSublayer=function(W,de,J){if(!this.opaquePassEnabledForLayer())return qr.disabled;var ge=1-((1+this.currentLayer)*this.numSublayers+W)*this.depthEpsilon;return new qr(J||this.context.gl.LEQUAL,de,[ge,ge])},et.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},et.prototype.render=function(W,de){var J=this;this.style=W,this.options=de,this.lineAtlas=W.lineAtlas,this.imageManager=W.imageManager,this.glyphManager=W.glyphManager,this.symbolFadeChange=W.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var ge=this.style._order,Ce=this.style.sourceCaches;for(var Fe in Ce){var $e=Ce[Fe];$e.used&&$e.prepare(this.context)}var ht={},Dt={},er={};for(var pr in Ce){var yr=Ce[pr];ht[pr]=yr.getVisibleCoordinates(),Dt[pr]=ht[pr].slice().reverse(),er[pr]=yr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Rr=0;Rr<ge.length;Rr++){var Zr=ge[Rr];if(this.style._layers[Zr].is3D()){this.opaquePassCutoff=Rr;break}}this.renderPass="offscreen";for(var Jr=0,Xr=ge;Jr<Xr.length;Jr+=1){var rn=Xr[Jr],xn=this.style._layers[rn];if(!(!xn.hasOffscreenPass()||xn.isHidden(this.transform.zoom))){var Fn=Dt[xn.source];xn.type!=="custom"&&!Fn.length||this.renderLayer(this,Ce[xn.source],xn,Fn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:de.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=de.showOverdrawInspector,this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ge.length-1;this.currentLayer>=0;this.currentLayer--){var Gn=this.style._layers[ge[this.currentLayer]],oa=Ce[Gn.source],ca=ht[Gn.source];this._renderTileClippingMasks(Gn,ca),this.renderLayer(this,oa,Gn,ca)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ge.length;this.currentLayer++){var la=this.style._layers[ge[this.currentLayer]],wa=Ce[la.source],La=(la.type==="symbol"?er:Dt)[la.source];this._renderTileClippingMasks(la,ht[la.source]),this.renderLayer(this,wa,la,La)}if(this.options.showTileBoundaries){var Ca,Fa,Ba=e.values(this.style._layers);Ba.forEach(function(ti){ti.source&&!ti.isHidden(J.transform.zoom)&&(ti.source!==(Fa&&Fa.id)&&(Fa=J.style.sourceCaches[ti.source]),(!Ca||Ca.getSource().maxzoom<Fa.getSource().maxzoom)&&(Ca=Fa))}),Ca&&Yr.debug(this,Ca,Ca.getVisibleCoordinates())}this.options.showPadding&&En(this),this.context.setDefault()},et.prototype.renderLayer=function(W,de,J,ge){J.isHidden(this.transform.zoom)||J.type!=="background"&&J.type!=="custom"&&!ge.length||(this.id=J.id,this.gpuTimingStart(J),Yr[J.type](W,de,J,ge,this.style.placement.variableOffsets),this.gpuTimingEnd())},et.prototype.gpuTimingStart=function(W){if(!!this.options.gpuTiming){var de=this.context.extTimerQuery,J=this.gpuTimers[W.id];J||(J=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:de.createQueryEXT()}),J.calls++,de.beginQueryEXT(de.TIME_ELAPSED_EXT,J.query)}},et.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}},et.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W},et.prototype.queryGpuTimers=function(W){var de={};for(var J in W){var ge=W[J],Ce=this.context.extTimerQuery,Fe=Ce.getQueryObjectEXT(ge.query,Ce.QUERY_RESULT_EXT)/(1e3*1e3);Ce.deleteQueryEXT(ge.query),de[J]=Fe}return de},et.prototype.translatePosMatrix=function(W,de,J,ge,Ce){if(!J[0]&&!J[1])return W;var Fe=Ce?ge==="map"?this.transform.angle:0:ge==="viewport"?-this.transform.angle:0;if(Fe){var $e=Math.sin(Fe),ht=Math.cos(Fe);J=[J[0]*ht-J[1]*$e,J[0]*$e+J[1]*ht]}var Dt=[Ce?J[0]:Ln(de,J[0],this.transform.zoom),Ce?J[1]:Ln(de,J[1],this.transform.zoom),0],er=new Float32Array(16);return e.translate(er,W,Dt),er},et.prototype.saveTileTexture=function(W){var de=this._tileTextures[W.size[0]];de?de.push(W):this._tileTextures[W.size[0]]=[W]},et.prototype.getTileTexture=function(W){var de=this._tileTextures[W];return de&&de.length>0?de.pop():null},et.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var de=this.imageManager.getPattern(W.from.toString()),J=this.imageManager.getPattern(W.to.toString());return!de||!J},et.prototype.useProgram=function(W,de){this.cache=this.cache||{};var J=""+W+(de?de.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[J]||(this.cache[J]=new rs(this.context,xl[W],de,du[W],this._showOverdrawInspector)),this.cache[J]},et.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},et.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(W.FUNC_ADD)},et.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var W=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,W.RGBA)}},et.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var $t=function(W,de){this.points=W,this.planes=de};$t.fromInvProjectionMatrix=function(W,de,J){var ge=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ce=Math.pow(2,J),Fe=ge.map(function(Dt){return e.transformMat4([],Dt,W)}).map(function(Dt){return e.scale$1([],Dt,1/Dt[3]/de*Ce)}),$e=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ht=$e.map(function(Dt){var er=e.sub([],Fe[Dt[0]],Fe[Dt[1]]),pr=e.sub([],Fe[Dt[2]],Fe[Dt[1]]),yr=e.normalize([],e.cross([],er,pr)),Rr=-e.dot(yr,Fe[Dt[1]]);return yr.concat(Rr)});return new $t(Fe,ht)};var Kr=function(W,de){this.min=W,this.max=de,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Kr.prototype.quadrant=function(W){for(var de=[W%2===0,W<2],J=e.clone$2(this.min),ge=e.clone$2(this.max),Ce=0;Ce<de.length;Ce++)J[Ce]=de[Ce]?this.min[Ce]:this.center[Ce],ge[Ce]=de[Ce]?this.center[Ce]:this.max[Ce];return ge[2]=this.max[2],new Kr(J,ge)},Kr.prototype.distanceX=function(W){var de=Math.max(Math.min(this.max[0],W[0]),this.min[0]);return de-W[0]},Kr.prototype.distanceY=function(W){var de=Math.max(Math.min(this.max[1],W[1]),this.min[1]);return de-W[1]},Kr.prototype.intersects=function(W){for(var de=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],J=!0,ge=0;ge<W.planes.length;ge++){for(var Ce=W.planes[ge],Fe=0,$e=0;$e<de.length;$e++)Fe+=e.dot$1(Ce,de[$e])>=0;if(Fe===0)return 0;Fe!==de.length&&(J=!1)}if(J)return 2;for(var ht=0;ht<3;ht++){for(var Dt=Number.MAX_VALUE,er=-Number.MAX_VALUE,pr=0;pr<W.points.length;pr++){var yr=W.points[pr][ht]-this.min[ht];Dt=Math.min(Dt,yr),er=Math.max(er,yr)}if(er<0||Dt>this.max[ht]-this.min[ht])return 0}return 1};var Hn=function(W,de,J,ge){if(W===void 0&&(W=0),de===void 0&&(de=0),J===void 0&&(J=0),ge===void 0&&(ge=0),isNaN(W)||W<0||isNaN(de)||de<0||isNaN(J)||J<0||isNaN(ge)||ge<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W,this.bottom=de,this.left=J,this.right=ge};Hn.prototype.interpolate=function(W,de,J){return de.top!=null&&W.top!=null&&(this.top=e.number(W.top,de.top,J)),de.bottom!=null&&W.bottom!=null&&(this.bottom=e.number(W.bottom,de.bottom,J)),de.left!=null&&W.left!=null&&(this.left=e.number(W.left,de.left,J)),de.right!=null&&W.right!=null&&(this.right=e.number(W.right,de.right,J)),this},Hn.prototype.getCenter=function(W,de){var J=e.clamp((this.left+W-this.right)/2,0,W),ge=e.clamp((this.top+de-this.bottom)/2,0,de);return new e.Point(J,ge)},Hn.prototype.equals=function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right},Hn.prototype.clone=function(){return new Hn(this.top,this.bottom,this.left,this.right)},Hn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ta=function(W,de,J,ge,Ce){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ce===void 0?!0:Ce,this._minZoom=W||0,this._maxZoom=de||22,this._minPitch=J==null?0:J,this._maxPitch=ge==null?60:ge,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hn,this._posMatrixCache={},this._alignedPosMatrixCache={}},ea={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ta.prototype.clone=function(){var W=new ta(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W},ea.minZoom.get=function(){return this._minZoom},ea.minZoom.set=function(ve){this._minZoom!==ve&&(this._minZoom=ve,this.zoom=Math.max(this.zoom,ve))},ea.maxZoom.get=function(){return this._maxZoom},ea.maxZoom.set=function(ve){this._maxZoom!==ve&&(this._maxZoom=ve,this.zoom=Math.min(this.zoom,ve))},ea.minPitch.get=function(){return this._minPitch},ea.minPitch.set=function(ve){this._minPitch!==ve&&(this._minPitch=ve,this.pitch=Math.max(this.pitch,ve))},ea.maxPitch.get=function(){return this._maxPitch},ea.maxPitch.set=function(ve){this._maxPitch!==ve&&(this._maxPitch=ve,this.pitch=Math.min(this.pitch,ve))},ea.renderWorldCopies.get=function(){return this._renderWorldCopies},ea.renderWorldCopies.set=function(ve){ve===void 0?ve=!0:ve===null&&(ve=!1),this._renderWorldCopies=ve},ea.worldSize.get=function(){return this.tileSize*this.scale},ea.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ea.size.get=function(){return new e.Point(this.width,this.height)},ea.bearing.get=function(){return-this.angle/Math.PI*180},ea.bearing.set=function(ve){var W=-e.wrap(ve,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ea.pitch.get=function(){return this._pitch/Math.PI*180},ea.pitch.set=function(ve){var W=e.clamp(ve,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},ea.fov.get=function(){return this._fov/Math.PI*180},ea.fov.set=function(ve){ve=Math.max(.01,Math.min(60,ve)),this._fov!==ve&&(this._unmodified=!1,this._fov=ve/180*Math.PI,this._calcMatrices())},ea.zoom.get=function(){return this._zoom},ea.zoom.set=function(ve){var W=Math.min(Math.max(ve,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},ea.center.get=function(){return this._center},ea.center.set=function(ve){ve.lat===this._center.lat&&ve.lng===this._center.lng||(this._unmodified=!1,this._center=ve,this._constrain(),this._calcMatrices())},ea.padding.get=function(){return this._edgeInsets.toJSON()},ea.padding.set=function(ve){this._edgeInsets.equals(ve)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ve,1),this._calcMatrices())},ea.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ta.prototype.isPaddingEqual=function(W){return this._edgeInsets.equals(W)},ta.prototype.interpolatePadding=function(W,de,J){this._unmodified=!1,this._edgeInsets.interpolate(W,de,J),this._constrain(),this._calcMatrices()},ta.prototype.coveringZoomLevel=function(W){var de=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,de)},ta.prototype.getVisibleUnwrappedCoordinates=function(W){var de=[new e.UnwrappedTileID(0,W)];if(this._renderWorldCopies)for(var J=this.pointCoordinate(new e.Point(0,0)),ge=this.pointCoordinate(new e.Point(this.width,0)),Ce=this.pointCoordinate(new e.Point(this.width,this.height)),Fe=this.pointCoordinate(new e.Point(0,this.height)),$e=Math.floor(Math.min(J.x,ge.x,Ce.x,Fe.x)),ht=Math.floor(Math.max(J.x,ge.x,Ce.x,Fe.x)),Dt=1,er=$e-Dt;er<=ht+Dt;er++)er!==0&&de.push(new e.UnwrappedTileID(er,W));return de},ta.prototype.coveringTiles=function(W){var de=this.coveringZoomLevel(W),J=de;if(W.minzoom!==void 0&&de<W.minzoom)return[];W.maxzoom!==void 0&&de>W.maxzoom&&(de=W.maxzoom);var ge=e.MercatorCoordinate.fromLngLat(this.center),Ce=Math.pow(2,de),Fe=[Ce*ge.x,Ce*ge.y,0],$e=$t.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,de),ht=W.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ht=de);var Dt=3,er=function(Ba){return{aabb:new Kr([Ba*Ce,0,0],[(Ba+1)*Ce,Ce,0]),zoom:0,x:0,y:0,wrap:Ba,fullyVisible:!1}},pr=[],yr=[],Rr=de,Zr=W.reparseOverscaled?J:de;if(this._renderWorldCopies)for(var Jr=1;Jr<=3;Jr++)pr.push(er(-Jr)),pr.push(er(Jr));for(pr.push(er(0));pr.length>0;){var Xr=pr.pop(),rn=Xr.x,xn=Xr.y,Fn=Xr.fullyVisible;if(!Fn){var Gn=Xr.aabb.intersects($e);if(Gn===0)continue;Fn=Gn===2}var oa=Xr.aabb.distanceX(Fe),ca=Xr.aabb.distanceY(Fe),la=Math.max(Math.abs(oa),Math.abs(ca)),wa=Dt+(1<<Rr-Xr.zoom)-2;if(Xr.zoom===Rr||la>wa&&Xr.zoom>=ht){yr.push({tileID:new e.OverscaledTileID(Xr.zoom===Rr?Zr:Xr.zoom,Xr.wrap,Xr.zoom,rn,xn),distanceSq:e.sqrLen([Fe[0]-.5-rn,Fe[1]-.5-xn])});continue}for(var La=0;La<4;La++){var Ca=(rn<<1)+La%2,Fa=(xn<<1)+(La>>1);pr.push({aabb:Xr.aabb.quadrant(La),zoom:Xr.zoom+1,x:Ca,y:Fa,wrap:Xr.wrap,fullyVisible:Fn})}}return yr.sort(function(Ba,ti){return Ba.distanceSq-ti.distanceSq}).map(function(Ba){return Ba.tileID})},ta.prototype.resize=function(W,de){this.width=W,this.height=de,this.pixelsToGLUnits=[2/W,-2/de],this._constrain(),this._calcMatrices()},ea.unmodified.get=function(){return this._unmodified},ta.prototype.zoomScale=function(W){return Math.pow(2,W)},ta.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2},ta.prototype.project=function(W){var de=e.clamp(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(W.lng)*this.worldSize,e.mercatorYfromLat(de)*this.worldSize)},ta.prototype.unproject=function(W){return new e.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize).toLngLat()},ea.point.get=function(){return this.project(this.center)},ta.prototype.setLocationAtPoint=function(W,de){var J=this.pointCoordinate(de),ge=this.pointCoordinate(this.centerPoint),Ce=this.locationCoordinate(W),Fe=new e.MercatorCoordinate(Ce.x-(J.x-ge.x),Ce.y-(J.y-ge.y));this.center=this.coordinateLocation(Fe),this._renderWorldCopies&&(this.center=this.center.wrap())},ta.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))},ta.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))},ta.prototype.locationCoordinate=function(W){return e.MercatorCoordinate.fromLngLat(W)},ta.prototype.coordinateLocation=function(W){return W.toLngLat()},ta.prototype.pointCoordinate=function(W){var de=0,J=[W.x,W.y,0,1],ge=[W.x,W.y,1,1];e.transformMat4(J,J,this.pixelMatrixInverse),e.transformMat4(ge,ge,this.pixelMatrixInverse);var Ce=J[3],Fe=ge[3],$e=J[0]/Ce,ht=ge[0]/Fe,Dt=J[1]/Ce,er=ge[1]/Fe,pr=J[2]/Ce,yr=ge[2]/Fe,Rr=pr===yr?0:(de-pr)/(yr-pr);return new e.MercatorCoordinate(e.number($e,ht,Rr)/this.worldSize,e.number(Dt,er,Rr)/this.worldSize)},ta.prototype.coordinatePoint=function(W){var de=[W.x*this.worldSize,W.y*this.worldSize,0,1];return e.transformMat4(de,de,this.pixelMatrix),new e.Point(de[0]/de[3],de[1]/de[3])},ta.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},ta.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},ta.prototype.setMaxBounds=function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ta.prototype.calculatePosMatrix=function(W,de){de===void 0&&(de=!1);var J=W.key,ge=de?this._alignedPosMatrixCache:this._posMatrixCache;if(ge[J])return ge[J];var Ce=W.canonical,Fe=this.worldSize/this.zoomScale(Ce.z),$e=Ce.x+Math.pow(2,Ce.z)*W.wrap,ht=e.identity(new Float64Array(16));return e.translate(ht,ht,[$e*Fe,Ce.y*Fe,0]),e.scale(ht,ht,[Fe/e.EXTENT,Fe/e.EXTENT,1]),e.multiply(ht,de?this.alignedProjMatrix:this.projMatrix,ht),ge[J]=new Float32Array(ht),ge[J]},ta.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ta.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var W=-90,de=90,J=-180,ge=180,Ce,Fe,$e,ht,Dt=this.size,er=this._unmodified;if(this.latRange){var pr=this.latRange;W=e.mercatorYfromLat(pr[1])*this.worldSize,de=e.mercatorYfromLat(pr[0])*this.worldSize,Ce=de-W<Dt.y?Dt.y/(de-W):0}if(this.lngRange){var yr=this.lngRange;J=e.mercatorXfromLng(yr[0])*this.worldSize,ge=e.mercatorXfromLng(yr[1])*this.worldSize,Fe=ge-J<Dt.x?Dt.x/(ge-J):0}var Rr=this.point,Zr=Math.max(Fe||0,Ce||0);if(Zr){this.center=this.unproject(new e.Point(Fe?(ge+J)/2:Rr.x,Ce?(de+W)/2:Rr.y)),this.zoom+=this.scaleZoom(Zr),this._unmodified=er,this._constraining=!1;return}if(this.latRange){var Jr=Rr.y,Xr=Dt.y/2;Jr-Xr<W&&(ht=W+Xr),Jr+Xr>de&&(ht=de-Xr)}if(this.lngRange){var rn=Rr.x,xn=Dt.x/2;rn-xn<J&&($e=J+xn),rn+xn>ge&&($e=ge-xn)}($e!==void 0||ht!==void 0)&&(this.center=this.unproject(new e.Point($e!==void 0?$e:Rr.x,ht!==void 0?ht:Rr.y))),this._unmodified=er,this._constraining=!1}},ta.prototype._calcMatrices=function(){if(!!this.height){var W=this._fov/2,de=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var J=Math.PI/2+this._pitch,ge=this._fov*(.5+de.y/this.height),Ce=Math.sin(ge)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-J-ge,.01,Math.PI-.01)),Fe=this.point,$e=Fe.x,ht=Fe.y,Dt=Math.cos(Math.PI/2-this._pitch)*Ce+this.cameraToCenterDistance,er=Dt*1.01,pr=this.height/50,yr=new Float64Array(16);e.perspective(yr,this._fov,this.width/this.height,pr,er),yr[8]=-de.x*2/this.width,yr[9]=de.y*2/this.height,e.scale(yr,yr,[1,-1,1]),e.translate(yr,yr,[0,0,-this.cameraToCenterDistance]),e.rotateX(yr,yr,this._pitch),e.rotateZ(yr,yr,this.angle),e.translate(yr,yr,[-$e,-ht,0]),this.mercatorMatrix=e.scale([],yr,[this.worldSize,this.worldSize,this.worldSize]),e.scale(yr,yr,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=yr,this.invProjMatrix=e.invert([],this.projMatrix);var Rr=this.width%2/2,Zr=this.height%2/2,Jr=Math.cos(this.angle),Xr=Math.sin(this.angle),rn=$e-Math.round($e)+Jr*Rr+Xr*Zr,xn=ht-Math.round(ht)+Jr*Zr+Xr*Rr,Fn=new Float64Array(yr);if(e.translate(Fn,Fn,[rn>.5?rn-1:rn,xn>.5?xn-1:xn,0]),this.alignedProjMatrix=Fn,yr=e.create(),e.scale(yr,yr,[this.width/2,-this.height/2,1]),e.translate(yr,yr,[1,-1,0]),this.labelPlaneMatrix=yr,yr=e.create(),e.scale(yr,yr,[1,-1,1]),e.translate(yr,yr,[-1,-1,0]),e.scale(yr,yr,[2/this.width,2/this.height,1]),this.glCoordMatrix=yr,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),yr=e.invert(new Float64Array(16),this.pixelMatrix),!yr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=yr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ta.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new e.Point(0,0)),de=[W.x*this.worldSize,W.y*this.worldSize,0,1],J=e.transformMat4(de,de,this.pixelMatrix);return J[3]/this.cameraToCenterDistance},ta.prototype.getCameraPoint=function(){var W=this._pitch,de=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,de))},ta.prototype.getCameraQueryGeometry=function(W){var de=this.getCameraPoint();if(W.length===1)return[W[0],de];for(var J=de.x,ge=de.y,Ce=de.x,Fe=de.y,$e=0,ht=W;$e<ht.length;$e+=1){var Dt=ht[$e];J=Math.min(J,Dt.x),ge=Math.min(ge,Dt.y),Ce=Math.max(Ce,Dt.x),Fe=Math.max(Fe,Dt.y)}return[new e.Point(J,ge),new e.Point(Ce,ge),new e.Point(Ce,Fe),new e.Point(J,Fe),new e.Point(J,ge)]},Object.defineProperties(ta.prototype,ea);function vi(ve,W){var de=!1,J=null,ge=function(){J=null,de&&(ve(),J=setTimeout(ge,W),de=!1)};return function(){return de=!0,J||ge(),J}}var Di=function(W){this._hashName=W&&encodeURIComponent(W),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=vi(this._updateHashUnthrottled.bind(this),30*1e3/100)};Di.prototype.addTo=function(W){return this._map=W,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Di.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Di.prototype.getHashString=function(W){var de=this._map.getCenter(),J=Math.round(this._map.getZoom()*100)/100,ge=Math.ceil((J*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ce=Math.pow(10,ge),Fe=Math.round(de.lng*Ce)/Ce,$e=Math.round(de.lat*Ce)/Ce,ht=this._map.getBearing(),Dt=this._map.getPitch(),er="";if(W?er+="/"+Fe+"/"+$e+"/"+J:er+=J+"/"+$e+"/"+Fe,(ht||Dt)&&(er+="/"+Math.round(ht*10)/10),Dt&&(er+="/"+Math.round(Dt)),this._hashName){var pr=this._hashName,yr=!1,Rr=e.window.location.hash.slice(1).split("&").map(function(Zr){var Jr=Zr.split("=")[0];return Jr===pr?(yr=!0,Jr+"="+er):Zr}).filter(function(Zr){return Zr});return yr||Rr.push(pr+"="+er),"#"+Rr.join("&")}return"#"+er},Di.prototype._getCurrentHash=function(){var W=this,de=e.window.location.hash.replace("#","");if(this._hashName){var J;return de.split("&").map(function(ge){return ge.split("=")}).forEach(function(ge){ge[0]===W._hashName&&(J=ge)}),(J&&J[1]||"").split("/")}return de.split("/")},Di.prototype._onHashChange=function(){var W=this._getCurrentHash();if(W.length>=3&&!W.some(function(J){return isNaN(J)})){var de=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],+W[1]],zoom:+W[0],bearing:de,pitch:+(W[4]||0)}),!0}return!1},Di.prototype._updateHashUnthrottled=function(){var W=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",W)}catch{}};var $i={linearity:.3,easing:e.bezier(0,0,.3,1)},Ri=e.extend({deceleration:2500,maxSpeed:1400},$i),ce=e.extend({deceleration:20,maxSpeed:1400},$i),Te=e.extend({deceleration:1e3,maxSpeed:360},$i),Re=e.extend({deceleration:1e3,maxSpeed:90},$i),Ue=function(W){this._map=W,this.clear()};Ue.prototype.clear=function(){this._inertiaBuffer=[]},Ue.prototype.record=function(W){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:W})},Ue.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,de=e.browser.now(),J=160;W.length>0&&de-W[0].time>J;)W.shift()},Ue.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var de={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},J=0,ge=this._inertiaBuffer;J<ge.length;J+=1){var Ce=ge[J],Fe=Ce.settings;de.zoom+=Fe.zoomDelta||0,de.bearing+=Fe.bearingDelta||0,de.pitch+=Fe.pitchDelta||0,Fe.panDelta&&de.pan._add(Fe.panDelta),Fe.around&&(de.around=Fe.around),Fe.pinchAround&&(de.pinchAround=Fe.pinchAround)}var $e=this._inertiaBuffer[this._inertiaBuffer.length-1],ht=$e.time-this._inertiaBuffer[0].time,Dt={};if(de.pan.mag()){var er=Je(de.pan.mag(),ht,e.extend({},Ri,W||{}));Dt.offset=de.pan.mult(er.amount/de.pan.mag()),Dt.center=this._map.transform.center,Be(Dt,er)}if(de.zoom){var pr=Je(de.zoom,ht,ce);Dt.zoom=this._map.transform.zoom+pr.amount,Be(Dt,pr)}if(de.bearing){var yr=Je(de.bearing,ht,Te);Dt.bearing=this._map.transform.bearing+e.clamp(yr.amount,-179,179),Be(Dt,yr)}if(de.pitch){var Rr=Je(de.pitch,ht,Re);Dt.pitch=this._map.transform.pitch+Rr.amount,Be(Dt,Rr)}if(Dt.zoom||Dt.bearing){var Zr=de.pinchAround===void 0?de.around:de.pinchAround;Dt.around=Zr?this._map.unproject(Zr):this._map.getCenter()}return this.clear(),e.extend(Dt,{noMoveStart:!0})}};function Be(ve,W){(!ve.duration||ve.duration<W.duration)&&(ve.duration=W.duration,ve.easing=W.easing)}function Je(ve,W,de){var J=de.maxSpeed,ge=de.linearity,Ce=de.deceleration,Fe=e.clamp(ve*ge/(W/1e3),-J,J),$e=Math.abs(Fe)/(Ce*ge);return{easing:de.easing,duration:$e*1e3,amount:Fe*($e/2)}}var wt=function(ve){function W(J,ge,Ce,Fe){Fe===void 0&&(Fe={});var $e=i.mousePos(ge.getCanvasContainer(),Ce),ht=ge.unproject($e);ve.call(this,J,e.extend({point:$e,lngLat:ht,originalEvent:Ce},Fe)),this._defaultPrevented=!1,this.target=ge}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),gt=function(ve){function W(J,ge,Ce){var Fe=J==="touchend"?Ce.changedTouches:Ce.touches,$e=i.touchPos(ge.getCanvasContainer(),Fe),ht=$e.map(function(pr){return ge.unproject(pr)}),Dt=$e.reduce(function(pr,yr,Rr,Zr){return pr.add(yr.div(Zr.length))},new e.Point(0,0)),er=ge.unproject(Dt);ve.call(this,J,{points:$e,point:Dt,lngLats:ht,lngLat:er,originalEvent:Ce}),this._defaultPrevented=!1}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),It=function(ve){function W(J,ge,Ce){ve.call(this,J,{originalEvent:Ce}),this._defaultPrevented=!1}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),qt=function(W,de){this._map=W,this._clickTolerance=de.clickTolerance};qt.prototype.reset=function(){delete this._mousedownPos},qt.prototype.wheel=function(W){return this._firePreventable(new It(W.type,this._map,W))},qt.prototype.mousedown=function(W,de){return this._mousedownPos=de,this._firePreventable(new wt(W.type,this._map,W))},qt.prototype.mouseup=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.click=function(W,de){this._mousedownPos&&this._mousedownPos.dist(de)>=this._clickTolerance||this._map.fire(new wt(W.type,this._map,W))},qt.prototype.dblclick=function(W){return this._firePreventable(new wt(W.type,this._map,W))},qt.prototype.mouseover=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.mouseout=function(W){this._map.fire(new wt(W.type,this._map,W))},qt.prototype.touchstart=function(W){return this._firePreventable(new gt(W.type,this._map,W))},qt.prototype.touchmove=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype.touchend=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype.touchcancel=function(W){this._map.fire(new gt(W.type,this._map,W))},qt.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}},qt.prototype.isEnabled=function(){return!0},qt.prototype.isActive=function(){return!1},qt.prototype.enable=function(){},qt.prototype.disable=function(){};var nr=function(W){this._map=W};nr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},nr.prototype.mousemove=function(W){this._map.fire(new wt(W.type,this._map,W))},nr.prototype.mousedown=function(){this._delayContextMenu=!0},nr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},nr.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new wt(W.type,this._map,W)),this._map.listens("contextmenu")&&W.preventDefault()},nr.prototype.isEnabled=function(){return!0},nr.prototype.isActive=function(){return!1},nr.prototype.enable=function(){},nr.prototype.disable=function(){};var ar=function(W,de){this._map=W,this._el=W.getCanvasContainer(),this._container=W.getContainer(),this._clickTolerance=de.clickTolerance||1};ar.prototype.isEnabled=function(){return!!this._enabled},ar.prototype.isActive=function(){return!!this._active},ar.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ar.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},ar.prototype.mousedown=function(W,de){!this.isEnabled()||!(W.shiftKey&&W.button===0)||(i.disableDrag(),this._startPos=this._lastPos=de,this._active=!0)},ar.prototype.mousemoveWindow=function(W,de){if(!!this._active){var J=de;if(!(this._lastPos.equals(J)||!this._box&&J.dist(this._startPos)<this._clickTolerance)){var ge=this._startPos;this._lastPos=J,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));var Ce=Math.min(ge.x,J.x),Fe=Math.max(ge.x,J.x),$e=Math.min(ge.y,J.y),ht=Math.max(ge.y,J.y);i.setTransform(this._box,"translate("+Ce+"px,"+$e+"px)"),this._box.style.width=Fe-Ce+"px",this._box.style.height=ht-$e+"px"}}},ar.prototype.mouseupWindow=function(W,de){var J=this;if(!!this._active&&W.button===0){var ge=this._startPos,Ce=de;if(this.reset(),i.suppressClick(),ge.x===Ce.x&&ge.y===Ce.y)this._fireEvent("boxzoomcancel",W);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(Fe){return Fe.fitScreenCoordinates(ge,Ce,J._map.getBearing(),{linear:!0})}}}},ar.prototype.keydown=function(W){!this._active||W.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",W))},ar.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},ar.prototype._fireEvent=function(W,de){return this._map.fire(new e.Event(W,{originalEvent:de}))};function Cr(ve,W){for(var de={},J=0;J<ve.length;J++)de[ve[J].identifier]=W[J];return de}function nn(ve){for(var W=new e.Point(0,0),de=0,J=ve;de<J.length;de+=1){var ge=J[de];W._add(ge)}return W.div(ve.length)}var pn=500,Ir=500,Wr=30,en=function(W){this.reset(),this.numTouches=W.numTouches};en.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},en.prototype.touchstart=function(W,de,J){(this.centroid||J.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),J.length===this.numTouches&&(this.centroid=nn(de),this.touches=Cr(J,de)))},en.prototype.touchmove=function(W,de,J){if(!(this.aborted||!this.centroid)){var ge=Cr(J,de);for(var Ce in this.touches){var Fe=this.touches[Ce],$e=ge[Ce];(!$e||$e.dist(Fe)>Wr)&&(this.aborted=!0)}}},en.prototype.touchend=function(W,de,J){if((!this.centroid||W.timeStamp-this.startTime>Ir)&&(this.aborted=!0),J.length===0){var ge=!this.aborted&&this.centroid;if(this.reset(),ge)return ge}};var fn=function(W){this.singleTap=new en(W),this.numTaps=W.numTaps,this.reset()};fn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fn.prototype.touchstart=function(W,de,J){this.singleTap.touchstart(W,de,J)},fn.prototype.touchmove=function(W,de,J){this.singleTap.touchmove(W,de,J)},fn.prototype.touchend=function(W,de,J){var ge=this.singleTap.touchend(W,de,J);if(ge){var Ce=W.timeStamp-this.lastTime<pn,Fe=!this.lastTap||this.lastTap.dist(ge)<Wr;if((!Ce||!Fe)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=ge,this.count===this.numTaps)return this.reset(),ge}};var vn=function(){this._zoomIn=new fn({numTouches:1,numTaps:2}),this._zoomOut=new fn({numTouches:2,numTaps:1}),this.reset()};vn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},vn.prototype.touchstart=function(W,de,J){this._zoomIn.touchstart(W,de,J),this._zoomOut.touchstart(W,de,J)},vn.prototype.touchmove=function(W,de,J){this._zoomIn.touchmove(W,de,J),this._zoomOut.touchmove(W,de,J)},vn.prototype.touchend=function(W,de,J){var ge=this,Ce=this._zoomIn.touchend(W,de,J),Fe=this._zoomOut.touchend(W,de,J);if(Ce)return this._active=!0,W.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function($e){return $e.easeTo({duration:300,zoom:$e.getZoom()+1,around:$e.unproject(Ce)},{originalEvent:W})}};if(Fe)return this._active=!0,W.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function($e){return $e.easeTo({duration:300,zoom:$e.getZoom()-1,around:$e.unproject(Fe)},{originalEvent:W})}}},vn.prototype.touchcancel=function(){this.reset()},vn.prototype.enable=function(){this._enabled=!0},vn.prototype.disable=function(){this._enabled=!1,this.reset()},vn.prototype.isEnabled=function(){return this._enabled},vn.prototype.isActive=function(){return this._active};var tn=0,Zn=2,ha=function(W){this.reset(),this._clickTolerance=W.clickTolerance||1};ha.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ha.prototype._correctButton=function(W,de){return!1},ha.prototype._move=function(W,de){return{}},ha.prototype.mousedown=function(W,de){if(!this._lastPoint){var J=i.mouseButton(W);!this._correctButton(W,J)||(this._lastPoint=de,this._eventButton=J)}},ha.prototype.mousemoveWindow=function(W,de){var J=this._lastPoint;if(!!J&&(W.preventDefault(),!(!this._moved&&de.dist(J)<this._clickTolerance)))return this._moved=!0,this._lastPoint=de,this._move(J,de)},ha.prototype.mouseupWindow=function(W){var de=i.mouseButton(W);de===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},ha.prototype.enable=function(){this._enabled=!0},ha.prototype.disable=function(){this._enabled=!1,this.reset()},ha.prototype.isEnabled=function(){return this._enabled},ha.prototype.isActive=function(){return this._active};var Pa=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.mousedown=function(J,ge){ve.prototype.mousedown.call(this,J,ge),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(J,ge){return ge===tn&&!J.ctrlKey},W.prototype._move=function(J,ge){return{around:ge,panDelta:ge.sub(J)}},W}(ha),pa=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,ge){return ge===tn&&J.ctrlKey||ge===Zn},W.prototype._move=function(J,ge){var Ce=.8,Fe=(ge.x-J.x)*Ce;if(Fe)return this._active=!0,{bearingDelta:Fe}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(ha),Na=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,ge){return ge===tn&&J.ctrlKey||ge===Zn},W.prototype._move=function(J,ge){var Ce=-.5,Fe=(ge.y-J.y)*Ce;if(Fe)return this._active=!0,{pitchDelta:Fe}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(ha),xa=function(W){this._minTouches=1,this._clickTolerance=W.clickTolerance||1,this.reset()};xa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},xa.prototype.touchstart=function(W,de,J){return this._calculateTransform(W,de,J)},xa.prototype.touchmove=function(W,de,J){if(!!this._active)return W.preventDefault(),this._calculateTransform(W,de,J)},xa.prototype.touchend=function(W,de,J){this._calculateTransform(W,de,J),this._active&&J.length<this._minTouches&&this.reset()},xa.prototype.touchcancel=function(){this.reset()},xa.prototype._calculateTransform=function(W,de,J){J.length>0&&(this._active=!0);var ge=Cr(J,de),Ce=new e.Point(0,0),Fe=new e.Point(0,0),$e=0;for(var ht in ge){var Dt=ge[ht],er=this._touches[ht];er&&(Ce._add(Dt),Fe._add(Dt.sub(er)),$e++,ge[ht]=Dt)}if(this._touches=ge,!($e<this._minTouches||!Fe.mag())){var pr=Fe.div($e);if(this._sum._add(pr),!(this._sum.mag()<this._clickTolerance)){var yr=Ce.div($e);return{around:yr,panDelta:pr}}}},xa.prototype.enable=function(){this._enabled=!0},xa.prototype.disable=function(){this._enabled=!1,this.reset()},xa.prototype.isEnabled=function(){return this._enabled},xa.prototype.isActive=function(){return this._active};var Ja=function(){this.reset()};Ja.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ja.prototype._start=function(W){},Ja.prototype._move=function(W,de,J){return{}},Ja.prototype.touchstart=function(W,de,J){this._firstTwoTouches||J.length<2||(this._firstTwoTouches=[J[0].identifier,J[1].identifier],this._start([de[0],de[1]]))},Ja.prototype.touchmove=function(W,de,J){if(!!this._firstTwoTouches){W.preventDefault();var ge=this._firstTwoTouches,Ce=ge[0],Fe=ge[1],$e=Va(J,de,Ce),ht=Va(J,de,Fe);if(!(!$e||!ht)){var Dt=this._aroundCenter?null:$e.add(ht).div(2);return this._move([$e,ht],Dt,W)}}},Ja.prototype.touchend=function(W,de,J){if(!!this._firstTwoTouches){var ge=this._firstTwoTouches,Ce=ge[0],Fe=ge[1],$e=Va(J,de,Ce),ht=Va(J,de,Fe);$e&&ht||(this._active&&i.suppressClick(),this.reset())}},Ja.prototype.touchcancel=function(){this.reset()},Ja.prototype.enable=function(W){this._enabled=!0,this._aroundCenter=!!W&&W.around==="center"},Ja.prototype.disable=function(){this._enabled=!1,this.reset()},Ja.prototype.isEnabled=function(){return this._enabled},Ja.prototype.isActive=function(){return this._active};function Va(ve,W,de){for(var J=0;J<ve.length;J++)if(ve[J].identifier===de)return W[J]}var ui=.1;function Li(ve,W){return Math.log(ve/W)/Math.LN2}var Do=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(J){this._startDistance=this._distance=J[0].dist(J[1])},W.prototype._move=function(J,ge){var Ce=this._distance;if(this._distance=J[0].dist(J[1]),!(!this._active&&Math.abs(Li(this._distance,this._startDistance))<ui))return this._active=!0,{zoomDelta:Li(this._distance,Ce),pinchAround:ge}},W}(Ja),Ji=25;function _a(ve,W){return ve.angleWith(W)*180/Math.PI}var di=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(J){this._startVector=this._vector=J[0].sub(J[1]),this._minDiameter=J[0].dist(J[1])},W.prototype._move=function(J,ge){var Ce=this._vector;if(this._vector=J[0].sub(J[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:_a(this._vector,Ce),pinchAround:ge}},W.prototype._isBelowThreshold=function(J){this._minDiameter=Math.min(this._minDiameter,J.mag());var ge=Math.PI*this._minDiameter,Ce=Ji/ge*360,Fe=_a(J,this._startVector);return Math.abs(Fe)<Ce},W}(Ja);function ii(ve){return Math.abs(ve.y)>Math.abs(ve.x)}var Ui=100,yi=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.reset=function(){ve.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(J){this._lastPoints=J,ii(J[0].sub(J[1]))&&(this._valid=!1)},W.prototype._move=function(J,ge,Ce){var Fe=J[0].sub(this._lastPoints[0]),$e=J[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Fe,$e,Ce.timeStamp),!!this._valid){this._lastPoints=J,this._active=!0;var ht=(Fe.y+$e.y)/2,Dt=-.5;return{pitchDelta:ht*Dt}}},W.prototype.gestureBeginsVertically=function(J,ge,Ce){if(this._valid!==void 0)return this._valid;var Fe=2,$e=J.mag()>=Fe,ht=ge.mag()>=Fe;if(!(!$e&&!ht)){if(!$e||!ht)return this._firstMove===void 0&&(this._firstMove=Ce),Ce-this._firstMove<Ui?void 0:!1;var Dt=J.y>0==ge.y>0;return ii(J)&&ii(ge)&&Dt}},W}(Ja),So={panStep:100,bearingStep:15,pitchStep:10},yo=function(){var W=So;this._panStep=W.panStep,this._bearingStep=W.bearingStep,this._pitchStep=W.pitchStep};yo.prototype.reset=function(){this._active=!1},yo.prototype.keydown=function(W){var de=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var J=0,ge=0,Ce=0,Fe=0,$e=0;switch(W.keyCode){case 61:case 107:case 171:case 187:J=1;break;case 189:case 109:case 173:J=-1;break;case 37:W.shiftKey?ge=-1:(W.preventDefault(),Fe=-1);break;case 39:W.shiftKey?ge=1:(W.preventDefault(),Fe=1);break;case 38:W.shiftKey?Ce=1:(W.preventDefault(),$e=-1);break;case 40:W.shiftKey?Ce=-1:(W.preventDefault(),$e=1);break;default:return}return{cameraAnimation:function(ht){var Dt=ht.getZoom();ht.easeTo({duration:300,easeId:"keyboardHandler",easing:Oo,zoom:J?Math.round(Dt)+J*(W.shiftKey?2:1):Dt,bearing:ht.getBearing()+ge*de._bearingStep,pitch:ht.getPitch()+Ce*de._pitchStep,offset:[-Fe*de._panStep,-$e*de._panStep],center:ht.getCenter()},{originalEvent:W})}}}},yo.prototype.enable=function(){this._enabled=!0},yo.prototype.disable=function(){this._enabled=!1,this.reset()},yo.prototype.isEnabled=function(){return this._enabled},yo.prototype.isActive=function(){return this._active};function Oo(ve){return ve*(2-ve)}var ys=4.000244140625,as=1/100,xs=1/450,oo=2,eo=function(W,de){this._map=W,this._el=W.getCanvasContainer(),this._handler=de,this._delta=0,this._defaultZoomRate=as,this._wheelZoomRate=xs,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};eo.prototype.setZoomRate=function(W){this._defaultZoomRate=W},eo.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W},eo.prototype.isEnabled=function(){return!!this._enabled},eo.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},eo.prototype.isZooming=function(){return!!this._zooming},eo.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&W.around==="center")},eo.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},eo.prototype.wheel=function(W){if(!!this.isEnabled()){var de=W.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,J=e.browser.now(),ge=J-(this._lastWheelEventTime||0);this._lastWheelEventTime=J,de!==0&&de%ys===0?this._type="wheel":de!==0&&Math.abs(de)<4?this._type="trackpad":ge>400?(this._type=null,this._lastValue=de,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=Math.abs(ge*de)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,de+=this._lastValue)),W.shiftKey&&de&&(de=de/4),this._type&&(this._lastWheelEvent=W,this._delta-=de,this._active||this._start(W)),W.preventDefault()}},eo.prototype._onTimeout=function(W){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(W)},eo.prototype._start=function(W){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var de=i.mousePos(this._el,W);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(de)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},eo.prototype.renderFrame=function(){return this._onScrollFrame()},eo.prototype._onScrollFrame=function(){var W=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var de=this._map.transform;if(this._delta!==0){var J=this._type==="wheel"&&Math.abs(this._delta)>ys?this._wheelZoomRate:this._defaultZoomRate,ge=oo/(1+Math.exp(-Math.abs(this._delta*J)));this._delta<0&&ge!==0&&(ge=1/ge);var Ce=typeof this._targetZoom=="number"?de.zoomScale(this._targetZoom):de.scale;this._targetZoom=Math.min(de.maxZoom,Math.max(de.minZoom,de.scaleZoom(Ce*ge))),this._type==="wheel"&&(this._startZoom=de.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Fe=typeof this._targetZoom=="number"?this._targetZoom:de.zoom,$e=this._startZoom,ht=this._easing,Dt=!1,er;if(this._type==="wheel"&&$e&&ht){var pr=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),yr=ht(pr);er=e.number($e,Fe,yr),pr<1?this._frameId||(this._frameId=!0):Dt=!0}else er=Fe,Dt=!0;return this._active=!0,Dt&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1,W._handler._triggerRenderFrame(),delete W._targetZoom,delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Dt,zoomDelta:er-de.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},eo.prototype._smoothOutEasing=function(W){var de=e.ease;if(this._prevEase){var J=this._prevEase,ge=(e.browser.now()-J.start)/J.duration,Ce=J.easing(ge+.01)-J.easing(ge),Fe=.27/Math.sqrt(Ce*Ce+1e-4)*.01,$e=Math.sqrt(.27*.27-Fe*Fe);de=e.bezier(Fe,$e,.25,1)}return this._prevEase={start:e.browser.now(),duration:W,easing:de},de},eo.prototype.reset=function(){this._active=!1};var Za=function(W,de){this._clickZoom=W,this._tapZoom=de};Za.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Za.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Za.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Za.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var oi=function(){this.reset()};oi.prototype.reset=function(){this._active=!1},oi.prototype.dblclick=function(W,de){return W.preventDefault(),{cameraAnimation:function(J){J.easeTo({duration:300,zoom:J.getZoom()+(W.shiftKey?-1:1),around:J.unproject(de)},{originalEvent:W})}}},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active};var Uo=function(){this._tap=new fn({numTouches:1,numTaps:1}),this.reset()};Uo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Uo.prototype.touchstart=function(W,de,J){this._swipePoint||(this._tapTime&&W.timeStamp-this._tapTime>pn&&this.reset(),this._tapTime?J.length>0&&(this._swipePoint=de[0],this._swipeTouch=J[0].identifier):this._tap.touchstart(W,de,J))},Uo.prototype.touchmove=function(W,de,J){if(!this._tapTime)this._tap.touchmove(W,de,J);else if(this._swipePoint){if(J[0].identifier!==this._swipeTouch)return;var ge=de[0],Ce=ge.y-this._swipePoint.y;return this._swipePoint=ge,W.preventDefault(),this._active=!0,{zoomDelta:Ce/128}}},Uo.prototype.touchend=function(W,de,J){if(this._tapTime)this._swipePoint&&J.length===0&&this.reset();else{var ge=this._tap.touchend(W,de,J);ge&&(this._tapTime=W.timeStamp)}},Uo.prototype.touchcancel=function(){this.reset()},Uo.prototype.enable=function(){this._enabled=!0},Uo.prototype.disable=function(){this._enabled=!1,this.reset()},Uo.prototype.isEnabled=function(){return this._enabled},Uo.prototype.isActive=function(){return this._active};var wo=function(W,de,J){this._el=W,this._mousePan=de,this._touchPan=J};wo.prototype.enable=function(W){this._inertiaOptions=W||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},wo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},wo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},wo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var qo=function(W,de,J){this._pitchWithRotate=W.pitchWithRotate,this._mouseRotate=de,this._mousePitch=J};qo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},qo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},qo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},qo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var fo=function(W,de,J,ge){this._el=W,this._touchZoom=de,this._touchRotate=J,this._tapDragZoom=ge,this._rotationDisabled=!1,this._enabled=!0};fo.prototype.enable=function(W){this._touchZoom.enable(W),this._rotationDisabled||this._touchRotate.enable(W),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},fo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},fo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},fo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},fo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},fo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var bs=function(ve){return ve.zoom||ve.drag||ve.pitch||ve.rotate},js=function(ve){function W(){ve.apply(this,arguments)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W}(e.Event);function Bu(ve){return ve.panDelta&&ve.panDelta.mag()||ve.zoomDelta||ve.bearingDelta||ve.pitchDelta}var ho=function(W,de){this._map=W,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ue(W),this._bearingSnap=de.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(de),e.bindAll(["handleEvent","handleWindowEvent"],this);var J=this._el;this._listeners=[[J,"touchstart",{passive:!1}],[J,"touchmove",{passive:!1}],[J,"touchend",void 0],[J,"touchcancel",void 0],[J,"mousedown",void 0],[J,"mousemove",void 0],[J,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[J,"mouseover",void 0],[J,"mouseout",void 0],[J,"dblclick",void 0],[J,"click",void 0],[J,"keydown",{capture:!1}],[J,"keyup",void 0],[J,"wheel",{passive:!1}],[J,"contextmenu",void 0],[e.window,"blur",void 0]];for(var ge=0,Ce=this._listeners;ge<Ce.length;ge+=1){var Fe=Ce[ge],$e=Fe[0],ht=Fe[1],Dt=Fe[2];i.addEventListener($e,ht,$e===e.window.document?this.handleWindowEvent:this.handleEvent,Dt)}};ho.prototype.destroy=function(){for(var W=0,de=this._listeners;W<de.length;W+=1){var J=de[W],ge=J[0],Ce=J[1],Fe=J[2];i.removeEventListener(ge,Ce,ge===e.window.document?this.handleWindowEvent:this.handleEvent,Fe)}},ho.prototype._addDefaultHandlers=function(W){var de=this._map,J=de.getCanvasContainer();this._add("mapEvent",new qt(de,W));var ge=de.boxZoom=new ar(de,W);this._add("boxZoom",ge);var Ce=new vn,Fe=new oi;de.doubleClickZoom=new Za(Fe,Ce),this._add("tapZoom",Ce),this._add("clickZoom",Fe);var $e=new Uo;this._add("tapDragZoom",$e);var ht=de.touchPitch=new yi;this._add("touchPitch",ht);var Dt=new pa(W),er=new Na(W);de.dragRotate=new qo(W,Dt,er),this._add("mouseRotate",Dt,["mousePitch"]),this._add("mousePitch",er,["mouseRotate"]);var pr=new Pa(W),yr=new xa(W);de.dragPan=new wo(J,pr,yr),this._add("mousePan",pr),this._add("touchPan",yr,["touchZoom","touchRotate"]);var Rr=new di,Zr=new Do;de.touchZoomRotate=new fo(J,Zr,Rr,$e),this._add("touchRotate",Rr,["touchPan","touchZoom"]),this._add("touchZoom",Zr,["touchPan","touchRotate"]);var Jr=de.scrollZoom=new eo(de,this);this._add("scrollZoom",Jr,["mousePan"]);var Xr=de.keyboard=new yo;this._add("keyboard",Xr),this._add("blockableMapEvent",new nr(de));for(var rn=0,xn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];rn<xn.length;rn+=1){var Fn=xn[rn];W.interactive&&W[Fn]&&de[Fn].enable(W[Fn])}},ho.prototype._add=function(W,de,J){this._handlers.push({handlerName:W,handler:de,allowed:J}),this._handlersById[W]=de},ho.prototype.stop=function(){if(!this._updatingCamera){for(var W=0,de=this._handlers;W<de.length;W+=1){var J=de[W],ge=J.handler;ge.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ho.prototype.isActive=function(){for(var W=0,de=this._handlers;W<de.length;W+=1){var J=de[W],ge=J.handler;if(ge.isActive())return!0}return!1},ho.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ho.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ho.prototype.isMoving=function(){return Boolean(bs(this._eventsInProgress))||this.isZooming()},ho.prototype._blockedByActive=function(W,de,J){for(var ge in W)if(ge!==J&&(!de||de.indexOf(ge)<0))return!0;return!1},ho.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")},ho.prototype._getMapTouches=function(W){for(var de=[],J=0,ge=W;J<ge.length;J+=1){var Ce=ge[J],Fe=Ce.target;this._el.contains(Fe)&&de.push(Ce)}return de},ho.prototype.handleEvent=function(W,de){if(W.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var J=W.type==="renderFrame"?void 0:W,ge={needsRenderFrame:!1},Ce={},Fe={},$e=W.touches?this._getMapTouches(W.touches):void 0,ht=$e?i.touchPos(this._el,$e):i.mousePos(this._el,W),Dt=0,er=this._handlers;Dt<er.length;Dt+=1){var pr=er[Dt],yr=pr.handlerName,Rr=pr.handler,Zr=pr.allowed;if(!!Rr.isEnabled()){var Jr=void 0;this._blockedByActive(Fe,Zr,yr)?Rr.reset():Rr[de||W.type]&&(Jr=Rr[de||W.type](W,ht,$e),this.mergeHandlerResult(ge,Ce,Jr,yr,J),Jr&&Jr.needsRenderFrame&&this._triggerRenderFrame()),(Jr||Rr.isActive())&&(Fe[yr]=Rr)}}var Xr={};for(var rn in this._previousActiveHandlers)Fe[rn]||(Xr[rn]=J);this._previousActiveHandlers=Fe,(Object.keys(Xr).length||Bu(ge))&&(this._changes.push([ge,Ce,Xr]),this._triggerRenderFrame()),(Object.keys(Fe).length||Bu(ge))&&this._map._stop(!0),this._updatingCamera=!1;var xn=ge.cameraAnimation;xn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],xn(this._map))},ho.prototype.mergeHandlerResult=function(W,de,J,ge,Ce){if(!!J){e.extend(W,J);var Fe={handlerName:ge,originalEvent:J.originalEvent||Ce};J.zoomDelta!==void 0&&(de.zoom=Fe),J.panDelta!==void 0&&(de.drag=Fe),J.pitchDelta!==void 0&&(de.pitch=Fe),J.bearingDelta!==void 0&&(de.rotate=Fe)}},ho.prototype._applyChanges=function(){for(var W={},de={},J={},ge=0,Ce=this._changes;ge<Ce.length;ge+=1){var Fe=Ce[ge],$e=Fe[0],ht=Fe[1],Dt=Fe[2];$e.panDelta&&(W.panDelta=(W.panDelta||new e.Point(0,0))._add($e.panDelta)),$e.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+$e.zoomDelta),$e.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+$e.bearingDelta),$e.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+$e.pitchDelta),$e.around!==void 0&&(W.around=$e.around),$e.pinchAround!==void 0&&(W.pinchAround=$e.pinchAround),$e.noInertia&&(W.noInertia=$e.noInertia),e.extend(de,ht),e.extend(J,Dt)}this._updateMapTransform(W,de,J),this._changes=[]},ho.prototype._updateMapTransform=function(W,de,J){var ge=this._map,Ce=ge.transform;if(!Bu(W))return this._fireEvents(de,J);var Fe=W.panDelta,$e=W.zoomDelta,ht=W.bearingDelta,Dt=W.pitchDelta,er=W.around,pr=W.pinchAround;pr!==void 0&&(er=pr),ge._stop(!0),er=er||ge.transform.centerPoint;var yr=Ce.pointLocation(Fe?er.sub(Fe):er);ht&&(Ce.bearing+=ht),Dt&&(Ce.pitch+=Dt),$e&&(Ce.zoom+=$e),Ce.setLocationAtPoint(yr,er),this._map._update(),W.noInertia||this._inertia.record(W),this._fireEvents(de,J)},ho.prototype._fireEvents=function(W,de){var J=this,ge=bs(this._eventsInProgress),Ce=bs(W),Fe={};for(var $e in W){var ht=W[$e],Dt=ht.originalEvent;this._eventsInProgress[$e]||(Fe[$e+"start"]=Dt),this._eventsInProgress[$e]=W[$e]}!ge&&Ce&&this._fireEvent("movestart",Ce.originalEvent);for(var er in Fe)this._fireEvent(er,Fe[er]);W.rotate&&(this._bearingChanged=!0),Ce&&this._fireEvent("move",Ce.originalEvent);for(var pr in W){var yr=W[pr],Rr=yr.originalEvent;this._fireEvent(pr,Rr)}var Zr={},Jr;for(var Xr in this._eventsInProgress){var rn=this._eventsInProgress[Xr],xn=rn.handlerName,Fn=rn.originalEvent;this._handlersById[xn].isActive()||(delete this._eventsInProgress[Xr],Jr=de[xn]||Fn,Zr[Xr+"end"]=Jr)}for(var Gn in Zr)this._fireEvent(Gn,Zr[Gn]);var oa=bs(this._eventsInProgress);if((ge||Ce)&&!oa){this._updatingCamera=!0;var ca=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),la=function(wa){return wa!==0&&-J._bearingSnap<wa&&wa<J._bearingSnap};ca?(la(ca.bearing||this._map.getBearing())&&(ca.bearing=0),this._map.easeTo(ca,{originalEvent:Jr})):(this._map.fire(new e.Event("moveend",{originalEvent:Jr})),la(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ho.prototype._fireEvent=function(W,de){this._map.fire(new e.Event(W,de?{originalEvent:de}:{}))},ho.prototype._triggerRenderFrame=function(){var W=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(de){delete W._frameId,W.handleEvent(new js("renderFrame",{timeStamp:de})),W._applyChanges()}))};var af=function(ve){function W(de,J){ve.call(this),this._moving=!1,this._zooming=!1,this.transform=de,this._bearingSnap=J.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(J,ge){return this.jumpTo({center:J},ge)},W.prototype.panBy=function(J,ge,Ce){return J=e.Point.convert(J).mult(-1),this.panTo(this.transform.center,e.extend({offset:J},ge),Ce)},W.prototype.panTo=function(J,ge,Ce){return this.easeTo(e.extend({center:J},ge),Ce)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(J,ge){return this.jumpTo({zoom:J},ge),this},W.prototype.zoomTo=function(J,ge,Ce){return this.easeTo(e.extend({zoom:J},ge),Ce)},W.prototype.zoomIn=function(J,ge){return this.zoomTo(this.getZoom()+1,J,ge),this},W.prototype.zoomOut=function(J,ge){return this.zoomTo(this.getZoom()-1,J,ge),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(J,ge){return this.jumpTo({bearing:J},ge),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(J,ge){return this.jumpTo({padding:J},ge),this},W.prototype.rotateTo=function(J,ge,Ce){return this.easeTo(e.extend({bearing:J},ge),Ce)},W.prototype.resetNorth=function(J,ge){return this.rotateTo(0,e.extend({duration:1e3},J),ge),this},W.prototype.resetNorthPitch=function(J,ge){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},J),ge),this},W.prototype.snapToNorth=function(J,ge){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(J,ge):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(J,ge){return this.jumpTo({pitch:J},ge),this},W.prototype.cameraForBounds=function(J,ge){return J=e.LngLatBounds.convert(J),this._cameraForBoxAndBearing(J.getNorthWest(),J.getSouthEast(),0,ge)},W.prototype._cameraForBoxAndBearing=function(J,ge,Ce,Fe){var $e={top:0,bottom:0,right:0,left:0};if(Fe=e.extend({padding:$e,offset:[0,0],maxZoom:this.transform.maxZoom},Fe),typeof Fe.padding=="number"){var ht=Fe.padding;Fe.padding={top:ht,bottom:ht,right:ht,left:ht}}Fe.padding=e.extend($e,Fe.padding);var Dt=this.transform,er=Dt.padding,pr=Dt.project(e.LngLat.convert(J)),yr=Dt.project(e.LngLat.convert(ge)),Rr=pr.rotate(-Ce*Math.PI/180),Zr=yr.rotate(-Ce*Math.PI/180),Jr=new e.Point(Math.max(Rr.x,Zr.x),Math.max(Rr.y,Zr.y)),Xr=new e.Point(Math.min(Rr.x,Zr.x),Math.min(Rr.y,Zr.y)),rn=Jr.sub(Xr),xn=(Dt.width-(er.left+er.right+Fe.padding.left+Fe.padding.right))/rn.x,Fn=(Dt.height-(er.top+er.bottom+Fe.padding.top+Fe.padding.bottom))/rn.y;if(Fn<0||xn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Gn=Math.min(Dt.scaleZoom(Dt.scale*Math.min(xn,Fn)),Fe.maxZoom),oa=e.Point.convert(Fe.offset),ca=(Fe.padding.left-Fe.padding.right)/2,la=(Fe.padding.top-Fe.padding.bottom)/2,wa=new e.Point(oa.x+ca,oa.y+la),La=wa.mult(Dt.scale/Dt.zoomScale(Gn)),Ca=Dt.unproject(pr.add(yr).div(2).sub(La));return{center:Ca,zoom:Gn,bearing:Ce}},W.prototype.fitBounds=function(J,ge,Ce){return this._fitInternal(this.cameraForBounds(J,ge),ge,Ce)},W.prototype.fitScreenCoordinates=function(J,ge,Ce,Fe,$e){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(J)),this.transform.pointLocation(e.Point.convert(ge)),Ce,Fe),Fe,$e)},W.prototype._fitInternal=function(J,ge,Ce){return J?(ge=e.extend(J,ge),delete ge.padding,ge.linear?this.easeTo(ge,Ce):this.flyTo(ge,Ce)):this},W.prototype.jumpTo=function(J,ge){this.stop();var Ce=this.transform,Fe=!1,$e=!1,ht=!1;return"zoom"in J&&Ce.zoom!==+J.zoom&&(Fe=!0,Ce.zoom=+J.zoom),J.center!==void 0&&(Ce.center=e.LngLat.convert(J.center)),"bearing"in J&&Ce.bearing!==+J.bearing&&($e=!0,Ce.bearing=+J.bearing),"pitch"in J&&Ce.pitch!==+J.pitch&&(ht=!0,Ce.pitch=+J.pitch),J.padding!=null&&!Ce.isPaddingEqual(J.padding)&&(Ce.padding=J.padding),this.fire(new e.Event("movestart",ge)).fire(new e.Event("move",ge)),Fe&&this.fire(new e.Event("zoomstart",ge)).fire(new e.Event("zoom",ge)).fire(new e.Event("zoomend",ge)),$e&&this.fire(new e.Event("rotatestart",ge)).fire(new e.Event("rotate",ge)).fire(new e.Event("rotateend",ge)),ht&&this.fire(new e.Event("pitchstart",ge)).fire(new e.Event("pitch",ge)).fire(new e.Event("pitchend",ge)),this.fire(new e.Event("moveend",ge))},W.prototype.easeTo=function(J,ge){var Ce=this;this._stop(!1,J.easeId),J=e.extend({offset:[0,0],duration:500,easing:e.ease},J),(J.animate===!1||!J.essential&&e.browser.prefersReducedMotion)&&(J.duration=0);var Fe=this.transform,$e=this.getZoom(),ht=this.getBearing(),Dt=this.getPitch(),er=this.getPadding(),pr="zoom"in J?+J.zoom:$e,yr="bearing"in J?this._normalizeBearing(J.bearing,ht):ht,Rr="pitch"in J?+J.pitch:Dt,Zr="padding"in J?J.padding:Fe.padding,Jr=e.Point.convert(J.offset),Xr=Fe.centerPoint.add(Jr),rn=Fe.pointLocation(Xr),xn=e.LngLat.convert(J.center||rn);this._normalizeCenter(xn);var Fn=Fe.project(rn),Gn=Fe.project(xn).sub(Fn),oa=Fe.zoomScale(pr-$e),ca,la;J.around&&(ca=e.LngLat.convert(J.around),la=Fe.locationPoint(ca));var wa={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||pr!==$e,this._rotating=this._rotating||ht!==yr,this._pitching=this._pitching||Rr!==Dt,this._padding=!Fe.isPaddingEqual(Zr),this._easeId=J.easeId,this._prepareEase(ge,J.noMoveStart,wa),clearTimeout(this._easeEndTimeoutID),this._ease(function(La){if(Ce._zooming&&(Fe.zoom=e.number($e,pr,La)),Ce._rotating&&(Fe.bearing=e.number(ht,yr,La)),Ce._pitching&&(Fe.pitch=e.number(Dt,Rr,La)),Ce._padding&&(Fe.interpolatePadding(er,Zr,La),Xr=Fe.centerPoint.add(Jr)),ca)Fe.setLocationAtPoint(ca,la);else{var Ca=Fe.zoomScale(Fe.zoom-$e),Fa=pr>$e?Math.min(2,oa):Math.max(.5,oa),Ba=Math.pow(Fa,1-La),ti=Fe.unproject(Fn.add(Gn.mult(La*Ba)).mult(Ca));Fe.setLocationAtPoint(Fe.renderWorldCopies?ti.wrap():ti,Xr)}Ce._fireMoveEvents(ge)},function(La){Ce._afterEase(ge,La)},J),this},W.prototype._prepareEase=function(J,ge,Ce){Ce===void 0&&(Ce={}),this._moving=!0,!ge&&!Ce.moving&&this.fire(new e.Event("movestart",J)),this._zooming&&!Ce.zooming&&this.fire(new e.Event("zoomstart",J)),this._rotating&&!Ce.rotating&&this.fire(new e.Event("rotatestart",J)),this._pitching&&!Ce.pitching&&this.fire(new e.Event("pitchstart",J))},W.prototype._fireMoveEvents=function(J){this.fire(new e.Event("move",J)),this._zooming&&this.fire(new e.Event("zoom",J)),this._rotating&&this.fire(new e.Event("rotate",J)),this._pitching&&this.fire(new e.Event("pitch",J))},W.prototype._afterEase=function(J,ge){if(!(this._easeId&&ge&&this._easeId===ge)){delete this._easeId;var Ce=this._zooming,Fe=this._rotating,$e=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ce&&this.fire(new e.Event("zoomend",J)),Fe&&this.fire(new e.Event("rotateend",J)),$e&&this.fire(new e.Event("pitchend",J)),this.fire(new e.Event("moveend",J))}},W.prototype.flyTo=function(J,ge){var Ce=this;if(!J.essential&&e.browser.prefersReducedMotion){var Fe=e.pick(J,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Fe,ge)}this.stop(),J=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},J);var $e=this.transform,ht=this.getZoom(),Dt=this.getBearing(),er=this.getPitch(),pr=this.getPadding(),yr="zoom"in J?e.clamp(+J.zoom,$e.minZoom,$e.maxZoom):ht,Rr="bearing"in J?this._normalizeBearing(J.bearing,Dt):Dt,Zr="pitch"in J?+J.pitch:er,Jr="padding"in J?J.padding:$e.padding,Xr=$e.zoomScale(yr-ht),rn=e.Point.convert(J.offset),xn=$e.centerPoint.add(rn),Fn=$e.pointLocation(xn),Gn=e.LngLat.convert(J.center||Fn);this._normalizeCenter(Gn);var oa=$e.project(Fn),ca=$e.project(Gn).sub(oa),la=J.curve,wa=Math.max($e.width,$e.height),La=wa/Xr,Ca=ca.mag();if("minZoom"in J){var Fa=e.clamp(Math.min(J.minZoom,ht,yr),$e.minZoom,$e.maxZoom),Ba=wa/$e.zoomScale(Fa-ht);la=Math.sqrt(Ba/Ca*2)}var ti=la*la;function pi(gi){var Oi=(La*La-wa*wa+(gi?-1:1)*ti*ti*Ca*Ca)/(2*(gi?La:wa)*ti*Ca);return Math.log(Math.sqrt(Oi*Oi+1)-Oi)}function Yi(gi){return(Math.exp(gi)-Math.exp(-gi))/2}function xi(gi){return(Math.exp(gi)+Math.exp(-gi))/2}function Ci(gi){return Yi(gi)/xi(gi)}var $a=pi(0),Wi=function(gi){return xi($a)/xi($a+la*gi)},Qi=function(gi){return wa*((xi($a)*Ci($a+la*gi)-Yi($a))/ti)/Ca},to=(pi(1)-$a)/la;if(Math.abs(Ca)<1e-6||!isFinite(to)){if(Math.abs(wa-La)<1e-6)return this.easeTo(J,ge);var Ii=La<wa?-1:1;to=Math.abs(Math.log(La/wa))/la,Qi=function(){return 0},Wi=function(gi){return Math.exp(Ii*la*gi)}}if("duration"in J)J.duration=+J.duration;else{var vo="screenSpeed"in J?+J.screenSpeed/la:+J.speed;J.duration=1e3*to/vo}return J.maxDuration&&J.duration>J.maxDuration&&(J.duration=0),this._zooming=!0,this._rotating=Dt!==Rr,this._pitching=Zr!==er,this._padding=!$e.isPaddingEqual(Jr),this._prepareEase(ge,!1),this._ease(function(gi){var Oi=gi*to,Go=1/Wi(Oi);$e.zoom=gi===1?yr:ht+$e.scaleZoom(Go),Ce._rotating&&($e.bearing=e.number(Dt,Rr,gi)),Ce._pitching&&($e.pitch=e.number(er,Zr,gi)),Ce._padding&&($e.interpolatePadding(pr,Jr,gi),xn=$e.centerPoint.add(rn));var is=gi===1?Gn:$e.unproject(oa.add(ca.mult(Qi(Oi))).mult(Go));$e.setLocationAtPoint($e.renderWorldCopies?is.wrap():is,xn),Ce._fireMoveEvents(ge)},function(){return Ce._afterEase(ge)},J),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(J,ge){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ce=this._onEaseEnd;delete this._onEaseEnd,Ce.call(this,ge)}if(!J){var Fe=this.handlers;Fe&&Fe.stop()}return this},W.prototype._ease=function(J,ge,Ce){Ce.animate===!1||Ce.duration===0?(J(1),ge()):(this._easeStart=e.browser.now(),this._easeOptions=Ce,this._onEaseFrame=J,this._onEaseEnd=ge,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var J=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(J)),J<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(J,ge){J=e.wrap(J,-180,180);var Ce=Math.abs(J-ge);return Math.abs(J-360-ge)<Ce&&(J-=360),Math.abs(J+360-ge)<Ce&&(J+=360),J},W.prototype._normalizeCenter=function(J){var ge=this.transform;if(!(!ge.renderWorldCopies||ge.lngRange)){var Ce=J.lng-ge.center.lng;J.lng+=Ce>180?-360:Ce<-180?360:0}},W}(e.Evented),yu=function(W){W===void 0&&(W={}),this.options=W,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};yu.prototype.getDefaultPosition=function(){return"bottom-right"},yu.prototype.onAdd=function(W){var de=this.options&&this.options.compact;return this._map=W,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),de&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),de===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},yu.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},yu.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var de=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(W){var J=de.reduce(function(ge,Ce,Fe){return Ce.value&&(ge+=Ce.key+"="+Ce.value+(Fe<de.length-1?"&":"")),ge},"?");W.href=e.config.FEEDBACK_URL+"/"+J+(this._map._hash?this._map._hash.getHashString(!0):""),W.rel="noopener nofollow"}},yu.prototype._updateData=function(W){W&&(W.sourceDataType==="metadata"||W.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},yu.prototype._updateAttributions=function(){if(!!this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(ht){return typeof ht!="string"?"":ht})):typeof this.options.customAttribution=="string"&&W.push(this.options.customAttribution)),this._map.style.stylesheet){var de=this._map.style.stylesheet;this.styleOwner=de.owner,this.styleId=de.id}var J=this._map.style.sourceCaches;for(var ge in J){var Ce=J[ge];if(Ce.used){var Fe=Ce.getSource();Fe.attribution&&W.indexOf(Fe.attribution)<0&&W.push(Fe.attribution)}}W.sort(function(ht,Dt){return ht.length-Dt.length}),W=W.filter(function(ht,Dt){for(var er=Dt+1;er<W.length;er++)if(W[er].indexOf(ht)>=0)return!1;return!0});var $e=W.join(" | ");$e!==this._attribHTML&&(this._attribHTML=$e,W.length?(this._innerContainer.innerHTML=$e,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},yu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var qi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};qi.prototype.onAdd=function(W){this._map=W,this._container=i.create("div","mapboxgl-ctrl");var de=i.create("a","mapboxgl-ctrl-logo");return de.target="_blank",de.rel="noopener nofollow",de.href="https://www.mapbox.com/",de.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),de.setAttribute("rel","noopener nofollow"),this._container.appendChild(de),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},qi.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},qi.prototype.getDefaultPosition=function(){return"bottom-left"},qi.prototype._updateLogo=function(W){(!W||W.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},qi.prototype._logoRequired=function(){if(!!this._map.style){var W=this._map.style.sourceCaches;for(var de in W){var J=W[de].getSource();if(J.mapbox_logo)return!0}return!1}},qi.prototype._updateCompact=function(){var W=this._container.children;if(W.length){var de=W[0];this._map.getCanvasContainer().offsetWidth<250?de.classList.add("mapboxgl-compact"):de.classList.remove("mapboxgl-compact")}};var es=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};es.prototype.add=function(W){var de=++this._id,J=this._queue;return J.push({callback:W,id:de,cancelled:!1}),de},es.prototype.remove=function(W){for(var de=this._currentlyRunning,J=de?this._queue.concat(de):this._queue,ge=0,Ce=J;ge<Ce.length;ge+=1){var Fe=Ce[ge];if(Fe.id===W){Fe.cancelled=!0;return}}},es.prototype.run=function(W){W===void 0&&(W=0);var de=this._currentlyRunning=this._queue;this._queue=[];for(var J=0,ge=de;J<ge.length;J+=1){var Ce=ge[J];if(!Ce.cancelled&&(Ce.callback(W),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},es.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Nd={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},vh=e.window.HTMLImageElement,zf=e.window.HTMLElement,kc=e.window.ImageBitmap,of=-2,ph=22,_l=0,Cc=60,gv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:of,maxZoom:ph,minPitch:_l,maxPitch:Cc,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},mv=function(ve){function W(J){var ge=this;if(J=e.extend({},gv,J),J.minZoom!=null&&J.maxZoom!=null&&J.minZoom>J.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(J.minPitch!=null&&J.maxPitch!=null&&J.minPitch>J.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(J.minPitch!=null&&J.minPitch<_l)throw new Error("minPitch must be greater than or equal to "+_l);if(J.maxPitch!=null&&J.maxPitch>Cc)throw new Error("maxPitch must be less than or equal to "+Cc);var Ce=new ta(J.minZoom,J.maxZoom,J.minPitch,J.maxPitch,J.renderWorldCopies);if(ve.call(this,Ce,J),this._interactive=J.interactive,this._maxTileCacheSize=J.maxTileCacheSize,this._failIfMajorPerformanceCaveat=J.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=J.preserveDrawingBuffer,this._antialias=J.antialias,this._trackResize=J.trackResize,this._bearingSnap=J.bearingSnap,this._refreshExpiredTiles=J.refreshExpiredTiles,this._fadeDuration=J.fadeDuration,this._crossSourceCollisions=J.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=J.collectResourceTiming,this._renderTaskQueue=new es,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Nd,J.locale),this._requestManager=new e.RequestManager(J.transformRequest,J.accessToken),typeof J.container=="string"){if(this._container=e.window.document.getElementById(J.container),!this._container)throw new Error("Container '"+J.container+"' not found.")}else if(J.container instanceof zf)this._container=J.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(J.maxBounds&&this.setMaxBounds(J.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ge._update(!1)}),this.on("moveend",function(){return ge._update(!1)}),this.on("zoom",function(){return ge._update(!0)}),typeof e.window<"u"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ho(this,J);var Fe=typeof J.hash=="string"&&J.hash||void 0;this._hash=J.hash&&new Di(Fe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:J.center,zoom:J.zoom,bearing:J.bearing,pitch:J.pitch}),J.bounds&&(this.resize(),this.fitBounds(J.bounds,e.extend({},J.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=J.localIdeographFontFamily,J.style&&this.setStyle(J.style,{localIdeographFontFamily:J.localIdeographFontFamily}),J.attributionControl&&this.addControl(new yu({customAttribution:J.customAttribution})),this.addControl(new qi,J.logoPosition),this.on("style.load",function(){ge.transform.unmodified&&ge.jumpTo(ge.style.stylesheet)}),this.on("data",function($e){ge._update($e.dataType==="style"),ge.fire(new e.Event($e.dataType+"data",$e))}),this.on("dataloading",function($e){ge.fire(new e.Event($e.dataType+"dataloading",$e))})}ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W;var de={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(ge,Ce){if(Ce===void 0&&ge.getDefaultPosition&&(Ce=ge.getDefaultPosition()),Ce===void 0&&(Ce="top-right"),!ge||!ge.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Fe=ge.onAdd(this);this._controls.push(ge);var $e=this._controlPositions[Ce];return Ce.indexOf("bottom")!==-1?$e.insertBefore(Fe,$e.firstChild):$e.appendChild(Fe),this},W.prototype.removeControl=function(ge){if(!ge||!ge.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=this._controls.indexOf(ge);return Ce>-1&&this._controls.splice(Ce,1),ge.onRemove(this),this},W.prototype.resize=function(ge){var Ce=this._containerDimensions(),Fe=Ce[0],$e=Ce[1];this._resizeCanvas(Fe,$e),this.transform.resize(Fe,$e),this.painter.resize(Fe,$e);var ht=!this._moving;return ht&&(this.stop(),this.fire(new e.Event("movestart",ge)).fire(new e.Event("move",ge))),this.fire(new e.Event("resize",ge)),ht&&this.fire(new e.Event("moveend",ge)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(ge){return this.transform.setMaxBounds(e.LngLatBounds.convert(ge)),this._update()},W.prototype.setMinZoom=function(ge){if(ge=ge==null?of:ge,ge>=of&&ge<=this.transform.maxZoom)return this.transform.minZoom=ge,this._update(),this.getZoom()<ge&&this.setZoom(ge),this;throw new Error("minZoom must be between "+of+" and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(ge){if(ge=ge==null?ph:ge,ge>=this.transform.minZoom)return this.transform.maxZoom=ge,this._update(),this.getZoom()>ge&&this.setZoom(ge),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(ge){if(ge=ge==null?_l:ge,ge<_l)throw new Error("minPitch must be greater than or equal to "+_l);if(ge>=_l&&ge<=this.transform.maxPitch)return this.transform.minPitch=ge,this._update(),this.getPitch()<ge&&this.setPitch(ge),this;throw new Error("minPitch must be between "+_l+" and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(ge){if(ge=ge==null?Cc:ge,ge>Cc)throw new Error("maxPitch must be less than or equal to "+Cc);if(ge>=this.transform.minPitch)return this.transform.maxPitch=ge,this._update(),this.getPitch()>ge&&this.setPitch(ge),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(ge){return this.transform.renderWorldCopies=ge,this._update()},W.prototype.project=function(ge){return this.transform.locationPoint(e.LngLat.convert(ge))},W.prototype.unproject=function(ge){return this.transform.pointLocation(e.Point.convert(ge))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(ge,Ce,Fe){var $e=this,ht;if(ge==="mouseenter"||ge==="mouseover"){var Dt=!1,er=function(Xr){var rn=$e.getLayer(Ce)?$e.queryRenderedFeatures(Xr.point,{layers:[Ce]}):[];rn.length?Dt||(Dt=!0,Fe.call($e,new wt(ge,$e,Xr.originalEvent,{features:rn}))):Dt=!1},pr=function(){Dt=!1};return{layer:Ce,listener:Fe,delegates:{mousemove:er,mouseout:pr}}}else if(ge==="mouseleave"||ge==="mouseout"){var yr=!1,Rr=function(Xr){var rn=$e.getLayer(Ce)?$e.queryRenderedFeatures(Xr.point,{layers:[Ce]}):[];rn.length?yr=!0:yr&&(yr=!1,Fe.call($e,new wt(ge,$e,Xr.originalEvent)))},Zr=function(Xr){yr&&(yr=!1,Fe.call($e,new wt(ge,$e,Xr.originalEvent)))};return{layer:Ce,listener:Fe,delegates:{mousemove:Rr,mouseout:Zr}}}else{var Jr=function(Xr){var rn=$e.getLayer(Ce)?$e.queryRenderedFeatures(Xr.point,{layers:[Ce]}):[];rn.length&&(Xr.features=rn,Fe.call($e,Xr),delete Xr.features)};return{layer:Ce,listener:Fe,delegates:(ht={},ht[ge]=Jr,ht)}}},W.prototype.on=function(ge,Ce,Fe){if(Fe===void 0)return ve.prototype.on.call(this,ge,Ce);var $e=this._createDelegatedListener(ge,Ce,Fe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ge]=this._delegatedListeners[ge]||[],this._delegatedListeners[ge].push($e);for(var ht in $e.delegates)this.on(ht,$e.delegates[ht]);return this},W.prototype.once=function(ge,Ce,Fe){if(Fe===void 0)return ve.prototype.once.call(this,ge,Ce);var $e=this._createDelegatedListener(ge,Ce,Fe);for(var ht in $e.delegates)this.once(ht,$e.delegates[ht]);return this},W.prototype.off=function(ge,Ce,Fe){var $e=this;if(Fe===void 0)return ve.prototype.off.call(this,ge,Ce);var ht=function(Dt){for(var er=Dt[ge],pr=0;pr<er.length;pr++){var yr=er[pr];if(yr.layer===Ce&&yr.listener===Fe){for(var Rr in yr.delegates)$e.off(Rr,yr.delegates[Rr]);return er.splice(pr,1),$e}}};return this._delegatedListeners&&this._delegatedListeners[ge]&&ht(this._delegatedListeners),this},W.prototype.queryRenderedFeatures=function(ge,Ce){if(!this.style)return[];Ce===void 0&&ge!==void 0&&!(ge instanceof e.Point)&&!Array.isArray(ge)&&(Ce=ge,ge=void 0),Ce=Ce||{},ge=ge||[[0,0],[this.transform.width,this.transform.height]];var Fe;if(ge instanceof e.Point||typeof ge[0]=="number")Fe=[e.Point.convert(ge)];else{var $e=e.Point.convert(ge[0]),ht=e.Point.convert(ge[1]);Fe=[$e,new e.Point(ht.x,$e.y),ht,new e.Point($e.x,ht.y),$e]}return this.style.queryRenderedFeatures(Fe,Ce,this.transform)},W.prototype.querySourceFeatures=function(ge,Ce){return this.style.querySourceFeatures(ge,Ce)},W.prototype.setStyle=function(ge,Ce){return Ce=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ce),Ce.diff!==!1&&Ce.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ge?(this._diffStyle(ge,Ce),this):(this._localIdeographFontFamily=Ce.localIdeographFontFamily,this._updateStyle(ge,Ce))},W.prototype._getUIString=function(ge){var Ce=this._locale[ge];if(Ce==null)throw new Error("Missing UI string '"+ge+"'");return Ce},W.prototype._updateStyle=function(ge,Ce){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ge)this.style=new Qo(this,Ce||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ge=="string"?this.style.loadURL(ge):this.style.loadJSON(ge),this},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Qo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(ge,Ce){var Fe=this;if(typeof ge=="string"){var $e=this._requestManager.normalizeStyleURL(ge),ht=this._requestManager.transformRequest($e,e.ResourceType.Style);e.getJSON(ht,function(Dt,er){Dt?Fe.fire(new e.ErrorEvent(Dt)):er&&Fe._updateDiff(er,Ce)})}else typeof ge=="object"&&this._updateDiff(ge,Ce)},W.prototype._updateDiff=function(ge,Ce){try{this.style.setState(ge)&&this._update(!0)}catch(Fe){e.warnOnce("Unable to perform style diff: "+(Fe.message||Fe.error||Fe)+".  Rebuilding the style from scratch."),this._updateStyle(ge,Ce)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(ge,Ce){return this._lazyInitEmptyStyle(),this.style.addSource(ge,Ce),this._update(!0)},W.prototype.isSourceLoaded=function(ge){var Ce=this.style&&this.style.sourceCaches[ge];if(Ce===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+ge+"'")));return}return Ce.loaded()},W.prototype.areTilesLoaded=function(){var ge=this.style&&this.style.sourceCaches;for(var Ce in ge){var Fe=ge[Ce],$e=Fe._tiles;for(var ht in $e){var Dt=$e[ht];if(!(Dt.state==="loaded"||Dt.state==="errored"))return!1}}return!0},W.prototype.addSourceType=function(ge,Ce,Fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ge,Ce,Fe)},W.prototype.removeSource=function(ge){return this.style.removeSource(ge),this._update(!0)},W.prototype.getSource=function(ge){return this.style.getSource(ge)},W.prototype.addImage=function(ge,Ce,Fe){Fe===void 0&&(Fe={});var $e=Fe.pixelRatio;$e===void 0&&($e=1);var ht=Fe.sdf;ht===void 0&&(ht=!1);var Dt=Fe.stretchX,er=Fe.stretchY,pr=Fe.content;this._lazyInitEmptyStyle();var yr=0;if(Ce instanceof vh||kc&&Ce instanceof kc){var Rr=e.browser.getImageData(Ce),Zr=Rr.width,Jr=Rr.height,Xr=Rr.data;this.style.addImage(ge,{data:new e.RGBAImage({width:Zr,height:Jr},Xr),pixelRatio:$e,stretchX:Dt,stretchY:er,content:pr,sdf:ht,version:yr})}else{if(Ce.width===void 0||Ce.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var rn=Ce.width,xn=Ce.height,Fn=Ce.data,Gn=Ce;this.style.addImage(ge,{data:new e.RGBAImage({width:rn,height:xn},new Uint8Array(Fn)),pixelRatio:$e,stretchX:Dt,stretchY:er,content:pr,sdf:ht,version:yr,userImage:Gn}),Gn.onAdd&&Gn.onAdd(this,ge)}},W.prototype.updateImage=function(ge,Ce){var Fe=this.style.getImage(ge);if(!Fe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var $e=Ce instanceof vh||kc&&Ce instanceof kc?e.browser.getImageData(Ce):Ce,ht=$e.width,Dt=$e.height,er=$e.data;if(ht===void 0||Dt===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ht!==Fe.data.width||Dt!==Fe.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var pr=!(Ce instanceof vh||kc&&Ce instanceof kc);Fe.data.replace(er,pr),this.style.updateImage(ge,Fe)},W.prototype.hasImage=function(ge){return ge?!!this.style.getImage(ge):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(ge){this.style.removeImage(ge)},W.prototype.loadImage=function(ge,Ce){e.getImage(this._requestManager.transformRequest(ge,e.ResourceType.Image),Ce)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(ge,Ce){return this._lazyInitEmptyStyle(),this.style.addLayer(ge,Ce),this._update(!0)},W.prototype.moveLayer=function(ge,Ce){return this.style.moveLayer(ge,Ce),this._update(!0)},W.prototype.removeLayer=function(ge){return this.style.removeLayer(ge),this._update(!0)},W.prototype.getLayer=function(ge){return this.style.getLayer(ge)},W.prototype.setLayerZoomRange=function(ge,Ce,Fe){return this.style.setLayerZoomRange(ge,Ce,Fe),this._update(!0)},W.prototype.setFilter=function(ge,Ce,Fe){return Fe===void 0&&(Fe={}),this.style.setFilter(ge,Ce,Fe),this._update(!0)},W.prototype.getFilter=function(ge){return this.style.getFilter(ge)},W.prototype.setPaintProperty=function(ge,Ce,Fe,$e){return $e===void 0&&($e={}),this.style.setPaintProperty(ge,Ce,Fe,$e),this._update(!0)},W.prototype.getPaintProperty=function(ge,Ce){return this.style.getPaintProperty(ge,Ce)},W.prototype.setLayoutProperty=function(ge,Ce,Fe,$e){return $e===void 0&&($e={}),this.style.setLayoutProperty(ge,Ce,Fe,$e),this._update(!0)},W.prototype.getLayoutProperty=function(ge,Ce){return this.style.getLayoutProperty(ge,Ce)},W.prototype.setLight=function(ge,Ce){return Ce===void 0&&(Ce={}),this._lazyInitEmptyStyle(),this.style.setLight(ge,Ce),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(ge,Ce){return this.style.setFeatureState(ge,Ce),this._update()},W.prototype.removeFeatureState=function(ge,Ce){return this.style.removeFeatureState(ge,Ce),this._update()},W.prototype.getFeatureState=function(ge){return this.style.getFeatureState(ge)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var ge=0,Ce=0;return this._container&&(ge=this._container.clientWidth||400,Ce=this._container.clientHeight||300),[ge,Ce]},W.prototype._detectMissingCSS=function(){var ge=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ge!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var ge=this._container;ge.classList.add("mapboxgl-map");var Ce=this._missingCSSCanary=i.create("div","mapboxgl-canary",ge);Ce.style.visibility="hidden",this._detectMissingCSS();var Fe=this._canvasContainer=i.create("div","mapboxgl-canvas-container",ge);this._interactive&&Fe.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",Fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var $e=this._containerDimensions();this._resizeCanvas($e[0],$e[1]);var ht=this._controlContainer=i.create("div","mapboxgl-control-container",ge),Dt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(er){Dt[er]=i.create("div","mapboxgl-ctrl-"+er,ht)})},W.prototype._resizeCanvas=function(ge,Ce){var Fe=e.browser.devicePixelRatio||1;this._canvas.width=Fe*ge,this._canvas.height=Fe*Ce,this._canvas.style.width=ge+"px",this._canvas.style.height=Ce+"px"},W.prototype._setupPainter=function(){var ge=e.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ce=this._canvas.getContext("webgl",ge)||this._canvas.getContext("experimental-webgl",ge);if(!Ce){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new et(Ce,this.transform),e.webpSupported.testSupport(Ce)},W.prototype._contextLost=function(ge){ge.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:ge}))},W.prototype._contextRestored=function(ge){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:ge}))},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(ge){return this.style?(this._styleDirty=this._styleDirty||ge,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(ge){return this._update(),this._renderTaskQueue.add(ge)},W.prototype._cancelRenderFrame=function(ge){this._renderTaskQueue.remove(ge)},W.prototype._render=function(ge){var Ce=this,Fe,$e=0,ht=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Fe=ht.createQueryEXT(),ht.beginQueryEXT(ht.TIME_ELAPSED_EXT,Fe),$e=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ge),!this._removed){var Dt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var er=this.transform.zoom,pr=e.browser.now();this.style.zoomHistory.update(er,pr);var yr=new e.EvaluationParameters(er,{now:pr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Rr=yr.crossFadingFactor();(Rr!==1||Rr!==this._crossFadingFactor)&&(Dt=!0,this._crossFadingFactor=Rr),this.style.update(yr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Dt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Zr=e.browser.now()-$e;ht.endQueryEXT(ht.TIME_ELAPSED_EXT,Fe),setTimeout(function(){var rn=ht.getQueryObjectEXT(Fe,ht.QUERY_RESULT_EXT)/1e6;ht.deleteQueryEXT(Fe),Ce.fire(new e.Event("gpu-timing-frame",{cpuTime:Zr,gpuTime:rn}))},50)}if(this.listens("gpu-timing-layer")){var Jr=this.painter.collectGpuTimers();setTimeout(function(){var rn=Ce.painter.queryGpuTimers(Jr);Ce.fire(new e.Event("gpu-timing-layer",{layerTimes:rn}))},50)}var Xr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Xr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var ge=0,Ce=this._controls;ge<Ce.length;ge+=1){var Fe=Ce[ge];Fe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window<"u"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var $e=this.painter.context.gl.getExtension("WEBGL_lose_context");$e&&$e.loseContext(),Of(this._canvasContainer),Of(this._controlContainer),Of(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},W.prototype.triggerRepaint=function(){var ge=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ce){ge._frame=null,ge._render(Ce)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(ge){this._trackResize&&this.resize({originalEvent:ge})._update()},de.showTileBoundaries.get=function(){return!!this._showTileBoundaries},de.showTileBoundaries.set=function(J){this._showTileBoundaries!==J&&(this._showTileBoundaries=J,this._update())},de.showPadding.get=function(){return!!this._showPadding},de.showPadding.set=function(J){this._showPadding!==J&&(this._showPadding=J,this._update())},de.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},de.showCollisionBoxes.set=function(J){this._showCollisionBoxes!==J&&(this._showCollisionBoxes=J,J?this.style._generateCollisionBoxes():this._update())},de.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},de.showOverdrawInspector.set=function(J){this._showOverdrawInspector!==J&&(this._showOverdrawInspector=J,this._update())},de.repaint.get=function(){return!!this._repaint},de.repaint.set=function(J){this._repaint!==J&&(this._repaint=J,this.triggerRepaint())},de.vertices.get=function(){return!!this._vertices},de.vertices.set=function(J){this._vertices=J,this._update()},W.prototype._setCacheLimits=function(ge,Ce){e.setCacheLimits(ge,Ce)},de.version.get=function(){return e.version},Object.defineProperties(W.prototype,de),W}(af);function Of(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}var dh={showCompass:!0,showZoom:!0,visualizePitch:!1},gc=function(W){var de=this;this.options=e.extend({},dh,W),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(J){return J.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(J){return de._map.zoomIn({},{originalEvent:J})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(J){return de._map.zoomOut({},{originalEvent:J})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(J){de.options.visualizePitch?de._map.resetNorthPitch({},{originalEvent:J}):de._map.resetNorth({},{originalEvent:J})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};gc.prototype._updateZoomButtons=function(){var W=this._map.getZoom();this._zoomInButton.disabled=W===this._map.getMaxZoom(),this._zoomOutButton.disabled=W===this._map.getMinZoom()},gc.prototype._rotateCompassArrow=function(){var W=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=W},gc.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Nl(this._map,this._compass,this.options.visualizePitch)),this._container},gc.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},gc.prototype._createButton=function(W,de){var J=i.create("button",W,this._container);return J.type="button",J.addEventListener("click",de),J},gc.prototype._setButtonTitle=function(W,de){var J=this._map._getUIString("NavigationControl."+de);W.title=J,W.setAttribute("aria-label",J)};var Nl=function(W,de,J){J===void 0&&(J=!1),this._clickTolerance=10,this.element=de,this.mouseRotate=new pa({clickTolerance:W.dragRotate._mouseRotate._clickTolerance}),this.map=W,J&&(this.mousePitch=new Na({clickTolerance:W.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(de,"mousedown",this.mousedown),i.addEventListener(de,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(de,"touchmove",this.touchmove),i.addEventListener(de,"touchend",this.touchend),i.addEventListener(de,"touchcancel",this.reset)};Nl.prototype.down=function(W,de){this.mouseRotate.mousedown(W,de),this.mousePitch&&this.mousePitch.mousedown(W,de),i.disableDrag()},Nl.prototype.move=function(W,de){var J=this.map,ge=this.mouseRotate.mousemoveWindow(W,de);if(ge&&ge.bearingDelta&&J.setBearing(J.getBearing()+ge.bearingDelta),this.mousePitch){var Ce=this.mousePitch.mousemoveWindow(W,de);Ce&&Ce.pitchDelta&&J.setPitch(J.getPitch()+Ce.pitchDelta)}},Nl.prototype.off=function(){var W=this.element;i.removeEventListener(W,"mousedown",this.mousedown),i.removeEventListener(W,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(W,"touchmove",this.touchmove),i.removeEventListener(W,"touchend",this.touchend),i.removeEventListener(W,"touchcancel",this.reset),this.offTemp()},Nl.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)},Nl.prototype.mousedown=function(W){this.down(e.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),i.mousePos(this.element,W)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)},Nl.prototype.mousemove=function(W){this.move(W,i.mousePos(this.element,W))},Nl.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W),this.mousePitch&&this.mousePitch.mouseupWindow(W),this.offTemp()},Nl.prototype.touchstart=function(W){W.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))},Nl.prototype.touchmove=function(W){W.targetTouches.length!==1?this.reset():(this._lastPos=i.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},this._lastPos))},Nl.prototype.touchend=function(W){W.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Nl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function mc(ve,W,de){if(ve=new e.LngLat(ve.lng,ve.lat),W){var J=new e.LngLat(ve.lng-360,ve.lat),ge=new e.LngLat(ve.lng+360,ve.lat),Ce=de.locationPoint(ve).distSqr(W);de.locationPoint(J).distSqr(W)<Ce?ve=J:de.locationPoint(ge).distSqr(W)<Ce&&(ve=ge)}for(;Math.abs(ve.lng-de.center.lng)>180;){var Fe=de.locationPoint(ve);if(Fe.x>=0&&Fe.y>=0&&Fe.x<=de.width&&Fe.y<=de.height)break;ve.lng>de.center.lng?ve.lng-=360:ve.lng+=360}return ve}var Nf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gh(ve,W,de){var J=ve.classList;for(var ge in Nf)J.remove("mapboxgl-"+de+"-anchor-"+ge);J.add("mapboxgl-"+de+"-anchor-"+W)}var sf=function(ve){function W(de,J){var ge=this;if(ve.call(this),(de instanceof e.window.HTMLElement||J)&&(de=e.extend({element:de},J)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=de&&de.anchor||"center",this._color=de&&de.color||"#3FB1CE",this._draggable=de&&de.draggable||!1,this._state="inactive",this._rotation=de&&de.rotation||0,this._rotationAlignment=de&&de.rotationAlignment||"auto",this._pitchAlignment=de&&de.pitchAlignment&&de.pitchAlignment!=="auto"?de.pitchAlignment:this._rotationAlignment,!de||!de.element){this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var Ce=i.createNS("http://www.w3.org/2000/svg","svg");Ce.setAttributeNS(null,"display","block"),Ce.setAttributeNS(null,"height","41px"),Ce.setAttributeNS(null,"width","27px"),Ce.setAttributeNS(null,"viewBox","0 0 27 41");var Fe=i.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"stroke","none"),Fe.setAttributeNS(null,"stroke-width","1"),Fe.setAttributeNS(null,"fill","none"),Fe.setAttributeNS(null,"fill-rule","evenodd");var $e=i.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"fill-rule","nonzero");var ht=i.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ht.setAttributeNS(null,"fill","#000000");for(var Dt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],er=0,pr=Dt;er<pr.length;er+=1){var yr=pr[er],Rr=i.createNS("http://www.w3.org/2000/svg","ellipse");Rr.setAttributeNS(null,"opacity","0.04"),Rr.setAttributeNS(null,"cx","10.5"),Rr.setAttributeNS(null,"cy","5.80029008"),Rr.setAttributeNS(null,"rx",yr.rx),Rr.setAttributeNS(null,"ry",yr.ry),ht.appendChild(Rr)}var Zr=i.createNS("http://www.w3.org/2000/svg","g");Zr.setAttributeNS(null,"fill",this._color);var Jr=i.createNS("http://www.w3.org/2000/svg","path");Jr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Zr.appendChild(Jr);var Xr=i.createNS("http://www.w3.org/2000/svg","g");Xr.setAttributeNS(null,"opacity","0.25"),Xr.setAttributeNS(null,"fill","#000000");var rn=i.createNS("http://www.w3.org/2000/svg","path");rn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Xr.appendChild(rn);var xn=i.createNS("http://www.w3.org/2000/svg","g");xn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),xn.setAttributeNS(null,"fill","#FFFFFF");var Fn=i.createNS("http://www.w3.org/2000/svg","g");Fn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Gn=i.createNS("http://www.w3.org/2000/svg","circle");Gn.setAttributeNS(null,"fill","#000000"),Gn.setAttributeNS(null,"opacity","0.25"),Gn.setAttributeNS(null,"cx","5.5"),Gn.setAttributeNS(null,"cy","5.5"),Gn.setAttributeNS(null,"r","5.4999962");var oa=i.createNS("http://www.w3.org/2000/svg","circle");oa.setAttributeNS(null,"fill","#FFFFFF"),oa.setAttributeNS(null,"cx","5.5"),oa.setAttributeNS(null,"cy","5.5"),oa.setAttributeNS(null,"r","5.4999962"),Fn.appendChild(Gn),Fn.appendChild(oa),$e.appendChild(ht),$e.appendChild(Zr),$e.appendChild(Xr),$e.appendChild(xn),$e.appendChild(Fn),Ce.appendChild($e),this._element.appendChild(Ce),this._offset=e.Point.convert(de&&de.offset||[0,-14])}else this._element=de.element,this._offset=e.Point.convert(de&&de.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ca){ca.preventDefault()}),this._element.addEventListener("mousedown",function(ca){ca.preventDefault()}),this._element.addEventListener("focus",function(){var ca=ge._map.getContainer();ca.scrollTop=0,ca.scrollLeft=0}),gh(this._element,this._anchor,"marker"),this._popup=null}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this.remove(),this._map=J,J.getCanvasContainer().appendChild(this._element),J.on("move",this._update),J.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(J){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),J){if(!("offset"in J.options)){var ge=38.1,Ce=13.5,Fe=Math.sqrt(Math.pow(Ce,2)/2);J.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ge],"bottom-left":[Fe,(ge-Ce+Fe)*-1],"bottom-right":[-Fe,(ge-Ce+Fe)*-1],left:[Ce,(ge-Ce)*-1],right:[-Ce,(ge-Ce)*-1]}:this._offset}this._popup=J,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(J){var ge=J.code,Ce=J.charCode||J.keyCode;(ge==="Space"||ge==="Enter"||Ce===32||Ce===13)&&this.togglePopup()},W.prototype._onMapClick=function(J){var ge=J.originalEvent.target,Ce=this._element;this._popup&&(ge===Ce||Ce.contains(ge))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var J=this._popup;if(J)J.isOpen()?J.remove():J.addTo(this._map);else return this;return this},W.prototype._update=function(J){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=mc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ge="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ge="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ge="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ce="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ce="rotateX(0deg)":this._pitchAlignment==="map"&&(Ce="rotateX("+this._map.getPitch()+"deg)"),(!J||J.type==="moveend")&&(this._pos=this._pos.round()),i.setTransform(this._element,Nf[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ce+" "+ge)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(J){return this._offset=e.Point.convert(J),this._update(),this},W.prototype._onMove=function(J){this._pos=J.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(J){this._element.contains(J.originalEvent.target)&&(J.preventDefault(),this._positionDelta=J.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(J){return this._draggable=!!J,this._map&&(J?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(J){return this._rotation=J||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(J){return this._rotationAlignment=J||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(J){return this._pitchAlignment=J&&J!=="auto"?J:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(e.Evented),yv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Lc;function Bf(ve){Lc!==void 0?ve(Lc):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(W){Lc=W.state!=="denied",ve(Lc)}):(Lc=!!e.window.navigator.geolocation,ve(Lc))}var lf=0,Pc=!1,xv=function(ve){function W(de){ve.call(this),this.options=e.extend({},yv,de),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){return this._map=J,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Bf(this._setupUI),this._container},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lf=0,Pc=!1},W.prototype._isOutOfMapMaxBounds=function(J){var ge=this._map.getMaxBounds(),Ce=J.coords;return ge&&(Ce.longitude<ge.getWest()||Ce.longitude>ge.getEast()||Ce.latitude<ge.getSouth()||Ce.latitude>ge.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},W.prototype._onSuccess=function(J){if(!!this._map){if(this._isOutOfMapMaxBounds(J)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",J)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=J,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(J),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(J),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",J)),this._finish()}},W.prototype._updateCamera=function(J){var ge=new e.LngLat(J.coords.longitude,J.coords.latitude),Ce=J.coords.accuracy,Fe=this._map.getBearing(),$e=e.extend({bearing:Fe},this.options.fitBoundsOptions);this._map.fitBounds(ge.toBounds(Ce),$e,{geolocateSource:!0})},W.prototype._updateMarker=function(J){if(J){var ge=new e.LngLat(J.coords.longitude,J.coords.latitude);this._accuracyCircleMarker.setLngLat(ge).addTo(this._map),this._userLocationDotMarker.setLngLat(ge).addTo(this._map),this._accuracy=J.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var J=this._map._container.clientHeight/2,ge=this._map.unproject([0,J]),Ce=this._map.unproject([1,J]),Fe=ge.distanceTo(Ce),$e=Math.ceil(2*this._accuracy/Fe);this._circleElement.style.width=$e+"px",this._circleElement.style.height=$e+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(J){if(!!this._map){if(this.options.trackUserLocation)if(J.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ge=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ge,this._geolocateButton.setAttribute("aria-label",ge),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(J.code===3&&Pc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",J)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(J){var ge=this;if(this._container.addEventListener("contextmenu",function($e){return $e.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",J===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ce=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}else{var Fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Fe,this._geolocateButton.setAttribute("aria-label",Fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new sf(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function($e){var ht=$e.originalEvent&&$e.originalEvent.type==="resize";!$e.geolocateSource&&ge._watchState==="ACTIVE_LOCK"&&!ht&&(ge._watchState="BACKGROUND",ge._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ge._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ge.fire(new e.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lf--,Pc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),lf++;var J;lf>1?(J={maximumAge:6e5,timeout:0},Pc=!0):(J=this.options.positionOptions,Pc=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,J)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(e.Evented),hp={maxWidth:100,unit:"metric"},Dc=function(W){this.options=e.extend({},hp,W),e.bindAll(["_onMove","setUnit"],this)};Dc.prototype.getDefaultPosition=function(){return"bottom-left"},Dc.prototype._onMove=function(){bv(this._map,this._container,this.options)},Dc.prototype.onAdd=function(W){return this._map=W,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Dc.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Dc.prototype.setUnit=function(W){this.options.unit=W,bv(this._map,this._container,this.options)};function bv(ve,W,de){var J=de&&de.maxWidth||100,ge=ve._container.clientHeight/2,Ce=ve.unproject([0,ge]),Fe=ve.unproject([J,ge]),$e=Ce.distanceTo(Fe);if(de&&de.unit==="imperial"){var ht=3.2808*$e;if(ht>5280){var Dt=ht/5280;uf(W,J,Dt,ve._getUIString("ScaleControl.Miles"))}else uf(W,J,ht,ve._getUIString("ScaleControl.Feet"))}else if(de&&de.unit==="nautical"){var er=$e/1852;uf(W,J,er,ve._getUIString("ScaleControl.NauticalMiles"))}else $e>=1e3?uf(W,J,$e/1e3,ve._getUIString("ScaleControl.Kilometers")):uf(W,J,$e,ve._getUIString("ScaleControl.Meters"))}function uf(ve,W,de,J){var ge=pp(de),Ce=ge/de;ve.style.width=W*Ce+"px",ve.innerHTML=ge+"&nbsp;"+J}function vp(ve){var W=Math.pow(10,Math.ceil(-Math.log(ve)/Math.LN10));return Math.round(ve*W)/W}function pp(ve){var W=Math.pow(10,(""+Math.floor(ve)).length-1),de=ve/W;return de=de>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:vp(de),W*de}var Uu=function(W){this._fullscreen=!1,W&&W.container&&(W.container instanceof e.window.HTMLElement?this._container=W.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Uu.prototype.onAdd=function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Uu.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Uu.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Uu.prototype._setupUI=function(){var W=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0),W.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Uu.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W),this._fullscreenButton.title=W},Uu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Uu.prototype._isFullscreen=function(){return this._fullscreen},Uu.prototype._changeIcon=function(){var W=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;W===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Uu.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var dp={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},gp=function(ve){function W(de){ve.call(this),this.options=e.extend(Object.create(dp),de),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ve&&(W.__proto__=ve),W.prototype=Object.create(ve&&ve.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this._map&&this.remove(),this._map=J,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(J){return this.setDOMContent(e.window.document.createTextNode(J))},W.prototype.setHTML=function(J){var ge=e.window.document.createDocumentFragment(),Ce=e.window.document.createElement("body"),Fe;for(Ce.innerHTML=J;Fe=Ce.firstChild,!!Fe;)ge.appendChild(Fe);return this.setDOMContent(ge)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(J){return this.options.maxWidth=J,this._update(),this},W.prototype.setDOMContent=function(J){return this._createContent(),this._content.appendChild(J),this._update(),this},W.prototype.addClassName=function(J){this._container&&this._container.classList.add(J)},W.prototype.removeClassName=function(J){this._container&&this._container.classList.remove(J)},W.prototype.toggleClassName=function(J){if(this._container)return this._container.classList.toggle(J)},W.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(J){this._update(J.point)},W.prototype._onMouseMove=function(J){this._update(J.point)},W.prototype._onDrag=function(J){this._update(J.point)},W.prototype._update=function(J){var ge=this,Ce=this._lngLat||this._trackPointer;if(!(!this._map||!Ce||!this._content)&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Rr){return ge._container.classList.add(Rr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=mc(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!J))){var Fe=this._pos=this._trackPointer&&J?J:this._map.project(this._lngLat),$e=this.options.anchor,ht=_v(this.options.offset);if(!$e){var Dt=this._container.offsetWidth,er=this._container.offsetHeight,pr;Fe.y+ht.bottom.y<er?pr=["top"]:Fe.y>this._map.transform.height-er?pr=["bottom"]:pr=[],Fe.x<Dt/2?pr.push("left"):Fe.x>this._map.transform.width-Dt/2&&pr.push("right"),pr.length===0?$e="bottom":$e=pr.join("-")}var yr=Fe.add(ht[$e]).round();i.setTransform(this._container,Nf[$e]+" translate("+yr.x+"px,"+yr.y+"px)"),gh(this._container,$e,"popup")}},W.prototype._onClose=function(){this.remove()},W}(e.Evented);function _v(ve){if(ve)if(typeof ve=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(ve,2)));return{center:new e.Point(0,0),top:new e.Point(0,ve),"top-left":new e.Point(W,W),"top-right":new e.Point(-W,W),bottom:new e.Point(0,-ve),"bottom-left":new e.Point(W,-W),"bottom-right":new e.Point(-W,-W),left:new e.Point(ve,0),right:new e.Point(-ve,0)}}else if(ve instanceof e.Point||Array.isArray(ve)){var de=e.Point.convert(ve);return{center:de,top:de,"top-left":de,"top-right":de,bottom:de,"bottom-left":de,"bottom-right":de,left:de,right:de}}else return{center:e.Point.convert(ve.center||[0,0]),top:e.Point.convert(ve.top||[0,0]),"top-left":e.Point.convert(ve["top-left"]||[0,0]),"top-right":e.Point.convert(ve["top-right"]||[0,0]),bottom:e.Point.convert(ve.bottom||[0,0]),"bottom-left":e.Point.convert(ve["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(ve["bottom-right"]||[0,0]),left:e.Point.convert(ve.left||[0,0]),right:e.Point.convert(ve.right||[0,0])};else return _v(new e.Point(0,0))}var mp={version:e.version,supported:a,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:mv,NavigationControl:gc,GeolocateControl:xv,AttributionControl:yu,ScaleControl:Dc,FullscreenControl:Uu,Popup:gp,Marker:sf,Style:Qo,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:or,clearPrewarmedResources:Pr,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(ve){e.config.ACCESS_TOKEN=ve},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(ve){e.config.API_URL=ve},get workerCount(){return St.workerCount},set workerCount(ve){St.workerCount=ve},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ve){e.config.MAX_PARALLEL_IMAGE_REQUESTS=ve},clearStorage:function(W){e.clearTileCache(W)},workerUrl:""};return mp}),A})},{}],240:[function(t,N,V){N.exports=Math.log2||function(m){return Math.log(m)*Math.LOG2E}},{}],241:[function(t,N,V){N.exports=u;var m=t("mouse-event");function u(A,T){T||(T=A,A=window);var e=0,a=0,i=0,n={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function v(M){var w=!1;return"altKey"in M&&(w=w||M.altKey!==n.alt,n.alt=!!M.altKey),"shiftKey"in M&&(w=w||M.shiftKey!==n.shift,n.shift=!!M.shiftKey),"ctrlKey"in M&&(w=w||M.ctrlKey!==n.control,n.control=!!M.ctrlKey),"metaKey"in M&&(w=w||M.metaKey!==n.meta,n.meta=!!M.metaKey),w}function s(M,w){var p=m.x(w),_=m.y(w);"buttons"in w&&(M=w.buttons|0),(M!==e||p!==a||_!==i||v(w))&&(e=M|0,a=p||0,i=_||0,T&&T(e,a,i,n))}function o(M){s(0,M)}function b(){(e||a||i||n.shift||n.alt||n.meta||n.control)&&(a=i=0,e=0,n.shift=n.alt=n.control=n.meta=!1,T&&T(0,0,0,n))}function g(M){v(M)&&T&&T(e,a,i,n)}function d(M){m.buttons(M)===0?s(0,M):s(e,M)}function f(M){s(e|m.buttons(M),M)}function y(M){s(e&~m.buttons(M),M)}function l(){r||(r=!0,A.addEventListener("mousemove",d),A.addEventListener("mousedown",f),A.addEventListener("mouseup",y),A.addEventListener("mouseleave",o),A.addEventListener("mouseenter",o),A.addEventListener("mouseout",o),A.addEventListener("mouseover",o),A.addEventListener("blur",b),A.addEventListener("keyup",g),A.addEventListener("keydown",g),A.addEventListener("keypress",g),A!==window&&(window.addEventListener("blur",b),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function x(){!r||(r=!1,A.removeEventListener("mousemove",d),A.removeEventListener("mousedown",f),A.removeEventListener("mouseup",y),A.removeEventListener("mouseleave",o),A.removeEventListener("mouseenter",o),A.removeEventListener("mouseout",o),A.removeEventListener("mouseover",o),A.removeEventListener("blur",b),A.removeEventListener("keyup",g),A.removeEventListener("keydown",g),A.removeEventListener("keypress",g),A!==window&&(window.removeEventListener("blur",b),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}l();var c={element:A};return Object.defineProperties(c,{enabled:{get:function(){return r},set:function(M){M?l():x()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),c}},{"mouse-event":243}],242:[function(t,N,V){var m={left:0,top:0};N.exports=u;function u(T,e,a){e=e||T.currentTarget||T.srcElement,Array.isArray(a)||(a=[0,0]);var i=T.clientX||0,n=T.clientY||0,r=A(e);return a[0]=i-r.left,a[1]=n-r.top,a}function A(T){return T===window||T===document||T===document.body?m:T.getBoundingClientRect()}},{}],243:[function(t,N,V){function m(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var a=e.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in e){var a=e.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}V.buttons=m;function u(e){return e.target||e.srcElement||window}V.element=u;function A(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var a=u(e),i=a.getBoundingClientRect();return e.clientX-i.left}return 0}V.x=A;function T(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var a=u(e),i=a.getBoundingClientRect();return e.clientY-i.top}return 0}V.y=T},{}],244:[function(t,N,V){var m=t("to-px");N.exports=u;function u(A,T,e){typeof A=="function"&&(e=!!T,T=A,A=window);var a=m("ex",A),i=function(n){e&&n.preventDefault();var r=n.deltaX||0,v=n.deltaY||0,s=n.deltaZ||0,o=n.deltaMode,b=1;switch(o){case 1:b=a;break;case 2:b=window.innerHeight;break}if(r*=b,v*=b,s*=b,r||v||s)return T(r,v,s,n)};return A.addEventListener("wheel",i),i}},{"to-px":315}],245:[function(t,N,V){(function(m,u){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(T,e,a){e[T]=e[T]||a(),typeof N<"u"&&N.exports&&(N.exports=e[T])})("Promise",typeof m<"u"?m:this,function(){var T,e,a,i=Object.prototype.toString,n=typeof u<"u"?function(M){return u(M)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(M,w,p,_){return Object.defineProperty(M,w,{value:p,writable:!0,configurable:_!==!1})}}catch{T=function(w,p,_){return w[p]=_,w}}a=function(){var M,w,p;function _(h,L){this.fn=h,this.self=L,this.next=void 0}return{add:function(L,E){p=new _(L,E),w?w.next=p:M=p,w=p,p=void 0},drain:function(){var L=M;for(M=w=e=void 0;L;)L.fn.call(L.self),L=L.next}}}();function r(c,M){a.add(c,M),e||(e=n(a.drain))}function v(c){var M,w=typeof c;return c!=null&&(w=="object"||w=="function")&&(M=c.then),typeof M=="function"?M:!1}function s(){for(var c=0;c<this.chain.length;c++)o(this,this.state===1?this.chain[c].success:this.chain[c].failure,this.chain[c]);this.chain.length=0}function o(c,M,w){var p,_;try{M===!1?w.reject(c.msg):(M===!0?p=c.msg:p=M.call(void 0,c.msg),p===w.promise?w.reject(TypeError("Promise-chain cycle")):(_=v(p))?_.call(p,w.resolve,w.reject):w.resolve(p))}catch(h){w.reject(h)}}function b(c){var M,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(M=v(c))?r(function(){var p=new f(w);try{M.call(c,function(){b.apply(p,arguments)},function(){g.apply(p,arguments)})}catch(_){g.call(p,_)}}):(w.msg=c,w.state=1,w.chain.length>0&&r(s,w))}catch(p){g.call(new f(w),p)}}}function g(c){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=c,M.state=2,M.chain.length>0&&r(s,M))}function d(c,M,w,p){for(var _=0;_<M.length;_++)(function(L){c.resolve(M[L]).then(function(S){w(L,S)},p)})(_)}function f(c){this.def=c,this.triggered=!1}function y(c){this.promise=c,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(c){if(typeof c!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new y(this);this.then=function(p,_){var h={success:typeof p=="function"?p:!0,failure:typeof _=="function"?_:!1};return h.promise=new this.constructor(function(E,S){if(typeof E!="function"||typeof S!="function")throw TypeError("Not a function");h.resolve=E,h.reject=S}),M.chain.push(h),M.state!==0&&r(s,M),h.promise},this.catch=function(p){return this.then(void 0,p)};try{c.call(void 0,function(p){b.call(M,p)},function(p){g.call(M,p)})}catch(w){g.call(M,w)}}var x=T({},"constructor",l,!1);return l.prototype=x,T(x,"__NPO__",0,!1),T(l,"resolve",function(M){var w=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");_(M)})}),T(l,"reject",function(M){return new this(function(p,_){if(typeof p!="function"||typeof _!="function")throw TypeError("Not a function");_(M)})}),T(l,"all",function(M){var w=this;return i.call(M)!="[object Array]"?w.reject(TypeError("Not an array")):M.length===0?w.resolve([]):new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");var L=M.length,E=Array(L),S=0;d(w,M,function(F,I){E[F]=I,++S===L&&_(E)},h)})}),T(l,"race",function(M){var w=this;return i.call(M)!="[object Array]"?w.reject(TypeError("Not an array")):new w(function(_,h){if(typeof _!="function"||typeof h!="function")throw TypeError("Not a function");d(w,M,function(E,S){_(S)},h)})}),l})}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{timers:312}],246:[function(t,N,V){var m=Math.PI,u=n(120);N.exports=A;function A(r){for(var v,s=[],o=0,b=0,g=0,d=0,f=null,y=null,l=0,x=0,c=0,M=r.length;c<M;c++){var w=r[c],p=w[0];switch(p){case"M":g=w[1],d=w[2];break;case"A":w=a(l,x,w[1],w[2],n(w[3]),w[4],w[5],w[6],w[7]),w.unshift("C"),w.length>7&&(s.push(w.splice(0,7)),w.unshift("C"));break;case"S":var _=l,h=x;(v=="C"||v=="S")&&(_+=_-o,h+=h-b),w=["C",_,h,w[1],w[2],w[3],w[4]];break;case"T":v=="Q"||v=="T"?(f=l*2-f,y=x*2-y):(f=l,y=x),w=e(l,x,f,y,w[1],w[2]);break;case"Q":f=w[1],y=w[2],w=e(l,x,w[1],w[2],w[3],w[4]);break;case"L":w=T(l,x,w[1],w[2]);break;case"H":w=T(l,x,w[1],x);break;case"V":w=T(l,x,l,w[1]);break;case"Z":w=T(l,x,g,d);break}v=p,l=w[w.length-2],x=w[w.length-1],w.length>4?(o=w[w.length-4],b=w[w.length-3]):(o=l,b=x),s.push(w)}return s}function T(r,v,s,o){return["C",r,v,s,o,s,o]}function e(r,v,s,o,b,g){return["C",r/3+2/3*s,v/3+2/3*o,b/3+2/3*s,g/3+2/3*o,b,g]}function a(r,v,s,o,b,g,d,f,y,l){if(l)S=l[0],P=l[1],L=l[2],E=l[3];else{var x=i(r,v,-b);r=x.x,v=x.y,x=i(f,y,-b),f=x.x,y=x.y;var c=(r-f)/2,M=(v-y)/2,w=c*c/(s*s)+M*M/(o*o);w>1&&(w=Math.sqrt(w),s=w*s,o=w*o);var p=s*s,_=o*o,h=(g==d?-1:1)*Math.sqrt(Math.abs((p*_-p*M*M-_*c*c)/(p*M*M+_*c*c)));h==1/0&&(h=1);var L=h*s*M/o+(r+f)/2,E=h*-o*c/s+(v+y)/2,S=Math.asin(((v-E)/o).toFixed(9)),P=Math.asin(((y-E)/o).toFixed(9));S=r<L?m-S:S,P=f<L?m-P:P,S<0&&(S=m*2+S),P<0&&(P=m*2+P),d&&S>P&&(S=S-m*2),!d&&P>S&&(P=P-m*2)}if(Math.abs(P-S)>u){var F=P,I=f,D=y;P=S+u*(d&&P>S?1:-1),f=L+s*Math.cos(P),y=E+o*Math.sin(P);var R=a(f,y,s,o,b,0,d,I,D,[P,F,L,E])}var O=Math.tan((P-S)/4),z=4/3*s*O,G=4/3*o*O,Y=[2*r-(r+z*Math.sin(S)),2*v-(v-G*Math.cos(S)),f+z*Math.sin(P),y-G*Math.cos(P),f,y];if(l)return Y;R&&(Y=Y.concat(R));for(var ee=0;ee<Y.length;){var j=i(Y[ee],Y[ee+1],b);Y[ee++]=j.x,Y[ee++]=j.y}return Y}function i(r,v,s){return{x:r*Math.cos(s)-v*Math.sin(s),y:r*Math.sin(s)+v*Math.cos(s)}}function n(r){return r*(m/180)}},{}],247:[function(t,N,V){var m=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;function T(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var i={},n=0;n<10;n++)i["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(i).map(function(s){return i[s]});if(r.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(s){v[s]=s}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}N.exports=e()?Object.assign:function(a,i){for(var n,r=T(a),v,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)u.call(n,o)&&(r[o]=n[o]);if(m){v=m(n);for(var b=0;b<v.length;b++)A.call(n,v[b])&&(r[v[b]]=n[v[b]])}}return r}},{}],248:[function(t,N,V){function m(T,e){if(typeof T!="string")return[T];var a=[T];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var i=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],n=e.escape||"___",r=!!e.flat;i.forEach(function(o){var b=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),g=[];function d(f,y,l){var x=a.push(f.slice(o[0].length,-o[1].length))-1;return g.push(x),n+x+n}a.forEach(function(f,y){for(var l,x=0;f!=l;)if(l=f,f=f.replace(b,d),x++>1e4)throw Error("References have circular dependency. Please, check them.");a[y]=f}),g=g.reverse(),a=a.map(function(f){return g.forEach(function(y){f=f.replace(new RegExp("(\\"+n+y+"\\"+n+")","g"),o[0]+"$1"+o[1])}),f})});var v=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(o,b,g){for(var d=[],f,y=0;f=v.exec(o);){if(y++>1e4)throw Error("Circular references in parenthesis");d.push(o.slice(0,f.index)),d.push(s(b[f[1]],b)),o=o.slice(f.index+f[0].length)}return d.push(o),d}return r?a:s(a[0],a)}function u(T,e){if(e&&e.flat){var a=e&&e.escape||"___",i=T[0],n;if(!i)return"";for(var r=new RegExp("\\"+a+"([0-9]+)\\"+a),v=0;i!=n;){if(v++>1e4)throw Error("Circular references in "+T);n=i,i=i.replace(r,s)}return i}return T.reduce(function o(b,g){return Array.isArray(g)&&(g=g.reduce(o,"")),b+g},"");function s(o,b){if(T[b]==null)throw Error("Reference "+b+"is undefined");return T[b]}}function A(T,e){return Array.isArray(T)?u(T,e):m(T,e)}A.parse=m,A.stringify=u,N.exports=A},{}],249:[function(t,N,V){var m=t("pick-by-alias");N.exports=u;function u(A){var T;return arguments.length>1&&(A=arguments),typeof A=="string"?A=A.split(/\s/).map(parseFloat):typeof A=="number"&&(A=[A]),A.length&&typeof A[0]=="number"?A.length===1?T={width:A[0],height:A[0],x:0,y:0}:A.length===2?T={width:A[0],height:A[1],x:0,y:0}:T={x:A[0],y:A[1],width:A[2]-A[0]||0,height:A[3]-A[1]||0}:A&&(A=m(A,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),T={x:A.left||0,y:A.top||0},A.width==null?A.right?T.width=A.right-T.x:T.width=0:T.width=A.width,A.height==null?A.bottom?T.height=A.bottom-T.y:T.height=0:T.height=A.height),T}},{"pick-by-alias":253}],250:[function(t,N,V){N.exports=A;var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},u=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function A(a){var i=[];return a.replace(u,function(n,r,v){var s=r.toLowerCase();for(v=e(v),s=="m"&&v.length>2&&(i.push([r].concat(v.splice(0,2))),s="l",r=r=="m"?"l":"L");;){if(v.length==m[s])return v.unshift(r),i.push(v);if(v.length<m[s])throw new Error("malformed path data");i.push([r].concat(v.splice(0,m[s])))}}),i}var T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(a){var i=a.match(T);return i?i.map(Number):[]}},{}],251:[function(t,N,V){N.exports=function(u,A){A||(A=[0,""]),u=String(u);var T=parseFloat(u,10);return A[0]=T,A[1]=u.match(/[\d.\-\+]*\s*(.*)/)[1]||"",A}},{}],252:[function(t,N,V){(function(m){(function(){(function(){var u,A,T,e,a,i;typeof performance<"u"&&performance!==null&&performance.now?N.exports=function(){return performance.now()}:typeof m<"u"&&m!==null&&m.hrtime?(N.exports=function(){return(u()-a)/1e6},A=m.hrtime,u=function(){var n;return n=A(),n[0]*1e9+n[1]},e=u(),i=m.uptime()*1e9,a=e-i):Date.now?(N.exports=function(){return Date.now()-T},T=Date.now()):(N.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)}).call(this)}).call(this,t("_process"))},{_process:278}],253:[function(t,N,V){N.exports=function(T,e,a){var i={},n,r;if(typeof e=="string"&&(e=u(e)),Array.isArray(e)){var v={};for(r=0;r<e.length;r++)v[e[r]]=!0;e=v}for(n in e)e[n]=u(e[n]);var s={};for(n in e){var o=e[n];if(Array.isArray(o))for(r=0;r<o.length;r++){var b=o[r];if(a&&(s[b]=!0),b in T){if(i[n]=T[b],a)for(var g=r;g<o.length;g++)s[o[g]]=!0;break}}else n in T&&(e[n]&&(i[n]=T[n]),a&&(s[n]=!0))}if(a)for(n in T)s[n]||(i[n]=T[n]);return i};var m={};function u(A){return m[A]?m[A]:(typeof A=="string"&&(A=m[A]=A.split(/\s*,\s*|\s+/)),A)}},{}],254:[function(t,N,V){N.exports=function(u,A,T,e){var a=u[0],i=u[1],n=!1;T===void 0&&(T=0),e===void 0&&(e=A.length);for(var r=e-T,v=0,s=r-1;v<r;s=v++){var o=A[v+T][0],b=A[v+T][1],g=A[s+T][0],d=A[s+T][1],f=b>i!=d>i&&a<(g-o)*(i-b)/(d-b)+o;f&&(n=!n)}return n}},{}],255:[function(t,N,V){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var m=t("./lib/build-log"),u=t("./lib/epsilon"),A=t("./lib/intersecter"),T=t("./lib/segment-chainer"),e=t("./lib/segment-selector"),a=t("./lib/geojson"),i=!1,n=u(),r;r={buildLog:function(s){return s===!0?i=m():s===!1&&(i=!1),i===!1?!1:i.list},epsilon:function(s){return n.epsilon(s)},segments:function(s){var o=A(!0,n,i);return s.regions.forEach(o.addRegion),{segments:o.calculate(s.inverted),inverted:s.inverted}},combine:function(s,o){var b=A(!1,n,i);return{combined:b.calculate(s.segments,s.inverted,o.segments,o.inverted),inverted1:s.inverted,inverted2:o.inverted}},selectUnion:function(s){return{segments:e.union(s.combined,i),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:e.intersect(s.combined,i),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:e.difference(s.combined,i),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:e.differenceRev(s.combined,i),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:e.xor(s.combined,i),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:T(s.segments,n,i),inverted:s.inverted}},polygonFromGeoJSON:function(s){return a.toPolygon(r,s)},polygonToGeoJSON:function(s){return a.fromPolygon(r,n,s)},union:function(s,o){return v(s,o,r.selectUnion)},intersect:function(s,o){return v(s,o,r.selectIntersect)},difference:function(s,o){return v(s,o,r.selectDifference)},differenceRev:function(s,o){return v(s,o,r.selectDifferenceRev)},xor:function(s,o){return v(s,o,r.selectXor)}};function v(s,o,b){var g=r.segments(s),d=r.segments(o),f=r.combine(g,d),y=b(f);return r.polygon(y)}typeof window=="object"&&(window.PolyBool=r),N.exports=r},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(t,N,V){function m(){var u,A=0,T=!1;function e(a,i){return u.list.push({type:a,data:i?JSON.parse(JSON.stringify(i)):void 0}),u}return u={list:[],segmentId:function(){return A++},checkIntersection:function(a,i){return e("check",{seg1:a,seg2:i})},segmentChop:function(a,i){return e("div_seg",{seg:a,pt:i}),e("chop",{seg:a,pt:i})},statusRemove:function(a){return e("pop_seg",{seg:a})},segmentUpdate:function(a){return e("seg_update",{seg:a})},segmentNew:function(a,i){return e("new_seg",{seg:a,primary:i})},segmentRemove:function(a){return e("rem_seg",{seg:a})},tempStatus:function(a,i,n){return e("temp_status",{seg:a,above:i,below:n})},rewind:function(a){return e("rewind",{seg:a})},status:function(a,i,n){return e("status",{seg:a,above:i,below:n})},vert:function(a){return a===T?u:(T=a,e("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),e("log",{txt:a})},reset:function(){return e("reset")},selected:function(a){return e("selected",{segs:a})},chainStart:function(a){return e("chain_start",{seg:a})},chainRemoveHead:function(a,i){return e("chain_rem_head",{index:a,pt:i})},chainRemoveTail:function(a,i){return e("chain_rem_tail",{index:a,pt:i})},chainNew:function(a,i){return e("chain_new",{pt1:a,pt2:i})},chainMatch:function(a){return e("chain_match",{index:a})},chainClose:function(a){return e("chain_close",{index:a})},chainAddHead:function(a,i){return e("chain_add_head",{index:a,pt:i})},chainAddTail:function(a,i){return e("chain_add_tail",{index:a,pt:i})},chainConnect:function(a,i){return e("chain_con",{index1:a,index2:i})},chainReverse:function(a){return e("chain_rev",{index:a})},chainJoin:function(a,i){return e("chain_join",{index1:a,index2:i})},done:function(){return e("done")}},u}N.exports=m},{}],257:[function(t,N,V){function m(u){typeof u!="number"&&(u=1e-10);var A={epsilon:function(T){return typeof T=="number"&&(u=T),u},pointAboveOrOnLine:function(T,e,a){var i=e[0],n=e[1],r=a[0],v=a[1],s=T[0],o=T[1];return(r-i)*(o-n)-(v-n)*(s-i)>=-u},pointBetween:function(T,e,a){var i=T[1]-e[1],n=a[0]-e[0],r=T[0]-e[0],v=a[1]-e[1],s=r*n+i*v;if(s<u)return!1;var o=n*n+v*v;return!(s-o>-u)},pointsSameX:function(T,e){return Math.abs(T[0]-e[0])<u},pointsSameY:function(T,e){return Math.abs(T[1]-e[1])<u},pointsSame:function(T,e){return A.pointsSameX(T,e)&&A.pointsSameY(T,e)},pointsCompare:function(T,e){return A.pointsSameX(T,e)?A.pointsSameY(T,e)?0:T[1]<e[1]?-1:1:T[0]<e[0]?-1:1},pointsCollinear:function(T,e,a){var i=T[0]-e[0],n=T[1]-e[1],r=e[0]-a[0],v=e[1]-a[1];return Math.abs(i*v-r*n)<u},linesIntersect:function(T,e,a,i){var n=e[0]-T[0],r=e[1]-T[1],v=i[0]-a[0],s=i[1]-a[1],o=n*s-r*v;if(Math.abs(o)<u)return!1;var b=T[0]-a[0],g=T[1]-a[1],d=(v*g-s*b)/o,f=(n*g-r*b)/o,y={alongA:0,alongB:0,pt:[T[0]+d*n,T[1]+d*r]};return d<=-u?y.alongA=-2:d<u?y.alongA=-1:d-1<=-u?y.alongA=0:d-1<u?y.alongA=1:y.alongA=2,f<=-u?y.alongB=-2:f<u?y.alongB=-1:f-1<=-u?y.alongB=0:f-1<u?y.alongB=1:y.alongB=2,y},pointInsideRegion:function(T,e){for(var a=T[0],i=T[1],n=e[e.length-1][0],r=e[e.length-1][1],v=!1,s=0;s<e.length;s++){var o=e[s][0],b=e[s][1];b-i>u!=r-i>u&&(n-o)*(i-b)/(r-b)+o-a>u&&(v=!v),n=o,r=b}return v}};return A}N.exports=m},{}],258:[function(t,N,V){var m={toPolygon:function(u,A){function T(i){if(i.length<=0)return u.segments({inverted:!1,regions:[]});function n(s){var o=s.slice(0,s.length-1);return u.segments({inverted:!1,regions:[o]})}for(var r=n(i[0]),v=1;v<i.length;v++)r=u.selectDifference(u.combine(r,n(i[v])));return r}if(A.type==="Polygon")return u.polygon(T(A.coordinates));if(A.type==="MultiPolygon"){for(var e=u.segments({inverted:!1,regions:[]}),a=0;a<A.coordinates.length;a++)e=u.selectUnion(u.combine(e,T(A.coordinates[a])));return u.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(u,A,T){T=u.polygon(u.segments(T));function e(d,f){return A.pointInsideRegion([(d[0][0]+d[1][0])*.5,(d[0][1]+d[1][1])*.5],f)}function a(d){return{region:d,children:[]}}var i=a(null);function n(d,f){for(var y=0;y<d.children.length;y++){var l=d.children[y];if(e(f,l.region)){n(l,f);return}}for(var x=a(f),y=0;y<d.children.length;y++){var l=d.children[y];e(l.region,f)&&(x.children.push(l),d.children.splice(y,1),y--)}d.children.push(x)}for(var r=0;r<T.regions.length;r++){var v=T.regions[r];v.length<3||n(i,v)}function s(d,f){for(var y=0,l=d[d.length-1][0],x=d[d.length-1][1],c=[],M=0;M<d.length;M++){var w=d[M][0],p=d[M][1];c.push([w,p]),y+=p*l-w*x,l=w,x=p}var _=y<0;return _!==f&&c.reverse(),c.push([c[0][0],c[0][1]]),c}var o=[];function b(d){var f=[s(d.region,!1)];o.push(f);for(var y=0;y<d.children.length;y++)f.push(g(d.children[y]))}function g(d){for(var f=0;f<d.children.length;f++)b(d.children[f]);return s(d.region,!0)}for(var r=0;r<i.children.length;r++)b(i.children[r]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};N.exports=m},{}],259:[function(t,N,V){var m=t("./linked-list");function u(A,T,e){function a(y,l){return{id:e?e.segmentId():-1,start:y,end:l,myFill:{above:null,below:null},otherFill:null}}function i(y,l,x){return{id:e?e.segmentId():-1,start:y,end:l,myFill:{above:x.myFill.above,below:x.myFill.below},otherFill:null}}var n=m.create();function r(y,l,x,c,M,w){var p=T.pointsCompare(l,M);return p!==0?p:T.pointsSame(x,w)?0:y!==c?y?1:-1:T.pointAboveOrOnLine(x,c?M:w,c?w:M)?1:-1}function v(y,l){n.insertBefore(y,function(x){var c=r(y.isStart,y.pt,l,x.isStart,x.pt,x.other.pt);return c<0})}function s(y,l){var x=m.node({isStart:!0,pt:y.start,seg:y,primary:l,other:null,status:null});return v(x,y.end),x}function o(y,l,x){var c=m.node({isStart:!1,pt:l.end,seg:l,primary:x,other:y,status:null});y.other=c,v(c,y.pt)}function b(y,l){var x=s(y,l);return o(x,y,l),x}function g(y,l){e&&e.segmentChop(y.seg,l),y.other.remove(),y.seg.end=l,y.other.pt=l,v(y.other,y.pt)}function d(y,l){var x=i(l,y.seg.end,y.seg);return g(y,l),b(x,y.primary)}function f(y,l){var x=m.create();function c(O,z){var G=O.seg.start,Y=O.seg.end,ee=z.seg.start,j=z.seg.end;return T.pointsCollinear(G,ee,j)?T.pointsCollinear(Y,ee,j)||T.pointAboveOrOnLine(Y,ee,j)?1:-1:T.pointAboveOrOnLine(G,ee,j)?1:-1}function M(O){return x.findTransition(function(z){var G=c(O,z.ev);return G>0})}function w(O,z){var G=O.seg,Y=z.seg,ee=G.start,j=G.end,X=Y.start,ie=Y.end;e&&e.checkIntersection(G,Y);var he=T.linesIntersect(ee,j,X,ie);if(he===!1){if(!T.pointsCollinear(ee,j,X)||T.pointsSame(ee,ie)||T.pointsSame(j,X))return!1;var K=T.pointsSame(ee,X),$=T.pointsSame(j,ie);if(K&&$)return z;var U=!K&&T.pointBetween(ee,X,ie),H=!$&&T.pointBetween(j,X,ie);if(K)return H?d(z,j):d(O,ie),z;U&&($||(H?d(z,j):d(O,ie)),d(z,ee))}else he.alongA===0&&(he.alongB===-1?d(O,X):he.alongB===0?d(O,he.pt):he.alongB===1&&d(O,ie)),he.alongB===0&&(he.alongA===-1?d(z,ee):he.alongA===0?d(z,he.pt):he.alongA===1&&d(z,j));return!1}for(var p=[];!n.isEmpty();){var _=n.getHead();if(e&&e.vert(_.pt[0]),_.isStart){let O=function(){if(L){var z=w(_,L);if(z)return z}return E?w(_,E):!1};var R=O;e&&e.segmentNew(_.seg,_.primary);var h=M(_),L=h.before?h.before.ev:null,E=h.after?h.after.ev:null;e&&e.tempStatus(_.seg,L?L.seg:!1,E?E.seg:!1);var S=O();if(S){if(A){var P;_.seg.myFill.below===null?P=!0:P=_.seg.myFill.above!==_.seg.myFill.below,P&&(S.seg.myFill.above=!S.seg.myFill.above)}else S.seg.otherFill=_.seg.myFill;e&&e.segmentUpdate(S.seg),_.other.remove(),_.remove()}if(n.getHead()!==_){e&&e.rewind(_.seg);continue}if(A){var P;_.seg.myFill.below===null?P=!0:P=_.seg.myFill.above!==_.seg.myFill.below,E?_.seg.myFill.below=E.seg.myFill.above:_.seg.myFill.below=y,P?_.seg.myFill.above=!_.seg.myFill.below:_.seg.myFill.above=_.seg.myFill.below}else if(_.seg.otherFill===null){var F;E?_.primary===E.primary?F=E.seg.otherFill.above:F=E.seg.myFill.above:F=_.primary?l:y,_.seg.otherFill={above:F,below:F}}e&&e.status(_.seg,L?L.seg:!1,E?E.seg:!1),_.other.status=h.insert(m.node({ev:_}))}else{var I=_.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(x.exists(I.prev)&&x.exists(I.next)&&w(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!_.primary){var D=_.seg.myFill;_.seg.myFill=_.seg.otherFill,_.seg.otherFill=D}p.push(_.seg)}n.getHead().remove()}return e&&e.done(),p}return A?{addRegion:function(y){for(var l,x=y[y.length-1],c=0;c<y.length;c++){l=x,x=y[c];var M=T.pointsCompare(l,x);M!==0&&b(a(M<0?l:x,M<0?x:l),!0)}},calculate:function(y){return f(y,!1)}}:{calculate:function(y,l,x,c){return y.forEach(function(M){b(i(M.start,M.end,M),!0)}),x.forEach(function(M){b(i(M.start,M.end,M),!1)}),f(l,c)}}}N.exports=u},{"./linked-list":260}],260:[function(t,N,V){var m={create:function(){var u={root:{root:!0,next:null},exists:function(A){return!(A===null||A===u.root)},isEmpty:function(){return u.root.next===null},getHead:function(){return u.root.next},insertBefore:function(A,T){for(var e=u.root,a=u.root.next;a!==null;){if(T(a)){A.prev=a.prev,A.next=a,a.prev.next=A,a.prev=A;return}e=a,a=a.next}e.next=A,A.prev=e,A.next=null},findTransition:function(A){for(var T=u.root,e=u.root.next;e!==null&&!A(e);)T=e,e=e.next;return{before:T===u.root?null:T,after:e,insert:function(a){return a.prev=T,a.next=e,T.next=a,e!==null&&(e.prev=a),a}}}};return u},node:function(u){return u.prev=null,u.next=null,u.remove=function(){u.prev.next=u.next,u.next&&(u.next.prev=u.prev),u.prev=null,u.next=null},u}};N.exports=m},{}],261:[function(t,N,V){function m(u,A,T){var e=[],a=[];return u.forEach(function(i){var n=i.start,r=i.end;if(A.pointsSame(n,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}T&&T.chainStart(i);var v={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},o=v;function b(F,I,D){return o.index=F,o.matches_head=I,o.matches_pt1=D,o===v?(o=s,!1):(o=null,!0)}for(var g=0;g<e.length;g++){var d=e[g],f=d[0];d[1];var y=d[d.length-1];if(d[d.length-2],A.pointsSame(f,n)){if(b(g,!0,!0))break}else if(A.pointsSame(f,r)){if(b(g,!0,!1))break}else if(A.pointsSame(y,n)){if(b(g,!1,!0))break}else if(A.pointsSame(y,r)&&b(g,!1,!1))break}if(o===v){e.push([n,r]),T&&T.chainNew(n,r);return}if(o===s){T&&T.chainMatch(v.index);var l=v.index,x=v.matches_pt1?r:n,c=v.matches_head,d=e[l],M=c?d[0]:d[d.length-1],w=c?d[1]:d[d.length-2],p=c?d[d.length-1]:d[0],_=c?d[d.length-2]:d[1];if(A.pointsCollinear(w,M,x)&&(c?(T&&T.chainRemoveHead(v.index,x),d.shift()):(T&&T.chainRemoveTail(v.index,x),d.pop()),M=w),A.pointsSame(p,x)){e.splice(l,1),A.pointsCollinear(_,p,M)&&(c?(T&&T.chainRemoveTail(v.index,M),d.pop()):(T&&T.chainRemoveHead(v.index,M),d.shift())),T&&T.chainClose(v.index),a.push(d);return}c?(T&&T.chainAddHead(v.index,x),d.unshift(x)):(T&&T.chainAddTail(v.index,x),d.push(x));return}function h(F){T&&T.chainReverse(F),e[F].reverse()}function L(F,I){var D=e[F],R=e[I],O=D[D.length-1],z=D[D.length-2],G=R[0],Y=R[1];A.pointsCollinear(z,O,G)&&(T&&T.chainRemoveTail(F,O),D.pop(),O=z),A.pointsCollinear(O,G,Y)&&(T&&T.chainRemoveHead(I,G),R.shift()),T&&T.chainJoin(F,I),e[F]=D.concat(R),e.splice(I,1)}var E=v.index,S=s.index;T&&T.chainConnect(E,S);var P=e[E].length<e[S].length;v.matches_head?s.matches_head?P?(h(E),L(E,S)):(h(S),L(S,E)):L(S,E):s.matches_head?L(E,S):P?(h(E),L(S,E)):(h(S),L(E,S))}),a}N.exports=m},{}],262:[function(t,N,V){function m(A,T,e){var a=[];return A.forEach(function(i){var n=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);T[n]!==0&&a.push({id:e?e.segmentId():-1,start:i.start,end:i.end,myFill:{above:T[n]===1,below:T[n]===2},otherFill:null})}),e&&e.selected(a),a}var u={union:function(A,T){return m(A,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(A,T){return m(A,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(A,T){return m(A,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(A,T){return m(A,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(A,T){return m(A,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}};N.exports=u},{}],263:[function(t,N,V){var m=t("stream").Transform,u=t("stream-parser");function A(){m.call(this,{readableObjectMode:!0})}A.prototype=Object.create(m.prototype),A.prototype.constructor=A,u(A.prototype),V.ParserStream=A,V.sliceEq=function(e,a,i){for(var n=a,r=0;r<i.length;)if(e[n++]!==i[r++])return!1;return!0},V.str2arr=function(e,a){var i=[],n=0;if(a&&a==="hex")for(;n<e.length;)i.push(parseInt(e.slice(n,n+2),16)),n+=2;else for(;n<e.length;n++)i.push(e.charCodeAt(n)&255);return i},V.readUInt16LE=function(e,a){return e[a]|e[a+1]<<8},V.readUInt16BE=function(e,a){return e[a+1]|e[a]<<8},V.readUInt32LE=function(e,a){return e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]*16777216},V.readUInt32BE=function(e,a){return e[a+3]|e[a+2]<<8|e[a+1]<<16|e[a]*16777216};function T(e,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,a&&(this.code=a),i&&(this.statusCode=i)}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,V.ProbeError=T},{stream:286,"stream-parser":302}],264:[function(t,N,V){function m(T,e){var a=new Error(T);return a.code=e,a}function u(T){try{return decodeURIComponent(escape(T))}catch{return T}}function A(T,e,a){this.input=T.subarray(e,a),this.start=e;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw m("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}A.prototype.each=function(T){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,T)}},A.prototype.read_uint16=function(T){var e=this.input;if(T+2>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?e[T]*256+e[T+1]:e[T]+e[T+1]*256},A.prototype.read_uint32=function(T){var e=this.input;if(T+4>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?e[T]*16777216+e[T+1]*65536+e[T+2]*256+e[T+3]:e[T]+e[T+1]*256+e[T+2]*65536+e[T+3]*16777216},A.prototype.is_subifd_link=function(T,e){return T===0&&e===34665||T===0&&e===34853||T===34665&&e===40965},A.prototype.exif_format_length=function(T){switch(T){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},A.prototype.exif_format_read=function(T,e){var a;switch(T){case 1:case 2:return a=this.input[e],a;case 6:return a=this.input[e],a|(a&128)*33554430;case 3:return a=this.read_uint16(e),a;case 8:return a=this.read_uint16(e),a|(a&32768)*131070;case 4:return a=this.read_uint32(e),a;case 9:return a=this.read_uint32(e),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},A.prototype.scan_ifd=function(T,e,a){var i=this.read_uint16(e);e+=2;for(var n=0;n<i;n++){var r=this.read_uint16(e),v=this.read_uint16(e+2),s=this.read_uint32(e+4),o=this.exif_format_length(v),b=s*o,g=b<=4?e+8:this.read_uint32(e+8),d=!1;if(g+b>this.input.length)throw m("unexpected EOF","EBADDATA");for(var f=[],y=g,l=0;l<s;l++,y+=o){var x=this.exif_format_read(v,y);if(x===null){f=null;break}f.push(x)}Array.isArray(f)&&v===2&&(f=u(String.fromCharCode.apply(null,f)),f&&f[f.length-1]==="\0"&&(f=f.slice(0,-1))),this.is_subifd_link(T,r)&&Array.isArray(f)&&Number.isInteger(f[0])&&f[0]>0&&(this.ifds_to_read.push({id:r,offset:f[0]}),d=!0);var c={is_big_endian:this.big_endian,ifd:T,tag:r,format:v,count:s,entry_offset:e+this.start,data_length:b,data_offset:g+this.start,value:f,is_subifd_link:d};if(a(c)===!1){this.aborted=!0;return}e+=12}T===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},N.exports.ExifParser=A,N.exports.get_orientation=function(T){var e=0;try{return new A(T,0,T.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return e=a.value[0],!1}),e}catch{return-1}}},{}],265:[function(t,N,V){var m=t("./common").readUInt16BE,u=t("./common").readUInt32BE;function A(s,o){if(s.length<4+o)return null;var b=u(s,o);return s.length<b+o||b<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(o+4,o+8)),data:s.slice(o+8,o+b),end:o+b}}N.exports.unbox=A;function T(s,o){for(var b=0;;){var g=A(s,b);if(!g)break;switch(g.boxtype){case"ispe":o.sizes.push({width:u(g.data,4),height:u(g.data,8)});break;case"irot":o.transforms.push({type:"irot",value:g.data[0]&3});break;case"imir":o.transforms.push({type:"imir",value:g.data[0]&1});break}b=g.end}}function e(s,o,b){for(var g=0,d=0;d<b;d++)g=g*256+(s[o+d]||0);return g}function a(s,o){for(var b=s[4]>>4&15,g=s[4]&15,d=s[5]>>4&15,f=m(s,6),y=8,l=0;l<f;l++){var x=m(s,y);y+=2;var c=m(s,y);y+=2;var M=e(s,y,d);y+=d;var w=m(s,y);if(y+=2,c===0&&w===1){var p=e(s,y,b),_=e(s,y+b,g);o.item_loc[x]={length:_,offset:p+M}}y+=w*(b+g)}}function i(s,o){for(var b=m(s,4),g=6,d=0;d<b;d++){var f=A(s,g);if(!f)break;if(f.boxtype==="infe"){for(var y=m(f.data,4),l="",x=8;x<f.data.length&&f.data[x];x++)l+=String.fromCharCode(f.data[x]);o.item_inf[l]=y}g=f.end}}function n(s,o){for(var b=0;;){var g=A(s,b);if(!g)break;g.boxtype==="ipco"&&T(g.data,o),b=g.end}}function r(s,o){for(var b=4;;){var g=A(s,b);if(!g)break;g.boxtype==="iprp"&&n(g.data,o),g.boxtype==="iloc"&&a(g.data,o),g.boxtype==="iinf"&&i(g.data,o),b=g.end}}function v(s){var o=s.reduce(function(d,f){return d.width>f.width||d.width===f.width&&d.height>f.height?d:f}),b=s.reduce(function(d,f){return d.height>f.height||d.height===f.height&&d.width>f.width?d:f}),g;return o.width>b.height||o.width===b.height&&o.height>b.width?g=o:g=b,g}N.exports.readSizeFromMeta=function(s){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(s,o),!!o.sizes.length){var b=v(o.sizes),g=1;o.transforms.forEach(function(f){var y={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},l={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(f.type==="imir"&&(f.value===0?g=l[g]:(g=l[g],g=y[g],g=y[g])),f.type==="irot")for(var x=0;x<f.value;x++)g=y[g]});var d=null;return o.item_inf.Exif&&(d=o.item_loc[o.item_inf.Exif]),{width:b.width,height:b.height,orientation:o.transforms.length?g:null,variants:o.sizes,exif_location:d}}},N.exports.getMimeType=function(s){var o=String.fromCharCode.apply(null,s.slice(0,4)),b={};b[o]=!0;for(var g=8;g<s.length;g+=4)b[String.fromCharCode.apply(null,s.slice(g,g+4))]=!0;if(!(!b.mif1&&!b.msf1&&!b.miaf))return o==="avif"||o==="avis"||o==="avio"?{type:"avif",mime:"image/avif"}:o==="heic"||o==="heix"?{type:"heic",mime:"image/heic"}:o==="hevc"||o==="hevx"?{type:"heic",mime:"image/heic-sequence"}:b.avif||b.avis?{type:"avif",mime:"image/avif"}:b.heic||b.heix||b.hevc||b.hevx||b.heis?b.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(t,N,V){var m=t("../common").str2arr,u=t("../common").sliceEq,A=t("../common").readUInt32BE,T=t("../miaf_utils"),e=t("../exif_utils"),a=m("ftyp");N.exports=function(i){if(!!u(i,4,a)){var n=T.unbox(i,0);if(!!n){var r=T.getMimeType(n.data);if(!!r){for(var v,s=n.end;;){var o=T.unbox(i,s);if(!o)break;if(s=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){v=o.data;break}}if(!!v){var b=T.readSizeFromMeta(v);if(!!b){var g={width:b.width,height:b.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(b.variants.length>1&&(g.variants=b.variants),b.orientation&&(g.orientation=b.orientation),b.exif_location&&b.exif_location.offset+b.exif_location.length<=i.length){var d=A(i,b.exif_location.offset),f=i.slice(b.exif_location.offset+d+4,b.exif_location.offset+b.exif_location.length),y=e.get_orientation(f);y>0&&(g.orientation=y)}return g}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(t,N,V){var m=t("../common").str2arr,u=t("../common").sliceEq,A=t("../common").readUInt16LE,T=m("BM");N.exports=function(e){if(!(e.length<26)&&!!u(e,0,T))return{width:A(e,18),height:A(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(t,N,V){var m=t("../common").str2arr,u=t("../common").sliceEq,A=t("../common").readUInt16LE,T=m("GIF87a"),e=m("GIF89a");N.exports=function(a){if(!(a.length<10)&&!(!u(a,0,T)&&!u(a,0,e)))return{width:A(a,6),height:A(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(t,N,V){var m=t("../common").readUInt16LE,u=0,A=1,T=16;N.exports=function(e){var a=m(e,0),i=m(e,2),n=m(e,4);if(!(a!==u||i!==A||!n)){for(var r=[],v={width:0,height:0},s=0;s<n;s++){var o=e[6+T*s]||256,b=e[6+T*s+1]||256,g={width:o,height:b};r.push(g),(o>v.width||b>v.height)&&(v=g)}return{width:v.width,height:v.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(t,N,V){var m=t("../common").readUInt16BE,u=t("../common").str2arr,A=t("../common").sliceEq,T=t("../exif_utils"),e=u("Exif\0\0");N.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var i=2;;){for(;;){if(a.length-i<2)return;if(a[i++]===255)break}for(var n=a[i++],r;n===255;)n=a[i++];if(208<=n&&n<=217||n===1)r=0;else if(192<=n&&n<=254){if(a.length-i<2)return;r=m(a,i)-2,i+=2}else return;if(n===217||n===218)return;var v;if(n===225&&r>=10&&A(a,i,e)&&(v=T.get_orientation(a.slice(i+6,i+r))),r>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(a.length-i<r)return;var s={width:m(a,i+3),height:m(a,i+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return v>0&&(s.orientation=v),s}i+=r}}},{"../common":263,"../exif_utils":264}],271:[function(t,N,V){var m=t("../common").str2arr,u=t("../common").sliceEq,A=t("../common").readUInt32BE,T=m(`\x89PNG\r

`),e=m("IHDR");N.exports=function(a){if(!(a.length<24)&&!!u(a,0,T)&&!!u(a,12,e))return{width:A(a,16),height:A(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(t,N,V){var m=t("../common").str2arr,u=t("../common").sliceEq,A=t("../common").readUInt32BE,T=m("8BPS\0");N.exports=function(e){if(!(e.length<6+16)&&!!u(e,0,T))return{width:A(e,6+12),height:A(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(t,N,V){function m(o){return o===32||o===9||o===13||o===10}function u(o){return typeof o=="number"&&isFinite(o)&&o>0}function A(o){var b=0,g=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(b=3);b<g&&m(o[b]);)b++;return b===g?!1:o[b]===60}var T=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function v(o){var b=o.match(a),g=o.match(i),d=o.match(n);return{width:b&&(b[1]||b[2]),height:g&&(g[1]||g[2]),viewbox:d&&(d[1]||d[2])}}function s(o){return r.test(o)?o.match(r)[0]:"px"}N.exports=function(o){if(!!A(o)){for(var b="",g=0;g<o.length;g++)b+=String.fromCharCode(o[g]);var d=(b.match(T)||[""])[0];if(!!e.test(d)){var f=v(d),y=parseFloat(f.width),l=parseFloat(f.height);if(f.width&&f.height)return!u(y)||!u(l)?void 0:{width:y,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(f.width),hUnits:s(f.height)};var x=(f.viewbox||"").split(" "),c={width:x[2],height:x[3]},M=parseFloat(c.width),w=parseFloat(c.height);if(!(!u(M)||!u(w))&&s(c.width)===s(c.height)){var p=M/w;return f.width?u(y)?{width:y,height:y/p,type:"svg",mime:"image/svg+xml",wUnits:s(f.width),hUnits:s(f.width)}:void 0:f.height?u(l)?{width:l*p,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(f.height),hUnits:s(f.height)}:void 0:{width:M,height:w,type:"svg",mime:"image/svg+xml",wUnits:s(c.width),hUnits:s(c.height)}}}}}},{}],274:[function(t,N,V){var m=t("../common").str2arr,u=t("../common").sliceEq,A=t("../common").readUInt16LE,T=t("../common").readUInt16BE,e=t("../common").readUInt32LE,a=t("../common").readUInt32BE,i=m("II*\0"),n=m("MM\0*");function r(o,b,g){return g?T(o,b):A(o,b)}function v(o,b,g){return g?a(o,b):e(o,b)}function s(o,b,g){var d=r(o,b+2,g),f=v(o,b+4,g);return f!==1||d!==3&&d!==4?null:d===3?r(o,b+8,g):v(o,b+8,g)}N.exports=function(o){if(!(o.length<8)&&!(!u(o,0,i)&&!u(o,0,n))){var b=o[0]===77,g=v(o,4,b)-8;if(!(g<0)){var d=g+8;if(!(o.length-d<2)){var f=r(o,d+0,b)*12;if(!(f<=0)&&(d+=2,!(o.length-d<f))){var y,l,x,c;for(y=0;y<f;y+=12)c=r(o,d+y,b),c===256?l=s(o,d+y,b):c===257&&(x=s(o,d+y,b));if(l&&x)return{width:l,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":263}],275:[function(t,N,V){var m=t("../common").str2arr,u=t("../common").sliceEq,A=t("../common").readUInt16LE,T=t("../common").readUInt32LE,e=t("../exif_utils"),a=m("RIFF"),i=m("WEBP");function n(s,o){if(!(s[o+3]!==157||s[o+4]!==1||s[o+5]!==42))return{width:A(s,o+6)&16383,height:A(s,o+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(s,o){if(s[o]===47){var b=T(s,o+1);return{width:(b&16383)+1,height:(b>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function v(s,o){return{width:(s[o+6]<<16|s[o+5]<<8|s[o+4])+1,height:(s[o+9]<<o|s[o+8]<<8|s[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}N.exports=function(s){if(!(s.length<16)&&!(!u(s,0,a)&&!u(s,8,i))){var o=12,b=null,g=0,d=T(s,4)+8;if(!(d>s.length)){for(;o+8<d;){if(s[o]===0){o++;continue}var f=String.fromCharCode.apply(null,s.slice(o,o+4)),y=T(s,o+4);f==="VP8 "&&y>=10?b=b||n(s,o+8):f==="VP8L"&&y>=9?b=b||r(s,o+8):f==="VP8X"&&y>=10?b=b||v(s,o+8):f==="EXIF"&&(g=e.get_orientation(s.slice(o+8,o+8+y)),o=1/0),o+=8+y}if(!!b)return g>0&&(b.orientation=g),b}}}},{"../common":263,"../exif_utils":264}],276:[function(t,N,V){N.exports={avif:t("./parse_sync/avif"),bmp:t("./parse_sync/bmp"),gif:t("./parse_sync/gif"),ico:t("./parse_sync/ico"),jpeg:t("./parse_sync/jpeg"),png:t("./parse_sync/png"),psd:t("./parse_sync/psd"),svg:t("./parse_sync/svg"),tiff:t("./parse_sync/tiff"),webp:t("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(t,N,V){var m=t("./lib/parsers_sync");function u(A){for(var T=Object.keys(m),e=0;e<T.length;e++){var a=m[T[e]](A);if(a)return a}return null}N.exports=function(T){return u(T)},N.exports.parsers=m},{"./lib/parsers_sync":276}],278:[function(t,N,V){var m=N.exports={},u,A;function T(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?u=setTimeout:u=T}catch{u=T}try{typeof clearTimeout=="function"?A=clearTimeout:A=e}catch{A=e}})();function a(f){if(u===setTimeout)return setTimeout(f,0);if((u===T||!u)&&setTimeout)return u=setTimeout,setTimeout(f,0);try{return u(f,0)}catch{try{return u.call(null,f,0)}catch{return u.call(this,f,0)}}}function i(f){if(A===clearTimeout)return clearTimeout(f);if((A===e||!A)&&clearTimeout)return A=clearTimeout,clearTimeout(f);try{return A(f)}catch{try{return A.call(null,f)}catch{return A.call(this,f)}}}var n=[],r=!1,v,s=-1;function o(){!r||!v||(r=!1,v.length?n=v.concat(n):s=-1,n.length&&b())}function b(){if(!r){var f=a(o);r=!0;for(var y=n.length;y;){for(v=n,n=[];++s<y;)v&&v[s].run();s=-1,y=n.length}v=null,r=!1,i(f)}}m.nextTick=function(f){var y=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)y[l-1]=arguments[l];n.push(new g(f,y)),n.length===1&&!r&&a(b)};function g(f,y){this.fun=f,this.array=y}g.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={};function d(){}m.on=d,m.addListener=d,m.once=d,m.off=d,m.removeListener=d,m.removeAllListeners=d,m.emit=d,m.prependListener=d,m.prependOnceListener=d,m.listeners=function(f){return[]},m.binding=function(f){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(f){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},{}],279:[function(t,N,V){(function(m){(function(){for(var u=t("performance-now"),A=typeof window>"u"?m:window,T=["moz","webkit"],e="AnimationFrame",a=A["request"+e],i=A["cancel"+e]||A["cancelRequest"+e],n=0;!a&&n<T.length;n++)a=A[T[n]+"Request"+e],i=A[T[n]+"Cancel"+e]||A[T[n]+"CancelRequest"+e];if(!a||!i){var r=0,v=0,s=[],o=1e3/60;a=function(b){if(s.length===0){var g=u(),d=Math.max(0,o-(g-r));r=d+g,setTimeout(function(){var f=s.slice(0);s.length=0;for(var y=0;y<f.length;y++)if(!f[y].cancelled)try{f[y].callback(r)}catch(l){setTimeout(function(){throw l},0)}},Math.round(d))}return s.push({handle:++v,callback:b,cancelled:!1}),v},i=function(b){for(var g=0;g<s.length;g++)s[g].handle===b&&(s[g].cancelled=!0)}}N.exports=function(b){return a.call(A,b)},N.exports.cancel=function(){i.apply(A,arguments)},N.exports.polyfill=function(b){b||(b=A),b.requestAnimationFrame=a,b.cancelAnimationFrame=i}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(t,N,V){var m=t("array-bounds"),u=t("color-normalize"),A=t("update-diff"),T=t("pick-by-alias"),e=t("object-assign"),a=t("flatten-vertex-data"),i=t("to-float32"),n=i.float32,r=i.fract32;N.exports=s;var v=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function s(o,b){if(typeof o=="function"?(b||(b={}),b.regl=o):b=o,b.length&&(b.positions=b),o=b.regl,!o.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var g=o._gl,d,f,y,l,x,c,M={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return l=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=o.buffer({usage:"static",type:"float",data:v}),L(b),d=o({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(S,P){return[P.viewport.x,P.viewport.y,S.viewportWidth,S.viewportHeight]}},attributes:{color:{buffer:l,offset:function(S,P){return P.offset*4},divisor:1},position:{buffer:f,offset:function(S,P){return P.offset*8},divisor:1},positionFract:{buffer:y,offset:function(S,P){return P.offset*8},divisor:1},error:{buffer:x,offset:function(S,P){return P.offset*16},divisor:1},direction:{buffer:c,stride:24,offset:0},lineOffset:{buffer:c,stride:24,offset:8},capOffset:{buffer:c,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:v.length}),e(p,{update:L,draw:_,destroy:E,regl:o,gl:g,canvas:g.canvas,groups:w}),p;function p(S){S?L(S):S===null&&E(),_()}function _(S){if(typeof S=="number")return h(S);S&&!Array.isArray(S)&&(S=[S]),o._refresh(),w.forEach(function(P,F){if(!!P){if(S&&(S[F]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}h(F)}})}function h(S){typeof S=="number"&&(S=w[S]),S!=null&&(!(S&&S.count&&S.color&&S.opacity&&S.positions&&S.positions.length>1)||(S.scaleRatio=[S.scale[0]*S.viewport.width,S.scale[1]*S.viewport.height],d(S),S.after&&S.after(S)))}function L(S){if(!!S){S.length!=null?typeof S[0]=="number"&&(S=[{positions:S}]):Array.isArray(S)||(S=[S]);var P=0,F=0;if(p.groups=w=S.map(function(Y,ee){var j=w[ee];if(Y)typeof Y=="function"?Y={after:Y}:typeof Y[0]=="number"&&(Y={positions:Y});else return j;return Y=T(Y,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),j||(w[ee]=j={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Y=e({},M,Y)),A(j,Y,[{lineWidth:function(X){return+X*.5},capSize:function(X){return+X*.5},opacity:parseFloat,errors:function(X){return X=a(X),F+=X.length,X},positions:function(X,ie){return X=a(X,"float64"),ie.count=Math.floor(X.length/2),ie.bounds=m(X,2),ie.offset=P,P+=ie.count,X}},{color:function(X,ie){var he=ie.count;if(X||(X="transparent"),!Array.isArray(X)||typeof X[0]=="number"){var K=X;X=Array(he);for(var $=0;$<he;$++)X[$]=K}if(X.length<he)throw Error("Not enough colors");for(var U=new Uint8Array(he*4),H=0;H<he;H++){var q=u(X[H],"uint8");U.set(q,H*4)}return U},range:function(X,ie,he){var K=ie.bounds;return X||(X=K),ie.scale=[1/(X[2]-X[0]),1/(X[3]-X[1])],ie.translate=[-X[0],-X[1]],ie.scaleFract=r(ie.scale),ie.translateFract=r(ie.translate),X},viewport:function(X){var ie;return Array.isArray(X)?ie={x:X[0],y:X[1],width:X[2]-X[0],height:X[3]-X[1]}:X?(ie={x:X.x||X.left||0,y:X.y||X.top||0},X.right?ie.width=X.right-ie.x:ie.width=X.w||X.width||0,X.bottom?ie.height=X.bottom-ie.y:ie.height=X.h||X.height||0):ie={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},ie}}]),j}),P||F){var I=w.reduce(function(Y,ee,j){return Y+(ee?ee.count:0)},0),D=new Float64Array(I*2),R=new Uint8Array(I*4),O=new Float32Array(I*4);w.forEach(function(Y,ee){if(!!Y){var j=Y.positions,X=Y.count,ie=Y.offset,he=Y.color,K=Y.errors;!X||(R.set(he,ie*4),O.set(K,ie*4),D.set(j,ie*2))}});var z=n(D);f(z);var G=r(D,z);y(G),l(R),x(O)}}}function E(){f.destroy(),y.destroy(),l.destroy(),x.destroy(),c.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(t,N,V){var m=t("color-normalize"),u=t("array-bounds"),A=t("object-assign"),T=t("glslify"),e=t("pick-by-alias"),a=t("flatten-vertex-data"),i=t("earcut"),n=t("array-normalize"),r=t("to-float32"),v=r.float32,s=r.fract32,o=t("es6-weak-map"),b=t("parse-rect"),g=t("array-find-index");N.exports=d;function d(f,y){if(!(this instanceof d))return new d(f,y);if(typeof f=="function"?(y||(y={}),y.regl=f):y=f,y.length&&(y.positions=y),f=y.regl,!f.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=d.shaders.has(f)?d.shaders.get(f):d.shaders.set(f,d.createShaders(f)).get(f),this.update(y)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new o,d.createShaders=function(f){var y=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,p){return p.join==="round"?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(w,p){return[p.viewport.x,p.viewport.y,w.viewportWidth,w.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,p){return!p.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},x=f(A({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},l)),c;try{c=f(A({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},l))}catch{c=x}var M=f({primitive:"triangle",elements:function(w,p){return p.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(w,p){return[p.viewport.x,p.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:l.blend,depth:{enable:!1},scissor:l.scissor,stencil:l.stencil,viewport:l.viewport});return{fill:M,rect:x,miter:c}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var f,y=[],l=arguments.length;l--;)y[l]=arguments[l];y.length&&(f=this).update.apply(f,y),this.draw()},d.prototype.draw=function(){for(var f=this,y=[],l=arguments.length;l--;)y[l]=arguments[l];return(y.length?y:this.passes).forEach(function(x,c){var M;if(x&&Array.isArray(x))return(M=f).draw.apply(M,x);typeof x=="number"&&(x=f.passes[x]),x&&x.count>1&&x.opacity&&(f.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&f.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>d.precisionThreshold||x.scale[1]*x.viewport.height>d.precisionThreshold||x.join==="rect"||!x.join&&(x.thickness<=2||x.count>=d.maxPoints)?f.shaders.rect(x):f.shaders.miter(x)))}),this},d.prototype.update=function(f){var y=this;if(!!f){f.length!=null?typeof f[0]=="number"&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var l=this,x=l.regl,c=l.gl;if(f.forEach(function(h,L){var E=y.passes[L];if(h!==void 0){if(h===null){y.passes[L]=null;return}if(typeof h[0]=="number"&&(h={positions:h}),h=e(h,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),E||(y.passes[L]=E={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},h=A({},d.defaults,h)),h.thickness!=null&&(E.thickness=parseFloat(h.thickness)),h.opacity!=null&&(E.opacity=parseFloat(h.opacity)),h.miterLimit!=null&&(E.miterLimit=parseFloat(h.miterLimit)),h.overlay!=null&&(E.overlay=!!h.overlay,L<d.maxLines&&(E.depth=2*(d.maxLines-1-L%d.maxLines)/d.maxLines-1)),h.join!=null&&(E.join=h.join),h.hole!=null&&(E.hole=h.hole),h.fill!=null&&(E.fill=h.fill?m(h.fill,"uint8"):null),h.viewport!=null&&(E.viewport=b(h.viewport)),E.viewport||(E.viewport=b([c.drawingBufferWidth,c.drawingBufferHeight])),h.close!=null&&(E.close=h.close),h.positions===null&&(h.positions=[]),h.positions){var S,P;if(h.positions.x&&h.positions.y){var F=h.positions.x,I=h.positions.y;P=E.count=Math.max(F.length,I.length),S=new Float64Array(P*2);for(var D=0;D<P;D++)S[D*2]=F[D],S[D*2+1]=I[D]}else S=a(h.positions,"float64"),P=E.count=Math.floor(S.length/2);var R=E.bounds=u(S,2);if(E.fill){for(var O=[],z={},G=0,Y=0,ee=0,j=E.count;Y<j;Y++){var X=S[Y*2],ie=S[Y*2+1];isNaN(X)||isNaN(ie)||X==null||ie==null?(X=S[G*2],ie=S[G*2+1],z[Y]=G):G=Y,O[ee++]=X,O[ee++]=ie}if(h.splitNull){E.count-1 in z||(z[E.count]=E.count-1);var he=Object.keys(z).map(Number).sort(function(Xe,it){return Xe-it}),K=[],$=0,U=E.hole!=null?E.hole[0]:null;if(U!=null){var H=g(he,function(Xe){return Xe>=U});he=he.slice(0,H),he.push(U)}for(var q=function(Xe){var it=O.slice($*2,he[Xe]*2).concat(U?O.slice(U*2):[]),Ye=(E.hole||[]).map(function(Ge){return Ge-U+(he[Xe]-$)}),Ee=i(it,Ye);Ee=Ee.map(function(Ge){return Ge+$+(Ge+$<he[Xe]?0:U-he[Xe])}),K.push.apply(K,Ee),$=he[Xe]+1},re=0;re<he.length;re++)q(re);for(var Z=0,Q=K.length;Z<Q;Z++)z[K[Z]]!=null&&(K[Z]=z[K[Z]]);E.triangles=K}else{for(var oe=i(O,E.hole||[]),se=0,ae=oe.length;se<ae;se++)z[oe[se]]!=null&&(oe[se]=z[oe[se]]);E.triangles=oe}}var le=new Float64Array(S);n(le,2,R);var _e=new Float64Array(P*2+6);E.close?S[0]===S[P*2-2]&&S[1]===S[P*2-1]?(_e[0]=le[P*2-4],_e[1]=le[P*2-3]):(_e[0]=le[P*2-2],_e[1]=le[P*2-1]):(_e[0]=le[0],_e[1]=le[1]),_e.set(le,2),E.close?S[0]===S[P*2-2]&&S[1]===S[P*2-1]?(_e[P*2+2]=le[2],_e[P*2+3]=le[3],E.count-=1):(_e[P*2+2]=le[0],_e[P*2+3]=le[1],_e[P*2+4]=le[2],_e[P*2+5]=le[3]):(_e[P*2+2]=le[P*2-2],_e[P*2+3]=le[P*2-1],_e[P*2+4]=le[P*2-2],_e[P*2+5]=le[P*2-1]);var fe=v(_e);E.positionBuffer(fe);var me=s(_e,fe);E.positionFractBuffer(me)}if(h.range?E.range=h.range:E.range||(E.range=E.bounds),(h.range||h.positions)&&E.count){var xe=E.bounds,ye=xe[2]-xe[0],be=xe[3]-xe[1],ke=E.range[2]-E.range[0],De=E.range[3]-E.range[1];E.scale=[ye/ke,be/De],E.translate=[-E.range[0]/ke+xe[0]/ke||0,-E.range[1]/De+xe[1]/De||0],E.scaleFract=s(E.scale),E.translateFract=s(E.translate)}if(h.dashes){var He=0,Ae;if(!h.dashes||h.dashes.length<2)He=1,Ae=new Uint8Array([255,255,255,255,255,255,255,255]);else{He=0;for(var Le=0;Le<h.dashes.length;++Le)He+=h.dashes[Le];Ae=new Uint8Array(He*d.dashMult);for(var Ze=0,We=255,ze=0;ze<2;ze++)for(var Ie=0;Ie<h.dashes.length;++Ie){for(var Ve=0,dt=h.dashes[Ie]*d.dashMult*.5;Ve<dt;++Ve)Ae[Ze++]=We;We^=255}}E.dashLength=He,E.dashTexture({channels:1,data:Ae,width:Ae.length,height:1,mag:"linear",min:"linear"},0,0)}if(h.color){var Ft=E.count,Qt=h.color;Qt||(Qt="transparent");var Ot=new Uint8Array(Ft*4+4);if(!Array.isArray(Qt)||typeof Qt[0]=="number")for(var Ct=m(Qt,"uint8"),jt=0;jt<Ft+1;jt++)Ot.set(Ct,jt*4);else{for(var Nt=0;Nt<Ft;Nt++){var Lt=m(Qt[Nt],"uint8");Ot.set(Lt,Nt*4)}Ot.set(m(Qt[0],"uint8"),Ft*4)}E.colorBuffer({usage:"dynamic",type:"uint8",data:Ot})}}}),f.length<this.passes.length){for(var M=f.length;M<this.passes.length;M++){var w=this.passes[M];!w||(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=f.length}for(var p=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&p.push(this.passes[_]);return this.passes=p,this}},d.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(t,N,V){function m(E,S){return T(E)||a(E,S)||i(E,S)||v()}function u(E){return A(E)||e(E)||i(E)||r()}function A(E){if(Array.isArray(E))return n(E)}function T(E){if(Array.isArray(E))return E}function e(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)}function a(E,S){var P=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(P!=null){var F=[],I=!0,D=!1,R,O;try{for(P=P.call(E);!(I=(R=P.next()).done)&&(F.push(R.value),!(S&&F.length===S));I=!0);}catch(z){D=!0,O=z}finally{try{!I&&P.return!=null&&P.return()}finally{if(D)throw O}}return F}}function i(E,S){if(!!E){if(typeof E=="string")return n(E,S);var P=Object.prototype.toString.call(E).slice(8,-1);if(P==="Object"&&E.constructor&&(P=E.constructor.name),P==="Map"||P==="Set")return Array.from(E);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return n(E,S)}}function n(E,S){(S==null||S>E.length)&&(S=E.length);for(var P=0,F=new Array(S);P<S;P++)F[P]=E[P];return F}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=t("color-normalize"),o=t("array-bounds"),b=t("color-id"),g=t("@plotly/point-cluster"),d=t("object-assign"),f=t("glslify"),y=t("pick-by-alias"),l=t("update-diff"),x=t("flatten-vertex-data"),c=t("is-iexplorer"),M=t("to-float32"),w=t("parse-rect"),p=_;function _(E,S){var P=this;if(!(this instanceof _))return new _(E,S);typeof E=="function"?(S||(S={}),S.regl=E):(S=E,E=null),S&&S.length&&(S.positions=S),E=S.regl;var F=E._gl,I,D=[],R={},O=[],z=[null],G=[null],Y=255,ee=100;this.tooManyColors=c,I=E.texture({data:new Uint8Array(Y*4),width:Y,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),d(this,{regl:E,gl:F,groups:O,markerCache:G,markerTextures:z,palette:D,paletteIds:R,paletteTexture:I,maxColors:Y,maxSize:ee,canvas:F.canvas}),this.update(S);var j={uniforms:{constPointSize:!!S.constPointSize,opacity:E.prop("opacity"),paletteSize:function(K,$){return[P.tooManyColors?0:Y,I.height]},pixelRatio:E.context("pixelRatio"),scale:E.prop("scale"),scaleFract:E.prop("scaleFract"),translate:E.prop("translate"),translateFract:E.prop("translateFract"),markerTexture:E.prop("markerTexture"),paletteTexture:I},attributes:{x:function(K,$){return $.xAttr||{buffer:$.positionBuffer,stride:8,offset:0}},y:function(K,$){return $.yAttr||{buffer:$.positionBuffer,stride:8,offset:4}},xFract:function(K,$){return $.xAttr?{constant:[0,0]}:{buffer:$.positionFractBuffer,stride:8,offset:0}},yFract:function(K,$){return $.yAttr?{constant:[0,0]}:{buffer:$.positionFractBuffer,stride:8,offset:4}},size:function(K,$){return $.size.length?{buffer:$.sizeBuffer,stride:2,offset:0}:{constant:[Math.round($.size*255/P.maxSize)]}},borderSize:function(K,$){return $.borderSize.length?{buffer:$.sizeBuffer,stride:2,offset:1}:{constant:[Math.round($.borderSize*255/P.maxSize)]}},colorId:function(K,$){return $.color.length?{buffer:$.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?D.slice($.color*4,$.color*4+4):[$.color]}},borderColorId:function(K,$){return $.borderColor.length?{buffer:$.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?D.slice($.borderColor*4,$.borderColor*4+4):[$.borderColor]}},isActive:function(K,$){return $.activation===!0?{constant:[1]}:$.activation?$.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:E.prop("viewport")},viewport:E.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:E.prop("elements"),count:E.prop("count"),offset:E.prop("offset"),primitive:"points"},X=d({},j);X.frag=f([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),X.vert=f([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=E(X);var ie=d({},j);ie.frag=f([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),ie.vert=f([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),c&&(ie.frag=ie.frag.replace("smoothstep","smoothStep"),X.frag=X.frag.replace("smoothstep","smoothStep")),this.drawCircle=E(ie)}_.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},_.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},_.prototype.draw=function(){for(var E=this,S=arguments.length,P=new Array(S),F=0;F<S;F++)P[F]=arguments[F];var I=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var D=0;D<P.length;D++)this.drawItem(D,P[D]);else I.forEach(function(R,O){E.drawItem(O)});return this},_.prototype.drawItem=function(E,S){var P=this.groups,F=P[E];if(typeof S=="number"&&(E=S,F=P[S],S=null),!!(F&&F.count&&F.opacity)){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,S));for(var I=[],D=1;D<F.activation.length;D++)!F.activation[D]||F.activation[D]!==!0&&!F.activation[D].data.length||I.push.apply(I,u(this.getMarkerDrawOptions(D,F,S)));I.length&&this.drawMarker(I)}},_.prototype.getMarkerDrawOptions=function(E,S,P){var F=S.range,I=S.tree,D=S.viewport,R=S.activation,O=S.selectionBuffer,z=S.count;if(this.regl,!I)return P?[d({},S,{markerTexture:this.markerTextures[E],activation:R[E],count:P.length,elements:P,offset:0})]:[d({},S,{markerTexture:this.markerTextures[E],activation:R[E],offset:0})];var G=[],Y=I.range(F,{lod:!0,px:[(F[2]-F[0])/D.width,(F[3]-F[1])/D.height]});if(P){for(var ee=R[E],j=ee.data,X=new Uint8Array(z),ie=0;ie<P.length;ie++){var he=P[ie];X[he]=j?j[he]:1}O.subdata(X)}for(var K=Y.length;K--;){var $=m(Y[K],2),U=$[0],H=$[1];G.push(d({},S,{markerTexture:this.markerTextures[E],activation:P?O:R[E],offset:U,count:H-U}))}return G},_.prototype.update=function(){for(var E=this,S=arguments.length,P=new Array(S),F=0;F<S;F++)P[F]=arguments[F];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var I=this.groups,D=this.gl,R=this.regl,O=this.maxSize,z=this.maxColors,G=this.palette;this.groups=I=P.map(function(Y,ee){var j=I[ee];if(Y===void 0)return j;Y===null?Y={positions:null}:typeof Y=="function"?Y={ondraw:Y}:typeof Y[0]=="number"&&(Y={positions:Y}),Y=y(Y,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),Y.positions===null&&(Y.positions=[]),Y.tooManyColors!=null&&(E.tooManyColors=Y.tooManyColors),j||(I[ee]=j={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},Y=d({},_.defaults,Y)),Y.positions&&!("marker"in Y)&&(Y.marker=j.marker,delete j.marker),Y.marker&&!("positions"in Y)&&(Y.positions=j.positions,delete j.positions);var X=0,ie=0;if(l(j,Y,[{snap:!0,size:function(be,ke){return be==null&&(be=_.defaults.size),X+=be&&be.length?1:0,be},borderSize:function(be,ke){return be==null&&(be=_.defaults.borderSize),X+=be&&be.length?1:0,be},opacity:parseFloat,color:function(be,ke){return be==null&&(be=_.defaults.color),be=E.updateColor(be),ie++,be},borderColor:function(be,ke){return be==null&&(be=_.defaults.borderColor),be=E.updateColor(be),ie++,be},bounds:function(be,ke,De){return"range"in De||(De.range=null),be},positions:function(be,ke,De){var He=ke.snap,Ae=ke.positionBuffer,Le=ke.positionFractBuffer,Ze=ke.selectionBuffer;if(be.x||be.y)return be.x.length?ke.xAttr={buffer:R.buffer(be.x),offset:0,stride:4,count:be.x.length}:ke.xAttr={buffer:be.x.buffer,offset:be.x.offset*4||0,stride:(be.x.stride||1)*4,count:be.x.count},be.y.length?ke.yAttr={buffer:R.buffer(be.y),offset:0,stride:4,count:be.y.length}:ke.yAttr={buffer:be.y.buffer,offset:be.y.offset*4||0,stride:(be.y.stride||1)*4,count:be.y.count},ke.count=Math.max(ke.xAttr.count,ke.yAttr.count),be;be=x(be,"float64");var We=ke.count=Math.floor(be.length/2),ze=ke.bounds=We?o(be,2):null;if(!De.range&&!ke.range&&(delete ke.range,De.range=ze),!De.marker&&!ke.marker&&(delete ke.marker,De.marker=null),He&&(He===!0||We>He)?ke.tree=g(be,{bounds:ze}):He&&He.length&&(ke.tree=He),ke.tree){var Ie={primitive:"points",usage:"static",data:ke.tree,type:"uint32"};ke.elements?ke.elements(Ie):ke.elements=R.elements(Ie)}var Ve=M.float32(be);Ae({data:Ve,usage:"dynamic"});var dt=M.fract32(be,Ve);return Le({data:dt,usage:"dynamic"}),Ze({data:new Uint8Array(We),type:"uint8",usage:"stream"}),be}},{marker:function(be,ke,De){var He=ke.activation;if(He.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),He.length=0,!be||typeof be[0]=="number"){var Ae=E.addMarker(be);He[Ae]=!0}else{for(var Le=[],Ze=0,We=Math.min(be.length,ke.count);Ze<We;Ze++){var ze=E.addMarker(be[Ze]);Le[ze]||(Le[ze]=new Uint8Array(ke.count)),Le[ze][Ze]=1}for(var Ie=0;Ie<Le.length;Ie++)if(!!Le[Ie]){var Ve={data:Le[Ie],type:"uint8",usage:"static"};He[Ie]?He[Ie](Ve):He[Ie]=R.buffer(Ve),He[Ie].data=Le[Ie]}}return be},range:function(be,ke,De){var He=ke.bounds;if(!!He)return be||(be=He),ke.scale=[1/(be[2]-be[0]),1/(be[3]-be[1])],ke.translate=[-be[0],-be[1]],ke.scaleFract=M.fract(ke.scale),ke.translateFract=M.fract(ke.translate),be},viewport:function(be){var ke=w(be||[D.drawingBufferWidth,D.drawingBufferHeight]);return ke}}]),X){var he=j,K=he.count,$=he.size,U=he.borderSize,H=he.sizeBuffer,q=new Uint8Array(K*2);if($.length||U.length)for(var re=0;re<K;re++)q[re*2]=Math.round(($[re]==null?$:$[re])*255/O),q[re*2+1]=Math.round((U[re]==null?U:U[re])*255/O);H({data:q,usage:"dynamic"})}if(ie){var Z=j,Q=Z.count,oe=Z.color,se=Z.borderColor,ae=Z.colorBuffer,le;if(E.tooManyColors){if(oe.length||se.length){le=new Uint8Array(Q*8);for(var _e=0;_e<Q;_e++){var fe=oe[_e];le[_e*8]=G[fe*4],le[_e*8+1]=G[fe*4+1],le[_e*8+2]=G[fe*4+2],le[_e*8+3]=G[fe*4+3];var me=se[_e];le[_e*8+4]=G[me*4],le[_e*8+5]=G[me*4+1],le[_e*8+6]=G[me*4+2],le[_e*8+7]=G[me*4+3]}}}else if(oe.length||se.length){le=new Uint8Array(Q*4+2);for(var xe=0;xe<Q;xe++)oe[xe]!=null&&(le[xe*4]=oe[xe]%z,le[xe*4+1]=Math.floor(oe[xe]/z)),se[xe]!=null&&(le[xe*4+2]=se[xe]%z,le[xe*4+3]=Math.floor(se[xe]/z))}ae({data:le||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return j})}},_.prototype.addMarker=function(E){var S=this.markerTextures,P=this.regl,F=this.markerCache,I=E==null?0:F.indexOf(E);if(I>=0)return I;var D;if(E instanceof Uint8Array||E instanceof Uint8ClampedArray)D=E;else{D=new Uint8Array(E.length);for(var R=0,O=E.length;R<O;R++)D[R]=E[R]*255}var z=Math.floor(Math.sqrt(D.length));return I=S.length,F.push(E),S.push(P.texture({channels:1,data:D,radius:z,mag:"linear",min:"linear"})),I},_.prototype.updateColor=function(E){var S=this.paletteIds,P=this.palette,F=this.maxColors;Array.isArray(E)||(E=[E]);var I=[];if(typeof E[0]=="number"){var D=[];if(Array.isArray(E))for(var R=0;R<E.length;R+=4)D.push(E.slice(R,R+4));else for(var O=0;O<E.length;O+=4)D.push(E.subarray(O,O+4));E=D}for(var z=0;z<E.length;z++){var G=E[z];G=s(G,"uint8");var Y=b(G,!1);if(S[Y]==null){var ee=P.length;S[Y]=Math.floor(ee/4),P[ee]=G[0],P[ee+1]=G[1],P[ee+2]=G[2],P[ee+3]=G[3]}I[z]=S[Y]}return!this.tooManyColors&&P.length>F*4&&(this.tooManyColors=!0),this.updatePalette(P),I.length===1?I[0]:I},_.prototype.updatePalette=function(E){if(!this.tooManyColors){var S=this.maxColors,P=this.paletteTexture,F=Math.ceil(E.length*.25/S);if(F>1){E=E.slice();for(var I=E.length*.25%S;I<F*S;I++)E.push(0,0,0,0)}P.height<F&&P.resize(S,F),P.subimage({width:Math.min(E.length*.25,S),height:F,data:E},0,0)}},_.prototype.destroy=function(){return this.groups.forEach(function(E){E.sizeBuffer.destroy(),E.positionBuffer.destroy(),E.positionFractBuffer.destroy(),E.colorBuffer.destroy(),E.activation.forEach(function(S){return S&&S.destroy&&S.destroy()}),E.selectionBuffer.destroy(),E.elements&&E.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(E){return E&&E.destroy&&E.destroy()}),this};var h=t("object-assign"),L=function(S,P){var F=new p(S,P),I=F.render.bind(F);return h(I,{render:I,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),I};N.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(t,N,V){var m=t("regl-scatter2d"),u=t("pick-by-alias"),A=t("array-bounds"),T=t("raf"),e=t("array-range"),a=t("parse-rect"),i=t("flatten-vertex-data");N.exports=n;function n(o,b){if(!(this instanceof n))return new n(o);this.traces=[],this.passes={},this.regl=o,this.scatter=m(o),this.canvas=this.scatter.canvas}n.prototype.render=function(){for(var o=this,b,g=[],d=arguments.length;d--;)g[d]=arguments[d];return g.length&&(b=this).update.apply(b,g),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,T(function(){o.dirty=!1})),this)},n.prototype.update=function(){for(var o,b=[],g=arguments.length;g--;)b[g]=arguments[g];if(!!b.length){for(var d=0;d<b.length;d++)this.updateItem(d,b[d]);this.traces=this.traces.filter(Boolean);for(var f=[],y=0,l=0;l<this.traces.length;l++){for(var x=this.traces[l],c=this.traces[l].passes,M=0;M<c.length;M++)f.push(this.passes[c[M]]);x.passOffset=y,y+=x.passes.length}return(o=this.scatter).update.apply(o,f),this}},n.prototype.updateItem=function(o,b){var g=this,d=g.regl;if(b===null)return this.traces[o]=null,this;if(!b)return this;var f=u(b,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[o]||(this.traces[o]={id:o,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(f.color!=null&&(y.color=f.color),f.size!=null&&(y.size=f.size),f.marker!=null&&(y.marker=f.marker),f.borderColor!=null&&(y.borderColor=f.borderColor),f.borderSize!=null&&(y.borderSize=f.borderSize),f.opacity!=null&&(y.opacity=f.opacity),f.viewport&&(y.viewport=a(f.viewport)),f.diagonal!=null&&(y.diagonal=f.diagonal),f.upper!=null&&(y.upper=f.upper),f.lower!=null&&(y.lower=f.lower),f.data){y.buffer(i(f.data)),y.columns=f.data.length,y.count=f.data[0].length,y.bounds=[];for(var l=0;l<y.columns;l++)y.bounds[l]=A(f.data[l],1)}var x;f.range&&(y.range=f.range,x=y.range&&typeof y.range[0]!="number"),f.domain&&(y.domain=f.domain);var c=!1;f.padding!=null&&(Array.isArray(f.padding)&&f.padding.length===y.columns&&typeof f.padding[f.padding.length-1]=="number"?(y.padding=f.padding.map(s),c=!0):y.padding=s(f.padding));var M=y.columns,w=y.count,p=y.viewport.width,_=y.viewport.height,h=y.viewport.x,L=y.viewport.y,E=p/M,S=_/M;y.passes=[];for(var P=0;P<M;P++)for(var F=0;F<M;F++)if(!(!y.diagonal&&F===P)&&!(!y.upper&&P>F)&&!(!y.lower&&P<F)){var I=r(y.id,P,F),D=this.passes[I]||(this.passes[I]={});if(f.data&&(f.transpose?D.positions={x:{buffer:y.buffer,offset:F,count:w,stride:M},y:{buffer:y.buffer,offset:P,count:w,stride:M}}:D.positions={x:{buffer:y.buffer,offset:F*w,count:w},y:{buffer:y.buffer,offset:P*w,count:w}},D.bounds=v(y.bounds,P,F)),f.domain||f.viewport||f.data){var R=c?v(y.padding,P,F):y.padding;if(y.domain){var O=v(y.domain,P,F),z=O[0],G=O[1],Y=O[2],ee=O[3];D.viewport=[h+z*p+R[0],L+G*_+R[1],h+Y*p-R[2],L+ee*_-R[3]]}else D.viewport=[h+F*E+E*R[0],L+P*S+S*R[1],h+(F+1)*E-E*R[2],L+(P+1)*S-S*R[3]]}f.color&&(D.color=y.color),f.size&&(D.size=y.size),f.marker&&(D.marker=y.marker),f.borderSize&&(D.borderSize=y.borderSize),f.borderColor&&(D.borderColor=y.borderColor),f.opacity&&(D.opacity=y.opacity),f.range&&(D.range=x?v(y.range,P,F):y.range||D.bounds),y.passes.push(I)}return this},n.prototype.draw=function(){for(var o,b=[],g=arguments.length;g--;)b[g]=arguments[g];if(!b.length)this.scatter.draw();else{for(var d=[],f=0;f<b.length;f++)if(typeof b[f]=="number"){var y=this.traces[b[f]],l=y.passes,x=y.passOffset;d.push.apply(d,e(x,x+l.length))}else if(b[f].length){var c=b[f],M=this.traces[f],w=M.passes,p=M.passOffset;w=w.map(function(_,h){d[p+h]=c})}(o=this.scatter).draw.apply(o,d)}return this},n.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(o,b,g){var d=o.id!=null?o.id:o,f=b,y=g,l=d<<16|(f&255)<<8|y&255;return l}function v(o,b,g){var d,f,y,l,x=o[b],c=o[g];return x.length>2?(x[0],x[2],d=x[1],f=x[3]):x.length?(d=x[0],f=x[1]):(x.x,d=x.y,x.x+x.width,f=x.y+x.height),c.length>2?(y=c[0],l=c[2],c[1],c[3]):c.length?(y=c[0],l=c[1]):(y=c.x,c.y,l=c.x+c.width,c.y+c.height),[y,d,l,f]}function s(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var b=a(o);return[b.x,b.y,b.x+b.width,b.y+b.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?N.exports=u():m.createREGL=u()})(this,function(){function m(st,rr){this.id=_e++,this.type=st,this.data=rr}function u(st){if(st.length===0)return[];var rr=st.charAt(0),Jt=st.charAt(st.length-1);if(1<st.length&&rr===Jt&&(rr==='"'||rr==="'"))return['"'+st.substr(1,st.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(rr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(st))return u(st.substr(0,rr.index)).concat(u(rr[1])).concat(u(st.substr(rr.index+rr[0].length)));if(rr=st.split("."),rr.length===1)return['"'+st.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(st=[],Jt=0;Jt<rr.length;++Jt)st=st.concat(u(rr[Jt]));return st}function A(st){return"["+u(st).join("][")+"]"}function T(st,rr){if(typeof st=="function")return new m(0,st);if(typeof st=="number"||typeof st=="boolean")return new m(5,st);if(Array.isArray(st))return new m(6,st.map(function(Jt,hr){return T(Jt)}));if(st instanceof m)return st}function e(){var st={"":0},rr=[""];return{id:function(Jt){var hr=st[Jt];return hr||(hr=st[Jt]=rr.length,rr.push(Jt),hr)},str:function(Jt){return rr[Jt]}}}function a(st,rr,Jt){function hr(){var Qe=window.innerWidth,lt=window.innerHeight;st!==document.body&&(lt=Sr.getBoundingClientRect(),Qe=lt.right-lt.left,lt=lt.bottom-lt.top),Sr.width=Jt*Qe,Sr.height=Jt*lt}var Sr=document.createElement("canvas");le(Sr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),st.appendChild(Sr),st===document.body&&(Sr.style.position="absolute",le(st.style,{margin:0,padding:0}));var tt;return st!==document.body&&typeof ResizeObserver=="function"?(tt=new ResizeObserver(function(){setTimeout(hr)}),tt.observe(st)):window.addEventListener("resize",hr,!1),hr(),{canvas:Sr,onDestroy:function(){tt?tt.disconnect():window.removeEventListener("resize",hr),st.removeChild(Sr)}}}function i(st,rr){function Jt(hr){try{return st.getContext(hr,rr)}catch{return null}}return Jt("webgl")||Jt("experimental-webgl")||Jt("webgl-experimental")}function n(st){return typeof st=="string"?st.split():st}function r(st){return typeof st=="string"?document.querySelector(st):st}function v(st){var rr=st||{},Jt,hr,Sr,tt;st={};var Qe=[],lt=[],ft=typeof window>"u"?1:window.devicePixelRatio,Et=!1,Vt={},Pe=function(ot){},Se=function(){};if(typeof rr=="string"?Jt=document.querySelector(rr):typeof rr=="object"&&(typeof rr.nodeName=="string"&&typeof rr.appendChild=="function"&&typeof rr.getBoundingClientRect=="function"?Jt=rr:typeof rr.drawArrays=="function"||typeof rr.drawElements=="function"?(tt=rr,Sr=tt.canvas):("gl"in rr?tt=rr.gl:"canvas"in rr?Sr=r(rr.canvas):"container"in rr&&(hr=r(rr.container)),"attributes"in rr&&(st=rr.attributes),"extensions"in rr&&(Qe=n(rr.extensions)),"optionalExtensions"in rr&&(lt=n(rr.optionalExtensions)),"onDone"in rr&&(Pe=rr.onDone),"profile"in rr&&(Et=!!rr.profile),"pixelRatio"in rr&&(ft=+rr.pixelRatio),"cachedCode"in rr&&(Vt=rr.cachedCode))),Jt&&(Jt.nodeName.toLowerCase()==="canvas"?Sr=Jt:hr=Jt),!tt){if(!Sr){if(Jt=a(hr||document.body,Pe,ft),!Jt)return null;Sr=Jt.canvas,Se=Jt.onDestroy}st.premultipliedAlpha===void 0&&(st.premultipliedAlpha=!0),tt=i(Sr,st)}return tt?{gl:tt,canvas:Sr,container:hr,extensions:Qe,optionalExtensions:lt,pixelRatio:ft,profile:Et,cachedCode:Vt,onDone:Pe,onDestroy:Se}:(Se(),Pe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function s(st,rr){function Jt(Qe){Qe=Qe.toLowerCase();var lt;try{lt=hr[Qe]=st.getExtension(Qe)}catch{}return!!lt}for(var hr={},Sr=0;Sr<rr.extensions.length;++Sr){var tt=rr.extensions[Sr];if(!Jt(tt))return rr.onDestroy(),rr.onDone('"'+tt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return rr.optionalExtensions.forEach(Jt),{extensions:hr,restore:function(){Object.keys(hr).forEach(function(Qe){if(hr[Qe]&&!Jt(Qe))throw Error("(regl): error restoring extension "+Qe)})}}}function o(st,rr){for(var Jt=Array(st),hr=0;hr<st;++hr)Jt[hr]=rr(hr);return Jt}function b(st){var rr,Jt;return rr=(65535<st)<<4,st>>>=rr,Jt=(255<st)<<3,st>>>=Jt,rr|=Jt,Jt=(15<st)<<2,st>>>=Jt,rr|=Jt,Jt=(3<st)<<1,rr|Jt|st>>>Jt>>1}function g(){function st(hr){e:{for(var Sr=16;268435456>=Sr;Sr*=16)if(hr<=Sr){hr=Sr;break e}hr=0}return Sr=Jt[b(hr)>>2],0<Sr.length?Sr.pop():new ArrayBuffer(hr)}function rr(hr){Jt[b(hr.byteLength)>>2].push(hr)}var Jt=o(8,function(){return[]});return{alloc:st,free:rr,allocType:function(hr,Sr){var tt=null;switch(hr){case 5120:tt=new Int8Array(st(Sr),0,Sr);break;case 5121:tt=new Uint8Array(st(Sr),0,Sr);break;case 5122:tt=new Int16Array(st(2*Sr),0,Sr);break;case 5123:tt=new Uint16Array(st(2*Sr),0,Sr);break;case 5124:tt=new Int32Array(st(4*Sr),0,Sr);break;case 5125:tt=new Uint32Array(st(4*Sr),0,Sr);break;case 5126:tt=new Float32Array(st(4*Sr),0,Sr);break;default:return null}return tt.length!==Sr?tt.subarray(0,Sr):tt},freeType:function(hr){rr(hr.buffer)}}}function d(st){return!!st&&typeof st=="object"&&Array.isArray(st.shape)&&Array.isArray(st.stride)&&typeof st.offset=="number"&&st.shape.length===st.stride.length&&(Array.isArray(st.data)||ke(st.data))}function f(st,rr,Jt,hr,Sr,tt){for(var Qe=0;Qe<rr;++Qe)for(var lt=st[Qe],ft=0;ft<Jt;++ft)for(var Et=lt[ft],Vt=0;Vt<hr;++Vt)Sr[tt++]=Et[Vt]}function y(st,rr,Jt,hr,Sr){for(var tt=1,Qe=Jt+1;Qe<rr.length;++Qe)tt*=rr[Qe];var lt=rr[Jt];if(rr.length-Jt===4){var ft=rr[Jt+1],Et=rr[Jt+2];for(rr=rr[Jt+3],Qe=0;Qe<lt;++Qe)f(st[Qe],ft,Et,rr,hr,Sr),Sr+=tt}else for(Qe=0;Qe<lt;++Qe)y(st[Qe],rr,Jt+1,hr,Sr),Sr+=tt}function l(st){return Ae[Object.prototype.toString.call(st)]|0}function x(st,rr){for(var Jt=0;Jt<rr.length;++Jt)st[Jt]=rr[Jt]}function c(st,rr,Jt,hr,Sr,tt,Qe){for(var lt=0,ft=0;ft<Jt;++ft)for(var Et=0;Et<hr;++Et)st[lt++]=rr[Sr*ft+tt*Et+Qe]}function M(st,rr,Jt,hr){function Sr(Pe){this.id=ft++,this.buffer=st.createBuffer(),this.type=Pe,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Jt.profile&&(this.stats={size:0})}function tt(Pe,Se,ot){Pe.byteLength=Se.byteLength,st.bufferData(Pe.type,Se,ot)}function Qe(Pe,Se,ot,ct,pt,St){if(Pe.usage=ot,Array.isArray(Se)){if(Pe.dtype=ct||5126,0<Se.length)if(Array.isArray(Se[0])){pt=ze(Se);for(var xt=ct=1;xt<pt.length;++xt)ct*=pt[xt];Pe.dimension=ct,Se=We(Se,pt,Pe.dtype),tt(Pe,Se,ot),St?Pe.persistentData=Se:ye.freeType(Se)}else typeof Se[0]=="number"?(Pe.dimension=pt,pt=ye.allocType(Pe.dtype,Se.length),x(pt,Se),tt(Pe,pt,ot),St?Pe.persistentData=pt:ye.freeType(pt)):ke(Se[0])&&(Pe.dimension=Se[0].length,Pe.dtype=ct||l(Se[0])||5126,Se=We(Se,[Se.length,Se[0].length],Pe.dtype),tt(Pe,Se,ot),St?Pe.persistentData=Se:ye.freeType(Se))}else if(ke(Se))Pe.dtype=ct||l(Se),Pe.dimension=pt,tt(Pe,Se,ot),St&&(Pe.persistentData=new Uint8Array(new Uint8Array(Se.buffer)));else if(d(Se)){pt=Se.shape;var Pt=Se.stride,xt=Se.offset,Xt=0,or=0,Pr=0,Ar=0;pt.length===1?(Xt=pt[0],or=1,Pr=Pt[0],Ar=0):pt.length===2&&(Xt=pt[0],or=pt[1],Pr=Pt[0],Ar=Pt[1]),Pe.dtype=ct||l(Se.data)||5126,Pe.dimension=or,pt=ye.allocType(Pe.dtype,Xt*or),c(pt,Se.data,Xt,or,Pr,Ar,xt),tt(Pe,pt,ot),St?Pe.persistentData=pt:ye.freeType(pt)}else Se instanceof ArrayBuffer&&(Pe.dtype=5121,Pe.dimension=pt,tt(Pe,Se,ot),St&&(Pe.persistentData=new Uint8Array(new Uint8Array(Se))))}function lt(Pe){rr.bufferCount--,hr(Pe),st.deleteBuffer(Pe.buffer),Pe.buffer=null,delete Et[Pe.id]}var ft=0,Et={};Sr.prototype.bind=function(){st.bindBuffer(this.type,this.buffer)},Sr.prototype.destroy=function(){lt(this)};var Vt=[];return Jt.profile&&(rr.getTotalBufferSize=function(){var Pe=0;return Object.keys(Et).forEach(function(Se){Pe+=Et[Se].stats.size}),Pe}),{create:function(Pe,Se,ot,ct){function pt(xt){var Pt=35044,Xt=null,or=0,Pr=0,Ar=1;return Array.isArray(xt)||ke(xt)||d(xt)||xt instanceof ArrayBuffer?Xt=xt:typeof xt=="number"?or=xt|0:xt&&("data"in xt&&(Xt=xt.data),"usage"in xt&&(Pt=Ze[xt.usage]),"type"in xt&&(Pr=Le[xt.type]),"dimension"in xt&&(Ar=xt.dimension|0),"length"in xt&&(or=xt.length|0)),St.bind(),Xt?Qe(St,Xt,Pt,Pr,Ar,ct):(or&&st.bufferData(St.type,or,Pt),St.dtype=Pr||5121,St.usage=Pt,St.dimension=Ar,St.byteLength=or),Jt.profile&&(St.stats.size=St.byteLength*Ie[St.dtype]),pt}rr.bufferCount++;var St=new Sr(Se);return Et[St.id]=St,ot||pt(Pe),pt._reglType="buffer",pt._buffer=St,pt.subdata=function(xt,Pt){var Xt=(Pt||0)|0,or;if(St.bind(),ke(xt)||xt instanceof ArrayBuffer)st.bufferSubData(St.type,Xt,xt);else if(Array.isArray(xt)){if(0<xt.length)if(typeof xt[0]=="number"){var Pr=ye.allocType(St.dtype,xt.length);x(Pr,xt),st.bufferSubData(St.type,Xt,Pr),ye.freeType(Pr)}else(Array.isArray(xt[0])||ke(xt[0]))&&(or=ze(xt),Pr=We(xt,or,St.dtype),st.bufferSubData(St.type,Xt,Pr),ye.freeType(Pr))}else if(d(xt)){or=xt.shape;var Ar=xt.stride,Er=Pr=0,$r=0,lr=0;or.length===1?(Pr=or[0],Er=1,$r=Ar[0],lr=0):or.length===2&&(Pr=or[0],Er=or[1],$r=Ar[0],lr=Ar[1]),or=Array.isArray(xt.data)?St.dtype:l(xt.data),or=ye.allocType(or,Pr*Er),c(or,xt.data,Pr,Er,$r,lr,xt.offset),st.bufferSubData(St.type,Xt,or),ye.freeType(or)}return pt},Jt.profile&&(pt.stats=St.stats),pt.destroy=function(){lt(St)},pt},createStream:function(Pe,Se){var ot=Vt.pop();return ot||(ot=new Sr(Pe)),ot.bind(),Qe(ot,Se,35040,0,1,!1),ot},destroyStream:function(Pe){Vt.push(Pe)},clear:function(){De(Et).forEach(lt),Vt.forEach(lt)},getBuffer:function(Pe){return Pe&&Pe._buffer instanceof Sr?Pe._buffer:null},restore:function(){De(Et).forEach(function(Pe){Pe.buffer=st.createBuffer(),st.bindBuffer(Pe.type,Pe.buffer),st.bufferData(Pe.type,Pe.persistentData||Pe.byteLength,Pe.usage)})},_initBuffer:Qe}}function w(st,rr,Jt,hr){function Sr(Pe){this.id=ft++,lt[this.id]=this,this.buffer=Pe,this.primType=4,this.type=this.vertCount=0}function tt(Pe,Se,ot,ct,pt,St,xt){Pe.buffer.bind();var Pt;if(Se?((Pt=xt)||ke(Se)&&(!d(Se)||ke(Se.data))||(Pt=rr.oes_element_index_uint?5125:5123),Jt._initBuffer(Pe.buffer,Se,ot,Pt,3)):(st.bufferData(34963,St,ot),Pe.buffer.dtype=Pt||5121,Pe.buffer.usage=ot,Pe.buffer.dimension=3,Pe.buffer.byteLength=St),Pt=xt,!xt){switch(Pe.buffer.dtype){case 5121:case 5120:Pt=5121;break;case 5123:case 5122:Pt=5123;break;case 5125:case 5124:Pt=5125}Pe.buffer.dtype=Pt}Pe.type=Pt,Se=pt,0>Se&&(Se=Pe.buffer.byteLength,Pt===5123?Se>>=1:Pt===5125&&(Se>>=2)),Pe.vertCount=Se,Se=ct,0>ct&&(Se=4,ct=Pe.buffer.dimension,ct===1&&(Se=0),ct===2&&(Se=1),ct===3&&(Se=4)),Pe.primType=Se}function Qe(Pe){hr.elementsCount--,delete lt[Pe.id],Pe.buffer.destroy(),Pe.buffer=null}var lt={},ft=0,Et={uint8:5121,uint16:5123};rr.oes_element_index_uint&&(Et.uint32=5125),Sr.prototype.bind=function(){this.buffer.bind()};var Vt=[];return{create:function(Pe,Se){function ot(St){if(St)if(typeof St=="number")ct(St),pt.primType=4,pt.vertCount=St|0,pt.type=5121;else{var xt=null,Pt=35044,Xt=-1,or=-1,Pr=0,Ar=0;Array.isArray(St)||ke(St)||d(St)?xt=St:("data"in St&&(xt=St.data),"usage"in St&&(Pt=Ze[St.usage]),"primitive"in St&&(Xt=Ve[St.primitive]),"count"in St&&(or=St.count|0),"type"in St&&(Ar=Et[St.type]),"length"in St?Pr=St.length|0:(Pr=or,Ar===5123||Ar===5122?Pr*=2:(Ar===5125||Ar===5124)&&(Pr*=4))),tt(pt,xt,Pt,Xt,or,Pr,Ar)}else ct(),pt.primType=4,pt.vertCount=0,pt.type=5121;return ot}var ct=Jt.create(null,34963,!0),pt=new Sr(ct._buffer);return hr.elementsCount++,ot(Pe),ot._reglType="elements",ot._elements=pt,ot.subdata=function(St,xt){return ct.subdata(St,xt),ot},ot.destroy=function(){Qe(pt)},ot},createStream:function(Pe){var Se=Vt.pop();return Se||(Se=new Sr(Jt.create(null,34963,!0,!1)._buffer)),tt(Se,Pe,35040,-1,-1,0,0),Se},destroyStream:function(Pe){Vt.push(Pe)},getElements:function(Pe){return typeof Pe=="function"&&Pe._elements instanceof Sr?Pe._elements:null},clear:function(){De(lt).forEach(Qe)}}}function p(st){for(var rr=ye.allocType(5123,st.length),Jt=0;Jt<st.length;++Jt)if(isNaN(st[Jt]))rr[Jt]=65535;else if(st[Jt]===1/0)rr[Jt]=31744;else if(st[Jt]===-1/0)rr[Jt]=64512;else{dt[0]=st[Jt];var tt=Ft[0],hr=tt>>>31<<15,Sr=(tt<<1>>>24)-127,tt=tt>>13&1023;rr[Jt]=-24>Sr?hr:-14>Sr?hr+(tt+1024>>-14-Sr):15<Sr?hr+31744:hr+(Sr+15<<10)+tt}return rr}function _(st){return Array.isArray(st)||ke(st)}function h(st){return"[object "+st+"]"}function L(st){return Array.isArray(st)&&(st.length===0||typeof st[0]=="number")}function E(st){return!!(Array.isArray(st)&&st.length!==0&&_(st[0]))}function S(st){return Object.prototype.toString.call(st)}function P(st){if(!st)return!1;var rr=S(st);return 0<=Ee.indexOf(rr)?!0:L(st)||E(st)||d(st)}function F(st,rr){st.type===36193?(st.data=p(rr),ye.freeType(rr)):st.data=rr}function I(st,rr,Jt,hr,Sr,tt){if(st=typeof Ke[st]<"u"?Ke[st]:Ct[st]*Ge[rr],tt&&(st*=6),Sr){for(hr=0;1<=Jt;)hr+=st*Jt*Jt,Jt/=2;return hr}return st*Jt*hr}function D(st,rr,Jt,hr,Sr,tt,Qe){function lt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ft(kr,bn){kr.internalformat=bn.internalformat,kr.format=bn.format,kr.type=bn.type,kr.compressed=bn.compressed,kr.premultiplyAlpha=bn.premultiplyAlpha,kr.flipY=bn.flipY,kr.unpackAlignment=bn.unpackAlignment,kr.colorSpace=bn.colorSpace,kr.width=bn.width,kr.height=bn.height,kr.channels=bn.channels}function Et(kr,bn){if(typeof bn=="object"&&bn){"premultiplyAlpha"in bn&&(kr.premultiplyAlpha=bn.premultiplyAlpha),"flipY"in bn&&(kr.flipY=bn.flipY),"alignment"in bn&&(kr.unpackAlignment=bn.alignment),"colorSpace"in bn&&(kr.colorSpace=ur[bn.colorSpace]),"type"in bn&&(kr.type=Nr[bn.type]);var dn=kr.width,Ln=kr.height,ra=kr.channels,ya=!1;"shape"in bn?(dn=bn.shape[0],Ln=bn.shape[1],bn.shape.length===3&&(ra=bn.shape[2],ya=!0)):("radius"in bn&&(dn=Ln=bn.radius),"width"in bn&&(dn=bn.width),"height"in bn&&(Ln=bn.height),"channels"in bn&&(ra=bn.channels,ya=!0)),kr.width=dn|0,kr.height=Ln|0,kr.channels=ra|0,dn=!1,"format"in bn&&(dn=bn.format,Ln=kr.internalformat=Vr[dn],kr.format=Kn[Ln],dn in Nr&&!("type"in bn)&&(kr.type=Nr[dn]),dn in Dr&&(kr.compressed=!0),dn=!0),!ya&&dn?kr.channels=Ct[kr.format]:ya&&!dn&&kr.channels!==Ot[kr.format]&&(kr.format=kr.internalformat=Ot[kr.channels])}}function Vt(kr){st.pixelStorei(37440,kr.flipY),st.pixelStorei(37441,kr.premultiplyAlpha),st.pixelStorei(37443,kr.colorSpace),st.pixelStorei(3317,kr.unpackAlignment)}function Pe(){lt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Se(kr,bn){var dn=null;if(P(bn)?dn=bn:bn&&(Et(kr,bn),"x"in bn&&(kr.xOffset=bn.x|0),"y"in bn&&(kr.yOffset=bn.y|0),P(bn.data)&&(dn=bn.data)),bn.copy){var Ln=Sr.viewportWidth,ra=Sr.viewportHeight;kr.width=kr.width||Ln-kr.xOffset,kr.height=kr.height||ra-kr.yOffset,kr.needsCopy=!0}else if(!dn)kr.width=kr.width||1,kr.height=kr.height||1,kr.channels=kr.channels||4;else if(ke(dn))kr.channels=kr.channels||4,kr.data=dn,"type"in bn||kr.type!==5121||(kr.type=Ae[Object.prototype.toString.call(dn)]|0);else if(L(dn)){switch(kr.channels=kr.channels||4,Ln=dn,ra=Ln.length,kr.type){case 5121:case 5123:case 5125:case 5126:ra=ye.allocType(kr.type,ra),ra.set(Ln),kr.data=ra;break;case 36193:kr.data=p(Ln)}kr.alignment=1,kr.needsFree=!0}else if(d(dn)){Ln=dn.data,Array.isArray(Ln)||kr.type!==5121||(kr.type=Ae[Object.prototype.toString.call(Ln)]|0);var ra=dn.shape,ya=dn.stride,sa,Bn,Qn,Xa;ra.length===3?(Qn=ra[2],Xa=ya[2]):Xa=Qn=1,sa=ra[0],Bn=ra[1],ra=ya[0],ya=ya[1],kr.alignment=1,kr.width=sa,kr.height=Bn,kr.channels=Qn,kr.format=kr.internalformat=Ot[Qn],kr.needsFree=!0,sa=Xa,dn=dn.offset,Qn=kr.width,Xa=kr.height,Bn=kr.channels;for(var mi=ye.allocType(kr.type===36193?5126:kr.type,Qn*Xa*Bn),Yt=0,gr=0;gr<Xa;++gr)for(var un=0;un<Qn;++un)for(var yn=0;yn<Bn;++yn)mi[Yt++]=Ln[ra*un+ya*gr+sa*yn+dn];F(kr,mi)}else if(S(dn)===jt||S(dn)===Nt||S(dn)===Lt)S(dn)===jt||S(dn)===Nt?kr.element=dn:kr.element=dn.canvas,kr.width=kr.element.width,kr.height=kr.element.height,kr.channels=4;else if(S(dn)===Xe)kr.element=dn,kr.width=dn.width,kr.height=dn.height,kr.channels=4;else if(S(dn)===it)kr.element=dn,kr.width=dn.naturalWidth,kr.height=dn.naturalHeight,kr.channels=4;else if(S(dn)===Ye)kr.element=dn,kr.width=dn.videoWidth,kr.height=dn.videoHeight,kr.channels=4;else if(E(dn)){for(Ln=kr.width||dn[0].length,ra=kr.height||dn.length,ya=kr.channels,ya=_(dn[0][0])?ya||dn[0][0].length:ya||1,sa=He.shape(dn),Qn=1,Xa=0;Xa<sa.length;++Xa)Qn*=sa[Xa];Qn=ye.allocType(kr.type===36193?5126:kr.type,Qn),He.flatten(dn,sa,"",Qn),F(kr,Qn),kr.alignment=1,kr.width=Ln,kr.height=ra,kr.channels=ya,kr.format=kr.internalformat=Ot[ya],kr.needsFree=!0}}function ot(kr,bn,dn,Ln,ra){var ya=kr.element,sa=kr.data,Bn=kr.internalformat,Qn=kr.format,Xa=kr.type,mi=kr.width,Yt=kr.height;Vt(kr),ya?st.texSubImage2D(bn,ra,dn,Ln,Qn,Xa,ya):kr.compressed?st.compressedTexSubImage2D(bn,ra,dn,Ln,Bn,mi,Yt,sa):kr.needsCopy?(hr(),st.copyTexSubImage2D(bn,ra,dn,Ln,kr.xOffset,kr.yOffset,mi,Yt)):st.texSubImage2D(bn,ra,dn,Ln,mi,Yt,Qn,Xa,sa)}function ct(){return ma.pop()||new Pe}function pt(kr){kr.needsFree&&ye.freeType(kr.data),Pe.call(kr),ma.push(kr)}function St(){lt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function xt(kr,bn,dn){var Ln=kr.images[0]=ct();kr.mipmask=1,Ln.width=kr.width=bn,Ln.height=kr.height=dn,Ln.channels=kr.channels=4}function Pt(kr,bn){var dn=null;if(P(bn))dn=kr.images[0]=ct(),ft(dn,kr),Se(dn,bn),kr.mipmask=1;else if(Et(kr,bn),Array.isArray(bn.mipmap))for(var Ln=bn.mipmap,ra=0;ra<Ln.length;++ra)dn=kr.images[ra]=ct(),ft(dn,kr),dn.width>>=ra,dn.height>>=ra,Se(dn,Ln[ra]),kr.mipmask|=1<<ra;else dn=kr.images[0]=ct(),ft(dn,kr),Se(dn,bn),kr.mipmask=1;ft(kr,kr.images[0])}function Xt(kr,bn){for(var dn=kr.images,Ln=0;Ln<dn.length&&dn[Ln];++Ln){var ra=dn[Ln],ya=bn,sa=Ln,Bn=ra.element,Qn=ra.data,Xa=ra.internalformat,mi=ra.format,Yt=ra.type,gr=ra.width,un=ra.height;Vt(ra),Bn?st.texImage2D(ya,sa,mi,mi,Yt,Bn):ra.compressed?st.compressedTexImage2D(ya,sa,Xa,gr,un,0,Qn):ra.needsCopy?(hr(),st.copyTexImage2D(ya,sa,mi,ra.xOffset,ra.yOffset,gr,un,0)):st.texImage2D(ya,sa,mi,gr,un,0,mi,Yt,Qn||null)}}function or(){var kr=Ra.pop()||new St;lt.call(kr);for(var bn=kr.mipmask=0;16>bn;++bn)kr.images[bn]=null;return kr}function Pr(kr){for(var bn=kr.images,dn=0;dn<bn.length;++dn)bn[dn]&&pt(bn[dn]),bn[dn]=null;Ra.push(kr)}function Ar(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Er(kr,bn){"min"in bn&&(kr.minFilter=Kt[bn.min],0<=Qt.indexOf(kr.minFilter)&&!("faces"in bn)&&(kr.genMipmaps=!0)),"mag"in bn&&(kr.magFilter=Rt[bn.mag]);var dn=kr.wrapS,Ln=kr.wrapT;if("wrap"in bn){var ra=bn.wrap;typeof ra=="string"?dn=Ln=at[ra]:Array.isArray(ra)&&(dn=at[ra[0]],Ln=at[ra[1]])}else"wrapS"in bn&&(dn=at[bn.wrapS]),"wrapT"in bn&&(Ln=at[bn.wrapT]);if(kr.wrapS=dn,kr.wrapT=Ln,"anisotropic"in bn&&(kr.anisotropic=bn.anisotropic),"mipmap"in bn){switch(dn=!1,typeof bn.mipmap){case"string":kr.mipmapHint=Lr[bn.mipmap],dn=kr.genMipmaps=!0;break;case"boolean":dn=kr.genMipmaps=bn.mipmap;break;case"object":kr.genMipmaps=!1,dn=!0}!dn||"min"in bn||(kr.minFilter=9984)}}function $r(kr,bn){st.texParameteri(bn,10241,kr.minFilter),st.texParameteri(bn,10240,kr.magFilter),st.texParameteri(bn,10242,kr.wrapS),st.texParameteri(bn,10243,kr.wrapT),rr.ext_texture_filter_anisotropic&&st.texParameteri(bn,34046,kr.anisotropic),kr.genMipmaps&&(st.hint(33170,kr.mipmapHint),st.generateMipmap(bn))}function lr(kr){lt.call(this),this.mipmask=0,this.internalformat=6408,this.id=_i++,this.refCount=1,this.target=kr,this.texture=st.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ar,Qe.profile&&(this.stats={size:0})}function br(kr){st.activeTexture(33984),st.bindTexture(kr.target,kr.texture)}function Fr(){var kr=ei[0];kr?st.bindTexture(kr.target,kr.texture):st.bindTexture(3553,null)}function Hr(kr){var bn=kr.texture,dn=kr.unit,Ln=kr.target;0<=dn&&(st.activeTexture(33984+dn),st.bindTexture(Ln,null),ei[dn]=null),st.deleteTexture(bn),kr.texture=null,kr.params=null,kr.pixels=null,kr.refCount=0,delete Ka[kr.id],tt.textureCount--}var Lr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},at={repeat:10497,clamp:33071,mirror:33648},Rt={nearest:9728,linear:9729},Kt=le({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Rt),ur={none:0,browser:37444},Nr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Vr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Dr={};rr.ext_srgb&&(Vr.srgb=35904,Vr.srgba=35906),rr.oes_texture_float&&(Nr.float32=Nr.float=5126),rr.oes_texture_half_float&&(Nr.float16=Nr["half float"]=36193),rr.webgl_depth_texture&&(le(Vr,{depth:6402,"depth stencil":34041}),le(Nr,{uint16:5123,uint32:5125,"depth stencil":34042})),rr.webgl_compressed_texture_s3tc&&le(Dr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),rr.webgl_compressed_texture_atc&&le(Dr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),rr.webgl_compressed_texture_pvrtc&&le(Dr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),rr.webgl_compressed_texture_etc1&&(Dr["rgb etc1"]=36196);var Mr=Array.prototype.slice.call(st.getParameter(34467));Object.keys(Dr).forEach(function(kr){var bn=Dr[kr];0<=Mr.indexOf(bn)&&(Vr[kr]=bn)});var jr=Object.keys(Vr);Jt.textureFormats=jr;var kn=[];Object.keys(Vr).forEach(function(kr){kn[Vr[kr]]=kr});var mn=[];Object.keys(Nr).forEach(function(kr){mn[Nr[kr]]=kr});var Wn=[];Object.keys(Rt).forEach(function(kr){Wn[Rt[kr]]=kr});var In=[];Object.keys(Kt).forEach(function(kr){In[Kt[kr]]=kr});var Jn=[];Object.keys(at).forEach(function(kr){Jn[at[kr]]=kr});var Kn=jr.reduce(function(kr,bn){var dn=Vr[bn];return dn===6409||dn===6406||dn===6409||dn===6410||dn===6402||dn===34041||rr.ext_srgb&&(dn===35904||dn===35906)?kr[dn]=dn:dn===32855||0<=bn.indexOf("rgba")?kr[dn]=6408:kr[dn]=6407,kr},{}),ma=[],Ra=[],_i=0,Ka={},ri=Jt.maxTextureUnits,ei=Array(ri).map(function(){return null});return le(lr.prototype,{bind:function(){this.bindCount+=1;var kr=this.unit;if(0>kr){for(var bn=0;bn<ri;++bn){var dn=ei[bn];if(dn){if(0<dn.bindCount)continue;dn.unit=-1}ei[bn]=this,kr=bn;break}Qe.profile&&tt.maxTextureUnits<kr+1&&(tt.maxTextureUnits=kr+1),this.unit=kr,st.activeTexture(33984+kr),st.bindTexture(this.target,this.texture)}return kr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Hr(this)}}),Qe.profile&&(tt.getTotalTextureSize=function(){var kr=0;return Object.keys(Ka).forEach(function(bn){kr+=Ka[bn].stats.size}),kr}),{create2D:function(kr,bn){function dn(ra,ya){var sa=Ln.texInfo;Ar.call(sa);var Bn=or();return typeof ra=="number"?typeof ya=="number"?xt(Bn,ra|0,ya|0):xt(Bn,ra|0,ra|0):ra?(Er(sa,ra),Pt(Bn,ra)):xt(Bn,1,1),sa.genMipmaps&&(Bn.mipmask=(Bn.width<<1)-1),Ln.mipmask=Bn.mipmask,ft(Ln,Bn),Ln.internalformat=Bn.internalformat,dn.width=Bn.width,dn.height=Bn.height,br(Ln),Xt(Bn,3553),$r(sa,3553),Fr(),Pr(Bn),Qe.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,Bn.width,Bn.height,sa.genMipmaps,!1)),dn.format=kn[Ln.internalformat],dn.type=mn[Ln.type],dn.mag=Wn[sa.magFilter],dn.min=In[sa.minFilter],dn.wrapS=Jn[sa.wrapS],dn.wrapT=Jn[sa.wrapT],dn}var Ln=new lr(3553);return Ka[Ln.id]=Ln,tt.textureCount++,dn(kr,bn),dn.subimage=function(ra,ya,sa,Bn){ya|=0,sa|=0,Bn|=0;var Qn=ct();return ft(Qn,Ln),Qn.width=0,Qn.height=0,Se(Qn,ra),Qn.width=Qn.width||(Ln.width>>Bn)-ya,Qn.height=Qn.height||(Ln.height>>Bn)-sa,br(Ln),ot(Qn,3553,ya,sa,Bn),Fr(),pt(Qn),dn},dn.resize=function(ra,ya){var sa=ra|0,Bn=ya|0||sa;if(sa===Ln.width&&Bn===Ln.height)return dn;dn.width=Ln.width=sa,dn.height=Ln.height=Bn,br(Ln);for(var Qn=0;Ln.mipmask>>Qn;++Qn){var Xa=sa>>Qn,mi=Bn>>Qn;if(!Xa||!mi)break;st.texImage2D(3553,Qn,Ln.format,Xa,mi,0,Ln.format,Ln.type,null)}return Fr(),Qe.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,sa,Bn,!1,!1)),dn},dn._reglType="texture2d",dn._texture=Ln,Qe.profile&&(dn.stats=Ln.stats),dn.destroy=function(){Ln.decRef()},dn},createCube:function(kr,bn,dn,Ln,ra,ya){function sa(Xa,mi,Yt,gr,un,yn){var sn,Cn=Bn.texInfo;for(Ar.call(Cn),sn=0;6>sn;++sn)Qn[sn]=or();if(typeof Xa=="number"||!Xa)for(Xa=Xa|0||1,sn=0;6>sn;++sn)xt(Qn[sn],Xa,Xa);else if(typeof Xa=="object")if(mi)Pt(Qn[0],Xa),Pt(Qn[1],mi),Pt(Qn[2],Yt),Pt(Qn[3],gr),Pt(Qn[4],un),Pt(Qn[5],yn);else if(Er(Cn,Xa),Et(Bn,Xa),"faces"in Xa)for(Xa=Xa.faces,sn=0;6>sn;++sn)ft(Qn[sn],Bn),Pt(Qn[sn],Xa[sn]);else for(sn=0;6>sn;++sn)Pt(Qn[sn],Xa);for(ft(Bn,Qn[0]),Bn.mipmask=Cn.genMipmaps?(Qn[0].width<<1)-1:Qn[0].mipmask,Bn.internalformat=Qn[0].internalformat,sa.width=Qn[0].width,sa.height=Qn[0].height,br(Bn),sn=0;6>sn;++sn)Xt(Qn[sn],34069+sn);for($r(Cn,34067),Fr(),Qe.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,sa.width,sa.height,Cn.genMipmaps,!0)),sa.format=kn[Bn.internalformat],sa.type=mn[Bn.type],sa.mag=Wn[Cn.magFilter],sa.min=In[Cn.minFilter],sa.wrapS=Jn[Cn.wrapS],sa.wrapT=Jn[Cn.wrapT],sn=0;6>sn;++sn)Pr(Qn[sn]);return sa}var Bn=new lr(34067);Ka[Bn.id]=Bn,tt.cubeCount++;var Qn=Array(6);return sa(kr,bn,dn,Ln,ra,ya),sa.subimage=function(Xa,mi,Yt,gr,un){Yt|=0,gr|=0,un|=0;var yn=ct();return ft(yn,Bn),yn.width=0,yn.height=0,Se(yn,mi),yn.width=yn.width||(Bn.width>>un)-Yt,yn.height=yn.height||(Bn.height>>un)-gr,br(Bn),ot(yn,34069+Xa,Yt,gr,un),Fr(),pt(yn),sa},sa.resize=function(Xa){if(Xa|=0,Xa!==Bn.width){sa.width=Bn.width=Xa,sa.height=Bn.height=Xa,br(Bn);for(var mi=0;6>mi;++mi)for(var Yt=0;Bn.mipmask>>Yt;++Yt)st.texImage2D(34069+mi,Yt,Bn.format,Xa>>Yt,Xa>>Yt,0,Bn.format,Bn.type,null);return Fr(),Qe.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,sa.width,sa.height,!1,!0)),sa}},sa._reglType="textureCube",sa._texture=Bn,Qe.profile&&(sa.stats=Bn.stats),sa.destroy=function(){Bn.decRef()},sa},clear:function(){for(var kr=0;kr<ri;++kr)st.activeTexture(33984+kr),st.bindTexture(3553,null),ei[kr]=null;De(Ka).forEach(Hr),tt.cubeCount=0,tt.textureCount=0},getTexture:function(kr){return null},restore:function(){for(var kr=0;kr<ri;++kr){var bn=ei[kr];bn&&(bn.bindCount=0,bn.unit=-1,ei[kr]=null)}De(Ka).forEach(function(dn){dn.texture=st.createTexture(),st.bindTexture(dn.target,dn.texture);for(var Ln=0;32>Ln;++Ln)if((dn.mipmask&1<<Ln)!==0)if(dn.target===3553)st.texImage2D(3553,Ln,dn.internalformat,dn.width>>Ln,dn.height>>Ln,0,dn.internalformat,dn.type,null);else for(var ra=0;6>ra;++ra)st.texImage2D(34069+ra,Ln,dn.internalformat,dn.width>>Ln,dn.height>>Ln,0,dn.internalformat,dn.type,null);$r(dn.texInfo,dn.target)})},refresh:function(){for(var kr=0;kr<ri;++kr){var bn=ei[kr];bn&&(bn.bindCount=0,bn.unit=-1,ei[kr]=null),st.activeTexture(33984+kr),st.bindTexture(3553,null),st.bindTexture(34067,null)}}}}function R(st,rr,Jt,hr,Sr,tt){function Qe(lr,br,Fr){this.target=lr,this.texture=br,this.renderbuffer=Fr;var Hr=lr=0;br?(lr=br.width,Hr=br.height):Fr&&(lr=Fr.width,Hr=Fr.height),this.width=lr,this.height=Hr}function lt(lr){lr&&(lr.texture&&lr.texture._texture.decRef(),lr.renderbuffer&&lr.renderbuffer._renderbuffer.decRef())}function ft(lr,br,Fr){lr&&(lr.texture?lr.texture._texture.refCount+=1:lr.renderbuffer._renderbuffer.refCount+=1)}function Et(lr,br){br&&(br.texture?st.framebufferTexture2D(36160,lr,br.target,br.texture._texture.texture,0):st.framebufferRenderbuffer(36160,lr,36161,br.renderbuffer._renderbuffer.renderbuffer))}function Vt(lr){var br=3553,Fr=null,Hr=null,Lr=lr;return typeof lr=="object"&&(Lr=lr.data,"target"in lr&&(br=lr.target|0)),lr=Lr._reglType,lr==="texture2d"||lr==="textureCube"?Fr=Lr:lr==="renderbuffer"&&(Hr=Lr,br=36161),new Qe(br,Fr,Hr)}function Pe(lr,br,Fr,Hr,Lr){return Fr?(lr=hr.create2D({width:lr,height:br,format:Hr,type:Lr}),lr._texture.refCount=0,new Qe(3553,lr,null)):(lr=Sr.create({width:lr,height:br,format:Hr}),lr._renderbuffer.refCount=0,new Qe(36161,null,lr))}function Se(lr){return lr&&(lr.texture||lr.renderbuffer)}function ot(lr,br,Fr){lr&&(lr.texture?lr.texture.resize(br,Fr):lr.renderbuffer&&lr.renderbuffer.resize(br,Fr),lr.width=br,lr.height=Fr)}function ct(){this.id=Er++,$r[this.id]=this,this.framebuffer=st.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function pt(lr){lr.colorAttachments.forEach(lt),lt(lr.depthAttachment),lt(lr.stencilAttachment),lt(lr.depthStencilAttachment)}function St(lr){st.deleteFramebuffer(lr.framebuffer),lr.framebuffer=null,tt.framebufferCount--,delete $r[lr.id]}function xt(lr){var br;st.bindFramebuffer(36160,lr.framebuffer);var Fr=lr.colorAttachments;for(br=0;br<Fr.length;++br)Et(36064+br,Fr[br]);for(br=Fr.length;br<Jt.maxColorAttachments;++br)st.framebufferTexture2D(36160,36064+br,3553,null,0);st.framebufferTexture2D(36160,33306,3553,null,0),st.framebufferTexture2D(36160,36096,3553,null,0),st.framebufferTexture2D(36160,36128,3553,null,0),Et(36096,lr.depthAttachment),Et(36128,lr.stencilAttachment),Et(33306,lr.depthStencilAttachment),st.checkFramebufferStatus(36160),st.isContextLost(),st.bindFramebuffer(36160,Xt.next?Xt.next.framebuffer:null),Xt.cur=Xt.next,st.getError()}function Pt(lr,br){function Fr(Lr,at){var Rt,Kt=0,ur=0,Nr=!0,Vr=!0;Rt=null;var Dr=!0,Mr="rgba",jr="uint8",kn=1,mn=null,Wn=null,In=null,Jn=!1;typeof Lr=="number"?(Kt=Lr|0,ur=at|0||Kt):Lr?("shape"in Lr?(ur=Lr.shape,Kt=ur[0],ur=ur[1]):("radius"in Lr&&(Kt=ur=Lr.radius),"width"in Lr&&(Kt=Lr.width),"height"in Lr&&(ur=Lr.height)),("color"in Lr||"colors"in Lr)&&(Rt=Lr.color||Lr.colors),Rt||("colorCount"in Lr&&(kn=Lr.colorCount|0),"colorTexture"in Lr&&(Dr=!!Lr.colorTexture,Mr="rgba4"),"colorType"in Lr&&(jr=Lr.colorType,!Dr)&&(jr==="half float"||jr==="float16"?Mr="rgba16f":(jr==="float"||jr==="float32")&&(Mr="rgba32f")),"colorFormat"in Lr&&(Mr=Lr.colorFormat,0<=or.indexOf(Mr)?Dr=!0:0<=Pr.indexOf(Mr)&&(Dr=!1))),("depthTexture"in Lr||"depthStencilTexture"in Lr)&&(Jn=!(!Lr.depthTexture&&!Lr.depthStencilTexture)),"depth"in Lr&&(typeof Lr.depth=="boolean"?Nr=Lr.depth:(mn=Lr.depth,Vr=!1)),"stencil"in Lr&&(typeof Lr.stencil=="boolean"?Vr=Lr.stencil:(Wn=Lr.stencil,Nr=!1)),"depthStencil"in Lr&&(typeof Lr.depthStencil=="boolean"?Nr=Vr=Lr.depthStencil:(In=Lr.depthStencil,Vr=Nr=!1))):Kt=ur=1;var Kn=null,ma=null,Ra=null,_i=null;if(Array.isArray(Rt))Kn=Rt.map(Vt);else if(Rt)Kn=[Vt(Rt)];else for(Kn=Array(kn),Rt=0;Rt<kn;++Rt)Kn[Rt]=Pe(Kt,ur,Dr,Mr,jr);for(Kt=Kt||Kn[0].width,ur=ur||Kn[0].height,mn?ma=Vt(mn):Nr&&!Vr&&(ma=Pe(Kt,ur,Jn,"depth","uint32")),Wn?Ra=Vt(Wn):Vr&&!Nr&&(Ra=Pe(Kt,ur,!1,"stencil","uint8")),In?_i=Vt(In):!mn&&!Wn&&Vr&&Nr&&(_i=Pe(Kt,ur,Jn,"depth stencil","depth stencil")),Nr=null,Rt=0;Rt<Kn.length;++Rt)ft(Kn[Rt]),Kn[Rt]&&Kn[Rt].texture&&(Vr=yt[Kn[Rt].texture._texture.format]*Mt[Kn[Rt].texture._texture.type],Nr===null&&(Nr=Vr));return ft(ma),ft(Ra),ft(_i),pt(Hr),Hr.width=Kt,Hr.height=ur,Hr.colorAttachments=Kn,Hr.depthAttachment=ma,Hr.stencilAttachment=Ra,Hr.depthStencilAttachment=_i,Fr.color=Kn.map(Se),Fr.depth=Se(ma),Fr.stencil=Se(Ra),Fr.depthStencil=Se(_i),Fr.width=Hr.width,Fr.height=Hr.height,xt(Hr),Fr}var Hr=new ct;return tt.framebufferCount++,Fr(lr,br),le(Fr,{resize:function(Lr,at){var Rt=Math.max(Lr|0,1),Kt=Math.max(at|0||Rt,1);if(Rt===Hr.width&&Kt===Hr.height)return Fr;for(var ur=Hr.colorAttachments,Nr=0;Nr<ur.length;++Nr)ot(ur[Nr],Rt,Kt);return ot(Hr.depthAttachment,Rt,Kt),ot(Hr.stencilAttachment,Rt,Kt),ot(Hr.depthStencilAttachment,Rt,Kt),Hr.width=Fr.width=Rt,Hr.height=Fr.height=Kt,xt(Hr),Fr},_reglType:"framebuffer",_framebuffer:Hr,destroy:function(){St(Hr),pt(Hr)},use:function(Lr){Xt.setFBO({framebuffer:Fr},Lr)}})}var Xt={cur:null,next:null,dirty:!1,setFBO:null},or=["rgba"],Pr=["rgba4","rgb565","rgb5 a1"];rr.ext_srgb&&Pr.push("srgba"),rr.ext_color_buffer_half_float&&Pr.push("rgba16f","rgb16f"),rr.webgl_color_buffer_float&&Pr.push("rgba32f");var Ar=["uint8"];rr.oes_texture_half_float&&Ar.push("half float","float16"),rr.oes_texture_float&&Ar.push("float","float32");var Er=0,$r={};return le(Xt,{getFramebuffer:function(lr){return typeof lr=="function"&&lr._reglType==="framebuffer"&&(lr=lr._framebuffer,lr instanceof ct)?lr:null},create:Pt,createCube:function(lr){function br(Hr){var Lr,at={color:null},Rt=0,Kt=null;Lr="rgba";var ur="uint8",Nr=1;if(typeof Hr=="number"?Rt=Hr|0:Hr?("shape"in Hr?Rt=Hr.shape[0]:("radius"in Hr&&(Rt=Hr.radius|0),"width"in Hr?Rt=Hr.width|0:"height"in Hr&&(Rt=Hr.height|0)),("color"in Hr||"colors"in Hr)&&(Kt=Hr.color||Hr.colors),Kt||("colorCount"in Hr&&(Nr=Hr.colorCount|0),"colorType"in Hr&&(ur=Hr.colorType),"colorFormat"in Hr&&(Lr=Hr.colorFormat)),"depth"in Hr&&(at.depth=Hr.depth),"stencil"in Hr&&(at.stencil=Hr.stencil),"depthStencil"in Hr&&(at.depthStencil=Hr.depthStencil)):Rt=1,Kt)if(Array.isArray(Kt))for(Hr=[],Lr=0;Lr<Kt.length;++Lr)Hr[Lr]=Kt[Lr];else Hr=[Kt];else for(Hr=Array(Nr),Kt={radius:Rt,format:Lr,type:ur},Lr=0;Lr<Nr;++Lr)Hr[Lr]=hr.createCube(Kt);for(at.color=Array(Hr.length),Lr=0;Lr<Hr.length;++Lr)Nr=Hr[Lr],Rt=Rt||Nr.width,at.color[Lr]={target:34069,data:Hr[Lr]};for(Lr=0;6>Lr;++Lr){for(Nr=0;Nr<Hr.length;++Nr)at.color[Nr].target=34069+Lr;0<Lr&&(at.depth=Fr[0].depth,at.stencil=Fr[0].stencil,at.depthStencil=Fr[0].depthStencil),Fr[Lr]?Fr[Lr](at):Fr[Lr]=Pt(at)}return le(br,{width:Rt,height:Rt,color:Hr})}var Fr=Array(6);return br(lr),le(br,{faces:Fr,resize:function(Hr){var Lr=Hr|0;if(Lr===br.width)return br;var at=br.color;for(Hr=0;Hr<at.length;++Hr)at[Hr].resize(Lr);for(Hr=0;6>Hr;++Hr)Fr[Hr].resize(Lr);return br.width=br.height=Lr,br},_reglType:"framebufferCube",destroy:function(){Fr.forEach(function(Hr){Hr.destroy()})}})},clear:function(){De($r).forEach(St)},restore:function(){Xt.cur=null,Xt.next=null,Xt.dirty=!0,De($r).forEach(function(lr){lr.framebuffer=st.createFramebuffer(),xt(lr)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(st,rr,Jt,hr,Sr,tt,Qe){function lt(xt){if(xt!==St.currentVAO){var Pt=rr.oes_vertex_array_object;xt?Pt.bindVertexArrayOES(xt.vao):Pt.bindVertexArrayOES(null),St.currentVAO=xt}}function ft(xt){if(xt!==St.currentVAO){if(xt)xt.bindAttrs();else{for(var Pt=rr.angle_instanced_arrays,Xt=0;Xt<ot.length;++Xt){var or=ot[Xt];or.buffer?(st.enableVertexAttribArray(Xt),or.buffer.bind(),st.vertexAttribPointer(Xt,or.size,or.type,or.normalized,or.stride,or.offfset),Pt&&or.divisor&&Pt.vertexAttribDivisorANGLE(Xt,or.divisor)):(st.disableVertexAttribArray(Xt),st.vertexAttrib4f(Xt,or.x,or.y,or.z,or.w))}Qe.elements?st.bindBuffer(34963,Qe.elements.buffer.buffer):st.bindBuffer(34963,null)}St.currentVAO=xt}}function Et(){De(pt).forEach(function(xt){xt.destroy()})}function Vt(){this.id=++ct,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var xt=rr.oes_vertex_array_object;this.vao=xt?xt.createVertexArrayOES():null,pt[this.id]=this,this.buffers=[]}function Pe(){rr.oes_vertex_array_object&&De(pt).forEach(function(xt){xt.refresh()})}var Se=Jt.maxAttributes,ot=Array(Se);for(Jt=0;Jt<Se;++Jt)ot[Jt]=new O;var ct=0,pt={},St={Record:O,scope:{},state:ot,currentVAO:null,targetVAO:null,restore:rr.oes_vertex_array_object?Pe:function(){},createVAO:function(xt){function Pt(or){var Pr;Array.isArray(or)?(Pr=or,Xt.elements&&Xt.ownsElements&&Xt.elements.destroy(),Xt.elements=null,Xt.ownsElements=!1,Xt.offset=0,Xt.count=0,Xt.instances=-1,Xt.primitive=4):(or.elements?(Pr=or.elements,Xt.ownsElements?(typeof Pr=="function"&&Pr._reglType==="elements"?Xt.elements.destroy():Xt.elements(Pr),Xt.ownsElements=!1):tt.getElements(or.elements)?(Xt.elements=or.elements,Xt.ownsElements=!1):(Xt.elements=tt.create(or.elements),Xt.ownsElements=!0)):(Xt.elements=null,Xt.ownsElements=!1),Pr=or.attributes,Xt.offset=0,Xt.count=-1,Xt.instances=-1,Xt.primitive=4,Xt.elements&&(Xt.count=Xt.elements._elements.vertCount,Xt.primitive=Xt.elements._elements.primType),"offset"in or&&(Xt.offset=or.offset|0),"count"in or&&(Xt.count=or.count|0),"instances"in or&&(Xt.instances=or.instances|0),"primitive"in or&&(Xt.primitive=Ve[or.primitive])),or={};var Ar=Xt.attributes;Ar.length=Pr.length;for(var Er=0;Er<Pr.length;++Er){var $r=Pr[Er],lr=Ar[Er]=new O,br=$r.data||$r;if(Array.isArray(br)||ke(br)||d(br)){var Fr;Xt.buffers[Er]&&(Fr=Xt.buffers[Er],ke(br)&&Fr._buffer.byteLength>=br.byteLength?Fr.subdata(br):(Fr.destroy(),Xt.buffers[Er]=null)),Xt.buffers[Er]||(Fr=Xt.buffers[Er]=Sr.create($r,34962,!1,!0)),lr.buffer=Sr.getBuffer(Fr),lr.size=lr.buffer.dimension|0,lr.normalized=!1,lr.type=lr.buffer.dtype,lr.offset=0,lr.stride=0,lr.divisor=0,lr.state=1,or[Er]=1}else Sr.getBuffer($r)?(lr.buffer=Sr.getBuffer($r),lr.size=lr.buffer.dimension|0,lr.normalized=!1,lr.type=lr.buffer.dtype,lr.offset=0,lr.stride=0,lr.divisor=0,lr.state=1):Sr.getBuffer($r.buffer)?(lr.buffer=Sr.getBuffer($r.buffer),lr.size=(+$r.size||lr.buffer.dimension)|0,lr.normalized=!!$r.normalized||!1,lr.type="type"in $r?Le[$r.type]:lr.buffer.dtype,lr.offset=($r.offset||0)|0,lr.stride=($r.stride||0)|0,lr.divisor=($r.divisor||0)|0,lr.state=1):"x"in $r&&(lr.x=+$r.x||0,lr.y=+$r.y||0,lr.z=+$r.z||0,lr.w=+$r.w||0,lr.state=2)}for(Fr=0;Fr<Xt.buffers.length;++Fr)!or[Fr]&&Xt.buffers[Fr]&&(Xt.buffers[Fr].destroy(),Xt.buffers[Fr]=null);return Xt.refresh(),Pt}var Xt=new Vt;return hr.vaoCount+=1,Pt.destroy=function(){for(var or=0;or<Xt.buffers.length;++or)Xt.buffers[or]&&Xt.buffers[or].destroy();Xt.buffers.length=0,Xt.ownsElements&&(Xt.elements.destroy(),Xt.elements=null,Xt.ownsElements=!1),Xt.destroy()},Pt._vao=Xt,Pt._reglType="vao",Pt(xt)},getVAO:function(xt){return typeof xt=="function"&&xt._vao?xt._vao:null},destroyBuffer:function(xt){for(var Pt=0;Pt<ot.length;++Pt){var Xt=ot[Pt];Xt.buffer===xt&&(st.disableVertexAttribArray(Pt),Xt.buffer=null)}},setVAO:rr.oes_vertex_array_object?lt:ft,clear:rr.oes_vertex_array_object?Et:function(){}};return Vt.prototype.bindAttrs=function(){for(var xt=rr.angle_instanced_arrays,Pt=this.attributes,Xt=0;Xt<Pt.length;++Xt){var or=Pt[Xt];or.buffer?(st.enableVertexAttribArray(Xt),st.bindBuffer(34962,or.buffer.buffer),st.vertexAttribPointer(Xt,or.size,or.type,or.normalized,or.stride,or.offset),xt&&or.divisor&&xt.vertexAttribDivisorANGLE(Xt,or.divisor)):(st.disableVertexAttribArray(Xt),st.vertexAttrib4f(Xt,or.x,or.y,or.z,or.w))}for(xt=Pt.length;xt<Se;++xt)st.disableVertexAttribArray(xt);(xt=tt.getElements(this.elements))?st.bindBuffer(34963,xt.buffer.buffer):st.bindBuffer(34963,null)},Vt.prototype.refresh=function(){var xt=rr.oes_vertex_array_object;xt&&(xt.bindVertexArrayOES(this.vao),this.bindAttrs(),St.currentVAO=null,xt.bindVertexArrayOES(null))},Vt.prototype.destroy=function(){if(this.vao){var xt=rr.oes_vertex_array_object;this===St.currentVAO&&(St.currentVAO=null,xt.bindVertexArrayOES(null)),xt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),pt[this.id]&&(delete pt[this.id],--hr.vaoCount)},St}function G(st,rr,Jt,hr){function Sr(ct,pt,St,xt){this.name=ct,this.id=pt,this.location=St,this.info=xt}function tt(ct,pt){for(var St=0;St<ct.length;++St)if(ct[St].id===pt.id){ct[St].location=pt.location;return}ct.push(pt)}function Qe(ct,pt,St){St=ct===35632?Et:Vt;var xt=St[pt];if(!xt){var Pt=rr.str(pt),xt=st.createShader(ct);st.shaderSource(xt,Pt),st.compileShader(xt),St[pt]=xt}return xt}function lt(ct,pt){this.id=ot++,this.fragId=ct,this.vertId=pt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,hr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ft(ct,pt,St){var xt;xt=Qe(35632,ct.fragId);var Pt=Qe(35633,ct.vertId);if(pt=ct.program=st.createProgram(),st.attachShader(pt,xt),st.attachShader(pt,Pt),St)for(xt=0;xt<St.length;++xt)Pt=St[xt],st.bindAttribLocation(pt,Pt[0],Pt[1]);st.linkProgram(pt),Pt=st.getProgramParameter(pt,35718),hr.profile&&(ct.stats.uniformsCount=Pt);var Xt=ct.uniforms;for(xt=0;xt<Pt;++xt)if(St=st.getActiveUniform(pt,xt))if(1<St.size)for(var or=0;or<St.size;++or){var Pr=St.name.replace("[0]","["+or+"]");tt(Xt,new Sr(Pr,rr.id(Pr),st.getUniformLocation(pt,Pr),St))}else tt(Xt,new Sr(St.name,rr.id(St.name),st.getUniformLocation(pt,St.name),St));for(Pt=st.getProgramParameter(pt,35721),hr.profile&&(ct.stats.attributesCount=Pt),ct=ct.attributes,xt=0;xt<Pt;++xt)(St=st.getActiveAttrib(pt,xt))&&tt(ct,new Sr(St.name,rr.id(St.name),st.getAttribLocation(pt,St.name),St))}var Et={},Vt={},Pe={},Se=[],ot=0;return hr.profile&&(Jt.getMaxUniformsCount=function(){var ct=0;return Se.forEach(function(pt){pt.stats.uniformsCount>ct&&(ct=pt.stats.uniformsCount)}),ct},Jt.getMaxAttributesCount=function(){var ct=0;return Se.forEach(function(pt){pt.stats.attributesCount>ct&&(ct=pt.stats.attributesCount)}),ct}),{clear:function(){var ct=st.deleteShader.bind(st);De(Et).forEach(ct),Et={},De(Vt).forEach(ct),Vt={},Se.forEach(function(pt){st.deleteProgram(pt.program)}),Se.length=0,Pe={},Jt.shaderCount=0},program:function(ct,pt,St,xt){var Pt=Pe[pt];Pt||(Pt=Pe[pt]={});var Xt=Pt[ct];if(Xt&&(Xt.refCount++,!xt))return Xt;var or=new lt(pt,ct);return Jt.shaderCount++,ft(or,St,xt),Xt||(Pt[ct]=or),Se.push(or),le(or,{destroy:function(){if(or.refCount--,0>=or.refCount){st.deleteProgram(or.program);var Pr=Se.indexOf(or);Se.splice(Pr,1),Jt.shaderCount--}0>=Pt[or.vertId].refCount&&(st.deleteShader(Vt[or.vertId]),delete Vt[or.vertId],delete Pe[or.fragId][or.vertId]),Object.keys(Pe[or.fragId]).length||(st.deleteShader(Et[or.fragId]),delete Et[or.fragId],delete Pe[or.fragId])}})},restore:function(){Et={},Vt={};for(var ct=0;ct<Se.length;++ct)ft(Se[ct],null,Se[ct].attributes.map(function(pt){return[pt.location,pt.name]}))},shader:Qe,frag:-1,vert:-1}}function Y(st,rr,Jt,hr,Sr,tt,Qe){function lt(Et){var Vt;Vt=rr.next===null?5121:rr.next.colorAttachments[0].texture._texture.type;var Pe=0,Se=0,ot=hr.framebufferWidth,ct=hr.framebufferHeight,pt=null;return ke(Et)?pt=Et:Et&&(Pe=Et.x|0,Se=Et.y|0,ot=(Et.width||hr.framebufferWidth-Pe)|0,ct=(Et.height||hr.framebufferHeight-Se)|0,pt=Et.data||null),Jt(),Et=ot*ct*4,pt||(Vt===5121?pt=new Uint8Array(Et):Vt===5126&&(pt=pt||new Float32Array(Et))),st.pixelStorei(3333,4),st.readPixels(Pe,Se,ot,ct,6408,Vt,pt),pt}function ft(Et){var Vt;return rr.setFBO({framebuffer:Et.framebuffer},function(){Vt=lt(Et)}),Vt}return function(Et){return Et&&"framebuffer"in Et?ft(Et):lt(Et)}}function ee(st){for(var rr=Array(st.length>>2),hr=0;hr<rr.length;hr++)rr[hr]=0;for(hr=0;hr<8*st.length;hr+=8)rr[hr>>5]|=(st.charCodeAt(hr/8)&255)<<24-hr%32;var Jt=8*st.length;st=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var hr=Array(64),Sr,tt,Qe,lt,ft,Et,Vt,Pe,Se,ot,ct;for(rr[Jt>>5]|=128<<24-Jt%32,rr[(Jt+64>>9<<4)+15]=Jt,Pe=0;Pe<rr.length;Pe+=16){for(Jt=st[0],Sr=st[1],tt=st[2],Qe=st[3],lt=st[4],ft=st[5],Et=st[6],Vt=st[7],Se=0;64>Se;Se++){if(16>Se)hr[Se]=rr[Se+Pe];else{ot=Se,ct=hr[Se-2],ct=ie(ct,17)^ie(ct,19)^ct>>>10,ct=he(ct,hr[Se-7]);var pt;pt=hr[Se-15],pt=ie(pt,7)^ie(pt,18)^pt>>>3,hr[ot]=he(he(ct,pt),hr[Se-16])}ot=lt,ot=ie(ot,6)^ie(ot,11)^ie(ot,25),ot=he(he(he(he(Vt,ot),lt&ft^~lt&Et),Gt[Se]),hr[Se]),Vt=Jt,Vt=ie(Vt,2)^ie(Vt,13)^ie(Vt,22),ct=he(Vt,Jt&Sr^Jt&tt^Sr&tt),Vt=Et,Et=ft,ft=lt,lt=he(Qe,ot),Qe=tt,tt=Sr,Sr=Jt,Jt=he(ot,ct)}st[0]=he(Jt,st[0]),st[1]=he(Sr,st[1]),st[2]=he(tt,st[2]),st[3]=he(Qe,st[3]),st[4]=he(lt,st[4]),st[5]=he(ft,st[5]),st[6]=he(Et,st[6]),st[7]=he(Vt,st[7])}for(rr="",hr=0;hr<32*st.length;hr+=8)rr+=String.fromCharCode(st[hr>>5]>>>24-hr%32&255);return rr}function j(st){for(var rr="",Jt,hr=0;hr<st.length;hr++)Jt=st.charCodeAt(hr),rr+="0123456789abcdef".charAt(Jt>>>4&15)+"0123456789abcdef".charAt(Jt&15);return rr}function X(st){for(var rr="",Jt=-1,hr,Sr;++Jt<st.length;)hr=st.charCodeAt(Jt),Sr=Jt+1<st.length?st.charCodeAt(Jt+1):0,55296<=hr&&56319>=hr&&56320<=Sr&&57343>=Sr&&(hr=65536+((hr&1023)<<10)+(Sr&1023),Jt++),127>=hr?rr+=String.fromCharCode(hr):2047>=hr?rr+=String.fromCharCode(192|hr>>>6&31,128|hr&63):65535>=hr?rr+=String.fromCharCode(224|hr>>>12&15,128|hr>>>6&63,128|hr&63):2097151>=hr&&(rr+=String.fromCharCode(240|hr>>>18&7,128|hr>>>12&63,128|hr>>>6&63,128|hr&63));return rr}function ie(st,rr){return st>>>rr|st<<32-rr}function he(st,rr){var Jt=(st&65535)+(rr&65535);return(st>>16)+(rr>>16)+(Jt>>16)<<16|Jt&65535}function K(st){return Array.prototype.slice.call(st)}function $(st){return K(st).join("")}function U(st){function rr(){var Vt=[],Pe=[];return le(function(){Vt.push.apply(Vt,K(arguments))},{def:function(){var Se="v"+Sr++;return Pe.push(Se),0<arguments.length&&(Vt.push(Se,"="),Vt.push.apply(Vt,K(arguments)),Vt.push(";")),Se},toString:function(){return $([0<Pe.length?"var "+Pe.join(",")+";":"",$(Vt)])}})}function Jt(){function Vt(pt,St){Se(pt,St,"=",Pe.def(pt,St),";")}var Pe=rr(),Se=rr(),ot=Pe.toString,ct=Se.toString;return le(function(){Pe.apply(Pe,K(arguments))},{def:Pe.def,entry:Pe,exit:Se,save:Vt,set:function(pt,St,xt){Vt(pt,St),Pe(pt,St,"=",xt,";")},toString:function(){return ot()+ct()}})}var hr=st&&st.cache,Sr=0,tt=[],Qe=[],lt=[],ft=rr(),Et={};return{global:ft,link:function(Vt,Pe){var Se=Pe&&Pe.stable;if(!Se){for(var ot=0;ot<Qe.length;++ot)if(Qe[ot]===Vt&&!lt[ot])return tt[ot]}return ot="g"+Sr++,tt.push(ot),Qe.push(Vt),lt.push(Se),ot},block:rr,proc:function(Vt,Pe){function Se(){var St="a"+ot.length;return ot.push(St),St}var ot=[];Pe=Pe||0;for(var ct=0;ct<Pe;++ct)Se();var ct=Jt(),pt=ct.toString;return Et[Vt]=le(ct,{arg:Se,toString:function(){return $(["function(",ot.join(),"){",pt(),"}"])}})},scope:Jt,cond:function(){var Vt=$(arguments),Pe=Jt(),Se=Jt(),ot=Pe.toString,ct=Se.toString;return le(Pe,{then:function(){return Pe.apply(Pe,K(arguments)),this},else:function(){return Se.apply(Se,K(arguments)),this},toString:function(){var pt=ct();return pt&&(pt="else{"+pt+"}"),$(["if(",Vt,"){",ot(),"}",pt])}})},compile:function(){var Vt=['"use strict";',ft,"return {"];Object.keys(Et).forEach(function(ot){Vt.push('"',ot,'":',Et[ot].toString(),",")}),Vt.push("}");var Pe=$(Vt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Se;return hr&&(Se=j(ee(X(Pe))),hr[Se])?hr[Se].apply(null,Qe):(Pe=Function.apply(null,tt.concat(Pe)),hr&&(hr[Se]=Pe),Pe.apply(null,Qe))}}}function H(st){return Array.isArray(st)||ke(st)||d(st)}function q(st){return st.sort(function(rr,Jt){return rr==="viewport"?-1:Jt==="viewport"?1:rr<Jt?-1:1})}function re(st,rr,Jt,hr){this.thisDep=st,this.contextDep=rr,this.propDep=Jt,this.append=hr}function Z(st){return st&&!(st.thisDep||st.contextDep||st.propDep)}function Q(st){return new re(!1,!1,!1,st)}function oe(st,rr){var Jt=st.type;if(Jt===0)return Jt=st.data.length,new re(!0,1<=Jt,2<=Jt,rr);if(Jt===4)return Jt=st.data,new re(Jt.thisDep,Jt.contextDep,Jt.propDep,rr);if(Jt===5)return new re(!1,!1,!1,rr);if(Jt===6){for(var hr=Jt=!1,Sr=!1,tt=0;tt<st.data.length;++tt){var Qe=st.data[tt];Qe.type===1?Sr=!0:Qe.type===2?hr=!0:Qe.type===3?Jt=!0:Qe.type===0?(Jt=!0,Qe=Qe.data,1<=Qe&&(hr=!0),2<=Qe&&(Sr=!0)):Qe.type===4&&(Jt=Jt||Qe.data.thisDep,hr=hr||Qe.data.contextDep,Sr=Sr||Qe.data.propDep)}return new re(Jt,hr,Sr,rr)}return new re(Jt===3,Jt===2,Jt===1,rr)}function se(st,rr,Jt,hr,Sr,tt,Qe,lt,ft,Et,Vt,Pe,Se,ot,ct,pt){function St(Yt){return Yt.replace(".","_")}function xt(Yt,gr,un){var yn=St(Yt);ya.push(Yt),ra[yn]=Ln[yn]=!!un,sa[yn]=gr}function Pt(Yt,gr,un){var yn=St(Yt);ya.push(Yt),Array.isArray(un)?(Ln[yn]=un.slice(),ra[yn]=un.slice()):Ln[yn]=ra[yn]=un,Bn[yn]=gr}function Xt(){var Yt=U({cache:ct}),gr=Yt.link,un=Yt.global;Yt.id=mi++,Yt.batchId="0";var yn=gr(Qn),sn=Yt.shared={props:"a0"};Object.keys(Qn).forEach(function(wr){sn[wr]=un.def(yn,".",wr)});var Cn=Yt.next={},Tn=Yt.current={};Object.keys(Bn).forEach(function(wr){Array.isArray(Ln[wr])&&(Cn[wr]=un.def(sn.next,".",wr),Tn[wr]=un.def(sn.current,".",wr))});var gn=Yt.constants={};Object.keys(Xa).forEach(function(wr){gn[wr]=un.def(JSON.stringify(Xa[wr]))}),Yt.invoke=function(wr,Br){switch(Br.type){case 0:var An=["this",sn.context,sn.props,Yt.batchId];return wr.def(gr(Br.data),".call(",An.slice(0,Math.max(Br.data.length+1,4)),")");case 1:return wr.def(sn.props,Br.data);case 2:return wr.def(sn.context,Br.data);case 3:return wr.def("this",Br.data);case 4:return Br.data.append(Yt,wr),Br.data.ref;case 5:return Br.data.toString();case 6:return Br.data.map(function(Yn){return Yt.invoke(wr,Yn)})}},Yt.attribCache={};var _r={};return Yt.scopeAttrib=function(wr){if(wr=rr.id(wr),wr in _r)return _r[wr];var Br=Et.scope[wr];return Br||(Br=Et.scope[wr]=new ri),_r[wr]=gr(Br)},Yt}function or(Yt){var gr=Yt.static;Yt=Yt.dynamic;var un;if("profile"in gr){var yn=!!gr.profile;un=Q(function(Cn,Tn){return yn}),un.enable=yn}else if("profile"in Yt){var sn=Yt.profile;un=oe(sn,function(Cn,Tn){return Cn.invoke(Tn,sn)})}return un}function Pr(Yt,gr){var un=Yt.static,yn=Yt.dynamic;if("framebuffer"in un){var sn=un.framebuffer;return sn?(sn=lt.getFramebuffer(sn),Q(function(Tn,gn){var _r=Tn.link(sn),wr=Tn.shared;return gn.set(wr.framebuffer,".next",_r),wr=wr.context,gn.set(wr,".framebufferWidth",_r+".width"),gn.set(wr,".framebufferHeight",_r+".height"),_r})):Q(function(Tn,gn){var _r=Tn.shared;return gn.set(_r.framebuffer,".next","null"),_r=_r.context,gn.set(_r,".framebufferWidth",_r+".drawingBufferWidth"),gn.set(_r,".framebufferHeight",_r+".drawingBufferHeight"),"null"})}if("framebuffer"in yn){var Cn=yn.framebuffer;return oe(Cn,function(Tn,gn){var Br=Tn.invoke(gn,Cn),_r=Tn.shared,wr=_r.framebuffer,Br=gn.def(wr,".getFramebuffer(",Br,")");return gn.set(wr,".next",Br),_r=_r.context,gn.set(_r,".framebufferWidth",Br+"?"+Br+".width:"+_r+".drawingBufferWidth"),gn.set(_r,".framebufferHeight",Br+"?"+Br+".height:"+_r+".drawingBufferHeight"),Br})}return null}function Ar(Yt,gr,un){function yn(gn){if(gn in sn){var _r=sn[gn];gn=!0;var wr=_r.x|0,Br=_r.y|0,An,Yn;return"width"in _r?An=_r.width|0:gn=!1,"height"in _r?Yn=_r.height|0:gn=!1,new re(!gn&&gr&&gr.thisDep,!gn&&gr&&gr.contextDep,!gn&&gr&&gr.propDep,function(Sn,na){var fa=Sn.shared.context,Ma=An;"width"in _r||(Ma=na.def(fa,".","framebufferWidth","-",wr));var ka=Yn;return"height"in _r||(ka=na.def(fa,".","framebufferHeight","-",Br)),[wr,Br,Ma,ka]})}if(gn in Cn){var ua=Cn[gn];return gn=oe(ua,function(Sn,na){var Ia=Sn.invoke(na,ua),fa=Sn.shared.context,Ma=na.def(Ia,".x|0"),ka=na.def(Ia,".y|0"),ga=na.def('"width" in ',Ia,"?",Ia,".width|0:","(",fa,".","framebufferWidth","-",Ma,")"),Ia=na.def('"height" in ',Ia,"?",Ia,".height|0:","(",fa,".","framebufferHeight","-",ka,")");return[Ma,ka,ga,Ia]}),gr&&(gn.thisDep=gn.thisDep||gr.thisDep,gn.contextDep=gn.contextDep||gr.contextDep,gn.propDep=gn.propDep||gr.propDep),gn}return gr?new re(gr.thisDep,gr.contextDep,gr.propDep,function(Sn,na){var fa=Sn.shared.context;return[0,0,na.def(fa,".","framebufferWidth"),na.def(fa,".","framebufferHeight")]}):null}var sn=Yt.static,Cn=Yt.dynamic;if(Yt=yn("viewport")){var Tn=Yt;Yt=new re(Yt.thisDep,Yt.contextDep,Yt.propDep,function(gn,_r){var wr=Tn.append(gn,_r),Br=gn.shared.context;return _r.set(Br,".viewportWidth",wr[2]),_r.set(Br,".viewportHeight",wr[3]),wr})}return{viewport:Yt,scissor_box:yn("scissor.box")}}function Er(Yt,gr){var un=Yt.static;if(typeof un.frag=="string"&&typeof un.vert=="string"){if(0<Object.keys(gr.dynamic).length)return null;var un=gr.static,yn=Object.keys(un);if(0<yn.length&&typeof un[yn[0]]=="number"){for(var sn=[],Cn=0;Cn<yn.length;++Cn)sn.push([un[yn[Cn]]|0,yn[Cn]]);return sn}}return null}function $r(Yt,gr,un){function yn(wr){if(wr in sn){var Br=rr.id(sn[wr]);return wr=Q(function(){return Br}),wr.id=Br,wr}if(wr in Cn){var An=Cn[wr];return oe(An,function(Yn,ua){var Sn=Yn.invoke(ua,An);return ua.def(Yn.shared.strings,".id(",Sn,")")})}return null}var sn=Yt.static,Cn=Yt.dynamic,Tn=yn("frag"),gn=yn("vert"),_r=null;return Z(Tn)&&Z(gn)?(_r=Vt.program(gn.id,Tn.id,null,un),Yt=Q(function(wr,Br){return wr.link(_r)})):Yt=new re(Tn&&Tn.thisDep||gn&&gn.thisDep,Tn&&Tn.contextDep||gn&&gn.contextDep,Tn&&Tn.propDep||gn&&gn.propDep,function(wr,Br){var An=wr.shared.shader,Yn;Yn=Tn?Tn.append(wr,Br):Br.def(An,".","frag");var ua;return ua=gn?gn.append(wr,Br):Br.def(An,".","vert"),Br.def(An+".program("+ua+","+Yn+")")}),{frag:Tn,vert:gn,progVar:Yt,program:_r}}function lr(Yt,gr){function un(Sn,na){if(Sn in yn){var fa=yn[Sn]|0;return na?Cn.offset=fa:Cn.instances=fa,Q(function(ka,ga){return na&&(ka.OFFSET=fa),fa})}if(Sn in sn){var Ma=sn[Sn];return oe(Ma,function(ka,ga){var Ia=ka.invoke(ga,Ma);return na&&(ka.OFFSET=Ia),Ia})}if(na){if(_r)return Q(function(ka,ga){return ka.OFFSET=0});if(Tn)return new re(gn.thisDep,gn.contextDep,gn.propDep,function(ka,ga){return ga.def(ka.shared.vao+".currentVAO?"+ka.shared.vao+".currentVAO.offset:0")})}else if(Tn)return new re(gn.thisDep,gn.contextDep,gn.propDep,function(ka,ga){return ga.def(ka.shared.vao+".currentVAO?"+ka.shared.vao+".currentVAO.instances:-1")});return null}var yn=Yt.static,sn=Yt.dynamic,Cn={},Tn=!1,gn=function(){if("vao"in yn){var Sn=yn.vao;return Sn!==null&&Et.getVAO(Sn)===null&&(Sn=Et.createVAO(Sn)),Tn=!0,Cn.vao=Sn,Q(function(fa){var Ma=Et.getVAO(Sn);return Ma?fa.link(Ma):"null"})}if("vao"in sn){Tn=!0;var na=sn.vao;return oe(na,function(fa,Ma){var ka=fa.invoke(Ma,na);return Ma.def(fa.shared.vao+".getVAO("+ka+")")})}return null}(),_r=!1,wr=function(){if("elements"in yn){var Sn=yn.elements;if(Cn.elements=Sn,H(Sn)){var na=Cn.elements=tt.create(Sn,!0),Sn=tt.getElements(na);_r=!0}else Sn&&(Sn=tt.getElements(Sn),_r=!0);return na=Q(function(Ma,ka){if(Sn){var ga=Ma.link(Sn);return Ma.ELEMENTS=ga}return Ma.ELEMENTS=null}),na.value=Sn,na}if("elements"in sn){_r=!0;var fa=sn.elements;return oe(fa,function(Ma,ka){var ga=Ma.shared,Mo=ga.isBufferArgs,ga=ga.elements,ro=Ma.invoke(ka,fa),Ia=ka.def("null"),Mo=ka.def(Mo,"(",ro,")"),ro=Ma.cond(Mo).then(Ia,"=",ga,".createStream(",ro,");").else(Ia,"=",ga,".getElements(",ro,");");return ka.entry(ro),ka.exit(Ma.cond(Mo).then(ga,".destroyStream(",Ia,");")),Ma.ELEMENTS=Ia})}return Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(Ma,ka){return ka.def(Ma.shared.vao+".currentVAO?"+Ma.shared.elements+".getElements("+Ma.shared.vao+".currentVAO.elements):null")}):null}(),Br=un("offset",!0),An=function(){if("primitive"in yn){var Sn=yn.primitive;return Cn.primitive=Sn,Q(function(fa,Ma){return Ve[Sn]})}if("primitive"in sn){var na=sn.primitive;return oe(na,function(fa,Ma){var ka=fa.constants.primTypes,ga=fa.invoke(Ma,na);return Ma.def(ka,"[",ga,"]")})}return _r?Z(wr)?wr.value?Q(function(fa,Ma){return Ma.def(fa.ELEMENTS,".primType")}):Q(function(){return 4}):new re(wr.thisDep,wr.contextDep,wr.propDep,function(fa,Ma){var ka=fa.ELEMENTS;return Ma.def(ka,"?",ka,".primType:",4)}):Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(fa,Ma){return Ma.def(fa.shared.vao+".currentVAO?"+fa.shared.vao+".currentVAO.primitive:4")}):null}(),Yn=function(){if("count"in yn){var Sn=yn.count|0;return Cn.count=Sn,Q(function(){return Sn})}if("count"in sn){var na=sn.count;return oe(na,function(fa,Ma){return fa.invoke(Ma,na)})}return _r?Z(wr)?wr?Br?new re(Br.thisDep,Br.contextDep,Br.propDep,function(fa,Ma){return Ma.def(fa.ELEMENTS,".vertCount-",fa.OFFSET)}):Q(function(fa,Ma){return Ma.def(fa.ELEMENTS,".vertCount")}):Q(function(){return-1}):new re(wr.thisDep||Br.thisDep,wr.contextDep||Br.contextDep,wr.propDep||Br.propDep,function(fa,Ma){var ka=fa.ELEMENTS;return fa.OFFSET?Ma.def(ka,"?",ka,".vertCount-",fa.OFFSET,":-1"):Ma.def(ka,"?",ka,".vertCount:-1")}):Tn?new re(gn.thisDep,gn.contextDep,gn.propDep,function(fa,Ma){return Ma.def(fa.shared.vao,".currentVAO?",fa.shared.vao,".currentVAO.count:-1")}):null}(),ua=un("instances",!1);return{elements:wr,primitive:An,count:Yn,instances:ua,offset:Br,vao:gn,vaoActive:Tn,elementsActive:_r,static:Cn}}function br(Yt,gr){var un=Yt.static,yn=Yt.dynamic,sn={};return ya.forEach(function(Cn){function Tn(_r,wr){if(Cn in un){var Br=_r(un[Cn]);sn[gn]=Q(function(){return Br})}else if(Cn in yn){var An=yn[Cn];sn[gn]=oe(An,function(Yn,ua){return wr(Yn,ua,Yn.invoke(ua,An))})}}var gn=St(Cn);switch(Cn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Tn(function(_r){return _r},function(_r,wr,Br){return Br});case"depth.func":return Tn(function(_r){return Wt[_r]},function(_r,wr,Br){return wr.def(_r.constants.compareFuncs,"[",Br,"]")});case"depth.range":return Tn(function(_r){return _r},function(_r,wr,Br){return _r=wr.def("+",Br,"[0]"),wr=wr.def("+",Br,"[1]"),[_r,wr]});case"blend.func":return Tn(function(_r){return[Zt["srcRGB"in _r?_r.srcRGB:_r.src],Zt["dstRGB"in _r?_r.dstRGB:_r.dst],Zt["srcAlpha"in _r?_r.srcAlpha:_r.src],Zt["dstAlpha"in _r?_r.dstAlpha:_r.dst]]},function(_r,wr,Br){function An(na,fa){return wr.def('"',na,fa,'" in ',Br,"?",Br,".",na,fa,":",Br,".",na)}_r=_r.constants.blendFuncs;var Yn=An("src","RGB"),Sn=An("dst","RGB"),Yn=wr.def(_r,"[",Yn,"]"),ua=wr.def(_r,"[",An("src","Alpha"),"]"),Sn=wr.def(_r,"[",Sn,"]");return _r=wr.def(_r,"[",An("dst","Alpha"),"]"),[Yn,Sn,ua,_r]});case"blend.equation":return Tn(function(_r){if(typeof _r=="string")return[ei[_r],ei[_r]];if(typeof _r=="object")return[ei[_r.rgb],ei[_r.alpha]]},function(_r,wr,Br){var An=_r.constants.blendEquations,Yn=wr.def(),ua=wr.def();return _r=_r.cond("typeof ",Br,'==="string"'),_r.then(Yn,"=",ua,"=",An,"[",Br,"];"),_r.else(Yn,"=",An,"[",Br,".rgb];",ua,"=",An,"[",Br,".alpha];"),wr(_r),[Yn,ua]});case"blend.color":return Tn(function(_r){return o(4,function(wr){return+_r[wr]})},function(_r,wr,Br){return o(4,function(An){return wr.def("+",Br,"[",An,"]")})});case"stencil.mask":return Tn(function(_r){return _r|0},function(_r,wr,Br){return wr.def(Br,"|0")});case"stencil.func":return Tn(function(_r){return[Wt[_r.cmp||"keep"],_r.ref||0,"mask"in _r?_r.mask:-1]},function(_r,wr,Br){_r=wr.def('"cmp" in ',Br,"?",_r.constants.compareFuncs,"[",Br,".cmp]",":",7680);var An=wr.def(Br,".ref|0");return wr=wr.def('"mask" in ',Br,"?",Br,".mask|0:-1"),[_r,An,wr]});case"stencil.opFront":case"stencil.opBack":return Tn(function(_r){return[Cn==="stencil.opBack"?1029:1028,sr[_r.fail||"keep"],sr[_r.zfail||"keep"],sr[_r.zpass||"keep"]]},function(_r,wr,Br){function An(ua){return wr.def('"',ua,'" in ',Br,"?",Yn,"[",Br,".",ua,"]:",7680)}var Yn=_r.constants.stencilOps;return[Cn==="stencil.opBack"?1029:1028,An("fail"),An("zfail"),An("zpass")]});case"polygonOffset.offset":return Tn(function(_r){return[_r.factor|0,_r.units|0]},function(_r,wr,Br){return _r=wr.def(Br,".factor|0"),wr=wr.def(Br,".units|0"),[_r,wr]});case"cull.face":return Tn(function(_r){var wr=0;return _r==="front"?wr=1028:_r==="back"&&(wr=1029),wr},function(_r,wr,Br){return wr.def(Br,'==="front"?',1028,":",1029)});case"lineWidth":return Tn(function(_r){return _r},function(_r,wr,Br){return Br});case"frontFace":return Tn(function(_r){return Gr[_r]},function(_r,wr,Br){return wr.def(Br+'==="cw"?2304:2305')});case"colorMask":return Tn(function(_r){return _r.map(function(wr){return!!wr})},function(_r,wr,Br){return o(4,function(An){return"!!"+Br+"["+An+"]"})});case"sample.coverage":return Tn(function(_r){return["value"in _r?_r.value:1,!!_r.invert]},function(_r,wr,Br){return _r=wr.def('"value" in ',Br,"?+",Br,".value:1"),wr=wr.def("!!",Br,".invert"),[_r,wr]})}}),sn}function Fr(Yt,gr){var un=Yt.static,yn=Yt.dynamic,sn={};return Object.keys(un).forEach(function(Cn){var Tn=un[Cn],gn;if(typeof Tn=="number"||typeof Tn=="boolean")gn=Q(function(){return Tn});else if(typeof Tn=="function"){var _r=Tn._reglType;_r==="texture2d"||_r==="textureCube"?gn=Q(function(wr){return wr.link(Tn)}):(_r==="framebuffer"||_r==="framebufferCube")&&(gn=Q(function(wr){return wr.link(Tn.color[0])}))}else _(Tn)&&(gn=Q(function(wr){return wr.global.def("[",o(Tn.length,function(Br){return Tn[Br]}),"]")}));gn.value=Tn,sn[Cn]=gn}),Object.keys(yn).forEach(function(Cn){var Tn=yn[Cn];sn[Cn]=oe(Tn,function(gn,_r){return gn.invoke(_r,Tn)})}),sn}function Hr(Yt,gr){var un=Yt.static,yn=Yt.dynamic,sn={};return Object.keys(un).forEach(function(Cn){var Tn=un[Cn],gn=rr.id(Cn),_r=new ri;if(H(Tn))_r.state=1,_r.buffer=Sr.getBuffer(Sr.create(Tn,34962,!1,!0)),_r.type=0;else{var wr=Sr.getBuffer(Tn);if(wr)_r.state=1,_r.buffer=wr,_r.type=0;else if("constant"in Tn){var Br=Tn.constant;_r.buffer="null",_r.state=2,typeof Br=="number"?_r.x=Br:zt.forEach(function(fa,Ma){Ma<Br.length&&(_r[fa]=Br[Ma])})}else{var wr=H(Tn.buffer)?Sr.getBuffer(Sr.create(Tn.buffer,34962,!1,!0)):Sr.getBuffer(Tn.buffer),An=Tn.offset|0,Yn=Tn.stride|0,ua=Tn.size|0,Sn=!!Tn.normalized,na=0;"type"in Tn&&(na=Le[Tn.type]),Tn=Tn.divisor|0,_r.buffer=wr,_r.state=1,_r.size=ua,_r.normalized=Sn,_r.type=na||wr.dtype,_r.offset=An,_r.stride=Yn,_r.divisor=Tn}}sn[Cn]=Q(function(fa,Ma){var ka=fa.attribCache;if(gn in ka)return ka[gn];var ga={isStream:!1};return Object.keys(_r).forEach(function(Ia){ga[Ia]=_r[Ia]}),_r.buffer&&(ga.buffer=fa.link(_r.buffer),ga.type=ga.type||ga.buffer+".dtype"),ka[gn]=ga})}),Object.keys(yn).forEach(function(Cn){var Tn=yn[Cn];sn[Cn]=oe(Tn,function(gn,_r){function wr(ka){_r(Sn[ka],"=",Br,".",ka,"|0;")}var Br=gn.invoke(_r,Tn),ua=gn.shared,An=gn.constants,Yn=ua.isBufferArgs,ua=ua.buffer,Sn={isStream:_r.def(!1)},na=new ri;na.state=1,Object.keys(na).forEach(function(ka){Sn[ka]=_r.def(""+na[ka])});var fa=Sn.buffer,Ma=Sn.type;return _r("if(",Yn,"(",Br,")){",Sn.isStream,"=true;",fa,"=",ua,".createStream(",34962,",",Br,");",Ma,"=",fa,".dtype;","}else{",fa,"=",ua,".getBuffer(",Br,");","if(",fa,"){",Ma,"=",fa,".dtype;",'}else if("constant" in ',Br,"){",Sn.state,"=",2,";","if(typeof "+Br+'.constant === "number"){',Sn[zt[0]],"=",Br,".constant;",zt.slice(1).map(function(ka){return Sn[ka]}).join("="),"=0;","}else{",zt.map(function(ka,ga){return Sn[ka]+"="+Br+".constant.length>"+ga+"?"+Br+".constant["+ga+"]:0;"}).join(""),"}}else{","if(",Yn,"(",Br,".buffer)){",fa,"=",ua,".createStream(",34962,",",Br,".buffer);","}else{",fa,"=",ua,".getBuffer(",Br,".buffer);","}",Ma,'="type" in ',Br,"?",An.glTypes,"[",Br,".type]:",fa,".dtype;",Sn.normalized,"=!!",Br,".normalized;"),wr("size"),wr("offset"),wr("stride"),wr("divisor"),_r("}}"),_r.exit("if(",Sn.isStream,"){",ua,".destroyStream(",fa,");","}"),Sn})}),sn}function Lr(Yt){var gr=Yt.static,un=Yt.dynamic,yn={};return Object.keys(gr).forEach(function(sn){var Cn=gr[sn];yn[sn]=Q(function(Tn,gn){return typeof Cn=="number"||typeof Cn=="boolean"?""+Cn:Tn.link(Cn)})}),Object.keys(un).forEach(function(sn){var Cn=un[sn];yn[sn]=oe(Cn,function(Tn,gn){return Tn.invoke(gn,Cn)})}),yn}function at(Yt,gr,un,yn,sn){function Cn(na){var fa=gn[na];fa&&(wr[na]=fa)}var Tn=Er(Yt,gr),Yn=Pr(Yt),gn=Ar(Yt,Yn),_r=lr(Yt),wr=br(Yt),Br=$r(Yt,sn,Tn);Cn("viewport"),Cn(St("scissor.box"));var An=0<Object.keys(wr).length,Yn={framebuffer:Yn,draw:_r,shader:Br,state:wr,dirty:An,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Yn.profile=or(Yt),Yn.uniforms=Fr(un),Yn.drawVAO=Yn.scopeVAO=_r.vao,!Yn.drawVAO&&Br.program&&!Tn&&Jt.angle_instanced_arrays&&_r.static.elements){var ua=!0;if(Yt=Br.program.attributes.map(function(na){return na=gr.static[na],ua=ua&&!!na,na}),ua&&0<Yt.length){var Sn=Et.getVAO(Et.createVAO({attributes:Yt,elements:_r.static.elements}));Yn.drawVAO=new re(null,null,null,function(na,fa){return na.link(Sn)}),Yn.useVAO=!0}}return Tn?Yn.useVAO=!0:Yn.attributes=Hr(gr),Yn.context=Lr(yn),Yn}function Rt(Yt,gr,un){var yn=Yt.shared.context,sn=Yt.scope();Object.keys(un).forEach(function(Cn){gr.save(yn,"."+Cn);var Tn=un[Cn].append(Yt,gr);Array.isArray(Tn)?sn(yn,".",Cn,"=[",Tn.join(),"];"):sn(yn,".",Cn,"=",Tn,";")}),gr(sn)}function Kt(Yt,gr,un,yn){var gn=Yt.shared,sn=gn.gl,Cn=gn.framebuffer,Tn;bn&&(Tn=gr.def(gn.extensions,".webgl_draw_buffers"));var _r=Yt.constants,gn=_r.drawBuffer,_r=_r.backBuffer;Yt=un?un.append(Yt,gr):gr.def(Cn,".next"),yn||gr("if(",Yt,"!==",Cn,".cur){"),gr("if(",Yt,"){",sn,".bindFramebuffer(",36160,",",Yt,".framebuffer);"),bn&&gr(Tn,".drawBuffersWEBGL(",gn,"[",Yt,".colorAttachments.length]);"),gr("}else{",sn,".bindFramebuffer(",36160,",null);"),bn&&gr(Tn,".drawBuffersWEBGL(",_r,");"),gr("}",Cn,".cur=",Yt,";"),yn||gr("}")}function ur(Yt,gr,un){var yn=Yt.shared,sn=yn.gl,Cn=Yt.current,Tn=Yt.next,gn=yn.current,_r=yn.next,wr=Yt.cond(gn,".dirty");ya.forEach(function(Br){if(Br=St(Br),!(Br in un.state)){var An,Yn;if(Br in Tn){An=Tn[Br],Yn=Cn[Br];var ua=o(Ln[Br].length,function(Sn){return wr.def(An,"[",Sn,"]")});wr(Yt.cond(ua.map(function(Sn,na){return Sn+"!=="+Yn+"["+na+"]"}).join("||")).then(sn,".",Bn[Br],"(",ua,");",ua.map(function(Sn,na){return Yn+"["+na+"]="+Sn}).join(";"),";"))}else An=wr.def(_r,".",Br),ua=Yt.cond(An,"!==",gn,".",Br),wr(ua),Br in sa?ua(Yt.cond(An).then(sn,".enable(",sa[Br],");").else(sn,".disable(",sa[Br],");"),gn,".",Br,"=",An,";"):ua(sn,".",Bn[Br],"(",An,");",gn,".",Br,"=",An,";")}}),Object.keys(un.state).length===0&&wr(gn,".dirty=false;"),gr(wr)}function Nr(Yt,gr,un,yn){var sn=Yt.shared,Cn=Yt.current,Tn=sn.current,gn=sn.gl,_r;q(Object.keys(un)).forEach(function(wr){var Br=un[wr];if(!yn||yn(Br)){var An=Br.append(Yt,gr);if(sa[wr]){var Yn=sa[wr];Z(Br)?(_r=Yt.link(An,{stable:!0}),gr(Yt.cond(_r).then(gn,".enable(",Yn,");").else(gn,".disable(",Yn,");")),gr(Tn,".",wr,"=",_r,";")):(gr(Yt.cond(An).then(gn,".enable(",Yn,");").else(gn,".disable(",Yn,");")),gr(Tn,".",wr,"=",An,";"))}else if(_(An)){var ua=Cn[wr];gr(gn,".",Bn[wr],"(",An,");",An.map(function(Sn,na){return ua+"["+na+"]="+Sn}).join(";"),";")}else Z(Br)?(_r=Yt.link(An,{stable:!0}),gr(gn,".",Bn[wr],"(",_r,");",Tn,".",wr,"=",_r,";")):gr(gn,".",Bn[wr],"(",An,");",Tn,".",wr,"=",An,";")}})}function Vr(Yt,gr){kr&&(Yt.instancing=gr.def(Yt.shared.extensions,".angle_instanced_arrays"))}function Dr(Yt,gr,un,yn,sn){function Cn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Tn(na){ua=gr.def(),na(ua,"=",Cn(),";"),typeof sn=="string"?na(Br,".count+=",sn,";"):na(Br,".count++;"),ot&&(yn?(Sn=gr.def(),na(Sn,"=",Yn,".getNumPendingQueries();")):na(Yn,".beginQuery(",Br,");"))}function gn(na){na(Br,".cpuTime+=",Cn(),"-",ua,";"),ot&&(yn?na(Yn,".pushScopeStats(",Sn,",",Yn,".getNumPendingQueries(),",Br,");"):na(Yn,".endQuery();"))}function _r(na){var fa=gr.def(An,".profile");gr(An,".profile=",na,";"),gr.exit(An,".profile=",fa,";")}var wr=Yt.shared,Br=Yt.stats,An=wr.current,Yn=wr.timer;un=un.profile;var ua,Sn;if(un){if(Z(un)){un.enable?(Tn(gr),gn(gr.exit),_r("true")):_r("false");return}un=un.append(Yt,gr),_r(un)}else un=gr.def(An,".profile");wr=Yt.block(),Tn(wr),gr("if(",un,"){",wr,"}"),Yt=Yt.block(),gn(Yt),gr.exit("if(",un,"){",Yt,"}")}function Mr(Yt,gr,un,yn,sn){function Cn(_r){switch(_r){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function Tn(_r,wr,Br){function An(){gr("if(!",na,".buffer){",ua,".enableVertexAttribArray(",Sn,");}");var ga=Br.type,Ia;Ia=Br.size?gr.def(Br.size,"||",wr):wr,gr("if(",na,".type!==",ga,"||",na,".size!==",Ia,"||",ka.map(function(Mo){return na+"."+Mo+"!=="+Br[Mo]}).join("||"),"){",ua,".bindBuffer(",34962,",",fa,".buffer);",ua,".vertexAttribPointer(",[Sn,Ia,ga,Br.normalized,Br.stride,Br.offset],");",na,".type=",ga,";",na,".size=",Ia,";",ka.map(function(Mo){return na+"."+Mo+"="+Br[Mo]+";"}).join(""),"}"),kr&&(ga=Br.divisor,gr("if(",na,".divisor!==",ga,"){",Yt.instancing,".vertexAttribDivisorANGLE(",[Sn,ga],");",na,".divisor=",ga,";}"))}function Yn(){gr("if(",na,".buffer){",ua,".disableVertexAttribArray(",Sn,");",na,".buffer=null;","}if(",zt.map(function(ga,Ia){return na+"."+ga+"!=="+Ma[Ia]}).join("||"),"){",ua,".vertexAttrib4f(",Sn,",",Ma,");",zt.map(function(ga,Ia){return na+"."+ga+"="+Ma[Ia]+";"}).join(""),"}")}var ua=gn.gl,Sn=gr.def(_r,".location"),na=gr.def(gn.attributes,"[",Sn,"]");_r=Br.state;var fa=Br.buffer,Ma=[Br.x,Br.y,Br.z,Br.w],ka=["buffer","normalized","offset","stride"];_r===1?An():_r===2?Yn():(gr("if(",_r,"===",1,"){"),An(),gr("}else{"),Yn(),gr("}"))}var gn=Yt.shared;yn.forEach(function(_r){var wr=_r.name,Br=un.attributes[wr],An;if(Br){if(!sn(Br))return;An=Br.append(Yt,gr)}else{if(!sn(cn))return;var Yn=Yt.scopeAttrib(wr);An={},Object.keys(new ri).forEach(function(ua){An[ua]=gr.def(Yn,".",ua)})}Tn(Yt.link(_r),Cn(_r.info.type),An)})}function jr(Yt,gr,un,yn,sn,Cn){for(var Tn=Yt.shared,gn=Tn.gl,_r,wr=0;wr<yn.length;++wr){var ua=yn[wr],Br=ua.name,An=ua.info.type,Yn=un.uniforms[Br],ua=Yt.link(ua)+".location",Sn;if(Yn){if(!sn(Yn))continue;if(Z(Yn)){if(Br=Yn.value,An===35678||An===35680)An=Yt.link(Br._texture||Br.color[0]._texture),gr(gn,".uniform1i(",ua,",",An+".bind());"),gr.exit(An,".unbind();");else if(An===35674||An===35675||An===35676)Br=Yt.global.def("new Float32Array(["+Array.prototype.slice.call(Br)+"])"),Yn=2,An===35675?Yn=3:An===35676&&(Yn=4),gr(gn,".uniformMatrix",Yn,"fv(",ua,",false,",Br,");");else{switch(An){case 5126:_r="1f";break;case 35664:_r="2f";break;case 35665:_r="3f";break;case 35666:_r="4f";break;case 35670:_r="1i";break;case 5124:_r="1i";break;case 35671:_r="2i";break;case 35667:_r="2i";break;case 35672:_r="3i";break;case 35668:_r="3i";break;case 35673:_r="4i";break;case 35669:_r="4i"}gr(gn,".uniform",_r,"(",ua,",",_(Br)?Array.prototype.slice.call(Br):Br,");")}continue}else Sn=Yn.append(Yt,gr)}else{if(!sn(cn))continue;Sn=gr.def(Tn.uniforms,"[",rr.id(Br),"]")}switch(An===35678?gr("if(",Sn,"&&",Sn,'._reglType==="framebuffer"){',Sn,"=",Sn,".color[0];","}"):An===35680&&gr("if(",Sn,"&&",Sn,'._reglType==="framebufferCube"){',Sn,"=",Sn,".color[0];","}"),Br=1,An){case 35678:case 35680:An=gr.def(Sn,"._texture"),gr(gn,".uniform1i(",ua,",",An,".bind());"),gr.exit(An,".unbind();");continue;case 5124:case 35670:_r="1i";break;case 35667:case 35671:_r="2i",Br=2;break;case 35668:case 35672:_r="3i",Br=3;break;case 35669:case 35673:_r="4i",Br=4;break;case 5126:_r="1f";break;case 35664:_r="2f",Br=2;break;case 35665:_r="3f",Br=3;break;case 35666:_r="4f",Br=4;break;case 35674:_r="Matrix2fv";break;case 35675:_r="Matrix3fv";break;case 35676:_r="Matrix4fv"}if(_r.charAt(0)==="M"){gr(gn,".uniform",_r,"(",ua,",");var ua=Math.pow(An-35674+2,2),na=Yt.global.def("new Float32Array(",ua,")");Array.isArray(Sn)?gr("false,(",o(ua,function(ka){return na+"["+ka+"]="+Sn[ka]}),",",na,")"):gr("false,(Array.isArray(",Sn,")||",Sn," instanceof Float32Array)?",Sn,":(",o(ua,function(ka){return na+"["+ka+"]="+Sn+"["+ka+"]"}),",",na,")"),gr(");")}else{if(1<Br){for(var An=[],fa=[],Yn=0;Yn<Br;++Yn)Array.isArray(Sn)?fa.push(Sn[Yn]):fa.push(gr.def(Sn+"["+Yn+"]")),Cn&&An.push(gr.def());Cn&&gr("if(!",Yt.batchId,"||",An.map(function(Ma,ka){return Ma+"!=="+fa[ka]}).join("||"),"){",An.map(function(Ma,ka){return Ma+"="+fa[ka]+";"}).join("")),gr(gn,".uniform",_r,"(",ua,",",fa.join(","),");")}else Cn&&(An=gr.def(),gr("if(!",Yt.batchId,"||",An,"!==",Sn,"){",An,"=",Sn,";")),gr(gn,".uniform",_r,"(",ua,",",Sn,");");Cn&&gr("}")}}}function kn(Yt,gr,un,yn){function sn(ga){var Ia=Br[ga];return Ia?Ia.contextDep&&yn.contextDynamic||Ia.propDep?Ia.append(Yt,un):Ia.append(Yt,gr):gr.def(wr,".",ga)}function Cn(){function ga(){un(fa,".drawElementsInstancedANGLE(",[Yn,Sn,Ma,ua+"<<(("+Ma+"-5121)>>1)",na],");")}function Ia(){un(fa,".drawArraysInstancedANGLE(",[Yn,ua,Sn,na],");")}An&&An!=="null"?ka?ga():(un("if(",An,"){"),ga(),un("}else{"),Ia(),un("}")):Ia()}function Tn(){function ga(){un(_r+".drawElements("+[Yn,Sn,Ma,ua+"<<(("+Ma+"-5121)>>1)"]+");")}function Ia(){un(_r+".drawArrays("+[Yn,ua,Sn]+");")}An&&An!=="null"?ka?ga():(un("if(",An,"){"),ga(),un("}else{"),Ia(),un("}")):Ia()}var gn=Yt.shared,_r=gn.gl,wr=gn.draw,Br=yn.draw,An=function(){var ga=Br.elements,Ia=gr;return ga?((ga.contextDep&&yn.contextDynamic||ga.propDep)&&(Ia=un),ga=ga.append(Yt,Ia),Br.elementsActive&&Ia("if("+ga+")"+_r+".bindBuffer(34963,"+ga+".buffer.buffer);")):(ga=Ia.def(),Ia(ga,"=",wr,".","elements",";","if(",ga,"){",_r,".bindBuffer(",34963,",",ga,".buffer.buffer);}","else if(",gn.vao,".currentVAO){",ga,"=",Yt.shared.elements+".getElements("+gn.vao,".currentVAO.elements);",dn?"":"if("+ga+")"+_r+".bindBuffer(34963,"+ga+".buffer.buffer);","}")),ga}(),Yn=sn("primitive"),ua=sn("offset"),Sn=function(){var ga=Br.count,Ia=gr;return ga?((ga.contextDep&&yn.contextDynamic||ga.propDep)&&(Ia=un),ga=ga.append(Yt,Ia)):ga=Ia.def(wr,".","count"),ga}();if(typeof Sn=="number"){if(Sn===0)return}else un("if(",Sn,"){"),un.exit("}");var na,fa;kr&&(na=sn("instances"),fa=Yt.instancing);var Ma=An+".type",ka=Br.elements&&Z(Br.elements)&&!Br.vaoActive;kr&&(typeof na!="number"||0<=na)?typeof na=="string"?(un("if(",na,">0){"),Cn(),un("}else if(",na,"<0){"),Tn(),un("}")):Cn():Tn()}function mn(Yt,gr,un,yn,sn){return gr=Xt(),sn=gr.proc("body",sn),kr&&(gr.instancing=sn.def(gr.shared.extensions,".angle_instanced_arrays")),Yt(gr,sn,un,yn),gr.compile().body}function Wn(Yt,gr,un,yn){Vr(Yt,gr),un.useVAO?un.drawVAO?gr(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,gr),");"):gr(Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"):(gr(Yt.shared.vao,".setVAO(null);"),Mr(Yt,gr,un,yn.attributes,function(){return!0})),jr(Yt,gr,un,yn.uniforms,function(){return!0},!1),kn(Yt,gr,gr,un)}function In(Yt,gr){var un=Yt.proc("draw",1);Vr(Yt,un),Rt(Yt,un,gr.context),Kt(Yt,un,gr.framebuffer),ur(Yt,un,gr),Nr(Yt,un,gr.state),Dr(Yt,un,gr,!1,!0);var yn=gr.shader.progVar.append(Yt,un);if(un(Yt.shared.gl,".useProgram(",yn,".program);"),gr.shader.program)Wn(Yt,un,gr,gr.shader.program);else{un(Yt.shared.vao,".setVAO(null);");var sn=Yt.global.def("{}"),Cn=un.def(yn,".id"),Tn=un.def(sn,"[",Cn,"]");un(Yt.cond(Tn).then(Tn,".call(this,a0);").else(Tn,"=",sn,"[",Cn,"]=",Yt.link(function(gn){return mn(Wn,Yt,gr,gn,1)}),"(",yn,");",Tn,".call(this,a0);"))}0<Object.keys(gr.state).length&&un(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&un(Yt.shared.vao,".setVAO(null);")}function Jn(Yt,gr,un,yn){function sn(){return!0}Yt.batchId="a1",Vr(Yt,gr),Mr(Yt,gr,un,yn.attributes,sn),jr(Yt,gr,un,yn.uniforms,sn,!1),kn(Yt,gr,gr,un)}function Kn(Yt,gr,un,yn){function sn(An){return An.contextDep&&Tn||An.propDep}function Cn(An){return!sn(An)}Vr(Yt,gr);var Tn=un.contextDep,gn=gr.def(),_r=gr.def();Yt.shared.props=_r,Yt.batchId=gn;var wr=Yt.scope(),Br=Yt.scope();gr(wr.entry,"for(",gn,"=0;",gn,"<","a1",";++",gn,"){",_r,"=","a0","[",gn,"];",Br,"}",wr.exit),un.needsContext&&Rt(Yt,Br,un.context),un.needsFramebuffer&&Kt(Yt,Br,un.framebuffer),Nr(Yt,Br,un.state,sn),un.profile&&sn(un.profile)&&Dr(Yt,Br,un,!1,!0),yn?(un.useVAO?un.drawVAO?sn(un.drawVAO)?Br(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,Br),");"):wr(Yt.shared.vao,".setVAO(",un.drawVAO.append(Yt,wr),");"):wr(Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"):(wr(Yt.shared.vao,".setVAO(null);"),Mr(Yt,wr,un,yn.attributes,Cn),Mr(Yt,Br,un,yn.attributes,sn)),jr(Yt,wr,un,yn.uniforms,Cn,!1),jr(Yt,Br,un,yn.uniforms,sn,!0),kn(Yt,wr,Br,un)):(gr=Yt.global.def("{}"),yn=un.shader.progVar.append(Yt,Br),_r=Br.def(yn,".id"),wr=Br.def(gr,"[",_r,"]"),Br(Yt.shared.gl,".useProgram(",yn,".program);","if(!",wr,"){",wr,"=",gr,"[",_r,"]=",Yt.link(function(An){return mn(Jn,Yt,un,An,2)}),"(",yn,");}",wr,".call(this,a0[",gn,"],",gn,");"))}function ma(Yt,gr){function un(wr){return wr.contextDep&&sn||wr.propDep}var yn=Yt.proc("batch",2);Yt.batchId="0",Vr(Yt,yn);var sn=!1,Cn=!0;Object.keys(gr.context).forEach(function(wr){sn=sn||gr.context[wr].propDep}),sn||(Rt(Yt,yn,gr.context),Cn=!1);var Tn=gr.framebuffer,gn=!1;if(Tn?(Tn.propDep?sn=gn=!0:Tn.contextDep&&sn&&(gn=!0),gn||Kt(Yt,yn,Tn)):Kt(Yt,yn,null),gr.state.viewport&&gr.state.viewport.propDep&&(sn=!0),ur(Yt,yn,gr),Nr(Yt,yn,gr.state,function(wr){return!un(wr)}),gr.profile&&un(gr.profile)||Dr(Yt,yn,gr,!1,"a1"),gr.contextDep=sn,gr.needsContext=Cn,gr.needsFramebuffer=gn,Cn=gr.shader.progVar,Cn.contextDep&&sn||Cn.propDep)Kn(Yt,yn,gr,null);else if(Cn=Cn.append(Yt,yn),yn(Yt.shared.gl,".useProgram(",Cn,".program);"),gr.shader.program)Kn(Yt,yn,gr,gr.shader.program);else{yn(Yt.shared.vao,".setVAO(null);");var Tn=Yt.global.def("{}"),gn=yn.def(Cn,".id"),_r=yn.def(Tn,"[",gn,"]");yn(Yt.cond(_r).then(_r,".call(this,a0,a1);").else(_r,"=",Tn,"[",gn,"]=",Yt.link(function(An){return mn(Kn,Yt,gr,An,2)}),"(",Cn,");",_r,".call(this,a0,a1);"))}0<Object.keys(gr.state).length&&yn(Yt.shared.current,".dirty=true;"),Yt.shared.vao&&yn(Yt.shared.vao,".setVAO(null);")}function Ra(Yt,gr){function un(gn){var _r=gr.shader[gn];_r&&(_r=_r.append(Yt,yn),isNaN(_r)?yn.set(sn.shader,"."+gn,_r):yn.set(sn.shader,"."+gn,Yt.link(_r,{stable:!0})))}var yn=Yt.proc("scope",3);Yt.batchId="a2";var sn=Yt.shared,Cn=sn.current;if(Rt(Yt,yn,gr.context),gr.framebuffer&&gr.framebuffer.append(Yt,yn),q(Object.keys(gr.state)).forEach(function(gn){var _r=gr.state[gn],wr=_r.append(Yt,yn);_(wr)?wr.forEach(function(Br,An){isNaN(Br)?yn.set(Yt.next[gn],"["+An+"]",Br):yn.set(Yt.next[gn],"["+An+"]",Yt.link(Br,{stable:!0}))}):Z(_r)?yn.set(sn.next,"."+gn,Yt.link(wr,{stable:!0})):yn.set(sn.next,"."+gn,wr)}),Dr(Yt,yn,gr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(gn){var _r=gr.draw[gn];_r&&(_r=_r.append(Yt,yn),isNaN(_r)?yn.set(sn.draw,"."+gn,_r):yn.set(sn.draw,"."+gn,Yt.link(_r),{stable:!0}))}),Object.keys(gr.uniforms).forEach(function(gn){var _r=gr.uniforms[gn].append(Yt,yn);Array.isArray(_r)&&(_r="["+_r.map(function(wr){return isNaN(wr)?wr:Yt.link(wr,{stable:!0})})+"]"),yn.set(sn.uniforms,"["+Yt.link(rr.id(gn),{stable:!0})+"]",_r)}),Object.keys(gr.attributes).forEach(function(gn){var _r=gr.attributes[gn].append(Yt,yn),wr=Yt.scopeAttrib(gn);Object.keys(new ri).forEach(function(Br){yn.set(wr,"."+Br,_r[Br])})}),gr.scopeVAO){var Tn=gr.scopeVAO.append(Yt,yn);isNaN(Tn)?yn.set(sn.vao,".targetVAO",Tn):yn.set(sn.vao,".targetVAO",Yt.link(Tn,{stable:!0}))}un("vert"),un("frag"),0<Object.keys(gr.state).length&&(yn(Cn,".dirty=true;"),yn.exit(Cn,".dirty=true;")),yn("a1(",Yt.shared.context,",a0,",Yt.batchId,");")}function _i(Yt){if(typeof Yt=="object"&&!_(Yt)){for(var gr=Object.keys(Yt),un=0;un<gr.length;++un)if(fe.isDynamic(Yt[gr[un]]))return!0;return!1}}function Ka(Yt,gr,un){function yn(An,Yn){Tn.forEach(function(ua){var Sn=sn[ua];fe.isDynamic(Sn)&&(Sn=An.invoke(Yn,Sn),Yn(Br,".",ua,"=",Sn,";"))})}var sn=gr.static[un];if(sn&&_i(sn)){var Cn=Yt.global,Tn=Object.keys(sn),gn=!1,_r=!1,wr=!1,Br=Yt.global.def("{}");Tn.forEach(function(An){var Yn=sn[An];if(fe.isDynamic(Yn))typeof Yn=="function"&&(Yn=sn[An]=fe.unbox(Yn)),An=oe(Yn,null),gn=gn||An.thisDep,wr=wr||An.propDep,_r=_r||An.contextDep;else{switch(Cn(Br,".",An,"="),typeof Yn){case"number":Cn(Yn);break;case"string":Cn('"',Yn,'"');break;case"object":Array.isArray(Yn)&&Cn("[",Yn.join(),"]");break;default:Cn(Yt.link(Yn))}Cn(";")}}),gr.dynamic[un]=new fe.DynamicVariable(4,{thisDep:gn,contextDep:_r,propDep:wr,ref:Br,append:yn}),delete gr.static[un]}}var ri=Et.Record,ei={add:32774,subtract:32778,"reverse subtract":32779};Jt.ext_blend_minmax&&(ei.min=32775,ei.max=32776);var kr=Jt.angle_instanced_arrays,bn=Jt.webgl_draw_buffers,dn=Jt.oes_vertex_array_object,Ln={dirty:!0,profile:pt.profile},ra={},ya=[],sa={},Bn={};xt("dither",3024),xt("blend.enable",3042),Pt("blend.color","blendColor",[0,0,0,0]),Pt("blend.equation","blendEquationSeparate",[32774,32774]),Pt("blend.func","blendFuncSeparate",[1,0,1,0]),xt("depth.enable",2929,!0),Pt("depth.func","depthFunc",513),Pt("depth.range","depthRange",[0,1]),Pt("depth.mask","depthMask",!0),Pt("colorMask","colorMask",[!0,!0,!0,!0]),xt("cull.enable",2884),Pt("cull.face","cullFace",1029),Pt("frontFace","frontFace",2305),Pt("lineWidth","lineWidth",1),xt("polygonOffset.enable",32823),Pt("polygonOffset.offset","polygonOffset",[0,0]),xt("sample.alpha",32926),xt("sample.enable",32928),Pt("sample.coverage","sampleCoverage",[1,!1]),xt("stencil.enable",2960),Pt("stencil.mask","stencilMask",-1),Pt("stencil.func","stencilFunc",[519,0,-1]),Pt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Pt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),xt("scissor.enable",3089),Pt("scissor.box","scissor",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]),Pt("viewport","viewport",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]);var Qn={gl:st,context:Se,strings:rr,next:ra,current:Ln,draw:Pe,elements:tt,buffer:Sr,shader:Vt,attributes:Et.state,vao:Et,uniforms:ft,framebuffer:lt,extensions:Jt,timer:ot,isBufferArgs:H},Xa={primTypes:Ve,compareFuncs:Wt,blendFuncs:Zt,blendEquations:ei,stencilOps:sr,glTypes:Le,orientationType:Gr};bn&&(Xa.backBuffer=[1029],Xa.drawBuffer=o(hr.maxDrawbuffers,function(Yt){return Yt===0?[0]:o(Yt,function(gr){return 36064+gr})}));var mi=0;return{next:ra,current:Ln,procs:function(){var Yt=Xt(),gr=Yt.proc("poll"),un=Yt.proc("refresh"),yn=Yt.block();gr(yn),un(yn);var _r=Yt.shared,sn=_r.gl,Cn=_r.next,Tn=_r.current;yn(Tn,".dirty=false;"),Kt(Yt,gr),Kt(Yt,un,null,!0);var gn;kr&&(gn=Yt.link(kr)),Jt.oes_vertex_array_object&&un(Yt.link(Jt.oes_vertex_array_object),".bindVertexArrayOES(null);");var _r=un.def(_r.attributes),wr=un.def(0),Br=Yt.cond(wr,".buffer");Br.then(sn,".enableVertexAttribArray(i);",sn,".bindBuffer(",34962,",",wr,".buffer.buffer);",sn,".vertexAttribPointer(i,",wr,".size,",wr,".type,",wr,".normalized,",wr,".stride,",wr,".offset);").else(sn,".disableVertexAttribArray(i);",sn,".vertexAttrib4f(i,",wr,".x,",wr,".y,",wr,".z,",wr,".w);",wr,".buffer=null;");var An=Yt.link(hr.maxAttributes,{stable:!0});return un("for(var i=0;i<",An,";++i){",wr,"=",_r,"[i];",Br,"}"),kr&&un("for(var i=0;i<",An,";++i){",gn,".vertexAttribDivisorANGLE(i,",_r,"[i].divisor);","}"),un(Yt.shared.vao,".currentVAO=null;",Yt.shared.vao,".setVAO(",Yt.shared.vao,".targetVAO);"),Object.keys(sa).forEach(function(Yn){var ua=sa[Yn],Sn=yn.def(Cn,".",Yn),na=Yt.block();na("if(",Sn,"){",sn,".enable(",ua,")}else{",sn,".disable(",ua,")}",Tn,".",Yn,"=",Sn,";"),un(na),gr("if(",Sn,"!==",Tn,".",Yn,"){",na,"}")}),Object.keys(Bn).forEach(function(Yn){var ua=Bn[Yn],Sn=Ln[Yn],na,fa,Ma=Yt.block();Ma(sn,".",ua,"("),_(Sn)?(ua=Sn.length,na=Yt.global.def(Cn,".",Yn),fa=Yt.global.def(Tn,".",Yn),Ma(o(ua,function(ka){return na+"["+ka+"]"}),");",o(ua,function(ka){return fa+"["+ka+"]="+na+"["+ka+"];"}).join("")),gr("if(",o(ua,function(ka){return na+"["+ka+"]!=="+fa+"["+ka+"]"}).join("||"),"){",Ma,"}")):(na=yn.def(Cn,".",Yn),fa=yn.def(Tn,".",Yn),Ma(na,");",Tn,".",Yn,"=",na,";"),gr("if(",na,"!==",fa,"){",Ma,"}")),un(Ma)}),Yt.compile()}(),compile:function(Yt,gr,un,yn,sn){var Cn=Xt();Cn.stats=Cn.link(sn),Object.keys(gr.static).forEach(function(gn){Ka(Cn,gr,gn)}),Ht.forEach(function(gn){Ka(Cn,Yt,gn)});var Tn=at(Yt,gr,un,yn,Cn);return Tn.shader.program&&(Tn.shader.program.attributes.sort(function(gn,_r){return gn.name<_r.name?-1:1}),Tn.shader.program.uniforms.sort(function(gn,_r){return gn.name<_r.name?-1:1})),In(Cn,Tn),Ra(Cn,Tn),ma(Cn,Tn),le(Cn.compile(),{destroy:function(){Tn.shader.program.destroy()}})}}}function ae(st,rr){for(var Jt=0;Jt<st.length;++Jt)if(st[Jt]===rr)return Jt;return-1}var le=function(st,rr){for(var Jt=Object.keys(rr),hr=0;hr<Jt.length;++hr)st[Jt[hr]]=rr[Jt[hr]];return st},_e=0,fe={DynamicVariable:m,define:function(st,rr){return new m(st,A(rr+""))},isDynamic:function(st){return typeof st=="function"&&!st._reglType||st instanceof m},unbox:T,accessor:A},me={next:typeof requestAnimationFrame=="function"?function(st){return requestAnimationFrame(st)}:function(st){return setTimeout(st,16)},cancel:typeof cancelAnimationFrame=="function"?function(st){return cancelAnimationFrame(st)}:clearTimeout},xe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ye=g();ye.zero=g();var be=function(st,rr){var Jt=1;rr.ext_texture_filter_anisotropic&&(Jt=st.getParameter(34047));var hr=1,Sr=1;rr.webgl_draw_buffers&&(hr=st.getParameter(34852),Sr=st.getParameter(36063));var tt=!!rr.oes_texture_float;if(tt){tt=st.createTexture(),st.bindTexture(3553,tt),st.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Qe=st.createFramebuffer();if(st.bindFramebuffer(36160,Qe),st.framebufferTexture2D(36160,36064,3553,tt,0),st.bindTexture(3553,null),st.checkFramebufferStatus(36160)!==36053)tt=!1;else{st.viewport(0,0,1,1),st.clearColor(1,0,0,1),st.clear(16384);var lt=ye.allocType(5126,4);st.readPixels(0,0,1,1,6408,5126,lt),st.getError()?tt=!1:(st.deleteFramebuffer(Qe),st.deleteTexture(tt),tt=lt[0]===1),ye.freeType(lt)}}return lt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(lt=st.createTexture(),Qe=ye.allocType(5121,36),st.activeTexture(33984),st.bindTexture(34067,lt),st.texImage2D(34069,0,6408,3,3,0,6408,5121,Qe),ye.freeType(Qe),st.bindTexture(34067,null),st.deleteTexture(lt),lt=!st.getError()),{colorBits:[st.getParameter(3410),st.getParameter(3411),st.getParameter(3412),st.getParameter(3413)],depthBits:st.getParameter(3414),stencilBits:st.getParameter(3415),subpixelBits:st.getParameter(3408),extensions:Object.keys(rr).filter(function(ft){return!!rr[ft]}),maxAnisotropic:Jt,maxDrawbuffers:hr,maxColorAttachments:Sr,pointSizeDims:st.getParameter(33901),lineWidthDims:st.getParameter(33902),maxViewportDims:st.getParameter(3386),maxCombinedTextureUnits:st.getParameter(35661),maxCubeMapSize:st.getParameter(34076),maxRenderbufferSize:st.getParameter(34024),maxTextureUnits:st.getParameter(34930),maxTextureSize:st.getParameter(3379),maxAttributes:st.getParameter(34921),maxVertexUniforms:st.getParameter(36347),maxVertexTextureUnits:st.getParameter(35660),maxVaryingVectors:st.getParameter(36348),maxFragmentUniforms:st.getParameter(36349),glsl:st.getParameter(35724),renderer:st.getParameter(7937),vendor:st.getParameter(7936),version:st.getParameter(7938),readFloat:tt,npotTextureCube:lt}},ke=function(st){return st instanceof Uint8Array||st instanceof Uint16Array||st instanceof Uint32Array||st instanceof Int8Array||st instanceof Int16Array||st instanceof Int32Array||st instanceof Float32Array||st instanceof Float64Array||st instanceof Uint8ClampedArray},De=function(st){return Object.keys(st).map(function(rr){return st[rr]})},He={shape:function(st){for(var rr=[];st.length;st=st[0])rr.push(st.length);return rr},flatten:function(st,rr,Jt,hr){var Sr=1;if(rr.length)for(var tt=0;tt<rr.length;++tt)Sr*=rr[tt];else Sr=0;switch(Jt=hr||ye.allocType(Jt,Sr),rr.length){case 0:break;case 1:for(hr=rr[0],rr=0;rr<hr;++rr)Jt[rr]=st[rr];break;case 2:for(hr=rr[0],rr=rr[1],tt=Sr=0;tt<hr;++tt)for(var Qe=st[tt],lt=0;lt<rr;++lt)Jt[Sr++]=Qe[lt];break;case 3:f(st,rr[0],rr[1],rr[2],Jt,0);break;default:y(st,rr,0,Jt,0)}return Jt}},Ae={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Le={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ze={dynamic:35048,stream:35040,static:35044},We=He.flatten,ze=He.shape,Ie=[];Ie[5120]=1,Ie[5122]=2,Ie[5124]=4,Ie[5121]=1,Ie[5123]=2,Ie[5125]=4,Ie[5126]=4;var Ve={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},dt=new Float32Array(1),Ft=new Uint32Array(dt.buffer),Qt=[9984,9986,9985,9987],Ot=[0,6409,6410,6407,6408],Ct={};Ct[6409]=Ct[6406]=Ct[6402]=1,Ct[34041]=Ct[6410]=2,Ct[6407]=Ct[35904]=3,Ct[6408]=Ct[35906]=4;var jt=h("HTMLCanvasElement"),Nt=h("OffscreenCanvas"),Lt=h("CanvasRenderingContext2D"),Xe=h("ImageBitmap"),it=h("HTMLImageElement"),Ye=h("HTMLVideoElement"),Ee=Object.keys(Ae).concat([jt,Nt,Lt,Xe,it,Ye]),Ge=[];Ge[5121]=1,Ge[5126]=4,Ge[36193]=2,Ge[5123]=2,Ge[5125]=4;var Ke=[];Ke[32854]=2,Ke[32855]=2,Ke[36194]=2,Ke[34041]=4,Ke[33776]=.5,Ke[33777]=.5,Ke[33778]=1,Ke[33779]=1,Ke[35986]=.5,Ke[35987]=1,Ke[34798]=1,Ke[35840]=.5,Ke[35841]=.25,Ke[35842]=.5,Ke[35843]=.25,Ke[36196]=.5;var qe=[];qe[32854]=2,qe[32855]=2,qe[36194]=2,qe[33189]=2,qe[36168]=1,qe[34041]=4,qe[35907]=4,qe[34836]=16,qe[34842]=8,qe[34843]=6;var At=function(st,rr,Jt,hr,Sr){function tt(Pe){this.id=Et++,this.refCount=1,this.renderbuffer=Pe,this.format=32854,this.height=this.width=0,Sr.profile&&(this.stats={size:0})}function Qe(Pe){var Se=Pe.renderbuffer;st.bindRenderbuffer(36161,null),st.deleteRenderbuffer(Se),Pe.renderbuffer=null,Pe.refCount=0,delete Vt[Pe.id],hr.renderbufferCount--}var lt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};rr.ext_srgb&&(lt.srgba=35907),rr.ext_color_buffer_half_float&&(lt.rgba16f=34842,lt.rgb16f=34843),rr.webgl_color_buffer_float&&(lt.rgba32f=34836);var ft=[];Object.keys(lt).forEach(function(Pe){ft[lt[Pe]]=Pe});var Et=0,Vt={};return tt.prototype.decRef=function(){0>=--this.refCount&&Qe(this)},Sr.profile&&(hr.getTotalRenderbufferSize=function(){var Pe=0;return Object.keys(Vt).forEach(function(Se){Pe+=Vt[Se].stats.size}),Pe}),{create:function(Pe,Se){function ot(pt,St){var xt=0,Pt=0,Xt=32854;if(typeof pt=="object"&&pt?("shape"in pt?(Pt=pt.shape,xt=Pt[0]|0,Pt=Pt[1]|0):("radius"in pt&&(xt=Pt=pt.radius|0),"width"in pt&&(xt=pt.width|0),"height"in pt&&(Pt=pt.height|0)),"format"in pt&&(Xt=lt[pt.format])):typeof pt=="number"?(xt=pt|0,Pt=typeof St=="number"?St|0:xt):pt||(xt=Pt=1),xt!==ct.width||Pt!==ct.height||Xt!==ct.format)return ot.width=ct.width=xt,ot.height=ct.height=Pt,ct.format=Xt,st.bindRenderbuffer(36161,ct.renderbuffer),st.renderbufferStorage(36161,Xt,xt,Pt),Sr.profile&&(ct.stats.size=qe[ct.format]*ct.width*ct.height),ot.format=ft[ct.format],ot}var ct=new tt(st.createRenderbuffer());return Vt[ct.id]=ct,hr.renderbufferCount++,ot(Pe,Se),ot.resize=function(pt,St){var xt=pt|0,Pt=St|0||xt;return xt===ct.width&&Pt===ct.height||(ot.width=ct.width=xt,ot.height=ct.height=Pt,st.bindRenderbuffer(36161,ct.renderbuffer),st.renderbufferStorage(36161,ct.format,xt,Pt),Sr.profile&&(ct.stats.size=qe[ct.format]*ct.width*ct.height)),ot},ot._reglType="renderbuffer",ot._renderbuffer=ct,Sr.profile&&(ot.stats=ct.stats),ot.destroy=function(){ct.decRef()},ot},clear:function(){De(Vt).forEach(Qe)},restore:function(){De(Vt).forEach(function(Pe){Pe.renderbuffer=st.createRenderbuffer(),st.bindRenderbuffer(36161,Pe.renderbuffer),st.renderbufferStorage(36161,Pe.format,Pe.width,Pe.height)}),st.bindRenderbuffer(36161,null)}}},yt=[];yt[6408]=4,yt[6407]=3;var Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2;var Gt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],zt=["x","y","z","w"],Ht="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Zt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Wt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},sr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Gr={cw:2304,ccw:2305},cn=new re(!1,!1,!1,function(){}),qr=function(st,rr){function Jt(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function hr(Vt,Pe,Se){var ot=Qe.pop()||new Jt;ot.startQueryIndex=Vt,ot.endQueryIndex=Pe,ot.sum=0,ot.stats=Se,lt.push(ot)}if(!rr.ext_disjoint_timer_query)return null;var Sr=[],tt=[],Qe=[],lt=[],ft=[],Et=[];return{beginQuery:function(Vt){var Pe=Sr.pop()||rr.ext_disjoint_timer_query.createQueryEXT();rr.ext_disjoint_timer_query.beginQueryEXT(35007,Pe),tt.push(Pe),hr(tt.length-1,tt.length,Vt)},endQuery:function(){rr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:hr,update:function(){var Vt,Pe;if(Vt=tt.length,Vt!==0){Et.length=Math.max(Et.length,Vt+1),ft.length=Math.max(ft.length,Vt+1),ft[0]=0;var Se=Et[0]=0;for(Pe=Vt=0;Pe<tt.length;++Pe){var ot=tt[Pe];rr.ext_disjoint_timer_query.getQueryObjectEXT(ot,34919)?(Se+=rr.ext_disjoint_timer_query.getQueryObjectEXT(ot,34918),Sr.push(ot)):tt[Vt++]=ot,ft[Pe+1]=Se,Et[Pe+1]=Vt}for(tt.length=Vt,Pe=Vt=0;Pe<lt.length;++Pe){var Se=lt[Pe],ct=Se.startQueryIndex,ot=Se.endQueryIndex;Se.sum+=ft[ot]-ft[ct],ct=Et[ct],ot=Et[ot],ot===ct?(Se.stats.gpuTime+=Se.sum/1e6,Qe.push(Se)):(Se.startQueryIndex=ct,Se.endQueryIndex=ot,lt[Vt++]=Se)}lt.length=Vt}},getNumPendingQueries:function(){return tt.length},clear:function(){Sr.push.apply(Sr,tt);for(var Vt=0;Vt<Sr.length;Vt++)rr.ext_disjoint_timer_query.deleteQueryEXT(Sr[Vt]);tt.length=0,Sr.length=0},restore:function(){tt.length=0,Sr.length=0}}};return function(st){function rr(){if(Dr.length===0)Xt&&Xt.update(),mn=null;else{mn=me.next(rr),Vt();for(var In=Dr.length-1;0<=In;--In){var Jn=Dr[In];Jn&&Jn(Ar,null,0)}ot.flush(),Xt&&Xt.update()}}function Jt(){!mn&&0<Dr.length&&(mn=me.next(rr))}function hr(){mn&&(me.cancel(rr),mn=null)}function Sr(In){In.preventDefault(),hr(),Mr.forEach(function(Jn){Jn()})}function tt(In){ot.getError(),pt.restore(),Hr.restore(),lr.restore(),Lr.restore(),at.restore(),Rt.restore(),Fr.restore(),Xt&&Xt.restore(),Kt.procs.refresh(),Jt(),jr.forEach(function(Jn){Jn()})}function Qe(In){function Jn(Ln,ra){var ya={},sa={};return Object.keys(Ln).forEach(function(Bn){var Qn=Ln[Bn];if(fe.isDynamic(Qn))sa[Bn]=fe.unbox(Qn,Bn);else{if(ra&&Array.isArray(Qn)){for(var Xa=0;Xa<Qn.length;++Xa)if(fe.isDynamic(Qn[Xa])){sa[Bn]=fe.unbox(Qn,Bn);return}}ya[Bn]=Qn}}),{dynamic:sa,static:ya}}function Kn(Ln){for(;dn.length<Ln;)dn.push(null);return dn}var ma=Jn(In.context||{},!0),Ra=Jn(In.uniforms||{},!0),_i=Jn(In.attributes||{},!1);In=Jn(function(Ln){function ra(sa){if(sa in ya){var Bn=ya[sa];delete ya[sa],Object.keys(Bn).forEach(function(Qn){ya[sa+"."+Qn]=Bn[Qn]})}}var ya=le({},Ln);return delete ya.uniforms,delete ya.attributes,delete ya.context,delete ya.vao,"stencil"in ya&&ya.stencil.op&&(ya.stencil.opBack=ya.stencil.opFront=ya.stencil.op,delete ya.stencil.op),ra("blend"),ra("depth"),ra("cull"),ra("stencil"),ra("polygonOffset"),ra("scissor"),ra("sample"),"vao"in Ln&&(ya.vao=Ln.vao),ya}(In),!1);var Ka={gpuTime:0,cpuTime:0,count:0},ri=Kt.compile(In,_i,Ra,ma,Ka),ei=ri.draw,kr=ri.batch,bn=ri.scope,dn=[];return le(function(Ln,ra){var ya;if(typeof Ln=="function")return bn.call(this,null,Ln,0);if(typeof ra=="function")if(typeof Ln=="number")for(ya=0;ya<Ln;++ya)bn.call(this,null,ra,ya);else if(Array.isArray(Ln))for(ya=0;ya<Ln.length;++ya)bn.call(this,Ln[ya],ra,ya);else return bn.call(this,Ln,ra,0);else if(typeof Ln=="number"){if(0<Ln)return kr.call(this,Kn(Ln|0),Ln|0)}else if(Array.isArray(Ln)){if(Ln.length)return kr.call(this,Ln,Ln.length)}else return ei.call(this,Ln)},{stats:Ka,destroy:function(){ri.destroy()}})}function lt(In,Jn){var Kn=0;Kt.procs.poll();var ma=Jn.color;ma&&(ot.clearColor(+ma[0]||0,+ma[1]||0,+ma[2]||0,+ma[3]||0),Kn|=16384),"depth"in Jn&&(ot.clearDepth(+Jn.depth),Kn|=256),"stencil"in Jn&&(ot.clearStencil(Jn.stencil|0),Kn|=1024),ot.clear(Kn)}function ft(In){return Dr.push(In),Jt(),{cancel:function(){function Jn(){var ma=ae(Dr,Jn);Dr[ma]=Dr[Dr.length-1],--Dr.length,0>=Dr.length&&hr()}var Kn=ae(Dr,In);Dr[Kn]=Jn}}}function Et(){var In=Nr.viewport,Jn=Nr.scissor_box;In[0]=In[1]=Jn[0]=Jn[1]=0,Ar.viewportWidth=Ar.framebufferWidth=Ar.drawingBufferWidth=In[2]=Jn[2]=ot.drawingBufferWidth,Ar.viewportHeight=Ar.framebufferHeight=Ar.drawingBufferHeight=In[3]=Jn[3]=ot.drawingBufferHeight}function Vt(){Ar.tick+=1,Ar.time=Se(),Et(),Kt.procs.poll()}function Pe(){Lr.refresh(),Et(),Kt.procs.refresh(),Xt&&Xt.update()}function Se(){return(xe()-or)/1e3}if(st=v(st),!st)return null;var ot=st.gl,ct=ot.getContextAttributes();ot.isContextLost();var pt=s(ot,st);if(!pt)return null;var ur=e(),St={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xt=st.cachedCode||{},Pt=pt.extensions,Xt=qr(ot,Pt),or=xe(),Er=ot.drawingBufferWidth,Pr=ot.drawingBufferHeight,Ar={tick:0,time:0,viewportWidth:Er,viewportHeight:Pr,framebufferWidth:Er,framebufferHeight:Pr,drawingBufferWidth:Er,drawingBufferHeight:Pr,pixelRatio:st.pixelRatio},Er={elements:null,primitive:4,count:-1,offset:0,instances:-1},$r=be(ot,Pt),lr=M(ot,St,st,function(In){return Fr.destroyBuffer(In)}),br=w(ot,Pt,lr,St),Fr=z(ot,Pt,$r,St,lr,br,Er),Hr=G(ot,ur,St,st),Lr=D(ot,Pt,$r,function(){Kt.procs.poll()},Ar,St,st),at=At(ot,Pt,$r,St,st),Rt=R(ot,Pt,$r,Lr,at,St),Kt=se(ot,ur,Pt,$r,lr,br,Lr,Rt,{},Fr,Hr,Er,Ar,Xt,xt,st),ur=Y(ot,Rt,Kt.procs.poll,Ar),Nr=Kt.next,Vr=ot.canvas,Dr=[],Mr=[],jr=[],kn=[st.onDestroy],mn=null;Vr&&(Vr.addEventListener("webglcontextlost",Sr,!1),Vr.addEventListener("webglcontextrestored",tt,!1));var Wn=Rt.setFBO=Qe({framebuffer:fe.define.call(null,1,"framebuffer")});return Pe(),ct=le(Qe,{clear:function(In){if("framebuffer"in In)if(In.framebuffer&&In.framebuffer_reglType==="framebufferCube")for(var Jn=0;6>Jn;++Jn)Wn(le({framebuffer:In.framebuffer.faces[Jn]},In),lt);else Wn(In,lt);else lt(null,In)},prop:fe.define.bind(null,1),context:fe.define.bind(null,2),this:fe.define.bind(null,3),draw:Qe({}),buffer:function(In){return lr.create(In,34962,!1,!1)},elements:function(In){return br.create(In,!1)},texture:Lr.create2D,cube:Lr.createCube,renderbuffer:at.create,framebuffer:Rt.create,framebufferCube:Rt.createCube,vao:Fr.createVAO,attributes:ct,frame:ft,on:function(In,Jn){var Kn;switch(In){case"frame":return ft(Jn);case"lost":Kn=Mr;break;case"restore":Kn=jr;break;case"destroy":Kn=kn}return Kn.push(Jn),{cancel:function(){for(var ma=0;ma<Kn.length;++ma)if(Kn[ma]===Jn){Kn[ma]=Kn[Kn.length-1],Kn.pop();break}}}},limits:$r,hasExtension:function(In){return 0<=$r.extensions.indexOf(In.toLowerCase())},read:ur,destroy:function(){Dr.length=0,hr(),Vr&&(Vr.removeEventListener("webglcontextlost",Sr),Vr.removeEventListener("webglcontextrestored",tt)),Hr.clear(),Rt.clear(),at.clear(),Fr.clear(),Lr.clear(),br.clear(),lr.clear(),Xt&&Xt.clear(),kn.forEach(function(In){In()})},_gl:ot,_refresh:Pe,poll:function(){Vt(),Xt&&Xt.update()},now:Se,stats:St,getCachedCode:function(){return xt},preloadCachedCode:function(In){Object.entries(In).forEach(function(Jn){xt[Jn[0]]=Jn[1]})}}),st.onDone(null,ct),ct}})},{}],285:[function(t,N,V){var m=t("buffer"),u=m.Buffer;function A(e,a){for(var i in e)a[i]=e[i]}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?N.exports=m:(A(m,V),V.Buffer=T);function T(e,a,i){return u(e,a,i)}T.prototype=Object.create(u.prototype),A(u,T),T.from=function(e,a,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return u(e,a,i)},T.alloc=function(e,a,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=u(e);return a!==void 0?typeof i=="string"?n.fill(a,i):n.fill(a):n.fill(0),n},T.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return u(e)},T.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(e)}},{buffer:85}],286:[function(t,N,V){N.exports=A;var m=t("events").EventEmitter,u=t("inherits");u(A,m),A.Readable=t("readable-stream/lib/_stream_readable.js"),A.Writable=t("readable-stream/lib/_stream_writable.js"),A.Duplex=t("readable-stream/lib/_stream_duplex.js"),A.Transform=t("readable-stream/lib/_stream_transform.js"),A.PassThrough=t("readable-stream/lib/_stream_passthrough.js"),A.finished=t("readable-stream/lib/internal/streams/end-of-stream.js"),A.pipeline=t("readable-stream/lib/internal/streams/pipeline.js"),A.Stream=A;function A(){m.call(this)}A.prototype.pipe=function(T,e){var a=this;function i(g){T.writable&&T.write(g)===!1&&a.pause&&a.pause()}a.on("data",i);function n(){a.readable&&a.resume&&a.resume()}T.on("drain",n),!T._isStdio&&(!e||e.end!==!1)&&(a.on("end",v),a.on("close",s));var r=!1;function v(){r||(r=!0,T.end())}function s(){r||(r=!0,typeof T.destroy=="function"&&T.destroy())}function o(g){if(b(),m.listenerCount(this,"error")===0)throw g}a.on("error",o),T.on("error",o);function b(){a.removeListener("data",i),T.removeListener("drain",n),a.removeListener("end",v),a.removeListener("close",s),a.removeListener("error",o),T.removeListener("error",o),a.removeListener("end",b),a.removeListener("close",b),T.removeListener("close",b)}return a.on("end",b),a.on("close",b),T.on("close",b),T.emit("pipe",a),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(t,N,V){function m(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var u={};function A(n,r,v){v||(v=Error);function s(b,g,d){return typeof r=="string"?r:r(b,g,d)}var o=function(b){m(g,b);function g(d,f,y){return b.call(this,s(d,f,y))||this}return g}(v);o.prototype.name=v.name,o.prototype.code=n,u[n]=o}function T(n,r){if(Array.isArray(n)){var v=n.length;return n=n.map(function(s){return String(s)}),v>2?"one of ".concat(r," ").concat(n.slice(0,v-1).join(", "),", or ")+n[v-1]:v===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}else return"of ".concat(r," ").concat(String(n))}function e(n,r,v){return n.substr(!v||v<0?0:+v,r.length)===r}function a(n,r,v){return(v===void 0||v>n.length)&&(v=n.length),n.substring(v-r.length,v)===r}function i(n,r,v){return typeof v!="number"&&(v=0),v+r.length>n.length?!1:n.indexOf(r,v)!==-1}A("ERR_INVALID_OPT_VALUE",function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'},TypeError),A("ERR_INVALID_ARG_TYPE",function(n,r,v){var s;typeof r=="string"&&e(r,"not ")?(s="must not be",r=r.replace(/^not /,"")):s="must be";var o;if(a(n," argument"))o="The ".concat(n," ").concat(s," ").concat(T(r,"type"));else{var b=i(n,".")?"property":"argument";o='The "'.concat(n,'" ').concat(b," ").concat(s," ").concat(T(r,"type"))}return o+=". Received type ".concat(typeof v),o},TypeError),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),A("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"}),A("ERR_STREAM_PREMATURE_CLOSE","Premature close"),A("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"}),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),A("ERR_STREAM_WRITE_AFTER_END","write after end"),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),N.exports.codes=u},{}],288:[function(t,N,V){(function(m){(function(){var u=Object.keys||function(s){var o=[];for(var b in s)o.push(b);return o};N.exports=n;var A=t("./_stream_readable"),T=t("./_stream_writable");t("inherits")(n,A);for(var e=u(T.prototype),a=0;a<e.length;a++){var i=e[a];n.prototype[i]||(n.prototype[i]=T.prototype[i])}function n(s){if(!(this instanceof n))return new n(s);A.call(this,s),T.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||m.nextTick(v,this)}function v(s){s.end()}Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(t,N,V){N.exports=u;var m=t("./_stream_transform");t("inherits")(u,m);function u(A){if(!(this instanceof u))return new u(A);m.call(this,A)}u.prototype._transform=function(A,T,e){e(null,A)}},{"./_stream_transform":291,inherits:231}],290:[function(t,N,V){(function(m,u){(function(){N.exports=S;var A;S.ReadableState=E,t("events").EventEmitter;var T=function(oe,se){return oe.listeners(se).length},e=t("./internal/streams/stream"),a=t("buffer").Buffer,i=u.Uint8Array||function(){};function n(Q){return a.from(Q)}function r(Q){return a.isBuffer(Q)||Q instanceof i}var v=t("util"),s;v&&v.debuglog?s=v.debuglog("stream"):s=function(){};var o=t("./internal/streams/buffer_list"),b=t("./internal/streams/destroy"),g=t("./internal/streams/state"),d=g.getHighWaterMark,f=t("../errors").codes,y=f.ERR_INVALID_ARG_TYPE,l=f.ERR_STREAM_PUSH_AFTER_EOF,x=f.ERR_METHOD_NOT_IMPLEMENTED,c=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,M,w,p;t("inherits")(S,e);var _=b.errorOrDestroy,h=["error","close","destroy","pause","resume"];function L(Q,oe,se){if(typeof Q.prependListener=="function")return Q.prependListener(oe,se);!Q._events||!Q._events[oe]?Q.on(oe,se):Array.isArray(Q._events[oe])?Q._events[oe].unshift(se):Q._events[oe]=[se,Q._events[oe]]}function E(Q,oe,se){A=A||t("./_stream_duplex"),Q=Q||{},typeof se!="boolean"&&(se=oe instanceof A),this.objectMode=!!Q.objectMode,se&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=d(this,Q,"readableHighWaterMark",se),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(M||(M=t("string_decoder/").StringDecoder),this.decoder=new M(Q.encoding),this.encoding=Q.encoding)}function S(Q){if(A=A||t("./_stream_duplex"),!(this instanceof S))return new S(Q);var oe=this instanceof A;this._readableState=new E(Q,this,oe),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),e.call(this)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(oe){!this._readableState||(this._readableState.destroyed=oe)}}),S.prototype.destroy=b.destroy,S.prototype._undestroy=b.undestroy,S.prototype._destroy=function(Q,oe){oe(Q)},S.prototype.push=function(Q,oe){var se=this._readableState,ae;return se.objectMode?ae=!0:typeof Q=="string"&&(oe=oe||se.defaultEncoding,oe!==se.encoding&&(Q=a.from(Q,oe),oe=""),ae=!0),P(this,Q,oe,!1,ae)},S.prototype.unshift=function(Q){return P(this,Q,null,!0,!1)};function P(Q,oe,se,ae,le){s("readableAddChunk",oe);var _e=Q._readableState;if(oe===null)_e.reading=!1,z(Q,_e);else{var fe;if(le||(fe=I(_e,oe)),fe)_(Q,fe);else if(_e.objectMode||oe&&oe.length>0)if(typeof oe!="string"&&!_e.objectMode&&Object.getPrototypeOf(oe)!==a.prototype&&(oe=n(oe)),ae)_e.endEmitted?_(Q,new c):F(Q,_e,oe,!0);else if(_e.ended)_(Q,new l);else{if(_e.destroyed)return!1;_e.reading=!1,_e.decoder&&!se?(oe=_e.decoder.write(oe),_e.objectMode||oe.length!==0?F(Q,_e,oe,!1):ee(Q,_e)):F(Q,_e,oe,!1)}else ae||(_e.reading=!1,ee(Q,_e))}return!_e.ended&&(_e.length<_e.highWaterMark||_e.length===0)}function F(Q,oe,se,ae){oe.flowing&&oe.length===0&&!oe.sync?(oe.awaitDrain=0,Q.emit("data",se)):(oe.length+=oe.objectMode?1:se.length,ae?oe.buffer.unshift(se):oe.buffer.push(se),oe.needReadable&&G(Q)),ee(Q,oe)}function I(Q,oe){var se;return!r(oe)&&typeof oe!="string"&&oe!==void 0&&!Q.objectMode&&(se=new y("chunk",["string","Buffer","Uint8Array"],oe)),se}S.prototype.isPaused=function(){return this._readableState.flowing===!1},S.prototype.setEncoding=function(Q){M||(M=t("string_decoder/").StringDecoder);var oe=new M(Q);this._readableState.decoder=oe,this._readableState.encoding=this._readableState.decoder.encoding;for(var se=this._readableState.buffer.head,ae="";se!==null;)ae+=oe.write(se.data),se=se.next;return this._readableState.buffer.clear(),ae!==""&&this._readableState.buffer.push(ae),this._readableState.length=ae.length,this};var D=1073741824;function R(Q){return Q>=D?Q=D:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}function O(Q,oe){return Q<=0||oe.length===0&&oe.ended?0:oe.objectMode?1:Q!==Q?oe.flowing&&oe.length?oe.buffer.head.data.length:oe.length:(Q>oe.highWaterMark&&(oe.highWaterMark=R(Q)),Q<=oe.length?Q:oe.ended?oe.length:(oe.needReadable=!0,0))}S.prototype.read=function(Q){s("read",Q),Q=parseInt(Q,10);var oe=this._readableState,se=Q;if(Q!==0&&(oe.emittedReadable=!1),Q===0&&oe.needReadable&&((oe.highWaterMark!==0?oe.length>=oe.highWaterMark:oe.length>0)||oe.ended))return s("read: emitReadable",oe.length,oe.ended),oe.length===0&&oe.ended?q(this):G(this),null;if(Q=O(Q,oe),Q===0&&oe.ended)return oe.length===0&&q(this),null;var ae=oe.needReadable;s("need readable",ae),(oe.length===0||oe.length-Q<oe.highWaterMark)&&(ae=!0,s("length less than watermark",ae)),oe.ended||oe.reading?(ae=!1,s("reading or ended",ae)):ae&&(s("do read"),oe.reading=!0,oe.sync=!0,oe.length===0&&(oe.needReadable=!0),this._read(oe.highWaterMark),oe.sync=!1,oe.reading||(Q=O(se,oe)));var le;return Q>0?le=H(Q,oe):le=null,le===null?(oe.needReadable=oe.length<=oe.highWaterMark,Q=0):(oe.length-=Q,oe.awaitDrain=0),oe.length===0&&(oe.ended||(oe.needReadable=!0),se!==Q&&oe.ended&&q(this)),le!==null&&this.emit("data",le),le};function z(Q,oe){if(s("onEofChunk"),!oe.ended){if(oe.decoder){var se=oe.decoder.end();se&&se.length&&(oe.buffer.push(se),oe.length+=oe.objectMode?1:se.length)}oe.ended=!0,oe.sync?G(Q):(oe.needReadable=!1,oe.emittedReadable||(oe.emittedReadable=!0,Y(Q)))}}function G(Q){var oe=Q._readableState;s("emitReadable",oe.needReadable,oe.emittedReadable),oe.needReadable=!1,oe.emittedReadable||(s("emitReadable",oe.flowing),oe.emittedReadable=!0,m.nextTick(Y,Q))}function Y(Q){var oe=Q._readableState;s("emitReadable_",oe.destroyed,oe.length,oe.ended),!oe.destroyed&&(oe.length||oe.ended)&&(Q.emit("readable"),oe.emittedReadable=!1),oe.needReadable=!oe.flowing&&!oe.ended&&oe.length<=oe.highWaterMark,U(Q)}function ee(Q,oe){oe.readingMore||(oe.readingMore=!0,m.nextTick(j,Q,oe))}function j(Q,oe){for(;!oe.reading&&!oe.ended&&(oe.length<oe.highWaterMark||oe.flowing&&oe.length===0);){var se=oe.length;if(s("maybeReadMore read 0"),Q.read(0),se===oe.length)break}oe.readingMore=!1}S.prototype._read=function(Q){_(this,new x("_read()"))},S.prototype.pipe=function(Q,oe){var se=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=Q;break;case 1:ae.pipes=[ae.pipes,Q];break;default:ae.pipes.push(Q);break}ae.pipesCount+=1,s("pipe count=%d opts=%j",ae.pipesCount,oe);var le=(!oe||oe.end!==!1)&&Q!==m.stdout&&Q!==m.stderr,_e=le?me:Le;ae.endEmitted?m.nextTick(_e):se.once("end",_e),Q.on("unpipe",fe);function fe(Ze,We){s("onunpipe"),Ze===se&&We&&We.hasUnpiped===!1&&(We.hasUnpiped=!0,be())}function me(){s("onend"),Q.end()}var xe=X(se);Q.on("drain",xe);var ye=!1;function be(){s("cleanup"),Q.removeListener("close",He),Q.removeListener("finish",Ae),Q.removeListener("drain",xe),Q.removeListener("error",De),Q.removeListener("unpipe",fe),se.removeListener("end",me),se.removeListener("end",Le),se.removeListener("data",ke),ye=!0,ae.awaitDrain&&(!Q._writableState||Q._writableState.needDrain)&&xe()}se.on("data",ke);function ke(Ze){s("ondata");var We=Q.write(Ze);s("dest.write",We),We===!1&&((ae.pipesCount===1&&ae.pipes===Q||ae.pipesCount>1&&Z(ae.pipes,Q)!==-1)&&!ye&&(s("false write response, pause",ae.awaitDrain),ae.awaitDrain++),se.pause())}function De(Ze){s("onerror",Ze),Le(),Q.removeListener("error",De),T(Q,"error")===0&&_(Q,Ze)}L(Q,"error",De);function He(){Q.removeListener("finish",Ae),Le()}Q.once("close",He);function Ae(){s("onfinish"),Q.removeListener("close",He),Le()}Q.once("finish",Ae);function Le(){s("unpipe"),se.unpipe(Q)}return Q.emit("pipe",se),ae.flowing||(s("pipe resume"),se.resume()),Q};function X(Q){return function(){var se=Q._readableState;s("pipeOnDrain",se.awaitDrain),se.awaitDrain&&se.awaitDrain--,se.awaitDrain===0&&T(Q,"data")&&(se.flowing=!0,U(Q))}}S.prototype.unpipe=function(Q){var oe=this._readableState,se={hasUnpiped:!1};if(oe.pipesCount===0)return this;if(oe.pipesCount===1)return Q&&Q!==oe.pipes?this:(Q||(Q=oe.pipes),oe.pipes=null,oe.pipesCount=0,oe.flowing=!1,Q&&Q.emit("unpipe",this,se),this);if(!Q){var ae=oe.pipes,le=oe.pipesCount;oe.pipes=null,oe.pipesCount=0,oe.flowing=!1;for(var _e=0;_e<le;_e++)ae[_e].emit("unpipe",this,{hasUnpiped:!1});return this}var fe=Z(oe.pipes,Q);return fe===-1?this:(oe.pipes.splice(fe,1),oe.pipesCount-=1,oe.pipesCount===1&&(oe.pipes=oe.pipes[0]),Q.emit("unpipe",this,se),this)},S.prototype.on=function(Q,oe){var se=e.prototype.on.call(this,Q,oe),ae=this._readableState;return Q==="data"?(ae.readableListening=this.listenerCount("readable")>0,ae.flowing!==!1&&this.resume()):Q==="readable"&&!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,s("on readable",ae.length,ae.reading),ae.length?G(this):ae.reading||m.nextTick(he,this)),se},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(Q,oe){var se=e.prototype.removeListener.call(this,Q,oe);return Q==="readable"&&m.nextTick(ie,this),se},S.prototype.removeAllListeners=function(Q){var oe=e.prototype.removeAllListeners.apply(this,arguments);return(Q==="readable"||Q===void 0)&&m.nextTick(ie,this),oe};function ie(Q){var oe=Q._readableState;oe.readableListening=Q.listenerCount("readable")>0,oe.resumeScheduled&&!oe.paused?oe.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function he(Q){s("readable nexttick read 0"),Q.read(0)}S.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(s("resume"),Q.flowing=!Q.readableListening,K(this,Q)),Q.paused=!1,this};function K(Q,oe){oe.resumeScheduled||(oe.resumeScheduled=!0,m.nextTick($,Q,oe))}function $(Q,oe){s("resume",oe.reading),oe.reading||Q.read(0),oe.resumeScheduled=!1,Q.emit("resume"),U(Q),oe.flowing&&!oe.reading&&Q.read(0)}S.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(Q){var oe=Q._readableState;for(s("flow",oe.flowing);oe.flowing&&Q.read()!==null;);}S.prototype.wrap=function(Q){var oe=this,se=this._readableState,ae=!1;Q.on("end",function(){if(s("wrapped end"),se.decoder&&!se.ended){var fe=se.decoder.end();fe&&fe.length&&oe.push(fe)}oe.push(null)}),Q.on("data",function(fe){if(s("wrapped data"),se.decoder&&(fe=se.decoder.write(fe)),!(se.objectMode&&fe==null)&&!(!se.objectMode&&(!fe||!fe.length))){var me=oe.push(fe);me||(ae=!0,Q.pause())}});for(var le in Q)this[le]===void 0&&typeof Q[le]=="function"&&(this[le]=function(me){return function(){return Q[me].apply(Q,arguments)}}(le));for(var _e=0;_e<h.length;_e++)Q.on(h[_e],this.emit.bind(this,h[_e]));return this._read=function(fe){s("wrapped _read",fe),ae&&(ae=!1,Q.resume())},this},typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=t("./internal/streams/async_iterator")),w(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(oe){this._readableState&&(this._readableState.flowing=oe)}}),S._fromList=H,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function H(Q,oe){if(oe.length===0)return null;var se;return oe.objectMode?se=oe.buffer.shift():!Q||Q>=oe.length?(oe.decoder?se=oe.buffer.join(""):oe.buffer.length===1?se=oe.buffer.first():se=oe.buffer.concat(oe.length),oe.buffer.clear()):se=oe.buffer.consume(Q,oe.decoder),se}function q(Q){var oe=Q._readableState;s("endReadable",oe.endEmitted),oe.endEmitted||(oe.ended=!0,m.nextTick(re,oe,Q))}function re(Q,oe){if(s("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,oe.readable=!1,oe.emit("end"),Q.autoDestroy)){var se=oe._writableState;(!se||se.autoDestroy&&se.finished)&&oe.destroy()}}typeof Symbol=="function"&&(S.from=function(Q,oe){return p===void 0&&(p=t("./internal/streams/from")),p(S,Q,oe)});function Z(Q,oe){for(var se=0,ae=Q.length;se<ae;se++)if(Q[se]===oe)return se;return-1}}).call(this)}).call(this,t("_process"),typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(t,N,V){N.exports=n;var m=t("../errors").codes,u=m.ERR_METHOD_NOT_IMPLEMENTED,A=m.ERR_MULTIPLE_CALLBACK,T=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=m.ERR_TRANSFORM_WITH_LENGTH_0,a=t("./_stream_duplex");t("inherits")(n,a);function i(s,o){var b=this._transformState;b.transforming=!1;var g=b.writecb;if(g===null)return this.emit("error",new A);b.writechunk=null,b.writecb=null,o!=null&&this.push(o),g(s);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function n(s){if(!(this instanceof n))return new n(s);a.call(this,s),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",r)}function r(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(o,b){v(s,o,b)}):v(this,null,null)}n.prototype.push=function(s,o){return this._transformState.needTransform=!1,a.prototype.push.call(this,s,o)},n.prototype._transform=function(s,o,b){b(new u("_transform()"))},n.prototype._write=function(s,o,b){var g=this._transformState;if(g.writecb=b,g.writechunk=s,g.writeencoding=o,!g.transforming){var d=this._readableState;(g.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},n.prototype._read=function(s){var o=this._transformState;o.writechunk!==null&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},n.prototype._destroy=function(s,o){a.prototype._destroy.call(this,s,function(b){o(b)})};function v(s,o,b){if(o)return s.emit("error",o);if(b!=null&&s.push(b),s._writableState.length)throw new e;if(s._transformState.transforming)throw new T;return s.push(null)}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(t,N,V){(function(m,u){(function(){N.exports=E;function A(U){var H=this;this.next=null,this.entry=null,this.finish=function(){$(H,U)}}var T;E.WritableState=h;var e={deprecate:t("util-deprecate")},a=t("./internal/streams/stream"),i=t("buffer").Buffer,n=u.Uint8Array||function(){};function r(U){return i.from(U)}function v(U){return i.isBuffer(U)||U instanceof n}var s=t("./internal/streams/destroy"),o=t("./internal/streams/state"),b=o.getHighWaterMark,g=t("../errors").codes,d=g.ERR_INVALID_ARG_TYPE,f=g.ERR_METHOD_NOT_IMPLEMENTED,y=g.ERR_MULTIPLE_CALLBACK,l=g.ERR_STREAM_CANNOT_PIPE,x=g.ERR_STREAM_DESTROYED,c=g.ERR_STREAM_NULL_VALUES,M=g.ERR_STREAM_WRITE_AFTER_END,w=g.ERR_UNKNOWN_ENCODING,p=s.errorOrDestroy;t("inherits")(E,a);function _(){}function h(U,H,q){T=T||t("./_stream_duplex"),U=U||{},typeof q!="boolean"&&(q=H instanceof T),this.objectMode=!!U.objectMode,q&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=b(this,U,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=U.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){z(H,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new A(this)}h.prototype.getBuffer=function(){for(var H=this.bufferedRequest,q=[];H;)q.push(H),H=H.next;return q},function(){try{Object.defineProperty(h.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(H){return L.call(this,H)?!0:this!==E?!1:H&&H._writableState instanceof h}})):L=function(H){return H instanceof this};function E(U){T=T||t("./_stream_duplex");var H=this instanceof T;if(!H&&!L.call(E,this))return new E(U);this._writableState=new h(U,this,H),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),a.call(this)}E.prototype.pipe=function(){p(this,new l)};function S(U,H){var q=new M;p(U,q),m.nextTick(H,q)}function P(U,H,q,re){var Z;return q===null?Z=new c:typeof q!="string"&&!H.objectMode&&(Z=new d("chunk",["string","Buffer"],q)),Z?(p(U,Z),m.nextTick(re,Z),!1):!0}E.prototype.write=function(U,H,q){var re=this._writableState,Z=!1,Q=!re.objectMode&&v(U);return Q&&!i.isBuffer(U)&&(U=r(U)),typeof H=="function"&&(q=H,H=null),Q?H="buffer":H||(H=re.defaultEncoding),typeof q!="function"&&(q=_),re.ending?S(this,q):(Q||P(this,re,U,q))&&(re.pendingcb++,Z=I(this,re,Q,U,H,q)),Z},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&ee(this,U))},E.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new w(H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function F(U,H,q){return!U.objectMode&&U.decodeStrings!==!1&&typeof H=="string"&&(H=i.from(H,q)),H}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(U,H,q,re,Z,Q){if(!q){var oe=F(H,re,Z);re!==oe&&(q=!0,Z="buffer",re=oe)}var se=H.objectMode?1:re.length;H.length+=se;var ae=H.length<H.highWaterMark;if(ae||(H.needDrain=!0),H.writing||H.corked){var le=H.lastBufferedRequest;H.lastBufferedRequest={chunk:re,encoding:Z,isBuf:q,callback:Q,next:null},le?le.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else D(U,H,!1,se,re,Z,Q);return ae}function D(U,H,q,re,Z,Q,oe){H.writelen=re,H.writecb=oe,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new x("write")):q?U._writev(Z,H.onwrite):U._write(Z,Q,H.onwrite),H.sync=!1}function R(U,H,q,re,Z){--H.pendingcb,q?(m.nextTick(Z,re),m.nextTick(he,U,H),U._writableState.errorEmitted=!0,p(U,re)):(Z(re),U._writableState.errorEmitted=!0,p(U,re),he(U,H))}function O(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function z(U,H){var q=U._writableState,re=q.sync,Z=q.writecb;if(typeof Z!="function")throw new y;if(O(q),H)R(U,q,re,H,Z);else{var Q=j(q)||U.destroyed;!Q&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&ee(U,q),re?m.nextTick(G,U,q,Q,Z):G(U,q,Q,Z)}}function G(U,H,q,re){q||Y(U,H),H.pendingcb--,re(),he(U,H)}function Y(U,H){H.length===0&&H.needDrain&&(H.needDrain=!1,U.emit("drain"))}function ee(U,H){H.bufferProcessing=!0;var q=H.bufferedRequest;if(U._writev&&q&&q.next){var re=H.bufferedRequestCount,Z=new Array(re),Q=H.corkedRequestsFree;Q.entry=q;for(var oe=0,se=!0;q;)Z[oe]=q,q.isBuf||(se=!1),q=q.next,oe+=1;Z.allBuffers=se,D(U,H,!0,H.length,Z,"",Q.finish),H.pendingcb++,H.lastBufferedRequest=null,Q.next?(H.corkedRequestsFree=Q.next,Q.next=null):H.corkedRequestsFree=new A(H),H.bufferedRequestCount=0}else{for(;q;){var ae=q.chunk,le=q.encoding,_e=q.callback,fe=H.objectMode?1:ae.length;if(D(U,H,!1,fe,ae,le,_e),q=q.next,H.bufferedRequestCount--,H.writing)break}q===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=q,H.bufferProcessing=!1}E.prototype._write=function(U,H,q){q(new f("_write()"))},E.prototype._writev=null,E.prototype.end=function(U,H,q){var re=this._writableState;return typeof U=="function"?(q=U,U=null,H=null):typeof H=="function"&&(q=H,H=null),U!=null&&this.write(U,H),re.corked&&(re.corked=1,this.uncork()),re.ending||K(this,re,q),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function j(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function X(U,H){U._final(function(q){H.pendingcb--,q&&p(U,q),H.prefinished=!0,U.emit("prefinish"),he(U,H)})}function ie(U,H){!H.prefinished&&!H.finalCalled&&(typeof U._final=="function"&&!H.destroyed?(H.pendingcb++,H.finalCalled=!0,m.nextTick(X,U,H)):(H.prefinished=!0,U.emit("prefinish")))}function he(U,H){var q=j(H);if(q&&(ie(U,H),H.pendingcb===0&&(H.finished=!0,U.emit("finish"),H.autoDestroy))){var re=U._readableState;(!re||re.autoDestroy&&re.endEmitted)&&U.destroy()}return q}function K(U,H,q){H.ending=!0,he(U,H),q&&(H.finished?m.nextTick(q):U.once("finish",q)),H.ended=!0,U.writable=!1}function $(U,H,q){var re=U.entry;for(U.entry=null;re;){var Z=re.callback;H.pendingcb--,Z(q),re=re.next}H.corkedRequestsFree.next=U}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(H){!this._writableState||(this._writableState.destroyed=H)}}),E.prototype.destroy=s.destroy,E.prototype._undestroy=s.undestroy,E.prototype._destroy=function(U,H){H(U)}}).call(this)}).call(this,t("_process"),typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(t,N,V){(function(m){(function(){var u;function A(x,c,M){return c in x?Object.defineProperty(x,c,{value:M,enumerable:!0,configurable:!0,writable:!0}):x[c]=M,x}var T=t("./end-of-stream"),e=Symbol("lastResolve"),a=Symbol("lastReject"),i=Symbol("error"),n=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),s=Symbol("stream");function o(x,c){return{value:x,done:c}}function b(x){var c=x[e];if(c!==null){var M=x[s].read();M!==null&&(x[r]=null,x[e]=null,x[a]=null,c(o(M,!1)))}}function g(x){m.nextTick(b,x)}function d(x,c){return function(M,w){x.then(function(){if(c[n]){M(o(void 0,!0));return}c[v](M,w)},w)}}var f=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((u={get stream(){return this[s]},next:function(){var c=this,M=this[i];if(M!==null)return Promise.reject(M);if(this[n])return Promise.resolve(o(void 0,!0));if(this[s].destroyed)return new Promise(function(h,L){m.nextTick(function(){c[i]?L(c[i]):h(o(void 0,!0))})});var w=this[r],p;if(w)p=new Promise(d(w,this));else{var _=this[s].read();if(_!==null)return Promise.resolve(o(_,!1));p=new Promise(this[v])}return this[r]=p,p}},A(u,Symbol.asyncIterator,function(){return this}),A(u,"return",function(){var c=this;return new Promise(function(M,w){c[s].destroy(null,function(p){if(p){w(p);return}M(o(void 0,!0))})})}),u),f),l=function(c){var M,w=Object.create(y,(M={},A(M,s,{value:c,writable:!0}),A(M,e,{value:null,writable:!0}),A(M,a,{value:null,writable:!0}),A(M,i,{value:null,writable:!0}),A(M,n,{value:c._readableState.endEmitted,writable:!0}),A(M,v,{value:function(_,h){var L=w[s].read();L?(w[r]=null,w[e]=null,w[a]=null,_(o(L,!1))):(w[e]=_,w[a]=h)},writable:!0}),M));return w[r]=null,T(c,function(p){if(p&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=w[a];_!==null&&(w[r]=null,w[e]=null,w[a]=null,_(p)),w[i]=p;return}var h=w[e];h!==null&&(w[r]=null,w[e]=null,w[a]=null,h(o(void 0,!0))),w[n]=!0}),c.on("readable",g.bind(null,w)),w};N.exports=l}).call(this)}).call(this,t("_process"))},{"./end-of-stream":296,_process:278}],294:[function(t,N,V){function m(b,g){var d=Object.keys(b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(b);g&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(b,y).enumerable})),d.push.apply(d,f)}return d}function u(b){for(var g=1;g<arguments.length;g++){var d=arguments[g]!=null?arguments[g]:{};g%2?m(Object(d),!0).forEach(function(f){A(b,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(d)):m(Object(d)).forEach(function(f){Object.defineProperty(b,f,Object.getOwnPropertyDescriptor(d,f))})}return b}function A(b,g,d){return g in b?Object.defineProperty(b,g,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[g]=d,b}function T(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function e(b,g){for(var d=0;d<g.length;d++){var f=g[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}function a(b,g,d){return g&&e(b.prototype,g),d&&e(b,d),b}var i=t("buffer"),n=i.Buffer,r=t("util"),v=r.inspect,s=v&&v.custom||"inspect";function o(b,g,d){n.prototype.copy.call(b,g,d)}N.exports=function(){function b(){T(this,b),this.head=null,this.tail=null,this.length=0}return a(b,[{key:"push",value:function(d){var f={data:d,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length}},{key:"unshift",value:function(d){var f={data:d,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var f=this.head,y=""+f.data;f=f.next;)y+=d+f.data;return y}},{key:"concat",value:function(d){if(this.length===0)return n.alloc(0);for(var f=n.allocUnsafe(d>>>0),y=this.head,l=0;y;)o(y.data,f,l),l+=y.data.length,y=y.next;return f}},{key:"consume",value:function(d,f){var y;return d<this.head.data.length?(y=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):d===this.head.data.length?y=this.shift():y=f?this._getString(d):this._getBuffer(d),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var f=this.head,y=1,l=f.data;for(d-=l.length;f=f.next;){var x=f.data,c=d>x.length?x.length:d;if(c===x.length?l+=x:l+=x.slice(0,d),d-=c,d===0){c===x.length?(++y,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=x.slice(c));break}++y}return this.length-=y,l}},{key:"_getBuffer",value:function(d){var f=n.allocUnsafe(d),y=this.head,l=1;for(y.data.copy(f),d-=y.data.length;y=y.next;){var x=y.data,c=d>x.length?x.length:d;if(x.copy(f,f.length-d,0,c),d-=c,d===0){c===x.length?(++l,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=x.slice(c));break}++l}return this.length-=l,f}},{key:s,value:function(d,f){return v(this,u({},f,{depth:0,customInspect:!1}))}}]),b}()},{buffer:85,util:83}],295:[function(t,N,V){(function(m){(function(){function u(n,r){var v=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,m.nextTick(a,this,n)):m.nextTick(a,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(b){!r&&b?v._writableState?v._writableState.errorEmitted?m.nextTick(T,v):(v._writableState.errorEmitted=!0,m.nextTick(A,v,b)):m.nextTick(A,v,b):r?(m.nextTick(T,v),r(b)):m.nextTick(T,v)}),this)}function A(n,r){a(n,r),T(n)}function T(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(n,r){n.emit("error",r)}function i(n,r){var v=n._readableState,s=n._writableState;v&&v.autoDestroy||s&&s.autoDestroy?n.destroy(r):n.emit("error",r)}N.exports={destroy:u,undestroy:e,errorOrDestroy:i}}).call(this)}).call(this,t("_process"))},{_process:278}],296:[function(t,N,V){var m=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function u(a){var i=!1;return function(){if(!i){i=!0;for(var n=arguments.length,r=new Array(n),v=0;v<n;v++)r[v]=arguments[v];a.apply(this,r)}}}function A(){}function T(a){return a.setHeader&&typeof a.abort=="function"}function e(a,i,n){if(typeof i=="function")return e(a,null,i);i||(i={}),n=u(n||A);var r=i.readable||i.readable!==!1&&a.readable,v=i.writable||i.writable!==!1&&a.writable,s=function(){a.writable||b()},o=a._writableState&&a._writableState.finished,b=function(){v=!1,o=!0,r||n.call(a)},g=a._readableState&&a._readableState.endEmitted,d=function(){r=!1,g=!0,v||n.call(a)},f=function(c){n.call(a,c)},y=function(){var c;if(r&&!g)return(!a._readableState||!a._readableState.ended)&&(c=new m),n.call(a,c);if(v&&!o)return(!a._writableState||!a._writableState.ended)&&(c=new m),n.call(a,c)},l=function(){a.req.on("finish",b)};return T(a)?(a.on("complete",b),a.on("abort",y),a.req?l():a.on("request",l)):v&&!a._writableState&&(a.on("end",s),a.on("close",s)),a.on("end",d),a.on("finish",b),i.error!==!1&&a.on("error",f),a.on("close",y),function(){a.removeListener("complete",b),a.removeListener("abort",y),a.removeListener("request",l),a.req&&a.req.removeListener("finish",b),a.removeListener("end",s),a.removeListener("close",s),a.removeListener("finish",b),a.removeListener("end",d),a.removeListener("error",f),a.removeListener("close",y)}}N.exports=e},{"../../../errors":287}],297:[function(t,N,V){N.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(t,N,V){var m;function u(b){var g=!1;return function(){g||(g=!0,b.apply(void 0,arguments))}}var A=t("../../../errors").codes,T=A.ERR_MISSING_ARGS,e=A.ERR_STREAM_DESTROYED;function a(b){if(b)throw b}function i(b){return b.setHeader&&typeof b.abort=="function"}function n(b,g,d,f){f=u(f);var y=!1;b.on("close",function(){y=!0}),m===void 0&&(m=t("./end-of-stream")),m(b,{readable:g,writable:d},function(x){if(x)return f(x);y=!0,f()});var l=!1;return function(x){if(!y&&!l){if(l=!0,i(b))return b.abort();if(typeof b.destroy=="function")return b.destroy();f(x||new e("pipe"))}}}function r(b){b()}function v(b,g){return b.pipe(g)}function s(b){return!b.length||typeof b[b.length-1]!="function"?a:b.pop()}function o(){for(var b=arguments.length,g=new Array(b),d=0;d<b;d++)g[d]=arguments[d];var f=s(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new T("streams");var y,l=g.map(function(x,c){var M=c<g.length-1,w=c>0;return n(x,M,w,function(p){y||(y=p),p&&l.forEach(r),!M&&(l.forEach(r),f(y))})});return g.reduce(v)}N.exports=o},{"../../../errors":287,"./end-of-stream":296}],299:[function(t,N,V){var m=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;function u(T,e,a){return T.highWaterMark!=null?T.highWaterMark:e?T[a]:null}function A(T,e,a,i){var n=u(e,i,a);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var r=i?a:"highWaterMark";throw new m(r,n)}return Math.floor(n)}return T.objectMode?16:16*1024}N.exports={getHighWaterMark:A}},{"../../../errors":287}],300:[function(t,N,V){N.exports=t("events").EventEmitter},{events:84}],301:[function(t,N,V){var m=t("safe-buffer").Buffer,u=m.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function A(l){if(!l)return"utf8";for(var x;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(x)return;l=(""+l).toLowerCase(),x=!0}}function T(l){var x=A(l);if(typeof x!="string"&&(m.isEncoding===u||!u(l)))throw new Error("Unknown encoding: "+l);return x||l}V.StringDecoder=e;function e(l){this.encoding=T(l);var x;switch(this.encoding){case"utf16le":this.text=o,this.end=b,x=4;break;case"utf8":this.fillLast=r,x=4;break;case"base64":this.text=g,this.end=d,x=3;break;default:this.write=f,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(x)}e.prototype.write=function(l){if(l.length===0)return"";var x,c;if(this.lastNeed){if(x=this.fillLast(l),x===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<l.length?x?x+this.text(l,c):this.text(l,c):x||""},e.prototype.end=s,e.prototype.text=v,e.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function a(l){return l<=127?0:l>>5===6?2:l>>4===14?3:l>>3===30?4:l>>6===2?-1:-2}function i(l,x,c){var M=x.length-1;if(M<c)return 0;var w=a(x[M]);return w>=0?(w>0&&(l.lastNeed=w-1),w):--M<c||w===-2?0:(w=a(x[M]),w>=0?(w>0&&(l.lastNeed=w-2),w):--M<c||w===-2?0:(w=a(x[M]),w>=0?(w>0&&(w===2?w=0:l.lastNeed=w-3),w):0))}function n(l,x,c){if((x[0]&192)!==128)return l.lastNeed=0,"\uFFFD";if(l.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return l.lastNeed=1,"\uFFFD";if(l.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return l.lastNeed=2,"\uFFFD"}}function r(l){var x=this.lastTotal-this.lastNeed,c=n(this,l);if(c!==void 0)return c;if(this.lastNeed<=l.length)return l.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,x,0,l.length),this.lastNeed-=l.length}function v(l,x){var c=i(this,l,x);if(!this.lastNeed)return l.toString("utf8",x);this.lastTotal=c;var M=l.length-(c-this.lastNeed);return l.copy(this.lastChar,0,M),l.toString("utf8",x,M)}function s(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+"\uFFFD":x}function o(l,x){if((l.length-x)%2===0){var c=l.toString("utf16le",x);if(c){var M=c.charCodeAt(c.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",x,l.length-1)}function b(l){var x=l&&l.length?this.write(l):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,c)}return x}function g(l,x){var c=(l.length-x)%3;return c===0?l.toString("base64",x):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",x,l.length-c))}function d(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function f(l){return l.toString(this.encoding)}function y(l){return l&&l.length?this.write(l):""}},{"safe-buffer":285}],302:[function(t,N,V){(function(m,u){(function(){var A=t("assert"),T=t("debug")("stream-parser");N.exports=r;var e=-1,a=0,i=1,n=2;function r(c){var M=c&&typeof c._transform=="function",w=c&&typeof c._write=="function";if(!M&&!w)throw new Error("must pass a Writable or Transform stream in");T("extending Parser into stream"),c._bytes=s,c._skipBytes=o,M&&(c._passthrough=b),M?c._transform=d:c._write=g}function v(c){T("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=e,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function s(c,M){A(!this._parserCallback,'there is already a "callback" set!'),A(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||v(this),T("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=M,this._parserState=a}function o(c,M){A(!this._parserCallback,'there is already a "callback" set!'),A(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||v(this),T("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=M,this._parserState=i}function b(c,M){A(!this._parserCallback,'There is already a "callback" set!'),A(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||v(this),T("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=M,this._parserState=n}function g(c,M,w){this._parserInit||v(this),T("write(%o bytes)",c.length),typeof M=="function"&&(w=M),l(this,c,null,w)}function d(c,M,w){this._parserInit||v(this),T("transform(%o bytes)",c.length),typeof M!="function"&&(M=this._parserOutput),l(this,c,M,w)}function f(c,M,w,p){return c._parserBytesLeft<=0?p(new Error("got data but not currently parsing anything")):M.length<=c._parserBytesLeft?function(){return y(c,M,w,p)}:function(){var _=M.slice(0,c._parserBytesLeft);return y(c,_,w,function(h){if(h)return p(h);if(M.length>_.length)return function(){return f(c,M.slice(_.length),w,p)}})}}function y(c,M,w,p){if(c._parserBytesLeft-=M.length,T("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===a?(c._parserBuffers.push(M),c._parserBuffered+=M.length):c._parserState===n&&w(M),c._parserBytesLeft===0){var _=c._parserCallback;if(_&&c._parserState===a&&c._parserBuffers.length>1&&(M=u.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==a&&(M=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=e,c._parserBuffers.splice(0),_){var h=[];M&&h.push(M),w&&h.push(w);var L=_.length>h.length;L&&h.push(x(p));var E=_.apply(c,h);if(!L||p===E)return p}}else return p}var l=x(f);function x(c){return function(){for(var M=c.apply(this,arguments);typeof M=="function";)M=M();return M}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(t,N,V){(function(m){(function(){V=N.exports=t("./debug"),V.log=T,V.formatArgs=A,V.save=e,V.load=a,V.useColors=u,V.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:i(),V.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function u(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}V.formatters.j=function(n){try{return JSON.stringify(n)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function A(n){var r=this.useColors;if(n[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+n[0]+(r?"%c ":" ")+"+"+V.humanize(this.diff),!!r){var v="color: "+this.color;n.splice(1,0,v,"color: inherit");var s=0,o=0;n[0].replace(/%[a-zA-Z%]/g,function(b){b!=="%%"&&(s++,b==="%c"&&(o=s))}),n.splice(o,0,v)}}function T(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(n){try{n==null?V.storage.removeItem("debug"):V.storage.debug=n}catch{}}function a(){var n;try{n=V.storage.debug}catch{}return!n&&typeof m<"u"&&"env"in m&&(n=m.env.DEBUG),n}V.enable(a());function i(){try{return window.localStorage}catch{}}}).call(this)}).call(this,t("_process"))},{"./debug":304,_process:278}],304:[function(t,N,V){V=N.exports=A.debug=A.default=A,V.coerce=i,V.disable=e,V.enable=T,V.enabled=a,V.humanize=t("ms"),V.names=[],V.skips=[],V.formatters={};var m;function u(n){var r=0,v;for(v in n)r=(r<<5)-r+n.charCodeAt(v),r|=0;return V.colors[Math.abs(r)%V.colors.length]}function A(n){function r(){if(!!r.enabled){var v=r,s=+new Date,o=s-(m||s);v.diff=o,v.prev=m,v.curr=s,m=s;for(var b=new Array(arguments.length),g=0;g<b.length;g++)b[g]=arguments[g];b[0]=V.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");var d=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,function(y,l){if(y==="%%")return y;d++;var x=V.formatters[l];if(typeof x=="function"){var c=b[d];y=x.call(v,c),b.splice(d,1),d--}return y}),V.formatArgs.call(v,b);var f=r.log||V.log||console.log.bind(console);f.apply(v,b)}}return r.namespace=n,r.enabled=V.enabled(n),r.useColors=V.useColors(),r.color=u(n),typeof V.init=="function"&&V.init(r),r}function T(n){V.save(n),V.names=[],V.skips=[];for(var r=(typeof n=="string"?n:"").split(/[\s,]+/),v=r.length,s=0;s<v;s++)!r[s]||(n=r[s].replace(/\*/g,".*?"),n[0]==="-"?V.skips.push(new RegExp("^"+n.substr(1)+"$")):V.names.push(new RegExp("^"+n+"$")))}function e(){V.enable("")}function a(n){var r,v;for(r=0,v=V.skips.length;r<v;r++)if(V.skips[r].test(n))return!1;for(r=0,v=V.names.length;r<v;r++)if(V.names[r].test(n))return!0;return!1}function i(n){return n instanceof Error?n.stack||n.message:n}},{ms:305}],305:[function(t,N,V){var m=1e3,u=m*60,A=u*60,T=A*24,e=T*365.25;N.exports=function(v,s){s=s||{};var o=typeof v;if(o==="string"&&v.length>0)return a(v);if(o==="number"&&isNaN(v)===!1)return s.long?n(v):i(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function a(v){if(v=String(v),!(v.length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(v);if(!!s){var o=parseFloat(s[1]),b=(s[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return o*e;case"days":case"day":case"d":return o*T;case"hours":case"hour":case"hrs":case"hr":case"h":return o*A;case"minutes":case"minute":case"mins":case"min":case"m":return o*u;case"seconds":case"second":case"secs":case"sec":case"s":return o*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function i(v){return v>=T?Math.round(v/T)+"d":v>=A?Math.round(v/A)+"h":v>=u?Math.round(v/u)+"m":v>=m?Math.round(v/m)+"s":v+"ms"}function n(v){return r(v,T,"day")||r(v,A,"hour")||r(v,u,"minute")||r(v,m,"second")||v+" ms"}function r(v,s,o){if(!(v<s))return v<s*1.5?Math.floor(v/s)+" "+o:Math.ceil(v/s)+" "+o+"s"}},{}],306:[function(t,N,V){var m=t("parenthesis");N.exports=function(A,T,e){if(A==null)throw Error("First argument should be a string");if(T==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(b){return b.length===1&&(b=b+b),b}));var a=m.parse(A,{flat:!0,brackets:e.ignore}),i=a[0],n=i.split(T);if(e.escape){for(var r=[],v=0;v<n.length;v++){var s=n[v],o=n[v+1];s[s.length-1]==="\\"&&s[s.length-2]!=="\\"?(r.push(s+T+o),v++):r.push(s)}n=r}for(var v=0;v<n.length;v++)a[0]=n[v],n[v]=m.stringify(a,{flat:!0});return n}},{parenthesis:248}],307:[function(t,N,V){N.exports=m;function m(u){for(var A=u.length,T=new Array(A),e=new Array(A),a=new Array(A),i=new Array(A),n=new Array(A),r=new Array(A),v=0;v<A;++v)T[v]=-1,e[v]=0,a[v]=!1,i[v]=0,n[v]=-1,r[v]=[];var s=0,o=[],b=[];function g(l){var x=[l],c=[l];for(T[l]=e[l]=s,a[l]=!0,s+=1;c.length>0;){l=c[c.length-1];var M=u[l];if(i[l]<M.length){for(var w=i[l];w<M.length;++w){var p=M[w];if(T[p]<0){T[p]=e[p]=s,a[p]=!0,s+=1,x.push(p),c.push(p);break}else a[p]&&(e[l]=Math.min(e[l],e[p])|0);n[p]>=0&&r[l].push(n[p])}i[l]=w}else{if(e[l]===T[l]){for(var _=[],h=[],L=0,w=x.length-1;w>=0;--w){var E=x[w];if(a[E]=!1,_.push(E),h.push(r[E]),L+=r[E].length,n[E]=o.length,E===l){x.length=w;break}}o.push(_);for(var S=new Array(L),w=0;w<h.length;w++)for(var P=0;P<h[w].length;P++)S[--L]=h[w][P];b.push(S)}c.pop()}}}for(var v=0;v<A;++v)T[v]<0&&g(v);for(var d,v=0;v<b.length;v++){var f=b[v];if(f.length!==0){f.sort(function(x,c){return x-c}),d=[f[0]];for(var y=1;y<f.length;y++)f[y]!==f[y-1]&&d.push(f[y]);b[v]=d}}return{components:o,adjacencyList:b}}},{}],308:[function(t,N,V){Object.defineProperty(V,"__esModule",{value:!0});var m=function(){function n(r,v){var s=[],o=!0,b=!1,g=void 0;try{for(var d=r[Symbol.iterator](),f;!(o=(f=d.next()).done)&&(s.push(f.value),!(v&&s.length===v));o=!0);}catch(y){b=!0,g=y}finally{try{!o&&d.return&&d.return()}finally{if(b)throw g}}return s}return function(r,v){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return n(r,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Math.PI*2,A=function(r,v,s,o,b,g,d){var f=r.x,y=r.y;f*=v,y*=s;var l=o*f-b*y,x=b*f+o*y;return{x:l+g,y:x+d}},T=function(r,v){var s=v===1.5707963267948966?.551915024494:v===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(v/4),o=Math.cos(r),b=Math.sin(r),g=Math.cos(r+v),d=Math.sin(r+v);return[{x:o-b*s,y:b+o*s},{x:g+d*s,y:d-g*s},{x:g,y:d}]},e=function(r,v,s,o){var b=r*o-v*s<0?-1:1,g=r*s+v*o;return g>1&&(g=1),g<-1&&(g=-1),b*Math.acos(g)},a=function(r,v,s,o,b,g,d,f,y,l,x,c){var M=Math.pow(b,2),w=Math.pow(g,2),p=Math.pow(x,2),_=Math.pow(c,2),h=M*w-M*_-w*p;h<0&&(h=0),h/=M*_+w*p,h=Math.sqrt(h)*(d===f?-1:1);var L=h*b/g*c,E=h*-g/b*x,S=l*L-y*E+(r+s)/2,P=y*L+l*E+(v+o)/2,F=(x-L)/b,I=(c-E)/g,D=(-x-L)/b,R=(-c-E)/g,O=e(1,0,F,I),z=e(F,I,D,R);return f===0&&z>0&&(z-=u),f===1&&z<0&&(z+=u),[S,P,O,z]},i=function(r){var v=r.px,s=r.py,o=r.cx,b=r.cy,g=r.rx,d=r.ry,f=r.xAxisRotation,y=f===void 0?0:f,l=r.largeArcFlag,x=l===void 0?0:l,c=r.sweepFlag,M=c===void 0?0:c,w=[];if(g===0||d===0)return[];var p=Math.sin(y*u/360),_=Math.cos(y*u/360),h=_*(v-o)/2+p*(s-b)/2,L=-p*(v-o)/2+_*(s-b)/2;if(h===0&&L===0)return[];g=Math.abs(g),d=Math.abs(d);var E=Math.pow(h,2)/Math.pow(g,2)+Math.pow(L,2)/Math.pow(d,2);E>1&&(g*=Math.sqrt(E),d*=Math.sqrt(E));var S=a(v,s,o,b,g,d,x,M,p,_,h,L),P=m(S,4),F=P[0],I=P[1],D=P[2],R=P[3],O=Math.abs(R)/(u/4);Math.abs(1-O)<1e-7&&(O=1);var z=Math.max(Math.ceil(O),1);R/=z;for(var G=0;G<z;G++)w.push(T(D,R)),D+=R;return w.map(function(Y){var ee=A(Y[0],g,d,_,p,F,I),j=ee.x,X=ee.y,ie=A(Y[1],g,d,_,p,F,I),he=ie.x,K=ie.y,$=A(Y[2],g,d,_,p,F,I),U=$.x,H=$.y;return{x1:j,y1:X,x2:he,y2:K,x:U,y:H}})};V.default=i,N.exports=V.default},{}],309:[function(t,N,V){var m=t("parse-svg-path"),u=t("abs-svg-path"),A=t("normalize-svg-path"),T=t("is-svg-path"),e=t("assert");N.exports=a;function a(i){if(Array.isArray(i)&&i.length===1&&typeof i[0]=="string"&&(i=i[0]),typeof i=="string"&&(e(T(i),"String is not an SVG path."),i=m(i)),e(Array.isArray(i),"Argument should be a string or an array of path segments."),i=u(i),i=A(i),!i.length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],r=0,v=i.length;r<v;r++)for(var s=i[r].slice(1),o=0;o<s.length;o+=2)s[o+0]<n[0]&&(n[0]=s[o+0]),s[o+1]<n[1]&&(n[1]=s[o+1]),s[o+0]>n[2]&&(n[2]=s[o+0]),s[o+1]>n[3]&&(n[3]=s[o+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(t,N,V){N.exports=u;var m=t("svg-arc-to-cubic-bezier");function u(e){for(var a,i=[],n=0,r=0,v=0,s=0,o=null,b=null,g=0,d=0,f=0,y=e.length;f<y;f++){var l=e[f],x=l[0];switch(x){case"M":v=l[1],s=l[2];break;case"A":var c=m({px:g,py:d,cx:l[6],cy:l[7],rx:l[1],ry:l[2],xAxisRotation:l[3],largeArcFlag:l[4],sweepFlag:l[5]});if(!c.length)continue;for(var M=0,w;M<c.length;M++)w=c[M],l=["C",w.x1,w.y1,w.x2,w.y2,w.x,w.y],M<c.length-1&&i.push(l);break;case"S":var p=g,_=d;(a=="C"||a=="S")&&(p+=p-n,_+=_-r),l=["C",p,_,l[1],l[2],l[3],l[4]];break;case"T":a=="Q"||a=="T"?(o=g*2-o,b=d*2-b):(o=g,b=d),l=T(g,d,o,b,l[1],l[2]);break;case"Q":o=l[1],b=l[2],l=T(g,d,l[1],l[2],l[3],l[4]);break;case"L":l=A(g,d,l[1],l[2]);break;case"H":l=A(g,d,l[1],d);break;case"V":l=A(g,d,g,l[1]);break;case"Z":l=A(g,d,v,s);break}a=x,g=l[l.length-2],d=l[l.length-1],l.length>4?(n=l[l.length-4],r=l[l.length-3]):(n=g,r=d),i.push(l)}return i}function A(e,a,i,n){return["C",e,a,i,n,i,n]}function T(e,a,i,n,r,v){return["C",e/3+2/3*i,a/3+2/3*n,r/3+2/3*i,v/3+2/3*n,r,v]}},{"svg-arc-to-cubic-bezier":308}],311:[function(t,N,V){var m=t("svg-path-bounds"),u=t("parse-svg-path"),A=t("draw-svg-path"),T=t("is-svg-path"),e=t("bitmap-sdf"),a=document.createElement("canvas"),i=a.getContext("2d");N.exports=n;function n(s,o){if(!T(s))throw Error("Argument should be valid svg path string");o||(o={});var b,g;o.shape?(b=o.shape[0],g=o.shape[1]):(b=a.width=o.w||o.width||200,g=a.height=o.h||o.height||200);var d=Math.min(b,g),f=o.stroke||0,y=o.viewbox||o.viewBox||m(s),l=[b/(y[2]-y[0]),g/(y[3]-y[1])],x=Math.min(l[0]||0,l[1]||0)/2;if(i.fillStyle="black",i.fillRect(0,0,b,g),i.fillStyle="white",f&&(typeof f!="number"&&(f=1),f>0?i.strokeStyle="white":i.strokeStyle="black",i.lineWidth=Math.abs(f)),i.translate(b*.5,g*.5),i.scale(x,x),v()){var c=new Path2D(s);i.fill(c),f&&i.stroke(c)}else{var M=u(s);A(i,M),i.fill(),f&&i.stroke()}i.setTransform(1,0,0,1,0,0);var w=e(i,{cutoff:o.cutoff!=null?o.cutoff:.5,radius:o.radius!=null?o.radius:d*.5});return w}var r;function v(){if(r!=null)return r;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return r=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(o);var b=s.getImageData(0,0,1,1);return r=b&&b.data&&b.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(t,N,V){(function(m,u){(function(){var A=t("process/browser.js").nextTick,T=Function.prototype.apply,e=Array.prototype.slice,a={},i=0;V.setTimeout=function(){return new n(T.call(setTimeout,window,arguments),clearTimeout)},V.setInterval=function(){return new n(T.call(setInterval,window,arguments),clearInterval)},V.clearTimeout=V.clearInterval=function(r){r.close()};function n(r,v){this._id=r,this._clearFn=v}n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},V.enroll=function(r,v){clearTimeout(r._idleTimeoutId),r._idleTimeout=v},V.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},V._unrefActive=V.active=function(r){clearTimeout(r._idleTimeoutId);var v=r._idleTimeout;v>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},v))},V.setImmediate=typeof m=="function"?m:function(r){var v=i++,s=arguments.length<2?!1:e.call(arguments,1);return a[v]=!0,A(function(){a[v]&&(s?r.apply(null,s):r.call(null),V.clearImmediate(v))}),v},V.clearImmediate=typeof u=="function"?u:function(r){delete a[r]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(t,N,V){(function(m){var u=/^\s+/,A=/\s+$/,T=0,e=m.round,a=m.min,i=m.max,n=m.random;function r(Z,Q){if(Z=Z||"",Q=Q||{},Z instanceof r)return Z;if(!(this instanceof r))return new r(Z,Q);var oe=v(Z);this._originalInput=Z,this._r=oe.r,this._g=oe.g,this._b=oe.b,this._a=oe.a,this._roundA=e(100*this._a)/100,this._format=Q.format||oe.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=oe.ok,this._tc_id=T++}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(Z.r*299+Z.g*587+Z.b*114)/1e3},getLuminance:function(){var Z=this.toRgb(),Q,oe,se,ae,le,_e;return Q=Z.r/255,oe=Z.g/255,se=Z.b/255,Q<=.03928?ae=Q/12.92:ae=m.pow((Q+.055)/1.055,2.4),oe<=.03928?le=oe/12.92:le=m.pow((oe+.055)/1.055,2.4),se<=.03928?_e=se/12.92:_e=m.pow((se+.055)/1.055,2.4),.2126*ae+.7152*le+.0722*_e},setAlpha:function(Z){return this._a=z(Z),this._roundA=e(100*this._a)/100,this},toHsv:function(){var Z=g(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=g(this._r,this._g,this._b),Q=e(Z.h*360),oe=e(Z.s*100),se=e(Z.v*100);return this._a==1?"hsv("+Q+", "+oe+"%, "+se+"%)":"hsva("+Q+", "+oe+"%, "+se+"%, "+this._roundA+")"},toHsl:function(){var Z=o(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=o(this._r,this._g,this._b),Q=e(Z.h*360),oe=e(Z.s*100),se=e(Z.l*100);return this._a==1?"hsl("+Q+", "+oe+"%, "+se+"%)":"hsla("+Q+", "+oe+"%, "+se+"%, "+this._roundA+")"},toHex:function(Z){return f(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return y(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(G(this._r,255)*100)+"%",g:e(G(this._g,255)*100)+"%",b:e(G(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(G(this._r,255)*100)+"%, "+e(G(this._g,255)*100)+"%, "+e(G(this._b,255)*100)+"%)":"rgba("+e(G(this._r,255)*100)+"%, "+e(G(this._g,255)*100)+"%, "+e(G(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[f(this._r,this._g,this._b,!0)]||!1},toFilter:function(Z){var Q="#"+l(this._r,this._g,this._b,this._a),oe=Q,se=this._gradientType?"GradientType = 1, ":"";if(Z){var ae=r(Z);oe="#"+l(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+se+"startColorstr="+Q+",endColorstr="+oe+")"},toString:function(Z){var Q=!!Z;Z=Z||this._format;var oe=!1,se=this._a<1&&this._a>=0,ae=!Q&&se&&(Z==="hex"||Z==="hex6"||Z==="hex3"||Z==="hex4"||Z==="hex8"||Z==="name");return ae?Z==="name"&&this._a===0?this.toName():this.toRgbString():(Z==="rgb"&&(oe=this.toRgbString()),Z==="prgb"&&(oe=this.toPercentageRgbString()),(Z==="hex"||Z==="hex6")&&(oe=this.toHexString()),Z==="hex3"&&(oe=this.toHexString(!0)),Z==="hex4"&&(oe=this.toHex8String(!0)),Z==="hex8"&&(oe=this.toHex8String()),Z==="name"&&(oe=this.toName()),Z==="hsl"&&(oe=this.toHslString()),Z==="hsv"&&(oe=this.toHsvString()),oe||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(Z,Q){var oe=Z.apply(null,[this].concat([].slice.call(Q)));return this._r=oe._r,this._g=oe._g,this._b=oe._b,this.setAlpha(oe._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(Z,Q){return Z.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},r.fromRatio=function(Z,Q){if(typeof Z=="object"){var oe={};for(var se in Z)Z.hasOwnProperty(se)&&(se==="a"?oe[se]=Z[se]:oe[se]=he(Z[se]));Z=oe}return r(Z,Q)};function v(Z){var Q={r:0,g:0,b:0},oe=1,se=null,ae=null,le=null,_e=!1,fe=!1;return typeof Z=="string"&&(Z=q(Z)),typeof Z=="object"&&(H(Z.r)&&H(Z.g)&&H(Z.b)?(Q=s(Z.r,Z.g,Z.b),_e=!0,fe=String(Z.r).substr(-1)==="%"?"prgb":"rgb"):H(Z.h)&&H(Z.s)&&H(Z.v)?(se=he(Z.s),ae=he(Z.v),Q=d(Z.h,se,ae),_e=!0,fe="hsv"):H(Z.h)&&H(Z.s)&&H(Z.l)&&(se=he(Z.s),le=he(Z.l),Q=b(Z.h,se,le),_e=!0,fe="hsl"),Z.hasOwnProperty("a")&&(oe=Z.a)),oe=z(oe),{ok:_e,format:Z.format||fe,r:a(255,i(Q.r,0)),g:a(255,i(Q.g,0)),b:a(255,i(Q.b,0)),a:oe}}function s(Z,Q,oe){return{r:G(Z,255)*255,g:G(Q,255)*255,b:G(oe,255)*255}}function o(Z,Q,oe){Z=G(Z,255),Q=G(Q,255),oe=G(oe,255);var se=i(Z,Q,oe),ae=a(Z,Q,oe),le,_e,fe=(se+ae)/2;if(se==ae)le=_e=0;else{var me=se-ae;switch(_e=fe>.5?me/(2-se-ae):me/(se+ae),se){case Z:le=(Q-oe)/me+(Q<oe?6:0);break;case Q:le=(oe-Z)/me+2;break;case oe:le=(Z-Q)/me+4;break}le/=6}return{h:le,s:_e,l:fe}}function b(Z,Q,oe){var se,ae,le;Z=G(Z,360),Q=G(Q,100),oe=G(oe,100);function _e(xe,ye,be){return be<0&&(be+=1),be>1&&(be-=1),be<1/6?xe+(ye-xe)*6*be:be<1/2?ye:be<2/3?xe+(ye-xe)*(2/3-be)*6:xe}if(Q===0)se=ae=le=oe;else{var fe=oe<.5?oe*(1+Q):oe+Q-oe*Q,me=2*oe-fe;se=_e(me,fe,Z+1/3),ae=_e(me,fe,Z),le=_e(me,fe,Z-1/3)}return{r:se*255,g:ae*255,b:le*255}}function g(Z,Q,oe){Z=G(Z,255),Q=G(Q,255),oe=G(oe,255);var se=i(Z,Q,oe),ae=a(Z,Q,oe),le,_e,fe=se,me=se-ae;if(_e=se===0?0:me/se,se==ae)le=0;else{switch(se){case Z:le=(Q-oe)/me+(Q<oe?6:0);break;case Q:le=(oe-Z)/me+2;break;case oe:le=(Z-Q)/me+4;break}le/=6}return{h:le,s:_e,v:fe}}function d(Z,Q,oe){Z=G(Z,360)*6,Q=G(Q,100),oe=G(oe,100);var se=m.floor(Z),ae=Z-se,le=oe*(1-Q),_e=oe*(1-ae*Q),fe=oe*(1-(1-ae)*Q),me=se%6,xe=[oe,_e,le,le,fe,oe][me],ye=[fe,oe,oe,_e,le,le][me],be=[le,le,fe,oe,oe,_e][me];return{r:xe*255,g:ye*255,b:be*255}}function f(Z,Q,oe,se){var ae=[ie(e(Z).toString(16)),ie(e(Q).toString(16)),ie(e(oe).toString(16))];return se&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function y(Z,Q,oe,se,ae){var le=[ie(e(Z).toString(16)),ie(e(Q).toString(16)),ie(e(oe).toString(16)),ie(K(se))];return ae&&le[0].charAt(0)==le[0].charAt(1)&&le[1].charAt(0)==le[1].charAt(1)&&le[2].charAt(0)==le[2].charAt(1)&&le[3].charAt(0)==le[3].charAt(1)?le[0].charAt(0)+le[1].charAt(0)+le[2].charAt(0)+le[3].charAt(0):le.join("")}function l(Z,Q,oe,se){var ae=[ie(K(se)),ie(e(Z).toString(16)),ie(e(Q).toString(16)),ie(e(oe).toString(16))];return ae.join("")}r.equals=function(Z,Q){return!Z||!Q?!1:r(Z).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:n(),g:n(),b:n()})};function x(Z,Q){Q=Q===0?0:Q||10;var oe=r(Z).toHsl();return oe.s-=Q/100,oe.s=Y(oe.s),r(oe)}function c(Z,Q){Q=Q===0?0:Q||10;var oe=r(Z).toHsl();return oe.s+=Q/100,oe.s=Y(oe.s),r(oe)}function M(Z){return r(Z).desaturate(100)}function w(Z,Q){Q=Q===0?0:Q||10;var oe=r(Z).toHsl();return oe.l+=Q/100,oe.l=Y(oe.l),r(oe)}function p(Z,Q){Q=Q===0?0:Q||10;var oe=r(Z).toRgb();return oe.r=i(0,a(255,oe.r-e(255*-(Q/100)))),oe.g=i(0,a(255,oe.g-e(255*-(Q/100)))),oe.b=i(0,a(255,oe.b-e(255*-(Q/100)))),r(oe)}function _(Z,Q){Q=Q===0?0:Q||10;var oe=r(Z).toHsl();return oe.l-=Q/100,oe.l=Y(oe.l),r(oe)}function h(Z,Q){var oe=r(Z).toHsl(),se=(oe.h+Q)%360;return oe.h=se<0?360+se:se,r(oe)}function L(Z){var Q=r(Z).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function E(Z){var Q=r(Z).toHsl(),oe=Q.h;return[r(Z),r({h:(oe+120)%360,s:Q.s,l:Q.l}),r({h:(oe+240)%360,s:Q.s,l:Q.l})]}function S(Z){var Q=r(Z).toHsl(),oe=Q.h;return[r(Z),r({h:(oe+90)%360,s:Q.s,l:Q.l}),r({h:(oe+180)%360,s:Q.s,l:Q.l}),r({h:(oe+270)%360,s:Q.s,l:Q.l})]}function P(Z){var Q=r(Z).toHsl(),oe=Q.h;return[r(Z),r({h:(oe+72)%360,s:Q.s,l:Q.l}),r({h:(oe+216)%360,s:Q.s,l:Q.l})]}function F(Z,Q,oe){Q=Q||6,oe=oe||30;var se=r(Z).toHsl(),ae=360/oe,le=[r(Z)];for(se.h=(se.h-(ae*Q>>1)+720)%360;--Q;)se.h=(se.h+ae)%360,le.push(r(se));return le}function I(Z,Q){Q=Q||6;for(var oe=r(Z).toHsv(),se=oe.h,ae=oe.s,le=oe.v,_e=[],fe=1/Q;Q--;)_e.push(r({h:se,s:ae,v:le})),le=(le+fe)%1;return _e}r.mix=function(Z,Q,oe){oe=oe===0?0:oe||50;var se=r(Z).toRgb(),ae=r(Q).toRgb(),le=oe/100,_e={r:(ae.r-se.r)*le+se.r,g:(ae.g-se.g)*le+se.g,b:(ae.b-se.b)*le+se.b,a:(ae.a-se.a)*le+se.a};return r(_e)},r.readability=function(Z,Q){var oe=r(Z),se=r(Q);return(m.max(oe.getLuminance(),se.getLuminance())+.05)/(m.min(oe.getLuminance(),se.getLuminance())+.05)},r.isReadable=function(Z,Q,oe){var se=r.readability(Z,Q),ae,le;switch(le=!1,ae=re(oe),ae.level+ae.size){case"AAsmall":case"AAAlarge":le=se>=4.5;break;case"AAlarge":le=se>=3;break;case"AAAsmall":le=se>=7;break}return le},r.mostReadable=function(Z,Q,oe){var se=null,ae=0,le,_e,fe,me;oe=oe||{},_e=oe.includeFallbackColors,fe=oe.level,me=oe.size;for(var xe=0;xe<Q.length;xe++)le=r.readability(Z,Q[xe]),le>ae&&(ae=le,se=r(Q[xe]));return r.isReadable(Z,se,{level:fe,size:me})||!_e?se:(oe.includeFallbackColors=!1,r.mostReadable(Z,["#fff","#000"],oe))};var D=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=r.hexNames=O(D);function O(Z){var Q={};for(var oe in Z)Z.hasOwnProperty(oe)&&(Q[Z[oe]]=oe);return Q}function z(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function G(Z,Q){j(Z)&&(Z="100%");var oe=X(Z);return Z=a(Q,i(0,parseFloat(Z))),oe&&(Z=parseInt(Z*Q,10)/100),m.abs(Z-Q)<1e-6?1:Z%Q/parseFloat(Q)}function Y(Z){return a(1,i(0,Z))}function ee(Z){return parseInt(Z,16)}function j(Z){return typeof Z=="string"&&Z.indexOf(".")!=-1&&parseFloat(Z)===1}function X(Z){return typeof Z=="string"&&Z.indexOf("%")!=-1}function ie(Z){return Z.length==1?"0"+Z:""+Z}function he(Z){return Z<=1&&(Z=Z*100+"%"),Z}function K(Z){return m.round(parseFloat(Z)*255).toString(16)}function $(Z){return ee(Z)/255}var U=function(){var Z="[-\\+]?\\d+%?",Q="[-\\+]?\\d*\\.\\d+%?",oe="(?:"+Q+")|(?:"+Z+")",se="[\\s|\\(]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")\\s*\\)?",ae="[\\s|\\(]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")[,|\\s]+("+oe+")\\s*\\)?";return{CSS_UNIT:new RegExp(oe),rgb:new RegExp("rgb"+se),rgba:new RegExp("rgba"+ae),hsl:new RegExp("hsl"+se),hsla:new RegExp("hsla"+ae),hsv:new RegExp("hsv"+se),hsva:new RegExp("hsva"+ae),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function H(Z){return!!U.CSS_UNIT.exec(Z)}function q(Z){Z=Z.replace(u,"").replace(A,"").toLowerCase();var Q=!1;if(D[Z])Z=D[Z],Q=!0;else if(Z=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var oe;return(oe=U.rgb.exec(Z))?{r:oe[1],g:oe[2],b:oe[3]}:(oe=U.rgba.exec(Z))?{r:oe[1],g:oe[2],b:oe[3],a:oe[4]}:(oe=U.hsl.exec(Z))?{h:oe[1],s:oe[2],l:oe[3]}:(oe=U.hsla.exec(Z))?{h:oe[1],s:oe[2],l:oe[3],a:oe[4]}:(oe=U.hsv.exec(Z))?{h:oe[1],s:oe[2],v:oe[3]}:(oe=U.hsva.exec(Z))?{h:oe[1],s:oe[2],v:oe[3],a:oe[4]}:(oe=U.hex8.exec(Z))?{r:ee(oe[1]),g:ee(oe[2]),b:ee(oe[3]),a:$(oe[4]),format:Q?"name":"hex8"}:(oe=U.hex6.exec(Z))?{r:ee(oe[1]),g:ee(oe[2]),b:ee(oe[3]),format:Q?"name":"hex"}:(oe=U.hex4.exec(Z))?{r:ee(oe[1]+""+oe[1]),g:ee(oe[2]+""+oe[2]),b:ee(oe[3]+""+oe[3]),a:$(oe[4]+""+oe[4]),format:Q?"name":"hex8"}:(oe=U.hex3.exec(Z))?{r:ee(oe[1]+""+oe[1]),g:ee(oe[2]+""+oe[2]),b:ee(oe[3]+""+oe[3]),format:Q?"name":"hex"}:!1}function re(Z){var Q,oe;return Z=Z||{level:"AA",size:"small"},Q=(Z.level||"AA").toUpperCase(),oe=(Z.size||"small").toLowerCase(),Q!=="AA"&&Q!=="AAA"&&(Q="AA"),oe!=="small"&&oe!=="large"&&(oe="small"),{level:Q,size:oe}}typeof N<"u"&&N.exports?N.exports=r:window.tinycolor=r})(Math)},{}],314:[function(t,N,V){N.exports=A,N.exports.float32=N.exports.float=A,N.exports.fract32=N.exports.fract=u;var m=new Float32Array(1);function u(T,e){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);e instanceof Float32Array||(e=A(T));for(var a=0,i=e.length;a<i;a++)e[a]=T[a]-e[a];return e}return A(T-A(T))}function A(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(m[0]=T,m[0])}},{}],315:[function(t,N,V){var m=t("parse-unit");N.exports=e;var u=96;function A(a,i){var n=m(getComputedStyle(a).getPropertyValue(i));return n[0]*e(n[1],a)}function T(a,i){var n=document.createElement("div");n.style["font-size"]="128"+a,i.appendChild(n);var r=A(n,"font-size")/128;return i.removeChild(n),r}function e(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),(i===window||i===document)&&(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return T(a,i);case"em":return A(i,"font-size");case"rem":return A(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return u;case"cm":return u/2.54;case"mm":return u/25.4;case"pt":return u/72;case"pc":return u/6}return 1}},{"parse-unit":251}],316:[function(t,N,V){(function(m,u){typeof V=="object"&&typeof N<"u"?u(V):(m=m||self,u(m.topojson=m.topojson||{}))})(this,function(m){function u(c){return c}function A(c){if(c==null)return u;var M,w,p=c.scale[0],_=c.scale[1],h=c.translate[0],L=c.translate[1];return function(E,S){S||(M=w=0);var P=2,F=E.length,I=new Array(F);for(I[0]=(M+=E[0])*p+h,I[1]=(w+=E[1])*_+L;P<F;)I[P]=E[P],++P;return I}}function T(c){var M=A(c.transform),w,p=1/0,_=p,h=-p,L=-p;function E(P){P=M(P),P[0]<p&&(p=P[0]),P[0]>h&&(h=P[0]),P[1]<_&&(_=P[1]),P[1]>L&&(L=P[1])}function S(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(S);break;case"Point":E(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(E);break}}c.arcs.forEach(function(P){for(var F=-1,I=P.length,D;++F<I;)D=M(P[F],F),D[0]<p&&(p=D[0]),D[0]>h&&(h=D[0]),D[1]<_&&(_=D[1]),D[1]>L&&(L=D[1])});for(w in c.objects)S(c.objects[w]);return[p,_,h,L]}function e(c,M){for(var w,p=c.length,_=p-M;_<--p;)w=c[_],c[_++]=c[p],c[p]=w}function a(c,M){return typeof M=="string"&&(M=c.objects[M]),M.type==="GeometryCollection"?{type:"FeatureCollection",features:M.geometries.map(function(w){return i(c,w)})}:i(c,M)}function i(c,M){var w=M.id,p=M.bbox,_=M.properties==null?{}:M.properties,h=n(c,M);return w==null&&p==null?{type:"Feature",properties:_,geometry:h}:p==null?{type:"Feature",id:w,properties:_,geometry:h}:{type:"Feature",id:w,bbox:p,properties:_,geometry:h}}function n(c,M){var w=A(c.transform),p=c.arcs;function _(F,I){I.length&&I.pop();for(var D=p[F<0?~F:F],R=0,O=D.length;R<O;++R)I.push(w(D[R],R));F<0&&e(I,O)}function h(F){return w(F)}function L(F){for(var I=[],D=0,R=F.length;D<R;++D)_(F[D],I);return I.length<2&&I.push(I[0]),I}function E(F){for(var I=L(F);I.length<4;)I.push(I[0]);return I}function S(F){return F.map(E)}function P(F){var I=F.type,D;switch(I){case"GeometryCollection":return{type:I,geometries:F.geometries.map(P)};case"Point":D=h(F.coordinates);break;case"MultiPoint":D=F.coordinates.map(h);break;case"LineString":D=L(F.arcs);break;case"MultiLineString":D=F.arcs.map(L);break;case"Polygon":D=S(F.arcs);break;case"MultiPolygon":D=F.arcs.map(S);break;default:return null}return{type:I,coordinates:D}}return P(M)}function r(c,M){var w={},p={},_={},h=[],L=-1;M.forEach(function(P,F){var I=c.arcs[P<0?~P:P],D;I.length<3&&!I[1][0]&&!I[1][1]&&(D=M[++L],M[L]=P,M[F]=D)}),M.forEach(function(P){var F=E(P),I=F[0],D=F[1],R,O;if(R=_[I])if(delete _[R.end],R.push(P),R.end=D,O=p[D]){delete p[O.start];var z=O===R?R:R.concat(O);p[z.start=R.start]=_[z.end=O.end]=z}else p[R.start]=_[R.end]=R;else if(R=p[D])if(delete p[R.start],R.unshift(P),R.start=I,O=_[I]){delete _[O.end];var G=O===R?R:O.concat(R);p[G.start=O.start]=_[G.end=R.end]=G}else p[R.start]=_[R.end]=R;else R=[P],p[R.start=I]=_[R.end=D]=R});function E(P){var F=c.arcs[P<0?~P:P],I=F[0],D;return c.transform?(D=[0,0],F.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=F[F.length-1],P<0?[D,I]:[I,D]}function S(P,F){for(var I in P){var D=P[I];delete F[D.start],delete D.start,delete D.end,D.forEach(function(R){w[R<0?~R:R]=1}),h.push(D)}}return S(_,p),S(p,_),M.forEach(function(P){w[P<0?~P:P]||h.push([P])}),h}function v(c){return n(c,s.apply(this,arguments))}function s(c,M,w){var p,_,h;if(arguments.length>1)p=o(c,M,w);else for(_=0,p=new Array(h=c.arcs.length);_<h;++_)p[_]=_;return{type:"MultiLineString",arcs:r(c,p)}}function o(c,M,w){var p=[],_=[],h;function L(I){var D=I<0?~I:I;(_[D]||(_[D]=[])).push({i:I,g:h})}function E(I){I.forEach(L)}function S(I){I.forEach(E)}function P(I){I.forEach(S)}function F(I){switch(h=I,I.type){case"GeometryCollection":I.geometries.forEach(F);break;case"LineString":E(I.arcs);break;case"MultiLineString":case"Polygon":S(I.arcs);break;case"MultiPolygon":P(I.arcs);break}}return F(M),_.forEach(w==null?function(I){p.push(I[0].i)}:function(I){w(I[0].g,I[I.length-1].g)&&p.push(I[0].i)}),p}function b(c){for(var M=-1,w=c.length,p,_=c[w-1],h=0;++M<w;)p=_,_=c[M],h+=p[0]*_[1]-p[1]*_[0];return Math.abs(h)}function g(c){return n(c,d.apply(this,arguments))}function d(c,M){var w={},p=[],_=[];M.forEach(h);function h(S){switch(S.type){case"GeometryCollection":S.geometries.forEach(h);break;case"Polygon":L(S.arcs);break;case"MultiPolygon":S.arcs.forEach(L);break}}function L(S){S.forEach(function(P){P.forEach(function(F){(w[F=F<0?~F:F]||(w[F]=[])).push(S)})}),p.push(S)}function E(S){return b(n(c,{type:"Polygon",arcs:[S]}).coordinates[0])}return p.forEach(function(S){if(!S._){var P=[],F=[S];for(S._=1,_.push(P);S=F.pop();)P.push(S),S.forEach(function(I){I.forEach(function(D){w[D<0?~D:D].forEach(function(R){R._||(R._=1,F.push(R))})})})}}),p.forEach(function(S){delete S._}),{type:"MultiPolygon",arcs:_.map(function(S){var P=[],F;if(S.forEach(function(z){z.forEach(function(G){G.forEach(function(Y){w[Y<0?~Y:Y].length<2&&P.push(Y)})})}),P=r(c,P),(F=P.length)>1)for(var I=1,D=E(P[0]),R,O;I<F;++I)(R=E(P[I]))>D&&(O=P[0],P[0]=P[I],P[I]=O,D=R);return P}).filter(function(S){return S.length>0})}}function f(c,M){for(var w=0,p=c.length;w<p;){var _=w+p>>>1;c[_]<M?w=_+1:p=_}return w}function y(c){var M={},w=c.map(function(){return[]});function p(z,G){z.forEach(function(Y){Y<0&&(Y=~Y);var ee=M[Y];ee?ee.push(G):M[Y]=[G]})}function _(z,G){z.forEach(function(Y){p(Y,G)})}function h(z,G){z.type==="GeometryCollection"?z.geometries.forEach(function(Y){h(Y,G)}):z.type in L&&L[z.type](z.arcs,G)}var L={LineString:p,MultiLineString:_,Polygon:_,MultiPolygon:function(z,G){z.forEach(function(Y){_(Y,G)})}};c.forEach(h);for(var E in M)for(var S=M[E],P=S.length,F=0;F<P;++F)for(var I=F+1;I<P;++I){var D=S[F],R=S[I],O;(O=w[D])[E=f(O,R)]!==R&&O.splice(E,0,R),(O=w[R])[E=f(O,D)]!==D&&O.splice(E,0,D)}return w}function l(c){if(c==null)return u;var M,w,p=c.scale[0],_=c.scale[1],h=c.translate[0],L=c.translate[1];return function(E,S){S||(M=w=0);var P=2,F=E.length,I=new Array(F),D=Math.round((E[0]-h)/p),R=Math.round((E[1]-L)/_);for(I[0]=D-M,M=D,I[1]=R-w,w=R;P<F;)I[P]=E[P],++P;return I}}function x(c,M){if(c.transform)throw new Error("already quantized");if(!M||!M.scale){if(!((L=Math.floor(M))>=2))throw new Error("n must be \u22652");S=c.bbox||T(c);var w=S[0],p=S[1],_=S[2],h=S[3],L;M={scale:[_-w?(_-w)/(L-1):1,h-p?(h-p)/(L-1):1],translate:[w,p]}}else S=c.bbox;var E=l(M),S,P,F=c.objects,I={};function D(z){return E(z)}function R(z){var G;switch(z.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:z.geometries.map(R)};break;case"Point":G={type:"Point",coordinates:D(z.coordinates)};break;case"MultiPoint":G={type:"MultiPoint",coordinates:z.coordinates.map(D)};break;default:return z}return z.id!=null&&(G.id=z.id),z.bbox!=null&&(G.bbox=z.bbox),z.properties!=null&&(G.properties=z.properties),G}function O(z){var G=0,Y=1,ee=z.length,j,X=new Array(ee);for(X[0]=E(z[0],0);++G<ee;)((j=E(z[G],G))[0]||j[1])&&(X[Y++]=j);return Y===1&&(X[Y++]=[0,0]),X.length=Y,X}for(P in F)I[P]=R(F[P]);return{type:"Topology",bbox:S,transform:M,objects:I,arcs:c.arcs.map(O)}}m.bbox=T,m.feature=a,m.merge=g,m.mergeArcs=d,m.mesh=v,m.meshArcs=s,m.neighbors=y,m.quantize=x,m.transform=A,m.untransform=l,Object.defineProperty(m,"__esModule",{value:!0})})},{}],317:[function(t,N,V){var m=t("../prototype/is");N.exports=function(u){if(typeof u!="function"||!hasOwnProperty.call(u,"length"))return!1;try{if(typeof u.length!="number"||typeof u.call!="function"||typeof u.apply!="function")return!1}catch{return!1}return!m(u)}},{"../prototype/is":324}],318:[function(t,N,V){var m=t("../value/is"),u=t("../object/is"),A=t("../string/coerce"),T=t("./to-short-string"),e=function(a,i){return a.replace("%v",T(i))};N.exports=function(a,i,n){if(!u(n))throw new TypeError(e(i,a));if(!m(a)){if("default"in n)return n.default;if(n.isOptional)return null}var r=A(n.errorMessage);throw m(r)||(r=i),new TypeError(e(r,a))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(t,N,V){N.exports=function(m){try{return m.toString()}catch{try{return String(m)}catch{return null}}}},{}],320:[function(t,N,V){var m=t("./safe-to-string"),u=/[\n\r\u2028\u2029]/g;N.exports=function(A){var T=m(A);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(u,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),T)}},{"./safe-to-string":319}],321:[function(t,N,V){var m=t("../value/is"),u={object:!0,function:!0,undefined:!0};N.exports=function(A){return m(A)?hasOwnProperty.call(u,typeof A):!1}},{"../value/is":327}],322:[function(t,N,V){var m=t("../lib/resolve-exception"),u=t("./is");N.exports=function(A){return u(A)?A:m(A,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(t,N,V){var m=t("../function/is"),u=/^\s*class[\s{/}]/,A=Function.prototype.toString;N.exports=function(T){return!(!m(T)||u.test(A.call(T)))}},{"../function/is":317}],324:[function(t,N,V){var m=t("../object/is");N.exports=function(u){if(!m(u))return!1;try{return u.constructor?u.constructor.prototype===u:!1}catch{return!1}}},{"../object/is":321}],325:[function(t,N,V){var m=t("../value/is"),u=t("../object/is"),A=Object.prototype.toString;N.exports=function(T){if(!m(T))return null;if(u(T)){var e=T.toString;if(typeof e!="function"||e===A)return null}try{return""+T}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(t,N,V){var m=t("../lib/resolve-exception"),u=t("./is");N.exports=function(A){return u(A)?A:m(A,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(t,N,V){var m=void 0;N.exports=function(u){return u!==m&&u!==null}},{}],328:[function(t,N,V){(function(m){(function(){var u=t("bit-twiddle"),A=t("dup"),T=t("buffer").Buffer;m.__TYPEDARRAY_POOL||(m.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),BIGUINT64:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),BIGINT64:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var e=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",i=typeof BigInt64Array<"u",n=m.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=A([32,0])),n.BIGUINT64||(n.BIGUINT64=A([32,0])),n.BIGINT64||(n.BIGINT64=A([32,0])),n.BUFFER||(n.BUFFER=A([32,0]));var r=n.DATA,v=n.BUFFER;V.free=function(S){if(T.isBuffer(S))v[u.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var P=S.length||S.byteLength,F=u.log2(P)|0;r[F].push(S)}};function s(E){if(!!E){var S=E.length||E.byteLength,P=u.log2(S);r[P].push(E)}}function o(E){s(E.buffer)}V.freeUint8=V.freeUint16=V.freeUint32=V.freeBigUint64=V.freeInt8=V.freeInt16=V.freeInt32=V.freeBigInt64=V.freeFloat32=V.freeFloat=V.freeFloat64=V.freeDouble=V.freeUint8Clamped=V.freeDataView=o,V.freeArrayBuffer=s,V.freeBuffer=function(S){v[u.log2(S.length)].push(S)},V.malloc=function(S,P){if(P===void 0||P==="arraybuffer")return b(S);switch(P){case"uint8":return g(S);case"uint16":return d(S);case"uint32":return f(S);case"int8":return y(S);case"int16":return l(S);case"int32":return x(S);case"float":case"float32":return c(S);case"double":case"float64":return M(S);case"uint8_clamped":return w(S);case"bigint64":return _(S);case"biguint64":return p(S);case"buffer":return L(S);case"data":case"dataview":return h(S);default:return null}return null};function b(S){var S=u.nextPow2(S),P=u.log2(S),F=r[P];return F.length>0?F.pop():new ArrayBuffer(S)}V.mallocArrayBuffer=b;function g(E){return new Uint8Array(b(E),0,E)}V.mallocUint8=g;function d(E){return new Uint16Array(b(2*E),0,E)}V.mallocUint16=d;function f(E){return new Uint32Array(b(4*E),0,E)}V.mallocUint32=f;function y(E){return new Int8Array(b(E),0,E)}V.mallocInt8=y;function l(E){return new Int16Array(b(2*E),0,E)}V.mallocInt16=l;function x(E){return new Int32Array(b(4*E),0,E)}V.mallocInt32=x;function c(E){return new Float32Array(b(4*E),0,E)}V.mallocFloat32=V.mallocFloat=c;function M(E){return new Float64Array(b(8*E),0,E)}V.mallocFloat64=V.mallocDouble=M;function w(E){return e?new Uint8ClampedArray(b(E),0,E):g(E)}V.mallocUint8Clamped=w;function p(E){return a?new BigUint64Array(b(8*E),0,E):null}V.mallocBigUint64=p;function _(E){return i?new BigInt64Array(b(8*E),0,E):null}V.mallocBigInt64=_;function h(E){return new DataView(b(E),0,E)}V.mallocDataView=h;function L(E){E=u.nextPow2(E);var S=u.log2(E),P=v[S];return P.length>0?P.pop():new T(E)}V.mallocBuffer=L,V.clearCache=function(){for(var S=0;S<32;++S)n.UINT8[S].length=0,n.UINT16[S].length=0,n.UINT32[S].length=0,n.INT8[S].length=0,n.INT16[S].length=0,n.INT32[S].length=0,n.FLOAT[S].length=0,n.DOUBLE[S].length=0,n.BIGUINT64[S].length=0,n.BIGINT64[S].length=0,n.UINT8C[S].length=0,r[S].length=0,v[S].length=0}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(t,N,V){var m=/[\'\"]/;N.exports=function(A){return A?(m.test(A.charAt(0))&&(A=A.substr(1)),m.test(A.charAt(A.length-1))&&(A=A.substr(0,A.length-1)),A):""}},{}],330:[function(t,N,V){N.exports=function(u,A,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var e=0,a=T.length;e<a;e++){var i=T[e];for(var n in i)if(!(A[n]!==void 0&&!Array.isArray(A[n])&&u[n]===A[n])&&n in A){var r;if(i[n]===!0)r=A[n];else{if(i[n]===!1)continue;if(typeof i[n]=="function"&&(r=i[n](A[n],u,A),r===void 0))continue}u[n]=r}}return u}},{}],331:[function(t,N,V){(function(m){(function(){N.exports=u;function u(T,e){if(A("noDeprecation"))return T;var a=!1;function i(){if(!a){if(A("throwDeprecation"))throw new Error(e);A("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return T.apply(this,arguments)}return i}function A(T){try{if(!m.localStorage)return!1}catch{return!1}var e=m.localStorage[T];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(t,N,V){var m=t("get-canvas-context");N.exports=function(A){return m("webgl",A)}},{"get-canvas-context":194}],333:[function(t,N,V){var m=t("../main"),u=t("object-assign"),A=m.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new m.baseCalendar,u(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(b,g){if(typeof b=="string"){var d=b.match(a);return d?d[0]:""}var f=this._validateYear(b),y=b.month(),l=""+this.toChineseMonth(f,y);return g&&l.length<2&&(l="0"+l),this.isIntercalaryMonth(f,y)&&(l+="i"),l},monthNames:function(b){if(typeof b=="string"){var g=b.match(i);return g?g[0]:""}var d=this._validateYear(b),f=b.month(),y=this.toChineseMonth(d,f),l=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][y-1];return this.isIntercalaryMonth(d,f)&&(l="\u95F0"+l),l},monthNamesShort:function(b){if(typeof b=="string"){var g=b.match(n);return g?g[0]:""}var d=this._validateYear(b),f=b.month(),y=this.toChineseMonth(d,f),l=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][y-1];return this.isIntercalaryMonth(d,f)&&(l="\u95F0"+l),l},parseMonth:function(b,g){b=this._validateYear(b);var d=parseInt(g),f;if(isNaN(d))g[0]==="\u95F0"&&(f=!0,g=g.substring(1)),g[g.length-1]==="\u6708"&&(g=g.substring(0,g.length-1)),d=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(g);else{var y=g[g.length-1];f=y==="i"||y==="I"}var l=this.toMonthIndex(b,d,f);return l},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,g){if(b.year&&(b=b.year()),typeof b!="number"||b<1888||b>2111)throw g.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,g,d){var f=this.intercalaryMonth(b),y=d&&g!==f;if(y||g<1||g>12)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);var l;return f?!d&&g<=f?l=g-1:l=g:l=g-1,l},toChineseMonth:function(b,g){b.year&&(b=b.year(),g=b.month());var d=this.intercalaryMonth(b),f=d?12:11;if(g<0||g>f)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);var y;return d?g<d?y=g+1:y=g:y=g+1,y},intercalaryMonth:function(b){b=this._validateYear(b);var g=r[b-r[0]],d=g>>13;return d},isIntercalaryMonth:function(b,g){b.year&&(b=b.year(),g=b.month());var d=this.intercalaryMonth(b);return!!d&&d===g},leapYear:function(b){return this.intercalaryMonth(b)!==0},weekOfYear:function(b,g,d){var f=this._validateYear(b,m.local.invalidyear),y=v[f-v[0]],l=y>>9&4095,x=y>>5&15,c=y&31,M;M=A.newDate(l,x,c),M.add(4-(M.dayOfWeek()||7),"d");var w=this.toJD(b,g,d)-M.toJD();return 1+Math.floor(w/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,g){b.year&&(g=b.month(),b=b.year()),b=this._validateYear(b);var d=r[b-r[0]],f=d>>13,y=f?12:11;if(g>y)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);var l=d&1<<12-g?30:29;return l},weekDay:function(b,g,d){return(this.dayOfWeek(b,g,d)||7)<6},toJD:function(b,g,d){var f=this._validate(b,l,d,m.local.invalidDate);b=this._validateYear(f.year()),g=f.month(),d=f.day();var y=this.isIntercalaryMonth(b,g),l=this.toChineseMonth(b,g),x=o(b,l,d,y);return A.toJD(x.year,x.month,x.day)},fromJD:function(b){var g=A.fromJD(b),d=s(g.year(),g.month(),g.day()),f=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,f,d.day)},fromString:function(b){var g=b.match(e),d=this._validateYear(+g[1]),f=+g[2],y=!!g[3],l=this.toMonthIndex(d,f,y),x=+g[4];return this.newDate(d,l,x)},add:function(b,g,d){var f=b.year(),y=b.month(),l=this.isIntercalaryMonth(f,y),x=this.toChineseMonth(f,y),c=Object.getPrototypeOf(T.prototype).add.call(this,b,g,d);if(d==="y"){var M=c.year(),w=c.month(),p=this.isIntercalaryMonth(M,x),_=l&&p?this.toMonthIndex(M,x,!0):this.toMonthIndex(M,x,!1);_!==w&&c.month(_)}return c}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,i=/^闰?十?[一二三四五六七八九]?月/m,n=/^闰?十?[一二三四五六七八九]?/m;m.calendars.chinese=T;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],v=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(b,g,d,f){var y,l;if(typeof b=="object")y=b,l=g||{};else{var x=typeof b=="number"&&b>=1888&&b<=2111;if(!x)throw new Error("Solar year outside range 1888-2111");var c=typeof g=="number"&&g>=1&&g<=12;if(!c)throw new Error("Solar month outside range 1 - 12");var M=typeof d=="number"&&d>=1&&d<=31;if(!M)throw new Error("Solar day outside range 1 - 31");y={year:b,month:g,day:d},l=f||{}}var w=v[y.year-v[0]],p=y.year<<9|y.month<<5|y.day;l.year=p>=w?y.year:y.year-1,w=v[l.year-v[0]];var _=w>>9&4095,h=w>>5&15,L=w&31,E,S=new Date(_,h-1,L),P=new Date(y.year,y.month-1,y.day);E=Math.round((P-S)/(24*3600*1e3));var F=r[l.year-r[0]],I;for(I=0;I<13;I++){var D=F&1<<12-I?30:29;if(E<D)break;E-=D}var R=F>>13;return!R||I<R?(l.isIntercalary=!1,l.month=1+I):I===R?(l.isIntercalary=!0,l.month=I):(l.isIntercalary=!1,l.month=I),l.day=1+E,l}function o(b,g,d,f,y){var l,x;if(typeof b=="object")x=b,l=g||{};else{var c=typeof b=="number"&&b>=1888&&b<=2111;if(!c)throw new Error("Lunar year outside range 1888-2111");var M=typeof g=="number"&&g>=1&&g<=12;if(!M)throw new Error("Lunar month outside range 1 - 12");var w=typeof d=="number"&&d>=1&&d<=30;if(!w)throw new Error("Lunar day outside range 1 - 30");var p;typeof f=="object"?(p=!1,l=f):(p=!!f,l=y||{}),x={year:b,month:g,day:d,isIntercalary:p}}var _;_=x.day-1;var h=r[x.year-r[0]],L=h>>13,E;L&&(x.month>L||x.isIntercalary)?E=x.month:E=x.month-1;for(var S=0;S<E;S++){var P=h&1<<12-S?30:29;_+=P}var F=v[x.year-v[0]],I=F>>9&4095,D=F>>5&15,R=F&31,O=new Date(I,D-1,R+_);return l.year=O.getFullYear(),l.month=1+O.getMonth(),l.day=O.getDate(),l}},{"../main":347,"object-assign":247}],334:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);return T=i.year(),T<0&&T++,i.day()+(i.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(e/30)+1,n=e-(i-1)*30+1;return this.newDate(a,i,n)}}),m.calendars.coptic=A},{"../main":347,"object-assign":247}],335:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),400},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);return(n.day()+1)%8},weekDay:function(e,a,i){var n=this.dayOfWeek(e,a,i);return n>=2&&n<=6},extraInfo:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);return{century:T[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);return e=n.year()+(n.year()<0?1:0),a=n.month(),i=n.day(),i+(a>1?16:0)+(a>2?(a-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=(a-1)*400,e+=e>15?16:0;var i=Math.floor(e/32)+1,n=e-(i-1)*32+1;return this.newDate(a<=0?a-1:a,i,n)}});var T={20:"Fruitbat",21:"Anchovy"};m.calendars.discworld=A},{"../main":347,"object-assign":247}],336:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);return T=i.year(),T<0&&T++,i.day()+(i.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(e/30)+1,n=e-(i-1)*30+1;return this.newDate(a,i,n)}}),m.calendars.ethiopian=A},{"../main":347,"object-assign":247}],337:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(e){return e=e<0?e+1:e,T(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=a.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){return e.year&&(a=e.month(),e=e.year()),this._validate(e,a,this.minDay,m.local.invalidMonth),a===12&&this.leapYear(e)||a===8&&T(this.daysInYear(e),10)===5?30:a===9&&T(this.daysInYear(e),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==6},extraInfo:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);e=n.year(),a=n.month(),i=n.day();var r=e<=0?e+1:e,v=this.jdEpoch+this._delay1(r)+this._delay2(r)+i+1;if(a<7){for(var s=7;s<=this.monthsInYear(e);s++)v+=this.daysInMonth(e,s);for(var s=1;s<a;s++)v+=this.daysInMonth(e,s)}else for(var s=7;s<a;s++)v+=this.daysInMonth(e,s);return v},_delay1:function(e){var a=Math.floor((235*e-234)/19),i=12084+13753*a,n=a*29+Math.floor(i/25920);return T(3*(n+1),7)<3&&n++,n},_delay2:function(e){var a=this._delay1(e-1),i=this._delay1(e),n=this._delay1(e+1);return n-i===356?2:i-a===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var i=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,i,this.daysInMonth(a,i));)i++;var n=e-this.toJD(a,i,1)+1;return this.newDate(a,i,n)}});function T(e,a){return e-a*Math.floor(e/a)}m.calendars.hebrew=A},{"../main":347,"object-assign":247}],338:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,m.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==5},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);return T=i.year(),e=i.month(),a=i.day(),T=T<=0?T+1:T,a+Math.ceil(29.5*(e-1))+(T-1)*354+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var e=Math.floor((30*(T-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var a=Math.min(12,Math.ceil((T-29-this.toJD(e,1,1))/29.5)+1),i=T-this.toJD(e,a,1)+1;return this.newDate(e,a,i)}}),m.calendars.islamic=A},{"../main":347,"object-assign":247}],339:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),a=e.year()<0?e.year()+1:e.year();return a%4===0},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);return T=i.year(),e=i.month(),a=i.day(),T<0&&T++,e<=2&&(T--,e+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(T){var e=Math.floor(T+.5),a=e+1524,i=Math.floor((a-122.1)/365.25),n=Math.floor(365.25*i),r=Math.floor((a-n)/30.6001),v=r-Math.floor(r<14?1:13),s=i-Math.floor(v>2?4716:4715),o=a-n-Math.floor(30.6001*r);return s<=0&&s--,this.newDate(s,v,o)}}),m.calendars.julian=A},{"../main":347,"object-assign":247}],340:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),!1},formatYear:function(a){var i=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear);a=i.year();var n=Math.floor(a/400);a=a%400,a+=a<0?400:0;var r=Math.floor(a/20);return n+"."+r+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var i=0,n=0;n<a.length;n++){var r=parseInt(a[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";i=i*20+r}return i},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),18},weekOfYear:function(a,i,n){return this._validate(a,i,n,m.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),360},daysInMonth:function(a,i){return this._validate(a,i,this.minDay,m.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,i,n){var r=this._validate(a,i,n,m.local.invalidDate);return r.day()},weekDay:function(a,i,n){return this._validate(a,i,n,m.local.invalidDate),!0},extraInfo:function(a,i,n){var r=this._validate(a,i,n,m.local.invalidDate),v=r.toJD(),s=this._toHaab(v),o=this._toTzolkin(v);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(a){a-=this.jdEpoch;var i=T(a+8+(18-1)*20,365);return[Math.floor(i/20)+1,T(i,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[e(a+20,20),e(a+4,13)]},toJD:function(a,i,n){var r=this._validate(a,i,n,m.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var i=Math.floor(a/360);a=a%360,a+=a<0?360:0;var n=Math.floor(a/20),r=a%20;return this.newDate(i,n,r)}});function T(a,i){return a-i*Math.floor(a/i)}function e(a,i){return T(a-1,i)+1}m.calendars.mayan=A},{"../main":347,"object-assign":247}],341:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar;var T=m.instance("gregorian");u(A.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return T.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,m.local.invalidMonth),r=n.year();r<0&&r++;for(var v=n.day(),s=1;s<n.month();s++)v+=this.daysPerMonth[s-1];return v+T.toJD(r+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;for(var i=e-Math.floor(this.toJD(a,1,1)+.5)+1,n=1;i>this.daysInMonth(a,n);)i-=this.daysInMonth(a,n),n++;return this.newDate(a,n,i)}}),m.calendars.nanakshahi=A},{"../main":347,"object-assign":247}],342:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,m.local.invalidYear);if(T=e.year(),typeof this.NEPALI_CALENDAR_DATA[T]>"u")return this.daysPerYear;for(var a=0,i=this.minMonth;i<=12;i++)a+=this.NEPALI_CALENDAR_DATA[T][i];return a},daysInMonth:function(T,e){return T.year&&(e=T.month(),T=T.year()),this._validate(T,e,this.minDay,m.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[T]>"u"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[T][e]},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==6},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);T=i.year(),e=i.month(),a=i.day();var n=m.instance(),r=0,v=e,s=T;this._createMissingCalendarData(T);var o=T-(v>9||v===9&&a>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(e!==9&&(r=a,v--);v!==9;)v<=0&&(v=12,s--),r+=this.NEPALI_CALENDAR_DATA[s][v],v--;return e===9?(r+=a-this.NEPALI_CALENDAR_DATA[s][0],r<0&&(r+=n.daysInYear(o))):r+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(o,1,1).add(r,"d").toJD()},fromJD:function(T){var e=m.instance(),a=e.fromJD(T),i=a.year(),n=a.dayOfYear(),r=i+56;this._createMissingCalendarData(r);for(var v=9,s=this.NEPALI_CALENDAR_DATA[r][0],o=this.NEPALI_CALENDAR_DATA[r][v]-s+1;n>o;)v++,v>12&&(v=1,r++),o+=this.NEPALI_CALENDAR_DATA[r][v];var b=this.NEPALI_CALENDAR_DATA[r][v]-(o-n);return this.newDate(r,v,b)},_createMissingCalendarData:function(T){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=T-1;a<T+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]>"u"&&(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),m.calendars.nepali=A},{"../main":347,"object-assign":247}],343:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-((n.dayOfWeek()+1)%7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==5},toJD:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);e=n.year(),a=n.month(),i=n.day();var r=e-(e>=0?474:473),v=474+T(r,2820);return i+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((v*682-110)/2816)+(v-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var a=e-this.toJD(475,1,1),i=Math.floor(a/1029983),n=T(a,1029983),r=2820;if(n!==1029982){var v=Math.floor(n/366),s=T(n,366);r=Math.floor((2134*v+2816*s+2815)/1028522)+v+1}var o=r+2820*i+474;o=o<=0?o-1:o;var b=e-this.toJD(o,1,1)+1,g=b<=186?Math.ceil(b/31):Math.ceil((b-6)/30),d=e-this.toJD(o,g,1)+1;return this.newDate(o,g,d)}});function T(e,a){return e-a*Math.floor(e/a)}m.calendars.persian=A,m.calendars.jalali=A},{"../main":347,"object-assign":247}],344:[function(t,N,V){var m=t("../main"),u=t("object-assign"),A=m.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new m.baseCalendar,u(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,m.local.invalidYear),i=this._t2gYear(a.year());return A.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,m.local.invalidYear),r=this._t2gYear(n.year());return A.weekOfYear(r,n.month(),n.day())},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,m.local.invalidDate),r=this._t2gYear(n.year());return A.toJD(r,n.month(),n.day())},fromJD:function(e){var a=A.fromJD(e),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),m.calendars.taiwan=T},{"../main":347,"object-assign":247}],345:[function(t,N,V){var m=t("../main"),u=t("object-assign"),A=m.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new m.baseCalendar,u(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,m.local.invalidYear),i=this._t2gYear(a.year());return A.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,m.local.invalidYear),r=this._t2gYear(n.year());return A.weekOfYear(r,n.month(),n.day())},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,m.local.invalidDate),r=this._t2gYear(n.year());return A.toJD(r,n.month(),n.day())},fromJD:function(e){var a=A.fromJD(e),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),m.calendars.thai=T},{"../main":347,"object-assign":247}],346:[function(t,N,V){var m=t("../main"),u=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,u(A.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=0,i=1;i<=12;i++)a+=this.daysInMonth(e,i);return a},daysInMonth:function(e,a){for(var i=this._validate(e,a,this.minDay,m.local.invalidMonth),n=i.toJD()-24e5+.5,r=0,v=0;v<T.length;v++){if(T[v]>n)return T[r]-T[r-1];r++}return 30},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==5},toJD:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate),r=12*(n.year()-1)+n.month()-15292,v=n.day()+T[r-1]-1;return v+24e5-.5},fromJD:function(e){for(var a=e-24e5+.5,i=0,n=0;n<T.length&&!(T[n]>a);n++)i++;var r=i+15292,v=Math.floor((r-1)/12),s=v+1,o=r-12*v,b=a-T[i-1]+1;return this.newDate(s,o,b)},isValid:function(e,a,i){var n=m.baseCalendar.prototype.isValid.apply(this,arguments);return n&&(e=e.year!=null?e.year:e,n=e>=1276&&e<=1500),n},_validate:function(e,a,i,n){var r=m.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw n.replace(/\{0\}/,this.local.name);return r}}),m.calendars.ummalqura=A;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(t,N,V){var m=t("object-assign");function u(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}m(u.prototype,{instance:function(n,r){n=(n||"gregorian").toLowerCase(),r=r||"";var v=this._localCals[n+"-"+r];if(!v&&this.calendars[n]&&(v=new this.calendars[n](r),this._localCals[n+"-"+r]=v),!v)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,n);return v},newDate:function(n,r,v,s,o){return s=(n!=null&&n.year?n.calendar():typeof s=="string"?this.instance(s,o):s)||this.instance(),s.newDate(n,r,v)},substituteDigits:function(n){return function(r){return(r+"").replace(/[0-9]/g,function(v){return n[v]})}},substituteChineseDigits:function(n,r){return function(v){for(var s="",o=0;v>0;){var b=v%10;s=(b===0?"":n[b]+r[o])+s,o++,v=Math.floor(v/10)}return s.indexOf(n[1]+r[1])===0&&(s=s.substr(1)),s||n[0]}}});function A(n,r,v,s){if(this._calendar=n,this._year=r,this._month=v,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(n,r){return n=""+n,"000000".substring(0,r-n.length)+n}m(A.prototype,{newDate:function(n,r,v){return this._calendar.newDate(n==null?this:n,r,v)},year:function(n){return arguments.length===0?this._year:this.set(n,"y")},month:function(n){return arguments.length===0?this._month:this.set(n,"m")},day:function(n){return arguments.length===0?this._day:this.set(n,"d")},date:function(n,r,v){if(!this._calendar.isValid(n,r,v))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=n,this._month=r,this._day=v,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(n,r){return this._calendar.add(this,n,r)},set:function(n,r){return this._calendar.set(this,n,r)},compareTo:function(n){if(this._calendar.name!==n._calendar.name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,n._calendar.local.name);var r=this._year!==n._year?this._year-n._year:this._month!==n._month?this.monthOfYear()-n.monthOfYear():this._day-n._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(n){return this._calendar.fromJD(n)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(n){return this._calendar.fromJSDate(n)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}});function e(){this.shortYearCutoff="+10"}m(e.prototype,{_validateLevel:0,newDate:function(n,r,v){return n==null?this.today():(n.year&&(this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),v=n.day(),r=n.month(),n=n.year()),new A(this,n,r,v))},today:function(){return this.fromJSDate(new Date)},epoch:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+T(Math.abs(r.year()),4)},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),12},monthOfYear:function(n,r){var v=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return(v.month()+this.monthsInYear(v)-this.firstMonth)%this.monthsInYear(v)+this.minMonth},fromMonthOfYear:function(n,r){var v=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(n)+this.minMonth;return this._validate(n,v,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth),v},daysInYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(n,r,v){return this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),{}},add:function(n,r,v){return this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate),this._correctAdd(n,this._add(n,r,v),r,v)},_add:function(n,r,v){if(this._validateLevel++,v==="d"||v==="w"){var s=n.toJD()+r*(v==="w"?this.daysInWeek():1),o=n.calendar().fromJD(s);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var b=n.year()+(v==="y"?r:0),g=n.monthOfYear()+(v==="m"?r:0),o=n.day(),d=function(l){for(;g<l.minMonth;)b--,g+=l.monthsInYear(b);for(var x=l.monthsInYear(b);g>x-1+l.minMonth;)b++,g-=x,x=l.monthsInYear(b)};v==="y"?(n.month()!==this.fromMonthOfYear(b,g)&&(g=this.newDate(b,n.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(b)),o=Math.min(o,this.daysInMonth(b,this.fromMonthOfYear(b,g)))):v==="m"&&(d(this),o=Math.min(o,this.daysInMonth(b,this.fromMonthOfYear(b,g))));var f=[b,this.fromMonthOfYear(b,g),o];return this._validateLevel--,f}catch(y){throw this._validateLevel--,y}},_correctAdd:function(n,r,v,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(r[0]===0||n.year()>0!=r[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],b=v<0?-1:1;r=this._add(n,v*o[0]+b*o[1],o[2])}return n.date(r[0],r[1],r[2])},set:function(n,r,v){this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate);var s=v==="y"?r:n.year(),o=v==="m"?r:n.month(),b=v==="d"?r:n.day();return(v==="y"||v==="m")&&(b=Math.min(b,this.daysInMonth(s,o))),n.date(s,o,b)},isValid:function(n,r,v){this._validateLevel++;var s=this.hasYearZero||n!==0;if(s){var o=this.newDate(n,r,this.minDay);s=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(o)&&v>=this.minDay&&v-this.minDay<this.daysInMonth(o)}return this._validateLevel--,s},toJSDate:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return i.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(n){return this.fromJD(i.instance().fromJSDate(n).toJD())},_validate:function(n,r,v,s){if(n.year){if(this._validateLevel===0&&this.name!==n.calendar().name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,n.calendar().local.name);return n}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(n,r,v))throw s.replace(/\{0\}/,this.local.name);var o=this.newDate(n,r,v);return this._validateLevel--,o}catch(b){throw this._validateLevel--,b}}});function a(n){this.local=this.regionalOptions[n]||this.regionalOptions[""]}a.prototype=new e,m(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var r=this._validate(v,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),v=r.year()+(r.year()<0?1:0);return v%4===0&&(v%100!==0||v%400===0)},weekOfYear:function(n,r,v){var s=this.newDate(n,r,v);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(n,r){var v=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(n,r,v){return(this.dayOfWeek(n,r,v)||7)<6},toJD:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);n=s.year(),r=s.month(),v=s.day(),n<0&&n++,r<3&&(r+=12,n--);var o=Math.floor(n/100),b=2-o+Math.floor(o/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(r+1))+v+b-1524.5},fromJD:function(n){var r=Math.floor(n+.5),v=Math.floor((r-186721625e-2)/36524.25);v=r+1+v-Math.floor(v/4);var s=v+1524,o=Math.floor((s-122.1)/365.25),b=Math.floor(365.25*o),g=Math.floor((s-b)/30.6001),d=s-b-Math.floor(g*30.6001),f=g-(g>13.5?13:1),y=o-(f>2.5?4716:4715);return y<=0&&y--,this.newDate(y,f,d)},toJSDate:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),o=new Date(s.year(),s.month()-1,s.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(n){return this.newDate(n.getFullYear(),n.getMonth()+1,n.getDate())}});var i=N.exports=new u;i.cdate=A,i.baseCalendar=e,i.calendars.gregorian=a},{"object-assign":247}],348:[function(t,N,V){var m=t("object-assign"),u=t("./main");m(u.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),u.local=u.regionalOptions[""],m(u.cdate.prototype,{formatDate:function(A,T){return typeof A!="string"&&(T=A,A=""),this._calendar.formatDate(A||"",this,T)}}),m(u.baseCalendar.prototype,{UNIX_EPOCH:u.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:u.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(A,T,e){if(typeof A!="string"&&(e=T,T=A,A=""),!T)return"";if(T.calendar()!==this)throw u.local.invalidFormat||u.regionalOptions[""].invalidFormat;A=A||this.local.dateFormat,e=e||{};var a=e.dayNamesShort||this.local.dayNamesShort,i=e.dayNames||this.local.dayNames,n=e.monthNumbers||this.local.monthNumbers,r=e.monthNamesShort||this.local.monthNamesShort,v=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var s=function(w,p){for(var _=1;M+_<A.length&&A.charAt(M+_)===w;)_++;return M+=_-1,Math.floor(_/(p||1))>1},o=function(w,p,_,h){var L=""+p;if(s(w,h))for(;L.length<_;)L="0"+L;return L},b=function(w,p,_,h){return s(w)?h[p]:_[p]},g=this,d=function(w){return typeof n=="function"?n.call(g,w,s("m")):l(o("m",w.month(),2))},f=function(w,p){return p?typeof v=="function"?v.call(g,w):v[w.month()-g.minMonth]:typeof r=="function"?r.call(g,w):r[w.month()-g.minMonth]},y=this.local.digits,l=function(w){return e.localNumbers&&y?y(w):w},x="",c=!1,M=0;M<A.length;M++)if(c)A.charAt(M)==="'"&&!s("'")?c=!1:x+=A.charAt(M);else switch(A.charAt(M)){case"d":x+=l(o("d",T.day(),2));break;case"D":x+=b("D",T.dayOfWeek(),a,i);break;case"o":x+=o("o",T.dayOfYear(),3);break;case"w":x+=o("w",T.weekOfYear(),2);break;case"m":x+=d(T);break;case"M":x+=f(T,s("M"));break;case"y":x+=s("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":s("Y",2),x+=T.formatYear();break;case"J":x+=T.toJD();break;case"@":x+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?x+="'":c=!0;break;default:x+=A.charAt(M)}return x},parseDate:function(A,T,e){if(T==null)throw u.local.invalidArguments||u.regionalOptions[""].invalidArguments;if(T=typeof T=="object"?T.toString():T+"",T==="")return null;A=A||this.local.dateFormat,e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var i=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,v=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,o=e.monthNames||this.local.monthNames,b=-1,g=-1,d=-1,f=-1,y=-1,l=!1,x=!1,c=function(I,D){for(var R=1;S+R<A.length&&A.charAt(S+R)===I;)R++;return S+=R-1,Math.floor(R/(D||1))>1},M=function(I,D){var R=c(I,D),O=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],z=new RegExp("^-?\\d{1,"+O+"}"),G=T.substring(E).match(z);if(!G)throw(u.local.missingNumberAt||u.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=G[0].length,parseInt(G[0],10)},w=this,p=function(){if(typeof v=="function"){c("m");var I=v.call(w,T.substring(E));return E+=I.length,I}return M("m")},_=function(I,D,R,O){for(var z=c(I,O)?R:D,G=0;G<z.length;G++)if(T.substr(E,z[G].length).toLowerCase()===z[G].toLowerCase())return E+=z[G].length,G+w.minMonth;throw(u.local.unknownNameAt||u.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},h=function(){if(typeof o=="function"){var I=c("M")?o.call(w,T.substring(E)):s.call(w,T.substring(E));return E+=I.length,I}return _("M",s,o)},L=function(){if(T.charAt(E)!==A.charAt(S))throw(u.local.unexpectedLiteralAt||u.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,S=0;S<A.length;S++)if(x)A.charAt(S)==="'"&&!c("'")?x=!1:L();else switch(A.charAt(S)){case"d":f=M("d");break;case"D":_("D",i,n);break;case"o":y=M("o");break;case"w":M("w");break;case"m":d=p();break;case"M":d=h();break;case"y":var P=S;l=!c("y",2),S=P,g=M("y",2);break;case"Y":g=M("Y",2);break;case"J":b=M("J")+.5,T.charAt(E)==="."&&(E++,M("J"));break;case"@":b=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":b=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":c("'")?L():x=!0;break;default:L()}if(E<T.length)throw u.local.unexpectedText||u.regionalOptions[""].unexpectedText;if(g===-1?g=this.today().year():g<100&&l&&(g+=a===-1?1900:this.today().year()-this.today().year()%100-(g<=a?0:100)),typeof d=="string"&&(d=r.call(this,g,d)),y>-1){d=1,f=y;for(var F=this.daysInMonth(g,d);f>F;F=this.daysInMonth(g,d))d++,f-=F}return b>-1?this.fromJD(b):this.newDate(g,d,f)},determineDate:function(A,T,e,a,i){e&&typeof e!="object"&&(i=a,a=e,e=null),typeof a!="string"&&(i=a,a="");var n=this,r=function(v){try{return n.parseDate(a,v,i)}catch{}v=v.toLowerCase();for(var s=(v.match(/^c/)&&e?e.newDate():null)||n.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,b=o.exec(v);b;)s.add(parseInt(b[1],10),b[2]||"d"),b=o.exec(v);return s};return T=T?T.newDate():null,A=A==null?T:typeof A=="string"?r(A):typeof A=="number"?isNaN(A)||A===1/0||A===-1/0?T:n.today().add(A,"d"):n.newDate(A),A}})},{"./main":347,"object-assign":247}],349:[function(t,N,V){N.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(t,N,V){var m=t("./arrow_paths"),u=t("../../plots/font_attributes"),A=t("../../plots/cartesian/constants"),T=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),N.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:u({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",A.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",A.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",A.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",A.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:u({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("./draw").draw;N.exports=function(i){var n=i._fullLayout,r=m.filterVisible(n.annotations);if(r.length&&i._fullData.length)return m.syncOrAsync([A,T],i)};function T(a){var i=a._fullLayout;m.filterVisible(i.annotations).forEach(function(n){var r=u.getFromId(a,n.xref),v=u.getFromId(a,n.yref),s=u.getRefType(n.xref),o=u.getRefType(n.yref);n._extremes={},s==="range"&&e(n,r),o==="range"&&e(n,v)})}function e(a,i){var n=i._id,r=n.charAt(0),v=a[r],s=a["a"+r],o=a[r+"ref"],b=a["a"+r+"ref"],g=a["_"+r+"padplus"],d=a["_"+r+"padminus"],f={x:1,y:-1}[r]*a[r+"shift"],y=3*a.arrowsize*a.arrowwidth||0,l=y+f,x=y-f,c=3*a.startarrowsize*a.arrowwidth||0,M=c+f,w=c-f,p;if(b===o){var _=u.findExtremes(i,[i.r2c(v)],{ppadplus:l,ppadminus:x}),h=u.findExtremes(i,[i.r2c(s)],{ppadplus:Math.max(g,M),ppadminus:Math.max(d,w)});p={min:[_.min[0],h.min[0]],max:[_.max[0],h.max[0]]}}else M=s?M+s:M,w=s?w-s:w,p=u.findExtremes(i,[i.r2c(v)],{ppadplus:Math.max(g,l,M),ppadminus:Math.max(d,x,w)});a._extremes[n]=p}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(t,N,V){var m=t("../../lib"),u=t("../../registry"),A=t("../../plot_api/plot_template").arrayEditor;N.exports={hasClickToShow:T,onClick:e};function T(n,r){var v=a(n,r);return v.on.length>0||v.explicitOff.length>0}function e(n,r){var v=a(n,r),s=v.on,o=v.off.concat(v.explicitOff),b={},g=n._fullLayout.annotations,d,f;if(!!(s.length||o.length)){for(d=0;d<s.length;d++)f=A(n.layout,"annotations",g[s[d]]),f.modifyItem("visible",!0),m.extendFlat(b,f.getUpdateObj());for(d=0;d<o.length;d++)f=A(n.layout,"annotations",g[o[d]]),f.modifyItem("visible",!1),m.extendFlat(b,f.getUpdateObj());return u.call("update",n,{},b)}}function a(n,r){var v=n._fullLayout.annotations,s=[],o=[],b=[],g=(r||[]).length,d,f,y,l,x,c,M,w;for(d=0;d<v.length;d++)if(y=v[d],l=y.clicktoshow,l){for(f=0;f<g;f++)if(x=r[f],c=x.xaxis,M=x.yaxis,c._id===y.xref&&M._id===y.yref&&c.d2r(x.x)===i(y._xclick,c)&&M.d2r(x.y)===i(y._yclick,M)){y.visible?l==="onout"?w=o:w=b:w=s,w.push(d);break}f===g&&y.visible&&l==="onout"&&o.push(d)}return{on:s,off:o,explicitOff:b}}function i(n,r){return r.type==="log"?r.l2r(n):r.d2r(n)}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(t,N,V){var m=t("../../lib"),u=t("../color");N.exports=function(T,e,a,i){i("opacity");var n=i("bgcolor"),r=i("bordercolor"),v=u.opacity(r);i("borderpad");var s=i("borderwidth"),o=i("showarrow");i("text",o?" ":a._dfltTitle.annotation),i("textangle"),m.coerceFont(i,"font",a.font),i("width"),i("align");var b=i("height");if(b&&i("valign"),o){var g=i("arrowside"),d,f;g.indexOf("end")!==-1&&(d=i("arrowhead"),f=i("arrowsize")),g.indexOf("start")!==-1&&(i("startarrowhead",d),i("startarrowsize",f)),i("arrowcolor",v?e.bordercolor:u.defaultLine),i("arrowwidth",(v&&s||1)*2),i("standoff"),i("startstandoff")}var y=i("hovertext"),l=a.hoverlabel||{};if(y){var x=i("hoverlabel.bgcolor",l.bgcolor||(u.opacity(n)?u.rgb(n):u.defaultLine)),c=i("hoverlabel.bordercolor",l.bordercolor||u.contrast(x));m.coerceFont(i,"hoverlabel.font",{family:l.font.family,size:l.font.size,color:l.font.color||c})}i("captureevents",!!y)}},{"../../lib":515,"../color":367}],354:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib/to_log_range");N.exports=function(T,e,a,i){e=e||{};var n=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!(n||r))return;var v=T._fullLayout.annotations,s=e._id.charAt(0),o,b;function g(f){var y=o[f],l=null;n?l=u(y,e.range):l=Math.pow(10,y),m(l)||(l=null),i(b+f,l)}for(var d=0;d<v.length;d++)o=v[d],b="annotations["+d+"].",o[s+"ref"]===e._id&&g(s),o["a"+s+"ref"]===e._id&&g("a"+s)}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./common_defaults"),e=t("./attributes");N.exports=function(n,r){A(n,r,{name:"annotations",handleItemDefaults:a})};function a(i,n,r){function v(L,E){return m.coerce(i,n,e,L,E)}var s=v("visible"),o=v("clicktoshow");if(!!(s||o)){T(i,n,r,v);for(var b=n.showarrow,g=["x","y"],d=[-10,-30],f={_fullLayout:r},y=0;y<2;y++){var l=g[y],x=u.coerceRef(i,n,f,l,"","paper");if(x!=="paper"){var c=u.getFromId(f,x);c._annIndices.push(n._index)}if(u.coercePosition(n,f,v,x,l,.5),b){var M="a"+l,w=u.coerceRef(i,n,f,M,"pixel",["pixel","paper"]);w!=="pixel"&&w!==x&&(w=n[M]="pixel");var p=w==="pixel"?d[y]:.4;u.coercePosition(n,f,v,w,M,p)}v(l+"anchor"),v(l+"shift")}if(m.noneOrAll(i,n,["x","y"]),b&&m.noneOrAll(i,n,["ax","ay"]),o){var _=v("xclick"),h=v("yclick");n._xclick=_===void 0?n.x:u.cleanPosition(_,f,n.xref),n._yclick=h===void 0?n.y:u.cleanPosition(h,f,n.yref)}}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../registry"),A=t("../../plots/plots"),T=t("../../lib"),e=T.strTranslate,a=t("../../plots/cartesian/axes"),i=t("../color"),n=t("../drawing"),r=t("../fx"),v=t("../../lib/svg_text_utils"),s=t("../../lib/setcursor"),o=t("../dragelement"),b=t("../../plot_api/plot_template").arrayEditor,g=t("./draw_arrow_head");N.exports={draw:d,drawOne:f,drawRaw:l};function d(x){var c=x._fullLayout;c._infolayer.selectAll(".annotation").remove();for(var M=0;M<c.annotations.length;M++)c.annotations[M].visible&&f(x,M);return A.previousPromises(x)}function f(x,c){var M=x._fullLayout,w=M.annotations[c]||{},p=a.getFromId(x,w.xref),_=a.getFromId(x,w.yref);p&&p.setScale(),_&&_.setScale(),l(x,w,c,!1,p,_)}function y(x,c,M,w,p){var _=p[M],h=p[M+"ref"],L=M.indexOf("y")!==-1,E=a.getRefType(h)==="domain",S=L?w.h:w.w;return x?E?_+(L?-c:c)/x._length:x.p2r(x.r2p(_)+c):_+(L?-c:c)/S}function l(x,c,M,w,p,_){var h=x._fullLayout,L=x._fullLayout._size,E=x._context.edits,S,P;w?(S="annotation-"+w,P=w+".annotations"):(S="annotation",P="annotations");var F=b(x.layout,P,c),I=F.modifyBase,D=F.modifyItem,R=F.getUpdateObj;h._infolayer.selectAll("."+S+'[data-index="'+M+'"]').remove();var O="clip"+h._uid+"_ann"+M;if(!c._input||c.visible===!1){m.selectAll("#"+O).remove();return}var z={x:{},y:{}},G=+c.textangle||0,Y=h._infolayer.append("g").classed(S,!0).attr("data-index",String(M)).style("opacity",c.opacity),ee=Y.append("g").classed("annotation-text-g",!0),j=E[c.showarrow?"annotationTail":"annotationPosition"],X=c.captureevents||E.annotationText||j;function ie(le){var _e={index:M,annotation:c._input,fullAnnotation:c,event:le};return w&&(_e.subplotId=w),_e}var he=ee.append("g").style("pointer-events",X?"all":null).call(s,"pointer").on("click",function(){x._dragging=!1,x.emit("plotly_clickannotation",ie(m.event))});c.hovertext&&he.on("mouseover",function(){var le=c.hoverlabel,_e=le.font,fe=this.getBoundingClientRect(),me=x.getBoundingClientRect();r.loneHover({x0:fe.left-me.left,x1:fe.right-me.left,y:(fe.top+fe.bottom)/2-me.top,text:c.hovertext,color:le.bgcolor,borderColor:le.bordercolor,fontFamily:_e.family,fontSize:_e.size,fontColor:_e.color},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:x})}).on("mouseout",function(){r.loneUnhover(h._hoverlayer.node())});var K=c.borderwidth,$=c.borderpad,U=K+$,H=he.append("rect").attr("class","bg").style("stroke-width",K+"px").call(i.stroke,c.bordercolor).call(i.fill,c.bgcolor),q=c.width||c.height,re=h._topclips.selectAll("#"+O).data(q?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),re.exit().remove();var Z=c.font,Q=h._meta?T.templateString(c.text,h._meta):c.text,oe=he.append("text").classed("annotation-text",!0).text(Q);function se(le){return le.call(n.font,Z).attr({"text-anchor":{left:"start",right:"end"}[c.align]||"middle"}),v.convertToTspans(le,x,ae),le}function ae(){var le=oe.selectAll("a");if(le.size()===1&&le.text()===oe.text()){var _e=he.insert("a",":first-child").attr({"xlink:xlink:href":le.attr("xlink:href"),"xlink:xlink:show":le.attr("xlink:show")}).style({cursor:"pointer"});_e.node().appendChild(H.node())}var fe=he.select(".annotation-text-math-group"),me=!fe.empty(),xe=n.bBox((me?fe:oe).node()),ye=xe.width,be=xe.height,ke=c.width||ye,De=c.height||be,He=Math.round(ke+2*U),Ae=Math.round(De+2*U);function Le(rr,Jt){return Jt==="auto"&&(rr<1/3?Jt="left":rr>2/3?Jt="right":Jt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Jt]}for(var Ze=!1,We=["x","y"],ze=0;ze<We.length;ze++){var Ie=We[ze],Ve=c[Ie+"ref"]||Ie,dt=c["a"+Ie+"ref"],Ft={x:p,y:_}[Ie],Qt=(G+(Ie==="x"?0:-90))*Math.PI/180,Ot=He*Math.cos(Qt),Ct=Ae*Math.sin(Qt),jt=Math.abs(Ot)+Math.abs(Ct),Nt=c[Ie+"anchor"],Lt=c[Ie+"shift"]*(Ie==="x"?1:-1),Xe=z[Ie],it,Ye,Ee,Ge,Ke,qe=a.getRefType(Ve);if(Ft&&qe!=="domain"){var At=Ft.r2fraction(c[Ie]);(At<0||At>1)&&(dt===Ve?(At=Ft.r2fraction(c["a"+Ie]),(At<0||At>1)&&(Ze=!0)):Ze=!0),it=Ft._offset+Ft.r2p(c[Ie]),Ge=.5}else{var yt=qe==="domain";Ie==="x"?(Ee=c[Ie],it=yt?Ft._offset+Ft._length*Ee:it=L.l+L.w*Ee):(Ee=1-c[Ie],it=yt?Ft._offset+Ft._length*Ee:it=L.t+L.h*Ee),Ge=c.showarrow?.5:Ee}if(c.showarrow){Xe.head=it;var Mt=c["a"+Ie];if(Ke=Ot*Le(.5,c.xanchor)-Ct*Le(.5,c.yanchor),dt===Ve){var Gt=a.getRefType(dt);Gt==="domain"?(Ie==="y"&&(Mt=1-Mt),Xe.tail=Ft._offset+Ft._length*Mt):Gt==="paper"?Ie==="y"?(Mt=1-Mt,Xe.tail=L.t+L.h*Mt):Xe.tail=L.l+L.w*Mt:Xe.tail=Ft._offset+Ft.r2p(Mt),Ye=Ke}else Xe.tail=it+Mt,Ye=Ke+Mt;Xe.text=Xe.tail+Ke;var zt=h[Ie==="x"?"width":"height"];if(Ve==="paper"&&(Xe.head=T.constrain(Xe.head,1,zt-1)),dt==="pixel"){var Ht=-Math.max(Xe.tail-3,Xe.text),Zt=Math.min(Xe.tail+3,Xe.text)-zt;Ht>0?(Xe.tail+=Ht,Xe.text+=Ht):Zt>0&&(Xe.tail-=Zt,Xe.text-=Zt)}Xe.tail+=Lt,Xe.head+=Lt}else Ke=jt*Le(Ge,Nt),Ye=Ke,Xe.text=it+Ke;Xe.text+=Lt,Ke+=Lt,Ye+=Lt,c["_"+Ie+"padplus"]=jt/2+Ye,c["_"+Ie+"padminus"]=jt/2-Ye,c["_"+Ie+"size"]=jt,c["_"+Ie+"shift"]=Ke}if(Ze){he.remove();return}var Wt=0,sr=0;if(c.align!=="left"&&(Wt=(ke-ye)*(c.align==="center"?.5:1)),c.valign!=="top"&&(sr=(De-be)*(c.valign==="middle"?.5:1)),me)fe.select("svg").attr({x:U+Wt-1,y:U+sr}).call(n.setClipUrl,q?O:null,x);else{var Gr=U+sr-xe.top,cn=U+Wt-xe.left;oe.call(v.positionText,cn,Gr).call(n.setClipUrl,q?O:null,x)}re.select("rect").call(n.setRect,U,U,ke,De),H.call(n.setRect,K/2,K/2,He-K,Ae-K),he.call(n.setTranslate,Math.round(z.x.text-He/2),Math.round(z.y.text-Ae/2)),ee.attr({transform:"rotate("+G+","+z.x.text+","+z.y.text+")"});var qr=function(rr,Jt){Y.selectAll(".annotation-arrow-g").remove();var hr=z.x.head,Sr=z.y.head,tt=z.x.tail+rr,Qe=z.y.tail+Jt,lt=z.x.text+rr,ft=z.y.text+Jt,Et=T.rotationXYMatrix(G,lt,ft),Vt=T.apply2DTransform(Et),Pe=T.apply2DTransform2(Et),Se=+H.attr("width"),ot=+H.attr("height"),ct=lt-.5*Se,pt=ct+Se,St=ft-.5*ot,xt=St+ot,Pt=[[ct,St,ct,xt],[ct,xt,pt,xt],[pt,xt,pt,St],[pt,St,ct,St]].map(Pe);if(!Pt.reduce(function(at,Rt){return at^!!T.segmentsIntersect(hr,Sr,hr+1e6,Sr+1e6,Rt[0],Rt[1],Rt[2],Rt[3])},!1)){Pt.forEach(function(at){var Rt=T.segmentsIntersect(tt,Qe,hr,Sr,at[0],at[1],at[2],at[3]);Rt&&(tt=Rt.x,Qe=Rt.y)});var Xt=c.arrowwidth,or=c.arrowcolor,Pr=c.arrowside,Ar=Y.append("g").style({opacity:i.opacity(or)}).classed("annotation-arrow-g",!0),Er=Ar.append("path").attr("d","M"+tt+","+Qe+"L"+hr+","+Sr).style("stroke-width",Xt+"px").call(i.stroke,i.rgb(or));if(g(Er,Pr,c),E.annotationPosition&&Er.node().parentNode&&!w){var $r=hr,lr=Sr;if(c.standoff){var br=Math.sqrt(Math.pow(hr-tt,2)+Math.pow(Sr-Qe,2));$r+=c.standoff*(tt-hr)/br,lr+=c.standoff*(Qe-Sr)/br}var Fr=Ar.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(tt-$r)+","+(Qe-lr),transform:e($r,lr)}).style("stroke-width",Xt+6+"px").call(i.stroke,"rgba(0,0,0,0)").call(i.fill,"rgba(0,0,0,0)"),Hr,Lr;o.init({element:Fr.node(),gd:x,prepFn:function(){var at=n.getTranslate(he);Hr=at.x,Lr=at.y,p&&p.autorange&&I(p._name+".autorange",!0),_&&_.autorange&&I(_._name+".autorange",!0)},moveFn:function(at,Rt){var Kt=Vt(Hr,Lr),ur=Kt[0]+at,Nr=Kt[1]+Rt;he.call(n.setTranslate,ur,Nr),D("x",y(p,at,"x",L,c)),D("y",y(_,Rt,"y",L,c)),c.axref===c.xref&&D("ax",y(p,at,"ax",L,c)),c.ayref===c.yref&&D("ay",y(_,Rt,"ay",L,c)),Ar.attr("transform",e(at,Rt)),ee.attr({transform:"rotate("+G+","+ur+","+Nr+")"})},doneFn:function(){u.call("_guiRelayout",x,R());var at=document.querySelector(".js-notes-box-panel");at&&at.redraw(at.selectedObj)}})}}};if(c.showarrow&&qr(0,0),j){var st;o.init({element:he.node(),gd:x,prepFn:function(){st=ee.attr("transform")},moveFn:function(rr,Jt){var hr="pointer";if(c.showarrow)c.axref===c.xref?D("ax",y(p,rr,"ax",L,c)):D("ax",c.ax+rr),c.ayref===c.yref?D("ay",y(_,Jt,"ay",L.w,c)):D("ay",c.ay+Jt),qr(rr,Jt);else{if(w)return;var Sr,tt;if(p)Sr=y(p,rr,"x",L,c);else{var Qe=c._xsize/L.w,lt=c.x+(c._xshift-c.xshift)/L.w-Qe/2;Sr=o.align(lt+rr/L.w,Qe,0,1,c.xanchor)}if(_)tt=y(_,Jt,"y",L,c);else{var ft=c._ysize/L.h,Et=c.y-(c._yshift+c.yshift)/L.h-ft/2;tt=o.align(Et-Jt/L.h,ft,0,1,c.yanchor)}D("x",Sr),D("y",tt),(!p||!_)&&(hr=o.getCursor(p?.5:Sr,_?.5:tt,c.xanchor,c.yanchor))}ee.attr({transform:e(rr,Jt)+st}),s(he,hr)},clickFn:function(rr,Jt){c.captureevents&&x.emit("plotly_clickannotation",ie(Jt))},doneFn:function(){s(he),u.call("_guiRelayout",x,R());var rr=document.querySelector(".js-notes-box-panel");rr&&rr.redraw(rr.selectedObj)}})}}E.annotationText?oe.call(v.makeEditable,{delegate:he,gd:x}).call(se).on("edit",function(le){c.text=le,this.call(se),D("text",le),p&&p.autorange&&I(p._name+".autorange",!0),_&&_.autorange&&I(_._name+".autorange",!0),u.call("_guiRelayout",x,R())}):oe.call(se)}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(t,N,V){var m=t("@plotly/d3"),u=t("../color"),A=t("./arrow_paths"),T=t("../../lib"),e=T.strScale,a=T.strRotate,i=T.strTranslate;N.exports=function(r,v,s){var o=r.node(),b=A[s.arrowhead||0],g=A[s.startarrowhead||0],d=(s.arrowwidth||1)*(s.arrowsize||1),f=(s.arrowwidth||1)*(s.startarrowsize||1),y=v.indexOf("start")>=0,l=v.indexOf("end")>=0,x=b.backoff*d+s.standoff,c=g.backoff*f+s.startstandoff,M,w,p,_;if(o.nodeName==="line"){M={x:+r.attr("x1"),y:+r.attr("y1")},w={x:+r.attr("x2"),y:+r.attr("y2")};var h=M.x-w.x,L=M.y-w.y;if(p=Math.atan2(L,h),_=p+Math.PI,x&&c&&x+c>Math.sqrt(h*h+L*L)){ee();return}if(x){if(x*x>h*h+L*L){ee();return}var E=x*Math.cos(p),S=x*Math.sin(p);w.x+=E,w.y+=S,r.attr({x2:w.x,y2:w.y})}if(c){if(c*c>h*h+L*L){ee();return}var P=c*Math.cos(p),F=c*Math.sin(p);M.x-=P,M.y-=F,r.attr({x1:M.x,y1:M.y})}}else if(o.nodeName==="path"){var I=o.getTotalLength(),D="";if(I<x+c){ee();return}var R=o.getPointAtLength(0),O=o.getPointAtLength(.1);p=Math.atan2(R.y-O.y,R.x-O.x),M=o.getPointAtLength(Math.min(c,I)),D="0px,"+c+"px,";var z=o.getPointAtLength(I),G=o.getPointAtLength(I-.1);_=Math.atan2(z.y-G.y,z.x-G.x),w=o.getPointAtLength(Math.max(0,I-x));var Y=D?c+x:x;D+=I-Y+"px,"+I+"px",r.style("stroke-dasharray",D)}function ee(){r.style("stroke-dasharray","0px,100px")}function j(X,ie,he,K){!X.path||(X.noRotate&&(he=0),m.select(o.parentNode).append("path").attr({class:r.attr("class"),d:X.path,transform:i(ie.x,ie.y)+a(he*180/Math.PI)+e(K)}).style({fill:u.rgb(s.arrowcolor),"stroke-width":0}))}y&&j(g,M,p,f),l&&j(b,w,_,d)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(t,N,V){var m=t("./draw"),u=t("./click");N.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:m.draw,drawOne:m.drawOne,drawRaw:m.drawRaw,hasClickToShow:u.hasClickToShow,onClick:u.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(t,N,V){var m=t("../annotations/attributes"),u=t("../../plot_api/edit_types").overrideAll,A=t("../../plot_api/plot_template").templatedArray;N.exports=u(A("annotation",{visible:m.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:m.xanchor,xshift:m.xshift,yanchor:m.yanchor,yshift:m.yshift,text:m.text,textangle:m.textangle,font:m.font,width:m.width,height:m.height,opacity:m.opacity,align:m.align,valign:m.valign,bgcolor:m.bgcolor,bordercolor:m.bordercolor,borderpad:m.borderpad,borderwidth:m.borderwidth,showarrow:m.showarrow,arrowcolor:m.arrowcolor,arrowhead:m.arrowhead,startarrowhead:m.startarrowhead,arrowside:m.arrowside,arrowsize:m.arrowsize,startarrowsize:m.startarrowsize,arrowwidth:m.arrowwidth,standoff:m.standoff,startstandoff:m.startstandoff,hovertext:m.hovertext,hoverlabel:m.hoverlabel,captureevents:m.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes");N.exports=function(e){for(var a=e.fullSceneLayout,i=a.annotations,n=0;n<i.length;n++)A(i[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function A(T,e){var a=e.fullSceneLayout,i=a.domain,n=e.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},m.extendFlat(T._xa,r),u.setConvert(T._xa),T._xa._offset=n.l+i.x[0]*n.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*n.w*(i.x[1]-i.x[0])},T._ya={},m.extendFlat(T._ya,r),u.setConvert(T._ya),T._ya._offset=n.t+(1-i.y[1])*n.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*n.h*(i.y[1]-i.y[0])}}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("../annotations/common_defaults"),e=t("./attributes");N.exports=function(n,r,v){A(n,r,{name:"annotations",handleItemDefaults:a,fullLayout:v.fullLayout})};function a(i,n,r,v){function s(g,d){return m.coerce(i,n,e,g,d)}function o(g){var d=g+"axis",f={_fullLayout:{}};return f._fullLayout[d]=r[d],u.coercePosition(n,f,s,g,g,.5)}var b=s("visible");!b||(T(i,n,v.fullLayout,s),o("x"),o("y"),o("z"),m.noneOrAll(i,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",s("ax",-10),s("ay",-30),m.noneOrAll(i,n,["ax","ay"])))}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(t,N,V){var m=t("../annotations/draw").drawRaw,u=t("../../plots/gl3d/project"),A=["x","y","z"];N.exports=function(e){for(var a=e.fullSceneLayout,i=e.dataScale,n=a.annotations,r=0;r<n.length;r++){for(var v=n[r],s=!1,o=0;o<3;o++){var b=A[o],g=v[b],d=a[b+"axis"],f=d.r2fraction(g);if(f<0||f>1){s=!0;break}}s?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+r+'"]').remove():(v._pdata=u(e.glplot.cameraParams,[a.xaxis.r2l(v.x)*i[0],a.yaxis.r2l(v.y)*i[1],a.zaxis.r2l(v.z)*i[2]]),m(e.graphDiv,v,r,e.id,v._xa,v._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(t,N,V){var m=t("../../registry"),u=t("../../lib");N.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:A,convert:t("./convert"),draw:t("./draw")};function A(T,e){var a=m.subplotsRegistry.gl3d;if(!!a)for(var i=a.attrRegex,n=Object.keys(T),r=0;r<n.length;r++){var v=n[r];i.test(v)&&(T[v].annotations||[]).length&&(u.pushUnique(e._basePlotModules,a),u.pushUnique(e._subplots.gl3d,v))}}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(t,N,V){N.exports=t("world-calendars/dist/main"),t("world-calendars/dist/plus"),t("world-calendars/dist/calendars/chinese"),t("world-calendars/dist/calendars/coptic"),t("world-calendars/dist/calendars/discworld"),t("world-calendars/dist/calendars/ethiopian"),t("world-calendars/dist/calendars/hebrew"),t("world-calendars/dist/calendars/islamic"),t("world-calendars/dist/calendars/julian"),t("world-calendars/dist/calendars/mayan"),t("world-calendars/dist/calendars/nanakshahi"),t("world-calendars/dist/calendars/nepali"),t("world-calendars/dist/calendars/persian"),t("world-calendars/dist/calendars/taiwan"),t("world-calendars/dist/calendars/thai"),t("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(t,N,V){var m=t("./calendars"),u=t("../../lib"),A=t("../../constants/numerical"),T=A.EPOCHJD,e=A.ONEDAY,a={valType:"enumerated",values:u.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},i=function(p,_,h,L){var E={};return E[h]=a,u.coerce(p,_,E,h,L)},n=function(p,_,h,L){for(var E=0;E<h.length;E++)i(p,_,h[E]+"calendar",L.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},v={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},o="##",b={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:o,w:o,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function g(p,_,h){for(var L=Math.floor((_+.05)/e)+T,E=f(h).fromJD(L),S=0,P,F,I,D,R;(S=p.indexOf("%",S))!==-1;)P=p.charAt(S+1),P==="0"||P==="-"||P==="_"?(I=3,F=p.charAt(S+2),P==="_"&&(P="-")):(F=P,P="0",I=2),D=b[F],D?(D===o?R=o:R=E.formatDate(D[P]),p=p.substr(0,S)+R+p.substr(S+I),S+=R.length):S+=I;return p}var d={};function f(p){var _=d[p];return _||(_=d[p]=m.instance(p),_)}function y(p){return u.extendFlat({},a,{description:p})}function l(p){return"Sets the calendar system to use with `"+p+"` date data."}var x={xcalendar:y(l("x"))},c=u.extendFlat({},x,{ycalendar:y(l("y"))}),M=u.extendFlat({},c,{zcalendar:y(l("z"))}),w=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));N.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:c,bar:c,box:c,heatmap:c,contour:c,histogram:c,histogram2d:c,histogram2dcontour:c,scatter3d:M,surface:M,mesh3d:M,scattergl:c,ohlc:x,candlestick:x},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:w},yaxis:{calendar:w},scene:{xaxis:{calendar:w},yaxis:{calendar:w},zaxis:{calendar:w}},polar:{radialaxis:{calendar:w}}},transforms:{filter:{valuecalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:i,handleTraceDefaults:n,CANONICAL_SUNDAY:v,CANONICAL_TICK:r,DFLTRANGE:s,getCal:f,worldCalFmt:g}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(t,N,V){V.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],V.defaultLine="#444",V.lightLine="#eee",V.background="#fff",V.borderLine="#BEC8D9",V.lightFraction=100*(14-4)/(15-4)},{}],367:[function(t,N,V){var m=t("tinycolor2"),u=t("fast-isnumeric"),A=t("../../lib/array").isTypedArray,T=N.exports={},e=t("./attributes");T.defaults=e.defaults;var a=T.defaultLine=e.defaultLine;T.lightLine=e.lightLine;var i=T.background=e.background;T.tinyRGB=function(r){var v=r.toRgb();return"rgb("+Math.round(v.r)+", "+Math.round(v.g)+", "+Math.round(v.b)+")"},T.rgb=function(r){return T.tinyRGB(m(r))},T.opacity=function(r){return r?m(r).getAlpha():0},T.addOpacity=function(r,v){var s=m(r).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+v+")"},T.combine=function(r,v){var s=m(r).toRgb();if(s.a===1)return m(r).toRgbString();var o=m(v||i).toRgb(),b=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},g={r:b.r*(1-s.a)+s.r*s.a,g:b.g*(1-s.a)+s.g*s.a,b:b.b*(1-s.a)+s.b*s.a};return m(g).toRgbString()},T.contrast=function(r,v,s){var o=m(r);o.getAlpha()!==1&&(o=m(T.combine(r,i)));var b=o.isDark()?v?o.lighten(v):i:s?o.darken(s):a;return b.toString()},T.stroke=function(r,v){var s=m(v);r.style({stroke:T.tinyRGB(s),"stroke-opacity":s.getAlpha()})},T.fill=function(r,v){var s=m(v);r.style({fill:T.tinyRGB(s),"fill-opacity":s.getAlpha()})},T.clean=function(r){if(!(!r||typeof r!="object")){var v=Object.keys(r),s,o,b,g;for(s=0;s<v.length;s++)if(b=v[s],g=r[b],b.substr(b.length-5)==="color")if(Array.isArray(g))for(o=0;o<g.length;o++)g[o]=n(g[o]);else r[b]=n(g);else if(b.substr(b.length-10)==="colorscale"&&Array.isArray(g))for(o=0;o<g.length;o++)Array.isArray(g[o])&&(g[o][1]=n(g[o][1]));else if(Array.isArray(g)){var d=g[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(o=0;o<g.length;o++)T.clean(g[o])}else g&&typeof g=="object"&&!A(g)&&T.clean(g)}};function n(r){if(u(r)||typeof r!="string")return r;var v=r.trim();if(v.substr(0,3)!=="rgb")return r;var s=v.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return r;var o=s[1].trim().split(/\s*[\s,]\s*/),b=v.charAt(3)==="a"&&o.length===4;if(!b&&o.length!==3)return r;for(var g=0;g<o.length;g++){if(!o[g].length||(o[g]=Number(o[g]),!(o[g]>=0)))return r;if(g===3)o[g]>1&&(o[g]=1);else if(o[g]>=1)return r}var d=Math.round(o[0]*255)+", "+Math.round(o[1]*255)+", "+Math.round(o[2]*255);return b?"rgba("+d+", "+o[3]+")":"rgb("+d+")"}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(t,N,V){var m=t("../../plots/cartesian/layout_attributes"),u=t("../../plots/font_attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll;N.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:m.linecolor,outlinewidth:m.linewidth,bordercolor:m.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:A({},m.ticks,{dflt:""}),ticklabeloverflow:A({},m.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,tickfont:u({}),tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,separatethousands:m.separatethousands,exponentformat:m.exponentformat,minexponent:m.minexponent,showexponent:m.showexponent,title:{text:{valType:"string"},font:u({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:u({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(t,N,V){N.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(t,N,V){var m=t("../../lib"),u=t("../../plot_api/plot_template"),A=t("../../plots/cartesian/tick_value_defaults"),T=t("../../plots/cartesian/tick_mark_defaults"),e=t("../../plots/cartesian/tick_label_defaults"),a=t("../../plots/cartesian/prefix_suffix_defaults"),i=t("./attributes");N.exports=function(r,v,s){var o=u.newContainer(v,"colorbar"),b=r.colorbar||{};function g(E,S){return m.coerce(b,o,i,E,S)}var d=s.margin||{t:0,b:0,l:0,r:0},f=s.width-d.l-d.r,y=s.height-d.t-d.b,l=g("orientation"),x=l==="v",c=g("thicknessmode");g("thickness",c==="fraction"?30/(x?f:y):30);var M=g("lenmode");g("len",M==="fraction"?1:x?y:f),g("x",x?1.02:.5),g("xanchor",x?"left":"center"),g("xpad"),g("y",x?.5:1.02),g("yanchor",x?"middle":"bottom"),g("ypad"),m.noneOrAll(b,o,["x","y"]),g("outlinecolor"),g("outlinewidth"),g("bordercolor"),g("borderwidth"),g("bgcolor");var w=m.coerce(b,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");g("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),A(b,o,g,"linear");var p=s.font,_={outerTicks:!1,font:p};w.indexOf("inside")!==-1&&(_.bgColor="black"),a(b,o,g,"linear",_),e(b,o,g,"linear",_),T(b,o,g,"linear",_),g("title.text",s._dfltTitle.colorbar);var h=o.tickfont,L=m.extendFlat({},h,{color:p.color,size:m.bigFont(h.size)});m.coerceFont(g,"title.font",L),g("title.side",x?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(t,N,V){var m=t("@plotly/d3"),u=t("tinycolor2"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../plots/cartesian/axes"),a=t("../dragelement"),i=t("../../lib"),n=i.strTranslate,r=t("../../lib/extend").extendFlat,v=t("../../lib/setcursor"),s=t("../drawing"),o=t("../color"),b=t("../titles"),g=t("../../lib/svg_text_utils"),d=t("../colorscale/helpers").flipScale,f=t("../../plots/cartesian/axis_defaults"),y=t("../../plots/cartesian/position_defaults"),l=t("../../plots/cartesian/layout_attributes"),x=t("../../constants/alignment"),c=x.LINE_SPACING,M=x.FROM_TL,w=x.FROM_BR,p=t("./constants").cn;function _(F){var I=F._fullLayout,D=I._infolayer.selectAll("g."+p.colorbar).data(h(F),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(p.colorbar,!0),D.each(function(R){var O=m.select(this);i.ensureSingle(O,"rect",p.cbbg),i.ensureSingle(O,"g",p.cbfills),i.ensureSingle(O,"g",p.cblines),i.ensureSingle(O,"g",p.cbaxis,function(G){G.classed(p.crisp,!0)}),i.ensureSingle(O,"g",p.cbtitleunshift,function(G){G.append("g").classed(p.cbtitle,!0)}),i.ensureSingle(O,"rect",p.cboutline);var z=L(O,R,F);z&&z.then&&(F._promises||[]).push(z),F._context.edits.colorbarPosition&&E(O,R,F)}),D.exit().each(function(R){A.autoMargin(F,R._id)}).remove(),D.order()}function h(F){var I=F._fullLayout,D=F.calcdata,R=[],O,z,G,Y;function ee(Z){return r(Z,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function j(){typeof Y.calc=="function"?Y.calc(F,G,O):(O._fillgradient=z.reversescale?d(z.colorscale):z.colorscale,O._zrange=[z[Y.min],z[Y.max]])}for(var X=0;X<D.length;X++){var ie=D[X];G=ie[0].trace;var he=G._module.colorbar;if(G.visible===!0&&he)for(var K=Array.isArray(he),$=K?he:[he],U=0;U<$.length;U++){Y=$[U];var H=Y.container;z=H?G[H]:G,z&&z.showscale&&(O=ee(z.colorbar),O._id="cb"+G.uid+(K&&H?"-"+H:""),O._traceIndex=G.index,O._propPrefix=(H?H+".":"")+"colorbar.",O._meta=G._meta,j(),R.push(O))}}for(var q in I._colorAxes)if(z=I[q],z.showscale){var re=I._colorAxes[q];O=ee(z.colorbar),O._id="cb"+q,O._propPrefix=q+".colorbar.",O._meta=I._meta,Y={min:"cmin",max:"cmax"},re[0]!=="heatmap"&&(G=re[1],Y.calc=G._module.colorbar.calc),j(),R.push(O)}return R}function L(F,I,D){var R=I.orientation==="v",O=I.len,z=I.lenmode,G=I.thickness,Y=I.thicknessmode,ee=I.outlinewidth,j=I.borderwidth,X=I.bgcolor,ie=I.xanchor,he=I.yanchor,K=I.xpad,$=I.ypad,U=I.x,H=R?I.y:1-I.y,q=D._fullLayout,re=q._size,Z=I._fillcolor,Q=I._line,oe=I.title,se=oe.side,ae=I._zrange||m.extent((typeof Z=="function"?Z:Q.color).domain()),le=typeof Q.color=="function"?Q.color:function(){return Q.color},_e=typeof Z=="function"?Z:function(){return Z},fe=I._levels,me=S(D,I,ae),xe=me.fill,ye=me.line,be=Math.round(G*(Y==="fraction"?R?re.w:re.h:1)),ke=be/(R?re.w:re.h),De=Math.round(O*(z==="fraction"?R?re.h:re.w:1)),He=De/(R?re.h:re.w),Ae=Math.round(R?U*re.w+K:H*re.h+$),Le={center:.5,right:1}[ie]||0,Ze={top:1,middle:.5}[he]||0,We=R?U-Le*ke:H-Ze*ke,ze=R?H-Ze*He:U-Le*He,Ie=Math.round(R?re.h*(1-ze):re.w*ze);I._lenFrac=He,I._thickFrac=ke,I._uFrac=We,I._vFrac=ze;var Ve=I._axis=P(D,I,ae);Ve.position=ke+(R?U+K/re.w:H+$/re.h);var dt=["top","bottom"].indexOf(se)!==-1;if(R&&dt&&(Ve.title.side=se,Ve.titlex=U+K/re.w,Ve.titley=ze+(oe.side==="top"?He-$/re.h:$/re.h)),!R&&!dt&&(Ve.title.side=se,Ve.titley=H+$/re.h,Ve.titlex=ze+K/re.w),Q.color&&I.tickmode==="auto"){Ve.tickmode="linear",Ve.tick0=fe.start;var Ft=fe.size,Qt=i.constrain(De/50,4,15)+1,Ot=(ae[1]-ae[0])/((I.nticks||Qt)*Ft);if(Ot>1){var Ct=Math.pow(10,Math.floor(Math.log(Ot)/Math.LN10));Ft*=Ct*i.roundUp(Ot/Ct,[2,5,10]),(Math.abs(fe.start)/fe.size+1e-6)%1<2e-6&&(Ve.tick0=0)}Ve.dtick=Ft}Ve.domain=R?[ze+$/re.h,ze+He-$/re.h]:[ze+K/re.w,ze+He-K/re.w],Ve.setScale(),F.attr("transform",n(Math.round(re.l),Math.round(re.t)));var jt=F.select("."+p.cbtitleunshift).attr("transform",n(-Math.round(re.l),-Math.round(re.t))),Nt=Ve.ticklabelposition,Lt=Ve.title.font.size,Xe=F.select("."+p.cbaxis),it,Ye=0,Ee=0;function Ge(Mt,Gt){var zt={propContainer:Ve,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:q._dfltTitle.colorbar,containerGroup:F.select("."+p.cbtitle)},Ht=Mt.charAt(0)==="h"?Mt.substr(1):"h"+Mt;F.selectAll("."+Ht+",."+Ht+"-math-group").remove(),b.draw(D,Mt,r(zt,Gt||{}))}function Ke(){if(R&&dt||!R&&!dt){var Mt,Gt;se==="top"&&(Mt=K+re.l+re.w*U,Gt=$+re.t+re.h*(1-ze-He)+3+Lt*.75),se==="bottom"&&(Mt=K+re.l+re.w*U,Gt=$+re.t+re.h*(1-ze)-3-Lt*.25),se==="right"&&(Gt=$+re.t+re.h*H+3+Lt*.75,Mt=K+re.l+re.w*ze),Ge(Ve._id+"title",{attributes:{x:Mt,y:Gt,"text-anchor":R?"start":"middle"}})}}function qe(){if(R&&!dt||!R&&dt){var Mt=Ve.position||0,Gt=Ve._offset+Ve._length/2,zt,Ht;if(se==="right")Ht=Gt,zt=re.l+re.w*Mt+10+Lt*(Ve.showticklabels?1:.5);else if(zt=Gt,se==="bottom"&&(Ht=re.t+re.h*Mt+10+(Nt.indexOf("inside")===-1?Ve.tickfont.size:0)+(Ve.ticks!=="intside"&&I.ticklen||0)),se==="top"){var Zt=oe.text.split("<br>").length;Ht=re.t+re.h*Mt+10-be-c*Lt*Zt}Ge((R?"h":"v")+Ve._id+"title",{avoid:{selection:m.select(D).selectAll("g."+Ve._id+"tick"),side:se,offsetTop:R?0:re.t,offsetLeft:R?re.l:0,maxShift:R?q.width:q.height},attributes:{x:zt,y:Ht,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function At(){if(!R&&!dt||R&&dt){var Mt=F.select("."+p.cbtitle),Gt=Mt.select("text"),zt=[-ee/2,ee/2],Ht=Mt.select(".h"+Ve._id+"title-math-group").node(),Zt=15.6;Gt.node()&&(Zt=parseInt(Gt.node().style.fontSize,10)*c);var Wt;if(Ht?(Wt=s.bBox(Ht),Ee=Wt.width,Ye=Wt.height,Ye>Zt&&(zt[1]-=(Ye-Zt)/2)):Gt.node()&&!Gt.classed(p.jsPlaceholder)&&(Wt=s.bBox(Gt.node()),Ee=Wt.width,Ye=Wt.height),R){if(Ye){if(Ye+=5,se==="top")Ve.domain[1]-=Ye/re.h,zt[1]*=-1;else{Ve.domain[0]+=Ye/re.h;var sr=g.lineCount(Gt);zt[1]+=(1-sr)*Zt}Mt.attr("transform",n(zt[0],zt[1])),Ve.setScale()}}else Ee&&(se==="right"&&(Ve.domain[0]+=(Ee+Lt/2)/re.w),Mt.attr("transform",n(zt[0],zt[1])),Ve.setScale())}F.selectAll("."+p.cbfills+",."+p.cblines).attr("transform",R?n(0,Math.round(re.h*(1-Ve.domain[1]))):n(Math.round(re.w*Ve.domain[0]),0)),Xe.attr("transform",R?n(0,Math.round(-re.t)):n(Math.round(-re.l),0));var Gr=F.select("."+p.cbfills).selectAll("rect."+p.cbfill).attr("style","").data(xe);Gr.enter().append("rect").classed(p.cbfill,!0).style("stroke","none"),Gr.exit().remove();var cn=ae.map(Ve.c2p).map(Math.round).sort(function(hr,Sr){return hr-Sr});Gr.each(function(hr,Sr){var tt=[Sr===0?ae[0]:(xe[Sr]+xe[Sr-1])/2,Sr===xe.length-1?ae[1]:(xe[Sr]+xe[Sr+1])/2].map(Ve.c2p).map(Math.round);R&&(tt[1]=i.constrain(tt[1]+(tt[1]>tt[0])?1:-1,cn[0],cn[1]));var Qe=m.select(this).attr(R?"x":"y",Ae).attr(R?"y":"x",m.min(tt)).attr(R?"width":"height",Math.max(be,2)).attr(R?"height":"width",Math.max(m.max(tt)-m.min(tt),2));if(I._fillgradient)s.gradient(Qe,D,I._id,R?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var lt=_e(hr).replace("e-","");Qe.attr("fill",u(lt).toHexString())}});var qr=F.select("."+p.cblines).selectAll("path."+p.cbline).data(Q.color&&Q.width?ye:[]);qr.enter().append("path").classed(p.cbline,!0),qr.exit().remove(),qr.each(function(hr){var Sr=Ae,tt=Math.round(Ve.c2p(hr))+Q.width/2%1;m.select(this).attr("d","M"+(R?Sr+","+tt:tt+","+Sr)+(R?"h":"v")+be).call(s.lineGroupStyle,Q.width,le(hr),Q.dash)}),Xe.selectAll("g."+Ve._id+"tick,path").remove();var st=Ae+be+(ee||0)/2-(I.ticks==="outside"?1:0),rr=e.calcTicks(Ve),Jt=e.getTickSigns(Ve)[2];return e.drawTicks(D,Ve,{vals:Ve.ticks==="inside"?e.clipEnds(Ve,rr):rr,layer:Xe,path:e.makeTickPath(Ve,st,Jt),transFn:e.makeTransTickFn(Ve)}),e.drawLabels(D,Ve,{vals:rr,layer:Xe,transFn:e.makeTransTickLabelFn(Ve),labelFns:e.makeLabelFns(Ve,st)})}function yt(){var Mt,Gt=be+ee/2;Nt.indexOf("inside")===-1&&(Mt=s.bBox(Xe.node()),Gt+=R?Mt.width:Mt.height),it=jt.select("text");var zt=0,Ht=R&&se==="top",Zt=!R&&se==="right",Wt=0;if(it.node()&&!it.classed(p.jsPlaceholder)){var sr,Gr=jt.select(".h"+Ve._id+"title-math-group").node();Gr&&(R&&dt||!R&&!dt)?(Mt=s.bBox(Gr),zt=Mt.width,sr=Mt.height):(Mt=s.bBox(jt.node()),zt=Mt.right-re.l-(R?Ae:Ie),sr=Mt.bottom-re.t-(R?Ie:Ae),!R&&se==="top"&&(Gt+=Mt.height,Wt=Mt.height)),Zt&&(it.attr("transform",n(zt/2+Lt/2,0)),zt*=2),Gt=Math.max(Gt,R?zt:sr)}var cn=(R?K:$)*2+Gt+j+ee/2,qr=0;!R&&oe.text&&he==="bottom"&&H<=0&&(qr=cn/2,cn+=qr,Wt+=qr),q._hColorbarMoveTitle=qr,q._hColorbarMoveCBTitle=Wt;var st=j+ee;F.select("."+p.cbbg).attr("x",(R?Ae:Ie)-st/2-(R?K:0)).attr("y",(R?Ie:Ae)-(R?De:$+Wt-qr)).attr(R?"width":"height",Math.max(cn-qr,2)).attr(R?"height":"width",Math.max(De+st,2)).call(o.fill,X).call(o.stroke,I.bordercolor).style("stroke-width",j);var rr=Zt?Math.max(zt-10,0):0;if(F.selectAll("."+p.cboutline).attr("x",(R?Ae:Ie+K)+rr).attr("y",(R?Ie+$-De:Ae)+(Ht?Ye:0)).attr(R?"width":"height",Math.max(be,2)).attr(R?"height":"width",Math.max(De-(R?2*$+Ye:2*K+rr),2)).call(o.stroke,I.outlinecolor).style({fill:"none","stroke-width":ee}),F.attr("transform",n(re.l-(R?Le*cn:0),re.t-(R?0:(1-Ze)*cn-Wt))),!R&&(j||u(X).getAlpha()&&!u.equals(q.paper_bgcolor,X))){var Jt=Xe.selectAll("text"),hr=Jt[0].length,Sr=F.select("."+p.cbbg).node(),tt=s.bBox(Sr),Qe=s.getTranslate(F),lt=2;Jt.each(function(ct,pt){var St=0,xt=hr-1;if(pt===St||pt===xt){var Pt=s.bBox(this),Xt=s.getTranslate(this),or;if(pt===xt){var Pr=Pt.right+Xt.x,Ar=tt.right+Qe.x+Ie-j-lt+U;or=Ar-Pr,or>0&&(or=0)}else if(pt===St){var Er=Pt.left+Xt.x,$r=tt.left+Qe.x+Ie+j+lt;or=$r-Er,or<0&&(or=0)}or&&(hr<3?this.setAttribute("transform","translate("+or+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var ft={},Et=M[ie],Vt=w[ie],Pe=M[he],Se=w[he],ot=cn-be;R?(z==="pixels"?(ft.y=H,ft.t=De*Pe,ft.b=De*Se):(ft.t=ft.b=0,ft.yt=H+O*Pe,ft.yb=H-O*Se),Y==="pixels"?(ft.x=U,ft.l=cn*Et,ft.r=cn*Vt):(ft.l=ot*Et,ft.r=ot*Vt,ft.xl=U-G*Et,ft.xr=U+G*Vt)):(z==="pixels"?(ft.x=U,ft.l=De*Et,ft.r=De*Vt):(ft.l=ft.r=0,ft.xl=U+O*Et,ft.xr=U-O*Vt),Y==="pixels"?(ft.y=1-H,ft.t=cn*Pe,ft.b=cn*Se):(ft.t=ot*Pe,ft.b=ot*Se,ft.yt=H-G*Pe,ft.yb=H+G*Se)),A.autoMargin(D,I._id,ft)}return i.syncOrAsync([A.previousPromises,Ke,At,qe,A.previousPromises,yt],D)}function E(F,I,D){var R=I.orientation==="v",O=D._fullLayout,z=O._size,G,Y,ee;a.init({element:F.node(),gd:D,prepFn:function(){G=F.attr("transform"),v(F)},moveFn:function(j,X){F.attr("transform",G+n(j,X)),Y=a.align((R?I._uFrac:I._vFrac)+j/z.w,R?I._thickFrac:I._lenFrac,0,1,I.xanchor),ee=a.align((R?I._vFrac:1-I._uFrac)-X/z.h,R?I._lenFrac:I._thickFrac,0,1,I.yanchor);var ie=a.getCursor(Y,ee,I.xanchor,I.yanchor);v(F,ie)},doneFn:function(){if(v(F),Y!==void 0&&ee!==void 0){var j={};j[I._propPrefix+"x"]=Y,j[I._propPrefix+"y"]=ee,I._traceIndex!==void 0?T.call("_guiRestyle",D,j,I._traceIndex):T.call("_guiRelayout",D,j)}}})}function S(F,I,D){var R=I._levels,O=[],z=[],G,Y,ee=R.end+R.size/100,j=R.size,X=1.001*D[0]-.001*D[1],ie=1.001*D[1]-.001*D[0];for(Y=0;Y<1e5&&(G=R.start+Y*j,!(j>0?G>=ee:G<=ee));Y++)G>X&&G<ie&&O.push(G);if(I._fillgradient)z=[0];else if(typeof I._fillcolor=="function"){var he=I._filllevels;if(he)for(ee=he.end+he.size/100,j=he.size,Y=0;Y<1e5&&(G=he.start+Y*j,!(j>0?G>=ee:G<=ee));Y++)G>D[0]&&G<D[1]&&z.push(G);else z=O.map(function(K){return K-R.size/2}),z.push(z[z.length-1]+R.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(z=[0]);return R.size<0&&(O.reverse(),z.reverse()),{line:O,fill:z}}function P(F,I,D){var R=F._fullLayout,O=I.orientation==="v",z={type:"linear",range:D,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},G=O?"y":"x",Y={type:"linear",_id:G+I._id},ee={letter:G,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function j(X,ie){return i.coerce(z,Y,l,X,ie)}return f(z,Y,j,ee,R),y(z,Y,j,ee),Y}N.exports={draw:_}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(t,N,V){var m=t("../../lib");N.exports=function(A){return m.isPlainObject(A.colorbar)}},{"../../lib":515}],373:[function(t,N,V){N.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(t,N,V){var m=t("../colorbar/attributes"),u=t("../../lib/regex").counter,A=t("../../lib/sort_object_keys"),T=t("./scales.js").scales;A(T),N.exports=function(a,i){a=a||"",i=i||{};var n=i.cLetter||"c";"onlyIfNumerical"in i?i.onlyIfNumerical:Boolean(a);var r="noScale"in i?i.noScale:a==="marker.line",v="showScaleDflt"in i?i.showScaleDflt:n==="z",s=typeof i.colorscaleDflt=="string"?T[i.colorscaleDflt]:null,o=i.editTypeOverride||"",b;"colorAttr"in i?(b=i.colorAttr,i.colorAttr):b={z:"z",c:"color"}[n];var g=n+"auto",d=n+"min",f=n+"max",y=n+"mid",l={};l[d]=l[f]=void 0;var x={};x[g]=!1;var c={};return b==="color"&&(c.color={valType:"color",arrayOk:!0,editType:o||"style"},i.anim&&(c.color.anim=!0)),c[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:l},c[d]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:x},c[f]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:x},c[y]={valType:"number",dflt:null,editType:"calc",impliedEdits:l},c.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},c.autocolorscale={valType:"boolean",dflt:i.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},c.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(c.showscale={valType:"boolean",dflt:v,editType:"calc"},c.colorbar=m),i.noColorAxis||(c.coloraxis={valType:"subplotid",regex:u("coloraxis"),dflt:null,editType:"calc"}),c}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("./helpers").extractOpts;N.exports=function(e,a,i){var n=e._fullLayout,r=i.vals,v=i.containerStr,s=v?u.nestedProperty(a,v).get():a,o=A(s),b=o.auto!==!1,g=o.min,d=o.max,f=o.mid,y=function(){return u.aggNums(Math.min,null,r)},l=function(){return u.aggNums(Math.max,null,r)};if(g===void 0?g=y():b&&(s._colorAx&&m(g)?g=Math.min(g,y()):g=y()),d===void 0?d=l():b&&(s._colorAx&&m(d)?d=Math.max(d,l()):d=l()),b&&f!==void 0&&(d-f>f-g?g=f-(d-f):d-f<f-g&&(d=f+(f-g))),g===d&&(g-=.5,d+=.5),o._sync("min",g),o._sync("max",d),o.autocolorscale){var x;g*d<0?x=n.colorscale.diverging:g>=0?x=n.colorscale.sequential:x=n.colorscale.sequentialminus,o._sync("colorscale",x)}}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(t,N,V){var m=t("../../lib"),u=t("./helpers").hasColorscale,A=t("./helpers").extractOpts;N.exports=function(e,a){function i(g,d){var f=g["_"+d];f!==void 0&&(g[d]=f)}function n(g,d){var f=d.container?m.nestedProperty(g,d.container).get():g;if(f)if(f.coloraxis)f._colorAx=a[f.coloraxis];else{var y=A(f),l=y.auto;(l||y.min===void 0)&&i(f,d.min),(l||y.max===void 0)&&i(f,d.max),y.autocolorscale&&i(f,"colorscale")}}for(var r=0;r<e.length;r++){var v=e[r],s=v._module.colorbar;if(s)if(Array.isArray(s))for(var o=0;o<s.length;o++)n(v,s[o]);else n(v,s);u(v,"marker.line")&&n(v,{container:"marker.line",min:"cmin",max:"cmax"})}for(var b in a._colorAxes)n(a[b],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../colorbar/has_colorbar"),T=t("../colorbar/defaults"),e=t("./scales").isValid,a=t("../../registry").traceIs;function i(n,r){var v=r.slice(0,r.length-1);return r?u.nestedProperty(n,v).get()||{}:n}N.exports=function n(r,v,s,o,b){var g=b.prefix,d=b.cLetter,f="_module"in v,y=i(r,g),l=i(v,g),x=i(v._template||{},g)||{},c=function(){return delete r.coloraxis,delete v.coloraxis,n(r,v,s,o,b)};if(f){var M=s._colorAxes||{},w=o(g+"coloraxis");if(w){var p=a(v,"contour")&&u.nestedProperty(v,"contours.coloring").get()||"heatmap",_=M[w];_?(_[2].push(c),_[0]!==p&&(_[0]=!1,u.warn(["Ignoring coloraxis:",w,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[w]=[p,v,[c]];return}}var h=y[d+"min"],L=y[d+"max"],E=m(h)&&m(L)&&h<L,S=o(g+d+"auto",!E);S?o(g+d+"mid"):(o(g+d+"min"),o(g+d+"max"));var P=y.colorscale,F=x.colorscale,I;if(P!==void 0&&(I=!e(P)),F!==void 0&&(I=!e(F)),o(g+"autocolorscale",I),o(g+"colorscale"),o(g+"reversescale"),g!=="marker.line."){var D;g&&f&&(D=A(y));var R=o(g+"showscale",D);R&&(g&&x&&(l._template=x),T(y,l,s))}}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(t,N,V){var m=t("@plotly/d3"),u=t("tinycolor2"),A=t("fast-isnumeric"),T=t("../../lib"),e=t("../color"),a=t("./scales").isValid;function i(f,y,l){var x=y?T.nestedProperty(f,y).get()||{}:f,c=x[l||"color"],M=!1;if(T.isArrayOrTypedArray(c)){for(var w=0;w<c.length;w++)if(A(c[w])){M=!0;break}}return T.isPlainObject(x)&&(M||x.showscale===!0||A(x.cmin)&&A(x.cmax)||a(x.colorscale)||T.isPlainObject(x.colorbar))}var n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function v(f){var y=f._colorAx,l=y||f,x={},c,M,w;for(M=0;M<n.length;M++)w=n[M],x[w]=l[w];if(y)for(c="c",M=0;M<r.length;M++)w=r[M],x[w]=l["c"+w];else{var p;for(M=0;M<r.length;M++){if(w=r[M],p="c"+w,p in l){x[w]=l[p];continue}p="z"+w,p in l&&(x[w]=l[p])}c=p.charAt(0)}return x._sync=function(_,h){var L=r.indexOf(_)!==-1?c+_:_;l[L]=l["_"+L]=h},x}function s(f){for(var y=v(f),l=y.min,x=y.max,c=y.reversescale?o(y.colorscale):y.colorscale,M=c.length,w=new Array(M),p=new Array(M),_=0;_<M;_++){var h=c[_];w[_]=l+h[0]*(x-l),p[_]=h[1]}return{domain:w,range:p}}function o(f){for(var y=f.length,l=new Array(y),x=y-1,c=0;x>=0;x--,c++){var M=f[x];l[c]=[1-M[0],M[1]]}return l}function b(f,y){y=y||{};for(var l=f.domain,x=f.range,c=x.length,M=new Array(c),w=0;w<c;w++){var p=u(x[w]).toRgb();M[w]=[p.r,p.g,p.b,p.a]}var _=m.scale.linear().domain(l).range(M).clamp(!0),h=y.noNumericCheck,L=y.returnArray,E;return h&&L?E=_:h?E=function(S){return d(_(S))}:L?E=function(S){return A(S)?_(S):u(S).isValid()?S:e.defaultLine}:E=function(S){return A(S)?d(_(S)):u(S).isValid()?S:e.defaultLine},E.domain=_.domain,E.range=function(){return x},E}function g(f,y){return b(s(f),y)}function d(f){var y={r:f[0],g:f[1],b:f[2],a:f[3]};return u(y).toRgbString()}N.exports={hasColorscale:i,extractOpts:v,extractScale:s,flipScale:o,makeColorScaleFunc:b,makeColorScaleFuncFromTrace:g}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(t,N,V){var m=t("./scales"),u=t("./helpers");N.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:m.scales,defaultScale:m.defaultScale,getScale:m.get,isValidScale:m.isValid,hasColorscale:u.hasColorscale,extractOpts:u.extractOpts,extractScale:u.extractScale,flipScale:u.flipScale,makeColorScaleFunc:u.makeColorScaleFunc,makeColorScaleFuncFromTrace:u.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(t,N,V){var m=t("../../lib/extend").extendFlat,u=t("./attributes"),A=t("./scales").scales;N.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:A.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:A.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:A.RdBu,editType:"calc"}},coloraxis:m({_isSubplotObj:!0,editType:"calc"},u("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(t,N,V){var m=t("../../lib"),u=t("../../plot_api/plot_template"),A=t("./layout_attributes"),T=t("./defaults");N.exports=function(a,i){function n(f,y){return m.coerce(a,i,A,f,y)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var r=i._colorAxes,v,s;function o(f,y){return m.coerce(v,s,A.coloraxis,f,y)}for(var b in r){var g=r[b];if(g[0])v=a[b]||{},s=u.newContainer(i,b,"coloraxis"),s._name=b,T(v,s,i,o,{prefix:"",cLetter:"c"});else{for(var d=0;d<g[2].length;d++)g[2][d]();delete i._colorAxes[b]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(t,N,V){var m=t("tinycolor2"),u={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},A=u.RdBu;function T(i,n){if(n||(n=A),!i)return n;function r(){try{i=u[i]||JSON.parse(i)}catch{i=n}}return typeof i=="string"&&(r(),typeof i=="string"&&r()),e(i)?i:n}function e(i){var n=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var r=0;r<i.length;r++){var v=i[r];if(v.length!==2||+v[0]<n||!m(v[1]).isValid())return!1;n=+v[0]}return!0}function a(i){return u[i]!==void 0?!0:e(i)}N.exports={scales:u,defaultScale:A,get:T,isValid:a}},{tinycolor2:313}],383:[function(t,N,V){N.exports=function(u,A,T,e,a){var i=(u-T)/(e-T),n=i+A/(e-T),r=(i+n)/2;return a==="left"||a==="bottom"?i:a==="center"||a==="middle"?r:a==="right"||a==="top"?n:i<2/3-r?i:n>4/3-r?n:r}},{}],384:[function(t,N,V){var m=t("../../lib"),u=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];N.exports=function(T,e,a,i){return a==="left"?T=0:a==="center"?T=1:a==="right"?T=2:T=m.constrain(Math.floor(T*3),0,2),i==="bottom"?e=0:i==="middle"?e=1:i==="top"?e=2:e=m.constrain(Math.floor(e*3),0,2),u[e][T]}},{"../../lib":515}],385:[function(t,N,V){V.selectMode=function(m){return m==="lasso"||m==="select"},V.drawMode=function(m){return m==="drawclosedpath"||m==="drawopenpath"||m==="drawline"||m==="drawrect"||m==="drawcircle"},V.openMode=function(m){return m==="drawline"||m==="drawopenpath"},V.rectMode=function(m){return m==="select"||m==="drawline"||m==="drawrect"||m==="drawcircle"},V.freeMode=function(m){return m==="lasso"||m==="drawclosedpath"||m==="drawopenpath"},V.selectingOrDrawing=function(m){return V.freeMode(m)||V.rectMode(m)}},{}],386:[function(t,N,V){var m=t("mouse-event-offset"),u=t("has-hover"),A=t("has-passive-events"),T=t("../../lib").removeElement,e=t("../../plots/cartesian/constants"),a=N.exports={};a.align=t("./align"),a.getCursor=t("./cursor");var i=t("./unhover");a.unhover=i.wrapped,a.unhoverRaw=i.raw,a.init=function(s){var o=s.gd,b=1,g=o._context.doubleClickDelay,d=s.element,f,y,l,x,c,M,w,p;o._mouseDownTime||(o._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=L,A?(d._ontouchstart&&d.removeEventListener("touchstart",d._ontouchstart),d._ontouchstart=L,d.addEventListener("touchstart",L,{passive:!1})):d.ontouchstart=L;function _(P,F,I){return Math.abs(P)<I&&(P=0),Math.abs(F)<I&&(F=0),[P,F]}var h=s.clampFn||_;function L(P){o._dragged=!1,o._dragging=!0;var F=r(P);f=F[0],y=F[1],w=P.target,M=P,p=P.buttons===2||P.ctrlKey,typeof P.clientX>"u"&&typeof P.clientY>"u"&&(P.clientX=f,P.clientY=y),l=new Date().getTime(),l-o._mouseDownTime<g?b+=1:(b=1,o._mouseDownTime=l),s.prepFn&&s.prepFn(P,f,y),u&&!p?(c=n(),c.style.cursor=window.getComputedStyle(d).cursor):u||(c=document,x=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),s.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",E),document.addEventListener("touchmove",E,{passive:!1}))}function E(P){P.preventDefault();var F=r(P),I=s.minDrag||e.MINDRAG,D=h(F[0]-f,F[1]-y,I),R=D[0],O=D[1];(R||O)&&(o._dragged=!0,a.unhover(o,P)),o._dragged&&s.moveFn&&!p&&(o._dragdata={element:d,dx:R,dy:O},s.moveFn(R,O))}function S(P){if(delete o._dragdata,s.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",E)),document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S),u?T(c):x&&(c.documentElement.style.cursor=x,x=null),!o._dragging){o._dragged=!1;return}if(o._dragging=!1,new Date().getTime()-o._mouseDownTime>g&&(b=Math.max(b-1,1)),o._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(b,M),!p){var F;try{F=new MouseEvent("click",P)}catch{var I=r(P);F=document.createEvent("MouseEvents"),F.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,I[0],I[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}w.dispatchEvent(F)}o._dragging=!1,o._dragged=!1}};function n(){var v=document.createElement("div");v.className="dragcover";var s=v.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(v),v}a.coverSlip=n;function r(v){return m(v.changedTouches?v.changedTouches[0]:v,document.body)}},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(t,N,V){var m=t("../../lib/events"),u=t("../../lib/throttle"),A=t("../../lib/dom").getGraphDiv,T=t("../fx/constants"),e=N.exports={};e.wrapped=function(a,i,n){a=A(a),a._fullLayout&&u.clear(a._fullLayout._uid+T.HOVERID),e.raw(a,i,n)},e.raw=function(i,n){var r=i._fullLayout,v=i._hoverdata;n||(n={}),!(n.target&&!i._dragged&&m.triggerHandler(i,"plotly_beforehover",n)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,n.target&&v&&i.emit("plotly_unhover",{event:n,points:v}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(t,N,V){V.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},V.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=u.numberFormat,T=t("fast-isnumeric"),e=t("tinycolor2"),a=t("../../registry"),i=t("../color"),n=t("../colorscale"),r=u.strTranslate,v=t("../../lib/svg_text_utils"),s=t("../../constants/xmlns_namespaces"),o=t("../../constants/alignment"),b=o.LINE_SPACING,g=t("../../constants/interactions").DESELECTDIM,d=t("../../traces/scatter/subtypes"),f=t("../../traces/scatter/make_bubble_size_func"),y=t("../../components/fx/helpers").appendArrayPointValue,l=N.exports={};l.font=function(ye,be,ke,De){u.isPlainObject(be)&&(De=be.color,ke=be.size,be=be.family),be&&ye.style("font-family",be),ke+1&&ye.style("font-size",ke+"px"),De&&ye.call(i.fill,De)},l.setPosition=function(ye,be,ke){ye.attr("x",be).attr("y",ke)},l.setSize=function(ye,be,ke){ye.attr("width",be).attr("height",ke)},l.setRect=function(ye,be,ke,De,He){ye.call(l.setPosition,be,ke).call(l.setSize,De,He)},l.translatePoint=function(ye,be,ke,De){var He=ke.c2p(ye.x),Ae=De.c2p(ye.y);if(T(He)&&T(Ae)&&be.node())be.node().nodeName==="text"?be.attr("x",He).attr("y",Ae):be.attr("transform",r(He,Ae));else return!1;return!0},l.translatePoints=function(ye,be,ke){ye.each(function(De){var He=m.select(this);l.translatePoint(De,He,be,ke)})},l.hideOutsideRangePoint=function(ye,be,ke,De,He,Ae){be.attr("display",ke.isPtWithinRange(ye,He)&&De.isPtWithinRange(ye,Ae)?null:"none")},l.hideOutsideRangePoints=function(ye,be){if(!!be._hasClipOnAxisFalse){var ke=be.xaxis,De=be.yaxis;ye.each(function(He){var Ae=He[0].trace,Le=Ae.xcalendar,Ze=Ae.ycalendar,We=a.traceIs(Ae,"bar-like")?".bartext":".point,.textpoint";ye.selectAll(We).each(function(ze){l.hideOutsideRangePoint(ze,m.select(this),ke,De,Le,Ze)})})}},l.crispRound=function(ye,be,ke){return!be||!T(be)?ke||0:ye._context.staticPlot?be:be<1?1:Math.round(be)},l.singleLineStyle=function(ye,be,ke,De,He){be.style("fill","none");var Ae=(((ye||[])[0]||{}).trace||{}).line||{},Le=ke||Ae.width||0,Ze=He||Ae.dash||"";i.stroke(be,De||Ae.color),l.dashLine(be,Ze,Le)},l.lineGroupStyle=function(ye,be,ke,De){ye.style("fill","none").each(function(He){var Ae=(((He||[])[0]||{}).trace||{}).line||{},Le=be||Ae.width||0,Ze=De||Ae.dash||"";m.select(this).call(i.stroke,ke||Ae.color).call(l.dashLine,Ze,Le)})},l.dashLine=function(ye,be,ke){ke=+ke||0,be=l.dashStyle(be,ke),ye.style({"stroke-dasharray":be,"stroke-width":ke+"px"})},l.dashStyle=function(ye,be){be=+be||1;var ke=Math.max(be,3);return ye==="solid"?ye="":ye==="dot"?ye=ke+"px,"+ke+"px":ye==="dash"?ye=3*ke+"px,"+3*ke+"px":ye==="longdash"?ye=5*ke+"px,"+5*ke+"px":ye==="dashdot"?ye=3*ke+"px,"+ke+"px,"+ke+"px,"+ke+"px":ye==="longdashdot"&&(ye=5*ke+"px,"+2*ke+"px,"+ke+"px,"+2*ke+"px"),ye};function x(ye,be,ke){var De=be.fillpattern,He=De&&l.getPatternAttr(De.shape,0,"");if(He){var Ae=l.getPatternAttr(De.bgcolor,0,null),Le=l.getPatternAttr(De.fgcolor,0,null),Ze=De.fgopacity,We=l.getPatternAttr(De.size,0,8),ze=l.getPatternAttr(De.solidity,0,.3),Ie=be.uid;l.pattern(ye,"point",ke,Ie,He,We,ze,void 0,De.fillmode,Ae,Le,Ze)}else be.fillcolor&&ye.call(i.fill,be.fillcolor)}l.singleFillStyle=function(ye,be){var ke=m.select(ye.node()),De=ke.data(),He=((De[0]||[])[0]||{}).trace||{};x(ye,He,be)},l.fillGroupStyle=function(ye,be){ye.style("stroke-width",0).each(function(ke){var De=m.select(this);ke[0].trace&&x(De,ke[0].trace,be)})};var c=t("./symbol_defs");l.symbolNames=[],l.symbolFuncs=[],l.symbolBackOffs=[],l.symbolNeedLines={},l.symbolNoDot={},l.symbolNoFill={},l.symbolList=[],Object.keys(c).forEach(function(ye){var be=c[ye],ke=be.n;l.symbolList.push(ke,String(ke),ye,ke+100,String(ke+100),ye+"-open"),l.symbolNames[ke]=ye,l.symbolFuncs[ke]=be.f,l.symbolBackOffs[ke]=be.backoff||0,be.needLine&&(l.symbolNeedLines[ke]=!0),be.noDot?l.symbolNoDot[ke]=!0:l.symbolList.push(ke+200,String(ke+200),ye+"-dot",ke+300,String(ke+300),ye+"-open-dot"),be.noFill&&(l.symbolNoFill[ke]=!0)});var M=l.symbolNames.length,w="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";l.symbolNumber=function(ye){if(T(ye))ye=+ye;else if(typeof ye=="string"){var be=0;ye.indexOf("-open")>0&&(be=100,ye=ye.replace("-open","")),ye.indexOf("-dot")>0&&(be+=200,ye=ye.replace("-dot","")),ye=l.symbolNames.indexOf(ye),ye>=0&&(ye+=be)}return ye%100>=M||ye>=400?0:Math.floor(Math.max(ye,0))};function p(ye,be,ke,De){var He=ye%100;return l.symbolFuncs[He](be,ke,De)+(ye>=200?w:"")}var _={x1:1,x2:0,y1:0,y2:0},h={x1:0,x2:0,y1:1,y2:0},L=A("~f"),E={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:_},horizontalreversed:{node:"linearGradient",attrs:_,reversed:!0},vertical:{node:"linearGradient",attrs:h},verticalreversed:{node:"linearGradient",attrs:h,reversed:!0}};l.gradient=function(ye,be,ke,De,He,Ae){for(var Le=He.length,Ze=E[De],We=new Array(Le),ze=0;ze<Le;ze++)Ze.reversed?We[Le-1-ze]=[L((1-He[ze][0])*100),He[ze][1]]:We[ze]=[L(He[ze][0]*100),He[ze][1]];var Ie=be._fullLayout,Ve="g"+Ie._uid+"-"+ke,dt=Ie._defs.select(".gradients").selectAll("#"+Ve).data([De+We.join(";")],u.identity);dt.exit().remove(),dt.enter().append(Ze.node).each(function(){var Ft=m.select(this);Ze.attrs&&Ft.attr(Ze.attrs),Ft.attr("id",Ve);var Qt=Ft.selectAll("stop").data(We);Qt.exit().remove(),Qt.enter().append("stop"),Qt.each(function(Ot){var Ct=e(Ot[1]);m.select(this).attr({offset:Ot[0]+"%","stop-color":i.tinyRGB(Ct),"stop-opacity":Ct.getAlpha()})})}),ye.style(Ae,$(Ve,be)).style(Ae+"-opacity",null),ye.classed("gradient_filled",!0)},l.pattern=function(ye,be,ke,De,He,Ae,Le,Ze,We,ze,Ie,Ve){var dt=be==="legend";Ze&&(We==="overlay"?(ze=Ze,Ie=i.contrast(ze)):(ze=void 0,Ie=Ze));var Ft=ke._fullLayout,Qt="p"+Ft._uid+"-"+De,Ot,Ct,jt=function(Mt,Gt,zt,Ht,Zt){return Ht+(Zt-Ht)*(Mt-Gt)/(zt-Gt)},Nt,Lt,Xe,it,Ye={},Ee=e(Ie),Ge=i.tinyRGB(Ee),Ke=Ee.getAlpha(),qe=Ve*Ke;switch(He){case"/":Ot=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Nt="M-"+Ot/4+","+Ct/4+"l"+Ot/2+",-"+Ct/2+"M0,"+Ct+"L"+Ot+",0M"+Ot/4*3+","+Ct/4*5+"l"+Ot/2+",-"+Ct/2,Lt=Le*Ae,it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"\\":Ot=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Nt="M"+Ot/4*3+",-"+Ct/4+"l"+Ot/2+","+Ct/2+"M0,0L"+Ot+","+Ct+"M-"+Ot/4+","+Ct/4*3+"l"+Ot/2+","+Ct/2,Lt=Le*Ae,it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"x":Ot=Ae*Math.sqrt(2),Ct=Ae*Math.sqrt(2),Nt="M-"+Ot/4+","+Ct/4+"l"+Ot/2+",-"+Ct/2+"M0,"+Ct+"L"+Ot+",0M"+Ot/4*3+","+Ct/4*5+"l"+Ot/2+",-"+Ct/2+"M"+Ot/4*3+",-"+Ct/4+"l"+Ot/2+","+Ct/2+"M0,0L"+Ot+","+Ct+"M-"+Ot/4+","+Ct/4*3+"l"+Ot/2+","+Ct/2,Lt=Ae-Ae*Math.sqrt(1-Le),it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"|":Ot=Ae,Ct=Ae,it="path",Nt="M"+Ot/2+",0L"+Ot/2+","+Ct,Lt=Le*Ae,it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"-":Ot=Ae,Ct=Ae,it="path",Nt="M0,"+Ct/2+"L"+Ot+","+Ct/2,Lt=Le*Ae,it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case"+":Ot=Ae,Ct=Ae,it="path",Nt="M"+Ot/2+",0L"+Ot/2+","+Ct+"M0,"+Ct/2+"L"+Ot+","+Ct/2,Lt=Ae-Ae*Math.sqrt(1-Le),it="path",Ye={d:Nt,opacity:qe,stroke:Ge,"stroke-width":Lt+"px"};break;case".":Ot=Ae,Ct=Ae,Le<Math.PI/4?Xe=Math.sqrt(Le*Ae*Ae/Math.PI):Xe=jt(Le,Math.PI/4,1,Ae/2,Ae/Math.sqrt(2)),it="circle",Ye={cx:Ot/2,cy:Ct/2,r:Xe,opacity:qe,fill:Ge};break}var At=[He||"noSh",ze||"noBg",Ie||"noFg",Ae,Le].join(";"),yt=Ft._defs.select(".patterns").selectAll("#"+Qt).data([At],u.identity);yt.exit().remove(),yt.enter().append("pattern").each(function(){var Mt=m.select(this);if(Mt.attr({id:Qt,width:Ot+"px",height:Ct+"px",patternUnits:"userSpaceOnUse",patternTransform:dt?"scale(0.8)":""}),ze){var Gt=e(ze),zt=i.tinyRGB(Gt),Ht=Gt.getAlpha(),Zt=Mt.selectAll("rect").data([0]);Zt.exit().remove(),Zt.enter().append("rect").attr({width:Ot+"px",height:Ct+"px",fill:zt,"fill-opacity":Ht})}var Wt=Mt.selectAll(it).data([0]);Wt.exit().remove(),Wt.enter().append(it).attr(Ye)}),ye.style("fill",$(Qt,ke)).style("fill-opacity",null),ye.classed("pattern_filled",!0)},l.initGradients=function(ye){var be=ye._fullLayout,ke=u.ensureSingle(be._defs,"g","gradients");ke.selectAll("linearGradient,radialGradient").remove(),m.select(ye).selectAll(".gradient_filled").classed("gradient_filled",!1)},l.initPatterns=function(ye){var be=ye._fullLayout,ke=u.ensureSingle(be._defs,"g","patterns");ke.selectAll("pattern").remove(),m.select(ye).selectAll(".pattern_filled").classed("pattern_filled",!1)},l.getPatternAttr=function(ye,be,ke){return ye&&u.isArrayOrTypedArray(ye)?be<ye.length?ye[be]:ke:ye},l.pointStyle=function(ye,be,ke){if(!!ye.size()){var De=l.makePointStyleFns(be);ye.each(function(He){l.singlePointStyle(He,m.select(this),be,De,ke)})}},l.singlePointStyle=function(ye,be,ke,De,He){var Ae=ke.marker,Le=Ae.line;if(be.style("opacity",De.selectedOpacityFn?De.selectedOpacityFn(ye):ye.mo===void 0?Ae.opacity:ye.mo),De.ms2mrc){var Ze;ye.ms==="various"||Ae.size==="various"?Ze=3:Ze=De.ms2mrc(ye.ms),ye.mrc=Ze,De.selectedSizeFn&&(Ze=ye.mrc=De.selectedSizeFn(ye));var We=l.symbolNumber(ye.mx||Ae.symbol)||0;ye.om=We%200>=100;var ze=xe(ye,ke),Ie=q(ye,ke);be.attr("d",p(We,Ze,ze,Ie))}var Ve=!1,dt,Ft,Qt;if(ye.so)Qt=Le.outlierwidth,Ft=Le.outliercolor,dt=Ae.outliercolor;else{var Ot=(Le||{}).width;Qt=(ye.mlw+1||Ot+1||(ye.trace?(ye.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in ye?Ft=ye.mlcc=De.lineScale(ye.mlc):u.isArrayOrTypedArray(Le.color)?Ft=i.defaultLine:Ft=Le.color,u.isArrayOrTypedArray(Ae.color)&&(dt=i.defaultLine,Ve=!0),"mc"in ye?dt=ye.mcc=De.markerScale(ye.mc):dt=Ae.color||"rgba(0,0,0,0)",De.selectedColorFn&&(dt=De.selectedColorFn(ye))}if(ye.om)be.call(i.stroke,dt).style({"stroke-width":(Qt||1)+"px",fill:"none"});else{be.style("stroke-width",(ye.isBlank?0:Qt)+"px");var Ct=Ae.gradient,jt=ye.mgt;jt?Ve=!0:jt=Ct&&Ct.type,u.isArrayOrTypedArray(jt)&&(jt=jt[0],E[jt]||(jt=0));var Nt=Ae.pattern,Lt=Nt&&l.getPatternAttr(Nt.shape,ye.i,"");if(jt&&jt!=="none"){var Xe=ye.mgc;Xe?Ve=!0:Xe=Ct.color;var it=ke.uid;Ve&&(it+="-"+ye.i),l.gradient(be,He,it,jt,[[0,Xe],[1,dt]],"fill")}else if(Lt){var Ye=l.getPatternAttr(Nt.bgcolor,ye.i,null),Ee=l.getPatternAttr(Nt.fgcolor,ye.i,null),Ge=Nt.fgopacity,Ke=l.getPatternAttr(Nt.size,ye.i,8),qe=l.getPatternAttr(Nt.solidity,ye.i,.3),At=ye.mcc||u.isArrayOrTypedArray(Nt.shape)||u.isArrayOrTypedArray(Nt.bgcolor)||u.isArrayOrTypedArray(Nt.size)||u.isArrayOrTypedArray(Nt.solidity),yt=ke.uid;At&&(yt+="-"+ye.i),l.pattern(be,"point",He,yt,Lt,Ke,qe,ye.mcc,Nt.fillmode,Ye,Ee,Ge)}else i.fill(be,dt);Qt&&i.stroke(be,Ft)}},l.makePointStyleFns=function(ye){var be={},ke=ye.marker;return be.markerScale=l.tryColorscale(ke,""),be.lineScale=l.tryColorscale(ke,"line"),a.traceIs(ye,"symbols")&&(be.ms2mrc=d.isBubble(ye)?f(ye):function(){return(ke.size||6)/2}),ye.selectedpoints&&u.extendFlat(be,l.makeSelectedPointStyleFns(ye)),be},l.makeSelectedPointStyleFns=function(ye){var be={},ke=ye.selected||{},De=ye.unselected||{},He=ye.marker||{},Ae=ke.marker||{},Le=De.marker||{},Ze=He.opacity,We=Ae.opacity,ze=Le.opacity,Ie=We!==void 0,Ve=ze!==void 0;(u.isArrayOrTypedArray(Ze)||Ie||Ve)&&(be.selectedOpacityFn=function(Xe){var it=Xe.mo===void 0?He.opacity:Xe.mo;return Xe.selected?Ie?We:it:Ve?ze:g*it});var dt=He.color,Ft=Ae.color,Qt=Le.color;(Ft||Qt)&&(be.selectedColorFn=function(Xe){var it=Xe.mcc||dt;return Xe.selected?Ft||it:Qt||it});var Ot=He.size,Ct=Ae.size,jt=Le.size,Nt=Ct!==void 0,Lt=jt!==void 0;return a.traceIs(ye,"symbols")&&(Nt||Lt)&&(be.selectedSizeFn=function(Xe){var it=Xe.mrc||Ot/2;return Xe.selected?Nt?Ct/2:it:Lt?jt/2:it}),be},l.makeSelectedTextStyleFns=function(ye){var be={},ke=ye.selected||{},De=ye.unselected||{},He=ye.textfont||{},Ae=ke.textfont||{},Le=De.textfont||{},Ze=He.color,We=Ae.color,ze=Le.color;return be.selectedTextColorFn=function(Ie){var Ve=Ie.tc||Ze;return Ie.selected?We||Ve:ze||(We?Ve:i.addOpacity(Ve,g))},be},l.selectedPointStyle=function(ye,be){if(!(!ye.size()||!be.selectedpoints)){var ke=l.makeSelectedPointStyleFns(be),De=be.marker||{},He=[];ke.selectedOpacityFn&&He.push(function(Ae,Le){Ae.style("opacity",ke.selectedOpacityFn(Le))}),ke.selectedColorFn&&He.push(function(Ae,Le){i.fill(Ae,ke.selectedColorFn(Le))}),ke.selectedSizeFn&&He.push(function(Ae,Le){var Ze=Le.mx||De.symbol||0,We=ke.selectedSizeFn(Le);Ae.attr("d",p(l.symbolNumber(Ze),We,xe(Le,be),q(Le,be))),Le.mrc2=We}),He.length&&ye.each(function(Ae){for(var Le=m.select(this),Ze=0;Ze<He.length;Ze++)He[Ze](Le,Ae)})}},l.tryColorscale=function(ye,be){var ke=be?u.nestedProperty(ye,be).get():ye;if(ke){var De=ke.color;if((ke.colorscale||ke._colorAx)&&u.isArrayOrTypedArray(De))return n.makeColorScaleFuncFromTrace(ke)}return u.identity};var S={start:1,end:-1,middle:0,bottom:1,top:-1};function P(ye,be,ke,De,He){var Ae=m.select(ye.node().parentNode),Le=be.indexOf("top")!==-1?"top":be.indexOf("bottom")!==-1?"bottom":"middle",Ze=be.indexOf("left")!==-1?"end":be.indexOf("right")!==-1?"start":"middle",We=De?De/.8+1:0,ze=(v.lineCount(ye)-1)*b+1,Ie=S[Ze]*We,Ve=ke*.75+S[Le]*We+(S[Le]-1)*ze*ke/2;ye.attr("text-anchor",Ze),He||Ae.attr("transform",r(Ie,Ve))}function F(ye,be){var ke=ye.ts||be.textfont.size;return T(ke)&&ke>0?ke:0}l.textPointStyle=function(ye,be,ke){if(!!ye.size()){var De;if(be.selectedpoints){var He=l.makeSelectedTextStyleFns(be);De=He.selectedTextColorFn}var Ae=be.texttemplate,Le=ke._fullLayout;ye.each(function(Ze){var We=m.select(this),ze=Ae?u.extractOption(Ze,be,"txt","texttemplate"):u.extractOption(Ze,be,"tx","text");if(!ze&&ze!==0){We.remove();return}if(Ae){var Ie=be._module.formatLabels,Ve=Ie?Ie(Ze,be,Le):{},dt={};y(dt,be,Ze.i);var Ft=be._meta||{};ze=u.texttemplateString(ze,Ve,Le._d3locale,dt,Ze,Ft)}var Qt=Ze.tp||be.textposition,Ot=F(Ze,be),Ct=De?De(Ze):Ze.tc||be.textfont.color;We.call(l.font,Ze.tf||be.textfont.family,Ot,Ct).text(ze).call(v.convertToTspans,ke).call(P,Qt,Ot,Ze.mrc)})}},l.selectedTextStyle=function(ye,be){if(!(!ye.size()||!be.selectedpoints)){var ke=l.makeSelectedTextStyleFns(be);ye.each(function(De){var He=m.select(this),Ae=ke.selectedTextColorFn(De),Le=De.tp||be.textposition,Ze=F(De,be);i.fill(He,Ae);var We=a.traceIs(be,"bar-like");P(He,Le,Ze,De.mrc2||De.mrc,We)})}};var I=.5;l.smoothopen=function(ye,be){if(ye.length<3)return"M"+ye.join("L");var ke="M"+ye[0],De=[],He;for(He=1;He<ye.length-1;He++)De.push(Y(ye[He-1],ye[He],ye[He+1],be));for(ke+="Q"+De[0][0]+" "+ye[1],He=2;He<ye.length-1;He++)ke+="C"+De[He-2][1]+" "+De[He-1][0]+" "+ye[He];return ke+="Q"+De[ye.length-3][1]+" "+ye[ye.length-1],ke},l.smoothclosed=function(ye,be){if(ye.length<3)return"M"+ye.join("L")+"Z";var ke="M"+ye[0],De=ye.length-1,He=[Y(ye[De],ye[0],ye[1],be)],Ae;for(Ae=1;Ae<De;Ae++)He.push(Y(ye[Ae-1],ye[Ae],ye[Ae+1],be));for(He.push(Y(ye[De-1],ye[De],ye[0],be)),Ae=1;Ae<=De;Ae++)ke+="C"+He[Ae-1][1]+" "+He[Ae][0]+" "+ye[Ae];return ke+="C"+He[De][1]+" "+He[0][0]+" "+ye[0]+"Z",ke};var D,R;function O(ye,be,ke){return ke&&(ye=X(ye)),be?G(ye[1]):z(ye[0])}function z(ye){var be=m.round(ye,2);return D=be,be}function G(ye){var be=m.round(ye,2);return R=be,be}function Y(ye,be,ke,De){var He=ye[0]-be[0],Ae=ye[1]-be[1],Le=ke[0]-be[0],Ze=ke[1]-be[1],We=Math.pow(He*He+Ae*Ae,I/2),ze=Math.pow(Le*Le+Ze*Ze,I/2),Ie=(ze*ze*He-We*We*Le)*De,Ve=(ze*ze*Ae-We*We*Ze)*De,dt=3*ze*(We+ze),Ft=3*We*(We+ze);return[[z(be[0]+(dt&&Ie/dt)),G(be[1]+(dt&&Ve/dt))],[z(be[0]-(Ft&&Ie/Ft)),G(be[1]-(Ft&&Ve/Ft))]]}var ee={hv:function(ye,be,ke){return"H"+z(be[0])+"V"+O(be,1,ke)},vh:function(ye,be,ke){return"V"+G(be[1])+"H"+O(be,0,ke)},hvh:function(ye,be,ke){return"H"+z((ye[0]+be[0])/2)+"V"+G(be[1])+"H"+O(be,0,ke)},vhv:function(ye,be,ke){return"V"+G((ye[1]+be[1])/2)+"H"+z(be[0])+"V"+O(be,1,ke)}},j=function(ye,be,ke){return"L"+O(be,0,ke)+","+O(be,1,ke)};l.steps=function(ye){var be=ee[ye]||j;return function(ke){for(var De="M"+z(ke[0][0])+","+G(ke[0][1]),He=ke.length,Ae=1;Ae<He;Ae++)De+=be(ke[Ae-1],ke[Ae],Ae===He-1);return De}};function X(ye,be){var ke=ye.backoff,De=ye.trace,He=ye.d,Ae=ye.i;if(ke&&De&&De.marker&&De.marker.angle%360===0&&De.line&&De.line.shape!=="spline"){var Le=u.isArrayOrTypedArray(ke),Ze=ye,We=be?be[0]:D||0,ze=be?be[1]:R||0,Ie=Ze[0],Ve=Ze[1],dt=Ie-We,Ft=Ve-ze,Qt=Math.atan2(Ft,dt),Ot=Le?ke[Ae]:ke;if(Ot==="auto"){var Ct=Ze.i;De.type==="scatter"&&Ct--;var jt=Ze.marker;Ot=jt?l.symbolBackOffs[l.symbolNumber(jt.symbol)]*jt.size:0,Ot+=l.getMarkerStandoff(He[Ct],De)||0}var Nt=Ie-Ot*Math.cos(Qt),Lt=Ve-Ot*Math.sin(Qt);(Nt<=Ie&&Nt>=We||Nt>=Ie&&Nt<=We)&&(Lt<=Ve&&Lt>=ze||Lt>=Ve&&Lt<=ze)&&(ye=[Nt,Lt])}return ye}l.applyBackoff=X,l.makeTester=function(){var ye=u.ensureSingleById(m.select("body"),"svg","js-plotly-tester",function(ke){ke.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),be=u.ensureSingle(ye,"path","js-reference-point",function(ke){ke.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});l.tester=ye,l.testref=be},l.savedBBoxes={};var ie=0,he=1e4;l.bBox=function(ye,be,ke){ke||(ke=K(ye));var De;if(ke){if(De=l.savedBBoxes[ke],De)return u.extendFlat({},De)}else if(ye.childNodes.length===1){var He=ye.childNodes[0];if(ke=K(He),ke){var Ae=+He.getAttribute("x")||0,Le=+He.getAttribute("y")||0,Ze=He.getAttribute("transform");if(!Ze){var We=l.bBox(He,!1,ke);return Ae&&(We.left+=Ae,We.right+=Ae),Le&&(We.top+=Le,We.bottom+=Le),We}if(ke+="~"+Ae+"~"+Le+"~"+Ze,De=l.savedBBoxes[ke],De)return u.extendFlat({},De)}}var ze,Ie;be?ze=ye:(Ie=l.tester.node(),ze=ye.cloneNode(!0),Ie.appendChild(ze)),m.select(ze).attr("transform",null).call(v.positionText,0,0);var Ve=ze.getBoundingClientRect(),dt=l.testref.node().getBoundingClientRect();be||Ie.removeChild(ze);var Ft={height:Ve.height,width:Ve.width,left:Ve.left-dt.left,top:Ve.top-dt.top,right:Ve.right-dt.left,bottom:Ve.bottom-dt.top};return ie>=he&&(l.savedBBoxes={},ie=0),ke&&(l.savedBBoxes[ke]=Ft),ie++,u.extendFlat({},Ft)};function K(ye){var be=ye.getAttribute("data-unformatted");if(be!==null)return be+ye.getAttribute("data-math")+ye.getAttribute("text-anchor")+ye.getAttribute("style")}l.setClipUrl=function(ye,be,ke){ye.attr("clip-path",$(be,ke))};function $(ye,be){if(!ye)return null;var ke=be._context,De=ke._exportedPlot?"":ke._baseUrl||"";return De?"url('"+De+"#"+ye+"')":"url(#"+ye+")"}l.getTranslate=function(ye){var be=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,ke=ye.attr?"attr":"getAttribute",De=ye[ke]("transform")||"",He=De.replace(be,function(Ae,Le,Ze){return[Le,Ze].join(" ")}).split(" ");return{x:+He[0]||0,y:+He[1]||0}},l.setTranslate=function(ye,be,ke){var De=/(\btranslate\(.*?\);?)/,He=ye.attr?"attr":"getAttribute",Ae=ye.attr?"attr":"setAttribute",Le=ye[He]("transform")||"";return be=be||0,ke=ke||0,Le=Le.replace(De,"").trim(),Le+=r(be,ke),Le=Le.trim(),ye[Ae]("transform",Le),Le},l.getScale=function(ye){var be=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,ke=ye.attr?"attr":"getAttribute",De=ye[ke]("transform")||"",He=De.replace(be,function(Ae,Le,Ze){return[Le,Ze].join(" ")}).split(" ");return{x:+He[0]||1,y:+He[1]||1}},l.setScale=function(ye,be,ke){var De=/(\bscale\(.*?\);?)/,He=ye.attr?"attr":"getAttribute",Ae=ye.attr?"attr":"setAttribute",Le=ye[He]("transform")||"";return be=be||1,ke=ke||1,Le=Le.replace(De,"").trim(),Le+="scale("+be+","+ke+")",Le=Le.trim(),ye[Ae]("transform",Le),Le};var U=/\s*sc.*/;l.setPointGroupScale=function(ye,be,ke){if(be=be||1,ke=ke||1,!!ye){var De=be===1&&ke===1?"":"scale("+be+","+ke+")";ye.each(function(){var He=(this.getAttribute("transform")||"").replace(U,"");He+=De,He=He.trim(),this.setAttribute("transform",He)})}};var H=/translate\([^)]*\)\s*$/;l.setTextPointsScale=function(ye,be,ke){!ye||ye.each(function(){var De,He=m.select(this),Ae=He.select("text");if(!!Ae.node()){var Le=parseFloat(Ae.attr("x")||0),Ze=parseFloat(Ae.attr("y")||0),We=(He.attr("transform")||"").match(H);be===1&&ke===1?De=[]:De=[r(Le,Ze),"scale("+be+","+ke+")",r(-Le,-Ze)],We&&De.push(We),He.attr("transform",De.join(""))}})};function q(ye,be){var ke;return ye&&(ke=ye.mf),ke===void 0&&(ke=be.marker&&be.marker.standoff||0),!be._geo&&!be._xA?-ke:ke}l.getMarkerStandoff=q;var re=Math.atan2,Z=Math.cos,Q=Math.sin;function oe(ye,be){var ke=be[0],De=be[1];return[ke*Z(ye)-De*Q(ye),ke*Q(ye)+De*Z(ye)]}var se,ae,le,_e,fe,me;function xe(ye,be){var ke=ye.ma;ke===void 0&&(ke=be.marker.angle||0);var De,He,Ae=be.marker.angleref;if(Ae==="previous"||Ae==="north"){if(be._geo){var Le=be._geo.project(ye.lonlat);De=Le[0],He=Le[1]}else{var Ze=be._xA,We=be._yA;if(Ze&&We)De=Ze.c2p(ye.x),He=We.c2p(ye.y);else return 90}if(be._geo){var ze=ye.lonlat[0],Ie=ye.lonlat[1],Ve=be._geo.project([ze,Ie+1e-5]),dt=be._geo.project([ze+1e-5,Ie]),Ft=re(dt[1]-He,dt[0]-De),Qt=re(Ve[1]-He,Ve[0]-De),Ot;if(Ae==="north")Ot=ke/180*Math.PI;else if(Ae==="previous"){var Ct=ze/180*Math.PI,jt=Ie/180*Math.PI,Nt=se/180*Math.PI,Lt=ae/180*Math.PI,Xe=Nt-Ct,it=Z(Lt)*Q(Xe),Ye=Q(Lt)*Z(jt)-Z(Lt)*Q(jt)*Z(Xe);Ot=-re(it,Ye)-Math.PI,se=ze,ae=Ie}var Ee=oe(Ft,[Z(Ot),0]),Ge=oe(Qt,[Q(Ot),0]);ke=re(Ee[1]+Ge[1],Ee[0]+Ge[0])/Math.PI*180,Ae==="previous"&&!(me===be.uid&&ye.i===fe+1)&&(ke=null)}if(Ae==="previous"&&!be._geo)if(me===be.uid&&ye.i===fe+1&&T(De)&&T(He)){var Ke=De-le,qe=He-_e,At=be.line&&be.line.shape||"",yt=At.slice(At.length-1);yt==="h"&&(qe=0),yt==="v"&&(Ke=0),ke+=re(qe,Ke)/Math.PI*180+90}else ke=null}return le=De,_e=He,fe=ye.i,me=be.uid,ke}l.getMarkerAngle=xe},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(t,N,V){var m=t("parse-svg-path"),u=t("@plotly/d3").round,A="M0,0Z",T=Math.sqrt(2),e=Math.sqrt(3),a=Math.PI,i=Math.cos,n=Math.sin;N.exports={circle:{n:0,f:function(d,f,y){if(r(f))return A;var l=u(d,2),x="M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z";return y?g(f,y,x):x}},square:{n:1,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")}},diamond:{n:2,f:function(d,f,y){if(r(f))return A;var l=u(d*1.3,2);return g(f,y,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"Z")}},cross:{n:3,f:function(d,f,y){if(r(f))return A;var l=u(d*.4,2),x=u(d*1.2,2);return g(f,y,"M"+x+","+l+"H"+l+"V"+x+"H-"+l+"V"+l+"H-"+x+"V-"+l+"H-"+l+"V-"+x+"H"+l+"V-"+l+"H"+x+"Z")}},x:{n:4,f:function(d,f,y){if(r(f))return A;var l=u(d*.8/T,2),x="l"+l+","+l,c="l"+l+",-"+l,M="l-"+l+",-"+l,w="l-"+l+","+l;return g(f,y,"M0,"+l+x+c+M+c+M+w+M+w+x+w+x+"Z")}},"triangle-up":{n:5,f:function(d,f,y){if(r(f))return A;var l=u(d*2/e,2),x=u(d/2,2),c=u(d,2);return g(f,y,"M-"+l+","+x+"H"+l+"L0,-"+c+"Z")}},"triangle-down":{n:6,f:function(d,f,y){if(r(f))return A;var l=u(d*2/e,2),x=u(d/2,2),c=u(d,2);return g(f,y,"M-"+l+",-"+x+"H"+l+"L0,"+c+"Z")}},"triangle-left":{n:7,f:function(d,f,y){if(r(f))return A;var l=u(d*2/e,2),x=u(d/2,2),c=u(d,2);return g(f,y,"M"+x+",-"+l+"V"+l+"L-"+c+",0Z")}},"triangle-right":{n:8,f:function(d,f,y){if(r(f))return A;var l=u(d*2/e,2),x=u(d/2,2),c=u(d,2);return g(f,y,"M-"+x+",-"+l+"V"+l+"L"+c+",0Z")}},"triangle-ne":{n:9,f:function(d,f,y){if(r(f))return A;var l=u(d*.6,2),x=u(d*1.2,2);return g(f,y,"M-"+x+",-"+l+"H"+l+"V"+x+"Z")}},"triangle-se":{n:10,f:function(d,f,y){if(r(f))return A;var l=u(d*.6,2),x=u(d*1.2,2);return g(f,y,"M"+l+",-"+x+"V"+l+"H-"+x+"Z")}},"triangle-sw":{n:11,f:function(d,f,y){if(r(f))return A;var l=u(d*.6,2),x=u(d*1.2,2);return g(f,y,"M"+x+","+l+"H-"+l+"V-"+x+"Z")}},"triangle-nw":{n:12,f:function(d,f,y){if(r(f))return A;var l=u(d*.6,2),x=u(d*1.2,2);return g(f,y,"M-"+l+","+x+"V-"+l+"H"+x+"Z")}},pentagon:{n:13,f:function(d,f,y){if(r(f))return A;var l=u(d*.951,2),x=u(d*.588,2),c=u(-d,2),M=u(d*-.309,2),w=u(d*.809,2);return g(f,y,"M"+l+","+M+"L"+x+","+w+"H-"+x+"L-"+l+","+M+"L0,"+c+"Z")}},hexagon:{n:14,f:function(d,f,y){if(r(f))return A;var l=u(d,2),x=u(d/2,2),c=u(d*e/2,2);return g(f,y,"M"+c+",-"+x+"V"+x+"L0,"+l+"L-"+c+","+x+"V-"+x+"L0,-"+l+"Z")}},hexagon2:{n:15,f:function(d,f,y){if(r(f))return A;var l=u(d,2),x=u(d/2,2),c=u(d*e/2,2);return g(f,y,"M-"+x+","+c+"H"+x+"L"+l+",0L"+x+",-"+c+"H-"+x+"L-"+l+",0Z")}},octagon:{n:16,f:function(d,f,y){if(r(f))return A;var l=u(d*.924,2),x=u(d*.383,2);return g(f,y,"M-"+x+",-"+l+"H"+x+"L"+l+",-"+x+"V"+x+"L"+x+","+l+"H-"+x+"L-"+l+","+x+"V-"+x+"Z")}},star:{n:17,f:function(d,f,y){if(r(f))return A;var l=d*1.4,x=u(l*.225,2),c=u(l*.951,2),M=u(l*.363,2),w=u(l*.588,2),p=u(-l,2),_=u(l*-.309,2),h=u(l*.118,2),L=u(l*.809,2),E=u(l*.382,2);return g(f,y,"M"+x+","+_+"H"+c+"L"+M+","+h+"L"+w+","+L+"L0,"+E+"L-"+w+","+L+"L-"+M+","+h+"L-"+c+","+_+"H-"+x+"L0,"+p+"Z")}},hexagram:{n:18,f:function(d,f,y){if(r(f))return A;var l=u(d*.66,2),x=u(d*.38,2),c=u(d*.76,2);return g(f,y,"M-"+c+",0l-"+x+",-"+l+"h"+c+"l"+x+",-"+l+"l"+x+","+l+"h"+c+"l-"+x+","+l+"l"+x+","+l+"h-"+c+"l-"+x+","+l+"l-"+x+",-"+l+"h-"+c+"Z")}},"star-triangle-up":{n:19,f:function(d,f,y){if(r(f))return A;var l=u(d*e*.8,2),x=u(d*.8,2),c=u(d*1.6,2),M=u(d*4,2),w="A "+M+","+M+" 0 0 1 ";return g(f,y,"M-"+l+","+x+w+l+","+x+w+"0,-"+c+w+"-"+l+","+x+"Z")}},"star-triangle-down":{n:20,f:function(d,f,y){if(r(f))return A;var l=u(d*e*.8,2),x=u(d*.8,2),c=u(d*1.6,2),M=u(d*4,2),w="A "+M+","+M+" 0 0 1 ";return g(f,y,"M"+l+",-"+x+w+"-"+l+",-"+x+w+"0,"+c+w+l+",-"+x+"Z")}},"star-square":{n:21,f:function(d,f,y){if(r(f))return A;var l=u(d*1.1,2),x=u(d*2,2),c="A "+x+","+x+" 0 0 1 ";return g(f,y,"M-"+l+",-"+l+c+"-"+l+","+l+c+l+","+l+c+l+",-"+l+c+"-"+l+",-"+l+"Z")}},"star-diamond":{n:22,f:function(d,f,y){if(r(f))return A;var l=u(d*1.4,2),x=u(d*1.9,2),c="A "+x+","+x+" 0 0 1 ";return g(f,y,"M-"+l+",0"+c+"0,"+l+c+l+",0"+c+"0,-"+l+c+"-"+l+",0Z")}},"diamond-tall":{n:23,f:function(d,f,y){if(r(f))return A;var l=u(d*.7,2),x=u(d*1.4,2);return g(f,y,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},"diamond-wide":{n:24,f:function(d,f,y){if(r(f))return A;var l=u(d*1.4,2),x=u(d*.7,2);return g(f,y,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},hourglass:{n:25,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M"+l+","+l+"H-"+l+"L"+l+",-"+l+"H-"+l+"Z")},noDot:!0},bowtie:{n:26,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M"+l+","+l+"V-"+l+"L-"+l+","+l+"V-"+l+"Z")},noDot:!0},"circle-cross":{n:27,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(d,f,y){if(r(f))return A;var l=u(d,2),x=u(d/T,2);return g(f,y,"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(d,f,y){if(r(f))return A;var l=u(d*1.3,2);return g(f,y,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM0,-"+l+"V"+l+"M-"+l+",0H"+l)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(d,f,y){if(r(f))return A;var l=u(d*1.3,2),x=u(d*.65,2);return g(f,y,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+x+",-"+x+"L"+x+","+x+"M-"+x+","+x+"L"+x+",-"+x)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(d,f,y){if(r(f))return A;var l=u(d*1.4,2);return g(f,y,"M0,"+l+"V-"+l+"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(d,f,y){if(r(f))return A;var l=u(d*1.2,2),x=u(d*.85,2);return g(f,y,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(d,f,y){if(r(f))return A;var l=u(d/2,2),x=u(d,2);return g(f,y,"M"+l+","+x+"V-"+x+"M"+(l-x)+",-"+x+"V"+x+"M"+x+","+l+"H-"+x+"M-"+x+","+(l-x)+"H"+x)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(d,f,y){if(r(f))return A;var l=u(d*1.2,2),x=u(d*1.6,2),c=u(d*.8,2);return g(f,y,"M-"+l+","+c+"L0,0M"+l+","+c+"L0,0M0,-"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(d,f,y){if(r(f))return A;var l=u(d*1.2,2),x=u(d*1.6,2),c=u(d*.8,2);return g(f,y,"M-"+l+",-"+c+"L0,0M"+l+",-"+c+"L0,0M0,"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(d,f,y){if(r(f))return A;var l=u(d*1.2,2),x=u(d*1.6,2),c=u(d*.8,2);return g(f,y,"M"+c+","+l+"L0,0M"+c+",-"+l+"L0,0M-"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(d,f,y){if(r(f))return A;var l=u(d*1.2,2),x=u(d*1.6,2),c=u(d*.8,2);return g(f,y,"M-"+c+","+l+"L0,0M-"+c+",-"+l+"L0,0M"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(d,f,y){if(r(f))return A;var l=u(d*1.4,2);return g(f,y,"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(d,f,y){if(r(f))return A;var l=u(d*1.4,2);return g(f,y,"M0,"+l+"V-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(d,f,y){if(r(f))return A;var l=u(d,2);return g(f,y,"M"+l+","+l+"L-"+l+",-"+l)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(d,f,y){if(r(f))return A;var l=u(d,2),x=u(d*2,2);return g(f,y,"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(d,f,y){if(r(f))return A;var l=u(d,2),x=u(d*2,2);return g(f,y,"M0,0L-"+l+",-"+x+"H"+l+"Z")},noDot:!0},"arrow-left":{n:47,f:function(d,f,y){if(r(f))return A;var l=u(d*2,2),x=u(d,2);return g(f,y,"M0,0L"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-right":{n:48,f:function(d,f,y){if(r(f))return A;var l=u(d*2,2),x=u(d,2);return g(f,y,"M0,0L-"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(d,f,y){if(r(f))return A;var l=u(d,2),x=u(d*2,2);return g(f,y,"M-"+l+",0H"+l+"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(d,f,y){if(r(f))return A;var l=u(d,2),x=u(d*2,2);return g(f,y,"M-"+l+",0H"+l+"M0,0L-"+l+",-"+x+"H"+l+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(d,f,y){if(r(f))return A;var l=u(d*2,2),x=u(d,2);return g(f,y,"M0,-"+x+"V"+x+"M0,0L"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(d,f,y){if(r(f))return A;var l=u(d*2,2),x=u(d,2);return g(f,y,"M0,-"+x+"V"+x+"M0,0L-"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(d,f,y){if(r(f))return A;var l=a/2.5,x=2*d*i(l),c=2*d*n(l);return g(f,y,"M0,0L"+-x+","+c+"L"+x+","+c+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(d,f,y){if(r(f))return A;var l=a/4,x=2*d*i(l),c=2*d*n(l);return g(f,y,"M0,0L"+-x+","+c+"A "+2*d+","+2*d+" 0 0 1 "+x+","+c+"Z")},backoff:.4,noDot:!0}};function r(d){return d===null}var v,s,o,b;function g(d,f,y){if((!d||d%360===0)&&!f)return y;if(o===d&&b===f&&v===y)return s;o=d,b=f,v=y;function l(I,D){var R=i(I),O=n(I),z=D[0],G=D[1]+(f||0);return[z*R-G*O,z*O+G*R]}for(var x=d/180*a,c=0,M=0,w=m(y),p="",_=0;_<w.length;_++){var h=w[_],L=h[0],E=c,S=M;if(L==="M"||L==="L")c=+h[1],M=+h[2];else if(L==="m"||L==="l")c+=+h[1],M+=+h[2];else if(L==="H")c=+h[1];else if(L==="h")c+=+h[1];else if(L==="V")M=+h[1];else if(L==="v")M+=+h[1];else if(L==="A"){c=+h[1],M=+h[2];var P=l(x,[+h[6],+h[7]]);h[6]=P[0],h[7]=P[1],h[3]=+h[3]+d}(L==="H"||L==="V")&&(L="L"),(L==="h"||L==="v")&&(L="l"),(L==="m"||L==="l")&&(c-=E,M-=S);var F=l(x,[c,M]);(L==="H"||L==="V")&&(L="L"),(L==="M"||L==="L"||L==="m"||L==="l")&&(h[1]=F[0],h[2]=F[1]),h[0]=L,p+=h[0]+h.slice(1).join(",")}return s=p,p}},{"@plotly/d3":58,"parse-svg-path":250}],391:[function(t,N,V){N.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../registry"),A=t("../../plots/cartesian/axes"),T=t("../../lib"),e=t("./compute_error");N.exports=function(n){for(var r=n.calcdata,v=0;v<r.length;v++){var s=r[v],o=s[0].trace;if(o.visible===!0&&u.traceIs(o,"errorBarsOK")){var b=A.getFromId(n,o.xaxis),g=A.getFromId(n,o.yaxis);a(s,o,b,"x"),a(s,o,g,"y")}}};function a(i,n,r,v){var s=n["error_"+v]||{},o=s.visible&&["linear","log"].indexOf(r.type)!==-1,b=[];if(!!o){for(var g=e(s),d=0;d<i.length;d++){var f=i[d],y=f.i;if(y===void 0)y=d;else if(y===null)continue;var l=f[v];if(!!m(r.c2l(l))){var x=g(l,y);if(m(x[0])&&m(x[1])){var c=f[v+"s"]=l-x[0],M=f[v+"h"]=l+x[1];b.push(c,M)}}}var w=r._id,p=n._extremes[w],_=A.findExtremes(r,b,T.extendFlat({tozero:p.opts.tozero},{padded:!0}));p.min=p.min.concat(_.min),p.max=p.max.concat(_.max)}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(t,N,V){N.exports=function(A){var T=A.type,e=A.symmetric;if(T==="data"){var a=A.array||[];if(e)return function(s,o){var b=+a[o];return[b,b]};var i=A.arrayminus||[];return function(s,o){var b=+a[o],g=+i[o];return!isNaN(b)||!isNaN(g)?[g||0,b||0]:[NaN,NaN]}}else{var n=m(T,A.value),r=m(T,A.valueminus);return e||A.valueminus===void 0?function(s){var o=n(s);return[o,o]}:function(s){return[r(s),n(s)]}}};function m(u,A){if(u==="percent")return function(T){return Math.abs(T*A/100)};if(u==="constant")return function(){return Math.abs(A)};if(u==="sqrt")return function(T){return Math.sqrt(Math.abs(T))}}},{}],394:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../registry"),A=t("../../lib"),T=t("../../plot_api/plot_template"),e=t("./attributes");N.exports=function(a,i,n,r){var v="error_"+r.axis,s=T.newContainer(i,v),o=a[v]||{};function b(c,M){return A.coerce(o,s,e,c,M)}var g=o.array!==void 0||o.value!==void 0||o.type==="sqrt",d=b("visible",g);if(d!==!1){var f=b("type","array"in o?"data":"percent"),y=!0;f!=="sqrt"&&(y=b("symmetric",!((f==="data"?"arrayminus":"valueminus")in o))),f==="data"?(b("array"),b("traceref"),y||(b("arrayminus"),b("tracerefminus"))):(f==="percent"||f==="constant")&&(b("value"),y||b("valueminus"));var l="copy_"+r.inherit+"style";if(r.inherit){var x=i["error_"+r.inherit];(x||{}).visible&&b(l,!(o.color||m(o.thickness)||m(o.width)))}(!r.inherit||!s[l])&&(b("color",n),b("thickness"),b("width",u.traceIs(i,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(t,N,V){var m=t("../../lib"),u=t("../../plot_api/edit_types").overrideAll,A=t("./attributes"),T={error_x:m.extendFlat({},A),error_y:m.extendFlat({},A)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var e={error_x:m.extendFlat({},A),error_y:m.extendFlat({},A),error_z:m.extendFlat({},A)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,N.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:u(e,"calc","nested"),scattergl:u(T,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:a};function a(i,n,r){(n.error_y||{}).visible&&(r.yerr=i.yh-i.y,n.error_y.symmetric||(r.yerrneg=i.y-i.ys)),(n.error_x||{}).visible&&(r.xerr=i.xh-i.x,n.error_x.symmetric||(r.xerrneg=i.x-i.xs))}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("../drawing"),T=t("../../traces/scatter/subtypes");N.exports=function(i,n,r,v){var s,o=r.xaxis,b=r.yaxis,g=v&&v.duration>0;n.each(function(d){var f=d[0].trace,y=f.error_x||{},l=f.error_y||{},x;f.ids&&(x=function(p){return p.id});var c=T.hasMarkers(f)&&f.marker.maxdisplayed>0;!l.visible&&!y.visible&&(d=[]);var M=m.select(this).selectAll("g.errorbar").data(d,x);if(M.exit().remove(),!!d.length){y.visible||M.selectAll("path.xerror").remove(),l.visible||M.selectAll("path.yerror").remove(),M.style("opacity",1);var w=M.enter().append("g").classed("errorbar",!0);g&&w.style("opacity",0).transition().duration(v.duration).style("opacity",1),A.setClipUrl(M,r.layerClipId,i),M.each(function(p){var _=m.select(this),h=e(p,o,b);if(!(c&&!p.vis)){var L,E=_.select("path.yerror");if(l.visible&&u(h.x)&&u(h.yh)&&u(h.ys)){var S=l.width;L="M"+(h.x-S)+","+h.yh+"h"+2*S+"m-"+S+",0V"+h.ys,h.noYS||(L+="m-"+S+",0h"+2*S),s=!E.size(),s?E=_.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):g&&(E=E.transition().duration(v.duration).ease(v.easing)),E.attr("d",L)}else E.remove();var P=_.select("path.xerror");if(y.visible&&u(h.y)&&u(h.xh)&&u(h.xs)){var F=(y.copy_ystyle?l:y).width;L="M"+h.xh+","+(h.y-F)+"v"+2*F+"m0,-"+F+"H"+h.xs,h.noXS||(L+="m0,-"+F+"v"+2*F),s=!P.size(),s?P=_.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):g&&(P=P.transition().duration(v.duration).ease(v.easing)),P.attr("d",L)}else P.remove()}})}})};function e(a,i,n){var r={x:i.c2p(a.x),y:n.c2p(a.y)};return a.yh!==void 0&&(r.yh=n.c2p(a.yh),r.ys=n.c2p(a.ys),u(r.ys)||(r.noYS=!0,r.ys=n.c2p(a.ys,!0))),a.xh!==void 0&&(r.xh=i.c2p(a.xh),r.xs=i.c2p(a.xs),u(r.xs)||(r.noXS=!0,r.xs=i.c2p(a.xs,!0))),r}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(t,N,V){var m=t("@plotly/d3"),u=t("../color");N.exports=function(T){T.each(function(e){var a=e[0].trace,i=a.error_y||{},n=a.error_x||{},r=m.select(this);r.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(u.stroke,i.color),n.copy_ystyle&&(n=i),r.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(u.stroke,n.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(t,N,V){var m=t("../../plots/font_attributes"),u=t("./layout_attributes").hoverlabel,A=t("../../lib/extend").extendFlat;N.exports={hoverlabel:{bgcolor:A({},u.bgcolor,{arrayOk:!0}),bordercolor:A({},u.bordercolor,{arrayOk:!0}),font:m({arrayOk:!0,editType:"none"}),align:A({},u.align,{arrayOk:!0}),namelength:A({},u.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(t,N,V){var m=t("../../lib"),u=t("../../registry");N.exports=function(e){var a=e.calcdata,i=e._fullLayout;function n(b){return function(g){return m.coerceHoverinfo({hoverinfo:g},{_module:b._module},i)}}for(var r=0;r<a.length;r++){var v=a[r],s=v[0].trace;if(!u.traceIs(s,"pie-like")){var o=u.traceIs(s,"2dMap")?A:m.fillArray;o(s.hoverinfo,v,"hi",n(s)),s.hovertemplate&&o(s.hovertemplate,v,"ht"),s.hoverlabel&&(o(s.hoverlabel.bgcolor,v,"hbg"),o(s.hoverlabel.bordercolor,v,"hbc"),o(s.hoverlabel.font.size,v,"hts"),o(s.hoverlabel.font.color,v,"htc"),o(s.hoverlabel.font.family,v,"htf"),o(s.hoverlabel.namelength,v,"hnl"),o(s.hoverlabel.align,v,"hta"))}}};function A(T,e,a,i){i=i||m.identity,Array.isArray(T)&&(e[0][a]=i(T))}},{"../../lib":515,"../../registry":647}],400:[function(t,N,V){var m=t("../../registry"),u=t("./hover").hover;N.exports=function(T,e,a){var i=m.getComponentMethod("annotations","onClick")(T,T._hoverdata);a!==void 0&&u(T,e,a,!0);function n(){T.emit("plotly_click",{points:T._hoverdata,event:e})}T._hoverdata&&e&&e.target&&(i&&i.then?i.then(n):n(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(t,N,V){N.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("./hoverlabel_defaults");N.exports=function(e,a,i,n){function r(s,o){return m.coerce(e,a,u,s,o)}var v=m.extendFlat({},n.hoverlabel);a.hovertemplate&&(v.namelength=-1),A(e,a,r,v)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(t,N,V){var m=t("../../lib");V.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},V.isTraceInSubplots=function(i,n){if(i.type==="splom"){for(var r=i.xaxes||[],v=i.yaxes||[],s=0;s<r.length;s++)for(var o=0;o<v.length;o++)if(n.indexOf(r[s]+v[o])!==-1)return!0;return!1}return n.indexOf(V.getSubplot(i))!==-1},V.flat=function(i,n){for(var r=new Array(i.length),v=0;v<i.length;v++)r[v]=n;return r},V.p2c=function(i,n){for(var r=new Array(i.length),v=0;v<i.length;v++)r[v]=i[v].p2c(n);return r},V.getDistanceFunction=function(i,n,r,v){return i==="closest"?v||V.quadrature(n,r):i.charAt(0)==="x"?n:r},V.getClosest=function(i,n,r){if(r.index!==!1)r.index>=0&&r.index<i.length?r.distance=0:r.index=!1;else for(var v=0;v<i.length;v++){var s=n(i[v]);s<=r.distance&&(r.index=v,r.distance=s)}return r},V.inbox=function(i,n,r){return i*n<0||i===0?r:1/0},V.quadrature=function(i,n){return function(r){var v=i(r),s=n(r);return Math.sqrt(v*v+s*s)}},V.makeEventData=function(i,n,r){var v="index"in i?i.index:i.pointNumber,s={data:n._input,fullData:n,curveNumber:n.index,pointNumber:v};if(n._indexToPoints){var o=n._indexToPoints[v];o.length===1?s.pointIndex=o[0]:s.pointIndices=o}else s.pointIndex=v;return n._module.eventData?s=n._module.eventData(s,i,n,r,v):("xVal"in i?s.x=i.xVal:"x"in i&&(s.x=i.x),"yVal"in i?s.y=i.yVal:"y"in i&&(s.y=i.y),i.xa&&(s.xaxis=i.xa),i.ya&&(s.yaxis=i.ya),i.zLabelVal!==void 0&&(s.z=i.zLabelVal)),V.appendArrayPointValue(s,n,v),s},V.appendArrayPointValue=function(i,n,r){var v=n._arrayAttrs;if(!!v)for(var s=0;s<v.length;s++){var o=v[s],b=A(o);if(i[b]===void 0){var g=m.nestedProperty(n,o).get(),d=T(g,r);d!==void 0&&(i[b]=d)}}},V.appendArrayMultiPointValues=function(i,n,r){var v=n._arrayAttrs;if(!!v)for(var s=0;s<v.length;s++){var o=v[s],b=A(o);if(i[b]===void 0){for(var g=m.nestedProperty(n,o).get(),d=new Array(r.length),f=0;f<r.length;f++)d[f]=T(g,r[f]);i[b]=d}}};var u={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function A(i){return u[i]||i}function T(i,n){if(Array.isArray(n)){if(Array.isArray(i)&&Array.isArray(i[n[0]]))return i[n[0]][n[1]]}else return i[n]}var e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};V.isUnifiedHover=function(i){return typeof i!="string"?!1:!!a[i]},V.isXYhover=function(i){return typeof i!="string"?!1:!!e[i]}},{"../../lib":515}],404:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("tinycolor2"),T=t("../../lib"),e=T.strTranslate,a=T.strRotate,i=t("../../lib/events"),n=t("../../lib/svg_text_utils"),r=t("../../lib/override_cursor"),v=t("../drawing"),s=t("../color"),o=t("../dragelement"),b=t("../../plots/cartesian/axes"),g=t("../../registry"),d=t("./helpers"),f=t("./constants"),y=t("../legend/defaults"),l=t("../legend/draw"),x=f.YANGLE,c=Math.PI*x/180,M=1/Math.sin(c),w=Math.cos(c),p=Math.sin(c),_=f.HOVERARROWSIZE,h=f.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};V.hover=function(H,q,re,Z){H=T.getGraphDiv(H);var Q=q.target;T.throttle(H._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){S(H,q,re,Z,Q)})},V.loneHover=function(H,q){var re=!0;Array.isArray(H)||(re=!1,H=[H]);var Z=q.gd,Q=he(Z),oe=K(Z),se=H.map(function(be){var ke=be._x0||be.x0||be.x||0,De=be._x1||be.x1||be.x||0,He=be._y0||be.y0||be.y||0,Ae=be._y1||be.y1||be.y||0,Le=be.eventData;if(Le){var Ze=Math.min(ke,De),We=Math.max(ke,De),ze=Math.min(He,Ae),Ie=Math.max(He,Ae),Ve=be.trace;if(g.traceIs(Ve,"gl3d")){var dt=Z._fullLayout[Ve.scene]._scene.container,Ft=dt.offsetLeft,Qt=dt.offsetTop;Ze+=Ft,We+=Ft,ze+=Qt,Ie+=Qt}Le.bbox={x0:Ze+oe,x1:We+oe,y0:ze+Q,y1:Ie+Q},q.inOut_bbox&&q.inOut_bbox.push(Le.bbox)}else Le=!1;return{color:be.color||s.defaultLine,x0:be.x0||be.x||0,x1:be.x1||be.x||0,y0:be.y0||be.y||0,y1:be.y1||be.y||0,xLabel:be.xLabel,yLabel:be.yLabel,zLabel:be.zLabel,text:be.text,name:be.name,idealAlign:be.idealAlign,borderColor:be.borderColor,fontFamily:be.fontFamily,fontSize:be.fontSize,fontColor:be.fontColor,nameLength:be.nameLength,textAlign:be.textAlign,trace:be.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:be.hovertemplate||!1,hovertemplateLabels:be.hovertemplateLabels||!1,eventData:Le}}),ae=!1,le=I(se,{gd:Z,hovermode:"closest",rotateLabels:ae,bgColor:q.bgColor||s.background,container:m.select(q.container),outerContainer:q.outerContainer||q.container}),_e=5,fe=0,me=0;le.sort(function(be,ke){return be.y0-ke.y0}).each(function(be,ke){var De=be.y0-be.by/2;De-_e<fe?be.offset=fe-De+_e:be.offset=0,fe=De+be.by+be.offset,ke===q.anchorIndex&&(me=be.offset)}).each(function(be){be.offset-=me});var xe=Z._fullLayout._invScaleX,ye=Z._fullLayout._invScaleY;return O(le,ae,xe,ye),re?le:le.node()};function S(U,H,q,re,Z){q||(q="xy");var Q=Array.isArray(q)?q:[q],oe=U._fullLayout,se=oe._plots||[],ae=se[q],le=oe._has("cartesian");if(ae){var _e=ae.overlays.map(function(ur){return ur.id});Q=Q.concat(_e)}for(var fe=Q.length,me=new Array(fe),xe=new Array(fe),ye=!1,be=0;be<fe;be++){var ke=Q[be];if(se[ke])ye=!0,me[be]=se[ke].xaxis,xe[be]=se[ke].yaxis;else if(oe[ke]&&oe[ke]._subplot){var De=oe[ke]._subplot;me[be]=De.xaxis,xe[be]=De.yaxis}else{T.warn("Unrecognized subplot: "+ke);return}}var He=H.hovermode||oe.hovermode;if(He&&!ye&&(He="closest"),["x","y","closest","x unified","y unified"].indexOf(He)===-1||!U.calcdata||U.querySelector(".zoombox")||U._dragging)return o.unhoverRaw(U,H);var Ae=oe.hoverdistance;Ae===-1&&(Ae=1/0);var Le=oe.spikedistance;Le===-1&&(Le=1/0);var Ze=[],We=[],ze,Ie,Ve,dt,Ft,Qt,Ot,Ct,jt,Nt,Lt,Xe,it,Ye={hLinePoint:null,vLinePoint:null},Ee=!1;if(Array.isArray(H))for(He="array",Ve=0;Ve<H.length;Ve++)Ft=U.calcdata[H[Ve].curveNumber||0],Ft&&(Qt=Ft[0].trace,Ft[0].trace.hoverinfo!=="skip"&&(We.push(Ft),Qt.orientation==="h"&&(Ee=!0)));else{for(dt=0;dt<U.calcdata.length;dt++)Ft=U.calcdata[dt],Qt=Ft[0].trace,Qt.hoverinfo!=="skip"&&d.isTraceInSubplots(Qt,Q)&&(We.push(Ft),Qt.orientation==="h"&&(Ee=!0));var Ge=!Z,Ke,qe;if(Ge)"xpx"in H?Ke=H.xpx:Ke=me[0]._length/2,"ypx"in H?qe=H.ypx:qe=xe[0]._length/2;else{if(i.triggerHandler(U,"plotly_beforehover",H)===!1)return;var At=Z.getBoundingClientRect();Ke=H.clientX-At.left,qe=H.clientY-At.top,oe._calcInverseTransform(U);var yt=T.apply3DTransform(oe._invTransform)(Ke,qe);if(Ke=yt[0],qe=yt[1],Ke<0||Ke>me[0]._length||qe<0||qe>xe[0]._length)return o.unhoverRaw(U,H)}if(H.pointerX=Ke+me[0]._offset,H.pointerY=qe+xe[0]._offset,"xval"in H?ze=d.flat(Q,H.xval):ze=d.p2c(me,Ke),"yval"in H?Ie=d.flat(Q,H.yval):Ie=d.p2c(xe,qe),!u(ze[0])||!u(Ie[0]))return T.warn("Fx.hover failed",H,U),o.unhoverRaw(U,H)}var Mt=1/0;function Gt(ur,Nr){for(dt=0;dt<We.length;dt++)if(Ft=We[dt],!(!Ft||!Ft[0]||!Ft[0].trace)&&(Qt=Ft[0].trace,!(Qt.visible!==!0||Qt._length===0)&&["carpet","contourcarpet"].indexOf(Qt._module.name)===-1)){if(Qt.type==="splom"?(Ct=0,Ot=Q[Ct]):(Ot=d.getSubplot(Qt),Ct=Q.indexOf(Ot)),jt=He,d.isUnifiedHover(jt)&&(jt=jt.charAt(0)),Xe={cd:Ft,trace:Qt,xa:me[Ct],ya:xe[Ct],maxHoverDistance:Ae,maxSpikeDistance:Le,index:!1,distance:Math.min(Mt,Ae),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:Qt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},oe[Ot]&&(Xe.subplot=oe[Ot]._subplot),oe._splomScenes&&oe._splomScenes[Qt.uid]&&(Xe.scene=oe._splomScenes[Qt.uid]),it=Ze.length,jt==="array"){var Vr=H[dt];"pointNumber"in Vr?(Xe.index=Vr.pointNumber,jt="closest"):(jt="","xval"in Vr&&(Nt=Vr.xval,jt="x"),"yval"in Vr&&(Lt=Vr.yval,jt=jt?"closest":"y"))}else ur!==void 0&&Nr!==void 0?(Nt=ur,Lt=Nr):(Nt=ze[Ct],Lt=Ie[Ct]);if(Ae!==0)if(Qt._module&&Qt._module.hoverPoints){var Dr=Qt._module.hoverPoints(Xe,Nt,Lt,jt,{finiteRange:!0,hoverLayer:oe._hoverlayer});if(Dr)for(var Mr,jr=0;jr<Dr.length;jr++)Mr=Dr[jr],u(Mr.x0)&&u(Mr.y0)&&Ze.push(z(Mr,He))}else T.log("Unrecognized trace type in hover:",Qt);if(He==="closest"&&Ze.length>it&&(Ze.splice(0,it),Mt=Ze[0].distance),le&&Le!==0&&Ze.length===0){Xe.distance=Le,Xe.index=!1;var kn=Qt._module.hoverPoints(Xe,Nt,Lt,"closest",{hoverLayer:oe._hoverlayer});if(kn&&(kn=kn.filter(function(ma){return ma.spikeDistance<=Le})),kn&&kn.length){var mn,Wn=kn.filter(function(ma){return ma.xa.showspikes&&ma.xa.spikesnap!=="hovered data"});if(Wn.length){var In=Wn[0];u(In.x0)&&u(In.y0)&&(mn=Ht(In),(!Ye.vLinePoint||Ye.vLinePoint.spikeDistance>mn.spikeDistance)&&(Ye.vLinePoint=mn))}var Jn=kn.filter(function(ma){return ma.ya.showspikes&&ma.ya.spikesnap!=="hovered data"});if(Jn.length){var Kn=Jn[0];u(Kn.x0)&&u(Kn.y0)&&(mn=Ht(Kn),(!Ye.hLinePoint||Ye.hLinePoint.spikeDistance>mn.spikeDistance)&&(Ye.hLinePoint=mn))}}}}}Gt();function zt(ur,Nr,Vr){for(var Dr=null,Mr=1/0,jr,kn=0;kn<ur.length;kn++)jr=ur[kn].spikeDistance,Vr&&kn===0&&(jr=-1/0),jr<=Mr&&jr<=Nr&&(Dr=ur[kn],Mr=jr);return Dr}function Ht(ur){return ur?{xa:ur.xa,ya:ur.ya,x:ur.xSpike!==void 0?ur.xSpike:(ur.x0+ur.x1)/2,y:ur.ySpike!==void 0?ur.ySpike:(ur.y0+ur.y1)/2,distance:ur.distance,spikeDistance:ur.spikeDistance,curveNumber:ur.trace.index,color:ur.color,pointNumber:ur.index}:null}var Zt={fullLayout:oe,container:oe._hoverlayer,event:H},Wt=U._spikepoints,sr={vLinePoint:Ye.vLinePoint,hLinePoint:Ye.hLinePoint};U._spikepoints=sr;var Gr=function(){Ze.sort(function(ur,Nr){return ur.distance-Nr.distance}),Ze=X(Ze,He)};Gr();var cn=He.charAt(0),qr=(cn==="x"||cn==="y")&&Ze[0]&&E[Ze[0].trace.type];if(le&&Le!==0&&Ze.length!==0){var st=Ze.filter(function(ur){return ur.ya.showspikes}),rr=zt(st,Le,qr);Ye.hLinePoint=Ht(rr);var Jt=Ze.filter(function(ur){return ur.xa.showspikes}),hr=zt(Jt,Le,qr);Ye.vLinePoint=Ht(hr)}if(Ze.length===0){var Sr=o.unhoverRaw(U,H);return le&&(Ye.hLinePoint!==null||Ye.vLinePoint!==null)&&ee(Wt)&&G(U,Ye,Zt),Sr}if(le&&ee(Wt)&&G(U,Ye,Zt),d.isXYhover(jt)&&Ze[0].length!==0&&Ze[0].trace.type!=="splom"){var tt=Ze[0];L[tt.trace.type]?Ze=Ze.filter(function(ur){return ur.trace.index===tt.trace.index}):Ze=[tt];var Qe=Ze.length,lt=ie("x",tt,oe),ft=ie("y",tt,oe);Gt(lt,ft);var Et=[],Vt={},Pe=0,Se=function(ur){var Nr=L[ur.trace.type]?P(ur):ur.trace.index;if(!Vt[Nr])Pe++,Vt[Nr]=Pe,Et.push(ur);else{var Vr=Vt[Nr]-1,Dr=Et[Vr];Vr>0&&Math.abs(ur.distance)<Math.abs(Dr.distance)&&(Et[Vr]=ur)}},ot;for(ot=0;ot<Qe;ot++)Se(Ze[ot]);for(ot=Ze.length-1;ot>Qe-1;ot--)Se(Ze[ot]);Ze=Et,Gr()}var ct=U._hoverdata,pt=[],St=he(U),xt=K(U);for(Ve=0;Ve<Ze.length;Ve++){var Pt=Ze[Ve],Xt=d.makeEventData(Pt,Pt.trace,Pt.cd);if(Pt.hovertemplate!==!1){var or=!1;Pt.cd[Pt.index]&&Pt.cd[Pt.index].ht&&(or=Pt.cd[Pt.index].ht),Pt.hovertemplate=or||Pt.trace.hovertemplate||!1}if(Pt.xa&&Pt.ya){var Pr=Pt.x0+Pt.xa._offset,Ar=Pt.x1+Pt.xa._offset,Er=Pt.y0+Pt.ya._offset,$r=Pt.y1+Pt.ya._offset,lr=Math.min(Pr,Ar),br=Math.max(Pr,Ar),Fr=Math.min(Er,$r),Hr=Math.max(Er,$r);Xt.bbox={x0:lr+xt,x1:br+xt,y0:Fr+St,y1:Hr+St}}Pt.eventData=[Xt],pt.push(Xt)}U._hoverdata=pt;var Lr=He==="y"&&(We.length>1||Ze.length>1)||He==="closest"&&Ee&&Ze.length>1,at=s.combine(oe.plot_bgcolor||s.background,oe.paper_bgcolor),Rt=I(Ze,{gd:U,hovermode:He,rotateLabels:Lr,bgColor:at,container:oe._hoverlayer,outerContainer:oe._paper.node(),commonLabelOpts:oe.hoverlabel,hoverdistance:oe.hoverdistance});if(d.isUnifiedHover(He)||(R(Rt,Lr?"xa":"ya",oe),O(Rt,Lr,oe._invScaleX,oe._invScaleY)),Z&&Z.tagName){var Kt=g.getComponentMethod("annotations","hasClickToShow")(U,pt);r(m.select(Z),Kt?"pointer":"")}!Z||re||!Y(U,H,ct)||(ct&&U.emit("plotly_unhover",{event:H,points:ct}),U.emit("plotly_hover",{event:H,points:U._hoverdata,xaxes:me,yaxes:xe,xvals:ze,yvals:Ie}))}function P(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}var F=/<extra>([\s\S]*)<\/extra>/;function I(U,H){var q=H.gd,re=q._fullLayout,Z=H.hovermode,Q=H.rotateLabels,oe=H.bgColor,se=H.container,ae=H.outerContainer,le=H.commonLabelOpts||{};if(U.length===0)return[[]];var _e=H.fontFamily||f.HOVERFONT,fe=H.fontSize||f.HOVERFONTSIZE,me=U[0],xe=me.xa,ye=me.ya,be=Z.charAt(0),ke=be+"Label",De=me[ke];if(De===void 0&&xe.type==="multicategory")for(var He=0;He<U.length&&(De=U[He][ke],De===void 0);He++);var Ae=$(q,ae),Le=Ae.top,Ze=Ae.width,We=Ae.height,ze=De!==void 0&&me.distance<=H.hoverdistance&&(Z==="x"||Z==="y");if(ze){var Ie=!0,Ve,dt;for(Ve=0;Ve<U.length;Ve++)if(Ie&&U[Ve].zLabel===void 0&&(Ie=!1),dt=U[Ve].hoverinfo||U[Ve].trace.hoverinfo,dt){var Ft=Array.isArray(dt)?dt:dt.split("+");if(Ft.indexOf("all")===-1&&Ft.indexOf(Z)===-1){ze=!1;break}}Ie&&(ze=!1)}var Qt=se.selectAll("g.axistext").data(ze?[0]:[]);if(Qt.enter().append("g").classed("axistext",!0),Qt.exit().remove(),Qt.each(function(){var tt=m.select(this),Qe=T.ensureSingle(tt,"path","",function(br){br.style({"stroke-width":"1px"})}),lt=T.ensureSingle(tt,"text","",function(br){br.attr("data-notex",1)}),ft=le.bgcolor||s.defaultLine,Et=le.bordercolor||s.contrast(ft),Vt=s.contrast(ft),Pe={family:le.font.family||_e,size:le.font.size||fe,color:le.font.color||Vt};Qe.style({fill:ft,stroke:Et}),lt.text(De).call(v.font,Pe).call(n.positionText,0,0).call(n.convertToTspans,q),tt.attr("transform","");var Se=$(q,lt.node()),ot,ct;if(Z==="x"){var pt=xe.side==="top"?"-":"";lt.attr("text-anchor","middle").call(n.positionText,0,xe.side==="top"?Le-Se.bottom-_-h:Le-Se.top+_+h),ot=xe._offset+(me.x0+me.x1)/2,ct=ye._offset+(xe.side==="top"?0:ye._length);var St=Se.width/2+h;ot<St?(ot=St,Qe.attr("d","M-"+(St-_)+",0L-"+(St-_*2)+","+pt+_+"H"+(h+Se.width/2)+"v"+pt+(h*2+Se.height)+"H-"+St+"V"+pt+_+"Z")):ot>re.width-St?(ot=re.width-St,Qe.attr("d","M"+(St-_)+",0L"+St+","+pt+_+"v"+pt+(h*2+Se.height)+"H-"+St+"V"+pt+_+"H"+(St-_*2)+"Z")):Qe.attr("d","M0,0L"+_+","+pt+_+"H"+(h+Se.width/2)+"v"+pt+(h*2+Se.height)+"H-"+(h+Se.width/2)+"V"+pt+_+"H-"+_+"Z")}else{var xt,Pt,Xt;ye.side==="right"?(xt="start",Pt=1,Xt="",ot=xe._offset+xe._length):(xt="end",Pt=-1,Xt="-",ot=xe._offset),ct=ye._offset+(me.y0+me.y1)/2,lt.attr("text-anchor",xt),Qe.attr("d","M0,0L"+Xt+_+","+_+"V"+(h+Se.height/2)+"h"+Xt+(h*2+Se.width)+"V-"+(h+Se.height/2)+"H"+Xt+_+"V-"+_+"Z");var or=Se.height/2,Pr=Le-Se.top-or,Ar="clip"+re._uid+"commonlabel"+ye._id,Er;if(ot<Se.width+2*h+_){Er="M-"+(_+h)+"-"+or+"h-"+(Se.width-h)+"V"+or+"h"+(Se.width-h)+"Z";var $r=Se.width-ot+h;n.positionText(lt,$r,Pr),xt==="end"&&lt.selectAll("tspan").each(function(){var br=m.select(this),Fr=v.tester.append("text").text(br.text()).call(v.font,Pe),Hr=$(q,Fr.node());Math.round(Hr.width)<Math.round(Se.width)&&br.attr("x",$r-Hr.width),Fr.remove()})}else n.positionText(lt,Pt*(h+_),Pr),Er=null;var lr=re._topclips.selectAll("#"+Ar).data(Er?[0]:[]);lr.enter().append("clipPath").attr("id",Ar).append("path"),lr.exit().remove(),lr.select("path").attr("d",Er),v.setClipUrl(lt,Er?Ar:null,q)}tt.attr("transform",e(ot,ct))}),d.isUnifiedHover(Z)){se.selectAll("g.hovertext").remove();var Ot=U.filter(function(tt){return tt.hoverinfo!=="none"});if(Ot.length===0)return;var Ct=re.hoverlabel,jt=Ct.font,Nt={showlegend:!0,legend:{title:{text:De,font:jt},font:jt,bgcolor:Ct.bgcolor,bordercolor:Ct.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:re.legend?re.legend.traceorder:void 0,orientation:"v"}},Lt={font:jt};y(Nt,Lt,q._fullData);var Xe=Lt.legend;Xe.entries=[];for(var it=0;it<Ot.length;it++){var Ye=Ot[it];if(Ye.hoverinfo!=="none"){var Ee=D(Ye,!0,Z,re,De),Ge=Ee[0],Ke=Ee[1];Ye.name=Ke,Ke!==""?Ye.text=Ke+" : "+Ge:Ye.text=Ge;var qe=Ye.cd[Ye.index];qe&&(qe.mc&&(Ye.mc=qe.mc),qe.mcc&&(Ye.mc=qe.mcc),qe.mlc&&(Ye.mlc=qe.mlc),qe.mlcc&&(Ye.mlc=qe.mlcc),qe.mlw&&(Ye.mlw=qe.mlw),qe.mrc&&(Ye.mrc=qe.mrc),qe.dir&&(Ye.dir=qe.dir)),Ye._distinct=!0,Xe.entries.push([Ye])}}Xe.entries.sort(function(tt,Qe){return tt[0].trace.index-Qe[0].trace.index}),Xe.layer=se,Xe._inHover=!0,Xe._groupTitleFont=Ct.grouptitlefont,l(q,Xe);var At=se.select("g.legend"),yt=$(q,At.node()),Mt=yt.width+2*h,Gt=yt.height+2*h,zt=Ot[0],Ht=(zt.x0+zt.x1)/2,Zt=(zt.y0+zt.y1)/2,Wt=!(g.traceIs(zt.trace,"bar-like")||g.traceIs(zt.trace,"box-violin")),sr,Gr;be==="y"?Wt?(Gr=Zt-h,sr=Zt+h):(Gr=Math.min.apply(null,Ot.map(function(tt){return Math.min(tt.y0,tt.y1)})),sr=Math.max.apply(null,Ot.map(function(tt){return Math.max(tt.y0,tt.y1)}))):Gr=sr=T.mean(Ot.map(function(tt){return(tt.y0+tt.y1)/2}))-Gt/2;var cn,qr;be==="x"?Wt?(cn=Ht+h,qr=Ht-h):(cn=Math.max.apply(null,Ot.map(function(tt){return Math.max(tt.x0,tt.x1)})),qr=Math.min.apply(null,Ot.map(function(tt){return Math.min(tt.x0,tt.x1)}))):cn=qr=T.mean(Ot.map(function(tt){return(tt.x0+tt.x1)/2}))-Mt/2;var st=xe._offset,rr=ye._offset;sr+=rr,cn+=st,qr+=st-Mt,Gr+=rr-Gt;var Jt,hr;return cn+Mt<Ze&&cn>=0?Jt=cn:qr+Mt<Ze&&qr>=0?Jt=qr:st+Mt<Ze?Jt=st:cn-Ht<Ht-qr+Mt?Jt=Ze-Mt:Jt=0,Jt+=h,sr+Gt<We&&sr>=0?hr=sr:Gr+Gt<We&&Gr>=0?hr=Gr:rr+Gt<We?hr=rr:sr-Zt<Zt-Gr+Gt?hr=We-Gt:hr=0,hr+=h,At.attr("transform",e(Jt-1,hr-1)),At}var Sr=se.selectAll("g.hovertext").data(U,function(tt){return P(tt)});return Sr.enter().append("g").classed("hovertext",!0).each(function(){var tt=m.select(this);tt.append("rect").call(s.fill,s.addOpacity(oe,.8)),tt.append("text").classed("name",!0),tt.append("path").style("stroke-width","1px"),tt.append("text").classed("nums",!0).call(v.font,_e,fe)}),Sr.exit().remove(),Sr.each(function(tt){var Qe=m.select(this).attr("transform",""),lt=tt.color;Array.isArray(lt)&&(lt=lt[tt.eventData[0].pointNumber]);var ft=tt.bgcolor||lt,Et=s.combine(s.opacity(ft)?ft:s.defaultLine,oe),Vt=s.combine(s.opacity(lt)?lt:s.defaultLine,oe),Pe=tt.borderColor||s.contrast(Et),Se=D(tt,ze,Z,re,De,Qe),ot=Se[0],ct=Se[1],pt=Qe.select("text.nums").call(v.font,tt.fontFamily||_e,tt.fontSize||fe,tt.fontColor||Pe).text(ot).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q),St=Qe.select("text.name"),xt=0,Pt=0;if(ct&&ct!==ot){St.call(v.font,tt.fontFamily||_e,tt.fontSize||fe,Vt).text(ct).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q);var Xt=$(q,St.node());xt=Xt.width+2*h,Pt=Xt.height+2*h}else St.remove(),Qe.select("rect").remove();Qe.select("path").style({fill:Et,stroke:Pe});var or=tt.xa._offset+(tt.x0+tt.x1)/2,Pr=tt.ya._offset+(tt.y0+tt.y1)/2,Ar=Math.abs(tt.x1-tt.x0),Er=Math.abs(tt.y1-tt.y0),$r=$(q,pt.node()),lr=$r.width/re._invScaleX,br=$r.height/re._invScaleY;tt.ty0=(Le-$r.top)/re._invScaleY,tt.bx=lr+2*h,tt.by=Math.max(br+2*h,Pt),tt.anchor="start",tt.txwidth=lr,tt.tx2width=xt,tt.offset=0;var Fr=(lr+_+h+xt)*re._invScaleX,Hr,Lr;if(Q)tt.pos=or,Hr=Pr+Er/2+Fr<=We,Lr=Pr-Er/2-Fr>=0,(tt.idealAlign==="top"||!Hr)&&Lr?(Pr-=Er/2,tt.anchor="end"):Hr?(Pr+=Er/2,tt.anchor="start"):tt.anchor="middle";else if(tt.pos=Pr,Hr=or+Ar/2+Fr<=Ze,Lr=or-Ar/2-Fr>=0,(tt.idealAlign==="left"||!Hr)&&Lr)or-=Ar/2,tt.anchor="end";else if(Hr)or+=Ar/2,tt.anchor="start";else{tt.anchor="middle";var at=Fr/2,Rt=or+at-Ze,Kt=or-at;Rt>0&&(or-=Rt),Kt<0&&(or+=-Kt)}pt.attr("text-anchor",tt.anchor),xt&&St.attr("text-anchor",tt.anchor),Qe.attr("transform",e(or,Pr)+(Q?a(x):""))}),Sr}function D(U,H,q,re,Z,Q){var oe="",se="";U.nameOverride!==void 0&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=T.templateString(U.name,U.trace._meta)),oe=j(U.name,U.nameLength));var ae=q.charAt(0),le=ae==="x"?"y":"x";U.zLabel!==void 0?(U.xLabel!==void 0&&(se+="x: "+U.xLabel+"<br>"),U.yLabel!==void 0&&(se+="y: "+U.yLabel+"<br>"),U.trace.type!=="choropleth"&&U.trace.type!=="choroplethmapbox"&&(se+=(se?"z: ":"")+U.zLabel)):H&&U[ae+"Label"]===Z?se=U[le+"Label"]||"":U.xLabel===void 0?U.yLabel!==void 0&&U.trace.type!=="scattercarpet"&&(se=U.yLabel):U.yLabel===void 0?se=U.xLabel:se="("+U.xLabel+", "+U.yLabel+")",(U.text||U.text===0)&&!Array.isArray(U.text)&&(se+=(se?"<br>":"")+U.text),U.extraText!==void 0&&(se+=(se?"<br>":"")+U.extraText),Q&&se===""&&!U.hovertemplate&&(oe===""&&Q.remove(),se=oe);var _e=U.hovertemplate||!1;if(_e){var fe=U.hovertemplateLabels||U;U[ae+"Label"]!==Z&&(fe[ae+"other"]=fe[ae+"Val"],fe[ae+"otherLabel"]=fe[ae+"Label"]),se=T.hovertemplateString(_e,fe,re._d3locale,U.eventData[0]||{},U.trace._meta),se=se.replace(F,function(me,xe){return oe=j(xe,U.nameLength),""})}return[se,oe]}function R(U,H,q){var re=0,Z=1,Q=U.size(),oe=new Array(Q),se=0;U.each(function(ze){var Ie=ze[H],Ve=Ie._id.charAt(0)==="x",dt=Ie.range;se===0&&dt&&dt[0]>dt[1]!==Ve&&(Z=-1),oe[se++]=[{datum:ze,traceIndex:ze.trace.index,dp:0,pos:ze.pos,posref:ze.posref,size:ze.by*(Ve?M:1)/2,pmin:0,pmax:Ve?q.width:q.height}]}),oe.sort(function(ze,Ie){return ze[0].posref-Ie[0].posref||Z*(Ie[0].traceIndex-ze[0].traceIndex)});var ae,le,_e,fe,me,xe,ye;function be(ze){var Ie=ze[0],Ve=ze[ze.length-1];if(le=Ie.pmin-Ie.pos-Ie.dp+Ie.size,_e=Ve.pos+Ve.dp+Ve.size-Ie.pmax,le>.01){for(me=ze.length-1;me>=0;me--)ze[me].dp+=le;ae=!1}if(!(_e<.01)){if(le<-.01){for(me=ze.length-1;me>=0;me--)ze[me].dp-=_e;ae=!1}if(!!ae){var dt=0;for(fe=0;fe<ze.length;fe++)xe=ze[fe],xe.pos+xe.dp+xe.size>Ie.pmax&&dt++;for(fe=ze.length-1;fe>=0&&!(dt<=0);fe--)xe=ze[fe],xe.pos>Ie.pmax-1&&(xe.del=!0,dt--);for(fe=0;fe<ze.length&&!(dt<=0);fe++)if(xe=ze[fe],xe.pos<Ie.pmin+1)for(xe.del=!0,dt--,_e=xe.size*2,me=ze.length-1;me>=0;me--)ze[me].dp-=_e;for(fe=ze.length-1;fe>=0&&!(dt<=0);fe--)xe=ze[fe],xe.pos+xe.dp+xe.size>Ie.pmax&&(xe.del=!0,dt--)}}}for(;!ae&&re<=Q;){for(re++,ae=!0,fe=0;fe<oe.length-1;){var ke=oe[fe],De=oe[fe+1],He=ke[ke.length-1],Ae=De[0];if(le=He.pos+He.dp+He.size-Ae.pos-Ae.dp+Ae.size,le>.01&&He.pmin===Ae.pmin&&He.pmax===Ae.pmax){for(me=De.length-1;me>=0;me--)De[me].dp+=le;for(ke.push.apply(ke,De),oe.splice(fe+1,1),ye=0,me=ke.length-1;me>=0;me--)ye+=ke[me].dp;for(_e=ye/ke.length,me=ke.length-1;me>=0;me--)ke[me].dp-=_e;ae=!1}else fe++}oe.forEach(be)}for(fe=oe.length-1;fe>=0;fe--){var Le=oe[fe];for(me=Le.length-1;me>=0;me--){var Ze=Le[me],We=Ze.datum;We.offset=Ze.dp,We.del=Ze.del}}}function O(U,H,q,re){var Z=function(oe){return oe*q},Q=function(oe){return oe*re};U.each(function(oe){var se=m.select(this);if(oe.del)return se.remove();var ae=se.select("text.nums"),le=oe.anchor,_e=le==="end"?-1:1,fe={start:1,end:-1,middle:0}[le],me=fe*(_+h),xe=me+fe*(oe.txwidth+h),ye=0,be=oe.offset,ke=le==="middle";ke&&(me-=oe.tx2width/2,xe+=oe.txwidth/2+h),H&&(be*=-p,ye=oe.offset*w),se.select("path").attr("d",ke?"M-"+Z(oe.bx/2+oe.tx2width/2)+","+Q(be-oe.by/2)+"h"+Z(oe.bx)+"v"+Q(oe.by)+"h-"+Z(oe.bx)+"Z":"M0,0L"+Z(_e*_+ye)+","+Q(_+be)+"v"+Q(oe.by/2-_)+"h"+Z(_e*oe.bx)+"v-"+Q(oe.by)+"H"+Z(_e*_+ye)+"V"+Q(be-_)+"Z");var De=ye+me,He=be+oe.ty0-oe.by/2+h,Ae=oe.textAlign||"auto";Ae!=="auto"&&(Ae==="left"&&le!=="start"?(ae.attr("text-anchor","start"),De=ke?-oe.bx/2-oe.tx2width/2+h:-oe.bx-h):Ae==="right"&&le!=="end"&&(ae.attr("text-anchor","end"),De=ke?oe.bx/2-oe.tx2width/2-h:oe.bx+h)),ae.call(n.positionText,Z(De),Q(He)),oe.tx2width&&(se.select("text.name").call(n.positionText,Z(xe+fe*h+ye),Q(be+oe.ty0-oe.by/2+h)),se.select("rect").call(v.setRect,Z(xe+(fe-1)*oe.tx2width/2+ye),Q(be-oe.by/2-1),Z(oe.tx2width),Q(oe.by+2)))})}function z(U,H){var q=U.index,re=U.trace||{},Z=U.cd[0],Q=U.cd[q]||{};function oe(me){return me||u(me)&&me===0}var se=Array.isArray(q)?function(me,xe){var ye=T.castOption(Z,q,me);return oe(ye)?ye:T.extractOption({},re,"",xe)}:function(me,xe){return T.extractOption(Q,re,me,xe)};function ae(me,xe,ye){var be=se(xe,ye);oe(be)&&(U[me]=be)}if(ae("hoverinfo","hi","hoverinfo"),ae("bgcolor","hbg","hoverlabel.bgcolor"),ae("borderColor","hbc","hoverlabel.bordercolor"),ae("fontFamily","htf","hoverlabel.font.family"),ae("fontSize","hts","hoverlabel.font.size"),ae("fontColor","htc","hoverlabel.font.color"),ae("nameLength","hnl","hoverlabel.namelength"),ae("textAlign","hta","hoverlabel.align"),U.posref=H==="y"||H==="closest"&&re.orientation==="h"?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=T.constrain(U.x0,0,U.xa._length),U.x1=T.constrain(U.x1,0,U.xa._length),U.y0=T.constrain(U.y0,0,U.ya._length),U.y1=T.constrain(U.y1,0,U.ya._length),U.xLabelVal!==void 0&&(U.xLabel="xLabel"in U?U.xLabel:b.hoverLabelText(U.xa,U.xLabelVal,re.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),U.yLabelVal!==void 0&&(U.yLabel="yLabel"in U?U.yLabel:b.hoverLabelText(U.ya,U.yLabelVal,re.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),U.zLabelVal!==void 0&&U.zLabel===void 0&&(U.zLabel=String(U.zLabelVal)),!isNaN(U.xerr)&&!(U.xa.type==="log"&&U.xerr<=0)){var le=b.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xerrneg!==void 0?U.xLabel+=" +"+le+" / -"+b.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:U.xLabel+=" \xB1 "+le,H==="x"&&(U.distance+=1)}if(!isNaN(U.yerr)&&!(U.ya.type==="log"&&U.yerr<=0)){var _e=b.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yerrneg!==void 0?U.yLabel+=" +"+_e+" / -"+b.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:U.yLabel+=" \xB1 "+_e,H==="y"&&(U.distance+=1)}var fe=U.hoverinfo||U.trace.hoverinfo;return fe&&fe!=="all"&&(fe=Array.isArray(fe)?fe:fe.split("+"),fe.indexOf("x")===-1&&(U.xLabel=void 0),fe.indexOf("y")===-1&&(U.yLabel=void 0),fe.indexOf("z")===-1&&(U.zLabel=void 0),fe.indexOf("text")===-1&&(U.text=void 0),fe.indexOf("name")===-1&&(U.name=void 0)),U}function G(U,H,q){var re=q.container,Z=q.fullLayout,Q=Z._size,oe=q.event,se=!!H.hLinePoint,ae=!!H.vLinePoint,le,_e;if(re.selectAll(".spikeline").remove(),!!(ae||se)){var fe=s.combine(Z.plot_bgcolor,Z.paper_bgcolor);if(se){var me=H.hLinePoint,xe,ye;le=me&&me.xa,_e=me&&me.ya;var be=_e.spikesnap;be==="cursor"?(xe=oe.pointerX,ye=oe.pointerY):(xe=le._offset+me.x,ye=_e._offset+me.y);var ke=A.readability(me.color,fe)<1.5?s.contrast(fe):me.color,De=_e.spikemode,He=_e.spikethickness,Ae=_e.spikecolor||ke,Le=b.getPxPosition(U,_e),Ze,We;if(De.indexOf("toaxis")!==-1||De.indexOf("across")!==-1){if(De.indexOf("toaxis")!==-1&&(Ze=Le,We=xe),De.indexOf("across")!==-1){var ze=_e._counterDomainMin,Ie=_e._counterDomainMax;_e.anchor==="free"&&(ze=Math.min(ze,_e.position),Ie=Math.max(Ie,_e.position)),Ze=Q.l+ze*Q.w,We=Q.l+Ie*Q.w}re.insert("line",":first-child").attr({x1:Ze,x2:We,y1:ye,y2:ye,"stroke-width":He,stroke:Ae,"stroke-dasharray":v.dashStyle(_e.spikedash,He)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:Ze,x2:We,y1:ye,y2:ye,"stroke-width":He+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}De.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:Le+(_e.side!=="right"?He:-He),cy:ye,r:He,fill:Ae}).classed("spikeline",!0)}if(ae){var Ve=H.vLinePoint,dt,Ft;le=Ve&&Ve.xa,_e=Ve&&Ve.ya;var Qt=le.spikesnap;Qt==="cursor"?(dt=oe.pointerX,Ft=oe.pointerY):(dt=le._offset+Ve.x,Ft=_e._offset+Ve.y);var Ot=A.readability(Ve.color,fe)<1.5?s.contrast(fe):Ve.color,Ct=le.spikemode,jt=le.spikethickness,Nt=le.spikecolor||Ot,Lt=b.getPxPosition(U,le),Xe,it;if(Ct.indexOf("toaxis")!==-1||Ct.indexOf("across")!==-1){if(Ct.indexOf("toaxis")!==-1&&(Xe=Lt,it=Ft),Ct.indexOf("across")!==-1){var Ye=le._counterDomainMin,Ee=le._counterDomainMax;le.anchor==="free"&&(Ye=Math.min(Ye,le.position),Ee=Math.max(Ee,le.position)),Xe=Q.t+(1-Ee)*Q.h,it=Q.t+(1-Ye)*Q.h}re.insert("line",":first-child").attr({x1:dt,x2:dt,y1:Xe,y2:it,"stroke-width":jt,stroke:Nt,"stroke-dasharray":v.dashStyle(le.spikedash,jt)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:dt,x2:dt,y1:Xe,y2:it,"stroke-width":jt+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}Ct.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:dt,cy:Lt-(le.side!=="top"?jt:-jt),r:jt,fill:Nt}).classed("spikeline",!0)}}}function Y(U,H,q){if(!q||q.length!==U._hoverdata.length)return!0;for(var re=q.length-1;re>=0;re--){var Z=q[re],Q=U._hoverdata[re];if(Z.curveNumber!==Q.curveNumber||String(Z.pointNumber)!==String(Q.pointNumber)||String(Z.pointNumbers)!==String(Q.pointNumbers))return!0}return!1}function ee(U,H){return!H||H.vLinePoint!==U._spikepoints.vLinePoint||H.hLinePoint!==U._spikepoints.hLinePoint}function j(U,H){return n.plainText(U||"",{len:H,allowedTags:["br","sub","sup","b","i","em"]})}function X(U,H){for(var q=H.charAt(0),re=[],Z=[],Q=[],oe=0;oe<U.length;oe++){var se=U[oe];g.traceIs(se.trace,"bar-like")||g.traceIs(se.trace,"box-violin")?Q.push(se):se.trace[q+"period"]?Z.push(se):re.push(se)}return re.concat(Z).concat(Q)}function ie(U,H,q){var re=H[U+"a"],Z=H[U+"Val"],Q=H.cd[0];if(re.type==="category"||re.type==="multicategory")Z=re._categoriesMap[Z];else if(re.type==="date"){var oe=H.trace[U+"periodalignment"];if(oe){var se=H.cd[H.index],ae=se[U+"Start"];ae===void 0&&(ae=se[U]);var le=se[U+"End"];le===void 0&&(le=se[U]);var _e=le-ae;oe==="end"?Z+=_e:oe==="middle"&&(Z+=_e/2)}Z=re.d2c(Z)}return Q&&Q.t&&Q.t.posLetter===re._id&&(q.boxmode==="group"||q.violinmode==="group")&&(Z+=Q.t.dPos),Z}function he(U){return U.offsetTop+U.clientTop}function K(U){return U.offsetLeft+U.clientLeft}function $(U,H){var q=U._fullLayout,re=H.getBoundingClientRect(),Z=re.x,Q=re.y,oe=Z+re.width,se=Q+re.height,ae=T.apply3DTransform(q._invTransform)(Z,Q),le=T.apply3DTransform(q._invTransform)(oe,se),_e=ae[0],fe=ae[1],me=le[0],xe=le[1];return{x:_e,y:fe,width:me-_e,height:xe-fe,top:Math.min(fe,xe),left:Math.min(_e,me),right:Math.max(_e,me),bottom:Math.max(fe,xe)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(t,N,V){var m=t("../../lib"),u=t("../color"),A=t("./helpers").isUnifiedHover;N.exports=function(e,a,i,n){n=n||{};var r=a.legend;function v(s){n.font[s]||(n.font[s]=r?a.legend.font[s]:a.font[s])}a&&A(a.hovermode)&&(n.font||(n.font={}),v("size"),v("family"),v("color"),r?(n.bgcolor||(n.bgcolor=u.combine(a.legend.bgcolor,a.paper_bgcolor)),n.bordercolor||(n.bordercolor=a.legend.bordercolor)):n.bgcolor||(n.bgcolor=a.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),m.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return e[i]!==void 0?e[i]:m.coerce(T,e,u,i,n)}return a("clickmode"),a("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../dragelement"),T=t("./helpers"),e=t("./layout_attributes"),a=t("./hover");N.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:e},attributes:t("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:n,castHoverinfo:r,hover:a.hover,unhover:A.unhover,loneHover:a.loneHover,loneUnhover:i,click:t("./click")};function i(v){var s=u.isD3Selection(v)?v:m.select(v);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function n(v,s,o){return u.castOption(v,s,"hoverlabel."+o)}function r(v,s,o){function b(g){return u.coerceHoverinfo({hoverinfo:g},{_module:v._module},s)}return u.castOption(v,o,"hoverinfo",b)}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(t,N,V){var m=t("./constants"),u=t("../../plots/font_attributes"),A=u({editType:"none"});A.family.dflt=m.HOVERFONT,A.size.dflt=m.HOVERFONTSIZE,N.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:A,grouptitlefont:u({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes"),A=t("./hovermode_defaults"),T=t("./hoverlabel_defaults");N.exports=function(a,i){function n(g,d){return m.coerce(a,i,u,g,d)}var r=A(a,i);r&&(n("hoverdistance"),n("spikedistance"));var v=n("dragmode");v==="select"&&n("selectdirection");var s=i._has("mapbox"),o=i._has("geo"),b=i._basePlotModules.length;i.dragmode==="zoom"&&((s||o)&&b===1||s&&o&&b===2)&&(i.dragmode="pan"),T(a,i,n),m.coerceFont(n,"hoverlabel.grouptitlefont",i.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(t,N,V){var m=t("../../lib"),u=t("./hoverlabel_defaults"),A=t("./layout_attributes");N.exports=function(e,a){function i(n,r){return m.coerce(e,a,A,n,r)}u(e,a,i)}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(t,N,V){var m=t("../../lib"),u=t("../../lib/regex").counter,A=t("../../plots/domain").attributes,T=t("../../plots/cartesian/constants").idRegex,e=t("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[u("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:A({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function i(o,b,g){var d=b[g+"axes"],f=Object.keys((o._splomAxes||{})[g]||{});if(Array.isArray(d))return d;if(f.length)return f}function n(o,b){var g=o.grid||{},d=i(b,g,"x"),f=i(b,g,"y");if(!o.grid&&!d&&!f)return;var y=Array.isArray(g.subplots)&&Array.isArray(g.subplots[0]),l=Array.isArray(d),x=Array.isArray(f),c=l&&d!==g.xaxes&&x&&f!==g.yaxes,M,w;y?(M=g.subplots.length,w=g.subplots[0].length):(x&&(M=f.length),l&&(w=d.length));var p=e.newContainer(b,"grid");function _(O,z){return m.coerce(g,p,a,O,z)}var h=_("rows",M),L=_("columns",w);if(!(h*L>1)){delete b.grid;return}if(!y&&!l&&!x){var E=_("pattern")==="independent";E&&(y=!0)}p._hasSubplotGrid=y;var S=_("roworder"),P=S==="top to bottom",F=y?.2:.1,I=y?.3:.1,D,R;c&&b._splomGridDflt&&(D=b._splomGridDflt.xside,R=b._splomGridDflt.yside),p._domains={x:r("x",_,F,D,L),y:r("y",_,I,R,h,P)}}function r(o,b,g,d,f,y){var l=b(o+"gap",g),x=b("domain."+o);b(o+"side",d);for(var c=new Array(f),M=x[0],w=(x[1]-M)/(f-l),p=w*(1-l),_=0;_<f;_++){var h=M+w*_;c[y?f-1-_:_]=[h,h+p]}return c}function v(o,b){var g=b.grid;if(!(!g||!g._domains)){var d=o.grid||{},f=b._subplots,y=g._hasSubplotGrid,l=g.rows,x=g.columns,c=g.pattern==="independent",M,w,p,_,h,L,E,S=g._axisMap={};if(y){var P=d.subplots||[];L=g.subplots=new Array(l);var F=1;for(M=0;M<l;M++){var I=L[M]=new Array(x),D=P[M]||[];for(w=0;w<x;w++)if(c?(h=F===1?"xy":"x"+F+"y"+F,F++):h=D[w],I[w]="",f.cartesian.indexOf(h)!==-1){if(E=h.indexOf("y"),p=h.slice(0,E),_=h.slice(E),S[p]!==void 0&&S[p]!==w||S[_]!==void 0&&S[_]!==M)continue;I[w]=h,S[p]=w,S[_]=M}}}else{var R=i(b,d,"x"),O=i(b,d,"y");g.xaxes=s(R,f.xaxis,x,S,"x"),g.yaxes=s(O,f.yaxis,l,S,"y")}var z=g._anchors={},G=g.roworder==="top to bottom";for(var Y in S){var ee=Y.charAt(0),j=g[ee+"side"],X,ie,he;if(j.length<8)z[Y]="free";else if(ee==="x"){if(j.charAt(0)==="t"===G?(X=0,ie=1,he=l):(X=l-1,ie=-1,he=-1),y){var K=S[Y];for(M=X;M!==he;M+=ie)if(h=L[M][K],!!h&&(E=h.indexOf("y"),h.slice(0,E)===Y)){z[Y]=h.slice(E);break}}else for(M=X;M!==he;M+=ie)if(_=g.yaxes[M],f.cartesian.indexOf(Y+_)!==-1){z[Y]=_;break}}else if(j.charAt(0)==="l"?(X=0,ie=1,he=x):(X=x-1,ie=-1,he=-1),y){var $=S[Y];for(M=X;M!==he;M+=ie)if(h=L[$][M],!!h&&(E=h.indexOf("y"),h.slice(E)===Y)){z[Y]=h.slice(0,E);break}}else for(M=X;M!==he;M+=ie)if(p=g.xaxes[M],f.cartesian.indexOf(p+Y)!==-1){z[Y]=p;break}}}}function s(o,b,g,d,f){var y=new Array(g),l;function x(c,M){b.indexOf(M)!==-1&&d[M]===void 0?(y[c]=M,d[M]=c):y[c]=""}if(Array.isArray(o))for(l=0;l<g;l++)x(l,o[l]);else for(x(0,f),l=1;l<g;l++)x(l,f+(l+1));return y}N.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:n,contentDefaults:v}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(t,N,V){var m=t("../../plots/cartesian/constants"),u=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),N.exports=u("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib/to_log_range");N.exports=function(T,e,a,i){e=e||{};var n=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!!(n||r)){for(var v=T._fullLayout.images,s=e._id.charAt(0),o,b,g=0;g<v.length;g++)if(o=v[g],b="images["+g+"].",o[s+"ref"]===e._id){var d=o[s],f=o["size"+s],y=null,l=null;if(n){y=u(d,e.range);var x=f/Math.pow(10,y)/2;l=2*Math.log(x+Math.sqrt(1+x*x))/Math.LN10}else y=Math.pow(10,d),l=y*(Math.pow(10,f/2)-Math.pow(10,-f/2));m(y)?m(l)||(l=null):(y=null,l=null),i(b+s,y),i(b+"size"+s,l)}}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e="images";N.exports=function(n,r){var v={name:e,handleItemDefaults:a};A(n,r,v)};function a(i,n,r){function v(x,c){return m.coerce(i,n,T,x,c)}var s=v("source"),o=v("visible",!!s);if(!o)return n;v("layer"),v("xanchor"),v("yanchor"),v("sizex"),v("sizey"),v("sizing"),v("opacity");for(var b={_fullLayout:r},g=["x","y"],d=0;d<2;d++){var f=g[d],y=u.coerceRef(i,n,b,f,"paper",void 0);if(y!=="paper"){var l=u.getFromId(b,y);l._imgIndices.push(n._index)}u.coercePosition(n,b,v,y,f,0)}return n}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(t,N,V){var m=t("@plotly/d3"),u=t("../drawing"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/axis_ids"),e=t("../../constants/xmlns_namespaces");N.exports=function(i){var n=i._fullLayout,r=[],v={},s=[],o,b;for(b=0;b<n.images.length;b++){var g=n.images[b];if(g.visible)if(g.layer==="below"&&g.xref!=="paper"&&g.yref!=="paper"){o=T.ref2id(g.xref)+T.ref2id(g.yref);var d=n._plots[o];if(!d){s.push(g);continue}d.mainplot&&(o=d.mainplot.id),v[o]||(v[o]=[]),v[o].push(g)}else g.layer==="above"?r.push(g):s.push(g)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function y(_){var h=m.select(this);if(this._imgSrc!==_.source)if(h.attr("xmlns",e.svg),_.source&&_.source.slice(0,5)==="data:")h.attr("xlink:href",_.source),this._imgSrc=_.source;else{var L=new Promise(function(E){var S=new Image;this.img=S,S.setAttribute("crossOrigin","anonymous"),S.onerror=P,S.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height;var I=F.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var D=F.toDataURL("image/png");h.attr("xlink:href",D),E()},h.on("error",P),S.src=_.source,this._imgSrc=_.source;function P(){h.remove(),E()}}.bind(this));i._promises.push(L)}}function l(_){var h=m.select(this),L=A.getFromId(i,_.xref),E=A.getFromId(i,_.yref),S=A.getRefType(_.xref)==="domain",P=A.getRefType(_.yref)==="domain",F=n._size,I,D;L!==void 0?I=typeof _.xref=="string"&&S?L._length*_.sizex:Math.abs(L.l2p(_.sizex)-L.l2p(0)):I=_.sizex*F.w,E!==void 0?D=typeof _.yref=="string"&&P?E._length*_.sizey:Math.abs(E.l2p(_.sizey)-E.l2p(0)):D=_.sizey*F.h;var R=I*f.x[_.xanchor].offset,O=D*f.y[_.yanchor].offset,z=f.x[_.xanchor].sizing+f.y[_.yanchor].sizing,G,Y;switch(L!==void 0?G=typeof _.xref=="string"&&S?L._length*_.x+L._offset:L.r2p(_.x)+L._offset:G=_.x*F.w+F.l,G+=R,E!==void 0?Y=typeof _.yref=="string"&&P?E._length*(1-_.y)+E._offset:E.r2p(_.y)+E._offset:Y=F.h-_.y*F.h+F.t,Y+=O,_.sizing){case"fill":z+=" slice";break;case"stretch":z="none";break}h.attr({x:G,y:Y,width:I,height:D,preserveAspectRatio:z,opacity:_.opacity});var ee=L&&A.getRefType(_.xref)!=="domain"?L._id:"",j=E&&A.getRefType(_.yref)!=="domain"?E._id:"",X=ee+j;u.setClipUrl(h,X?"clip"+n._uid+X:null,i)}var x=n._imageLowerLayer.selectAll("image").data(s),c=n._imageUpperLayer.selectAll("image").data(r);x.enter().append("image"),c.enter().append("image"),x.exit().remove(),c.exit().remove(),x.each(function(_){y.bind(this)(_),l.bind(this)(_)}),c.each(function(_){y.bind(this)(_),l.bind(this)(_)});var M=Object.keys(n._plots);for(b=0;b<M.length;b++){o=M[b];var w=n._plots[o];if(!!w.imagelayer){var p=w.imagelayer.selectAll("image").data(v[o]||[]);p.enter().append("image"),p.exit().remove(),p.each(function(_){y.bind(this)(_),l.bind(this)(_)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(t,N,V){N.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(t,N,V){var m=t("../../plots/font_attributes"),u=t("../color/attributes");N.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:u.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:m({editType:"legend"}),grouptitlefont:m({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:m({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(t,N,V){N.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("../../plot_api/plot_template"),T=t("../../plots/attributes"),e=t("./attributes"),a=t("../../plots/layout_attributes"),i=t("./helpers");N.exports=function(r,v,s){var o=r.legend||{},b=A.newContainer(v,"legend");function g(D,R){return u.coerce(o,b,e,D,R)}for(var d,f=function(D,R){var O=d._input,z=d;return u.coerce(O,z,T,D,R)},y=v.font||{},l=u.coerceFont(g,"grouptitlefont",u.extendFlat({},y,{size:Math.round(y.size*1.1)})),x=0,c=!1,M="normal",w=0;w<s.length;w++)d=s[w],d.visible&&((d.showlegend||d._dfltShowLegend&&!(d._module&&d._module.attributes&&d._module.attributes.showlegend&&d._module.attributes.showlegend.dflt===!1))&&(x++,d.showlegend&&(c=!0,(m.traceIs(d,"pie-like")||d._input.showlegend===!0)&&x++),u.coerceFont(f,"legendgrouptitle.font",l)),(m.traceIs(d,"bar")&&v.barmode==="stack"||["tonextx","tonexty"].indexOf(d.fill)!==-1)&&(M=i.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),d.legendgroup!==void 0&&d.legendgroup!==""&&(M=i.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var p=u.coerce(r,v,a,"showlegend",c&&x>1);if(p===!1&&(v.legend=void 0),!(p===!1&&!o.uirevision)&&(g("uirevision",v.uirevision),p!==!1)){g("bgcolor",v.paper_bgcolor),g("bordercolor"),g("borderwidth");var _=u.coerceFont(g,"font",v.font),h=g("orientation"),L=h==="h",E,S,P;L?(E=0,m.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(S=1.1,P="bottom"):(S=-.1,P="top")):(E=1.02,S=1,P="auto"),g("traceorder",M),i.isGrouped(v.legend)&&g("tracegroupgap"),g("entrywidth"),g("entrywidthmode"),g("itemsizing"),g("itemwidth"),g("itemclick"),g("itemdoubleclick"),g("groupclick"),g("x",E),g("xanchor"),g("y",S),g("yanchor",P),g("valign"),u.noneOrAll(o,b,["x","y"]);var F=g("title.text");if(F){g("title.side",L?"left":"top");var I=u.extendFlat({},_,{size:u.bigFont(_.size)});u.coerceFont(g,"title.font",I)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib/events"),a=t("../dragelement"),i=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),v=t("./handle_click"),s=t("./constants"),o=t("../../constants/alignment"),b=o.LINE_SPACING,g=o.FROM_TL,d=o.FROM_BR,f=t("./get_legend_data"),y=t("./style"),l=t("./helpers"),x=1;N.exports=function(O,z){return z||(z=O._fullLayout.legend||{}),c(O,z)};function c(R,O){var z=R._fullLayout,G="legend"+z._uid,Y,ee=O._inHover;if(ee?(Y=O.layer,G+="-hover"):Y=z._infolayer,!!Y){R._legendMouseDownTime||(R._legendMouseDownTime=0);var j;if(ee){if(!O.entries)return;j=f(O.entries,O)}else{if(!R.calcdata)return;j=z.showlegend&&f(R.calcdata,O)}var X=z.hiddenlabels||[];if(!ee&&(!z.showlegend||!j.length))return Y.selectAll(".legend").remove(),z._topdefs.select("#"+G).remove(),A.autoMargin(R,"legend");var ie=u.ensureSingle(Y,"g","legend",function(Q){ee||Q.attr("pointer-events","all")}),he=u.ensureSingleById(z._topdefs,"clipPath",G,function(Q){Q.append("rect")}),K=u.ensureSingle(ie,"rect","bg",function(Q){Q.attr("shape-rendering","crispEdges")});K.call(n.stroke,O.bordercolor).call(n.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px");var $=u.ensureSingle(ie,"g","scrollbox"),U=O.title;if(O._titleWidth=0,O._titleHeight=0,U.text){var H=u.ensureSingle($,"text","legendtitletext");H.attr("text-anchor","start").call(i.font,U.font).text(U.text),L(H,$,R,O,x)}else $.selectAll(".legendtitletext").remove();var q=u.ensureSingle(ie,"rect","scrollbar",function(Q){Q.attr(s.scrollBarEnterAttrs).call(n.fill,s.scrollBarColor)}),re=$.selectAll("g.groups").data(j);re.enter().append("g").attr("class","groups"),re.exit().remove();var Z=re.selectAll("g.traces").data(u.identity);Z.enter().append("g").attr("class","traces"),Z.exit().remove(),Z.style("opacity",function(Q){var oe=Q[0].trace;return T.traceIs(oe,"pie-like")?X.indexOf(Q[0].label)!==-1?.5:1:oe.visible==="legendonly"?.5:1}).each(function(){m.select(this).call(p,R,O)}).call(y,R,O).each(function(){ee||m.select(this).call(h,R)}),u.syncOrAsync([A.previousPromises,function(){return P(R,re,Z,O)},function(){var Q=z._size,oe=O.borderwidth;if(!ee){var se=F(R);if(se)return;var ae=Q.l+Q.w*O.x-g[I(O)]*O._width,le=Q.t+Q.h*(1-O.y)-g[D(O)]*O._effHeight;if(z.margin.autoexpand){var _e=ae,fe=le;ae=u.constrain(ae,0,z.width-O._width),le=u.constrain(le,0,z.height-O._effHeight),ae!==_e&&u.log("Constrain legend.x to make legend fit inside graph"),le!==fe&&u.log("Constrain legend.y to make legend fit inside graph")}i.setTranslate(ie,ae,le)}if(q.on(".drag",null),ie.on("wheel",null),ee||O._height<=O._maxHeight||R._context.staticPlot){var me=O._effHeight;ee&&(me=O._height),K.attr({width:O._width-oe,height:me-oe,x:oe/2,y:oe/2}),i.setTranslate($,0,0),he.select("rect").attr({width:O._width-2*oe,height:me-2*oe,x:oe,y:oe}),i.setClipUrl($,G,R),i.setRect(q,0,0,0,0),delete O._scrollY}else{var xe=Math.max(s.scrollBarMinHeight,O._effHeight*O._effHeight/O._height),ye=O._effHeight-xe-2*s.scrollBarMargin,be=O._height-O._effHeight,ke=ye/be,De=Math.min(O._scrollY||0,be);K.attr({width:O._width-2*oe+s.scrollBarWidth+s.scrollBarMargin,height:O._effHeight-oe,x:oe/2,y:oe/2}),he.select("rect").attr({width:O._width-2*oe+s.scrollBarWidth+s.scrollBarMargin,height:O._effHeight-2*oe,x:oe,y:oe+De}),i.setClipUrl($,G,R),Ve(De,xe,ke),ie.on("wheel",function(){De=u.constrain(O._scrollY+m.event.deltaY/ye*be,0,be),Ve(De,xe,ke),De!==0&&De!==be&&m.event.preventDefault()});var He,Ae,Le,Ze=function(Ct,jt,Nt){var Lt=(Nt-jt)/ke+Ct;return u.constrain(Lt,0,be)},We=function(Ct,jt,Nt){var Lt=(jt-Nt)/ke+Ct;return u.constrain(Lt,0,be)},ze=m.behavior.drag().on("dragstart",function(){var Ct=m.event.sourceEvent;Ct.type==="touchstart"?He=Ct.changedTouches[0].clientY:He=Ct.clientY,Le=De}).on("drag",function(){var Ct=m.event.sourceEvent;Ct.buttons===2||Ct.ctrlKey||(Ct.type==="touchmove"?Ae=Ct.changedTouches[0].clientY:Ae=Ct.clientY,De=Ze(Le,He,Ae),Ve(De,xe,ke))});q.call(ze);var Ie=m.behavior.drag().on("dragstart",function(){var Ct=m.event.sourceEvent;Ct.type==="touchstart"&&(He=Ct.changedTouches[0].clientY,Le=De)}).on("drag",function(){var Ct=m.event.sourceEvent;Ct.type==="touchmove"&&(Ae=Ct.changedTouches[0].clientY,De=We(Le,He,Ae),Ve(De,xe,ke))});$.call(Ie)}function Ve(Ct,jt,Nt){O._scrollY=R._fullLayout.legend._scrollY=Ct,i.setTranslate($,0,-Ct),i.setRect(q,O._width,s.scrollBarMargin+Ct*Nt,s.scrollBarWidth,jt),he.select("rect").attr("y",oe+Ct)}if(R._context.edits.legendPosition){var dt,Ft,Qt,Ot;ie.classed("cursor-move",!0),a.init({element:ie.node(),gd:R,prepFn:function(){var Ct=i.getTranslate(ie);Qt=Ct.x,Ot=Ct.y},moveFn:function(Ct,jt){var Nt=Qt+Ct,Lt=Ot+jt;i.setTranslate(ie,Nt,Lt),dt=a.align(Nt,0,Q.l,Q.l+Q.w,O.xanchor),Ft=a.align(Lt,0,Q.t+Q.h,Q.t,O.yanchor)},doneFn:function(){dt!==void 0&&Ft!==void 0&&T.call("_guiRelayout",R,{"legend.x":dt,"legend.y":Ft})},clickFn:function(Ct,jt){var Nt=Y.selectAll("g.traces").filter(function(){var Lt=this.getBoundingClientRect();return jt.clientX>=Lt.left&&jt.clientX<=Lt.right&&jt.clientY>=Lt.top&&jt.clientY<=Lt.bottom});Nt.size()>0&&w(R,ie,Nt,Ct,jt)}})}}],R)}}function M(R,O,z){var G=R[0],Y=G.width,ee=O.entrywidthmode,j=G.trace.legendwidth||O.entrywidth;return ee==="fraction"?O._maxWidth*j:z+(j||Y)}function w(R,O,z,G,Y){var ee=z.data()[0][0].trace,j={event:Y,node:z.node(),curveNumber:ee.index,expandedIndex:ee._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};ee._group&&(j.group=ee._group),T.traceIs(ee,"pie-like")&&(j.label=z.datum()[0].label);var X=e.triggerHandler(R,"plotly_legendclick",j);if(X!==!1){if(G===1)O._clickTimeout=setTimeout(function(){!R._fullLayout||v(z,R,G)},R._context.doubleClickDelay);else if(G===2){O._clickTimeout&&clearTimeout(O._clickTimeout),R._legendMouseDownTime=0;var ie=e.triggerHandler(R,"plotly_legenddoubleclick",j);ie!==!1&&v(z,R,G)}}}function p(R,O,z){var G=R.data()[0][0],Y=G.trace,ee=T.traceIs(Y,"pie-like"),j=!z._inHover&&O._context.edits.legendText&&!ee,X=z._maxNameLength,ie,he;G.groupTitle?(ie=G.groupTitle.text,he=G.groupTitle.font):(he=z.font,z.entries?ie=G.text:(ie=ee?G.label:Y.name,Y._meta&&(ie=u.templateString(ie,Y._meta))));var K=u.ensureSingle(R,"text","legendtext");K.attr("text-anchor","start").call(i.font,he).text(j?_(ie,X):ie);var $=z.itemwidth+s.itemGap*2;r.positionText(K,$,0),j?K.call(r.makeEditable,{gd:O,text:ie}).call(L,R,O,z).on("edit",function(U){this.text(_(U,X)).call(L,R,O,z);var H=G.trace._fullInput||{},q={};if(T.hasTransform(H,"groupby")){var re=T.getTransformIndices(H,"groupby"),Z=re[re.length-1],Q=u.keyedContainer(H,"transforms["+Z+"].styles","target","value.name");Q.set(G.trace._group,U),q=Q.constructUpdate()}else q.name=U;return T.call("_guiRestyle",O,q,Y.index)}):L(K,R,O,z)}function _(R,O){var z=Math.max(4,O);if(R&&R.trim().length>=z/2)return R;R=R||"";for(var G=z-R.length;G>0;G--)R+=" ";return R}function h(R,O){var z=O._context.doubleClickDelay,G,Y=1,ee=u.ensureSingle(R,"rect","legendtoggle",function(j){O._context.staticPlot||j.style("cursor","pointer").attr("pointer-events","all"),j.call(n.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(ee.on("mousedown",function(){G=new Date().getTime(),G-O._legendMouseDownTime<z?Y+=1:(Y=1,O._legendMouseDownTime=G)}),ee.on("mouseup",function(){if(!(O._dragged||O._editing)){var j=O._fullLayout.legend;new Date().getTime()-O._legendMouseDownTime>z&&(Y=Math.max(Y-1,1)),w(O,j,R,Y,m.event)}}))}function L(R,O,z,G,Y){G._inHover&&R.attr("data-notex",!0),r.convertToTspans(R,z,function(){E(O,z,G,Y)})}function E(R,O,z,G){var Y=R.data()[0][0];if(!z._inHover&&Y&&!Y.trace.showlegend){R.remove();return}var ee=R.select("g[class*=math-group]"),j=ee.node();z||(z=O._fullLayout.legend);var X=z.borderwidth,ie;G===x?ie=z.title.font:Y.groupTitle?ie=Y.groupTitle.font:ie=z.font;var he=ie.size*b,K,$;if(j){var U=i.bBox(j);K=U.height,$=U.width,G===x?i.setTranslate(ee,X,X+K*.75):i.setTranslate(ee,0,K*.25)}else{var H=R.select(G===x?".legendtitletext":".legendtext"),q=r.lineCount(H),re=H.node();if(K=he*q,$=re?i.bBox(re).width:0,G===x)z.title.side==="left"&&($+=s.itemGap*2),r.positionText(H,X+s.titlePad,X+he);else{var Z=s.itemGap*2+z.itemwidth;Y.groupTitle&&(Z=s.itemGap,$-=z.itemwidth),r.positionText(H,Z,-he*((q-1)/2-.3))}}G===x?(z._titleWidth=$,z._titleHeight=K):(Y.lineHeight=he,Y.height=Math.max(K,16)+3,Y.width=$)}function S(R){var O=0,z=0,G=R.title.side;return G&&(G.indexOf("left")!==-1&&(O=R._titleWidth),G.indexOf("top")!==-1&&(z=R._titleHeight)),[O,z]}function P(R,O,z,G){var Y=R._fullLayout;G||(G=Y.legend);var ee=Y._size,j=l.isVertical(G),X=l.isGrouped(G),ie=G.entrywidthmode==="fraction",he=G.borderwidth,K=2*he,$=s.itemGap,U=G.itemwidth+$*2,H=2*(he+$),q=D(G),re=G.y<0||G.y===0&&q==="top",Z=G.y>1||G.y===1&&q==="bottom",Q=G.tracegroupgap,oe={};G._maxHeight=Math.max(re||Z?Y.height/2:ee.h,30);var se=0;G._width=0,G._height=0;var ae=S(G);if(j)z.each(function(Qt){var Ot=Qt[0].height;i.setTranslate(this,he+ae[0],he+ae[1]+G._height+Ot/2+$),G._height+=Ot,G._width=Math.max(G._width,Qt[0].width)}),se=U+G._width,G._width+=$+U+K,G._height+=H,X&&(O.each(function(Qt,Ot){i.setTranslate(this,0,Ot*G.tracegroupgap)}),G._height+=(G._lgroupsLength-1)*G.tracegroupgap);else{var le=I(G),_e=G.x<0||G.x===0&&le==="right",fe=G.x>1||G.x===1&&le==="left",me=Z||re,xe=Y.width/2;G._maxWidth=Math.max(_e?me&&le==="left"?ee.l+ee.w:xe:fe?me&&le==="right"?ee.r+ee.w:xe:ee.w,2*U);var ye=0,be=0;z.each(function(Qt){var Ot=M(Qt,G,U);ye=Math.max(ye,Ot),be+=Ot}),se=null;var ke=0;if(X){var De=0,He=0,Ae=0;O.each(function(){var Qt=0,Ot=0;m.select(this).selectAll("g.traces").each(function(jt){var Nt=M(jt,G,U),Lt=jt[0].height;i.setTranslate(this,ae[0],ae[1]+he+$+Lt/2+Ot),Ot+=Lt,Qt=Math.max(Qt,Nt),oe[jt[0].trace.legendgroup]=Qt});var Ct=Qt+$;He>0&&Ct+he+He>G._maxWidth?(ke=Math.max(ke,He),He=0,Ae+=De+Q,De=Ot):De=Math.max(De,Ot),i.setTranslate(this,He,Ae),He+=Ct}),G._width=Math.max(ke,He)+he,G._height=Ae+De+H}else{var Le=z.size(),Ze=be+K+(Le-1)*$<G._maxWidth,We=0,ze=0,Ie=0,Ve=0;z.each(function(Qt){var Ot=Qt[0].height,Ct=M(Qt,G,U),jt=Ze?Ct:ye;ie||(jt+=$),jt+he+ze-$>=G._maxWidth&&(ke=Math.max(ke,Ve),ze=0,Ie+=We,G._height+=We,We=0),i.setTranslate(this,ae[0]+he+ze,ae[1]+he+Ie+Ot/2+$),Ve=ze+Ct+$,ze+=jt,We=Math.max(We,Ot)}),Ze?(G._width=ze+K,G._height=We+H):(G._width=Math.max(ke,Ve)+K,G._height+=We+H)}}G._width=Math.ceil(Math.max(G._width+ae[0],G._titleWidth+2*(he+s.titlePad))),G._height=Math.ceil(Math.max(G._height+ae[1],G._titleHeight+2*(he+s.itemGap))),G._effHeight=Math.min(G._height,G._maxHeight);var dt=R._context.edits,Ft=dt.legendText||dt.legendPosition;z.each(function(Qt){var Ot=m.select(this).select(".legendtoggle"),Ct=Qt[0].height,jt=Qt[0].trace.legendgroup,Nt=M(Qt,G,U);X&&jt!==""&&(Nt=oe[jt]);var Lt=Ft?U:se||Nt;!j&&!ie&&(Lt+=$/2),i.setRect(Ot,0,-Ct/2,Lt,Ct)})}function F(R){var O=R._fullLayout,z=O.legend,G=I(z),Y=D(z);return A.autoMargin(R,"legend",{x:z.x,y:z.y,l:z._width*g[G],r:z._width*d[G],b:z._effHeight*d[Y],t:z._effHeight*g[Y]})}function I(R){return u.isRightAnchor(R)?"right":u.isCenterAnchor(R)?"center":"left"}function D(R){return u.isBottomAnchor(R)?"bottom":u.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(t,N,V){var m=t("../../registry"),u=t("./helpers");N.exports=function(T,e){var a=e._inHover,i=u.isGrouped(e),n=u.isReversed(e),r={},v=[],s=!1,o={},b=0,g=0,d,f;function y(O,z){if(O===""||!u.isGrouped(e)){var G="~~i"+b;v.push(G),r[G]=[z],b++}else v.indexOf(O)===-1?(v.push(O),s=!0,r[O]=[z]):r[O].push(z)}for(d=0;d<T.length;d++){var l=T[d],x=l[0],c=x.trace,M=c.legendgroup;if(!(!a&&(!c.visible||!c.showlegend)))if(m.traceIs(c,"pie-like"))for(o[M]||(o[M]={}),f=0;f<l.length;f++){var w=l[f].label;o[M][w]||(y(M,{label:w,color:l[f].color,i:l[f].i,trace:c,pts:l[f].pts}),o[M][w]=!0,g=Math.max(g,(w||"").length))}else y(M,x),g=Math.max(g,(c.name||"").length)}if(!v.length)return[];var p=!s||!i,_=[];for(d=0;d<v.length;d++){var h=r[v[d]];p?_.push(h[0]):_.push(h)}for(p&&(_=[_]),d=0;d<_.length;d++){var L=1/0;for(f=0;f<_[d].length;f++){var E=_[d][f].trace.legendrank;L>E&&(L=E)}_[d][0]._groupMinRank=L,_[d][0]._preGroupSort=d}var S=function(O,z){return O[0]._groupMinRank-z[0]._groupMinRank||O[0]._preGroupSort-z[0]._preGroupSort},P=function(O,z){return O.trace.legendrank-z.trace.legendrank||O._preSort-z._preSort};for(_.forEach(function(O,z){O[0]._preGroupSort=z}),_.sort(S),d=0;d<_.length;d++){_[d].forEach(function(O,z){O._preSort=z}),_[d].sort(P);var F=_[d][0].trace,I=null;for(f=0;f<_[d].length;f++){var D=_[d][f].trace.legendgrouptitle;if(D&&D.text){I=D,a&&(D.font=e._groupTitleFont);break}}if(n&&_[d].reverse(),I){var R=!1;for(f=0;f<_[d].length;f++)if(m.traceIs(_[d][f].trace,"pie-like")){R=!0;break}_[d].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:e.groupclick==="toggleitem"?!0:F.visible}})}for(f=0;f<_[d].length;f++)_[d][f]=[_[d][f]]}return e._lgroupsLength=_.length,e._maxNameLength=g,_}},{"../../registry":647,"./helpers":423}],422:[function(t,N,V){var m=t("../../lib"),u=t("../../registry"),A=!0;N.exports=function(e,a,i){var n=a._fullLayout;if(a._dragged||a._editing)return;var r=n.legend.itemclick,v=n.legend.itemdoubleclick,s=n.legend.groupclick;i===1&&r==="toggle"&&v==="toggleothers"&&A&&a.data&&a._context.showTips&&m.notifier(m._(a,"Double-click on legend to isolate one trace"),"long"),A=!1;var o;if(i===1?o=r:i===2&&(o=v),!o)return;var b=s==="togglegroup",g=n.hiddenlabels?n.hiddenlabels.slice():[],d=e.data()[0][0];if(d.groupTitle&&d.noClick)return;var f=a._fullData,y=d.trace,l=y.legendgroup,x,c,M,w,p,_,h={},L=[],E=[],S=[];function P($,U,H){var q=L.indexOf($),re=h[U];return re||(re=h[U]=[]),L.indexOf($)===-1&&(L.push($),q=L.length-1),re[q]=H,q}function F($,U){if(!(d.groupTitle&&!b)){var H=$._fullInput;if(u.hasTransform(H,"groupby")){var q=E[H.index];if(!q){var re=u.getTransformIndices(H,"groupby"),Z=re[re.length-1];q=m.keyedContainer(H,"transforms["+Z+"].styles","target","value.visible"),E[H.index]=q}var Q=q.get($._group);Q===void 0&&(Q=!0),Q!==!1&&q.set($._group,U),S[H.index]=P(H.index,"visible",H.visible!==!1)}else{var oe=H.visible===!1?!1:U;P(H.index,"visible",oe)}}}if(u.traceIs(y,"pie-like")){var I=d.label,D=g.indexOf(I);o==="toggle"?D===-1?g.push(I):g.splice(D,1):o==="toggleothers"&&(g=[],a.calcdata[0].forEach(function($){I!==$.label&&g.push($.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===g.length&&D===-1&&(g=[])),u.call("_guiRelayout",a,"hiddenlabels",g)}else{var R=l&&l.length,O=[],z;if(R)for(x=0;x<f.length;x++)z=f[x],!!z.visible&&z.legendgroup===l&&O.push(x);if(o==="toggle"){var G;switch(y.visible){case!0:G="legendonly";break;case!1:G=!1;break;case"legendonly":G=!0;break}if(R)if(b)for(x=0;x<f.length;x++)f[x].visible!==!1&&f[x].legendgroup===l&&F(f[x],G);else F(y,G);else F(y,G)}else if(o==="toggleothers"){var Y,ee,j,X,ie=!0;for(x=0;x<f.length;x++)if(Y=f[x]===y,j=f[x].showlegend!==!0,!(Y||j)&&(ee=R&&f[x].legendgroup===l,!ee&&f[x].visible===!0&&!u.traceIs(f[x],"notLegendIsolatable"))){ie=!1;break}for(x=0;x<f.length;x++)if(f[x].visible!==!1&&!u.traceIs(f[x],"notLegendIsolatable"))switch(y.visible){case"legendonly":F(f[x],!0);break;case!0:X=ie?!0:"legendonly",Y=f[x]===y,j=f[x].showlegend!==!0&&!f[x].legendgroup,ee=Y||R&&f[x].legendgroup===l,F(f[x],ee||j?!0:X);break}}for(x=0;x<E.length;x++)if(M=E[x],!!M){var he=M.constructUpdate(),K=Object.keys(he);for(c=0;c<K.length;c++)w=K[c],_=h[w]=h[w]||[],_[S[x]]=he[w]}for(p=Object.keys(h),x=0;x<p.length;x++)for(w=p[x],c=0;c<L.length;c++)h[w].hasOwnProperty(c)||(h[w][c]=void 0);u.call("_guiRestyle",a,h,L)}}},{"../../lib":515,"../../registry":647}],423:[function(t,N,V){V.isGrouped=function(u){return(u.traceorder||"").indexOf("grouped")!==-1},V.isVertical=function(u){return u.orientation!=="h"},V.isReversed=function(u){return(u.traceorder||"").indexOf("reversed")!==-1}},{}],424:[function(t,N,V){N.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../registry"),A=t("../../lib"),T=A.strTranslate,e=t("../drawing"),a=t("../color"),i=t("../colorscale/helpers").extractOpts,n=t("../../traces/scatter/subtypes"),r=t("../../traces/pie/style_one"),v=t("../../traces/pie/helpers").castOption,s=t("./constants"),o=12,b=5,g=2,d=10,f=5;N.exports=function(M,w,p){var _=w._fullLayout;p||(p=_.legend);var h=p.itemsizing==="constant",L=p.itemwidth,E=(L+s.itemGap*2)/2,S=T(E,0),P=function(K,$,U,H){var q;if(K+1)q=K;else if($&&$.width>0)q=$.width;else return 0;return h?H:Math.min(q,U)};M.each(function(K){var $=m.select(this),U=A.ensureSingle($,"g","layers");U.style("opacity",K[0].trace.opacity);var H=p.valign,q=K[0].lineHeight,re=K[0].height;if(H==="middle"||!q||!re)U.attr("transform",null);else{var Z={top:1,bottom:-1}[H],Q=Z*(.5*(q-re+3));U.attr("transform",T(0,Q))}var oe=U.selectAll("g.legendfill").data([K]);oe.enter().append("g").classed("legendfill",!0);var se=U.selectAll("g.legendlines").data([K]);se.enter().append("g").classed("legendlines",!0);var ae=U.selectAll("g.legendsymbols").data([K]);ae.enter().append("g").classed("legendsymbols",!0),ae.selectAll("g.legendpoints").data([K]).enter().append("g").classed("legendpoints",!0)}).each(he).each(D).each(O).each(R).each(G).each(X).each(j).each(F).each(I).each(Y).each(ee);function F(K){var $=l(K),U=$.showFill,H=$.showLine,q=$.showGradientLine,re=$.showGradientFill,Z=$.anyFill,Q=$.anyLine,oe=K[0],se=oe.trace,ae,le,_e=i(se),fe=_e.colorscale,me=_e.reversescale,xe=function(Le){if(Le.size())if(U)e.fillGroupStyle(Le,w);else{var Ze="legendfill-"+se.uid;e.gradient(Le,w,Ze,y(me),fe,"fill")}},ye=function(Le){if(Le.size()){var Ze="legendline-"+se.uid;e.lineGroupStyle(Le),e.gradient(Le,w,Ze,y(me),fe,"stroke")}},be=n.hasMarkers(se)||!Z?"M5,0":Q?"M5,-2":"M5,-3",ke=m.select(this),De=ke.select(".legendfill").selectAll("path").data(U||re?[K]:[]);if(De.enter().append("path").classed("js-fill",!0),De.exit().remove(),De.attr("d",be+"h"+L+"v6h-"+L+"z").call(xe),H||q){var He=P(void 0,se.line,d,b);le=A.minExtend(se,{line:{width:He}}),ae=[A.minExtend(oe,{trace:le})]}var Ae=ke.select(".legendlines").selectAll("path").data(H||q?[ae]:[]);Ae.enter().append("path").classed("js-line",!0),Ae.exit().remove(),Ae.attr("d",be+(q?"l"+L+",0.0001":"h"+L)).call(H?e.lineGroupStyle:ye)}function I(K){var $=l(K),U=$.anyFill,H=$.anyLine,q=$.showLine,re=$.showMarker,Z=K[0],Q=Z.trace,oe=!re&&!H&&!U&&n.hasText(Q),se,ae;function le(De,He,Ae,Le){var Ze=A.nestedProperty(Q,De).get(),We=A.isArrayOrTypedArray(Ze)&&He?He(Ze):Ze;if(h&&We&&Le!==void 0&&(We=Le),Ae){if(We<Ae[0])return Ae[0];if(We>Ae[1])return Ae[1]}return We}function _e(De){return Z._distinct&&Z.index&&De[Z.index]?De[Z.index]:De[0]}if(re||oe||q){var fe={},me={};if(re){fe.mc=le("marker.color",_e),fe.mx=le("marker.symbol",_e),fe.mo=le("marker.opacity",A.mean,[.2,1]),fe.mlc=le("marker.line.color",_e),fe.mlw=le("marker.line.width",A.mean,[0,5],g),me.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var xe=le("marker.size",A.mean,[2,16],o);fe.ms=xe,me.marker.size=xe}q&&(me.line={width:le("line.width",_e,[0,10],b)}),oe&&(fe.tx="Aa",fe.tp=le("textposition",_e),fe.ts=10,fe.tc=le("textfont.color",_e),fe.tf=le("textfont.family",_e)),se=[A.minExtend(Z,fe)],ae=A.minExtend(Q,me),ae.selectedpoints=null,ae.texttemplate=null}var ye=m.select(this).select("g.legendpoints"),be=ye.selectAll("path.scatterpts").data(re?se:[]);be.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",S),be.exit().remove(),be.call(e.pointStyle,ae,w),re&&(se[0].mrc=3);var ke=ye.selectAll("g.pointtext").data(oe?se:[]);ke.enter().append("g").classed("pointtext",!0).append("text").attr("transform",S),ke.exit().remove(),ke.selectAll("text").call(e.textPointStyle,ae,w)}function D(K){var $=K[0].trace,U=$.type==="waterfall";if(K[0]._distinct&&U){var H=K[0].trace[K[0].dir].marker;return K[0].mc=H.color,K[0].mlw=H.line.width,K[0].mlc=H.line.color,z(K,this,"waterfall")}var q=[];$.visible&&U&&(q=K[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var re=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(q);re.enter().append("path").classed("legendwaterfall",!0).attr("transform",S).style("stroke-miterlimit",1),re.exit().remove(),re.each(function(Z){var Q=m.select(this),oe=$[Z[0]].marker,se=P(void 0,oe.line,f,g);Q.attr("d",Z[1]).style("stroke-width",se+"px").call(a.fill,oe.color),se&&Q.call(a.stroke,oe.line.color)})}function R(K){z(K,this)}function O(K){z(K,this,"funnel")}function z(K,$,U){var H=K[0].trace,q=H.marker||{},re=q.line||{},Z=U?H.visible&&H.type===U:u.traceIs(H,"bar"),Q=m.select($).select("g.legendpoints").selectAll("path.legend"+U).data(Z?[K]:[]);Q.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),Q.exit().remove(),Q.each(function(oe){var se=m.select(this),ae=oe[0],le=P(ae.mlw,q.line,f,g);se.style("stroke-width",le+"px");var _e=ae.mcc;if(!p._inHover&&"mc"in ae){var fe=i(q),me=fe.mid;me===void 0&&(me=(fe.max+fe.min)/2),_e=e.tryColorscale(q,"")(me)}var xe=_e||ae.mc||q.color,ye=q.pattern,be=ye&&e.getPatternAttr(ye.shape,0,"");if(be){var ke=e.getPatternAttr(ye.bgcolor,0,null),De=e.getPatternAttr(ye.fgcolor,0,null),He=ye.fgopacity,Ae=x(ye.size,8,10),Le=x(ye.solidity,.5,1),Ze="legend-"+H.uid;se.call(e.pattern,"legend",w,Ze,be,Ae,Le,_e,ye.fillmode,ke,De,He)}else se.call(a.fill,xe);le&&a.stroke(se,ae.mlc||re.color)})}function G(K){var $=K[0].trace,U=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data($.visible&&u.traceIs($,"box-violin")?[K]:[]);U.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),U.exit().remove(),U.each(function(){var H=m.select(this);if(($.boxpoints==="all"||$.points==="all")&&a.opacity($.fillcolor)===0&&a.opacity(($.line||{}).color)===0){var q=A.minExtend($,{marker:{size:h?o:A.constrain($.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});U.call(e.pointStyle,q,w)}else{var re=P(void 0,$.line,f,g);H.style("stroke-width",re+"px").call(a.fill,$.fillcolor),re&&a.stroke(H,$.line.color)}})}function Y(K){var $=K[0].trace,U=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data($.visible&&$.type==="candlestick"?[K,K]:[]);U.enter().append("path").classed("legendcandle",!0).attr("d",function(H,q){return q?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",S).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(H,q){var re=m.select(this),Z=$[q?"increasing":"decreasing"],Q=P(void 0,Z.line,f,g);re.style("stroke-width",Q+"px").call(a.fill,Z.fillcolor),Q&&a.stroke(re,Z.line.color)})}function ee(K){var $=K[0].trace,U=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data($.visible&&$.type==="ohlc"?[K,K]:[]);U.enter().append("path").classed("legendohlc",!0).attr("d",function(H,q){return q?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",S).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(H,q){var re=m.select(this),Z=$[q?"increasing":"decreasing"],Q=P(void 0,Z.line,f,g);re.style("fill","none").call(e.dashLine,Z.line.dash,Q),Q&&a.stroke(re,Z.line.color)})}function j(K){ie(K,this,"pie")}function X(K){ie(K,this,"funnelarea")}function ie(K,$,U){var H=K[0],q=H.trace,re=U?q.visible&&q.type===U:u.traceIs(q,U),Z=m.select($).select("g.legendpoints").selectAll("path.legend"+U).data(re?[K]:[]);if(Z.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",S),Z.exit().remove(),Z.size()){var Q=(q.marker||{}).line,oe=P(v(Q.width,H.pts),Q,f,g),se=A.minExtend(q,{marker:{line:{width:oe}}});se.marker.line.color=Q.color;var ae=A.minExtend(H,{trace:se});r(Z,ae,se)}}function he(K){var $=K[0].trace,U,H=[];if($.visible)switch($.type){case"histogram2d":case"heatmap":H=[["M-15,-2V4H15V-2Z"]],U=!0;break;case"choropleth":case"choroplethmapbox":H=[["M-6,-6V6H6V-6Z"]],U=!0;break;case"densitymapbox":H=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],U="radial";break;case"cone":H=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],U=!1;break;case"streamtube":H=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],U=!1;break;case"surface":H=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],U=!0;break;case"mesh3d":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!1;break;case"volume":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!0;break;case"isosurface":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],U=!1;break}var q=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(H);q.enter().append("path").classed("legend3dandfriends",!0).attr("transform",S).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(re,Z){var Q=m.select(this),oe=i($),se=oe.colorscale,ae=oe.reversescale,le=function(xe){if(xe.size()){var ye="legendfill-"+$.uid;e.gradient(xe,w,ye,y(ae,U==="radial"),se,"fill")}},_e;if(se){if(!U){var me=se.length;_e=Z===0?se[ae?me-1:0][1]:Z===1?se[ae?0:me-1][1]:se[Math.floor((me-1)/2)][1]}}else{var fe=$.vertexcolor||$.facecolor||$.color;_e=A.isArrayOrTypedArray(fe)?fe[Z]||fe[0]:fe}Q.attr("d",re[0]),_e?Q.call(a.fill,_e):Q.call(le)})}};function y(c,M){var w=M?"radial":"horizontal";return w+(c?"":"reversed")}function l(c){var M=c[0].trace,w=M.contours,p=n.hasLines(M),_=n.hasMarkers(M),h=M.visible&&M.fill&&M.fill!=="none",L=!1,E=!1;if(w){var S=w.coloring;S==="lines"?L=!0:p=S==="none"||S==="heatmap"||w.showlines,w.type==="constraint"?h=w._operation!=="=":(S==="fill"||S==="heatmap")&&(E=!0)}return{showMarker:_,showLine:p,showFill:h,showGradientLine:L,showGradientFill:E,anyLine:p||L,anyFill:h||E}}function x(c,M,w){return c&&A.isArrayOrTypedArray(c)?M:c>w?w:c}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(t,N,V){t("./constants"),N.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(t,N,V){var m=t("../../registry"),u=t("../../plots/plots"),A=t("../../plots/cartesian/axis_ids"),T=t("../../fonts/ploticon"),e=t("../shapes/draw").eraseActiveShape,a=t("../../lib"),i=a._,n=N.exports={};n.toImage={name:"toImage",title:function(c){var M=c._context.toImageButtonOptions||{},w=M.format||"png";return w==="png"?i(c,"Download plot as a png"):i(c,"Download plot")},icon:T.camera,click:function(c){var M=c._context.toImageButtonOptions,w={format:M.format||"png"};a.notifier(i(c,"Taking snapshot - this may take a few seconds"),"long"),w.format!=="svg"&&a.isIE()&&(a.notifier(i(c,"IE only supports svg.  Changing format to svg."),"long"),w.format="svg"),["filename","width","height","scale"].forEach(function(p){p in M&&(w[p]=M[p])}),m.call("downloadImage",c,w).then(function(p){a.notifier(i(c,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){a.notifier(i(c,"Sorry, there was a problem downloading your snapshot!"),"long")})}},n.sendDataToCloud={name:"sendDataToCloud",title:function(c){return i(c,"Edit in Chart Studio")},icon:T.disk,click:function(c){u.sendDataToCloud(c)}},n.editInChartStudio={name:"editInChartStudio",title:function(c){return i(c,"Edit in Chart Studio")},icon:T.pencil,click:function(c){u.sendDataToCloud(c)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(c){return i(c,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:r},n.pan2d={name:"pan2d",_cat:"pan",title:function(c){return i(c,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:r},n.select2d={name:"select2d",_cat:"select",title:function(c){return i(c,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:r},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(c){return i(c,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:r},n.drawclosedpath={name:"drawclosedpath",title:function(c){return i(c,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:r},n.drawopenpath={name:"drawopenpath",title:function(c){return i(c,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:r},n.drawline={name:"drawline",title:function(c){return i(c,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:r},n.drawrect={name:"drawrect",title:function(c){return i(c,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:r},n.drawcircle={name:"drawcircle",title:function(c){return i(c,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:r},n.eraseshape={name:"eraseshape",title:function(c){return i(c,"Erase active shape")},icon:T.eraseshape,click:e},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:r},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:r},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(c){return i(c,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:r},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(c){return i(c,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:r},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(c){return i(c,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:r},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(c){return i(c,"Compare data on hover")},attr:"hovermode",val:function(c){return c._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:r};function r(c,M){var w=M.currentTarget,p=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=c._fullLayout,L={},E=A.list(c,null,!0),S=h._cartesianSpikesEnabled,P,F;if(p==="zoom"){var I=_==="in"?.5:2,D=(1+I)/2,R=(1-I)/2,O;for(F=0;F<E.length;F++)if(P=E[F],!P.fixedrange)if(O=P._name,_==="auto")L[O+".autorange"]=!0;else if(_==="reset"){if(P._rangeInitial===void 0)L[O+".autorange"]=!0;else{var z=P._rangeInitial.slice();L[O+".range[0]"]=z[0],L[O+".range[1]"]=z[1]}P._showSpikeInitial!==void 0&&(L[O+".showspikes"]=P._showSpikeInitial,S==="on"&&!P._showSpikeInitial&&(S="off"))}else{var G=[P.r2l(P.range[0]),P.r2l(P.range[1])],Y=[D*G[0]+R*G[1],D*G[1]+R*G[0]];L[O+".range[0]"]=P.l2r(Y[0]),L[O+".range[1]"]=P.l2r(Y[1])}}else p==="hovermode"&&(_==="x"||_==="y")&&(_=h._isHoriz?"y":"x",w.setAttribute("data-val",_)),L[p]=_;h._cartesianSpikesEnabled=S,m.call("_guiRelayout",c,L)}n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(c){return i(c,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:v},n.pan3d={name:"pan3d",_cat:"pan",title:function(c){return i(c,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:v},n.orbitRotation={name:"orbitRotation",title:function(c){return i(c,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:v},n.tableRotation={name:"tableRotation",title:function(c){return i(c,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:v};function v(c,M){for(var w=M.currentTarget,p=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=c._fullLayout._subplots.gl3d||[],L={},E=p.split("."),S=0;S<h.length;S++)L[h[S]+"."+E[1]]=_;var P=_==="pan"?_:"zoom";L.dragmode=P,m.call("_guiRelayout",c,L)}n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(c){return i(c,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:s},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(c){return i(c,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:s};function s(c,M){for(var w=M.currentTarget,p=w.getAttribute("data-attr"),_=p==="resetLastSave",h=p==="resetDefault",L=c._fullLayout,E=L._subplots.gl3d||[],S={},P=0;P<E.length;P++){var F=E[P],I=F+".camera",D=F+".aspectratio",R=F+".aspectmode",O=L[F]._scene,z;_?(S[I+".up"]=O.viewInitial.up,S[I+".eye"]=O.viewInitial.eye,S[I+".center"]=O.viewInitial.center,z=!0):h&&(S[I+".up"]=null,S[I+".eye"]=null,S[I+".center"]=null,z=!0),z&&(S[D+".x"]=O.viewInitial.aspectratio.x,S[D+".y"]=O.viewInitial.aspectratio.y,S[D+".z"]=O.viewInitial.aspectratio.z,S[R]=O.viewInitial.aspectmode)}m.call("_guiRelayout",c,S)}n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:b};function o(c,M){var w=M.currentTarget,p=w._previousVal,_=c._fullLayout,h=_._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],E={},S={};if(p)S=p,w._previousVal=null;else{for(var P=0;P<h.length;P++){var F=h[P],I=_[F],D=F+".hovermode";E[D]=I.hovermode,S[D]=!1;for(var R=0;R<3;R++){var O=L[R],z=F+"."+O+".showspikes";S[z]=!1,E[z]=I[O].showspikes}}w._previousVal=E}return S}function b(c,M){var w=o(c,M);m.call("_guiRelayout",c,w)}n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:g},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:g},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(c){return i(c,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:g},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:f};function g(c,M){for(var w=M.currentTarget,p=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,h=c._fullLayout,L=h._subplots.geo||[],E=0;E<L.length;E++){var S=L[E],P=h[S];if(p==="zoom"){var F=P.projection.scale,I=_==="in"?2*F:.5*F;m.call("_guiRelayout",c,S+".projection.scale",I)}}p==="reset"&&x(c,"geo")}n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:f},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:f};function d(c){var M=c._fullLayout;return M.hovermode?!1:M._has("cartesian")?M._isHoriz?"y":"x":"closest"}function f(c){var M=d(c);m.call("_guiRelayout",c,"hovermode",M)}n.resetViewSankey={name:"resetSankeyGroup",title:function(c){return i(c,"Reset view")},icon:T.home,click:function(c){for(var M={"node.groups":[],"node.x":[],"node.y":[]},w=0;w<c._fullData.length;w++){var p=c._fullData[w]._viewInitial;M["node.groups"].push(p.node.groups.slice()),M["node.x"].push(p.node.x.slice()),M["node.y"].push(p.node.y.slice())}m.call("restyle",c,M)}},n.toggleHover={name:"toggleHover",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(c,M){var w=o(c,M);w.hovermode=d(c),m.call("_guiRelayout",c,w)}},n.resetViews={name:"resetViews",title:function(c){return i(c,"Reset views")},icon:T.home,click:function(c,M){var w=M.currentTarget;w.setAttribute("data-attr","zoom"),w.setAttribute("data-val","reset"),r(c,M),w.setAttribute("data-attr","resetLastSave"),s(c,M),x(c,"geo"),x(c,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(c){return i(c,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(c){var M=c._fullLayout,w=M._cartesianSpikesEnabled;M._cartesianSpikesEnabled=w==="on"?"off":"on",m.call("_guiRelayout",c,y(c))}};function y(c){for(var M=c._fullLayout,w=M._cartesianSpikesEnabled==="on",p=A.list(c,null,!0),_={},h=0;h<p.length;h++){var L=p[h];_[L._name+".showspikes"]=w?!0:L._showSpikeInitial}return _}n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(c){return i(c,"Reset view")},attr:"reset",icon:T.home,click:function(c){x(c,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l};function l(c,M){for(var w=M.currentTarget,p=w.getAttribute("data-val"),_=c._fullLayout,h=_._subplots.mapbox||[],L=1.05,E={},S=0;S<h.length;S++){var P=h[S],F=_[P].zoom,I=p==="in"?L*F:F/L;E[P+".zoom"]=I}m.call("_guiRelayout",c,E)}function x(c,M){for(var w=c._fullLayout,p=w._subplots[M]||[],_={},h=0;h<p.length;h++)for(var L=p[h],E=w[L]._subplot,S=E.viewInitial,P=Object.keys(S),F=0;F<P.length;F++){var I=P[F];_[L+"."+I]=S[I]}m.call("_guiRelayout",c,_)}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(t,N,V){var m=t("./buttons"),u=Object.keys(m),A=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(A),e=[],a=function(i){if(T.indexOf(i._cat||i.name)===-1){var n=i.name,r=(i._cat||i.name).toLowerCase();e.indexOf(n)===-1&&e.push(n),e.indexOf(r)===-1&&e.push(r)}};u.forEach(function(i){a(m[i])}),e.sort(),N.exports={DRAW_MODES:A,backButtons:T,foreButtons:e}},{"./buttons":427}],429:[function(t,N,V){var m=t("../../lib"),u=t("../color"),A=t("../../plot_api/plot_template"),T=t("./attributes");N.exports=function(a,i){var n=a.modebar||{},r=A.newContainer(i,"modebar");function v(o,b){return m.coerce(n,r,T,o,b)}v("orientation"),v("bgcolor",u.addOpacity(i.paper_bgcolor,.5));var s=u.contrast(u.rgb(i.modebar.bgcolor));v("color",u.addOpacity(s,.3)),v("activecolor",u.addOpacity(s,.7)),v("uirevision",i.uirevision),v("add"),v("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(t,N,V){N.exports={moduleType:"component",name:"modebar",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),manage:t("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(t,N,V){var m=t("../../plots/cartesian/axis_ids"),u=t("../../traces/scatter/subtypes"),A=t("../../registry"),T=t("../fx/helpers").isUnifiedHover,e=t("./modebar"),a=t("./buttons"),i=t("./constants").DRAW_MODES,n=t("../../lib").extendDeep;N.exports=function(f){var y=f._fullLayout,l=f._context,x=y._modeBar;if(!l.displayModeBar&&!l.watermark){x&&(x.destroy(),delete y._modeBar);return}if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var c=l.modeBarButtons,M;Array.isArray(c)&&c.length?M=g(c):!l.displayModeBar&&l.watermark?M=[]:M=r(f),x?x.update(f,M):y._modeBar=e(f,M)};function r(d){var f=d._fullLayout,y=d._fullData,l=d._context;function x(Z,Q){if(typeof Q=="string"){if(Q.toLowerCase()===Z.toLowerCase())return!0}else{var oe=Q.name,se=Q._cat||Q.name;if(oe===Z||se===Z.toLowerCase())return!0}return!1}var c=f.modebar.add;typeof c=="string"&&(c=[c]);var M=f.modebar.remove;typeof M=="string"&&(M=[M]);var w=l.modeBarButtonsToAdd.concat(c.filter(function(Z){for(var Q=0;Q<l.modeBarButtonsToRemove.length;Q++)if(x(Z,l.modeBarButtonsToRemove[Q]))return!1;return!0})),p=l.modeBarButtonsToRemove.concat(M.filter(function(Z){for(var Q=0;Q<l.modeBarButtonsToAdd.length;Q++)if(x(Z,l.modeBarButtonsToAdd[Q]))return!1;return!0})),_=f._has("cartesian"),h=f._has("gl3d"),L=f._has("geo"),E=f._has("pie"),S=f._has("funnelarea"),P=f._has("gl2d"),F=f._has("ternary"),I=f._has("mapbox"),D=f._has("polar"),R=f._has("smith"),O=f._has("sankey"),z=v(f),G=T(f.hovermode),Y=[];function ee(Z){if(!!Z.length){for(var Q=[],oe=0;oe<Z.length;oe++){for(var se=Z[oe],ae=a[se],le=ae.name.toLowerCase(),_e=(ae._cat||ae.name).toLowerCase(),fe=!1,me=0;me<p.length;me++){var xe=p[me].toLowerCase();if(xe===le||xe===_e){fe=!0;break}}fe||Q.push(a[se])}Y.push(Q)}}var j=["toImage"];l.showEditInChartStudio?j.push("editInChartStudio"):l.showSendToCloud&&j.push("sendDataToCloud"),ee(j);var X=[],ie=[],he=[],K=[];(_||P||E||S||F)+L+h+I+D+R>1?(ie=["toggleHover"],he=["resetViews"]):L?(X=["zoomInGeo","zoomOutGeo"],ie=["hoverClosestGeo"],he=["resetGeo"]):h?(ie=["hoverClosest3d"],he=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(X=["zoomInMapbox","zoomOutMapbox"],ie=["toggleHover"],he=["resetViewMapbox"]):P?ie=["hoverClosestGl2d"]:E?ie=["hoverClosestPie"]:O?(ie=["hoverClosestCartesian","hoverCompareCartesian"],he=["resetViewSankey"]):ie=["toggleHover"],_&&(ie=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(o(y)||G)&&(ie=[]),(_||P)&&!z&&(X=["zoomIn2d","zoomOut2d","autoScale2d"],he[0]!=="resetViews"&&(he=["resetScale2d"])),h?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(_||P)&&!z||F?K=["zoom2d","pan2d"]:I||L?K=["pan2d"]:D&&(K=["zoom2d"]),s(y)&&K.push("select2d","lasso2d");var $=[],U=function(Z){$.indexOf(Z)===-1&&ie.indexOf(Z)!==-1&&$.push(Z)};if(Array.isArray(w)){for(var H=[],q=0;q<w.length;q++){var re=w[q];typeof re=="string"?(re=re.toLowerCase(),i.indexOf(re)!==-1?(f._has("mapbox")||f._has("cartesian"))&&K.push(re):re==="togglespikelines"?U("toggleSpikelines"):re==="togglehover"?U("toggleHover"):re==="hovercompare"?U("hoverCompareCartesian"):re==="hoverclosest"?(U("hoverClosestCartesian"),U("hoverClosestGeo"),U("hoverClosest3d"),U("hoverClosestGl2d"),U("hoverClosestPie")):re==="v1hovermode"&&(U("toggleHover"),U("hoverClosestCartesian"),U("hoverCompareCartesian"),U("hoverClosestGeo"),U("hoverClosest3d"),U("hoverClosestGl2d"),U("hoverClosestPie"))):H.push(re)}w=H}return ee(K),ee(X.concat(he)),ee($),b(Y,w)}function v(d){for(var f=m.list({_fullLayout:d},null,!0),y=0;y<f.length;y++)if(!f[y].fixedrange)return!1;return!0}function s(d){for(var f=!1,y=0;y<d.length&&!f;y++){var l=d[y];!l._module||!l._module.selectPoints||(A.traceIs(l,"scatter-like")?(u.hasMarkers(l)||u.hasText(l))&&(f=!0):A.traceIs(l,"box-violin")?(l.boxpoints==="all"||l.points==="all")&&(f=!0):f=!0)}return f}function o(d){for(var f=0;f<d.length;f++)if(!A.traceIs(d[f],"noHover"))return!1;return!0}function b(d,f){if(f.length)if(Array.isArray(f[0]))for(var y=0;y<f.length;y++)d.push(f[y]);else d.push(f);return d}function g(d){for(var f=n([],d),y=0;y<f.length;y++)for(var l=f[y],x=0;x<l.length;x++){var c=l[x];if(typeof c=="string")if(a[c]!==void 0)f[y][x]=a[c];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return f}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("../../lib"),T=t("../../fonts/ploticon"),e=t("../../version").version,a=new DOMParser;function i(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var n=i.prototype;n.update=function(s,o){this.graphInfo=s;var b=this.graphInfo._context,g=this.graphInfo._fullLayout,d="modebar-"+g._uid;this.element.setAttribute("id",d),this._uid=d,this.element.className="modebar",b.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),g.modebar.orientation==="v"&&(this.element.className+=" vertical",o=o.reverse());var f=g.modebar,y=b.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";A.deleteRelatedStyleRule(d),A.addRelatedStyleRule(d,y+"#"+d+" .modebar-group","background-color: "+f.bgcolor),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+f.color),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+f.activecolor),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+f.activecolor);var l=!this.hasButtons(o),x=this.hasLogo!==b.displaylogo,c=this.locale!==b.locale;if(this.locale=b.locale,(l||x||c)&&(this.removeAllButtons(),this.updateButtons(o),b.watermark||b.displaylogo)){var M=this.getLogo();b.watermark&&(M.className=M.className+" watermark"),g.modebar.orientation==="v"?this.element.insertBefore(M,this.element.childNodes[0]):this.element.appendChild(M),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(s){var o=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(b){var g=o.createGroup();b.forEach(function(d){var f=d.name;if(!f)throw new Error("must provide button 'name' in button config");if(o.buttonsNames.indexOf(f)!==-1)throw new Error("button name '"+f+"' is taken");o.buttonsNames.push(f);var y=o.createButton(d);o.buttonElements.push(y),g.appendChild(y)}),o.element.appendChild(g)})},n.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},n.createButton=function(s){var o=this,b=document.createElement("a");b.setAttribute("rel","tooltip"),b.className="modebar-btn";var g=s.title;g===void 0?g=s.name:typeof g=="function"&&(g=g(this.graphInfo)),(g||g===0)&&b.setAttribute("data-title",g),s.attr!==void 0&&b.setAttribute("data-attr",s.attr);var d=s.val;d!==void 0&&(typeof d=="function"&&(d=d(this.graphInfo)),b.setAttribute("data-val",d));var f=s.click;if(typeof f!="function")throw new Error("must provide button 'click' function in button config");b.addEventListener("click",function(l){s.click(o.graphInfo,l),o.updateActiveButton(l.currentTarget)}),b.setAttribute("data-toggle",s.toggle||!1),s.toggle&&m.select(b).classed("active",!0);var y=s.icon;return typeof y=="function"?b.appendChild(y()):b.appendChild(this.createIcon(y||T.question)),b.setAttribute("data-gravity",s.gravity||"n"),b},n.createIcon=function(s){var o=u(s.height)?Number(s.height):s.ascent-s.descent,b="http://www.w3.org/2000/svg",g;if(s.path){g=document.createElementNS(b,"svg"),g.setAttribute("viewBox",[0,0,s.width,o].join(" ")),g.setAttribute("class","icon");var d=document.createElementNS(b,"path");d.setAttribute("d",s.path),s.transform?d.setAttribute("transform",s.transform):s.ascent!==void 0&&d.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),g.appendChild(d)}if(s.svg){var f=a.parseFromString(s.svg,"application/xml");g=f.childNodes[0]}return g.setAttribute("height","1em"),g.setAttribute("width","1em"),g},n.updateActiveButton=function(s){var o=this.graphInfo._fullLayout,b=s!==void 0?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(g){var d=g.getAttribute("data-val")||!0,f=g.getAttribute("data-attr"),y=g.getAttribute("data-toggle")==="true",l=m.select(g);if(y)f===b&&l.classed("active",!l.classed("active"));else{var x=f===null?f:A.nestedProperty(o,f).get();l.classed("active",x===d)}})},n.hasButtons=function(s){var o=this.buttons;if(!o||s.length!==o.length)return!1;for(var b=0;b<s.length;++b){if(s[b].length!==o[b].length)return!1;for(var g=0;g<s[b].length;g++)if(s[b][g].name!==o[b][g].name)return!1}return!0};function r(s){return s+" (v"+e+")"}n.getLogo=function(){var s=this.createGroup(),o=document.createElement("a");return o.href="https://plotly.com/",o.target="_blank",o.setAttribute("data-title",r(A._(this.graphInfo,"Produced with Plotly.js"))),o.className="modebar-btn plotlyjsicon modebar-btn--logo",o.appendChild(this.createIcon(T.newplotlylogo)),s.appendChild(o),s},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){A.removeElement(this.container.querySelector(".modebar")),A.deleteRelatedStyleRule(this._uid)};function v(s,o){var b=s._fullLayout,g=new i({graphInfo:s,container:b._modebardiv.node(),buttons:o});return b._privateplot&&m.select(g.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),g}N.exports=v},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(t,N,V){var m=t("../../plots/font_attributes"),u=t("../color/attributes"),A=t("../../plot_api/plot_template").templatedArray,T=A("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});N.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:m({editType:"plot"}),bgcolor:{valType:"color",dflt:u.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:u.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(t,N,V){N.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(t,N,V){var m=t("../../lib"),u=t("../color"),A=t("../../plot_api/plot_template"),T=t("../../plots/array_container_defaults"),e=t("./attributes"),a=t("./constants");N.exports=function(v,s,o,b,g){var d=v.rangeselector||{},f=A.newContainer(s,"rangeselector");function y(w,p){return m.coerce(d,f,e,w,p)}var l=T(d,f,{name:"buttons",handleItemDefaults:i,calendar:g}),x=y("visible",l.length>0);if(x){var c=n(s,o,b);y("x",c[0]),y("y",c[1]),m.noneOrAll(v,s,["x","y"]),y("xanchor"),y("yanchor"),m.coerceFont(y,"font",o.font);var M=y("bgcolor");y("activecolor",u.contrast(M,a.lightAmount,a.darkAmount)),y("bordercolor"),y("borderwidth")}};function i(r,v,s,o){var b=o.calendar;function g(y,l){return m.coerce(r,v,e.buttons,y,l)}var d=g("visible");if(d){var f=g("step");f!=="all"&&(b&&b!=="gregorian"&&(f==="month"||f==="year")?v.stepmode="backward":g("stepmode"),g("count")),g("label")}}function n(r,v,s){for(var o=s.filter(function(f){return v[f].anchor===r._id}),b=0,g=0;g<o.length;g++){var d=v[o[g]].domain;d&&(b=Math.max(d[1],b))}return[r.domain[0],b+a.yPad]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../registry"),A=t("../../plots/plots"),T=t("../color"),e=t("../drawing"),a=t("../../lib"),i=a.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../plots/cartesian/axis_ids"),v=t("../../constants/alignment"),s=v.LINE_SPACING,o=v.FROM_TL,b=v.FROM_BR,g=t("./constants"),d=t("./get_update_object");N.exports=function(h){var L=h._fullLayout,E=L._infolayer.selectAll(".rangeselector").data(f(h),y);E.enter().append("g").classed("rangeselector",!0),E.exit().remove(),E.style({cursor:"pointer","pointer-events":"all"}),E.each(function(S){var P=m.select(this),F=S,I=F.rangeselector,D=P.selectAll("g.button").data(a.filterVisible(I.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var O=m.select(this),z=d(F,R);R._isActive=l(F,R,z),O.call(x,I,R),O.call(M,I,R,h),O.on("click",function(){h._dragged||u.call("_guiRelayout",h,z)}),O.on("mouseover",function(){R._isHovered=!0,O.call(x,I,R)}),O.on("mouseout",function(){R._isHovered=!1,O.call(x,I,R)})}),p(h,D,I,F._name,P)})};function f(_){for(var h=r.list(_,"x",!0),L=[],E=0;E<h.length;E++){var S=h[E];S.rangeselector&&S.rangeselector.visible&&L.push(S)}return L}function y(_){return _._id}function l(_,h,L){if(h.step==="all")return _.autorange===!0;var E=Object.keys(L);return _.range[0]===L[E[0]]&&_.range[1]===L[E[1]]}function x(_,h,L){var E=a.ensureSingle(_,"rect","selector-rect",function(S){S.attr("shape-rendering","crispEdges")});E.attr({rx:g.rx,ry:g.ry}),E.call(T.stroke,h.bordercolor).call(T.fill,c(h,L)).style("stroke-width",h.borderwidth+"px")}function c(_,h){return h._isActive||h._isHovered?_.activecolor:_.bgcolor}function M(_,h,L,E){function S(F){n.convertToTspans(F,E)}var P=a.ensureSingle(_,"text","selector-text",function(F){F.attr("text-anchor","middle")});P.call(e.font,h.font).text(w(L,E._fullLayout._meta)).call(S)}function w(_,h){return _.label?h?a.templateString(_.label,h):_.label:_.step==="all"?"all":_.count+_.step.charAt(0)}function p(_,h,L,E,S){var P=0,F=0,I=L.borderwidth;h.each(function(){var Y=m.select(this),ee=Y.select(".selector-text"),j=L.font.size*s,X=Math.max(j*n.lineCount(ee),16)+3;F=Math.max(F,X)}),h.each(function(){var Y=m.select(this),ee=Y.select(".selector-rect"),j=Y.select(".selector-text"),X=j.node()&&e.bBox(j.node()).width,ie=L.font.size*s,he=n.lineCount(j),K=Math.max(X+10,g.minButtonWidth);Y.attr("transform",i(I+P,I)),ee.attr({x:0,y:0,width:K,height:F}),n.positionText(j,K/2,F/2-(he-1)*ie/2+3),P+=K+5});var D=_._fullLayout._size,R=D.l+D.w*L.x,O=D.t+D.h*(1-L.y),z="left";a.isRightAnchor(L)&&(R-=P,z="right"),a.isCenterAnchor(L)&&(R-=P/2,z="center");var G="top";a.isBottomAnchor(L)&&(O-=F,G="bottom"),a.isMiddleAnchor(L)&&(O-=F/2,G="middle"),P=Math.ceil(P),F=Math.ceil(F),R=Math.round(R),O=Math.round(O),A.autoMargin(_,E+"-range-selector",{x:L.x,y:L.y,l:P*o[z],r:P*b[z],b:F*b[G],t:F*o[G]}),S.attr("transform",i(R,O))}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(t,N,V){var m=t("d3-time"),u=t("../../lib").titleCase;N.exports=function(e,a){var i=e._name,n={};if(a.step==="all")n[i+".autorange"]=!0;else{var r=A(e,a);n[i+".range[0]"]=r[0],n[i+".range[1]"]=r[1]}return n};function A(T,e){var a=T.range,i=new Date(T.r2l(a[1])),n=e.step,r=m["utc"+u(n)],v=e.count,s;switch(e.stepmode){case"backward":s=T.l2r(+r.offset(i,-v));break;case"todate":var o=r.offset(i,-v);s=T.l2r(+r.ceil(o));break}var b=a[1];return[s,b]}},{"../../lib":515,"d3-time":122}],438:[function(t,N,V){N.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(t,N,V){var m=t("../color/attributes");N.exports={bgcolor:{valType:"color",dflt:m.background,editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(t,N,V){var m=t("../../plots/cartesian/axis_ids").list,u=t("../../plots/cartesian/autorange").getAutoRange,A=t("./constants");N.exports=function(e){for(var a=m(e,"x",!0),i=0;i<a.length;i++){var n=a[i],r=n[A.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=u(e,n))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(t,N,V){N.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(t,N,V){var m=t("../../lib"),u=t("../../plot_api/plot_template"),A=t("../../plots/cartesian/axis_ids"),T=t("./attributes"),e=t("./oppaxis_attributes");N.exports=function(i,n,r){var v=i[r],s=n[r];if(!(v.rangeslider||n._requestRangeslider[s._id]))return;m.isPlainObject(v.rangeslider)||(v.rangeslider={});var o=v.rangeslider,b=u.newContainer(s,"rangeslider");function g(E,S){return m.coerce(o,b,T,E,S)}var d,f;function y(E,S){return m.coerce(d,f,e,E,S)}var l=g("visible");if(!!l){g("bgcolor",n.plot_bgcolor),g("bordercolor"),g("borderwidth"),g("thickness"),g("autorange",!s.isValidRange(o.range)),g("range");var x=n._subplots;if(x)for(var c=x.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===A.name2id(r)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),M=m.simpleMap(c,A.id2name),w=0;w<M.length;w++){var p=M[w];d=o[p]||{},f=u.newContainer(b,p,"yaxis");var _=n[p],h;d.range&&_.isValidRange(d.range)&&(h="fixed");var L=y("rangemode",h);L!=="match"&&y("range",_.range.slice())}b._input=o}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../registry"),A=t("../../plots/plots"),T=t("../../lib"),e=T.strTranslate,a=t("../drawing"),i=t("../color"),n=t("../titles"),r=t("../../plots/cartesian"),v=t("../../plots/cartesian/axis_ids"),s=t("../dragelement"),o=t("../../lib/setcursor"),b=t("./constants");N.exports=function(_){for(var h=_._fullLayout,L=h._rangeSliderData,E=0;E<L.length;E++){var S=L[E][b.name];S._clipId=S._id+"-"+h._uid}function P(I){return I._name}var F=h._infolayer.selectAll("g."+b.containerClassName).data(L,P);F.exit().each(function(I){var D=I[b.name];h._topdefs.select("#"+D._clipId).remove()}).remove(),L.length!==0&&(F.enter().append("g").classed(b.containerClassName,!0).attr("pointer-events","all"),F.each(function(I){var D=m.select(this),R=I[b.name],O=h[v.id2name(I.anchor)],z=R[v.id2name(I.anchor)];if(R.range){var G=T.simpleMap(R.range,I.r2l),Y=T.simpleMap(I.range,I.r2l),ee;Y[0]<Y[1]?ee=[Math.min(G[0],Y[0]),Math.max(G[1],Y[1])]:ee=[Math.max(G[0],Y[0]),Math.min(G[1],Y[1])],R.range=R._input.range=T.simpleMap(ee,I.l2r)}I.cleanRange("rangeslider.range");var j=h._size,X=I.domain;R._width=j.w*(X[1]-X[0]);var ie=Math.round(j.l+j.w*X[0]),he=Math.round(j.t+j.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+R._offsetShift+b.extraPad);D.attr("transform",e(ie,he)),R._rl=T.simpleMap(R.range,I.r2l);var K=R._rl[0],$=R._rl[1],U=$-K;if(R.p2d=function(_e){return _e/R._width*U+K},R.d2p=function(_e){return(_e-K)/U*R._width},I.rangebreaks){var H=I.locateBreaks(K,$);if(H.length){var q,re,Z=0;for(q=0;q<H.length;q++)re=H[q],Z+=re.max-re.min;var Q=R._width/($-K-Z),oe=[-Q*K];for(q=0;q<H.length;q++)re=H[q],oe.push(oe[oe.length-1]-Q*(re.max-re.min));for(R.d2p=function(_e){for(var fe=oe[0],me=0;me<H.length;me++){var xe=H[me];if(_e>=xe.max)fe=oe[me+1];else if(_e<xe.min)break}return fe+Q*_e},q=0;q<H.length;q++)re=H[q],re.pmin=R.d2p(re.min),re.pmax=R.d2p(re.max);R.p2d=function(_e){for(var fe=oe[0],me=0;me<H.length;me++){var xe=H[me];if(_e>=xe.pmax)fe=oe[me+1];else if(_e<xe.pmin)break}return(_e-fe)/Q}}}if(z.rangemode!=="match"){var se=O.r2l(z.range[0]),ae=O.r2l(z.range[1]),le=ae-se;R.d2pOppAxis=function(_e){return(_e-se)/le*R._height}}D.call(y,_,I,R).call(l,_,I,R).call(x,_,I,R).call(M,_,I,R,z).call(w,_,I,R).call(p,_,I,R),g(D,_,I,R),f(D,_,I,R,O,z),I.side==="bottom"&&n.draw(_,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:h._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:he+R._height+R._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function g(_,h,L,E){if(h._context.staticPlot)return;var S=_.select("rect."+b.slideBoxClassName).node(),P=_.select("rect."+b.grabAreaMinClassName).node(),F=_.select("rect."+b.grabAreaMaxClassName).node();function I(){var D=m.event,R=D.target,O=D.clientX||D.touches[0].clientX,z=O-_.node().getBoundingClientRect().left,G=E.d2p(L._rl[0]),Y=E.d2p(L._rl[1]),ee=s.coverSlip();this.addEventListener("touchmove",j),this.addEventListener("touchend",X),ee.addEventListener("mousemove",j),ee.addEventListener("mouseup",X);function j(ie){var he=ie.clientX||ie.touches[0].clientX,K=+he-O,$,U,H;switch(R){case S:H="ew-resize",$=G+K,U=Y+K;break;case P:H="col-resize",$=G+K,U=Y;break;case F:H="col-resize",$=G,U=Y+K;break;default:H="ew-resize",$=z,U=z+K;break}if(U<$){var q=U;U=$,$=q}E._pixelMin=$,E._pixelMax=U,o(m.select(ee),H),d(_,h,L,E)}function X(){ee.removeEventListener("mousemove",j),ee.removeEventListener("mouseup",X),this.removeEventListener("touchmove",j),this.removeEventListener("touchend",X),T.removeElement(ee)}}_.on("mousedown",I),_.on("touchstart",I)}function d(_,h,L,E){function S(I){return L.l2r(T.constrain(I,E._rl[0],E._rl[1]))}var P=S(E.p2d(E._pixelMin)),F=S(E.p2d(E._pixelMax));window.requestAnimationFrame(function(){u.call("_guiRelayout",h,L._name+".range",[P,F])})}function f(_,h,L,E,S,P){var F=b.handleWidth/2;function I(ie){return T.constrain(ie,0,E._width)}function D(ie){return T.constrain(ie,0,E._height)}function R(ie){return T.constrain(ie,-F,E._width+F)}var O=I(E.d2p(L._rl[0])),z=I(E.d2p(L._rl[1]));if(_.select("rect."+b.slideBoxClassName).attr("x",O).attr("width",z-O),_.select("rect."+b.maskMinClassName).attr("width",O),_.select("rect."+b.maskMaxClassName).attr("x",z).attr("width",E._width-z),P.rangemode!=="match"){var G=E._height-D(E.d2pOppAxis(S._rl[1])),Y=E._height-D(E.d2pOppAxis(S._rl[0]));_.select("rect."+b.maskMinOppAxisClassName).attr("x",O).attr("height",G).attr("width",z-O),_.select("rect."+b.maskMaxOppAxisClassName).attr("x",O).attr("y",Y).attr("height",E._height-Y).attr("width",z-O),_.select("rect."+b.slideBoxClassName).attr("y",G).attr("height",Y-G)}var ee=.5,j=Math.round(R(O-F))-ee,X=Math.round(R(z-F))+ee;_.select("g."+b.grabberMinClassName).attr("transform",e(j,ee)),_.select("g."+b.grabberMaxClassName).attr("transform",e(X,ee))}function y(_,h,L,E){var S=T.ensureSingle(_,"rect",b.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=E.borderwidth%2===0?E.borderwidth:E.borderwidth-1,F=-E._offsetShift,I=a.crispRound(h,E.borderwidth);S.attr({width:E._width+P,height:E._height+P,transform:e(F,F),"stroke-width":I}).call(i.stroke,E.bordercolor).call(i.fill,E.bgcolor)}function l(_,h,L,E){var S=h._fullLayout,P=T.ensureSingleById(S._topdefs,"clipPath",E._clipId,function(F){F.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:E._width,height:E._height})}function x(_,h,L,E){var S=h.calcdata,P=_.selectAll("g."+b.rangePlotClassName).data(L._subplotsWith,T.identity);P.enter().append("g").attr("class",function(I){return b.rangePlotClassName+" "+I}).call(a.setClipUrl,E._clipId,h),P.order(),P.exit().remove();var F;P.each(function(I,D){var R=m.select(this),O=D===0,z=v.getFromId(h,I,"y"),G=z._name,Y=E[G],ee={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:E.range.slice(),calendar:L.calendar},width:E._width,height:E._height,margin:{t:0,b:0,l:0,r:0}},_context:h._context};L.rangebreaks&&(ee.layout.xaxis.rangebreaks=L.rangebreaks),ee.layout[G]={type:z.type,domain:[0,1],range:Y.rangemode!=="match"?Y.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(ee.layout[G].rangebreaks=z.rangebreaks),A.supplyDefaults(ee);var j=ee._fullLayout.xaxis,X=ee._fullLayout[G];j.clearCalc(),j.setScale(),X.clearCalc(),X.setScale();var ie={id:I,plotgroup:R,xaxis:j,yaxis:X,isRangePlot:!0};O?F=ie:(ie.mainplot="xy",ie.mainplotinfo=F),r.rangePlot(h,ie,c(S,I))})}function c(_,h){for(var L=[],E=0;E<_.length;E++){var S=_[E],P=S[0].trace;P.xaxis+P.yaxis===h&&L.push(S)}return L}function M(_,h,L,E,S){var P=T.ensureSingle(_,"rect",b.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",E._height).call(i.fill,b.maskColor);var F=T.ensureSingle(_,"rect",b.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(F.attr("height",E._height).call(i.fill,b.maskColor),S.rangemode!=="match"){var I=T.ensureSingle(_,"rect",b.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",E._width).call(i.fill,b.maskOppAxisColor);var D=T.ensureSingle(_,"rect",b.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",E._width).style("border-top",b.maskOppBorder).call(i.fill,b.maskOppAxisColor)}}function w(_,h,L,E){if(!h._context.staticPlot){var S=T.ensureSingle(_,"rect",b.slideBoxClassName,function(P){P.attr({y:0,cursor:b.slideBoxCursor,"shape-rendering":"crispEdges"})});S.attr({height:E._height,fill:b.slideBoxFill})}}function p(_,h,L,E){var S=T.ensureSingle(_,"g",b.grabberMinClassName),P=T.ensureSingle(_,"g",b.grabberMaxClassName),F={x:0,width:b.handleWidth,rx:b.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":b.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(E._height/4),height:Math.round(E._height/2)},D=T.ensureSingle(S,"rect",b.handleMinClassName,function(Y){Y.attr(F)});D.attr(I);var R=T.ensureSingle(P,"rect",b.handleMaxClassName,function(Y){Y.attr(F)});R.attr(I);var O={width:b.grabAreaWidth,x:0,y:0,fill:b.grabAreaFill,cursor:h._context.staticPlot?void 0:b.grabAreaCursor},z=T.ensureSingle(S,"rect",b.grabAreaMinClassName,function(Y){Y.attr(O)});z.attr("height",E._height);var G=T.ensureSingle(P,"rect",b.grabAreaMaxClassName,function(Y){Y.attr(O)});G.attr("height",E._height)}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(t,N,V){var m=t("../../plots/cartesian/axis_ids"),u=t("../../lib/svg_text_utils"),A=t("./constants"),T=t("../../constants/alignment").LINE_SPACING,e=A.name;function a(i){var n=i&&i[e];return n&&n.visible}V.isVisible=a,V.makeData=function(i){var n=m.list({_fullLayout:i},"x",!0),r=i.margin,v=[];if(!i._has("gl2d"))for(var s=0;s<n.length;s++){var o=n[s];if(a(o)){v.push(o);var b=o[e];b._id=e+o._id,b._height=(i.height-r.b-r.t)*b.thickness,b._offsetShift=Math.floor(b.borderwidth/2)}}i._rangeSliderData=v},V.autoMarginOpts=function(i,n){var r=i._fullLayout,v=n[e],s=n._id.charAt(0),o=0,b=0;if(n.side==="bottom"&&(o=n._depth,n.title.text!==r._dfltTitle[s])){b=1.5*n.title.font.size+10+v._offsetShift;var g=(n.title.text.match(u.BR_TAG_ALL)||[]).length;b+=g*n.title.font.size*T}return{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:v._height+o+Math.max(r.margin.b,b),pad:A.extraPad+v._offsetShift*2}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("./oppaxis_attributes"),T=t("./helpers");N.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:m.extendFlat({},u,{yaxis:A})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(t,N,V){N.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(t,N,V){var m=t("../annotations/attributes"),u=t("../../traces/scatter/attributes").line,A=t("../drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),N.exports=e(a("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},m.xref,{}),yref:T({},m.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:u.color,width:T({},u.width,{min:1,dflt:1}),dash:T({},A,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(t,N,V){N.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e=t("../shapes/helpers");N.exports=function(n,r){A(n,r,{name:"selections",handleItemDefaults:a});for(var v=r.selections,s=0;s<v.length;s++){var o=v[s];!o||o.path===void 0&&(o.x0===void 0||o.x1===void 0||o.y0===void 0||o.y1===void 0)&&(r.selections[s]=null)}};function a(i,n,r){function v(P,F){return m.coerce(i,n,T,P,F)}var s=v("path"),o=s?"path":"rect",b=v("type",o),g=b!=="path";g&&delete n.path,v("opacity"),v("line.color"),v("line.width"),v("line.dash");for(var d=["x","y"],f=0;f<2;f++){var y=d[f],l={_fullLayout:r},x,c,M,w=u.coerceRef(i,n,l,y);if(x=u.getFromId(l,w),x._selectionIndices.push(n._index),M=e.rangeToShapePosition(x),c=e.shapePositionToRange(x),g){var p=y+"0",_=y+"1",h=i[p],L=i[_];i[p]=c(i[p],!0),i[_]=c(i[_],!0),u.coercePosition(n,l,v,w,p),u.coercePosition(n,l,v,w,_);var E=n[p],S=n[_];E!==void 0&&S!==void 0&&(n[p]=M(E),n[_]=M(S),i[p]=h,i[_]=L)}}g&&m.noneOrAll(i,n,["x0","x1","y0","y1"])}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(t,N,V){var m=t("../shapes/draw_newshape/helpers").readPaths,u=t("../shapes/display_outlines"),A=t("../shapes/handle_outline").clearOutlineControllers,T=t("../color"),e=t("../drawing"),a=t("../../plot_api/plot_template").arrayEditor,i=t("../shapes/helpers"),n=i.getPathString;N.exports={draw:r,drawOne:s,activateLastSelection:g};function r(f){var y=f._fullLayout;A(f),y._selectionLayer.selectAll("path").remove();for(var l in y._plots){var x=y._plots[l].selectionLayer;x&&x.selectAll("path").remove()}for(var c=0;c<y.selections.length;c++)s(f,c)}function v(f){return f._context.editSelection}function s(f,y){f._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+y+'"]').remove();var l=i.makeSelectionsOptionsAndPlotinfo(f,y),x=l.options,c=l.plotinfo;if(!x._input)return;M(f._fullLayout._selectionLayer);function M(w){var p=n(f,x),_={"data-index":y,"fill-rule":"evenodd",d:p},h=x.opacity,L="rgba(0,0,0,0)",E=x.line.color||T.contrast(f._fullLayout.plot_bgcolor),S=x.line.width,P=x.line.dash;S||(S=5,P="solid");var F=v(f)&&f._fullLayout._activeSelectionIndex===y;F&&(L=f._fullLayout.activeselection.fillcolor,h=f._fullLayout.activeselection.opacity);for(var I=[],D=1;D>=0;D--){var R=w.append("path").attr(_).style("opacity",D?.1:h).call(T.stroke,E).call(T.fill,L).call(e.dashLine,D?"solid":P,D?4+S:S);if(o(R,f,x),F){var O=a(f.layout,"selections",x);R.style({cursor:"move"});var z={element:R.node(),plotinfo:c,gd:f,editHelpers:O,isActiveSelection:!0},G=m(p,f);u(G,R,z)}else R.style("pointer-events",D?"all":"none");I[D]=R}var Y=I[0],ee=I[1];ee.node().addEventListener("click",function(){return b(f,Y)})}}function o(f,y,l){var x=l.xref+l.yref;e.setClipUrl(f,"clip"+y._fullLayout._uid+x,y)}function b(f,y){if(!!v(f)){var l=y.node(),x=+l.getAttribute("data-index");if(x>=0){if(x===f._fullLayout._activeSelectionIndex){d(f);return}f._fullLayout._activeSelectionIndex=x,f._fullLayout._deactivateSelection=d,r(f)}}}function g(f){if(!!v(f)){var y=f._fullLayout.selections.length-1;f._fullLayout._activeSelectionIndex=y,f._fullLayout._deactivateSelection=d,r(f)}}function d(f){if(!!v(f)){var y=f._fullLayout._activeSelectionIndex;y>=0&&(A(f),delete f._fullLayout._activeSelectionIndex,r(f))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(t,N,V){var m=t("../../drawing/attributes").dash,u=t("../../../lib/extend").extendFlat;N.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:u({},m,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(t,N,V){N.exports=function(u,A,T){T("newselection.mode");var e=T("newselection.line.width");e&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},{}],453:[function(t,N,V){var m=t("../../dragelement/helpers"),u=m.selectMode,A=t("../../shapes/handle_outline"),T=A.clearOutline,e=t("../../shapes/draw_newshape/helpers"),a=e.readPaths,i=e.writePaths,n=e.fixDatesForPaths;N.exports=function(v,s){if(!!v.length){var o=v[0][0];if(!!o){var b=o.getAttribute("d"),g=s.gd,d=g._fullLayout.newselection,f=s.plotinfo,y=f.xaxis,l=f.yaxis,x=s.isActiveSelection,c=s.dragmode,M=(g.layout||{}).selections||[];if(!u(c)&&x!==void 0){var w=g._fullLayout._activeSelectionIndex;if(w<M.length)switch(g._fullLayout.selections[w].type){case"rect":c="select";break;case"path":c="lasso";break}}var p=a(b,g,f,x),_={xref:y._id,yref:l._id,opacity:d.opacity,line:{color:d.line.color,width:d.line.width,dash:d.line.dash}},h;p.length===1&&(h=p[0]),h&&h.length===5&&c==="select"?(_.type="rect",_.x0=h[0][1],_.y0=h[0][2],_.x1=h[2][1],_.y1=h[2][2]):(_.type="path",y&&l&&n(p,y,l),_.path=i(p),h=null),T(g);for(var L=s.editHelpers,E=(L||{}).modifyItem,S=[],P=0;P<M.length;P++){var F=g._fullLayout.selections[P];if(!F){S[P]=F;continue}if(S[P]=F._input,x!==void 0&&P===g._fullLayout._activeSelectionIndex){var I=_;switch(F.type){case"rect":E("x0",I.x0),E("x1",I.x1),E("y0",I.y0),E("y1",I.y1);break;case"path":E("path",I.path);break}}}return x===void 0?(S.push(_),S):L?L.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(t,N,V){var m=t("../../lib").strTranslate;function u(a,i){switch(a.type){case"log":return a.p2d(i);case"date":return a.p2r(i,0,a.calendar);default:return a.p2r(i)}}function A(a,i){switch(a.type){case"log":return a.d2p(i);case"date":return a.r2p(i,0,a.calendar);default:return a.r2p(i)}}function T(a){var i=a._id.charAt(0)==="y"?1:0;return function(n){return u(a,n[i])}}function e(a){return m(a.xaxis._offset,a.yaxis._offset)}N.exports={p2r:u,r2p:A,axValue:T,getTransform:e}},{"../../lib":515}],455:[function(t,N,V){var m=t("./draw"),u=t("./select");N.exports={moduleType:"component",name:"selections",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewSelectionDefaults:t("./draw_newselection/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("selections"),draw:m.draw,drawOne:m.drawOne,reselect:u.reselect,prepSelect:u.prepSelect,clearOutline:u.clearOutline,clearSelectionsCache:u.clearSelectionsCache,selectOnClick:u.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(t,N,V){var m=t("polybooljs"),u=t("point-in-polygon/nested"),A=t("../../registry"),T=t("../drawing").dashStyle,e=t("../color"),a=t("../fx"),i=t("../fx/helpers").makeEventData,n=t("../dragelement/helpers"),r=n.freeMode,v=n.rectMode,s=n.drawMode,o=n.openMode,b=n.selectMode,g=t("../shapes/helpers"),d=t("../shapes/constants"),f=t("../shapes/display_outlines"),y=t("../shapes/handle_outline").clearOutline,l=t("../shapes/draw_newshape/helpers"),x=l.handleEllipse,c=l.readPaths,M=t("../shapes/draw_newshape/newshapes"),w=t("./draw_newselection/newselections"),p=t("./draw").activateLastSelection,_=t("../../lib"),h=_.sorterAsc,L=t("../../lib/polygon"),E=t("../../lib/throttle"),S=t("../../plots/cartesian/axis_ids").getFromId,P=t("../../lib/clear_gl_canvases"),F=t("../../plot_api/subroutines").redrawReglTraces,I=t("./constants"),D=I.MINSELECT,R=L.filter,O=L.tester,z=t("./helpers"),G=z.p2r,Y=z.axValue,ee=z.getTransform;function j(Xe){return Xe.subplot!==void 0}function X(Xe,it,Ye,Ee,Ge){var Ke=!j(Ee),qe=r(Ge),At=v(Ge),yt=o(Ge),Mt=s(Ge),Gt=b(Ge),zt=Ge==="drawline",Ht=Ge==="drawcircle",Zt=zt||Ht,Wt=Ee.gd,sr=Wt._fullLayout,Gr=Gt&&sr.newselection.mode==="immediate"&&Ke,cn=sr._zoomlayer,qr=Ee.element.getBoundingClientRect(),st=Ee.plotinfo,rr=ee(st),Jt=it-qr.left,hr=Ye-qr.top;sr._calcInverseTransform(Wt);var Sr=_.apply3DTransform(sr._invTransform)(Jt,hr);Jt=Sr[0],hr=Sr[1];var tt=sr._invScaleX,Qe=sr._invScaleY,lt=Jt,ft=hr,Et="M"+Jt+","+hr,Vt=Ee.xaxes[0],Pe=Ee.yaxes[0],Se=Vt._length,ot=Pe._length,ct=Xe.altKey&&!(s(Ge)&&yt),pt,St,xt,Pt,Xt,or,Pr;H(Xe,Wt,Ee),qe&&(pt=R([[Jt,hr]],I.BENDPX));var Ar=cn.selectAll("path.select-outline-"+st.id).data([1]),Er=Mt?sr.newshape:sr.newselection,$r=Mt&&!yt?Er.fillcolor:"rgba(0,0,0,0)",lr=Er.line.color||(Ke?e.contrast(Wt._fullLayout.plot_bgcolor):"#7f7f7f");Ar.enter().append("path").attr("class","select-outline select-outline-"+st.id).style({opacity:Mt?Er.opacity/2:1,"stroke-dasharray":T(Er.line.dash,Er.line.width),"stroke-width":Er.line.width+"px","shape-rendering":"crispEdges"}).call(e.stroke,lr).call(e.fill,$r).attr("fill-rule","evenodd").classed("cursor-move",!!Mt).attr("transform",rr).attr("d",Et+"Z");var br=cn.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",rr).attr("d","M0,0Z"),Fr=sr._uid+I.SELECTID,Hr=[],Lr=oe(Wt,Ee.xaxes,Ee.yaxes,Ee.subplot);Gr&&!Xe.shiftKey&&(Ee._clearSubplotSelections=function(){if(!!Ke){var Rt=Vt._id,Kt=Pe._id;We(Wt,Rt,Kt,Lr);for(var ur=(Wt.layout||{}).selections||[],Nr=[],Vr=!1,Dr=0;Dr<ur.length;Dr++){var Mr=sr.selections[Dr];Mr.xref!==Rt||Mr.yref!==Kt?Nr.push(ur[Dr]):Vr=!0}Vr&&(Wt._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",Wt,{selections:Nr}))}});var at=Ct(Ee);Ee.moveFn=function(Rt,Kt){Ee._clearSubplotSelections&&(Ee._clearSubplotSelections(),Ee._clearSubplotSelections=void 0),lt=Math.max(0,Math.min(Se,tt*Rt+Jt)),ft=Math.max(0,Math.min(ot,Qe*Kt+hr));var ur=Math.abs(lt-Jt),Nr=Math.abs(ft-hr);if(At){var Vr,Dr,Mr;if(Gt){var jr=sr.selectdirection;switch(jr==="any"?Nr<Math.min(ur*.6,D)?Vr="h":ur<Math.min(Nr*.6,D)?Vr="v":Vr="d":Vr=jr,Vr){case"h":Dr=Ht?ot/2:0,Mr=ot;break;case"v":Dr=Ht?Se/2:0,Mr=Se;break}}if(Mt)switch(sr.newshape.drawdirection){case"vertical":Vr="h",Dr=Ht?ot/2:0,Mr=ot;break;case"horizontal":Vr="v",Dr=Ht?Se/2:0,Mr=Se;break;case"ortho":ur<Nr?(Vr="h",Dr=hr,Mr=ft):(Vr="v",Dr=Jt,Mr=lt);break;default:Vr="d"}Vr==="h"?(Pt=Zt?x(Ht,[lt,Dr],[lt,Mr]):[[Jt,Dr],[Jt,Mr],[lt,Mr],[lt,Dr]],Pt.xmin=Zt?lt:Math.min(Jt,lt),Pt.xmax=Zt?lt:Math.max(Jt,lt),Pt.ymin=Math.min(Dr,Mr),Pt.ymax=Math.max(Dr,Mr),br.attr("d","M"+Pt.xmin+","+(hr-D)+"h-4v"+2*D+"h4ZM"+(Pt.xmax-1)+","+(hr-D)+"h4v"+2*D+"h-4Z")):Vr==="v"?(Pt=Zt?x(Ht,[Dr,ft],[Mr,ft]):[[Dr,hr],[Dr,ft],[Mr,ft],[Mr,hr]],Pt.xmin=Math.min(Dr,Mr),Pt.xmax=Math.max(Dr,Mr),Pt.ymin=Zt?ft:Math.min(hr,ft),Pt.ymax=Zt?ft:Math.max(hr,ft),br.attr("d","M"+(Jt-D)+","+Pt.ymin+"v-4h"+2*D+"v4ZM"+(Jt-D)+","+(Pt.ymax-1)+"v4h"+2*D+"v-4Z")):Vr==="d"&&(Pt=Zt?x(Ht,[Jt,hr],[lt,ft]):[[Jt,hr],[Jt,ft],[lt,ft],[lt,hr]],Pt.xmin=Math.min(Jt,lt),Pt.xmax=Math.max(Jt,lt),Pt.ymin=Math.min(hr,ft),Pt.ymax=Math.max(hr,ft),br.attr("d","M0,0Z"))}else qe&&(pt.addPt([lt,ft]),Pt=pt.filtered);if(Ee.selectionDefs&&Ee.selectionDefs.length?(xt=be(Ee.mergedPolygons,Pt,ct),Pt.subtract=ct,St=U(Ee.selectionDefs.concat([Pt]))):(xt=[Pt],St=O(Pt)),f(De(xt,yt),Ar,Ee),Gt){var kn=Ae(Wt,!1),mn=kn.eventData?kn.eventData.points.slice():[];kn=Ae(Wt,!1,St,Lr,Ee),St=kn.selectionTesters,Pr=kn.eventData;var Wn;pt?Wn=pt.filtered:Wn=Ft(xt),E.throttle(Fr,I.SELECTDELAY,function(){Hr=He(St,Lr);for(var In=Hr.slice(),Jn=0;Jn<mn.length;Jn++){for(var Kn=mn[Jn],ma=!1,Ra=0;Ra<In.length;Ra++)if(In[Ra].curveNumber===Kn.curveNumber&&In[Ra].pointNumber===Kn.pointNumber){ma=!0;break}ma||In.push(Kn)}In.length&&(Pr||(Pr={}),Pr.points=In),at(Pr,Wn),jt(Wt,Pr)})}},Ee.clickFn=function(Rt,Kt){if(br.remove(),Wt._fullLayout._activeShapeIndex>=0){Wt._fullLayout._deactivateShape(Wt);return}if(!Mt){var ur=sr.clickmode;E.done(Fr).then(function(){if(E.clear(Fr),Rt===2){for(Ar.remove(),Xt=0;Xt<Lr.length;Xt++)or=Lr[Xt],or._module.selectPoints(or,!1);if(xe(Wt,Lr),Z(Ee),Lt(Wt),Lr.length){var Nr=Lr[0].xaxis,Vr=Lr[0].yaxis;if(Nr&&Vr){for(var Dr=[],Mr=Wt._fullLayout.selections,jr=0;jr<Mr.length;jr++){var kn=Mr[jr];!kn||(kn.xref!==Nr._id||kn.yref!==Vr._id)&&Dr.push(kn)}Dr.length<Mr.length&&(Wt._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",Wt,{selections:Dr}))}}}else ur.indexOf("select")>-1&&ie(Kt,Wt,Ee.xaxes,Ee.yaxes,Ee.subplot,Ee,Ar),ur==="event"&&Nt(Wt,void 0);a.click(Wt,Kt)}).catch(_.error)}},Ee.doneFn=function(){br.remove(),E.done(Fr).then(function(){E.clear(Fr),!Gr&&Pt&&Ee.selectionDefs&&(Pt.subtract=ct,Ee.selectionDefs.push(Pt),Ee.mergedPolygons.length=0,[].push.apply(Ee.mergedPolygons,xt)),(Gr||Mt)&&Z(Ee,Gr),Ee.doneFnCompleted&&Ee.doneFnCompleted(Hr),Gt&&Nt(Wt,Pr)}).catch(_.error)}}function ie(Xe,it,Ye,Ee,Ge,Ke,qe){var At=it._hoverdata,yt=it._fullLayout,Mt=yt.clickmode,Gt=Mt.indexOf("event")>-1,zt=[],Ht,Zt,Wt,sr,Gr,cn,qr,st,rr,Jt;if(ae(At)){H(Xe,it,Ke),Ht=oe(it,Ye,Ee,Ge);var hr=le(At,Ht),Sr=hr.pointNumbers.length>0;if(Sr?fe(Ht,hr):me(Ht)&&(qr=_e(hr))){for(qe&&qe.remove(),Jt=0;Jt<Ht.length;Jt++)Zt=Ht[Jt],Zt._module.selectPoints(Zt,!1);xe(it,Ht),Z(Ke),Gt&&Lt(it)}else{st=Xe.shiftKey&&(qr!==void 0?qr:_e(hr)),Wt=he(hr.pointNumber,hr.searchInfo,st);var tt=Ke.selectionDefs.concat([Wt]);for(sr=U(tt),Jt=0;Jt<Ht.length;Jt++)if(Gr=Ht[Jt]._module.selectPoints(Ht[Jt],sr),cn=ke(Gr,Ht[Jt]),zt.length)for(var Qe=0;Qe<cn.length;Qe++)zt.push(cn[Qe]);else zt=cn;if(rr={points:zt},xe(it,Ht,rr),Wt&&Ke&&Ke.selectionDefs.push(Wt),qe){var lt=Ke.mergedPolygons,ft=o(Ke.dragmode);f(De(lt,ft),qe,Ke)}Gt&&Nt(it,rr)}}}function he(Xe,it,Ye){return{pointNumber:Xe,searchInfo:it,subtract:!!Ye}}function K(Xe){return"pointNumber"in Xe&&"searchInfo"in Xe}function $(Xe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(it,Ye,Ee,Ge){var Ke=Xe.searchInfo.cd[0].trace._expandedIndex,qe=Ge.cd[0].trace._expandedIndex;return qe===Ke&&Ee===Xe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Xe.subtract}}function U(Xe){if(!Xe.length)return;for(var it=[],Ye=K(Xe[0])?0:Xe[0][0][0],Ee=Ye,Ge=K(Xe[0])?0:Xe[0][0][1],Ke=Ge,qe=0;qe<Xe.length;qe++)if(K(Xe[qe]))it.push($(Xe[qe]));else{var At=O(Xe[qe]);At.subtract=!!Xe[qe].subtract,it.push(At),Ye=Math.min(Ye,At.xmin),Ee=Math.max(Ee,At.xmax),Ge=Math.min(Ge,At.ymin),Ke=Math.max(Ke,At.ymax)}function yt(Mt,Gt,zt,Ht){for(var Zt=!1,Wt=0;Wt<it.length;Wt++)it[Wt].contains(Mt,Gt,zt,Ht)&&(Zt=!it[Wt].subtract);return Zt}return{xmin:Ye,xmax:Ee,ymin:Ge,ymax:Ke,pts:[],contains:yt,isRect:!1,degenerate:!1}}function H(Xe,it,Ye){var Ee=it._fullLayout,Ge=Ye.plotinfo,Ke=Ye.dragmode,qe=Ee._lastSelectedSubplot&&Ee._lastSelectedSubplot===Ge.id,At=(Xe.shiftKey||Xe.altKey)&&!(s(Ke)&&o(Ke));qe&&At&&Ge.selection&&Ge.selection.selectionDefs&&!Ye.selectionDefs?(Ye.selectionDefs=Ge.selection.selectionDefs,Ye.mergedPolygons=Ge.selection.mergedPolygons):(!At||!Ge.selection)&&Z(Ye),qe||(y(it),Ee._lastSelectedSubplot=Ge.id)}function q(Xe){return Xe._fullLayout._activeShapeIndex>=0}function re(Xe){return Xe._fullLayout._activeSelectionIndex>=0}function Z(Xe,it){var Ye=Xe.dragmode,Ee=Xe.plotinfo,Ge=Xe.gd;q(Ge)&&Ge._fullLayout._deactivateShape(Ge),re(Ge)&&Ge._fullLayout._deactivateSelection(Ge);var Ke=Ge._fullLayout,qe=Ke._zoomlayer,At=s(Ye),yt=b(Ye);if(At||yt){var Mt=qe.selectAll(".select-outline-"+Ee.id);if(Mt&&Ge._fullLayout._outlining){var Gt;At&&(Gt=M(Mt,Xe)),Gt&&A.call("_guiRelayout",Ge,{shapes:Gt});var zt;yt&&!j(Xe)&&(zt=w(Mt,Xe)),zt&&(Ge._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",Ge,{selections:zt}).then(function(){it&&p(Ge)})),Ge._fullLayout._outlining=!1}}Ee.selection={},Ee.selection.selectionDefs=Xe.selectionDefs=[],Ee.selection.mergedPolygons=Xe.mergedPolygons=[]}function Q(Xe){return Xe._id}function oe(Xe,it,Ye,Ee){if(!Xe.calcdata)return[];var Ge=[],Ke=it.map(Q),qe=Ye.map(Q),At,yt,Mt;for(Mt=0;Mt<Xe.calcdata.length;Mt++)if(At=Xe.calcdata[Mt],yt=At[0].trace,!(yt.visible!==!0||!yt._module||!yt._module.selectPoints))if(j({subplot:Ee})&&(yt.subplot===Ee||yt.geo===Ee))Ge.push(se(yt._module,At,it[0],Ye[0]));else if(yt.type==="splom"){if(yt._xaxes[Ke[0]]&&yt._yaxes[qe[0]]){var Gt=se(yt._module,At,it[0],Ye[0]);Gt.scene=Xe._fullLayout._splomScenes[yt.uid],Ge.push(Gt)}}else if(yt.type==="sankey"){var zt=se(yt._module,At,it[0],Ye[0]);Ge.push(zt)}else{if(Ke.indexOf(yt.xaxis)===-1||qe.indexOf(yt.yaxis)===-1)continue;Ge.push(se(yt._module,At,S(Xe,yt.xaxis),S(Xe,yt.yaxis)))}return Ge}function se(Xe,it,Ye,Ee){return{_module:Xe,cd:it,xaxis:Ye,yaxis:Ee}}function ae(Xe){return Xe&&Array.isArray(Xe)&&Xe[0].hoverOnBox!==!0}function le(Xe,it){var Ye=Xe[0],Ee=-1,Ge=[],Ke,qe;for(qe=0;qe<it.length;qe++)if(Ke=it[qe],Ye.fullData._expandedIndex===Ke.cd[0].trace._expandedIndex){if(Ye.hoverOnBox===!0)break;Ye.pointNumber!==void 0?Ee=Ye.pointNumber:Ye.binNumber!==void 0&&(Ee=Ye.binNumber,Ge=Ye.pointNumbers);break}return{pointNumber:Ee,pointNumbers:Ge,searchInfo:Ke}}function _e(Xe){var it=Xe.searchInfo.cd[0].trace,Ye=Xe.pointNumber,Ee=Xe.pointNumbers,Ge=Ee.length>0,Ke=Ge?Ee[0]:Ye;return it.selectedpoints?it.selectedpoints.indexOf(Ke)>-1:!1}function fe(Xe,it){var Ye=[],Ee,Ge,Ke,qe;for(qe=0;qe<Xe.length;qe++)Ee=Xe[qe],Ee.cd[0].trace.selectedpoints&&Ee.cd[0].trace.selectedpoints.length>0&&Ye.push(Ee);if(Ye.length===1&&(Ke=Ye[0]===it.searchInfo,Ke&&(Ge=it.searchInfo.cd[0].trace,Ge.selectedpoints.length===it.pointNumbers.length))){for(qe=0;qe<it.pointNumbers.length;qe++)if(Ge.selectedpoints.indexOf(it.pointNumbers[qe])<0)return!1;return!0}return!1}function me(Xe){var it=0,Ye,Ee,Ge;for(Ge=0;Ge<Xe.length;Ge++)if(Ye=Xe[Ge],Ee=Ye.cd[0].trace,Ee.selectedpoints&&(Ee.selectedpoints.length>1||(it+=Ee.selectedpoints.length,it>1)))return!1;return it===1}function xe(Xe,it,Ye){var Ee;for(Ee=0;Ee<it.length;Ee++){var Ge=it[Ee].cd[0].trace._fullInput,Ke=Xe._fullLayout._tracePreGUI[Ge.uid]||{};Ke.selectedpoints===void 0&&(Ke.selectedpoints=Ge._input.selectedpoints||null)}var qe;if(Ye){var At=Ye.points||[];for(Ee=0;Ee<it.length;Ee++)qe=it[Ee].cd[0].trace,qe._input.selectedpoints=qe._fullInput.selectedpoints=[],qe._fullInput!==qe&&(qe.selectedpoints=[]);for(var yt=0;yt<At.length;yt++){var Mt=At[yt],Gt=Mt.data,zt=Mt.fullData,Ht=Mt.pointIndex,Zt=Mt.pointIndices;Zt?([].push.apply(Gt.selectedpoints,Zt),qe._fullInput!==qe&&[].push.apply(zt.selectedpoints,Zt)):(Gt.selectedpoints.push(Ht),qe._fullInput!==qe&&zt.selectedpoints.push(Ht))}}else for(Ee=0;Ee<it.length;Ee++)qe=it[Ee].cd[0].trace,delete qe.selectedpoints,delete qe._input.selectedpoints,qe._fullInput!==qe&&delete qe._fullInput.selectedpoints;ye(Xe,it)}function ye(Xe,it){for(var Ye=!1,Ee=0;Ee<it.length;Ee++){var Ge=it[Ee],Ke=Ge.cd;A.traceIs(Ke[0].trace,"regl")&&(Ye=!0);var qe=Ge._module,At=qe.styleOnSelect||qe.style;At&&(At(Xe,Ke,Ke[0].node3),Ke[0].nodeRangePlot3&&At(Xe,Ke,Ke[0].nodeRangePlot3))}Ye&&(P(Xe),F(Xe))}function be(Xe,it,Ye){for(var Ee=Ye?m.difference:m.union,Ge=Ee({regions:Xe},{regions:[it]}),Ke=Ge.regions.reverse(),qe=0;qe<Ke.length;qe++){var At=Ke[qe];At.subtract=Ve(At,Ke.slice(0,qe))}return Ke}function ke(Xe,it){if(Array.isArray(Xe))for(var Ye=it.cd,Ee=it.cd[0].trace,Ge=0;Ge<Xe.length;Ge++)Xe[Ge]=i(Xe[Ge],Ee,Ye);return Xe}function De(Xe,it){for(var Ye=[],Ee=0;Ee<Xe.length;Ee++){Ye[Ee]=[];for(var Ge=0;Ge<Xe[Ee].length;Ge++){Ye[Ee][Ge]=[],Ye[Ee][Ge][0]=Ge?"L":"M";for(var Ke=0;Ke<Xe[Ee][Ge].length;Ke++)Ye[Ee][Ge].push(Xe[Ee][Ge][Ke])}it||Ye[Ee].push(["Z",Ye[Ee][0][1],Ye[Ee][0][2]])}return Ye}function He(Xe,it){for(var Ye=[],Ee,Ge,Ke=0;Ke<it.length;Ke++){var qe=it[Ke];Ge=qe._module.selectPoints(qe,Xe),Ee=ke(Ge,qe),Ye=Ye.concat(Ee)}return Ye}function Ae(Xe,it,Ye,Ee,Ge){var Ke=!!Ee,qe,At,yt;Ge&&(qe=Ge.plotinfo,At=Ge.xaxes[0]._id,yt=Ge.yaxes[0]._id);var Mt=[],Gt=[],zt=Ie(Xe),Ht=Xe._fullLayout;if(qe){var Zt=Ht._zoomlayer,Wt=Ht.dragmode,sr=s(Wt),Gr=b(Wt);if(sr||Gr){var cn=S(Xe,At,"x"),qr=S(Xe,yt,"y");if(cn&&qr){var st=Zt.selectAll(".select-outline-"+qe.id);if(st&&Xe._fullLayout._outlining&&st.length){for(var rr=st[0][0],Jt=rr.getAttribute("d"),hr=c(Jt,Xe,qe),Sr=[],tt=0;tt<hr.length;tt++){for(var Qe=hr[tt],lt=[],ft=0;ft<Qe.length;ft++)lt.push([dt(cn,Qe[ft][1]),dt(qr,Qe[ft][2])]);lt.xref=At,lt.yref=yt,lt.subtract=Ve(lt,Sr),Sr.push(lt)}zt=zt.concat(Sr)}}}}var Et=At&&yt?[At+yt]:Ht._subplots.cartesian;Le(Xe);for(var Vt={},Pe=0;Pe<Et.length;Pe++){var Se=Et[Pe],ot=Se.indexOf("y"),ct=Se.slice(0,ot),pt=Se.slice(ot),St=At&&yt?Ye:void 0;if(St=ze(zt,ct,pt,St),St){var xt=Ee;if(!Ke){var Pt=S(Xe,ct,"x"),Xt=S(Xe,pt,"y");xt=oe(Xe,[Pt],[Xt],Se);for(var or=0;or<xt.length;or++){var Pr=xt[or],Ar=Pr.cd[0],Er=Ar.trace;if(Pr._module.name==="scattergl"&&!Ar.t.xpx){var $r=Er.x,lr=Er.y,br=Er._length;Ar.t.xpx=[],Ar.t.ypx=[];for(var Fr=0;Fr<br;Fr++)Ar.t.xpx[Fr]=Pt.c2p($r[Fr]),Ar.t.ypx[Fr]=Xt.c2p(lr[Fr])}Pr._module.name==="splom"&&(Vt[Er.uid]||(Vt[Er.uid]=!0))}}var Hr=He(St,xt);Mt=Mt.concat(Hr),Gt=Gt.concat(xt)}}var Lr={points:Mt};xe(Xe,Gt,Lr);var at=Ht.clickmode,Rt=at.indexOf("event")>-1&&it;if(!qe&&it){var Kt=Ie(Xe,!0);if(Kt.length){var ur=Kt[0].xref,Nr=Kt[0].yref;if(ur&&Nr){var Vr=Ft(Kt),Dr=Ot([S(Xe,ur,"x"),S(Xe,Nr,"y")]);Dr(Lr,Vr)}}Xe._fullLayout._noEmitSelectedAtStart?Xe._fullLayout._noEmitSelectedAtStart=!1:Rt&&Nt(Xe,Lr),Ht._reselect=!1}if(!qe&&Ht._deselect){var Mr=Ht._deselect;At=Mr.xref,yt=Mr.yref,Ze(At,yt,Gt)||We(Xe,At,yt,Ee),Rt&&(Lr.points.length?Nt(Xe,Lr):Lt(Xe)),Ht._deselect=!1}return{eventData:Lr,selectionTesters:Ye}}function Le(Xe){var it=Xe.calcdata;if(!!it)for(var Ye=0;Ye<it.length;Ye++){var Ee=it[Ye][0],Ge=Ee.trace,Ke=Xe._fullLayout._splomScenes;if(Ke){var qe=Ke[Ge.uid];qe&&(qe.selectBatch=[])}}}function Ze(Xe,it,Ye){for(var Ee=0;Ee<Ye.length;Ee++){var Ge=Ye[Ee];if(Ge.xaxis&&Ge.xaxis._id===Xe&&Ge.yaxis&&Ge.yaxis._id===it)return!0}return!1}function We(Xe,it,Ye,Ee){Ee=oe(Xe,[S(Xe,it,"x")],[S(Xe,Ye,"y")],it+Ye);for(var Ge=0;Ge<Ee.length;Ge++){var Ke=Ee[Ge];Ke._module.selectPoints(Ke,!1)}xe(Xe,Ee)}function ze(Xe,it,Ye,Ee){for(var Ge,Ke=0;Ke<Xe.length;Ke++){var qe=Xe[Ke];if(!(it!==qe.xref||Ye!==qe.yref))if(Ge){var At=!!qe.subtract;Ge=be(Ge,qe,At),Ee=U(Ge)}else Ge=[qe],Ee=O(qe)}return Ee}function Ie(Xe,it){for(var Ye=[],Ee=Xe._fullLayout,Ge=Ee.selections,Ke=Ge.length,qe=0;qe<Ke;qe++)if(!(it&&qe!==Ee._activeSelectionIndex)){var At=Ge[qe];if(!!At){var yt=At.xref,Mt=At.yref,Gt=S(Xe,yt,"x"),zt=S(Xe,Mt,"y"),Ht,Zt,Wt,sr,Gr;if(At.type==="rect"){Gr=[];var cn=dt(Gt,At.x0),qr=dt(Gt,At.x1),st=dt(zt,At.y0),rr=dt(zt,At.y1);Gr=[[cn,st],[cn,rr],[qr,rr],[qr,st]],Ht=Math.min(cn,qr),Zt=Math.max(cn,qr),Wt=Math.min(st,rr),sr=Math.max(st,rr),Gr.xmin=Ht,Gr.xmax=Zt,Gr.ymin=Wt,Gr.ymax=sr,Gr.xref=yt,Gr.yref=Mt,Gr.subtract=!1,Gr.isRect=!0,Ye.push(Gr)}else if(At.type==="path")for(var Jt=At.path.split("Z"),hr=[],Sr=0;Sr<Jt.length;Sr++){var tt=Jt[Sr];if(!!tt){tt+="Z";var Qe=g.extractPathCoords(tt,d.paramIsX,"raw"),lt=g.extractPathCoords(tt,d.paramIsY,"raw");Ht=1/0,Zt=-1/0,Wt=1/0,sr=-1/0,Gr=[];for(var ft=0;ft<Qe.length;ft++){var Et=dt(Gt,Qe[ft]),Vt=dt(zt,lt[ft]);Gr.push([Et,Vt]),Ht=Math.min(Et,Ht),Zt=Math.max(Et,Zt),Wt=Math.min(Vt,Wt),sr=Math.max(Vt,sr)}Gr.xmin=Ht,Gr.xmax=Zt,Gr.ymin=Wt,Gr.ymax=sr,Gr.xref=yt,Gr.yref=Mt,Gr.subtract=Ve(Gr,hr),hr.push(Gr),Ye.push(Gr)}}}}return Ye}function Ve(Xe,it){for(var Ye=!1,Ee=0;Ee<it.length;Ee++)for(var Ge=it[Ee],Ke=0;Ke<Xe.length;Ke++)if(u(Xe[Ke],Ge)){Ye=!Ye;break}return Ye}function dt(Xe,it){return Xe.type==="date"&&(it=it.replace("_"," ")),Xe.type==="log"?Xe.c2p(it):Xe.r2p(it,null,Xe.calendar)}function Ft(Xe){for(var it=Xe.length,Ye=[],Ee=0;Ee<it;Ee++){var Ge=Xe[Ee];Ye=Ye.concat(Ge),Ye=Ye.concat([Ge[0]])}return Qt(Ye)}function Qt(Xe){return Xe.isRect=Xe.length===5&&Xe[0][0]===Xe[4][0]&&Xe[0][1]===Xe[4][1]&&Xe[0][0]===Xe[1][0]&&Xe[2][0]===Xe[3][0]&&Xe[0][1]===Xe[3][1]&&Xe[1][1]===Xe[2][1]||Xe[0][1]===Xe[1][1]&&Xe[2][1]===Xe[3][1]&&Xe[0][0]===Xe[3][0]&&Xe[1][0]===Xe[2][0],Xe.isRect&&(Xe.xmin=Math.min(Xe[0][0],Xe[2][0]),Xe.xmax=Math.max(Xe[0][0],Xe[2][0]),Xe.ymin=Math.min(Xe[0][1],Xe[2][1]),Xe.ymax=Math.max(Xe[0][1],Xe[2][1])),Xe}function Ot(Xe){return function(it,Ye){for(var Ee,Ge,Ke=0;Ke<Xe.length;Ke++){var qe=Xe[Ke],At=qe._id,yt=At.charAt(0);if(Ye.isRect){Ee||(Ee={});var Mt=Ye[yt+"min"],Gt=Ye[yt+"max"];Mt!==void 0&&Gt!==void 0&&(Ee[At]=[G(qe,Mt),G(qe,Gt)].sort(h))}else Ge||(Ge={}),Ge[At]=Ye.map(Y(qe))}Ee&&(it.range=Ee),Ge&&(it.lassoPoints=Ge)}}function Ct(Xe){var it=Xe.plotinfo;return it.fillRangeItems||Ot(Xe.xaxes.concat(Xe.yaxes))}function jt(Xe,it){Xe.emit("plotly_selecting",it)}function Nt(Xe,it){it&&(it.selections=(Xe.layout||{}).selections||[]),Xe.emit("plotly_selected",it)}function Lt(Xe){Xe.emit("plotly_deselect",null)}N.exports={reselect:Ae,prepSelect:X,clearOutline:y,clearSelectionsCache:Z,selectOnClick:ie}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(t,N,V){var m=t("../annotations/attributes"),u=t("../../traces/scatter/attributes").line,A=t("../drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),N.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},m.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},m.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},u.color,{editType:"arraydraw"}),width:T({},u.width,{editType:"calc+arraydraw"}),dash:T({},A,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("./constants"),T=t("./helpers");N.exports=function(v){var s=v._fullLayout,o=m.filterVisible(s.shapes);if(!(!o.length||!v._fullData.length))for(var b=0;b<o.length;b++){var g=o[b];g._extremes={};var d,f,y=u.getRefType(g.xref),l=u.getRefType(g.yref);if(g.xref!=="paper"&&y!=="domain"){var x=g.xsizemode==="pixel"?g.xanchor:g.x0,c=g.xsizemode==="pixel"?g.xanchor:g.x1;d=u.getFromId(v,g.xref),f=n(d,x,c,g.path,A.paramIsX),f&&(g._extremes[d._id]=u.findExtremes(d,f,e(g)))}if(g.yref!=="paper"&&l!=="domain"){var M=g.ysizemode==="pixel"?g.yanchor:g.y0,w=g.ysizemode==="pixel"?g.yanchor:g.y1;d=u.getFromId(v,g.yref),f=n(d,M,w,g.path,A.paramIsY),f&&(g._extremes[d._id]=u.findExtremes(d,f,a(g)))}}};function e(r){return i(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function a(r){return i(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function i(r,v,s,o,b,g){var d=r/2,f=g;if(v==="pixel"){var y=b?T.extractPathCoords(b,g?A.paramIsY:A.paramIsX):[s,o],l=m.aggNums(Math.max,null,y),x=m.aggNums(Math.min,null,y),c=x<0?Math.abs(x)+d:d,M=l>0?l+d:d;return{ppad:d,ppadplus:f?c:M,ppadminus:f?M:c}}else return{ppad:d}}function n(r,v,s,o,b){var g=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(v!==void 0)return[g(v),g(s)];if(!!o){var d=1/0,f=-1/0,y=o.match(A.segmentRE),l,x,c,M,w;for(r.type==="date"&&(g=T.decodeDate(g)),l=0;l<y.length;l++)x=y[l],c=b[x.charAt(0)].drawn,c!==void 0&&(M=y[l].substr(1).match(A.paramRE),!(!M||M.length<c)&&(w=g(M[c]),w<d&&(d=w),w>f&&(f=w)));if(f>=d)return[d,f]}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(t,N,V){N.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e=t("./helpers");N.exports=function(n,r){A(n,r,{name:"shapes",handleItemDefaults:a})};function a(i,n,r){function v(Y,ee){return m.coerce(i,n,T,Y,ee)}var s=v("visible");if(!!s){var o=v("path"),b=o?"path":"rect",g=v("type",b),d=g!=="path";d&&delete n.path,v("editable"),v("layer"),v("opacity"),v("fillcolor"),v("fillrule");var f=v("line.width");f&&(v("line.color"),v("line.dash"));for(var y=v("xsizemode"),l=v("ysizemode"),x=["x","y"],c=0;c<2;c++){var M=x[c],w=M+"anchor",p=M==="x"?y:l,_={_fullLayout:r},h,L,E,S=u.coerceRef(i,n,_,M,void 0,"paper"),P=u.getRefType(S);if(P==="range"?(h=u.getFromId(_,S),h._shapeIndices.push(n._index),E=e.rangeToShapePosition(h),L=e.shapePositionToRange(h)):L=E=m.identity,d){var F=.25,I=.75,D=M+"0",R=M+"1",O=i[D],z=i[R];i[D]=L(i[D],!0),i[R]=L(i[R],!0),p==="pixel"?(v(D,0),v(R,10)):(u.coercePosition(n,_,v,S,D,F),u.coercePosition(n,_,v,S,R,I)),n[D]=E(n[D]),n[R]=E(n[R]),i[D]=O,i[R]=z}if(p==="pixel"){var G=i[w];i[w]=L(i[w],!0),u.coercePosition(n,_,v,S,w,.25),n[w]=E(n[w]),i[w]=G}}d&&m.noneOrAll(i,n,["x0","x1","y0","y1"])}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(t,N,V){var m=t("../../lib"),u=m.strTranslate,A=t("../dragelement"),T=t("../dragelement/helpers"),e=T.drawMode,a=T.selectMode,i=t("../../registry"),n=t("../color"),r=t("./draw_newshape/constants"),v=r.i000,s=r.i090,o=r.i180,b=r.i270,g=t("./handle_outline"),d=g.clearOutlineControllers,f=t("./draw_newshape/helpers"),y=f.pointsOnRectangle,l=f.pointsOnEllipse,x=f.writePaths,c=t("./draw_newshape/newshapes"),M=t("../selections/draw_newselection/newselections");N.exports=function h(L,E,S,P){P||(P=0);var F=S.gd;function I(){h(L,E,S,P++),l(L[0])&&D({redrawing:!0})}function D(fe){var me={};S.isActiveShape!==void 0&&(S.isActiveShape=!1,me=c(E,S)),S.isActiveSelection!==void 0&&(S.isActiveSelection=!1,me=M(E,S),F._fullLayout._reselect=!0),Object.keys(me).length&&i.call((fe||{}).redrawing?"relayout":"_guiRelayout",F,me)}var R=F._fullLayout,O=R._zoomlayer,z=S.dragmode,G=e(z),Y=a(z);(G||Y)&&(F._fullLayout._outlining=!0),d(F),E.attr("d",x(L));var ee,j,X,ie,he;if(!P&&(S.isActiveShape||S.isActiveSelection)){he=w([],L);var K=O.append("g").attr("class","outline-controllers");Z(K),_e()}function $(fe){X=+fe.srcElement.getAttribute("data-i"),ie=+fe.srcElement.getAttribute("data-j"),ee[X][ie].moveFn=U}function U(fe,me){if(!!L.length){var xe=he[X][ie][1],ye=he[X][ie][2],be=L[X],ke=be.length;if(y(be)){var De=fe,He=me;if(S.isActiveSelection){var Ae=p(be,ie);Ae[1]===be[ie][1]?He=0:De=0}for(var Le=0;Le<ke;Le++)if(Le!==ie){var Ze=be[Le];Ze[1]===be[ie][1]&&(Ze[1]=xe+De),Ze[2]===be[ie][2]&&(Ze[2]=ye+He)}if(be[ie][1]=xe+De,be[ie][2]=ye+He,!y(be))for(var We=0;We<ke;We++)for(var ze=0;ze<be[We].length;ze++)be[We][ze]=he[X][We][ze]}else be[ie][1]=xe+fe,be[ie][2]=ye+me;I()}}function H(){D()}function q(){if(!!L.length&&!!L[X]&&!!L[X].length){for(var fe=[],me=0;me<L[X].length;me++)me!==ie&&fe.push(L[X][me]);fe.length>1&&!(fe.length===2&&fe[1][0]==="Z")&&(ie===0&&(fe[0][0]="M"),L[X]=fe,I(),D())}}function re(fe,me){if(fe===2){X=+me.srcElement.getAttribute("data-i"),ie=+me.srcElement.getAttribute("data-j");var xe=L[X];!y(xe)&&!l(xe)&&q()}}function Z(fe){ee=[];for(var me=0;me<L.length;me++){var xe=L[me],ye=y(xe),be=!ye&&l(xe);ee[me]=[];for(var ke=xe.length,De=0;De<ke;De++)if(xe[De][0]!=="Z"&&!(be&&De!==v&&De!==s&&De!==o&&De!==b)){var He=ye&&S.isActiveSelection,Ae;He&&(Ae=p(xe,De));var Le=xe[De][1],Ze=xe[De][2],We=fe.append(He?"rect":"circle").attr("data-i",me).attr("data-j",De).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(He){var ze=Ae[1]-Le,Ie=Ae[2]-Ze,Ve=Ie?5:Math.max(Math.min(25,Math.abs(ze)-5),5),dt=ze?5:Math.max(Math.min(25,Math.abs(Ie)-5),5);We.classed(Ie?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ve).attr("height",dt).attr("x",Le-Ve/2).attr("y",Ze-dt/2).attr("transform",u(ze/2,Ie/2))}else We.classed("cursor-grab",!0).attr("r",5).attr("cx",Le).attr("cy",Ze);ee[me][De]={element:We.node(),gd:F,prepFn:$,doneFn:H,clickFn:re},A.init(ee[me][De])}}}function Q(fe,me){if(!!L.length)for(var xe=0;xe<L.length;xe++)for(var ye=0;ye<L[xe].length;ye++)for(var be=0;be+2<L[xe][ye].length;be+=2)L[xe][ye][be+1]=he[xe][ye][be+1]+fe,L[xe][ye][be+2]=he[xe][ye][be+2]+me}function oe(fe,me){Q(fe,me),I()}function se(fe){X=+fe.srcElement.getAttribute("data-i"),X||(X=0),j[X].moveFn=oe}function ae(){D()}function le(fe){fe===2&&_(F)}function _e(){if(j=[],!!L.length){var fe=0;j[fe]={element:E[0][0],gd:F,prepFn:se,doneFn:ae,clickFn:le},A.init(j[fe])}}};function w(h,L){for(var E=0;E<L.length;E++){var S=L[E];h[E]=[];for(var P=0;P<S.length;P++){h[E][P]=[];for(var F=0;F<S[P].length;F++)h[E][P][F]=S[P][F]}}return h}function p(h,L){var E=h[L][1],S=h[L][2],P=h.length,F,I,D;return F=(L+1)%P,I=h[F][1],D=h[F][2],I===E&&D===S&&(F=(L+2)%P,I=h[F][1],D=h[F][2]),[F,I,D]}function _(h){if(!!a(h._fullLayout.dragmode)){d(h);var L=h._fullLayout._activeSelectionIndex,E=(h.layout||{}).selections||[];if(L<E.length){for(var S=[],P=0;P<E.length;P++)P!==L&&S.push(E[P]);delete h._fullLayout._activeSelectionIndex;var F=h._fullLayout.selections[L];h._fullLayout._deselect={xref:F.xref,yref:F.yref},i.call("_guiRelayout",h,{selections:S})}}}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("./draw_newshape/helpers").readPaths,e=t("./display_outlines"),a=t("./handle_outline").clearOutlineControllers,i=t("../color"),n=t("../drawing"),r=t("../../plot_api/plot_template").arrayEditor,v=t("../dragelement"),s=t("../../lib/setcursor"),o=t("./constants"),b=t("./helpers"),g=b.getPathString;N.exports={draw:d,drawOne:l,eraseActiveShape:_};function d(h){var L=h._fullLayout;L._shapeUpperLayer.selectAll("path").remove(),L._shapeLowerLayer.selectAll("path").remove();for(var E in L._plots){var S=L._plots[E].shapelayer;S&&S.selectAll("path").remove()}for(var P=0;P<L.shapes.length;P++)L.shapes[P].visible&&l(h,P)}function f(h){return!!h._fullLayout._outlining}function y(h){return!h._context.edits.shapePosition}function l(h,L){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+L+'"]').remove();var E=b.makeShapesOptionsAndPlotinfo(h,L),S=E.options,P=E.plotinfo;if(!S._input||S.visible===!1)return;if(S.layer!=="below")I(h._fullLayout._shapeUpperLayer);else if(S.xref==="paper"||S.yref==="paper")I(h._fullLayout._shapeLowerLayer);else if(P._hadPlotinfo){var F=P.mainplotinfo||P;I(F.shapelayer)}else I(h._fullLayout._shapeLowerLayer);function I(D){var R=g(h,S),O={"data-index":L,"fill-rule":S.fillrule,d:R},z=S.opacity,G=S.fillcolor,Y=S.line.width?S.line.color:"rgba(0,0,0,0)",ee=S.line.width,j=S.line.dash;!ee&&S.editable===!0&&(ee=5,j="solid");var X=R[R.length-1]!=="Z",ie=y(h)&&S.editable&&h._fullLayout._activeShapeIndex===L;ie&&(G=X?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,z=h._fullLayout.activeshape.opacity);var he=D.append("path").attr(O).style("opacity",z).call(i.stroke,Y).call(i.fill,G).call(n.dashLine,j,ee);x(he,h,S);var K;if((ie||h._context.edits.shapePosition)&&(K=r(h.layout,"shapes",S)),ie){he.style({cursor:"move"});var $={element:he.node(),plotinfo:P,gd:h,editHelpers:K,isActiveShape:!0},U=T(R,h);e(U,he,$)}else h._context.edits.shapePosition?c(h,he,S,L,D,K):S.editable===!0&&he.style("pointer-events",X||i.opacity(G)*z<=.5?"stroke":"all");he.node().addEventListener("click",function(){return w(h,he)})}}function x(h,L,E){var S=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(h,S?"clip"+L._fullLayout._uid+S:null,L)}function c(h,L,E,S,P,F){var I=10,D=10,R=E.xsizemode==="pixel",O=E.ysizemode==="pixel",z=E.type==="line",G=E.type==="path",Y=F.modifyItem,ee,j,X,ie,he,K,$,U,H,q,re,Z,Q,oe,se,ae=A.getFromId(h,E.xref),le=A.getRefType(E.xref),_e=A.getFromId(h,E.yref),fe=A.getRefType(E.yref),me=b.getDataToPixel(h,ae,!1,le),xe=b.getDataToPixel(h,_e,!0,fe),ye=b.getPixelToData(h,ae,!1,le),be=b.getPixelToData(h,_e,!0,fe),ke=Ae(),De={element:ke.node(),gd:h,prepFn:We,doneFn:ze,clickFn:Ie},He;v.init(De),ke.node().onmousemove=Ze;function Ae(){return z?Le():L}function Le(){var Ct=10,jt=Math.max(E.line.width,Ct),Nt=P.append("g").attr("data-index",S);Nt.append("path").attr("d",L.attr("d")).style({cursor:"move","stroke-width":jt,"stroke-opacity":"0"});var Lt={"fill-opacity":"0"},Xe=Math.max(jt/2,Ct);return Nt.append("circle").attr({"data-line-point":"start-point",cx:R?me(E.xanchor)+E.x0:me(E.x0),cy:O?xe(E.yanchor)-E.y0:xe(E.y0),r:Xe}).style(Lt).classed("cursor-grab",!0),Nt.append("circle").attr({"data-line-point":"end-point",cx:R?me(E.xanchor)+E.x1:me(E.x1),cy:O?xe(E.yanchor)-E.y1:xe(E.y1),r:Xe}).style(Lt).classed("cursor-grab",!0),Nt}function Ze(Ct){if(f(h)){He=null;return}if(z)Ct.target.tagName==="path"?He="move":He=Ct.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var jt=De.element.getBoundingClientRect(),Nt=jt.right-jt.left,Lt=jt.bottom-jt.top,Xe=Ct.clientX-jt.left,it=Ct.clientY-jt.top,Ye=!G&&Nt>I&&Lt>D&&!Ct.shiftKey?v.getCursor(Xe/Nt,1-it/Lt):"move";s(L,Ye),He=Ye.split("-")[0]}}function We(Ct){f(h)||(R&&(he=me(E.xanchor)),O&&(K=xe(E.yanchor)),E.type==="path"?se=E.path:(ee=R?E.x0:me(E.x0),j=O?E.y0:xe(E.y0),X=R?E.x1:me(E.x1),ie=O?E.y1:xe(E.y1)),ee<X?(H=ee,Q="x0",q=X,oe="x1"):(H=X,Q="x1",q=ee,oe="x0"),!O&&j<ie||O&&j>ie?($=j,re="y0",U=ie,Z="y1"):($=ie,re="y1",U=j,Z="y0"),Ze(Ct),Ft(P,E),Ot(L,E,h),De.moveFn=He==="move"?Ve:dt,De.altKey=Ct.altKey)}function ze(){f(h)||(s(L),Qt(P),x(L,h,E),m.call("_guiRelayout",h,F.getUpdateObj()))}function Ie(){f(h)||Qt(P)}function Ve(Ct,jt){if(E.type==="path"){var Nt=function(it){return it},Lt=Nt,Xe=Nt;R?Y("xanchor",E.xanchor=ye(he+Ct)):(Lt=function(Ye){return ye(me(Ye)+Ct)},ae&&ae.type==="date"&&(Lt=b.encodeDate(Lt))),O?Y("yanchor",E.yanchor=be(K+jt)):(Xe=function(Ye){return be(xe(Ye)+jt)},_e&&_e.type==="date"&&(Xe=b.encodeDate(Xe))),Y("path",E.path=M(se,Lt,Xe))}else R?Y("xanchor",E.xanchor=ye(he+Ct)):(Y("x0",E.x0=ye(ee+Ct)),Y("x1",E.x1=ye(X+Ct))),O?Y("yanchor",E.yanchor=be(K+jt)):(Y("y0",E.y0=be(j+jt)),Y("y1",E.y1=be(ie+jt)));L.attr("d",g(h,E)),Ft(P,E)}function dt(Ct,jt){if(G){var Nt=function(Wt){return Wt},Lt=Nt,Xe=Nt;R?Y("xanchor",E.xanchor=ye(he+Ct)):(Lt=function(sr){return ye(me(sr)+Ct)},ae&&ae.type==="date"&&(Lt=b.encodeDate(Lt))),O?Y("yanchor",E.yanchor=be(K+jt)):(Xe=function(sr){return be(xe(sr)+jt)},_e&&_e.type==="date"&&(Xe=b.encodeDate(Xe))),Y("path",E.path=M(se,Lt,Xe))}else if(z){if(He==="resize-over-start-point"){var it=ee+Ct,Ye=O?j-jt:j+jt;Y("x0",E.x0=R?it:ye(it)),Y("y0",E.y0=O?Ye:be(Ye))}else if(He==="resize-over-end-point"){var Ee=X+Ct,Ge=O?ie-jt:ie+jt;Y("x1",E.x1=R?Ee:ye(Ee)),Y("y1",E.y1=O?Ge:be(Ge))}}else{var Ke=function(Wt){return He.indexOf(Wt)!==-1},qe=Ke("n"),At=Ke("s"),yt=Ke("w"),Mt=Ke("e"),Gt=qe?$+jt:$,zt=At?U+jt:U,Ht=yt?H+Ct:H,Zt=Mt?q+Ct:q;O&&(qe&&(Gt=$-jt),At&&(zt=U-jt)),(!O&&zt-Gt>D||O&&Gt-zt>D)&&(Y(re,E[re]=O?Gt:be(Gt)),Y(Z,E[Z]=O?zt:be(zt))),Zt-Ht>I&&(Y(Q,E[Q]=R?Ht:ye(Ht)),Y(oe,E[oe]=R?Zt:ye(Zt)))}L.attr("d",g(h,E)),Ft(P,E)}function Ft(Ct,jt){(R||O)&&Nt();function Nt(){var Lt=jt.type!=="path",Xe=Ct.selectAll(".visual-cue").data([0]),it=1;Xe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":it}).classed("visual-cue",!0);var Ye=me(R?jt.xanchor:u.midRange(Lt?[jt.x0,jt.x1]:b.extractPathCoords(jt.path,o.paramIsX))),Ee=xe(O?jt.yanchor:u.midRange(Lt?[jt.y0,jt.y1]:b.extractPathCoords(jt.path,o.paramIsY)));if(Ye=b.roundPositionForSharpStrokeRendering(Ye,it),Ee=b.roundPositionForSharpStrokeRendering(Ee,it),R&&O){var Ge="M"+(Ye-1-it)+","+(Ee-1-it)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Xe.attr("d",Ge)}else if(R){var Ke="M"+(Ye-1-it)+","+(Ee-9-it)+"v18 h2 v-18 Z";Xe.attr("d",Ke)}else{var qe="M"+(Ye-9-it)+","+(Ee-1-it)+"h18 v2 h-18 Z";Xe.attr("d",qe)}}}function Qt(Ct){Ct.selectAll(".visual-cue").remove()}function Ot(Ct,jt,Nt){var Lt=jt.xref,Xe=jt.yref,it=A.getFromId(Nt,Lt),Ye=A.getFromId(Nt,Xe),Ee="";Lt!=="paper"&&!it.autorange&&(Ee+=Lt),Xe!=="paper"&&!Ye.autorange&&(Ee+=Xe),n.setClipUrl(Ct,Ee?"clip"+Nt._fullLayout._uid+Ee:null,Nt)}}function M(h,L,E){return h.replace(o.segmentRE,function(S){var P=0,F=S.charAt(0),I=o.paramIsX[F],D=o.paramIsY[F],R=o.numParams[F],O=S.substr(1).replace(o.paramRE,function(z){return P>=R||(I[P]?z=L(z):D[P]&&(z=E(z)),P++),z});return F+O})}function w(h,L){if(!!y(h)){var E=L.node(),S=+E.getAttribute("data-index");if(S>=0){if(S===h._fullLayout._activeShapeIndex){p(h);return}h._fullLayout._activeShapeIndex=S,h._fullLayout._deactivateShape=p,d(h)}}}function p(h){if(!!y(h)){var L=h._fullLayout._activeShapeIndex;L>=0&&(a(h),delete h._fullLayout._activeShapeIndex,d(h))}}function _(h){if(!!y(h)){a(h);var L=h._fullLayout._activeShapeIndex,E=(h.layout||{}).shapes||[];if(L<E.length){for(var S=[],P=0;P<E.length;P++)P!==L&&S.push(E[P]);delete h._fullLayout._activeShapeIndex,m.call("_guiRelayout",h,{shapes:S})}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(t,N,V){var m=t("../../drawing/attributes").dash,u=t("../../../lib/extend").extendFlat;N.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:u({},m,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(t,N,V){var m=32;N.exports={CIRCLE_SIDES:m,i000:0,i090:m/4,i180:m/2,i270:m/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(t,N,V){var m=t("../../color");N.exports=function(A,T,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var a=e("newshape.line.width");if(a){var i=(A||{}).plot_bgcolor||"#FFF";e("newshape.line.color",m.contrast(i)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":367}],466:[function(t,N,V){var m=t("parse-svg-path"),u=t("./constants"),A=u.CIRCLE_SIDES,T=u.SQRT2,e=t("../../selections/helpers"),a=e.p2r,i=e.r2p,n=[0,3,4,5,6,1,2],r=[0,3,4,1,2];V.writePaths=function(o){var b=o.length;if(!b)return"M0,0Z";for(var g="",d=0;d<b;d++)for(var f=o[d].length,y=0;y<f;y++){var l=o[d][y][0];if(l==="Z")g+="Z";else for(var x=o[d][y].length,c=0;c<x;c++){var M=c;l==="Q"||l==="S"?M=r[c]:l==="C"&&(M=n[c]),g+=o[d][y][M],c>0&&c<x-1&&(g+=",")}}return g},V.readPaths=function(o,b,g,d){var f=m(o),y=[],l=-1,x=function(){l++,y[l]=[]},c,M=0,w=0,p,_,h=function(){p=M,_=w};h();for(var L=0;L<f.length;L++){var E=[],S,P,F,I,D=f[L][0],R=D;switch(D){case"M":x(),M=+f[L][1],w=+f[L][2],E.push([R,M,w]),h();break;case"Q":case"S":S=+f[L][1],F=+f[L][2],M=+f[L][3],w=+f[L][4],E.push([R,M,w,S,F]);break;case"C":S=+f[L][1],F=+f[L][2],P=+f[L][3],I=+f[L][4],M=+f[L][5],w=+f[L][6],E.push([R,M,w,S,F,P,I]);break;case"T":case"L":M=+f[L][1],w=+f[L][2],E.push([R,M,w]);break;case"H":R="L",M=+f[L][1],E.push([R,M,w]);break;case"V":R="L",w=+f[L][1],E.push([R,M,w]);break;case"A":R="L";var O=+f[L][1],z=+f[L][2];+f[L][4]||(O=-O,z=-z);var G=M-O,Y=w;for(c=1;c<=A/2;c++){var ee=2*Math.PI*c/A;E.push([R,G+O*Math.cos(ee),Y+z*Math.sin(ee)])}break;case"Z":(M!==p||w!==_)&&(M=p,w=_,E.push([R,M,w]));break}for(var j=(g||{}).domain,X=b._fullLayout._size,ie=g&&g.xsizemode==="pixel",he=g&&g.ysizemode==="pixel",K=d===!1,$=0;$<E.length;$++){for(c=0;c+2<7;c+=2){var U=E[$][c+1],H=E[$][c+2];U===void 0||H===void 0||(M=U,w=H,g&&(g.xaxis&&g.xaxis.p2r?(K&&(U-=g.xaxis._offset),ie?U=i(g.xaxis,g.xanchor)+U:U=a(g.xaxis,U)):(K&&(U-=X.l),j?U=j.x[0]+U/X.w:U=U/X.w),g.yaxis&&g.yaxis.p2r?(K&&(H-=g.yaxis._offset),he?H=i(g.yaxis,g.yanchor)-H:H=a(g.yaxis,H)):(K&&(H-=X.t),j?H=j.y[1]-H/X.h:H=1-H/X.h)),E[$][c+1]=U,E[$][c+2]=H)}y[l].push(E[$].slice())}}return y};function v(o,b){return Math.abs(o-b)<=1e-6}function s(o,b){var g=b[1]-o[1],d=b[2]-o[2];return Math.sqrt(g*g+d*d)}V.pointsOnRectangle=function(o){var b=o.length;if(b!==5)return!1;for(var g=1;g<3;g++){var d=o[0][g]-o[1][g],f=o[3][g]-o[2][g];if(!v(d,f))return!1;var y=o[0][g]-o[3][g],l=o[1][g]-o[2][g];if(!v(y,l))return!1}return!v(o[0][1],o[1][1])&&!v(o[0][1],o[3][1])?!1:!!(s(o[0],o[1])*s(o[0],o[3]))},V.pointsOnEllipse=function(o){var b=o.length;if(b!==A+1)return!1;b=A;for(var g=0;g<b;g++){var d=(b*2-g)%b,f=(b/2+d)%b,y=(b/2+g)%b;if(!v(s(o[g],o[y]),s(o[d],o[f])))return!1}return!0},V.handleEllipse=function(o,b,g){if(!o)return[b,g];var d=V.ellipseOver({x0:b[0],y0:b[1],x1:g[0],y1:g[1]}),f=(d.x1+d.x0)/2,y=(d.y1+d.y0)/2,l=(d.x1-d.x0)/2,x=(d.y1-d.y0)/2;l||(l=x=x/T),x||(x=l=l/T);for(var c=[],M=0;M<A;M++){var w=M*2*Math.PI/A;c.push([f+l*Math.cos(w),y+x*Math.sin(w)])}return c},V.ellipseOver=function(o){var b=o.x0,g=o.y0,d=o.x1,f=o.y1,y=d-b,l=f-g;b-=y,g-=l;var x=(b+d)/2,c=(g+f)/2,M=T;return y*=M,l*=M,{x0:x-y,y0:c-l,x1:x+y,y1:c+l}},V.fixDatesForPaths=function(o,b,g){var d=b.type==="date",f=g.type==="date";if(!d&&!f)return o;for(var y=0;y<o.length;y++)for(var l=0;l<o[y].length;l++)for(var x=0;x+2<o[y][l].length;x+=2)d&&(o[y][l][x+1]=o[y][l][x+1].replace(" ","_")),f&&(o[y][l][x+2]=o[y][l][x+2].replace(" ","_"));return o}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(t,N,V){var m=t("../../dragelement/helpers"),u=m.drawMode,A=m.openMode,T=t("./constants"),e=T.i000,a=T.i090,i=T.i180,n=T.i270,r=T.cos45,v=T.sin45,s=t("../../selections/helpers"),o=s.p2r,b=s.r2p,g=t(".././handle_outline"),d=g.clearOutline,f=t("./helpers"),y=f.readPaths,l=f.writePaths,x=f.ellipseOver,c=f.fixDatesForPaths;N.exports=function(w,p){if(!!w.length){var _=w[0][0];if(!!_){var h=_.getAttribute("d"),L=p.gd,E=L._fullLayout.newshape,S=p.plotinfo,P=S.xaxis,F=S.yaxis,I=!!S.domain||!S.xaxis,D=!!S.domain||!S.yaxis,R=p.isActiveShape,O=p.dragmode,z=(L.layout||{}).shapes||[];if(!u(O)&&R!==void 0){var G=L._fullLayout._activeShapeIndex;if(G<z.length)switch(L._fullLayout.shapes[G].type){case"rect":O="drawrect";break;case"circle":O="drawcircle";break;case"line":O="drawline";break;case"path":var Y=z[G].path||"";Y[Y.length-1]==="Z"?O="drawclosedpath":O="drawopenpath";break}}var ee=A(O),j=y(h,L,S,R),X={editable:!0,xref:I?"paper":P._id,yref:D?"paper":F._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};ee||(X.fillcolor=E.fillcolor,X.fillrule=E.fillrule);var ie;if(j.length===1&&(ie=j[0]),ie&&ie.length===5&&O==="drawrect")X.type="rect",X.x0=ie[0][1],X.y0=ie[0][2],X.x1=ie[2][1],X.y1=ie[2][2];else if(ie&&O==="drawline")X.type="line",X.x0=ie[0][1],X.y0=ie[0][2],X.x1=ie[1][1],X.y1=ie[1][2];else if(ie&&O==="drawcircle"){X.type="circle";var he=ie[e][1],K=ie[a][1],$=ie[i][1],U=ie[n][1],H=ie[e][2],q=ie[a][2],re=ie[i][2],Z=ie[n][2],Q=S.xaxis&&(S.xaxis.type==="date"||S.xaxis.type==="log"),oe=S.yaxis&&(S.yaxis.type==="date"||S.yaxis.type==="log");Q&&(he=b(S.xaxis,he),K=b(S.xaxis,K),$=b(S.xaxis,$),U=b(S.xaxis,U)),oe&&(H=b(S.yaxis,H),q=b(S.yaxis,q),re=b(S.yaxis,re),Z=b(S.yaxis,Z));var se=(K+U)/2,ae=(H+re)/2,le=(U-K+$-he)/2,_e=(Z-q+re-H)/2,fe=x({x0:se,y0:ae,x1:se+le*r,y1:ae+_e*v});Q&&(fe.x0=o(S.xaxis,fe.x0),fe.x1=o(S.xaxis,fe.x1)),oe&&(fe.y0=o(S.yaxis,fe.y0),fe.y1=o(S.yaxis,fe.y1)),X.x0=fe.x0,X.y0=fe.y0,X.x1=fe.x1,X.y1=fe.y1}else X.type="path",P&&F&&c(j,P,F),X.path=l(j),ie=null;d(L);for(var me=p.editHelpers,xe=(me||{}).modifyItem,ye=[],be=0;be<z.length;be++){var ke=L._fullLayout.shapes[be];if(ye[be]=ke._input,R!==void 0&&be===L._fullLayout._activeShapeIndex){var De=X;switch(ke.type){case"line":case"rect":case"circle":xe("x0",De.x0),xe("x1",De.x1),xe("y0",De.y0),xe("y1",De.y1);break;case"path":xe("path",De.path);break}}}return R===void 0?(ye.push(X),ye):me?me.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(t,N,V){function m(A){var T=A._fullLayout._zoomlayer;T&&T.selectAll(".outline-controllers").remove()}function u(A){var T=A._fullLayout._zoomlayer;T&&T.selectAll(".select-outline").remove(),A._fullLayout._outlining=!1}N.exports={clearOutlineControllers:m,clearOutline:u}},{}],469:[function(t,N,V){var m=t("./constants"),u=t("../../lib"),A=t("../../plots/cartesian/axes");V.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(a){return a}},V.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(a){return a}},V.decodeDate=function(e){return function(a){return a.replace&&(a=a.replace("_"," ")),e(a)}},V.encodeDate=function(e){return function(a){return e(a).replace(" ","_")}},V.extractPathCoords=function(e,a,i){var n=[],r=e.match(m.segmentRE);return r.forEach(function(v){var s=a[v.charAt(0)].drawn;if(s!==void 0){var o=v.substr(1).match(m.paramRE);if(!(!o||o.length<s)){var b=o[s],g=i?b:u.cleanNumber(b);n.push(g)}}}),n},V.getDataToPixel=function(e,a,i,n){var r=e._fullLayout._size,v;if(a)if(n==="domain")v=function(o){return a._length*(i?1-o:o)+a._offset};else{var s=V.shapePositionToRange(a);v=function(o){return a._offset+a.r2p(s(o,!0))},a.type==="date"&&(v=V.decodeDate(v))}else i?v=function(o){return r.t+r.h*(1-o)}:v=function(o){return r.l+r.w*o};return v},V.getPixelToData=function(e,a,i,n){var r=e._fullLayout._size,v;if(a)if(n==="domain")v=function(o){var b=(o-a._offset)/a._length;return i?1-b:b};else{var s=V.rangeToShapePosition(a);v=function(o){return s(a.p2r(o-a._offset))}}else i?v=function(o){return 1-(o-r.t)/r.h}:v=function(o){return(o-r.l)/r.w};return v},V.roundPositionForSharpStrokeRendering=function(e,a){var i=Math.round(a%2)===1,n=Math.round(e);return i?n+.5:n},V.makeShapesOptionsAndPlotinfo=function(e,a){var i=e._fullLayout.shapes[a]||{},n=e._fullLayout._plots[i.xref+i.yref],r=!!n;return r?n._hadPlotinfo=!0:(n={},i.xref&&i.xref!=="paper"&&(n.xaxis=e._fullLayout[i.xref+"axis"]),i.yref&&i.yref!=="paper"&&(n.yaxis=e._fullLayout[i.yref+"axis"])),n.xsizemode=i.xsizemode,n.ysizemode=i.ysizemode,n.xanchor=i.xanchor,n.yanchor=i.yanchor,{options:i,plotinfo:n}},V.makeSelectionsOptionsAndPlotinfo=function(e,a){var i=e._fullLayout.selections[a]||{},n=e._fullLayout._plots[i.xref+i.yref],r=!!n;return r?n._hadPlotinfo=!0:(n={},i.xref&&(n.xaxis=e._fullLayout[i.xref+"axis"]),i.yref&&(n.yaxis=e._fullLayout[i.yref+"axis"])),{options:i,plotinfo:n}},V.getPathString=function(e,a){var i=a.type,n=A.getRefType(a.xref),r=A.getRefType(a.yref),v=A.getFromId(e,a.xref),s=A.getFromId(e,a.yref),o=e._fullLayout._size,b,g,d,f,y,l,x,c;if(v?n==="domain"?g=function(F){return v._offset+v._length*F}:(b=V.shapePositionToRange(v),g=function(F){return v._offset+v.r2p(b(F,!0))}):g=function(F){return o.l+o.w*F},s?r==="domain"?f=function(F){return s._offset+s._length*(1-F)}:(d=V.shapePositionToRange(s),f=function(F){return s._offset+s.r2p(d(F,!0))}):f=function(F){return o.t+o.h*(1-F)},i==="path")return v&&v.type==="date"&&(g=V.decodeDate(g)),s&&s.type==="date"&&(f=V.decodeDate(f)),T(a,g,f);if(a.xsizemode==="pixel"){var M=g(a.xanchor);y=M+a.x0,l=M+a.x1}else y=g(a.x0),l=g(a.x1);if(a.ysizemode==="pixel"){var w=f(a.yanchor);x=w-a.y0,c=w-a.y1}else x=f(a.y0),c=f(a.y1);if(i==="line")return"M"+y+","+x+"L"+l+","+c;if(i==="rect")return"M"+y+","+x+"H"+l+"V"+c+"H"+y+"Z";var p=(y+l)/2,_=(x+c)/2,h=Math.abs(p-y),L=Math.abs(_-x),E="A"+h+","+L,S=p+h+","+_,P=p+","+(_-L);return"M"+S+E+" 0 1,1 "+P+E+" 0 0,1 "+S+"Z"};function T(e,a,i){var n=e.path,r=e.xsizemode,v=e.ysizemode,s=e.xanchor,o=e.yanchor;return n.replace(m.segmentRE,function(b){var g=0,d=b.charAt(0),f=m.paramIsX[d],y=m.paramIsY[d],l=m.numParams[d],x=b.substr(1).replace(m.paramRE,function(c){return f[g]?r==="pixel"?c=a(s)+Number(c):c=a(c):y[g]&&(v==="pixel"?c=i(o)-Number(c):c=i(c)),g++,g>l&&(c="X"),c});return g>l&&(x=x.replace(/[\s,]*X.*/,""),u.log("Ignoring extra params in segment "+b)),d+x})}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(t,N,V){var m=t("./draw");N.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewShapeDefaults:t("./draw_newshape/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:m.draw,drawOne:m.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(t,N,V){var m=t("../../plots/font_attributes"),u=t("../../plots/pad_attributes"),A=t("../../lib/extend").extendDeepAll,T=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/animation_attributes"),a=t("../../plot_api/plot_template").templatedArray,i=t("./constants"),n=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});N.exports=T(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:n,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:A(u({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:m({})},font:m({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(t,N,V){N.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("./constants"),e=T.name,a=A.steps;N.exports=function(v,s){u(v,s,{name:e,handleItemDefaults:i})};function i(r,v,s){function o(c,M){return m.coerce(r,v,A,c,M)}for(var b=u(r,v,{name:"steps",handleItemDefaults:n}),g=0,d=0;d<b.length;d++)b[d].visible&&g++;var f;if(g<2?f=v.visible=!1:f=o("visible"),!!f){v._stepCount=g;var y=v._visibleSteps=m.filterVisible(b),l=o("active");(b[l]||{}).visible||(v.active=y[0]._index),o("x"),o("y"),m.noneOrAll(r,v,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),m.coerceFont(o,"font",s.font);var x=o("currentvalue.visible");x&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),m.coerceFont(o,"currentvalue.font",v.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function n(r,v){function s(g,d){return m.coerce(r,v,a,g,d)}var o;if(r.method!=="skip"&&!Array.isArray(r.args)?o=v.visible=!1:o=s("visible"),o){s("method"),s("args");var b=s("label","step-"+v._index);s("value",b),s("execute")}}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../plots/plots"),A=t("../color"),T=t("../drawing"),e=t("../../lib"),a=e.strTranslate,i=t("../../lib/svg_text_utils"),n=t("../../plot_api/plot_template").arrayEditor,r=t("./constants"),v=t("../../constants/alignment"),s=v.LINE_SPACING,o=v.FROM_TL,b=v.FROM_BR;N.exports=function(O){var z=O._fullLayout,G=d(z,O),Y=z._infolayer.selectAll("g."+r.containerClassName).data(G.length>0?[0]:[]);Y.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize");function ee(he){he._commandObserver&&(he._commandObserver.remove(),delete he._commandObserver),u.autoMargin(O,g(he))}if(Y.exit().each(function(){m.select(this).selectAll("g."+r.groupClassName).each(ee)}).remove(),G.length!==0){var j=Y.selectAll("g."+r.groupClassName).data(G,f);j.enter().append("g").classed(r.groupClassName,!0),j.exit().each(ee).remove();for(var X=0;X<G.length;X++){var ie=G[X];y(O,ie)}j.each(function(he){var K=m.select(this);E(he),u.manageCommandObserver(O,he,he._visibleSteps,function($){var U=K.data()[0];U.active!==$.index&&(U._dragging||_(O,K,U,$.index,!1,!0))}),l(O,m.select(this),he)})}};function g(R){return r.autoMarginIdRoot+R._index}function d(R,O){for(var z=R[r.name],G=[],Y=0;Y<z.length;Y++){var ee=z[Y];!ee.visible||(ee._gd=O,G.push(ee))}return G}function f(R){return R._index}function y(R,O){var z=T.tester.selectAll("g."+r.labelGroupClass).data(O._visibleSteps);z.enter().append("g").classed(r.labelGroupClass,!0);var G=0,Y=0;z.each(function(q){var re=m.select(this),Z=M(re,{step:q},O),Q=Z.node();if(Q){var oe=T.bBox(Q);Y=Math.max(Y,oe.height),G=Math.max(G,oe.width)}}),z.remove();var ee=O._dims={};ee.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var j=R._fullLayout._size;ee.lx=j.l+j.w*O.x,ee.ly=j.t+j.h*(1-O.y),O.lenmode==="fraction"?ee.outerLength=Math.round(j.w*O.len):ee.outerLength=O.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-O.pad.l-O.pad.r);var X=ee.inputAreaLength-2*r.stepInset,ie=X/(O._stepCount-1),he=G+r.labelPadding;if(ee.labelStride=Math.max(1,Math.ceil(he/ie)),ee.labelHeight=Y,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,O.currentvalue.visible){var K=T.tester.append("g");z.each(function(q){var re=x(K,O,q.label),Z=re.node()&&T.bBox(re.node())||{width:0,height:0},Q=i.lineCount(re);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(Z.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(Z.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,Q)}),ee.currentValueTotalHeight=ee.currentValueHeight+O.currentvalue.offset,K.remove()}ee.height=ee.currentValueTotalHeight+r.tickOffset+O.ticklen+r.labelOffset+ee.labelHeight+O.pad.t+O.pad.b;var $="left";e.isRightAnchor(O)&&(ee.lx-=ee.outerLength,$="right"),e.isCenterAnchor(O)&&(ee.lx-=ee.outerLength/2,$="center");var U="top";e.isBottomAnchor(O)&&(ee.ly-=ee.height,U="bottom"),e.isMiddleAnchor(O)&&(ee.ly-=ee.height/2,U="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var H={y:O.y,b:ee.height*b[U],t:ee.height*o[U]};O.lenmode==="fraction"?(H.l=0,H.xl=O.x-O.len*o[$],H.r=0,H.xr=O.x+O.len*b[$]):(H.x=O.x,H.l=ee.outerLength*o[$],H.r=ee.outerLength*b[$]),u.autoMargin(R,g(O),H)}function l(R,O,z){(z.steps[z.active]||{}).visible||(z.active=z._visibleSteps[0]._index),O.call(x,z).call(D,z).call(w,z).call(L,z).call(I,R,z).call(c,R,z);var G=z._dims;T.setTranslate(O,G.lx+z.pad.l,G.ly+z.pad.t),O.call(S,z,!1),O.call(x,z)}function x(R,O,z){if(!!O.currentvalue.visible){var G=O._dims,Y,ee;switch(O.currentvalue.xanchor){case"right":Y=G.inputAreaLength-r.currentValueInset-G.currentValueMaxWidth,ee="left";break;case"center":Y=G.inputAreaLength*.5,ee="middle";break;default:Y=r.currentValueInset,ee="left"}var j=e.ensureSingle(R,"text",r.labelClass,function(U){U.attr({"text-anchor":ee,"data-notex":1})}),X=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof z=="string")X+=z;else{var ie=O.steps[O.active].label,he=O._gd._fullLayout._meta;he&&(ie=e.templateString(ie,he)),X+=ie}O.currentvalue.suffix&&(X+=O.currentvalue.suffix),j.call(T.font,O.currentvalue.font).text(X).call(i.convertToTspans,O._gd);var K=i.lineCount(j),$=(G.currentValueMaxLines+1-K)*O.currentvalue.font.size*s;return i.positionText(j,Y,$),j}}function c(R,O,z){var G=e.ensureSingle(R,"rect",r.gripRectClass,function(Y){Y.call(h,O,R,z).style("pointer-events","all")});G.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(A.stroke,z.bordercolor).call(A.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function M(R,O,z){var G=e.ensureSingle(R,"text",r.labelClass,function(j){j.attr({"text-anchor":"middle","data-notex":1})}),Y=O.step.label,ee=z._gd._fullLayout._meta;return ee&&(Y=e.templateString(Y,ee)),G.call(T.font,z.font).text(Y).call(i.convertToTspans,z._gd),G}function w(R,O){var z=e.ensureSingle(R,"g",r.labelsClass),G=O._dims,Y=z.selectAll("g."+r.labelGroupClass).data(G.labelSteps);Y.enter().append("g").classed(r.labelGroupClass,!0),Y.exit().remove(),Y.each(function(ee){var j=m.select(this);j.call(M,ee,O),T.setTranslate(j,P(O,ee.fraction),r.tickOffset+O.ticklen+O.font.size*s+r.labelOffset+G.currentValueTotalHeight)})}function p(R,O,z,G,Y){var ee=Math.round(G*(z._stepCount-1)),j=z._visibleSteps[ee]._index;j!==z.active&&_(R,O,z,j,!0,Y)}function _(R,O,z,G,Y,ee){var j=z.active;z.active=G,n(R.layout,r.name,z).applyUpdate("active",G);var X=z.steps[z.active];O.call(S,z,ee),O.call(x,z),R.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:Y,previousActive:j}),X&&X.method&&Y&&(O._nextMethod?(O._nextMethod.step=X,O._nextMethod.doCallback=Y,O._nextMethod.doTransition=ee):(O._nextMethod={step:X,doCallback:Y,doTransition:ee},O._nextMethodRaf=window.requestAnimationFrame(function(){var ie=O._nextMethod.step;!ie.method||(ie.execute&&u.executeAPICommand(R,ie.method,ie.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function h(R,O,z){var G=z.node(),Y=m.select(O);function ee(){return z.data()[0]}function j(){var X=ee();O.emit("plotly_sliderstart",{slider:X});var ie=z.select("."+r.gripRectClass);m.event.stopPropagation(),m.event.preventDefault(),ie.call(A.fill,X.activebgcolor);var he=F(X,m.mouse(G)[0]);p(O,z,X,he,!0),X._dragging=!0;function K(){var U=ee(),H=F(U,m.mouse(G)[0]);p(O,z,U,H,!1)}Y.on("mousemove",K),Y.on("touchmove",K);function $(){var U=ee();U._dragging=!1,ie.call(A.fill,U.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),O.emit("plotly_sliderend",{slider:U,step:U.steps[U.active]})}Y.on("mouseup",$),Y.on("touchend",$)}R.on("mousedown",j),R.on("touchstart",j)}function L(R,O){var z=R.selectAll("rect."+r.tickRectClass).data(O._visibleSteps),G=O._dims;z.enter().append("rect").classed(r.tickRectClass,!0),z.exit().remove(),z.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(Y,ee){var j=ee%G.labelStride===0,X=m.select(this);X.attr({height:j?O.ticklen:O.minorticklen}).call(A.fill,O.tickcolor),T.setTranslate(X,P(O,ee/(O._stepCount-1))-.5*O.tickwidth,(j?r.tickOffset:r.minorTickOffset)+G.currentValueTotalHeight)})}function E(R){var O=R._dims;O.labelSteps=[];for(var z=R._stepCount,G=0;G<z;G+=O.labelStride)O.labelSteps.push({fraction:G/(z-1),step:R._visibleSteps[G]})}function S(R,O,z){for(var G=R.select("rect."+r.gripRectClass),Y=0,ee=0;ee<O._stepCount;ee++)if(O._visibleSteps[ee]._index===O.active){Y=ee;break}var j=P(O,Y/(O._stepCount-1));if(!O._invokingCommand){var X=G;z&&O.transition.duration>0&&(X=X.transition().duration(O.transition.duration).ease(O.transition.easing)),X.attr("transform",a(j-r.gripWidth*.5,O._dims.currentValueTotalHeight))}}function P(R,O){var z=R._dims;return z.inputAreaStart+r.stepInset+(z.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,O))}function F(R,O){var z=R._dims;return Math.min(1,Math.max(0,(O-r.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*r.stepInset-2*z.inputAreaStart)))}function I(R,O,z){var G=z._dims,Y=e.ensureSingle(R,"rect",r.railTouchRectClass,function(ee){ee.call(h,O,R,z).style("pointer-events","all")});Y.attr({width:G.inputAreaLength,height:Math.max(G.inputAreaWidth,r.tickOffset+z.ticklen+G.labelHeight)}).call(A.fill,z.bgcolor).attr("opacity",0),T.setTranslate(Y,0,G.currentValueTotalHeight)}function D(R,O){var z=O._dims,G=z.inputAreaLength-r.railInset*2,Y=e.ensureSingle(R,"rect",r.railRectClass);Y.attr({width:G,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(A.stroke,O.bordercolor).call(A.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),T.setTranslate(Y,r.railInset,(z.inputAreaWidth-r.railWidth)*.5+z.currentValueTotalHeight)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(t,N,V){var m=t("./constants");N.exports={moduleType:"component",name:m.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib"),a=e.strTranslate,i=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),v=t("../../constants/interactions"),s=t("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;function b(g,d,f){var y=f.propContainer,l=f.propName,x=f.placeholder,c=f.traceIndex,M=f.avoid||{},w=f.attributes,p=f.transform,_=f.containerGroup,h=g._fullLayout,L=1,E=!1,S=y.title,P=(S&&S.text?S.text:"").trim(),F=S&&S.font?S.font:{},I=F.family,D=F.size,R=F.color,O;l==="title.text"?O="titleText":l.indexOf("axis")!==-1?O="axisTitleText":l.indexOf("colorbar"!==-1)&&(O="colorbarTitleText");var z=g._context.edits[O];P===""?L=0:P.replace(o," % ")===x.replace(o," % ")&&(L=.2,E=!0,z||(P="")),f._meta?P=e.templateString(P,f._meta):h._meta&&(P=e.templateString(P,h._meta));var G=P||z,Y;_||(_=e.ensureSingle(h._infolayer,"g","g-"+d),Y=h._hColorbarMoveTitle);var ee=_.selectAll("text").data(G?[0]:[]);if(ee.enter().append("text"),ee.text(P).attr("class",d),ee.exit().remove(),!G)return _;function j(K){e.syncOrAsync([X,ie],K)}function X(K){var $;return!p&&Y&&(p={}),p?($="",p.rotate&&($+="rotate("+[p.rotate,w.x,w.y]+")"),(p.offset||Y)&&($+=a(0,(p.offset||0)-(Y||0)))):$=null,K.attr("transform",$),K.style({"font-family":I,"font-size":m.round(D,2)+"px",fill:n.rgb(R),opacity:L*n.opacity(R),"font-weight":A.fontWeight}).attr(w).call(r.convertToTspans,g),A.previousPromises(g)}function ie(K){var $=m.select(K.node().parentNode);if(M&&M.selection&&M.side&&P){$.attr("transform",null);var U=s[M.side],H=M.side==="left"||M.side==="top"?-1:1,q=u(M.pad)?M.pad:2,re=i.bBox($.node()),Z={left:0,top:0,right:h.width,bottom:h.height},Q=M.maxShift||H*(Z[M.side]-re[M.side]),oe=0;if(Q<0)oe=Q;else{var se=M.offsetLeft||0,ae=M.offsetTop||0;re.left-=se,re.right-=se,re.top-=ae,re.bottom-=ae,M.selection.each(function(){var _e=i.bBox(this);e.bBoxIntersect(re,_e,q)&&(oe=Math.max(oe,H*(_e[M.side]-re[U])+q))}),oe=Math.min(Q,oe)}if(oe>0||Q<0){var le={left:[-oe,0],right:[oe,0],top:[0,-oe],bottom:[0,oe]}[M.side];$.attr("transform",a(le[0],le[1]))}}}ee.call(j);function he(){L=0,E=!0,ee.text(x).on("mouseover.opacity",function(){m.select(this).transition().duration(v.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(v.HIDE_PLACEHOLDER).style("opacity",0)})}return z&&(P?ee.on(".opacity",null):he(),ee.call(r.makeEditable,{gd:g}).on("edit",function(K){c!==void 0?T.call("_guiRestyle",g,l,K,c):T.call("_guiRelayout",g,l,K)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(j)}).on("input",function(K){this.text(K||" ").call(r.positionText,w.x,w.y)})),ee.classed("js-placeholder",E),_}N.exports={draw:b}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(t,N,V){var m=t("../../plots/font_attributes"),u=t("../color/attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/pad_attributes"),a=t("../../plot_api/plot_template").templatedArray,i=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});N.exports=T(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:A(e({editType:"arraydraw"}),{}),font:m({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:u.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(t,N,V){N.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],479:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("./constants"),e=T.name,a=A.buttons;N.exports=function(v,s){var o={name:e,handleItemDefaults:i};u(v,s,o)};function i(r,v,s){function o(d,f){return m.coerce(r,v,A,d,f)}var b=u(r,v,{name:"buttons",handleItemDefaults:n}),g=o("visible",b.length>0);!g||(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),m.noneOrAll(r,v,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),m.coerceFont(o,"font",s.font),o("bgcolor",s.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function n(r,v){function s(b,g){return m.coerce(r,v,a,b,g)}var o=s("visible",r.method==="skip"||Array.isArray(r.args));o&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../plots/plots"),A=t("../color"),T=t("../drawing"),e=t("../../lib"),a=t("../../lib/svg_text_utils"),i=t("../../plot_api/plot_template").arrayEditor,n=t("../../constants/alignment").LINE_SPACING,r=t("./constants"),v=t("./scrollbox");N.exports=function(F){var I=F._fullLayout,D=e.filterVisible(I[r.name]);function R(ie){u.autoMargin(F,L(ie))}var O=I._menulayer.selectAll("g."+r.containerClassName).data(D.length>0?[0]:[]);if(O.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){m.select(this).selectAll("g."+r.headerGroupClassName).each(R)}).remove(),D.length!==0){var z=O.selectAll("g."+r.headerGroupClassName).data(D,s);z.enter().append("g").classed(r.headerGroupClassName,!0);for(var G=e.ensureSingle(O,"g",r.dropdownButtonGroupClassName,function(ie){ie.style("pointer-events","all")}),Y=0;Y<D.length;Y++){var ee=D[Y];h(F,ee)}var j="updatemenus"+I._uid,X=new v(F,G,j);z.enter().size()&&(G.node().parentNode.appendChild(G.node()),G.call(S)),z.exit().each(function(ie){G.call(S),R(ie)}).remove(),z.each(function(ie){var he=m.select(this),K=ie.type==="dropdown"?G:null;u.manageCommandObserver(F,ie,ie.buttons,function($){g(F,ie,ie.buttons[$.index],he,K,X,$.index,!0)}),ie.type==="dropdown"?(d(F,he,G,X,ie),b(G,ie)&&f(F,he,G,X,ie)):f(F,he,null,null,ie)})}};function s(P){return P._index}function o(P){return+P.attr(r.menuIndexAttrName)==-1}function b(P,F){return+P.attr(r.menuIndexAttrName)===F._index}function g(P,F,I,D,R,O,z,G){F.active=z,i(P.layout,r.name,F).applyUpdate("active",z),F.type==="buttons"?f(P,D,null,null,F):F.type==="dropdown"&&(R.attr(r.menuIndexAttrName,"-1"),d(P,D,R,O,F),G||f(P,D,R,O,F))}function d(P,F,I,D,R){var O=e.ensureSingle(F,"g",r.headerClassName,function(ie){ie.style("pointer-events","all")}),z=R._dims,G=R.active,Y=R.buttons[G]||r.blankHeaderOpts,ee={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},j={width:z.headerWidth,height:z.headerHeight};O.call(x,R,Y,P).call(E,R,ee,j);var X=e.ensureSingle(F,"text",r.headerArrowClassName,function(ie){ie.attr("text-anchor","end").call(T.font,R.font).text(r.arrowSymbol[R.direction])});X.attr({x:z.headerWidth-r.arrowOffsetX+R.pad.l,y:z.headerHeight/2+r.textOffsetY+R.pad.t}),O.on("click",function(){I.call(S,String(b(I,R)?-1:R._index)),f(P,F,I,D,R)}),O.on("mouseover",function(){O.call(p)}),O.on("mouseout",function(){O.call(_,R)}),T.setTranslate(F,z.lx,z.ly)}function f(P,F,I,D,R){I||(I=F,I.attr("pointer-events","all"));var O=!o(I)||R.type==="buttons"?R.buttons:[],z=R.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,G=I.selectAll("g."+z).data(e.filterVisible(O)),Y=G.enter().append("g").classed(z,!0),ee=G.exit();R.type==="dropdown"?(Y.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var j=0,X=0,ie=R._dims,he=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(he?X=ie.headerHeight+r.gapButtonHeader:j=ie.headerWidth+r.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(X=-r.gapButtonHeader+r.gapButton-ie.openHeight),R.type==="dropdown"&&R.direction==="left"&&(j=-r.gapButtonHeader+r.gapButton-ie.openWidth);var K={x:ie.lx+j+R.pad.l,y:ie.ly+X+R.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},$={l:K.x+R.borderwidth,t:K.y+R.borderwidth};G.each(function(U,H){var q=m.select(this);q.call(x,R,U,P).call(E,R,K),q.on("click",function(){m.event.defaultPrevented||(U.execute&&(U.args2&&R.active===H?(g(P,R,U,F,I,D,-1),u.executeAPICommand(P,U.method,U.args2)):(g(P,R,U,F,I,D,H),u.executeAPICommand(P,U.method,U.args))),P.emit("plotly_buttonclicked",{menu:R,button:U,active:R.active}))}),q.on("mouseover",function(){q.call(p)}),q.on("mouseout",function(){q.call(_,R),G.call(w,R)})}),G.call(w,R),he?($.w=Math.max(ie.openWidth,ie.headerWidth),$.h=K.y-$.t):($.w=K.x-$.l,$.h=Math.max(ie.openHeight,ie.headerHeight)),$.direction=R.direction,D&&(G.size()?y(P,F,I,D,R,$):l(D))}function y(P,F,I,D,R,O){var z=R.direction,G=z==="up"||z==="down",Y=R._dims,ee=R.active,j,X,ie;if(G)for(X=0,ie=0;ie<ee;ie++)X+=Y.heights[ie]+r.gapButton;else for(j=0,ie=0;ie<ee;ie++)j+=Y.widths[ie]+r.gapButton;D.enable(O,j,X),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(P){var F=!!P.hbar,I=!!P.vbar;F&&P.hbar.transition().attr("opacity","0").each("end",function(){F=!1,I||P.disable()}),I&&P.vbar.transition().attr("opacity","0").each("end",function(){I=!1,F||P.disable()})}function x(P,F,I,D){P.call(c,F).call(M,F,I,D)}function c(P,F){var I=e.ensureSingle(P,"rect",r.itemRectClassName,function(D){D.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});I.call(A.stroke,F.bordercolor).call(A.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function M(P,F,I,D){var R=e.ensureSingle(P,"text",r.itemTextClassName,function(G){G.attr({"text-anchor":"start","data-notex":1})}),O=I.label,z=D._fullLayout._meta;z&&(O=e.templateString(O,z)),R.call(T.font,F.font).text(O).call(a.convertToTspans,D)}function w(P,F){var I=F.active;P.each(function(D,R){var O=m.select(this);R===I&&F.showactive&&O.select("rect."+r.itemRectClassName).call(A.fill,r.activeColor)})}function p(P){P.select("rect."+r.itemRectClassName).call(A.fill,r.hoverColor)}function _(P,F){P.select("rect."+r.itemRectClassName).call(A.fill,F.bgcolor)}function h(P,F){var I=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=T.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(F.buttons));D.enter().append("g").classed(r.dropdownButtonClassName,!0);var R=["up","down"].indexOf(F.direction)!==-1;D.each(function(j,X){var ie=m.select(this);ie.call(x,F,j,P);var he=ie.select("."+r.itemTextClassName),K=he.node()&&T.bBox(he.node()).width,$=Math.max(K+r.textPadX,r.minWidth),U=F.font.size*n,H=a.lineCount(he),q=Math.max(U*H,r.minHeight)+r.textOffsetY;q=Math.ceil(q),$=Math.ceil($),I.widths[X]=$,I.heights[X]=q,I.height1=Math.max(I.height1,q),I.width1=Math.max(I.width1,$),R?(I.totalWidth=Math.max(I.totalWidth,$),I.openWidth=I.totalWidth,I.totalHeight+=q+r.gapButton,I.openHeight+=q+r.gapButton):(I.totalWidth+=$+r.gapButton,I.openWidth+=$+r.gapButton,I.totalHeight=Math.max(I.totalHeight,q),I.openHeight=I.totalHeight)}),R?I.totalHeight-=r.gapButton:I.totalWidth-=r.gapButton,I.headerWidth=I.width1+r.arrowPadX,I.headerHeight=I.height1,F.type==="dropdown"&&(R?(I.width1+=r.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=r.arrowPadX),D.remove();var O=I.totalWidth+F.pad.l+F.pad.r,z=I.totalHeight+F.pad.t+F.pad.b,G=P._fullLayout._size;I.lx=G.l+G.w*F.x,I.ly=G.t+G.h*(1-F.y);var Y="left";e.isRightAnchor(F)&&(I.lx-=O,Y="right"),e.isCenterAnchor(F)&&(I.lx-=O/2,Y="center");var ee="top";e.isBottomAnchor(F)&&(I.ly-=z,ee="bottom"),e.isMiddleAnchor(F)&&(I.ly-=z/2,ee="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),u.autoMargin(P,L(F),{x:F.x,y:F.y,l:O*({right:1,center:.5}[Y]||0),r:O*({left:1,center:.5}[Y]||0),b:z*({top:1,middle:.5}[ee]||0),t:z*({bottom:1,middle:.5}[ee]||0)})}function L(P){return r.autoMarginIdRoot+P._index}function E(P,F,I,D){D=D||{};var R=P.select("."+r.itemRectClassName),O=P.select("."+r.itemTextClassName),z=F.borderwidth,G=I.index,Y=F._dims;T.setTranslate(P,z+I.x,z+I.y);var ee=["up","down"].indexOf(F.direction)!==-1,j=D.height||(ee?Y.heights[G]:Y.height1);R.attr({x:0,y:0,width:D.width||(ee?Y.width1:Y.widths[G]),height:j});var X=F.font.size*n,ie=a.lineCount(O),he=(ie-1)*X/2;a.positionText(O,r.textOffsetX,j/2-he+r.textOffsetY),ee?I.y+=Y.heights[G]+I.yPad:I.x+=Y.widths[G]+I.xPad,I.index++}function S(P,F){P.attr(r.menuIndexAttrName,F||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(t,N,V){arguments[4][475][0].apply(V,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(t,N,V){N.exports=e;var m=t("@plotly/d3"),u=t("../color"),A=t("../drawing"),T=t("../../lib");function e(a,i,n){this.gd=a,this.container=i,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(i,n,r){var v=this.gd._fullLayout,s=v.width,o=v.height;this.position=i;var b=this.position.l,g=this.position.w,d=this.position.t,f=this.position.h,y=this.position.direction,l=y==="down",x=y==="left",c=y==="right",M=y==="up",w=g,p=f,_,h,L,E;!l&&!x&&!c&&!M&&(this.position.direction="down",l=!0);var S=l||M;S?(_=b,h=_+w,l?(L=d,E=Math.min(L+p,o),p=E-L):(E=d+p,L=Math.max(E-p,0),p=E-L)):(L=d,E=L+p,x?(h=b+w,_=Math.max(h-w,0),w=h-_):(_=b,h=Math.min(_+w,s),w=h-_)),this._box={l:_,t:L,w,h:p};var P=g>w,F=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,D=b,R=d+f;R+I>o&&(R=o-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(u.fill,e.barColor),P?(this.hbar=O.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:R,width:F,height:I}),this._hbarXMin=D+F/2,this._hbarTranslateMax=w-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=f>p,G=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,ee=b+g,j=d;ee+G>s&&(ee=s-G);var X=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(u.fill,e.barColor),z?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:ee,y:j,width:G,height:Y}),this._vbarYMin=j+Y/2,this._vbarTranslateMax=p-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var ie=this.id,he=_-.5,K=z?h+G+.5:h+.5,$=L-.5,U=P?E+I+.5:E+.5,H=v._topdefs.selectAll("#"+ie).data(P||z?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",ie).append("rect"),P||z?(this._clipRect=H.select("rect").attr({x:Math.floor(he),y:Math.floor($),width:Math.ceil(K)-Math.floor(he),height:Math.ceil(U)-Math.floor($)}),this.container.call(A.setClipUrl,ie,this.gd),this.bg.attr({x:b,y:d,width:g,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(A.setClipUrl,null),delete this._clipRect),P||z){var q=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var re=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault(),m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(re),z&&this.vbar.on(".drag",null).call(re)}this.setTranslate(n,r)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(A.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i-=m.event.dx),this.vbar&&(n-=m.event.dy),this.setTranslate(i,n)},e.prototype._onBoxWheel=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i+=m.event.deltaY),this.vbar&&(n+=m.event.deltaY),this.setTranslate(i,n)},e.prototype._onBarDrag=function(){var i=this.translateX,n=this.translateY;if(this.hbar){var r=i+this._hbarXMin,v=r+this._hbarTranslateMax,s=T.constrain(m.event.x,r,v),o=(s-r)/(v-r),b=this.position.w-this._box.w;i=o*b}if(this.vbar){var g=n+this._vbarYMin,d=g+this._vbarTranslateMax,f=T.constrain(m.event.y,g,d),y=(f-g)/(d-g),l=this.position.h-this._box.h;n=y*l}this.setTranslate(i,n)},e.prototype.setTranslate=function(i,n){var r=this.position.w-this._box.w,v=this.position.h-this._box.h;if(i=T.constrain(i||0,0,r),n=T.constrain(n||0,0,v),this.translateX=i,this.translateY=n,this.container.call(A.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var s=i/r;this.hbar.call(A.setTranslate,i+s*this._hbarTranslateMax,n)}if(this.vbar){var o=n/v;this.vbar.call(A.setTranslate,i,n+o*this._vbarTranslateMax)}}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(t,N,V){N.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(t,N,V){N.exports={axisRefDescription:function(m,u,A){return["If set to a",m,"axis id (e.g. *"+m+"* or","*"+m+"2*), the `"+m+"` position refers to a",m,"coordinate. If set to *paper*, the `"+m+"`","position refers to the distance from the",u,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",u,"("+A+"). If set to a",m,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",u,"of the domain of that axis: e.g.,","*"+m+"2 domain* refers to the domain of the second",m," axis and a",m,"position of 0.5 refers to the","point between the",u,"and the",A,"of the domain of the","second",m,"axis."].join(" ")}}},{}],485:[function(t,N,V){N.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],486:[function(t,N,V){N.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(t,N,V){N.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(t,N,V){N.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(t,N,V){N.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],490:[function(t,N,V){N.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(t,N,V){N.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(t,N,V){V.xmlns="http://www.w3.org/2000/xmlns/",V.svg="http://www.w3.org/2000/svg",V.xlink="http://www.w3.org/1999/xlink",V.svgAttrs={xmlns:V.svg,"xmlns:xlink":V.xlink}},{}],493:[function(t,N,V){V.version=t("./version").version,t("native-promise-only"),t("../build/plotcss");for(var m=t("./registry"),u=V.register=m.register,A=t("./plot_api"),T=Object.keys(A),e=0;e<T.length;e++){var a=T[e];a.charAt(0)!=="_"&&(V[a]=A[a]),u({moduleType:"apiMethod",name:a,fn:A[a]})}u(t("./traces/scatter")),u([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/selections"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar"),t("./components/modebar")]),u([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(u(window.PlotlyLocales),delete window.PlotlyLocales),V.Icons=t("./fonts/ploticon");var i=t("./components/fx"),n=t("./plots/plots");V.Plots={resize:n.resize,graphJson:n.graphJson,sendDataToCloud:n.sendDataToCloud},V.Fx={hover:i.hover,unhover:i.unhover,loneHover:i.loneHover,loneUnhover:i.loneUnhover},V.Snapshot=t("./snapshot"),V.PlotSchema=t("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(t,N,V){N.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(t,N,V){V.isLeftAnchor=function(u){return u.xanchor==="left"||u.xanchor==="auto"&&u.x<=1/3},V.isCenterAnchor=function(u){return u.xanchor==="center"||u.xanchor==="auto"&&u.x>1/3&&u.x<2/3},V.isRightAnchor=function(u){return u.xanchor==="right"||u.xanchor==="auto"&&u.x>=2/3},V.isTopAnchor=function(u){return u.yanchor==="top"||u.yanchor==="auto"&&u.y>=2/3},V.isMiddleAnchor=function(u){return u.yanchor==="middle"||u.yanchor==="auto"&&u.y>1/3&&u.y<2/3},V.isBottomAnchor=function(u){return u.yanchor==="bottom"||u.yanchor==="auto"&&u.y<=1/3}},{}],496:[function(t,N,V){var m=t("./mod"),u=m.mod,A=m.modHalf,T=Math.PI,e=2*T;function a(y){return y/180*T}function i(y){return y/T*180}function n(y){return Math.abs(y[1]-y[0])>e-1e-14}function r(y,l){return A(l-y,e)}function v(y,l){return Math.abs(r(y,l))}function s(y,l){if(n(l))return!0;var x,c;l[0]<l[1]?(x=l[0],c=l[1]):(x=l[1],c=l[0]),x=u(x,e),c=u(c,e),x>c&&(c+=e);var M=u(y,e),w=M+e;return M>=x&&M<=c||w>=x&&w<=c}function o(y,l,x,c){if(!s(l,c))return!1;var M,w;return x[0]<x[1]?(M=x[0],w=x[1]):(M=x[1],w=x[0]),y>=M&&y<=w}function b(y,l,x,c,M,w,p){M=M||0,w=w||0;var _=n([x,c]),h,L,E,S,P;_?(h=0,L=T,E=e):x<c?(h=x,E=c):(h=c,E=x),y<l?(S=y,P=l):(S=l,P=y);function F(O,z){return[O*Math.cos(z)+M,w-O*Math.sin(z)]}var I=Math.abs(E-h)<=T?0:1;function D(O,z,G){return"A"+[O,O]+" "+[0,I,G]+" "+F(O,z)}var R;return _?S===null?R="M"+F(P,h)+D(P,L,0)+D(P,E,0)+"Z":R="M"+F(S,h)+D(S,L,0)+D(S,E,0)+"ZM"+F(P,h)+D(P,L,1)+D(P,E,1)+"Z":S===null?(R="M"+F(P,h)+D(P,E,0),p&&(R+="L0,0Z")):R="M"+F(S,h)+"L"+F(P,h)+D(P,E,0)+"L"+F(S,E)+D(S,h,1)+"Z",R}function g(y,l,x,c,M){return b(null,y,l,x,c,M,0)}function d(y,l,x,c,M){return b(null,y,l,x,c,M,1)}function f(y,l,x,c,M,w){return b(y,l,x,c,M,w,1)}N.exports={deg2rad:a,rad2deg:i,angleDelta:r,angleDist:v,isFullCircle:n,isAngleInsideSector:s,isPtInsideSector:o,pathArc:g,pathSector:d,pathAnnulus:f}},{"./mod":522}],497:[function(t,N,V){var m=Array.isArray,u=ArrayBuffer,A=DataView;function T(n){return u.isView(n)&&!(n instanceof A)}V.isTypedArray=T;function e(n){return m(n)||T(n)}V.isArrayOrTypedArray=e;function a(n){return!e(n[0])}V.isArray1D=a,V.ensureArray=function(n,r){return m(n)||(n=[]),n.length=r,n},V.concat=function(){var n=[],r=!0,v=0,s,o,b,g,d,f,y,l;for(b=0;b<arguments.length;b++)g=arguments[b],f=g.length,f&&(o?n.push(g):(o=g,d=f),m(g)?s=!1:(r=!1,v?s!==g.constructor&&(s=!1):s=g.constructor),v+=f);if(!v)return[];if(!n.length)return o;if(r)return o.concat.apply(o,n);if(s){for(y=new s(v),y.set(o),b=0;b<n.length;b++)g=n[b],y.set(g,d),d+=g.length;return y}for(y=new Array(v),l=0;l<o.length;l++)y[l]=o[l];for(b=0;b<n.length;b++){for(g=n[b],l=0;l<g.length;l++)y[d+l]=g[l];d+=l}return y},V.maxRowLength=function(n){return i(n,Math.max,0)},V.minRowLength=function(n){return i(n,Math.min,1/0)};function i(n,r,v){if(e(n))if(e(n[0])){for(var s=v,o=0;o<n.length;o++)s=r(s,n[o].length);return s}else return n.length;return 0}},{}],498:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../constants/numerical").BADNUM,A=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;N.exports=function(e){return typeof e=="string"&&(e=e.replace(A,"")),m(e)?Number(e):u}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(t,N,V){N.exports=function(u){var A=u._fullLayout;A._glcanvas&&A._glcanvas.size()&&A._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],500:[function(t,N,V){N.exports=function(u){u._responsiveChartHandler&&(window.removeEventListener("resize",u._responsiveChartHandler),delete u._responsiveChartHandler)}},{}],501:[function(t,N,V){var m=t("fast-isnumeric"),u=t("tinycolor2"),A=t("../plots/attributes"),T=t("../components/colorscale/scales"),e=t("../components/color"),a=t("../constants/interactions").DESELECTDIM,i=t("./nested_property"),n=t("./regex").counter,r=t("./mod").modHalf,v=t("./array").isArrayOrTypedArray;V.valObjectMeta={data_array:{coerceFunction:function(o,b,g){v(o)?b.set(o):g!==void 0&&b.set(g)}},enumerated:{coerceFunction:function(o,b,g,d){d.coerceNumber&&(o=+o),d.values.indexOf(o)===-1?b.set(g):b.set(o)},validateFunction:function(o,b){b.coerceNumber&&(o=+o);for(var g=b.values,d=0;d<g.length;d++){var f=String(g[d]);if(f.charAt(0)==="/"&&f.charAt(f.length-1)==="/"){var y=new RegExp(f.substr(1,f.length-2));if(y.test(o))return!0}else if(o===g[d])return!0}return!1}},boolean:{coerceFunction:function(o,b,g){o===!0||o===!1?b.set(o):b.set(g)}},number:{coerceFunction:function(o,b,g,d){!m(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?b.set(g):b.set(+o)}},integer:{coerceFunction:function(o,b,g,d){o%1||!m(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?b.set(g):b.set(+o)}},string:{coerceFunction:function(o,b,g,d){if(typeof o!="string"){var f=typeof o=="number";d.strict===!0||!f?b.set(g):b.set(String(o))}else d.noBlank&&!o?b.set(g):b.set(o)}},color:{coerceFunction:function(o,b,g){u(o).isValid()?b.set(o):b.set(g)}},colorlist:{coerceFunction:function(o,b,g){function d(f){return u(f).isValid()}!Array.isArray(o)||!o.length?b.set(g):o.every(d)?b.set(o):b.set(g)}},colorscale:{coerceFunction:function(o,b,g){b.set(T.get(o,g))}},angle:{coerceFunction:function(o,b,g){o==="auto"?b.set("auto"):m(o)?b.set(r(+o,360)):b.set(g)}},subplotid:{coerceFunction:function(o,b,g,d){var f=d.regex||n(g);if(typeof o=="string"&&f.test(o)){b.set(o);return}b.set(g)},validateFunction:function(o,b){var g=b.dflt;return o===g?!0:typeof o!="string"?!1:!!n(g).test(o)}},flaglist:{coerceFunction:function(o,b,g,d){if((d.extras||[]).indexOf(o)!==-1){b.set(o);return}if(typeof o!="string"){b.set(g);return}for(var f=o.split("+"),y=0;y<f.length;){var l=f[y];d.flags.indexOf(l)===-1||f.indexOf(l)<y?f.splice(y,1):y++}f.length?b.set(f.join("+")):b.set(g)}},any:{coerceFunction:function(o,b,g){o===void 0?b.set(g):b.set(o)}},info_array:{coerceFunction:function(o,b,g,d){function f(F,I,D){var R,O={set:function(z){R=z}};return D===void 0&&(D=I.dflt),V.valObjectMeta[I.valType].coerceFunction(F,O,D,I),R}var y=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(!Array.isArray(o)){b.set(g);return}var l=d.items,x=[],c=Array.isArray(l),M=c&&y&&Array.isArray(l[0]),w=y&&c&&!M,p=c&&!w?l.length:o.length,_,h,L,E,S,P;if(g=Array.isArray(g)?g:[],y)for(_=0;_<p;_++)for(x[_]=[],L=Array.isArray(o[_])?o[_]:[],w?S=l.length:c?S=l[_].length:S=L.length,h=0;h<S;h++)w?E=l[h]:c?E=l[_][h]:E=l,P=f(L[h],E,(g[_]||[])[h]),P!==void 0&&(x[_][h]=P);else for(_=0;_<p;_++)P=f(o[_],c?l[_]:l,g[_]),P!==void 0&&(x[_]=P);b.set(x)},validateFunction:function(o,b){if(!Array.isArray(o))return!1;var g=b.items,d=Array.isArray(g),f=b.dimensions===2;if(!b.freeLength&&o.length!==g.length)return!1;for(var y=0;y<o.length;y++)if(f){if(!Array.isArray(o[y])||!b.freeLength&&o[y].length!==g[y].length)return!1;for(var l=0;l<o[y].length;l++)if(!s(o[y][l],d?g[y][l]:g))return!1}else if(!s(o[y],d?g[y]:g))return!1;return!0}}},V.coerce=function(o,b,g,d,f){var y=i(g,d).get(),l=i(o,d),x=i(b,d),c=l.get(),M=b._template;if(c===void 0&&M&&(c=i(M,d).get(),M=0),f===void 0&&(f=y.dflt),y.arrayOk&&v(c))return x.set(c),c;var w=V.valObjectMeta[y.valType].coerceFunction;w(c,x,f,y);var p=x.get();return M&&p===f&&!s(c,y)&&(c=i(M,d).get(),w(c,x,f,y),p=x.get()),p},V.coerce2=function(o,b,g,d,f){var y=i(o,d),l=V.coerce(o,b,g,d,f),x=y.get();return x!=null?l:!1},V.coerceFont=function(o,b,g){var d={};return g=g||{},d.family=o(b+".family",g.family),d.size=o(b+".size",g.size),d.color=o(b+".color",g.color),d},V.coercePattern=function(o,b,g,d){var f=o(b+".shape");if(f){o(b+".solidity"),o(b+".size");var y=o(b+".fillmode"),l=y==="overlay";if(!d){var x=o(b+".bgcolor",l?g:void 0);o(b+".fgcolor",l?e.contrast(x):g)}o(b+".fgopacity",l?.5:1)}},V.coerceHoverinfo=function(o,b,g){var d=b._module.attributes,f=d.hoverinfo?d:A,y=f.hoverinfo,l;if(g._dataLength===1){var x=y.dflt==="all"?y.flags.slice():y.dflt.split("+");x.splice(x.indexOf("name"),1),l=x.join("+")}return V.coerce(o,b,f,"hoverinfo",l)},V.coerceSelectionMarkerOpacity=function(o,b){if(!!o.marker){var g=o.marker.opacity;if(g!==void 0){var d,f;!v(g)&&!o.selected&&!o.unselected&&(d=g,f=a*g),b("selected.marker.opacity",d),b("unselected.marker.opacity",f)}}};function s(o,b){var g=V.valObjectMeta[b.valType];if(b.arrayOk&&v(o))return!0;if(g.validateFunction)return g.validateFunction(o,b);var d={},f=d,y={set:function(l){f=l}};return g.coerceFunction(o,y,d,b),f!==d}V.validate=s},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(t,N,V){var m=t("d3-time-format").timeFormat,u=t("fast-isnumeric"),A=t("./loggers"),T=t("./mod").mod,e=t("../constants/numerical"),a=e.BADNUM,i=e.ONEDAY,n=e.ONEHOUR,r=e.ONEMIN,v=e.ONESEC,s=e.EPOCHJD,o=t("../registry"),b=t("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,f=new Date().getFullYear()-70;function y(R){return R&&o.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}V.dateTick0=function(R,O){var z=l(R,!!O);if(O<2)return z;var G=V.dateTime2ms(z,R);return G+=i*(O-1),V.ms2DateTime(G,0,R)};function l(R,O){return y(R)?O?o.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:o.getComponentMethod("calendars","CANONICAL_TICK")[R]:O?"2000-01-02":"2000-01-01"}V.dfltRange=function(R){return y(R)?o.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},V.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var x,c;V.dateTime2ms=function(R,O){if(V.isJSDate(R)){var z=R.getTimezoneOffset()*r,G=(R.getUTCMinutes()-R.getMinutes())*r+(R.getUTCSeconds()-R.getSeconds())*v+(R.getUTCMilliseconds()-R.getMilliseconds());if(G){var Y=3*r;z=z-Y/2+T(G-z+Y/2,Y)}return R=Number(R)-z,R>=x&&R<=c?R:a}if(typeof R!="string"&&typeof R!="number")return a;R=String(R);var ee=y(O),j=R.charAt(0);ee&&(j==="G"||j==="g")&&(R=R.substr(1),O="");var X=ee&&O.substr(0,7)==="chinese",ie=R.match(X?d:g);if(!ie)return a;var he=ie[1],K=ie[3]||"1",$=Number(ie[5]||1),U=Number(ie[7]||0),H=Number(ie[9]||0),q=Number(ie[11]||0);if(ee){if(he.length===2)return a;he=Number(he);var re;try{var Z=o.getComponentMethod("calendars","getCal")(O);if(X){var Q=K.charAt(K.length-1)==="i";K=parseInt(K,10),re=Z.newDate(he,Z.toMonthIndex(he,K,Q),$)}else re=Z.newDate(he,Number(K),$)}catch{return a}return re?(re.toJD()-s)*i+U*n+H*r+q*v:a}he.length===2?he=(Number(he)+2e3-f)%100+f:he=Number(he),K-=1;var oe=new Date(Date.UTC(2e3,K,$,U,H));return oe.setUTCFullYear(he),oe.getUTCMonth()!==K||oe.getUTCDate()!==$?a:oe.getTime()+q*v},x=V.MIN_MS=V.dateTime2ms("-9999"),c=V.MAX_MS=V.dateTime2ms("9999-12-31 23:59:59.9999"),V.isDateTime=function(R,O){return V.dateTime2ms(R,O)!==a};function M(R,O){return String(R+Math.pow(10,O)).substr(1)}var w=90*i,p=3*n,_=5*r;V.ms2DateTime=function(R,O,z){if(typeof R!="number"||!(R>=x&&R<=c))return a;O||(O=0);var G=Math.floor(T(R+.05,1)*10),Y=Math.round(R-G/10),ee,j,X,ie,he,K;if(y(z)){var $=Math.floor(Y/i)+s,U=Math.floor(T(R,i));try{ee=o.getComponentMethod("calendars","getCal")(z).fromJD($).formatDate("yyyy-mm-dd")}catch{ee=b("G%Y-%m-%d")(new Date(Y))}if(ee.charAt(0)==="-")for(;ee.length<11;)ee="-0"+ee.substr(1);else for(;ee.length<10;)ee="0"+ee;j=O<w?Math.floor(U/n):0,X=O<w?Math.floor(U%n/r):0,ie=O<p?Math.floor(U%r/v):0,he=O<_?U%v*10+G:0}else K=new Date(Y),ee=b("%Y-%m-%d")(K),j=O<w?K.getUTCHours():0,X=O<w?K.getUTCMinutes():0,ie=O<p?K.getUTCSeconds():0,he=O<_?K.getUTCMilliseconds()*10+G:0;return h(ee,j,X,ie,he)},V.ms2DateTimeLocal=function(R){if(!(R>=x+i&&R<=c-i))return a;var O=Math.floor(T(R+.05,1)*10),z=new Date(Math.round(R-O/10)),G=m("%Y-%m-%d")(z),Y=z.getHours(),ee=z.getMinutes(),j=z.getSeconds(),X=z.getUTCMilliseconds()*10+O;return h(G,Y,ee,j,X)};function h(R,O,z,G,Y){if((O||z||G||Y)&&(R+=" "+M(O,2)+":"+M(z,2),(G||Y)&&(R+=":"+M(G,2),Y))){for(var ee=4;Y%10===0;)ee-=1,Y/=10;R+="."+M(Y,ee)}return R}V.cleanDate=function(R,O,z){if(R===a)return O;if(V.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(y(z))return A.error("JS Dates and milliseconds are incompatible with world calendars",R),O;if(R=V.ms2DateTimeLocal(+R),!R&&O!==void 0)return O}else if(!V.isDateTime(R,z))return A.error("unrecognized date",R),O;return R};var L=/%\d?f/g,E=/%h/g,S={1:"1",2:"1",3:"2",4:"2"};function P(R,O,z,G){R=R.replace(L,function(ee){var j=Math.min(+ee.charAt(1)||6,6),X=(O/1e3%1+2).toFixed(j).substr(2).replace(/0+$/,"")||"0";return X});var Y=new Date(Math.floor(O+.05));if(R=R.replace(E,function(){return S[z("%q")(Y)]}),y(G))try{R=o.getComponentMethod("calendars","worldCalFmt")(R,O,G)}catch{return"Invalid"}return z(R)(Y)}var F=[59,59.9,59.99,59.999,59.9999];function I(R,O){var z=T(R+.05,i),G=M(Math.floor(z/n),2)+":"+M(T(Math.floor(z/r),60),2);if(O!=="M"){u(O)||(O=0);var Y=Math.min(T(R/v,60),F[O]),ee=(100+Y).toFixed(O).substr(1);O>0&&(ee=ee.replace(/0+$/,"").replace(/[\.]$/,"")),G+=":"+ee}return G}V.formatDate=function(R,O,z,G,Y,ee){if(Y=y(Y)&&Y,!O)if(z==="y")O=ee.year;else if(z==="m")O=ee.month;else if(z==="d")O=ee.dayMonth+`
`+ee.year;else return I(R,z)+`
`+P(ee.dayMonthYear,R,G,Y);return P(O,R,G,Y)};var D=3*i;V.incrementMonth=function(R,O,z){z=y(z)&&z;var G=T(R,i);if(R=Math.round(R-G),z)try{var Y=Math.round(R/i)+s,ee=o.getComponentMethod("calendars","getCal")(z),j=ee.fromJD(Y);return O%12?ee.add(j,O,"m"):ee.add(j,O/12,"y"),(j.toJD()-s)*i+G}catch{A.error("invalid ms "+R+" in calendar "+z)}var X=new Date(R+D);return X.setUTCMonth(X.getUTCMonth()+O)+G-D},V.findExactDates=function(R,O){for(var z=0,G=0,Y=0,ee=0,j,X,ie=y(O)&&o.getComponentMethod("calendars","getCal")(O),he=0;he<R.length;he++){if(X=R[he],!u(X)){ee++;continue}if(!(X%i))if(ie)try{j=ie.fromJD(X/i+s),j.day()===1?j.month()===1?z++:G++:Y++}catch{}else j=new Date(X),j.getUTCDate()===1?j.getUTCMonth()===0?z++:G++:Y++}G+=z,Y+=G;var K=R.length-ee;return{exactYears:z/K,exactMonths:G/K,exactDays:Y/K}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(t,N,V){var m=t("@plotly/d3"),u=t("./loggers"),A=t("./matrix"),T=t("gl-mat4");function e(f){var y;if(typeof f=="string"){if(y=document.getElementById(f),y===null)throw new Error("No DOM element with id '"+f+"' exists on the page.");return y}else if(f==null)throw new Error("DOM element provided is null or undefined");return f}function a(f){var y=m.select(f);return y.node()instanceof HTMLElement&&y.size()&&y.classed("js-plotly-plot")}function i(f){var y=f&&f.parentNode;y&&y.removeChild(f)}function n(f,y){r("global",f,y)}function r(f,y,l){var x="plotly.js-style-"+f,c=document.getElementById(x);c||(c=document.createElement("style"),c.setAttribute("id",x),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var M=c.sheet;M.insertRule?M.insertRule(y+"{"+l+"}",0):M.addRule?M.addRule(y,l,0):u.warn("addStyleRule failed")}function v(f){var y="plotly.js-style-"+f,l=document.getElementById(y);l&&i(l)}function s(f){var y=b(f),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return y.forEach(function(x){var c=o(x);if(c){var M=A.convertCssMatrix(c);l=T.multiply(l,l,M)}}),l}function o(f){var y=window.getComputedStyle(f,null),l=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("-moz-transform")||y.getPropertyValue("-ms-transform")||y.getPropertyValue("-o-transform")||y.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(x){return+x})}function b(f){for(var y=[];g(f);)y.push(f),f=f.parentNode;return y}function g(f){return f&&(f instanceof Element||f instanceof HTMLElement)}function d(f,y){return f&&y&&f.x===y.x&&f.y===y.y&&f.top===y.top&&f.left===y.left&&f.right===y.right&&f.bottom===y.bottom}N.exports={getGraphDiv:e,isPlotDiv:a,removeElement:i,addStyleRule:n,addRelatedStyleRule:r,deleteRelatedStyleRule:v,getFullTransformMatrix:s,getElementTransformMatrix:o,getElementAndAncestors:b,equalDomRects:d}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(t,N,V){var m=t("events").EventEmitter,u={init:function(A){if(A._ev instanceof m)return A;var T=new m,e=new m;return A._ev=T,A._internalEv=e,A.on=T.on.bind(T),A.once=T.once.bind(T),A.removeListener=T.removeListener.bind(T),A.removeAllListeners=T.removeAllListeners.bind(T),A._internalOn=e.on.bind(e),A._internalOnce=e.once.bind(e),A._removeInternalListener=e.removeListener.bind(e),A._removeAllInternalListeners=e.removeAllListeners.bind(e),A.emit=function(a,i){typeof jQuery<"u"&&jQuery(A).trigger(a,i),T.emit(a,i),e.emit(a,i)},A},triggerHandler:function(A,T,e){var a,i;typeof jQuery<"u"&&(a=jQuery(A).triggerHandler(T,e));var n=A._ev;if(!n)return a;var r=n._events[T];if(!r)return a;function v(o){if(o.listener){if(n.removeListener(T,o.listener),!o.fired)return o.fired=!0,o.listener.apply(n,[e])}else return o.apply(n,[e])}r=Array.isArray(r)?r:[r];var s;for(s=0;s<r.length-1;s++)v(r[s]);return i=v(r[s]),a!==void 0?a:i},purge:function(A){return delete A._ev,delete A.on,delete A.once,delete A.removeListener,delete A.removeAllListeners,delete A.emit,delete A._ev,delete A._internalEv,delete A._internalOn,delete A._internalOnce,delete A._removeInternalListener,delete A._removeAllInternalListeners,A}};N.exports=u},{events:84}],505:[function(t,N,V){var m=t("./is_plain_object.js"),u=Array.isArray;function A(e,a){var i,n;for(i=0;i<e.length;i++){if(n=e[i],n!==null&&typeof n=="object")return!1;n!==void 0&&(a[i]=n)}return!0}V.extendFlat=function(){return T(arguments,!1,!1,!1)},V.extendDeep=function(){return T(arguments,!0,!1,!1)},V.extendDeepAll=function(){return T(arguments,!0,!0,!1)},V.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)};function T(e,a,i,n){var r=e[0],v=e.length,s,o,b,g,d,f,y;if(v===2&&u(r)&&u(e[1])&&r.length===0){if(y=A(e[1],r),y)return r;r.splice(0,r.length)}for(var l=1;l<v;l++){s=e[l];for(o in s)b=r[o],g=s[o],n&&u(g)?r[o]=g:a&&g&&(m(g)||(d=u(g)))?(d?(d=!1,f=b&&u(b)?b:[]):f=b&&m(b)?b:{},r[o]=T([f,g],a,i,n)):(typeof g<"u"||i)&&(r[o]=g)}return r}},{"./is_plain_object.js":516}],506:[function(t,N,V){N.exports=function(u){for(var A={},T=[],e=0,a=0;a<u.length;a++){var i=u[a];A[i]!==1&&(A[i]=1,T[e++]=i)}return T}},{}],507:[function(t,N,V){N.exports=function(e){for(var a=A(e)?u:m,i=[],n=0;n<e.length;n++){var r=e[n];a(r)&&i.push(r)}return i};function m(T){return T.visible===!0}function u(T){var e=T[0].trace;return e.visible===!0&&e._length!==0}function A(T){return Array.isArray(T)&&Array.isArray(T[0])&&T[0][0]&&T[0][0].trace}},{}],508:[function(t,N,V){var m=t("@plotly/d3"),u=t("country-regex"),A=t("@turf/area"),T=t("@turf/centroid"),e=t("@turf/bbox"),a=t("./identity"),i=t("./loggers"),n=t("./is_plain_object"),r=t("./nested_property"),v=t("./polygon"),s=Object.keys(u),o={"ISO-3":a,"USA-states":a,"country names":b};function b(M){for(var w=0;w<s.length;w++){var p=s[w],_=new RegExp(u[p]);if(_.test(M.trim().toLowerCase()))return p}return i.log("Unrecognized country name: "+M+"."),!1}function g(M,w,p){if(!w||typeof w!="string")return!1;var _=o[M](w),h,L,E;if(_){if(M==="USA-states")for(h=[],E=0;E<p.length;E++)L=p[E],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&h.push(L);else h=p;for(E=0;E<h.length;E++)if(L=h[E],L.id===_)return L;i.log(["Location with id",_,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function d(M){var w=M.geometry,p=w.coordinates,_=M.id,h=[],L,E,S,P;function F(I){for(var D=0;D<I.length-1;D++)if(I[D][0]>0&&I[D+1][0]<0)return D;return null}switch(_==="RUS"||_==="FJI"?L=function(I){var D;if(F(I)===null)D=I;else for(D=new Array(I.length),P=0;P<I.length;P++)D[P]=[I[P][0]<0?I[P][0]+360:I[P][0],I[P][1]];h.push(v.tester(D))}:_==="ATA"?L=function(I){var D=F(I);if(D===null)return h.push(v.tester(I));var R=new Array(I.length+1),O=0;for(P=0;P<I.length;P++)P>D?R[O++]=[I[P][0]+360,I[P][1]]:P===D?(R[O++]=I[P],R[O++]=[I[P][0],-90]):R[O++]=I[P];var z=v.tester(R);z.pts.pop(),h.push(z)}:L=function(I){h.push(v.tester(I))},w.type){case"MultiPolygon":for(E=0;E<p.length;E++)for(S=0;S<p[E].length;S++)L(p[E][S]);break;case"Polygon":for(E=0;E<p.length;E++)L(p[E]);break}return h}function f(M){var w=M.geojson,p=window.PlotlyGeoAssets||{},_=typeof w=="string"?p[w]:w;return n(_)?_:(i.error("Oops ... something went wrong when fetching "+w),!1)}function y(M){var w=M[0].trace,p=f(w);if(!p)return!1;var _={},h=[],L;for(L=0;L<w._length;L++){var E=M[L];(E.loc||E.loc===0)&&(_[E.loc]=E)}function S(I){var D=r(I,w.featureidkey||"id").get(),R=_[D];if(R){var O=I.geometry;if(O.type==="Polygon"||O.type==="MultiPolygon"){var z={type:"Feature",id:D,geometry:O,properties:{}};z.properties.ct=l(z),R.fIn=I,R.fOut=z,h.push(z)}else i.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete _[D]}switch(p.type){case"FeatureCollection":var P=p.features;for(L=0;L<P.length;L++)S(P[L]);break;case"Feature":S(p);break;default:return i.warn(["Invalid GeoJSON type",(p.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in _)i.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+w.featureidkey+"*."].join(" "));return h}function l(M){var w=M.geometry,p;if(w.type==="MultiPolygon")for(var _=w.coordinates,h=0,L=0;L<_.length;L++){var E={type:"Polygon",coordinates:_[L]},S=A.default(E);S>h&&(h=S,p=E)}else p=w;return T.default(p).geometry.coordinates}function x(M){var w=window.PlotlyGeoAssets||{},p=[];function _(P){return new Promise(function(F,I){m.json(P,function(D,R){if(D){delete w[P];var O=D.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return I(new Error(O))}return w[P]=R,F(R)})})}function h(P){return new Promise(function(F,I){var D=0,R=setInterval(function(){if(w[P]&&w[P]!=="pending")return clearInterval(R),F(w[P]);if(D>100)return clearInterval(R),I("Unexpected error while fetching from "+P);D++},50)})}for(var L=0;L<M.length;L++){var E=M[L][0].trace,S=E.geojson;typeof S=="string"&&(w[S]?w[S]==="pending"&&p.push(h(S)):(w[S]="pending",p.push(_(S))))}return p}function c(M){return e.default(M)}N.exports={locationToFeature:g,feature2polygons:d,getTraceGeojson:f,extractTraceFeature:y,fetchTraceGeoData:x,computeBbox:c}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(t,N,V){var m=t("../constants/numerical").BADNUM;V.calcTraceToLineCoords=function(u){for(var A=u[0].trace,T=A.connectgaps,e=[],a=[],i=0;i<u.length;i++){var n=u[i],r=n.lonlat;r[0]!==m?a.push(r):!T&&a.length>0&&(e.push(a),a=[])}return a.length>0&&e.push(a),e},V.makeLine=function(u){return u.length===1?{type:"LineString",coordinates:u[0]}:{type:"MultiLineString",coordinates:u}},V.makePolygon=function(u){if(u.length===1)return{type:"Polygon",coordinates:u};for(var A=new Array(u.length),T=0;T<u.length;T++)A[T]=[u[T]];return{type:"MultiPolygon",coordinates:A}},V.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(t,N,V){var m=t("./mod").mod;V.segmentsIntersect=u;function u(i,n,r,v,s,o,b,g){var d=r-i,f=s-i,y=b-s,l=v-n,x=o-n,c=g-o,M=d*c-y*l;if(M===0)return null;var w=(f*c-y*x)/M,p=(f*l-d*x)/M;return p<0||p>1||w<0||w>1?null:{x:i+d*w,y:n+l*w}}V.segmentDistance=function(n,r,v,s,o,b,g,d){if(u(n,r,v,s,o,b,g,d))return 0;var f=v-n,y=s-r,l=g-o,x=d-b,c=f*f+y*y,M=l*l+x*x,w=Math.min(A(f,y,c,o-n,b-r),A(f,y,c,g-n,d-r),A(l,x,M,n-o,r-b),A(l,x,M,v-o,s-b));return Math.sqrt(w)};function A(i,n,r,v,s){var o=v*i+s*n;if(o<0)return v*v+s*s;if(o>r){var b=v-i,g=s-n;return b*b+g*g}else{var d=v*n-s*i;return d*d/r}}var T,e,a;V.getTextLocation=function(n,r,v,s){if((n!==e||s!==a)&&(T={},e=n,a=s),T[v])return T[v];var o=n.getPointAtLength(m(v-s/2,r)),b=n.getPointAtLength(m(v+s/2,r)),g=Math.atan((b.y-o.y)/(b.x-o.x)),d=n.getPointAtLength(m(v,r)),f=(d.x*4+o.x+b.x)/6,y=(d.y*4+o.y+b.y)/6,l={x:f,y,theta:g};return T[v]=l,l},V.clearLocationCache=function(){e=null},V.getVisibleSegment=function(n,r,v){var s=r.left,o=r.right,b=r.top,g=r.bottom,d=0,f=n.getTotalLength(),y=f,l,x;function c(w){var p=n.getPointAtLength(w);w===0?l=p:w===f&&(x=p);var _=p.x<s?s-p.x:p.x>o?p.x-o:0,h=p.y<b?b-p.y:p.y>g?p.y-g:0;return Math.sqrt(_*_+h*h)}for(var M=c(d);M;){if(d+=M+v,d>y)return;M=c(d)}for(M=c(y);M;){if(y-=M+v,d>y)return;M=c(y)}return{min:d,max:y,len:y-d,total:f,isClosed:d===0&&y===f&&Math.abs(l.x-x.x)<.1&&Math.abs(l.y-x.y)<.1}},V.findPointOnPath=function(n,r,v,s){s=s||{};for(var o=s.pathLength||n.getTotalLength(),b=s.tolerance||.001,g=s.iterationLimit||30,d=n.getPointAtLength(0)[v]>n.getPointAtLength(o)[v]?-1:1,f=0,y=0,l=o,x,c,M;f<g;){if(x=(y+l)/2,c=n.getPointAtLength(x),M=c[v]-r,Math.abs(M)<b)return c;d*M>0?l=x:y=x,f++}return c}},{"./mod":522}],511:[function(t,N,V){var m=t("fast-isnumeric"),u=t("tinycolor2"),A=t("color-normalize"),T=t("../components/colorscale"),e=t("../components/color/attributes").defaultLine,a=t("./array").isArrayOrTypedArray,i=A(e),n=1;function r(g,d){var f=g;return f[3]*=d,f}function v(g){if(m(g))return i;var d=A(g);return d.length?d:i}function s(g){return m(g)?g:n}function o(g,d,f){var y=g.color,l=a(y),x=a(d),c=T.extractOpts(g),M=[],w,p,_,h,L;if(c.colorscale!==void 0?w=T.makeColorScaleFuncFromTrace(g):w=v,l?p=function(S,P){return S[P]===void 0?i:A(w(S[P]))}:p=v,x?_=function(S,P){return S[P]===void 0?n:s(S[P])}:_=s,l||x)for(var E=0;E<f;E++)h=p(y,E),L=_(d,E),M[E]=r(h,L);else M=r(A(y),d);return M}function b(g){var d=T.extractOpts(g),f=d.colorscale;return d.reversescale&&(f=T.flipScale(d.colorscale)),f.map(function(y){var l=y[0],x=u(y[1]),c=x.toRgb();return{index:l,rgb:[c.r,c.g,c.b,c.a]}})}N.exports={formatColor:o,parseColorScale:b}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(t,N,V){var m=t("./identity");function u(A){return[A]}N.exports={keyFun:function(A){return A.key},repeat:u,descend:m,wrap:u,unwrap:function(A){return A[0]}}},{"./identity":513}],513:[function(t,N,V){N.exports=function(u){return u}},{}],514:[function(t,N,V){N.exports=function(u,A){if(!A)return u;var T=1/Math.abs(A),e=T>1?(T*u+T*A)/T:u+A,a=String(e).length;if(a>16){var i=String(A).length,n=String(u).length;if(a>=n+i){var r=parseFloat(e).toPrecision(12);r.indexOf("e+")===-1&&(e=+r)}}return e}},{}],515:[function(t,N,V){var m=t("@plotly/d3"),u=t("d3-time-format").utcFormat,A=t("d3-format").format,T=t("fast-isnumeric"),e=t("../constants/numerical"),a=e.FP_SAFE,i=-a,n=e.BADNUM,r=N.exports={};r.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var v={};r.warnBadFormat=function(he){var K=String(he);v[K]||(v[K]=1,r.warn('encountered bad format: "'+K+'"'))},r.noFormat=function(he){return String(he)},r.numberFormat=function(he){var K;try{K=A(r.adjustFormat(he))}catch{return r.warnBadFormat(he),r.noFormat}return K},r.nestedProperty=t("./nested_property"),r.keyedContainer=t("./keyed_container"),r.relativeAttr=t("./relative_attr"),r.isPlainObject=t("./is_plain_object"),r.toLogRange=t("./to_log_range"),r.relinkPrivateKeys=t("./relink_private");var s=t("./array");r.isTypedArray=s.isTypedArray,r.isArrayOrTypedArray=s.isArrayOrTypedArray,r.isArray1D=s.isArray1D,r.ensureArray=s.ensureArray,r.concat=s.concat,r.maxRowLength=s.maxRowLength,r.minRowLength=s.minRowLength;var o=t("./mod");r.mod=o.mod,r.modHalf=o.modHalf;var b=t("./coerce");r.valObjectMeta=b.valObjectMeta,r.coerce=b.coerce,r.coerce2=b.coerce2,r.coerceFont=b.coerceFont,r.coercePattern=b.coercePattern,r.coerceHoverinfo=b.coerceHoverinfo,r.coerceSelectionMarkerOpacity=b.coerceSelectionMarkerOpacity,r.validate=b.validate;var g=t("./dates");r.dateTime2ms=g.dateTime2ms,r.isDateTime=g.isDateTime,r.ms2DateTime=g.ms2DateTime,r.ms2DateTimeLocal=g.ms2DateTimeLocal,r.cleanDate=g.cleanDate,r.isJSDate=g.isJSDate,r.formatDate=g.formatDate,r.incrementMonth=g.incrementMonth,r.dateTick0=g.dateTick0,r.dfltRange=g.dfltRange,r.findExactDates=g.findExactDates,r.MIN_MS=g.MIN_MS,r.MAX_MS=g.MAX_MS;var d=t("./search");r.findBin=d.findBin,r.sorterAsc=d.sorterAsc,r.sorterDes=d.sorterDes,r.distinctVals=d.distinctVals,r.roundUp=d.roundUp,r.sort=d.sort,r.findIndexOfMin=d.findIndexOfMin,r.sortObjectKeys=t("./sort_object_keys");var f=t("./stats");r.aggNums=f.aggNums,r.len=f.len,r.mean=f.mean,r.median=f.median,r.midRange=f.midRange,r.variance=f.variance,r.stdev=f.stdev,r.interp=f.interp;var y=t("./matrix");r.init2dArray=y.init2dArray,r.transposeRagged=y.transposeRagged,r.dot=y.dot,r.translationMatrix=y.translationMatrix,r.rotationMatrix=y.rotationMatrix,r.rotationXYMatrix=y.rotationXYMatrix,r.apply3DTransform=y.apply3DTransform,r.apply2DTransform=y.apply2DTransform,r.apply2DTransform2=y.apply2DTransform2,r.convertCssMatrix=y.convertCssMatrix,r.inverseTransformMatrix=y.inverseTransformMatrix;var l=t("./angles");r.deg2rad=l.deg2rad,r.rad2deg=l.rad2deg,r.angleDelta=l.angleDelta,r.angleDist=l.angleDist,r.isFullCircle=l.isFullCircle,r.isAngleInsideSector=l.isAngleInsideSector,r.isPtInsideSector=l.isPtInsideSector,r.pathArc=l.pathArc,r.pathSector=l.pathSector,r.pathAnnulus=l.pathAnnulus;var x=t("./anchor_utils");r.isLeftAnchor=x.isLeftAnchor,r.isCenterAnchor=x.isCenterAnchor,r.isRightAnchor=x.isRightAnchor,r.isTopAnchor=x.isTopAnchor,r.isMiddleAnchor=x.isMiddleAnchor,r.isBottomAnchor=x.isBottomAnchor;var c=t("./geometry2d");r.segmentsIntersect=c.segmentsIntersect,r.segmentDistance=c.segmentDistance,r.getTextLocation=c.getTextLocation,r.clearLocationCache=c.clearLocationCache,r.getVisibleSegment=c.getVisibleSegment,r.findPointOnPath=c.findPointOnPath;var M=t("./extend");r.extendFlat=M.extendFlat,r.extendDeep=M.extendDeep,r.extendDeepAll=M.extendDeepAll,r.extendDeepNoArrays=M.extendDeepNoArrays;var w=t("./loggers");r.log=w.log,r.warn=w.warn,r.error=w.error;var p=t("./regex");r.counterRegex=p.counter;var _=t("./throttle");r.throttle=_.throttle,r.throttleDone=_.done,r.clearThrottle=_.clear;var h=t("./dom");r.getGraphDiv=h.getGraphDiv,r.isPlotDiv=h.isPlotDiv,r.removeElement=h.removeElement,r.addStyleRule=h.addStyleRule,r.addRelatedStyleRule=h.addRelatedStyleRule,r.deleteRelatedStyleRule=h.deleteRelatedStyleRule,r.getFullTransformMatrix=h.getFullTransformMatrix,r.getElementTransformMatrix=h.getElementTransformMatrix,r.getElementAndAncestors=h.getElementAndAncestors,r.equalDomRects=h.equalDomRects,r.clearResponsive=t("./clear_responsive"),r.preserveDrawingBuffer=t("./preserve_drawing_buffer"),r.makeTraceGroups=t("./make_trace_groups"),r._=t("./localize"),r.notifier=t("./notifier"),r.filterUnique=t("./filter_unique"),r.filterVisible=t("./filter_visible"),r.pushUnique=t("./push_unique"),r.increment=t("./increment"),r.cleanNumber=t("./clean_number"),r.ensureNumber=function(K){return T(K)?(K=Number(K),K>a||K<i?n:K):n},r.isIndex=function(he,K){return K!==void 0&&he>=K?!1:T(he)&&he>=0&&he%1===0},r.noop=t("./noop"),r.identity=t("./identity"),r.repeat=function(he,K){for(var $=new Array(K),U=0;U<K;U++)$[U]=he;return $},r.swapAttrs=function(he,K,$,U){$||($="x"),U||(U="y");for(var H=0;H<K.length;H++){var q=K[H],re=r.nestedProperty(he,q.replace("?",$)),Z=r.nestedProperty(he,q.replace("?",U)),Q=re.get();re.set(Z.get()),Z.set(Q)}},r.raiseToTop=function(K){K.parentNode.appendChild(K)},r.cancelTransition=function(he){return he.transition().duration(0)},r.constrain=function(he,K,$){return K>$?Math.max($,Math.min(K,he)):Math.max(K,Math.min($,he))},r.bBoxIntersect=function(he,K,$){return $=$||0,he.left<=K.right+$&&K.left<=he.right+$&&he.top<=K.bottom+$&&K.top<=he.bottom+$},r.simpleMap=function(he,K,$,U,H){for(var q=he.length,re=new Array(q),Z=0;Z<q;Z++)re[Z]=K(he[Z],$,U,H);return re},r.randstr=function he(K,$,U,H){if(U||(U=16),$===void 0&&($=24),$<=0)return"0";var q=Math.log(Math.pow(2,$))/Math.log(U),re="",Z,Q,oe;for(Z=2;q===1/0;Z*=2)q=Math.log(Math.pow(2,$/Z))/Math.log(U)*Z;var se=q-Math.floor(q);for(Z=0;Z<Math.floor(q);Z++)oe=Math.floor(Math.random()*U).toString(U),re=oe+re;se&&(Q=Math.pow(U,se),oe=Math.floor(Math.random()*Q).toString(U),re=oe+re);var ae=parseInt(re,U);return K&&K[re]||ae!==1/0&&ae>=Math.pow(2,$)?H>10?(r.warn("randstr failed uniqueness"),re):he(K,$,U,(H||0)+1):re},r.OptionControl=function(he,K){he||(he={}),K||(K="opt");var $={};return $.optionList=[],$._newoption=function(U){U[K]=he,$[U.name]=U,$.optionList.push(U)},$["_"+K]=he,$},r.smooth=function(he,K){if(K=Math.round(K)||0,K<2)return he;var $=he.length,U=2*$,H=2*K-1,q=new Array(H),re=new Array($),Z,Q,oe,se;for(Z=0;Z<H;Z++)q[Z]=(1-Math.cos(Math.PI*(Z+1)/K))/(2*K);for(Z=0;Z<$;Z++){for(se=0,Q=0;Q<H;Q++)oe=Z+Q+1-K,oe<-$?oe-=U*Math.round(oe/U):oe>=U&&(oe-=U*Math.floor(oe/U)),oe<0?oe=-1-oe:oe>=$&&(oe=U-1-oe),se+=he[oe]*q[Q];re[Z]=se}return re},r.syncOrAsync=function(he,K,$){var U,H;function q(){return r.syncOrAsync(he,K,$)}for(;he.length;)if(H=he.splice(0,1)[0],U=H(K),U&&U.then)return U.then(q);return $&&$(K)},r.stripTrailingSlash=function(he){return he.substr(-1)==="/"?he.substr(0,he.length-1):he},r.noneOrAll=function(he,K,$){if(!!he){var U=!1,H=!0,q,re;for(q=0;q<$.length;q++)re=he[$[q]],re!=null?U=!0:H=!1;if(U&&!H)for(q=0;q<$.length;q++)he[$[q]]=K[$[q]]}},r.mergeArray=function(he,K,$,U){var H=typeof U=="function";if(r.isArrayOrTypedArray(he))for(var q=Math.min(he.length,K.length),re=0;re<q;re++){var Z=he[re];K[re][$]=H?U(Z):Z}},r.mergeArrayCastPositive=function(he,K,$){return r.mergeArray(he,K,$,function(U){var H=+U;return isFinite(H)&&H>0?H:0})},r.fillArray=function(he,K,$,U){if(U=U||r.identity,r.isArrayOrTypedArray(he))for(var H=0;H<K.length;H++)K[H][$]=U(he[H])},r.castOption=function(he,K,$,U){U=U||r.identity;var H=r.nestedProperty(he,$).get();return r.isArrayOrTypedArray(H)?Array.isArray(K)&&r.isArrayOrTypedArray(H[K[0]])?U(H[K[0]][K[1]]):U(H[K]):H},r.extractOption=function(he,K,$,U){if($ in he)return he[$];var H=r.nestedProperty(K,U).get();if(!Array.isArray(H))return H};function L(he){var K={};for(var $ in he)for(var U=he[$],H=0;H<U.length;H++)K[U[H]]=+$;return K}r.tagSelected=function(he,K,$){var U=K.selectedpoints,H=K._indexToPoints,q;H&&(q=L(H));function re(ae){return ae!==void 0&&ae<he.length}for(var Z=0;Z<U.length;Z++){var Q=U[Z];if(r.isIndex(Q)||r.isArrayOrTypedArray(Q)&&r.isIndex(Q[0])&&r.isIndex(Q[1])){var oe=q?q[Q]:Q,se=$?$[oe]:oe;re(se)&&(he[se].selected=1)}}},r.selIndices2selPoints=function(he){var K=he.selectedpoints,$=he._indexToPoints;if($){for(var U=L($),H=[],q=0;q<K.length;q++){var re=K[q];if(r.isIndex(re)){var Z=U[re];r.isIndex(Z)&&H.push(Z)}}return H}else return K},r.getTargetArray=function(he,K){var $=K.target;if(typeof $=="string"&&$){var U=r.nestedProperty(he,$).get();return Array.isArray(U)?U:!1}else if(Array.isArray($))return $;return!1},r.minExtend=function(he,K){var $={};typeof K!="object"&&(K={});var U=3,H=Object.keys(he),q,re,Z;for(q=0;q<H.length;q++)re=H[q],Z=he[re],!(re.charAt(0)==="_"||typeof Z=="function")&&(re==="module"?$[re]=Z:Array.isArray(Z)?re==="colorscale"?$[re]=Z.slice():$[re]=Z.slice(0,U):r.isTypedArray(Z)?$[re]=Z.subarray(0,U):Z&&typeof Z=="object"?$[re]=r.minExtend(he[re],K[re]):$[re]=Z);for(H=Object.keys(K),q=0;q<H.length;q++)re=H[q],Z=K[re],(typeof Z!="object"||!(re in $)||typeof $[re]!="object")&&($[re]=Z);return $},r.titleCase=function(he){return he.charAt(0).toUpperCase()+he.substr(1)},r.containsAny=function(he,K){for(var $=0;$<K.length;$++)if(he.indexOf(K[$])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var E=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return E.test(window.navigator.userAgent)};var S=/iPad|iPhone|iPod/;r.isIOS=function(){return S.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var he=P.exec(window.navigator.userAgent);if(he&&he.length===2){var K=parseInt(he[1]);if(!isNaN(K))return K}return null},r.isD3Selection=function(he){return he instanceof m.selection},r.ensureSingle=function(he,K,$,U){var H=he.select(K+($?"."+$:""));if(H.size())return H;var q=he.append(K);return $&&q.classed($,!0),U&&q.call(U),q},r.ensureSingleById=function(he,K,$,U){var H=he.select(K+"#"+$);if(H.size())return H;var q=he.append(K).attr("id",$);return U&&q.call(U),q},r.objectFromPath=function(he,K){for(var $=he.split("."),U,H=U={},q=0;q<$.length;q++){var re=$[q],Z=null,Q=$[q].match(/(.*)\[([0-9]+)\]/);Q?(re=Q[1],Z=Q[2],U=U[re]=[],q===$.length-1?U[Z]=K:U[Z]={},U=U[Z]):(q===$.length-1?U[re]=K:U[re]={},U=U[re])}return H};var F=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(he){var K,$,U,H,q,re,Z;if(typeof he=="object"&&!Array.isArray(he))for($ in he)he.hasOwnProperty($)&&((K=$.match(F))?(H=he[$],U=K[1],delete he[$],he[U]=r.extendDeepNoArrays(he[U]||{},r.objectFromPath($,r.expandObjectPaths(H))[U])):(K=$.match(I))?(H=he[$],U=K[1],q=parseInt(K[2]),delete he[$],he[U]=he[U]||[],K[3]==="."?(Z=K[4],re=he[U][q]=he[U][q]||{},r.extendDeepNoArrays(re,r.objectFromPath(Z,r.expandObjectPaths(H)))):he[U][q]=r.expandObjectPaths(H)):he[$]=r.expandObjectPaths(he[$]));return he},r.numSeparate=function(he,K,$){if($||($=!1),typeof K!="string"||K.length===0)throw new Error("Separator string required for formatting!");typeof he=="number"&&(he=String(he));var U=/(\d+)(\d{3})/,H=K.charAt(0),q=K.charAt(1),re=he.split("."),Z=re[0],Q=re.length>1?H+re[1]:"";if(q&&(re.length>1||Z.length>4||$))for(;U.test(Z);)Z=Z.replace(U,"$1"+q+"$2");return Z+Q},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;r.templateString=function(he,K){var $={};return he.replace(r.TEMPLATE_STRING_REGEX,function(U,H){var q;return D.test(H)?q=K[H]:($[H]=$[H]||r.nestedProperty(K,H).get,q=$[H]()),r.isValidTextValue(q)?q:""})};var R={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return G.apply(R,arguments)};var O={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return G.apply(O,arguments)};var z=/^[:|\|]/;function G(he,K,$){var U=this,H=arguments;K||(K={});var q={};return he.replace(r.TEMPLATE_STRING_REGEX,function(re,Z,Q){var oe=Z==="xother"||Z==="yother",se=Z==="_xother"||Z==="_yother",ae=Z==="_xother_"||Z==="_yother_",le=Z==="xother_"||Z==="yother_",_e=oe||se||le||ae,fe=Z;(se||ae)&&(fe=fe.substring(1)),(le||ae)&&(fe=fe.substring(0,fe.length-1));var me;if(_e){if(me=K[fe],me===void 0)return""}else{var xe,ye;for(ye=3;ye<H.length;ye++)if(xe=H[ye],!!xe){if(xe.hasOwnProperty(fe)){me=xe[fe];break}if(D.test(fe)||(me=r.nestedProperty(xe,fe).get(),me=q[fe]||r.nestedProperty(xe,fe).get(),me&&(q[fe]=me)),me!==void 0)break}}if(me===void 0&&U)return U.count<U.max&&(r.warn("Variable '"+fe+"' in "+U.name+" could not be found!"),me=re),U.count===U.max&&r.warn("Too many "+U.name+" warnings - additional warnings will be suppressed"),U.count++,re;if(Q){var be;if(Q[0]===":"&&(be=$?$.numberFormat:r.numberFormat,me=be(Q.replace(z,""))(me)),Q[0]==="|"){be=$?$.timeFormat:u;var ke=r.dateTime2ms(me);me=r.formatDate(ke,Q.replace(z,""),!1,be)}}else{var De=fe+"Label";K.hasOwnProperty(De)&&(me=K[De])}return _e&&(me="("+me+")",(se||ae)&&(me=" "+me),(le||ae)&&(me=me+" ")),me})}var Y=48,ee=57;r.subplotSort=function(he,K){for(var $=Math.min(he.length,K.length)+1,U=0,H=0,q=0;q<$;q++){var re=he.charCodeAt(q)||0,Z=K.charCodeAt(q)||0,Q=re>=Y&&re<=ee,oe=Z>=Y&&Z<=ee;if(Q&&(U=10*U+re-Y),oe&&(H=10*H+Z-Y),!Q||!oe){if(U!==H)return U-H;if(re!==Z)return re-Z}}return H-U};var j=2e9;r.seedPseudoRandom=function(){j=2e9},r.pseudoRandom=function(){var he=j;return j=(69069*j+1)%4294967296,Math.abs(j-he)<429496729?r.pseudoRandom():j/4294967296},r.fillText=function(he,K,$){var U=Array.isArray($)?function(re){$.push(re)}:function(re){$.text=re},H=r.extractOption(he,K,"htx","hovertext");if(r.isValidTextValue(H))return U(H);var q=r.extractOption(he,K,"tx","text");if(r.isValidTextValue(q))return U(q)},r.isValidTextValue=function(he){return he||he===0},r.formatPercent=function(he,K){K=K||0;for(var $=(Math.round(100*he*Math.pow(10,K))*Math.pow(.1,K)).toFixed(K)+"%",U=0;U<K;U++)$.indexOf(".")!==-1&&($=$.replace("0%","%"),$=$.replace(".%","%"));return $},r.isHidden=function(he){var K=window.getComputedStyle(he).display;return!K||K==="none"},r.strTranslate=function(he,K){return he||K?"translate("+he+","+K+")":""},r.strRotate=function(he){return he?"rotate("+he+")":""},r.strScale=function(he){return he!==1?"scale("+he+")":""},r.getTextTransform=function(he){var K=he.noCenter,$=he.textX,U=he.textY,H=he.targetX,q=he.targetY,re=he.anchorX||0,Z=he.anchorY||0,Q=he.rotate,oe=he.scale;return oe?oe>1&&(oe=1):oe=0,r.strTranslate(H-oe*($+re),q-oe*(U+Z))+r.strScale(oe)+(Q?"rotate("+Q+(K?"":" "+$+" "+U)+")":"")},r.setTransormAndDisplay=function(he,K){he.attr("transform",r.getTextTransform(K)),he.style("display",K.scale?null:"none")},r.ensureUniformFontSize=function(he,K){var $=r.extendFlat({},K);return $.size=Math.max(K.size,he._fullLayout.uniformtext.minsize||0),$},r.join2=function(he,K,$){var U=he.length;return U>1?he.slice(0,-1).join(K)+$+he[U-1]:he.join(K)},r.bigFont=function(he){return Math.round(1.2*he)};var X=r.getFirefoxVersion(),ie=X!==null&&X<86;r.getPositionFromD3Event=function(){return ie?[m.event.layerX,m.event.layerY]:[m.event.offsetX,m.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(t,N,V){N.exports=function(u){return window&&window.process&&window.process.versions?Object.prototype.toString.call(u)==="[object Object]":Object.prototype.toString.call(u)==="[object Object]"&&Object.getPrototypeOf(u).hasOwnProperty("hasOwnProperty")}},{}],517:[function(t,N,V){var m=t("./nested_property"),u=/^\w*$/,A=0,T=1,e=2,a=3,i=4;N.exports=function(r,v,s,o){s=s||"name",o=o||"value";var b,g,d,f={};v&&v.length?(d=m(r,v),g=d.get()):g=r,v=v||"";var y={};if(g)for(b=0;b<g.length;b++)y[g[b][s]]=b;var l=u.test(o),x={set:function(c,M){var w=M===null?i:A;if(!g){if(!d||w===i)return;g=[],d.set(g)}var p=y[c];if(p===void 0){if(w===i)return;w=w|a,p=g.length,y[c]=p}else M!==(l?g[p][o]:m(g[p],o).get())&&(w=w|e);var _=g[p]=g[p]||{};return _[s]=c,l?_[o]=M:m(_,o).set(M),M!==null&&(w=w&~i),f[p]=f[p]|w,x},get:function(c){if(!!g){var M=y[c];if(M!==void 0)return l?g[M][o]:m(g[M],o).get()}},rename:function(c,M){var w=y[c];return w===void 0||(f[w]=f[w]|T,y[M]=w,delete y[c],g[w][s]=M),x},remove:function(c){var M=y[c];if(M===void 0)return x;var w=g[M];if(Object.keys(w).length>2)return f[M]=f[M]|e,x.set(c,null);if(l){for(b=M;b<g.length;b++)f[b]=f[b]|a;for(b=M;b<g.length;b++)y[g[b][s]]--;g.splice(M,1),delete y[c]}else m(w,o).set(null),f[M]=f[M]|e|i;return x},constructUpdate:function(){for(var c,M,w={},p=Object.keys(f),_=0;_<p.length;_++)M=p[_],c=v+"["+M+"]",g[M]?(f[M]&T&&(w[c+"."+s]=g[M][s]),f[M]&e&&(l?w[c+"."+o]=f[M]&i?null:g[M][o]:w[c+"."+o]=f[M]&i?null:m(g[M],o).get())):w[c]=null;return w}};return x}},{"./nested_property":523}],518:[function(t,N,V){var m=t("../registry");N.exports=function(A,T){for(var e=A._context.locale,a=0;a<2;a++){for(var i=A._context.locales,n=0;n<2;n++){var r=(i[e]||{}).dictionary;if(r){var v=r[T];if(v)return v}i=m.localeRegistry}var s=e.split("-")[0];if(s===e)break;e=s}return T}},{"../registry":647}],519:[function(t,N,V){var m=t("../plot_api/plot_config").dfltConfig,u=t("./notifier"),A=N.exports={};A.log=function(){var T;if(m.logging>1){var e=["LOG:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(m.notifyOnLogging>1){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);u(a.join("<br>"),"long")}},A.warn=function(){var T;if(m.logging>0){var e=["WARN:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(m.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);u(a.join("<br>"),"stick")}},A.error=function(){var T;if(m.logging>0){var e=["ERROR:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.error.apply(console,e)}if(m.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);u(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(t,N,V){var m=t("@plotly/d3");N.exports=function(A,T,e){var a=A.selectAll("g."+e.replace(/\s/g,".")).data(T,function(n){return n[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",e),a.order();var i=A.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(n){n[0][i]=m.select(this)}),a}},{"@plotly/d3":58}],521:[function(t,N,V){var m=t("gl-mat4");V.init2dArray=function(u,A){for(var T=new Array(u),e=0;e<u;e++)T[e]=new Array(A);return T},V.transposeRagged=function(u){var A=0,T=u.length,e,a;for(e=0;e<T;e++)A=Math.max(A,u[e].length);var i=new Array(A);for(e=0;e<A;e++)for(i[e]=new Array(T),a=0;a<T;a++)i[e][a]=u[a][e];return i},V.dot=function(u,A){if(!(u.length&&A.length)||u.length!==A.length)return null;var T=u.length,e,a;if(u[0].length)for(e=new Array(T),a=0;a<T;a++)e[a]=V.dot(u[a],A);else if(A[0].length){var i=V.transposeRagged(A);for(e=new Array(i.length),a=0;a<i.length;a++)e[a]=V.dot(u,i[a])}else for(e=0,a=0;a<T;a++)e+=u[a]*A[a];return e},V.translationMatrix=function(u,A){return[[1,0,u],[0,1,A],[0,0,1]]},V.rotationMatrix=function(u){var A=u*Math.PI/180;return[[Math.cos(A),-Math.sin(A),0],[Math.sin(A),Math.cos(A),0],[0,0,1]]},V.rotationXYMatrix=function(u,A,T){return V.dot(V.dot(V.translationMatrix(A,T),V.rotationMatrix(u)),V.translationMatrix(-A,-T))},V.apply3DTransform=function(u){return function(){var A=arguments,T=arguments.length===1?A[0]:[A[0],A[1],A[2]||0];return V.dot(u,[T[0],T[1],T[2],1]).slice(0,3)}},V.apply2DTransform=function(u){return function(){var A=arguments;A.length===3&&(A=A[0]);var T=arguments.length===1?A[0]:[A[0],A[1]];return V.dot(u,[T[0],T[1],1]).slice(0,2)}},V.apply2DTransform2=function(u){var A=V.apply2DTransform(u);return function(T){return A(T.slice(0,2)).concat(A(T.slice(2,4)))}},V.convertCssMatrix=function(u){if(u){var A=u.length;if(A===16)return u;if(A===6)return[u[0],u[1],0,0,u[2],u[3],0,0,0,0,1,0,u[4],u[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V.inverseTransformMatrix=function(u){var A=[];return m.invert(A,u),[[A[0],A[1],A[2],A[3]],[A[4],A[5],A[6],A[7]],[A[8],A[9],A[10],A[11]],[A[12],A[13],A[14],A[15]]]}},{"gl-mat4":210}],522:[function(t,N,V){function m(A,T){var e=A%T;return e<0?e+T:e}function u(A,T){return Math.abs(A)>T/2?A-Math.round(A/T)*T:A}N.exports={mod:m,modHalf:u}},{}],523:[function(t,N,V){var m=t("fast-isnumeric"),u=t("./array").isArrayOrTypedArray;N.exports=function(o,b){if(m(b))b=String(b);else if(typeof b!="string"||b.substr(b.length-4)==="[-1]")throw"bad property string";for(var g=0,d=b.split("."),f,y,l;g<d.length;){if(f=String(d[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),f){if(f[1])d[g]=f[1];else if(g===0)d.splice(0,1);else throw"bad property string";for(y=f[2].substr(1,f[2].length-2).split("]["),l=0;l<y.length;l++)g++,d.splice(g,0,Number(y[l]))}g++}return typeof o!="object"?v(o,b,d):{set:a(o,d,b),get:A(o,d),astr:b,parts:d,obj:o}};function A(s,o){return function(){var b=s,g,d,f,y,l;for(y=0;y<o.length-1;y++){if(g=o[y],g===-1){for(d=!0,f=[],l=0;l<b.length;l++)f[l]=A(b[l],o.slice(y+1))(),f[l]!==f[0]&&(d=!1);return d?f[0]:f}if(typeof g=="number"&&!u(b)||(b=b[g],typeof b!="object"||b===null))return}if(!(typeof b!="object"||b===null)&&(f=b[o[y]],f!==null))return f}}var T=/(^|\.)args\[/;function e(s,o){return s===void 0||s===null&&!o.match(T)}function a(s,o,b){return function(g){var d=s,f="",y=e(g,b),l,x;for(x=0;x<o.length-1;x++){if(l=o[x],typeof l=="number"&&!u(d))throw"array index but container is not an array";if(l===-1){if(y=!n(d,o.slice(x+1),g,b),y)break;return}if(!r(d,l,o[x+1],y))break;if(d=d[l],typeof d!="object"||d===null)throw"container is not an object";f=i(f,l)}if(y){if(x===o.length-1&&(delete d[o[x]],Array.isArray(d)&&+o[x]===d.length-1))for(;d.length&&d[d.length-1]===void 0;)d.pop()}else d[o[x]]=g}}function i(s,o){var b=o;return m(o)?b="["+o+"]":s&&(b="."+o),s+b}function n(s,o,b,g){var d=u(b),f=!0,y=b,l=g.replace("-1",0),x=d?!1:e(b,l),c=o[0],M;for(M=0;M<s.length;M++)l=g.replace("-1",M),d&&(y=b[M%b.length],x=e(y,l)),x&&(f=!1),r(s,M,c,x)&&a(s[M],o,g.replace("-1",M))(y);return f}function r(s,o,b,g){if(s[o]===void 0){if(g)return!1;typeof b=="number"?s[o]=[]:s[o]={}}return!0}function v(s,o,b){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:b,obj:s}}},{"./array":497,"fast-isnumeric":190}],524:[function(t,N,V){N.exports=function(){}},{}],525:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=[];N.exports=function(T,e){if(A.indexOf(T)!==-1)return;A.push(T);var a=1e3;u(e)?a=e:e==="long"&&(a=3e3);var i=m.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var n=i.selectAll(".notifier-note").data(A);function r(v){v.duration(700).style("opacity",0).each("end",function(s){var o=A.indexOf(s);o!==-1&&A.splice(o,1),m.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(v){var s=m.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(r)});for(var o=s.append("p"),b=v.split(/<br\s*\/?>/g),g=0;g<b.length;g++)g&&o.append("br"),o.append("span").text(b[g]);e==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(a).call(r)})}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(t,N,V){var m=t("./setcursor"),u="data-savedcursor",A="!!";N.exports=function(e,a){var i=e.attr(u);if(a){if(!i){for(var n=(e.attr("class")||"").split(" "),r=0;r<n.length;r++){var v=n[r];v.indexOf("cursor-")===0&&e.attr(u,v.substr(7)).classed(v,!1)}e.attr(u)||e.attr(u,A)}m(e,a)}else i&&(e.attr(u,null),i===A?m(e):m(e,i))}},{"./setcursor":536}],527:[function(t,N,V){var m=t("./matrix").dot,u=t("../constants/numerical").BADNUM,A=N.exports={};A.tester=function(e){var a=e.slice(),i=a[0][0],n=i,r=a[0][1],v=r,s;for((a[a.length-1][0]!==a[0][0]||a[a.length-1][1]!==a[0][1])&&a.push(a[0]),s=1;s<a.length;s++)i=Math.min(i,a[s][0]),n=Math.max(n,a[s][0]),r=Math.min(r,a[s][1]),v=Math.max(v,a[s][1]);var o=!1,b;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(o=!0,b=function(l){return l[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(o=!0,b=function(l){return l[1]===a[0][1]}));function g(l,x){var c=l[0],M=l[1];return!(c===u||c<i||c>n||M===u||M<r||M>v||x&&b(l))}function d(l,x){var c=l[0],M=l[1];if(c===u||c<i||c>n||M===u||M<r||M>v)return!1;var w=a.length,p=a[0][0],_=a[0][1],h=0,L,E,S,P,F;for(L=1;L<w;L++)if(E=p,S=_,p=a[L][0],_=a[L][1],P=Math.min(E,p),!(c<P||c>Math.max(E,p)||M>Math.max(S,_)))if(M<Math.min(S,_))c!==P&&h++;else{if(p===E?F=M:F=S+(c-E)*(_-S)/(p-E),M===F)return!(L===1&&x);M<=F&&c!==P&&h++}return h%2===1}var f=!0,y=a[0];for(s=1;s<a.length;s++)if(y[0]!==a[s][0]||y[1]!==a[s][1]){f=!1;break}return{xmin:i,xmax:n,ymin:r,ymax:v,pts:a,contains:o?g:d,isRect:o,degenerate:f}},A.isSegmentBent=function(e,a,i,n){var r=e[a],v=[e[i][0]-r[0],e[i][1]-r[1]],s=m(v,v),o=Math.sqrt(s),b=[-v[1]/o,v[0]/o],g,d,f;for(g=a+1;g<i;g++)if(d=[e[g][0]-r[0],e[g][1]-r[1]],f=m(d,v),f<0||f>s||Math.abs(m(d,b))>n)return!0;return!1},A.filter=function(e,a){var i=[e[0]],n=0,r=0;function v(o){e.push(o);var b=i.length,g=n;i.splice(r+1);for(var d=g+1;d<e.length;d++)(d===e.length-1||A.isSegmentBent(e,g,d+1,a))&&(i.push(e[d]),i.length<b-2&&(n=d,r=i.length-1),g=d)}if(e.length>1){var s=e.pop();v(s)}return{addPt:v,raw:e,filtered:i}}},{"../constants/numerical":491,"./matrix":521}],528:[function(t,N,V){(function(m){(function(){var u=t("./show_no_webgl_msg"),A=t("regl");N.exports=function(e,a,i){var n=e._fullLayout,r=!0;return n._glcanvas.each(function(v){if(v.regl){v.regl.preloadCachedCode(i);return}if(!(v.pick&&!n._has("parcoords"))){try{v.regl=A({canvas:this,attributes:{antialias:!v.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||m.devicePixelRatio,extensions:a||[],cachedCode:i||{}})}catch{r=!1}v.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(s){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:s,layer:v.key})},!1)}}),r||u({container:n._glcontainer.node()}),r}}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(t,N,V){var m=t("fast-isnumeric"),u=t("is-mobile");N.exports=function(e){var a;if(e&&e.hasOwnProperty("userAgent")?a=e.userAgent:a=A(),typeof a!="string")return!0;var i=u({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!i)for(var n=a.split(" "),r=1;r<n.length;r++){var v=n[r];if(v.indexOf("Safari")!==-1)for(var s=r-1;s>-1;s--){var o=n[s];if(o.substr(0,8)==="Version/"){var b=o.substr(8).split(".")[0];if(m(b)&&(b=+b),b>=13)return!0}}}return i};function A(){var T;return typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),T}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(t,N,V){N.exports=function(u,A){if(A instanceof RegExp){for(var T=A.toString(),e=0;e<u.length;e++)if(u[e]instanceof RegExp&&u[e].toString()===T)return u;u.push(A)}else(A||A===0)&&u.indexOf(A)===-1&&u.push(A);return u}},{}],531:[function(t,N,V){var m=t("../lib"),u=t("../plot_api/plot_config").dfltConfig;function A(e,a){for(var i=[],n,r=0;r<a.length;r++)n=a[r],n===e?i[r]=n:typeof n=="object"?i[r]=Array.isArray(n)?m.extendDeep([],n):m.extendDeepAll({},n):i[r]=n;return i}var T={};T.add=function(e,a,i,n,r){var v,s;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(v={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,v),e.undoQueue.index+=1):v=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,v&&(v.undo.calls.unshift(a),v.undo.args.unshift(i),v.redo.calls.push(n),v.redo.args.push(r)),e.undoQueue.queue.length>u.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},T.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},T.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},T.undo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.undo.calls.length;n++)T.plotDo(a,i.undo.calls[n],i.undo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1}},T.redo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.redo.calls.length;n++)T.plotDo(a,i.redo.calls[n],i.redo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},T.plotDo=function(e,a,i){e.autoplay=!0,i=A(e,i),a.apply(null,i)},N.exports=T},{"../lib":515,"../plot_api/plot_config":553}],532:[function(t,N,V){V.counter=function(m,u,A,T){var e=(u||"")+(A?"":"$"),a=T===!1?"":"^";return m==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(a+m+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(t,N,V){var m=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,u=/^[^\.\[\]]+$/;N.exports=function(A,T){for(;T;){var e=A.match(m);if(e)A=e[1];else if(A.match(u))A="";else throw new Error("bad relativeAttr call:"+[A,T]);if(T.charAt(0)==="^")T=T.slice(1);else break}return A&&T.charAt(0)!=="["?A+"."+T:A+T}},{}],534:[function(t,N,V){var m=t("./array").isArrayOrTypedArray,u=t("./is_plain_object");N.exports=function A(T,e){for(var a in e){var i=e[a],n=T[a];if(n!==i)if(a.charAt(0)==="_"||typeof i=="function"){if(a in T)continue;T[a]=i}else if(m(i)&&m(n)&&u(i[0])){if(a==="customdata"||a==="ids")continue;for(var r=Math.min(i.length,n.length),v=0;v<r;v++)n[v]!==i[v]&&u(i[v])&&u(n[v])&&A(n[v],i[v])}else u(i)&&u(n)&&(A(n,i),Object.keys(n).length||delete T[a])}}},{"./array":497,"./is_plain_object":516}],535:[function(t,N,V){var m=t("fast-isnumeric"),u=t("./loggers"),A=t("./identity"),T=t("../constants/numerical").BADNUM,e=1e-9;V.findBin=function(v,s,o){if(m(s.start))return o?Math.ceil((v-s.start)/s.size-e)-1:Math.floor((v-s.start)/s.size+e);var b=0,g=s.length,d=0,f=g>1?(s[g-1]-s[0])/(g-1):1,y,l;for(f>=0?l=o?a:i:l=o?r:n,v+=f*e*(o?-1:1)*(f>=0?1:-1);b<g&&d++<100;)y=Math.floor((b+g)/2),l(s[y],v)?b=y+1:g=y;return d>90&&u.log("Long binary search..."),b-1};function a(v,s){return v<s}function i(v,s){return v<=s}function n(v,s){return v>s}function r(v,s){return v>=s}V.sorterAsc=function(v,s){return v-s},V.sorterDes=function(v,s){return s-v},V.distinctVals=function(v){var s=v.slice();s.sort(V.sorterAsc);var o;for(o=s.length-1;o>-1&&s[o]===T;o--);for(var b=s[o]-s[0]||1,g=b/(o||1)/1e4,d=[],f,y=0;y<=o;y++){var l=s[y],x=l-f;f===void 0?(d.push(l),f=l):x>g&&(b=Math.min(b,x),d.push(l),f=l)}return{vals:d,minDiff:b}},V.roundUp=function(v,s,o){for(var b=0,g=s.length-1,d,f=0,y=o?0:1,l=o?1:0,x=o?Math.ceil:Math.floor;b<g&&f++<100;)d=x((b+g)/2),s[d]<=v?b=d+y:g=d-l;return s[b]},V.sort=function(v,s){for(var o=0,b=0,g=1;g<v.length;g++){var d=s(v[g],v[g-1]);if(d<0?o=1:d>0&&(b=1),o&&b)return v.sort(s)}return b?v:v.reverse()},V.findIndexOfMin=function(v,s){s=s||A;for(var o=1/0,b,g=0;g<v.length;g++){var d=s(v[g]);d<o&&(o=d,b=g)}return b}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(t,N,V){N.exports=function(u,A){(u.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&u.classed(T,!1)}),A&&u.classed("cursor-"+A,!0)}},{}],537:[function(t,N,V){var m=t("../components/color"),u=function(){};N.exports=function(T){for(var e in T)typeof T[e]=="function"&&(T[e]=u);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=m.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=m.lightLine,a.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",a.appendChild(i),T.container.appendChild(a),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(t,N,V){N.exports=function(u){return Object.keys(u).sort()}},{}],539:[function(t,N,V){var m=t("fast-isnumeric"),u=t("./array").isArrayOrTypedArray;V.aggNums=function(A,T,e,a){var i,n;if((!a||a>e.length)&&(a=e.length),m(T)||(T=!1),u(e[0])){for(n=new Array(a),i=0;i<a;i++)n[i]=V.aggNums(A,T,e[i]);e=n}for(i=0;i<a;i++)m(T)?m(e[i])&&(T=A(+T,+e[i])):T=e[i];return T},V.len=function(A){return V.aggNums(function(T){return T+1},0,A)},V.mean=function(A,T){return T||(T=V.len(A)),V.aggNums(function(e,a){return e+a},0,A)/T},V.midRange=function(A){if(!(A===void 0||A.length===0))return(V.aggNums(Math.max,null,A)+V.aggNums(Math.min,null,A))/2},V.variance=function(A,T,e){return T||(T=V.len(A)),m(e)||(e=V.mean(A,T)),V.aggNums(function(a,i){return a+Math.pow(i-e,2)},0,A)/T},V.stdev=function(A,T,e){return Math.sqrt(V.variance(A,T,e))},V.median=function(A){var T=A.slice().sort();return V.interp(T,.5)},V.interp=function(A,T){if(!m(T))throw"n should be a finite number";if(T=T*A.length-.5,T<0)return A[0];if(T>A.length-1)return A[A.length-1];var e=T%1;return e*A[Math.ceil(T)]+(1-e)*A[Math.floor(T)]}},{"./array":497,"fast-isnumeric":190}],540:[function(t,N,V){var m=t("color-normalize");function u(A){return A?m(A):[0,0,0,1]}N.exports=u},{"color-normalize":89}],541:[function(t,N,V){var m=t("@plotly/d3"),u=t("../lib"),A=u.strTranslate,T=t("../constants/xmlns_namespaces"),e=t("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;V.convertToTspans=function(z,G,Y){var ee=z.text(),j=!z.attr("data-notex")&&G&&G._context.typesetMath&&typeof MathJax<"u"&&ee.match(a),X=m.select(z.node().parentNode);if(X.empty())return;var ie=z.attr("class")?z.attr("class").split(" ")[0]:"text";ie+="-math",X.selectAll("svg."+ie).remove(),X.selectAll("g."+ie+"-group").remove(),z.style("display",null).attr({"data-unformatted":ee,"data-math":"N"});function he(){X.empty()||(ie=z.attr("class")+"-math",X.select("svg."+ie).remove()),z.text("").style("white-space","pre");var K=I(z.node(),ee);K&&z.style("pointer-events","all"),V.positionText(z),Y&&Y.call(z)}return j?(G&&G._promises||[]).push(new Promise(function(K){z.style("display","none");var $=parseInt(z.node().style.fontSize,10),U={fontSize:$};s(j[2],U,function(H,q,re){X.selectAll("svg."+ie).remove(),X.selectAll("g."+ie+"-group").remove();var Z=H&&H.select("svg");if(!Z||!Z.node()){he(),K();return}var Q=X.append("g").classed(ie+"-group",!0).attr({"pointer-events":"none","data-unformatted":ee,"data-math":"Y"});Q.node().appendChild(Z.node()),q&&q.node()&&Z.node().insertBefore(q.node().cloneNode(!0),Z.node().firstChild);var oe=re.width,se=re.height;Z.attr({class:ie,height:se,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ae=z.node().style.fill||"black",le=Z.select("g");le.attr({fill:ae,stroke:ae});var _e=le.node().getBoundingClientRect(),fe=_e.width,me=_e.height;(fe>oe||me>se)&&(Z.style("overflow","hidden"),_e=Z.node().getBoundingClientRect(),fe=_e.width,me=_e.height);var xe=+z.attr("x"),ye=+z.attr("y"),be=$||z.node().getBoundingClientRect().height,ke=-be/4;if(ie[0]==="y")Q.attr({transform:"rotate("+[-90,xe,ye]+")"+A(-fe/2,ke-me/2)});else if(ie[0]==="l")ye=ke-me/2;else if(ie[0]==="a"&&ie.indexOf("atitle")!==0)xe=0,ye=ke;else{var De=z.attr("text-anchor");xe=xe-fe*(De==="middle"?.5:De==="end"?1:0),ye=ye+ke-me/2}Z.attr({x:xe,y:ye}),Y&&Y.call(z,Q),K(Q)})})):he(),z};var i=/(<|&lt;|&#60;)/g,n=/(>|&gt;|&#62;)/g;function r(z){return z.replace(i,"\\lt ").replace(n,"\\gt ")}var v=[["$","$"],["\\(","\\)"]];function s(z,G,Y){var ee=parseInt((MathJax.version||"").split(".")[0]);if(ee!==2&&ee!==3){u.warn("No MathJax version:",MathJax.version);return}var j,X,ie,he,K=function(){return X=u.extendDeepAll({},MathJax.Hub.config),ie=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:v},displayAlign:"left"})},$=function(){X=u.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=v},U=function(){if(j=MathJax.Hub.config.menuSettings.renderer,j!=="SVG")return MathJax.Hub.setRenderer("SVG")},H=function(){j=MathJax.config.startup.output,j!=="svg"&&(MathJax.config.startup.output="svg")},q=function(){var ae="math-output-"+u.randstr({},64);he=m.select("body").append("div").attr({id:ae}).style({visibility:"hidden",position:"absolute","font-size":G.fontSize+"px"}).text(r(z));var le=he.node();return ee===2?MathJax.Hub.Typeset(le):MathJax.typeset([le])},re=function(){var ae=he.select(ee===2?".MathJax_SVG":".MathJax"),le=!ae.empty()&&he.select("svg").node();if(!le)u.log("There was an error in the tex syntax.",z),Y();else{var _e=le.getBoundingClientRect(),fe;ee===2?fe=m.select("body").select("#MathJax_SVG_glyphs"):fe=ae.select("defs"),Y(ae,fe,_e)}he.remove()},Z=function(){if(j!=="SVG")return MathJax.Hub.setRenderer(j)},Q=function(){j!=="svg"&&(MathJax.config.startup.output=j)},oe=function(){return ie!==void 0&&(MathJax.Hub.processSectionDelay=ie),MathJax.Hub.Config(X)},se=function(){MathJax.config=X};ee===2?MathJax.Hub.Queue(K,U,q,re,Z,oe):ee===3&&($(),H(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){q(),re(),Q(),se()}))}var o={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},b={sub:"0.3em",sup:"-0.6em"},g={sub:"-0.21em",sup:"0.42em"},d="\u200B",f=["http:","https:","mailto:","",void 0,":"],y=V.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,c=/<br(\s+.*)?>/i;V.BR_TAG_ALL=/<br(\s+.*)?>/gi;var M=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,_=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function h(z,G){if(!z)return null;var Y=z.match(G),ee=Y&&(Y[3]||Y[4]);return ee&&P(ee)}var L=/(^|;)\s*color:/;V.plainText=function(z,G){G=G||{};for(var Y=G.len!==void 0&&G.len!==-1?G.len:1/0,ee=G.allowedTags!==void 0?G.allowedTags:["br"],j="...",X=j.length,ie=z.split(l),he=[],K="",$=0,U=0;U<ie.length;U++){var H=ie[U],q=H.match(x),re=q&&q[2].toLowerCase();if(re)ee.indexOf(re)!==-1&&(he.push(H),K=re);else{var Z=H.length;if($+Z<Y)he.push(H),$+=Z;else if($<Y){var Q=Y-$;K&&(K!=="br"||Q<=X||Z<=X)&&he.pop(),Y>X?he.push(H.substr(0,Q-X)+j):he.push(H.substr(0,Q));break}K=""}}return he.join("")};var E={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(z){return z.replace(S,function(G,Y){var ee;return Y.charAt(0)==="#"?ee=F(Y.charAt(1)==="x"?parseInt(Y.substr(2),16):parseInt(Y.substr(1),10)):ee=E[Y],ee||G})}V.convertEntities=P;function F(z){if(!(z>1114111)){var G=String.fromCodePoint;if(G)return G(z);var Y=String.fromCharCode;return z<=65535?Y(z):Y((z>>10)+55232,z%1024+56320)}}function I(z,G){G=G.replace(y," ");var Y=!1,ee=[],j,X=-1;function ie(){X++;var me=document.createElementNS(T.svg,"tspan");m.select(me).attr({class:"line",dy:X*e+"em"}),z.appendChild(me),j=me;var xe=ee;if(ee=[{node:me}],xe.length>1)for(var ye=1;ye<xe.length;ye++)he(xe[ye])}function he(me){var xe=me.type,ye={},be;if(xe==="a"){be="a";var ke=me.target,De=me.href,He=me.popup;De&&(ye={"xlink:xlink:show":ke==="_blank"||ke.charAt(0)!=="_"?"new":"replace",target:ke,"xlink:xlink:href":De},He&&(ye.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+He+'");return false;'))}else be="tspan";me.style&&(ye.style=me.style);var Ae=document.createElementNS(T.svg,be);if(xe==="sup"||xe==="sub"){K(j,d),j.appendChild(Ae);var Le=document.createElementNS(T.svg,"tspan");K(Le,d),m.select(Le).attr("dy",g[xe]),ye.dy=b[xe],j.appendChild(Ae),j.appendChild(Le)}else j.appendChild(Ae);m.select(Ae).attr(ye),j=me.node=Ae,ee.push(me)}function K(me,xe){me.appendChild(document.createTextNode(xe))}function $(me){if(ee.length===1){u.log("Ignoring unexpected end tag </"+me+">.",G);return}var xe=ee.pop();me!==xe.type&&u.log("Start tag <"+xe.type+"> doesnt match end tag <"+me+">. Pretending it did match.",G),j=ee[ee.length-1].node}var U=c.test(G);U?ie():(j=z,ee=[{node:z}]);for(var H=G.split(l),q=0;q<H.length;q++){var re=H[q],Z=re.match(x),Q=Z&&Z[2].toLowerCase(),oe=o[Q];if(Q==="br")ie();else if(oe===void 0)K(j,P(re));else if(Z[1])$(Q);else{var se=Z[4],ae={type:Q},le=h(se,M);if(le?(le=le.replace(L,"$1 fill:"),oe&&(le+=";"+oe)):oe&&(le=oe),le&&(ae.style=le),Q==="a"){Y=!0;var _e=h(se,w);if(_e){var fe=D(_e);fe&&(ae.href=fe,ae.target=h(se,p)||"_blank",ae.popup=h(se,_))}}he(ae)}}return Y}function D(z){var G=encodeURI(decodeURI(z)),Y=document.createElement("a"),ee=document.createElement("a");Y.href=z,ee.href=G;var j=Y.protocol,X=ee.protocol;return f.indexOf(j)!==-1&&f.indexOf(X)!==-1?G:""}V.sanitizeHTML=function(G){G=G.replace(y," ");for(var Y=document.createElement("p"),ee=Y,j=[],X=G.split(l),ie=0;ie<X.length;ie++){var he=X[ie],K=he.match(x),$=K&&K[2].toLowerCase();if($ in o)if(K[1])j.length&&(ee=j.pop());else{var U=K[4],H=h(U,M),q=H?{style:H}:{};if($==="a"){var re=h(U,w);if(re){var Z=D(re);if(Z){q.href=Z;var Q=h(U,p);Q&&(q.target=Q)}}}var oe=document.createElement($);ee.appendChild(oe),m.select(oe).attr(q),ee=oe,j.push(oe)}else ee.appendChild(document.createTextNode(P(he)))}var se="innerHTML";return Y[se]},V.lineCount=function(G){return G.selectAll("tspan.line").size()||1},V.positionText=function(G,Y,ee){return G.each(function(){var j=m.select(this);function X(K,$){return $===void 0?($=j.attr(K),$===null&&(j.attr(K,0),$=0)):j.attr(K,$),$}var ie=X("x",Y),he=X("y",ee);this.nodeName==="text"&&j.selectAll("tspan.line").attr({x:ie,y:he})})};function R(z,G,Y){var ee=Y.horizontalAlign,j=Y.verticalAlign||"top",X=z.node().getBoundingClientRect(),ie=G.node().getBoundingClientRect(),he,K,$;return j==="bottom"?K=function(){return X.bottom-he.height}:j==="middle"?K=function(){return X.top+(X.height-he.height)/2}:K=function(){return X.top},ee==="right"?$=function(){return X.right-he.width}:ee==="center"?$=function(){return X.left+(X.width-he.width)/2}:$=function(){return X.left},function(){he=this.node().getBoundingClientRect();var U=$()-ie.left,H=K()-ie.top,q=Y.gd||{};if(Y.gd){q._fullLayout._calcInverseTransform(q);var re=u.apply3DTransform(q._fullLayout._invTransform)(U,H);U=re[0],H=re[1]}return this.style({top:H+"px",left:U+"px","z-index":1e3}),this}}var O="1px ";V.makeTextShadow=function(z){var G=O,Y=O,ee=O;return G+Y+ee+z+", -"+G+"-"+Y+ee+z+", "+G+"-"+Y+ee+z+", -"+G+Y+ee+z},V.makeEditable=function(z,G){var Y=G.gd,ee=G.delegate,j=m.dispatch("edit","input","cancel"),X=ee||z;if(z.style({"pointer-events":ee?"none":"all"}),z.size()!==1)throw new Error("boo");function ie(){K(),z.style({opacity:0});var $=X.attr("class"),U;$?U="."+$.split(" ")[0]+"-math-group":U="[class*=-math-group]",U&&m.select(z.node().parentNode).select(U).style({opacity:0})}function he($){var U=$.node(),H=document.createRange();H.selectNodeContents(U);var q=window.getSelection();q.removeAllRanges(),q.addRange(H),U.focus()}function K(){var $=m.select(Y),U=$.select(".svg-container"),H=U.append("div"),q=z.node().style,re=parseFloat(q.fontSize||12),Z=G.text;Z===void 0&&(Z=z.attr("data-unformatted")),H.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":re,color:G.fill||q.fill||"black",opacity:1,"background-color":G.background||"transparent",outline:"#ffffff33 1px solid",margin:[-re/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(R(z,U,G)).on("blur",function(){Y._editing=!1,z.text(this.textContent).style({opacity:1});var Q=m.select(this).attr("class"),oe;Q?oe="."+Q.split(" ")[0]+"-math-group":oe="[class*=-math-group]",oe&&m.select(z.node().parentNode).select(oe).style({opacity:0});var se=this.textContent;m.select(this).transition().duration(0).remove(),m.select(document).on("mouseup",null),j.edit.call(z,se)}).on("focus",function(){var Q=this;Y._editing=!0,m.select(document).on("mouseup",function(){if(m.event.target===Q)return!1;document.activeElement===H.node()&&H.node().blur()})}).on("keyup",function(){m.event.which===27?(Y._editing=!1,z.style({opacity:1}),m.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),j.cancel.call(z,this.textContent)):(j.input.call(z,this.textContent),m.select(this).call(R(z,U,G)))}).on("keydown",function(){m.event.which===13&&this.blur()}).call(he)}return G.immediate?ie():X.on("click",ie),m.rebind(z,j,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(t,N,V){var m={};V.throttle=function(T,e,a){var i=m[T],n=Date.now();if(!i){for(var r in m)m[r].ts<n-6e4&&delete m[r];i=m[T]={ts:0,timer:null}}u(i);function v(){a(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}if(n>i.ts+e){v();return}i.timer=setTimeout(function(){v(),i.timer=null},e)},V.done=function(A){var T=m[A];return!T||!T.timer?Promise.resolve():new Promise(function(e){var a=T.onDone;T.onDone=function(){a&&a(),e(),T.onDone=null}})},V.clear=function(A){if(A)u(m[A]),delete m[A];else for(var T in m)V.clear(T)};function u(A){A&&A.timer!==null&&(clearTimeout(A.timer),A.timer=null)}},{}],543:[function(t,N,V){var m=t("fast-isnumeric");N.exports=function(A,T){if(A>0)return Math.log(A)/Math.LN10;var e=Math.log(Math.min(T[0],T[1]))/Math.LN10;return m(e)||(e=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],544:[function(t,N,V){var m=N.exports={},u=t("../plots/geo/constants").locationmodeToLayer,A=t("topojson-client").feature;m.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},m.getTopojsonPath=function(T,e){return T+e+".json"},m.getTopojsonFeatures=function(T,e){var a=u[T.locationmode],i=e.objects[a];return A(e,i).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(t,N,V){N.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(t,N,V){N.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(t,N,V){var m=t("../registry");N.exports=function(A){for(var T=m.layoutArrayContainers,e=m.layoutArrayRegexes,a=A.split("[")[0],i,n,r=0;r<e.length;r++)if(n=A.match(e[r]),n&&n.index===0){i=n[0];break}if(i||(i=T[T.indexOf(a)]),!i)return!1;var v=A.substr(i.length);return v?(n=v.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),n?{array:i,index:Number(n[1]),property:n[3]||""}:!1):{array:i,index:"",property:""}}},{"../registry":647}],548:[function(t,N,V){var m=t("../lib"),u=m.extendFlat,A=m.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=T.flags.slice().concat(["fullReplot"]),i=e.flags.slice().concat("layoutReplot");N.exports={traces:T,layout:e,traceFlags:function(){return n(a)},layoutFlags:function(){return n(i)},update:function(s,o){var b=o.editType;if(b&&b!=="none")for(var g=b.split("+"),d=0;d<g.length;d++)s[g[d]]=!0},overrideAll:r};function n(s){for(var o={},b=0;b<s.length;b++)o[s[b]]=!1;return o}function r(s,o,b){var g=u({},s);for(var d in g){var f=g[d];A(f)&&(g[d]=v(f,o,b,d))}return b==="from-root"&&(g.editType=o),g}function v(s,o,b,g){if(s.valType){var d=u({},s);if(d.editType=o,Array.isArray(s.items)){d.items=new Array(s.items.length);for(var f=0;f<s.items.length;f++)d.items[f]=v(s.items[f],o)}return d}else return r(s,o,g.charAt(0)==="_"?"nested":"from-root")}},{"../lib":515}],549:[function(t,N,V){var m=t("fast-isnumeric"),u=t("gl-mat4/fromQuat"),A=t("../registry"),T=t("../lib"),e=t("../plots/plots"),a=t("../plots/cartesian/axis_ids"),i=t("../components/color"),n=a.cleanId,r=a.getFromTrace,v=A.traceIs;V.clearPromiseQueue=function(c){Array.isArray(c._promises)&&c._promises.length>0&&T.log("Clearing previous rejected promises from queue."),c._promises=[]},V.cleanLayout=function(c){var M,w;c||(c={}),c.xaxis1&&(c.xaxis||(c.xaxis=c.xaxis1),delete c.xaxis1),c.yaxis1&&(c.yaxis||(c.yaxis=c.yaxis1),delete c.yaxis1),c.scene1&&(c.scene||(c.scene=c.scene1),delete c.scene1);var p=(e.subplotsRegistry.cartesian||{}).attrRegex,_=(e.subplotsRegistry.polar||{}).attrRegex,h=(e.subplotsRegistry.ternary||{}).attrRegex,L=(e.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(c);for(M=0;M<E.length;M++){var S=E[M];if(p&&p.test(S)){var P=c[S];P.anchor&&P.anchor!=="free"&&(P.anchor=n(P.anchor)),P.overlaying&&(P.overlaying=n(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,f(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),o(P)}else if(_&&_.test(S)){var F=c[S];o(F.radialaxis)}else if(h&&h.test(S)){var I=c[S];o(I.aaxis),o(I.baxis),o(I.caxis)}else if(L&&L.test(S)){var D=c[S],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var O=R[0],z=R[1],G=R[2],Y=u([],O),ee=[];for(w=0;w<3;++w)ee[w]=z[w]+G*Y[2+4*w];D.camera={eye:{x:ee[0],y:ee[1],z:ee[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}o(D.xaxis),o(D.yaxis),o(D.zaxis)}}var j=Array.isArray(c.annotations)?c.annotations.length:0;for(M=0;M<j;M++){var X=c.annotations[M];!T.isPlainObject(X)||(X.ref&&(X.ref==="paper"?(X.xref="paper",X.yref="paper"):X.ref==="data"&&(X.xref="x",X.yref="y"),delete X.ref),s(X,"xref"),s(X,"yref"))}var ie=Array.isArray(c.shapes)?c.shapes.length:0;for(M=0;M<ie;M++){var he=c.shapes[M];!T.isPlainObject(he)||(s(he,"xref"),s(he,"yref"))}var K=Array.isArray(c.images)?c.images.length:0;for(M=0;M<K;M++){var $=c.images[M];!T.isPlainObject($)||(s($,"xref"),s($,"yref"))}var U=c.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),o(c),c.dragmode==="rotate"&&(c.dragmode="orbit"),i.clean(c),c.template&&c.template.layout&&V.cleanLayout(c.template.layout),c};function s(c,M){var w=c[M],p=M.charAt(0);w&&w!=="paper"&&(c[M]=n(w,p,!0))}function o(c){c&&((typeof c.title=="string"||typeof c.title=="number")&&(c.title={text:c.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(w,p){var _=c[w],h=c.title&&c.title[p];_&&!h&&(c.title||(c.title={}),c.title[p]=c[w],delete c[w])}}V.cleanData=function(c){for(var M=0;M<c.length;M++){var w=c[M],p;if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var _=i.defaults,h=w.error_y.color||(v(w,"bar")?i.defaultLine:_[M%_.length]);w.error_y.color=i.addOpacity(i.rgb(h),i.opacity(h)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir==="h"&&(v(w,"bar")||w.type.substr(0,9)==="histogram")&&(w.orientation="h",V.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&V.swapXYData(w),(w.type==="histogramx"||w.type==="histogramy")&&(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=n(w.xaxis,"x")),w.yaxis&&(w.yaxis=n(w.yaxis,"y")),v(w,"gl3d")&&w.scene&&(w.scene=e.subplotsRegistry.gl3d.cleanId(w.scene)),!v(w,"pie-like")&&!v(w,"bar-like"))if(Array.isArray(w.textposition))for(p=0;p<w.textposition.length;p++)w.textposition[p]=d(w.textposition[p]);else w.textposition&&(w.textposition=d(w.textposition));var L=A.getModule(w);if(L&&L.colorbar){var E=L.colorbar.container,S=E?w[E]:w;S&&S.colorscale&&(S.colorscale==="YIGnBu"&&(S.colorscale="YlGnBu"),S.colorscale==="YIOrRd"&&(S.colorscale="YlOrRd"))}if(w.type==="surface"&&T.isPlainObject(w.contours)){var P=["x","y","z"];for(p=0;p<P.length;p++){var F=w.contours[P[p]];!T.isPlainObject(F)||(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var I=(w.increasing||{}).showlegend!==!1,D=(w.decreasing||{}).showlegend!==!1,R=b(w.increasing),O=b(w.decreasing);if(R!==!1&&O!==!1){var z=g(R,O,I,D);z&&(w.name=z)}else(R||O)&&!w.name&&(w.name=R||O)}if(Array.isArray(w.transforms)){var G=w.transforms;for(p=0;p<G.length;p++){var Y=G[p];if(!!T.isPlainObject(Y))switch(Y.type){case"filter":Y.filtersrc&&(Y.target=Y.filtersrc,delete Y.filtersrc),Y.calendar&&(Y.valuecalendar||(Y.valuecalendar=Y.calendar),delete Y.calendar);break;case"groupby":if(Y.styles=Y.styles||Y.style,Y.styles&&!Array.isArray(Y.styles)){var ee=Y.styles,j=Object.keys(ee);Y.styles=[];for(var X=0;X<j.length;X++)Y.styles.push({target:j[X],value:ee[j[X]]})}break}}}f(w,"line")&&delete w.line,"marker"in w&&(f(w.marker,"line")&&delete w.marker.line,f(w,"marker")&&delete w.marker),i.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),o(w),w.colorbar&&o(w.colorbar),w.marker&&w.marker.colorbar&&o(w.marker.colorbar),w.line&&w.line.colorbar&&o(w.line.colorbar),w.aaxis&&o(w.aaxis),w.baxis&&o(w.baxis)}};function b(c){if(!T.isPlainObject(c))return!1;var M=c.name;return delete c.name,delete c.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function g(c,M,w,p){if(w&&!p)return c;if(p&&!w||!c.trim())return M;if(!M.trim())return c;var _=Math.min(c.length,M.length),h;for(h=0;h<_&&c.charAt(h)===M.charAt(h);h++);var L=c.substr(0,h);return L.trim()}function d(c){var M="middle",w="center";return typeof c=="string"&&(c.indexOf("top")!==-1?M="top":c.indexOf("bottom")!==-1&&(M="bottom"),c.indexOf("left")!==-1?w="left":c.indexOf("right")!==-1&&(w="right")),M+" "+w}function f(c,M){return M in c&&typeof c[M]=="object"&&Object.keys(c[M]).length===0}V.swapXYData=function(c){var M;if(T.swapAttrs(c,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(c.z)&&Array.isArray(c.z[0])&&(c.transpose?delete c.transpose:c.transpose=!0),c.error_x&&c.error_y){var w=c.error_y,p="copy_ystyle"in w?w.copy_ystyle:!(w.color||w.thickness||w.width);T.swapAttrs(c,["error_?.copy_ystyle"]),p&&T.swapAttrs(c,["error_?.color","error_?.thickness","error_?.width"])}if(typeof c.hoverinfo=="string"){var _=c.hoverinfo.split("+");for(M=0;M<_.length;M++)_[M]==="x"?_[M]="y":_[M]==="y"&&(_[M]="x");c.hoverinfo=_.join("+")}},V.coerceTraceIndices=function(c,M){if(m(M))return[M];if(!Array.isArray(M)||!M.length)return c.data.map(function(_,h){return h});if(Array.isArray(M)){for(var w=[],p=0;p<M.length;p++)T.isIndex(M[p],c.data.length)?w.push(M[p]):T.warn("trace index (",M[p],") is not a number or is out of bounds");return w}return M},V.manageArrayContainers=function(c,M,w){var p=c.obj,_=c.parts,h=_.length,L=_[h-1],E=m(L);if(E&&M===null){var S=_.slice(0,h-1).join("."),P=T.nestedProperty(p,S).get();P.splice(L,1)}else E&&c.get()===void 0&&c.get()===void 0&&(w[c.astr]=null),c.set(M)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(c){var M=c.search(y);if(M>0)return c.substr(0,M)}V.hasParent=function(c,M){for(var w=l(M);w;){if(w in c)return!0;w=l(w)}return!1};var x=["x","y","z"];V.clearAxisTypes=function(c,M,w){for(var p=0;p<M.length;p++)for(var _=c._fullData[p],h=0;h<3;h++){var L=r(c,_,x[h]);if(L&&L.type!=="log"){var E=L._name,S=L._id.substr(1);if(S.substr(0,5)==="scene"){if(w[S]!==void 0)continue;E=S+"."+E}var P=E+".type";w[E]===void 0&&w[P]===void 0&&T.nestedProperty(c.layout,P).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(t,N,V){var m=t("./plot_api");V._doPlot=m._doPlot,V.newPlot=m.newPlot,V.restyle=m.restyle,V.relayout=m.relayout,V.redraw=m.redraw,V.update=m.update,V._guiRestyle=m._guiRestyle,V._guiRelayout=m._guiRelayout,V._guiUpdate=m._guiUpdate,V._storeDirectGUIEdit=m._storeDirectGUIEdit,V.react=m.react,V.extendTraces=m.extendTraces,V.prependTraces=m.prependTraces,V.addTraces=m.addTraces,V.deleteTraces=m.deleteTraces,V.moveTraces=m.moveTraces,V.purge=m.purge,V.addFrames=m.addFrames,V.deleteFrames=m.deleteFrames,V.animate=m.animate,V.setPlotConfig=m.setPlotConfig,V.toImage=t("./to_image"),V.validate=t("./validate"),V.downloadImage=t("../snapshot/download");var u=t("./template_api");V.makeTemplate=u.makeTemplate,V.validateTemplate=u.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(t,N,V){var m=t("../lib/is_plain_object"),u=t("../lib/noop"),A=t("../lib/loggers"),T=t("../lib/search").sorterAsc,e=t("../registry");V.containerArrayMatch=t("./container_array_match");var a=V.isAddVal=function(r){return r==="add"||m(r)},i=V.isRemoveVal=function(r){return r===null||r==="remove"};V.applyContainerArrayChanges=function(r,v,s,o,b){var g=v.astr,d=e.getComponentMethod(g,"supplyLayoutDefaults"),f=e.getComponentMethod(g,"draw"),y=e.getComponentMethod(g,"drawOne"),l=o.replot||o.recalc||d===u||f===u,x=r.layout,c=r._fullLayout;if(s[""]){Object.keys(s).length>1&&A.warn("Full array edits are incompatible with other edits",g);var M=s[""][""];if(i(M))v.set(null);else if(Array.isArray(M))v.set(M);else return A.warn("Unrecognized full array edit value",g,M),!0;return l?!1:(d(x,c),f(r),!0)}var w=Object.keys(s).map(Number).sort(T),p=v.get(),_=p||[],h=b(c,g).get(),L=[],E=-1,S=_.length,P,F,I,D,R,O,z,G;for(P=0;P<w.length;P++){if(I=w[P],D=s[I],R=Object.keys(D),O=D[""],z=a(O),I<0||I>_.length-(z?0:1)){A.warn("index out of range",g,I);continue}if(O!==void 0)R.length>1&&A.warn("Insertion & removal are incompatible with edits to the same index.",g,I),i(O)?L.push(I):z?(O==="add"&&(O={}),_.splice(I,0,O),h&&h.splice(I,0,{})):A.warn("Unrecognized full object edit value",g,I,O),E===-1&&(E=I);else for(F=0;F<R.length;F++)G=g+"["+I+"].",b(_[I],R[F],G).set(D[R[F]])}for(P=L.length-1;P>=0;P--)_.splice(L[P],1),h&&h.splice(L[P],1);if(_.length?p||v.set(_):v.set(null),l)return!1;if(d(x,c),y!==u){var Y;if(E===-1)Y=w;else{for(S=Math.max(_.length,S),Y=[],P=0;P<w.length&&(I=w[P],!(I>=E));P++)Y.push(I);for(P=E;P<S;P++)Y.push(P)}for(P=0;P<Y.length;P++)y(r,Y[P])}else f(r);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("has-hover"),T=t("../lib"),e=T.nestedProperty,a=t("../lib/events"),i=t("../lib/queue"),n=t("../registry"),r=t("./plot_schema"),v=t("../plots/plots"),s=t("../plots/cartesian/axes"),o=t("../components/drawing"),b=t("../components/color"),g=t("../plots/cartesian/graph_interact").initInteractions,d=t("../constants/xmlns_namespaces"),f=t("../components/selections").clearOutline,y=t("./plot_config").dfltConfig,l=t("./manage_arrays"),x=t("./helpers"),c=t("./subroutines"),M=t("./edit_types"),w=t("../plots/cartesian/constants").AX_NAME_PATTERN,p=0,_=5;function h(Ee,Ge,Ke,qe){var At;if(Ee=T.getGraphDiv(Ee),a.init(Ee),T.isPlainObject(Ge)){var yt=Ge;Ge=yt.data,Ke=yt.layout,qe=yt.config,At=yt.frames}var Mt=a.triggerHandler(Ee,"plotly_beforeplot",[Ge,Ke,qe]);if(Mt===!1)return Promise.reject();!Ge&&!Ke&&!T.isPlotDiv(Ee)&&T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ee);function Gt(){if(At)return V.addFrames(Ee,At)}F(Ee,qe),Ke||(Ke={}),m.select(Ee).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(Ee._promises)||(Ee._promises=[]);var zt=(Ee.data||[]).length===0&&Array.isArray(Ge);Array.isArray(Ge)&&(x.cleanData(Ge),zt?Ee.data=Ge:Ee.data.push.apply(Ee.data,Ge),Ee.empty=!1),(!Ee.layout||zt)&&(Ee.layout=x.cleanLayout(Ke)),v.supplyDefaults(Ee);var Ht=Ee._fullLayout,Zt=Ht._has("cartesian");Ht._replotting=!0,(zt||Ht._shouldCreateBgLayer)&&(Ye(Ee),Ht._shouldCreateBgLayer&&delete Ht._shouldCreateBgLayer),o.initGradients(Ee),o.initPatterns(Ee),zt&&s.saveShowSpikeInitial(Ee);var Wt=!Ee.calcdata||Ee.calcdata.length!==(Ee._fullData||[]).length;Wt&&v.doCalcdata(Ee);for(var sr=0;sr<Ee.calcdata.length;sr++)Ee.calcdata[sr][0].trace=Ee._fullData[sr];Ee._context.responsive?Ee._responsiveChartHandler||(Ee._responsiveChartHandler=function(){T.isHidden(Ee)||v.resize(Ee)},window.addEventListener("resize",Ee._responsiveChartHandler)):T.clearResponsive(Ee);var Gr=T.extendFlat({},Ht._size),cn=0;function qr(){for(var ft=Ht._basePlotModules,Et=0;Et<ft.length;Et++)ft[Et].drawFramework&&ft[Et].drawFramework(Ee);!Ht._glcanvas&&Ht._has("gl")&&(Ht._glcanvas=Ht._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(ot){return ot.key}),Ht._glcanvas.enter().append("canvas").attr("class",function(ot){return"gl-canvas gl-canvas-"+ot.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Vt=Ee._context.plotGlPixelRatio;if(Ht._glcanvas){Ht._glcanvas.attr("width",Ht.width*Vt).attr("height",Ht.height*Vt).style("width",Ht.width+"px").style("height",Ht.height+"px");var Pe=Ht._glcanvas.data()[0].regl;if(Pe&&(Math.floor(Ht.width*Vt)!==Pe._gl.drawingBufferWidth||Math.floor(Ht.height*Vt)!==Pe._gl.drawingBufferHeight)){var Se="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(cn)T.error(Se);else return T.log(Se+" Clearing graph and plotting again."),v.cleanPlot([],{},Ee._fullData,Ht),v.supplyDefaults(Ee),Ht=Ee._fullLayout,v.doCalcdata(Ee),cn++,qr()}}return Ht.modebar.orientation==="h"?Ht._modebardiv.style("height",null).style("width","100%"):Ht._modebardiv.style("width",null).style("height",Ht.height+"px"),v.previousPromises(Ee)}function st(){if(v.clearAutoMarginIds(Ee),c.drawMarginPushers(Ee),s.allowAutoMargin(Ee),Ht._has("pie"))for(var ft=Ee._fullData,Et=0;Et<ft.length;Et++){var Vt=ft[Et];Vt.type==="pie"&&Vt.automargin&&v.allowAutoMargin(Ee,"pie."+Vt.uid+".automargin")}return v.doAutoMargin(Ee),v.previousPromises(Ee)}function rr(){if(!!v.didMarginChange(Gr,Ht._size))return T.syncOrAsync([st,c.layoutStyles],Ee)}function Jt(){if(!Wt){hr();return}return T.syncOrAsync([n.getComponentMethod("shapes","calcAutorange"),n.getComponentMethod("annotations","calcAutorange"),hr],Ee)}function hr(){Ee._transitioning||(c.doAutoRangeAndConstraints(Ee),zt&&s.saveRangeInitial(Ee),n.getComponentMethod("rangeslider","calcAutorange")(Ee))}function Sr(){return s.draw(Ee,zt?"":"redraw")}var tt=[v.previousPromises,Gt,qr,st,rr];Zt&&tt.push(Jt),tt.push(c.layoutStyles),Zt&&tt.push(Sr,function(Et){Et._fullLayout._insideTickLabelsAutorange&&ae(Et,Et._fullLayout._insideTickLabelsAutorange).then(function(){Et._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(c.drawData,c.finalDraw,g,v.addLinks,v.rehover,v.redrag,v.reselect,v.doAutoMargin,Qe,v.previousPromises);function Qe(ft){ft._fullLayout._insideTickLabelsAutorange&&zt&&s.saveRangeInitial(ft,!0)}var lt=T.syncOrAsync(tt,Ee);return(!lt||!lt.then)&&(lt=Promise.resolve()),lt.then(function(){return L(Ee),Ee})}function L(Ee){var Ge=Ee._fullLayout;Ge._redrawFromAutoMarginCount?Ge._redrawFromAutoMarginCount--:Ee.emit("plotly_afterplot")}function E(Ee){return T.extendFlat(y,Ee)}function S(Ee,Ge){try{Ee._fullLayout._paper.style("background",Ge)}catch(Ke){T.error(Ke)}}function P(Ee,Ge){var Ke=b.combine(Ge,"white");S(Ee,Ke)}function F(Ee,Ge){if(!Ee._context){Ee._context=T.extendDeep({},y);var Ke=m.select("base");Ee._context._baseUrl=Ke.size()&&Ke.attr("href")?window.location.href.split("#")[0]:""}var qe=Ee._context,At,yt,Mt;if(Ge){for(yt=Object.keys(Ge),At=0;At<yt.length;At++)Mt=yt[At],!(Mt==="editable"||Mt==="edits")&&Mt in qe&&(Mt==="setBackground"&&Ge[Mt]==="opaque"?qe[Mt]=P:qe[Mt]=Ge[Mt]);Ge.plot3dPixelRatio&&!qe.plotGlPixelRatio&&(qe.plotGlPixelRatio=qe.plot3dPixelRatio);var Gt=Ge.editable;if(Gt!==void 0)for(qe.editable=Gt,yt=Object.keys(qe.edits),At=0;At<yt.length;At++)qe.edits[yt[At]]=Gt;if(Ge.edits)for(yt=Object.keys(Ge.edits),At=0;At<yt.length;At++)Mt=yt[At],Mt in qe.edits&&(qe.edits[Mt]=Ge.edits[Mt]);qe._exportedPlot=Ge._exportedPlot}qe.staticPlot&&(qe.editable=!1,qe.edits={},qe.autosizable=!1,qe.scrollZoom=!1,qe.doubleClick=!1,qe.showTips=!1,qe.showLink=!1,qe.displayModeBar=!1),qe.displayModeBar==="hover"&&!A&&(qe.displayModeBar=!0),(qe.setBackground==="transparent"||typeof qe.setBackground!="function")&&(qe.setBackground=S),qe._hasZeroHeight=qe._hasZeroHeight||Ee.clientHeight===0,qe._hasZeroWidth=qe._hasZeroWidth||Ee.clientWidth===0;var zt=qe.scrollZoom,Ht=qe._scrollZoom={};if(zt===!0)Ht.cartesian=1,Ht.gl3d=1,Ht.geo=1,Ht.mapbox=1;else if(typeof zt=="string"){var Zt=zt.split("+");for(At=0;At<Zt.length;At++)Ht[Zt[At]]=1}else zt!==!1&&(Ht.gl3d=1,Ht.geo=1,Ht.mapbox=1)}function I(Ee){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee);return x.cleanData(Ee.data),x.cleanLayout(Ee.layout),Ee.calcdata=void 0,V._doPlot(Ee).then(function(){return Ee.emit("plotly_redraw"),Ee})}function D(Ee,Ge,Ke,qe){return Ee=T.getGraphDiv(Ee),v.cleanPlot([],{},Ee._fullData||[],Ee._fullLayout||{}),v.purge(Ee),V._doPlot(Ee,Ge,Ke,qe)}function R(Ee,Ge){var Ke=Ge+1,qe=[],At,yt;for(At=0;At<Ee.length;At++)yt=Ee[At],yt<0?qe.push(Ke+yt):qe.push(yt);return qe}function O(Ee,Ge,Ke){var qe,At;for(qe=0;qe<Ge.length;qe++){if(At=Ge[qe],At!==parseInt(At,10))throw new Error("all values in "+Ke+" must be integers");if(At>=Ee.data.length||At<-Ee.data.length)throw new Error(Ke+" must be valid indices for gd.data.");if(Ge.indexOf(At,qe+1)>-1||At>=0&&Ge.indexOf(-Ee.data.length+At)>-1||At<0&&Ge.indexOf(Ee.data.length+At)>-1)throw new Error("each index in "+Ke+" must be unique.")}}function z(Ee,Ge,Ke){if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array.");if(typeof Ge>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ge)||(Ge=[Ge]),O(Ee,Ge,"currentIndices"),typeof Ke<"u"&&!Array.isArray(Ke)&&(Ke=[Ke]),typeof Ke<"u"&&O(Ee,Ke,"newIndices"),typeof Ke<"u"&&Ge.length!==Ke.length)throw new Error("current and new indices must be of equal length.")}function G(Ee,Ge,Ke){var qe,At;if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array.");if(typeof Ge>"u")throw new Error("traces must be defined.");for(Array.isArray(Ge)||(Ge=[Ge]),qe=0;qe<Ge.length;qe++)if(At=Ge[qe],typeof At!="object"||Array.isArray(At)||At===null)throw new Error("all values in traces array must be non-array objects");if(typeof Ke<"u"&&!Array.isArray(Ke)&&(Ke=[Ke]),typeof Ke<"u"&&Ke.length!==Ge.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Y(Ee,Ge,Ke,qe){var At=T.isPlainObject(qe);if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(Ge))throw new Error("update must be a key:value object");if(typeof Ke>"u")throw new Error("indices must be an integer or array of integers");O(Ee,Ke,"indices");for(var yt in Ge){if(!Array.isArray(Ge[yt])||Ge[yt].length!==Ke.length)throw new Error("attribute "+yt+" must be an array of length equal to indices array length");if(At&&(!(yt in qe)||!Array.isArray(qe[yt])||qe[yt].length!==Ge[yt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ee(Ee,Ge,Ke,qe){var At=T.isPlainObject(qe),yt=[],Mt,Gt,zt,Ht,Zt;Array.isArray(Ke)||(Ke=[Ke]),Ke=R(Ke,Ee.data.length-1);for(var Wt in Ge)for(var sr=0;sr<Ke.length;sr++){if(Mt=Ee.data[Ke[sr]],zt=e(Mt,Wt),Gt=zt.get(),Ht=Ge[Wt][sr],!T.isArrayOrTypedArray(Ht))throw new Error("attribute: "+Wt+" index: "+sr+" must be an array");if(!T.isArrayOrTypedArray(Gt))throw new Error("cannot extend missing or non-array attribute: "+Wt);if(Gt.constructor!==Ht.constructor)throw new Error("cannot extend array with an array of a different type: "+Wt);Zt=At?qe[Wt][sr]:qe,u(Zt)||(Zt=-1),yt.push({prop:zt,target:Gt,insert:Ht,maxp:Math.floor(Zt)})}return yt}function j(Ee,Ge,Ke,qe,At){Y(Ee,Ge,Ke,qe);for(var yt=ee(Ee,Ge,Ke,qe),Mt={},Gt={},zt=0;zt<yt.length;zt++){var Ht=yt[zt].prop,Zt=yt[zt].maxp,Wt=At(yt[zt].target,yt[zt].insert,Zt);Ht.set(Wt[0]),Array.isArray(Mt[Ht.astr])||(Mt[Ht.astr]=[]),Mt[Ht.astr].push(Wt[1]),Array.isArray(Gt[Ht.astr])||(Gt[Ht.astr]=[]),Gt[Ht.astr].push(yt[zt].target.length)}return{update:Mt,maxPoints:Gt}}function X(Ee,Ge){var Ke=new Ee.constructor(Ee.length+Ge.length);return Ke.set(Ee),Ke.set(Ge,Ee.length),Ke}function ie(Ee,Ge,Ke,qe){Ee=T.getGraphDiv(Ee);function At(zt,Ht,Zt){var Wt,sr;if(T.isTypedArray(zt))if(Zt<0){var Gr=new zt.constructor(0),cn=X(zt,Ht);Zt<0?(Wt=cn,sr=Gr):(Wt=Gr,sr=cn)}else if(Wt=new zt.constructor(Zt),sr=new zt.constructor(zt.length+Ht.length-Zt),Zt===Ht.length)Wt.set(Ht),sr.set(zt);else if(Zt<Ht.length){var qr=Ht.length-Zt;Wt.set(Ht.subarray(qr)),sr.set(zt),sr.set(Ht.subarray(0,qr),zt.length)}else{var st=Zt-Ht.length,rr=zt.length-st;Wt.set(zt.subarray(rr)),Wt.set(Ht,st),sr.set(zt.subarray(0,rr))}else Wt=zt.concat(Ht),sr=Zt>=0&&Zt<Wt.length?Wt.splice(0,Wt.length-Zt):[];return[Wt,sr]}var yt=j(Ee,Ge,Ke,qe,At),Mt=V.redraw(Ee),Gt=[Ee,yt.update,Ke,yt.maxPoints];return i.add(Ee,V.prependTraces,Gt,ie,arguments),Mt}function he(Ee,Ge,Ke,qe){Ee=T.getGraphDiv(Ee);function At(zt,Ht,Zt){var Wt,sr;if(T.isTypedArray(zt))if(Zt<=0){var Gr=new zt.constructor(0),cn=X(Ht,zt);Zt<0?(Wt=cn,sr=Gr):(Wt=Gr,sr=cn)}else if(Wt=new zt.constructor(Zt),sr=new zt.constructor(zt.length+Ht.length-Zt),Zt===Ht.length)Wt.set(Ht),sr.set(zt);else if(Zt<Ht.length){var qr=Ht.length-Zt;Wt.set(Ht.subarray(0,qr)),sr.set(Ht.subarray(qr)),sr.set(zt,qr)}else{var st=Zt-Ht.length;Wt.set(Ht),Wt.set(zt.subarray(0,st),Ht.length),sr.set(zt.subarray(st))}else Wt=Ht.concat(zt),sr=Zt>=0&&Zt<Wt.length?Wt.splice(Zt,Wt.length):[];return[Wt,sr]}var yt=j(Ee,Ge,Ke,qe,At),Mt=V.redraw(Ee),Gt=[Ee,yt.update,Ke,yt.maxPoints];return i.add(Ee,V.extendTraces,Gt,he,arguments),Mt}function K(Ee,Ge,Ke){Ee=T.getGraphDiv(Ee);var qe=[],At=V.deleteTraces,yt=K,Mt=[Ee,qe],Gt=[Ee,Ge],zt,Ht;for(G(Ee,Ge,Ke),Array.isArray(Ge)||(Ge=[Ge]),Ge=Ge.map(function(Zt){return T.extendFlat({},Zt)}),x.cleanData(Ge),zt=0;zt<Ge.length;zt++)Ee.data.push(Ge[zt]);for(zt=0;zt<Ge.length;zt++)qe.push(-Ge.length+zt);if(typeof Ke>"u")return Ht=V.redraw(Ee),i.add(Ee,At,Mt,yt,Gt),Ht;Array.isArray(Ke)||(Ke=[Ke]);try{z(Ee,qe,Ke)}catch(Zt){throw Ee.data.splice(Ee.data.length-Ge.length,Ge.length),Zt}return i.startSequence(Ee),i.add(Ee,At,Mt,yt,Gt),Ht=V.moveTraces(Ee,qe,Ke),i.stopSequence(Ee),Ht}function $(Ee,Ge){Ee=T.getGraphDiv(Ee);var Ke=[],qe=V.addTraces,At=$,yt=[Ee,Ke,Ge],Mt=[Ee,Ge],Gt,zt;if(typeof Ge>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ge)||(Ge=[Ge]),O(Ee,Ge,"indices"),Ge=R(Ge,Ee.data.length-1),Ge.sort(T.sorterDes),Gt=0;Gt<Ge.length;Gt+=1)zt=Ee.data.splice(Ge[Gt],1)[0],Ke.push(zt);var Ht=V.redraw(Ee);return i.add(Ee,qe,yt,At,Mt),Ht}function U(Ee,Ge,Ke){Ee=T.getGraphDiv(Ee);var qe=[],At=[],yt=U,Mt=U,Gt=[Ee,Ke,Ge],zt=[Ee,Ge,Ke],Ht;if(z(Ee,Ge,Ke),Ge=Array.isArray(Ge)?Ge:[Ge],typeof Ke>"u")for(Ke=[],Ht=0;Ht<Ge.length;Ht++)Ke.push(-Ge.length+Ht);for(Ke=Array.isArray(Ke)?Ke:[Ke],Ge=R(Ge,Ee.data.length-1),Ke=R(Ke,Ee.data.length-1),Ht=0;Ht<Ee.data.length;Ht++)Ge.indexOf(Ht)===-1&&qe.push(Ee.data[Ht]);for(Ht=0;Ht<Ge.length;Ht++)At.push({newIndex:Ke[Ht],trace:Ee.data[Ge[Ht]]});for(At.sort(function(Wt,sr){return Wt.newIndex-sr.newIndex}),Ht=0;Ht<At.length;Ht+=1)qe.splice(At[Ht].newIndex,0,At[Ht].trace);Ee.data=qe;var Zt=V.redraw(Ee);return i.add(Ee,yt,Gt,Mt,zt),Zt}function H(Ee,Ge,Ke,qe){Ee=T.getGraphDiv(Ee),x.clearPromiseQueue(Ee);var At={};if(typeof Ge=="string")At[Ge]=Ke;else if(T.isPlainObject(Ge))At=T.extendFlat({},Ge),qe===void 0&&(qe=Ke);else return T.warn("Restyle fail.",Ge,Ke,qe),Promise.reject();Object.keys(At).length&&(Ee.changed=!0);var yt=x.coerceTraceIndices(Ee,qe),Mt=oe(Ee,At,yt),Gt=Mt.flags;Gt.calc&&(Ee.calcdata=void 0),Gt.clearAxisTypes&&x.clearAxisTypes(Ee,yt,{});var zt=[];Gt.fullReplot?zt.push(V._doPlot):(zt.push(v.previousPromises),v.supplyDefaults(Ee),Gt.markerSize&&(v.doCalcdata(Ee),_e(zt)),Gt.style&&zt.push(c.doTraceStyle),Gt.colorbars&&zt.push(c.doColorBars),zt.push(L)),zt.push(v.rehover,v.redrag,v.reselect),i.add(Ee,H,[Ee,Mt.undoit,Mt.traces],H,[Ee,Mt.redoit,Mt.traces]);var Ht=T.syncOrAsync(zt,Ee);return(!Ht||!Ht.then)&&(Ht=Promise.resolve()),Ht.then(function(){return Ee.emit("plotly_restyle",Mt.eventData),Ee})}function q(Ee){return Ee===void 0?null:Ee}function re(Ee,Ge){return Ge?function(Ke,qe,At){var yt=e(Ke,qe),Mt=yt.set;return yt.set=function(Gt){var zt=(At||"")+qe;Z(zt,yt.get(),Gt,Ee),Mt(Gt)},yt}:e}function Z(Ee,Ge,Ke,qe){if(Array.isArray(Ge)||Array.isArray(Ke))for(var At=Array.isArray(Ge)?Ge:[],yt=Array.isArray(Ke)?Ke:[],Mt=Math.max(At.length,yt.length),Gt=0;Gt<Mt;Gt++)Z(Ee+"["+Gt+"]",At[Gt],yt[Gt],qe);else if(T.isPlainObject(Ge)||T.isPlainObject(Ke)){var zt=T.isPlainObject(Ge)?Ge:{},Ht=T.isPlainObject(Ke)?Ke:{},Zt=T.extendFlat({},zt,Ht);for(var Wt in Zt)Z(Ee+"."+Wt,zt[Wt],Ht[Wt],qe)}else qe[Ee]===void 0&&(qe[Ee]=q(Ge))}function Q(Ee,Ge,Ke){for(var qe in Ke){var At=e(Ee,qe);Z(qe,At.get(),Ke[qe],Ge)}}function oe(Ee,Ge,Ke){var qe=Ee._fullLayout,At=Ee._fullData,yt=Ee.data,Mt=qe._guiEditing,Gt=re(qe._preGUI,Mt),zt=T.extendDeepAll({},Ge),Ht;se(Ge);var Zt=M.traceFlags(),Wt={},sr={},Gr;function cn(){return Ke.map(function(){})}function qr(Kt){var ur=s.id2name(Kt);Gr.indexOf(ur)===-1&&Gr.push(ur)}function st(Kt){return"LAYOUT"+Kt+".autorange"}function rr(Kt){return"LAYOUT"+Kt+".range"}function Jt(Kt){for(var ur=Kt;ur<At.length;ur++)if(At[ur]._input===yt[Kt])return At[ur]}function hr(Kt,ur,Nr){if(Array.isArray(Kt)){Kt.forEach(function(jr){hr(jr,ur,Nr)});return}if(!(Kt in Ge||x.hasParent(Ge,Kt))){var Vr;if(Kt.substr(0,6)==="LAYOUT")Vr=Gt(Ee.layout,Kt.replace("LAYOUT",""));else{var Dr=Ke[Nr],Mr=qe._tracePreGUI[Jt(Dr)._fullInput.uid];Vr=re(Mr,Mt)(yt[Dr],Kt)}Kt in sr||(sr[Kt]=cn()),sr[Kt][Nr]===void 0&&(sr[Kt][Nr]=q(Vr.get())),ur!==void 0&&Vr.set(ur)}}function Sr(Kt){return function(ur){return At[ur][Kt]}}function tt(Kt){return function(ur,Nr){return ur===!1?At[Ke[Nr]][Kt]:null}}for(var Qe in Ge){if(x.hasParent(Ge,Qe))throw new Error("cannot set "+Qe+" and a parent attribute simultaneously");var lt=Ge[Qe],ft,Et,Vt,Pe,Se,ot;if((Qe==="autobinx"||Qe==="autobiny")&&(Qe=Qe.charAt(Qe.length-1)+"bins",Array.isArray(lt)?lt=lt.map(tt(Qe)):lt===!1?lt=Ke.map(Sr(Qe)):lt=null),Wt[Qe]=lt,Qe.substr(0,6)==="LAYOUT"){Vt=Gt(Ee.layout,Qe.replace("LAYOUT","")),sr[Qe]=[q(Vt.get())],Vt.set(Array.isArray(lt)?lt[0]:lt),Zt.calc=!0;continue}for(sr[Qe]=cn(),Ht=0;Ht<Ke.length;Ht++){ft=yt[Ke[Ht]],Et=Jt(Ke[Ht]);var ct=qe._tracePreGUI[Et._fullInput.uid];if(Vt=re(ct,Mt)(ft,Qe),Pe=Vt.get(),Se=Array.isArray(lt)?lt[Ht%lt.length]:lt,Se!==void 0){var pt=Vt.parts[Vt.parts.length-1],St=Qe.substr(0,Qe.length-pt.length-1),xt=St?St+".":"",Pt=St?e(Et,St).get():Et;if(ot=r.getTraceValObject(Et,Vt.parts),ot&&ot.impliedEdits&&Se!==null)for(var Xt in ot.impliedEdits)hr(T.relativeAttr(Qe,Xt),ot.impliedEdits[Xt],Ht);else if((pt==="thicknessmode"||pt==="lenmode")&&Pe!==Se&&(Se==="fraction"||Se==="pixels")&&Pt){var or=qe._size,Pr=Pt.orient,Ar=Pr==="top"||Pr==="bottom";if(pt==="thicknessmode"){var Er=Ar?or.h:or.w;hr(xt+"thickness",Pt.thickness*(Se==="fraction"?1/Er:Er),Ht)}else{var $r=Ar?or.w:or.h;hr(xt+"len",Pt.len*(Se==="fraction"?1/$r:$r),Ht)}}else if(Qe==="type"&&(Se==="pie"!=(Pe==="pie")||Se==="funnelarea"!=(Pe==="funnelarea"))){var lr="x",br="y";(Se==="bar"||Pe==="bar")&&ft.orientation==="h"&&(lr="y",br="x"),T.swapAttrs(ft,["?","?src"],"labels",lr),T.swapAttrs(ft,["d?","?0"],"label",lr),T.swapAttrs(ft,["?","?src"],"values",br),Pe==="pie"||Pe==="funnelarea"?(e(ft,"marker.color").set(e(ft,"marker.colors").get()),qe._pielayer.selectAll("g.trace").remove()):n.traceIs(ft,"cartesian")&&e(ft,"marker.colors").set(e(ft,"marker.color").get())}sr[Qe][Ht]=q(Pe);var Fr=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Fr.indexOf(Qe)!==-1){if(Qe==="orientation"){Vt.set(Se);var Hr=ft.x&&!ft.y?"h":"v";if((Vt.get()||Hr)===Et.orientation)continue}else Qe==="orientationaxes"&&(ft.orientation={v:"h",h:"v"}[Et.orientation]);x.swapXYData(ft),Zt.calc=Zt.clearAxisTypes=!0}else v.dataArrayContainers.indexOf(Vt.parts[0])!==-1?(x.manageArrayContainers(Vt,Se,sr),Zt.calc=!0):(ot?ot.arrayOk&&!n.traceIs(Et,"regl")&&(T.isArrayOrTypedArray(Se)||T.isArrayOrTypedArray(Pe))?Zt.calc=!0:M.update(Zt,ot):Zt.calc=!0,Vt.set(Se))}}if(["swapxyaxes","orientationaxes"].indexOf(Qe)!==-1&&s.swap(Ee,Ke),Qe==="orientationaxes"){var Lr=e(Ee.layout,"hovermode"),at=Lr.get();at==="x"?Lr.set("y"):at==="y"?Lr.set("x"):at==="x unified"?Lr.set("y unified"):at==="y unified"&&Lr.set("x unified")}if(["orientation","type"].indexOf(Qe)!==-1){for(Gr=[],Ht=0;Ht<Ke.length;Ht++){var Rt=yt[Ke[Ht]];n.traceIs(Rt,"cartesian")&&(qr(Rt.xaxis||"x"),qr(Rt.yaxis||"y"))}hr(Gr.map(st),!0,0),hr(Gr.map(rr),[0,1],0)}}return(Zt.calc||Zt.plot)&&(Zt.fullReplot=!0),{flags:Zt,undoit:sr,redoit:Wt,traces:Ke,eventData:T.extendDeepNoArrays([],[zt,Ke])}}function se(Ee){var Ge=T.counterRegex("axis",".title",!1,!1),Ke=/colorbar\.title$/,qe=Object.keys(Ee),At,yt,Mt;for(At=0;At<qe.length;At++)yt=qe[At],Mt=Ee[yt],(yt==="title"||Ge.test(yt)||Ke.test(yt))&&(typeof Mt=="string"||typeof Mt=="number")?Gt(yt,yt.replace("title","title.text")):yt.indexOf("titlefont")>-1&&yt.indexOf("grouptitlefont")===-1?Gt(yt,yt.replace("titlefont","title.font")):yt.indexOf("titleposition")>-1?Gt(yt,yt.replace("titleposition","title.position")):yt.indexOf("titleside")>-1?Gt(yt,yt.replace("titleside","title.side")):yt.indexOf("titleoffset")>-1&&Gt(yt,yt.replace("titleoffset","title.offset"));function Gt(zt,Ht){Ee[Ht]=Ee[zt],delete Ee[zt]}}function ae(Ee,Ge,Ke){Ee=T.getGraphDiv(Ee),x.clearPromiseQueue(Ee);var qe={};if(typeof Ge=="string")qe[Ge]=Ke;else if(T.isPlainObject(Ge))qe=T.extendFlat({},Ge);else return T.warn("Relayout fail.",Ge,Ke),Promise.reject();Object.keys(qe).length&&(Ee.changed=!0);var At=ye(Ee,qe),yt=At.flags;yt.calc&&(Ee.calcdata=void 0);var Mt=[v.previousPromises];yt.layoutReplot?Mt.push(c.layoutReplot):Object.keys(qe).length&&(le(Ee,yt,At)||v.supplyDefaults(Ee),yt.legend&&Mt.push(c.doLegend),yt.layoutstyle&&Mt.push(c.layoutStyles),yt.axrange&&_e(Mt,At.rangesAltered),yt.ticks&&Mt.push(c.doTicksRelayout),yt.modebar&&Mt.push(c.doModeBar),yt.camera&&Mt.push(c.doCamera),yt.colorbars&&Mt.push(c.doColorBars),Mt.push(L)),Mt.push(v.rehover,v.redrag,v.reselect),i.add(Ee,ae,[Ee,At.undoit],ae,[Ee,At.redoit]);var Gt=T.syncOrAsync(Mt,Ee);return(!Gt||!Gt.then)&&(Gt=Promise.resolve(Ee)),Gt.then(function(){return Ee.emit("plotly_relayout",At.eventData),Ee})}function le(Ee,Ge,Ke){var qe=Ee._fullLayout;if(!Ge.axrange)return!1;for(var At in Ge)if(At!=="axrange"&&Ge[At])return!1;for(var yt in Ke.rangesAltered){var Mt=s.id2name(yt),Gt=Ee.layout[Mt],zt=qe[Mt];if(zt.autorange=Gt.autorange,Gt.range&&(zt.range=Gt.range.slice()),zt.cleanRange(),zt._matchGroup){for(var Ht in zt._matchGroup)if(Ht!==yt){var Zt=qe[s.id2name(Ht)];Zt.autorange=zt.autorange,Zt.range=zt.range.slice(),Zt._input.range=zt.range.slice()}}}return!0}function _e(Ee,Ge){var Ke=Ge?function(qe){var At=[],yt=!0;for(var Mt in Ge){var Gt=s.getFromId(qe,Mt);if(At.push(Mt),(Gt.ticklabelposition||"").indexOf("inside")!==-1&&Gt._anchorAxis&&At.push(Gt._anchorAxis._id),Gt._matchGroup)for(var zt in Gt._matchGroup)Ge[zt]||At.push(zt)}return s.draw(qe,At,{skipTitle:yt})}:function(qe){return s.draw(qe,"redraw")};Ee.push(f,c.doAutoRangeAndConstraints,Ke,c.drawData,c.finalDraw)}var fe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,me=/^[xyz]axis[0-9]*\.autorange$/,xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ye(Ee,Ge){var Ke=Ee.layout,qe=Ee._fullLayout,At=qe._guiEditing,yt=re(qe._preGUI,At),Mt=Object.keys(Ge),Gt=s.list(Ee),zt=T.extendDeepAll({},Ge),Ht={},Zt,Wt,sr;for(se(Ge),Mt=Object.keys(Ge),Wt=0;Wt<Mt.length;Wt++)if(Mt[Wt].indexOf("allaxes")===0){for(sr=0;sr<Gt.length;sr++){var Gr=Gt[sr]._id.substr(1),cn=Gr.indexOf("scene")!==-1?Gr+".":"",qr=Mt[Wt].replace("allaxes",cn+Gt[sr]._name);Ge[qr]||(Ge[qr]=Ge[Mt[Wt]])}delete Ge[Mt[Wt]]}var st=M.layoutFlags(),rr={},Jt={};function hr(Dr,Mr){if(Array.isArray(Dr)){Dr.forEach(function(kn){hr(kn,Mr)});return}if(!(Dr in Ge||x.hasParent(Ge,Dr))){var jr=yt(Ke,Dr);Dr in Jt||(Jt[Dr]=q(jr.get())),Mr!==void 0&&jr.set(Mr)}}var Sr={},tt;function Qe(Dr){var Mr=s.name2id(Dr.split(".")[0]);return Sr[Mr]=1,Mr}for(var lt in Ge){if(x.hasParent(Ge,lt))throw new Error("cannot set "+lt+" and a parent attribute simultaneously");for(var ft=yt(Ke,lt),Et=Ge[lt],Vt=ft.parts.length,Pe=Vt-1;Pe>0&&typeof ft.parts[Pe]!="string";)Pe--;var Se=ft.parts[Pe],ot=ft.parts[Pe-1]+"."+Se,ct=ft.parts.slice(0,Pe).join("."),pt=e(Ee.layout,ct).get(),St=e(qe,ct).get(),xt=ft.get();if(Et!==void 0){rr[lt]=Et,Jt[lt]=Se==="reverse"?Et:q(xt);var Pt=r.getLayoutValObject(qe,ft.parts);if(Pt&&Pt.impliedEdits&&Et!==null)for(var Xt in Pt.impliedEdits)hr(T.relativeAttr(lt,Xt),Pt.impliedEdits[Xt]);if(["width","height"].indexOf(lt)!==-1)if(Et){hr("autosize",null);var or=lt==="height"?"width":"height";hr(or,qe[or])}else qe[lt]=Ee._initialAutoSize[lt];else if(lt==="autosize")hr("width",Et?null:qe.width),hr("height",Et?null:qe.height);else if(ot.match(fe))Qe(ot),e(qe,ct+"._inputRange").set(null);else if(ot.match(me)){Qe(ot),e(qe,ct+"._inputRange").set(null);var Pr=e(qe,ct).get();Pr._inputDomain&&(Pr._input.domain=Pr._inputDomain.slice())}else ot.match(xe)&&e(qe,ct+"._inputDomain").set(null);if(Se==="type"){tt=pt;var Ar=St.type==="linear"&&Et==="log",Er=St.type==="log"&&Et==="linear";if(Ar||Er){if(!tt||!tt.range)hr(ct+".autorange",!0);else if(St.autorange)Ar&&(tt.range=tt.range[1]>tt.range[0]?[1,2]:[2,1]);else{var $r=tt.range[0],lr=tt.range[1];Ar?($r<=0&&lr<=0&&hr(ct+".autorange",!0),$r<=0?$r=lr/1e6:lr<=0&&(lr=$r/1e6),hr(ct+".range[0]",Math.log($r)/Math.LN10),hr(ct+".range[1]",Math.log(lr)/Math.LN10)):(hr(ct+".range[0]",Math.pow(10,$r)),hr(ct+".range[1]",Math.pow(10,lr)))}Array.isArray(qe._subplots.polar)&&qe._subplots.polar.length&&qe[ft.parts[0]]&&ft.parts[1]==="radialaxis"&&delete qe[ft.parts[0]]._subplot.viewInitial["radialaxis.range"],n.getComponentMethod("annotations","convertCoords")(Ee,St,Et,hr),n.getComponentMethod("images","convertCoords")(Ee,St,Et,hr)}else hr(ct+".autorange",!0),hr(ct+".range",null);e(qe,ct+"._inputRange").set(null)}else if(Se.match(w)){var br=e(qe,lt).get(),Fr=(Et||{}).type;(!Fr||Fr==="-")&&(Fr="linear"),n.getComponentMethod("annotations","convertCoords")(Ee,br,Fr,hr),n.getComponentMethod("images","convertCoords")(Ee,br,Fr,hr)}var Hr=l.containerArrayMatch(lt);if(Hr){Zt=Hr.array,Wt=Hr.index;var Lr=Hr.property,at=Pt||{editType:"calc"};Wt!==""&&Lr===""&&(l.isAddVal(Et)?Jt[lt]=null:l.isRemoveVal(Et)?Jt[lt]=(e(Ke,Zt).get()||[])[Wt]:T.warn("unrecognized full object value",Ge)),M.update(st,at),Ht[Zt]||(Ht[Zt]={});var Rt=Ht[Zt][Wt];Rt||(Rt=Ht[Zt][Wt]={}),Rt[Lr]=Et,delete Ge[lt]}else Se==="reverse"?(pt.range?pt.range.reverse():(hr(ct+".autorange",!0),pt.range=[1,0]),St.autorange?st.calc=!0:st.plot=!0):(lt==="dragmode"&&(Et===!1&&xt!==!1||Et!==!1&&xt===!1)||qe._has("scatter-like")&&qe._has("regl")&&lt==="dragmode"&&(Et==="lasso"||Et==="select")&&!(xt==="lasso"||xt==="select")||qe._has("gl2d")?st.plot=!0:Pt?M.update(st,Pt):st.calc=!0,ft.set(Et))}}for(Zt in Ht){var Kt=l.applyContainerArrayChanges(Ee,yt(Ke,Zt),Ht[Zt],st,yt);Kt||(st.plot=!0)}for(var ur in Sr){tt=s.getFromId(Ee,ur);var Nr=tt&&tt._constraintGroup;if(Nr){st.calc=!0;for(var Vr in Nr)Sr[Vr]||(s.getFromId(Ee,Vr)._constraintShrinkable=!0)}}return(be(Ee)||Ge.height||Ge.width)&&(st.plot=!0),(st.plot||st.calc)&&(st.layoutReplot=!0),{flags:st,rangesAltered:Sr,undoit:Jt,redoit:rr,eventData:zt}}function be(Ee){var Ge=Ee._fullLayout,Ke=Ge.width,qe=Ge.height;return Ee.layout.autosize&&v.plotAutoSize(Ee,Ee.layout,Ge),Ge.width!==Ke||Ge.height!==qe}function ke(Ee,Ge,Ke,qe){Ee=T.getGraphDiv(Ee),x.clearPromiseQueue(Ee),T.isPlainObject(Ge)||(Ge={}),T.isPlainObject(Ke)||(Ke={}),Object.keys(Ge).length&&(Ee.changed=!0),Object.keys(Ke).length&&(Ee.changed=!0);var At=x.coerceTraceIndices(Ee,qe),yt=oe(Ee,T.extendFlat({},Ge),At),Mt=yt.flags,Gt=ye(Ee,T.extendFlat({},Ke)),zt=Gt.flags;(Mt.calc||zt.calc)&&(Ee.calcdata=void 0),Mt.clearAxisTypes&&x.clearAxisTypes(Ee,At,Ke);var Ht=[];zt.layoutReplot?Ht.push(c.layoutReplot):Mt.fullReplot?Ht.push(V._doPlot):(Ht.push(v.previousPromises),le(Ee,zt,Gt)||v.supplyDefaults(Ee),Mt.style&&Ht.push(c.doTraceStyle),(Mt.colorbars||zt.colorbars)&&Ht.push(c.doColorBars),zt.legend&&Ht.push(c.doLegend),zt.layoutstyle&&Ht.push(c.layoutStyles),zt.axrange&&_e(Ht,Gt.rangesAltered),zt.ticks&&Ht.push(c.doTicksRelayout),zt.modebar&&Ht.push(c.doModeBar),zt.camera&&Ht.push(c.doCamera),Ht.push(L)),Ht.push(v.rehover,v.redrag,v.reselect),i.add(Ee,ke,[Ee,yt.undoit,Gt.undoit,yt.traces],ke,[Ee,yt.redoit,Gt.redoit,yt.traces]);var Zt=T.syncOrAsync(Ht,Ee);return(!Zt||!Zt.then)&&(Zt=Promise.resolve(Ee)),Zt.then(function(){return Ee.emit("plotly_update",{data:yt.eventData,layout:Gt.eventData}),Ee})}function De(Ee){return function(Ke){Ke._fullLayout._guiEditing=!0;var qe=Ee.apply(null,arguments);return Ke._fullLayout._guiEditing=!1,qe}}var He=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ae=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Le(Ee,Ge){for(var Ke=0;Ke<Ge.length;Ke++){var qe=Ge[Ke],At=Ee.match(qe.pattern);if(At){var yt=At[1]||"";return{head:yt,tail:Ee.substr(yt.length+1),attr:qe.attr}}}}function Ze(Ee,Ge){var Ke=e(Ge,Ee).get();if(Ke!==void 0)return Ke;var qe=Ee.split(".");for(qe.pop();qe.length>1;)if(qe.pop(),Ke=e(Ge,qe.join(".")+".uirevision").get(),Ke!==void 0)return Ke;return Ge.uirevision}function We(Ee,Ge){for(var Ke=0;Ke<Ge.length;Ke++)if(Ge[Ke]._fullInput.uid===Ee)return Ke;return-1}function ze(Ee,Ge,Ke){for(var qe=0;qe<Ge.length;qe++)if(Ge[qe].uid===Ee)return qe;return!Ge[Ke]||Ge[Ke].uid?-1:Ke}function Ie(Ee,Ge){var Ke=T.isPlainObject(Ee),qe=Array.isArray(Ee);return Ke||qe?(Ke&&T.isPlainObject(Ge)||qe&&Array.isArray(Ge))&&JSON.stringify(Ee)===JSON.stringify(Ge):Ee===Ge}function Ve(Ee,Ge,Ke,qe){var At=qe._preGUI,yt,Mt,Gt,zt,Ht,Zt,Wt,sr,Gr,cn,qr=[],st={},rr={};for(yt in At){if(Ht=Le(yt,He),Ht){if(Gr=Ht.head,cn=Ht.tail,Mt=Ht.attr||Gr+".uirevision",Gt=e(qe,Mt).get(),zt=Gt&&Ze(Mt,Ge),zt&&zt===Gt){if(Zt=At[yt],Zt===null&&(Zt=void 0),Wt=e(Ge,yt),sr=Wt.get(),Ie(sr,Zt)){sr===void 0&&cn==="autorange"&&qr.push(Gr),Wt.set(q(e(qe,yt).get()));continue}else if(cn==="autorange"||cn.substr(0,6)==="range["){var Jt=At[Gr+".range[0]"],hr=At[Gr+".range[1]"],Sr=At[Gr+".autorange"];if(Sr||Sr===null&&Jt===null&&hr===null){if(!(Gr in st)){var tt=e(Ge,Gr).get();st[Gr]=tt&&(tt.autorange||tt.autorange!==!1&&(!tt.range||tt.range.length!==2))}if(st[Gr]){Wt.set(q(e(qe,yt).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+yt);delete At[yt],Ht&&Ht.tail.substr(0,6)==="range["&&(rr[Ht.head]=1)}for(var Qe=0;Qe<qr.length;Qe++){var lt=qr[Qe];if(rr[lt]){var ft=e(Ge,lt).get();ft&&delete ft.autorange}}var Et=qe._tracePreGUI;for(var Vt in Et){var Pe=Et[Vt],Se=null,ot;for(yt in Pe){if(!Se){var ct=We(Vt,Ke);if(ct<0){delete Et[Vt];break}var pt=Ke[ct];ot=pt._fullInput;var St=ze(Vt,Ee,ot.index);if(St<0){delete Et[Vt];break}Se=Ee[St]}if(Ht=Le(yt,Ae),Ht){if(Ht.attr?(Gt=e(qe,Ht.attr).get(),zt=Gt&&Ze(Ht.attr,Ge)):(Gt=ot.uirevision,zt=Se.uirevision,zt===void 0&&(zt=Ge.uirevision)),zt&&zt===Gt&&(Zt=Pe[yt],Zt===null&&(Zt=void 0),Wt=e(Se,yt),sr=Wt.get(),Ie(sr,Zt))){Wt.set(q(e(ot,yt).get()));continue}}else T.warn("unrecognized GUI edit: "+yt+" in trace uid "+Vt);delete Pe[yt]}}}function dt(Ee,Ge,Ke,qe){var At,yt;function Mt(){return V.addFrames(Ee,At)}Ee=T.getGraphDiv(Ee),x.clearPromiseQueue(Ee);var Gt=Ee._fullData,zt=Ee._fullLayout;if(!T.isPlotDiv(Ee)||!Gt||!zt)yt=V.newPlot(Ee,Ge,Ke,qe);else{if(T.isPlainObject(Ge)){var Ht=Ge;Ge=Ht.data,Ke=Ht.layout,qe=Ht.config,At=Ht.frames}var Zt=!1;if(qe){var Wt=T.extendDeep({},Ee._context);Ee._context=void 0,F(Ee,qe),Zt=Ct(Wt,Ee._context)}Ee.data=Ge||[],x.cleanData(Ee.data),Ee.layout=Ke||{},x.cleanLayout(Ee.layout),Ve(Ee.data,Ee.layout,Gt,zt),v.supplyDefaults(Ee,{skipUpdateCalc:!0});var sr=Ee._fullData,Gr=Ee._fullLayout,cn=Gr.datarevision===void 0,qr=Gr.transition,st=Qt(Ee,zt,Gr,cn,qr),rr=st.newDataRevision,Jt=Ft(Ee,Gt,sr,cn,qr,rr);if(be(Ee)&&(st.layoutReplot=!0),Jt.calc||st.calc){Ee.calcdata=void 0;for(var hr=Object.getOwnPropertyNames(Gr),Sr=0;Sr<hr.length;Sr++){var tt=hr[Sr],Qe=tt.substring(0,5);if(Qe==="xaxis"||Qe==="yaxis"){var lt=Gr[tt]._emptyCategories;lt&&lt()}}}else v.supplyDefaultsUpdateCalc(Ee.calcdata,sr);var ft=[];if(At&&(Ee._transitionData={},v.createTransitionData(Ee),ft.push(Mt)),Gr.transition&&!Zt&&(Jt.anim||st.anim))st.ticks&&ft.push(c.doTicksRelayout),v.doCalcdata(Ee),c.doAutoRangeAndConstraints(Ee),ft.push(function(){return v.transitionFromReact(Ee,Jt,st,zt)});else if(Jt.fullReplot||st.layoutReplot||Zt)Ee._fullLayout._skipDefaults=!0,ft.push(V._doPlot);else{for(var Et in st.arrays){var Vt=st.arrays[Et];if(Vt.length){var Pe=n.getComponentMethod(Et,"drawOne");if(Pe!==T.noop)for(var Se=0;Se<Vt.length;Se++)Pe(Ee,Vt[Se]);else{var ot=n.getComponentMethod(Et,"draw");if(ot===T.noop)throw new Error("cannot draw components: "+Et);ot(Ee)}}}ft.push(v.previousPromises),Jt.style&&ft.push(c.doTraceStyle),(Jt.colorbars||st.colorbars)&&ft.push(c.doColorBars),st.legend&&ft.push(c.doLegend),st.layoutstyle&&ft.push(c.layoutStyles),st.axrange&&_e(ft),st.ticks&&ft.push(c.doTicksRelayout),st.modebar&&ft.push(c.doModeBar),st.camera&&ft.push(c.doCamera),ft.push(L)}ft.push(v.rehover,v.redrag,v.reselect),yt=T.syncOrAsync(ft,Ee),(!yt||!yt.then)&&(yt=Promise.resolve(Ee))}return yt.then(function(){return Ee.emit("plotly_react",{data:Ge,layout:Ke}),Ee})}function Ft(Ee,Ge,Ke,qe,At,yt){var Mt=Ge.length===Ke.length;if(!At&&!Mt)return{fullReplot:!0,calc:!0};var Gt=M.traceFlags();Gt.arrays={},Gt.nChanges=0,Gt.nChangesAnim=0;var zt,Ht;function Zt(Gr){var cn=r.getTraceValObject(Ht,Gr);return!Ht._module.animatable&&cn.anim&&(cn.anim=!1),cn}var Wt={getValObject:Zt,flags:Gt,immutable:qe,transition:At,newDataRevision:yt,gd:Ee},sr={};for(zt=0;zt<Ge.length;zt++)if(Ke[zt]){if(Ht=Ke[zt]._fullInput,v.hasMakesDataTransform(Ht)&&(Ht=Ke[zt]),sr[Ht.uid])continue;sr[Ht.uid]=1,Ot(Ge[zt]._fullInput,Ht,[],Wt)}return(Gt.calc||Gt.plot)&&(Gt.fullReplot=!0),At&&Gt.nChanges&&Gt.nChangesAnim&&(Gt.anim=Gt.nChanges===Gt.nChangesAnim&&Mt?"all":"some"),Gt}function Qt(Ee,Ge,Ke,qe,At){var yt=M.layoutFlags();yt.arrays={},yt.rangesAltered={},yt.nChanges=0,yt.nChangesAnim=0;function Mt(zt){return r.getLayoutValObject(Ke,zt)}var Gt={getValObject:Mt,flags:yt,immutable:qe,transition:At,gd:Ee};return Ot(Ge,Ke,[],Gt),(yt.plot||yt.calc)&&(yt.layoutReplot=!0),At&&yt.nChanges&&yt.nChangesAnim&&(yt.anim=yt.nChanges===yt.nChangesAnim?"all":"some"),yt}function Ot(Ee,Ge,Ke,qe){var At,yt,Mt,Gt=qe.getValObject,zt=qe.flags,Ht=qe.immutable,Zt=qe.inArray,Wt=qe.arrayIndex;function sr(){var ct=At.editType;if(Zt&&ct.indexOf("arraydraw")!==-1){T.pushUnique(zt.arrays[Zt],Wt);return}M.update(zt,At),ct!=="none"&&zt.nChanges++,qe.transition&&At.anim&&zt.nChangesAnim++,(fe.test(Mt)||me.test(Mt))&&(zt.rangesAltered[Ke[0]]=1),xe.test(Mt)&&e(Ge,"_inputDomain").set(null),yt==="datarevision"&&(zt.newDataRevision=1)}function Gr(ct){return ct.valType==="data_array"||ct.arrayOk}for(yt in Ee){if(zt.calc&&!qe.transition)return;var cn=Ee[yt],qr=Ge[yt],st=Ke.concat(yt);if(Mt=st.join("."),!(yt.charAt(0)==="_"||typeof cn=="function"||cn===qr)){if((yt==="tick0"||yt==="dtick")&&Ke[0]!=="geo"){var rr=Ge.tickmode;if(rr==="auto"||rr==="array"||!rr)continue}if(!(yt==="range"&&Ge.autorange)&&!((yt==="zmin"||yt==="zmax")&&Ge.type==="contourcarpet")&&(At=Gt(st),!!At&&!(At._compareAsJSON&&JSON.stringify(cn)===JSON.stringify(qr)))){var Jt=At.valType,hr,Sr=Gr(At),tt=Array.isArray(cn),Qe=Array.isArray(qr);if(tt&&Qe){var lt="_input_"+yt,ft=Ee[lt],Et=Ge[lt];if(Array.isArray(ft)&&ft===Et)continue}if(qr===void 0)Sr&&tt?zt.calc=!0:sr();else if(At._isLinkedToArray){var Vt=[],Pe=!1;Zt||(zt.arrays[yt]=Vt);var Se=Math.min(cn.length,qr.length),ot=Math.max(cn.length,qr.length);if(Se!==ot)if(At.editType==="arraydraw")Pe=!0;else{sr();continue}for(hr=0;hr<Se;hr++)Ot(cn[hr],qr[hr],st.concat(hr),T.extendFlat({inArray:yt,arrayIndex:hr},qe));if(Pe)for(hr=Se;hr<ot;hr++)Vt.push(hr)}else!Jt&&T.isPlainObject(cn)?Ot(cn,qr,st,qe):Sr?tt&&Qe?(Ht&&(zt.calc=!0),(Ht||qe.newDataRevision)&&sr()):tt!==Qe?zt.calc=!0:sr():tt&&Qe?(cn.length!==qr.length||String(cn)!==String(qr))&&sr():sr()}}}for(yt in Ge)if(!(yt in Ee||yt.charAt(0)==="_"||typeof Ge[yt]=="function"))if(At=Gt(Ke.concat(yt)),Gr(At)&&Array.isArray(Ge[yt])){zt.calc=!0;return}else sr()}function Ct(Ee,Ge){var Ke;for(Ke in Ee)if(Ke.charAt(0)!=="_"){var qe=Ee[Ke],At=Ge[Ke];if(qe!==At)if(T.isPlainObject(qe)&&T.isPlainObject(At)){if(Ct(qe,At))return!0}else if(Array.isArray(qe)&&Array.isArray(At)){if(qe.length!==At.length)return!0;for(var yt=0;yt<qe.length;yt++)if(qe[yt]!==At[yt])if(T.isPlainObject(qe[yt])&&T.isPlainObject(At[yt])){if(Ct(qe[yt],At[yt]))return!0}else return!0}else return!0}}function jt(Ee,Ge,Ke){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var qe=Ee._transitionData;qe._frameQueue||(qe._frameQueue=[]),Ke=v.supplyAnimationDefaults(Ke);var At=Ke.transition,yt=Ke.frame;qe._frameWaitingCnt===void 0&&(qe._frameWaitingCnt=0);function Mt(Ht){return Array.isArray(At)?Ht>=At.length?At[0]:At[Ht]:At}function Gt(Ht){return Array.isArray(yt)?Ht>=yt.length?yt[0]:yt[Ht]:yt}function zt(Ht,Zt){var Wt=0;return function(){if(Ht&&++Wt===Zt)return Ht()}}return new Promise(function(Ht,Zt){function Wt(){if(qe._frameQueue.length!==0){for(;qe._frameQueue.length;){var Se=qe._frameQueue.pop();Se.onInterrupt&&Se.onInterrupt()}Ee.emit("plotly_animationinterrupted",[])}}function sr(Se){if(Se.length!==0){for(var ot=0;ot<Se.length;ot++){var ct;Se[ot].type==="byname"?ct=v.computeFrame(Ee,Se[ot].name):ct=Se[ot].data;var pt=Gt(ot),St=Mt(ot);St.duration=Math.min(St.duration,pt.duration);var xt={frame:ct,name:Se[ot].name,frameOpts:pt,transitionOpts:St};ot===Se.length-1&&(xt.onComplete=zt(Ht,2),xt.onInterrupt=Zt),qe._frameQueue.push(xt)}Ke.mode==="immediate"&&(qe._lastFrameAt=-1/0),qe._animationRaf||qr()}}function Gr(){Ee.emit("plotly_animated"),window.cancelAnimationFrame(qe._animationRaf),qe._animationRaf=null}function cn(){qe._currentFrame&&qe._currentFrame.onComplete&&qe._currentFrame.onComplete();var Se=qe._currentFrame=qe._frameQueue.shift();if(Se){var ot=Se.name?Se.name.toString():null;Ee._fullLayout._currentFrame=ot,qe._lastFrameAt=Date.now(),qe._timeToNext=Se.frameOpts.duration,v.transition(Ee,Se.frame.data,Se.frame.layout,x.coerceTraceIndices(Ee,Se.frame.traces),Se.frameOpts,Se.transitionOpts).then(function(){Se.onComplete&&Se.onComplete()}),Ee.emit("plotly_animatingframe",{name:ot,frame:Se.frame,animation:{frame:Se.frameOpts,transition:Se.transitionOpts}})}else Gr()}function qr(){Ee.emit("plotly_animating"),qe._lastFrameAt=-1/0,qe._timeToNext=0,qe._runningTransitions=0,qe._currentFrame=null;var Se=function(){qe._animationRaf=window.requestAnimationFrame(Se),Date.now()-qe._lastFrameAt>qe._timeToNext&&cn()};Se()}var st=0;function rr(Se){return Array.isArray(At)?st>=At.length?Se.transitionOpts=At[st]:Se.transitionOpts=At[0]:Se.transitionOpts=At,st++,Se}var Jt,hr,Sr=[],tt=Ge==null,Qe=Array.isArray(Ge),lt=!tt&&!Qe&&T.isPlainObject(Ge);if(lt)Sr.push({type:"object",data:rr(T.extendFlat({},Ge))});else if(tt||["string","number"].indexOf(typeof Ge)!==-1)for(Jt=0;Jt<qe._frames.length;Jt++)hr=qe._frames[Jt],!!hr&&(tt||String(hr.group)===String(Ge))&&Sr.push({type:"byname",name:String(hr.name),data:rr({name:hr.name})});else if(Qe)for(Jt=0;Jt<Ge.length;Jt++){var ft=Ge[Jt];["number","string"].indexOf(typeof ft)!==-1?(ft=String(ft),Sr.push({type:"byname",name:ft,data:rr({name:ft})})):T.isPlainObject(ft)&&Sr.push({type:"object",data:rr(T.extendFlat({},ft))})}for(Jt=0;Jt<Sr.length;Jt++)if(hr=Sr[Jt],hr.type==="byname"&&!qe._frameHash[hr.data.name]){T.warn('animate failure: frame not found: "'+hr.data.name+'"'),Zt();return}["next","immediate"].indexOf(Ke.mode)!==-1&&Wt(),Ke.direction==="reverse"&&Sr.reverse();var Et=Ee._fullLayout._currentFrame;if(Et&&Ke.fromcurrent){var Vt=-1;for(Jt=0;Jt<Sr.length;Jt++)if(hr=Sr[Jt],hr.type==="byname"&&hr.name===Et){Vt=Jt;break}if(Vt>0&&Vt<Sr.length-1){var Pe=[];for(Jt=0;Jt<Sr.length;Jt++)hr=Sr[Jt],(Sr[Jt].type!=="byname"||Jt>Vt)&&Pe.push(hr);Sr=Pe}}Sr.length>0?sr(Sr):(Ee.emit("plotly_animated"),Ht())})}function Nt(Ee,Ge,Ke){if(Ee=T.getGraphDiv(Ee),Ge==null)return Promise.resolve();if(!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var qe,At,yt,Mt,Gt=Ee._transitionData._frames,zt=Ee._transitionData._frameHash;if(!Array.isArray(Ge))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ge);var Ht=Gt.length+Ge.length*2,Zt=[],Wt={};for(qe=Ge.length-1;qe>=0;qe--)if(!!T.isPlainObject(Ge[qe])){var sr=Ge[qe].name,Gr=(zt[sr]||Wt[sr]||{}).name,cn=Ge[qe].name,qr=zt[Gr]||Wt[Gr];Gr&&cn&&typeof cn=="number"&&qr&&p<_&&(p++,T.warn('addFrames: overwriting frame "'+(zt[Gr]||Wt[Gr]).name+'" with a frame whose name of type "number" also equates to "'+Gr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),p===_&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Wt[sr]={name:sr},Zt.push({frame:v.supplyFrameDefaults(Ge[qe]),index:Ke&&Ke[qe]!==void 0&&Ke[qe]!==null?Ke[qe]:Ht+qe})}Zt.sort(function(lt,ft){return lt.index>ft.index?-1:lt.index<ft.index?1:0});var st=[],rr=[],Jt=Gt.length;for(qe=Zt.length-1;qe>=0;qe--){if(At=Zt[qe].frame,typeof At.name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!At.name)for(;zt[At.name="frame "+Ee._transitionData._counter++];);if(zt[At.name]){for(yt=0;yt<Gt.length&&(Gt[yt]||{}).name!==At.name;yt++);st.push({type:"replace",index:yt,value:At}),rr.unshift({type:"replace",index:yt,value:Gt[yt]})}else Mt=Math.max(0,Math.min(Zt[qe].index,Jt)),st.push({type:"insert",index:Mt,value:At}),rr.unshift({type:"delete",index:Mt}),Jt++}var hr=v.modifyFrames,Sr=v.modifyFrames,tt=[Ee,rr],Qe=[Ee,st];return i&&i.add(Ee,hr,tt,Sr,Qe),v.modifyFrames(Ee,st)}function Lt(Ee,Ge){if(Ee=T.getGraphDiv(Ee),!T.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee);var Ke,qe,At=Ee._transitionData._frames,yt=[],Mt=[];if(!Ge)for(Ge=[],Ke=0;Ke<At.length;Ke++)Ge.push(Ke);for(Ge=Ge.slice(),Ge.sort(),Ke=Ge.length-1;Ke>=0;Ke--)qe=Ge[Ke],yt.push({type:"delete",index:qe}),Mt.unshift({type:"insert",index:qe,value:At[qe]});var Gt=v.modifyFrames,zt=v.modifyFrames,Ht=[Ee,Mt],Zt=[Ee,yt];return i&&i.add(Ee,Gt,Ht,zt,Zt),v.modifyFrames(Ee,yt)}function Xe(Ee){Ee=T.getGraphDiv(Ee);var Ge=Ee._fullLayout||{},Ke=Ee._fullData||[];return v.cleanPlot([],{},Ke,Ge),v.purge(Ee),a.purge(Ee),Ge._container&&Ge._container.remove(),delete Ee._context,Ee}function it(Ee){var Ge=Ee._fullLayout,Ke=Ee.getBoundingClientRect();if(!T.equalDomRects(Ke,Ge._lastBBox)){var qe=Ge._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Ee));Ge._invScaleX=Math.sqrt(qe[0][0]*qe[0][0]+qe[0][1]*qe[0][1]+qe[0][2]*qe[0][2]),Ge._invScaleY=Math.sqrt(qe[1][0]*qe[1][0]+qe[1][1]*qe[1][1]+qe[1][2]*qe[1][2]),Ge._lastBBox=Ke}}function Ye(Ee){var Ge=m.select(Ee),Ke=Ee._fullLayout;if(Ke._calcInverseTransform=it,Ke._calcInverseTransform(Ee),Ke._container=Ge.selectAll(".plot-container").data([0]),Ke._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ke._paperdiv=Ke._container.selectAll(".svg-container").data([0]),Ke._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ke._glcontainer=Ke._paperdiv.selectAll(".gl-container").data([{}]),Ke._glcontainer.enter().append("div").classed("gl-container",!0),Ke._paperdiv.selectAll(".main-svg").remove(),Ke._paperdiv.select(".modebar-container").remove(),Ke._paper=Ke._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ke._toppaper=Ke._paperdiv.append("svg").classed("main-svg",!0),Ke._modebardiv=Ke._paperdiv.append("div"),delete Ke._modeBar,Ke._hoverpaper=Ke._paperdiv.append("svg").classed("main-svg",!0),!Ke._uid){var qe={};m.selectAll("defs").each(function(){this.id&&(qe[this.id.split("-")[1]]=1)}),Ke._uid=T.randstr(qe)}Ke._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),Ke._defs=Ke._paper.append("defs").attr("id","defs-"+Ke._uid),Ke._clips=Ke._defs.append("g").classed("clips",!0),Ke._topdefs=Ke._toppaper.append("defs").attr("id","topdefs-"+Ke._uid),Ke._topclips=Ke._topdefs.append("g").classed("clips",!0),Ke._bgLayer=Ke._paper.append("g").classed("bglayer",!0),Ke._draggers=Ke._paper.append("g").classed("draglayer",!0);var At=Ke._paper.append("g").classed("layer-below",!0);Ke._imageLowerLayer=At.append("g").classed("imagelayer",!0),Ke._shapeLowerLayer=At.append("g").classed("shapelayer",!0),Ke._cartesianlayer=Ke._paper.append("g").classed("cartesianlayer",!0),Ke._polarlayer=Ke._paper.append("g").classed("polarlayer",!0),Ke._smithlayer=Ke._paper.append("g").classed("smithlayer",!0),Ke._ternarylayer=Ke._paper.append("g").classed("ternarylayer",!0),Ke._geolayer=Ke._paper.append("g").classed("geolayer",!0),Ke._funnelarealayer=Ke._paper.append("g").classed("funnelarealayer",!0),Ke._pielayer=Ke._paper.append("g").classed("pielayer",!0),Ke._iciclelayer=Ke._paper.append("g").classed("iciclelayer",!0),Ke._treemaplayer=Ke._paper.append("g").classed("treemaplayer",!0),Ke._sunburstlayer=Ke._paper.append("g").classed("sunburstlayer",!0),Ke._indicatorlayer=Ke._toppaper.append("g").classed("indicatorlayer",!0),Ke._glimages=Ke._paper.append("g").classed("glimages",!0);var yt=Ke._toppaper.append("g").classed("layer-above",!0);Ke._imageUpperLayer=yt.append("g").classed("imagelayer",!0),Ke._shapeUpperLayer=yt.append("g").classed("shapelayer",!0),Ke._selectionLayer=Ke._toppaper.append("g").classed("selectionlayer",!0),Ke._infolayer=Ke._toppaper.append("g").classed("infolayer",!0),Ke._menulayer=Ke._toppaper.append("g").classed("menulayer",!0),Ke._zoomlayer=Ke._toppaper.append("g").classed("zoomlayer",!0),Ke._hoverlayer=Ke._hoverpaper.append("g").classed("hoverlayer",!0),Ke._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ee.emit("plotly_framework")}V.animate=jt,V.addFrames=Nt,V.deleteFrames=Lt,V.addTraces=K,V.deleteTraces=$,V.extendTraces=ie,V.moveTraces=U,V.prependTraces=he,V.newPlot=D,V._doPlot=h,V.purge=Xe,V.react=dt,V.redraw=I,V.relayout=ae,V.restyle=H,V.setPlotConfig=E,V.update=ke,V._guiRelayout=De(ae),V._guiRestyle=De(H),V._guiUpdate=De(ke),V._storeDirectGUIEdit=Q},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(t,N,V){var m={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},u={};function A(T,e){for(var a in T){var i=T[a];i.valType?e[a]=i.dflt:(e[a]||(e[a]={}),A(i,e[a]))}}A(m,u),N.exports={configAttributes:m,dfltConfig:u}},{}],554:[function(t,N,V){var m=t("../registry"),u=t("../lib"),A=t("../plots/attributes"),T=t("../plots/layout_attributes"),e=t("../plots/frame_attributes"),a=t("../plots/animation_attributes"),i=t("./plot_config").configAttributes,n=t("./edit_types"),r=u.extendDeepAll,v=u.isPlainObject,s=u.isArrayOrTypedArray,o=u.nestedProperty,b=u.valObjectMeta,g="_isSubplotObj",d="_isLinkedToArray",f="_arrayAttrRegexps",y="_deprecated",l=[g,d,f,y];V.IS_SUBPLOT_OBJ=g,V.IS_LINKED_TO_ARRAY=d,V.DEPRECATED=y,V.UNDERSCORE_ATTRS=l,V.get=function(){var D={};m.allTypes.forEach(function(O){D[O]=w(O)});var R={};return Object.keys(m.transformsRegistry).forEach(function(O){R[O]=_(O)}),{defs:{valObjects:b,metaKeys:l.concat(["description","role","editType","impliedEdits"]),editType:{traces:n.traces,layout:n.layout},impliedEdits:{}},traces:D,layout:p(),transforms:R,frames:h(),animation:L(a),config:L(i)}},V.crawl=function(D,R,O,z){var G=O||0;z=z||"",Object.keys(D).forEach(function(Y){var ee=D[Y];if(l.indexOf(Y)===-1){var j=(z?z+".":"")+Y;R(ee,Y,D,G,j),!V.isValObject(ee)&&v(ee)&&Y!=="impliedEdits"&&V.crawl(ee,R,G+1,j)}})},V.isValObject=function(D){return D&&D.valType!==void 0},V.findArrayAttributes=function(D){var R=[],O=[],z=[],G,Y;function ee($,U,H,q){O=O.slice(0,q).concat([U]),z=z.slice(0,q).concat([$&&$._isLinkedToArray]);var re=$&&($.valType==="data_array"||$.arrayOk===!0)&&!(O[q-1]==="colorbar"&&(U==="ticktext"||U==="tickvals"));!re||j(G,0,"")}function j($,U,H){var q=$[O[U]],re=H+O[U];if(U===O.length-1)s(q)&&R.push(Y+re);else if(z[U]){if(Array.isArray(q))for(var Z=0;Z<q.length;Z++)v(q[Z])&&j(q[Z],U+1,re+"["+Z+"].")}else v(q)&&j(q,U+1,re+".")}G=D,Y="",V.crawl(A,ee),D._module&&D._module.attributes&&V.crawl(D._module.attributes,ee);var X=D.transforms;if(X)for(var ie=0;ie<X.length;ie++){var he=X[ie],K=he._module;K&&(Y="transforms["+ie+"].",G=he,V.crawl(K.attributes,ee))}return R},V.getTraceValObject=function(D,R){var O=R[0],z=1,G,Y;if(O==="transforms"){if(R.length===1)return A.transforms;var ee=D.transforms;if(!Array.isArray(ee)||!ee.length)return!1;var j=R[1];if(!M(j)||j>=ee.length)return!1;G=(m.transformsRegistry[ee[j].type]||{}).attributes,Y=G&&G[R[2]],z=3}else{var X=D._module;if(X||(X=(m.modules[D.type||A.type.dflt]||{})._module),!X)return!1;if(G=X.attributes,Y=G&&G[O],!Y){var ie=X.basePlotModule;ie&&ie.attributes&&(Y=ie.attributes[O])}Y||(Y=A[O])}return c(Y,R,z)},V.getLayoutValObject=function(D,R){var O=x(D,R[0]);return c(O,R,1)};function x(D,R){var O,z,G,Y,ee=D._basePlotModules;if(ee){var j;for(O=0;O<ee.length;O++){if(G=ee[O],G.attrRegex&&G.attrRegex.test(R)){if(G.layoutAttrOverrides)return G.layoutAttrOverrides;!j&&G.layoutAttributes&&(j=G.layoutAttributes)}var X=G.baseLayoutAttrOverrides;if(X&&R in X)return X[R]}if(j)return j}var ie=D._modules;if(ie){for(O=0;O<ie.length;O++)if(Y=ie[O].layoutAttributes,Y&&R in Y)return Y[R]}for(z in m.componentsRegistry){if(G=m.componentsRegistry[z],G.name==="colorscale"&&R.indexOf("coloraxis")===0)return G.layoutAttributes[R];if(!G.schema&&R===G.name)return G.layoutAttributes}return R in T?T[R]:!1}function c(D,R,O){if(!D)return!1;if(D._isLinkedToArray){if(M(R[O]))O++;else if(O<R.length)return!1}for(;O<R.length;O++){var z=D[R[O]];if(v(z))D=z;else break;if(O===R.length-1)break;if(D._isLinkedToArray){if(O++,!M(R[O]))return!1}else if(D.valType==="info_array"){O++;var G=R[O];if(!M(G))return!1;var Y=D.items;if(Array.isArray(Y)){if(G>=Y.length)return!1;if(D.dimensions===2){if(O++,R.length===O)return D;var ee=R[O];if(!M(ee))return!1;D=Y[G][ee]}else D=Y[G]}else D=Y}}return D}function M(D){return D===Math.round(D)&&D>=0}function w(D){var R,O;R=m.modules[D]._module,O=R.basePlotModule;var z={};z.type=null;var G=r({},A),Y=r({},R.attributes);V.crawl(Y,function(X,ie,he,K,$){o(G,$).set(void 0),X===void 0&&o(Y,$).set(void 0)}),r(z,G),m.traceIs(D,"noOpacity")&&delete z.opacity,m.traceIs(D,"showLegend")||(delete z.showlegend,delete z.legendgroup),m.traceIs(D,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),R.selectPoints||delete z.selectedpoints,r(z,Y),O.attributes&&r(z,O.attributes),z.type=D;var ee={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:L(z)};if(R.layoutAttributes){var j={};r(j,R.layoutAttributes),ee.layoutAttributes=L(j)}return R.animatable||V.crawl(ee,function(X){V.isValObject(X)&&"anim"in X&&delete X.anim}),ee}function p(){var D={},R,O;r(D,T);for(R in m.subplotsRegistry)if(O=m.subplotsRegistry[R],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var z=0;z<O.attr.length;z++)F(D,O,O.attr[z]);else{var G=O.attr==="subplot"?O.name:O.attr;F(D,O,G)}for(R in m.componentsRegistry){O=m.componentsRegistry[R];var Y=O.schema;if(Y&&(Y.subplots||Y.layout)){var ee=Y.subplots;if(ee&&ee.xaxis&&!ee.yaxis)for(var j in ee.xaxis)delete D.yaxis[j]}else O.name==="colorscale"?r(D,O.layoutAttributes):O.layoutAttributes&&I(D,O.layoutAttributes,O.name)}return{layoutAttributes:L(D)}}function _(D){var R=m.transformsRegistry[D],O=r({},R.attributes);return Object.keys(m.componentsRegistry).forEach(function(z){var G=m.componentsRegistry[z];G.schema&&G.schema.transforms&&G.schema.transforms[D]&&Object.keys(G.schema.transforms[D]).forEach(function(Y){I(O,G.schema.transforms[D][Y],Y)})}),{attributes:L(O)}}function h(){var D={frames:r({},e)};return L(D),D.frames}function L(D){return E(D),S(D),P(D),D}function E(D){function R(z){return{valType:"string",editType:"none"}}function O(z,G,Y){V.isValObject(z)?(z.arrayOk===!0||z.valType==="data_array")&&(Y[G+"src"]=R()):v(z)&&(z.role="object")}V.crawl(D,O)}function S(D){function R(O,z,G){if(!!O){var Y=O[d];!Y||(delete O[d],G[z]={items:{}},G[z].items[Y]=O,G[z].role="object")}}V.crawl(D,R)}function P(D){function R(O){for(var z in O)if(v(O[z]))R(O[z]);else if(Array.isArray(O[z]))for(var G=0;G<O[z].length;G++)R(O[z][G]);else O[z]instanceof RegExp&&(O[z]=O[z].toString())}R(D)}function F(D,R,O){var z=o(D,O),G=r({},R.layoutAttributes);G[g]=!0,z.set(G)}function I(D,R,O){var z=o(D,O);z.set(r(z.get()||{},R))}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(t,N,V){var m=t("../lib"),u=t("../plots/attributes"),A="templateitemname",T={name:{valType:"string",editType:"none"}};T[A]={valType:"string",editType:"calc"},V.templatedArray=function(i,n){return n._isLinkedToArray=i,n.name=T.name,n[A]=T[A],n},V.traceTemplater=function(i){var n={},r,v;for(r in i)v=i[r],Array.isArray(v)&&v.length&&(n[r]=0);function s(o){r=m.coerce(o,{},u,"type");var b={type:r,_template:null};if(r in n){v=i[r];var g=n[r]%v.length;n[r]++,b._template=v[g]}return b}return{newTrace:s}},V.newContainer=function(i,n,r){var v=i._template,s=v&&(v[n]||r&&v[r]);m.isPlainObject(s)||(s=null);var o=i[n]={_template:s};return o},V.arrayTemplater=function(i,n,r){var v=i._template,s=v&&v[a(n)],o=v&&v[n];(!Array.isArray(o)||!o.length)&&(o=[]);var b={};function g(f){var y={name:f.name,_input:f},l=y[A]=f[A];if(!e(l))return y._template=s,y;for(var x=0;x<o.length;x++){var c=o[x];if(c.name===l)return b[l]=1,y._template=c,y}return y[r]=f[r]||!1,y._template=!1,y}function d(){for(var f=[],y=0;y<o.length;y++){var l=o[y],x=l.name;if(e(x)&&!b[x]){var c={_template:l,name:x,_input:{_templateitemname:x}};c[A]=l[A],f.push(c),b[x]=1}}return f}return{newItem:g,defaultItems:d}};function e(i){return i&&typeof i=="string"}function a(i){var n=i.length-1;return i.charAt(n)!=="s"&&m.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}V.arrayDefaultKey=a,V.arrayEditor=function(i,n,r){var v=(m.nestedProperty(i,n).get()||[]).length,s=r._index,o=s>=v&&(r._input||{})._templateitemname;o&&(s=v);var b=n+"["+s+"]",g;function d(){g={},o&&(g[b]={},g[b][A]=o)}d();function f(c,M){g[c]=M}function y(c,M){o?m.nestedProperty(g[b],c).set(M):g[b+"."+c]=M}function l(){var c=g;return d(),c}function x(c,M){c&&y(c,M);var w=l();for(var p in w)m.nestedProperty(i,p).set(w[p])}return{modifyBase:f,modifyItem:y,getUpdateObj:l,applyUpdate:x}}},{"../lib":515,"../plots/attributes":562}],556:[function(t,N,V){var m=t("@plotly/d3"),u=t("../registry"),A=t("../plots/plots"),T=t("../lib"),e=t("../lib/clear_gl_canvases"),a=t("../components/color"),i=t("../components/drawing"),n=t("../components/titles"),r=t("../components/modebar"),v=t("../plots/cartesian/axes"),s=t("../constants/alignment"),o=t("../plots/cartesian/constraints"),b=o.enforce,g=o.clean,d=t("../plots/cartesian/autorange").doAutoRange,f="start",y="middle",l="end";V.layoutStyles=function(S){return T.syncOrAsync([A.doAutoMargin,c],S)};function x(S,P,F){for(var I=0;I<F.length;I++){var D=F[I][0],R=F[I][1];if(!(D[0]>=S[1]||D[1]<=S[0])&&R[0]<P[1]&&R[1]>P[0])return!0}return!1}function c(S){var P=S._fullLayout,F=P._size,I=F.p,D=v.list(S,"",!0),R,O,z,G,Y,ee;if(P._paperdiv.style({width:S._context.responsive&&P.autosize&&!S._context._hasZeroWidth&&!S.layout.width?"100%":P.width+"px",height:S._context.responsive&&P.autosize&&!S._context._hasZeroHeight&&!S.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(i.setSize,P.width,P.height),S._context.setBackground(S,P.paper_bgcolor),V.drawMainTitle(S),r.manage(S),!P._has("cartesian"))return A.previousPromises(S);function j(Ct,jt,Nt){var Lt=Ct._lw/2;if(Ct._id.charAt(0)==="x"){if(jt){if(Nt==="top")return jt._offset-I-Lt}else return F.t+F.h*(1-(Ct.position||0))+Lt%1;return jt._offset+jt._length+I+Lt}if(jt){if(Nt==="right")return jt._offset+jt._length+I+Lt}else return F.l+F.w*(Ct.position||0)+Lt%1;return jt._offset-I-Lt}for(R=0;R<D.length;R++){G=D[R];var X=G._anchorAxis;G._linepositions={},G._lw=i.crispRound(S,G.linewidth,1),G._mainLinePosition=j(G,X,G.side),G._mainMirrorPosition=G.mirror&&X?j(G,X,s.OPPOSITE_SIDE[G.side]):null}var ie=[],he=[],K=[],$=a.opacity(P.paper_bgcolor)===1&&a.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(O in P._plots)if(z=P._plots[O],z.mainplot)z.bg&&z.bg.remove(),z.bg=void 0;else{var U=z.xaxis.domain,H=z.yaxis.domain,q=z.plotgroup;if(x(U,H,K)){var re=q.node(),Z=z.bg=T.ensureSingle(q,"rect","bg");re.insertBefore(Z.node(),re.childNodes[0]),he.push(O)}else q.select("rect.bg").remove(),K.push([U,H]),$||(ie.push(O),he.push(O))}var Q=P._bgLayer.selectAll(".bg").data(ie);for(Q.enter().append("rect").classed("bg",!0),Q.exit().remove(),Q.each(function(Ct){P._plots[Ct].bg=m.select(this)}),R=0;R<he.length;R++)z=P._plots[he[R]],Y=z.xaxis,ee=z.yaxis,z.bg&&Y._offset!==void 0&&ee._offset!==void 0&&z.bg.call(i.setRect,Y._offset-I,ee._offset-I,Y._length+2*I,ee._length+2*I).call(a.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(O in P._plots){z=P._plots[O],Y=z.xaxis,ee=z.yaxis;var oe=z.clipId="clip"+P._uid+O+"plot",se=T.ensureSingleById(P._clips,"clipPath",oe,function(Ct){Ct.classed("plotclip",!0).append("rect")});z.clipRect=se.select("rect").attr({width:Y._length,height:ee._length}),i.setTranslate(z.plot,Y._offset,ee._offset);var ae,le;z._hasClipOnAxisFalse?(ae=null,le=oe):(ae=oe,le=null),i.setClipUrl(z.plot,ae,S),z.layerClipId=le}var _e,fe,me,xe,ye,be,ke,De,He,Ae,Le,Ze,We;function ze(Ct){return"M"+_e+","+Ct+"H"+fe}function Ie(Ct){return"M"+Y._offset+","+Ct+"h"+Y._length}function Ve(Ct){return"M"+Ct+","+De+"V"+ke}function dt(Ct){return"M"+Ct+","+ee._offset+"v"+ee._length}function Ft(Ct,jt,Nt){if(!Ct.showline||O!==Ct._mainSubplot)return"";if(!Ct._anchorAxis)return Nt(Ct._mainLinePosition);var Lt=jt(Ct._mainLinePosition);return Ct.mirror&&(Lt+=jt(Ct._mainMirrorPosition)),Lt}for(O in P._plots){z=P._plots[O],Y=z.xaxis,ee=z.yaxis;var Qt="M0,0";M(Y,O)&&(ye=p(Y,"left",ee,D),_e=Y._offset-(ye?I+ye:0),be=p(Y,"right",ee,D),fe=Y._offset+Y._length+(be?I+be:0),me=j(Y,ee,"bottom"),xe=j(Y,ee,"top"),We=!Y._anchorAxis||O!==Y._mainSubplot,We&&(Y.mirror==="allticks"||Y.mirror==="all")&&(Y._linepositions[O]=[me,xe]),Qt=Ft(Y,ze,Ie),We&&Y.showline&&(Y.mirror==="all"||Y.mirror==="allticks")&&(Qt+=ze(me)+ze(xe)),z.xlines.style("stroke-width",Y._lw+"px").call(a.stroke,Y.showline?Y.linecolor:"rgba(0,0,0,0)")),z.xlines.attr("d",Qt);var Ot="M0,0";M(ee,O)&&(Le=p(ee,"bottom",Y,D),ke=ee._offset+ee._length+(Le?I:0),Ze=p(ee,"top",Y,D),De=ee._offset-(Ze?I:0),He=j(ee,Y,"left"),Ae=j(ee,Y,"right"),We=!ee._anchorAxis||O!==ee._mainSubplot,We&&(ee.mirror==="allticks"||ee.mirror==="all")&&(ee._linepositions[O]=[He,Ae]),Ot=Ft(ee,Ve,dt),We&&ee.showline&&(ee.mirror==="all"||ee.mirror==="allticks")&&(Ot+=Ve(He)+Ve(Ae)),z.ylines.style("stroke-width",ee._lw+"px").call(a.stroke,ee.showline?ee.linecolor:"rgba(0,0,0,0)")),z.ylines.attr("d",Ot)}return v.makeClipPaths(S),A.previousPromises(S)}function M(S,P){return(S.ticks||S.showline)&&(P===S._mainSubplot||S.mirror==="all"||S.mirror==="allticks")}function w(S,P,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var I=F._anchorAxis;if(!I)return!1;var D=s.FROM_BL[P];return F.side===P?I.domain[D]===S.domain[D]:F.mirror&&I.domain[1-D]===S.domain[1-D]}function p(S,P,F,I){if(w(S,P,F))return F._lw;for(var D=0;D<I.length;D++){var R=I[D];if(R._mainAxis===F._mainAxis&&w(S,P,R))return R._lw}return 0}V.drawMainTitle=function(S){var P=S._fullLayout,F=L(P),I=E(P);n.draw(S,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:_(P,F),y:h(P,I),"text-anchor":F,dy:I}})};function _(S,P){var F=S.title,I=S._size,D=0;switch(P===f?D=F.pad.l:P===l&&(D=-F.pad.r),F.xref){case"paper":return I.l+I.w*F.x+D;case"container":default:return S.width*F.x+D}}function h(S,P){var F=S.title,I=S._size,D=0;if(P==="0em"||!P?D=-F.pad.b:P===s.CAP_SHIFT+"em"&&(D=F.pad.t),F.y==="auto")return I.t/2;switch(F.yref){case"paper":return I.t+I.h-I.h*F.y+D;case"container":default:return S.height-S.height*F.y+D}}function L(S){var P=S.title,F=y;return T.isRightAnchor(P)?F=l:T.isLeftAnchor(P)&&(F=f),F}function E(S){var P=S.title,F="0em";return T.isTopAnchor(P)?F=s.CAP_SHIFT+"em":T.isMiddleAnchor(P)&&(F=s.MID_SHIFT+"em"),F}V.doTraceStyle=function(S){var P=S.calcdata,F=[],I;for(I=0;I<P.length;I++){var D=P[I],R=D[0]||{},O=R.trace||{},z=O._module||{},G=z.arraysToCalcdata;G&&G(D,O);var Y=z.editStyle;Y&&F.push({fn:Y,cd0:R})}if(F.length){for(I=0;I<F.length;I++){var ee=F[I];ee.fn(S,ee.cd0)}e(S),V.redrawReglTraces(S)}return A.style(S),u.getComponentMethod("legend","draw")(S),A.previousPromises(S)},V.doColorBars=function(S){return u.getComponentMethod("colorbar","draw")(S),A.previousPromises(S)},V.layoutReplot=function(S){var P=S.layout;return S.layout=void 0,u.call("_doPlot",S,"",P)},V.doLegend=function(S){return u.getComponentMethod("legend","draw")(S),A.previousPromises(S)},V.doTicksRelayout=function(S){return v.draw(S,"redraw"),S._fullLayout._hasOnlyLargeSploms&&(u.subplotsRegistry.splom.updateGrid(S),e(S),V.redrawReglTraces(S)),V.drawMainTitle(S),A.previousPromises(S)},V.doModeBar=function(S){var P=S._fullLayout;r.manage(S);for(var F=0;F<P._basePlotModules.length;F++){var I=P._basePlotModules[F].updateFx;I&&I(S)}return A.previousPromises(S)},V.doCamera=function(S){for(var P=S._fullLayout,F=P._subplots.gl3d,I=0;I<F.length;I++){var D=P[F[I]],R=D._scene;R.setViewport(D)}},V.drawData=function(S){var P=S._fullLayout;e(S);for(var F=P._basePlotModules,I=0;I<F.length;I++)F[I].plot(S);return V.redrawReglTraces(S),A.style(S),u.getComponentMethod("selections","draw")(S),u.getComponentMethod("shapes","draw")(S),u.getComponentMethod("annotations","draw")(S),u.getComponentMethod("images","draw")(S),P._replotting=!1,A.previousPromises(S)},V.redrawReglTraces=function(S){var P=S._fullLayout;if(P._has("regl")){var F=S._fullData,I=[],D=[],R,O;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),R=0;R<F.length;R++){var z=F[R];z.visible===!0&&z._length!==0&&(z.type==="splom"?P._splomScenes[z.uid].draw():z.type==="scattergl"?T.pushUnique(I,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&T.pushUnique(D,z.subplot))}for(R=0;R<I.length;R++)O=P._plots[I[R]],O._scene&&O._scene.draw();for(R=0;R<D.length;R++)O=P[D[R]]._subplot,O._scene&&O._scene.draw()}},V.doAutoRangeAndConstraints=function(S){for(var P=v.list(S,"",!0),F,I={},D=0;D<P.length;D++)if(F=P[D],!I[F._id]){I[F._id]=1,g(S,F),d(S,F);var R=F._matchGroup;if(R)for(var O in R){var z=v.getFromId(S,O);d(S,z,F.range),I[O]=1}}b(S)},V.finalDraw=function(S){u.getComponentMethod("rangeslider","draw")(S),u.getComponentMethod("rangeselector","draw")(S)},V.drawMarginPushers=function(S){u.getComponentMethod("legend","draw")(S),u.getComponentMethod("rangeselector","draw")(S),u.getComponentMethod("sliders","draw")(S),u.getComponentMethod("updatemenus","draw")(S),u.getComponentMethod("colorbar","draw")(S)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(t,N,V){var m=t("../lib"),u=m.isPlainObject,A=t("./plot_schema"),T=t("../plots/plots"),e=t("../plots/attributes"),a=t("./plot_template"),i=t("./plot_config").dfltConfig;V.makeTemplate=function(f){f=m.isPlainObject(f)?f:m.getGraphDiv(f),f=m.extendDeep({_context:i},{data:f.data,layout:f.layout}),T.supplyDefaults(f);var y=f.data||[],l=f.layout||{};l._basePlotModules=f._fullLayout._basePlotModules,l._modules=f._fullLayout._modules;var x={data:{},layout:{}};y.forEach(function(P){var F={};v(P,F,o.bind(null,P));var I=m.coerce(P,{},e,"type"),D=x.data[I];D||(D=x.data[I]=[]),D.push(F)}),v(l,x.layout,s.bind(null,l)),delete x.layout.template;var c=l.template;if(u(c)){var M=c.layout,w,p,_,h,L,E;u(M)&&n(M,x.layout);var S=c.data;if(u(S)){for(p in x.data)if(_=S[p],Array.isArray(_)){for(L=x.data[p],E=L.length,h=_.length,w=0;w<E;w++)n(_[w%h],L[w]);for(w=E;w<h;w++)L.push(m.extendDeep({},_[w]))}for(p in S)p in x.data||(x.data[p]=m.extendDeep([],S[p]))}}return x};function n(f,y){f=m.extendDeep({},f);var l=Object.keys(f).sort(),x,c;function M(L,E,S){if(u(E)&&u(L))n(L,E);else if(Array.isArray(E)&&Array.isArray(L)){var P=a.arrayTemplater({_template:f},S);for(c=0;c<E.length;c++){var F=E[c],I=P.newItem(F)._template;I&&n(I,F)}var D=P.defaultItems();for(c=0;c<D.length;c++)E.push(D[c]._template);for(c=0;c<E.length;c++)delete E[c].templateitemname}}for(x=0;x<l.length;x++){var w=l[x],p=f[w];if(w in y?M(p,y[w],w):y[w]=p,r(w)===w)for(var _ in y){var h=r(_);_!==h&&h===w&&!(_ in f)&&M(p,y[_],w)}}}function r(f){return f.replace(/[0-9]+$/,"")}function v(f,y,l,x,c){var M=c&&l(c);for(var w in f){var p=f[w],_=b(f,w,x),h=b(f,w,c),L=l(h);if(!L){var E=r(w);E!==w&&(h=b(f,E,c),L=l(h))}if(!(M&&M===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(p)))if(!L.valType&&u(p))v(p,y,l,_,h);else if(L._isLinkedToArray&&Array.isArray(p))for(var S=!1,P=0,F={},I=0;I<p.length;I++){var D=p[I];if(u(D)){var R=D.name;if(R)F[R]||(v(D,y,l,b(p,P,_),b(p,P,h)),P++,F[R]=1);else if(!S){var O=a.arrayDefaultKey(w),z=b(f,O,x),G=b(p,P,_);v(D,y,l,G,b(p,P,h));var Y=m.nestedProperty(y,G),ee=m.nestedProperty(y,z);ee.set(Y.get()),Y.set(null),S=!0}}}else{var j=m.nestedProperty(y,_);j.set(p)}}}function s(f,y){return A.getLayoutValObject(f,m.nestedProperty({},y).parts)}function o(f,y){return A.getTraceValObject(f,m.nestedProperty({},y).parts)}function b(f,y,l){var x;return l?Array.isArray(f)?x=l+"["+y+"]":x=l+"."+y:x=y,x}V.validateTemplate=function(f,y){var l=m.extendDeep({},{_context:i,data:f.data,layout:f.layout}),x=l.layout||{};u(y)||(y=x.template||{});var c=y.layout,M=y.data,w=[];l.layout=x,l.layout.template=y,T.supplyDefaults(l);var p=l._fullLayout,_=l._fullData,h={};function L(z,G){for(var Y in z)if(Y.charAt(0)!=="_"&&u(z[Y])){var ee=r(Y),j=[],X;for(X=0;X<G.length;X++)j.push(b(z,Y,G[X])),ee!==Y&&j.push(b(z,ee,G[X]));for(X=0;X<j.length;X++)h[j[X]]=1;L(z[Y],j)}}function E(z,G){for(var Y in z)if(Y.indexOf("defaults")===-1&&u(z[Y])){var ee=b(z,Y,G);h[ee]?E(z[Y],ee):w.push({code:"unused",path:ee})}}if(u(c)?(L(p,["layout"]),E(c,"layout")):w.push({code:"layout"}),!u(M))w.push({code:"data"});else{for(var S={},P,F=0;F<_.length;F++){var I=_[F];P=I.type,S[P]=(S[P]||0)+1,I._fullInput._template||w.push({code:"missing",index:I._fullInput.index,traceType:P})}for(P in M){var D=M[P].length,R=S[P]||0;D>R?w.push({code:"unused",traceType:P,templateCount:D,dataCount:R}):R>D&&w.push({code:"reused",traceType:P,templateCount:D,dataCount:R})}}function O(z,G){for(var Y in z)if(Y.charAt(0)!=="_"){var ee=z[Y],j=b(z,Y,G);u(ee)?(Array.isArray(z)&&ee._template===!1&&ee.templateitemname&&w.push({code:"missing",path:j,templateitemname:ee.templateitemname}),O(ee,j)):Array.isArray(ee)&&g(ee)&&O(ee,j)}}if(O({data:_,layout:p},""),w.length)return w.map(d)};function g(f){for(var y=0;y<f.length;y++)if(u(f[y]))return!0}function d(f){var y;switch(f.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":f.path?y="There are no templates for item "+f.path+" with name "+f.templateitemname:y="There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":f.path?y="The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?y="Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":y="The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type.";break}return f.msg=y,f}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(t,N,V){var m=t("fast-isnumeric"),u=t("./plot_api"),A=t("../plots/plots"),T=t("../lib"),e=t("../snapshot/helpers"),a=t("../snapshot/tosvg"),i=t("../snapshot/svgtoimg"),n=t("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function v(s,o){o=o||{};var b,g,d,f;T.isPlainObject(s)?(b=s.data||[],g=s.layout||{},d=s.config||{},f={}):(s=T.getGraphDiv(s),b=T.extendDeep([],s.data),g=T.extendDeep({},s.layout),d=s._context,f=s._fullLayout||{});function y(R){return!(R in o)||T.validate(o[R],r[R])}if(!y("width")&&o.width!==null||!y("height")&&o.height!==null)throw new Error("Height and width should be pixel values.");if(!y("format"))throw new Error("Export format is not "+T.join2(r.format.values,", "," or ")+".");var l={};function x(R,O){return T.coerce(o,l,r,R,O)}var c=x("format"),M=x("width"),w=x("height"),p=x("scale"),_=x("setBackground"),h=x("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var E=T.extendFlat({},g);M?E.width=M:o.width===null&&m(f.width)&&(E.width=f.width),w?E.height=w:o.height===null&&m(f.height)&&(E.height=f.height);var S=T.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=e.getRedrawFunc(L);function F(){return new Promise(function(R){setTimeout(R,e.getDelay(L._fullLayout))})}function I(){return new Promise(function(R,O){var z=a(L,c,p),G=L._fullLayout.width,Y=L._fullLayout.height;function ee(){u.purge(L),document.body.removeChild(L)}if(c==="full-json"){var j=A.graphJson(L,!1,"keepdata","object",!0,!0);return j.version=n,j=JSON.stringify(j),ee(),R(h?j:e.encodeJSON(j))}if(ee(),c==="svg")return R(h?z:e.encodeSVG(z));var X=document.createElement("canvas");X.id=T.randstr(),i({format:c,width:G,height:Y,scale:p,canvas:X,svg:z,promise:!0}).then(R).catch(O)})}function D(R){return h?R.replace(e.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,O){u.newPlot(L,b,E,S).then(P).then(F).then(I).then(function(z){R(D(z))}).catch(function(z){O(z)})})}N.exports=v},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(t,N,V){var m=t("../lib"),u=t("../plots/plots"),A=t("./plot_schema"),T=t("./plot_config").dfltConfig,e=m.isPlainObject,a=Array.isArray,i=m.isArrayOrTypedArray;N.exports=function(x,c){x===void 0&&(x=[]),c===void 0&&(c={});var M=A.get(),w=[],p={_context:m.extendFlat({},T)},_,h;a(x)?(p.data=m.extendDeep([],x),_=x):(p.data=[],_=[],w.push(o("array","data"))),e(c)?(p.layout=m.extendDeep({},c),h=c):(p.layout={},h={},arguments.length>1&&w.push(o("object","layout"))),u.supplyDefaults(p);for(var L=p._fullData,E=_.length,S=0;S<E;S++){var P=_[S],F=["data",S];if(!e(P)){w.push(o("object",F));continue}var I=L[S],D=I.type,R=M.traces[D].attributes;R.type={valType:"enumerated",values:[D]},I.visible===!1&&P.visible!==!1&&w.push(o("invisible",F)),n(P,I,R,w,F);var O=P.transforms,z=I.transforms;if(O){a(O)||w.push(o("array",F,["transforms"])),F.push("transforms");for(var G=0;G<O.length;G++){var Y=["transforms",G],ee=O[G].type;if(!e(O[G])){w.push(o("object",F,Y));continue}var j=M.transforms[ee]?M.transforms[ee].attributes:{};j.type={valType:"enumerated",values:Object.keys(M.transforms)},n(O[G],z[G],j,w,F,Y)}}}var X=p._fullLayout,ie=r(M,L);return n(h,X,ie,w,"layout"),w.length===0?void 0:w};function n(l,x,c,M,w,p){p=p||[];for(var _=Object.keys(l),h=0;h<_.length;h++){var L=_[h];if(L!=="transforms"){var E=p.slice();E.push(L);var S=l[L],P=x[L],F=g(c,L),I=(F||{}).valType,D=I==="info_array",R=I==="colorscale",O=(F||{}).items;if(!b(c,L))M.push(o("schema",w,E));else if(e(S)&&e(P)&&I!=="any")n(S,P,F,M,w,E);else if(D&&a(S)){S.length>P.length&&M.push(o("unused",w,E.concat(P.length)));var z=P.length,G=Array.isArray(O);G&&(z=Math.min(z,O.length));var Y,ee,j,X,ie;if(F.dimensions===2)for(ee=0;ee<z;ee++)if(a(S[ee])){S[ee].length>P[ee].length&&M.push(o("unused",w,E.concat(ee,P[ee].length)));var he=P[ee].length;for(Y=0;Y<(G?Math.min(he,O[ee].length):he);Y++)j=G?O[ee][Y]:O,X=S[ee][Y],ie=P[ee][Y],m.validate(X,j)?ie!==X&&ie!==+X&&M.push(o("dynamic",w,E.concat(ee,Y),X,ie)):M.push(o("value",w,E.concat(ee,Y),X))}else M.push(o("array",w,E.concat(ee),S[ee]));else for(ee=0;ee<z;ee++)j=G?O[ee]:O,X=S[ee],ie=P[ee],m.validate(X,j)?ie!==X&&ie!==+X&&M.push(o("dynamic",w,E.concat(ee),X,ie)):M.push(o("value",w,E.concat(ee),X))}else if(F.items&&!D&&a(S)){var K=O[Object.keys(O)[0]],$=[],U,H;for(U=0;U<P.length;U++){var q=P[U]._index||U;if(H=E.slice(),H.push(q),e(S[q])&&e(P[U])){$.push(q);var re=S[q],Z=P[U];e(re)&&re.visible!==!1&&Z.visible===!1?M.push(o("invisible",w,H)):n(re,Z,K,M,w,H)}}for(U=0;U<S.length;U++)H=E.slice(),H.push(U),e(S[U])?$.indexOf(U)===-1&&M.push(o("unused",w,H)):M.push(o("object",w,H,S[U]))}else!e(S)&&e(P)?M.push(o("object",w,E,S)):!i(S)&&i(P)&&!D&&!R?M.push(o("array",w,E,S)):L in x?m.validate(S,F)?F.valType==="enumerated"&&(F.coerceNumber&&S!==+P||S!==P)&&M.push(o("dynamic",w,E,S,P)):M.push(o("value",w,E,S)):M.push(o("unused",w,E,S))}}return M}function r(l,x){for(var c=l.layout.layoutAttributes,M=0;M<x.length;M++){var w=x[M],p=l.traces[w.type],_=p.layoutAttributes;_&&(w.subplot?m.extendFlat(c[p.attributes.subplot.dflt],_):m.extendFlat(c,_))}return c}var v={object:function(l,x){var c;return l==="layout"&&x===""?c="The layout argument":l[0]==="data"&&x===""?c="Trace "+l[1]+" in the data argument":c=s(l)+"key "+x,c+" must be linked to an object container"},array:function(l,x){var c;return l==="data"?c="The data argument":c=s(l)+"key "+x,c+" must be linked to an array container"},schema:function(l,x){return s(l)+"key "+x+" is not part of the schema"},unused:function(l,x,c){var M=e(c)?"container":"key";return s(l)+M+" "+x+" did not get coerced"},dynamic:function(l,x,c,M){return[s(l)+"key",x,"(set to '"+c+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(l,x){return(x?s(l)+"item "+x:"Trace "+l[1])+" got defaulted to be not visible"},value:function(l,x,c){return[s(l)+"key "+x,"is set to an invalid value ("+c+")"].join(" ")}};function s(l){return a(l)?"In data trace "+l[1]+", ":"In "+l+", "}function o(l,x,c,M,w){c=c||"";var p,_;a(x)?(p=x[0],_=x[1]):(p=x,_=null);var h=y(c),L=v[l](x,h,M,w);return m.log(L),{code:l,container:p,trace:_,path:c,astr:h,msg:L}}function b(l,x){var c=f(x),M=c.keyMinusId,w=c.id;return M in l&&l[M]._isSubplotObj&&w?!0:x in l}function g(l,x){if(x in l)return l[x];var c=f(x);return l[c.keyMinusId]}var d=m.counterRegex("([a-z]+)");function f(l){var x=l.match(d);return{keyMinusId:x&&x[1],id:x&&x[2]}}function y(l){if(!a(l))return String(l);for(var x="",c=0;c<l.length;c++){var M=l[c];typeof M=="number"?x=x.substr(0,x.length-1)+"["+M+"]":x+=M,c<l.length-1&&(x+=".")}return x}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(t,N,V){N.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(t,N,V){var m=t("../lib"),u=t("../plot_api/plot_template");N.exports=function(T,e,a){var i=a.name,n=a.inclusionAttr||"visible",r=e[i],v=m.isArrayOrTypedArray(T[i])?T[i]:[],s=e[i]=[],o=u.arrayTemplater(e,i,n),b,g;for(b=0;b<v.length;b++){var d=v[b];m.isPlainObject(d)?g=o.newItem(d):(g=o.newItem({}),g[n]=!1),g._index=b,g[n]!==!1&&a.handleItemDefaults(d,g,e,a),s.push(g)}var f=o.defaultItems();for(b=0;b<f.length;b++)g=f[b],g._index=s.length,a.handleItemDefaults({},g,e,a,{}),s.push(g);if(m.isArrayOrTypedArray(r)){var y=Math.min(r.length,s.length);for(b=0;b<y;b++)m.relinkPrivateKeys(s[b],r[b])}return s}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(t,N,V){var m=t("./font_attributes"),u=t("../components/fx/attributes");N.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:m({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:u.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=u.dateTime2ms,T=u.incrementMonth,e=t("../../constants/numerical"),a=e.ONEAVGMONTH;N.exports=function(n,r,v,s){if(r.type!=="date")return{vals:s};var o=n[v+"periodalignment"];if(!o)return{vals:s};var b=n[v+"period"],g;if(m(b)){if(b=+b,b<=0)return{vals:s}}else if(typeof b=="string"&&b.charAt(0)==="M"){var d=+b.substring(1);if(d>0&&Math.round(d)===d)g=d;else return{vals:s}}for(var f=r.calendar,y=o==="start",l=o==="end",x=n[v+"period0"],c=A(x,f)||0,M=[],w=[],p=[],_=s.length,h=0;h<_;h++){var L=s[h],E,S,P;if(g){for(E=Math.round((L-c)/(g*a)),P=T(c,g*E,f);P>L;)P=T(P,-g,f);for(;P<=L;)P=T(P,g,f);S=T(P,-g,f)}else{for(E=Math.round((L-c)/b),P=c+E*b;P>L;)P-=b;for(;P<=L;)P+=b;S=P-b}M[h]=y?S:l?P:(S+P)/2,w[h]=S,p[h]=P}return{vals:M,starts:w,ends:p}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(t,N,V){N.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("../../lib"),T=t("../../constants/numerical").FP_SAFE,e=t("../../registry"),a=t("../../components/drawing"),i=t("./axis_ids"),n=i.getFromId,r=i.isLinked;N.exports={getAutoRange:v,makePadFn:o,doAutoRange:f,findExtremes:y,concatExtremes:d};function v(_,h){var L,E,S=[],P=_._fullLayout,F=o(P,h,0),I=o(P,h,1),D=d(_,h),R=D.min,O=D.max;if(R.length===0||O.length===0)return A.simpleMap(h.range,h.r2l);var z=R[0].val,G=O[0].val;for(L=1;L<R.length&&z===G;L++)z=Math.min(z,R[L].val);for(L=1;L<O.length&&z===G;L++)G=Math.max(G,O[L].val);var Y=!1;if(h.range){var ee=A.simpleMap(h.range,h.r2l);Y=ee[1]<ee[0]}h.autorange==="reversed"&&(Y=!0,h.autorange=!0);var j=h.rangemode,X=j==="tozero",ie=j==="nonnegative",he=h._length,K=he/10,$=0,U,H,q,re,Z,Q;for(L=0;L<R.length;L++)for(U=R[L],E=0;E<O.length;E++)H=O[E],Q=H.val-U.val-s(h,U.val,H.val),Q>0&&(Z=he-F(U)-I(H),Z>K?Q/Z>$&&(q=U,re=H,$=Q/Z):Q/he>$&&(q={val:U.val,nopad:1},re={val:H.val,nopad:1},$=Q/he));function oe(fe,me){return Math.max(fe,I(me))}if(z===G){var se=z-1,ae=z+1;if(X)if(z===0)S=[0,1];else{var le=(z>0?O:R).reduce(oe,0),_e=z/(1-Math.min(.5,le/he));S=z>0?[0,_e]:[_e,0]}else ie?S=[Math.max(0,se),Math.max(1,ae)]:S=[se,ae]}else X?(q.val>=0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:0,nopad:1})):ie&&(q.val-$*F(q)<0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:1,nopad:1})),$=(re.val-q.val-s(h,U.val,H.val))/(he-F(q)-I(re)),S=[q.val-$*F(q),re.val+$*I(re)];return Y&&S.reverse(),A.simpleMap(S,h.l2r||Number)}function s(_,h,L){var E=0;if(_.rangebreaks)for(var S=_.locateBreaks(h,L),P=0;P<S.length;P++){var F=S[P];E+=F.max-F.min}return E}function o(_,h,L){var E=.05*h._length,S=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(S.ticklabelposition||"").indexOf("inside")!==-1){var P=h.autorange==="reversed";if(!P){var F=A.simpleMap(h.range,h.r2l);P=F[1]<F[0]}P&&(L=!L)}var I=0;return r(_,h._id)||(I=g(_,h,L)),E=Math.max(I,E),h.constrain==="domain"&&h._inputDomain&&(E*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?E:I)}}var b=3;function g(_,h,L){var E=0,S=h._id.charAt(0)==="x";for(var P in _._plots){var F=_._plots[P];if(!(h._id!==F.xaxis._id&&h._id!==F.yaxis._id)){var I=(S?F.yaxis:F.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(I.side==="left"||I.side==="bottom")||L&&(I.side==="top"||I.side==="right"))){if(I._vals){var D=A.deg2rad(I._tickAngles[I._id+"tick"]||0),R=Math.abs(Math.cos(D)),O=Math.abs(Math.sin(D));if(!I._vals[0].bb){var z=I._id+"tick",G=I._selections[z];G.each(function(he){var K=m.select(this),$=K.select(".text-math-group");$.empty()&&(he.bb=a.bBox(K.node()))})}for(var Y=0;Y<I._vals.length;Y++){var ee=I._vals[Y],j=ee.bb;if(j){var X=2*b+j.width,ie=2*b+j.height;E=Math.max(E,S?Math.max(X*R,ie*O):Math.max(ie*R,X*O))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(E+=I.ticklen||0)}}}return E}function d(_,h,L){var E=h._id,S=_._fullData,P=_._fullLayout,F=[],I=[],D,R,O;function z(X,ie){for(D=0;D<ie.length;D++){var he=X[ie[D]],K=(he._extremes||{})[E];if(he.visible===!0&&K){for(R=0;R<K.min.length;R++)O=K.min[R],l(F,O.val,O.pad,{extrapad:O.extrapad});for(R=0;R<K.max.length;R++)O=K.max[R],x(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(z(S,h._traceIndices),z(P.annotations||[],h._annIndices||[]),z(P.shapes||[],h._shapeIndices||[]),h._matchGroup&&!L){for(var G in h._matchGroup)if(G!==h._id){var Y=n(_,G),ee=d(_,Y,!0),j=h._length/Y._length;for(R=0;R<ee.min.length;R++)O=ee.min[R],l(F,O.val,O.pad*j,{extrapad:O.extrapad});for(R=0;R<ee.max.length;R++)O=ee.max[R],x(I,O.val,O.pad*j,{extrapad:O.extrapad})}}return{min:F,max:I}}function f(_,h,L){if(h.setScale(),h.autorange){h.range=L?L.slice():v(_,h),h._r=h.range.slice(),h._rl=A.simpleMap(h._r,h.r2l);var E=h._input,S={};S[h._attr+".range"]=h.range,S[h._attr+".autorange"]=h.autorange,e.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,S),E.range=h.range.slice(),E.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var F=P.rangeslider[h._name];F&&F.rangemode==="auto"&&(F.range=v(_,h)),P._input.rangeslider[h._name]=A.extendFlat({},F)}}function y(_,h,L){L||(L={}),_._m||_.setScale();var E=[],S=[],P=h.length,F=L.padded||!1,I=L.tozero&&(_.type==="linear"||_.type==="-"),D=_.type==="log",R=!1,O=L.vpadLinearized||!1,z,G,Y,ee,j,X,ie,he,K;function $(se){if(Array.isArray(se))return R=!0,function(le){return Math.max(Number(se[le]||0),0)};var ae=Math.max(Number(se||0),0);return function(){return ae}}var U=$((_._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),H=$((_._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),q=$(L.vpadplus||L.vpad),re=$(L.vpadminus||L.vpad);if(!R){if(he=1/0,K=-1/0,D)for(z=0;z<P;z++)G=h[z],G<he&&G>0&&(he=G),G>K&&G<T&&(K=G);else for(z=0;z<P;z++)G=h[z],G<he&&G>-T&&(he=G),G>K&&G<T&&(K=G);h=[he,K],P=2}var Z={tozero:I,extrapad:F};function Q(se){Y=h[se],u(Y)&&(X=U(se),ie=H(se),O?(ee=_.c2l(Y)-re(se),j=_.c2l(Y)+q(se)):(he=Y-re(se),K=Y+q(se),D&&he<K/10&&(he=K/10),ee=_.c2l(he),j=_.c2l(K)),I&&(ee=Math.min(0,ee),j=Math.max(0,j)),M(ee)&&l(E,ee,ie,Z),M(j)&&x(S,j,X,Z))}var oe=Math.min(6,P);for(z=0;z<oe;z++)Q(z);for(z=P-1;z>=oe;z--)Q(z);return{min:E,max:S,opts:L}}function l(_,h,L,E){c(_,h,L,E,w)}function x(_,h,L,E){c(_,h,L,E,p)}function c(_,h,L,E,S){for(var P=E.tozero,F=E.extrapad,I=!0,D=0;D<_.length&&I;D++){var R=_[D];if(S(R.val,h)&&R.pad>=L&&(R.extrapad||!F)){I=!1;break}else S(h,R.val)&&R.pad<=L&&(F||!R.extrapad)&&(_.splice(D,1),D--)}if(I){var O=P&&h===0;_.push({val:h,pad:O?0:L,extrapad:O?!1:F})}}function M(_){return u(_)&&Math.abs(_)<T}function w(_,h){return _<=h}function p(_,h){return _>=h}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib"),a=e.strTranslate,i=t("../../lib/svg_text_utils"),n=t("../../components/titles"),r=t("../../components/color"),v=t("../../components/drawing"),s=t("./layout_attributes"),o=t("./clean_ticks"),b=t("../../constants/numerical"),g=b.ONEMAXYEAR,d=b.ONEAVGYEAR,f=b.ONEMINYEAR,y=b.ONEMAXQUARTER,l=b.ONEAVGQUARTER,x=b.ONEMINQUARTER,c=b.ONEMAXMONTH,M=b.ONEAVGMONTH,w=b.ONEMINMONTH,p=b.ONEWEEK,_=b.ONEDAY,h=_/2,L=b.ONEHOUR,E=b.ONEMIN,S=b.ONESEC,P=b.MINUS_SIGN,F=b.BADNUM,I={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},O={K:"tick",L:"path"},z={K:"tick",L:"text"},G={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},Y=t("../../constants/alignment"),ee=Y.MID_SHIFT,j=Y.CAP_SHIFT,X=Y.LINE_SPACING,ie=Y.OPPOSITE_SIDE,he=3,K=N.exports={};K.setConvert=t("./set_convert");var $=t("./axis_autotype"),U=t("./axis_ids"),H=U.idSort,q=U.isLinked;K.id2name=U.id2name,K.name2id=U.name2id,K.cleanId=U.cleanId,K.list=U.list,K.listIds=U.listIds,K.getFromId=U.getFromId,K.getFromTrace=U.getFromTrace;var re=t("./autorange");K.getAutoRange=re.getAutoRange,K.findExtremes=re.findExtremes;var Z=1e-4;function Q(Pe){var Se=(Pe[1]-Pe[0])*Z;return[Pe[0]-Se,Pe[1]+Se]}K.coerceRef=function(Pe,Se,ot,ct,pt,St){var xt=ct.charAt(ct.length-1),Pt=ot._fullLayout._subplots[xt+"axis"],Xt=ct+"ref",or={};return pt||(pt=Pt[0]||(typeof St=="string"?St:St[0])),St||(St=pt),Pt=Pt.concat(Pt.map(function(Pr){return Pr+" domain"})),or[Xt]={valType:"enumerated",values:Pt.concat(St?typeof St=="string"?[St]:St:[]),dflt:pt},e.coerce(Pe,Se,or,Xt)},K.getRefType=function(Pe){return Pe===void 0?Pe:Pe==="paper"?"paper":Pe==="pixel"?"pixel":/( domain)$/.test(Pe)?"domain":"range"},K.coercePosition=function(Pe,Se,ot,ct,pt,St){var xt,Pt,Xt=K.getRefType(ct);if(Xt!=="range")xt=e.ensureNumber,Pt=ot(pt,St);else{var or=K.getFromId(Se,ct);St=or.fraction2r(St),Pt=ot(pt,St),xt=or.cleanPos}Pe[pt]=xt(Pt)},K.cleanPosition=function(Pe,Se,ot){var ct=ot==="paper"||ot==="pixel"?e.ensureNumber:K.getFromId(Se,ot).cleanPos;return ct(Pe)},K.redrawComponents=function(Pe,Se){Se=Se||K.listIds(Pe);var ot=Pe._fullLayout;function ct(pt,St,xt,Pt){for(var Xt=T.getComponentMethod(pt,St),or={},Pr=0;Pr<Se.length;Pr++)for(var Ar=ot[K.id2name(Se[Pr])],Er=Ar[xt],$r=0;$r<Er.length;$r++){var lr=Er[$r];if(!or[lr]&&(Xt(Pe,lr),or[lr]=1,Pt))return}}ct("annotations","drawOne","_annIndices"),ct("shapes","drawOne","_shapeIndices"),ct("images","draw","_imgIndices",!0),ct("selections","drawOne","_selectionIndices")};var oe=K.getDataConversions=function(Pe,Se,ot,ct){var pt,St=ot==="x"||ot==="y"||ot==="z"?ot:ct;if(Array.isArray(St)){if(pt={type:$(ct,void 0,{autotypenumbers:Pe._fullLayout.autotypenumbers}),_categories:[]},K.setConvert(pt),pt.type==="category")for(var xt=0;xt<ct.length;xt++)pt.d2c(ct[xt])}else pt=K.getFromTrace(Pe,Se,St);return pt?{d2c:pt.d2c,c2d:pt.c2d}:St==="ids"?{d2c:ae,c2d:ae}:{d2c:se,c2d:se}};function se(Pe){return+Pe}function ae(Pe){return String(Pe)}K.getDataToCoordFunc=function(Pe,Se,ot,ct){return oe(Pe,Se,ot,ct).d2c},K.counterLetter=function(Pe){var Se=Pe.charAt(0);if(Se==="x")return"y";if(Se==="y")return"x"},K.minDtick=function(Pe,Se,ot,ct){["log","category","multicategory"].indexOf(Pe.type)!==-1||!ct?Pe._minDtick=0:Pe._minDtick===void 0?(Pe._minDtick=Se,Pe._forceTick0=ot):Pe._minDtick&&((Pe._minDtick/Se+1e-6)%1<2e-6&&((ot-Pe._forceTick0)/Se%1+1.000001)%1<2e-6?(Pe._minDtick=Se,Pe._forceTick0=ot):((Se/Pe._minDtick+1e-6)%1>2e-6||((ot-Pe._forceTick0)/Pe._minDtick%1+1.000001)%1>2e-6)&&(Pe._minDtick=0))},K.saveRangeInitial=function(Pe,Se){for(var ot=K.list(Pe,"",!0),ct=!1,pt=0;pt<ot.length;pt++){var St=ot[pt],xt=St._rangeInitial===void 0,Pt=xt||!(St.range[0]===St._rangeInitial[0]&&St.range[1]===St._rangeInitial[1]);(xt&&St.autorange===!1||Se&&Pt)&&(St._rangeInitial=St.range.slice(),ct=!0)}return ct},K.saveShowSpikeInitial=function(Pe,Se){for(var ot=K.list(Pe,"",!0),ct=!1,pt="on",St=0;St<ot.length;St++){var xt=ot[St],Pt=xt._showSpikeInitial===void 0,Xt=Pt||xt.showspikes!==xt._showspikes;(Pt||Se&&Xt)&&(xt._showSpikeInitial=xt.showspikes,ct=!0),pt==="on"&&!xt.showspikes&&(pt="off")}return Pe._fullLayout._cartesianSpikesEnabled=pt,ct},K.autoBin=function(Pe,Se,ot,ct,pt,St){var xt=e.aggNums(Math.min,null,Pe),Pt=e.aggNums(Math.max,null,Pe);if(Se.type==="category"||Se.type==="multicategory")return{start:xt-.5,end:Pt+.5,size:Math.max(1,Math.round(St)||1),_dataSpan:Pt-xt};pt||(pt=Se.calendar);var Xt;if(Se.type==="log"?Xt={type:"linear",range:[xt,Pt]}:Xt={type:Se.type,range:e.simpleMap([xt,Pt],Se.c2r,0,pt),calendar:pt},K.setConvert(Xt),St=St&&o.dtick(St,Xt.type),St)Xt.dtick=St,Xt.tick0=o.tick0(void 0,Xt.type,pt);else{var or;if(ot)or=(Pt-xt)/ot;else{var Pr=e.distinctVals(Pe),Ar=Math.pow(10,Math.floor(Math.log(Pr.minDiff)/Math.LN10)),Er=Ar*e.roundUp(Pr.minDiff/Ar,[.9,1.9,4.9,9.9],!0);or=Math.max(Er,2*e.stdev(Pe)/Math.pow(Pe.length,ct?.25:.4)),u(or)||(or=1)}K.autoTicks(Xt,or)}var $r=Xt.dtick,lr=K.tickIncrement(K.tickFirst(Xt),$r,"reverse",pt),br,Fr;if(typeof $r=="number")lr=le(lr,Pe,Xt,xt,Pt),Fr=1+Math.floor((Pt-lr)/$r),br=lr+Fr*$r;else for(Xt.dtick.charAt(0)==="M"&&(lr=_e(lr,Pe,$r,xt,pt)),br=lr,Fr=0;br<=Pt;)br=K.tickIncrement(br,$r,!1,pt),Fr++;return{start:Se.c2r(lr,0,pt),end:Se.c2r(br,0,pt),size:$r,_dataSpan:Pt-xt}};function le(Pe,Se,ot,ct,pt){var St=0,xt=0,Pt=0,Xt=0;function or($r){return(1+($r-Pe)*100/ot.dtick)%100<2}for(var Pr=0;Pr<Se.length;Pr++)Se[Pr]%1===0?Pt++:u(Se[Pr])||Xt++,or(Se[Pr])&&St++,or(Se[Pr]+ot.dtick/2)&&xt++;var Ar=Se.length-Xt;if(Pt===Ar&&ot.type!=="date")ot.dtick<1?Pe=ct-.5*ot.dtick:(Pe-=.5,Pe+ot.dtick<ct&&(Pe+=ot.dtick));else if(xt<Ar*.1&&(St>Ar*.3||or(ct)||or(pt))){var Er=ot.dtick/2;Pe+=Pe+Er<ct?Er:-Er}return Pe}function _e(Pe,Se,ot,ct,pt){var St=e.findExactDates(Se,pt),xt=.8;if(St.exactDays>xt){var Pt=Number(ot.substr(1));St.exactYears>xt&&Pt%12===0?Pe=K.tickIncrement(Pe,"M6","reverse")+_*1.5:St.exactMonths>xt?Pe=K.tickIncrement(Pe,"M1","reverse")+_*15.5:Pe-=h;var Xt=K.tickIncrement(Pe,ot);if(Xt<=ct)return Xt}return Pe}K.prepMinorTicks=function(Pe,Se,ot){if(!Se.minor.dtick){delete Pe.dtick;var ct=Se.dtick&&u(Se._tmin),pt;if(ct){var St=K.tickIncrement(Se._tmin,Se.dtick,!0);pt=[Se._tmin,St*.99+Se._tmin*.01]}else{var xt=e.simpleMap(Se.range,Se.r2l);pt=[xt[0],.8*xt[0]+.2*xt[1]]}if(Pe.range=e.simpleMap(pt,Se.l2r),Pe._isMinor=!0,K.prepTicks(Pe,ot),ct){var Pt=u(Se.dtick),Xt=u(Pe.dtick),or=Pt?Se.dtick:+Se.dtick.substring(1),Pr=Xt?Pe.dtick:+Pe.dtick.substring(1);Pt&&Xt?fe(or,Pr)?or===2*p&&Pr===2*_&&(Pe.dtick=p):or===2*p&&Pr===3*_?Pe.dtick=p:or===p&&!(Se._input.minor||{}).nticks?Pe.dtick=_:me(or/Pr,2.5)?Pe.dtick=or/2:Pe.dtick=or:String(Se.dtick).charAt(0)==="M"?Xt?Pe.dtick="M1":fe(or,Pr)?or>=12&&Pr===2&&(Pe.dtick="M3"):Pe.dtick=Se.dtick:String(Pe.dtick).charAt(0)==="L"?String(Se.dtick).charAt(0)==="L"?fe(or,Pr)||(Pe.dtick=me(or/Pr,2.5)?Se.dtick/2:Se.dtick):Pe.dtick="D1":Pe.dtick==="D2"&&+Se.dtick>1&&(Pe.dtick=1)}Pe.range=Se.range}Se.minor._tick0Init===void 0&&(Pe.tick0=Se.tick0)};function fe(Pe,Se){return Math.abs((Pe/Se+.5)%1-.5)<.001}function me(Pe,Se){return Math.abs(Pe/Se-1)<.001}K.prepTicks=function(Pe,Se){var ot=e.simpleMap(Pe.range,Pe.r2l,void 0,void 0,Se);if(Pe.tickmode==="auto"||!Pe.dtick){var ct=Pe.nticks,pt;ct||(Pe.type==="category"||Pe.type==="multicategory"?(pt=Pe.tickfont?e.bigFont(Pe.tickfont.size||12):15,ct=Pe._length/pt):(pt=Pe._id.charAt(0)==="y"?40:80,ct=e.constrain(Pe._length/pt,4,9)+1),Pe._name==="radialaxis"&&(ct*=2)),Pe.minor&&Pe.minor.tickmode!=="array"||Pe.tickmode==="array"&&(ct*=100),Pe._roughDTick=Math.abs(ot[1]-ot[0])/ct,K.autoTicks(Pe,Pe._roughDTick),Pe._minDtick>0&&Pe.dtick<Pe._minDtick*2&&(Pe.dtick=Pe._minDtick,Pe.tick0=Pe.l2r(Pe._forceTick0))}Pe.ticklabelmode==="period"&&ye(Pe),Pe.tick0||(Pe.tick0=Pe.type==="date"?"2000-01-01":0),Pe.type==="date"&&Pe.dtick<.1&&(Pe.dtick=.1),Ve(Pe)};function xe(Pe){return+Pe.substring(1)}function ye(Pe){var Se;function ot(){return!(u(Pe.dtick)||Pe.dtick.charAt(0)!=="M")}var ct=ot(),pt=K.getTickFormat(Pe);if(pt){var St=Pe._dtickInit!==Pe.dtick;/%[fLQsSMX]/.test(pt)||(/%[HI]/.test(pt)?(Se=L,St&&!ct&&Pe.dtick<L&&(Pe.dtick=L)):/%p/.test(pt)?(Se=h,St&&!ct&&Pe.dtick<h&&(Pe.dtick=h)):/%[Aadejuwx]/.test(pt)?(Se=_,St&&!ct&&Pe.dtick<_&&(Pe.dtick=_)):/%[UVW]/.test(pt)?(Se=p,St&&!ct&&Pe.dtick<p&&(Pe.dtick=p)):/%[Bbm]/.test(pt)?(Se=M,St&&(ct?xe(Pe.dtick)<1:Pe.dtick<w)&&(Pe.dtick="M1")):/%[q]/.test(pt)?(Se=l,St&&(ct?xe(Pe.dtick)<3:Pe.dtick<x)&&(Pe.dtick="M3")):/%[Yy]/.test(pt)&&(Se=d,St&&(ct?xe(Pe.dtick)<12:Pe.dtick<f)&&(Pe.dtick="M12")))}ct=ot(),ct&&Pe.tick0===Pe._dowTick0&&(Pe.tick0=Pe._rawTick0),Pe._definedDelta=Se}function be(Pe,Se,ot){for(var ct=0;ct<Pe.length;ct++){var pt=Pe[ct].value,St=ct,xt=ct+1;ct<Pe.length-1?(St=ct,xt=ct+1):ct>0?(St=ct-1,xt=ct):(St=ct,xt=ct);var Pt=Pe[St].value,Xt=Pe[xt].value,or=Math.abs(Xt-Pt),Pr=ot||or,Ar=0;Pr>=f?or>=f&&or<=g?Ar=or:Ar=d:ot===l&&Pr>=x?or>=x&&or<=y?Ar=or:Ar=l:Pr>=w?or>=w&&or<=c?Ar=or:Ar=M:ot===p&&Pr>=p?Ar=p:Pr>=_?Ar=_:ot===h&&Pr>=h?Ar=h:ot===L&&Pr>=L&&(Ar=L);var Er;Ar>=or&&(Ar=or,Er=!0);var $r=pt+Ar;if(Se.rangebreaks&&Ar>0){for(var lr=84,br=0,Fr=0;Fr<lr;Fr++){var Hr=(Fr+.5)/lr;Se.maskBreaks(pt*(1-Hr)+Hr*$r)!==F&&br++}Ar*=br/lr,Ar||(Pe[ct].drop=!0),Er&&or>p&&(Ar=or)}(Ar>0||ct===0)&&(Pe[ct].periodX=pt+Ar/2)}}K.calcTicks=function(Se,ot){for(var ct=Se.type,pt=Se.calendar,St=Se.ticklabelstep,xt=Se.ticklabelmode==="period",Pt=e.simpleMap(Se.range,Se.r2l,void 0,void 0,ot),Xt=Pt[1]<Pt[0],or=Math.min(Pt[0],Pt[1]),Pr=Math.max(Pt[0],Pt[1]),Ar=Math.max(1e3,Se._length||0),Er=[],$r=[],lr=[],br=[],Fr=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),Hr=1;Hr>=(Fr?0:1);Hr--){var Lr=!Hr;Hr?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var at=Hr?Se:e.extendFlat({},Se,Se.minor);if(Lr?K.prepMinorTicks(at,Se,ot):K.prepTicks(at,ot),at.tickmode==="array"){Hr?(lr=[],Er=ke(Se)):(br=[],$r=ke(Se));continue}var Rt=Q(Pt),Kt=Rt[0],ur=Rt[1],Nr=u(at.dtick),Vr=ct==="log"&&!(Nr||at.dtick.charAt(0)==="L"),Dr=K.tickFirst(at,ot);if(Hr){if(Se._tmin=Dr,Dr<Kt!==Xt)break;(ct==="category"||ct==="multicategory")&&(ur=Xt?Math.max(-.5,ur):Math.min(Se._categories.length-.5,ur))}var Mr=null,jr=Dr,kn;if(Hr){var mn;Nr?mn=Se.dtick:ct==="date"?typeof Se.dtick=="string"&&Se.dtick.charAt(0)==="M"&&(mn=M*Se.dtick.substring(1)):mn=Se._roughDTick,kn=Math.round((Se.r2l(jr)-Se.r2l(Se.tick0))/mn)-1}var Wn=at.dtick;for(at.rangebreaks&&at._tick0Init!==at.tick0&&(jr=ft(jr,Se),Xt||(jr=K.tickIncrement(jr,Wn,!Xt,pt))),Hr&&xt&&(jr=K.tickIncrement(jr,Wn,!Xt,pt),kn--);Xt?jr>=ur:jr<=ur;jr=K.tickIncrement(jr,Wn,Xt,pt)){if(Hr&&kn++,at.rangebreaks&&!Xt){if(jr<Kt)continue;if(at.maskBreaks(jr)===F&&ft(jr,at)>=Pr)break}if(lr.length>Ar||jr===Mr)break;Mr=jr;var In={value:jr};Hr?(Vr&&jr!==(jr|0)&&(In.simpleLabel=!0),St>1&&kn%St&&(In.skipLabel=!0),lr.push(In)):(In.minor=!0,br.push(In))}}if(Fr){var Jn=Se.minor.ticks==="inside"&&Se.ticks==="outside"||Se.minor.ticks==="outside"&&Se.ticks==="inside";if(!Jn){for(var Kn=lr.map(function(Yt){return Yt.value}),ma=[],Ra=0;Ra<br.length;Ra++){var _i=br[Ra],Ka=_i.value;if(Kn.indexOf(Ka)===-1){for(var ri=!1,ei=0;!ri&&ei<lr.length;ei++)1e7+lr[ei].value===1e7+Ka&&(ri=!0);ri||ma.push(_i)}}br=ma}}xt&&be(lr,Se,Se._definedDelta);var kr;if(Se.rangebreaks){var bn=Se._id.charAt(0)==="y",dn=1;Se.tickmode==="auto"&&(dn=Se.tickfont?Se.tickfont.size:12);var Ln=NaN;for(kr=lr.length-1;kr>-1;kr--){if(lr[kr].drop){lr.splice(kr,1);continue}lr[kr].value=ft(lr[kr].value,Se);var ra=Se.c2p(lr[kr].value);(bn?Ln>ra-dn:Ln<ra+dn)?lr.splice(Xt?kr+1:kr,1):Ln=ra}}lt(Se)&&Math.abs(Pt[1]-Pt[0])===360&&lr.pop(),Se._tmax=(lr[lr.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var ya,sa=function(Yt){Yt.text="",Se._prevDateHead=ya};lr=lr.concat(br);var Bn,Qn;for(kr=0;kr<lr.length;kr++){var Xa=lr[kr].minor,mi=lr[kr].value;Xa?$r.push({x:mi,minor:!0}):(ya=Se._prevDateHead,Bn=K.tickText(Se,mi,!1,lr[kr].simpleLabel),Qn=lr[kr].periodX,Qn!==void 0&&(Bn.periodX=Qn,(Qn>Pr||Qn<or)&&(Qn>Pr&&(Bn.periodX=Pr),Qn<or&&(Bn.periodX=or),sa(Bn))),lr[kr].skipLabel&&sa(Bn),Er.push(Bn))}return Er=Er.concat($r),Se._inCalcTicks=!1,xt&&Er.length&&(Er[0].noTick=!0),Er};function ke(Pe){var Se=e.simpleMap(Pe.range,Pe.r2l),ot=Q(Se),ct=Math.min(ot[0],ot[1]),pt=Math.max(ot[0],ot[1]),St=Pe.type==="category"?Pe.d2l_noadd:Pe.d2l;Pe.type==="log"&&String(Pe.dtick).charAt(0)!=="L"&&(Pe.dtick="L"+Math.pow(10,Math.floor(Math.min(Pe.range[0],Pe.range[1]))-1));for(var xt=[],Pt=0;Pt<=1;Pt++)if(!(Pt&&!Pe.minor)){var Xt=Pt?Pe.minor.tickvals:Pe.tickvals,or=Pt?[]:Pe.ticktext;if(!!Xt){Array.isArray(or)||(or=[]);for(var Pr=0;Pr<Xt.length;Pr++){var Ar=St(Xt[Pr]);if(Ar>ct&&Ar<pt){var Er=or[Pr]===void 0?K.tickText(Pe,Ar):dt(Pe,Ar,String(or[Pr]));Pt&&(Er.minor=!0,Er.text=""),xt.push(Er)}}}}return Pe.rangebreaks&&(xt=xt.filter(function($r){return Pe.maskBreaks($r.x)!==F})),xt}var De=[2,5,10],He=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Le=[1,2,3,7,14],Ze=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],We=[-.301,0,.301,.699,1],ze=[15,30,45,90,180];function Ie(Pe,Se,ot){return Se*e.roundUp(Pe/Se,ot)}K.autoTicks=function(Pe,Se,ot){var ct;function pt(Ar){return Math.pow(Ar,Math.floor(Math.log(Se)/Math.LN10))}if(Pe.type==="date"){Pe.tick0=e.dateTick0(Pe.calendar,0);var St=2*Se;if(St>d)Se/=d,ct=pt(10),Pe.dtick="M"+12*Ie(Se,ct,De);else if(St>M)Se/=M,Pe.dtick="M"+Ie(Se,1,He);else if(St>_){if(Pe.dtick=Ie(Se,_,Pe._hasDayOfWeekBreaks?[1,2,7,14]:Le),!ot){var xt=K.getTickFormat(Pe),Pt=Pe.ticklabelmode==="period";Pt&&(Pe._rawTick0=Pe.tick0),/%[uVW]/.test(xt)?Pe.tick0=e.dateTick0(Pe.calendar,2):Pe.tick0=e.dateTick0(Pe.calendar,1),Pt&&(Pe._dowTick0=Pe.tick0)}}else St>L?Pe.dtick=Ie(Se,L,He):St>E?Pe.dtick=Ie(Se,E,Ae):St>S?Pe.dtick=Ie(Se,S,Ae):(ct=pt(10),Pe.dtick=Ie(Se,ct,De))}else if(Pe.type==="log"){Pe.tick0=0;var Xt=e.simpleMap(Pe.range,Pe.r2l);if(Pe._isMinor&&(Se*=1.5),Se>.7)Pe.dtick=Math.ceil(Se);else if(Math.abs(Xt[1]-Xt[0])<1){var or=1.5*Math.abs((Xt[1]-Xt[0])/Se);Se=Math.abs(Math.pow(10,Xt[1])-Math.pow(10,Xt[0]))/or,ct=pt(10),Pe.dtick="L"+Ie(Se,ct,De)}else Pe.dtick=Se>.3?"D2":"D1"}else Pe.type==="category"||Pe.type==="multicategory"?(Pe.tick0=0,Pe.dtick=Math.ceil(Math.max(Se,1))):lt(Pe)?(Pe.tick0=0,ct=1,Pe.dtick=Ie(Se,ct,ze)):(Pe.tick0=0,ct=pt(10),Pe.dtick=Ie(Se,ct,De));if(Pe.dtick===0&&(Pe.dtick=1),!u(Pe.dtick)&&typeof Pe.dtick!="string"){var Pr=Pe.dtick;throw Pe.dtick=1,"ax.dtick error: "+String(Pr)}};function Ve(Pe){var Se=Pe.dtick;if(Pe._tickexponent=0,!u(Se)&&typeof Se!="string"&&(Se=1),(Pe.type==="category"||Pe.type==="multicategory")&&(Pe._tickround=null),Pe.type==="date"){var ot=Pe.r2l(Pe.tick0),ct=Pe.l2r(ot).replace(/(^-|i)/g,""),pt=ct.length;if(String(Se).charAt(0)==="M")pt>10||ct.substr(5)!=="01-01"?Pe._tickround="d":Pe._tickround=+Se.substr(1)%12===0?"y":"m";else if(Se>=_&&pt<=10||Se>=_*15)Pe._tickround="d";else if(Se>=E&&pt<=16||Se>=L)Pe._tickround="M";else if(Se>=S&&pt<=19||Se>=E)Pe._tickround="S";else{var St=Pe.l2r(ot+Se).replace(/^-/,"").length;Pe._tickround=Math.max(pt,St)-20,Pe._tickround<0&&(Pe._tickround=4)}}else if(u(Se)||Se.charAt(0)==="L"){var xt=Pe.range.map(Pe.r2d||Number);u(Se)||(Se=Number(Se.substr(1))),Pe._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var Pt=Math.max(Math.abs(xt[0]),Math.abs(xt[1])),Xt=Math.floor(Math.log(Pt)/Math.LN10+.01),or=Pe.minexponent===void 0?3:Pe.minexponent;Math.abs(Xt)>or&&(it(Pe.exponentformat)&&!Ye(Xt)?Pe._tickexponent=3*Math.round((Xt-1)/3):Pe._tickexponent=Xt)}else Pe._tickround=null}K.tickIncrement=function(Pe,Se,ot,ct){var pt=ot?-1:1;if(u(Se))return e.increment(Pe,pt*Se);var St=Se.charAt(0),xt=pt*Number(Se.substr(1));if(St==="M")return e.incrementMonth(Pe,xt,ct);if(St==="L")return Math.log(Math.pow(10,Pe)+xt)/Math.LN10;if(St==="D"){var Pt=Se==="D2"?We:Ze,Xt=Pe+pt*.01,or=e.roundUp(e.mod(Xt,1),Pt,ot);return Math.floor(Xt)+Math.log(m.round(Math.pow(10,or),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},K.tickFirst=function(Pe,Se){var ot=Pe.r2l||Number,ct=e.simpleMap(Pe.range,ot,void 0,void 0,Se),pt=ct[1]<ct[0],St=pt?Math.floor:Math.ceil,xt=Q(ct)[0],Pt=Pe.dtick,Xt=ot(Pe.tick0);if(u(Pt)){var or=St((xt-Xt)/Pt)*Pt+Xt;return(Pe.type==="category"||Pe.type==="multicategory")&&(or=e.constrain(or,0,Pe._categories.length-1)),or}var Pr=Pt.charAt(0),Ar=Number(Pt.substr(1));if(Pr==="M"){for(var Er=0,$r=Xt,lr,br,Fr;Er<10;){if(lr=K.tickIncrement($r,Pt,pt,Pe.calendar),(lr-xt)*($r-xt)<=0)return pt?Math.min($r,lr):Math.max($r,lr);br=(xt-($r+lr)/2)/(lr-$r),Fr=Pr+(Math.abs(Math.round(br))||1)*Ar,$r=K.tickIncrement($r,Fr,br<0?!pt:pt,Pe.calendar),Er++}return e.error("tickFirst did not converge",Pe),$r}else{if(Pr==="L")return Math.log(St((Math.pow(10,xt)-Xt)/Ar)*Ar+Xt)/Math.LN10;if(Pr==="D"){var Hr=Pt==="D2"?We:Ze,Lr=e.roundUp(e.mod(xt,1),Hr,pt);return Math.floor(xt)+Math.log(m.round(Math.pow(10,Lr),1))/Math.LN10}else throw"unrecognized dtick "+String(Pt)}},K.tickText=function(Pe,Se,ot,ct){var pt=dt(Pe,Se),St=Pe.tickmode==="array",xt=ot||St,Pt=Pe.type,Xt=Pt==="category"?Pe.d2l_noadd:Pe.d2l,or;if(St&&Array.isArray(Pe.ticktext)){var Pr=e.simpleMap(Pe.range,Pe.r2l),Ar=(Math.abs(Pr[1]-Pr[0])-(Pe._lBreaks||0))/1e4;for(or=0;or<Pe.ticktext.length&&!(Math.abs(Se-Xt(Pe.tickvals[or]))<Ar);or++);if(or<Pe.ticktext.length)return pt.text=String(Pe.ticktext[or]),pt}function Er(br){if(br===void 0)return!0;if(ot)return br==="none";var Fr={first:Pe._tmin,last:Pe._tmax}[br];return br!=="all"&&Se!==Fr}var $r=ot?"never":Pe.exponentformat!=="none"&&Er(Pe.showexponent)?"hide":"";if(Pt==="date"?Ft(Pe,pt,ot,xt):Pt==="log"?Qt(Pe,pt,ot,xt,$r):Pt==="category"?Ot(Pe,pt):Pt==="multicategory"?Ct(Pe,pt,ot):lt(Pe)?Nt(Pe,pt,ot,xt,$r):jt(Pe,pt,ot,xt,$r),ct||(Pe.tickprefix&&!Er(Pe.showtickprefix)&&(pt.text=Pe.tickprefix+pt.text),Pe.ticksuffix&&!Er(Pe.showticksuffix)&&(pt.text+=Pe.ticksuffix)),Pe.tickson==="boundaries"||Pe.showdividers){var lr=function(br){var Fr=Pe.l2p(br);return Fr>=0&&Fr<=Pe._length?br:null};pt.xbnd=[lr(pt.x-.5),lr(pt.x+Pe.dtick-.5)]}return pt},K.hoverLabelText=function(Pe,Se,ot){ot&&(Pe=e.extendFlat({},Pe,{hoverformat:ot}));var ct=Array.isArray(Se)?Se[0]:Se,pt=Array.isArray(Se)?Se[1]:void 0;if(pt!==void 0&&pt!==ct)return K.hoverLabelText(Pe,ct,ot)+" - "+K.hoverLabelText(Pe,pt,ot);var St=Pe.type==="log"&&ct<=0,xt=K.tickText(Pe,Pe.c2l(St?-ct:ct),"hover").text;return St?ct===0?"0":P+xt:xt};function dt(Pe,Se,ot){var ct=Pe.tickfont||{};return{x:Se,dx:0,dy:0,text:ot||"",fontSize:ct.size,font:ct.family,fontColor:ct.color}}function Ft(Pe,Se,ot,ct){var pt=Pe._tickround,St=ot&&Pe.hoverformat||K.getTickFormat(Pe);ct&&(u(pt)?pt=4:pt={y:"m",m:"d",d:"M",M:"S",S:4}[pt]);var xt=e.formatDate(Se.x,St,pt,Pe._dateFormat,Pe.calendar,Pe._extraFormat),Pt,Xt=xt.indexOf(`
`);if(Xt!==-1&&(Pt=xt.substr(Xt+1),xt=xt.substr(0,Xt)),ct&&(xt==="00:00:00"||xt==="00:00"?(xt=Pt,Pt=""):xt.length===8&&(xt=xt.replace(/:00$/,""))),Pt)if(ot)pt==="d"?xt+=", "+Pt:xt=Pt+(xt?", "+xt:"");else if(!Pe._inCalcTicks||Pe._prevDateHead!==Pt)Pe._prevDateHead=Pt,xt+="<br>"+Pt;else{var or=Et(Pe),Pr=Pe._trueSide||Pe.side;(!or&&Pr==="top"||or&&Pr==="bottom")&&(xt+="<br> ")}Se.text=xt}function Qt(Pe,Se,ot,ct,pt){var St=Pe.dtick,xt=Se.x,Pt=Pe.tickformat,Xt=typeof St=="string"&&St.charAt(0);if(pt==="never"&&(pt=""),ct&&Xt!=="L"&&(St="L3",Xt="L"),Pt||Xt==="L")Se.text=Ee(Math.pow(10,xt),Pe,pt,ct);else if(u(St)||Xt==="D"&&e.mod(xt+.01,1)<.1){var or=Math.round(xt),Pr=Math.abs(or),Ar=Pe.exponentformat;Ar==="power"||it(Ar)&&Ye(or)?(or===0?Se.text=1:or===1?Se.text="10":Se.text="10<sup>"+(or>1?"":P)+Pr+"</sup>",Se.fontSize*=1.25):(Ar==="e"||Ar==="E")&&Pr>2?Se.text="1"+Ar+(or>0?"+":P)+Pr:(Se.text=Ee(Math.pow(10,xt),Pe,"","fakehover"),St==="D1"&&Pe._id.charAt(0)==="y"&&(Se.dy-=Se.fontSize/6))}else if(Xt==="D")Se.text=String(Math.round(Math.pow(10,e.mod(xt,1)))),Se.fontSize*=.75;else throw"unrecognized dtick "+String(St);if(Pe.dtick==="D1"){var Er=String(Se.text).charAt(0);(Er==="0"||Er==="1")&&(Pe._id.charAt(0)==="y"?Se.dx-=Se.fontSize/4:(Se.dy+=Se.fontSize/2,Se.dx+=(Pe.range[1]>Pe.range[0]?1:-1)*Se.fontSize*(xt<0?.5:.25)))}}function Ot(Pe,Se){var ot=Pe._categories[Math.round(Se.x)];ot===void 0&&(ot=""),Se.text=String(ot)}function Ct(Pe,Se,ot){var ct=Math.round(Se.x),pt=Pe._categories[ct]||[],St=pt[1]===void 0?"":String(pt[1]),xt=pt[0]===void 0?"":String(pt[0]);ot?Se.text=xt+" - "+St:(Se.text=St,Se.text2=xt)}function jt(Pe,Se,ot,ct,pt){pt==="never"?pt="":Pe.showexponent==="all"&&Math.abs(Se.x/Pe.dtick)<1e-6&&(pt="hide"),Se.text=Ee(Se.x,Pe,pt,ct)}function Nt(Pe,Se,ot,ct,pt){if(Pe.thetaunit==="radians"&&!ot){var St=Se.x/180;if(St===0)Se.text="0";else{var xt=Lt(St);if(xt[1]>=100)Se.text=Ee(e.deg2rad(Se.x),Pe,pt,ct);else{var Pt=Se.x<0;xt[1]===1?xt[0]===1?Se.text="\u03C0":Se.text=xt[0]+"\u03C0":Se.text=["<sup>",xt[0],"</sup>","\u2044","<sub>",xt[1],"</sub>","\u03C0"].join(""),Pt&&(Se.text=P+Se.text)}}}else Se.text=Ee(Se.x,Pe,pt,ct)}function Lt(Pe){function Se(Pt,Xt){return Math.abs(Pt-Xt)<=1e-6}function ot(Pt,Xt){return Se(Xt,0)?Pt:ot(Xt,Pt%Xt)}function ct(Pt){for(var Xt=1;!Se(Math.round(Pt*Xt)/Xt,Pt);)Xt*=10;return Xt}var pt=ct(Pe),St=Pe*pt,xt=Math.abs(ot(St,pt));return[Math.round(St/xt),Math.round(pt/xt)]}var Xe=["f","p","n","\u03BC","m","","k","M","G","T"];function it(Pe){return Pe==="SI"||Pe==="B"}function Ye(Pe){return Pe>14||Pe<-15}function Ee(Pe,Se,ot,ct){var pt=Pe<0,St=Se._tickround,xt=ot||Se.exponentformat||"B",Pt=Se._tickexponent,Xt=K.getTickFormat(Se),or=Se.separatethousands;if(ct){var Pr={exponentformat:xt,minexponent:Se.minexponent,dtick:Se.showexponent==="none"?Se.dtick:u(Pe)&&Math.abs(Pe)||1,range:Se.showexponent==="none"?Se.range.map(Se.r2d):[0,Pe||1]};Ve(Pr),St=(Number(Pr._tickround)||0)+4,Pt=Pr._tickexponent,Se.hoverformat&&(Xt=Se.hoverformat)}if(Xt)return Se._numFormat(Xt)(Pe).replace(/-/g,P);var Ar=Math.pow(10,-St)/2;if(xt==="none"&&(Pt=0),Pe=Math.abs(Pe),Pe<Ar)Pe="0",pt=!1;else{if(Pe+=Ar,Pt&&(Pe*=Math.pow(10,-Pt),St+=Pt),St===0)Pe=String(Math.floor(Pe));else if(St<0){Pe=String(Math.round(Pe)),Pe=Pe.substr(0,Pe.length+St);for(var Er=St;Er<0;Er++)Pe+="0"}else{Pe=String(Pe);var $r=Pe.indexOf(".")+1;$r&&(Pe=Pe.substr(0,$r+St).replace(/\.?0+$/,""))}Pe=e.numSeparate(Pe,Se._separators,or)}if(Pt&&xt!=="hide"){it(xt)&&Ye(Pt)&&(xt="power");var lr;Pt<0?lr=P+-Pt:xt!=="power"?lr="+"+Pt:lr=String(Pt),xt==="e"||xt==="E"?Pe+=xt+lr:xt==="power"?Pe+="\xD710<sup>"+lr+"</sup>":xt==="B"&&Pt===9?Pe+="B":it(xt)&&(Pe+=Xe[Pt/3+5])}return pt?P+Pe:Pe}K.getTickFormat=function(Pe){var Se;function ot(Xt){return typeof Xt!="string"?Xt:Number(Xt.replace("M",""))*M}function ct(Xt,or){var Pr=["L","D"];if(typeof Xt==typeof or){if(typeof Xt=="number")return Xt-or;var Ar=Pr.indexOf(Xt.charAt(0)),Er=Pr.indexOf(or.charAt(0));return Ar===Er?Number(Xt.replace(/(L|D)/g,""))-Number(or.replace(/(L|D)/g,"")):Ar-Er}else return typeof Xt=="number"?1:-1}function pt(Xt,or,Pr){var Ar=Pr||function(lr){return lr},Er=or[0],$r=or[1];return(!Er&&typeof Er!="number"||Ar(Er)<=Ar(Xt))&&(!$r&&typeof $r!="number"||Ar($r)>=Ar(Xt))}function St(Xt,or){var Pr=or[0]===null,Ar=or[1]===null,Er=ct(Xt,or[0])>=0,$r=ct(Xt,or[1])<=0;return(Pr||Er)&&(Ar||$r)}var xt,Pt;if(Pe.tickformatstops&&Pe.tickformatstops.length>0)switch(Pe.type){case"date":case"linear":{for(Se=0;Se<Pe.tickformatstops.length;Se++)if(Pt=Pe.tickformatstops[Se],Pt.enabled&&pt(Pe.dtick,Pt.dtickrange,ot)){xt=Pt;break}break}case"log":{for(Se=0;Se<Pe.tickformatstops.length;Se++)if(Pt=Pe.tickformatstops[Se],Pt.enabled&&St(Pe.dtick,Pt.dtickrange)){xt=Pt;break}break}}return xt?xt.value:Pe.tickformat},K.getSubplots=function(Pe,Se){var ot=Pe._fullLayout._subplots,ct=ot.cartesian.concat(ot.gl2d||[]),pt=Se?K.findSubplotsWithAxis(ct,Se):ct;return pt.sort(function(St,xt){var Pt=St.substr(1).split("y"),Xt=xt.substr(1).split("y");return Pt[0]===Xt[0]?+Pt[1]-+Xt[1]:+Pt[0]-+Xt[0]}),pt},K.findSubplotsWithAxis=function(Pe,Se){for(var ot=new RegExp(Se._id.charAt(0)==="x"?"^"+Se._id+"y":Se._id+"$"),ct=[],pt=0;pt<Pe.length;pt++){var St=Pe[pt];ot.test(St)&&ct.push(St)}return ct},K.makeClipPaths=function(Pe){var Se=Pe._fullLayout;if(!Se._hasOnlyLargeSploms){var ot={_offset:0,_length:Se.width,_id:""},ct={_offset:0,_length:Se.height,_id:""},pt=K.list(Pe,"x",!0),St=K.list(Pe,"y",!0),xt=[],Pt,Xt;for(Pt=0;Pt<pt.length;Pt++)for(xt.push({x:pt[Pt],y:ct}),Xt=0;Xt<St.length;Xt++)Pt===0&&xt.push({x:ot,y:St[Xt]}),xt.push({x:pt[Pt],y:St[Xt]});var or=Se._clips.selectAll(".axesclip").data(xt,function(Pr){return Pr.x._id+Pr.y._id});or.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Pr){return"clip"+Se._uid+Pr.x._id+Pr.y._id}).append("rect"),or.exit().remove(),or.each(function(Pr){m.select(this).select("rect").attr({x:Pr.x._offset||0,y:Pr.y._offset||0,width:Pr.x._length||1,height:Pr.y._length||1})})}},K.draw=function(Pe,Se,ot){var ct=Pe._fullLayout;Se==="redraw"&&ct._paper.selectAll("g.subplot").each(function(St){var xt=St[0],Pt=ct._plots[xt];if(Pt){var Xt=Pt.xaxis,or=Pt.yaxis;Pt.xaxislayer.selectAll("."+Xt._id+"tick").remove(),Pt.yaxislayer.selectAll("."+or._id+"tick").remove(),Pt.xaxislayer.selectAll("."+Xt._id+"tick2").remove(),Pt.yaxislayer.selectAll("."+or._id+"tick2").remove(),Pt.xaxislayer.selectAll("."+Xt._id+"divider").remove(),Pt.yaxislayer.selectAll("."+or._id+"divider").remove(),Pt.minorGridlayer&&Pt.minorGridlayer.selectAll("path").remove(),Pt.gridlayer&&Pt.gridlayer.selectAll("path").remove(),Pt.zerolinelayer&&Pt.zerolinelayer.selectAll("path").remove(),ct._infolayer.select(".g-"+Xt._id+"title").remove(),ct._infolayer.select(".g-"+or._id+"title").remove()}});var pt=!Se||Se==="redraw"?K.listIds(Pe):Se;return e.syncOrAsync(pt.map(function(St){return function(){if(!!St){var xt=K.getFromId(Pe,St),Pt=K.drawOne(Pe,xt,ot);return xt._r=xt.range.slice(),xt._rl=e.simpleMap(xt._r,xt.r2l),Pt}}}))},K.drawOne=function(Pe,Se,ot){ot=ot||{};var ct,pt,St;Se.setScale();var xt=Pe._fullLayout,Pt=Se._id,Xt=Pt.charAt(0),or=K.counterLetter(Pt),Pr=xt._plots[Se._mainSubplot];if(!Pr)return;var Ar=Pr[Xt+"axislayer"],Er=Se._mainLinePosition,$r=Se._mainMirrorPosition,lr=Se._vals=K.calcTicks(Se),br=[Se.mirror,Er,$r].join("_");for(ct=0;ct<lr.length;ct++)lr[ct].axInfo=br;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var Fr={};function Hr(Yt){var gr=Pt+(Yt||"tick");return Fr[gr]||(Fr[gr]=yt(Se,gr)),Fr[gr]}if(!!Se.visible){var Lr=K.makeTransTickFn(Se),at=K.makeTransTickLabelFn(Se),Rt,Kt,ur=Se.ticks==="inside",Nr=Se.ticks==="outside";if(Se.tickson==="boundaries"){var Vr=Ke(Se,lr);Kt=K.clipEnds(Se,Vr),Rt=ur?Kt:Vr}else Kt=K.clipEnds(Se,lr),Rt=ur&&Se.ticklabelmode!=="period"?Kt:lr;var Dr=Se._gridVals=Kt,Mr=At(Se,lr);if(!xt._hasOnlyLargeSploms){var jr=Se._subplotsWith,kn={};for(ct=0;ct<jr.length;ct++){pt=jr[ct],St=xt._plots[pt];var mn=St[or+"axis"],Wn=mn._mainAxis._id;if(!kn[Wn]){kn[Wn]=1;var In=Xt==="x"?"M0,"+mn._offset+"v"+mn._length:"M"+mn._offset+",0h"+mn._length;K.drawGrid(Pe,Se,{vals:Dr,counterAxis:mn,layer:St.gridlayer.select("."+Pt),minorLayer:St.minorGridlayer.select("."+Pt),path:In,transFn:Lr}),K.drawZeroLine(Pe,Se,{counterAxis:mn,layer:St.zerolinelayer,path:In,transFn:Lr})}}}var Jn,Kn=K.getTickSigns(Se),ma=K.getTickSigns(Se,"minor");if(Se.ticks||Se.minor&&Se.minor.ticks){var Ra=K.makeTickPath(Se,Er,Kn[2]),_i=K.makeTickPath(Se,Er,ma[2],{minor:!0}),Ka,ri,ei,kr;if(Se._anchorAxis&&Se.mirror&&Se.mirror!==!0?(Ka=K.makeTickPath(Se,$r,Kn[3]),ri=K.makeTickPath(Se,$r,ma[3],{minor:!0}),ei=Ra+Ka,kr=_i+ri):(Ka="",ri="",ei=Ra,kr=_i),Se.showdividers&&Nr&&Se.tickson==="boundaries"){var bn={};for(ct=0;ct<Mr.length;ct++)bn[Mr[ct].x]=1;Jn=function(Yt){return bn[Yt.x]?Ka:ei}}else Jn=function(Yt){return Yt.minor?kr:ei}}if(K.drawTicks(Pe,Se,{vals:Rt,layer:Ar,path:Jn,transFn:Lr}),Se.mirror==="allticks"){var dn=Object.keys(Se._linepositions||{});for(ct=0;ct<dn.length;ct++){pt=dn[ct],St=xt._plots[pt];var Ln=Se._linepositions[pt]||[],ra=Ln[0],ya=Ln[1],sa=Ln[2],Bn=K.makeTickPath(Se,ra,sa?Kn[0]:ma[0],{minor:sa})+K.makeTickPath(Se,ya,sa?Kn[1]:ma[1],{minor:sa});K.drawTicks(Pe,Se,{vals:Rt,layer:St[Xt+"axislayer"],path:Bn,transFn:Lr})}}var Qn=[];if(Qn.push(function(){return K.drawLabels(Pe,Se,{vals:lr,layer:Ar,plotinfo:St,transFn:at,labelFns:K.makeLabelFns(Se,Er)})}),Se.type==="multicategory"){var Xa={x:2,y:10}[Xt];Qn.push(function(){var Yt={x:"height",y:"width"}[Xt],gr=Hr()[Yt]+Xa+(Se._tickAngles[Pt+"tick"]?Se.tickfont.size*X:0);return K.drawLabels(Pe,Se,{vals:qe(Se,lr),layer:Ar,cls:Pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Lr,labelFns:K.makeLabelFns(Se,Er+gr*Kn[4])})}),Qn.push(function(){return Se._depth=Kn[4]*(Hr("tick2")[Se.side]-Er),Ht(Pe,Se,{vals:Mr,layer:Ar,path:K.makeTickPath(Se,Er,Kn[4],{len:Se._depth}),transFn:Lr})})}else Se.title.hasOwnProperty("standoff")&&Qn.push(function(){Se._depth=Kn[4]*(Hr()[Se.side]-Er)});var mi=T.getComponentMethod("rangeslider","isVisible")(Se);return Qn.push(function(){var Yt=Se.side.charAt(0),gr=ie[Se.side].charAt(0),un=K.getPxPosition(Pe,Se),yn=Nr?Se.ticklen:0,sn,Cn,Tn,gn;if((Se.automargin||mi)&&(Se.type==="multicategory"?sn=Hr("tick2"):(sn=Hr(),Xt==="x"&&Yt==="b"&&(Se._depth=Math.max(sn.width>0?sn.bottom-un:0,yn)))),Se.automargin){Cn={x:0,y:0,r:0,l:0,t:0,b:0};var _r=[0,1];if(Xt==="x"){if(Yt==="b"?Cn[Yt]=Se._depth:(Cn[Yt]=Se._depth=Math.max(sn.width>0?un-sn.top:0,yn),_r.reverse()),sn.width>0){var wr=sn.right-(Se._offset+Se._length);wr>0&&(Cn.xr=1,Cn.r=wr);var Br=Se._offset-sn.left;Br>0&&(Cn.xl=0,Cn.l=Br)}}else if(Yt==="l"?Cn[Yt]=Se._depth=Math.max(sn.height>0?un-sn.left:0,yn):(Cn[Yt]=Se._depth=Math.max(sn.height>0?sn.right-un:0,yn),_r.reverse()),sn.height>0){var An=sn.bottom-(Se._offset+Se._length);An>0&&(Cn.yb=0,Cn.b=An);var Yn=Se._offset-sn.top;Yn>0&&(Cn.yt=1,Cn.t=Yn)}Cn[or]=Se.anchor==="free"?Se.position:Se._anchorAxis.domain[_r[0]],Se.title.text!==xt._dfltTitle[Xt]&&(Cn[Yt]+=Zt(Se)+(Se.title.standoff||0)),Se.mirror&&Se.anchor!=="free"&&(Tn={x:0,y:0,r:0,l:0,t:0,b:0},Tn[gr]=Se.linewidth,Se.mirror&&Se.mirror!==!0&&(Tn[gr]+=yn),Se.mirror===!0||Se.mirror==="ticks"?Tn[or]=Se._anchorAxis.domain[_r[1]]:(Se.mirror==="all"||Se.mirror==="allticks")&&(Tn[or]=[Se._counterDomainMin,Se._counterDomainMax][_r[1]]))}mi&&(gn=T.getComponentMethod("rangeslider","autoMarginOpts")(Pe,Se)),typeof Se.automargin=="string"&&(Ge(Cn,Se.automargin),Ge(Tn,Se.automargin)),A.autoMargin(Pe,st(Se),Cn),A.autoMargin(Pe,rr(Se),Tn),A.autoMargin(Pe,Jt(Se),gn)}),!ot.skipTitle&&!(mi&&Se.side==="bottom")&&Qn.push(function(){return Wt(Pe,Se)}),e.syncOrAsync(Qn)}};function Ge(Pe,Se){if(!!Pe){var ot=Object.keys(G).reduce(function(ct,pt){return Se.indexOf(pt)!==-1&&G[pt].forEach(function(St){ct[St]=1}),ct},{});Object.keys(Pe).forEach(function(ct){ot[ct]||(ct.length===1?Pe[ct]=0:delete Pe[ct])})}}function Ke(Pe,Se){var ot=[],ct,pt=function(St,xt){var Pt=St.xbnd[xt];Pt!==null&&ot.push(e.extendFlat({},St,{x:Pt}))};if(Se.length){for(ct=0;ct<Se.length;ct++)pt(Se[ct],0);pt(Se[ct-1],1)}return ot}function qe(Pe,Se){for(var ot=[],ct={},pt=0;pt<Se.length;pt++){var St=Se[pt];ct[St.text2]?ct[St.text2].push(St.x):ct[St.text2]=[St.x]}for(var xt in ct)ot.push(dt(Pe,e.interp(ct[xt],.5),xt));return ot}function At(Pe,Se){var ot=[],ct,pt,St=Se.length&&Se[Se.length-1].x<Se[0].x,xt=function(Xt,or){var Pr=Xt.xbnd[or];Pr!==null&&ot.push(e.extendFlat({},Xt,{x:Pr}))};if(Pe.showdividers&&Se.length){for(ct=0;ct<Se.length;ct++){var Pt=Se[ct];Pt.text2!==pt&&xt(Pt,St?1:0),pt=Pt.text2}xt(Se[ct-1],St?0:1)}return ot}function yt(Pe,Se){var ot,ct,pt,St;return Pe._selections[Se].size()?(ot=1/0,ct=-1/0,pt=1/0,St=-1/0,Pe._selections[Se].each(function(){var xt=qr(this),Pt=v.bBox(xt.node().parentNode);ot=Math.min(ot,Pt.top),ct=Math.max(ct,Pt.bottom),pt=Math.min(pt,Pt.left),St=Math.max(St,Pt.right)})):(ot=0,ct=0,pt=0,St=0),{top:ot,bottom:ct,left:pt,right:St,height:ct-ot,width:St-pt}}K.getTickSigns=function(Pe,Se){var ot=Pe._id.charAt(0),ct={x:"top",y:"right"}[ot],pt=Pe.side===ct?1:-1,St=[-1,1,pt,-pt],xt=Se?(Pe.minor||{}).ticks:Pe.ticks;return xt!=="inside"==(ot==="x")&&(St=St.map(function(Pt){return-Pt})),Pe.side&&St.push({l:-1,t:-1,r:1,b:1}[Pe.side.charAt(0)]),St},K.makeTransTickFn=function(Pe){return Pe._id.charAt(0)==="x"?function(Se){return a(Pe._offset+Pe.l2p(Se.x),0)}:function(Se){return a(0,Pe._offset+Pe.l2p(Se.x))}},K.makeTransTickLabelFn=function(Pe){var Se=Gt(Pe),ot=Se[0],ct=Se[1];return Pe._id.charAt(0)==="x"?function(pt){return a(ot+Pe._offset+Pe.l2p(Mt(pt)),ct)}:function(pt){return a(ct,ot+Pe._offset+Pe.l2p(Mt(pt)))}};function Mt(Pe){return Pe.periodX!==void 0?Pe.periodX:Pe.x}function Gt(Pe){var Se=Pe.ticklabelposition||"",ot=function($r){return Se.indexOf($r)!==-1},ct=ot("top"),pt=ot("left"),St=ot("right"),xt=ot("bottom"),Pt=ot("inside"),Xt=xt||pt||ct||St;if(!Xt&&!Pt)return[0,0];var or=Pe.side,Pr=Xt?(Pe.tickwidth||0)/2:0,Ar=he,Er=Pe.tickfont?Pe.tickfont.size:12;return(xt||ct)&&(Pr+=Er*j,Ar+=(Pe.linewidth||0)/2),(pt||St)&&(Pr+=(Pe.linewidth||0)/2,Ar+=he),Pt&&or==="top"&&(Ar-=Er*(1-j)),(pt||ct)&&(Pr=-Pr),(or==="bottom"||or==="right")&&(Ar=-Ar),[Xt?Pr:0,Pt?Ar:0]}K.makeTickPath=function(Pe,Se,ot,ct){ct||(ct={});var pt=ct.minor;if(pt&&!Pe.minor)return"";var St=ct.len!==void 0?ct.len:pt?Pe.minor.ticklen:Pe.ticklen,xt=Pe._id.charAt(0),Pt=(Pe.linewidth||1)/2;return xt==="x"?"M0,"+(Se+Pt*ot)+"v"+St*ot:"M"+(Se+Pt*ot)+",0h"+St*ot},K.makeLabelFns=function(Pe,Se,ot){var ct=Pe.ticklabelposition||"",pt=function(kn){return ct.indexOf(kn)!==-1},St=pt("top"),xt=pt("left"),Pt=pt("right"),Xt=pt("bottom"),or=Xt||xt||St||Pt,Pr=pt("inside"),Ar=ct==="inside"&&Pe.ticks==="inside"||!Pr&&Pe.ticks==="outside"&&Pe.tickson!=="boundaries",Er=0,$r=0,lr=Ar?Pe.ticklen:0;if(Pr?lr*=-1:or&&(lr=0),Ar&&(Er+=lr,ot)){var br=e.deg2rad(ot);Er=lr*Math.cos(br)+1,$r=lr*Math.sin(br)}Pe.showticklabels&&(Ar||Pe.showline)&&(Er+=.2*Pe.tickfont.size),Er+=(Pe.linewidth||1)/2*(Pr?-1:1);var Fr={labelStandoff:Er,labelShift:$r},Hr,Lr,at,Rt,Kt=0,ur=Pe.side,Nr=Pe._id.charAt(0),Vr=Pe.tickangle,Dr;if(Nr==="x")Dr=!Pr&&ur==="bottom"||Pr&&ur==="top",Rt=Dr?1:-1,Pr&&(Rt*=-1),Hr=$r*Rt,Lr=Se+Er*Rt,at=Dr?1:-.2,Math.abs(Vr)===90&&(Pr?at+=ee:Vr===-90&&ur==="bottom"?at=j:Vr===90&&ur==="top"?at=ee:at=.5,Kt=ee/2*(Vr/90)),Fr.xFn=function(kn){return kn.dx+Hr+Kt*kn.fontSize},Fr.yFn=function(kn){return kn.dy+Lr+kn.fontSize*at},Fr.anchorFn=function(kn,mn){if(or){if(xt)return"end";if(Pt)return"start"}return!u(mn)||mn===0||mn===180?"middle":mn*Rt<0!==Pr?"end":"start"},Fr.heightFn=function(kn,mn,Wn){return mn<-60||mn>60?-.5*Wn:Pe.side==="top"!==Pr?-Wn:0};else if(Nr==="y"){if(Dr=!Pr&&ur==="left"||Pr&&ur==="right",Rt=Dr?1:-1,Pr&&(Rt*=-1),Hr=Er,Lr=$r*Rt,at=0,!Pr&&Math.abs(Vr)===90&&(Vr===-90&&ur==="left"||Vr===90&&ur==="right"?at=j:at=.5),Pr){var Mr=u(Vr)?+Vr:0;if(Mr!==0){var jr=e.deg2rad(Mr);Kt=Math.abs(Math.sin(jr))*j*Rt,at=0}}Fr.xFn=function(kn){return kn.dx+Se-(Hr+kn.fontSize*at)*Rt+Kt*kn.fontSize},Fr.yFn=function(kn){return kn.dy+Lr+kn.fontSize*ee},Fr.anchorFn=function(kn,mn){return u(mn)&&Math.abs(mn)===90?"middle":Dr?"end":"start"},Fr.heightFn=function(kn,mn,Wn){return Pe.side==="right"&&(mn*=-1),mn<-30?-Wn:mn<30?-.5*Wn:0}}return Fr};function zt(Pe){return[Pe.text,Pe.x,Pe.axInfo,Pe.font,Pe.fontSize,Pe.fontColor].join("_")}K.drawTicks=function(Pe,Se,ot){ot=ot||{};var ct=Se._id+"tick",pt=[].concat(Se.minor&&Se.minor.ticks?ot.vals.filter(function(xt){return xt.minor&&!xt.noTick}):[]).concat(Se.ticks?ot.vals.filter(function(xt){return!xt.minor&&!xt.noTick}):[]),St=ot.layer.selectAll("path."+ct).data(pt,zt);St.exit().remove(),St.enter().append("path").classed(ct,1).classed("ticks",1).classed("crisp",ot.crisp!==!1).each(function(xt){return r.stroke(m.select(this),xt.minor?Se.minor.tickcolor:Se.tickcolor)}).style("stroke-width",function(xt){return v.crispRound(Pe,xt.minor?Se.minor.tickwidth:Se.tickwidth,1)+"px"}).attr("d",ot.path).style("display",null),Vt(Se,[O]),St.attr("transform",ot.transFn)},K.drawGrid=function(Pe,Se,ot){ot=ot||{};var ct=Se._id+"grid",pt=Se.minor&&Se.minor.showgrid,St=pt?ot.vals.filter(function(Hr){return Hr.minor}):[],xt=Se.showgrid?ot.vals.filter(function(Hr){return!Hr.minor}):[],Pt=ot.counterAxis;if(Pt&&K.shouldShowZeroLine(Pe,Se,Pt))for(var Xt=Se.tickmode==="array",or=0;or<xt.length;or++){var Pr=xt[or].x;if(Xt?!Pr:Math.abs(Pr)<Se.dtick/100)if(xt=xt.slice(0,or).concat(xt.slice(or+1)),Xt)or--;else break}Se._gw=v.crispRound(Pe,Se.gridwidth,1);for(var Ar=pt?v.crispRound(Pe,Se.minor.gridwidth,1):0,Er=ot.layer,$r=ot.minorLayer,lr=1;lr>=0;lr--){var br=lr?Er:$r;if(!!br){var Fr=br.selectAll("path."+ct).data(lr?xt:St,zt);Fr.exit().remove(),Fr.enter().append("path").classed(ct,1).classed("crisp",ot.crisp!==!1),Fr.attr("transform",ot.transFn).attr("d",ot.path).each(function(Hr){return r.stroke(m.select(this),Hr.minor?Se.minor.gridcolor:Se.gridcolor||"#ddd")}).style("stroke-dasharray",function(Hr){return v.dashStyle(Hr.minor?Se.minor.griddash:Se.griddash,Hr.minor?Se.minor.gridwidth:Se.gridwidth)}).style("stroke-width",function(Hr){return(Hr.minor?Ar:Se._gw)+"px"}).style("display",null),typeof ot.path=="function"&&Fr.attr("d",ot.path)}}Vt(Se,[D,R])},K.drawZeroLine=function(Pe,Se,ot){ot=ot||ot;var ct=Se._id+"zl",pt=K.shouldShowZeroLine(Pe,Se,ot.counterAxis),St=ot.layer.selectAll("path."+ct).data(pt?[{x:0,id:Se._id}]:[]);St.exit().remove(),St.enter().append("path").classed(ct,1).classed("zl",1).classed("crisp",ot.crisp!==!1).each(function(){ot.layer.selectAll("path").sort(function(xt,Pt){return H(xt.id,Pt.id)})}),St.attr("transform",ot.transFn).attr("d",ot.path).call(r.stroke,Se.zerolinecolor||r.defaultLine).style("stroke-width",v.crispRound(Pe,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),Vt(Se,[I])},K.drawLabels=function(Pe,Se,ot){ot=ot||{};var ct=Pe._fullLayout,pt=Se._id,St=pt.charAt(0),xt=ot.cls||pt+"tick",Pt=ot.vals.filter(function(Rt){return Rt.text}),Xt=ot.labelFns,or=ot.secondary?0:Se.tickangle,Pr=(Se._prevTickAngles||{})[xt],Ar=ot.layer.selectAll("g."+xt).data(Se.showticklabels?Pt:[],zt),Er=[];Ar.enter().append("g").classed(xt,1).append("text").attr("text-anchor","middle").each(function(Rt){var Kt=m.select(this),ur=Pe._promises.length;Kt.call(i.positionText,Xt.xFn(Rt),Xt.yFn(Rt)).call(v.font,Rt.font,Rt.fontSize,Rt.fontColor).text(Rt.text).call(i.convertToTspans,Pe),Pe._promises[ur]?Er.push(Pe._promises.pop().then(function(){$r(Kt,or)})):$r(Kt,or)}),Vt(Se,[z]),Ar.exit().remove(),ot.repositionOnUpdate&&Ar.each(function(Rt){m.select(this).select("text").call(i.positionText,Xt.xFn(Rt),Xt.yFn(Rt))});function $r(Rt,Kt){Rt.each(function(ur){var Nr=m.select(this),Vr=Nr.select(".text-math-group"),Dr=Xt.anchorFn(ur,Kt),Mr=ot.transFn.call(Nr.node(),ur)+(u(Kt)&&+Kt!=0?" rotate("+Kt+","+Xt.xFn(ur)+","+(Xt.yFn(ur)-ur.fontSize/2)+")":""),jr=i.lineCount(Nr),kn=X*ur.fontSize,mn=Xt.heightFn(ur,u(Kt)?+Kt:0,(jr-1)*kn);if(mn&&(Mr+=a(0,mn)),Vr.empty()){var Wn=Nr.select("text");Wn.attr({transform:Mr,"text-anchor":Dr}),Wn.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var In=v.bBox(Vr.node()).width,Jn=In*{end:-.5,start:.5}[Dr];Vr.attr("transform",Mr+a(Jn,0))}})}Se._adjustTickLabelsOverflow=function(){var Rt=Se.ticklabeloverflow;if(!(!Rt||Rt==="allow")){var Kt=Rt.indexOf("hide")!==-1,ur=Se._id.charAt(0)==="x",Nr=0,Vr=ur?Pe._fullLayout.width:Pe._fullLayout.height;if(Rt.indexOf("domain")!==-1){var Dr=e.simpleMap(Se.range,Se.r2l);Nr=Se.l2p(Dr[0])+Se._offset,Vr=Se.l2p(Dr[1])+Se._offset}var Mr=Math.min(Nr,Vr),jr=Math.max(Nr,Vr),kn=Se.side,mn=1/0,Wn=-1/0;Ar.each(function(ma){var Ra=m.select(this),_i=Ra.select(".text-math-group");if(_i.empty()){var Ka=v.bBox(Ra.node()),ri=0;ur?(Ka.right>jr||Ka.left<Mr)&&(ri=1):(Ka.bottom>jr||Ka.top+(Se.tickangle?0:ma.fontSize/4)<Mr)&&(ri=1);var ei=Ra.select("text");ri?Kt&&ei.style("opacity",0):(ei.style("opacity",1),kn==="bottom"||kn==="right"?mn=Math.min(mn,ur?Ka.top:Ka.left):mn=-1/0,kn==="top"||kn==="left"?Wn=Math.max(Wn,ur?Ka.bottom:Ka.right):Wn=1/0)}});for(var In in ct._plots){var Jn=ct._plots[In];if(!(Se._id!==Jn.xaxis._id&&Se._id!==Jn.yaxis._id)){var Kn=ur?Jn.yaxis:Jn.xaxis;Kn&&(Kn["_visibleLabelMin_"+Se._id]=mn,Kn["_visibleLabelMax_"+Se._id]=Wn)}}}},Se._hideCounterAxisInsideTickLabels=function(Rt){var Kt=Se._id.charAt(0)==="x",ur=[];for(var Nr in ct._plots){var Vr=ct._plots[Nr];Se._id!==Vr.xaxis._id&&Se._id!==Vr.yaxis._id||ur.push(Kt?Vr.yaxis:Vr.xaxis)}ur.forEach(function(Dr,Mr){Dr&&Et(Dr)&&(Rt||[I,R,D,O,z]).forEach(function(jr){var kn=jr.K==="tick"&&jr.L==="text"&&Se.ticklabelmode==="period",mn=ct._plots[Se._mainSubplot],Wn;jr.K===I.K?Wn=mn.zerolinelayer.selectAll("."+Se._id+"zl"):jr.K===R.K?Wn=mn.minorGridlayer.selectAll("."+Se._id):jr.K===D.K?Wn=mn.gridlayer.selectAll("."+Se._id):Wn=mn[Se._id.charAt(0)+"axislayer"],Wn.each(function(){var In=m.select(this);jr.L&&(In=In.selectAll(jr.L)),In.each(function(Jn){var Kn=Se.l2p(kn?Mt(Jn):Jn.x)+Se._offset,ma=m.select(this);Kn<Se["_visibleLabelMax_"+Dr._id]&&Kn>Se["_visibleLabelMin_"+Dr._id]?ma.style("display","none"):jr.K==="tick"&&!Mr&&ma.style("display",null)})})})})},$r(Ar,Pr+1?Pr:or);function lr(){return Er.length&&Promise.all(Er)}var br=null;function Fr(){if($r(Ar,or),Pt.length&&St==="x"&&!u(or)&&(Se.type!=="log"||String(Se.dtick).charAt(0)!=="D")){br=0;var Rt=0,Kt=[],ur;if(Ar.each(function(Ka){Rt=Math.max(Rt,Ka.fontSize);var ri=Se.l2p(Ka.x),ei=qr(this),kr=v.bBox(ei.node());Kt.push({top:0,bottom:10,height:10,left:ri-kr.width/2,right:ri+kr.width/2+2,width:kr.width+2})}),(Se.tickson==="boundaries"||Se.showdividers)&&!ot.secondary){var Nr=2;for(Se.ticks&&(Nr+=Se.tickwidth/2),ur=0;ur<Kt.length;ur++){var Vr=Pt[ur].xbnd,Dr=Kt[ur];if(Vr[0]!==null&&Dr.left-Se.l2p(Vr[0])<Nr||Vr[1]!==null&&Se.l2p(Vr[1])-Dr.right<Nr){br=90;break}}}else{var Mr=Pt.length,jr=Math.abs((Pt[Mr-1].x-Pt[0].x)*Se._m)/(Mr-1),kn=Se.ticklabelposition||"",mn=function(Ka){return kn.indexOf(Ka)!==-1},Wn=mn("top"),In=mn("left"),Jn=mn("right"),Kn=mn("bottom"),ma=Kn||In||Wn||Jn,Ra=ma?(Se.tickwidth||0)+2*he:0,_i=jr<Rt*2.5||Se.type==="multicategory"||Se._name==="realaxis";for(ur=0;ur<Kt.length-1;ur++)if(e.bBoxIntersect(Kt[ur],Kt[ur+1],Ra)){br=_i?90:30;break}}br&&$r(Ar,br)}}Se._selections&&(Se._selections[xt]=Ar);var Hr=[lr];Se.automargin&&ct._redrawFromAutoMarginCount&&Pr===90?(br=90,Hr.push(function(){$r(Ar,Pr)})):Hr.push(Fr),Se._tickAngles&&Hr.push(function(){Se._tickAngles[xt]=br===null?u(or)?or:0:br});var Lr=Se._anchorAxis;Lr&&Lr.autorange&&Et(Se)&&!q(ct,Se._id)&&(ct._insideTickLabelsAutorange||(ct._insideTickLabelsAutorange={}),ct._insideTickLabelsAutorange[Lr._name+".autorange"]=Lr.autorange,Hr.push(function(){Ar.each(function(Kt,ur){var Nr=qr(this),Vr=Nr.select(".text-math-group");Vr.empty()&&(Se._vals[ur].bb=v.bBox(Nr.node()))})}));var at=e.syncOrAsync(Hr);return at&&at.then&&Pe._promises.push(at),at};function Ht(Pe,Se,ot){var ct=Se._id+"divider",pt=ot.vals,St=ot.layer.selectAll("path."+ct).data(pt,zt);St.exit().remove(),St.enter().insert("path",":first-child").classed(ct,1).classed("crisp",1).call(r.stroke,Se.dividercolor).style("stroke-width",v.crispRound(Pe,Se.dividerwidth,1)+"px"),St.attr("transform",ot.transFn).attr("d",ot.path)}K.getPxPosition=function(Pe,Se){var ot=Pe._fullLayout._size,ct=Se._id.charAt(0),pt=Se.side,St;if(Se.anchor!=="free"?St=Se._anchorAxis:ct==="x"?St={_offset:ot.t+(1-(Se.position||0))*ot.h,_length:0}:ct==="y"&&(St={_offset:ot.l+(Se.position||0)*ot.w,_length:0}),pt==="top"||pt==="left")return St._offset;if(pt==="bottom"||pt==="right")return St._offset+St._length};function Zt(Pe){var Se=Pe.title.font.size,ot=(Pe.title.text.match(i.BR_TAG_ALL)||[]).length;return Pe.title.hasOwnProperty("standoff")?ot?Se*(j+ot*X):Se*j:ot?Se*(ot+1)*X:Se}function Wt(Pe,Se){var ot=Pe._fullLayout,ct=Se._id,pt=ct.charAt(0),St=Se.title.font.size,xt;if(Se.title.hasOwnProperty("standoff"))xt=Se._depth+Se.title.standoff+Zt(Se);else{var Pt=Et(Se);if(Se.type==="multicategory")xt=Se._depth;else{var Xt=1.5*St;Pt&&(Xt=.5*St,Se.ticks==="outside"&&(Xt+=Se.ticklen)),xt=10+Xt+(Se.linewidth?Se.linewidth-1:0)}Pt||(pt==="x"?xt+=Se.side==="top"?St*(Se.showticklabels?1:0):St*(Se.showticklabels?1.5:.5):xt+=Se.side==="right"?St*(Se.showticklabels?1:.5):St*(Se.showticklabels?.5:0))}var or=K.getPxPosition(Pe,Se),Pr,Ar,Er;pt==="x"?(Ar=Se._offset+Se._length/2,Er=Se.side==="top"?or-xt:or+xt):(Er=Se._offset+Se._length/2,Ar=Se.side==="right"?or+xt:or-xt,Pr={rotate:"-90",offset:0});var $r;if(Se.type!=="multicategory"){var lr=Se._selections[Se._id+"tick"];if($r={selection:lr,side:Se.side},lr&&lr.node()&&lr.node().parentNode){var br=v.getTranslate(lr.node().parentNode);$r.offsetLeft=br.x,$r.offsetTop=br.y}Se.title.hasOwnProperty("standoff")&&($r.pad=0)}return n.draw(Pe,ct+"title",{propContainer:Se,propName:Se._name+".title.text",placeholder:ot._dfltTitle[pt],avoid:$r,transform:Pr,attributes:{x:Ar,y:Er,"text-anchor":"middle"}})}K.shouldShowZeroLine=function(Pe,Se,ot){var ct=e.simpleMap(Se.range,Se.r2l);return ct[0]*ct[1]<=0&&Se.zeroline&&(Se.type==="linear"||Se.type==="-")&&!(Se.rangebreaks&&Se.maskBreaks(0)===F)&&(sr(Se,0)||!Gr(Pe,Se,ot,ct)||cn(Pe,Se))},K.clipEnds=function(Pe,Se){return Se.filter(function(ot){return sr(Pe,ot.x)})};function sr(Pe,Se){var ot=Pe.l2p(Se);return ot>1&&ot<Pe._length-1}function Gr(Pe,Se,ot,ct){var pt=ot._mainAxis;if(!pt)return;var St=Pe._fullLayout,xt=Se._id.charAt(0),Pt=K.counterLetter(Se._id),Xt=Se._offset+(Math.abs(ct[0])<Math.abs(ct[1])==(xt==="x")?0:Se._length);function or(lr){if(!lr.showline||!lr.linewidth)return!1;var br=Math.max((lr.linewidth+Se.zerolinewidth)/2,1);function Fr(at){return typeof at=="number"&&Math.abs(at-Xt)<br}if(Fr(lr._mainLinePosition)||Fr(lr._mainMirrorPosition))return!0;var Hr=lr._linepositions||{};for(var Lr in Hr)if(Fr(Hr[Lr][0])||Fr(Hr[Lr][1]))return!0}var Pr=St._plots[ot._mainSubplot];if(!(Pr.mainplotinfo||Pr).overlays.length)return or(ot);for(var Ar=K.list(Pe,Pt),Er=0;Er<Ar.length;Er++){var $r=Ar[Er];if($r._mainAxis===pt&&or($r))return!0}}function cn(Pe,Se){for(var ot=Pe._fullData,ct=Se._mainSubplot,pt=Se._id.charAt(0),St=0;St<ot.length;St++){var xt=ot[St];if(xt.visible===!0&&xt.xaxis+xt.yaxis===ct&&(T.traceIs(xt,"bar-like")&&xt.orientation==={x:"h",y:"v"}[pt]||xt.fill&&xt.fill.charAt(xt.fill.length-1)===pt))return!0}return!1}function qr(Pe){var Se=m.select(Pe),ot=Se.select(".text-math-group");return ot.empty()?Se.select("text"):ot}K.allowAutoMargin=function(Pe){for(var Se=K.list(Pe,"",!0),ot=0;ot<Se.length;ot++){var ct=Se[ot];ct.automargin&&(A.allowAutoMargin(Pe,st(ct)),ct.mirror&&A.allowAutoMargin(Pe,rr(ct))),T.getComponentMethod("rangeslider","isVisible")(ct)&&A.allowAutoMargin(Pe,Jt(ct))}};function st(Pe){return Pe._id+".automargin"}function rr(Pe){return st(Pe)+".mirror"}function Jt(Pe){return Pe._id+".rangeslider"}K.swap=function(Pe,Se){for(var ot=hr(Pe,Se),ct=0;ct<ot.length;ct++)tt(Pe,ot[ct].x,ot[ct].y)};function hr(Pe,Se){var ot=[],ct,pt;for(ct=0;ct<Se.length;ct++){var St=[],xt=Pe._fullData[Se[ct]].xaxis,Pt=Pe._fullData[Se[ct]].yaxis;if(!(!xt||!Pt)){for(pt=0;pt<ot.length;pt++)(ot[pt].x.indexOf(xt)!==-1||ot[pt].y.indexOf(Pt)!==-1)&&St.push(pt);if(!St.length){ot.push({x:[xt],y:[Pt]});continue}var Xt=ot[St[0]],or;if(St.length>1)for(pt=1;pt<St.length;pt++)or=ot[St[pt]],Sr(Xt.x,or.x),Sr(Xt.y,or.y);Sr(Xt.x,[xt]),Sr(Xt.y,[Pt])}}return ot}function Sr(Pe,Se){for(var ot=0;ot<Se.length;ot++)Pe.indexOf(Se[ot])===-1&&Pe.push(Se[ot])}function tt(Pe,Se,ot){var ct=[],pt=[],St=Pe.layout,xt,Pt;for(xt=0;xt<Se.length;xt++)ct.push(K.getFromId(Pe,Se[xt]));for(xt=0;xt<ot.length;xt++)pt.push(K.getFromId(Pe,ot[xt]));var Xt=Object.keys(s),or=["anchor","domain","overlaying","position","side","tickangle","editType"],Pr=["linear","log"];for(xt=0;xt<Xt.length;xt++){var Ar=Xt[xt],Er=ct[0][Ar],$r=pt[0][Ar],lr=!0,br=!1,Fr=!1;if(!(Ar.charAt(0)==="_"||typeof Er=="function"||or.indexOf(Ar)!==-1)){for(Pt=1;Pt<ct.length&&lr;Pt++){var Hr=ct[Pt][Ar];Ar==="type"&&Pr.indexOf(Er)!==-1&&Pr.indexOf(Hr)!==-1&&Er!==Hr?br=!0:Hr!==Er&&(lr=!1)}for(Pt=1;Pt<pt.length&&lr;Pt++){var Lr=pt[Pt][Ar];Ar==="type"&&Pr.indexOf($r)!==-1&&Pr.indexOf(Lr)!==-1&&$r!==Lr?Fr=!0:pt[Pt][Ar]!==$r&&(lr=!1)}lr&&(br&&(St[ct[0]._name].type="linear"),Fr&&(St[pt[0]._name].type="linear"),Qe(St,Ar,ct,pt,Pe._fullLayout._dfltTitle))}}for(xt=0;xt<Pe._fullLayout.annotations.length;xt++){var at=Pe._fullLayout.annotations[xt];Se.indexOf(at.xref)!==-1&&ot.indexOf(at.yref)!==-1&&e.swapAttrs(St.annotations[xt],["?"])}}function Qe(Pe,Se,ot,ct,pt){var St=e.nestedProperty,xt=St(Pe[ot[0]._name],Se).get(),Pt=St(Pe[ct[0]._name],Se).get(),Xt;for(Se==="title"&&(xt&&xt.text===pt.x&&(xt.text=pt.y),Pt&&Pt.text===pt.y&&(Pt.text=pt.x)),Xt=0;Xt<ot.length;Xt++)St(Pe,ot[Xt]._name+"."+Se).set(Pt);for(Xt=0;Xt<ct.length;Xt++)St(Pe,ct[Xt]._name+"."+Se).set(xt)}function lt(Pe){return Pe._id==="angularaxis"}function ft(Pe,Se){for(var ot=Se._rangebreaks.length,ct=0;ct<ot;ct++){var pt=Se._rangebreaks[ct];if(Pe>=pt.min&&Pe<pt.max)return pt.max}return Pe}function Et(Pe){return(Pe.ticklabelposition||"").indexOf("inside")!==-1}function Vt(Pe,Se){Et(Pe._anchorAxis||{})&&Pe._hideCounterAxisInsideTickLabels&&Pe._hideCounterAxisInsideTickLabels(Se)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../constants/numerical").BADNUM,T=u.isArrayOrTypedArray,e=u.isDateTime,a=u.cleanNumber,i=Math.round;N.exports=function(d,f,y){var l=d,x=y.noMultiCategory;if(T(l)&&!l.length)return"-";if(!x&&b(l))return"multicategory";if(x&&Array.isArray(l[0])){for(var c=[],M=0;M<l.length;M++)if(T(l[M]))for(var w=0;w<l[M].length;w++)c.push(l[M][w]);l=c}if(v(l,f))return"date";var p=y.autotypenumbers!=="strict";return o(l,p)?"category":r(l,p)?"linear":"-"};function n(g,d){return d?m(g):typeof g=="number"}function r(g,d){for(var f=g.length,y=0;y<f;y++)if(n(g[y],d))return!0;return!1}function v(g,d){for(var f=g.length,y=s(f),l=0,x=0,c={},M=0;M<f;M+=y){var w=i(M),p=g[w],_=String(p);c[_]||(c[_]=1,e(p,d)&&l++,m(p)&&x++)}return l>x*2}function s(g){return Math.max(1,(g-1)/1e3)}function o(g,d){for(var f=g.length,y=s(f),l=0,x=0,c={},M=0;M<f;M+=y){var w=i(M),p=g[w],_=String(p);if(!c[_]){c[_]=1;var h=typeof p;h==="boolean"?x++:(d?a(p)!==A:h==="number")?l++:h==="string"&&x++}}return x>l*2}function b(g){return T(g[0])&&T(g[1])}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../registry"),A=t("../../lib"),T=t("../../plot_api/plot_template"),e=t("../array_container_defaults"),a=t("./layout_attributes"),i=t("./tick_value_defaults"),n=t("./tick_mark_defaults"),r=t("./tick_label_defaults"),v=t("./prefix_suffix_defaults"),s=t("./category_order_defaults"),o=t("./line_grid_defaults"),b=t("./set_convert"),g=t("./constants").WEEKDAY_PATTERN,d=t("./constants").HOUR_PATTERN;N.exports=function(c,M,w,p,_){var h=p.letter,L=p.font||{},E=p.splomStash||{},S=w("visible",!p.visibleDflt),P=M._template||{},F=M.type||P.type||"-",I;if(F==="date"){var D=u.getComponentMethod("calendars","handleDefaults");D(c,M,"calendar",p.calendar),p.noTicklabelmode||(I=w("ticklabelmode"))}var R="";(!p.noTicklabelposition||F==="multicategory")&&(R=A.coerce(c,M,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:h==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),p.noTicklabeloverflow||w("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":F==="category"||F==="multicategory"?"allow":"hide past div"),b(M,_);var O=!M.isValidRange(c.range);O&&p.reverseDflt&&(O="reversed");var z=w("autorange",O);z&&(F==="linear"||F==="-")&&w("rangemode"),w("range"),M.cleanRange(),s(c,M,w,p),F!=="category"&&!p.noHover&&w("hoverformat");var G=w("color"),Y=G!==a.color.dflt?G:L.color,ee=E.label||_._dfltTitle[h];if(v(c,M,w,F,p),!S)return M;w("title.text",ee),A.coerceFont(w,"title.font",{family:L.family,size:A.bigFont(L.size),color:Y}),i(c,M,w,F);var j=p.hasMinor;if(j&&(T.newContainer(M,"minor"),i(c,M,w,F,{isMinor:!0})),r(c,M,w,F,p),n(c,M,w,p),j){var X=p.isMinor;p.isMinor=!0,n(c,M,w,p),p.isMinor=X}o(c,M,w,{dfltColor:G,bgColor:p.bgColor,showGrid:p.showGrid,hasMinor:j,attributes:a}),j&&!M.minor.ticks&&!M.minor.showgrid&&delete M.minor,(M.showline||M.ticks)&&w("mirror"),p.automargin&&w("automargin");var ie=F==="multicategory";if(!p.noTickson&&(F==="category"||ie)&&(M.ticks||M.showgrid)){var he;ie&&(he="boundaries");var K=w("tickson",he);K==="boundaries"&&delete M.ticklabelposition}if(ie){var $=w("showdividers");$&&(w("dividercolor"),w("dividerwidth"))}if(F==="date")if(e(c,M,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),!M.rangebreaks.length)delete M.rangebreaks;else{for(var U=0;U<M.rangebreaks.length;U++)if(M.rangebreaks[U].pattern===g){M._hasDayOfWeekBreaks=!0;break}if(b(M,_),_._has("scattergl")||_._has("splom"))for(var H=0;H<p.data.length;H++){var q=p.data[H];(q.type==="scattergl"||q.type==="splom")&&(q.visible=!1,A.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}return M};function f(x,c,M){function w(I,D){return A.coerce(x,c,a.rangebreaks,I,D)}var p=w("enabled");if(p){var _=w("bounds");if(_&&_.length>=2){var h="",L,E;if(_.length===2){for(L=0;L<2;L++)if(E=l(_[L]),E){h=g;break}}var S=w("pattern",h);if(S===g)for(L=0;L<2;L++)E=l(_[L]),E&&(c.bounds[L]=_[L]=E-1);if(S)for(L=0;L<2;L++)switch(E=_[L],S){case g:if(!m(E)){c.enabled=!1;return}if(E=+E,E!==Math.floor(E)||E<0||E>=7){c.enabled=!1;return}c.bounds[L]=_[L]=E;break;case d:if(!m(E)){c.enabled=!1;return}if(E=+E,E<0||E>24){c.enabled=!1;return}c.bounds[L]=_[L]=E;break}if(M.autorange===!1){var P=M.range;if(P[0]<P[1]){if(_[0]<P[0]&&_[1]>P[1]){c.enabled=!1;return}}else if(_[0]>P[0]&&_[1]<P[1]){c.enabled=!1;return}}}else{var F=w("values");if(F&&F.length)w("dvalue");else{c.enabled=!1;return}}}}var y={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function l(x){if(typeof x=="string")return y[x.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(t,N,V){var m=t("../../constants/docs"),u=m.FORMAT_LINK,A=m.DATE_FORMAT_LINK;function T(i,n){return{valType:"string",dflt:"",editType:"none",description:(n?e:a)("hover text",i)+["By default the values are formatted using "+(n?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}}function e(i,n){return["Sets the "+i+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+u+"."].join(" ")}function a(i,n){return e(i,n)+[" And for dates see: "+A+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}N.exports={axisHoverFormat:T,descriptionOnlyNumbers:e,descriptionWithDates:a}},{"../../constants/docs":486}],570:[function(t,N,V){var m=t("../../registry"),u=t("./constants");V.id2name=function(e){if(!(typeof e!="string"||!e.match(u.AX_ID_PATTERN))){var a=e.split(" ")[0].substr(1);return a==="1"&&(a=""),e.charAt(0)+"axis"+a}},V.name2id=function(e){if(!!e.match(u.AX_NAME_PATTERN)){var a=e.substr(5);return a==="1"&&(a=""),e.charAt(0)+a}},V.cleanId=function(e,a,i){var n=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(u.AX_ID_PATTERN))&&!(a&&e.charAt(0)!==a)&&!(n&&!i)){var r=e.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),e.charAt(0)+r+(n&&i?" domain":"")}},V.list=function(T,e,a){var i=T._fullLayout;if(!i)return[];var n=V.listIds(T,e),r=new Array(n.length),v;for(v=0;v<n.length;v++){var s=n[v];r[v]=i[s.charAt(0)+"axis"+s.substr(1)]}if(!a){var o=i._subplots.gl3d||[];for(v=0;v<o.length;v++){var b=i[o[v]];e?r.push(b[e+"axis"]):r.push(b.xaxis,b.yaxis,b.zaxis)}}return r},V.listIds=function(T,e){var a=T._fullLayout;if(!a)return[];var i=a._subplots;return e?i[e+"axis"]:i.xaxis.concat(i.yaxis)},V.getFromId=function(T,e,a){var i=T._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),a==="x"?e=e.replace(/y[0-9]*/,""):a==="y"&&(e=e.replace(/x[0-9]*/,"")),i[V.id2name(e)]},V.getFromTrace=function(T,e,a){var i=T._fullLayout,n=null;if(m.traceIs(e,"gl3d")){var r=e.scene;r.substr(0,5)==="scene"&&(n=i[r][a+"axis"])}else n=V.getFromId(T,e[a+"axis"]||a);return n},V.idSort=function(T,e){var a=T.charAt(0),i=e.charAt(0);return a!==i?a>i?1:-1:+(T.substr(1)||1)-+(e.substr(1)||1)},V.ref2id=function(T){return/^[xyz]/.test(T)?T.split(" ")[0]:!1};function A(T,e){if(e&&e.length){for(var a=0;a<e.length;a++)if(e[a][T])return!0}return!1}V.isLinked=function(T,e){return A(e,T._axisMatchGroups)||A(e,T._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(t,N,V){function m(u,A){var T=A.dataAttr||u._id.charAt(0),e={},a,i,n;if(A.axData)a=A.axData;else for(a=[],i=0;i<A.data.length;i++){var r=A.data[i];r[T+"axis"]===u._id&&a.push(r)}for(i=0;i<a.length;i++){var v=a[i][T];for(n=0;n<v.length;n++){var s=v[n];s!=null&&(e[s]=1)}}return Object.keys(e)}N.exports=function(A,T,e,a){if(T.type==="category"){var i=A.categoryarray,n=Array.isArray(i)&&i.length>0,r;n&&(r="array");var v=e("categoryorder",r),s;v==="array"&&(s=e("categoryarray")),!n&&v==="array"&&(v=T.categoryorder="trace"),v==="trace"?T._initialCategories=[]:v==="array"?T._initialCategories=s.slice():(s=m(T,a).sort(),v==="category ascending"?T._initialCategories=s:v==="category descending"&&(T._initialCategories=s.reverse()))}}},{}],572:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../constants/numerical"),T=A.ONEDAY,e=A.ONEWEEK;V.dtick=function(a,i){var n=i==="log",r=i==="date",v=i==="category",s=r?T:1;if(!a)return s;if(m(a))return a=Number(a),a<=0?s:v?Math.max(1,Math.round(a)):r?Math.max(.1,a):a;if(typeof a!="string"||!(r||n))return s;var o=a.charAt(0),b=a.substr(1);return b=m(b)?Number(b):0,b<=0||!(r&&o==="M"&&b===Math.round(b)||n&&o==="L"||n&&o==="D"&&(b===1||b===2))?s:a},V.tick0=function(a,i,n,r){if(i==="date")return u.cleanDate(a,u.dateTick0(n,r%e===0?1:0));if(!(r==="D1"||r==="D2"))return m(a)?Number(a):0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(t,N,V){var m=t("../../lib/regex").counter;N.exports={idRegex:{x:m("x","( domain)?"),y:m("y","( domain)?")},attrRegex:m("[xy]axis"),xAxisMatch:m("xaxis"),yAxisMatch:m("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(t,N,V){var m=t("../../lib"),u=t("./autorange"),A=t("./axis_ids").id2name,T=t("./layout_attributes"),e=t("./scale_zoom"),a=t("./set_convert"),i=t("../../constants/numerical").ALMOST_EQUAL,n=t("../../constants/alignment").FROM_BL;V.handleDefaults=function(f,y,l){var x=l.axIds,c=l.axHasImage,M=y._axisConstraintGroups=[],w=y._axisMatchGroups=[],p,_,h,L,E,S,P,F;for(p=0;p<x.length;p++)L=A(x[p]),E=f[L],S=y[L],r(E,S,{axIds:x,layoutOut:y,hasImage:c[L]});function I(X,ie){for(p=0;p<X.length;p++){_=X[p];for(h in _)y[A(h)][ie]=_}}for(I(w,"_matchGroup"),p=0;p<M.length;p++){_=M[p];for(h in _)if(S=y[A(h)],S.fixedrange){for(var D in _){var R=A(D);(f[R]||{}).fixedrange===!1&&m.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),y[R].fixedrange=!0}break}}for(p=0;p<M.length;){_=M[p];for(h in _){S=y[A(h)],S._matchGroup&&Object.keys(S._matchGroup).length===Object.keys(_).length&&(M.splice(p,1),p--);break}p++}I(M,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],z=!1,G=!1;function Y(){F=S[P],P==="rangebreaks"&&(G=S._hasDayOfWeekBreaks)}for(p=0;p<w.length;p++){_=w[p];for(var ee=0;ee<O.length;ee++){P=O[ee],F=null;var j;for(h in _)if(L=A(h),E=f[L],S=y[L],P in S){if(!S.matches&&(j=S,P in E)){Y();break}F===null&&P in E&&Y()}if(P==="range"&&F&&(z=!0),P==="autorange"&&F===null&&z&&(F=!1),F===null&&P in j&&(F=j[P]),F!==null)for(h in _)S=y[A(h)],S[P]=P==="range"?F.slice():F,P==="rangebreaks"&&(S._hasDayOfWeekBreaks=G,a(S,y))}}};function r(f,y,l){var x=l.axIds,c=l.layoutOut,M=l.hasImage,w=c._axisConstraintGroups,p=c._axisMatchGroups,_=y._id,h=_.charAt(0),L=((c._splomAxes||{})[h]||{})[_]||{},E=y._id,S=E.charAt(0)==="x";y._matchGroup=null,y._constraintGroup=null;function P($,U){return m.coerce(f,y,T,$,U)}P("constrain",M?"domain":"range"),m.coerce(f,y,{constraintoward:{valType:"enumerated",values:S?["left","center","right"]:["bottom","middle","top"],dflt:S?"center":"middle"}},"constraintoward");var F=y.type,I,D,R=[];for(I=0;I<x.length;I++)if(D=x[I],D!==E){var O=c[A(D)];O.type===F&&R.push(D)}var z=s(w,E);if(z){var G=[];for(I=0;I<R.length;I++)D=R[I],z[D]||G.push(D);R=G}var Y=R.length,ee,j;Y&&(f.matches||L.matches)&&(ee=m.coerce(f,y,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var X=M&&!S?y.anchor:void 0;if(Y&&!ee&&(f.scaleanchor||X)&&(j=m.coerce(f,y,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",X)),ee){y._matchGroup=o(p,E,ee,1);var ie=c[A(ee)],he=v(c,y)/v(c,ie);S!==(ee.charAt(0)==="x")&&(he=(S?"x":"y")+he),o(w,E,ee,he)}else f.matches&&x.indexOf(f.matches)!==-1&&m.warn("ignored "+y._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(j){var K=P("scaleratio");K||(K=y.scaleratio=1),o(w,E,j,K)}else f.scaleanchor&&x.indexOf(f.scaleanchor)!==-1&&m.warn("ignored "+y._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function v(f,y){var l=y.domain;return l||(l=f[A(y.overlaying)].domain),l[1]-l[0]}function s(f,y){for(var l=0;l<f.length;l++)if(f[l][y])return f[l];return null}function o(f,y,l,x){var c,M,w,p,_,h=s(f,y);h===null?(h={},h[y]=1,_=f.length,f.push(h)):_=f.indexOf(h);var L=Object.keys(h);for(c=0;c<f.length;c++)if(w=f[c],c!==_&&w[l]){var E=w[l];for(M=0;M<L.length;M++)p=L[M],w[p]=b(E,b(x,h[p]));f.splice(_,1);return}if(x!==1)for(M=0;M<L.length;M++){var S=L[M];h[S]=b(x,h[S])}h[l]=1}function b(f,y){var l="",x="",c,M;typeof f=="string"&&(l=f.match(/^[xy]*/)[0],c=l.length,f=+f.substr(c)),typeof y=="string"&&(x=y.match(/^[xy]*/)[0],M=x.length,y=+y.substr(M));var w=f*y;return!c&&!M?w:!c||!M||l.charAt(0)===x.charAt(0)?l+x+f*y:c===M?w:(c>M?l.substr(M):x.substr(c))+w}function g(f,y){for(var l=y._size,x=l.h/l.w,c={},M=Object.keys(f),w=0;w<M.length;w++){var p=M[w],_=f[p];if(typeof _=="string"){var h=_.match(/^[xy]*/)[0],L=h.length;_=+_.substr(L);for(var E=h.charAt(0)==="y"?x:1/x,S=0;S<L;S++)_*=E}c[p]=_}return c}V.enforce=function(y){var l=y._fullLayout,x=l._axisConstraintGroups||[],c,M,w,p,_,h,L,E;for(c=0;c<x.length;c++){w=g(x[c],l);var S=Object.keys(w),P=1/0,F=0,I=1/0,D={},R={},O=!1;for(M=0;M<S.length;M++)p=S[M],R[p]=_=l[A(p)],_._inputDomain?_.domain=_._inputDomain.slice():_._inputDomain=_.domain.slice(),_._inputRange||(_._inputRange=_.range.slice()),_.setScale(),D[p]=h=Math.abs(_._m)/w[p],P=Math.min(P,h),(_.constrain==="domain"||!_._constraintShrinkable)&&(I=Math.min(I,h)),delete _._constraintShrinkable,F=Math.max(F,h),_.constrain==="domain"&&(O=!0);if(!(P>i*F&&!O)){for(M=0;M<S.length;M++)if(p=S[M],h=D[p],_=R[p],L=_.constrain,h!==I||L==="domain")if(E=h/I,L==="range")e(_,E);else{var z=_._inputDomain,G=(_.domain[1]-_.domain[0])/(z[1]-z[0]),Y=(_.r2l(_.range[1])-_.r2l(_.range[0]))/(_.r2l(_._inputRange[1])-_.r2l(_._inputRange[0]));if(E/=G,E*Y<1){_.domain=_._input.domain=z.slice(),e(_,E);continue}if(Y<1&&(_.range=_._input.range=_._inputRange.slice(),E*=Y),_.autorange){var ee=_.r2l(_.range[0]),j=_.r2l(_.range[1]),X=(ee+j)/2,ie=X,he=X,K=Math.abs(j-X),$=X-K*E*1.0001,U=X+K*E*1.0001,H=u.makePadFn(l,_,0),q=u.makePadFn(l,_,1);d(_,E);var re=Math.abs(_._m),Z=u.concatExtremes(y,_),Q=Z.min,oe=Z.max,se,ae;for(ae=0;ae<Q.length;ae++)se=Q[ae].val-H(Q[ae])/re,se>$&&se<ie&&(ie=se);for(ae=0;ae<oe.length;ae++)se=oe[ae].val+q(oe[ae])/re,se<U&&se>he&&(he=se);var le=(he-ie)/(2*K);E/=le,ie=_.l2r(ie),he=_.l2r(he),_.range=_._input.range=ee<j?[ie,he]:[he,ie]}d(_,E)}}}},V.getAxisGroup=function(y,l){for(var x=y._axisMatchGroups,c=0;c<x.length;c++){var M=x[c];if(M[l])return"g"+c}return l},V.clean=function(y,l){if(l._inputDomain){for(var x=!1,c=l._id,M=y._fullLayout._axisConstraintGroups,w=0;w<M.length;w++)if(M[w][c]){x=!0;break}(!x||l.constrain!=="domain")&&(l._input.domain=l.domain=l._inputDomain,delete l._inputDomain)}};function d(f,y){var l=f._inputDomain,x=n[f.constraintoward],c=l[0]+(l[1]-l[0])*x;f.domain=f._input.domain=[c+(l[0]-c)/y,c+(l[1]-c)/y],f.setScale()}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=u.numberFormat,T=t("tinycolor2"),e=t("has-passive-events"),a=t("../../registry"),i=u.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/color"),v=t("../../components/drawing"),s=t("../../components/fx"),o=t("./axes"),b=t("../../lib/setcursor"),g=t("../../components/dragelement"),d=t("../../components/dragelement/helpers"),f=d.selectingOrDrawing,y=d.freeMode,l=t("../../constants/alignment").FROM_TL,x=t("../../lib/clear_gl_canvases"),c=t("../../plot_api/subroutines").redrawReglTraces,M=t("../plots"),w=t("./axis_ids").getFromId,p=t("../../components/selections").prepSelect,_=t("../../components/selections").clearOutline,h=t("../../components/selections").selectOnClick,L=t("./scale_zoom"),E=t("./constants"),S=E.MINDRAG,P=E.MINZOOM,F=!0;function I(se,ae,le,_e,fe,me,xe,ye){var be=se._fullLayout._zoomlayer,ke=xe+ye==="nsew",De=(xe+ye).length===1,He,Ae,Le,Ze,We,ze,Ie,Ve,dt,Ft,Qt,Ot,Ct,jt,Nt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe;function At(){if(He=ae.xaxis,Ae=ae.yaxis,dt=He._length,Ft=Ae._length,Ie=He._offset,Ve=Ae._offset,Le={},Le[He._id]=He,Ze={},Ze[Ae._id]=Ae,xe&&ye)for(var Ar=ae.overlays,Er=0;Er<Ar.length;Er++){var $r=Ar[Er].xaxis;Le[$r._id]=$r;var lr=Ar[Er].yaxis;Ze[lr._id]=lr}We=oe(Le),ze=oe(Ze),Ct=O(We,ye),jt=O(ze,xe),Nt=!jt&&!Ct,Ot=Z(se,se._fullLayout._axisMatchGroups,Le,Ze),Qt=Z(se,se._fullLayout._axisConstraintGroups,Le,Ze,Ot);var br=Qt.isSubplotConstrained||Ot.isSubplotConstrained;Lt=ye||br,Xe=xe||br;var Fr=se._fullLayout;it=Fr._has("scattergl"),Ye=Fr._has("splom"),Ee=Fr._has("svg")}At();var yt=j(jt+Ct,se._fullLayout.dragmode,ke),Mt=R(ae,xe+ye+"drag",yt,le,_e,fe,me);if(Nt&&!ke)return Mt.onmousedown=null,Mt.style.pointerEvents="none",Mt;var Gt={element:Mt,gd:se,plotinfo:ae};Gt.prepFn=function(Ar,Er,$r){var lr=Gt.dragmode,br=se._fullLayout.dragmode;br!==lr&&(Gt.dragmode=br),At(),Ke=se._fullLayout._invScaleX,qe=se._fullLayout._invScaleY,Nt||(ke?Ar.shiftKey?br==="pan"?br="zoom":f(br)||(br="pan"):Ar.ctrlKey&&(br="pan"):br="pan"),y(br)?Gt.minDrag=1:Gt.minDrag=void 0,f(br)?(Gt.xaxes=We,Gt.yaxes=ze,p(Ar,Er,$r,Gt,br)):(Gt.clickFn=Ht,f(lr)&&zt(),Nt||(br==="zoom"?(Gt.moveFn=tt,Gt.doneFn=lt,Gt.minDrag=1,Sr(Ar,Er,$r)):br==="pan"&&(Gt.moveFn=ot,Gt.doneFn=xt))),se._fullLayout._redrag=function(){var Fr=se._dragdata;if(Fr&&Fr.element===Mt){var Hr=se._fullLayout.dragmode;f(Hr)||(At(),Pt([0,0,dt,Ft]),Gt.moveFn(Fr.dx,Fr.dy))}}};function zt(){Gt.plotinfo.selection=!1,_(se)}function Ht(Ar,Er){var $r=Gt.gd;if($r._fullLayout._activeShapeIndex>=0){$r._fullLayout._deactivateShape($r);return}var lr=$r._fullLayout.clickmode;if($($r),Ar===2&&!De&&St(),ke)lr.indexOf("select")>-1&&h(Er,$r,We,ze,ae.id,Gt),lr.indexOf("event")>-1&&s.click($r,Er,ae.id);else if(Ar===1&&De){var br=xe?Ae:He,Fr=xe==="s"||ye==="w"?0:1,Hr=br._name+".range["+Fr+"]",Lr=z(br,Fr),at="left",Rt="middle";if(br.fixedrange)return;xe?(Rt=xe==="n"?"top":"bottom",br.side==="right"&&(at="right")):ye==="e"&&(at="right"),$r._context.showAxisRangeEntryBoxes&&m.select(Mt).call(n.makeEditable,{gd:$r,immediate:!0,background:$r._fullLayout.paper_bgcolor,text:String(Lr),fill:br.tickfont?br.tickfont.color:"#444",horizontalAlign:at,verticalAlign:Rt}).on("edit",function(Kt){var ur=br.d2r(Kt);ur!==void 0&&a.call("_guiRelayout",$r,Hr,ur)})}}g.init(Gt);var Zt,Wt,sr,Gr,cn,qr,st,rr,Jt,hr;function Sr(Ar,Er,$r){var lr=Mt.getBoundingClientRect();Zt=Er-lr.left,Wt=$r-lr.top,se._fullLayout._calcInverseTransform(se);var br=u.apply3DTransform(se._fullLayout._invTransform)(Zt,Wt);Zt=br[0],Wt=br[1],sr={l:Zt,r:Zt,w:0,t:Wt,b:Wt,h:0},Gr=se._hmpixcount?se._hmlumcount/se._hmpixcount:T(se._fullLayout.plot_bgcolor).getLuminance(),cn="M0,0H"+dt+"V"+Ft+"H0V0",qr=!1,st="xy",hr=!1,rr=X(be,Gr,Ie,Ve,cn),Jt=ie(be,Ie,Ve)}function tt(Ar,Er){if(se._transitioningWithDuration)return!1;var $r=Math.max(0,Math.min(dt,Ke*Ar+Zt)),lr=Math.max(0,Math.min(Ft,qe*Er+Wt)),br=Math.abs($r-Zt),Fr=Math.abs(lr-Wt);sr.l=Math.min(Zt,$r),sr.r=Math.max(Zt,$r),sr.t=Math.min(Wt,lr),sr.b=Math.max(Wt,lr);function Hr(){st="",sr.r=sr.l,sr.t=sr.b,Jt.attr("d","M0,0Z")}if(Qt.isSubplotConstrained)br>P||Fr>P?(st="xy",br/dt>Fr/Ft?(Fr=br*Ft/dt,Wt>lr?sr.t=Wt-Fr:sr.b=Wt+Fr):(br=Fr*dt/Ft,Zt>$r?sr.l=Zt-br:sr.r=Zt+br),Jt.attr("d",re(sr))):Hr();else if(Ot.isSubplotConstrained)if(br>P||Fr>P){st="xy";var Lr=Math.min(sr.l/dt,(Ft-sr.b)/Ft),at=Math.max(sr.r/dt,(Ft-sr.t)/Ft);sr.l=Lr*dt,sr.r=at*dt,sr.b=(1-Lr)*Ft,sr.t=(1-at)*Ft,Jt.attr("d",re(sr))}else Hr();else!jt||Fr<Math.min(Math.max(br*.6,S),P)?br<S||!Ct?Hr():(sr.t=0,sr.b=Ft,st="x",Jt.attr("d",H(sr,Wt))):!Ct||br<Math.min(Fr*.6,P)?(sr.l=0,sr.r=dt,st="y",Jt.attr("d",q(sr,Zt))):(st="xy",Jt.attr("d",re(sr)));sr.w=sr.r-sr.l,sr.h=sr.b-sr.t,st&&(hr=!0),se._dragged=hr,he(rr,Jt,sr,cn,qr,Gr),Qe(),se.emit("plotly_relayouting",Ge),qr=!0}function Qe(){Ge={},(st==="xy"||st==="x")&&(G(We,sr.l/dt,sr.r/dt,Ge,Qt.xaxes),ct("x",Ge)),(st==="xy"||st==="y")&&(G(ze,(Ft-sr.b)/Ft,(Ft-sr.t)/Ft,Ge,Qt.yaxes),ct("y",Ge))}function lt(){Qe(),$(se),xt(),U(se)}var ft=[0,0,dt,Ft],Et=null,Vt=E.REDRAWDELAY,Pe=ae.mainplot?se._fullLayout._plots[ae.mainplot]:ae;function Se(Ar){if(!se._context._scrollZoom.cartesian&&!se._fullLayout._enablescrollzoom)return;if(zt(),se._transitioningWithDuration){Ar.preventDefault(),Ar.stopPropagation();return}At(),clearTimeout(Et);var Er=-Ar.deltaY;if(isFinite(Er)||(Er=Ar.wheelDelta/10),!isFinite(Er)){u.log("Did not find wheel motion attributes: ",Ar);return}var $r=Math.exp(-Math.min(Math.max(Er,-20),20)/200),lr=Pe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),br=(Ar.clientX-lr.left)/lr.width,Fr=(lr.bottom-Ar.clientY)/lr.height,Hr;function Lr(at,Rt,Kt){if(at.fixedrange)return;var ur=u.simpleMap(at.range,at.r2l),Nr=ur[0]+(ur[1]-ur[0])*Rt;function Vr(Dr){return at.l2r(Nr+(Dr-Nr)*Kt)}at.range=ur.map(Vr)}if(Lt){for(ye||(br=.5),Hr=0;Hr<We.length;Hr++)Lr(We[Hr],br,$r);ct("x"),ft[2]*=$r,ft[0]+=ft[2]*br*(1/$r-1)}if(Xe){for(xe||(Fr=.5),Hr=0;Hr<ze.length;Hr++)Lr(ze[Hr],Fr,$r);ct("y"),ft[3]*=$r,ft[1]+=ft[3]*(1-Fr)*(1/$r-1)}Pt(ft),pt(),se.emit("plotly_relayouting",Ge),Et=setTimeout(function(){!se._fullLayout||(ft=[0,0,dt,Ft],xt())},Vt),Ar.preventDefault()}xe.length*ye.length!==1&&Q(Mt,Se);function ot(Ar,Er){if(Ar=Ar*Ke,Er=Er*qe,se._transitioningWithDuration)return;if(se._fullLayout._replotting=!0,Ct==="ew"||jt==="ns"){var $r=Ct?-Ar:0,lr=jt?-Er:0;if(Ot.isSubplotConstrained){if(Ct&&jt){var br=(Ar/dt-Er/Ft)/2;Ar=br*dt,Er=-br*Ft,$r=-Ar,lr=-Er}jt?$r=-lr*dt/Ft:lr=-$r*Ft/dt}Ct&&(Y(We,Ar),ct("x")),jt&&(Y(ze,Er),ct("y")),Pt([$r,lr,dt,Ft]),pt(),se.emit("plotly_relayouting",Ge);return}function Fr(Vr,Dr,Mr){for(var jr=1-Dr,kn,mn,Wn=0;Wn<Vr.length;Wn++){var In=Vr[Wn];if(!In.fixedrange){kn=In,mn=In._rl[jr]+(In._rl[Dr]-In._rl[jr])/ee(Mr/In._length);var Jn=In.l2r(mn);Jn!==!1&&Jn!==void 0&&(In.range[Dr]=Jn)}}return kn._length*(kn._rl[Dr]-mn)/(kn._rl[Dr]-kn._rl[jr])}var Hr=Ct==="w"==(jt==="n")?1:-1;if(Ct&&jt&&(Qt.isSubplotConstrained||Ot.isSubplotConstrained)){var Lr=(Ar/dt+Hr*Er/Ft)/2;Ar=Lr*dt,Er=Hr*Lr*Ft}var at,Rt;if(Ct==="w"?Ar=Fr(We,0,Ar):Ct==="e"?Ar=Fr(We,1,-Ar):Ct||(Ar=0),jt==="n"?Er=Fr(ze,1,Er):jt==="s"?Er=Fr(ze,0,-Er):jt||(Er=0),at=Ct==="w"?Ar:0,Rt=jt==="n"?Er:0,Qt.isSubplotConstrained&&!Ot.isSubplotConstrained||Ot.isSubplotConstrained&&Ct&&jt&&Hr>0){var Kt;if(Ot.isSubplotConstrained||!Ct&&jt.length===1){for(Kt=0;Kt<We.length;Kt++)We[Kt].range=We[Kt]._r.slice(),L(We[Kt],1-Er/Ft);Ar=Er*dt/Ft,at=Ar/2}if(Ot.isSubplotConstrained||!jt&&Ct.length===1){for(Kt=0;Kt<ze.length;Kt++)ze[Kt].range=ze[Kt]._r.slice(),L(ze[Kt],1-Ar/dt);Er=Ar*Ft/dt,Rt=Er/2}}(!Ot.isSubplotConstrained||!jt)&&ct("x"),(!Ot.isSubplotConstrained||!Ct)&&ct("y");var ur=dt-Ar,Nr=Ft-Er;Ot.isSubplotConstrained&&!(Ct&&jt)&&(Ct?(Rt=at?0:Ar*Ft/dt,Nr=ur*Ft/dt):(at=Rt?0:Er*dt/Ft,ur=Nr*dt/Ft)),Pt([at,Rt,ur,Nr]),pt(),se.emit("plotly_relayouting",Ge)}function ct(Ar,Er){for(var $r=Ot.isSubplotConstrained?{x:ze,y:We}[Ar]:Ot[Ar+"axes"],lr=Ot.isSubplotConstrained?{x:We,y:ze}[Ar]:[],br=0;br<$r.length;br++){var Fr=$r[br],Hr=Fr._id,Lr=Ot.xLinks[Hr]||Ot.yLinks[Hr],at=lr[0]||Le[Lr]||Ze[Lr];at&&(Er?(Er[Fr._name+".range[0]"]=Er[at._name+".range[0]"],Er[Fr._name+".range[1]"]=Er[at._name+".range[1]"]):Fr.range=at.range.slice())}}function pt(){var Ar=[],Er;function $r(Fr){for(Er=0;Er<Fr.length;Er++)Fr[Er].fixedrange||Ar.push(Fr[Er]._id)}for(Lt&&($r(We),$r(Qt.xaxes),$r(Ot.xaxes)),Xe&&($r(ze),$r(Qt.yaxes),$r(Ot.yaxes)),Ge={},Er=0;Er<Ar.length;Er++){var lr=Ar[Er],br=w(se,lr);o.drawOne(se,br,{skipTitle:!0}),Ge[br._name+".range[0]"]=br.range[0],Ge[br._name+".range[1]"]=br.range[1]}o.redrawComponents(se,Ar)}function St(){if(!se._transitioningWithDuration){var Ar=se._context.doubleClick,Er=[];Ct&&(Er=Er.concat(We)),jt&&(Er=Er.concat(ze)),Ot.xaxes&&(Er=Er.concat(Ot.xaxes)),Ot.yaxes&&(Er=Er.concat(Ot.yaxes));var $r={},lr,br,Fr;if(Ar==="reset+autosize"){for(Ar="autosize",br=0;br<Er.length;br++)if(lr=Er[br],lr._rangeInitial&&(lr.range[0]!==lr._rangeInitial[0]||lr.range[1]!==lr._rangeInitial[1])||!lr._rangeInitial&&!lr.autorange){Ar="reset";break}}if(Ar==="autosize")for(br=0;br<Er.length;br++)lr=Er[br],lr.fixedrange||($r[lr._name+".autorange"]=!0);else if(Ar==="reset")for((Ct||Qt.isSubplotConstrained)&&(Er=Er.concat(Qt.xaxes)),jt&&!Qt.isSubplotConstrained&&(Er=Er.concat(Qt.yaxes)),Qt.isSubplotConstrained&&(Ct?jt||(Er=Er.concat(ze)):Er=Er.concat(We)),br=0;br<Er.length;br++)lr=Er[br],lr.fixedrange||(lr._rangeInitial?(Fr=lr._rangeInitial,$r[lr._name+".range[0]"]=Fr[0],$r[lr._name+".range[1]"]=Fr[1]):$r[lr._name+".autorange"]=!0);se.emit("plotly_doubleclick",null),a.call("_guiRelayout",se,$r)}}function xt(){Pt([0,0,dt,Ft]),u.syncOrAsync([M.previousPromises,function(){se._fullLayout._replotting=!1,a.call("_guiRelayout",se,Ge)}],se)}function Pt(Ar){var Er=se._fullLayout,$r=Er._plots,lr=Er._subplots.cartesian,br,Fr,Hr,Lr;if(Ye&&a.subplotsRegistry.splom.drag(se),it){for(br=0;br<lr.length;br++)if(Fr=$r[lr[br]],Hr=Fr.xaxis,Lr=Fr.yaxis,Fr._scene){var at=u.simpleMap(Hr.range,Hr.r2l),Rt=u.simpleMap(Lr.range,Lr.r2l);Fr._scene.update({range:[at[0],Rt[0],at[1],Rt[1]]})}}if((Ye||it)&&(x(se),c(se)),Ee){var Kt=Ar[2]/He._length,ur=Ar[3]/Ae._length;for(br=0;br<lr.length;br++){Fr=$r[lr[br]],Hr=Fr.xaxis,Lr=Fr.yaxis;var Nr=(Lt||Ot.isSubplotConstrained)&&!Hr.fixedrange&&Le[Hr._id],Vr=(Xe||Ot.isSubplotConstrained)&&!Lr.fixedrange&&Ze[Lr._id],Dr,Mr,jr,kn;if(Nr?(Dr=Kt,jr=ye||Ot.isSubplotConstrained?Ar[0]:Pr(Hr,Dr)):Ot.xaHash[Hr._id]?(Dr=Kt,jr=Ar[0]*Hr._length/He._length):Ot.yaHash[Hr._id]?(Dr=ur,jr=jt==="ns"?-Ar[1]*Hr._length/Ae._length:Pr(Hr,Dr,{n:"top",s:"bottom"}[jt])):(Dr=Xt(Hr,Kt,ur),jr=or(Hr,Dr)),Vr?(Mr=ur,kn=xe||Ot.isSubplotConstrained?Ar[1]:Pr(Lr,Mr)):Ot.yaHash[Lr._id]?(Mr=ur,kn=Ar[1]*Lr._length/Ae._length):Ot.xaHash[Lr._id]?(Mr=Kt,kn=Ct==="ew"?-Ar[0]*Lr._length/He._length:Pr(Lr,Mr,{e:"right",w:"left"}[Ct])):(Mr=Xt(Lr,Kt,ur),kn=or(Lr,Mr)),!(!Dr&&!Mr)){Dr||(Dr=1),Mr||(Mr=1);var mn=Hr._offset-jr/Dr,Wn=Lr._offset-kn/Mr;Fr.clipRect.call(v.setTranslate,jr,kn).call(v.setScale,Dr,Mr),Fr.plot.call(v.setTranslate,mn,Wn).call(v.setScale,1/Dr,1/Mr),(Dr!==Fr.xScaleFactor||Mr!==Fr.yScaleFactor)&&(v.setPointGroupScale(Fr.zoomScalePts,Dr,Mr),v.setTextPointsScale(Fr.zoomScaleTxt,Dr,Mr)),v.hideOutsideRangePoints(Fr.clipOnAxisFalseTraces,Fr),Fr.xScaleFactor=Dr,Fr.yScaleFactor=Mr}}}}function Xt(Ar,Er,$r){return Ar.fixedrange?0:Lt&&Qt.xaHash[Ar._id]?Er:Xe&&(Qt.isSubplotConstrained?Qt.xaHash:Qt.yaHash)[Ar._id]?$r:0}function or(Ar,Er){return Er?(Ar.range=Ar._r.slice(),L(Ar,Er),Pr(Ar,Er)):0}function Pr(Ar,Er,$r){return Ar._length*(1-Er)*l[$r||Ar.constraintoward||"middle"]}return Mt}function D(se,ae,le,_e){var fe=u.ensureSingle(se.draglayer,ae,le,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",se.id)});return fe.call(b,_e),fe.node()}function R(se,ae,le,_e,fe,me,xe){var ye=D(se,"rect",ae,le);return m.select(ye).call(v.setRect,_e,fe,me,xe),ye}function O(se,ae){for(var le=0;le<se.length;le++)if(!se[le].fixedrange)return ae;return""}function z(se,ae){var le=se.range[ae],_e=Math.abs(le-se.range[1-ae]),fe;return se.type==="date"?le:se.type==="log"?(fe=Math.ceil(Math.max(0,-Math.log(_e)/Math.LN10))+3,A("."+fe+"g")(Math.pow(10,le))):(fe=Math.floor(Math.log(Math.abs(le))/Math.LN10)-Math.floor(Math.log(_e)/Math.LN10)+4,A("."+String(fe)+"g")(le))}function G(se,ae,le,_e,fe){for(var me=0;me<se.length;me++){var xe=se[me];if(!xe.fixedrange)if(xe.rangebreaks){var ye=xe._id.charAt(0)==="y",be=ye?1-ae:ae,ke=ye?1-le:le;_e[xe._name+".range[0]"]=xe.l2r(xe.p2l(be*xe._length)),_e[xe._name+".range[1]"]=xe.l2r(xe.p2l(ke*xe._length))}else{var De=xe._rl[0],He=xe._rl[1]-De;_e[xe._name+".range[0]"]=xe.l2r(De+He*ae),_e[xe._name+".range[1]"]=xe.l2r(De+He*le)}}if(fe&&fe.length){var Ae=(ae+(1-le))/2;G(fe,Ae,1-Ae,_e,[])}}function Y(se,ae){for(var le=0;le<se.length;le++){var _e=se[le];if(!_e.fixedrange)if(_e.rangebreaks){var fe=0,me=_e._length,xe=_e.p2l(fe+ae)-_e.p2l(fe),ye=_e.p2l(me+ae)-_e.p2l(me),be=(xe+ye)/2;_e.range=[_e.l2r(_e._rl[0]-be),_e.l2r(_e._rl[1]-be)]}else _e.range=[_e.l2r(_e._rl[0]-ae/_e._m),_e.l2r(_e._rl[1]-ae/_e._m)]}}function ee(se){return 1-(se>=0?Math.min(se,.9):1/(1/Math.max(se,-.3)+3.222))}function j(se,ae,le){return se?se==="nsew"?le?"":ae==="pan"?"move":"crosshair":se.toLowerCase()+"-resize":"pointer"}function X(se,ae,le,_e,fe){return se.append("path").attr("class","zoombox").style({fill:ae>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(le,_e)).attr("d",fe+"Z")}function ie(se,ae,le){return se.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(ae,le)).attr("d","M0,0Z")}function he(se,ae,le,_e,fe,me){se.attr("d",_e+"M"+le.l+","+le.t+"v"+le.h+"h"+le.w+"v-"+le.h+"h-"+le.w+"Z"),K(se,ae,fe,me)}function K(se,ae,le,_e){le||(se.transition().style("fill",_e>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ae.transition().style("opacity",1).duration(200))}function $(se){m.select(se).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(se){F&&se.data&&se._context.showTips&&(u.notifier(u._(se,"Double-click to zoom back out"),"long"),F=!1)}function H(se,ae){return"M"+(se.l-.5)+","+(ae-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(se.r+.5)+","+(ae-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function q(se,ae){return"M"+(ae-P-.5)+","+(se.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(ae-P-.5)+","+(se.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function re(se){var ae=Math.floor(Math.min(se.b-se.t,se.r-se.l,P)/2);return"M"+(se.l-3.5)+","+(se.t-.5+ae)+"h3v"+-ae+"h"+ae+"v-3h-"+(ae+3)+"ZM"+(se.r+3.5)+","+(se.t-.5+ae)+"h-3v"+-ae+"h"+-ae+"v-3h"+(ae+3)+"ZM"+(se.r+3.5)+","+(se.b+.5-ae)+"h-3v"+ae+"h"+-ae+"v3h"+(ae+3)+"ZM"+(se.l-3.5)+","+(se.b+.5-ae)+"h3v"+ae+"h"+ae+"v3h-"+(ae+3)+"Z"}function Z(se,ae,le,_e,fe){for(var me=!1,xe={},ye={},be,ke,De,He,Ae=(fe||{}).xaHash,Le=(fe||{}).yaHash,Ze=0;Ze<ae.length;Ze++){var We=ae[Ze];for(be in le)if(We[be]){for(De in We)!(fe&&(Ae[De]||Le[De]))&&!(De.charAt(0)==="x"?le:_e)[De]&&(xe[De]=be);for(ke in _e)!(fe&&(Ae[ke]||Le[ke]))&&We[ke]&&(me=!0)}for(ke in _e)if(We[ke])for(He in We)!(fe&&(Ae[He]||Le[He]))&&!(He.charAt(0)==="x"?le:_e)[He]&&(ye[He]=ke)}me&&(u.extendFlat(xe,ye),ye={});var ze={},Ie=[];for(De in xe){var Ve=w(se,De);Ie.push(Ve),ze[Ve._id]=Ve}var dt={},Ft=[];for(He in ye){var Qt=w(se,He);Ft.push(Qt),dt[Qt._id]=Qt}return{xaHash:ze,yaHash:dt,xaxes:Ie,yaxes:Ft,xLinks:xe,yLinks:ye,isSubplotConstrained:me}}function Q(se,ae){if(!e)se.onwheel!==void 0?se.onwheel=ae:se.onmousewheel!==void 0?se.onmousewheel=ae:se.isAddedWheelEvent||(se.isAddedWheelEvent=!0,se.addEventListener("wheel",ae,{passive:!1}));else{var le=se.onwheel!==void 0?"wheel":"mousewheel";se._onwheel&&se.removeEventListener(le,se._onwheel),se._onwheel=ae,se.addEventListener(le,ae,{passive:!1})}}function oe(se){var ae=[];for(var le in se)ae.push(se[le]);return ae}N.exports={makeDragBox:I,makeDragger:D,makeRectDragger:R,makeZoombox:X,makeCorners:ie,updateZoombox:he,xyCorners:re,transitionZoombox:K,removeZoombox:$,showDoubleClickNotifier:U,attachWheelEventHandler:Q}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/fx"),A=t("../../components/dragelement"),T=t("../../lib/setcursor"),e=t("./dragbox").makeDragBox,a=t("./constants").DRAGGERSIZE;V.initInteractions=function(n){var r=n._fullLayout;if(n._context.staticPlot){m.select(n).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var v=Object.keys(r._plots||{}).sort(function(o,b){if((r._plots[o].mainplot&&!0)===(r._plots[b].mainplot&&!0)){var g=o.split("y"),d=b.split("y");return g[0]===d[0]?Number(g[1]||1)-Number(d[1]||1):Number(g[0]||1)-Number(d[0]||1)}return r._plots[o].mainplot?1:-1});v.forEach(function(o){var b=r._plots[o],g=b.xaxis,d=b.yaxis;if(!b.mainplot){var f=e(n,b,g._offset,d._offset,g._length,d._length,"ns","ew");f.onmousemove=function(x){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===o&&n._fullLayout._plots[o]&&u.hover(n,x,o)},u.hover(n,x,o),n._fullLayout._lasthover=f,n._fullLayout._hoversubplot=o},f.onmouseout=function(x){n._dragging||(n._fullLayout._hoversubplot=null,A.unhover(n,x))},n._context.showAxisDragHandles&&(e(n,b,g._offset-a,d._offset-a,a,a,"n","w"),e(n,b,g._offset+g._length,d._offset-a,a,a,"n","e"),e(n,b,g._offset-a,d._offset+d._length,a,a,"s","w"),e(n,b,g._offset+g._length,d._offset+d._length,a,a,"s","e"))}if(n._context.showAxisDragHandles){if(o===g._mainSubplot){var y=g._mainLinePosition;g.side==="top"&&(y-=a),e(n,b,g._offset+g._length*.1,y,g._length*.8,a,"","ew"),e(n,b,g._offset,y,g._length*.1,a,"","w"),e(n,b,g._offset+g._length*.9,y,g._length*.1,a,"","e")}if(o===d._mainSubplot){var l=d._mainLinePosition;d.side!=="right"&&(l-=a),e(n,b,l,d._offset+d._length*.1,a,d._length*.8,"ns",""),e(n,b,l,d._offset+d._length*.9,a,d._length*.1,"s",""),e(n,b,l,d._offset,a,d._length*.1,"n","")}}});var s=r._hoverlayer.node();s.onmousemove=function(o){o.target=n._fullLayout._lasthover,u.hover(n,o,r._hoversubplot)},s.onclick=function(o){o.target=n._fullLayout._lasthover,u.click(n,o)},s.onmousedown=function(o){n._fullLayout._lasthover.onmousedown(o)},V.updateFx(n)}},V.updateFx=function(i){var n=i._fullLayout,r=n.dragmode==="pan"?"move":"crosshair";T(n._draggers,r)}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("./axis_ids");N.exports=function(e){return function(i,n){var r=i[e];if(!!Array.isArray(r))for(var v=m.subplotsRegistry.cartesian,s=v.idRegex,o=n._subplots,b=o.xaxis,g=o.yaxis,d=o.cartesian,f=n._has("cartesian")||n._has("gl2d"),y=0;y<r.length;y++){var l=r[y];if(!!u.isPlainObject(l)){var x=A.cleanId(l.xref,"x",!1),c=A.cleanId(l.yref,"y",!1),M=s.x.test(x),w=s.y.test(c);if(M||w){f||u.pushUnique(n._basePlotModules,v);var p=!1;M&&b.indexOf(x)===-1&&(b.push(x),p=!0),w&&g.indexOf(c)===-1&&(g.push(c),p=!0),p&&M&&w&&d.push(x+c)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../registry"),A=t("../../lib"),T=t("../plots"),e=t("../../components/drawing"),a=t("../get_data").getModuleCalcData,i=t("./axis_ids"),n=t("./constants"),r=t("../../constants/xmlns_namespaces"),v=A.ensureSingle;function s(y,l,x){return A.ensureSingle(y,l,x,function(c){c.datum(x)})}V.name="cartesian",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=n.idRegex,V.attrRegex=n.attrRegex,V.attributes=t("./attributes"),V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.transitionAxes=t("./transition_axes"),V.finalizeSubplots=function(y,l){var x=l._subplots,c=x.xaxis,M=x.yaxis,w=x.cartesian,p=w.concat(x.gl2d||[]),_={},h={},L,E,S;for(L=0;L<p.length;L++){var P=p[L].split("y");_[P[0]]=1,h["y"+P[1]]=1}for(L=0;L<c.length;L++)E=c[L],_[E]||(S=(y[i.id2name(E)]||{}).anchor,n.idRegex.y.test(S)||(S="y"),w.push(E+S),p.push(E+S),h[S]||(h[S]=1,A.pushUnique(M,S)));for(L=0;L<M.length;L++)S=M[L],h[S]||(E=(y[i.id2name(S)]||{}).anchor,n.idRegex.x.test(E)||(E="x"),w.push(E+S),p.push(E+S),_[E]||(_[E]=1,A.pushUnique(c,E)));if(!p.length){E="",S="";for(var F in y)if(n.attrRegex.test(F)){var I=F.charAt(0);I==="x"?(!E||+F.substr(5)<+E.substr(5))&&(E=F):(!S||+F.substr(5)<+S.substr(5))&&(S=F)}E=E?i.name2id(E):"x",S=S?i.name2id(S):"y",c.push(E),M.push(S),w.push(E+S)}},V.plot=function(y,l,x,c){var M=y._fullLayout,w=M._subplots.cartesian,p=y.calcdata,_;if(!Array.isArray(l))for(l=[],_=0;_<p.length;_++)l.push(_);for(_=0;_<w.length;_++){for(var h=w[_],L=M._plots[h],E=[],S,P=0;P<p.length;P++){var F=p[P],I=F[0].trace;I.xaxis+I.yaxis===h&&((l.indexOf(I.index)!==-1||I.carpet)&&(S&&S[0].trace.xaxis+S[0].trace.yaxis===h&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&E.indexOf(S)===-1&&E.push(S),E.push(F)),S=F)}o(y,L,E,x,c)}};function o(y,l,x,c,M){for(var w=n.traceLayerClasses,p=y._fullLayout,_=p._modules,h,L,E,S=[],P=[],F=0;F<_.length;F++){h=_[F];var I=h.name,D=u.modules[I].categories;if(D.svg){var R=h.layerName||I+"layer",O=h.plot;L=a(x,O),E=L[0],x=L[1],E.length&&S.push({i:w.indexOf(R),className:R,plotMethod:O,cdModule:E}),D.zoomScale&&P.push("."+R)}}S.sort(function(Y,ee){return Y.i-ee.i});var z=l.plot.selectAll("g.mlayer").data(S,function(Y){return Y.className});if(z.enter().append("g").attr("class",function(Y){return Y.className}).classed("mlayer",!0).classed("rangeplot",l.isRangePlot),z.exit().remove(),z.order(),z.each(function(Y){var ee=m.select(this),j=Y.className;Y.plotMethod(y,l,Y.cdModule,ee,c,M),n.clipOnAxisFalseQuery.indexOf("."+j)===-1&&e.setClipUrl(ee,l.layerClipId,y)}),p._has("scattergl")&&(h=u.getModule("scattergl"),E=a(x,h)[0],h.plot(y,l,E)),!y._context.staticPlot&&(l._hasClipOnAxisFalse&&(l.clipOnAxisFalseTraces=l.plot.selectAll(n.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var G=l.plot.selectAll(P.join(",")).selectAll(".trace");l.zoomScalePts=G.selectAll("path.point"),l.zoomScaleTxt=G.selectAll(".textpoint")}}V.clean=function(y,l,x,c){var M=c._plots||{},w=l._plots||{},p=c._subplots||{},_,h,L;if(c._hasOnlyLargeSploms&&!l._hasOnlyLargeSploms)for(L in M)_=M[L],_.plotgroup&&_.plotgroup.remove();var E=c._has&&c._has("gl"),S=l._has&&l._has("gl");if(E&&!S)for(L in M)_=M[L],_._scene&&_._scene.destroy();if(p.xaxis&&p.yaxis){var P=i.listIds({_fullLayout:c});for(h=0;h<P.length;h++){var F=P[h];l[i.id2name(F)]||c._infolayer.selectAll(".g-"+F+"title").remove()}}var I=c._has&&c._has("cartesian"),D=l._has&&l._has("cartesian");if(I&&!D)d(c._cartesianlayer.selectAll(".subplot"),c),c._defs.selectAll(".axesclip").remove(),delete c._axisConstraintGroups,delete c._axisMatchGroups;else if(p.cartesian)for(h=0;h<p.cartesian.length;h++){var R=p.cartesian[h];if(!w[R]){var O="."+R+",."+R+"-x,."+R+"-y";c._cartesianlayer.selectAll(O).remove(),f(R,c)}}},V.drawFramework=function(y){var l=y._fullLayout,x=b(y),c=l._cartesianlayer.selectAll(".subplot").data(x,String);c.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),c.order(),c.exit().call(d,l),c.each(function(M){var w=M[0],p=l._plots[w];p.plotgroup=m.select(this),g(y,p),p.draglayer=v(l._draggers,"g",w)})},V.rangePlot=function(y,l,x){g(y,l),o(y,l,x),T.style(y)};function b(y){var l=y._fullLayout,x=l._subplots.cartesian,c=x.length,M,w,p,_,h,L,E=[],S=[];for(M=0;M<c;M++){p=x[M],_=l._plots[p],h=_.xaxis,L=_.yaxis;var P=h._mainAxis,F=L._mainAxis,I=P._id+F._id,D=l._plots[I];_.overlays=[],I!==p&&D?(_.mainplot=I,_.mainplotinfo=D,S.push(p)):(_.mainplot=void 0,_.mainplotinfo=void 0,E.push(p))}for(M=0;M<S.length;M++)p=S[M],_=l._plots[p],_.mainplotinfo.overlays.push(_);var R=E.concat(S),O=new Array(c);for(M=0;M<c;M++){p=R[M],_=l._plots[p],h=_.xaxis,L=_.yaxis;var z=[p,h.layer,L.layer,h.overlaying||"",L.overlaying||""];for(w=0;w<_.overlays.length;w++)z.push(_.overlays[w].id);O[M]=z}return O}function g(y,l){var x=l.plotgroup,c=l.id,M=n.layerValue2layerClass[l.xaxis.layer],w=n.layerValue2layerClass[l.yaxis.layer],p=y._fullLayout._hasOnlyLargeSploms;if(l.mainplot){var h=l.mainplotinfo,L=h.plotgroup,E=c+"-x",S=c+"-y";l.minorGridlayer=h.minorGridlayer,l.gridlayer=h.gridlayer,l.zerolinelayer=h.zerolinelayer,v(h.overlinesBelow,"path",E),v(h.overlinesBelow,"path",S),v(h.overaxesBelow,"g",E),v(h.overaxesBelow,"g",S),l.plot=v(h.overplot,"g",c),v(h.overlinesAbove,"path",E),v(h.overlinesAbove,"path",S),v(h.overaxesAbove,"g",E),v(h.overaxesAbove,"g",S),l.xlines=L.select(".overlines-"+M).select("."+E),l.ylines=L.select(".overlines-"+w).select("."+S),l.xaxislayer=L.select(".overaxes-"+M).select("."+E),l.yaxislayer=L.select(".overaxes-"+w).select("."+S)}else if(p)l.xlines=v(x,"path","xlines-above"),l.ylines=v(x,"path","ylines-above"),l.xaxislayer=v(x,"g","xaxislayer-above"),l.yaxislayer=v(x,"g","yaxislayer-above");else{var _=v(x,"g","layer-subplot");l.shapelayer=v(_,"g","shapelayer"),l.imagelayer=v(_,"g","imagelayer"),l.minorGridlayer=v(x,"g","minor-gridlayer"),l.gridlayer=v(x,"g","gridlayer"),l.zerolinelayer=v(x,"g","zerolinelayer"),v(x,"path","xlines-below"),v(x,"path","ylines-below"),l.overlinesBelow=v(x,"g","overlines-below"),v(x,"g","xaxislayer-below"),v(x,"g","yaxislayer-below"),l.overaxesBelow=v(x,"g","overaxes-below"),l.plot=v(x,"g","plot"),l.overplot=v(x,"g","overplot"),l.xlines=v(x,"path","xlines-above"),l.ylines=v(x,"path","ylines-above"),l.overlinesAbove=v(x,"g","overlines-above"),v(x,"g","xaxislayer-above"),v(x,"g","yaxislayer-above"),l.overaxesAbove=v(x,"g","overaxes-above"),l.xlines=x.select(".xlines-"+M),l.ylines=x.select(".ylines-"+w),l.xaxislayer=x.select(".xaxislayer-"+M),l.yaxislayer=x.select(".yaxislayer-"+w)}p||(s(l.minorGridlayer,"g",l.xaxis._id),s(l.minorGridlayer,"g",l.yaxis._id),l.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort),s(l.gridlayer,"g",l.xaxis._id),s(l.gridlayer,"g",l.yaxis._id),l.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort)),l.xlines.style("fill","none").classed("crisp",!0),l.ylines.style("fill","none").classed("crisp",!0)}function d(y,l){if(!!y){var x={};y.each(function(h){var L=h[0],E=m.select(this);E.remove(),f(L,l),x[L]=!0});for(var c in l._plots)for(var M=l._plots[c],w=M.overlays||[],p=0;p<w.length;p++){var _=w[p];x[_.id]&&_.plot.selectAll(".trace").remove()}}}function f(y,l){l._draggers.selectAll("g."+y).remove(),l._defs.select("#clip"+l._uid+y+"plot").remove()}V.toSVG=function(y){var l=y._fullLayout._glimages,x=m.select(y).selectAll(".svg-container"),c=x.filter(function(w,p){return p===x.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function M(){var w=this,p=w.toDataURL("image/png"),_=l.append("svg:image");_.attr({xmlns:r.svg,"xlink:href":p,preserveAspectRatio:"none",x:0,y:0,width:w.style.width,height:w.style.height})}c.each(M)},V.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(t,N,V){var m=t("../font_attributes"),u=t("../../components/color/attributes"),A=t("../../components/drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray,a=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,i=t("../../constants/numerical").ONEDAY,n=t("./constants"),r=n.HOUR_PATTERN,v=n.WEEKDAY_PATTERN,s={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function o(_){return{valType:"integer",min:0,dflt:_?5:0,editType:"ticks"}}var b={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"data_array",editType:"ticks"},f={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function y(_){var h={valType:"number",min:0,editType:"ticks"};return _||(h.dflt=5),h}function l(_){var h={valType:"number",min:0,editType:"ticks"};return _||(h.dflt=1),h}var x={valType:"color",dflt:u.defaultLine,editType:"ticks"},c={valType:"color",dflt:u.lightLine,editType:"ticks"};function M(_){var h={valType:"number",min:0,editType:"ticks"};return _||(h.dflt=1),h}var w=T({},A,{editType:"ticks"}),p={valType:"boolean",editType:"ticks"};N.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:u.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:m({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[v,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:i},editType:"calc"}),tickmode:s,nticks:o(),tick0:b,dtick:g,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:d,ticktext:{valType:"data_array",editType:"ticks"},ticks:f,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:y(),tickwidth:l(),tickcolor:x,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},A,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:m({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:u.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:p,gridcolor:c,gridwidth:M(),griddash:w,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:u.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:u.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},minor:{tickmode:s,nticks:o("minor"),tick0:b,dtick:g,tickvals:d,ticks:f,ticklen:y("minor"),tickwidth:l("minor"),tickcolor:x,gridcolor:c,gridwidth:M("minor"),griddash:w,showgrid:p,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:m({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color"),A=t("../../components/fx/helpers").isUnifiedHover,T=t("../../components/fx/hovermode_defaults"),e=t("../../plot_api/plot_template"),a=t("../layout_attributes"),i=t("./layout_attributes"),n=t("./type_defaults"),r=t("./axis_defaults"),v=t("./constraints"),s=t("./position_defaults"),o=t("./axis_ids"),b=o.id2name,g=o.name2id,d=t("./constants").AX_ID_PATTERN,f=t("../../registry"),y=f.traceIs,l=f.getComponentMethod;function x(c,M,w){Array.isArray(c[M])?c[M].push(w):c[M]=[w]}N.exports=function(M,w,p){var _=w.autotypenumbers,h={},L={},E={},S={},P={},F={},I={},D={},R={},O={},z,G;for(z=0;z<p.length;z++){var Y=p[z];if(!(!y(Y,"cartesian")&&!y(Y,"gl2d"))){var ee;if(Y.xaxis)ee=b(Y.xaxis),x(h,ee,Y);else if(Y.xaxes)for(G=0;G<Y.xaxes.length;G++)x(h,b(Y.xaxes[G]),Y);var j;if(Y.yaxis)j=b(Y.yaxis),x(h,j,Y);else if(Y.yaxes)for(G=0;G<Y.yaxes.length;G++)x(h,b(Y.yaxes[G]),Y);if(Y.type==="funnel"?Y.orientation==="h"?(ee&&(L[ee]=!0),j&&(I[j]=!0)):j&&(E[j]=!0):Y.type==="image"?(j&&(D[j]=!0),ee&&(D[ee]=!0)):(j&&(P[j]=!0,F[j]=!0),(!y(Y,"carpet")||Y.type==="carpet"&&!Y._cheater)&&ee&&(S[ee]=!0)),Y.type==="carpet"&&Y._cheater&&ee&&(L[ee]=!0),y(Y,"2dMap")&&(R[ee]=!0,R[j]=!0),y(Y,"oriented")){var X=Y.orientation==="h"?j:ee;O[X]=!0}}}var ie=w._subplots,he=ie.xaxis,K=ie.yaxis,$=m.simpleMap(he,b),U=m.simpleMap(K,b),H=$.concat(U),q=u.background;he.length&&K.length&&(q=m.coerce(M,w,a,"plot_bgcolor"));var re=u.combine(q,w.paper_bgcolor),Z,Q,oe,se,ae;function le(){var Ye=h[Z]||[];ae._traceIndices=Ye.map(function(Ee){return Ee._expandedIndex}),ae._annIndices=[],ae._shapeIndices=[],ae._selectionIndices=[],ae._imgIndices=[],ae._subplotsWith=[],ae._counterAxes=[],ae._name=ae._attr=Z,ae._id=Q}function _e(Ye,Ee){return m.coerce(se,ae,i,Ye,Ee)}function fe(Ye,Ee){return m.coerce2(se,ae,i,Ye,Ee)}function me(Ye){return Ye==="x"?K:he}function xe(Ye,Ee){for(var Ge=Ye==="x"?$:U,Ke=[],qe=0;qe<Ge.length;qe++){var At=Ge[qe];At!==Ee&&!(M[At]||{}).overlaying&&Ke.push(g(At))}return Ke}var ye={x:me("x"),y:me("y")},be=ye.x.concat(ye.y),ke={},De=[];function He(){var Ye=se.matches;d.test(Ye)&&be.indexOf(Ye)===-1&&(ke[Ye]=se.type,De=Object.keys(ke))}var Ae=T(M,w),Le=A(Ae);for(z=0;z<H.length;z++){Z=H[z],Q=g(Z),oe=Z.charAt(0),m.isPlainObject(M[Z])||(M[Z]={}),se=M[Z],ae=e.newContainer(w,Z,oe+"axis"),le();var Ze=oe==="x"&&!S[Z]&&L[Z]||oe==="y"&&!P[Z]&&E[Z],We=oe==="y"&&(!F[Z]&&I[Z]||D[Z]),ze={hasMinor:!0,letter:oe,font:w.font,outerTicks:R[Z],showGrid:!O[Z],data:h[Z]||[],bgColor:re,calendar:w.calendar,automargin:!0,visibleDflt:Ze,reverseDflt:We,autotypenumbersDflt:_,splomStash:((w._splomAxes||{})[oe]||{})[Q]};_e("uirevision",w.uirevision),n(se,ae,_e,ze),r(se,ae,_e,ze,w);var Ie=Le&&oe===Ae.charAt(0),Ve=fe("spikecolor",Le?ae.color:void 0),dt=fe("spikethickness",Le?1.5:void 0),Ft=fe("spikedash",Le?"dot":void 0),Qt=fe("spikemode",Le?"across":void 0),Ot=fe("spikesnap"),Ct=_e("showspikes",!!Ie||!!Ve||!!dt||!!Ft||!!Qt||!!Ot);Ct||(delete ae.spikecolor,delete ae.spikethickness,delete ae.spikedash,delete ae.spikemode,delete ae.spikesnap),s(se,ae,_e,{letter:oe,counterAxes:ye[oe],overlayableAxes:xe(oe,Z),grid:w.grid}),_e("title.standoff"),He(),ae._input=se}for(z=0;z<De.length;){Q=De[z++],Z=b(Q),oe=Z.charAt(0),m.isPlainObject(M[Z])||(M[Z]={}),se=M[Z],ae=e.newContainer(w,Z,oe+"axis"),le();var jt={letter:oe,font:w.font,outerTicks:R[Z],showGrid:!O[Z],data:[],bgColor:re,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:_,splomStash:((w._splomAxes||{})[oe]||{})[Q]};_e("uirevision",w.uirevision),ae.type=ke[Q]||"linear",r(se,ae,_e,jt,w),s(se,ae,_e,{letter:oe,counterAxes:ye[oe],overlayableAxes:xe(oe,Z),grid:w.grid}),_e("fixedrange"),He(),ae._input=se}var Nt=l("rangeslider","handleDefaults"),Lt=l("rangeselector","handleDefaults");for(z=0;z<$.length;z++)Z=$[z],se=M[Z],ae=w[Z],Nt(M,w,Z),ae.type==="date"&&Lt(se,ae,w,U,ae.calendar),_e("fixedrange");for(z=0;z<U.length;z++){Z=U[z],se=M[Z],ae=w[Z];var Xe=w[b(ae.anchor)],it=l("rangeslider","isVisible")(Xe);_e("fixedrange",it)}v.handleDefaults(M,w,{axIds:be.concat(De).sort(o.idSort),axHasImage:D})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(t,N,V){var m=t("tinycolor2").mix,u=t("../../components/color/attributes"),A=t("../../lib");N.exports=function(e,a,i,n){n=n||{};var r=n.dfltColor;function v(E,S){return A.coerce2(e,a,n.attributes,E,S)}var s=v("linecolor",r),o=v("linewidth"),b=i("showline",n.showLine||!!s||!!o);b||(delete a.linecolor,delete a.linewidth);var g=m(r,n.bgColor,n.blend||u.lightFraction).toRgbString(),d=v("gridcolor",g),f=v("gridwidth"),y=v("griddash"),l=i("showgrid",n.showGrid||!!d||!!f||!!y);if(l||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),n.hasMinor){var x=m(a.gridcolor,n.bgColor,67).toRgbString(),c=v("minor.gridcolor",x),M=v("minor.gridwidth",a.gridwidth||1),w=v("minor.griddash",a.griddash||"solid"),p=i("minor.showgrid",!!c||!!M||!!w);p||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!n.noZeroLine){var _=v("zerolinecolor",r),h=v("zerolinewidth"),L=i("zeroline",n.showGrid||!!_||!!h);L||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib");N.exports=function(T,e,a,i){var n=i.counterAxes||[],r=i.overlayableAxes||[],v=i.letter,s=i.grid,o,b,g,d;s&&(b=s._domains[v][s._axisMap[e._id]],o=s._anchors[e._id],b&&(g=s[v+"side"].split(" ")[0],d=s.domain[v][g==="right"||g==="top"?1:0])),b=b||[0,1],o=o||(m(T.position)?"free":n[0]||"free"),g=g||(v==="x"?"bottom":"left"),d=d||0;var f=u.coerce(T,e,{anchor:{valType:"enumerated",values:["free"].concat(n),dflt:o}},"anchor");f==="free"&&a("position",d),u.coerce(T,e,{side:{valType:"enumerated",values:v==="x"?["bottom","top"]:["left","right"],dflt:g}},"side");var y=!1;if(r.length&&(y=u.coerce(T,e,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!y){var l=a("domain",b);l[0]>l[1]-1/4096&&(e.domain=b),u.noneOrAll(T.domain,e.domain,b)}return a("layer"),e}},{"../../lib":515,"fast-isnumeric":190}],583:[function(t,N,V){var m=t("./show_dflt");N.exports=function(A,T,e,a,i){i||(i={});var n=i.tickSuffixDflt,r=m(A),v=e("tickprefix");v&&e("showtickprefix",r);var s=e("ticksuffix",n);s&&e("showticksuffix",r)}},{"./show_dflt":586}],584:[function(t,N,V){var m=t("../../constants/alignment").FROM_BL;N.exports=function(A,T,e){e===void 0&&(e=m[A.constraintoward||"center"]);var a=[A.r2l(A.range[0]),A.r2l(A.range[1])],i=a[0]+(a[1]-a[0])*e;A.range=A._input.range=[A.l2r(i+(a[0]-i)*T),A.l2r(i+(a[1]-i)*T)],A.setScale()}},{"../../constants/alignment":483}],585:[function(t,N,V){var m=t("@plotly/d3"),u=t("d3-time-format").utcFormat,A=t("../../lib"),T=A.numberFormat,e=t("fast-isnumeric"),a=A.cleanNumber,i=A.ms2DateTime,n=A.dateTime2ms,r=A.ensureNumber,v=A.isArrayOrTypedArray,s=t("../../constants/numerical"),o=s.FP_SAFE,b=s.BADNUM,g=s.LOG_CLIP,d=s.ONEWEEK,f=s.ONEDAY,y=s.ONEHOUR,l=s.ONEMIN,x=s.ONESEC,c=t("./axis_ids"),M=t("./constants"),w=M.HOUR_PATTERN,p=M.WEEKDAY_PATTERN;function _(L){return Math.pow(10,L)}function h(L){return L!=null}N.exports=function(E,S){S=S||{};var P=E._id||"x",F=P.charAt(0);function I(H,q){if(H>0)return Math.log(H)/Math.LN10;if(H<=0&&q&&E.range&&E.range.length===2){var re=E.range[0],Z=E.range[1];return .5*(re+Z-2*g*Math.abs(re-Z))}else return b}function D(H,q,re,Z){if((Z||{}).msUTC&&e(H))return+H;var Q=n(H,re||E.calendar);if(Q===b)if(e(H)){H=+H;var oe=Math.floor(A.mod(H+.05,1)*10),se=Math.round(H-oe/10);Q=n(new Date(se))+oe/10}else return b;return Q}function R(H,q,re){return i(H,q,re||E.calendar)}function O(H){return E._categories[Math.round(H)]}function z(H){if(h(H)){if(E._categoriesMap===void 0&&(E._categoriesMap={}),E._categoriesMap[H]!==void 0)return E._categoriesMap[H];E._categories.push(typeof H=="number"?String(H):H);var q=E._categories.length-1;return E._categoriesMap[H]=q,q}return b}function G(H,q){for(var re=new Array(q),Z=0;Z<q;Z++){var Q=(H[0]||[])[Z],oe=(H[1]||[])[Z];re[Z]=Y([Q,oe])}return re}function Y(H){if(E._categoriesMap)return E._categoriesMap[H]}function ee(H){var q=Y(H);if(q!==void 0)return q;if(e(H))return+H}function j(H){return e(H)?+H:Y(H)}function X(H,q,re){return m.round(re+q*H,2)}function ie(H,q,re){return(H-re)/q}var he=function(q){return e(q)?X(q,E._m,E._b):b},K=function(H){return ie(H,E._m,E._b)};if(E.rangebreaks){var $=F==="y";he=function(H){if(!e(H))return b;var q=E._rangebreaks.length;if(!q)return X(H,E._m,E._b);var re=$;E.range[0]>E.range[1]&&(re=!re);for(var Z=re?-1:1,Q=Z*H,oe=0,se=0;se<q;se++){var ae=Z*E._rangebreaks[se].min,le=Z*E._rangebreaks[se].max;if(Q<ae)break;if(Q>le)oe=se+1;else{oe=Q<(ae+le)/2?se:se+1;break}}var _e=E._B[oe]||0;return isFinite(_e)?X(H,E._m2,_e):0},K=function(H){var q=E._rangebreaks.length;if(!q)return ie(H,E._m,E._b);for(var re=0,Z=0;Z<q&&!(H<E._rangebreaks[Z].pmin);Z++)H>E._rangebreaks[Z].pmax&&(re=Z+1);return ie(H,E._m2,E._B[re])}}E.c2l=E.type==="log"?I:r,E.l2c=E.type==="log"?_:r,E.l2p=he,E.p2l=K,E.c2p=E.type==="log"?function(H,q){return he(I(H,q))}:he,E.p2c=E.type==="log"?function(H){return _(K(H))}:K,["linear","-"].indexOf(E.type)!==-1?(E.d2r=E.r2d=E.d2c=E.r2c=E.d2l=E.r2l=a,E.c2d=E.c2r=E.l2d=E.l2r=r,E.d2p=E.r2p=function(H){return E.l2p(a(H))},E.p2d=E.p2r=K,E.cleanPos=r):E.type==="log"?(E.d2r=E.d2l=function(H,q){return I(a(H),q)},E.r2d=E.r2c=function(H){return _(a(H))},E.d2c=E.r2l=a,E.c2d=E.l2r=r,E.c2r=I,E.l2d=_,E.d2p=function(H,q){return E.l2p(E.d2r(H,q))},E.p2d=function(H){return _(K(H))},E.r2p=function(H){return E.l2p(a(H))},E.p2r=K,E.cleanPos=r):E.type==="date"?(E.d2r=E.r2d=A.identity,E.d2c=E.r2c=E.d2l=E.r2l=D,E.c2d=E.c2r=E.l2d=E.l2r=R,E.d2p=E.r2p=function(H,q,re){return E.l2p(D(H,0,re))},E.p2d=E.p2r=function(H,q,re){return R(K(H),q,re)},E.cleanPos=function(H){return A.cleanDate(H,b,E.calendar)}):E.type==="category"?(E.d2c=E.d2l=z,E.r2d=E.c2d=E.l2d=O,E.d2r=E.d2l_noadd=ee,E.r2c=function(H){var q=j(H);return q!==void 0?q:E.fraction2r(.5)},E.l2r=E.c2r=r,E.r2l=j,E.d2p=function(H){return E.l2p(E.r2c(H))},E.p2d=function(H){return O(K(H))},E.r2p=E.d2p,E.p2r=K,E.cleanPos=function(H){return typeof H=="string"&&H!==""?H:r(H)}):E.type==="multicategory"&&(E.r2d=E.c2d=E.l2d=O,E.d2r=E.d2l_noadd=ee,E.r2c=function(H){var q=ee(H);return q!==void 0?q:E.fraction2r(.5)},E.r2c_just_indices=Y,E.l2r=E.c2r=r,E.r2l=ee,E.d2p=function(H){return E.l2p(E.r2c(H))},E.p2d=function(H){return O(K(H))},E.r2p=E.d2p,E.p2r=K,E.cleanPos=function(H){return Array.isArray(H)||typeof H=="string"&&H!==""?H:r(H)},E.setupMultiCategory=function(H){var q=E._traceIndices,re,Z,Q=E._matchGroup;if(Q&&E._categories.length===0){for(var oe in Q)if(oe!==P){var se=S[c.id2name(oe)];q=q.concat(se._traceIndices)}}var ae=[[0,{}],[0,{}]],le=[];for(re=0;re<q.length;re++){var _e=H[q[re]];if(F in _e){var fe=_e[F],me=_e._length||A.minRowLength(fe);if(v(fe[0])&&v(fe[1]))for(Z=0;Z<me;Z++){var xe=fe[0][Z],ye=fe[1][Z];h(xe)&&h(ye)&&(le.push([xe,ye]),xe in ae[0][1]||(ae[0][1][xe]=ae[0][0]++),ye in ae[1][1]||(ae[1][1][ye]=ae[1][0]++))}}}for(le.sort(function(be,ke){var De=ae[0][1],He=De[be[0]]-De[ke[0]];if(He)return He;var Ae=ae[1][1];return Ae[be[1]]-Ae[ke[1]]}),re=0;re<le.length;re++)z(le[re])}),E.fraction2r=function(H){var q=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return E.l2r(q+H*(re-q))},E.r2fraction=function(H){var q=E.r2l(E.range[0]),re=E.r2l(E.range[1]);return(E.r2l(H)-q)/(re-q)},E.cleanRange=function(H,q){q||(q={}),H||(H="range");var re=A.nestedProperty(E,H).get(),Z,Q;if(E.type==="date"?Q=A.dfltRange(E.calendar):F==="y"?Q=M.DFLTRANGEY:E._name==="realaxis"?Q=[0,1]:Q=q.dfltRange||M.DFLTRANGEX,Q=Q.slice(),(E.rangemode==="tozero"||E.rangemode==="nonnegative")&&(Q[0]=0),!re||re.length!==2){A.nestedProperty(E,H).set(Q);return}for(E.type==="date"&&!E.autorange&&(re[0]=A.cleanDate(re[0],b,E.calendar),re[1]=A.cleanDate(re[1],b,E.calendar)),Z=0;Z<2;Z++)if(E.type==="date"){if(!A.isDateTime(re[Z],E.calendar)){E[H]=Q;break}if(E.r2l(re[0])===E.r2l(re[1])){var oe=A.constrain(E.r2l(re[0]),A.MIN_MS+1e3,A.MAX_MS-1e3);re[0]=E.l2r(oe-1e3),re[1]=E.l2r(oe+1e3);break}}else{if(!e(re[Z]))if(e(re[1-Z]))re[Z]=re[1-Z]*(Z?10:.1);else{E[H]=Q;break}if(re[Z]<-o?re[Z]=-o:re[Z]>o&&(re[Z]=o),re[0]===re[1]){var se=Math.max(1,Math.abs(re[0]*1e-6));re[0]-=se,re[1]+=se}}},E.setScale=function(H){var q=S._size;if(E.overlaying){var re=c.getFromId({_fullLayout:S},E.overlaying);E.domain=re.domain}var Z=H&&E._r?"_r":"range",Q=E.calendar;E.cleanRange(Z);var oe=E.r2l(E[Z][0],Q),se=E.r2l(E[Z][1],Q),ae=F==="y";if(ae?(E._offset=q.t+(1-E.domain[1])*q.h,E._length=q.h*(E.domain[1]-E.domain[0]),E._m=E._length/(oe-se),E._b=-E._m*se):(E._offset=q.l+E.domain[0]*q.w,E._length=q.w*(E.domain[1]-E.domain[0]),E._m=E._length/(se-oe),E._b=-E._m*oe),E._rangebreaks=[],E._lBreaks=0,E._m2=0,E._B=[],E.rangebreaks){var le,_e;if(E._rangebreaks=E.locateBreaks(Math.min(oe,se),Math.max(oe,se)),E._rangebreaks.length){for(le=0;le<E._rangebreaks.length;le++)_e=E._rangebreaks[le],E._lBreaks+=Math.abs(_e.max-_e.min);var fe=ae;oe>se&&(fe=!fe),fe&&E._rangebreaks.reverse();var me=fe?-1:1;for(E._m2=me*E._length/(Math.abs(se-oe)-E._lBreaks),E._B.push(-E._m2*(ae?se:oe)),le=0;le<E._rangebreaks.length;le++)_e=E._rangebreaks[le],E._B.push(E._B[E._B.length-1]-me*E._m2*(_e.max-_e.min));for(le=0;le<E._rangebreaks.length;le++)_e=E._rangebreaks[le],_e.pmin=he(_e.min),_e.pmax=he(_e.max)}}if(!isFinite(E._m)||!isFinite(E._b)||E._length<0)throw S._replotting=!1,new Error("Something went wrong with axis scaling")},E.maskBreaks=function(H){var q=E.rangebreaks||[],re,Z,Q,oe,se;q._cachedPatterns||(q._cachedPatterns=q.map(function(De){return De.enabled&&De.bounds?A.simpleMap(De.bounds,De.pattern?a:E.d2c):null})),q._cachedValues||(q._cachedValues=q.map(function(De){return De.enabled&&De.values?A.simpleMap(De.values,E.d2c).sort(A.sorterAsc):null}));for(var ae=0;ae<q.length;ae++){var le=q[ae];if(le.enabled){if(le.bounds){var _e=le.pattern;switch(re=q._cachedPatterns[ae],Z=re[0],Q=re[1],_e){case p:se=new Date(H),oe=se.getUTCDay(),Z>Q&&(Q+=7,oe<Z&&(oe+=7));break;case w:se=new Date(H);var fe=se.getUTCHours(),me=se.getUTCMinutes(),xe=se.getUTCSeconds(),ye=se.getUTCMilliseconds();oe=fe+(me/60+xe/3600+ye/36e5),Z>Q&&(Q+=24,oe<Z&&(oe+=24));break;case"":oe=H;break}if(oe>=Z&&oe<Q)return b}else for(var be=q._cachedValues[ae],ke=0;ke<be.length;ke++)if(Z=be[ke],Q=Z+le.dvalue,H>=Z&&H<Q)return b}}return H},E.locateBreaks=function(H,q){var re,Z,Q,oe,se=[];if(!E.rangebreaks)return se;var ae=E.rangebreaks.slice().sort(function(Ae,Le){return Ae.pattern===p&&Le.pattern===w?-1:Le.pattern===p&&Ae.pattern===w?1:0}),le=function(Ae,Le){if(Ae=A.constrain(Ae,H,q),Le=A.constrain(Le,H,q),Ae!==Le){for(var Ze=!0,We=0;We<se.length;We++){var ze=se[We];Ae<ze.max&&Le>=ze.min&&(Ae<ze.min&&(ze.min=Ae),Le>ze.max&&(ze.max=Le),Ze=!1)}Ze&&se.push({min:Ae,max:Le})}};for(re=0;re<ae.length;re++){var _e=ae[re];if(_e.enabled)if(_e.bounds){var fe=H,me=q;_e.pattern&&(fe=Math.floor(fe)),Z=A.simpleMap(_e.bounds,_e.pattern?a:E.r2l),Q=Z[0],oe=Z[1];var xe=new Date(fe),ye,be;switch(_e.pattern){case p:be=d,ye=((oe<Q?7:0)+(oe-Q))*f,fe+=Q*f-(xe.getUTCDay()*f+xe.getUTCHours()*y+xe.getUTCMinutes()*l+xe.getUTCSeconds()*x+xe.getUTCMilliseconds());break;case w:be=f,ye=((oe<Q?24:0)+(oe-Q))*y,fe+=Q*y-(xe.getUTCHours()*y+xe.getUTCMinutes()*l+xe.getUTCSeconds()*x+xe.getUTCMilliseconds());break;default:fe=Math.min(Z[0],Z[1]),me=Math.max(Z[0],Z[1]),be=me-fe,ye=be}for(var ke=fe;ke<me;ke+=be)le(ke,ke+ye)}else for(var De=A.simpleMap(_e.values,E.d2c),He=0;He<De.length;He++)Q=De[He],oe=Q+_e.dvalue,le(Q,oe)}return se.sort(function(Ae,Le){return Ae.min-Le.min}),se},E.makeCalcdata=function(H,q,re){var Z,Q,oe,se,ae=E.type,le=ae==="date"&&H[q+"calendar"];if(q in H){if(Z=H[q],se=H._length||A.minRowLength(Z),A.isTypedArray(Z)&&(ae==="linear"||ae==="log")){if(se===Z.length)return Z;if(Z.subarray)return Z.subarray(0,se)}if(ae==="multicategory")return G(Z,se);for(Q=new Array(se),oe=0;oe<se;oe++)Q[oe]=E.d2c(Z[oe],0,le,re)}else{var _e=q+"0"in H?E.d2c(H[q+"0"],0,le):0,fe=H["d"+q]?Number(H["d"+q]):1;for(Z=H[{x:"y",y:"x"}[q]],se=H._length||Z.length,Q=new Array(se),oe=0;oe<se;oe++)Q[oe]=_e+oe*fe}if(E.rangebreaks)for(oe=0;oe<se;oe++)Q[oe]=E.maskBreaks(Q[oe]);return Q},E.isValidRange=function(H){return Array.isArray(H)&&H.length===2&&e(E.r2l(H[0]))&&e(E.r2l(H[1]))},E.isPtWithinRange=function(H,q){var re=E.c2l(H[F],null,q),Z=E.r2l(E.range[0]),Q=E.r2l(E.range[1]);return Z<Q?Z<=re&&re<=Q:Q<=re&&re<=Z},E._emptyCategories=function(){E._categories=[],E._categoriesMap={}},E.clearCalc=function(){var H=E._matchGroup;if(H){var q=null,re=null;for(var Z in H){var Q=S[c.id2name(Z)];if(Q._categories){q=Q._categories,re=Q._categoriesMap;break}}q&&re?(E._categories=q,E._categoriesMap=re):E._emptyCategories()}else E._emptyCategories();if(E._initialCategories)for(var oe=0;oe<E._initialCategories.length;oe++)z(E._initialCategories[oe])},E.sortByInitialCategories=function(){var H=[];if(E._emptyCategories(),E._initialCategories)for(var q=0;q<E._initialCategories.length;q++)z(E._initialCategories[q]);H=H.concat(E._traceIndices);var re=E._matchGroup;for(var Z in re)if(P!==Z){var Q=S[c.id2name(Z)];Q._categories=E._categories,Q._categoriesMap=E._categoriesMap,H=H.concat(Q._traceIndices)}return H};var U=S._d3locale;E.type==="date"&&(E._dateFormat=U?U.timeFormat:u,E._extraFormat=S._extraFormat),E._separators=S.separators,E._numFormat=U?U.numberFormat:T,delete E._minDtick,delete E._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(t,N,V){N.exports=function(u){var A=["showexponent","showtickprefix","showticksuffix"],T=A.filter(function(a){return u[a]!==void 0}),e=function(a){return u[a]===u[T[0]]};if(T.every(e)||T.length===1)return u[T[0]]}},{}],587:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color").contrast,A=t("./layout_attributes"),T=t("./show_dflt"),e=t("../array_container_defaults");N.exports=function(n,r,v,s,o){o||(o={});var b=T(n),g=v("showticklabels");if(g){var d=o.font||{},f=r.color,y=r.ticklabelposition||"",l=y.indexOf("inside")!==-1?u(o.bgColor):f&&f!==A.color.dflt?f:d.color;if(m.coerceFont(v,"tickfont",{family:d.family,size:d.size,color:l}),!o.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&v("ticklabelstep"),o.noAng||v("tickangle"),s!=="category"){var x=v("tickformat");e(n,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),r.tickformatstops.length||delete r.tickformatstops,!o.noExp&&!x&&s!=="date"&&(v("showexponent",b),v("exponentformat"),v("minexponent"),v("separatethousands"))}}};function a(i,n){function r(s,o){return m.coerce(i,n,A.tickformatstops,s,o)}var v=r("enabled");v&&(r("dtickrange"),r("value"))}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(T,e,a,i){var n=i.isMinor,r=n?T.minor||{}:T,v=n?e.minor:e,s=n?u.minor:u,o=n?"minor.":"",b=m.coerce2(r,v,s,"ticklen",n?(e.ticklen||5)*.6:void 0),g=m.coerce2(r,v,s,"tickwidth",n?e.tickwidth||1:void 0),d=m.coerce2(r,v,s,"tickcolor",(n?e.tickcolor:void 0)||v.color),f=a(o+"ticks",!n&&i.outerTicks||b||g||d?"outside":"");f||(delete v.ticklen,delete v.tickwidth,delete v.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(t,N,V){var m=t("./clean_ticks"),u=t("../../lib").isArrayOrTypedArray;N.exports=function(T,e,a,i,n){n||(n={});var r=n.isMinor,v=r?T.minor||{}:T,s=r?e.minor:e,o=r?"minor.":"";function b(M){var w=v[M];return w!==void 0?w:(s._template||{})[M]}var g=b("tick0"),d=b("dtick"),f=b("tickvals"),y=u(f)?"array":d?"linear":"auto",l=a(o+"tickmode",y);if(l==="auto")a(o+"nticks");else if(l==="linear"){var x=s.dtick=m.dtick(d,i);s.tick0=m.tick0(g,i,e.calendar,x)}else if(i!=="multicategory"){var c=a(o+"tickvals");c===void 0?s.tickmode="auto":r||a("ticktext")}}},{"../../lib":515,"./clean_ticks":572}],590:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../registry"),A=t("../../lib"),T=t("../../components/drawing"),e=t("./axes");N.exports=function(i,n,r,v){var s=i._fullLayout;if(n.length===0){e.redrawComponents(i);return}function o(w){var p=w.xaxis,_=w.yaxis;s._defs.select("#"+w.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),w.plot.call(T.setTranslate,p._offset,_._offset).call(T.setScale,1,1);var h=w.plot.selectAll(".scatterlayer .trace");h.selectAll(".point").call(T.setPointGroupScale,1,1),h.selectAll(".textpoint").call(T.setTextPointsScale,1,1),h.call(T.hideOutsideRangePoints,w)}function b(w,p){var _=w.plotinfo,h=_.xaxis,L=_.yaxis,E=h._length,S=L._length,P=!!w.xr1,F=!!w.yr1,I=[];if(P){var D=A.simpleMap(w.xr0,h.r2l),R=A.simpleMap(w.xr1,h.r2l),O=D[1]-D[0],z=R[1]-R[0];I[0]=(D[0]*(1-p)+p*R[0]-D[0])/(D[1]-D[0])*E,I[2]=E*(1-p+p*z/O),h.range[0]=h.l2r(D[0]*(1-p)+p*R[0]),h.range[1]=h.l2r(D[1]*(1-p)+p*R[1])}else I[0]=0,I[2]=E;if(F){var G=A.simpleMap(w.yr0,L.r2l),Y=A.simpleMap(w.yr1,L.r2l),ee=G[1]-G[0],j=Y[1]-Y[0];I[1]=(G[1]*(1-p)+p*Y[1]-G[1])/(G[0]-G[1])*S,I[3]=S*(1-p+p*j/ee),L.range[0]=h.l2r(G[0]*(1-p)+p*Y[0]),L.range[1]=L.l2r(G[1]*(1-p)+p*Y[1])}else I[1]=0,I[3]=S;e.drawOne(i,h,{skipTitle:!0}),e.drawOne(i,L,{skipTitle:!0}),e.redrawComponents(i,[h._id,L._id]);var X=P?E/I[2]:1,ie=F?S/I[3]:1,he=P?I[0]:0,K=F?I[1]:0,$=P?I[0]/I[2]*E:0,U=F?I[1]/I[3]*S:0,H=h._offset-$,q=L._offset-U;_.clipRect.call(T.setTranslate,he,K).call(T.setScale,1/X,1/ie),_.plot.call(T.setTranslate,H,q).call(T.setScale,X,ie),T.setPointGroupScale(_.zoomScalePts,1/X,1/ie),T.setTextPointsScale(_.zoomScaleTxt,1/X,1/ie)}var g;v&&(g=v());function d(){for(var w={},p=0;p<n.length;p++){var _=n[p],h=_.plotinfo.xaxis,L=_.plotinfo.yaxis;_.xr1&&(w[h._name+".range"]=_.xr1.slice()),_.yr1&&(w[L._name+".range"]=_.yr1.slice())}return g&&g(),u.call("relayout",i,w).then(function(){for(var E=0;E<n.length;E++)o(n[E].plotinfo)})}function f(){for(var w={},p=0;p<n.length;p++){var _=n[p],h=_.plotinfo.xaxis,L=_.plotinfo.yaxis;_.xr0&&(w[h._name+".range"]=_.xr0.slice()),_.yr0&&(w[L._name+".range"]=_.yr0.slice())}return u.call("relayout",i,w).then(function(){for(var E=0;E<n.length;E++)o(n[E].plotinfo)})}var y,l,x,c=m.ease(r.easing);i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(x),x=null,f()});function M(){l=Date.now();for(var w=Math.min(1,(l-y)/r.duration),p=c(w),_=0;_<n.length;_++)b(n[_],p);l-y>r.duration?(d(),x=window.cancelAnimationFrame(M)):x=window.requestAnimationFrame(M)}return y=Date.now(),x=window.requestAnimationFrame(M),Promise.resolve()}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(t,N,V){var m=t("../../registry").traceIs,u=t("./axis_autotype");N.exports=function(n,r,v,s){v("autotypenumbers",s.autotypenumbersDflt);var o=v("type",(s.splomStash||{}).type);o==="-"&&(A(r,s.data),r.type==="-"?r.type="linear":n.type=r.type)};function A(i,n){if(i.type==="-"){var r=i._id,v=r.charAt(0),s;r.indexOf("scene")!==-1&&(r=v);var o=T(n,r,v);if(!!o){if(o.type==="histogram"&&v==={v:"y",h:"x"}[o.orientation||"v"]){i.type="linear";return}var b=v+"calendar",g=o[b],d={noMultiCategory:!m(o,"cartesian")||m(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&v==={h:"x",v:"y"}[o.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=i.autotypenumbers,a(o,v)){var f=e(o),y=[];for(s=0;s<n.length;s++){var l=n[s];!m(l,"box-violin")||(l[v+"axis"]||v)!==r||(l[f]!==void 0?y.push(l[f][0]):l.name!==void 0?y.push(l.name):y.push("text"),l[b]!==g&&(g=void 0))}i.type=u(y,g,d)}else if(o.type==="splom"){var x=o.dimensions,c=x[o._axesDim[r]];c.visible&&(i.type=u(c.values,g,d))}else i.type=u(o[v]||[o[v+"0"]],g,d)}}}function T(i,n,r){for(var v=0;v<i.length;v++){var s=i[v];if(s.type==="splom"&&s._length>0&&(s["_"+r+"axes"]||{})[n])return s;if((s[r+"axis"]||r)===n){if(a(s,r))return s;if((s[r]||[]).length||s[r+"0"])return s}}}function e(i){return{v:"x",h:"y"}[i.orientation||"v"]}function a(i,n){var r=e(i),v=m(i,"box-violin"),s=m(i._fullInput||{},"candlestick");return v&&!s&&n===r&&i[r]===void 0&&i[r+"0"]===void 0}},{"../../registry":647,"./axis_autotype":567}],592:[function(t,N,V){var m=t("../registry"),u=t("../lib");V.manageCommandObserver=function(n,r,v,s){var o={},b=!0;r&&r._commandObserver&&(o=r._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var g=V.hasSimpleAPICommandBindings(n,v,o.lookupTable);if(r&&r._commandObserver){if(g)return o;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,o}if(g){A(n,g,o.cache),o.check=function(){if(!!b){var l=A(n,g,o.cache);return l.changed&&s&&o.lookupTable[l.value]!==void 0&&(o.disable(),Promise.resolve(s({value:l.value,type:g.type,prop:g.prop,traces:g.traces,index:o.lookupTable[l.value]})).then(o.enable,o.enable)),l.changed}};for(var d=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<d.length;f++)n._internalOn(d[f],o.check);o.remove=function(){for(var y=0;y<d.length;y++)n._removeInternalListener(d[y],o.check)}}else u.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){b=!1},o.enable=function(){b=!0},r&&(r._commandObserver=o),o},V.hasSimpleAPICommandBindings=function(n,r,v){var s,o=r.length,b;for(s=0;s<o;s++){var g,d=r[s],f=d.method,y=d.args;if(Array.isArray(y)||(y=[]),!f)return!1;var l=V.computeAPICommandBindings(n,f,y);if(l.length!==1)return!1;if(!b)b=l[0],Array.isArray(b.traces)&&b.traces.sort();else{if(g=l[0],g.type!==b.type||g.prop!==b.prop)return!1;if(Array.isArray(b.traces))if(Array.isArray(g.traces)){g.traces.sort();for(var x=0;x<b.traces.length;x++)if(b.traces[x]!==g.traces[x])return!1}else return!1;else if(g.prop!==b.prop)return!1}g=l[0];var c=g.value;if(Array.isArray(c))if(c.length===1)c=c[0];else return!1;v&&(v[c]=s)}return b};function A(n,r,v){var s,o,b,g=!1;if(r.type==="data")s=n._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")s=n._fullLayout;else return!1;return o=u.nestedProperty(s,r.prop).get(),b=v[r.type]=v[r.type]||{},b.hasOwnProperty(r.prop)&&b[r.prop]!==o&&(g=!0),b[r.prop]=o,{changed:g,value:o}}V.executeAPICommand=function(n,r,v){if(r==="skip")return Promise.resolve();var s=m.apiMethodRegistry[r],o=[n];Array.isArray(v)||(v=[]);for(var b=0;b<v.length;b++)o.push(v[b]);return s.apply(null,o).catch(function(g){return u.warn("API call to Plotly."+r+" rejected.",g),Promise.reject(g)})},V.computeAPICommandBindings=function(n,r,v){var s;switch(Array.isArray(v)||(v=[]),r){case"restyle":s=a(n,v);break;case"relayout":s=e(n,v);break;case"update":s=a(n,[v[0],v[2]]).concat(e(n,[v[1]]));break;case"animate":s=T(n,v);break;default:s=[]}return s};function T(n,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function e(n,r){var v=[],s=r[0],o={};if(typeof s=="string")o[s]=r[1];else if(u.isPlainObject(s))o=s;else return v;return i(o,function(b,g,d){v.push({type:"layout",prop:b,value:d})},"",0),v}function a(n,r){var v,s,o,b,g=[];if(s=r[0],o=r[1],v=r[2],b={},typeof s=="string")b[s]=o;else if(u.isPlainObject(s))b=s,v===void 0&&(v=o);else return g;return v===void 0&&(v=null),i(b,function(d,f,y){var l,x;if(Array.isArray(y)){x=y.slice();var c=Math.min(x.length,n.data.length);v&&(c=Math.min(c,v.length)),l=[];for(var M=0;M<c;M++)l[M]=v?v[M]:M}else x=y,l=v?v.slice():null;if(l===null)Array.isArray(x)&&(x=x[0]);else if(Array.isArray(l)){if(!Array.isArray(x)){var w=x;x=[];for(var p=0;p<l.length;p++)x[p]=w}x.length=Math.min(l.length,x.length)}g.push({type:"data",prop:d,traces:l,value:x})},"",0),g}function i(n,r,v,s){Object.keys(n).forEach(function(o){var b=n[o];if(o[0]!=="_"){var g=v+(s>0?".":"")+o;u.isPlainObject(b)?i(b,r,g,s+1):r(g,o,b)}})}},{"../lib":515,"../registry":647}],593:[function(t,N,V){var m=t("../lib/extend").extendFlat;V.attributes=function(u,A){u=u||{},A=A||{};var T={valType:"info_array",editType:u.editType,items:[{valType:"number",min:0,max:1,editType:u.editType},{valType:"number",min:0,max:1,editType:u.editType}],dflt:[0,1]};u.name&&u.name+"",u.trace,A.description&&""+A.description;var e={x:m({},T,{}),y:m({},T,{}),editType:u.editType};return u.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:u.editType},e.column={valType:"integer",min:0,dflt:0,editType:u.editType}),e},V.defaults=function(u,A,T,e){var a=e&&e.x||[0,1],i=e&&e.y||[0,1],n=A.grid;if(n){var r=T("domain.column");r!==void 0&&(r<n.columns?a=n._domains.x[r]:delete u.domain.column);var v=T("domain.row");v!==void 0&&(v<n.rows?i=n._domains.y[v]:delete u.domain.row)}var s=T("domain.x",a),o=T("domain.y",i);s[0]<s[1]||(u.domain.x=a.slice()),o[0]<o[1]||(u.domain.y=i.slice())}},{"../lib/extend":505}],594:[function(t,N,V){N.exports=function(m){var u=m.editType,A=m.colorEditType;A===void 0&&(A=u);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:u},size:{valType:"number",min:1,editType:u},color:{valType:"color",editType:A},editType:u};return m.autoSize&&(T.size.dflt="auto"),m.autoColor&&(T.color.dflt="auto"),m.arrayOk&&(T.family.arrayOk=!0,T.size.arrayOk=!0,T.color.arrayOk=!0),T}},{}],595:[function(t,N,V){N.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(t,N,V){V.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},V.axesNames=["lonaxis","lataxis"],V.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},V.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},V.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},V.clipPad=.001,V.precision=.1,V.landColor="#F0DC82",V.waterColor="#3399FF",V.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},V.sphereSVG={type:"Sphere"},V.fillLayers={ocean:1,land:1,lakes:1},V.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},V.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],V.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],V.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(t,N,V){var m=t("@plotly/d3"),u=t("d3-geo"),A=u.geoPath,T=u.geoDistance,e=t("d3-geo-projection"),a=t("../../registry"),i=t("../../lib"),n=i.strTranslate,r=t("../../components/color"),v=t("../../components/drawing"),s=t("../../components/fx"),o=t("../plots"),b=t("../cartesian/axes"),g=t("../cartesian/autorange").getAutoRange,d=t("../../components/dragelement"),f=t("../../components/selections").prepSelect,y=t("../../components/selections").clearOutline,l=t("../../components/selections").selectOnClick,x=t("./zoom"),c=t("./constants"),M=t("../../lib/geo_location_utils"),w=t("../../lib/topojson_utils"),p=t("topojson-client").feature;function _(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var h=_.prototype;N.exports=function(F){return new _(F)},h.plot=function(P,F,I,D){var R=this;if(D)return R.update(P,F,!0);R._geoCalcData=P,R._fullLayout=F;var O=F[this.id],z=[],G=!1;for(var Y in c.layerNameToAdjective)if(Y!=="frame"&&O["show"+Y]){G=!0;break}for(var ee=!1,j=0;j<P.length;j++){var X=P[0][0].trace;X._geo=R,X.locationmode&&(G=!0);var ie=X.marker;if(ie){var he=ie.angle,K=ie.angleref;(he||K==="north"||K==="previous")&&(ee=!0)}}if(this._hasMarkerAngles=ee,G){var $=w.getTopojsonName(O);(R.topojson===null||$!==R.topojsonName)&&(R.topojsonName=$,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&z.push(R.fetchTopojson()))}z=z.concat(M.fetchTraceGeoData(P)),I.push(new Promise(function(U,H){Promise.all(z).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(P,F),U()}).catch(H)}))},h.fetchTopojson=function(){var P=this,F=w.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(I,D){m.json(F,function(R,O){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=O,I()})})},h.update=function(P,F,I){var D=F[this.id];this.hasChoropleth=!1;for(var R=0;R<P.length;R++){var O=P[R],z=O[0].trace;z.type==="choropleth"&&(this.hasChoropleth=!0),z.visible===!0&&z._length>0&&z._module.calcGeoJSON(O,F)}if(!I){var G=this.updateProjection(P,F);if(G)return;(!this.viewInitial||this.scope!==D.scope)&&this.saveViewInitial(D)}this.scope=D.scope,this.updateBaseLayers(F,D),this.updateDims(F,D),this.updateFx(F,D),o.generalUpdatePerTraceModule(this.graphDiv,this,P,D);var Y=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Y.selectAll(".point"),this.dataPoints.text=Y.selectAll("text"),this.dataPaths.line=Y.selectAll(".js-line");var ee=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=ee.selectAll("path"),this._render()},h.updateProjection=function(P,F){var I=this.graphDiv,D=F[this.id],R=F._size,O=D.domain,z=D.projection,G=D.lonaxis,Y=D.lataxis,ee=G._ax,j=Y._ax,X=this.projection=L(D),ie=[[R.l+R.w*O.x[0],R.t+R.h*(1-O.y[1])],[R.l+R.w*O.x[1],R.t+R.h*(1-O.y[0])]],he=D.center||{},K=z.rotation||{},$=G.range||[],U=Y.range||[];if(D.fitbounds){ee._length=ie[1][0]-ie[0][0],j._length=ie[1][1]-ie[0][1],ee.range=g(I,ee),j.range=g(I,j);var H=(ee.range[0]+ee.range[1])/2,q=(j.range[0]+j.range[1])/2;if(D._isScoped)he={lon:H,lat:q};else if(D._isClipped){he={lon:H,lat:q},K={lon:H,lat:q,roll:K.roll};var re=z.type,Z=c.lonaxisSpan[re]/2||180,Q=c.lataxisSpan[re]/2||90;$=[H-Z,H+Z],U=[q-Q,q+Q]}else he={lon:H,lat:q},K={lon:H,lat:K.lat,roll:K.roll}}X.center([he.lon-K.lon,he.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(z.parallels);var oe=S($,U);X.fitExtent(ie,oe);var se=this.bounds=X.getBounds(oe),ae=this.fitScale=X.scale(),le=X.translate();if(D.fitbounds){var _e=X.getBounds(S(ee.range,j.range)),fe=Math.min((se[1][0]-se[0][0])/(_e[1][0]-_e[0][0]),(se[1][1]-se[0][1])/(_e[1][1]-_e[0][1]));isFinite(fe)?X.scale(fe*ae):i.warn("Something went wrong during"+this.id+"fitbounds computations.")}else X.scale(z.scale*ae);var me=this.midPt=[(se[0][0]+se[1][0])/2,(se[0][1]+se[1][1])/2];if(X.translate([le[0]+(me[0]-le[0]),le[1]+(me[1]-le[1])]).clipExtent(se),D._isAlbersUsa){var xe=X([he.lon,he.lat]),ye=X.translate();X.translate([ye[0]-(xe[0]-ye[0]),ye[1]-(xe[1]-ye[1])])}},h.updateBaseLayers=function(P,F){var I=this,D=I.topojson,R=I.layers,O=I.basePaths;function z(ie){return ie==="lonaxis"||ie==="lataxis"}function G(ie){return Boolean(c.lineLayers[ie])}function Y(ie){return Boolean(c.fillLayers[ie])}var ee=this.hasChoropleth?c.layersForChoropleth:c.layers,j=ee.filter(function(ie){return G(ie)||Y(ie)?F["show"+ie]:z(ie)?F[ie].showgrid:!0}),X=I.framework.selectAll(".layer").data(j,String);X.exit().each(function(ie){delete R[ie],delete O[ie],m.select(this).remove()}),X.enter().append("g").attr("class",function(ie){return"layer "+ie}).each(function(ie){var he=R[ie]=m.select(this);ie==="bg"?I.bgRect=he.append("rect").style("pointer-events","all"):z(ie)?O[ie]=he.append("path").style("fill","none"):ie==="backplot"?he.append("g").classed("choroplethlayer",!0):ie==="frontplot"?he.append("g").classed("scatterlayer",!0):G(ie)?O[ie]=he.append("path").style("fill","none").style("stroke-miterlimit",2):Y(ie)&&(O[ie]=he.append("path").style("stroke","none"))}),X.order(),X.each(function(ie){var he=O[ie],K=c.layerNameToAdjective[ie];ie==="frame"?he.datum(c.sphereSVG):G(ie)||Y(ie)?he.datum(p(D,D.objects[ie])):z(ie)&&he.datum(E(ie,F,P)).call(r.stroke,F[ie].gridcolor).call(v.dashLine,F[ie].griddash,F[ie].gridwidth),G(ie)?he.call(r.stroke,F[K+"color"]).call(v.dashLine,"",F[K+"width"]):Y(ie)&&he.call(r.fill,F[K+"color"])})},h.updateDims=function(P,F){var I=this.bounds,D=(F.framewidth||0)/2,R=I[0][0]-D,O=I[0][1]-D,z=I[1][0]-R+D,G=I[1][1]-O+D;v.setRect(this.clipRect,R,O,z,G),this.bgRect.call(v.setRect,R,O,z,G).call(r.fill,F.bgcolor),this.xaxis._offset=R,this.xaxis._length=z,this.yaxis._offset=O,this.yaxis._length=G},h.updateFx=function(P,F){var I=this,D=I.graphDiv,R=I.bgRect,O=P.dragmode,z=P.clickmode;if(I.isStatic)return;function G(){var X=I.viewInitial,ie={};for(var he in X)ie[I.id+"."+he]=X[he];a.call("_guiRelayout",D,ie),D.emit("plotly_doubleclick",null)}function Y(X){return I.projection.invert([X[0]+I.xaxis._offset,X[1]+I.yaxis._offset])}var ee=function(X,ie){if(ie.isRect){var he=X.range={};he[I.id]=[Y([ie.xmin,ie.ymin]),Y([ie.xmax,ie.ymax])]}else{var K=X.lassoPoints={};K[I.id]=ie.map(Y)}},j={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:ee},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(X){X===2&&y(D)}};O==="pan"?(R.node().onmousedown=null,R.call(x(I,F)),R.on("dblclick.zoom",G),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(R.on(".zoom",null),j.prepFn=function(X,ie,he){f(X,ie,he,j,O)},d.init(j)),R.on("mousemove",function(){var X=I.projection.invert(i.getPositionFromD3Event());if(!X)return d.unhover(D,m.event);I.xaxis.p2c=function(){return X[0]},I.yaxis.p2c=function(){return X[1]},s.hover(D,m.event,I.id)}),R.on("mouseout",function(){D._dragging||d.unhover(D,m.event)}),R.on("click",function(){O!=="select"&&O!=="lasso"&&(z.indexOf("select")>-1&&l(m.event,D,[I.xaxis],[I.yaxis],I.id,j),z.indexOf("event")>-1&&s.click(D,m.event))})},h.makeFramework=function(){var P=this,F=P.graphDiv,I=F._fullLayout,D="clip"+I._uid+P.id;P.clipDef=I._clips.append("clipPath").attr("id",D),P.clipRect=P.clipDef.append("rect"),P.framework=m.select(P.container).append("g").attr("class","geo "+P.id).call(v.setClipUrl,D,F),P.project=function(R){var O=P.projection(R);return O?[O[0]-P.xaxis._offset,O[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(R){return P.project(R)[0]}},P.yaxis={_id:"y",c2p:function(R){return P.project(R)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(P.mockAxis,I)},h.saveViewInitial=function(P){var F=P.center||{},I=P.projection,D=I.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":I.scale};var R;P._isScoped?R={"center.lon":F.lon,"center.lat":F.lat}:P._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":D.lon},i.extendFlat(this.viewInitial,R)},h.render=function(P){this._hasMarkerAngles&&P?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},h._render=function(){var P=this.projection,F=P.getPath(),I;function D(O){var z=P(O.lonlat);return z?n(z[0],z[1]):null}function R(O){return P.isLonLatOverEdges(O.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",F);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(O){return F(O.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",D)};function L(P){var F=P.projection,I=F.type,D=c.projNames[I];D="geo"+i.titleCase(D);for(var R=u[D]||e[D],O=R(),z=P._isSatellite?Math.acos(1/F.distance)*180/Math.PI:P._isClipped?c.lonaxisSpan[I]/2:null,G=["center","rotate","parallels","clipExtent"],Y=function(X){return X?O:[]},ee=0;ee<G.length;ee++){var j=G[ee];typeof O[j]!="function"&&(O[j]=Y)}return O.isLonLatOverEdges=function(X){if(O(X)===null)return!0;if(z){var ie=O.rotate(),he=T(X,[-ie[0],-ie[1]]),K=z*Math.PI/180;return he>K}else return!1},O.getPath=function(){return A().projection(O)},O.getBounds=function(X){return O.getPath().bounds(X)},O.precision(c.precision),P._isSatellite&&O.tilt(F.tilt).distance(F.distance),z&&O.clipAngle(z-c.clipPad),O}function E(P,F,I){var D=1e-6,R=2.5,O=F[P],z=c.scopeDefaults[F.scope],G,Y,ee;P==="lonaxis"?(G=z.lonaxisRange,Y=z.lataxisRange,ee=function(q,re){return[q,re]}):P==="lataxis"&&(G=z.lataxisRange,Y=z.lonaxisRange,ee=function(q,re){return[re,q]});var j={type:"linear",range:[G[0],G[1]-D],tick0:O.tick0,dtick:O.dtick};b.setConvert(j,I);var X=b.calcTicks(j);!F.isScoped&&P==="lonaxis"&&X.pop();for(var ie=X.length,he=new Array(ie),K=0;K<ie;K++)for(var $=X[K].x,U=he[K]=[],H=Y[0];H<Y[1]+R;H+=R)U.push(ee($,H));return{type:"MultiLineString",coordinates:he}}function S(P,F){var I=c.clipPad,D=P[0]+I,R=P[1]-I,O=F[0]+I,z=F[1]-I;D>0&&R<0&&(R+=360);var G=(R-D)/4;return{type:"Polygon",coordinates:[[[D,O],[D,z],[D+G,z],[D+2*G,z],[D+3*G,z],[R,z],[R,O],[R-G,O],[R-2*G,O],[R-3*G,O],[D,O]]]}}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(t,N,V){var m=t("../../plots/get_data").getSubplotCalcData,u=t("../../lib").counterRegex,A=t("./geo"),T="geo",e=u(T),a={};a[T]={valType:"subplotid",dflt:T,editType:"calc"};function i(v){for(var s=v._fullLayout,o=v.calcdata,b=s._subplots[T],g=0;g<b.length;g++){var d=b[g],f=m(o,T,d),y=s[d],l=y._subplot;l||(l=A({id:d,graphDiv:v,container:s._geolayer.node(),topojsonURL:v._context.topojsonURL,staticPlot:v._context.staticPlot}),s[d]._subplot=l),l.plot(f,s,v._promises)}}function n(v,s,o,b){for(var g=b._subplots[T]||[],d=0;d<g.length;d++){var f=g[d],y=b[f]._subplot;!s[f]&&!!y&&(y.framework.remove(),y.clipDef.remove())}}function r(v){for(var s=v._fullLayout,o=s._subplots[T],b=0;b<o.length;b++){var g=s[o[b]],d=g._subplot;d.updateFx(s,g)}}N.exports={attr:T,name:T,idRoot:T,idRegex:e,attrRegex:e,attributes:a,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:i,updateFx:r,clean:n}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(t,N,V){var m=t("../../components/color/attributes"),u=t("../domain").attributes,A=t("../../components/drawing/attributes").dash,T=t("./constants"),e=t("../../plot_api/edit_types").overrideAll,a=t("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:m.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:A},n=N.exports=e({domain:u({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:m.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:m.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:m.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:m.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:m.background},lonaxis:i,lataxis:i},"plot","from-root");n.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(t,N,V){var m=t("../../lib"),u=t("../subplot_defaults"),A=t("../get_data").getSubplotData,T=t("./constants"),e=t("./layout_attributes"),a=T.axesNames;N.exports=function(r,v,s){u(r,v,s,{type:"geo",attributes:e,handleDefaults:i,fullData:s,partition:"y"})};function i(n,r,v,s){var o=A(s.fullData,"geo",s.id),b=o.map(function(U){return U._expandedIndex}),g=v("resolution"),d=v("scope"),f=T.scopeDefaults[d],y=v("projection.type",f.projType),l=r._isAlbersUsa=y==="albers usa";l&&(d=r.scope="usa");var x=r._isScoped=d!=="world",c=r._isSatellite=y==="satellite",M=r._isConic=y.indexOf("conic")!==-1||y==="albers",w=r._isClipped=!!T.lonaxisSpan[y];if(n.visible===!1){var p=m.extendDeep({},r._template);p.showcoastlines=!1,p.showcountries=!1,p.showframe=!1,p.showlakes=!1,p.showland=!1,p.showocean=!1,p.showrivers=!1,p.showsubunits=!1,p.lonaxis&&(p.lonaxis.showgrid=!1),p.lataxis&&(p.lataxis.showgrid=!1),r._template=p}for(var _=v("visible"),h,L=0;L<a.length;L++){var E=a[L],S=[30,10][L],P;if(x)P=f[E+"Range"];else{var F=T[E+"Span"],I=(F[y]||F["*"])/2,D=v("projection.rotation."+E.substr(0,3),f.projRotate[L]);P=[D-I,D+I]}var R=v(E+".range",P);v(E+".tick0"),v(E+".dtick",S),h=v(E+".showgrid",_?void 0:!1),h&&(v(E+".gridcolor"),v(E+".gridwidth"),v(E+".griddash")),r[E]._ax={type:"linear",_id:E.slice(0,3),_traceIndices:b,setScale:m.identity,c2l:m.identity,r2l:m.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var O=r.lonaxis.range,z=r.lataxis.range,G=O[0],Y=O[1];G>0&&Y<0&&(Y+=360);var ee=(G+Y)/2,j;if(!l){var X=x?f.projRotate:[ee,0,0];j=v("projection.rotation.lon",X[0]),v("projection.rotation.lat",X[1]),v("projection.rotation.roll",X[2]),h=v("showcoastlines",!x&&_),h&&(v("coastlinecolor"),v("coastlinewidth")),h=v("showocean",_?void 0:!1),h&&v("oceancolor")}var ie,he;if(l?(ie=-96.6,he=38.7):(ie=x?ee:j,he=(z[0]+z[1])/2),v("center.lon",ie),v("center.lat",he),c&&(v("projection.tilt"),v("projection.distance")),M){var K=f.projParallels||[0,60];v("projection.parallels",K)}v("projection.scale"),h=v("showland",_?void 0:!1),h&&v("landcolor"),h=v("showlakes",_?void 0:!1),h&&v("lakecolor"),h=v("showrivers",_?void 0:!1),h&&(v("rivercolor"),v("riverwidth")),h=v("showcountries",x&&d!=="usa"&&_),h&&(v("countrycolor"),v("countrywidth")),(d==="usa"||d==="north america"&&g===50)&&(v("showsubunits",_),v("subunitcolor"),v("subunitwidth")),x||(h=v("showframe",_),h&&(v("framecolor"),v("framewidth"))),v("bgcolor");var $=v("fitbounds");$&&(delete r.projection.scale,x?(delete r.center.lon,delete r.center.lat):w?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../registry"),T=Math.PI/180,e=180/Math.PI,a={cursor:"pointer"},i={cursor:"auto"};function n(E,S){var P=E.projection,F;return S._isScoped?F=s:S._isClipped?F=b:F=o,F(E,P)}N.exports=n;function r(E,S){return m.behavior.zoom().translate(S.translate()).scale(S.scale())}function v(E,S,P){var F=E.id,I=E.graphDiv,D=I.layout,R=D[F],O=I._fullLayout,z=O[F],G={},Y={};function ee(j,X){G[F+"."+j]=u.nestedProperty(R,j).get(),A.call("_storeDirectGUIEdit",D,O._preGUI,G);var ie=u.nestedProperty(z,j);ie.get()!==X&&(ie.set(X),u.nestedProperty(R,j).set(X),Y[F+"."+j]=X)}P(ee),ee("projection.scale",S.scale()/E.fitScale),ee("fitbounds",!1),I.emit("plotly_relayout",Y)}function s(E,S){var P=r(E,S);function F(){m.select(this).style(a)}function I(){S.scale(m.event.scale).translate(m.event.translate),E.render(!0);var O=S.invert(E.midPt);E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}function D(O){var z=S.invert(E.midPt);O("center.lon",z[0]),O("center.lat",z[1])}function R(){m.select(this).style(i),v(E,S,D)}return P.on("zoomstart",F).on("zoom",I).on("zoomend",R),P}function o(E,S){var P=r(E,S),F=2,I,D,R,O,z,G,Y,ee,j;function X(H){return S.invert(H)}function ie(H){var q=X(H);if(!q)return!0;var re=S(q);return Math.abs(re[0]-H[0])>F||Math.abs(re[1]-H[1])>F}function he(){m.select(this).style(a),I=m.mouse(this),D=S.rotate(),R=S.translate(),O=D,z=X(I)}function K(){if(G=m.mouse(this),ie(I)){P.scale(S.scale()),P.translate(S.translate());return}S.scale(m.event.scale),S.translate([R[0],m.event.translate[1]]),z?X(G)&&(ee=X(G),Y=[O[0]+(ee[0]-z[0]),D[1],D[2]],S.rotate(Y),O=Y):(I=G,z=X(I)),j=!0,E.render(!0);var H=S.rotate(),q=S.invert(E.midPt);E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.center.lon":q[0],"geo.center.lat":q[1],"geo.projection.rotation.lon":-H[0]})}function $(){m.select(this).style(i),j&&v(E,S,U)}function U(H){var q=S.rotate(),re=S.invert(E.midPt);H("projection.rotation.lon",-q[0]),H("center.lon",re[0]),H("center.lat",re[1])}return P.on("zoomstart",he).on("zoom",K).on("zoomend",$),P}function b(E,S){S.rotate(),S.scale();var P=r(E,S),F=L(P,"zoomstart","zoom","zoomend"),I=0,D=P.on,R;P.on("zoomstart",function(){m.select(this).style(a);var ee=m.mouse(this),j=S.rotate(),X=j,ie=S.translate(),he=d(j);R=g(S,ee),D.call(P,"zoom",function(){var K=m.mouse(this);if(S.scale(m.event.scale),!R)ee=K,R=g(S,ee);else if(g(S,K)){S.rotate(j).translate(ie);var $=g(S,K),U=y(R,$),H=w(f(he,U)),q=l(H,R,X);(!isFinite(q[0])||!isFinite(q[1])||!isFinite(q[2]))&&(q=X),S.rotate(q),X=q}z(F.of(this,arguments))}),O(F.of(this,arguments))}).on("zoomend",function(){m.select(this).style(i),D.call(P,"zoom",null),G(F.of(this,arguments)),v(E,S,Y)}).on("zoom.redraw",function(){E.render(!0);var ee=S.rotate();E.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/E.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})});function O(ee){I++||ee({type:"zoomstart"})}function z(ee){ee({type:"zoom"})}function G(ee){--I||ee({type:"zoomend"})}function Y(ee){var j=S.rotate();ee("projection.rotation.lon",-j[0]),ee("projection.rotation.lat",-j[1])}return m.rebind(P,F,"on")}function g(E,S){var P=E.invert(S);return P&&isFinite(P[0])&&isFinite(P[1])&&p(P)}function d(E){var S=.5*E[0]*T,P=.5*E[1]*T,F=.5*E[2]*T,I=Math.sin(S),D=Math.cos(S),R=Math.sin(P),O=Math.cos(P),z=Math.sin(F),G=Math.cos(F);return[D*O*G+I*R*z,I*O*G-D*R*z,D*R*G+I*O*z,D*O*z-I*R*G]}function f(E,S){var P=E[0],F=E[1],I=E[2],D=E[3],R=S[0],O=S[1],z=S[2],G=S[3];return[P*R-F*O-I*z-D*G,P*O+F*R+I*G-D*z,P*z-F*G+I*R+D*O,P*G+F*z-I*O+D*R]}function y(E,S){if(!(!E||!S)){var P=h(E,S),F=Math.sqrt(_(P,P)),I=.5*Math.acos(Math.max(-1,Math.min(1,_(E,S)))),D=Math.sin(I)/F;return F&&[Math.cos(I),P[2]*D,-P[1]*D,P[0]*D]}}function l(E,S,P){var F=M(S,2,E[0]);F=M(F,1,E[1]),F=M(F,0,E[2]-P[2]);var I=S[0],D=S[1],R=S[2],O=F[0],z=F[1],G=F[2],Y=Math.atan2(D,I)*e,ee=Math.sqrt(I*I+D*D),j,X;Math.abs(z)>ee?(X=(z>0?90:-90)-Y,j=0):(X=Math.asin(z/ee)*e-Y,j=Math.sqrt(ee*ee-z*z));var ie=180-X-2*Y,he=(Math.atan2(G,O)-Math.atan2(R,j))*e,K=(Math.atan2(G,O)-Math.atan2(R,-j))*e,$=x(P[0],P[1],X,he),U=x(P[0],P[1],ie,K);return $<=U?[X,he,P[2]]:[ie,K,P[2]]}function x(E,S,P,F){var I=c(P-E),D=c(F-S);return Math.sqrt(I*I+D*D)}function c(E){return(E%360+540)%360-180}function M(E,S,P){var F=P*T,I=E.slice(),D=S===0?1:0,R=S===2?1:2,O=Math.cos(F),z=Math.sin(F);return I[D]=E[D]*O-E[R]*z,I[R]=E[R]*O+E[D]*z,I}function w(E){return[Math.atan2(2*(E[0]*E[1]+E[2]*E[3]),1-2*(E[1]*E[1]+E[2]*E[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(E[0]*E[2]-E[3]*E[1]))))*e,Math.atan2(2*(E[0]*E[3]+E[1]*E[2]),1-2*(E[2]*E[2]+E[3]*E[3]))*e]}function p(E){var S=E[0]*T,P=E[1]*T,F=Math.cos(P);return[F*Math.cos(S),F*Math.sin(S),Math.sin(P)]}function _(E,S){for(var P=0,F=0,I=E.length;F<I;++F)P+=E[F]*S[F];return P}function h(E,S){return[E[1]*S[2]-E[2]*S[1],E[2]*S[0]-E[0]*S[2],E[0]*S[1]-E[1]*S[0]]}function L(E){for(var S=0,P=arguments.length,F=[];++S<P;)F.push(arguments[S]);var I=m.dispatch.apply(null,F);return I.of=function(D,R){return function(O){var z;try{z=O.sourceEvent=m.event,O.target=E,m.event=O,I[O.type].apply(D,R)}finally{m.event=z}}},I}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(t,N,V){var m=t("../registry"),u=t("./cartesian/constants").SUBPLOT_PATTERN;V.getSubplotCalcData=function(A,T,e){var a=m.subplotsRegistry[T];if(!a)return[];for(var i=a.attr,n=[],r=0;r<A.length;r++){var v=A[r],s=v[0].trace;s[i]===e&&n.push(v)}return n},V.getModuleCalcData=function(A,T){var e=[],a=[],i;if(typeof T=="string"?i=m.getModule(T).plot:typeof T=="function"?i=T:i=T.plot,!i)return[e,A];for(var n=0;n<A.length;n++){var r=A[n],v=r[0].trace;v.visible!==!0||v._length===0||(v._module.plot===i?e.push(r):a.push(r))}return[e,a]},V.getSubplotData=function(T,e,a){if(!m.subplotsRegistry[e])return[];var i=m.subplotsRegistry[e].attr,n=[],r,v,s;if(e==="gl2d"){var o=a.match(u);v="x"+o[1],s="y"+o[2]}for(var b=0;b<T.length;b++)r=T[b],e==="gl2d"&&m.traceIs(r,"gl2d")?r[i[0]]===v&&r[i[1]]===s&&n.push(r):r[i]===a&&n.push(r);return n}},{"../registry":647,"./cartesian/constants":573}],603:[function(t,N,V){var m=t("mouse-change"),u=t("mouse-wheel"),A=t("mouse-event-offset"),T=t("../cartesian/constants"),e=t("has-passive-events");N.exports=i;function a(n,r){this.element=n,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function i(n){var r=n.mouseContainer,v=n.glplot,s=new a(r,v);function o(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function b(){for(var d=n.graphDiv._fullLayout._axisConstraintGroups,f=n.xaxis._id,y=n.yaxis._id,l=0;l<d.length;l++)if(d[l][f]!==-1){if(d[l][y]!==-1)return!0;break}return!1}s.mouseListener=m(r,g),r.addEventListener("touchstart",function(d){var f=A(d.changedTouches[0],r);g(0,f[0],f[1]),g(1,f[0],f[1]),d.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchmove",function(d){d.preventDefault();var f=A(d.changedTouches[0],r);g(1,f[0],f[1]),d.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchend",function(d){g(0,s.lastPos[0],s.lastPos[1]),d.preventDefault()},e?{passive:!1}:!1);function g(d,f,y){var l=n.calcDataBox(),x=v.viewBox,c=s.lastPos[0],M=s.lastPos[1],w=T.MINDRAG*v.pixelRatio,p=T.MINZOOM*v.pixelRatio,_,h;f*=v.pixelRatio,y*=v.pixelRatio,y=x[3]-x[1]-y;function L(D,R,O){var z=Math.min(R,O),G=Math.max(R,O);z!==G?(l[D]=z,l[D+2]=G,s.dataBox=l,n.setRanges(l)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(n.fullLayout.dragmode){case"zoom":if(d){var E=f/(x[2]-x[0])*(l[2]-l[0])+l[0],S=y/(x[3]-x[1])*(l[3]-l[1])+l[1];s.boxInited||(s.boxStart[0]=E,s.boxStart[1]=S,s.dragStart[0]=f,s.dragStart[1]=y),s.boxEnd[0]=E,s.boxEnd[1]=S,s.boxInited=!0,!s.boxEnabled&&(s.boxStart[0]!==s.boxEnd[0]||s.boxStart[1]!==s.boxEnd[1])&&(s.boxEnabled=!0);var P=Math.abs(s.dragStart[0]-f)<p,F=Math.abs(s.dragStart[1]-y)<p;if(b()&&!(P&&F)){_=s.boxEnd[0]-s.boxStart[0],h=s.boxEnd[1]-s.boxStart[1];var I=(l[3]-l[1])/(l[2]-l[0]);Math.abs(_*I)>Math.abs(h)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(_)*I*(h>=0?1:-1),s.boxEnd[1]<l[1]?(s.boxEnd[1]=l[1],s.boxEnd[0]=s.boxStart[0]+(l[1]-s.boxStart[1])/Math.abs(I)):s.boxEnd[1]>l[3]&&(s.boxEnd[1]=l[3],s.boxEnd[0]=s.boxStart[0]+(l[3]-s.boxStart[1])/Math.abs(I))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(h)/I*(_>=0?1:-1),s.boxEnd[0]<l[0]?(s.boxEnd[0]=l[0],s.boxEnd[1]=s.boxStart[1]+(l[0]-s.boxStart[0])*Math.abs(I)):s.boxEnd[0]>l[2]&&(s.boxEnd[0]=l[2],s.boxEnd[1]=s.boxStart[1]+(l[2]-s.boxStart[0])*Math.abs(I)))}else P&&(s.boxEnd[0]=s.boxStart[0]),F&&(s.boxEnd[1]=s.boxStart[1])}else s.boxEnabled?(_=s.boxStart[0]!==s.boxEnd[0],h=s.boxStart[1]!==s.boxEnd[1],_||h?(_&&(L(0,s.boxStart[0],s.boxEnd[0]),n.xaxis.autorange=!1),h&&(L(1,s.boxStart[1],s.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,d?(s.panning||(s.dragStart[0]=f,s.dragStart[1]=y),Math.abs(s.dragStart[0]-f)<w&&(f=s.dragStart[0]),Math.abs(s.dragStart[1]-y)<w&&(y=s.dragStart[1]),_=(c-f)*(l[2]-l[0])/(v.viewBox[2]-v.viewBox[0]),h=(M-y)*(l[3]-l[1])/(v.viewBox[3]-v.viewBox[1]),l[0]+=_,l[2]+=_,l[1]+=h,l[3]+=h,n.setRanges(l),s.panning=!0,s.lastInputTime=Date.now(),o(),n.cameraChanged(),n.handleAnnotations()):s.panning&&(s.panning=!1,n.relayoutCallback());break}s.lastPos[0]=f,s.lastPos[1]=y}return s.wheelListener=u(r,function(d,f){if(!n.scrollZoom)return!1;var y=n.calcDataBox(),l=v.viewBox,x=s.lastPos[0],c=s.lastPos[1],M=Math.exp(5*f/(l[3]-l[1])),w=x/(l[2]-l[0])*(y[2]-y[0])+y[0],p=c/(l[3]-l[1])*(y[3]-y[1])+y[1];return y[0]=(y[0]-w)*M+w,y[2]=(y[2]-w)*M+w,y[1]=(y[1]-p)*M+p,y[3]=(y[3]-p)*M+p,n.setRanges(y),s.lastInputTime=Date.now(),o(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(t,N,V){var m=t("../cartesian/axes"),u=t("../../lib/str2rgbarray");function A(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=A.prototype,e=["xaxis","yaxis"];T.merge=function(i){this.titleEnable=!1,this.backgroundColor=u(i.plot_bgcolor);var n,r,v,s,o,b,g,d,f,y,l;for(y=0;y<2;++y){n=e[y];var x=n.charAt(0);for(r=i[this.scene[n]._name],v=r.title.text===this.scene.fullLayout._dfltTitle[x]?"":r.title.text,l=0;l<=2;l+=2)this.labelEnable[y+l]=!1,this.labels[y+l]=v,this.labelColor[y+l]=u(r.title.font.color),this.labelFont[y+l]=r.title.font.family,this.labelSize[y+l]=r.title.font.size,this.labelPad[y+l]=this.getLabelPad(n,r),this.tickEnable[y+l]=!1,this.tickColor[y+l]=u((r.tickfont||{}).color),this.tickAngle[y+l]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[y+l]=this.getTickPad(r),this.tickMarkLength[y+l]=0,this.tickMarkWidth[y+l]=r.tickwidth||0,this.tickMarkColor[y+l]=u(r.tickcolor),this.borderLineEnable[y+l]=!1,this.borderLineColor[y+l]=u(r.linecolor),this.borderLineWidth[y+l]=r.linewidth||0;g=this.hasSharedAxis(r),o=this.hasAxisInDfltPos(n,r)&&!g,b=this.hasAxisInAltrPos(n,r)&&!g,s=r.mirror||!1,d=g?String(s).indexOf("all")!==-1:!!s,f=g?s==="allticks":String(s).indexOf("ticks")!==-1,o?this.labelEnable[y]=!0:b&&(this.labelEnable[y+2]=!0),o?this.tickEnable[y]=r.showticklabels:b&&(this.tickEnable[y+2]=r.showticklabels),(o||d)&&(this.borderLineEnable[y]=r.showline),(b||d)&&(this.borderLineEnable[y+2]=r.showline),(o||f)&&(this.tickMarkLength[y]=this.getTickMarkLength(r)),(b||f)&&(this.tickMarkLength[y+2]=this.getTickMarkLength(r)),this.gridLineEnable[y]=r.showgrid,this.gridLineColor[y]=u(r.gridcolor),this.gridLineWidth[y]=r.gridwidth,this.zeroLineEnable[y]=r.zeroline,this.zeroLineColor[y]=u(r.zerolinecolor),this.zeroLineWidth[y]=r.zerolinewidth}},T.hasSharedAxis=function(i){var n=this.scene,r=n.fullLayout._subplots.gl2d,v=m.findSubplotsWithAxis(r,i);return v.indexOf(n.id)!==0},T.hasAxisInDfltPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="bottom";if(i==="yaxis")return r==="left"},T.hasAxisInAltrPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="top";if(i==="yaxis")return r==="right"},T.getLabelPad=function(i,n){var r=1.5,v=n.title.font.size,s=n.showticklabels;if(i==="xaxis")return n.side==="top"?-10+v*(r+(s?1:0)):-10+v*(r+(s?.5:0));if(i==="yaxis")return n.side==="right"?10+v*(r+(s?1:.5)):10+v*(r+(s?.5:0))},T.getTickPad=function(i){return i.ticks==="outside"?10+i.ticklen:15},T.getTickMarkLength=function(i){if(!i.ticks)return 0;var n=i.ticklen;return i.ticks==="inside"?-n:n};function a(i){return new A(i)}N.exports=a},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(t,N,V){var m=t("../../plot_api/edit_types").overrideAll,u=t("./scene2d"),A=t("../layout_attributes"),T=t("../../constants/xmlns_namespaces"),e=t("../cartesian/constants"),a=t("../cartesian"),i=t("../../components/fx/layout_attributes"),n=t("../get_data").getSubplotData;V.name="gl2d",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=e.idRegex,V.attrRegex=e.attrRegex,V.attributes=t("../cartesian/attributes"),V.supplyLayoutDefaults=function(r,v,s){v._has("cartesian")||a.supplyLayoutDefaults(r,v,s)},V.layoutAttrOverrides=m(a.layoutAttributes,"plot","from-root"),V.baseLayoutAttrOverrides=m({plot_bgcolor:A.plot_bgcolor,hoverlabel:i.hoverlabel},"plot","nested"),V.plot=function(v){for(var s=v._fullLayout,o=v._fullData,b=s._subplots.gl2d,g=0;g<b.length;g++){var d=b[g],f=s._plots[d],y=n(o,"gl2d",d),l=f._scene2d;l===void 0&&(l=new u({id:d,graphDiv:v,container:v.querySelector(".gl-container"),staticPlot:v._context.staticPlot,plotGlPixelRatio:v._context.plotGlPixelRatio},s),f._scene2d=l),l.plot(y,v.calcdata,s,v.layout)}},V.clean=function(r,v,s,o){for(var b=o._subplots.gl2d||[],g=0;g<b.length;g++){var d=b[g],f=o._plots[d];if(!!f._scene2d){var y=n(r,"gl2d",d);y.length===0&&(f._scene2d.destroy(),delete o._plots[d])}}a.clean.apply(this,arguments)},V.drawFramework=function(r){r._context.staticPlot||a.drawFramework(r)},V.toSVG=function(r){for(var v=r._fullLayout,s=v._subplots.gl2d,o=0;o<s.length;o++){var b=v._plots[s[o]],g=b._scene2d,d=g.toImage("png"),f=v._glimages.append("svg:image");f.attr({xmlns:T.svg,"xlink:href":d,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),g.destroy()}},V.updateFx=function(r){for(var v=r._fullLayout,s=v._subplots.gl2d,o=0;o<s.length;o++){var b=v._plots[s[o]]._scene2d;b.updateFx(v.dragmode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(t,N,V){var m=t("../../registry"),u=t("../../plots/cartesian/axes"),A=t("../../components/fx"),T=t("../../../stackgl_modules").gl_plot2d,e=t("../../../stackgl_modules").gl_spikes2d,a=t("../../../stackgl_modules").gl_select_box,i=t("webgl-context"),n=t("./convert"),r=t("./camera"),v=t("../../lib/show_no_webgl_msg"),s=t("../cartesian/constraints"),o=s.enforce,b=s.clean,g=t("../cartesian/autorange").doAutoRange,d=t("../../components/dragelement/helpers"),f=d.drawMode,y=d.selectMode,l=["xaxis","yaxis"],x,c,M=t("../cartesian/constants").SUBPLOT_PATTERN;function w(h,L){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=n(this),this.glplotOptions.merge(L),this.glplot=T(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}N.exports=w;var p=w.prototype;p.makeFramework=function(){if(this.staticPlot){if(!c&&(x=document.createElement("canvas"),c=i({canvas:x,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!c))throw new Error("Error creating static canvas/context for image server");this.canvas=x,this.gl=c}else{var h=this.container.querySelector(".gl-canvas-focus"),L=i({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){v(this),this.stopped=!0;return}this.canvas=h,this.gl=L}var E=this.canvas;E.style.width="100%",E.style.height="100%",E.style.position="absolute",E.style.top="0px",E.style.left="0px",E.style["pointer-events"]="none",this.updateSize(E);var S=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");S.style.position="absolute",S.style.top=S.style.left="0px",S.style.width=S.style.height="100%",S.style["z-index"]=20,S.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(S),F.appendChild(P);var I=this;P.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),P.addEventListener("mouseover",function(){I.isMouseOver=!0})},p.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(x),this.updateSize(this.canvas);var L=this.glplot.gl,E=L.drawingBufferWidth,S=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(E*S*4);L.readPixels(0,0,E,S,L.RGBA,L.UNSIGNED_BYTE,P);for(var F=0,I=S-1;F<I;++F,--I)for(var D=0;D<E;++D)for(var R=0;R<4;++R){var O=P[4*(E*F+D)+R];P[4*(E*F+D)+R]=P[4*(E*I+D)+R],P[4*(E*I+D)+R]=O}var z=document.createElement("canvas");z.width=E,z.height=S;var G=z.getContext("2d",{willReadFrequently:!0}),Y=G.createImageData(E,S);Y.data.set(P),G.putImageData(Y,0,0);var ee;switch(h){case"jpeg":ee=z.toDataURL("image/jpeg");break;case"webp":ee=z.toDataURL("image/webp");break;default:ee=z.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(x),ee},p.updateSize=function(h){h||(h=this.canvas);var L=this.pixelRatio,E=this.fullLayout,S=E.width,P=E.height,F=Math.ceil(L*S)|0,I=Math.ceil(L*P)|0;return(h.width!==F||h.height!==I)&&(h.width=F,h.height=I),h},p.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[u.calcTicks(this.xaxis),u.calcTicks(this.yaxis)],L=0;L<2;++L)for(var E=0;E<h[L].length;++E)h[L][E].text=h[L][E].text+"";return h};function _(h,L){for(var E=0;E<2;++E){var S=h[E],P=L[E];if(S.length!==P.length)return!0;for(var F=0;F<S.length;++F)if(S[F].x!==P[F].x)return!0}return!1}p.updateRefs=function(h){this.fullLayout=h;var L=this.id.match(M),E="xaxis"+L[1],S="yaxis"+L[2];this.xaxis=this.fullLayout[E],this.yaxis=this.fullLayout[S]},p.relayoutCallback=function(){var h=this.graphDiv,L=this.xaxis,E=this.yaxis,S=h.layout,P={},F=P[L._name+".range"]=L.range.slice(),I=P[E._name+".range"]=E.range.slice();P[L._name+".autorange"]=L.autorange,P[E._name+".autorange"]=E.autorange,m.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var D=S[L._name];D.range=F,D.autorange=L.autorange;var R=S[E._name];R.range=I,R.autorange=E.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},p.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),E=this.glplotOptions.ticks;_(L,E)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},p.handleAnnotations=function(){for(var h=this.graphDiv,L=this.fullLayout.annotations,E=0;E<L.length;E++){var S=L[E];S.xref===this.xaxis._id&&S.yref===this.yaxis._id&&m.getComponentMethod("annotations","drawOne")(h,E)}},p.destroy=function(){if(!!this.glplot){var h=this.traces;h&&Object.keys(h).map(function(L){h[L].dispose(),delete h[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},p.plot=function(h,L,E){var S=this.glplot;this.updateRefs(E),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,L),this.updateFx(E.dragmode);var P=E.width,F=E.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(E),I.screenBox=[0,0,P,F];var D={_fullLayout:{_axisConstraintGroups:E._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:E._size}};b(D,this.xaxis),b(D,this.yaxis);var R=E._size,O=this.xaxis.domain,z=this.yaxis.domain;I.viewBox=[R.l+O[0]*R.w,R.b+z[0]*R.h,P-R.r-(1-O[1])*R.w,F-R.t-(1-z[1])*R.h],this.mouseContainer.style.width=R.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=R.h*(z[1]-z[0])+"px",this.mouseContainer.height=R.h*(z[1]-z[0]),this.mouseContainer.style.left=R.l+O[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-z[1])*R.h+"px";var G,Y;for(Y=0;Y<2;++Y)G=this[l[Y]],G._length=I.viewBox[Y+2]-I.viewBox[Y],g(this.graphDiv,G),G.setScale();o(D),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(E),S.update(I),this.glplot.draw()},p.calcDataBox=function(){var h=this.xaxis,L=this.yaxis,E=h.range,S=L.range,P=h.r2l,F=L.r2l;return[P(E[0]),F(S[0]),P(E[1]),F(S[1])]},p.setRanges=function(h){var L=this.xaxis,E=this.yaxis,S=L.l2r,P=E.l2r;L.range=[S(h[0]),S(h[2])],E.range=[P(h[1]),P(h[3])]},p.updateTraces=function(h,L){var E=Object.keys(this.traces),S,P,F;this.fullData=h;e:for(S=0;S<E.length;S++){var I=E[S],D=this.traces[I];for(P=0;P<h.length;P++)if(F=h[P],F.uid===I&&F.type===D.type)continue e;D.dispose(),delete this.traces[I]}for(S=0;S<h.length;S++){F=h[S];var R=L[S],O=this.traces[F.uid];O?O.update(F,R):(O=F._module.plot(this,F,R),this.traces[F.uid]=O)}this.glplot.objects.sort(function(z,G){return z._trace.index-G._trace.index})},p.updateFx=function(h){y(h)||f(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),h==="pan"?this.mouseContainer.style.cursor="move":h==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},p.emitPointAction=function(h,L){for(var E=h.trace.uid,S=h.pointIndex,P,F=0;F<this.fullData.length;F++)this.fullData[F].uid===E&&(P=this.fullData[F]);var I={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:P.index,pointNumber:S,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};A.appendArrayPointValue(I,P,S),this.graphDiv.emit(L,{points:[I]})},p.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,L=this.camera,E=L.mouseListener,S=this.lastButtonState===1&&E.buttons===0,P=this.fullLayout;this.lastButtonState=E.buttons,this.cameraChanged();var F=E.x*h.pixelRatio,I=this.canvas.height-h.pixelRatio*E.y,D;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],O=0;O<2;O++)L.boxStart[O]===L.boxEnd[O]&&(R[O]=h.dataBox[O],R[O+2]=h.dataBox[O+2]);h.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var z=P._size,G=this.xaxis.domain,Y=this.yaxis.domain;D=h.pick(F/h.pixelRatio+z.l+G[0]*z.w,I/h.pixelRatio-(z.t+(1-Y[1])*z.h));var ee=D&&D.object._trace.handlePick(D);if(ee&&S&&this.emitPointAction(ee,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&P.hovermode&&ee&&(!this.lastPickResult||this.lastPickResult.traceUid!==ee.trace.uid||this.lastPickResult.dataCoord[0]!==ee.dataCoord[0]||this.lastPickResult.dataCoord[1]!==ee.dataCoord[1])){var j=ee;this.lastPickResult={traceUid:ee.trace?ee.trace.uid:null,dataCoord:ee.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),j.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(D.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(D.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(ee,"plotly_hover");var X=this.fullData[j.trace.index]||{},ie=j.pointIndex,he=A.castHoverinfo(X,P,ie);if(he&&he!=="all"){var K=he.split("+");K.indexOf("x")===-1&&(j.traceCoord[0]=void 0),K.indexOf("y")===-1&&(j.traceCoord[1]=void 0),K.indexOf("z")===-1&&(j.traceCoord[2]=void 0),K.indexOf("text")===-1&&(j.textLabel=void 0),K.indexOf("name")===-1&&(j.name=void 0)}A.loneHover({x:j.screenCoord[0],y:j.screenCoord[1],xLabel:this.hoverFormatter("xaxis",j.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",j.traceCoord[1]),zLabel:j.traceCoord[2],text:j.textLabel,name:j.name,color:A.castHoverOption(X,ie,"bgcolor")||j.color,borderColor:A.castHoverOption(X,ie,"bordercolor"),fontFamily:A.castHoverOption(X,ie,"font.family"),fontSize:A.castHoverOption(X,ie,"font.size"),fontColor:A.castHoverOption(X,ie,"font.color"),nameLength:A.castHoverOption(X,ie,"namelength"),textAlign:A.castHoverOption(X,ie,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),h.draw()}},p.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),A.loneUnhover(this.svgContainer))},p.hoverFormatter=function(h,L){if(L!==void 0){var E=this[h];return u.tickText(E,E.c2l(L),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(t,N,V){var m=t("../../plot_api/edit_types").overrideAll,u=t("../../components/fx/layout_attributes"),A=t("./scene"),T=t("../get_data").getSubplotData,e=t("../../lib"),a=t("../../constants/xmlns_namespaces"),i="gl3d",n="scene";V.name=i,V.attr=n,V.idRoot=n,V.idRegex=V.attrRegex=e.counterRegex("scene"),V.attributes=t("./layout/attributes"),V.layoutAttributes=t("./layout/layout_attributes"),V.baseLayoutAttrOverrides=m({hoverlabel:u.hoverlabel},"plot","nested"),V.supplyLayoutDefaults=t("./layout/defaults"),V.plot=function(v){for(var s=v._fullLayout,o=v._fullData,b=s._subplots[i],g=0;g<b.length;g++){var d=b[g],f=T(o,i,d),y=s[d],l=y.camera,x=y._scene;x||(x=new A({id:d,graphDiv:v,container:v.querySelector(".gl-container"),staticPlot:v._context.staticPlot,plotGlPixelRatio:v._context.plotGlPixelRatio,camera:l},s),y._scene=x),x.viewInitial||(x.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),x.plot(f,s,v.layout)}},V.clean=function(r,v,s,o){for(var b=o._subplots[i]||[],g=0;g<b.length;g++){var d=b[g];!v[d]&&!!o[d]._scene&&(o[d]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+d).remove())}},V.toSVG=function(r){for(var v=r._fullLayout,s=v._subplots[i],o=v._size,b=0;b<s.length;b++){var g=v[s[b]],d=g.domain,f=g._scene,y=f.toImage("png"),l=v._glimages.append("svg:image");l.attr({xmlns:a.svg,"xlink:href":y,x:o.l+o.w*d.x[0],y:o.t+o.h*(1-d.y[1]),width:o.w*(d.x[1]-d.x[0]),height:o.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),f.destroy()}},V.cleanId=function(v){if(!!v.match(/^scene[0-9]*$/)){var s=v.substr(5);return s==="1"&&(s=""),n+s}},V.updateFx=function(r){for(var v=r._fullLayout,s=v._subplots[i],o=0;o<s.length;o++){var b=v[s[o]]._scene;b.updateFx(v.dragmode,v.hovermode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(t,N,V){N.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(t,N,V){var m=t("../../../components/color"),u=t("../../cartesian/layout_attributes"),A=t("../../../lib/extend").extendFlat,T=t("../../../plot_api/edit_types").overrideAll;N.exports=T({visible:u.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:m.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:u.color,categoryorder:u.categoryorder,categoryarray:u.categoryarray,title:{text:u.title.text,font:u.title.font},type:A({},u.type,{values:["-","linear","log","date","category"]}),autotypenumbers:u.autotypenumbers,autorange:u.autorange,rangemode:u.rangemode,range:A({},u.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:u.tickmode,nticks:u.nticks,tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:u.ticks,mirror:u.mirror,ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,showticklabels:u.showticklabels,tickfont:u.tickfont,tickangle:u.tickangle,tickprefix:u.tickprefix,showtickprefix:u.showtickprefix,ticksuffix:u.ticksuffix,showticksuffix:u.showticksuffix,showexponent:u.showexponent,exponentformat:u.exponentformat,minexponent:u.minexponent,separatethousands:u.separatethousands,tickformat:u.tickformat,tickformatstops:u.tickformatstops,hoverformat:u.hoverformat,showline:u.showline,linecolor:u.linecolor,linewidth:u.linewidth,showgrid:u.showgrid,gridcolor:A({},u.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:u.gridwidth,zeroline:u.zeroline,zerolinecolor:u.zerolinecolor,zerolinewidth:u.zerolinewidth,_deprecated:{title:u._deprecated.title,titlefont:u._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(t,N,V){var m=t("tinycolor2").mix,u=t("../../../lib"),A=t("../../../plot_api/plot_template"),T=t("./axis_attributes"),e=t("../../cartesian/type_defaults"),a=t("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"],n=100*(204-68)/(255-68);N.exports=function(v,s,o){var b,g;function d(l,x){return u.coerce(b,g,T,l,x)}for(var f=0;f<i.length;f++){var y=i[f];b=v[y]||{},g=A.newContainer(s,y),g._id=y[0]+o.scene,g._name=y,e(b,g,d,o),a(b,g,d,{font:o.font,letter:y[0],data:o.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:o.bgColor,calendar:o.calendar},o.fullLayout),d("gridcolor",m(g.color,o.bgColor,n).toRgbString()),d("title.text",y[0]),g.setScale=u.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",g.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(t,N,V){var m=t("../../../lib/str2rgbarray"),u=t("../../../lib"),A=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=T.prototype;e.merge=function(i,n){for(var r=this,v=0;v<3;++v){var s=n[A[v]];if(!s.visible){r.tickEnable[v]=!1,r.labelEnable[v]=!1,r.lineEnable[v]=!1,r.lineTickEnable[v]=!1,r.gridEnable[v]=!1,r.zeroEnable[v]=!1,r.backgroundEnable[v]=!1;continue}r.labels[v]=i._meta?u.templateString(s.title.text,i._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(r.labelColor[v]=m(s.title.font.color)),s.title.font.family&&(r.labelFont[v]=s.title.font.family),s.title.font.size&&(r.labelSize[v]=s.title.font.size)),"showline"in s&&(r.lineEnable[v]=s.showline),"linecolor"in s&&(r.lineColor[v]=m(s.linecolor)),"linewidth"in s&&(r.lineWidth[v]=s.linewidth),"showgrid"in s&&(r.gridEnable[v]=s.showgrid),"gridcolor"in s&&(r.gridColor[v]=m(s.gridcolor)),"gridwidth"in s&&(r.gridWidth[v]=s.gridwidth),s.type==="log"?r.zeroEnable[v]=!1:"zeroline"in s&&(r.zeroEnable[v]=s.zeroline),"zerolinecolor"in s&&(r.zeroLineColor[v]=m(s.zerolinecolor)),"zerolinewidth"in s&&(r.zeroLineWidth[v]=s.zerolinewidth),"ticks"in s&&!!s.ticks?r.lineTickEnable[v]=!0:r.lineTickEnable[v]=!1,"ticklen"in s&&(r.lineTickLength[v]=r._defaultLineTickLength[v]=s.ticklen),"tickcolor"in s&&(r.lineTickColor[v]=m(s.tickcolor)),"tickwidth"in s&&(r.lineTickWidth[v]=s.tickwidth),"tickangle"in s&&(r.tickAngle[v]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(r.tickEnable[v]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(r.tickColor[v]=m(s.tickfont.color)),s.tickfont.family&&(r.tickFont[v]=s.tickfont.family),s.tickfont.size&&(r.tickSize[v]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(r.lineTickMirror[v]=!0,r.lineMirror[v]=!0):s.mirror===!0?(r.lineTickMirror[v]=!1,r.lineMirror[v]=!0):(r.lineTickMirror[v]=!1,r.lineMirror[v]=!1):r.lineMirror[v]=!1,"showbackground"in s&&s.showbackground!==!1?(r.backgroundEnable[v]=!0,r.backgroundColor[v]=m(s.backgroundcolor)):r.backgroundEnable[v]=!1}};function a(i,n){var r=new T;return r.merge(i,n),r}N.exports=a},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(t,N,V){var m=t("../../../lib"),u=t("../../../components/color"),A=t("../../../registry"),T=t("../../subplot_defaults"),e=t("./axis_defaults"),a=t("./layout_attributes"),i=t("../../get_data").getSubplotData,n="gl3d";N.exports=function(s,o,b){var g=o._basePlotModules.length>1;function d(f){if(!g){var y=m.validate(s[f],a[f]);if(y)return s[f]}}T(s,o,b,{type:n,attributes:a,handleDefaults:r,fullLayout:o,font:o.font,fullData:b,getDfltFromLayout:d,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})};function r(v,s,o,b){for(var g=o("bgcolor"),d=u.combine(g,b.paper_bgcolor),f=["up","center","eye"],y=0;y<f.length;y++)o("camera."+f[y]+".x"),o("camera."+f[y]+".y"),o("camera."+f[y]+".z");o("camera.projection.type");var l=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),x=l?"manual":"auto",c=o("aspectmode",x);l||(v.aspectratio=s.aspectratio={x:1,y:1,z:1},c==="manual"&&(s.aspectmode="auto"),v.aspectmode=s.aspectmode);var M=i(b.fullData,n,b.id);e(v,s,{font:b.font,scene:b.id,data:M,bgColor:d,calendar:b.calendar,autotypenumbersDflt:b.autotypenumbersDflt,fullLayout:b.fullLayout}),A.getComponentMethod("annotations3d","handleDefaults")(v,s,b);var w=b.getDfltFromLayout("dragmode");if(w!==!1&&!w)if(w="orbit",v.camera&&v.camera.up){var p=v.camera.up.x,_=v.camera.up.y,h=v.camera.up.z;h!==0&&(!p||!_||!h||h/Math.sqrt(p*p+_*_+h*h)>.999)&&(w="turntable")}else w="turntable";o("dragmode",w),o("hovermode",b.getDfltFromLayout("hovermode"))}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(t,N,V){var m=t("./axis_attributes"),u=t("../../domain").attributes,A=t("../../../lib/extend").extendFlat,T=t("../../../lib").counterRegex;function e(a,i,n){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:i,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}N.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:A(e(0,0,1),{}),center:A(e(0,0,0),{}),eye:A(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:u({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:m,yaxis:m,zaxis:m,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(t,N,V){var m=t("../../../lib/str2rgbarray"),u=["xaxis","yaxis","zaxis"];function A(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var T=A.prototype;T.merge=function(a){for(var i=0;i<3;++i){var n=a[u[i]];if(!n.visible){this.enabled[i]=!1,this.drawSides[i]=!1;continue}this.enabled[i]=n.showspikes,this.colors[i]=m(n.spikecolor),this.drawSides[i]=n.spikesides,this.lineWidth[i]=n.spikethickness}};function e(a){var i=new A;return i.merge(a),i}N.exports=e},{"../../../lib/str2rgbarray":540}],615:[function(t,N,V){N.exports=e;var m=t("../../cartesian/axes"),u=t("../../../lib"),A=["xaxis","yaxis","zaxis"];function T(a){for(var i=new Array(3),n=0;n<3;++n){for(var r=a[n],v=new Array(r.length),s=0;s<r.length;++s)v[s]=r[s].x;i[n]=v}return i}function e(a){for(var i=a.axesOptions,n=a.glplot.axesPixels,r=a.fullSceneLayout,v=[[],[],[]],s=0;s<3;++s){var o=r[A[s]];if(o._length=(n[s].hi-n[s].lo)*n[s].pixelsPerDataUnit/a.dataScale[s],Math.abs(o._length)===1/0||isNaN(o._length))v[s]=[];else{o._input_range=o.range.slice(),o.range[0]=n[s].lo/a.dataScale[s],o.range[1]=n[s].hi/a.dataScale[s],o._m=1/(a.dataScale[s]*n[s].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var b=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var g=o.nticks||u.constrain(o._length/40,4,9);m.autoTicks(o,Math.abs(o.range[1]-o.range[0])/g)}for(var d=m.calcTicks(o,{msUTC:!0}),f=0;f<d.length;++f)d[f].x=d[f].x*a.dataScale[s],o.type==="date"&&(d[f].text=d[f].text.replace(/\<br\>/g," "));v[s]=d,o.tickmode=b}}i.ticks=v;for(var s=0;s<3;++s){.5*(a.glplot.bounds[0][s]+a.glplot.bounds[1][s]);for(var f=0;f<2;++f)i.bounds[f][s]=a.glplot.bounds[f][s]}a.contourLevels=T(v)}},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(t,N,V){function m(A,T){var e=[0,0,0,0],a,i;for(a=0;a<4;++a)for(i=0;i<4;++i)e[i]+=A[4*a+i]*T[a];return e}function u(A,T){var e=m(A.projection,m(A.view,m(A.model,[T[0],T[1],T[2],1])));return e}N.exports=u},{}],617:[function(t,N,V){var m=t("../../../stackgl_modules").gl_plot3d,u=m.createCamera,A=m.createScene,T=t("webgl-context"),e=t("has-passive-events"),a=t("../../registry"),i=t("../../lib"),n=i.preserveDrawingBuffer(),r=t("../../plots/cartesian/axes"),v=t("../../components/fx"),s=t("../../lib/str2rgbarray"),o=t("../../lib/show_no_webgl_msg"),b=t("./project"),g=t("./layout/convert"),d=t("./layout/spikes"),f=t("./layout/tick_marks"),y,l;function x(P,F){var I=document.createElement("div"),D=P.container;this.graphDiv=P.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",I.appendChild(R),this.svgContainer=R,I.id=P.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",D.appendChild(I),this.fullLayout=F,this.id=P.id||"scene",this.fullSceneLayout=F[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(F,F[this.id]),this.spikeOptions=d(F[this.id]),this.container=I,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var c=x.prototype;c.prepareOptions=function(){var P=this,F={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!l&&(y=document.createElement("canvas"),l=T({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");F.gl=l,F.canvas=y}return F};var M=!0;c.tryCreatePlot=function(){var P=this,F=P.prepareOptions(),I=!0;try{P.glplot=A(F)}catch{if(P.staticMode||!M||n)I=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=F.glOptions.preserveDrawingBuffer=!0,P.glplot=A(F)}catch{n=F.glOptions.preserveDrawingBuffer=!1,I=!1}}}return M=!1,I},c.initializeGLCamera=function(){var P=this,F=P.fullSceneLayout.camera,I=F.projection.type==="orthographic";P.camera=u(P.container,{center:[F.center.x,F.center.y,F.center.z],eye:[F.eye.x,F.eye.y,F.eye.z],up:[F.up.x,F.up.y,F.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},c.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var F=P.tryCreatePlot();if(!F)return o(P);P.traces={},P.make4thDimension();var I=P.graphDiv,D=I.layout,R=function(){var z={};return P.isCameraChanged(D)&&(z[P.id+".camera"]=P.getCamera()),P.isAspectChanged(D)&&(z[P.id+".aspectratio"]=P.glplot.getAspectratio(),D[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=D[P.id].aspectmode=z[P.id+".aspectmode"]="manual")),z},O=function(z){if(z.fullSceneLayout.dragmode!==!1){var G=R();z.saveLayout(D),z.graphDiv.emit("plotly_relayout",G)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){O(P)}),P.glplot.canvas.addEventListener("wheel",function(z){if(I._context._scrollZoom.gl3d){if(P.camera._ortho){var G=z.deltaX>z.deltaY?1.1:.9090909090909091,Y=P.glplot.getAspectratio();P.glplot.setAspectratio({x:G*Y.x,y:G*Y.y,z:G*Y.z})}O(P)}},e?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var z=R();P.graphDiv.emit("plotly_relayouting",z)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(z){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:z,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},c.render=function(){var P=this,F=P.graphDiv,I,D=P.svgContainer,R=P.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var O=F._fullLayout._invScaleX,z=F._fullLayout._invScaleY,G=R.width*O,Y=R.height*z;D.setAttributeNS(null,"viewBox","0 0 "+G+" "+Y),D.setAttributeNS(null,"width",G),D.setAttributeNS(null,"height",Y),f(P),P.glplot.axes.update(P.axesOptions);for(var ee=Object.keys(P.traces),j=null,X=P.glplot.selection,ie=0;ie<ee.length;++ie)I=P.traces[ee[ie]],I.data.hoverinfo!=="skip"&&I.handlePick(X)&&(j=I),I.setContourLevels&&I.setContourLevels();function he(_e,fe,me){var xe=P.fullSceneLayout[_e+"axis"];return xe.type!=="log"&&(fe=xe.d2l(fe)),r.hoverLabelText(xe,fe,me)}if(j!==null){var K=b(P.glplot.cameraParams,X.dataCoordinate);I=j.data;var $=F._fullData[I.index],U=X.index,H={xLabel:he("x",X.traceCoordinate[0],I.xhoverformat),yLabel:he("y",X.traceCoordinate[1],I.yhoverformat),zLabel:he("z",X.traceCoordinate[2],I.zhoverformat)},q=v.castHoverinfo($,P.fullLayout,U),re=(q||"").split("+"),Z=q&&q==="all";!$.hovertemplate&&!Z&&(re.indexOf("x")===-1&&(H.xLabel=void 0),re.indexOf("y")===-1&&(H.yLabel=void 0),re.indexOf("z")===-1&&(H.zLabel=void 0),re.indexOf("text")===-1&&(X.textLabel=void 0),re.indexOf("name")===-1&&(j.name=void 0));var Q,oe=[];I.type==="cone"||I.type==="streamtube"?(H.uLabel=he("x",X.traceCoordinate[3],I.uhoverformat),(Z||re.indexOf("u")!==-1)&&oe.push("u: "+H.uLabel),H.vLabel=he("y",X.traceCoordinate[4],I.vhoverformat),(Z||re.indexOf("v")!==-1)&&oe.push("v: "+H.vLabel),H.wLabel=he("z",X.traceCoordinate[5],I.whoverformat),(Z||re.indexOf("w")!==-1)&&oe.push("w: "+H.wLabel),H.normLabel=X.traceCoordinate[6].toPrecision(3),(Z||re.indexOf("norm")!==-1)&&oe.push("norm: "+H.normLabel),I.type==="streamtube"&&(H.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(Z||re.indexOf("divergence")!==-1)&&oe.push("divergence: "+H.divergenceLabel)),X.textLabel&&oe.push(X.textLabel),Q=oe.join("<br>")):I.type==="isosurface"||I.type==="volume"?(H.valueLabel=r.hoverLabelText(P._mockAxis,P._mockAxis.d2l(X.traceCoordinate[3]),I.valuehoverformat),oe.push("value: "+H.valueLabel),X.textLabel&&oe.push(X.textLabel),Q=oe.join("<br>")):Q=X.textLabel;var se={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:$._input,fullData:$,curveNumber:$.index,pointNumber:U};v.appendArrayPointValue(se,$,U),I._module.eventData&&(se=$._module.eventData(se,X,$,{},U));var ae={points:[se]};if(P.fullSceneLayout.hovermode){var le=[];v.loneHover({trace:$,x:(.5+.5*K[0]/K[3])*G,y:(.5-.5*K[1]/K[3])*Y,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:Q,name:j.name,color:v.castHoverOption($,U,"bgcolor")||j.color,borderColor:v.castHoverOption($,U,"bordercolor"),fontFamily:v.castHoverOption($,U,"font.family"),fontSize:v.castHoverOption($,U,"font.size"),fontColor:v.castHoverOption($,U,"font.color"),nameLength:v.castHoverOption($,U,"namelength"),textAlign:v.castHoverOption($,U,"align"),hovertemplate:i.castOption($,U,"hovertemplate"),hovertemplateLabels:i.extendFlat({},se,H),eventData:[se]},{container:D,gd:F,inOut_bbox:le}),se.bbox=le[0]}X.buttons&&X.distance<5?F.emit("plotly_click",ae):F.emit("plotly_hover",ae),this.oldEventData=ae}else v.loneUnhover(D),this.oldEventData&&F.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},c.recoverContext=function(){var P=this;P.glplot.dispose();var F=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(F);return}if(!P.initializeGLPlot()){i.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(F)};var w=["xaxis","yaxis","zaxis"];function p(P,F,I){for(var D=P.fullSceneLayout,R=0;R<3;R++){var O=w[R],z=O.charAt(0),G=D[O],Y=F[z],ee=F[z+"calendar"],j=F["_"+z+"length"];if(!i.isArrayOrTypedArray(Y))I[0][R]=Math.min(I[0][R],0),I[1][R]=Math.max(I[1][R],j-1);else for(var X,ie=0;ie<(j||Y.length);ie++)if(i.isArrayOrTypedArray(Y[ie]))for(var he=0;he<Y[ie].length;++he)X=G.d2l(Y[ie][he],0,ee),!isNaN(X)&&isFinite(X)&&(I[0][R]=Math.min(I[0][R],X),I[1][R]=Math.max(I[1][R],X));else X=G.d2l(Y[ie],0,ee),!isNaN(X)&&isFinite(X)&&(I[0][R]=Math.min(I[0][R],X),I[1][R]=Math.max(I[1][R],X))}}function _(P,F){for(var I=P.fullSceneLayout,D=I.annotations||[],R=0;R<3;R++)for(var O=w[R],z=O.charAt(0),G=I[O],Y=0;Y<D.length;Y++){var ee=D[Y];if(ee.visible){var j=G.r2l(ee[z]);!isNaN(j)&&isFinite(j)&&(F[0][R]=Math.min(F[0][R],j),F[1][R]=Math.max(F[1][R],j))}}}c.plot=function(P,F,I){var D=this;if(D.plotArgs=[P,F,I],D.glplot.contextLost)return;var R,O,z,G,Y,ee,j=F[D.id],X=I[D.id];D.fullLayout=F,D.fullSceneLayout=j,D.axesOptions.merge(F,j),D.spikeOptions.merge(j),D.setViewport(j),D.updateFx(j.dragmode,j.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(s(j.bgcolor)),D.setConvert(Y),P?Array.isArray(P)||(P=[P]):P=[];var ie=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<P.length;++z)R=P[z],!(R.visible!==!0||R._length===0)&&p(this,R,ie);_(this,ie);var he=[1,1,1];for(G=0;G<3;++G)ie[1][G]===ie[0][G]?he[G]=1:he[G]=1/(ie[1][G]-ie[0][G]);for(D.dataScale=he,D.convertAnnotations(this),z=0;z<P.length;++z)R=P[z],!(R.visible!==!0||R._length===0)&&(O=D.traces[R.uid],O?O.data.type===R.type?O.update(R):(O.dispose(),O=R._module.plot(this,R),D.traces[R.uid]=O):(O=R._module.plot(this,R),D.traces[R.uid]=O),O.name=R.name);var K=Object.keys(D.traces);e:for(z=0;z<K.length;++z){for(G=0;G<P.length;++G)if(P[G].uid===K[z]&&P[G].visible===!0&&P[G]._length!==0)continue e;O=D.traces[K[z]],O.dispose(),delete D.traces[K[z]]}D.glplot.objects.sort(function(Le,Ze){return Le._trace.data.index-Ze._trace.data.index});var $=[[0,0,0],[0,0,0]],U={};for(z=0;z<3;++z){if(Y=j[w[z]],ee=Y.type,ee in U?(U[ee].acc*=he[z],U[ee].count+=1):U[ee]={acc:he[z],count:1},Y.autorange){$[0][z]=1/0,$[1][z]=-1/0;var H=D.glplot.objects,q=D.fullSceneLayout.annotations||[],re=Y._name.charAt(0);for(G=0;G<H.length;G++){var Z=H[G],Q=Z.bounds,oe=Z._trace.data._pad||0;Z.constructor.name==="ErrorBars"&&Y._lowerLogErrorBound?$[0][z]=Math.min($[0][z],Y._lowerLogErrorBound):$[0][z]=Math.min($[0][z],Q[0][z]/he[z]-oe),$[1][z]=Math.max($[1][z],Q[1][z]/he[z]+oe)}for(G=0;G<q.length;G++){var se=q[G];if(se.visible){var ae=Y.r2l(se[re]);$[0][z]=Math.min($[0][z],ae),$[1][z]=Math.max($[1][z],ae)}}if("rangemode"in Y&&Y.rangemode==="tozero"&&($[0][z]=Math.min($[0][z],0),$[1][z]=Math.max($[1][z],0)),$[0][z]>$[1][z])$[0][z]=-1,$[1][z]=1;else{var le=$[1][z]-$[0][z];$[0][z]-=le/32,$[1][z]+=le/32}if(Y.autorange==="reversed"){var _e=$[0][z];$[0][z]=$[1][z],$[1][z]=_e}}else{var fe=Y.range;$[0][z]=Y.r2l(fe[0]),$[1][z]=Y.r2l(fe[1])}$[0][z]===$[1][z]&&($[0][z]-=1,$[1][z]+=1),D.glplot.setBounds(z,{min:$[0][z]*he[z],max:$[1][z]*he[z]})}var me,xe=j.aspectmode;if(xe==="cube")me=[1,1,1];else if(xe==="manual"){var ye=j.aspectratio;me=[ye.x,ye.y,ye.z]}else if(xe==="auto"||xe==="data"){var be=[1,1,1];for(z=0;z<3;++z){Y=j[w[z]],ee=Y.type;var ke=U[ee];be[z]=Math.pow(ke.acc,1/ke.count)/he[z]}xe==="data"||Math.max.apply(null,be)/Math.min.apply(null,be)<=4?me=be:me=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");j.aspectratio.x=X.aspectratio.x=me[0],j.aspectratio.y=X.aspectratio.y=me[1],j.aspectratio.z=X.aspectratio.z=me[2],D.glplot.setAspectratio(j.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:j.aspectratio.x,y:j.aspectratio.y,z:j.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=j.aspectmode);var De=j.domain||null,He=F._size||null;if(De&&He){var Ae=D.container.style;Ae.position="absolute",Ae.left=He.l+De.x[0]*He.w+"px",Ae.top=He.t+(1-De.y[1])*He.h+"px",Ae.width=He.w*(De.x[1]-De.x[0])+"px",Ae.height=He.h*(De.y[1]-De.y[0])+"px"}D.glplot.redraw()},c.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function h(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}c.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},c.setViewport=function(P){var F=this,I=P.camera;F.camera.lookAt.apply(this,h(I)),F.glplot.setAspectratio(P.aspectratio);var D=I.projection.type==="orthographic",R=F.camera._ortho;D!==R&&(F.glplot.redraw(),F.glplot.clearRGBA(),F.glplot.dispose(),F.initializeGLPlot())},c.isCameraChanged=function(P){var F=this,I=F.getCamera(),D=i.nestedProperty(P,F.id+".camera"),R=D.get();function O(ee,j,X,ie){var he=["up","center","eye"],K=["x","y","z"];return j[he[X]]&&ee[he[X]][K[ie]]===j[he[X]][K[ie]]}var z=!1;if(R===void 0)z=!0;else{for(var G=0;G<3;G++)for(var Y=0;Y<3;Y++)if(!O(I,R,G,Y)){z=!0;break}(!R.projection||I.projection&&I.projection.type!==R.projection.type)&&(z=!0)}return z},c.isAspectChanged=function(P){var F=this,I=F.glplot.getAspectratio(),D=i.nestedProperty(P,F.id+".aspectratio"),R=D.get();return R===void 0||R.x!==I.x||R.y!==I.y||R.z!==I.z},c.saveLayout=function(P){var F=this,I=F.fullLayout,D,R,O,z,G,Y,ee=F.isCameraChanged(P),j=F.isAspectChanged(P),X=ee||j;if(X){var ie={};if(ee&&(D=F.getCamera(),R=i.nestedProperty(P,F.id+".camera"),O=R.get(),ie[F.id+".camera"]=O),j&&(z=F.glplot.getAspectratio(),G=i.nestedProperty(P,F.id+".aspectratio"),Y=G.get(),ie[F.id+".aspectratio"]=Y),a.call("_storeDirectGUIEdit",P,I._preGUI,ie),ee){R.set(D);var he=i.nestedProperty(I,F.id+".camera");he.set(D)}if(j){G.set(z);var K=i.nestedProperty(I,F.id+".aspectratio");K.set(z),F.glplot.redraw()}}return X},c.updateFx=function(P,F){var I=this,D=I.camera;if(D)if(P==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(P==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=I.graphDiv,O=R._fullLayout,z=I.fullSceneLayout.camera,G=z.up.x,Y=z.up.y,ee=z.up.z;if(ee/Math.sqrt(G*G+Y*Y+ee*ee)<.999){var j=I.id+".camera.up",X={x:0,y:0,z:1},ie={};ie[j]=X;var he=R.layout;a.call("_storeDirectGUIEdit",he,O._preGUI,ie),z.up=X,i.nestedProperty(he,j).set(X)}}else D.keyBindingMode=P;I.fullSceneLayout.hovermode=F};function E(P,F,I){for(var D=0,R=I-1;D<R;++D,--R)for(var O=0;O<F;++O)for(var z=0;z<4;++z){var G=4*(F*D+O)+z,Y=4*(F*R+O)+z,ee=P[G];P[G]=P[Y],P[Y]=ee}}function S(P,F,I){for(var D=0;D<I;++D)for(var R=0;R<F;++R){var O=4*(F*D+R),z=P[O+3];if(z>0)for(var G=255/z,Y=0;Y<3;++Y)P[O+Y]=Math.min(G*P[O+Y],255)}}c.toImage=function(P){var F=this;P||(P="png"),F.staticMode&&F.container.appendChild(y),F.glplot.redraw();var I=F.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,O),E(O,D,R),S(O,D,R);var z=document.createElement("canvas");z.width=D,z.height=R;var G=z.getContext("2d",{willReadFrequently:!0}),Y=G.createImageData(D,R);Y.data.set(O),G.putImageData(Y,0,0);var ee;switch(P){case"jpeg":ee=z.toDataURL("image/jpeg");break;case"webp":ee=z.toDataURL("image/webp");break;default:ee=z.toDataURL("image/png")}return F.staticMode&&F.container.removeChild(y),ee},c.setConvert=function(){for(var P=this,F=0;F<3;F++){var I=P.fullSceneLayout[w[F]];r.setConvert(I,P.fullLayout),I.setScale=i.noop}},c.make4thDimension=function(){var P=this,F=P.graphDiv,I=F._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(P._mockAxis,I)},N.exports=x},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(t,N,V){N.exports=function(u,A,T,e){e=e||u.length;for(var a=new Array(e),i=0;i<e;i++)a[i]=[u[i],A[i],T[i]];return a}},{}],619:[function(t,N,V){var m=t("./font_attributes"),u=t("./animation_attributes"),A=t("../components/color/attributes"),T=t("../components/shapes/draw_newshape/attributes"),e=t("../components/selections/draw_newselection/attributes"),a=t("./pad_attributes"),i=t("../lib/extend").extendFlat,n=m({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=A.defaultLine,N.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(a({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:A.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:A.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:A.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},u.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:m({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(t,N,V){var m=t("../../lib/sort_object_keys"),u="1.10.1",A='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',A].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),i={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:A,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=m(i);N.exports={requiredVersion:u,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:i,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+u+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":538}],621:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){var e=A.split(" "),a=e[0],i=e[1],n=m.isArrayOrTypedArray(T)?m.mean(T):T,r=.5+n/100,v=1.5+n/100,s=["",""],o=[0,0];switch(a){case"top":s[0]="top",o[1]=-v;break;case"bottom":s[0]="bottom",o[1]=v;break}switch(i){case"left":s[1]="right",o[0]=-r;break;case"right":s[1]="left",o[0]=r;break}var b;return s[0]&&s[1]?b=s.join("-"):s[0]?b=s[0]:s[1]?b=s[1]:b="center",{anchor:b,offset:o}}},{"../../lib":515}],622:[function(t,N,V){var m=t("mapbox-gl/dist/mapbox-gl-unminified"),u=t("../../lib"),A=u.strTranslate,T=u.strScale,e=t("../../plots/get_data").getSubplotCalcData,a=t("../../constants/xmlns_namespaces"),i=t("@plotly/d3"),n=t("../../components/drawing"),r=t("../../lib/svg_text_utils"),v=t("./mapbox"),s="mapbox",o=V.constants=t("./constants");V.name=s,V.attr="subplot",V.idRoot=s,V.idRegex=V.attrRegex=u.counterRegex(s),V.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.plot=function(f){var y=f._fullLayout,l=f.calcdata,x=y._subplots[s];if(m.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var c=b(f,x);m.accessToken=c;for(var M=0;M<x.length;M++){var w=x[M],p=e(l,s,w),_=y[w],h=_._subplot;h||(h=new v(f,w),y[w]._subplot=h),h.viewInitial||(h.viewInitial={center:u.extendFlat({},_.center),zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),h.plot(p,y,f._promises)}},V.clean=function(d,f,y,l){for(var x=l._subplots[s]||[],c=0;c<x.length;c++){var M=x[c];!f[M]&&!!l[M]._subplot&&l[M]._subplot.destroy()}},V.toSVG=function(d){for(var f=d._fullLayout,y=f._subplots[s],l=f._size,x=0;x<y.length;x++){var c=f[y[x]],M=c.domain,w=c._subplot,p=w.toImage("png"),_=f._glimages.append("svg:image");_.attr({xmlns:a.svg,"xlink:href":p,x:l.l+l.w*M.x[0],y:l.t+l.h*(1-M.y[1]),width:l.w*(M.x[1]-M.x[0]),height:l.h*(M.y[1]-M.y[0]),preserveAspectRatio:"none"});var h=i.select(c._subplot.div),L=h.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var E=f._glimages.append("g");E.attr("transform",A(l.l+l.w*M.x[0]+10,l.t+l.h*(1-M.y[0])-31)),E.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),E.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),E.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),E.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var S=h.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=f._glimages.append("g"),F=P.append("text");F.text(S).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":S});var I=n.bBox(F.node()),D=l.w*(M.x[1]-M.x[0]);if(I.width>D/2){var R=S.split("|").join("<br>");F.text(R).attr("data-unformatted",R).call(r.convertToTspans,d),I=n.bBox(F.node())}F.attr("transform",A(-3,-I.height+8)),P.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;I.width+6>D&&(O=D/(I.width+6));var z=[l.l+l.w*M.x[1],l.t+l.h*(1-M.y[0])];P.attr("transform",A(z[0],z[1])+T(O))}};function b(d,f){var y=d._fullLayout,l=d._context;if(l.mapboxAccessToken==="")return"";for(var x=[],c=[],M=!1,w=!1,p=0;p<f.length;p++){var _=y[f[p]],h=_.accesstoken;g(_.style)&&(h?u.pushUnique(x,h):(g(_._input.style)&&(u.error("Uses Mapbox map style, but did not set an access token."),M=!0),w=!0)),h&&u.pushUnique(c,h)}if(w){var L=M?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw u.error(L),new Error(L)}return x.length?(x.length>1&&u.warn(o.multipleTokensErrorMsg),x[0]):(c.length&&u.log(["Listed mapbox access token(s)",c.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function g(d){return typeof d=="string"&&(o.styleValuesMapbox.indexOf(d)!==-1||d.indexOf("mapbox://")===0)}V.updateFx=function(d){for(var f=d._fullLayout,y=f._subplots[s],l=0;l<y.length;l++){var x=f[y[l]]._subplot;x.updateFx(f)}}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(t,N,V){var m=t("../../lib"),u=t("../../lib/svg_text_utils").sanitizeHTML,A=t("./convert_text_opts"),T=t("./constants");function e(v,s){this.subplot=v,this.uid=v.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=e.prototype;a.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=i(s)},a.needsNewImage=function(v){var s=this.subplot.map;return s.getSource(this.idSource)&&this.sourceType==="image"&&v.sourcetype==="image"&&(this.source!==v.source||JSON.stringify(this.coordinates)!==JSON.stringify(v.coordinates))},a.needsNewSource=function(v){return this.sourceType!==v.sourcetype||JSON.stringify(this.source)!==JSON.stringify(v.source)||this.layerType!==v.type},a.needsNewLayer=function(v){return this.layerType!==v.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(v){var s=this.subplot.map;s.getSource(this.idSource).updateImage({url:v.source,coordinates:v.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());o!==null&&this.subplot.map.moveLayer(this.idLayer,o)},a.updateSource=function(v){var s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=v.sourcetype,this.source=v.source,!!i(v)){var o=r(v);s.addSource(this.idSource,o)}},a.findFollowingMapboxLayerId=function(v){if(v==="traces")for(var s=this.subplot.getMapLayers(),o=0;o<s.length;o++){var b=s[o].id;if(typeof b=="string"&&b.indexOf(T.traceLayerPrefix)===0){v=b;break}}return v},a.updateLayer=function(v){var s=this.subplot,o=n(v),b=this.lookupBelow(),g=this.findFollowingMapboxLayerId(b);this.removeLayer(),i(v)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":v.sourcelayer||"",type:v.type,minzoom:v.minzoom,maxzoom:v.maxzoom,layout:o.layout,paint:o.paint},g),this.layerType=v.type,this.below=b},a.updateStyle=function(v){if(i(v)){var s=n(v);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},a.removeLayer=function(){var v=this.subplot.map;v.getLayer(this.idLayer)&&v.removeLayer(this.idLayer)},a.dispose=function(){var v=this.subplot.map;v.getLayer(this.idLayer)&&v.removeLayer(this.idLayer),v.getSource(this.idSource)&&v.removeSource(this.idSource)};function i(v){if(!v.visible)return!1;var s=v.source;if(Array.isArray(s)&&s.length>0){for(var o=0;o<s.length;o++)if(typeof s[o]!="string"||s[o].length===0)return!1;return!0}return m.isPlainObject(s)||typeof s=="string"&&s.length>0}function n(v){var s={},o={};switch(v.type){case"circle":m.extendFlat(o,{"circle-radius":v.circle.radius,"circle-color":v.color,"circle-opacity":v.opacity});break;case"line":m.extendFlat(o,{"line-width":v.line.width,"line-color":v.color,"line-opacity":v.opacity,"line-dasharray":v.line.dash});break;case"fill":m.extendFlat(o,{"fill-color":v.color,"fill-outline-color":v.fill.outlinecolor,"fill-opacity":v.opacity});break;case"symbol":var b=v.symbol,g=A(b.textposition,b.iconsize);m.extendFlat(s,{"icon-image":b.icon+"-15","icon-size":b.iconsize/10,"text-field":b.text,"text-size":b.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":b.placement}),m.extendFlat(o,{"icon-color":v.color,"text-color":b.textfont.color,"text-opacity":v.opacity});break;case"raster":m.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":v.opacity});break}return{layout:s,paint:o}}function r(v){var s=v.sourcetype,o=v.source,b={type:s},g;return s==="geojson"?g="data":s==="vector"?g=typeof o=="string"?"url":"tiles":s==="raster"?(g="tiles",b.tileSize=256):s==="image"&&(g="url",b.coordinates=v.coordinates),b[g]=o,v.sourceattribution&&(b.attribution=u(v.sourceattribution)),b}N.exports=function(s,o,b){var g=new e(s,o);return g.update(b),g}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color").defaultLine,A=t("../domain").attributes,T=t("../font_attributes"),e=t("../../traces/scatter/attributes").textposition,a=t("../../plot_api/edit_types").overrideAll,i=t("../../plot_api/plot_template").templatedArray,n=t("./constants"),r=T({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var v=N.exports=a({_arrayAttrRegexps:[m.counterRegex("mapbox",".layers",!0)],domain:A({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:n.styleValuesMapbox.concat(n.styleValuesNonMapbox),dflt:n.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:i("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:u},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:u}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:m.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");v.uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(t,N,V){var m=t("../../lib"),u=t("../subplot_defaults"),A=t("../array_container_defaults"),T=t("./layout_attributes");N.exports=function(n,r,v){u(n,r,v,{type:"mapbox",attributes:T,handleDefaults:e,partition:"y",accessToken:r._mapboxAccessToken})};function e(i,n,r,v){r("accesstoken",v.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var s=r("bounds.west"),o=r("bounds.east"),b=r("bounds.south"),g=r("bounds.north");(s===void 0||o===void 0||b===void 0||g===void 0)&&delete n.bounds,A(i,n,{name:"layers",handleItemDefaults:a}),n._input=i}function a(i,n){function r(d,f){return m.coerce(i,n,T.layers,d,f)}var v=r("visible");if(v){var s=r("sourcetype"),o=s==="raster"||s==="image";r("source"),r("sourceattribution"),s==="vector"&&r("sourcelayer"),s==="image"&&r("coordinates");var b;o&&(b="raster");var g=r("type",b);o&&g!=="raster"&&(g=n.type="raster",m.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),g==="circle"&&r("circle.radius"),g==="line"&&(r("line.width"),r("line.dash")),g==="fill"&&r("fill.outlinecolor"),g==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),m.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(t,N,V){var m=t("mapbox-gl/dist/mapbox-gl-unminified"),u=t("../../lib"),A=t("../../lib/geo_location_utils"),T=t("../../registry"),e=t("../cartesian/axes"),a=t("../../components/dragelement"),i=t("../../components/fx"),n=t("../../components/dragelement/helpers"),r=n.drawMode,v=n.selectMode,s=t("../../components/selections").prepSelect,o=t("../../components/selections").clearOutline,b=t("../../components/selections").clearSelectionsCache,g=t("../../components/selections").selectOnClick,d=t("./constants"),f=t("./layers");function y(p,_){this.id=_,this.gd=p;var h=p._fullLayout,L=p._context;this.container=h._glcontainer.node(),this.isStatic=L.staticPlot,this.uid=h._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(h),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var l=y.prototype;l.plot=function(p,_,h){var L=this,E=_[L.id];L.map&&E.accesstoken!==L.accessToken&&(L.map.remove(),L.map=null,L.styleObj=null,L.traceHash={},L.layerList=[]);var S;L.map?S=new Promise(function(P,F){L.updateMap(p,_,P,F)}):S=new Promise(function(P,F){L.createMap(p,_,P,F)}),h.push(S)},l.createMap=function(p,_,h,L){var E=this,S=_[E.id],P=E.styleObj=c(S.style);E.accessToken=S.accesstoken;var F=S.bounds,I=F?[[F.west,F.south],[F.east,F.north]]:null,D=E.map=new m.Map({container:E.div,style:P.style,center:w(S.center),zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,maxBounds:I,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new m.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",E.rejectOnError(L),E.isStatic||E.initFx(p,_);var R=[];R.push(new Promise(function(O){D.once("load",O)})),R=R.concat(A.fetchTraceGeoData(p)),Promise.all(R).then(function(){E.fillBelowLookup(p,_),E.updateData(p),E.updateLayout(_),E.resolveOnRender(h)}).catch(L)},l.updateMap=function(p,_,h,L){var E=this,S=E.map,P=_[this.id];E.rejectOnError(L);var F=[],I=c(P.style);JSON.stringify(E.styleObj)!==JSON.stringify(I)&&(E.styleObj=I,S.setStyle(I.style),E.traceHash={},F.push(new Promise(function(D){S.once("styledata",D)}))),F=F.concat(A.fetchTraceGeoData(p)),Promise.all(F).then(function(){E.fillBelowLookup(p,_),E.updateData(p),E.updateLayout(_),E.resolveOnRender(h)}).catch(L)},l.fillBelowLookup=function(p,_){var h=_[this.id],L=h.layers,E,S,P=this.belowLookup={},F=!1;for(E=0;E<p.length;E++){var I=p[E][0].trace,D=I._module;typeof I.below=="string"?S=I.below:D.getBelow&&(S=D.getBelow(I,this)),S===""&&(F=!0),P["trace-"+I.uid]=S||""}for(E=0;E<L.length;E++){var R=L[E];typeof R.below=="string"?S=R.below:F?S="traces":S="",P["layout-"+E]=S}var O={},z,G;for(z in P)S=P[z],O[S]?O[S].push(z):O[S]=[z];for(S in O){var Y=O[S];if(Y.length>1)for(E=0;E<Y.length;E++)z=Y[E],z.indexOf("trace-")===0?(G=z.split("trace-")[1],this.traceHash[G]&&(this.traceHash[G].below=null)):z.indexOf("layout-")===0&&(G=z.split("layout-")[1],this.layerList[G]&&(this.layerList[G].below=null))}};var x={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};l.updateData=function(p){var _=this.traceHash,h,L,E,S,P=p.slice().sort(function(O,z){return x[O[0].trace.type]-x[z[0].trace.type]});for(E=0;E<P.length;E++){var F=P[E];L=F[0].trace,h=_[L.uid];var I=!1;h&&(h.type===L.type?(h.update(F),I=!0):h.dispose()),!I&&L._module&&(_[L.uid]=L._module.plot(this,F))}var D=Object.keys(_);e:for(E=0;E<D.length;E++){var R=D[E];for(S=0;S<p.length;S++)if(L=p[S][0].trace,R===L.uid)continue e;h=_[R],h.dispose(),delete _[R]}},l.updateLayout=function(p){var _=this.map,h=p[this.id];!this.dragging&&!this.wheeling&&(_.setCenter(w(h.center)),_.setZoom(h.zoom),_.setBearing(h.bearing),_.setPitch(h.pitch)),this.updateLayers(p),this.updateFramework(p),this.updateFx(p),this.map.resize(),this.gd._context._scrollZoom.mapbox?_.scrollZoom.enable():_.scrollZoom.disable()},l.resolveOnRender=function(p){var _=this.map;_.on("render",function h(){_.loaded()&&(_.off("render",h),setTimeout(p,10))})},l.rejectOnError=function(p){var _=this.map;function h(){p(new Error(d.mapOnErrorMsg))}_.once("error",h),_.once("style.error",h),_.once("source.error",h),_.once("tile.error",h),_.once("layer.error",h)},l.createFramework=function(p){var _=this,h=_.div=document.createElement("div");h.id=_.uid,h.style.position="absolute",_.container.appendChild(h),_.xaxis={_id:"x",c2p:function(L){return _.project(L).x}},_.yaxis={_id:"y",c2p:function(L){return _.project(L).y}},_.updateFramework(p),_.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(_.mockAxis,p)},l.initFx=function(p,_){var h=this,L=h.gd,E=h.map;E.on("moveend",function(F){if(!!h.map){var I=L._fullLayout;if(F.originalEvent||h.wheeling){var D=I[h.id];T.call("_storeDirectGUIEdit",L.layout,I._preGUI,h.getViewEdits(D));var R=h.getView();D._input.center=D.center=R.center,D._input.zoom=D.zoom=R.zoom,D._input.bearing=D.bearing=R.bearing,D._input.pitch=D.pitch=R.pitch,L.emit("plotly_relayout",h.getViewEditsWithDerived(R))}F.originalEvent&&F.originalEvent.type==="mouseup"?h.dragging=!1:h.wheeling&&(h.wheeling=!1),I._rehover&&I._rehover()}}),E.on("wheel",function(){h.wheeling=!0}),E.on("mousemove",function(F){var I=h.div.getBoundingClientRect(),D=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return I},h.xaxis.p2c=function(){return E.unproject(D).lng},h.yaxis.p2c=function(){return E.unproject(D).lat},L._fullLayout._rehover=function(){L._fullLayout._hoversubplot===h.id&&L._fullLayout[h.id]&&i.hover(L,F,h.id)},i.hover(L,F,h.id),L._fullLayout._hoversubplot=h.id});function S(){i.loneUnhover(_._hoverlayer)}E.on("dragstart",function(){h.dragging=!0,S()}),E.on("zoomstart",S),E.on("mouseout",function(){L._fullLayout._hoversubplot=null});function P(){var F=h.getView();L.emit("plotly_relayouting",h.getViewEditsWithDerived(F))}E.on("drag",P),E.on("zoom",P),E.on("dblclick",function(){var F=L._fullLayout[h.id];T.call("_storeDirectGUIEdit",L.layout,L._fullLayout._preGUI,h.getViewEdits(F));var I=h.viewInitial;E.setCenter(w(I.center)),E.setZoom(I.zoom),E.setBearing(I.bearing),E.setPitch(I.pitch);var D=h.getView();F._input.center=F.center=D.center,F._input.zoom=F.zoom=D.zoom,F._input.bearing=F.bearing=D.bearing,F._input.pitch=F.pitch=D.pitch,L.emit("plotly_doubleclick",null),L.emit("plotly_relayout",h.getViewEditsWithDerived(D))}),h.clearOutline=function(){b(h.dragOptions),o(h.dragOptions.gd)},h.onClickInPanFn=function(F){return function(I){var D=L._fullLayout.clickmode;D.indexOf("select")>-1&&g(I.originalEvent,L,[h.xaxis],[h.yaxis],h.id,F),D.indexOf("event")>-1&&i.click(L,I.originalEvent)}}},l.updateFx=function(p){var _=this,h=_.map,L=_.gd;if(_.isStatic)return;function E(I){var D=_.map.unproject(I);return[D.lng,D.lat]}var S=p.dragmode,P;P=function(I,D){if(D.isRect){var R=I.range={};R[_.id]=[E([D.xmin,D.ymin]),E([D.xmax,D.ymax])]}else{var O=I.lassoPoints={};O[_.id]=D.map(E)}};var F=_.dragOptions;_.dragOptions=u.extendDeep(F||{},{dragmode:p.dragmode,element:_.div,gd:L,plotinfo:{id:_.id,domain:p[_.id].domain,xaxis:_.xaxis,yaxis:_.yaxis,fillRangeItems:P},xaxes:[_.xaxis],yaxes:[_.yaxis],subplot:_.id}),h.off("click",_.onClickInPanHandler),v(S)||r(S)?(h.dragPan.disable(),h.on("zoomstart",_.clearOutline),_.dragOptions.prepFn=function(I,D,R){s(I,D,R,_.dragOptions,S)},a.init(_.dragOptions)):(h.dragPan.enable(),h.off("zoomstart",_.clearOutline),_.div.onmousedown=null,_.div.ontouchstart=null,_.div.removeEventListener("touchstart",_.div._ontouchstart),_.onClickInPanHandler=_.onClickInPanFn(_.dragOptions),h.on("click",_.onClickInPanHandler))},l.updateFramework=function(p){var _=p[this.id].domain,h=p._size,L=this.div.style;L.width=h.w*(_.x[1]-_.x[0])+"px",L.height=h.h*(_.y[1]-_.y[0])+"px",L.left=h.l+_.x[0]*h.w+"px",L.top=h.t+(1-_.y[1])*h.h+"px",this.xaxis._offset=h.l+_.x[0]*h.w,this.xaxis._length=h.w*(_.x[1]-_.x[0]),this.yaxis._offset=h.t+(1-_.y[1])*h.h,this.yaxis._length=h.h*(_.y[1]-_.y[0])},l.updateLayers=function(p){var _=p[this.id],h=_.layers,L=this.layerList,E;if(h.length!==L.length){for(E=0;E<L.length;E++)L[E].dispose();for(L=this.layerList=[],E=0;E<h.length;E++)L.push(f(this,E,h[E]))}else for(E=0;E<h.length;E++)L[E].update(h[E])},l.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},l.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},l.setOptions=function(p,_,h){for(var L in h)this.map[_](p,L,h[L])},l.getMapLayers=function(){return this.map.getStyle().layers},l.addLayer=function(p,_){var h=this.map;if(typeof _=="string"){if(_===""){h.addLayer(p,_);return}for(var L=this.getMapLayers(),E=0;E<L.length;E++)if(_===L[E].id){h.addLayer(p,_);return}u.warn(["Trying to add layer with *below* value",_,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}h.addLayer(p)},l.project=function(p){return this.map.project(new m.LngLat(p[0],p[1]))},l.getView=function(){var p=this.map,_=p.getCenter(),h=_.lng,L=_.lat,E={lon:h,lat:L},S=p.getCanvas(),P=parseInt(S.style.width),F=parseInt(S.style.height);return{center:E,zoom:p.getZoom(),bearing:p.getBearing(),pitch:p.getPitch(),_derived:{coordinates:[p.unproject([0,0]).toArray(),p.unproject([P,0]).toArray(),p.unproject([P,F]).toArray(),p.unproject([0,F]).toArray()]}}},l.getViewEdits=function(p){for(var _=this.id,h=["center","zoom","bearing","pitch"],L={},E=0;E<h.length;E++){var S=h[E];L[_+"."+S]=p[S]}return L},l.getViewEditsWithDerived=function(p){var _=this.id,h=this.getViewEdits(p);return h[_+"._derived"]=p._derived,h};function c(p){var _={};return u.isPlainObject(p)?(_.id=p.id,_.style=p):typeof p=="string"?(_.id=p,d.styleValuesMapbox.indexOf(p)!==-1?_.style=M(p):d.stylesNonMapbox[p]?_.style=d.stylesNonMapbox[p]:_.style=p):(_.id=d.styleValueDflt,_.style=M(d.styleValueDflt)),_.transition={duration:0,delay:0},_}function M(p){return d.styleUrlPrefix+p+"-"+d.styleUrlSuffix}function w(p){return[p.lon,p.lat]}N.exports=y},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(t,N,V){N.exports=function(m){var u=m.editType;return{t:{valType:"number",dflt:0,editType:u},r:{valType:"number",dflt:0,editType:u},b:{valType:"number",dflt:0,editType:u},l:{valType:"number",dflt:0,editType:u},editType:u}}},{}],628:[function(t,N,V){var m=t("@plotly/d3"),u=t("d3-time-format").timeFormatLocale,A=t("d3-format").formatLocale,T=t("fast-isnumeric"),e=t("../registry"),a=t("../plot_api/plot_schema"),i=t("../plot_api/plot_template"),n=t("../lib"),r=t("../components/color"),v=t("../constants/numerical").BADNUM,s=t("./cartesian/axis_ids"),o=t("../components/shapes/handle_outline").clearOutline,b=t("./animation_attributes"),g=t("./frame_attributes"),d=t("../plots/get_data").getModuleCalcData,f=n.relinkPrivateKeys,y=n._,l=N.exports={};n.extendFlat(l,e),l.attributes=t("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=t("./font_attributes"),l.layoutAttributes=t("./layout_attributes"),l.fontWeight="normal";var x=l.transformsRegistry,c=t("./command");l.executeAPICommand=c.executeAPICommand,l.computeAPICommandBindings=c.computeAPICommandBindings,l.manageCommandObserver=c.manageCommandObserver,l.hasSimpleAPICommandBindings=c.hasSimpleAPICommandBindings,l.redrawText=function(K){return K=n.getGraphDiv(K),new Promise(function($){setTimeout(function(){!K._fullLayout||(e.getComponentMethod("annotations","draw")(K),e.getComponentMethod("legend","draw")(K),e.getComponentMethod("colorbar","draw")(K),$(l.previousPromises(K)))},300)})},l.resize=function(K){K=n.getGraphDiv(K);var $,U=new Promise(function(H,q){(!K||n.isHidden(K))&&q(new Error("Resize must be passed a displayed plot div element.")),K._redrawTimer&&clearTimeout(K._redrawTimer),K._resolveResize&&($=K._resolveResize),K._resolveResize=H,K._redrawTimer=setTimeout(function(){if(!K.layout||K.layout.width&&K.layout.height||n.isHidden(K)){H(K);return}delete K.layout.width,delete K.layout.height;var re=K.changed;K.autoplay=!0,e.call("relayout",K,{autosize:!0}).then(function(){K.changed=re,K._resolveResize===H&&(delete K._resolveResize,H(K))})},100)});return $&&$(U),U},l.previousPromises=function(K){if((K._promises||[]).length)return Promise.all(K._promises).then(function(){K._promises=[]})},l.addLinks=function(K){if(!(!K._context.showLink&&!K._context.showSources)){var $=K._fullLayout,U=n.ensureSingle($._paper,"text","js-plot-link-container",function(oe){oe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var se=m.select(this);se.append("tspan").classed("js-link-to-tool",!0),se.append("tspan").classed("js-link-spacer",!0),se.append("tspan").classed("js-sourcelinks",!0)})}),H=U.node(),q={y:$._paper.attr("height")-9};document.body.contains(H)&&H.getComputedTextLength()>=$.width-20?(q["text-anchor"]="start",q.x=5):(q["text-anchor"]="end",q.x=$._paper.attr("width")-7),U.attr(q);var re=U.select(".js-link-to-tool"),Z=U.select(".js-link-spacer"),Q=U.select(".js-sourcelinks");K._context.showSources&&K._context.showSources(K),K._context.showLink&&M(K,re),Z.text(re.text()&&Q.text()?" - ":"")}};function M(K,$){$.text("");var U=$.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(K._context.linkText+" "+String.fromCharCode(187));if(K._context.sendData)U.on("click",function(){l.sendDataToCloud(K)});else{var H=window.location.pathname.split("/"),q=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+H[2].split(".")[0]+"/"+H[1]+q})}}l.sendDataToCloud=function(K){var $=(window.PLOTLYENV||{}).BASE_URL||K._context.plotlyServerURL;if(!!$){K.emit("plotly_beforeexport");var U=m.select(K).append("div").attr("id","hiddenform").style("display","none"),H=U.append("form").attr({action:$+"/external",method:"post",target:"_blank"}),q=H.append("input").attr({type:"text",name:"data"});return q.node().value=l.graphJson(K,!1,"keepdata"),H.node().submit(),U.remove(),K.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],p=["year","month","dayMonth","dayMonthYear"];l.supplyDefaults=function(K,$){var U=$&&$.skipUpdateCalc,H=K._fullLayout||{};if(H._skipDefaults){delete H._skipDefaults;return}var q=K._fullLayout={},re=K.layout||{},Z=K._fullData||[],Q=K._fullData=[],oe=K.data||[],se=K.calcdata||[],ae=K._context||{},le;K._transitionData||l.createTransitionData(K),q._dfltTitle={plot:y(K,"Click to enter Plot title"),x:y(K,"Click to enter X axis title"),y:y(K,"Click to enter Y axis title"),colorbar:y(K,"Click to enter Colorscale title"),annotation:y(K,"new text")},q._traceWord=y(K,"trace");var _e=L(K,w);if(q._mapboxAccessToken=ae.mapboxAccessToken,H._initialAutoSizeIsDone){var fe=H.width,me=H.height;l.supplyLayoutGlobalDefaults(re,q,_e),re.width||(q.width=fe),re.height||(q.height=me),l.sanitizeMargins(q)}else{l.supplyLayoutGlobalDefaults(re,q,_e);var xe=!re.width||!re.height,ye=q.autosize,be=ae.autosizable,ke=xe&&(ye||be);ke?l.plotAutoSize(K,re,q):xe&&l.sanitizeMargins(q),!ye&&xe&&(re.width=q.width,re.height=q.height)}q._d3locale=E(_e,q.separators),q._extraFormat=L(K,p),q._initialAutoSizeIsDone=!0,q._dataLength=oe.length,q._modules=[],q._visibleModules=[],q._basePlotModules=[];var De=q._subplots=h(),He=q._splomAxes={x:{},y:{}},Ae=q._splomSubplots={};q._splomGridDflt={},q._scatterStackOpts={},q._firstScatter={},q._alignmentOpts={},q._colorAxes={},q._requestRangeslider={},q._traceUids=_(Z,oe),q._globalTransforms=(K._context||{}).globalTransforms,l.supplyDataDefaults(oe,Q,re,q);var Le=Object.keys(He.x),Ze=Object.keys(He.y);if(Le.length>1&&Ze.length>1){for(e.getComponentMethod("grid","sizeDefaults")(re,q),le=0;le<Le.length;le++)n.pushUnique(De.xaxis,Le[le]);for(le=0;le<Ze.length;le++)n.pushUnique(De.yaxis,Ze[le]);for(var We in Ae)n.pushUnique(De.cartesian,We)}if(q._has=l._hasPlotType.bind(q),Z.length===Q.length)for(le=0;le<Q.length;le++)f(Q[le],Z[le]);l.supplyLayoutModuleDefaults(re,q,Q,K._transitionData);var ze=q._visibleModules,Ie=[];for(le=0;le<ze.length;le++){var Ve=ze[le].crossTraceDefaults;Ve&&n.pushUnique(Ie,Ve)}for(le=0;le<Ie.length;le++)Ie[le](Q,q);q._hasOnlyLargeSploms=q._basePlotModules.length===1&&q._basePlotModules[0].name==="splom"&&Le.length>15&&Ze.length>15&&q.shapes.length===0&&q.images.length===0,l.linkSubplots(Q,q,Z,H),l.cleanPlot(Q,q,Z,H);var dt=!!(H._has&&H._has("gl2d")),Ft=!!(q._has&&q._has("gl2d")),Qt=!!(H._has&&H._has("cartesian")),Ot=!!(q._has&&q._has("cartesian")),Ct=Qt||dt,jt=Ot||Ft;Ct&&!jt?H._bgLayer.remove():jt&&!Ct&&(q._shouldCreateBgLayer=!0),H._zoomlayer&&!K._dragging&&o({_fullLayout:H}),S(Q,q),f(q,H),e.getComponentMethod("colorscale","crossTraceDefaults")(Q,q),q._preGUI||(q._preGUI={}),q._tracePreGUI||(q._tracePreGUI={});var Nt=q._tracePreGUI,Lt={},Xe;for(Xe in Nt)Lt[Xe]="old";for(le=0;le<Q.length;le++)Xe=Q[le]._fullInput.uid,Lt[Xe]||(Nt[Xe]={}),Lt[Xe]="new";for(Xe in Lt)Lt[Xe]==="old"&&delete Nt[Xe];R(q),e.getComponentMethod("rangeslider","makeData")(q),!U&&se.length===Q.length&&l.supplyDefaultsUpdateCalc(se,Q)},l.supplyDefaultsUpdateCalc=function(K,$){for(var U=0;U<$.length;U++){var H=$[U],q=(K[U]||[])[0];if(q&&q.trace){var re=q.trace;if(re._hasCalcTransform){var Z=re._arrayAttrs,Q,oe,se;for(Q=0;Q<Z.length;Q++)oe=Z[Q],se=n.nestedProperty(re,oe).get().slice(),n.nestedProperty(H,oe).set(se)}q.trace=H}}};function _(K,$){var U=$.length,H=[],q,re;for(q=0;q<K.length;q++){var Z=K[q]._fullInput;Z!==re&&H.push(Z),re=Z}var Q=H.length,oe=new Array(U),se={};function ae(fe,me){oe[me]=fe,se[fe]=1}function le(fe,me){if(fe&&typeof fe=="string"&&!se[fe])return ae(fe,me),!0}for(q=0;q<U;q++){var _e=$[q].uid;typeof _e=="number"&&(_e=String(_e)),!le(_e,q)&&(q<Q&&le(H[q].uid,q)||ae(n.randstr(se),q))}return oe}function h(){var K=e.collectableSubplotTypes,$={},U,H;if(!K){K=[];var q=e.subplotsRegistry;for(var re in q){var Z=q[re],Q=Z.attr;if(Q&&(K.push(re),Array.isArray(Q)))for(H=0;H<Q.length;H++)n.pushUnique(K,Q[H])}}for(U=0;U<K.length;U++)$[K[U]]=[];return $}function L(K,$){var U=K._context.locale;U||(U="en-US");var H=!1,q={};function re(le){for(var _e=!0,fe=0;fe<$.length;fe++){var me=$[fe];q[me]||(le[me]?q[me]=le[me]:_e=!1)}_e&&(H=!0)}for(var Z=0;Z<2;Z++){for(var Q=K._context.locales,oe=0;oe<2;oe++){var se=(Q[U]||{}).format;if(se&&(re(se),H))break;Q=e.localeRegistry}var ae=U.split("-")[0];if(H||ae===U)break;U=ae}return H||re(e.localeRegistry.en.format),q}function E(K,$){return K.decimal=$.charAt(0),K.thousands=$.charAt(1),{numberFormat:function(U){try{U=A(K).format(n.adjustFormat(U))}catch{return n.warnBadFormat(U),n.noFormat}return U},timeFormat:u(K).utcFormat}}function S(K,$){var U,H=[];$.meta&&(U=$._meta={meta:$.meta,layout:{meta:$.meta}});for(var q=0;q<K.length;q++){var re=K[q];re.meta?H[re.index]=re._meta={meta:re.meta}:$.meta&&(re._meta={meta:$.meta}),$.meta&&(re._meta.layout={meta:$.meta})}H.length&&(U||(U=$._meta={}),U.data=H)}l.createTransitionData=function(K){K._transitionData||(K._transitionData={}),K._transitionData._frames||(K._transitionData._frames=[]),K._transitionData._frameHash||(K._transitionData._frameHash={}),K._transitionData._counter||(K._transitionData._counter=0),K._transitionData._interruptCallbacks||(K._transitionData._interruptCallbacks=[])},l._hasPlotType=function(K){var $,U=this._basePlotModules||[];for($=0;$<U.length;$++)if(U[$].name===K)return!0;var H=this._modules||[];for($=0;$<H.length;$++){var q=H[$].name;if(q===K)return!0;var re=e.modules[q];if(re&&re.categories[K])return!0}return!1},l.cleanPlot=function(K,$,U,H){var q,re,Z=H._basePlotModules||[];for(q=0;q<Z.length;q++){var Q=Z[q];Q.clean&&Q.clean(K,$,U,H)}var oe=H._has&&H._has("gl"),se=$._has&&$._has("gl");oe&&!se&&H._glcontainer!==void 0&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.selectAll(".no-webgl").remove(),H._glcanvas=null);var ae=!!H._infolayer;e:for(q=0;q<U.length;q++){var le=U[q],_e=le.uid;for(re=0;re<K.length;re++){var fe=K[re];if(_e===fe.uid)continue e}ae&&H._infolayer.select(".cb"+_e).remove()}},l.linkSubplots=function(K,$,U,H){var q,re,Z=H._plots||{},Q=$._plots={},oe=$._subplots,se={_fullData:K,_fullLayout:$},ae=oe.cartesian.concat(oe.gl2d||[]);for(q=0;q<ae.length;q++){var le=ae[q],_e=Z[le],fe=s.getFromId(se,le,"x"),me=s.getFromId(se,le,"y"),xe;for(_e?xe=Q[le]=_e:(xe=Q[le]={},xe.id=le),fe._counterAxes.push(me._id),me._counterAxes.push(fe._id),fe._subplotsWith.push(le),me._subplotsWith.push(le),xe.xaxis=fe,xe.yaxis=me,xe._hasClipOnAxisFalse=!1,re=0;re<K.length;re++){var ye=K[re];if(ye.xaxis===xe.xaxis._id&&ye.yaxis===xe.yaxis._id&&ye.cliponaxis===!1){xe._hasClipOnAxisFalse=!0;break}}}var be=s.list(se,null,!0),ke;for(q=0;q<be.length;q++){ke=be[q];var De=null;ke.overlaying&&(De=s.getFromId(se,ke.overlaying),De&&De.overlaying&&(ke.overlaying=!1,De=null)),ke._mainAxis=De||ke,De&&(ke.domain=De.domain.slice()),ke._anchorAxis=ke.anchor==="free"?null:s.getFromId(se,ke.anchor)}for(q=0;q<be.length;q++)if(ke=be[q],ke._counterAxes.sort(s.idSort),ke._subplotsWith.sort(n.subplotSort),ke._mainSubplot=P(ke,$),ke._counterAxes.length&&(ke.spikemode&&ke.spikemode.indexOf("across")!==-1||ke.automargin&&ke.mirror&&ke.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(ke))){var He=1,Ae=0;for(re=0;re<ke._counterAxes.length;re++){var Le=s.getFromId(se,ke._counterAxes[re]);He=Math.min(He,Le.domain[0]),Ae=Math.max(Ae,Le.domain[1])}He<Ae&&(ke._counterDomainMin=He,ke._counterDomainMax=Ae)}};function P(K,$){var U={_fullLayout:$},H=K._id.charAt(0)==="x",q=K._mainAxis._anchorAxis,re="",Z="",Q="";if(q&&(Q=q._mainAxis._id,re=H?K._id+Q:Q+K._id),!re||!$._plots[re]){re="";for(var oe=K._counterAxes,se=0;se<oe.length;se++){var ae=oe[se],le=H?K._id+ae:ae+K._id;Z||(Z=le);var _e=s.getFromId(U,ae);if(Q&&_e.overlaying===Q){re=le;break}}}return re||Z}l.clearExpandedTraceDefaultColors=function(K){var $,U,H;function q(Z,Q,oe,se){U[se]=Q,U.length=se+1,Z.valType==="color"&&Z.dflt===void 0&&$.push(U.join("."))}for(U=[],$=K._module._colorAttrs,$||(K._module._colorAttrs=$=[],a.crawl(K._module.attributes,q)),H=0;H<$.length;H++){var re=n.nestedProperty(K,"_input."+$[H]);re.get()||n.nestedProperty(K,$[H]).set(null)}},l.supplyDataDefaults=function(K,$,U,H){var q=H._modules,re=H._visibleModules,Z=H._basePlotModules,Q=0,oe=0,se,ae,le;H._transformModules=[];function _e(Ze){$.push(Ze);var We=Ze._module;!We||(n.pushUnique(q,We),Ze.visible===!0&&n.pushUnique(re,We),n.pushUnique(Z,Ze._module.basePlotModule),Q++,Ze._input.visible!==!1&&oe++)}var fe={},me=[],xe=(U.template||{}).data||{},ye=i.traceTemplater(xe);for(se=0;se<K.length;se++){if(le=K[se],ae=ye.newTrace(le),ae.uid=H._traceUids[se],l.supplyTraceDefaults(le,ae,oe,H,se),ae.index=se,ae._input=le,ae._expandedIndex=Q,ae.transforms&&ae.transforms.length)for(var be=le.visible!==!1&&ae.visible===!1,ke=I(ae,$,U,H),De=0;De<ke.length;De++){var He=ke[De],Ae={_template:ae._template,type:ae.type,uid:ae.uid+De};be&&He.visible===!1&&delete He.visible,l.supplyTraceDefaults(He,Ae,Q,H,se),f(Ae,He),Ae.index=se,Ae._input=le,Ae._fullInput=ae,Ae._expandedIndex=Q,Ae._expandedInput=He,_e(Ae)}else ae._fullInput=ae,ae._expandedInput=ae,_e(ae);e.traceIs(ae,"carpetAxis")&&(fe[ae.carpet]=ae),e.traceIs(ae,"carpetDependent")&&me.push(se)}for(se=0;se<me.length;se++)if(ae=$[me[se]],!!ae.visible){var Le=fe[ae.carpet];if(ae._carpet=Le,!Le||!Le.visible){ae.visible=!1;continue}ae.xaxis=Le.xaxis,ae.yaxis=Le.yaxis}},l.supplyAnimationDefaults=function(K){K=K||{};var $,U={};function H(q,re){return n.coerce(K||{},U,b,q,re)}if(H("mode"),H("direction"),H("fromcurrent"),Array.isArray(K.frame))for(U.frame=[],$=0;$<K.frame.length;$++)U.frame[$]=l.supplyAnimationFrameDefaults(K.frame[$]||{});else U.frame=l.supplyAnimationFrameDefaults(K.frame||{});if(Array.isArray(K.transition))for(U.transition=[],$=0;$<K.transition.length;$++)U.transition[$]=l.supplyAnimationTransitionDefaults(K.transition[$]||{});else U.transition=l.supplyAnimationTransitionDefaults(K.transition||{});return U},l.supplyAnimationFrameDefaults=function(K){var $={};function U(H,q){return n.coerce(K||{},$,b.frame,H,q)}return U("duration"),U("redraw"),$},l.supplyAnimationTransitionDefaults=function(K){var $={};function U(H,q){return n.coerce(K||{},$,b.transition,H,q)}return U("duration"),U("easing"),$},l.supplyFrameDefaults=function(K){var $={};function U(H,q){return n.coerce(K,$,g,H,q)}return U("group"),U("name"),U("traces"),U("baseframe"),U("data"),U("layout"),$},l.supplyTraceDefaults=function(K,$,U,H,q){var re=H.colorway||r.defaults,Z=re[U%re.length],Q;function oe(ke,De){return n.coerce(K,$,l.attributes,ke,De)}var se=oe("visible");oe("type"),oe("name",H._traceWord+" "+q),oe("uirevision",H.uirevision);var ae=l.getModule($);if($._module=ae,ae){var le=ae.basePlotModule,_e=le.attr,fe=le.attributes;if(_e&&fe){var me=H._subplots,xe="";if(se||le.name!=="gl2d"){if(Array.isArray(_e))for(Q=0;Q<_e.length;Q++){var ye=_e[Q],be=n.coerce(K,$,fe,ye);me[ye]&&n.pushUnique(me[ye],be),xe+=be}else xe=n.coerce(K,$,fe,_e);me[le.name]&&n.pushUnique(me[le.name],xe)}}}return se&&(oe("customdata"),oe("ids"),oe("meta"),e.traceIs($,"showLegend")?(n.coerce(K,$,ae.attributes.showlegend?ae.attributes:l.attributes,"showlegend"),oe("legendwidth"),oe("legendgroup"),oe("legendgrouptitle.text"),oe("legendrank"),$._dfltShowLegend=!0):$._dfltShowLegend=!1,ae&&ae.supplyDefaults(K,$,Z,H),e.traceIs($,"noOpacity")||oe("opacity"),e.traceIs($,"notLegendIsolatable")&&($.visible=!!$.visible),e.traceIs($,"noHover")||($.hovertemplate||n.coerceHoverinfo(K,$,H),$.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(K,$,Z,H)),ae&&ae.selectPoints&&oe("selectedpoints"),l.supplyTransformDefaults(K,$,H)),$};function F(K){var $=K.transforms;if(Array.isArray($)&&$.length)for(var U=0;U<$.length;U++){var H=$[U],q=H._module||x[H.type];if(q&&q.makesData)return!0}return!1}l.hasMakesDataTransform=F,l.supplyTransformDefaults=function(K,$,U){if(!!($._length||F(K))){var H=U._globalTransforms||[],q=U._transformModules||[];if(!(!Array.isArray(K.transforms)&&H.length===0))for(var re=K.transforms||[],Z=H.concat(re),Q=$.transforms=[],oe=0;oe<Z.length;oe++){var se=Z[oe],ae=se.type,le=x[ae],_e,fe=!(se._module&&se._module===le),me=le&&typeof le.transform=="function";le||n.warn("Unrecognized transform type "+ae+"."),le&&le.supplyDefaults&&(fe||me)?(_e=le.supplyDefaults(se,$,U,K),_e.type=ae,_e._module=le,n.pushUnique(q,le)):_e=n.extendFlat({},se),Q.push(_e)}}};function I(K,$,U,H){for(var q=K.transforms,re=[K],Z=0;Z<q.length;Z++){var Q=q[Z],oe=x[Q.type];oe&&oe.transform&&(re=oe.transform(re,{transform:Q,fullTrace:K,fullData:$,layout:U,fullLayout:H,transformIndex:Z}))}return re}l.supplyLayoutGlobalDefaults=function(K,$,U){function H(se,ae){return n.coerce(K,$,l.layoutAttributes,se,ae)}var q=K.template;n.isPlainObject(q)&&($.template=q,$._template=q.layout,$._dataTemplate=q.data),H("autotypenumbers");var re=n.coerceFont(H,"font"),Z=re.size;n.coerceFont(H,"title.font",n.extendFlat({},re,{size:Math.round(Z*1.4)})),H("title.text",$._dfltTitle.plot),H("title.xref"),H("title.yref"),H("title.x"),H("title.y"),H("title.xanchor"),H("title.yanchor"),H("title.pad.t"),H("title.pad.r"),H("title.pad.b"),H("title.pad.l");var Q=H("uniformtext.mode");Q&&H("uniformtext.minsize"),H("autosize",!(K.width&&K.height)),H("width"),H("height"),H("minreducedwidth"),H("minreducedheight"),H("margin.l"),H("margin.r"),H("margin.t"),H("margin.b"),H("margin.pad"),H("margin.autoexpand"),K.width&&K.height&&l.sanitizeMargins($),e.getComponentMethod("grid","sizeDefaults")(K,$),H("paper_bgcolor"),H("separators",U.decimal+U.thousands),H("hidesources"),H("colorway"),H("datarevision");var oe=H("uirevision");H("editrevision",oe),H("selectionrevision",oe),e.getComponentMethod("modebar","supplyLayoutDefaults")(K,$),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(K,$,H),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(K,$,H),H("meta"),n.isPlainObject(K.transition)&&(H("transition.duration"),H("transition.easing"),H("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(K,$,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(K,$,H)};function D(K){return typeof K=="string"&&K.substr(K.length-2)==="px"&&parseFloat(K)}l.plotAutoSize=function($,U,H){var q=$._context||{},re=q.frameMargins,Z,Q,oe=n.isPlotDiv($);if(oe&&$.emit("plotly_autosize"),q.fillFrame)Z=window.innerWidth,Q=window.innerHeight,document.body.style.overflow="hidden";else{var se=oe?window.getComputedStyle($):{};if(Z=D(se.width)||D(se.maxWidth)||H.width,Q=D(se.height)||D(se.maxHeight)||H.height,T(re)&&re>0){var ae=1-2*re;Z=Math.round(ae*Z),Q=Math.round(ae*Q)}}var le=l.layoutAttributes.width.min,_e=l.layoutAttributes.height.min;Z<le&&(Z=le),Q<_e&&(Q=_e);var fe=!U.width&&Math.abs(H.width-Z)>1,me=!U.height&&Math.abs(H.height-Q)>1;(me||fe)&&(fe&&(H.width=Z),me&&(H.height=Q)),$._initialAutoSize||($._initialAutoSize={width:Z,height:Q}),l.sanitizeMargins(H)},l.supplyLayoutModuleDefaults=function(K,$,U,H){var q=e.componentsRegistry,re=$._basePlotModules,Z,Q,oe,se=e.subplotsRegistry.cartesian;for(Z in q)oe=q[Z],oe.includeBasePlot&&oe.includeBasePlot(K,$);re.length||re.push(se),$._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(K,$),se.finalizeSubplots(K,$));for(var ae in $._subplots)$._subplots[ae].sort(n.subplotSort);for(Q=0;Q<re.length;Q++)oe=re[Q],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(K,$,U);var le=$._modules;for(Q=0;Q<le.length;Q++)oe=le[Q],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(K,$,U);var _e=$._transformModules;for(Q=0;Q<_e.length;Q++)oe=_e[Q],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(K,$,U,H);for(Z in q)oe=q[Z],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(K,$,U)},l.purge=function(K){var $=K._fullLayout||{};$._glcontainer!==void 0&&($._glcontainer.selectAll(".gl-canvas").remove(),$._glcontainer.remove(),$._glcanvas=null),$._modeBar&&$._modeBar.destroy(),K._transitionData&&(K._transitionData._interruptCallbacks&&(K._transitionData._interruptCallbacks.length=0),K._transitionData._animationRaf&&window.cancelAnimationFrame(K._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive(K),delete K.data,delete K.layout,delete K._fullData,delete K._fullLayout,delete K.calcdata,delete K.empty,delete K.fid,delete K.undoqueue,delete K.undonum,delete K.autoplay,delete K.changed,delete K._promises,delete K._redrawTimer,delete K._hmlumcount,delete K._hmpixcount,delete K._transitionData,delete K._transitioning,delete K._initialAutoSize,delete K._transitioningWithDuration,delete K._dragging,delete K._dragged,delete K._dragdata,delete K._hoverdata,delete K._snapshotInProgress,delete K._editing,delete K._mouseDownTime,delete K._legendMouseDownTime,K.removeAllListeners&&K.removeAllListeners()},l.style=function(K){var $=K._fullLayout._visibleModules,U=[],H;for(H=0;H<$.length;H++){var q=$[H];q.style&&n.pushUnique(U,q.style)}for(H=0;H<U.length;H++)U[H](K)},l.sanitizeMargins=function(K){if(!(!K||!K.margin)){var $=K.width,U=K.height,H=K.margin,q=$-(H.l+H.r),re=U-(H.t+H.b),Z;q<0&&(Z=($-1)/(H.l+H.r),H.l=Math.floor(Z*H.l),H.r=Math.floor(Z*H.r)),re<0&&(Z=(U-1)/(H.t+H.b),H.t=Math.floor(Z*H.t),H.b=Math.floor(Z*H.b))}},l.clearAutoMarginIds=function(K){K._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(K,$){K._fullLayout._pushmarginIds[$]=1};function R(K){var $=K.margin;if(!K._size){var U=K._size={l:Math.round($.l),r:Math.round($.r),t:Math.round($.t),b:Math.round($.b),p:Math.round($.pad)};U.w=Math.round(K.width)-U.l-U.r,U.h=Math.round(K.height)-U.t-U.b}K._pushmargin||(K._pushmargin={}),K._pushmarginIds||(K._pushmarginIds={})}var O=2,z=2;l.autoMargin=function(K,$,U){var H=K._fullLayout,q=H.width,re=H.height,Z=H.margin,Q=H.minreducedwidth,oe=H.minreducedheight,se=n.constrain(q-Z.l-Z.r,O,Q),ae=n.constrain(re-Z.t-Z.b,z,oe),le=Math.max(0,q-se),_e=Math.max(0,re-ae),fe=H._pushmargin,me=H._pushmarginIds;if(Z.autoexpand!==!1){if(!U)delete fe[$],delete me[$];else{var xe=U.pad;if(xe===void 0&&(xe=Math.min(12,Z.l,Z.r,Z.t,Z.b)),le){var ye=(U.l+U.r)/le;ye>1&&(U.l/=ye,U.r/=ye)}if(_e){var be=(U.t+U.b)/_e;be>1&&(U.t/=be,U.b/=be)}var ke=U.xl!==void 0?U.xl:U.x,De=U.xr!==void 0?U.xr:U.x,He=U.yt!==void 0?U.yt:U.y,Ae=U.yb!==void 0?U.yb:U.y;fe[$]={l:{val:ke,size:U.l+xe},r:{val:De,size:U.r+xe},b:{val:Ae,size:U.b+xe},t:{val:He,size:U.t+xe}},me[$]=1}if(!H._replotting)return l.doAutoMargin(K)}},l.doAutoMargin=function(K){var $=K._fullLayout,U=$.width,H=$.height;$._size||($._size={}),R($);var q=$._size,re=$.margin,Z=n.extendFlat({},q),Q=re.l,oe=re.r,se=re.t,ae=re.b,le=$._pushmargin,_e=$._pushmarginIds,fe=$.minreducedwidth,me=$.minreducedheight;if($.margin.autoexpand!==!1){for(var xe in le)_e[xe]||delete le[xe];le.base={l:{val:0,size:Q},r:{val:1,size:oe},t:{val:1,size:se},b:{val:0,size:ae}};for(var ye in le){var be=le[ye].l||{},ke=le[ye].b||{},De=be.val,He=be.size,Ae=ke.val,Le=ke.size;for(var Ze in le){if(T(He)&&le[Ze].r){var We=le[Ze].r.val,ze=le[Ze].r.size;if(We>De){var Ie=(He*We+(ze-U)*De)/(We-De),Ve=(ze*(1-De)+(He-U)*(1-We))/(We-De);Ie+Ve>Q+oe&&(Q=Ie,oe=Ve)}}if(T(Le)&&le[Ze].t){var dt=le[Ze].t.val,Ft=le[Ze].t.size;if(dt>Ae){var Qt=(Le*dt+(Ft-H)*Ae)/(dt-Ae),Ot=(Ft*(1-Ae)+(Le-H)*(1-dt))/(dt-Ae);Qt+Ot>ae+se&&(ae=Qt,se=Ot)}}}}}var Ct=n.constrain(U-re.l-re.r,O,fe),jt=n.constrain(H-re.t-re.b,z,me),Nt=Math.max(0,U-Ct),Lt=Math.max(0,H-jt);if(Nt){var Xe=(Q+oe)/Nt;Xe>1&&(Q/=Xe,oe/=Xe)}if(Lt){var it=(ae+se)/Lt;it>1&&(ae/=it,se/=it)}if(q.l=Math.round(Q),q.r=Math.round(oe),q.t=Math.round(se),q.b=Math.round(ae),q.p=Math.round(re.pad),q.w=Math.round(U)-q.l-q.r,q.h=Math.round(H)-q.t-q.b,!$._replotting&&l.didMarginChange(Z,q)){"_redrawFromAutoMarginCount"in $?$._redrawFromAutoMarginCount++:$._redrawFromAutoMarginCount=1;var Ye=3*(1+Object.keys(_e).length);if($._redrawFromAutoMarginCount<Ye)return e.call("_doPlot",K);$._size=Z,n.warn("Too many auto-margin redraws.")}G(K)};function G(K){var $=s.list(K,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(U){for(var H=0;H<$.length;H++){var q=$[H][U];q&&q()}})}var Y=["l","r","t","b","p","w","h"];l.didMarginChange=function(K,$){for(var U=0;U<Y.length;U++){var H=Y[U],q=K[H],re=$[H];if(!T(q)||Math.abs(re-q)>1)return!0}return!1},l.graphJson=function(K,$,U,H,q,re){(q&&$&&!K._fullData||q&&!$&&!K._fullLayout)&&l.supplyDefaults(K);var Z=q?K._fullData:K.data,Q=q?K._fullLayout:K.layout,oe=(K._transitionData||{})._frames;function se(_e,fe){if(typeof _e=="function")return fe?"_function_":null;if(n.isPlainObject(_e)){var me={},xe;return Object.keys(_e).sort().forEach(function(ye){if(["_","["].indexOf(ye.charAt(0))===-1){if(typeof _e[ye]=="function"){fe&&(me[ye]="_function");return}if(U==="keepdata"){if(ye.substr(ye.length-3)==="src")return}else if(U==="keepstream"){if(xe=_e[ye+"src"],typeof xe=="string"&&xe.indexOf(":")>0&&!n.isPlainObject(_e.stream))return}else if(U!=="keepall"&&(xe=_e[ye+"src"],typeof xe=="string"&&xe.indexOf(":")>0))return;me[ye]=se(_e[ye],fe)}}),me}return Array.isArray(_e)?_e.map(function(ye){return se(ye,fe)}):n.isTypedArray(_e)?n.simpleMap(_e,n.identity):n.isJSDate(_e)?n.ms2DateTimeLocal(+_e):_e}var ae={data:(Z||[]).map(function(_e){var fe=se(_e);return $&&delete fe.fit,fe})};if(!$&&(ae.layout=se(Q),q)){var le=Q._size;ae.layout.computed={margin:{b:le.b,l:le.l,r:le.r,t:le.t}}}return oe&&(ae.frames=se(oe)),re&&(ae.config=se(K._context,!0)),H==="object"?ae:JSON.stringify(ae)},l.modifyFrames=function(K,$){var U,H,q,re=K._transitionData._frames,Z=K._transitionData._frameHash;for(U=0;U<$.length;U++)switch(H=$[U],H.type){case"replace":q=H.value;var Q=(re[H.index]||{}).name,oe=q.name;re[H.index]=Z[oe]=q,oe!==Q&&(delete Z[Q],Z[oe]=q);break;case"insert":q=H.value,Z[q.name]=q,re.splice(H.index,0,q);break;case"delete":q=re[H.index],delete Z[q.name],re.splice(H.index,1);break}return Promise.resolve()},l.computeFrame=function(K,$){var U=K._transitionData._frameHash,H,q,re,Z;if(!$)throw new Error("computeFrame must be given a string frame name");var Q=U[$.toString()];if(!Q)return!1;for(var oe=[Q],se=[Q.name];Q.baseframe&&(Q=U[Q.baseframe.toString()])&&se.indexOf(Q.name)===-1;)oe.push(Q),se.push(Q.name);for(var ae={};Q=oe.pop();)if(Q.layout&&(ae.layout=l.extendLayout(ae.layout,Q.layout)),Q.data){if(ae.data||(ae.data=[]),q=Q.traces,!q)for(q=[],H=0;H<Q.data.length;H++)q[H]=H;for(ae.traces||(ae.traces=[]),H=0;H<Q.data.length;H++)re=q[H],re!=null&&(Z=ae.traces.indexOf(re),Z===-1&&(Z=ae.data.length,ae.traces[Z]=re),ae.data[Z]=l.extendTrace(ae.data[Z],Q.data[H]))}return ae},l.recomputeFrameHash=function(K){for(var $=K._transitionData._frameHash={},U=K._transitionData._frames,H=0;H<U.length;H++){var q=U[H];q&&q.name&&($[q.name]=q)}},l.extendObjectWithContainers=function(K,$,U){var H,q,re,Z,Q,oe,se,ae,le=n.extendDeepNoArrays({},$||{}),_e=n.expandObjectPaths(le),fe={};if(U&&U.length)for(re=0;re<U.length;re++)H=n.nestedProperty(_e,U[re]),q=H.get(),q===void 0?n.nestedProperty(fe,U[re]).set(null):(H.set(null),n.nestedProperty(fe,U[re]).set(q));if(K=n.extendDeepNoArrays(K||{},_e),U&&U.length){for(re=0;re<U.length;re++)if(Q=n.nestedProperty(fe,U[re]),se=Q.get(),!!se){for(oe=n.nestedProperty(K,U[re]),ae=oe.get(),Array.isArray(ae)||(ae=[],oe.set(ae)),Z=0;Z<se.length;Z++){var me=se[Z];me===null?ae[Z]=null:ae[Z]=l.extendObjectWithContainers(ae[Z],me)}oe.set(ae)}}return K},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(K,$){return l.extendObjectWithContainers(K,$,l.dataArrayContainers)},l.extendLayout=function(K,$){return l.extendObjectWithContainers(K,$,l.layoutArrayContainers)},l.transition=function(K,$,U,H,q,re){var Z={redraw:q.redraw},Q={},oe=[];return Z.prepareFn=function(){for(var se=Array.isArray($)?$.length:0,ae=H.slice(0,se),le=0;le<ae.length;le++){var _e=ae[le],fe=K._fullData[_e],me=fe._module;if(!!me){if(me.animatable){var xe=me.basePlotModule.name;Q[xe]||(Q[xe]=[]),Q[xe].push(_e)}K.data[ae[le]]=l.extendTrace(K.data[ae[le]],$[le])}}var ye=n.expandObjectPaths(n.extendDeepNoArrays({},U)),be=/^[xy]axis[0-9]*$/;for(var ke in ye)!be.test(ke)||delete ye[ke].range;l.extendLayout(K.layout,ye),delete K.calcdata,l.supplyDefaults(K),l.doCalcdata(K);var De=n.expandObjectPaths(U);if(De){var He=K._fullLayout._plots;for(var Ae in He){var Le=He[Ae],Ze=Le.xaxis,We=Le.yaxis,ze=Ze.range.slice(),Ie=We.range.slice(),Ve=null,dt=null,Ft=null,Qt=null;Array.isArray(De[Ze._name+".range"])?Ve=De[Ze._name+".range"].slice():Array.isArray((De[Ze._name]||{}).range)&&(Ve=De[Ze._name].range.slice()),Array.isArray(De[We._name+".range"])?dt=De[We._name+".range"].slice():Array.isArray((De[We._name]||{}).range)&&(dt=De[We._name].range.slice()),ze&&Ve&&(Ze.r2l(ze[0])!==Ze.r2l(Ve[0])||Ze.r2l(ze[1])!==Ze.r2l(Ve[1]))&&(Ft={xr0:ze,xr1:Ve}),Ie&&dt&&(We.r2l(Ie[0])!==We.r2l(dt[0])||We.r2l(Ie[1])!==We.r2l(dt[1]))&&(Qt={yr0:Ie,yr1:dt}),(Ft||Qt)&&oe.push(n.extendFlat({plotinfo:Le},Ft,Qt))}}return Promise.resolve()},Z.runFn=function(se){var ae,le=K._fullLayout._basePlotModules,_e=oe.length,fe;if(U)for(fe=0;fe<le.length;fe++)le[fe].transitionAxes&&le[fe].transitionAxes(K,oe,re,se);_e?(ae=n.extendFlat({},re),ae.duration=0,delete Q.cartesian):ae=re;for(var me in Q){var xe=Q[me],ye=K._fullData[xe[0]]._module;ye.basePlotModule.plot(K,xe,ae,se)}},ee(K,re,Z)},l.transitionFromReact=function(K,$,U,H){var q=K._fullLayout,re=q.transition,Z={},Q=[];return Z.prepareFn=function(){var oe=q._plots;Z.redraw=!1,$.anim==="some"&&(Z.redraw=!0),U.anim==="some"&&(Z.redraw=!0);for(var se in oe){var ae=oe[se],le=ae.xaxis,_e=ae.yaxis,fe=H[le._name].range.slice(),me=H[_e._name].range.slice(),xe=le.range.slice(),ye=_e.range.slice();le.setScale(),_e.setScale();var be=null,ke=null;(le.r2l(fe[0])!==le.r2l(xe[0])||le.r2l(fe[1])!==le.r2l(xe[1]))&&(be={xr0:fe,xr1:xe}),(_e.r2l(me[0])!==_e.r2l(ye[0])||_e.r2l(me[1])!==_e.r2l(ye[1]))&&(ke={yr0:me,yr1:ye}),(be||ke)&&Q.push(n.extendFlat({plotinfo:ae},be,ke))}return Promise.resolve()},Z.runFn=function(oe){for(var se=K._fullData,ae=K._fullLayout,le=ae._basePlotModules,_e,fe,me,xe=[],ye=0;ye<se.length;ye++)xe.push(ye);function be(){if(!!K._fullLayout)for(var De=0;De<le.length;De++)le[De].transitionAxes&&le[De].transitionAxes(K,Q,_e,oe)}function ke(){if(!!K._fullLayout)for(var De=0;De<le.length;De++)le[De].plot(K,me,fe,oe)}Q.length&&$.anim?re.ordering==="traces first"?(_e=n.extendFlat({},re,{duration:0}),me=xe,fe=re,setTimeout(be,re.duration),ke()):(_e=re,me=null,fe=n.extendFlat({},re,{duration:0}),setTimeout(ke,_e.duration),be()):Q.length?(_e=re,be()):$.anim&&(me=xe,fe=re,ke())},ee(K,re,Z)};function ee(K,$,U){var H=!1;function q(le){var _e=Promise.resolve();if(!le)return _e;for(;le.length;)_e=_e.then(le.shift());return _e}function re(le){if(!!le)for(;le.length;)le.shift()}function Z(){return K.emit("plotly_transitioning",[]),new Promise(function(le){K._transitioning=!0,$.duration>0&&(K._transitioningWithDuration=!0),K._transitionData._interruptCallbacks.push(function(){H=!0}),U.redraw&&K._transitionData._interruptCallbacks.push(function(){return e.call("redraw",K)}),K._transitionData._interruptCallbacks.push(function(){K.emit("plotly_transitioninterrupted",[])});var _e=0,fe=0;function me(){return _e++,function(){fe++,!H&&fe===_e&&Q(le)}}U.runFn(me),setTimeout(me())})}function Q(le){if(!!K._transitionData)return re(K._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(U.redraw)return e.call("redraw",K)}).then(function(){K._transitioning=!1,K._transitioningWithDuration=!1,K.emit("plotly_transitioned",[])}).then(le)}function oe(){if(!!K._transitionData)return K._transitioning=!1,q(K._transitionData._interruptCallbacks)}var se=[l.previousPromises,oe,U.prepareFn,l.rehover,l.reselect,Z],ae=n.syncOrAsync(se,K);return(!ae||!ae.then)&&(ae=Promise.resolve()),ae.then(function(){return K})}l.doCalcdata=function(K,$){var U=s.list(K),H=K._fullData,q=K._fullLayout,re,Z,Q,oe,se=new Array(H.length),ae=(K.calcdata||[]).slice();for(K.calcdata=se,q._numBoxes=0,q._numViolins=0,q._violinScaleGroupStats={},K._hmpixcount=0,K._hmlumcount=0,q._piecolormap={},q._sunburstcolormap={},q._treemapcolormap={},q._iciclecolormap={},q._funnelareacolormap={},Q=0;Q<H.length;Q++)if(Array.isArray($)&&$.indexOf(Q)===-1){se[Q]=ae[Q];continue}for(Q=0;Q<H.length;Q++)re=H[Q],re._arrayAttrs=a.findArrayAttributes(re),re._extremes={};var le=q._subplots.polar||[];for(Q=0;Q<le.length;Q++)U.push(q[le[Q]].radialaxis,q[le[Q]].angularaxis);for(var _e in q._colorAxes){var fe=q[_e];fe.cauto!==!1&&(delete fe.cmin,delete fe.cmax)}var me=!1;function xe(ke){if(re=H[ke],Z=re._module,re.visible===!0&&re.transforms){if(Z&&Z.calc){var De=Z.calc(K,re);De[0]&&De[0].t&&De[0].t._scene&&delete De[0].t._scene.dirty}for(oe=0;oe<re.transforms.length;oe++){var He=re.transforms[oe];Z=x[He.type],Z&&Z.calcTransform&&(re._hasCalcTransform=!0,me=!0,Z.calcTransform(K,re,He))}}}function ye(ke,De){if(re=H[ke],Z=re._module,!!Z.isContainer===De){var He=[];if(re.visible===!0&&re._length!==0){delete re._indexToPoints;var Ae=re.transforms||[];for(oe=Ae.length-1;oe>=0;oe--)if(Ae[oe].enabled){re._indexToPoints=Ae[oe]._indexToPoints;break}Z&&Z.calc&&(He=Z.calc(K,re))}(!Array.isArray(He)||!He[0])&&(He=[{x:v,y:v}]),He[0].t||(He[0].t={}),He[0].trace=re,se[ke]=He}}for(ie(U,H,q),Q=0;Q<H.length;Q++)ye(Q,!0);for(Q=0;Q<H.length;Q++)xe(Q);for(me&&ie(U,H,q),Q=0;Q<H.length;Q++)ye(Q,!0);for(Q=0;Q<H.length;Q++)ye(Q,!1);he(K);var be=X(U,K);if(be.length){for(q._numBoxes=0,q._numViolins=0,Q=0;Q<be.length;Q++)ye(be[Q],!0);for(Q=0;Q<be.length;Q++)ye(be[Q],!1);he(K)}e.getComponentMethod("fx","calc")(K),e.getComponentMethod("errorbars","calc")(K)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function X(K,$){var U=[],H,q,re,Z,Q;function oe(Ct,jt,Nt){var Lt=jt._id.charAt(0);if(Ct==="histogram2dcontour"){var Xe=jt._counterAxes[0],it=s.getFromId($,Xe),Ye=Lt==="x"||Xe==="x"&&it.type==="category",Ee=Lt==="y"||Xe==="y"&&it.type==="category";return function(Ge,Ke){return Ge===0||Ke===0||Ye&&Ge===Nt[Ke].length-1||Ee&&Ke===Nt.length-1?-1:(Lt==="y"?Ke:Ge)-1}}else return function(Ge,Ke){return Lt==="y"?Ke:Ge}}var se={min:function(Ct){return n.aggNums(Math.min,null,Ct)},max:function(Ct){return n.aggNums(Math.max,null,Ct)},sum:function(Ct){return n.aggNums(function(jt,Nt){return jt+Nt},null,Ct)},total:function(Ct){return n.aggNums(function(jt,Nt){return jt+Nt},null,Ct)},mean:function(Ct){return n.mean(Ct)},median:function(Ct){return n.median(Ct)}};for(H=0;H<K.length;H++){var ae=K[H];if(ae.type==="category"){var le=ae.categoryorder.match(j);if(le){var _e=le[1],fe=le[2],me=ae._id.charAt(0),xe=me==="x",ye=[];for(q=0;q<ae._categories.length;q++)ye.push([ae._categories[q],[]]);for(q=0;q<ae._traceIndices.length;q++){var be=ae._traceIndices[q],ke=$._fullData[be];if(ke.visible===!0){var De=ke.type;e.traceIs(ke,"histogram")&&(delete ke._xautoBinFinished,delete ke._yautoBinFinished);var He=De==="splom",Ae=De==="scattergl",Le=$.calcdata[be];for(re=0;re<Le.length;re++){var Ze=Le[re],We,ze;if(He){var Ie=ke._axesDim[ae._id];if(!xe){var Ve=ke._diag[Ie][0];Ve&&(ae=$._fullLayout[s.id2name(Ve)])}var dt=Ze.trace.dimensions[Ie].values;for(Z=0;Z<dt.length;Z++)for(We=ae._categoriesMap[dt[Z]],Q=0;Q<Ze.trace.dimensions.length;Q++)if(Q!==Ie){var Ft=Ze.trace.dimensions[Q];ye[We][1].push(Ft.values[Z])}}else if(Ae){for(Z=0;Z<Ze.t.x.length;Z++)xe?(We=Ze.t.x[Z],ze=Ze.t.y[Z]):(We=Ze.t.y[Z],ze=Ze.t.x[Z]),ye[We][1].push(ze);Ze.t&&Ze.t._scene&&delete Ze.t._scene.dirty}else if(Ze.hasOwnProperty("z")){ze=Ze.z;var Qt=oe(ke.type,ae,ze);for(Z=0;Z<ze.length;Z++)for(Q=0;Q<ze[Z].length;Q++)We=Qt(Q,Z),We+1&&ye[We][1].push(ze[Z][Q])}else for(We=Ze.p,We===void 0&&(We=Ze[me]),ze=Ze.s,ze===void 0&&(ze=Ze.v),ze===void 0&&(ze=xe?Ze.y:Ze.x),Array.isArray(ze)||(ze===void 0?ze=[]:ze=[ze]),Z=0;Z<ze.length;Z++)ye[We][1].push(ze[Z])}}}ae._categoriesValue=ye;var Ot=[];for(q=0;q<ye.length;q++)Ot.push([ye[q][0],se[_e](ye[q][1])]);Ot.sort(function(Ct,jt){return Ct[1]-jt[1]}),ae._categoriesAggregatedValue=Ot,ae._initialCategories=Ot.map(function(Ct){return Ct[0]}),fe==="descending"&&ae._initialCategories.reverse(),U=U.concat(ae.sortByInitialCategories())}}}return U}function ie(K,$,U){var H={};function q(oe){oe.clearCalc(),oe.type==="multicategory"&&oe.setupMultiCategory($),H[oe._id]=1}n.simpleMap(K,q);for(var re=U._axisMatchGroups||[],Z=0;Z<re.length;Z++)for(var Q in re[Z])H[Q]||q(U[s.id2name(Q)])}function he(K){var $=K._fullLayout,U=$._visibleModules,H={},q,re,Z;for(re=0;re<U.length;re++){var Q=U[re],oe=Q.crossTraceCalc;if(oe){var se=Q.basePlotModule.name;H[se]?n.pushUnique(H[se],oe):H[se]=[oe]}}for(Z in H){var ae=H[Z],le=$._subplots[Z];if(Array.isArray(le))for(q=0;q<le.length;q++){var _e=le[q],fe=Z==="cartesian"?$._plots[_e]:$[_e];for(re=0;re<ae.length;re++)ae[re](K,fe,_e)}else for(re=0;re<ae.length;re++)ae[re](K)}}l.rehover=function(K){K._fullLayout._rehover&&K._fullLayout._rehover()},l.redrag=function(K){K._fullLayout._redrag&&K._fullLayout._redrag()},l.reselect=function(K){var $=K._fullLayout,U=(K.layout||{}).selections,H=$._previousSelections;$._previousSelections=U;var q=$._reselect||JSON.stringify(U)!==JSON.stringify(H);e.getComponentMethod("selections","reselect")(K,q)},l.generalUpdatePerTraceModule=function(K,$,U,H){var q=$.traceHash,re={},Z;for(Z=0;Z<U.length;Z++){var Q=U[Z],oe=Q[0].trace;oe.visible&&(re[oe.type]=re[oe.type]||[],re[oe.type].push(Q))}for(var se in q)if(!re[se]){var ae=q[se][0],le=ae[0].trace;le.visible=!1,re[se]=[ae]}for(var _e in re){var fe=re[_e],me=fe[0][0].trace._module;me.plot(K,$,n.filterVisible(fe),H)}$.traceHash=re},l.plotBasePlot=function(K,$,U,H,q){var re=e.getModule(K),Z=d($.calcdata,re)[0];re.plot($,Z,H,q)},l.cleanBasePlot=function(K,$,U,H,q){var re=q._has&&q._has(K),Z=U._has&&U._has(K);re&&!Z&&q["_"+K+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(t,N,V){N.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(t,N,V){var m=t("../../lib"),u=t("../../lib/polygon").tester,A=m.findIndexOfMin,T=m.isAngleInsideSector,e=m.angleDelta,a=m.angleDist;function i(x,c,M,w,p){if(!T(c,w))return!1;var _,h;M[0]<M[1]?(_=M[0],h=M[1]):(_=M[1],h=M[0]);var L=u(o(_,w[0],w[1],p)),E=u(o(h,w[0],w[1],p)),S=[x*Math.cos(c),x*Math.sin(c)];return E.contains(S)&&!L.contains(S)}function n(x,c,M,w){var p,_,h=w[0],L=w[1],E=d(Math.sin(c)-Math.sin(x)),S=d(Math.cos(c)-Math.cos(x)),P=Math.tan(M),F=d(1/P),I=E/S,D=L-I*h;return F?E&&S?(p=D/(P-I),_=P*p):S?(p=L*F,_=L):(p=h,_=h*P):E&&S?(p=0,_=D):S?(p=0,_=L):p=_=NaN,[p,_]}function r(x,c,M,w){var p=-c*M,_=c*c+1,h=2*(c*p-M),L=p*p+M*M-x*x,E=Math.sqrt(h*h-4*_*L),S=(-h+E)/(2*_),P=(-h-E)/(2*_);return[[S,c*S+p+w],[P,c*P+p+w]]}function v(x,c){var M=c.length,w=new Array(M+1),p;for(p=0;p<M;p++){var _=c[p];w[p]=[x*Math.cos(_),x*Math.sin(_)]}return w[p]=w[0].slice(),w}function s(x,c,M,w){var p=w.length,_=[],h,L;function E(G){return[x*Math.cos(G),x*Math.sin(G)]}function S(G,Y,ee){return n(G,Y,ee,E(G))}function P(G){return m.mod(G,p)}function F(G){return T(G,[c,M])}var I=A(w,function(G){return F(G)?a(G,c):1/0}),D=S(w[I],w[P(I-1)],c);for(_.push(D),h=I,L=0;L<p;h++,L++){var R=w[P(h)];if(!F(R))break;_.push(E(R))}var O=A(w,function(G){return F(G)?a(G,M):1/0}),z=S(w[O],w[P(O+1)],M);return _.push(z),_.push([0,0]),_.push(_[0].slice()),_}function o(x,c,M,w){return m.isFullCircle([c,M])?v(x,w):s(x,c,M,w)}function b(x,c,M,w){for(var p=1/0,_=1/0,h=o(x,c,M,w),L=0;L<h.length;L++){var E=h[L];p=Math.min(p,E[0]),_=Math.min(_,-E[1])}return[p,_]}function g(x,c){var M=function(_){var h=e(_,x);return h>0?h:1/0},w=A(c,M),p=m.mod(w+1,c.length);return[c[w],c[p]]}function d(x){return Math.abs(x)>1e-10?x:0}function f(x,c,M){c=c||0,M=M||0;for(var w=x.length,p=new Array(w),_=0;_<w;_++){var h=x[_];p[_]=[c+h[0],M-h[1]]}return p}function y(x,c,M,w,p,_){var h=o(x,c,M,w);return"M"+f(h,p,_).join("L")}function l(x,c,M,w,p,_,h){var L,E;x<c?(L=x,E=c):(L=c,E=x);var S=f(o(L,M,w,p),_,h),P=f(o(E,M,w,p),_,h);return"M"+P.reverse().join("L")+"M"+S.join("L")}N.exports={isPtInsidePolygon:i,findPolygonOffset:b,findEnclosingVertexAngles:g,findIntersectionXY:n,findXYatLength:r,clampTiny:d,pathPolygon:y,pathPolygonAnnulus:l}},{"../../lib":515,"../../lib/polygon":527}],631:[function(t,N,V){var m=t("../get_data").getSubplotCalcData,u=t("../../lib").counterRegex,A=t("./polar"),T=t("./constants"),e=T.attr,a=T.name,i=u(a),n={};n[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(s){for(var o=s._fullLayout,b=s.calcdata,g=o._subplots[a],d=0;d<g.length;d++){var f=g[d],y=m(b,a,f),l=o[f]._subplot;l||(l=A(s,f),o[f]._subplot=l),l.plot(y,o,s._promises)}}function v(s,o,b,g){for(var d=g._subplots[a]||[],f=g._has&&g._has("gl"),y=o._has&&o._has("gl"),l=f&&!y,x=0;x<d.length;x++){var c=d[x],M=g[c]._subplot;if(!o[c]&&!!M){M.framework.remove(),M.layers["radial-axis-title"].remove();for(var w in M.clipPaths)M.clipPaths[w].remove()}l&&M._scene&&(M._scene.destroy(),M._scene=null)}}N.exports={attr:e,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:v,toSVG:t("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(t,N,V){var m=t("../../components/color/attributes"),u=t("../cartesian/layout_attributes"),A=t("../domain").attributes,T=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=e({color:u.color,showline:T({},u.showline,{dflt:!0}),linecolor:u.linecolor,linewidth:u.linewidth,showgrid:T({},u.showgrid,{dflt:!0}),gridcolor:u.gridcolor,gridwidth:u.gridwidth,griddash:u.griddash},"plot","from-root"),i=e({tickmode:u.tickmode,nticks:u.nticks,tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:u.ticks,ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,ticklabelstep:u.ticklabelstep,showticklabels:u.showticklabels,showtickprefix:u.showtickprefix,tickprefix:u.tickprefix,showticksuffix:u.showticksuffix,ticksuffix:u.ticksuffix,showexponent:u.showexponent,exponentformat:u.exponentformat,minexponent:u.minexponent,separatethousands:u.separatethousands,tickfont:u.tickfont,tickangle:u.tickangle,tickformat:u.tickformat,tickformatstops:u.tickformatstops,layer:u.layer},"plot","from-root"),n={visible:T({},u.visible,{dflt:!0}),type:T({},u.type,{values:["-","linear","log","date","category"]}),autotypenumbers:u.autotypenumbers,autorange:T({},u.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},u.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:u.categoryorder,categoryarray:u.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},u.title.text,{editType:"plot",dflt:""}),font:T({},u.title.font,{editType:"plot"}),editType:"plot"},hoverformat:u.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:u._deprecated.title,titlefont:u._deprecated.titlefont}};T(n,a,i);var r={visible:T({},u.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:u.autotypenumbers,categoryorder:u.categoryorder,categoryarray:u.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:u.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(r,a,i),N.exports={domain:A({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:m.background},radialaxis:n,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color"),A=t("../../plot_api/plot_template"),T=t("../subplot_defaults"),e=t("../get_data").getSubplotData,a=t("../cartesian/tick_value_defaults"),i=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_label_defaults"),r=t("../cartesian/prefix_suffix_defaults"),v=t("../cartesian/category_order_defaults"),s=t("../cartesian/line_grid_defaults"),o=t("../cartesian/axis_autotype"),b=t("./layout_attributes"),g=t("./set_convert"),d=t("./constants"),f=d.axisNames;function y(x,c,M,w){var p=M("bgcolor");w.bgColor=u.combine(p,w.paper_bgcolor);var _=M("sector");M("hole");var h=e(w.fullData,d.name,w.id),L=w.layoutOut,E;function S(K,$){return M(E+"."+K,$)}for(var P=0;P<f.length;P++){E=f[P],m.isPlainObject(x[E])||(x[E]={});var F=x[E],I=A.newContainer(c,E);I._id=I._name=E,I._attr=w.id+"."+E,I._traceIndices=h.map(function(K){return K._expandedIndex});var D=d.axisName2dataArray[E],R=l(F,I,S,h,D,w);v(F,I,S,{axData:h,dataAttr:D});var O=S("visible");switch(g(I,c,L),S("uirevision",c.uirevision),I._m=1,E){case"radialaxis":var z=S("autorange",!I.isValidRange(F.range));F.autorange=z,z&&(R==="linear"||R==="-")&&S("rangemode"),z==="reversed"&&(I._m=-1),S("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){m.log("Polar plots do not support date angular axes yet.");for(var G=0;G<h.length;G++)h[G].visible=!1;R=F.type=I.type="linear"}S(R==="linear"?"thetaunit":"period");var Y=S("direction");S("rotation",{counterclockwise:0,clockwise:90}[Y]);break}if(r(F,I,S,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),O){var ee,j,X,ie,he=w.font||{};ee=S("color"),j=ee===F.color?ee:he.color,X=he.size,ie=he.family,a(F,I,S,I.type),n(F,I,S,I.type,{font:{color:j,size:X,family:ie}}),i(F,I,S,{outerTicks:!0}),s(F,I,S,{dfltColor:ee,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:b[E]}),S("layer"),E==="radialaxis"&&(S("side"),S("angle",_[0]),S("title.text"),m.coerceFont(S,"title.font",{color:j,size:m.bigFont(X),family:ie}))}R!=="category"&&S("hoverformat"),I._input=F}c.angularaxis.type==="category"&&M("gridshape")}function l(x,c,M,w,p,_){var h=M("autotypenumbers",_.autotypenumbersDflt),L=M("type");if(L==="-"){for(var E,S=0;S<w.length;S++)if(w[S].visible){E=w[S];break}E&&E[p]&&(c.type=o(E[p],"gregorian",{noMultiCategory:!0,autotypenumbers:h})),c.type==="-"?c.type="linear":x.type=c.type}return c.type}N.exports=function(c,M,w){T(c,M,w,{type:d.name,attributes:b,handleDefaults:y,font:M.font,autotypenumbersDflt:M.autotypenumbers,paper_bgcolor:M.paper_bgcolor,fullData:w,layoutOut:M})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(t,N,V){var m=t("@plotly/d3"),u=t("tinycolor2"),A=t("../../registry"),T=t("../../lib"),e=T.strRotate,a=T.strTranslate,i=t("../../components/color"),n=t("../../components/drawing"),r=t("../plots"),v=t("../../plots/cartesian/axes"),s=t("../cartesian/set_convert"),o=t("./set_convert"),b=t("../cartesian/autorange").doAutoRange,g=t("../cartesian/dragbox"),d=t("../../components/dragelement"),f=t("../../components/fx"),y=t("../../components/titles"),l=t("../../components/selections").prepSelect,x=t("../../components/selections").selectOnClick,c=t("../../components/selections").clearOutline,M=t("../../lib/setcursor"),w=t("../../lib/clear_gl_canvases"),p=t("../../plot_api/subroutines").redrawReglTraces,_=t("../../constants/alignment").MID_SHIFT,h=t("./constants"),L=t("./helpers"),E=t("../smith/helpers"),S=E.smith,P=E.reactanceArc,F=E.resistanceArc,I=E.smithTransform,D=T._,R=T.mod,O=T.deg2rad,z=T.rad2deg;function G(he,K,$){this.isSmith=$||!1,this.id=K,this.gd=he,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var U=he._fullLayout,H="clip"+U._uid+K;this.clipIds.forTraces=H+"-for-traces",this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=U["_"+($?"smith":"polar")+"layer"].append("g").attr("class",K),this.getHole=function(q){return this.isSmith?0:q.hole},this.getSector=function(q){return this.isSmith?[0,360]:q.sector},this.getRadial=function(q){return this.isSmith?q.realaxis:q.radialaxis},this.getAngular=function(q){return this.isSmith?q.imaginaryaxis:q.angularaxis},$||(this.radialTickLayout=null,this.angularTickLayout=null)}var Y=G.prototype;N.exports=function(K,$,U){return new G(K,$,U)},Y.plot=function(he,K){for(var $=this,U=K[$.id],H=!1,q=0;q<he.length;q++){var re=he[q][0].trace;if(re.cliponaxis===!1){H=!0;break}}$._hasClipOnAxisFalse=H,$.updateLayers(K,U),$.updateLayout(K,U),r.generalUpdatePerTraceModule($.gd,$,he,U),$.updateFx(K,U),$.isSmith&&(delete U.realaxis.range,delete U.imaginaryaxis.range)},Y.updateLayers=function(he,K){var $=this,U=$.isSmith,H=$.layers,q=$.getRadial(K),re=$.getAngular(K),Z=h.layerNames,Q=Z.indexOf("frontplot"),oe=Z.slice(0,Q),se=re.layer==="below traces",ae=q.layer==="below traces";se&&oe.push("angular-line"),ae&&oe.push("radial-line"),se&&oe.push("angular-axis"),ae&&oe.push("radial-axis"),oe.push("frontplot"),se||oe.push("angular-line"),ae||oe.push("radial-line"),se||oe.push("angular-axis"),ae||oe.push("radial-axis");var le=(U?"smith":"polar")+"sublayer",_e=$.framework.selectAll("."+le).data(oe,String);_e.enter().append("g").attr("class",function(fe){return le+" "+fe}).each(function(fe){var me=H[fe]=m.select(this);switch(fe){case"frontplot":U||me.append("g").classed("barlayer",!0),me.append("g").classed("scatterlayer",!0);break;case"backplot":me.append("g").classed("maplayer",!0);break;case"plotbg":H.bg=me.append("path");break;case"radial-grid":me.style("fill","none");break;case"angular-grid":me.style("fill","none");break;case"radial-line":me.append("line").style("fill","none");break;case"angular-line":me.append("path").style("fill","none");break}}),_e.order()},Y.updateLayout=function(he,K){var $=this,U=$.layers,H=he._size,q=$.getRadial(K),re=$.getAngular(K),Z=K.domain.x,Q=K.domain.y;$.xOffset=H.l+H.w*Z[0],$.yOffset=H.t+H.h*(1-Q[1]);var oe=$.xLength=H.w*(Z[1]-Z[0]),se=$.yLength=H.h*(Q[1]-Q[0]),ae=$.getSector(K);$.sectorInRad=ae.map(O);var le=$.sectorBBox=j(ae),_e=le[2]-le[0],fe=le[3]-le[1],me=se/oe,xe=Math.abs(fe/_e),ye,be,ke,De,He;me>xe?(ye=oe,be=oe*xe,He=(se-be)/H.h/2,ke=[Z[0],Z[1]],De=[Q[0]+He,Q[1]-He]):(ye=se/xe,be=se,He=(oe-ye)/H.w/2,ke=[Z[0]+He,Z[1]-He],De=[Q[0],Q[1]]),$.xLength2=ye,$.yLength2=be,$.xDomain2=ke,$.yDomain2=De;var Ae=$.xOffset2=H.l+H.w*ke[0],Le=$.yOffset2=H.t+H.h*(1-De[1]),Ze=$.radius=ye/_e,We=$.innerRadius=$.getHole(K)*Ze,ze=$.cx=Ae-Ze*le[0],Ie=$.cy=Le+Ze*le[3],Ve=$.cxx=ze-Ae,dt=$.cyy=Ie-Le,Ft=q.side,Qt;Ft==="counterclockwise"?(Qt=Ft,Ft="top"):Ft==="clockwise"&&(Qt=Ft,Ft="bottom"),$.radialAxis=$.mockAxis(he,K,q,{_id:"x",side:Ft,_trueSide:Qt,domain:[We/H.w,Ze/H.w]}),$.angularAxis=$.mockAxis(he,K,re,{side:"right",domain:[0,Math.PI],autorange:!1}),$.doAutoRange(he,K),$.updateAngularAxis(he,K),$.updateRadialAxis(he,K),$.updateRadialAxisTitle(he,K),$.xaxis=$.mockCartesianAxis(he,K,{_id:"x",domain:ke}),$.yaxis=$.mockCartesianAxis(he,K,{_id:"y",domain:De});var Ot=$.pathSubplot();$.clipPaths.forTraces.select("path").attr("d",Ot).attr("transform",a(Ve,dt)),U.frontplot.attr("transform",a(Ae,Le)).call(n.setClipUrl,$._hasClipOnAxisFalse?null:$.clipIds.forTraces,$.gd),U.bg.attr("d",Ot).attr("transform",a(ze,Ie)).call(i.fill,K.bgcolor)},Y.mockAxis=function(he,K,$,U){var H=T.extendFlat({},$,U);return o(H,K,he),H},Y.mockCartesianAxis=function(he,K,$){var U=this,H=U.isSmith,q=$._id,re=T.extendFlat({type:"linear"},$);s(re,he);var Z={x:[0,2],y:[1,3]};return re.setRange=function(){var Q=U.sectorBBox,oe=Z[q],se=U.radialAxis._rl,ae=(se[1]-se[0])/(1-U.getHole(K));re.range=[Q[oe[0]]*ae,Q[oe[1]]*ae]},re.isPtWithinRange=q==="x"&&!H?function(Q){return U.isPtInside(Q)}:function(){return!0},re.setRange(),re.setScale(),re},Y.doAutoRange=function(he,K){var $=this,U=$.gd,H=$.radialAxis,q=$.getRadial(K);b(U,H);var re=H.range;q.range=re.slice(),q._input.range=re.slice(),H._rl=[H.r2l(re[0],null,"gregorian"),H.r2l(re[1],null,"gregorian")]},Y.updateRadialAxis=function(he,K){var $=this,U=$.gd,H=$.layers,q=$.radius,re=$.innerRadius,Z=$.cx,Q=$.cy,oe=$.getRadial(K),se=R($.getSector(K)[0],360),ae=$.radialAxis,le=re<q,_e=$.isSmith;_e||($.fillViewInitialKey("radialaxis.angle",oe.angle),$.fillViewInitialKey("radialaxis.range",ae.range.slice()),ae.setGeometry()),ae.tickangle==="auto"&&se>90&&se<=270&&(ae.tickangle=180);var fe=_e?function(Ze){var We=I($,S([Ze.x,0]));return a(We[0]-Z,We[1]-Q)}:function(Ze){return a(ae.l2p(Ze.x)+re,0)},me=_e?function(Ze){return F($,Ze.x,-1/0,1/0)}:function(Ze){return $.pathArc(ae.r2p(Ze.x)+re)},xe=ee(oe);if($.radialTickLayout!==xe&&(H["radial-axis"].selectAll(".xtick").remove(),$.radialTickLayout=xe),le){ae.setScale();var ye=0,be=_e?(ae.tickvals||[]).filter(function(Ze){return Ze>=0}).map(function(Ze){return v.tickText(ae,Ze,!0,!1)}):v.calcTicks(ae),ke=_e?be:v.clipEnds(ae,be),De=v.getTickSigns(ae)[2];_e&&((ae.ticks==="top"&&ae.side==="bottom"||ae.ticks==="bottom"&&ae.side==="top")&&(De=-De),ae.ticks==="top"&&ae.side==="top"&&(ye=-ae.ticklen),ae.ticks==="bottom"&&ae.side==="bottom"&&(ye=ae.ticklen)),v.drawTicks(U,ae,{vals:be,layer:H["radial-axis"],path:v.makeTickPath(ae,0,De),transFn:fe,crisp:!1}),v.drawGrid(U,ae,{vals:ke,layer:H["radial-grid"],path:me,transFn:T.noop,crisp:!1}),v.drawLabels(U,ae,{vals:be,layer:H["radial-axis"],transFn:fe,labelFns:v.makeLabelFns(ae,ye)})}var He=$.radialAxisAngle=$.vangles?z(X(O(oe.angle),$.vangles)):oe.angle,Ae=a(Z,Q),Le=Ae+e(-He);ie(H["radial-axis"],le&&(oe.showticklabels||oe.ticks),{transform:Le}),ie(H["radial-grid"],le&&oe.showgrid,{transform:_e?"":Ae}),ie(H["radial-line"].select("line"),le&&oe.showline,{x1:_e?-q:re,y1:0,x2:q,y2:0,transform:Le}).attr("stroke-width",oe.linewidth).call(i.stroke,oe.linecolor)},Y.updateRadialAxisTitle=function(he,K,$){if(!this.isSmith){var U=this,H=U.gd,q=U.radius,re=U.cx,Z=U.cy,Q=U.getRadial(K),oe=U.id+"title",se=0;if(Q.title){var ae=n.bBox(U.layers["radial-axis"].node()).height,le=Q.title.font.size,_e=Q.side;se=_e==="top"?le:_e==="counterclockwise"?-(ae+le*.4):ae+le*.8}var fe=$!==void 0?$:U.radialAxisAngle,me=O(fe),xe=Math.cos(me),ye=Math.sin(me),be=re+q/2*xe+se*ye,ke=Z-q/2*ye+se*xe;U.layers["radial-axis-title"]=y.draw(H,oe,{propContainer:Q,propName:U.id+".radialaxis.title",placeholder:D(H,"Click to enter radial axis title"),attributes:{x:be,y:ke,"text-anchor":"middle"},transform:{rotate:-fe}})}},Y.updateAngularAxis=function(he,K){var $=this,U=$.gd,H=$.layers,q=$.radius,re=$.innerRadius,Z=$.cx,Q=$.cy,oe=$.getAngular(K),se=$.angularAxis,ae=$.isSmith;ae||($.fillViewInitialKey("angularaxis.rotation",oe.rotation),se.setGeometry(),se.setScale());var le=ae?function(We){var ze=I($,S([0,We.x]));return Math.atan2(ze[0]-Z,ze[1]-Q)-Math.PI/2}:function(We){return se.t2g(We.x)};se.type==="linear"&&se.thetaunit==="radians"&&(se.tick0=z(se.tick0),se.dtick=z(se.dtick));var _e=function(We){return a(Z+q*Math.cos(We),Q-q*Math.sin(We))},fe=ae?function(We){var ze=I($,S([0,We.x]));return a(ze[0],ze[1])}:function(We){return _e(le(We))},me=ae?function(We){var ze=I($,S([0,We.x])),Ie=Math.atan2(ze[0]-Z,ze[1]-Q)-Math.PI/2;return a(ze[0],ze[1])+e(-z(Ie))}:function(We){var ze=le(We);return _e(ze)+e(-z(ze))},xe=ae?function(We){return P($,We.x,0,1/0)}:function(We){var ze=le(We),Ie=Math.cos(ze),Ve=Math.sin(ze);return"M"+[Z+re*Ie,Q-re*Ve]+"L"+[Z+q*Ie,Q-q*Ve]},ye=v.makeLabelFns(se,0),be=ye.labelStandoff,ke={};ke.xFn=function(We){var ze=le(We);return Math.cos(ze)*be},ke.yFn=function(We){var ze=le(We),Ie=Math.sin(ze)>0?.2:1;return-Math.sin(ze)*(be+We.fontSize*Ie)+Math.abs(Math.cos(ze))*(We.fontSize*_)},ke.anchorFn=function(We){var ze=le(We),Ie=Math.cos(ze);return Math.abs(Ie)<.1?"middle":Ie>0?"start":"end"},ke.heightFn=function(We,ze,Ie){var Ve=le(We);return-.5*(1+Math.sin(Ve))*Ie};var De=ee(oe);$.angularTickLayout!==De&&(H["angular-axis"].selectAll("."+se._id+"tick").remove(),$.angularTickLayout=De);var He=ae?[1/0].concat(se.tickvals||[]).map(function(We){return v.tickText(se,We,!0,!1)}):v.calcTicks(se);ae&&(He[0].text="\u221E",He[0].fontSize*=1.75);var Ae;if(K.gridshape==="linear"?(Ae=He.map(le),T.angleDelta(Ae[0],Ae[1])<0&&(Ae=Ae.slice().reverse())):Ae=null,$.vangles=Ae,se.type==="category"&&(He=He.filter(function(We){return T.isAngleInsideSector(le(We),$.sectorInRad)})),se.visible){var Le=se.ticks==="inside"?-1:1,Ze=(se.linewidth||1)/2;v.drawTicks(U,se,{vals:He,layer:H["angular-axis"],path:"M"+Le*Ze+",0h"+Le*se.ticklen,transFn:me,crisp:!1}),v.drawGrid(U,se,{vals:He,layer:H["angular-grid"],path:xe,transFn:T.noop,crisp:!1}),v.drawLabels(U,se,{vals:He,layer:H["angular-axis"],repositionOnUpdate:!0,transFn:fe,labelFns:ke})}ie(H["angular-line"].select("path"),oe.showline,{d:$.pathSubplot(),transform:a(Z,Q)}).attr("stroke-width",oe.linewidth).call(i.stroke,oe.linecolor)},Y.updateFx=function(he,K){if(!this.gd._context.staticPlot){var $=!this.isSmith;$&&(this.updateAngularDrag(he),this.updateRadialDrag(he,K,0),this.updateRadialDrag(he,K,1)),this.updateHoverAndMainDrag(he)}},Y.updateHoverAndMainDrag=function(he){var K=this,$=K.isSmith,U=K.gd,H=K.layers,q=he._zoomlayer,re=h.MINZOOM,Z=h.OFFEDGE,Q=K.radius,oe=K.innerRadius,se=K.cx,ae=K.cy,le=K.cxx,_e=K.cyy,fe=K.sectorInRad,me=K.vangles,xe=K.radialAxis,ye=L.clampTiny,be=L.findXYatLength,ke=L.findEnclosingVertexAngles,De=h.cornerHalfWidth,He=h.cornerLen/2,Ae,Le,Ze=g.makeDragger(H,"path","maindrag",he.dragmode===!1?"none":"crosshair");m.select(Ze).attr("d",K.pathSubplot()).attr("transform",a(se,ae)),Ze.onmousemove=function(Zt){f.hover(U,Zt,K.id),U._fullLayout._lasthover=Ze,U._fullLayout._hoversubplot=K.id},Ze.onmouseout=function(Zt){U._dragging||d.unhover(U,Zt)};var We={element:Ze,gd:U,subplot:K.id,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis},xaxes:[K.xaxis],yaxes:[K.yaxis]},ze,Ie,Ve,dt,Ft,Qt,Ot,Ct,jt;function Nt(Zt,Wt){return Math.sqrt(Zt*Zt+Wt*Wt)}function Lt(Zt,Wt){return Nt(Zt-le,Wt-_e)}function Xe(Zt,Wt){return Math.atan2(_e-Wt,Zt-le)}function it(Zt,Wt){return[Zt*Math.cos(Wt),Zt*Math.sin(-Wt)]}function Ye(Zt,Wt){if(Zt===0)return K.pathSector(2*De);var sr=He/Zt,Gr=Wt-sr,cn=Wt+sr,qr=Math.max(0,Math.min(Zt,Q)),st=qr-De,rr=qr+De;return"M"+it(st,Gr)+"A"+[st,st]+" 0,0,0 "+it(st,cn)+"L"+it(rr,cn)+"A"+[rr,rr]+" 0,0,1 "+it(rr,Gr)+"Z"}function Ee(Zt,Wt,sr){if(Zt===0)return K.pathSector(2*De);var Gr=it(Zt,Wt),cn=it(Zt,sr),qr=ye((Gr[0]+cn[0])/2),st=ye((Gr[1]+cn[1])/2),rr,Jt;if(qr&&st){var hr=st/qr,Sr=-1/hr,tt=be(De,hr,qr,st);rr=be(He,Sr,tt[0][0],tt[0][1]),Jt=be(He,Sr,tt[1][0],tt[1][1])}else{var Qe,lt;st?(Qe=He,lt=De):(Qe=De,lt=He),rr=[[qr-Qe,st-lt],[qr+Qe,st-lt]],Jt=[[qr-Qe,st+lt],[qr+Qe,st+lt]]}return"M"+rr.join("L")+"L"+Jt.reverse().join("L")+"Z"}function Ge(){Ve=null,dt=null,Ft=K.pathSubplot(),Qt=!1;var Zt=U._fullLayout[K.id];Ot=u(Zt.bgcolor).getLuminance(),Ct=g.makeZoombox(q,Ot,se,ae,Ft),Ct.attr("fill-rule","evenodd"),jt=g.makeCorners(q,se,ae),c(U)}function Ke(Zt,Wt){return Wt=Math.max(Math.min(Wt,Q),oe),Zt<Z?Zt=0:Q-Zt<Z?Zt=Q:Wt<Z?Wt=0:Q-Wt<Z&&(Wt=Q),Math.abs(Wt-Zt)>re?(Zt<Wt?(Ve=Zt,dt=Wt):(Ve=Wt,dt=Zt),!0):(Ve=null,dt=null,!1)}function qe(Zt,Wt){Zt=Zt||Ft,Wt=Wt||"M0,0Z",Ct.attr("d",Zt),jt.attr("d",Wt),g.transitionZoombox(Ct,jt,Qt,Ot),Qt=!0;var sr={};zt(sr),U.emit("plotly_relayouting",sr)}function At(Zt,Wt){Zt=Zt*Ae,Wt=Wt*Le;var sr=ze+Zt,Gr=Ie+Wt,cn=Lt(ze,Ie),qr=Math.min(Lt(sr,Gr),Q),st=Xe(ze,Ie),rr,Jt;Ke(cn,qr)&&(rr=Ft+K.pathSector(dt),Ve&&(rr+=K.pathSector(Ve)),Jt=Ye(Ve,st)+Ye(dt,st)),qe(rr,Jt)}function yt(Zt,Wt,sr,Gr){var cn=L.findIntersectionXY(sr,Gr,sr,[Zt-le,_e-Wt]);return Nt(cn[0],cn[1])}function Mt(Zt,Wt){var sr=ze+Zt,Gr=Ie+Wt,cn=Xe(ze,Ie),qr=Xe(sr,Gr),st=ke(cn,me),rr=ke(qr,me),Jt=yt(ze,Ie,st[0],st[1]),hr=Math.min(yt(sr,Gr,rr[0],rr[1]),Q),Sr,tt;Ke(Jt,hr)&&(Sr=Ft+K.pathSector(dt),Ve&&(Sr+=K.pathSector(Ve)),tt=[Ee(Ve,st[0],st[1]),Ee(dt,st[0],st[1])].join(" ")),qe(Sr,tt)}function Gt(){if(g.removeZoombox(U),!(Ve===null||dt===null)){var Zt={};zt(Zt),g.showDoubleClickNotifier(U),A.call("_guiRelayout",U,Zt)}}function zt(Zt){var Wt=xe._rl,sr=(Wt[1]-Wt[0])/(1-oe/Q)/Q,Gr=[Wt[0]+(Ve-oe)*sr,Wt[0]+(dt-oe)*sr];Zt[K.id+".radialaxis.range"]=Gr}function Ht(Zt,Wt){var sr=U._fullLayout.clickmode;if(g.removeZoombox(U),Zt===2){var Gr={};for(var cn in K.viewInitial)Gr[K.id+"."+cn]=K.viewInitial[cn];U.emit("plotly_doubleclick",null),A.call("_guiRelayout",U,Gr)}sr.indexOf("select")>-1&&Zt===1&&x(Wt,U,[K.xaxis],[K.yaxis],K.id,We),sr.indexOf("event")>-1&&f.click(U,Wt,K.id)}We.prepFn=function(Zt,Wt,sr){var Gr=U._fullLayout.dragmode,cn=Ze.getBoundingClientRect();U._fullLayout._calcInverseTransform(U);var qr=U._fullLayout._invTransform;Ae=U._fullLayout._invScaleX,Le=U._fullLayout._invScaleY;var st=T.apply3DTransform(qr)(Wt-cn.left,sr-cn.top);if(ze=st[0],Ie=st[1],me){var rr=L.findPolygonOffset(Q,fe[0],fe[1],me);ze+=le+rr[0],Ie+=_e+rr[1]}switch(Gr){case"zoom":We.clickFn=Ht,$||(me?We.moveFn=Mt:We.moveFn=At,We.doneFn=Gt,Ge());break;case"select":case"lasso":l(Zt,Wt,sr,We,Gr);break}},d.init(We)},Y.updateRadialDrag=function(he,K,$){var U=this,H=U.gd,q=U.layers,re=U.radius,Z=U.innerRadius,Q=U.cx,oe=U.cy,se=U.radialAxis,ae=h.radialDragBoxSize,le=ae/2;if(!se.visible)return;var _e=O(U.radialAxisAngle),fe=se._rl,me=fe[0],xe=fe[1],ye=fe[$],be=.75*(fe[1]-fe[0])/(1-U.getHole(K))/re,ke,De,He;$?(ke=Q+(re+le)*Math.cos(_e),De=oe-(re+le)*Math.sin(_e),He="radialdrag"):(ke=Q+(Z-le)*Math.cos(_e),De=oe-(Z-le)*Math.sin(_e),He="radialdrag-inner");var Ae=g.makeRectDragger(q,He,"crosshair",-le,-le,ae,ae),Le={element:Ae,gd:H};he.dragmode===!1&&(Le.dragmode=!1),ie(m.select(Ae),se.visible&&Z<re,{transform:a(ke,De)});var Ze,We,ze;function Ie(Ot,Ct){if(Ze)Ze(Ot,Ct);else{var jt=[Ot,-Ct],Nt=[Math.cos(_e),Math.sin(_e)],Lt=Math.abs(T.dot(jt,Nt)/Math.sqrt(T.dot(jt,jt)));isNaN(Lt)||(Ze=Lt<.5?Ft:Qt)}var Xe={};Ve(Xe),H.emit("plotly_relayouting",Xe)}function Ve(Ot){We!==null?Ot[U.id+".radialaxis.angle"]=We:ze!==null&&(Ot[U.id+".radialaxis.range["+$+"]"]=ze)}function dt(){We!==null?A.call("_guiRelayout",H,U.id+".radialaxis.angle",We):ze!==null&&A.call("_guiRelayout",H,U.id+".radialaxis.range["+$+"]",ze)}function Ft(Ot,Ct){if($!==0){var jt=ke+Ot,Nt=De+Ct;We=Math.atan2(oe-Nt,jt-Q),U.vangles&&(We=X(We,U.vangles)),We=z(We);var Lt=a(Q,oe)+e(-We);q["radial-axis"].attr("transform",Lt),q["radial-line"].select("line").attr("transform",Lt);var Xe=U.gd._fullLayout,it=Xe[U.id];U.updateRadialAxisTitle(Xe,it,We)}}function Qt(Ot,Ct){var jt=T.dot([Ot,-Ct],[Math.cos(_e),Math.sin(_e)]);if(ze=ye-be*jt,be>0!=($?ze>me:ze<xe)){ze=null;return}var Nt=H._fullLayout,Lt=Nt[U.id];se.range[$]=ze,se._rl[$]=ze,U.updateRadialAxis(Nt,Lt),U.xaxis.setRange(),U.xaxis.setScale(),U.yaxis.setRange(),U.yaxis.setScale();var Xe=!1;for(var it in U.traceHash){var Ye=U.traceHash[it],Ee=T.filterVisible(Ye),Ge=Ye[0][0].trace._module;Ge.plot(H,U,Ee,Lt),A.traceIs(it,"gl")&&Ee.length&&(Xe=!0)}Xe&&(w(H),p(H))}Le.prepFn=function(){Ze=null,We=null,ze=null,Le.moveFn=Ie,Le.doneFn=dt,c(H)},Le.clampFn=function(Ot,Ct){return Math.sqrt(Ot*Ot+Ct*Ct)<h.MINDRAG&&(Ot=0,Ct=0),[Ot,Ct]},d.init(Le)},Y.updateAngularDrag=function(he){var K=this,$=K.gd,U=K.layers,H=K.radius,q=K.angularAxis,re=K.cx,Z=K.cy,Q=K.cxx,oe=K.cyy,se=h.angularDragBoxSize,ae=g.makeDragger(U,"path","angulardrag",he.dragmode===!1?"none":"move"),le={element:ae,gd:$};he.dragmode===!1?le.dragmode=!1:m.select(ae).attr("d",K.pathAnnulus(H,H+se)).attr("transform",a(re,Z)).call(M,"move");function _e(ze,Ie){return Math.atan2(oe+se-Ie,ze-Q-se)}var fe=U.frontplot.select(".scatterlayer").selectAll(".trace"),me=fe.selectAll(".point"),xe=fe.selectAll(".textpoint"),ye,be,ke,De,He,Ae;function Le(ze,Ie){var Ve=K.gd._fullLayout,dt=Ve[K.id],Ft=ye+ze*he._invScaleX,Qt=be+Ie*he._invScaleY,Ot=_e(Ft,Qt),Ct=z(Ot-Ae);if(De=ke+Ct,U.frontplot.attr("transform",a(K.xOffset2,K.yOffset2)+e([-Ct,Q,oe])),K.vangles){He=K.radialAxisAngle+Ct;var jt=a(re,Z)+e(-Ct),Nt=a(re,Z)+e(-He);U.bg.attr("transform",jt),U["radial-grid"].attr("transform",jt),U["radial-axis"].attr("transform",Nt),U["radial-line"].select("line").attr("transform",Nt),K.updateRadialAxisTitle(Ve,dt,He)}else K.clipPaths.forTraces.select("path").attr("transform",a(Q,oe)+e(Ct));me.each(function(){var Ke=m.select(this),qe=n.getTranslate(Ke);Ke.attr("transform",a(qe.x,qe.y)+e([Ct]))}),xe.each(function(){var Ke=m.select(this),qe=Ke.select("text"),At=n.getTranslate(Ke);Ke.attr("transform",e([Ct,qe.attr("x"),qe.attr("y")])+a(At.x,At.y))}),q.rotation=T.modHalf(De,360),K.updateAngularAxis(Ve,dt),K._hasClipOnAxisFalse&&!T.isFullCircle(K.sectorInRad)&&fe.call(n.hideOutsideRangePoints,K);var Lt=!1;for(var Xe in K.traceHash)if(A.traceIs(Xe,"gl")){var it=K.traceHash[Xe],Ye=T.filterVisible(it),Ee=it[0][0].trace._module;Ee.plot($,K,Ye,dt),Ye.length&&(Lt=!0)}Lt&&(w($),p($));var Ge={};Ze(Ge),$.emit("plotly_relayouting",Ge)}function Ze(ze){ze[K.id+".angularaxis.rotation"]=De,K.vangles&&(ze[K.id+".radialaxis.angle"]=He)}function We(){xe.select("text").attr("transform",null);var ze={};Ze(ze),A.call("_guiRelayout",$,ze)}le.prepFn=function(ze,Ie,Ve){var dt=he[K.id];ke=dt.angularaxis.rotation;var Ft=ae.getBoundingClientRect();ye=Ie-Ft.left,be=Ve-Ft.top,$._fullLayout._calcInverseTransform($);var Qt=T.apply3DTransform(he._invTransform)(ye,be);ye=Qt[0],be=Qt[1],Ae=_e(ye,be),le.moveFn=Le,le.doneFn=We,c($)},K.vangles&&!T.isFullCircle(K.sectorInRad)&&(le.prepFn=T.noop,M(m.select(ae),null)),d.init(le)},Y.isPtInside=function(he){if(this.isSmith)return!0;var K=this.sectorInRad,$=this.vangles,U=this.angularAxis.c2g(he.theta),H=this.radialAxis,q=H.c2l(he.r),re=H._rl,Z=$?L.isPtInsidePolygon:T.isPtInsideSector;return Z(q,U,re,K,$)},Y.pathArc=function(he){var K=this.sectorInRad,$=this.vangles,U=$?L.pathPolygon:T.pathArc;return U(he,K[0],K[1],$)},Y.pathSector=function(he){var K=this.sectorInRad,$=this.vangles,U=$?L.pathPolygon:T.pathSector;return U(he,K[0],K[1],$)},Y.pathAnnulus=function(he,K){var $=this.sectorInRad,U=this.vangles,H=U?L.pathPolygonAnnulus:T.pathAnnulus;return H(he,K,$[0],$[1],U)},Y.pathSubplot=function(){var he=this.innerRadius,K=this.radius;return he?this.pathAnnulus(he,K):this.pathSector(K)},Y.fillViewInitialKey=function(he,K){he in this.viewInitial||(this.viewInitial[he]=K)};function ee(he){var K=he.ticks+String(he.ticklen)+String(he.showticklabels);return"side"in he&&(K+=he.side),K}function j(he){var K=he[0],$=he[1],U=$-K,H=R(K,360),q=H+U,re=Math.cos(O(H)),Z=Math.sin(O(H)),Q=Math.cos(O(q)),oe=Math.sin(O(q)),se,ae,le,_e;return H<=90&&q>=90||H>90&&q>=450?_e=1:Z<=0&&oe<=0?_e=0:_e=Math.max(Z,oe),H<=180&&q>=180||H>180&&q>=540?se=-1:re>=0&&Q>=0?se=0:se=Math.min(re,Q),H<=270&&q>=270||H>270&&q>=630?ae=-1:Z>=0&&oe>=0?ae=0:ae=Math.min(Z,oe),q>=360?le=1:re<=0&&Q<=0?le=0:le=Math.max(re,Q),[se,ae,le,_e]}function X(he,K){var $=function(H){return T.angleDist(he,H)},U=T.findIndexOfMin(K,$);return K[U]}function ie(he,K,$){return K?(he.attr("display",null),he.attr($)):he&&he.attr("display","none"),he}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(t,N,V){var m=t("../../lib"),u=t("../cartesian/set_convert"),A=m.deg2rad,T=m.rad2deg;N.exports=function(v,s,o){switch(u(v,o),v._id){case"x":case"radialaxis":e(v,s);break;case"angularaxis":n(v,s);break}};function e(r,v){var s=v._subplot;r.setGeometry=function(){var o=r._rl[0],b=r._rl[1],g=s.innerRadius,d=(s.radius-g)/(b-o),f=g/d,y=o>b?function(l){return l<=0}:function(l){return l>=0};r.c2g=function(l){var x=r.c2l(l)-o;return(y(x)?x:0)+f},r.g2c=function(l){return r.l2c(l+o-f)},r.g2p=function(l){return l*d},r.c2p=function(l){return r.g2p(r.c2g(l))}}}function a(r,v){return v==="degrees"?A(r):r}function i(r,v){return v==="degrees"?T(r):r}function n(r,v){var s=r.type;if(s==="linear"){var o=r.d2c,b=r.c2d;r.d2c=function(g,d){return a(o(g),d)},r.c2d=function(g,d){return b(i(g,d))}}r.makeCalcdata=function(g,d){var f=g[d],y=g._length,l,x,c=function(h){return r.d2c(h,g.thetaunit)};if(f){if(m.isTypedArray(f)&&s==="linear"){if(y===f.length)return f;if(f.subarray)return f.subarray(0,y)}for(l=new Array(y),x=0;x<y;x++)l[x]=c(f[x])}else{var M=d+"0",w="d"+d,p=M in g?c(g[M]):0,_=g[w]?c(g[w]):(r.period||2*Math.PI)/y;for(l=new Array(y),x=0;x<y;x++)l[x]=p+x*_}return l},r.setGeometry=function(){var g=v.sector,d=g.map(A),f={clockwise:-1,counterclockwise:1}[r.direction],y=A(r.rotation),l=function(L){return f*L+y},x=function(L){return(L-y)/f},c,M,w,p;switch(s){case"linear":M=c=m.identity,p=A,w=T,r.range=m.isFullCircle(d)?[g[0],g[0]+360]:d.map(x).map(T);break;case"category":var _=r._categories.length,h=r.period?Math.max(r.period,_):_;h===0&&(h=1),M=p=function(L){return L*2*Math.PI/h},c=w=function(L){return L*h/Math.PI/2},r.range=[0,h];break}r.c2g=function(L){return l(M(L))},r.g2c=function(L){return c(x(L))},r.t2g=function(L){return l(p(L))},r.g2t=function(L){return w(x(L))}}}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(t,N,V){N.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(t,N,V){function m(i){return i<0?-1:i>0?1:0}function u(i){var n=i[0],r=i[1];if(!isFinite(n)||!isFinite(r))return[1,0];var v=(n+1)*(n+1)+r*r;return[(n*n+r*r-1)/v,2*r/v]}function A(i,n){var r=n[0],v=n[1];return[r*i.radius+i.cx,-v*i.radius+i.cy]}function T(i,n){return n*i.radius}function e(i,n,r,v){var s=A(i,u([r,n])),o=s[0],b=s[1],g=A(i,u([v,n])),d=g[0],f=g[1];if(n===0)return["M"+o+","+b,"L"+d+","+f].join(" ");var y=T(i,1/Math.abs(n));return["M"+o+","+b,"A"+y+","+y+" 0 0,"+(n<0?1:0)+" "+d+","+f].join(" ")}function a(i,n,r,v){var s=T(i,1/(n+1)),o=A(i,u([n,r])),b=o[0],g=o[1],d=A(i,u([n,v])),f=d[0],y=d[1];if(m(r)!==m(v)){var l=A(i,u([n,0])),x=l[0],c=l[1];return["M"+b+","+g,"A"+s+","+s+" 0 0,"+(0<r?0:1)+" "+x+","+c,"A"+s+","+s+" 0 0,"+(v<0?0:1)+f+","+y].join(" ")}return["M"+b+","+g,"A"+s+","+s+" 0 0,"+(v<r?0:1)+" "+f+","+y].join(" ")}N.exports={smith:u,reactanceArc:e,resistanceArc:a,smithTransform:A}},{}],638:[function(t,N,V){var m=t("../get_data").getSubplotCalcData,u=t("../../lib").counterRegex,A=t("../polar/polar"),T=t("./constants"),e=T.attr,a=T.name,i=u(a),n={};n[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(s){for(var o=s._fullLayout,b=s.calcdata,g=o._subplots[a],d=0;d<g.length;d++){var f=g[d],y=m(b,a,f),l=o[f]._subplot;l||(l=A(s,f,!0),o[f]._subplot=l),l.plot(y,o,s._promises)}}function v(s,o,b,g){for(var d=g._subplots[a]||[],f=0;f<d.length;f++){var y=d[f],l=g[y]._subplot;if(!o[y]&&!!l){l.framework.remove();for(var x in l.clipPaths)l.clipPaths[x].remove()}}}N.exports={attr:e,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:v,toSVG:t("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(t,N,V){var m=t("../../components/color/attributes"),u=t("../cartesian/layout_attributes"),A=t("../domain").attributes,T=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=e({color:u.color,showline:T({},u.showline,{dflt:!0}),linecolor:u.linecolor,linewidth:u.linewidth,showgrid:T({},u.showgrid,{dflt:!0}),gridcolor:u.gridcolor,gridwidth:u.gridwidth,griddash:u.griddash},"plot","from-root"),i=e({ticklen:u.ticklen,tickwidth:T({},u.tickwidth,{dflt:2}),tickcolor:u.tickcolor,showticklabels:u.showticklabels,showtickprefix:u.showtickprefix,tickprefix:u.tickprefix,showticksuffix:u.showticksuffix,ticksuffix:u.ticksuffix,tickfont:u.tickfont,tickformat:u.tickformat,hoverformat:u.hoverformat,layer:u.layer},"plot","from-root"),n=T({visible:T({},u.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},u.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,i),r=T({visible:T({},u.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:u.ticks,editType:"calc"},a,i);N.exports={domain:A({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:m.background},realaxis:n,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color"),A=t("../../plot_api/plot_template"),T=t("../subplot_defaults"),e=t("../get_data").getSubplotData,a=t("../cartesian/prefix_suffix_defaults"),i=t("../cartesian/tick_label_defaults"),n=t("../cartesian/line_grid_defaults"),r=t("../cartesian/set_convert"),v=t("./layout_attributes"),s=t("./constants"),o=s.axisNames,b=d(function(f){return f.slice().reverse().map(function(y){return-y}).concat([0]).concat(f)},String);function g(f,y,l,x){var c=l("bgcolor");x.bgColor=u.combine(c,x.paper_bgcolor);var M=e(x.fullData,s.name,x.id),w=x.layoutOut,p;function _(Y,ee){return l(p+"."+Y,ee)}for(var h=0;h<o.length;h++){p=o[h],m.isPlainObject(f[p])||(f[p]={});var L=f[p],E=A.newContainer(y,p);E._id=E._name=p,E._attr=x.id+"."+p,E._traceIndices=M.map(function(Y){return Y._expandedIndex});var S=_("visible");if(E.type="linear",r(E,w),a(L,E,_,E.type),S){var P=p==="realaxis";if(P&&_("side"),P)_("tickvals");else{var F=b(y.realaxis.tickvals||v.realaxis.tickvals.dflt);_("tickvals",F)}var I,D,R,O,z=x.font||{};S&&(I=_("color"),D=I===L.color?I:z.color,R=z.size,O=z.family),i(L,E,_,E.type,{noTicklabelstep:!0,noAng:!P,noExp:!0,font:{color:D,size:R,family:O}}),m.coerce2(f,y,v,p+".ticklen"),m.coerce2(f,y,v,p+".tickwidth"),m.coerce2(f,y,v,p+".tickcolor",y.color);var G=_("ticks");G||(delete y[p].ticklen,delete y[p].tickwidth,delete y[p].tickcolor),n(L,E,_,{dfltColor:I,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v[p]}),_("layer")}_("hoverformat"),delete E.type,E._input=L}}N.exports=function(y,l,x){T(y,l,x,{noUirevision:!0,type:s.name,attributes:v,handleDefaults:g,font:l.font,paper_bgcolor:l.paper_bgcolor,fullData:x,layoutOut:l})};function d(f,y){var l={};return function(x){var c=y?y(x):x;if(c in l)return l[c];var M=f(x);return l[c]=M,M}}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(t,N,V){var m=t("../lib"),u=t("../plot_api/plot_template"),A=t("./domain").defaults;N.exports=function(e,a,i,n){var r=n.type,v=n.attributes,s=n.handleDefaults,o=n.partition||"x",b=a._subplots[r],g=b.length,d=g&&b[0].replace(/\d+$/,""),f,y;function l(w,p){return m.coerce(f,y,v,w,p)}for(var x=0;x<g;x++){var c=b[x];e[c]?f=e[c]:f=e[c]={},y=u.newContainer(a,c,d),n.noUirevision||l("uirevision",a.uirevision);var M={};M[o]=[x/g,(x+1)/g],A(y,a,l,M),n.id=c,s(f,y,l,n)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(t,N,V){var m=t("../constants/docs");m.FORMAT_LINK,m.DATE_FORMAT_LINK;function u(A){var T=A.description?" "+A.description:"",e=A.keys||[];if(e.length>0){for(var a=[],i=0;i<e.length;i++)a[i]="`"+e[i]+"`";T=T+"Finally, the template string has access to ",e.length===1?T="variable "+a[0]:T="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return T}V.hovertemplateAttrs=function(A,T){A=A||{},T=T||{},u(T);var e={valType:"string",dflt:"",editType:A.editType||"none"};return A.arrayOk!==!1&&(e.arrayOk=!0),e},V.texttemplateAttrs=function(A,T){A=A||{},T=T||{},u(T);var e={valType:"string",dflt:"",editType:A.editType||"calc"};return A.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(t,N,V){var m=t("./ternary"),u=t("../../plots/get_data").getSubplotCalcData,A=t("../../lib").counterRegex,T="ternary";V.name=T;var e=V.attr="subplot";V.idRoot=T,V.idRegex=V.attrRegex=A(T);var a=V.attributes={};a[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.plot=function(n){for(var r=n._fullLayout,v=n.calcdata,s=r._subplots[T],o=0;o<s.length;o++){var b=s[o],g=u(v,T,b),d=r[b]._subplot;d||(d=new m({id:b,graphDiv:n,container:r._ternarylayer.node()},r),r[b]._subplot=d),d.plot(g,r,n._promises)}},V.clean=function(i,n,r,v){for(var s=v._subplots[T]||[],o=0;o<s.length;o++){var b=s[o],g=v[b]._subplot;!n[b]&&!!g&&(g.plotContainer.remove(),g.clipDef.remove(),g.clipDefRelative.remove(),g.layers["a-title"].remove(),g.layers["b-title"].remove(),g.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(t,N,V){var m=t("../../components/color/attributes"),u=t("../domain").attributes,A=t("../cartesian/layout_attributes"),T=t("../../plot_api/edit_types").overrideAll,e=t("../../lib/extend").extendFlat,a={title:{text:A.title.text,font:A.title.font},color:A.color,tickmode:A.tickmode,nticks:e({},A.nticks,{dflt:6,min:1}),tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickfont:A.tickfont,tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,hoverformat:A.hoverformat,showline:e({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:e({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash,layer:A.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}},i=N.exports=T({domain:u({name:"ternary"}),bgcolor:{valType:"color",dflt:m.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(t,N,V){var m=t("../../components/color"),u=t("../../plot_api/plot_template"),A=t("../../lib"),T=t("../subplot_defaults"),e=t("../cartesian/tick_label_defaults"),a=t("../cartesian/prefix_suffix_defaults"),i=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_value_defaults"),r=t("../cartesian/line_grid_defaults"),v=t("./layout_attributes"),s=["aaxis","baxis","caxis"];N.exports=function(d,f,y){T(d,f,y,{type:"ternary",attributes:v,handleDefaults:o,font:f.font,paper_bgcolor:f.paper_bgcolor})};function o(g,d,f,y){var l=f("bgcolor"),x=f("sum");y.bgColor=m.combine(l,y.paper_bgcolor);for(var c,M,w,p=0;p<s.length;p++)c=s[p],M=g[c]||{},w=u.newContainer(d,c),w._name=c,b(M,w,y,d);var _=d.aaxis,h=d.baxis,L=d.caxis;_.min+h.min+L.min>=x&&(_.min=0,h.min=0,L.min=0,g.aaxis&&delete g.aaxis.min,g.baxis&&delete g.baxis.min,g.caxis&&delete g.caxis.min)}function b(g,d,f,y){var l=v[d._name];function x(E,S){return A.coerce(g,d,l,E,S)}x("uirevision",y.uirevision),d.type="linear";var c=x("color"),M=c!==l.color.dflt?c:f.font.color,w=d._name,p=w.charAt(0).toUpperCase(),_="Component "+p,h=x("title.text",_);d._hovertitle=h===_?h:p,A.coerceFont(x,"title.font",{family:f.font.family,size:A.bigFont(f.font.size),color:M}),x("min"),n(g,d,x,"linear"),a(g,d,x,"linear"),e(g,d,x,"linear"),i(g,d,x,{outerTicks:!0});var L=x("showticklabels");L&&(A.coerceFont(x,"tickfont",{family:f.font.family,size:f.font.size,color:M}),x("tickangle"),x("tickformat")),r(g,d,x,{dfltColor:c,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),x("hoverformat"),x("layer")}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(t,N,V){var m=t("@plotly/d3"),u=t("tinycolor2"),A=t("../../registry"),T=t("../../lib"),e=T.strTranslate,a=T._,i=t("../../components/color"),n=t("../../components/drawing"),r=t("../cartesian/set_convert"),v=t("../../lib/extend").extendFlat,s=t("../plots"),o=t("../cartesian/axes"),b=t("../../components/dragelement"),g=t("../../components/fx"),d=t("../../components/dragelement/helpers"),f=d.freeMode,y=d.rectMode,l=t("../../components/titles"),x=t("../../components/selections").prepSelect,c=t("../../components/selections").selectOnClick,M=t("../../components/selections").clearOutline,w=t("../../components/selections").clearSelectionsCache,p=t("../cartesian/constants");function _(z,G){this.id=z.id,this.graphDiv=z.graphDiv,this.init(G),this.makeFramework(G),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}N.exports=_;var h=_.prototype;h.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},h.plot=function(z,G){var Y=this,ee=G[Y.id],j=G._size;Y._hasClipOnAxisFalse=!1;for(var X=0;X<z.length;X++){var ie=z[X][0].trace;if(ie.cliponaxis===!1){Y._hasClipOnAxisFalse=!0;break}}Y.updateLayers(ee),Y.adjustLayout(ee,j),s.generalUpdatePerTraceModule(Y.graphDiv,Y,z,ee),Y.layers.plotbg.select("path").call(i.fill,ee.bgcolor)},h.makeFramework=function(z){var G=this,Y=G.graphDiv,ee=z[G.id],j=G.clipId="clip"+G.layoutId+G.id,X=G.clipIdRelative="clip-relative"+G.layoutId+G.id;G.clipDef=T.ensureSingleById(z._clips,"clipPath",j,function(ie){ie.append("path").attr("d","M0,0Z")}),G.clipDefRelative=T.ensureSingleById(z._clips,"clipPath",X,function(ie){ie.append("path").attr("d","M0,0Z")}),G.plotContainer=T.ensureSingle(G.container,"g",G.id),G.updateLayers(ee),n.setClipUrl(G.layers.backplot,j,Y),n.setClipUrl(G.layers.grids,j,Y)},h.updateLayers=function(z){var G=this,Y=G.layers,ee=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&ee.push("aaxis","aline"),z.baxis.layer==="below traces"&&ee.push("baxis","bline"),z.caxis.layer==="below traces"&&ee.push("caxis","cline"),ee.push("frontplot"),z.aaxis.layer==="above traces"&&ee.push("aaxis","aline"),z.baxis.layer==="above traces"&&ee.push("baxis","bline"),z.caxis.layer==="above traces"&&ee.push("caxis","cline");var j=G.plotContainer.selectAll("g.toplevel").data(ee,String),X=["agrid","bgrid","cgrid"];j.enter().append("g").attr("class",function(ie){return"toplevel "+ie}).each(function(ie){var he=m.select(this);Y[ie]=he,ie==="frontplot"?he.append("g").classed("scatterlayer",!0):ie==="backplot"?he.append("g").classed("maplayer",!0):ie==="plotbg"?he.append("path").attr("d","M0,0Z"):ie==="aline"||ie==="bline"||ie==="cline"?he.append("path"):ie==="grids"&&X.forEach(function(K){Y[K]=he.append("g").classed("grid "+K,!0)})}),j.order()};var L=Math.sqrt(4/3);h.adjustLayout=function(z,G){var Y=this,ee=z.domain,j=(ee.x[0]+ee.x[1])/2,X=(ee.y[0]+ee.y[1])/2,ie=ee.x[1]-ee.x[0],he=ee.y[1]-ee.y[0],K=ie*G.w,$=he*G.h,U=z.sum,H=z.aaxis.min,q=z.baxis.min,re=z.caxis.min,Z,Q,oe,se,ae,le;K>L*$?(se=$,oe=se*L):(oe=K,se=oe/L),ae=ie*oe/K,le=he*se/$,Z=G.l+G.w*j-oe/2,Q=G.t+G.h*(1-X)-se/2,Y.x0=Z,Y.y0=Q,Y.w=oe,Y.h=se,Y.sum=U,Y.xaxis={type:"linear",range:[H+2*re-U,U-H-2*q],domain:[j-ae/2,j+ae/2],_id:"x"},r(Y.xaxis,Y.graphDiv._fullLayout),Y.xaxis.setScale(),Y.xaxis.isPtWithinRange=function(Le){return Le.a>=Y.aaxis.range[0]&&Le.a<=Y.aaxis.range[1]&&Le.b>=Y.baxis.range[1]&&Le.b<=Y.baxis.range[0]&&Le.c>=Y.caxis.range[1]&&Le.c<=Y.caxis.range[0]},Y.yaxis={type:"linear",range:[H,U-q-re],domain:[X-le/2,X+le/2],_id:"y"},r(Y.yaxis,Y.graphDiv._fullLayout),Y.yaxis.setScale(),Y.yaxis.isPtWithinRange=function(){return!0};var _e=Y.yaxis.domain[0],fe=Y.aaxis=v({},z.aaxis,{range:[H,U-q-re],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[_e,_e+le*L],anchor:"free",position:0,_id:"y",_length:oe});r(fe,Y.graphDiv._fullLayout),fe.setScale();var me=Y.baxis=v({},z.baxis,{range:[U-H-re,q],side:"bottom",domain:Y.xaxis.domain,anchor:"free",position:0,_id:"x",_length:oe});r(me,Y.graphDiv._fullLayout),me.setScale();var xe=Y.caxis=v({},z.caxis,{range:[U-H-q,re],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[_e,_e+le*L],anchor:"free",position:0,_id:"y",_length:oe});r(xe,Y.graphDiv._fullLayout),xe.setScale();var ye="M"+Z+","+(Q+se)+"h"+oe+"l-"+oe/2+",-"+se+"Z";Y.clipDef.select("path").attr("d",ye),Y.layers.plotbg.select("path").attr("d",ye);var be="M0,"+se+"h"+oe+"l-"+oe/2+",-"+se+"Z";Y.clipDefRelative.select("path").attr("d",be);var ke=e(Z,Q);Y.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ke),Y.clipDefRelative.select("path").attr("transform",null);var De=e(Z-me._offset,Q+se);Y.layers.baxis.attr("transform",De),Y.layers.bgrid.attr("transform",De);var He=e(Z+oe/2,Q)+"rotate(30)"+e(0,-fe._offset);Y.layers.aaxis.attr("transform",He),Y.layers.agrid.attr("transform",He);var Ae=e(Z+oe/2,Q)+"rotate(-30)"+e(0,-xe._offset);Y.layers.caxis.attr("transform",Ae),Y.layers.cgrid.attr("transform",Ae),Y.drawAxes(!0),Y.layers.aline.select("path").attr("d",fe.showline?"M"+Z+","+(Q+se)+"l"+oe/2+",-"+se:"M0,0").call(i.stroke,fe.linecolor||"#000").style("stroke-width",(fe.linewidth||0)+"px"),Y.layers.bline.select("path").attr("d",me.showline?"M"+Z+","+(Q+se)+"h"+oe:"M0,0").call(i.stroke,me.linecolor||"#000").style("stroke-width",(me.linewidth||0)+"px"),Y.layers.cline.select("path").attr("d",xe.showline?"M"+(Z+oe/2)+","+Q+"l"+oe/2+","+se:"M0,0").call(i.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),Y.graphDiv._context.staticPlot||Y.initInteractions(),n.setClipUrl(Y.layers.frontplot,Y._hasClipOnAxisFalse?null:Y.clipId,Y.graphDiv)},h.drawAxes=function(z){var G=this,Y=G.graphDiv,ee=G.id.substr(7)+"title",j=G.layers,X=G.aaxis,ie=G.baxis,he=G.caxis;if(G.drawAx(X),G.drawAx(ie),G.drawAx(he),z){var K=Math.max(X.showticklabels?X.tickfont.size/2:0,(he.showticklabels?he.tickfont.size*.75:0)+(he.ticks==="outside"?he.ticklen*.87:0)),$=(ie.showticklabels?ie.tickfont.size:0)+(ie.ticks==="outside"?ie.ticklen:0)+3;j["a-title"]=l.draw(Y,"a"+ee,{propContainer:X,propName:G.id+".aaxis.title",placeholder:a(Y,"Click to enter Component A title"),attributes:{x:G.x0+G.w/2,y:G.y0-X.title.font.size/3-K,"text-anchor":"middle"}}),j["b-title"]=l.draw(Y,"b"+ee,{propContainer:ie,propName:G.id+".baxis.title",placeholder:a(Y,"Click to enter Component B title"),attributes:{x:G.x0-$,y:G.y0+G.h+ie.title.font.size*.83+$,"text-anchor":"middle"}}),j["c-title"]=l.draw(Y,"c"+ee,{propContainer:he,propName:G.id+".caxis.title",placeholder:a(Y,"Click to enter Component C title"),attributes:{x:G.x0+G.w+$,y:G.y0+G.h+he.title.font.size*.83+$,"text-anchor":"middle"}})}},h.drawAx=function(z){var G=this,Y=G.graphDiv,ee=z._name,j=ee.charAt(0),X=z._id,ie=G.layers[ee],he=30,K=j+"tickLayout",$=E(z);G[K]!==$&&(ie.selectAll("."+X+"tick").remove(),G[K]=$),z.setScale();var U=o.calcTicks(z),H=o.clipEnds(z,U),q=o.makeTransTickFn(z),re=o.getTickSigns(z)[2],Z=T.deg2rad(he),Q=re*(z.linewidth||1)/2,oe=re*z.ticklen,se=G.w,ae=G.h,le=j==="b"?"M0,"+Q+"l"+Math.sin(Z)*oe+","+Math.cos(Z)*oe:"M"+Q+",0l"+Math.cos(Z)*oe+","+-Math.sin(Z)*oe,_e={a:"M0,0l"+ae+",-"+se/2,b:"M0,0l-"+se/2+",-"+ae,c:"M0,0l-"+ae+","+se/2}[j];o.drawTicks(Y,z,{vals:z.ticks==="inside"?H:U,layer:ie,path:le,transFn:q,crisp:!1}),o.drawGrid(Y,z,{vals:H,layer:G.layers[j+"grid"],path:_e,transFn:q,crisp:!1}),o.drawLabels(Y,z,{vals:U,layer:ie,transFn:q,labelFns:o.makeLabelFns(z,0,he)})};function E(z){return z.ticks+String(z.ticklen)+String(z.showticklabels)}var S=p.MINZOOM/2+.87,P="m-0.87,.5h"+S+"v3h-"+(S+5.2)+"l"+(S/2+2.6)+",-"+(S*.87+4.5)+"l2.6,1.5l-"+S/2+","+S*.87+"Z",F="m0.87,.5h-"+S+"v3h"+(S+5.2)+"l-"+(S/2+2.6)+",-"+(S*.87+4.5)+"l-2.6,1.5l"+S/2+","+S*.87+"Z",I="m0,1l"+S/2+","+S*.87+"l2.6,-1.5l-"+(S/2+2.6)+",-"+(S*.87+4.5)+"l-"+(S/2+2.6)+","+(S*.87+4.5)+"l2.6,1.5l"+S/2+",-"+S*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;h.clearOutline=function(){w(this.dragOptions),M(this.dragOptions.gd)},h.initInteractions=function(){var z=this,G=z.layers.plotbg.select("path").node(),Y=z.graphDiv,ee=Y._fullLayout._zoomlayer,j,X;this.dragOptions={element:G,gd:Y,plotinfo:{id:z.id,domain:Y._fullLayout[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis},subplot:z.id,prepFn:function(De,He,Ae){z.dragOptions.xaxes=[z.xaxis],z.dragOptions.yaxes=[z.yaxis],j=Y._fullLayout._invScaleX,X=Y._fullLayout._invScaleY;var Le=z.dragOptions.dragmode=Y._fullLayout.dragmode;f(Le)?z.dragOptions.minDrag=1:z.dragOptions.minDrag=void 0,Le==="zoom"?(z.dragOptions.moveFn=me,z.dragOptions.clickFn=se,z.dragOptions.doneFn=xe,ae(De,He,Ae)):Le==="pan"?(z.dragOptions.moveFn=be,z.dragOptions.clickFn=se,z.dragOptions.doneFn=ke,ye(),z.clearOutline(Y)):(y(Le)||f(Le))&&x(De,He,Ae,z.dragOptions,Le)}};var ie,he,K,$,U,H,q,re,Z,Q;function oe(De){var He={};return He[z.id+".aaxis.min"]=De.a,He[z.id+".baxis.min"]=De.b,He[z.id+".caxis.min"]=De.c,He}function se(De,He){var Ae=Y._fullLayout.clickmode;O(Y),De===2&&(Y.emit("plotly_doubleclick",null),A.call("_guiRelayout",Y,oe({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&De===1&&c(He,Y,[z.xaxis],[z.yaxis],z.id,z.dragOptions),Ae.indexOf("event")>-1&&g.click(Y,He,z.id)}function ae(De,He,Ae){var Le=G.getBoundingClientRect();ie=He-Le.left,he=Ae-Le.top,Y._fullLayout._calcInverseTransform(Y);var Ze=Y._fullLayout._invTransform,We=T.apply3DTransform(Ze)(ie,he);ie=We[0],he=We[1],K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},U=K,$=z.aaxis.range[1]-K.a,H=u(z.graphDiv._fullLayout[z.id].bgcolor).getLuminance(),q="M0,"+z.h+"L"+z.w/2+", 0L"+z.w+","+z.h+"Z",re=!1,Z=ee.append("path").attr("class","zoombox").attr("transform",e(z.x0,z.y0)).style({fill:H>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),Q=ee.append("path").attr("class","zoombox-corners").attr("transform",e(z.x0,z.y0)).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z.clearOutline(Y)}function le(De,He){return 1-He/z.h}function _e(De,He){return 1-(De+(z.h-He)/Math.sqrt(3))/z.w}function fe(De,He){return(De-(z.h-He)/Math.sqrt(3))/z.w}function me(De,He){var Ae=ie+De*j,Le=he+He*X,Ze=Math.max(0,Math.min(1,le(ie,he),le(Ae,Le))),We=Math.max(0,Math.min(1,_e(ie,he),_e(Ae,Le))),ze=Math.max(0,Math.min(1,fe(ie,he),fe(Ae,Le))),Ie=(Ze/2+ze)*z.w,Ve=(1-Ze/2-We)*z.w,dt=(Ie+Ve)/2,Ft=Ve-Ie,Qt=(1-Ze)*z.h,Ot=Qt-Ft/L;Ft<p.MINZOOM?(U=K,Z.attr("d",q),Q.attr("d","M0,0Z")):(U={a:K.a+Ze*$,b:K.b+We*$,c:K.c+ze*$},Z.attr("d",q+"M"+Ie+","+Qt+"H"+Ve+"L"+dt+","+Ot+"L"+Ie+","+Qt+"Z"),Q.attr("d","M"+ie+","+he+D+"M"+Ie+","+Qt+P+"M"+Ve+","+Qt+F+"M"+dt+","+Ot+I)),re||(Z.transition().style("fill",H>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),re=!0),Y.emit("plotly_relayouting",oe(U))}function xe(){O(Y),U!==K&&(A.call("_guiRelayout",Y,oe(U)),R&&Y.data&&Y._context.showTips&&(T.notifier(a(Y,"Double-click to zoom back out"),"long"),R=!1))}function ye(){K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},U=K}function be(De,He){var Ae=De/z.xaxis._m,Le=He/z.yaxis._m;U={a:K.a-Le,b:K.b+(Ae+Le)/2,c:K.c-(Ae-Le)/2};var Ze=[U.a,U.b,U.c].sort(T.sorterAsc),We={a:Ze.indexOf(U.a),b:Ze.indexOf(U.b),c:Ze.indexOf(U.c)};Ze[0]<0&&(Ze[1]+Ze[0]/2<0?(Ze[2]+=Ze[0]+Ze[1],Ze[0]=Ze[1]=0):(Ze[2]+=Ze[0]/2,Ze[1]+=Ze[0]/2,Ze[0]=0),U={a:Ze[We.a],b:Ze[We.b],c:Ze[We.c]},He=(K.a-U.a)*z.yaxis._m,De=(K.c-U.c-K.b+U.b)*z.xaxis._m);var ze=e(z.x0+De,z.y0+He);z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ze);var Ie=e(-De,-He);z.clipDefRelative.select("path").attr("transform",Ie),z.aaxis.range=[U.a,z.sum-U.b-U.c],z.baxis.range=[z.sum-U.a-U.c,U.b],z.caxis.range=[z.sum-U.a-U.b,U.c],z.drawAxes(!1),z._hasClipOnAxisFalse&&z.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,z),Y.emit("plotly_relayouting",oe(U))}function ke(){A.call("_guiRelayout",Y,oe(U))}G.onmousemove=function(De){g.hover(Y,De,z.id),Y._fullLayout._lasthover=G,Y._fullLayout._hoversubplot=z.id},G.onmouseout=function(De){Y._dragging||b.unhover(Y,De)},b.init(this.dragOptions)};function O(z){m.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(t,N,V){var m=t("./lib/loggers"),u=t("./lib/noop"),A=t("./lib/push_unique"),T=t("./lib/is_plain_object"),e=t("./lib/dom").addStyleRule,a=t("./lib/extend"),i=t("./plots/attributes"),n=t("./plots/layout_attributes"),r=a.extendFlat,v=a.extendDeepAll;V.modules={},V.allCategories={},V.allTypes=[],V.subplotsRegistry={},V.transformsRegistry={},V.componentsRegistry={},V.layoutArrayContainers=[],V.layoutArrayRegexes=[],V.traceLayoutAttributes={},V.localeRegistry={},V.apiMethodRegistry={},V.collectableSubplotTypes=null,V.register=function(w){if(V.collectableSubplotTypes=null,w)w&&!Array.isArray(w)&&(w=[w]);else throw new Error("No argument passed to Plotly.register.");for(var p=0;p<w.length;p++){var _=w[p];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":s(_);break;case"transform":g(_);break;case"component":b(_);break;case"locale":d(_);break;case"apiMethod":var h=_.name;V.apiMethodRegistry[h]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},V.getModule=function(M){var w=V.modules[c(M)];return w?w._module:!1},V.traceIs=function(M,w){if(M=c(M),M==="various")return!1;var p=V.modules[M];return p||(M&&m.log("Unrecognized trace type "+M+"."),p=V.modules[i.type.dflt]),!!p.categories[w]},V.getTransformIndices=function(M,w){for(var p=[],_=M.transforms||[],h=0;h<_.length;h++)_[h].type===w&&p.push(h);return p},V.hasTransform=function(M,w){for(var p=M.transforms||[],_=0;_<p.length;_++)if(p[_].type===w)return!0;return!1},V.getComponentMethod=function(M,w){var p=V.componentsRegistry[M];return p&&p[w]||u},V.call=function(){var M=arguments[0],w=[].slice.call(arguments,1);return V.apiMethodRegistry[M].apply(null,w)};function s(M){var w=M.name,p=M.categories,_=M.meta;if(V.modules[w]){m.log("Type "+w+" already registered");return}V.subplotsRegistry[M.basePlotModule.name]||o(M.basePlotModule);for(var h={},L=0;L<p.length;L++)h[p[L]]=!0,V.allCategories[p[L]]=!0;V.modules[w]={_module:M,categories:h},_&&Object.keys(_).length&&(V.modules[w].meta=_),V.allTypes.push(w);for(var E in V.componentsRegistry)y(E,w);M.layoutAttributes&&r(V.traceLayoutAttributes,M.layoutAttributes);var S=M.basePlotModule,P=S.name;if(P==="mapbox"){var F=S.constants.styleRules;for(var I in F)e(".js-plotly-plot .plotly .mapboxgl-"+I,F[I])}(P==="geo"||P==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function o(M){var w=M.name;if(V.subplotsRegistry[w]){m.log("Plot type "+w+" already registered.");return}f(M),V.subplotsRegistry[w]=M;for(var p in V.componentsRegistry)x(p,M.name)}function b(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var w=M.name;V.componentsRegistry[w]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&A(V.layoutArrayContainers,w),f(M));for(var p in V.modules)y(w,p);for(var _ in V.subplotsRegistry)x(w,_);for(var h in V.transformsRegistry)l(w,h);M.schema&&M.schema.layout&&v(n,M.schema.layout)}function g(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+M.name,p=typeof M.transform=="function",_=typeof M.calcTransform=="function";if(!p&&!_)throw new Error(w+" is missing a *transform* or *calcTransform* method.");p&&_&&m.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(M.attributes)||m.log(w+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&m.log(w+" registered without a *supplyDefaults* method."),V.transformsRegistry[M.name]=M;for(var h in V.componentsRegistry)l(h,M.name)}function d(M){var w=M.name,p=w.split("-")[0],_=M.dictionary,h=M.format,L=_&&Object.keys(_).length,E=h&&Object.keys(h).length,S=V.localeRegistry,P=S[w];if(P||(S[w]=P={}),p!==w){var F=S[p];F||(S[p]=F={}),L&&F.dictionary===P.dictionary&&(F.dictionary=_),E&&F.format===P.format&&(F.format=h)}L&&(P.dictionary=_),E&&(P.format=h)}function f(M){if(M.layoutAttributes){var w=M.layoutAttributes._arrayAttrRegexps;if(w)for(var p=0;p<w.length;p++)A(V.layoutArrayRegexes,w[p])}}function y(M,w){var p=V.componentsRegistry[M].schema;if(!(!p||!p.traces)){var _=p.traces[w];_&&v(V.modules[w]._module.attributes,_)}}function l(M,w){var p=V.componentsRegistry[M].schema;if(!(!p||!p.transforms)){var _=p.transforms[w];_&&v(V.transformsRegistry[w].attributes,_)}}function x(M,w){var p=V.componentsRegistry[M].schema;if(!(!p||!p.subplots)){var _=V.subplotsRegistry[w],h=_.layoutAttributes,L=_.attr==="subplot"?_.name:_.attr;Array.isArray(L)&&(L=L[0]);var E=p.subplots[L];h&&E&&v(h,E)}}function c(M){return typeof M=="object"&&(M=M.type),M}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(t,N,V){var m=t("../registry"),u=t("../lib"),A=u.extendFlat,T=u.extendDeep;function e(i){var n;switch(i){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}function a(i){var n=["xaxis","yaxis","zaxis"];return n.indexOf(i.slice(0,5))>-1}N.exports=function(n,r){var v,s=n.data,o=n.layout,b=T([],s),g=T({},o,e(r.tileClass)),d=n._context||{};if(r.width&&(g.width=r.width),r.height&&(g.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){g.annotations=[];var f=Object.keys(g);for(v=0;v<f.length;v++)a(f[v])&&(g[f[v]].title={text:""});for(v=0;v<b.length;v++){var y=b[v];y.showscale=!1,y.marker&&(y.marker.showscale=!1),m.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(r.annotations))for(v=0;v<r.annotations.length;v++)g.annotations.push(r.annotations[v]);var l=Object.keys(g).filter(function(p){return p.match(/^scene\d*$/)});if(l.length){var x={};for(r.tileClass==="thumbnail"&&(x={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),v=0;v<l.length;v++){var c=g[l[v]];c.xaxis||(c.xaxis={}),c.yaxis||(c.yaxis={}),c.zaxis||(c.zaxis={}),A(c.xaxis,x),A(c.yaxis,x),A(c.zaxis,x),c._scene=null}}var M=document.createElement("div");r.tileClass&&(M.className=r.tileClass);var w={gd:M,td:M,layout:g,data:b,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return r.setBackground!=="transparent"&&(w.config.setBackground=r.setBackground||"opaque"),w.gd.defaultLayout=e(r.tileClass),w}},{"../lib":515,"../registry":647}],649:[function(t,N,V){var m=t("../lib"),u=t("../plot_api/to_image"),A=t("./filesaver"),T=t("./helpers");function e(a,i){var n;return m.isPlainObject(a)||(n=m.getGraphDiv(a)),i=i||{},i.format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(r,v){n&&n._snapshotInProgress&&v(new Error("Snapshotting already in progress.")),m.isIE()&&i.format!=="svg"&&v(new Error(T.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var s=u(a,i),o=i.filename||a.fn||"newplot";o+="."+i.format.replace("-","."),s.then(function(b){return n&&(n._snapshotInProgress=!1),A(b,o,i.format)}).then(function(b){r(b)}).catch(function(b){n&&(n._snapshotInProgress=!1),v(b)})})}N.exports=e},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(t,N,V){var m=t("../lib"),u=t("./helpers");function A(T,e,a){var i=document.createElement("a"),n="download"in i,r=new Promise(function(v,s){var o,b;if(m.isIE())return o=u.createBlob(T,"svg"),window.navigator.msSaveBlob(o,e),o=null,v(e);if(n)return o=u.createBlob(T,a),b=u.createObjectURL(o),i.href=b,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),u.revokeObjectURL(b),o=null,v(e);if(m.isSafari()){var g=a==="svg"?",":";base64,";return u.octetStream(g+encodeURIComponent(T)),v(e)}s(new Error("download error"))});return r}N.exports=A},{"../lib":515,"./helpers":651}],651:[function(t,N,V){var m=t("../registry");V.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},V.getRedrawFunc=function(T){return function(){m.getComponentMethod("colorbar","draw")(T)}},V.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},V.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var u=window.URL||window.webkitURL;V.createObjectURL=function(T){return u.createObjectURL(T)},V.revokeObjectURL=function(T){return u.revokeObjectURL(T)},V.createBlob=function(T,e){if(e==="svg")return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([T],{type:"application/json;charset=utf-8"});var a=A(window.atob(T));return new window.Blob([a],{type:"image/"+e})},V.octetStream=function(T){document.location.href="data:application/octet-stream"+T};function A(T){for(var e=T.length,a=new ArrayBuffer(e),i=new Uint8Array(a),n=0;n<e;n++)i[n]=T.charCodeAt(n);return a}V.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,V.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(t,N,V){var m=t("./helpers"),u={getDelay:m.getDelay,getRedrawFunc:m.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};N.exports=u},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(t,N,V){var m=t("../lib"),u=t("events").EventEmitter,A=t("./helpers");function T(e){var a=e.emitter||new u,i=new Promise(function(n,r){var v=window.Image,s=e.svg,o=e.format||"png";if(m.isIE()&&o!=="svg"){var b=new Error(A.MSG_IE_BAD_FORMAT);return r(b),e.promise?i:a.emit("error",b)}var g=e.canvas,d=e.scale||1,f=e.width||300,y=e.height||150,l=d*f,x=d*y,c=g.getContext("2d",{willReadFrequently:!0}),M=new v,w,p;o==="svg"||m.isSafari()?p=A.encodeSVG(s):(w=A.createBlob(s,"svg"),p=A.createObjectURL(w)),g.width=l,g.height=x,M.onload=function(){var _;switch(w=null,A.revokeObjectURL(p),o!=="svg"&&c.drawImage(M,0,0,l,x),o){case"jpeg":_=g.toDataURL("image/jpeg");break;case"png":_=g.toDataURL("image/png");break;case"webp":_=g.toDataURL("image/webp");break;case"svg":_=p;break;default:var h="Image format is not jpeg, png, svg or webp.";if(r(new Error(h)),!e.promise)return a.emit("error",h)}n(_),e.promise||a.emit("success",_)},M.onerror=function(_){if(w=null,A.revokeObjectURL(p),r(_),!e.promise)return a.emit("error",_)},M.src=p});return e.promise?i:a}N.exports=T},{"../lib":515,"./helpers":651,events:84}],654:[function(t,N,V){var m=t("events").EventEmitter,u=t("../registry"),A=t("../lib"),T=t("./helpers"),e=t("./cloneplot"),a=t("./tosvg"),i=t("./svgtoimg");function n(r,v){var s=new m,o=e(r,{format:"png"}),b=o.gd;b.style.position="absolute",b.style.left="-5000px",document.body.appendChild(b);function g(){var f=T.getDelay(b._fullLayout);setTimeout(function(){var y=a(b),l=document.createElement("canvas");l.id=A.randstr(),s=i({format:v.format,width:b._fullLayout.width,height:b._fullLayout.height,canvas:l,emitter:s,svg:y}),s.clean=function(){b&&document.body.removeChild(b)}},f)}var d=T.getRedrawFunc(b);return u.call("_doPlot",b,o.data,o.layout,o.config).then(d).then(g).catch(function(f){s.emit("error",f)}),s}N.exports=n},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(t,N,V){var m=t("@plotly/d3"),u=t("../lib"),A=t("../components/drawing"),T=t("../components/color"),e=t("../constants/xmlns_namespaces"),a=/"/g,i="TOBESTRIPPED",n=new RegExp('("'+i+")|("+i+'")',"g");function r(s){var o=m.select("body").append("div").style({display:"none"}).html(""),b=s.replace(/(&[^;]*;)/gi,function(g){return g==="&lt;"?"&#60;":g==="&rt;"?"&#62;":g.indexOf("<")!==-1||g.indexOf(">")!==-1?"":o.html(g).text()});return o.remove(),b}function v(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}N.exports=function(o,b,g){var d=o._fullLayout,f=d._paper,y=d._toppaper,l=d.width,x=d.height,c;f.insert("rect",":first-child").call(A.setRect,0,0,l,x).call(T.fill,d.paper_bgcolor);var M=d._basePlotModules||[];for(c=0;c<M.length;c++){var w=M[c];w.toSVG&&w.toSVG(o)}if(y){var p=y.node().childNodes,_=Array.prototype.slice.call(p);for(c=0;c<_.length;c++){var h=_[c];h.childNodes.length&&f.node().appendChild(h)}}d._draggers&&d._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=m.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){E.remove();return}else E.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&E.style("font-family",S.replace(a,i))}),f.selectAll(".gradient_filled,.pattern_filled").each(function(){var E=m.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&E.style("fill",S.replace(a,i));var P=this.style.stroke;P&&P.indexOf("url(")!==-1&&E.style("stroke",P.replace(a,i))}),(b==="pdf"||b==="eps")&&f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(e.xmlns,"xmlns",e.svg),f.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),b==="svg"&&g&&(f.attr("width",g*l),f.attr("height",g*x),f.attr("viewBox","0 0 "+l+" "+x));var L=new window.XMLSerializer().serializeToString(f.node());return L=r(L),L=v(L),L=L.replace(n,"'"),u.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;m.mergeArray(T.text,A,"tx"),m.mergeArray(T.hovertext,A,"htx");var a=T.marker;if(a){m.mergeArray(a.opacity,A,"mo",!0),m.mergeArray(a.color,A,"mc");var i=a.line;i&&(m.mergeArray(i.color,A,"mlc"),m.mergeArrayCastPositive(i.width,A,"mlw"))}}},{"../../lib":515}],657:[function(t,N,V){var m=t("../scatter/attributes"),u=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),a=t("../../plots/font_attributes"),i=t("./constants"),n=t("../../components/drawing/attributes").pattern,r=t("../../lib/extend").extendFlat,v=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=m.marker,o=s.line,b=r({},o.width,{dflt:0}),g=r({width:b,editType:"calc"},e("marker.line")),d=r({line:g,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:n});N.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:u("x"),yhoverformat:u("y"),text:m.text,texttemplate:T({editType:"plot"},{keys:i.eventDataKeys}),hovertext:m.hovertext,hovertemplate:A({},{keys:i.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},v,{}),insidetextfont:r({},v,{}),outsidetextfont:r({},v,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},m.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,color:m.selected.marker.color,editType:"style"},textfont:m.selected.textfont,editType:"style"},unselected:{marker:{opacity:m.unselected.marker.opacity,color:m.unselected.marker.color,editType:"style"},textfont:m.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../plots/cartesian/align_period"),A=t("../../components/colorscale/helpers").hasColorscale,T=t("../../components/colorscale/calc"),e=t("./arrays_to_calcdata"),a=t("../scatter/calc_selection");N.exports=function(n,r){var v=m.getFromId(n,r.xaxis||"x"),s=m.getFromId(n,r.yaxis||"y"),o,b,g,d,f,y,l={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(o=v.makeCalcdata(r,"x",l),g=s.makeCalcdata(r,"y"),d=u(r,s,"y",g),f=!!r.yperiodalignment,y="y"):(o=s.makeCalcdata(r,"y",l),g=v.makeCalcdata(r,"x"),d=u(r,v,"x",g),f=!!r.xperiodalignment,y="x"),b=d.vals;for(var x=Math.min(b.length,o.length),c=new Array(x),M=0;M<x;M++)c[M]={p:b[M],s:o[M]},f&&(c[M].orig_p=g[M],c[M][y+"End"]=d.ends[M],c[M][y+"Start"]=d.starts[M]),r.ids&&(c[M].id=String(r.ids[M]));return A(r,"marker")&&T(n,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),A(r,"marker.line")&&T(n,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(c,r),a(c,r),c}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(t,N,V){N.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib").isArrayOrTypedArray,A=t("../../constants/numerical").BADNUM,T=t("../../registry"),e=t("../../plots/cartesian/axes"),a=t("../../plots/cartesian/constraints").getAxisGroup,i=t("./sieve.js");function n(L,E){for(var S=E.xaxis,P=E.yaxis,F=L._fullLayout,I=L._fullData,D=L.calcdata,R=[],O=[],z=0;z<I.length;z++){var G=I[z];if(G.visible===!0&&T.traceIs(G,"bar")&&G.xaxis===S._id&&G.yaxis===P._id&&(G.orientation==="h"?R.push(D[z]):O.push(D[z]),G._computePh))for(var Y=L.calcdata[z],ee=0;ee<Y.length;ee++)typeof Y[ee].ph0=="function"&&(Y[ee].ph0=Y[ee].ph0()),typeof Y[ee].ph1=="function"&&(Y[ee].ph1=Y[ee].ph1())}var j={xCat:S.type==="category"||S.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};r(L,S,P,O,j),r(L,P,S,R,j)}function r(L,E,S,P,F){if(!!P.length){var I,D,R,O,z;switch(v(S,P),F.mode){case"overlay":s(E,S,P,F);break;case"group":for(I=[],D=[],R=0;R<P.length;R++)O=P[R],z=O[0].trace,z.offset===void 0?D.push(O):I.push(O);D.length&&o(L,E,S,D,F),I.length&&s(E,S,I,F);break;case"stack":case"relative":for(I=[],D=[],R=0;R<P.length;R++)O=P[R],z=O[0].trace,z.base===void 0?D.push(O):I.push(O);D.length&&b(L,E,S,D,F),I.length&&s(E,S,I,F);break}_(P,E)}}function v(L,E){var S,P;for(S=0;S<E.length;S++){var F=E[S],I=F[0].trace,D=I.type==="funnel"?I._base:I.base,R,O=I.orientation==="h"?I.xcalendar:I.ycalendar,z=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(u(D)){for(P=0;P<Math.min(D.length,F.length);P++)R=z(D[P],0,O),m(R)?(F[P].b=+R,F[P].hasB=1):F[P].b=0;for(;P<F.length;P++)F[P].b=0}else{R=z(D,0,O);var G=m(R);for(R=G?R:0,P=0;P<F.length;P++)F[P].b=R,G&&(F[P].hasB=1)}}}function s(L,E,S,P){for(var F=0;F<S.length;F++){var I=S[F],D=new i([I],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});g(L,D,P),P.norm?(M(D),p(E,D,P)):x(E,D)}}function o(L,E,S,P,F){var I=new i(P,{posAxis:E,sepNegVal:!1,overlapNoMerge:!F.norm});d(L,E,I,F),w(I,E),F.norm?(M(I),p(S,I,F)):x(S,I)}function b(L,E,S,P,F){var I=new i(P,{posAxis:E,sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});g(E,I,F),c(S,I,F);for(var D=0;D<P.length;D++)for(var R=P[D],O=0;O<R.length;O++){var z=R[O];if(z.s!==A){var G=z.b+z.s===I.get(z.p,z.s);G&&(z._outmost=!0)}}F.norm&&p(S,I,F)}function g(L,E,S){for(var P=E.minDiff,F=E.traces,I=P*(1-S.gap),D=I,R=D*(1-(S.groupgap||0)),O=-R/2,z=0;z<F.length;z++){var G=F[z],Y=G[0].t;Y.barwidth=R,Y.poffset=O,Y.bargroupwidth=I,Y.bardelta=P}E.binWidth=F[0][0].t.barwidth/100,f(E),y(L,E),l(L,E)}function d(L,E,S,P){for(var F=L._fullLayout,I=S.positions,D=S.distinctPositions,R=S.minDiff,O=S.traces,z=O.length,G=I.length!==D.length,Y=R*(1-P.gap),ee=a(F,E._id)+O[0][0].trace.orientation,j=F._alignmentOpts[ee]||{},X=0;X<z;X++){var ie=O[X],he=ie[0].trace,K=j[he.alignmentgroup]||{},$=Object.keys(K.offsetGroups||{}).length,U;$?U=Y/$:U=G?Y/z:Y;var H=U*(1-(P.groupgap||0)),q;$?q=((2*he._offsetIndex+1-$)*U-H)/2:q=G?((2*X+1-z)*U-H)/2:-H/2;var re=ie[0].t;re.barwidth=H,re.poffset=q,re.bargroupwidth=Y,re.bardelta=R}S.binWidth=O[0][0].t.barwidth/100,f(S),y(E,S),l(E,S,G)}function f(L){var E=L.traces,S,P;for(S=0;S<E.length;S++){var F=E[S],I=F[0],D=I.trace,R=I.t,O=D._offset||D.offset,z=R.poffset,G;if(u(O)){for(G=Array.prototype.slice.call(O,0,F.length),P=0;P<G.length;P++)m(G[P])||(G[P]=z);for(P=G.length;P<F.length;P++)G.push(z);R.poffset=G}else O!==void 0&&(R.poffset=O);var Y=D._width||D.width,ee=R.barwidth;if(u(Y)){var j=Array.prototype.slice.call(Y,0,F.length);for(P=0;P<j.length;P++)m(j[P])||(j[P]=ee);for(P=j.length;P<F.length;P++)j.push(ee);if(R.barwidth=j,O===void 0){for(G=[],P=0;P<F.length;P++)G.push(z+(ee-j[P])/2);R.poffset=G}}else Y!==void 0&&(R.barwidth=Y,O===void 0&&(R.poffset=z+(ee-Y)/2))}}function y(L,E){for(var S=E.traces,P=h(L),F=0;F<S.length;F++)for(var I=S[F],D=I[0].t,R=D.poffset,O=Array.isArray(R),z=D.barwidth,G=Array.isArray(z),Y=0;Y<I.length;Y++){var ee=I[Y],j=ee.w=G?z[Y]:z;ee[P]=ee.p+(O?R[Y]:R)+j/2}}function l(L,E,S){var P=E.traces,F=E.minDiff,I=F/2;e.minDtick(L,E.minDiff,E.distinctPositions[0],S);for(var D=0;D<P.length;D++){var R=P[D],O=R[0],z=O.trace,G=[],Y,ee,j,X;for(X=0;X<R.length;X++)Y=R[X],ee=Y.p-I,j=Y.p+I,G.push(ee,j);if(z.width||z.offset){var ie=O.t,he=ie.poffset,K=ie.barwidth,$=Array.isArray(he),U=Array.isArray(K);for(X=0;X<R.length;X++){Y=R[X];var H=$?he[X]:he,q=U?K[X]:K;ee=Y.p+H,j=ee+q,G.push(ee,j)}}z._extremes[L._id]=e.findExtremes(L,G,{padded:!1})}}function x(L,E){for(var S=E.traces,P=h(L),F=0;F<S.length;F++){for(var I=S[F],D=I[0].trace,R=[],O=!1,z=0;z<I.length;z++){var G=I[z],Y=G.b,ee=Y+G.s;G[P]=ee,R.push(ee),G.hasB&&R.push(Y),(!G.hasB||!G.b)&&(O=!0)}D._extremes[L._id]=e.findExtremes(L,R,{tozero:O,padded:!0})}}function c(L,E,S){var P=h(L),F=E.traces,I,D,R,O,z,G;for(O=0;O<F.length;O++)if(I=F[O],D=I[0].trace,D.type==="funnel")for(z=0;z<I.length;z++)G=I[z],G.s!==A&&E.put(G.p,-.5*G.s);for(O=0;O<F.length;O++){I=F[O],D=I[0].trace,R=D.type==="funnel";var Y=[];for(z=0;z<I.length;z++)if(G=I[z],G.s!==A){var ee;R?ee=G.s:ee=G.s+G.b;var j=E.put(G.p,ee),X=j+ee;G.b=j,G[P]=X,S.norm||(Y.push(X),G.hasB&&Y.push(j))}S.norm||(D._extremes[L._id]=e.findExtremes(L,Y,{tozero:!0,padded:!0}))}}function M(L){for(var E=L.traces,S=0;S<E.length;S++)for(var P=E[S],F=0;F<P.length;F++){var I=P[F];I.s!==A&&L.put(I.p,I.b+I.s)}}function w(L,E){for(var S=L.traces,P=0;P<S.length;P++){var F=S[P],I=F[0].trace;if(I.base===void 0)for(var D=new i([F],{posAxis:E,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<F.length;R++){var O=F[R];if(O.p!==A){var z=D.put(O.p,O.b+O.s);z&&(O.b=z)}}}}function p(L,E,S){var P=E.traces,F=h(L),I=S.norm==="fraction"?1:100,D=I/1e9,R=L.l2c(L.c2l(0)),O=S.mode==="stack"?I:R;function z(q){return m(L.c2l(q))&&(q<R-D||q>O+D||!m(R))}for(var G=0;G<P.length;G++){for(var Y=P[G],ee=Y[0].trace,j=[],X=!1,ie=!1,he=0;he<Y.length;he++){var K=Y[he];if(K.s!==A){var $=Math.abs(I/E.get(K.p,K.s));K.b*=$,K.s*=$;var U=K.b,H=U+K.s;K[F]=H,j.push(H),ie=ie||z(H),K.hasB&&(j.push(U),ie=ie||z(U)),(!K.hasB||!K.b)&&(X=!0)}}ee._extremes[L._id]=e.findExtremes(L,j,{tozero:X,padded:ie})}}function _(L,E){var S=h(E),P={},F,I,D,R=1/0,O=-1/0;for(F=0;F<L.length;F++)for(D=L[F],I=0;I<D.length;I++){var z=D[I].p;m(z)&&(R=Math.min(R,z),O=Math.max(O,z))}var G=1e4/(O-R),Y=P.round=function($){return String(Math.round(G*($-R)))};for(F=0;F<L.length;F++){D=L[F],D[0].t.extents=P;var ee=D[0].t.poffset,j=Array.isArray(ee);for(I=0;I<D.length;I++){var X=D[I],ie=X[S]-X.w/2;if(m(ie)){var he=X[S]+X.w/2,K=Y(X.p);P[K]?P[K]=[Math.min(ie,P[K][0]),Math.max(he,P[K][1])]:P[K]=[ie,he]}X.p0=X.p+(j?ee[I]:ee),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s}}}function h(L){return L._id.charAt(0)}N.exports={crossTraceCalc:n,setGroupPositions:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color"),A=t("../../registry"),T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./style_defaults"),i=t("../../plots/cartesian/constraints").getAxisGroup,n=t("./attributes"),r=m.coerceFont;function v(g,d,f,y){function l(p,_){return m.coerce(g,d,n,p,_)}var x=T(g,d,y,l);if(!x){d.visible=!1;return}e(g,d,y,l),l("xhoverformat"),l("yhoverformat"),l("orientation",d.x&&!d.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var c=l("textposition");b(g,d,y,l,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(g,d,l,f,y);var M=(d.marker.line||{}).color,w=A.getComponentMethod("errorbars","supplyDefaults");w(g,d,M||u.defaultLine,{axis:"y"}),w(g,d,M||u.defaultLine,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(d,l)}function s(g,d,f,y){var l=d.orientation,x=d[{v:"x",h:"y"}[l]+"axis"],c=i(f,x)+l,M=f._alignmentOpts||{},w=y("alignmentgroup"),p=M[c];p||(p=M[c]={});var _=p[w];_?_.traces.push(d):_=p[w]={traces:[d],alignmentIndex:Object.keys(p).length,offsetGroups:{}};var h=y("offsetgroup"),L=_.offsetGroups,E=L[h];h&&(E||(E=L[h]={offsetIndex:Object.keys(L).length}),d._offsetIndex=E.offsetIndex)}function o(g,d){var f,y;function l(c){return m.coerce(y._input,y,n,c)}if(d.barmode==="group")for(var x=0;x<g.length;x++)y=g[x],y.type==="bar"&&(f=y._input,s(f,y,d,l))}function b(g,d,f,y,l,x){x=x||{};var c=x.moduleHasSelected!==!1,M=x.moduleHasUnselected!==!1,w=x.moduleHasConstrain!==!1,p=x.moduleHasCliponaxis!==!1,_=x.moduleHasTextangle!==!1,h=x.moduleHasInsideanchor!==!1,L=!!x.hasPathbar,E=Array.isArray(l)||l==="auto",S=E||l==="inside",P=E||l==="outside";if(S||P){var F=r(y,"textfont",f.font),I=m.extendFlat({},F),D=g.textfont&&g.textfont.color,R=!D;if(R&&delete I.color,r(y,"insidetextfont",I),L){var O=m.extendFlat({},F);R&&delete O.color,r(y,"pathbar.textfont",O)}P&&r(y,"outsidetextfont",F),c&&y("selected.textfont.color"),M&&y("unselected.textfont.color"),w&&y("constraintext"),p&&y("cliponaxis"),_&&y("textangle"),y("texttemplate")}S&&h&&y("insidetextanchor")}N.exports={supplyDefaults:v,crossTraceDefaults:o,handleGroupingDefaults:s,handleText:b}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(t,N,V){N.exports=function(u,A,T){return u.x="xVal"in A?A.xVal:A.x,u.y="yVal"in A?A.yVal:A.y,A.xa&&(u.xaxis=A.xa),A.ya&&(u.yaxis=A.ya),T.orientation==="h"?(u.label=u.y,u.value=u.x):(u.label=u.x,u.value=u.y),u}},{}],663:[function(t,N,V){var m=t("fast-isnumeric"),u=t("tinycolor2"),A=t("../../lib").isArrayOrTypedArray;V.coerceString=function(T,e,a){if(typeof e=="string"){if(e||!T.noBlank)return e}else if((typeof e=="number"||e===!0)&&!T.strict)return String(e);return a!==void 0?a:T.dflt},V.coerceNumber=function(T,e,a){if(m(e)){e=+e;var i=T.min,n=T.max,r=i!==void 0&&e<i||n!==void 0&&e>n;if(!r)return e}return a!==void 0?a:T.dflt},V.coerceColor=function(T,e,a){return u(e).isValid()?e:a!==void 0?a:T.dflt},V.coerceEnumerated=function(T,e,a){return T.coerceNumber&&(e=+e),T.values.indexOf(e)!==-1?e:a!==void 0?a:T.dflt},V.getValue=function(T,e){var a;return Array.isArray(T)?e<T.length&&(a=T[e]):a=T,a},V.getLineWidth=function(T,e){var a=0<e.mlw?e.mlw:A(T.marker.line.width)?0:T.marker.line.width;return a}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(t,N,V){var m=t("../../components/fx"),u=t("../../registry"),A=t("../../components/color"),T=t("../../lib").fillText,e=t("./helpers").getLineWidth,a=t("../../plots/cartesian/axes").hoverLabelText,i=t("../../constants/numerical").BADNUM;function n(s,o,b,g,d){var f=r(s,o,b,g,d);if(f){var y=f.cd,l=y[0].trace,x=y[f.index];return f.color=v(l,x),u.getComponentMethod("errorbars","hoverInfo")(x,l,f),[f]}}function r(s,o,b,g,d){var f=s.cd,y=f[0].trace,l=f[0].t,x=g==="closest",c=y.type==="waterfall",M=s.maxHoverDistance,w=s.maxSpikeDistance,p,_,h,L,E,S,P;y.orientation==="h"?(p=b,_=o,h="y",L="x",E=he,S=j):(p=o,_=b,h="x",L="y",S=he,E=j);var F=y[h+"period"],I=x||F;function D(ae){return O(ae,-1)}function R(ae){return O(ae,1)}function O(ae,le){var _e=ae.w;return ae[h]+le*_e/2}function z(ae){return ae[h+"End"]-ae[h+"Start"]}var G=x?D:F?function(ae){return ae.p-z(ae)/2}:function(ae){return Math.min(D(ae),ae.p-l.bardelta/2)},Y=x?R:F?function(ae){return ae.p+z(ae)/2}:function(ae){return Math.max(R(ae),ae.p+l.bardelta/2)};function ee(ae,le,_e){return d.finiteRange&&(_e=0),m.inbox(ae-p,le-p,_e+Math.min(1,Math.abs(le-ae)/P)-1)}function j(ae){return ee(G(ae),Y(ae),M)}function X(ae){return ee(D(ae),R(ae),w)}function ie(ae){var le=ae[L];if(c){var _e=Math.abs(ae.rawS)||0;_>0?le+=_e:_<0&&(le-=_e)}return le}function he(ae){var le=_,_e=ae.b,fe=ie(ae);return m.inbox(_e-le,fe-le,M+(fe-le)/(fe-_e)-1)}function K(ae){var le=_,_e=ae.b,fe=ie(ae);return m.inbox(_e-le,fe-le,w+(fe-le)/(fe-_e)-1)}var $=s[h+"a"],U=s[L+"a"];P=Math.abs($.r2c($.range[1])-$.r2c($.range[0]));function H(ae){return(E(ae)+S(ae))/2}var q=m.getDistanceFunction(g,E,S,H);if(m.getClosest(f,q,s),s.index!==!1&&f[s.index].p!==i){I||(G=function(ae){return Math.min(D(ae),ae.p-l.bargroupwidth/2)},Y=function(ae){return Math.max(R(ae),ae.p+l.bargroupwidth/2)});var re=s.index,Z=f[re],Q=y.base?Z.b+Z.s:Z.s;s[L+"0"]=s[L+"1"]=U.c2p(Z[L],!0),s[L+"LabelVal"]=Q;var oe=l.extents[l.extents.round(Z.p)];s[h+"0"]=$.c2p(x?G(Z):oe[0],!0),s[h+"1"]=$.c2p(x?Y(Z):oe[1],!0);var se=Z.orig_p!==void 0;return s[h+"LabelVal"]=se?Z.orig_p:Z.p,s.labelLabel=a($,s[h+"LabelVal"],y[h+"hoverformat"]),s.valueLabel=a(U,s[L+"LabelVal"],y[L+"hoverformat"]),s.baseLabel=a(U,Z.b,y[L+"hoverformat"]),s.spikeDistance=(K(Z)+X(Z))/2,s[h+"Spike"]=$.c2p(Z.p,!0),T(Z,y,s),s.hovertemplate=y.hovertemplate,s}}function v(s,o){var b=o.mcc||s.marker.color,g=o.mlcc||s.marker.line.color,d=e(s,o);if(A.opacity(b))return b;if(A.opacity(g)&&d)return g}N.exports={hoverPoints:n,hoverOnBars:r,getTraceColor:v}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(t,N,V){N.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(t,N,V){var m=t("../../registry"),u=t("../../plots/cartesian/axes"),A=t("../../lib"),T=t("./layout_attributes");N.exports=function(e,a,i){function n(l,x){return A.coerce(e,a,T,l,x)}for(var r=!1,v=!1,s=!1,o={},b=n("barmode"),g=0;g<i.length;g++){var d=i[g];if(m.traceIs(d,"bar")&&d.visible)r=!0;else continue;if(b==="group"){var f=d.xaxis+d.yaxis;o[f]&&(s=!0),o[f]=!0}if(d.visible&&d.type==="histogram"){var y=u.getFromId({_fullLayout:a},d[d.orientation==="v"?"xaxis":"yaxis"]);y.type!=="category"&&(v=!0)}}if(!r){delete a.barmode;return}b!=="overlay"&&n("barnorm"),n("bargap",v&&!s?0:.2),n("bargroupgap")}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("../../lib"),T=t("../../lib/svg_text_utils"),e=t("../../components/color"),a=t("../../components/drawing"),i=t("../../registry"),n=t("../../plots/cartesian/axes").tickText,r=t("./uniform_text"),v=r.recordMinTextSize,s=r.clearMinTextSize,o=t("./style"),b=t("./helpers"),g=t("./constants"),d=t("./attributes"),f=d.text,y=d.textposition,l=t("../../components/fx/helpers").appendArrayPointValue,x=g.TEXTPAD;function c(G){return G.id}function M(G){if(G.ids)return c}function w(G,Y){return G<Y?1:-1}function p(G,Y,ee,j){var X=[],ie=[],he=j?Y:ee,K=j?ee:Y;return X[0]=he.c2p(G.s0,!0),ie[0]=K.c2p(G.p0,!0),X[1]=he.c2p(G.s1,!0),ie[1]=K.c2p(G.p1,!0),j?[X,ie]:[ie,X]}function _(G,Y,ee,j){if(!Y.uniformtext.mode&&h(ee)){var X;return j&&(X=j()),G.transition().duration(ee.duration).ease(ee.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()})}else return G}function h(G){return G&&G.duration>0}function L(G,Y,ee,j,X,ie){var he=Y.xaxis,K=Y.yaxis,$=G._fullLayout;X||(X={mode:$.barmode,norm:$.barmode,gap:$.bargap,groupgap:$.bargroupgap},s("bar",$));var U=A.makeTraceGroups(j,ee,"trace bars").each(function(H){var q=m.select(this),re=H[0].trace,Z=re.type==="waterfall",Q=re.type==="funnel",oe=re.type==="bar",se=oe||Q,ae=0;Z&&re.connector.visible&&re.connector.mode==="between"&&(ae=re.connector.line.width/2);var le=re.orientation==="h",_e=h(X),fe=A.ensureSingle(q,"g","points"),me=M(re),xe=fe.selectAll("g.point").data(A.identity,me);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(be,ke){var De=m.select(this),He=p(be,he,K,le),Ae=He[0][0],Le=He[0][1],Ze=He[1][0],We=He[1][1],ze=(le?Le-Ae:We-Ze)===0;ze&&se&&b.getLineWidth(re,be)&&(ze=!1),ze||(ze=!u(Ae)||!u(Le)||!u(Ze)||!u(We)),be.isBlank=ze,ze&&(le?Le=Ae:We=Ze),ae&&!ze&&(le?(Ae-=w(Ae,Le)*ae,Le+=w(Ae,Le)*ae):(Ze-=w(Ze,We)*ae,We+=w(Ze,We)*ae));var Ie,Ve;if(re.type==="waterfall"){if(!ze){var dt=re[be.dir].marker;Ie=dt.line.width,Ve=dt.color}}else Ie=b.getLineWidth(re,be),Ve=be.mc||re.marker.color;function Ft(Lt){var Xe=m.round(Ie/2%1,2);return X.gap===0&&X.groupgap===0?m.round(Math.round(Lt)-Xe,2):Lt}function Qt(Lt,Xe,it){return it&&Lt===Xe?Lt:Math.abs(Lt-Xe)>=2?Ft(Lt):Lt>Xe?Math.ceil(Lt):Math.floor(Lt)}if(!G._context.staticPlot){var Ot=e.opacity(Ve),Ct=Ot<1||Ie>.01?Ft:Qt;Ae=Ct(Ae,Le,le),Le=Ct(Le,Ae,le),Ze=Ct(Ze,We,!le),We=Ct(We,Ze,!le)}var jt=_(A.ensureSingle(De,"path"),$,X,ie);if(jt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Le-Ae)*(We-Ze))||ze&&G._context.staticPlot?"M0,0Z":"M"+Ae+","+Ze+"V"+We+"H"+Le+"V"+Ze+"Z").call(a.setClipUrl,Y.layerClipId,G),!$.uniformtext.mode&&_e){var Nt=a.makePointStyleFns(re);a.singlePointStyle(be,jt,re,Nt,G)}E(G,Y,De,H,ke,Ae,Le,Ze,We,X,ie),Y.layerClipId&&a.hideOutsideRangePoint(be,De.select("text"),he,K,re.xcalendar,re.ycalendar)});var ye=re.cliponaxis===!1;a.setClipUrl(q,ye?null:Y.layerClipId,G)});i.getComponentMethod("errorbars","plot")(G,U,Y,X)}function E(G,Y,ee,j,X,ie,he,K,$,U,H){var q=Y.xaxis,re=Y.yaxis,Z=G._fullLayout,Q;function oe(Xe,it,Ye){var Ee=A.ensureSingle(Xe,"text").text(it).attr({class:"bartext bartext-"+Q,"text-anchor":"middle","data-notex":1}).call(a.font,Ye).call(T.convertToTspans,G);return Ee}var se=j[0].trace,ae=se.orientation==="h",le=D(Z,j,X,q,re);Q=R(se,X);var _e=U.mode==="stack"||U.mode==="relative",fe=j[X],me=!_e||fe._outmost;if(!le||Q==="none"||(fe.isBlank||ie===he||K===$)&&(Q==="auto"||Q==="inside")){ee.select("text").remove();return}var xe=Z.font,ye=o.getBarColor(j[X],se),be=o.getInsideTextFont(se,X,xe,ye),ke=o.getOutsideTextFont(se,X,xe),De=ee.datum();ae?q.type==="log"&&De.s0<=0&&(q.range[0]<q.range[1]?ie=0:ie=q._length):re.type==="log"&&De.s0<=0&&(re.range[0]<re.range[1]?K=re._length:K=0);var He=Math.abs(he-ie)-2*x,Ae=Math.abs($-K)-2*x,Le,Ze,We,ze,Ie;if(Q==="outside"&&!me&&!fe.hasB&&(Q="inside"),Q==="auto")if(me){Q="inside",Ie=A.ensureUniformFontSize(G,be),Le=oe(ee,le,Ie),Ze=a.bBox(Le.node()),We=Ze.width,ze=Ze.height;var Ve=We>0&&ze>0,dt=We<=He&&ze<=Ae,Ft=We<=Ae&&ze<=He,Qt=ae?He>=We*(Ae/ze):Ae>=ze*(He/We);Ve&&(dt||Ft||Qt)?Q="inside":(Q="outside",Le.remove(),Le=null)}else Q="inside";if(!Le){Ie=A.ensureUniformFontSize(G,Q==="outside"?ke:be),Le=oe(ee,le,Ie);var Ot=Le.attr("transform");if(Le.attr("transform",""),Ze=a.bBox(Le.node()),We=Ze.width,ze=Ze.height,Le.attr("transform",Ot),We<=0||ze<=0){Le.remove();return}}var Ct=se.textangle,jt,Nt;Q==="outside"?(Nt=se.constraintext==="both"||se.constraintext==="outside",jt=I(ie,he,K,$,Ze,{isHorizontal:ae,constrained:Nt,angle:Ct})):(Nt=se.constraintext==="both"||se.constraintext==="inside",jt=F(ie,he,K,$,Ze,{isHorizontal:ae,constrained:Nt,angle:Ct,anchor:se.insidetextanchor})),jt.fontSize=Ie.size,v(se.type==="histogram"?"bar":se.type,jt,Z),fe.transform=jt;var Lt=_(Le,Z,U,H);A.setTransormAndDisplay(Lt,jt)}function S(G){return G==="auto"?0:G}function P(G,Y){var ee=Math.PI/180*Y,j=Math.abs(Math.sin(ee)),X=Math.abs(Math.cos(ee));return{x:G.width*X+G.height*j,y:G.width*j+G.height*X}}function F(G,Y,ee,j,X,ie){var he=!!ie.isHorizontal,K=!!ie.constrained,$=ie.angle||0,U=ie.anchor||"end",H=U==="end",q=U==="start",re=ie.leftToRight||0,Z=(re+1)/2,Q=1-Z,oe=X.width,se=X.height,ae=Math.abs(Y-G),le=Math.abs(j-ee),_e=ae>2*x&&le>2*x?x:0;ae-=2*_e,le-=2*_e;var fe=S($);$==="auto"&&!(oe<=ae&&se<=le)&&(oe>ae||se>le)&&(!(oe>le||se>ae)||oe<se!=ae<le)&&(fe+=90);var me=P(X,fe),xe=1;K&&(xe=Math.min(1,ae/me.x,le/me.y));var ye=X.left*Q+X.right*Z,be=(X.top+X.bottom)/2,ke=(G+x)*Q+(Y-x)*Z,De=(ee+j)/2,He=0,Ae=0;if(q||H){var Le=(he?me.x:me.y)/2,Ze=he?w(G,Y):w(ee,j);he?q?(ke=G+Ze*_e,He=-Ze*Le):(ke=Y-Ze*_e,He=Ze*Le):q?(De=ee+Ze*_e,Ae=-Ze*Le):(De=j-Ze*_e,Ae=Ze*Le)}return{textX:ye,textY:be,targetX:ke,targetY:De,anchorX:He,anchorY:Ae,scale:xe,rotate:fe}}function I(G,Y,ee,j,X,ie){var he=!!ie.isHorizontal,K=!!ie.constrained,$=ie.angle||0,U=X.width,H=X.height,q=Math.abs(Y-G),re=Math.abs(j-ee),Z;he?Z=re>2*x?x:0:Z=q>2*x?x:0;var Q=1;K&&(Q=he?Math.min(1,re/H):Math.min(1,q/U));var oe=S($),se=P(X,oe),ae=(he?se.x:se.y)/2,le=(X.left+X.right)/2,_e=(X.top+X.bottom)/2,fe=(G+Y)/2,me=(ee+j)/2,xe=0,ye=0,be=he?w(Y,G):w(ee,j);return he?(fe=Y-be*Z,xe=be*ae):(me=j+be*Z,ye=-be*ae),{textX:le,textY:_e,targetX:fe,targetY:me,anchorX:xe,anchorY:ye,scale:Q,rotate:oe}}function D(G,Y,ee,j,X){var ie=Y[0].trace,he=ie.texttemplate,K;return he?K=O(G,Y,ee,j,X):ie.textinfo?K=z(Y,ee,j,X):K=b.getValue(ie.text,ee),b.coerceString(f,K)}function R(G,Y){var ee=b.getValue(G.textposition,Y);return b.coerceEnumerated(y,ee)}function O(G,Y,ee,j,X){var ie=Y[0].trace,he=A.castOption(ie,ee,"texttemplate");if(!he)return"";var K=ie.type==="histogram",$=ie.type==="waterfall",U=ie.type==="funnel",H=ie.orientation==="h",q,re,Z,Q;H?(q="y",re=X,Z="x",Q=j):(q="x",re=j,Z="y",Q=X);function oe(xe){return n(re,re.c2l(xe),!0).text}function se(xe){return n(Q,Q.c2l(xe),!0).text}var ae=Y[ee],le={};le.label=ae.p,le.labelLabel=le[q+"Label"]=oe(ae.p);var _e=A.castOption(ie,ae.i,"text");(_e===0||_e)&&(le.text=_e),le.value=ae.s,le.valueLabel=le[Z+"Label"]=se(ae.s);var fe={};l(fe,ie,ae.i),(K||fe.x===void 0)&&(fe.x=H?le.value:le.label),(K||fe.y===void 0)&&(fe.y=H?le.label:le.value),(K||fe.xLabel===void 0)&&(fe.xLabel=H?le.valueLabel:le.labelLabel),(K||fe.yLabel===void 0)&&(fe.yLabel=H?le.labelLabel:le.valueLabel),$&&(le.delta=+ae.rawS||ae.s,le.deltaLabel=se(le.delta),le.final=ae.v,le.finalLabel=se(le.final),le.initial=le.final-le.delta,le.initialLabel=se(le.initial)),U&&(le.value=ae.s,le.valueLabel=se(le.value),le.percentInitial=ae.begR,le.percentInitialLabel=A.formatPercent(ae.begR),le.percentPrevious=ae.difR,le.percentPreviousLabel=A.formatPercent(ae.difR),le.percentTotal=ae.sumR,le.percenTotalLabel=A.formatPercent(ae.sumR));var me=A.castOption(ie,ae.i,"customdata");return me&&(le.customdata=me),A.texttemplateString(he,le,G._d3locale,fe,le,ie._meta||{})}function z(G,Y,ee,j){var X=G[0].trace,ie=X.orientation==="h",he=X.type==="waterfall",K=X.type==="funnel";function $(me){var xe=ie?j:ee;return n(xe,me,!0).text}function U(me){var xe=ie?ee:j;return n(xe,+me,!0).text}var H=X.textinfo,q=G[Y],re=H.split("+"),Z=[],Q,oe=function(me){return re.indexOf(me)!==-1};if(oe("label")&&Z.push($(G[Y].p)),oe("text")&&(Q=A.castOption(X,q.i,"text"),(Q===0||Q)&&Z.push(Q)),he){var se=+q.rawS||q.s,ae=q.v,le=ae-se;oe("initial")&&Z.push(U(le)),oe("delta")&&Z.push(U(se)),oe("final")&&Z.push(U(ae))}if(K){oe("value")&&Z.push(U(q.s));var _e=0;oe("percent initial")&&_e++,oe("percent previous")&&_e++,oe("percent total")&&_e++;var fe=_e>1;oe("percent initial")&&(Q=A.formatPercent(q.begR),fe&&(Q+=" of initial"),Z.push(Q)),oe("percent previous")&&(Q=A.formatPercent(q.difR),fe&&(Q+=" of previous"),Z.push(Q)),oe("percent total")&&(Q=A.formatPercent(q.sumR),fe&&(Q+=" of total"),Z.push(Q))}return Z.join("<br>")}N.exports={plot:L,toMoveInsideBar:F}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(t,N,V){N.exports=function(A,T){var e=A.cd,a=A.xaxis,i=A.yaxis,n=e[0].trace,r=n.type==="funnel",v=n.orientation==="h",s=[],o;if(T===!1)for(o=0;o<e.length;o++)e[o].selected=0;else for(o=0;o<e.length;o++){var b=e[o],g="ct"in b?b.ct:m(b,a,i,v,r);T.contains(g,!1,o,A)?(s.push({pointNumber:o,x:a.c2d(b.x),y:i.c2d(b.y)}),b.selected=1):b.selected=0}return s};function m(u,A,T,e,a){var i=A.c2p(e?u.s0:u.p0,!0),n=A.c2p(e?u.s1:u.p1,!0),r=T.c2p(e?u.p0:u.s0,!0),v=T.c2p(e?u.p1:u.s1,!0);return a?[(i+n)/2,(r+v)/2]:e?[n,(r+v)/2]:[(i+n)/2,v]}},{}],670:[function(t,N,V){N.exports=A;var m=t("../../lib").distinctVals,u=t("../../constants/numerical").BADNUM;function A(T,e){this.traces=T,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var a=1/0,i=[],n=0;n<T.length;n++){for(var r=T[n],v=0;v<r.length;v++){var s=r[v];s.p!==u&&i.push(s.p)}r[0]&&r[0].width1&&(a=Math.min(r[0].width1,a))}this.positions=i;var o=m(i);this.distinctPositions=o.vals,o.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(o.minDiff,a);var b=(e.posAxis||{}).type;(b==="category"||b==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}A.prototype.put=function(e,a){var i=this.getLabel(e,a),n=this.bins[i]||0;return this.bins[i]=n+a,n},A.prototype.get=function(e,a){var i=this.getLabel(e,a);return this.bins[i]||0},A.prototype.getLabel=function(e,a){var i=a<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?e:Math.round(e/this.binWidth);return i+n}},{"../../constants/numerical":491,"../../lib":515}],671:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/color"),A=t("../../components/drawing"),T=t("../../lib"),e=t("../../registry"),a=t("./uniform_text").resizeText,i=t("./attributes"),n=i.textfont,r=i.insidetextfont,v=i.outsidetextfont,s=t("./helpers");function o(_){var h=m.select(_).selectAll("g.barlayer").selectAll("g.trace");a(_,h,"bar");var L=h.size(),E=_._fullLayout;h.style("opacity",function(S){return S[0].trace.opacity}).each(function(S){(E.barmode==="stack"&&L>1||E.bargap===0&&E.bargroupgap===0&&!S[0].trace.marker.line.width)&&m.select(this).attr("shape-rendering","crispEdges")}),h.selectAll("g.points").each(function(S){var P=m.select(this),F=S[0].trace;b(P,F,_)}),e.getComponentMethod("errorbars","style")(h)}function b(_,h,L){A.pointStyle(_.selectAll("path"),h,L),g(_,h,L)}function g(_,h,L){_.selectAll("text").each(function(E){var S=m.select(this),P=T.ensureUniformFontSize(L,l(S,E,h,L));A.font(S,P)})}function d(_,h,L){var E=h[0].trace;E.selectedpoints?f(L,E,_):(b(L,E,_),e.getComponentMethod("errorbars","style")(L))}function f(_,h,L){A.selectedPointStyle(_.selectAll("path"),h),y(_.selectAll("text"),h,L)}function y(_,h,L){_.each(function(E){var S=m.select(this),P;if(E.selected){P=T.ensureUniformFontSize(L,l(S,E,h,L));var F=h.selected.textfont&&h.selected.textfont.color;F&&(P.color=F),A.font(S,P)}else A.selectedTextStyle(S,h)})}function l(_,h,L,E){var S=E._fullLayout.font,P=L.textfont;if(_.classed("bartext-inside")){var F=p(h,L);P=c(L,h.i,S,F)}else _.classed("bartext-outside")&&(P=M(L,h.i,S));return P}function x(_,h,L){return w(n,_.textfont,h,L)}function c(_,h,L,E){var S=x(_,h,L),P=_._input.textfont===void 0||_._input.textfont.color===void 0||Array.isArray(_.textfont.color)&&_.textfont.color[h]===void 0;return P&&(S={color:u.contrast(E),family:S.family,size:S.size}),w(r,_.insidetextfont,h,S)}function M(_,h,L){var E=x(_,h,L);return w(v,_.outsidetextfont,h,E)}function w(_,h,L,E){h=h||{};var S=s.getValue(h.family,L),P=s.getValue(h.size,L),F=s.getValue(h.color,L);return{family:s.coerceString(_.family,S,E.family),size:s.coerceNumber(_.size,P,E.size),color:s.coerceColor(_.color,F,E.color)}}function p(_,h){return h.type==="waterfall"?h[_.dir].marker.color:_.mcc||_.mc||h.marker.color}N.exports={style:o,styleTextPoints:g,styleOnSelect:d,getInsideTextFont:c,getOutsideTextFont:M,getBarColor:p,resizeText:a}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(t,N,V){var m=t("../../components/color"),u=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../lib").coercePattern;N.exports=function(a,i,n,r,v){var s=n("marker.color",r),o=u(a,"marker");o&&A(a,i,v,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",m.defaultLine),u(a,"marker.line")&&A(a,i,v,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),T(n,"marker.pattern",s,o),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib");function A(i,n,r){var v=i._fullLayout,s=v["_"+r+"Text_minsize"];if(s){var o=v.uniformtext.mode==="hide",b;switch(r){case"funnelarea":case"pie":case"sunburst":b="g.slice";break;case"treemap":case"icicle":b="g.slice, g.pathbar";break;default:b="g.points > g.point"}n.selectAll(b).each(function(g){var d=g.transform;if(d){d.scale=o&&d.hide?0:s/d.fontSize;var f=m.select(this).select("text");u.setTransormAndDisplay(f,d)}})}}function T(i,n,r){if(r.uniformtext.mode){var v=a(i),s=r.uniformtext.minsize,o=n.scale*n.fontSize;n.hide=o<s,r[v]=r[v]||1/0,n.hide||(r[v]=Math.min(r[v],Math.max(o,s)))}}function e(i,n){var r=a(i);n[r]=void 0}function a(i){return"_"+i+"Text_minsize"}N.exports={recordMinTextSize:T,clearMinTextSize:e,resizeText:A}},{"../../lib":515,"@plotly/d3":58}],674:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../../lib/extend").extendFlat,A=t("../scatterpolar/attributes"),T=t("../bar/attributes");N.exports={r:A.r,theta:A.theta,r0:A.r0,dr:A.dr,theta0:A.theta0,dtheta:A.dtheta,thetaunit:A.thetaunit,base:u({},T.base,{}),offset:u({},T.offset,{}),width:u({},T.width,{}),text:u({},T.text,{}),hovertext:u({},T.hovertext,{}),marker:T.marker,hoverinfo:A.hoverinfo,hovertemplate:m(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(t,N,V){var m=t("../../components/colorscale/helpers").hasColorscale,u=t("../../components/colorscale/calc"),A=t("../bar/arrays_to_calcdata"),T=t("../bar/cross_trace_calc").setGroupPositions,e=t("../scatter/calc_selection"),a=t("../../registry").traceIs,i=t("../../lib").extendFlat;function n(v,s){for(var o=v._fullLayout,b=s.subplot,g=o[b].radialaxis,d=o[b].angularaxis,f=g.makeCalcdata(s,"r"),y=d.makeCalcdata(s,"theta"),l=s._length,x=new Array(l),c=f,M=y,w=0;w<l;w++)x[w]={p:M[w],s:c[w]};function p(_){var h=s[_];h!==void 0&&(s["_"+_]=Array.isArray(h)?d.makeCalcdata(s,_):d.d2c(h,s.thetaunit))}return d.type==="linear"&&(p("width"),p("offset")),m(s,"marker")&&u(v,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),m(s,"marker.line")&&u(v,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),A(x,s),e(x,s),x}function r(v,s,o){for(var b=v.calcdata,g=[],d=0;d<b.length;d++){var f=b[d],y=f[0].trace;y.visible===!0&&a(y,"bar")&&y.subplot===o&&g.push(f)}var l=i({},s.radialaxis,{_id:"x"}),x=s.angularaxis;T(v,x,l,g,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}N.exports={calc:n,crossTraceCalc:r}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(t,N,V){var m=t("../../lib"),u=t("../scatterpolar/defaults").handleRThetaDefaults,A=t("../bar/style_defaults"),T=t("./attributes");N.exports=function(a,i,n,r){function v(o,b){return m.coerce(a,i,T,o,b)}var s=u(a,i,r,v);if(!s){i.visible=!1;return}v("thetaunit"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate"),A(a,i,v,n,r),m.coerceSelectionMarkerOpacity(i,v)}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(t,N,V){var m=t("../../components/fx"),u=t("../../lib"),A=t("../bar/hover").getTraceColor,T=u.fillText,e=t("../scatterpolar/hover").makeHoverPointText,a=t("../../plots/polar/helpers").isPtInsidePolygon;N.exports=function(n,r,v){var s=n.cd,o=s[0].trace,b=n.subplot,g=b.radialAxis,d=b.angularAxis,f=b.vangles,y=f?a:u.isPtInsideSector,l=n.maxHoverDistance,x=d._period||2*Math.PI,c=Math.abs(g.g2p(Math.sqrt(r*r+v*v))),M=Math.atan2(v,r);g.range[0]>g.range[1]&&(M+=Math.PI);var w=function(L){return y(c,M,[L.rp0,L.rp1],[L.thetag0,L.thetag1],f)?l+Math.min(1,Math.abs(L.thetag1-L.thetag0)/x)-1+(L.rp1-c)/(L.rp1-L.rp0)-1:1/0};if(m.getClosest(s,w,n),n.index!==!1){var p=n.index,_=s[p];n.x0=n.x1=_.ct[0],n.y0=n.y1=_.ct[1];var h=u.extendFlat({},_,{r:_.s,theta:_.p});return T(_,o,n),e(h,o,b,n),n.hovertemplate=o.hovertemplate,n.color=A(o,_),n.xLabelVal=n.yLabelVal=void 0,_.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(t,N,V){N.exports={moduleType:"trace",name:"barpolar",basePlotModule:t("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("../scatterpolar/format_labels"),style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(t,N,V){N.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(A,T,e){var a={},i;function n(s,o){return m.coerce(A[i]||{},T[i],u,s,o)}for(var r=0;r<e.length;r++){var v=e[r];v.type==="barpolar"&&v.visible===!0&&(i=v.subplot,a[i]||(n("barmode"),n("bargap"),a[i]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(t,N,V){var m=t("@plotly/d3"),u=t("fast-isnumeric"),A=t("../../lib"),T=t("../../components/drawing"),e=t("../../plots/polar/helpers");N.exports=function(n,r,v){var s=r.xaxis,o=r.yaxis,b=r.radialAxis,g=r.angularAxis,d=a(r),f=r.layers.frontplot.select("g.barlayer");A.makeTraceGroups(f,v,"trace bars").each(function(){var y=m.select(this),l=A.ensureSingle(y,"g","points"),x=l.selectAll("g.point").data(A.identity);x.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(c){var M=m.select(this),w=c.rp0=b.c2p(c.s0),p=c.rp1=b.c2p(c.s1),_=c.thetag0=g.c2g(c.p0),h=c.thetag1=g.c2g(c.p1),L;if(!u(w)||!u(p)||!u(_)||!u(h)||w===p||_===h)L="M0,0Z";else{var E=b.c2g(c.s1),S=(_+h)/2;c.ct=[s.c2p(E*Math.cos(S)),o.c2p(E*Math.sin(S))],L=d(w,p,_,h)}A.ensureSingle(M,"path").attr("d",L)}),T.setClipUrl(y,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,n)})};function a(i){var n=i.cxx,r=i.cyy;return i.vangles?function(v,s,o,b){var g,d;A.angleDelta(o,b)>0?(g=o,d=b):(g=b,d=o);var f=e.findEnclosingVertexAngles(g,i.vangles)[0],y=e.findEnclosingVertexAngles(d,i.vangles)[1],l=[f,(g+d)/2,y];return e.pathPolygonAnnulus(v,s,g,d,l,n,r)}:function(v,s,o,b){return A.pathAnnulus(v,s,o,b,n,r)}}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(t,N,V){var m=t("../scatter/attributes"),u=t("../bar/attributes"),A=t("../../components/color/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../lib/extend").extendFlat,i=m.marker,n=i.line;N.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:a({},i.angle,{arrayOk:!1,editType:"calc"}),size:a({},i.size,{arrayOk:!1,editType:"calc"}),color:a({},i.color,{arrayOk:!1,editType:"style"}),line:{color:a({},n.color,{arrayOk:!1,dflt:A.defaultLine,editType:"style"}),width:a({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup,selected:{marker:m.selected.marker,editType:"style"},unselected:{marker:m.unselected.marker,editType:"style"},text:a({},m.text,{}),hovertext:a({},m.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../plots/cartesian/axes"),A=t("../../plots/cartesian/align_period"),T=t("../../lib"),e=t("../../constants/numerical").BADNUM,a=T._;N.exports=function(M,w){var p=M._fullLayout,_=u.getFromId(M,w.xaxis||"x"),h=u.getFromId(M,w.yaxis||"y"),L=[],E=w.type==="violin"?"_numViolins":"_numBoxes",S,P,F,I,D,R,O;w.orientation==="h"?(F=_,I="x",D=h,R="y",O=!!w.yperiodalignment):(F=h,I="y",D=_,R="x",O=!!w.xperiodalignment);var z=i(w,R,D,p[E]),G=z[0],Y=z[1],ee=T.distinctVals(G,D),j=ee.vals,X=ee.minDiff/2,ie,he,K,$,U,H,q=(w.boxpoints||w.points)==="all"?T.identity:function(Ot){return Ot.v<ie.lf||Ot.v>ie.uf};if(w._hasPreCompStats){var re=w[I],Z=function(Ot){return F.d2c((w[Ot]||[])[S])},Q=1/0,oe=-1/0;for(S=0;S<w._length;S++){var se=G[S];if(!!m(se)){if(ie={},ie.pos=ie[R]=se,O&&Y&&(ie.orig_p=Y[S]),ie.q1=Z("q1"),ie.med=Z("median"),ie.q3=Z("q3"),he=[],re&&T.isArrayOrTypedArray(re[S]))for(P=0;P<re[S].length;P++)H=F.d2c(re[S][P]),H!==e&&(U={v:H,i:[S,P]},s(U,w,[S,P]),he.push(U));if(ie.pts=he.sort(b),K=ie[I]=he.map(g),$=K.length,ie.med!==e&&ie.q1!==e&&ie.q3!==e&&ie.med>=ie.q1&&ie.q3>=ie.med){var ae=Z("lowerfence");ie.lf=ae!==e&&ae<=ie.q1?ae:d(ie,K,$);var le=Z("upperfence");ie.uf=le!==e&&le>=ie.q3?le:f(ie,K,$);var _e=Z("mean");ie.mean=_e!==e?_e:$?T.mean(K,$):(ie.q1+ie.q3)/2;var fe=Z("sd");ie.sd=_e!==e&&fe>=0?fe:$?T.stdev(K,$,ie.mean):ie.q3-ie.q1,ie.lo=y(ie),ie.uo=l(ie);var me=Z("notchspan");me=me!==e&&me>0?me:x(ie,$),ie.ln=ie.med-me,ie.un=ie.med+me;var xe=ie.lf,ye=ie.uf;w.boxpoints&&K.length&&(xe=Math.min(xe,K[0]),ye=Math.max(ye,K[$-1])),w.notched&&(xe=Math.min(xe,ie.ln),ye=Math.max(ye,ie.un)),ie.min=xe,ie.max=ye}else{T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+ie.q1,"median = "+ie.med,"q3 = "+ie.q3].join(`
`));var be;ie.med!==e?be=ie.med:ie.q1!==e?ie.q3!==e?be=(ie.q1+ie.q3)/2:be=ie.q1:ie.q3!==e?be=ie.q3:be=0,ie.med=be,ie.q1=ie.q3=be,ie.lf=ie.uf=be,ie.mean=ie.sd=be,ie.ln=ie.un=be,ie.min=ie.max=be}Q=Math.min(Q,ie.min),oe=Math.max(oe,ie.max),ie.pts2=he.filter(q),L.push(ie)}}w._extremes[F._id]=u.findExtremes(F,[Q,oe],{padded:!0})}else{var ke=F.makeCalcdata(w,I),De=n(j,X),He=j.length,Ae=r(He);for(S=0;S<w._length;S++)if(H=ke[S],!!m(H)){var Le=T.findBin(G[S],De);Le>=0&&Le<He&&(U={v:H,i:S},s(U,w,S),Ae[Le].push(U))}var Ze=1/0,We=-1/0,ze=w.quartilemethod,Ie=ze==="exclusive",Ve=ze==="inclusive";for(S=0;S<He;S++)if(Ae[S].length>0){if(ie={},ie.pos=ie[R]=j[S],he=ie.pts=Ae[S].sort(b),K=ie[I]=he.map(g),$=K.length,ie.min=K[0],ie.max=K[$-1],ie.mean=T.mean(K,$),ie.sd=T.stdev(K,$,ie.mean),ie.med=T.interp(K,.5),$%2&&(Ie||Ve)){var dt,Ft;Ie?(dt=K.slice(0,$/2),Ft=K.slice($/2+1)):Ve&&(dt=K.slice(0,$/2+1),Ft=K.slice($/2)),ie.q1=T.interp(dt,.5),ie.q3=T.interp(Ft,.5)}else ie.q1=T.interp(K,.25),ie.q3=T.interp(K,.75);ie.lf=d(ie,K,$),ie.uf=f(ie,K,$),ie.lo=y(ie),ie.uo=l(ie);var Qt=x(ie,$);ie.ln=ie.med-Qt,ie.un=ie.med+Qt,Ze=Math.min(Ze,ie.ln),We=Math.max(We,ie.un),ie.pts2=he.filter(q),L.push(ie)}w._extremes[F._id]=u.findExtremes(F,w.notched?ke.concat([Ze,We]):ke,{padded:!0})}return o(L,w),L.length>0?(L[0].t={num:p[E],dPos:X,posLetter:R,valLetter:I,labels:{med:a(M,"median:"),min:a(M,"min:"),q1:a(M,"q1:"),q3:a(M,"q3:"),max:a(M,"max:"),mean:w.boxmean==="sd"?a(M,"mean \xB1 \u03C3:"):a(M,"mean:"),lf:a(M,"lower fence:"),uf:a(M,"upper fence:")}},p[E]++,L):[{t:{empty:!0}}]};function i(c,M,w,p){var _=M in c,h=M+"0"in c,L="d"+M in c;if(_||h&&L){var E=w.makeCalcdata(c,M),S=A(c,w,M,E).vals;return[S,E]}var P;h?P=c[M+"0"]:"name"in c&&(w.type==="category"||m(c.name)&&["linear","log"].indexOf(w.type)!==-1||T.isDateTime(c.name)&&w.type==="date")?P=c.name:P=p;for(var F=w.type==="multicategory"?w.r2c_just_indices(P):w.d2c(P,0,c[M+"calendar"]),I=c._length,D=new Array(I),R=0;R<I;R++)D[R]=F;return[D]}function n(c,M){for(var w=c.length,p=new Array(w+1),_=0;_<w;_++)p[_]=c[_]-M;return p[w]=c[w-1]+M,p}function r(c){for(var M=new Array(c),w=0;w<c;w++)M[w]=[];return M}var v={text:"tx",hovertext:"htx"};function s(c,M,w){for(var p in v)T.isArrayOrTypedArray(M[p])&&(Array.isArray(w)?T.isArrayOrTypedArray(M[p][w[0]])&&(c[v[p]]=M[p][w[0]][w[1]]):c[v[p]]=M[p][w])}function o(c,M){if(T.isArrayOrTypedArray(M.selectedpoints))for(var w=0;w<c.length;w++){for(var p=c[w].pts||[],_={},h=0;h<p.length;h++)_[p[h].i]=h;T.tagSelected(p,M,_)}}function b(c,M){return c.v-M.v}function g(c){return c.v}function d(c,M,w){return w===0?c.q1:Math.min(c.q1,M[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,M,!0)+1,w-1)])}function f(c,M,w){return w===0?c.q3:Math.max(c.q3,M[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,M),0)])}function y(c){return 4*c.q1-3*c.q3}function l(c){return 4*c.q3-3*c.q1}function x(c,M){return M===0?0:1.57*(c.q3-c.q1)/Math.sqrt(M)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../lib"),A=t("../../plots/cartesian/constraints").getAxisGroup,T=["v","h"];function e(i,n){for(var r=i.calcdata,v=n.xaxis,s=n.yaxis,o=0;o<T.length;o++){for(var b=T[o],g=b==="h"?s:v,d=[],f=0;f<r.length;f++){var y=r[f],l=y[0].t,x=y[0].trace;x.visible===!0&&(x.type==="box"||x.type==="candlestick")&&!l.empty&&(x.orientation||"v")===b&&x.xaxis===v._id&&x.yaxis===s._id&&d.push(f)}a("box",i,d,g)}}function a(i,n,r,v){var s=n.calcdata,o=n._fullLayout,b=v._id,g=b.charAt(0),d,f,y,l=[],x=0;for(d=0;d<r.length;d++)for(y=s[r[d]],f=0;f<y.length;f++)l.push(v.c2l(y[f].pos,!0)),x+=(y[f].pts2||[]).length;if(!!l.length){var c=u.distinctVals(l);(v.type==="category"||v.type==="multicategory")&&(c.minDiff=1);var M=c.minDiff/2;m.minDtick(v,c.minDiff,c.vals[0],!0);var w=i==="violin"?"_numViolins":"_numBoxes",p=o[w],_=o[i+"mode"]==="group"&&p>1,h=1-o[i+"gap"],L=1-o[i+"groupgap"];for(d=0;d<r.length;d++){y=s[r[d]];var E=y[0].trace,S=y[0].t,P=E.width,F=E.side,I,D,R,O;if(P)I=D=O=P/2,R=0;else if(I=M,_){var z=A(o,v._id)+E.orientation,G=o._alignmentOpts[z]||{},Y=G[E.alignmentgroup]||{},ee=Object.keys(Y.offsetGroups||{}).length,j=ee||p,X=ee?E._offsetIndex:S.num;D=I*h*L/j,R=2*I*(-.5+(X+.5)/j)*h,O=I*h/j}else D=I*h*L,R=0,O=I;S.dPos=I,S.bPos=R,S.bdPos=D,S.wHover=O;var ie,he,K=R+D,$,U,H,q,re,Z,Q=Boolean(P),oe=(E.boxpoints||E.points)&&x>0;if(F==="positive"?(ie=I*(P?1:.5),$=K,he=$=R):F==="negative"?(ie=$=R,he=I*(P?1:.5),U=K):(ie=he=I,$=U=K),oe){var se=E.pointpos,ae=E.jitter,le=E.marker.size/2,_e=0;se+ae>=0&&(_e=K*(se+ae),_e>ie?(Q=!0,re=le,H=_e):_e>$&&(re=le,H=ie)),_e<=ie&&(H=ie);var fe=0;se-ae<=0&&(fe=-K*(se-ae),fe>he?(Q=!0,Z=le,q=fe):fe>U&&(Z=le,q=he)),fe<=he&&(q=he)}else H=ie,q=he;var me=new Array(y.length);for(f=0;f<y.length;f++)me[f]=y[f].pos;E._extremes[b]=m.findExtremes(v,me,{padded:Q,vpadminus:q,vpadplus:H,vpadLinearized:!0,ppadminus:{x:Z,y:re}[g],ppadplus:{x:re,y:Z}[g]})}}}N.exports={crossTraceCalc:e,setPositionOffset:a}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(t,N,V){var m=t("../../lib"),u=t("../../registry"),A=t("../../components/color"),T=t("../scatter/period_defaults"),e=t("../bar/defaults").handleGroupingDefaults,a=t("../../plots/cartesian/axis_autotype"),i=t("./attributes");function n(o,b,g,d){function f(_,h){return m.coerce(o,b,i,_,h)}if(r(o,b,f,d),b.visible!==!1){T(o,b,d,f),f("xhoverformat"),f("yhoverformat");var y=b._hasPreCompStats;y&&(f("lowerfence"),f("upperfence")),f("line.color",(o.marker||{}).color||g),f("line.width"),f("fillcolor",A.addOpacity(b.line.color,.5));var l=!1;if(y){var x=f("mean"),c=f("sd");x&&x.length&&(l=!0,c&&c.length&&(l="sd"))}f("boxmean",l),f("whiskerwidth"),f("width"),f("quartilemethod");var M=!1;if(y){var w=f("notchspan");w&&w.length&&(M=!0)}else m.validate(o.notchwidth,i.notchwidth)&&(M=!0);var p=f("notched",M);p&&f("notchwidth"),v(o,b,f,{prefix:"box"})}}function r(o,b,g,d){function f(ee){var j=0;return ee&&ee.length&&(j+=1,m.isArrayOrTypedArray(ee[0])&&ee[0].length&&(j+=1)),j}function y(ee){return m.validate(o[ee],i[ee])}var l=g("y"),x=g("x"),c;if(b.type==="box"){var M=g("q1"),w=g("median"),p=g("q3");b._hasPreCompStats=M&&M.length&&w&&w.length&&p&&p.length,c=Math.min(m.minRowLength(M),m.minRowLength(w),m.minRowLength(p))}var _=f(l),h=f(x),L=_&&m.minRowLength(l),E=h&&m.minRowLength(x),S=d.calendar,P={autotypenumbers:d.autotypenumbers},F,I;if(b._hasPreCompStats)switch(String(h)+String(_)){case"00":var D=y("x0")||y("dx"),R=y("y0")||y("dy");R&&!D?F="h":F="v",I=c;break;case"10":F="v",I=Math.min(c,E);break;case"20":F="h",I=Math.min(c,x.length);break;case"01":F="h",I=Math.min(c,L);break;case"02":F="v",I=Math.min(c,l.length);break;case"12":F="v",I=Math.min(c,E,l.length);break;case"21":F="h",I=Math.min(c,x.length,L);break;case"11":I=0;break;case"22":var O=!1,z;for(z=0;z<x.length;z++)if(a(x[z],S,P)==="category"){O=!0;break}if(O)F="v",I=Math.min(c,E,l.length);else{for(z=0;z<l.length;z++)if(a(l[z],S,P)==="category"){O=!0;break}O?(F="h",I=Math.min(c,x.length,L)):(F="v",I=Math.min(c,E,l.length))}break}else _>0?(F="v",h>0?I=Math.min(E,L):I=Math.min(L)):h>0?(F="h",I=Math.min(E)):I=0;if(!I){b.visible=!1;return}b._length=I;var G=g("orientation",F);b._hasPreCompStats?G==="v"&&h===0?(g("x0",0),g("dx",1)):G==="h"&&_===0&&(g("y0",0),g("dy",1)):G==="v"&&h===0?g("x0"):G==="h"&&_===0&&g("y0");var Y=u.getComponentMethod("calendars","handleTraceDefaults");Y(o,b,["x","y"],d)}function v(o,b,g,d){var f=d.prefix,y=m.coerce2(o,b,i,"marker.outliercolor"),l=g("marker.line.outliercolor"),x="outliers";b._hasPreCompStats?x="all":(y||l)&&(x="suspectedoutliers");var c=g(f+"points",x);c?(g("jitter",c==="all"?.3:0),g("pointpos",c==="all"?-1.5:0),g("marker.symbol"),g("marker.opacity"),g("marker.size"),g("marker.angle"),g("marker.color",b.line.color),g("marker.line.color"),g("marker.line.width"),c==="suspectedoutliers"&&(g("marker.line.outliercolor",b.marker.color),g("marker.line.outlierwidth")),g("selected.marker.color"),g("unselected.marker.color"),g("selected.marker.size"),g("unselected.marker.size"),g("text"),g("hovertext")):delete b.marker;var M=g("hoveron");(M==="all"||M.indexOf("points")!==-1)&&g("hovertemplate"),m.coerceSelectionMarkerOpacity(b,g)}function s(o,b){var g,d;function f(x){return m.coerce(d._input,d,i,x)}for(var y=0;y<o.length;y++){d=o[y];var l=d.type;(l==="box"||l==="violin")&&(g=d._input,b[l+"mode"]==="group"&&e(g,d,b,f))}}N.exports={supplyDefaults:n,crossTraceDefaults:s,handleSampleDefaults:r,handlePointsDefaults:v}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(t,N,V){N.exports=function(u,A){return A.hoverOnBox&&(u.hoverOnBox=A.hoverOnBox),"xVal"in A&&(u.x=A.xVal),"yVal"in A&&(u.y=A.yVal),A.xa&&(u.xaxis=A.xa),A.ya&&(u.yaxis=A.ya),u}},{}],687:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../lib"),A=t("../../components/fx"),T=t("../../components/color"),e=u.fillText;function a(r,v,s,o){var b=r.cd,g=b[0].trace,d=g.hoveron,f=[],y;return d.indexOf("boxes")!==-1&&(f=f.concat(i(r,v,s,o))),d.indexOf("points")!==-1&&(y=n(r,v,s)),o==="closest"?y?[y]:f:(y&&f.push(y),f)}function i(r,v,s,o){var b=r.cd,g=r.xa,d=r.ya,f=b[0].trace,y=b[0].t,l=f.type==="violin",x,c,M,w,p,_,h,L,E,S,P,F=y.bdPos,I,D,R=y.wHover,O=function(fe){return M.c2l(fe.pos)+y.bPos-M.c2l(_)};l&&f.side!=="both"?(f.side==="positive"&&(E=function(fe){var me=O(fe);return A.inbox(me,me+R,S)},I=F,D=0),f.side==="negative"&&(E=function(fe){var me=O(fe);return A.inbox(me-R,me,S)},I=0,D=F)):(E=function(fe){var me=O(fe);return A.inbox(me-R,me+R,S)},I=D=F);var z;l?z=function(fe){return A.inbox(fe.span[0]-p,fe.span[1]-p,S)}:z=function(fe){return A.inbox(fe.min-p,fe.max-p,S)},f.orientation==="h"?(p=v,_=s,h=z,L=E,x="y",M=d,c="x",w=g):(p=s,_=v,h=E,L=z,x="x",M=g,c="y",w=d);var G=Math.min(1,F/Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0])));S=r.maxHoverDistance-G,P=r.maxSpikeDistance-G;function Y(fe){return(h(fe)+L(fe))/2}var ee=A.getDistanceFunction(o,h,L,Y);if(A.getClosest(b,ee,r),r.index===!1)return[];var j=b[r.index],X=f.line.color,ie=(f.marker||{}).color;T.opacity(X)&&f.line.width?r.color=X:T.opacity(ie)&&f.boxpoints?r.color=ie:r.color=f.fillcolor,r[x+"0"]=M.c2p(j.pos+y.bPos-D,!0),r[x+"1"]=M.c2p(j.pos+y.bPos+I,!0),r[x+"LabelVal"]=j.orig_p!==void 0?j.orig_p:j.pos;var he=x+"Spike";r.spikeDistance=Y(j)*P/S,r[he]=M.c2p(j.pos,!0);var K=f.boxmean||(f.meanline||{}).visible,$=f.boxpoints||f.points,U=$&&K?["max","uf","q3","med","mean","q1","lf","min"]:$&&!K?["max","uf","q3","med","q1","lf","min"]:!$&&K?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],H=w.range[1]<w.range[0];f.orientation===(H?"v":"h")&&U.reverse();for(var q=r.spikeDistance,re=r[he],Z=[],Q=0;Q<U.length;Q++){var oe=U[Q];if(oe in j){var se=j[oe],ae=w.c2p(se,!0),le=u.extendFlat({},r);le.attr=oe,le[c+"0"]=le[c+"1"]=ae,le[c+"LabelVal"]=se,le[c+"Label"]=(y.labels?y.labels[oe]+" ":"")+m.hoverLabelText(w,se,f[c+"hoverformat"]),le.hoverOnBox=!0,oe==="mean"&&"sd"in j&&f.boxmean==="sd"&&(le[c+"err"]=j.sd),le.hovertemplate=!1,Z.push(le)}}r.name="",r.spikeDistance=void 0,r[he]=void 0;for(var _e=0;_e<Z.length;_e++)Z[_e].attr!=="med"?(Z[_e].name="",Z[_e].spikeDistance=void 0,Z[_e][he]=void 0):(Z[_e].spikeDistance=q,Z[_e][he]=re);return Z}function n(r,v,s){for(var o=r.cd,b=r.xa,g=r.ya,d=o[0].trace,f=b.c2p(v),y=g.c2p(s),l,x=function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(b.c2p(z.x)-f)-G,1-3/G)},c=function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(g.c2p(z.y)-y)-G,1-3/G)},M=A.quadrature(x,c),w=!1,p,_,h=0;h<o.length;h++){p=o[h];for(var L=0;L<(p.pts||[]).length;L++){_=p.pts[L];var E=M(_);E<=r.distance&&(r.distance=E,w=[h,L])}}if(!w)return!1;p=o[w[0]],_=p.pts[w[1]];var S=b.c2p(_.x,!0),P=g.c2p(_.y,!0),F=_.mrc||1;l=u.extendFlat({},r,{index:_.i,color:(d.marker||{}).color,name:d.name,x0:S-F,x1:S+F,y0:P-F,y1:P+F,spikeDistance:r.distance,hovertemplate:d.hovertemplate});var I=p.orig_p,D=I!==void 0?I:p.pos,R;d.orientation==="h"?(R=g,l.xLabelVal=_.x,l.yLabelVal=D):(R=b,l.xLabelVal=D,l.yLabelVal=_.y);var O=R._id.charAt(0);return l[O+"Spike"]=R.c2p(p.pos,!0),e(_,d,l),l}N.exports={hoverPoints:a,hoverOnBoxes:i,hoverOnPoints:n}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults").supplyLayoutDefaults,calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"box",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(t,N,V){N.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("./layout_attributes");function T(a,i,n,r,v){for(var s=v+"Layout",o=!1,b=0;b<n.length;b++){var g=n[b];if(m.traceIs(g,s)){o=!0;break}}!o||(r(v+"mode"),r(v+"gap"),r(v+"groupgap"))}function e(a,i,n){function r(v,s){return u.coerce(a,i,A,v,s)}T(a,i,n,r,"box")}N.exports={supplyLayoutDefaults:e,_supply:T}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../components/drawing"),T=5,e=.01;function a(v,s,o,b){var g=s.xaxis,d=s.yaxis;u.makeTraceGroups(b,o,"trace boxes").each(function(f){var y=m.select(this),l=f[0],x=l.t,c=l.trace;if(x.wdPos=x.bdPos*c.whiskerwidth,c.visible!==!0||x.empty){y.remove();return}var M,w;c.orientation==="h"?(M=d,w=g):(M=g,w=d),i(y,{pos:M,val:w},c,x),n(y,{x:g,y:d},c,x),r(y,{pos:M,val:w},c,x)})}function i(v,s,o,b){var g=o.orientation==="h",d=s.val,f=s.pos,y=!!f.rangebreaks,l=b.bPos,x=b.wdPos||0,c=b.bPosPxOffset||0,M=o.whiskerwidth||0,w=o.notched||!1,p=w?1-2*o.notchwidth:1,_,h;Array.isArray(b.bdPos)?(_=b.bdPos[0],h=b.bdPos[1]):(_=b.bdPos,h=b.bdPos);var L=v.selectAll("path.box").data(o.type!=="violin"||o.box.visible?u.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(E){if(E.empty)return"M0,0Z";var S=f.c2l(E.pos+l,!0),P=f.l2p(S-_)+c,F=f.l2p(S+h)+c,I=y?(P+F)/2:f.l2p(S)+c,D=o.whiskerwidth,R=y?P*D+(1-D)*I:f.l2p(S-x)+c,O=y?F*D+(1-D)*I:f.l2p(S+x)+c,z=f.l2p(S-_*p)+c,G=f.l2p(S+h*p)+c,Y=d.c2p(E.q1,!0),ee=d.c2p(E.q3,!0),j=u.constrain(d.c2p(E.med,!0),Math.min(Y,ee)+1,Math.max(Y,ee)-1),X=E.lf===void 0||o.boxpoints===!1,ie=d.c2p(X?E.min:E.lf,!0),he=d.c2p(X?E.max:E.uf,!0),K=d.c2p(E.ln,!0),$=d.c2p(E.un,!0);g?m.select(this).attr("d","M"+j+","+z+"V"+G+"M"+Y+","+P+"V"+F+(w?"H"+K+"L"+j+","+G+"L"+$+","+F:"")+"H"+ee+"V"+P+(w?"H"+$+"L"+j+","+z+"L"+K+","+P:"")+"ZM"+Y+","+I+"H"+ie+"M"+ee+","+I+"H"+he+(M===0?"":"M"+ie+","+R+"V"+O+"M"+he+","+R+"V"+O)):m.select(this).attr("d","M"+z+","+j+"H"+G+"M"+P+","+Y+"H"+F+(w?"V"+K+"L"+G+","+j+"L"+F+","+$:"")+"V"+ee+"H"+P+(w?"V"+$+"L"+z+","+j+"L"+P+","+K:"")+"ZM"+I+","+Y+"V"+ie+"M"+I+","+ee+"V"+he+(M===0?"":"M"+R+","+ie+"H"+O+"M"+R+","+he+"H"+O))})}function n(v,s,o,b){var g=s.x,d=s.y,f=b.bdPos,y=b.bPos,l=o.boxpoints||o.points;u.seedPseudoRandom();var x=function(w){return w.forEach(function(p){p.t=b,p.trace=o}),w},c=v.selectAll("g.points").data(l?x:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var M=c.selectAll("path").data(function(w){var p,_=w.pts2,h=Math.max((w.max-w.min)/10,w.q3-w.q1),L=h*1e-9,E=h*e,S=[],P=0,F;if(o.jitter){if(h===0)for(P=1,S=new Array(_.length),p=0;p<_.length;p++)S[p]=1;else for(p=0;p<_.length;p++){var I=Math.max(0,p-T),D=_[I].v,R=Math.min(_.length-1,p+T),O=_[R].v;l!=="all"&&(_[p].v<w.lf?O=Math.min(O,w.lf):D=Math.max(D,w.uf));var z=Math.sqrt(E*(R-I)/(O-D+L))||0;z=u.constrain(Math.abs(z),0,1),S.push(z),P=Math.max(z,P)}F=o.jitter*2/(P||1)}for(p=0;p<_.length;p++){var G=_[p],Y=G.v,ee=o.jitter?F*S[p]*(u.pseudoRandom()-.5):0,j=w.pos+y+f*(o.pointpos+ee);o.orientation==="h"?(G.y=j,G.x=Y):(G.x=j,G.y=Y),l==="suspectedoutliers"&&Y<w.uo&&Y>w.lo&&(G.so=!0)}return _});M.enter().append("path").classed("point",!0),M.exit().remove(),M.call(A.translatePoints,g,d)}function r(v,s,o,b){var g=s.val,d=s.pos,f=!!d.rangebreaks,y=b.bPos,l=b.bPosPxOffset||0,x=o.boxmean||(o.meanline||{}).visible,c,M;Array.isArray(b.bdPos)?(c=b.bdPos[0],M=b.bdPos[1]):(c=b.bdPos,M=b.bdPos);var w=v.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?u.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(p){var _=d.c2l(p.pos+y,!0),h=d.l2p(_-c)+l,L=d.l2p(_+M)+l,E=f?(h+L)/2:d.l2p(_)+l,S=g.c2p(p.mean,!0),P=g.c2p(p.mean-p.sd,!0),F=g.c2p(p.mean+p.sd,!0);o.orientation==="h"?m.select(this).attr("d","M"+S+","+h+"V"+L+(x==="sd"?"m0,0L"+P+","+E+"L"+S+","+h+"L"+F+","+E+"Z":"")):m.select(this).attr("d","M"+h+","+S+"H"+L+(x==="sd"?"m0,0L"+E+","+P+"L"+h+","+S+"L"+E+","+F+"Z":""))})}N.exports={plot:a,plotBoxAndWhiskers:i,plotPoints:n,plotBoxMean:r}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(t,N,V){N.exports=function(u,A){var T=u.cd,e=u.xaxis,a=u.yaxis,i=[],n,r;if(A===!1)for(n=0;n<T.length;n++)for(r=0;r<(T[n].pts||[]).length;r++)T[n].pts[r].selected=0;else for(n=0;n<T.length;n++)for(r=0;r<(T[n].pts||[]).length;r++){var v=T[n].pts[r],s=e.c2p(v.x),o=a.c2p(v.y);A.contains([s,o],null,v.i,u)?(i.push({pointNumber:v.i,x:e.c2d(v.x),y:a.c2d(v.y)}),v.selected=1):v.selected=0}return i}},{}],693:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/color"),A=t("../../components/drawing");function T(a,i,n){var r=n||m.select(a).selectAll("g.trace.boxes");r.style("opacity",function(v){return v[0].trace.opacity}),r.each(function(v){var s=m.select(this),o=v[0].trace,b=o.line.width;function g(y,l,x,c){y.style("stroke-width",l+"px").call(u.stroke,x).call(u.fill,c)}var d=s.selectAll("path.box");if(o.type==="candlestick")d.each(function(y){if(!y.empty){var l=m.select(this),x=o[y.dir];g(l,x.line.width,x.line.color,x.fillcolor),l.style("opacity",o.selectedpoints&&!y.selected?.3:1)}});else{g(d,b,o.line.color,o.fillcolor),s.selectAll("path.mean").style({"stroke-width":b,"stroke-dasharray":2*b+"px,"+b+"px"}).call(u.stroke,o.line.color);var f=s.selectAll("path.point");A.pointStyle(f,o,a)}})}function e(a,i,n){var r=i[0].trace,v=n.selectAll("path.point");r.selectedpoints?A.selectedPointStyle(v,r):A.pointStyle(v,r,a)}N.exports={style:T,styleOnSelect:e}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(t,N,V){var m=t("../../lib").extendFlat,u=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../ohlc/attributes"),T=t("../box/attributes");function e(a){return{line:{color:m({},T.line.color,{dflt:a}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}N.exports={xperiod:A.xperiod,xperiod0:A.xperiod0,xperiodalignment:A.xperiodalignment,xhoverformat:u("x"),yhoverformat:u("y"),x:A.x,open:A.open,high:A.high,low:A.low,close:A.close,line:{width:m({},T.line.width,{}),editType:"style"},increasing:e(A.increasing.line.color.dflt),decreasing:e(A.decreasing.line.color.dflt),text:A.text,hovertext:A.hovertext,whiskerwidth:m({},T.whiskerwidth,{dflt:0}),hoverlabel:A.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("../../plots/cartesian/align_period"),T=t("../ohlc/calc").calcCommon;N.exports=function(a,i){var n=a._fullLayout,r=u.getFromId(a,i.xaxis),v=u.getFromId(a,i.yaxis),s=r.makeCalcdata(i,"x"),o=A(i,r,"x",s).vals,b=T(a,i,s,o,v,e);return b.length?(m.extendFlat(b[0].t,{num:n._numBoxes,dPos:m.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,b):[{t:{empty:!0}}]};function e(a,i,n,r){return{min:n,q1:Math.min(a,r),med:r,q3:Math.max(a,r),max:i}}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color"),A=t("../ohlc/ohlc_defaults"),T=t("../scatter/period_defaults"),e=t("./attributes");N.exports=function(n,r,v,s){function o(g,d){return m.coerce(n,r,e,g,d)}var b=A(n,r,o,s);if(!b){r.visible=!1;return}T(n,r,s,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),a(n,r,o,"increasing"),a(n,r,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),s._requestRangeslider[r.xaxis]=!0};function a(i,n,r,v){var s=r(v+".line.color");r(v+".line.width",n.line.width),r(v+".fillcolor",u.addOpacity(s,.5))}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(t,N,V){N.exports={moduleType:"trace",name:"candlestick",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t("./attributes"),layoutAttributes:t("../box/layout_attributes"),supplyLayoutDefaults:t("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:t("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("../box/plot").plot,layerName:"boxlayer",style:t("../box/style").style,hoverPoints:t("../ohlc/hover").hoverPoints,selectPoints:t("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(t,N,V){var m=t("./axis_defaults"),u=t("../../plot_api/plot_template");N.exports=function(e,a,i,n,r){var v=n("a");v||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),A(e,a,i,r)};function A(T,e,a,i){var n=["aaxis","baxis"];n.forEach(function(r){var v=r.charAt(0),s=T[r]||{},o=u.newContainer(e,r),b={noTicklabelstep:!0,tickfont:"x",id:v+"axis",letter:v,font:e.font,name:r,data:T[v],calendar:e.calendar,dfltColor:i,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};m(s,o,b),o._categories=o._categories||[],!T[r]&&s.type!=="-"&&(T[r]={type:s.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(t,N,V){var m=t("../../lib").isArrayOrTypedArray;N.exports=function(A){return u(A,0)};function u(A,T){if(!m(A)||T>=10)return null;for(var e=1/0,a=-1/0,i=A.length,n=0;n<i;n++){var r=A[n];if(m(r)){var v=u(r,T+1);v&&(e=Math.min(v[0],e),a=Math.max(v[1],a))}else e=Math.min(r,e),a=Math.max(r,a)}return[e,a]}},{"../../lib":515}],700:[function(t,N,V){var m=t("../../plots/font_attributes"),u=t("./axis_attributes"),A=t("../../components/color/attributes"),T=m({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=A.defaultLine,N.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:u,baxis:u,font:T,color:{valType:"color",dflt:A.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(t,N,V){var m=t("../../lib").isArrayOrTypedArray;N.exports=function(u,A,T,e){var a,i,n,r,v,s,o,b,g,d,f,y,l,x=m(T)?"a":"b",c=x==="a"?u.aaxis:u.baxis,M=c.smoothing,w=x==="a"?u.a2i:u.b2j,p=x==="a"?T:e,_=x==="a"?e:T,h=x==="a"?A.a.length:A.b.length,L=x==="a"?A.b.length:A.a.length,E=Math.floor(x==="a"?u.b2j(_):u.a2i(_)),S=x==="a"?function(X){return u.evalxy([],X,E)}:function(X){return u.evalxy([],E,X)};M&&(n=Math.max(0,Math.min(L-2,E)),r=E-n,i=x==="a"?function(X,ie){return u.dxydi([],X,n,ie,r)}:function(X,ie){return u.dxydj([],n,X,r,ie)});var P=w(p[0]),F=w(p[1]),I=P<F?1:-1,D=(F-P)*1e-8,R=I>0?Math.floor:Math.ceil,O=I>0?Math.ceil:Math.floor,z=I>0?Math.min:Math.max,G=I>0?Math.max:Math.min,Y=R(P+D),ee=O(F-D);o=S(P);var j=[[o]];for(a=Y;a*I<ee*I;a+=I)v=[],f=G(P,a),y=z(F,a+I),l=y-f,s=Math.max(0,Math.min(h-2,Math.floor(.5*(f+y)))),b=S(y),M&&(g=i(s,f-s),d=i(s,y-s),v.push([o[0]+g[0]/3*l,o[1]+g[1]/3*l]),v.push([b[0]-d[0]/3*l,b[1]-d[1]/3*l])),v.push(b),j.push(v),o=b;return j}},{"../../lib":515}],702:[function(t,N,V){var m=t("../../plots/font_attributes"),u=t("../../components/color/attributes"),A=t("../../plots/cartesian/layout_attributes"),T=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=t("../../plot_api/edit_types").overrideAll,a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat;N.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:m({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:A.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:m({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:e(A.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:u.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:i({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:i({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:u.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:m({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(t,N,V){var m=t("./attributes"),u=t("../../components/color").addOpacity,A=t("../../registry"),T=t("../../lib"),e=t("../../plots/cartesian/tick_value_defaults"),a=t("../../plots/cartesian/tick_label_defaults"),i=t("../../plots/cartesian/prefix_suffix_defaults"),n=t("../../plots/cartesian/category_order_defaults"),r=t("../../plots/cartesian/set_convert"),v=t("../../plots/cartesian/axis_autotype");N.exports=function(b,g,d){var f=d.letter,y=d.font||{},l=m[f+"axis"];function x(Y,ee){return T.coerce(b,g,l,Y,ee)}function c(Y,ee){return T.coerce2(b,g,l,Y,ee)}d.name&&(g._name=d.name,g._id=d.name),x("autotypenumbers",d.autotypenumbersDflt);var M=x("type");if(M==="-"&&(d.data&&s(g,d.data),g.type==="-"?g.type="linear":M=b.type=g.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",f+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),g.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),g._hovertitle=f,M==="date"){var w=A.getComponentMethod("calendars","handleDefaults");w(b,g,"calendar",d.calendar)}r(g,d.fullLayout),g.c2p=T.identity;var p=x("color",d.dfltColor),_=p===b.color?p:y.color,h=x("title.text");h&&(T.coerceFont(x,"title.font",{family:y.family,size:T.bigFont(y.size),color:_}),x("title.offset")),x("tickangle");var L=x("autorange",!g.isValidRange(b.range));L&&x("rangemode"),x("range"),g.cleanRange(),x("fixedrange"),e(b,g,x,M),i(b,g,x,M,d),a(b,g,x,M,d),n(b,g,x,{data:d.data,dataAttr:f});var E=c("gridcolor",u(p,.3)),S=c("gridwidth"),P=c("griddash"),F=x("showgrid");F||(delete g.gridcolor,delete g.gridwidth,delete g.griddash);var I=c("startlinecolor",p),D=c("startlinewidth",S),R=x("startline",g.showgrid||!!I||!!D);R||(delete g.startlinecolor,delete g.startlinewidth);var O=c("endlinecolor",p),z=c("endlinewidth",S),G=x("endline",g.showgrid||!!O||!!z);return G||(delete g.endlinecolor,delete g.endlinewidth),F?(x("minorgridcount"),x("minorgridwidth",S),x("minorgriddash",P),x("minorgridcolor",u(E,.06)),g.minorgridcount||(delete g.minorgridwidth,delete g.minorgriddash,delete g.minorgridcolor)):(delete g.gridcolor,delete g.gridwidth,delete g.griddash),g.showticklabels==="none"&&(delete g.tickfont,delete g.tickangle,delete g.showexponent,delete g.exponentformat,delete g.minexponent,delete g.tickformat,delete g.showticksuffix,delete g.showtickprefix),g.showticksuffix||delete g.ticksuffix,g.showtickprefix||delete g.tickprefix,x("tickmode"),g};function s(o,b){if(o.type==="-"){var g=o._id,d=g.charAt(0),f=d+"calendar",y=o[f];o.type=v(b,y,{autotypenumbers:o.autotypenumbers})}}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../lib").isArray1D,A=t("./cheater_basis"),T=t("./array_minmax"),e=t("./calc_gridlines"),a=t("./calc_labels"),i=t("./calc_clippath"),n=t("../heatmap/clean_2d_array"),r=t("./smooth_fill_2d_array"),v=t("../heatmap/convert_column_xyz"),s=t("./set_convert");N.exports=function(b,g){var d=m.getFromId(b,g.xaxis),f=m.getFromId(b,g.yaxis),y=g.aaxis,l=g.baxis,x=g.x,c=g.y,M=[];x&&u(x)&&M.push("x"),c&&u(c)&&M.push("y"),M.length&&v(g,y,l,"a","b",M);var w=g._a=g._a||g.a,p=g._b=g._b||g.b;x=g._x||g.x,c=g._y||g.y;var _={};if(g._cheater){var h=y.cheatertype==="index"?w.length:w,L=l.cheatertype==="index"?p.length:p;x=A(h,L,g.cheaterslope)}g._x=x=n(x),g._y=c=n(c),r(x,w,p),r(c,w,p),s(g),g.setScale();var E=T(x),S=T(c),P=.5*(E[1]-E[0]),F=.5*(E[1]+E[0]),I=.5*(S[1]-S[0]),D=.5*(S[1]+S[0]),R=1.3;return E=[F-P*R,F+P*R],S=[D-I*R,D+I*R],g._extremes[d._id]=m.findExtremes(d,E,{padded:!0}),g._extremes[f._id]=m.findExtremes(f,S,{padded:!0}),e(g,"a","b"),e(g,"b","a"),a(g,y),a(g,l),_.clipsegments=i(g._xctrl,g._yctrl,y,l),_.x=x,_.y=c,_.a=w,_.b=p,[_]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(t,N,V){N.exports=function(u,A,T,e){var a,i,n,r=[],v=!!T.smoothing,s=!!e.smoothing,o=u[0].length-1,b=u.length-1;for(a=0,i=[],n=[];a<=o;a++)i[a]=u[0][a],n[a]=A[0][a];for(r.push({x:i,y:n,bicubic:v}),a=0,i=[],n=[];a<=b;a++)i[a]=u[a][o],n[a]=A[a][o];for(r.push({x:i,y:n,bicubic:s}),a=o,i=[],n=[];a>=0;a--)i[o-a]=u[b][a],n[o-a]=A[b][a];for(r.push({x:i,y:n,bicubic:v}),a=b,i=[],n=[];a>=0;a--)i[b-a]=u[a][0],n[b-a]=A[a][0];return r.push({x:i,y:n,bicubic:s}),r}},{}],706:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../lib/extend").extendFlat;N.exports=function(T,e,a){var i,n,r,v,s,o,b,g,d,f,y,l,x,c,M=T["_"+e],w=T[e+"axis"],p=w._gridlines=[],_=w._minorgridlines=[],h=w._boundarylines=[],L=T["_"+a],E=T[a+"axis"];w.tickmode==="array"&&(w.tickvals=M.slice());var S=T._xctrl,P=T._yctrl,F=S[0].length,I=S.length,D=T._a.length,R=T._b.length;m.prepTicks(w),w.tickmode==="array"&&delete w.tickvals;var O=w.smoothing?3:1;function z(Y){var ee,j,X,ie,he,K,$,U,H,q,re,Z,Q=[],oe=[],se={};if(e==="b")for(j=T.b2j(Y),X=Math.floor(Math.max(0,Math.min(R-2,j))),ie=j-X,se.length=R,se.crossLength=D,se.xy=function(ae){return T.evalxy([],ae,j)},se.dxy=function(ae,le){return T.dxydi([],ae,X,le,ie)},ee=0;ee<D;ee++)K=Math.min(D-2,ee),$=ee-K,U=T.evalxy([],ee,j),E.smoothing&&ee>0&&(H=T.dxydi([],ee-1,X,0,ie),Q.push(he[0]+H[0]/3),oe.push(he[1]+H[1]/3),q=T.dxydi([],ee-1,X,1,ie),Q.push(U[0]-q[0]/3),oe.push(U[1]-q[1]/3)),Q.push(U[0]),oe.push(U[1]),he=U;else for(ee=T.a2i(Y),K=Math.floor(Math.max(0,Math.min(D-2,ee))),$=ee-K,se.length=D,se.crossLength=R,se.xy=function(ae){return T.evalxy([],ee,ae)},se.dxy=function(ae,le){return T.dxydj([],K,ae,$,le)},j=0;j<R;j++)X=Math.min(R-2,j),ie=j-X,U=T.evalxy([],ee,j),E.smoothing&&j>0&&(re=T.dxydj([],K,j-1,$,0),Q.push(he[0]+re[0]/3),oe.push(he[1]+re[1]/3),Z=T.dxydj([],K,j-1,$,1),Q.push(U[0]-Z[0]/3),oe.push(U[1]-Z[1]/3)),Q.push(U[0]),oe.push(U[1]),he=U;return se.axisLetter=e,se.axis=w,se.crossAxis=E,se.value=Y,se.constvar=a,se.index=g,se.x=Q,se.y=oe,se.smoothing=E.smoothing,se}function G(Y){var ee,j,X,ie,he,K=[],$=[],U={};if(U.length=M.length,U.crossLength=L.length,e==="b")for(X=Math.max(0,Math.min(R-2,Y)),he=Math.min(1,Math.max(0,Y-X)),U.xy=function(H){return T.evalxy([],H,Y)},U.dxy=function(H,q){return T.dxydi([],H,X,q,he)},ee=0;ee<F;ee++)K[ee]=S[Y*O][ee],$[ee]=P[Y*O][ee];else for(j=Math.max(0,Math.min(D-2,Y)),ie=Math.min(1,Math.max(0,Y-j)),U.xy=function(H){return T.evalxy([],Y,H)},U.dxy=function(H,q){return T.dxydj([],j,H,ie,q)},ee=0;ee<I;ee++)K[ee]=S[ee][Y*O],$[ee]=P[ee][Y*O];return U.axisLetter=e,U.axis=w,U.crossAxis=E,U.value=M[Y],U.constvar=a,U.index=Y,U.x=K,U.y=$,U.smoothing=E.smoothing,U}if(w.tickmode==="array"){for(v=5e-15,s=[Math.floor((M.length-1-w.arraytick0)/w.arraydtick*(1+v)),Math.ceil(-w.arraytick0/w.arraydtick/(1+v))].sort(function(Y,ee){return Y-ee}),o=s[0]-1,b=s[1]+1,g=o;g<b;g++)n=w.arraytick0+w.arraydtick*g,!(n<0||n>M.length-1)&&p.push(u(G(n),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(g=o;g<b;g++)if(r=w.arraytick0+w.arraydtick*g,y=Math.min(r+w.arraydtick,M.length-1),!(r<0||r>M.length-1)&&!(y<0||y>M.length-1))for(l=M[r],x=M[y],i=0;i<w.minorgridcount;i++)c=y-r,!(c<=0)&&(f=l+(x-l)*(i+1)/(w.minorgridcount+1)*(w.arraydtick/c),!(f<M[0]||f>M[M.length-1])&&_.push(u(z(f),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash})));w.startline&&h.push(u(G(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&h.push(u(G(M.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(v=5e-15,s=[Math.floor((M[M.length-1]-w.tick0)/w.dtick*(1+v)),Math.ceil((M[0]-w.tick0)/w.dtick/(1+v))].sort(function(Y,ee){return Y-ee}),o=s[0],b=s[1],g=o;g<=b;g++)d=w.tick0+w.dtick*g,p.push(u(z(d),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(g=o-1;g<b+1;g++)for(d=w.tick0+w.dtick*g,i=0;i<w.minorgridcount;i++)f=d+w.dtick*(i+1)/(w.minorgridcount+1),!(f<M[0]||f>M[M.length-1])&&_.push(u(z(f),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&h.push(u(z(M[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&h.push(u(z(M[M.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../lib/extend").extendFlat;N.exports=function(T,e){var a,i,n,r,v,s=e._labels=[],o=e._gridlines;for(a=0;a<o.length;a++)v=o[a],["start","both"].indexOf(e.showticklabels)!==-1&&(i=m.tickText(e,v.value),u(i,{prefix:n,suffix:r,endAnchor:!0,xy:v.xy(0),dxy:v.dxy(0,0),axis:v.axis,length:v.crossAxis.length,font:v.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i)),["end","both"].indexOf(e.showticklabels)!==-1&&(i=m.tickText(e,v.value),u(i,{endAnchor:!1,xy:v.xy(v.crossLength-1),dxy:v.dxy(v.crossLength-2,1),axis:v.axis,length:v.crossAxis.length,font:v.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(t,N,V){var m=.5;N.exports=function(A,T,e,a){var i=A[0]-T[0],n=A[1]-T[1],r=e[0]-T[0],v=e[1]-T[1],s=Math.pow(i*i+n*n,m/2),o=Math.pow(r*r+v*v,m/2),b=(o*o*i-s*s*r)*a,g=(o*o*n-s*s*v)*a,d=o*(s+o)*3,f=s*(s+o)*3;return[[T[0]+(d&&b/d),T[1]+(d&&g/d)],[T[0]-(f&&b/f),T[1]-(f&&g/f)]]}},{}],709:[function(t,N,V){var m=t("../../lib").isArrayOrTypedArray;N.exports=function(u,A,T){var e,a,i,n,r,v,s=[],o=m(u)?u.length:u,b=m(A)?A.length:A,g=m(u)?u:null,d=m(A)?A:null;g&&(i=(g.length-1)/(g[g.length-1]-g[0])/(o-1)),d&&(n=(d.length-1)/(d[d.length-1]-d[0])/(b-1));var f,y=1/0,l=-1/0;for(a=0;a<b;a++)for(s[a]=[],v=d?(d[a]-d[0])*n:a/(b-1),e=0;e<o;e++)r=g?(g[e]-g[0])*i:e/(o-1),f=r-v*T,y=Math.min(f,y),l=Math.max(f,l),s[a][e]=f;var x=1/(l-y),c=-y*x;for(a=0;a<b;a++)for(e=0;e<o;e++)s[a][e]=x*s[a][e]+c;return s}},{"../../lib":515}],710:[function(t,N,V){var m=t("./catmull_rom"),u=t("../../lib").ensureArray;function A(T,e,a){var i=-.5*a[0]+1.5*e[0],n=-.5*a[1]+1.5*e[1];return[(2*i+T[0])/3,(2*n+T[1])/3]}N.exports=function(e,a,i,n,r,v){var s,o,b,g,d,f,y,l,x,c,M=i[0].length,w=i.length,p=r?3*M-2:M,_=v?3*w-2:w;for(e=u(e,_),a=u(a,_),b=0;b<_;b++)e[b]=u(e[b],p),a[b]=u(a[b],p);for(o=0,g=0;o<w;o++,g+=v?3:1)for(d=e[g],f=a[g],y=i[o],l=n[o],s=0,b=0;s<M;s++,b+=r?3:1)d[b]=y[s],f[b]=l[s];if(r)for(o=0,g=0;o<w;o++,g+=v?3:1){for(s=1,b=3;s<M-1;s++,b+=3)x=m([i[o][s-1],n[o][s-1]],[i[o][s],n[o][s]],[i[o][s+1],n[o][s+1]],r),e[g][b-1]=x[0][0],a[g][b-1]=x[0][1],e[g][b+1]=x[1][0],a[g][b+1]=x[1][1];c=A([e[g][0],a[g][0]],[e[g][2],a[g][2]],[e[g][3],a[g][3]]),e[g][1]=c[0],a[g][1]=c[1],c=A([e[g][p-1],a[g][p-1]],[e[g][p-3],a[g][p-3]],[e[g][p-4],a[g][p-4]]),e[g][p-2]=c[0],a[g][p-2]=c[1]}if(v)for(b=0;b<p;b++){for(g=3;g<_-3;g+=3)x=m([e[g-3][b],a[g-3][b]],[e[g][b],a[g][b]],[e[g+3][b],a[g+3][b]],v),e[g-1][b]=x[0][0],a[g-1][b]=x[0][1],e[g+1][b]=x[1][0],a[g+1][b]=x[1][1];c=A([e[0][b],a[0][b]],[e[2][b],a[2][b]],[e[3][b],a[3][b]]),e[1][b]=c[0],a[1][b]=c[1],c=A([e[_-1][b],a[_-1][b]],[e[_-3][b],a[_-3][b]],[e[_-4][b],a[_-4][b]]),e[_-2][b]=c[0],a[_-2][b]=c[1]}if(r&&v)for(g=1;g<_;g+=(g+1)%3===0?2:1){for(b=3;b<p-3;b+=3)x=m([e[g][b-3],a[g][b-3]],[e[g][b],a[g][b]],[e[g][b+3],a[g][b+3]],r),e[g][b-1]=.5*(e[g][b-1]+x[0][0]),a[g][b-1]=.5*(a[g][b-1]+x[0][1]),e[g][b+1]=.5*(e[g][b+1]+x[1][0]),a[g][b+1]=.5*(a[g][b+1]+x[1][1]);c=A([e[g][0],a[g][0]],[e[g][2],a[g][2]],[e[g][3],a[g][3]]),e[g][1]=.5*(e[g][1]+c[0]),a[g][1]=.5*(a[g][1]+c[1]),c=A([e[g][p-1],a[g][p-1]],[e[g][p-3],a[g][p-3]],[e[g][p-4],a[g][p-4]]),e[g][p-2]=.5*(e[g][p-2]+c[0]),a[g][p-2]=.5*(a[g][p-2]+c[1])}return[e,a]}},{"../../lib":515,"./catmull_rom":708}],711:[function(t,N,V){N.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(t,N,V){N.exports=function(m,u,A){return u&&A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3,a*=3;var d=i*i,f=1-i,y=f*f,l=f*i*2,x=-3*y,c=3*(y-l),M=3*(l-d),w=3*d,p=n*n,_=p*n,h=1-n,L=h*h,E=L*h;for(g=0;g<m.length;g++)b=m[g],r=x*b[a][e]+c*b[a][e+1]+M*b[a][e+2]+w*b[a][e+3],v=x*b[a+1][e]+c*b[a+1][e+1]+M*b[a+1][e+2]+w*b[a+1][e+3],s=x*b[a+2][e]+c*b[a+2][e+1]+M*b[a+2][e+2]+w*b[a+2][e+3],o=x*b[a+3][e]+c*b[a+3][e+1]+M*b[a+3][e+2]+w*b[a+3][e+3],T[g]=E*r+3*(L*n*v+h*p*s)+_*o;return T}:u?function(T,e,a,i,n){T||(T=[]);var r,v,s,o;e*=3;var b=i*i,g=1-i,d=g*g,f=g*i*2,y=-3*d,l=3*(d-f),x=3*(f-b),c=3*b,M=1-n;for(s=0;s<m.length;s++)o=m[s],r=y*o[a][e]+l*o[a][e+1]+x*o[a][e+2]+c*o[a][e+3],v=y*o[a+1][e]+l*o[a+1][e+1]+x*o[a+1][e+2]+c*o[a+1][e+3],T[s]=M*r+n*v;return T}:A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;a*=3;var d=n*n,f=d*n,y=1-n,l=y*y,x=l*y;for(b=0;b<m.length;b++)g=m[b],r=g[a][e+1]-g[a][e],v=g[a+1][e+1]-g[a+1][e],s=g[a+2][e+1]-g[a+2][e],o=g[a+3][e+1]-g[a+3][e],T[b]=x*r+3*(l*n*v+y*d*s)+f*o;return T}:function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b=1-n;for(s=0;s<m.length;s++)o=m[s],r=o[a][e+1]-o[a][e],v=o[a+1][e+1]-o[a+1][e],T[s]=b*r+n*v;return T}}},{}],713:[function(t,N,V){N.exports=function(m,u,A){return u&&A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3,a*=3;var d=i*i,f=d*i,y=1-i,l=y*y,x=l*y,c=n*n,M=1-n,w=M*M,p=M*n*2,_=-3*w,h=3*(w-p),L=3*(p-c),E=3*c;for(g=0;g<m.length;g++)b=m[g],r=_*b[a][e]+h*b[a+1][e]+L*b[a+2][e]+E*b[a+3][e],v=_*b[a][e+1]+h*b[a+1][e+1]+L*b[a+2][e+1]+E*b[a+3][e+1],s=_*b[a][e+2]+h*b[a+1][e+2]+L*b[a+2][e+2]+E*b[a+3][e+2],o=_*b[a][e+3]+h*b[a+1][e+3]+L*b[a+2][e+3]+E*b[a+3][e+3],T[g]=x*r+3*(l*i*v+y*d*s)+f*o;return T}:u?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3;var d=n*n,f=d*n,y=1-n,l=y*y,x=l*y;for(b=0;b<m.length;b++)g=m[b],r=g[a+1][e]-g[a][e],v=g[a+1][e+1]-g[a][e+1],s=g[a+1][e+2]-g[a][e+2],o=g[a+1][e+3]-g[a][e+3],T[b]=x*r+3*(l*n*v+y*d*s)+f*o;return T}:A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o;a*=3;var b=1-i,g=n*n,d=1-n,f=d*d,y=d*n*2,l=-3*f,x=3*(f-y),c=3*(y-g),M=3*g;for(s=0;s<m.length;s++)o=m[s],r=l*o[a][e]+x*o[a+1][e]+c*o[a+2][e]+M*o[a+3][e],v=l*o[a][e+1]+x*o[a+1][e+1]+c*o[a+2][e+1]+M*o[a+3][e+1],T[s]=b*r+i*v;return T}:function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b=1-i;for(s=0;s<m.length;s++)o=m[s],r=o[a+1][e]-o[a][e],v=o[a+1][e+1]-o[a][e+1],T[s]=b*r+i*v;return T}}},{}],714:[function(t,N,V){N.exports=function(m,u,A,T,e){var a=u-2,i=A-2;return T&&e?function(n,r,v){n||(n=[]);var s,o,b,g,d,f,y=Math.max(0,Math.min(Math.floor(r),a)),l=Math.max(0,Math.min(Math.floor(v),i)),x=Math.max(0,Math.min(1,r-y)),c=Math.max(0,Math.min(1,v-l));y*=3,l*=3;var M=x*x,w=M*x,p=1-x,_=p*p,h=_*p,L=c*c,E=L*c,S=1-c,P=S*S,F=P*S;for(f=0;f<m.length;f++)d=m[f],s=h*d[l][y]+3*(_*x*d[l][y+1]+p*M*d[l][y+2])+w*d[l][y+3],o=h*d[l+1][y]+3*(_*x*d[l+1][y+1]+p*M*d[l+1][y+2])+w*d[l+1][y+3],b=h*d[l+2][y]+3*(_*x*d[l+2][y+1]+p*M*d[l+2][y+2])+w*d[l+2][y+3],g=h*d[l+3][y]+3*(_*x*d[l+3][y+1]+p*M*d[l+3][y+2])+w*d[l+3][y+3],n[f]=F*s+3*(P*c*o+S*L*b)+E*g;return n}:T?function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,y,l,x,c;s*=3;var M=b*b,w=M*b,p=1-b,_=p*p,h=_*p,L=1-g;for(x=0;x<m.length;x++)c=m[x],d=L*c[o][s]+g*c[o+1][s],f=L*c[o][s+1]+g*c[o+1][s+1],y=L*c[o][s+2]+g*c[o+1][s+1],l=L*c[o][s+3]+g*c[o+1][s+1],n[x]=h*d+3*(_*b*f+p*M*y)+w*l;return n}:e?function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,y,l,x,c;o*=3;var M=g*g,w=M*g,p=1-g,_=p*p,h=_*p,L=1-b;for(x=0;x<m.length;x++)c=m[x],d=L*c[o][s]+b*c[o][s+1],f=L*c[o+1][s]+b*c[o+1][s+1],y=L*c[o+2][s]+b*c[o+2][s+1],l=L*c[o+3][s]+b*c[o+3][s+1],n[x]=h*d+3*(_*g*f+p*M*y)+w*l;return n}:function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,y,l,x=1-g,c=1-b;for(y=0;y<m.length;y++)l=m[y],d=c*l[o][s]+b*l[o][s+1],f=c*l[o+1][s]+b*l[o+1][s+1],n[y]=x*d+g*f;return n}}},{}],715:[function(t,N,V){var m=t("../../lib"),u=t("./xy_defaults"),A=t("./ab_defaults"),T=t("./attributes"),e=t("../../components/color/attributes");N.exports=function(i,n,r,v){function s(g,d){return m.coerce(i,n,T,g,d)}n._clipPathId="clip"+n.uid+"carpet";var o=s("color",e.defaultLine);if(m.coerceFont(s,"font"),s("carpet"),A(i,n,v,s,o),!n.a||!n.b){n.visible=!1;return}n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0);var b=u(i,n,s);b||(n.visible=!1),n._cheater&&s("cheaterslope")}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),plot:t("./plot"),calc:t("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(t,N,V){N.exports=function(m,u){for(var A=m._fullData.length,T,e=0;e<A;e++){var a=m._fullData[e];if(a.index!==u.index&&a.type==="carpet"&&(T||(T=a),a.carpet===u.carpet))return a}return T}},{}],718:[function(t,N,V){N.exports=function(u,A,T){if(u.length===0)return"";var e,a=[],i=T?3:1;for(e=0;e<u.length;e+=i)a.push(u[e]+","+A[e]),T&&e<u.length-i&&(a.push("C"),a.push([u[e+1]+","+A[e+1],u[e+2]+","+A[e+2]+" "].join(" ")));return a.join(T?"":"L")}},{}],719:[function(t,N,V){var m=t("../../lib").isArrayOrTypedArray;N.exports=function(A,T,e){var a;for(m(A)?A.length>T.length&&(A=A.slice(0,T.length)):A=[],a=0;a<T.length;a++)A[a]=e(T[a]);return A}},{"../../lib":515}],720:[function(t,N,V){N.exports=function(u,A,T,e,a,i){var n=a[0]*u.dpdx(A),r=a[1]*u.dpdy(T),v=1,s=1;if(i){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),b=Math.sqrt(i[0]*i[0]+i[1]*i[1]),g=(a[0]*i[0]+a[1]*i[1])/o/b;s=Math.max(0,g)}var d=Math.atan2(r,n)*180/Math.PI;return d<-90?(d+=180,v=-v):d>90&&(d-=180,v=-v),{angle:d,flip:v,p:u.c2p(e,A,T),offsetMultplier:s}}},{}],721:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/drawing"),A=t("./map_1d_array"),T=t("./makepath"),e=t("./orient_text"),a=t("../../lib/svg_text_utils"),i=t("../../lib"),n=i.strRotate,r=i.strTranslate,v=t("../../constants/alignment");N.exports=function(x,c,M,w){var p=c.xaxis,_=c.yaxis,h=x._fullLayout,L=h._clips;i.makeTraceGroups(w,M,"trace").each(function(E){var S=m.select(this),P=E[0],F=P.trace,I=F.aaxis,D=F.baxis,R=i.ensureSingle(S,"g","minorlayer"),O=i.ensureSingle(S,"g","majorlayer"),z=i.ensureSingle(S,"g","boundarylayer"),G=i.ensureSingle(S,"g","labellayer");S.style("opacity",F.opacity),o(p,_,O,I,"a",I._gridlines),o(p,_,O,D,"b",D._gridlines),o(p,_,R,I,"a",I._minorgridlines),o(p,_,R,D,"b",D._minorgridlines),o(p,_,z,I,"a-boundary",I._boundarylines),o(p,_,z,D,"b-boundary",D._boundarylines);var Y=b(x,p,_,F,P,G,I._labels,"a-label"),ee=b(x,p,_,F,P,G,D._labels,"b-label");g(x,G,F,P,p,_,Y,ee),s(F,P,L,p,_)})};function s(l,x,c,M,w){var p,_,h,L,E=c.select("#"+l._clipPathId);E.size()||(E=c.append("clipPath").classed("carpetclip",!0));var S=i.ensureSingle(E,"path","carpetboundary"),P=x.clipsegments,F=[];for(L=0;L<P.length;L++)p=P[L],_=A([],p.x,M.c2p),h=A([],p.y,w.c2p),F.push(T(_,h,p.bicubic));var I="M"+F.join("L")+"Z";E.attr("id",l._clipPathId),S.attr("d",I)}function o(l,x,c,M,w,p){var _="const-"+w+"-lines",h=c.selectAll("."+_).data(p);h.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),h.each(function(L){var E=L,S=E.x,P=E.y,F=A([],S,l.c2p),I=A([],P,x.c2p),D="M"+T(F,I,E.smoothing),R=m.select(this);R.attr("d",D).style("stroke-width",E.width).style("stroke",E.color).style("stroke-dasharray",u.dashStyle(E.dash,E.width)).style("fill","none")}),h.exit().remove()}function b(l,x,c,M,w,p,_,h){var L=p.selectAll("text."+h).data(_);L.enter().append("text").classed(h,!0);var E=0,S={};return L.each(function(P,F){var I;if(P.axis.tickangle==="auto")I=e(M,x,c,P.xy,P.dxy);else{var D=(P.axis.tickangle+180)*Math.PI/180;I=e(M,x,c,P.xy,[Math.cos(D),Math.sin(D)])}F||(S={angle:I.angle,flip:I.flip});var R=(P.endAnchor?-1:1)*I.flip,O=m.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(u.font,P.font).text(P.text).call(a.convertToTspans,l),z=u.bBox(this);O.attr("transform",r(I.p[0],I.p[1])+n(I.angle)+r(P.axis.labelpadding*R,z.height*.3)),E=Math.max(E,z.width+P.axis.labelpadding)}),L.exit().remove(),S.maxExtent=E,S}function g(l,x,c,M,w,p,_,h){var L,E,S,P,F=i.aggNums(Math.min,null,c.a),I=i.aggNums(Math.max,null,c.a),D=i.aggNums(Math.min,null,c.b),R=i.aggNums(Math.max,null,c.b);L=.5*(F+I),E=D,S=c.ab2xy(L,E,!0),P=c.dxyda_rough(L,E),_.angle===void 0&&i.extendFlat(_,e(c,w,p,S,c.dxydb_rough(L,E))),y(l,x,c,M,S,P,c.aaxis,w,p,_,"a-title"),L=F,E=.5*(D+R),S=c.ab2xy(L,E,!0),P=c.dxydb_rough(L,E),h.angle===void 0&&i.extendFlat(h,e(c,w,p,S,c.dxyda_rough(L,E))),y(l,x,c,M,S,P,c.baxis,w,p,h,"b-title")}var d=v.LINE_SPACING,f=(1-v.MID_SHIFT)/d+1;function y(l,x,c,M,w,p,_,h,L,E,S){var P=[];_.title.text&&P.push(_.title.text);var F=x.selectAll("text."+S).data(P),I=E.maxExtent;F.enter().append("text").classed(S,!0),F.each(function(){var D=e(c,h,L,w,p);["start","both"].indexOf(_.showticklabels)===-1&&(I=0);var R=_.title.font.size;I+=R+_.title.offset;var O=E.angle+(E.flip<0?180:0),z=(O-D.angle+450)%360,G=z>90&&z<270,Y=m.select(this);Y.text(_.title.text).call(a.convertToTspans,l),G&&(I=(-a.lineCount(Y)+f)*d*R-I),Y.attr("transform",r(D.p[0],D.p[1])+n(D.angle)+r(0,I)).attr("text-anchor","middle").call(u.font,_.title.font)}),F.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(t,N,V){var m=t("./constants"),u=t("../../lib/search").findBin,A=t("./compute_control_points"),T=t("./create_spline_evaluator"),e=t("./create_i_derivative_evaluator"),a=t("./create_j_derivative_evaluator");N.exports=function(n){var r=n._a,v=n._b,s=r.length,o=v.length,b=n.aaxis,g=n.baxis,d=r[0],f=r[s-1],y=v[0],l=v[o-1],x=r[r.length-1]-r[0],c=v[v.length-1]-v[0],M=x*m.RELATIVE_CULL_TOLERANCE,w=c*m.RELATIVE_CULL_TOLERANCE;d-=M,f+=M,y-=w,l+=w,n.isVisible=function(p,_){return p>d&&p<f&&_>y&&_<l},n.isOccluded=function(p,_){return p<d||p>f||_<y||_>l},n.setScale=function(){var p=n._x,_=n._y,h=A(n._xctrl,n._yctrl,p,_,b.smoothing,g.smoothing);n._xctrl=h[0],n._yctrl=h[1],n.evalxy=T([n._xctrl,n._yctrl],s,o,b.smoothing,g.smoothing),n.dxydi=e([n._xctrl,n._yctrl],b.smoothing,g.smoothing),n.dxydj=a([n._xctrl,n._yctrl],b.smoothing,g.smoothing)},n.i2a=function(p){var _=Math.max(0,Math.floor(p[0]),s-2),h=p[0]-_;return(1-h)*r[_]+h*r[_+1]},n.j2b=function(p){var _=Math.max(0,Math.floor(p[1]),s-2),h=p[1]-_;return(1-h)*v[_]+h*v[_+1]},n.ij2ab=function(p){return[n.i2a(p[0]),n.j2b(p[1])]},n.a2i=function(p){var _=Math.max(0,Math.min(u(p,r),s-2)),h=r[_],L=r[_+1];return Math.max(0,Math.min(s-1,_+(p-h)/(L-h)))},n.b2j=function(p){var _=Math.max(0,Math.min(u(p,v),o-2)),h=v[_],L=v[_+1];return Math.max(0,Math.min(o-1,_+(p-h)/(L-h)))},n.ab2ij=function(p){return[n.a2i(p[0]),n.b2j(p[1])]},n.i2c=function(p,_){return n.evalxy([],p,_)},n.ab2xy=function(p,_,h){if(!h&&(p<r[0]||p>r[s-1]|_<v[0]||_>v[o-1]))return[!1,!1];var L=n.a2i(p),E=n.b2j(_),S=n.evalxy([],L,E);if(h){var P=0,F=0,I=[],D,R,O,z;p<r[0]?(D=0,R=0,P=(p-r[0])/(r[1]-r[0])):p>r[s-1]?(D=s-2,R=1,P=(p-r[s-1])/(r[s-1]-r[s-2])):(D=Math.max(0,Math.min(s-2,Math.floor(L))),R=L-D),_<v[0]?(O=0,z=0,F=(_-v[0])/(v[1]-v[0])):_>v[o-1]?(O=o-2,z=1,F=(_-v[o-1])/(v[o-1]-v[o-2])):(O=Math.max(0,Math.min(o-2,Math.floor(E))),z=E-O),P&&(n.dxydi(I,D,O,R,z),S[0]+=I[0]*P,S[1]+=I[1]*P),F&&(n.dxydj(I,D,O,R,z),S[0]+=I[0]*F,S[1]+=I[1]*F)}return S},n.c2p=function(p,_,h){return[_.c2p(p[0]),h.c2p(p[1])]},n.p2x=function(p,_,h){return[_.p2c(p[0]),h.p2c(p[1])]},n.dadi=function(p){var _=Math.max(0,Math.min(r.length-2,p));return r[_+1]-r[_]},n.dbdj=function(p){var _=Math.max(0,Math.min(v.length-2,p));return v[_+1]-v[_]},n.dxyda=function(p,_,h,L){var E=n.dxydi(null,p,_,h,L),S=n.dadi(p,h);return[E[0]/S,E[1]/S]},n.dxydb=function(p,_,h,L){var E=n.dxydj(null,p,_,h,L),S=n.dbdj(_,L);return[E[0]/S,E[1]/S]},n.dxyda_rough=function(p,_,h){var L=x*(h||.1),E=n.ab2xy(p+L,_,!0),S=n.ab2xy(p-L,_,!0);return[(E[0]-S[0])*.5/L,(E[1]-S[1])*.5/L]},n.dxydb_rough=function(p,_,h){var L=c*(h||.1),E=n.ab2xy(p,_+L,!0),S=n.ab2xy(p,_-L,!0);return[(E[0]-S[0])*.5/L,(E[1]-S[1])*.5/L]},n.dpdx=function(p){return p._m},n.dpdy=function(p){return p._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T,e){var a,i,n,r=[],v=[],s=A[0].length,o=A.length;function b(j,X){var ie=0,he,K=0;return j>0&&(he=A[X][j-1])!==void 0&&(K++,ie+=he),j<s-1&&(he=A[X][j+1])!==void 0&&(K++,ie+=he),X>0&&(he=A[X-1][j])!==void 0&&(K++,ie+=he),X<o-1&&(he=A[X+1][j])!==void 0&&(K++,ie+=he),ie/Math.max(1,K)}var g=0;for(a=0;a<s;a++)for(i=0;i<o;i++)A[i][a]===void 0&&(r.push(a),v.push(i),A[i][a]=b(a,i)),g=Math.max(g,Math.abs(A[i][a]));if(!r.length)return A;var d,f,y,l,x,c,M,w,p,_,h,L=1e-5,E=0,S=100,P=0,F=r.length;do{for(E=0,n=0;n<F;n++){a=r[n],i=v[n];var I=0,D=0,R,O,z,G,Y,ee;a===0?(Y=Math.min(s-1,2),z=T[Y],G=T[1],R=A[i][Y],O=A[i][1],D+=O+(O-R)*(T[0]-G)/(G-z),I++):a===s-1&&(Y=Math.max(0,s-3),z=T[Y],G=T[s-2],R=A[i][Y],O=A[i][s-2],D+=O+(O-R)*(T[s-1]-G)/(G-z),I++),(a===0||a===s-1)&&i>0&&i<o-1&&(d=e[i+1]-e[i],f=e[i]-e[i-1],D+=(f*A[i+1][a]+d*A[i-1][a])/(f+d),I++),i===0?(ee=Math.min(o-1,2),z=e[ee],G=e[1],R=A[ee][a],O=A[1][a],D+=O+(O-R)*(e[0]-G)/(G-z),I++):i===o-1&&(ee=Math.max(0,o-3),z=e[ee],G=e[o-2],R=A[ee][a],O=A[o-2][a],D+=O+(O-R)*(e[o-1]-G)/(G-z),I++),(i===0||i===o-1)&&a>0&&a<s-1&&(d=T[a+1]-T[a],f=T[a]-T[a-1],D+=(f*A[i][a+1]+d*A[i][a-1])/(f+d),I++),I?D/=I:(y=T[a+1]-T[a],l=T[a]-T[a-1],x=e[i+1]-e[i],c=e[i]-e[i-1],M=y*l*(y+l),w=x*c*(x+c),D=(M*(c*A[i+1][a]+x*A[i-1][a])+w*(l*A[i][a+1]+y*A[i][a-1]))/(w*(l+y)+M*(c+x))),p=D-A[i][a],_=p/g,E+=_*_,h=I?0:.85,A[i][a]+=p*(1+h)}E=Math.sqrt(E)}while(P++<S&&E>L);return m.log("Smoother converged to",E,"after",P,"iterations"),A}},{"../../lib":515}],724:[function(t,N,V){var m=t("../../lib").isArray1D;N.exports=function(A,T,e){var a=e("x"),i=a&&a.length,n=e("y"),r=n&&n.length;if(!i&&!r)return!1;if(T._cheater=!a,(!i||m(a))&&(!r||m(n))){var v=i?a.length:1/0;r&&(v=Math.min(v,n.length)),T.a&&T.a.length&&(v=Math.min(v,T.a.length)),T.b&&T.b.length&&(v=Math.min(v,T.b.length)),T._length=v}else T._length=null;return!0}},{"../../lib":515}],725:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../scattergeo/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../plots/attributes"),e=t("../../components/color/attributes").defaultLine,a=t("../../lib/extend").extendFlat,i=u.marker.line;N.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:u.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},u.geojson,{}),featureidkey:u.featureidkey,text:a({},u.text,{}),hovertext:a({},u.hovertext,{}),marker:{line:{color:a({},i.color,{dflt:e}),width:a({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:u.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:u.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:m(),showlegend:a({},T.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../constants/numerical").BADNUM,A=t("../../components/colorscale/calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection");function a(i){return i&&typeof i=="string"}N.exports=function(n,r){var v=r._length,s=new Array(v),o;r.geojson?o=function(y){return a(y)||m(y)}:o=a;for(var b=0;b<v;b++){var g=s[b]={},d=r.locations[b],f=r.z[b];o(d)&&m(f)?(g.loc=d,g.z=f):(g.loc=null,g.z=u),g.index=b}return T(s,r),A(n,r,{vals:r.z,containerStr:"",cLetter:"z"}),e(s,r),s}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(t,N,V){var m=t("../../lib"),u=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(f,y){return m.coerce(e,a,A,f,y)}var v=r("locations"),s=r("z");if(!(v&&v.length&&m.isArrayOrTypedArray(s)&&s.length)){a.visible=!1;return}a._length=Math.min(v.length,s.length);var o=r("geojson"),b;(typeof o=="string"&&o!==""||m.isPlainObject(o))&&(b="geojson-id");var g=r("locationmode",b);g==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var d=r("marker.line.width");d&&r("marker.line.color"),r("marker.opacity"),u(e,a,n,r,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(t,N,V){N.exports=function(u,A,T,e,a){u.location=A.location,u.z=A.z;var i=e[a];return i.fIn&&i.fIn.properties&&(u.properties=i.fIn.properties),u.ct=i.ct,u}},{}],729:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("./attributes"),A=t("../../lib").fillText;N.exports=function(a,i,n){var r=a.cd,v=r[0].trace,s=a.subplot,o,b,g,d,f=[i,n],y=[i+360,n];for(b=0;b<r.length;b++)if(o=r[b],d=!1,o._polygons){for(g=0;g<o._polygons.length;g++)o._polygons[g].contains(f)&&(d=!d),o._polygons[g].contains(y)&&(d=!d);if(d)break}if(!(!d||!o))return a.x0=a.x1=a.xa.c2p(o.ct),a.y0=a.y1=a.ya.c2p(o.ct),a.index=o.index,a.location=o.loc,a.z=o.z,a.zLabel=m.tickText(s.mockAxis,s.mockAxis.c2l(o.z),"hover").text,a.hovertemplate=o.hovertemplate,T(a,v,o),[a]};function T(e,a,i){if(!a.hovertemplate){var n=i.hi||a.hoverinfo,r=String(i.loc),v=n==="all"?u.hoverinfo.flags:n.split("+"),s=v.indexOf("name")!==-1,o=v.indexOf("location")!==-1,b=v.indexOf("z")!==-1,g=v.indexOf("text")!==-1,d=!s&&o,f=[];d?e.nameOverride=r:(s&&(e.nameOverride=a.name),o&&f.push(r)),b&&f.push(e.zLabel),g&&A(i,a,f),e.extraText=f.join("<br>")}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"choropleth",basePlotModule:t("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../lib/geo_location_utils"),T=t("../../lib/topojson_utils").getTopojsonFeatures,e=t("../../plots/cartesian/autorange").findExtremes,a=t("./style").style;function i(r,v,s){var o=v.layers.backplot.select(".choroplethlayer");u.makeTraceGroups(o,s,"trace choropleth").each(function(b){var g=m.select(this),d=g.selectAll("path.choroplethlocation").data(u.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),a(r,b)})}function n(r,v){for(var s=r[0].trace,o=v[s.geo],b=o._subplot,g=s.locationmode,d=s._length,f=g==="geojson-id"?A.extractTraceFeature(r):T(s,b.topojson),y=[],l=[],x=0;x<d;x++){var c=r[x],M=g==="geojson-id"?c.fOut:A.locationToFeature(g,c.loc,f);if(M){c.geojson=M,c.ct=M.properties.ct,c._polygons=A.feature2polygons(M);var w=A.computeBbox(M);y.push(w[0],w[2]),l.push(w[1],w[3])}else c.geojson=null}if(o.fitbounds==="geojson"&&g==="geojson-id"){var p=A.computeBbox(A.getTraceGeojson(s));y=[p[0],p[2]],l=[p[1],p[3]]}var _={padded:!0};s._extremes.lon=e(o.lonaxis._ax,y,_),s._extremes.lat=e(o.lataxis._ax,l,_)}N.exports={calcGeoJSON:n,plot:i}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(t,N,V){N.exports=function(u,A){var T=u.cd,e=u.xaxis,a=u.yaxis,i=[],n,r,v,s,o;if(A===!1)for(n=0;n<T.length;n++)T[n].selected=0;else for(n=0;n<T.length;n++)r=T[n],v=r.ct,v&&(s=e.c2p(v),o=a.c2p(v),A.contains([s,o],null,n,u)?(i.push({pointNumber:n,lon:v[0],lat:v[1]}),r.selected=1):r.selected=0);return i}},{}],733:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/color"),A=t("../../components/drawing"),T=t("../../components/colorscale");function e(n,r){r&&a(n,r)}function a(n,r){var v=r[0].trace,s=r[0].node3,o=s.selectAll(".choroplethlocation"),b=v.marker||{},g=b.line||{},d=T.makeColorScaleFuncFromTrace(v);o.each(function(f){m.select(this).attr("fill",d(f.z)).call(u.stroke,f.mlc||g.color).call(A.dashLine,"",f.mlw||g.width||0).style("opacity",b.opacity)}),A.selectedPointStyle(o,v)}function i(n,r){var v=r[0].node3,s=r[0].trace;s.selectedpoints?A.selectedPointStyle(v.selectAll(".choroplethlocation"),s):a(n,r)}N.exports={style:e,styleOnSelect:i}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(t,N,V){var m=t("../choropleth/attributes"),u=t("../../components/colorscale/attributes"),A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat;N.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},m.featureidkey,{}),below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,marker:{line:{color:e({},m.marker.line.color,{editType:"plot"}),width:e({},m.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},m.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},m.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},m.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:m.hoverinfo,hovertemplate:A({},{keys:["properties"]}),showlegend:e({},T.showlegend,{dflt:!1})},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../components/colorscale"),T=t("../../components/drawing"),e=t("../../lib/geojson_utils").makeBlank,a=t("../../lib/geo_location_utils");function i(r){var v=r[0].trace,s=v.visible===!0&&v._length!==0,o={layout:{visibility:"none"},paint:{}},b={layout:{visibility:"none"},paint:{}},g=v._opts={fill:o,line:b,geojson:e()};if(!s)return g;var d=a.extractTraceFeature(r);if(!d)return g;var f=A.makeColorScaleFuncFromTrace(v),y=v.marker,l=y.line||{},x;u.isArrayOrTypedArray(y.opacity)&&(x=function(E){var S=E.mo;return m(S)?+u.constrain(S,0,1):0});var c;u.isArrayOrTypedArray(l.color)&&(c=function(E){return E.mlc});var M;u.isArrayOrTypedArray(l.width)&&(M=function(E){return E.mlw});for(var w=0;w<r.length;w++){var p=r[w],_=p.fOut;if(_){var h=_.properties;h.fc=f(p.z),x&&(h.mo=x(p)),c&&(h.mlc=c(p)),M&&(h.mlw=M(p)),p.ct=h.ct,p._polygons=a.feature2polygons(_)}}var L=x?{type:"identity",property:"mo"}:y.opacity;return u.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),u.extendFlat(b.paint,{"line-color":c?{type:"identity",property:"mlc"}:l.color,"line-width":M?{type:"identity",property:"mlw"}:l.width,"line-opacity":L}),o.layout.visibility="visible",b.layout.visibility="visible",g.geojson={type:"FeatureCollection",features:d},n(r),g}function n(r){var v=r[0].trace,s=v._opts,o;if(v.selectedpoints){for(var b=T.makeSelectedPointStyleFns(v),g=0;g<r.length;g++){var d=r[g];d.fOut&&(d.fOut.properties.mo2=b.selectedOpacityFn(d))}o={type:"identity",property:"mo2"}}else o=u.isArrayOrTypedArray(v.marker.opacity)?{type:"identity",property:"mo"}:v.marker.opacity;return u.extendFlat(s.fill.paint,{"fill-opacity":o}),u.extendFlat(s.line.paint,{"line-opacity":o}),s}N.exports={convert:i,convertOnSelect:n}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(t,N,V){var m=t("../../lib"),u=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(g,d){return m.coerce(e,a,A,g,d)}var v=r("locations"),s=r("z"),o=r("geojson");if(!m.isArrayOrTypedArray(v)||!v.length||!m.isArrayOrTypedArray(s)||!s.length||!(typeof o=="string"&&o!==""||m.isPlainObject(o))){a.visible=!1;return}r("featureidkey"),a._length=Math.min(v.length,s.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var b=r("marker.line.width");b&&r("marker.line.color"),r("marker.opacity"),u(e,a,n,r,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../choropleth/calc"),plot:t("./plot"),hoverPoints:t("../choropleth/hover"),eventData:t("../choropleth/event_data"),selectPoints:t("../choropleth/select"),styleOnSelect:function(m,u){if(u){var A=u[0].trace;A._glTrace.updateOnSelect(u)}},getBelow:function(m,u){for(var A=u.getMapLayers(),T=A.length-2;T>=0;T--){var e=A[T].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var a=T+1;a<A.length;a++)if(e=A[a].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(t,N,V){var m=t("./convert").convert,u=t("./convert").convertOnSelect,A=t("../../plots/mapbox/constants").traceLayerPrefix;function T(a,i){this.type="choroplethmapbox",this.subplot=a,this.uid=i,this.sourceId="source-"+i,this.layerList=[["fill",A+i+"-fill"],["line",A+i+"-line"]],this.below=null}var e=T.prototype;e.update=function(a){this._update(m(a)),a[0].trace._glTrace=this},e.updateOnSelect=function(a){this._update(u(a))},e._update=function(a){var i=this.subplot,n=this.layerList,r=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var v=0;v<n.length;v++){var s=n[v],o=s[0],b=s[1],g=a[o];i.setOptions(b,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&i.setOptions(b,"setPaintProperty",g.paint)}},e._addLayers=function(a,i){for(var n=this.subplot,r=this.layerList,v=this.sourceId,s=0;s<r.length;s++){var o=r[s],b=o[0],g=a[b];n.addLayer({type:b,id:o[1],source:v,layout:g.layout,paint:g.paint},i)}},e._removeLayers=function(){for(var a=this.subplot.map,i=this.layerList,n=i.length-1;n>=0;n--)a.removeLayer(i[n][1])},e.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},N.exports=function(i,n){var r=n[0].trace,v=new T(i,r.uid),s=v.sourceId,o=m(n),b=v.below=i.belowLookup["trace-"+r.uid];return i.map.addSource(s,{type:"geojson",data:o.geojson}),v._addLayers(o,b),n[0].trace._glTrace=v,v}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(t,N,V){var m=t("../../components/colorscale/attributes"),u=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:A({editType:"calc"},{keys:["norm"]}),uhoverformat:u("u",1),vhoverformat:u("v",1),whoverformat:u("w",1),xhoverformat:u("x"),yhoverformat:u("y"),zhoverformat:u("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(i,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=T[r]}),i.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,N.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(t,N,V){var m=t("../../components/colorscale/calc");N.exports=function(A,T){for(var e=T.u,a=T.v,i=T.w,n=Math.min(T.x.length,T.y.length,T.z.length,e.length,a.length,i.length),r=-1/0,v=1/0,s=0;s<n;s++){var o=e[s],b=a[s],g=i[s],d=Math.sqrt(o*o+b*b+g*g);r=Math.max(r,d),v=Math.min(v,d)}T._len=n,T._normMax=r,m(A,T,{vals:[v,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(t,N,V){var m=t("../../../stackgl_modules").gl_cone3d,u=t("../../../stackgl_modules").gl_cone3d.createConeMesh,A=t("../../lib").simpleMap,T=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,a=t("../../plots/gl3d/zip3");function i(g,d){this.scene=g,this.uid=d,this.mesh=null,this.data=null}var n=i.prototype;n.handlePick=function(g){if(g.object===this.mesh){var d=g.index=g.data.index,f=this.data.x[d],y=this.data.y[d],l=this.data.z[d],x=this.data.u[d],c=this.data.v[d],M=this.data.w[d];g.traceCoordinate=[f,y,l,x,c,M,Math.sqrt(x*x+c*c+M*M)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[d]!==void 0?g.textLabel=w[d]:w&&(g.textLabel=w),!0}};var r={xaxis:0,yaxis:1,zaxis:2},v={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function o(g,d){var f=g.fullSceneLayout,y=g.dataScale,l={};function x(p,_){var h=f[_],L=y[r[_]];return A(p,function(E){return h.d2l(E)*L})}l.vectors=a(x(d.u,"xaxis"),x(d.v,"yaxis"),x(d.w,"zaxis"),d._len),l.positions=a(x(d.x,"xaxis"),x(d.y,"yaxis"),x(d.z,"zaxis"),d._len);var c=e(d);l.colormap=T(d),l.vertexIntensityBounds=[c.min/d._normMax,c.max/d._normMax],l.coneOffset=v[d.anchor],d.sizemode==="scaled"?l.coneSize=d.sizeref||.5:l.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5;var M=m(l),w=d.lightposition;return M.lightPosition=[w.x,w.y,w.z],M.ambient=d.lighting.ambient,M.diffuse=d.lighting.diffuse,M.specular=d.lighting.specular,M.roughness=d.lighting.roughness,M.fresnel=d.lighting.fresnel,M.opacity=d.opacity,d._pad=s[d.anchor]*M.vectorScale*M.coneScale*d._normMax,M}n.update=function(g){this.data=g;var d=o(this.scene,g);this.mesh.update(d)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(g,d){var f=g.glplot.gl,y=o(g,d),l=u(f,y),x=new i(g,d.uid);return x.mesh=l,x.data=d,l._trace=x,g.glplot.add(l),x}N.exports=b},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(t,N,V){var m=t("../../lib"),u=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(f,y){return m.coerce(e,a,A,f,y)}var v=r("u"),s=r("v"),o=r("w"),b=r("x"),g=r("y"),d=r("z");if(!v||!v.length||!s||!s.length||!o||!o.length||!b||!b.length||!g||!g.length||!d||!d.length){a.visible=!1;return}r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),u(e,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(t,N,V){N.exports={moduleType:"trace",name:"cone",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),eventData:function(m,u){return m.norm=u.traceCoordinate[6],m},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(t,N,V){var m=t("../heatmap/attributes"),u=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes"),T=A.axisHoverFormat,e=A.descriptionOnlyNumbers,a=t("../../components/colorscale/attributes"),i=t("../../components/drawing/attributes").dash,n=t("../../plots/font_attributes"),r=t("../../lib/extend").extendFlat,v=t("../../constants/filter_ops"),s=v.COMPARISON_OPS2,o=v.INTERVAL_OPS,b=u.line;N.exports=r({z:m.z,x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,text:m.text,hovertext:m.hovertext,transpose:m.transpose,xtype:m.xtype,ytype:m.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:m.hovertemplate,texttemplate:r({},m.texttemplate,{}),textfont:r({},m.textfont,{}),hoverongaps:m.hoverongaps,connectgaps:r({},m.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},b.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:i,smoothing:r({},b.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(t,N,V){var m=t("../../components/colorscale"),u=t("../heatmap/calc"),A=t("./set_contours"),T=t("./end_plus");N.exports=function(a,i){var n=u(a,i),r=n[0].z;A(i,r);var v=i.contours,s=m.extractOpts(i),o;if(v.coloring==="heatmap"&&s.auto&&i.autocontour===!1){var b=v.start,g=T(v),d=v.size||1,f=Math.floor((g-b)/d)+1;isFinite(d)||(d=1,f=1);var y=b-d/2,l=y+f*d;o=[y,l]}else o=r;return m.calc(a,i,{vals:o,cLetter:"z"}),n}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(t,N,V){N.exports=function(m,u){var A=m[0],T=A.z,e;switch(u.type){case"levels":var a=Math.min(T[0][0],T[0][1]);for(e=0;e<m.length;e++){var i=m[e];i.prefixBoundary=!i.edgepaths.length&&(a>i.level||i.starts.length&&a===i.level)}break;case"constraint":if(A.prefixBoundary=!1,A.edgepaths.length)return;var n=A.x.length,r=A.y.length,v=-1/0,s=1/0;for(e=0;e<r;e++)s=Math.min(s,T[e][0]),s=Math.min(s,T[e][n-1]),v=Math.max(v,T[e][0]),v=Math.max(v,T[e][n-1]);for(e=1;e<n-1;e++)s=Math.min(s,T[0][e]),s=Math.min(s,T[r-1][e]),v=Math.max(v,T[0][e]),v=Math.max(v,T[r-1][e]);var o=u.value,b,g;switch(u._operation){case">":o>v&&(A.prefixBoundary=!0);break;case"<":(o<s||A.starts.length&&o===s)&&(A.prefixBoundary=!0);break;case"[]":b=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),(g<s||b>v||A.starts.length&&g===s)&&(A.prefixBoundary=!0);break;case"][":b=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),b<s&&g>v&&(A.prefixBoundary=!0);break}break}}},{}],747:[function(t,N,V){var m=t("../../components/colorscale"),u=t("./make_color_map"),A=t("./end_plus");function T(e,a,i){var n=a.contours,r=a.line,v=n.size||1,s=n.coloring,o=u(a,{isColorbar:!0});if(s==="heatmap"){var b=m.extractOpts(a);i._fillgradient=b.reversescale?m.flipScale(b.colorscale):b.colorscale,i._zrange=[b.min,b.max]}else s==="fill"&&(i._fillcolor=o);i._line={color:s==="lines"?o:r.color,width:n.showlines!==!1?r.width:0,dash:r.dash},i._levels={start:n.start,end:A(n),size:v}}N.exports={min:"zmin",max:"zmax",calc:T}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(t,N,V){N.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(t,N,V){var m=t("fast-isnumeric"),u=t("./label_defaults"),A=t("../../components/color"),T=A.addOpacity,e=A.opacity,a=t("../../constants/filter_ops"),i=a.CONSTRAINT_REDUCTION,n=a.COMPARISON_OPS2;N.exports=function(s,o,b,g,d,f){var y=o.contours,l,x,c,M=b("contours.operation");if(y._operation=i[M],r(b,y),M==="="?l=y.showlines=!0:(l=b("contours.showlines"),c=b("fillcolor",T((s.line||{}).color||d,.5))),l){var w=c&&e(c)?T(o.fillcolor,1):d;x=b("line.color",w),b("line.width",2),b("line.dash")}b("line.smoothing"),u(b,g,x,f)};function r(v,s){var o;n.indexOf(s.operation)===-1?(v("contours.value",[0,1]),Array.isArray(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(o=parseFloat(s.value[0]),s.value=[o,o+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:m(s.value)&&(o=parseFloat(s.value),s.value=[o,o+1])):(v("contours.value",0),m(s.value)||(Array.isArray(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(t,N,V){var m=t("../../constants/filter_ops"),u=t("fast-isnumeric");N.exports={"[]":T("[]"),"][":T("]["),">":e(">"),"<":e("<"),"=":e("=")};function A(a,i){var n=Array.isArray(i),r;function v(s){return u(s)?+s:null}return m.COMPARISON_OPS2.indexOf(a)!==-1?r=v(n?i[0]:i):m.INTERVAL_OPS.indexOf(a)!==-1?r=n?[v(i[0]),v(i[1])]:[v(i),v(i)]:m.SET_OPS.indexOf(a)!==-1&&(r=n?i.map(v):[v(i)]),r}function T(a){return function(i){i=A(a,i);var n=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]);return{start:n,end:r,size:r-n}}}function e(a){return function(i){return i=A(a,i),{start:i,end:1/0,size:1/0}}}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(t,N,V){N.exports=function(u,A,T,e){var a=e("contours.start"),i=e("contours.end"),n=a===!1||i===!1,r=T("contours.size"),v;n?v=A.autocontour=!0:v=T("autocontour",!1),(v||!r)&&T("ncontours")}},{}],752:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){var e,a,i,n=function(s){return s.reverse()},r=function(s){return s};switch(T){case"=":case"<":return A;case">":for(A.length!==1&&m.warn("Contour data invalid for the specified inequality operation."),a=A[0],e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=n(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=n(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=n(a.starts[e]);return A;case"][":var v=n;n=r,r=v;case"[]":for(A.length!==2&&m.warn("Contour data invalid for the specified inequality range operation."),a=u(A[0]),i=u(A[1]),e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=n(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=n(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=n(a.starts[e]);for(;i.edgepaths.length;)a.edgepaths.push(r(i.edgepaths.shift()));for(;i.paths.length;)a.paths.push(r(i.paths.shift()));for(;i.starts.length;)a.starts.push(r(i.starts.shift()));return[a]}};function u(A){return m.extendFlat({},A,{edgepaths:m.extendDeep([],A.edgepaths),paths:m.extendDeep([],A.paths),starts:m.extendDeep([],A.starts)})}},{"../../lib":515}],753:[function(t,N,V){var m=t("../../lib"),u=t("../heatmap/xyz_defaults"),A=t("../scatter/period_defaults"),T=t("./constraint_defaults"),e=t("./contours_defaults"),a=t("./style_defaults"),i=t("../heatmap/label_defaults"),n=t("./attributes");N.exports=function(v,s,o,b){function g(l,x){return m.coerce(v,s,n,l,x)}function d(l){return m.coerce2(v,s,n,l)}var f=u(v,s,g,b);if(!f){s.visible=!1;return}A(v,s,b,g),g("xhoverformat"),g("yhoverformat"),g("text"),g("hovertext"),g("hoverongaps"),g("hovertemplate");var y=g("contours.type")==="constraint";g("connectgaps",m.isArray1D(s.z)),y?T(v,s,g,b,o):(e(v,s,g,d),a(v,s,g,b)),s.contours&&s.contours.coloring==="heatmap"&&i(g,b)}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(t,N,V){var m=t("../../lib"),u=t("./constraint_mapping"),A=t("./end_plus");N.exports=function(e,a,i){for(var n=e.type==="constraint"?u[e._operation](e.value):e,r=n.size,v=[],s=A(n),o=i.trace._carpetTrace,b=o?{xaxis:o.aaxis,yaxis:o.baxis,x:i.a,y:i.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:i.x,y:i.y},g=n.start;g<s;g+=r)if(v.push(m.extendFlat({level:g,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},b)),v.length>1e3){m.warn("Too many contours, clipping at 1000",e);break}return v}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(t,N,V){N.exports=function(u){return u.end+u.size/1e6}},{}],756:[function(t,N,V){var m=t("../../lib"),u=t("./constants");N.exports=function(r,v,s){var o,b,g,d,f;for(v=v||.01,s=s||.01,g=0;g<r.length;g++){for(d=r[g],f=0;f<d.starts.length;f++)b=d.starts[f],e(d,b,"edge",v,s);for(o=0;Object.keys(d.crossings).length&&o<1e4;)o++,b=Object.keys(d.crossings)[0].split(",").map(Number),e(d,b,void 0,v,s);o===1e4&&m.log("Infinite loop in contour?")}};function A(n,r,v,s){return Math.abs(n[0]-r[0])<v&&Math.abs(n[1]-r[1])<s}function T(n,r){var v=n[2]-r[2],s=n[3]-r[3];return Math.sqrt(v*v+s*s)}function e(n,r,v,s,o){var b=r.join(","),g=n.crossings[b],d=a(g,v,r),f=[i(n,r,[-d[0],-d[1]])],y=n.z.length,l=n.z[0].length,x=r.slice(),c=d.slice(),M;for(M=0;M<1e4;M++){if(g>20?(g=u.CHOOSESADDLE[g][(d[0]||d[1])<0?0:1],n.crossings[b]=u.SADDLEREMAINDER[g]):delete n.crossings[b],d=u.NEWDELTA[g],!d){m.log("Found bad marching index:",g,r,n.level);break}f.push(i(n,r,d)),r[0]+=d[0],r[1]+=d[1],b=r.join(","),A(f[f.length-1],f[f.length-2],s,o)&&f.pop();var w=d[0]&&(r[0]<0||r[0]>l-2)||d[1]&&(r[1]<0||r[1]>y-2),p=r[0]===x[0]&&r[1]===x[1]&&d[0]===c[0]&&d[1]===c[1];if(p||v&&w)break;g=n.crossings[b]}M===1e4&&m.log("Infinite loop in contour?");var _=A(f[0],f[f.length-1],s,o),h=0,L=.2*n.smoothing,E=[],S=0,P,F,I,D,R,O,z,G,Y,ee,j;for(M=1;M<f.length;M++)z=T(f[M],f[M-1]),h+=z,E.push(z);var X=h/E.length*L;function ie($){return f[$%f.length]}for(M=f.length-2;M>=S;M--)if(P=E[M],P<X){for(I=0,F=M-1;F>=S&&P+E[F]<X;F--)P+=E[F];if(_&&M===f.length-2)for(I=0;I<F&&P+E[I]<X;I++)P+=E[I];R=M-F+I+1,O=Math.floor((M+F+I+2)/2),!_&&M===f.length-2?D=f[f.length-1]:!_&&F===-1?D=f[0]:R%2?D=ie(O):D=[(ie(O)[0]+ie(O+1)[0])/2,(ie(O)[1]+ie(O+1)[1])/2],f.splice(F+1,M-F+1,D),M=F+1,I&&(S=I),_&&(M===f.length-2?f[I]=f[f.length-1]:M===0&&(f[f.length-1]=f[0]))}for(f.splice(0,S),M=0;M<f.length;M++)f[M].length=2;if(!(f.length<2))if(_)f.pop(),n.paths.push(f);else{v||m.log("Unclosed interior contour?",n.level,x.join(","),f.join("L"));var he=!1;for(G=0;G<n.edgepaths.length;G++)if(ee=n.edgepaths[G],!he&&A(ee[0],f[f.length-1],s,o)){f.pop(),he=!0;var K=!1;for(Y=0;Y<n.edgepaths.length;Y++)if(j=n.edgepaths[Y],A(j[j.length-1],f[0],s,o)){K=!0,f.shift(),n.edgepaths.splice(G,1),Y===G?n.paths.push(f.concat(j)):(Y>G&&Y--,n.edgepaths[Y]=j.concat(f,ee));break}K||(n.edgepaths[G]=f.concat(ee))}for(G=0;G<n.edgepaths.length&&!he;G++)ee=n.edgepaths[G],A(ee[ee.length-1],f[0],s,o)&&(f.shift(),n.edgepaths[G]=ee.concat(f),he=!0);he||n.edgepaths.push(f)}}function a(n,r,v){var s=0,o=0;return n>20&&r?n===208||n===1114?s=v[0]===0?1:-1:o=v[1]===0?1:-1:u.BOTTOMSTART.indexOf(n)!==-1?o=1:u.LEFTSTART.indexOf(n)!==-1?s=1:u.TOPSTART.indexOf(n)!==-1?o=-1:s=-1,[s,o]}function i(n,r,v){var s=r[0]+Math.max(v[0],0),o=r[1]+Math.max(v[1],0),b=n.z[o][s],g=n.xaxis,d=n.yaxis;if(v[1]){var f=(n.level-b)/(n.z[o][s+1]-b),y=(f!==1?(1-f)*g.c2l(n.x[s]):0)+(f!==0?f*g.c2l(n.x[s+1]):0);return[g.c2p(g.l2c(y),!0),d.c2p(n.y[o],!0),s+f,o]}else{var l=(n.level-b)/(n.z[o+1][s]-b),x=(l!==1?(1-l)*d.c2l(n.y[o]):0)+(l!==0?l*d.c2l(n.y[o+1]):0);return[g.c2p(n.x[s],!0),d.c2p(d.l2c(x),!0),s,o+l]}}},{"../../lib":515,"./constants":748}],757:[function(t,N,V){var m=t("../../components/color"),u=t("../heatmap/hover");N.exports=function(T,e,a,i,n){n||(n={}),n.isContour=!0;var r=u(T,e,a,i,n);return r&&r.forEach(function(v){var s=v.trace;s.contours.type==="constraint"&&(s.fillcolor&&m.opacity(s.fillcolor)?v.color=m.addOpacity(s.fillcolor,1):s.contours.showlines&&m.opacity(s.line.color)&&(v.color=m.addOpacity(s.line.color,1)))}),r}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot").plot,style:t("./style"),colorbar:t("./colorbar"),hoverPoints:t("./hover"),moduleType:"trace",name:"contour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T,e,a){a||(a={});var i=A("contours.showlabels");if(i){var n=T.font;m.coerceFont(A,"contours.labelfont",{family:n.family,size:n.size,color:e}),A("contours.labelformat")}a.hasHover!==!1&&A("zhoverformat")}},{"../../lib":515}],760:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/colorscale"),A=t("./end_plus");N.exports=function(e){var a=e.contours,i=a.start,n=A(a),r=a.size||1,v=Math.floor((n-i)/r)+1,s=a.coloring==="lines"?0:1,o=u.extractOpts(e);isFinite(r)||(r=1,v=1);var b=o.reversescale?u.flipScale(o.colorscale):o.colorscale,g=b.length,d=new Array(g),f=new Array(g),y,l;if(a.coloring==="heatmap"){var x=o.min,c=o.max;for(l=0;l<g;l++)y=b[l],d[l]=y[0]*(c-x)+x,f[l]=y[1];var M=m.extent([x,c,a.start,a.start+r*(v-1)]),w=M[x<c?0:1],p=M[x<c?1:0];w!==x&&(d.splice(0,0,w),f.splice(0,0,f[0])),p!==c&&(d.push(p),f.push(f[f.length-1]))}else for(l=0;l<g;l++)y=b[l],d[l]=(y[0]*(v+s-1)-s/2)*r+i,f[l]=y[1];return u.makeColorScaleFunc({domain:d,range:f},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(t,N,V){var m=t("./constants");N.exports=function(T){var e=T[0].z,a=e.length,i=e[0].length,n=a===2||i===2,r,v,s,o,b,g,d,f,y;for(v=0;v<a-1;v++)for(o=[],v===0&&(o=o.concat(m.BOTTOMSTART)),v===a-2&&(o=o.concat(m.TOPSTART)),r=0;r<i-1;r++)for(s=o.slice(),r===0&&(s=s.concat(m.LEFTSTART)),r===i-2&&(s=s.concat(m.RIGHTSTART)),b=r+","+v,g=[[e[v][r],e[v][r+1]],[e[v+1][r],e[v+1][r+1]]],y=0;y<T.length;y++)f=T[y],d=u(f.level,g),d&&(f.crossings[b]=d,s.indexOf(d)!==-1&&(f.starts.push([r,v]),n&&s.indexOf(d,s.indexOf(d)+1)!==-1&&f.starts.push([r,v])))};function u(A,T){var e=(T[0][0]>A?0:1)+(T[0][1]>A?0:2)+(T[1][1]>A?0:4)+(T[1][0]>A?0:8);if(e===5||e===10){var a=(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4;return A>a?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":748}],762:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../components/drawing"),T=t("../../components/colorscale"),e=t("../../lib/svg_text_utils"),a=t("../../plots/cartesian/axes"),i=t("../../plots/cartesian/set_convert"),n=t("../heatmap/plot"),r=t("./make_crossings"),v=t("./find_all_paths"),s=t("./empty_pathinfo"),o=t("./convert_to_constraints"),b=t("./close_boundaries"),g=t("./constants"),d=g.LABELOPTIMIZER;V.plot=function(_,h,L,E){var S=h.xaxis,P=h.yaxis;u.makeTraceGroups(E,L,"contour").each(function(F){var I=m.select(this),D=F[0],R=D.trace,O=D.x,z=D.y,G=R.contours,Y=s(G,h,D),ee=u.ensureSingle(I,"g","heatmapcoloring"),j=[];G.coloring==="heatmap"&&(j=[F]),n(_,h,j,ee),r(Y),v(Y);var X=S.c2p(O[0],!0),ie=S.c2p(O[O.length-1],!0),he=P.c2p(z[0],!0),K=P.c2p(z[z.length-1],!0),$=[[X,K],[ie,K],[ie,he],[X,he]],U=Y;G.type==="constraint"&&(U=o(Y,G._operation)),f(I,$,G),y(I,U,$,G),x(I,Y,_,D,G),M(I,h,_,D,$)})};function f(p,_,h){var L=u.ensureSingle(p,"g","contourbg"),E=L.selectAll("path").data(h.coloring==="fill"?[0]:[]);E.enter().append("path"),E.exit().remove(),E.attr("d","M"+_.join("L")+"Z").style("stroke","none")}function y(p,_,h,L){var E=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",S="M"+h.join("L")+"Z";E&&b(_,L);var P=u.ensureSingle(p,"g","contourfill"),F=P.selectAll("path").data(E?_:[]);F.enter().append("path"),F.exit().remove(),F.each(function(I){var D=(I.prefixBoundary?S:"")+l(I,h);D?m.select(this).attr("d",D).style("stroke","none"):m.select(this).remove()})}function l(p,_){var h="",L=0,E=p.edgepaths.map(function(X,ie){return ie}),S=!0,P,F,I,D,R,O;function z(X){return Math.abs(X[1]-_[0][1])<.01}function G(X){return Math.abs(X[1]-_[2][1])<.01}function Y(X){return Math.abs(X[0]-_[0][0])<.01}function ee(X){return Math.abs(X[0]-_[2][0])<.01}for(;E.length;){for(O=A.smoothopen(p.edgepaths[L],p.smoothing),h+=S?O:O.replace(/^M/,"L"),E.splice(E.indexOf(L),1),P=p.edgepaths[L][p.edgepaths[L].length-1],D=-1,I=0;I<4;I++){if(!P){u.log("Missing end?",L,p);break}for(z(P)&&!ee(P)?F=_[1]:Y(P)?F=_[0]:G(P)?F=_[3]:ee(P)&&(F=_[2]),R=0;R<p.edgepaths.length;R++){var j=p.edgepaths[R][0];Math.abs(P[0]-F[0])<.01?Math.abs(P[0]-j[0])<.01&&(j[1]-P[1])*(F[1]-j[1])>=0&&(F=j,D=R):Math.abs(P[1]-F[1])<.01?Math.abs(P[1]-j[1])<.01&&(j[0]-P[0])*(F[0]-j[0])>=0&&(F=j,D=R):u.log("endpt to newendpt is not vert. or horz.",P,F,j)}if(P=F,D>=0)break;h+="L"+F}if(D===p.edgepaths.length){u.log("unclosed perimeter path");break}L=D,S=E.indexOf(L)===-1,S&&(L=E[0],h+="Z")}for(L=0;L<p.paths.length;L++)h+=A.smoothclosed(p.paths[L],p.smoothing);return h}function x(p,_,h,L,E){var S=u.ensureSingle(p,"g","contourlines"),P=E.showlines!==!1,F=E.showlabels,I=P&&F,D=V.createLines(S,P||F,_),R=V.createLineClip(S,I,h,L.trace.uid),O=p.selectAll("g.contourlabels").data(F?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),F){var z=[],G=[];u.clearLocationCache();var Y=V.labelFormatter(h,L),ee=A.tester.append("text").attr("data-notex",1).call(A.font,E.labelfont),j=_[0].xaxis,X=_[0].yaxis,ie=j._length,he=X._length,K=j.range,$=X.range,U=u.aggNums(Math.min,null,L.x),H=u.aggNums(Math.max,null,L.x),q=u.aggNums(Math.min,null,L.y),re=u.aggNums(Math.max,null,L.y),Z=Math.max(j.c2p(U,!0),0),Q=Math.min(j.c2p(H,!0),ie),oe=Math.max(X.c2p(re,!0),0),se=Math.min(X.c2p(q,!0),he),ae={};K[0]<K[1]?(ae.left=Z,ae.right=Q):(ae.left=Q,ae.right=Z),$[0]<$[1]?(ae.top=oe,ae.bottom=se):(ae.top=se,ae.bottom=oe),ae.middle=(ae.top+ae.bottom)/2,ae.center=(ae.left+ae.right)/2,z.push([[ae.left,ae.top],[ae.right,ae.top],[ae.right,ae.bottom],[ae.left,ae.bottom]]);var le=Math.sqrt(ie*ie+he*he),_e=g.LABELDISTANCE*le/Math.max(1,_.length/g.LABELINCREASE);D.each(function(fe){var me=V.calcTextOpts(fe.level,Y,ee,h);m.select(this).selectAll("path").each(function(){var xe=this,ye=u.getVisibleSegment(xe,ae,me.height/2);if(!!ye&&!(ye.len<(me.width+me.height)*g.LABELMIN))for(var be=Math.min(Math.ceil(ye.len/_e),g.LABELMAX),ke=0;ke<be;ke++){var De=V.findBestTextLocation(xe,ye,me,G,ae);if(!De)break;V.addLabelData(De,me,G,z)}})}),ee.remove(),V.drawLabels(O,G,h,R,I?z:null)}F&&!P&&D.remove()}V.createLines=function(p,_,h){var L=h[0].smoothing,E=p.selectAll("g.contourlevel").data(_?h:[]);if(E.exit().remove(),E.enter().append("g").classed("contourlevel",!0),_){var S=E.selectAll("path.openline").data(function(F){return F.pedgepaths||F.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(F){return A.smoothopen(F,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=E.selectAll("path.closedline").data(function(F){return F.ppaths||F.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(F){return A.smoothclosed(F,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return E},V.createLineClip=function(p,_,h,L){var E=h._fullLayout._clips,S=_?"clipline"+L:null,P=E.selectAll("#"+S).data(_?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",S),A.setClipUrl(p,S,h),P},V.labelFormatter=function(p,_){var h=p._fullLayout,L=_.trace,E=L.contours,S={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(E.labelformat)S.tickformat=E.labelformat,i(S,h);else{var P=T.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)S=P.colorbar._axis;else{if(E.type==="constraint"){var F=E.value;Array.isArray(F)?S.range=[F[0],F[F.length-1]]:S.range=[F,F]}else S.range=[E.start,E.end],S.nticks=(E.end-E.start)/E.size;S.range[0]===S.range[1]&&(S.range[1]+=S.range[0]||1),S.nticks||(S.nticks=1e3),i(S,h),a.prepTicks(S),S._tmin=null,S._tmax=null}}return function(I){return a.tickText(S,I).text}},V.calcTextOpts=function(p,_,h,L){var E=_(p);h.text(E).call(e.convertToTspans,L);var S=h.node(),P=A.bBox(S,!0);return{text:E,width:P.width,height:P.height,fontSize:+S.style["font-size"].replace("px",""),level:p,dy:(P.top+P.bottom)/2}},V.findBestTextLocation=function(p,_,h,L,E){var S=h.width,P,F,I,D,R;_.isClosed?(F=_.len/d.INITIALSEARCHPOINTS,P=_.min+F/2,I=_.max):(F=(_.len-S)/(d.INITIALSEARCHPOINTS+1),P=_.min+F+S/2,I=_.max-(F+S)/2);for(var O=1/0,z=0;z<d.ITERATIONS;z++){for(var G=P;G<I;G+=F){var Y=u.getTextLocation(p,_.total,G,S),ee=c(Y,h,L,E);ee<O&&(O=ee,R=Y,D=G)}if(O>d.MAXCOST*2)break;z&&(F/=2),P=D-F/2,I=P+F*1.5}if(O<=d.MAXCOST)return R};function c(p,_,h,L){var E=_.width/2,S=_.height/2,P=p.x,F=p.y,I=p.theta,D=Math.cos(I)*E,R=Math.sin(I)*E,O=(P>L.center?L.right-P:P-L.left)/(D+Math.abs(Math.sin(I)*S)),z=(F>L.middle?L.bottom-F:F-L.top)/(Math.abs(R)+Math.cos(I)*S);if(O<1||z<1)return 1/0;var G=d.EDGECOST*(1/(O-1)+1/(z-1));G+=d.ANGLECOST*I*I;for(var Y=P-D,ee=F-R,j=P+D,X=F+R,ie=0;ie<h.length;ie++){var he=h[ie],K=Math.cos(he.theta)*he.width/2,$=Math.sin(he.theta)*he.width/2,U=u.segmentDistance(Y,ee,j,X,he.x-K,he.y-$,he.x+K,he.y+$)*2/(_.height+he.height),H=he.level===_.level,q=H?d.SAMELEVELDISTANCE:1;if(U<=q)return 1/0;var re=d.NEIGHBORCOST*(H?d.SAMELEVELFACTOR:1);G+=re/(U-q)}return G}V.addLabelData=function(p,_,h,L){var E=_.fontSize,S=_.width+E/3,P=Math.max(0,_.height-E/3),F=p.x,I=p.y,D=p.theta,R=Math.sin(D),O=Math.cos(D),z=function(Y,ee){return[F+Y*O-ee*R,I+Y*R+ee*O]},G=[z(-S/2,-P/2),z(-S/2,P/2),z(S/2,P/2),z(S/2,-P/2)];h.push({text:_.text,x:F,y:I,dy:_.dy,theta:D,level:_.level,width:S,height:P}),L.push(G)},V.drawLabels=function(p,_,h,L,E){var S=p.selectAll("text").data(_,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(S.exit().remove(),S.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,O=D.y-Math.cos(D.theta)*D.dy;m.select(this).text(D.text).attr({x:R,y:O,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+O+")"}).call(e.convertToTspans,h)}),E){for(var P="",F=0;F<E.length;F++)P+="M"+E[F].join("L")+"Z";var I=u.ensureSingle(L,"path","");I.attr("d",P)}};function M(p,_,h,L,E){var S=L.trace,P=h._fullLayout._clips,F="clip"+S.uid,I=P.selectAll("#"+F).data(S.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",F),I.exit().remove(),S.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:_.xaxis,yaxis:_.yaxis,x:L.x,y:L.y,z:w(L),smoothing:0};r([D]),v([D]),b([D],{type:"levels"});var R=u.ensureSingle(I,"path","");R.attr("d",(D.prefixBoundary?"M"+E.join("L")+"Z":"")+l(D,E))}else F=null;A.setClipUrl(p,F,h)}function w(p){var _=p.trace._emptypoints,h=[],L=p.z.length,E=p.z[0].length,S,P=[],F;for(S=0;S<E;S++)P.push(1);for(S=0;S<L;S++)h.push(P.slice());for(S=0;S<_.length;S++)F=_[S],h[F[0]][F[1]]=0;return p.zmask=h,h}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../lib");N.exports=function(e,a){var i=e.contours;if(e.autocontour){var n=e.zmin,r=e.zmax;(e.zauto||n===void 0)&&(n=u.aggNums(Math.min,null,a)),(e.zauto||r===void 0)&&(r=u.aggNums(Math.max,null,a));var v=A(n,r,e.ncontours);i.size=v.dtick,i.start=m.tickFirst(v),v.range.reverse(),i.end=m.tickFirst(v),i.start===n&&(i.start+=i.size),i.end===r&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),e._input.contours||(e._input.contours={}),u.extendFlat(e._input.contours,{start:i.start,end:i.end,size:i.size}),e._input.autocontour=!0}else if(i.type!=="constraint"){var s=i.start,o=i.end,b=e._input.contours;if(s>o&&(i.start=b.start=o,o=i.end=b.end=s,s=i.start),!(i.size>0)){var g;s===o?g=1:g=A(s,o,e.ncontours).dtick,b.size=i.size=g}}};function A(T,e,a){var i={type:"linear",range:[T,e]};return m.autoTicks(i,(e-T)/(a||15)),i}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/drawing"),A=t("../heatmap/style"),T=t("./make_color_map");N.exports=function(a){var i=m.select(a).selectAll("g.contour");i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var r=m.select(this),v=n[0].trace,s=v.contours,o=v.line,b=s.size||1,g=s.start,d=s.type==="constraint",f=!d&&s.coloring==="lines",y=!d&&s.coloring==="fill",l=f||y?T(v):null;r.selectAll("g.contourlevel").each(function(M){m.select(this).selectAll("path").call(u.lineGroupStyle,o.width,f?l(M.level):o.color,o.dash)});var x=s.labelfont;if(r.selectAll("g.contourlabels text").each(function(M){u.font(m.select(this),{family:x.family,size:x.size,color:x.color||(f?l(M.level):o.color)})}),d)r.selectAll("g.contourfill path").style("fill",v.fillcolor);else if(y){var c;r.selectAll("g.contourfill path").style("fill",function(M){return c===void 0&&(c=M.level),l(M.level+.5*b)}),c===void 0&&(c=g),r.selectAll("g.contourbg path").style("fill",l(c-.5*b))}}),A(a)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(t,N,V){var m=t("../../components/colorscale/defaults"),u=t("./label_defaults");N.exports=function(T,e,a,i,n){var r=a("contours.coloring"),v,s="";r==="fill"&&(v=a("contours.showlines")),v!==!1&&(r!=="lines"&&(s=a("line.color","#000")),a("line.width",.5),a("line.dash")),r!=="none"&&(T.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,m(T,e,i,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),u(a,i,s,n)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(t,N,V){var m=t("../heatmap/attributes"),u=t("../contour/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../lib/extend").extendFlat,e=u.contours;N.exports=T({carpet:{valType:"string",editType:"calc"},z:m.z,a:m.x,a0:m.x0,da:m.dx,b:m.y,b0:m.y0,db:m.dy,text:m.text,hovertext:m.hovertext,transpose:m.transpose,atype:m.xtype,btype:m.ytype,fillcolor:u.fillcolor,autocontour:u.autocontour,ncontours:u.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:u.line.color,width:u.line.width,dash:u.line.dash,smoothing:u.line.smoothing,editType:"plot"},transforms:void 0},A("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(t,N,V){var m=t("../../components/colorscale/calc"),u=t("../../lib"),A=t("../heatmap/convert_column_xyz"),T=t("../heatmap/clean_2d_array"),e=t("../heatmap/interp2d"),a=t("../heatmap/find_empties"),i=t("../heatmap/make_bound_array"),n=t("./defaults"),r=t("../carpet/lookup_carpetid"),v=t("../contour/set_contours");N.exports=function(b,g){var d=g._carpetTrace=r(b,g);if(!(!d||!d.visible||d.visible==="legendonly")){if(!g.a||!g.b){var f=b.data[d.index],y=b.data[g.index];y.a||(y.a=f.a),y.b||(y.b=f.b),n(y,g,g._defaultColor,b._fullLayout)}var l=s(b,g);return v(g,g._z),l}};function s(o,b){var g=b._carpetTrace,d=g.aaxis,f=g.baxis,y,l,x,c,M,w,p;d._minDtick=0,f._minDtick=0,u.isArray1D(b.z)&&A(b,d,f,"a","b",["z"]),y=b._a=b._a||b.a,c=b._b=b._b||b.b,y=y?d.makeCalcdata(b,"_a"):[],c=c?f.makeCalcdata(b,"_b"):[],l=b.a0||0,x=b.da||1,M=b.b0||0,w=b.db||1,p=b._z=T(b._z||b.z,b.transpose),b._emptypoints=a(p),e(p,b._emptypoints);var _=u.maxRowLength(p),h=b.xtype==="scaled"?"":y,L=i(b,h,l,x,_,d),E=b.ytype==="scaled"?"":c,S=i(b,E,M,w,p.length,f),P={a:L,b:S,z:p};return b.contours.type==="levels"&&b.contours.coloring!=="none"&&m(o,b,{vals:p,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(t,N,V){var m=t("../../lib"),u=t("../heatmap/xyz_defaults"),A=t("./attributes"),T=t("../contour/constraint_defaults"),e=t("../contour/contours_defaults"),a=t("../contour/style_defaults");N.exports=function(n,r,v,s){function o(f,y){return m.coerce(n,r,A,f,y)}function b(f){return m.coerce2(n,r,A,f)}if(o("carpet"),n.a&&n.b){var g=u(n,r,o,s,"a","b");if(!g){r.visible=!1;return}o("text");var d=o("contours.type")==="constraint";d?T(n,r,o,s,v,{hasHover:!1}):(e(n,r,o,b),a(n,r,o,s,{hasHover:!1}))}else r._defaultColor=v,r._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../contour/colorbar"),calc:t("./calc"),plot:t("./plot"),style:t("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(t,N,V){var m=t("@plotly/d3"),u=t("../carpet/map_1d_array"),A=t("../carpet/makepath"),T=t("../../components/drawing"),e=t("../../lib"),a=t("../contour/make_crossings"),i=t("../contour/find_all_paths"),n=t("../contour/plot"),r=t("../contour/constants"),v=t("../contour/convert_to_constraints"),s=t("../contour/empty_pathinfo"),o=t("../contour/close_boundaries"),b=t("../carpet/lookup_carpetid"),g=t("../carpet/axis_aligned_line");N.exports=function(h,L,E,S){var P=L.xaxis,F=L.yaxis;e.makeTraceGroups(S,E,"contour").each(function(I){var D=m.select(this),R=I[0],O=R.trace,z=O._carpetTrace=b(h,O),G=h.calcdata[z.index][0];if(!z.visible||z.visible==="legendonly")return;var Y=R.a,ee=R.b,j=O.contours,X=s(j,L,R),ie=j.type==="constraint",he=j._operation,K=ie?he==="="?"lines":"fill":j.coloring;function $(_e){var fe=z.ab2xy(_e[0],_e[1],!0);return[P.c2p(fe[0]),F.c2p(fe[1])]}var U=[[Y[0],ee[ee.length-1]],[Y[Y.length-1],ee[ee.length-1]],[Y[Y.length-1],ee[0]],[Y[0],ee[0]]];a(X);var H=(Y[Y.length-1]-Y[0])*1e-8,q=(ee[ee.length-1]-ee[0])*1e-8;i(X,H,q);var re=X;j.type==="constraint"&&(re=v(X,he)),d(X,$);var Z,Q,oe,se,ae=[];for(se=G.clipsegments.length-1;se>=0;se--)Z=G.clipsegments[se],Q=u([],Z.x,P.c2p),oe=u([],Z.y,F.c2p),Q.reverse(),oe.reverse(),ae.push(A(Q,oe,Z.bicubic));var le="M"+ae.join("L")+"Z";M(D,G.clipsegments,P,F,ie,K),w(O,D,P,F,re,U,$,z,G,K,le),f(D,X,h,R,j,L,z),T.setClipUrl(D,z._clipPathId,h)})};function d(_,h){var L,E,S,P,F,I,D,R,O;for(L=0;L<_.length;L++){for(P=_[L],F=P.pedgepaths=[],I=P.ppaths=[],E=0;E<P.edgepaths.length;E++){for(O=P.edgepaths[E],D=[],S=0;S<O.length;S++)D[S]=h(O[S]);F.push(D)}for(E=0;E<P.paths.length;E++){for(O=P.paths[E],R=[],S=0;S<O.length;S++)R[S]=h(O[S]);I.push(R)}}}function f(_,h,L,E,S,P,F){var I=e.ensureSingle(_,"g","contourlines"),D=S.showlines!==!1,R=S.showlabels,O=D&&R,z=n.createLines(I,D||R,h),G=n.createLineClip(I,O,L,E.trace.uid),Y=_.selectAll("g.contourlabels").data(R?[0]:[]);if(Y.exit().remove(),Y.enter().append("g").classed("contourlabels",!0),R){var ee=P.xaxis,j=P.yaxis,X=ee._length,ie=j._length,he=[[[0,0],[X,0],[X,ie],[0,ie]]],K=[];e.clearLocationCache();var $=n.labelFormatter(L,E),U=T.tester.append("text").attr("data-notex",1).call(T.font,S.labelfont),H={left:0,right:X,center:X/2,top:0,bottom:ie,middle:ie/2},q=Math.sqrt(X*X+ie*ie),re=r.LABELDISTANCE*q/Math.max(1,h.length/r.LABELINCREASE);z.each(function(Z){var Q=n.calcTextOpts(Z.level,$,U,L);m.select(this).selectAll("path").each(function(oe){var se=this,ae=e.getVisibleSegment(se,H,Q.height/2);if(!!ae&&(y(se,oe,Z,ae,F,Q.height),!(ae.len<(Q.width+Q.height)*r.LABELMIN)))for(var le=Math.min(Math.ceil(ae.len/re),r.LABELMAX),_e=0;_e<le;_e++){var fe=n.findBestTextLocation(se,ae,Q,K,H);if(!fe)break;n.addLabelData(fe,Q,K,he)}})}),U.remove(),n.drawLabels(Y,K,L,G,O?he:null)}R&&!D&&z.remove()}function y(_,h,L,E,S,P){for(var F,I=0;I<L.pedgepaths.length;I++)h===L.pedgepaths[I]&&(F=L.edgepaths[I]);if(!F)return;var D=S.a[0],R=S.a[S.a.length-1],O=S.b[0],z=S.b[S.b.length-1];function G(ie,he){var K=0,$,U=.1;return(Math.abs(ie[0]-D)<U||Math.abs(ie[0]-R)<U)&&($=x(S.dxydb_rough(ie[0],ie[1],U)),K=Math.max(K,P*c(he,$)/2)),(Math.abs(ie[1]-O)<U||Math.abs(ie[1]-z)<U)&&($=x(S.dxyda_rough(ie[0],ie[1],U)),K=Math.max(K,P*c(he,$)/2)),K}var Y=l(_,0,1),ee=l(_,E.total,E.total-1),j=G(F[0],Y),X=E.total-G(F[F.length-1],ee);E.min<j&&(E.min=j),E.max>X&&(E.max=X),E.len=E.max-E.min}function l(_,h,L){var E=_.getPointAtLength(h),S=_.getPointAtLength(L),P=S.x-E.x,F=S.y-E.y,I=Math.sqrt(P*P+F*F);return[P/I,F/I]}function x(_){var h=Math.sqrt(_[0]*_[0]+_[1]*_[1]);return[_[0]/h,_[1]/h]}function c(_,h){var L=Math.abs(_[0]*h[0]+_[1]*h[1]),E=Math.sqrt(1-L*L);return E/L}function M(_,h,L,E,S,P){var F,I,D,R,O=e.ensureSingle(_,"g","contourbg"),z=O.selectAll("path").data(P==="fill"&&!S?[0]:[]);z.enter().append("path"),z.exit().remove();var G=[];for(R=0;R<h.length;R++)F=h[R],I=u([],F.x,L.c2p),D=u([],F.y,E.c2p),G.push(A(I,D,F.bicubic));z.attr("d","M"+G.join("L")+"Z").style("stroke","none")}function w(_,h,L,E,S,P,F,I,D,R,O){var z=R==="fill";z&&o(S,_.contours);var G=e.ensureSingle(h,"g","contourfill"),Y=G.selectAll("path").data(z?S:[]);Y.enter().append("path"),Y.exit().remove(),Y.each(function(ee){var j=(ee.prefixBoundary?O:"")+p(_,ee,P,F,I,D,L,E);j?m.select(this).attr("d",j).style("stroke","none"):m.select(this).remove()})}function p(_,h,L,E,S,P,F,I){var D,R="",O=h.edgepaths.map(function(oe,se){return se}),z=!0,G,Y,ee,j,X,ie,he=Math.abs(L[0][0]-L[2][0])*1e-4,K=Math.abs(L[0][1]-L[2][1])*1e-4;function $(oe){return Math.abs(oe[1]-L[0][1])<K}function U(oe){return Math.abs(oe[1]-L[2][1])<K}function H(oe){return Math.abs(oe[0]-L[0][0])<he}function q(oe){return Math.abs(oe[0]-L[2][0])<he}function re(oe,se){var ae,le,_e,fe,me="";for($(oe)&&!q(oe)||U(oe)&&!H(oe)?(fe=S.aaxis,_e=g(S,P,[oe[0],se[0]],.5*(oe[1]+se[1]))):(fe=S.baxis,_e=g(S,P,.5*(oe[0]+se[0]),[oe[1],se[1]])),ae=1;ae<_e.length;ae++)for(me+=fe.smoothing?"C":"L",le=0;le<_e[ae].length;le++){var xe=_e[ae][le];me+=[F.c2p(xe[0]),I.c2p(xe[1])]+" "}return me}for(D=0,G=null;O.length;){var Z=h.edgepaths[D][0];for(G&&(R+=re(G,Z)),ie=T.smoothopen(h.edgepaths[D].map(E),h.smoothing),R+=z?ie:ie.replace(/^M/,"L"),O.splice(O.indexOf(D),1),G=h.edgepaths[D][h.edgepaths[D].length-1],j=-1,ee=0;ee<4;ee++){if(!G){e.log("Missing end?",D,h);break}for($(G)&&!q(G)?Y=L[1]:H(G)?Y=L[0]:U(G)?Y=L[3]:q(G)&&(Y=L[2]),X=0;X<h.edgepaths.length;X++){var Q=h.edgepaths[X][0];Math.abs(G[0]-Y[0])<he?Math.abs(G[0]-Q[0])<he&&(Q[1]-G[1])*(Y[1]-Q[1])>=0&&(Y=Q,j=X):Math.abs(G[1]-Y[1])<K?Math.abs(G[1]-Q[1])<K&&(Q[0]-G[0])*(Y[0]-Q[0])>=0&&(Y=Q,j=X):e.log("endpt to newendpt is not vert. or horz.",G,Y,Q)}if(j>=0)break;R+=re(G,Y),G=Y}if(j===h.edgepaths.length){e.log("unclosed perimeter path");break}D=j,z=O.indexOf(D)===-1,z&&(D=O[0],R+=re(G,Y)+"Z",G=null)}for(D=0;D<h.paths.length;D++)R+=T.smoothclosed(h.paths[D].map(E),h.smoothing);return R}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(t,N,V){var m=t("../../components/colorscale/attributes"),u=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../plots/attributes"),T=t("../scattermapbox/attributes"),e=t("../../lib/extend").extendFlat;N.exports=e({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:e({},A.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:u(),showlegend:e({},A.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib").isArrayOrTypedArray,A=t("../../constants/numerical").BADNUM,T=t("../../components/colorscale/calc"),e=t("../../lib")._;N.exports=function(i,n){for(var r=n._length,v=new Array(r),s=n.z,o=u(s)&&s.length,b=0;b<r;b++){var g=v[b]={},d=n.lon[b],f=n.lat[b];if(g.lonlat=m(d)&&m(f)?[+d,+f]:[A,A],o){var y=s[b];g.z=m(y)?y:A}}return T(i,n,{vals:o?s:[0,1],containerStr:"",cLetter:"z"}),r&&(v[0].t={labels:{lat:e(i,"lat:")+" ",lon:e(i,"lon:")+" "}}),v}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../components/color"),T=t("../../components/colorscale"),e=t("../../constants/numerical").BADNUM,a=t("../../lib/geojson_utils").makeBlank;N.exports=function(n){var r=n[0].trace,v=r.visible===!0&&r._length!==0,s={layout:{visibility:"none"},paint:{}},o=r._opts={heatmap:s,geojson:a()};if(!v)return o;var b=[],g,d=r.z,f=r.radius,y=u.isArrayOrTypedArray(d)&&d.length,l=u.isArrayOrTypedArray(f);for(g=0;g<n.length;g++){var x=n[g],c=x.lonlat;if(c[0]!==e){var M={};if(y){var w=x.z;M.z=w!==e?w:0}l&&(M.r=m(f[g])&&f[g]>0?+f[g]:0),b.push({type:"Feature",geometry:{type:"Point",coordinates:c},properties:M})}}var p=T.extractOpts(r),_=p.reversescale?T.flipScale(p.colorscale):p.colorscale,h=_[0][1],L=A.opacity(h)<1?h:A.addOpacity(h,0),E=["interpolate",["linear"],["heatmap-density"],0,L];for(g=1;g<_.length;g++)E.push(_[g][0],_[g][1]);var S=["interpolate",["linear"],["get","z"],p.min,0,p.max,1];return u.extendFlat(o.heatmap.paint,{"heatmap-weight":y?S:1/(p.max-p.min),"heatmap-color":E,"heatmap-radius":l?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),o.geojson={type:"FeatureCollection",features:b},o.heatmap.layout.visibility="visible",o}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(t,N,V){var m=t("../../lib"),u=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(b,g){return m.coerce(e,a,A,b,g)}var v=r("lon")||[],s=r("lat")||[],o=Math.min(v.length,s.length);if(!o){a.visible=!1;return}a._length=o,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),u(e,a,n,r,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(t,N,V){N.exports=function(u,A){return u.lon=A.lon,u.lat=A.lat,u.z=A.z,u}},{}],776:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../scattermapbox/hover").hoverPoints,A=t("../scattermapbox/hover").getExtraText;N.exports=function(e,a,i){var n=u(e,a,i);if(!!n){var r=n[0],v=r.cd,s=v[0].trace,o=v[r.index];if(delete r.color,"z"in o){var b=r.subplot.mockAxis;r.z=o.z,r.zLabel=m.tickText(b,b.c2l(o.z),"hover").text}return r.extraText=A(s,o,v[0].t.labels),[r]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),formatLabels:t("../scattermapbox/format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover"),eventData:t("./event_data"),getBelow:function(m,u){for(var A=u.getMapLayers(),T=0;T<A.length;T++){var e=A[T],a=e.id;if(e.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(t,N,V){var m=t("./convert"),u=t("../../plots/mapbox/constants").traceLayerPrefix;function A(e,a){this.type="densitymapbox",this.subplot=e,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",u+a+"-heatmap"]],this.below=null}var T=A.prototype;T.update=function(e){var a=this.subplot,i=this.layerList,n=m(e),r=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var v=0;v<i.length;v++){var s=i[v],o=s[0],b=s[1],g=n[o];a.setOptions(b,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&a.setOptions(b,"setPaintProperty",g.paint)}},T._addLayers=function(e,a){for(var i=this.subplot,n=this.layerList,r=this.sourceId,v=0;v<n.length;v++){var s=n[v],o=s[0],b=e[o];i.addLayer({type:o,id:s[1],source:r,layout:b.layout,paint:b.paint},a)}},T._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,i=a.length-1;i>=0;i--)e.removeLayer(a[i][1])},T.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},N.exports=function(a,i){var n=i[0].trace,r=new A(a,n.uid),v=r.sourceId,s=m(i),o=r.below=a.belowLookup["trace-"+n.uid];return a.map.addSource(v,{type:"geojson",data:s.geojson}),r._addLayers(s,o),r}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;m.mergeArray(T.text,A,"tx"),m.mergeArray(T.hovertext,A,"htx");var a=T.marker;if(a){m.mergeArray(a.opacity,A,"mo"),m.mergeArray(a.color,A,"mc");var i=a.line;i&&(m.mergeArray(i.color,A,"mlc"),m.mergeArrayCastPositive(i.width,A,"mlw"))}}},{"../../lib":515}],780:[function(t,N,V){var m=t("../bar/attributes"),u=t("../scatter/attributes").line,A=t("../../plots/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");N.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:m.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:n({},A.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),text:m.text,textposition:m.textposition,insidetextanchor:n({},m.insidetextanchor,{dflt:"middle"}),textangle:n({},m.textangle,{dflt:0}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:n({},m.orientation,{}),offset:n({},m.offset,{arrayOk:!1}),width:n({},m.width,{arrayOk:!1}),marker:v(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},u.color,{dflt:r.defaultLine}),width:n({},u.width,{dflt:0,editType:"plot"}),dash:u.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup};function v(){var s=n({},m.marker);return delete s.pattern,s}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../plots/cartesian/align_period"),A=t("./arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;N.exports=function(n,r){var v=m.getFromId(n,r.xaxis||"x"),s=m.getFromId(n,r.yaxis||"y"),o,b,g,d,f,y,l,x;r.orientation==="h"?(o=v.makeCalcdata(r,"x"),g=s.makeCalcdata(r,"y"),d=u(r,s,"y",g),f=!!r.yperiodalignment,y="y"):(o=s.makeCalcdata(r,"y"),g=v.makeCalcdata(r,"x"),d=u(r,v,"x",g),f=!!r.xperiodalignment,y="x"),b=d.vals;var c=Math.min(b.length,o.length),M=new Array(c);for(r._base=[],l=0;l<c;l++){o[l]<0&&(o[l]=e);var w=!1;o[l]!==e&&l+1<c&&o[l+1]!==e&&(w=!0),x=M[l]={p:b[l],s:o[l],cNext:w},r._base[l]=-.5*x.s,f&&(M[l].orig_p=g[l],M[l][y+"End"]=d.ends[l],M[l][y+"Start"]=d.starts[l]),r.ids&&(x.id=String(r.ids[l])),l===0&&(M[0].vTotal=0),M[0].vTotal+=a(x.s),x.begR=a(x.s)/a(M[0].s)}var p;for(l=0;l<c;l++)x=M[l],x.s!==e&&(x.sumR=x.s/M[0].vTotal,x.difR=p!==void 0?x.s/p:1,p=x.s);return A(M,r),T(M,r),M};function a(i){return i===e?0:i}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(t,N,V){N.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(t,N,V){var m=t("../bar/cross_trace_calc").setGroupPositions;N.exports=function(A,T){var e=A._fullLayout,a=A._fullData,i=A.calcdata,n=T.xaxis,r=T.yaxis,v=[],s=[],o=[],b,g;for(g=0;g<a.length;g++){var d=a[g],f=d.orientation==="h";d.visible===!0&&d.xaxis===n._id&&d.yaxis===r._id&&d.type==="funnel"&&(b=i[g],f?o.push(b):s.push(b),v.push(b))}var y={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(m(A,n,r,s,y),m(A,r,n,o,y),g=0;g<v.length;g++){b=v[g];for(var l=0;l<b.length;l++)l+1<b.length&&(b[l].nextP0=b[l+1].p0,b[l].nextS0=b[l+1].s0,b[l].nextP1=b[l+1].p1,b[l].nextS1=b[l+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(t,N,V){var m=t("../../lib"),u=t("../bar/defaults").handleGroupingDefaults,A=t("../bar/defaults").handleText,T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./attributes"),i=t("../../components/color");function n(s,o,b,g){function d(w,p){return m.coerce(s,o,a,w,p)}var f=T(s,o,g,d);if(!f){o.visible=!1;return}e(s,o,g,d),d("xhoverformat"),d("yhoverformat"),d("orientation",o.y&&!o.x?"v":"h"),d("offset"),d("width");var y=d("text");d("hovertext"),d("hovertemplate");var l=d("textposition");A(s,o,g,d,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&!o.texttemplate&&d("textinfo",Array.isArray(y)?"text+value":"value");var x=d("marker.color",b);d("marker.line.color",i.defaultLine),d("marker.line.width");var c=d("connector.visible");if(c){d("connector.fillcolor",r(x));var M=d("connector.line.width");M&&(d("connector.line.color"),d("connector.line.dash"))}}function r(s){var o=m.isArrayOrTypedArray(s)?"#000":s;return i.addOpacity(o,.5*i.opacity(o))}function v(s,o){var b,g;function d(y){return m.coerce(g._input,g,a,y)}if(o.funnelmode==="group")for(var f=0;f<s.length;f++)g=s[f],b=g._input,u(b,g,o,d)}N.exports={supplyDefaults:n,crossTraceDefaults:v}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(t,N,V){N.exports=function(u,A){return u.x="xVal"in A?A.xVal:A.x,u.y="yVal"in A?A.yVal:A.y,"percentInitial"in A&&(u.percentInitial=A.percentInitial),"percentPrevious"in A&&(u.percentPrevious=A.percentPrevious),"percentTotal"in A&&(u.percentTotal=A.percentTotal),A.xa&&(u.xaxis=A.xa),A.ya&&(u.yaxis=A.ya),u}},{}],786:[function(t,N,V){var m=t("../../components/color").opacity,u=t("../bar/hover").hoverOnBars,A=t("../../lib").formatPercent;N.exports=function(a,i,n,r,v){var s=u(a,i,n,r,v);if(!!s){var o=s.cd,b=o[0].trace,g=b.orientation==="h",d=s.index,f=o[d],y=g?"x":"y";s[y+"LabelVal"]=f.s,s.percentInitial=f.begR,s.percentInitialLabel=A(f.begR,1),s.percentPrevious=f.difR,s.percentPreviousLabel=A(f.difR,1),s.percentTotal=f.sumR,s.percentTotalLabel=A(f.sumR,1);var l=f.hi||b.hoverinfo,x=[];if(l&&l!=="none"&&l!=="skip"){var c=l==="all",M=l.split("+"),w=function(p){return c||M.indexOf(p)!==-1};w("percent initial")&&x.push(s.percentInitialLabel+" of initial"),w("percent previous")&&x.push(s.percentPreviousLabel+" of previous"),w("percent total")&&x.push(s.percentTotalLabel+" of total")}return s.extraText=x.join("<br>"),s.color=T(b,f),[s]}};function T(e,a){var i=e.marker,n=a.mc||i.color,r=a.mlc||i.line.color,v=a.mlw||i.line.width;if(m(n))return n;if(m(r)&&v)return r}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(t,N,V){N.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(A,T,e){var a=!1;function i(v,s){return m.coerce(A,T,u,v,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="funnel"){a=!0;break}}a&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../components/drawing"),T=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),a=t("../bar/uniform_text").clearMinTextSize;N.exports=function(s,o,b,g){var d=s._fullLayout;a("funnel",d),i(s,o,b,g),n(s,o,b,g),e.plot(s,o,b,g,{mode:d.funnelmode,norm:d.funnelmode,gap:d.funnelgap,groupgap:d.funnelgroupgap})};function i(v,s,o,b){var g=s.xaxis,d=s.yaxis;u.makeTraceGroups(b,o,"trace bars").each(function(f){var y=m.select(this),l=f[0].trace,x=u.ensureSingle(y,"g","regions");if(!l.connector||!l.connector.visible){x.remove();return}var c=l.orientation==="h",M=x.selectAll("g.region").data(u.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var w=M.size();M.each(function(p,_){if(!(_!==w-1&&!p.cNext)){var h=r(p,g,d,c),L=h[0],E=h[1],S="";L[0]!==T&&E[0]!==T&&L[1]!==T&&E[1]!==T&&L[2]!==T&&E[2]!==T&&L[3]!==T&&E[3]!==T&&(c?S+="M"+L[0]+","+E[1]+"L"+L[2]+","+E[2]+"H"+L[3]+"L"+L[1]+","+E[1]+"Z":S+="M"+L[1]+","+E[1]+"L"+L[2]+","+E[3]+"V"+E[2]+"L"+L[1]+","+E[0]+"Z"),S===""&&(S="M0,0Z"),u.ensureSingle(m.select(this),"path").attr("d",S).call(A.setClipUrl,s.layerClipId,v)}})})}function n(v,s,o,b){var g=s.xaxis,d=s.yaxis;u.makeTraceGroups(b,o,"trace bars").each(function(f){var y=m.select(this),l=f[0].trace,x=u.ensureSingle(y,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){x.remove();return}var c=l.orientation==="h",M=x.selectAll("g.line").data(u.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var w=M.size();M.each(function(p,_){if(!(_!==w-1&&!p.cNext)){var h=r(p,g,d,c),L=h[0],E=h[1],S="";L[3]!==void 0&&E[3]!==void 0&&(c?(S+="M"+L[0]+","+E[1]+"L"+L[2]+","+E[2],S+="M"+L[1]+","+E[1]+"L"+L[3]+","+E[2]):(S+="M"+L[1]+","+E[1]+"L"+L[2]+","+E[3],S+="M"+L[1]+","+E[0]+"L"+L[2]+","+E[2])),S===""&&(S="M0,0Z"),u.ensureSingle(m.select(this),"path").attr("d",S).call(A.setClipUrl,s.layerClipId,v)}})})}function r(v,s,o,b){var g=[],d=[],f=b?s:o,y=b?o:s;return g[0]=f.c2p(v.s0,!0),d[0]=y.c2p(v.p0,!0),g[1]=f.c2p(v.s1,!0),d[1]=y.c2p(v.p1,!0),g[2]=f.c2p(v.nextS0,!0),d[2]=y.c2p(v.nextP0,!0),g[3]=f.c2p(v.nextS1,!0),d[3]=y.c2p(v.nextP1,!0),b?[g,d]:[d,g]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/drawing"),A=t("../../components/color"),T=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),a=t("../bar/uniform_text").resizeText,i=e.styleTextPoints;function n(r,v,s){var o=s||m.select(r).selectAll("g.funnellayer").selectAll("g.trace");a(r,o,"funnel"),o.style("opacity",function(b){return b[0].trace.opacity}),o.each(function(b){var g=m.select(this),d=b[0].trace;g.selectAll(".point > path").each(function(f){if(!f.isBlank){var y=d.marker;m.select(this).call(A.fill,f.mc||y.color).call(A.stroke,f.mlc||y.line.color).call(u.dashLine,y.line.dash,f.mlw||y.line.width).style("opacity",d.selectedpoints&&!f.selected?T:1)}}),i(g,d,r),g.selectAll(".regions").each(function(){m.select(this).selectAll("path").style("stroke-width",0).call(A.fill,d.connector.fillcolor)}),g.selectAll(".lines").each(function(){var f=d.connector.line;u.lineGroupStyle(m.select(this).selectAll("path"),f.width,f.color,f.dash)})})}N.exports={style:n}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(t,N,V){var m=t("../pie/attributes"),u=t("../../plots/attributes"),A=t("../../plots/domain").attributes,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../lib/extend").extendFlat;N.exports={labels:m.labels,label0:m.label0,dlabel:m.dlabel,values:m.values,marker:{colors:m.marker.colors,line:{color:a({},m.marker.line.color,{dflt:null}),width:a({},m.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:m.text,hovertext:m.hovertext,scalegroup:a({},m.scalegroup,{}),textinfo:a({},m.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},u.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:a({},m.textposition,{values:["inside","none"],dflt:"inside"}),textfont:m.textfont,insidetextfont:m.insidetextfont,title:{text:m.title.text,font:m.title.font,position:a({},m.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:A({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(t,N,V){var m=t("../../plots/plots");V.name="funnelarea",V.plot=function(u,A,T,e){m.plotBasePlot(V.name,u,A,T,e)},V.clean=function(u,A,T,e){m.cleanBasePlot(V.name,u,A,T,e)}},{"../../plots/plots":628}],794:[function(t,N,V){var m=t("../pie/calc");function u(T,e){return m.calc(T,e)}function A(T){m.crossTraceCalc(T,{type:"funnelarea"})}N.exports={calc:u,crossTraceCalc:A}},{"../pie/calc":912}],795:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../bar/defaults").handleText,e=t("../pie/defaults").handleLabelsAndValues;N.exports=function(i,n,r,v){function s(w,p){return m.coerce(i,n,u,w,p)}var o=s("labels"),b=s("values"),g=e(o,b),d=g.len;if(n._hasLabels=g.hasLabels,n._hasValues=g.hasValues,!n._hasLabels&&n._hasValues&&(s("label0"),s("dlabel")),!d){n.visible=!1;return}n._length=d;var f=s("marker.line.width");f&&s("marker.line.color",v.paper_bgcolor),s("marker.colors"),s("scalegroup");var y=s("text"),l=s("texttemplate"),x;if(l||(x=s("textinfo",Array.isArray(y)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),l||x&&x!=="none"){var c=s("textposition");T(i,n,v,s,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}A(n,v,s);var M=s("title.text");M&&(s("title.position"),m.coerceFont(s,"title.font",v.font)),s("aspectratio"),s("baseratio")}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(t,N,V){N.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style"),styleOne:t("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(t,N,V){var m=t("../pie/layout_attributes").hiddenlabels;N.exports={hiddenlabels:m,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return m.coerce(T,e,u,i,n)}a("hiddenlabels"),a("funnelareacolorway",e.colorway),a("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/drawing"),A=t("../../lib"),T=A.strScale,e=A.strTranslate,a=t("../../lib/svg_text_utils"),i=t("../bar/plot"),n=i.toMoveInsideBar,r=t("../bar/uniform_text"),v=r.recordMinTextSize,s=r.clearMinTextSize,o=t("../pie/helpers"),b=t("../pie/plot"),g=b.attachFxHandlers,d=b.determineInsideTextFont,f=b.layoutAreas,y=b.prerenderTitles,l=b.positionTitleOutside,x=b.formatSliceLabel;N.exports=function(_,h){var L=_._context.staticPlot,E=_._fullLayout;s("funnelarea",E),y(h,_),f(h,E._size),A.makeTraceGroups(E._funnelarealayer,h,"trace").each(function(S){var P=m.select(this),F=S[0],I=F.trace;w(S),P.each(function(){var D=m.select(this).selectAll("g.slice").data(S);D.enter().append("g").classed("slice",!0),D.exit().remove(),D.each(function(O,z){if(O.hidden){m.select(this).selectAll("path,g").remove();return}O.pointNumber=O.i,O.curveNumber=I.index;var G=F.cx,Y=F.cy,ee=m.select(this),j=ee.selectAll("path.surface").data([O]);j.enter().append("path").classed("surface",!0).style({"pointer-events":L?"none":"all"}),ee.call(g,_,S);var X="M"+(G+O.TR[0])+","+(Y+O.TR[1])+c(O.TR,O.BR)+c(O.BR,O.BL)+c(O.BL,O.TL)+"Z";j.attr("d",X),x(_,O,F);var ie=o.castOption(I.textposition,O.pts),he=ee.selectAll("g.slicetext").data(O.text&&ie!=="none"?[0]:[]);he.enter().append("g").classed("slicetext",!0),he.exit().remove(),he.each(function(){var K=A.ensureSingle(m.select(this),"text","",function(oe){oe.attr("data-notex",1)}),$=A.ensureUniformFontSize(_,d(I,O,E.font));K.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(u.font,$).call(a.convertToTspans,_);var U=u.bBox(K.node()),H,q,re,Z=Math.min(O.BL[1],O.BR[1])+Y,Q=Math.max(O.TL[1],O.TR[1])+Y;q=Math.max(O.TL[0],O.BL[0])+G,re=Math.min(O.TR[0],O.BR[0])+G,H=n(q,re,Z,Q,U,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),H.fontSize=$.size,v(I.type,H,E),S[z].transform=H,A.setTransormAndDisplay(K,H)})});var R=m.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var O=A.ensureSingle(m.select(this),"text","",function(Y){Y.attr("data-notex",1)}),z=I.title.text;I._meta&&(z=A.templateString(z,I._meta)),O.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(u.font,I.title.font).call(a.convertToTspans,_);var G=l(F,E._size);O.attr("transform",e(G.x,G.y)+T(Math.min(1,G.scale))+e(G.tx,G.ty))})})})};function c(p,_){var h=_[0]-p[0],L=_[1]-p[1];return"l"+h+","+L}function M(p,_){return[.5*(p[0]+_[0]),.5*(p[1]+_[1])]}function w(p){if(!p.length)return;var _=p[0],h=_.trace,L=h.aspectratio,E=h.baseratio;E>.999&&(E=.999);var S=Math.pow(E,2),P=_.vTotal,F=P*S/(1-S),I=P,D=F/P;function R(){var se=Math.sqrt(D);return{x:se,y:-se}}function O(){var se=R();return[se.x,se.y]}var z,G=[];G.push(O());var Y,ee;for(Y=p.length-1;Y>-1;Y--)if(ee=p[Y],!ee.hidden){var j=ee.v/I;D+=j,G.push(O())}var X=1/0,ie=-1/0;for(Y=0;Y<G.length;Y++)z=G[Y],X=Math.min(X,z[1]),ie=Math.max(ie,z[1]);for(Y=0;Y<G.length;Y++)G[Y][1]-=(ie+X)/2;var he=G[G.length-1][0],K=_.r,$=(ie-X)/2,U=K/he,H=K/$*L;for(_.r=H*$,Y=0;Y<G.length;Y++)G[Y][0]*=U,G[Y][1]*=H;z=G[0];var q=[-z[0],z[1]],re=[z[0],z[1]],Z=0;for(Y=p.length-1;Y>-1;Y--)if(ee=p[Y],!ee.hidden){Z+=1;var Q=G[Z][0],oe=G[Z][1];ee.TL=[-Q,oe],ee.TR=[Q,oe],ee.BL=q,ee.BR=re,ee.pxmid=M(ee.TR,ee.BR),q=ee.TL,re=ee.TR}}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(t,N,V){var m=t("@plotly/d3"),u=t("../pie/style_one"),A=t("../bar/uniform_text").resizeText;N.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");A(e,a,"funnelarea"),a.each(function(i){var n=i[0],r=n.trace,v=m.select(this);v.style({opacity:r.opacity}),v.selectAll("path.surface").each(function(s){m.select(this).call(u,s,r)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(t,N,V){var m=t("../scatter/attributes"),u=t("../../plots/attributes"),A=t("../../plots/font_attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat;N.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},m.x,{impliedEdits:{xtype:"array"}}),x0:n({},m.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},m.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},m.y,{impliedEdits:{ytype:"array"}}),y0:n({},m.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},m.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},m.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},m.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},m.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},m.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},m.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},m.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:e(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:A({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:n({},u.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../histogram2d/calc"),a=t("../../components/colorscale/calc"),i=t("./convert_column_xyz"),n=t("./clean_2d_array"),r=t("./interp2d"),v=t("./find_empties"),s=t("./make_bound_array"),o=t("../../constants/numerical").BADNUM;N.exports=function(f,y){var l=A.getFromId(f,y.xaxis||"x"),x=A.getFromId(f,y.yaxis||"y"),c=m.traceIs(y,"contour"),M=m.traceIs(y,"histogram"),w=m.traceIs(y,"gl2d"),p=c?"best":y.zsmooth,_,h,L,E,S,P,F,I,D,R,O;if(l._minDtick=0,x._minDtick=0,M)O=e(f,y),E=O.orig_x,_=O.x,h=O.x0,L=O.dx,I=O.orig_y,S=O.y,P=O.y0,F=O.dy,D=O.z;else{var z=y.z;u.isArray1D(z)?(i(y,l,x,"x","y",["z"]),_=y._x,S=y._y,z=y._z):(E=y.x?l.makeCalcdata(y,"x"):[],I=y.y?x.makeCalcdata(y,"y"):[],_=T(y,l,"x",E).vals,S=T(y,x,"y",I).vals,y._x=_,y._y=S),h=y.x0,L=y.dx,P=y.y0,F=y.dy,D=n(z,y,l,x)}(l.rangebreaks||x.rangebreaks)&&(D=g(_,S,D),M||(_=b(_),S=b(S),y._x=_,y._y=S)),!M&&(c||y.connectgaps)&&(y._emptypoints=v(D),r(D,y._emptypoints));function G(re){p=y._input.zsmooth=y.zsmooth=!1,u.warn('cannot use zsmooth: "fast": '+re)}if(p==="fast"){if(l.type==="log"||x.type==="log")G("log axis found");else if(!M){if(_.length){var Y=(_[_.length-1]-_[0])/(_.length-1),ee=Math.abs(Y/100);for(R=0;R<_.length-1;R++)if(Math.abs(_[R+1]-_[R]-Y)>ee){G("x scale is not linear");break}}if(S.length&&p==="fast"){var j=(S[S.length-1]-S[0])/(S.length-1),X=Math.abs(j/100);for(R=0;R<S.length-1;R++)if(Math.abs(S[R+1]-S[R]-j)>X){G("y scale is not linear");break}}}}var ie=u.maxRowLength(D),he=y.xtype==="scaled"?"":_,K=s(y,he,h,L,ie,l),$=y.ytype==="scaled"?"":S,U=s(y,$,P,F,D.length,x);w||(y._extremes[l._id]=A.findExtremes(l,K),y._extremes[x._id]=A.findExtremes(x,U));var H={x:K,y:U,z:D,text:y._text||y.text,hovertext:y._hovertext||y.hovertext};if(y.xperiodalignment&&E&&(H.orig_x=E),y.yperiodalignment&&I&&(H.orig_y=I),he&&he.length===K.length-1&&(H.xCenter=he),$&&$.length===U.length-1&&(H.yCenter=$),M&&(H.xRanges=O.xRanges,H.yRanges=O.yRanges,H.pts=O.pts),c||a(f,y,{vals:D,cLetter:"z"}),c&&y.contours&&y.contours.coloring==="heatmap"){var q={type:y.type==="contour"?"heatmap":"histogram2d",xcalendar:y.xcalendar,ycalendar:y.ycalendar};H.xfill=s(q,he,h,L,ie,l),H.yfill=s(q,$,P,F,D.length,x)}return[H]};function b(d){for(var f=[],y=d.length,l=0;l<y;l++){var x=d[l];x!==o&&f.push(x)}return f}function g(d,f,y){for(var l=[],x=-1,c=0;c<y.length;c++)if(f[c]!==o){x++,l[x]=[];for(var M=0;M<y[c].length;M++)d[M]!==o&&l[x].push(y[c][M])}return l}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../constants/numerical").BADNUM;N.exports=function(e,a,i,n){var r,v,s,o,b,g;function d(M){if(!!m(M))return+M}if(a&&a.transpose){for(r=0,b=0;b<e.length;b++)r=Math.max(r,e[b].length);if(r===0)return!1;s=function(M){return M.length},o=function(M,w,p){return(M[p]||[])[w]}}else r=e.length,s=function(M,w){return M[w].length},o=function(M,w,p){return(M[w]||[])[p]};var f=function(M,w,p){return w===A||p===A?A:o(M,w,p)};function y(M){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&M&&M.type==="category"&&a["_"+M._id.charAt(0)].length){var w=M._id.charAt(0),p={},_=a["_"+w+"CategoryMap"]||a[w];for(b=0;b<_.length;b++)p[_[b]]=b;return function(h){var L=p[M._categories[h]];return L+1?L:A}}else return u.identity}var l=y(i),x=y(n);n&&n.type==="category"&&(r=n._categories.length);var c=new Array(r);for(b=0;b<r;b++)for(i&&i.type==="category"?v=i._categories.length:v=s(e,b),c[b]=new Array(v),g=0;g<v;g++)c[b][g]=d(f(e,x(b),l(g)));return c}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(t,N,V){N.exports={min:"zmin",max:"zmax"}},{}],805:[function(t,N,V){var m=t("../../lib"),u=t("../../constants/numerical").BADNUM,A=t("../../plots/cartesian/align_period");N.exports=function(e,a,i,n,r,v){var s=e._length,o=a.makeCalcdata(e,n),b=i.makeCalcdata(e,r);o=A(e,a,n,o).vals,b=A(e,i,r,b).vals;var g=e.text,d=g!==void 0&&m.isArray1D(g),f=e.hovertext,y=f!==void 0&&m.isArray1D(f),l,x,c=m.distinctVals(o),M=c.vals,w=m.distinctVals(b),p=w.vals,_=[],h,L,E=p.length,S=M.length;for(l=0;l<v.length;l++)_[l]=m.init2dArray(E,S);d&&(h=m.init2dArray(E,S)),y&&(L=m.init2dArray(E,S));var P=m.init2dArray(E,S);for(l=0;l<s;l++)if(o[l]!==u&&b[l]!==u){var F=m.findBin(o[l]+c.minDiff/2,M),I=m.findBin(b[l]+w.minDiff/2,p);for(x=0;x<v.length;x++){var D=v[x],R=e[D],O=_[x];O[I][F]=R[l],P[I][F]=l}d&&(h[I][F]=g[l]),y&&(L[I][F]=f[l])}for(e["_"+n]=M,e["_"+r]=p,x=0;x<v.length;x++)e["_"+v[x]]=_[x];d&&(e._text=h),y&&(e._hovertext=L),a&&a.type==="category"&&(e["_"+n+"CategoryMap"]=M.map(function(z){return a._categories[z]})),i&&i.type==="category"&&(e["_"+r+"CategoryMap"]=p.map(function(z){return i._categories[z]})),e._after2before=P}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(t,N,V){var m=t("../../lib"),u=t("./xyz_defaults"),A=t("./label_defaults"),T=t("../scatter/period_defaults"),e=t("./style_defaults"),a=t("../../components/colorscale/defaults"),i=t("./attributes");N.exports=function(r,v,s,o){function b(d,f){return m.coerce(r,v,i,d,f)}var g=u(r,v,b,o);if(!g){v.visible=!1;return}T(r,v,o,b),b("xhoverformat"),b("yhoverformat"),b("text"),b("hovertext"),b("hovertemplate"),A(b,o),e(r,v,b,o),b("hoverongaps"),b("connectgaps",m.isArray1D(v.z)&&v.zsmooth!==!1),a(r,v,o,b,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(t,N,V){var m=t("../../lib").maxRowLength;N.exports=function(A){var T=[],e={},a=[],i=A[0],n=[],r=[0,0,0],v=m(A),s,o,b,g,d,f,y,l;for(o=0;o<A.length;o++)for(s=n,n=i,i=A[o+1]||[],b=0;b<v;b++)n[b]===void 0&&(f=(n[b-1]!==void 0?1:0)+(n[b+1]!==void 0?1:0)+(s[b]!==void 0?1:0)+(i[b]!==void 0?1:0),f?(o===0&&f++,b===0&&f++,o===A.length-1&&f++,b===n.length-1&&f++,f<4&&(e[[o,b]]=[o,b,f]),T.push([o,b,f])):a.push([o,b]));for(;a.length;){for(y={},l=!1,d=a.length-1;d>=0;d--)g=a[d],o=g[0],b=g[1],f=((e[[o-1,b]]||r)[2]+(e[[o+1,b]]||r)[2]+(e[[o,b-1]]||r)[2]+(e[[o,b+1]]||r)[2])/20,f&&(y[g]=[o,b,f],a.splice(d,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(g in y)e[g]=y[g],T.push(y[g])}return T.sort(function(x,c){return c[2]-x[2]})}},{"../../lib":515}],808:[function(t,N,V){var m=t("../../components/fx"),u=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../components/colorscale").extractOpts;N.exports=function(a,i,n,r,v){v||(v={});var s=v.isContour,o=a.cd[0],b=o.trace,g=a.xa,d=a.ya,f=o.x,y=o.y,l=o.z,x=o.xCenter,c=o.yCenter,M=o.zmask,w=b.zhoverformat,p=f,_=y,h,L,E,S;if(a.index!==!1){try{E=Math.round(a.index[1]),S=Math.round(a.index[0])}catch{u.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(E<0||E>=l[0].length||S<0||S>l.length)return}else{if(m.inbox(i-f[0],i-f[f.length-1],0)>0||m.inbox(n-y[0],n-y[y.length-1],0)>0)return;if(s){var P;for(p=[2*f[0]-f[1]],P=1;P<f.length;P++)p.push((f[P]+f[P-1])/2);for(p.push([2*f[f.length-1]-f[f.length-2]]),_=[2*y[0]-y[1]],P=1;P<y.length;P++)_.push((y[P]+y[P-1])/2);_.push([2*y[y.length-1]-y[y.length-2]])}E=Math.max(0,Math.min(p.length-2,u.findBin(i,p))),S=Math.max(0,Math.min(_.length-2,u.findBin(n,_)))}var F=g.c2p(f[E]),I=g.c2p(f[E+1]),D=d.c2p(y[S]),R=d.c2p(y[S+1]),O,z;s?(O=o.orig_x||f,z=o.orig_y||y,I=F,h=O[E],R=D,L=z[S]):(O=o.orig_x||x||f,z=o.orig_y||c||y,h=x?O[E]:(O[E]+O[E+1])/2,L=c?z[S]:(z[S]+z[S+1])/2,g&&g.type==="category"&&(h=f[E]),d&&d.type==="category"&&(L=y[S]),b.zsmooth&&(F=I=g.c2p(h),D=R=d.c2p(L)));var G=l[S][E];if(M&&!M[S][E]&&(G=void 0),!(G===void 0&&!b.hoverongaps)){var Y;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[S])?Y=o.hovertext[S][E]:Array.isArray(o.text)&&Array.isArray(o.text[S])&&(Y=o.text[S][E]);var ee=T(b),j={type:"linear",range:[ee.min,ee.max],hoverformat:w,_separators:g._separators,_numFormat:g._numFormat},X=A.tickText(j,G,"hover").text;return[u.extendFlat(a,{index:b._after2before?b._after2before[S][E]:[S,E],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:F,x1:I,y0:D,y1:R,xLabelVal:h,yLabelVal:L,zLabelVal:G,zLabel:X,text:Y})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:t("./colorbar"),style:t("./style"),hoverPoints:t("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(t,N,V){var m=t("../../lib"),u=.01,A=[[-1,0],[1,0],[0,-1],[0,1]];function T(a){return .5-.25*Math.min(1,a*.5)}N.exports=function(i,n){var r=1,v;for(e(i,n),v=0;v<n.length&&!(n[v][2]<4);v++);for(n=n.slice(v),v=0;v<100&&r>u;v++)r=e(i,n,T(r));return r>u&&m.log("interp2d didn't converge quickly",r),i};function e(a,i,n){var r=0,v,s,o,b,g,d,f,y,l,x,c,M,w;for(b=0;b<i.length;b++){for(v=i[b],s=v[0],o=v[1],c=a[s][o],x=0,l=0,g=0;g<4;g++)d=A[g],f=a[s+d[0]],f&&(y=f[o+d[1]],y!==void 0&&(x===0?M=w=y:(M=Math.min(M,y),w=Math.max(w,y)),l++,x+=y));if(l===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[s][o]=x/l,c===void 0?l<4&&(r=1):(a[s][o]=(1+n)*a[s][o]-n*c,w>M&&(r=Math.max(r,Math.abs(a[s][o]-c)/(w-M))))}return r}},{"../../lib":515}],811:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){A("texttemplate");var e=m.extendFlat({},T.font,{color:"auto",size:"auto"});m.coerceFont(A,"textfont",e)}},{"../../lib":515}],812:[function(t,N,V){var m=t("../../registry"),u=t("../../lib").isArrayOrTypedArray;N.exports=function(T,e,a,i,n,r){var v=[],s=m.traceIs(T,"contour"),o=m.traceIs(T,"histogram"),b=m.traceIs(T,"gl2d"),g,d,f,y=u(e)&&e.length>1;if(y&&!o&&r.type!=="category"){var l=e.length;if(l<=n){if(s||b)v=e.slice(0,n);else if(n===1)v=[e[0]-.5,e[0]+.5];else{for(v=[1.5*e[0]-.5*e[1]],f=1;f<l;f++)v.push((e[f-1]+e[f])*.5);v.push(1.5*e[l-1]-.5*e[l-2])}if(l<n){var x=v[v.length-1],c=x-v[v.length-2];for(f=l;f<n;f++)x+=c,v.push(x)}}else return s?e.slice(0,n):e.slice(0,n+1)}else{var M=T[r._id.charAt(0)+"calendar"];if(o)g=r.r2c(a,0,M);else if(u(e)&&e.length===1)g=e[0];else if(a===void 0)g=0;else{var w=r.type==="log"?r.d2c:r.r2c;g=w(a,0,M)}for(d=i||1,f=s||b?0:-.5;f<n;f++)v.push(g+d*f)}return v}},{"../../lib":515,"../../registry":647}],813:[function(t,N,V){var m=t("@plotly/d3"),u=t("tinycolor2"),A=t("../../registry"),T=t("../../components/drawing"),e=t("../../plots/cartesian/axes"),a=t("../../lib"),i=t("../../lib/svg_text_utils"),n=t("../scatter/format_labels"),r=t("../../components/color"),v=t("../../components/colorscale").extractOpts,s=t("../../components/colorscale").makeColorScaleFuncFromTrace,o=t("../../constants/xmlns_namespaces"),b=t("../../constants/alignment"),g=b.LINE_SPACING,d="heatmap-label";function f(M){return M.selectAll("g."+d)}function y(M){f(M).remove()}N.exports=function(M,w,p,_){var h=w.xaxis,L=w.yaxis;a.makeTraceGroups(_,p,"hm").each(function(E){var S=m.select(this),P=E[0],F=P.trace,I=F.xgap||0,D=F.ygap||0,R=P.z,O=P.x,z=P.y,G=P.xCenter,Y=P.yCenter,ee=A.traceIs(F,"contour"),j=ee?"best":F.zsmooth,X=R.length,ie=a.maxRowLength(R),he=!1,K=!1,$,U,H,q,re,Z,Q,oe;for(Z=0;$===void 0&&Z<O.length-1;)$=h.c2p(O[Z]),Z++;for(Z=O.length-1;U===void 0&&Z>0;)U=h.c2p(O[Z]),Z--;for(U<$&&(H=U,U=$,$=H,he=!0),Z=0;q===void 0&&Z<z.length-1;)q=L.c2p(z[Z]),Z++;for(Z=z.length-1;re===void 0&&Z>0;)re=L.c2p(z[Z]),Z--;if(re<q&&(H=q,q=re,re=H,K=!0),ee&&(G=O,Y=z,O=P.xfill,z=P.yfill),j!=="fast"){var se=j==="best"?0:.5;$=Math.max(-se*h._length,$),U=Math.min((1+se)*h._length,U),q=Math.max(-se*L._length,q),re=Math.min((1+se)*L._length,re)}var ae=Math.round(U-$),le=Math.round(re-q),_e=ae<=0||le<=0;if(_e){var fe=S.selectAll("image").data([]);fe.exit().remove(),y(S);return}var me,xe;j==="fast"?(me=ie,xe=X):(me=ae,xe=le);var ye=document.createElement("canvas");ye.width=me,ye.height=xe;var be=ye.getContext("2d"),ke=s(F,{noNumericCheck:!0,returnArray:!0}),De,He;j==="fast"?(De=he?function(Dr){return ie-1-Dr}:a.identity,He=K?function(Dr){return X-1-Dr}:a.identity):(De=function(Dr){return a.constrain(Math.round(h.c2p(O[Dr])-$),0,ae)},He=function(Dr){return a.constrain(Math.round(L.c2p(z[Dr])-q),0,le)});var Ae=He(0),Le=[Ae,Ae],Ze=he?0:1,We=K?0:1,ze=0,Ie=0,Ve=0,dt=0,Ft,Qt,Ot,Ct,jt;function Nt(Dr,Mr){if(Dr!==void 0){var jr=ke(Dr);return jr[0]=Math.round(jr[0]),jr[1]=Math.round(jr[1]),jr[2]=Math.round(jr[2]),ze+=Mr,Ie+=jr[0]*Mr,Ve+=jr[1]*Mr,dt+=jr[2]*Mr,jr}return[0,0,0,0]}function Lt(Dr,Mr,jr,kn){var mn=Dr[jr.bin0];if(mn===void 0)return Nt(void 0,1);var Wn=Dr[jr.bin1],In=Mr[jr.bin0],Jn=Mr[jr.bin1],Kn=Wn-mn||0,ma=In-mn||0,Ra;return Wn===void 0?Jn===void 0?Ra=0:In===void 0?Ra=2*(Jn-mn):Ra=(2*Jn-In-mn)*2/3:Jn===void 0?In===void 0?Ra=0:Ra=(2*mn-Wn-In)*2/3:In===void 0?Ra=(2*Jn-Wn-mn)*2/3:Ra=Jn+mn-Wn-In,Nt(mn+jr.frac*Kn+kn.frac*(ma+jr.frac*Ra))}if(j){var Xe=0,it;try{it=new Uint8Array(ae*le*4)}catch{it=new Array(ae*le*4)}if(j==="best"){var Ye=G||O,Ee=Y||z,Ge=new Array(Ye.length),Ke=new Array(Ee.length),qe=new Array(ae),At=G?x:l,yt=Y?x:l,Mt,Gt,zt;for(Z=0;Z<Ye.length;Z++)Ge[Z]=Math.round(h.c2p(Ye[Z])-$);for(Z=0;Z<Ee.length;Z++)Ke[Z]=Math.round(L.c2p(Ee[Z])-q);for(Z=0;Z<ae;Z++)qe[Z]=At(Z,Ge);for(Q=0;Q<le;Q++)for(Mt=yt(Q,Ke),Gt=R[Mt.bin0],zt=R[Mt.bin1],Z=0;Z<ae;Z++,Xe+=4)jt=Lt(Gt,zt,qe[Z],Mt),c(it,Xe,jt)}else for(Q=0;Q<X;Q++)for(Ct=R[Q],Le=He(Q),Z=0;Z<ae;Z++)jt=Nt(Ct[Z],1),Xe=(Le*ae+De(Z))*4,c(it,Xe,jt);var Ht=be.createImageData(ae,le);try{Ht.data.set(it)}catch{var Zt=Ht.data,Wt=Zt.length;for(Q=0;Q<Wt;Q++)Zt[Q]=it[Q]}be.putImageData(Ht,0,0)}else{var sr=Math.floor(I/2),Gr=Math.floor(D/2);for(Q=0;Q<X;Q++)if(Ct=R[Q],Le.reverse(),Le[We]=He(Q+1),!(Le[0]===Le[1]||Le[0]===void 0||Le[1]===void 0))for(Qt=De(0),Ft=[Qt,Qt],Z=0;Z<ie;Z++)Ft.reverse(),Ft[Ze]=De(Z+1),!(Ft[0]===Ft[1]||Ft[0]===void 0||Ft[1]===void 0)&&(Ot=Ct[Z],jt=Nt(Ot,(Ft[1]-Ft[0])*(Le[1]-Le[0])),be.fillStyle="rgba("+jt.join(",")+")",be.fillRect(Ft[0]+sr,Le[0]+Gr,Ft[1]-Ft[0]-I,Le[1]-Le[0]-D))}Ie=Math.round(Ie/ze),Ve=Math.round(Ve/ze),dt=Math.round(dt/ze);var cn=u("rgb("+Ie+","+Ve+","+dt+")");M._hmpixcount=(M._hmpixcount||0)+ze,M._hmlumcount=(M._hmlumcount||0)+ze*cn.getLuminance();var qr=S.selectAll("image").data(E);qr.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),qr.attr({height:le,width:ae,x:$,y:q,"xlink:href":ye.toDataURL("image/png")}),y(S);var st=F.texttemplate;if(st){var rr=v(F),Jt={type:"linear",range:[rr.min,rr.max],_separators:h._separators,_numFormat:h._numFormat},hr=F.type==="histogram2dcontour",Sr=F.type==="contour",tt=Sr?1:0,Qe=Sr?X-1:X,lt=Sr?1:0,ft=Sr?ie-1:ie,Et=[];for(Z=tt;Z<Qe;Z++){var Vt;if(Sr)Vt=P.y[Z];else if(hr){if(Z===0||Z===X-1)continue;Vt=P.y[Z]}else if(P.yCenter)Vt=P.yCenter[Z];else{if(Z+1===X&&P.y[Z+1]===void 0)continue;Vt=(P.y[Z]+P.y[Z+1])/2}var Pe=Math.round(L.c2p(Vt));if(!(0>Pe||Pe>L._length))for(Q=lt;Q<ft;Q++){var Se;if(Sr)Se=P.x[Q];else if(hr){if(Q===0||Q===ie-1)continue;Se=P.x[Q]}else if(P.xCenter)Se=P.xCenter[Q];else{if(Q+1===ie&&P.x[Q+1]===void 0)continue;Se=(P.x[Q]+P.x[Q+1])/2}var ot=Math.round(h.c2p(Se));if(!(0>ot||ot>h._length)){var ct=n({x:Se,y:Vt},F,M._fullLayout);ct.x=Se,ct.y=Vt;var pt=P.z[Z][Q];pt===void 0?(ct.z="",ct.zLabel=""):(ct.z=pt,ct.zLabel=e.tickText(Jt,pt,"hover").text);var St=P.text&&P.text[Z]&&P.text[Z][Q];(St===void 0||St===!1)&&(St=""),ct.text=St;var xt=a.texttemplateString(st,ct,M._fullLayout._d3locale,ct,F._meta||{});if(!!xt){var Pt=xt.split("<br>"),Xt=Pt.length,or=0;for(oe=0;oe<Xt;oe++)or=Math.max(or,Pt[oe].length);Et.push({l:Xt,c:or,t:xt,x:ot,y:Pe,z:pt})}}}}var Pr=F.textfont,Ar=Pr.family,Er=Pr.size,$r=M._fullLayout.font.size;if(!Er||Er==="auto"){var lr=1/0,br=1/0,Fr=0,Hr=0;for(oe=0;oe<Et.length;oe++){var Lr=Et[oe];if(Fr=Math.max(Fr,Lr.l),Hr=Math.max(Hr,Lr.c),oe<Et.length-1){var at=Et[oe+1],Rt=Math.abs(at.x-Lr.x),Kt=Math.abs(at.y-Lr.y);Rt&&(lr=Math.min(lr,Rt)),Kt&&(br=Math.min(br,Kt))}}!isFinite(lr)||!isFinite(br)?Er=$r:(lr-=I,br-=D,lr/=Hr,br/=Fr,lr/=g/2,br/=g,Er=Math.min(Math.floor(lr),Math.floor(br),$r))}if(Er<=0||!isFinite(Er))return;var ur=function(Dr){return Dr.x},Nr=function(Dr){return Dr.y-Er*(Dr.l*g/2-1)},Vr=f(S).data(Et);Vr.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(Dr){var Mr=m.select(this),jr=Pr.color;(!jr||jr==="auto")&&(jr=r.contrast("rgba("+ke(Dr.z).join()+")")),Mr.attr("data-notex",1).call(i.positionText,ur(Dr),Nr(Dr)).call(T.font,Ar,Er,jr).text(Dr.t).call(i.convertToTspans,M)})}})};function l(M,w){var p=w.length-2,_=a.constrain(a.findBin(M,w),0,p),h=w[_],L=w[_+1],E=a.constrain(_+(M-h)/(L-h)-.5,0,p),S=Math.round(E),P=Math.abs(E-S);return!E||E===p||!P?{bin0:S,bin1:S,frac:0}:{bin0:S,frac:P,bin1:Math.round(S+P/(E-S))}}function x(M,w){var p=w.length-1,_=a.constrain(a.findBin(M,w),0,p),h=w[_],L=w[_+1],E=(M-h)/(L-h)||0;return E<=0?{bin0:_,bin1:_,frac:0}:E<.5?{bin0:_,bin1:_+1,frac:E}:{bin0:_+1,bin1:_,frac:1-E}}function c(M,w,p){M[w]=p[0],M[w+1]=p[1],M[w+2]=p[2],M[w+3]=Math.round(p[3]*255)}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(t,N,V){var m=t("@plotly/d3");N.exports=function(A){m.select(A).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],815:[function(t,N,V){N.exports=function(u,A,T){var e=T("zsmooth");e===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],816:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../registry");N.exports=function(i,n,r,v,s,o){var b=r("z");s=s||"x",o=o||"y";var g,d;if(b===void 0||!b.length)return 0;if(u.isArray1D(i.z)){g=r(s),d=r(o);var f=u.minRowLength(g),y=u.minRowLength(d);if(f===0||y===0)return 0;n._length=Math.min(f,y,b.length)}else{if(g=T(s,r),d=T(o,r),!e(b))return 0;r("transpose"),n._length=null}if(i.type==="heatmapgl")return!0;var l=A.getComponentMethod("calendars","handleTraceDefaults");return l(i,n,[s,o],v),!0};function T(a,i){var n=i(a),r=n?i(a+"type","array"):"scaled";return r==="scaled"&&(i(a+"0"),i("d"+a)),n}function e(a){for(var i=!0,n=!1,r=!1,v,s=0;s<a.length;s++){if(v=a[s],!u.isArrayOrTypedArray(v)){i=!1;break}v.length>0&&(n=!0);for(var o=0;o<v.length;o++)if(m(v[o])){r=!0;break}}return i&&n&&r}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(t,N,V){for(var m=t("../heatmap/attributes"),u=t("../../components/colorscale/attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},i=0;i<e.length;i++){var n=e[i];a[n]=m[n]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},A(a,u("",{cLetter:"z",autoColorDflt:!1})),N.exports=T(a,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(t,N,V){var m=t("../../../stackgl_modules").gl_heatmap2d,u=t("../../plots/cartesian/axes"),A=t("../../lib/str2rgbarray");function T(n,r){this.scene=n,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=m(n.glplot,this.options),this.heatmap._trace=this}var e=T.prototype;e.handlePick=function(n){var r=this.options,v=r.shape,s=n.pointId,o=s%v[0],b=Math.floor(s/v[0]),g=s;return{trace:this,dataCoord:n.dataCoord,traceCoord:[r.x[o],r.y[b],r.z[g]],textLabel:this.textLabels[s],name:this.name,pointIndex:[b,o],hoverinfo:this.hoverinfo}},e.update=function(n,r){var v=r[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var s=v.z;this.options.z=[].concat.apply([],s);var o=s[0].length,b=s.length;this.options.shape=[o,b],this.options.x=v.x,this.options.y=v.y,this.options.zsmooth=n.zsmooth;var g=a(n);this.options.colorLevels=g.colorLevels,this.options.colorValues=g.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var d=this.scene.xaxis,f=this.scene.yaxis,y,l;n.zsmooth===!1&&(y={ppad:v.x[1]-v.x[0]},l={ppad:v.y[1]-v.y[0]}),n._extremes[d._id]=u.findExtremes(d,v.x,y),n._extremes[f._id]=u.findExtremes(f,v.y,l)},e.dispose=function(){this.heatmap.dispose()};function a(n){for(var r=n.colorscale,v=n.zmin,s=n.zmax,o=r.length,b=new Array(o),g=new Array(4*o),d=0;d<o;d++){var f=r[d],y=A(f[1]);b[d]=v+f[0]*(s-v);for(var l=0;l<4;l++)g[4*d+l]=y[l]}return{colorLevels:b,colorValues:g}}function i(n,r,v){var s=new T(n,r.uid);return s.update(r,v),s}N.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(t,N,V){var m=t("../../lib"),u=t("../heatmap/xyz_defaults"),A=t("../../components/colorscale/defaults"),T=t("./attributes");N.exports=function(a,i,n,r){function v(o,b){return m.coerce(a,i,T,o,b)}var s=u(a,i,v,r);if(!s){i.visible=!1;return}v("text"),v("zsmooth"),A(a,i,r,v,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../heatmap/calc"),plot:t("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(t,N,V){var m=t("../bar/attributes"),u=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../plots/font_attributes"),a=t("./bin_attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:u("x"),yhoverformat:u("y"),text:n({},m.text,{}),hovertext:n({},m.hovertext,{}),orientation:m.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:A({},{keys:i.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:n({},m.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:m.insidetextanchor,textangle:m.textangle,cliponaxis:m.cliponaxis,constraintext:m.constraintext,marker:m.marker,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,_deprecated:{bardir:m._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(t,N,V){N.exports=function(u,A){for(var T=u.length,e=0,a=0;a<T;a++)A[a]?(u[a]/=A[a],e+=u[a]):u[a]=null;return e}},{}],823:[function(t,N,V){N.exports=function(u,A){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(t,N,V){var m=t("fast-isnumeric");N.exports={count:function(u,A,T){return T[u]++,1},sum:function(u,A,T,e){var a=e[A];return m(a)?(a=Number(a),T[u]+=a,a):0},avg:function(u,A,T,e,a){var i=e[A];return m(i)&&(i=Number(i),T[u]+=i,a[u]++),0},min:function(u,A,T,e){var a=e[A];if(m(a))if(a=Number(a),m(T[u])){if(T[u]>a){var i=a-T[u];return T[u]=a,i}}else return T[u]=a,a;return 0},max:function(u,A,T,e){var a=e[A];if(m(a))if(a=Number(a),m(T[u])){if(T[u]<a){var i=a-T[u];return T[u]=a,i}}else return T[u]=a,a;return 0}}},{"fast-isnumeric":190}],825:[function(t,N,V){var m=t("../../constants/numerical"),u=m.ONEAVGYEAR,A=m.ONEAVGMONTH,T=m.ONEDAY,e=m.ONEHOUR,a=m.ONEMIN,i=m.ONESEC,n=t("../../plots/cartesian/axes").tickIncrement;N.exports=function(g,d,f,y,l){var x=-1.1*d,c=-.1*d,M=g-c,w=f[0],p=f[1],_=Math.min(r(w+c,w+M,y,l),r(p+c,p+M,y,l)),h=Math.min(r(w+x,w+c,y,l),r(p+x,p+c,y,l)),L,E;if(_>h&&h<Math.abs(p-w)/4e3?(L=_,E=!1):(L=Math.min(_,h),E=!0),y.type==="date"&&L>T){var S=L===u?1:6,P=L===u?"M12":"M1";return function(F,I){var D=y.c2d(F,u,l),R=D.indexOf("-",S);R>0&&(D=D.substr(0,R));var O=y.d2c(D,0,l);if(O<F){var z=n(O,P,!1,l);(O+z)/2<F+g&&(O=z)}return I&&E?n(O,P,!0,l):O}}return function(F,I){var D=L*Math.round(F/L);return D+L/10<F&&D+L*.9<F+g&&(D+=L),I&&E&&(D-=L),D}};function r(b,g,d,f){if(b*g<=0)return 1/0;for(var y=Math.abs(g-b),l=d.type==="date",x=v(y,l),c=0;c<10;c++){var M=v(x*80,l);if(x===M)break;if(s(M,b,g,l,d,f))x=M;else break}return x}function v(b,g){return g&&b>i?b>T?b>u*1.1?u:b>A*1.1?A:T:b>e?e:b>a?a:i:Math.pow(10,Math.floor(Math.log(b)/Math.LN10))}function s(b,g,d,f,y,l){if(f&&b>T){var x=o(g,y,l),c=o(d,y,l),M=b===u?0:1;return x[M]!==c[M]}return Math.floor(d/b)-Math.floor(g/b)>.1}function o(b,g,d){var f=g.c2d(b,u,d).split("-");return f[0]===""&&(f.unshift(),f[0]="-"+f[0]),f}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../registry"),T=t("../../plots/cartesian/axes"),e=t("../bar/arrays_to_calcdata"),a=t("./bin_functions"),i=t("./norm_functions"),n=t("./average"),r=t("./bin_label_vals");function v(d,f){var y=[],l=[],x=f.orientation==="h",c=T.getFromId(d,x?f.yaxis:f.xaxis),M=x?"y":"x",w={x:"y",y:"x"}[M],p=f[M+"calendar"],_=f.cumulative,h,L=s(d,f,c,M),E=L[0],S=L[1],P=typeof E.size=="string",F=[],I=P?F:E,D=[],R=[],O=[],z=0,G=f.histnorm,Y=f.histfunc,ee=G.indexOf("density")!==-1,j,X,ie;_.enabled&&ee&&(G=G.replace(/ ?density$/,""),ee=!1);var he=Y==="max"||Y==="min",K=he?null:0,$=a.count,U=i[G],H=!1,q=function(He){return c.r2c(He,0,p)},re;for(u.isArrayOrTypedArray(f[w])&&Y!=="count"&&(re=f[w],H=Y==="avg",$=a[Y]),h=q(E.start),X=q(E.end)+(h-T.tickIncrement(h,E.size,!1,p))/1e6;h<X&&y.length<1e6&&(j=T.tickIncrement(h,E.size,!1,p),y.push((h+j)/2),l.push(K),O.push([]),F.push(h),ee&&D.push(1/(j-h)),H&&R.push(0),!(j<=h));)h=j;F.push(h),!P&&c.type==="date"&&(I={start:q(I.start),end:q(I.end),size:I.size}),d._fullLayout._roundFnOpts||(d._fullLayout._roundFnOpts={});var Z=f["_"+M+"bingroup"],Q={leftGap:1/0,rightGap:1/0};Z&&(d._fullLayout._roundFnOpts[Z]||(d._fullLayout._roundFnOpts[Z]=Q),Q=d._fullLayout._roundFnOpts[Z]);var oe=l.length,se=!0,ae=Q.leftGap,le=Q.rightGap,_e={};for(h=0;h<S.length;h++){var fe=S[h];ie=u.findBin(fe,I),ie>=0&&ie<oe&&(z+=$(ie,h,l,re,R),se&&O[ie].length&&fe!==S[O[ie][0]]&&(se=!1),O[ie].push(h),_e[h]=ie,ae=Math.min(ae,fe-F[ie]),le=Math.min(le,F[ie+1]-fe))}Q.leftGap=ae,Q.rightGap=le;var me;se||(me=function(He,Ae){return function(){var Le=d._fullLayout._roundFnOpts[Z];return r(Le.leftGap,Le.rightGap,F,c,p)(He,Ae)}}),H&&(z=n(l,R)),U&&U(l,z,D),_.enabled&&g(l,_.direction,_.currentbin);var xe=Math.min(y.length,l.length),ye=[],be=0,ke=xe-1;for(h=0;h<xe;h++)if(l[h]){be=h;break}for(h=xe-1;h>=be;h--)if(l[h]){ke=h;break}for(h=be;h<=ke;h++)if(m(y[h])&&m(l[h])){var De={p:y[h],s:l[h],b:0};_.enabled||(De.pts=O[h],se?De.ph0=De.ph1=O[h].length?S[O[h][0]]:y[h]:(f._computePh=!0,De.ph0=me(F[h]),De.ph1=me(F[h+1],!0))),ye.push(De)}return ye.length===1&&(ye[0].width1=T.tickIncrement(ye[0].p,E.size,!1,p)-ye[0].p),e(ye,f),u.isArrayOrTypedArray(f.selectedpoints)&&u.tagSelected(ye,f,_e),ye}function s(d,f,y,l,x){var c=l+"bins",M=d._fullLayout,w=f["_"+l+"bingroup"],p=M._histogramBinOpts[w],_=M.barmode==="overlay",h,L,E,S,P,F,I,D=function(fe){return y.r2c(fe,0,S)},R=function(fe){return y.c2r(fe,0,S)},O=y.type==="date"?function(fe){return fe||fe===0?u.cleanDate(fe,null,S):null}:function(fe){return m(fe)?Number(fe):null};function z(fe,me,xe){me[fe+"Found"]?(me[fe]=O(me[fe]),me[fe]===null&&(me[fe]=xe[fe])):(F[fe]=me[fe]=xe[fe],u.nestedProperty(L[0],c+"."+fe).set(xe[fe]))}if(f["_"+l+"autoBinFinished"])delete f["_"+l+"autoBinFinished"];else{L=p.traces;var G=[],Y=!0,ee=!1,j=!1;for(h=0;h<L.length;h++)if(E=L[h],E.visible){var X=p.dirs[h];P=E["_"+X+"pos0"]=y.makeCalcdata(E,X),G=u.concat(G,P),delete E["_"+l+"autoBinFinished"],f.visible===!0&&(Y?Y=!1:(delete E._autoBin,E["_"+l+"autoBinFinished"]=1),A.traceIs(E,"2dMap")&&(ee=!0),E.type==="histogram2dcontour"&&(j=!0))}S=L[0][l+"calendar"];var ie=T.autoBin(G,y,p.nbins,ee,S,p.sizeFound&&p.size),he=L[0]._autoBin={};if(F=he[p.dirs[0]]={},j&&(p.size||(ie.start=R(T.tickIncrement(D(ie.start),ie.size,!0,S))),p.end===void 0&&(ie.end=R(T.tickIncrement(D(ie.end),ie.size,!1,S)))),_&&!A.traceIs(f,"2dMap")&&ie._dataSpan===0&&y.type!=="category"&&y.type!=="multicategory"){if(x)return[ie,P,!0];ie=o(d,f,y,l,c)}I=E.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?ie.start=R(T.tickIncrement(D(ie.start),ie.size,!0,S)):ie.end=R(T.tickIncrement(D(ie.end),ie.size,!1,S))),p.size=ie.size,p.sizeFound||(F.size=ie.size,u.nestedProperty(L[0],c+".size").set(ie.size)),z("start",p,ie),z("end",p,ie)}P=f["_"+l+"pos0"],delete f["_"+l+"pos0"];var K=f._input[c]||{},$=u.extendFlat({},p),U=p.start,H=y.r2l(K.start),q=H!==void 0;if((p.startFound||q)&&H!==y.r2l(U)){var re=q?H:u.aggNums(Math.min,null,P),Z={type:y.type==="category"||y.type==="multicategory"?"linear":y.type,r2l:y.r2l,dtick:p.size,tick0:U,calendar:S,range:[re,T.tickIncrement(re,p.size,!1,S)].map(y.l2r)},Q=T.tickFirst(Z);Q>y.r2l(re)&&(Q=T.tickIncrement(Q,p.size,!0,S)),$.start=y.l2r(Q),q||u.nestedProperty(f,c+".start").set($.start)}var oe=p.end,se=y.r2l(K.end),ae=se!==void 0;if((p.endFound||ae)&&se!==y.r2l(oe)){var le=ae?se:u.aggNums(Math.max,null,P);$.end=y.l2r(le),ae||u.nestedProperty(f,c+".start").set($.end)}var _e="autobin"+l;return f._input[_e]===!1&&(f._input[c]=u.extendFlat({},f[c]||{}),delete f._input[_e],delete f[_e]),[$,P]}function o(d,f,y,l,x){var c=d._fullLayout,M=b(d,f),w=!1,p=1/0,_=[f],h,L,E;for(h=0;h<M.length;h++)if(L=M[h],L===f)w=!0;else if(!w)E=c._histogramBinOpts[L["_"+l+"bingroup"]],p=Math.min(p,E.size||L[x].size);else{var S=s(d,L,y,l,!0),P=S[0],F=S[2];L["_"+l+"autoBinFinished"]=1,L["_"+l+"pos0"]=S[1],F?_.push(L):p=Math.min(p,P.size)}var I=new Array(_.length);for(h=0;h<_.length;h++)for(var D=_[h]["_"+l+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){I[h]=D[R];break}for(isFinite(p)||(p=u.distinctVals(I).minDiff),h=0;h<_.length;h++){L=_[h];var O=L[l+"calendar"],z={start:y.c2r(I[h]-p/2,0,O),end:y.c2r(I[h]+p/2,0,O),size:p};L._input[x]=L[x]=z,E=c._histogramBinOpts[L["_"+l+"bingroup"]],E&&u.extendFlat(E,z)}return f[x]}function b(d,f){for(var y=f.xaxis,l=f.yaxis,x=f.orientation,c=[],M=d._fullData,w=0;w<M.length;w++){var p=M[w];p.type==="histogram"&&p.visible===!0&&p.orientation===x&&p.xaxis===y&&p.yaxis===l&&c.push(p)}return c}function g(d,f,y){var l,x,c;function M(p){c=d[p],d[p]/=2}function w(p){x=d[p],d[p]=c+x/2,c+=x}if(y==="half")if(f==="increasing")for(M(0),l=1;l<d.length;l++)w(l);else for(M(d.length-1),l=d.length-2;l>=0;l--)w(l);else if(f==="increasing"){for(l=1;l<d.length;l++)d[l]+=d[l-1];y==="exclude"&&(d.unshift(0),d.pop())}else{for(l=d.length-2;l>=0;l--)d[l]+=d[l+1];y==="exclude"&&(d.push(0),d.shift())}}N.exports={calc:v,calcAllAutoBins:s}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(t,N,V){N.exports={eventDataKeys:["binNumber"]}},{}],828:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axis_ids"),A=t("../../registry").traceIs,T=t("../bar/defaults").handleGroupingDefaults,e=m.nestedProperty,a=t("../../plots/cartesian/constraints").getAxisGroup,i=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];N.exports=function(v,s){var o=s._histogramBinOpts={},b=[],g={},d=[],f,y,l,x,c,M,w;function p(j,X){return m.coerce(f._input,f,f._module.attributes,j,X)}function _(j){return j.orientation==="v"?"x":"y"}function h(j,X){var ie=u.getFromTrace({_fullLayout:s},j,X);return ie.type}function L(j,X,ie){var he=j.uid+"__"+ie;X||(X=he);var K=h(j,ie),$=j[ie+"calendar"]||"",U=o[X],H=!0;U&&(K===U.axType&&$===U.calendar?(H=!1,U.traces.push(j),U.dirs.push(ie)):(X=he,K!==U.axType&&m.warn(["Attempted to group the bins of trace",j.index,"set on a","type:"+K,"axis","with bins on","type:"+U.axType,"axis."].join(" ")),$!==U.calendar&&m.warn(["Attempted to group the bins of trace",j.index,"set with a",$,"calendar","with bins",U.calendar?"on a "+U.calendar+" calendar":"w/o a set calendar"].join(" ")))),H&&(o[X]={traces:[j],dirs:[ie],axType:K,calendar:j[ie+"calendar"]||""}),j["_"+ie+"bingroup"]=X}for(c=0;c<v.length;c++)f=v[c],A(f,"histogram")&&(b.push(f),delete f._xautoBinFinished,delete f._yautoBinFinished,A(f,"2dMap")||T(f._input,f,s,p));var E=s._alignmentOpts||{};for(c=0;c<b.length;c++){if(f=b[c],l="",!A(f,"2dMap")){if(x=_(f),s.barmode==="group"&&f.alignmentgroup){var S=f[x+"axis"],P=a(s,S)+f.orientation;(E[P]||{})[f.alignmentgroup]&&(l=P)}!l&&s.barmode!=="overlay"&&(l=a(s,f.xaxis)+a(s,f.yaxis)+_(f))}l?(g[l]||(g[l]=[]),g[l].push(f)):d.push(f)}for(l in g){if(y=g[l],y.length===1){d.push(y[0]);continue}var F=!1;for(y.length&&(f=y[0],F=p("bingroup")),l=F||l,c=0;c<y.length;c++){f=y[c];var I=f._input.bingroup;I&&I!==l&&m.warn(["Trace",f.index,"must match","within bingroup",l+".","Ignoring its bingroup:",I,"setting."].join(" ")),f.bingroup=l,L(f,l,_(f))}}for(c=0;c<d.length;c++){f=d[c];var D=p("bingroup");if(A(f,"2dMap"))for(w=0;w<2;w++){x=n[w];var R=p(x+"bingroup",D?D+"__"+x:null);L(f,R,x)}else L(f,D,_(f))}for(l in o){var O=o[l];for(y=O.traces,M=0;M<i.length;M++){var z=i[M],G=z.name,Y,ee;if(!(G==="nbins"&&O.sizeFound)){for(c=0;c<y.length;c++){if(f=y[c],x=O.dirs[c],Y=z.aStr[x],e(f._input,Y).get()!==void 0){O[G]=p(Y),O[G+"Found"]=!0;break}ee=(f._autoBin||{})[x]||{},ee[G]&&e(f,Y).set(ee[G])}if(G==="start"||G==="end")for(;c<y.length;c++)f=y[c],f["_"+x+"bingroup"]&&(ee=(f._autoBin||{})[x]||{},p(Y,ee[G]));G==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(f=y[0],O[G]=p(Y))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("../../components/color"),T=t("../bar/defaults").handleText,e=t("../bar/style_defaults"),a=t("./attributes");N.exports=function(n,r,v,s){function o(h,L){return u.coerce(n,r,a,h,L)}var b=o("x"),g=o("y"),d=o("cumulative.enabled");d&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var f=o("textposition");T(n,r,s,o,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var y=o("orientation",g&&!b?"h":"v"),l=y==="v"?"x":"y",x=y==="v"?"y":"x",c=b&&g?Math.min(u.minRowLength(b)&&u.minRowLength(g)):u.minRowLength(r[l]||[]);if(!c){r.visible=!1;return}r._length=c;var M=m.getComponentMethod("calendars","handleTraceDefaults");M(n,r,["x","y"],s);var w=r[x];w&&o("histfunc"),o("histnorm"),o("autobin"+l),e(n,r,o,v,s),u.coerceSelectionMarkerOpacity(r,o);var p=(r.marker.line||{}).color,_=m.getComponentMethod("errorbars","supplyDefaults");_(n,r,p||A.defaultLine,{axis:"y"}),_(n,r,p||A.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(t,N,V){N.exports=function(u,A,T,e,a){if(u.x="xVal"in A?A.xVal:A.x,u.y="yVal"in A?A.yVal:A.y,"zLabelVal"in A&&(u.z=A.zLabelVal),A.xa&&(u.xaxis=A.xa),A.ya&&(u.yaxis=A.ya),!(T.cumulative||{}).enabled){var i=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;u.pointNumbers=i,u.binNumber=u.pointNumber,delete u.pointNumber,delete u.pointIndex;var n;if(T._indexToPoints){n=[];for(var r=0;r<i.length;r++)n=n.concat(T._indexToPoints[i[r]])}else n=i;u.pointIndices=n}return u}},{}],831:[function(t,N,V){var m=t("../bar/hover").hoverPoints,u=t("../../plots/cartesian/axes").hoverLabelText;N.exports=function(T,e,a,i,n){var r=m(T,e,a,i,n);if(!!r){T=r[0];var v=T.cd[T.index],s=T.cd[0].trace;if(!s.cumulative.enabled){var o=s.orientation==="h"?"y":"x";T[o+"Label"]=u(T[o+"a"],[v.ph0,v.ph1],s[o+"hoverformat"])}return r}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("../bar/layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),supplyLayoutDefaults:t("../bar/layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("../bar/cross_trace_calc").crossTraceCalc,plot:t("../bar/plot").plot,layerName:"barlayer",style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,colorbar:t("../scatter/marker_colorbar"),hoverPoints:t("./hover"),selectPoints:t("../bar/select"),eventData:t("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(t,N,V){N.exports={percent:function(m,u){for(var A=m.length,T=100/u,e=0;e<A;e++)m[e]*=T},probability:function(m,u){for(var A=m.length,T=0;T<A;T++)m[T]/=u},density:function(m,u,A,T){var e=m.length;T=T||1;for(var a=0;a<e;a++)m[a]*=A[a]*T},"probability density":function(m,u,A,T){var e=m.length;T&&(u/=T);for(var a=0;a<e;a++)m[a]*=A[a]/u}}},{}],834:[function(t,N,V){var m=t("../histogram/attributes"),u=t("../histogram/bin_attributes"),A=t("../heatmap/attributes"),T=t("../../plots/attributes"),e=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=t("../../plots/template_attributes").hovertemplateAttrs,i=t("../../plots/template_attributes").texttemplateAttrs,n=t("../../components/colorscale/attributes"),r=t("../../lib/extend").extendFlat;N.exports=r({x:m.x,y:m.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:u("x"),nbinsy:m.nbinsy,ybins:u("y"),autobinx:m.autobinx,autobiny:m.autobiny,bingroup:r({},m.bingroup,{}),xbingroup:r({},m.bingroup,{}),ybingroup:r({},m.bingroup,{}),xgap:A.xgap,ygap:A.ygap,zsmooth:A.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:A.textfont,showlegend:r({},T.showlegend,{dflt:!1})},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("../histogram/bin_functions"),T=t("../histogram/norm_functions"),e=t("../histogram/average"),a=t("../histogram/bin_label_vals"),i=t("../histogram/calc").calcAllAutoBins;N.exports=function(o,b){var g=u.getFromId(o,b.xaxis),d=u.getFromId(o,b.yaxis),f=b.xcalendar,y=b.ycalendar,l=function(Xe){return g.r2c(Xe,0,f)},x=function(Xe){return d.r2c(Xe,0,y)},c=function(Xe){return g.c2r(Xe,0,f)},M=function(Xe){return d.c2r(Xe,0,y)},w,p,_,h,L=i(o,b,g,"x"),E=L[0],S=L[1],P=i(o,b,d,"y"),F=P[0],I=P[1],D=b._length;S.length>D&&S.splice(D,S.length-D),I.length>D&&I.splice(D,I.length-D);var R=[],O=[],z=[],G=typeof E.size=="string",Y=typeof F.size=="string",ee=[],j=[],X=G?ee:E,ie=Y?j:F,he=0,K=[],$=[],U=b.histnorm,H=b.histfunc,q=U.indexOf("density")!==-1,re=H==="max"||H==="min",Z=re?null:0,Q=A.count,oe=T[U],se=!1,ae=[],le=[],_e="z"in b?b.z:"marker"in b&&Array.isArray(b.marker.color)?b.marker.color:"";_e&&H!=="count"&&(se=H==="avg",Q=A[H]);var fe=E.size,me=l(E.start),xe=l(E.end)+(me-u.tickIncrement(me,fe,!1,f))/1e6;for(w=me;w<xe;w=u.tickIncrement(w,fe,!1,f))O.push(Z),ee.push(w),se&&z.push(0);ee.push(w);var ye=O.length,be=(w-me)/ye,ke=c(me+be/2),De=F.size,He=x(F.start),Ae=x(F.end)+(He-u.tickIncrement(He,De,!1,y))/1e6;for(w=He;w<Ae;w=u.tickIncrement(w,De,!1,y)){R.push(O.slice()),j.push(w);var Le=new Array(ye);for(p=0;p<ye;p++)Le[p]=[];$.push(Le),se&&K.push(z.slice())}j.push(w);var Ze=R.length,We=(w-He)/Ze,ze=M(He+We/2);q&&(ae=n(O.length,X,be,G),le=n(R.length,ie,We,Y)),!G&&g.type==="date"&&(X=r(l,X)),!Y&&d.type==="date"&&(ie=r(x,ie));var Ie=!0,Ve=!0,dt=new Array(ye),Ft=new Array(Ze),Qt=1/0,Ot=1/0,Ct=1/0,jt=1/0;for(w=0;w<D;w++){var Nt=S[w],Lt=I[w];_=m.findBin(Nt,X),h=m.findBin(Lt,ie),_>=0&&_<ye&&h>=0&&h<Ze&&(he+=Q(_,w,R[h],_e,K[h]),$[h][_].push(w),Ie&&(dt[_]===void 0?dt[_]=Nt:dt[_]!==Nt&&(Ie=!1)),Ve&&(Ft[h]===void 0?Ft[h]=Lt:Ft[h]!==Lt&&(Ve=!1)),Qt=Math.min(Qt,Nt-ee[_]),Ot=Math.min(Ot,ee[_+1]-Nt),Ct=Math.min(Ct,Lt-j[h]),jt=Math.min(jt,j[h+1]-Lt))}if(se)for(h=0;h<Ze;h++)he+=e(R[h],K[h]);if(oe)for(h=0;h<Ze;h++)oe(R[h],he,ae,le[h]);return{x:S,xRanges:v(ee,Ie&&dt,Qt,Ot,g,f),x0:ke,dx:be,y:I,yRanges:v(j,Ve&&Ft,Ct,jt,d,y),y0:ze,dy:We,z:R,pts:$}};function n(s,o,b,g){var d=new Array(s),f;if(g)for(f=0;f<s;f++)d[f]=1/(o[f+1]-o[f]);else{var y=1/b;for(f=0;f<s;f++)d[f]=y}return d}function r(s,o){return{start:s(o.start),end:s(o.end),size:o.size}}function v(s,o,b,g,d,f){var y,l=s.length-1,x=new Array(l),c=a(b,g,s,d,f);for(y=0;y<l;y++){var M=(o||[])[y];x[y]=M===void 0?[c(s[y]),c(s[y+1],!0)]:[M,M]}return x}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(t,N,V){var m=t("../../lib"),u=t("./sample_defaults"),A=t("../heatmap/style_defaults"),T=t("../../components/colorscale/defaults"),e=t("../heatmap/label_defaults"),a=t("./attributes");N.exports=function(n,r,v,s){function o(b,g){return m.coerce(n,r,a,b,g)}u(n,r,o,s),r.visible!==!1&&(A(n,r,o,s),T(n,r,s,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),e(o,s),o("xhoverformat"),o("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(t,N,V){var m=t("../heatmap/hover"),u=t("../../plots/cartesian/axes").hoverLabelText;N.exports=function(T,e,a,i,n){var r=m(T,e,a,i,n);if(!!r){T=r[0];var v=T.index,s=v[0],o=v[1],b=T.cd[0],g=b.trace,d=b.xRanges[o],f=b.yRanges[s];return T.xLabel=u(T.xa,[d[0],d[1]],g.xhoverformat),T.yLabel=u(T.ya,[f[0],f[1]],g.yhoverformat),r}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../heatmap/calc"),plot:t("../heatmap/plot"),layerName:"heatmaplayer",colorbar:t("../heatmap/colorbar"),style:t("../heatmap/style"),hoverPoints:t("./hover"),eventData:t("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(t,N,V){var m=t("../../registry"),u=t("../../lib");N.exports=function(T,e,a,i){var n=a("x"),r=a("y"),v=u.minRowLength(n),s=u.minRowLength(r);if(!v||!s){e.visible=!1;return}e._length=Math.min(v,s);var o=m.getComponentMethod("calendars","handleTraceDefaults");o(T,e,["x","y"],i);var b=a("z")||a("marker.color");b&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":515,"../../registry":647}],840:[function(t,N,V){var m=t("../histogram2d/attributes"),u=t("../contour/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../lib/extend").extendFlat;N.exports=e({x:m.x,y:m.y,z:m.z,marker:m.marker,histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:m.xbins,nbinsy:m.nbinsy,ybins:m.ybins,autobinx:m.autobinx,autobiny:m.autobiny,bingroup:m.bingroup,xbingroup:m.xbingroup,ybingroup:m.ybingroup,autocontour:u.autocontour,ncontours:u.ncontours,contours:u.contours,line:{color:u.line.color,width:e({},u.line.width,{dflt:.5}),dash:u.line.dash,smoothing:u.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:m.hovertemplate,texttemplate:u.texttemplate,textfont:u.textfont},A("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(t,N,V){var m=t("../../lib"),u=t("../histogram2d/sample_defaults"),A=t("../contour/contours_defaults"),T=t("../contour/style_defaults"),e=t("../heatmap/label_defaults"),a=t("./attributes");N.exports=function(n,r,v,s){function o(g,d){return m.coerce(n,r,a,g,d)}function b(g){return m.coerce2(n,r,a,g)}u(n,r,o,s),r.visible!==!1&&(A(n,r,o,b),T(n,r,o,s),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&e(o,s))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../contour/calc"),plot:t("../contour/plot").plot,layerName:"contourlayer",style:t("../contour/style"),colorbar:t("../contour/colorbar"),hoverPoints:t("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../components/colorscale/attributes"),T=t("../../plots/domain").attributes,e=t("../pie/attributes"),a=t("../sunburst/attributes"),i=t("../treemap/attributes"),n=t("../treemap/constants"),r=t("../../lib/extend").extendFlat;N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:a.marker.colors,line:a.marker.line,editType:"calc"},A("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:i.pathbar,text:e.text,textinfo:a.textinfo,texttemplate:u({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:m({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:e.sort,root:a.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(t,N,V){var m=t("../../plots/plots");V.name="icicle",V.plot=function(u,A,T,e){m.plotBasePlot(V.name,u,A,T,e)},V.clean=function(u,A,T,e){m.cleanBasePlot(V.name,u,A,T,e)}},{"../../plots/plots":628}],845:[function(t,N,V){var m=t("../sunburst/calc");V.calc=function(u,A){return m.calc(u,A)},V.crossTraceCalc=function(u){return m._runCrossTraceCalc("icicle",u)}},{"../sunburst/calc":1060}],846:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("../../components/color"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,a=t("../bar/constants").TEXTPAD,i=t("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;N.exports=function(s,o,b,g){function d(_,h){return m.coerce(s,o,u,_,h)}var f=d("labels"),y=d("parents");if(!f||!f.length||!y||!y.length){o.visible=!1;return}var l=d("values");l&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var x=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(x)?"text+label":"label"),d("hovertext"),d("hovertemplate");var c=d("pathbar.visible"),M="auto";e(s,o,g,d,M,{hasPathbar:c,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var w=d("marker.line.width");w&&d("marker.line.color",g.paper_bgcolor),d("marker.colors");var p=o._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;p&&r(s,o,g,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",p?1:.7),o._hovered={marker:{line:{width:2,color:A.contrast(g.paper_bgcolor)}}},c&&(d("pathbar.thickness",o.pathbar.textfont.size+2*a),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(o,g,d),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("../treemap/constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=t("../sunburst/plot").formatSliceLabel,s=!1;N.exports=function(b,g,d,f,y){var l=y.width,x=y.height,c=y.viewX,M=y.viewY,w=y.pathSlice,p=y.toMoveInsideSlice,_=y.strTransform,h=y.hasTransition,L=y.handleSlicesExit,E=y.makeUpdateSliceInterpolator,S=y.makeUpdateTextInterpolator,P=y.prevEntry,F={},I=b._context.staticPlot,D=b._fullLayout,R=g[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,G=O.textposition.indexOf("right")!==-1,Y=O.textposition.indexOf("bottom")!==-1,ee=e(d,[l,x],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}),j=ee.descendants(),X=1/0,ie=-1/0;j.forEach(function(H){var q=H.depth;q>=O._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(X=Math.min(X,q),ie=Math.max(ie,q))}),f=f.data(j,n.getPtId),O._maxVisibleLayers=isFinite(ie)?ie-X+1:0,f.enter().append("g").classed("slice",!0),L(f,s,F,[l,x],w),f.order();var he=null;if(h&&P){var K=n.getPtId(P);f.each(function(H){he===null&&n.getPtId(H)===K&&(he={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var $=function(){return he||{x0:0,x1:l,y0:0,y1:x}},U=f;return h&&(U=U.transition().each("end",function(){var H=m.select(this);n.setSliceCursor(H,b,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(H){H._x0=c(H.x0),H._x1=c(H.x1),H._y0=M(H.y0),H._y1=M(H.y1),H._hoverX=c(H.x1-O.tiling.pad),H._hoverY=M(Y?H.y1-O.tiling.pad/2:H.y0+O.tiling.pad/2);var q=m.select(this),re=u.ensureSingle(q,"path","surface",function(se){se.style("pointer-events",I?"none":"all")});h?re.transition().attrTween("d",function(se){var ae=E(se,s,$(),[l,x],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(le){return w(ae(le))}}):re.attr("d",w),q.call(r,d,b,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,b,{isTransitioning:b._transitioning}),re.call(a,H,O,{hovered:!1}),H.x0===H.x1||H.y0===H.y1?H._text="":H._text=v(H,d,O,g,D)||"";var Z=u.ensureSingle(q,"g","slicetext"),Q=u.ensureSingle(Z,"text","",function(se){se.attr("data-notex",1)}),oe=u.ensureUniformFontSize(b,n.determineTextFont(O,H,D.font));Q.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",G?"end":z?"start":"middle").call(A.font,oe).call(T.convertToTspans,b),H.textBB=A.bBox(Q.node()),H.transform=p(H,{fontSize:oe.size}),H.transform.fontSize=oe.size,h?Q.transition().attrTween("transform",function(se){var ae=S(se,s,$(),[l,x]);return function(le){return _(ae(le))}}):Q.attr("transform",_(H))}),he}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(t,N,V){N.exports={moduleType:"trace",name:"icicle",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(t,N,V){N.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return m.coerce(T,e,u,i,n)}a("iciclecolorway",e.colorway),a("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(t,N,V){var m=t("d3-hierarchy"),u=t("../treemap/flip_tree");N.exports=function(T,e,a){var i=a.flipX,n=a.flipY,r=a.orientation==="h",v=a.maxDepth,s=e[0],o=e[1];v&&(s=(T.height+1)*e[0]/Math.min(T.height+1,v),o=(T.height+1)*e[1]/Math.min(T.height+1,v));var b=m.partition().padding(a.pad.inner).size(r?[e[1],s]:[e[0],o])(T);return(r||i||n)&&u(b,e,{swapXY:r,flipX:i,flipY:n}),b}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(t,N,V){var m=t("../treemap/draw"),u=t("./draw_descendants");N.exports=function(T,e,a,i){return m(T,e,a,i,{type:"icicle",drawDescendants:u})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/color"),A=t("../../lib"),T=t("../bar/uniform_text").resizeText;function e(i){var n=i._fullLayout._iciclelayer.selectAll(".trace");T(i,n,"icicle"),n.each(function(r){var v=m.select(this),s=r[0],o=s.trace;v.style("opacity",o.opacity),v.selectAll("path.surface").each(function(b){m.select(this).call(a,b,o)})})}function a(i,n,r){var v=n.data.data,s=!n.children,o=v.i,b=A.castOption(r,o,"marker.line.color")||u.defaultLine,g=A.castOption(r,o,"marker.line.width")||0;i.style("stroke-width",g).call(u.fill,v.color).call(u.stroke,b).style("opacity",s?r.leaf.opacity:null)}N.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(t,N,V){for(var m=t("../../plots/attributes"),u=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],a=[],i=[],n=0;n<e.length;n++){var r=T[e[n]];a.push("For the `"+e[n]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),i.push("For the `"+e[n]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}N.exports=A({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:A({},m.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:u({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(t,N,V){var m=t("../../lib"),u=t("./constants"),A=t("fast-isnumeric"),T=t("../../plots/cartesian/axes"),e=t("../../lib").maxRowLength,a=t("./helpers").getImageSize;N.exports=function(s,o){var b,g;if(o._hasZ)b=o.z.length,g=e(o.z);else if(o._hasSource){var d=a(o.source);b=d.height,g=d.width}var f=T.getFromId(s,o.xaxis||"x"),y=T.getFromId(s,o.yaxis||"y"),l=f.d2c(o.x0)-o.dx/2,x=y.d2c(o.y0)-o.dy/2,c,M=[l,l+g*o.dx],w=[x,x+b*o.dy];if(f&&f.type==="log")for(c=0;c<g;c++)M.push(l+c*o.dx);if(y&&y.type==="log")for(c=0;c<b;c++)w.push(x+c*o.dy);o._extremes[f._id]=T.findExtremes(f,M),o._extremes[y._id]=T.findExtremes(y,w),o._scaler=r(o);var p={x0:l,y0:x,z:o.z,w:g,h:b};return[p]};function i(v,s,o,b){return function(g){return m.constrain((g-v)*s,o,b)}}function n(v,s){return function(o){return m.constrain(o,v,s)}}function r(v){var s=u.colormodel[v.colormodel],o=s.colormodel||v.colormodel,b=o.length;v._sArray=[];for(var g=0;g<b;g++)s.min[g]!==v.zmin[g]||s.max[g]!==v.zmax[g]?v._sArray.push(i(v.zmin[g],(s.max[g]-s.min[g])/(v.zmax[g]-v.zmin[g]),s.min[g],s.max[g])):v._sArray.push(n(s.min[g],s.max[g]));return function(d){for(var f=d.slice(0,b),y=0;y<b;y++){var l=f[y];if(!A(l))return!1;f[y]=v._sArray[y](l)}return f}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(t,N,V){N.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(m){return m.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(m){var u=m.slice(0,3);return u[1]=u[1]+"%",u[2]=u[2]+"%",u},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(m){var u=m.slice(0,4);return u[1]=u[1]+"%",u[2]=u[2]+"%",u},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("./constants"),T=t("../../snapshot/helpers").IMAGE_URL_PREFIX;N.exports=function(a,i){function n(s,o){return m.coerce(a,i,u,s,o)}n("source"),i.source&&!i.source.match(T)&&delete i.source,i._hasSource=!!i.source;var r=n("z");if(i._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!i._hasZ&&!i._hasSource){i.visible=!1;return}n("x0"),n("y0"),n("dx"),n("dy");var v;i._hasZ?(n("colormodel","rgb"),v=A.colormodel[i.colormodel],n("zmin",v.zminDflt||v.min),n("zmax",v.zmaxDflt||v.max)):i._hasSource&&(i.colormodel="rgba256",v=A.colormodel[i.colormodel],i.zmin=v.zminDflt,i.zmax=v.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),i._length=null}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(t,N,V){N.exports=function(u,A){return"xVal"in A&&(u.x=A.xVal),"yVal"in A&&(u.y=A.yVal),A.xa&&(u.xaxis=A.xa),A.ya&&(u.yaxis=A.ya),u.color=A.color,u.colormodel=A.trace.colormodel,u.z||(u.z=A.color),u}},{}],859:[function(t,N,V){var m=t("probe-image-size/sync"),u=t("../../snapshot/helpers").IMAGE_URL_PREFIX,A=t("buffer/").Buffer;V.getImageSize=function(T){var e=T.replace(u,""),a=new A(e,"base64");return m(a)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(t,N,V){var m=t("../../components/fx"),u=t("../../lib"),A=t("./constants");N.exports=function(e,a,i){var n=e.cd[0],r=n.trace,v=e.xa,s=e.ya;if(!(m.inbox(a-n.x0,a-(n.x0+n.w*r.dx),0)>0||m.inbox(i-n.y0,i-(n.y0+n.h*r.dy),0)>0)){var o=Math.floor((a-n.x0)/r.dx),b=Math.floor(Math.abs(i-n.y0)/r.dy),g;if(r._hasZ?g=n.z[b][o]:r._hasSource&&(g=r._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,b,1,1).data),!!g){var d=n.hi||r.hoverinfo,f;if(d){var y=d.split("+");y.indexOf("all")!==-1&&(y=["color"]),y.indexOf("color")!==-1&&(f=!0)}var l=A.colormodel[r.colormodel],x=l.colormodel||r.colormodel,c=x.length,M=r._scaler(g),w=l.suffix,p=[];(r.hovertemplate||f)&&(p.push("["+[M[0]+w[0],M[1]+w[1],M[2]+w[2]].join(", ")),c===4&&p.push(", "+M[3]+w[3]),p.push("]"),p=p.join(""),e.extraText=x.toUpperCase()+": "+p);var _;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[b])?_=r.hovertext[b][o]:Array.isArray(r.text)&&Array.isArray(r.text[b])&&(_=r.text[b][o]);var h=s.c2p(n.y0+(b+.5)*r.dy),L=n.x0+(o+.5)*r.dx,E=n.y0+(b+.5)*r.dy,S="["+g.slice(0,r.colormodel.length).join(", ")+"]";return[u.extendFlat(e,{index:[b,o],x0:v.c2p(n.x0+o*r.dx),x1:v.c2p(n.x0+(o+1)*r.dx),y0:h,y1:h,color:M,xVal:L,xLabelVal:L,yVal:E,yLabelVal:E,zLabelVal:S,text:_,hovertemplateLabels:{zLabel:S,colorLabel:p,"color[0]Label":M[0]+w[0],"color[1]Label":M[1]+w[1],"color[2]Label":M[2]+w[2],"color[3]Label":M[3]+w[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover"),eventData:t("./event_data"),moduleType:"trace",name:"image",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=u.strTranslate,T=t("../../constants/xmlns_namespaces"),e=t("./constants"),a=u.isIOS()||u.isSafari()||u.isIE();N.exports=function(n,r,v,s){var o=r.xaxis,b=r.yaxis,g=!(a||n._context._exportedPlot);u.makeTraceGroups(s,v,"im").each(function(d){var f=m.select(this),y=d[0],l=y.trace,x=(l.zsmooth==="fast"||l.zsmooth===!1&&g)&&!l._hasZ&&l._hasSource&&o.type==="linear"&&b.type==="linear";l._realImage=x;var c=y.z,M=y.x0,w=y.y0,p=y.w,_=y.h,h=l.dx,L=l.dy,E,S,P,F,I,D;for(D=0;E===void 0&&D<p;)E=o.c2p(M+D*h),D++;for(D=p;S===void 0&&D>0;)S=o.c2p(M+D*h),D--;for(D=0;F===void 0&&D<_;)F=b.c2p(w+D*L),D++;for(D=_;I===void 0&&D>0;)I=b.c2p(w+D*L),D--;if(S<E&&(P=S,S=E,E=P),I<F&&(P=F,F=I,I=P),!x){var R=.5;E=Math.max(-R*o._length,E),S=Math.min((1+R)*o._length,S),F=Math.max(-R*b._length,F),I=Math.min((1+R)*b._length,I)}var O=Math.round(S-E),z=Math.round(I-F),G=O<=0||z<=0;if(G){var Y=f.selectAll("image").data([]);Y.exit().remove();return}function ee(re){var Z=document.createElement("canvas");Z.width=O,Z.height=z;var Q=Z.getContext("2d",{willReadFrequently:!0}),oe=function(De){return u.constrain(Math.round(o.c2p(M+De*h)-E),0,O)},se=function(De){return u.constrain(Math.round(b.c2p(w+De*L)-F),0,z)},ae=e.colormodel[l.colormodel],le=ae.colormodel||l.colormodel,_e=ae.fmt,fe;for(D=0;D<y.w;D++){var me=oe(D),xe=oe(D+1);if(!(xe===me||isNaN(xe)||isNaN(me)))for(var ye=0;ye<y.h;ye++){var be=se(ye),ke=se(ye+1);ke===be||isNaN(ke)||isNaN(be)||!re(D,ye)||(fe=l._scaler(re(D,ye)),fe?Q.fillStyle=le+"("+_e(fe).join(",")+")":Q.fillStyle="rgba(0,0,0,0)",Q.fillRect(me,be,xe-me,ke-be))}}return Z}var j=f.selectAll("image").data([d]);j.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),j.exit().remove();var X=l.zsmooth===!1?e.pixelatedStyle:"";if(x){var ie=u.simpleMap(o.range,o.r2l),he=u.simpleMap(b.range,b.r2l),K=ie[1]<ie[0],$=he[1]>he[0];if(K||$){var U=E+O/2,H=F+z/2;X+="transform:"+A(U+"px",H+"px")+"scale("+(K?-1:1)+","+($?-1:1)+")"+A(-U+"px",-H+"px")+";"}}j.attr("style",X);var q=new Promise(function(re){if(l._hasZ)re();else if(l._hasSource)if(l._canvas&&l._canvas.el.width===p&&l._canvas.el.height===_&&l._canvas.source===l.source)re();else{var Z=document.createElement("canvas");Z.width=p,Z.height=_;var Q=Z.getContext("2d",{willReadFrequently:!0});l._image=l._image||new Image;var oe=l._image;oe.onload=function(){Q.drawImage(oe,0,0),l._canvas={el:Z,source:l.source},re()},oe.setAttribute("src",l.source)}}).then(function(){var re,Z;if(l._hasZ)Z=ee(function(se,ae){return c[ae][se]}),re=Z.toDataURL("image/png");else if(l._hasSource)if(x)re=l.source;else{var Q=l._canvas.el.getContext("2d",{willReadFrequently:!0}),oe=Q.getImageData(0,0,p,_).data;Z=ee(function(se,ae){var le=4*(ae*p+se);return[oe[le],oe[le+1],oe[le+2],oe[le+3]]}),re=Z.toDataURL("image/png")}j.attr({"xlink:href":re,height:z,width:O,x:E,y:F})});n._promises.push(q)})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(t,N,V){var m=t("@plotly/d3");N.exports=function(A){m.select(A).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(t,N,V){var m=t("../../lib/extend").extendFlat,u=t("../../lib/extend").extendDeep,A=t("../../plot_api/edit_types").overrideAll,T=t("../../plots/font_attributes"),e=t("../../components/color/attributes"),a=t("../../plots/domain").attributes,i=t("../../plots/cartesian/layout_attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../constants/delta.js"),v=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=T({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},b={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},g=n("step",u({},o,{range:b}));N.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:m({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:v("value")},font:m({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:v("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:m({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:u({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:A({range:b,visible:m({},i.visible,{dflt:!0}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:m({},i.ticks,{dflt:"outside"}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,tickfont:T({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:m({},o.line.color,{}),width:m({},o.line.width,{dflt:1}),editType:"plot"},thickness:m({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(t,N,V){var m=t("../../plots/plots");V.name="indicator",V.plot=function(u,A,T,e){m.plotBasePlot(V.name,u,A,T,e)},V.clean=function(u,A,T,e){m.cleanBasePlot(V.name,u,A,T,e)}},{"../../plots/plots":628}],866:[function(t,N,V){function m(u,A){var T=[],e=A.value;typeof A._lastValue!="number"&&(A._lastValue=A.value);var a=A._lastValue,i=a;return A._hasDelta&&typeof A.delta.reference=="number"&&(i=A.delta.reference),T[0]={y:e,lastY:a,delta:e-i,relativeDelta:(e-i)/i},T}N.exports={calc:m}},{}],867:[function(t,N,V){N.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../../plot_api/plot_template"),e=t("../../plots/array_container_defaults"),a=t("./constants.js"),i=t("../../plots/cartesian/tick_value_defaults"),n=t("../../plots/cartesian/tick_mark_defaults"),r=t("../../plots/cartesian/tick_label_defaults"),v=t("../../plots/cartesian/prefix_suffix_defaults");function s(b,g,d,f){function y(D,R){return m.coerce(b,g,u,D,R)}A(g,f,y),y("mode"),g._hasNumber=g.mode.indexOf("number")!==-1,g._hasDelta=g.mode.indexOf("delta")!==-1,g._hasGauge=g.mode.indexOf("gauge")!==-1;var l=y("value");g._range=[0,typeof l=="number"?1.5*l:1];var x=new Array(2),c;g._hasNumber&&(y("number.valueformat"),y("number.font.color",f.font.color),y("number.font.family",f.font.family),y("number.font.size"),g.number.font.size===void 0&&(g.number.font.size=a.defaultNumberFontSize,x[0]=!0),y("number.prefix"),y("number.suffix"),c=g.number.font.size);var M;g._hasDelta&&(y("delta.font.color",f.font.color),y("delta.font.family",f.font.family),y("delta.font.size"),g.delta.font.size===void 0&&(g.delta.font.size=(g._hasNumber?.5:1)*(c||a.defaultNumberFontSize),x[1]=!0),y("delta.reference",g.value),y("delta.relative"),y("delta.valueformat",g.delta.relative?"2%":""),y("delta.increasing.symbol"),y("delta.increasing.color"),y("delta.decreasing.symbol"),y("delta.decreasing.color"),y("delta.position"),y("delta.prefix"),y("delta.suffix"),M=g.delta.font.size),g._scaleNumbers=(!g._hasNumber||x[0])&&(!g._hasDelta||x[1])||!1,y("title.font.color",f.font.color),y("title.font.family",f.font.family),y("title.font.size",.25*(c||M||a.defaultNumberFontSize)),y("title.text");var w,p,_,h;function L(D,R){return m.coerce(w,p,u.gauge,D,R)}function E(D,R){return m.coerce(_,h,u.gauge.axis,D,R)}if(g._hasGauge){w=b.gauge,w||(w={}),p=T.newContainer(g,"gauge"),L("shape");var S=g._isBullet=g.gauge.shape==="bullet";S||y("title.align","center");var P=g._isAngular=g.gauge.shape==="angular";P||y("align","center"),L("bgcolor",f.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var F=a.valueThickness*(g.gauge.shape==="bullet"?.5:1);L("bar.thickness",F),e(w,p,{name:"steps",handleItemDefaults:o}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),_={},w&&(_=w.axis||{}),h=T.newContainer(p,"axis"),E("visible"),g._range=E("range",g._range);var I={outerTicks:!0};i(_,h,E,"linear"),v(_,h,E,"linear",I),r(_,h,E,"linear",I),n(_,h,E,I)}else y("title.align","center"),y("align","center"),g._isAngular=g._isBullet=!1;g._length=null}function o(b,g){function d(f,y){return m.coerce(b,g,u.gauge.steps,f,y)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}N.exports={supplyDefaults:s}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(t,N,V){N.exports={moduleType:"trace",name:"indicator",basePlotModule:t("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc").calc,plot:t("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(t,N,V){var m=t("@plotly/d3"),u=t("d3-interpolate").interpolate,A=t("d3-interpolate").interpolateNumber,T=t("../../lib"),e=T.strScale,a=T.strTranslate,i=T.rad2deg,n=t("../../constants/alignment").MID_SHIFT,r=t("../../components/drawing"),v=t("./constants"),s=t("../../lib/svg_text_utils"),o=t("../../plots/cartesian/axes"),b=t("../../plots/cartesian/axis_defaults"),g=t("../../plots/cartesian/position_defaults"),d=t("../../plots/cartesian/layout_attributes"),f=t("../../components/color"),y={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},x=/[yzafpnµmkMGTPEZY]/;function c(I){return I&&I.duration>0}N.exports=function(D,R,O,z){var G=D._fullLayout,Y;c(O)&&z&&(Y=z()),T.makeTraceGroups(G._indicatorlayer,R,"trace").each(function(ee){var j=ee[0],X=j.trace,ie=m.select(this),he=X._hasGauge,K=X._isAngular,$=X._isBullet,U=X.domain,H={w:G._size.w*(U.x[1]-U.x[0]),h:G._size.h*(U.y[1]-U.y[0]),l:G._size.l+G._size.w*U.x[0],r:G._size.r+G._size.w*(1-U.x[1]),t:G._size.t+G._size.h*(1-U.y[1]),b:G._size.b+G._size.h*U.y[0]},q=H.l+H.w/2,re=H.t+H.h/2,Z=Math.min(H.w/2,H.h),Q=v.innerRadius*Z,oe,se,ae,le=X.align||"center";if(se=re,!he)oe=H.l+l[le]*H.w,ae=function(Ae){return E(Ae,H.w,H.h)};else if(K&&(oe=q,se=re+Z/2,ae=function(Ae){return S(Ae,.9*Q)}),$){var _e=v.bulletPadding,fe=1-v.bulletNumberDomainSize+_e;oe=H.l+(fe+(1-fe)*l[le])*H.w,ae=function(Ae){return E(Ae,(v.bulletNumberDomainSize-_e)*H.w,H.h)}}p(D,ie,ee,{numbersX:oe,numbersY:se,numbersScaler:ae,transitionOpts:O,onComplete:Y});var me,xe;he&&(me={range:X.gauge.axis.range,color:X.gauge.bgcolor,line:{color:X.gauge.bordercolor,width:0},thickness:1},xe={range:X.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:X.gauge.bordercolor,width:X.gauge.borderwidth},thickness:1});var ye=ie.selectAll("g.angular").data(K?ee:[]);ye.exit().remove();var be=ie.selectAll("g.angularaxis").data(K?ee:[]);be.exit().remove(),K&&w(D,ie,ee,{radius:Z,innerRadius:Q,gauge:ye,layer:be,size:H,gaugeBg:me,gaugeOutline:xe,transitionOpts:O,onComplete:Y});var ke=ie.selectAll("g.bullet").data($?ee:[]);ke.exit().remove();var De=ie.selectAll("g.bulletaxis").data($?ee:[]);De.exit().remove(),$&&M(D,ie,ee,{gauge:ke,layer:De,size:H,gaugeBg:me,gaugeOutline:xe,transitionOpts:O,onComplete:Y});var He=ie.selectAll("text.title").data(ee);He.exit().remove(),He.enter().append("text").classed("title",!0),He.attr("text-anchor",function(){return $?y.right:y[X.title.align]}).text(X.title.text).call(r.font,X.title.font).call(s.convertToTspans,D),He.attr("transform",function(){var Ae=H.l+H.w*l[X.title.align],Le,Ze=v.titlePadding,We=r.bBox(He.node());if(he){if(K)if(X.gauge.axis.visible){var ze=r.bBox(be.node());Le=ze.top-Ze-We.bottom}else Le=H.t+H.h/2-Z/2-We.bottom-Ze;$&&(Le=se-(We.top+We.bottom)/2,Ae=H.l-v.bulletPadding*H.w)}else Le=X._numbersTop-Ze-We.bottom;return a(Ae,Le)})})};function M(I,D,R,O){var z=R[0].trace,G=O.gauge,Y=O.layer,ee=O.gaugeBg,j=O.gaugeOutline,X=O.size,ie=z.domain,he=O.transitionOpts,K=O.onComplete,$,U,H,q,re;G.enter().append("g").classed("bullet",!0),G.attr("transform",a(X.l,X.t)),Y.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Y.selectAll("g.xbulletaxistick,path,text").remove();var Z=X.h,Q=z.gauge.bar.thickness*Z,oe=ie.x[0],se=ie.x[0]+(ie.x[1]-ie.x[0])*(z._hasNumber||z._hasDelta?1-v.bulletNumberDomainSize:1);$=L(I,z.gauge.axis),$._id="xbulletaxis",$.domain=[oe,se],$.setScale(),U=o.calcTicks($),H=o.makeTransTickFn($),q=o.getTickSigns($)[2],re=X.t+X.h,$.visible&&(o.drawTicks(I,$,{vals:$.ticks==="inside"?o.clipEnds($,U):U,layer:Y,path:o.makeTickPath($,re,q),transFn:H}),o.drawLabels(I,$,{vals:U,layer:Y,transFn:H,labelFns:o.makeLabelFns($,re)}));function ae(be){be.attr("width",function(ke){return Math.max(0,$.c2p(ke.range[1])-$.c2p(ke.range[0]))}).attr("x",function(ke){return $.c2p(ke.range[0])}).attr("y",function(ke){return .5*(1-ke.thickness)*Z}).attr("height",function(ke){return ke.thickness*Z})}var le=[ee].concat(z.gauge.steps),_e=G.selectAll("g.bg-bullet").data(le);_e.enter().append("g").classed("bg-bullet",!0).append("rect"),_e.select("rect").call(ae).call(_),_e.exit().remove();var fe=G.selectAll("g.value-bullet").data([z.gauge.bar]);fe.enter().append("g").classed("value-bullet",!0).append("rect"),fe.select("rect").attr("height",Q).attr("y",(Z-Q)/2).call(_),c(he)?fe.select("rect").transition().duration(he.duration).ease(he.easing).each("end",function(){K&&K()}).each("interrupt",function(){K&&K()}).attr("width",Math.max(0,$.c2p(Math.min(z.gauge.axis.range[1],R[0].y)))):fe.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,$.c2p(Math.min(z.gauge.axis.range[1],R[0].y))):0),fe.exit().remove();var me=R.filter(function(){return z.gauge.threshold.value||z.gauge.threshold.value===0}),xe=G.selectAll("g.threshold-bullet").data(me);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",$.c2p(z.gauge.threshold.value)).attr("x2",$.c2p(z.gauge.threshold.value)).attr("y1",(1-z.gauge.threshold.thickness)/2*Z).attr("y2",(1-(1-z.gauge.threshold.thickness)/2)*Z).call(f.stroke,z.gauge.threshold.line.color).style("stroke-width",z.gauge.threshold.line.width),xe.exit().remove();var ye=G.selectAll("g.gauge-outline").data([j]);ye.enter().append("g").classed("gauge-outline",!0).append("rect"),ye.select("rect").call(ae).call(_),ye.exit().remove()}function w(I,D,R,O){var z=R[0].trace,G=O.size,Y=O.radius,ee=O.innerRadius,j=O.gaugeBg,X=O.gaugeOutline,ie=[G.l+G.w/2,G.t+G.h/2+Y/2],he=O.gauge,K=O.layer,$=O.transitionOpts,U=O.onComplete,H=Math.PI/2;function q(Ie){var Ve=z.gauge.axis.range[0],dt=z.gauge.axis.range[1],Ft=(Ie-Ve)/(dt-Ve)*Math.PI-H;return Ft<-H?-H:Ft>H?H:Ft}function re(Ie){return m.svg.arc().innerRadius((ee+Y)/2-Ie/2*(Y-ee)).outerRadius((ee+Y)/2+Ie/2*(Y-ee)).startAngle(-H)}function Z(Ie){Ie.attr("d",function(Ve){return re(Ve.thickness).startAngle(q(Ve.range[0])).endAngle(q(Ve.range[1]))()})}var Q,oe,se,ae;he.enter().append("g").classed("angular",!0),he.attr("transform",a(ie[0],ie[1])),K.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),K.selectAll("g.xangularaxistick,path,text").remove(),Q=L(I,z.gauge.axis),Q.type="linear",Q.range=z.gauge.axis.range,Q._id="xangularaxis",Q.ticklabeloverflow="allow",Q.setScale();var le=function(Ie){return(Q.range[0]-Ie.x)/(Q.range[1]-Q.range[0])*Math.PI+Math.PI},_e={},fe=o.makeLabelFns(Q,0),me=fe.labelStandoff;_e.xFn=function(Ie){var Ve=le(Ie);return Math.cos(Ve)*me},_e.yFn=function(Ie){var Ve=le(Ie),dt=Math.sin(Ve)>0?.2:1;return-Math.sin(Ve)*(me+Ie.fontSize*dt)+Math.abs(Math.cos(Ve))*(Ie.fontSize*n)},_e.anchorFn=function(Ie){var Ve=le(Ie),dt=Math.cos(Ve);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},_e.heightFn=function(Ie,Ve,dt){var Ft=le(Ie);return-.5*(1+Math.sin(Ft))*dt};var xe=function(Ie){return a(ie[0]+Y*Math.cos(Ie),ie[1]-Y*Math.sin(Ie))};se=function(Ie){return xe(le(Ie))};var ye=function(Ie){var Ve=le(Ie);return xe(Ve)+"rotate("+-i(Ve)+")"};if(oe=o.calcTicks(Q),ae=o.getTickSigns(Q)[2],Q.visible){ae=Q.ticks==="inside"?-1:1;var be=(Q.linewidth||1)/2;o.drawTicks(I,Q,{vals:oe,layer:K,path:"M"+ae*be+",0h"+ae*Q.ticklen,transFn:ye}),o.drawLabels(I,Q,{vals:oe,layer:K,transFn:se,labelFns:_e})}var ke=[j].concat(z.gauge.steps),De=he.selectAll("g.bg-arc").data(ke);De.enter().append("g").classed("bg-arc",!0).append("path"),De.select("path").call(Z).call(_),De.exit().remove();var He=re(z.gauge.bar.thickness),Ae=he.selectAll("g.value-arc").data([z.gauge.bar]);Ae.enter().append("g").classed("value-arc",!0).append("path");var Le=Ae.select("path");c($)?(Le.transition().duration($.duration).ease($.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()}).attrTween("d",h(He,q(R[0].lastY),q(R[0].y))),z._lastValue=R[0].y):Le.attr("d",typeof R[0].y=="number"?He.endAngle(q(R[0].y)):"M0,0Z"),Le.call(_),Ae.exit().remove(),ke=[];var Ze=z.gauge.threshold.value;(Ze||Ze===0)&&ke.push({range:[Ze,Ze],color:z.gauge.threshold.color,line:{color:z.gauge.threshold.line.color,width:z.gauge.threshold.line.width},thickness:z.gauge.threshold.thickness});var We=he.selectAll("g.threshold-arc").data(ke);We.enter().append("g").classed("threshold-arc",!0).append("path"),We.select("path").call(Z).call(_),We.exit().remove();var ze=he.selectAll("g.gauge-outline").data([X]);ze.enter().append("g").classed("gauge-outline",!0).append("path"),ze.select("path").call(Z).call(_),ze.exit().remove()}function p(I,D,R,O){var z=R[0].trace,G=O.numbersX,Y=O.numbersY,ee=z.align||"center",j=y[ee],X=O.transitionOpts,ie=O.onComplete,he=T.ensureSingle(D,"g","numbers"),K,$,U,H=[];z._hasNumber&&H.push("number"),z._hasDelta&&(H.push("delta"),z.delta.position==="left"&&H.reverse());var q=he.selectAll("text").data(H);q.enter().append("text"),q.attr("text-anchor",function(){return j}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),q.exit().remove();function re(xe,ye,be,ke){if(xe.match("s")&&be>=0!=ke>=0&&!ye(be).slice(-1).match(x)&&!ye(ke).slice(-1).match(x)){var De=xe.slice().replace("s","f").replace(/\d+/,function(Ae){return parseInt(Ae)-1}),He=L(I,{tickformat:De});return function(Ae){return Math.abs(Ae)<1?o.tickText(He,Ae).text:ye(Ae)}}else return ye}function Z(){var xe=L(I,{tickformat:z.number.valueformat},z._range);xe.setScale(),o.prepTicks(xe);var ye=function(Ae){return o.tickText(xe,Ae).text},be=z.number.suffix,ke=z.number.prefix,De=he.select("text.number");function He(){var Ae=typeof R[0].y=="number"?ke+ye(R[0].y)+be:"-";De.text(Ae).call(r.font,z.number.font).call(s.convertToTspans,I)}return c(X)?De.transition().duration(X.duration).ease(X.easing).each("end",function(){He(),ie&&ie()}).each("interrupt",function(){He(),ie&&ie()}).attrTween("text",function(){var Ae=m.select(this),Le=A(R[0].lastY,R[0].y);z._lastValue=R[0].y;var Ze=re(z.number.valueformat,ye,R[0].lastY,R[0].y);return function(We){Ae.text(ke+Ze(Le(We))+be)}}):He(),K=P(ke+ye(R[0].y)+be,z.number.font,j,I),De}function Q(){var xe=L(I,{tickformat:z.delta.valueformat},z._range);xe.setScale(),o.prepTicks(xe);var ye=function(We){return o.tickText(xe,We).text},be=z.delta.suffix,ke=z.delta.prefix,De=function(We){var ze=z.delta.relative?We.relativeDelta:We.delta;return ze},He=function(We,ze){return We===0||typeof We!="number"||isNaN(We)?"-":(We>0?z.delta.increasing.symbol:z.delta.decreasing.symbol)+ke+ze(We)+be},Ae=function(We){return We.delta>=0?z.delta.increasing.color:z.delta.decreasing.color};z._deltaLastValue===void 0&&(z._deltaLastValue=De(R[0]));var Le=he.select("text.delta");Le.call(r.font,z.delta.font).call(f.fill,Ae({delta:z._deltaLastValue}));function Ze(){Le.text(He(De(R[0]),ye)).call(f.fill,Ae(R[0])).call(s.convertToTspans,I)}return c(X)?Le.transition().duration(X.duration).ease(X.easing).tween("text",function(){var We=m.select(this),ze=De(R[0]),Ie=z._deltaLastValue,Ve=re(z.delta.valueformat,ye,Ie,ze),dt=A(Ie,ze);return z._deltaLastValue=ze,function(Ft){We.text(He(dt(Ft),Ve)),We.call(f.fill,Ae({delta:dt(Ft)}))}}).each("end",function(){Ze(),ie&&ie()}).each("interrupt",function(){Ze(),ie&&ie()}):Ze(),$=P(He(De(R[0]),ye),z.delta.font,j,I),Le}var oe=z.mode+z.align,se;if(z._hasDelta&&(se=Q(),oe+=z.delta.position+z.delta.font.size+z.delta.font.family+z.delta.valueformat,oe+=z.delta.increasing.symbol+z.delta.decreasing.symbol,U=$),z._hasNumber&&(Z(),oe+=z.number.font.size+z.number.font.family+z.number.valueformat+z.number.suffix+z.number.prefix,U=K),z._hasDelta&&z._hasNumber){var ae=[(K.left+K.right)/2,(K.top+K.bottom)/2],le=[($.left+$.right)/2,($.top+$.bottom)/2],_e,fe,me=.75*z.delta.font.size;z.delta.position==="left"&&(_e=F(z,"deltaPos",0,-1*(K.width*l[z.align]+$.width*(1-l[z.align])+me),oe,Math.min),fe=ae[1]-le[1],U={width:K.width+$.width+me,height:Math.max(K.height,$.height),left:$.left+_e,right:K.right,top:Math.min(K.top,$.top+fe),bottom:Math.max(K.bottom,$.bottom+fe)}),z.delta.position==="right"&&(_e=F(z,"deltaPos",0,K.width*(1-l[z.align])+$.width*l[z.align]+me,oe,Math.max),fe=ae[1]-le[1],U={width:K.width+$.width+me,height:Math.max(K.height,$.height),left:K.left,right:$.right+_e,top:Math.min(K.top,$.top+fe),bottom:Math.max(K.bottom,$.bottom+fe)}),z.delta.position==="bottom"&&(_e=null,fe=$.height,U={width:Math.max(K.width,$.width),height:K.height+$.height,left:Math.min(K.left,$.left),right:Math.max(K.right,$.right),top:K.bottom-K.height,bottom:K.bottom+$.height}),z.delta.position==="top"&&(_e=null,fe=K.top,U={width:Math.max(K.width,$.width),height:K.height+$.height,left:Math.min(K.left,$.left),right:Math.max(K.right,$.right),top:K.bottom-K.height-$.height,bottom:K.bottom}),se.attr({dx:_e,dy:fe})}(z._hasNumber||z._hasDelta)&&he.attr("transform",function(){var xe=O.numbersScaler(U);oe+=xe[2];var ye=F(z,"numbersScale",1,xe[0],oe,Math.min),be;z._scaleNumbers||(ye=1),z._isAngular?be=Y-ye*U.bottom:be=Y-ye*(U.top+U.bottom)/2,z._numbersTop=ye*U.top+be;var ke=U[ee];ee==="center"&&(ke=(U.left+U.right)/2);var De=G-ye*ke;return De=F(z,"numbersTranslate",0,De,oe,Math.max),a(De,be)+e(ye)})}function _(I){I.each(function(D){f.stroke(m.select(this),D.line.color)}).each(function(D){f.fill(m.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function h(I,D,R){return function(){var O=u(D,R);return function(z){return I.endAngle(O(z))()}}}function L(I,D,R){var O=I._fullLayout,z=T.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),G={type:"linear",_id:"x"+D._id},Y={letter:"x",font:O.font,noHover:!0,noTickson:!0};function ee(j,X){return T.coerce(z,G,d,j,X)}return b(z,G,ee,Y,O),g(z,G,ee,Y),G}function E(I,D,R){var O=Math.min(D/I.width,R/I.height);return[O,I,D+"x"+R]}function S(I,D){var R=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),O=D/R;return[O,I,D]}function P(I,D,R,O){var z=document.createElementNS("http://www.w3.org/2000/svg","text"),G=m.select(z);return G.text(I).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",I).call(s.convertToTspans,O).call(r.font,D),r.bBox(G.node())}function F(I,D,R,O,z,G){var Y="_cache"+D;I[Y]&&I[Y].key===z||(I[Y]={key:z,value:R});var ee=T.aggNums(G,null,[I[Y].value,O],2);return I[Y].value=ee,ee}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(t,N,V){var m=t("../../components/colorscale/attributes"),u=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll;function n(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var v=N.exports=i(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n(),y:n(),z:n()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:A(),xhoverformat:u("x"),yhoverformat:u("y"),zhoverformat:u("z"),valuehoverformat:u("value",1),showlegend:a({},e.showlegend,{dflt:!1})},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:a({},e.hoverinfo)}),"calc","nested");v.flatshading.dflt=!0,v.lighting.facenormalsepsilon.dflt=0,v.x.editType=v.y.editType=v.z.editType=v.value.editType="calc+clearAxisTypes",v.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(t,N,V){var m=t("../../components/colorscale/calc"),u=t("../streamtube/calc").processGrid,A=t("../streamtube/calc").filter;N.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=A(a.x,a._len),a._y=A(a.y,a._len),a._z=A(a.z,a._len),a._value=A(a.value,a._len);var i=u(a);a._gridFill=i.fill,a._Xs=i.Xs,a._Ys=i.Ys,a._Zs=i.Zs,a._len=i.len;for(var n=1/0,r=-1/0,v=0;v<a._len;v++){var s=a._value[v];n=Math.min(n,s),r=Math.max(r,s)}a._minValues=n,a._maxValues=r,a._vMin=a.isomin===void 0||a.isomin===null?n:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?r:a.isomax,m(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(t,N,V){var m=t("../../../stackgl_modules").gl_mesh3d,u=t("../../lib/gl_format_color").parseColorScale,A=t("../../lib/str2rgbarray"),T=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),a=function(o,b){for(var g=b.length-1;g>0;g--){var d=Math.min(b[g],b[g-1]),f=Math.max(b[g],b[g-1]);if(f>d&&d<o&&o<=f)return{id:g,distRatio:(f-o)/(f-d)}}return{id:0,distRatio:0}};function i(o,b,g){this.scene=o,this.uid=g,this.mesh=b,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(o){if(o.object===this.mesh){var b=o.data.index,g=this.data._meshX[b],d=this.data._meshY[b],f=this.data._meshZ[b],y=this.data._Ys.length,l=this.data._Zs.length,x=a(g,this.data._Xs).id,c=a(d,this.data._Ys).id,M=a(f,this.data._Zs).id,w=o.index=M+l*c+l*y*x;o.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[w]!==void 0?o.textLabel=p[w]:p&&(o.textLabel=p),!0}},n.update=function(o){var b=this.scene,g=b.fullSceneLayout;this.data=v(o);function d(c,M,w,p){return M.map(function(_){return c.d2l(_,0,p)*w})}var f=e(d(g.xaxis,o._meshX,b.dataScale[0],o.xcalendar),d(g.yaxis,o._meshY,b.dataScale[1],o.ycalendar),d(g.zaxis,o._meshZ,b.dataScale[2],o.zcalendar)),y=e(o._meshI,o._meshJ,o._meshK),l={positions:f,cells:y,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:A(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},x=T(o);l.vertexIntensity=o._meshIntensity,l.vertexIntensityBounds=[x.min,x.max],l.colormap=u(o),this.mesh.update(l)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(o){o._meshI=[],o._meshJ=[],o._meshK=[];var b=o.surface.show,g=o.spaceframe.show,d=o.surface.fill,f=o.spaceframe.fill,y=!1,l=!1,x=0,c,M,w=o._Xs,p=o._Ys,_=o._Zs,h=w.length,L=p.length,E=_.length,S=r.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Nt,Lt,Xe){switch(S){case 5:return Xe+E*Lt+E*L*Nt;case 4:return Xe+E*Nt+E*h*Lt;case 3:return Lt+L*Xe+L*E*Nt;case 2:return Lt+L*Nt+L*h*Xe;case 1:return Nt+h*Xe+h*E*Lt;default:return Nt+h*Lt+h*L*Xe}},F=o._minValues,I=o._maxValues,D=o._vMin,R=o._vMax,O,z,G,Y;function ee(Nt,Lt,Xe){for(var it=Y.length,Ye=M;Ye<it;Ye++)if(Nt===O[Ye]&&Lt===z[Ye]&&Xe===G[Ye])return Ye;return-1}function j(){M=c}function X(){O=[],z=[],G=[],Y=[],c=0,j()}function ie(Nt,Lt,Xe,it){return O.push(Nt),z.push(Lt),G.push(Xe),Y.push(it),c++,c-1}function he(Nt,Lt,Xe){return o._meshI.push(Nt),o._meshJ.push(Lt),o._meshK.push(Xe),x++,x-1}function K(Nt,Lt,Xe){for(var it=[],Ye=0;Ye<Nt.length;Ye++)it[Ye]=(Nt[Ye]+Lt[Ye]+Xe[Ye])/3;return it}function $(Nt,Lt,Xe){for(var it=[],Ye=0;Ye<Nt.length;Ye++)it[Ye]=Nt[Ye]*(1-Xe)+Xe*Lt[Ye];return it}var U;function H(Nt){U=Nt}function q(Nt,Lt){var Xe=Nt[0],it=Nt[1],Ye=Nt[2],Ee=K(Xe,it,Ye),Ge=Math.sqrt(1-U),Ke=$(Ee,Xe,Ge),qe=$(Ee,it,Ge),At=$(Ee,Ye,Ge),yt=Lt[0],Mt=Lt[1],Gt=Lt[2];return{xyzv:[[Xe,it,qe],[qe,Ke,Xe],[it,Ye,At],[At,qe,it],[Ye,Xe,Ke],[Ke,At,Ye]],abc:[[yt,Mt,-1],[-1,-1,yt],[Mt,Gt,-1],[-1,-1,Mt],[Gt,yt,-1],[-1,-1,Gt]]}}function re(Nt,Lt){return Nt==="all"||Nt===null?!0:Nt.indexOf(Lt)>-1}function Z(Nt,Lt){return Nt===null?Lt:Nt}function Q(Nt,Lt,Xe){j();var it=[Lt],Ye=[Xe];if(U>=1)it=[Lt],Ye=[Xe];else if(U>0){var Ee=q(Lt,Xe);it=Ee.xyzv,Ye=Ee.abc}for(var Ge=0;Ge<it.length;Ge++){Lt=it[Ge],Xe=Ye[Ge];for(var Ke=[],qe=0;qe<3;qe++){var At=Lt[qe][0],yt=Lt[qe][1],Mt=Lt[qe][2],Gt=Lt[qe][3],zt=Xe[qe]>-1?Xe[qe]:ee(At,yt,Mt);zt>-1?Ke[qe]=zt:Ke[qe]=ie(At,yt,Mt,Z(Nt,Gt))}he(Ke[0],Ke[1],Ke[2])}}function oe(Nt,Lt,Xe){var it=function(Ye,Ee,Ge){Q(Nt,[Lt[Ye],Lt[Ee],Lt[Ge]],[Xe[Ye],Xe[Ee],Xe[Ge]])};it(0,1,2),it(2,3,0)}function se(Nt,Lt,Xe){var it=function(Ye,Ee,Ge){Q(Nt,[Lt[Ye],Lt[Ee],Lt[Ge]],[Xe[Ye],Xe[Ee],Xe[Ge]])};it(0,1,2),it(3,0,1),it(2,3,0),it(1,2,3)}function ae(Nt,Lt,Xe,it){var Ye=Nt[3];Ye<Xe&&(Ye=Xe),Ye>it&&(Ye=it);for(var Ee=(Nt[3]-Ye)/(Nt[3]-Lt[3]+1e-9),Ge=[],Ke=0;Ke<4;Ke++)Ge[Ke]=(1-Ee)*Nt[Ke]+Ee*Lt[Ke];return Ge}function le(Nt,Lt,Xe){return Nt>=Lt&&Nt<=Xe}function _e(Nt){var Lt=.001*(R-D);return Nt>=D-Lt&&Nt<=R+Lt}function fe(Nt){for(var Lt=[],Xe=0;Xe<4;Xe++){var it=Nt[Xe];Lt.push([o._x[it],o._y[it],o._z[it],o._value[it]])}return Lt}var me=3;function xe(Nt,Lt,Xe,it,Ye,Ee){Ee||(Ee=1),Xe=[-1,-1,-1];var Ge=!1,Ke=[le(Lt[0][3],it,Ye),le(Lt[1][3],it,Ye),le(Lt[2][3],it,Ye)];if(!Ke[0]&&!Ke[1]&&!Ke[2])return!1;var qe=function(yt,Mt,Gt){return _e(Mt[0][3])&&_e(Mt[1][3])&&_e(Mt[2][3])?(Q(yt,Mt,Gt),!0):Ee<me?xe(yt,Mt,Gt,D,R,++Ee):!1};if(Ke[0]&&Ke[1]&&Ke[2])return qe(Nt,Lt,Xe)||Ge;var At=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(yt){if(Ke[yt[0]]&&Ke[yt[1]]&&!Ke[yt[2]]){var Mt=Lt[yt[0]],Gt=Lt[yt[1]],zt=Lt[yt[2]],Ht=ae(zt,Mt,it,Ye),Zt=ae(zt,Gt,it,Ye);Ge=qe(Nt,[Zt,Ht,Mt],[-1,-1,Xe[yt[0]]])||Ge,Ge=qe(Nt,[Mt,Gt,Zt],[Xe[yt[0]],Xe[yt[1]],-1])||Ge,At=!0}}),At||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(yt){if(Ke[yt[0]]&&!Ke[yt[1]]&&!Ke[yt[2]]){var Mt=Lt[yt[0]],Gt=Lt[yt[1]],zt=Lt[yt[2]],Ht=ae(Gt,Mt,it,Ye),Zt=ae(zt,Mt,it,Ye);Ge=qe(Nt,[Zt,Ht,Mt],[-1,-1,Xe[yt[0]]])||Ge,At=!0}}),Ge}function ye(Nt,Lt,Xe,it){var Ye=!1,Ee=fe(Lt),Ge=[le(Ee[0][3],Xe,it),le(Ee[1][3],Xe,it),le(Ee[2][3],Xe,it),le(Ee[3][3],Xe,it)];if(!Ge[0]&&!Ge[1]&&!Ge[2]&&!Ge[3])return Ye;if(Ge[0]&&Ge[1]&&Ge[2]&&Ge[3])return l&&(Ye=se(Nt,Ee,Lt)||Ye),Ye;var Ke=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(qe){if(Ge[qe[0]]&&Ge[qe[1]]&&Ge[qe[2]]&&!Ge[qe[3]]){var At=Ee[qe[0]],yt=Ee[qe[1]],Mt=Ee[qe[2]],Gt=Ee[qe[3]];if(l)Ye=Q(Nt,[At,yt,Mt],[Lt[qe[0]],Lt[qe[1]],Lt[qe[2]]])||Ye;else{var zt=ae(Gt,At,Xe,it),Ht=ae(Gt,yt,Xe,it),Zt=ae(Gt,Mt,Xe,it);Ye=Q(null,[zt,Ht,Zt],[-1,-1,-1])||Ye}Ke=!0}}),Ke||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(qe){if(Ge[qe[0]]&&Ge[qe[1]]&&!Ge[qe[2]]&&!Ge[qe[3]]){var At=Ee[qe[0]],yt=Ee[qe[1]],Mt=Ee[qe[2]],Gt=Ee[qe[3]],zt=ae(Mt,At,Xe,it),Ht=ae(Mt,yt,Xe,it),Zt=ae(Gt,yt,Xe,it),Wt=ae(Gt,At,Xe,it);l?(Ye=Q(Nt,[At,Wt,zt],[Lt[qe[0]],-1,-1])||Ye,Ye=Q(Nt,[yt,Ht,Zt],[Lt[qe[1]],-1,-1])||Ye):Ye=oe(null,[zt,Ht,Zt,Wt],[-1,-1,-1,-1])||Ye,Ke=!0}}),Ke)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(qe){if(Ge[qe[0]]&&!Ge[qe[1]]&&!Ge[qe[2]]&&!Ge[qe[3]]){var At=Ee[qe[0]],yt=Ee[qe[1]],Mt=Ee[qe[2]],Gt=Ee[qe[3]],zt=ae(yt,At,Xe,it),Ht=ae(Mt,At,Xe,it),Zt=ae(Gt,At,Xe,it);l?(Ye=Q(Nt,[At,zt,Ht],[Lt[qe[0]],-1,-1])||Ye,Ye=Q(Nt,[At,Ht,Zt],[Lt[qe[0]],-1,-1])||Ye,Ye=Q(Nt,[At,Zt,zt],[Lt[qe[0]],-1,-1])||Ye):Ye=Q(null,[zt,Ht,Zt],[-1,-1,-1])||Ye,Ke=!0}}),Ye}function be(Nt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe,At,yt){var Mt=!1;return y&&(re(Nt,"A")&&(Mt=ye(null,[Lt,Xe,it,Ee],At,yt)||Mt),re(Nt,"B")&&(Mt=ye(null,[Xe,it,Ye,qe],At,yt)||Mt),re(Nt,"C")&&(Mt=ye(null,[Xe,Ee,Ge,qe],At,yt)||Mt),re(Nt,"D")&&(Mt=ye(null,[it,Ee,Ke,qe],At,yt)||Mt),re(Nt,"E")&&(Mt=ye(null,[Xe,it,Ee,qe],At,yt)||Mt)),l&&(Mt=ye(Nt,[Xe,it,Ee,qe],At,yt)||Mt),Mt}function ke(Nt,Lt,Xe,it,Ye,Ee,Ge,Ke){return[Ke[0]===!0?!0:xe(Nt,fe([Lt,Xe,it]),[Lt,Xe,it],Ee,Ge),Ke[1]===!0?!0:xe(Nt,fe([it,Ye,Lt]),[it,Ye,Lt],Ee,Ge)]}function De(Nt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe){return Ke?ke(Nt,Lt,Xe,Ye,it,Ee,Ge,qe):ke(Nt,Xe,Ye,it,Lt,Ee,Ge,qe)}function He(Nt,Lt,Xe,it,Ye,Ee,Ge){var Ke=!1,qe,At,yt,Mt,Gt=function(){Ke=xe(Nt,[qe,At,yt],[-1,-1,-1],Ye,Ee)||Ke,Ke=xe(Nt,[yt,Mt,qe],[-1,-1,-1],Ye,Ee)||Ke},zt=Ge[0],Ht=Ge[1],Zt=Ge[2];return zt&&(qe=$(fe([P(Lt,Xe-0,it-0)])[0],fe([P(Lt-1,Xe-0,it-0)])[0],zt),At=$(fe([P(Lt,Xe-0,it-1)])[0],fe([P(Lt-1,Xe-0,it-1)])[0],zt),yt=$(fe([P(Lt,Xe-1,it-1)])[0],fe([P(Lt-1,Xe-1,it-1)])[0],zt),Mt=$(fe([P(Lt,Xe-1,it-0)])[0],fe([P(Lt-1,Xe-1,it-0)])[0],zt),Gt()),Ht&&(qe=$(fe([P(Lt-0,Xe,it-0)])[0],fe([P(Lt-0,Xe-1,it-0)])[0],Ht),At=$(fe([P(Lt-0,Xe,it-1)])[0],fe([P(Lt-0,Xe-1,it-1)])[0],Ht),yt=$(fe([P(Lt-1,Xe,it-1)])[0],fe([P(Lt-1,Xe-1,it-1)])[0],Ht),Mt=$(fe([P(Lt-1,Xe,it-0)])[0],fe([P(Lt-1,Xe-1,it-0)])[0],Ht),Gt()),Zt&&(qe=$(fe([P(Lt-0,Xe-0,it)])[0],fe([P(Lt-0,Xe-0,it-1)])[0],Zt),At=$(fe([P(Lt-0,Xe-1,it)])[0],fe([P(Lt-0,Xe-1,it-1)])[0],Zt),yt=$(fe([P(Lt-1,Xe-1,it)])[0],fe([P(Lt-1,Xe-1,it-1)])[0],Zt),Mt=$(fe([P(Lt-1,Xe-0,it)])[0],fe([P(Lt-1,Xe-0,it-1)])[0],Zt),Gt()),Ke}function Ae(Nt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe,At,yt,Mt){var Gt=Nt;return Mt?(y&&Nt==="even"&&(Gt=null),be(Gt,Lt,Xe,it,Ye,Ee,Ge,Ke,qe,At,yt)):(y&&Nt==="odd"&&(Gt=null),be(Gt,qe,Ke,Ge,Ee,Ye,it,Xe,Lt,At,yt))}function Le(Nt,Lt,Xe,it,Ye){for(var Ee=[],Ge=0,Ke=0;Ke<Lt.length;Ke++)for(var qe=Lt[Ke],At=1;At<E;At++)for(var yt=1;yt<L;yt++)Ee.push(De(Nt,P(qe,yt-1,At-1),P(qe,yt-1,At),P(qe,yt,At-1),P(qe,yt,At),Xe,it,(qe+yt+At)%2,Ye&&Ye[Ge]?Ye[Ge]:[])),Ge++;return Ee}function Ze(Nt,Lt,Xe,it,Ye){for(var Ee=[],Ge=0,Ke=0;Ke<Lt.length;Ke++)for(var qe=Lt[Ke],At=1;At<h;At++)for(var yt=1;yt<E;yt++)Ee.push(De(Nt,P(At-1,qe,yt-1),P(At,qe,yt-1),P(At-1,qe,yt),P(At,qe,yt),Xe,it,(At+qe+yt)%2,Ye&&Ye[Ge]?Ye[Ge]:[])),Ge++;return Ee}function We(Nt,Lt,Xe,it,Ye){for(var Ee=[],Ge=0,Ke=0;Ke<Lt.length;Ke++)for(var qe=Lt[Ke],At=1;At<L;At++)for(var yt=1;yt<h;yt++)Ee.push(De(Nt,P(yt-1,At-1,qe),P(yt-1,At,qe),P(yt,At-1,qe),P(yt,At,qe),Xe,it,(yt+At+qe)%2,Ye&&Ye[Ge]?Ye[Ge]:[])),Ge++;return Ee}function ze(Nt,Lt,Xe){for(var it=1;it<E;it++)for(var Ye=1;Ye<L;Ye++)for(var Ee=1;Ee<h;Ee++)Ae(Nt,P(Ee-1,Ye-1,it-1),P(Ee-1,Ye-1,it),P(Ee-1,Ye,it-1),P(Ee-1,Ye,it),P(Ee,Ye-1,it-1),P(Ee,Ye-1,it),P(Ee,Ye,it-1),P(Ee,Ye,it),Lt,Xe,(Ee+Ye+it)%2)}function Ie(Nt,Lt,Xe){l=!0,ze(Nt,Lt,Xe),l=!1}function Ve(Nt,Lt,Xe){y=!0,ze(Nt,Lt,Xe),y=!1}function dt(Nt,Lt,Xe,it,Ye,Ee){for(var Ge=[],Ke=0,qe=0;qe<Lt.length;qe++)for(var At=Lt[qe],yt=1;yt<E;yt++)for(var Mt=1;Mt<L;Mt++)Ge.push(He(Nt,At,Mt,yt,Xe,it,Ye[qe],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return Ge}function Ft(Nt,Lt,Xe,it,Ye,Ee){for(var Ge=[],Ke=0,qe=0;qe<Lt.length;qe++)for(var At=Lt[qe],yt=1;yt<h;yt++)for(var Mt=1;Mt<E;Mt++)Ge.push(He(Nt,yt,At,Mt,Xe,it,Ye[qe],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return Ge}function Qt(Nt,Lt,Xe,it,Ye,Ee){for(var Ge=[],Ke=0,qe=0;qe<Lt.length;qe++)for(var At=Lt[qe],yt=1;yt<L;yt++)for(var Mt=1;Mt<h;Mt++)Ge.push(He(Nt,Mt,yt,At,Xe,it,Ye[qe],Ee&&Ee[Ke]?Ee[Ke]:[])),Ke++;return Ge}function Ot(Nt,Lt){for(var Xe=[],it=Nt;it<Lt;it++)Xe.push(it);return Xe}function Ct(){for(var Nt=0;Nt<h;Nt++)for(var Lt=0;Lt<L;Lt++)for(var Xe=0;Xe<E;Xe++){var it=P(Nt,Lt,Xe);ie(o._x[it],o._y[it],o._z[it],o._value[it])}}function jt(){X(),Ct();var Nt=null;if(g&&f&&(H(f),Ie(Nt,D,R)),b&&d){H(d);for(var Lt=o.surface.pattern,Xe=o.surface.count,it=0;it<Xe;it++){var Ye=Xe===1?.5:it/(Xe-1),Ee=(1-Ye)*D+Ye*R,Ge=Math.abs(Ee-F),Ke=Math.abs(Ee-I),qe=Ge>Ke?[F,Ee]:[Ee,I];Ve(Lt,qe[0],qe[1])}}var At=[[Math.min(D,I),Math.max(D,I)],[Math.min(F,R),Math.max(F,R)]];["x","y","z"].forEach(function(yt){for(var Mt=[],Gt=0;Gt<At.length;Gt++){var zt=0,Ht=At[Gt][0],Zt=At[Gt][1],Wt=o.slices[yt];if(Wt.show&&Wt.fill){H(Wt.fill);var sr=[],Gr=[],cn=[];if(Wt.locations.length)for(var qr=0;qr<Wt.locations.length;qr++){var st=a(Wt.locations[qr],yt==="x"?w:yt==="y"?p:_);st.distRatio===0?sr.push(st.id):st.id>0&&(Gr.push(st.id),yt==="x"?cn.push([st.distRatio,0,0]):yt==="y"?cn.push([0,st.distRatio,0]):cn.push([0,0,st.distRatio]))}else yt==="x"?sr=Ot(1,h-1):yt==="y"?sr=Ot(1,L-1):sr=Ot(1,E-1);Gr.length>0&&(yt==="x"?Mt[zt]=dt(Nt,Gr,Ht,Zt,cn,Mt[zt]):yt==="y"?Mt[zt]=Ft(Nt,Gr,Ht,Zt,cn,Mt[zt]):Mt[zt]=Qt(Nt,Gr,Ht,Zt,cn,Mt[zt]),zt++),sr.length>0&&(yt==="x"?Mt[zt]=Le(Nt,sr,Ht,Zt,Mt[zt]):yt==="y"?Mt[zt]=Ze(Nt,sr,Ht,Zt,Mt[zt]):Mt[zt]=We(Nt,sr,Ht,Zt,Mt[zt]),zt++)}var rr=o.caps[yt];rr.show&&rr.fill&&(H(rr.fill),yt==="x"?Mt[zt]=Le(Nt,[0,h-1],Ht,Zt,Mt[zt]):yt==="y"?Mt[zt]=Ze(Nt,[0,L-1],Ht,Zt,Mt[zt]):Mt[zt]=We(Nt,[0,E-1],Ht,Zt,Mt[zt]),zt++)}}),x===0&&X(),o._meshX=O,o._meshY=z,o._meshZ=G,o._meshIntensity=Y,o._Xs=w,o._Ys=p,o._Zs=_}return jt(),o}function s(o,b){var g=o.glplot.gl,d=m({gl:g}),f=new i(o,d,b.uid);return d._trace=f,f.update(b),o.glplot.add(d),f}N.exports={findNearestOnAxis:a,generateIsoMeshes:v,createIsosurfaceTrace:s}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(t,N,V){var m=t("../../lib"),u=t("../../registry"),A=t("./attributes"),T=t("../../components/colorscale/defaults");function e(i,n,r,v){function s(o,b){return m.coerce(i,n,A,o,b)}a(i,n,r,v,s)}function a(i,n,r,v,s){var o=s("isomin"),b=s("isomax");b!=null&&o!==void 0&&o!==null&&o>b&&(n.isomin=null,n.isomax=null);var g=s("x"),d=s("y"),f=s("z"),y=s("value");if(!g||!g.length||!d||!d.length||!f||!f.length||!y||!y.length){n.visible=!1;return}var l=u.getComponentMethod("calendars","handleTraceDefaults");l(i,n,["x","y","z"],v),s("valuehoverformat"),["x","y","z"].forEach(function(w){s(w+"hoverformat");var p="caps."+w,_=s(p+".show");_&&s(p+".fill");var h="slices."+w,L=s(h+".show");L&&(s(h+".fill"),s(h+".locations"))});var x=s("spaceframe.show");x&&s("spaceframe.fill");var c=s("surface.show");c&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var M=s("contour.show");M&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){s(w)}),T(i,n,v,s,{prefix:"",cLetter:"c"}),n._length=null}N.exports={supplyDefaults:e,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(t,N,V){var m=t("../../components/colorscale/attributes"),u=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../surface/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat;N.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:A({editType:"calc"}),xhoverformat:u("x"),yhoverformat:u("y"),zhoverformat:u("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},m("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:a({},T.lightposition.x,{dflt:1e5}),y:a({},T.lightposition.y,{dflt:1e5}),z:a({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"}),showlegend:a({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(t,N,V){var m=t("../../components/colorscale/calc");N.exports=function(A,T){T.intensity&&m(A,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(t,N,V){var m=t("../../../stackgl_modules").gl_mesh3d,u=t("../../../stackgl_modules").delaunay_triangulate,A=t("../../../stackgl_modules").alpha_shape,T=t("../../../stackgl_modules").convex_hull,e=t("../../lib/gl_format_color").parseColorScale,a=t("../../lib/str2rgbarray"),i=t("../../components/colorscale").extractOpts,n=t("../../plots/gl3d/zip3");function r(y,l,x){this.scene=y,this.uid=x,this.mesh=l,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var v=r.prototype;v.handlePick=function(y){if(y.object===this.mesh){var l=y.index=y.data.index;y.data._cellCenter?y.traceCoordinate=y.data.dataCoordinate:y.traceCoordinate=[this.data.x[l],this.data.y[l],this.data.z[l]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[l]!==void 0?y.textLabel=x[l]:x&&(y.textLabel=x),!0}};function s(y){for(var l=[],x=y.length,c=0;c<x;c++)l[c]=a(y[c]);return l}function o(y,l,x,c){for(var M=[],w=l.length,p=0;p<w;p++)M[p]=y.d2l(l[p],0,c)*x;return M}function b(y){for(var l=[],x=y.length,c=0;c<x;c++)l[c]=Math.round(y[c]);return l}function g(y,l){for(var x=["x","y","z"].indexOf(y),c=[],M=l.length,w=0;w<M;w++)c[w]=[l[w][(x+1)%3],l[w][(x+2)%3]];return u(c)}function d(y,l){for(var x=y.length,c=0;c<x;c++)if(y[c]<=-.5||y[c]>=l-.5)return!1;return!0}v.update=function(y){var l=this.scene,x=l.fullSceneLayout;this.data=y;var c=y.x.length,M=n(o(x.xaxis,y.x,l.dataScale[0],y.xcalendar),o(x.yaxis,y.y,l.dataScale[1],y.ycalendar),o(x.zaxis,y.z,l.dataScale[2],y.zcalendar)),w;if(y.i&&y.j&&y.k){if(y.i.length!==y.j.length||y.j.length!==y.k.length||!d(y.i,c)||!d(y.j,c)||!d(y.k,c))return;w=n(b(y.i),b(y.j),b(y.k))}else y.alphahull===0?w=T(M):y.alphahull>0?w=A(y.alphahull,M):w=g(y.delaunayaxis,M);var p={positions:M,cells:w,lightPosition:[y.lightposition.x,y.lightposition.y,y.lightposition.z],ambient:y.lighting.ambient,diffuse:y.lighting.diffuse,specular:y.lighting.specular,roughness:y.lighting.roughness,fresnel:y.lighting.fresnel,vertexNormalsEpsilon:y.lighting.vertexnormalsepsilon,faceNormalsEpsilon:y.lighting.facenormalsepsilon,opacity:y.opacity,contourEnable:y.contour.show,contourColor:a(y.contour.color).slice(0,3),contourWidth:y.contour.width,useFacetNormals:y.flatshading};if(y.intensity){var _=i(y);this.color="#fff";var h=y.intensitymode;p[h+"Intensity"]=y.intensity,p[h+"IntensityBounds"]=[_.min,_.max],p.colormap=e(y)}else y.vertexcolor?(this.color=y.vertexcolor[0],p.vertexColors=s(y.vertexcolor)):y.facecolor?(this.color=y.facecolor[0],p.cellColors=s(y.facecolor)):(this.color=y.color,p.meshColor=a(y.color));this.mesh.update(p)},v.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(y,l){var x=y.glplot.gl,c=m({gl:x}),M=new r(y,c,l.uid);return c._trace=M,M.update(l),y.glplot.add(c),M}N.exports=f},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("../../components/colorscale/defaults"),T=t("./attributes");N.exports=function(a,i,n,r){function v(d,f){return u.coerce(a,i,T,d,f)}function s(d){var f=d.map(function(y){var l=v(y);return l&&u.isArrayOrTypedArray(l)?l:null});return f.every(function(y){return y&&y.length===f[0].length})&&f}var o=s(["x","y","z"]);if(!o){i.visible=!1;return}if(s(["i","j","k"]),i.i&&(!i.j||!i.k)||i.j&&(!i.k||!i.i)||i.k&&(!i.i||!i.j)){i.visible=!1;return}var b=m.getComponentMethod("calendars","handleTraceDefaults");b(a,i,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(d){v(d)});var g=v("contour.show");g&&(v("contour.color"),v("contour.width")),"intensity"in a?(v("intensity"),v("intensitymode"),A(a,i,r,v,{prefix:"",cLetter:"c"})):(i.showscale=!1,"facecolor"in a?v("facecolor"):"vertexcolor"in a?v("vertexcolor"):v("color",n)),v("text"),v("hovertext"),v("hovertemplate"),v("xhoverformat"),v("yhoverformat"),v("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(t,N,V){var m=t("../../lib").extendFlat,u=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../components/drawing/attributes").dash,e=t("../../components/fx/attributes"),a=t("../../constants/delta.js"),i=a.INCREASING.COLOR,n=a.DECREASING.COLOR,r=u.line;function v(s){return{line:{color:m({},r.color,{dflt:s}),width:r.width,dash:T,editType:"style"},editType:"style"}}N.exports={xperiod:u.xperiod,xperiod0:u.xperiod0,xperiodalignment:u.xperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:m({},r.width,{}),dash:m({},T,{}),editType:"style"},increasing:v(i),decreasing:v(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:m({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(t,N,V){var m=t("../../lib"),u=m._,A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM;function a(v,s){var o=A.getFromId(v,s.xaxis),b=A.getFromId(v,s.yaxis),g=r(v,o,s),d=s._minDiff;s._minDiff=null;var f=s._origX;s._origX=null;var y=s._xcalc;s._xcalc=null;var l=n(v,s,f,y,b,i);return s._extremes[o._id]=A.findExtremes(o,y,{vpad:d/2}),l.length?(m.extendFlat(l[0].t,{wHover:d/2,tickLen:g}),l):[{t:{empty:!0}}]}function i(v,s,o,b){return{o:v,h:s,l:o,c:b}}function n(v,s,o,b,g,d){for(var f=g.makeCalcdata(s,"open"),y=g.makeCalcdata(s,"high"),l=g.makeCalcdata(s,"low"),x=g.makeCalcdata(s,"close"),c=Array.isArray(s.text),M=Array.isArray(s.hovertext),w=!0,p=null,_=!!s.xperiodalignment,h=[],L=0;L<b.length;L++){var E=b[L],S=f[L],P=y[L],F=l[L],I=x[L];if(E!==e&&S!==e&&P!==e&&F!==e&&I!==e){I===S?p!==null&&I!==p&&(w=I>p):w=I>S,p=I;var D=d(S,P,F,I);D.pos=E,D.yc=(S+I)/2,D.i=L,D.dir=w?"increasing":"decreasing",D.x=D.pos,D.y=[F,P],_&&(D.orig_p=o[L]),c&&(D.tx=s.text[L]),M&&(D.htx=s.hovertext[L]),h.push(D)}else h.push({pos:E,empty:!0})}return s._extremes[g._id]=A.findExtremes(g,m.concat(l,y),{padded:!0}),h.length&&(h[0].t={labels:{open:u(v,"open:")+" ",high:u(v,"high:")+" ",low:u(v,"low:")+" ",close:u(v,"close:")+" "}}),h}function r(v,s,o){var b=o._minDiff;if(!b){var g=v._fullData,d=[];b=1/0;var f;for(f=0;f<g.length;f++){var y=g[f];if(y.type==="ohlc"&&y.visible===!0&&y.xaxis===s._id){d.push(y);var l=s.makeCalcdata(y,"x");y._origX=l;var x=T(o,s,"x",l).vals;y._xcalc=x;var c=m.distinctVals(x).minDiff;c&&isFinite(c)&&(b=Math.min(b,c))}}for(b===1/0&&(b=1),f=0;f<d.length;f++)d[f]._minDiff=b}return b*o.tickwidth}N.exports={calc:a,calcCommon:n}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(t,N,V){var m=t("../../lib"),u=t("./ohlc_defaults"),A=t("../scatter/period_defaults"),T=t("./attributes");N.exports=function(i,n,r,v){function s(b,g){return m.coerce(i,n,T,b,g)}var o=u(i,n,s,v);if(!o){n.visible=!1;return}A(i,n,v,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),e(i,n,s,"increasing"),e(i,n,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),v._requestRangeslider[n.xaxis]=!0};function e(a,i,n,r){n(r+".line.color"),n(r+".line.width",i.line.width),n(r+".line.dash",i.line.dash)}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../lib"),A=t("../../components/fx"),T=t("../../components/color"),e=t("../../lib").fillText,a=t("../../constants/delta.js"),i={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function n(o,b,g,d){var f=o.cd,y=f[0].trace;return y.hoverlabel.split?v(o,b,g,d):s(o,b,g,d)}function r(o,b,g,d){var f=o.cd,y=o.xa,l=f[0].trace,x=f[0].t,c=l.type,M=c==="ohlc"?"l":"min",w=c==="ohlc"?"h":"max",p,_,h=x.bPos||0,L=function(ee){return ee.pos+h-b},E=x.bdPos||x.tickLen,S=x.wHover,P=Math.min(1,E/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));p=o.maxHoverDistance-P,_=o.maxSpikeDistance-P;function F(ee){var j=L(ee);return A.inbox(j-S,j+S,p)}function I(ee){var j=ee[M],X=ee[w];return j===X||A.inbox(j-g,X-g,p)}function D(ee){return(F(ee)+I(ee))/2}var R=A.getDistanceFunction(d,F,I,D);if(A.getClosest(f,R,o),o.index===!1)return null;var O=f[o.index];if(O.empty)return null;var z=O.dir,G=l[z],Y=G.line.color;return T.opacity(Y)&&G.line.width?o.color=Y:o.color=G.fillcolor,o.x0=y.c2p(O.pos+h-E,!0),o.x1=y.c2p(O.pos+h+E,!0),o.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,o.spikeDistance=D(O)*_/p,o.xSpike=y.c2p(O.pos,!0),o}function v(o,b,g,d){var f=o.cd,y=o.ya,l=f[0].trace,x=f[0].t,c=[],M=r(o,b,g,d);if(!M)return[];var w=M.index,p=f[w],_=p.hi||l.hoverinfo,h=_.split("+"),L=_==="all",E=L||h.indexOf("y")!==-1;if(!E)return[];for(var S=["high","open","close","low"],P={},F=0;F<S.length;F++){var I=S[F],D=l[I][M.index],R=y.c2p(D,!0),O;D in P?(O=P[D],O.yLabel+="<br>"+x.labels[I]+m.hoverLabelText(y,D,l.yhoverformat)):(O=u.extendFlat({},M),O.y0=O.y1=R,O.yLabelVal=D,O.yLabel=x.labels[I]+m.hoverLabelText(y,D,l.yhoverformat),O.name="",c.push(O),P[D]=O)}return c}function s(o,b,g,d){var f=o.cd,y=o.ya,l=f[0].trace,x=f[0].t,c=r(o,b,g,d);if(!c)return[];var M=c.index,w=f[M],p=c.index=w.i,_=w.dir;function h(D){return x.labels[D]+m.hoverLabelText(y,l[D][p],l.yhoverformat)}var L=w.hi||l.hoverinfo,E=L.split("+"),S=L==="all",P=S||E.indexOf("y")!==-1,F=S||E.indexOf("text")!==-1,I=P?[h("open"),h("high"),h("low"),h("close")+"  "+i[_]]:[];return F&&e(w,l,I),c.extraText=I.join("<br>"),c.y0=c.y1=y.c2p(w.yc,!0),[c]}N.exports={hoverPoints:n,hoverSplit:v,hoverOnPoints:s}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(t,N,V){N.exports={moduleType:"trace",name:"ohlc",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc").calc,plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(t,N,V){var m=t("../../registry"),u=t("../../lib");N.exports=function(T,e,a,i){var n=a("x"),r=a("open"),v=a("high"),s=a("low"),o=a("close");a("hoverlabel.split");var b=m.getComponentMethod("calendars","handleTraceDefaults");if(b(T,e,["x"],i),!!(r&&v&&s&&o)){var g=Math.min(r.length,v.length,s.length,o.length);return n&&(g=Math.min(g,u.minRowLength(n))),e._length=g,g}}},{"../../lib":515,"../../registry":647}],887:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib");N.exports=function(T,e,a,i){var n=e.yaxis,r=e.xaxis,v=!!r.rangebreaks;u.makeTraceGroups(i,a,"trace ohlc").each(function(s){var o=m.select(this),b=s[0],g=b.t,d=b.trace;if(d.visible!==!0||g.empty){o.remove();return}var f=g.tickLen,y=o.selectAll("path").data(u.identity);y.enter().append("path"),y.exit().remove(),y.attr("d",function(l){if(l.empty)return"M0,0Z";var x=r.c2p(l.pos-f,!0),c=r.c2p(l.pos+f,!0),M=v?(x+c)/2:r.c2p(l.pos,!0),w=n.c2p(l.o,!0),p=n.c2p(l.h,!0),_=n.c2p(l.l,!0),h=n.c2p(l.c,!0);return"M"+x+","+w+"H"+M+"M"+M+","+p+"V"+_+"M"+c+","+h+"H"+M})})}},{"../../lib":515,"@plotly/d3":58}],888:[function(t,N,V){N.exports=function(u,A){var T=u.cd,e=u.xaxis,a=u.yaxis,i=[],n,r=T[0].t.bPos||0;if(A===!1)for(n=0;n<T.length;n++)T[n].selected=0;else for(n=0;n<T.length;n++){var v=T[n];A.contains([e.c2p(v.pos+r),a.c2p(v.yc)],null,v.i,u)?(i.push({pointNumber:v.i,x:e.c2d(v.pos),y:a.c2d(v.yc)}),v.selected=1):v.selected=0}return i}},{}],889:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/drawing"),A=t("../../components/color");N.exports=function(e,a,i){var n=i||m.select(e).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var v=r[0].trace;m.select(this).selectAll("path").each(function(s){if(!s.empty){var o=v[s.dir].line;m.select(this).style("fill","none").call(A.stroke,o.color).call(u.dashLine,o.dash,o.width).style("opacity",v.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(t,N,V){var m=t("../../lib/extend").extendFlat,u=t("../../plots/attributes"),A=t("../../plots/font_attributes"),T=t("../../components/colorscale/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/domain").attributes,i=m({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});N.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:m({},u.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:A({editType:"calc"}),tickfont:A({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:i,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(t,N,V){var m=t("../../plots/get_data").getModuleCalcData,u=t("./plot"),A="parcats";V.name=A,V.plot=function(T,e,a,i){var n=m(T.calcdata,A);if(n.length){var r=n[0];u(T,r,a,i)}},V.clean=function(T,e,a,i){var n=i._has&&i._has("parcats"),r=e._has&&e._has("parcats");n&&!r&&i._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(t,N,V){var m=t("../../lib/gup").wrap,u=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/calc"),T=t("../../lib/filter_unique.js"),e=t("../../components/drawing"),a=t("../../lib"),i=t("fast-isnumeric");N.exports=function(x,c){var M=a.filterVisible(c.dimensions);if(M.length===0)return[];var w=M.map(function(K){var $;if(K.categoryorder==="trace")$=null;else if(K.categoryorder==="array")$=K.categoryarray;else{$=T(K.values);for(var U=!0,H=0;H<$.length;H++)if(!i($[H])){U=!1;break}$.sort(U?a.sorterAsc:void 0),K.categoryorder==="category descending"&&($=$.reverse())}return g(K.values,$)}),p,_,h;a.isArrayOrTypedArray(c.counts)?p=c.counts:p=[c.counts],d(M),M.forEach(function(K,$){f(K,w[$])});var L=c.line,E;L?(u(c,"line")&&A(x,c,{vals:c.line.color,containerStr:"line",cLetter:"c"}),E=e.tryColorscale(L)):E=a.identity;function S(K){var $,U;return a.isArrayOrTypedArray(L.color)?($=L.color[K%L.color.length],U=$):$=L.color,{color:E($),rawColor:U}}var P=M[0].values.length,F={},I=w.map(function(K){return K.inds});h=0;var D,R;for(D=0;D<P;D++){var O=[];for(R=0;R<I.length;R++)O.push(I[R][D]);_=p[D%p.length],h+=_;var z=S(D),G=O+"-"+z.rawColor;F[G]===void 0&&(F[G]=o(O,z.color,z.rawColor)),b(F[G],D,_)}var Y=M.map(function(K,$){return r($,K._index,K._displayindex,K.label,h)});for(D=0;D<P;D++)for(_=p[D%p.length],R=0;R<Y.length;R++){var ee=Y[R].containerInd,j=w[R].inds[D],X=Y[R].categories;if(X[j]===void 0){var ie=c.dimensions[ee]._categoryarray[j],he=c.dimensions[ee]._ticktext[j];X[j]=v(R,j,ie,he)}s(X[j],D,_)}return m(n(Y,F,h))};function n(l,x,c){var M=l.map(function(w){return w.categories.length}).reduce(function(w,p){return Math.max(w,p)});return{dimensions:l,paths:x,trace:void 0,maxCats:M,count:c}}function r(l,x,c,M,w){return{dimensionInd:l,containerInd:x,displayInd:c,dimensionLabel:M,count:w,categories:[],dragX:null}}function v(l,x,c,M){return{dimensionInd:l,categoryInd:x,categoryValue:c,displayInd:x,categoryLabel:M,valueInds:[],count:0,dragY:null}}function s(l,x,c){l.valueInds.push(x),l.count+=c}function o(l,x,c){return{categoryInds:l,color:x,rawColor:c,valueInds:[],count:0}}function b(l,x,c){l.valueInds.push(x),l.count+=c}function g(l,x){x==null?x=[]:x=x.map(function(E){return E});var c={},M={},w=[];x.forEach(function(E,S){c[E]=0,M[E]=S});for(var p=0;p<l.length;p++){var _=l[p],h;c[_]===void 0?(c[_]=1,h=x.push(_)-1,M[_]=h):(c[_]++,h=M[_]),w.push(h)}var L=x.map(function(E){return c[E]});return{uniqueValues:x,uniqueCounts:L,inds:w}}function d(l){var x=l.map(function(M){return M.displayindex}),c;if(y(x))for(c=0;c<l.length;c++)l[c]._displayindex=l[c].displayindex;else for(c=0;c<l.length;c++)l[c]._displayindex=c}function f(l,x){l._categoryarray=x.uniqueValues,l.ticktext===null||l.ticktext===void 0?l._ticktext=[]:l._ticktext=l.ticktext.slice();for(var c=l._ticktext.length;c<x.uniqueValues.length;c++)l._ticktext.push(x.uniqueValues[c])}function y(l){for(var x=new Array(l.length),c=0;c<l.length;c++){if(l[c]<0||l[c]>=l.length||x[l[c]]!==void 0)return!1;x[l[c]]=!0}return!0}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(t,N,V){var m=t("../../lib"),u=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),a=t("./attributes"),i=t("../parcoords/merge_length");function n(v,s,o,b,g){g("line.shape"),g("line.hovertemplate");var d=g("line.color",b.colorway[0]);if(u(v,"line")&&m.isArrayOrTypedArray(d)){if(d.length)return g("line.colorscale"),A(v,s,b,g,{prefix:"line.",cLetter:"c"}),d.length;s.line.color=o}return 1/0}function r(v,s){function o(x,c){return m.coerce(v,s,a.dimensions,x,c)}var b=o("values"),g=o("visible");if(b&&b.length||(g=s.visible=!1),g){o("label"),o("displayindex",s._index);var d=v.categoryarray,f=Array.isArray(d)&&d.length>0,y;f&&(y="array");var l=o("categoryorder",y);l==="array"?(o("categoryarray"),o("ticktext")):(delete v.categoryarray,delete v.ticktext),!f&&l==="array"&&(s.categoryorder="trace")}}N.exports=function(s,o,b,g){function d(c,M){return m.coerce(s,o,a,c,M)}var f=e(s,o,{name:"dimensions",handleItemDefaults:r}),y=n(s,o,b,g,d);T(o,g,d),(!Array.isArray(f)||!f.length)&&(o.visible=!1),i(o,f,"values",y),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var l={family:g.font.family,size:Math.round(g.font.size),color:g.font.color};m.coerceFont(d,"labelfont",l);var x={family:g.font.family,size:Math.round(g.font.size/1.2),color:g.font.color};m.coerceFont(d,"tickfont",x)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(t,N,V){var m=t("@plotly/d3"),u=t("d3-interpolate").interpolateNumber,A=t("../../plot_api/plot_api"),T=t("../../components/fx"),e=t("../../lib"),a=e.strTranslate,i=t("../../components/drawing"),n=t("tinycolor2"),r=t("../../lib/svg_text_utils");function v(H,q,re,Z){var Q=q._context.staticPlot,oe=H.map(ie.bind(0,q,re)),se=Z.selectAll("g.parcatslayer").data([null]);se.enter().append("g").attr("class","parcatslayer").style("pointer-events",Q?"none":"all");var ae=se.selectAll("g.trace.parcats").data(oe,s),le=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(Le){return a(Le.x,Le.y)}),le.append("g").attr("class","paths");var _e=ae.select("g.paths"),fe=_e.selectAll("path.path").data(function(Le){return Le.paths},s);fe.attr("fill",function(Le){return Le.model.color});var me=fe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Le){return Le.model.color}).attr("fill-opacity",0);x(me),fe.attr("d",function(Le){return Le.svgD}),me.empty()||fe.sort(b),fe.exit().remove(),fe.on("mouseover",g).on("mouseout",d).on("click",l),le.append("g").attr("class","dimensions");var xe=ae.select("g.dimensions"),ye=xe.selectAll("g.dimension").data(function(Le){return Le.dimensions},s);ye.enter().append("g").attr("class","dimension"),ye.attr("transform",function(Le){return a(Le.x,0)}),ye.exit().remove();var be=ye.selectAll("g.category").data(function(Le){return Le.categories},s),ke=be.enter().append("g").attr("class","category");be.attr("transform",function(Le){return a(0,Le.y)}),ke.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(Le){return Le.width}).attr("height",function(Le){return Le.height}),w(ke);var De=be.selectAll("rect.bandrect").data(function(Le){return Le.bands},s);De.each(function(){e.raiseToTop(this)}),De.attr("fill",function(Le){return Le.color});var He=De.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Le){return Le.color}).attr("fill-opacity",0);De.attr("fill",function(Le){return Le.color}).attr("width",function(Le){return Le.width}).attr("height",function(Le){return Le.height}).attr("y",function(Le){return Le.y}).attr("cursor",function(Le){return Le.parcatsViewModel.arrangement==="fixed"?"default":Le.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),_(He),De.exit().remove(),ke.append("text").attr("class","catlabel").attr("pointer-events","none");var Ae=q._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(Le){return o(Le)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Ae)).style("fill","rgb(0, 0, 0)").attr("x",function(Le){return o(Le)?Le.width+5:-5}).attr("y",function(Le){return Le.height/2}).text(function(Le){return Le.model.categoryLabel}).each(function(Le){i.font(m.select(this),Le.parcatsViewModel.categorylabelfont),r.convertToTspans(m.select(this),q)}),ke.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Le){return Le.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Le){return Le.width/2}).attr("y",-5).text(function(Le,Ze){return Ze===0?Le.parcatsViewModel.model.dimensions[Le.model.dimensionInd].dimensionLabel:null}).each(function(Le){i.font(m.select(this),Le.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",O),be.exit().remove(),ye.call(m.behavior.drag().origin(function(Le){return{x:Le.x,y:0}}).on("dragstart",z).on("drag",G).on("dragend",Y)),ae.each(function(Le){Le.traceSelection=m.select(this),Le.pathSelection=m.select(this).selectAll("g.paths").selectAll("path.path"),Le.dimensionSelection=m.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}N.exports=function(H,q,re,Z){v(re,H,Z,q)};function s(H){return H.key}function o(H){var q=H.parcatsViewModel.dimensions.length,re=H.parcatsViewModel.dimensions[q-1].model.dimensionInd;return H.model.dimensionInd===re}function b(H,q){return H.model.rawColor>q.model.rawColor?1:H.model.rawColor<q.model.rawColor?-1:0}function g(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),c(m.select(this));var q=f(H),re=y(H);if(H.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:m.event,constraints:re}),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z=m.mouse(this)[0],Q=H.parcatsViewModel.graphDiv,oe=H.parcatsViewModel.trace,se=Q._fullLayout,ae=se._paperdiv.node().getBoundingClientRect(),le=H.parcatsViewModel.graphDiv.getBoundingClientRect(),_e,fe,me;for(me=0;me<H.leftXs.length-1;me++)if(H.leftXs[me]+H.dimWidths[me]-2<=Z&&Z<=H.leftXs[me+1]+2){var xe=H.parcatsViewModel.dimensions[me],ye=H.parcatsViewModel.dimensions[me+1];_e=(xe.x+xe.width+ye.x)/2,fe=(H.topYs[me]+H.topYs[me+1]+H.height)/2;break}var be=H.parcatsViewModel.x+_e,ke=H.parcatsViewModel.y+fe,De=n.mostReadable(H.model.color,["black","white"]),He=H.model.count,Ae=He/H.parcatsViewModel.model.count,Le={countLabel:He,probabilityLabel:Ae.toFixed(3)},Ze=[];H.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ze.push(["Count:",Le.countLabel].join(" ")),H.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ze.push(["P:",Le.probabilityLabel].join(" "));var We=Ze.join("<br>"),ze=m.mouse(Q)[0];T.loneHover({trace:oe,x:be-ae.left+le.left,y:ke-ae.top+le.top,text:We,color:H.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:De,idealAlign:ze<be?"right":"left",hovertemplate:(oe.line||{}).hovertemplate,hovertemplateLabels:Le,eventData:[{data:oe._input,fullData:oe,count:He,probability:Ae}]},{container:se._hoverlayer.node(),outerContainer:se._paper.node(),gd:Q})}}}function d(H){if(!H.parcatsViewModel.dragDimension&&(x(m.select(this)),T.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),H.parcatsViewModel.pathSelection.sort(b),H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var q=f(H),re=y(H);H.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:m.event,constraints:re})}}function f(H){for(var q=[],re=ee(H.parcatsViewModel),Z=0;Z<H.model.valueInds.length;Z++){var Q=H.model.valueInds[Z];q.push({curveNumber:re,pointNumber:Q})}return q}function y(H){for(var q={},re=H.parcatsViewModel.model.dimensions,Z=0;Z<re.length;Z++){var Q=re[Z],oe=Q.categories[H.model.categoryInds[Z]];q[Q.containerInd]=oe.categoryValue}return H.model.rawColor!==void 0&&(q.color=H.model.rawColor),q}function l(H){if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=f(H),re=y(H);H.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:m.event,constraints:re})}}function x(H){H.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function c(H){H.attr("fill-opacity",.8).attr("stroke",function(q){return n.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function M(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function p(H){H.attr("stroke","black").attr("stroke-width",1.5)}function _(H){H.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function h(H){var q=H.parcatsViewModel.pathSelection,re=H.categoryViewModel.model.dimensionInd,Z=H.categoryViewModel.model.categoryInd;return q.filter(function(Q){return Q.model.categoryInds[re]===Z&&Q.model.color===H.color})}function L(H){var q=m.select(H.parentNode).selectAll("rect.bandrect");q.each(function(re){var Z=h(re);c(Z),Z.each(function(){e.raiseToTop(this)})}),M(m.select(H.parentNode))}function E(H){var q=m.select(H).datum(),re=h(q);c(re),re.each(function(){e.raiseToTop(this)}),m.select(H.parentNode).selectAll("rect.bandrect").filter(function(Z){return Z.color===q.color}).each(function(){e.raiseToTop(this),p(m.select(this))})}function S(H,q,re){var Z=m.select(H).datum(),Q=Z.categoryViewModel.model,oe=Z.parcatsViewModel.graphDiv,se=m.select(H.parentNode).selectAll("rect.bandrect"),ae=[];se.each(function(_e){var fe=h(_e);fe.each(function(me){Array.prototype.push.apply(ae,f(me))})});var le={};le[Q.dimensionInd]=Q.categoryValue,oe.emit(q,{points:ae,event:re,constraints:le})}function P(H,q,re){var Z=m.select(H).datum(),Q=Z.categoryViewModel.model,oe=Z.parcatsViewModel.graphDiv,se=h(Z),ae=[];se.each(function(_e){Array.prototype.push.apply(ae,f(_e))});var le={};le[Q.dimensionInd]=Q.categoryValue,Z.rawColor!==void 0&&(le.color=Z.rawColor),oe.emit(q,{points:ae,event:re,constraints:le})}function F(H,q,re){H._fullLayout._calcInverseTransform(H);var Z=H._fullLayout._invScaleX,Q=H._fullLayout._invScaleY,oe=m.select(re.parentNode).select("rect.catrect"),se=oe.node().getBoundingClientRect(),ae=oe.datum(),le=ae.parcatsViewModel,_e=le.model.dimensions[ae.model.dimensionInd],fe=le.trace,me=se.top+se.height/2,xe,ye;le.dimensions.length>1&&_e.displayInd===le.dimensions.length-1?(xe=se.left,ye="left"):(xe=se.left+se.width,ye="right");var be=ae.model.count,ke=ae.model.categoryLabel,De=be/ae.parcatsViewModel.model.count,He={countLabel:be,categoryLabel:ke,probabilityLabel:De.toFixed(3)},Ae=[];ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ae.push(["Count:",He.countLabel].join(" ")),ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ae.push(["P("+He.categoryLabel+"):",He.probabilityLabel].join(" "));var Le=Ae.join("<br>");return{trace:fe,x:Z*(xe-q.left),y:Q*(me-q.top),text:Le,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ye,hovertemplate:fe.hovertemplate,hovertemplateLabels:He,eventData:[{data:fe._input,fullData:fe,count:be,category:ke,probability:De}]}}function I(H,q,re){var Z=[];return m.select(re.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Q=this;Z.push(F(H,q,Q))}),Z}function D(H,q,re){H._fullLayout._calcInverseTransform(H);var Z=H._fullLayout._invScaleX,Q=H._fullLayout._invScaleY,oe=re.getBoundingClientRect(),se=m.select(re).datum(),ae=se.categoryViewModel,le=ae.parcatsViewModel,_e=le.model.dimensions[ae.model.dimensionInd],fe=le.trace,me=oe.y+oe.height/2,xe,ye;le.dimensions.length>1&&_e.displayInd===le.dimensions.length-1?(xe=oe.left,ye="left"):(xe=oe.left+oe.width,ye="right");var be=ae.model.categoryLabel,ke=se.parcatsViewModel.model.count,De=0;se.categoryViewModel.bands.forEach(function(Ft){Ft.color===se.color&&(De+=Ft.count)});var He=ae.model.count,Ae=0;le.pathSelection.each(function(Ft){Ft.model.color===se.color&&(Ae+=Ft.model.count)});var Le=De/ke,Ze=De/Ae,We=De/He,ze={countLabel:ke,categoryLabel:be,probabilityLabel:Le.toFixed(3)},Ie=[];ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ie.push(["Count:",ze.countLabel].join(" ")),ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ie.push("P(color \u2229 "+be+"): "+ze.probabilityLabel),Ie.push("P("+be+" | color): "+Ze.toFixed(3)),Ie.push("P(color | "+be+"): "+We.toFixed(3)));var Ve=Ie.join("<br>"),dt=n.mostReadable(se.color,["black","white"]);return{trace:fe,x:Z*(xe-q.left),y:Q*(me-q.top),text:Ve,color:se.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:ye,hovertemplate:fe.hovertemplate,hovertemplateLabels:ze,eventData:[{data:fe._input,fullData:fe,category:be,count:ke,probability:Le,categorycount:He,colorcount:Ae,bandcolorcount:De}]}}function R(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=m.mouse(this)[1];if(q<-1)return;var re=H.parcatsViewModel.graphDiv,Z=re._fullLayout,Q=Z._paperdiv.node().getBoundingClientRect(),oe=H.parcatsViewModel.hoveron,se=this;if(oe==="color"?(E(se),P(se,"plotly_hover",m.event)):(L(se),S(se,"plotly_hover",m.event)),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ae;oe==="category"?ae=F(re,Q,se):oe==="color"?ae=D(re,Q,se):oe==="dimension"&&(ae=I(re,Q,se)),ae&&T.loneHover(ae,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:re})}}}function O(H){var q=H.parcatsViewModel;if(!q.dragDimension&&(x(q.pathSelection),w(q.dimensionSelection.selectAll("g.category")),_(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(b),q.hoverinfoItems.indexOf("skip")===-1)){var re=H.parcatsViewModel.hoveron,Z=this;re==="color"?P(Z,"plotly_unhover",m.event):S(Z,"plotly_unhover",m.event)}}function z(H){H.parcatsViewModel.arrangement!=="fixed"&&(H.dragDimensionDisplayInd=H.model.displayInd,H.initialDragDimensionDisplayInds=H.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),H.dragHasMoved=!1,H.dragCategoryDisplayInd=null,m.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var re=m.mouse(this)[0],Z=m.mouse(this)[1];-2<=re&&re<=q.width+2&&-2<=Z&&Z<=q.height+2&&(H.dragCategoryDisplayInd=q.model.displayInd,H.initialDragCategoryDisplayInds=H.model.categories.map(function(Q){return Q.displayInd}),q.model.dragY=q.y,e.raiseToTop(this.parentNode),m.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<Z&&Z<=Q.y+Q.height&&(H.potentialClickBand=this)}))}),H.parcatsViewModel.dragDimension=H,T.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function G(H){if(H.parcatsViewModel.arrangement!=="fixed"&&(H.dragHasMoved=!0,H.dragDimensionDisplayInd!==null)){var q=H.dragDimensionDisplayInd,re=q-1,Z=q+1,Q=H.parcatsViewModel.dimensions[q];if(H.dragCategoryDisplayInd!==null){var oe=Q.categories[H.dragCategoryDisplayInd];oe.model.dragY+=m.event.dy;var se=oe.model.dragY,ae=oe.model.displayInd,le=Q.categories,_e=le[ae-1],fe=le[ae+1];_e!==void 0&&se<_e.y+_e.height/2&&(oe.model.displayInd=_e.model.displayInd,_e.model.displayInd=ae),fe!==void 0&&se+oe.height>fe.y+fe.height/2&&(oe.model.displayInd=fe.model.displayInd,fe.model.displayInd=ae),H.dragCategoryDisplayInd=oe.model.displayInd}if(H.dragCategoryDisplayInd===null||H.parcatsViewModel.arrangement==="freeform"){Q.model.dragX=m.event.x;var me=H.parcatsViewModel.dimensions[re],xe=H.parcatsViewModel.dimensions[Z];me!==void 0&&Q.model.dragX<me.x+me.width&&(Q.model.displayInd=me.model.displayInd,me.model.displayInd=q),xe!==void 0&&Q.model.dragX+Q.width>xe.x&&(Q.model.displayInd=xe.model.displayInd,xe.model.displayInd=H.dragDimensionDisplayInd),H.dragDimensionDisplayInd=Q.model.displayInd}$(H.parcatsViewModel),K(H.parcatsViewModel),X(H.parcatsViewModel),j(H.parcatsViewModel)}}function Y(H){if(H.parcatsViewModel.arrangement!=="fixed"&&H.dragDimensionDisplayInd!==null){m.select(this).selectAll("text").attr("font-weight","normal");var q={},re=ee(H.parcatsViewModel),Z=H.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),Q=H.initialDragDimensionDisplayInds.some(function(xe,ye){return xe!==Z[ye]});Q&&Z.forEach(function(xe,ye){var be=H.parcatsViewModel.model.dimensions[ye].containerInd;q["dimensions["+be+"].displayindex"]=xe});var oe=!1;if(H.dragCategoryDisplayInd!==null){var se=H.model.categories.map(function(xe){return xe.displayInd});if(oe=H.initialDragCategoryDisplayInds.some(function(xe,ye){return xe!==se[ye]}),oe){var ae=H.model.categories.slice().sort(function(xe,ye){return xe.displayInd-ye.displayInd}),le=ae.map(function(xe){return xe.categoryValue}),_e=ae.map(function(xe){return xe.categoryLabel});q["dimensions["+H.model.containerInd+"].categoryarray"]=[le],q["dimensions["+H.model.containerInd+"].ticktext"]=[_e],q["dimensions["+H.model.containerInd+"].categoryorder"]="array"}}if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!H.dragHasMoved&&H.potentialClickBand&&(H.parcatsViewModel.hoveron==="color"?P(H.potentialClickBand,"plotly_click",m.event.sourceEvent):S(H.potentialClickBand,"plotly_click",m.event.sourceEvent)),H.model.dragX=null,H.dragCategoryDisplayInd!==null){var fe=H.parcatsViewModel.dimensions[H.dragDimensionDisplayInd].categories[H.dragCategoryDisplayInd];fe.model.dragY=null,H.dragCategoryDisplayInd=null}H.dragDimensionDisplayInd=null,H.parcatsViewModel.dragDimension=null,H.dragHasMoved=null,H.potentialClickBand=null,$(H.parcatsViewModel),K(H.parcatsViewModel);var me=m.transition().duration(300).ease("cubic-in-out");me.each(function(){X(H.parcatsViewModel,!0),j(H.parcatsViewModel,!0)}).each("end",function(){(Q||oe)&&A.restyle(H.parcatsViewModel.graphDiv,q,[re])})}}function ee(H){for(var q,re=H.graphDiv._fullData,Z=0;Z<re.length;Z++)if(H.key===re[Z].uid){q=Z;break}return q}function j(H,q){q===void 0&&(q=!1);function re(Z){return q?Z.transition():Z}H.pathSelection.data(function(Z){return Z.paths},s),re(H.pathSelection).attr("d",function(Z){return Z.svgD})}function X(H,q){q===void 0&&(q=!1);function re(le){return q?le.transition():le}H.dimensionSelection.data(function(le){return le.dimensions},s);var Z=H.dimensionSelection.selectAll("g.category").data(function(le){return le.categories},s);re(H.dimensionSelection).attr("transform",function(le){return a(le.x,0)}),re(Z).attr("transform",function(le){return a(0,le.y)});var Q=Z.select(".dimlabel");Q.text(function(le,_e){return _e===0?le.parcatsViewModel.model.dimensions[le.model.dimensionInd].dimensionLabel:null});var oe=Z.select(".catlabel");oe.attr("text-anchor",function(le){return o(le)?"start":"end"}).attr("x",function(le){return o(le)?le.width+5:-5}).each(function(le){var _e,fe;o(le)?(_e=le.width+5,fe="start"):(_e=-5,fe="end"),m.select(this).selectAll("tspan").attr("x",_e).attr("text-anchor",fe)});var se=Z.selectAll("rect.bandrect").data(function(le){return le.bands},s),ae=se.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(le){return le.color}).attr("fill-opacity",0);se.attr("fill",function(le){return le.color}).attr("width",function(le){return le.width}).attr("height",function(le){return le.height}).attr("y",function(le){return le.y}),_(ae),se.each(function(){e.raiseToTop(this)}),se.exit().remove()}function ie(H,q,re){var Z=re[0],Q=q.margin||{l:80,r:80,t:100,b:80},oe=Z.trace,se=oe.domain,ae=q.width,le=q.height,_e=Math.floor(ae*(se.x[1]-se.x[0])),fe=Math.floor(le*(se.y[1]-se.y[0])),me=se.x[0]*ae+Q.l,xe=q.height-se.y[1]*q.height+Q.t,ye=oe.line.shape,be;oe.hoverinfo==="all"?be=["count","probability"]:be=(oe.hoverinfo||"").split("+");var ke={trace:oe,key:oe.uid,model:Z,x:me,y:xe,width:_e,height:fe,hoveron:oe.hoveron,hoverinfoItems:be,arrangement:oe.arrangement,bundlecolors:oe.bundlecolors,sortpaths:oe.sortpaths,labelfont:oe.labelfont,categorylabelfont:oe.tickfont,pathShape:ye,dragDimension:null,margin:Q,paths:[],dimensions:[],graphDiv:H,traceSelection:null,pathSelection:null,dimensionSelection:null};return Z.dimensions&&($(ke),K(ke)),ke}function he(H,q,re,Z,Q){var oe=[],se=[],ae,le;for(le=0;le<re.length-1;le++)ae=u(re[le]+H[le],H[le+1]),oe.push(ae(Q)),se.push(ae(1-Q));var _e="M "+H[0]+","+q[0];for(_e+="l"+re[0]+",0 ",le=1;le<re.length;le++)_e+="C"+oe[le-1]+","+q[le-1]+" "+se[le-1]+","+q[le]+" "+H[le]+","+q[le],_e+="l"+re[le]+",0 ";for(_e+="l0,"+Z+" ",_e+="l -"+re[re.length-1]+",0 ",le=re.length-2;le>=0;le--)_e+="C"+se[le]+","+(q[le+1]+Z)+" "+oe[le]+","+(q[le]+Z)+" "+(H[le]+re[le])+","+(q[le]+Z),_e+="l-"+re[le]+",0 ";return _e+="Z",_e}function K(H){var q=H.dimensions,re=H.model,Z=q.map(function(Ct){return Ct.categories.map(function(jt){return jt.y})}),Q=H.model.dimensions.map(function(Ct){return Ct.categories.map(function(jt){return jt.displayInd})}),oe=H.model.dimensions.map(function(Ct){return Ct.displayInd}),se=H.dimensions.map(function(Ct){return Ct.model.dimensionInd}),ae=q.map(function(Ct){return Ct.x}),le=q.map(function(Ct){return Ct.width}),_e=[];for(var fe in re.paths)re.paths.hasOwnProperty(fe)&&_e.push(re.paths[fe]);function me(Ct){var jt=Ct.categoryInds.map(function(Lt,Xe){return Q[Xe][Lt]}),Nt=se.map(function(Lt){return jt[Lt]});return Nt}_e.sort(function(Ct,jt){var Nt=me(Ct),Lt=me(jt);return H.sortpaths==="backward"&&(Nt.reverse(),Lt.reverse()),Nt.push(Ct.valueInds[0]),Lt.push(jt.valueInds[0]),H.bundlecolors&&(Nt.unshift(Ct.rawColor),Lt.unshift(jt.rawColor)),Nt<Lt?-1:Nt>Lt?1:0});for(var xe=new Array(_e.length),ye=q[0].model.count,be=q[0].categories.map(function(Ct){return Ct.height}).reduce(function(Ct,jt){return Ct+jt}),ke=0;ke<_e.length;ke++){var De=_e[ke],He;ye>0?He=be*(De.count/ye):He=0;for(var Ae=new Array(Z.length),Le=0;Le<De.categoryInds.length;Le++){var Ze=De.categoryInds[Le],We=Q[Le][Ze],ze=oe[Le];Ae[ze]=Z[ze][We],Z[ze][We]+=He;var Ie=H.dimensions[ze].categories[We],Ve=Ie.bands.length,dt=Ie.bands[Ve-1];if(dt===void 0||De.rawColor!==dt.rawColor){var Ft=dt===void 0?0:dt.y+dt.height;Ie.bands.push({key:Ft,color:De.color,rawColor:De.rawColor,height:He,width:Ie.width,count:De.count,y:Ft,categoryViewModel:Ie,parcatsViewModel:H})}else{var Qt=Ie.bands[Ve-1];Qt.height+=He,Qt.count+=De.count}}var Ot;H.pathShape==="hspline"?Ot=he(ae,Ae,le,He,.5):Ot=he(ae,Ae,le,He,0),xe[ke]={key:De.valueInds[0],model:De,height:He,leftXs:ae,topYs:Ae,dimWidths:le,svgD:Ot,parcatsViewModel:H}}H.paths=xe}function $(H){var q=H.model.dimensions.map(function(se){return{displayInd:se.displayInd,dimensionInd:se.dimensionInd}});q.sort(function(se,ae){return se.displayInd-ae.displayInd});var re=[];for(var Z in q){var Q=q[Z].dimensionInd,oe=H.model.dimensions[Q];re.push(U(H,oe))}H.dimensions=re}function U(H,q){var re=40,Z=16,Q=H.model.dimensions.length,oe=q.displayInd,se,ae,le;Q>1?se=(H.width-2*re-Z)/(Q-1):se=0,ae=re,le=ae+se*oe;var _e=[],fe=H.model.maxCats,me=q.categories.length,xe=8,ye=q.count,be=H.height-xe*(fe-1),ke,De,He,Ae,Le,Ze=(fe-me)*xe/2,We=q.categories.map(function(ze){return{displayInd:ze.displayInd,categoryInd:ze.categoryInd}});for(We.sort(function(ze,Ie){return ze.displayInd-Ie.displayInd}),Le=0;Le<me;Le++)Ae=We[Le].categoryInd,De=q.categories[Ae],ye>0?ke=De.count/ye*be:ke=0,He={key:De.valueInds[0],model:De,width:Z,height:ke,y:De.dragY!==null?De.dragY:Ze,bands:[],parcatsViewModel:H},Ze=Ze+ke+xe,_e.push(He);return{key:q.dimensionInd,x:q.dragX!==null?q.dragX:le,y:0,width:Z,model:q,categories:_e,parcatsViewModel:H,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(t,N,V){var m=t("./parcats");N.exports=function(A,T,e,a){var i=A._fullLayout,n=i._paper,r=i._size;m(A,n,T,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},e,a)}},{"./parcats":895}],897:[function(t,N,V){var m=t("../../components/colorscale/attributes"),u=t("../../plots/cartesian/layout_attributes"),A=t("../../plots/font_attributes"),T=t("../../plots/domain").attributes,e=t("../../lib/extend").extendFlat,a=t("../../plot_api/plot_template").templatedArray;N.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:A({editType:"plot"}),tickfont:A({editType:"plot"}),rangefont:A({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},u.tickvals,{editType:"plot"}),ticktext:e({},u.ticktext,{editType:"plot"}),tickformat:e({},u.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},m("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(t,N,V){var m=t("./constants"),u=t("@plotly/d3"),A=t("../../lib/gup").keyFun,T=t("../../lib/gup").repeat,e=t("../../lib").sorterAsc,a=t("../../lib").strTranslate,i=m.bar.snapRatio;function n(Y,ee){return Y*(1-i)+ee*i}var r=m.bar.snapClose;function v(Y,ee){return Y*(1-r)+ee*r}function s(Y,ee,j,X){if(o(j,X))return j;var ie=Y?-1:1,he=0,K=ee.length-1;if(ie<0){var $=he;he=K,K=$}for(var U=ee[he],H=U,q=he;ie*q<ie*K;q+=ie){var re=q+ie,Z=ee[re];if(ie*j<ie*v(U,Z))return n(U,H);if(ie*j<ie*Z||re===K)return n(Z,U);H=U,U=Z}}function o(Y,ee){for(var j=0;j<ee.length;j++)if(Y>=ee[j][0]&&Y<=ee[j][1])return!0;return!1}function b(Y){Y.attr("x",-m.bar.captureWidth/2).attr("width",m.bar.captureWidth)}function g(Y){Y.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function d(Y){if(!Y.brush.filterSpecified)return"0,"+Y.height;for(var ee=f(Y.brush.filter.getConsolidated(),Y.height),j=[0],X,ie,he,K=ee.length?ee[0][0]:null,$=0;$<ee.length;$++)X=ee[$],ie=X[1]-X[0],j.push(K),j.push(ie),he=$+1,he<ee.length&&(K=ee[he][0]-X[1]);return j.push(Y.height),j}function f(Y,ee){return Y.map(function(j){return j.map(function(X){return Math.max(0,X*ee)}).sort(e)})}function y(Y,ee){var j=m.bar.handleHeight;if(!(ee>Y[1]+j||ee<Y[0]-j))return ee>=.9*Y[1]+.1*Y[0]?"n":ee<=.9*Y[0]+.1*Y[1]?"s":"ns"}function l(){u.select(document.body).style("cursor",null)}function x(Y){Y.attr("stroke-dasharray",d)}function c(Y,ee){var j=u.select(Y).selectAll(".highlight, .highlight-shadow"),X=ee?j.transition().duration(m.bar.snapDuration).each("end",ee):j;x(X)}function M(Y,ee){var j=Y.brush,X=j.filterSpecified,ie=NaN,he={},K;if(X){var $=Y.height,U=j.filter.getConsolidated(),H=f(U,$),q=NaN,re=NaN,Z=NaN;for(K=0;K<=H.length;K++){var Q=H[K];if(Q&&Q[0]<=ee&&ee<=Q[1]){q=K;break}else if(re=K?K-1:NaN,Q&&Q[0]>ee){Z=K;break}}if(ie=q,isNaN(ie)&&(isNaN(re)||isNaN(Z)?ie=isNaN(re)?Z:re:ie=ee-H[re][1]<H[Z][0]-ee?re:Z),!isNaN(ie)){var oe=H[ie],se=y(oe,ee);se&&(he.interval=U[ie],he.intervalPix=oe,he.region=se)}}if(Y.ordinal&&!he.region){var ae=Y.unitTickvals,le=Y.unitToPaddedPx.invert(ee);for(K=0;K<ae.length;K++){var _e=[ae[Math.max(K-1,0)]*.25+ae[K]*.75,ae[Math.min(K+1,ae.length-1)]*.25+ae[K]*.75];if(le>=_e[0]&&le<=_e[1]){he.clickableOrdinalRange=_e;break}}}return he}function w(Y,ee){u.event.sourceEvent.stopPropagation();var j=ee.height-u.mouse(Y)[1]-2*m.verticalPadding,X=ee.unitToPaddedPx.invert(j),ie=ee.brush,he=M(ee,j),K=he.interval,$=ie.svgBrush;if($.wasDragged=!1,$.grabbingBar=he.region==="ns",$.grabbingBar){var U=K.map(ee.unitToPaddedPx);$.grabPoint=j-U[0]-m.verticalPadding,$.barLength=U[1]-U[0]}$.clickableOrdinalRange=he.clickableOrdinalRange,$.stayingIntervals=ee.multiselect&&ie.filterSpecified?ie.filter.getConsolidated():[],K&&($.stayingIntervals=$.stayingIntervals.filter(function(H){return H[0]!==K[0]&&H[1]!==K[1]})),$.startExtent=he.region?K[he.region==="s"?1:0]:X,ee.parent.inBrushDrag=!0,$.brushStartCallback()}function p(Y,ee){u.event.sourceEvent.stopPropagation();var j=ee.height-u.mouse(Y)[1]-2*m.verticalPadding,X=ee.brush.svgBrush;X.wasDragged=!0,X._dragging=!0,X.grabbingBar?X.newExtent=[j-X.grabPoint,j+X.barLength-X.grabPoint].map(ee.unitToPaddedPx.invert):X.newExtent=[X.startExtent,ee.unitToPaddedPx.invert(j)].sort(e),ee.brush.filterSpecified=!0,X.extent=X.stayingIntervals.concat([X.newExtent]),X.brushCallback(ee),c(Y.parentNode)}function _(Y,ee){var j=ee.brush,X=j.filter,ie=j.svgBrush;ie._dragging||(h(Y,ee),p(Y,ee),ee.brush.svgBrush.wasDragged=!1),ie._dragging=!1;var he=u.event;he.sourceEvent.stopPropagation();var K=ie.grabbingBar;if(ie.grabbingBar=!1,ie.grabLocation=void 0,ee.parent.inBrushDrag=!1,l(),!ie.wasDragged){ie.wasDragged=void 0,ie.clickableOrdinalRange?j.filterSpecified&&ee.multiselect?ie.extent.push(ie.clickableOrdinalRange):(ie.extent=[ie.clickableOrdinalRange],j.filterSpecified=!0):K?(ie.extent=ie.stayingIntervals,ie.extent.length===0&&I(j)):I(j),ie.brushCallback(ee),c(Y.parentNode),ie.brushEndCallback(j.filterSpecified?X.getConsolidated():[]);return}var $=function(){X.set(X.getConsolidated())};if(ee.ordinal){var U=ee.unitTickvals;U[U.length-1]<U[0]&&U.reverse(),ie.newExtent=[s(0,U,ie.newExtent[0],ie.stayingIntervals),s(1,U,ie.newExtent[1],ie.stayingIntervals)];var H=ie.newExtent[1]>ie.newExtent[0];ie.extent=ie.stayingIntervals.concat(H?[ie.newExtent]:[]),ie.extent.length||I(j),ie.brushCallback(ee),H?c(Y.parentNode,$):($(),c(Y.parentNode))}else $();ie.brushEndCallback(j.filterSpecified?X.getConsolidated():[])}function h(Y,ee){var j=ee.height-u.mouse(Y)[1]-2*m.verticalPadding,X=M(ee,j),ie="crosshair";X.clickableOrdinalRange?ie="pointer":X.region&&(ie=X.region+"-resize"),u.select(document.body).style("cursor",ie)}function L(Y){Y.on("mousemove",function(ee){u.event.preventDefault(),ee.parent.inBrushDrag||h(this,ee)}).on("mouseleave",function(ee){ee.parent.inBrushDrag||l()}).call(u.behavior.drag().on("dragstart",function(ee){w(this,ee)}).on("drag",function(ee){p(this,ee)}).on("dragend",function(ee){_(this,ee)}))}function E(Y,ee){return Y[0]-ee[0]}function S(Y,ee,j){var X=j._context.staticPlot,ie=Y.selectAll(".background").data(T);ie.enter().append("rect").classed("background",!0).call(b).call(g).style("pointer-events",X?"none":"auto").attr("transform",a(0,m.verticalPadding)),ie.call(L).attr("height",function($){return $.height-m.verticalPadding});var he=Y.selectAll(".highlight-shadow").data(T);he.enter().append("line").classed("highlight-shadow",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width+m.bar.strokeWidth).attr("stroke",ee).attr("opacity",m.bar.strokeOpacity).attr("stroke-linecap","butt"),he.attr("y1",function($){return $.height}).call(x);var K=Y.selectAll(".highlight").data(T);K.enter().append("line").classed("highlight",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width-m.bar.strokeWidth).attr("stroke",m.bar.fillColor).attr("opacity",m.bar.fillOpacity).attr("stroke-linecap","butt"),K.attr("y1",function($){return $.height}).call(x)}function P(Y,ee,j){var X=Y.selectAll("."+m.cn.axisBrush).data(T,A);X.enter().append("g").classed(m.cn.axisBrush,!0),S(X,ee,j)}function F(Y){return Y.svgBrush.extent.map(function(ee){return ee.slice()})}function I(Y){Y.filterSpecified=!1,Y.svgBrush.extent=[[-1/0,1/0]]}function D(Y){return function(j){var X=j.brush,ie=F(X),he=ie.slice();X.filter.set(he),Y()}}function R(Y){for(var ee=Y.slice(),j=[],X,ie=ee.shift();ie;){for(X=ie.slice();(ie=ee.shift())&&ie[0]<=X[1];)X[1]=Math.max(X[1],ie[1]);j.push(X)}return j.length===1&&j[0][0]>j[0][1]&&(j=[]),j}function O(){var Y=[],ee,j;return{set:function(X){Y=X.map(function(ie){return ie.slice().sort(e)}).sort(E),Y.length===1&&Y[0][0]===-1/0&&Y[0][1]===1/0&&(Y=[[0,-1]]),ee=R(Y),j=Y.reduce(function(ie,he){return[Math.min(ie[0],he[0]),Math.max(ie[1],he[1])]},[1/0,-1/0])},get:function(){return Y.slice()},getConsolidated:function(){return ee},getBounds:function(){return j}}}function z(Y,ee,j,X,ie,he){var K=O();return K.set(j),{filter:K,filterSpecified:ee,svgBrush:{extent:[],brushStartCallback:X,brushCallback:D(ie),brushEndCallback:he}}}function G(Y,ee){if(Array.isArray(Y[0])?(Y=Y.map(function(X){return X.sort(e)}),ee.multiselect?Y=R(Y.sort(E)):Y=[Y[0]]):Y=[Y.sort(e)],ee.tickvals){var j=ee.tickvals.slice().sort(e);if(Y=Y.map(function(X){var ie=[s(0,j,X[0],[]),s(1,j,X[1],[])];if(ie[1]>ie[0])return ie}).filter(function(X){return X}),!Y.length)return}return Y.length>1?Y:Y[0]}N.exports={makeBrush:z,ensureAxisBrush:P,cleanRanges:G}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../plots/get_data").getModuleCalcData,A=t("./plot"),T=t("../../constants/xmlns_namespaces");V.name="parcoords",V.plot=function(e){var a=u(e.calcdata,"parcoords")[0];a.length&&A(e,a)},V.clean=function(e,a,i,n){var r=n._has&&n._has("parcoords"),v=a._has&&a._has("parcoords");r&&!v&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},V.toSVG=function(e){var a=e._fullLayout._glimages,i=m.select(e).selectAll(".svg-container"),n=i.filter(function(v,s){return s===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var v=this,s=v.toDataURL("image/png"),o=a.append("svg:image");o.attr({xmlns:T.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:v.style.width,height:v.style.height})}n.each(r),window.setTimeout(function(){m.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(t,N,V){var m=t("../../lib").isArrayOrTypedArray,u=t("../../components/colorscale"),A=t("../../lib/gup").wrap;N.exports=function(a,i){var n,r;return u.hasColorscale(i,"line")&&m(i.line.color)?(n=i.line.color,r=u.extractOpts(i.line).colorscale,u.calc(a,i,{vals:n,containerStr:"line",cLetter:"c"})):(n=T(i._length),r=[[0,i.line.color],[1,i.line.color]]),A({lineColor:n,cscale:r})};function T(e){for(var a=new Array(e),i=0;i<e;i++)a[i]=.5;return a}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(t,N,V){N.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(t,N,V){var m=t("../../lib"),u=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),a=t("../../plots/cartesian/axes"),i=t("./attributes"),n=t("./axisbrush"),r=t("./constants").maxDimensionCount,v=t("./merge_length");function s(b,g,d,f,y){var l=y("line.color",d);if(u(b,"line")&&m.isArrayOrTypedArray(l)){if(l.length)return y("line.colorscale"),A(b,g,f,y,{prefix:"line.",cLetter:"c"}),l.length;g.line.color=d}return 1/0}function o(b,g,d,f){function y(w,p){return m.coerce(b,g,i.dimensions,w,p)}var l=y("values"),x=y("visible");if(l&&l.length||(x=g.visible=!1),x){y("label"),y("tickvals"),y("ticktext"),y("tickformat");var c=y("range");g._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:c},a.setConvert(g._ax,f.layout),y("multiselect");var M=y("constraintrange");M&&(g.constraintrange=n.cleanRanges(M,g))}}N.exports=function(g,d,f,y){function l(p,_){return m.coerce(g,d,i,p,_)}var x=g.dimensions;Array.isArray(x)&&x.length>r&&(m.log("parcoords traces support up to "+r+" dimensions at the moment"),x.splice(r));var c=e(g,d,{name:"dimensions",layout:y,handleItemDefaults:o}),M=s(g,d,f,y,l);T(d,y,l),(!Array.isArray(c)||!c.length)&&(d.visible=!1),v(d,c,"values",M);var w={family:y.font.family,size:Math.round(y.font.size/1.2),color:y.font.color};m.coerceFont(l,"labelfont",w),m.coerceFont(l,"tickfont",w),m.coerceFont(l,"rangefont",w),l("labelangle"),l("labelside"),l("unselected.line.color"),l("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(t,N,V){var m=t("../../lib").isTypedArray;V.convertTypedArray=function(u){return m(u)?Array.prototype.slice.call(u):u},V.isOrdinal=function(u){return!!u.tickvals},V.isVisible=function(u){return u.visible||!("visible"in u)}},{"../../lib":515}],905:[function(t,N,V){var m=t("./base_index");m.plot=t("./plot"),N.exports=m},{"./base_index":899,"./plot":909}],906:[function(t,N,V){var m=t("glslify"),u=m([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),A=m([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=t("./constants").maxDimensionCount,e=t("../../lib"),a=1e-6,i=2048,n=new Uint8Array(4),r=new Uint8Array(4),v={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(h){h.read({x:0,y:0,width:1,height:1,data:n})}function o(h,L,E,S,P){var F=h._gl;F.enable(F.SCISSOR_TEST),F.scissor(L,E,S,P),h.clear({color:[0,0,0,0],depth:1})}function b(h,L,E,S,P,F){var I=F.key;function D(R){var O=Math.min(S,P-R*S);R===0&&(window.cancelAnimationFrame(E.currentRafs[I]),delete E.currentRafs[I],o(h,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!E.clearOnly&&(F.count=2*O,F.offset=2*R*S,L(F),R*S+O<P&&(E.currentRafs[I]=window.requestAnimationFrame(function(){D(R+1)})),E.drawCompleted=!1)}E.drawCompleted||(s(h),E.drawCompleted=!0),D(0)}function g(h){return Math.max(a,Math.min(1-a,h))}function d(h,L){for(var E=new Array(256),S=0;S<256;S++)E[S]=h(S/255).concat(L);return E}function f(h,L){return(h>>>8*L)%256/255}function y(h,L,E){for(var S=new Array(h*(T+4)),P=0,F=0;F<h;F++){for(var I=0;I<T;I++)S[P++]=I<L.length?L[I].paddedUnitValues[F]:.5;S[P++]=f(F,2),S[P++]=f(F,1),S[P++]=f(F,0),S[P++]=g(E[F])}return S}function l(h,L,E){for(var S=new Array(L*8),P=0,F=0;F<L;F++)for(var I=0;I<2;I++)for(var D=0;D<4;D++){var R=h*4+D,O=E[F*64+R];R===63&&I===0&&(O*=-1),S[P++]=O}return S}function x(h){var L="0"+h;return L.substr(L.length-2)}function c(h){return h<T?"p"+x(h+1)+"_"+x(h+4):"colors"}function M(h,L,E){for(var S=0;S<=T;S+=4)h[c(S)](l(S/4,L,E))}function w(h){for(var L={},E=0;E<=T;E+=4)L[c(E)]=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function p(h,L,E,S,P,F,I,D,R,O,z,G,Y,ee){for(var j=[[],[]],X=0;X<64;X++)j[0][X]=X===P?1:0,j[1][X]=X===F?1:0;I*=ee,D*=ee,R*=ee,O*=ee;var ie=h.lines.canvasOverdrag*ee,he=h.domain,K=h.canvasWidth*ee,$=h.canvasHeight*ee,U=h.pad.l*ee,H=h.pad.b*ee,q=h.layoutHeight*ee,re=h.layoutWidth*ee,Z=h.deselectedLines.color,Q=h.deselectedLines.opacity,oe=e.extendFlat({key:z,resolution:[K,$],viewBoxPos:[I+ie,D],viewBoxSize:[R,O],i0:P,i1:F,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:G,contextColor:[Z[0]/255,Z[1]/255,Z[2]/255,Q!=="auto"?Z[3]*Q:Math.max(1/255,Math.pow(1/h.lines.color.length,1/3))],scissorX:(S===L?0:I+ie)+(U-ie)+re*he.x[0],scissorWidth:(S===E?K-I+ie:R+.5)+(S===L?I+ie:0),scissorY:D+H+q*he.y[0],scissorHeight:O,viewportX:U-ie+re*he.x[0],viewportY:H+q*he.y[0],viewportWidth:K,viewportHeight:$},Y);return oe}function _(h){var L=i-1,E=Math.max(0,Math.floor(h[0]*L),0),S=Math.min(L,Math.ceil(h[1]*L),L);return[Math.min(E,S),Math.max(E,S)]}N.exports=function(h,L){var E=L.context,S=L.pick,P=L.regl,F=P._gl,I=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,z,G,Y,ee=w(P),j,X=P.texture(v),ie=[];K(L);var he=P({profile:!1,blend:{enable:E,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!E,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:u,frag:A,primitive:"lines",lineWidth:D,attributes:ee,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:X,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function K(Z){O=Z.model,z=Z.viewModel,G=z.dimensions.slice(),Y=G[0]?G[0].values.length:0;var Q=O.lines,oe=S?Q.color.map(function(ae,le){return le/Q.color.length}):Q.color,se=y(Y,G,oe);M(ee,Y,se),!E&&!S&&(X=P.texture(e.extendFlat({data:d(O.unitToColor,255)},v)))}function $(Z){var Q,oe,se,ae=[[],[]];for(se=0;se<64;se++){var le=!Z&&se<G.length?G[se].brush.filter.getBounds():[-1/0,1/0];ae[0][se]=le[0],ae[1][se]=le[1]}var _e=i*8,fe=new Array(_e);for(Q=0;Q<_e;Q++)fe[Q]=255;if(!Z)for(Q=0;Q<G.length;Q++){var me=Q%8,xe=(Q-me)/8,ye=Math.pow(2,me),be=G[Q],ke=be.brush.filter.get();if(!(ke.length<2)){var De=_(ke[0])[1];for(oe=1;oe<ke.length;oe++){var He=_(ke[oe]);for(se=De+1;se<He[0];se++)fe[se*8+xe]&=~ye;De=Math.max(De,He[1])}}}var Ae={shape:[8,i],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:fe};return j?j(Ae):j=P.texture(Ae),{maskTexture:j,maskHeight:i,loA:ae[0].slice(0,16),loB:ae[0].slice(16,32),loC:ae[0].slice(32,48),loD:ae[0].slice(48,64),hiA:ae[1].slice(0,16),hiB:ae[1].slice(16,32),hiC:ae[1].slice(32,48),hiD:ae[1].slice(48,64)}}function U(Z,Q,oe){var se=Z.length,ae,le,_e,fe=1/0,me=-1/0;for(ae=0;ae<se;ae++)Z[ae].dim0.canvasX<fe&&(fe=Z[ae].dim0.canvasX,le=ae),Z[ae].dim1.canvasX>me&&(me=Z[ae].dim1.canvasX,_e=ae);se===0&&o(P,0,0,O.canvasWidth,O.canvasHeight);var xe=$(E);for(ae=0;ae<se;ae++){var ye=Z[ae],be=ye.dim0.crossfilterDimensionIndex,ke=ye.dim1.crossfilterDimensionIndex,De=ye.canvasX,He=ye.canvasY,Ae=De+ye.panelSizeX,Le=ye.plotGlPixelRatio;if(Q||!ie[be]||ie[be][0]!==De||ie[be][1]!==Ae){ie[be]=[De,Ae];var Ze=p(O,le,_e,ae,be,ke,De,He,ye.panelSizeX,ye.panelSizeY,ye.dim0.crossfilterDimensionIndex,E?0:S?2:1,xe,Le);R.clearOnly=oe;var We=Q?O.lines.blockLineCount:Y;b(P,he,R,We,Y,Ze)}}}function H(Z,Q){return P.read({x:Z,y:Q,width:1,height:1,data:r}),r}function q(Z,Q,oe,se){var ae=new Uint8Array(4*oe*se);return P.read({x:Z,y:Q,width:oe,height:se,data:ae}),ae}function re(){h.style["pointer-events"]="none",X.destroy(),j&&j.destroy();for(var Z in ee)ee[Z].destroy()}return{render:U,readPixel:H,readPixels:q,destroy:re,update:K}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(t,N,V){N.exports=function(m,u,A,T){T||(T=1/0);var e,a;for(e=0;e<u.length;e++)a=u[e],a.visible&&(T=Math.min(T,a[A].length));for(T===1/0&&(T=0),m._length=T,e=0;e<u.length;e++)a=u[e],a.visible&&(a._length=T);return T}},{}],908:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=u.numberFormat,T=t("color-rgba"),e=t("../../plots/cartesian/axes"),a=u.strRotate,i=u.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/drawing"),v=t("../../components/colorscale"),s=t("../../lib/gup"),o=s.keyFun,b=s.repeat,g=s.unwrap,d=t("./helpers"),f=t("./constants"),y=t("./axisbrush"),l=t("./lines");function x(j,X,ie){return u.aggNums(j,null,X,ie)}function c(j,X){return w(x(Math.min,j,X),x(Math.max,j,X))}function M(j){var X=j.range;return X?w(X[0],X[1]):c(j.values,j._length)}function w(j,X){return(isNaN(j)||!isFinite(j))&&(j=0),(isNaN(X)||!isFinite(X))&&(X=0),j===X&&(j===0?(j-=1,X+=1):(j*=.9,X*=1.1)),[j,X]}function p(j,X){return X?function(ie,he){var K=X[he];return K==null?j(ie):K}:j}function _(j,X,ie,he,K){var $=M(ie);return he?m.scale.ordinal().domain(he.map(p(A(ie.tickformat),K))).range(he.map(function(U){var H=(U-$[0])/($[1]-$[0]);return j-X+H*(2*X-j)})):m.scale.linear().domain($).range([j-X,X])}function h(j,X){return m.scale.linear().range([X,j-X])}function L(j,X){return m.scale.linear().domain(M(j)).range([X,1-X])}function E(j){if(!!j.tickvals){var X=M(j);return m.scale.ordinal().domain(j.tickvals).range(j.tickvals.map(function(ie){return(ie-X[0])/(X[1]-X[0])}))}}function S(j){var X=j.map(function($){return $[0]}),ie=j.map(function($){var U=T($[1]);return m.rgb("rgb("+U[0]+","+U[1]+","+U[2]+")")}),he=function($){return function(U){return U[$]}},K="rgb".split("").map(function($){return m.scale.linear().clamp(!0).domain(X).range(ie.map(he($)))});return function($){return K.map(function(U){return U($)})}}function P(j){return j.dimensions.some(function(X){return X.brush.filterSpecified})}function F(j,X,ie){var he=g(X),K=he.trace,$=d.convertTypedArray(he.lineColor),U=K.line,H={color:T(K.unselected.line.color),opacity:K.unselected.line.opacity},q=v.extractOpts(U),re=q.reversescale?v.flipScale(he.cscale):he.cscale,Z=K.domain,Q=K.dimensions,oe=j.width,se=K.labelangle,ae=K.labelside,le=K.labelfont,_e=K.tickfont,fe=K.rangefont,me=u.extendDeepNoArrays({},U,{color:$.map(m.scale.linear().domain(M({values:$,range:[q.min,q.max],_length:K._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),xe=Math.floor(oe*(Z.x[1]-Z.x[0])),ye=Math.floor(j.height*(Z.y[1]-Z.y[0])),be=j.margin||{l:80,r:80,t:100,b:80},ke=xe,De=ye;return{key:ie,colCount:Q.filter(d.isVisible).length,dimensions:Q,tickDistance:f.tickDistance,unitToColor:S(re),lines:me,deselectedLines:H,labelAngle:se,labelSide:ae,labelFont:le,tickFont:_e,rangeFont:fe,layoutWidth:oe,layoutHeight:j.height,domain:Z,translateX:Z.x[0]*oe,translateY:j.height-Z.y[1]*j.height,pad:be,canvasWidth:ke*f.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:De*f.canvasPixelRatio,width:ke,height:De,canvasPixelRatio:f.canvasPixelRatio}}function I(j,X,ie){var he=ie.width,K=ie.height,$=ie.dimensions,U=ie.canvasPixelRatio,H=function(oe){return he*oe/Math.max(1,ie.colCount-1)},q=f.verticalPadding/K,re=h(K,f.verticalPadding),Z={key:ie.key,xScale:H,model:ie,inBrushDrag:!1},Q={};return Z.dimensions=$.filter(d.isVisible).map(function(oe,se){var ae=L(oe,q),le=Q[oe.label];Q[oe.label]=(le||0)+1;var _e=oe.label+(le?"__"+le:""),fe=oe.constraintrange,me=fe&&fe.length;me&&!Array.isArray(fe[0])&&(fe=[fe]);var xe=me?fe.map(function(ze){return ze.map(ae)}):[[-1/0,1/0]],ye=function(){var ze=Z;ze.focusLayer&&ze.focusLayer.render(ze.panels,!0);var Ie=P(ze);!j.contextShown()&&Ie?(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0),j.contextShown(!0)):j.contextShown()&&!Ie&&(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0,!0),j.contextShown(!1))},be=oe.values;be.length>oe._length&&(be=be.slice(0,oe._length));var ke=oe.tickvals,De;function He(ze,Ie){return{val:ze,text:De[Ie]}}function Ae(ze,Ie){return ze.val-Ie.val}if(Array.isArray(ke)&&ke.length){De=oe.ticktext,!Array.isArray(De)||!De.length?De=ke.map(A(oe.tickformat)):De.length>ke.length?De=De.slice(0,ke.length):ke.length>De.length&&(ke=ke.slice(0,De.length));for(var Le=1;Le<ke.length;Le++)if(ke[Le]<ke[Le-1]){for(var Ze=ke.map(He).sort(Ae),We=0;We<ke.length;We++)ke[We]=Ze[We].val,De[We]=Ze[We].text;break}}else ke=void 0;return be=d.convertTypedArray(be),{key:_e,label:oe.label,tickFormat:oe.tickformat,tickvals:ke,ticktext:De,ordinal:d.isOrdinal(oe),multiselect:oe.multiselect,xIndex:se,crossfilterDimensionIndex:se,visibleIndex:oe._index,height:K,values:be,paddedUnitValues:be.map(ae),unitTickvals:ke&&ke.map(ae),xScale:H,x:H(se),canvasX:H(se)*U,unitToPaddedPx:re,domainScale:_(K,f.verticalPadding,oe,ke,De),ordinalScale:E(oe),parent:Z,model:ie,brush:y.makeBrush(j,me,xe,function(){j.linePickActive(!1)},ye,function(ze){if(Z.focusLayer.render(Z.panels,!0),Z.pickLayer&&Z.pickLayer.render(Z.panels,!0),j.linePickActive(!0),X&&X.filterChanged){var Ie=ae.invert,Ve=ze.map(function(dt){return dt.map(Ie).sort(u.sorterAsc)}).sort(function(dt,Ft){return dt[0]-Ft[0]});X.filterChanged(Z.key,oe._index,Ve)}})}}),Z}function D(j){j.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var j=!0,X=!1;return{linePickActive:function(ie){return arguments.length?j=!!ie:j},contextShown:function(ie){return arguments.length?X=!!ie:X}}}function O(j,X){var ie=X==="top"?1:-1,he=j*Math.PI/180,K=Math.sin(he),$=Math.cos(he);return{dir:ie,dx:K,dy:$,degrees:j}}function z(j,X,ie){for(var he=X.panels||(X.panels=[]),K=j.data(),$=0;$<K.length-1;$++){var U=he[$]||(he[$]={}),H=K[$],q=K[$+1];U.dim0=H,U.dim1=q,U.canvasX=H.canvasX,U.panelSizeX=q.canvasX-H.canvasX,U.panelSizeY=X.model.canvasHeight,U.y=0,U.canvasY=0,U.plotGlPixelRatio=ie}}function G(j){for(var X=0;X<j.length;X++)for(var ie=0;ie<j[X].length;ie++)for(var he=j[X][ie].trace,K=he.dimensions,$=0;$<K.length;$++){var U=K[$].values,H=K[$]._ax;H&&(H.range?H.range=w(H.range[0],H.range[1]):H.range=c(U,he._length),H.dtick||(H.dtick=.01*(Math.abs(H.range[1]-H.range[0])||1)),H.tickformat=K[$].tickformat,e.calcTicks(H),H.cleanRange())}}function Y(j,X){return e.tickText(j._ax,X,!1).text}function ee(j,X){if(j.ordinal)return"";var ie=j.domainScale.domain(),he=ie[X?ie.length-1:0];return Y(j.model.dimensions[j.visibleIndex],he)}N.exports=function(X,ie,he,K){var $=X._context.staticPlot,U=X._fullLayout,H=U._toppaper,q=U._glcontainer,re=X._context.plotGlPixelRatio,Z=X._fullLayout.paper_bgcolor;G(ie);var Q=R(),oe=ie.filter(function(We){return g(We).trace.visible}).map(F.bind(0,he)).map(I.bind(0,Q,K));q.each(function(We,ze){return u.extendFlat(We,oe[ze])});var se=q.selectAll(".gl-canvas").each(function(We){We.viewModel=oe[0],We.viewModel.plotGlPixelRatio=re,We.viewModel.paperColor=Z,We.model=We.viewModel?We.viewModel.model:null}),ae=null,le=se.filter(function(We){return We.pick});le.style("pointer-events",$?"none":"auto").on("mousemove",function(We){if(Q.linePickActive()&&We.lineLayer&&K&&K.hover){var ze=m.event,Ie=this.width,Ve=this.height,dt=m.mouse(this),Ft=dt[0],Qt=dt[1];if(Ft<0||Qt<0||Ft>=Ie||Qt>=Ve)return;var Ot=We.lineLayer.readPixel(Ft,Ve-1-Qt),Ct=Ot[3]!==0,jt=Ct?Ot[2]+256*(Ot[1]+256*Ot[0]):null,Nt={x:Ft,y:Qt,clientX:ze.clientX,clientY:ze.clientY,dataIndex:We.model.key,curveNumber:jt};jt!==ae&&(Ct?K.hover(Nt):K.unhover&&K.unhover(Nt),ae=jt)}}),se.style("opacity",function(We){return We.pick?0:1}),H.style("background","rgba(255, 255, 255, 0)");var _e=H.selectAll("."+f.cn.parcoords).data(oe,o);_e.exit().remove(),_e.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),_e.attr("transform",function(We){return i(We.model.translateX,We.model.translateY)});var fe=_e.selectAll("."+f.cn.parcoordsControlView).data(b,o);fe.enter().append("g").classed(f.cn.parcoordsControlView,!0),fe.attr("transform",function(We){return i(We.model.pad.l,We.model.pad.t)});var me=fe.selectAll("."+f.cn.yAxis).data(function(We){return We.dimensions},o);me.enter().append("g").classed(f.cn.yAxis,!0),fe.each(function(We){z(me,We,re)}),se.each(function(We){if(We.viewModel){!We.lineLayer||K?We.lineLayer=l(this,We):We.lineLayer.update(We),(We.key||We.key===0)&&(We.viewModel[We.key]=We.lineLayer);var ze=!We.context||K;We.lineLayer.render(We.viewModel.panels,ze)}}),me.attr("transform",function(We){return i(We.xScale(We.xIndex),0)}),me.call(m.behavior.drag().origin(function(We){return We}).on("drag",function(We){var ze=We.parent;Q.linePickActive(!1),We.x=Math.max(-f.overdrag,Math.min(We.model.width+f.overdrag,m.event.x)),We.canvasX=We.x*We.model.canvasPixelRatio,me.sort(function(Ie,Ve){return Ie.x-Ve.x}).each(function(Ie,Ve){Ie.xIndex=Ve,Ie.x=We===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),z(me,ze,re),me.filter(function(Ie){return Math.abs(We.xIndex-Ie.xIndex)!==0}).attr("transform",function(Ie){return i(Ie.xScale(Ie.xIndex),0)}),m.select(this).attr("transform",i(We.x,0)),me.each(function(Ie,Ve,dt){dt===We.parent.key&&(ze.dimensions[Ve]=Ie)}),ze.contextLayer&&ze.contextLayer.render(ze.panels,!1,!P(ze)),ze.focusLayer.render&&ze.focusLayer.render(ze.panels)}).on("dragend",function(We){var ze=We.parent;We.x=We.xScale(We.xIndex),We.canvasX=We.x*We.model.canvasPixelRatio,z(me,ze,re),m.select(this).attr("transform",function(Ie){return i(Ie.x,0)}),ze.contextLayer&&ze.contextLayer.render(ze.panels,!1,!P(ze)),ze.focusLayer&&ze.focusLayer.render(ze.panels),ze.pickLayer&&ze.pickLayer.render(ze.panels,!0),Q.linePickActive(!0),K&&K.axesMoved&&K.axesMoved(ze.key,ze.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),me.exit().remove();var xe=me.selectAll("."+f.cn.axisOverlays).data(b,o);xe.enter().append("g").classed(f.cn.axisOverlays,!0),xe.selectAll("."+f.cn.axis).remove();var ye=xe.selectAll("."+f.cn.axis).data(b,o);ye.enter().append("g").classed(f.cn.axis,!0),ye.each(function(We){var ze=We.model.height/We.model.tickDistance,Ie=We.domainScale,Ve=Ie.domain();m.select(this).call(m.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(ze,We.tickFormat).tickValues(We.ordinal?Ve:null).tickFormat(function(dt){return d.isOrdinal(We)?dt:Y(We.model.dimensions[We.visibleIndex],dt)}).scale(Ie)),r.font(ye.selectAll("text"),We.model.tickFont)}),ye.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ye.selectAll("text").style("text-shadow",n.makeTextShadow(Z)).style("cursor","default");var be=xe.selectAll("."+f.cn.axisHeading).data(b,o);be.enter().append("g").classed(f.cn.axisHeading,!0);var ke=be.selectAll("."+f.cn.axisTitle).data(b,o);ke.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",$?"none":"auto"),ke.text(function(We){return We.label}).each(function(We){var ze=m.select(this);r.font(ze,We.model.labelFont),n.convertToTspans(ze,X)}).attr("transform",function(We){var ze=O(We.model.labelAngle,We.model.labelSide),Ie=f.axisTitleOffset;return(ze.dir>0?"":i(0,2*Ie+We.model.height))+a(ze.degrees)+i(-Ie*ze.dx,-Ie*ze.dy)}).attr("text-anchor",function(We){var ze=O(We.model.labelAngle,We.model.labelSide),Ie=Math.abs(ze.dx),Ve=Math.abs(ze.dy);return 2*Ie>Ve?ze.dir*ze.dx<0?"start":"end":"middle"});var De=xe.selectAll("."+f.cn.axisExtent).data(b,o);De.enter().append("g").classed(f.cn.axisExtent,!0);var He=De.selectAll("."+f.cn.axisExtentTop).data(b,o);He.enter().append("g").classed(f.cn.axisExtentTop,!0),He.attr("transform",i(0,-f.axisExtentOffset));var Ae=He.selectAll("."+f.cn.axisExtentTopText).data(b,o);Ae.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(D),Ae.text(function(We){return ee(We,!0)}).each(function(We){r.font(m.select(this),We.model.rangeFont)});var Le=De.selectAll("."+f.cn.axisExtentBottom).data(b,o);Le.enter().append("g").classed(f.cn.axisExtentBottom,!0),Le.attr("transform",function(We){return i(0,We.model.height+f.axisExtentOffset)});var Ze=Le.selectAll("."+f.cn.axisExtentBottomText).data(b,o);Ze.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Ze.text(function(We){return ee(We,!1)}).each(function(We){r.font(m.select(this),We.model.rangeFont)}),y.ensureAxisBrush(xe,Z,X)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(t,N,i){var m=t("./parcoords"),u=t("../../lib/prepare_regl"),A=t("./helpers").isVisible,T={};function e(n,r,v){var s=r.indexOf(v),o=n.indexOf(s);return o===-1&&(o+=r.length),o}function a(n,r){return function(s,o){return e(n,r,s)-e(n,r,o)}}var i=N.exports=function(r,v){var s=r._fullLayout,o=u(r,[],T);if(!!o){var b={},g={},d={},f={},y=s._size;v.forEach(function(w,p){var _=w[0].trace;d[p]=_.index;var h=f[p]=_._fullInput.index;b[p]=r.data[h].dimensions,g[p]=r.data[h].dimensions.slice()});var l=function(w,p,_){var h=g[w][p],L=_.map(function(D){return D.slice()}),E="dimensions["+p+"].constraintrange",S=s._tracePreGUI[r._fullData[d[w]]._fullInput.uid];if(S[E]===void 0){var P=h.constraintrange;S[E]=P||null}var F=r._fullData[d[w]].dimensions[p];L.length?(L.length===1&&(L=L[0]),h.constraintrange=L,F.constraintrange=L.slice(),L=[L]):(delete h.constraintrange,delete F.constraintrange,L=null);var I={};I[E]=L,r.emit("plotly_restyle",[I,[f[w]]])},x=function(w){r.emit("plotly_hover",w)},c=function(w){r.emit("plotly_unhover",w)},M=function(w,p){var _=a(p,g[w].filter(A));b[w].sort(_),g[w].filter(function(h){return!A(h)}).sort(function(h){return g[w].indexOf(h)}).forEach(function(h){b[w].splice(b[w].indexOf(h),1),b[w].splice(g[w].indexOf(h),0,h)}),r.emit("plotly_restyle",[{dimensions:[b[w]]},[f[w]]])};m(r,v,{width:y.w,height:y.h,margin:{t:y.t,r:y.r,b:y.b,l:y.l}},{filterChanged:l,hover:x,unhover:c,axesMoved:M})}};i.reglPrecompiled=T},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(t,N,V){var m=t("../../plots/attributes"),u=t("../../plots/domain").attributes,A=t("../../plots/font_attributes"),T=t("../../components/color/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../lib/extend").extendFlat,n=A({editType:"plot",arrayOk:!0,colorEditType:"plot"});N.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:i({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:i({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:i({},n,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:u({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:i({},n,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(t,N,V){var m=t("../../plots/plots");V.name="pie",V.plot=function(u,A,T,e){m.plotBasePlot(V.name,u,A,T,e)},V.clean=function(u,A,T,e){m.cleanBasePlot(V.name,u,A,T,e)}},{"../../plots/plots":628}],912:[function(t,N,V){var m=t("fast-isnumeric"),u=t("tinycolor2"),A=t("../../components/color"),T={};function e(r,v){var s=[],o=r._fullLayout,b=o.hiddenlabels||[],g=v.labels,d=v.marker.colors||[],f=v.values,y=v._length,l=v._hasValues&&y,x,c;if(v.dlabel)for(g=new Array(y),x=0;x<y;x++)g[x]=String(v.label0+x*v.dlabel);var M={},w=a(o["_"+v.type+"colormap"]),p=0,_=!1;for(x=0;x<y;x++){var h,L,E;if(l){if(h=f[x],!m(h))continue;h=+h}else h=1;L=g[x],(L===void 0||L==="")&&(L=x),L=String(L);var S=M[L];S===void 0?(M[L]=s.length,E=b.indexOf(L)!==-1,E||(p+=h),s.push({v:h,label:L,color:w(d[x],L),i:x,pts:[x],hidden:E})):(_=!0,c=s[S],c.v+=h,c.pts.push(x),c.hidden||(p+=h),c.color===!1&&d[x]&&(c.color=w(d[x],L)))}s=s.filter(function(F){return F.v>=0});var P=v.type==="funnelarea"?_:v.sort;return P&&s.sort(function(F,I){return I.v-F.v}),s[0]&&(s[0].vTotal=p),s}function a(r){return function(s,o){return!s||(s=u(s),!s.isValid())?!1:(s=A.addOpacity(s,s.getAlpha()),r[o]||(r[o]=s),s)}}function i(r,v){var s=(v||{}).type;s||(s="pie");var o=r._fullLayout,b=r.calcdata,g=o[s+"colorway"],d=o["_"+s+"colormap"];o["extend"+s+"colors"]&&(g=n(g,T));for(var f=0,y=0;y<b.length;y++){var l=b[y],x=l[0].trace.type;if(x===s)for(var c=0;c<l.length;c++){var M=l[c];M.color===!1&&(d[M.label]?M.color=d[M.label]:(d[M.label]=M.color=g[f%g.length],f++))}}}function n(r,v){var s,o=JSON.stringify(r),b=v[o];if(!b){for(b=r.slice(),s=0;s<r.length;s++)b.push(u(r[s]).lighten(20).toHexString());for(s=0;s<r.length;s++)b.push(u(r[s]).darken(20).toHexString());v[o]=b}return b}N.exports={calc:e,crossTraceCalc:i,makePullColorFn:a,generateExtendedColors:n}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("./attributes"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText;function a(n,r){var v=Array.isArray(n),s=u.isArrayOrTypedArray(r),o=Math.min(v?n.length:1/0,s?r.length:1/0);if(isFinite(o)||(o=0),o&&s){for(var b,g=0;g<o;g++){var d=r[g];if(m(d)&&d>0){b=!0;break}}b||(o=0)}return{hasLabels:v,hasValues:s,len:o}}function i(n,r,v,s){function o(E,S){return u.coerce(n,r,A,E,S)}var b=o("labels"),g=o("values"),d=a(b,g),f=d.len;if(r._hasLabels=d.hasLabels,r._hasValues=d.hasValues,!r._hasLabels&&r._hasValues&&(o("label0"),o("dlabel")),!f){r.visible=!1;return}r._length=f;var y=o("marker.line.width");y&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var l=o("text"),x=o("texttemplate"),c;if(x||(c=o("textinfo",Array.isArray(l)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),x||c&&c!=="none"){var M=o("textposition");e(n,r,s,o,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var w=Array.isArray(M)||M==="auto",p=w||M==="outside";p&&o("automargin"),(M==="inside"||M==="auto"||Array.isArray(M))&&o("insidetextorientation")}T(r,s,o);var _=o("hole"),h=o("title.text");if(h){var L=o("title.position",_?"middle center":"top center");!_&&L==="middle center"&&(r.title.position="top center"),u.coerceFont(o,"title.font",s.font)}o("sort"),o("direction"),o("rotation"),o("pull")}N.exports={handleLabelsAndValues:a,supplyDefaults:i}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(t,N,V){var m=t("../../components/fx/helpers").appendArrayMultiPointValues;N.exports=function(A,T){var e={curveNumber:T.index,pointNumbers:A.pts,data:T._input,fullData:T,label:A.label,color:A.color,value:A.v,percent:A.percent,text:A.text,bbox:A.bbox,v:A.v};return A.pts.length===1&&(e.pointNumber=e.i=A.pts[0]),m(e,T,A.pts),T.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":403}],915:[function(t,N,V){var m=t("../../lib");function u(A){return A.indexOf("e")!==-1?A.replace(/[.]?0+e/,"e"):A.indexOf(".")!==-1?A.replace(/[.]?0+$/,""):A}V.formatPiePercent=function(T,e){var a=u((T*100).toPrecision(3));return m.numSeparate(a,e)+"%"},V.formatPieValue=function(T,e){var a=u(T.toPrecision(10));return m.numSeparate(a,e)},V.getFirstFilled=function(T,e){if(!!Array.isArray(T))for(var a=0;a<e.length;a++){var i=T[e[a]];if(i||i===0||i==="")return i}},V.castOption=function(T,e){if(Array.isArray(T))return V.getFirstFilled(T,e);if(T)return T},V.getRotationAngle=function(A){return(A==="auto"?0:A)*Math.PI/180}},{"../../lib":515}],916:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,supplyLayoutDefaults:t("./layout_defaults"),layoutAttributes:t("./layout_attributes"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style"),styleOne:t("./style_one"),moduleType:"trace",name:"pie",basePlotModule:t("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(t,N,V){N.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return m.coerce(T,e,u,i,n)}a("hiddenlabels"),a("piecolorway",e.colorway),a("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../plots/plots"),A=t("../../components/fx"),T=t("../../components/color"),e=t("../../components/drawing"),a=t("../../lib"),i=a.strScale,n=a.strTranslate,r=t("../../lib/svg_text_utils"),v=t("../bar/uniform_text"),s=v.recordMinTextSize,o=v.clearMinTextSize,b=t("../bar/constants").TEXTPAD,g=t("./helpers"),d=t("./event_data"),f=t("../../lib").isValidTextValue;function y($,U){var H=$._context.staticPlot,q=$._fullLayout,re=q._size;o("pie",q),w(U,$),ee(U,re);var Z=a.makeTraceGroups(q._pielayer,U,"trace").each(function(Q){var oe=m.select(this),se=Q[0],ae=se.trace;X(Q),oe.attr("stroke-linejoin","round"),oe.each(function(){var le=m.select(this).selectAll("g.slice").data(Q);le.enter().append("g").classed("slice",!0),le.exit().remove();var _e=[[[],[]],[[],[]]],fe=!1;le.each(function(Ae,Le){if(Ae.hidden){m.select(this).selectAll("path,g").remove();return}Ae.pointNumber=Ae.i,Ae.curveNumber=ae.index,_e[Ae.pxmid[1]<0?0:1][Ae.pxmid[0]<0?0:1].push(Ae);var Ze=se.cx,We=se.cy,ze=m.select(this),Ie=ze.selectAll("path.surface").data([Ae]);if(Ie.enter().append("path").classed("surface",!0).style({"pointer-events":H?"none":"all"}),ze.call(x,$,Q),ae.pull){var Ve=+g.castOption(ae.pull,Ae.pts)||0;Ve>0&&(Ze+=Ve*Ae.pxmid[0],We+=Ve*Ae.pxmid[1])}Ae.cxFinal=Ze,Ae.cyFinal=We;function dt(Lt,Xe,it,Ye){var Ee=Ye*(Xe[0]-Lt[0]),Ge=Ye*(Xe[1]-Lt[1]);return"a"+Ye*se.r+","+Ye*se.r+" 0 "+Ae.largeArc+(it?" 1 ":" 0 ")+Ee+","+Ge}var Ft=ae.hole;if(Ae.v===se.vTotal){var Qt="M"+(Ze+Ae.px0[0])+","+(We+Ae.px0[1])+dt(Ae.px0,Ae.pxmid,!0,1)+dt(Ae.pxmid,Ae.px0,!0,1)+"Z";Ft?Ie.attr("d","M"+(Ze+Ft*Ae.px0[0])+","+(We+Ft*Ae.px0[1])+dt(Ae.px0,Ae.pxmid,!1,Ft)+dt(Ae.pxmid,Ae.px0,!1,Ft)+"Z"+Qt):Ie.attr("d",Qt)}else{var Ot=dt(Ae.px0,Ae.px1,!0,1);if(Ft){var Ct=1-Ft;Ie.attr("d","M"+(Ze+Ft*Ae.px1[0])+","+(We+Ft*Ae.px1[1])+dt(Ae.px1,Ae.px0,!1,Ft)+"l"+Ct*Ae.px0[0]+","+Ct*Ae.px0[1]+Ot+"Z")}else Ie.attr("d","M"+Ze+","+We+"l"+Ae.px0[0]+","+Ae.px0[1]+Ot+"Z")}he($,Ae,se);var jt=g.castOption(ae.textposition,Ae.pts),Nt=ze.selectAll("g.slicetext").data(Ae.text&&jt!=="none"?[0]:[]);Nt.enter().append("g").classed("slicetext",!0),Nt.exit().remove(),Nt.each(function(){var Lt=a.ensureSingle(m.select(this),"text","",function(At){At.attr("data-notex",1)}),Xe=a.ensureUniformFontSize($,jt==="outside"?c(ae,Ae,q.font):M(ae,Ae,q.font));Lt.text(Ae.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Xe).call(r.convertToTspans,$);var it=e.bBox(Lt.node()),Ye;if(jt==="outside")Ye=I(it,Ae);else if(Ye=p(it,Ae,se),jt==="auto"&&Ye.scale<1){var Ee=a.ensureUniformFontSize($,ae.outsidetextfont);Lt.call(e.font,Ee),it=e.bBox(Lt.node()),Ye=I(it,Ae)}var Ge=Ye.textPosAngle,Ke=Ge===void 0?Ae.pxmid:ie(se.r,Ge);if(Ye.targetX=Ze+Ke[0]*Ye.rCenter+(Ye.x||0),Ye.targetY=We+Ke[1]*Ye.rCenter+(Ye.y||0),K(Ye,it),Ye.outside){var qe=Ye.targetY;Ae.yLabelMin=qe-it.height/2,Ae.yLabelMid=qe,Ae.yLabelMax=qe+it.height/2,Ae.labelExtraX=0,Ae.labelExtraY=0,fe=!0}Ye.fontSize=Xe.size,s(ae.type,Ye,q),Q[Le].transform=Ye,a.setTransormAndDisplay(Lt,Ye)})});var me=m.select(this).selectAll("g.titletext").data(ae.title.text?[0]:[]);if(me.enter().append("g").classed("titletext",!0),me.exit().remove(),me.each(function(){var Ae=a.ensureSingle(m.select(this),"text","",function(We){We.attr("data-notex",1)}),Le=ae.title.text;ae._meta&&(Le=a.templateString(Le,ae._meta)),Ae.text(Le).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ae.title.font).call(r.convertToTspans,$);var Ze;ae.title.position==="middle center"?Ze=D(se):Ze=R(se,re),Ae.attr("transform",n(Ze.x,Ze.y)+i(Math.min(1,Ze.scale))+n(Ze.tx,Ze.ty))}),fe&&Y(_e,ae),l(le,ae),fe&&ae.automargin){var xe=e.bBox(oe.node()),ye=ae.domain,be=re.w*(ye.x[1]-ye.x[0]),ke=re.h*(ye.y[1]-ye.y[0]),De=(.5*be-se.r)/re.w,He=(.5*ke-se.r)/re.h;u.autoMargin($,"pie."+ae.uid+".automargin",{xl:ye.x[0]-De,xr:ye.x[1]+De,yb:ye.y[0]-He,yt:ye.y[1]+He,l:Math.max(se.cx-se.r-xe.left,0),r:Math.max(xe.right-(se.cx+se.r),0),b:Math.max(xe.bottom-(se.cy+se.r),0),t:Math.max(se.cy-se.r-xe.top,0),pad:5})}})});setTimeout(function(){Z.selectAll("tspan").each(function(){var Q=m.select(this);Q.attr("dy")&&Q.attr("dy",Q.attr("dy"))})},0)}function l($,U){$.each(function(H){var q=m.select(this);if(!H.labelExtraX&&!H.labelExtraY){q.select("path.textline").remove();return}var re=q.select("g.slicetext text");H.transform.targetX+=H.labelExtraX,H.transform.targetY+=H.labelExtraY,a.setTransormAndDisplay(re,H.transform);var Z=H.cxFinal+H.pxmid[0],Q=H.cyFinal+H.pxmid[1],oe="M"+Z+","+Q,se=(H.yLabelMax-H.yLabelMin)*(H.pxmid[0]<0?-1:1)/4;if(H.labelExtraX){var ae=H.labelExtraX*H.pxmid[1]/H.pxmid[0],le=H.yLabelMid+H.labelExtraY-(H.cyFinal+H.pxmid[1]);Math.abs(ae)>Math.abs(le)?oe+="l"+le*H.pxmid[0]/H.pxmid[1]+","+le+"H"+(Z+H.labelExtraX+se):oe+="l"+H.labelExtraX+","+ae+"v"+(le-ae)+"h"+se}else oe+="V"+(H.yLabelMid+H.labelExtraY)+"h"+se;a.ensureSingle(q,"path","textline").call(T.stroke,U.outsidetextfont.color).attr({"stroke-width":Math.min(2,U.outsidetextfont.size/8),d:oe,fill:"none"})})}function x($,U,H){var q=H[0],re=q.cx,Z=q.cy,Q=q.trace,oe=Q.type==="funnelarea";"_hasHoverLabel"in Q||(Q._hasHoverLabel=!1),"_hasHoverEvent"in Q||(Q._hasHoverEvent=!1),$.on("mouseover",function(se){var ae=U._fullLayout,le=U._fullData[Q.index];if(!(U._dragging||ae.hovermode===!1)){var _e=le.hoverinfo;if(Array.isArray(_e)&&(_e=A.castHoverinfo({hoverinfo:[g.castOption(_e,se.pts)],_module:Q._module},ae,0)),_e==="all"&&(_e="label+text+value+percent+name"),le.hovertemplate||_e!=="none"&&_e!=="skip"&&_e){var fe=se.rInscribed||0,me=re+se.pxmid[0]*(1-fe),xe=Z+se.pxmid[1]*(1-fe),ye=ae.separators,be=[];if(_e&&_e.indexOf("label")!==-1&&be.push(se.label),se.text=g.castOption(le.hovertext||le.text,se.pts),_e&&_e.indexOf("text")!==-1){var ke=se.text;a.isValidTextValue(ke)&&be.push(ke)}se.value=se.v,se.valueLabel=g.formatPieValue(se.v,ye),_e&&_e.indexOf("value")!==-1&&be.push(se.valueLabel),se.percent=se.v/q.vTotal,se.percentLabel=g.formatPiePercent(se.percent,ye),_e&&_e.indexOf("percent")!==-1&&be.push(se.percentLabel);var De=le.hoverlabel,He=De.font,Ae=[];A.loneHover({trace:Q,x0:me-fe*q.r,x1:me+fe*q.r,y:xe,_x0:oe?re+se.TL[0]:me-fe*q.r,_x1:oe?re+se.TR[0]:me+fe*q.r,_y0:oe?Z+se.TL[1]:xe-fe*q.r,_y1:oe?Z+se.BL[1]:xe+fe*q.r,text:be.join("<br>"),name:le.hovertemplate||_e.indexOf("name")!==-1?le.name:void 0,idealAlign:se.pxmid[0]<0?"left":"right",color:g.castOption(De.bgcolor,se.pts)||se.color,borderColor:g.castOption(De.bordercolor,se.pts),fontFamily:g.castOption(He.family,se.pts),fontSize:g.castOption(He.size,se.pts),fontColor:g.castOption(He.color,se.pts),nameLength:g.castOption(De.namelength,se.pts),textAlign:g.castOption(De.align,se.pts),hovertemplate:g.castOption(le.hovertemplate,se.pts),hovertemplateLabels:se,eventData:[d(se,le)]},{container:ae._hoverlayer.node(),outerContainer:ae._paper.node(),gd:U,inOut_bbox:Ae}),se.bbox=Ae[0],Q._hasHoverLabel=!0}Q._hasHoverEvent=!0,U.emit("plotly_hover",{points:[d(se,le)],event:m.event})}}),$.on("mouseout",function(se){var ae=U._fullLayout,le=U._fullData[Q.index],_e=m.select(this).datum();Q._hasHoverEvent&&(se.originalEvent=m.event,U.emit("plotly_unhover",{points:[d(_e,le)],event:m.event}),Q._hasHoverEvent=!1),Q._hasHoverLabel&&(A.loneUnhover(ae._hoverlayer.node()),Q._hasHoverLabel=!1)}),$.on("click",function(se){var ae=U._fullLayout,le=U._fullData[Q.index];U._dragging||ae.hovermode===!1||(U._hoverdata=[d(se,le)],A.click(U,m.event))})}function c($,U,H){var q=g.castOption($.outsidetextfont.color,U.pts)||g.castOption($.textfont.color,U.pts)||H.color,re=g.castOption($.outsidetextfont.family,U.pts)||g.castOption($.textfont.family,U.pts)||H.family,Z=g.castOption($.outsidetextfont.size,U.pts)||g.castOption($.textfont.size,U.pts)||H.size;return{color:q,family:re,size:Z}}function M($,U,H){var q=g.castOption($.insidetextfont.color,U.pts);!q&&$._input.textfont&&(q=g.castOption($._input.textfont.color,U.pts));var re=g.castOption($.insidetextfont.family,U.pts)||g.castOption($.textfont.family,U.pts)||H.family,Z=g.castOption($.insidetextfont.size,U.pts)||g.castOption($.textfont.size,U.pts)||H.size;return{color:q||T.contrast(U.color),family:re,size:Z}}function w($,U){for(var H,q,re=0;re<$.length;re++)if(H=$[re][0],q=H.trace,q.title.text){var Z=q.title.text;q._meta&&(Z=a.templateString(Z,q._meta));var Q=e.tester.append("text").attr("data-notex",1).text(Z).call(e.font,q.title.font).call(r.convertToTspans,U),oe=e.bBox(Q.node(),!0);H.titleBox={width:oe.width,height:oe.height},Q.remove()}}function p($,U,H){var q=H.r||U.rpx1,re=U.rInscribed,Z=U.startangle===U.stopangle;if(Z)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var Q=U.ring,oe=Q===1&&Math.abs(U.startangle-U.stopangle)===Math.PI*2,se=U.halfangle,ae=U.midangle,le=H.trace.insidetextorientation,_e=le==="horizontal",fe=le==="tangential",me=le==="radial",xe=le==="auto",ye=[],be;if(!xe){var ke=function(ze,Ie){if(_(U,ze)){var Ve=Math.abs(ze-U.startangle),dt=Math.abs(ze-U.stopangle),Ft=Ve<dt?Ve:dt;Ie==="tan"?be=L($,q,Q,Ft,0):be=h($,q,Q,Ft,Math.PI/2),be.textPosAngle=ze,ye.push(be)}},De;if(_e||fe){for(De=4;De>=-4;De-=2)ke(Math.PI*De,"tan");for(De=4;De>=-4;De-=2)ke(Math.PI*(De+1),"tan")}if(_e||me){for(De=4;De>=-4;De-=2)ke(Math.PI*(De+1.5),"rad");for(De=4;De>=-4;De-=2)ke(Math.PI*(De+.5),"rad")}}if(oe||xe||_e){var He=Math.sqrt($.width*$.width+$.height*$.height);if(be={scale:re*q*2/He,rCenter:1-re,rotate:0},be.textPosAngle=(U.startangle+U.stopangle)/2,be.scale>=1)return be;ye.push(be)}(xe||me)&&(be=h($,q,Q,se,ae),be.textPosAngle=(U.startangle+U.stopangle)/2,ye.push(be)),(xe||fe)&&(be=L($,q,Q,se,ae),be.textPosAngle=(U.startangle+U.stopangle)/2,ye.push(be));for(var Ae=0,Le=0,Ze=0;Ze<ye.length;Ze++){var We=ye[Ze].scale;if(Le<We&&(Le=We,Ae=Ze),!xe&&Le>=1)break}return ye[Ae]}function _($,U){var H=$.startangle,q=$.stopangle;return H>U&&U>q||H<U&&U<q}function h($,U,H,q,re){U=Math.max(0,U-2*b);var Z=$.width/$.height,Q=P(Z,q,U,H);return{scale:Q*2/$.height,rCenter:E(Z,Q/U),rotate:S(re)}}function L($,U,H,q,re){U=Math.max(0,U-2*b);var Z=$.height/$.width,Q=P(Z,q,U,H);return{scale:Q*2/$.width,rCenter:E(Z,Q/U),rotate:S(re+Math.PI/2)}}function E($,U){return Math.cos(U)-$*U}function S($){return(180/Math.PI*$+720)%180-90}function P($,U,H,q){var re=$+1/(2*Math.tan(U));return H*Math.min(1/(Math.sqrt(re*re+.5)+re),q/(Math.sqrt($*$+q/2)+$))}function F($,U){return $.v===U.vTotal&&!U.trace.hole?1:Math.min(1/(1+1/Math.sin($.halfangle)),$.ring/2)}function I($,U){var H=U.pxmid[0],q=U.pxmid[1],re=$.width/2,Z=$.height/2;return H<0&&(re*=-1),q<0&&(Z*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(Z)*(re>0?1:-1)/2,y:Z/(1+H*H/(q*q)),outside:!0}}function D($){var U=Math.sqrt($.titleBox.width*$.titleBox.width+$.titleBox.height*$.titleBox.height);return{x:$.cx,y:$.cy,scale:$.trace.hole*$.r*2/U,tx:0,ty:-$.titleBox.height/2+$.trace.title.font.size}}function R($,U){var H=1,q=1,re,Z=$.trace,Q={x:$.cx,y:$.cy},oe={tx:0,ty:0};oe.ty+=Z.title.font.size,re=G(Z),Z.title.position.indexOf("top")!==-1?(Q.y-=(1+re)*$.r,oe.ty-=$.titleBox.height):Z.title.position.indexOf("bottom")!==-1&&(Q.y+=(1+re)*$.r);var se=O($.r,$.trace.aspectratio),ae=U.w*(Z.domain.x[1]-Z.domain.x[0])/2;return Z.title.position.indexOf("left")!==-1?(ae=ae+se,Q.x-=(1+re)*se,oe.tx+=$.titleBox.width/2):Z.title.position.indexOf("center")!==-1?ae*=2:Z.title.position.indexOf("right")!==-1&&(ae=ae+se,Q.x+=(1+re)*se,oe.tx-=$.titleBox.width/2),H=ae/$.titleBox.width,q=z($,U)/$.titleBox.height,{x:Q.x,y:Q.y,scale:Math.min(H,q),tx:oe.tx,ty:oe.ty}}function O($,U){return $/(U===void 0?1:U)}function z($,U){var H=$.trace,q=U.h*(H.domain.y[1]-H.domain.y[0]);return Math.min($.titleBox.height,q/2)}function G($){var U=$.pull;if(!U)return 0;var H;if(Array.isArray(U))for(U=0,H=0;H<$.pull.length;H++)$.pull[H]>U&&(U=$.pull[H]);return U}function Y($,U){var H,q,re,Z,Q,oe,se,ae,le,_e,fe,me,xe;function ye(He,Ae){return He.pxmid[1]-Ae.pxmid[1]}function be(He,Ae){return Ae.pxmid[1]-He.pxmid[1]}function ke(He,Ae){Ae||(Ae={});var Le=Ae.labelExtraY+(q?Ae.yLabelMax:Ae.yLabelMin),Ze=q?He.yLabelMin:He.yLabelMax,We=q?He.yLabelMax:He.yLabelMin,ze=He.cyFinal+Q(He.px0[1],He.px1[1]),Ie=Le-Ze,Ve,dt,Ft,Qt,Ot,Ct;if(Ie*se>0&&(He.labelExtraY=Ie),!!Array.isArray(U.pull))for(dt=0;dt<_e.length;dt++)Ft=_e[dt],!(Ft===He||(g.castOption(U.pull,He.pts)||0)>=(g.castOption(U.pull,Ft.pts)||0))&&((He.pxmid[1]-Ft.pxmid[1])*se>0?(Qt=Ft.cyFinal+Q(Ft.px0[1],Ft.px1[1]),Ie=Qt-Ze-He.labelExtraY,Ie*se>0&&(He.labelExtraY+=Ie)):(We+He.labelExtraY-ze)*se>0&&(Ve=3*oe*Math.abs(dt-_e.indexOf(He)),Ot=Ft.cxFinal+Z(Ft.px0[0],Ft.px1[0]),Ct=Ot+Ve-(He.cxFinal+He.pxmid[0])-He.labelExtraX,Ct*oe>0&&(He.labelExtraX+=Ct)))}for(q=0;q<2;q++)for(re=q?ye:be,Q=q?Math.max:Math.min,se=q?1:-1,H=0;H<2;H++){for(Z=H?Math.max:Math.min,oe=H?1:-1,ae=$[q][H],ae.sort(re),le=$[1-q][H],_e=le.concat(ae),me=[],fe=0;fe<ae.length;fe++)ae[fe].yLabelMid!==void 0&&me.push(ae[fe]);for(xe=!1,fe=0;q&&fe<le.length;fe++)if(le[fe].yLabelMid!==void 0){xe=le[fe];break}for(fe=0;fe<me.length;fe++){var De=fe&&me[fe-1];xe&&!fe&&(De=xe),ke(me[fe],De)}}}function ee($,U){for(var H=[],q=0;q<$.length;q++){var re=$[q][0],Z=re.trace,Q=Z.domain,oe=U.w*(Q.x[1]-Q.x[0]),se=U.h*(Q.y[1]-Q.y[0]);Z.title.text&&Z.title.position!=="middle center"&&(se-=z(re,U));var ae=oe/2,le=se/2;Z.type==="funnelarea"&&!Z.scalegroup&&(le/=Z.aspectratio),re.r=Math.min(ae,le)/(1+G(Z)),re.cx=U.l+U.w*(Z.domain.x[1]+Z.domain.x[0])/2,re.cy=U.t+U.h*(1-Z.domain.y[0])-se/2,Z.title.text&&Z.title.position.indexOf("bottom")!==-1&&(re.cy-=z(re,U)),Z.scalegroup&&H.indexOf(Z.scalegroup)===-1&&H.push(Z.scalegroup)}j($,H)}function j($,U){for(var H,q,re,Z=0;Z<U.length;Z++){var Q=1/0,oe=U[Z];for(q=0;q<$.length;q++)if(H=$[q][0],re=H.trace,re.scalegroup===oe){var se;if(re.type==="pie")se=H.r*H.r;else if(re.type==="funnelarea"){var ae,le;re.aspectratio>1?(ae=H.r,le=ae/re.aspectratio):(le=H.r,ae=le*re.aspectratio),ae*=(1+re.baseratio)/2,se=ae*le}Q=Math.min(Q,se/H.vTotal)}for(q=0;q<$.length;q++)if(H=$[q][0],re=H.trace,re.scalegroup===oe){var _e=Q*H.vTotal;re.type==="funnelarea"&&(_e/=(1+re.baseratio)/2,_e/=re.aspectratio),H.r=Math.sqrt(_e)}}}function X($){var U=$[0],H=U.r,q=U.trace,re=g.getRotationAngle(q.rotation),Z=2*Math.PI/U.vTotal,Q="px0",oe="px1",se,ae,le;if(q.direction==="counterclockwise"){for(se=0;se<$.length&&$[se].hidden;se++);if(se===$.length)return;re+=Z*$[se].v,Z*=-1,Q="px1",oe="px0"}for(le=ie(H,re),se=0;se<$.length;se++)ae=$[se],!ae.hidden&&(ae[Q]=le,ae.startangle=re,re+=Z*ae.v/2,ae.pxmid=ie(H,re),ae.midangle=re,re+=Z*ae.v/2,le=ie(H,re),ae.stopangle=re,ae[oe]=le,ae.largeArc=ae.v>U.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/U.vTotal,.5),ae.ring=1-q.hole,ae.rInscribed=F(ae,U))}function ie($,U){return[$*Math.sin(U),-$*Math.cos(U)]}function he($,U,H){var q=$._fullLayout,re=H.trace,Z=re.texttemplate,Q=re.textinfo;if(!Z&&Q&&Q!=="none"){var oe=Q.split("+"),se=function(Ae){return oe.indexOf(Ae)!==-1},ae=se("label"),le=se("text"),_e=se("value"),fe=se("percent"),me=q.separators,xe;if(xe=ae?[U.label]:[],le){var ye=g.getFirstFilled(re.text,U.pts);f(ye)&&xe.push(ye)}_e&&xe.push(g.formatPieValue(U.v,me)),fe&&xe.push(g.formatPiePercent(U.v/H.vTotal,me)),U.text=xe.join("<br>")}function be(Ae){return{label:Ae.label,value:Ae.v,valueLabel:g.formatPieValue(Ae.v,q.separators),percent:Ae.v/H.vTotal,percentLabel:g.formatPiePercent(Ae.v/H.vTotal,q.separators),color:Ae.color,text:Ae.text,customdata:a.castOption(re,Ae.i,"customdata")}}if(Z){var ke=a.castOption(re,U.i,"texttemplate");if(!ke)U.text="";else{var De=be(U),He=g.getFirstFilled(re.text,U.pts);(f(He)||He==="")&&(De.text=He),U.text=a.texttemplateString(ke,De,$._fullLayout._d3locale,De,re._meta||{})}}}function K($,U){var H=$.rotate*Math.PI/180,q=Math.cos(H),re=Math.sin(H),Z=(U.left+U.right)/2,Q=(U.top+U.bottom)/2;$.textX=Z*q-Q*re,$.textY=Z*re+Q*q,$.noCenter=!0}N.exports={plot:y,formatSliceLabel:he,transformInsideText:p,determineInsideTextFont:M,positionTitleOutside:R,prerenderTitles:w,layoutAreas:ee,attachFxHandlers:x,computeTransform:K}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(t,N,V){var m=t("@plotly/d3"),u=t("./style_one"),A=t("../bar/uniform_text").resizeText;N.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");A(e,a,"pie"),a.each(function(i){var n=i[0],r=n.trace,v=m.select(this);v.style({opacity:r.opacity}),v.selectAll("path.surface").each(function(s){m.select(this).call(u,s,r)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(t,N,V){var m=t("../../components/color"),u=t("./helpers").castOption;N.exports=function(T,e,a){var i=a.marker.line,n=u(i.color,e.pts)||m.defaultLine,r=u(i.width,e.pts)||0;T.style("stroke-width",r).call(m.fill,e.color).call(m.stroke,n)}},{"../../components/color":367,"./helpers":915}],922:[function(t,N,V){var m=t("../scatter/attributes");N.exports={x:m.x,y:m.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:m.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(t,N,V){var m=t("../../../stackgl_modules").gl_pointcloud2d,u=t("../../lib/str2rgbarray"),A=t("../../plots/cartesian/autorange").findExtremes,T=t("../scatter/get_trace_color");function e(n,r){this.scene=n,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=m(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=e.prototype;a.handlePick=function(n){var r=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},a.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=T(n,{})},a.updateFast=function(n){var r=this.xData=this.pickXData=n.x,v=this.yData=this.pickYData=n.y,s=this.pickXYData=n.xy,o=n.xbounds&&n.ybounds,b=n.indices,g,d,f,y=this.bounds,l,x,c;if(s){if(f=s,g=s.length>>>1,o)y[0]=n.xbounds[0],y[2]=n.xbounds[1],y[1]=n.ybounds[0],y[3]=n.ybounds[1];else for(c=0;c<g;c++)l=f[c*2],x=f[c*2+1],l<y[0]&&(y[0]=l),l>y[2]&&(y[2]=l),x<y[1]&&(y[1]=x),x>y[3]&&(y[3]=x);if(b)d=b;else for(d=new Int32Array(g),c=0;c<g;c++)d[c]=c}else for(g=r.length,f=new Float32Array(2*g),d=new Int32Array(g),c=0;c<g;c++)l=r[c],x=v[c],d[c]=c,f[c*2]=l,f[c*2+1]=x,l<y[0]&&(y[0]=l),l>y[2]&&(y[2]=l),x<y[1]&&(y[1]=x),x>y[3]&&(y[3]=x);this.idToIndex=d,this.pointcloudOptions.idToIndex=d,this.pointcloudOptions.positions=f;var M=u(n.marker.color),w=u(n.marker.border.color),p=n.opacity*n.marker.opacity;M[3]*=p,this.pointcloudOptions.color=M;var _=n.marker.blend;if(_===null){var h=100;_=r.length<h||v.length<h}this.pointcloudOptions.blend=_,w[3]*=p,this.pointcloudOptions.borderColor=w;var L=n.marker.sizemin,E=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=E,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var S=this.scene.xaxis,P=this.scene.yaxis,F=E/2||.5;n._extremes[S._id]=A(S,[y[0],y[2]],{ppad:F}),n._extremes[P._id]=A(P,[y[1],y[3]],{ppad:F})},a.dispose=function(){this.pointcloud.dispose()};function i(n,r){var v=new e(n,r.uid);return v.update(r),v}N.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(t,N,V){var m=t("../../lib"),u=t("./attributes");N.exports=function(T,e,a){function i(n,r){return m.coerce(T,e,u,n,r)}i("x"),i("y"),i("xbounds"),i("ybounds"),T.xy&&T.xy instanceof Float32Array&&(e.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(e.indices=T.indices),i("text"),i("marker.color",a),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",a),i("marker.border.arearatio"),e._length=null}},{"../../lib":515,"./attributes":922}],925:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../scatter3d/calc"),plot:t("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(t,N,V){var m=t("../../plots/font_attributes"),u=t("../../plots/attributes"),A=t("../../components/color/attributes"),T=t("../../components/fx/attributes"),e=t("../../plots/domain").attributes,a=t("../../plots/template_attributes").hovertemplateAttrs,i=t("../../components/colorscale/attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,v=t("../../lib/extend").extendFlat,s=t("../../plot_api/edit_types").overrideAll,o=N.exports=s({hoverinfo:v({},u.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:m({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:A.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:A.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:v(i().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");o.transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(t,N,V){var m=t("../../plot_api/edit_types").overrideAll,u=t("../../plots/get_data").getModuleCalcData,A=t("./plot"),T=t("../../components/fx/layout_attributes"),e=t("../../lib/setcursor"),a=t("../../components/dragelement"),i=t("../../components/selections").prepSelect,n=t("../../lib"),r=t("../../registry"),v="sankey";V.name=v,V.baseLayoutAttrOverrides=m({hoverlabel:T.hoverlabel},"plot","nested"),V.plot=function(o){var b=u(o.calcdata,v)[0];A(o,b),V.updateFx(o)},V.clean=function(o,b,g,d){var f=d._has&&d._has(v),y=b._has&&b._has(v);f&&!y&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},V.updateFx=function(o){for(var b=0;b<o._fullData.length;b++)s(o,b)};function s(o,b){var g=o._fullData[b],d=o._fullLayout,f=d.dragmode,y=d.dragmode==="pan"?"move":"crosshair",l=g._bgRect;if(!!l&&!(f==="pan"||f==="zoom")){e(l,y);var x={_id:"x",c2p:n.identity,_offset:g._sankey.translateX,_length:g._sankey.width},c={_id:"y",c2p:n.identity,_offset:g._sankey.translateY,_length:g._sankey.height},M={gd:o,element:l.node(),plotinfo:{id:b,xaxis:x,yaxis:c,fillRangeItems:n.noop},subplot:b,xaxes:[x],yaxes:[c],doneFnCompleted:function(w){var p=o._fullData[b],_,h=p.node.groups.slice(),L=[];function E(I){for(var D=p._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===I)return D[R]}for(var S=0;S<w.length;S++){var P=E(w[S].pointNumber);if(!!P)if(P.group){for(var F=0;F<P.childrenNodes.length;F++)L.push(P.childrenNodes[F].pointNumber);h[P.pointNumber-p.node._count]=!1}else L.push(P.pointNumber)}_=h.filter(Boolean).concat([L]),r.call("_guiRestyle",o,{"node.groups":[_]},b)}};M.prepFn=function(w,p,_){i(w,p,_,M,f)},a.init(M)}}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(t,N,V){var m=t("strongly-connected-components"),u=t("../../lib"),A=t("../../lib/gup").wrap,T=u.isArrayOrTypedArray,e=u.isIndex,a=t("../../components/colorscale");function i(r){var v=r.node,s=r.link,o=[],b=T(s.color),g=T(s.customdata),d={},f={},y=s.colorscales.length,l;for(l=0;l<y;l++){var x=s.colorscales[l],c=a.extractScale(x,{cLetter:"c"}),M=a.makeColorScaleFunc(c);f[x.label]=M}var w=0;for(l=0;l<s.value.length;l++)s.source[l]>w&&(w=s.source[l]),s.target[l]>w&&(w=s.target[l]);var p=w+1;r.node._count=p;var _,h=r.node.groups,L={};for(l=0;l<h.length;l++){var E=h[l];for(_=0;_<E.length;_++){var S=E[_],P=p+l;L.hasOwnProperty(S)?u.warn("Node "+S+" is already part of a group."):L[S]=P}}var F={source:[],target:[]};for(l=0;l<s.value.length;l++){var I=s.value[l],D=s.source[l],R=s.target[l];if(!!(I>0&&e(D,p)&&e(R,p))&&!(L.hasOwnProperty(D)&&L.hasOwnProperty(R)&&L[D]===L[R])){L.hasOwnProperty(R)&&(R=L[R]),L.hasOwnProperty(D)&&(D=L[D]),D=+D,R=+R,d[D]=d[R]=!0;var O="";s.label&&s.label[l]&&(O=s.label[l]);var z=null;O&&f.hasOwnProperty(O)&&(z=f[O]),o.push({pointNumber:l,label:O,color:b?s.color[l]:s.color,customdata:g?s.customdata[l]:s.customdata,concentrationscale:z,source:D,target:R,value:+I}),F.source.push(D),F.target.push(R)}}var G=p+h.length,Y=T(v.color),ee=T(v.customdata),j=[];for(l=0;l<G;l++)if(!!d[l]){var X=v.label[l];j.push({group:l>p-1,childrenNodes:[],pointNumber:l,label:X,color:Y?v.color[l]:v.color,customdata:ee?v.customdata[l]:v.customdata})}var ie=!1;return n(G,F.source,F.target)&&(ie=!0),{circular:ie,links:o,nodes:j,groups:h,groupLookup:L}}function n(r,v,s){for(var o=u.init2dArray(r,0),b=0;b<Math.min(v.length,s.length);b++)if(u.isIndex(v[b],r)&&u.isIndex(s[b],r)){if(v[b]===s[b])return!0;o[v[b]].push(s[b])}var g=m(o);return g.components.some(function(d){return d.length>1})}N.exports=function(v,s){var o=i(s);return A({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(t,N,V){N.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("../../components/color"),T=t("tinycolor2"),e=t("../../plots/domain").defaults,a=t("../../components/fx/hoverlabel_defaults"),i=t("../../plot_api/plot_template"),n=t("../../plots/array_container_defaults");N.exports=function(s,o,b,g){function d(E,S){return m.coerce(s,o,u,E,S)}var f=m.extendDeep(g.hoverlabel,s.hoverlabel),y=s.node,l=i.newContainer(o,"node");function x(E,S){return m.coerce(y,l,u.node,E,S)}x("label"),x("groups"),x("x"),x("y"),x("pad"),x("thickness"),x("line.color"),x("line.width"),x("hoverinfo",s.hoverinfo),a(y,l,x,f),x("hovertemplate");var c=g.colorway,M=function(E){return c[E%c.length]};x("color",l.label.map(function(E,S){return A.addOpacity(M(S),.8)})),x("customdata");var w=s.link||{},p=i.newContainer(o,"link");function _(E,S){return m.coerce(w,p,u.link,E,S)}_("label"),_("arrowlen"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",s.hoverinfo),a(w,p,_,f),_("hovertemplate");var h=T(g.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",m.repeat(h,p.value.length)),_("customdata"),n(w,p,{name:"colorscales",handleItemDefaults:r}),e(o,g,d),d("orientation"),d("valueformat"),d("valuesuffix");var L;l.x.length&&l.y.length&&(L="freeform"),d("arrangement",L),m.coerceFont(d,"textfont",m.extendFlat({},g.font)),o._length=null};function r(v,s){function o(b,g){return m.coerce(v,s,u.link.colorscales,b,g)}o("label"),o("cmin"),o("cmax"),o("colorscale")}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"sankey",basePlotModule:t("./base_plot"),selectPoints:t("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=u.numberFormat,T=t("./render"),e=t("../../components/fx"),a=t("../../components/color"),i=t("./constants").cn,n=u._;function r(c){return c!==""}function v(c,M){return c.filter(function(w){return w.key===M.traceId})}function s(c,M){m.select(c).select("path").style("fill-opacity",M),m.select(c).select("rect").style("fill-opacity",M)}function o(c){m.select(c).select("text.name").style("fill","black")}function b(c){return function(M){return c.node.sourceLinks.indexOf(M.link)!==-1||c.node.targetLinks.indexOf(M.link)!==-1}}function g(c){return function(M){return M.node.sourceLinks.indexOf(c.link)!==-1||M.node.targetLinks.indexOf(c.link)!==-1}}function d(c,M,w){M&&w&&v(w,M).selectAll("."+i.sankeyLink).filter(b(M)).call(y.bind(0,M,w,!1))}function f(c,M,w){M&&w&&v(w,M).selectAll("."+i.sankeyLink).filter(b(M)).call(l.bind(0,M,w,!1))}function y(c,M,w,p){var _=p.datum().link.label;p.style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),_&&v(M,c).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===_}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),w&&v(M,c).selectAll("."+i.sankeyNode).filter(g(c)).call(d)}function l(c,M,w,p){var _=p.datum().link.label;p.style("fill-opacity",function(h){return h.tinyColorAlpha}),_&&v(M,c).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===_}).style("fill-opacity",function(h){return h.tinyColorAlpha}),w&&v(M,c).selectAll(i.sankeyNode).filter(g(c)).call(f)}function x(c,M){var w=c.hoverlabel||{},p=u.nestedProperty(w,M).get();return Array.isArray(p)?!1:p}N.exports=function(M,w){for(var p=M._fullLayout,_=p._paper,h=p._size,L=0;L<M._fullData.length;L++)if(!!M._fullData[L].visible&&M._fullData[L].type===i.sankey&&!M._fullData[L]._viewInitial){var E=M._fullData[L].node;M._fullData[L]._viewInitial={node:{groups:E.groups.slice(),x:E.x.slice(),y:E.y.slice()}}}var S=function(ie,he){var K=he.link;K.originalEvent=m.event,M._hoverdata=[K],e.click(M,{target:!0})},P=function(ie,he,K){M._fullLayout.hovermode!==!1&&(m.select(ie).call(y.bind(0,he,K,!0)),he.link.trace.link.hoverinfo!=="skip"&&(he.link.fullData=he.link.trace,M.emit("plotly_hover",{event:m.event,points:[he.link]})))},F=n(M,"source:")+" ",I=n(M,"target:")+" ",D=n(M,"concentration:")+" ",R=n(M,"incoming flow count:")+" ",O=n(M,"outgoing flow count:")+" ",z=function(ie,he){if(M._fullLayout.hovermode===!1)return;var K=he.link.trace.link;if(K.hoverinfo==="none"||K.hoverinfo==="skip")return;var $=[];function U(se){var ae,le;se.circular?(ae=(se.circularPathData.leftInnerExtent+se.circularPathData.rightInnerExtent)/2,le=se.circularPathData.verticalFullExtent):(ae=(se.source.x1+se.target.x0)/2,le=(se.y0+se.y1)/2);var _e=[ae,le];return se.trace.orientation==="v"&&_e.reverse(),_e[0]+=he.parent.translateX,_e[1]+=he.parent.translateY,_e}for(var H=0,q=0;q<he.flow.links.length;q++){var re=he.flow.links[q];if(!(M._fullLayout.hovermode==="closest"&&he.link.pointNumber!==re.pointNumber)){he.link.pointNumber===re.pointNumber&&(H=q),re.fullData=re.trace,K=he.link.trace.link;var Z=U(re),Q={valueLabel:A(he.valueFormat)(re.value)+he.valueSuffix};$.push({x:Z[0],y:Z[1],name:Q.valueLabel,text:[re.label||"",F+re.source.label,I+re.target.label,re.concentrationscale?D+A("%0.2f")(re.flow.labelConcentration):""].filter(r).join("<br>"),color:x(K,"bgcolor")||a.addOpacity(re.color,1),borderColor:x(K,"bordercolor"),fontFamily:x(K,"font.family"),fontSize:x(K,"font.size"),fontColor:x(K,"font.color"),nameLength:x(K,"namelength"),textAlign:x(K,"align"),idealAlign:m.event.x<Z[0]?"right":"left",hovertemplate:K.hovertemplate,hovertemplateLabels:Q,eventData:[re]})}}var oe=e.loneHover($,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:M,anchorIndex:H});oe.each(function(){var se=this;he.link.concentrationscale||s(se,.65),o(se)})},G=function(ie,he,K){M._fullLayout.hovermode!==!1&&(m.select(ie).call(l.bind(0,he,K,!0)),he.link.trace.link.hoverinfo!=="skip"&&(he.link.fullData=he.link.trace,M.emit("plotly_unhover",{event:m.event,points:[he.link]})),e.loneUnhover(p._hoverlayer.node()))},Y=function(ie,he,K){var $=he.node;$.originalEvent=m.event,M._hoverdata=[$],m.select(ie).call(f,he,K),e.click(M,{target:!0})},ee=function(ie,he,K){M._fullLayout.hovermode!==!1&&(m.select(ie).call(d,he,K),he.node.trace.node.hoverinfo!=="skip"&&(he.node.fullData=he.node.trace,M.emit("plotly_hover",{event:m.event,points:[he.node]})))},j=function(ie,he){if(M._fullLayout.hovermode!==!1){var K=he.node.trace.node;if(!(K.hoverinfo==="none"||K.hoverinfo==="skip")){var $=m.select(ie).select("."+i.nodeRect),U=M._fullLayout._paperdiv.node().getBoundingClientRect(),H=$.node().getBoundingClientRect(),q=H.left-2-U.left,re=H.right+2-U.left,Z=H.top+H.height/4-U.top,Q={valueLabel:A(he.valueFormat)(he.node.value)+he.valueSuffix};he.node.fullData=he.node.trace,M._fullLayout._calcInverseTransform(M);var oe=M._fullLayout._invScaleX,se=M._fullLayout._invScaleY,ae=e.loneHover({x0:oe*q,x1:oe*re,y:se*Z,name:A(he.valueFormat)(he.node.value)+he.valueSuffix,text:[he.node.label,R+he.node.targetLinks.length,O+he.node.sourceLinks.length].filter(r).join("<br>"),color:x(K,"bgcolor")||he.tinyColorHue,borderColor:x(K,"bordercolor"),fontFamily:x(K,"font.family"),fontSize:x(K,"font.size"),fontColor:x(K,"font.color"),nameLength:x(K,"namelength"),textAlign:x(K,"align"),idealAlign:"left",hovertemplate:K.hovertemplate,hovertemplateLabels:Q,eventData:[he.node]},{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:M});s(ae,.85),o(ae)}}},X=function(ie,he,K){M._fullLayout.hovermode!==!1&&(m.select(ie).call(f,he,K),he.node.trace.node.hoverinfo!=="skip"&&(he.node.fullData=he.node.trace,M.emit("plotly_unhover",{event:m.event,points:[he.node]})),e.loneUnhover(p._hoverlayer.node()))};T(M,_,w,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:P,follow:z,unhover:G,select:S},nodeEvents:{hover:ee,follow:j,unhover:X,select:Y}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(t,N,V){var m=t("d3-force"),u=t("d3-interpolate").interpolateNumber,A=t("@plotly/d3"),T=t("@plotly/d3-sankey"),e=t("@plotly/d3-sankey-circular"),a=t("./constants"),i=t("tinycolor2"),n=t("../../components/color"),r=t("../../components/drawing"),v=t("../../lib"),s=v.strTranslate,o=v.strRotate,b=t("../../lib/gup"),g=b.keyFun,d=b.repeat,f=b.unwrap,y=t("../../lib/svg_text_utils"),l=t("../../registry"),x=t("../../constants/alignment"),c=x.CAP_SHIFT,M=x.LINE_SPACING,w=3;function p(U,H,q){var re=f(H),Z=re.trace,Q=Z.domain,oe=Z.orientation==="h",se=Z.node.pad,ae=Z.node.thickness,le=U.width*(Q.x[1]-Q.x[0]),_e=U.height*(Q.y[1]-Q.y[0]),fe=re._nodes,me=re._links,xe=re.circular,ye;xe?ye=e.sankeyCircular().circularLinkGap(0):ye=T.sankey(),ye.iterations(a.sankeyIterations).size(oe?[le,_e]:[_e,le]).nodeWidth(ae).nodePadding(se).nodeId(function(Ot){return Ot.pointNumber}).nodes(fe).links(me);var be=ye();ye.nodePadding()<se&&v.warn("node.pad was reduced to ",ye.nodePadding()," to fit within the figure.");var ke,De,He;for(var Ae in re._groupLookup){var Le=parseInt(re._groupLookup[Ae]),Ze;for(ke=0;ke<be.nodes.length;ke++)if(be.nodes[ke].pointNumber===Le){Ze=be.nodes[ke];break}if(!!Ze){var We={pointNumber:parseInt(Ae),x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};be.nodes.unshift(We),Ze.childrenNodes.unshift(We)}}function ze(){for(ke=0;ke<be.nodes.length;ke++){var Ot=be.nodes[ke],Ct={},jt,Nt;for(De=0;De<Ot.targetLinks.length;De++)Nt=Ot.targetLinks[De],jt=Nt.source.pointNumber+":"+Nt.target.pointNumber,Ct.hasOwnProperty(jt)||(Ct[jt]=[]),Ct[jt].push(Nt);var Lt=Object.keys(Ct);for(De=0;De<Lt.length;De++){jt=Lt[De];var Xe=Ct[jt],it=0,Ye={};for(He=0;He<Xe.length;He++)Nt=Xe[He],Ye[Nt.label]||(Ye[Nt.label]=0),Ye[Nt.label]+=Nt.value,it+=Nt.value;for(He=0;He<Xe.length;He++)Nt=Xe[He],Nt.flow={value:it,labelConcentration:Ye[Nt.label]/it,concentration:Nt.value/it,links:Xe},Nt.concentrationscale&&(Nt.color=i(Nt.concentrationscale(Nt.flow.labelConcentration)))}var Ee=0;for(De=0;De<Ot.sourceLinks.length;De++)Ee+=Ot.sourceLinks[De].value;for(De=0;De<Ot.sourceLinks.length;De++)Nt=Ot.sourceLinks[De],Nt.concentrationOut=Nt.value/Ee;var Ge=0;for(De=0;De<Ot.targetLinks.length;De++)Ge+=Ot.targetLinks[De].value;for(De=0;De<Ot.targetLinks.length;De++)Nt=Ot.targetLinks[De],Nt.concenrationIn=Nt.value/Ge}}ze();function Ie(Ot){Ot.forEach(function(Ct){var jt,Nt,Lt=0,Xe=Ct.length,it;for(Ct.sort(function(Ye,Ee){return Ye.y0-Ee.y0}),it=0;it<Xe;++it)jt=Ct[it],jt.y0>=Lt||(Nt=Lt-jt.y0,Nt>1e-6&&(jt.y0+=Nt,jt.y1+=Nt)),Lt=jt.y1+se})}function Ve(Ot){var Ct=Ot.map(function(Ee,Ge){return{x0:Ee.x0,index:Ge}}).sort(function(Ee,Ge){return Ee.x0-Ge.x0}),jt=[],Nt=-1,Lt,Xe=-1/0,it;for(ke=0;ke<Ct.length;ke++){var Ye=Ot[Ct[ke].index];Ye.x0>Xe+ae&&(Nt+=1,Lt=Ye.x0),Xe=Ye.x0,jt[Nt]||(jt[Nt]=[]),jt[Nt].push(Ye),it=Lt-Ye.x0,Ye.x0+=it,Ye.x1+=it}return jt}if(Z.node.x.length&&Z.node.y.length){for(ke=0;ke<Math.min(Z.node.x.length,Z.node.y.length,be.nodes.length);ke++)if(Z.node.x[ke]&&Z.node.y[ke]){var dt=[Z.node.x[ke]*le,Z.node.y[ke]*_e];be.nodes[ke].x0=dt[0]-ae/2,be.nodes[ke].x1=dt[0]+ae/2;var Ft=be.nodes[ke].y1-be.nodes[ke].y0;be.nodes[ke].y0=dt[1]-Ft/2,be.nodes[ke].y1=dt[1]+Ft/2}if(Z.arrangement==="snap"){fe=be.nodes;var Qt=Ve(fe);Ie(Qt)}ye.update(be)}return{circular:xe,key:q,trace:Z,guid:v.randstr(),horizontal:oe,width:le,height:_e,nodePad:Z.node.pad,nodeLineColor:Z.node.line.color,nodeLineWidth:Z.node.line.width,linkLineColor:Z.link.line.color,linkLineWidth:Z.link.line.width,linkArrowLength:Z.link.arrowlen,valueFormat:Z.valueformat,valueSuffix:Z.valuesuffix,textFont:Z.textfont,translateX:Q.x[0]*U.width+U.margin.l,translateY:U.height-Q.y[1]*U.height+U.margin.t,dragParallel:oe?_e:le,dragPerpendicular:oe?le:_e,arrangement:Z.arrangement,sankey:ye,graph:be,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(U,H,q){var re=i(H.color),Z=H.source.label+"|"+H.target.label,Q=Z+"__"+q;return H.trace=U.trace,H.curveNumber=U.trace.index,{circular:U.circular,key:Q,traceId:U.key,pointNumber:H.pointNumber,link:H,tinyColorHue:n.tinyRGB(re),tinyColorAlpha:re.getAlpha(),linkPath:L,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,linkArrowLength:U.linkArrowLength,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:H.flow}}function h(U,H){var q="",re=U.width/2,Z=U.circularPathData;return U.circularLinkType==="top"?q="M "+(Z.targetX-H)+" "+(Z.targetY+re)+" L"+(Z.rightInnerExtent-H)+" "+(Z.targetY+re)+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightSmallArcRadius+re)+" 0 0 1 "+(Z.rightFullExtent-re-H)+" "+(Z.targetY-Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-re-H)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightLargeArcRadius+re)+" 0 0 1 "+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent-re)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent-re)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftLargeArcRadius+re)+" 0 0 1 "+(Z.leftFullExtent+re)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+re)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftSmallArcRadius+re)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.sourceY+re)+"L"+Z.sourceX+" "+(Z.sourceY+re)+"L"+Z.sourceX+" "+(Z.sourceY-re)+"L"+Z.leftInnerExtent+" "+(Z.sourceY-re)+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftSmallArcRadius-re)+" 0 0 0 "+(Z.leftFullExtent-re)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-re)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftLargeArcRadius-re)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent+re)+"L"+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent+re)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightLargeArcRadius-re)+" 0 0 0 "+(Z.rightFullExtent+re-H)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+re-H)+" "+(Z.targetY-Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightSmallArcRadius-re)+" 0 0 0 "+(Z.rightInnerExtent-H)+" "+(Z.targetY-re)+"L"+(Z.targetX-H)+" "+(Z.targetY-re)+(H>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z":q="M "+(Z.targetX-H)+" "+(Z.targetY-re)+" L"+(Z.rightInnerExtent-H)+" "+(Z.targetY-re)+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightSmallArcRadius+re)+" 0 0 0 "+(Z.rightFullExtent-re-H)+" "+(Z.targetY+Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-re-H)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+re)+" "+(Z.rightLargeArcRadius+re)+" 0 0 0 "+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent+re)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent+re)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftLargeArcRadius+re)+" 0 0 0 "+(Z.leftFullExtent+re)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+re)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+re)+" "+(Z.leftSmallArcRadius+re)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.sourceY-re)+"L"+Z.sourceX+" "+(Z.sourceY-re)+"L"+Z.sourceX+" "+(Z.sourceY+re)+"L"+Z.leftInnerExtent+" "+(Z.sourceY+re)+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftSmallArcRadius-re)+" 0 0 1 "+(Z.leftFullExtent-re)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-re)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-re)+" "+(Z.leftLargeArcRadius-re)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent-re)+"L"+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent-re)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightLargeArcRadius-re)+" 0 0 1 "+(Z.rightFullExtent+re-H)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+re-H)+" "+(Z.targetY+Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-re)+" "+(Z.rightSmallArcRadius-re)+" 0 0 1 "+(Z.rightInnerExtent-H)+" "+(Z.targetY+re)+"L"+(Z.targetX-H)+" "+(Z.targetY+re)+(H>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z",q}function L(){var U=.5;function H(q){var re=q.linkArrowLength;if(q.link.circular)return h(q.link,re);var Z=Math.abs((q.link.target.x0-q.link.source.x1)/2);re>Z&&(re=Z);var Q=q.link.source.x1,oe=q.link.target.x0-re,se=u(Q,oe),ae=se(U),le=se(1-U),_e=q.link.y0-q.link.width/2,fe=q.link.y0+q.link.width/2,me=q.link.y1-q.link.width/2,xe=q.link.y1+q.link.width/2,ye="M"+Q+","+_e,be="C"+ae+","+_e+" "+le+","+me+" "+oe+","+me,ke="C"+le+","+xe+" "+ae+","+fe+" "+Q+","+fe,De=re>0?"L"+(oe+re)+","+(me+q.link.width/2):"";return De+="L"+oe+","+xe,ye+be+De+ke+"Z"}return H}function E(U,H){var q=i(H.color),re=a.nodePadAcross,Z=U.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var Q=H.dx,oe=Math.max(.5,H.dy),se="node_"+H.pointNumber;return H.group&&(se=v.randstr()),H.trace=U.trace,H.curveNumber=U.trace.index,{index:H.pointNumber,key:se,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:U.key,trace:U.trace,node:H,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(Q),visibleHeight:oe,zoneX:-re,zoneY:-Z,zoneWidth:Q+2*re,zoneHeight:oe+2*Z,labelY:U.horizontal?H.dy/2+1:H.dx/2+1,left:H.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:q.getBrightness()<=128,tinyColorHue:n.tinyRGB(q),tinyColorAlpha:q.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,se].join("_"),interactionState:U.interactionState,figure:U}}function S(U){U.attr("transform",function(H){return s(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function P(U){U.call(S)}function F(U,H){U.call(P),H.attr("d",L())}function I(U){U.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function D(U){return U.link.width>1||U.linkLineWidth>0}function R(U){var H=s(U.translateX,U.translateY);return H+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(U,H,q){U.on(".basic",null).on("mouseover.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.hover(this,re,H),re.interactionState.hovered=[this,re])}).on("mousemove.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.follow(this,re),re.interactionState.hovered=[this,re])}).on("mouseout.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.unhover(this,re,H),re.interactionState.hovered=!1)}).on("click.basic",function(re){re.interactionState.hovered&&(q.unhover(this,re,H),re.interactionState.hovered=!1),!re.interactionState.dragInProgress&&!re.partOfGroup&&q.select(this,re,H)})}function z(U,H,q,re){var Z=A.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if(Q.arrangement!=="fixed"&&(v.ensureSingle(re._fullLayout._infolayer,"g","dragcover",function(se){re._fullLayout._dragCover=se}),v.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,ie(Q.node),Q.interactionState.hovered&&(q.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),Q.arrangement==="snap")){var oe=Q.traceId+"|"+Q.key;Q.forceLayouts[oe]?Q.forceLayouts[oe].alpha(1):G(U,oe,Q),Y(U,H,Q,oe,re)}}).on("drag",function(Q){if(Q.arrangement!=="fixed"){var oe=A.event.x,se=A.event.y;Q.arrangement==="snap"?(Q.node.x0=oe-Q.visibleWidth/2,Q.node.x1=oe+Q.visibleWidth/2,Q.node.y0=se-Q.visibleHeight/2,Q.node.y1=se+Q.visibleHeight/2):(Q.arrangement==="freeform"&&(Q.node.x0=oe-Q.visibleWidth/2,Q.node.x1=oe+Q.visibleWidth/2),se=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,se)),Q.node.y0=se-Q.visibleHeight/2,Q.node.y1=se+Q.visibleHeight/2),ie(Q.node),Q.arrangement!=="snap"&&(Q.sankey.update(Q.graph),F(U.filter(he(Q)),H))}}).on("dragend",function(Q){if(Q.arrangement!=="fixed"){Q.interactionState.dragInProgress=!1;for(var oe=0;oe<Q.node.childrenNodes.length;oe++)Q.node.childrenNodes[oe].x=Q.node.x,Q.node.childrenNodes[oe].y=Q.node.y;Q.arrangement!=="snap"&&j(Q,re)}});U.on(".drag",null).call(Z)}function G(U,H,q,re){K(q.graph.nodes);var Z=q.graph.nodes.filter(function(Q){return Q.originalX===q.node.originalX}).filter(function(Q){return!Q.partOfGroup});q.forceLayouts[H]=m.forceSimulation(Z).alphaDecay(0).force("collide",m.forceCollide().radius(function(Q){return Q.dy/2+q.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",ee(U,H,Z,q)).stop()}function Y(U,H,q,re,Z){window.requestAnimationFrame(function Q(){var oe;for(oe=0;oe<a.forceTicksPerFrame;oe++)q.forceLayouts[re].tick();var se=q.graph.nodes;if($(se),q.sankey.update(q.graph),F(U.filter(he(q)),H),q.forceLayouts[re].alpha()>0)window.requestAnimationFrame(Q);else{var ae=q.node.originalX;q.node.x0=ae-q.visibleWidth/2,q.node.x1=ae+q.visibleWidth/2,j(q,Z)}})}function ee(U,H,q,re){return function(){for(var Q=0,oe=0;oe<q.length;oe++){var se=q[oe];se===re.interactionState.dragInProgress?(se.x=se.lastDraggedX,se.y=se.lastDraggedY):(se.vx=(se.originalX-se.x)/a.forceTicksPerFrame,se.y=Math.min(re.size-se.dy/2,Math.max(se.dy/2,se.y))),Q=Math.max(Q,Math.abs(se.vx),Math.abs(se.vy))}!re.interactionState.dragInProgress&&Q<.1&&re.forceLayouts[H].alpha()>0&&re.forceLayouts[H].alpha(0)}}function j(U,H){for(var q=[],re=[],Z=0;Z<U.graph.nodes.length;Z++){var Q=(U.graph.nodes[Z].x0+U.graph.nodes[Z].x1)/2,oe=(U.graph.nodes[Z].y0+U.graph.nodes[Z].y1)/2;q.push(Q/U.figure.width),re.push(oe/U.figure.height)}l.call("_guiRestyle",H,{"node.x":[q],"node.y":[re]},U.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function X(U){var H=[],q;for(q=0;q<U.length;q++)U[q].originalX=(U[q].x0+U[q].x1)/2,U[q].originalY=(U[q].y0+U[q].y1)/2,H.indexOf(U[q].originalX)===-1&&H.push(U[q].originalX);for(H.sort(function(re,Z){return re-Z}),q=0;q<U.length;q++)U[q].originalLayerIndex=H.indexOf(U[q].originalX),U[q].originalLayer=U[q].originalLayerIndex/(H.length-1)}function ie(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function he(U){return function(H){return H.node.originalX===U.node.originalX}}function K(U){for(var H=0;H<U.length;H++)U[H].y=(U[H].y0+U[H].y1)/2,U[H].x=(U[H].x0+U[H].x1)/2}function $(U){for(var H=0;H<U.length;H++)U[H].y0=U[H].y-U[H].dy/2,U[H].y1=U[H].y0+U[H].dy,U[H].x0=U[H].x-U[H].dx/2,U[H].x1=U[H].x0+U[H].dx}N.exports=function(U,H,q,re,Z){var Q=U._context.staticPlot,oe=!1;v.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){oe=!0});var se=U._fullLayout._dragCover,ae=q.filter(function(ke){return f(ke).trace.visible}).map(p.bind(null,re)),le=H.selectAll("."+a.cn.sankey).data(ae,g);le.exit().remove(),le.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Q?"none":"auto").attr("transform",R),le.each(function(ke,De){U._fullData[De]._sankey=ke;var He="bgsankey-"+ke.trace.uid+"-"+De;v.ensureSingle(U._fullLayout._draggers,"rect",He),U._fullData[De]._bgRect=A.select("."+He),U._fullData[De]._bgRect.style("pointer-events",Q?"none":"all").attr("width",ke.width).attr("height",ke.height).attr("x",ke.translateX).attr("y",ke.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),le.transition().ease(a.ease).duration(a.duration).attr("transform",R);var _e=le.selectAll("."+a.cn.sankeyLinks).data(d,g);_e.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var fe=_e.selectAll("."+a.cn.sankeyLink).data(function(ke){var De=ke.graph.links;return De.filter(function(He){return He.value}).map(_.bind(null,ke))},g);fe.enter().append("path").classed(a.cn.sankeyLink,!0).call(O,le,Z.linkEvents),fe.style("stroke",function(ke){return D(ke)?n.tinyRGB(i(ke.linkLineColor)):ke.tinyColorHue}).style("stroke-opacity",function(ke){return D(ke)?n.opacity(ke.linkLineColor):ke.tinyColorAlpha}).style("fill",function(ke){return ke.tinyColorHue}).style("fill-opacity",function(ke){return ke.tinyColorAlpha}).style("stroke-width",function(ke){return D(ke)?ke.linkLineWidth:1}).attr("d",L()),fe.style("opacity",function(){return U._context.staticPlot||oe||se?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),fe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var me=le.selectAll("."+a.cn.sankeyNodeSet).data(d,g);me.enter().append("g").classed(a.cn.sankeyNodeSet,!0),me.style("cursor",function(ke){switch(ke.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var xe=me.selectAll("."+a.cn.sankeyNode).data(function(ke){var De=ke.graph.nodes;return X(De),De.map(E.bind(null,ke))},g);xe.enter().append("g").classed(a.cn.sankeyNode,!0).call(S).style("opacity",function(ke){return(U._context.staticPlot||oe)&&!ke.partOfGroup?1:0}),xe.call(O,le,Z.nodeEvents).call(z,fe,Z,U),xe.transition().ease(a.ease).duration(a.duration).call(S).style("opacity",function(ke){return ke.partOfGroup?0:1}),xe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ye=xe.selectAll("."+a.cn.nodeRect).data(d);ye.enter().append("rect").classed(a.cn.nodeRect,!0).call(I),ye.style("stroke-width",function(ke){return ke.nodeLineWidth}).style("stroke",function(ke){return n.tinyRGB(i(ke.nodeLineColor))}).style("stroke-opacity",function(ke){return n.opacity(ke.nodeLineColor)}).style("fill",function(ke){return ke.tinyColorHue}).style("fill-opacity",function(ke){return ke.tinyColorAlpha}),ye.transition().ease(a.ease).duration(a.duration).call(I);var be=xe.selectAll("."+a.cn.nodeLabel).data(d);be.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(ke){return ke.node.label}).each(function(ke){var De=A.select(this);r.font(De,ke.textFont),y.convertToTspans(De,U)}).style("text-shadow",y.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",function(ke){return ke.horizontal&&ke.left?"end":"start"}).attr("transform",function(ke){var De=A.select(this),He=y.lineCount(De),Ae=ke.textFont.size*((He-1)*M-c),Le=ke.nodeLineWidth/2+w,Ze=((ke.horizontal?ke.visibleHeight:ke.visibleWidth)-Ae)/2;ke.horizontal&&(ke.left?Le=-Le:Le+=ke.visibleWidth);var We=ke.horizontal?"":"scale(-1,1)"+o(90);return s(ke.horizontal?Le:Ze,ke.horizontal?Ze:Le)+We}),be.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(t,N,V){N.exports=function(u,A){for(var T=u.cd,e=[],a=T[0].trace,i=a._sankey.graph.nodes,n=0;n<i.length;n++){var r=i[n];if(!r.partOfGroup){var v=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];a.orientation==="v"&&v.reverse(),A&&A.contains(v,!1,n,u)&&e.push({pointNumber:r.pointNumber})}}return e}},{}],935:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;m.mergeArray(T.text,A,"tx"),m.mergeArray(T.texttemplate,A,"txt"),m.mergeArray(T.hovertext,A,"htx"),m.mergeArray(T.customdata,A,"data"),m.mergeArray(T.textposition,A,"tp"),T.textfont&&(m.mergeArrayCastPositive(T.textfont.size,A,"ts"),m.mergeArray(T.textfont.color,A,"tc"),m.mergeArray(T.textfont.family,A,"tf"));var a=T.marker;if(a){m.mergeArrayCastPositive(a.size,A,"ms"),m.mergeArrayCastPositive(a.opacity,A,"mo"),m.mergeArray(a.symbol,A,"mx"),m.mergeArray(a.angle,A,"ma"),m.mergeArray(a.standoff,A,"mf"),m.mergeArray(a.color,A,"mc");var i=a.line;a.line&&(m.mergeArray(i.color,A,"mlc"),m.mergeArrayCastPositive(i.width,A,"mlw"));var n=a.gradient;n&&n.type!=="none"&&(m.mergeArray(n.type,A,"mgt"),m.mergeArray(n.color,A,"mgc"))}}},{"../../lib":515}],936:[function(t,N,V){var m=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../components/colorscale/attributes"),e=t("../../plots/font_attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../components/drawing/attributes").pattern,n=t("../../components/drawing"),r=t("./constants"),v=t("../../lib/extend").extendFlat;function s(g){return{valType:"any",dflt:0,editType:"calc"}}function o(g){return{valType:"any",editType:"calc"}}function b(g){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s(),yperiod:s(),xperiod0:o(),yperiod0:o(),xperiodalignment:b(),yperiodalignment:b(),xhoverformat:m("x"),yhoverformat:m("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:u({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:A({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:v({},a,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:i,marker:v({symbol:{valType:"enumerated",values:n.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:v({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM,a=t("./subtypes"),i=t("./colorscale_calc"),n=t("./arrays_to_calcdata"),r=t("./calc_selection");function v(f,y){var l=f._fullLayout,x=y._xA=A.getFromId(f,y.xaxis||"x","x"),c=y._yA=A.getFromId(f,y.yaxis||"y","y"),M=x.makeCalcdata(y,"x"),w=c.makeCalcdata(y,"y"),p=T(y,x,"x",M),_=T(y,c,"y",w),h=p.vals,L=_.vals,E=y._length,S=new Array(E),P=y.ids,F=d(y,l,x,c),I=!1,D,R,O,z,G,Y;b(l,y);var ee="x",j="y",X;if(F)u.pushUnique(F.traceIndices,y._expandedIndex),D=F.orientation==="v",D?(j="s",X="x"):(ee="s",X="y"),G=F.stackgaps==="interpolate";else{var ie=o(y,E);s(f,y,x,c,h,L,ie)}var he=!!y.xperiodalignment,K=!!y.yperiodalignment;for(R=0;R<E;R++){var $=S[R]={},U=m(h[R]),H=m(L[R]);U&&H?($[ee]=h[R],$[j]=L[R],he&&($.orig_x=M[R],$.xEnd=p.ends[R],$.xStart=p.starts[R]),K&&($.orig_y=w[R],$.yEnd=_.ends[R],$.yStart=_.starts[R])):F&&(D?U:H)?($[X]=D?h[R]:L[R],$.gap=!0,G?($.s=e,I=!0):$.s=0):$[ee]=$[j]=e,P&&($.id=String(P[R]))}if(n(S,y),i(f,y),r(S,y),F){for(R=0;R<S.length;)S[R][X]===e?S.splice(R,1):R++;if(u.sort(S,function(Q,oe){return Q[X]-oe[X]||Q.i-oe.i}),I){for(R=0;R<S.length-1&&S[R].gap;)R++;for(Y=S[R].s,Y||(Y=S[R].s=0),O=0;O<R;O++)S[O].s=Y;for(z=S.length-1;z>R&&S[z].gap;)z--;for(Y=S[z].s,O=S.length-1;O>z;O--)S[O].s=Y;for(;R<z;)if(R++,S[R].gap){for(O=R+1;S[O].gap;)O++;for(var q=S[R-1][X],re=S[R-1].s,Z=(S[O].s-re)/(S[O][X]-q);R<O;)S[R].s=re+(S[R][X]-q)*Z,R++}}}return S}function s(f,y,l,x,c,M,w){var p=y._length,_=f._fullLayout,h=l._id,L=x._id,E=_._firstScatter[g(y)]===y.uid,S=(d(y,_,l,x)||{}).orientation,P=y.fill;l._minDtick=0,x._minDtick=0;var F={padded:!0},I={padded:!0};w&&(F.ppad=I.ppad=w);var D=p<2||c[0]!==c[p-1]||M[0]!==M[p-1];D&&(P==="tozerox"||P==="tonextx"&&(E||S==="h"))?F.tozero=!0:!(y.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!a.hasMarkers(y)&&!a.hasText(y))&&(F.padded=!1,F.ppad=0),D&&(P==="tozeroy"||P==="tonexty"&&(E||S==="v"))?I.tozero=!0:(P==="tonextx"||P==="tozerox")&&(I.padded=!1),h&&(y._extremes[h]=A.findExtremes(l,c,F)),L&&(y._extremes[L]=A.findExtremes(x,M,I))}function o(f,y){if(!!a.hasMarkers(f)){var l=f.marker,x=1.6*(f.marker.sizeref||1),c;if(f.marker.sizemode==="area"?c=function(h){return Math.max(Math.sqrt((h||0)/x),3)}:c=function(h){return Math.max((h||0)/x,3)},u.isArrayOrTypedArray(l.size)){var M={type:"linear"};A.setConvert(M);for(var w=M.makeCalcdata(f.marker,"size"),p=new Array(y),_=0;_<y;_++)p[_]=c(w[_]);return p}else return c(l.size)}}function b(f,y){var l=g(y),x=f._firstScatter;x[l]||(x[l]=y.uid)}function g(f){var y=f.stackgroup;return f.xaxis+f.yaxis+f.type+(y?"-"+y:"")}function d(f,y,l,x){var c=f.stackgroup;if(!!c){var M=y._scatterStackOpts[l._id+x._id][c],w=M.orientation==="v"?x:l;if(w.type==="linear"||w.type==="log")return M}}N.exports={calc:v,calcMarkerSize:o,calcAxisExpansion:s,setFirstScatter:b,getStackOpts:d}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){m.isArrayOrTypedArray(T.selectedpoints)&&m.tagSelected(A,T)}},{"../../lib":515}],939:[function(t,N,V){var m=t("../../components/colorscale/helpers").hasColorscale,u=t("../../components/colorscale/calc"),A=t("./subtypes");N.exports=function(e,a){A.hasLines(a)&&m(a,"line")&&u(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),A.hasMarkers(a)&&(m(a,"marker")&&u(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),m(a,"marker.line")&&u(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(t,N,V){N.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(t,N,V){var m=t("./calc");N.exports=function(e,a){var i=a.xaxis,n=a.yaxis,r=i._id+n._id,v=e._fullLayout._scatterStackOpts[r];if(!!v){var s=e.calcdata,o,b,g,d,f,y,l,x,c,M,w,p,_,h,L;for(var E in v){M=v[E];var S=M.traceIndices;if(!!S.length){for(w=M.stackgaps==="interpolate",p=M.groupnorm,M.orientation==="v"?(_="x",h="y"):(_="y",h="x"),L=new Array(S.length),o=0;o<L.length;o++)L[o]=!1;y=s[S[0]];var P=new Array(y.length);for(o=0;o<y.length;o++)P[o]=y[o][_];for(o=1;o<S.length;o++){for(f=s[S[o]],b=g=0;b<f.length;b++){for(l=f[b][_];l>P[g]&&g<P.length;g++)u(f,b,P[g],o,L,w,_),b++;if(l!==P[g]){for(d=0;d<o;d++)u(s[S[d]],g,l,d,L,w,_);P.splice(g,0,l)}g++}for(;g<P.length;g++)u(f,b,P[g],o,L,w,_),b++}var F=P.length;for(b=0;b<y.length;b++){for(x=y[b][h]=y[b].s,o=1;o<S.length;o++)f=s[S[o]],f[0].trace._rawLength=f[0].trace._length,f[0].trace._length=F,x+=f[b].s,f[b][h]=x;if(p)for(c=(p==="fraction"?x:x/100)||1,o=0;o<S.length;o++){var I=s[S[o]][b];I[h]/=c,I.sNorm=I.s/c}}for(o=0;o<S.length;o++){f=s[S[o]];var D=f[0].trace,R=m.calcMarkerSize(D,D._rawLength),O=Array.isArray(R);if(R&&L[o]||O){var z=R;for(R=new Array(F),b=0;b<F;b++)R[b]=f[b].gap?0:O?z[f[b].i]:z}var G=new Array(F),Y=new Array(F);for(b=0;b<F;b++)G[b]=f[b].x,Y[b]=f[b].y;m.calcAxisExpansion(e,D,i,n,G,Y,R),f[0].t.orientation=M.orientation}}}}};function u(T,e,a,i,n,r,v){n[i]=!0;var s={i:null,gap:!0,s:0};if(s[v]=a,T.splice(e,0,s),e&&a===T[e-1][v]){var o=T[e-1];s.s=o.s,s.i=o.i,s.gap=o.gap}else r&&(s.s=A(T,e,a,v));e||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}function A(T,e,a,i){var n=T[e-1],r=T[e+1];return r?n?n.s+(r.s-n.s)*(a-n[i])/(r[i]-n[i]):r.s:n.s}},{"./calc":937}],942:[function(t,N,V){N.exports=function(u){for(var A=0;A<u.length;A++){var T=u[A];if(T.type==="scatter"){var e=T.fill;if(!(e==="none"||e==="toself")&&(T.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var a=A-1;a>=0;a--){var i=u[a];if(i.type==="scatter"&&i.xaxis===T.xaxis&&i.yaxis===T.yaxis){i.opacity=void 0;break}}}}}},{}],943:[function(t,N,V){var m=t("../../lib"),u=t("../../registry"),A=t("./attributes"),T=t("./constants"),e=t("./subtypes"),a=t("./xy_defaults"),i=t("./period_defaults"),n=t("./stack_defaults"),r=t("./marker_defaults"),v=t("./line_defaults"),s=t("./line_shape_defaults"),o=t("./text_defaults"),b=t("./fillcolor_defaults"),g=t("../../lib").coercePattern;N.exports=function(f,y,l,x){function c(S,P){return m.coerce(f,y,A,S,P)}var M=a(f,y,x,c);if(M||(y.visible=!1),!!y.visible){i(f,y,x,c),c("xhoverformat"),c("yhoverformat");var w=n(f,y,x,c),p=!w&&M<T.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("mode",p),e.hasLines(y)&&(v(f,y,l,x,c,{backoff:!0}),s(f,y,c),c("connectgaps"),c("line.simplify")),e.hasMarkers(y)&&r(f,y,l,x,c,{gradient:!0}),e.hasText(y)&&(c("texttemplate"),o(f,y,x,c));var _=[];(e.hasMarkers(y)||e.hasText(y))&&(c("cliponaxis"),c("marker.maxdisplayed"),_.push("points")),c("fill",w?w.fillDflt:"none"),y.fill!=="none"&&(b(f,y,l,c),e.hasLines(y)||s(f,y,c),g(c,"fillpattern",y.fillcolor,!1));var h=(y.line||{}).color,L=(y.marker||{}).color;(y.fill==="tonext"||y.fill==="toself")&&_.push("fills"),c("hoveron",_.join("+")||"points"),y.hoveron!=="fills"&&c("hovertemplate");var E=u.getComponentMethod("errorbars","supplyDefaults");E(f,y,h||L||l,{axis:"y"}),E(f,y,h||L||l,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(y,c)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(t,N,V){var m=t("../../components/color"),u=t("../../lib").isArrayOrTypedArray;N.exports=function(T,e,a,i){var n=!1;if(e.marker){var r=e.marker.color,v=(e.marker.line||{}).color;r&&!u(r)?n=r:v&&!u(v)&&(n=v)}i("fillcolor",m.addOpacity((e.line||{}).color||n||a,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(t,N,V){var m=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i={_fullLayout:e},n=m.getFromTrace(i,T,"x"),r=m.getFromTrace(i,T,"y");return a.xLabel=m.tickText(n,n.c2l(A.x),!0).text,a.yLabel=m.tickText(r,r.c2l(A.y),!0).text,a}},{"../../plots/cartesian/axes":566}],946:[function(t,N,V){var m=t("../../components/color"),u=t("./subtypes");N.exports=function(T,e){var a,i;if(T.mode==="lines")return a=T.line.color,a&&m.opacity(a)?a:T.fillcolor;if(T.mode==="none")return T.fill?T.fillcolor:"";var n=e.mcc||(T.marker||{}).color,r=e.mlcc||((T.marker||{}).line||{}).color;return i=n&&m.opacity(n)?n:r&&m.opacity(r)&&(e.mlw||((T.marker||{}).line||{}).width)?r:"",i?m.opacity(i)<.3?m.addOpacity(i,.3):i:(a=(T.line||{}).color,a&&m.opacity(a)&&u.hasLines(T)&&T.line.width?a:T.fillcolor)}},{"../../components/color":367,"./subtypes":961}],947:[function(t,N,V){var m=t("../../lib"),u=t("../../components/fx"),A=t("../../registry"),T=t("./get_trace_color"),e=t("../../components/color"),a=m.fillText;N.exports=function(n,r,v,s){var o=n.cd,b=o[0].trace,g=n.xa,d=n.ya,f=g.c2p(r),y=d.c2p(v),l=[f,y],x=b.hoveron||"",c=b.mode.indexOf("markers")!==-1?3:.5,M=!!b.xperiodalignment,w=!!b.yperiodalignment;if(x.indexOf("points")!==-1){var p=function(ae){if(M){var le=g.c2p(ae.xStart),_e=g.c2p(ae.xEnd);return f>=Math.min(le,_e)&&f<=Math.max(le,_e)?0:1/0}var fe=Math.max(3,ae.mrc||0),me=1-1/fe,xe=Math.abs(g.c2p(ae.x)-f);return xe<fe?me*xe/fe:xe-fe+me},_=function(ae){if(w){var le=d.c2p(ae.yStart),_e=d.c2p(ae.yEnd);return y>=Math.min(le,_e)&&y<=Math.max(le,_e)?0:1/0}var fe=Math.max(3,ae.mrc||0),me=1-1/fe,xe=Math.abs(d.c2p(ae.y)-y);return xe<fe?me*xe/fe:xe-fe+me},h=function(ae){var le=Math.max(c,ae.mrc||0),_e=g.c2p(ae.x)-f,fe=d.c2p(ae.y)-y;return Math.max(Math.sqrt(_e*_e+fe*fe)-le,1-c/le)},L=u.getDistanceFunction(s,p,_,h);if(u.getClosest(o,L,n),n.index!==!1){var E=o[n.index],S=g.c2p(E.x,!0),P=d.c2p(E.y,!0),F=E.mrc||1;n.index=E.i;var I=o[0].t.orientation,D=I&&(E.sNorm||E.s),R=I==="h"?D:E.orig_x!==void 0?E.orig_x:E.x,O=I==="v"?D:E.orig_y!==void 0?E.orig_y:E.y;return m.extendFlat(n,{color:T(b,E),x0:S-F,x1:S+F,xLabelVal:R,y0:P-F,y1:P+F,yLabelVal:O,spikeDistance:h(E),hovertemplate:b.hovertemplate}),a(E,b,n),A.getComponentMethod("errorbars","hoverInfo")(E,b,n),[n]}}if(x.indexOf("fills")!==-1&&b._polygons){var z=b._polygons,G=[],Y=!1,ee=1/0,j=-1/0,X=1/0,ie=-1/0,he,K,$,U,H,q,re,Z,Q;for(he=0;he<z.length;he++)$=z[he],$.contains(l)&&(Y=!Y,G.push($),X=Math.min(X,$.ymin),ie=Math.max(ie,$.ymax));if(Y){X=Math.max(X,0),ie=Math.min(ie,d._length);var oe=(X+ie)/2;for(he=0;he<G.length;he++)for(U=G[he].pts,K=1;K<U.length;K++)Z=U[K-1][1],Q=U[K][1],Z>oe!=Q>=oe&&(q=U[K-1][0],re=U[K][0],Q-Z&&(H=q+(re-q)*(oe-Z)/(Q-Z),ee=Math.min(ee,H),j=Math.max(j,H)));ee=Math.max(ee,0),j=Math.min(j,g._length);var se=e.defaultLine;return e.opacity(b.fillcolor)?se=b.fillcolor:e.opacity((b.line||{}).color)&&(se=b.line.color),m.extendFlat(n,{distance:n.maxHoverDistance,x0:ee,x1:j,y0:oe,y1:oe,color:se,hovertemplate:!1}),delete n.index,b.text&&!Array.isArray(b.text)?n.text=String(b.text):n.text=b.name,[n]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(t,N,V){var m=t("./subtypes");N.exports={hasLines:m.hasLines,hasMarkers:m.hasMarkers,hasText:m.hasText,isBubble:m.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(t,N,V){var m=t("../../lib").isArrayOrTypedArray,u=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults");N.exports=function(e,a,i,n,r,v){v||(v={});var s=(e.marker||{}).color;if(r("line.color",i),u(e,"line"))A(e,a,n,r,{prefix:"line.",cLetter:"c"});else{var o=(m(s)?!1:s)||i;r("line.color",o)}r("line.width"),v.noDash||r("line.dash"),v.backoff&&r("line.backoff")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(t,N,V){var m=t("../../components/drawing"),u=t("../../constants/numerical"),A=u.BADNUM,T=u.LOG_CLIP,e=T+.5,a=T-.5,i=t("../../lib"),n=i.segmentsIntersect,r=i.constrain,v=t("./constants");N.exports=function(o,b){var g=b.trace||{},d=b.xaxis,f=b.yaxis,y=d.type==="log",l=f.type==="log",x=d._length,c=f._length,M=b.backoff,w=g.marker,p=b.connectGaps,_=b.baseTolerance,h=b.shape,L=h==="linear",E=g.fill&&g.fill!=="none",S=[],P=v.minTolerance,F=o.length,I=new Array(F),D=0,R,O,z,G,Y,ee,j,X,ie,he,K,$,U,H,q,re;function Z(Mt){var Gt=o[Mt];if(!Gt)return!1;var zt=b.linearized?d.l2p(Gt.x):d.c2p(Gt.x),Ht=b.linearized?f.l2p(Gt.y):f.c2p(Gt.y);if(zt===A){if(y&&(zt=d.c2p(Gt.x,!0)),zt===A)return!1;l&&Ht===A&&(zt*=Math.abs(d._m*c*(d._m>0?e:a)/(f._m*x*(f._m>0?e:a)))),zt*=1e3}if(Ht===A){if(l&&(Ht=f.c2p(Gt.y,!0)),Ht===A)return!1;Ht*=1e3}return[zt,Ht]}function Q(Mt,Gt,zt,Ht){var Zt=zt-Mt,Wt=Ht-Gt,sr=.5-Mt,Gr=.5-Gt,cn=Zt*Zt+Wt*Wt,qr=Zt*sr+Wt*Gr;if(qr>0&&qr<cn){var st=sr*Wt-Gr*Zt;if(st*st<cn)return!0}}var oe,se;function ae(Mt,Gt){var zt=Mt[0]/x,Ht=Mt[1]/c,Zt=Math.max(0,-zt,zt-1,-Ht,Ht-1);return Zt&&oe!==void 0&&Q(zt,Ht,oe,se)&&(Zt=0),Zt&&Gt&&Q(zt,Ht,Gt[0]/x,Gt[1]/c)&&(Zt=0),(1+v.toleranceGrowth*Zt)*_}function le(Mt,Gt){var zt=Mt[0]-Gt[0],Ht=Mt[1]-Gt[1];return Math.sqrt(zt*zt+Ht*Ht)}var _e=v.maxScreensAway,fe=-x*_e,me=x*(1+_e),xe=-c*_e,ye=c*(1+_e),be=[[fe,xe,me,xe],[me,xe,me,ye],[me,ye,fe,ye],[fe,ye,fe,xe]],ke,De,He,Ae,Le,Ze;function We(Mt,Gt){for(var zt=[],Ht=0,Zt=0;Zt<4;Zt++){var Wt=be[Zt],sr=n(Mt[0],Mt[1],Gt[0],Gt[1],Wt[0],Wt[1],Wt[2],Wt[3]);sr&&(!Ht||Math.abs(sr.x-zt[0][0])>1||Math.abs(sr.y-zt[0][1])>1)&&(sr=[sr.x,sr.y],Ht&&le(sr,Mt)<le(zt[0],Mt)?zt.unshift(sr):zt.push(sr),Ht++)}return zt}function ze(Mt){if(Mt[0]<fe||Mt[0]>me||Mt[1]<xe||Mt[1]>ye)return[r(Mt[0],fe,me),r(Mt[1],xe,ye)]}function Ie(Mt,Gt){if(Mt[0]===Gt[0]&&(Mt[0]===fe||Mt[0]===me)||Mt[1]===Gt[1]&&(Mt[1]===xe||Mt[1]===ye))return!0}function Ve(Mt,Gt){var zt=[],Ht=ze(Mt),Zt=ze(Gt);return Ht&&Zt&&Ie(Ht,Zt)||(Ht&&zt.push(Ht),Zt&&zt.push(Zt)),zt}function dt(Mt,Gt,zt){return function(Ht,Zt){var Wt=ze(Ht),sr=ze(Zt),Gr=[];if(Wt&&sr&&Ie(Wt,sr))return Gr;Wt&&Gr.push(Wt),sr&&Gr.push(sr);var cn=2*i.constrain((Ht[Mt]+Zt[Mt])/2,Gt,zt)-((Wt||Ht)[Mt]+(sr||Zt)[Mt]);if(cn){var qr;Wt&&sr?qr=cn>0==Wt[Mt]>sr[Mt]?Wt:sr:qr=Wt||sr,qr[Mt]+=cn}return Gr}}var Ft;h==="linear"||h==="spline"?Ft=We:h==="hv"||h==="vh"?Ft=Ve:h==="hvh"?Ft=dt(0,fe,me):h==="vhv"&&(Ft=dt(1,xe,ye));function Qt(Mt,Gt){var zt=Gt[0]-Mt[0],Ht=(Gt[1]-Mt[1])/zt,Zt=(Mt[1]*Gt[0]-Gt[1]*Mt[0])/zt;return Zt>0?[Ht>0?fe:me,ye]:[Ht>0?me:fe,xe]}function Ot(Mt){var Gt=Mt[0],zt=Mt[1],Ht=Gt===I[D-1][0],Zt=zt===I[D-1][1];if(!(Ht&&Zt))if(D>1){var Wt=Gt===I[D-2][0],sr=zt===I[D-2][1];Ht&&(Gt===fe||Gt===me)&&Wt?sr?D--:I[D-1]=Mt:Zt&&(zt===xe||zt===ye)&&sr?Wt?D--:I[D-1]=Mt:I[D++]=Mt}else I[D++]=Mt}function Ct(Mt){I[D-1][0]!==Mt[0]&&I[D-1][1]!==Mt[1]&&Ot([He,Ae]),Ot(Mt),Le=null,He=Ae=0}var jt=i.isArrayOrTypedArray(w);function Nt(Mt){if(Mt&&M&&(Mt.i=R,Mt.d=o,Mt.trace=g,Mt.marker=jt?w[Mt.i]:w,Mt.backoff=M),oe=Mt[0]/x,se=Mt[1]/c,ke=Mt[0]<fe?fe:Mt[0]>me?me:0,De=Mt[1]<xe?xe:Mt[1]>ye?ye:0,ke||De){if(!D)I[D++]=[ke||Mt[0],De||Mt[1]];else if(Le){var Gt=Ft(Le,Mt);Gt.length>1&&(Ct(Gt[0]),I[D++]=Gt[1])}else Ze=Ft(I[D-1],Mt)[0],I[D++]=Ze;var zt=I[D-1];ke&&De&&(zt[0]!==ke||zt[1]!==De)?(Le&&(He!==ke&&Ae!==De?Ot(He&&Ae?Qt(Le,Mt):[He||ke,Ae||De]):He&&Ae&&Ot([He,Ae])),Ot([ke,De])):He-ke&&Ae-De&&Ot([ke||He,De||Ae]),Le=Mt,He=ke,Ae=De}else Le&&Ct(Ft(Le,Mt)[0]),I[D++]=Mt}for(R=0;R<F;R++)if(O=Z(R),!!O){for(D=0,Le=null,Nt(O),R++;R<F;R++){if(G=Z(R),!G){if(p)continue;break}if(!L||!b.simplify){Nt(G);continue}var Lt=Z(R+1);if(he=le(G,O),!(!(E&&(D===0||D===F-1))&&he<ae(G,Lt)*P)){for(X=[(G[0]-O[0])/he,(G[1]-O[1])/he],Y=O,K=he,$=H=q=0,j=!1,z=G,R++;R<o.length;R++){if(ee=Lt,Lt=Z(R+1),!ee){if(p)continue;break}if(ie=[ee[0]-O[0],ee[1]-O[1]],re=ie[0]*X[1]-ie[1]*X[0],H=Math.min(H,re),q=Math.max(q,re),q-H>ae(ee,Lt))break;z=ee,U=ie[0]*X[0]+ie[1]*X[1],U>K?(K=U,G=ee,j=!1):U<$&&($=U,Y=ee,j=!0)}if(j?(Nt(G),z!==Y&&Nt(Y)):(Y!==O&&Nt(Y),z!==G&&Nt(G)),Nt(z),R>=o.length||!ee)break;Nt(ee),O=ee}}Le&&Ot([He||Le[0],Ae||Le[1]]),S.push(I.slice(0,D))}var Xe=h.slice(h.length-1);if(M&&Xe!=="h"&&Xe!=="v"){for(var it=!1,Ye=-1,Ee=[],Ge=0;Ge<S.length;Ge++)for(var Ke=0;Ke<S[Ge].length-1;Ke++){var qe=S[Ge][Ke],At=S[Ge][Ke+1],yt=m.applyBackoff(At,qe);(yt[0]!==At[0]||yt[1]!==At[1])&&(it=!0),Ee[Ye+1]||(Ye++,Ee[Ye]=[qe,[yt[0],yt[1]]])}return it?Ee:S}return S}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(t,N,V){N.exports=function(u,A,T){var e=T("line.shape");e==="spline"&&T("line.smoothing")}},{}],952:[function(t,N,V){var m={tonextx:1,tonexty:1,tonext:1};N.exports=function(A,T,e){var a,i,n,r,v,s={},o=!1,b=-1,g=0,d=-1;for(i=0;i<e.length;i++)a=e[i][0].trace,n=a.stackgroup||"",n?n in s?v=s[n]:(v=s[n]=g,g++):a.fill in m&&d>=0?v=d:(v=d=g,g++),v<b&&(o=!0),a._groupIndex=b=v;var f=e.slice();o&&f.sort(function(l,x){var c=l[0].trace,M=x[0].trace;return c._groupIndex-M._groupIndex||c.index-M.index});var y={};for(i=0;i<f.length;i++)a=f[i][0].trace,n=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in m&&(r=y[n],a._prevtrace=r||null,r&&(r._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),y[n]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return f}},{}],953:[function(t,N,V){var m=t("fast-isnumeric");N.exports=function(A,T){T||(T=2);var e=A.marker,a=e.sizeref||1,i=e.sizemin||0,n=e.sizemode==="area"?function(r){return Math.sqrt(r/a)}:function(r){return r/a};return function(r){var v=n(r/T);return m(v)&&v>0?Math.max(v,i):0}}},{"fast-isnumeric":190}],954:[function(t,N,V){N.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(t,N,V){var m=t("../../components/color"),u=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("./subtypes");N.exports=function(a,i,n,r,v,s){var o=T.isBubble(a),b=(a.line||{}).color,g;if(s=s||{},b&&(n=b),v("marker.symbol"),v("marker.opacity",o?.7:1),v("marker.size"),s.noAngle||(v("marker.angle"),s.noAngleRef||v("marker.angleref"),s.noStandOff||v("marker.standoff")),v("marker.color",n),u(a,"marker")&&A(a,i,r,v,{prefix:"marker.",cLetter:"c"}),s.noSelect||(v("selected.marker.color"),v("unselected.marker.color"),v("selected.marker.size"),v("unselected.marker.size")),s.noLine||(b&&!Array.isArray(b)&&i.marker.color!==b?g=b:o?g=m.background:g=m.defaultLine,v("marker.line.color",g),u(a,"marker.line")&&A(a,i,r,v,{prefix:"marker.line.",cLetter:"c"}),v("marker.line.width",o?1:0)),o&&(v("marker.sizeref"),v("marker.sizemin"),v("marker.sizemode")),s.gradient){var d=v("marker.gradient.type");d!=="none"&&v("marker.gradient.color")}}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(t,N,V){var m=t("../../lib").dateTick0,u=t("../../constants/numerical"),A=u.ONEWEEK;function T(e,a){return e%A===0?m(a,1):m(a,0)}N.exports=function(a,i,n,r,v){if(v||(v={x:!0,y:!0}),v.x){var s=r("xperiod");s&&(r("xperiod0",T(s,i.xcalendar)),r("xperiodalignment"))}if(v.y){var o=r("yperiod");o&&(r("yperiod0",T(o,i.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../registry"),A=t("../../lib"),T=A.ensureSingle,e=A.identity,a=t("../../components/drawing"),i=t("./subtypes"),n=t("./line_points"),r=t("./link_traces"),v=t("../../lib/polygon").tester;N.exports=function(d,f,y,l,x,c){var M,w,p=!x,_=!!x&&x.duration>0,h=r(d,f,y);if(M=l.selectAll("g.trace").data(h,function(E){return E[0].trace.uid}),M.enter().append("g").attr("class",function(E){return"trace scatter trace"+E[0].trace.uid}).style("stroke-miterlimit",2),M.order(),s(d,M,f),_){c&&(w=c());var L=m.transition().duration(x.duration).ease(x.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()});L.each(function(){l.selectAll("g.trace").each(function(E,S){o(d,S,f,E,h,this,x)})})}else M.each(function(E,S){o(d,S,f,E,h,this,x)});p&&M.exit().remove(),l.selectAll("path:not([d])").remove()};function s(g,d,f){d.each(function(y){var l=T(m.select(this),"g","fills");a.setClipUrl(l,f.layerClipId,g);var x=y[0].trace,c=[];x._ownfill&&c.push("_ownFill"),x._nexttrace&&c.push("_nextFill");var M=l.selectAll("g").data(c,e);M.enter().append("g"),M.exit().each(function(w){x[w]=null}).remove(),M.order().each(function(w){x[w]=T(m.select(this),"path","js-fill")})})}function o(g,d,f,y,l,x,c){var M;b(g,d,f,y,l);var w=!!c&&c.duration>0;function p(He){return w?He.transition():He}var _=f.xaxis,h=f.yaxis,L=y[0].trace,E=L.line,S=m.select(x),P=T(S,"g","errorbars"),F=T(S,"g","lines"),I=T(S,"g","points"),D=T(S,"g","text");if(u.getComponentMethod("errorbars","plot")(g,P,f,c),L.visible!==!0)return;p(S).style("opacity",L.opacity);var R,O,z=L.fill.charAt(L.fill.length-1);z!=="x"&&z!=="y"&&(z=""),y[0][f.isRangePlot?"nodeRangePlot3":"node3"]=S;var G="",Y=[],ee=L._prevtrace;ee&&(G=ee._prevRevpath||"",O=ee._nextFill,Y=ee._polygons);var j,X,ie="",he="",K,$,U,H,q,re,Z,Q=[],oe=A.noop;if(R=L._ownFill,i.hasLines(L)||L.fill!=="none"){for(O&&O.datum(y),["hv","vh","hvh","vhv"].indexOf(E.shape)!==-1?(K=a.steps(E.shape),$=a.steps(E.shape.split("").reverse().join(""))):E.shape==="spline"?K=$=function(He){var Ae=He[He.length-1];return He.length>1&&He[0][0]===Ae[0]&&He[0][1]===Ae[1]?a.smoothclosed(He.slice(1),E.smoothing):a.smoothopen(He,E.smoothing)}:K=$=function(He){return"M"+He.join("L")},U=function(He){return $(He.reverse())},Q=n(y,{xaxis:_,yaxis:h,trace:L,connectGaps:L.connectgaps,baseTolerance:Math.max(E.width||1,3)/4,shape:E.shape,backoff:E.backoff,simplify:E.simplify,fill:L.fill}),Z=L._polygons=new Array(Q.length),M=0;M<Q.length;M++)L._polygons[M]=v(Q[M]);Q.length&&(H=Q[0][0],q=Q[Q.length-1],re=q[q.length-1]),oe=function(He){return function(Ae){if(j=K(Ae),X=U(Ae),ie?z?(ie+="L"+j.substr(1),he=X+("L"+he.substr(1))):(ie+="Z"+j,he=X+"Z"+he):(ie=j,he=X),i.hasLines(L)&&Ae.length>1){var Le=m.select(this);if(Le.datum(y),He)p(Le.style("opacity",0).attr("d",j).call(a.lineGroupStyle)).style("opacity",1);else{var Ze=p(Le);Ze.attr("d",j),a.singleLineStyle(y,Ze)}}}}}var se=F.selectAll(".js-line").data(Q);p(se.exit()).style("opacity",0).remove(),se.each(oe(!1)),se.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(oe(!0)),a.setClipUrl(se,f.layerClipId,g);function ae(He){p(He).attr("d","M0,0Z")}Q.length?(R?(R.datum(y),H&&re&&(z?(z==="y"?H[1]=re[1]=h.c2p(0,!0):z==="x"&&(H[0]=re[0]=_.c2p(0,!0)),p(R).attr("d","M"+re+"L"+H+"L"+ie.substr(1)).call(a.singleFillStyle,g)):p(R).attr("d",ie+"Z").call(a.singleFillStyle,g))):O&&(L.fill.substr(0,6)==="tonext"&&ie&&G?(L.fill==="tonext"?p(O).attr("d",ie+"Z"+G+"Z").call(a.singleFillStyle,g):p(O).attr("d",ie+"L"+G.substr(1)+"Z").call(a.singleFillStyle,g),L._polygons=L._polygons.concat(Y)):(ae(O),L._polygons=null)),L._prevRevpath=he,L._prevPolygons=Z):(R?ae(R):O&&ae(O),L._polygons=L._prevRevpath=L._prevPolygons=null);function le(He){return He.filter(function(Ae){return!Ae.gap&&Ae.vis})}function _e(He){return He.filter(function(Ae){return Ae.vis})}function fe(He){return He.filter(function(Ae){return!Ae.gap})}function me(He){return He.id}function xe(He){if(He.ids)return me}function ye(){return!1}function be(He,Ae,Le){var Ze,We,ze,Ie=Le[0].trace,Ve=i.hasMarkers(Ie),dt=i.hasText(Ie),Ft=xe(Ie),Qt=ye,Ot=ye;if(Ve||dt){var Ct=e,jt=Ie.stackgroup,Nt=jt&&g._fullLayout._scatterStackOpts[_._id+h._id][jt].stackgaps==="infer zero";Ie.marker.maxdisplayed||Ie._needsCull?Ct=Nt?_e:le:jt&&!Nt&&(Ct=fe),Ve&&(Qt=Ct),dt&&(Ot=Ct)}We=He.selectAll("path.point"),Ze=We.data(Qt,Ft);var Lt=Ze.enter().append("path").classed("point",!0);w&&Lt.call(a.pointStyle,Ie,g).call(a.translatePoints,_,h).style("opacity",0).transition().style("opacity",1),Ze.order();var Xe;Ve&&(Xe=a.makePointStyleFns(Ie)),Ze.each(function(it){var Ye=m.select(this),Ee=p(Ye);ze=a.translatePoint(it,Ee,_,h),ze?(a.singlePointStyle(it,Ee,Ie,Xe,g),f.layerClipId&&a.hideOutsideRangePoint(it,Ee,_,h,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&Ye.classed("plotly-customdata",it.data!==null&&it.data!==void 0)):Ee.remove()}),w?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),We=Ae.selectAll("g"),Ze=We.data(Ot,Ft),Ze.enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(it){var Ye=m.select(this),Ee=p(Ye.select("text"));ze=a.translatePoint(it,Ee,_,h),ze?f.layerClipId&&a.hideOutsideRangePoint(it,Ye,_,h,Ie.xcalendar,Ie.ycalendar):Ye.remove()}),Ze.selectAll("text").call(a.textPointStyle,Ie,g).each(function(it){var Ye=_.c2p(it.x),Ee=h.c2p(it.y);m.select(this).selectAll("tspan.line").each(function(){p(m.select(this)).attr({x:Ye,y:Ee})})}),Ze.exit().remove()}I.datum(y),D.datum(y),be(I,D,y);var ke=L.cliponaxis===!1,De=ke?null:f.layerClipId;a.setClipUrl(I,De,g),a.setClipUrl(D,De,g)}function b(g,d,f,y,l){var x=f.xaxis,c=f.yaxis,M=m.extent(A.simpleMap(x.range,x.r2c)),w=m.extent(A.simpleMap(c.range,c.r2c)),p=y[0].trace;if(!!i.hasMarkers(p)){var _=p.marker.maxdisplayed;if(_!==0){var h=y.filter(function(P){return P.x>=M[0]&&P.x<=M[1]&&P.y>=w[0]&&P.y<=w[1]}),L=Math.ceil(h.length/_),E=0;l.forEach(function(P,F){var I=P[0].trace;i.hasMarkers(I)&&I.marker.maxdisplayed>0&&F<d&&E++});var S=Math.round(E*L/3+Math.floor(E/3)*L/7.1);y.forEach(function(P){delete P.vis}),h.forEach(function(P,F){Math.round((F+S)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(t,N,V){var m=t("./subtypes");N.exports=function(A,T){var e=A.cd,a=A.xaxis,i=A.yaxis,n=[],r=e[0].trace,v,s,o,b,g=!m.hasMarkers(r)&&!m.hasText(r);if(g)return[];if(T===!1)for(v=0;v<e.length;v++)e[v].selected=0;else for(v=0;v<e.length;v++)s=e[v],o=a.c2p(s.x),b=i.c2p(s.y),s.i!==null&&T.contains([o,b],!1,v,A)?(n.push({pointNumber:s.i,x:a.c2d(s.x),y:i.c2d(s.y)}),s.selected=1):s.selected=0;return n}},{"./subtypes":961}],959:[function(t,N,V){var m=["orientation","groupnorm","stackgaps"];N.exports=function(A,T,e,a){var i=e._scatterStackOpts,n=a("stackgroup");if(n){var r=T.xaxis+T.yaxis,v=i[r];v||(v=i[r]={});var s=v[n],o=!1;s?s.traces.push(T):(s=v[n]={traceIndices:[],traces:[T]},o=!0);for(var b={orientation:T.x&&!T.y?"h":"v"},g=0;g<m.length;g++){var d=m[g],f=d+"Found";if(!s[f]){var y=A[d]!==void 0,l=d==="orientation";if((y||o)&&(s[d]=a(d,b[d]),l&&(s.fillDflt=s[d]==="h"?"tonextx":"tonexty"),y&&(s[f]=!0,!o&&(delete s.traces[0][d],l))))for(var x=0;x<s.traces.length-1;x++){var c=s.traces[x];c._input.fill!==c.fill&&(c.fill=s.fillDflt)}}}return s}}},{}],960:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/drawing"),A=t("../../registry");function T(n){var r=m.select(n).selectAll("g.trace.scatter");r.style("opacity",function(v){return v[0].trace.opacity}),r.selectAll("g.points").each(function(v){var s=m.select(this),o=v.trace||v[0].trace;e(s,o,n)}),r.selectAll("g.text").each(function(v){var s=m.select(this),o=v.trace||v[0].trace;a(s,o,n)}),r.selectAll("g.trace path.js-line").call(u.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(u.fillGroupStyle,n),A.getComponentMethod("errorbars","style")(r)}function e(n,r,v){u.pointStyle(n.selectAll("path.point"),r,v)}function a(n,r,v){u.textPointStyle(n.selectAll("text"),r,v)}function i(n,r,v){var s=r[0].trace;s.selectedpoints?(u.selectedPointStyle(v.selectAll("path.point"),s),u.selectedTextStyle(v.selectAll("text"),s)):(e(v,s,n),a(v,s,n))}N.exports={style:T,stylePoints:e,styleText:a,styleOnSelect:i}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(t,N,V){var m=t("../../lib");N.exports={hasLines:function(u){return u.visible&&u.mode&&u.mode.indexOf("lines")!==-1},hasMarkers:function(u){return u.visible&&(u.mode&&u.mode.indexOf("markers")!==-1||u.type==="splom")},hasText:function(u){return u.visible&&u.mode&&u.mode.indexOf("text")!==-1},isBubble:function(u){return m.isPlainObject(u.marker)&&m.isArrayOrTypedArray(u.marker.size)}}},{"../../lib":515}],962:[function(t,N,V){var m=t("../../lib");N.exports=function(u,A,T,e,a){a=a||{},e("textposition"),m.coerceFont(e,"textfont",T.font),a.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(t,N,V){var m=t("../../lib"),u=t("../../registry");N.exports=function(T,e,a,i){var n=i("x"),r=i("y"),v,s=u.getComponentMethod("calendars","handleTraceDefaults");if(s(T,e,["x","y"],a),n){var o=m.minRowLength(n);r?v=Math.min(o,m.minRowLength(r)):(v=o,i("y0"),i("dy"))}else{if(!r)return 0;v=m.minRowLength(r),i("x0"),i("dx")}return e._length=v,v}},{"../../lib":515,"../../registry":647}],964:[function(t,N,V){var m=t("../scatter/attributes"),u=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../plots/attributes"),i=t("../../constants/gl3d_dashes"),n=t("../../constants/gl3d_markers"),r=t("../../lib/extend").extendFlat,v=t("../../plot_api/edit_types").overrideAll,s=t("../../lib/sort_object_keys"),o=m.line,b=m.marker,g=b.line,d=r({width:o.width,dash:{valType:"enumerated",values:s(i),dflt:"solid"}},u("line"));function f(l){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var y=N.exports=v({x:m.x,y:m.y,z:{valType:"data_array"},text:r({},m.text,{}),texttemplate:e({},{}),hovertext:r({},m.hovertext,{}),hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),mode:r({},m.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:f(),y:f(),z:f()},connectgaps:m.connectgaps,line:d,marker:r({symbol:{valType:"enumerated",values:s(n),dflt:"circle",arrayOk:!0},size:r({},b.size,{dflt:8}),sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,opacity:r({},b.opacity,{arrayOk:!1}),colorbar:b.colorbar,line:r({width:r({},g.width,{arrayOk:!1})},u("marker.line"))},u("marker")),textposition:r({},m.textposition,{dflt:"top center"}),textfont:{color:m.textfont.color,size:m.textfont.size,family:r({},m.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:r({},a.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(t,N,V){var m=t("../scatter/arrays_to_calcdata"),u=t("../scatter/colorscale_calc");N.exports=function(T,e){var a=[{x:!1,y:!1,trace:e,t:{}}];return m(a,e),u(T,e),a}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(t,N,V){var m=t("../../registry");function u(e,a,i,n){if(!a||!a.visible)return null;for(var r=m.getComponentMethod("errorbars","makeComputeError")(a),v=new Array(e.length),s=0;s<e.length;s++){var o=r(+e[s],s);if(n.type==="log"){var b=n.c2l(e[s]),g=e[s]-o[0],d=e[s]+o[1];if(v[s]=[(n.c2l(g,!0)-b)*i,(n.c2l(d,!0)-b)*i],g>0){var f=n.c2l(g);n._lowerLogErrorBound||(n._lowerLogErrorBound=f),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,f)}}else v[s]=[-o[0]*i,o[1]*i]}return v}function A(e){for(var a=0;a<e.length;a++)if(e[a])return e[a].length;return 0}function T(e,a,i){var n=[u(e.x,e.error_x,a[0],i.xaxis),u(e.y,e.error_y,a[1],i.yaxis),u(e.z,e.error_z,a[2],i.zaxis)],r=A(n);if(r===0)return null;for(var v=new Array(r),s=0;s<r;s++){for(var o=[[0,0,0],[0,0,0]],b=0;b<3;b++)if(n[b])for(var g=0;g<2;g++)o[g][b]=n[b][s][g];v[s]=o}return v}N.exports=T},{"../../registry":647}],967:[function(t,N,V){var m=t("../../../stackgl_modules").gl_line3d,u=t("../../../stackgl_modules").gl_scatter3d,A=t("../../../stackgl_modules").gl_error3d,T=t("../../../stackgl_modules").gl_mesh3d,e=t("../../../stackgl_modules").delaunay_triangulate,a=t("../../lib"),i=t("../../lib/str2rgbarray"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/make_bubble_size_func"),v=t("../../constants/gl3d_dashes"),s=t("../../constants/gl3d_markers"),o=t("../../plots/cartesian/axes"),b=t("../../components/fx/helpers").appendArrayPointValue,g=t("./calc_errors");function d(P,F){this.scene=P,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=d.prototype;f.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var F=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||this.textLabels[F]===0)&&(P.textLabel=this.textLabels[F]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}};function y(P,F,I){var D=(I+1)%3,R=(I+2)%3,O=[],z=[],G;for(G=0;G<P.length;++G){var Y=P[G];isNaN(Y[D])||!isFinite(Y[D])||isNaN(Y[R])||!isFinite(Y[R])||(O.push([Y[D],Y[R]]),z.push(G))}var ee=e(O);for(G=0;G<ee.length;++G)for(var j=ee[G],X=0;X<j.length;++X)j[X]=z[j[X]];return{positions:P,cells:ee,meshColor:F}}function l(P){for(var F=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var O=P[R];O&&O.copy_zstyle!==!1&&P[2].visible!==!1&&(O=P[2]),!(!O||!O.visible)&&(F[R]=O.width/2,I[R]=i(O.color),D[R]=O.thickness)}return{capSize:F,color:I,lineWidth:D}}function x(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function c(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function M(P){var F=0,I=0,D=[F,I];if(Array.isArray(P))for(var R=0;R<P.length;R++)D[R]=[F,I],P[R]&&(D[R][0]=x(P[R]),D[R][1]=c(P[R]));else D[0]=x(P),D[1]=c(P);return D}function w(P,F){return F(P*4)}function p(P){return s[P]}function _(P,F,I,D,R){var O=null;if(a.isArrayOrTypedArray(P)){O=[];for(var z=0;z<F;z++)P[z]===void 0?O[z]=D:O[z]=I(P[z],R)}else O=I(P,a.identity);return O}function h(P,F){var I=[],D=P.fullSceneLayout,R=P.dataScale,O=D.xaxis,z=D.yaxis,G=D.zaxis,Y=F.marker,ee=F.line,j=F.x||[],X=F.y||[],ie=F.z||[],he=j.length,K=F.xcalendar,$=F.ycalendar,U=F.zcalendar,H,q,re,Z,Q,oe;for(Q=0;Q<he;Q++)H=O.d2l(j[Q],0,K)*R[0],q=z.d2l(X[Q],0,$)*R[1],re=G.d2l(ie[Q],0,U)*R[2],I[Q]=[H,q,re];if(Array.isArray(F.text))oe=F.text;else if(F.text!==void 0)for(oe=new Array(he),Q=0;Q<he;Q++)oe[Q]=F.text;function se(We,ze){var Ie=D[We];return o.tickText(Ie,Ie.d2l(ze),!0).text}var ae=F.texttemplate;if(ae){var le=P.fullLayout,_e=le._d3locale,fe=Array.isArray(ae),me=fe?Math.min(ae.length,he):he,xe=fe?function(We){return ae[We]}:function(){return ae};for(oe=new Array(me),Q=0;Q<me;Q++){var ye={x:j[Q],y:X[Q],z:ie[Q]},be={xLabel:se("xaxis",j[Q]),yLabel:se("yaxis",X[Q]),zLabel:se("zaxis",ie[Q])},ke={};b(ke,F,Q);var De=F._meta||{};oe[Q]=a.texttemplateString(xe(Q),be,_e,ke,ye,De)}}if(Z={position:I,mode:F.mode,text:oe},"line"in F&&(Z.lineColor=n(ee,1,he),Z.lineWidth=ee.width,Z.lineDashes=ee.dash),"marker"in F){var He=r(F);Z.scatterColor=n(Y,1,he),Z.scatterSize=_(Y.size,he,w,20,He),Z.scatterMarker=_(Y.symbol,he,p,"\u25CF"),Z.scatterLineWidth=Y.line.width,Z.scatterLineColor=n(Y.line,1,he),Z.scatterAngle=0}"textposition"in F&&(Z.textOffset=M(F.textposition),Z.textColor=n(F.textfont,1,he),Z.textSize=_(F.textfont.size,he,a.identity,12),Z.textFont=F.textfont.family,Z.textAngle=0);var Ae=["x","y","z"];for(Z.project=[!1,!1,!1],Z.projectScale=[1,1,1],Z.projectOpacity=[1,1,1],Q=0;Q<3;++Q){var Le=F.projection[Ae[Q]];(Z.project[Q]=Le.show)&&(Z.projectOpacity[Q]=Le.opacity,Z.projectScale[Q]=Le.scale)}Z.errorBounds=g(F,R,D);var Ze=l([F.error_x,F.error_y,F.error_z]);return Z.errorColor=Ze.color,Z.errorLineWidth=Ze.lineWidth,Z.errorCapSize=Ze.capSize,Z.delaunayAxis=F.surfaceaxis,Z.delaunayColor=i(F.surfacecolor),Z}function L(P){if(a.isArrayOrTypedArray(P)){var F=P[0];return a.isArrayOrTypedArray(F)&&(P=F),"rgb("+P.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function E(P){return a.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}f.update=function(P){var F=this.scene.glplot.gl,I,D,R,O,z=v.solid;this.data=P;var G=h(this.scene,P);"mode"in G&&(this.mode=G.mode),"lineDashes"in G&&G.lineDashes in v&&(z=v[G.lineDashes]),this.color=E(G.scatterColor)||E(G.lineColor),this.dataPoints=G.position,I={gl:this.scene.glplot.gl,position:G.position,color:G.lineColor,lineWidth:G.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=m(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Y=P.opacity;if(P.marker&&P.marker.opacity&&(Y*=P.marker.opacity),D={gl:this.scene.glplot.gl,position:G.position,color:G.scatterColor,size:G.scatterSize,glyph:G.scatterMarker,opacity:Y,orthographic:!0,lineWidth:G.scatterLineWidth,lineColor:G.scatterLineColor,project:G.project,projectScale:G.projectScale,projectOpacity:G.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=u(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:G.position,glyph:G.text,color:G.textColor,size:G.textSize,angle:G.textAngle,alignment:G.textOffset,font:G.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=u(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:G.position,color:G.errorColor,error:G.errorBounds,lineWidth:G.errorLineWidth,capSize:G.errorCapSize,opacity:P.opacity},this.errorBars?G.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):G.errorBounds&&(this.errorBars=A(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),G.delaunayAxis>=0){var ee=y(G.position,G.delaunayColor,G.delaunayAxis);ee.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(ee):(ee.gl=F,this.delaunayMesh=T(ee),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function S(P,F){var I=new d(P,F.uid);return I.update(F),I}N.exports=S},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/text_defaults"),i=t("./attributes");N.exports=function(v,s,o,b){function g(w,p){return u.coerce(v,s,i,w,p)}var d=n(v,s,g,b);if(!d){s.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),g("zhoverformat"),g("mode"),A.hasLines(s)&&(g("connectgaps"),e(v,s,o,b,g)),A.hasMarkers(s)&&T(v,s,o,b,g,{noSelect:!0,noAngle:!0}),A.hasText(s)&&(g("texttemplate"),a(v,s,b,g,{noSelect:!0}));var f=(s.line||{}).color,y=(s.marker||{}).color;g("surfaceaxis")>=0&&g("surfacecolor",f||y);for(var l=["x","y","z"],x=0;x<3;++x){var c="projection."+l[x];g(c+".show")&&(g(c+".opacity"),g(c+".scale"))}var M=m.getComponentMethod("errorbars","supplyDefaults");M(v,s,f||y||o,{axis:"z"}),M(v,s,f||y||o,{axis:"y",inherit:"z"}),M(v,s,f||y||o,{axis:"x",inherit:"z"})};function n(r,v,s,o){var b=0,g=s("x"),d=s("y"),f=s("z"),y=m.getComponentMethod("calendars","handleTraceDefaults");return y(r,v,["x","y","z"],o),g&&d&&f&&(b=Math.min(g.length,d.length,f.length),v._length=v._xlength=v._ylength=v._zlength=b),b}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(t,N,V){N.exports={plot:t("./convert"),attributes:t("./attributes"),markerSymbols:t("../../constants/gl3d_markers"),supplyDefaults:t("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(t,N,V){var m=t("../scatter/attributes"),u=t("../../plots/attributes"),A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),a=t("../../lib/extend").extendFlat,i=m.marker,n=m.line,r=i.line;N.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},m.mode,{dflt:"markers"}),text:a({},m.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},m.hovertext,{}),line:{color:n.color,width:n.width,dash:n.dash,backoff:n.backoff,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:m.connectgaps,fill:a({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:a({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,angle:i.angle,angleref:i.angleref,standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:a({width:r.width,editType:"calc"},e("marker.line")),gradient:i.gradient,editType:"calc"},e("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:a({},u.hoverinfo,{flags:["a","b","text","name"]}),hoveron:m.hoveron,hovertemplate:A()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../scatter/colorscale_calc"),A=t("../scatter/arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,a=t("../carpet/lookup_carpetid");N.exports=function(n,r){var v=r._carpetTrace=a(n,r);if(!(!v||!v.visible||v.visible==="legendonly")){var s;r.xaxis=v.xaxis,r.yaxis=v.yaxis;var o=r._length,b=new Array(o),g,d,f=!1;for(s=0;s<o;s++)if(g=r.a[s],d=r.b[s],m(g)&&m(d)){var y=v.ab2xy(+g,+d,!0),l=v.isVisible(+g,+d);l||(f=!0),b[s]={x:y[0],y:y[1],a:g,b:d,vis:l}}else b[s]={x:!1,y:!1};return r._needsCull=f,b[0].carpet=v,b[0].trace=r,e(r,o),u(n,r),A(b,r),T(b,r),b}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/constants"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/line_shape_defaults"),i=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");N.exports=function(s,o,b,g){function d(w,p){return m.coerce(s,o,r,w,p)}d("carpet"),o.xaxis="x",o.yaxis="y";var f=d("a"),y=d("b"),l=Math.min(f.length,y.length);if(!l){o.visible=!1;return}o._length=l,d("text"),d("texttemplate"),d("hovertext");var x=l<u.PTS_LINESONLY?"lines+markers":"lines";d("mode",x),A.hasLines(o)&&(e(s,o,b,g,d,{backoff:!0}),a(s,o,d),d("connectgaps")),A.hasMarkers(o)&&T(s,o,b,g,d,{gradient:!0}),A.hasText(o)&&i(s,o,g,d);var c=[];(A.hasMarkers(o)||A.hasText(o))&&(d("marker.maxdisplayed"),c.push("points")),d("fill"),o.fill!=="none"&&(n(s,o,b,d),A.hasLines(o)||a(s,o,d)),(o.fill==="tonext"||o.fill==="toself")&&c.push("fills");var M=d("hoveron",c.join("+")||"points");M!=="fills"&&d("hovertemplate"),m.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(t,N,V){N.exports=function(u,A,T,e,a){var i=e[a];return u.a=i.a,u.b=i.b,u.y=i.y,u}},{}],974:[function(t,N,V){N.exports=function(u,A){var T={},e=A._carpet,a=e.ab2ij([u.a,u.b]),i=Math.floor(a[0]),n=a[0]-i,r=Math.floor(a[1]),v=a[1]-r,s=e.evalxy([],i,r,n,v);return T.yLabel=s[1].toFixed(3),T}},{}],975:[function(t,N,V){var m=t("../scatter/hover"),u=t("../../lib").fillText;N.exports=function(T,e,a,i){var n=m(T,e,a,i);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var v=1-r.y0/T.ya._length,s=T.xa._length,o=s*v/2,b=s-o;return r.x0=Math.max(Math.min(r.x0,b),o),r.x1=Math.max(Math.min(r.x1,b),o),n}var g=r.cd[r.index];r.a=g.a,r.b=g.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var d=r.trace,f=d._carpet,y=d._module.formatLabels(g,d);r.yLabel=y.yLabel,delete r.text;var l=[];function x(w,p){var _;w.labelprefix&&w.labelprefix.length>0?_=w.labelprefix.replace(/ = $/,""):_=w._hovertitle,l.push(_+": "+p.toFixed(3)+w.labelsuffix)}if(!d.hovertemplate){var c=g.hi||d.hoverinfo,M=c.split("+");M.indexOf("all")!==-1&&(M=["a","b","text"]),M.indexOf("a")!==-1&&x(f.aaxis,g.a),M.indexOf("b")!==-1&&x(f.baxis,g.b),l.push("y: "+r.yLabel),M.indexOf("text")!==-1&&u(g,d,l),r.extraText=l.join("<br>")}return n}},{"../../lib":515,"../scatter/hover":947}],976:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:t("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(t,N,V){var m=t("../scatter/plot"),u=t("../../plots/cartesian/axes"),A=t("../../components/drawing");N.exports=function(e,a,i,n){var r,v,s,o=i[0][0].carpet,b=u.getFromId(e,o.xaxis||"x"),g=u.getFromId(e,o.yaxis||"y"),d={xaxis:b,yaxis:g,plot:a.plot};for(r=0;r<i.length;r++)v=i[r][0].trace,v._xA=b,v._yA=g;for(m(e,d,i,n),r=0;r<i.length;r++)v=i[r][0].trace,s=n.selectAll("g.trace"+v.uid+" .js-line"),A.setClipUrl(s,i[r][0].carpet._clipPathId,e)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scatter/attributes"),T=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat,n=t("../../plot_api/edit_types").overrideAll,r=A.marker,v=A.line,s=r.line;N.exports=n({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},A.mode,{dflt:"markers"}),text:i({},A.text,{}),texttemplate:u({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},A.hovertext,{}),textfont:A.textfont,textposition:A.textposition,line:{color:v.color,width:v.width,dash:a},connectgaps:A.connectgaps,marker:i({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:i({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:i({width:s.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:A.fillcolor,selected:A.selected,unselected:A.unselected,hoverinfo:i({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../constants/numerical").BADNUM,A=t("../scatter/colorscale_calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),a=t("../../lib")._;function i(n){return n&&typeof n=="string"}N.exports=function(r,v){var s=Array.isArray(v.locations),o=s?v.locations.length:v._length,b=new Array(o),g;v.geojson?g=function(c){return i(c)||m(c)}:g=i;for(var d=0;d<o;d++){var f=b[d]={};if(s){var y=v.locations[d];f.loc=g(y)?y:null}else{var l=v.lon[d],x=v.lat[d];m(l)&&m(x)?f.lonlat=[+l,+x]:f.lonlat=[u,u]}}return T(b,v),A(r,v),e(b,v),o&&(b[0].t={labels:{lat:a(r,"lat:")+" ",lon:a(r,"lon:")+" "}}),b}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),i=t("./attributes");N.exports=function(r,v,s,o){function b(M,w){return m.coerce(r,v,i,M,w)}var g=b("locations"),d;if(g&&g.length){var f=b("geojson"),y;(typeof f=="string"&&f!==""||m.isPlainObject(f))&&(y="geojson-id");var l=b("locationmode",y);l==="geojson-id"&&b("featureidkey"),d=g.length}else{var x=b("lon")||[],c=b("lat")||[];d=Math.min(x.length,c.length)}if(!d){v.visible=!1;return}v._length=d,b("text"),b("hovertext"),b("hovertemplate"),b("mode"),u.hasLines(v)&&(T(r,v,s,o,b),b("connectgaps")),u.hasMarkers(v)&&A(r,v,s,o,b,{gradient:!0}),u.hasText(v)&&(b("texttemplate"),e(r,v,o,b)),b("fill"),v.fill!=="none"&&a(r,v,s,b),m.coerceSelectionMarkerOpacity(v,b)}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(t,N,V){N.exports=function(u,A,T,e,a){u.lon=A.lon,u.lat=A.lat,u.location=A.loc?A.loc:null;var i=e[a];return i.fIn&&i.fIn.properties&&(u.properties=i.fIn.properties),u}},{}],982:[function(t,N,V){var m=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i=e[T.geo]._subplot,n=i.mockAxis,r=A.lonlat;return a.lonLabel=m.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=m.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],983:[function(t,N,V){var m=t("../../components/fx"),u=t("../../constants/numerical").BADNUM,A=t("../scatter/get_trace_color"),T=t("../../lib").fillText,e=t("./attributes");N.exports=function(n,r,v){var s=n.cd,o=s[0].trace,b=n.xa,g=n.ya,d=n.subplot,f=d.projection.isLonLatOverEdges,y=d.project;function l(h){var L=h.lonlat;if(L[0]===u||f(L))return 1/0;var E=y(L),S=y([r,v]),P=Math.abs(E[0]-S[0]),F=Math.abs(E[1]-S[1]),I=Math.max(3,h.mrc||0);return Math.max(Math.sqrt(P*P+F*F)-I,1-3/I)}if(m.getClosest(s,l,n),n.index!==!1){var x=s[n.index],c=x.lonlat,M=[b.c2p(c),g.c2p(c)],w=x.mrc||1;n.x0=M[0]-w,n.x1=M[0]+w,n.y0=M[1]-w,n.y1=M[1]+w,n.loc=x.loc,n.lon=c[0],n.lat=c[1];var p={};p[o.geo]={_subplot:d};var _=o._module.formatLabels(x,o,p);return n.lonLabel=_.lonLabel,n.latLabel=_.latLabel,n.color=A(o,x),n.extraText=a(o,x,n,s[0].t.labels),n.hovertemplate=o.hovertemplate,[n]}};function a(i,n,r,v){if(i.hovertemplate)return;var s=n.hi||i.hoverinfo,o=s==="all"?e.hoverinfo.flags:s.split("+"),b=o.indexOf("location")!==-1&&Array.isArray(i.locations),g=o.indexOf("lon")!==-1,d=o.indexOf("lat")!==-1,f=o.indexOf("text")!==-1,y=[];function l(x){return x+"\xB0"}return b?y.push(n.loc):g&&d?y.push("("+l(r.latLabel)+", "+l(r.lonLabel)+")"):g?y.push(v.lon+l(r.lonLabel)):d&&y.push(v.lat+l(r.latLabel)),f&&T(n,i,y),y.join("<br>")}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:t("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../lib/topojson_utils").getTopojsonFeatures,T=t("../../lib/geojson_utils"),e=t("../../lib/geo_location_utils"),a=t("../../plots/cartesian/autorange").findExtremes,i=t("../../constants/numerical").BADNUM,n=t("../scatter/calc").calcMarkerSize,r=t("../scatter/subtypes"),v=t("./style");function s(b,g,d){var f=g.layers.frontplot.select(".scatterlayer"),y=u.makeTraceGroups(f,d,"trace scattergeo");function l(x,c){x.lonlat[0]===i&&m.select(c).remove()}y.selectAll("*").remove(),y.each(function(x){var c=m.select(this),M=x[0].trace;if(r.hasLines(M)||M.fill!=="none"){var w=T.calcTraceToLineCoords(x),p=M.fill!=="none"?T.makePolygon(w):T.makeLine(w);c.selectAll("path.js-line").data([{geojson:p,trace:M}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(M)&&c.selectAll("path.point").data(u.identity).enter().append("path").classed("point",!0).each(function(_){l(_,this)}),r.hasText(M)&&c.selectAll("g").data(u.identity).enter().append("g").append("text").each(function(_){l(_,this)}),v(b,x)})}function o(b,g){var d=b[0].trace,f=g[d.geo],y=f._subplot,l=d._length,x,c;if(Array.isArray(d.locations)){var M=d.locationmode,w=M==="geojson-id"?e.extractTraceFeature(b):A(d,y.topojson);for(x=0;x<l;x++){c=b[x];var p=M==="geojson-id"?c.fOut:e.locationToFeature(M,c.loc,w);c.lonlat=p?p.properties.ct:[i,i]}}var _={padded:!0},h,L;if(f.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var E=e.computeBbox(e.getTraceGeojson(d));h=[E[0],E[2]],L=[E[1],E[3]]}else{for(h=new Array(l),L=new Array(l),x=0;x<l;x++)c=b[x],h[x]=c.lonlat[0],L[x]=c.lonlat[1];_.ppad=n(d,l)}d._extremes.lon=a(f.lonaxis._ax,h,_),d._extremes.lat=a(f.lataxis._ax,L,_)}N.exports={calcGeoJSON:o,plot:s}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(t,N,V){var m=t("../scatter/subtypes"),u=t("../../constants/numerical").BADNUM;N.exports=function(T,e){var a=T.cd,i=T.xaxis,n=T.yaxis,r=[],v=a[0].trace,s,o,b,g,d,f=!m.hasMarkers(v)&&!m.hasText(v);if(f)return[];if(e===!1)for(d=0;d<a.length;d++)a[d].selected=0;else for(d=0;d<a.length;d++)s=a[d],o=s.lonlat,o[0]!==u&&(b=i.c2p(o),g=n.c2p(o),e.contains([b,g],null,d,T)?(r.push({pointNumber:d,lon:o[0],lat:o[1]}),s.selected=1):s.selected=0);return r}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/drawing"),A=t("../../components/color"),T=t("../scatter/style"),e=T.stylePoints,a=T.styleText;N.exports=function(r,v){v&&i(r,v)};function i(n,r){var v=r[0].trace,s=r[0].node3;s.style("opacity",r[0].trace.opacity),e(s,v,n),a(s,v,n),s.selectAll("path.js-line").style("fill","none").each(function(o){var b=m.select(this),g=o.trace,d=g.line||{};b.call(A.stroke,d.color).call(u.dashLine,d.dash||"",d.width||0),g.fill!=="none"&&b.call(A.fill,g.fillcolor)})}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(t,N,V){var m=t("../../plots/attributes"),u=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../components/colorscale/attributes"),e=t("../../lib/sort_object_keys"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll,n=t("./constants").DASHES,r=u.line,v=u.marker,s=v.line,o=N.exports=i({x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),text:u.text,hovertext:u.hovertext,textposition:u.textposition,textfont:u.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(n),dflt:"solid"}},marker:a({},T("marker"),{symbol:v.symbol,angle:v.angle,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,opacity:v.opacity,colorbar:v.colorbar,line:a({},T("marker.line"),{width:s.width})}),connectgaps:u.connectgaps,fill:a({},u.fill,{dflt:"none"}),fillcolor:u.fillcolor,selected:{marker:u.selected.marker,textfont:u.selected.textfont},unselected:{marker:u.unselected.marker,textfont:u.unselected.textfont},opacity:m.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=u.hovertemplate,o.texttemplate=u.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(t,N,V){var m=t("./hover");N.exports={moduleType:"trace",name:"scattergl",basePlotModule:t("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../scatter/cross_trace_defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),hoverPoints:m.hoverPoints,selectPoints:t("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(t,N,V){var m=t("@plotly/point-cluster"),u=t("../../lib"),A=t("../../plots/cartesian/axis_ids"),T=t("../../plots/cartesian/autorange").findExtremes,e=t("../../plots/cartesian/align_period"),a=t("../scatter/calc"),i=a.calcMarkerSize,n=a.calcAxisExpansion,r=a.setFirstScatter,v=t("../scatter/colorscale_calc"),s=t("./convert"),o=t("./scene_update"),b=t("../../constants/numerical").BADNUM,g=t("./constants").TOO_MANY_POINTS;N.exports=function(l,x){var c=l._fullLayout,M=x._xA=A.getFromId(l,x.xaxis,"x"),w=x._yA=A.getFromId(l,x.yaxis,"y"),p=c._plots[x.xaxis+x.yaxis],_=x._length,h=_>=g,L=_*2,E={},S,P=M.makeCalcdata(x,"x"),F=w.makeCalcdata(x,"y"),I=e(x,M,"x",P),D=e(x,w,"y",F),R=I.vals,O=D.vals;x._x=R,x._y=O,x.xperiodalignment&&(x._origX=P,x._xStarts=I.starts,x._xEnds=I.ends),x.yperiodalignment&&(x._origY=F,x._yStarts=D.starts,x._yEnds=D.ends);var z=new Array(L),G=new Array(_);for(S=0;S<_;S++)z[S*2]=R[S]===b?NaN:R[S],z[S*2+1]=O[S]===b?NaN:O[S],G[S]=S;if(M.type==="log")for(S=0;S<L;S+=2)z[S]=M.c2l(z[S]);if(w.type==="log")for(S=1;S<L;S+=2)z[S]=w.c2l(z[S]);h&&M.type!=="log"&&w.type!=="log"?E.tree=m(z):E.ids=G,v(l,x);var Y=f(l,p,x,z,R,O),ee=o(l,p);r(c,x);var j;return h?Y.marker&&(j=Y.marker.sizeAvg||Math.max(Y.marker.size,3)):j=i(x,_),n(l,x,M,w,R,O,j),Y.errorX&&d(x,M,Y.errorX),Y.errorY&&d(x,w,Y.errorY),Y.fill&&!ee.fill2d&&(ee.fill2d=!0),Y.marker&&!ee.scatter2d&&(ee.scatter2d=!0),Y.line&&!ee.line2d&&(ee.line2d=!0),(Y.errorX||Y.errorY)&&!ee.error2d&&(ee.error2d=!0),Y.text&&!ee.glText&&(ee.glText=!0),Y.marker&&(Y.marker.snap=_),ee.lineOptions.push(Y.line),ee.errorXOptions.push(Y.errorX),ee.errorYOptions.push(Y.errorY),ee.fillOptions.push(Y.fill),ee.markerOptions.push(Y.marker),ee.markerSelectedOptions.push(Y.markerSel),ee.markerUnselectedOptions.push(Y.markerUnsel),ee.textOptions.push(Y.text),ee.textSelectedOptions.push(Y.textSel),ee.textUnselectedOptions.push(Y.textUnsel),ee.selectBatch.push([]),ee.unselectBatch.push([]),E._scene=ee,E.index=ee.count,E.x=R,E.y=O,E.positions=z,ee.count++,[{x:!1,y:!1,t:E,trace:x}]};function d(y,l,x){var c=y._extremes[l._id],M=T(l,x._bnds,{padded:!0});c.min=c.min.concat(M.min),c.max=c.max.concat(M.max)}function f(y,l,x,c,M,w){var p=s.style(y,x);if(p.marker&&(p.marker.positions=c),p.line&&c.length>1&&u.extendFlat(p.line,s.linePositions(y,x,c)),p.errorX||p.errorY){var _=s.errorBarPositions(y,x,c,M,w);p.errorX&&u.extendFlat(p.errorX,_.x),p.errorY&&u.extendFlat(p.errorY,_.y)}return p.text&&(u.extendFlat(p.text,{positions:c},s.textPosition(y,x,p.text,p.marker)),u.extendFlat(p.textSel,{positions:c},s.textPosition(y,x,p.text,p.markerSel)),u.extendFlat(p.textUnsel,{positions:c},s.textPosition(y,x,p.text,p.markerUnsel))),p}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(t,N,V){var m=20;N.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:m,SYMBOL_STROKE:m/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(t,N,V){var m=t("fast-isnumeric"),u=t("svg-path-sdf"),A=t("color-normalize"),T=t("../../registry"),e=t("../../lib"),a=t("../../components/drawing"),i=t("../../plots/cartesian/axis_ids"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/subtypes"),v=t("../scatter/make_bubble_size_func"),s=t("./helpers"),o=t("./constants"),b=t("../../constants/interactions").DESELECTDIM,g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},d=t("../../components/fx/helpers").appendArrayPointValue;function f(I,D){var R,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=I._context.plotGlPixelRatio;if(D.visible!==!0)return O;if(r.hasText(D)&&(O.text=y(I,D),O.textSel=c(I,D,D.selected),O.textUnsel=c(I,D,D.unselected)),r.hasMarkers(D)&&(O.marker=l(I,D),O.markerSel=x(I,D,D.selected),O.markerUnsel=x(I,D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var G=D.marker.opacity;for(O.markerUnsel.opacity=new Array(G.length),R=0;R<G.length;R++)O.markerUnsel.opacity[R]=b*G[R]}if(r.hasLines(D)){O.line={overlay:!0,thickness:D.line.width*z,color:D.line.color,opacity:D.opacity};var Y=(o.DASHES[D.line.dash]||[1]).slice();for(R=0;R<Y.length;++R)Y[R]*=D.line.width*z;O.line.dashes=Y}return D.error_x&&D.error_x.visible&&(O.errorX=M(D,D.error_x,z)),D.error_y&&D.error_y.visible&&(O.errorY=M(D,D.error_y,z)),!!D.fill&&D.fill!=="none"&&(O.fill={closed:!0,fill:D.fillcolor,thickness:0}),O}function y(I,D){var R=I._fullLayout,O=D._length,z=D.textfont,G=D.textposition,Y=Array.isArray(G)?G:[G],ee=z.color,j=z.size,X=z.family,ie={},he,K=I._context.plotGlPixelRatio,$=D.texttemplate;if($){ie.text=[];var U=R._d3locale,H=Array.isArray($),q=H?Math.min($.length,O):O,re=H?function(_e){return $[_e]}:function(){return $};for(he=0;he<q;he++){var Z={i:he},Q=D._module.formatLabels(Z,D,R),oe={};d(oe,D,he);var se=D._meta||{};ie.text.push(e.texttemplateString(re(he),Q,U,oe,Z,se))}}else Array.isArray(D.text)&&D.text.length<O?ie.text=D.text.slice():ie.text=D.text;if(Array.isArray(ie.text))for(he=ie.text.length;he<O;he++)ie.text[he]="";for(ie.opacity=D.opacity,ie.font={},ie.align=[],ie.baseline=[],he=0;he<Y.length;he++){var ae=Y[he].split(/\s+/);switch(ae[1]){case"left":ie.align.push("right");break;case"right":ie.align.push("left");break;default:ie.align.push(ae[1])}switch(ae[0]){case"top":ie.baseline.push("bottom");break;case"bottom":ie.baseline.push("top");break;default:ie.baseline.push(ae[0])}}if(Array.isArray(ee))for(ie.color=new Array(O),he=0;he<O;he++)ie.color[he]=ee[he];else ie.color=ee;if(e.isArrayOrTypedArray(j)||Array.isArray(X))for(ie.font=new Array(O),he=0;he<O;he++){var le=ie.font[he]={};le.size=(e.isTypedArray(j)?j[he]:Array.isArray(j)?m(j[he])?j[he]:0:j)*K,le.family=Array.isArray(X)?X[he]:X}else ie.font={size:j*K,family:X};return ie}function l(I,D){var R=D._length,O=D.marker,z={},G,Y=e.isArrayOrTypedArray(O.symbol),ee=e.isArrayOrTypedArray(O.angle),j=e.isArrayOrTypedArray(O.color),X=e.isArrayOrTypedArray(O.line.color),ie=e.isArrayOrTypedArray(O.opacity),he=e.isArrayOrTypedArray(O.size),K=e.isArrayOrTypedArray(O.line.width),$;if(Y||($=s.isOpenSymbol(O.symbol)),Y||j||X||ie||ee){z.symbols=new Array(R),z.angles=new Array(R),z.colors=new Array(R),z.borderColors=new Array(R);var U=O.symbol,H=O.angle,q=n(O,O.opacity,R),re=n(O.line,O.opacity,R);if(!Array.isArray(re[0])){var Z=re;for(re=Array(R),G=0;G<R;G++)re[G]=Z}if(!Array.isArray(q[0])){var Q=q;for(q=Array(R),G=0;G<R;G++)q[G]=Q}if(!Array.isArray(U)){var oe=U;for(U=Array(R),G=0;G<R;G++)U[G]=oe}if(!Array.isArray(H)){var se=H;for(H=Array(R),G=0;G<R;G++)H[G]=se}for(z.symbols=U,z.angles=H,z.colors=q,z.borderColors=re,G=0;G<R;G++)Y&&($=s.isOpenSymbol(O.symbol[G])),$&&(re[G]=q[G].slice(),q[G]=q[G].slice(),q[G][3]=0);for(z.opacity=D.opacity,z.markers=new Array(R),G=0;G<R;G++)z.markers[G]=E({mx:z.symbols[G],ma:z.angles[G]},D)}else $?(z.color=A(O.color,"uint8"),z.color[3]=0,z.borderColor=A(O.color,"uint8")):(z.color=A(O.color,"uint8"),z.borderColor=A(O.line.color,"uint8")),z.opacity=D.opacity*O.opacity,z.marker=E({mx:O.symbol,ma:O.angle},D);var ae=1,le=v(D,ae),_e;if(he||K){var fe=z.sizes=new Array(R),me=z.borderSizes=new Array(R),xe=0,ye;if(he){for(G=0;G<R;G++)fe[G]=le(O.size[G]),xe+=fe[G];ye=xe/R}else for(_e=le(O.size),G=0;G<R;G++)fe[G]=_e;if(K)for(G=0;G<R;G++)me[G]=O.line.width[G];else for(_e=O.line.width,G=0;G<R;G++)me[G]=_e;z.sizeAvg=ye}else z.size=le(O&&O.size||10),z.borderSizes=le(O.line.width);return z}function x(I,D,R){var O=D.marker,z={};return R&&(R.marker&&R.marker.symbol?z=l(I,e.extendFlat({},O,R.marker)):R.marker&&(R.marker.size&&(z.size=R.marker.size),R.marker.color&&(z.colors=R.marker.color),R.marker.opacity!==void 0&&(z.opacity=R.marker.opacity))),z}function c(I,D,R){var O={};if(!R)return O;if(R.textfont){var z={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};R.textfont&&e.extendFlat(z.textfont,R.textfont),O=y(I,z)}return O}function M(I,D,R){var O={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(O=I.error_y),O}var w=o.SYMBOL_SDF_SIZE,p=o.SYMBOL_SIZE,_=o.SYMBOL_STROKE,h={},L=a.symbolFuncs[0](p*.05);function E(I,D){var R=I.mx;if(R==="circle")return null;var O,z,G=a.symbolNumber(R),Y=a.symbolFuncs[G%100],ee=!!a.symbolNoDot[G%100],j=!!a.symbolNoFill[G%100],X=s.isDotSymbol(R);if(I.ma&&(R+="_"+I.ma),h[R])return h[R];var ie=a.getMarkerAngle(I,D);return X&&!ee?O=Y(p*1.1,ie)+L:O=Y(p,ie),z=u(O,{w,h:w,viewBox:[-p,-p,p,p],stroke:j?_:-_}),h[R]=z,z||null}function S(I,D,R){var O=R.length,z=O/2,G,Y;if(r.hasLines(D)&&z)if(D.line.shape==="hv"){for(G=[],Y=0;Y<z-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?G.push(R[Y*2+2],R[Y*2+1]):G.push(NaN,NaN));G.push(R[O-2],R[O-1])}else if(D.line.shape==="hvh"){for(G=[],Y=0;Y<z-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?G.push(R[Y*2],R[Y*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var ee=(R[Y*2]+R[Y*2+2])/2;G.push(R[Y*2],R[Y*2+1],ee,R[Y*2+1],ee,R[Y*2+3])}G.push(R[O-2],R[O-1])}else if(D.line.shape==="vhv"){for(G=[],Y=0;Y<z-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?G.push(R[Y*2],R[Y*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var j=(R[Y*2+1]+R[Y*2+3])/2;G.push(R[Y*2],R[Y*2+1],R[Y*2],j,R[Y*2+2],j)}G.push(R[O-2],R[O-1])}else if(D.line.shape==="vh"){for(G=[],Y=0;Y<z-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?G.push(R[Y*2],R[Y*2+3]):G.push(NaN,NaN));G.push(R[O-2],R[O-1])}else G=R;var X=!1;for(Y=0;Y<G.length;Y++)if(isNaN(G[Y])){X=!0;break}var ie=X||G.length>o.TOO_MANY_POINTS||r.hasMarkers(D)?"rect":"round";if(X&&D.connectgaps){var he=G[0],K=G[1];for(Y=0;Y<G.length;Y+=2)isNaN(G[Y])||isNaN(G[Y+1])?(G[Y]=he,G[Y+1]=K):(he=G[Y],K=G[Y+1])}return{join:ie,positions:G}}function P(I,D,R,O,z){var G=T.getComponentMethod("errorbars","makeComputeError"),Y=i.getFromId(I,D.xaxis,"x"),ee=i.getFromId(I,D.yaxis,"y"),j=R.length/2,X={};function ie(he,K){var $=K._id.charAt(0),U=D["error_"+$];if(U&&U.visible&&(K.type==="linear"||K.type==="log")){for(var H=G(U),q={x:0,y:1}[$],re={x:[0,1,2,3],y:[2,3,0,1]}[$],Z=new Float64Array(4*j),Q=1/0,oe=-1/0,se=0,ae=0;se<j;se++,ae+=4){var le=he[se];if(m(le)){var _e=R[se*2+q],fe=H(le,se),me=fe[0],xe=fe[1];if(m(me)&&m(xe)){var ye=le-me,be=le+xe;Z[ae+re[0]]=_e-K.c2l(ye),Z[ae+re[1]]=K.c2l(be)-_e,Z[ae+re[2]]=0,Z[ae+re[3]]=0,Q=Math.min(Q,le-me),oe=Math.max(oe,le+xe)}}}X[$]={positions:R,errors:Z,_bnds:[Q,oe]}}}return ie(O,Y),ie(z,ee),X}function F(I,D,R,O){var z=D._length,G={},Y;if(r.hasMarkers(D)){var ee=R.font,j=R.align,X=R.baseline;for(G.offset=new Array(z),Y=0;Y<z;Y++){var ie=O.sizes?O.sizes[Y]:O.size,he=Array.isArray(ee)?ee[Y].size:ee.size,K=Array.isArray(j)?j.length>1?j[Y]:j[0]:j,$=Array.isArray(X)?X.length>1?X[Y]:X[0]:X,U=g[K],H=g[$],q=ie?ie/.8+1:0,re=-H*q-H*.5;G.offset[Y]=[U*q/he,re/he]}}return G}N.exports={style:f,markerStyle:l,markerSelection:x,linePositions:S,errorBarPositions:P,textPosition:F}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(t,N,V){var m=t("../../lib"),u=t("../../registry"),A=t("./helpers"),T=t("./attributes"),e=t("../scatter/constants"),a=t("../scatter/subtypes"),i=t("../scatter/xy_defaults"),n=t("../scatter/period_defaults"),r=t("../scatter/marker_defaults"),v=t("../scatter/line_defaults"),s=t("../scatter/fillcolor_defaults"),o=t("../scatter/text_defaults");N.exports=function(g,d,f,y){function l(L,E){return m.coerce(g,d,T,L,E)}var x=g.marker?A.isOpenSymbol(g.marker.symbol):!1,c=a.isBubble(g),M=i(g,d,y,l);if(!M){d.visible=!1;return}n(g,d,y,l),l("xhoverformat"),l("yhoverformat");var w=M<e.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("hovertemplate"),l("mode",w),a.hasLines(d)&&(l("connectgaps"),v(g,d,f,y,l),l("line.shape")),a.hasMarkers(d)&&(r(g,d,f,y,l,{noAngleRef:!0,noStandOff:!0}),l("marker.line.width",x||c?1:0)),a.hasText(d)&&(l("texttemplate"),o(g,d,y,l));var p=(d.line||{}).color,_=(d.marker||{}).color;l("fill"),d.fill!=="none"&&s(g,d,f,l);var h=u.getComponentMethod("errorbars","supplyDefaults");h(g,d,p||_||f,{axis:"y"}),h(g,d,p||_||f,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(d,l)}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color"),A=t("../../constants/interactions").DESELECTDIM;function T(e){var a=e[0],i=a.trace,n=a.t,r=n._scene,v=n.index,s=r.selectBatch[v],o=r.unselectBatch[v],b=r.textOptions[v],g=r.textSelectedOptions[v]||{},d=r.textUnselectedOptions[v]||{},f=m.extendFlat({},b),y,l;if(s.length||o.length){var x=g.color,c=d.color,M=b.color,w=Array.isArray(M);for(f.color=new Array(i._length),y=0;y<s.length;y++)l=s[y],f.color[l]=x||(w?M[l]:M);for(y=0;y<o.length;y++){l=o[y];var p=w?M[l]:M;f.color[l]=c||(x?p:u.addOpacity(p,A))}}r.glText[v].update(f)}N.exports={styleTextSelection:T}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(t,N,V){var m=t("../scatter/format_labels");N.exports=function(A,T,e){var a=A.i;return"x"in A||(A.x=T._x[a]),"y"in A||(A.y=T._y[a]),m(A,T,e)}},{"../scatter/format_labels":945}],996:[function(t,N,V){var m=t("./constants");V.isOpenSymbol=function(u){return typeof u=="string"?m.OPEN_RE.test(u):u%200>100},V.isDotSymbol=function(u){return typeof u=="string"?m.DOT_RE.test(u):u>200}},{"./constants":991}],997:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("../scatter/get_trace_color");function T(a,i,n,r){var v=a.cd,s=v[0].t,o=v[0].trace,b=a.xa,g=a.ya,d=s.x,f=s.y,y=b.c2p(i),l=g.c2p(n),x=a.distance,c;if(s.tree){var M=b.p2c(y-x),w=b.p2c(y+x),p=g.p2c(l-x),_=g.p2c(l+x);r==="x"?c=s.tree.range(Math.min(M,w),Math.min(g._rl[0],g._rl[1]),Math.max(M,w),Math.max(g._rl[0],g._rl[1])):c=s.tree.range(Math.min(M,w),Math.min(p,_),Math.max(M,w),Math.max(p,_))}else c=s.ids;var h,L,E,S,P,F,I,D,R,O=x;if(r==="x"){var z=!!o.xperiodalignment,G=!!o.yperiodalignment;for(P=0;P<c.length;P++){if(h=c[P],E=d[h],F=Math.abs(b.c2p(E)-y),z){var Y=b.c2p(o._xStarts[h]),ee=b.c2p(o._xEnds[h]);F=y>=Math.min(Y,ee)&&y<=Math.max(Y,ee)?0:1/0}if(F<O){if(O=F,S=f[h],I=g.c2p(S)-l,G){var j=g.c2p(o._yStarts[h]),X=g.c2p(o._yEnds[h]);I=l>=Math.min(j,X)&&l<=Math.max(j,X)?0:1/0}R=Math.sqrt(F*F+I*I),L=c[P]}}}else for(P=c.length-1;P>-1;P--)h=c[P],E=d[h],S=f[h],F=b.c2p(E)-y,I=g.c2p(S)-l,D=Math.sqrt(F*F+I*I),D<O&&(O=R=D,L=h);return a.index=L,a.distance=O,a.dxy=R,L===void 0?[a]:[e(a,d,f,o)]}function e(a,i,n,r){var v=a.xa,s=a.ya,o=a.distance,b=a.dxy,g=a.index,d={pointNumber:g,x:i[g],y:n[g]};d.tx=Array.isArray(r.text)?r.text[g]:r.text,d.htx=Array.isArray(r.hovertext)?r.hovertext[g]:r.hovertext,d.data=Array.isArray(r.customdata)?r.customdata[g]:r.customdata,d.tp=Array.isArray(r.textposition)?r.textposition[g]:r.textposition;var f=r.textfont;f&&(d.ts=u.isArrayOrTypedArray(f.size)?f.size[g]:f.size,d.tc=Array.isArray(f.color)?f.color[g]:f.color,d.tf=Array.isArray(f.family)?f.family[g]:f.family);var y=r.marker;y&&(d.ms=u.isArrayOrTypedArray(y.size)?y.size[g]:y.size,d.mo=u.isArrayOrTypedArray(y.opacity)?y.opacity[g]:y.opacity,d.mx=u.isArrayOrTypedArray(y.symbol)?y.symbol[g]:y.symbol,d.ma=u.isArrayOrTypedArray(y.angle)?y.angle[g]:y.angle,d.mc=u.isArrayOrTypedArray(y.color)?y.color[g]:y.color);var l=y&&y.line;l&&(d.mlc=Array.isArray(l.color)?l.color[g]:l.color,d.mlw=u.isArrayOrTypedArray(l.width)?l.width[g]:l.width);var x=y&&y.gradient;x&&x.type!=="none"&&(d.mgt=Array.isArray(x.type)?x.type[g]:x.type,d.mgc=Array.isArray(x.color)?x.color[g]:x.color);var c=v.c2p(d.x,!0),M=s.c2p(d.y,!0),w=d.mrc||1,p=r.hoverlabel;p&&(d.hbg=Array.isArray(p.bgcolor)?p.bgcolor[g]:p.bgcolor,d.hbc=Array.isArray(p.bordercolor)?p.bordercolor[g]:p.bordercolor,d.hts=u.isArrayOrTypedArray(p.font.size)?p.font.size[g]:p.font.size,d.htc=Array.isArray(p.font.color)?p.font.color[g]:p.font.color,d.htf=Array.isArray(p.font.family)?p.font.family[g]:p.font.family,d.hnl=u.isArrayOrTypedArray(p.namelength)?p.namelength[g]:p.namelength);var _=r.hoverinfo;_&&(d.hi=Array.isArray(_)?_[g]:_);var h=r.hovertemplate;h&&(d.ht=Array.isArray(h)?h[g]:h);var L={};L[a.index]=d;var E=r._origX,S=r._origY,P=u.extendFlat({},a,{color:A(r,d),x0:c-w,x1:c+w,xLabelVal:E?E[g]:d.x,y0:M-w,y1:M+w,yLabelVal:S?S[g]:d.y,cd:L,distance:o,spikeDistance:b,hovertemplate:d.ht});return d.htx?P.text=d.htx:d.tx?P.text=d.tx:r.text&&(P.text=r.text),u.fillText(d,r,P),m.getComponentMethod("errorbars","hoverInfo")(d,r,P),P}N.exports={hoverPoints:T,calcHover:e}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(t,N,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(t,N,b){var m=t("regl-scatter2d"),u=t("regl-line2d"),A=t("regl-error2d"),T=t("gl-text"),e=t("../../lib"),a=t("../../components/dragelement/helpers").selectMode,i=t("../../lib/prepare_regl"),n=t("../scatter/subtypes"),r=t("../scatter/link_traces"),v=t("./edit_style").styleTextSelection,s={};function o(g,d,f,y){var l=g._size,x=g.width*y,c=g.height*y,M=l.l*y,w=l.b*y,p=l.r*y,_=l.t*y,h=l.w*y,L=l.h*y;return[M+d.domain[0]*h,w+f.domain[0]*L,x-p-(1-d.domain[1])*h,c-_-(1-f.domain[1])*L]}var b=N.exports=function(d,f,y){if(!!y.length){var l=d._fullLayout,x=f._scene,c=f.xaxis,M=f.yaxis,w,p;if(!!x){var _=i(d,["ANGLE_instanced_arrays","OES_element_index_uint"],s);if(!_){x.init();return}var h=x.count,L=l._glcanvas.data()[0].regl;if(r(d,f,y),x.dirty){if(x.error2d===!0&&(x.error2d=A(L)),x.line2d===!0&&(x.line2d=u(L)),x.scatter2d===!0&&(x.scatter2d=m(L)),x.fill2d===!0&&(x.fill2d=u(L)),x.glText===!0)for(x.glText=new Array(h),w=0;w<h;w++)x.glText[w]=new T(L);if(x.glText){if(h>x.glText.length){var E=h-x.glText.length;for(w=0;w<E;w++)x.glText.push(new T(L))}else if(h<x.glText.length){var S=x.glText.length-h,P=x.glText.splice(h,S);P.forEach(function(Z){Z.destroy()})}for(w=0;w<h;w++)x.glText[w].update(x.textOptions[w])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(Z){if(Z&&Z.positions){for(var Q=Z.positions,oe=0;oe<Q.length&&(isNaN(Q[oe])||isNaN(Q[oe+1]));)oe+=2;for(var se=Q.length-2;se>oe&&(isNaN(Q[se])||isNaN(Q[se+1]));)se-=2;Z.positions=Q.slice(oe,se+2)}return Z}),x.line2d.update(x.lineOptions)),x.error2d){var F=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(F)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=e.repeat(null,h),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(Z,Q){var oe=y[Q];if(!(!Z||!oe||!oe[0]||!oe[0].trace)){var se=oe[0],ae=se.trace,le=se.t,_e=x.lineOptions[Q],fe,me,xe=[];ae._ownfill&&xe.push(Q),ae._nexttrace&&xe.push(Q+1),xe.length&&(x.fillOrder[Q]=xe);var ye=[],be=_e&&_e.positions||le.positions,ke,De;if(ae.fill==="tozeroy"){for(ke=0;ke<be.length&&isNaN(be[ke+1]);)ke+=2;for(De=be.length-2;De>ke&&isNaN(be[De+1]);)De-=2;be[ke+1]!==0&&(ye=[be[ke],0]),ye=ye.concat(be.slice(ke,De+2)),be[De+1]!==0&&(ye=ye.concat([be[De],0]))}else if(ae.fill==="tozerox"){for(ke=0;ke<be.length&&isNaN(be[ke]);)ke+=2;for(De=be.length-2;De>ke&&isNaN(be[De]);)De-=2;be[ke]!==0&&(ye=[0,be[ke+1]]),ye=ye.concat(be.slice(ke,De+2)),be[De]!==0&&(ye=ye.concat([0,be[De+1]]))}else if(ae.fill==="toself"||ae.fill==="tonext"){for(ye=[],fe=0,Z.splitNull=!0,me=0;me<be.length;me+=2)(isNaN(be[me])||isNaN(be[me+1]))&&(ye=ye.concat(be.slice(fe,me)),ye.push(be[fe],be[fe+1]),ye.push(null,null),fe=me+2);ye=ye.concat(be.slice(fe)),fe&&ye.push(be[fe],be[fe+1])}else{var He=ae._nexttrace;if(He){var Ae=x.lineOptions[Q+1];if(Ae){var Le=Ae.positions;if(ae.fill==="tonexty"){for(ye=be.slice(),Q=Math.floor(Le.length/2);Q--;){var Ze=Le[Q*2],We=Le[Q*2+1];isNaN(Ze)||isNaN(We)||ye.push(Ze,We)}Z.fill=He.fillcolor}}}}if(ae._prevtrace&&ae._prevtrace.fill==="tonext"){var ze=x.lineOptions[Q-1].positions,Ie=ye.length/2;fe=Ie;var Ve=[fe];for(me=0;me<ze.length;me+=2)(isNaN(ze[me])||isNaN(ze[me+1]))&&(Ve.push(me/2+Ie+1),fe=me+2);ye=ye.concat(ze),Z.hole=Ve}return Z.fillmode=ae.fill,Z.opacity=ae.opacity,Z.positions=ye,Z}}),x.fill2d.update(x.fillOptions))}var I=l.dragmode,D=a(I),R=l.clickmode.indexOf("select")>-1;for(w=0;w<h;w++){var O=y[w][0],z=O.trace,G=O.t,Y=G.index,ee=z._length,j=G.x,X=G.y;if(z.selectedpoints||D||R){if(D||(D=!0),z.selectedpoints){var ie=x.selectBatch[Y]=e.selIndices2selPoints(z),he={};for(p=0;p<ie.length;p++)he[ie[p]]=1;var K=[];for(p=0;p<ee;p++)he[p]||K.push(p);x.unselectBatch[Y]=K}var $=G.xpx=new Array(ee),U=G.ypx=new Array(ee);for(p=0;p<ee;p++)$[p]=c.c2p(j[p]),U[p]=M.c2p(X[p])}else G.xpx=G.ypx=null}if(D){if(x.select2d||(x.select2d=m(l._glcanvas.data()[1].regl)),x.scatter2d){var H=new Array(h);for(w=0;w<h;w++)H[w]=x.selectBatch[w].length||x.unselectBatch[w].length?x.markerUnselectedOptions[w]:{};x.scatter2d.update(H)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&y.forEach(function(Z){var Q=((Z||[])[0]||{}).trace||{};n.hasText(Q)&&v(Z)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var q={viewport:o(l,c,M,d._context.plotGlPixelRatio),range:[(c._rl||c.range)[0],(M._rl||M.range)[0],(c._rl||c.range)[1],(M._rl||M.range)[1]]},re=e.repeat(q,x.count);x.fill2d&&x.fill2d.update(re),x.line2d&&x.line2d.update(re),x.error2d&&x.error2d.update(re.concat(re)),x.scatter2d&&x.scatter2d.update(re),x.select2d&&x.select2d.update(re),x.glText&&x.glText.forEach(function(Z){Z.update(q)})}}};b.reglPrecompiled=s},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){var e=T._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},i={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||(e=T._scene={},e.init=function(){m.extendFlat(e,i,a)},e.init(),e.update=function(r){var v=m.repeat(r,e.count);if(e.fill2d&&e.fill2d.update(v),e.scatter2d&&e.scatter2d.update(v),e.line2d&&e.line2d.update(v),e.error2d&&e.error2d.update(v.concat(v)),e.select2d&&e.select2d.update(v),e.glText)for(var s=0;s<e.count;s++)e.glText[s].update(r)},e.draw=function(){for(var r=e.count,v=e.fill2d,s=e.error2d,o=e.line2d,b=e.scatter2d,g=e.glText,d=e.select2d,f=e.selectBatch,y=e.unselectBatch,l=0;l<r;l++){if(v&&e.fillOrder[l]&&v.draw(e.fillOrder[l]),o&&e.lineOptions[l]&&o.draw(l),s&&(e.errorXOptions[l]&&s.draw(l),e.errorYOptions[l]&&s.draw(l+r)),b&&e.markerOptions[l])if(y[l].length){var x=m.repeat([],e.count);x[l]=y[l],b.draw(x)}else f[l].length||b.draw(l);g[l]&&e.textOptions[l]&&g[l].render()}d&&d.draw(f),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(r){r.destroy&&r.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,T._scene=null}),e.dirty||m.extendFlat(e,a),e}},{"../../lib":515}],1001:[function(t,N,V){var m=t("../scatter/subtypes"),u=t("./edit_style").styleTextSelection;N.exports=function(T,e){var a=T.cd,i=T.xaxis,n=T.yaxis,r=[],v=a[0].trace,s=a[0].t,o=v._length,b=s.x,g=s.y,d=s._scene,f=s.index;if(!d)return r;var y=m.hasText(v),l=m.hasMarkers(v),x=!l&&!y;if(v.visible!==!0||x)return r;var c=[],M=[];if(e!==!1&&!e.degenerate)for(var w=0;w<o;w++)e.contains([s.xpx[w],s.ypx[w]],!1,w,T)?(c.push(w),r.push({pointNumber:w,x:i.c2d(b[w]),y:n.c2d(g[w])})):M.push(w);if(l){var p=d.scatter2d;if(!c.length&&!M.length){var _=new Array(d.count);_[f]=d.markerOptions[f],p.update.apply(p,_)}else if(!d.selectBatch[f].length&&!d.unselectBatch[f].length){var h=new Array(d.count);h[f]=d.markerUnselectedOptions[f],p.update.apply(p,h)}}return d.selectBatch[f]=c,d.unselectBatch[f]=M,y&&u(a),r}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scattergeo/attributes"),T=t("../scatter/attributes"),e=t("../../plots/mapbox/layout_attributes"),a=t("../../plots/attributes"),i=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat,r=t("../../plot_api/edit_types").overrideAll,v=t("../../plots/mapbox/layout_attributes"),s=A.line,o=A.marker;N.exports=r({lon:A.lon,lat:A.lat,cluster:{enabled:{valType:"boolean"},maxzoom:n({},v.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:n({},o.opacity,{dflt:1})},mode:n({},T.mode,{dflt:"markers"}),text:n({},T.text,{}),texttemplate:u({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:n({},T.hovertext,{}),line:{color:s.color,width:s.width},connectgaps:T.connectgaps,marker:n({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},i("marker")),fill:A.fill,fillcolor:T.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:n({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../lib"),A=t("../../constants/numerical").BADNUM,T=t("../../lib/geojson_utils"),e=t("../../components/colorscale"),a=t("../../components/drawing"),i=t("../scatter/make_bubble_size_func"),n=t("../scatter/subtypes"),r=t("../../plots/mapbox/convert_text_opts"),v=t("../../components/fx/helpers").appendArrayPointValue,s=t("../../lib/svg_text_utils").NEWLINES,o=t("../../lib/svg_text_utils").BR_TAG_ALL;N.exports=function(M,w){var p=w[0].trace,_=p.visible===!0&&p._length!==0,h=p.fill!=="none",L=n.hasLines(p),E=n.hasMarkers(p),S=n.hasText(p),P=E&&p.marker.symbol==="circle",F=E&&p.marker.symbol!=="circle",I=p.cluster&&p.cluster.enabled,D=b("fill"),R=b("line"),O=b("circle"),z=b("symbol"),G={fill:D,line:R,circle:O,symbol:z};if(!_)return G;var Y;if((h||L)&&(Y=T.calcTraceToLineCoords(w)),h&&(D.geojson=T.makePolygon(Y),D.layout.visibility="visible",u.extendFlat(D.paint,{"fill-color":p.fillcolor})),L&&(R.geojson=T.makeLine(Y),R.layout.visibility="visible",u.extendFlat(R.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),P){var ee=g(w);O.geojson=ee.geojson,O.layout.visibility="visible",I&&(O.filter=["!",["has","point_count"]],G.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(p.cluster.color,p.cluster.step),"circle-radius":x(p.cluster.size,p.cluster.step),"circle-opacity":x(p.cluster.opacity,p.cluster.step)}},G.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),u.extendFlat(O.paint,{"circle-color":ee.mcc,"circle-radius":ee.mrc,"circle-opacity":ee.mo})}if(P&&I&&(O.filter=["!",["has","point_count"]]),(F||S)&&(z.geojson=d(w,M),u.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(u.extendFlat(z.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&p.marker.angle!=="auto"&&u.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=p.marker.allowoverlap,u.extendFlat(z.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),S)){var j=(p.marker||{}).size,X=r(p.textposition,j);u.extendFlat(z.layout,{"text-size":p.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),u.extendFlat(z.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return G};function b(c){return{type:c,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function g(c){var M=c[0].trace,w=M.marker,p=M.selectedpoints,_=u.isArrayOrTypedArray(w.color),h=u.isArrayOrTypedArray(w.size),L=u.isArrayOrTypedArray(w.opacity),E;function S(j){return M.opacity*j}function P(j){return j/2}var F;_&&(e.hasColorscale(M,"marker")?F=e.makeColorScaleFuncFromTrace(w):F=u.identity);var I;h&&(I=i(M));var D;L&&(D=function(j){var X=m(j)?+u.constrain(j,0,1):0;return S(X)});var R=[];for(E=0;E<c.length;E++){var O=c[E],z=O.lonlat;if(!l(z)){var G={};F&&(G.mcc=O.mcc=F(O.mc)),I&&(G.mrc=O.mrc=I(O.ms)),D&&(G.mo=D(O.mo)),p&&(G.selected=O.selected||0),R.push({type:"Feature",id:E+1,geometry:{type:"Point",coordinates:z},properties:G})}}var Y;if(p)for(Y=a.makeSelectedPointStyleFns(M),E=0;E<R.length;E++){var ee=R[E].properties;Y.selectedOpacityFn&&(ee.mo=S(Y.selectedOpacityFn(ee))),Y.selectedColorFn&&(ee.mcc=Y.selectedColorFn(ee)),Y.selectedSizeFn&&(ee.mrc=Y.selectedSizeFn(ee))}return{geojson:{type:"FeatureCollection",features:R},mcc:_||Y&&Y.selectedColorFn?{type:"identity",property:"mcc"}:w.color,mrc:h||Y&&Y.selectedSizeFn?{type:"identity",property:"mrc"}:P(w.size),mo:L||Y&&Y.selectedOpacityFn?{type:"identity",property:"mo"}:S(w.opacity)}}function d(c,M){for(var w=M._fullLayout,p=c[0].trace,_=p.marker||{},h=_.symbol,L=_.angle,E=h!=="circle"?f(h):y,S=L!=="auto"?f(L,!0):y,P=n.hasText(p)?f(p.text):y,F=[],I=0;I<c.length;I++){var D=c[I];if(!l(D.lonlat)){var R=p.texttemplate,O;if(R){var z=Array.isArray(R)?R[I]||"":R,G=p._module.formatLabels(D,p,w),Y={};v(Y,p,D.i);var ee=p._meta||{};O=u.texttemplateString(z,G,w._d3locale,Y,D,ee)}else O=P(I);O&&(O=O.replace(s,"").replace(o,`
`)),F.push({type:"Feature",geometry:{type:"Point",coordinates:D.lonlat},properties:{symbol:E(I),angle:S(I),text:O}})}}return{type:"FeatureCollection",features:F}}function f(c,M){return u.isArrayOrTypedArray(c)?M?function(w){return m(c[w])?+c[w]:0}:function(w){return c[w]}:c?function(){return c}:y}function y(){return""}function l(c){return c[0]===A}function x(c,M){var w;if(u.isArrayOrTypedArray(c)&&u.isArrayOrTypedArray(M)){w=["step",["get","point_count"],c[0]];for(var p=1;p<c.length;p++)w.push(M[p-1],c[p])}else w=c;return w}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),i=t("./attributes");N.exports=function(v,s,o,b){function g(_,h){return m.coerce(v,s,i,_,h)}function d(_,h){return m.coerce2(v,s,i,_,h)}var f=n(v,s,g);if(!f){s.visible=!1;return}if(g("text"),g("texttemplate"),g("hovertext"),g("hovertemplate"),g("mode"),g("below"),u.hasLines(s)&&(T(v,s,o,b,g,{noDash:!0}),g("connectgaps")),u.hasMarkers(s)){A(v,s,o,b,g,{noLine:!0,noAngle:!0}),g("marker.allowoverlap"),g("marker.angle");var y=s.marker;y.symbol!=="circle"&&(m.isArrayOrTypedArray(y.size)&&(y.size=y.size[0]),m.isArrayOrTypedArray(y.color)&&(y.color=y.color[0]))}var l=d("cluster.maxzoom"),x=d("cluster.step"),c=d("cluster.color",s.marker&&s.marker.color||o),M=d("cluster.size"),w=d("cluster.opacity"),p=l!==!1||x!==!1||c!==!1||M!==!1||w!==!1;g("cluster.enabled",p),u.hasText(s)&&e(v,s,b,g,{noSelect:!0}),g("fill"),s.fill!=="none"&&a(v,s,o,g),m.coerceSelectionMarkerOpacity(s,g)};function n(r,v,s){var o=s("lon")||[],b=s("lat")||[],g=Math.min(o.length,b.length);return v._length=g,g}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(t,N,V){N.exports=function(u,A){return u.lon=A.lon,u.lat=A.lat,u}},{}],1006:[function(t,N,V){var m=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot,n=i.mockAxis,r=A.lonlat;return a.lonLabel=m.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=m.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],1007:[function(t,N,V){var m=t("../../components/fx"),u=t("../../lib"),A=t("../scatter/get_trace_color"),T=u.fillText,e=t("../../constants/numerical").BADNUM,a=t("../../plots/mapbox/constants").traceLayerPrefix;function i(r,v,s){var o=r.cd,b=o[0].trace,g=r.xa,d=r.ya,f=r.subplot,y=[],l=a+b.uid+"-circle",x=b.cluster&&b.cluster.enabled;if(x){var c=f.map.queryRenderedFeatures(null,{layers:[l]});y=c.map(function(R){return R.id})}var M=v>=0?Math.floor((v+180)/360):Math.ceil((v-180)/360),w=M*360,p=v-w;function _(R){var O=R.lonlat;if(O[0]===e||x&&y.indexOf(R.i+1)===-1)return 1/0;var z=u.modHalf(O[0],360),G=O[1],Y=f.project([z,G]),ee=Y.x-g.c2p([p,G]),j=Y.y-d.c2p([z,s]),X=Math.max(3,R.mrc||0);return Math.max(Math.sqrt(ee*ee+j*j)-X,1-3/X)}if(m.getClosest(o,_,r),r.index!==!1){var h=o[r.index],L=h.lonlat,E=[u.modHalf(L[0],360)+w,L[1]],S=g.c2p(E),P=d.c2p(E),F=h.mrc||1;r.x0=S-F,r.x1=S+F,r.y0=P-F,r.y1=P+F;var I={};I[b.subplot]={_subplot:f};var D=b._module.formatLabels(h,b,I);return r.lonLabel=D.lonLabel,r.latLabel=D.latLabel,r.color=A(b,h),r.extraText=n(b,h,o[0].t.labels),r.hovertemplate=b.hovertemplate,[r]}}function n(r,v,s){if(r.hovertemplate)return;var o=v.hi||r.hoverinfo,b=o.split("+"),g=b.indexOf("all")!==-1,d=b.indexOf("lon")!==-1,f=b.indexOf("lat")!==-1,y=v.lonlat,l=[];function x(c){return c+"\xB0"}return g||d&&f?l.push("("+x(y[1])+", "+x(y[0])+")"):d?l.push(s.lon+x(y[0])):f&&l.push(s.lat+x(y[1])),(g||b.indexOf("text")!==-1)&&T(v,r,l),l.join("<br>")}N.exports={hoverPoints:i,getExtraText:n}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/mapbox/constants":620,"../scatter/get_trace_color":946}],1008:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("../scattergeo/calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),styleOnSelect:function(m,u){if(u){var A=u[0].trace;A._glTrace.update(u)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(t,N,V){var m=t("../../lib"),u=t("./convert"),A=t("../../plots/mapbox/constants").traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function e(i,n,r){this.type="scattermapbox",this.subplot=i,this.uid=n,this.clusterEnabled=r,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol",cluster:"source-"+n+"-circle",clusterCount:"source-"+n+"-circle"},this.layerIds={fill:A+n+"-fill",line:A+n+"-line",circle:A+n+"-circle",symbol:A+n+"-symbol",cluster:A+n+"-cluster",clusterCount:A+n+"-cluster-count"},this.below=null}var a=e.prototype;a.addSource=function(i,n,r){var v={type:"geojson",data:n.geojson};r&&r.enabled&&m.extendFlat(v,{cluster:!0,clusterMaxZoom:r.maxzoom}),this.subplot.map.addSource(this.sourceIds[i],v)},a.setSourceData=function(i,n){this.subplot.map.getSource(this.sourceIds[i]).setData(n.geojson)},a.addLayer=function(i,n,r){var v={type:n.type,id:this.layerIds[i],source:this.sourceIds[i],layout:n.layout,paint:n.paint};n.filter&&(v.filter=n.filter),this.subplot.addLayer(v,r)},a.update=function(n){var r=n[0].trace,v=this.subplot,s=v.map,o=u(v.gd,n),b=v.belowLookup["trace-"+this.uid],g,d,f,y=!!(r.cluster&&r.cluster.enabled),l=!!this.clusterEnabled;if(b!==this.below){var x=T.nonCluster;for(g=x.length-1;g>=0;g--)d=x[g],s.removeLayer(this.layerIds[d]);for(g=0;g<x.length;g++)d=x[g],f=o[d],this.addLayer(d,f,b);this.below=b}else if(y&&!l){for(g=T.nonCluster.length-1;g>=0;g--)d=T.nonCluster[g],s.removeLayer(this.layerIds[d]),s.removeSource(this.sourceIds[d]);for(this.addSource("circle",o.circle,r.cluster),g=0;g<T.cluster.length;g++)d=T.cluster[g],f=o[d],this.addLayer(d,f,b);this.clusterEnabled=y}else if(!y&&l){for(g=0;g<T.cluster.length;g++)d=T.cluster[g],s.removeLayer(this.layerIds[d]);for(s.removeSource(this.sourceIds.circle),g=0;g<T.nonCluster.length;g++)d=T.nonCluster[g],f=o[d],this.addSource(d,f,r.cluster),this.addLayer(d,f,b);this.clusterEnabled=y}n[0].trace._glTrace=this},a.dispose=function(){for(var n=this.subplot.map,r=this.clusterEnabled?T.cluster:T.nonCluster,v=r.length-1;v>=0;v--){var s=r[v];n.removeLayer(this.layerIds[s]),n.removeSource(this.sourceIds[s])}},N.exports=function(n,r){var v=r[0].trace,s=v.cluster&&v.cluster.enabled,o=new e(n,v.uid,s),b=u(n.gd,r),g=o.below=n.belowLookup["trace-"+v.uid],d,f,y;if(s)for(o.addSource("circle",b.circle,v.cluster),d=0;d<T.cluster.length;d++)f=T.cluster[d],y=b[f],o.addLayer(f,y,g);else for(d=0;d<T.nonCluster.length;d++)f=T.nonCluster[d],y=b[f],o.addSource(f,y,v.cluster),o.addLayer(f,y,g);return r[0].trace._glTrace=o,o}},{"../../lib":515,"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/subtypes"),A=t("../../constants/numerical").BADNUM;N.exports=function(e,a){var i=e.cd,n=e.xaxis,r=e.yaxis,v=[],s=i[0].trace,o;if(!u.hasMarkers(s))return[];if(a===!1)for(o=0;o<i.length;o++)i[o].selected=0;else for(o=0;o<i.length;o++){var b=i[o],g=b.lonlat;if(g[0]!==A){var d=[m.modHalf(g[0],360),g[1]],f=[n.c2p(d),r.c2p(d)];a.contains(f,null,o,e)?(v.push({pointNumber:o,lon:g[0],lat:g[1]}),b.selected=1):b.selected=0}}return v}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("../scatter/attributes"),e=t("../../plots/attributes"),a=T.line;N.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:u({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:A({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:A({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:A({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:A({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:m(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../constants/numerical").BADNUM,A=t("../../plots/cartesian/axes"),T=t("../scatter/colorscale_calc"),e=t("../scatter/arrays_to_calcdata"),a=t("../scatter/calc_selection"),i=t("../scatter/calc").calcMarkerSize;N.exports=function(r,v){for(var s=r._fullLayout,o=v.subplot,b=s[o].radialaxis,g=s[o].angularaxis,d=b.makeCalcdata(v,"r"),f=g.makeCalcdata(v,"theta"),y=v._length,l=new Array(y),x=0;x<y;x++){var c=d[x],M=f[x],w=l[x]={};m(c)&&m(M)?(w.r=c,w.theta=M):w.r=u}var p=i(v,y);return v._extremes.x=A.findExtremes(b,d,{ppad:p}),T(r,v),e(l,v),a(l,v),l}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");function v(o,b,g,d){function f(x,c){return m.coerce(o,b,r,x,c)}var y=s(o,b,d,f);if(!y){b.visible=!1;return}f("thetaunit"),f("mode",y<n?"lines+markers":"lines"),f("text"),f("hovertext"),b.hoveron!=="fills"&&f("hovertemplate"),u.hasLines(b)&&(T(o,b,g,d,f,{backoff:!0}),e(o,b,f),f("connectgaps")),u.hasMarkers(b)&&A(o,b,g,d,f,{gradient:!0}),u.hasText(b)&&(f("texttemplate"),a(o,b,d,f));var l=[];(u.hasMarkers(b)||u.hasText(b))&&(f("cliponaxis"),f("marker.maxdisplayed"),l.push("points")),f("fill"),b.fill!=="none"&&(i(o,b,g,f),u.hasLines(b)||e(o,b,f)),(b.fill==="tonext"||b.fill==="toself")&&l.push("fills"),f("hoveron",l.join("+")||"points"),m.coerceSelectionMarkerOpacity(b,f)}function s(o,b,g,d){var f=d("r"),y=d("theta"),l;if(f)y?l=Math.min(f.length,y.length):(l=f.length,d("theta0"),d("dtheta"));else{if(!y)return 0;l=b.theta.length,d("r0"),d("dr")}return b._length=l,l}N.exports={handleRThetaDefaults:s,supplyDefaults:v}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes");N.exports=function(T,e,a){var i={},n=a[e.subplot]._subplot,r,v;n?(r=n.radialAxis,v=n.angularAxis):(n=a[e.subplot],r=n.radialaxis,v=n.angularaxis);var s=r.c2l(T.r);i.rLabel=u.tickText(r,s,!0).text;var o=v.thetaunit==="degrees"?m.rad2deg(T.theta):T.theta;return i.thetaLabel=u.tickText(v,o,!0).text,i}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(t,N,V){var m=t("../scatter/hover");function u(T,e,a,i){var n=m(T,e,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var v=T.subplot,s=r.cd[r.index],o=r.trace;if(!!v.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,A(s,o,v,r),r.hovertemplate=o.hovertemplate,n}}function A(T,e,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="r",r._hovertitle="\u03B8";var v={};v[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,v);i.rLabel=s.rLabel,i.thetaLabel=s.thetaLabel;var o=T.hi||e.hoverinfo,b=[];function g(f,y){b.push(f._hovertitle+": "+y)}if(!e.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["r","theta","text"]),d.indexOf("r")!==-1&&g(n,i.rLabel),d.indexOf("theta")!==-1&&g(r,i.thetaLabel),d.indexOf("text")!==-1&&i.text&&(b.push(i.text),delete i.text),i.extraText=b.join("<br>")}}N.exports={hoverPoints:u,makeHoverPointText:A}},{"../scatter/hover":947}],1016:[function(t,N,V){N.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(t,N,V){var m=t("../scatter/plot"),u=t("../../constants/numerical").BADNUM;N.exports=function(T,e,a){for(var i=e.layers.frontplot.select("g.scatterlayer"),n=e.xaxis,r=e.yaxis,v={xaxis:n,yaxis:r,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},s=e.radialAxis,o=e.angularAxis,b=0;b<a.length;b++)for(var g=a[b],d=0;d<g.length;d++){d===0&&(g[0].trace._xA=n,g[0].trace._yA=r);var f=g[d],y=f.r;if(y===u)f.x=f.y=u;else{var l=s.c2g(y),x=o.c2g(f.theta);f.x=l*Math.cos(x),f.y=l*Math.sin(x)}}m(T,v,a,i)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(t,N,V){var m=t("../scatterpolar/attributes"),u=t("../scattergl/attributes"),A=t("../../plots/template_attributes").texttemplateAttrs;N.exports={mode:m.mode,r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,text:m.text,texttemplate:A({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,hovertemplate:m.hovertemplate,line:u.line,connectgaps:u.connectgaps,marker:u.marker,fill:u.fill,fillcolor:u.fillcolor,textposition:u.textposition,textfont:u.textfont,hoverinfo:m.hoverinfo,selected:m.selected,unselected:m.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(t,N,V){N.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(t,N,V){var m=t("../scatter/colorscale_calc"),u=t("../scatter/calc").calcMarkerSize,A=t("../scattergl/convert"),T=t("../../plots/cartesian/axes"),e=t("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(i,n){var r=i._fullLayout,v=n.subplot,s=r[v].radialaxis,o=r[v].angularaxis,b=n._r=s.makeCalcdata(n,"r"),g=n._theta=o.makeCalcdata(n,"theta"),d=n._length,f={};d<b.length&&(b=b.slice(0,d)),d<g.length&&(g=g.slice(0,d)),f.r=b,f.theta=g,m(i,n);var y=f.opts=A.style(i,n),l;return d<e?l=u(n,d):y.marker&&(l=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),n._extremes.x=T.findExtremes(s,b,{ppad:l}),[{x:!1,y:!1,t:f,trace:n}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/subtypes"),A=t("../scatterpolar/defaults").handleRThetaDefaults,T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");N.exports=function(s,o,b,g){function d(y,l){return m.coerce(s,o,r,y,l)}var f=A(s,o,g,d);if(!f){o.visible=!1;return}d("thetaunit"),d("mode",f<n?"lines+markers":"lines"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate"),u.hasLines(o)&&(e(s,o,b,g,d),d("connectgaps")),u.hasMarkers(o)&&T(s,o,b,g,d,{noAngleRef:!0,noStandOff:!0}),u.hasText(o)&&(d("texttemplate"),a(s,o,g,d)),d("fill"),o.fill!=="none"&&i(s,o,b,d),m.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(t,N,V){var m=t("../scatterpolar/format_labels");N.exports=function(A,T,e){var a=A.i;return"r"in A||(A.r=T._r[a]),"theta"in A||(A.theta=T._theta[a]),m(A,T,e)}},{"../scatterpolar/format_labels":1014}],1023:[function(t,N,V){var m=t("../scattergl/hover"),u=t("../scatterpolar/hover").makeHoverPointText;function A(T,e,a,i){var n=T.cd,r=n[0].t,v=r.r,s=r.theta,o=m.hoverPoints(T,e,a,i);if(!(!o||o[0].index===!1)){var b=o[0];if(b.index===void 0)return o;var g=T.subplot,d=b.cd[b.index],f=b.trace;if(d.r=v[b.index],d.theta=s[b.index],!!g.isPtInside(d))return b.xLabelVal=void 0,b.yLabelVal=void 0,u(d,f,g,b),o}}N.exports={hoverPoints:A}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(t,N,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(t,N,V){var m=t("@plotly/point-cluster"),u=t("fast-isnumeric"),A=t("../scattergl/plot"),T=t("../scattergl/scene_update"),e=t("../scattergl/convert"),a=t("../../lib"),i=t("../scattergl/constants").TOO_MANY_POINTS,n={};N.exports=function(v,s,o){if(!!o.length){var b=s.radialAxis,g=s.angularAxis,d=T(v,s);return o.forEach(function(f){if(!(!f||!f[0]||!f[0].trace)){var y=f[0],l=y.trace,x=y.t,c=l._length,M=x.r,w=x.theta,p=x.opts,_,h=M.slice(),L=w.slice();for(_=0;_<M.length;_++)s.isPtInside({r:M[_],theta:w[_]})||(h[_]=NaN,L[_]=NaN);var E=new Array(c*2),S=Array(c),P=Array(c);for(_=0;_<c;_++){var F=h[_],I,D;if(u(F)){var R=b.c2g(F),O=g.c2g(L[_],l.thetaunit);I=R*Math.cos(O),D=R*Math.sin(O)}else I=D=NaN;S[_]=E[_*2]=I,P[_]=E[_*2+1]=D}x.tree=m(E),p.marker&&c>=i&&(p.marker.cluster=x.tree),p.marker&&(p.markerSel.positions=p.markerUnsel.positions=p.marker.positions=E),p.line&&E.length>1&&a.extendFlat(p.line,e.linePositions(v,l,E)),p.text&&(a.extendFlat(p.text,{positions:E},e.textPosition(v,l,p.text,p.marker)),a.extendFlat(p.textSel,{positions:E},e.textPosition(v,l,p.text,p.markerSel)),a.extendFlat(p.textUnsel,{positions:E},e.textPosition(v,l,p.text,p.markerUnsel))),p.fill&&!d.fill2d&&(d.fill2d=!0),p.marker&&!d.scatter2d&&(d.scatter2d=!0),p.line&&!d.line2d&&(d.line2d=!0),p.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(p.line),d.fillOptions.push(p.fill),d.markerOptions.push(p.marker),d.markerSelectedOptions.push(p.markerSel),d.markerUnselectedOptions.push(p.markerUnsel),d.textOptions.push(p.text),d.textSelectedOptions.push(p.textSel),d.textUnselectedOptions.push(p.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),x.x=S,x.y=P,x.rawx=S,x.rawy=P,x.r=M,x.theta=w,x.positions=E,x._scene=d,x.index=d.count,d.count++}}),A(v,s,o)}},N.exports.reglPrecompiled=n},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("../scatter/attributes"),e=t("../../plots/attributes"),a=T.line;N.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:u({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:A({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:A({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:A({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:A({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:m(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../../constants/numerical").BADNUM,A=t("../scatter/colorscale_calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),a=t("../scatter/calc").calcMarkerSize;N.exports=function(n,r){for(var v=n._fullLayout,s=r.subplot,o=v[s].realaxis,b=v[s].imaginaryaxis,g=o.makeCalcdata(r,"real"),d=b.makeCalcdata(r,"imag"),f=r._length,y=new Array(f),l=0;l<f;l++){var x=g[l],c=d[l],M=y[l]={};m(x)&&m(c)?(M.real=x,M.imag=c):M.real=u}return a(r,f),A(n,r),T(y,r),e(y,r),y}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");N.exports=function(o,b,g,d){function f(x,c){return m.coerce(o,b,r,x,c)}var y=v(o,b,d,f);if(!y){b.visible=!1;return}f("mode",y<n?"lines+markers":"lines"),f("text"),f("hovertext"),b.hoveron!=="fills"&&f("hovertemplate"),u.hasLines(b)&&(T(o,b,g,d,f,{backoff:!0}),e(o,b,f),f("connectgaps")),u.hasMarkers(b)&&A(o,b,g,d,f,{gradient:!0}),u.hasText(b)&&(f("texttemplate"),a(o,b,d,f));var l=[];(u.hasMarkers(b)||u.hasText(b))&&(f("cliponaxis"),f("marker.maxdisplayed"),l.push("points")),f("fill"),b.fill!=="none"&&(i(o,b,g,f),u.hasLines(b)||e(o,b,f)),(b.fill==="tonext"||b.fill==="toself")&&l.push("fills"),f("hoveron",l.join("+")||"points"),m.coerceSelectionMarkerOpacity(b,f)};function v(s,o,b,g){var d=g("real"),f=g("imag"),y;return d&&f&&(y=Math.min(d.length,f.length)),o._length=y,y}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(t,N,V){var m=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot;return a.realLabel=m.tickText(i.radialAxis,A.real,!0).text,a.imagLabel=m.tickText(i.angularAxis,A.imag,!0).text,a}},{"../../plots/cartesian/axes":566}],1030:[function(t,N,V){var m=t("../scatter/hover");function u(T,e,a,i){var n=m(T,e,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var v=T.subplot,s=r.cd[r.index],o=r.trace;if(!!v.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,A(s,o,v,r),r.hovertemplate=o.hovertemplate,n}}function A(T,e,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="real",r._hovertitle="imag";var v={};v[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,v);i.realLabel=s.realLabel,i.imagLabel=s.imagLabel;var o=T.hi||e.hoverinfo,b=[];function g(f,y){b.push(f._hovertitle+": "+y)}if(!e.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["real","imag","text"]),d.indexOf("real")!==-1&&g(n,i.realLabel),d.indexOf("imag")!==-1&&g(r,i.imagLabel),d.indexOf("text")!==-1&&i.text&&(b.push(i.text),delete i.text),i.extraText=b.join("<br>")}}N.exports={hoverPoints:u,makeHoverPointText:A}},{"../scatter/hover":947}],1031:[function(t,N,V){N.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(t,N,V){var m=t("../scatter/plot"),u=t("../../constants/numerical").BADNUM,A=t("../../plots/smith/helpers"),T=A.smith;N.exports=function(a,i,n){for(var r=i.layers.frontplot.select("g.scatterlayer"),v=i.xaxis,s=i.yaxis,o={xaxis:v,yaxis:s,plot:i.framework,layerClipId:i._hasClipOnAxisFalse?i.clipIds.forTraces:null},b=0;b<n.length;b++)for(var g=n[b],d=0;d<g.length;d++){d===0&&(g[0].trace._xA=v,g[0].trace._yA=s);var f=g[d],y=f.real;if(y===u)f.x=f.y=u;else{var l=T([y,f.imag]);f.x=l[0],f.y=l[1]}}m(a,o,n,r)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scatter/attributes"),T=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat,n=A.marker,r=A.line,v=n.line;N.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},A.mode,{dflt:"markers"}),text:i({},A.text,{}),texttemplate:u({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},A.hovertext,{}),line:{color:r.color,width:r.width,dash:a,backoff:r.backoff,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:A.connectgaps,cliponaxis:A.cliponaxis,fill:i({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A.fillcolor,marker:i({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:n.angleref,standoff:n.standoff,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:i({width:v.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:A.textfont,textposition:A.textposition,selected:A.selected,unselected:A.unselected,hoverinfo:i({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:A.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(t,N,V){var m=t("fast-isnumeric"),u=t("../scatter/colorscale_calc"),A=t("../scatter/arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,a=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};N.exports=function(r,v){var s=r._fullLayout[v.subplot],o=s.sum,b=v.sum||o,g={a:v.a,b:v.b,c:v.c},d,f,y,l,x,c;for(d=0;d<a.length;d++)if(y=a[d],!g[y]){for(x=g[i[y][0]],c=g[i[y][1]],l=new Array(x.length),f=0;f<x.length;f++)l[f]=b-x[f]-c[f];g[y]=l}var M=v._length,w=new Array(M),p,_,h,L,E,S;for(d=0;d<M;d++)p=g.a[d],_=g.b[d],h=g.c[d],m(p)&&m(_)&&m(h)?(p=+p,_=+_,h=+h,L=o/(p+_+h),L!==1&&(p*=L,_*=L,h*=L),S=p,E=h-_,w[d]={x:E,y:S,a:p,b:_,c:h}):w[d]={x:!1,y:!1};return e(v,M),u(r,v),A(w,v),T(w,v),w}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/constants"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/line_shape_defaults"),i=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");N.exports=function(s,o,b,g){function d(w,p){return m.coerce(s,o,r,w,p)}var f=d("a"),y=d("b"),l=d("c"),x;if(f?(x=f.length,y?(x=Math.min(x,y.length),l&&(x=Math.min(x,l.length))):l?x=Math.min(x,l.length):x=0):y&&l&&(x=Math.min(y.length,l.length)),!x){o.visible=!1;return}o._length=x,d("sum"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate");var c=x<u.PTS_LINESONLY?"lines+markers":"lines";d("mode",c),A.hasLines(o)&&(e(s,o,b,g,d,{backoff:!0}),a(s,o,d),d("connectgaps")),A.hasMarkers(o)&&T(s,o,b,g,d,{gradient:!0}),A.hasText(o)&&(d("texttemplate"),i(s,o,g,d));var M=[];(A.hasMarkers(o)||A.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),M.push("points")),d("fill"),o.fill!=="none"&&(n(s,o,b,d),A.hasLines(o)||a(s,o,d)),(o.fill==="tonext"||o.fill==="toself")&&M.push("fills"),d("hoveron",M.join("+")||"points"),m.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(t,N,V){N.exports=function(u,A,T,e,a){if(A.xa&&(u.xaxis=A.xa),A.ya&&(u.yaxis=A.ya),e[a]){var i=e[a];u.a=i.a,u.b=i.b,u.c=i.c}else u.a=A.a,u.b=A.b,u.c=A.c;return u}},{}],1037:[function(t,N,V){var m=t("../../plots/cartesian/axes");N.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot;return a.aLabel=m.tickText(i.aaxis,A.a,!0).text,a.bLabel=m.tickText(i.baxis,A.b,!0).text,a.cLabel=m.tickText(i.caxis,A.c,!0).text,a}},{"../../plots/cartesian/axes":566}],1038:[function(t,N,V){var m=t("../scatter/hover");N.exports=function(A,T,e,a){var i=m(A,T,e,a);if(!i||i[0].index===!1)return;var n=i[0];if(n.index===void 0){var r=1-n.y0/A.ya._length,v=A.xa._length,s=v*r/2,o=v-s;return n.x0=Math.max(Math.min(n.x0,o),s),n.x1=Math.max(Math.min(n.x1,o),s),i}var b=n.cd[n.index],g=n.trace,d=n.subplot;n.a=b.a,n.b=b.b,n.c=b.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var f={};f[g.subplot]={_subplot:d};var y=g._module.formatLabels(b,g,f);n.aLabel=y.aLabel,n.bLabel=y.bLabel,n.cLabel=y.cLabel;var l=b.hi||g.hoverinfo,x=[];function c(w,p){x.push(w._hovertitle+": "+p)}if(!g.hovertemplate){var M=l.split("+");M.indexOf("all")!==-1&&(M=["a","b","c"]),M.indexOf("a")!==-1&&c(d.aaxis,n.aLabel),M.indexOf("b")!==-1&&c(d.baxis,n.bLabel),M.indexOf("c")!==-1&&c(d.caxis,n.cLabel)}return n.extraText=x.join("<br>"),n.hovertemplate=g.hovertemplate,i}},{"../scatter/hover":947}],1039:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:t("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(t,N,V){var m=t("../scatter/plot");N.exports=function(A,T,e){var a=T.plotContainer;a.select(".scatterlayer").selectAll("*").remove();for(var i=T.xaxis,n=T.yaxis,r={xaxis:i,yaxis:n,plot:a,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},v=T.layers.frontplot.select("g.scatterlayer"),s=0;s<e.length;s++){var o=e[s];o.length&&(o[0].trace._xA=i,o[0].trace._yA=n)}m(A,r,e,v)}},{"../scatter/plot":957}],1041:[function(t,N,V){var m=t("../scatter/attributes"),u=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../scattergl/attributes"),a=t("../../plots/cartesian/constants").idRegex,i=t("../../plot_api/plot_template").templatedArray,n=t("../../lib/extend").extendFlat,r=m.marker,v=r.line,s=n(u("marker.line",{editTypeOverride:"calc"}),{width:n({},v.width,{editType:"calc"}),editType:"calc"}),o=n(u("marker"),{symbol:r.symbol,angle:r.angle,size:n({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:s,editType:"calc"});o.color.editType=o.cmin.editType=o.cmax.editType="style";function b(g){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[g],editType:"plot"}}}N.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},e.text,{}),hovertext:n({},e.hovertext,{}),hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),marker:o,xaxes:b("x"),yaxes:b("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(t,N,V){var m=t("../../registry"),u=t("../../components/grid");N.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select"),editStyle:t("./edit_style"),meta:{}},m.register(u)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(t,N,V){var m=t("regl-line2d"),u=t("../../registry"),A=t("../../lib/prepare_regl"),T=t("../../plots/get_data").getModuleCalcData,e=t("../../plots/cartesian"),a=t("../../plots/cartesian/axis_ids").getFromId,i=t("../../plots/cartesian/axes").shouldShowZeroLine,n="splom",r={};function v(f){var y=f._fullLayout,l=u.getModule(n),x=T(f.calcdata,l)[0],c=A(f,["ANGLE_instanced_arrays","OES_element_index_uint"],r);!c||(y._hasOnlyLargeSploms&&b(f),l.plot(f,{},x))}function s(f){var y=f.calcdata,l=f._fullLayout;l._hasOnlyLargeSploms&&b(f);for(var x=0;x<y.length;x++){var c=y[x][0],M=c.trace,w=l._splomScenes[M.uid];M.type==="splom"&&w&&w.matrix&&o(f,M,w)}}function o(f,y,l){for(var x=l.matrixOptions.data.length,c=y._visibleDims,M=l.viewOpts.ranges=new Array(x),w=0;w<c.length;w++){var p=c[w],_=M[w]=new Array(4),h=a(f,y._diag[p][0]);h&&(_[0]=h.r2l(h.range[0]),_[2]=h.r2l(h.range[1]));var L=a(f,y._diag[p][1]);L&&(_[1]=L.r2l(L.range[0]),_[3]=L.r2l(L.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:M},{ranges:M}):l.matrix.update({ranges:M})}function b(f){var y=f._fullLayout,l=y._glcanvas.data()[0].regl,x=y._splomGrid;x||(x=y._splomGrid=m(l)),x.update(g(f))}function g(f){var y=f._context.plotGlPixelRatio,l=f._fullLayout,x=l._size,c=[0,0,l.width*y,l.height*y],M={},w;function p(ee,j,X,ie,he,K){X*=y,ie*=y,he*=y,K*=y;var $=j[ee+"color"],U=j[ee+"width"],H=String($+U);H in M?M[H].data.push(NaN,NaN,X,ie,he,K):M[H]={data:[X,ie,he,K],join:"rect",thickness:U*y,color:$,viewport:c,range:c,overlay:!1}}for(w in l._splomSubplots){var _=l._plots[w],h=_.xaxis,L=_.yaxis,E=h._gridVals,S=L._gridVals,P=h._offset,F=h._length,I=L._length,D=x.b+L.domain[0]*x.h,R=-L._m,O=-R*L.r2l(L.range[0],L.calendar),z,G;if(h.showgrid)for(w=0;w<E.length;w++)z=P+h.l2p(E[w].x),p("grid",h,z,D,z,D+I);if(L.showgrid)for(w=0;w<S.length;w++)G=D+O+R*S[w].x,p("grid",L,P,G,P+F,G);i(f,h,L)&&(z=P+h.l2p(0),p("zeroline",h,z,D,z,D+I)),i(f,L,h)&&(G=D+O+0,p("zeroline",L,P,G,P+F,G))}var Y=[];for(w in M)Y.push(M[w]);return Y}function d(f,y,l,x){var c={},M;if(x._splomScenes){for(M=0;M<f.length;M++){var w=f[M];w.type==="splom"&&(c[w.uid]=1)}for(M=0;M<l.length;M++){var p=l[M];if(!c[p.uid]){var _=x._splomScenes[p.uid];_&&_.destroy&&_.destroy(),x._splomScenes[p.uid]=null,delete x._splomScenes[p.uid]}}}Object.keys(x._splomScenes||{}).length===0&&delete x._splomScenes,x._splomGrid&&!y._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),e.clean(f,y,l,x)}N.exports={name:n,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:v,drag:s,updateGrid:b,clean:d,updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:r}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axis_ids"),A=t("../scatter/calc").calcMarkerSize,T=t("../scatter/calc").calcAxisExpansion,e=t("../scatter/colorscale_calc"),a=t("../scattergl/convert").markerSelection,i=t("../scattergl/convert").markerStyle,n=t("./scene_update"),r=t("../../constants/numerical").BADNUM,v=t("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(o,b){var g=b.dimensions,d=b._length,f={},y=f.cdata=[],l=f.data=[],x=b._visibleDims=[],c,M,w,p,_;function h(F,I){for(var D=F.makeCalcdata({v:I.values,vcalendar:b.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===r?NaN:D[R];y.push(D),l.push(F.type==="log"?m.simpleMap(D,F.c2l):D)}for(c=0;c<g.length;c++)if(w=g[c],w.visible){if(p=u.getFromId(o,b._diag[c][0]),_=u.getFromId(o,b._diag[c][1]),p&&_&&p.type!==_.type){m.log("Skipping splom dimension "+c+" with conflicting axis types");continue}p?(h(p,w),_&&_.type==="category"&&(_._categories=p._categories.slice())):h(_,w),x.push(c)}e(o,b),m.extendFlat(f,i(o,b));var L=y.length,E=L*d>v,S;for(E?S=f.sizeAvg||Math.max(f.size,3):S=A(b,d),M=0;M<x.length;M++)c=x[M],w=g[c],p=u.getFromId(o,b._diag[c][0])||{},_=u.getFromId(o,b._diag[c][1])||{},T(o,b,p,_,y[M],y[M],S);var P=n(o,b);return P.matrix||(P.matrix=!0),P.matrixOptions=f,P.selectedOptions=a(o,b,b.selected),P.unselectedOptions=a(o,b,b.unselected),[{x:!1,y:!1,t:{},trace:b}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("../scatter/subtypes"),e=t("../scatter/marker_defaults"),a=t("../parcoords/merge_length"),i=t("../scattergl/helpers").isOpenSymbol;N.exports=function(s,o,b,g){function d(p,_){return m.coerce(s,o,A,p,_)}var f=u(s,o,{name:"dimensions",handleItemDefaults:n}),y=d("diagonal.visible"),l=d("showupperhalf"),x=d("showlowerhalf"),c=a(o,f,"values");if(!c||!y&&!l&&!x){o.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),e(s,o,b,g,d,{noAngleRef:!0,noStandOff:!0});var M=i(o.marker.symbol),w=T.isBubble(o);d("marker.line.width",M||w?1:0),r(s,o,g,d),m.coerceSelectionMarkerOpacity(o,d)};function n(v,s){function o(g,d){return m.coerce(v,s,A.dimensions,g,d)}o("label");var b=o("values");b&&b.length?o("visible"):s.visible=!1,o("axis.type"),o("axis.matches")}function r(v,s,o,b){var g=s.dimensions,d=g.length,f=s.showupperhalf,y=s.showlowerhalf,l=s.diagonal.visible,x,c,M=new Array(d),w=new Array(d);for(x=0;x<d;x++){var p=x?x+1:"";M[x]="x"+p,w[x]="y"+p}var _=b("xaxes",M),h=b("yaxes",w),L=s._diag=new Array(d);s._xaxes={},s._yaxes={};var E=[],S=[];function P(ee,j,X,ie){if(!!ee){var he=ee.charAt(0),K=o._splomAxes[he];if(s["_"+he+"axes"][ee]=1,ie.push(ee),!(ee in K)){var $=K[ee]={};X&&($.label=X.label||"",X.visible&&X.axis&&(X.axis.type&&($.type=X.axis.type),X.axis.matches&&($.matches=j)))}}}var F=!l&&!y,I=!l&&!f;for(s._axesDim={},x=0;x<d;x++){var D=g[x],R=x===0,O=x===d-1,z=R&&F||O&&I?void 0:_[x],G=R&&I||O&&F?void 0:h[x];P(z,G,D,E),P(G,z,D,S),L[x]=[z,G],s._axesDim[z]=x,s._axesDim[G]=x}for(x=0;x<E.length;x++)for(c=0;c<S.length;c++){var Y=E[x]+S[c];(x>c&&f||x<c&&y||x===c&&(l||!y||!f))&&(o._splomSubplots[Y]=1)}(!y||!l&&f&&y)&&(o._splomGridDflt.xside="bottom",o._splomGridDflt.yside="left")}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(t,N,V){var m=t("../../lib"),u=t("../scatter/colorscale_calc"),A=t("../scattergl/convert").markerStyle;N.exports=function(e,a){var i=a.trace,n=e._fullLayout._splomScenes[i.uid];if(n){u(e,i),m.extendFlat(n.matrixOptions,A(e,i));var r=m.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(r,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(t,N,V){V.getDimIndex=function(u,A){for(var T=A._id,e=T.charAt(0),a={x:0,y:1}[e],i=u._visibleDims,n=0;n<i.length;n++){var r=i[n];if(u._diag[r][a]===T)return n}return!1}},{}],1048:[function(t,N,V){var m=t("./helpers"),u=t("../scattergl/hover").calcHover;function A(T,e,a){var i=T.cd,n=i[0].trace,r=T.scene,v=r.matrixOptions.cdata,s=T.xa,o=T.ya,b=s.c2p(e),g=o.c2p(a),d=T.distance,f=m.getDimIndex(n,s),y=m.getDimIndex(n,o);if(f===!1||y===!1)return[T];for(var l=v[f],x=v[y],c,M,w=d,p=0;p<l.length;p++){var _=l[p],h=x[p],L=s.c2p(_)-b,E=o.c2p(h)-g,S=Math.sqrt(L*L+E*E);S<w&&(w=M=S,c=p)}return T.index=c,T.distance=w,T.dxy=M,c===void 0?[T]:[u(T,l,x,n)]}N.exports={hoverPoints:A}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(t,N,V){var m=t("./base_index");m.basePlotModule=t("./base_plot"),N.exports=m},{"./base_index":1042,"./base_plot":1043}],1050:[function(t,N,V){var m=t("regl-splom"),u=t("../../lib"),A=t("../../plots/cartesian/axis_ids"),T=t("../../components/dragelement/helpers").selectMode;N.exports=function(i,n,r){if(!!r.length)for(var v=0;v<r.length;v++)e(i,r[v][0])};function e(a,i){var n=a._fullLayout,r=n._size,v=i.trace,s=i.t,o=n._splomScenes[v.uid],b=o.matrixOptions,g=b.cdata,d=n._glcanvas.data()[0].regl,f=n.dragmode,y,l,x,c,M;if(g.length!==0){b.lower=v.showupperhalf,b.upper=v.showlowerhalf,b.diagonal=v.diagonal.visible;var w=v._visibleDims,p=g.length,_=o.viewOpts={};for(_.ranges=new Array(p),_.domains=new Array(p),M=0;M<w.length;M++){x=w[M];var h=_.ranges[M]=new Array(4),L=_.domains[M]=new Array(4);y=A.getFromId(a,v._diag[x][0]),y&&(h[0]=y._rl[0],h[2]=y._rl[1],L[0]=y.domain[0],L[2]=y.domain[1]),l=A.getFromId(a,v._diag[x][1]),l&&(h[1]=l._rl[0],h[3]=l._rl[1],L[1]=l.domain[0],L[3]=l.domain[1])}var E=a._context.plotGlPixelRatio,S=r.l*E,P=r.b*E,F=r.w*E,I=r.h*E;_.viewport=[S,P,F+S,I+P],o.matrix===!0&&(o.matrix=m(d));var D=n.clickmode.indexOf("select")>-1,R=T(f)||!!v.selectedpoints||D,O=!0;if(R){var z=v._length;if(v.selectedpoints){o.selectBatch=v.selectedpoints;var G=v.selectedpoints,Y={};for(x=0;x<G.length;x++)Y[G[x]]=!0;var ee=[];for(x=0;x<z;x++)Y[x]||ee.push(x);o.unselectBatch=ee}var j=s.xpx=new Array(p),X=s.ypx=new Array(p);for(M=0;M<w.length;M++){if(x=w[M],y=A.getFromId(a,v._diag[x][0]),y)for(j[M]=new Array(z),c=0;c<z;c++)j[M][c]=y.c2p(g[M][c]);if(l=A.getFromId(a,v._diag[x][1]),l)for(X[M]=new Array(z),c=0;c<z;c++)X[M][c]=l.c2p(g[M][c])}if(o.selectBatch.length||o.unselectBatch.length){var ie=u.extendFlat({},b,o.unselectedOptions,_),he=u.extendFlat({},b,o.selectedOptions,_);o.matrix.update(ie,he),O=!1}}else s.xpx=s.ypx=null;if(O){var K=u.extendFlat({},b,_);o.matrix.update(K,null)}}}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(t,N,V){var m=t("../../lib");N.exports=function(A,T){var e=A._fullLayout,a=T.uid,i=e._splomScenes;i||(i=e._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},v=i[T.uid];return v||(v=i[a]=m.extendFlat({},n,r),v.draw=function(){v.matrix&&v.matrix.draw&&(v.selectBatch.length||v.unselectBatch.length?v.matrix.draw(v.unselectBatch,v.selectBatch):v.matrix.draw()),v.dirty=!1},v.destroy=function(){v.matrix&&v.matrix.destroy&&v.matrix.destroy(),v.matrixOptions=null,v.selectBatch=null,v.unselectBatch=null,v=null}),v.dirty||m.extendFlat(v,n),v}},{"../../lib":515}],1052:[function(t,N,V){var m=t("../../lib"),u=m.pushUnique,A=t("../scatter/subtypes"),T=t("./helpers");N.exports=function(a,i){var n=a.cd,r=n[0].trace,v=n[0].t,s=a.scene,o=s.matrixOptions.cdata,b=a.xaxis,g=a.yaxis,d=[];if(!s)return d;var f=!A.hasMarkers(r)&&!A.hasText(r);if(r.visible!==!0||f)return d;var y=T.getDimIndex(r,b),l=T.getDimIndex(r,g);if(y===!1||l===!1)return d;var x=v.xpx[y],c=v.ypx[l],M=o[y],w=o[l],p=(a.scene.selectBatch||[]).slice(),_=[];if(i!==!1&&!i.degenerate)for(var h=0;h<M.length;h++)i.contains([x[h],c[h]],null,h,a)?(d.push({pointNumber:h,x:M[h],y:w[h]}),u(p,h)):p.indexOf(h)!==-1?u(p,h):_.push(h);var L=s.matrixOptions;return!p.length&&!_.length?s.matrix.update(L,null):!s.selectBatch.length&&!s.unselectBatch.length&&s.matrix.update(s.unselectedOptions,m.extendFlat({},L,s.selectedOptions,s.viewOpts)),s.selectBatch=p,s.unselectBatch=_,d}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(t,N,V){var m=t("../../components/colorscale/attributes"),u=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:A({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:u("u",1),vhoverformat:u("v",1),whoverformat:u("w",1),xhoverformat:u("x"),yhoverformat:u("y"),zhoverformat:u("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(i,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=T[r]}),i.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,N.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(t,N,V){var m=t("../../lib"),u=t("../../components/colorscale/calc");function A(i,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=a(n.u,n._len),n._v=a(n.v,n._len),n._w=a(n.w,n._len),n._x=a(n.x,n._len),n._y=a(n.y,n._len),n._z=a(n.z,n._len);var r=T(n);n._gridFill=r.fill,n._Xs=r.Xs,n._Ys=r.Ys,n._Zs=r.Zs,n._len=r.len;var v=0,s,o,b;n.starts&&(s=a(n.starts.x||[]),o=a(n.starts.y||[]),b=a(n.starts.z||[]),v=Math.min(s.length,o.length,b.length)),n._startsX=s||[],n._startsY=o||[],n._startsZ=b||[];var g=0,d=1/0,f;for(f=0;f<n._len;f++){var y=n._u[f],l=n._v[f],x=n._w[f],c=Math.sqrt(y*y+l*l+x*x);g=Math.max(g,c),d=Math.min(d,c)}for(u(i,n,{vals:[d,g],containerStr:"",cLetter:"c"}),f=0;f<v;f++){var M=s[f];r.xMax=Math.max(r.xMax,M),r.xMin=Math.min(r.xMin,M);var w=o[f];r.yMax=Math.max(r.yMax,w),r.yMin=Math.min(r.yMin,w);var p=b[f];r.zMax=Math.max(r.zMax,p),r.zMin=Math.min(r.zMin,p)}n._slen=v,n._normMax=g,n._xbnds=[r.xMin,r.xMax],n._ybnds=[r.yMin,r.yMax],n._zbnds=[r.zMin,r.zMax]}function T(i){var n=i._x,r=i._y,v=i._z,s=i._len,o,b,g,d=-1/0,f=1/0,y=-1/0,l=1/0,x=-1/0,c=1/0,M="",w,p,_,h,L,E,S,P,F;for(s&&(h=n[0],E=r[0],P=v[0]),s>1&&(L=n[s-1],S=r[s-1],F=v[s-1]),o=0;o<s;o++)d=Math.max(d,n[o]),f=Math.min(f,n[o]),y=Math.max(y,r[o]),l=Math.min(l,r[o]),x=Math.max(x,v[o]),c=Math.min(c,v[o]),!w&&n[o]!==h&&(w=!0,M+="x"),!p&&r[o]!==E&&(p=!0,M+="y"),!_&&v[o]!==P&&(_=!0,M+="z");w||(M+="x"),p||(M+="y"),_||(M+="z");var I=e(i._x),D=e(i._y),R=e(i._z);M=M.replace("x",(h>L?"-":"+")+"x"),M=M.replace("y",(E>S?"-":"+")+"y"),M=M.replace("z",(P>F?"-":"+")+"z");var O=function(){s=0,I=[],D=[],R=[]};(!s||s<I.length*D.length*R.length)&&O();var z=function(ae){return ae==="x"?n:ae==="y"?r:v},G=function(ae){return ae==="x"?I:ae==="y"?D:R},Y=function(ae){return ae[s-1]<ae[0]?-1:1},ee=z(M[1]),j=z(M[3]),X=z(M[5]),ie=G(M[1]).length,he=G(M[3]).length,K=G(M[5]).length,$=!1,U=function(ae,le,_e){return ie*(he*ae+le)+_e},H=Y(z(M[1])),q=Y(z(M[3])),re=Y(z(M[5]));for(o=0;o<K-1;o++){for(b=0;b<he-1;b++){for(g=0;g<ie-1;g++){var Z=U(o,b,g),Q=U(o,b,g+1),oe=U(o,b+1,g),se=U(o+1,b,g);if((!(ee[Z]*H<ee[Q]*H)||!(j[Z]*q<j[oe]*q)||!(X[Z]*re<X[se]*re))&&($=!0),$)break}if($)break}if($)break}return $&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:f,yMin:l,zMin:c,xMax:d,yMax:y,zMax:x,Xs:I,Ys:D,Zs:R,len:s,fill:M}}function e(i){return m.distinctVals(i).vals}function a(i,n){if(n===void 0&&(n=i.length),m.isTypedArray(i))return i.subarray(0,n);for(var r=[],v=0;v<n;v++)r[v]=+i[v];return r}N.exports={calc:A,filter:a,processGrid:T}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(t,N,V){var m=t("../../../stackgl_modules").gl_streamtube3d,u=m.createTubeMesh,A=t("../../lib"),T=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,a=t("../../plots/gl3d/zip3"),i={xaxis:0,yaxis:1,zaxis:2};function n(g,d){this.scene=g,this.uid=d,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(g){var d=this.scene.fullSceneLayout,f=this.scene.dataScale;function y(c,M){var w=d[M],p=f[i[M]];return w.l2c(c)/p}if(g.object===this.mesh){var l=g.data.position,x=g.data.velocity;return g.traceCoordinate=[y(l[0],"xaxis"),y(l[1],"yaxis"),y(l[2],"zaxis"),y(x[0],"xaxis"),y(x[1],"yaxis"),y(x[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence],g.textLabel=this.data.hovertext||this.data.text,!0}};function v(g){var d=g.length,f;return d>2?f=g.slice(1,d-1):d===2?f=[(g[0]+g[1])/2]:f=g,f}function s(g){var d=g.length;return d===1?[.5,.5]:[g[1]-g[0],g[d-1]-g[d-2]]}function o(g,d){var f=g.fullSceneLayout,y=g.dataScale,l=d._len,x={};function c(he,K){var $=f[K],U=y[i[K]];return A.simpleMap(he,function(H){return $.d2l(H)*U})}if(x.vectors=a(c(d._u,"xaxis"),c(d._v,"yaxis"),c(d._w,"zaxis"),l),!l)return{positions:[],cells:[]};var M=c(d._Xs,"xaxis"),w=c(d._Ys,"yaxis"),p=c(d._Zs,"zaxis");x.meshgrid=[M,w,p],x.gridFill=d._gridFill;var _=d._slen;if(_)x.startingPositions=a(c(d._startsX,"xaxis"),c(d._startsY,"yaxis"),c(d._startsZ,"zaxis"));else{for(var h=w[0],L=v(M),E=v(p),S=new Array(L.length*E.length),P=0,F=0;F<L.length;F++)for(var I=0;I<E.length;I++)S[P++]=[L[F],h,E[I]];x.startingPositions=S}x.colormap=T(d),x.tubeSize=d.sizeref,x.maxLength=d.maxdisplayed;var D=c(d._xbnds,"xaxis"),R=c(d._ybnds,"yaxis"),O=c(d._zbnds,"zaxis"),z=s(M),G=s(w),Y=s(p),ee=[[D[0]-z[0],R[0]-G[0],O[0]-Y[0]],[D[1]+z[1],R[1]+G[1],O[1]+Y[1]]],j=m(x,ee),X=e(d);j.vertexIntensityBounds=[X.min/d._normMax,X.max/d._normMax];var ie=d.lightposition;return j.lightPosition=[ie.x,ie.y,ie.z],j.ambient=d.lighting.ambient,j.diffuse=d.lighting.diffuse,j.specular=d.lighting.specular,j.roughness=d.lighting.roughness,j.fresnel=d.lighting.fresnel,j.opacity=d.opacity,d._pad=j.tubeScale*d.sizeref*2,j}r.update=function(g){this.data=g;var d=o(this.scene,g);this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(g,d){var f=g.glplot.gl,y=o(g,d),l=u(f,y),x=new n(g,d.uid);return x.mesh=l,x.data=d,l._trace=x,g.glplot.add(l),x}N.exports=b},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(t,N,V){var m=t("../../lib"),u=t("../../components/colorscale/defaults"),A=t("./attributes");N.exports=function(e,a,i,n){function r(f,y){return m.coerce(e,a,A,f,y)}var v=r("u"),s=r("v"),o=r("w"),b=r("x"),g=r("y"),d=r("z");if(!v||!v.length||!s||!s.length||!o||!o.length||!b||!b.length||!g||!g.length||!d||!d.length){a.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),u(e,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(t,N,V){N.exports={moduleType:"trace",name:"streamtube",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc").calc,plot:t("./convert"),eventData:function(m,u){return m.tubex=m.x,m.tubey=m.y,m.tubez=m.z,m.tubeu=u.traceCoordinate[3],m.tubev=u.traceCoordinate[4],m.tubew=u.traceCoordinate[5],m.norm=u.traceCoordinate[6],m.divergence=u.traceCoordinate[7],delete m.x,delete m.y,delete m.z,m},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(t,N,V){var m=t("../../plots/attributes"),u=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../plots/template_attributes").texttemplateAttrs,T=t("../../components/colorscale/attributes"),e=t("../../plots/domain").attributes,a=t("../pie/attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;N.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:n({colors:{valType:"data_array",editType:"calc"},line:{color:n({},a.marker.line.color,{dflt:null}),width:n({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:A({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:n({},m.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:u({},{keys:i.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:n({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(t,N,V){var m=t("../../plots/plots");V.name="sunburst",V.plot=function(u,A,T,e){m.plotBasePlot(V.name,u,A,T,e)},V.clean=function(u,A,T,e){m.cleanBasePlot(V.name,u,A,T,e)}},{"../../plots/plots":628}],1060:[function(t,N,V){var m=t("d3-hierarchy"),u=t("fast-isnumeric"),A=t("../../lib"),T=t("../../components/colorscale").makeColorScaleFuncFromTrace,e=t("../pie/calc").makePullColorFn,a=t("../pie/calc").generateExtendedColors,i=t("../../components/colorscale").calc,n=t("../../constants/numerical").ALMOST_EQUAL,r={},v={},s={};V.calc=function(b,g){var d=b._fullLayout,f=g.ids,y=A.isArrayOrTypedArray(f),l=g.labels,x=g.parents,c=g.values,M=A.isArrayOrTypedArray(c),w=[],p={},_={},h=function(H,q){p[H]?p[H].push(q):p[H]=[q],_[q]=1},L=function(H){return H||typeof H=="number"},E=function(H){return!M||u(c[H])&&c[H]>=0},S,P,F;y?(S=Math.min(f.length,x.length),P=function(H){return L(f[H])&&E(H)},F=function(H){return String(f[H])}):(S=Math.min(l.length,x.length),P=function(H){return L(l[H])&&E(H)},F=function(H){return String(l[H])}),M&&(S=Math.min(S,c.length));for(var I=0;I<S;I++)if(P(I)){var D=F(I),R=L(x[I])?String(x[I]):"",O={i:I,id:D,pid:R,label:L(l[I])?String(l[I]):""};M&&(O.v=+c[I]),w.push(O),h(R,D)}if(p[""]){if(p[""].length>1){for(var Y=A.randstr(),ee=0;ee<w.length;ee++)w[ee].pid===""&&(w[ee].pid=Y);w.unshift({hasMultipleRoots:!0,id:Y,pid:"",label:""})}}else{var z=[],G;for(G in p)_[G]||z.push(G);if(z.length===1)G=z[0],w.unshift({hasImpliedRoot:!0,id:G,pid:"",label:G});else return A.warn(["Multiple implied roots, cannot build",g.type,"hierarchy of",g.name+".","These roots include:",z.join(", ")].join(" "))}var j;try{j=m.stratify().id(function(H){return H.id}).parentId(function(H){return H.pid})(w)}catch(H){return A.warn(["Failed to build",g.type,"hierarchy of",g.name+".","Error:",H.message].join(" "))}var X=m.hierarchy(j),ie=!1;if(M)switch(g.branchvalues){case"remainder":X.sum(function(H){return H.data.v});break;case"total":X.each(function(H){var q=H.data.data,re=q.v;if(H.children){var Z=H.children.reduce(function(Q,oe){return Q+oe.data.data.v},0);if((q.hasImpliedRoot||q.hasMultipleRoots)&&(re=Z),re<Z*n)return ie=!0,A.warn(["Total value for node",H.data.data.id,"of",g.name,"is smaller than the sum of its children.",`
parent value =`,re,`
children sum =`,Z].join(" "))}H.value=re});break}else o(X,g,{branches:g.count.indexOf("branches")!==-1,leaves:g.count.indexOf("leaves")!==-1});if(!ie){g.sort&&X.sort(function(H,q){return q.value-H.value});var he,K,$=g.marker.colors||[],U=!!$.length;return g._hasColorscale?(U||($=M?g.values:g._values),i(b,g,{vals:$,containerStr:"marker",cLetter:"c"}),K=T(g.marker)):he=e(d["_"+g.type+"colormap"]),X.each(function(H){var q=H.data.data;q.color=g._hasColorscale?K($[q.i]):he($[q.i],q.id)}),w[0].hierarchy=X,w}},V._runCrossTraceCalc=function(b,g){var d=g._fullLayout,f=g.calcdata,y=d[b+"colorway"],l=d["_"+b+"colormap"];d["extend"+b+"colors"]&&(y=a(y,b==="icicle"?s:b==="treemap"?v:r));var x=0,c;function M(h){var L=h.data.data,E=L.id;L.color===!1&&(l[E]?L.color=l[E]:h.parent?h.parent.parent?L.color=h.parent.data.data.color:(l[E]=L.color=y[x%y.length],x++):L.color=c)}for(var w=0;w<f.length;w++){var p=f[w],_=p[0];_.trace.type===b&&_.hierarchy&&(c=_.trace.root.color,_.hierarchy.each(M))}},V.crossTraceCalc=function(b){return V._runCrossTraceCalc("sunburst",b)};function o(b,g,d){var f=0,y=b.children;if(y){for(var l=y.length,x=0;x<l;x++)f+=o(y[x],g,d);d.branches&&f++}else d.leaves&&f++;return b.value=b.data.data.value=f,g._values||(g._values=[]),g._values[b.data.data.i]=f,f}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(t,N,V){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../bar/defaults").handleText,e=t("../../components/colorscale"),a=e.hasColorscale,i=e.handleDefaults;N.exports=function(r,v,s,o){function b(M,w){return m.coerce(r,v,u,M,w)}var g=b("labels"),d=b("parents");if(!g||!g.length||!d||!d.length){v.visible=!1;return}var f=b("values");f&&f.length?b("branchvalues"):b("count"),b("level"),b("maxdepth");var y=b("marker.line.width");y&&b("marker.line.color",o.paper_bgcolor),b("marker.colors");var l=v._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis;l&&i(r,v,o,b,{prefix:"marker.",cLetter:"c"}),b("leaf.opacity",l?1:.7);var x=b("text");b("texttemplate"),v.texttemplate||b("textinfo",Array.isArray(x)?"text+label":"label"),b("hovertext"),b("hovertemplate");var c="auto";T(r,v,o,b,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("insidetextorientation"),b("sort"),b("rotation"),b("root.color"),A(v,o,b),v._length=null}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../registry"),A=t("../../components/fx/helpers").appendArrayPointValue,T=t("../../components/fx"),e=t("../../lib"),a=t("../../lib/events"),i=t("./helpers"),n=t("../pie/helpers"),r=n.formatPieValue;N.exports=function(o,b,g,d,f){var y=d[0],l=y.trace,x=y.hierarchy,c=l.type==="sunburst",M=l.type==="treemap"||l.type==="icicle";"_hasHoverLabel"in l||(l._hasHoverLabel=!1),"_hasHoverEvent"in l||(l._hasHoverEvent=!1);var w=function(h){var L=g._fullLayout;if(!(g._dragging||L.hovermode===!1)){var E=g._fullData[l.index],S=h.data.data,P=S.i,F=i.isHierarchyRoot(h),I=i.getParent(x,h),D=i.getValue(h),R=function(Q){return e.castOption(E,P,Q)},O=R("hovertemplate"),z=T.castHoverinfo(E,L,P),G=L.separators,Y;if(O||z&&z!=="none"&&z!=="skip"){var ee,j;c&&(ee=y.cx+h.pxmid[0]*(1-h.rInscribed),j=y.cy+h.pxmid[1]*(1-h.rInscribed)),M&&(ee=h._hoverX,j=h._hoverY);var X={},ie=[],he=[],K=function(Q){return ie.indexOf(Q)!==-1};z&&(ie=z==="all"?E._module.attributes.hoverinfo.flags:z.split("+")),X.label=S.label,K("label")&&X.label&&he.push(X.label),S.hasOwnProperty("v")&&(X.value=S.v,X.valueLabel=r(X.value,G),K("value")&&he.push(X.valueLabel)),X.currentPath=h.currentPath=i.getPath(h.data),K("current path")&&!F&&he.push(X.currentPath);var $,U=[],H=function(){U.indexOf($)===-1&&(he.push($),U.push($))};X.percentParent=h.percentParent=D/i.getValue(I),X.parent=h.parentString=i.getPtLabel(I),K("percent parent")&&($=i.formatPercent(X.percentParent,G)+" of "+X.parent,H()),X.percentEntry=h.percentEntry=D/i.getValue(b),X.entry=h.entry=i.getPtLabel(b),K("percent entry")&&!F&&!h.onPathbar&&($=i.formatPercent(X.percentEntry,G)+" of "+X.entry,H()),X.percentRoot=h.percentRoot=D/i.getValue(x),X.root=h.root=i.getPtLabel(x),K("percent root")&&!F&&($=i.formatPercent(X.percentRoot,G)+" of "+X.root,H()),X.text=R("hovertext")||R("text"),K("text")&&($=X.text,e.isValidTextValue($)&&he.push($)),Y=[v(h,E,f.eventDataKeys)];var q={trace:E,y:j,_x0:h._x0,_x1:h._x1,_y0:h._y0,_y1:h._y1,text:he.join("<br>"),name:O||K("name")?E.name:void 0,color:R("hoverlabel.bgcolor")||S.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:X,eventData:Y};c&&(q.x0=ee-h.rInscribed*h.rpx1,q.x1=ee+h.rInscribed*h.rpx1,q.idealAlign=h.pxmid[0]<0?"left":"right"),M&&(q.x=ee,q.idealAlign=ee<0?"left":"right");var re=[];T.loneHover(q,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:g,inOut_bbox:re}),Y[0].bbox=re[0],l._hasHoverLabel=!0}if(M){var Z=o.select("path.surface");f.styleOne(Z,h,E,{hovered:!0})}l._hasHoverEvent=!0,g.emit("plotly_hover",{points:Y||[v(h,E,f.eventDataKeys)],event:m.event})}},p=function(h){var L=g._fullLayout,E=g._fullData[l.index],S=m.select(this).datum();if(l._hasHoverEvent&&(h.originalEvent=m.event,g.emit("plotly_unhover",{points:[v(S,E,f.eventDataKeys)],event:m.event}),l._hasHoverEvent=!1),l._hasHoverLabel&&(T.loneUnhover(L._hoverlayer.node()),l._hasHoverLabel=!1),M){var P=o.select("path.surface");f.styleOne(P,S,E,{hovered:!1})}},_=function(h){var L=g._fullLayout,E=g._fullData[l.index],S=c&&(i.isHierarchyRoot(h)||i.isLeaf(h)),P=i.getPtId(h),F=i.isEntry(h)?i.findEntryWithChild(x,P):i.findEntryWithLevel(x,P),I=i.getPtId(F),D={points:[v(h,E,f.eventDataKeys)],event:m.event};S||(D.nextLevel=I);var R=a.triggerHandler(g,"plotly_"+l.type+"click",D);if(R!==!1&&L.hovermode&&(g._hoverdata=[v(h,E,f.eventDataKeys)],T.click(g,m.event)),!S&&R!==!1&&!g._dragging&&!g._transitioning){u.call("_storeDirectGUIEdit",E,L._tracePreGUI[E.uid],{level:E.level});var O={data:[{level:I}],traces:[l.index]},z={frame:{redraw:!1,duration:f.transitionTime},transition:{duration:f.transitionTime,easing:f.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(L._hoverlayer.node()),u.call("animate",g,O,z)}};o.on("mouseover",w),o.on("mouseout",p),o.on("click",_)};function v(s,o,b){for(var g=s.data.data,d={curveNumber:o.index,pointNumber:g.i,data:o._input,fullData:o},f=0;f<b.length;f++){var y=b[f];y in s&&(d[y]=s[y])}return"parentString"in s&&!i.isHierarchyRoot(s)&&(d.parent=s.parentString),A(d,o,g.i),d}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color"),A=t("../../lib/setcursor"),T=t("../pie/helpers");V.findEntryWithLevel=function(n,r){var v;return r&&n.eachAfter(function(s){if(V.getPtId(s)===r)return v=s.copy()}),v||n},V.findEntryWithChild=function(n,r){var v;return n.eachAfter(function(s){for(var o=s.children||[],b=0;b<o.length;b++){var g=o[b];if(V.getPtId(g)===r)return v=s.copy()}}),v||n},V.isEntry=function(n){return!n.parent},V.isLeaf=function(n){return!n.children},V.getPtId=function(n){return n.data.data.id},V.getPtLabel=function(n){return n.data.data.label},V.getValue=function(n){return n.value},V.isHierarchyRoot=function(n){return i(n)===""},V.setSliceCursor=function(n,r,v){var s=v.isTransitioning;if(!s){var o=n.datum();s=v.hideOnRoot&&V.isHierarchyRoot(o)||v.hideOnLeaves&&V.isLeaf(o)}A(n,s?null:"pointer")};function e(n,r,v){return{color:V.getOutsideTextFontKey("color",n,r,v),family:V.getOutsideTextFontKey("family",n,r,v),size:V.getOutsideTextFontKey("size",n,r,v)}}function a(n,r,v,s){var o=(s||{}).onPathbar,b=r.data.data,g=b.i,d=m.castOption(n,g,(o?"pathbar.textfont":"insidetextfont")+".color");return!d&&n._input.textfont&&(d=m.castOption(n._input,g,"textfont.color")),{color:d||u.contrast(b.color),family:V.getInsideTextFontKey("family",n,r,v,s),size:V.getInsideTextFontKey("size",n,r,v,s)}}V.getInsideTextFontKey=function(n,r,v,s,o){var b=(o||{}).onPathbar,g=b?"pathbar.textfont":"insidetextfont",d=v.data.data.i;return m.castOption(r,d,g+"."+n)||m.castOption(r,d,"textfont."+n)||s.size},V.getOutsideTextFontKey=function(n,r,v,s){var o=v.data.data.i;return m.castOption(r,o,"outsidetextfont."+n)||m.castOption(r,o,"textfont."+n)||s.size},V.isOutsideText=function(n,r){return!n._hasColorscale&&V.isHierarchyRoot(r)},V.determineTextFont=function(n,r,v,s){return V.isOutsideText(n,r)?e(n,r,v):a(n,r,v,s)},V.hasTransition=function(n){return!!(n&&n.duration>0)},V.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},V.isHeader=function(n,r){return!(V.isLeaf(n)||n.depth===r._maxDepth-1)};function i(n){return n.data.data.pid}V.getParent=function(n,r){return V.findEntryWithLevel(n,i(r))},V.listPath=function(n,r){var v=n.parent;if(!v)return[];var s=r?[v.data[r]]:[v];return V.listPath(v,r).concat(s)},V.getPath=function(n){return V.listPath(n,"label").join("/")+"/"},V.formatValue=T.formatPieValue,V.formatPercent=function(n,r){var v=m.formatPercent(n,0);return v==="0%"&&(v=T.formatPiePercent(n,r)),v}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(t,N,V){N.exports={moduleType:"trace",name:"sunburst",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(t,N,V){N.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return m.coerce(T,e,u,i,n)}a("sunburstcolorway",e.colorway),a("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(t,N,V){var m=t("@plotly/d3"),u=t("d3-hierarchy"),A=t("d3-interpolate").interpolate,T=t("../../components/drawing"),e=t("../../lib"),a=t("../../lib/svg_text_utils"),i=t("../bar/uniform_text"),n=i.recordMinTextSize,r=i.clearMinTextSize,v=t("../pie/plot"),s=t("../pie/helpers").getRotationAngle,o=v.computeTransform,b=v.transformInsideText,g=t("./style").styleOne,d=t("../bar/style").resizeText,f=t("./fx"),y=t("./constants"),l=t("./helpers");V.plot=function(_,h,L,E){var S=_._fullLayout,P=S._sunburstlayer,F,I,D=!L,R=!S.uniformtext.mode&&l.hasTransition(L);if(r("sunburst",S),F=P.selectAll("g.trace.sunburst").data(h,function(z){return z[0].trace.uid}),F.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),R){E&&(I=E());var O=m.transition().duration(L.duration).ease(L.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});O.each(function(){P.selectAll("g.trace").each(function(z){x(_,z,this,L)})})}else F.each(function(z){x(_,z,this,L)}),S.uniformtext.mode&&d(_,S._sunburstlayer.selectAll(".trace"),"sunburst");D&&F.exit().remove()};function x(_,h,L,E){var S=_._context.staticPlot,P=_._fullLayout,F=!P.uniformtext.mode&&l.hasTransition(E),I=m.select(L),D=I.selectAll("g.slice"),R=h[0],O=R.trace,z=R.hierarchy,G=l.findEntryWithLevel(z,O.level),Y=l.getMaxDepth(O),ee=P._size,j=O.domain,X=ee.w*(j.x[1]-j.x[0]),ie=ee.h*(j.y[1]-j.y[0]),he=.5*Math.min(X,ie),K=R.cx=ee.l+ee.w*(j.x[1]+j.x[0])/2,$=R.cy=ee.t+ee.h*(1-j.y[0])-ie/2;if(!G)return D.remove();var U=null,H={};F&&D.each(function(Le){H[l.getPtId(Le)]={rpx0:Le.rpx0,rpx1:Le.rpx1,x0:Le.x0,x1:Le.x1,transform:Le.transform},!U&&l.isEntry(Le)&&(U=Le)});var q=c(G).descendants(),re=G.height+1,Z=0,Q=Y;R.hasMultipleRoots&&l.isHierarchyRoot(G)&&(q=q.slice(1),re-=1,Z=1,Q+=1),q=q.filter(function(Le){return Le.y1<=Q});var oe=s(O.rotation);oe&&q.forEach(function(Le){Le.x0+=oe,Le.x1+=oe});var se=Math.min(re,Y),ae=function(Le){return(Le-Z)/se*he},le=function(Le,Ze){return[Le*Math.cos(Ze),-Le*Math.sin(Ze)]},_e=function(Le){return e.pathAnnulus(Le.rpx0,Le.rpx1,Le.x0,Le.x1,K,$)},fe=function(Le){return K+w(Le)[0]*(Le.transform.rCenter||0)+(Le.transform.x||0)},me=function(Le){return $+w(Le)[1]*(Le.transform.rCenter||0)+(Le.transform.y||0)};D=D.data(q,l.getPtId),D.enter().append("g").classed("slice",!0),F?D.exit().transition().each(function(){var Le=m.select(this),Ze=Le.select("path.surface");Ze.transition().attrTween("d",function(ze){var Ie=ke(ze);return function(Ve){return _e(Ie(Ve))}});var We=Le.select("g.slicetext");We.attr("opacity",0)}).remove():D.exit().remove(),D.order();var xe=null;if(F&&U){var ye=l.getPtId(U);D.each(function(Le){xe===null&&l.getPtId(Le)===ye&&(xe=Le.x1)})}var be=D;F&&(be=be.transition().each("end",function(){var Le=m.select(this);l.setSliceCursor(Le,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),be.each(function(Le){var Ze=m.select(this),We=e.ensureSingle(Ze,"path","surface",function(Qt){Qt.style("pointer-events",S?"none":"all")});Le.rpx0=ae(Le.y0),Le.rpx1=ae(Le.y1),Le.xmid=(Le.x0+Le.x1)/2,Le.pxmid=le(Le.rpx1,Le.xmid),Le.midangle=-(Le.xmid-Math.PI/2),Le.startangle=-(Le.x0-Math.PI/2),Le.stopangle=-(Le.x1-Math.PI/2),Le.halfangle=.5*Math.min(e.angleDelta(Le.x0,Le.x1)||Math.PI,Math.PI),Le.ring=1-Le.rpx0/Le.rpx1,Le.rInscribed=M(Le),F?We.transition().attrTween("d",function(Qt){var Ot=De(Qt);return function(Ct){return _e(Ot(Ct))}}):We.attr("d",_e),Ze.call(f,G,_,h,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:_._transitioning}),We.call(g,Le,O);var ze=e.ensureSingle(Ze,"g","slicetext"),Ie=e.ensureSingle(ze,"text","",function(Qt){Qt.attr("data-notex",1)}),Ve=e.ensureUniformFontSize(_,l.determineTextFont(O,Le,P.font));Ie.text(V.formatSliceLabel(Le,G,O,h,P)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Ve).call(a.convertToTspans,_);var dt=T.bBox(Ie.node());Le.transform=b(dt,Le,R),Le.transform.targetX=fe(Le),Le.transform.targetY=me(Le);var Ft=function(Qt,Ot){var Ct=Qt.transform;return o(Ct,Ot),Ct.fontSize=Ve.size,n(O.type,Ct,P),e.getTextTransform(Ct)};F?Ie.transition().attrTween("transform",function(Qt){var Ot=He(Qt);return function(Ct){return Ft(Ot(Ct),dt)}}):Ie.attr("transform",Ft(Le,dt))});function ke(Le){var Ze=l.getPtId(Le),We=H[Ze],ze=H[l.getPtId(G)],Ie;if(ze){var Ve=(Le.x1>ze.x1?2*Math.PI:0)+oe;Ie=Le.rpx1<ze.rpx1?{x0:Le.x0,x1:Le.x1,rpx0:0,rpx1:0}:{x0:Ve,x1:Ve,rpx0:Le.rpx0,rpx1:Le.rpx1}}else{var dt,Ft=l.getPtId(Le.parent);D.each(function(Nt){if(l.getPtId(Nt)===Ft)return dt=Nt});var Qt=dt.children,Ot;Qt.forEach(function(Nt,Lt){if(l.getPtId(Nt)===Ze)return Ot=Lt});var Ct=Qt.length,jt=A(dt.x0,dt.x1);Ie={rpx0:he,rpx1:he,x0:jt(Ot/Ct),x1:jt((Ot+1)/Ct)}}return A(We,Ie)}function De(Le){var Ze=H[l.getPtId(Le)],We,ze={x0:Le.x0,x1:Le.x1,rpx0:Le.rpx0,rpx1:Le.rpx1};if(Ze)We=Ze;else if(U)if(Le.parent)if(xe){var Ie=(Le.x1>xe?2*Math.PI:0)+oe;We={x0:Ie,x1:Ie}}else We={rpx0:he,rpx1:he},e.extendFlat(We,Ae(Le));else We={rpx0:0,rpx1:0};else We={x0:oe,x1:oe};return A(We,ze)}function He(Le){var Ze=H[l.getPtId(Le)],We,ze=Le.transform;if(Ze)We=Ze;else if(We={rpx1:Le.rpx1,transform:{textPosAngle:ze.textPosAngle,scale:0,rotate:ze.rotate,rCenter:ze.rCenter,x:ze.x,y:ze.y}},U)if(Le.parent)if(xe){var Ie=Le.x1>xe?2*Math.PI:0;We.x0=We.x1=Ie}else e.extendFlat(We,Ae(Le));else We.x0=We.x1=oe;else We.x0=We.x1=oe;var Ve=A(We.transform.textPosAngle,Le.transform.textPosAngle),dt=A(We.rpx1,Le.rpx1),Ft=A(We.x0,Le.x0),Qt=A(We.x1,Le.x1),Ot=A(We.transform.scale,ze.scale),Ct=A(We.transform.rotate,ze.rotate),jt=ze.rCenter===0?3:We.transform.rCenter===0?1/3:1,Nt=A(We.transform.rCenter,ze.rCenter),Lt=function(Xe){return Nt(Math.pow(Xe,jt))};return function(Xe){var it=dt(Xe),Ye=Ft(Xe),Ee=Qt(Xe),Ge=Lt(Xe),Ke=le(it,(Ye+Ee)/2),qe=Ve(Xe),At={pxmid:Ke,rpx1:it,transform:{textPosAngle:qe,rCenter:Ge,x:ze.x,y:ze.y}};return n(O.type,ze,P),{transform:{targetX:fe(At),targetY:me(At),scale:Ot(Xe),rotate:Ct(Xe),rCenter:Ge}}}}function Ae(Le){var Ze=Le.parent,We=H[l.getPtId(Ze)],ze={};if(We){var Ie=Ze.children,Ve=Ie.indexOf(Le),dt=Ie.length,Ft=A(We.x0,We.x1);ze.x0=Ft(Ve/dt),ze.x1=Ft(Ve/dt)}else ze.x0=ze.x1=0;return ze}}function c(_){return u.partition().size([2*Math.PI,_.height+1])(_)}V.formatSliceLabel=function(_,h,L,E,S){var P=L.texttemplate,F=L.textinfo;if(!P&&(!F||F==="none"))return"";var I=S.separators,D=E[0],R=_.data.data,O=D.hierarchy,z=l.isHierarchyRoot(_),G=l.getParent(O,_),Y=l.getValue(_);if(!P){var ee=F.split("+"),j=function(Z){return ee.indexOf(Z)!==-1},X=[],ie;if(j("label")&&R.label&&X.push(R.label),R.hasOwnProperty("v")&&j("value")&&X.push(l.formatValue(R.v,I)),!z){j("current path")&&X.push(l.getPath(_.data));var he=0;j("percent parent")&&he++,j("percent entry")&&he++,j("percent root")&&he++;var K=he>1;if(he){var $,U=function(Z){ie=l.formatPercent($,I),K&&(ie+=" of "+Z),X.push(ie)};j("percent parent")&&!z&&($=Y/l.getValue(G),U("parent")),j("percent entry")&&($=Y/l.getValue(h),U("entry")),j("percent root")&&($=Y/l.getValue(O),U("root"))}}return j("text")&&(ie=e.castOption(L,R.i,"text"),e.isValidTextValue(ie)&&X.push(ie)),X.join("<br>")}var H=e.castOption(L,R.i,"texttemplate");if(!H)return"";var q={};R.label&&(q.label=R.label),R.hasOwnProperty("v")&&(q.value=R.v,q.valueLabel=l.formatValue(R.v,I)),q.currentPath=l.getPath(_.data),z||(q.percentParent=Y/l.getValue(G),q.percentParentLabel=l.formatPercent(q.percentParent,I),q.parent=l.getPtLabel(G)),q.percentEntry=Y/l.getValue(h),q.percentEntryLabel=l.formatPercent(q.percentEntry,I),q.entry=l.getPtLabel(h),q.percentRoot=Y/l.getValue(O),q.percentRootLabel=l.formatPercent(q.percentRoot,I),q.root=l.getPtLabel(O),R.hasOwnProperty("color")&&(q.color=R.color);var re=e.castOption(L,R.i,"text");return(e.isValidTextValue(re)||re==="")&&(q.text=re),q.customdata=e.castOption(L,R.i,"customdata"),e.texttemplateString(H,q,S._d3locale,q,L._meta||{})};function M(_){return _.rpx0===0&&e.isFullCircle([_.x0,_.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(_.halfangle)),_.ring/2))}function w(_){return p(_.rpx1,_.transform.textPosAngle)}function p(_,h){return[_*Math.sin(h),-_*Math.cos(h)]}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/color"),A=t("../../lib"),T=t("../bar/uniform_text").resizeText;function e(i){var n=i._fullLayout._sunburstlayer.selectAll(".trace");T(i,n,"sunburst"),n.each(function(r){var v=m.select(this),s=r[0],o=s.trace;v.style("opacity",o.opacity),v.selectAll("path.surface").each(function(b){m.select(this).call(a,b,o)})})}function a(i,n,r){var v=n.data.data,s=!n.children,o=v.i,b=A.castOption(r,o,"marker.line.color")||u.defaultLine,g=A.castOption(r,o,"marker.line.width")||0;i.style("stroke-width",g).call(u.fill,v.color).call(u.stroke,b).style("opacity",s?r.leaf.opacity:null)}N.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(t,N,V){var m=t("../../components/color"),u=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll;function n(s){return{valType:"boolean",dflt:!1}}function r(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n(),y:n(),z:n()},color:{valType:"color",dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var v=N.exports=i(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},u("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},u.zauto,{}),zmin:a({},u.zmin,{}),zmax:a({},u.zmax,{})},hoverinfo:a({},e.hoverinfo),showlegend:a({},e.showlegend,{dflt:!1})}),"calc","nested");v.x.editType=v.y.editType=v.z.editType="calc+clearAxisTypes",v.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(t,N,V){var m=t("../../components/colorscale/calc");N.exports=function(A,T){T.surfacecolor?m(A,T,{vals:T.surfacecolor,containerStr:"",cLetter:"c"}):m(A,T,{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(t,N,V){var m=t("../../../stackgl_modules").gl_surface3d,u=t("../../../stackgl_modules").ndarray,A=t("../../../stackgl_modules").ndarray_linear_interpolate.d2,T=t("../heatmap/interp2d"),e=t("../heatmap/find_empties"),a=t("../../lib").isArrayOrTypedArray,i=t("../../lib/gl_format_color").parseColorScale,n=t("../../lib/str2rgbarray"),r=t("../../components/colorscale").extractOpts;function v(E,S,P){this.scene=E,this.uid=P,this.surface=S,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=v.prototype;s.getXat=function(E,S,P,F){var I=a(this.data.x)?a(this.data.x[0])?this.data.x[S][E]:this.data.x[E]:E;return P===void 0?I:F.d2l(I,0,P)},s.getYat=function(E,S,P,F){var I=a(this.data.y)?a(this.data.y[0])?this.data.y[S][E]:this.data.y[S]:S;return P===void 0?I:F.d2l(I,0,P)},s.getZat=function(E,S,P,F){var I=this.data.z[S][E];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[S][E]),P===void 0?I:F.d2l(I,0,P)},s.handlePick=function(E){if(E.object===this.surface){var S=(E.data.index[0]-1)/this.dataScaleX-1,P=(E.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(S),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);E.index=[F,I],E.traceCoordinate=[this.getXat(F,I),this.getYat(F,I),this.getZat(F,I)],E.dataCoordinate=[this.getXat(F,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=E.dataCoordinate[D];R!=null&&(E.dataCoordinate[D]*=this.scene.dataScale[D])}var O=this.data.hovertext||this.data.text;return Array.isArray(O)&&O[I]&&O[I][F]!==void 0?E.textLabel=O[I][F]:O?E.textLabel=O:E.textLabel="",E.data.dataCoordinate=E.dataCoordinate.slice(),this.surface.highlight(E.data),this.scene.glplot.spikes.position=E.dataCoordinate,!0}};function o(E){var S=E[0].rgb,P=E[E.length-1].rgb;return S[0]===P[0]&&S[1]===P[1]&&S[2]===P[2]&&S[3]===P[3]}var b=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function g(E,S){if(E<S)return 0;for(var P=0;Math.floor(E%S)===0;)E/=S,P++;return P}function d(E){for(var S=[],P=0;P<b.length;P++){var F=b[P];S.push(g(E,F))}return S}function f(E){for(var S=d(E),P=E,F=0;F<b.length;F++)if(S[F]>0){P=b[F];break}return P}function y(E,S){if(!(E<1||S<1)){for(var P=d(E),F=d(S),I=1,D=0;D<b.length;D++)I*=Math.pow(b[D],Math.max(P[D],F[D]));return I}}function l(E){if(E.length!==0){for(var S=1,P=0;P<E.length;P++)S=y(S,E[P]);return S}}s.calcXnums=function(E){var S,P=[];for(S=1;S<E;S++){var F=this.getXat(S-1,0),I=this.getXat(S,0);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?P[S-1]=Math.abs(I-F):P[S-1]=0}var D=0;for(S=1;S<E;S++)D+=P[S-1];for(S=1;S<E;S++)P[S-1]===0?P[S-1]=1:P[S-1]=Math.round(D/P[S-1]);return P},s.calcYnums=function(E){var S,P=[];for(S=1;S<E;S++){var F=this.getYat(0,S-1),I=this.getYat(0,S);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?P[S-1]=Math.abs(I-F):P[S-1]=0}var D=0;for(S=1;S<E;S++)D+=P[S-1];for(S=1;S<E;S++)P[S-1]===0?P[S-1]=1:P[S-1]=Math.round(D/P[S-1]);return P};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],c=x[9],M=x[13];s.estimateScale=function(E,S){for(var P=S===0?this.calcXnums(E):this.calcYnums(E),F=1+l(P);F<c;)F*=2;for(;F>M;)F--,F/=f(F),F++,F<c&&(F=M);var I=Math.round(F/E);return I>1?I:1};function w(E,S,P){var F=P[8]+P[2]*S[0]+P[5]*S[1];return E[0]=(P[6]+P[0]*S[0]+P[3]*S[1])/F,E[1]=(P[7]+P[1]*S[0]+P[4]*S[1])/F,E}function p(E,S,P){return _(E,S,w,P),E}function _(E,S,P,F){for(var I=[0,0],D=E.shape[0],R=E.shape[1],O=0;O<D;O++)for(var z=0;z<R;z++)P(I,[O,z],F),E.set(O,z,A(S,I[0],I[1]));return E}s.refineCoords=function(E){for(var S=this.dataScaleX,P=this.dataScaleY,F=E[0].shape[0],I=E[0].shape[1],D=Math.floor(E[0].shape[0]*S+1)|0,R=Math.floor(E[0].shape[1]*P+1)|0,O=1+F+1,z=1+I+1,G=u(new Float32Array(O*z),[O,z]),Y=[1/S,0,0,0,1/P,0,0,0,1],ee=0;ee<E.length;++ee){this.surface.padField(G,E[ee]);var j=u(new Float32Array(D*R),[D,R]);p(j,G,Y),E[ee]=j}};function h(E,S){for(var P=!1,F=0;F<E.length;F++)if(S===E[F]){P=!0;break}P===!1&&E.push(S)}s.setContourLevels=function(){var E=[[],[],[]],S=[!1,!1,!1],P=!1,F,I,D;for(F=0;F<3;++F)if(this.showContour[F]&&(P=!0,this.contourSize[F]>0&&this.contourStart[F]!==null&&this.contourEnd[F]!==null&&this.contourEnd[F]>this.contourStart[F]))for(S[F]=!0,I=this.contourStart[F];I<this.contourEnd[F];I+=this.contourSize[F])D=I*this.scene.dataScale[F],h(E[F],D);if(P){var R=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(R[F]=S[F]?E[F]:this.scene.contourLevels[F]);this.surface.update({levels:R})}},s.update=function(E){var S=this.scene,P=S.fullSceneLayout,F=this.surface,I=i(E),D=S.dataScale,R=E.z[0].length,O=E._ylength,z=S.contourLevels;this.data=E;var G,Y,ee,j,X=[];for(G=0;G<3;G++)for(X[G]=[],Y=0;Y<R;Y++)X[G][Y]=[];for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)X[0][Y][ee]=this.getXat(Y,ee,E.xcalendar,P.xaxis),X[1][Y][ee]=this.getYat(Y,ee,E.ycalendar,P.yaxis),X[2][Y][ee]=this.getZat(Y,ee,E.zcalendar,P.zaxis);if(E.connectgaps)for(E._emptypoints=e(X[2]),T(X[2],E._emptypoints),E._interpolatedZ=[],Y=0;Y<R;Y++)for(E._interpolatedZ[Y]=[],ee=0;ee<O;ee++)E._interpolatedZ[Y][ee]=X[2][Y][ee];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[G][Y][ee],j==null?X[G][Y][ee]=NaN:j=X[G][Y][ee]*=D[G];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[G][Y][ee],j!=null&&(this.minValues[G]>j&&(this.minValues[G]=j),this.maxValues[G]<j&&(this.maxValues[G]=j));for(G=0;G<3;G++)this.objectOffset[G]=.5*(this.minValues[G]+this.maxValues[G]);for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)j=X[G][Y][ee],j!=null&&(X[G][Y][ee]-=this.objectOffset[G]);var ie=[u(new Float32Array(R*O),[R,O]),u(new Float32Array(R*O),[R,O]),u(new Float32Array(R*O),[R,O])];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)ie[G].set(Y,ee,X[G][Y][ee]);X=[];var he={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!E.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:E.opacityscale,opacity:E.opacity},K=r(E);if(he.intensityBounds=[K.min,K.max],E.surfacecolor){var $=u(new Float32Array(R*O),[R,O]);for(Y=0;Y<R;Y++)for(ee=0;ee<O;ee++)$.set(Y,ee,E.surfacecolor[ee][Y]);ie.push($)}else he.intensityBounds[0]*=D[2],he.intensityBounds[1]*=D[2];(M<ie[0].shape[0]||M<ie[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(ie[0].shape[0],0),this.dataScaleY=this.estimateScale(ie[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(ie)),E.surfacecolor&&(he.intensity=ie.pop());var U=[!0,!0,!0],H=["x","y","z"];for(G=0;G<3;++G){var q=E.contours[H[G]];U[G]=q.highlight,he.showContour[G]=q.show||q.highlight,he.showContour[G]&&(he.contourProject[G]=[q.project.x,q.project.y,q.project.z],q.show?(this.showContour[G]=!0,he.levels[G]=z[G],F.highlightColor[G]=he.contourColor[G]=n(q.color),q.usecolormap?F.highlightTint[G]=he.contourTint[G]=0:F.highlightTint[G]=he.contourTint[G]=1,he.contourWidth[G]=q.width,this.contourStart[G]=q.start,this.contourEnd[G]=q.end,this.contourSize[G]=q.size):(this.showContour[G]=!1,this.contourStart[G]=null,this.contourEnd[G]=null,this.contourSize[G]=0),q.highlight&&(he.dynamicColor[G]=n(q.highlightcolor),he.dynamicWidth[G]=q.highlightwidth))}o(I)&&(he.vertexColor=!0),he.objectOffset=this.objectOffset,he.coords=ie,F.update(he),F.visible=E.visible,F.enableDynamic=U,F.enableHighlight=U,F.snapToData=!0,"lighting"in E&&(F.ambientLight=E.lighting.ambient,F.diffuseLight=E.lighting.diffuse,F.specularLight=E.lighting.specular,F.roughness=E.lighting.roughness,F.fresnel=E.lighting.fresnel),"lightposition"in E&&(F.lightPosition=[E.lightposition.x,E.lightposition.y,E.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(E,S){var P=E.glplot.gl,F=m({gl:P}),I=new v(E,F,S.uid);return F._trace=I,I.update(S),E.glplot.add(F),I}N.exports=L},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(t,N,V){var m=t("../../registry"),u=t("../../lib"),A=t("../../components/colorscale/defaults"),T=t("./attributes"),e=.1;function a(s,o){for(var b=[],g=32,d=0;d<g;d++){var f=d/(g-1),y=o+(1-o)*(1-Math.pow(Math.sin(s*f*Math.PI),2));b.push([f,Math.max(0,Math.min(1,y))])}return b}function i(s){var o=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var b=0;b<s.length;b++){var g=s[b];if(g.length!==2||+g[0]<o)return!1;o=+g[0]}return!0}function n(s,o,b,g){var d,f;function y(E,S){return u.coerce(s,o,T,E,S)}var l=y("x"),x=y("y"),c=y("z");if(!c||!c.length||(l?l.length<1:!1)||(x?x.length<1:!1)){o.visible=!1;return}o._xlength=Array.isArray(l)&&u.isArrayOrTypedArray(l[0])?c.length:c[0].length,o._ylength=c.length;var M=m.getComponentMethod("calendars","handleTraceDefaults");M(s,o,["x","y","z"],g),y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),y("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(E){y(E)});var w=y("surfacecolor"),p=["x","y","z"];for(d=0;d<3;++d){var _="contours."+p[d],h=y(_+".show"),L=y(_+".highlight");if(h||L)for(f=0;f<3;++f)y(_+".project."+p[f]);h&&(y(_+".color"),y(_+".width"),y(_+".usecolormap")),L&&(y(_+".highlightcolor"),y(_+".highlightwidth")),y(_+".start"),y(_+".end"),y(_+".size")}w||(v(s,"zmin","cmin"),v(s,"zmax","cmax"),v(s,"zauto","cauto")),A(s,o,g,y,{prefix:"",cLetter:"c"}),r(s,o,g,y),o._length=null}function r(s,o,b,g){var d=g("opacityscale");d==="max"?o.opacityscale=[[0,e],[1,1]]:d==="min"?o.opacityscale=[[0,1],[1,e]]:d==="extremes"?o.opacityscale=a(1,e):i(d)||(o.opacityscale=void 0)}function v(s,o,b){o in s&&!(b in s)&&(s[b]=s[o])}N.exports={supplyDefaults:n,opacityscaleDefaults:r}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),moduleType:"trace",name:"surface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(t,N,V){var m=t("../../components/annotations/attributes"),u=t("../../lib/extend").extendFlat,A=t("../../plot_api/edit_types").overrideAll,T=t("../../plots/font_attributes"),e=t("../../plots/domain").attributes,a=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,i=N.exports=A({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:u({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:u({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:u({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:u({},T({arrayOk:!0}))}},"calc","from-root");i.transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(t,N,V){var m=t("../../plots/get_data").getModuleCalcData,u=t("./plot"),A="table";V.name=A,V.plot=function(T){var e=m(T.calcdata,A)[0];e.length&&u(T,e)},V.clean=function(T,e,a,i){var n=i._has&&i._has(A),r=e._has&&e._has(A);n&&!r&&i._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(t,N,V){var m=t("../../lib/gup").wrap;N.exports=function(){return m({})}},{"../../lib/gup":512}],1078:[function(t,N,V){N.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(t,N,V){var m=t("./constants"),u=t("../../lib/extend").extendFlat,A=t("fast-isnumeric");N.exports=function(b,g){var d=a(g.cells.values),f=function(Y){return Y.slice(g.header.values.length,Y.length)},y=a(g.header.values);y.length&&!y[0].length&&(y[0]=[""],y=a(y));var l=y.concat(f(d).map(function(){return i((y[0]||[""]).length)})),x=g.domain,c=Math.floor(b._fullLayout._size.w*(x.x[1]-x.x[0])),M=Math.floor(b._fullLayout._size.h*(x.y[1]-x.y[0])),w=g.header.values.length?l[0].map(function(){return g.header.height}):[m.emptyHeaderHeight],p=d.length?d[0].map(function(){return g.cells.height}):[],_=w.reduce(e,0),h=M-_,L=h+m.uplift,E=v(p,L),S=v(w,_),P=r(S,[]),F=r(E,P),I={},D=g._fullInput.columnorder.concat(f(d.map(function(Y,ee){return ee}))),R=l.map(function(Y,ee){var j=Array.isArray(g.columnwidth)?g.columnwidth[Math.min(ee,g.columnwidth.length-1)]:g.columnwidth;return A(j)?Number(j):1}),O=R.reduce(e,0);R=R.map(function(Y){return Y/O*c});var z=Math.max(T(g.header.line.width),T(g.cells.line.width)),G={key:g.uid+b._context.staticPlot,translateX:x.x[0]*b._fullLayout._size.w,translateY:b._fullLayout._size.h*(1-x.y[1]),size:b._fullLayout._size,width:c,maxLineWidth:z,height:M,columnOrder:D,groupHeight:M,rowBlocks:F,headerRowBlocks:P,scrollY:0,cells:u({},g.cells,{values:d}),headerCells:u({},g.header,{values:l}),gdColumns:l.map(function(Y){return Y[0]}),gdColumnsOriginalOrder:l.map(function(Y){return Y[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:l.map(function(Y,ee){var j=I[Y];I[Y]=(j||0)+1;var X=Y+"__"+I[Y];return{key:X,label:Y,specIndex:ee,xIndex:D[ee],xScale:n,x:void 0,calcdata:void 0,columnWidth:R[ee]}})};return G.columns.forEach(function(Y){Y.calcdata=G,Y.x=n(Y)}),G};function T(o){if(Array.isArray(o)){for(var b=0,g=0;g<o.length;g++)b=Math.max(b,T(o[g]));return b}return o}function e(o,b){return o+b}function a(o){var b=o.slice(),g=1/0,d=0,f;for(f=0;f<b.length;f++)Array.isArray(b[f])||(b[f]=[b[f]]),g=Math.min(g,b[f].length),d=Math.max(d,b[f].length);if(g!==d)for(f=0;f<b.length;f++){var y=d-b[f].length;y&&(b[f]=b[f].concat(i(y)))}return b}function i(o){for(var b=new Array(o),g=0;g<o;g++)b[g]="";return b}function n(o){return o.calcdata.columns.reduce(function(b,g){return g.xIndex<o.xIndex?b+g.columnWidth:b},0)}function r(o,b){var g=Object.keys(o);return g.map(function(d){return u({},o[d],{auxiliaryBlocks:b})})}function v(o,b){for(var g={},d,f=0,y=0,l=s(),x=0,c=0,M=0;M<o.length;M++)d=o[M],l.rows.push({rowIndex:M,rowHeight:d}),y+=d,(y>=b||M===o.length-1)&&(g[f]=l,l.key=c++,l.firstRowIndex=x,l.lastRowIndex=M,l=s(),f+=y,x=M+1,y=0);return g}function s(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(t,N,V){var m=t("../../lib/extend").extendFlat;V.splitToPanels=function(A){var T=[0,0],e=m({},A,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:A.calcdata.headerCells.values[A.specIndex],rowBlocks:A.calcdata.headerRowBlocks,calcdata:m({},A.calcdata,{cells:A.calcdata.headerCells})}),a=m({},A,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),i=m({},A,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks});return[a,i,e]},V.splitToCells=function(A){var T=u(A);return(A.values||[]).slice(T[0],T[1]).map(function(e,a){var i=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+i,key:T[0]+a,column:A,calcdata:A.calcdata,page:A.page,rowBlocks:A.rowBlocks,value:e}})};function u(A){var T=A.rowBlocks[A.page],e=T?T.rows[0].rowIndex:0,a=T?e+T.rows.length:0;return[e,a]}},{"../../lib/extend":505}],1081:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("../../plots/domain").defaults;function T(e,a){for(var i=e.columnorder||[],n=e.header.values.length,r=i.slice(0,n),v=r.slice().sort(function(b,g){return b-g}),s=r.map(function(b){return v.indexOf(b)}),o=s.length;o<n;o++)s.push(o);a("columnorder",s)}N.exports=function(a,i,n,r){function v(s,o){return m.coerce(a,i,u,s,o)}A(i,r,v),v("columnwidth"),v("header.values"),v("header.format"),v("header.align"),v("header.prefix"),v("header.suffix"),v("header.height"),v("header.line.width"),v("header.line.color"),v("header.fill.color"),m.coerceFont(v,"header.font",m.extendFlat({},r.font)),T(i,v),v("cells.values"),v("cells.format"),v("cells.align"),v("cells.prefix"),v("cells.suffix"),v("cells.height"),v("cells.line.width"),v("cells.line.color"),v("cells.fill.color"),m.coerceFont(v,"cells.font",m.extendFlat({},r.font)),i._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"table",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(t,N,V){var m=t("./constants"),u=t("@plotly/d3"),A=t("../../lib"),T=A.numberFormat,e=t("../../lib/gup"),a=t("../../components/drawing"),i=t("../../lib/svg_text_utils"),n=t("../../lib").raiseToTop,r=t("../../lib").strTranslate,v=t("../../lib").cancelTransition,s=t("./data_preparation_helper"),o=t("./data_split_helpers"),b=t("../../components/color");N.exports=function(oe,se){var ae=!oe._context.staticPlot,le=oe._fullLayout._paper.selectAll("."+m.cn.table).data(se.map(function(ze){var Ie=e.unwrap(ze),Ve=Ie.trace;return s(oe,Ve)}),e.keyFun);le.exit().remove(),le.enter().append("g").classed(m.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),le.attr("width",function(ze){return ze.width+ze.size.l+ze.size.r}).attr("height",function(ze){return ze.height+ze.size.t+ze.size.b}).attr("transform",function(ze){return r(ze.translateX,ze.translateY)});var _e=le.selectAll("."+m.cn.tableControlView).data(e.repeat,e.keyFun),fe=_e.enter().append("g").classed(m.cn.tableControlView,!0).style("box-sizing","content-box");if(ae){var me="onwheel"in document?"wheel":"mousewheel";fe.on("mousemove",function(ze){_e.filter(function(Ie){return ze===Ie}).call(l,oe)}).on(me,function(ze){if(!ze.scrollbarState.wheeling){ze.scrollbarState.wheeling=!0;var Ie=ze.scrollY+u.event.deltaY,Ve=j(oe,_e,null,Ie)(ze);Ve||(u.event.stopPropagation(),u.event.preventDefault()),ze.scrollbarState.wheeling=!1}}).call(l,oe,!0)}_e.attr("transform",function(ze){return r(ze.size.l,ze.size.t)});var xe=_e.selectAll("."+m.cn.scrollBackground).data(e.repeat,e.keyFun);xe.enter().append("rect").classed(m.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function(ze){return ze.width}).attr("height",function(ze){return ze.height}),_e.each(function(ze){a.setClipUrl(u.select(this),d(oe,ze),oe)});var ye=_e.selectAll("."+m.cn.yColumn).data(function(ze){return ze.columns},e.keyFun);ye.enter().append("g").classed(m.cn.yColumn,!0),ye.exit().remove(),ye.attr("transform",function(ze){return r(ze.x,0)}),ae&&ye.call(u.behavior.drag().origin(function(ze){var Ie=u.select(this);return R(Ie,ze,-m.uplift),n(this),ze.calcdata.columnDragInProgress=!0,l(_e.filter(function(Ve){return ze.calcdata.key===Ve.key}),oe),ze}).on("drag",function(ze){var Ie=u.select(this),Ve=function(Qt){return(ze===Qt?u.event.x:Qt.x)+Qt.columnWidth/2};ze.x=Math.max(-m.overdrag,Math.min(ze.calcdata.width+m.overdrag-ze.columnWidth,u.event.x));var dt=y(ye).filter(function(Qt){return Qt.calcdata.key===ze.calcdata.key}),Ft=dt.sort(function(Qt,Ot){return Ve(Qt)-Ve(Ot)});Ft.forEach(function(Qt,Ot){Qt.xIndex=Ot,Qt.x=ze===Qt?Qt.x:Qt.xScale(Qt)}),ye.filter(function(Qt){return ze!==Qt}).transition().ease(m.transitionEase).duration(m.transitionDuration).attr("transform",function(Qt){return r(Qt.x,0)}),Ie.call(v).attr("transform",r(ze.x,-m.uplift))}).on("dragend",function(ze){var Ie=u.select(this),Ve=ze.calcdata;ze.x=ze.xScale(ze),ze.calcdata.columnDragInProgress=!1,R(Ie,ze,0),I(oe,Ve,Ve.columns.map(function(dt){return dt.xIndex}))})),ye.each(function(ze){a.setClipUrl(u.select(this),f(oe,ze),oe)});var be=ye.selectAll("."+m.cn.columnBlock).data(o.splitToPanels,e.keyFun);be.enter().append("g").classed(m.cn.columnBlock,!0).attr("id",function(ze){return ze.key}),be.style("cursor",function(ze){return ze.dragHandle?"ew-resize":ze.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ke=be.filter(z),De=be.filter(O);ae&&De.call(u.behavior.drag().origin(function(ze){return u.event.stopPropagation(),ze}).on("drag",j(oe,_e,-1)).on("dragend",function(){})),x(oe,_e,ke,be),x(oe,_e,De,be);var He=_e.selectAll("."+m.cn.scrollAreaClip).data(e.repeat,e.keyFun);He.enter().append("clipPath").classed(m.cn.scrollAreaClip,!0).attr("id",function(ze){return d(oe,ze)});var Ae=He.selectAll("."+m.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);Ae.enter().append("rect").classed(m.cn.scrollAreaClipRect,!0).attr("x",-m.overdrag).attr("y",-m.uplift).attr("fill","none"),Ae.attr("width",function(ze){return ze.width+2*m.overdrag}).attr("height",function(ze){return ze.height+m.uplift});var Le=ye.selectAll("."+m.cn.columnBoundary).data(e.repeat,e.keyFun);Le.enter().append("g").classed(m.cn.columnBoundary,!0);var Ze=ye.selectAll("."+m.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ze.enter().append("clipPath").classed(m.cn.columnBoundaryClippath,!0),Ze.attr("id",function(ze){return f(oe,ze)});var We=Ze.selectAll("."+m.cn.columnBoundaryRect).data(e.repeat,e.keyFun);We.enter().append("rect").classed(m.cn.columnBoundaryRect,!0).attr("fill","none"),We.attr("width",function(ze){return ze.columnWidth+2*g(ze)}).attr("height",function(ze){return ze.calcdata.height+2*g(ze)+m.uplift}).attr("x",function(ze){return-g(ze)}).attr("y",function(ze){return-g(ze)}),ee(null,De,_e)};function g(Q){return Math.ceil(Q.calcdata.maxLineWidth/2)}function d(Q,oe){return"clip"+Q._fullLayout._uid+"_scrollAreaBottomClip_"+oe.key}function f(Q,oe){return"clip"+Q._fullLayout._uid+"_columnBoundaryClippath_"+oe.calcdata.key+"_"+oe.specIndex}function y(Q){return[].concat.apply([],Q.map(function(oe){return oe})).map(function(oe){return oe.__data__})}function l(Q,oe,se){function ae(ye){var be=ye.rowBlocks;return U(be,be.length-1)+(be.length?H(be[be.length-1],1/0):1)}var le=Q.selectAll("."+m.cn.scrollbarKit).data(e.repeat,e.keyFun);le.enter().append("g").classed(m.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),le.each(function(ye){var be=ye.scrollbarState;be.totalHeight=ae(ye),be.scrollableAreaHeight=ye.groupHeight-G(ye),be.currentlyVisibleHeight=Math.min(be.totalHeight,be.scrollableAreaHeight),be.ratio=be.currentlyVisibleHeight/be.totalHeight,be.barLength=Math.max(be.ratio*be.currentlyVisibleHeight,m.goldenRatio*m.scrollbarWidth),be.barWiggleRoom=be.currentlyVisibleHeight-be.barLength,be.wiggleRoom=Math.max(0,be.totalHeight-be.scrollableAreaHeight),be.topY=be.barWiggleRoom===0?0:ye.scrollY/be.wiggleRoom*be.barWiggleRoom,be.bottomY=be.topY+be.barLength,be.dragMultiplier=be.wiggleRoom/be.barWiggleRoom}).attr("transform",function(ye){var be=ye.width+m.scrollbarWidth/2+m.scrollbarOffset;return r(be,G(ye))});var _e=le.selectAll("."+m.cn.scrollbar).data(e.repeat,e.keyFun);_e.enter().append("g").classed(m.cn.scrollbar,!0);var fe=_e.selectAll("."+m.cn.scrollbarSlider).data(e.repeat,e.keyFun);fe.enter().append("g").classed(m.cn.scrollbarSlider,!0),fe.attr("transform",function(ye){return r(0,ye.scrollbarState.topY||0)});var me=fe.selectAll("."+m.cn.scrollbarGlyph).data(e.repeat,e.keyFun);me.enter().append("line").classed(m.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",m.scrollbarWidth).attr("stroke-linecap","round").attr("y1",m.scrollbarWidth/2),me.attr("y2",function(ye){return ye.scrollbarState.barLength-m.scrollbarWidth/2}).attr("stroke-opacity",function(ye){return ye.columnDragInProgress||!ye.scrollbarState.barWiggleRoom||se?0:.4}),me.transition().delay(0).duration(0),me.transition().delay(m.scrollbarHideDelay).duration(m.scrollbarHideDuration).attr("stroke-opacity",0);var xe=_e.selectAll("."+m.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);xe.enter().append("line").classed(m.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",m.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ye){var be=u.event.y,ke=this.getBoundingClientRect(),De=ye.scrollbarState,He=be-ke.top,Ae=u.scale.linear().domain([0,De.scrollableAreaHeight]).range([0,De.totalHeight]).clamp(!0);De.topY<=He&&He<=De.bottomY||j(oe,Q,null,Ae(He-De.barLength/2))(ye)}).call(u.behavior.drag().origin(function(ye){return u.event.stopPropagation(),ye.scrollbarState.scrollbarScrollInProgress=!0,ye}).on("drag",j(oe,Q)).on("dragend",function(){})),xe.attr("y2",function(ye){return ye.scrollbarState.scrollableAreaHeight}),oe._context.staticPlot&&(me.remove(),xe.remove())}function x(Q,oe,se,ae){var le=c(se),_e=M(le);h(_e);var fe=w(_e);E(fe);var me=_(_e),xe=p(me);L(xe),S(xe,oe,ae,Q),$(_e)}function c(Q){var oe=Q.selectAll("."+m.cn.columnCells).data(e.repeat,e.keyFun);return oe.enter().append("g").classed(m.cn.columnCells,!0),oe.exit().remove(),oe}function M(Q){var oe=Q.selectAll("."+m.cn.columnCell).data(o.splitToCells,function(se){return se.keyWithinBlock});return oe.enter().append("g").classed(m.cn.columnCell,!0),oe.exit().remove(),oe}function w(Q){var oe=Q.selectAll("."+m.cn.cellRect).data(e.repeat,function(se){return se.keyWithinBlock});return oe.enter().append("rect").classed(m.cn.cellRect,!0),oe}function p(Q){var oe=Q.selectAll("."+m.cn.cellText).data(e.repeat,function(se){return se.keyWithinBlock});return oe.enter().append("text").classed(m.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){u.event.stopPropagation()}),oe}function _(Q){var oe=Q.selectAll("."+m.cn.cellTextHolder).data(e.repeat,function(se){return se.keyWithinBlock});return oe.enter().append("g").classed(m.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),oe}function h(Q){Q.each(function(oe,se){var ae=oe.calcdata.cells.font,le=oe.column.specIndex,_e={size:D(ae.size,le,se),color:D(ae.color,le,se),family:D(ae.family,le,se)};oe.rowNumber=oe.key,oe.align=D(oe.calcdata.cells.align,le,se),oe.cellBorderWidth=D(oe.calcdata.cells.line.width,le,se),oe.font=_e})}function L(Q){Q.each(function(oe){a.font(u.select(this),oe.font)})}function E(Q){Q.attr("width",function(oe){return oe.column.columnWidth}).attr("stroke-width",function(oe){return oe.cellBorderWidth}).each(function(oe){var se=u.select(this);b.stroke(se,D(oe.calcdata.cells.line.color,oe.column.specIndex,oe.rowNumber)),b.fill(se,D(oe.calcdata.cells.fill.color,oe.column.specIndex,oe.rowNumber))})}function S(Q,oe,se,ae){Q.text(function(le){var _e=le.column.specIndex,fe=le.rowNumber,me=le.value,xe=typeof me=="string",ye=xe&&me.match(/<br>/i),be=!xe||ye;le.mayHaveMarkup=xe&&me.match(/[<&>]/);var ke=P(me);le.latex=ke;var De=ke?"":D(le.calcdata.cells.prefix,_e,fe)||"",He=ke?"":D(le.calcdata.cells.suffix,_e,fe)||"",Ae=ke?null:D(le.calcdata.cells.format,_e,fe)||null,Le=De+(Ae?T(Ae)(le.value):le.value)+He,Ze;le.wrappingNeeded=!le.wrapped&&!be&&!ke&&(Ze=F(Le)),le.cellHeightMayIncrease=ye||ke||le.mayHaveMarkup||(Ze===void 0?F(Le):Ze),le.needsConvertToTspans=le.mayHaveMarkup||le.wrappingNeeded||le.latex;var We;if(le.wrappingNeeded){var ze=m.wrapSplitCharacter===" "?Le.replace(/<a href=/ig,"<a_href="):Le,Ie=ze.split(m.wrapSplitCharacter),Ve=m.wrapSplitCharacter===" "?Ie.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):Ie;le.fragments=Ve.map(function(dt){return{text:dt,width:null}}),le.fragments.push({fragment:m.wrapSpacer,width:null}),We=Ve.join(m.lineBreaker)+m.lineBreaker+m.wrapSpacer}else delete le.fragments,We=Le;return We}).attr("dy",function(le){return le.needsConvertToTspans?0:"0.75em"}).each(function(le){var _e=this,fe=u.select(_e),me=le.wrappingNeeded?ie:he;le.needsConvertToTspans?i.convertToTspans(fe,ae,me(se,_e,oe,ae,le)):u.select(_e.parentNode).attr("transform",function(xe){return r(K(xe),m.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function P(Q){return typeof Q=="string"&&Q.match(m.latexCheck)}function F(Q){return Q.indexOf(m.wrapSplitCharacter)!==-1}function I(Q,oe,se){var ae=oe.gdColumnsOriginalOrder;oe.gdColumns.sort(function(le,_e){return se[ae.indexOf(le)]-se[ae.indexOf(_e)]}),oe.columnorder=se,Q.emit("plotly_restyle")}function D(Q,oe,se){if(Array.isArray(Q)){var ae=Q[Math.min(oe,Q.length-1)];return Array.isArray(ae)?ae[Math.min(se,ae.length-1)]:ae}else return Q}function R(Q,oe,se){Q.transition().ease(m.releaseTransitionEase).duration(m.releaseTransitionDuration).attr("transform",r(oe.x,se))}function O(Q){return Q.type==="cells"}function z(Q){return Q.type==="header"}function G(Q){var oe=Q.rowBlocks.length?Q.rowBlocks[0].auxiliaryBlocks:[];return oe.reduce(function(se,ae){return se+H(ae,1/0)},0)}function Y(Q,oe,se){for(var ae=[],le=0,_e=0;_e<Q.length;_e++){for(var fe=Q[_e],me=fe.rows,xe=0,ye=0;ye<me.length;ye++)xe+=me[ye].rowHeight;fe.allRowsHeight=xe;var be=le+xe,ke=oe,De=ke+se;ke<be&&De>le&&ae.push(_e),le+=xe}return ae}function ee(Q,oe,se){var ae=y(oe)[0];if(ae!==void 0){var le=ae.rowBlocks,_e=ae.calcdata,fe=U(le,le.length),me=ae.calcdata.groupHeight-G(ae),xe=_e.scrollY=Math.max(0,Math.min(fe-me,_e.scrollY)),ye=Y(le,xe,me);ye.length===1&&(ye[0]===le.length-1?ye.unshift(ye[0]-1):ye.push(ye[0]+1)),ye[0]%2&&ye.reverse(),oe.each(function(be,ke){be.page=ye[ke],be.scrollY=xe}),oe.attr("transform",function(be){var ke=U(be.rowBlocks,be.page)-be.scrollY;return r(0,ke)}),Q&&(X(Q,se,oe,ye,ae.prevPages,ae,0),X(Q,se,oe,ye,ae.prevPages,ae,1),l(se,Q))}}function j(Q,oe,se,ae){return function(_e){var fe=_e.calcdata?_e.calcdata:_e,me=oe.filter(function(ke){return fe.key===ke.key}),xe=se||fe.scrollbarState.dragMultiplier,ye=fe.scrollY;fe.scrollY=ae===void 0?fe.scrollY+xe*u.event.dy:ae;var be=me.selectAll("."+m.cn.yColumn).selectAll("."+m.cn.columnBlock).filter(O);return ee(Q,be,me),fe.scrollY===ye}}function X(Q,oe,se,ae,le,_e,fe){var me=ae[fe]!==le[fe];me&&(clearTimeout(_e.currentRepaint[fe]),_e.currentRepaint[fe]=setTimeout(function(){var xe=se.filter(function(ye,be){return be===fe&&ae[be]!==le[be]});x(Q,oe,xe,se),le[fe]=ae[fe]}))}function ie(Q,oe,se,ae){return function(){var _e=u.select(oe.parentNode);_e.each(function(fe){var me=fe.fragments;_e.selectAll("tspan.line").each(function(Le,Ze){me[Ze].width=this.getComputedTextLength()});var xe=me[me.length-1].width,ye=me.slice(0,-1),be=[],ke,De,He=0,Ae=fe.column.columnWidth-2*m.cellPad;for(fe.value="";ye.length;)ke=ye.shift(),De=ke.width+xe,He+De>Ae&&(fe.value+=be.join(m.wrapSpacer)+m.lineBreaker,be=[],He=0),be.push(ke.text),He+=De;He&&(fe.value+=be.join(m.wrapSpacer)),fe.wrapped=!0}),_e.selectAll("tspan.line").remove(),S(_e.select("."+m.cn.cellText),se,Q,ae),u.select(oe.parentNode.parentNode).call($)}}function he(Q,oe,se,ae,le){return function(){if(!le.settledY){var fe=u.select(oe.parentNode),me=re(le),xe=le.key-me.firstRowIndex,ye=me.rows[xe].rowHeight,be=le.cellHeightMayIncrease?oe.parentNode.getBoundingClientRect().height+2*m.cellPad:ye,ke=Math.max(be,ye),De=ke-me.rows[xe].rowHeight;De&&(me.rows[xe].rowHeight=ke,Q.selectAll("."+m.cn.columnCell).call($),ee(null,Q.filter(O),0),l(se,ae,!0)),fe.attr("transform",function(){var He=this,Ae=He.parentNode,Le=Ae.getBoundingClientRect(),Ze=u.select(He.parentNode).select("."+m.cn.cellRect).node().getBoundingClientRect(),We=He.transform.baseVal.consolidate(),ze=Ze.top-Le.top+(We?We.matrix.f:m.cellPad);return r(K(le,u.select(He.parentNode).select("."+m.cn.cellTextHolder).node().getBoundingClientRect().width),ze)}),le.settledY=!0}}}function K(Q,oe){switch(Q.align){case"left":return m.cellPad;case"right":return Q.column.columnWidth-(oe||0)-m.cellPad;case"center":return(Q.column.columnWidth-(oe||0))/2;default:return m.cellPad}}function $(Q){Q.attr("transform",function(oe){var se=oe.rowBlocks[0].auxiliaryBlocks.reduce(function(fe,me){return fe+H(me,1/0)},0),ae=re(oe),le=H(ae,oe.key),_e=le+se;return r(0,_e)}).selectAll("."+m.cn.cellRect).attr("height",function(oe){return Z(re(oe),oe.key).rowHeight})}function U(Q,oe){for(var se=0,ae=oe-1;ae>=0;ae--)se+=q(Q[ae]);return se}function H(Q,oe){for(var se=0,ae=0;ae<Q.rows.length&&Q.rows[ae].rowIndex<oe;ae++)se+=Q.rows[ae].rowHeight;return se}function q(Q){var oe=Q.allRowsHeight;if(oe!==void 0)return oe;for(var se=0,ae=0;ae<Q.rows.length;ae++)se+=Q.rows[ae].rowHeight;return Q.allRowsHeight=se,se}function re(Q){return Q.rowBlocks[Q.page]}function Z(Q,oe){return Q.rows[oe-Q.firstRowIndex]}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(t,N,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,u=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../components/colorscale/attributes"),T=t("../../plots/domain").attributes,e=t("../pie/attributes"),a=t("../sunburst/attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:n({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},A("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:n({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:u({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:m({},{keys:i.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:a.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(t,N,V){var m=t("../../plots/plots");V.name="treemap",V.plot=function(u,A,T,e){m.plotBasePlot(V.name,u,A,T,e)},V.clean=function(u,A,T,e){m.cleanBasePlot(V.name,u,A,T,e)}},{"../../plots/plots":628}],1086:[function(t,N,V){var m=t("../sunburst/calc");V.calc=function(u,A){return m.calc(u,A)},V.crossTraceCalc=function(u){return m._runCrossTraceCalc("treemap",u)}},{"../sunburst/calc":1060}],1087:[function(t,N,V){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("../../components/color"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,a=t("../bar/constants").TEXTPAD,i=t("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;N.exports=function(s,o,b,g){function d(S,P){return m.coerce(s,o,u,S,P)}var f=d("labels"),y=d("parents");if(!f||!f.length||!y||!y.length){o.visible=!1;return}var l=d("values");l&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth");var x=d("tiling.packing");x==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var c=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(c)?"text+label":"label"),d("hovertext"),d("hovertemplate");var M=d("pathbar.visible"),w="auto";e(s,o,g,d,w,{hasPathbar:M,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var p=o.textposition.indexOf("bottom")!==-1,_=d("marker.line.width");_&&d("marker.line.color",g.paper_bgcolor);var h=d("marker.colors"),L=o._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;L?r(s,o,g,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(h||[]).length);var E=o.textfont.size*2;d("marker.pad.t",p?E/4:E),d("marker.pad.l",E/4),d("marker.pad.r",E/4),d("marker.pad.b",p?E:E/4),o._hovered={marker:{line:{width:2,color:A.contrast(g.paper_bgcolor)}}},M&&(d("pathbar.thickness",o.pathbar.textfont.size+2*a),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(o,g,d),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(t,N,V){var m=t("@plotly/d3"),u=t("../sunburst/helpers"),A=t("../bar/uniform_text"),T=A.clearMinTextSize,e=t("../bar/style").resizeText,a=t("./plot_one");N.exports=function(n,r,v,s,o){var b=o.type,g=o.drawDescendants,d=n._fullLayout,f=d["_"+b+"layer"],y,l,x=!v;if(T(b,d),y=f.selectAll("g.trace."+b).data(r,function(M){return M[0].trace.uid}),y.enter().append("g").classed("trace",!0).classed(b,!0),y.order(),!d.uniformtext.mode&&u.hasTransition(v)){s&&(l=s());var c=m.transition().duration(v.duration).ease(v.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});c.each(function(){f.selectAll("g.trace").each(function(M){a(n,M,this,v,g)})})}else y.each(function(M){a(n,M,this,v,g)}),d.uniformtext.mode&&e(n,f.selectAll(".trace"),b);x&&y.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=!0;N.exports=function(o,b,g,d,f){var y=f.barDifY,l=f.width,x=f.height,c=f.viewX,M=f.viewY,w=f.pathSlice,p=f.toMoveInsideSlice,_=f.strTransform,h=f.hasTransition,L=f.handleSlicesExit,E=f.makeUpdateSliceInterpolator,S=f.makeUpdateTextInterpolator,P={},F=o._context.staticPlot,I=o._fullLayout,D=b[0],R=D.trace,O=D.hierarchy,z=l/R._entryDepth,G=n.listPath(g.data,"id"),Y=e(O.copy(),[l,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();Y=Y.filter(function(j){var X=G.indexOf(j.data.id);return X===-1?!1:(j.x0=z*X,j.x1=z*(X+1),j.y0=y,j.y1=y+x,j.onPathbar=!0,!0)}),Y.reverse(),d=d.data(Y,n.getPtId),d.enter().append("g").classed("pathbar",!0),L(d,v,P,[l,x],w),d.order();var ee=d;h&&(ee=ee.transition().each("end",function(){var j=m.select(this);n.setSliceCursor(j,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function(j){j._x0=c(j.x0),j._x1=c(j.x1),j._y0=M(j.y0),j._y1=M(j.y1),j._hoverX=c(j.x1-Math.min(l,x)/2),j._hoverY=M(j.y1-x/2);var X=m.select(this),ie=u.ensureSingle(X,"path","surface",function(U){U.style("pointer-events",F?"none":"all")});h?ie.transition().attrTween("d",function(U){var H=E(U,v,P,[l,x]);return function(q){return w(H(q))}}):ie.attr("d",w),X.call(r,g,o,b,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),ie.call(a,j,R,{hovered:!1}),j._text=(n.getPtLabel(j)||"").split("<br>").join(" ")||"";var he=u.ensureSingle(X,"g","slicetext"),K=u.ensureSingle(he,"text","",function(U){U.attr("data-notex",1)}),$=u.ensureUniformFontSize(o,n.determineTextFont(R,j,I.font,{onPathbar:!0}));K.text(j._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(A.font,$).call(T.convertToTspans,o),j.textBB=A.bBox(K.node()),j.transform=p(j,{fontSize:$.size,onPathbar:!0}),j.transform.fontSize=$.size,h?K.transition().attrTween("transform",function(U){var H=S(U,v,P,[l,x]);return function(q){return _(H(q))}}):K.attr("transform",_(j))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=t("../sunburst/plot").formatSliceLabel,s=!1;N.exports=function(b,g,d,f,y){var l=y.width,x=y.height,c=y.viewX,M=y.viewY,w=y.pathSlice,p=y.toMoveInsideSlice,_=y.strTransform,h=y.hasTransition,L=y.handleSlicesExit,E=y.makeUpdateSliceInterpolator,S=y.makeUpdateTextInterpolator,P=y.prevEntry,F={},I=b._context.staticPlot,D=b._fullLayout,R=g[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,G=O.textposition.indexOf("right")!==-1,Y=O.textposition.indexOf("bottom")!==-1,ee=!Y&&!O.marker.pad.t||Y&&!O.marker.pad.b,j=e(d,[l,x],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}),X=j.descendants(),ie=1/0,he=-1/0;X.forEach(function(q){var re=q.depth;re>=O._maxDepth?(q.x0=q.x1=(q.x0+q.x1)/2,q.y0=q.y1=(q.y0+q.y1)/2):(ie=Math.min(ie,re),he=Math.max(he,re))}),f=f.data(X,n.getPtId),O._maxVisibleLayers=isFinite(he)?he-ie+1:0,f.enter().append("g").classed("slice",!0),L(f,s,F,[l,x],w),f.order();var K=null;if(h&&P){var $=n.getPtId(P);f.each(function(q){K===null&&n.getPtId(q)===$&&(K={x0:q.x0,x1:q.x1,y0:q.y0,y1:q.y1})})}var U=function(){return K||{x0:0,x1:l,y0:0,y1:x}},H=f;return h&&(H=H.transition().each("end",function(){var q=m.select(this);n.setSliceCursor(q,b,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(q){var re=n.isHeader(q,O);q._x0=c(q.x0),q._x1=c(q.x1),q._y0=M(q.y0),q._y1=M(q.y1),q._hoverX=c(q.x1-O.marker.pad.r),q._hoverY=M(Y?q.y1-O.marker.pad.b/2:q.y0+O.marker.pad.t/2);var Z=m.select(this),Q=u.ensureSingle(Z,"path","surface",function(le){le.style("pointer-events",I?"none":"all")});h?Q.transition().attrTween("d",function(le){var _e=E(le,s,U(),[l,x]);return function(fe){return w(_e(fe))}}):Q.attr("d",w),Z.call(r,d,b,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,b,{isTransitioning:b._transitioning}),Q.call(a,q,O,{hovered:!1}),q.x0===q.x1||q.y0===q.y1?q._text="":re?q._text=ee?"":n.getPtLabel(q)||"":q._text=v(q,d,O,g,D)||"";var oe=u.ensureSingle(Z,"g","slicetext"),se=u.ensureSingle(oe,"text","",function(le){le.attr("data-notex",1)}),ae=u.ensureUniformFontSize(b,n.determineTextFont(O,q,D.font));se.text(q._text||" ").classed("slicetext",!0).attr("text-anchor",G?"end":z||re?"start":"middle").call(A.font,ae).call(T.convertToTspans,b),q.textBB=A.bBox(se.node()),q.transform=p(q,{fontSize:ae.size,isHeader:re}),q.transform.fontSize=ae.size,h?se.transition().attrTween("transform",function(le){var _e=S(le,s,U(),[l,x]);return function(fe){return _(_e(fe))}}):se.attr("transform",_(q))}),K}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(t,N,V){N.exports=function m(u,A,T){var e;T.swapXY&&(e=u.x0,u.x0=u.y0,u.y0=e,e=u.x1,u.x1=u.y1,u.y1=e),T.flipX&&(e=u.x0,u.x0=A[0]-u.x1,u.x1=A[0]-e),T.flipY&&(e=u.y0,u.y0=A[1]-u.y1,u.y1=A[1]-e);var a=u.children;if(a)for(var i=0;i<a.length;i++)m(a[i],A,T)}},{}],1093:[function(t,N,V){N.exports={moduleType:"trace",name:"treemap",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(t,N,V){N.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(T,e){function a(i,n){return m.coerce(T,e,u,i,n)}a("treemapcolorway",e.colorway),a("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(t,N,V){var m=t("d3-hierarchy"),u=t("./flip_tree");N.exports=function(e,a,i){var n=i.flipX,r=i.flipY,v=i.packing==="dice-slice",s=i.pad[r?"bottom":"top"],o=i.pad[n?"right":"left"],b=i.pad[n?"left":"right"],g=i.pad[r?"top":"bottom"],d;v&&(d=o,o=s,s=d,d=b,b=g,g=d);var f=m.treemap().tile(A(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(o).paddingRight(b).paddingTop(s).paddingBottom(g).size(v?[a[1],a[0]]:a)(e);return(v||n||r)&&u(f,a,{swapXY:v,flipX:n,flipY:r}),f};function A(T,e){switch(T){case"squarify":return m.treemapSquarify.ratio(e);case"binary":return m.treemapBinary;case"dice":return m.treemapDice;case"slice":return m.treemapSlice;default:return m.treemapSliceDice}}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(t,N,V){var m=t("./draw"),u=t("./draw_descendants");N.exports=function(T,e,a,i){return m(T,e,a,i,{type:"treemap",drawDescendants:u})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(t,N,V){var m=t("@plotly/d3"),u=t("d3-interpolate").interpolate,A=t("../sunburst/helpers"),T=t("../../lib"),e=t("../bar/constants").TEXTPAD,a=t("../bar/plot"),i=a.toMoveInsideBar,n=t("../bar/uniform_text"),r=n.recordMinTextSize,v=t("./constants"),s=t("./draw_ancestors");function o(b){return A.isHierarchyRoot(b)?"":A.getPtId(b)}N.exports=function(g,d,f,y,l){var x=g._fullLayout,c=d[0],M=c.trace,w=M.type,p=w==="icicle",_=c.hierarchy,h=A.findEntryWithLevel(_,M.level),L=m.select(f),E=L.selectAll("g.pathbar"),S=L.selectAll("g.slice");if(!h){E.remove(),S.remove();return}var P=A.isHierarchyRoot(h),F=!x.uniformtext.mode&&A.hasTransition(y),I=A.getMaxDepth(M),D=function(Ve){return Ve.data.depth-h.data.depth<I},R=x._size,O=M.domain,z=R.w*(O.x[1]-O.x[0]),G=R.h*(O.y[1]-O.y[0]),Y=z,ee=M.pathbar.thickness,j=M.marker.line.width+v.gapWithPathbar,X=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?G+j:-(ee+j):0,ie={x0:Y,x1:Y,y0:X,y1:X+ee},he=function(Ve,dt,Ft){var Qt=M.tiling.pad,Ot=function(Lt){return Lt-Qt<=dt.x0},Ct=function(Lt){return Lt+Qt>=dt.x1},jt=function(Lt){return Lt-Qt<=dt.y0},Nt=function(Lt){return Lt+Qt>=dt.y1};return Ve.x0===dt.x0&&Ve.x1===dt.x1&&Ve.y0===dt.y0&&Ve.y1===dt.y1?{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1}:{x0:Ot(Ve.x0-Qt)?0:Ct(Ve.x0-Qt)?Ft[0]:Ve.x0,x1:Ot(Ve.x1+Qt)?0:Ct(Ve.x1+Qt)?Ft[0]:Ve.x1,y0:jt(Ve.y0-Qt)?0:Nt(Ve.y0-Qt)?Ft[1]:Ve.y0,y1:jt(Ve.y1+Qt)?0:Nt(Ve.y1+Qt)?Ft[1]:Ve.y1}},K=null,$={},U={},H=null,q=function(Ve,dt){return dt?$[o(Ve)]:U[o(Ve)]},re=function(Ve,dt,Ft,Qt){if(dt)return $[o(_)]||ie;var Ot=U[M.level]||Ft;return D(Ve)?he(Ve,Ot,Qt):{}};c.hasMultipleRoots&&P&&I++,M._maxDepth=I,M._backgroundColor=x.paper_bgcolor,M._entryDepth=h.data.depth,M._atRootLevel=P;var Z=-z/2+R.l+R.w*(O.x[1]+O.x[0])/2,Q=-G/2+R.t+R.h*(1-(O.y[1]+O.y[0])/2),oe=function(Ve){return Z+Ve},se=function(Ve){return Q+Ve},ae=se(0),le=oe(0),_e=function(Ve){return le+Ve},fe=function(Ve){return ae+Ve};function me(Ve,dt){return Ve+","+dt}var xe=_e(0),ye=function(Ve){Ve.x=Math.max(xe,Ve.x)},be=M.pathbar.edgeshape,ke=function(Ve){var dt=_e(Math.max(Math.min(Ve.x0,Ve.x0),0)),Ft=_e(Math.min(Math.max(Ve.x1,Ve.x1),Y)),Qt=fe(Ve.y0),Ot=fe(Ve.y1),Ct=ee/2,jt={},Nt={};jt.x=dt,Nt.x=Ft,jt.y=Nt.y=(Qt+Ot)/2;var Lt={x:dt,y:Qt},Xe={x:Ft,y:Qt},it={x:Ft,y:Ot},Ye={x:dt,y:Ot};return be===">"?(Lt.x-=Ct,Xe.x-=Ct,it.x-=Ct,Ye.x-=Ct):be==="/"?(it.x-=Ct,Ye.x-=Ct,jt.x-=Ct/2,Nt.x-=Ct/2):be==="\\"?(Lt.x-=Ct,Xe.x-=Ct,jt.x-=Ct/2,Nt.x-=Ct/2):be==="<"&&(jt.x-=Ct,Nt.x-=Ct),ye(Lt),ye(Ye),ye(jt),ye(Xe),ye(it),ye(Nt),"M"+me(Lt.x,Lt.y)+"L"+me(Xe.x,Xe.y)+"L"+me(Nt.x,Nt.y)+"L"+me(it.x,it.y)+"L"+me(Ye.x,Ye.y)+"L"+me(jt.x,jt.y)+"Z"},De=function(Ve){var dt=oe(Ve.x0),Ft=oe(Ve.x1),Qt=se(Ve.y0),Ot=se(Ve.y1),Ct=Ft-dt,jt=Ot-Qt;if(!Ct||!jt)return"";var Nt=0,Lt=Ct>2*Nt&&jt>2*Nt?Nt:0,Xe=function(it,Ye){return Lt?"a"+me(Lt,Lt)+" 0 0 1 "+me(it,Ye):""};return"M"+me(dt,Qt+Lt)+Xe(Lt,-Lt)+"L"+me(Ft-Lt,Qt)+Xe(Lt,Lt)+"L"+me(Ft,Ot-Lt)+Xe(-Lt,Lt)+"L"+me(dt+Lt,Ot)+Xe(-Lt,-Lt)+"Z"},He=function(Ve,dt){var Ft=Ve.x0,Qt=Ve.x1,Ot=Ve.y0,Ct=Ve.y1,jt=Ve.textBB,Nt=function(Mt){return M.textposition.indexOf(Mt)!==-1},Lt=Nt("bottom"),Xe=Nt("top")||dt.isHeader&&!Lt,it=Xe?"start":Lt?"end":"middle",Ye=Nt("right"),Ee=Nt("left")||dt.onPathbar,Ge=Ee?-1:Ye?1:0,Ke=M[p?"tiling":"marker"].pad;if(dt.isHeader){if(Ft+=(p?Ke:Ke.l)-e,Qt-=(p?Ke:Ke.r)-e,Ft>=Qt){var qe=(Ft+Qt)/2;Ft=qe,Qt=qe}var At;Lt?(At=Ct-(p?Ke:Ke.b),Ot<At&&At<Ct&&(Ot=At)):(At=Ot+(p?Ke:Ke.t),Ot<At&&At<Ct&&(Ct=At))}var yt=i(Ft,Qt,Ot,Ct,jt,{isHorizontal:!1,constrained:!0,angle:0,anchor:it,leftToRight:Ge});return yt.fontSize=dt.fontSize,yt.targetX=oe(yt.targetX),yt.targetY=se(yt.targetY),isNaN(yt.targetX)||isNaN(yt.targetY)?{}:(Ft!==Qt&&Ot!==Ct&&r(M.type,yt,x),{scale:yt.scale,rotate:yt.rotate,textX:yt.textX,textY:yt.textY,anchorX:yt.anchorX,anchorY:yt.anchorY,targetX:yt.targetX,targetY:yt.targetY})},Ae=function(Ve,dt){for(var Ft,Qt=0,Ot=Ve;!Ft&&Qt<I;)Qt++,Ot=Ot.parent,Ot?Ft=q(Ot,dt):Qt=I;return Ft||{}},Le=function(Ve,dt,Ft,Qt){var Ot=q(Ve,dt),Ct;if(dt)Ct=ie;else{var jt=q(h,dt);jt?Ct=he(Ve,jt,Qt):Ct={}}return u(Ot,Ct)},Ze=function(Ve,dt,Ft,Qt,Ot){var Ct=q(Ve,dt),jt;if(Ct)jt=Ct;else if(dt)jt=ie;else if(K)if(Ve.parent){var Nt=H||Ft;Nt&&!dt?jt=he(Ve,Nt,Qt):(jt={},T.extendFlat(jt,Ae(Ve,dt)))}else jt=T.extendFlat({},Ve),p&&(Ot.orientation==="h"?Ot.flipX?jt.x0=Ve.x1:jt.x1=0:Ot.flipY?jt.y0=Ve.y1:jt.y1=0);else jt={};return u(jt,{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1})},We=function(Ve,dt,Ft,Qt){var Ot=q(Ve,dt),Ct={},jt=re(Ve,dt,Ft,Qt);T.extendFlat(Ct,{transform:He({x0:jt.x0,x1:jt.x1,y0:jt.y0,y1:jt.y1,textBB:Ve.textBB,_text:Ve._text},{isHeader:A.isHeader(Ve,M)})}),Ot?Ct=Ot:Ve.parent&&T.extendFlat(Ct,Ae(Ve,dt));var Nt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&r(M.type,Nt,x),u(Ct,{transform:{scale:Nt.scale,rotate:Nt.rotate,textX:Nt.textX,textY:Nt.textY,anchorX:Nt.anchorX,anchorY:Nt.anchorY,targetX:Nt.targetX,targetY:Nt.targetY}})},ze=function(Ve,dt,Ft,Qt,Ot){var Ct=Qt[0],jt=Qt[1];F?Ve.exit().transition().each(function(){var Nt=m.select(this),Lt=Nt.select("path.surface");Lt.transition().attrTween("d",function(it){var Ye=Le(it,dt,Ft,[Ct,jt]);return function(Ee){return Ot(Ye(Ee))}});var Xe=Nt.select("g.slicetext");Xe.attr("opacity",0)}).remove():Ve.exit().remove()},Ie=function(Ve){var dt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&r(M.type,dt,x),T.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};F&&(E.each(function(Ve){$[o(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&($[o(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate})}),S.each(function(Ve){U[o(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(U[o(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate}),!K&&A.isEntry(Ve)&&(K=Ve)})),H=l(g,d,h,S,{width:z,height:G,viewX:oe,viewY:se,pathSlice:De,toMoveInsideSlice:He,prevEntry:K,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:We,handleSlicesExit:ze,hasTransition:F,strTransform:Ie}),M.pathbar.visible?s(g,d,h,E,{barDifY:X,width:Y,height:ee,viewX:_e,viewY:fe,pathSlice:ke,toMoveInsideSlice:He,makeUpdateSliceInterpolator:Ze,makeUpdateTextInterpolator:We,handleSlicesExit:ze,hasTransition:F,strTransform:Ie}):E.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/color"),A=t("../../lib"),T=t("../sunburst/helpers"),e=t("../bar/uniform_text").resizeText;function a(n){var r=n._fullLayout._treemaplayer.selectAll(".trace");e(n,r,"treemap"),r.each(function(v){var s=m.select(this),o=v[0],b=o.trace;s.style("opacity",b.opacity),s.selectAll("path.surface").each(function(g){m.select(this).call(i,g,b,{hovered:!1})})})}function i(n,r,v,s){var o=(s||{}).hovered,b=r.data.data,g=b.i,d,f,y=b.color,l=T.isHierarchyRoot(r),x=1;if(o)d=v._hovered.marker.line.color,f=v._hovered.marker.line.width;else if(l&&y===v.root.color)x=100,d="rgba(0,0,0,0)",f=0;else if(d=A.castOption(v,g,"marker.line.color")||u.defaultLine,f=A.castOption(v,g,"marker.line.width")||0,!v._hasColorscale&&!r.onPathbar){var c=v.marker.depthfade;if(c){var M=u.combine(u.addOpacity(v._backgroundColor,.75),y),w;if(c===!0){var p=T.getMaxDepth(v);isFinite(p)?T.isLeaf(r)?w=0:w=v._maxVisibleLayers-(r.data.depth-v._entryDepth):w=r.data.height+1}else w=r.data.depth-v._entryDepth,v._atRootLevel||w++;if(w>0)for(var _=0;_<w;_++){var h=.5*_/w;y=u.combine(u.addOpacity(M,h),y)}}}n.style("stroke-width",f).call(u.fill,y).call(u.stroke,d).style("opacity",x)}N.exports={style:a,styleOne:i}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(t,N,V){var m=t("../box/attributes"),u=t("../../lib/extend").extendFlat,A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat;N.exports={y:m.y,x:m.x,x0:m.x0,y0:m.y0,xhoverformat:A("x"),yhoverformat:A("y"),name:u({},m.name,{}),orientation:u({},m.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,points:u({},m.boxpoints,{}),jitter:u({},m.jitter,{}),pointpos:u({},m.pointpos,{}),width:u({},m.width,{}),marker:m.marker,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate,quartilemethod:m.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(t,N,V){var m=t("../../lib"),u=t("../../plots/cartesian/axes"),A=t("../box/calc"),T=t("./helpers"),e=t("../../constants/numerical").BADNUM;N.exports=function(v,s){var o=A(v,s);if(o[0].t.empty)return o;for(var b=v._fullLayout,g=u.getFromId(v,s[s.orientation==="h"?"xaxis":"yaxis"]),d=1/0,f=-1/0,y=0,l=0,x=0;x<o.length;x++){var c=o[x],M=c.pts.map(T.extractVal),w=c.bandwidth=i(s,c,M),p=c.span=n(s,c,g,w);if(c.min===c.max&&w===0)p=c.span=[c.min,c.max],c.density=[{v:1,t:p[0]}],c.bandwidth=w,y=Math.max(y,1);else{var _=p[1]-p[0],h=Math.ceil(_/(w/3)),L=_/h;if(!isFinite(L)||!isFinite(h))return m.error("Something went wrong with computing the violin span"),o[0].t.empty=!0,o;var E=T.makeKDE(c,s,M);c.density=new Array(h);for(var S=0,P=p[0];P<p[1]+L/2;S++,P+=L){var F=E(P);c.density[S]={v:F,t:P},y=Math.max(y,F)}}l=Math.max(l,M.length),d=Math.min(d,p[0]),f=Math.max(f,p[1])}var I=u.findExtremes(g,[d,f],{padded:!0});if(s._extremes[g._id]=I,s.width)o[0].t.maxKDE=y;else{var D=b._violinScaleGroupStats,R=s.scalegroup,O=D[R];O?(O.maxKDE=Math.max(O.maxKDE,y),O.maxCount=Math.max(O.maxCount,l)):D[R]={maxKDE:y,maxCount:l}}return o[0].t.labels.kde=m._(v,"kde:"),o};function a(r,v,s){var o=Math.min(v,s/1.349);return 1.059*o*Math.pow(r,-.2)}function i(r,v,s){var o=v.max-v.min;if(!o)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,o/1e4);var b=s.length,g=m.stdev(s,b-1,v.mean);return Math.max(a(b,g,v.q3-v.q1),o/100)}function n(r,v,s,o){var b=r.spanmode,g=r.span||[],d=[v.min,v.max],f=[v.min-2*o,v.max+2*o],y;function l(c){var M=g[c],w=s.type==="multicategory"?s.r2c(M):s.d2c(M,0,r[v.valLetter+"calendar"]);return w===e?f[c]:w}b==="soft"?y=f:b==="hard"?y=d:y=[l(0),l(1)];var x={type:"linear",range:y};return u.setConvert(x),x.cleanRange(),y}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(t,N,V){var m=t("../box/cross_trace_calc").setPositionOffset,u=["v","h"];N.exports=function(T,e){for(var a=T.calcdata,i=e.xaxis,n=e.yaxis,r=0;r<u.length;r++){for(var v=u[r],s=v==="h"?n:i,o=[],b=0;b<a.length;b++){var g=a[b],d=g[0].t,f=g[0].trace;f.visible===!0&&f.type==="violin"&&!d.empty&&f.orientation===v&&f.xaxis===i._id&&f.yaxis===n._id&&o.push(b)}m("violin",T,o,s)}}},{"../box/cross_trace_calc":684}],1103:[function(t,N,V){var m=t("../../lib"),u=t("../../components/color"),A=t("../box/defaults"),T=t("./attributes");N.exports=function(a,i,n,r){function v(L,E){return m.coerce(a,i,T,L,E)}function s(L,E){return m.coerce2(a,i,T,L,E)}if(A.handleSampleDefaults(a,i,v,r),i.visible!==!1){v("bandwidth"),v("side");var o=v("width");o||(v("scalegroup",i.name),v("scalemode"));var b=v("span"),g;Array.isArray(b)&&(g="manual"),v("spanmode",g);var d=v("line.color",(a.marker||{}).color||n),f=v("line.width"),y=v("fillcolor",u.addOpacity(i.line.color,.5));A.handlePointsDefaults(a,i,v,{prefix:""});var l=s("box.width"),x=s("box.fillcolor",y),c=s("box.line.color",d),M=s("box.line.width",f),w=v("box.visible",Boolean(l||x||c||M));w||(i.box={visible:!1});var p=s("meanline.color",d),_=s("meanline.width",f),h=v("meanline.visible",Boolean(p||_));h||(i.meanline={visible:!1}),v("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(t,N,V){var m=t("../../lib"),u={gaussian:function(A){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*A*A)}};V.makeKDE=function(A,T,e){var a=e.length,i=u.gaussian,n=A.bandwidth,r=1/(a*n);return function(v){for(var s=0,o=0;o<a;o++)s+=i((v-e[o])/n);return r*s}},V.getPositionOnKdePath=function(A,T,e){var a,i;T.orientation==="h"?(a="y",i="x"):(a="x",i="y");var n=m.findPointOnPath(A.path,e,i,{pathLength:A.pathLength}),r=A.posCenterPx,v=n[a],s=T.side==="both"?2*r-v:r;return[v,s]},V.getKdeValue=function(A,T,e){var a=A.pts.map(V.extractVal),i=V.makeKDE(A,T,a);return i(e)/A.posDensityScale},V.extractVal=function(A){return A.v}},{"../../lib":515}],1105:[function(t,N,V){var m=t("../../components/color"),u=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../box/hover"),e=t("./helpers");N.exports=function(i,n,r,v,s){s||(s={});var o=s.hoverLayer,b=i.cd,g=b[0].trace,d=g.hoveron,f=d.indexOf("violins")!==-1,y=d.indexOf("kde")!==-1,l=[],x,c;if(f||y){var M=T.hoverOnBoxes(i,n,r,v);if(y&&M.length>0){var w=i.xa,p=i.ya,_,h,L,E,S;g.orientation==="h"?(S=n,_="y",L=p,h="x",E=w):(S=r,_="x",L=w,h="y",E=p);var P=b[i.index];if(S>=P.span[0]&&S<=P.span[1]){var F=u.extendFlat({},i),I=E.c2p(S,!0),D=e.getKdeValue(P,g,S),R=e.getPositionOnKdePath(P,g,I),O=L._offset,z=L._length;F[_+"0"]=R[0],F[_+"1"]=R[1],F[h+"0"]=F[h+"1"]=I,F[h+"Label"]=h+": "+A.hoverLabelText(E,S,g[h+"hoverformat"])+", "+b[0].t.labels.kde+" "+D.toFixed(3);for(var G=0,Y=0;Y<M.length;Y++)if(M[Y].attr==="med"){G=Y;break}F.spikeDistance=M[G].spikeDistance;var ee=_+"Spike";F[ee]=M[G][ee],M[G].spikeDistance=void 0,M[G][ee]=void 0,F.hovertemplate=!1,l.push(F),c={},c[_+"1"]=u.constrain(O+R[0],O,O+z),c[_+"2"]=u.constrain(O+R[1],O,O+z),c[h+"1"]=c[h+"2"]=E._offset+I}}f&&(l=l.concat(M))}d.indexOf("points")!==-1&&(x=T.hoverOnPoints(i,n,r));var j=o.selectAll(".violinline-"+g.uid).data(c?[0]:[]);return j.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),j.exit().remove(),j.attr(c).call(m.stroke,i.color),v==="closest"?x?[x]:l:(x&&l.push(x),l)}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../box/select"),moduleType:"trace",name:"violin",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(t,N,V){var m=t("../box/layout_attributes"),u=t("../../lib").extendFlat;N.exports={violinmode:u({},m.boxmode,{}),violingap:u({},m.boxgap,{}),violingroupgap:u({},m.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes"),A=t("../box/layout_defaults");N.exports=function(e,a,i){function n(r,v){return m.coerce(e,a,u,r,v)}A._supply(e,a,i,n,"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../components/drawing"),T=t("../box/plot"),e=t("../scatter/line_points"),a=t("./helpers");N.exports=function(n,r,v,s){var o=n._fullLayout,b=r.xaxis,g=r.yaxis;function d(f,y){var l=e(f,{xaxis:b,yaxis:g,trace:y,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return A.smoothopen(l[0],1)}u.makeTraceGroups(s,v,"trace violins").each(function(f){var y=m.select(this),l=f[0],x=l.t,c=l.trace;if(c.visible!==!0||x.empty){y.remove();return}var M=x.bPos,w=x.bdPos,p=r[x.valLetter+"axis"],_=r[x.posLetter+"axis"],h=c.side==="both",L=h||c.side==="positive",E=h||c.side==="negative",S=y.selectAll("path.violin").data(u.identity);S.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),S.exit().remove(),S.each(function(G){var Y=m.select(this),ee=G.density,j=ee.length,X=_.c2l(G.pos+M,!0),ie=_.l2p(X),he;if(c.width)he=x.maxKDE/w;else{var K=o._violinScaleGroupStats[c.scalegroup];he=c.scalemode==="count"?K.maxKDE/w*(K.maxCount/G.pts.length):K.maxKDE/w}var $,U,H,q,re,Z,Q;if(L){for(Z=new Array(j),q=0;q<j;q++)Q=Z[q]={},Q[x.posLetter]=X+ee[q].v/he,Q[x.valLetter]=p.c2l(ee[q].t,!0);$=d(Z,c)}if(E){for(Z=new Array(j),re=0,q=j-1;re<j;re++,q--)Q=Z[re]={},Q[x.posLetter]=X-ee[q].v/he,Q[x.valLetter]=p.c2l(ee[q].t,!0);U=d(Z,c)}if(h)H=$+"L"+U.substr(1)+"Z";else{var oe=[ie,p.c2p(ee[0].t)],se=[ie,p.c2p(ee[j-1].t)];c.orientation==="h"&&(oe.reverse(),se.reverse()),L?H="M"+oe+"L"+$.substr(1)+"L"+se:H="M"+se+"L"+U.substr(1)+"L"+oe}Y.attr("d",H),G.posCenterPx=ie,G.posDensityScale=he*w,G.path=Y.node(),G.pathLength=G.path.getTotalLength()/(h?2:1)});var P=c.box,F=P.width,I=(P.line||{}).width,D,R;h?(D=w*F,R=0):L?(D=[0,w*F/2],R=I*{x:1,y:-1}[x.posLetter]):(D=[w*F/2,0],R=I*{x:-1,y:1}[x.posLetter]),T.plotBoxAndWhiskers(y,{pos:_,val:p},c,{bPos:M,bdPos:D,bPosPxOffset:R}),T.plotBoxMean(y,{pos:_,val:p},c,{bPos:M,bdPos:D,bPosPxOffset:R});var O;!c.box.visible&&c.meanline.visible&&(O=u.identity);var z=y.selectAll("path.meanline").data(O||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),z.exit().remove(),z.each(function(G){var Y=p.c2p(G.mean,!0),ee=a.getPositionOnKdePath(G,c,Y);m.select(this).attr("d",c.orientation==="h"?"M"+Y+","+ee[0]+"V"+ee[1]:"M"+ee[0]+","+Y+"H"+ee[1])}),T.plotPoints(y,{x:b,y:g},c,x)})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/color"),A=t("../scatter/style").stylePoints;N.exports=function(e){var a=m.select(e).selectAll("g.trace.violins");a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var n=i[0].trace,r=m.select(this),v=n.box||{},s=v.line||{},o=n.meanline||{},b=o.width;r.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(u.stroke,n.line.color).call(u.fill,n.fillcolor),r.selectAll("path.box").style("stroke-width",s.width+"px").call(u.stroke,s.color).call(u.fill,v.fillcolor);var g={"stroke-width":b+"px","stroke-dasharray":2*b+"px,"+b+"px"};r.selectAll("path.mean").style(g).call(u.stroke,o.color),r.selectAll("path.meanline").style(g).call(u.stroke,o.color),A(r,n,e)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(t,N,V){var m=t("../../components/colorscale/attributes"),u=t("../isosurface/attributes"),A=t("../surface/attributes"),T=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll,i=N.exports=a(e({x:u.x,y:u.y,z:u.z,value:u.value,isomin:u.isomin,isomax:u.isomax,surface:u.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:u.slices,caps:u.caps,text:u.text,hovertext:u.hovertext,xhoverformat:u.xhoverformat,yhoverformat:u.yhoverformat,zhoverformat:u.zhoverformat,valuehoverformat:u.valuehoverformat,hovertemplate:u.hovertemplate},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:u.colorbar,opacity:u.opacity,opacityscale:A.opacityscale,lightposition:u.lightposition,lighting:u.lighting,flatshading:u.flatshading,contour:u.contour,hoverinfo:e({},T.hoverinfo),showlegend:e({},T.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(t,N,V){var m=t("../../../stackgl_modules").gl_mesh3d,u=t("../../lib/gl_format_color").parseColorScale,A=t("../../lib/str2rgbarray"),T=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),a=t("../isosurface/convert").findNearestOnAxis,i=t("../isosurface/convert").generateIsoMeshes;function n(s,o,b){this.scene=s,this.uid=b,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(s){if(s.object===this.mesh){var o=s.data.index,b=this.data._meshX[o],g=this.data._meshY[o],d=this.data._meshZ[o],f=this.data._Ys.length,y=this.data._Zs.length,l=a(b,this.data._Xs).id,x=a(g,this.data._Ys).id,c=a(d,this.data._Zs).id,M=s.index=c+y*x+y*f*l;s.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[M]!==void 0?s.textLabel=w[M]:w&&(s.textLabel=w),!0}},r.update=function(s){var o=this.scene,b=o.fullSceneLayout;this.data=i(s);function g(x,c,M,w){return c.map(function(p){return x.d2l(p,0,w)*M})}var d=e(g(b.xaxis,s._meshX,o.dataScale[0],s.xcalendar),g(b.yaxis,s._meshY,o.dataScale[1],s.ycalendar),g(b.zaxis,s._meshZ,o.dataScale[2],s.zcalendar)),f=e(s._meshI,s._meshJ,s._meshK),y={positions:d,cells:f,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:A(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},l=T(s);y.vertexIntensity=s._meshIntensity,y.vertexIntensityBounds=[l.min,l.max],y.colormap=u(s),this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(s,o){var b=s.glplot.gl,g=m({gl:b}),d=new n(s,g,o.uid);return g._trace=d,d.update(o),s.glplot.add(g),d}N.exports=v},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(t,N,V){var m=t("../../lib"),u=t("./attributes"),A=t("../isosurface/defaults").supplyIsoDefaults,T=t("../surface/defaults").opacityscaleDefaults;N.exports=function(a,i,n,r){function v(s,o){return m.coerce(a,i,u,s,o)}A(a,i,n,r,v),T(a,i,r,v)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(t,N,V){N.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"volume",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(t,N,V){var m=t("../bar/attributes"),u=t("../scatter/attributes").line,A=t("../../plots/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");function v(s){return{marker:{color:n({},m.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},m.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},m.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}N.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:m.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:n({},A.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label"])}),text:m.text,textposition:m.textposition,insidetextanchor:m.insidetextanchor,textangle:m.textangle,textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:m.orientation,offset:m.offset,width:m.width,increasing:v(),decreasing:v(),totals:v(),connector:{line:{color:n({},u.color,{dflt:r.defaultLine}),width:n({},u.width,{editType:"plot"}),dash:u.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(t,N,V){var m=t("../../plots/cartesian/axes"),u=t("../../plots/cartesian/align_period"),A=t("../../lib").mergeArray,T=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;function a(n){return n==="a"||n==="absolute"}function i(n){return n==="t"||n==="total"}N.exports=function(r,v){var s=m.getFromId(r,v.xaxis||"x"),o=m.getFromId(r,v.yaxis||"y"),b,g,d,f,y,l;v.orientation==="h"?(b=s.makeCalcdata(v,"x"),d=o.makeCalcdata(v,"y"),f=u(v,o,"y",d),y=!!v.yperiodalignment,l="y"):(b=o.makeCalcdata(v,"y"),d=s.makeCalcdata(v,"x"),f=u(v,s,"x",d),y=!!v.xperiodalignment,l="x"),g=f.vals;for(var x=Math.min(g.length,b.length),c=new Array(x),M=0,w,p=!1,_=0;_<x;_++){var h=b[_]||0,L=!1;(b[_]!==e||i(v.measure[_])||a(v.measure[_]))&&_+1<x&&(b[_+1]!==e||i(v.measure[_+1])||a(v.measure[_+1]))&&(L=!0);var E=c[_]={i:_,p:g[_],s:h,rawS:h,cNext:L};a(v.measure[_])?(M=E.s,E.isSum=!0,E.dir="totals",E.s=M):i(v.measure[_])?(E.isSum=!0,E.dir="totals",E.s=M):(E.isSum=!1,E.dir=E.rawS<0?"decreasing":"increasing",w=E.s,E.s=M+w,M+=w),E.dir==="totals"&&(p=!0),y&&(c[_].orig_p=d[_],c[_][l+"End"]=f.ends[_],c[_][l+"Start"]=f.starts[_]),v.ids&&(E.id=String(v.ids[_])),E.v=(v.base||0)+M}return c.length&&(c[0].hasTotals=p),A(v.text,c,"tx"),A(v.hovertext,c,"htx"),T(c,v),c}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(t,N,V){N.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(t,N,V){var m=t("../bar/cross_trace_calc").setGroupPositions;N.exports=function(A,T){var e=A._fullLayout,a=A._fullData,i=A.calcdata,n=T.xaxis,r=T.yaxis,v=[],s=[],o=[],b,g;for(g=0;g<a.length;g++){var d=a[g];d.visible===!0&&d.xaxis===n._id&&d.yaxis===r._id&&d.type==="waterfall"&&(b=i[g],d.orientation==="h"?o.push(b):s.push(b),v.push(b))}var f={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(m(A,n,r,s,f),m(A,r,n,o,f),g=0;g<v.length;g++){b=v[g];for(var y=0;y<b.length;y++){var l=b[y];l.isSum===!1&&(l.s0+=y===0?0:b[y-1].s),y+1<b.length&&(b[y].nextP0=b[y+1].p0,b[y].nextS0=b[y+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(t,N,V){var m=t("../../lib"),u=t("../bar/defaults").handleGroupingDefaults,A=t("../bar/defaults").handleText,T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./attributes"),i=t("../../components/color"),n=t("../../constants/delta.js"),r=n.INCREASING.COLOR,v=n.DECREASING.COLOR,s="#4499FF";function o(d,f,y){d(f+".marker.color",y),d(f+".marker.line.color",i.defaultLine),d(f+".marker.line.width")}function b(d,f,y,l){function x(_,h){return m.coerce(d,f,a,_,h)}var c=T(d,f,l,x);if(!c){f.visible=!1;return}e(d,f,l,x),x("xhoverformat"),x("yhoverformat"),x("measure"),x("orientation",f.x&&!f.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var M=x("textposition");A(d,f,l,x,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f.textposition!=="none"&&(x("texttemplate"),f.texttemplate||x("textinfo")),o(x,"increasing",r),o(x,"decreasing",v),o(x,"totals",s);var w=x("connector.visible");if(w){x("connector.mode");var p=x("connector.line.width");p&&(x("connector.line.color"),x("connector.line.dash"))}}function g(d,f){var y,l;function x(M){return m.coerce(l._input,l,a,M)}if(f.waterfallmode==="group")for(var c=0;c<d.length;c++)l=d[c],y=l._input,u(y,l,f,x)}N.exports={supplyDefaults:b,crossTraceDefaults:g}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(t,N,V){N.exports=function(u,A){return u.x="xVal"in A?A.xVal:A.x,u.y="yVal"in A?A.yVal:A.y,"initial"in A&&(u.initial=A.initial),"delta"in A&&(u.delta=A.delta),"final"in A&&(u.final=A.final),A.xa&&(u.xaxis=A.xa),A.ya&&(u.yaxis=A.ya),u}},{}],1121:[function(t,N,V){var m=t("../../plots/cartesian/axes").hoverLabelText,u=t("../../components/color").opacity,A=t("../bar/hover").hoverOnBars,T=t("../../constants/delta.js"),e={increasing:T.INCREASING.SYMBOL,decreasing:T.DECREASING.SYMBOL};N.exports=function(n,r,v,s,o){var b=A(n,r,v,s,o);if(!b)return;var g=b.cd,d=g[0].trace,f=d.orientation==="h",y=f?"x":"y",l=f?n.xa:n.ya;function x(P){return m(l,P,d[y+"hoverformat"])}var c=b.index,M=g[c],w=M.isSum?M.b+M.s:M.rawS;if(!M.isSum){b.initial=M.b+M.s-w,b.delta=w,b.final=b.initial+b.delta;var p=x(Math.abs(b.delta));b.deltaLabel=w<0?"("+p+")":p,b.finalLabel=x(b.final),b.initialLabel=x(b.initial)}var _=M.hi||d.hoverinfo,h=[];if(_&&_!=="none"&&_!=="skip"){var L=_==="all",E=_.split("+"),S=function(P){return L||E.indexOf(P)!==-1};M.isSum||(S("final")&&(f?!S("x"):!S("y"))&&h.push(b.finalLabel),S("delta")&&(w<0?h.push(b.deltaLabel+" "+e.decreasing):h.push(b.deltaLabel+" "+e.increasing)),S("initial")&&h.push("Initial: "+b.initialLabel))}return h.length&&(b.extraText=h.join("<br>")),b.color=a(d,M),[b]};function a(i,n){var r=i[n.dir].marker,v=r.color,s=r.line.color,o=r.line.width;if(u(v))return v;if(u(s)&&o)return s}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(t,N,V){N.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(t,N,V){N.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(t,N,V){var m=t("../../lib"),u=t("./layout_attributes");N.exports=function(A,T,e){var a=!1;function i(v,s){return m.coerce(A,T,u,v,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="waterfall"){a=!0;break}}a&&(i("waterfallmode"),i("waterfallgap",.2),i("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../lib"),A=t("../../components/drawing"),T=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),a=t("../bar/uniform_text").clearMinTextSize;N.exports=function(v,s,o,b){var g=v._fullLayout;a("waterfall",g),e.plot(v,s,o,b,{mode:g.waterfallmode,norm:g.waterfallmode,gap:g.waterfallgap,groupgap:g.waterfallgroupgap}),i(v,s,o,b)};function i(r,v,s,o){var b=v.xaxis,g=v.yaxis;u.makeTraceGroups(o,s,"trace bars").each(function(d){var f=m.select(this),y=d[0].trace,l=u.ensureSingle(f,"g","lines");if(!y.connector||!y.connector.visible){l.remove();return}var x=y.orientation==="h",c=y.connector.mode,M=l.selectAll("g.line").data(u.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var w=M.size();M.each(function(p,_){if(!(_!==w-1&&!p.cNext)){var h=n(p,b,g,x),L=h[0],E=h[1],S="";L[0]!==T&&E[0]!==T&&L[1]!==T&&E[1]!==T&&(c==="spanning"&&!p.isSum&&_>0&&(x?S+="M"+L[0]+","+E[1]+"V"+E[0]:S+="M"+L[1]+","+E[0]+"H"+L[0]),c!=="between"&&(p.isSum||_<w-1)&&(x?S+="M"+L[1]+","+E[0]+"V"+E[1]:S+="M"+L[0]+","+E[1]+"H"+L[1]),L[2]!==T&&E[2]!==T&&(x?S+="M"+L[1]+","+E[1]+"V"+E[2]:S+="M"+L[1]+","+E[1]+"H"+L[2])),S===""&&(S="M0,0Z"),u.ensureSingle(m.select(this),"path").attr("d",S).call(A.setClipUrl,v.layerClipId,r)}})})}function n(r,v,s,o){var b=[],g=[],d=o?v:s,f=o?s:v;return b[0]=d.c2p(r.s0,!0),g[0]=f.c2p(r.p0,!0),b[1]=d.c2p(r.s1,!0),g[1]=f.c2p(r.p1,!0),b[2]=d.c2p(r.nextS0,!0),g[2]=f.c2p(r.nextP0,!0),o?[b,g]:[g,b]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(t,N,V){var m=t("@plotly/d3"),u=t("../../components/drawing"),A=t("../../components/color"),T=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),a=t("../bar/uniform_text").resizeText,i=e.styleTextPoints;function n(r,v,s){var o=s||m.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");a(r,o,"waterfall"),o.style("opacity",function(b){return b[0].trace.opacity}),o.each(function(b){var g=m.select(this),d=b[0].trace;g.selectAll(".point > path").each(function(f){if(!f.isBlank){var y=d[f.dir].marker;m.select(this).call(A.fill,y.color).call(A.stroke,y.line.color).call(u.dashLine,y.line.dash,y.line.width).style("opacity",d.selectedpoints&&!f.selected?T:1)}}),i(g,d,r),g.selectAll(".lines").each(function(){var f=d.connector.line;u.lineGroupStyle(m.select(this).selectAll("path"),f.width,f.color,f.dash)})})}N.exports={style:n}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(t,N,V){var m=t("../plots/cartesian/axes"),u=t("../lib"),A=t("../plot_api/plot_schema"),T=t("./helpers").pointsAccessorFunction,e=t("../constants/numerical").BADNUM;V.moduleType="transform",V.name="aggregate";var a=V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=a.aggregations;V.supplyDefaults=function(b,g){var d={},f;function y(P,F){return u.coerce(b,d,a,P,F)}var l=y("enabled");if(!l)return d;var x=A.findArrayAttributes(g),c={};for(f=0;f<x.length;f++)c[x[f]]=1;var M=y("groups");if(!Array.isArray(M)){if(!c[M])return d.enabled=!1,d;c[M]=0}var w=b.aggregations||[],p=d.aggregations=new Array(w.length),_;function h(P,F){return u.coerce(w[f],_,i,P,F)}for(f=0;f<w.length;f++){_={_index:f};var L=h("target"),E=h("func"),S=h("enabled");S&&L&&(c[L]||E==="count"&&c[L]===void 0)?(E==="stddev"&&h("funcmode"),c[L]=0,p[f]=_):p[f]={enabled:!1,_index:f}}for(f=0;f<x.length;f++)c[x[f]]&&p.push({target:x[f],func:i.func.dflt,enabled:!0,_index:-1});return d},V.calcTransform=function(b,g,d){if(!!d.enabled){var f=d.groups,y=u.getTargetArray(g,{target:f});if(!!y){var l,x,c,M,w={},p={},_=[],h=T(g.transforms,d),L=y.length;for(g._length&&(L=Math.min(L,g._length)),l=0;l<L;l++)x=y[l],c=w[x],c===void 0?(w[x]=_.length,M=[l],_.push(M),p[w[x]]=h(l)):(_[c].push(l),p[w[x]]=(p[w[x]]||[]).concat(h(l)));d._indexToPoints=p;var E=d.aggregations;for(l=0;l<E.length;l++)n(b,g,_,E[l]);typeof f=="string"&&n(b,g,_,{target:f,func:"first",enabled:!0}),g._length=_.length}}};function n(b,g,d,f){if(!!f.enabled){for(var y=f.target,l=u.nestedProperty(g,y),x=l.get(),c=m.getDataConversions(b,g,y,x),M=r(f,c),w=new Array(d.length),p=0;p<d.length;p++)w[p]=M(x,d[p]);l.set(w),f.func==="count"&&u.pushUnique(g._arrayAttrs,y)}}function r(b,g){var d=b.func,f=g.d2c,y=g.c2d;switch(d){case"count":return v;case"first":return s;case"last":return o;case"sum":return function(l,x){for(var c=0,M=0;M<x.length;M++){var w=f(l[x[M]]);w!==e&&(c+=w)}return y(c)};case"avg":return function(l,x){for(var c=0,M=0,w=0;w<x.length;w++){var p=f(l[x[w]]);p!==e&&(c+=p,M++)}return M?y(c/M):e};case"min":return function(l,x){for(var c=1/0,M=0;M<x.length;M++){var w=f(l[x[M]]);w!==e&&(c=Math.min(c,w))}return c===1/0?e:y(c)};case"max":return function(l,x){for(var c=-1/0,M=0;M<x.length;M++){var w=f(l[x[M]]);w!==e&&(c=Math.max(c,w))}return c===-1/0?e:y(c)};case"range":return function(l,x){for(var c=1/0,M=-1/0,w=0;w<x.length;w++){var p=f(l[x[w]]);p!==e&&(c=Math.min(c,p),M=Math.max(M,p))}return M===-1/0||c===1/0?e:y(M-c)};case"change":return function(l,x){var c=f(l[x[0]]),M=f(l[x[x.length-1]]);return c===e||M===e?e:y(M-c)};case"median":return function(l,x){for(var c=[],M=0;M<x.length;M++){var w=f(l[x[M]]);w!==e&&c.push(w)}if(!c.length)return e;c.sort(u.sorterAsc);var p=(c.length-1)/2;return y((c[Math.floor(p)]+c[Math.ceil(p)])/2)};case"mode":return function(l,x){for(var c={},M=0,w=e,p=0;p<x.length;p++){var _=f(l[x[p]]);if(_!==e){var h=c[_]=(c[_]||0)+1;h>M&&(M=h,w=_)}}return M?y(w):e};case"rms":return function(l,x){for(var c=0,M=0,w=0;w<x.length;w++){var p=f(l[x[w]]);p!==e&&(c+=p*p,M++)}return M?y(Math.sqrt(c/M)):e};case"stddev":return function(l,x){var c=0,M=0,w=1,p=e,_;for(_=0;_<x.length&&p===e;_++)p=f(l[x[_]]);if(p===e)return e;for(;_<x.length;_++){var h=f(l[x[_]]);if(h!==e){var L=h-p;c+=L,M+=L*L,w++}}var E=b.funcmode==="sample"?w-1:w;return E?Math.sqrt((M-c*c/w)/E):0}}}function v(b,g){return g.length}function s(b,g){return b[g[0]]}function o(b,g){return b[g[g.length-1]]}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(t,N,V){var m=t("../lib"),u=t("../registry"),A=t("../plots/cartesian/axes"),T=t("./helpers").pointsAccessorFunction,e=t("../constants/filter_ops"),a=e.COMPARISON_OPS,i=e.INTERVAL_OPS,n=e.SET_OPS;V.moduleType="transform",V.name="filter",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(i).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},V.supplyDefaults=function(v){var s={};function o(f,y){return m.coerce(v,s,V.attributes,f,y)}var b=o("enabled");if(b){var g=o("target");if(m.isArrayOrTypedArray(g)&&g.length===0)return s.enabled=!1,s;o("preservegaps"),o("operation"),o("value");var d=u.getComponentMethod("calendars","handleDefaults");d(v,s,"valuecalendar",null),d(v,s,"targetcalendar",null)}return s},V.calcTransform=function(v,s,o){if(!o.enabled)return;var b=m.getTargetArray(s,o);if(!b)return;var g=o.target,d=b.length;s._length&&(d=Math.min(d,s._length));var f=o.targetcalendar,y=s._arrayAttrs,l=o.preservegaps;if(typeof g=="string"){var x=m.nestedProperty(s,g+"calendar").get();x&&(f=x)}var c=A.getDataToCoordFunc(v,s,g,b),M=r(o,c,f),w={},p={},_=0;function h(I,D){for(var R=0;R<y.length;R++){var O=m.nestedProperty(s,y[R]);I(O,D)}}var L,E;l?(L=function(I){w[I.astr]=m.extendDeep([],I.get()),I.set(new Array(d))},E=function(I,D){var R=w[I.astr][D];I.get()[D]=R}):(L=function(I){w[I.astr]=m.extendDeep([],I.get()),I.set([])},E=function(I,D){var R=w[I.astr][D];I.get().push(R)}),h(L);for(var S=T(s.transforms,o),P=0;P<d;P++){var F=M(b[P]);F?(h(E,P),p[_++]=S(P)):l&&_++}o._indexToPoints=p,s._length=_};function r(v,s,o){var b=v.operation,g=v.value,d=Array.isArray(g);function f(c){return c.indexOf(b)!==-1}var y=function(c){return s(c,0,v.valuecalendar)},l=function(c){return s(c,0,o)},x;switch(f(a)?x=y(d?g[0]:g):f(i)?x=d?[y(g[0]),y(g[1])]:[y(g),y(g)]:f(n)&&(x=d?g.map(y):[y(g)]),b){case"=":return function(c){return l(c)===x};case"!=":return function(c){return l(c)!==x};case"<":return function(c){return l(c)<x};case"<=":return function(c){return l(c)<=x};case">":return function(c){return l(c)>x};case">=":return function(c){return l(c)>=x};case"[]":return function(c){var M=l(c);return M>=x[0]&&M<=x[1]};case"()":return function(c){var M=l(c);return M>x[0]&&M<x[1]};case"[)":return function(c){var M=l(c);return M>=x[0]&&M<x[1]};case"(]":return function(c){var M=l(c);return M>x[0]&&M<=x[1]};case"][":return function(c){var M=l(c);return M<=x[0]||M>=x[1]};case")(":return function(c){var M=l(c);return M<x[0]||M>x[1]};case"](":return function(c){var M=l(c);return M<=x[0]||M>x[1]};case")[":return function(c){var M=l(c);return M<x[0]||M>=x[1]};case"{}":return function(c){return x.indexOf(l(c))!==-1};case"}{":return function(c){return x.indexOf(l(c))===-1}}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(t,N,V){var m=t("../lib"),u=t("../plot_api/plot_schema"),A=t("../plots/plots"),T=t("./helpers").pointsAccessorFunction;V.moduleType="transform",V.name="groupby",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},V.supplyDefaults=function(a,i,n){var r,v={};function s(y,l){return m.coerce(a,v,V.attributes,y,l)}var o=s("enabled");if(!o)return v;s("groups"),s("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var b=a.styles,g=v.styles=[];if(b)for(r=0;r<b.length;r++){var d=g[r]={};m.coerce(b[r],g[r],V.attributes.styles,"target");var f=m.coerce(b[r],g[r],V.attributes.styles,"value");m.isPlainObject(f)?d.value=m.extendDeep({},f):f&&delete d.value}return v},V.transform=function(a,i){var n,r,v,s=[];for(r=0;r<a.length;r++)for(n=e(a[r],i),v=0;v<n.length;v++)s.push(n[v]);return s};function e(a,i){var n,r,v,s,o,b,g,d,f,y,l=i.transform,x=i.transformIndex,c=a.transforms[x].groups,M=T(a.transforms,l);if(!m.isArrayOrTypedArray(c)||c.length===0)return[a];var w=m.filterUnique(c),p=new Array(w.length),_=c.length,h=u.findArrayAttributes(a),L=l.styles||[],E={};for(n=0;n<L.length;n++)E[L[n].target]=L[n].value;l.styles&&(y=m.keyedContainer(l,"styles","target","value.name"));var S={},P={};for(n=0;n<w.length;n++){b=w[n],S[b]=n,P[b]=0,g=p[n]=m.extendDeepNoArrays({},a),g._group=b,g.transforms[x]._indexToPoints={};var F=null;for(y&&(F=y.get(b)),F||F===""?g.name=F:g.name=m.templateString(l.nameformat,{trace:a.name,group:b}),d=g.transforms,g.transforms=[],r=0;r<d.length;r++)g.transforms[r]=m.extendDeepNoArrays({},d[r]);for(r=0;r<h.length;r++)m.nestedProperty(g,h[r]).set([])}for(v=0;v<h.length;v++){for(s=h[v],r=0,f=[];r<w.length;r++)f[r]=m.nestedProperty(p[r],s).get();for(o=m.nestedProperty(a,s).get(),r=0;r<_;r++)f[S[c[r]]].push(o[r])}for(r=0;r<_;r++){g=p[S[c[r]]];var I=g.transforms[x]._indexToPoints;I[P[c[r]]]=M(r),P[c[r]]++}for(n=0;n<w.length;n++)b=w[n],g=p[n],A.clearExpandedTraceDefaultColors(g),g=m.extendDeepNoArrays(g,E[b]||{});return p}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(t,N,V){V.pointsAccessorFunction=function(m,u){for(var A,T,e=0;e<m.length&&(A=m[e],A!==u);e++)!A._indexToPoints||A.enabled===!1||(T=A._indexToPoints);var a=T?function(i){return T[i]}:function(i){return[i]};return a}},{}],1131:[function(t,N,V){var m=t("../lib"),u=t("../plots/cartesian/axes"),A=t("./helpers").pointsAccessorFunction,T=t("../constants/numerical").BADNUM;V.moduleType="transform",V.name="sort",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},V.supplyDefaults=function(i){var n={};function r(s,o){return m.coerce(i,n,V.attributes,s,o)}var v=r("enabled");return v&&(r("target"),r("order")),n},V.calcTransform=function(i,n,r){if(!!r.enabled){var v=m.getTargetArray(n,r);if(!!v){var s=r.target,o=v.length;n._length&&(o=Math.min(o,n._length));var b=n._arrayAttrs,g=u.getDataToCoordFunc(i,n,s,v),d=e(r,v,g,o),f=A(n.transforms,r),y={},l,x;for(l=0;l<b.length;l++){var c=m.nestedProperty(n,b[l]),M=c.get(),w=new Array(o);for(x=0;x<o;x++)w[x]=M[d[x]];c.set(w)}for(x=0;x<o;x++)y[x]=f(d[x]);r._indexToPoints=y,n._length=o}}};function e(i,n,r,v){var s=new Array(v),o=new Array(v),b;for(b=0;b<v;b++)s[b]={v:n[b],i:b};for(s.sort(a(i,r)),b=0;b<v;b++)o[b]=s[b].i;return o}function a(i,n){switch(i.order){case"ascending":return function(r,v){var s=n(r.v),o=n(v.v);return s===T?1:o===T?-1:s-o};case"descending":return function(r,v){var s=n(r.v),o=n(v.v);return s===T?1:o===T?-1:o-s}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(t,N,V){V.version="2.16.3"},{}],1133:[function(t,N,V){(function(m){(function(){(function(u){if(typeof V=="object"&&typeof N<"u")N.exports=u();else{var A;typeof window<"u"?A=window:typeof m<"u"?A=m:typeof self<"u"?A=self:A=this,A.stackgl=u()}})(function(){return function(){function u(A,T,e){function a(r,v){if(!T[r]){if(!A[r]){var s=typeof t=="function"&&t;if(!v&&s)return s(r,!0);if(i)return i(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var b=T[r]={exports:{}};A[r][0].call(b.exports,function(g){var d=A[r][1][g];return a(d||g)},b,b.exports,u,A,T,e)}return T[r].exports}for(var i=typeof t=="function"&&t,n=0;n<e.length;n++)a(e[n]);return a}return u}()({1:[function(u,A,T){T.byteLength=o,T.toByteArray=g,T.fromByteArray=y;for(var e=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,v=n.length;r<v;++r)e[r]=n[r],a[n.charCodeAt(r)]=r;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function s(l){var x=l.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=l.indexOf("=");c===-1&&(c=x);var M=c===x?0:4-c%4;return[c,M]}function o(l){var x=s(l),c=x[0],M=x[1];return(c+M)*3/4-M}function b(l,x,c){return(x+c)*3/4-c}function g(l){var x,c=s(l),M=c[0],w=c[1],p=new i(b(l,M,w)),_=0,h=w>0?M-4:M,L;for(L=0;L<h;L+=4)x=a[l.charCodeAt(L)]<<18|a[l.charCodeAt(L+1)]<<12|a[l.charCodeAt(L+2)]<<6|a[l.charCodeAt(L+3)],p[_++]=x>>16&255,p[_++]=x>>8&255,p[_++]=x&255;return w===2&&(x=a[l.charCodeAt(L)]<<2|a[l.charCodeAt(L+1)]>>4,p[_++]=x&255),w===1&&(x=a[l.charCodeAt(L)]<<10|a[l.charCodeAt(L+1)]<<4|a[l.charCodeAt(L+2)]>>2,p[_++]=x>>8&255,p[_++]=x&255),p}function d(l){return e[l>>18&63]+e[l>>12&63]+e[l>>6&63]+e[l&63]}function f(l,x,c){for(var M,w=[],p=x;p<c;p+=3)M=(l[p]<<16&16711680)+(l[p+1]<<8&65280)+(l[p+2]&255),w.push(d(M));return w.join("")}function y(l){for(var x,c=l.length,M=c%3,w=[],p=16383,_=0,h=c-M;_<h;_+=p)w.push(f(l,_,_+p>h?h:_+p));return M===1?(x=l[c-1],w.push(e[x>>2]+e[x<<4&63]+"==")):M===2&&(x=(l[c-2]<<8)+l[c-1],w.push(e[x>>10]+e[x>>4&63]+e[x<<2&63]+"=")),w.join("")}},{}],2:[function(u,A,T){},{}],3:[function(u,A,T){(function(e){(function(){var a=u("base64-js"),i=u("ieee754");T.Buffer=s,T.SlowBuffer=M,T.INSPECT_MAX_BYTES=50;var n=2147483647;T.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=r(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{var fe=new Uint8Array(1);return fe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},fe.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function v(fe){if(fe>n)throw new RangeError('The value "'+fe+'" is invalid for option "size"');var me=new Uint8Array(fe);return me.__proto__=s.prototype,me}function s(fe,me,xe){if(typeof fe=="number"){if(typeof me=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(fe)}return o(fe,me,xe)}typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function o(fe,me,xe){if(typeof fe=="string")return f(fe,me);if(ArrayBuffer.isView(fe))return y(fe);if(fe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe);if(le(fe,ArrayBuffer)||fe&&le(fe.buffer,ArrayBuffer))return l(fe,me,xe);if(typeof fe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=fe.valueOf&&fe.valueOf();if(ye!=null&&ye!==fe)return s.from(ye,me,xe);var be=x(fe);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof fe[Symbol.toPrimitive]=="function")return s.from(fe[Symbol.toPrimitive]("string"),me,xe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe)}s.from=function(fe,me,xe){return o(fe,me,xe)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function b(fe){if(typeof fe!="number")throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function g(fe,me,xe){return b(fe),fe<=0?v(fe):me!==void 0?typeof xe=="string"?v(fe).fill(me,xe):v(fe).fill(me):v(fe)}s.alloc=function(fe,me,xe){return g(fe,me,xe)};function d(fe){return b(fe),v(fe<0?0:c(fe)|0)}s.allocUnsafe=function(fe){return d(fe)},s.allocUnsafeSlow=function(fe){return d(fe)};function f(fe,me){if((typeof me!="string"||me==="")&&(me="utf8"),!s.isEncoding(me))throw new TypeError("Unknown encoding: "+me);var xe=w(fe,me)|0,ye=v(xe),be=ye.write(fe,me);return be!==xe&&(ye=ye.slice(0,be)),ye}function y(fe){for(var me=fe.length<0?0:c(fe.length)|0,xe=v(me),ye=0;ye<me;ye+=1)xe[ye]=fe[ye]&255;return xe}function l(fe,me,xe){if(me<0||fe.byteLength<me)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<me+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return me===void 0&&xe===void 0?ye=new Uint8Array(fe):xe===void 0?ye=new Uint8Array(fe,me):ye=new Uint8Array(fe,me,xe),ye.__proto__=s.prototype,ye}function x(fe){if(s.isBuffer(fe)){var me=c(fe.length)|0,xe=v(me);return xe.length===0||fe.copy(xe,0,0,me),xe}if(fe.length!==void 0)return typeof fe.length!="number"||_e(fe.length)?v(0):y(fe);if(fe.type==="Buffer"&&Array.isArray(fe.data))return y(fe.data)}function c(fe){if(fe>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return fe|0}function M(fe){return+fe!=fe&&(fe=0),s.alloc(+fe)}s.isBuffer=function(me){return me!=null&&me._isBuffer===!0&&me!==s.prototype},s.compare=function(me,xe){if(le(me,Uint8Array)&&(me=s.from(me,me.offset,me.byteLength)),le(xe,Uint8Array)&&(xe=s.from(xe,xe.offset,xe.byteLength)),!s.isBuffer(me)||!s.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(me===xe)return 0;for(var ye=me.length,be=xe.length,ke=0,De=Math.min(ye,be);ke<De;++ke)if(me[ke]!==xe[ke]){ye=me[ke],be=xe[ke];break}return ye<be?-1:be<ye?1:0},s.isEncoding=function(me){switch(String(me).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(me,xe){if(!Array.isArray(me))throw new TypeError('"list" argument must be an Array of Buffers');if(me.length===0)return s.alloc(0);var ye;if(xe===void 0)for(xe=0,ye=0;ye<me.length;++ye)xe+=me[ye].length;var be=s.allocUnsafe(xe),ke=0;for(ye=0;ye<me.length;++ye){var De=me[ye];if(le(De,Uint8Array)&&(De=s.from(De)),!s.isBuffer(De))throw new TypeError('"list" argument must be an Array of Buffers');De.copy(be,ke),ke+=De.length}return be};function w(fe,me){if(s.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||le(fe,ArrayBuffer))return fe.byteLength;if(typeof fe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof fe);var xe=fe.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&xe===0)return 0;for(var be=!1;;)switch(me){case"ascii":case"latin1":case"binary":return xe;case"utf8":case"utf-8":return Z(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe*2;case"hex":return xe>>>1;case"base64":return se(fe).length;default:if(be)return ye?-1:Z(fe).length;me=(""+me).toLowerCase(),be=!0}}s.byteLength=w;function p(fe,me,xe){var ye=!1;if((me===void 0||me<0)&&(me=0),me>this.length||((xe===void 0||xe>this.length)&&(xe=this.length),xe<=0)||(xe>>>=0,me>>>=0,xe<=me))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return j(this,me,xe);case"utf8":case"utf-8":return O(this,me,xe);case"ascii":return Y(this,me,xe);case"latin1":case"binary":return ee(this,me,xe);case"base64":return R(this,me,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,me,xe);default:if(ye)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),ye=!0}}s.prototype._isBuffer=!0;function _(fe,me,xe){var ye=fe[me];fe[me]=fe[xe],fe[xe]=ye}s.prototype.swap16=function(){var me=this.length;if(me%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<me;xe+=2)_(this,xe,xe+1);return this},s.prototype.swap32=function(){var me=this.length;if(me%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<me;xe+=4)_(this,xe,xe+3),_(this,xe+1,xe+2);return this},s.prototype.swap64=function(){var me=this.length;if(me%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<me;xe+=8)_(this,xe,xe+7),_(this,xe+1,xe+6),_(this,xe+2,xe+5),_(this,xe+3,xe+4);return this},s.prototype.toString=function(){var me=this.length;return me===0?"":arguments.length===0?O(this,0,me):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(me){if(!s.isBuffer(me))throw new TypeError("Argument must be a Buffer");return this===me?!0:s.compare(this,me)===0},s.prototype.inspect=function(){var me="",xe=T.INSPECT_MAX_BYTES;return me=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(me+=" ... "),"<Buffer "+me+">"},s.prototype.compare=function(me,xe,ye,be,ke){if(le(me,Uint8Array)&&(me=s.from(me,me.offset,me.byteLength)),!s.isBuffer(me))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof me);if(xe===void 0&&(xe=0),ye===void 0&&(ye=me?me.length:0),be===void 0&&(be=0),ke===void 0&&(ke=this.length),xe<0||ye>me.length||be<0||ke>this.length)throw new RangeError("out of range index");if(be>=ke&&xe>=ye)return 0;if(be>=ke)return-1;if(xe>=ye)return 1;if(xe>>>=0,ye>>>=0,be>>>=0,ke>>>=0,this===me)return 0;for(var De=ke-be,He=ye-xe,Ae=Math.min(De,He),Le=this.slice(be,ke),Ze=me.slice(xe,ye),We=0;We<Ae;++We)if(Le[We]!==Ze[We]){De=Le[We],He=Ze[We];break}return De<He?-1:He<De?1:0};function h(fe,me,xe,ye,be){if(fe.length===0)return-1;if(typeof xe=="string"?(ye=xe,xe=0):xe>2147483647?xe=2147483647:xe<-2147483648&&(xe=-2147483648),xe=+xe,_e(xe)&&(xe=be?0:fe.length-1),xe<0&&(xe=fe.length+xe),xe>=fe.length){if(be)return-1;xe=fe.length-1}else if(xe<0)if(be)xe=0;else return-1;if(typeof me=="string"&&(me=s.from(me,ye)),s.isBuffer(me))return me.length===0?-1:L(fe,me,xe,ye,be);if(typeof me=="number")return me=me&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(fe,me,xe):Uint8Array.prototype.lastIndexOf.call(fe,me,xe):L(fe,[me],xe,ye,be);throw new TypeError("val must be string, number or Buffer")}function L(fe,me,xe,ye,be){var ke=1,De=fe.length,He=me.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(fe.length<2||me.length<2)return-1;ke=2,De/=2,He/=2,xe/=2}function Ae(Ie,Ve){return ke===1?Ie[Ve]:Ie.readUInt16BE(Ve*ke)}var Le;if(be){var Ze=-1;for(Le=xe;Le<De;Le++)if(Ae(fe,Le)===Ae(me,Ze===-1?0:Le-Ze)){if(Ze===-1&&(Ze=Le),Le-Ze+1===He)return Ze*ke}else Ze!==-1&&(Le-=Le-Ze),Ze=-1}else for(xe+He>De&&(xe=De-He),Le=xe;Le>=0;Le--){for(var We=!0,ze=0;ze<He;ze++)if(Ae(fe,Le+ze)!==Ae(me,ze)){We=!1;break}if(We)return Le}return-1}s.prototype.includes=function(me,xe,ye){return this.indexOf(me,xe,ye)!==-1},s.prototype.indexOf=function(me,xe,ye){return h(this,me,xe,ye,!0)},s.prototype.lastIndexOf=function(me,xe,ye){return h(this,me,xe,ye,!1)};function E(fe,me,xe,ye){xe=Number(xe)||0;var be=fe.length-xe;ye?(ye=Number(ye),ye>be&&(ye=be)):ye=be;var ke=me.length;ye>ke/2&&(ye=ke/2);for(var De=0;De<ye;++De){var He=parseInt(me.substr(De*2,2),16);if(_e(He))return De;fe[xe+De]=He}return De}function S(fe,me,xe,ye){return ae(Z(me,fe.length-xe),fe,xe,ye)}function P(fe,me,xe,ye){return ae(Q(me),fe,xe,ye)}function F(fe,me,xe,ye){return P(fe,me,xe,ye)}function I(fe,me,xe,ye){return ae(se(me),fe,xe,ye)}function D(fe,me,xe,ye){return ae(oe(me,fe.length-xe),fe,xe,ye)}s.prototype.write=function(me,xe,ye,be){if(xe===void 0)be="utf8",ye=this.length,xe=0;else if(ye===void 0&&typeof xe=="string")be=xe,ye=this.length,xe=0;else if(isFinite(xe))xe=xe>>>0,isFinite(ye)?(ye=ye>>>0,be===void 0&&(be="utf8")):(be=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ke=this.length-xe;if((ye===void 0||ye>ke)&&(ye=ke),me.length>0&&(ye<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var De=!1;;)switch(be){case"hex":return E(this,me,xe,ye);case"utf8":case"utf-8":return S(this,me,xe,ye);case"ascii":return P(this,me,xe,ye);case"latin1":case"binary":return F(this,me,xe,ye);case"base64":return I(this,me,xe,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,me,xe,ye);default:if(De)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),De=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(fe,me,xe){return me===0&&xe===fe.length?a.fromByteArray(fe):a.fromByteArray(fe.slice(me,xe))}function O(fe,me,xe){xe=Math.min(fe.length,xe);for(var ye=[],be=me;be<xe;){var ke=fe[be],De=null,He=ke>239?4:ke>223?3:ke>191?2:1;if(be+He<=xe){var Ae,Le,Ze,We;switch(He){case 1:ke<128&&(De=ke);break;case 2:Ae=fe[be+1],(Ae&192)===128&&(We=(ke&31)<<6|Ae&63,We>127&&(De=We));break;case 3:Ae=fe[be+1],Le=fe[be+2],(Ae&192)===128&&(Le&192)===128&&(We=(ke&15)<<12|(Ae&63)<<6|Le&63,We>2047&&(We<55296||We>57343)&&(De=We));break;case 4:Ae=fe[be+1],Le=fe[be+2],Ze=fe[be+3],(Ae&192)===128&&(Le&192)===128&&(Ze&192)===128&&(We=(ke&15)<<18|(Ae&63)<<12|(Le&63)<<6|Ze&63,We>65535&&We<1114112&&(De=We))}}De===null?(De=65533,He=1):De>65535&&(De-=65536,ye.push(De>>>10&1023|55296),De=56320|De&1023),ye.push(De),be+=He}return G(ye)}var z=4096;function G(fe){var me=fe.length;if(me<=z)return String.fromCharCode.apply(String,fe);for(var xe="",ye=0;ye<me;)xe+=String.fromCharCode.apply(String,fe.slice(ye,ye+=z));return xe}function Y(fe,me,xe){var ye="";xe=Math.min(fe.length,xe);for(var be=me;be<xe;++be)ye+=String.fromCharCode(fe[be]&127);return ye}function ee(fe,me,xe){var ye="";xe=Math.min(fe.length,xe);for(var be=me;be<xe;++be)ye+=String.fromCharCode(fe[be]);return ye}function j(fe,me,xe){var ye=fe.length;(!me||me<0)&&(me=0),(!xe||xe<0||xe>ye)&&(xe=ye);for(var be="",ke=me;ke<xe;++ke)be+=re(fe[ke]);return be}function X(fe,me,xe){for(var ye=fe.slice(me,xe),be="",ke=0;ke<ye.length;ke+=2)be+=String.fromCharCode(ye[ke]+ye[ke+1]*256);return be}s.prototype.slice=function(me,xe){var ye=this.length;me=~~me,xe=xe===void 0?ye:~~xe,me<0?(me+=ye,me<0&&(me=0)):me>ye&&(me=ye),xe<0?(xe+=ye,xe<0&&(xe=0)):xe>ye&&(xe=ye),xe<me&&(xe=me);var be=this.subarray(me,xe);return be.__proto__=s.prototype,be};function ie(fe,me,xe){if(fe%1!==0||fe<0)throw new RangeError("offset is not uint");if(fe+me>xe)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(me,xe,ye){me=me>>>0,xe=xe>>>0,ye||ie(me,xe,this.length);for(var be=this[me],ke=1,De=0;++De<xe&&(ke*=256);)be+=this[me+De]*ke;return be},s.prototype.readUIntBE=function(me,xe,ye){me=me>>>0,xe=xe>>>0,ye||ie(me,xe,this.length);for(var be=this[me+--xe],ke=1;xe>0&&(ke*=256);)be+=this[me+--xe]*ke;return be},s.prototype.readUInt8=function(me,xe){return me=me>>>0,xe||ie(me,1,this.length),this[me]},s.prototype.readUInt16LE=function(me,xe){return me=me>>>0,xe||ie(me,2,this.length),this[me]|this[me+1]<<8},s.prototype.readUInt16BE=function(me,xe){return me=me>>>0,xe||ie(me,2,this.length),this[me]<<8|this[me+1]},s.prototype.readUInt32LE=function(me,xe){return me=me>>>0,xe||ie(me,4,this.length),(this[me]|this[me+1]<<8|this[me+2]<<16)+this[me+3]*16777216},s.prototype.readUInt32BE=function(me,xe){return me=me>>>0,xe||ie(me,4,this.length),this[me]*16777216+(this[me+1]<<16|this[me+2]<<8|this[me+3])},s.prototype.readIntLE=function(me,xe,ye){me=me>>>0,xe=xe>>>0,ye||ie(me,xe,this.length);for(var be=this[me],ke=1,De=0;++De<xe&&(ke*=256);)be+=this[me+De]*ke;return ke*=128,be>=ke&&(be-=Math.pow(2,8*xe)),be},s.prototype.readIntBE=function(me,xe,ye){me=me>>>0,xe=xe>>>0,ye||ie(me,xe,this.length);for(var be=xe,ke=1,De=this[me+--be];be>0&&(ke*=256);)De+=this[me+--be]*ke;return ke*=128,De>=ke&&(De-=Math.pow(2,8*xe)),De},s.prototype.readInt8=function(me,xe){return me=me>>>0,xe||ie(me,1,this.length),this[me]&128?(255-this[me]+1)*-1:this[me]},s.prototype.readInt16LE=function(me,xe){me=me>>>0,xe||ie(me,2,this.length);var ye=this[me]|this[me+1]<<8;return ye&32768?ye|4294901760:ye},s.prototype.readInt16BE=function(me,xe){me=me>>>0,xe||ie(me,2,this.length);var ye=this[me+1]|this[me]<<8;return ye&32768?ye|4294901760:ye},s.prototype.readInt32LE=function(me,xe){return me=me>>>0,xe||ie(me,4,this.length),this[me]|this[me+1]<<8|this[me+2]<<16|this[me+3]<<24},s.prototype.readInt32BE=function(me,xe){return me=me>>>0,xe||ie(me,4,this.length),this[me]<<24|this[me+1]<<16|this[me+2]<<8|this[me+3]},s.prototype.readFloatLE=function(me,xe){return me=me>>>0,xe||ie(me,4,this.length),i.read(this,me,!0,23,4)},s.prototype.readFloatBE=function(me,xe){return me=me>>>0,xe||ie(me,4,this.length),i.read(this,me,!1,23,4)},s.prototype.readDoubleLE=function(me,xe){return me=me>>>0,xe||ie(me,8,this.length),i.read(this,me,!0,52,8)},s.prototype.readDoubleBE=function(me,xe){return me=me>>>0,xe||ie(me,8,this.length),i.read(this,me,!1,52,8)};function he(fe,me,xe,ye,be,ke){if(!s.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(me>be||me<ke)throw new RangeError('"value" argument is out of bounds');if(xe+ye>fe.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(me,xe,ye,be){if(me=+me,xe=xe>>>0,ye=ye>>>0,!be){var ke=Math.pow(2,8*ye)-1;he(this,me,xe,ye,ke,0)}var De=1,He=0;for(this[xe]=me&255;++He<ye&&(De*=256);)this[xe+He]=me/De&255;return xe+ye},s.prototype.writeUIntBE=function(me,xe,ye,be){if(me=+me,xe=xe>>>0,ye=ye>>>0,!be){var ke=Math.pow(2,8*ye)-1;he(this,me,xe,ye,ke,0)}var De=ye-1,He=1;for(this[xe+De]=me&255;--De>=0&&(He*=256);)this[xe+De]=me/He&255;return xe+ye},s.prototype.writeUInt8=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,1,255,0),this[xe]=me&255,xe+1},s.prototype.writeUInt16LE=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,2,65535,0),this[xe]=me&255,this[xe+1]=me>>>8,xe+2},s.prototype.writeUInt16BE=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,2,65535,0),this[xe]=me>>>8,this[xe+1]=me&255,xe+2},s.prototype.writeUInt32LE=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,4,4294967295,0),this[xe+3]=me>>>24,this[xe+2]=me>>>16,this[xe+1]=me>>>8,this[xe]=me&255,xe+4},s.prototype.writeUInt32BE=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,4,4294967295,0),this[xe]=me>>>24,this[xe+1]=me>>>16,this[xe+2]=me>>>8,this[xe+3]=me&255,xe+4},s.prototype.writeIntLE=function(me,xe,ye,be){if(me=+me,xe=xe>>>0,!be){var ke=Math.pow(2,8*ye-1);he(this,me,xe,ye,ke-1,-ke)}var De=0,He=1,Ae=0;for(this[xe]=me&255;++De<ye&&(He*=256);)me<0&&Ae===0&&this[xe+De-1]!==0&&(Ae=1),this[xe+De]=(me/He>>0)-Ae&255;return xe+ye},s.prototype.writeIntBE=function(me,xe,ye,be){if(me=+me,xe=xe>>>0,!be){var ke=Math.pow(2,8*ye-1);he(this,me,xe,ye,ke-1,-ke)}var De=ye-1,He=1,Ae=0;for(this[xe+De]=me&255;--De>=0&&(He*=256);)me<0&&Ae===0&&this[xe+De+1]!==0&&(Ae=1),this[xe+De]=(me/He>>0)-Ae&255;return xe+ye},s.prototype.writeInt8=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,1,127,-128),me<0&&(me=255+me+1),this[xe]=me&255,xe+1},s.prototype.writeInt16LE=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,2,32767,-32768),this[xe]=me&255,this[xe+1]=me>>>8,xe+2},s.prototype.writeInt16BE=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,2,32767,-32768),this[xe]=me>>>8,this[xe+1]=me&255,xe+2},s.prototype.writeInt32LE=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,4,2147483647,-2147483648),this[xe]=me&255,this[xe+1]=me>>>8,this[xe+2]=me>>>16,this[xe+3]=me>>>24,xe+4},s.prototype.writeInt32BE=function(me,xe,ye){return me=+me,xe=xe>>>0,ye||he(this,me,xe,4,2147483647,-2147483648),me<0&&(me=4294967295+me+1),this[xe]=me>>>24,this[xe+1]=me>>>16,this[xe+2]=me>>>8,this[xe+3]=me&255,xe+4};function K(fe,me,xe,ye,be,ke){if(xe+ye>fe.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("Index out of range")}function $(fe,me,xe,ye,be){return me=+me,xe=xe>>>0,be||K(fe,me,xe,4),i.write(fe,me,xe,ye,23,4),xe+4}s.prototype.writeFloatLE=function(me,xe,ye){return $(this,me,xe,!0,ye)},s.prototype.writeFloatBE=function(me,xe,ye){return $(this,me,xe,!1,ye)};function U(fe,me,xe,ye,be){return me=+me,xe=xe>>>0,be||K(fe,me,xe,8),i.write(fe,me,xe,ye,52,8),xe+8}s.prototype.writeDoubleLE=function(me,xe,ye){return U(this,me,xe,!0,ye)},s.prototype.writeDoubleBE=function(me,xe,ye){return U(this,me,xe,!1,ye)},s.prototype.copy=function(me,xe,ye,be){if(!s.isBuffer(me))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!be&&be!==0&&(be=this.length),xe>=me.length&&(xe=me.length),xe||(xe=0),be>0&&be<ye&&(be=ye),be===ye||me.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),me.length-xe<be-ye&&(be=me.length-xe+ye);var ke=be-ye;if(this===me&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(xe,ye,be);else if(this===me&&ye<xe&&xe<be)for(var De=ke-1;De>=0;--De)me[De+xe]=this[De+ye];else Uint8Array.prototype.set.call(me,this.subarray(ye,be),xe);return ke},s.prototype.fill=function(me,xe,ye,be){if(typeof me=="string"){if(typeof xe=="string"?(be=xe,xe=0,ye=this.length):typeof ye=="string"&&(be=ye,ye=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!s.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(me.length===1){var ke=me.charCodeAt(0);(be==="utf8"&&ke<128||be==="latin1")&&(me=ke)}}else typeof me=="number"&&(me=me&255);if(xe<0||this.length<xe||this.length<ye)throw new RangeError("Out of range index");if(ye<=xe)return this;xe=xe>>>0,ye=ye===void 0?this.length:ye>>>0,me||(me=0);var De;if(typeof me=="number")for(De=xe;De<ye;++De)this[De]=me;else{var He=s.isBuffer(me)?me:s.from(me,be),Ae=He.length;if(Ae===0)throw new TypeError('The value "'+me+'" is invalid for argument "value"');for(De=0;De<ye-xe;++De)this[De+xe]=He[De%Ae]}return this};var H=/[^+/0-9A-Za-z-_]/g;function q(fe){if(fe=fe.split("=")[0],fe=fe.trim().replace(H,""),fe.length<2)return"";for(;fe.length%4!==0;)fe=fe+"=";return fe}function re(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function Z(fe,me){me=me||1/0;for(var xe,ye=fe.length,be=null,ke=[],De=0;De<ye;++De){if(xe=fe.charCodeAt(De),xe>55295&&xe<57344){if(!be){if(xe>56319){(me-=3)>-1&&ke.push(239,191,189);continue}else if(De+1===ye){(me-=3)>-1&&ke.push(239,191,189);continue}be=xe;continue}if(xe<56320){(me-=3)>-1&&ke.push(239,191,189),be=xe;continue}xe=(be-55296<<10|xe-56320)+65536}else be&&(me-=3)>-1&&ke.push(239,191,189);if(be=null,xe<128){if((me-=1)<0)break;ke.push(xe)}else if(xe<2048){if((me-=2)<0)break;ke.push(xe>>6|192,xe&63|128)}else if(xe<65536){if((me-=3)<0)break;ke.push(xe>>12|224,xe>>6&63|128,xe&63|128)}else if(xe<1114112){if((me-=4)<0)break;ke.push(xe>>18|240,xe>>12&63|128,xe>>6&63|128,xe&63|128)}else throw new Error("Invalid code point")}return ke}function Q(fe){for(var me=[],xe=0;xe<fe.length;++xe)me.push(fe.charCodeAt(xe)&255);return me}function oe(fe,me){for(var xe,ye,be,ke=[],De=0;De<fe.length&&!((me-=2)<0);++De)xe=fe.charCodeAt(De),ye=xe>>8,be=xe%256,ke.push(be),ke.push(ye);return ke}function se(fe){return a.toByteArray(q(fe))}function ae(fe,me,xe,ye){for(var be=0;be<ye&&!(be+xe>=me.length||be>=fe.length);++be)me[be+xe]=fe[be];return be}function le(fe,me){return fe instanceof me||fe!=null&&fe.constructor!=null&&fe.constructor.name!=null&&fe.constructor.name===me.name}function _e(fe){return fe!==fe}}).call(this)}).call(this,u("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(u,A,T){T.read=function(e,a,i,n,r){var v,s,o=r*8-n-1,b=(1<<o)-1,g=b>>1,d=-7,f=i?r-1:0,y=i?-1:1,l=e[a+f];for(f+=y,v=l&(1<<-d)-1,l>>=-d,d+=o;d>0;v=v*256+e[a+f],f+=y,d-=8);for(s=v&(1<<-d)-1,v>>=-d,d+=n;d>0;s=s*256+e[a+f],f+=y,d-=8);if(v===0)v=1-g;else{if(v===b)return s?NaN:(l?-1:1)*(1/0);s=s+Math.pow(2,n),v=v-g}return(l?-1:1)*s*Math.pow(2,v-n)},T.write=function(e,a,i,n,r,v){var s,o,b,g=v*8-r-1,d=(1<<g)-1,f=d>>1,y=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:v-1,x=n?1:-1,c=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,s=d):(s=Math.floor(Math.log(a)/Math.LN2),a*(b=Math.pow(2,-s))<1&&(s--,b*=2),s+f>=1?a+=y/b:a+=y*Math.pow(2,1-f),a*b>=2&&(s++,b/=2),s+f>=d?(o=0,s=d):s+f>=1?(o=(a*b-1)*Math.pow(2,r),s=s+f):(o=a*Math.pow(2,f-1)*Math.pow(2,r),s=0));r>=8;e[i+l]=o&255,l+=x,o/=256,r-=8);for(s=s<<r|o,g+=r;g>0;e[i+l]=s&255,l+=x,s/=256,g-=8);e[i+l-x]|=c*128}},{}],5:[function(u,A,T){var e=A.exports={},a,i;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=n}catch{a=n}try{typeof clearTimeout=="function"?i=clearTimeout:i=r}catch{i=r}})();function v(c){if(a===setTimeout)return setTimeout(c,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(c,0);try{return a(c,0)}catch{try{return a.call(null,c,0)}catch{return a.call(this,c,0)}}}function s(c){if(i===clearTimeout)return clearTimeout(c);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(c);try{return i(c)}catch{try{return i.call(null,c)}catch{return i.call(this,c)}}}var o=[],b=!1,g,d=-1;function f(){!b||!g||(b=!1,g.length?o=g.concat(o):d=-1,o.length&&y())}function y(){if(!b){var c=v(f);b=!0;for(var M=o.length;M;){for(g=o,o=[];++d<M;)g&&g[d].run();d=-1,M=o.length}g=null,b=!1,s(c)}}e.nextTick=function(c){var M=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)M[w-1]=arguments[w];o.push(new l(c,M)),o.length===1&&!b&&v(y)};function l(c,M){this.fun=c,this.array=M}l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function x(){}e.on=x,e.addListener=x,e.once=x,e.off=x,e.removeListener=x,e.removeAllListeners=x,e.emit=x,e.prependListener=x,e.prependOnceListener=x,e.listeners=function(c){return[]},e.binding=function(c){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(c){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(u,A,T){A.exports={alpha_shape:u("alpha-shape"),convex_hull:u("convex-hull"),delaunay_triangulate:u("delaunay-triangulate"),gl_cone3d:u("gl-cone3d"),gl_error3d:u("gl-error3d"),gl_heatmap2d:u("gl-heatmap2d"),gl_line3d:u("gl-line3d"),gl_mesh3d:u("gl-mesh3d"),gl_plot2d:u("gl-plot2d"),gl_plot3d:u("gl-plot3d"),gl_pointcloud2d:u("gl-pointcloud2d"),gl_scatter3d:u("gl-scatter3d"),gl_select_box:u("gl-select-box"),gl_spikes2d:u("gl-spikes2d"),gl_streamtube3d:u("gl-streamtube3d"),gl_surface3d:u("gl-surface3d"),ndarray:u("ndarray"),ndarray_linear_interpolate:u("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(u,A,T){A.exports=v;var e=u("turntable-camera-controller"),a=u("orbit-camera-controller"),i=u("matrix-camera-controller");function n(s,o){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(b){return s[b]}),this._mode=o,this._active=s[o],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=n.prototype;r.flush=function(s){for(var o=this._controllerList,b=0;b<o.length;++b)o[b].flush(s)},r.idle=function(s){for(var o=this._controllerList,b=0;b<o.length;++b)o[b].idle(s)},r.lookAt=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].lookAt(s,o,b,g)},r.rotate=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].rotate(s,o,b,g)},r.pan=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].pan(s,o,b,g)},r.translate=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].translate(s,o,b,g)},r.setMatrix=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setMatrix(s,o)},r.setDistanceLimits=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setDistanceLimits(s,o)},r.setDistance=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setDistance(s,o)},r.recalcMatrix=function(s){this._active.recalcMatrix(s)},r.getDistance=function(s){return this._active.getDistance(s)},r.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},r.lastT=function(){return this._active.lastT()},r.setMode=function(s){if(s!==this._mode){var o=this._controllerNames.indexOf(s);if(!(o<0)){var b=this._active,g=this._controllerList[o],d=Math.max(b.lastT(),g.lastT());b.recalcMatrix(d),g.setMatrix(d,b.computedMatrix),this._active=g,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode};function v(s){s=s||{};var o=s.eye||[0,0,1],b=s.center||[0,0,0],g=s.up||[0,1,0],d=s.distanceLimits||[0,1/0],f=s.mode||"turntable",y=e(),l=a(),x=i();return y.setDistanceLimits(d[0],d[1]),y.lookAt(0,o,b,g),l.setDistanceLimits(d[0],d[1]),l.lookAt(0,o,b,g),x.setDistanceLimits(d[0],d[1]),x.lookAt(0,o,b,g),new n({turntable:y,orbit:l,matrix:x},f)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(u,A,T){var e=typeof WeakMap>"u"?u("weak-map"):WeakMap,a=u("gl-buffer"),i=u("gl-vao"),n=new e;function r(v){var s=n.get(v),o=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!o||!v.isBuffer(o)){var b=a(v,new Float32Array([-1,-1,-1,4,4,-1]));s=i(v,[{buffer:b,type:v.FLOAT,size:2}]),s._triangleBuffer=b,n.set(v,s)}s.bind(),v.drawArrays(v.TRIANGLES,0,3),s.unbind()}A.exports=r},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(u,A,T){var e=u("pad-left");A.exports=a;function a(i,n,r){n=typeof n=="number"?n:1,r=r||": ";var v=i.split(/\r?\n/),s=String(v.length+n-1).length;return v.map(function(o,b){var g=b+n,d=String(g).length,f=e(g,s-d);return f+r+o}).join(`
`)}},{"pad-left":264}],10:[function(u,A,T){A.exports=i;var e=u("robust-orientation");function a(n,r){for(var v=new Array(r+1),s=0;s<n.length;++s)v[s]=n[s];for(var s=0;s<=n.length;++s){for(var o=n.length;o<=r;++o){for(var b=new Array(r),g=0;g<r;++g)b[g]=Math.pow(o+1-s,g);v[o]=b}var d=e.apply(void 0,v);if(d)return!0}return!1}function i(n){var r=n.length;if(r===0)return[];if(r===1)return[0];for(var v=n[0].length,s=[n[0]],o=[0],b=1;b<r;++b){if(s.push(n[b]),!a(s,v)){s.pop();continue}if(o.push(b),o.length===v+1)return o}return o}},{"robust-orientation":284}],11:[function(u,A,T){A.exports=i;var e=u("delaunay-triangulate"),a=u("circumradius");function i(n,r){return e(r).filter(function(v){for(var s=new Array(v.length),o=0;o<v.length;++o)s[o]=r[v[o]];return a(s)*n<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(u,A,T){A.exports=i;var e=u("alpha-complex"),a=u("simplicial-complex-boundary");function i(n,r){return a(e(n,r))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(u,A,T){A.exports=function(a){return atob(a)}},{}],14:[function(u,A,T){A.exports=i;var e=u("robust-linear-solve");function a(n){for(var r=0,v=0;v<n.length;++v)r+=n[v];return r}function i(n,r){for(var v=r.length,s=new Array(v+1),o=0;o<v;++o){for(var b=new Array(v+1),g=0;g<=v;++g)b[g]=n[g][o];s[o]=b}s[v]=new Array(v+1);for(var o=0;o<=v;++o)s[v][o]=1;for(var d=new Array(v+1),o=0;o<v;++o)d[o]=r[o];d[v]=1;var f=e(s,d),y=a(f[v+1]);y===0&&(y=1);for(var l=new Array(v+1),o=0;o<=v;++o)l[o]=a(f[o])/y;return l}},{"robust-linear-solve":283}],15:[function(u,A,T){var e=u("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]).add(n[0].mul(i[1])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],16:[function(u,A,T){A.exports=e;function e(a,i){return a[0].mul(i[1]).cmp(i[0].mul(a[1]))}},{}],17:[function(u,A,T){var e=u("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]),i[1].mul(n[0]))}},{"./lib/rationalize":25}],18:[function(u,A,T){var e=u("./is-rat"),a=u("./lib/is-bn"),i=u("./lib/num-to-bn"),n=u("./lib/str-to-bn"),r=u("./lib/rationalize"),v=u("./div");A.exports=s;function s(o,b){if(e(o))return b?v(o,s(b)):[o[0].clone(),o[1].clone()];var g=0,d,f;if(a(o))d=o.clone();else if(typeof o=="string")d=n(o);else{if(o===0)return[i(0),i(1)];if(o===Math.floor(o))d=i(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),g-=256;d=i(o)}}if(e(b))d.mul(b[1]),f=b[0].clone();else if(a(b))f=b.clone();else if(typeof b=="string")f=n(b);else if(!b)f=i(1);else if(b===Math.floor(b))f=i(b);else{for(;b!==Math.floor(b);)b=b*Math.pow(2,256),g+=256;f=i(b)}return g>0?d=d.ushln(g):g<0&&(f=f.ushln(-g)),r(d,f)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(u,A,T){var e=u("./lib/is-bn");A.exports=a;function a(i){return Array.isArray(i)&&i.length===2&&e(i[0])&&e(i[1])}},{"./lib/is-bn":23}],20:[function(u,A,T){var e=u("bn.js");A.exports=a;function a(i){return i.cmp(new e(0))}},{"bn.js":33}],21:[function(u,A,T){var e=u("./bn-sign");A.exports=a;function a(i){var n=i.length,r=i.words,v=0;if(n===1)v=r[0];else if(n===2)v=r[0]+r[1]*67108864;else for(var s=0;s<n;s++){var o=r[s];v+=o*Math.pow(67108864,s)}return e(i)*v}},{"./bn-sign":20}],22:[function(u,A,T){var e=u("double-bits"),a=u("bit-twiddle").countTrailingZeros;A.exports=i;function i(n){var r=a(e.lo(n));if(r<32)return r;var v=a(e.hi(n));return v>20?52:v+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(u,A,T){u("bn.js"),A.exports=e;function e(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(u,A,T){var e=u("bn.js"),a=u("double-bits");A.exports=i;function i(n){var r=a.exponent(n);return r<52?new e(n):new e(n*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(u,A,T){var e=u("./num-to-bn"),a=u("./bn-sign");A.exports=i;function i(n,r){var v=a(n),s=a(r);if(v===0)return[e(0),e(1)];if(s===0)return[e(0),e(0)];s<0&&(n=n.neg(),r=r.neg());var o=n.gcd(r);return o.cmpn(1)?[n.div(o),r.div(o)]:[n,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(u,A,T){var e=u("bn.js");A.exports=a;function a(i){return new e(i)}},{"bn.js":33}],27:[function(u,A,T){var e=u("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[0]),i[1].mul(n[1]))}},{"./lib/rationalize":25}],28:[function(u,A,T){var e=u("./lib/bn-sign");A.exports=a;function a(i){return e(i[0])*e(i[1])}},{"./lib/bn-sign":20}],29:[function(u,A,T){var e=u("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]).sub(i[1].mul(n[0])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],30:[function(u,A,T){var e=u("./lib/bn-to-num"),a=u("./lib/ctz");A.exports=i;function i(n){var r=n[0],v=n[1];if(r.cmpn(0)===0)return 0;var s=r.abs().divmod(v.abs()),o=s.div,b=e(o),g=s.mod,d=r.negative!==v.negative?-1:1;if(g.cmpn(0)===0)return d*b;if(b){var f=a(b)+4,y=e(g.ushln(f).divRound(v));return d*(b+y*Math.pow(2,-f))}else{var l=v.bitLength()-g.bitLength()+53,y=e(g.ushln(l).divRound(v));return l<1023?d*y*Math.pow(2,-l):(y*=Math.pow(2,-1023),d*y*Math.pow(2,1023-l))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(u,A,T){function e(s,o,b,g,d){for(var f=d+1;g<=d;){var y=g+d>>>1,l=s[y],x=b!==void 0?b(l,o):l-o;x>=0?(f=y,d=y-1):g=y+1}return f}function a(s,o,b,g,d){for(var f=d+1;g<=d;){var y=g+d>>>1,l=s[y],x=b!==void 0?b(l,o):l-o;x>0?(f=y,d=y-1):g=y+1}return f}function i(s,o,b,g,d){for(var f=g-1;g<=d;){var y=g+d>>>1,l=s[y],x=b!==void 0?b(l,o):l-o;x<0?(f=y,g=y+1):d=y-1}return f}function n(s,o,b,g,d){for(var f=g-1;g<=d;){var y=g+d>>>1,l=s[y],x=b!==void 0?b(l,o):l-o;x<=0?(f=y,g=y+1):d=y-1}return f}function r(s,o,b,g,d){for(;g<=d;){var f=g+d>>>1,y=s[f],l=b!==void 0?b(y,o):y-o;if(l===0)return f;l<=0?g=f+1:d=f-1}return-1}function v(s,o,b,g,d,f){return typeof b=="function"?f(s,o,b,g===void 0?0:g|0,d===void 0?s.length-1:d|0):f(s,o,void 0,b===void 0?0:b|0,g===void 0?s.length-1:g|0)}A.exports={ge:function(s,o,b,g,d){return v(s,o,b,g,d,e)},gt:function(s,o,b,g,d){return v(s,o,b,g,d,a)},lt:function(s,o,b,g,d){return v(s,o,b,g,d,i)},le:function(s,o,b,g,d){return v(s,o,b,g,d,n)},eq:function(s,o,b,g,d){return v(s,o,b,g,d,r)}}},{}],32:[function(u,A,T){var e=32;T.INT_BITS=e,T.INT_MAX=2147483647,T.INT_MIN=-1<<e-1,T.sign=function(n){return(n>0)-(n<0)},T.abs=function(n){var r=n>>e-1;return(n^r)-r},T.min=function(n,r){return r^(n^r)&-(n<r)},T.max=function(n,r){return n^(n^r)&-(n<r)},T.isPow2=function(n){return!(n&n-1)&&!!n},T.log2=function(n){var r,v;return r=(n>65535)<<4,n>>>=r,v=(n>255)<<3,n>>>=v,r|=v,v=(n>15)<<2,n>>>=v,r|=v,v=(n>3)<<1,n>>>=v,r|=v,r|n>>1},T.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},T.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function a(n){var r=32;return n&=-n,n&&r--,n&65535&&(r-=16),n&16711935&&(r-=8),n&252645135&&(r-=4),n&858993459&&(r-=2),n&1431655765&&(r-=1),r}T.countTrailingZeros=a,T.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},T.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},T.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var v=r,s=r,o=7;for(v>>>=1;v;v>>>=1)s<<=1,s|=v&1,--o;n[r]=s<<o&255}})(i),T.reverse=function(n){return i[n&255]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},T.interleave2=function(n,r){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n|r<<1},T.deinterleave2=function(n,r){return n=n>>>r&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},T.interleave3=function(n,r,v){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n|=r<<1,v&=1023,v=(v|v<<16)&4278190335,v=(v|v<<8)&251719695,v=(v|v<<4)&3272356035,v=(v|v<<2)&1227133513,n|v<<2},T.deinterleave3=function(n,r){return n=n>>>r&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},T.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>a(n)+1}},{}],33:[function(u,A,T){(function(e,a){function i(I,D){if(!I)throw new Error(D||"Assertion failed")}function n(I,D){I.super_=D;var R=function(){};R.prototype=D.prototype,I.prototype=new R,I.prototype.constructor=I}function r(I,D,R){if(r.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(I||0,D||10,R||"be"))}typeof e=="object"?e.exports=r:a.BN=r,r.BN=r,r.wordSize=26;var v;try{typeof window<"u"&&typeof window.Buffer<"u"?v=window.Buffer:v=u("buffer").Buffer}catch{}r.isBN=function(D){return D instanceof r?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===r.wordSize&&Array.isArray(D.words)},r.max=function(D,R){return D.cmp(R)>0?D:R},r.min=function(D,R){return D.cmp(R)<0?D:R},r.prototype._init=function(D,R,O){if(typeof D=="number")return this._initNumber(D,R,O);if(typeof D=="object")return this._initArray(D,R,O);R==="hex"&&(R=16),i(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var z=0;D[0]==="-"&&(z++,this.negative=1),z<D.length&&(R===16?this._parseHex(D,z,O):(this._parseBase(D,R,z),O==="le"&&this._initArray(this.toArray(),R,O)))},r.prototype._initNumber=function(D,R,O){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(i(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),R,O)},r.prototype._initArray=function(D,R,O){if(i(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G,Y,ee=0;if(O==="be")for(z=D.length-1,G=0;z>=0;z-=3)Y=D[z]|D[z-1]<<8|D[z-2]<<16,this.words[G]|=Y<<ee&67108863,this.words[G+1]=Y>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,G++);else if(O==="le")for(z=0,G=0;z<D.length;z+=3)Y=D[z]|D[z+1]<<8|D[z+2]<<16,this.words[G]|=Y<<ee&67108863,this.words[G+1]=Y>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,G++);return this.strip()};function s(I,D){var R=I.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function o(I,D,R){var O=s(I,R);return R-1>=D&&(O|=s(I,R-1)<<4),O}r.prototype._parseHex=function(D,R,O){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G=0,Y=0,ee;if(O==="be")for(z=D.length-1;z>=R;z-=2)ee=o(D,R,z)<<G,this.words[Y]|=ee&67108863,G>=18?(G-=18,Y+=1,this.words[Y]|=ee>>>26):G+=8;else{var j=D.length-R;for(z=j%2===0?R+1:R;z<D.length;z+=2)ee=o(D,R,z)<<G,this.words[Y]|=ee&67108863,G>=18?(G-=18,Y+=1,this.words[Y]|=ee>>>26):G+=8}this.strip()};function b(I,D,R,O){for(var z=0,G=Math.min(I.length,R),Y=D;Y<G;Y++){var ee=I.charCodeAt(Y)-48;z*=O,ee>=49?z+=ee-49+10:ee>=17?z+=ee-17+10:z+=ee}return z}r.prototype._parseBase=function(D,R,O){this.words=[0],this.length=1;for(var z=0,G=1;G<=67108863;G*=R)z++;z--,G=G/R|0;for(var Y=D.length-O,ee=Y%z,j=Math.min(Y,Y-ee)+O,X=0,ie=O;ie<j;ie+=z)X=b(D,ie,ie+z,R),this.imuln(G),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(ee!==0){var he=1;for(X=b(D,ie,D.length,R),ie=0;ie<ee;ie++)he*=R;this.imuln(he),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},r.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},r.prototype.clone=function(){var D=new r(null);return this.copy(D),D},r.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(D,R){D=D||10,R=R|0||1;var O;if(D===16||D==="hex"){O="";for(var z=0,G=0,Y=0;Y<this.length;Y++){var ee=this.words[Y],j=((ee<<z|G)&16777215).toString(16);G=ee>>>24-z&16777215,G!==0||Y!==this.length-1?O=g[6-j.length]+j+O:O=j+O,z+=2,z>=26&&(z-=26,Y--)}for(G!==0&&(O=G.toString(16)+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(D===(D|0)&&D>=2&&D<=36){var X=d[D],ie=f[D];O="";var he=this.clone();for(he.negative=0;!he.isZero();){var K=he.modn(ie).toString(D);he=he.idivn(ie),he.isZero()?O=K+O:O=g[X-K.length]+K+O}for(this.isZero()&&(O="0"+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(D,R){return i(typeof v<"u"),this.toArrayLike(v,D,R)},r.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},r.prototype.toArrayLike=function(D,R,O){var z=this.byteLength(),G=O||Math.max(1,z);i(z<=G,"byte array longer than desired length"),i(G>0,"Requested array length <= 0"),this.strip();var Y=R==="le",ee=new D(G),j,X,ie=this.clone();if(Y){for(X=0;!ie.isZero();X++)j=ie.andln(255),ie.iushrn(8),ee[X]=j;for(;X<G;X++)ee[X]=0}else{for(X=0;X<G-z;X++)ee[X]=0;for(X=0;!ie.isZero();X++)j=ie.andln(255),ie.iushrn(8),ee[G-X-1]=j}return ee},Math.clz32?r.prototype._countBits=function(D){return 32-Math.clz32(D)}:r.prototype._countBits=function(D){var R=D,O=0;return R>=4096&&(O+=13,R>>>=13),R>=64&&(O+=7,R>>>=7),R>=8&&(O+=4,R>>>=4),R>=2&&(O+=2,R>>>=2),O+R},r.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,O=0;return(R&8191)===0&&(O+=13,R>>>=13),(R&127)===0&&(O+=7,R>>>=7),(R&15)===0&&(O+=4,R>>>=4),(R&3)===0&&(O+=2,R>>>=2),(R&1)===0&&O++,O},r.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function y(I){for(var D=new Array(I.bitLength()),R=0;R<D.length;R++){var O=R/26|0,z=R%26;D[R]=(I.words[O]&1<<z)>>>z}return D}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var O=this._zeroBits(this.words[R]);if(D+=O,O!==26)break}return D},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},r.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},r.prototype.ior=function(D){return i((this.negative|D.negative)===0),this.iuor(D)},r.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},r.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},r.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var O=0;O<R.length;O++)this.words[O]=this.words[O]&D.words[O];return this.length=R.length,this.strip()},r.prototype.iand=function(D){return i((this.negative|D.negative)===0),this.iuand(D)},r.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},r.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},r.prototype.iuxor=function(D){var R,O;this.length>D.length?(R=this,O=D):(R=D,O=this);for(var z=0;z<O.length;z++)this.words[z]=R.words[z]^O.words[z];if(this!==R)for(;z<R.length;z++)this.words[z]=R.words[z];return this.length=R.length,this.strip()},r.prototype.ixor=function(D){return i((this.negative|D.negative)===0),this.iuxor(D)},r.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},r.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},r.prototype.inotn=function(D){i(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,O=D%26;this._expand(R),O>0&&R--;for(var z=0;z<R;z++)this.words[z]=~this.words[z]&67108863;return O>0&&(this.words[z]=~this.words[z]&67108863>>26-O),this.strip()},r.prototype.notn=function(D){return this.clone().inotn(D)},r.prototype.setn=function(D,R){i(typeof D=="number"&&D>=0);var O=D/26|0,z=D%26;return this._expand(O+1),R?this.words[O]=this.words[O]|1<<z:this.words[O]=this.words[O]&~(1<<z),this.strip()},r.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var O,z;this.length>D.length?(O=this,z=D):(O=D,z=this);for(var G=0,Y=0;Y<z.length;Y++)R=(O.words[Y]|0)+(z.words[Y]|0)+G,this.words[Y]=R&67108863,G=R>>>26;for(;G!==0&&Y<O.length;Y++)R=(O.words[Y]|0)+G,this.words[Y]=R&67108863,G=R>>>26;if(this.length=O.length,G!==0)this.words[this.length]=G,this.length++;else if(O!==this)for(;Y<O.length;Y++)this.words[Y]=O.words[Y];return this},r.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},r.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var O=this.cmp(D);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,G;O>0?(z=this,G=D):(z=D,G=this);for(var Y=0,ee=0;ee<G.length;ee++)R=(z.words[ee]|0)-(G.words[ee]|0)+Y,Y=R>>26,this.words[ee]=R&67108863;for(;Y!==0&&ee<z.length;ee++)R=(z.words[ee]|0)+Y,Y=R>>26,this.words[ee]=R&67108863;if(Y===0&&ee<z.length&&z!==this)for(;ee<z.length;ee++)this.words[ee]=z.words[ee];return this.length=Math.max(this.length,ee),z!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(D){return this.clone().isub(D)};function l(I,D,R){R.negative=D.negative^I.negative;var O=I.length+D.length|0;R.length=O,O=O-1|0;var z=I.words[0]|0,G=D.words[0]|0,Y=z*G,ee=Y&67108863,j=Y/67108864|0;R.words[0]=ee;for(var X=1;X<O;X++){for(var ie=j>>>26,he=j&67108863,K=Math.min(X,D.length-1),$=Math.max(0,X-I.length+1);$<=K;$++){var U=X-$|0;z=I.words[U]|0,G=D.words[$]|0,Y=z*G+he,ie+=Y/67108864|0,he=Y&67108863}R.words[X]=he|0,j=ie|0}return j!==0?R.words[X]=j|0:R.length--,R.strip()}var x=function(D,R,O){var z=D.words,G=R.words,Y=O.words,ee=0,j,X,ie,he=z[0]|0,K=he&8191,$=he>>>13,U=z[1]|0,H=U&8191,q=U>>>13,re=z[2]|0,Z=re&8191,Q=re>>>13,oe=z[3]|0,se=oe&8191,ae=oe>>>13,le=z[4]|0,_e=le&8191,fe=le>>>13,me=z[5]|0,xe=me&8191,ye=me>>>13,be=z[6]|0,ke=be&8191,De=be>>>13,He=z[7]|0,Ae=He&8191,Le=He>>>13,Ze=z[8]|0,We=Ze&8191,ze=Ze>>>13,Ie=z[9]|0,Ve=Ie&8191,dt=Ie>>>13,Ft=G[0]|0,Qt=Ft&8191,Ot=Ft>>>13,Ct=G[1]|0,jt=Ct&8191,Nt=Ct>>>13,Lt=G[2]|0,Xe=Lt&8191,it=Lt>>>13,Ye=G[3]|0,Ee=Ye&8191,Ge=Ye>>>13,Ke=G[4]|0,qe=Ke&8191,At=Ke>>>13,yt=G[5]|0,Mt=yt&8191,Gt=yt>>>13,zt=G[6]|0,Ht=zt&8191,Zt=zt>>>13,Wt=G[7]|0,sr=Wt&8191,Gr=Wt>>>13,cn=G[8]|0,qr=cn&8191,st=cn>>>13,rr=G[9]|0,Jt=rr&8191,hr=rr>>>13;O.negative=D.negative^R.negative,O.length=19,j=Math.imul(K,Qt),X=Math.imul(K,Ot),X=X+Math.imul($,Qt)|0,ie=Math.imul($,Ot);var Sr=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,j=Math.imul(H,Qt),X=Math.imul(H,Ot),X=X+Math.imul(q,Qt)|0,ie=Math.imul(q,Ot),j=j+Math.imul(K,jt)|0,X=X+Math.imul(K,Nt)|0,X=X+Math.imul($,jt)|0,ie=ie+Math.imul($,Nt)|0;var tt=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(tt>>>26)|0,tt&=67108863,j=Math.imul(Z,Qt),X=Math.imul(Z,Ot),X=X+Math.imul(Q,Qt)|0,ie=Math.imul(Q,Ot),j=j+Math.imul(H,jt)|0,X=X+Math.imul(H,Nt)|0,X=X+Math.imul(q,jt)|0,ie=ie+Math.imul(q,Nt)|0,j=j+Math.imul(K,Xe)|0,X=X+Math.imul(K,it)|0,X=X+Math.imul($,Xe)|0,ie=ie+Math.imul($,it)|0;var Qe=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,j=Math.imul(se,Qt),X=Math.imul(se,Ot),X=X+Math.imul(ae,Qt)|0,ie=Math.imul(ae,Ot),j=j+Math.imul(Z,jt)|0,X=X+Math.imul(Z,Nt)|0,X=X+Math.imul(Q,jt)|0,ie=ie+Math.imul(Q,Nt)|0,j=j+Math.imul(H,Xe)|0,X=X+Math.imul(H,it)|0,X=X+Math.imul(q,Xe)|0,ie=ie+Math.imul(q,it)|0,j=j+Math.imul(K,Ee)|0,X=X+Math.imul(K,Ge)|0,X=X+Math.imul($,Ee)|0,ie=ie+Math.imul($,Ge)|0;var lt=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(lt>>>26)|0,lt&=67108863,j=Math.imul(_e,Qt),X=Math.imul(_e,Ot),X=X+Math.imul(fe,Qt)|0,ie=Math.imul(fe,Ot),j=j+Math.imul(se,jt)|0,X=X+Math.imul(se,Nt)|0,X=X+Math.imul(ae,jt)|0,ie=ie+Math.imul(ae,Nt)|0,j=j+Math.imul(Z,Xe)|0,X=X+Math.imul(Z,it)|0,X=X+Math.imul(Q,Xe)|0,ie=ie+Math.imul(Q,it)|0,j=j+Math.imul(H,Ee)|0,X=X+Math.imul(H,Ge)|0,X=X+Math.imul(q,Ee)|0,ie=ie+Math.imul(q,Ge)|0,j=j+Math.imul(K,qe)|0,X=X+Math.imul(K,At)|0,X=X+Math.imul($,qe)|0,ie=ie+Math.imul($,At)|0;var ft=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(ft>>>26)|0,ft&=67108863,j=Math.imul(xe,Qt),X=Math.imul(xe,Ot),X=X+Math.imul(ye,Qt)|0,ie=Math.imul(ye,Ot),j=j+Math.imul(_e,jt)|0,X=X+Math.imul(_e,Nt)|0,X=X+Math.imul(fe,jt)|0,ie=ie+Math.imul(fe,Nt)|0,j=j+Math.imul(se,Xe)|0,X=X+Math.imul(se,it)|0,X=X+Math.imul(ae,Xe)|0,ie=ie+Math.imul(ae,it)|0,j=j+Math.imul(Z,Ee)|0,X=X+Math.imul(Z,Ge)|0,X=X+Math.imul(Q,Ee)|0,ie=ie+Math.imul(Q,Ge)|0,j=j+Math.imul(H,qe)|0,X=X+Math.imul(H,At)|0,X=X+Math.imul(q,qe)|0,ie=ie+Math.imul(q,At)|0,j=j+Math.imul(K,Mt)|0,X=X+Math.imul(K,Gt)|0,X=X+Math.imul($,Mt)|0,ie=ie+Math.imul($,Gt)|0;var Et=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Et>>>26)|0,Et&=67108863,j=Math.imul(ke,Qt),X=Math.imul(ke,Ot),X=X+Math.imul(De,Qt)|0,ie=Math.imul(De,Ot),j=j+Math.imul(xe,jt)|0,X=X+Math.imul(xe,Nt)|0,X=X+Math.imul(ye,jt)|0,ie=ie+Math.imul(ye,Nt)|0,j=j+Math.imul(_e,Xe)|0,X=X+Math.imul(_e,it)|0,X=X+Math.imul(fe,Xe)|0,ie=ie+Math.imul(fe,it)|0,j=j+Math.imul(se,Ee)|0,X=X+Math.imul(se,Ge)|0,X=X+Math.imul(ae,Ee)|0,ie=ie+Math.imul(ae,Ge)|0,j=j+Math.imul(Z,qe)|0,X=X+Math.imul(Z,At)|0,X=X+Math.imul(Q,qe)|0,ie=ie+Math.imul(Q,At)|0,j=j+Math.imul(H,Mt)|0,X=X+Math.imul(H,Gt)|0,X=X+Math.imul(q,Mt)|0,ie=ie+Math.imul(q,Gt)|0,j=j+Math.imul(K,Ht)|0,X=X+Math.imul(K,Zt)|0,X=X+Math.imul($,Ht)|0,ie=ie+Math.imul($,Zt)|0;var Vt=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,j=Math.imul(Ae,Qt),X=Math.imul(Ae,Ot),X=X+Math.imul(Le,Qt)|0,ie=Math.imul(Le,Ot),j=j+Math.imul(ke,jt)|0,X=X+Math.imul(ke,Nt)|0,X=X+Math.imul(De,jt)|0,ie=ie+Math.imul(De,Nt)|0,j=j+Math.imul(xe,Xe)|0,X=X+Math.imul(xe,it)|0,X=X+Math.imul(ye,Xe)|0,ie=ie+Math.imul(ye,it)|0,j=j+Math.imul(_e,Ee)|0,X=X+Math.imul(_e,Ge)|0,X=X+Math.imul(fe,Ee)|0,ie=ie+Math.imul(fe,Ge)|0,j=j+Math.imul(se,qe)|0,X=X+Math.imul(se,At)|0,X=X+Math.imul(ae,qe)|0,ie=ie+Math.imul(ae,At)|0,j=j+Math.imul(Z,Mt)|0,X=X+Math.imul(Z,Gt)|0,X=X+Math.imul(Q,Mt)|0,ie=ie+Math.imul(Q,Gt)|0,j=j+Math.imul(H,Ht)|0,X=X+Math.imul(H,Zt)|0,X=X+Math.imul(q,Ht)|0,ie=ie+Math.imul(q,Zt)|0,j=j+Math.imul(K,sr)|0,X=X+Math.imul(K,Gr)|0,X=X+Math.imul($,sr)|0,ie=ie+Math.imul($,Gr)|0;var Pe=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,j=Math.imul(We,Qt),X=Math.imul(We,Ot),X=X+Math.imul(ze,Qt)|0,ie=Math.imul(ze,Ot),j=j+Math.imul(Ae,jt)|0,X=X+Math.imul(Ae,Nt)|0,X=X+Math.imul(Le,jt)|0,ie=ie+Math.imul(Le,Nt)|0,j=j+Math.imul(ke,Xe)|0,X=X+Math.imul(ke,it)|0,X=X+Math.imul(De,Xe)|0,ie=ie+Math.imul(De,it)|0,j=j+Math.imul(xe,Ee)|0,X=X+Math.imul(xe,Ge)|0,X=X+Math.imul(ye,Ee)|0,ie=ie+Math.imul(ye,Ge)|0,j=j+Math.imul(_e,qe)|0,X=X+Math.imul(_e,At)|0,X=X+Math.imul(fe,qe)|0,ie=ie+Math.imul(fe,At)|0,j=j+Math.imul(se,Mt)|0,X=X+Math.imul(se,Gt)|0,X=X+Math.imul(ae,Mt)|0,ie=ie+Math.imul(ae,Gt)|0,j=j+Math.imul(Z,Ht)|0,X=X+Math.imul(Z,Zt)|0,X=X+Math.imul(Q,Ht)|0,ie=ie+Math.imul(Q,Zt)|0,j=j+Math.imul(H,sr)|0,X=X+Math.imul(H,Gr)|0,X=X+Math.imul(q,sr)|0,ie=ie+Math.imul(q,Gr)|0,j=j+Math.imul(K,qr)|0,X=X+Math.imul(K,st)|0,X=X+Math.imul($,qr)|0,ie=ie+Math.imul($,st)|0;var Se=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Se>>>26)|0,Se&=67108863,j=Math.imul(Ve,Qt),X=Math.imul(Ve,Ot),X=X+Math.imul(dt,Qt)|0,ie=Math.imul(dt,Ot),j=j+Math.imul(We,jt)|0,X=X+Math.imul(We,Nt)|0,X=X+Math.imul(ze,jt)|0,ie=ie+Math.imul(ze,Nt)|0,j=j+Math.imul(Ae,Xe)|0,X=X+Math.imul(Ae,it)|0,X=X+Math.imul(Le,Xe)|0,ie=ie+Math.imul(Le,it)|0,j=j+Math.imul(ke,Ee)|0,X=X+Math.imul(ke,Ge)|0,X=X+Math.imul(De,Ee)|0,ie=ie+Math.imul(De,Ge)|0,j=j+Math.imul(xe,qe)|0,X=X+Math.imul(xe,At)|0,X=X+Math.imul(ye,qe)|0,ie=ie+Math.imul(ye,At)|0,j=j+Math.imul(_e,Mt)|0,X=X+Math.imul(_e,Gt)|0,X=X+Math.imul(fe,Mt)|0,ie=ie+Math.imul(fe,Gt)|0,j=j+Math.imul(se,Ht)|0,X=X+Math.imul(se,Zt)|0,X=X+Math.imul(ae,Ht)|0,ie=ie+Math.imul(ae,Zt)|0,j=j+Math.imul(Z,sr)|0,X=X+Math.imul(Z,Gr)|0,X=X+Math.imul(Q,sr)|0,ie=ie+Math.imul(Q,Gr)|0,j=j+Math.imul(H,qr)|0,X=X+Math.imul(H,st)|0,X=X+Math.imul(q,qr)|0,ie=ie+Math.imul(q,st)|0,j=j+Math.imul(K,Jt)|0,X=X+Math.imul(K,hr)|0,X=X+Math.imul($,Jt)|0,ie=ie+Math.imul($,hr)|0;var ot=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(ot>>>26)|0,ot&=67108863,j=Math.imul(Ve,jt),X=Math.imul(Ve,Nt),X=X+Math.imul(dt,jt)|0,ie=Math.imul(dt,Nt),j=j+Math.imul(We,Xe)|0,X=X+Math.imul(We,it)|0,X=X+Math.imul(ze,Xe)|0,ie=ie+Math.imul(ze,it)|0,j=j+Math.imul(Ae,Ee)|0,X=X+Math.imul(Ae,Ge)|0,X=X+Math.imul(Le,Ee)|0,ie=ie+Math.imul(Le,Ge)|0,j=j+Math.imul(ke,qe)|0,X=X+Math.imul(ke,At)|0,X=X+Math.imul(De,qe)|0,ie=ie+Math.imul(De,At)|0,j=j+Math.imul(xe,Mt)|0,X=X+Math.imul(xe,Gt)|0,X=X+Math.imul(ye,Mt)|0,ie=ie+Math.imul(ye,Gt)|0,j=j+Math.imul(_e,Ht)|0,X=X+Math.imul(_e,Zt)|0,X=X+Math.imul(fe,Ht)|0,ie=ie+Math.imul(fe,Zt)|0,j=j+Math.imul(se,sr)|0,X=X+Math.imul(se,Gr)|0,X=X+Math.imul(ae,sr)|0,ie=ie+Math.imul(ae,Gr)|0,j=j+Math.imul(Z,qr)|0,X=X+Math.imul(Z,st)|0,X=X+Math.imul(Q,qr)|0,ie=ie+Math.imul(Q,st)|0,j=j+Math.imul(H,Jt)|0,X=X+Math.imul(H,hr)|0,X=X+Math.imul(q,Jt)|0,ie=ie+Math.imul(q,hr)|0;var ct=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(ct>>>26)|0,ct&=67108863,j=Math.imul(Ve,Xe),X=Math.imul(Ve,it),X=X+Math.imul(dt,Xe)|0,ie=Math.imul(dt,it),j=j+Math.imul(We,Ee)|0,X=X+Math.imul(We,Ge)|0,X=X+Math.imul(ze,Ee)|0,ie=ie+Math.imul(ze,Ge)|0,j=j+Math.imul(Ae,qe)|0,X=X+Math.imul(Ae,At)|0,X=X+Math.imul(Le,qe)|0,ie=ie+Math.imul(Le,At)|0,j=j+Math.imul(ke,Mt)|0,X=X+Math.imul(ke,Gt)|0,X=X+Math.imul(De,Mt)|0,ie=ie+Math.imul(De,Gt)|0,j=j+Math.imul(xe,Ht)|0,X=X+Math.imul(xe,Zt)|0,X=X+Math.imul(ye,Ht)|0,ie=ie+Math.imul(ye,Zt)|0,j=j+Math.imul(_e,sr)|0,X=X+Math.imul(_e,Gr)|0,X=X+Math.imul(fe,sr)|0,ie=ie+Math.imul(fe,Gr)|0,j=j+Math.imul(se,qr)|0,X=X+Math.imul(se,st)|0,X=X+Math.imul(ae,qr)|0,ie=ie+Math.imul(ae,st)|0,j=j+Math.imul(Z,Jt)|0,X=X+Math.imul(Z,hr)|0,X=X+Math.imul(Q,Jt)|0,ie=ie+Math.imul(Q,hr)|0;var pt=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(pt>>>26)|0,pt&=67108863,j=Math.imul(Ve,Ee),X=Math.imul(Ve,Ge),X=X+Math.imul(dt,Ee)|0,ie=Math.imul(dt,Ge),j=j+Math.imul(We,qe)|0,X=X+Math.imul(We,At)|0,X=X+Math.imul(ze,qe)|0,ie=ie+Math.imul(ze,At)|0,j=j+Math.imul(Ae,Mt)|0,X=X+Math.imul(Ae,Gt)|0,X=X+Math.imul(Le,Mt)|0,ie=ie+Math.imul(Le,Gt)|0,j=j+Math.imul(ke,Ht)|0,X=X+Math.imul(ke,Zt)|0,X=X+Math.imul(De,Ht)|0,ie=ie+Math.imul(De,Zt)|0,j=j+Math.imul(xe,sr)|0,X=X+Math.imul(xe,Gr)|0,X=X+Math.imul(ye,sr)|0,ie=ie+Math.imul(ye,Gr)|0,j=j+Math.imul(_e,qr)|0,X=X+Math.imul(_e,st)|0,X=X+Math.imul(fe,qr)|0,ie=ie+Math.imul(fe,st)|0,j=j+Math.imul(se,Jt)|0,X=X+Math.imul(se,hr)|0,X=X+Math.imul(ae,Jt)|0,ie=ie+Math.imul(ae,hr)|0;var St=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(St>>>26)|0,St&=67108863,j=Math.imul(Ve,qe),X=Math.imul(Ve,At),X=X+Math.imul(dt,qe)|0,ie=Math.imul(dt,At),j=j+Math.imul(We,Mt)|0,X=X+Math.imul(We,Gt)|0,X=X+Math.imul(ze,Mt)|0,ie=ie+Math.imul(ze,Gt)|0,j=j+Math.imul(Ae,Ht)|0,X=X+Math.imul(Ae,Zt)|0,X=X+Math.imul(Le,Ht)|0,ie=ie+Math.imul(Le,Zt)|0,j=j+Math.imul(ke,sr)|0,X=X+Math.imul(ke,Gr)|0,X=X+Math.imul(De,sr)|0,ie=ie+Math.imul(De,Gr)|0,j=j+Math.imul(xe,qr)|0,X=X+Math.imul(xe,st)|0,X=X+Math.imul(ye,qr)|0,ie=ie+Math.imul(ye,st)|0,j=j+Math.imul(_e,Jt)|0,X=X+Math.imul(_e,hr)|0,X=X+Math.imul(fe,Jt)|0,ie=ie+Math.imul(fe,hr)|0;var xt=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(xt>>>26)|0,xt&=67108863,j=Math.imul(Ve,Mt),X=Math.imul(Ve,Gt),X=X+Math.imul(dt,Mt)|0,ie=Math.imul(dt,Gt),j=j+Math.imul(We,Ht)|0,X=X+Math.imul(We,Zt)|0,X=X+Math.imul(ze,Ht)|0,ie=ie+Math.imul(ze,Zt)|0,j=j+Math.imul(Ae,sr)|0,X=X+Math.imul(Ae,Gr)|0,X=X+Math.imul(Le,sr)|0,ie=ie+Math.imul(Le,Gr)|0,j=j+Math.imul(ke,qr)|0,X=X+Math.imul(ke,st)|0,X=X+Math.imul(De,qr)|0,ie=ie+Math.imul(De,st)|0,j=j+Math.imul(xe,Jt)|0,X=X+Math.imul(xe,hr)|0,X=X+Math.imul(ye,Jt)|0,ie=ie+Math.imul(ye,hr)|0;var Pt=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,j=Math.imul(Ve,Ht),X=Math.imul(Ve,Zt),X=X+Math.imul(dt,Ht)|0,ie=Math.imul(dt,Zt),j=j+Math.imul(We,sr)|0,X=X+Math.imul(We,Gr)|0,X=X+Math.imul(ze,sr)|0,ie=ie+Math.imul(ze,Gr)|0,j=j+Math.imul(Ae,qr)|0,X=X+Math.imul(Ae,st)|0,X=X+Math.imul(Le,qr)|0,ie=ie+Math.imul(Le,st)|0,j=j+Math.imul(ke,Jt)|0,X=X+Math.imul(ke,hr)|0,X=X+Math.imul(De,Jt)|0,ie=ie+Math.imul(De,hr)|0;var Xt=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,j=Math.imul(Ve,sr),X=Math.imul(Ve,Gr),X=X+Math.imul(dt,sr)|0,ie=Math.imul(dt,Gr),j=j+Math.imul(We,qr)|0,X=X+Math.imul(We,st)|0,X=X+Math.imul(ze,qr)|0,ie=ie+Math.imul(ze,st)|0,j=j+Math.imul(Ae,Jt)|0,X=X+Math.imul(Ae,hr)|0,X=X+Math.imul(Le,Jt)|0,ie=ie+Math.imul(Le,hr)|0;var or=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(or>>>26)|0,or&=67108863,j=Math.imul(Ve,qr),X=Math.imul(Ve,st),X=X+Math.imul(dt,qr)|0,ie=Math.imul(dt,st),j=j+Math.imul(We,Jt)|0,X=X+Math.imul(We,hr)|0,X=X+Math.imul(ze,Jt)|0,ie=ie+Math.imul(ze,hr)|0;var Pr=(ee+j|0)+((X&8191)<<13)|0;ee=(ie+(X>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,j=Math.imul(Ve,Jt),X=Math.imul(Ve,hr),X=X+Math.imul(dt,Jt)|0,ie=Math.imul(dt,hr);var Ar=(ee+j|0)+((X&8191)<<13)|0;return ee=(ie+(X>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,Y[0]=Sr,Y[1]=tt,Y[2]=Qe,Y[3]=lt,Y[4]=ft,Y[5]=Et,Y[6]=Vt,Y[7]=Pe,Y[8]=Se,Y[9]=ot,Y[10]=ct,Y[11]=pt,Y[12]=St,Y[13]=xt,Y[14]=Pt,Y[15]=Xt,Y[16]=or,Y[17]=Pr,Y[18]=Ar,ee!==0&&(Y[19]=ee,O.length++),O};Math.imul||(x=l);function c(I,D,R){R.negative=D.negative^I.negative,R.length=I.length+D.length;for(var O=0,z=0,G=0;G<R.length-1;G++){var Y=z;z=0;for(var ee=O&67108863,j=Math.min(G,D.length-1),X=Math.max(0,G-I.length+1);X<=j;X++){var ie=G-X,he=I.words[ie]|0,K=D.words[X]|0,$=he*K,U=$&67108863;Y=Y+($/67108864|0)|0,U=U+ee|0,ee=U&67108863,Y=Y+(U>>>26)|0,z+=Y>>>26,Y&=67108863}R.words[G]=ee,O=Y,Y=z}return O!==0?R.words[G]=O:R.length--,R.strip()}function M(I,D,R){var O=new w;return O.mulp(I,D,R)}r.prototype.mulTo=function(D,R){var O,z=this.length+D.length;return this.length===10&&D.length===10?O=x(this,D,R):z<63?O=l(this,D,R):z<1024?O=c(this,D,R):O=M(this,D,R),O};function w(I,D){this.x=I,this.y=D}w.prototype.makeRBT=function(D){for(var R=new Array(D),O=r.prototype._countBits(D)-1,z=0;z<D;z++)R[z]=this.revBin(z,O,D);return R},w.prototype.revBin=function(D,R,O){if(D===0||D===O-1)return D;for(var z=0,G=0;G<R;G++)z|=(D&1)<<R-G-1,D>>=1;return z},w.prototype.permute=function(D,R,O,z,G,Y){for(var ee=0;ee<Y;ee++)z[ee]=R[D[ee]],G[ee]=O[D[ee]]},w.prototype.transform=function(D,R,O,z,G,Y){this.permute(Y,D,R,O,z,G);for(var ee=1;ee<G;ee<<=1)for(var j=ee<<1,X=Math.cos(2*Math.PI/j),ie=Math.sin(2*Math.PI/j),he=0;he<G;he+=j)for(var K=X,$=ie,U=0;U<ee;U++){var H=O[he+U],q=z[he+U],re=O[he+U+ee],Z=z[he+U+ee],Q=K*re-$*Z;Z=K*Z+$*re,re=Q,O[he+U]=H+re,z[he+U]=q+Z,O[he+U+ee]=H-re,z[he+U+ee]=q-Z,U!==j&&(Q=X*K-ie*$,$=X*$+ie*K,K=Q)}},w.prototype.guessLen13b=function(D,R){var O=Math.max(R,D)|1,z=O&1,G=0;for(O=O/2|0;O;O=O>>>1)G++;return 1<<G+1+z},w.prototype.conjugate=function(D,R,O){if(!(O<=1))for(var z=0;z<O/2;z++){var G=D[z];D[z]=D[O-z-1],D[O-z-1]=G,G=R[z],R[z]=-R[O-z-1],R[O-z-1]=-G}},w.prototype.normalize13b=function(D,R){for(var O=0,z=0;z<R/2;z++){var G=Math.round(D[2*z+1]/R)*8192+Math.round(D[2*z]/R)+O;D[z]=G&67108863,G<67108864?O=0:O=G/67108864|0}return D},w.prototype.convert13b=function(D,R,O,z){for(var G=0,Y=0;Y<R;Y++)G=G+(D[Y]|0),O[2*Y]=G&8191,G=G>>>13,O[2*Y+1]=G&8191,G=G>>>13;for(Y=2*R;Y<z;++Y)O[Y]=0;i(G===0),i((G&-8192)===0)},w.prototype.stub=function(D){for(var R=new Array(D),O=0;O<D;O++)R[O]=0;return R},w.prototype.mulp=function(D,R,O){var z=2*this.guessLen13b(D.length,R.length),G=this.makeRBT(z),Y=this.stub(z),ee=new Array(z),j=new Array(z),X=new Array(z),ie=new Array(z),he=new Array(z),K=new Array(z),$=O.words;$.length=z,this.convert13b(D.words,D.length,ee,z),this.convert13b(R.words,R.length,ie,z),this.transform(ee,Y,j,X,z,G),this.transform(ie,Y,he,K,z,G);for(var U=0;U<z;U++){var H=j[U]*he[U]-X[U]*K[U];X[U]=j[U]*K[U]+X[U]*he[U],j[U]=H}return this.conjugate(j,X,z),this.transform(j,X,$,Y,z,G),this.conjugate($,Y,z),this.normalize13b($,z),O.negative=D.negative^R.negative,O.length=D.length+R.length,O.strip()},r.prototype.mul=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},r.prototype.mulf=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),M(this,D,R)},r.prototype.imul=function(D){return this.clone().mulTo(D,this)},r.prototype.imuln=function(D){i(typeof D=="number"),i(D<67108864);for(var R=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*D,G=(z&67108863)+(R&67108863);R>>=26,R+=z/67108864|0,R+=G>>>26,this.words[O]=G&67108863}return R!==0&&(this.words[O]=R,this.length++),this},r.prototype.muln=function(D){return this.clone().imuln(D)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(D){var R=y(D);if(R.length===0)return new r(1);for(var O=this,z=0;z<R.length&&R[z]===0;z++,O=O.sqr());if(++z<R.length)for(var G=O.sqr();z<R.length;z++,G=G.sqr())R[z]!==0&&(O=O.mul(G));return O},r.prototype.iushln=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=67108863>>>26-R<<26-R,G;if(R!==0){var Y=0;for(G=0;G<this.length;G++){var ee=this.words[G]&z,j=(this.words[G]|0)-ee<<R;this.words[G]=j|Y,Y=ee>>>26-R}Y&&(this.words[G]=Y,this.length++)}if(O!==0){for(G=this.length-1;G>=0;G--)this.words[G+O]=this.words[G];for(G=0;G<O;G++)this.words[G]=0;this.length+=O}return this.strip()},r.prototype.ishln=function(D){return i(this.negative===0),this.iushln(D)},r.prototype.iushrn=function(D,R,O){i(typeof D=="number"&&D>=0);var z;R?z=(R-R%26)/26:z=0;var G=D%26,Y=Math.min((D-G)/26,this.length),ee=67108863^67108863>>>G<<G,j=O;if(z-=Y,z=Math.max(0,z),j){for(var X=0;X<Y;X++)j.words[X]=this.words[X];j.length=Y}if(Y!==0)if(this.length>Y)for(this.length-=Y,X=0;X<this.length;X++)this.words[X]=this.words[X+Y];else this.words[0]=0,this.length=1;var ie=0;for(X=this.length-1;X>=0&&(ie!==0||X>=z);X--){var he=this.words[X]|0;this.words[X]=ie<<26-G|he>>>G,ie=he&ee}return j&&ie!==0&&(j.words[j.length++]=ie),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(D,R,O){return i(this.negative===0),this.iushrn(D,R,O)},r.prototype.shln=function(D){return this.clone().ishln(D)},r.prototype.ushln=function(D){return this.clone().iushln(D)},r.prototype.shrn=function(D){return this.clone().ishrn(D)},r.prototype.ushrn=function(D){return this.clone().iushrn(D)},r.prototype.testn=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return!1;var G=this.words[O];return!!(G&z)},r.prototype.imaskn=function(D){i(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(R!==0&&O++,this.length=Math.min(O,this.length),R!==0){var z=67108863^67108863>>>R<<R;this.words[this.length-1]&=z}return this.strip()},r.prototype.maskn=function(D){return this.clone().imaskn(D)},r.prototype.iaddn=function(D){return i(typeof D=="number"),i(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},r.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},r.prototype.isubn=function(D){if(i(typeof D=="number"),i(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},r.prototype.addn=function(D){return this.clone().iaddn(D)},r.prototype.subn=function(D){return this.clone().isubn(D)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(D,R,O){var z=D.length+O,G;this._expand(z);var Y,ee=0;for(G=0;G<D.length;G++){Y=(this.words[G+O]|0)+ee;var j=(D.words[G]|0)*R;Y-=j&67108863,ee=(Y>>26)-(j/67108864|0),this.words[G+O]=Y&67108863}for(;G<this.length-O;G++)Y=(this.words[G+O]|0)+ee,ee=Y>>26,this.words[G+O]=Y&67108863;if(ee===0)return this.strip();for(i(ee===-1),ee=0,G=0;G<this.length;G++)Y=-(this.words[G]|0)+ee,ee=Y>>26,this.words[G]=Y&67108863;return this.negative=1,this.strip()},r.prototype._wordDiv=function(D,R){var O=this.length-D.length,z=this.clone(),G=D,Y=G.words[G.length-1]|0,ee=this._countBits(Y);O=26-ee,O!==0&&(G=G.ushln(O),z.iushln(O),Y=G.words[G.length-1]|0);var j=z.length-G.length,X;if(R!=="mod"){X=new r(null),X.length=j+1,X.words=new Array(X.length);for(var ie=0;ie<X.length;ie++)X.words[ie]=0}var he=z.clone()._ishlnsubmul(G,1,j);he.negative===0&&(z=he,X&&(X.words[j]=1));for(var K=j-1;K>=0;K--){var $=(z.words[G.length+K]|0)*67108864+(z.words[G.length+K-1]|0);for($=Math.min($/Y|0,67108863),z._ishlnsubmul(G,$,K);z.negative!==0;)$--,z.negative=0,z._ishlnsubmul(G,1,K),z.isZero()||(z.negative^=1);X&&(X.words[K]=$)}return X&&X.strip(),z.strip(),R!=="div"&&O!==0&&z.iushrn(O),{div:X||null,mod:z}},r.prototype.divmod=function(D,R,O){if(i(!D.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var z,G,Y;return this.negative!==0&&D.negative===0?(Y=this.neg().divmod(D,R),R!=="mod"&&(z=Y.div.neg()),R!=="div"&&(G=Y.mod.neg(),O&&G.negative!==0&&G.iadd(D)),{div:z,mod:G}):this.negative===0&&D.negative!==0?(Y=this.divmod(D.neg(),R),R!=="mod"&&(z=Y.div.neg()),{div:z,mod:Y.mod}):(this.negative&D.negative)!==0?(Y=this.neg().divmod(D.neg(),R),R!=="div"&&(G=Y.mod.neg(),O&&G.negative!==0&&G.isub(D)),{div:Y.div,mod:G}):D.length>this.length||this.cmp(D)<0?{div:new r(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new r(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new r(this.modn(D.words[0]))}:this._wordDiv(D,R)},r.prototype.div=function(D){return this.divmod(D,"div",!1).div},r.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},r.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},r.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var O=R.div.negative!==0?R.mod.isub(D):R.mod,z=D.ushrn(1),G=D.andln(1),Y=O.cmp(z);return Y<0||G===1&&Y===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},r.prototype.modn=function(D){i(D<=67108863);for(var R=(1<<26)%D,O=0,z=this.length-1;z>=0;z--)O=(R*O+(this.words[z]|0))%D;return O},r.prototype.idivn=function(D){i(D<=67108863);for(var R=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+R*67108864;this.words[O]=z/D|0,R=z%D}return this.strip()},r.prototype.divn=function(D){return this.clone().idivn(D)},r.prototype.egcd=function(D){i(D.negative===0),i(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new r(1),G=new r(0),Y=new r(0),ee=new r(1),j=0;R.isEven()&&O.isEven();)R.iushrn(1),O.iushrn(1),++j;for(var X=O.clone(),ie=R.clone();!R.isZero();){for(var he=0,K=1;(R.words[0]&K)===0&&he<26;++he,K<<=1);if(he>0)for(R.iushrn(he);he-- >0;)(z.isOdd()||G.isOdd())&&(z.iadd(X),G.isub(ie)),z.iushrn(1),G.iushrn(1);for(var $=0,U=1;(O.words[0]&U)===0&&$<26;++$,U<<=1);if($>0)for(O.iushrn($);$-- >0;)(Y.isOdd()||ee.isOdd())&&(Y.iadd(X),ee.isub(ie)),Y.iushrn(1),ee.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(Y),G.isub(ee)):(O.isub(R),Y.isub(z),ee.isub(G))}return{a:Y,b:ee,gcd:O.iushln(j)}},r.prototype._invmp=function(D){i(D.negative===0),i(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new r(1),G=new r(0),Y=O.clone();R.cmpn(1)>0&&O.cmpn(1)>0;){for(var ee=0,j=1;(R.words[0]&j)===0&&ee<26;++ee,j<<=1);if(ee>0)for(R.iushrn(ee);ee-- >0;)z.isOdd()&&z.iadd(Y),z.iushrn(1);for(var X=0,ie=1;(O.words[0]&ie)===0&&X<26;++X,ie<<=1);if(X>0)for(O.iushrn(X);X-- >0;)G.isOdd()&&G.iadd(Y),G.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(G)):(O.isub(R),G.isub(z))}var he;return R.cmpn(1)===0?he=z:he=G,he.cmpn(0)<0&&he.iadd(D),he},r.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),O=D.clone();R.negative=0,O.negative=0;for(var z=0;R.isEven()&&O.isEven();z++)R.iushrn(1),O.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;O.isEven();)O.iushrn(1);var G=R.cmp(O);if(G<0){var Y=R;R=O,O=Y}else if(G===0||O.cmpn(1)===0)break;R.isub(O)}while(!0);return O.iushln(z)},r.prototype.invm=function(D){return this.egcd(D).a.umod(D)},r.prototype.isEven=function(){return(this.words[0]&1)===0},r.prototype.isOdd=function(){return(this.words[0]&1)===1},r.prototype.andln=function(D){return this.words[0]&D},r.prototype.bincn=function(D){i(typeof D=="number");var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return this._expand(O+1),this.words[O]|=z,this;for(var G=z,Y=O;G!==0&&Y<this.length;Y++){var ee=this.words[Y]|0;ee+=G,G=ee>>>26,ee&=67108863,this.words[Y]=ee}return G!==0&&(this.words[Y]=G,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var O;if(this.length>1)O=1;else{R&&(D=-D),i(D<=67108863,"Number is too big");var z=this.words[0]|0;O=z===D?0:z<D?-1:1}return this.negative!==0?-O|0:O},r.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},r.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,O=this.length-1;O>=0;O--){var z=this.words[O]|0,G=D.words[O]|0;if(z!==G){z<G?R=-1:z>G&&(R=1);break}}return R},r.prototype.gtn=function(D){return this.cmpn(D)===1},r.prototype.gt=function(D){return this.cmp(D)===1},r.prototype.gten=function(D){return this.cmpn(D)>=0},r.prototype.gte=function(D){return this.cmp(D)>=0},r.prototype.ltn=function(D){return this.cmpn(D)===-1},r.prototype.lt=function(D){return this.cmp(D)===-1},r.prototype.lten=function(D){return this.cmpn(D)<=0},r.prototype.lte=function(D){return this.cmp(D)<=0},r.prototype.eqn=function(D){return this.cmpn(D)===0},r.prototype.eq=function(D){return this.cmp(D)===0},r.red=function(D){return new P(D)},r.prototype.toRed=function(D){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(D){return this.red=D,this},r.prototype.forceRed=function(D){return i(!this.red,"Already a number in reduction context"),this._forceRed(D)},r.prototype.redAdd=function(D){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},r.prototype.redIAdd=function(D){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},r.prototype.redSub=function(D){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},r.prototype.redISub=function(D){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},r.prototype.redShl=function(D){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},r.prototype.redMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},r.prototype.redIMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(D){return i(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var p={k256:null,p224:null,p192:null,p25519:null};function _(I,D){this.name=I,this.p=new r(D,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var D=new r(null);return D.words=new Array(Math.ceil(this.n/13)),D},_.prototype.ireduce=function(D){var R=D,O;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),O=R.bitLength();while(O>this.n);var z=O<this.n?-1:R.ucmp(this.p);return z===0?(R.words[0]=0,R.length=1):z>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},_.prototype.split=function(D,R){D.iushrn(this.n,0,R)},_.prototype.imulK=function(D){return D.imul(this.k)};function h(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(h,_),h.prototype.split=function(D,R){for(var O=4194303,z=Math.min(D.length,9),G=0;G<z;G++)R.words[G]=D.words[G];if(R.length=z,D.length<=9){D.words[0]=0,D.length=1;return}var Y=D.words[9];for(R.words[R.length++]=Y&O,G=10;G<D.length;G++){var ee=D.words[G]|0;D.words[G-10]=(ee&O)<<4|Y>>>22,Y=ee}Y>>>=22,D.words[G-10]=Y,Y===0&&D.length>10?D.length-=10:D.length-=9},h.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,O=0;O<D.length;O++){var z=D.words[O]|0;R+=z*977,D.words[O]=R&67108863,R=z*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function L(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,_);function E(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(E,_);function S(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(S,_),S.prototype.imulK=function(D){for(var R=0,O=0;O<D.length;O++){var z=(D.words[O]|0)*19+R,G=z&67108863;z>>>=26,D.words[O]=G,R=z}return R!==0&&(D.words[D.length++]=R),D},r._prime=function(D){if(p[D])return p[D];var R;if(D==="k256")R=new h;else if(D==="p224")R=new L;else if(D==="p192")R=new E;else if(D==="p25519")R=new S;else throw new Error("Unknown prime "+D);return p[D]=R,R};function P(I){if(typeof I=="string"){var D=r._prime(I);this.m=D.p,this.prime=D}else i(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}P.prototype._verify1=function(D){i(D.negative===0,"red works only with positives"),i(D.red,"red works only with red numbers")},P.prototype._verify2=function(D,R){i((D.negative|R.negative)===0,"red works only with positives"),i(D.red&&D.red===R.red,"red works only with red numbers")},P.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},P.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},P.prototype.add=function(D,R){this._verify2(D,R);var O=D.add(R);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},P.prototype.iadd=function(D,R){this._verify2(D,R);var O=D.iadd(R);return O.cmp(this.m)>=0&&O.isub(this.m),O},P.prototype.sub=function(D,R){this._verify2(D,R);var O=D.sub(R);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},P.prototype.isub=function(D,R){this._verify2(D,R);var O=D.isub(R);return O.cmpn(0)<0&&O.iadd(this.m),O},P.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},P.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},P.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},P.prototype.isqr=function(D){return this.imul(D,D.clone())},P.prototype.sqr=function(D){return this.mul(D,D)},P.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(i(R%2===1),R===3){var O=this.m.add(new r(1)).iushrn(2);return this.pow(D,O)}for(var z=this.m.subn(1),G=0;!z.isZero()&&z.andln(1)===0;)G++,z.iushrn(1);i(!z.isZero());var Y=new r(1).toRed(this),ee=Y.redNeg(),j=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new r(2*X*X).toRed(this);this.pow(X,j).cmp(ee)!==0;)X.redIAdd(ee);for(var ie=this.pow(X,z),he=this.pow(D,z.addn(1).iushrn(1)),K=this.pow(D,z),$=G;K.cmp(Y)!==0;){for(var U=K,H=0;U.cmp(Y)!==0;H++)U=U.redSqr();i(H<$);var q=this.pow(ie,new r(1).iushln($-H-1));he=he.redMul(q),ie=q.redSqr(),K=K.redMul(ie),$=H}return he},P.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(D,R){if(R.isZero())return new r(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var O=4,z=new Array(1<<O);z[0]=new r(1).toRed(this),z[1]=D;for(var G=2;G<z.length;G++)z[G]=this.mul(z[G-1],D);var Y=z[0],ee=0,j=0,X=R.bitLength()%26;for(X===0&&(X=26),G=R.length-1;G>=0;G--){for(var ie=R.words[G],he=X-1;he>=0;he--){var K=ie>>he&1;if(Y!==z[0]&&(Y=this.sqr(Y)),K===0&&ee===0){j=0;continue}ee<<=1,ee|=K,j++,!(j!==O&&(G!==0||he!==0))&&(Y=this.mul(Y,z[ee]),j=0,ee=0)}X=26}return Y},P.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},P.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},r.mont=function(D){return new F(D)};function F(I){P.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(F,P),F.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},F.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},F.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var O=D.imul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=O.isub(z).iushrn(this.shift),Y=G;return G.cmp(this.m)>=0?Y=G.isub(this.m):G.cmpn(0)<0&&(Y=G.iadd(this.m)),Y._forceRed(this)},F.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new r(0)._forceRed(this);var O=D.mul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=O.isub(z).iushrn(this.shift),Y=G;return G.cmp(this.m)>=0?Y=G.isub(this.m):G.cmpn(0)<0&&(Y=G.iadd(this.m)),Y._forceRed(this)},F.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof A>"u"||A,this)},{buffer:2}],34:[function(u,A,T){A.exports=e;function e(a){var i,n,r,v=a.length,s=0;for(i=0;i<v;++i)s+=a[i].length;var o=new Array(s),b=0;for(i=0;i<v;++i){var g=a[i],d=g.length;for(n=0;n<d;++n){var f=o[b++]=new Array(d-1),y=0;for(r=0;r<d;++r)r!==n&&(f[y++]=g[r]);if(n&1){var l=f[1];f[1]=f[0],f[0]=l}}}return o}},{}],35:[function(u,A,T){A.exports=d;var e=u("typedarray-pool"),a=u("./lib/sweep"),i=u("./lib/intersect");function n(f,y){for(var l=0;l<f;++l)if(!(y[l]<=y[l+f]))return!0;return!1}function r(f,y,l,x){for(var c=0,M=0,w=0,p=f.length;w<p;++w){var _=f[w];if(!n(y,_)){for(var h=0;h<2*y;++h)l[c++]=_[h];x[M++]=w}}return M}function v(f,y,l,x){var c=f.length,M=y.length;if(!(c<=0||M<=0)){var w=f[0].length>>>1;if(!(w<=0)){var p,_=e.mallocDouble(2*w*c),h=e.mallocInt32(c);if(c=r(f,w,_,h),c>0){if(w===1&&x)a.init(c),p=a.sweepComplete(w,l,0,c,_,h,0,c,_,h);else{var L=e.mallocDouble(2*w*M),E=e.mallocInt32(M);M=r(y,w,L,E),M>0&&(a.init(c+M),w===1?p=a.sweepBipartite(w,l,0,c,_,h,0,M,L,E):p=i(w,l,x,c,_,h,M,L,E),e.free(L),e.free(E))}e.free(_),e.free(h)}return p}}}var s;function o(f,y){s.push([f,y])}function b(f){return s=[],v(f,f,o,!0),s}function g(f,y){return s=[],v(f,y,o,!1),s}function d(f,y,l){switch(arguments.length){case 1:return b(f);case 2:return typeof y=="function"?v(f,f,y,!0):g(f,y);case 3:return v(f,y,l,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(u,A,T){function e(){function n(s,o,b,g,d,f,y,l,x,c,M){for(var w=2*s,p=g,_=w*g;p<d;++p,_+=w){var h=f[o+_],L=f[o+_+s],E=y[p];e:for(var S=l,P=w*l;S<x;++S,P+=w){var F=c[o+P],I=c[o+P+s],D=M[S];if(!(I<h||L<F)){for(var R=o+1;R<s;++R){var O=f[R+_],z=f[R+s+_],G=c[R+P],Y=c[R+s+P];if(z<G||Y<O)continue e}var ee=b(E,D);if(ee!==void 0)return ee}}}}function r(s,o,b,g,d,f,y,l,x,c,M){for(var w=2*s,p=l,_=w*l;p<x;++p,_+=w){var h=c[o+_],L=c[o+_+s],E=M[p];e:for(var S=g,P=w*g;S<d;++S,P+=w){var F=f[o+P],I=f[o+P+s],D=y[S];if(!(L<F||I<h)){for(var R=o+1;R<s;++R){var O=f[R+P],z=f[R+s+P],G=c[R+_],Y=c[R+s+_];if(z<G||Y<O)continue e}var ee=b(D,E);if(ee!==void 0)return ee}}}}function v(s,o,b,g,d,f,y,l,x,c,M){return d-g>x-l?n(s,o,b,g,d,f,y,l,x,c,M):r(s,o,b,g,d,f,y,l,x,c,M)}return v}function a(){function n(b,g,d,f,y,l,x,c,M,w,p){for(var _=2*b,h=f,L=_*f;h<y;++h,L+=_){var E=l[g+L],S=l[g+L+b],P=x[h];e:for(var F=c,I=_*c;F<M;++F,I+=_){var D=w[g+I],R=p[F];if(!(D<=E||S<D)){for(var O=g+1;O<b;++O){var z=l[O+L],G=l[O+b+L],Y=w[O+I],ee=w[O+b+I];if(G<Y||ee<z)continue e}var j=d(R,P);if(j!==void 0)return j}}}}function r(b,g,d,f,y,l,x,c,M,w,p){for(var _=2*b,h=f,L=_*f;h<y;++h,L+=_){var E=l[g+L],S=l[g+L+b],P=x[h];e:for(var F=c,I=_*c;F<M;++F,I+=_){var D=w[g+I],R=p[F];if(!(D<E||S<D)){for(var O=g+1;O<b;++O){var z=l[O+L],G=l[O+b+L],Y=w[O+I],ee=w[O+b+I];if(G<Y||ee<z)continue e}var j=d(P,R);if(j!==void 0)return j}}}}function v(b,g,d,f,y,l,x,c,M,w,p){for(var _=2*b,h=c,L=_*c;h<M;++h,L+=_){var E=w[g+L],S=p[h];e:for(var P=f,F=_*f;P<y;++P,F+=_){var I=l[g+F],D=l[g+F+b],R=x[P];if(!(E<=I||D<E)){for(var O=g+1;O<b;++O){var z=l[O+F],G=l[O+b+F],Y=w[O+L],ee=w[O+b+L];if(G<Y||ee<z)continue e}var j=d(S,R);if(j!==void 0)return j}}}}function s(b,g,d,f,y,l,x,c,M,w,p){for(var _=2*b,h=c,L=_*c;h<M;++h,L+=_){var E=w[g+L],S=p[h];e:for(var P=f,F=_*f;P<y;++P,F+=_){var I=l[g+F],D=l[g+F+b],R=x[P];if(!(E<I||D<E)){for(var O=g+1;O<b;++O){var z=l[O+F],G=l[O+b+F],Y=w[O+L],ee=w[O+b+L];if(G<Y||ee<z)continue e}var j=d(R,S);if(j!==void 0)return j}}}}function o(b,g,d,f,y,l,x,c,M,w,p,_){return l-y>w-M?f?n(b,g,d,y,l,x,c,M,w,p,_):r(b,g,d,y,l,x,c,M,w,p,_):f?v(b,g,d,y,l,x,c,M,w,p,_):s(b,g,d,y,l,x,c,M,w,p,_)}return o}function i(n){return n?e():a()}T.partial=i(!1),T.full=i(!0)},{}],37:[function(u,A,T){A.exports=I;var e=u("typedarray-pool"),a=u("bit-twiddle"),i=u("./brute"),n=i.partial,r=i.full,v=u("./sweep"),s=u("./median"),o=u("./partition"),b=128,g=1<<22,d=1<<22,f=o("!(lo>=p0)&&!(p1>=hi)"),y=o("lo===p0"),l=o("lo<p0"),x=o("hi<=p0"),c=o("lo<=p0&&p0<=hi"),M=o("lo<p0&&p0<=hi"),w=6,p=2,_=1024,h=e.mallocInt32(_),L=e.mallocDouble(_);function E(D,R){var O=8*a.log2(R+1)*(D+1)|0,z=a.nextPow2(w*O);h.length<z&&(e.free(h),h=e.mallocInt32(z));var G=a.nextPow2(p*O);L.length<G&&(e.free(L),L=e.mallocDouble(G))}function S(D,R,O,z,G,Y,ee,j,X){var ie=w*D;h[ie]=R,h[ie+1]=O,h[ie+2]=z,h[ie+3]=G,h[ie+4]=Y,h[ie+5]=ee;var he=p*D;L[he]=j,L[he+1]=X}function P(D,R,O,z,G,Y,ee,j,X,ie,he){var K=2*D,$=X*K,U=ie[$+R];e:for(var H=G,q=G*K;H<Y;++H,q+=K){var re=ee[q+R],Z=ee[q+R+D];if(!(U<re||Z<U)&&!(z&&U===re)){for(var Q=j[H],oe=R+1;oe<D;++oe){var re=ee[q+oe],Z=ee[q+oe+D],se=ie[$+oe],ae=ie[$+oe+D];if(Z<se||ae<re)continue e}var le;if(z?le=O(he,Q):le=O(Q,he),le!==void 0)return le}}}function F(D,R,O,z,G,Y,ee,j,X,ie){var he=2*D,K=j*he,$=X[K+R];e:for(var U=z,H=z*he;U<G;++U,H+=he){var q=ee[U];if(q!==ie){var re=Y[H+R],Z=Y[H+R+D];if(!($<re||Z<$)){for(var Q=R+1;Q<D;++Q){var re=Y[H+Q],Z=Y[H+Q+D],oe=X[K+Q],se=X[K+Q+D];if(Z<oe||se<re)continue e}var ae=O(q,ie);if(ae!==void 0)return ae}}}}function I(D,R,O,z,G,Y,ee,j,X){E(D,z+ee);var ie=0,he=2*D,K;for(S(ie++,0,0,z,0,ee,O?16:0,-1/0,1/0),O||S(ie++,0,0,ee,0,z,1,-1/0,1/0);ie>0;){ie-=1;var $=ie*w,U=h[$],H=h[$+1],q=h[$+2],re=h[$+3],Z=h[$+4],Q=h[$+5],oe=ie*p,se=L[oe],ae=L[oe+1],le=Q&1,_e=!!(Q&16),fe=G,me=Y,xe=j,ye=X;if(le&&(fe=j,me=X,xe=G,ye=Y),!(Q&2&&(q=l(D,U,H,q,fe,me,ae),H>=q))&&!(Q&4&&(H=x(D,U,H,q,fe,me,se),H>=q))){var be=q-H,ke=Z-re;if(_e){if(D*be*(be+ke)<d){if(K=v.scanComplete(D,U,R,H,q,fe,me,re,Z,xe,ye),K!==void 0)return K;continue}}else if(D*Math.min(be,ke)<b){if(K=n(D,U,R,le,H,q,fe,me,re,Z,xe,ye),K!==void 0)return K;continue}else if(D*be*ke<g){if(K=v.scanBipartite(D,U,R,le,H,q,fe,me,re,Z,xe,ye),K!==void 0)return K;continue}var De=f(D,U,H,q,fe,me,se,ae);if(H<De)if(D*(De-H)<b){if(K=r(D,U+1,R,H,De,fe,me,re,Z,xe,ye),K!==void 0)return K}else if(U===D-2){if(le?K=v.sweepBipartite(D,R,re,Z,xe,ye,H,De,fe,me):K=v.sweepBipartite(D,R,H,De,fe,me,re,Z,xe,ye),K!==void 0)return K}else S(ie++,U+1,H,De,re,Z,le,-1/0,1/0),S(ie++,U+1,re,Z,H,De,le^1,-1/0,1/0);if(De<q){var He=s(D,U,re,Z,xe,ye),Ae=xe[he*He+U],Le=y(D,U,He,Z,xe,ye,Ae);if(Le<Z&&S(ie++,U,De,q,Le,Z,(le|4)+(_e?16:0),Ae,ae),re<He&&S(ie++,U,De,q,re,He,(le|2)+(_e?16:0),se,Ae),He+1===Le){if(_e?K=F(D,U,R,De,q,fe,me,He,xe,ye[He]):K=P(D,U,R,le,De,q,fe,me,He,xe,ye[He]),K!==void 0)return K}else if(He<Le){var Ze;if(_e){if(Ze=c(D,U,De,q,fe,me,Ae),De<Ze){var We=y(D,U,De,Ze,fe,me,Ae);if(U===D-2){if(De<We&&(K=v.sweepComplete(D,R,De,We,fe,me,He,Le,xe,ye),K!==void 0)||We<Ze&&(K=v.sweepBipartite(D,R,We,Ze,fe,me,He,Le,xe,ye),K!==void 0))return K}else De<We&&S(ie++,U+1,De,We,He,Le,16,-1/0,1/0),We<Ze&&(S(ie++,U+1,We,Ze,He,Le,0,-1/0,1/0),S(ie++,U+1,He,Le,We,Ze,1,-1/0,1/0))}}else le?Ze=M(D,U,De,q,fe,me,Ae):Ze=c(D,U,De,q,fe,me,Ae),De<Ze&&(U===D-2?le?K=v.sweepBipartite(D,R,He,Le,xe,ye,De,Ze,fe,me):K=v.sweepBipartite(D,R,De,Ze,fe,me,He,Le,xe,ye):(S(ie++,U+1,De,Ze,He,Le,le,-1/0,1/0),S(ie++,U+1,He,Le,De,Ze,le^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(u,A,T){A.exports=r;var e=u("./partition"),a=e("lo<p0"),i=8;function n(v,s,o,b,g,d){for(var f=2*v,y=f*(o+1)+s,l=o+1;l<b;++l,y+=f)for(var x=g[y],c=l,M=f*(l-1);c>o&&g[M+s]>x;--c,M-=f){for(var w=M,p=M+f,_=0;_<f;++_,++w,++p){var h=g[w];g[w]=g[p],g[p]=h}var L=d[c];d[c]=d[c-1],d[c-1]=L}}function r(v,s,o,b,g,d){if(b<=o+1)return o;for(var f=o,y=b,l=b+o>>>1,x=2*v,c=l,M=g[x*l+s];f<y;){if(y-f<i){n(v,s,f,y,g,d),M=g[x*l+s];break}var w=y-f,p=Math.random()*w+f|0,_=g[x*p+s],h=Math.random()*w+f|0,L=g[x*h+s],E=Math.random()*w+f|0,S=g[x*E+s];_<=L?S>=L?(c=h,M=L):_>=S?(c=p,M=_):(c=E,M=S):L>=S?(c=h,M=L):S>=_?(c=p,M=_):(c=E,M=S);for(var I=x*(y-1),D=x*c,P=0;P<x;++P,++I,++D){var F=g[I];g[I]=g[D],g[D]=F}var R=d[y-1];d[y-1]=d[c],d[c]=R,c=a(v,s,f,y-1,g,d,M);for(var I=x*(y-1),D=x*c,P=0;P<x;++P,++I,++D){var F=g[I];g[I]=g[D],g[D]=F}var R=d[y-1];if(d[y-1]=d[c],d[c]=R,l<c){for(y=c-1;f<y&&g[x*(y-1)+s]===M;)y-=1;y+=1}else if(c<l)for(f=c+1;f<y&&g[x*f+s]===M;)f+=1;else break}return a(v,s,o,l,g,d,g[x*l+s])}},{"./partition":39}],39:[function(u,A,T){A.exports=a;var e={"lo===p0":i,"lo<p0":n,"lo<=p0":r,"hi<=p0":v,"lo<p0&&p0<=hi":o,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":b};function a(g){return e[g]}function i(g,d,f,y,l,x,c){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;y>E;++E,w+=M){var S=l[w+h];if(S===c)if(_===E)_+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[w+P];l[w+P]=l[p],l[p++]=F}var I=x[E];x[E]=x[_],x[_++]=I}}return _}function n(g,d,f,y,l,x,c){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;y>E;++E,w+=M){var S=l[w+h];if(S<c)if(_===E)_+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[w+P];l[w+P]=l[p],l[p++]=F}var I=x[E];x[E]=x[_],x[_++]=I}}return _}function r(g,d,f,y,l,x,c){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;y>E;++E,w+=M){var S=l[w+L];if(S<=c)if(_===E)_+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[w+P];l[w+P]=l[p],l[p++]=F}var I=x[E];x[E]=x[_],x[_++]=I}}return _}function v(g,d,f,y,l,x,c){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;y>E;++E,w+=M){var S=l[w+L];if(S<=c)if(_===E)_+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[w+P];l[w+P]=l[p],l[p++]=F}var I=x[E];x[E]=x[_],x[_++]=I}}return _}function s(g,d,f,y,l,x,c){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;y>E;++E,w+=M){var S=l[w+h],P=l[w+L];if(S<=c&&c<=P)if(_===E)_+=1,p+=M;else{for(var F=0;M>F;++F){var I=l[w+F];l[w+F]=l[p],l[p++]=I}var D=x[E];x[E]=x[_],x[_++]=D}}return _}function o(g,d,f,y,l,x,c){for(var M=2*g,w=M*f,p=w,_=f,h=d,L=g+d,E=f;y>E;++E,w+=M){var S=l[w+h],P=l[w+L];if(S<c&&c<=P)if(_===E)_+=1,p+=M;else{for(var F=0;M>F;++F){var I=l[w+F];l[w+F]=l[p],l[p++]=I}var D=x[E];x[E]=x[_],x[_++]=D}}return _}function b(g,d,f,y,l,x,c,M){for(var w=2*g,p=w*f,_=p,h=f,L=d,E=g+d,S=f;y>S;++S,p+=w){var P=l[p+L],F=l[p+E];if(!(P>=c)&&!(M>=F))if(h===S)h+=1,_+=w;else{for(var I=0;w>I;++I){var D=l[p+I];l[p+I]=l[_],l[_++]=D}var R=x[S];x[S]=x[h],x[h++]=R}}return h}},{}],40:[function(u,A,T){A.exports=a;var e=32;function a(d,f){f<=4*e?i(0,f-1,d):g(0,f-1,d)}function i(d,f,y){for(var l=2*(d+1),x=d+1;x<=f;++x){for(var c=y[l++],M=y[l++],w=x,p=l-2;w-- >d;){var _=y[p-2],h=y[p-1];if(_<c)break;if(_===c&&h<M)break;y[p]=_,y[p+1]=h,p-=2}y[p]=c,y[p+1]=M}}function n(d,f,y){d*=2,f*=2;var l=y[d],x=y[d+1];y[d]=y[f],y[d+1]=y[f+1],y[f]=l,y[f+1]=x}function r(d,f,y){d*=2,f*=2,y[d]=y[f],y[d+1]=y[f+1]}function v(d,f,y,l){d*=2,f*=2,y*=2;var x=l[d],c=l[d+1];l[d]=l[f],l[d+1]=l[f+1],l[f]=l[y],l[f+1]=l[y+1],l[y]=x,l[y+1]=c}function s(d,f,y,l,x){d*=2,f*=2,x[d]=x[f],x[f]=y,x[d+1]=x[f+1],x[f+1]=l}function o(d,f,y){d*=2,f*=2;var l=y[d],x=y[f];return l<x?!1:l===x?y[d+1]>y[f+1]:!0}function b(d,f,y,l){d*=2;var x=l[d];return x<f?!0:x===f?l[d+1]<y:!1}function g(d,f,y){var l=(f-d+1)/6|0,x=d+l,c=f-l,M=d+f>>1,w=M-l,p=M+l,_=x,h=w,L=M,E=p,S=c,P=d+1,F=f-1,I=0;o(_,h,y)&&(I=_,_=h,h=I),o(E,S,y)&&(I=E,E=S,S=I),o(_,L,y)&&(I=_,_=L,L=I),o(h,L,y)&&(I=h,h=L,L=I),o(_,E,y)&&(I=_,_=E,E=I),o(L,E,y)&&(I=L,L=E,E=I),o(h,S,y)&&(I=h,h=S,S=I),o(h,L,y)&&(I=h,h=L,L=I),o(E,S,y)&&(I=E,E=S,S=I);for(var D=y[2*h],R=y[2*h+1],O=y[2*E],z=y[2*E+1],G=2*_,Y=2*L,ee=2*S,j=2*x,X=2*M,ie=2*c,he=0;he<2;++he){var K=y[G+he],$=y[Y+he],U=y[ee+he];y[j+he]=K,y[X+he]=$,y[ie+he]=U}r(w,d,y),r(p,f,y);for(var H=P;H<=F;++H)if(b(H,D,R,y))H!==P&&n(H,P,y),++P;else if(!b(H,O,z,y))for(;;)if(b(F,O,z,y)){b(F,D,R,y)?(v(H,P,F,y),++P,--F):(n(H,F,y),--F);break}else{if(--F<H)break;continue}s(d,P-1,D,R,y),s(f,F+1,O,z,y),P-2-d<=e?i(d,P-2,y):g(d,P-2,y),f-(F+2)<=e?i(F+2,f,y):g(F+2,f,y),F-P<=e?i(P,F,y):g(P,F,y)}},{}],41:[function(u,A,T){A.exports={init:y,sweepBipartite:c,sweepComplete:M,scanBipartite:w,scanComplete:p};var e=u("typedarray-pool"),a=u("bit-twiddle"),i=u("./sort"),n=1<<28,r=1024,v=e.mallocInt32(r),s=e.mallocInt32(r),o=e.mallocInt32(r),b=e.mallocInt32(r),g=e.mallocInt32(r),d=e.mallocInt32(r),f=e.mallocDouble(r*8);function y(_){var h=a.nextPow2(_);v.length<h&&(e.free(v),v=e.mallocInt32(h)),s.length<h&&(e.free(s),s=e.mallocInt32(h)),o.length<h&&(e.free(o),o=e.mallocInt32(h)),b.length<h&&(e.free(b),b=e.mallocInt32(h)),g.length<h&&(e.free(g),g=e.mallocInt32(h)),d.length<h&&(e.free(d),d=e.mallocInt32(h));var L=8*h;f.length<L&&(e.free(f),f=e.mallocDouble(L))}function l(_,h,L,E){var S=h[E],P=_[L-1];_[S]=P,h[P]=S}function x(_,h,L,E){_[L]=E,h[E]=L}function c(_,h,L,E,S,P,F,I,D,R){for(var O=0,z=2*_,G=_-1,Y=z-1,ee=L;ee<E;++ee){var j=P[ee],X=z*ee;f[O++]=S[X+G],f[O++]=-(j+1),f[O++]=S[X+Y],f[O++]=j}for(var ee=F;ee<I;++ee){var j=R[ee]+n,ie=z*ee;f[O++]=D[ie+G],f[O++]=-j,f[O++]=D[ie+Y],f[O++]=j}var he=O>>>1;i(f,he);for(var K=0,$=0,ee=0;ee<he;++ee){var U=f[2*ee+1]|0;if(U>=n)U=U-n|0,l(o,b,$--,U);else if(U>=0)l(v,s,K--,U);else if(U<=-n){U=-U-n|0;for(var H=0;H<K;++H){var q=h(v[H],U);if(q!==void 0)return q}x(o,b,$++,U)}else{U=-U-1|0;for(var H=0;H<$;++H){var q=h(U,o[H]);if(q!==void 0)return q}x(v,s,K++,U)}}}function M(_,h,L,E,S,P,F,I,D,R){for(var O=0,z=2*_,G=_-1,Y=z-1,ee=L;ee<E;++ee){var j=P[ee]+1<<1,X=z*ee;f[O++]=S[X+G],f[O++]=-j,f[O++]=S[X+Y],f[O++]=j}for(var ee=F;ee<I;++ee){var j=R[ee]+1<<1,ie=z*ee;f[O++]=D[ie+G],f[O++]=-j|1,f[O++]=D[ie+Y],f[O++]=j|1}var he=O>>>1;i(f,he);for(var K=0,$=0,U=0,ee=0;ee<he;++ee){var H=f[2*ee+1]|0,q=H&1;if(ee<he-1&&H>>1===f[2*ee+3]>>1&&(q=2,ee+=1),H<0){for(var re=-(H>>1)-1,Z=0;Z<U;++Z){var Q=h(g[Z],re);if(Q!==void 0)return Q}if(q!==0)for(var Z=0;Z<K;++Z){var Q=h(v[Z],re);if(Q!==void 0)return Q}if(q!==1)for(var Z=0;Z<$;++Z){var Q=h(o[Z],re);if(Q!==void 0)return Q}q===0?x(v,s,K++,re):q===1?x(o,b,$++,re):q===2&&x(g,d,U++,re)}else{var re=(H>>1)-1;q===0?l(v,s,K--,re):q===1?l(o,b,$--,re):q===2&&l(g,d,U--,re)}}}function w(_,h,L,E,S,P,F,I,D,R,O,z){var G=0,Y=2*_,ee=h,j=h+_,X=1,ie=1;E?ie=n:X=n;for(var he=S;he<P;++he){var K=he+X,$=Y*he;f[G++]=F[$+ee],f[G++]=-K,f[G++]=F[$+j],f[G++]=K}for(var he=D;he<R;++he){var K=he+ie,U=Y*he;f[G++]=O[U+ee],f[G++]=-K}var H=G>>>1;i(f,H);for(var q=0,he=0;he<H;++he){var re=f[2*he+1]|0;if(re<0){var K=-re,Z=!1;if(K>=n?(Z=!E,K-=n):(Z=!!E,K-=1),Z)x(v,s,q++,K);else{var Q=z[K],oe=Y*K,se=O[oe+h+1],ae=O[oe+h+1+_];e:for(var le=0;le<q;++le){var _e=v[le],fe=Y*_e;if(!(ae<F[fe+h+1]||F[fe+h+1+_]<se)){for(var me=h+2;me<_;++me)if(O[oe+me+_]<F[fe+me]||F[fe+me+_]<O[oe+me])continue e;var xe=I[_e],ye;if(E?ye=L(Q,xe):ye=L(xe,Q),ye!==void 0)return ye}}}}else l(v,s,q--,re-X)}}function p(_,h,L,E,S,P,F,I,D,R,O){for(var z=0,G=2*_,Y=h,ee=h+_,j=E;j<S;++j){var X=j+n,ie=G*j;f[z++]=P[ie+Y],f[z++]=-X,f[z++]=P[ie+ee],f[z++]=X}for(var j=I;j<D;++j){var X=j+1,he=G*j;f[z++]=R[he+Y],f[z++]=-X}var K=z>>>1;i(f,K);for(var $=0,j=0;j<K;++j){var U=f[2*j+1]|0;if(U<0){var X=-U;if(X>=n)v[$++]=X-n;else{X-=1;var H=O[X],q=G*X,re=R[q+h+1],Z=R[q+h+1+_];e:for(var Q=0;Q<$;++Q){var oe=v[Q],se=F[oe];if(se===H)break;var ae=G*oe;if(!(Z<P[ae+h+1]||P[ae+h+1+_]<re)){for(var le=h+2;le<_;++le)if(R[q+le+_]<P[ae+le]||P[ae+le+_]<R[q+le])continue e;var _e=L(se,H);if(_e!==void 0)return _e}}}}else{for(var X=U-n,Q=$-1;Q>=0;--Q)if(v[Q]===X){for(var le=Q+1;le<$;++le)v[le-1]=v[le];break}--$}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(u,A,T){var e=u("./lib/monotone"),a=u("./lib/triangulation"),i=u("./lib/delaunay"),n=u("./lib/filter");A.exports=b;function r(g){return[Math.min(g[0],g[1]),Math.max(g[0],g[1])]}function v(g,d){return g[0]-d[0]||g[1]-d[1]}function s(g){return g.map(r).sort(v)}function o(g,d,f){return d in g?g[d]:f}function b(g,d,f){Array.isArray(d)?(f=f||{},d=d||[]):(f=d||{},d=[]);var y=!!o(f,"delaunay",!0),l=!!o(f,"interior",!0),x=!!o(f,"exterior",!0),c=!!o(f,"infinity",!1);if(!l&&!x||g.length===0)return[];var M=e(g,d);if(y||l!==x||c){for(var w=a(g.length,s(d)),p=0;p<M.length;++p){var _=M[p];w.addTriangle(_[0],_[1],_[2])}return y&&i(g,w),x?l?c?n(w,0,c):w.cells():n(w,1,c):n(w,-1)}else return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(u,A,T){var e=u("robust-in-sphere")[4];u("binary-search-bounds"),A.exports=i;function a(n,r,v,s,o,b){var g=r.opposite(s,o);if(!(g<0)){if(o<s){var d=s;s=o,o=d,d=b,b=g,g=d}r.isConstraint(s,o)||e(n[s],n[o],n[b],n[g])<0&&v.push(s,o)}}function i(n,r){for(var v=[],s=n.length,o=r.stars,b=0;b<s;++b)for(var g=o[b],d=1;d<g.length;d+=2){var f=g[d];if(!(f<b)&&!r.isConstraint(b,f)){for(var y=g[d-1],l=-1,x=1;x<g.length;x+=2)if(g[x-1]===f){l=g[x];break}l<0||e(n[b],n[f],n[y],n[l])<0&&v.push(b,f)}}for(;v.length>0;){for(var f=v.pop(),b=v.pop(),y=-1,l=-1,g=o[b],c=1;c<g.length;c+=2){var M=g[c-1],w=g[c];M===f?l=w:w===f&&(y=M)}y<0||l<0||e(n[b],n[f],n[y],n[l])>=0||(r.flip(b,f),a(n,r,v,y,b,l),a(n,r,v,b,l,y),a(n,r,v,l,f,y),a(n,r,v,f,y,l))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(u,A,T){var e=u("binary-search-bounds");A.exports=s;function a(o,b,g,d,f,y,l){this.cells=o,this.neighbor=b,this.flags=d,this.constraint=g,this.active=f,this.next=y,this.boundary=l}var i=a.prototype;function n(o,b){return o[0]-b[0]||o[1]-b[1]||o[2]-b[2]}i.locate=function(){var o=[0,0,0];return function(b,g,d){var f=b,y=g,l=d;return g<d?g<b&&(f=g,y=d,l=b):d<b&&(f=d,y=b,l=g),f<0?-1:(o[0]=f,o[1]=y,o[2]=l,e.eq(this.cells,o,n))}}();function r(o,b){for(var g=o.cells(),d=g.length,f=0;f<d;++f){var y=g[f],l=y[0],x=y[1],c=y[2];x<c?x<l&&(y[0]=x,y[1]=c,y[2]=l):c<l&&(y[0]=c,y[1]=l,y[2]=x)}g.sort(n);for(var M=new Array(d),f=0;f<M.length;++f)M[f]=0;var w=[],p=[],_=new Array(3*d),h=new Array(3*d),L=null;b&&(L=[]);for(var E=new a(g,_,h,M,w,p,L),f=0;f<d;++f)for(var y=g[f],S=0;S<3;++S){var l=y[S],x=y[(S+1)%3],P=_[3*f+S]=E.locate(x,l,o.opposite(x,l)),F=h[3*f+S]=o.isConstraint(l,x);P<0&&(F?p.push(f):(w.push(f),M[f]=1),b&&L.push([x,l,-1]))}return E}function v(o,b,g){for(var d=0,f=0;f<o.length;++f)b[f]===g&&(o[d++]=o[f]);return o.length=d,o}function s(o,b,g){var d=r(o,g);if(b===0)return g?d.cells.concat(d.boundary):d.cells;for(var f=1,y=d.active,l=d.next,x=d.flags,c=d.cells,M=d.constraint,w=d.neighbor;y.length>0||l.length>0;){for(;y.length>0;){var p=y.pop();if(x[p]!==-f){x[p]=f,c[p];for(var _=0;_<3;++_){var h=w[3*p+_];h>=0&&x[h]===0&&(M[3*p+_]?l.push(h):(y.push(h),x[h]=f))}}}var L=l;l=y,y=L,l.length=0,f=-f}var E=v(c,x,b);return g?E.concat(d.boundary):E}},{"binary-search-bounds":31}],45:[function(u,A,T){var e=u("binary-search-bounds"),a=u("robust-orientation")[3],i=0,n=1,r=2;A.exports=l;function v(x,c,M,w,p){this.a=x,this.b=c,this.idx=M,this.lowerIds=w,this.upperIds=p}function s(x,c,M,w){this.a=x,this.b=c,this.type=M,this.idx=w}function o(x,c){var M=x.a[0]-c.a[0]||x.a[1]-c.a[1]||x.type-c.type;return M||x.type!==i&&(M=a(x.a,x.b,c.b),M)?M:x.idx-c.idx}function b(x,c){return a(x.a,x.b,c)}function g(x,c,M,w,p){for(var _=e.lt(c,w,b),h=e.gt(c,w,b),L=_;L<h;++L){for(var E=c[L],S=E.lowerIds,F=S.length;F>1&&a(M[S[F-2]],M[S[F-1]],w)>0;)x.push([S[F-1],S[F-2],p]),F-=1;S.length=F,S.push(p);for(var P=E.upperIds,F=P.length;F>1&&a(M[P[F-2]],M[P[F-1]],w)<0;)x.push([P[F-2],P[F-1],p]),F-=1;P.length=F,P.push(p)}}function d(x,c){var M;return x.a[0]<c.a[0]?M=a(x.a,x.b,c.a):M=a(c.b,c.a,x.a),M||(c.b[0]<x.b[0]?M=a(x.a,x.b,c.b):M=a(c.b,c.a,x.b),M||x.idx-c.idx)}function f(x,c,M){var w=e.le(x,M,d),p=x[w],_=p.upperIds,h=_[_.length-1];p.upperIds=[h],x.splice(w+1,0,new v(M.a,M.b,M.idx,[h],_))}function y(x,c,M){var w=M.a;M.a=M.b,M.b=w;var p=e.eq(x,M,d),_=x[p],h=x[p-1];h.upperIds=_.upperIds,x.splice(p,1)}function l(x,c){for(var M=x.length,w=c.length,p=[],_=0;_<M;++_)p.push(new s(x[_],null,i,_));for(var _=0;_<w;++_){var h=c[_],L=x[h[0]],E=x[h[1]];L[0]<E[0]?p.push(new s(L,E,r,_),new s(E,L,n,_)):L[0]>E[0]&&p.push(new s(E,L,r,_),new s(L,E,n,_))}p.sort(o);for(var S=p[0].a[0]-(1+Math.abs(p[0].a[0]))*Math.pow(2,-52),P=[new v([S,1],[S,0],-1,[],[])],F=[],_=0,I=p.length;_<I;++_){var D=p[_],R=D.type;R===i?g(F,P,x,D.a,D.idx):R===r?f(P,x,D):y(P,x,D)}return F}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(u,A,T){var e=u("binary-search-bounds");A.exports=r;function a(v,s){this.stars=v,this.edges=s}var i=a.prototype;function n(v,s,o){for(var b=1,g=v.length;b<g;b+=2)if(v[b-1]===s&&v[b]===o){v[b-1]=v[g-2],v[b]=v[g-1],v.length=g-2;return}}i.isConstraint=function(){var v=[0,0];function s(o,b){return o[0]-b[0]||o[1]-b[1]}return function(o,b){return v[0]=Math.min(o,b),v[1]=Math.max(o,b),e.eq(this.edges,v,s)>=0}}(),i.removeTriangle=function(v,s,o){var b=this.stars;n(b[v],s,o),n(b[s],o,v),n(b[o],v,s)},i.addTriangle=function(v,s,o){var b=this.stars;b[v].push(s,o),b[s].push(o,v),b[o].push(v,s)},i.opposite=function(v,s){for(var o=this.stars[s],b=1,g=o.length;b<g;b+=2)if(o[b]===v)return o[b-1];return-1},i.flip=function(v,s){var o=this.opposite(v,s),b=this.opposite(s,v);this.removeTriangle(v,s,o),this.removeTriangle(s,v,b),this.addTriangle(v,b,o),this.addTriangle(s,o,b)},i.edges=function(){for(var v=this.stars,s=[],o=0,b=v.length;o<b;++o)for(var g=v[o],d=0,f=g.length;d<f;d+=2)s.push([g[d],g[d+1]]);return s},i.cells=function(){for(var v=this.stars,s=[],o=0,b=v.length;o<b;++o)for(var g=v[o],d=0,f=g.length;d<f;d+=2){var y=g[d],l=g[d+1];o<Math.min(y,l)&&s.push([o,y,l])}return s};function r(v,s){for(var o=new Array(v),b=0;b<v;++b)o[b]=[];return new a(o,s)}},{"binary-search-bounds":31}],47:[function(u,A,T){A.exports=e;function e(a){for(var i=1,n=1;n<a.length;++n)for(var r=0;r<n;++r)if(a[n]<a[r])i=-i;else if(a[r]===a[n])return 0;return i}},{}],48:[function(u,A,T){var e=u("dup"),a=u("robust-linear-solve");function i(v,s){for(var o=0,b=v.length,g=0;g<b;++g)o+=v[g]*s[g];return o}function n(v){var s=v.length;if(s===0)return[];v[0].length;var o=e([v.length+1,v.length+1],1),b=e([v.length+1],1);o[s][s]=0;for(var g=0;g<s;++g){for(var d=0;d<=g;++d)o[d][g]=o[g][d]=2*i(v[g],v[d]);b[g]=i(v[g],v[g])}for(var f=a(o,b),y=0,l=f[s+1],g=0;g<l.length;++g)y+=l[g];for(var x=new Array(s),g=0;g<s;++g){for(var l=f[g],c=0,d=0;d<l.length;++d)c+=l[d];x[g]=c/y}return x}function r(v){if(v.length===0)return[];for(var s=v[0].length,o=e([s]),b=n(v),g=0;g<v.length;++g)for(var d=0;d<s;++d)o[d]+=v[g][d]*b[g];return o}r.barycenetric=n,A.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(u,A,T){A.exports=a;var e=u("circumcenter");function a(i){for(var n=e(i),r=0,v=0;v<i.length;++v)for(var s=i[v],o=0;o<n.length;++o)r+=Math.pow(s[o]-n[o],2);return Math.sqrt(r/i.length)}},{circumcenter:48}],50:[function(u,A,T){A.exports=L;var e=u("union-find"),a=u("box-intersect"),i=u("robust-segment-intersect"),n=u("big-rat"),r=u("big-rat/cmp"),v=u("big-rat/to-float"),s=u("rat-vec"),o=u("nextafter"),b=u("./lib/rat-seg-intersect");function g(E){var S=v(E);return[o(S,-1/0),o(S,1/0)]}function d(E,S){for(var P=new Array(S.length),F=0;F<S.length;++F){var I=S[F],D=E[I[0]],R=E[I[1]];P[F]=[o(Math.min(D[0],R[0]),-1/0),o(Math.min(D[1],R[1]),-1/0),o(Math.max(D[0],R[0]),1/0),o(Math.max(D[1],R[1]),1/0)]}return P}function f(E){for(var S=new Array(E.length),P=0;P<E.length;++P){var F=E[P];S[P]=[o(F[0],-1/0),o(F[1],-1/0),o(F[0],1/0),o(F[1],1/0)]}return S}function y(E,S,P){var F=[];return a(P,function(I,D){var R=S[I],O=S[D];if(!(R[0]===O[0]||R[0]===O[1]||R[1]===O[0]||R[1]===O[1])){var z=E[R[0]],G=E[R[1]],Y=E[O[0]],ee=E[O[1]];i(z,G,Y,ee)&&F.push([I,D])}}),F}function l(E,S,P,F){var I=[];return a(P,F,function(D,R){var O=S[D];if(!(O[0]===R||O[1]===R)){var z=E[R],G=E[O[0]],Y=E[O[1]];i(G,Y,z,z)&&I.push([D,R])}}),I}function x(E,S,P,F,I){var D,R,O=E.map(function(oe){return[n(oe[0]),n(oe[1])]});for(D=0;D<P.length;++D){var z=P[D];R=z[0];var G=z[1],Y=S[R],ee=S[G],j=b(s(E[Y[0]]),s(E[Y[1]]),s(E[ee[0]]),s(E[ee[1]]));if(!!j){var X=E.length;E.push([v(j[0]),v(j[1])]),O.push(j),F.push([R,X],[G,X])}}for(F.sort(function(oe,se){if(oe[0]!==se[0])return oe[0]-se[0];var ae=O[oe[1]],le=O[se[1]];return r(ae[0],le[0])||r(ae[1],le[1])}),D=F.length-1;D>=0;--D){var ie=F[D];R=ie[0];var he=S[R],K=he[0],$=he[1],U=E[K],H=E[$];if((U[0]-H[0]||U[1]-H[1])<0){var q=K;K=$,$=q}he[0]=K;var re=he[1]=ie[1],Z;for(I&&(Z=he[2]);D>0&&F[D-1][0]===R;){var ie=F[--D],Q=ie[1];I?S.push([re,Q,Z]):S.push([re,Q]),re=Q}I?S.push([re,$,Z]):S.push([re,$])}return O}function c(E,S,P){for(var F=S.length,I=new e(F),D=[],R=0;R<S.length;++R){var O=S[R],z=g(O[0]),G=g(O[1]);D.push([o(z[0],-1/0),o(G[0],-1/0),o(z[1],1/0),o(G[1],1/0)])}a(D,function(ie,he){I.link(ie,he)});for(var Y=!0,ee=new Array(F),R=0;R<F;++R){var j=I.find(R);j!==R&&(Y=!1,E[j]=[Math.min(E[R][0],E[j][0]),Math.min(E[R][1],E[j][1])])}if(Y)return null;for(var X=0,R=0;R<F;++R){var j=I.find(R);j===R?(ee[R]=X,E[X++]=E[R]):ee[R]=-1}E.length=X;for(var R=0;R<F;++R)ee[R]<0&&(ee[R]=ee[I.find(R)]);return ee}function M(E,S){return E[0]-S[0]||E[1]-S[1]}function w(E,S){var P=E[0]-S[0]||E[1]-S[1];return P||(E[2]<S[2]?-1:E[2]>S[2]?1:0)}function p(E,S,P){if(E.length!==0){if(S)for(var F=0;F<E.length;++F){var I=E[F],D=S[I[0]],R=S[I[1]];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}else for(var F=0;F<E.length;++F){var I=E[F],D=I[0],R=I[1];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}P?E.sort(w):E.sort(M);for(var O=1,F=1;F<E.length;++F){var z=E[F-1],G=E[F];G[0]===z[0]&&G[1]===z[1]&&(!P||G[2]===z[2])||(E[O++]=G)}E.length=O}}function _(E,S,P){var F=c(E,[],f(E));return p(S,F,P),!!F}function h(E,S,P){var F=d(E,S),I=y(E,S,F),D=f(E),R=l(E,S,F,D),O=x(E,S,I,R,P),z=c(E,O);return p(S,z,P),z?!0:I.length>0||R.length>0}function L(E,S,P){var F;if(P){F=S;for(var I=new Array(S.length),D=0;D<S.length;++D){var R=S[D];I[D]=[R[0],R[1],P[D]]}S=I}for(var O=_(E,S,!!P);h(E,S,!!P);)O=!0;if(!!P&&O){F.length=0,P.length=0;for(var D=0;D<S.length;++D){var R=S[D];F.push([R[0],R[1]]),P.push(R[2])}}return O}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(u,A,T){A.exports=b;var e=u("big-rat/mul"),a=u("big-rat/div"),i=u("big-rat/sub"),n=u("big-rat/sign"),r=u("rat-vec/sub"),v=u("rat-vec/add"),s=u("rat-vec/muls");function o(g,d){return i(e(g[0],d[1]),e(g[1],d[0]))}function b(g,d,f,y){var l=r(d,g),x=r(y,f),c=o(l,x);if(n(c)===0)return null;var M=r(g,f),w=o(x,M),p=a(w,c),_=s(l,p),h=v(g,_);return h}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(u,A,T){A.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(u,A,T){var e=u("./colorScale"),a=u("lerp");A.exports=i;function i(s){var o,b,g,d,f,y,l,x,p,c,M;if(s||(s={}),x=(s.nshades||72)-1,l=s.format||"hex",y=s.colormap,y||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!e[y])throw Error(y+" not a supported colorscale");f=e[y]}else if(Array.isArray(y))f=y.slice();else throw Error("unsupported colormap option",y);if(f.length>x+1)throw new Error(y+" map requires nshades to be at least size "+f.length);Array.isArray(s.alpha)?s.alpha.length!==2?c=[1,1]:c=s.alpha.slice():typeof s.alpha=="number"?c=[s.alpha,s.alpha]:c=[1,1],o=f.map(function(L){return Math.round(L.index*x)}),c[0]=Math.min(Math.max(c[0],0),1),c[1]=Math.min(Math.max(c[1],0),1);var w=f.map(function(L,E){var S=f[E].index,P=f[E].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=c[0]+(c[1]-c[0])*S),P}),p=[];for(M=0;M<o.length-1;++M){d=o[M+1]-o[M],b=w[M],g=w[M+1];for(var _=0;_<d;_++){var h=_/d;p.push([Math.round(a(b[0],g[0],h)),Math.round(a(b[1],g[1],h)),Math.round(a(b[2],g[2],h)),a(b[3],g[3],h)])}}return p.push(f[f.length-1].rgb.concat(c[1])),l==="hex"?p=p.map(r):l==="rgbaString"?p=p.map(v):l==="float"&&(p=p.map(n)),p}function n(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function r(s){for(var o,b="#",g=0;g<3;++g)o=s[g],o=o.toString(16),b+=("00"+o).substr(o.length);return b}function v(s){return"rgba("+s.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(u,A,T){A.exports=s;var e=u("robust-orientation"),a=u("signum"),i=u("two-sum"),n=u("robust-product"),r=u("robust-sum");function v(o,b,g){var d=i(o[0],-b[0]),f=i(o[1],-b[1]),y=i(g[0],-b[0]),l=i(g[1],-b[1]),x=r(n(d,y),n(f,l));return x[x.length-1]>=0}function s(o,b,g,d){var f=e(b,g,d);if(f===0){var y=a(e(o,b,g)),l=a(e(o,b,d));if(y===l){if(y===0){var x=v(o,b,g),c=v(o,b,d);return x===c?0:x?1:-1}return 0}else{if(l===0)return y>0||v(o,b,d)?-1:1;if(y===0)return l>0||v(o,b,g)?1:-1}return a(l-y)}var M=e(o,b,g);if(M>0)return f>0&&e(o,b,d)>0?1:-1;if(M<0)return f>0||e(o,b,d)>0?1:-1;var w=e(o,b,d);return w>0||v(o,b,g)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(u,A,T){A.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(u,A,T){A.exports=i;var e=Math.min;function a(n,r){return n-r}function i(n,r){var v=n.length,s=n.length-r.length;if(s)return s;switch(v){case 0:return 0;case 1:return n[0]-r[0];case 2:return n[0]+n[1]-r[0]-r[1]||e(n[0],n[1])-e(r[0],r[1]);case 3:var o=n[0]+n[1],b=r[0]+r[1];if(s=o+n[2]-(b+r[2]),s)return s;var g=e(n[0],n[1]),d=e(r[0],r[1]);return e(g,n[2])-e(d,r[2])||e(g+n[2],o)-e(d+r[2],b);case 4:var f=n[0],y=n[1],l=n[2],x=n[3],c=r[0],M=r[1],w=r[2],p=r[3];return f+y+l+x-(c+M+w+p)||e(f,y,l,x)-e(c,M,w,p,c)||e(f+y,f+l,f+x,y+l,y+x,l+x)-e(c+M,c+w,c+p,M+w,M+p,w+p)||e(f+y+l,f+y+x,f+l+x,y+l+x)-e(c+M+w,c+M+p,c+w+p,M+w+p);default:for(var _=n.slice().sort(a),h=r.slice().sort(a),L=0;L<v;++L)if(s=_[L]-h[L],s)return s;return 0}}},{}],57:[function(u,A,T){var e=u("compare-cell"),a=u("cell-orientation");A.exports=i;function i(n,r){return e(n,r)||a(n)-a(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(u,A,T){var e=u("./lib/ch1d"),a=u("./lib/ch2d"),i=u("./lib/chnd");A.exports=n;function n(r){var v=r.length;if(v===0)return[];if(v===1)return[[0]];var s=r[0].length;return s===0?[]:s===1?e(r):s===2?a(r):i(r,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(u,A,T){A.exports=e;function e(a){for(var i=0,n=0,r=1;r<a.length;++r)a[r][0]<a[i][0]&&(i=r),a[r][0]>a[n][0]&&(n=r);return i<n?[[i],[n]]:i>n?[[n],[i]]:[[i]]}},{}],60:[function(u,A,T){A.exports=a;var e=u("monotone-convex-hull-2d");function a(i){var n=e(i),r=n.length;if(r<=2)return[];for(var v=new Array(r),s=n[r-1],o=0;o<r;++o){var b=n[o];v[o]=[s,b],s=b}return v}},{"monotone-convex-hull-2d":246}],61:[function(u,A,T){A.exports=r;var e=u("incremental-convex-hull"),a=u("affine-hull");function i(v,s){for(var o=v.length,b=new Array(o),g=0;g<s.length;++g)b[g]=v[s[g]];for(var d=s.length,g=0;g<o;++g)s.indexOf(g)<0&&(b[d++]=v[g]);return b}function n(v,s){for(var o=v.length,b=s.length,g=0;g<o;++g)for(var d=v[g],f=0;f<d.length;++f){var y=d[f];if(y<b)d[f]=s[y];else{y=y-b;for(var l=0;l<b;++l)y>=s[l]&&(y+=1);d[f]=y}}return v}function r(v,s){try{return e(v,!0)}catch{var o=a(v);if(o.length<=s)return[];var b=i(v,o),g=e(b,!0);return n(g,o)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(u,A,T){function e(i,n,r,v,s,o){var b=6*s*s-6*s,g=3*s*s-4*s+1,d=-6*s*s+6*s,f=3*s*s-2*s;if(i.length){o||(o=new Array(i.length));for(var y=i.length-1;y>=0;--y)o[y]=b*i[y]+g*n[y]+d*r[y]+f*v[y];return o}return b*i+g*n+d*r[y]+f*v}function a(i,n,r,v,s,o){var b=s-1,g=s*s,d=b*b,f=(1+2*s)*d,y=s*d,l=g*(3-2*s),x=g*b;if(i.length){o||(o=new Array(i.length));for(var c=i.length-1;c>=0;--c)o[c]=f*i[c]+y*n[c]+l*r[c]+x*v[c];return o}return f*i+y*n+l*r+x*v}A.exports=a,A.exports.derivative=e},{}],63:[function(u,A,T){var e=u("incremental-convex-hull"),a=u("uniq");A.exports=v;function i(s,o){this.point=s,this.index=o}function n(s,o){for(var b=s.point,g=o.point,d=b.length,f=0;f<d;++f){var y=g[f]-b[f];if(y)return y}return 0}function r(s,o,b){if(s===1)return b?[[-1,0]]:[];var g=o.map(function(x,c){return[x[0],c]});g.sort(function(x,c){return x[0]-c[0]});for(var d=new Array(s-1),f=1;f<s;++f){var y=g[f-1],l=g[f];d[f-1]=[y[1],l[1]]}return b&&d.push([-1,d[0][1]],[d[s-1][1],-1]),d}function v(s,o){var b=s.length;if(b===0)return[];var g=s[0].length;if(g<1)return[];if(g===1)return r(b,s,o);for(var d=new Array(b),f=1,y=0;y<b;++y){for(var l=s[y],x=new Array(g+1),c=0,M=0;M<g;++M){var w=l[M];x[M]=w,c+=w*w}x[g]=c,d[y]=new i(x,y),f=Math.max(c,f)}a(d,n),b=d.length;for(var p=new Array(b+g+1),_=new Array(b+g+1),h=(g+1)*(g+1)*f,L=new Array(g+1),y=0;y<=g;++y)L[y]=0;L[g]=h,p[0]=L.slice(),_[0]=-1;for(var y=0;y<=g;++y){var x=L.slice();x[y]=1,p[y+1]=x,_[y+1]=-1}for(var y=0;y<b;++y){var E=d[y];p[y+g+1]=E.point,_[y+g+1]=E.index}var S=e(p,!1);if(o?S=S.filter(function(P){for(var F=0,I=0;I<=g;++I){var D=_[P[I]];if(D<0&&++F>=2)return!1;P[I]=D}return!0}):S=S.filter(function(P){for(var F=0;F<=g;++F){var I=_[P[F]];if(I<0)return!1;P[F]=I}return!0}),g&1)for(var y=0;y<S.length;++y){var E=S[y],x=E[0];E[0]=E[1],E[1]=x}return S}},{"incremental-convex-hull":233,uniq:310}],64:[function(u,A,T){(function(e){(function(){var a=!1;if(typeof Float64Array<"u"){var i=new Float64Array(1),n=new Uint32Array(i.buffer);if(i[0]=1,a=!0,n[1]===1072693248){let x=function(w,p){return n[0]=w,n[1]=p,i[0]},c=function(w){return i[0]=w,n[0]},M=function(w){return i[0]=w,n[1]};var v=x,s=c,o=M;A.exports=function(p){return i[0]=p,[n[0],n[1]]},A.exports.pack=x,A.exports.lo=c,A.exports.hi=M}else if(n[0]===1072693248){let x=function(w,p){return n[1]=w,n[0]=p,i[0]},c=function(w){return i[0]=w,n[1]},M=function(w){return i[0]=w,n[0]};var b=x,g=c,d=M;A.exports=function(p){return i[0]=p,[n[1],n[0]]},A.exports.pack=x,A.exports.lo=c,A.exports.hi=M}else a=!1}if(!a){let x=function(w,p){return r.writeUInt32LE(w,0,!0),r.writeUInt32LE(p,4,!0),r.readDoubleLE(0,!0)},c=function(w){return r.writeDoubleLE(w,0,!0),r.readUInt32LE(0,!0)},M=function(w){return r.writeDoubleLE(w,0,!0),r.readUInt32LE(4,!0)};var f=x,y=c,l=M,r=new e(8);A.exports=function(p){return r.writeDoubleLE(p,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},A.exports.pack=x,A.exports.lo=c,A.exports.hi=M}A.exports.sign=function(x){return A.exports.hi(x)>>>31},A.exports.exponent=function(x){var c=A.exports.hi(x);return(c<<1>>>21)-1023},A.exports.fraction=function(x){var c=A.exports.lo(x),M=A.exports.hi(x),w=M&(1<<20)-1;return M&2146435072&&(w+=1<<20),[c,w]},A.exports.denormalized=function(x){var c=A.exports.hi(x);return!(c&2146435072)}}).call(this)}).call(this,u("buffer").Buffer)},{buffer:3}],65:[function(u,A,T){function e(n,r,v){var s=n[v]|0;if(s<=0)return[];var o=new Array(s),b;if(v===n.length-1)for(b=0;b<s;++b)o[b]=r;else for(b=0;b<s;++b)o[b]=e(n,r,v+1);return o}function a(n,r){var v,s;for(v=new Array(n),s=0;s<n;++s)v[s]=r;return v}function i(n,r){switch(typeof r>"u"&&(r=0),typeof n){case"number":if(n>0)return a(n|0,r);break;case"object":if(typeof n.length=="number")return e(n,r,0);break}return[]}A.exports=i},{}],66:[function(u,A,T){A.exports=a;var e=u("uniq");function a(i,n){var r=i.length;if(typeof n!="number"){n=0;for(var v=0;v<r;++v){var s=i[v];n=Math.max(n,s[0],s[1])}n=(n|0)+1}n=n|0;for(var o=new Array(n),v=0;v<n;++v)o[v]=[];for(var v=0;v<r;++v){var s=i[v];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var b=0;b<n;++b)e(o[b],function(g,d){return g-d});return o}},{uniq:310}],67:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i||0,v=n||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[r*a[12]+a[8],r*a[13]+a[9],r*a[14]+a[10],r*a[15]+a[11]],[v*a[12]-a[8],v*a[13]-a[9],v*a[14]-a[10],v*a[15]-a[11]]]}},{}],68:[function(u,A,T){A.exports=s;var e=u("cubic-hermite"),a=u("binary-search-bounds");function i(o,b,g){return Math.min(b,Math.max(o,g))}function n(o,b,g){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=o.slice().reverse(),this._velocity=b.slice().reverse(),this._time=[g],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var r=n.prototype;r.flush=function(o){var b=a.gt(this._time,o)-1;b<=0||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))},r.curve=function(o){var b=this._time,g=b.length,d=a.le(b,o),f=this._scratch[0],y=this._state,l=this._velocity,x=this.dimension,c=this.bounds;if(d<0)for(var M=x-1,w=0;w<x;++w,--M)f[w]=y[M];else if(d>=g-1)for(var M=y.length-1,p=o-b[g-1],w=0;w<x;++w,--M)f[w]=y[M]+p*l[M];else{for(var M=x*(d+1)-1,_=b[d],h=b[d+1],L=h-_||1,E=this._scratch[1],S=this._scratch[2],P=this._scratch[3],F=this._scratch[4],I=!0,w=0;w<x;++w,--M)E[w]=y[M],P[w]=l[M]*L,S[w]=y[M+x],F[w]=l[M+x]*L,I=I&&E[w]===S[w]&&P[w]===F[w]&&P[w]===0;if(I)for(var w=0;w<x;++w)f[w]=E[w];else e(E,P,S,F,(o-_)/L,f)}for(var D=c[0],R=c[1],w=0;w<x;++w)f[w]=i(D[w],R[w],f[w]);return f},r.dcurve=function(o){var b=this._time,g=b.length,d=a.le(b,o),f=this._scratch[0],y=this._state,l=this._velocity,x=this.dimension;if(d>=g-1){var c=y.length-1;o-b[g-1];for(var M=0;M<x;++M,--c)f[M]=l[c]}else{for(var c=x*(d+1)-1,w=b[d],p=b[d+1],_=p-w||1,h=this._scratch[1],L=this._scratch[2],E=this._scratch[3],S=this._scratch[4],P=!0,M=0;M<x;++M,--c)h[M]=y[c],E[M]=l[c]*_,L[M]=y[c+x],S[M]=l[c+x]*_,P=P&&h[M]===L[M]&&E[M]===S[M]&&E[M]===0;if(P)for(var M=0;M<x;++M)f[M]=0;else{e.derivative(h,E,L,S,(o-w)/_,f);for(var M=0;M<x;++M)f[M]/=_}}return f},r.lastT=function(){var o=this._time;return o[o.length-1]},r.stable=function(){for(var o=this._velocity,b=o.length,g=this.dimension-1;g>=0;--g)if(o[--b])return!1;return!0},r.jump=function(o){var b=this.lastT(),g=this.dimension;if(!(o<b||arguments.length!==g+1)){var d=this._state,f=this._velocity,y=d.length-this.dimension,l=this.bounds,x=l[0],c=l[1];this._time.push(b,o);for(var M=0;M<2;++M)for(var w=0;w<g;++w)d.push(d[y++]),f.push(0);this._time.push(o);for(var w=g;w>0;--w)d.push(i(x[w-1],c[w-1],arguments[w])),f.push(0)}},r.push=function(o){var b=this.lastT(),g=this.dimension;if(!(o<b||arguments.length!==g+1)){var d=this._state,f=this._velocity,y=d.length-this.dimension,l=o-b,x=this.bounds,c=x[0],M=x[1],w=l>1e-6?1/l:0;this._time.push(o);for(var p=g;p>0;--p){var _=i(c[p-1],M[p-1],arguments[p]);d.push(_),f.push((_-d[y++])*w)}}},r.set=function(o){var b=this.dimension;if(!(o<this.lastT()||arguments.length!==b+1)){var g=this._state,d=this._velocity,f=this.bounds,y=f[0],l=f[1];this._time.push(o);for(var x=b;x>0;--x)g.push(i(y[x-1],l[x-1],arguments[x])),d.push(0)}},r.move=function(o){var b=this.lastT(),g=this.dimension;if(!(o<=b||arguments.length!==g+1)){var d=this._state,f=this._velocity,y=d.length-this.dimension,l=this.bounds,x=l[0],c=l[1],M=o-b,w=M>1e-6?1/M:0;this._time.push(o);for(var p=g;p>0;--p){var _=arguments[p];d.push(i(x[p-1],c[p-1],d[y++]+_)),f.push(_*w)}}},r.idle=function(o){var b=this.lastT();if(!(o<b)){var g=this.dimension,d=this._state,f=this._velocity,y=d.length-g,l=this.bounds,x=l[0],c=l[1],M=o-b;this._time.push(o);for(var w=g-1;w>=0;--w)d.push(i(x[w],c[w],d[y]+M*f[y])),f.push(0),y+=1}};function v(o){for(var b=new Array(o),g=0;g<o;++g)b[g]=0;return b}function s(o,b,g){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if(typeof o=="number"){var d=v(o);return new n(d,d,0)}else return new n(o,v(o.length),0);case 2:if(typeof b=="number"){var d=v(o.length);return new n(o,d,+b)}else g=0;case 3:if(o.length!==b.length)throw new Error("state and velocity lengths must match");return new n(o,b,g)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(u,A,T){A.exports=M;var e=0,a=1;function i(w,p,_,h,L,E){this._color=w,this.key=p,this.value=_,this.left=h,this.right=L,this._count=E}function n(w){return new i(w._color,w.key,w.value,w.left,w.right,w._count)}function r(w,p){return new i(w,p.key,p.value,p.left,p.right,p._count)}function v(w){w._count=1+(w.left?w.left._count:0)+(w.right?w.right._count:0)}function s(w,p){this._compare=w,this.root=p}var o=s.prototype;Object.defineProperty(o,"keys",{get:function(){var w=[];return this.forEach(function(p,_){w.push(p)}),w}}),Object.defineProperty(o,"values",{get:function(){var w=[];return this.forEach(function(p,_){w.push(_)}),w}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(w,p){for(var _=this._compare,h=this.root,L=[],E=[];h;){var S=_(w,h.key);L.push(h),E.push(S),S<=0?h=h.left:h=h.right}L.push(new i(e,w,p,null,null,1));for(var P=L.length-2;P>=0;--P){var h=L[P];E[P]<=0?L[P]=new i(h._color,h.key,h.value,L[P+1],h.right,h._count+1):L[P]=new i(h._color,h.key,h.value,h.left,L[P+1],h._count+1)}for(var P=L.length-1;P>1;--P){var F=L[P-1],h=L[P];if(F._color===a||h._color===a)break;var I=L[P-2];if(I.left===F)if(F.left===h){var D=I.right;if(D&&D._color===e)F._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.left=F.right,F._color=a,F.right=I,L[P-2]=F,L[P-1]=h,v(I),v(F),P>=3){var R=L[P-3];R.left===I?R.left=F:R.right=F}break}}else{var D=I.right;if(D&&D._color===e)F._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(F.right=h.left,I._color=e,I.left=h.right,h._color=a,h.left=F,h.right=I,L[P-2]=h,L[P-1]=F,v(I),v(F),v(h),P>=3){var R=L[P-3];R.left===I?R.left=h:R.right=h}break}}else if(F.right===h){var D=I.left;if(D&&D._color===e)F._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.right=F.left,F._color=a,F.left=I,L[P-2]=F,L[P-1]=h,v(I),v(F),P>=3){var R=L[P-3];R.right===I?R.right=F:R.left=F}break}}else{var D=I.left;if(D&&D._color===e)F._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(F.left=h.right,I._color=e,I.right=h.left,h._color=a,h.right=F,h.left=I,L[P-2]=h,L[P-1]=F,v(I),v(F),v(h),P>=3){var R=L[P-3];R.right===I?R.right=h:R.left=h}break}}}return L[0]._color=a,new s(_,L[0])};function b(w,p){if(p.left){var _=b(w,p.left);if(_)return _}var _=w(p.key,p.value);if(_)return _;if(p.right)return b(w,p.right)}function g(w,p,_,h){var L=p(w,h.key);if(L<=0){if(h.left){var E=g(w,p,_,h.left);if(E)return E}var E=_(h.key,h.value);if(E)return E}if(h.right)return g(w,p,_,h.right)}function d(w,p,_,h,L){var E=_(w,L.key),S=_(p,L.key),P;if(E<=0&&(L.left&&(P=d(w,p,_,h,L.left),P)||S>0&&(P=h(L.key,L.value),P)))return P;if(S>0&&L.right)return d(w,p,_,h,L.right)}o.forEach=function(p,_,h){if(!!this.root)switch(arguments.length){case 1:return b(p,this.root);case 2:return g(_,this._compare,p,this.root);case 3:return this._compare(_,h)>=0?void 0:d(_,h,this._compare,p,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var w=[],p=this.root;p;)w.push(p),p=p.left;return new f(this,w)}}),Object.defineProperty(o,"end",{get:function(){for(var w=[],p=this.root;p;)w.push(p),p=p.right;return new f(this,w)}}),o.at=function(w){if(w<0)return new f(this,[]);for(var p=this.root,_=[];;){if(_.push(p),p.left){if(w<p.left._count){p=p.left;continue}w-=p.left._count}if(!w)return new f(this,_);if(w-=1,p.right){if(w>=p.right._count)break;p=p.right}else break}return new f(this,[])},o.ge=function(w){for(var p=this._compare,_=this.root,h=[],L=0;_;){var E=p(w,_.key);h.push(_),E<=0&&(L=h.length),E<=0?_=_.left:_=_.right}return h.length=L,new f(this,h)},o.gt=function(w){for(var p=this._compare,_=this.root,h=[],L=0;_;){var E=p(w,_.key);h.push(_),E<0&&(L=h.length),E<0?_=_.left:_=_.right}return h.length=L,new f(this,h)},o.lt=function(w){for(var p=this._compare,_=this.root,h=[],L=0;_;){var E=p(w,_.key);h.push(_),E>0&&(L=h.length),E<=0?_=_.left:_=_.right}return h.length=L,new f(this,h)},o.le=function(w){for(var p=this._compare,_=this.root,h=[],L=0;_;){var E=p(w,_.key);h.push(_),E>=0&&(L=h.length),E<0?_=_.left:_=_.right}return h.length=L,new f(this,h)},o.find=function(w){for(var p=this._compare,_=this.root,h=[];_;){var L=p(w,_.key);if(h.push(_),L===0)return new f(this,h);L<=0?_=_.left:_=_.right}return new f(this,[])},o.remove=function(w){var p=this.find(w);return p?p.remove():this},o.get=function(w){for(var p=this._compare,_=this.root;_;){var h=p(w,_.key);if(h===0)return _.value;h<=0?_=_.left:_=_.right}};function f(w,p){this.tree=w,this._stack=p}var y=f.prototype;Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new f(this.tree,this._stack.slice())};function l(w,p){w.key=p.key,w.value=p.value,w.left=p.left,w.right=p.right,w._color=p._color,w._count=p._count}function x(w){for(var p,_,h,L,E=w.length-1;E>=0;--E){if(p=w[E],E===0){p._color=a;return}if(_=w[E-1],_.left===p){if(h=_.right,h.right&&h.right._color===e){if(h=_.right=n(h),L=h.right=n(h.right),_.right=h.left,h.left=_,h.right=L,h._color=_._color,p._color=a,_._color=a,L._color=a,v(_),v(h),E>1){var S=w[E-2];S.left===_?S.left=h:S.right=h}w[E-1]=h;return}else if(h.left&&h.left._color===e){if(h=_.right=n(h),L=h.left=n(h.left),_.right=L.left,h.left=L.right,L.left=_,L.right=h,L._color=_._color,_._color=a,h._color=a,p._color=a,v(_),v(h),v(L),E>1){var S=w[E-2];S.left===_?S.left=L:S.right=L}w[E-1]=L;return}if(h._color===a)if(_._color===e){_._color=a,_.right=r(e,h);return}else{_.right=r(e,h);continue}else{if(h=n(h),_.right=h.left,h.left=_,h._color=_._color,_._color=e,v(_),v(h),E>1){var S=w[E-2];S.left===_?S.left=h:S.right=h}w[E-1]=h,w[E]=_,E+1<w.length?w[E+1]=p:w.push(p),E=E+2}}else{if(h=_.left,h.left&&h.left._color===e){if(h=_.left=n(h),L=h.left=n(h.left),_.left=h.right,h.right=_,h.left=L,h._color=_._color,p._color=a,_._color=a,L._color=a,v(_),v(h),E>1){var S=w[E-2];S.right===_?S.right=h:S.left=h}w[E-1]=h;return}else if(h.right&&h.right._color===e){if(h=_.left=n(h),L=h.right=n(h.right),_.left=L.right,h.right=L.left,L.right=_,L.left=h,L._color=_._color,_._color=a,h._color=a,p._color=a,v(_),v(h),v(L),E>1){var S=w[E-2];S.right===_?S.right=L:S.left=L}w[E-1]=L;return}if(h._color===a)if(_._color===e){_._color=a,_.left=r(e,h);return}else{_.left=r(e,h);continue}else{if(h=n(h),_.left=h.right,h.right=_,h._color=_._color,_._color=e,v(_),v(h),E>1){var S=w[E-2];S.right===_?S.right=h:S.left=h}w[E-1]=h,w[E]=_,E+1<w.length?w[E+1]=p:w.push(p),E=E+2}}}}y.remove=function(){var w=this._stack;if(w.length===0)return this.tree;var p=new Array(w.length),_=w[w.length-1];p[p.length-1]=new i(_._color,_.key,_.value,_.left,_.right,_._count);for(var h=w.length-2;h>=0;--h){var _=w[h];_.left===w[h+1]?p[h]=new i(_._color,_.key,_.value,p[h+1],_.right,_._count):p[h]=new i(_._color,_.key,_.value,_.left,p[h+1],_._count)}if(_=p[p.length-1],_.left&&_.right){var L=p.length;for(_=_.left;_.right;)p.push(_),_=_.right;var E=p[L-1];p.push(new i(_._color,E.key,E.value,_.left,_.right,_._count)),p[L-1].key=_.key,p[L-1].value=_.value;for(var h=p.length-2;h>=L;--h)_=p[h],p[h]=new i(_._color,_.key,_.value,_.left,p[h+1],_._count);p[L-1].left=p[L]}if(_=p[p.length-1],_._color===e){var S=p[p.length-2];S.left===_?S.left=null:S.right===_&&(S.right=null),p.pop();for(var h=0;h<p.length;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else if(_.left||_.right){_.left?l(_,_.left):_.right&&l(_,_.right),_._color=a;for(var h=0;h<p.length-1;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else{if(p.length===1)return new s(this.tree._compare,null);for(var h=0;h<p.length;++h)p[h]._count--;var P=p[p.length-2];x(p),P.left===_?P.left=null:P.right=null}return new s(this.tree._compare,p[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var w=0,p=this._stack;if(p.length===0){var _=this.tree.root;return _?_._count:0}else p[p.length-1].left&&(w=p[p.length-1].left._count);for(var h=p.length-2;h>=0;--h)p[h+1]===p[h].right&&(++w,p[h].left&&(w+=p[h].left._count));return w},enumerable:!0}),y.next=function(){var w=this._stack;if(w.length!==0){var p=w[w.length-1];if(p.right)for(p=p.right;p;)w.push(p),p=p.left;else for(w.pop();w.length>0&&w[w.length-1].right===p;)p=w[w.length-1],w.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].right)return!0;for(var p=w.length-1;p>0;--p)if(w[p-1].left===w[p])return!0;return!1}}),y.update=function(w){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var _=new Array(p.length),h=p[p.length-1];_[_.length-1]=new i(h._color,h.key,w,h.left,h.right,h._count);for(var L=p.length-2;L>=0;--L)h=p[L],h.left===p[L+1]?_[L]=new i(h._color,h.key,h.value,_[L+1],h.right,h._count):_[L]=new i(h._color,h.key,h.value,h.left,_[L+1],h._count);return new s(this.tree._compare,_[0])},y.prev=function(){var w=this._stack;if(w.length!==0){var p=w[w.length-1];if(p.left)for(p=p.left;p;)w.push(p),p=p.right;else for(w.pop();w.length>0&&w[w.length-1].left===p;)p=w[w.length-1],w.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].left)return!0;for(var p=w.length-1;p>0;--p)if(w[p-1].right===w[p])return!0;return!1}});function c(w,p){return w<p?-1:w>p?1:0}function M(w){return new s(w||c,null)}},{}],70:[function(u,A,T){A.exports=p;var e=u("./lib/text.js"),a=u("./lib/lines.js"),i=u("./lib/background.js"),n=u("./lib/cube.js"),r=u("./lib/ticks.js"),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(_,h){return _[0]=h[0],_[1]=h[1],_[2]=h[2],_}function o(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(_)}var b=o.prototype;b.update=function(_){_=_||{};function h(Y,ee,j){if(j in _){var X=_[j],ie=this[j],he;(Y?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?this[j]=he=[ee(X[0]),ee(X[1]),ee(X[2])]:this[j]=he=[ee(X),ee(X),ee(X)];for(var K=0;K<3;++K)if(he[K]!==ie[K])return!0}return!1}var L=h.bind(this,!1,Number),E=h.bind(this,!1,Boolean),S=h.bind(this,!1,String),P=h.bind(this,!0,function(Y){if(Array.isArray(Y)){if(Y.length===3)return[+Y[0],+Y[1],+Y[2],1];if(Y.length===4)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),F,I=!1,D=!1;if("bounds"in _)for(var R=_.bounds,O=0;O<2;++O)for(var z=0;z<3;++z)R[O][z]!==this.bounds[O][z]&&(D=!0),this.bounds[O][z]=R[O][z];if("ticks"in _){F=_.ticks,I=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else L("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(F=r.create(this.bounds,this.tickSpacing),I=!0),I){for(var O=0;O<3;++O)F[O].sort(function(ee,j){return ee.x-j.x});r.equal(F,this.ticks)?I=!1:this.ticks=F}E("tickEnable"),S("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var G=S("labels");S("labelFont")&&(G=!0),E("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),E("lineEnable"),E("lineMirror"),L("lineWidth"),P("lineColor"),E("lineTickEnable"),E("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),E("gridEnable"),L("gridWidth"),P("gridColor"),E("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),E("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(G||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var d=[new g,new g,new g];function f(_,h,L,E,S){for(var P=_.primalOffset,F=_.primalMinor,I=_.mirrorOffset,D=_.mirrorMinor,R=E[h],O=0;O<3;++O)if(h!==O){var z=P,G=I,Y=F,ee=D;R&1<<O&&(z=I,G=P,Y=D,ee=F),z[O]=L[0][O],G[O]=L[1][O],S[O]>0?(Y[O]=-1,ee[O]=0):(Y[O]=0,ee[O]=1)}}var y=[0,0,0],l={model:v,view:v,projection:v,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(_){};var x=0,c=[0,0,0],M=[0,0,0],w=[0,0,0];b.draw=function(_){_=_||l;for(var ie=this.gl,h=_.model||v,L=_.view||v,E=_.projection||v,S=this.bounds,P=_._ortho||!1,F=n(h,L,E,S,P),I=F.cubeEdges,D=F.axis,R=L[12],O=L[13],z=L[14],G=L[15],Y=P?2:1,ee=Y*this.pixelRatio*(E[3]*R+E[7]*O+E[11]*z+E[15]*G)/ie.drawingBufferHeight,j=0;j<3;++j)this.lastCubeProps.cubeEdges[j]=I[j],this.lastCubeProps.axis[j]=D[j];for(var X=d,j=0;j<3;++j)f(d[j],j,this.bounds,I,D);for(var ie=this.gl,he=y,j=0;j<3;++j)this.backgroundEnable[j]?he[j]=D[j]:he[j]=0;this._background.draw(h,L,E,S,he,this.backgroundColor),this._lines.bind(h,L,E,this);for(var j=0;j<3;++j){var K=[0,0,0];D[j]>0?K[j]=S[1][j]:K[j]=S[0][j];for(var $=0;$<2;++$){var U=(j+1+$)%3,H=(j+1+($^1))%3;this.gridEnable[U]&&this._lines.drawGrid(U,H,this.bounds,K,this.gridColor[U],this.gridWidth[U]*this.pixelRatio)}for(var $=0;$<2;++$){var U=(j+1+$)%3,H=(j+1+($^1))%3;this.zeroEnable[H]&&Math.min(S[0][H],S[1][H])<=0&&Math.max(S[0][H],S[1][H])>=0&&this._lines.drawZero(U,H,this.bounds,K,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}}for(var j=0;j<3;++j){this.lineEnable[j]&&this._lines.drawAxisLine(j,this.bounds,X[j].primalOffset,this.lineColor[j],this.lineWidth[j]*this.pixelRatio),this.lineMirror[j]&&this._lines.drawAxisLine(j,this.bounds,X[j].mirrorOffset,this.lineColor[j],this.lineWidth[j]*this.pixelRatio);for(var q=s(c,X[j].primalMinor),re=s(M,X[j].mirrorMinor),Z=this.lineTickLength,$=0;$<3;++$){var Q=ee/h[5*$];q[$]*=Z[$]*Q,re[$]*=Z[$]*Q}this.lineTickEnable[j]&&this._lines.drawAxisTicks(j,X[j].primalOffset,q,this.lineTickColor[j],this.lineTickWidth[j]*this.pixelRatio),this.lineTickMirror[j]&&this._lines.drawAxisTicks(j,X[j].mirrorOffset,re,this.lineTickColor[j],this.lineTickWidth[j]*this.pixelRatio)}this._lines.unbind(),this._text.bind(h,L,E,this.pixelRatio);var oe,se=.5,ae,le;function _e(ke){le=[0,0,0],le[ke]=1}function fe(ke,De,He){var Ae=(ke+1)%3,Le=(ke+2)%3,Ze=De[Ae],We=De[Le],ze=He[Ae],Ie=He[Le];if(Ze>0&&Ie>0){_e(Ae);return}else if(Ze>0&&Ie<0){_e(Ae);return}else if(Ze<0&&Ie>0){_e(Ae);return}else if(Ze<0&&Ie<0){_e(Ae);return}else if(We>0&&ze>0){_e(Le);return}else if(We>0&&ze<0){_e(Le);return}else if(We<0&&ze>0){_e(Le);return}else if(We<0&&ze<0){_e(Le);return}}for(var j=0;j<3;++j){for(var me=X[j].primalMinor,xe=X[j].mirrorMinor,ye=s(w,X[j].primalOffset),$=0;$<3;++$)this.lineTickEnable[j]&&(ye[$]+=ee*me[$]*Math.max(this.lineTickLength[$],0)/h[5*$]);var be=[0,0,0];if(be[j]=1,this.tickEnable[j]){this.tickAngle[j]===-3600?(this.tickAngle[j]=0,this.tickAlign[j]="auto"):this.tickAlign[j]=-1,ae=1,oe=[this.tickAlign[j],se,ae],oe[0]==="auto"?oe[0]=x:oe[0]=parseInt(""+oe[0]),le=[0,0,0],fe(j,me,xe);for(var $=0;$<3;++$)ye[$]+=ee*me[$]*this.tickPad[$]/h[5*$];this._text.drawTicks(j,this.tickSize[j],this.tickAngle[j],ye,this.tickColor[j],be,le,oe)}if(this.labelEnable[j]){ae=0,le=[0,0,0],this.labels[j].length>4&&(_e(j),ae=1),oe=[this.labelAlign[j],se,ae],oe[0]==="auto"?oe[0]=x:oe[0]=parseInt(""+oe[0]);for(var $=0;$<3;++$)ye[$]+=ee*me[$]*this.labelPad[$]/h[5*$];ye[j]+=.5*(S[0][j]+S[1][j]),this._text.drawLabel(j,this.labelSize[j],this.labelAngle[j],ye,this.labelColor[j],[0,0,0],le,oe)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function p(_,h){var L=new o(_);return L.update(h),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(u,A,T){A.exports=v;var e=u("gl-buffer"),a=u("gl-vao"),i=u("./shaders").bg;function n(s,o,b,g){this.gl=s,this.buffer=o,this.vao=b,this.shader=g}var r=n.prototype;r.draw=function(s,o,b,g,d,f){for(var y=!1,l=0;l<3;++l)y=y||d[l];if(!!y){var x=this.gl;x.enable(x.POLYGON_OFFSET_FILL),x.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:o,projection:b,bounds:g,enable:d,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),x.disable(x.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function v(s){for(var o=[],b=[],g=0,d=0;d<3;++d)for(var f=(d+1)%3,y=(d+2)%3,l=[0,0,0],x=[0,0,0],c=-1;c<=1;c+=2){b.push(g,g+2,g+1,g+1,g+2,g+3),l[d]=c,x[d]=c;for(var M=-1;M<=1;M+=2){l[f]=M;for(var w=-1;w<=1;w+=2)l[y]=w,o.push(l[0],l[1],l[2],x[0],x[1],x[2]),g+=1}var p=f;f=y,y=p}var _=e(s,new Float32Array(o)),h=e(s,new Uint16Array(b),s.ELEMENT_ARRAY_BUFFER),L=a(s,[{buffer:_,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:_,type:s.FLOAT,size:3,offset:12,stride:24}],h),E=i(s);return E.attributes.position.location=0,E.attributes.normal.location=1,new n(s,_,L,E)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(u,A,T){A.exports=c;var e=u("bit-twiddle"),a=u("gl-mat4/multiply"),i=u("split-polygon"),n=u("robust-orientation"),r=new Array(16),v=new Array(8),s=new Array(8),o=new Array(3),b=[0,0,0];(function(){for(var M=0;M<8;++M)v[M]=[1,1,1,1],s[M]=[1,1,1]})();function g(M,w,p){for(var _=0;_<4;++_){M[_]=p[12+_];for(var h=0;h<3;++h)M[_]+=w[h]*p[4*h+_]}}var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function f(M){for(var w=0;w<d.length;++w)if(M=i.positive(M,d[w]),M.length<3)return 0;for(var p=M[0],_=p[0]/p[3],h=p[1]/p[3],L=0,w=1;w+1<M.length;++w){var E=M[w],S=M[w+1],P=E[0]/E[3],F=E[1]/E[3],I=S[0]/S[3],D=S[1]/S[3],R=P-_,O=F-h,z=I-_,G=D-h;L+=Math.abs(R*G-O*z)}return L}var y=[1,1,1],l=[0,0,0],x={cubeEdges:y,axis:l};function c(M,w,p,_,h){a(r,w,M),a(r,p,r);for(var L=0,E=0;E<2;++E){o[2]=_[E][2];for(var S=0;S<2;++S){o[1]=_[S][1];for(var P=0;P<2;++P)o[0]=_[P][0],g(v[L],o,r),L+=1}}for(var F=-1,E=0;E<8;++E){for(var I=v[E][3],D=0;D<3;++D)s[E][D]=v[E][D]/I;h&&(s[E][2]*=-1),I<0&&(F<0||s[E][2]<s[F][2])&&(F=E)}if(F<0){F=0;for(var R=0;R<3;++R){for(var O=(R+2)%3,z=(R+1)%3,G=-1,Y=-1,ee=0;ee<2;++ee){var j=ee<<R,X=j+(ee<<O)+(1-ee<<z),ie=j+(1-ee<<O)+(ee<<z);n(s[j],s[X],s[ie],b)<0||(ee?G=1:Y=1)}if(G<0||Y<0){Y>G&&(F|=1<<R);continue}for(var ee=0;ee<2;++ee){var j=ee<<R,X=j+(ee<<O)+(1-ee<<z),ie=j+(1-ee<<O)+(ee<<z),he=f([v[j],v[X],v[ie],v[j+(1<<O)+(1<<z)]]);ee?G=he:Y=he}if(Y>G){F|=1<<R;continue}}}for(var K=7^F,$=-1,E=0;E<8;++E)E===F||E===K||($<0||s[$][1]>s[E][1])&&($=E);for(var U=-1,E=0;E<3;++E){var H=$^1<<E;if(!(H===F||H===K)){U<0&&(U=H);var z=s[H];z[0]<s[U][0]&&(U=H)}}for(var q=-1,E=0;E<3;++E){var H=$^1<<E;if(!(H===F||H===K||H===U)){q<0&&(q=H);var z=s[H];z[0]>s[q][0]&&(q=H)}}var re=y;re[0]=re[1]=re[2]=0,re[e.log2(U^$)]=$&U,re[e.log2($^q)]=$&q;var Z=q^7;Z===F||Z===K?(Z=U^7,re[e.log2(q^Z)]=Z&q):re[e.log2(U^Z)]=Z&U;for(var Q=l,oe=F,R=0;R<3;++R)oe&1<<R?Q[R]=-1:Q[R]=1;return x}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(u,A,T){A.exports=y;var e=u("gl-buffer"),a=u("gl-vao"),i=u("./shaders").line,n=[0,0,0],r=[0,0,0],v=[0,0,0],s=[0,0,0],o=[1,1];function b(l){return l[0]=l[1]=l[2]=0,l}function g(l,x){return l[0]=x[0],l[1]=x[1],l[2]=x[2],l}function d(l,x,c,M,w,p,_,h){this.gl=l,this.vertBuffer=x,this.vao=c,this.shader=M,this.tickCount=w,this.tickOffset=p,this.gridCount=_,this.gridOffset=h}var f=d.prototype;f.bind=function(l,x,c){this.shader.bind(),this.shader.uniforms.model=l,this.shader.uniforms.view=x,this.shader.uniforms.projection=c,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},f.unbind=function(){this.vao.unbind()},f.drawAxisLine=function(l,x,c,M,w){var p=b(r);this.shader.uniforms.majorAxis=r,p[l]=x[1][l]-x[0][l],this.shader.uniforms.minorAxis=p;var _=g(s,c);_[l]+=x[0][l],this.shader.uniforms.offset=_,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=M;var h=b(v);h[(l+2)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6);var h=b(v);h[(l+1)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6)},f.drawAxisTicks=function(l,x,c,M,w){if(!!this.tickCount[l]){var p=b(n);p[l]=1,this.shader.uniforms.majorAxis=p,this.shader.uniforms.offset=x,this.shader.uniforms.minorAxis=c,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=w;var _=b(v);_[l]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l])}},f.drawGrid=function(l,x,c,M,w,p){if(!!this.gridCount[l]){var _=b(r);_[x]=c[1][x]-c[0][x],this.shader.uniforms.minorAxis=_;var h=g(s,M);h[x]+=c[0][x],this.shader.uniforms.offset=h;var L=b(n);L[l]=1,this.shader.uniforms.majorAxis=L;var E=b(v);E[l]=1,this.shader.uniforms.screenAxis=E,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[l],this.gridOffset[l])}},f.drawZero=function(l,x,c,M,w,p){var _=b(r);this.shader.uniforms.majorAxis=_,_[l]=c[1][l]-c[0][l],this.shader.uniforms.minorAxis=_;var h=g(s,M);h[l]+=c[0][l],this.shader.uniforms.offset=h;var L=b(v);L[x]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},f.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function y(l,x,c){var M=[],w=[0,0,0],p=[0,0,0],_=[0,0,0],h=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var P=M.length/3|0,E=0;E<c[L].length;++E){var S=+c[L][E].x;M.push(S,0,1,S,1,1,S,0,-1,S,0,-1,S,1,1,S,1,-1)}var I=M.length/3|0;w[L]=P,p[L]=I-P;for(var P=M.length/3|0,F=0;F<c[L].length;++F){var S=+c[L][F].x;M.push(S,0,1,S,1,1,S,0,-1,S,0,-1,S,1,1,S,1,-1)}var I=M.length/3|0;_[L]=P,h[L]=I-P}var D=e(l,new Float32Array(M)),R=a(l,[{buffer:D,type:l.FLOAT,size:3,stride:0,offset:0}]),O=i(l);return O.attributes.position.location=0,new d(l,D,R,O,p,w,h,_)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(u,A,T){var e=u("glslify"),a=u("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.line=function(b){return a(b,i,n,null,[{name:"position",type:"vec3"}])};var r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),v=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.text=function(b){return a(b,r,v,null,[{name:"position",type:"vec3"}])};var s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);T.bg=function(b){return a(b,s,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(u,A,T){(function(e){(function(){A.exports=y;var a=u("gl-buffer"),i=u("gl-vao"),n=u("vectorize-text"),r=u("./shaders").text,v=window||e.global||{},s=v.__TEXT_CACHE||{};v.__TEXT_CACHE={};var o=3;function b(l,x,c,M){this.gl=l,this.shader=x,this.buffer=c,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var g=b.prototype,d=[0,0];g.bind=function(l,x,c,M){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=l,w.view=x,w.projection=c,w.pixelScale=M,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},g.unbind=function(){this.vao.unbind()},g.update=function(l,x,c,M,w){var p=[];function _(R,O,z,G,Y,ee){var j=s[z];j||(j=s[z]={});var X=j[O];X||(X=j[O]=f(O,{triangles:!0,font:z,textAlign:"center",textBaseline:"middle",lineSpacing:Y,styletags:ee}));for(var ie=(G||12)/12,he=X.positions,K=X.cells,$=0,U=K.length;$<U;++$)for(var H=K[$],q=2;q>=0;--q){var re=he[H[q]];p.push(ie*re[0],-ie*re[1],R)}}for(var h=[0,0,0],L=[0,0,0],E=[0,0,0],S=[0,0,0],P=1.25,F={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){E[I]=p.length/o|0,_(.5*(l[0][I]+l[1][I]),x[I],c[I],12,P,F),S[I]=(p.length/o|0)-E[I],h[I]=p.length/o|0;for(var D=0;D<M[I].length;++D)!M[I][D].text||_(M[I][D].x,M[I][D].text,M[I][D].font||w,M[I][D].fontSize||12,P,F);L[I]=(p.length/o|0)-h[I]}this.buffer.update(p),this.tickOffset=h,this.tickCount=L,this.labelOffset=E,this.labelCount=S},g.drawTicks=function(l,x,c,M,w,p,_,h){!this.tickCount[l]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=w,this.shader.uniforms.angle=c,this.shader.uniforms.scale=x,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},g.drawLabel=function(l,x,c,M,w,p,_,h){!this.labelCount[l]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=w,this.shader.uniforms.angle=c,this.shader.uniforms.scale=x,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function f(l,x){try{return n(l,x)}catch(c){return console.warn('error vectorizing text:"'+l+'" error:',c),{cells:[],positions:[]}}}function y(l,x,c,M,w,p){var _=a(l),h=i(l,[{buffer:_,size:3}]),L=r(l);L.attributes.position.location=0;var E=new b(l,L,_,h);return E.update(x,c,M,w,p),E}}).call(this)}).call(this,u("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(u,A,T){T.create=a,T.equal=i;function e(n,r){var v=n+"",s=v.indexOf("."),o=0;s>=0&&(o=v.length-s-1);var b=Math.pow(10,o),g=Math.round(n*r*b),d=g+"";if(d.indexOf("e")>=0)return d;var f=g/b,y=g%b;g<0?(f=-Math.ceil(f)|0,y=-y|0):(f=Math.floor(f)|0,y=y|0);var l=""+f;if(g<0&&(l="-"+l),o){for(var x=""+y;x.length<o;)x="0"+x;return l+"."+x}else return l}function a(n,r){for(var v=[],s=0;s<3;++s){var o=[];.5*(n[0][s]+n[1][s]);for(var b=0;b*r[s]<=n[1][s];++b)o.push({x:b*r[s],text:e(r[s],b)});for(var b=-1;b*r[s]>=n[0][s];--b)o.push({x:b*r[s],text:e(r[s],b)});v.push(o)}return v}function i(n,r){for(var v=0;v<3;++v){if(n[v].length!==r[v].length)return!1;for(var s=0;s<n[v].length;++s){var o=n[v][s],b=r[v][s];if(o.x!==b.x||o.text!==b.text||o.font!==b.font||o.fontColor!==b.fontColor||o.fontSize!==b.fontSize||o.dx!==b.dx||o.dy!==b.dy)return!1}}return!0}},{}],77:[function(u,A,T){A.exports=x;var e=u("extract-frustum-planes"),a=u("split-polygon"),i=u("./lib/cube.js"),n=u("gl-mat4/multiply"),r=u("gl-mat4/transpose"),v=u("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function b(c,M,w){this.lo=c,this.hi=M,this.pixelsPerDataUnit=w}var g=[0,0,0,1],d=[0,0,0,1];function f(c,M,w,p,_){for(var h=0;h<3;++h){for(var L=g,E=d,S=0;S<3;++S)E[S]=L[S]=w[S];E[3]=L[3]=1,E[h]+=1,v(E,E,M),E[3]<0&&(c[h]=1/0),L[h]-=1,v(L,L,M),L[3]<0&&(c[h]=1/0);var P=(L[0]/L[3]-E[0]/E[3])*p,F=(L[1]/L[3]-E[1]/E[3])*_;c[h]=.25*Math.sqrt(P*P+F*F)}return c}var y=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],l=[0,0,0];function x(c,M,w,p,F){var h=M.model||s,L=M.view||s,E=M.projection||s,S=M._ortho||!1,P=c.bounds,F=F||i(h,L,E,P,S),I=F.axis;n(o,L,h),n(o,E,o);for(var D=y,R=0;R<3;++R)D[R].lo=1/0,D[R].hi=-1/0,D[R].pixelsPerDataUnit=1/0;var O=e(r(o,o));r(o,o);for(var z=0;z<3;++z){var G=(z+1)%3,Y=(z+2)%3,ee=l;e:for(var R=0;R<2;++R){var j=[];if(I[z]<0!=!!R){ee[z]=P[R][z];for(var X=0;X<2;++X){ee[G]=P[X^R][G];for(var ie=0;ie<2;++ie)ee[Y]=P[ie^X^R][Y],j.push(ee.slice())}for(var he=S?5:4,X=he;X===he;++X){if(j.length===0)continue e;j=a.positive(j,O[X])}for(var X=0;X<j.length;++X)for(var Y=j[X],K=f(l,o,Y,w,p),ie=0;ie<3;++ie)D[ie].lo=Math.min(D[ie].lo,Y[ie]),D[ie].hi=Math.max(D[ie].hi,Y[ie]),ie!==z&&(D[ie].pixelsPerDataUnit=Math.min(D[ie].pixelsPerDataUnit,Math.abs(K[ie])))}}}return D}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(u,A,T){var e=u("typedarray-pool"),a=u("ndarray-ops"),i=u("ndarray"),n=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(d,f,y,l,x){this.gl=d,this.type=f,this.handle=y,this.length=l,this.usage=x}var v=r.prototype;v.bind=function(){this.gl.bindBuffer(this.type,this.handle)},v.unbind=function(){this.gl.bindBuffer(this.type,null)},v.dispose=function(){this.gl.deleteBuffer(this.handle)};function s(d,f,y,l,x,c){var M=x.length*x.BYTES_PER_ELEMENT;if(c<0)return d.bufferData(f,x,l),M;if(M+c>y)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(f,c,x),y}function o(d,f){for(var y=e.malloc(d.length,f),l=d.length,x=0;x<l;++x)y[x]=d[x];return y}function b(d,f){for(var y=1,l=f.length-1;l>=0;--l){if(f[l]!==y)return!1;y*=d[l]}return!0}v.update=function(d,f){if(typeof f!="number"&&(f=-1),this.bind(),typeof d=="object"&&typeof d.shape<"u"){var y=d.dtype;if(n.indexOf(y)<0&&(y="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var l=gl.getExtension("OES_element_index_uint");l&&y!=="uint16"?y="uint32":y="uint16"}if(y===d.dtype&&b(d.shape,d.stride))d.offset===0&&d.data.length===d.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,d.data,f):this.length=s(this.gl,this.type,this.length,this.usage,d.data.subarray(d.offset,d.shape[0]),f);else{var x=e.malloc(d.size,y),c=i(x,d.shape);a.assign(c,d),f<0?this.length=s(this.gl,this.type,this.length,this.usage,x,f):this.length=s(this.gl,this.type,this.length,this.usage,x.subarray(0,d.size),f),e.free(x)}}else if(Array.isArray(d)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=o(d,"uint16"):M=o(d,"float32"),f<0?this.length=s(this.gl,this.type,this.length,this.usage,M,f):this.length=s(this.gl,this.type,this.length,this.usage,M.subarray(0,d.length),f),e.free(M)}else if(typeof d=="object"&&typeof d.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,d,f);else if(typeof d=="number"||d===void 0){if(f>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");d=d|0,d<=0&&(d=1),this.gl.bufferData(this.type,d|0,this.usage),this.length=d}else throw new Error("gl-buffer: Invalid data type")};function g(d,f,y,l){if(y=y||d.ARRAY_BUFFER,l=l||d.DYNAMIC_DRAW,y!==d.ARRAY_BUFFER&&y!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(l!==d.DYNAMIC_DRAW&&l!==d.STATIC_DRAW&&l!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=d.createBuffer(),c=new r(d,y,x,0,l);return c.update(f),c}A.exports=g},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(u,A,T){var e=u("gl-vec3");A.exports=function(i,n){var r=i.positions,v=i.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),s;for(var o=0,b=1/0,g=-1/0,d=1/0,f=-1/0,y=1/0,l=-1/0,x=null,c=null,M=[],w=1/0,p=!1,_=0;_<r.length;_++){var h=r[_];b=Math.min(h[0],b),g=Math.max(h[0],g),d=Math.min(h[1],d),f=Math.max(h[1],f),y=Math.min(h[2],y),l=Math.max(h[2],l);var L=v[_];if(e.length(L)>o&&(o=e.length(L)),_){var E=2*e.distance(x,h)/(e.length(c)+e.length(L));E?(w=Math.min(w,E),p=!1):p=!0}p||(x=h,c=L),M.push(L)}var S=[b,d,y],P=[g,f,l];n&&(n[0]=S,n[1]=P),o===0&&(o=1);var F=1/o;isFinite(w)||(w=1),s.vectorScale=w;var I=i.coneSize||.5;i.absoluteConeSize&&(I=i.absoluteConeSize*F),s.coneScale=I;for(var _=0,D=0;_<r.length;_++)for(var h=r[_],R=h[0],O=h[1],z=h[2],G=M[_],Y=e.length(G)*F,ee=0,j=8;ee<j;ee++){s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vertexIntensity.push(Y,Y,Y),s.vertexIntensity.push(Y,Y,Y);var X=s.positions.length;s.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return s};var a=u("./lib/shaders");A.exports.createMesh=u("./create_mesh"),A.exports.createConeMesh=function(i,n){return A.exports.createMesh(i,n,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(u,A,T){var e=u("gl-shader"),a=u("gl-buffer"),i=u("gl-vao"),n=u("gl-texture2d"),r=u("gl-mat4/multiply"),v=u("gl-mat4/invert"),s=u("ndarray"),o=u("colormap"),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(M,w,p,_,h,L,E,S,P,F,I){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=p,this.pickShader=_,this.trianglePositions=h,this.triangleVectors=L,this.triangleColors=S,this.triangleUVs=P,this.triangleIds=E,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var d=g.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(M){this.pickId=M};function f(M){for(var w=o({colormap:M,nshades:256,format:"rgba"}),p=new Uint8Array(256*4),_=0;_<256;++_){for(var h=w[_],L=0;L<3;++L)p[4*_+L]=h[L];p[4*_+3]=h[3]*255}return s(p,[256,256,4],[4,0,1])}function y(M){for(var w=M.length,p=new Array(w),_=0;_<w;++_)p[_]=M[_][2];return p}d.update=function(M){M=M||{};var w=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(f(M.colormap)),this.texture.generateMipmap());var p=M.cells,_=M.positions,h=M.vectors;if(!_||!p||!h)return;var L=[],E=[],S=[],P=[],F=[];this.cells=p,this.positions=_,this.vectors=h;var I=M.meshColor||[1,1,1,1],D=M.vertexIntensity,R=1/0,O=-1/0;if(D)if(M.vertexIntensityBounds)R=+M.vertexIntensityBounds[0],O=+M.vertexIntensityBounds[1];else for(var z=0;z<D.length;++z){var G=D[z];R=Math.min(R,G),O=Math.max(O,G)}else for(var z=0;z<_.length;++z){var G=_[z][2];R=Math.min(R,G),O=Math.max(O,G)}D?this.intensity=D:this.intensity=y(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var z=0;z<_.length;++z)for(var Y=_[z],ee=0;ee<3;++ee)isNaN(Y[ee])||!isFinite(Y[ee])||(this.bounds[0][ee]=Math.min(this.bounds[0][ee],Y[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],Y[ee]));var j=0;e:for(var z=0;z<p.length;++z){var X=p[z];switch(X.length){case 3:for(var ee=0;ee<3;++ee)for(var ie=X[ee],Y=_[ie],he=0;he<3;++he)if(isNaN(Y[he])||!isFinite(Y[he]))continue e;for(var ee=0;ee<3;++ee){var ie=X[2-ee],Y=_[ie];L.push(Y[0],Y[1],Y[2],Y[3]);var K=h[ie];E.push(K[0],K[1],K[2],K[3]||0);var $=I;$.length===3?S.push($[0],$[1],$[2],1):S.push($[0],$[1],$[2],$[3]);var U;D?U=[(D[ie]-R)/(O-R),0]:U=[(Y[2]-R)/(O-R),0],P.push(U[0],U[1]),F.push(z)}j+=1;break}}this.triangleCount=j,this.trianglePositions.update(L),this.triangleVectors.update(E),this.triangleColors.update(S),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(F))},d.drawTransparent=d.draw=function(M){M=M||{};for(var w=this.gl,p=M.model||b,_=M.view||b,h=M.projection||b,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)L[0][E]=Math.max(L[0][E],this.clipBounds[0][E]),L[1][E]=Math.min(L[1][E],this.clipBounds[1][E]);var S={model:p,view:_,projection:h,inverseModel:b.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};S.inverseModel=v(S.inverseModel,S.model),w.disable(w.CULL_FACE),this.texture.bind(0);var P=new Array(16);r(P,S.view,S.model),r(P,S.projection,P),v(P,P);for(var E=0;E<3;++E)S.eyePosition[E]=P[12+E]/P[15];for(var F=P[15],E=0;E<3;++E)F+=this.lightPosition[E]*P[4*E+3];for(var E=0;E<3;++E){for(var I=P[12+E],D=0;D<3;++D)I+=P[4*D+E]*this.lightPosition[D];S.lightPosition[E]=I/F}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=S,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},d.drawPick=function(M){M=M||{};for(var w=this.gl,p=M.model||b,_=M.view||b,h=M.projection||b,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)L[0][E]=Math.max(L[0][E],this.clipBounds[0][E]),L[1][E]=Math.min(L[1][E],this.clipBounds[1][E]);this._model=[].slice.call(p),this._view=[].slice.call(_),this._projection=[].slice.call(h),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var S={model:p,view:_,projection:h,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=S,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},d.pick=function(M){if(!M||M.id!==this.pickId)return null;var w=M.value[0]+256*M.value[1]+65536*M.value[2],p=this.cells[w],_=this.positions[p[1]].slice(0,3),h={position:_,dataCoordinate:_,index:Math.floor(p[1]/48)};return this.traceType==="cone"?h.index=Math.floor(p[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[p[1]],h.velocity=this.vectors[p[1]].slice(0,3),h.divergence=this.vectors[p[1]][3],h.index=w),h},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function l(M,w){var p=e(M,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return p.attributes.position.location=0,p.attributes.color.location=2,p.attributes.uv.location=3,p.attributes.vector.location=4,p}function x(M,w){var p=e(M,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return p.attributes.position.location=0,p.attributes.id.location=1,p.attributes.vector.location=4,p}function c(M,w,p){var _=p.shaders;arguments.length===1&&(w=M,M=w.gl);var h=l(M,_),L=x(M,_),E=n(M,s(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=M.LINEAR_MIPMAP_LINEAR,E.magFilter=M.LINEAR;var S=a(M),P=a(M),F=a(M),I=a(M),D=a(M),R=i(M,[{buffer:S,type:M.FLOAT,size:4},{buffer:D,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:M.FLOAT,size:4},{buffer:I,type:M.FLOAT,size:2},{buffer:P,type:M.FLOAT,size:4}]),O=new g(M,E,h,L,S,P,D,F,I,R,p.traceType||"cone");return O.update(w),O}A.exports=c},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(u,A,T){var e=u("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},T.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(u,A,T){A.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(u,A,T){var e=u("./1.0/numbers");A.exports=function(i){return e[i]}},{"./1.0/numbers":82}],84:[function(u,A,T){A.exports=g;var e=u("gl-buffer"),a=u("gl-vao"),i=u("./shaders/index"),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(d,f,y,l){this.gl=d,this.shader=l,this.buffer=f,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var v=r.prototype;v.isOpaque=function(){return!this.hasAlpha},v.isTransparent=function(){return this.hasAlpha},v.drawTransparent=v.draw=function(d){var f=this.gl,y=this.shader.uniforms;this.shader.bind();var l=y.view=d.view||n,x=y.projection=d.projection||n;y.model=d.model||n,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var c=l[12],M=l[13],w=l[14],p=l[15],_=d._ortho||!1,h=_?2:1,L=h*this.pixelRatio*(x[3]*c+x[7]*M+x[11]*w+x[15]*p)/f.drawingBufferHeight;this.vao.bind();for(var E=0;E<3;++E)f.lineWidth(this.lineWidth[E]*this.pixelRatio),y.capSize=this.capSize[E]*L,this.lineCount[E]&&f.drawArrays(f.LINES,this.lineOffset[E],this.lineCount[E]);this.vao.unbind()};function s(d,f){for(var y=0;y<3;++y)d[0][y]=Math.min(d[0][y],f[y]),d[1][y]=Math.max(d[1][y],f[y])}var o=function(){for(var d=new Array(3),f=0;f<3;++f){for(var y=[],l=1;l<=2;++l)for(var x=-1;x<=1;x+=2){var c=(l+f)%3,M=[0,0,0];M[c]=x,y.push(M)}d[f]=y}return d}();function b(d,f,y,l){for(var x=o[l],c=0;c<x.length;++c){var M=x[c];d.push(f[0],f[1],f[2],y[0],y[1],y[2],y[3],M[0],M[1],M[2])}return x.length}v.update=function(d){d=d||{},"lineWidth"in d&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=d.color||[[0,0,0],[0,0,0],[0,0,0]],y=d.position,l=d.error;if(Array.isArray(f[0])||(f=[f,f,f]),y&&l){var x=[],c=y.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=M;e:for(var p=0;p<c;++p){for(var _=y[p],h=0;h<3;++h)if(isNaN(_[h])||!isFinite(_[h]))continue e;var L=l[p],E=f[w];if(Array.isArray(E[0])&&(E=f[p]),E.length===3?E=[E[0],E[1],E[2],1]:E.length===4&&(E=[E[0],E[1],E[2],E[3]],!this.hasAlpha&&E[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][w])||isNaN(L[1][w]))){if(L[0][w]<0){var S=_.slice();S[w]+=L[0][w],x.push(_[0],_[1],_[2],E[0],E[1],E[2],E[3],0,0,0,S[0],S[1],S[2],E[0],E[1],E[2],E[3],0,0,0),s(this.bounds,S),M+=2+b(x,S,E,w)}if(L[1][w]>0){var S=_.slice();S[w]+=L[1][w],x.push(_[0],_[1],_[2],E[0],E[1],E[2],E[3],0,0,0,S[0],S[1],S[2],E[0],E[1],E[2],E[3],0,0,0),s(this.bounds,S),M+=2+b(x,S,E,w)}}}this.lineCount[w]=M-this.lineOffset[w]}this.buffer.update(x)}},v.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function g(d){var f=d.gl,y=e(f),l=a(f,[{buffer:y,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:f.FLOAT,size:3,offset:28,stride:40}]),x=i(f);x.attributes.position.location=0,x.attributes.color.location=1,x.attributes.offset.location=2;var c=new r(f,y,l,x);return c.update(d),c}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(u,A,T){var e=u("glslify"),a=u("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(u,A,T){var e=u("gl-texture2d");A.exports=M;var a=null,i,n,r,v;function s(w){var p=w.getParameter(w.FRAMEBUFFER_BINDING),_=w.getParameter(w.RENDERBUFFER_BINDING),h=w.getParameter(w.TEXTURE_BINDING_2D);return[p,_,h]}function o(w,p){w.bindFramebuffer(w.FRAMEBUFFER,p[0]),w.bindRenderbuffer(w.RENDERBUFFER,p[1]),w.bindTexture(w.TEXTURE_2D,p[2])}function b(w,p){var _=w.getParameter(p.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(_+1);for(var h=0;h<=_;++h){for(var L=new Array(_),E=0;E<h;++E)L[E]=w.COLOR_ATTACHMENT0+E;for(var E=h;E<_;++E)L[E]=w.NONE;a[h]=L}}function g(w){switch(w){case i:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case v:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(w,p,_,h,L,E){if(!h)return null;var S=e(w,p,_,L,h);return S.magFilter=w.NEAREST,S.minFilter=w.NEAREST,S.mipSamples=1,S.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,E,w.TEXTURE_2D,S.handle,0),S}function f(w,p,_,h,L){var E=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,E),w.renderbufferStorage(w.RENDERBUFFER,h,p,_),w.framebufferRenderbuffer(w.FRAMEBUFFER,L,w.RENDERBUFFER,E),E}function y(w){var p=s(w.gl),_=w.gl,h=w.handle=_.createFramebuffer(),L=w._shape[0],E=w._shape[1],S=w.color.length,P=w._ext,F=w._useStencil,I=w._useDepth,D=w._colorType;_.bindFramebuffer(_.FRAMEBUFFER,h);for(var R=0;R<S;++R)w.color[R]=d(_,L,E,D,_.RGBA,_.COLOR_ATTACHMENT0+R);S===0?(w._color_rb=f(_,L,E,_.RGBA4,_.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(a[0])):S>1&&P.drawBuffersWEBGL(a[S]);var O=_.getExtension("WEBGL_depth_texture");O?F?w.depth=d(_,L,E,O.UNSIGNED_INT_24_8_WEBGL,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):I&&(w.depth=d(_,L,E,_.UNSIGNED_SHORT,_.DEPTH_COMPONENT,_.DEPTH_ATTACHMENT)):I&&F?w._depth_rb=f(_,L,E,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):I?w._depth_rb=f(_,L,E,_.DEPTH_COMPONENT16,_.DEPTH_ATTACHMENT):F&&(w._depth_rb=f(_,L,E,_.STENCIL_INDEX,_.STENCIL_ATTACHMENT));var z=_.checkFramebufferStatus(_.FRAMEBUFFER);if(z!==_.FRAMEBUFFER_COMPLETE){w._destroyed=!0,_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(w.handle),w.handle=null,w.depth&&(w.depth.dispose(),w.depth=null),w._depth_rb&&(_.deleteRenderbuffer(w._depth_rb),w._depth_rb=null);for(var R=0;R<w.color.length;++R)w.color[R].dispose(),w.color[R]=null;w._color_rb&&(_.deleteRenderbuffer(w._color_rb),w._color_rb=null),o(_,p),g(z)}o(_,p)}function l(w,p,_,h,L,E,S,P){this.gl=w,this._shape=[p|0,_|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var F=0;F<L;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=h,this._useDepth=E,this._useStencil=S;var I=this,D=[p|0,_|0];Object.defineProperties(D,{0:{get:function(){return I._shape[0]},set:function(R){return I.width=R}},1:{get:function(){return I._shape[1]},set:function(R){return I.height=R}}}),this._shapeVector=D,y(this)}var x=l.prototype;function c(w,p,_){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(w._shape[0]===p&&w._shape[1]===_)){var h=w.gl,L=h.getParameter(h.MAX_RENDERBUFFER_SIZE);if(p<0||p>L||_<0||_>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=p,w._shape[1]=_;for(var E=s(h),S=0;S<w.color.length;++S)w.color[S].shape=w._shape;w._color_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,w._color_rb),h.renderbufferStorage(h.RENDERBUFFER,h.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&h.renderbufferStorage(h.RENDERBUFFER,h.STENCIL_INDEX,w._shape[0],w._shape[1])),h.bindFramebuffer(h.FRAMEBUFFER,w.handle);var P=h.checkFramebufferStatus(h.FRAMEBUFFER);P!==h.FRAMEBUFFER_COMPLETE&&(w.dispose(),o(h,E),g(P)),o(h,E)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[w|0,w|0]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var p=w[0]|0,_=w[1]|0;return c(this,p,_),[p,_]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return w=w|0,c(this,w,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w=w|0,c(this,this._shape[0],w),w},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var p=0;p<this.color.length;++p)this.color[p].dispose(),this.color[p]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(w,p,_,h){i||(i=w.FRAMEBUFFER_UNSUPPORTED,n=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,v=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=w.getExtension("WEBGL_draw_buffers");if(!a&&L&&b(w,L),Array.isArray(p)&&(h=_,_=p[1]|0,p=p[0]|0),typeof p!="number")throw new Error("gl-fbo: Missing shape parameter");var E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(p<0||p>E||_<0||_>E)throw new Error("gl-fbo: Parameters are too large for FBO");h=h||{};var S=1;if("color"in h){if(S=Math.max(h.color|0,0),S<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(S>1)if(L){if(S>w.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+S+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=w.UNSIGNED_BYTE,F=w.getExtension("OES_texture_float");if(h.float&&S>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");P=w.FLOAT}else h.preferFloat&&S>0&&F&&(P=w.FLOAT);var I=!0;"depth"in h&&(I=!!h.depth);var D=!1;return"stencil"in h&&(D=!!h.stencil),new l(w,p,_,P,S,I,D,L)}},{"gl-texture2d":146}],87:[function(u,A,T){var e=u("sprintf-js").sprintf,a=u("gl-constants/lookup"),i=u("glsl-shader-name"),n=u("add-line-numbers");A.exports=r;function r(v,s,o){var b=i(s)||"of unknown name (see npm glsl-shader-name)",g="unknown type";o!==void 0&&(g=o===a.FRAGMENT_SHADER?"fragment":"vertex");for(var d=e(`Error compiling %s shader %s:
`,g,b),f=e("%s%s",d,v),y=v.split(`
`),l={},x=0;x<y.length;x++){var c=y[x];if(!(c===""||c==="\0")){var M=parseInt(c.split(":")[2]);if(isNaN(M))throw new Error(e("Could not parse error: %s",c));l[M]=c}}for(var w=n(s).split(`
`),x=0;x<w.length;x++)if(!(!l[x+3]&&!l[x+2]&&!l[x+1])){var p=w[x];if(d+=p+`
`,l[x+1]){var _=l[x+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),d+=e(`^^^ %s

`,_)}}return{long:d.trim(),short:f.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(u,A,T){A.exports=g;var e=u("binary-search-bounds"),a=u("iota-array"),i=u("typedarray-pool"),n=u("gl-shader"),r=u("gl-buffer"),v=u("./lib/shaders");function s(d,f,y,l,x,c,M){this.plot=d,this.shader=f,this.pickShader=y,this.positionBuffer=l,this.weightBuffer=x,this.colorBuffer=c,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=s.prototype,b=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var d=[1,0,0,0,1,0,0,0,1];return function(){var f=this.plot,y=this.shader,l=this.bounds,x=this.numVertices;if(!(x<=0)){var c=f.gl,M=f.dataBox,w=l[2]-l[0],p=l[3]-l[1],_=M[2]-M[0],h=M[3]-M[1];d[0]=2*w/_,d[4]=2*p/h,d[6]=2*(l[0]-M[0])/_-1,d[7]=2*(l[1]-M[1])/h-1,y.bind();var L=y.uniforms;L.viewTransform=d,L.shape=this.shape;var E=y.attributes;this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(c.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),E.color.pointer(c.UNSIGNED_BYTE,!0),c.drawArrays(c.TRIANGLES,0,x)}}}(),o.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0];return function(y){var l=this.plot,x=this.pickShader,c=this.bounds,M=this.numVertices;if(!(M<=0)){var w=l.gl,p=l.dataBox,_=c[2]-c[0],h=c[3]-c[1],L=p[2]-p[0],E=p[3]-p[1];d[0]=2*_/L,d[4]=2*h/E,d[6]=2*(c[0]-p[0])/L-1,d[7]=2*(c[1]-p[1])/E-1;for(var S=0;S<4;++S)f[S]=y>>S*8&255;this.pickOffset=y,x.bind();var P=x.uniforms;P.viewTransform=d,P.pickOffset=f,P.shape=this.shape;var F=x.attributes;return this.positionBuffer.bind(),F.position.pointer(),this.weightBuffer.bind(),F.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),F.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,M),y+this.shape[0]*this.shape[1]}}}(),o.pick=function(d,f,y){var l=this.pickOffset,x=this.shape[0]*this.shape[1];if(y<l||y>=l+x)return null;var c=y-l,M=this.xData,w=this.yData;return{object:this,pointId:c,dataCoord:[M[c%this.shape[0]],w[c/this.shape[0]|0]]}},o.update=function(d){d=d||{};var f=d.shape||[0,0],y=d.x||a(f[0]),l=d.y||a(f[1]),x=d.z||new Float32Array(f[0]*f[1]),c=d.zsmooth!==!1;this.xData=y,this.yData=l;var M=d.colorLevels||[0],w=d.colorValues||[0,0,0,1],p=M.length,_=this.bounds,h,L,E,S;c?(h=_[0]=y[0],L=_[1]=l[0],E=_[2]=y[y.length-1],S=_[3]=l[l.length-1]):(h=_[0]=y[0]+(y[1]-y[0])/2,L=_[1]=l[0]+(l[1]-l[0])/2,E=_[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,S=_[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var P=1/(E-h),F=1/(S-L),I=f[0],D=f[1];this.shape=[I,D];var R=(c?(I-1)*(D-1):I*D)*(b.length>>>1);this.numVertices=R;for(var O=i.mallocUint8(R*4),z=i.mallocFloat32(R*2),G=i.mallocUint8(R*2),Y=i.mallocUint32(R),ee=0,j=c?I-1:I,X=c?D-1:D,ie=0;ie<X;++ie){var he,K;c?(he=F*(l[ie]-L),K=F*(l[ie+1]-L)):(he=ie<D-1?F*(l[ie]-(l[ie+1]-l[ie])/2-L):F*(l[ie]-(l[ie]-l[ie-1])/2-L),K=ie<D-1?F*(l[ie]+(l[ie+1]-l[ie])/2-L):F*(l[ie]+(l[ie]-l[ie-1])/2-L));for(var $=0;$<j;++$){var U,H;c?(U=P*(y[$]-h),H=P*(y[$+1]-h)):(U=$<I-1?P*(y[$]-(y[$+1]-y[$])/2-h):P*(y[$]-(y[$]-y[$-1])/2-h),H=$<I-1?P*(y[$]+(y[$+1]-y[$])/2-h):P*(y[$]+(y[$]-y[$-1])/2-h));for(var q=0;q<b.length;q+=2){var re=b[q],Z=b[q+1],Q=c?(ie+Z)*I+($+re):ie*I+$,oe=x[Q],se=e.le(M,oe),ae,le,_e,fe;if(se<0)ae=w[0],le=w[1],_e=w[2],fe=w[3];else if(se===p-1)ae=w[4*p-4],le=w[4*p-3],_e=w[4*p-2],fe=w[4*p-1];else{var me=(oe-M[se])/(M[se+1]-M[se]),xe=1-me,ye=4*se,be=4*(se+1);ae=xe*w[ye]+me*w[be],le=xe*w[ye+1]+me*w[be+1],_e=xe*w[ye+2]+me*w[be+2],fe=xe*w[ye+3]+me*w[be+3]}O[4*ee]=255*ae,O[4*ee+1]=255*le,O[4*ee+2]=255*_e,O[4*ee+3]=255*fe,z[2*ee]=U*.5+H*.5,z[2*ee+1]=he*.5+K*.5,G[2*ee]=re,G[2*ee+1]=Z,Y[ee]=ie*I+$,ee+=1}}}this.positionBuffer.update(z),this.weightBuffer.update(G),this.colorBuffer.update(O),this.idBuffer.update(Y),i.free(z),i.free(O),i.free(G),i.free(Y)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function g(d,f){var y=d.gl,l=n(y,v.vertex,v.fragment),x=n(y,v.pickVertex,v.pickFragment),c=r(y),M=r(y),w=r(y),p=r(y),_=new s(d,l,x,c,M,w,p);return _.update(f),d.addObject(_),_}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(u,A,T){var e=u("glslify");A.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(u,A,T){var e=u("glslify"),a=u("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),v=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];T.createShader=function(s){return a(s,i,n,null,v)},T.createPickShader=function(s){return a(s,i,r,null,v)}},{"gl-shader":132,glslify:231}],91:[function(u,A,T){A.exports=w;var e=u("gl-buffer"),a=u("gl-vao"),i=u("gl-texture2d"),n=new Uint8Array(4),r=new Float32Array(n.buffer);function v(p,_,h,L){return n[0]=L,n[1]=h,n[2]=_,n[3]=p,r[0]}var s=u("binary-search-bounds"),o=u("ndarray"),b=u("./lib/shaders"),g=b.createShader,d=b.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(p,_){for(var h=0,L=0;L<3;++L){var E=p[L]-_[L];h+=E*E}return Math.sqrt(h)}function l(p){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],h=0;h<3;++h)_[0][h]=Math.max(p[0][h],_[0][h]),_[1][h]=Math.min(p[1][h],_[1][h]);return _}function x(p,_,h,L){this.arcLength=p,this.position=_,this.index=h,this.dataCoordinate=L}function c(p,_,h,L,E,S){this.gl=p,this.shader=_,this.pickShader=h,this.buffer=L,this.vao=E,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=S,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=c.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(p){this.pickId=p},M.drawTransparent=M.draw=function(p){if(!!this.vertexCount){var _=this.gl,h=this.shader,L=this.vao;h.bind(),h.uniforms={model:p.model||f,view:p.view||f,projection:p.projection||f,clipBounds:l(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.drawPick=function(p){if(!!this.vertexCount){var _=this.gl,h=this.pickShader,L=this.vao;h.bind(),h.uniforms={model:p.model||f,view:p.view||f,projection:p.projection||f,pickId:this.pickId,clipBounds:l(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(_.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.update=function(p){var _,h;this.dirty=!0;var L=!!p.connectGaps;"dashScale"in p&&(this.dashScale=p.dashScale),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var E=[],S=[],P=[],F=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=p.position||p.positions;if(R){var O=p.color||p.colors||[0,0,0,1],z=p.lineWidth||1,G=!1;e:for(_=1;_<R.length;++_){var Y=R[_-1],ee=R[_];for(S.push(F),P.push(Y.slice()),h=0;h<3;++h){if(isNaN(Y[h])||isNaN(ee[h])||!isFinite(Y[h])||!isFinite(ee[h])){if(!L&&E.length>0){for(var j=0;j<24;++j)E.push(E[E.length-12]);I+=2,G=!0}continue e}D[0][h]=Math.min(D[0][h],Y[h],ee[h]),D[1][h]=Math.max(D[1][h],Y[h],ee[h])}var X,ie;Array.isArray(O[0])?(X=O.length>_-1?O[_-1]:O.length>0?O[O.length-1]:[0,0,0,1],ie=O.length>_?O[_]:O.length>0?O[O.length-1]:[0,0,0,1]):X=ie=O,X.length===3&&(X=[X[0],X[1],X[2],1]),ie.length===3&&(ie=[ie[0],ie[1],ie[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0);var he;Array.isArray(z)?he=z.length>_-1?z[_-1]:z.length>0?z[z.length-1]:[0,0,0,1]:he=z;var K=F;if(F+=y(Y,ee),G){for(h=0;h<2;++h)E.push(Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,he,X[0],X[1],X[2],X[3]);I+=2,G=!1}E.push(Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,he,X[0],X[1],X[2],X[3],Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],K,-he,X[0],X[1],X[2],X[3],ee[0],ee[1],ee[2],Y[0],Y[1],Y[2],F,-he,ie[0],ie[1],ie[2],ie[3],ee[0],ee[1],ee[2],Y[0],Y[1],Y[2],F,he,ie[0],ie[1],ie[2],ie[3]),I+=4}}if(this.buffer.update(E),S.push(F),P.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=P,this.arcLength=S,"dashes"in p){var $=p.dashes,U=$.slice();for(U.unshift(0),_=1;_<U.length;++_)U[_]=U[_-1]+U[_];var H=o(new Array(256*4),[256,1,4]);for(_=0;_<256;++_){for(h=0;h<4;++h)H.set(_,0,h,0);s.le(U,U[U.length-1]*_/255)&1?H.set(_,0,0,0):H.set(_,0,0,255)}this.texture.setPixels(H)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(p){if(!p||p.id!==this.pickId)return null;var _=v(p.value[0],p.value[1],p.value[2],0),h=s.le(this.arcLength,_);if(h<0)return null;if(h===this.arcLength.length-1)return new x(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),h);for(var L=this.points[h],E=this.points[Math.min(h+1,this.points.length-1)],S=(_-this.arcLength[h])/(this.arcLength[h+1]-this.arcLength[h]),P=1-S,F=[0,0,0],I=0;I<3;++I)F[I]=P*L[I]+S*E[I];var D=Math.min(S<.5?h:h+1,this.points.length-1);return new x(_,F,D,this.points[D])};function w(p){var _=p.gl||p.scene&&p.scene.gl,h=g(_);h.attributes.position.location=0,h.attributes.nextPosition.location=1,h.attributes.arcLength.location=2,h.attributes.lineWidth.location=3,h.attributes.color.location=4;var L=d(_);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var E=e(_),S=a(_,[{buffer:E,size:3,offset:0,stride:48},{buffer:E,size:3,offset:12,stride:48},{buffer:E,size:1,offset:24,stride:48},{buffer:E,size:1,offset:28,stride:48},{buffer:E,size:4,offset:32,stride:48}]),P=o(new Array(256*4),[256,1,4]),F=0;F<256*4;++F)P.data[F]=255;var I=i(_,P);I.wrap=_.REPEAT;var D=new c(_,h,L,E,S,I);return D.update(p),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(u,A,T){A.exports=e;function e(a){var i=new Float32Array(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i}},{}],93:[function(u,A,T){A.exports=e;function e(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(u,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3],s=a[4],o=a[5],b=a[6],g=a[7],d=a[8],f=a[9],y=a[10],l=a[11],x=a[12],c=a[13],M=a[14],w=a[15],p=i*o-n*s,_=i*b-r*s,h=i*g-v*s,L=n*b-r*o,E=n*g-v*o,S=r*g-v*b,P=d*c-f*x,F=d*M-y*x,I=d*w-l*x,D=f*M-y*c,R=f*w-l*c,O=y*w-l*M;return p*O-_*R+h*D+L*I-E*F+S*P}},{}],95:[function(u,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=n+n,b=r+r,g=v+v,d=n*o,f=r*o,y=r*b,l=v*o,x=v*b,c=v*g,M=s*o,w=s*b,p=s*g;return a[0]=1-y-c,a[1]=f+p,a[2]=l-w,a[3]=0,a[4]=f-p,a[5]=1-d-c,a[6]=x+M,a[7]=0,a[8]=l+w,a[9]=x-M,a[10]=1-d-y,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3],b=r+r,g=v+v,d=s+s,f=r*b,y=r*g,l=r*d,x=v*g,c=v*d,M=s*d,w=o*b,p=o*g,_=o*d;return a[0]=1-(x+M),a[1]=y+_,a[2]=l-p,a[3]=0,a[4]=y-_,a[5]=1-(f+M),a[6]=c+w,a[7]=0,a[8]=l+p,a[9]=c-w,a[10]=1-(f+x),a[11]=0,a[12]=n[0],a[13]=n[1],a[14]=n[2],a[15]=1,a}},{}],97:[function(u,A,T){A.exports=e;function e(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(u,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=i[4],b=i[5],g=i[6],d=i[7],f=i[8],y=i[9],l=i[10],x=i[11],c=i[12],M=i[13],w=i[14],p=i[15],_=n*b-r*o,h=n*g-v*o,L=n*d-s*o,E=r*g-v*b,S=r*d-s*b,P=v*d-s*g,F=f*M-y*c,I=f*w-l*c,D=f*p-x*c,R=y*w-l*M,O=y*p-x*M,z=l*p-x*w,G=_*z-h*O+L*R+E*D-S*I+P*F;return G?(G=1/G,a[0]=(b*z-g*O+d*R)*G,a[1]=(v*O-r*z-s*R)*G,a[2]=(M*P-w*S+p*E)*G,a[3]=(l*S-y*P-x*E)*G,a[4]=(g*D-o*z-d*I)*G,a[5]=(n*z-v*D+s*I)*G,a[6]=(w*L-c*P-p*h)*G,a[7]=(f*P-l*L+x*h)*G,a[8]=(o*O-b*D+d*F)*G,a[9]=(r*D-n*O-s*F)*G,a[10]=(c*S-M*L+p*_)*G,a[11]=(y*L-f*S-x*_)*G,a[12]=(b*I-o*R-g*F)*G,a[13]=(n*R-r*I+v*F)*G,a[14]=(M*h-c*E-w*_)*G,a[15]=(f*E-y*h+l*_)*G,a):null}},{}],99:[function(u,A,T){var e=u("./identity");A.exports=a;function a(i,n,r,v){var s,o,b,g,d,f,y,l,x,c,M=n[0],w=n[1],p=n[2],_=v[0],h=v[1],L=v[2],E=r[0],S=r[1],P=r[2];return Math.abs(M-E)<1e-6&&Math.abs(w-S)<1e-6&&Math.abs(p-P)<1e-6?e(i):(y=M-E,l=w-S,x=p-P,c=1/Math.sqrt(y*y+l*l+x*x),y*=c,l*=c,x*=c,s=h*x-L*l,o=L*y-_*x,b=_*l-h*y,c=Math.sqrt(s*s+o*o+b*b),c?(c=1/c,s*=c,o*=c,b*=c):(s=0,o=0,b=0),g=l*b-x*o,d=x*s-y*b,f=y*o-l*s,c=Math.sqrt(g*g+d*d+f*f),c?(c=1/c,g*=c,d*=c,f*=c):(g=0,d=0,f=0),i[0]=s,i[1]=g,i[2]=y,i[3]=0,i[4]=o,i[5]=d,i[6]=l,i[7]=0,i[8]=b,i[9]=f,i[10]=x,i[11]=0,i[12]=-(s*M+o*w+b*p),i[13]=-(g*M+d*w+f*p),i[14]=-(y*M+l*w+x*p),i[15]=1,i)}},{"./identity":97}],100:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3],b=i[4],g=i[5],d=i[6],f=i[7],y=i[8],l=i[9],x=i[10],c=i[11],M=i[12],w=i[13],p=i[14],_=i[15],h=n[0],L=n[1],E=n[2],S=n[3];return a[0]=h*r+L*b+E*y+S*M,a[1]=h*v+L*g+E*l+S*w,a[2]=h*s+L*d+E*x+S*p,a[3]=h*o+L*f+E*c+S*_,h=n[4],L=n[5],E=n[6],S=n[7],a[4]=h*r+L*b+E*y+S*M,a[5]=h*v+L*g+E*l+S*w,a[6]=h*s+L*d+E*x+S*p,a[7]=h*o+L*f+E*c+S*_,h=n[8],L=n[9],E=n[10],S=n[11],a[8]=h*r+L*b+E*y+S*M,a[9]=h*v+L*g+E*l+S*w,a[10]=h*s+L*d+E*x+S*p,a[11]=h*o+L*f+E*c+S*_,h=n[12],L=n[13],E=n[14],S=n[15],a[12]=h*r+L*b+E*y+S*M,a[13]=h*v+L*g+E*l+S*w,a[14]=h*s+L*d+E*x+S*p,a[15]=h*o+L*f+E*c+S*_,a}},{}],101:[function(u,A,T){A.exports=e;function e(a,i,n,r,v,s,o){var b=1/(i-n),g=1/(r-v),d=1/(s-o);return a[0]=-2*b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*g,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*d,a[11]=0,a[12]=(i+n)*b,a[13]=(v+r)*g,a[14]=(o+s)*d,a[15]=1,a}},{}],102:[function(u,A,T){A.exports=e;function e(a,i,n,r,v){var s=1/Math.tan(i/2),o=1/(r-v);return a[0]=s/n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(v+r)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*v*r*o,a[15]=0,a}},{}],103:[function(u,A,T){A.exports=e;function e(a,i,n,r){var v=r[0],s=r[1],o=r[2],b=Math.sqrt(v*v+s*s+o*o),g,d,f,y,l,x,c,M,w,p,_,h,L,E,S,P,F,I,D,R,O,z,G,Y;return Math.abs(b)<1e-6?null:(b=1/b,v*=b,s*=b,o*=b,g=Math.sin(n),d=Math.cos(n),f=1-d,y=i[0],l=i[1],x=i[2],c=i[3],M=i[4],w=i[5],p=i[6],_=i[7],h=i[8],L=i[9],E=i[10],S=i[11],P=v*v*f+d,F=s*v*f+o*g,I=o*v*f-s*g,D=v*s*f-o*g,R=s*s*f+d,O=o*s*f+v*g,z=v*o*f+s*g,G=s*o*f-v*g,Y=o*o*f+d,a[0]=y*P+M*F+h*I,a[1]=l*P+w*F+L*I,a[2]=x*P+p*F+E*I,a[3]=c*P+_*F+S*I,a[4]=y*D+M*R+h*O,a[5]=l*D+w*R+L*O,a[6]=x*D+p*R+E*O,a[7]=c*D+_*R+S*O,a[8]=y*z+M*G+h*Y,a[9]=l*z+w*G+L*Y,a[10]=x*z+p*G+E*Y,a[11]=c*z+_*G+S*Y,i!==a&&(a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a)}},{}],104:[function(u,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[4],o=i[5],b=i[6],g=i[7],d=i[8],f=i[9],y=i[10],l=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=s*v+d*r,a[5]=o*v+f*r,a[6]=b*v+y*r,a[7]=g*v+l*r,a[8]=d*v-s*r,a[9]=f*v-o*r,a[10]=y*v-b*r,a[11]=l*v-g*r,a}},{}],105:[function(u,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[0],o=i[1],b=i[2],g=i[3],d=i[8],f=i[9],y=i[10],l=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*v-d*r,a[1]=o*v-f*r,a[2]=b*v-y*r,a[3]=g*v-l*r,a[8]=s*r+d*v,a[9]=o*r+f*v,a[10]=b*r+y*v,a[11]=g*r+l*v,a}},{}],106:[function(u,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[0],o=i[1],b=i[2],g=i[3],d=i[4],f=i[5],y=i[6],l=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*v+d*r,a[1]=o*v+f*r,a[2]=b*v+y*r,a[3]=g*v+l*r,a[4]=d*v-s*r,a[5]=f*v-o*r,a[6]=y*v-b*r,a[7]=l*v-g*r,a}},{}],107:[function(u,A,T){A.exports=e;function e(a,i,n){var r=n[0],v=n[1],s=n[2];return a[0]=i[0]*r,a[1]=i[1]*r,a[2]=i[2]*r,a[3]=i[3]*r,a[4]=i[4]*v,a[5]=i[5]*v,a[6]=i[6]*v,a[7]=i[7]*v,a[8]=i[8]*s,a[9]=i[9]*s,a[10]=i[10]*s,a[11]=i[11]*s,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}},{}],108:[function(u,A,T){A.exports=e;function e(a,i,n){var r=n[0],v=n[1],s=n[2],o,b,g,d,f,y,l,x,c,M,w,p;return i===a?(a[12]=i[0]*r+i[4]*v+i[8]*s+i[12],a[13]=i[1]*r+i[5]*v+i[9]*s+i[13],a[14]=i[2]*r+i[6]*v+i[10]*s+i[14],a[15]=i[3]*r+i[7]*v+i[11]*s+i[15]):(o=i[0],b=i[1],g=i[2],d=i[3],f=i[4],y=i[5],l=i[6],x=i[7],c=i[8],M=i[9],w=i[10],p=i[11],a[0]=o,a[1]=b,a[2]=g,a[3]=d,a[4]=f,a[5]=y,a[6]=l,a[7]=x,a[8]=c,a[9]=M,a[10]=w,a[11]=p,a[12]=o*r+f*v+c*s+i[12],a[13]=b*r+y*v+M*s+i[13],a[14]=g*r+l*v+w*s+i[14],a[15]=d*r+x*v+p*s+i[15]),a}},{}],109:[function(u,A,T){A.exports=e;function e(a,i){if(a===i){var n=i[1],r=i[2],v=i[3],s=i[6],o=i[7],b=i[11];a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=n,a[6]=i[9],a[7]=i[13],a[8]=r,a[9]=s,a[11]=i[14],a[12]=v,a[13]=o,a[14]=b}else a[0]=i[0],a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=i[1],a[5]=i[5],a[6]=i[9],a[7]=i[13],a[8]=i[2],a[9]=i[6],a[10]=i[10],a[11]=i[14],a[12]=i[3],a[13]=i[7],a[14]=i[11],a[15]=i[15];return a}},{}],110:[function(u,A,T){var e=u("barycentric"),a=u("polytope-closest-point/lib/closest_point_2d.js");A.exports=s;function i(o,b){for(var g=[0,0,0,0],d=0;d<4;++d)for(var f=0;f<4;++f)g[f]+=o[4*d+f]*b[d];return g}function n(o,b,g,d,f){for(var y=i(d,i(g,i(b,[o[0],o[1],o[2],1]))),l=0;l<3;++l)y[l]/=y[3];return[.5*f[0]*(1+y[0]),.5*f[1]*(1-y[1])]}function r(o,b){if(o.length===2){for(var g=0,d=0,f=0;f<2;++f)g+=Math.pow(b[f]-o[0][f],2),d+=Math.pow(b[f]-o[1][f],2);return g=Math.sqrt(g),d=Math.sqrt(d),g+d<1e-6?[1,0]:[d/(g+d),g/(d+g)]}else if(o.length===3){var y=[0,0];return a(o[0],o[1],o[2],b,y),e(o,y)}return[]}function v(o,b){for(var g=[0,0,0],d=0;d<o.length;++d)for(var f=o[d],y=b[d],l=0;l<3;++l)g[l]+=y*f[l];return g}function s(o,b,g,d,f,y){if(o.length===1)return[0,o[0].slice()];for(var l=new Array(o.length),x=0;x<o.length;++x)l[x]=n(o[x],g,d,f,y);for(var c=0,M=1/0,x=0;x<l.length;++x){for(var w=0,p=0;p<2;++p)w+=Math.pow(l[x][p]-b[p],2);w<M&&(M=w,c=x)}for(var _=r(l,b),h=0,x=0;x<3;++x){if(_[x]<-.001||_[x]>1.0001)return null;h+=_[x]}return Math.abs(h-1)>.001?null:[c,v(o,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(u,A,T){var e=u("glslify"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),v=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),b=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),f=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.wireShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.pointShader={vertex:v,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},T.pickShader={vertex:o,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},T.pointPickShader={vertex:g,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},T.contourShader={vertex:d,fragment:f,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(u,A,T){var e=1e-6,a=1e-6,i=u("gl-shader"),n=u("gl-buffer"),r=u("gl-vao"),v=u("gl-texture2d"),s=u("normals"),o=u("gl-mat4/multiply"),b=u("gl-mat4/invert"),g=u("ndarray"),d=u("colormap"),f=u("simplicial-complex-contour"),y=u("typedarray-pool"),l=u("./lib/shaders"),x=u("./lib/closest-point"),c=l.meshShader,M=l.wireShader,w=l.pointShader,p=l.pickShader,_=l.pointPickShader,h=l.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function E(j,X,ie,he,K,$,U,H,q,re,Z,Q,oe,se,ae,le,_e,fe,me,xe,ye,be,ke,De,He,Ae,Le){this.gl=j,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=ie,this.lineShader=he,this.pointShader=K,this.pickShader=$,this.pointPickShader=U,this.contourShader=H,this.trianglePositions=q,this.triangleColors=Z,this.triangleNormals=oe,this.triangleUVs=Q,this.triangleIds=re,this.triangleVAO=se,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ae,this.edgeColors=_e,this.edgeUVs=fe,this.edgeIds=le,this.edgeVAO=me,this.edgeCount=0,this.pointPositions=xe,this.pointColors=be,this.pointUVs=ke,this.pointSizes=De,this.pointIds=ye,this.pointVAO=He,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ae,this.contourVAO=Le,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var S=E.prototype;S.isOpaque=function(){return!this.hasAlpha},S.isTransparent=function(){return this.hasAlpha},S.pickSlots=1,S.setPickBase=function(j){this.pickId=j};function P(j,X){if(!X||!X.length)return 1;for(var ie=0;ie<X.length;++ie){if(X.length<2)return 1;if(X[ie][0]===j)return X[ie][1];if(X[ie][0]>j&&ie>0){var he=(X[ie][0]-j)/(X[ie][0]-X[ie-1][0]);return X[ie][1]*(1-he)+he*X[ie-1][1]}}return 1}function F(j,X){for(var ie=d({colormap:j,nshades:256,format:"rgba"}),he=new Uint8Array(256*4),K=0;K<256;++K){for(var $=ie[K],U=0;U<3;++U)he[4*K+U]=$[U];X?he[4*K+3]=255*P(K/255,X):he[4*K+3]=255*$[3]}return g(he,[256,256,4],[4,0,1])}function I(j){for(var X=j.length,ie=new Array(X),he=0;he<X;++he)ie[he]=j[he][2];return ie}S.highlight=function(j){if(!j||!this.contourEnable){this.contourCount=0;return}for(var X=f(this.cells,this.intensity,j.intensity),ie=X.cells,he=X.vertexIds,K=X.vertexWeights,$=ie.length,U=y.mallocFloat32(2*3*$),H=0,q=0;q<$;++q)for(var re=ie[q],Z=0;Z<2;++Z){var Q=re[0];re.length===2&&(Q=re[Z]);for(var oe=he[Q][0],se=he[Q][1],ae=K[Q],le=1-ae,_e=this.positions[oe],fe=this.positions[se],me=0;me<3;++me)U[H++]=ae*_e[me]+le*fe[me]}this.contourCount=H/3|0,this.contourPositions.update(U.subarray(0,H)),y.free(U)},S.update=function(j){j=j||{};var X=this.gl;this.dirty=!0,"contourEnable"in j&&(this.contourEnable=j.contourEnable),"contourColor"in j&&(this.contourColor=j.contourColor),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"lightPosition"in j&&(this.lightPosition=j.lightPosition),this.hasAlpha=!1,"opacity"in j&&(this.opacity=j.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in j&&(this.opacityscale=j.opacityscale,this.hasAlpha=!0),"ambient"in j&&(this.ambientLight=j.ambient),"diffuse"in j&&(this.diffuseLight=j.diffuse),"specular"in j&&(this.specularLight=j.specular),"roughness"in j&&(this.roughness=j.roughness),"fresnel"in j&&(this.fresnel=j.fresnel),j.texture?(this.texture.dispose(),this.texture=v(X,j.texture)):j.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(F(j.colormap,this.opacityscale)),this.texture.generateMipmap());var ie=j.cells,he=j.positions;if(!he||!ie)return;var K=[],$=[],U=[],H=[],q=[],re=[],Z=[],Q=[],oe=[],se=[],ae=[],le=[],_e=[],fe=[];this.cells=ie,this.positions=he;var me=j.vertexNormals,xe=j.cellNormals,ye=j.vertexNormalsEpsilon===void 0?e:j.vertexNormalsEpsilon,be=j.faceNormalsEpsilon===void 0?a:j.faceNormalsEpsilon;j.useFacetNormals&&!xe&&(xe=s.faceNormals(ie,he,be)),!xe&&!me&&(me=s.vertexNormals(ie,he,ye));var ke=j.vertexColors,De=j.cellColors,He=j.meshColor||[1,1,1,1],Ae=j.vertexUVs,Le=j.vertexIntensity,Ze=j.cellUVs,We=j.cellIntensity,ze=1/0,Ie=-1/0;if(!Ae&&!Ze)if(Le)if(j.vertexIntensityBounds)ze=+j.vertexIntensityBounds[0],Ie=+j.vertexIntensityBounds[1];else for(var Ve=0;Ve<Le.length;++Ve){var dt=Le[Ve];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}else if(We)if(j.cellIntensityBounds)ze=+j.cellIntensityBounds[0],Ie=+j.cellIntensityBounds[1];else for(var Ve=0;Ve<We.length;++Ve){var dt=We[Ve];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}else for(var Ve=0;Ve<he.length;++Ve){var dt=he[Ve][2];ze=Math.min(ze,dt),Ie=Math.max(Ie,dt)}Le?this.intensity=Le:We?this.intensity=We:this.intensity=I(he),this.pickVertex=!(We||De);var Ft=j.pointSizes,Qt=j.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ve=0;Ve<he.length;++Ve)for(var Ot=he[Ve],Ct=0;Ct<3;++Ct)isNaN(Ot[Ct])||!isFinite(Ot[Ct])||(this.bounds[0][Ct]=Math.min(this.bounds[0][Ct],Ot[Ct]),this.bounds[1][Ct]=Math.max(this.bounds[1][Ct],Ot[Ct]));var jt=0,Nt=0,Lt=0;e:for(var Ve=0;Ve<ie.length;++Ve){var Xe=ie[Ve];switch(Xe.length){case 1:for(var it=Xe[0],Ot=he[it],Ct=0;Ct<3;++Ct)if(isNaN(Ot[Ct])||!isFinite(Ot[Ct]))continue e;se.push(Ot[0],Ot[1],Ot[2]);var Ye;ke?Ye=ke[it]:De?Ye=De[Ve]:Ye=He,this.opacityscale&&Le?$.push(Ye[0],Ye[1],Ye[2],this.opacity*P((Le[it]-ze)/(Ie-ze),this.opacityscale)):Ye.length===3?ae.push(Ye[0],Ye[1],Ye[2],this.opacity):(ae.push(Ye[0],Ye[1],Ye[2],Ye[3]*this.opacity),Ye[3]<1&&(this.hasAlpha=!0));var Ee;Ae?Ee=Ae[it]:Le?Ee=[(Le[it]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ve]:We?Ee=[(We[Ve]-ze)/(Ie-ze),0]:Ee=[(Ot[2]-ze)/(Ie-ze),0],le.push(Ee[0],Ee[1]),Ft?_e.push(Ft[it]):_e.push(Qt),fe.push(Ve),Lt+=1;break;case 2:for(var Ct=0;Ct<2;++Ct)for(var it=Xe[Ct],Ot=he[it],Ge=0;Ge<3;++Ge)if(isNaN(Ot[Ge])||!isFinite(Ot[Ge]))continue e;for(var Ct=0;Ct<2;++Ct){var it=Xe[Ct],Ot=he[it];re.push(Ot[0],Ot[1],Ot[2]);var Ye;ke?Ye=ke[it]:De?Ye=De[Ve]:Ye=He,this.opacityscale&&Le?$.push(Ye[0],Ye[1],Ye[2],this.opacity*P((Le[it]-ze)/(Ie-ze),this.opacityscale)):Ye.length===3?Z.push(Ye[0],Ye[1],Ye[2],this.opacity):(Z.push(Ye[0],Ye[1],Ye[2],Ye[3]*this.opacity),Ye[3]<1&&(this.hasAlpha=!0));var Ee;Ae?Ee=Ae[it]:Le?Ee=[(Le[it]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ve]:We?Ee=[(We[Ve]-ze)/(Ie-ze),0]:Ee=[(Ot[2]-ze)/(Ie-ze),0],Q.push(Ee[0],Ee[1]),oe.push(Ve)}Nt+=1;break;case 3:for(var Ct=0;Ct<3;++Ct)for(var it=Xe[Ct],Ot=he[it],Ge=0;Ge<3;++Ge)if(isNaN(Ot[Ge])||!isFinite(Ot[Ge]))continue e;for(var Ct=0;Ct<3;++Ct){var it=Xe[2-Ct],Ot=he[it];K.push(Ot[0],Ot[1],Ot[2]);var Ye;ke?Ye=ke[it]:De?Ye=De[Ve]:Ye=He,Ye?this.opacityscale&&Le?$.push(Ye[0],Ye[1],Ye[2],this.opacity*P((Le[it]-ze)/(Ie-ze),this.opacityscale)):Ye.length===3?$.push(Ye[0],Ye[1],Ye[2],this.opacity):($.push(Ye[0],Ye[1],Ye[2],Ye[3]*this.opacity),Ye[3]<1&&(this.hasAlpha=!0)):$.push(.5,.5,.5,1);var Ee;Ae?Ee=Ae[it]:Le?Ee=[(Le[it]-ze)/(Ie-ze),0]:Ze?Ee=Ze[Ve]:We?Ee=[(We[Ve]-ze)/(Ie-ze),0]:Ee=[(Ot[2]-ze)/(Ie-ze),0],H.push(Ee[0],Ee[1]);var Ke;me?Ke=me[it]:Ke=xe[Ve],U.push(Ke[0],Ke[1],Ke[2]),q.push(Ve)}jt+=1;break}}this.pointCount=Lt,this.edgeCount=Nt,this.triangleCount=jt,this.pointPositions.update(se),this.pointColors.update(ae),this.pointUVs.update(le),this.pointSizes.update(_e),this.pointIds.update(new Uint32Array(fe)),this.edgePositions.update(re),this.edgeColors.update(Z),this.edgeUVs.update(Q),this.edgeIds.update(new Uint32Array(oe)),this.trianglePositions.update(K),this.triangleColors.update($),this.triangleUVs.update(H),this.triangleNormals.update(U),this.triangleIds.update(new Uint32Array(q))},S.drawTransparent=S.draw=function(j){j=j||{};for(var X=this.gl,ie=j.model||L,he=j.view||L,K=j.projection||L,$=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)$[0][U]=Math.max($[0][U],this.clipBounds[0][U]),$[1][U]=Math.min($[1][U],this.clipBounds[1][U]);var H={model:ie,view:he,projection:K,inverseModel:L.slice(),clipBounds:$,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=b(H.inverseModel,H.model),X.disable(X.CULL_FACE),this.texture.bind(0);var q=new Array(16);o(q,H.view,H.model),o(q,H.projection,q),b(q,q);for(var U=0;U<3;++U)H.eyePosition[U]=q[12+U]/q[15];for(var re=q[15],U=0;U<3;++U)re+=this.lightPosition[U]*q[4*U+3];for(var U=0;U<3;++U){for(var Z=q[12+U],Q=0;Q<3;++Q)Z+=q[4*Q+U]*this.lightPosition[Q];H.lightPosition[U]=Z/re}if(this.triangleCount>0){var oe=this.triShader;oe.bind(),oe.uniforms=H,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var oe=this.lineShader;oe.bind(),oe.uniforms=H,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var oe=this.pointShader;oe.bind(),oe.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var oe=this.contourShader;oe.bind(),oe.uniforms=H,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind()}},S.drawPick=function(j){j=j||{};for(var X=this.gl,ie=j.model||L,he=j.view||L,K=j.projection||L,$=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)$[0][U]=Math.max($[0][U],this.clipBounds[0][U]),$[1][U]=Math.min($[1][U],this.clipBounds[1][U]);this._model=[].slice.call(ie),this._view=[].slice.call(he),this._projection=[].slice.call(K),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var H={model:ie,view:he,projection:K,clipBounds:$,pickId:this.pickId/255},q=this.pickShader;if(q.bind(),q.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var q=this.pointPickShader;q.bind(),q.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}},S.pick=function(j){if(!j||j.id!==this.pickId)return null;for(var X=j.value[0]+256*j.value[1]+65536*j.value[2],ie=this.cells[X],he=this.positions,K=new Array(ie.length),$=0;$<ie.length;++$)K[$]=he[ie[$]];var U=j.coord[0],H=j.coord[1];if(!this.pickVertex){var q=this.positions[ie[0]],re=this.positions[ie[1]],Z=this.positions[ie[2]],Q=[(q[0]+re[0]+Z[0])/3,(q[1]+re[1]+Z[1])/3,(q[2]+re[2]+Z[2])/3];return{_cellCenter:!0,position:[U,H],index:X,cell:ie,cellId:X,intensity:this.intensity[X],dataCoordinate:Q}}var oe=x(K,[U*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!oe)return null;for(var se=oe[2],ae=0,$=0;$<ie.length;++$)ae+=se[$]*this.intensity[ie[$]];return{position:oe[1],index:ie[oe[0]],cell:ie,cellId:X,intensity:ae,dataCoordinate:this.positions[ie[oe[0]]]}},S.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(j){var X=i(j,c.vertex,c.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function R(j){var X=i(j,M.vertex,M.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function O(j){var X=i(j,w.vertex,w.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function z(j){var X=i(j,p.vertex,p.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function G(j){var X=i(j,_.vertex,_.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function Y(j){var X=i(j,h.vertex,h.fragment);return X.attributes.position.location=0,X}function ee(j,X){arguments.length===1&&(X=j,j=X.gl);var ie=j.getExtension("OES_standard_derivatives")||j.getExtension("MOZ_OES_standard_derivatives")||j.getExtension("WEBKIT_OES_standard_derivatives");if(!ie)throw new Error("derivatives not supported");var he=D(j),K=R(j),$=O(j),U=z(j),H=G(j),q=Y(j),re=v(j,g(new Uint8Array([255,255,255,255]),[1,1,4]));re.generateMipmap(),re.minFilter=j.LINEAR_MIPMAP_LINEAR,re.magFilter=j.LINEAR;var Z=n(j),Q=n(j),oe=n(j),se=n(j),ae=n(j),le=r(j,[{buffer:Z,type:j.FLOAT,size:3},{buffer:ae,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:j.FLOAT,size:4},{buffer:oe,type:j.FLOAT,size:2},{buffer:se,type:j.FLOAT,size:3}]),_e=n(j),fe=n(j),me=n(j),xe=n(j),ye=r(j,[{buffer:_e,type:j.FLOAT,size:3},{buffer:xe,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:j.FLOAT,size:4},{buffer:me,type:j.FLOAT,size:2}]),be=n(j),ke=n(j),De=n(j),He=n(j),Ae=n(j),Le=r(j,[{buffer:be,type:j.FLOAT,size:3},{buffer:Ae,type:j.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ke,type:j.FLOAT,size:4},{buffer:De,type:j.FLOAT,size:2},{buffer:He,type:j.FLOAT,size:1}]),Ze=n(j),We=r(j,[{buffer:Ze,type:j.FLOAT,size:3}]),ze=new E(j,re,he,K,$,U,H,q,Z,ae,Q,oe,se,le,_e,xe,fe,me,ye,be,Ae,ke,De,He,Le,Ze,We);return ze.update(X),ze}A.exports=ee},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(u,A,T){A.exports=v;var e=u("gl-buffer"),a=u("gl-shader"),i=u("./shaders");function n(s,o,b){this.plot=s,this.vbo=o,this.shader=b}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawBox=function(){var s=[0,0],o=[0,0];return function(b,g,d,f,y){var l=this.plot,x=this.shader,c=l.gl;s[0]=b,s[1]=g,o[0]=d,o[1]=f,x.uniforms.lo=s,x.uniforms.hi=o,x.uniforms.color=y,c.drawArrays(c.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function v(s){var o=s.gl,b=e(o,[0,0,0,1,1,0,1,1]),g=a(o,i.boxVert,i.lineFrag);return new n(s,b,g)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(u,A,T){A.exports=o;var e=u("gl-buffer"),a=u("gl-shader"),i=u("binary-search-bounds"),n=u("./shaders");function r(b,g,d,f){this.plot=b,this.vbo=g,this.shader=d,this.tickShader=f,this.ticks=[[],[]]}function v(b,g){return b-g}var s=r.prototype;s.draw=function(){var b=[0,0],g=[0,0],d=[0,0];return function(){for(var f=this.plot,y=this.vbo,l=this.shader,x=this.ticks,c=f.gl,M=f._tickBounds,w=f.dataBox,p=f.viewBox,_=f.gridLineWidth,h=f.gridLineColor,L=f.gridLineEnable,E=f.pixelRatio,S=0;S<2;++S){var P=M[S],F=M[S+2],I=F-P,D=.5*(w[S+2]+w[S]),R=w[S+2]-w[S];g[S]=2*I/R,b[S]=2*(P-D)/R}l.bind(),y.bind(),l.attributes.dataCoord.pointer(),l.uniforms.dataShift=b,l.uniforms.dataScale=g;for(var O=0,S=0;S<2;++S){d[0]=d[1]=0,d[S]=1,l.uniforms.dataAxis=d,l.uniforms.lineWidth=_[S]/(p[S+2]-p[S])*E,l.uniforms.color=h[S];var z=x[S].length*6;L[S]&&z&&c.drawArrays(c.TRIANGLES,O,z),O+=z}}}(),s.drawTickMarks=function(){var b=[0,0],g=[0,0],d=[1,0],f=[0,1],y=[0,0],l=[0,0];return function(){for(var x=this.plot,c=this.vbo,M=this.tickShader,w=this.ticks,p=x.gl,_=x._tickBounds,h=x.dataBox,L=x.viewBox,E=x.pixelRatio,S=x.screenBox,P=S[2]-S[0],F=S[3]-S[1],I=L[2]-L[0],D=L[3]-L[1],R=0;R<2;++R){var O=_[R],z=_[R+2],G=z-O,Y=.5*(h[R+2]+h[R]),ee=h[R+2]-h[R];g[R]=2*G/ee,b[R]=2*(O-Y)/ee}g[0]*=I/P,b[0]*=I/P,g[1]*=D/F,b[1]*=D/F,M.bind(),c.bind(),M.attributes.dataCoord.pointer();var j=M.uniforms;j.dataShift=b,j.dataScale=g;var X=x.tickMarkLength,ie=x.tickMarkWidth,he=x.tickMarkColor,K=0,$=w[0].length*6,U=Math.min(i.ge(w[0],(h[0]-_[0])/(_[2]-_[0]),v),w[0].length),H=Math.min(i.gt(w[0],(h[2]-_[0])/(_[2]-_[0]),v),w[0].length),q=K+6*U,re=6*Math.max(0,H-U),Z=Math.min(i.ge(w[1],(h[1]-_[1])/(_[3]-_[1]),v),w[1].length),Q=Math.min(i.gt(w[1],(h[3]-_[1])/(_[3]-_[1]),v),w[1].length),oe=$+6*Z,se=6*Math.max(0,Q-Z);y[0]=2*(L[0]-X[1])/P-1,y[1]=(L[3]+L[1])/F-1,l[0]=X[1]*E/P,l[1]=ie[1]*E/F,se&&(j.color=he[1],j.tickScale=l,j.dataAxis=f,j.screenOffset=y,p.drawArrays(p.TRIANGLES,oe,se)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[1]-X[0])/F-1,l[0]=ie[0]*E/P,l[1]=X[0]*E/F,re&&(j.color=he[0],j.tickScale=l,j.dataAxis=d,j.screenOffset=y,p.drawArrays(p.TRIANGLES,q,re)),y[0]=2*(L[2]+X[3])/P-1,y[1]=(L[3]+L[1])/F-1,l[0]=X[3]*E/P,l[1]=ie[3]*E/F,se&&(j.color=he[3],j.tickScale=l,j.dataAxis=f,j.screenOffset=y,p.drawArrays(p.TRIANGLES,oe,se)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[3]+X[2])/F-1,l[0]=ie[2]*E/P,l[1]=X[2]*E/F,re&&(j.color=he[2],j.tickScale=l,j.dataAxis=d,j.screenOffset=y,p.drawArrays(p.TRIANGLES,q,re))}}(),s.update=function(){var b=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1];return function(d){var f=d.ticks,y=d.bounds,l=new Float32Array(6*3*(f[0].length+f[1].length));this.plot.zeroLineEnable;for(var x=0,c=[[],[]],M=0;M<2;++M)for(var w=c[M],p=f[M],_=y[M],h=y[M+2],L=0;L<p.length;++L){var E=(p[L].x-_)/(h-_);w.push(E);for(var S=0;S<6;++S)l[x++]=E,l[x++]=b[S],l[x++]=g[S]}this.ticks=c,this.vbo.update(l)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(b){var g=b.gl,d=e(g),f=a(g,n.gridVert,n.gridFrag),y=a(g,n.tickVert,n.gridFrag),l=new r(b,d,f,y);return l}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(u,A,T){A.exports=v;var e=u("gl-buffer"),a=u("gl-shader"),i=u("./shaders");function n(s,o,b){this.plot=s,this.vbo=o,this.shader=b}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawLine=function(){var s=[0,0],o=[0,0];return function(b,g,d,f,y,l){var x=this.plot,c=this.shader,M=x.gl;s[0]=b,s[1]=g,o[0]=d,o[1]=f,c.uniforms.start=s,c.uniforms.end=o,c.uniforms.width=y*x.pixelRatio,c.uniforms.color=l,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function v(s){var o=s.gl,b=e(o,[-1,-1,-1,1,1,-1,1,1]),g=a(o,i.lineVert,i.lineFrag),d=new n(s,b,g);return d}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(u,A,T){var e=u("glslify"),a=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);A.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(u,A,T){A.exports=o;var e=u("gl-buffer"),a=u("gl-shader"),i=u("text-cache"),n=u("binary-search-bounds"),r=u("./shaders");function v(b,g,d){this.plot=b,this.vbo=g,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s=v.prototype;s.drawTicks=function(){var b=[0,0],g=[0,0],d=[0,0];return function(f){var y=this.plot,l=this.shader,x=this.tickX[f],c=this.tickOffset[f],M=y.gl,w=y.viewBox,p=y.dataBox,_=y.screenBox,h=y.pixelRatio,L=y.tickEnable,E=y.tickPad,S=y.tickColor,P=y.tickAngle,F=y.labelEnable,I=y.labelPad,D=y.labelColor,R=y.labelAngle,O=this.labelOffset[f],z=this.labelCount[f],G=n.lt(x,p[f]),Y=n.le(x,p[f+2]);b[0]=b[1]=0,b[f]=1,g[f]=(w[2+f]+w[f])/(_[2+f]-_[f])-1;var ee=2/_[2+(f^1)]-_[f^1];g[f^1]=ee*w[f^1]-1,L[f]&&(g[f^1]-=ee*h*E[f],G<Y&&c[Y]>c[G]&&(l.uniforms.dataAxis=b,l.uniforms.screenOffset=g,l.uniforms.color=S[f],l.uniforms.angle=P[f],M.drawArrays(M.TRIANGLES,c[G],c[Y]-c[G]))),F[f]&&z&&(g[f^1]-=ee*h*I[f],l.uniforms.dataAxis=d,l.uniforms.screenOffset=g,l.uniforms.color=D[f],l.uniforms.angle=R[f],M.drawArrays(M.TRIANGLES,O,z)),g[f^1]=ee*w[2+(f^1)]-1,L[f+2]&&(g[f^1]+=ee*h*E[f+2],G<Y&&c[Y]>c[G]&&(l.uniforms.dataAxis=b,l.uniforms.screenOffset=g,l.uniforms.color=S[f+2],l.uniforms.angle=P[f+2],M.drawArrays(M.TRIANGLES,c[G],c[Y]-c[G]))),F[f+2]&&z&&(g[f^1]+=ee*h*I[f+2],l.uniforms.dataAxis=d,l.uniforms.screenOffset=g,l.uniforms.color=D[f+2],l.uniforms.angle=R[f+2],M.drawArrays(M.TRIANGLES,O,z))}}(),s.drawTitle=function(){var b=[0,0],g=[0,0];return function(){var d=this.plot,f=this.shader,y=d.gl,l=d.screenBox,x=d.titleCenter,c=d.titleAngle,M=d.titleColor,w=d.pixelRatio;if(!!this.titleCount){for(var p=0;p<2;++p)g[p]=2*(x[p]*w-l[p])/(l[2+p]-l[p])-1;f.bind(),f.uniforms.dataAxis=b,f.uniforms.screenOffset=g,f.uniforms.angle=c,f.uniforms.color=M,y.drawArrays(y.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var b=[0,0],g=[0,0],d=[0,0];return function(){var f=this.plot,y=this.shader,l=f._tickBounds,x=f.dataBox,c=f.screenBox,M=f.viewBox;y.bind();for(var w=0;w<2;++w){var p=l[w],_=l[w+2],h=_-p,L=.5*(x[w+2]+x[w]),E=x[w+2]-x[w],S=M[w],P=M[w+2],F=P-S,I=c[w],D=c[w+2],R=D-I;g[w]=2*h/E*F/R,b[w]=2*(p-L)/E*F/R}d[1]=2*f.pixelRatio/(c[3]-c[1]),d[0]=d[1]*(c[3]-c[1])/(c[2]-c[0]),y.uniforms.dataScale=g,y.uniforms.dataShift=b,y.uniforms.textScale=d,this.vbo.bind(),y.attributes.textCoordinate.pointer()}}(),s.update=function(b){var g=[],d=b.ticks,f=b.bounds,y,l,x,c,M;for(M=0;M<2;++M){var w=[Math.floor(g.length/3)],p=[-1/0],_=d[M];for(y=0;y<_.length;++y){var h=_[y],L=h.x,E=h.text,S=h.font||"sans-serif";c=h.fontSize||12;for(var P=1/(f[M+2]-f[M]),F=f[M],I=E.split(`
`),D=0;D<I.length;D++)for(x=i(S,I[D]).data,l=0;l<x.length;l+=2)g.push(x[l]*c,-x[l+1]*c-D*c*1.2,(L-F)*P);w.push(Math.floor(g.length/3)),p.push(L)}this.tickOffset[M]=w,this.tickX[M]=p}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(g.length/3),x=i(b.labelFont[M],b.labels[M],{textAlign:"center"}).data,c=b.labelSize[M],y=0;y<x.length;y+=2)g.push(x[y]*c,-x[y+1]*c,0);this.labelCount[M]=Math.floor(g.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(g.length/3),x=i(b.titleFont,b.title).data,c=b.titleSize,y=0;y<x.length;y+=2)g.push(x[y]*c,-x[y+1]*c,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(b){var g=b.gl,d=e(g),f=a(g,r.textVert,r.textFrag),y=new v(b,d,f);return y}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(u,A,T){A.exports=g;var e=u("gl-select-static"),a=u("./lib/grid"),i=u("./lib/text"),n=u("./lib/line"),r=u("./lib/box");function v(d,f){this.gl=d,this.pickBuffer=f,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=v.prototype;s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){return function(){var d=this.gl,f=this.screenBox,y=this.viewBox,l=this.dataBox,x=this.pixelRatio,c=this.grid,M=this.line,w=this.text,p=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var _=this.borderColor;d.clearColor(_[0]*_[3],_[1]*_[3],_[2]*_[3],_[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),d.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var h=this.backgroundColor;d.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),d.clear(d.COLOR_BUFFER_BIT),c.draw();var L=this.zeroLineEnable,E=this.zeroLineColor,S=this.zeroLineWidth;if(L[0]||L[1]){M.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(l[P]<=0&&l[P+2]>=0))){var F=f[P]-l[P]*(f[P+2]-f[P])/(l[P+2]-l[P]);P===0?M.drawLine(F,f[1],F,f[3],S[P],E[P]):M.drawLine(f[0],F,f[2],F,S[P],E[P])}}for(var P=0;P<p.length;++P)p[P].draw();d.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),d.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),M.bind();var I=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;I[1]&&M.drawLine(y[0],y[1]-.5*D[1]*x,y[0],y[3]+.5*D[3]*x,D[1],R[1]),I[0]&&M.drawLine(y[0]-.5*D[0]*x,y[1],y[2]+.5*D[2]*x,y[1],D[0],R[0]),I[3]&&M.drawLine(y[2],y[1]-.5*D[1]*x,y[2],y[3]+.5*D[3]*x,D[3],R[3]),I[2]&&M.drawLine(y[0]-.5*D[0]*x,y[3],y[2]+.5*D[2]*x,y[3],D[2],R[2]),w.bind();for(var P=0;P<2;++P)w.drawTicks(P);this.titleEnable&&w.drawTitle();for(var O=this.overlays,P=0;P<O.length;++P)O[P].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}}}(),s.drawPick=function(){return function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var f=1,y=this.objects,l=0;l<y.length;++l)f=y[l].drawPick(f);d.end()}}}(),s.pick=function(){return function(d,f){if(!this.static){var y=this.pixelRatio,l=this.pickPixelRatio,x=this.viewBox,c=Math.round((d-x[0]/y)*l)|0,M=Math.round((f-x[1]/y)*l)|0,w=this.pickBuffer.query(c,M,this.pickRadius);if(!w)return null;for(var p=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),_=this.objects,h=0;h<_.length;++h){var L=_[h].pick(c,M,p);if(L)return L}return null}}}();function o(d){for(var f=d.slice(),y=0;y<f.length;++y)f[y]=f[y].slice();return f}function b(d,f){return d.x-f.x}s.setScreenBox=function(d){var f=this.screenBox,y=this.pixelRatio;f[0]=Math.round(d[0]*y)|0,f[1]=Math.round(d[1]*y)|0,f[2]=Math.round(d[2]*y)|0,f[3]=Math.round(d[3]*y)|0,this.setDirty()},s.setDataBox=function(d){var f=this.dataBox,y=f[0]!==d[0]||f[1]!==d[1]||f[2]!==d[2]||f[3]!==d[3];y&&(f[0]=d[0],f[1]=d[1],f[2]=d[2],f[3]=d[3],this.setDirty())},s.setViewBox=function(d){var f=this.pixelRatio,y=this.viewBox;y[0]=Math.round(d[0]*f)|0,y[1]=Math.round(d[1]*f)|0,y[2]=Math.round(d[2]*f)|0,y[3]=Math.round(d[3]*f)|0;var l=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((d[2]-d[0])*l)|0,Math.round((d[3]-d[1])*l)|0],this.setDirty()},s.update=function(d){d=d||{};var f=this.gl;this.pixelRatio=d.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(d.screenBox||[0,0,f.drawingBufferWidth/y,f.drawingBufferHeight/y]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var l=this.viewBox,x=(l[2]-l[0])/(l[3]-l[1]);this.setDataBox(d.dataBox||[-10,-10/x,10,10/x]),this.borderColor=d.borderColor!==!1?(d.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(l[0]+l[2])/y,(l[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var c=d.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var w=0;w<2;++w){var p=c[w].slice(0);p.length!==0&&(p.sort(b),M[w]=Math.min(M[w],p[0].x),M[w+2]=Math.max(M[w+2],p[p.length-1].x))}this.grid.update({bounds:M,ticks:c}),this.text.update({bounds:M,ticks:c,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif"}),this.static=!!d.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();this.objects.length=0;for(var d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},s.removeObject=function(d){for(var f=this.objects,y=0;y<f.length;++y)if(f[y]===d){f.splice(y,1),this.setDirty();break}},s.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},s.removeOverlay=function(d){for(var f=this.overlays,y=0;y<f.length;++y)if(f[y]===d){f.splice(y,1),this.setOverlayDirty();break}};function g(d){var f=d.gl,y=e(f,[f.drawingBufferWidth,f.drawingBufferHeight]),l=new v(f,y);return l.grid=a(l),l.text=i(l),l.line=n(l),l.box=r(l),l.update(d),l}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(u,A,T){A.exports=s;var e=u("right-now"),a=u("3d-view"),i=u("mouse-change"),n=u("mouse-wheel"),r=u("mouse-event-offset"),v=u("has-passive-events");function s(o,b){o=o||document.body,b=b||{};var g=[.01,1/0];"distanceLimits"in b&&(g[0]=b.distanceLimits[0],g[1]=b.distanceLimits[1]),"zoomMin"in b&&(g[0]=b.zoomMin),"zoomMax"in b&&(g[1]=b.zoomMax);var d=a({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:g}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,l=o.clientWidth,x=o.clientHeight,c={keyBindingMode:"rotate",enableWheel:!0,view:d,element:o,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:d.modes,_ortho:b._ortho||b.projection&&b.projection.type==="orthographic"||!1,tick:function(){var M=e(),w=this.delay,p=M-2*w;d.idle(M-w),d.recalcMatrix(p),d.flush(M-(100+w*2));for(var _=!0,h=d.computedMatrix,L=0;L<16;++L)_=_&&f[L]===h[L],f[L]=h[L];var E=o.clientWidth===l&&o.clientHeight===x;return l=o.clientWidth,x=o.clientHeight,_?!E:(y=Math.exp(d.computedRadius[0]),!0)},lookAt:function(M,w,p){d.lookAt(d.lastT(),M,w,p)},rotate:function(M,w,p){d.rotate(d.lastT(),M,w,p)},pan:function(M,w,p){d.pan(d.lastT(),M,w,p)},translate:function(M,w,p){d.translate(d.lastT(),M,w,p)}};return Object.defineProperties(c,{matrix:{get:function(){return d.computedMatrix},set:function(M){return d.setMatrix(d.lastT(),M),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(M){var w=d.computedUp.slice(),p=d.computedEye.slice(),_=d.computedCenter.slice();if(d.setMode(M),M==="turntable"){var h=e();d._active.lookAt(h,p,_,w),d._active.lookAt(h+500,p,_,[0,0,1]),d._active.flush(h)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(M){return d.lookAt(d.lastT(),null,M),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(M){return d.lookAt(d.lastT(),M),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(M){return d.lookAt(d.lastT(),null,null,M),d.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(M){return d.setDistance(d.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(g)},set:function(M){return d.setDistanceLimits(M),M},enumerable:!0}}),o.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),c._lastX=-1,c._lastY=-1,c._lastMods={shift:!1,control:!1,alt:!1,meta:!1},c.enableMouseListeners=function(){c.mouseListener=i(o,M),o.addEventListener("touchstart",function(w){var p=r(w.changedTouches[0],o);M(0,p[0],p[1],c._lastMods),M(1,p[0],p[1],c._lastMods)},v?{passive:!0}:!1),o.addEventListener("touchmove",function(w){var p=r(w.changedTouches[0],o);M(1,p[0],p[1],c._lastMods),w.preventDefault()},v?{passive:!1}:!1),o.addEventListener("touchend",function(w){M(0,c._lastX,c._lastY,c._lastMods)},v?{passive:!0}:!1);function M(w,p,_,h){var L=c.keyBindingMode;if(L!==!1){var E=L==="rotate",S=L==="pan",P=L==="zoom",F=!!h.control,I=!!h.alt,D=!!h.shift,R=!!(w&1),O=!!(w&2),z=!!(w&4),G=1/o.clientHeight,Y=G*(p-c._lastX),ee=G*(_-c._lastY),j=c.flipX?1:-1,X=c.flipY?1:-1,ie=Math.PI*c.rotateSpeed,he=e();if(c._lastX!==-1&&c._lastY!==-1&&((E&&R&&!F&&!I&&!D||R&&!F&&!I&&D)&&d.rotate(he,j*ie*Y,-X*ie*ee,0),(S&&R&&!F&&!I&&!D||O||R&&F&&!I&&!D)&&d.pan(he,-c.translateSpeed*Y*y,c.translateSpeed*ee*y,0),P&&R&&!F&&!I&&!D||z||R&&!F&&I&&!D)){var K=-c.zoomSpeed*ee/window.innerHeight*(he-d.lastT())*100;d.pan(he,0,0,y*(Math.exp(K)-1))}return c._lastX=p,c._lastY=_,c._lastMods=h,!0}}c.wheelListener=n(o,function(w,p){if(c.keyBindingMode!==!1&&!!c.enableWheel){var _=c.flipX?1:-1,h=c.flipY?1:-1,L=e();if(Math.abs(w)>Math.abs(p))d.rotate(L,0,0,-w*_*Math.PI*c.rotateSpeed/window.innerWidth);else if(!c._ortho){var E=-c.zoomSpeed*h*p/window.innerHeight*(L-d.lastT())/20;d.pan(L,0,0,y*(Math.exp(E)-1))}}},!0)},c.enableMouseListeners(),c}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(u,A,T){var e=u("glslify"),a=u("gl-shader"),i=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),n=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(u,A,T){var e=u("./camera.js"),a=u("gl-axes3d"),i=u("gl-axes3d/properties"),n=u("gl-spikes3d"),r=u("gl-select-static"),v=u("gl-fbo"),s=u("a-big-triangle"),o=u("mouse-change"),b=u("gl-mat4/perspective"),g=u("gl-mat4/ortho"),d=u("./lib/shader"),f=u("is-mobile")({tablet:!0,featureDetect:!0});A.exports={createScene:M,createCamera:e};function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(p,_){var h=null;try{h=p.getContext("webgl",_),h||(h=p.getContext("experimental-webgl",_))}catch{return null}return h}function x(p){var _=Math.round(Math.log(Math.abs(p))/Math.log(10));if(_<0){var h=Math.round(Math.pow(10,-_));return Math.ceil(p*h)/h}else if(_>0){var h=Math.round(Math.pow(10,_));return Math.ceil(p/h)*h}return Math.ceil(p)}function c(p){return typeof p=="boolean"?p:!0}function M(p){p=p||{},p.camera=p.camera||{};var _=p.canvas;if(!_)if(_=document.createElement("canvas"),p.container){var h=p.container;h.appendChild(_)}else document.body.appendChild(_);var L=p.gl;if(L||(p.glOptions&&(f=!!p.glOptions.preserveDrawingBuffer),L=l(_,p.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:f})),!L)throw new Error("webgl not supported");var E=p.bounds||[[-10,-10,-10],[10,10,10]],S=new y,P=v(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!f}),F=d(L),I=p.cameraObject&&p.cameraObject._ortho===!0||p.camera.projection&&p.camera.projection.type==="orthographic"||!1,D={eye:p.camera.eye||[2,0,0],center:p.camera.center||[0,0,0],up:p.camera.up||[0,1,0],zoomMin:p.camera.zoomMax||.1,zoomMax:p.camera.zoomMin||100,mode:p.camera.mode||"turntable",_ortho:I},R=p.axes||{},O=a(L,R);O.enable=!R.disable;var z=p.spikes||{},G=n(L,z),Y=[],ee=[],j=[],X=[],ie=!0,U=!0,he=new Array(16),K=new Array(16),$={view:null,projection:he,model:K,_ortho:!1},U=!0,H=[L.drawingBufferWidth,L.drawingBufferHeight],q=p.cameraObject||e(_,D),re={gl:L,contextLost:!1,pixelRatio:p.pixelRatio||1,canvas:_,selection:S,camera:q,axes:O,axesPixels:null,spikes:G,bounds:E,objects:Y,shape:H,aspect:p.aspectRatio||[1,1,1],pickRadius:p.pickRadius||10,zNear:p.zNear||.01,zFar:p.zFar||1e3,fovy:p.fovy||Math.PI/4,clearColor:p.clearColor||[0,0,0,0],autoResize:c(p.autoResize),autoBounds:c(p.autoBounds),autoScale:!!p.autoScale,autoCenter:c(p.autoCenter),clipToBounds:c(p.clipToBounds),snapToData:!!p.snapToData,onselect:p.onselect||null,onrender:p.onrender||null,onclick:p.onclick||null,cameraParams:$,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xe){this.aspect[0]=xe.x,this.aspect[1]=xe.y,this.aspect[2]=xe.z,U=!0},setBounds:function(xe,ye){this.bounds[0][xe]=ye.min,this.bounds[1][xe]=ye.max},setClearColor:function(xe){this.clearColor=xe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},Z=[L.drawingBufferWidth/re.pixelRatio|0,L.drawingBufferHeight/re.pixelRatio|0];function Q(){if(!re._stopped&&!!re.autoResize){var xe=_.parentNode,ye=1,be=1;xe&&xe!==document.body?(ye=xe.clientWidth,be=xe.clientHeight):(ye=window.innerWidth,be=window.innerHeight);var ke=Math.ceil(ye*re.pixelRatio)|0,De=Math.ceil(be*re.pixelRatio)|0;if(ke!==_.width||De!==_.height){_.width=ke,_.height=De;var He=_.style;He.position=He.position||"absolute",He.left="0px",He.top="0px",He.width=ye+"px",He.height=be+"px",ie=!0}}}re.autoResize&&Q(),window.addEventListener("resize",Q);function oe(){for(var xe=Y.length,ye=X.length,be=0;be<ye;++be)j[be]=0;e:for(var be=0;be<xe;++be){var ke=Y[be],De=ke.pickSlots;if(!De){ee[be]=-1;continue}for(var He=0;He<ye;++He)if(j[He]+De<255){ee[be]=He,ke.setPickBase(j[He]+1),j[He]+=De;continue e}var Ae=r(L,H);ee[be]=ye,X.push(Ae),j.push(De),ke.setPickBase(1),ye+=1}for(;ye>0&&j[ye-1]===0;)j.pop(),X.pop().dispose()}re.update=function(xe){re._stopped||(ie=!0,U=!0)},re.add=function(xe){re._stopped||(xe.axes=O,Y.push(xe),ee.push(-1),ie=!0,U=!0,oe())},re.remove=function(xe){if(!re._stopped){var ye=Y.indexOf(xe);ye<0||(Y.splice(ye,1),ee.pop(),ie=!0,U=!0,oe())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",Q),_.removeEventListener("webglcontextlost",se),re.mouseListener.enabled=!1,!re.contextLost)){O.dispose(),G.dispose();for(var xe=0;xe<Y.length;++xe)Y[xe].dispose();P.dispose();for(var xe=0;xe<X.length;++xe)X[xe].dispose();F.dispose(),L=null,O=null,G=null,Y=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=o(_,function(xe,ye,be){if(!re._stopped){var ke=X.length,De=Y.length,He=S.object;S.distance=1/0,S.mouse[0]=ye,S.mouse[1]=be,S.object=null,S.screen=null,S.dataCoordinate=S.dataPosition=null;var Ae=!1;if(xe&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(U=!0),re._mouseRotating=!1;for(var Le=0;Le<ke;++Le){var Ze=X[Le].query(ye,Z[1]-be-1,re.pickRadius);if(Ze){if(Ze.distance>S.distance)continue;for(var We=0;We<De;++We){var ze=Y[We];if(ee[We]===Le){var Ie=ze.pick(Ze);Ie&&(S.buttons=xe,S.screen=Ze.coord,S.distance=Ze.distance,S.object=ze,S.index=Ie.distance,S.dataPosition=Ie.position,S.dataCoordinate=Ie.dataCoordinate,S.data=Ie,Ae=!0)}}}}}He&&He!==S.object&&(He.highlight&&He.highlight(null),ie=!0),S.object&&(S.object.highlight&&S.object.highlight(S.data),ie=!0),Ae=Ae||S.object!==He,Ae&&re.onselect&&re.onselect(S),xe&1&&!(re._prevButtons&1)&&re.onclick&&re.onclick(S),re._prevButtons=xe}})};function se(){if(re.contextLost)return!0;L.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}_.addEventListener("webglcontextlost",se);function ae(){if(!se()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var xe=Y.length,ye=X.length,be=0;be<ye;++be){var ke=X[be];ke.shape=Z,ke.begin();for(var De=0;De<xe;++De)if(ee[De]===be){var He=Y[De];He.drawPick&&(He.pixelRatio=1,He.drawPick($))}ke.end()}}}var le=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=[le[0].slice(),le[1].slice()];function fe(){if(!se()){Q();var xe=re.camera.tick();$.view=re.camera.matrix,ie=ie||xe,U=U||xe,O.pixelRatio=re.pixelRatio,G.pixelRatio=re.pixelRatio;var ye=Y.length,be=le[0],ke=le[1];be[0]=be[1]=be[2]=1/0,ke[0]=ke[1]=ke[2]=-1/0;for(var De=0;De<ye;++De){var He=Y[De];He.pixelRatio=re.pixelRatio,He.axes=re.axes,ie=ie||!!He.dirty,U=U||!!He.dirty;var Ae=He.bounds;if(Ae)for(var Le=Ae[0],Ze=Ae[1],We=0;We<3;++We)be[We]=Math.min(be[We],Le[We]),ke[We]=Math.max(ke[We],Ze[We])}var ze=re.bounds;if(re.autoBounds)for(var We=0;We<3;++We){if(ke[We]<be[We])be[We]=-1,ke[We]=1;else{be[We]===ke[We]&&(be[We]-=1,ke[We]+=1);var Ie=.05*(ke[We]-be[We]);be[We]=be[We]-Ie,ke[We]=ke[We]+Ie}ze[0][We]=be[We],ze[1][We]=ke[We]}for(var Ve=!1,We=0;We<3;++We)Ve=Ve||_e[0][We]!==ze[0][We]||_e[1][We]!==ze[1][We],_e[0][We]=ze[0][We],_e[1][We]=ze[1][We];if(U=U||Ve,ie=ie||Ve,!!ie){if(Ve){for(var dt=[0,0,0],De=0;De<3;++De)dt[De]=x((ze[1][De]-ze[0][De])/10);O.autoTicks?O.update({bounds:ze,tickSpacing:dt}):O.update({bounds:ze})}var Ft=L.drawingBufferWidth,Qt=L.drawingBufferHeight;H[0]=Ft,H[1]=Qt,Z[0]=Math.max(Ft/re.pixelRatio,1)|0,Z[1]=Math.max(Qt/re.pixelRatio,1)|0,w(re,I);for(var De=0;De<ye;++De){var He=Y[De];He.axesBounds=ze,re.clipToBounds&&(He.clipBounds=ze)}S.object&&(re.snapToData?G.position=S.dataCoordinate:G.position=S.dataPosition,G.bounds=ze),U&&(U=!1,ae()),re.axesPixels=i(re.axes,$,Ft,Qt),re.onrender&&re.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Ft,Qt),re.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var Ot=!1;O.enable&&(Ot=Ot||O.isTransparent(),O.draw($)),G.axes=O,S.object&&G.draw($),L.disable(L.CULL_FACE);for(var De=0;De<ye;++De){var He=Y[De];He.axes=O,He.pixelRatio=re.pixelRatio,He.isOpaque&&He.isOpaque()&&He.draw($),He.isTransparent&&He.isTransparent()&&(Ot=!0)}if(Ot){P.shape=H,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),O.enable&&O.isTransparent()&&O.drawTransparent($);for(var De=0;De<ye;++De){var He=Y[De];He.isOpaque&&He.isOpaque()&&He.draw($)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent($);for(var De=0;De<ye;++De){var He=Y[De];He.isTransparent&&He.isTransparent()&&He.drawTransparent($)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),F.bind(),P.color[0].bind(0),F.uniforms.accumBuffer=0,s(L),L.disable(L.BLEND)}ie=!1;for(var De=0;De<ye;++De)Y[De].dirty=!1}}}function me(){re._stopped||re.contextLost||(fe(),requestAnimationFrame(me))}return re.enableMouseListeners(),me(),re.redraw=function(){re._stopped||(ie=!0,fe())},re}function w(p,_){var h=p.bounds,L=p.cameraParams,E=L.projection,S=L.model,P=p.gl.drawingBufferWidth,F=p.gl.drawingBufferHeight,I=p.zNear,D=p.zFar,R=p.fovy,O=P/F;_?(g(E,-O,O,-1,1,I,D),L._ortho=!0):(b(E,R,O,I,D),L._ortho=!1);for(var z=0;z<16;++z)S[z]=0;S[15]=1;for(var G=0,z=0;z<3;++z)G=Math.max(G,h[1][z]-h[0][z]);for(var z=0;z<3;++z)p.autoScale?S[5*z]=p.aspect[z]/(h[1][z]-h[0][z]):S[5*z]=1/G,p.autoCenter&&(S[12+z]=-S[5*z]*.5*(h[0][z]+h[1][z]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(u,A,T){var e=u("glslify");T.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),T.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),T.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),T.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(u,A,T){var e=u("gl-shader"),a=u("gl-buffer"),i=u("typedarray-pool"),n=u("./lib/shader");A.exports=o;function r(b,g,d,f,y){this.plot=b,this.offsetBuffer=g,this.pickBuffer=d,this.shader=f,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var v=r.prototype;v.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},v.update=function(b){var g;b=b||{};function d(w,p){return w in b?b[w]:p}this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var f=b.positions.length>>>1,y=b.positions instanceof Float32Array,l=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=f,x=b.positions,c=y?x:i.mallocFloat32(x.length),M=l?b.idToIndex:i.mallocInt32(f);if(y||c.set(x),!l)for(c.set(x),g=0;g<f;g++)M[g]=g;this.points=x,this.offsetBuffer.update(c),this.pickBuffer.update(M),y||i.free(c),l||i.free(M),this.pointCount=f,this.pickOffset=0};function s(b,g){var d=0,f=b.length>>>1,y;for(y=0;y<f;y++){var l=b[y*2],x=b[y*2+1];l>=g[0]&&l<=g[2]&&x>=g[1]&&x<=g[3]&&d++}return d}v.unifiedDraw=function(){var b=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(d){var f=d!==void 0,y=f?this.pickShader:this.shader,l=this.plot.gl,x=this.plot.dataBox;if(this.pointCount===0)return d;var c=x[2]-x[0],M=x[3]-x[1],w=s(this.points,x),p=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));b[0]=2/c,b[4]=2/M,b[6]=-2*x[0]/c-1,b[7]=-2*x[1]/M-1,this.offsetBuffer.bind(),y.bind(),y.attributes.position.pointer(),y.uniforms.matrix=b,y.uniforms.color=this.color,y.uniforms.borderColor=this.borderColor,y.uniforms.pointCloud=p<5,y.uniforms.pointSize=p,y.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),f&&(g[0]=d&255,g[1]=d>>8&255,g[2]=d>>16&255,g[3]=d>>24&255,this.pickBuffer.bind(),y.attributes.pickId.pointer(l.UNSIGNED_BYTE),y.uniforms.pickOffset=g,this.pickOffset=d);var _=l.getParameter(l.BLEND),h=l.getParameter(l.DITHER);return _&&!this.blend&&l.disable(l.BLEND),h&&l.disable(l.DITHER),l.drawArrays(l.POINTS,0,this.pointCount),_&&!this.blend&&l.enable(l.BLEND),h&&l.enable(l.DITHER),d+this.pointCount}}(),v.draw=v.unifiedDraw,v.drawPick=v.unifiedDraw,v.pick=function(b,g,d){var f=this.pickOffset,y=this.pointCount;if(d<f||d>=f+y)return null;var l=d-f,x=this.points;return{object:this,pointId:l,dataCoord:[x[2*l],x[2*l+1]]}};function o(b,g){var d=b.gl,f=a(d),y=a(d),l=e(d,n.pointVertex,n.pointFragment),x=e(d,n.pickVertex,n.pickFragment),c=new r(b,f,y,l,x);return c.update(g),b.addObject(c),c}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(u,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2],b=i[3],g=n[0],d=n[1],f=n[2],y=n[3],l,x,c,M,w;return x=v*g+s*d+o*f+b*y,x<0&&(x=-x,g=-g,d=-d,f=-f,y=-y),1-x>1e-6?(l=Math.acos(x),c=Math.sin(l),M=Math.sin((1-r)*l)/c,w=Math.sin(r*l)/c):(M=1-r,w=r),a[0]=M*v+w*g,a[1]=M*s+w*d,a[2]=M*o+w*f,a[3]=M*b+w*y,a}},{}],125:[function(u,A,T){A.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(u,A,T){var e=u("vectorize-text");A.exports=i;var a={};function i(n,r,v){var s=a[r];if(s||(s=a[r]={}),n in s)return s[n];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var b=e(n,o);o.triangles=!1;var g=e(n,o),d,f;if(v&&v!==1){for(d=0;d<b.positions.length;++d)for(f=0;f<b.positions[d].length;++f)b.positions[d][f]/=v;for(d=0;d<g.positions.length;++d)for(f=0;f<g.positions[d].length;++f)g.positions[d][f]/=v}var y=[[1/0,1/0],[-1/0,-1/0]],l=g.positions.length;for(d=0;d<l;++d){var x=g.positions[d];for(f=0;f<2;++f)y[0][f]=Math.min(y[0][f],x[f]),y[1][f]=Math.max(y[1][f],x[f])}return s[n]=[b,g,y]}},{"vectorize-text":311}],127:[function(u,A,T){var e=u("gl-shader"),a=u("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:i,fragment:v,attributes:o},g={vertex:n,fragment:v,attributes:o},d={vertex:r,fragment:v,attributes:o},f={vertex:i,fragment:s,attributes:o},y={vertex:n,fragment:s,attributes:o},l={vertex:r,fragment:s,attributes:o};function x(c,M){var w=e(c,M),p=w.attributes;return p.position.location=0,p.color.location=1,p.glyph.location=2,p.id.location=3,w}T.createPerspective=function(c){return x(c,b)},T.createOrtho=function(c){return x(c,g)},T.createProject=function(c){return x(c,d)},T.createPickPerspective=function(c){return x(c,f)},T.createPickOrtho=function(c){return x(c,y)},T.createPickProject=function(c){return x(c,l)}},{"gl-shader":132,glslify:231}],128:[function(u,A,T){var e=u("is-string-blank"),a=u("gl-buffer"),i=u("gl-vao"),n=u("typedarray-pool"),r=u("gl-mat4/multiply"),v=u("./lib/shaders"),s=u("./lib/glyphs"),o=u("./lib/get-simple-string"),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];A.exports=ee;function g(j,X){var ie=j[0],he=j[1],K=j[2],$=j[3];return j[0]=X[0]*ie+X[4]*he+X[8]*K+X[12]*$,j[1]=X[1]*ie+X[5]*he+X[9]*K+X[13]*$,j[2]=X[2]*ie+X[6]*he+X[10]*K+X[14]*$,j[3]=X[3]*ie+X[7]*he+X[11]*K+X[15]*$,j}function d(j,X,ie,he){return g(he,he),g(he,he),g(he,he)}function f(j,X){this.index=j,this.dataCoordinate=this.position=X}function y(j){return j===!0||j>1?1:j}function l(j,X,ie,he,K,$,U,H,q,re,Z,Q){this.gl=j,this.pixelRatio=1,this.shader=X,this.orthoShader=ie,this.projectShader=he,this.pointBuffer=K,this.colorBuffer=$,this.glyphBuffer=U,this.idBuffer=H,this.vao=q,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=re,this.pickOrthoShader=Z,this.pickProjectShader=Q,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var x=l.prototype;x.pickSlots=1,x.setPickBase=function(j){this.pickId=j},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var j=0;j<3;++j)if(this.axesProject[j]&&!this.projectHasAlpha)return!0;return!1};var c=[0,0],M=[0,0,0],w=[0,0,0],p=[0,0,0,1],_=[0,0,0,1],h=b.slice(),L=[0,0,0],E=[[0,0,0],[0,0,0]];function S(j){return j[0]=j[1]=j[2]=0,j}function P(j,X){return j[0]=X[0],j[1]=X[1],j[2]=X[2],j[3]=1,j}function F(j,X,ie,he){return j[0]=X[0],j[1]=X[1],j[2]=X[2],j[ie]=he,j}function I(j){for(var X=E,ie=0;ie<2;++ie)for(var he=0;he<3;++he)X[ie][he]=Math.max(Math.min(j[ie][he],1e8),-1e8);return X}function D(j,X,ie,he){var K=X.axesProject,$=X.gl,U=j.uniforms,H=ie.model||b,q=ie.view||b,re=ie.projection||b,Z=X.axesBounds,Q=I(X.clipBounds),oe;X.axes&&X.axes.lastCubeProps?oe=X.axes.lastCubeProps.axis:oe=[1,1,1],c[0]=2/$.drawingBufferWidth,c[1]=2/$.drawingBufferHeight,j.bind(),U.view=q,U.projection=re,U.screenSize=c,U.highlightId=X.highlightId,U.highlightScale=X.highlightScale,U.clipBounds=Q,U.pickGroup=X.pickId/255,U.pixelRatio=he;for(var se=0;se<3;++se)if(!!K[se]){U.scale=X.projectScale[se],U.opacity=X.projectOpacity[se];for(var ae=h,le=0;le<16;++le)ae[le]=0;for(var le=0;le<4;++le)ae[5*le]=1;ae[5*se]=0,oe[se]<0?ae[12+se]=Z[0][se]:ae[12+se]=Z[1][se],r(ae,H,ae),U.model=ae;var _e=(se+1)%3,fe=(se+2)%3,me=S(M),xe=S(w);me[_e]=1,xe[fe]=1;var ye=d(re,q,H,P(p,me)),be=d(re,q,H,P(_,xe));if(Math.abs(ye[1])>Math.abs(be[1])){var ke=ye;ye=be,be=ke,ke=me,me=xe,xe=ke;var De=_e;_e=fe,fe=De}ye[0]<0&&(me[_e]=-1),be[1]>0&&(xe[fe]=-1);for(var He=0,Ae=0,le=0;le<4;++le)He+=Math.pow(H[4*_e+le],2),Ae+=Math.pow(H[4*fe+le],2);me[_e]/=Math.sqrt(He),xe[fe]/=Math.sqrt(Ae),U.axes[0]=me,U.axes[1]=xe,U.fragClipBounds[0]=F(L,Q[0],se,-1e8),U.fragClipBounds[1]=F(L,Q[1],se,1e8),X.vao.bind(),X.vao.draw($.TRIANGLES,X.vertexCount),X.lineWidth>0&&($.lineWidth(X.lineWidth*he),X.vao.draw($.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}var R=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],z=[R,O];function G(j,X,ie,he,K,$,U){var H=ie.gl;if(($===ie.projectHasAlpha||U)&&D(X,ie,he,K),$===ie.hasAlpha||U){j.bind();var q=j.uniforms;q.model=he.model||b,q.view=he.view||b,q.projection=he.projection||b,c[0]=2/H.drawingBufferWidth,c[1]=2/H.drawingBufferHeight,q.screenSize=c,q.highlightId=ie.highlightId,q.highlightScale=ie.highlightScale,q.fragClipBounds=z,q.clipBounds=ie.axes.bounds,q.opacity=ie.opacity,q.pickGroup=ie.pickId/255,q.pixelRatio=K,ie.vao.bind(),ie.vao.draw(H.TRIANGLES,ie.vertexCount),ie.lineWidth>0&&(H.lineWidth(ie.lineWidth*K),ie.vao.draw(H.LINES,ie.lineVertexCount,ie.vertexCount)),ie.vao.unbind()}}x.draw=function(j){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,j,this.pixelRatio,!1,!1)},x.drawTransparent=function(j){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,j,this.pixelRatio,!0,!1)},x.drawPick=function(j){var X=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;G(X,this.pickProjectShader,this,j,1,!0,!0)},x.pick=function(j){if(!j||j.id!==this.pickId)return null;var X=j.value[2]+(j.value[1]<<8)+(j.value[0]<<16);if(X>=this.pointCount||X<0)return null;var ie=this.points[X],he=this._selectResult;he.index=X;for(var K=0;K<3;++K)he.position[K]=he.dataCoordinate[K]=ie[K];return he},x.highlight=function(j){if(!j)this.highlightId=[1,1,1,1];else{var X=j.index,ie=X&255,he=X>>8&255,K=X>>16&255;this.highlightId=[ie/255,he/255,K/255,0]}};function Y(j,X,ie,he){var K;Array.isArray(j)?X<j.length?K=j[X]:K=void 0:K=j,K=o(K);var $=!0;e(K)&&(K="\u25BC",$=!1);var U=s(K,ie,he);return{mesh:U[0],lines:U[1],bounds:U[2],visible:$}}x.update=function(j){if(j=j||{},"perspective"in j&&(this.useOrtho=!j.perspective),"orthographic"in j&&(this.useOrtho=!!j.orthographic),"lineWidth"in j&&(this.lineWidth=j.lineWidth),"project"in j)if(Array.isArray(j.project))this.axesProject=j.project;else{var X=!!j.project;this.axesProject=[X,X,X]}if("projectScale"in j)if(Array.isArray(j.projectScale))this.projectScale=j.projectScale.slice();else{var ie=+j.projectScale;this.projectScale=[ie,ie,ie]}if(this.projectHasAlpha=!1,"projectOpacity"in j){if(Array.isArray(j.projectOpacity))this.projectOpacity=j.projectOpacity.slice();else{var ie=+j.projectOpacity;this.projectOpacity=[ie,ie,ie]}for(var he=0;he<3;++he)this.projectOpacity[he]=y(this.projectOpacity[he]),this.projectOpacity[he]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in j&&(this.opacity=y(j.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var K=j.position,$=j.font||"normal",U=j.alignment||[0,0],H,q;if(U.length===2)H=U[0],q=U[1];else{H=[],q=[];for(var he=0;he<U.length;++he)H[he]=U[he][0],q[he]=U[he][1]}var re=[1/0,1/0,1/0],Z=[-1/0,-1/0,-1/0],Q=j.glyph,oe=j.color,se=j.size,ae=j.angle,le=j.lineColor,_e=-1,fe=0,me=0,xe=0;if(K.length){xe=K.length;e:for(var he=0;he<xe;++he){for(var ye=K[he],be=0;be<3;++be)if(isNaN(ye[be])||!isFinite(ye[be]))continue e;var ke=Y(Q,he,$,this.pixelRatio),De=ke.mesh,He=ke.lines,Ae=ke.bounds;fe+=De.cells.length*3,me+=He.edges.length*2}}var Le=fe+me,Ze=n.mallocFloat(3*Le),We=n.mallocFloat(4*Le),ze=n.mallocFloat(2*Le),Ie=n.mallocUint32(Le);if(Le>0){var Ve=0,dt=fe,Ft=[0,0,0,1],Qt=[0,0,0,1],Ot=Array.isArray(oe)&&Array.isArray(oe[0]),Ct=Array.isArray(le)&&Array.isArray(le[0]);e:for(var he=0;he<xe;++he){_e+=1;for(var ye=K[he],be=0;be<3;++be){if(isNaN(ye[be])||!isFinite(ye[be]))continue e;Z[be]=Math.max(Z[be],ye[be]),re[be]=Math.min(re[be],ye[be])}var ke=Y(Q,he,$,this.pixelRatio),De=ke.mesh,He=ke.lines,Ae=ke.bounds,jt=ke.visible;if(!jt)Ft=[1,1,1,0];else if(Array.isArray(oe)){var Nt;if(Ot?he<oe.length?Nt=oe[he]:Nt=[0,0,0,0]:Nt=oe,Nt.length===3){for(var be=0;be<3;++be)Ft[be]=Nt[be];Ft[3]=1}else if(Nt.length===4){for(var be=0;be<4;++be)Ft[be]=Nt[be];!this.hasAlpha&&Nt[3]<1&&(this.hasAlpha=!0)}}else Ft[0]=Ft[1]=Ft[2]=0,Ft[3]=1;if(!jt)Qt=[1,1,1,0];else if(Array.isArray(le)){var Nt;if(Ct?he<le.length?Nt=le[he]:Nt=[0,0,0,0]:Nt=le,Nt.length===3){for(var be=0;be<3;++be)Qt[be]=Nt[be];Qt[be]=1}else if(Nt.length===4){for(var be=0;be<4;++be)Qt[be]=Nt[be];!this.hasAlpha&&Nt[3]<1&&(this.hasAlpha=!0)}}else Qt[0]=Qt[1]=Qt[2]=0,Qt[3]=1;var Lt=.5;jt?Array.isArray(se)?he<se.length?Lt=+se[he]:Lt=12:se?Lt=+se:this.useOrtho&&(Lt=12):Lt=0;var Xe=0;Array.isArray(ae)?he<ae.length?Xe=+ae[he]:Xe=0:ae&&(Xe=+ae);for(var it=Math.cos(Xe),Ye=Math.sin(Xe),ye=K[he],be=0;be<3;++be)Z[be]=Math.max(Z[be],ye[be]),re[be]=Math.min(re[be],ye[be]);var Ee=H,Ge=q,Ee=0;Array.isArray(H)?he<H.length?Ee=H[he]:Ee=0:H&&(Ee=H);var Ge=0;Array.isArray(q)?he<q.length?Ge=q[he]:Ge=0:q&&(Ge=q),Ee*=Ee>0?1-Ae[0][0]:Ee<0?1+Ae[1][0]:1,Ge*=Ge>0?1-Ae[0][1]:Ge<0?1+Ae[1][1]:1;for(var Ke=[Ee,Ge],Gt=De.cells||[],zt=De.positions||[],be=0;be<Gt.length;++be)for(var qe=Gt[be],At=0;At<3;++At){for(var yt=0;yt<3;++yt)Ze[3*Ve+yt]=ye[yt];for(var yt=0;yt<4;++yt)We[4*Ve+yt]=Ft[yt];Ie[Ve]=_e;var Mt=zt[qe[At]];ze[2*Ve]=Lt*(it*Mt[0]-Ye*Mt[1]+Ke[0]),ze[2*Ve+1]=Lt*(Ye*Mt[0]+it*Mt[1]+Ke[1]),Ve+=1}for(var Gt=He.edges,zt=He.positions,be=0;be<Gt.length;++be)for(var qe=Gt[be],At=0;At<2;++At){for(var yt=0;yt<3;++yt)Ze[3*dt+yt]=ye[yt];for(var yt=0;yt<4;++yt)We[4*dt+yt]=Qt[yt];Ie[dt]=_e;var Mt=zt[qe[At]];ze[2*dt]=Lt*(it*Mt[0]-Ye*Mt[1]+Ke[0]),ze[2*dt+1]=Lt*(Ye*Mt[0]+it*Mt[1]+Ke[1]),dt+=1}}}this.bounds=[re,Z],this.points=K,this.pointCount=K.length,this.vertexCount=fe,this.lineVertexCount=me,this.pointBuffer.update(Ze),this.colorBuffer.update(We),this.glyphBuffer.update(ze),this.idBuffer.update(Ie),n.free(Ze),n.free(We),n.free(ze),n.free(Ie)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function ee(j){var X=j.gl,ie=v.createPerspective(X),he=v.createOrtho(X),K=v.createProject(X),$=v.createPickPerspective(X),U=v.createPickOrtho(X),H=v.createPickProject(X),q=a(X),re=a(X),Z=a(X),Q=a(X),oe=i(X,[{buffer:q,size:3,type:X.FLOAT},{buffer:re,size:4,type:X.FLOAT},{buffer:Z,size:2,type:X.FLOAT},{buffer:Q,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),se=new l(X,ie,he,K,q,re,Z,Q,oe,$,U,H);return se.update(j),se}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(u,A,T){var e=u("glslify");T.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),T.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(u,A,T){var e=u("gl-shader"),a=u("gl-buffer"),i=u("./lib/shaders");A.exports=v;function n(s,o,b){this.plot=s,this.boxBuffer=o,this.boxShader=b,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var r=n.prototype;r.draw=function(){if(!!this.enabled){var s=this.plot,o=this.selectBox,b=this.borderWidth;this.innerFill;var g=this.innerColor;this.outerFill;var d=this.outerColor,f=this.borderColor,y=s.box,l=s.screenBox,x=s.dataBox,c=s.viewBox,M=s.pixelRatio,w=(o[0]-x[0])*(c[2]-c[0])/(x[2]-x[0])+c[0],p=(o[1]-x[1])*(c[3]-c[1])/(x[3]-x[1])+c[1],_=(o[2]-x[0])*(c[2]-c[0])/(x[2]-x[0])+c[0],h=(o[3]-x[1])*(c[3]-c[1])/(x[3]-x[1])+c[1];if(w=Math.max(w,c[0]),p=Math.max(p,c[1]),_=Math.min(_,c[2]),h=Math.min(h,c[3]),!(_<w||h<p)){y.bind();var L=l[2]-l[0],E=l[3]-l[1];if(this.outerFill&&(y.drawBox(0,0,L,p,d),y.drawBox(0,p,w,h,d),y.drawBox(0,h,L,E,d),y.drawBox(_,p,L,h,d)),this.innerFill&&y.drawBox(w,p,_,h,g),b>0){var S=b*M;y.drawBox(w-S,p-S,_+S,p+S,f),y.drawBox(w-S,h-S,_+S,h+S,f),y.drawBox(w-S,p-S,w+S,h+S,f),y.drawBox(_-S,p-S,_+S,h+S,f)}}}},r.update=function(s){s=s||{},this.innerFill=!!s.innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function v(s,o){var b=s.gl,g=a(b,[0,0,0,1,1,0,1,1]),d=e(b,i.boxVertex,i.boxFragment),f=new n(s,g,d);return f.update(o),s.addOverlay(f),f}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(u,A,T){A.exports=b;var e=u("gl-fbo"),a=u("typedarray-pool"),i=u("ndarray"),n=u("bit-twiddle").nextPow2,r=function(g,d,f){for(var y=1e8,l=-1,x=-1,c=g.shape[0],M=g.shape[1],w=0;w<c;w++)for(var p=0;p<M;p++){var _=g.get(w,p,0),h=g.get(w,p,1),L=g.get(w,p,2),E=g.get(w,p,3);if(_<255||h<255||L<255||E<255){var S=d-w,P=f-p,F=S*S+P*P;F<y&&(y=F,l=w,x=p)}}return[l,x,y]};function v(g,d,f,y,l){this.coord=[g,d],this.id=f,this.value=y,this.distance=l}function s(g,d,f){this.gl=g,this.fbo=d,this.buffer=f,this._readTimeout=null;var y=this;this._readCallback=function(){!y.gl||(d.bind(),g.readPixels(0,0,d.shape[0],d.shape[1],g.RGBA,g.UNSIGNED_BYTE,y.buffer),y._readTimeout=null)}}var o=s.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(g){if(!!this.gl){this.fbo.shape=g;var d=this.fbo.shape[0],f=this.fbo.shape[1];if(f*d*4>this.buffer.length){a.free(this.buffer);for(var y=this.buffer=a.mallocUint8(n(f*d*4)),l=0;l<f*d*4;++l)y[l]=255}return g}}}),o.begin=function(){var g=this.gl;this.shape,g&&(this.fbo.bind(),g.clearColor(1,1,1,1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT))},o.end=function(){var g=this.gl;!g||(g.bindFramebuffer(g.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(g,d,f){if(!this.gl)return null;var y=this.fbo.shape.slice();g=g|0,d=d|0,typeof f!="number"&&(f=1);var l=Math.min(Math.max(g-f,0),y[0])|0,x=Math.min(Math.max(g+f,0),y[0])|0,c=Math.min(Math.max(d-f,0),y[1])|0,M=Math.min(Math.max(d+f,0),y[1])|0;if(x<=l||M<=c)return null;var w=[x-l,M-c],p=i(this.buffer,[w[0],w[1],4],[4,y[0]*4,1],4*(l+y[0]*c)),_=r(p.hi(w[0],w[1],1),f,f),h=_[0],L=_[1];if(h<0||Math.pow(this.radius,2)<_[2])return null;var E=p.get(h,L,0),S=p.get(h,L,1),P=p.get(h,L,2),F=p.get(h,L,3);return new v(h+l|0,L+c|0,E,[S,P,F],Math.sqrt(_[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function b(g,d){var f=d[0],y=d[1],l={},x=e(g,f,y,l),c=a.mallocUint8(f*y*4);return new s(g,x,c)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(u,A,T){var e=u("./lib/create-uniforms"),a=u("./lib/create-attributes"),i=u("./lib/reflect"),n=u("./lib/shader-cache"),r=u("./lib/runtime-reflect"),v=u("./lib/GLError");function s(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=s.prototype;o.bind=function(){this.program||this._relink();var d,f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(f>y)for(d=y;d<f;d++)this.gl.enableVertexAttribArray(d);else if(y>f)for(d=f;d<y;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},o.dispose=function(){for(var d=this.gl.lastAttribCount,f=0;f<d;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function b(d,f){return d.name<f.name?-1:1}o.update=function(d,f,y,l){if(!f||arguments.length===1){var x=d;d=x.vertex,f=x.fragment,y=x.uniforms,l=x.attributes}var c=this,M=c.gl,w=c._vref;c._vref=n.shader(M,M.VERTEX_SHADER,d),w&&w.dispose(),c.vertShader=c._vref.shader;var p=this._fref;if(c._fref=n.shader(M,M.FRAGMENT_SHADER,f),p&&p.dispose(),c.fragShader=c._fref.shader,!y||!l){var _=M.createProgram();if(M.attachShader(_,c.fragShader),M.attachShader(_,c.vertShader),M.linkProgram(_),!M.getProgramParameter(_,M.LINK_STATUS)){var h=M.getProgramInfoLog(_);throw new v(h,"Error linking program:"+h)}y=y||r.uniforms(M,_),l=l||r.attributes(M,_),M.deleteProgram(_)}l=l.slice(),l.sort(b);var L=[],E=[],S=[],P;for(P=0;P<l.length;++P){var F=l[P];if(F.type.indexOf("mat")>=0){for(var I=F.type.charAt(F.type.length-1)|0,D=new Array(I),R=0;R<I;++R)D[R]=S.length,E.push(F.name+"["+R+"]"),typeof F.location=="number"?S.push(F.location+R):Array.isArray(F.location)&&F.location.length===I&&typeof F.location[R]=="number"?S.push(F.location[R]|0):S.push(-1);L.push({name:F.name,type:F.type,locations:D})}else L.push({name:F.name,type:F.type,locations:[S.length]}),E.push(F.name),typeof F.location=="number"?S.push(F.location|0):S.push(-1)}var O=0;for(P=0;P<S.length;++P)if(S[P]<0){for(;S.indexOf(O)>=0;)O+=1;S[P]=O}var z=new Array(y.length);function G(){c.program=n.program(M,c._vref,c._fref,E,S);for(var Y=0;Y<y.length;++Y)z[Y]=M.getUniformLocation(c.program,y[Y].name)}G(),c._relink=G,c.types={uniforms:i(y),attributes:i(l)},c.attributes=a(M,c,L,S),Object.defineProperty(c,"uniforms",e(M,c,y,z))};function g(d,f,y,l,x){var c=new s(d);return c.update(f,y,l,x),c}A.exports=g},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(u,A,T){function e(a,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=a||"",this.message="gl-shader: "+(i||a||"")+(n?`
`+n:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,A.exports=e},{}],134:[function(u,A,T){A.exports=s;var e=u("./GLError");function a(o,b,g,d,f,y){this._gl=o,this._wrapper=b,this._index=g,this._locations=d,this._dimension=f,this._constFunc=y}var i=a.prototype;i.pointer=function(b,g,d,f){var y=this,l=y._gl,x=y._locations[y._index];l.vertexAttribPointer(x,y._dimension,b||l.FLOAT,!!g,d||0,f||0),l.enableVertexAttribArray(x)},i.set=function(o,b,g,d){return this._constFunc(this._locations[this._index],o,b,g,d)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(o){return o!==this._locations[this._index]&&(this._locations[this._index]=o|0,this._wrapper.program=null),o|0}});var n=[function(o,b,g){return g.length===void 0?o.vertexAttrib1f(b,g):o.vertexAttrib1fv(b,g)},function(o,b,g,d){return g.length===void 0?o.vertexAttrib2f(b,g,d):o.vertexAttrib2fv(b,g)},function(o,b,g,d,f){return g.length===void 0?o.vertexAttrib3f(b,g,d,f):o.vertexAttrib3fv(b,g)},function(o,b,g,d,f,y){return g.length===void 0?o.vertexAttrib4f(b,g,d,f,y):o.vertexAttrib4fv(b,g)}];function r(o,b,g,d,f,y,l){var x=n[f],c=new a(o,b,g,d,f,x);Object.defineProperty(y,l,{set:function(M){return o.disableVertexAttribArray(d[g]),x(o,d[g],M),M},get:function(){return c},enumerable:!0})}function v(o,b,g,d,f,y,l){for(var x=new Array(f),c=new Array(f),M=0;M<f;++M)r(o,b,g[M],d,f,x,M),c[M]=x[M];Object.defineProperty(x,"location",{set:function(_){if(Array.isArray(_))for(var h=0;h<f;++h)c[h].location=_[h];else for(var h=0;h<f;++h)c[h].location=_+h;return _},get:function(){for(var _=new Array(f),h=0;h<f;++h)_[h]=d[g[h]];return _},enumerable:!0}),x.pointer=function(_,h,L,E){_=_||o.FLOAT,h=!!h,L=L||f*f,E=E||0;for(var S=0;S<f;++S){var P=d[g[S]];o.vertexAttribPointer(P,f,_,h,L,E+S*f),o.enableVertexAttribArray(P)}};var w=new Array(f),p=o["vertexAttrib"+f+"fv"];Object.defineProperty(y,l,{set:function(_){for(var h=0;h<f;++h){var L=d[g[h]];if(o.disableVertexAttribArray(L),Array.isArray(_[0]))p.call(o,L,_[h]);else{for(var E=0;E<f;++E)w[E]=_[f*h+E];p.call(o,L,w)}}return _},get:function(){return x},enumerable:!0})}function s(o,b,g,d){for(var f={},y=0,l=g.length;y<l;++y){var x=g[y],c=x.name,M=x.type,w=x.locations;switch(M){case"bool":case"int":case"float":r(o,b,w[0],d,1,f,c);break;default:if(M.indexOf("vec")>=0){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new e("","Invalid data type for attribute "+c+": "+M);r(o,b,w[0],d,p,f,c)}else if(M.indexOf("mat")>=0){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new e("","Invalid data type for attribute "+c+": "+M);v(o,b,w,d,p,f,c)}else throw new e("","Unknown data type for attribute "+c+": "+M);break}}return f}},{"./GLError":133}],135:[function(u,A,T){var e=u("./reflect"),a=u("./GLError");A.exports=r;function i(v){return function(){return v}}function n(v,s){for(var o=new Array(v),b=0;b<v;++b)o[b]=s;return o}function r(v,s,o,b){function g(M){return function(w,p,_){return w.getUniform(p.program,_[M])}}function d(M){return function(p){for(var _=f("",M),h=0;h<_.length;++h){var L=_[h],E=L[0],S=L[1];if(b[S]){var P=p;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var F=E;if(E.indexOf(".")===0&&(F=E.slice(1)),F.indexOf("]")===F.length-1){var I=F.indexOf("["),D=F.slice(0,I),R=F.slice(I+1,F.length-1);P=D?p[D][R]:p[R]}else P=p[F]}var O=o[S].type,z;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":v.uniform1i(b[S],P);break;case"float":v.uniform1f(b[S],P);break;default:var G=O.indexOf("vec");if(0<=G&&G<=1&&O.length===4+G){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid data type");switch(O.charAt(0)){case"b":case"i":v["uniform"+z+"iv"](b[S],P);break;case"v":v["uniform"+z+"fv"](b[S],P);break;default:throw new a("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+O);v["uniformMatrix"+z+"fv"](b[S],!1,P);break}else throw new a("","Unknown uniform data type for "+name+": "+O)}}}}}function f(M,w){if(typeof w!="object")return[[M,w]];var p=[];for(var _ in w){var h=w[_],L=M;parseInt(_)+""===_?L+="["+_+"]":L+="."+_,typeof h=="object"?p.push.apply(p,f(L,h)):p.push([L,h])}return p}function y(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var w=M.indexOf("vec");if(0<=w&&w<=1&&M.length===4+w){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new a("","Invalid data type");return M.charAt(0)==="b"?n(p,!1):n(p,0)}else if(M.indexOf("mat")===0&&M.length===4){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+M);return n(p*p,0)}else throw new a("","Unknown uniform data type for "+name+": "+M)}}function l(M,w,p){if(typeof p=="object"){var _=x(p);Object.defineProperty(M,w,{get:i(_),set:d(p),enumerable:!0,configurable:!1})}else b[p]?Object.defineProperty(M,w,{get:g(p),set:d(p),enumerable:!0,configurable:!1}):M[w]=y(o[p].type)}function x(M){var w;if(Array.isArray(M)){w=new Array(M.length);for(var p=0;p<M.length;++p)l(w,p,M[p])}else{w={};for(var _ in M)l(w,_,M[_])}return w}var c=e(o,!0);return{get:i(x(c)),set:d(c),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(u,A,T){A.exports=e;function e(a,i){for(var n={},r=0;r<a.length;++r)for(var v=a[r].name,s=v.split("."),o=n,b=0;b<s.length;++b){var g=s[b].split("[");if(g.length>1){g[0]in o||(o[g[0]]=[]),o=o[g[0]];for(var d=1;d<g.length;++d){var f=parseInt(g[d]);d<g.length-1||b<s.length-1?(f in o||(d<g.length-1?o[f]=[]:o[f]={}),o=o[f]):i?o[f]=r:o[f]=a[r].type}}else b<s.length-1?(g[0]in o||(o[g[0]]={}),o=o[g[0]]):i?o[g[0]]=r:o[g[0]]=a[r].type}return n}},{}],137:[function(u,A,T){T.uniforms=n,T.attributes=r;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function i(v,s){if(!a){var o=Object.keys(e);a={};for(var b=0;b<o.length;++b){var g=o[b];a[v[g]]=e[g]}}return a[s]}function n(v,s){for(var o=v.getProgramParameter(s,v.ACTIVE_UNIFORMS),b=[],g=0;g<o;++g){var d=v.getActiveUniform(s,g);if(d){var f=i(v,d.type);if(d.size>1)for(var y=0;y<d.size;++y)b.push({name:d.name.replace("[0]","["+y+"]"),type:f});else b.push({name:d.name,type:f})}}return b}function r(v,s){for(var o=v.getProgramParameter(s,v.ACTIVE_ATTRIBUTES),b=[],g=0;g<o;++g){var d=v.getActiveAttrib(s,g);d&&b.push({name:d.name,type:i(v,d.type)})}return b}},{}],138:[function(u,A,T){T.shader=f,T.program=y;var e=u("./GLError"),a=u("gl-format-compiler-error"),i=typeof WeakMap>"u"?u("weakmap-shim"):WeakMap,n=new i,r=0;function v(l,x,c,M,w,p,_){this.id=l,this.src=x,this.type=c,this.shader=M,this.count=p,this.programs=[],this.cache=_}v.prototype.dispose=function(){if(--this.count===0){for(var l=this.cache,x=l.gl,c=this.programs,M=0,w=c.length;M<w;++M){var p=l.programs[c[M]];p&&(delete l.programs[M],x.deleteProgram(p))}x.deleteShader(this.shader),delete l.shaders[this.type===x.FRAGMENT_SHADER|0][this.src]}};function s(l){this.gl=l,this.shaders=[{},{}],this.programs={}}var o=s.prototype;function b(l,x,c){var M=l.createShader(x);if(l.shaderSource(M,c),l.compileShader(M),!l.getShaderParameter(M,l.COMPILE_STATUS)){var w=l.getShaderInfoLog(M);try{var p=a(w,c,x)}catch(_){throw console.warn("Failed to format compiler error: "+_),new e(w,`Error compiling shader:
`+w)}throw new e(w,p.short,p.long)}return M}o.getShaderReference=function(l,x){var c=this.gl,M=this.shaders[l===c.FRAGMENT_SHADER|0],w=M[x];if(!w||!c.isShader(w.shader)){var p=b(c,l,x);w=M[x]=new v(r++,x,l,p,[],1,this)}else w.count+=1;return w};function g(l,x,c,M,w){var p=l.createProgram();l.attachShader(p,x),l.attachShader(p,c);for(var _=0;_<M.length;++_)l.bindAttribLocation(p,w[_],M[_]);if(l.linkProgram(p),!l.getProgramParameter(p,l.LINK_STATUS)){var h=l.getProgramInfoLog(p);throw new e(h,"Error linking program: "+h)}return p}o.getProgram=function(l,x,c,M){var w=[l.id,x.id,c.join(":"),M.join(":")].join("@"),p=this.programs[w];return(!p||!this.gl.isProgram(p))&&(this.programs[w]=p=g(this.gl,l.shader,x.shader,c,M),l.programs.push(w),x.programs.push(w)),p};function d(l){var x=n.get(l);return x||(x=new s(l),n.set(l,x)),x}function f(l,x,c){return d(l).getShaderReference(x,c)}function y(l,x,c,M,w){return d(l).getProgram(x,c,M,w)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(u,A,T){A.exports=i;function e(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=e.prototype;a.update=function(n){n=n||{},this.enable=(n.enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var n=this.enable,r=this.width,v=this.color,s=this.center,o=this.plot,b=o.line,g=o.dataBox,d=o.viewBox;if(b.bind(),g[0]<=s[0]&&s[0]<=g[2]&&g[1]<=s[1]&&s[1]<=g[3]){var f=d[0]+(s[0]-g[0])/(g[2]-g[0])*(d[2]-d[0]),y=d[1]+(s[1]-g[1])/(g[3]-g[1])*(d[3]-d[1]);n[0]&&b.drawLine(f,y,d[0],y,r[0],v[0]),n[1]&&b.drawLine(f,y,f,d[1],r[1],v[1]),n[2]&&b.drawLine(f,y,d[2],y,r[2],v[2]),n[3]&&b.drawLine(f,y,f,d[3],r[3],v[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function i(n,r){var v=new e(n);return v.update(r),n.addOverlay(v),v}},{}],140:[function(u,A,T){var e=u("glslify"),a=u("gl-shader"),i=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),n=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(u,A,T){var e=u("gl-buffer"),a=u("gl-vao"),i=u("./shaders/index");A.exports=g;var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(d,f,y,l){this.gl=d,this.buffer=f,this.vao=y,this.shader=l,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var v=r.prototype,s=[0,0,0],o=[0,0,0],b=[0,0];v.isTransparent=function(){return!1},v.drawTransparent=function(d){},v.draw=function(d){var f=this.gl,y=this.vao,l=this.shader;y.bind(),l.bind();var x=d.model||n,c=d.view||n,M=d.projection||n,w;this.axes&&(w=this.axes.lastCubeProps.axis);for(var p=s,_=o,h=0;h<3;++h)w&&w[h]<0?(p[h]=this.bounds[0][h],_[h]=this.bounds[1][h]):(p[h]=this.bounds[1][h],_[h]=this.bounds[0][h]);b[0]=f.drawingBufferWidth,b[1]=f.drawingBufferHeight,l.uniforms.model=x,l.uniforms.view=c,l.uniforms.projection=M,l.uniforms.coordinates=[this.position,p,_],l.uniforms.colors=this.colors,l.uniforms.screenShape=b;for(var h=0;h<3;++h)l.uniforms.lineWidth=this.lineWidth[h]*this.pixelRatio,this.enabled[h]&&(y.draw(f.TRIANGLES,6,6*h),this.drawSides[h]&&y.draw(f.TRIANGLES,12,18+12*h));y.unbind()},v.update=function(d){!d||("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},v.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function g(d,f){var y=[];function l(p,_,h,L,E,S){var P=[p,_,h,0,0,0,1];P[L+3]=1,P[L]=E,y.push.apply(y,P),P[6]=-1,y.push.apply(y,P),P[L]=S,y.push.apply(y,P),y.push.apply(y,P),P[6]=1,y.push.apply(y,P),P[L]=E,y.push.apply(y,P)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var x=e(d,y),c=a(d,[{type:d.FLOAT,buffer:x,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:x,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:x,size:1,offset:24,stride:28}]),M=i(d);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var w=new r(d,x,c,M);return w.update(f),w}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(u,A,T){var e=u("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},T.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(u,A,T){var e=u("gl-vec3"),a=u("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(y,l,x,c){for(var M=y.points,w=y.velocities,p=y.divergences,_=[],h=[],L=[],E=[],S=[],P=[],F=0,I=0,D=a.create(),R=a.create(),O=8,z=0;z<M.length;z++){var G=M[z],Y=w[z],ee=p[z];l===0&&(ee=x*.05),I=e.length(Y)/c,D=a.create(),e.copy(D,Y),D[3]=ee;for(var j=0;j<O;j++)S[j]=[G[0],G[1],G[2],j];if(E.length>0)for(var j=0;j<O;j++){var X=(j+1)%O;_.push(E[j],S[j],S[X],S[X],E[X],E[j]),L.push(R,D,D,D,R,R),P.push(F,I,I,I,F,F);var ie=_.length;h.push([ie-6,ie-5,ie-4],[ie-3,ie-2,ie-1])}var he=E;E=S,S=he;var K=R;R=D,D=K;var $=F;F=I,I=$}return{positions:_,cells:h,vectors:L,vertexIntensity:P}},r=function(y,l,x,c){for(var M=0,w=0;w<y.length;w++)for(var p=y[w].velocities,_=0;_<p.length;_++)M=Math.max(M,e.length(p[_]));for(var h=y.map(function(z){return n(z,x,c,M)}),L=[],E=[],S=[],P=[],w=0;w<h.length;w++){var F=h[w],I=L.length;L=L.concat(F.positions),S=S.concat(F.vectors),P=P.concat(F.vertexIntensity);for(var _=0;_<F.cells.length;_++){var D=F.cells[_],R=[];E.push(R);for(var O=0;O<D.length;O++)R.push(D[O]+I)}}return{positions:L,cells:E,vectors:S,vertexIntensity:P,colormap:l}},v=function(y,l){var x=y.length,c;for(c=0;c<x;c++){var M=y[c];if(M===l)return c;if(M>l)return c-1}return c},s=function(y,l,x){return y<l?l:y>x?x:y},o=function(y,l,x){var c=l.vectors,M=l.meshgrid,w=y[0],p=y[1],_=y[2],h=M[0].length,L=M[1].length,E=M[2].length,S=v(M[0],w),P=v(M[1],p),F=v(M[2],_),I=S+1,D=P+1,R=F+1;if(S=s(S,0,h-1),I=s(I,0,h-1),P=s(P,0,L-1),D=s(D,0,L-1),F=s(F,0,E-1),R=s(R,0,E-1),S<0||P<0||F<0||I>h-1||D>L-1||R>E-1)return e.create();var O=M[0][S],z=M[0][I],G=M[1][P],Y=M[1][D],ee=M[2][F],j=M[2][R],X=(w-O)/(z-O),ie=(p-G)/(Y-G),he=(_-ee)/(j-ee);isFinite(X)||(X=.5),isFinite(ie)||(ie=.5),isFinite(he)||(he=.5);var K,$,U,H,q,re;switch(x.reversedX&&(S=h-1-S,I=h-1-I),x.reversedY&&(P=L-1-P,D=L-1-D),x.reversedZ&&(F=E-1-F,R=E-1-R),x.filled){case 5:q=F,re=R,U=P*E,H=D*E,K=S*E*L,$=I*E*L;break;case 4:q=F,re=R,K=S*E,$=I*E,U=P*E*h,H=D*E*h;break;case 3:U=P,H=D,q=F*L,re=R*L,K=S*L*E,$=I*L*E;break;case 2:U=P,H=D,K=S*L,$=I*L,q=F*L*h,re=R*L*h;break;case 1:K=S,$=I,q=F*h,re=R*h,U=P*h*E,H=D*h*E;break;default:K=S,$=I,U=P*h,H=D*h,q=F*h*L,re=R*h*L;break}var Z=c[K+U+q],Q=c[K+U+re],oe=c[K+H+q],se=c[K+H+re],ae=c[$+U+q],le=c[$+U+re],_e=c[$+H+q],fe=c[$+H+re],me=e.create(),xe=e.create(),ye=e.create(),be=e.create();e.lerp(me,Z,ae,X),e.lerp(xe,Q,le,X),e.lerp(ye,oe,_e,X),e.lerp(be,se,fe,X);var ke=e.create(),De=e.create();e.lerp(ke,me,ye,ie),e.lerp(De,xe,be,ie);var He=e.create();return e.lerp(He,ke,De,he),He},b=function(y){var l=1/0;y.sort(function(w,p){return w-p});for(var x=y.length,c=1;c<x;c++){var M=Math.abs(y[c]-y[c-1]);M<l&&(l=M)}return l},g=function(y){for(var l=[],x=[],c=[],M={},w={},p={},_=y.length,h=0;h<_;h++){var L=y[h],E=L[0],S=L[1],P=L[2];M[E]||(l.push(E),M[E]=!0),w[S]||(x.push(S),w[S]=!0),p[P]||(c.push(P),p[P]=!0)}var F=b(l),I=b(x),D=b(c),R=Math.min(F,I,D);return isFinite(R)?R:1};A.exports=function(y,l){var x=y.startingPositions,c=y.maxLength||1e3,M=y.tubeSize||1,w=y.absoluteTubeSize,p=y.gridFill||"+x+y+z",_={};p.indexOf("-x")!==-1&&(_.reversedX=!0),p.indexOf("-y")!==-1&&(_.reversedY=!0),p.indexOf("-z")!==-1&&(_.reversedZ=!0),_.filled=i.indexOf(p.replace(/-/g,"").replace(/\+/g,""));var h=y.getVelocity||function(le){return o(le,y,_)},L=y.getDivergence||function(le,_e){var fe=e.create(),me=1e-4;e.add(fe,le,[me,0,0]);var xe=h(fe);e.subtract(xe,xe,_e),e.scale(xe,xe,1/me),e.add(fe,le,[0,me,0]);var ye=h(fe);e.subtract(ye,ye,_e),e.scale(ye,ye,1/me),e.add(fe,le,[0,0,me]);var be=h(fe);return e.subtract(be,be,_e),e.scale(be,be,1/me),e.add(fe,xe,ye),e.add(fe,fe,be),fe},E=[],S=l[0][0],P=l[0][1],F=l[0][2],I=l[1][0],D=l[1][1],R=l[1][2],O=function(le){var _e=le[0],fe=le[1],me=le[2];return!(_e<S||_e>I||fe<P||fe>D||me<F||me>R)},z=e.distance(l[0],l[1]),G=10*z/c,Y=G*G,ee=1,j=0,X=x.length;X>1&&(ee=g(x));for(var ie=0;ie<X;ie++){var he=e.create();e.copy(he,x[ie]);var K=[he],$=[],U=h(he),H=he;$.push(U);var q=[],re=L(he,U),Z=e.length(re);isFinite(Z)&&Z>j&&(j=Z),q.push(Z),E.push({points:K,velocities:$,divergences:q});for(var Q=0;Q<c*100&&K.length<c&&O(he);){Q++;var oe=e.clone(U),se=e.squaredLength(oe);if(se===0)break;if(se>Y&&e.scale(oe,oe,G/Math.sqrt(se)),e.add(oe,oe,he),U=h(oe),e.squaredDistance(H,oe)-Y>-1e-4*Y){K.push(oe),H=oe,$.push(U);var re=L(oe,U),Z=e.length(re);isFinite(Z)&&Z>j&&(j=Z),q.push(Z)}he=oe}}var ae=r(E,y.colormap,j,ee);return w?ae.tubeScale=w:(j===0&&(j=1),ae.tubeScale=M*.5*ee/j),ae};var d=u("./lib/shaders"),f=u("gl-cone3d").createMesh;A.exports.createTubeMesh=function(y,l){return f(y,l,{shaders:d,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(u,A,T){var e=u("gl-shader"),a=u("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),n=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);T.createShader=function(s){var o=e(s,i,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createPickShader=function(s){var o=e(s,i,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createContourShader=function(s){var o=e(s,r,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},T.createPickContourShader=function(s){var o=e(s,r,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(u,A,T){A.exports=$;var e=u("bit-twiddle"),a=u("gl-buffer"),i=u("gl-vao"),n=u("gl-texture2d"),r=u("typedarray-pool"),v=u("colormap"),s=u("ndarray-ops"),o=u("ndarray-pack"),b=u("ndarray"),g=u("surface-nets"),d=u("gl-mat4/multiply"),f=u("gl-mat4/invert"),y=u("binary-search-bounds"),l=u("ndarray-gradient"),x=u("./lib/shaders"),c=x.createShader,M=x.createContourShader,w=x.createPickShader,p=x.createPickContourShader,_=4*(4+3+3),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],E=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var U=0;U<3;++U){var H=E[U],q=(U+1)%3,re=(U+2)%3;H[q+0]=1,H[re+3]=1,H[U+6]=1}})();function S(U,H,q,re,Z){this.position=U,this.index=H,this.uv=q,this.level=re,this.dataCoordinate=Z}var P=256;function F(U,H,q,re,Z,Q,oe,se,ae,le,_e,fe,me,xe,ye){this.gl=U,this.shape=H,this.bounds=q,this.objectOffset=ye,this.intensityBounds=[],this._shader=re,this._pickShader=Z,this._coordinateBuffer=Q,this._vao=oe,this._colorMap=se,this._contourShader=ae,this._contourPickShader=le,this._contourBuffer=_e,this._contourVAO=fe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new S([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=me,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(r.mallocFloat(1024),[0,0]),b(r.mallocFloat(1024),[0,0]),b(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=F.prototype;I.genColormap=function(U,H){var q=!1,re=o([v({colormap:U,nshades:P,format:"rgba"}).map(function(Z,Q){var oe=H?D(Q/255,H):Z[3];return oe<1&&(q=!0),[Z[0],Z[1],Z[2],255*oe]})]);return s.divseq(re,255),this.hasAlphaScale=q,re},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(U){this.pickId=U};function D(U,H){if(!H||!H.length)return 1;for(var q=0;q<H.length;++q){if(H.length<2)return 1;if(H[q][0]===U)return H[q][1];if(H[q][0]>U&&q>0){var re=(H[q][0]-U)/(H[q][0]-H[q-1][0]);return H[q][1]*(1-re)+re*H[q-1][1]}}return 1}var R=[0,0,0],O={showSurface:!1,showContour:!1,projections:[h.slice(),h.slice(),h.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(U,H){var q,re,Z,Q=H.axes&&H.axes.lastCubeProps.axis||R,oe=H.showSurface,se=H.showContour;for(q=0;q<3;++q)for(oe=oe||H.surfaceProject[q],re=0;re<3;++re)se=se||H.contourProject[q][re];for(q=0;q<3;++q){var ae=O.projections[q];for(re=0;re<16;++re)ae[re]=0;for(re=0;re<4;++re)ae[5*re]=1;ae[5*q]=0,ae[12+q]=H.axesBounds[+(Q[q]>0)][q],d(ae,U.model,ae);var le=O.clipBounds[q];for(Z=0;Z<2;++Z)for(re=0;re<3;++re)le[Z][re]=U.clipBounds[Z][re];le[0][q]=-1e8,le[1][q]=1e8}return O.showSurface=oe,O.showContour=se,O}var G={model:h,view:h,projection:h,inverseModel:h.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=h.slice(),ee=[1,0,0,0,1,0,0,0,1];function j(U,H){U=U||{};var q=this.gl;q.disable(q.CULL_FACE),this._colorMap.bind(0);var re=G;re.model=U.model||h,re.view=U.view||h,re.projection=U.projection||h,re.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],re.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],re.objectOffset=this.objectOffset,re.contourColor=this.contourColor[0],re.inverseModel=f(re.inverseModel,re.model);for(var Z=0;Z<2;++Z)for(var Q=re.clipBounds[Z],oe=0;oe<3;++oe)Q[oe]=Math.min(Math.max(this.clipBounds[Z][oe],-1e8),1e8);re.kambient=this.ambientLight,re.kdiffuse=this.diffuseLight,re.kspecular=this.specularLight,re.roughness=this.roughness,re.fresnel=this.fresnel,re.opacity=this.opacity,re.height=0,re.permutation=ee,re.vertexColor=this.vertexColor;var se=Y;for(d(se,re.view,re.model),d(se,re.projection,se),f(se,se),Z=0;Z<3;++Z)re.eyePosition[Z]=se[12+Z]/se[15];var ae=se[15];for(Z=0;Z<3;++Z)ae+=this.lightPosition[Z]*se[4*Z+3];for(Z=0;Z<3;++Z){var le=se[12+Z];for(oe=0;oe<3;++oe)le+=se[4*oe+Z]*this.lightPosition[oe];re.lightPosition[Z]=le/ae}var _e=z(re,this);if(_e.showSurface){for(this._shader.bind(),this._shader.uniforms=re,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(q.TRIANGLES,this._vertexCount),Z=0;Z<3;++Z)!this.surfaceProject[Z]||!this.vertexCount||(this._shader.uniforms.model=_e.projections[Z],this._shader.uniforms.clipBounds=_e.clipBounds[Z],this._vao.draw(q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(_e.showContour){var fe=this._contourShader;re.kambient=1,re.kdiffuse=0,re.kspecular=0,re.opacity=1,fe.bind(),fe.uniforms=re;var me=this._contourVAO;for(me.bind(),Z=0;Z<3;++Z)for(fe.uniforms.permutation=E[Z],q.lineWidth(this.contourWidth[Z]*this.pixelRatio),oe=0;oe<this.contourLevels[Z].length;++oe)oe===this.highlightLevel[Z]?(fe.uniforms.contourColor=this.highlightColor[Z],fe.uniforms.contourTint=this.highlightTint[Z]):(oe===0||oe-1===this.highlightLevel[Z])&&(fe.uniforms.contourColor=this.contourColor[Z],fe.uniforms.contourTint=this.contourTint[Z]),this._contourCounts[Z][oe]&&(fe.uniforms.height=this.contourLevels[Z][oe],me.draw(q.LINES,this._contourCounts[Z][oe],this._contourOffsets[Z][oe]));for(Z=0;Z<3;++Z)for(fe.uniforms.model=_e.projections[Z],fe.uniforms.clipBounds=_e.clipBounds[Z],oe=0;oe<3;++oe)if(!!this.contourProject[Z][oe]){fe.uniforms.permutation=E[oe],q.lineWidth(this.contourWidth[oe]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[oe].length;++xe)xe===this.highlightLevel[oe]?(fe.uniforms.contourColor=this.highlightColor[oe],fe.uniforms.contourTint=this.highlightTint[oe]):(xe===0||xe-1===this.highlightLevel[oe])&&(fe.uniforms.contourColor=this.contourColor[oe],fe.uniforms.contourTint=this.contourTint[oe]),this._contourCounts[oe][xe]&&(fe.uniforms.height=this.contourLevels[oe][xe],me.draw(q.LINES,this._contourCounts[oe][xe],this._contourOffsets[oe][xe]))}for(me.unbind(),me=this._dynamicVAO,me.bind(),Z=0;Z<3;++Z)if(this._dynamicCounts[Z]!==0)for(fe.uniforms.model=re.model,fe.uniforms.clipBounds=re.clipBounds,fe.uniforms.permutation=E[Z],q.lineWidth(this.dynamicWidth[Z]*this.pixelRatio),fe.uniforms.contourColor=this.dynamicColor[Z],fe.uniforms.contourTint=this.dynamicTint[Z],fe.uniforms.height=this.dynamicLevel[Z],me.draw(q.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]),oe=0;oe<3;++oe)!this.contourProject[oe][Z]||(fe.uniforms.model=_e.projections[oe],fe.uniforms.clipBounds=_e.clipBounds[oe],me.draw(q.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]));me.unbind()}}I.draw=function(U){return j.call(this,U,!1)},I.drawTransparent=function(U){return j.call(this,U,!0)};var X={model:h,view:h,projection:h,inverseModel:h,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(U){U=U||{};var H=this.gl;H.disable(H.CULL_FACE);var q=X;q.model=U.model||h,q.view=U.view||h,q.projection=U.projection||h,q.shape=this._field[2].shape,q.pickId=this.pickId/255,q.lowerBound=this.bounds[0],q.upperBound=this.bounds[1],q.objectOffset=this.objectOffset,q.permutation=ee;for(var re=0;re<2;++re)for(var Z=q.clipBounds[re],Q=0;Q<3;++Q)Z[Q]=Math.min(Math.max(this.clipBounds[re][Q],-1e8),1e8);var oe=z(q,this);if(oe.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=q,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),re=0;re<3;++re)!this.surfaceProject[re]||(this._pickShader.uniforms.model=oe.projections[re],this._pickShader.uniforms.clipBounds=oe.clipBounds[re],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(oe.showContour){var se=this._contourPickShader;se.bind(),se.uniforms=q;var ae=this._contourVAO;for(ae.bind(),Q=0;Q<3;++Q)for(H.lineWidth(this.contourWidth[Q]*this.pixelRatio),se.uniforms.permutation=E[Q],re=0;re<this.contourLevels[Q].length;++re)this._contourCounts[Q][re]&&(se.uniforms.height=this.contourLevels[Q][re],ae.draw(H.LINES,this._contourCounts[Q][re],this._contourOffsets[Q][re]));for(re=0;re<3;++re)for(se.uniforms.model=oe.projections[re],se.uniforms.clipBounds=oe.clipBounds[re],Q=0;Q<3;++Q)if(!!this.contourProject[re][Q]){se.uniforms.permutation=E[Q],H.lineWidth(this.contourWidth[Q]*this.pixelRatio);for(var le=0;le<this.contourLevels[Q].length;++le)this._contourCounts[Q][le]&&(se.uniforms.height=this.contourLevels[Q][le],ae.draw(H.LINES,this._contourCounts[Q][le],this._contourOffsets[Q][le]))}ae.unbind()}},I.pick=function(U){if(!U||U.id!==this.pickId)return null;var H=this._field[2].shape,q=this._pickResult,re=H[0]*(U.value[0]+(U.value[2]>>4)/16)/255,Z=Math.floor(re),Q=re-Z,oe=H[1]*(U.value[1]+(U.value[2]&15)/16)/255,se=Math.floor(oe),ae=oe-se;Z+=1,se+=1;var le=q.position;le[0]=le[1]=le[2]=0;for(var _e=0;_e<2;++_e)for(var fe=_e?Q:1-Q,me=0;me<2;++me)for(var xe=me?ae:1-ae,ye=Z+_e,be=se+me,ke=fe*xe,De=0;De<3;++De)le[De]+=this._field[De].get(ye,be)*ke;for(var He=this._pickResult.level,Ae=0;Ae<3;++Ae)if(He[Ae]=y.le(this.contourLevels[Ae],le[Ae]),He[Ae]<0)this.contourLevels[Ae].length>0&&(He[Ae]=0);else if(He[Ae]<this.contourLevels[Ae].length-1){var Le=this.contourLevels[Ae][He[Ae]],Ze=this.contourLevels[Ae][He[Ae]+1];Math.abs(Le-le[Ae])>Math.abs(Ze-le[Ae])&&(He[Ae]+=1)}for(q.index[0]=Q<.5?Z:Z+1,q.index[1]=ae<.5?se:se+1,q.uv[0]=re/H[0],q.uv[1]=oe/H[1],De=0;De<3;++De)q.dataCoordinate[De]=this._field[De].get(q.index[0],q.index[1]);return q},I.padField=function(U,H){var q=H.shape.slice(),re=U.shape.slice();s.assign(U.lo(1,1).hi(q[0],q[1]),H),s.assign(U.lo(1).hi(q[0],1),H.hi(q[0],1)),s.assign(U.lo(1,re[1]-1).hi(q[0],1),H.lo(0,q[1]-1).hi(q[0],1)),s.assign(U.lo(0,1).hi(1,q[1]),H.hi(1)),s.assign(U.lo(re[0]-1,1).hi(1,q[1]),H.lo(q[0]-1)),U.set(0,0,H.get(0,0)),U.set(0,re[1]-1,H.get(0,q[1]-1)),U.set(re[0]-1,0,H.get(q[0]-1,0)),U.set(re[0]-1,re[1]-1,H.get(q[0]-1,q[1]-1))};function ie(U,H){return Array.isArray(U)?[H(U[0]),H(U[1]),H(U[2])]:[H(U),H(U),H(U)]}function he(U){return Array.isArray(U)?U.length===3?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function K(U){if(Array.isArray(U)){if(Array.isArray(U))return[he(U[0]),he(U[1]),he(U[2])];var H=he(U);return[H.slice(),H.slice(),H.slice()]}}I.update=function(U){U=U||{},this.objectOffset=U.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in U&&(this.contourWidth=ie(U.contourWidth,Number)),"showContour"in U&&(this.showContour=ie(U.showContour,Boolean)),"showSurface"in U&&(this.showSurface=!!U.showSurface),"contourTint"in U&&(this.contourTint=ie(U.contourTint,Boolean)),"contourColor"in U&&(this.contourColor=K(U.contourColor)),"contourProject"in U&&(this.contourProject=ie(U.contourProject,function(ct){return ie(ct,Boolean)})),"surfaceProject"in U&&(this.surfaceProject=U.surfaceProject),"dynamicColor"in U&&(this.dynamicColor=K(U.dynamicColor)),"dynamicTint"in U&&(this.dynamicTint=ie(U.dynamicTint,Number)),"dynamicWidth"in U&&(this.dynamicWidth=ie(U.dynamicWidth,Number)),"opacity"in U&&(this.opacity=U.opacity),"opacityscale"in U&&(this.opacityscale=U.opacityscale),"colorBounds"in U&&(this.colorBounds=U.colorBounds),"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0),"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));var H=U.field||U.coords&&U.coords[2]||null,q=!1;if(H||(this._field[2].shape[0]||this._field[2].shape[2]?H=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):H=this._field[2].hi(0,0)),"field"in U||"coords"in U){var re=(H.shape[0]+2)*(H.shape[1]+2);re>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(re))),this._field[2]=b(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var Z=this.shape,Q=0;Q<2;++Q)this._field[2].size>this._field[Q].data.length&&(r.freeFloat(this._field[Q].data),this._field[Q].data=r.mallocFloat(this._field[2].size)),this._field[Q]=b(this._field[Q].data,[Z[0]+2,Z[1]+2]);if(U.coords){var oe=U.coords;if(!Array.isArray(oe)||oe.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Q=0;Q<2;++Q){var se=oe[Q];for(me=0;me<2;++me)if(se.shape[me]!==Z[me])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Q],se)}}else if(U.ticks){var ae=U.ticks;if(!Array.isArray(ae)||ae.length!==2)throw new Error("gl-surface: invalid ticks");for(Q=0;Q<2;++Q){var le=ae[Q];if((Array.isArray(le)||le.length)&&(le=b(le)),le.shape[0]!==Z[Q])throw new Error("gl-surface: invalid tick length");var _e=b(le.data,Z);_e.stride[Q]=le.stride[0],_e.stride[Q^1]=0,this.padField(this._field[Q],_e)}}else{for(Q=0;Q<2;++Q){var fe=[0,0];fe[Q]=1,this._field[Q]=b(this._field[Q].data,[Z[0]+2,Z[1]+2],fe,0)}this._field[0].set(0,0,0);for(var me=0;me<Z[0];++me)this._field[0].set(me+1,0,me);for(this._field[0].set(Z[0]+1,0,Z[0]-1),this._field[1].set(0,0,0),me=0;me<Z[1];++me)this._field[1].set(0,me+1,me);this._field[1].set(0,Z[1]+1,Z[1]-1)}var xe=this._field,ye=b(r.mallocFloat(xe[2].size*3*2),[3,Z[0]+2,Z[1]+2,2]);for(Q=0;Q<3;++Q)l(ye.pick(Q),xe[Q],"mirror");var be=b(r.mallocFloat(xe[2].size*3),[Z[0]+2,Z[1]+2,3]);for(Q=0;Q<Z[0]+2;++Q)for(me=0;me<Z[1]+2;++me){var ke=ye.get(0,Q,me,0),De=ye.get(0,Q,me,1),He=ye.get(1,Q,me,0),Ae=ye.get(1,Q,me,1),Le=ye.get(2,Q,me,0),Ze=ye.get(2,Q,me,1),We=He*Ze-Ae*Le,ze=Le*De-Ze*ke,Ie=ke*Ae-De*He,Ve=Math.sqrt(We*We+ze*ze+Ie*Ie);Ve<1e-8?(Ve=Math.max(Math.abs(We),Math.abs(ze),Math.abs(Ie)),Ve<1e-8?(Ie=1,ze=We=0,Ve=1):Ve=1/Ve):Ve=1/Math.sqrt(Ve),be.set(Q,me,0,We*Ve),be.set(Q,me,1,ze*Ve),be.set(Q,me,2,Ie*Ve)}r.free(ye.data);var dt=[1/0,1/0,1/0],Ft=[-1/0,-1/0,-1/0],Qt=1/0,Ot=-1/0,Ct=(Z[0]-1)*(Z[1]-1)*6,jt=r.mallocFloat(e.nextPow2(10*Ct)),Nt=0,Lt=0;for(Q=0;Q<Z[0]-1;++Q){e:for(me=0;me<Z[1]-1;++me){for(var Xe=0;Xe<2;++Xe)for(var it=0;it<2;++it)for(var Ye=0;Ye<3;++Ye){var Ee=this._field[Ye].get(1+Q+Xe,1+me+it);if(isNaN(Ee)||!isFinite(Ee))continue e}for(Ye=0;Ye<6;++Ye){var Ge=Q+L[Ye][0],Ke=me+L[Ye][1],qe=this._field[0].get(Ge+1,Ke+1),At=this._field[1].get(Ge+1,Ke+1);Ee=this._field[2].get(Ge+1,Ke+1),We=be.get(Ge+1,Ke+1,0),ze=be.get(Ge+1,Ke+1,1),Ie=be.get(Ge+1,Ke+1,2),U.intensity&&(yt=U.intensity.get(Ge,Ke));var yt=U.intensity?U.intensity.get(Ge,Ke):Ee+this.objectOffset[2];jt[Nt++]=Ge,jt[Nt++]=Ke,jt[Nt++]=qe,jt[Nt++]=At,jt[Nt++]=Ee,jt[Nt++]=0,jt[Nt++]=yt,jt[Nt++]=We,jt[Nt++]=ze,jt[Nt++]=Ie,dt[0]=Math.min(dt[0],qe+this.objectOffset[0]),dt[1]=Math.min(dt[1],At+this.objectOffset[1]),dt[2]=Math.min(dt[2],Ee+this.objectOffset[2]),Qt=Math.min(Qt,yt),Ft[0]=Math.max(Ft[0],qe+this.objectOffset[0]),Ft[1]=Math.max(Ft[1],At+this.objectOffset[1]),Ft[2]=Math.max(Ft[2],Ee+this.objectOffset[2]),Ot=Math.max(Ot,yt),Lt+=1}}}for(U.intensityBounds&&(Qt=+U.intensityBounds[0],Ot=+U.intensityBounds[1]),Q=6;Q<Nt;Q+=10)jt[Q]=(jt[Q]-Qt)/(Ot-Qt);this._vertexCount=Lt,this._coordinateBuffer.update(jt.subarray(0,Nt)),r.freeFloat(jt),r.free(be.data),this.bounds=[dt,Ft],this.intensity=U.intensity||this._field[2],(this.intensityBounds[0]!==Qt||this.intensityBounds[1]!==Ot)&&(q=!0),this.intensityBounds=[Qt,Ot]}if("levels"in U){var Mt=U.levels;for(Array.isArray(Mt[0])?Mt=Mt.slice():Mt=[[],[],Mt],Q=0;Q<3;++Q)Mt[Q]=Mt[Q].slice(),Mt[Q].sort(function(ct,pt){return ct-pt});for(Q=0;Q<3;++Q)for(me=0;me<Mt[Q].length;++me)Mt[Q][me]-=this.objectOffset[Q];e:for(Q=0;Q<3;++Q){if(Mt[Q].length!==this.contourLevels[Q].length){q=!0;break}for(me=0;me<Mt[Q].length;++me)if(Mt[Q][me]!==this.contourLevels[Q][me]){q=!0;break e}}this.contourLevels=Mt}if(q){xe=this._field,Z=this.shape;for(var Gt=[],zt=0;zt<3;++zt){var Ht=this.contourLevels[zt],Zt=[],Wt=[],sr=[0,0,0];for(Q=0;Q<Ht.length;++Q){var Gr=g(this._field[zt],Ht[Q]);Zt.push(Gt.length/5|0),Lt=0;e:for(me=0;me<Gr.cells.length;++me){var cn=Gr.cells[me];for(Ye=0;Ye<2;++Ye){var qr=Gr.positions[cn[Ye]],st=qr[0],rr=Math.floor(st)|0,Jt=st-rr,hr=qr[1],Sr=Math.floor(hr)|0,tt=hr-Sr,Qe=!1;t:for(var lt=0;lt<3;++lt){sr[lt]=0;var ft=(zt+lt+1)%3;for(Xe=0;Xe<2;++Xe){var Et=Xe?Jt:1-Jt;for(Ge=Math.min(Math.max(rr+Xe,0),Z[0])|0,it=0;it<2;++it){var Vt=it?tt:1-tt;if(Ke=Math.min(Math.max(Sr+it,0),Z[1])|0,lt<2?Ee=this._field[ft].get(Ge,Ke):Ee=(this.intensity.get(Ge,Ke)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ee)||isNaN(Ee)){Qe=!0;break t}var Pe=Et*Vt;sr[lt]+=Pe*Ee}}}if(!Qe)Gt.push(sr[0],sr[1],qr[0],qr[1],sr[2]),Lt+=1;else{if(Ye>0){for(var Se=0;Se<5;++Se)Gt.pop();Lt-=1}continue e}}}Wt.push(Lt)}this._contourOffsets[zt]=Zt,this._contourCounts[zt]=Wt}var ot=r.mallocFloat(Gt.length);for(Q=0;Q<Gt.length;++Q)ot[Q]=Gt[Q];this._contourBuffer.update(ot),r.freeFloat(ot)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var U=0;U<3;++U)r.freeFloat(this._field[U].data)},I.highlight=function(U){var H;if(!U){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(H=0;H<3;++H)this.enableHighlight[H]?this.highlightLevel[H]=U.level[H]:this.highlightLevel[H]=-1;var q;for(this.snapToData?q=U.dataCoordinate:q=U.position,H=0;H<3;++H)q[H]-=this.objectOffset[H];if(!((!this.enableDynamic[0]||q[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||q[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||q[2]===this.dynamicLevel[2]))){for(var re=0,Z=this.shape,Q=r.mallocFloat(12*Z[0]*Z[1]),oe=0;oe<3;++oe){if(!this.enableDynamic[oe]){this.dynamicLevel[oe]=NaN,this._dynamicCounts[oe]=0;continue}this.dynamicLevel[oe]=q[oe];var se=(oe+1)%3,ae=(oe+2)%3,le=this._field[oe],_e=this._field[se],fe=this._field[ae],me=g(le,q[oe]),xe=me.cells,ye=me.positions;for(this._dynamicOffsets[oe]=re,H=0;H<xe.length;++H)for(var be=xe[H],ke=0;ke<2;++ke){var De=ye[be[ke]],He=+De[0],Ae=He|0,Le=Math.min(Ae+1,Z[0])|0,Ze=He-Ae,We=1-Ze,ze=+De[1],Ie=ze|0,Ve=Math.min(Ie+1,Z[1])|0,dt=ze-Ie,Ft=1-dt,Qt=We*Ft,Ot=We*dt,Ct=Ze*Ft,jt=Ze*dt,Nt=Qt*_e.get(Ae,Ie)+Ot*_e.get(Ae,Ve)+Ct*_e.get(Le,Ie)+jt*_e.get(Le,Ve),Lt=Qt*fe.get(Ae,Ie)+Ot*fe.get(Ae,Ve)+Ct*fe.get(Le,Ie)+jt*fe.get(Le,Ve);if(isNaN(Nt)||isNaN(Lt)){ke&&(re-=1);break}Q[2*re+0]=Nt,Q[2*re+1]=Lt,re+=1}this._dynamicCounts[oe]=re-this._dynamicOffsets[oe]}this._dynamicBuffer.update(Q.subarray(0,2*re)),r.freeFloat(Q)}};function $(U){var H=U.gl,q=c(H),re=w(H),Z=M(H),Q=p(H),oe=a(H),se=i(H,[{buffer:oe,size:4,stride:_,offset:0},{buffer:oe,size:3,stride:_,offset:16},{buffer:oe,size:3,stride:_,offset:28}]),ae=a(H),le=i(H,[{buffer:ae,size:4,stride:20,offset:0},{buffer:ae,size:1,stride:20,offset:16}]),_e=a(H),fe=i(H,[{buffer:_e,size:2,type:H.FLOAT}]),me=n(H,1,P,H.RGBA,H.UNSIGNED_BYTE);me.minFilter=H.LINEAR,me.magFilter=H.LINEAR;var xe=new F(H,[0,0],[[0,0,0],[0,0,0]],q,re,oe,se,me,Z,Q,ae,le,_e,fe,[0,0,0]),ye={levels:[[],[],[]]};for(var be in U)ye[be]=U[be];return ye.colormap=ye.colormap||"jet",xe.update(ye),xe}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(u,A,T){var e=u("ndarray"),a=u("ndarray-ops"),i=u("typedarray-pool");A.exports=p;var n=null,r=null,v=null;function s(_){n=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],r=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],v=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function o(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var b=function(_,h){a.muls(_,h,255)};function g(_,h,L){var E=_.gl,S=E.getParameter(E.MAX_TEXTURE_SIZE);if(h<0||h>S||L<0||L>S)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[h,L],_.bind(),E.texImage2D(E.TEXTURE_2D,0,_.format,h,L,0,_.format,_.type,null),_._mipLevels=[0],_}function d(_,h,L,E,S,P){this.gl=_,this.handle=h,this.format=S,this.type=P,this._shape=[L,E],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return F._wrapS},set:function(R){return F.wrapS=R}},{get:function(){return F._wrapT},set:function(R){return F.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return F._shape[0]},set:function(R){return F.width=R}},{get:function(){return F._shape[1]},set:function(R){return F.height=R}}]),this._shapeVector=D}var f=d.prototype;Object.defineProperties(f,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&n.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var h=this.gl;if(this.type===h.FLOAT&&n.indexOf(_)>=0&&(h.getExtension("OES_texture_float_linear")||(_=h.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var h=this._anisoSamples;if(this._anisoSamples=Math.max(_,1)|0,h!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),v.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),v.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(v.indexOf(_[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(!Array.isArray(_))_=[_|0,_|0];else if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return g(this,_[0]|0,_[1]|0),[_[0]|0,_[1]|0]}},width:{get:function(){return this._shape[0]},set:function(_){return _=_|0,g(this,_,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _=_|0,g(this,this._shape[0],_),_}}}),f.bind=function(_){var h=this.gl;return _!==void 0&&h.activeTexture(h.TEXTURE0+(_|0)),h.bindTexture(h.TEXTURE_2D,this.handle),_!==void 0?_|0:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},f.dispose=function(){this.gl.deleteTexture(this.handle)},f.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),h=0;_>0;++h,_>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},f.setPixels=function(_,h,L,E){var S=this.gl;this.bind(),Array.isArray(h)?(E=L,L=h[1]|0,h=h[0]|0):(h=h||0,L=L||0),E=E||0;var P=o(_)?_:_.raw;if(P){var F=this._mipLevels.indexOf(E)<0;F?(S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(E)):S.texSubImage2D(S.TEXTURE_2D,E,h,L,this.format,this.type,P)}else if(_.shape&&_.stride&&_.data){if(_.shape.length<2||h+_.shape[1]>this._shape[1]>>>E||L+_.shape[0]>this._shape[0]>>>E||h<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");l(S,h,L,E,this.format,this.type,this._mipLevels,_)}else throw new Error("gl-texture2d: Unsupported data type")};function y(_,h){return _.length===3?h[2]===1&&h[1]===_[0]*_[2]&&h[0]===_[2]:h[0]===1&&h[1]===_[0]}function l(_,h,L,E,S,P,F,I){var D=I.dtype,R=I.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,z=0,G=y(R,I.stride.slice());if(D==="float32"?O=_.FLOAT:D==="float64"?(O=_.FLOAT,G=!1,D="float32"):D==="uint8"?O=_.UNSIGNED_BYTE:(O=_.UNSIGNED_BYTE,G=!1,D="uint8"),R.length===2)z=_.LUMINANCE,R=[R[0],R[1],1],I=e(I.data,R,[I.stride[0],I.stride[1],1],I.offset);else if(R.length===3){if(R[2]===1)z=_.ALPHA;else if(R[2]===2)z=_.LUMINANCE_ALPHA;else if(R[2]===3)z=_.RGB;else if(R[2]===4)z=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");R[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((z===_.LUMINANCE||z===_.ALPHA)&&(S===_.LUMINANCE||S===_.ALPHA)&&(z=S),z!==S)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Y=I.size,ee=F.indexOf(E)<0;if(ee&&F.push(E),O===P&&G)I.offset===0&&I.data.length===Y?ee?_.texImage2D(_.TEXTURE_2D,E,S,R[0],R[1],0,S,P,I.data):_.texSubImage2D(_.TEXTURE_2D,E,h,L,R[0],R[1],S,P,I.data):ee?_.texImage2D(_.TEXTURE_2D,E,S,R[0],R[1],0,S,P,I.data.subarray(I.offset,I.offset+Y)):_.texSubImage2D(_.TEXTURE_2D,E,h,L,R[0],R[1],S,P,I.data.subarray(I.offset,I.offset+Y));else{var j;P===_.FLOAT?j=i.mallocFloat32(Y):j=i.mallocUint8(Y);var X=e(j,R,[R[2],R[2]*R[0],1]);O===_.FLOAT&&P===_.UNSIGNED_BYTE?b(X,I):a.assign(X,I),ee?_.texImage2D(_.TEXTURE_2D,E,S,R[0],R[1],0,S,P,j.subarray(0,Y)):_.texSubImage2D(_.TEXTURE_2D,E,h,L,R[0],R[1],S,P,j.subarray(0,Y)),P===_.FLOAT?i.freeFloat32(j):i.freeUint8(j)}}function x(_){var h=_.createTexture();return _.bindTexture(_.TEXTURE_2D,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),h}function c(_,h,L,E,S){var P=_.getParameter(_.MAX_TEXTURE_SIZE);if(h<0||h>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(S===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=x(_);return _.texImage2D(_.TEXTURE_2D,0,E,h,L,0,E,S,null),new d(_,F,h,L,E,S)}function M(_,h,L,E,S,P){var F=x(_);return _.texImage2D(_.TEXTURE_2D,0,S,S,P,h),new d(_,F,L,E,S,P)}function w(_,h){var L=h.dtype,E=h.shape.slice(),S=_.getParameter(_.MAX_TEXTURE_SIZE);if(E[0]<0||E[0]>S||E[1]<0||E[1]>S)throw new Error("gl-texture2d: Invalid texture size");var P=y(E,h.stride.slice()),F=0;L==="float32"?F=_.FLOAT:L==="float64"?(F=_.FLOAT,P=!1,L="float32"):L==="uint8"?F=_.UNSIGNED_BYTE:(F=_.UNSIGNED_BYTE,P=!1,L="uint8");var I=0;if(E.length===2)I=_.LUMINANCE,E=[E[0],E[1],1],h=e(h.data,E,[h.stride[0],h.stride[1],1],h.offset);else if(E.length===3)if(E[2]===1)I=_.ALPHA;else if(E[2]===2)I=_.LUMINANCE_ALPHA;else if(E[2]===3)I=_.RGB;else if(E[2]===4)I=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");F===_.FLOAT&&!_.getExtension("OES_texture_float")&&(F=_.UNSIGNED_BYTE,P=!1);var D,R,O=h.size;if(P)h.offset===0&&h.data.length===O?D=h.data:D=h.data.subarray(h.offset,h.offset+O);else{var z=[E[2],E[2]*E[0],1];R=i.malloc(O,L);var G=e(R,E,z,0);(L==="float32"||L==="float64")&&F===_.UNSIGNED_BYTE?b(G,h):a.assign(G,h),D=R.subarray(0,O)}var Y=x(_);return _.texImage2D(_.TEXTURE_2D,0,I,E[0],E[1],0,I,F,D),P||i.free(R),new d(_,Y,E[0],E[1],I,F)}function p(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(n||s(_),typeof arguments[1]=="number")return c(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return c(_,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],L=o(h)?h:h.raw;if(L)return M(_,L,h.width|0,h.height|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return w(_,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(u,A,T){function e(a,i,n){i?i.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var r=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var v=0;v<n.length;++v){var s=n[v];if(s.buffer){var o=s.buffer,b=s.size||4,g=s.type||a.FLOAT,d=!!s.normalized,f=s.stride||0,y=s.offset||0;o.bind(),a.enableVertexAttribArray(v),a.vertexAttribPointer(v,b,g,d,f,y)}else{if(typeof s=="number")a.vertexAttrib1f(v,s);else if(s.length===1)a.vertexAttrib1f(v,s[0]);else if(s.length===2)a.vertexAttrib2f(v,s[0],s[1]);else if(s.length===3)a.vertexAttrib3f(v,s[0],s[1],s[2]);else if(s.length===4)a.vertexAttrib4f(v,s[0],s[1],s[2],s[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(v)}}for(;v<r;++v)a.disableVertexAttribArray(v)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var v=0;v<r;++v)a.disableVertexAttribArray(v)}}A.exports=e},{}],148:[function(u,A,T){var e=u("./do-bind.js");function a(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}a.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},a.prototype.update=function(n,r,v){this._elements=r,this._attributes=n,this._elementsType=v||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(n,r,v){v=v||0;var s=this.gl;this._elements?s.drawElements(n,r,this._elementsType,v):s.drawArrays(n,v,r)};function i(n){return new a(n)}A.exports=i},{"./do-bind.js":147}],149:[function(u,A,T){var e=u("./do-bind.js");function a(r,v,s,o,b,g){this.location=r,this.dimension=v,this.a=s,this.b=o,this.c=b,this.d=g}a.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function i(r,v,s){this.gl=r,this._ext=v,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(r,v,s){if(this.bind(),e(this.gl,v,r),this.unbind(),this._attribs.length=0,r)for(var o=0;o<r.length;++o){var b=r[o];typeof b=="number"?this._attribs.push(new a(o,1,b)):Array.isArray(b)&&this._attribs.push(new a(o,b.length,b[0],b[1],b[2],b[3]))}this._useElements=!!v,this._elementsType=s||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(r,v,s){s=s||0;var o=this.gl;this._useElements?o.drawElements(r,v,this._elementsType,s):o.drawArrays(r,s,v)};function n(r,v){return new i(r,v,v.createVertexArrayOES())}A.exports=n},{"./do-bind.js":147}],150:[function(u,A,T){var e=u("./lib/vao-native.js"),a=u("./lib/vao-emulated.js");function i(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}function n(r,v,s,o){var b=r.createVertexArray?new i(r):r.getExtension("OES_vertex_array_object"),g;return b?g=e(r,b):g=a(r),g.update(v,s,o),g}A.exports=n},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a}},{}],152:[function(u,A,T){A.exports=n;var e=u("./fromValues"),a=u("./normalize"),i=u("./dot");function n(r,v){var s=e(r[0],r[1],r[2]),o=e(v[0],v[1],v[2]);a(s,s),a(o,o);var b=i(s,o);return b>1?0:Math.acos(b)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=Math.ceil(i[0]),a[1]=Math.ceil(i[1]),a[2]=Math.ceil(i[2]),a}},{}],154:[function(u,A,T){A.exports=e;function e(a){var i=new Float32Array(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}},{}],155:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a}},{}],156:[function(u,A,T){A.exports=e;function e(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2];return a[0]=v*g-s*b,a[1]=s*o-r*g,a[2]=r*b-v*o,a}},{}],158:[function(u,A,T){A.exports=u("./distance")},{"./distance":159}],159:[function(u,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2];return Math.sqrt(n*n+r*r+v*v)}},{}],160:[function(u,A,T){A.exports=u("./divide")},{"./divide":161}],161:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a}},{}],162:[function(u,A,T){A.exports=e;function e(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}},{}],163:[function(u,A,T){A.exports=1e-6},{}],164:[function(u,A,T){A.exports=a;var e=u("./epsilon");function a(i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2];return Math.abs(r-o)<=e*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(v-b)<=e*Math.max(1,Math.abs(v),Math.abs(b))&&Math.abs(s-g)<=e*Math.max(1,Math.abs(s),Math.abs(g))}},{"./epsilon":163}],165:[function(u,A,T){A.exports=e;function e(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]}},{}],166:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=Math.floor(i[0]),a[1]=Math.floor(i[1]),a[2]=Math.floor(i[2]),a}},{}],167:[function(u,A,T){A.exports=a;var e=u("./create")();function a(i,n,r,v,s,o){var b,g;for(n||(n=3),r||(r=0),v?g=Math.min(v*n+r,i.length):g=i.length,b=r;b<g;b+=n)e[0]=i[b],e[1]=i[b+1],e[2]=i[b+2],s(e,e,o),i[b]=e[0],i[b+1]=e[1],i[b+2]=e[2];return i}},{"./create":156}],168:[function(u,A,T){A.exports=e;function e(a,i,n){var r=new Float32Array(3);return r[0]=a,r[1]=i,r[2]=n,r}},{}],169:[function(u,A,T){A.exports={EPSILON:u("./epsilon"),create:u("./create"),clone:u("./clone"),angle:u("./angle"),fromValues:u("./fromValues"),copy:u("./copy"),set:u("./set"),equals:u("./equals"),exactEquals:u("./exactEquals"),add:u("./add"),subtract:u("./subtract"),sub:u("./sub"),multiply:u("./multiply"),mul:u("./mul"),divide:u("./divide"),div:u("./div"),min:u("./min"),max:u("./max"),floor:u("./floor"),ceil:u("./ceil"),round:u("./round"),scale:u("./scale"),scaleAndAdd:u("./scaleAndAdd"),distance:u("./distance"),dist:u("./dist"),squaredDistance:u("./squaredDistance"),sqrDist:u("./sqrDist"),length:u("./length"),len:u("./len"),squaredLength:u("./squaredLength"),sqrLen:u("./sqrLen"),negate:u("./negate"),inverse:u("./inverse"),normalize:u("./normalize"),dot:u("./dot"),cross:u("./cross"),lerp:u("./lerp"),random:u("./random"),transformMat4:u("./transformMat4"),transformMat3:u("./transformMat3"),transformQuat:u("./transformQuat"),rotateX:u("./rotateX"),rotateY:u("./rotateY"),rotateZ:u("./rotateZ"),forEach:u("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a}},{}],171:[function(u,A,T){A.exports=u("./length")},{"./length":172}],172:[function(u,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2];return Math.sqrt(i*i+n*n+r*r)}},{}],173:[function(u,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2];return a[0]=v+r*(n[0]-v),a[1]=s+r*(n[1]-s),a[2]=o+r*(n[2]-o),a}},{}],174:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a}},{}],175:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a}},{}],176:[function(u,A,T){A.exports=u("./multiply")},{"./multiply":177}],177:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a}},{}],178:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a}},{}],179:[function(u,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=n*n+r*r+v*v;return s>0&&(s=1/Math.sqrt(s),a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s),a}},{}],180:[function(u,A,T){A.exports=e;function e(a,i){i=i||1;var n=Math.random()*2*Math.PI,r=Math.random()*2-1,v=Math.sqrt(1-r*r)*i;return a[0]=Math.cos(n)*v,a[1]=Math.sin(n)*v,a[2]=r*i,a}},{}],181:[function(u,A,T){A.exports=e;function e(a,i,n,r){var v=n[1],s=n[2],o=i[1]-v,b=i[2]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=i[0],a[1]=v+o*d-b*g,a[2]=s+o*g+b*d,a}},{}],182:[function(u,A,T){A.exports=e;function e(a,i,n,r){var v=n[0],s=n[2],o=i[0]-v,b=i[2]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=v+b*g+o*d,a[1]=i[1],a[2]=s+b*d-o*g,a}},{}],183:[function(u,A,T){A.exports=e;function e(a,i,n,r){var v=n[0],s=n[1],o=i[0]-v,b=i[1]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=v+o*d-b*g,a[1]=s+o*g+b*d,a[2]=i[2],a}},{}],184:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=Math.round(i[0]),a[1]=Math.round(i[1]),a[2]=Math.round(i[2]),a}},{}],185:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a}},{}],186:[function(u,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a}},{}],187:[function(u,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i,a[1]=n,a[2]=r,a}},{}],188:[function(u,A,T){A.exports=u("./squaredDistance")},{"./squaredDistance":190}],189:[function(u,A,T){A.exports=u("./squaredLength")},{"./squaredLength":191}],190:[function(u,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2];return n*n+r*r+v*v}},{}],191:[function(u,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2];return i*i+n*n+r*r}},{}],192:[function(u,A,T){A.exports=u("./subtract")},{"./subtract":193}],193:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a}},{}],194:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2];return a[0]=r*n[0]+v*n[3]+s*n[6],a[1]=r*n[1]+v*n[4]+s*n[7],a[2]=r*n[2]+v*n[5]+s*n[8],a}},{}],195:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[3]*r+n[7]*v+n[11]*s+n[15];return o=o||1,a[0]=(n[0]*r+n[4]*v+n[8]*s+n[12])/o,a[1]=(n[1]*r+n[5]*v+n[9]*s+n[13])/o,a[2]=(n[2]*r+n[6]*v+n[10]*s+n[14])/o,a}},{}],196:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2],d=n[3],f=d*r+b*s-g*v,y=d*v+g*r-o*s,l=d*s+o*v-b*r,x=-o*r-b*v-g*s;return a[0]=f*d+x*-o+y*-g-l*-b,a[1]=y*d+x*-b+l*-o-f*-g,a[2]=l*d+x*-g+f*-b-y*-o,a}},{}],197:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a[3]=i[3]+n[3],a}},{}],198:[function(u,A,T){A.exports=e;function e(a){var i=new Float32Array(4);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i}},{}],199:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a}},{}],200:[function(u,A,T){A.exports=e;function e(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(u,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2],s=i[3]-a[3];return Math.sqrt(n*n+r*r+v*v+s*s)}},{}],202:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a[3]=i[3]/n[3],a}},{}],203:[function(u,A,T){A.exports=e;function e(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]}},{}],204:[function(u,A,T){A.exports=e;function e(a,i,n,r){var v=new Float32Array(4);return v[0]=a,v[1]=i,v[2]=n,v[3]=r,v}},{}],205:[function(u,A,T){A.exports={create:u("./create"),clone:u("./clone"),fromValues:u("./fromValues"),copy:u("./copy"),set:u("./set"),add:u("./add"),subtract:u("./subtract"),multiply:u("./multiply"),divide:u("./divide"),min:u("./min"),max:u("./max"),scale:u("./scale"),scaleAndAdd:u("./scaleAndAdd"),distance:u("./distance"),squaredDistance:u("./squaredDistance"),length:u("./length"),squaredLength:u("./squaredLength"),negate:u("./negate"),inverse:u("./inverse"),normalize:u("./normalize"),dot:u("./dot"),lerp:u("./lerp"),random:u("./random"),transformMat4:u("./transformMat4"),transformQuat:u("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a[3]=1/i[3],a}},{}],207:[function(u,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3];return Math.sqrt(i*i+n*n+r*r+v*v)}},{}],208:[function(u,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2],b=i[3];return a[0]=v+r*(n[0]-v),a[1]=s+r*(n[1]-s),a[2]=o+r*(n[2]-o),a[3]=b+r*(n[3]-b),a}},{}],209:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a[3]=Math.max(i[3],n[3]),a}},{}],210:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a[3]=Math.min(i[3],n[3]),a}},{}],211:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a[3]=i[3]*n[3],a}},{}],212:[function(u,A,T){A.exports=e;function e(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=-i[3],a}},{}],213:[function(u,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=n*n+r*r+v*v+s*s;return o>0&&(o=1/Math.sqrt(o),a[0]=n*o,a[1]=r*o,a[2]=v*o,a[3]=s*o),a}},{}],214:[function(u,A,T){var e=u("./normalize"),a=u("./scale");A.exports=i;function i(n,r){return r=r||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),e(n,n),a(n,n,r),n}},{"./normalize":213,"./scale":215}],215:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a[3]=i[3]*n,a}},{}],216:[function(u,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a[3]=i[3]+n[3]*r,a}},{}],217:[function(u,A,T){A.exports=e;function e(a,i,n,r,v){return a[0]=i,a[1]=n,a[2]=r,a[3]=v,a}},{}],218:[function(u,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2],s=i[3]-a[3];return n*n+r*r+v*v+s*s}},{}],219:[function(u,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3];return i*i+n*n+r*r+v*v}},{}],220:[function(u,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a[3]=i[3]-n[3],a}},{}],221:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3];return a[0]=n[0]*r+n[4]*v+n[8]*s+n[12]*o,a[1]=n[1]*r+n[5]*v+n[9]*s+n[13]*o,a[2]=n[2]*r+n[6]*v+n[10]*s+n[14]*o,a[3]=n[3]*r+n[7]*v+n[11]*s+n[15]*o,a}},{}],222:[function(u,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2],d=n[3],f=d*r+b*s-g*v,y=d*v+g*r-o*s,l=d*s+o*v-b*r,x=-o*r-b*v-g*s;return a[0]=f*d+x*-o+y*-g-l*-b,a[1]=y*d+x*-b+l*-o-f*-g,a[2]=l*d+x*-g+f*-b-y*-o,a[3]=i[3],a}},{}],223:[function(u,A,T){var e=u("glsl-tokenizer"),a=u("atob-lite");A.exports=i;function i(n){for(var r=Array.isArray(n)?n:e(n),v=0;v<r.length;v++){var s=r[v];if(s.type==="preprocessor"){var o=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var b=o[1],g=o[2];return(b?a(g):g).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(u,A,T){A.exports=h;var e=u("./lib/literals"),a=u("./lib/operators"),i=u("./lib/builtins"),n=u("./lib/literals-300es"),r=u("./lib/builtins-300es"),v=999,s=9999,o=0,b=1,g=2,d=3,f=4,y=5,l=6,x=7,c=8,M=9,w=10,p=11,_=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function h(L){var E=0,S=0,P=v,F,I,D=[],R=[],O=1,z=0,G=0,Y=!1,ee=!1,j="",X;L=L||{};var ie=i,he=e;L.version==="300 es"&&(ie=r,he=n);for(var K={},$={},E=0;E<ie.length;E++)K[ie[E]]=!0;for(var E=0;E<he.length;E++)$[he[E]]=!0;return function(ye){return R=[],ye!==null?H(ye):q()};function U(ye){ye.length&&R.push({type:_[P],data:ye,position:G,line:O,column:z})}function H(ye){E=0,ye.toString&&(ye=ye.toString()),j+=ye.replace(/\r\n/g,`
`),X=j.length;for(var be;F=j[E],E<X;){switch(be=E,P){case o:E=se();break;case b:E=oe();break;case g:E=Q();break;case d:E=ae();break;case f:E=fe();break;case p:E=_e();break;case y:E=me();break;case s:E=xe();break;case M:E=Z();break;case v:E=re();break}if(be!==E)switch(j[be]){case`
`:z=0,++O;break;default:++z;break}}return S+=E,j=j.slice(E),R}function q(ye){return D.length&&U(D.join("")),P=w,U("(eof)"),R}function re(){return D=D.length?[]:D,I==="/"&&F==="*"?(G=S+E-1,P=o,I=F,E+1):I==="/"&&F==="/"?(G=S+E-1,P=b,I=F,E+1):F==="#"?(P=g,G=S+E,E):/\s/.test(F)?(P=M,G=S+E,E):(Y=/\d/.test(F),ee=/[^\w_]/.test(F),G=S+E,P=Y?f:ee?d:s,E)}function Z(){return/[^\s]/g.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function Q(){return(F==="\r"||F===`
`)&&I!=="\\"?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function oe(){return Q()}function se(){return F==="/"&&I==="*"?(D.push(F),U(D.join("")),P=v,E+1):(D.push(F),I=F,E+1)}function ae(){if(I==="."&&/\d/.test(F))return P=y,E;if(I==="/"&&F==="*")return P=o,E;if(I==="/"&&F==="/")return P=b,E;if(F==="."&&D.length){for(;le(D););return P=y,E}if(F===";"||F===")"||F==="("){if(D.length)for(;le(D););return U(F),P=v,E+1}var ye=D.length===2&&F!=="=";if(/[\w_\d\s]/.test(F)||ye){for(;le(D););return P=v,E}return D.push(F),I=F,E+1}function le(ye){var be=0,ke,De;do{if(ke=a.indexOf(ye.slice(0,ye.length+be).join("")),De=a[ke],ke===-1){if(be--+ye.length>0)continue;De=ye.slice(0,1).join("")}return U(De),G+=De.length,D=D.slice(De.length),D.length}while(1)}function _e(){return/[^a-fA-F0-9]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function fe(){return F==="."||/[eE]/.test(F)?(D.push(F),P=y,I=F,E+1):F==="x"&&D.length===1&&D[0]==="0"?(P=p,D.push(F),I=F,E+1):/[^\d]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function me(){return F==="f"&&(D.push(F),I=F,E+=1),/[eE]/.test(F)||(F==="-"||F==="+")&&/[eE]/.test(I)?(D.push(F),I=F,E+1):/[^\d]/.test(F)?(U(D.join("")),P=v,E):(D.push(F),I=F,E+1)}function xe(){if(/[^\d\w_]/.test(F)){var ye=D.join("");return $[ye]?P=c:K[ye]?P=x:P=l,U(D.join("")),P=v,E}return D.push(F),I=F,E+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(u,A,T){var e=u("./builtins");e=e.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),A.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(u,A,T){A.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(u,A,T){var e=u("./literals");A.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(u,A,T){A.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(u,A,T){A.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(u,A,T){var e=u("./index");A.exports=a;function a(i,n){var r=e(n),v=[];return v=v.concat(r(i)),v=v.concat(r(null)),v}},{"./index":224}],231:[function(u,A,T){A.exports=function(e){typeof e=="string"&&(e=[e]);for(var a=[].slice.call(arguments,1),i=[],n=0;n<e.length-1;n++)i.push(e[n],a[n]||"");return i.push(e[n]),i.join("")}},{}],232:[function(u,A,T){var e=u("is-browser");function a(){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{i=!1}return i}A.exports=e&&a()},{"is-browser":236}],233:[function(u,A,T){A.exports=d;var e=u("robust-orientation"),a=u("simplicial-complex").compareCells;function i(f,y,l){this.vertices=f,this.adjacent=y,this.boundary=l,this.lastVisited=-1}i.prototype.flip=function(){var f=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=f;var y=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=y};function n(f,y,l){this.vertices=f,this.cell=y,this.index=l}function r(f,y){return a(f.vertices,y.vertices)}function v(f){return function(){var y=this.tuple;return f.apply(this,y)}}function s(f){var y=e[f+1];return y||(y=e),v(y)}var o=[];function b(f,y,l){this.dimension=f,this.vertices=y,this.simplices=l,this.interior=l.filter(function(M){return!M.boundary}),this.tuple=new Array(f+1);for(var x=0;x<=f;++x)this.tuple[x]=this.vertices[x];var c=o[f];c||(c=o[f]=s(f)),this.orient=c}var g=b.prototype;g.handleBoundaryDegeneracy=function(f,y){var l=this.dimension,x=this.vertices.length-1,c=this.tuple,M=this.vertices,w=[f];for(f.lastVisited=-x;w.length>0;){f=w.pop();for(var p=f.adjacent,_=0;_<=l;++_){var h=p[_];if(!(!h.boundary||h.lastVisited<=-x)){for(var L=h.vertices,E=0;E<=l;++E){var S=L[E];S<0?c[E]=y:c[E]=M[S]}var P=this.orient();if(P>0)return h;h.lastVisited=-x,P===0&&w.push(h)}}}return null},g.walk=function(f,y){var l=this.vertices.length-1,x=this.dimension,c=this.vertices,M=this.tuple,w=y?this.interior.length*Math.random()|0:this.interior.length-1,p=this.interior[w];e:for(;!p.boundary;){for(var _=p.vertices,h=p.adjacent,L=0;L<=x;++L)M[L]=c[_[L]];p.lastVisited=l;for(var L=0;L<=x;++L){var E=h[L];if(!(E.lastVisited>=l)){var S=M[L];M[L]=f;var P=this.orient();if(M[L]=S,P<0){p=E;continue e}else E.boundary?E.lastVisited=-l:E.lastVisited=l}}return}return p},g.addPeaks=function(f,y){var l=this.vertices.length-1,x=this.dimension,c=this.vertices,M=this.tuple,w=this.interior,p=this.simplices,_=[y];y.lastVisited=l,y.vertices[y.vertices.indexOf(-1)]=l,y.boundary=!1,w.push(y);for(var h=[];_.length>0;){var y=_.pop(),L=y.vertices,E=y.adjacent,S=L.indexOf(l);if(!(S<0)){for(var P=0;P<=x;++P)if(P!==S){var F=E[P];if(!(!F.boundary||F.lastVisited>=l)){var I=F.vertices;if(F.lastVisited!==-l){for(var D=0,R=0;R<=x;++R)I[R]<0?(D=R,M[R]=f):M[R]=c[I[R]];var O=this.orient();if(O>0){I[D]=l,F.boundary=!1,w.push(F),_.push(F),F.lastVisited=l;continue}else F.lastVisited=-l}var z=F.adjacent,G=L.slice(),Y=E.slice(),ee=new i(G,Y,!0);p.push(ee);var j=z.indexOf(y);if(!(j<0)){z[j]=ee,Y[S]=F,G[P]=-1,Y[P]=y,E[P]=ee,ee.flip();for(var R=0;R<=x;++R){var X=G[R];if(!(X<0||X===l)){for(var ie=new Array(x-1),he=0,K=0;K<=x;++K){var $=G[K];$<0||K===R||(ie[he++]=$)}h.push(new n(ie,ee,R))}}}}}}}h.sort(r);for(var P=0;P+1<h.length;P+=2){var U=h[P],H=h[P+1],q=U.index,re=H.index;q<0||re<0||(U.cell.adjacent[U.index]=H.cell,H.cell.adjacent[H.index]=U.cell)}},g.insert=function(f,y){var l=this.vertices;l.push(f);var x=this.walk(f,y);if(!!x){for(var c=this.dimension,M=this.tuple,w=0;w<=c;++w){var p=x.vertices[w];p<0?M[w]=f:M[w]=l[p]}var _=this.orient(M);_<0||_===0&&(x=this.handleBoundaryDegeneracy(x,f),!x)||this.addPeaks(f,x)}},g.boundary=function(){for(var f=this.dimension,y=[],l=this.simplices,x=l.length,c=0;c<x;++c){var M=l[c];if(M.boundary){for(var w=new Array(f),p=M.vertices,_=0,h=0,L=0;L<=f;++L)p[L]>=0?w[_++]=p[L]:h=L&1;if(h===(f&1)){var E=w[0];w[0]=w[1],w[1]=E}y.push(w)}}return y};function d(f,y){var l=f.length;if(l===0)throw new Error("Must have at least d+1 points");var x=f[0].length;if(l<=x)throw new Error("Must input at least d+1 points");var c=f.slice(0,x+1),M=e.apply(void 0,c);if(M===0)throw new Error("Input not in general position");for(var w=new Array(x+1),p=0;p<=x;++p)w[p]=p;M<0&&(w[0]=1,w[1]=0);for(var _=new i(w,new Array(x+1),!1),h=_.adjacent,L=new Array(x+2),p=0;p<=x;++p){for(var E=w.slice(),S=0;S<=x;++S)S===p&&(E[S]=-1);var P=E[0];E[0]=E[1],E[1]=P;var F=new i(E,new Array(x+1),!0);h[p]=F,L[p]=F}L[x+1]=_;for(var p=0;p<=x;++p)for(var E=h[p].vertices,I=h[p].adjacent,S=0;S<=x;++S){var D=E[S];if(D<0){I[S]=_;continue}for(var R=0;R<=x;++R)h[R].vertices.indexOf(D)<0&&(I[S]=h[R])}for(var O=new b(x,c,L),z=!!y,p=x+1;p<l;++p)O.insert(f[p],z);return O.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(u,A,T){var e=u("binary-search-bounds"),a=0,i=1,n=2;A.exports=_;function r(h,L,E,S,P){this.mid=h,this.left=L,this.right=E,this.leftPoints=S,this.rightPoints=P,this.count=(L?L.count:0)+(E?E.count:0)+S.length}var v=r.prototype;function s(h,L){h.mid=L.mid,h.left=L.left,h.right=L.right,h.leftPoints=L.leftPoints,h.rightPoints=L.rightPoints,h.count=L.count}function o(h,L){var E=M(L);h.mid=E.mid,h.left=E.left,h.right=E.right,h.leftPoints=E.leftPoints,h.rightPoints=E.rightPoints,h.count=E.count}function b(h,L){var E=h.intervals([]);E.push(L),o(h,E)}function g(h,L){var E=h.intervals([]),S=E.indexOf(L);return S<0?a:(E.splice(S,1),o(h,E),i)}v.intervals=function(h){return h.push.apply(h,this.leftPoints),this.left&&this.left.intervals(h),this.right&&this.right.intervals(h),h},v.insert=function(h){var L=this.count-this.leftPoints.length;if(this.count+=1,h[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?b(this,h):this.left.insert(h):this.left=M([h]);else if(h[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?b(this,h):this.right.insert(h):this.right=M([h]);else{var E=e.ge(this.leftPoints,h,x),S=e.ge(this.rightPoints,h,c);this.leftPoints.splice(E,0,h),this.rightPoints.splice(S,0,h)}},v.remove=function(h){var L=this.count-this.leftPoints;if(h[1]<this.mid){if(!this.left)return a;var E=this.right?this.right.count:0;if(4*E>3*(L-1))return g(this,h);var S=this.left.remove(h);return S===n?(this.left=null,this.count-=1,i):(S===i&&(this.count-=1),S)}else if(h[0]>this.mid){if(!this.right)return a;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return g(this,h);var S=this.right.remove(h);return S===n?(this.right=null,this.count-=1,i):(S===i&&(this.count-=1),S)}else{if(this.count===1)return this.leftPoints[0]===h?n:a;if(this.leftPoints.length===1&&this.leftPoints[0]===h){if(this.left&&this.right){for(var F=this,I=this.left;I.right;)F=I,I=I.right;if(F===this)I.right=this.right;else{var D=this.left,S=this.right;F.count-=I.count,F.right=I.left,I.left=D,I.right=S}s(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return i}for(var D=e.ge(this.leftPoints,h,x);D<this.leftPoints.length&&this.leftPoints[D][0]===h[0];++D)if(this.leftPoints[D]===h){this.count-=1,this.leftPoints.splice(D,1);for(var S=e.ge(this.rightPoints,h,c);S<this.rightPoints.length&&this.rightPoints[S][1]===h[1];++S)if(this.rightPoints[S]===h)return this.rightPoints.splice(S,1),i}return a}};function d(h,L,E){for(var S=0;S<h.length&&h[S][0]<=L;++S){var P=E(h[S]);if(P)return P}}function f(h,L,E){for(var S=h.length-1;S>=0&&h[S][1]>=L;--S){var P=E(h[S]);if(P)return P}}function y(h,L){for(var E=0;E<h.length;++E){var S=L(h[E]);if(S)return S}}v.queryPoint=function(h,L){if(h<this.mid){if(this.left){var E=this.left.queryPoint(h,L);if(E)return E}return d(this.leftPoints,h,L)}else if(h>this.mid){if(this.right){var E=this.right.queryPoint(h,L);if(E)return E}return f(this.rightPoints,h,L)}else return y(this.leftPoints,L)},v.queryInterval=function(h,L,E){if(h<this.mid&&this.left){var S=this.left.queryInterval(h,L,E);if(S)return S}if(L>this.mid&&this.right){var S=this.right.queryInterval(h,L,E);if(S)return S}return L<this.mid?d(this.leftPoints,L,E):h>this.mid?f(this.rightPoints,h,E):y(this.leftPoints,E)};function l(h,L){return h-L}function x(h,L){var E=h[0]-L[0];return E||h[1]-L[1]}function c(h,L){var E=h[1]-L[1];return E||h[0]-L[0]}function M(h){if(h.length===0)return null;for(var L=[],E=0;E<h.length;++E)L.push(h[E][0],h[E][1]);L.sort(l);for(var S=L[L.length>>1],P=[],F=[],I=[],E=0;E<h.length;++E){var D=h[E];D[1]<S?P.push(D):S<D[0]?F.push(D):I.push(D)}var R=I,O=I.slice();return R.sort(x),O.sort(c),new r(S,M(P),M(F),R,O)}function w(h){this.root=h}var p=w.prototype;p.insert=function(h){this.root?this.root.insert(h):this.root=new r(h[0],null,null,[h],[h])},p.remove=function(h){if(this.root){var L=this.root.remove(h);return L===n&&(this.root=null),L!==a}return!1},p.queryPoint=function(h,L){if(this.root)return this.root.queryPoint(h,L)},p.queryInterval=function(h,L,E){if(h<=L&&this.root)return this.root.queryInterval(h,L,E)},Object.defineProperty(p,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(p,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function _(h){return!h||h.length===0?new w(null):new w(M(h))}},{"binary-search-bounds":31}],235:[function(u,A,T){function e(a){for(var i=new Array(a),n=0;n<a;++n)i[n]=n;return i}A.exports=e},{}],236:[function(u,A,T){A.exports=!0},{}],237:[function(u,A,T){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */A.exports=function(i){return i!=null&&(e(i)||a(i)||!!i._isBuffer)};function e(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function a(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&e(i.slice(0,0))}},{}],238:[function(u,A,T){A.exports=i,A.exports.isMobile=i,A.exports.default=i;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(n){n||(n={});var r=n.ua;if(!r&&typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var v=n.tablet?a.test(r):e.test(r);return!v&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(v=!0),v}},{}],239:[function(u,A,T){A.exports=function(e){for(var a=e.length,i,n=0;n<a;n++)if(i=e.charCodeAt(n),(i<9||i>13)&&i!==32&&i!==133&&i!==160&&i!==5760&&i!==6158&&(i<8192||i>8205)&&i!==8232&&i!==8233&&i!==8239&&i!==8287&&i!==8288&&i!==12288&&i!==65279)return!1;return!0}},{}],240:[function(u,A,T){function e(a,i,n){return a*(1-n)+i*n}A.exports=e},{}],241:[function(u,A,T){var e=u("./normalize"),a=u("gl-mat4/create"),i=u("gl-mat4/clone"),n=u("gl-mat4/determinant"),r=u("gl-mat4/invert"),v=u("gl-mat4/transpose"),s={length:u("gl-vec3/length"),normalize:u("gl-vec3/normalize"),dot:u("gl-vec3/dot"),cross:u("gl-vec3/cross")},o=a(),b=a(),g=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];A.exports=function(M,w,p,_,h,L){if(w||(w=[0,0,0]),p||(p=[0,0,0]),_||(_=[0,0,0]),h||(h=[0,0,0,1]),L||(L=[0,0,0,1]),!e(o,M)||(i(b,o),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(n(b)<1e-8)))return!1;var E=o[3],S=o[7],P=o[11],F=o[12],I=o[13],D=o[14],R=o[15];if(E!==0||S!==0||P!==0){g[0]=E,g[1]=S,g[2]=P,g[3]=R;var O=r(b,b);if(!O)return!1;v(b,b),y(h,g,b)}else h[0]=h[1]=h[2]=0,h[3]=1;if(w[0]=F,w[1]=I,w[2]=D,l(d,o),p[0]=s.length(d[0]),s.normalize(d[0],d[0]),_[0]=s.dot(d[0],d[1]),x(d[1],d[1],d[0],1,-_[0]),p[1]=s.length(d[1]),s.normalize(d[1],d[1]),_[0]/=p[1],_[1]=s.dot(d[0],d[2]),x(d[2],d[2],d[0],1,-_[1]),_[2]=s.dot(d[1],d[2]),x(d[2],d[2],d[1],1,-_[2]),p[2]=s.length(d[2]),s.normalize(d[2],d[2]),_[1]/=p[2],_[2]/=p[2],s.cross(f,d[1],d[2]),s.dot(d[0],f)<0)for(var z=0;z<3;z++)p[z]*=-1,d[z][0]*=-1,d[z][1]*=-1,d[z][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(L[0]=-L[0]),d[0][2]>d[2][0]&&(L[1]=-L[1]),d[1][0]>d[0][1]&&(L[2]=-L[2]),!0};function y(c,M,w){var p=M[0],_=M[1],h=M[2],L=M[3];return c[0]=w[0]*p+w[4]*_+w[8]*h+w[12]*L,c[1]=w[1]*p+w[5]*_+w[9]*h+w[13]*L,c[2]=w[2]*p+w[6]*_+w[10]*h+w[14]*L,c[3]=w[3]*p+w[7]*_+w[11]*h+w[15]*L,c}function l(c,M){c[0][0]=M[0],c[0][1]=M[1],c[0][2]=M[2],c[1][0]=M[4],c[1][1]=M[5],c[1][2]=M[6],c[2][0]=M[8],c[2][1]=M[9],c[2][2]=M[10]}function x(c,M,w,p,_){c[0]=M[0]*p+w[0]*_,c[1]=M[1]*p+w[1]*_,c[2]=M[2]*p+w[2]*_}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(u,A,T){A.exports=function(a,i){var n=i[15];if(n===0)return!1;for(var r=1/n,v=0;v<16;v++)a[v]=i[v]*r;return!0}},{}],243:[function(u,A,T){var e=u("gl-vec3/lerp"),a=u("mat4-recompose"),i=u("mat4-decompose"),n=u("gl-mat4/determinant"),r=u("quat-slerp"),v=g(),s=g(),o=g();A.exports=b;function b(y,l,x,c){if(n(l)===0||n(x)===0)return!1;var M=i(l,v.translate,v.scale,v.skew,v.perspective,v.quaternion),w=i(x,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!M||!w?!1:(e(o.translate,v.translate,s.translate,c),e(o.skew,v.skew,s.skew,c),e(o.scale,v.scale,s.scale,c),e(o.perspective,v.perspective,s.perspective,c),r(o.quaternion,v.quaternion,s.quaternion,c),a(y,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function g(){return{translate:d(),scale:d(1),skew:d(),perspective:f(),quaternion:f()}}function d(y){return[y||0,y||0,y||0]}function f(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(u,A,T){var e={identity:u("gl-mat4/identity"),translate:u("gl-mat4/translate"),multiply:u("gl-mat4/multiply"),create:u("gl-mat4/create"),scale:u("gl-mat4/scale"),fromRotationTranslation:u("gl-mat4/fromRotationTranslation")};e.create();var a=e.create();A.exports=function(n,r,v,s,o,b){return e.identity(n),e.fromRotationTranslation(n,b,r),n[3]=o[0],n[7]=o[1],n[11]=o[2],n[15]=o[3],e.identity(a),s[2]!==0&&(a[9]=s[2],e.multiply(n,n,a)),s[1]!==0&&(a[9]=0,a[8]=s[1],e.multiply(n,n,a)),s[0]!==0&&(a[8]=0,a[4]=s[0],e.multiply(n,n,a)),e.scale(n,n,v),n}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(u,A,T){var e=u("binary-search-bounds"),a=u("mat4-interpolate"),i=u("gl-mat4/invert"),n=u("gl-mat4/rotateX"),r=u("gl-mat4/rotateY"),v=u("gl-mat4/rotateZ"),s=u("gl-mat4/lookAt"),o=u("gl-mat4/translate");u("gl-mat4/scale");var b=u("gl-vec3/normalize"),g=[0,0,0];A.exports=l;function d(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var f=d.prototype;f.recalcMatrix=function(x){var c=this._time,M=e.le(c,x),w=this.computedMatrix;if(!(M<0)){var p=this._components;if(M===c.length-1)for(var _=16*M,h=0;h<16;++h)w[h]=p[_++];else{for(var L=c[M+1]-c[M],_=16*M,E=this.prevMatrix,S=!0,h=0;h<16;++h)E[h]=p[_++];for(var P=this.nextMatrix,h=0;h<16;++h)P[h]=p[_++],S=S&&E[h]===P[h];if(L<1e-6||S)for(var h=0;h<16;++h)w[h]=E[h];else a(w,E,P,(x-c[M])/L)}var F=this.computedUp;F[0]=w[1],F[1]=w[5],F[2]=w[9],b(F,F);var I=this.computedInverse;i(I,w);var D=this.computedEye,R=I[15];D[0]=I[12]/R,D[1]=I[13]/R,D[2]=I[14]/R;for(var O=this.computedCenter,z=Math.exp(this.computedRadius[0]),h=0;h<3;++h)O[h]=D[h]-w[2+4*h]*z}},f.idle=function(x){if(!(x<this.lastT())){for(var c=this._components,M=c.length-16,w=0;w<16;++w)c.push(c[M++]);this._time.push(x)}},f.flush=function(x){var c=e.gt(this._time,x)-2;c<0||(this._time.splice(0,c),this._components.splice(0,16*c))},f.lastT=function(){return this._time[this._time.length-1]},f.lookAt=function(x,c,M,w){this.recalcMatrix(x),c=c||this.computedEye,M=M||g,w=w||this.computedUp,this.setMatrix(x,s(this.computedMatrix,c,M,w));for(var p=0,_=0;_<3;++_)p+=Math.pow(M[_]-c[_],2);p=Math.log(Math.sqrt(p)),this.computedRadius[0]=p},f.rotate=function(x,c,M,w){this.recalcMatrix(x);var p=this.computedInverse;c&&r(p,p,c),M&&n(p,p,M),w&&v(p,p,w),this.setMatrix(x,i(this.computedMatrix,p))};var y=[0,0,0];f.pan=function(x,c,M,w){y[0]=-(c||0),y[1]=-(M||0),y[2]=-(w||0),this.recalcMatrix(x);var p=this.computedInverse;o(p,p,y),this.setMatrix(x,i(p,p))},f.translate=function(x,c,M,w){y[0]=c||0,y[1]=M||0,y[2]=w||0,this.recalcMatrix(x);var p=this.computedMatrix;o(p,p,y),this.setMatrix(x,p)},f.setMatrix=function(x,c){if(!(x<this.lastT())){this._time.push(x);for(var M=0;M<16;++M)this._components.push(c[M])}},f.setDistance=function(x,c){this.computedRadius[0]=c},f.setDistanceLimits=function(x,c){var M=this._limits;M[0]=x,M[1]=c},f.getDistanceLimits=function(x){var c=this._limits;return x?(x[0]=c[0],x[1]=c[1],x):c};function l(x){x=x||{};var c=x.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(c)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(u,A,T){A.exports=a;var e=u("robust-orientation")[3];function a(i){var n=i.length;if(n<3){for(var f=new Array(n),r=0;r<n;++r)f[r]=r;return n===2&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:f}for(var v=new Array(n),r=0;r<n;++r)v[r]=r;v.sort(function(c,M){var w=i[c][0]-i[M][0];return w||i[c][1]-i[M][1]});for(var s=[v[0],v[1]],o=[v[0],v[1]],r=2;r<n;++r){for(var b=v[r],g=i[b],d=s.length;d>1&&e(i[s[d-2]],i[s[d-1]],g)<=0;)d-=1,s.pop();for(s.push(b),d=o.length;d>1&&e(i[o[d-2]],i[o[d-1]],g)>=0;)d-=1,o.pop();o.push(b)}for(var f=new Array(o.length+s.length-2),y=0,r=0,l=s.length;r<l;++r)f[y++]=s[r];for(var x=o.length-2;x>0;--x)f[y++]=o[x];return f}},{"robust-orientation":284}],247:[function(u,A,T){A.exports=a;var e=u("mouse-event");function a(i,n){n||(n=i,i=window);var r=0,v=0,s=0,o={shift:!1,alt:!1,control:!1,meta:!1},b=!1;function g(h){var L=!1;return"altKey"in h&&(L=L||h.altKey!==o.alt,o.alt=!!h.altKey),"shiftKey"in h&&(L=L||h.shiftKey!==o.shift,o.shift=!!h.shiftKey),"ctrlKey"in h&&(L=L||h.ctrlKey!==o.control,o.control=!!h.ctrlKey),"metaKey"in h&&(L=L||h.metaKey!==o.meta,o.meta=!!h.metaKey),L}function d(h,L){var E=e.x(L),S=e.y(L);"buttons"in L&&(h=L.buttons|0),(h!==r||E!==v||S!==s||g(L))&&(r=h|0,v=E||0,s=S||0,n&&n(r,v,s,o))}function f(h){d(0,h)}function y(){(r||v||s||o.shift||o.alt||o.meta||o.control)&&(v=s=0,r=0,o.shift=o.alt=o.control=o.meta=!1,n&&n(0,0,0,o))}function l(h){g(h)&&n&&n(r,v,s,o)}function x(h){e.buttons(h)===0?d(0,h):d(r,h)}function c(h){d(r|e.buttons(h),h)}function M(h){d(r&~e.buttons(h),h)}function w(){b||(b=!0,i.addEventListener("mousemove",x),i.addEventListener("mousedown",c),i.addEventListener("mouseup",M),i.addEventListener("mouseleave",f),i.addEventListener("mouseenter",f),i.addEventListener("mouseout",f),i.addEventListener("mouseover",f),i.addEventListener("blur",y),i.addEventListener("keyup",l),i.addEventListener("keydown",l),i.addEventListener("keypress",l),i!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function p(){!b||(b=!1,i.removeEventListener("mousemove",x),i.removeEventListener("mousedown",c),i.removeEventListener("mouseup",M),i.removeEventListener("mouseleave",f),i.removeEventListener("mouseenter",f),i.removeEventListener("mouseout",f),i.removeEventListener("mouseover",f),i.removeEventListener("blur",y),i.removeEventListener("keyup",l),i.removeEventListener("keydown",l),i.removeEventListener("keypress",l),i!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}w();var _={element:i};return Object.defineProperties(_,{enabled:{get:function(){return b},set:function(h){h?w():p()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),_}},{"mouse-event":249}],248:[function(u,A,T){var e={left:0,top:0};A.exports=a;function a(n,r,v){r=r||n.currentTarget||n.srcElement,Array.isArray(v)||(v=[0,0]);var s=n.clientX||0,o=n.clientY||0,b=i(r);return v[0]=s-b.left,v[1]=o-b.top,v}function i(n){return n===window||n===document||n===document.body?e:n.getBoundingClientRect()}},{}],249:[function(u,A,T){function e(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){var v=r.which;if(v===2)return 4;if(v===3)return 2;if(v>0)return 1<<v-1}else if("button"in r){var v=r.button;if(v===1)return 4;if(v===2)return 2;if(v>=0)return 1<<v}}return 0}T.buttons=e;function a(r){return r.target||r.srcElement||window}T.element=a;function i(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var v=a(r),s=v.getBoundingClientRect();return r.clientX-s.left}return 0}T.x=i;function n(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var v=a(r),s=v.getBoundingClientRect();return r.clientY-s.top}return 0}T.y=n},{}],250:[function(u,A,T){var e=u("to-px");A.exports=a;function a(i,n,r){typeof i=="function"&&(r=!!n,n=i,i=window);var v=e("ex",i),s=function(o){r&&o.preventDefault();var b=o.deltaX||0,g=o.deltaY||0,d=o.deltaZ||0,f=o.deltaMode,y=1;switch(f){case 1:y=v;break;case 2:y=window.innerHeight;break}if(b*=y,g*=y,d*=y,b||g||d)return n(b,g,d,o)};return i.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(u,A,T){var e=u("typedarray-pool");A.exports=n;var a={"false,0,1":function(v,s,o,b,g){return function(f,y,l,x){var c=f.shape[0]|0,M=f.shape[1]|0,w=f.data,p=f.offset|0,_=f.stride[0]|0,h=f.stride[1]|0,L=p,E,S=-_|0,P=0,F=-h|0,I=0,D=-_-h|0,R=0,O=_|0,z=h-_*c|0,G=0,Y=0,ee=0,j=2*c|0,X=b(j),ie=b(j),he=0,K=0,$=-1,U=-1,H=0,q=-c|0,re=c|0,Z=0,Q=-c-1|0,oe=c-1|0,se=0,ae=0,le=0;for(G=0;G<c;++G)X[he++]=o(w[L],y,l,x),L+=O;if(L+=z,M>0){if(Y=1,X[he++]=o(w[L],y,l,x),L+=O,c>0)for(G=1,E=w[L],K=X[he]=o(E,y,l,x),H=X[he+$],Z=X[he+q],se=X[he+Q],(K!==H||K!==Z||K!==se)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,H,Z,se,y,l,x),ae=ie[he]=ee++),he+=1,L+=O,G=2;G<c;++G)E=w[L],K=X[he]=o(E,y,l,x),H=X[he+$],Z=X[he+q],se=X[he+Q],(K!==H||K!==Z||K!==se)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,H,Z,se,y,l,x),ae=ie[he]=ee++,se!==H&&s(ie[he+$],ae,R,P,se,H,y,l,x)),he+=1,L+=O;for(L+=z,he=0,le=$,$=U,U=le,le=q,q=re,re=le,le=Q,Q=oe,oe=le,Y=2;Y<M;++Y){if(X[he++]=o(w[L],y,l,x),L+=O,c>0)for(G=1,E=w[L],K=X[he]=o(E,y,l,x),H=X[he+$],Z=X[he+q],se=X[he+Q],(K!==H||K!==Z||K!==se)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,H,Z,se,y,l,x),ae=ie[he]=ee++,se!==Z&&s(ie[he+q],ae,I,R,Z,se,y,l,x)),he+=1,L+=O,G=2;G<c;++G)E=w[L],K=X[he]=o(E,y,l,x),H=X[he+$],Z=X[he+q],se=X[he+Q],(K!==H||K!==Z||K!==se)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,H,Z,se,y,l,x),ae=ie[he]=ee++,se!==Z&&s(ie[he+q],ae,I,R,Z,se,y,l,x),se!==H&&s(ie[he+$],ae,R,P,se,H,y,l,x)),he+=1,L+=O;Y&1&&(he=0),le=$,$=U,U=le,le=q,q=re,re=le,le=Q,Q=oe,oe=le,L+=z}}g(ie),g(X)}},"false,1,0":function(v,s,o,b,g){return function(f,y,l,x){var c=f.shape[0]|0,M=f.shape[1]|0,w=f.data,p=f.offset|0,_=f.stride[0]|0,h=f.stride[1]|0,L=p,E,S=-_|0,P=0,F=-h|0,I=0,D=-_-h|0,R=0,O=h|0,z=_-h*M|0,G=0,Y=0,ee=0,j=2*M|0,X=b(j),ie=b(j),he=0,K=0,$=-1,U=-1,H=0,q=-M|0,re=M|0,Z=0,Q=-M-1|0,oe=M-1|0,se=0,ae=0,le=0;for(Y=0;Y<M;++Y)X[he++]=o(w[L],y,l,x),L+=O;if(L+=z,c>0){if(G=1,X[he++]=o(w[L],y,l,x),L+=O,M>0)for(Y=1,E=w[L],K=X[he]=o(E,y,l,x),Z=X[he+q],H=X[he+$],se=X[he+Q],(K!==Z||K!==H||K!==se)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,Z,H,se,y,l,x),ae=ie[he]=ee++),he+=1,L+=O,Y=2;Y<M;++Y)E=w[L],K=X[he]=o(E,y,l,x),Z=X[he+q],H=X[he+$],se=X[he+Q],(K!==Z||K!==H||K!==se)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,Z,H,se,y,l,x),ae=ie[he]=ee++,se!==H&&s(ie[he+$],ae,I,R,H,se,y,l,x)),he+=1,L+=O;for(L+=z,he=0,le=q,q=re,re=le,le=$,$=U,U=le,le=Q,Q=oe,oe=le,G=2;G<c;++G){if(X[he++]=o(w[L],y,l,x),L+=O,M>0)for(Y=1,E=w[L],K=X[he]=o(E,y,l,x),Z=X[he+q],H=X[he+$],se=X[he+Q],(K!==Z||K!==H||K!==se)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,Z,H,se,y,l,x),ae=ie[he]=ee++,se!==Z&&s(ie[he+q],ae,R,P,se,Z,y,l,x)),he+=1,L+=O,Y=2;Y<M;++Y)E=w[L],K=X[he]=o(E,y,l,x),Z=X[he+q],H=X[he+$],se=X[he+Q],(K!==Z||K!==H||K!==se)&&(P=w[L+S],I=w[L+F],R=w[L+D],v(G,Y,E,P,I,R,K,Z,H,se,y,l,x),ae=ie[he]=ee++,se!==H&&s(ie[he+$],ae,I,R,H,se,y,l,x),se!==Z&&s(ie[he+q],ae,R,P,se,Z,y,l,x)),he+=1,L+=O;G&1&&(he=0),le=q,q=re,re=le,le=$,$=U,U=le,le=Q,Q=oe,oe=le,L+=z}}g(ie),g(X)}}};function i(r,v,s,o,b,g){var d=[g,b].join(","),f=a[d];return f(r,v,s,e.mallocUint32,e.freeUint32)}function n(r){function v(y){throw new Error("ndarray-extract-contour: "+y)}typeof r!="object"&&v("Must specify arguments");var s=r.order;Array.isArray(s)||v("Must specify order");var o=r.arrayArguments||1;o<1&&v("Must have at least one array argument");var b=r.scalarArguments||0;b<0&&v("Scalar arg count must be > 0"),typeof r.vertex!="function"&&v("Must specify vertex creation function"),typeof r.cell!="function"&&v("Must specify cell creation function"),typeof r.phase!="function"&&v("Must specify phase function");for(var g=r.getters||[],d=new Array(o),f=0;f<o;++f)g.indexOf(f)>=0?d[f]=!0:d[f]=!1;return i(r.vertex,r.cell,r.phase,b,s,d)}},{"typedarray-pool":308}],252:[function(u,A,T){var e=u("dup"),a={zero:function(l,x,c,M){var w=l[0],p=c[0];M|=0;var _=0,h=p;for(_=0;_<w;++_)x[M]=0,M+=h},fdTemplate1:function(l,x,c,M,w,p,_){var h=l[0],L=c[0],E=p[0],S=-1*L,P=L;M|=0,_|=0;var F=0,I=L,D=E;for(F=0;F<h;++F)w[_]=.5*(x[M+S]-x[M+P]),M+=I,_+=D},fdTemplate2:function(l,x,c,M,w,p,_,h,L,E){var S=l[0],P=l[1],F=c[0],I=c[1],D=p[0],R=p[1],O=L[0],z=L[1],G=-1*F,Y=F,ee=-1*I,j=I;M|=0,_|=0,E|=0;var X=0,ie=0,he=I,K=F-P*I,$=R,U=D-P*R,H=z,q=O-P*z;for(ie=0;ie<S;++ie){for(X=0;X<P;++X)w[_]=.5*(x[M+G]-x[M+Y]),h[E]=.5*(x[M+ee]-x[M+j]),M+=he,_+=$,E+=H;M+=K,_+=U,E+=q}}},i={cdiff:function(l){var x={};return function(M,w,p){var _=M.dtype,h=M.order,L=w.dtype,E=w.order,S=p.dtype,P=p.order,F=[_,h.join(),L,E.join(),S,P.join()].join(),I=x[F];return I||(x[F]=I=l([_,h,L,E,S,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,p.data,p.stride,p.offset|0)}},zero:function(l){var x={};return function(M){var w=M.dtype,p=M.order,_=[w,p.join()].join(),h=x[_];return h||(x[_]=h=l([w,p])),h(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(l){var x={};return function(M,w){var p=M.dtype,_=M.order,h=w.dtype,L=w.order,E=[p,_.join(),h,L.join()].join(),S=x[E];return S||(x[E]=S=l([p,_,h,L])),S(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0)}},fdTemplate2:function(l){var x={};return function(M,w,p){var _=M.dtype,h=M.order,L=w.dtype,E=w.order,S=p.dtype,P=p.order,F=[_,h.join(),L,E.join(),S,P.join()].join(),I=x[F];return I||(x[F]=I=l([_,h,L,E,S,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,p.data,p.stride,p.offset|0)}}};function n(l){var x=i[l.funcName];return x(r.bind(void 0,l))}function r(l){return a[l.funcName]}function v(l){return n({funcName:l.funcName})}var s={},o={},b=v({funcName:"cdiff"}),g=v({funcName:"zero"});function d(l){return l in s?s[l]:s[l]=v({funcName:"fdTemplate"+l})}function f(l,x,c,M){return function(w,p){var _=p.shape.slice();return _[0]>2&&_[1]>2&&M(p.pick(-1,-1).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,0).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,1).lo(1,1).hi(_[0]-2,_[1]-2)),_[1]>2&&(c(p.pick(0,-1).lo(1).hi(_[1]-2),w.pick(0,-1,1).lo(1).hi(_[1]-2)),x(w.pick(0,-1,0).lo(1).hi(_[1]-2))),_[1]>2&&(c(p.pick(_[0]-1,-1).lo(1).hi(_[1]-2),w.pick(_[0]-1,-1,1).lo(1).hi(_[1]-2)),x(w.pick(_[0]-1,-1,0).lo(1).hi(_[1]-2))),_[0]>2&&(c(p.pick(-1,0).lo(1).hi(_[0]-2),w.pick(-1,0,0).lo(1).hi(_[0]-2)),x(w.pick(-1,0,1).lo(1).hi(_[0]-2))),_[0]>2&&(c(p.pick(-1,_[1]-1).lo(1).hi(_[0]-2),w.pick(-1,_[1]-1,0).lo(1).hi(_[0]-2)),x(w.pick(-1,_[1]-1,1).lo(1).hi(_[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(_[0]-1,0,0,0),w.set(_[0]-1,0,1,0),w.set(0,_[1]-1,0,0),w.set(0,_[1]-1,1,0),w.set(_[0]-1,_[1]-1,0,0),w.set(_[0]-1,_[1]-1,1,0),w}}function y(l){var x=l.join(),_=o[x];if(_)return _;for(var c=l.length,M=[b,g],w=1;w<=c;++w)M.push(d(w));var p=f,_=p.apply(void 0,M);return o[x]=_,_}A.exports=function(x,c,M){if(Array.isArray(M)||(typeof M=="string"?M=e(c.dimension,M):M=e(c.dimension,"clamp")),c.size===0)return x;if(c.dimension===0)return x.set(0),x;var w=y(M);return w(x,c)}},{dup:65}],253:[function(u,A,T){function e(v,s){var o=Math.floor(s),b=s-o,g=0<=o&&o<v.shape[0],d=0<=o+1&&o+1<v.shape[0],f=g?+v.get(o):0,y=d?+v.get(o+1):0;return(1-b)*f+b*y}function a(v,s,o){var b=Math.floor(s),g=s-b,d=0<=b&&b<v.shape[0],f=0<=b+1&&b+1<v.shape[0],y=Math.floor(o),l=o-y,x=0<=y&&y<v.shape[1],c=0<=y+1&&y+1<v.shape[1],M=d&&x?v.get(b,y):0,w=d&&c?v.get(b,y+1):0,p=f&&x?v.get(b+1,y):0,_=f&&c?v.get(b+1,y+1):0;return(1-l)*((1-g)*M+g*p)+l*((1-g)*w+g*_)}function i(v,s,o,b){var g=Math.floor(s),d=s-g,f=0<=g&&g<v.shape[0],y=0<=g+1&&g+1<v.shape[0],l=Math.floor(o),x=o-l,c=0<=l&&l<v.shape[1],M=0<=l+1&&l+1<v.shape[1],w=Math.floor(b),p=b-w,_=0<=w&&w<v.shape[2],h=0<=w+1&&w+1<v.shape[2],L=f&&c&&_?v.get(g,l,w):0,E=f&&M&&_?v.get(g,l+1,w):0,S=y&&c&&_?v.get(g+1,l,w):0,P=y&&M&&_?v.get(g+1,l+1,w):0,F=f&&c&&h?v.get(g,l,w+1):0,I=f&&M&&h?v.get(g,l+1,w+1):0,D=y&&c&&h?v.get(g+1,l,w+1):0,R=y&&M&&h?v.get(g+1,l+1,w+1):0;return(1-p)*((1-x)*((1-d)*L+d*S)+x*((1-d)*E+d*P))+p*((1-x)*((1-d)*F+d*D)+x*((1-d)*I+d*R))}function n(v){var s=v.shape.length|0,o=new Array(s),b=new Array(s),g=new Array(s),d=new Array(s),f,y;for(f=0;f<s;++f)y=+arguments[f+1],o[f]=Math.floor(y),b[f]=y-o[f],g[f]=0<=o[f]&&o[f]<v.shape[f],d[f]=0<=o[f]+1&&o[f]+1<v.shape[f];var l=0,x,c,M;e:for(f=0;f<1<<s;++f){for(c=1,M=v.offset,x=0;x<s;++x)if(f&1<<x){if(!d[x])continue e;c*=b[x],M+=v.stride[x]*(o[x]+1)}else{if(!g[x])continue e;c*=1-b[x],M+=v.stride[x]*o[x]}l+=c*v.data[M]}return l}function r(v,s,o,b){switch(v.shape.length){case 0:return 0;case 1:return e(v,s);case 2:return a(v,s,o);case 3:return i(v,s,o,b);default:return n.apply(void 0,arguments)}}A.exports=r,A.exports.d1=e,A.exports.d2=a,A.exports.d3=i},{}],254:[function(u,A,T){var e={"float64,2,1,0":function(){return function(b,g,d,f,y){var l=b[0],x=b[1],c=b[2],M=d[0],w=d[1],p=d[2];f|=0;var _=0,h=0,L=0,E=p,S=w-c*p,P=M-x*w;for(L=0;L<l;++L){for(h=0;h<x;++h){for(_=0;_<c;++_)g[f]/=y,f+=E;f+=S}f+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(b,g,d,f,y,l,x,c){var M=b[0],w=b[1],p=b[2],_=d[0],h=d[1],L=d[2],E=l[0],S=l[1],P=l[2];f|=0,x|=0;for(var F=f,I=x,D=b[0]|0;D>0;){D<64?(M=D,D=0):(M=64,D-=64);for(var R=b[1]|0;R>0;){R<64?(w=R,R=0):(w=64,R-=64),f=F+D*_+R*h,x=I+D*E+R*S;var O=0,z=0,G=0,Y=L,ee=_-p*L,j=h-M*_,X=P,ie=E-p*P,he=S-M*E;for(G=0;G<w;++G){for(z=0;z<M;++z){for(O=0;O<p;++O)g[f]=y[x]*c,f+=Y,x+=X;f+=ee,x+=ie}f+=j,x+=he}}}}},"float32,1,0,float32,1,0":function(){return function(b,g,d,f,y,l,x){var c=b[0],M=b[1],w=d[0],p=d[1],_=l[0],h=l[1];f|=0,x|=0;var L=0,E=0,S=p,P=w-M*p,F=h,I=_-M*h;for(E=0;E<c;++E){for(L=0;L<M;++L)g[f]=y[x],f+=S,x+=F;f+=P,x+=I}}},"float32,1,0,float32,0,1":function(){return function(b,g,d,f,y,l,x){var c=b[0],M=b[1],w=d[0],p=d[1],_=l[0],h=l[1];f|=0,x|=0;for(var L=f,E=x,S=b[1]|0;S>0;){S<64?(M=S,S=0):(M=64,S-=64);for(var P=b[0]|0;P>0;){P<64?(c=P,P=0):(c=64,P-=64),f=L+S*p+P*w,x=E+S*h+P*_;var F=0,I=0,D=p,R=w-M*p,O=h,z=_-M*h;for(I=0;I<c;++I){for(F=0;F<M;++F)g[f]=y[x],f+=D,x+=O;f+=R,x+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(b,g,d,f,y,l,x){var c=b[0],M=b[1],w=b[2],p=d[0],_=d[1],h=d[2],L=l[0],E=l[1],S=l[2];f|=0,x|=0;for(var P=f,F=x,I=b[2]|0;I>0;){I<64?(w=I,I=0):(w=64,I-=64);for(var D=b[0]|0;D>0;){D<64?(c=D,D=0):(c=64,D-=64);for(var R=b[1]|0;R>0;){R<64?(M=R,R=0):(M=64,R-=64),f=P+I*h+D*p+R*_,x=F+I*S+D*L+R*E;var O=0,z=0,G=0,Y=h,ee=p-w*h,j=_-c*p,X=S,ie=L-w*S,he=E-c*L;for(G=0;G<M;++G){for(z=0;z<c;++z){for(O=0;O<w;++O)g[f]=y[x],f+=Y,x+=X;f+=ee,x+=ie}f+=j,x+=he}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(b,g,d,f,y,l,x){var c=b[0],M=b[1],w=b[2],p=d[0],_=d[1],h=d[2],L=l[0],E=l[1],S=l[2];f|=0,x|=0;var P=0,F=0,I=0,D=h,R=p-w*h,O=_-c*p,z=S,G=L-w*S,Y=E-c*L;for(I=0;I<M;++I){for(F=0;F<c;++F){for(P=0;P<w;++P)g[f]=y[x],f+=D,x+=z;f+=R,x+=G}f+=O,x+=Y}}}};function a(o,b){var g=b.join(","),d=e[g];return d()}var i=a,n={mul:function(o){var b={};return function(d,f,y){var l=d.dtype,x=d.order,c=f.dtype,M=f.order,w=y.dtype,p=y.order,_=[l,x.join(),c,M.join(),w,p.join()].join(),h=b[_];return h||(b[_]=h=o([l,x,c,M,w,p])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,y.data,y.stride,y.offset|0)}},muls:function(o){var b={};return function(d,f,y){var l=d.dtype,x=d.order,c=f.dtype,M=f.order,w=[l,x.join(),c,M.join()].join(),p=b[w];return p||(b[w]=p=o([l,x,c,M])),p(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,y)}},mulseq:function(o){var b={};return function(d,f){var y=d.dtype,l=d.order,x=[y,l.join()].join(),c=b[x];return c||(b[x]=c=o([y,l])),c(d.shape.slice(0),d.data,d.stride,d.offset|0,f)}},div:function(o){var b={};return function(d,f,y){var l=d.dtype,x=d.order,c=f.dtype,M=f.order,w=y.dtype,p=y.order,_=[l,x.join(),c,M.join(),w,p.join()].join(),h=b[_];return h||(b[_]=h=o([l,x,c,M,w,p])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,y.data,y.stride,y.offset|0)}},divs:function(o){var b={};return function(d,f,y){var l=d.dtype,x=d.order,c=f.dtype,M=f.order,w=[l,x.join(),c,M.join()].join(),p=b[w];return p||(b[w]=p=o([l,x,c,M])),p(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,y)}},divseq:function(o){var b={};return function(d,f){var y=d.dtype,l=d.order,x=[y,l.join()].join(),c=b[x];return c||(b[x]=c=o([y,l])),c(d.shape.slice(0),d.data,d.stride,d.offset|0,f)}},assign:function(o){var b={};return function(d,f){var y=d.dtype,l=d.order,x=f.dtype,c=f.order,M=[y,l.join(),x,c.join()].join(),w=b[M];return w||(b[M]=w=o([y,l,x,c])),w(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0)}}};function r(o){var b=n[o.funcName];return b(i.bind(void 0,o))}function v(o){return r({funcName:o.funcName})}var s={mul:"*",div:"/"};(function(){for(var o in s)T[o]=v({funcName:o}),T[o+"s"]=v({funcName:o+"s"}),T[o+"seq"]=v({funcName:o+"seq"})})(),T.assign=v({funcName:"assign"})},{}],255:[function(u,A,T){var e=u("ndarray"),a=u("./doConvert.js");A.exports=function(n,r){for(var v=[],s=n,o=1;Array.isArray(s);)v.push(s.length),o*=s.length,s=s[0];return v.length===0?e():(r||(r=e(new Float64Array(o),v)),a(r,n),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(u,A,T){function e(){return function(s,o,b,g,d){var f=s[0],y=s[1],l=s[2],x=b[0],c=b[1],M=b[2],w=[0,0,0];g|=0;var p=0,_=0,h=0,L=M,E=c-l*M,S=x-y*c;for(h=0;h<f;++h){for(_=0;_<y;++_){for(p=0;p<l;++p){{var P=d,F;for(F=0;F<w.length-1;++F)P=P[w[F]];o[g]=P[w[w.length-1]]}g+=L,++w[2]}g+=E,w[2]-=l,++w[1]}g+=S,w[1]-=y,++w[0]}}}function a(){return e()}var i=a;function n(s){var o={};return function(g,d){var f=g.dtype,y=g.order,l=[f,y.join()].join(),x=o[l];return x||(o[l]=x=s([f,y])),x(g.shape.slice(0),g.data,g.stride,g.offset|0,d)}}function r(s){return n(i.bind(void 0,s))}function v(s){return r({funcName:s.funcName})}A.exports=v({funcName:"convert"})},{}],257:[function(u,A,T){var e=u("typedarray-pool");function a(b){switch(b){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var i={"uint32,1,0":function(b,g){return function(f,y,l,x,c,M,w,p,_,h,L){var E,S,P,F=f*c+x,I,D=b(p),R,O,z,G;for(E=f+1;E<=y;++E){for(S=E,F+=c,P=F,R=0,O=F,I=0;I<p;++I)D[R++]=l[O],O+=_;e:for(;S-- >f;){R=0,O=P-c;t:for(I=0;I<p;++I){if(z=l[O],G=D[R],z<G)break e;if(z>G)break t;O+=h,R+=L}for(R=P,O=P-c,I=0;I<p;++I)l[R]=l[O],R+=_,O+=_;P-=c}for(R=P,O=0,I=0;I<p;++I)l[R]=D[O++],R+=_}g(D)}}};function n(b,g){var d=a(g),f=[g,b].join(","),y=i[f];return d?y(d[0],d[1]):y()}var r={"uint32,1,0":function(b,g,d){return function f(y,l,x,c,M,w,p,_,h,L,E){var S=(l-y+1)/6|0,P=y+S,F=l-S,I=y+l>>1,D=I-S,R=I+S,O=P,z=D,G=I,Y=R,ee=F,j=y+1,X=l-1,ie=!0,he,K,$,U,H,q,re,Z,Q,oe=0,se=0,ae=0,le,_e,fe,me,xe,ye,be,ke,De,He,Ae,Le,Ze,We,ze,Ie,Ve=_,dt=g(Ve),Ft=g(Ve);_e=M*O,fe=M*z,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=O,O=z,z=K;break e}if(ae<0)break e;Ie+=L}_e=M*Y,fe=M*ee,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=Y,Y=ee,ee=K;break e}if(ae<0)break e;Ie+=L}_e=M*O,fe=M*G,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=O,O=G,G=K;break e}if(ae<0)break e;Ie+=L}_e=M*z,fe=M*G,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=z,z=G,G=K;break e}if(ae<0)break e;Ie+=L}_e=M*O,fe=M*Y,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=O,O=Y,Y=K;break e}if(ae<0)break e;Ie+=L}_e=M*G,fe=M*Y,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=G,G=Y,Y=K;break e}if(ae<0)break e;Ie+=L}_e=M*z,fe=M*ee,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=z,z=ee,ee=K;break e}if(ae<0)break e;Ie+=L}_e=M*z,fe=M*G,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=z,z=G,G=K;break e}if(ae<0)break e;Ie+=L}_e=M*Y,fe=M*ee,Ie=c;e:for(le=0;le<_;++le){if(re=_e+Ie,Z=fe+Ie,ae=x[re]-x[Z],ae>0){K=Y,Y=ee,ee=K;break e}if(ae<0)break e;Ie+=L}for(_e=M*O,fe=M*z,me=M*G,xe=M*Y,ye=M*ee,be=M*P,ke=M*I,De=M*F,ze=0,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,Q=me+Ie,He=xe+Ie,Ae=ye+Ie,Le=be+Ie,Ze=ke+Ie,We=De+Ie,dt[ze]=x[Z],Ft[ze]=x[He],ie=ie&&dt[ze]===Ft[ze],$=x[re],U=x[Q],H=x[Ae],x[Le]=$,x[Ze]=U,x[We]=H,++ze,Ie+=h;for(_e=M*D,fe=M*y,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,x[re]=x[Z],Ie+=h;for(_e=M*R,fe=M*l,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,x[re]=x[Z],Ie+=h;if(ie)for(q=j;q<=X;++q){re=c+q*M,ze=0;e:for(le=0;le<_;++le){if(ae=x[re]-dt[ze],ae!==0)break e;ze+=E,re+=L}if(ae!==0)if(ae<0){if(q!==j)for(_e=M*q,fe=M*j,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;++j}else for(;;){re=c+X*M,ze=0;e:for(le=0;le<_;++le){if(ae=x[re]-dt[ze],ae!==0)break e;ze+=E,re+=L}if(ae>0)X--;else if(ae<0){for(_e=M*q,fe=M*j,me=M*X,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,Q=me+Ie,he=x[re],x[re]=x[Z],x[Z]=x[Q],x[Q]=he,Ie+=h;++j,--X;break}else{for(_e=M*q,fe=M*X,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;--X;break}}}else for(q=j;q<=X;++q){re=c+q*M,ze=0;e:for(le=0;le<_;++le){if(oe=x[re]-dt[ze],oe!==0)break e;ze+=E,re+=L}if(oe<0){if(q!==j)for(_e=M*q,fe=M*j,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;++j}else{re=c+q*M,ze=0;e:for(le=0;le<_;++le){if(se=x[re]-Ft[ze],se!==0)break e;ze+=E,re+=L}if(se>0)for(;;){re=c+X*M,ze=0;e:for(le=0;le<_;++le){if(ae=x[re]-Ft[ze],ae!==0)break e;ze+=E,re+=L}if(ae>0){if(--X<q)break;continue}else{re=c+X*M,ze=0;e:for(le=0;le<_;++le){if(ae=x[re]-dt[ze],ae!==0)break e;ze+=E,re+=L}if(ae<0){for(_e=M*q,fe=M*j,me=M*X,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,Q=me+Ie,he=x[re],x[re]=x[Z],x[Z]=x[Q],x[Q]=he,Ie+=h;++j,--X}else{for(_e=M*q,fe=M*X,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;--X}break}}}}for(_e=M*y,fe=M*(j-1),ze=0,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,x[re]=x[Z],x[Z]=dt[ze],++ze,Ie+=h;for(_e=M*l,fe=M*(X+1),ze=0,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,x[re]=x[Z],x[Z]=Ft[ze],++ze,Ie+=h;if(j-2-y<=32?b(y,j-2,x,c,M,w,p,_,h,L,E):f(y,j-2,x,c,M,w,p,_,h,L,E),l-(X+2)<=32?b(X+2,l,x,c,M,w,p,_,h,L,E):f(X+2,l,x,c,M,w,p,_,h,L,E),ie){d(dt),d(Ft);return}if(j<P&&X>F){e:for(;;){for(re=c+j*M,ze=0,Ie=c,le=0;le<_;++le){if(x[re]!==dt[ze])break e;++ze,re+=h}++j}e:for(;;){for(re=c+X*M,ze=0,Ie=c,le=0;le<_;++le){if(x[re]!==Ft[ze])break e;++ze,re+=h}--X}for(q=j;q<=X;++q){re=c+q*M,ze=0;e:for(le=0;le<_;++le){if(oe=x[re]-dt[ze],oe!==0)break e;ze+=E,re+=L}if(oe===0){if(q!==j)for(_e=M*q,fe=M*j,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;++j}else{re=c+q*M,ze=0;e:for(le=0;le<_;++le){if(se=x[re]-Ft[ze],se!==0)break e;ze+=E,re+=L}if(se===0)for(;;){re=c+X*M,ze=0;e:for(le=0;le<_;++le){if(ae=x[re]-Ft[ze],ae!==0)break e;ze+=E,re+=L}if(ae===0){if(--X<q)break;continue}else{re=c+X*M,ze=0;e:for(le=0;le<_;++le){if(ae=x[re]-dt[ze],ae!==0)break e;ze+=E,re+=L}if(ae<0){for(_e=M*q,fe=M*j,me=M*X,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,Q=me+Ie,he=x[re],x[re]=x[Z],x[Z]=x[Q],x[Q]=he,Ie+=h;++j,--X}else{for(_e=M*q,fe=M*X,Ie=c,le=0;le<_;++le)re=_e+Ie,Z=fe+Ie,he=x[re],x[re]=x[Z],x[Z]=he,Ie+=h;--X}break}}}}}d(dt),d(Ft),X-j<=32?b(j,X,x,c,M,w,p,_,h,L,E):f(j,X,x,c,M,w,p,_,h,L,E)}}};function v(b,g,d){var f=a(g),y=[g,b].join(","),l=r[y];return b.length>1&&f?l(d,f[0],f[1]):l(d)}var s={"uint32,1,0":function(b,g){return function(d){var f=d.data,y=d.offset|0,l=d.shape,x=d.stride,c=x[0]|0,M=l[0]|0,w=x[1]|0,p=l[1]|0,_=w,h=w,L=1;M<=32?b(0,M-1,f,y,c,w,M,p,_,h,L):g(0,M-1,f,y,c,w,M,p,_,h,L)}}};function o(b,g){var d=[g,b].join(","),f=s[d],y=n(b,g),l=v(b,g,y);return f(y,l)}A.exports=o},{"typedarray-pool":308}],258:[function(u,A,T){var e=u("./lib/compile_sort.js"),a={};function i(n){var r=n.order,v=n.dtype,s=[r,v],o=s.join(":"),b=a[o];return b||(a[o]=b=e(r,v)),b(n),n}A.exports=i},{"./lib/compile_sort.js":257}],259:[function(u,A,T){var e=u("is-buffer"),a=typeof Float64Array<"u";function i(g,d){return g[0]-d[0]}function n(){var g=this.stride,d=new Array(g.length),f;for(f=0;f<d.length;++f)d[f]=[Math.abs(g[f]),f];d.sort(i);var y=new Array(d.length);for(f=0;f<y.length;++f)y[f]=d[f][1];return y}var r={T:function(g){function d(y){this.data=y}var f=d.prototype;return f.dtype=g,f.index=function(){return-1},f.size=0,f.dimension=-1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new d(this.data)},f.get=f.set=function(){},f.pick=function(){return null},function(l){return new d(l)}},0:function(g,d){function f(l,x){this.data=l,this.offset=x}var y=f.prototype;return y.dtype=g,y.index=function(){return this.offset},y.dimension=0,y.size=1,y.shape=y.stride=y.order=[],y.lo=y.hi=y.transpose=y.step=function(){return new f(this.data,this.offset)},y.pick=function(){return d(this.data)},y.valueOf=y.get=function(){return g==="generic"?this.data.get(this.offset):this.data[this.offset]},y.set=function(x){return g==="generic"?this.data.set(this.offset,x):this.data[this.offset]=x},function(x,c,M,w){return new f(x,w)}},1:function(g,d,f){function y(x,c,M,w){this.data=x,this.shape=[c],this.stride=[M],this.offset=w|0}var l=y.prototype;return l.dtype=g,l.dimension=1,Object.defineProperty(l,"size",{get:function(){return this.shape[0]}}),l.order=[0],l.set=function(c,M){return g==="generic"?this.data.set(this.offset+this.stride[0]*c,M):this.data[this.offset+this.stride[0]*c]=M},l.get=function(c){return g==="generic"?this.data.get(this.offset+this.stride[0]*c):this.data[this.offset+this.stride[0]*c]},l.index=function(c){return this.offset+this.stride[0]*c},l.hi=function(c){return new y(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,this.stride[0],this.offset)},l.lo=function(c){var M=this.offset,w=0,p=this.shape[0],_=this.stride[0];return typeof c=="number"&&c>=0&&(w=c|0,M+=_*w,p-=w),new y(this.data,p,_,M)},l.step=function(c){var M=this.shape[0],w=this.stride[0],p=this.offset,_=0,h=Math.ceil;return typeof c=="number"&&(_=c|0,_<0?(p+=w*(M-1),M=h(-M/_)):M=h(M/_),w*=_),new y(this.data,M,w,p)},l.transpose=function(c){c=c===void 0?0:c|0;var M=this.shape,w=this.stride;return new y(this.data,M[c],w[c],this.offset)},l.pick=function(c){var M=[],w=[],p=this.offset;typeof c=="number"&&c>=0?p=p+this.stride[0]*c|0:(M.push(this.shape[0]),w.push(this.stride[0]));var _=d[M.length+1];return _(this.data,M,w,p)},function(c,M,w,p){return new y(c,M[0],w[0],p)}},2:function(g,d,f){function y(x,c,M,w,p,_){this.data=x,this.shape=[c,M],this.stride=[w,p],this.offset=_|0}var l=y.prototype;return l.dtype=g,l.dimension=2,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(l,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),l.set=function(c,M,w){return g==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*M,w):this.data[this.offset+this.stride[0]*c+this.stride[1]*M]=w},l.get=function(c,M){return g==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*M):this.data[this.offset+this.stride[0]*c+this.stride[1]*M]},l.index=function(c,M){return this.offset+this.stride[0]*c+this.stride[1]*M},l.hi=function(c,M){return new y(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},l.lo=function(c,M){var w=this.offset,p=0,_=this.shape[0],h=this.shape[1],L=this.stride[0],E=this.stride[1];return typeof c=="number"&&c>=0&&(p=c|0,w+=L*p,_-=p),typeof M=="number"&&M>=0&&(p=M|0,w+=E*p,h-=p),new y(this.data,_,h,L,E,w)},l.step=function(c,M){var w=this.shape[0],p=this.shape[1],_=this.stride[0],h=this.stride[1],L=this.offset,E=0,S=Math.ceil;return typeof c=="number"&&(E=c|0,E<0?(L+=_*(w-1),w=S(-w/E)):w=S(w/E),_*=E),typeof M=="number"&&(E=M|0,E<0?(L+=h*(p-1),p=S(-p/E)):p=S(p/E),h*=E),new y(this.data,w,p,_,h,L)},l.transpose=function(c,M){c=c===void 0?0:c|0,M=M===void 0?1:M|0;var w=this.shape,p=this.stride;return new y(this.data,w[c],w[M],p[c],p[M],this.offset)},l.pick=function(c,M){var w=[],p=[],_=this.offset;typeof c=="number"&&c>=0?_=_+this.stride[0]*c|0:(w.push(this.shape[0]),p.push(this.stride[0])),typeof M=="number"&&M>=0?_=_+this.stride[1]*M|0:(w.push(this.shape[1]),p.push(this.stride[1]));var h=d[w.length+1];return h(this.data,w,p,_)},function(c,M,w,p){return new y(c,M[0],M[1],w[0],w[1],p)}},3:function(g,d,f){function y(x,c,M,w,p,_,h,L){this.data=x,this.shape=[c,M,w],this.stride=[p,_,h],this.offset=L|0}var l=y.prototype;return l.dtype=g,l.dimension=3,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(l,"order",{get:function(){var c=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return c>M?M>w?[2,1,0]:c>w?[1,2,0]:[1,0,2]:c>w?[2,0,1]:w>M?[0,1,2]:[0,2,1]}}),l.set=function(c,M,w,p){return g==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w,p):this.data[this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w]=p},l.get=function(c,M,w){return g==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w):this.data[this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w]},l.index=function(c,M,w){return this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w},l.hi=function(c,M,w){return new y(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},l.lo=function(c,M,w){var p=this.offset,_=0,h=this.shape[0],L=this.shape[1],E=this.shape[2],S=this.stride[0],P=this.stride[1],F=this.stride[2];return typeof c=="number"&&c>=0&&(_=c|0,p+=S*_,h-=_),typeof M=="number"&&M>=0&&(_=M|0,p+=P*_,L-=_),typeof w=="number"&&w>=0&&(_=w|0,p+=F*_,E-=_),new y(this.data,h,L,E,S,P,F,p)},l.step=function(c,M,w){var p=this.shape[0],_=this.shape[1],h=this.shape[2],L=this.stride[0],E=this.stride[1],S=this.stride[2],P=this.offset,F=0,I=Math.ceil;return typeof c=="number"&&(F=c|0,F<0?(P+=L*(p-1),p=I(-p/F)):p=I(p/F),L*=F),typeof M=="number"&&(F=M|0,F<0?(P+=E*(_-1),_=I(-_/F)):_=I(_/F),E*=F),typeof w=="number"&&(F=w|0,F<0?(P+=S*(h-1),h=I(-h/F)):h=I(h/F),S*=F),new y(this.data,p,_,h,L,E,S,P)},l.transpose=function(c,M,w){c=c===void 0?0:c|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0;var p=this.shape,_=this.stride;return new y(this.data,p[c],p[M],p[w],_[c],_[M],_[w],this.offset)},l.pick=function(c,M,w){var p=[],_=[],h=this.offset;typeof c=="number"&&c>=0?h=h+this.stride[0]*c|0:(p.push(this.shape[0]),_.push(this.stride[0])),typeof M=="number"&&M>=0?h=h+this.stride[1]*M|0:(p.push(this.shape[1]),_.push(this.stride[1])),typeof w=="number"&&w>=0?h=h+this.stride[2]*w|0:(p.push(this.shape[2]),_.push(this.stride[2]));var L=d[p.length+1];return L(this.data,p,_,h)},function(c,M,w,p){return new y(c,M[0],M[1],M[2],w[0],w[1],w[2],p)}},4:function(g,d,f){function y(x,c,M,w,p,_,h,L,E,S){this.data=x,this.shape=[c,M,w,p],this.stride=[_,h,L,E],this.offset=S|0}var l=y.prototype;return l.dtype=g,l.dimension=4,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(l,"order",{get:f}),l.set=function(c,M,w,p,_){return g==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p,_):this.data[this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p]=_},l.get=function(c,M,w,p){return g==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p):this.data[this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p]},l.index=function(c,M,w,p){return this.offset+this.stride[0]*c+this.stride[1]*M+this.stride[2]*w+this.stride[3]*p},l.hi=function(c,M,w,p){return new y(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,typeof p!="number"||p<0?this.shape[3]:p|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},l.lo=function(c,M,w,p){var _=this.offset,h=0,L=this.shape[0],E=this.shape[1],S=this.shape[2],P=this.shape[3],F=this.stride[0],I=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof c=="number"&&c>=0&&(h=c|0,_+=F*h,L-=h),typeof M=="number"&&M>=0&&(h=M|0,_+=I*h,E-=h),typeof w=="number"&&w>=0&&(h=w|0,_+=D*h,S-=h),typeof p=="number"&&p>=0&&(h=p|0,_+=R*h,P-=h),new y(this.data,L,E,S,P,F,I,D,R,_)},l.step=function(c,M,w,p){var _=this.shape[0],h=this.shape[1],L=this.shape[2],E=this.shape[3],S=this.stride[0],P=this.stride[1],F=this.stride[2],I=this.stride[3],D=this.offset,R=0,O=Math.ceil;return typeof c=="number"&&(R=c|0,R<0?(D+=S*(_-1),_=O(-_/R)):_=O(_/R),S*=R),typeof M=="number"&&(R=M|0,R<0?(D+=P*(h-1),h=O(-h/R)):h=O(h/R),P*=R),typeof w=="number"&&(R=w|0,R<0?(D+=F*(L-1),L=O(-L/R)):L=O(L/R),F*=R),typeof p=="number"&&(R=p|0,R<0?(D+=I*(E-1),E=O(-E/R)):E=O(E/R),I*=R),new y(this.data,_,h,L,E,S,P,F,I,D)},l.transpose=function(c,M,w,p){c=c===void 0?0:c|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0,p=p===void 0?3:p|0;var _=this.shape,h=this.stride;return new y(this.data,_[c],_[M],_[w],_[p],h[c],h[M],h[w],h[p],this.offset)},l.pick=function(c,M,w,p){var _=[],h=[],L=this.offset;typeof c=="number"&&c>=0?L=L+this.stride[0]*c|0:(_.push(this.shape[0]),h.push(this.stride[0])),typeof M=="number"&&M>=0?L=L+this.stride[1]*M|0:(_.push(this.shape[1]),h.push(this.stride[1])),typeof w=="number"&&w>=0?L=L+this.stride[2]*w|0:(_.push(this.shape[2]),h.push(this.stride[2])),typeof p=="number"&&p>=0?L=L+this.stride[3]*p|0:(_.push(this.shape[3]),h.push(this.stride[3]));var E=d[_.length+1];return E(this.data,_,h,L)},function(c,M,w,p){return new y(c,M[0],M[1],M[2],M[3],w[0],w[1],w[2],w[3],p)}},5:function(d,f,y){function l(c,M,w,p,_,h,L,E,S,P,F,I){this.data=c,this.shape=[M,w,p,_,h],this.stride=[L,E,S,P,F],this.offset=I|0}var x=l.prototype;return x.dtype=d,x.dimension=5,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(x,"order",{get:y}),x.set=function(M,w,p,_,h,L){return d==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h,L):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h]=L},x.get=function(M,w,p,_,h){return d==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h]},x.index=function(M,w,p,_,h){return this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*p+this.stride[3]*_+this.stride[4]*h},x.hi=function(M,w,p,_,h){return new l(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof w!="number"||w<0?this.shape[1]:w|0,typeof p!="number"||p<0?this.shape[2]:p|0,typeof _!="number"||_<0?this.shape[3]:_|0,typeof h!="number"||h<0?this.shape[4]:h|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},x.lo=function(M,w,p,_,h){var L=this.offset,E=0,S=this.shape[0],P=this.shape[1],F=this.shape[2],I=this.shape[3],D=this.shape[4],R=this.stride[0],O=this.stride[1],z=this.stride[2],G=this.stride[3],Y=this.stride[4];return typeof M=="number"&&M>=0&&(E=M|0,L+=R*E,S-=E),typeof w=="number"&&w>=0&&(E=w|0,L+=O*E,P-=E),typeof p=="number"&&p>=0&&(E=p|0,L+=z*E,F-=E),typeof _=="number"&&_>=0&&(E=_|0,L+=G*E,I-=E),typeof h=="number"&&h>=0&&(E=h|0,L+=Y*E,D-=E),new l(this.data,S,P,F,I,D,R,O,z,G,Y,L)},x.step=function(M,w,p,_,h){var L=this.shape[0],E=this.shape[1],S=this.shape[2],P=this.shape[3],F=this.shape[4],I=this.stride[0],D=this.stride[1],R=this.stride[2],O=this.stride[3],z=this.stride[4],G=this.offset,Y=0,ee=Math.ceil;return typeof M=="number"&&(Y=M|0,Y<0?(G+=I*(L-1),L=ee(-L/Y)):L=ee(L/Y),I*=Y),typeof w=="number"&&(Y=w|0,Y<0?(G+=D*(E-1),E=ee(-E/Y)):E=ee(E/Y),D*=Y),typeof p=="number"&&(Y=p|0,Y<0?(G+=R*(S-1),S=ee(-S/Y)):S=ee(S/Y),R*=Y),typeof _=="number"&&(Y=_|0,Y<0?(G+=O*(P-1),P=ee(-P/Y)):P=ee(P/Y),O*=Y),typeof h=="number"&&(Y=h|0,Y<0?(G+=z*(F-1),F=ee(-F/Y)):F=ee(F/Y),z*=Y),new l(this.data,L,E,S,P,F,I,D,R,O,z,G)},x.transpose=function(M,w,p,_,h){M=M===void 0?0:M|0,w=w===void 0?1:w|0,p=p===void 0?2:p|0,_=_===void 0?3:_|0,h=h===void 0?4:h|0;var L=this.shape,E=this.stride;return new l(this.data,L[M],L[w],L[p],L[_],L[h],E[M],E[w],E[p],E[_],E[h],this.offset)},x.pick=function(M,w,p,_,h){var L=[],E=[],S=this.offset;typeof M=="number"&&M>=0?S=S+this.stride[0]*M|0:(L.push(this.shape[0]),E.push(this.stride[0])),typeof w=="number"&&w>=0?S=S+this.stride[1]*w|0:(L.push(this.shape[1]),E.push(this.stride[1])),typeof p=="number"&&p>=0?S=S+this.stride[2]*p|0:(L.push(this.shape[2]),E.push(this.stride[2])),typeof _=="number"&&_>=0?S=S+this.stride[3]*_|0:(L.push(this.shape[3]),E.push(this.stride[3])),typeof h=="number"&&h>=0?S=S+this.stride[4]*h|0:(L.push(this.shape[4]),E.push(this.stride[4]));var P=f[L.length+1];return P(this.data,L,E,S)},function(M,w,p,_){return new l(M,w[0],w[1],w[2],w[3],w[4],p[0],p[1],p[2],p[3],p[4],_)}}};function v(g,d){var f=d===-1?"T":String(d),y=r[f];return d===-1?y(g):d===0?y(g,o[g][0]):y(g,o[g],n)}function s(g){if(e(g))return"buffer";if(a)switch(Object.prototype.toString.call(g)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(g)?"array":"generic"}var o={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function b(g,d,f,y){if(g===void 0){var p=o.array[0];return p([])}else typeof g=="number"&&(g=[g]);d===void 0&&(d=[g.length]);var l=d.length;if(f===void 0){f=new Array(l);for(var x=l-1,c=1;x>=0;--x)f[x]=c,c*=d[x]}if(y===void 0){y=0;for(var x=0;x<l;++x)f[x]<0&&(y-=(d[x]-1)*f[x])}for(var M=s(g),w=o[M];w.length<=l+1;)w.push(v(M,w.length-1));var p=w[l+1];return p(g,d,f,y)}A.exports=b},{"is-buffer":237}],260:[function(u,A,T){var e=u("double-bits"),a=Math.pow(2,-1074),i=-1>>>0;A.exports=n;function n(r,v){if(isNaN(r)||isNaN(v))return NaN;if(r===v)return r;if(r===0)return v<0?-a:a;var s=e.hi(r),o=e.lo(r);return v>r==r>0?o===i?(s+=1,o=0):o+=1:o===0?(o=i,s-=1):o-=1,e.pack(o,s)}},{"double-bits":64}],261:[function(u,A,T){var e=1e-6,a=1e-6;T.vertexNormals=function(i,n,r){for(var v=n.length,s=new Array(v),o=r===void 0?e:r,b=0;b<v;++b)s[b]=[0,0,0];for(var b=0;b<i.length;++b)for(var g=i[b],d=0,f=g[g.length-1],y=g[0],l=0;l<g.length;++l){d=f,f=y,y=g[(l+1)%g.length];for(var x=n[d],c=n[f],M=n[y],w=new Array(3),p=0,_=new Array(3),h=0,L=0;L<3;++L)w[L]=x[L]-c[L],p+=w[L]*w[L],_[L]=M[L]-c[L],h+=_[L]*_[L];if(p*h>o)for(var E=s[f],S=1/Math.sqrt(p*h),L=0;L<3;++L){var P=(L+1)%3,F=(L+2)%3;E[L]+=S*(_[P]*w[F]-_[F]*w[P])}}for(var b=0;b<v;++b){for(var E=s[b],I=0,L=0;L<3;++L)I+=E[L]*E[L];if(I>o)for(var S=1/Math.sqrt(I),L=0;L<3;++L)E[L]*=S;else for(var L=0;L<3;++L)E[L]=0}return s},T.faceNormals=function(i,n,r){for(var v=i.length,s=new Array(v),o=r===void 0?a:r,b=0;b<v;++b){for(var g=i[b],d=new Array(3),f=0;f<3;++f)d[f]=n[g[f]];for(var y=new Array(3),l=new Array(3),f=0;f<3;++f)y[f]=d[1][f]-d[0][f],l[f]=d[2][f]-d[0][f];for(var x=new Array(3),c=0,f=0;f<3;++f){var M=(f+1)%3,w=(f+2)%3;x[f]=y[M]*l[w]-y[w]*l[M],c+=x[f]*x[f]}c>o?c=1/Math.sqrt(c):c=0;for(var f=0;f<3;++f)x[f]*=c;s[b]=x}return s}},{}],262:[function(u,A,T){A.exports=e;function e(a,i,n,r,v,s,o,b,g,d){var f=i+s+d;if(y>0){var y=Math.sqrt(f+1);a[0]=.5*(o-g)/y,a[1]=.5*(b-r)/y,a[2]=.5*(n-s)/y,a[3]=.5*y}else{var l=Math.max(i,s,d),y=Math.sqrt(2*l-f+1);i>=l?(a[0]=.5*y,a[1]=.5*(v+n)/y,a[2]=.5*(b+r)/y,a[3]=.5*(o-g)/y):s>=l?(a[0]=.5*(n+v)/y,a[1]=.5*y,a[2]=.5*(g+o)/y,a[3]=.5*(b-r)/y):(a[0]=.5*(r+b)/y,a[1]=.5*(o+g)/y,a[2]=.5*y,a[3]=.5*(n-v)/y)}return a}},{}],263:[function(u,A,T){A.exports=d;var e=u("filtered-vector"),a=u("gl-mat4/lookAt"),i=u("gl-mat4/fromQuat"),n=u("gl-mat4/invert"),r=u("./lib/quatFromFrame");function v(f,y,l){return Math.sqrt(Math.pow(f,2)+Math.pow(y,2)+Math.pow(l,2))}function s(f,y,l,x){return Math.sqrt(Math.pow(f,2)+Math.pow(y,2)+Math.pow(l,2)+Math.pow(x,2))}function o(f,y){var l=y[0],x=y[1],c=y[2],M=y[3],w=s(l,x,c,M);w>1e-6?(f[0]=l/w,f[1]=x/w,f[2]=c/w,f[3]=M/w):(f[0]=f[1]=f[2]=0,f[3]=1)}function b(f,y,l){this.radius=e([l]),this.center=e(y),this.rotation=e(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=b.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var y=this.computedRotation;o(y,y);var l=this.computedMatrix;i(l,y);var x=this.computedCenter,c=this.computedEye,M=this.computedUp,w=Math.exp(this.computedRadius[0]);c[0]=x[0]+w*l[2],c[1]=x[1]+w*l[6],c[2]=x[2]+w*l[10],M[0]=l[1],M[1]=l[5],M[2]=l[9];for(var p=0;p<3;++p){for(var _=0,h=0;h<3;++h)_+=l[p+4*h]*c[h];l[12+p]=-_}},g.getMatrix=function(f,y){this.recalcMatrix(f);var l=this.computedMatrix;if(y){for(var x=0;x<16;++x)y[x]=l[x];return y}return l},g.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},g.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},g.pan=function(f,y,l,x){y=y||0,l=l||0,x=x||0,this.recalcMatrix(f);var c=this.computedMatrix,M=c[1],w=c[5],p=c[9],_=v(M,w,p);M/=_,w/=_,p/=_;var h=c[0],L=c[4],E=c[8],S=h*M+L*w+E*p;h-=M*S,L-=w*S,E-=p*S;var P=v(h,L,E);h/=P,L/=P,E/=P,c[2],c[6],c[10];var F=h*y+M*l,I=L*y+w*l,D=E*y+p*l;this.center.move(f,F,I,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+x),this.radius.set(f,Math.log(R))},g.rotate=function(f,y,l,x){this.recalcMatrix(f),y=y||0,l=l||0;var c=this.computedMatrix,M=c[0],w=c[4],p=c[8],_=c[1],h=c[5],L=c[9],E=c[2],S=c[6],P=c[10],F=y*M+l*_,I=y*w+l*h,D=y*p+l*L,R=-(S*D-P*I),O=-(P*F-E*D),z=-(E*I-S*F),G=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(O,2)-Math.pow(z,2))),Y=s(R,O,z,G);Y>1e-6?(R/=Y,O/=Y,z/=Y,G/=Y):(R=O=z=0,G=1);var ee=this.computedRotation,j=ee[0],X=ee[1],ie=ee[2],he=ee[3],K=j*G+he*R+X*z-ie*O,$=X*G+he*O+ie*R-j*z,U=ie*G+he*z+j*O-X*R,H=he*G-j*R-X*O-ie*z;if(x){R=E,O=S,z=P;var q=Math.sin(x)/v(R,O,z);R*=q,O*=q,z*=q,G=Math.cos(y),K=K*G+H*R+$*z-U*O,$=$*G+H*O+U*R-K*z,U=U*G+H*z+K*O-$*R,H=H*G-K*R-$*O-U*z}var re=s(K,$,U,H);re>1e-6?(K/=re,$/=re,U/=re,H/=re):(K=$=U=0,H=1),this.rotation.set(f,K,$,U,H)},g.lookAt=function(f,y,l,x){this.recalcMatrix(f),l=l||this.computedCenter,y=y||this.computedEye,x=x||this.computedUp;var c=this.computedMatrix;a(c,y,l,x);var M=this.computedRotation;r(M,c[0],c[1],c[2],c[4],c[5],c[6],c[8],c[9],c[10]),o(M,M),this.rotation.set(f,M[0],M[1],M[2],M[3]);for(var w=0,p=0;p<3;++p)w+=Math.pow(l[p]-y[p],2);this.radius.set(f,.5*Math.log(Math.max(w,1e-6))),this.center.set(f,l[0],l[1],l[2])},g.translate=function(f,y,l,x){this.center.move(f,y||0,l||0,x||0)},g.setMatrix=function(f,y){var l=this.computedRotation;r(l,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),o(l,l),this.rotation.set(f,l[0],l[1],l[2],l[3]);var x=this.computedMatrix;n(x,y);var c=x[15];if(Math.abs(c)>1e-6){var M=x[12]/c,w=x[13]/c,p=x[14]/c;this.recalcMatrix(f);var _=Math.exp(this.computedRadius[0]);this.center.set(f,M-x[2]*_,w-x[6]*_,p-x[10]*_),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},g.setDistance=function(f,y){y>0&&this.radius.set(f,Math.log(y))},g.setDistanceLimits=function(f,y){f>0?f=Math.log(f):f=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=y},g.getDistanceLimits=function(f){var y=this.radius.bounds;return f?(f[0]=Math.exp(y[0][0]),f[1]=Math.exp(y[1][0]),f):[Math.exp(y[0][0]),Math.exp(y[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(f){var y=this.lastT(),l=f.center;l&&this.center.set(y,l[0],l[1],l[2]);var x=f.rotation;x&&this.rotation.set(y,x[0],x[1],x[2],x[3]);var c=f.distance;c&&c>0&&this.radius.set(y,Math.log(c)),this.setDistanceLimits(f.zoomMin,f.zoomMax)};function d(f){f=f||{};var y=f.center||[0,0,0],l=f.rotation||[0,0,0,1],x=f.radius||1;y=[].slice.call(y,0,3),l=[].slice.call(l,0,4),o(l,l);var c=new b(l,y,Math.log(x));return c.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&c.lookAt(0,f.eye,f.center,f.up),c}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(u,A,T){var e=u("repeat-string");A.exports=function(i,n,r){return r=typeof r<"u"?r+"":" ",e(r,n)+i}},{"repeat-string":277}],265:[function(u,A,T){A.exports=function(a,i){i||(i=[0,""]),a=String(a);var n=parseFloat(a,10);return i[0]=n,i[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},{}],266:[function(u,A,T){A.exports=a;var e=u("compare-angle");function a(i,n){for(var r=n.length|0,v=i.length,s=[new Array(r),new Array(r)],o=0;o<r;++o)s[0][o]=[],s[1][o]=[];for(var o=0;o<v;++o){var b=i[o];s[0][b[0]].push(b),s[1][b[1]].push(b)}for(var g=[],o=0;o<r;++o)s[0][o].length+s[1][o].length===0&&g.push([o]);function d(w,p){var _=s[p][w[p]];_.splice(_.indexOf(w),1)}function f(w,p,_){for(var h,L,E,S=0;S<2;++S)if(s[S][p].length>0){h=s[S][p][0],E=S;break}L=h[E^1];for(var P=0;P<2;++P)for(var F=s[P][p],I=0;I<F.length;++I){var D=F[I],R=D[P^1],O=e(n[w],n[p],n[L],n[R]);O>0&&(h=D,L=R,E=P)}return _||h&&d(h,E),L}function y(w,p){var _=s[p][w][0],h=[w];d(_,p);for(var L=_[p^1];;){for(;L!==w;)h.push(L),L=f(h[h.length-2],L,!1);if(s[0][w].length+s[1][w].length===0)break;var E=h[h.length-1],S=w,P=h[1],F=f(E,S,!0);if(e(n[E],n[S],n[P],n[F])<0)break;h.push(w),L=f(E,S)}return h}function l(w,p){return p[1]===p[p.length-1]}for(var o=0;o<r;++o)for(var x=0;x<2;++x){for(var c=[];s[x][o].length>0;){s[0][o].length;var M=y(o,x);l(c,M)?c.push.apply(c,M):(c.length>0&&g.push(c),c=M)}c.length>0&&g.push(c)}return g}},{"compare-angle":54}],267:[function(u,A,T){A.exports=a;var e=u("edges-to-adjacency-list");function a(i,n){for(var r=e(i,n.length),v=new Array(n.length),s=new Array(n.length),o=[],b=0;b<n.length;++b){var g=r[b].length;s[b]=g,v[b]=!0,g<=1&&o.push(b)}for(;o.length>0;){var d=o.pop();v[d]=!1;for(var f=r[d],b=0;b<f.length;++b){var y=f[b];--s[y]===0&&o.push(y)}}for(var l=new Array(n.length),x=[],b=0;b<n.length;++b)if(v[b]){var d=x.length;l[b]=d,x.push(n[b])}else l[b]=-1;for(var c=[],b=0;b<i.length;++b){var M=i[b];v[M[0]]&&v[M[1]]&&c.push([l[M[0]],l[M[1]]])}return[c,x]}},{"edges-to-adjacency-list":66}],268:[function(u,A,T){A.exports=g;var e=u("edges-to-adjacency-list"),a=u("planar-dual"),i=u("point-in-big-polygon"),n=u("two-product"),r=u("robust-sum"),v=u("uniq"),s=u("./lib/trim-leaves");function o(d,f){for(var y=new Array(d),l=0;l<d;++l)y[l]=f;return y}function b(d){for(var f=new Array(d),y=0;y<d;++y)f[y]=[];return f}function g(d,f){var H=s(d,f);d=H[0],f=H[1];var y=f.length;d.length;for(var l=e(d,f.length),x=0;x<y;++x)if(l[x].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var c=a(d,f);function M(ae){for(var le=ae.length,_e=[0],fe=0;fe<le;++fe){var me=f[ae[fe]],xe=f[ae[(fe+1)%le]],ye=n(-me[0],me[1]),be=n(-me[0],xe[1]),ke=n(xe[0],me[1]),De=n(xe[0],xe[1]);_e=r(_e,r(r(ye,be),r(ke,De)))}return _e[_e.length-1]>0}c=c.filter(M);for(var w=c.length,p=new Array(w),_=new Array(w),x=0;x<w;++x){p[x]=x;var h=new Array(w),L=c[x].map(function(le){return f[le]}),E=i([L]),S=0;e:for(var P=0;P<w;++P)if(h[P]=0,x!==P){for(var F=c[P],I=F.length,D=0;D<I;++D){var R=E(f[F[D]]);if(R!==0){R<0&&(h[P]=1,S+=1);continue e}}h[P]=1,S+=1}_[x]=[S,x,h]}_.sort(function(ae,le){return le[0]-ae[0]});for(var x=0;x<w;++x)for(var h=_[x],O=h[1],z=h[2],P=0;P<w;++P)z[P]&&(p[P]=O);for(var G=b(w),x=0;x<w;++x)G[x].push(p[x]),G[p[x]].push(x);for(var Y={},ee=o(y,!1),x=0;x<w;++x)for(var F=c[x],I=F.length,P=0;P<I;++P){var j=F[P],X=F[(P+1)%I],ie=Math.min(j,X)+":"+Math.max(j,X);if(ie in Y){var he=Y[ie];G[he].push(x),G[x].push(he),ee[j]=ee[X]=!0}else Y[ie]=x}function K(ae){for(var le=ae.length,_e=0;_e<le;++_e)if(!ee[ae[_e]])return!1;return!0}for(var $=[],U=o(w,-1),x=0;x<w;++x)p[x]===x&&!K(c[x])?($.push(x),U[x]=0):U[x]=-1;for(var H=[];$.length>0;){var q=$.pop(),re=G[q];v(re,function(ae,le){return ae-le});var Z=re.length,Q=U[q],oe;if(Q===0){var F=c[q];oe=[F]}for(var x=0;x<Z;++x){var se=re[x];if(!(U[se]>=0)&&(U[se]=Q^1,$.push(se),Q===0)){var F=c[se];K(F)||(F.reverse(),oe.push(F))}}Q===0&&H.push(oe)}return H}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(u,A,T){A.exports=f;var e=u("robust-orientation")[3],a=u("slab-decomposition"),i=u("interval-tree-1d"),n=u("binary-search-bounds");function r(){return!0}function v(y){return function(l,x){var c=y[l];return c?!!c.queryPoint(x,r):!1}}function s(y){for(var l={},x=0;x<y.length;++x){var c=y[x],M=c[0][0],w=c[0][1],p=c[1][1],_=[Math.min(w,p),Math.max(w,p)];M in l?l[M].push(_):l[M]=[_]}for(var h={},L=Object.keys(l),x=0;x<L.length;++x){var E=l[L[x]];h[L[x]]=i(E)}return v(h)}function o(y,l){return function(x){var c=n.le(l,x[0]);if(c<0)return 1;var M=y[c];if(!M)if(c>0&&l[c]===x[0])M=y[c-1];else return 1;for(var w=1;M;){var p=M.key,_=e(x,p[0],p[1]);if(p[0][0]<p[1][0])if(_<0)M=M.left;else if(_>0)w=-1,M=M.right;else return 0;else if(_>0)M=M.left;else if(_<0)w=1,M=M.right;else return 0}return w}}function b(y){return 1}function g(y){return function(x){return y(x[0],x[1])?0:1}}function d(y,l){return function(c){return y(c[0],c[1])?0:l(c)}}function f(y){for(var l=y.length,x=[],c=[],M=0;M<l;++M)for(var w=y[M],p=w.length,_=p-1,h=0;h<p;_=h++){var L=w[_],E=w[h];L[0]===E[0]?c.push([L,E]):x.push([L,E])}if(x.length===0)return c.length===0?b:g(s(c));var S=a(x),P=o(S.slabs,S.coordinates);return c.length===0?P:d(s(c),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(u,A,T){var e=new Float64Array(4),a=new Float64Array(4),i=new Float64Array(4);function n(r,v,s,o,b){e.length<o.length&&(e=new Float64Array(o.length),a=new Float64Array(o.length),i=new Float64Array(o.length));for(var g=0;g<o.length;++g)e[g]=r[g]-o[g],a[g]=v[g]-r[g],i[g]=s[g]-r[g];for(var d=0,f=0,y=0,l=0,x=0,c=0,g=0;g<o.length;++g){var M=a[g],w=i[g],p=e[g];d+=M*M,f+=M*w,y+=w*w,l+=p*M,x+=p*w,c+=p*p}var _=Math.abs(d*y-f*f),h=f*x-y*l,L=f*l-d*x,E;if(h+L<=_)if(h<0)L<0&&l<0?(L=0,-l>=d?(h=1,E=d+2*l+c):(h=-l/d,E=l*h+c)):(h=0,x>=0?(L=0,E=c):-x>=y?(L=1,E=y+2*x+c):(L=-x/y,E=x*L+c));else if(L<0)L=0,l>=0?(h=0,E=c):-l>=d?(h=1,E=d+2*l+c):(h=-l/d,E=l*h+c);else{var S=1/_;h*=S,L*=S,E=h*(d*h+f*L+2*l)+L*(f*h+y*L+2*x)+c}else{var P,F,I,D;h<0?(P=f+l,F=y+x,F>P?(I=F-P,D=d-2*f+y,I>=D?(h=1,L=0,E=d+2*l+c):(h=I/D,L=1-h,E=h*(d*h+f*L+2*l)+L*(f*h+y*L+2*x)+c)):(h=0,F<=0?(L=1,E=y+2*x+c):x>=0?(L=0,E=c):(L=-x/y,E=x*L+c))):L<0?(P=f+x,F=d+l,F>P?(I=F-P,D=d-2*f+y,I>=D?(L=1,h=0,E=y+2*x+c):(L=I/D,h=1-L,E=h*(d*h+f*L+2*l)+L*(f*h+y*L+2*x)+c)):(L=0,F<=0?(h=1,E=d+2*l+c):l>=0?(h=0,E=c):(h=-l/d,E=l*h+c))):(I=y+x-f-l,I<=0?(h=0,L=1,E=y+2*x+c):(D=d-2*f+y,I>=D?(h=1,L=0,E=d+2*l+c):(h=I/D,L=1-h,E=h*(d*h+f*L+2*l)+L*(f*h+y*L+2*x)+c)))}for(var R=1-h-L,g=0;g<o.length;++g)b[g]=R*r[g]+h*v[g]+L*s[g];return E<0?0:E}A.exports=n},{}],271:[function(u,A,T){A.exports=u("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(u,A,T){var e=u("big-rat/add");A.exports=a;function a(i,n){for(var r=i.length,v=new Array(r),s=0;s<r;++s)v[s]=e(i[s],n[s]);return v}},{"big-rat/add":15}],273:[function(u,A,T){A.exports=a;var e=u("big-rat");function a(i){for(var n=new Array(i.length),r=0;r<i.length;++r)n[r]=e(i[r]);return n}},{"big-rat":18}],274:[function(u,A,T){var e=u("big-rat"),a=u("big-rat/mul");A.exports=i;function i(n,r){for(var v=e(r),s=n.length,o=new Array(s),b=0;b<s;++b)o[b]=a(n[b],v);return o}},{"big-rat":18,"big-rat/mul":27}],275:[function(u,A,T){var e=u("big-rat/sub");A.exports=a;function a(i,n){for(var r=i.length,v=new Array(r),s=0;s<r;++s)v[s]=e(i[s],n[s]);return v}},{"big-rat/sub":29}],276:[function(u,A,T){var e=u("compare-cell"),a=u("compare-oriented-cell"),i=u("cell-orientation");A.exports=n;function n(r){r.sort(a);for(var v=r.length,s=0,o=0;o<v;++o){var b=r[o],g=i(b);if(g!==0){if(s>0){var d=r[s-1];if(e(b,d)===0&&i(d)!==g){s-=1;continue}}r[s++]=b}}return r.length=s,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(u,A,T){var e="",a;A.exports=i;function i(n,r){if(typeof n!="string")throw new TypeError("expected a string");if(r===1)return n;if(r===2)return n+n;var v=n.length*r;if(a!==n||typeof a>"u")a=n,e="";else if(e.length>=v)return e.substr(0,v);for(;v>e.length&&r>1;)r&1&&(e+=n),r>>=1,n+=n;return e+=n,e=e.substr(0,v),e}},{}],278:[function(u,A,T){(function(e){(function(){A.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof m<"u"?m:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(u,A,T){A.exports=e;function e(a){for(var i=a.length,n=a[a.length-1],r=i,v=i-2;v>=0;--v){var s=n,o=a[v];n=s+o;var b=n-s,g=o-b;g&&(a[--r]=n,n=g)}for(var d=0,v=r;v<i;++v){var s=a[v],o=n;n=s+o;var b=n-s,g=o-b;g&&(a[d++]=g)}return a[d++]=n,a.length=d,a}},{}],280:[function(u,A,T){var e=u("two-product"),a=u("robust-sum"),i=u("robust-scale"),n=u("robust-compress"),r=6;function v(l,x,c,M){return function(p){return M(l(c(p[0][0],p[1][1]),c(-p[0][1],p[1][0])))}}function s(l,x,c,M){return function(p){return M(l(x(l(c(p[1][1],p[2][2]),c(-p[1][2],p[2][1])),p[0][0]),l(x(l(c(p[1][0],p[2][2]),c(-p[1][2],p[2][0])),-p[0][1]),x(l(c(p[1][0],p[2][1]),c(-p[1][1],p[2][0])),p[0][2]))))}}function o(l,x,c,M){return function(p){return M(l(l(x(l(x(l(c(p[2][2],p[3][3]),c(-p[2][3],p[3][2])),p[1][1]),l(x(l(c(p[2][1],p[3][3]),c(-p[2][3],p[3][1])),-p[1][2]),x(l(c(p[2][1],p[3][2]),c(-p[2][2],p[3][1])),p[1][3]))),p[0][0]),x(l(x(l(c(p[2][2],p[3][3]),c(-p[2][3],p[3][2])),p[1][0]),l(x(l(c(p[2][0],p[3][3]),c(-p[2][3],p[3][0])),-p[1][2]),x(l(c(p[2][0],p[3][2]),c(-p[2][2],p[3][0])),p[1][3]))),-p[0][1])),l(x(l(x(l(c(p[2][1],p[3][3]),c(-p[2][3],p[3][1])),p[1][0]),l(x(l(c(p[2][0],p[3][3]),c(-p[2][3],p[3][0])),-p[1][1]),x(l(c(p[2][0],p[3][1]),c(-p[2][1],p[3][0])),p[1][3]))),p[0][2]),x(l(x(l(c(p[2][1],p[3][2]),c(-p[2][2],p[3][1])),p[1][0]),l(x(l(c(p[2][0],p[3][2]),c(-p[2][2],p[3][0])),-p[1][1]),x(l(c(p[2][0],p[3][1]),c(-p[2][1],p[3][0])),p[1][2]))),-p[0][3]))))}}function b(l,x,c,M){return function(p){return M(l(l(x(l(l(x(l(x(l(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][2]),l(x(l(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),-p[2][3]),x(l(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][4]))),p[1][1]),x(l(x(l(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][1]),l(x(l(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),-p[2][3]),x(l(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),p[2][4]))),-p[1][2])),l(x(l(x(l(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),p[2][1]),l(x(l(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),-p[2][2]),x(l(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][4]))),p[1][3]),x(l(x(l(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][1]),l(x(l(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),-p[2][2]),x(l(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][3]))),-p[1][4]))),p[0][0]),x(l(l(x(l(x(l(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][2]),l(x(l(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),-p[2][3]),x(l(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][4]))),p[1][0]),x(l(x(l(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][0]),l(x(l(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][3]),x(l(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),p[2][4]))),-p[1][2])),l(x(l(x(l(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),p[2][0]),l(x(l(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][2]),x(l(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),p[2][4]))),p[1][3]),x(l(x(l(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][0]),l(x(l(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),-p[2][2]),x(l(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),p[2][3]))),-p[1][4]))),-p[0][1])),l(x(l(l(x(l(x(l(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][1]),l(x(l(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),-p[2][3]),x(l(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),p[2][4]))),p[1][0]),x(l(x(l(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][0]),l(x(l(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][3]),x(l(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),p[2][4]))),-p[1][1])),l(x(l(x(l(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),p[2][0]),l(x(l(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][1]),x(l(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][4]))),p[1][3]),x(l(x(l(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),p[2][0]),l(x(l(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),-p[2][1]),x(l(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][3]))),-p[1][4]))),p[0][2]),l(x(l(l(x(l(x(l(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),p[2][1]),l(x(l(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),-p[2][2]),x(l(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][4]))),p[1][0]),x(l(x(l(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),p[2][0]),l(x(l(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][2]),x(l(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),p[2][4]))),-p[1][1])),l(x(l(x(l(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),p[2][0]),l(x(l(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][1]),x(l(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][4]))),p[1][2]),x(l(x(l(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][0]),l(x(l(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),-p[2][1]),x(l(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][2]))),-p[1][4]))),-p[0][3]),x(l(l(x(l(x(l(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][1]),l(x(l(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),-p[2][2]),x(l(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][3]))),p[1][0]),x(l(x(l(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][0]),l(x(l(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),-p[2][2]),x(l(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),p[2][3]))),-p[1][1])),l(x(l(x(l(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),p[2][0]),l(x(l(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),-p[2][1]),x(l(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][3]))),p[1][2]),x(l(x(l(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][0]),l(x(l(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),-p[2][1]),x(l(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][2]))),-p[1][3]))),p[0][4])))))}}function g(l){var x=l===2?v:l===3?s:l===4?o:l===5?b:void 0;return x(a,i,e,n)}var d=[function(){return[0]},function(x){return[x[0][0]]}];function f(l,x,c,M,w,p,_,h){return function(E){switch(E.length){case 0:return l(E);case 1:return x(E);case 2:return c(E);case 3:return M(E);case 4:return w(E);case 5:return p(E)}var S=_[E.length];return S||(S=_[E.length]=h(E.length)),S(E)}}function y(){for(;d.length<r;)d.push(g(d.length));A.exports=f.apply(void 0,d.concat([d,g]));for(var l=0;l<d.length;++l)A.exports[l]=d[l]}y()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(u,A,T){var e=u("two-product"),a=u("robust-sum");A.exports=i;function i(n,r){for(var v=e(n[0],r[0]),s=1;s<n.length;++s)v=a(v,e(n[s],r[s]));return v}},{"robust-sum":289,"two-product":306}],282:[function(u,A,T){var e=u("two-product"),a=u("robust-sum"),i=u("robust-subtract"),n=u("robust-scale"),r=6;function v(w){var p=w===3?g:w===4?d:w===5?f:y;return p(a,i,e,n)}function s(){return 0}function o(){return 0}function b(){return 0}function g(w,p,_,h){function L(E,S,P){var F=_(E[0],E[0]),I=h(F,S[0]),D=h(F,P[0]),R=_(S[0],S[0]),O=h(R,E[0]),z=h(R,P[0]),G=_(P[0],P[0]),Y=h(G,E[0]),ee=h(G,S[0]),j=w(p(ee,z),p(O,I)),X=p(Y,D),ie=p(j,X);return ie[ie.length-1]}return L}function d(w,p,_,h){function L(E,S,P,F){var I=w(_(E[0],E[0]),_(E[1],E[1])),D=h(I,S[0]),R=h(I,P[0]),O=h(I,F[0]),z=w(_(S[0],S[0]),_(S[1],S[1])),G=h(z,E[0]),Y=h(z,P[0]),ee=h(z,F[0]),j=w(_(P[0],P[0]),_(P[1],P[1])),X=h(j,E[0]),ie=h(j,S[0]),he=h(j,F[0]),K=w(_(F[0],F[0]),_(F[1],F[1])),$=h(K,E[0]),U=h(K,S[0]),H=h(K,P[0]),q=w(w(h(p(H,he),S[1]),w(h(p(U,ee),-P[1]),h(p(ie,Y),F[1]))),w(h(p(U,ee),E[1]),w(h(p($,O),-S[1]),h(p(G,D),F[1])))),re=w(w(h(p(H,he),E[1]),w(h(p($,O),-P[1]),h(p(X,R),F[1]))),w(h(p(ie,Y),E[1]),w(h(p(X,R),-S[1]),h(p(G,D),P[1])))),Z=p(q,re);return Z[Z.length-1]}return L}function f(w,p,_,h){function L(E,S,P,F,I){var D=w(_(E[0],E[0]),w(_(E[1],E[1]),_(E[2],E[2]))),R=h(D,S[0]),O=h(D,P[0]),z=h(D,F[0]),G=h(D,I[0]),Y=w(_(S[0],S[0]),w(_(S[1],S[1]),_(S[2],S[2]))),ee=h(Y,E[0]),j=h(Y,P[0]),X=h(Y,F[0]),ie=h(Y,I[0]),he=w(_(P[0],P[0]),w(_(P[1],P[1]),_(P[2],P[2]))),K=h(he,E[0]),$=h(he,S[0]),U=h(he,F[0]),H=h(he,I[0]),q=w(_(F[0],F[0]),w(_(F[1],F[1]),_(F[2],F[2]))),re=h(q,E[0]),Z=h(q,S[0]),Q=h(q,P[0]),oe=h(q,I[0]),se=w(_(I[0],I[0]),w(_(I[1],I[1]),_(I[2],I[2]))),ae=h(se,E[0]),le=h(se,S[0]),_e=h(se,P[0]),fe=h(se,F[0]),me=w(w(w(h(w(h(p(fe,oe),P[1]),w(h(p(_e,H),-F[1]),h(p(Q,U),I[1]))),S[2]),w(h(w(h(p(fe,oe),S[1]),w(h(p(le,ie),-F[1]),h(p(Z,X),I[1]))),-P[2]),h(w(h(p(_e,H),S[1]),w(h(p(le,ie),-P[1]),h(p($,j),I[1]))),F[2]))),w(h(w(h(p(Q,U),S[1]),w(h(p(Z,X),-P[1]),h(p($,j),F[1]))),-I[2]),w(h(w(h(p(fe,oe),S[1]),w(h(p(le,ie),-F[1]),h(p(Z,X),I[1]))),E[2]),h(w(h(p(fe,oe),E[1]),w(h(p(ae,G),-F[1]),h(p(re,z),I[1]))),-S[2])))),w(w(h(w(h(p(le,ie),E[1]),w(h(p(ae,G),-S[1]),h(p(ee,R),I[1]))),F[2]),w(h(w(h(p(Z,X),E[1]),w(h(p(re,z),-S[1]),h(p(ee,R),F[1]))),-I[2]),h(w(h(p(Q,U),S[1]),w(h(p(Z,X),-P[1]),h(p($,j),F[1]))),E[2]))),w(h(w(h(p(Q,U),E[1]),w(h(p(re,z),-P[1]),h(p(K,O),F[1]))),-S[2]),w(h(w(h(p(Z,X),E[1]),w(h(p(re,z),-S[1]),h(p(ee,R),F[1]))),P[2]),h(w(h(p($,j),E[1]),w(h(p(K,O),-S[1]),h(p(ee,R),P[1]))),-F[2]))))),xe=w(w(w(h(w(h(p(fe,oe),P[1]),w(h(p(_e,H),-F[1]),h(p(Q,U),I[1]))),E[2]),h(w(h(p(fe,oe),E[1]),w(h(p(ae,G),-F[1]),h(p(re,z),I[1]))),-P[2])),w(h(w(h(p(_e,H),E[1]),w(h(p(ae,G),-P[1]),h(p(K,O),I[1]))),F[2]),h(w(h(p(Q,U),E[1]),w(h(p(re,z),-P[1]),h(p(K,O),F[1]))),-I[2]))),w(w(h(w(h(p(_e,H),S[1]),w(h(p(le,ie),-P[1]),h(p($,j),I[1]))),E[2]),h(w(h(p(_e,H),E[1]),w(h(p(ae,G),-P[1]),h(p(K,O),I[1]))),-S[2])),w(h(w(h(p(le,ie),E[1]),w(h(p(ae,G),-S[1]),h(p(ee,R),I[1]))),P[2]),h(w(h(p($,j),E[1]),w(h(p(K,O),-S[1]),h(p(ee,R),P[1]))),-I[2])))),ye=p(me,xe);return ye[ye.length-1]}return L}function y(w,p,_,h){function L(E,S,P,F,I,D){var R=w(w(_(E[0],E[0]),_(E[1],E[1])),w(_(E[2],E[2]),_(E[3],E[3]))),O=h(R,S[0]),z=h(R,P[0]),G=h(R,F[0]),Y=h(R,I[0]),ee=h(R,D[0]),j=w(w(_(S[0],S[0]),_(S[1],S[1])),w(_(S[2],S[2]),_(S[3],S[3]))),X=h(j,E[0]),ie=h(j,P[0]),he=h(j,F[0]),K=h(j,I[0]),$=h(j,D[0]),U=w(w(_(P[0],P[0]),_(P[1],P[1])),w(_(P[2],P[2]),_(P[3],P[3]))),H=h(U,E[0]),q=h(U,S[0]),re=h(U,F[0]),Z=h(U,I[0]),Q=h(U,D[0]),oe=w(w(_(F[0],F[0]),_(F[1],F[1])),w(_(F[2],F[2]),_(F[3],F[3]))),se=h(oe,E[0]),ae=h(oe,S[0]),le=h(oe,P[0]),_e=h(oe,I[0]),fe=h(oe,D[0]),me=w(w(_(I[0],I[0]),_(I[1],I[1])),w(_(I[2],I[2]),_(I[3],I[3]))),xe=h(me,E[0]),ye=h(me,S[0]),be=h(me,P[0]),ke=h(me,F[0]),De=h(me,D[0]),He=w(w(_(D[0],D[0]),_(D[1],D[1])),w(_(D[2],D[2]),_(D[3],D[3]))),Ae=h(He,E[0]),Le=h(He,S[0]),Ze=h(He,P[0]),We=h(He,F[0]),ze=h(He,I[0]),Ie=w(w(w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),P[2]),h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),-F[2])),w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),I[2]),h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),-D[2]))),S[3]),w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),S[2]),h(w(h(p(ze,De),S[1]),w(h(p(Le,$),-I[1]),h(p(ye,K),D[1]))),-F[2])),w(h(w(h(p(We,fe),S[1]),w(h(p(Le,$),-F[1]),h(p(ae,he),D[1]))),I[2]),h(w(h(p(ke,_e),S[1]),w(h(p(ye,K),-F[1]),h(p(ae,he),I[1]))),-D[2]))),-P[3]),h(w(w(h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),S[2]),h(w(h(p(ze,De),S[1]),w(h(p(Le,$),-I[1]),h(p(ye,K),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,$),-P[1]),h(p(q,ie),D[1]))),I[2]),h(w(h(p(be,Z),S[1]),w(h(p(ye,K),-P[1]),h(p(q,ie),I[1]))),-D[2]))),F[3]))),w(w(h(w(w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),S[2]),h(w(h(p(We,fe),S[1]),w(h(p(Le,$),-F[1]),h(p(ae,he),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,$),-P[1]),h(p(q,ie),D[1]))),F[2]),h(w(h(p(le,re),S[1]),w(h(p(ae,he),-P[1]),h(p(q,ie),F[1]))),-D[2]))),-I[3]),h(w(w(h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),S[2]),h(w(h(p(ke,_e),S[1]),w(h(p(ye,K),-F[1]),h(p(ae,he),I[1]))),-P[2])),w(h(w(h(p(be,Z),S[1]),w(h(p(ye,K),-P[1]),h(p(q,ie),I[1]))),F[2]),h(w(h(p(le,re),S[1]),w(h(p(ae,he),-P[1]),h(p(q,ie),F[1]))),-I[2]))),D[3])),w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),S[2]),h(w(h(p(ze,De),S[1]),w(h(p(Le,$),-I[1]),h(p(ye,K),D[1]))),-F[2])),w(h(w(h(p(We,fe),S[1]),w(h(p(Le,$),-F[1]),h(p(ae,he),D[1]))),I[2]),h(w(h(p(ke,_e),S[1]),w(h(p(ye,K),-F[1]),h(p(ae,he),I[1]))),-D[2]))),E[3]),h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-F[2])),w(h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(se,G),D[1]))),I[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(se,G),I[1]))),-D[2]))),-S[3])))),w(w(w(h(w(w(h(w(h(p(ze,De),S[1]),w(h(p(Le,$),-I[1]),h(p(ye,K),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-S[2])),w(h(w(h(p(Le,$),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),I[2]),h(w(h(p(ye,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),-D[2]))),F[3]),h(w(w(h(w(h(p(We,fe),S[1]),w(h(p(Le,$),-F[1]),h(p(ae,he),D[1]))),E[2]),h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(se,G),D[1]))),-S[2])),w(h(w(h(p(Le,$),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),F[2]),h(w(h(p(ae,he),E[1]),w(h(p(se,G),-S[1]),h(p(X,O),F[1]))),-D[2]))),-I[3])),w(h(w(w(h(w(h(p(ke,_e),S[1]),w(h(p(ye,K),-F[1]),h(p(ae,he),I[1]))),E[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(se,G),I[1]))),-S[2])),w(h(w(h(p(ye,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),F[2]),h(w(h(p(ae,he),E[1]),w(h(p(se,G),-S[1]),h(p(X,O),F[1]))),-I[2]))),D[3]),h(w(w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),S[2]),h(w(h(p(We,fe),S[1]),w(h(p(Le,$),-F[1]),h(p(ae,he),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,$),-P[1]),h(p(q,ie),D[1]))),F[2]),h(w(h(p(le,re),S[1]),w(h(p(ae,he),-P[1]),h(p(q,ie),F[1]))),-D[2]))),E[3]))),w(w(h(w(w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),E[2]),h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(se,G),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),F[2]),h(w(h(p(le,re),E[1]),w(h(p(se,G),-P[1]),h(p(H,z),F[1]))),-D[2]))),-S[3]),h(w(w(h(w(h(p(We,fe),S[1]),w(h(p(Le,$),-F[1]),h(p(ae,he),D[1]))),E[2]),h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(se,G),D[1]))),-S[2])),w(h(w(h(p(Le,$),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),F[2]),h(w(h(p(ae,he),E[1]),w(h(p(se,G),-S[1]),h(p(X,O),F[1]))),-D[2]))),P[3])),w(h(w(w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,$),-P[1]),h(p(q,ie),D[1]))),E[2]),h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),-S[2])),w(h(w(h(p(Le,$),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),P[2]),h(w(h(p(q,ie),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-D[2]))),-F[3]),h(w(w(h(w(h(p(le,re),S[1]),w(h(p(ae,he),-P[1]),h(p(q,ie),F[1]))),E[2]),h(w(h(p(le,re),E[1]),w(h(p(se,G),-P[1]),h(p(H,z),F[1]))),-S[2])),w(h(w(h(p(ae,he),E[1]),w(h(p(se,G),-S[1]),h(p(X,O),F[1]))),P[2]),h(w(h(p(q,ie),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-F[2]))),D[3]))))),Ve=w(w(w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),P[2]),h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),-F[2])),w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),I[2]),h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),-D[2]))),E[3]),w(h(w(w(h(w(h(p(ze,De),F[1]),w(h(p(We,fe),-I[1]),h(p(ke,_e),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-F[2])),w(h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(se,G),D[1]))),I[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(se,G),I[1]))),-D[2]))),-P[3]),h(w(w(h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),I[2]),h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-D[2]))),F[3]))),w(w(h(w(w(h(w(h(p(We,fe),P[1]),w(h(p(Ze,Q),-F[1]),h(p(le,re),D[1]))),E[2]),h(w(h(p(We,fe),E[1]),w(h(p(Ae,ee),-F[1]),h(p(se,G),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),F[2]),h(w(h(p(le,re),E[1]),w(h(p(se,G),-P[1]),h(p(H,z),F[1]))),-D[2]))),-I[3]),h(w(w(h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),E[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(se,G),I[1]))),-P[2])),w(h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),F[2]),h(w(h(p(le,re),E[1]),w(h(p(se,G),-P[1]),h(p(H,z),F[1]))),-I[2]))),D[3])),w(h(w(w(h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),S[2]),h(w(h(p(ze,De),S[1]),w(h(p(Le,$),-I[1]),h(p(ye,K),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,$),-P[1]),h(p(q,ie),D[1]))),I[2]),h(w(h(p(be,Z),S[1]),w(h(p(ye,K),-P[1]),h(p(q,ie),I[1]))),-D[2]))),E[3]),h(w(w(h(w(h(p(ze,De),P[1]),w(h(p(Ze,Q),-I[1]),h(p(be,Z),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-P[2])),w(h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),I[2]),h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-D[2]))),-S[3])))),w(w(w(h(w(w(h(w(h(p(ze,De),S[1]),w(h(p(Le,$),-I[1]),h(p(ye,K),D[1]))),E[2]),h(w(h(p(ze,De),E[1]),w(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-S[2])),w(h(w(h(p(Le,$),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),I[2]),h(w(h(p(ye,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),-D[2]))),P[3]),h(w(w(h(w(h(p(Ze,Q),S[1]),w(h(p(Le,$),-P[1]),h(p(q,ie),D[1]))),E[2]),h(w(h(p(Ze,Q),E[1]),w(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),-S[2])),w(h(w(h(p(Le,$),E[1]),w(h(p(Ae,ee),-S[1]),h(p(X,O),D[1]))),P[2]),h(w(h(p(q,ie),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-D[2]))),-I[3])),w(h(w(w(h(w(h(p(be,Z),S[1]),w(h(p(ye,K),-P[1]),h(p(q,ie),I[1]))),E[2]),h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-S[2])),w(h(w(h(p(ye,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),P[2]),h(w(h(p(q,ie),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-I[2]))),D[3]),h(w(w(h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),S[2]),h(w(h(p(ke,_e),S[1]),w(h(p(ye,K),-F[1]),h(p(ae,he),I[1]))),-P[2])),w(h(w(h(p(be,Z),S[1]),w(h(p(ye,K),-P[1]),h(p(q,ie),I[1]))),F[2]),h(w(h(p(le,re),S[1]),w(h(p(ae,he),-P[1]),h(p(q,ie),F[1]))),-I[2]))),E[3]))),w(w(h(w(w(h(w(h(p(ke,_e),P[1]),w(h(p(be,Z),-F[1]),h(p(le,re),I[1]))),E[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(se,G),I[1]))),-P[2])),w(h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),F[2]),h(w(h(p(le,re),E[1]),w(h(p(se,G),-P[1]),h(p(H,z),F[1]))),-I[2]))),-S[3]),h(w(w(h(w(h(p(ke,_e),S[1]),w(h(p(ye,K),-F[1]),h(p(ae,he),I[1]))),E[2]),h(w(h(p(ke,_e),E[1]),w(h(p(xe,Y),-F[1]),h(p(se,G),I[1]))),-S[2])),w(h(w(h(p(ye,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),F[2]),h(w(h(p(ae,he),E[1]),w(h(p(se,G),-S[1]),h(p(X,O),F[1]))),-I[2]))),P[3])),w(h(w(w(h(w(h(p(be,Z),S[1]),w(h(p(ye,K),-P[1]),h(p(q,ie),I[1]))),E[2]),h(w(h(p(be,Z),E[1]),w(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-S[2])),w(h(w(h(p(ye,K),E[1]),w(h(p(xe,Y),-S[1]),h(p(X,O),I[1]))),P[2]),h(w(h(p(q,ie),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-I[2]))),-F[3]),h(w(w(h(w(h(p(le,re),S[1]),w(h(p(ae,he),-P[1]),h(p(q,ie),F[1]))),E[2]),h(w(h(p(le,re),E[1]),w(h(p(se,G),-P[1]),h(p(H,z),F[1]))),-S[2])),w(h(w(h(p(ae,he),E[1]),w(h(p(se,G),-S[1]),h(p(X,O),F[1]))),P[2]),h(w(h(p(q,ie),E[1]),w(h(p(H,z),-S[1]),h(p(X,O),P[1]))),-F[2]))),I[3]))))),dt=p(Ie,Ve);return dt[dt.length-1]}return L}var l=[s,o,b];function x(w){var p=l[w.length];return p||(p=l[w.length]=v(w.length)),p.apply(void 0,w)}function c(w,p,_,h,L,E,S,P){function F(I,D,R,O,z,G){switch(arguments.length){case 0:case 1:return 0;case 2:return h(I,D);case 3:return L(I,D,R);case 4:return E(I,D,R,O);case 5:return S(I,D,R,O,z);case 6:return P(I,D,R,O,z,G)}for(var Y=new Array(arguments.length),ee=0;ee<arguments.length;++ee)Y[ee]=arguments[ee];return w(Y)}return F}function M(){for(;l.length<=r;)l.push(v(l.length));A.exports=c.apply(void 0,[x].concat(l));for(var w=0;w<=r;++w)A.exports[w]=l[w]}M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(u,A,T){var e=u("robust-determinant"),a=6;function i(l){var x=l===2?v:l===3?s:l===4?o:l===5?b:g;return l<6?x(e[l]):x(e)}function n(){return[[0]]}function r(l,x){return[[x[0]],[l[0][0]]]}function v(l){return function(c,M){return[l([[+M[0],+c[0][1]],[+M[1],+c[1][1]]]),l([[+c[0][0],+M[0]],[+c[1][0],+M[1]]]),l(c)]}}function s(l){return function(c,M){return[l([[+M[0],+c[0][1],+c[0][2]],[+M[1],+c[1][1],+c[1][2]],[+M[2],+c[2][1],+c[2][2]]]),l([[+c[0][0],+M[0],+c[0][2]],[+c[1][0],+M[1],+c[1][2]],[+c[2][0],+M[2],+c[2][2]]]),l([[+c[0][0],+c[0][1],+M[0]],[+c[1][0],+c[1][1],+M[1]],[+c[2][0],+c[2][1],+M[2]]]),l(c)]}}function o(l){return function(c,M){return[l([[+M[0],+c[0][1],+c[0][2],+c[0][3]],[+M[1],+c[1][1],+c[1][2],+c[1][3]],[+M[2],+c[2][1],+c[2][2],+c[2][3]],[+M[3],+c[3][1],+c[3][2],+c[3][3]]]),l([[+c[0][0],+M[0],+c[0][2],+c[0][3]],[+c[1][0],+M[1],+c[1][2],+c[1][3]],[+c[2][0],+M[2],+c[2][2],+c[2][3]],[+c[3][0],+M[3],+c[3][2],+c[3][3]]]),l([[+c[0][0],+c[0][1],+M[0],+c[0][3]],[+c[1][0],+c[1][1],+M[1],+c[1][3]],[+c[2][0],+c[2][1],+M[2],+c[2][3]],[+c[3][0],+c[3][1],+M[3],+c[3][3]]]),l([[+c[0][0],+c[0][1],+c[0][2],+M[0]],[+c[1][0],+c[1][1],+c[1][2],+M[1]],[+c[2][0],+c[2][1],+c[2][2],+M[2]],[+c[3][0],+c[3][1],+c[3][2],+M[3]]]),l(c)]}}function b(l){return function(c,M){return[l([[+M[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4]],[+M[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4]],[+M[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4]],[+M[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4]],[+M[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4]]]),l([[+c[0][0],+M[0],+c[0][2],+c[0][3],+c[0][4]],[+c[1][0],+M[1],+c[1][2],+c[1][3],+c[1][4]],[+c[2][0],+M[2],+c[2][2],+c[2][3],+c[2][4]],[+c[3][0],+M[3],+c[3][2],+c[3][3],+c[3][4]],[+c[4][0],+M[4],+c[4][2],+c[4][3],+c[4][4]]]),l([[+c[0][0],+c[0][1],+M[0],+c[0][3],+c[0][4]],[+c[1][0],+c[1][1],+M[1],+c[1][3],+c[1][4]],[+c[2][0],+c[2][1],+M[2],+c[2][3],+c[2][4]],[+c[3][0],+c[3][1],+M[3],+c[3][3],+c[3][4]],[+c[4][0],+c[4][1],+M[4],+c[4][3],+c[4][4]]]),l([[+c[0][0],+c[0][1],+c[0][2],+M[0],+c[0][4]],[+c[1][0],+c[1][1],+c[1][2],+M[1],+c[1][4]],[+c[2][0],+c[2][1],+c[2][2],+M[2],+c[2][4]],[+c[3][0],+c[3][1],+c[3][2],+M[3],+c[3][4]],[+c[4][0],+c[4][1],+c[4][2],+M[4],+c[4][4]]]),l([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+M[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+M[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+M[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+M[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+M[4]]]),l(c)]}}function g(l){return function(c,M){return[l([[+M[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+M[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+M[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+M[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+M[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+M[5],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),l([[+c[0][0],+M[0],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+M[1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+M[2],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+M[3],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+M[4],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+M[5],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),l([[+c[0][0],+c[0][1],+M[0],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+M[1],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+M[2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+M[3],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+M[4],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+M[5],+c[5][3],+c[5][4],+c[5][5]]]),l([[+c[0][0],+c[0][1],+c[0][2],+M[0],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+M[1],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+M[2],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+M[3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+M[4],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+M[5],+c[5][4],+c[5][5]]]),l([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+M[0],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+M[1],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+M[2],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+M[3],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+M[4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+M[5],+c[5][5]]]),l([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+M[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+M[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+M[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+M[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+M[4]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+M[5]]]),l(c)]}}var d=[n,r];function f(l,x,c,M,w,p,_,h){return function(E,S){switch(E.length){case 0:return l(E,S);case 1:return x(E,S);case 2:return c(E,S);case 3:return M(E,S);case 4:return w(E,S);case 5:return p(E,S)}var P=_[E.length];return P||(P=_[E.length]=h(E.length)),P(E,S)}}function y(){for(;d.length<a;)d.push(i(d.length));A.exports=f.apply(void 0,d.concat([d,i]));for(var l=0;l<a;++l)A.exports[l]=d[l]}y()},{"robust-determinant":280}],284:[function(u,A,T){var e=u("two-product"),a=u("robust-sum"),i=u("robust-scale"),n=u("robust-subtract"),r=5,v=11102230246251565e-32,s=(3+16*v)*v,o=(7+56*v)*v;function b(p,_,h,L){return function(S,P,F){var I=p(p(_(P[1],F[0]),_(-F[1],P[0])),p(_(S[1],P[0]),_(-P[1],S[0]))),D=p(_(S[1],F[0]),_(-F[1],S[0])),R=L(I,D);return R[R.length-1]}}function g(p,_,h,L){return function(S,P,F,I){var D=p(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),P[2]),p(h(p(_(P[1],I[0]),_(-I[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),I[2]))),p(h(p(_(P[1],I[0]),_(-I[1],P[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),I[2])))),R=p(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),I[2]))),p(h(p(_(P[1],F[0]),_(-F[1],P[0])),S[2]),p(h(p(_(S[1],F[0]),_(-F[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),F[2])))),O=L(D,R);return O[O.length-1]}}function d(p,_,h,L){return function(S,P,F,I,D){var R=p(p(p(h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),F[2]),p(h(p(_(F[1],D[0]),_(-D[1],F[0])),-I[2]),h(p(_(F[1],I[0]),_(-I[1],F[0])),D[2]))),P[3]),p(h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),P[2]),p(h(p(_(P[1],D[0]),_(-D[1],P[0])),-I[2]),h(p(_(P[1],I[0]),_(-I[1],P[0])),D[2]))),-F[3]),h(p(h(p(_(F[1],D[0]),_(-D[1],F[0])),P[2]),p(h(p(_(P[1],D[0]),_(-D[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),D[2]))),I[3]))),p(h(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),P[2]),p(h(p(_(P[1],I[0]),_(-I[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),I[2]))),-D[3]),p(h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),P[2]),p(h(p(_(P[1],D[0]),_(-D[1],P[0])),-I[2]),h(p(_(P[1],I[0]),_(-I[1],P[0])),D[2]))),S[3]),h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-I[2]),h(p(_(S[1],I[0]),_(-I[1],S[0])),D[2]))),-P[3])))),p(p(h(p(h(p(_(P[1],D[0]),_(-D[1],P[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),D[2]))),I[3]),p(h(p(h(p(_(P[1],I[0]),_(-I[1],P[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),I[2]))),-D[3]),h(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),P[2]),p(h(p(_(P[1],I[0]),_(-I[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),I[2]))),S[3]))),p(h(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),I[2]))),-P[3]),p(h(p(h(p(_(P[1],I[0]),_(-I[1],P[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),I[2]))),F[3]),h(p(h(p(_(P[1],F[0]),_(-F[1],P[0])),S[2]),p(h(p(_(S[1],F[0]),_(-F[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),F[2]))),-I[3]))))),O=p(p(p(h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),F[2]),p(h(p(_(F[1],D[0]),_(-D[1],F[0])),-I[2]),h(p(_(F[1],I[0]),_(-I[1],F[0])),D[2]))),S[3]),h(p(h(p(_(I[1],D[0]),_(-D[1],I[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-I[2]),h(p(_(S[1],I[0]),_(-I[1],S[0])),D[2]))),-F[3])),p(h(p(h(p(_(F[1],D[0]),_(-D[1],F[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),D[2]))),I[3]),h(p(h(p(_(F[1],I[0]),_(-I[1],F[0])),S[2]),p(h(p(_(S[1],I[0]),_(-I[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),I[2]))),-D[3]))),p(p(h(p(h(p(_(F[1],D[0]),_(-D[1],F[0])),P[2]),p(h(p(_(P[1],D[0]),_(-D[1],P[0])),-F[2]),h(p(_(P[1],F[0]),_(-F[1],P[0])),D[2]))),S[3]),h(p(h(p(_(F[1],D[0]),_(-D[1],F[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-F[2]),h(p(_(S[1],F[0]),_(-F[1],S[0])),D[2]))),-P[3])),p(h(p(h(p(_(P[1],D[0]),_(-D[1],P[0])),S[2]),p(h(p(_(S[1],D[0]),_(-D[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),D[2]))),F[3]),h(p(h(p(_(P[1],F[0]),_(-F[1],P[0])),S[2]),p(h(p(_(S[1],F[0]),_(-F[1],S[0])),-P[2]),h(p(_(S[1],P[0]),_(-P[1],S[0])),F[2]))),-D[3])))),z=L(R,O);return z[z.length-1]}}function f(p){var _=p===3?b:p===4?g:d;return _(a,e,i,n)}var y=f(3),l=f(4),x=[function(){return 0},function(){return 0},function(_,h){return h[0]-_[0]},function(_,h,L){var E=(_[1]-L[1])*(h[0]-L[0]),S=(_[0]-L[0])*(h[1]-L[1]),P=E-S,F;if(E>0){if(S<=0)return P;F=E+S}else if(E<0){if(S>=0)return P;F=-(E+S)}else return P;var I=s*F;return P>=I||P<=-I?P:y(_,h,L)},function(_,h,L,E){var S=_[0]-E[0],P=h[0]-E[0],F=L[0]-E[0],I=_[1]-E[1],D=h[1]-E[1],R=L[1]-E[1],O=_[2]-E[2],z=h[2]-E[2],G=L[2]-E[2],Y=P*R,ee=F*D,j=F*I,X=S*R,ie=S*D,he=P*I,K=O*(Y-ee)+z*(j-X)+G*(ie-he),$=(Math.abs(Y)+Math.abs(ee))*Math.abs(O)+(Math.abs(j)+Math.abs(X))*Math.abs(z)+(Math.abs(ie)+Math.abs(he))*Math.abs(G),U=o*$;return K>U||-K>U?K:l(_,h,L,E)}];function c(p){var _=x[p.length];return _||(_=x[p.length]=f(p.length)),_.apply(void 0,p)}function M(p,_,h,L,E,S,P){return function(I,D,R,O,z){switch(arguments.length){case 0:case 1:return 0;case 2:return L(I,D);case 3:return E(I,D,R);case 4:return S(I,D,R,O);case 5:return P(I,D,R,O,z)}for(var G=new Array(arguments.length),Y=0;Y<arguments.length;++Y)G[Y]=arguments[Y];return p(G)}}function w(){for(;x.length<=r;)x.push(f(x.length));A.exports=M.apply(void 0,[c].concat(x));for(var p=0;p<=r;++p)A.exports[p]=x[p]}w()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(u,A,T){var e=u("robust-sum"),a=u("robust-scale");A.exports=i;function i(n,r){if(n.length===1)return a(r,n[0]);if(r.length===1)return a(n,r[0]);if(n.length===0||r.length===0)return[0];var v=[0];if(n.length<r.length)for(var s=0;s<n.length;++s)v=e(v,a(r,n[s]));else for(var s=0;s<r.length;++s)v=e(v,a(n,r[s]));return v}},{"robust-scale":286,"robust-sum":289}],286:[function(u,A,T){var e=u("two-product"),a=u("two-sum");A.exports=i;function i(n,r){var v=n.length;if(v===1){var s=e(n[0],r);return s[0]?s:[s[1]]}var o=new Array(2*v),b=[.1,.1],g=[.1,.1],d=0;e(n[0],r,b),b[0]&&(o[d++]=b[0]);for(var f=1;f<v;++f){e(n[f],r,g);var y=b[1];a(y,g[0],b),b[0]&&(o[d++]=b[0]);var l=g[1],x=b[1],c=l+x,M=c-l,w=x-M;b[1]=c,w&&(o[d++]=w)}return b[1]&&(o[d++]=b[1]),d===0&&(o[d++]=0),o.length=d,o}},{"two-product":306,"two-sum":307}],287:[function(u,A,T){A.exports=i;var e=u("robust-orientation")[3];function a(n,r,v,s){for(var o=0;o<2;++o){var b=n[o],g=r[o],d=Math.min(b,g),f=Math.max(b,g),y=v[o],l=s[o],x=Math.min(y,l),c=Math.max(y,l);if(c<d||f<x)return!1}return!0}function i(n,r,v,s){var o=e(n,v,s),b=e(r,v,s);if(o>0&&b>0||o<0&&b<0)return!1;var g=e(v,n,r),d=e(s,n,r);return g>0&&d>0||g<0&&d<0?!1:o===0&&b===0&&g===0&&d===0?a(n,r,v,s):!0}},{"robust-orientation":284}],288:[function(u,A,T){A.exports=a;function e(i,n){var r=i+n,v=r-i,s=r-v,o=n-v,b=i-s,g=b+o;return g?[g,r]:[r]}function a(i,n){var r=i.length|0,v=n.length|0;if(r===1&&v===1)return e(i[0],-n[0]);var s=r+v,o=new Array(s),b=0,g=0,d=0,f=Math.abs,y=i[g],l=f(y),x=-n[d],c=f(x),M,w;l<c?(w=y,g+=1,g<r&&(y=i[g],l=f(y))):(w=x,d+=1,d<v&&(x=-n[d],c=f(x))),g<r&&l<c||d>=v?(M=y,g+=1,g<r&&(y=i[g],l=f(y))):(M=x,d+=1,d<v&&(x=-n[d],c=f(x)));for(var p=M+w,_=p-M,h=w-_,L=h,E=p,S,P,F,I,D;g<r&&d<v;)l<c?(M=y,g+=1,g<r&&(y=i[g],l=f(y))):(M=x,d+=1,d<v&&(x=-n[d],c=f(x))),w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S;for(;g<r;)M=y,w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,g+=1,g<r&&(y=i[g]);for(;d<v;)M=x,w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,d+=1,d<v&&(x=-n[d]);return L&&(o[b++]=L),E&&(o[b++]=E),b||(o[b++]=0),o.length=b,o}},{}],289:[function(u,A,T){A.exports=a;function e(i,n){var r=i+n,v=r-i,s=r-v,o=n-v,b=i-s,g=b+o;return g?[g,r]:[r]}function a(i,n){var r=i.length|0,v=n.length|0;if(r===1&&v===1)return e(i[0],n[0]);var s=r+v,o=new Array(s),b=0,g=0,d=0,f=Math.abs,y=i[g],l=f(y),x=n[d],c=f(x),M,w;l<c?(w=y,g+=1,g<r&&(y=i[g],l=f(y))):(w=x,d+=1,d<v&&(x=n[d],c=f(x))),g<r&&l<c||d>=v?(M=y,g+=1,g<r&&(y=i[g],l=f(y))):(M=x,d+=1,d<v&&(x=n[d],c=f(x)));for(var p=M+w,_=p-M,h=w-_,L=h,E=p,S,P,F,I,D;g<r&&d<v;)l<c?(M=y,g+=1,g<r&&(y=i[g],l=f(y))):(M=x,d+=1,d<v&&(x=n[d],c=f(x))),w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S;for(;g<r;)M=y,w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,g+=1,g<r&&(y=i[g]);for(;d<v;)M=x,w=L,p=M+w,_=p-M,h=w-_,h&&(o[b++]=h),S=E+p,P=S-E,F=S-P,I=p-P,D=E-F,L=D+I,E=S,d+=1,d<v&&(x=n[d]);return L&&(o[b++]=L),E&&(o[b++]=E),b||(o[b++]=0),o.length=b,o}},{}],290:[function(u,A,T){A.exports=i;var e=u("boundary-cells"),a=u("reduce-simplicial-complex");function i(n){return a(e(n))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(u,A,T){A.exports=d;var e=u("ndarray"),a=u("typedarray-pool"),i=u("ndarray-sort"),n=u("./lib/codegen");function r(f){for(var y=f.length,l=0,x=0;x<y;++x)l=Math.max(l,f[x].length)|0;return l-1}function v(f,y){for(var l=f.length,x=a.mallocUint8(l),c=0;c<l;++c)x[c]=f[c]<y|0;return x}function s(f,y){for(var l=f.length,x=y*(y+1)/2*l|0,c=a.mallocUint32(x*2),M=0,w=0;w<l;++w)for(var p=f[w],y=p.length,_=0;_<y;++_)for(var h=0;h<_;++h){var L=p[h],E=p[_];c[M++]=Math.min(L,E)|0,c[M++]=Math.max(L,E)|0}var S=M/2|0;i(e(c,[S,2]));for(var P=2,w=2;w<M;w+=2)c[w-2]===c[w]&&c[w-1]===c[w+1]||(c[P++]=c[w],c[P++]=c[w+1]);return e(c,[P/2|0,2])}function o(f,y,l,x){for(var c=f.data,M=f.shape[0],w=a.mallocDouble(M),p=0,_=0;_<M;++_){var h=c[2*_],L=c[2*_+1];if(l[h]!==l[L]){var E=y[h],S=y[L];c[2*p]=h,c[2*p+1]=L,w[p++]=(S-x)/(S-E)}}return f.shape[0]=p,e(w,[p])}function b(f,y){var l=a.mallocInt32(y*2),x=f.shape[0],c=f.data;l[0]=0;for(var M=0,w=0;w<x;++w){var p=c[2*w];if(p!==M){for(l[2*M+1]=w;++M<p;)l[2*M]=w,l[2*M+1]=w;l[2*M]=w}}for(l[2*M+1]=x;++M<y;)l[2*M]=l[2*M+1]=x;return l}function g(f){for(var y=f.shape[0]|0,l=f.data,x=new Array(y),c=0;c<y;++c)x[c]=[l[2*c],l[2*c+1]];return x}function d(f,y,l,x){l=l||0,typeof x>"u"&&(x=r(f));var c=f.length;if(c===0||x<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=v(y,+l),w=s(f,x),p=o(w,y,M,+l),_=b(w,y.length|0),h=n(x)(f,w.data,_,M),L=g(w),E=[].slice.call(p.data,0,p.shape[0]);return a.free(M),a.free(w.data),a.free(p.data),a.free(_),{cells:h,vertexIds:L,vertexWeights:E}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(u,A,T){A.exports=a;var e=[function(){function n(r,v,s,o){for(var b=r.length,g=[],d=0;d<b;++d){var f=r[d];f.length}return g}return n},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],y=v[2*g+1];f<y;){var l=f+y>>1,x=s[2*l+1];if(x===d)return l;d<x?y=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var y=v[f],l=y.length;if(l===2){var x=(b[y[0]]<<0)+(b[y[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0])]);break}}}return d}return r},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],y=v[2*g+1];f<y;){var l=f+y>>1,x=s[2*l+1];if(x===d)return l;d<x?y=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var y=v[f],l=y.length;if(l===3){var x=(b[y[0]]<<0)+(b[y[1]]<<1)+(b[y[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[2]),n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0]),n(o,s,y[1],y[2])]);break;case 3:d.push([n(o,s,y[0],y[2]),n(o,s,y[1],y[2])]);break;case 4:d.push([n(o,s,y[2],y[1]),n(o,s,y[2],y[0])]);break;case 5:d.push([n(o,s,y[2],y[1]),n(o,s,y[0],y[1])]);break;case 6:d.push([n(o,s,y[1],y[0]),n(o,s,y[2],y[0])]);break}}else if(l===2){var x=(b[y[0]]<<0)+(b[y[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0])]);break}}}return d}return r},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],y=v[2*g+1];f<y;){var l=f+y>>1,x=s[2*l+1];if(x===d)return l;d<x?y=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var y=v[f],l=y.length;if(l===4){var x=(b[y[0]]<<0)+(b[y[1]]<<1)+(b[y[2]]<<2)+(b[y[3]]<<3);if(x===0||x===15)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[1]),n(o,s,y[0],y[2]),n(o,s,y[0],y[3])]);break;case 2:d.push([n(o,s,y[1],y[2]),n(o,s,y[1],y[0]),n(o,s,y[1],y[3])]);break;case 3:d.push([n(o,s,y[1],y[2]),n(o,s,y[0],y[2]),n(o,s,y[0],y[3])],[n(o,s,y[1],y[3]),n(o,s,y[1],y[2]),n(o,s,y[0],y[3])]);break;case 4:d.push([n(o,s,y[2],y[0]),n(o,s,y[2],y[1]),n(o,s,y[2],y[3])]);break;case 5:d.push([n(o,s,y[0],y[1]),n(o,s,y[2],y[1]),n(o,s,y[0],y[3])],[n(o,s,y[2],y[1]),n(o,s,y[2],y[3]),n(o,s,y[0],y[3])]);break;case 6:d.push([n(o,s,y[2],y[0]),n(o,s,y[1],y[0]),n(o,s,y[1],y[3])],[n(o,s,y[2],y[3]),n(o,s,y[2],y[0]),n(o,s,y[1],y[3])]);break;case 7:d.push([n(o,s,y[0],y[3]),n(o,s,y[1],y[3]),n(o,s,y[2],y[3])]);break;case 8:d.push([n(o,s,y[3],y[1]),n(o,s,y[3],y[0]),n(o,s,y[3],y[2])]);break;case 9:d.push([n(o,s,y[3],y[1]),n(o,s,y[0],y[1]),n(o,s,y[0],y[2])],[n(o,s,y[3],y[2]),n(o,s,y[3],y[1]),n(o,s,y[0],y[2])]);break;case 10:d.push([n(o,s,y[1],y[0]),n(o,s,y[3],y[0]),n(o,s,y[1],y[2])],[n(o,s,y[3],y[0]),n(o,s,y[3],y[2]),n(o,s,y[1],y[2])]);break;case 11:d.push([n(o,s,y[1],y[2]),n(o,s,y[0],y[2]),n(o,s,y[3],y[2])]);break;case 12:d.push([n(o,s,y[3],y[0]),n(o,s,y[2],y[0]),n(o,s,y[2],y[1])],[n(o,s,y[3],y[1]),n(o,s,y[3],y[0]),n(o,s,y[2],y[1])]);break;case 13:d.push([n(o,s,y[0],y[1]),n(o,s,y[2],y[1]),n(o,s,y[3],y[1])]);break;case 14:d.push([n(o,s,y[2],y[0]),n(o,s,y[1],y[0]),n(o,s,y[3],y[0])]);break}}else if(l===3){var x=(b[y[0]]<<0)+(b[y[1]]<<1)+(b[y[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[2]),n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0]),n(o,s,y[1],y[2])]);break;case 3:d.push([n(o,s,y[0],y[2]),n(o,s,y[1],y[2])]);break;case 4:d.push([n(o,s,y[2],y[1]),n(o,s,y[2],y[0])]);break;case 5:d.push([n(o,s,y[2],y[1]),n(o,s,y[0],y[1])]);break;case 6:d.push([n(o,s,y[1],y[0]),n(o,s,y[2],y[0])]);break}}else if(l===2){var x=(b[y[0]]<<0)+(b[y[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0])]);break}}}return d}return r}];function a(i){return e[i]()}},{}],293:[function(u,A,T){var e=u("bit-twiddle"),a=u("union-find");function i(p){for(var _=0,h=Math.max,L=0,E=p.length;L<E;++L)_=h(_,p[L].length);return _-1}T.dimension=i;function n(p){for(var _=-1,h=Math.max,L=0,E=p.length;L<E;++L)for(var S=p[L],P=0,F=S.length;P<F;++P)_=h(_,S[P]);return _+1}T.countVertices=n;function r(p){for(var _=new Array(p.length),h=0,L=p.length;h<L;++h)_[h]=p[h].slice(0);return _}T.cloneCells=r;function v(p,_){var h=p.length,L=p.length-_.length,E=Math.min;if(L)return L;switch(h){case 0:return 0;case 1:return p[0]-_[0];case 2:var D=p[0]+p[1]-_[0]-_[1];return D||E(p[0],p[1])-E(_[0],_[1]);case 3:var S=p[0]+p[1],P=_[0]+_[1];if(D=S+p[2]-(P+_[2]),D)return D;var F=E(p[0],p[1]),I=E(_[0],_[1]),D=E(F,p[2])-E(I,_[2]);return D||E(F+p[2],S)-E(I+_[2],P);default:var R=p.slice(0);R.sort();var O=_.slice(0);O.sort();for(var z=0;z<h;++z)if(L=R[z]-O[z],L)return L;return 0}}T.compareCells=v;function s(p,_){return v(p[0],_[0])}function o(p,_){if(_){for(var h=p.length,L=new Array(h),E=0;E<h;++E)L[E]=[p[E],_[E]];L.sort(s);for(var E=0;E<h;++E)p[E]=L[E][0],_[E]=L[E][1];return p}else return p.sort(v),p}T.normalize=o;function b(p){if(p.length===0)return[];for(var _=1,h=p.length,L=1;L<h;++L){var E=p[L];if(v(E,p[L-1])){if(L===_){_++;continue}p[_++]=E}}return p.length=_,p}T.unique=b;function g(p,_){for(var h=0,L=p.length-1,E=-1;h<=L;){var S=h+L>>1,P=v(p[S],_);P<=0?(P===0&&(E=S),h=S+1):P>0&&(L=S-1)}return E}T.findCell=g;function d(p,_){for(var h=new Array(p.length),L=0,E=h.length;L<E;++L)h[L]=[];for(var S=[],L=0,P=_.length;L<P;++L)for(var F=_[L],I=F.length,D=1,R=1<<I;D<R;++D){S.length=e.popCount(D);for(var O=0,z=0;z<I;++z)D&1<<z&&(S[O++]=F[z]);var G=g(p,S);if(!(G<0))for(;h[G++].push(L),!(G>=p.length||v(p[G],S)!==0););}return h}T.incidence=d;function f(p,_){if(!_)return d(b(l(p,0)),p);for(var h=new Array(_),L=0;L<_;++L)h[L]=[];for(var L=0,E=p.length;L<E;++L)for(var S=p[L],P=0,F=S.length;P<F;++P)h[S[P]].push(L);return h}T.dual=f;function y(p){for(var _=[],h=0,L=p.length;h<L;++h)for(var E=p[h],S=E.length|0,P=1,F=1<<S;P<F;++P){for(var I=[],D=0;D<S;++D)P>>>D&1&&I.push(E[D]);_.push(I)}return o(_)}T.explode=y;function l(p,_){if(_<0)return[];for(var h=[],L=(1<<_+1)-1,E=0;E<p.length;++E)for(var S=p[E],P=L;P<1<<S.length;P=e.nextCombination(P)){for(var F=new Array(_+1),I=0,D=0;D<S.length;++D)P&1<<D&&(F[I++]=S[D]);h.push(F)}return o(h)}T.skeleton=l;function x(p){for(var _=[],h=0,L=p.length;h<L;++h)for(var E=p[h],S=0,P=E.length;S<P;++S){for(var F=new Array(E.length-1),I=0,D=0;I<P;++I)I!==S&&(F[D++]=E[I]);_.push(F)}return o(_)}T.boundary=x;function c(p,_){for(var h=new a(_),L=0;L<p.length;++L)for(var E=p[L],S=0;S<E.length;++S)for(var P=S+1;P<E.length;++P)h.link(E[S],E[P]);for(var F=[],I=h.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<p.length;++L){var D=h.find(p[L][0]);I[D]<0?(I[D]=F.length,F.push([p[L].slice(0)])):F[I[D]].push(p[L].slice(0))}return F}function M(p){for(var _=b(o(l(p,0))),h=new a(_.length),L=0;L<p.length;++L)for(var E=p[L],S=0;S<E.length;++S)for(var P=g(_,[E[S]]),F=S+1;F<E.length;++F)h.link(P,g(_,[E[F]]));for(var I=[],D=h.ranks,L=0;L<D.length;++L)D[L]=-1;for(var L=0;L<p.length;++L){var R=h.find(g(_,[p[L][0]]));D[R]<0?(D[R]=I.length,I.push([p[L].slice(0)])):I[D[R]].push(p[L].slice(0))}return I}function w(p,_){return _?c(p,_):M(p)}T.connectedComponents=w},{"bit-twiddle":32,"union-find":309}],294:[function(u,A,T){arguments[4][32][0].apply(T,arguments)},{dup:32}],295:[function(u,A,T){arguments[4][293][0].apply(T,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(u,A,T){A.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var i=0;i<a;++i)this.roots[i]=i,this.ranks[i]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.prototype.find=function(a){for(var i=this.roots;i[a]!==a;){var n=i[a];i[a]=i[n],a=n}return a},e.prototype.link=function(a,i){var n=this.find(a),r=this.find(i);if(n!==r){var v=this.ranks,s=this.roots,o=v[n],b=v[r];o<b?s[n]=r:b<o?s[r]=n:(s[r]=n,++v[n])}}},{}],297:[function(u,A,T){A.exports=n;var e=u("robust-orientation"),a=u("simplicial-complex");function i(r,v,s){var o=Math.abs(e(r,v,s)),b=Math.sqrt(Math.pow(v[0]-s[0],2)+Math.pow(v[1]-s[1],2));return o/b}function n(r,v,s){for(var o=v.length,b=r.length,g=new Array(o),d=new Array(o),f=new Array(o),y=new Array(o),l=0;l<o;++l)g[l]=d[l]=-1,f[l]=1/0,y[l]=!1;for(var l=0;l<b;++l){var x=r[l];if(x.length!==2)throw new Error("Input must be a graph");var c=x[1],M=x[0];d[M]!==-1?d[M]=-2:d[M]=c,g[c]!==-1?g[c]=-2:g[c]=M}function w(j){if(y[j])return 1/0;var X=g[j],ie=d[j];return X<0||ie<0?1/0:i(v[j],v[X],v[ie])}function p(j,X){var ie=I[j],he=I[X];I[j]=he,I[X]=ie,D[ie]=X,D[he]=j}function _(j){return f[I[j]]}function h(j){return j&1?j-1>>1:(j>>1)-1}function L(j){for(var X=_(j);;){var ie=X,he=2*j+1,K=2*(j+1),$=j;if(he<O){var U=_(he);U<ie&&($=he,ie=U)}if(K<O){var H=_(K);H<ie&&($=K)}if($===j)return j;p(j,$),j=$}}function E(j){for(var X=_(j);j>0;){var ie=h(j);if(ie>=0){var he=_(ie);if(X<he){p(j,ie),j=ie;continue}}return j}}function S(){if(O>0){var j=I[0];return p(0,O-1),O-=1,L(0),j}return-1}function P(j,X){var ie=I[j];return f[ie]===X?j:(f[ie]=-1/0,E(j),S(),f[ie]=X,O+=1,E(O-1))}function F(j){if(!y[j]){y[j]=!0;var X=g[j],ie=d[j];g[ie]>=0&&(g[ie]=X),d[X]>=0&&(d[X]=ie),D[X]>=0&&P(D[X],w(X)),D[ie]>=0&&P(D[ie],w(ie))}}for(var I=[],D=new Array(o),l=0;l<o;++l){var R=f[l]=w(l);R<1/0?(D[l]=I.length,I.push(l)):D[l]=-1}for(var O=I.length,l=O>>1;l>=0;--l)L(l);for(;;){var z=S();if(z<0||f[z]>s)break;F(z)}for(var G=[],l=0;l<o;++l)y[l]||(D[l]=G.length,G.push(v[l].slice()));G.length;function Y(j,X){if(j[X]<0)return X;var ie=X,he=X;do{var K=j[he];if(!y[he]||K<0||K===he||(he=K,K=j[he],!y[he]||K<0||K===he))break;he=K,ie=j[ie]}while(ie!==he);for(var $=X;$!==he;$=j[$])j[$]=he;return he}var ee=[];return r.forEach(function(j){var X=Y(g,j[0]),ie=Y(d,j[1]);if(X>=0&&ie>=0&&X!==ie){var he=D[X],K=D[ie];he!==K&&ee.push([he,K])}}),a.unique(a.normalize(ee)),{positions:G,edges:ee}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(u,A,T){A.exports=i;var e=u("robust-orientation");function a(n,r){var v,s;if(r[0][0]<r[1][0])v=r[0],s=r[1];else if(r[0][0]>r[1][0])v=r[1],s=r[0];else{var o=Math.min(n[0][1],n[1][1]),b=Math.max(n[0][1],n[1][1]),g=Math.min(r[0][1],r[1][1]),d=Math.max(r[0][1],r[1][1]);return b<g?b-g:o>d?o-d:b-d}var f,y;n[0][1]<n[1][1]?(f=n[0],y=n[1]):(f=n[1],y=n[0]);var l=e(s,v,f);return l||(l=e(s,v,y),l)?l:y-s}function i(n,r){var v,s;if(r[0][0]<r[1][0])v=r[0],s=r[1];else if(r[0][0]>r[1][0])v=r[1],s=r[0];else return a(r,n);var o,b;if(n[0][0]<n[1][0])o=n[0],b=n[1];else if(n[0][0]>n[1][0])o=n[1],b=n[0];else return-a(n,r);var g=e(v,s,b),d=e(v,s,o);if(g<0){if(d<=0)return g}else if(g>0){if(d>=0)return g}else if(d)return d;if(g=e(b,o,s),d=e(b,o,v),g<0){if(d<=0)return g}else if(g>0){if(d>=0)return g}else if(d)return d;return s[0]-b[0]}},{"robust-orientation":284}],299:[function(u,A,T){A.exports=d;var e=u("binary-search-bounds"),a=u("functional-red-black-tree"),i=u("robust-orientation"),n=u("./lib/order-segments");function r(f,y,l){this.slabs=f,this.coordinates=y,this.horizontal=l}var v=r.prototype;function s(f,y){return f.y-y}function o(f,y){for(var l=null;f;){var x=f.key,c,M;x[0][0]<x[1][0]?(c=x[0],M=x[1]):(c=x[1],M=x[0]);var w=i(c,M,y);if(w<0)f=f.left;else if(w>0)if(y[0]!==x[1][0])l=f,f=f.right;else{var p=o(f.right,y);if(p)return p;f=f.left}else{if(y[0]!==x[1][0])return f;var p=o(f.right,y);if(p)return p;f=f.left}}return l}v.castUp=function(f){var y=e.le(this.coordinates,f[0]);if(y<0)return-1;this.slabs[y];var l=o(this.slabs[y],f),x=-1;if(l&&(x=l.value),this.coordinates[y]===f[0]){var c=null;if(l&&(c=l.key),y>0){var M=o(this.slabs[y-1],f);M&&(c?n(M.key,c)>0&&(c=M.key,x=M.value):(x=M.value,c=M.key))}var w=this.horizontal[y];if(w.length>0){var p=e.ge(w,f[1],s);if(p<w.length){var _=w[p];if(f[1]===_.y){if(_.closed)return _.index;for(;p<w.length-1&&w[p+1].y===f[1];)if(p=p+1,_=w[p],_.closed)return _.index;if(_.y===f[1]&&!_.start){if(p=p+1,p>=w.length)return x;_=w[p]}}if(_.start)if(c){var h=i(c[0],c[1],[f[0],_.y]);c[0][0]>c[1][0]&&(h=-h),h>0&&(x=_.index)}else x=_.index;else _.y!==f[1]&&(x=_.index)}}}return x};function b(f,y,l,x){this.y=f,this.index=y,this.start=l,this.closed=x}function g(f,y,l,x){this.x=f,this.segment=y,this.create=l,this.index=x}function d(f){for(var y=f.length,l=2*y,x=new Array(l),c=0;c<y;++c){var M=f[c],w=M[0][0]<M[1][0];x[2*c]=new g(M[0][0],M,w,c),x[2*c+1]=new g(M[1][0],M,!w,c)}x.sort(function(F,I){var D=F.x-I.x;return D||(D=F.create-I.create,D)?D:Math.min(F.segment[0][1],F.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var p=a(n),_=[],h=[],L=[],c=0;c<l;){for(var E=x[c].x,S=[];c<l;){var P=x[c];if(P.x!==E)break;c+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(S.push(new b(P.segment[0][1],P.index,!0,!0)),S.push(new b(P.segment[1][1],P.index,!1,!1))):(S.push(new b(P.segment[1][1],P.index,!0,!1)),S.push(new b(P.segment[0][1],P.index,!1,!0)))):P.create?p=p.insert(P.segment,P.index):p=p.remove(P.segment)}_.push(p.root),h.push(E),L.push(S)}return new r(_,h,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(u,A,T){var e=u("robust-dot-product"),a=u("robust-sum");A.exports=r,A.exports.positive=v,A.exports.negative=s;function i(o,b){var g=a(e(o,b),[b[b.length-1]]);return g[g.length-1]}function n(o,b,g,d){var f=d-b,y=-b/f;y<0?y=0:y>1&&(y=1);for(var l=1-y,x=o.length,c=new Array(x),M=0;M<x;++M)c[M]=y*o[M]+l*g[M];return c}function r(o,b){for(var g=[],d=[],f=i(o[o.length-1],b),y=o[o.length-1],l=o[0],x=0;x<o.length;++x,y=l){l=o[x];var c=i(l,b);if(f<0&&c>0||f>0&&c<0){var M=n(y,c,l,f);g.push(M),d.push(M.slice())}c<0?d.push(l.slice()):c>0?g.push(l.slice()):(g.push(l.slice()),d.push(l.slice())),f=c}return{positive:g,negative:d}}function v(o,b){for(var g=[],d=i(o[o.length-1],b),f=o[o.length-1],y=o[0],l=0;l<o.length;++l,f=y){y=o[l];var x=i(y,b);(d<0&&x>0||d>0&&x<0)&&g.push(n(f,x,y,d)),x>=0&&g.push(y.slice()),d=x}return g}function s(o,b){for(var g=[],d=i(o[o.length-1],b),f=o[o.length-1],y=o[0],l=0;l<o.length;++l,f=y){y=o[l];var x=i(y,b);(d<0&&x>0||d>0&&x<0)&&g.push(n(f,x,y,d)),x<=0&&g.push(y.slice()),d=x}return g}},{"robust-dot-product":281,"robust-sum":289}],301:[function(u,A,T){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(s){return n(v(s),arguments)}function i(s,o){return a.apply(null,[s].concat(o||[]))}function n(s,o){var b=1,g=s.length,d,f="",y,l,x,c,M,w,p,_;for(y=0;y<g;y++)if(typeof s[y]=="string")f+=s[y];else if(typeof s[y]=="object"){if(x=s[y],x.keys)for(d=o[b],l=0;l<x.keys.length;l++){if(d==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[l],x.keys[l-1]));d=d[x.keys[l]]}else x.param_no?d=o[x.param_no]:d=o[b++];if(e.not_type.test(x.type)&&e.not_primitive.test(x.type)&&d instanceof Function&&(d=d()),e.numeric_arg.test(x.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(a("[sprintf] expecting number but found %T",d));switch(e.number.test(x.type)&&(p=d>=0),x.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,x.width?parseInt(x.width):0);break;case"e":d=x.precision?parseFloat(d).toExponential(x.precision):parseFloat(d).toExponential();break;case"f":d=x.precision?parseFloat(d).toFixed(x.precision):parseFloat(d);break;case"g":d=x.precision?String(Number(d.toPrecision(x.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=x.precision?d.substring(0,x.precision):d;break;case"t":d=String(!!d),d=x.precision?d.substring(0,x.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=x.precision?d.substring(0,x.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=x.precision?d.substring(0,x.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}e.json.test(x.type)?f+=d:(e.number.test(x.type)&&(!p||x.sign)?(_=p?"+":"-",d=d.toString().replace(e.sign,"")):_="",M=x.pad_char?x.pad_char==="0"?"0":x.pad_char.charAt(1):" ",w=x.width-(_+d).length,c=x.width&&w>0?M.repeat(w):"",f+=x.align?_+d+c:M==="0"?_+c+d:c+_+d)}return f}var r=Object.create(null);function v(s){if(r[s])return r[s];for(var o=s,b,g=[],d=0;o;){if((b=e.text.exec(o))!==null)g.push(b[0]);else if((b=e.modulo.exec(o))!==null)g.push("%");else if((b=e.placeholder.exec(o))!==null){if(b[2]){d|=1;var f=[],y=b[2],l=[];if((l=e.key.exec(y))!==null)for(f.push(l[1]);(y=y.substring(l[0].length))!=="";)if((l=e.key_access.exec(y))!==null)f.push(l[1]);else if((l=e.index_access.exec(y))!==null)f.push(l[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");b[2]=f}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(b[0].length)}return r[s]=g}typeof T<"u"&&(T.sprintf=a,T.vsprintf=i),typeof window<"u"&&(window.sprintf=a,window.vsprintf=i)})()},{}],302:[function(u,A,T){A.exports=s;var e=u("ndarray-extract-contour"),a=u("zero-crossings"),i={"2d":function(o,b,g){var d=o({order:b,scalarArguments:3,getters:g==="generic"?[0]:void 0,phase:function(y,l,x,c){return y>c|0},vertex:function(y,l,x,c,M,w,p,_,h,L,E,S,P){var F=(p<<0)+(_<<1)+(h<<2)+(L<<3)|0;if(!(F===0||F===15))switch(F){case 0:E.push([y-.5,l-.5]);break;case 1:E.push([y-.25-.25*(c+x-2*P)/(x-c),l-.25-.25*(M+x-2*P)/(x-M)]);break;case 2:E.push([y-.75-.25*(-c-x+2*P)/(c-x),l-.25-.25*(w+c-2*P)/(c-w)]);break;case 3:E.push([y-.5,l-.5-.5*(M+x+w+c-4*P)/(x-M+c-w)]);break;case 4:E.push([y-.25-.25*(w+M-2*P)/(M-w),l-.75-.25*(-M-x+2*P)/(M-x)]);break;case 5:E.push([y-.5-.5*(c+x+w+M-4*P)/(x-c+M-w),l-.5]);break;case 6:E.push([y-.5-.25*(-c-x+w+M)/(c-x+M-w),l-.5-.25*(-M-x+w+c)/(M-x+c-w)]);break;case 7:E.push([y-.75-.25*(w+M-2*P)/(M-w),l-.75-.25*(w+c-2*P)/(c-w)]);break;case 8:E.push([y-.75-.25*(-w-M+2*P)/(w-M),l-.75-.25*(-w-c+2*P)/(w-c)]);break;case 9:E.push([y-.5-.25*(c+x+-w-M)/(x-c+w-M),l-.5-.25*(M+x+-w-c)/(x-M+w-c)]);break;case 10:E.push([y-.5-.5*(-c-x+-w-M+4*P)/(c-x+w-M),l-.5]);break;case 11:E.push([y-.25-.25*(-w-M+2*P)/(w-M),l-.75-.25*(M+x-2*P)/(x-M)]);break;case 12:E.push([y-.5,l-.5-.5*(-M-x+-w-c+4*P)/(M-x+w-c)]);break;case 13:E.push([y-.75-.25*(c+x-2*P)/(x-c),l-.25-.25*(-w-c+2*P)/(w-c)]);break;case 14:E.push([y-.25-.25*(-c-x+2*P)/(c-x),l-.25-.25*(-M-x+2*P)/(M-x)]);break;case 15:E.push([y-.5,l-.5]);break}},cell:function(y,l,x,c,M,w,p,_,h){M?_.push([y,l]):_.push([l,y])}});return function(f,y){var l=[],x=[];return d(f,l,x,y),{positions:l,cells:x}}}};function n(o,b){var g=o.length+"d",d=i[g];if(d)return d(e,o,b)}function r(o,b){for(var g=a(o,b),d=g.length,f=new Array(d),y=new Array(d),l=0;l<d;++l)f[l]=[g[l]],y[l]=[l];return{positions:f,cells:y}}var v={};function s(o,f){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return r(o,f);var g=o.order.join()+"-"+o.dtype,d=v[g],f=+f||0;return d||(d=v[g]=n(o.order,o.dtype)),d(o,f)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(u,A,T){(function(e){(function(){A.exports=v;var a=u("vectorize-text"),i=window||e.global||{},n=i.__TEXT_CACHE||{};i.__TEXT_CACHE={};function r(s){for(var o=s.cells,b=s.positions,g=new Float32Array(o.length*6),d=0,f=0,y=0;y<o.length;++y)for(var l=o[y],x=0;x<3;++x){var c=b[l[x]];g[d++]=c[0],g[d++]=c[1]+1.4,f=Math.max(c[0],f)}return{data:g,shape:f}}function v(s,o,g){var g=g||{},d=n[s];d||(d=n[s]={" ":{data:new Float32Array(0),shape:.2}});var f=d[o];if(!f)if(o.length<=1||!/\d/.test(o))f=d[o]=r(a(o,{triangles:!0,font:s,textAlign:g.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var y=o.split(/(\d|\s)/),l=new Array(y.length),x=0,c=0,M=0;M<y.length;++M)l[M]=v(s,y[M]),x+=l[M].data.length,c+=l[M].shape,M>0&&(c+=.02);for(var w=new Float32Array(x),p=0,_=-.5*c,M=0;M<l.length;++M){for(var h=l[M].data,L=0;L<h.length;L+=2)w[p++]=h[L]+_,w[p++]=h[L+1];_+=l[M].shape+.02}f=d[o]={data:w,shape:c}}return f}}).call(this)}).call(this,u("_process"))},{_process:5,"vectorize-text":311}],304:[function(u,A,T){var e=u("parse-unit");A.exports=r;var a=96;function i(v,s){var o=e(getComputedStyle(v).getPropertyValue(s));return o[0]*r(o[1],v)}function n(v,s){var o=document.createElement("div");o.style["font-size"]="128"+v,s.appendChild(o);var b=i(o,"font-size")/128;return s.removeChild(o),b}function r(v,s){switch(s=s||document.body,v=(v||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),v){case"%":return s.clientHeight/100;case"ch":case"ex":return n(v,s);case"em":return i(s,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(u,A,T){A.exports=y;var e=u("filtered-vector"),a=u("gl-mat4/invert"),i=u("gl-mat4/rotate"),n=u("gl-vec3/cross"),r=u("gl-vec3/normalize"),v=u("gl-vec3/dot");function s(l,x,c){return Math.sqrt(Math.pow(l,2)+Math.pow(x,2)+Math.pow(c,2))}function o(l){return Math.min(1,Math.max(-1,l))}function b(l){var x=Math.abs(l[0]),c=Math.abs(l[1]),M=Math.abs(l[2]),w=[0,0,0];x>Math.max(c,M)?w[2]=1:c>Math.max(x,M)?w[0]=1:w[1]=1;for(var p=0,_=0,h=0;h<3;++h)p+=l[h]*l[h],_+=w[h]*l[h];for(var h=0;h<3;++h)w[h]-=_/p*l[h];return r(w,w),w}function g(l,x,c,M,w,p,_,h){this.center=e(c),this.up=e(M),this.right=e(w),this.radius=e([p]),this.angle=e([_,h]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(l,x),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var d=g.prototype;d.setDistanceLimits=function(l,x){l>0?l=Math.log(l):l=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=x},d.getDistanceLimits=function(l){var x=this.radius.bounds[0];return l?(l[0]=Math.exp(x[0][0]),l[1]=Math.exp(x[1][0]),l):[Math.exp(x[0][0]),Math.exp(x[1][0])]},d.recalcMatrix=function(l){this.center.curve(l),this.up.curve(l),this.right.curve(l),this.radius.curve(l),this.angle.curve(l);for(var x=this.computedUp,c=this.computedRight,M=0,w=0,p=0;p<3;++p)w+=x[p]*c[p],M+=x[p]*x[p];for(var _=Math.sqrt(M),h=0,p=0;p<3;++p)c[p]-=x[p]*w/M,h+=c[p]*c[p],x[p]/=_;for(var L=Math.sqrt(h),p=0;p<3;++p)c[p]/=L;var E=this.computedToward;n(E,x,c),r(E,E);for(var S=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],F=this.computedAngle[1],I=Math.cos(P),D=Math.sin(P),R=Math.cos(F),O=Math.sin(F),z=this.computedCenter,G=I*R,Y=D*R,ee=O,j=-I*O,X=-D*O,ie=R,he=this.computedEye,K=this.computedMatrix,p=0;p<3;++p){var $=G*c[p]+Y*E[p]+ee*x[p];K[4*p+1]=j*c[p]+X*E[p]+ie*x[p],K[4*p+2]=$,K[4*p+3]=0}var U=K[1],H=K[5],q=K[9],re=K[2],Z=K[6],Q=K[10],oe=H*Q-q*Z,se=q*re-U*Q,ae=U*Z-H*re,le=s(oe,se,ae);oe/=le,se/=le,ae/=le,K[0]=oe,K[4]=se,K[8]=ae;for(var p=0;p<3;++p)he[p]=z[p]+K[2+4*p]*S;for(var p=0;p<3;++p){for(var h=0,_e=0;_e<3;++_e)h+=K[p+4*_e]*he[_e];K[12+p]=-h}K[15]=1},d.getMatrix=function(l,x){this.recalcMatrix(l);var c=this.computedMatrix;if(x){for(var M=0;M<16;++M)x[M]=c[M];return x}return c};var f=[0,0,0];d.rotate=function(l,x,c,M){if(this.angle.move(l,x,c),M){this.recalcMatrix(l);var w=this.computedMatrix;f[0]=w[2],f[1]=w[6],f[2]=w[10];for(var p=this.computedUp,_=this.computedRight,h=this.computedToward,L=0;L<3;++L)w[4*L]=p[L],w[4*L+1]=_[L],w[4*L+2]=h[L];i(w,w,M,f);for(var L=0;L<3;++L)p[L]=w[4*L],_[L]=w[4*L+1];this.up.set(l,p[0],p[1],p[2]),this.right.set(l,_[0],_[1],_[2])}},d.pan=function(l,x,c,M){x=x||0,c=c||0,M=M||0,this.recalcMatrix(l);var w=this.computedMatrix;Math.exp(this.computedRadius[0]);var p=w[1],_=w[5],h=w[9],L=s(p,_,h);p/=L,_/=L,h/=L;var E=w[0],S=w[4],P=w[8],F=E*p+S*_+P*h;E-=p*F,S-=_*F,P-=h*F;var I=s(E,S,P);E/=I,S/=I,P/=I;var D=E*x+p*c,R=S*x+_*c,O=P*x+h*c;this.center.move(l,D,R,O);var z=Math.exp(this.computedRadius[0]);z=Math.max(1e-4,z+M),this.radius.set(l,Math.log(z))},d.translate=function(l,x,c,M){this.center.move(l,x||0,c||0,M||0)},d.setMatrix=function(l,x,c,M){var w=1;typeof c=="number"&&(w=c|0),(w<0||w>3)&&(w=1);var p=(w+2)%3;x||(this.recalcMatrix(l),x=this.computedMatrix);var _=x[w],h=x[w+4],L=x[w+8];if(M){var S=Math.abs(_),P=Math.abs(h),F=Math.abs(L),I=Math.max(S,P,F);S===I?(_=_<0?-1:1,h=L=0):F===I?(L=L<0?-1:1,_=h=0):(h=h<0?-1:1,_=L=0)}else{var E=s(_,h,L);_/=E,h/=E,L/=E}var D=x[p],R=x[p+4],O=x[p+8],z=D*_+R*h+O*L;D-=_*z,R-=h*z,O-=L*z;var G=s(D,R,O);D/=G,R/=G,O/=G;var Y=h*O-L*R,ee=L*D-_*O,j=_*R-h*D,X=s(Y,ee,j);Y/=X,ee/=X,j/=X,this.center.jump(l,ye,be,ke),this.radius.idle(l),this.up.jump(l,_,h,L),this.right.jump(l,D,R,O);var ie,he;if(w===2){var K=x[1],$=x[5],U=x[9],H=K*D+$*R+U*O,q=K*Y+$*ee+U*j;oe<0?ie=-Math.PI/2:ie=Math.PI/2,he=Math.atan2(q,H)}else{var re=x[2],Z=x[6],Q=x[10],oe=re*_+Z*h+Q*L,se=re*D+Z*R+Q*O,ae=re*Y+Z*ee+Q*j;ie=Math.asin(o(oe)),he=Math.atan2(ae,se)}this.angle.jump(l,he,ie),this.recalcMatrix(l);var le=x[2],_e=x[6],fe=x[10],me=this.computedMatrix;a(me,x);var xe=me[15],ye=me[12]/xe,be=me[13]/xe,ke=me[14]/xe,De=Math.exp(this.computedRadius[0]);this.center.jump(l,ye-le*De,be-_e*De,ke-fe*De)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(l){this.center.idle(l),this.up.idle(l),this.right.idle(l),this.radius.idle(l),this.angle.idle(l)},d.flush=function(l){this.center.flush(l),this.up.flush(l),this.right.flush(l),this.radius.flush(l),this.angle.flush(l)},d.setDistance=function(l,x){x>0&&this.radius.set(l,Math.log(x))},d.lookAt=function(l,x,c,M){this.recalcMatrix(l),x=x||this.computedEye,c=c||this.computedCenter,M=M||this.computedUp;var w=M[0],p=M[1],_=M[2],h=s(w,p,_);if(!(h<1e-6)){w/=h,p/=h,_/=h;var L=x[0]-c[0],E=x[1]-c[1],S=x[2]-c[2],P=s(L,E,S);if(!(P<1e-6)){L/=P,E/=P,S/=P;var F=this.computedRight,I=F[0],D=F[1],R=F[2],O=w*I+p*D+_*R;I-=O*w,D-=O*p,R-=O*_;var z=s(I,D,R);if(!(z<.01&&(I=p*S-_*E,D=_*L-w*S,R=w*E-p*L,z=s(I,D,R),z<1e-6))){I/=z,D/=z,R/=z,this.up.set(l,w,p,_),this.right.set(l,I,D,R),this.center.set(l,c[0],c[1],c[2]),this.radius.set(l,Math.log(P));var G=p*R-_*D,Y=_*I-w*R,ee=w*D-p*I,j=s(G,Y,ee);G/=j,Y/=j,ee/=j;var X=w*L+p*E+_*S,ie=I*L+D*E+R*S,he=G*L+Y*E+ee*S,K=Math.asin(o(X)),$=Math.atan2(he,ie),U=this.angle._state,H=U[U.length-1],q=U[U.length-2];H=H%(2*Math.PI);var re=Math.abs(H+2*Math.PI-$),Z=Math.abs(H-$),Q=Math.abs(H-2*Math.PI-$);re<Z&&(H+=2*Math.PI),Q<Z&&(H-=2*Math.PI),this.angle.jump(this.angle.lastT(),H,q),this.angle.set(l,$,K)}}}};function y(l){l=l||{};var x=l.center||[0,0,0],c=l.up||[0,1,0],M=l.right||b(c),w=l.radius||1,p=l.theta||0,_=l.phi||0;if(x=[].slice.call(x,0,3),c=[].slice.call(c,0,3),r(c,c),M=[].slice.call(M,0,3),r(M,M),"eye"in l){var h=l.eye,L=[h[0]-x[0],h[1]-x[1],h[2]-x[2]];n(M,L,c),s(M[0],M[1],M[2])<1e-6?M=b(c):r(M,M),w=s(L[0],L[1],L[2]);var E=v(c,L)/w,S=v(M,L)/w;_=Math.acos(E),p=Math.acos(S)}return w=Math.log(w),new g(l.zoomMin,l.zoomMax,x,c,M,w,p,_)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(u,A,T){A.exports=a;var e=+(Math.pow(2,27)+1);function a(i,n,r){var v=i*n,s=e*i,o=s-i,b=s-o,g=i-b,d=e*n,f=d-n,y=d-f,l=n-y,x=v-b*y,c=x-g*y,M=c-b*l,w=g*l-M;return r?(r[0]=w,r[1]=v,r):[w,v]}},{}],307:[function(u,A,T){A.exports=e;function e(a,i,n){var r=a+i,v=r-a,s=r-v,o=i-v,b=a-s;return n?(n[0]=b+o,n[1]=r,n):[b+o,r]}},{}],308:[function(u,A,T){(function(e){(function(){var a=u("bit-twiddle"),i=u("dup"),n=u("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var r=typeof Uint8ClampedArray<"u",v=typeof BigUint64Array<"u",s=typeof BigInt64Array<"u",o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=i([32,0])),o.BIGUINT64||(o.BIGUINT64=i([32,0])),o.BIGINT64||(o.BIGINT64=i([32,0])),o.BUFFER||(o.BUFFER=i([32,0]));var b=o.DATA,g=o.BUFFER;T.free=function(D){if(n.isBuffer(D))g[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,O=a.log2(R)|0;b[O].push(D)}};function d(I){if(!!I){var D=I.length||I.byteLength,R=a.log2(D);b[R].push(I)}}function f(I){d(I.buffer)}T.freeUint8=T.freeUint16=T.freeUint32=T.freeBigUint64=T.freeInt8=T.freeInt16=T.freeInt32=T.freeBigInt64=T.freeFloat32=T.freeFloat=T.freeFloat64=T.freeDouble=T.freeUint8Clamped=T.freeDataView=f,T.freeArrayBuffer=d,T.freeBuffer=function(D){g[a.log2(D.length)].push(D)},T.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return y(D);switch(R){case"uint8":return l(D);case"uint16":return x(D);case"uint32":return c(D);case"int8":return M(D);case"int16":return w(D);case"int32":return p(D);case"float":case"float32":return _(D);case"double":case"float64":return h(D);case"uint8_clamped":return L(D);case"bigint64":return S(D);case"biguint64":return E(D);case"buffer":return F(D);case"data":case"dataview":return P(D);default:return null}return null};function y(D){var D=a.nextPow2(D),R=a.log2(D),O=b[R];return O.length>0?O.pop():new ArrayBuffer(D)}T.mallocArrayBuffer=y;function l(I){return new Uint8Array(y(I),0,I)}T.mallocUint8=l;function x(I){return new Uint16Array(y(2*I),0,I)}T.mallocUint16=x;function c(I){return new Uint32Array(y(4*I),0,I)}T.mallocUint32=c;function M(I){return new Int8Array(y(I),0,I)}T.mallocInt8=M;function w(I){return new Int16Array(y(2*I),0,I)}T.mallocInt16=w;function p(I){return new Int32Array(y(4*I),0,I)}T.mallocInt32=p;function _(I){return new Float32Array(y(4*I),0,I)}T.mallocFloat32=T.mallocFloat=_;function h(I){return new Float64Array(y(8*I),0,I)}T.mallocFloat64=T.mallocDouble=h;function L(I){return r?new Uint8ClampedArray(y(I),0,I):l(I)}T.mallocUint8Clamped=L;function E(I){return v?new BigUint64Array(y(8*I),0,I):null}T.mallocBigUint64=E;function S(I){return s?new BigInt64Array(y(8*I),0,I):null}T.mallocBigInt64=S;function P(I){return new DataView(y(I),0,I)}T.mallocDataView=P;function F(I){I=a.nextPow2(I);var D=a.log2(I),R=g[D];return R.length>0?R.pop():new n(I)}T.mallocBuffer=F,T.clearCache=function(){for(var D=0;D<32;++D)o.UINT8[D].length=0,o.UINT16[D].length=0,o.UINT32[D].length=0,o.INT8[D].length=0,o.INT16[D].length=0,o.INT32[D].length=0,o.FLOAT[D].length=0,o.DOUBLE[D].length=0,o.BIGUINT64[D].length=0,o.BIGINT64[D].length=0,o.UINT8C[D].length=0,b[D].length=0,g[D].length=0}}).call(this)}).call(this,typeof m<"u"?m:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(u,A,T){A.exports=e;function e(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}var a=e.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},a.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var v=r[n];r[n]=i,n=v}return i},a.link=function(i,n){var r=this.find(i),v=this.find(n);if(r!==v){var s=this.ranks,o=this.roots,b=s[r],g=s[v];b<g?o[r]=v:g<b?o[v]=r:(o[v]=r,++s[r])}}},{}],310:[function(u,A,T){function e(n,r){for(var v=1,s=n.length,o=n[0],b=n[0],g=1;g<s;++g)if(b=o,o=n[g],r(o,b)){if(g===v){v++;continue}n[v++]=o}return n.length=v,n}function a(n){for(var r=1,v=n.length,s=n[0],o=n[0],b=1;b<v;++b,o=s)if(o=s,s=n[b],s!==o){if(b===r){r++;continue}n[r++]=s}return n.length=r,n}function i(n,r,v){return n.length===0?n:r?(v||n.sort(r),e(n,r)):(v||n.sort(),a(n))}A.exports=i},{}],311:[function(u,A,T){A.exports=n;var e=u("./lib/vtext"),a=null,i=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,i=a.getContext("2d"));function n(r,v){return(typeof v!="object"||v===null)&&(v={}),e(r,v.canvas||a,v.context||i,v)}},{"./lib/vtext":312}],312:[function(u,A,T){A.exports=E,A.exports.processPixels=L;var e=u("surface-nets"),a=u("ndarray"),i=u("simplify-planar-graph"),n=u("clean-pslg"),r=u("cdt2d"),v=u("planar-graph-to-polyline"),s="b",o="b|",b="i",g="i|",d="sup",f="+",y="+1",l="sub",x="-",c="-1";function M(S,P,F,I){for(var D="<"+S+">",R="</"+S+">",O=D.length,z=R.length,G=P[0]===f||P[0]===x,Y=0,ee=-z;Y>-1&&(Y=F.indexOf(D,Y),!(Y===-1||(ee=F.indexOf(R,Y+O),ee===-1)||ee<=Y));){for(var j=Y;j<ee+z;++j)if(j<Y+O||j>=ee)I[j]=null,F=F.substr(0,j)+" "+F.substr(j+1);else if(I[j]!==null){var X=I[j].indexOf(P[0]);X===-1?I[j]+=P:G&&(I[j]=I[j].substr(0,X+1)+(1+parseInt(I[j][X+1]))+I[j].substr(X+2))}var ie=Y+O,he=F.substr(ie,ee-ie),K=he.indexOf(D);K!==-1?Y=K:Y=ee+z}return I}function w(S,P,F){for(var I=P.textAlign||"start",D=P.textBaseline||"alphabetic",R=[1<<30,1<<30],O=[0,0],z=S.length,G=0;G<z;++G)for(var Y=S[G],ee=0;ee<2;++ee)R[ee]=Math.min(R[ee],Y[ee])|0,O[ee]=Math.max(O[ee],Y[ee])|0;var j=0;switch(I){case"center":j=-.5*(R[0]+O[0]);break;case"right":case"end":j=-O[0];break;case"left":case"start":j=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var X=0;switch(D){case"hanging":case"top":X=-R[1];break;case"middle":X=-.5*(R[1]+O[1]);break;case"alphabetic":case"ideographic":X=-3*F;break;case"bottom":X=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var ie=1/F;return"lineHeight"in P?ie*=+P.lineHeight:"width"in P?ie=P.width/(O[0]-R[0]):"height"in P&&(ie=P.height/(O[1]-R[1])),S.map(function(he){return[ie*(he[0]+j),ie*(he[1]+X)]})}function p(S,P,F,I,D,R){F=F.replace(/\n/g,""),R.breaklines===!0?F=F.replace(/\<br\>/g,`
`):F=F.replace(/\<br\>/g," ");var O="",z=[];for(H=0;H<F.length;++H)z[H]=O;R.bolds===!0&&(z=M(s,o,F,z)),R.italics===!0&&(z=M(b,g,F,z)),R.superscripts===!0&&(z=M(d,y,F,z)),R.subscripts===!0&&(z=M(l,c,F,z));var G=[],Y="";for(H=0;H<F.length;++H)z[H]!==null&&(Y+=F[H],G.push(z[H]));var ee=Y.split(`
`),j=ee.length,X=Math.round(D*I),ie=I,he=I*2,K=0,$=j*X+he;S.height<$&&(S.height=$),P.fillStyle="#000",P.fillRect(0,0,S.width,S.height),P.fillStyle="#fff";var U,H,q,re,Z,Q=0,oe="";function se(){if(oe!==""){var ke=P.measureText(oe).width;P.fillText(oe,ie+q,he+re),q+=ke}}function ae(){return""+Math.round(Z)+"px "}function le(ke,De){var He=""+P.font;if(R.subscripts===!0){var Ae=ke.indexOf(x),Le=De.indexOf(x),Ze=Ae>-1?parseInt(ke[1+Ae]):0,We=Le>-1?parseInt(De[1+Le]):0;Ze!==We&&(He=He.replace(ae(),"?px "),Z*=Math.pow(.75,We-Ze),He=He.replace("?px ",ae())),re+=.25*X*(We-Ze)}if(R.superscripts===!0){var ze=ke.indexOf(f),Ie=De.indexOf(f),Ve=ze>-1?parseInt(ke[1+ze]):0,dt=Ie>-1?parseInt(De[1+Ie]):0;Ve!==dt&&(He=He.replace(ae(),"?px "),Z*=Math.pow(.75,dt-Ve),He=He.replace("?px ",ae())),re-=.25*X*(dt-Ve)}if(R.bolds===!0){var Ft=ke.indexOf(o)>-1,Qt=De.indexOf(o)>-1;!Ft&&Qt&&(Ot?He=He.replace("italic ","italic bold "):He="bold "+He),Ft&&!Qt&&(He=He.replace("bold ",""))}if(R.italics===!0){var Ot=ke.indexOf(g)>-1,Ct=De.indexOf(g)>-1;!Ot&&Ct&&(He="italic "+He),Ot&&!Ct&&(He=He.replace("italic ",""))}P.font=He}for(U=0;U<j;++U){var _e=ee[U]+`
`;for(q=0,re=U*X,Z=I,oe="",H=0;H<_e.length;++H){var fe=H+Q<G.length?G[H+Q]:G[G.length-1];O===fe?oe+=_e[H]:(se(),oe=_e[H],fe!==void 0&&(le(O,fe),O=fe))}se(),Q+=_e.length;var me=Math.round(q+2*ie)|0;K<me&&(K=me)}var xe=K,ye=he+X*j,be=a(P.getImageData(0,0,xe,ye).data,[ye,xe,4]);return be.pick(-1,-1,0).transpose(1,0)}function _(S,P){var F=e(S,128);return P?i(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function h(S,P,F,I){var D=_(S,I),R=w(D.positions,P,F),O=D.edges,z=P.orientation==="ccw";if(n(R,O),P.polygons||P.polygon||P.polyline){for(var G=v(O,R),Y=new Array(G.length),ee=0;ee<G.length;++ee){for(var j=G[ee],X=new Array(j.length),ie=0;ie<j.length;++ie){for(var he=j[ie],K=new Array(he.length),$=0;$<he.length;++$)K[$]=R[he[$]].slice();z&&K.reverse(),X[ie]=K}Y[ee]=X}return Y}else return P.triangles||P.triangulate||P.triangle?{cells:r(R,O,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:O,positions:R}}function L(S,P,F){try{return h(S,P,F,!0)}catch{}try{return h(S,P,F,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function E(S,P,F,I){var D=64,R=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(D=I.size),I.lineSpacing&&I.lineSpacing>0&&(R=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(O.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(O.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(O.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(O.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(O.superscripts=!!I.styletags.superscripts)),F.font=[I.fontStyle,I.fontVariant,I.fontWeight,D+"px",I.font].filter(function(G){return G}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr";var z=p(P,F,S,D,R,O);return L(z,I,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(u,A,T){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(L){L.permitHostObjects___&&L.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var i=!1;if(typeof WeakMap=="function"){var n=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var r=new n,v=Object.freeze({});if(r.set(v,1),r.get(v)!==1)i=!0;else{A.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,o=Object.defineProperty,b=Object.isExtensible,g="weakmap:",d=g+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var f=new ArrayBuffer(25),y=new Uint8Array(f);crypto.getRandomValues(y),d=g+"rand:"+Array.prototype.map.call(y,function(L){return(L%36).toString(36)}).join("")+"___"}function l(L){return!(L.substr(0,g.length)==g&&L.substr(L.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(E){return s(E).filter(l)}}),"getPropertyNames"in Object){var x=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(E){return x(E).filter(l)}})}function c(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var E=L[d];if(E&&E.key===L)return E;if(!!b(L)){E={key:L};try{return o(L,d,{value:E,writable:!1,enumerable:!1,configurable:!1}),E}catch{return}}}(function(){var L=Object.freeze;o(Object,"freeze",{value:function(F){return c(F),L(F)}});var E=Object.seal;o(Object,"seal",{value:function(F){return c(F),E(F)}});var S=Object.preventExtensions;o(Object,"preventExtensions",{value:function(F){return c(F),S(F)}})})();function M(L){return L.prototype=null,Object.freeze(L)}var w=!1;function p(){!w&&typeof console<"u"&&(w=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var _=0,h=function(){this instanceof h||p();var L=[],E=[],S=_++;function P(R,O){var z,G=c(R);return G?S in G?G[S]:O:(z=L.indexOf(R),z>=0?E[z]:O)}function F(R){var O=c(R);return O?S in O:L.indexOf(R)>=0}function I(R,O){var z,G=c(R);return G?G[S]=O:(z=L.indexOf(R),z>=0?E[z]=O:(z=L.length,E[z]=O,L[z]=R)),this}function D(R){var O=c(R),z,G;return O?S in O&&delete O[S]:(z=L.indexOf(R),z<0?!1:(G=L.length-1,L[z]=void 0,E[z]=E[G],L[z]=L[G],L.length=G,E.length=G,!0))}return Object.create(h.prototype,{get___:{value:M(P)},has___:{value:M(F)},set___:{value:M(I)},delete___:{value:M(D)}})};h.prototype=Object.create(Object.prototype,{get:{value:function(E,S){return this.get___(E,S)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,S){return this.set___(E,S)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof n=="function"?function(){i&&typeof Proxy<"u"&&(Proxy=void 0);function L(){this instanceof h||p();var E=new n,S=void 0,P=!1;function F(O,z){return S?E.has(O)?E.get(O):S.get___(O,z):E.get(O,z)}function I(O){return E.has(O)||(S?S.has___(O):!1)}var D;i?D=function(O,z){return E.set(O,z),E.has(O)||(S||(S=new h),S.set(O,z)),this}:D=function(O,z){if(P)try{E.set(O,z)}catch{S||(S=new h),S.set___(O,z)}else E.set(O,z);return this};function R(O){var z=!!E.delete(O);return S&&S.delete___(O)||z}return Object.create(h.prototype,{get___:{value:M(F)},has___:{value:M(I)},set___:{value:M(D)},delete___:{value:M(R)},permitHostObjects___:{value:M(function(O){if(O===a)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=h.prototype,A.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),A.exports=h)})()},{}],314:[function(u,A,T){var e=u("./hidden-store.js");A.exports=a;function a(){var i={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var r=n.valueOf(i);return r&&r.identity===i?r:e(n,i)}}},{"./hidden-store.js":315}],315:[function(u,A,T){A.exports=e;function e(a,i){var n={identity:i},r=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(v){return v!==i?r.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(u,A,T){var e=u("./create-store.js");A.exports=a;function a(){var i=e();return{get:function(n,r){var v=i(n);return v.hasOwnProperty("value")?v.value:r},set:function(n,r){return i(n).value=r,this},has:function(n){return"value"in i(n)},delete:function(n){return delete i(n).value}}}},{"./create-store.js":314}],317:[function(u,A,T){function e(){return function(s,o,b,g,d,f){var y=s[0],l=b[0],x=[0],c=l;g|=0;var M=0,w=l;for(M=0;M<y;++M){{var p=o[g]-f,_=o[g+c]-f;p>=0!=_>=0&&d.push(x[0]+.5+.5*(p+_)/(p-_))}g+=w,++x[0]}}}function a(){return e()}var i=a;function n(s){var o={};return function(g,d,f){var y=g.dtype,l=g.order,x=[y,l.join()].join(),c=o[x];return c||(o[x]=c=s([y,l])),c(g.shape.slice(0),g.data,g.stride,g.offset|0,d,f)}}function r(s){return n(i.bind(void 0,s))}function v(s){return r({funcName:s.funcName})}A.exports=v({funcName:"zeroCrossings"})},{}],318:[function(u,A,T){A.exports=a;var e=u("./lib/zc-core");function a(i,n){var r=[];return n=+n||0,e(i.hi(i.shape[0]-1),r,n),r}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Vo<"u"?Vo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})})(Px);const dA=vA(Px.exports),gA=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function mA(ne){return gA.test(ne)}function Dx(){var ne=URL.createObjectURL(new Blob),ue=ne.toString();return URL.revokeObjectURL(ne),ue.split(/[:\/]/g).pop().toLowerCase()}Dx.valid=mA;function yA(ne){if(!ne.ok)throw new Error(ne.status+" "+ne.statusText);if(!(ne.status===204||ne.status===205))return ne.json()}function Uy(ne,ue){return fetch(ne,ue).then(yA)}function jh(ne,ue,t){this.k=ne,this.x=ue,this.y=t}jh.prototype={constructor:jh,scale:function(ne){return ne===1?this:new jh(this.k*ne,this.x,this.y)},translate:function(ne,ue){return ne===0&ue===0?this:new jh(this.k,this.x+this.k*ne,this.y+this.k*ue)},apply:function(ne){return[ne[0]*this.k+this.x,ne[1]*this.k+this.y]},applyX:function(ne){return ne*this.k+this.x},applyY:function(ne){return ne*this.k+this.y},invert:function(ne){return[(ne[0]-this.x)/this.k,(ne[1]-this.y)/this.k]},invertX:function(ne){return(ne-this.x)/this.k},invertY:function(ne){return(ne-this.y)/this.k},rescaleX:function(ne){return ne.copy().domain(ne.range().map(this.invertX,this).map(ne.invert,ne))},rescaleY:function(ne){return ne.copy().domain(ne.range().map(this.invertY,this).map(ne.invert,ne))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new jh(1,0,0);jh.prototype;const Rx=hA("counter",()=>{const ne=Kc([]),ue=Kc({}),t=Kc({}),N=Kc([]),V=Kc(new Set),m=Kc(new Set);ue.value={displayModeBar:!0},t.value={margin:{l:20,r:20,t:30,b:20}},(async()=>{const n=await Uy("https://api.exchangerate.host/latest");N.value=Object.keys(n.rates)})();function u(n){m.value.add(n)}function A(n){m.value.delete(n)}function T(n){console.log("replot called for ids:",m.value.size," and currencies ",V.value.size),m.value.size>0&&V.value.size>0&&e()}function e(){var n=new Date,r=new Date,v=10;r.setFullYear(n.getFullYear()-v);var s="https://api.exchangerate.host/timeseries?start_date="+r.toJSON().slice(0,10)+"&end_date="+n.toJSON().slice(0,10)+"&symbols="+Array.from(V.value).join(",");console.log("url",s),(async()=>{const o=await Uy(s);a(o)})()}function a(n){var r=[],v=Object.keys(n.rates),s=Object.values(n.rates);for(const o of V.value)console.log("Doing: ",o),r.push({x:v,y:s.map(function(b){return b[o]})});for(const o of m.value)dA.newPlot(o,r);console.log("tr",r)}function i(n){V.value=new Set(n),T()}return{ids:m,data:ne,config:ue,layout:t,replot:T,currencies:N,selectedC:V,changeData:i,registerId:u,deregisterId:A}}),xA=["id"],bA={__name:"PlotlyEx",props:["type","fill","hole"],setup(ne){const ue=ne,t=Rx();fd({get(){return this.debouncedHeight},set(m){this.heightTimeout&&clearTimeout(this.heightTimeout),this.heightTimeout=setTimeout(()=>{this.debouncedHeight=m},1e3)}}),fd({get(){return this.debouncedWidth},set(m){this.widthTimeout&&clearTimeout(this.widthTimeout),this.widthTimeout=setTimeout(()=>{this.debouncedWidth=m},1e3)}});function N(m=!0){t.replot(ue.type,V)}const V=Dx();return Eg(()=>{window.removeEventListener("resize",N),t.deregisterId(V)}),Mg(()=>{window.addEventListener("resize",N),t.registerId(V),N()}),t.$subscribe((m,u)=>{N(!1)}),(m,u)=>($s(),op("div",{id:Wv(V)},null,8,xA))}};var _A=Object.defineProperty,wA=Object.defineProperties,TA=Object.getOwnPropertyDescriptors,Vy=Object.getOwnPropertySymbols,AA=Object.prototype.hasOwnProperty,MA=Object.prototype.propertyIsEnumerable,Hy=(ne,ue,t)=>ue in ne?_A(ne,ue,{enumerable:!0,configurable:!0,writable:!0,value:t}):ne[ue]=t,Vh=(ne,ue)=>{for(var t in ue||(ue={}))AA.call(ue,t)&&Hy(ne,t,ue[t]);if(Vy)for(var t of Vy(ue))MA.call(ue,t)&&Hy(ne,t,ue[t]);return ne},Gy=(ne,ue)=>wA(ne,TA(ue));const EA={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(ne){this.autoscroll&&ne&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var ne;const ue=((ne=this.$refs.dropdownMenu)==null?void 0:ne.children[this.typeAheadPointer])||!1;if(ue){const t=this.getDropdownViewport(),{top:N,bottom:V,height:m}=ue.getBoundingClientRect();if(N<t.top)return this.$refs.dropdownMenu.scrollTop=ue.offsetTop;if(V>t.bottom)return this.$refs.dropdownMenu.scrollTop=ue.offsetTop-(t.height-m)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},SA={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let ne=0;ne<this.filteredOptions.length;ne++)if(this.selectable(this.filteredOptions[ne])){this.typeAheadPointer=ne;break}},open(ne){ne&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let ne=this.typeAheadPointer-1;ne>=0;ne--)if(this.selectable(this.filteredOptions[ne])){this.typeAheadPointer=ne;break}},typeAheadDown(){for(let ne=this.typeAheadPointer+1;ne<this.filteredOptions.length;ne++)if(this.selectable(this.filteredOptions[ne])){this.typeAheadPointer=ne;break}},typeAheadSelect(){const ne=this.filteredOptions[this.typeAheadPointer];ne&&this.selectable(ne)&&this.select(ne)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},kA={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(ne){this.mutableLoading=ne}},methods:{toggleLoading(ne=null){return ne==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=ne}}},Ix=(ne,ue)=>{const t=ne.__vccOpts||ne;for(const[N,V]of ue)t[N]=V;return t},CA={},LA={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},PA=sc("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),DA=[PA];function RA(ne,ue){return $s(),op("svg",LA,DA)}const IA=Ix(CA,[["render",RA]]),FA={},zA={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},OA=sc("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),NA=[OA];function BA(ne,ue){return $s(),op("svg",zA,NA)}const UA=Ix(FA,[["render",BA]]),Yy={Deselect:IA,OpenIndicator:UA},VA={mounted(ne,{instance:ue}){if(ue.appendToBody){const{height:t,top:N,left:V,width:m}=ue.$refs.toggle.getBoundingClientRect();let u=window.scrollX||window.pageXOffset,A=window.scrollY||window.pageYOffset;ne.unbindPosition=ue.calculatePosition(ne,ue,{width:m+"px",left:u+V+"px",top:A+N+t+"px"}),document.body.appendChild(ne)}},unmounted(ne,{instance:ue}){ue.appendToBody&&(ne.unbindPosition&&typeof ne.unbindPosition=="function"&&ne.unbindPosition(),ne.parentNode&&ne.parentNode.removeChild(ne))}};function HA(ne){const ue={};return Object.keys(ne).sort().forEach(t=>{ue[t]=ne[t]}),JSON.stringify(ue)}let GA=0;function YA(){return++GA}Vh({},Yy);function A0(ne){return ne===0?!1:Array.isArray(ne)&&ne.length===0?!0:!ne}function WA(ne){return(...ue)=>!ne(...ue)}function XA(ne,ue){return ne===void 0&&(ne="undefined"),ne===null&&(ne="null"),ne===!1&&(ne="false"),ne.toString().toLowerCase().indexOf(ue.trim())!==-1}function Fx(ne,ue,t,N){return ue?ne.filter(V=>XA(N(V,t),ue)).sort((V,m)=>N(V,t).length-N(m,t).length):ne}function jA(ne){return ne.filter(ue=>!ue.$isLabel)}function M0(ne,ue){return t=>t.reduce((N,V)=>V[ne]&&V[ne].length?(N.push({$groupLabel:V[ue],$isLabel:!0}),N.concat(V[ne])):N,[])}function ZA(ne,ue,t,N,V){return m=>m.map(u=>{if(!u[t])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const A=Fx(u[t],ne,ue,V);return A.length?{[N]:u[N],[t]:A}:[]})}const Wy=(...ne)=>ue=>ne.reduce((t,N)=>N(t),ue);var KA={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(ne,ue){return A0(ne)?"":ue?ne[ue]:ne}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const ne=this.search||"",ue=ne.toLowerCase().trim();let t=this.options.concat();return this.internalSearch?t=this.groupValues?this.filterAndFlat(t,ue,this.label):Fx(t,ue,this.label,this.customLabel):t=this.groupValues?M0(this.groupValues,this.groupLabel)(t):t,t=this.hideSelected?t.filter(WA(this.isSelected)):t,this.taggable&&ue.length&&!this.isExistingOption(ue)&&(this.tagPosition==="bottom"?t.push({isTag:!0,label:ne}):t.unshift({isTag:!0,label:ne})),t.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(ne=>ne[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(ue=>this.customLabel(ue,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(ne,ue,t){return Wy(ZA(ue,t,this.groupValues,this.groupLabel,this.customLabel),M0(this.groupValues,this.groupLabel))(ne)},flatAndStrip(ne){return Wy(M0(this.groupValues,this.groupLabel),jA)(ne)},updateSearch(ne){this.search=ne},isExistingOption(ne){return this.options?this.optionKeys.indexOf(ne)>-1:!1},isSelected(ne){const ue=this.trackBy?ne[this.trackBy]:ne;return this.valueKeys.indexOf(ue)>-1},isOptionDisabled(ne){return!!ne.$isDisabled},getOptionLabel(ne){if(A0(ne))return"";if(ne.isTag)return ne.label;if(ne.$isLabel)return ne.$groupLabel;const ue=this.customLabel(ne,this.label);return A0(ue)?"":ue},select(ne,ue){if(ne.$isLabel&&this.groupSelect){this.selectGroup(ne);return}if(!(this.blockKeys.indexOf(ue)!==-1||this.disabled||ne.$isDisabled||ne.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(ue==="Tab"&&!this.pointerDirty)){if(ne.isTag)this.$emit("tag",ne.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(ne)){ue!=="Tab"&&this.removeElement(ne);return}this.$emit("select",ne,this.id),this.multiple?this.$emit("update:modelValue",this.internalValue.concat([ne])):this.$emit("update:modelValue",ne),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(ne){const ue=this.options.find(t=>t[this.groupLabel]===ne.$groupLabel);if(!!ue){if(this.wholeGroupSelected(ue)){this.$emit("remove",ue[this.groupValues],this.id);const t=this.internalValue.filter(N=>ue[this.groupValues].indexOf(N)===-1);this.$emit("update:modelValue",t)}else{const t=ue[this.groupValues].filter(N=>!(this.isOptionDisabled(N)||this.isSelected(N)));this.$emit("select",t,this.id),this.$emit("update:modelValue",this.internalValue.concat(t))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(ne){return ne[this.groupValues].every(ue=>this.isSelected(ue)||this.isOptionDisabled(ue))},wholeGroupDisabled(ne){return ne[this.groupValues].every(this.isOptionDisabled)},removeElement(ne,ue=!0){if(this.disabled||ne.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const t=typeof ne=="object"?this.valueKeys.indexOf(ne[this.trackBy]):this.valueKeys.indexOf(ne);if(this.$emit("remove",ne,this.id),this.multiple){const N=this.internalValue.slice(0,t).concat(this.internalValue.slice(t+1));this.$emit("update:modelValue",N)}else this.$emit("update:modelValue",null);this.closeOnSelect&&ue&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.$el.focus(),this.$emit("open",this.id))},deactivate(){!this.isOpen||(this.isOpen=!1,this.searchable?this.$refs.search&&this.$refs.search.blur():this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const ne=this.$el.getBoundingClientRect().top,ue=window.innerHeight-this.$el.getBoundingClientRect().bottom;ue>this.maxHeight||ue>ne||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(ue-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(ne-40,this.maxHeight))}}},$A={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(ne,ue){return{"multiselect__option--highlight":ne===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(ue)}},groupHighlight(ne,ue){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":ue.$isLabel}];const t=this.options.find(N=>N[this.groupLabel]===ue.$groupLabel);return t&&!this.wholeGroupDisabled(t)?["multiselect__option--group",{"multiselect__option--highlight":ne===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(t)}]:"multiselect__option--disabled"},addPointerElement({key:ne}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],ne),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){!this.closeOnSelect||(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(ne){this.pointer=ne,this.pointerDirty=!0}}},zx={name:"vue-multiselect",mixins:[KA,$A],props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:ne=>`and ${ne} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const JA={ref:"tags",class:"multiselect__tags"},QA={class:"multiselect__tags-wrap"},qA={class:"multiselect__spinner"},e5={key:0},t5={class:"multiselect__option"},r5={class:"multiselect__option"},n5=Qh("No elements found. Consider changing the search query."),a5={class:"multiselect__option"},i5=Qh("List is empty.");function o5(ne,ue,t,N,V,m){return $s(),Au("div",{tabindex:ne.searchable?-1:t.tabindex,class:[{"multiselect--active":ne.isOpen,"multiselect--disabled":t.disabled,"multiselect--above":m.isAbove},"multiselect"],onFocus:ue[14]||(ue[14]=u=>ne.activate()),onBlur:ue[15]||(ue[15]=u=>ne.searchable?!1:ne.deactivate()),onKeydown:[ue[16]||(ue[16]=zc(Ks(u=>ne.pointerForward(),["self","prevent"]),["down"])),ue[17]||(ue[17]=zc(Ks(u=>ne.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:ue[18]||(ue[18]=zc(Ks(u=>ne.addPointerElement(u),["stop","self"]),["enter","tab"])),onKeyup:ue[19]||(ue[19]=zc(u=>ne.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+ne.id},[nu(ne.$slots,"caret",{toggle:ne.toggle},()=>[no("div",{onMousedown:ue[1]||(ue[1]=Ks(u=>ne.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),nu(ne.$slots,"clear",{search:ne.search}),no("div",JA,[nu(ne.$slots,"selection",{search:ne.search,remove:ne.removeElement,values:m.visibleValues,isOpen:ne.isOpen},()=>[Nv(no("div",QA,[($s(!0),Au(iu,null,my(m.visibleValues,(u,A)=>nu(ne.$slots,"tag",{option:u,search:ne.search,remove:ne.removeElement},()=>[($s(),Au("span",{class:"multiselect__tag",key:A},[no("span",{textContent:jf(ne.getOptionLabel(u))},null,8,["textContent"]),no("i",{tabindex:"1",onKeypress:zc(Ks(T=>ne.removeElement(u),["prevent"]),["enter"]),onMousedown:Ks(T=>ne.removeElement(u),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[Uv,m.visibleValues.length>0]]),ne.internalValue&&ne.internalValue.length>t.limit?nu(ne.$slots,"limit",{key:0},()=>[no("strong",{class:"multiselect__strong",textContent:jf(t.limitText(ne.internalValue.length-t.limit))},null,8,["textContent"])]):xf("v-if",!0)]),no(hd,{name:"multiselect__loading"},{default:Y0(()=>[nu(ne.$slots,"loading",{},()=>[Nv(no("div",qA,null,512),[[Uv,t.loading]])])]),_:3}),ne.searchable?($s(),Au("input",{key:0,ref:"search",name:t.name,id:ne.id,type:"text",autocomplete:"off",spellcheck:"false",placeholder:ne.placeholder,style:m.inputStyle,value:ne.search,disabled:t.disabled,tabindex:t.tabindex,onInput:ue[2]||(ue[2]=u=>ne.updateSearch(u.target.value)),onFocus:ue[3]||(ue[3]=Ks(u=>ne.activate(),["prevent"])),onBlur:ue[4]||(ue[4]=Ks(u=>ne.deactivate(),["prevent"])),onKeyup:ue[5]||(ue[5]=zc(u=>ne.deactivate(),["esc"])),onKeydown:[ue[6]||(ue[6]=zc(Ks(u=>ne.pointerForward(),["prevent"]),["down"])),ue[7]||(ue[7]=zc(Ks(u=>ne.pointerBackward(),["prevent"]),["up"])),ue[9]||(ue[9]=zc(Ks(u=>ne.removeLastElement(),["stop"]),["delete"]))],onKeypress:ue[8]||(ue[8]=zc(Ks(u=>ne.addPointerElement(u),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+ne.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):xf("v-if",!0),m.isSingleLabelVisible?($s(),Au("span",{key:1,class:"multiselect__single",onMousedown:ue[10]||(ue[10]=Ks((...u)=>ne.toggle&&ne.toggle(...u),["prevent"]))},[nu(ne.$slots,"singleLabel",{option:m.singleValue},()=>[Qh(jf(ne.currentOptionLabel),1)])],32)):xf("v-if",!0),m.isPlaceholderVisible?($s(),Au("span",{key:2,class:"multiselect__placeholder",onMousedown:ue[11]||(ue[11]=Ks((...u)=>ne.toggle&&ne.toggle(...u),["prevent"]))},[nu(ne.$slots,"placeholder",{},()=>[Qh(jf(ne.placeholder),1)])],32)):xf("v-if",!0)],512),no(hd,{name:"multiselect"},{default:Y0(()=>[Nv(no("div",{class:"multiselect__content-wrapper",onFocus:ue[12]||(ue[12]=(...u)=>ne.activate&&ne.activate(...u)),tabindex:"-1",onMousedown:ue[13]||(ue[13]=Ks(()=>{},["prevent"])),style:{maxHeight:ne.optimizedHeight+"px"},ref:"list"},[no("ul",{class:"multiselect__content",style:m.contentStyle,role:"listbox",id:"listbox-"+ne.id},[nu(ne.$slots,"beforeList"),ne.multiple&&ne.max===ne.internalValue.length?($s(),Au("li",e5,[no("span",t5,[nu(ne.$slots,"maxElements",{},()=>[Qh("Maximum of "+jf(ne.max)+" options selected. First remove a selected option to select another.",1)])])])):xf("v-if",!0),!ne.max||ne.internalValue.length<ne.max?($s(!0),Au(iu,{key:1},my(ne.filteredOptions,(u,A)=>($s(),Au("li",{class:"multiselect__element",key:A,id:ne.id+"-"+A,role:u&&(u.$isLabel||u.$isDisabled)?null:"option"},[u&&(u.$isLabel||u.$isDisabled)?xf("v-if",!0):($s(),Au("span",{key:0,class:[ne.optionHighlight(A,u),"multiselect__option"],onClick:Ks(T=>ne.select(u),["stop"]),onMouseenter:Ks(T=>ne.pointerSet(A),["self"]),"data-select":u&&u.isTag?ne.tagPlaceholder:m.selectLabelText,"data-selected":m.selectedLabelText,"data-deselect":m.deselectLabelText},[nu(ne.$slots,"option",{option:u,search:ne.search,index:A},()=>[no("span",null,jf(ne.getOptionLabel(u)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),u&&(u.$isLabel||u.$isDisabled)?($s(),Au("span",{key:1,"data-select":ne.groupSelect&&m.selectGroupLabelText,"data-deselect":ne.groupSelect&&m.deselectGroupLabelText,class:[ne.groupHighlight(A,u),"multiselect__option"],onMouseenter:Ks(T=>ne.groupSelect&&ne.pointerSet(A),["self"]),onMousedown:Ks(T=>ne.selectGroup(u),["prevent"])},[nu(ne.$slots,"option",{option:u,search:ne.search,index:A},()=>[no("span",null,jf(ne.getOptionLabel(u)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):xf("v-if",!0)],8,["id","role"]))),128)):xf("v-if",!0),Nv(no("li",null,[no("span",r5,[nu(ne.$slots,"noResult",{search:ne.search},()=>[n5])])],512),[[Uv,t.showNoResults&&ne.filteredOptions.length===0&&ne.search&&!t.loading]]),Nv(no("li",null,[no("span",a5,[nu(ne.$slots,"noOptions",{},()=>[i5])])],512),[[Uv,t.showNoOptions&&ne.options.length===0&&!ne.search&&!t.loading]]),nu(ne.$slots,"afterList")],12,["id"])],36),[[Uv,ne.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}zx.render=o5;const s5={style:{"--vs-dropdown-color":"black"}},l5={__name:"DataChanger",setup(ne){const ue=Rx(),t=Kc([]);return(N,V)=>($s(),op("div",s5,[no(Wv(zx),{modelValue:t.value,"onUpdate:modelValue":[V[0]||(V[0]=m=>t.value=m),Wv(ue).changeData],multiple:!0,options:Wv(ue).currencies,placeholder:"Select currencies"},null,8,["modelValue","options","onUpdate:modelValue"])]))}},u5={class:"container-fluid p-5 bg-primary text-white text-center"},c5=sc("h1",null,"Exchange rate history",-1),f5=sc("p",null,"Select the Currency",-1),h5={class:"container mt-5"},v5={class:"row"},p5={class:"card"},d5=sc("h3",{class:"text-center"},"Line ",-1),g5={__name:"MainPage",setup(ne){return(ue,t)=>($s(),op(iu,null,[sc("div",u5,[c5,f5,no(l5)]),sc("div",h5,[sc("div",v5,[sc("div",p5,[d5,sc("div",null,[no(bA,{type:"scatter"})])])])])],64))}},m5={__name:"App",setup(ne){return(ue,t)=>($s(),Au(g5))}};var ou="top",Wu="bottom",Xu="right",su="left",Ld="auto",hv=[ou,Wu,Xu,su],lh="start",nv="end",Ox="clippingParents",Lg="viewport",Yh="popper",Nx="reference",tg=hv.reduce(function(ne,ue){return ne.concat([ue+"-"+lh,ue+"-"+nv])},[]),Pg=[].concat(hv,[Ld]).reduce(function(ne,ue){return ne.concat([ue,ue+"-"+lh,ue+"-"+nv])},[]),Bx="beforeRead",Ux="read",Vx="afterRead",Hx="beforeMain",Gx="main",Yx="afterMain",Wx="beforeWrite",Xx="write",jx="afterWrite",Zx=[Bx,Ux,Vx,Hx,Gx,Yx,Wx,Xx,jx];function Vc(ne){return ne?(ne.nodeName||"").toLowerCase():null}function hc(ne){if(ne==null)return window;if(ne.toString()!=="[object Window]"){var ue=ne.ownerDocument;return ue&&ue.defaultView||window}return ne}function uh(ne){var ue=hc(ne).Element;return ne instanceof ue||ne instanceof Element}function cc(ne){var ue=hc(ne).HTMLElement;return ne instanceof ue||ne instanceof HTMLElement}function Dg(ne){if(typeof ShadowRoot>"u")return!1;var ue=hc(ne).ShadowRoot;return ne instanceof ue||ne instanceof ShadowRoot}function y5(ne){var ue=ne.state;Object.keys(ue.elements).forEach(function(t){var N=ue.styles[t]||{},V=ue.attributes[t]||{},m=ue.elements[t];!cc(m)||!Vc(m)||(Object.assign(m.style,N),Object.keys(V).forEach(function(u){var A=V[u];A===!1?m.removeAttribute(u):m.setAttribute(u,A===!0?"":A)}))})}function x5(ne){var ue=ne.state,t={popper:{position:ue.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(ue.elements.popper.style,t.popper),ue.styles=t,ue.elements.arrow&&Object.assign(ue.elements.arrow.style,t.arrow),function(){Object.keys(ue.elements).forEach(function(N){var V=ue.elements[N],m=ue.attributes[N]||{},u=Object.keys(ue.styles.hasOwnProperty(N)?ue.styles[N]:t[N]),A=u.reduce(function(T,e){return T[e]="",T},{});!cc(V)||!Vc(V)||(Object.assign(V.style,A),Object.keys(m).forEach(function(T){V.removeAttribute(T)}))})}}const Rg={name:"applyStyles",enabled:!0,phase:"write",fn:y5,effect:x5,requires:["computeStyles"]};function Bc(ne){return ne.split("-")[0]}var sh=Math.max,vd=Math.min,av=Math.round;function rg(){var ne=navigator.userAgentData;return ne!=null&&ne.brands?ne.brands.map(function(ue){return ue.brand+"/"+ue.version}).join(" "):navigator.userAgent}function Kx(){return!/^((?!chrome|android).)*safari/i.test(rg())}function iv(ne,ue,t){ue===void 0&&(ue=!1),t===void 0&&(t=!1);var N=ne.getBoundingClientRect(),V=1,m=1;ue&&cc(ne)&&(V=ne.offsetWidth>0&&av(N.width)/ne.offsetWidth||1,m=ne.offsetHeight>0&&av(N.height)/ne.offsetHeight||1);var u=uh(ne)?hc(ne):window,A=u.visualViewport,T=!Kx()&&t,e=(N.left+(T&&A?A.offsetLeft:0))/V,a=(N.top+(T&&A?A.offsetTop:0))/m,i=N.width/V,n=N.height/m;return{width:i,height:n,top:a,right:e+i,bottom:a+n,left:e,x:e,y:a}}function Ig(ne){var ue=iv(ne),t=ne.offsetWidth,N=ne.offsetHeight;return Math.abs(ue.width-t)<=1&&(t=ue.width),Math.abs(ue.height-N)<=1&&(N=ue.height),{x:ne.offsetLeft,y:ne.offsetTop,width:t,height:N}}function $x(ne,ue){var t=ue.getRootNode&&ue.getRootNode();if(ne.contains(ue))return!0;if(t&&Dg(t)){var N=ue;do{if(N&&ne.isSameNode(N))return!0;N=N.parentNode||N.host}while(N)}return!1}function tf(ne){return hc(ne).getComputedStyle(ne)}function b5(ne){return["table","td","th"].indexOf(Vc(ne))>=0}function Rf(ne){return((uh(ne)?ne.ownerDocument:ne.document)||window.document).documentElement}function Pd(ne){return Vc(ne)==="html"?ne:ne.assignedSlot||ne.parentNode||(Dg(ne)?ne.host:null)||Rf(ne)}function Xy(ne){return!cc(ne)||tf(ne).position==="fixed"?null:ne.offsetParent}function _5(ne){var ue=/firefox/i.test(rg()),t=/Trident/i.test(rg());if(t&&cc(ne)){var N=tf(ne);if(N.position==="fixed")return null}var V=Pd(ne);for(Dg(V)&&(V=V.host);cc(V)&&["html","body"].indexOf(Vc(V))<0;){var m=tf(V);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||ue&&m.willChange==="filter"||ue&&m.filter&&m.filter!=="none")return V;V=V.parentNode}return null}function sp(ne){for(var ue=hc(ne),t=Xy(ne);t&&b5(t)&&tf(t).position==="static";)t=Xy(t);return t&&(Vc(t)==="html"||Vc(t)==="body"&&tf(t).position==="static")?ue:t||_5(ne)||ue}function Fg(ne){return["top","bottom"].indexOf(ne)>=0?"x":"y"}function Jv(ne,ue,t){return sh(ne,vd(ue,t))}function w5(ne,ue,t){var N=Jv(ne,ue,t);return N>t?t:N}function Jx(){return{top:0,right:0,bottom:0,left:0}}function Qx(ne){return Object.assign({},Jx(),ne)}function qx(ne,ue){return ue.reduce(function(t,N){return t[N]=ne,t},{})}var T5=function(ue,t){return ue=typeof ue=="function"?ue(Object.assign({},t.rects,{placement:t.placement})):ue,Qx(typeof ue!="number"?ue:qx(ue,hv))};function A5(ne){var ue,t=ne.state,N=ne.name,V=ne.options,m=t.elements.arrow,u=t.modifiersData.popperOffsets,A=Bc(t.placement),T=Fg(A),e=[su,Xu].indexOf(A)>=0,a=e?"height":"width";if(!(!m||!u)){var i=T5(V.padding,t),n=Ig(m),r=T==="y"?ou:su,v=T==="y"?Wu:Xu,s=t.rects.reference[a]+t.rects.reference[T]-u[T]-t.rects.popper[a],o=u[T]-t.rects.reference[T],b=sp(m),g=b?T==="y"?b.clientHeight||0:b.clientWidth||0:0,d=s/2-o/2,f=i[r],y=g-n[a]-i[v],l=g/2-n[a]/2+d,x=Jv(f,l,y),c=T;t.modifiersData[N]=(ue={},ue[c]=x,ue.centerOffset=x-l,ue)}}function M5(ne){var ue=ne.state,t=ne.options,N=t.element,V=N===void 0?"[data-popper-arrow]":N;V!=null&&(typeof V=="string"&&(V=ue.elements.popper.querySelector(V),!V)||!$x(ue.elements.popper,V)||(ue.elements.arrow=V))}const eb={name:"arrow",enabled:!0,phase:"main",fn:A5,effect:M5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ov(ne){return ne.split("-")[1]}var E5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function S5(ne){var ue=ne.x,t=ne.y,N=window,V=N.devicePixelRatio||1;return{x:av(ue*V)/V||0,y:av(t*V)/V||0}}function jy(ne){var ue,t=ne.popper,N=ne.popperRect,V=ne.placement,m=ne.variation,u=ne.offsets,A=ne.position,T=ne.gpuAcceleration,e=ne.adaptive,a=ne.roundOffsets,i=ne.isFixed,n=u.x,r=n===void 0?0:n,v=u.y,s=v===void 0?0:v,o=typeof a=="function"?a({x:r,y:s}):{x:r,y:s};r=o.x,s=o.y;var b=u.hasOwnProperty("x"),g=u.hasOwnProperty("y"),d=su,f=ou,y=window;if(e){var l=sp(t),x="clientHeight",c="clientWidth";if(l===hc(t)&&(l=Rf(t),tf(l).position!=="static"&&A==="absolute"&&(x="scrollHeight",c="scrollWidth")),l=l,V===ou||(V===su||V===Xu)&&m===nv){f=Wu;var M=i&&l===y&&y.visualViewport?y.visualViewport.height:l[x];s-=M-N.height,s*=T?1:-1}if(V===su||(V===ou||V===Wu)&&m===nv){d=Xu;var w=i&&l===y&&y.visualViewport?y.visualViewport.width:l[c];r-=w-N.width,r*=T?1:-1}}var p=Object.assign({position:A},e&&E5),_=a===!0?S5({x:r,y:s}):{x:r,y:s};if(r=_.x,s=_.y,T){var h;return Object.assign({},p,(h={},h[f]=g?"0":"",h[d]=b?"0":"",h.transform=(y.devicePixelRatio||1)<=1?"translate("+r+"px, "+s+"px)":"translate3d("+r+"px, "+s+"px, 0)",h))}return Object.assign({},p,(ue={},ue[f]=g?s+"px":"",ue[d]=b?r+"px":"",ue.transform="",ue))}function k5(ne){var ue=ne.state,t=ne.options,N=t.gpuAcceleration,V=N===void 0?!0:N,m=t.adaptive,u=m===void 0?!0:m,A=t.roundOffsets,T=A===void 0?!0:A,e={placement:Bc(ue.placement),variation:ov(ue.placement),popper:ue.elements.popper,popperRect:ue.rects.popper,gpuAcceleration:V,isFixed:ue.options.strategy==="fixed"};ue.modifiersData.popperOffsets!=null&&(ue.styles.popper=Object.assign({},ue.styles.popper,jy(Object.assign({},e,{offsets:ue.modifiersData.popperOffsets,position:ue.options.strategy,adaptive:u,roundOffsets:T})))),ue.modifiersData.arrow!=null&&(ue.styles.arrow=Object.assign({},ue.styles.arrow,jy(Object.assign({},e,{offsets:ue.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:T})))),ue.attributes.popper=Object.assign({},ue.attributes.popper,{"data-popper-placement":ue.placement})}const zg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:k5,data:{}};var jp={passive:!0};function C5(ne){var ue=ne.state,t=ne.instance,N=ne.options,V=N.scroll,m=V===void 0?!0:V,u=N.resize,A=u===void 0?!0:u,T=hc(ue.elements.popper),e=[].concat(ue.scrollParents.reference,ue.scrollParents.popper);return m&&e.forEach(function(a){a.addEventListener("scroll",t.update,jp)}),A&&T.addEventListener("resize",t.update,jp),function(){m&&e.forEach(function(a){a.removeEventListener("scroll",t.update,jp)}),A&&T.removeEventListener("resize",t.update,jp)}}const Og={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:C5,data:{}};var L5={left:"right",right:"left",bottom:"top",top:"bottom"};function nd(ne){return ne.replace(/left|right|bottom|top/g,function(ue){return L5[ue]})}var P5={start:"end",end:"start"};function Zy(ne){return ne.replace(/start|end/g,function(ue){return P5[ue]})}function Ng(ne){var ue=hc(ne),t=ue.pageXOffset,N=ue.pageYOffset;return{scrollLeft:t,scrollTop:N}}function Bg(ne){return iv(Rf(ne)).left+Ng(ne).scrollLeft}function D5(ne,ue){var t=hc(ne),N=Rf(ne),V=t.visualViewport,m=N.clientWidth,u=N.clientHeight,A=0,T=0;if(V){m=V.width,u=V.height;var e=Kx();(e||!e&&ue==="fixed")&&(A=V.offsetLeft,T=V.offsetTop)}return{width:m,height:u,x:A+Bg(ne),y:T}}function R5(ne){var ue,t=Rf(ne),N=Ng(ne),V=(ue=ne.ownerDocument)==null?void 0:ue.body,m=sh(t.scrollWidth,t.clientWidth,V?V.scrollWidth:0,V?V.clientWidth:0),u=sh(t.scrollHeight,t.clientHeight,V?V.scrollHeight:0,V?V.clientHeight:0),A=-N.scrollLeft+Bg(ne),T=-N.scrollTop;return tf(V||t).direction==="rtl"&&(A+=sh(t.clientWidth,V?V.clientWidth:0)-m),{width:m,height:u,x:A,y:T}}function Ug(ne){var ue=tf(ne),t=ue.overflow,N=ue.overflowX,V=ue.overflowY;return/auto|scroll|overlay|hidden/.test(t+V+N)}function tb(ne){return["html","body","#document"].indexOf(Vc(ne))>=0?ne.ownerDocument.body:cc(ne)&&Ug(ne)?ne:tb(Pd(ne))}function Qv(ne,ue){var t;ue===void 0&&(ue=[]);var N=tb(ne),V=N===((t=ne.ownerDocument)==null?void 0:t.body),m=hc(N),u=V?[m].concat(m.visualViewport||[],Ug(N)?N:[]):N,A=ue.concat(u);return V?A:A.concat(Qv(Pd(u)))}function ng(ne){return Object.assign({},ne,{left:ne.x,top:ne.y,right:ne.x+ne.width,bottom:ne.y+ne.height})}function I5(ne,ue){var t=iv(ne,!1,ue==="fixed");return t.top=t.top+ne.clientTop,t.left=t.left+ne.clientLeft,t.bottom=t.top+ne.clientHeight,t.right=t.left+ne.clientWidth,t.width=ne.clientWidth,t.height=ne.clientHeight,t.x=t.left,t.y=t.top,t}function Ky(ne,ue,t){return ue===Lg?ng(D5(ne,t)):uh(ue)?I5(ue,t):ng(R5(Rf(ne)))}function F5(ne){var ue=Qv(Pd(ne)),t=["absolute","fixed"].indexOf(tf(ne).position)>=0,N=t&&cc(ne)?sp(ne):ne;return uh(N)?ue.filter(function(V){return uh(V)&&$x(V,N)&&Vc(V)!=="body"}):[]}function z5(ne,ue,t,N){var V=ue==="clippingParents"?F5(ne):[].concat(ue),m=[].concat(V,[t]),u=m[0],A=m.reduce(function(T,e){var a=Ky(ne,e,N);return T.top=sh(a.top,T.top),T.right=vd(a.right,T.right),T.bottom=vd(a.bottom,T.bottom),T.left=sh(a.left,T.left),T},Ky(ne,u,N));return A.width=A.right-A.left,A.height=A.bottom-A.top,A.x=A.left,A.y=A.top,A}function rb(ne){var ue=ne.reference,t=ne.element,N=ne.placement,V=N?Bc(N):null,m=N?ov(N):null,u=ue.x+ue.width/2-t.width/2,A=ue.y+ue.height/2-t.height/2,T;switch(V){case ou:T={x:u,y:ue.y-t.height};break;case Wu:T={x:u,y:ue.y+ue.height};break;case Xu:T={x:ue.x+ue.width,y:A};break;case su:T={x:ue.x-t.width,y:A};break;default:T={x:ue.x,y:ue.y}}var e=V?Fg(V):null;if(e!=null){var a=e==="y"?"height":"width";switch(m){case lh:T[e]=T[e]-(ue[a]/2-t[a]/2);break;case nv:T[e]=T[e]+(ue[a]/2-t[a]/2);break}}return T}function sv(ne,ue){ue===void 0&&(ue={});var t=ue,N=t.placement,V=N===void 0?ne.placement:N,m=t.strategy,u=m===void 0?ne.strategy:m,A=t.boundary,T=A===void 0?Ox:A,e=t.rootBoundary,a=e===void 0?Lg:e,i=t.elementContext,n=i===void 0?Yh:i,r=t.altBoundary,v=r===void 0?!1:r,s=t.padding,o=s===void 0?0:s,b=Qx(typeof o!="number"?o:qx(o,hv)),g=n===Yh?Nx:Yh,d=ne.rects.popper,f=ne.elements[v?g:n],y=z5(uh(f)?f:f.contextElement||Rf(ne.elements.popper),T,a,u),l=iv(ne.elements.reference),x=rb({reference:l,element:d,strategy:"absolute",placement:V}),c=ng(Object.assign({},d,x)),M=n===Yh?c:l,w={top:y.top-M.top+b.top,bottom:M.bottom-y.bottom+b.bottom,left:y.left-M.left+b.left,right:M.right-y.right+b.right},p=ne.modifiersData.offset;if(n===Yh&&p){var _=p[V];Object.keys(w).forEach(function(h){var L=[Xu,Wu].indexOf(h)>=0?1:-1,E=[ou,Wu].indexOf(h)>=0?"y":"x";w[h]+=_[E]*L})}return w}function O5(ne,ue){ue===void 0&&(ue={});var t=ue,N=t.placement,V=t.boundary,m=t.rootBoundary,u=t.padding,A=t.flipVariations,T=t.allowedAutoPlacements,e=T===void 0?Pg:T,a=ov(N),i=a?A?tg:tg.filter(function(v){return ov(v)===a}):hv,n=i.filter(function(v){return e.indexOf(v)>=0});n.length===0&&(n=i);var r=n.reduce(function(v,s){return v[s]=sv(ne,{placement:s,boundary:V,rootBoundary:m,padding:u})[Bc(s)],v},{});return Object.keys(r).sort(function(v,s){return r[v]-r[s]})}function N5(ne){if(Bc(ne)===Ld)return[];var ue=nd(ne);return[Zy(ne),ue,Zy(ue)]}function B5(ne){var ue=ne.state,t=ne.options,N=ne.name;if(!ue.modifiersData[N]._skip){for(var V=t.mainAxis,m=V===void 0?!0:V,u=t.altAxis,A=u===void 0?!0:u,T=t.fallbackPlacements,e=t.padding,a=t.boundary,i=t.rootBoundary,n=t.altBoundary,r=t.flipVariations,v=r===void 0?!0:r,s=t.allowedAutoPlacements,o=ue.options.placement,b=Bc(o),g=b===o,d=T||(g||!v?[nd(o)]:N5(o)),f=[o].concat(d).reduce(function(G,Y){return G.concat(Bc(Y)===Ld?O5(ue,{placement:Y,boundary:a,rootBoundary:i,padding:e,flipVariations:v,allowedAutoPlacements:s}):Y)},[]),y=ue.rects.reference,l=ue.rects.popper,x=new Map,c=!0,M=f[0],w=0;w<f.length;w++){var p=f[w],_=Bc(p),h=ov(p)===lh,L=[ou,Wu].indexOf(_)>=0,E=L?"width":"height",S=sv(ue,{placement:p,boundary:a,rootBoundary:i,altBoundary:n,padding:e}),P=L?h?Xu:su:h?Wu:ou;y[E]>l[E]&&(P=nd(P));var F=nd(P),I=[];if(m&&I.push(S[_]<=0),A&&I.push(S[P]<=0,S[F]<=0),I.every(function(G){return G})){M=p,c=!1;break}x.set(p,I)}if(c)for(var D=v?3:1,R=function(Y){var ee=f.find(function(j){var X=x.get(j);if(X)return X.slice(0,Y).every(function(ie){return ie})});if(ee)return M=ee,"break"},O=D;O>0;O--){var z=R(O);if(z==="break")break}ue.placement!==M&&(ue.modifiersData[N]._skip=!0,ue.placement=M,ue.reset=!0)}}const nb={name:"flip",enabled:!0,phase:"main",fn:B5,requiresIfExists:["offset"],data:{_skip:!1}};function $y(ne,ue,t){return t===void 0&&(t={x:0,y:0}),{top:ne.top-ue.height-t.y,right:ne.right-ue.width+t.x,bottom:ne.bottom-ue.height+t.y,left:ne.left-ue.width-t.x}}function Jy(ne){return[ou,Xu,Wu,su].some(function(ue){return ne[ue]>=0})}function U5(ne){var ue=ne.state,t=ne.name,N=ue.rects.reference,V=ue.rects.popper,m=ue.modifiersData.preventOverflow,u=sv(ue,{elementContext:"reference"}),A=sv(ue,{altBoundary:!0}),T=$y(u,N),e=$y(A,V,m),a=Jy(T),i=Jy(e);ue.modifiersData[t]={referenceClippingOffsets:T,popperEscapeOffsets:e,isReferenceHidden:a,hasPopperEscaped:i},ue.attributes.popper=Object.assign({},ue.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":i})}const ab={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:U5};function V5(ne,ue,t){var N=Bc(ne),V=[su,ou].indexOf(N)>=0?-1:1,m=typeof t=="function"?t(Object.assign({},ue,{placement:ne})):t,u=m[0],A=m[1];return u=u||0,A=(A||0)*V,[su,Xu].indexOf(N)>=0?{x:A,y:u}:{x:u,y:A}}function H5(ne){var ue=ne.state,t=ne.options,N=ne.name,V=t.offset,m=V===void 0?[0,0]:V,u=Pg.reduce(function(a,i){return a[i]=V5(i,ue.rects,m),a},{}),A=u[ue.placement],T=A.x,e=A.y;ue.modifiersData.popperOffsets!=null&&(ue.modifiersData.popperOffsets.x+=T,ue.modifiersData.popperOffsets.y+=e),ue.modifiersData[N]=u}const ib={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:H5};function G5(ne){var ue=ne.state,t=ne.name;ue.modifiersData[t]=rb({reference:ue.rects.reference,element:ue.rects.popper,strategy:"absolute",placement:ue.placement})}const Vg={name:"popperOffsets",enabled:!0,phase:"read",fn:G5,data:{}};function Y5(ne){return ne==="x"?"y":"x"}function W5(ne){var ue=ne.state,t=ne.options,N=ne.name,V=t.mainAxis,m=V===void 0?!0:V,u=t.altAxis,A=u===void 0?!1:u,T=t.boundary,e=t.rootBoundary,a=t.altBoundary,i=t.padding,n=t.tether,r=n===void 0?!0:n,v=t.tetherOffset,s=v===void 0?0:v,o=sv(ue,{boundary:T,rootBoundary:e,padding:i,altBoundary:a}),b=Bc(ue.placement),g=ov(ue.placement),d=!g,f=Fg(b),y=Y5(f),l=ue.modifiersData.popperOffsets,x=ue.rects.reference,c=ue.rects.popper,M=typeof s=="function"?s(Object.assign({},ue.rects,{placement:ue.placement})):s,w=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),p=ue.modifiersData.offset?ue.modifiersData.offset[ue.placement]:null,_={x:0,y:0};if(!!l){if(m){var h,L=f==="y"?ou:su,E=f==="y"?Wu:Xu,S=f==="y"?"height":"width",P=l[f],F=P+o[L],I=P-o[E],D=r?-c[S]/2:0,R=g===lh?x[S]:c[S],O=g===lh?-c[S]:-x[S],z=ue.elements.arrow,G=r&&z?Ig(z):{width:0,height:0},Y=ue.modifiersData["arrow#persistent"]?ue.modifiersData["arrow#persistent"].padding:Jx(),ee=Y[L],j=Y[E],X=Jv(0,x[S],G[S]),ie=d?x[S]/2-D-X-ee-w.mainAxis:R-X-ee-w.mainAxis,he=d?-x[S]/2+D+X+j+w.mainAxis:O+X+j+w.mainAxis,K=ue.elements.arrow&&sp(ue.elements.arrow),$=K?f==="y"?K.clientTop||0:K.clientLeft||0:0,U=(h=p==null?void 0:p[f])!=null?h:0,H=P+ie-U-$,q=P+he-U,re=Jv(r?vd(F,H):F,P,r?sh(I,q):I);l[f]=re,_[f]=re-P}if(A){var Z,Q=f==="x"?ou:su,oe=f==="x"?Wu:Xu,se=l[y],ae=y==="y"?"height":"width",le=se+o[Q],_e=se-o[oe],fe=[ou,su].indexOf(b)!==-1,me=(Z=p==null?void 0:p[y])!=null?Z:0,xe=fe?le:se-x[ae]-c[ae]-me+w.altAxis,ye=fe?se+x[ae]+c[ae]-me-w.altAxis:_e,be=r&&fe?w5(xe,se,ye):Jv(r?xe:le,se,r?ye:_e);l[y]=be,_[y]=be-se}ue.modifiersData[N]=_}}const ob={name:"preventOverflow",enabled:!0,phase:"main",fn:W5,requiresIfExists:["offset"]};function X5(ne){return{scrollLeft:ne.scrollLeft,scrollTop:ne.scrollTop}}function j5(ne){return ne===hc(ne)||!cc(ne)?Ng(ne):X5(ne)}function Z5(ne){var ue=ne.getBoundingClientRect(),t=av(ue.width)/ne.offsetWidth||1,N=av(ue.height)/ne.offsetHeight||1;return t!==1||N!==1}function K5(ne,ue,t){t===void 0&&(t=!1);var N=cc(ue),V=cc(ue)&&Z5(ue),m=Rf(ue),u=iv(ne,V,t),A={scrollLeft:0,scrollTop:0},T={x:0,y:0};return(N||!N&&!t)&&((Vc(ue)!=="body"||Ug(m))&&(A=j5(ue)),cc(ue)?(T=iv(ue,!0),T.x+=ue.clientLeft,T.y+=ue.clientTop):m&&(T.x=Bg(m))),{x:u.left+A.scrollLeft-T.x,y:u.top+A.scrollTop-T.y,width:u.width,height:u.height}}function $5(ne){var ue=new Map,t=new Set,N=[];ne.forEach(function(m){ue.set(m.name,m)});function V(m){t.add(m.name);var u=[].concat(m.requires||[],m.requiresIfExists||[]);u.forEach(function(A){if(!t.has(A)){var T=ue.get(A);T&&V(T)}}),N.push(m)}return ne.forEach(function(m){t.has(m.name)||V(m)}),N}function J5(ne){var ue=$5(ne);return Zx.reduce(function(t,N){return t.concat(ue.filter(function(V){return V.phase===N}))},[])}function Q5(ne){var ue;return function(){return ue||(ue=new Promise(function(t){Promise.resolve().then(function(){ue=void 0,t(ne())})})),ue}}function q5(ne){var ue=ne.reduce(function(t,N){var V=t[N.name];return t[N.name]=V?Object.assign({},V,N,{options:Object.assign({},V.options,N.options),data:Object.assign({},V.data,N.data)}):N,t},{});return Object.keys(ue).map(function(t){return ue[t]})}var Qy={placement:"bottom",modifiers:[],strategy:"absolute"};function qy(){for(var ne=arguments.length,ue=new Array(ne),t=0;t<ne;t++)ue[t]=arguments[t];return!ue.some(function(N){return!(N&&typeof N.getBoundingClientRect=="function")})}function Dd(ne){ne===void 0&&(ne={});var ue=ne,t=ue.defaultModifiers,N=t===void 0?[]:t,V=ue.defaultOptions,m=V===void 0?Qy:V;return function(A,T,e){e===void 0&&(e=m);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qy,m),modifiersData:{},elements:{reference:A,popper:T},attributes:{},styles:{}},i=[],n=!1,r={state:a,setOptions:function(b){var g=typeof b=="function"?b(a.options):b;s(),a.options=Object.assign({},m,a.options,g),a.scrollParents={reference:uh(A)?Qv(A):A.contextElement?Qv(A.contextElement):[],popper:Qv(T)};var d=J5(q5([].concat(N,a.options.modifiers)));return a.orderedModifiers=d.filter(function(f){return f.enabled}),v(),r.update()},forceUpdate:function(){if(!n){var b=a.elements,g=b.reference,d=b.popper;if(!!qy(g,d)){a.rects={reference:K5(g,sp(d),a.options.strategy==="fixed"),popper:Ig(d)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(w){return a.modifiersData[w.name]=Object.assign({},w.data)});for(var f=0;f<a.orderedModifiers.length;f++){if(a.reset===!0){a.reset=!1,f=-1;continue}var y=a.orderedModifiers[f],l=y.fn,x=y.options,c=x===void 0?{}:x,M=y.name;typeof l=="function"&&(a=l({state:a,options:c,name:M,instance:r})||a)}}}},update:Q5(function(){return new Promise(function(o){r.forceUpdate(),o(a)})}),destroy:function(){s(),n=!0}};if(!qy(A,T))return r;r.setOptions(e).then(function(o){!n&&e.onFirstUpdate&&e.onFirstUpdate(o)});function v(){a.orderedModifiers.forEach(function(o){var b=o.name,g=o.options,d=g===void 0?{}:g,f=o.effect;if(typeof f=="function"){var y=f({state:a,name:b,instance:r,options:d}),l=function(){};i.push(y||l)}})}function s(){i.forEach(function(o){return o()}),i=[]}return r}}var eM=Dd(),tM=[Og,Vg,zg,Rg],rM=Dd({defaultModifiers:tM}),nM=[Og,Vg,zg,Rg,ib,nb,ob,eb,ab],Hg=Dd({defaultModifiers:nM});const Gg=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Dd,detectOverflow:sv,createPopperBase:eM,createPopper:Hg,createPopperLite:rM,top:ou,bottom:Wu,right:Xu,left:su,auto:Ld,basePlacements:hv,start:lh,end:nv,clippingParents:Ox,viewport:Lg,popper:Yh,reference:Nx,variationPlacements:tg,placements:Pg,beforeRead:Bx,read:Ux,afterRead:Vx,beforeMain:Hx,main:Gx,afterMain:Yx,beforeWrite:Wx,write:Xx,afterWrite:jx,modifierPhases:Zx,applyStyles:Rg,arrow:eb,computeStyles:zg,eventListeners:Og,flip:nb,hide:ab,offset:ib,popperOffsets:Vg,preventOverflow:ob},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const aM=1e6,iM=1e3,ag="transitionend",oM=ne=>ne==null?`${ne}`:Object.prototype.toString.call(ne).match(/\s([a-z]+)/i)[1].toLowerCase(),sM=ne=>{do ne+=Math.floor(Math.random()*aM);while(document.getElementById(ne));return ne},sb=ne=>{let ue=ne.getAttribute("data-bs-target");if(!ue||ue==="#"){let t=ne.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),ue=t&&t!=="#"?t.trim():null}return ue},lb=ne=>{const ue=sb(ne);return ue&&document.querySelector(ue)?ue:null},Jc=ne=>{const ue=sb(ne);return ue?document.querySelector(ue):null},lM=ne=>{if(!ne)return 0;let{transitionDuration:ue,transitionDelay:t}=window.getComputedStyle(ne);const N=Number.parseFloat(ue),V=Number.parseFloat(t);return!N&&!V?0:(ue=ue.split(",")[0],t=t.split(",")[0],(Number.parseFloat(ue)+Number.parseFloat(t))*iM)},ub=ne=>{ne.dispatchEvent(new Event(ag))},Qc=ne=>!ne||typeof ne!="object"?!1:(typeof ne.jquery<"u"&&(ne=ne[0]),typeof ne.nodeType<"u"),Lf=ne=>Qc(ne)?ne.jquery?ne[0]:ne:typeof ne=="string"&&ne.length>0?document.querySelector(ne):null,vv=ne=>{if(!Qc(ne)||ne.getClientRects().length===0)return!1;const ue=getComputedStyle(ne).getPropertyValue("visibility")==="visible",t=ne.closest("details:not([open])");if(!t)return ue;if(t!==ne){const N=ne.closest("summary");if(N&&N.parentNode!==t||N===null)return!1}return ue},Pf=ne=>!ne||ne.nodeType!==Node.ELEMENT_NODE||ne.classList.contains("disabled")?!0:typeof ne.disabled<"u"?ne.disabled:ne.hasAttribute("disabled")&&ne.getAttribute("disabled")!=="false",cb=ne=>{if(!document.documentElement.attachShadow)return null;if(typeof ne.getRootNode=="function"){const ue=ne.getRootNode();return ue instanceof ShadowRoot?ue:null}return ne instanceof ShadowRoot?ne:ne.parentNode?cb(ne.parentNode):null},pd=()=>{},lp=ne=>{ne.offsetHeight},fb=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E0=[],uM=ne=>{document.readyState==="loading"?(E0.length||document.addEventListener("DOMContentLoaded",()=>{for(const ue of E0)ue()}),E0.push(ne)):ne()},fc=()=>document.documentElement.dir==="rtl",vc=ne=>{uM(()=>{const ue=fb();if(ue){const t=ne.NAME,N=ue.fn[t];ue.fn[t]=ne.jQueryInterface,ue.fn[t].Constructor=ne,ue.fn[t].noConflict=()=>(ue.fn[t]=N,ne.jQueryInterface)}})},$c=ne=>{typeof ne=="function"&&ne()},hb=(ne,ue,t=!0)=>{if(!t){$c(ne);return}const N=5,V=lM(ue)+N;let m=!1;const u=({target:A})=>{A===ue&&(m=!0,ue.removeEventListener(ag,u),$c(ne))};ue.addEventListener(ag,u),setTimeout(()=>{m||ub(ue)},V)},Yg=(ne,ue,t,N)=>{const V=ne.length;let m=ne.indexOf(ue);return m===-1?!t&&N?ne[V-1]:ne[0]:(m+=t?1:-1,N&&(m=(m+V)%V),ne[Math.max(0,Math.min(m,V-1))])},cM=/[^.]*(?=\..*)\.|.*/,fM=/\..*/,hM=/::\d+$/,S0={};let e1=1;const vb={mouseenter:"mouseover",mouseleave:"mouseout"},vM=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function pb(ne,ue){return ue&&`${ue}::${e1++}`||ne.uidEvent||e1++}function db(ne){const ue=pb(ne);return ne.uidEvent=ue,S0[ue]=S0[ue]||{},S0[ue]}function pM(ne,ue){return function t(N){return Wg(N,{delegateTarget:ne}),t.oneOff&&Sa.off(ne,N.type,ue),ue.apply(ne,[N])}}function dM(ne,ue,t){return function N(V){const m=ne.querySelectorAll(ue);for(let{target:u}=V;u&&u!==this;u=u.parentNode)for(const A of m)if(A===u)return Wg(V,{delegateTarget:u}),N.oneOff&&Sa.off(ne,V.type,ue,t),t.apply(u,[V])}}function gb(ne,ue,t=null){return Object.values(ne).find(N=>N.callable===ue&&N.delegationSelector===t)}function mb(ne,ue,t){const N=typeof ue=="string",V=N?t:ue||t;let m=yb(ne);return vM.has(m)||(m=ne),[N,V,m]}function t1(ne,ue,t,N,V){if(typeof ue!="string"||!ne)return;let[m,u,A]=mb(ue,t,N);ue in vb&&(u=(v=>function(s){if(!s.relatedTarget||s.relatedTarget!==s.delegateTarget&&!s.delegateTarget.contains(s.relatedTarget))return v.call(this,s)})(u));const T=db(ne),e=T[A]||(T[A]={}),a=gb(e,u,m?t:null);if(a){a.oneOff=a.oneOff&&V;return}const i=pb(u,ue.replace(cM,"")),n=m?dM(ne,t,u):pM(ne,u);n.delegationSelector=m?t:null,n.callable=u,n.oneOff=V,n.uidEvent=i,e[i]=n,ne.addEventListener(A,n,m)}function ig(ne,ue,t,N,V){const m=gb(ue[t],N,V);!m||(ne.removeEventListener(t,m,Boolean(V)),delete ue[t][m.uidEvent])}function gM(ne,ue,t,N){const V=ue[t]||{};for(const m of Object.keys(V))if(m.includes(N)){const u=V[m];ig(ne,ue,t,u.callable,u.delegationSelector)}}function yb(ne){return ne=ne.replace(fM,""),vb[ne]||ne}const Sa={on(ne,ue,t,N){t1(ne,ue,t,N,!1)},one(ne,ue,t,N){t1(ne,ue,t,N,!0)},off(ne,ue,t,N){if(typeof ue!="string"||!ne)return;const[V,m,u]=mb(ue,t,N),A=u!==ue,T=db(ne),e=T[u]||{},a=ue.startsWith(".");if(typeof m<"u"){if(!Object.keys(e).length)return;ig(ne,T,u,m,V?t:null);return}if(a)for(const i of Object.keys(T))gM(ne,T,i,ue.slice(1));for(const i of Object.keys(e)){const n=i.replace(hM,"");if(!A||ue.includes(n)){const r=e[i];ig(ne,T,u,r.callable,r.delegationSelector)}}},trigger(ne,ue,t){if(typeof ue!="string"||!ne)return null;const N=fb(),V=yb(ue),m=ue!==V;let u=null,A=!0,T=!0,e=!1;m&&N&&(u=N.Event(ue,t),N(ne).trigger(u),A=!u.isPropagationStopped(),T=!u.isImmediatePropagationStopped(),e=u.isDefaultPrevented());let a=new Event(ue,{bubbles:A,cancelable:!0});return a=Wg(a,t),e&&a.preventDefault(),T&&ne.dispatchEvent(a),a.defaultPrevented&&u&&u.preventDefault(),a}};function Wg(ne,ue){for(const[t,N]of Object.entries(ue||{}))try{ne[t]=N}catch{Object.defineProperty(ne,t,{configurable:!0,get(){return N}})}return ne}const wf=new Map,k0={set(ne,ue,t){wf.has(ne)||wf.set(ne,new Map);const N=wf.get(ne);if(!N.has(ue)&&N.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(N.keys())[0]}.`);return}N.set(ue,t)},get(ne,ue){return wf.has(ne)&&wf.get(ne).get(ue)||null},remove(ne,ue){if(!wf.has(ne))return;const t=wf.get(ne);t.delete(ue),t.size===0&&wf.delete(ne)}};function r1(ne){if(ne==="true")return!0;if(ne==="false")return!1;if(ne===Number(ne).toString())return Number(ne);if(ne===""||ne==="null")return null;if(typeof ne!="string")return ne;try{return JSON.parse(decodeURIComponent(ne))}catch{return ne}}function C0(ne){return ne.replace(/[A-Z]/g,ue=>`-${ue.toLowerCase()}`)}const qc={setDataAttribute(ne,ue,t){ne.setAttribute(`data-bs-${C0(ue)}`,t)},removeDataAttribute(ne,ue){ne.removeAttribute(`data-bs-${C0(ue)}`)},getDataAttributes(ne){if(!ne)return{};const ue={},t=Object.keys(ne.dataset).filter(N=>N.startsWith("bs")&&!N.startsWith("bsConfig"));for(const N of t){let V=N.replace(/^bs/,"");V=V.charAt(0).toLowerCase()+V.slice(1,V.length),ue[V]=r1(ne.dataset[N])}return ue},getDataAttribute(ne,ue){return r1(ne.getAttribute(`data-bs-${C0(ue)}`))}};class up{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(ue){return ue=this._mergeConfigObj(ue),ue=this._configAfterMerge(ue),this._typeCheckConfig(ue),ue}_configAfterMerge(ue){return ue}_mergeConfigObj(ue,t){const N=Qc(t)?qc.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof N=="object"?N:{},...Qc(t)?qc.getDataAttributes(t):{},...typeof ue=="object"?ue:{}}}_typeCheckConfig(ue,t=this.constructor.DefaultType){for(const N of Object.keys(t)){const V=t[N],m=ue[N],u=Qc(m)?"element":oM(m);if(!new RegExp(V).test(u))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${N}" provided type "${u}" but expected type "${V}".`)}}}const mM="5.2.3";class Mc extends up{constructor(ue,t){super(),ue=Lf(ue),ue&&(this._element=ue,this._config=this._getConfig(t),k0.set(this._element,this.constructor.DATA_KEY,this))}dispose(){k0.remove(this._element,this.constructor.DATA_KEY),Sa.off(this._element,this.constructor.EVENT_KEY);for(const ue of Object.getOwnPropertyNames(this))this[ue]=null}_queueCallback(ue,t,N=!0){hb(ue,t,N)}_getConfig(ue){return ue=this._mergeConfigObj(ue,this._element),ue=this._configAfterMerge(ue),this._typeCheckConfig(ue),ue}static getInstance(ue){return k0.get(Lf(ue),this.DATA_KEY)}static getOrCreateInstance(ue,t={}){return this.getInstance(ue)||new this(ue,typeof t=="object"?t:null)}static get VERSION(){return mM}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(ue){return`${ue}${this.EVENT_KEY}`}}const Rd=(ne,ue="hide")=>{const t=`click.dismiss${ne.EVENT_KEY}`,N=ne.NAME;Sa.on(document,t,`[data-bs-dismiss="${N}"]`,function(V){if(["A","AREA"].includes(this.tagName)&&V.preventDefault(),Pf(this))return;const m=Jc(this)||this.closest(`.${N}`);ne.getOrCreateInstance(m)[ue]()})},yM="alert",xM="bs.alert",xb=`.${xM}`,bM=`close${xb}`,_M=`closed${xb}`,wM="fade",TM="show";class Id extends Mc{static get NAME(){return yM}close(){if(Sa.trigger(this._element,bM).defaultPrevented)return;this._element.classList.remove(TM);const t=this._element.classList.contains(wM);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),Sa.trigger(this._element,_M),this.dispose()}static jQueryInterface(ue){return this.each(function(){const t=Id.getOrCreateInstance(this);if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue](this)}})}}Rd(Id,"close");vc(Id);const AM="button",MM="bs.button",EM=`.${MM}`,SM=".data-api",kM="active",n1='[data-bs-toggle="button"]',CM=`click${EM}${SM}`;class Fd extends Mc{static get NAME(){return AM}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(kM))}static jQueryInterface(ue){return this.each(function(){const t=Fd.getOrCreateInstance(this);ue==="toggle"&&t[ue]()})}}Sa.on(document,CM,n1,ne=>{ne.preventDefault();const ue=ne.target.closest(n1);Fd.getOrCreateInstance(ue).toggle()});vc(Fd);const Xi={find(ne,ue=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(ue,ne))},findOne(ne,ue=document.documentElement){return Element.prototype.querySelector.call(ue,ne)},children(ne,ue){return[].concat(...ne.children).filter(t=>t.matches(ue))},parents(ne,ue){const t=[];let N=ne.parentNode.closest(ue);for(;N;)t.push(N),N=N.parentNode.closest(ue);return t},prev(ne,ue){let t=ne.previousElementSibling;for(;t;){if(t.matches(ue))return[t];t=t.previousElementSibling}return[]},next(ne,ue){let t=ne.nextElementSibling;for(;t;){if(t.matches(ue))return[t];t=t.nextElementSibling}return[]},focusableChildren(ne){const ue=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(ue,ne).filter(t=>!Pf(t)&&vv(t))}},LM="swipe",pv=".bs.swipe",PM=`touchstart${pv}`,DM=`touchmove${pv}`,RM=`touchend${pv}`,IM=`pointerdown${pv}`,FM=`pointerup${pv}`,zM="touch",OM="pen",NM="pointer-event",BM=40,UM={endCallback:null,leftCallback:null,rightCallback:null},VM={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class dd extends up{constructor(ue,t){super(),this._element=ue,!(!ue||!dd.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return UM}static get DefaultType(){return VM}static get NAME(){return LM}dispose(){Sa.off(this._element,pv)}_start(ue){if(!this._supportPointerEvents){this._deltaX=ue.touches[0].clientX;return}this._eventIsPointerPenTouch(ue)&&(this._deltaX=ue.clientX)}_end(ue){this._eventIsPointerPenTouch(ue)&&(this._deltaX=ue.clientX-this._deltaX),this._handleSwipe(),$c(this._config.endCallback)}_move(ue){this._deltaX=ue.touches&&ue.touches.length>1?0:ue.touches[0].clientX-this._deltaX}_handleSwipe(){const ue=Math.abs(this._deltaX);if(ue<=BM)return;const t=ue/this._deltaX;this._deltaX=0,t&&$c(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Sa.on(this._element,IM,ue=>this._start(ue)),Sa.on(this._element,FM,ue=>this._end(ue)),this._element.classList.add(NM)):(Sa.on(this._element,PM,ue=>this._start(ue)),Sa.on(this._element,DM,ue=>this._move(ue)),Sa.on(this._element,RM,ue=>this._end(ue)))}_eventIsPointerPenTouch(ue){return this._supportPointerEvents&&(ue.pointerType===OM||ue.pointerType===zM)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const HM="carousel",GM="bs.carousel",If=`.${GM}`,bb=".data-api",YM="ArrowLeft",WM="ArrowRight",XM=500,Hv="next",Hh="prev",Wh="left",ad="right",jM=`slide${If}`,L0=`slid${If}`,ZM=`keydown${If}`,KM=`mouseenter${If}`,$M=`mouseleave${If}`,JM=`dragstart${If}`,QM=`load${If}${bb}`,qM=`click${If}${bb}`,_b="carousel",Zp="active",eE="slide",tE="carousel-item-end",rE="carousel-item-start",nE="carousel-item-next",aE="carousel-item-prev",wb=".active",Tb=".carousel-item",iE=wb+Tb,oE=".carousel-item img",sE=".carousel-indicators",lE="[data-bs-slide], [data-bs-slide-to]",uE='[data-bs-ride="carousel"]',cE={[YM]:ad,[WM]:Wh},fE={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},hE={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class cp extends Mc{constructor(ue,t){super(ue,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Xi.findOne(sE,this._element),this._addEventListeners(),this._config.ride===_b&&this.cycle()}static get Default(){return fE}static get DefaultType(){return hE}static get NAME(){return HM}next(){this._slide(Hv)}nextWhenVisible(){!document.hidden&&vv(this._element)&&this.next()}prev(){this._slide(Hh)}pause(){this._isSliding&&ub(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){Sa.one(this._element,L0,()=>this.cycle());return}this.cycle()}}to(ue){const t=this._getItems();if(ue>t.length-1||ue<0)return;if(this._isSliding){Sa.one(this._element,L0,()=>this.to(ue));return}const N=this._getItemIndex(this._getActive());if(N===ue)return;const V=ue>N?Hv:Hh;this._slide(V,t[ue])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(ue){return ue.defaultInterval=ue.interval,ue}_addEventListeners(){this._config.keyboard&&Sa.on(this._element,ZM,ue=>this._keydown(ue)),this._config.pause==="hover"&&(Sa.on(this._element,KM,()=>this.pause()),Sa.on(this._element,$M,()=>this._maybeEnableCycle())),this._config.touch&&dd.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const N of Xi.find(oE,this._element))Sa.on(N,JM,V=>V.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(Wh)),rightCallback:()=>this._slide(this._directionToOrder(ad)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),XM+this._config.interval))}};this._swipeHelper=new dd(this._element,t)}_keydown(ue){if(/input|textarea/i.test(ue.target.tagName))return;const t=cE[ue.key];t&&(ue.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(ue){return this._getItems().indexOf(ue)}_setActiveIndicatorElement(ue){if(!this._indicatorsElement)return;const t=Xi.findOne(wb,this._indicatorsElement);t.classList.remove(Zp),t.removeAttribute("aria-current");const N=Xi.findOne(`[data-bs-slide-to="${ue}"]`,this._indicatorsElement);N&&(N.classList.add(Zp),N.setAttribute("aria-current","true"))}_updateInterval(){const ue=this._activeElement||this._getActive();if(!ue)return;const t=Number.parseInt(ue.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(ue,t=null){if(this._isSliding)return;const N=this._getActive(),V=ue===Hv,m=t||Yg(this._getItems(),N,V,this._config.wrap);if(m===N)return;const u=this._getItemIndex(m),A=r=>Sa.trigger(this._element,r,{relatedTarget:m,direction:this._orderToDirection(ue),from:this._getItemIndex(N),to:u});if(A(jM).defaultPrevented||!N||!m)return;const e=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(u),this._activeElement=m;const a=V?rE:tE,i=V?nE:aE;m.classList.add(i),lp(m),N.classList.add(a),m.classList.add(a);const n=()=>{m.classList.remove(a,i),m.classList.add(Zp),N.classList.remove(Zp,i,a),this._isSliding=!1,A(L0)};this._queueCallback(n,N,this._isAnimated()),e&&this.cycle()}_isAnimated(){return this._element.classList.contains(eE)}_getActive(){return Xi.findOne(iE,this._element)}_getItems(){return Xi.find(Tb,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(ue){return fc()?ue===Wh?Hh:Hv:ue===Wh?Hv:Hh}_orderToDirection(ue){return fc()?ue===Hh?Wh:ad:ue===Hh?ad:Wh}static jQueryInterface(ue){return this.each(function(){const t=cp.getOrCreateInstance(this,ue);if(typeof ue=="number"){t.to(ue);return}if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}Sa.on(document,qM,lE,function(ne){const ue=Jc(this);if(!ue||!ue.classList.contains(_b))return;ne.preventDefault();const t=cp.getOrCreateInstance(ue),N=this.getAttribute("data-bs-slide-to");if(N){t.to(N),t._maybeEnableCycle();return}if(qc.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});Sa.on(window,QM,()=>{const ne=Xi.find(uE);for(const ue of ne)cp.getOrCreateInstance(ue)});vc(cp);const vE="collapse",pE="bs.collapse",fp=`.${pE}`,dE=".data-api",gE=`show${fp}`,mE=`shown${fp}`,yE=`hide${fp}`,xE=`hidden${fp}`,bE=`click${fp}${dE}`,P0="show",Zh="collapse",Kp="collapsing",_E="collapsed",wE=`:scope .${Zh} .${Zh}`,TE="collapse-horizontal",AE="width",ME="height",EE=".collapse.show, .collapse.collapsing",og='[data-bs-toggle="collapse"]',SE={parent:null,toggle:!0},kE={parent:"(null|element)",toggle:"boolean"};class ip extends Mc{constructor(ue,t){super(ue,t),this._isTransitioning=!1,this._triggerArray=[];const N=Xi.find(og);for(const V of N){const m=lb(V),u=Xi.find(m).filter(A=>A===this._element);m!==null&&u.length&&this._triggerArray.push(V)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return SE}static get DefaultType(){return kE}static get NAME(){return vE}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let ue=[];if(this._config.parent&&(ue=this._getFirstLevelChildren(EE).filter(A=>A!==this._element).map(A=>ip.getOrCreateInstance(A,{toggle:!1}))),ue.length&&ue[0]._isTransitioning||Sa.trigger(this._element,gE).defaultPrevented)return;for(const A of ue)A.hide();const N=this._getDimension();this._element.classList.remove(Zh),this._element.classList.add(Kp),this._element.style[N]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const V=()=>{this._isTransitioning=!1,this._element.classList.remove(Kp),this._element.classList.add(Zh,P0),this._element.style[N]="",Sa.trigger(this._element,mE)},u=`scroll${N[0].toUpperCase()+N.slice(1)}`;this._queueCallback(V,this._element,!0),this._element.style[N]=`${this._element[u]}px`}hide(){if(this._isTransitioning||!this._isShown()||Sa.trigger(this._element,yE).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,lp(this._element),this._element.classList.add(Kp),this._element.classList.remove(Zh,P0);for(const V of this._triggerArray){const m=Jc(V);m&&!this._isShown(m)&&this._addAriaAndCollapsedClass([V],!1)}this._isTransitioning=!0;const N=()=>{this._isTransitioning=!1,this._element.classList.remove(Kp),this._element.classList.add(Zh),Sa.trigger(this._element,xE)};this._element.style[t]="",this._queueCallback(N,this._element,!0)}_isShown(ue=this._element){return ue.classList.contains(P0)}_configAfterMerge(ue){return ue.toggle=Boolean(ue.toggle),ue.parent=Lf(ue.parent),ue}_getDimension(){return this._element.classList.contains(TE)?AE:ME}_initializeChildren(){if(!this._config.parent)return;const ue=this._getFirstLevelChildren(og);for(const t of ue){const N=Jc(t);N&&this._addAriaAndCollapsedClass([t],this._isShown(N))}}_getFirstLevelChildren(ue){const t=Xi.find(wE,this._config.parent);return Xi.find(ue,this._config.parent).filter(N=>!t.includes(N))}_addAriaAndCollapsedClass(ue,t){if(!!ue.length)for(const N of ue)N.classList.toggle(_E,!t),N.setAttribute("aria-expanded",t)}static jQueryInterface(ue){const t={};return typeof ue=="string"&&/show|hide/.test(ue)&&(t.toggle=!1),this.each(function(){const N=ip.getOrCreateInstance(this,t);if(typeof ue=="string"){if(typeof N[ue]>"u")throw new TypeError(`No method named "${ue}"`);N[ue]()}})}}Sa.on(document,bE,og,function(ne){(ne.target.tagName==="A"||ne.delegateTarget&&ne.delegateTarget.tagName==="A")&&ne.preventDefault();const ue=lb(this),t=Xi.find(ue);for(const N of t)ip.getOrCreateInstance(N,{toggle:!1}).toggle()});vc(ip);const a1="dropdown",CE="bs.dropdown",fh=`.${CE}`,Xg=".data-api",LE="Escape",i1="Tab",PE="ArrowUp",o1="ArrowDown",DE=2,RE=`hide${fh}`,IE=`hidden${fh}`,FE=`show${fh}`,zE=`shown${fh}`,Ab=`click${fh}${Xg}`,Mb=`keydown${fh}${Xg}`,OE=`keyup${fh}${Xg}`,Xh="show",NE="dropup",BE="dropend",UE="dropstart",VE="dropup-center",HE="dropdown-center",nh='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',GE=`${nh}.${Xh}`,id=".dropdown-menu",YE=".navbar",WE=".navbar-nav",XE=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",jE=fc()?"top-end":"top-start",ZE=fc()?"top-start":"top-end",KE=fc()?"bottom-end":"bottom-start",$E=fc()?"bottom-start":"bottom-end",JE=fc()?"left-start":"right-start",QE=fc()?"right-start":"left-start",qE="top",eS="bottom",tS={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},rS={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Uc extends Mc{constructor(ue,t){super(ue,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Xi.next(this._element,id)[0]||Xi.prev(this._element,id)[0]||Xi.findOne(id,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return tS}static get DefaultType(){return rS}static get NAME(){return a1}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Pf(this._element)||this._isShown())return;const ue={relatedTarget:this._element};if(!Sa.trigger(this._element,FE,ue).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(WE))for(const N of[].concat(...document.body.children))Sa.on(N,"mouseover",pd);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Xh),this._element.classList.add(Xh),Sa.trigger(this._element,zE,ue)}}hide(){if(Pf(this._element)||!this._isShown())return;const ue={relatedTarget:this._element};this._completeHide(ue)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(ue){if(!Sa.trigger(this._element,RE,ue).defaultPrevented){if("ontouchstart"in document.documentElement)for(const N of[].concat(...document.body.children))Sa.off(N,"mouseover",pd);this._popper&&this._popper.destroy(),this._menu.classList.remove(Xh),this._element.classList.remove(Xh),this._element.setAttribute("aria-expanded","false"),qc.removeDataAttribute(this._menu,"popper"),Sa.trigger(this._element,IE,ue)}}_getConfig(ue){if(ue=super._getConfig(ue),typeof ue.reference=="object"&&!Qc(ue.reference)&&typeof ue.reference.getBoundingClientRect!="function")throw new TypeError(`${a1.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return ue}_createPopper(){if(typeof Gg>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let ue=this._element;this._config.reference==="parent"?ue=this._parent:Qc(this._config.reference)?ue=Lf(this._config.reference):typeof this._config.reference=="object"&&(ue=this._config.reference);const t=this._getPopperConfig();this._popper=Hg(ue,this._menu,t)}_isShown(){return this._menu.classList.contains(Xh)}_getPlacement(){const ue=this._parent;if(ue.classList.contains(BE))return JE;if(ue.classList.contains(UE))return QE;if(ue.classList.contains(VE))return qE;if(ue.classList.contains(HE))return eS;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return ue.classList.contains(NE)?t?ZE:jE:t?$E:KE}_detectNavbar(){return this._element.closest(YE)!==null}_getOffset(){const{offset:ue}=this._config;return typeof ue=="string"?ue.split(",").map(t=>Number.parseInt(t,10)):typeof ue=="function"?t=>ue(t,this._element):ue}_getPopperConfig(){const ue={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(qc.setDataAttribute(this._menu,"popper","static"),ue.modifiers=[{name:"applyStyles",enabled:!1}]),{...ue,...typeof this._config.popperConfig=="function"?this._config.popperConfig(ue):this._config.popperConfig}}_selectMenuItem({key:ue,target:t}){const N=Xi.find(XE,this._menu).filter(V=>vv(V));!N.length||Yg(N,t,ue===o1,!N.includes(t)).focus()}static jQueryInterface(ue){return this.each(function(){const t=Uc.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof t[ue]>"u")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}static clearMenus(ue){if(ue.button===DE||ue.type==="keyup"&&ue.key!==i1)return;const t=Xi.find(GE);for(const N of t){const V=Uc.getInstance(N);if(!V||V._config.autoClose===!1)continue;const m=ue.composedPath(),u=m.includes(V._menu);if(m.includes(V._element)||V._config.autoClose==="inside"&&!u||V._config.autoClose==="outside"&&u||V._menu.contains(ue.target)&&(ue.type==="keyup"&&ue.key===i1||/input|select|option|textarea|form/i.test(ue.target.tagName)))continue;const A={relatedTarget:V._element};ue.type==="click"&&(A.clickEvent=ue),V._completeHide(A)}}static dataApiKeydownHandler(ue){const t=/input|textarea/i.test(ue.target.tagName),N=ue.key===LE,V=[PE,o1].includes(ue.key);if(!V&&!N||t&&!N)return;ue.preventDefault();const m=this.matches(nh)?this:Xi.prev(this,nh)[0]||Xi.next(this,nh)[0]||Xi.findOne(nh,ue.delegateTarget.parentNode),u=Uc.getOrCreateInstance(m);if(V){ue.stopPropagation(),u.show(),u._selectMenuItem(ue);return}u._isShown()&&(ue.stopPropagation(),u.hide(),m.focus())}}Sa.on(document,Mb,nh,Uc.dataApiKeydownHandler);Sa.on(document,Mb,id,Uc.dataApiKeydownHandler);Sa.on(document,Ab,Uc.clearMenus);Sa.on(document,OE,Uc.clearMenus);Sa.on(document,Ab,nh,function(ne){ne.preventDefault(),Uc.getOrCreateInstance(this).toggle()});vc(Uc);const s1=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",l1=".sticky-top",$p="padding-right",u1="margin-right";class sg{constructor(){this._element=document.body}getWidth(){const ue=document.documentElement.clientWidth;return Math.abs(window.innerWidth-ue)}hide(){const ue=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,$p,t=>t+ue),this._setElementAttributes(s1,$p,t=>t+ue),this._setElementAttributes(l1,u1,t=>t-ue)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,$p),this._resetElementAttributes(s1,$p),this._resetElementAttributes(l1,u1)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(ue,t,N){const V=this.getWidth(),m=u=>{if(u!==this._element&&window.innerWidth>u.clientWidth+V)return;this._saveInitialAttribute(u,t);const A=window.getComputedStyle(u).getPropertyValue(t);u.style.setProperty(t,`${N(Number.parseFloat(A))}px`)};this._applyManipulationCallback(ue,m)}_saveInitialAttribute(ue,t){const N=ue.style.getPropertyValue(t);N&&qc.setDataAttribute(ue,t,N)}_resetElementAttributes(ue,t){const N=V=>{const m=qc.getDataAttribute(V,t);if(m===null){V.style.removeProperty(t);return}qc.removeDataAttribute(V,t),V.style.setProperty(t,m)};this._applyManipulationCallback(ue,N)}_applyManipulationCallback(ue,t){if(Qc(ue)){t(ue);return}for(const N of Xi.find(ue,this._element))t(N)}}const Eb="backdrop",nS="fade",c1="show",f1=`mousedown.bs.${Eb}`,aS={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},iS={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Sb extends up{constructor(ue){super(),this._config=this._getConfig(ue),this._isAppended=!1,this._element=null}static get Default(){return aS}static get DefaultType(){return iS}static get NAME(){return Eb}show(ue){if(!this._config.isVisible){$c(ue);return}this._append();const t=this._getElement();this._config.isAnimated&&lp(t),t.classList.add(c1),this._emulateAnimation(()=>{$c(ue)})}hide(ue){if(!this._config.isVisible){$c(ue);return}this._getElement().classList.remove(c1),this._emulateAnimation(()=>{this.dispose(),$c(ue)})}dispose(){!this._isAppended||(Sa.off(this._element,f1),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const ue=document.createElement("div");ue.className=this._config.className,this._config.isAnimated&&ue.classList.add(nS),this._element=ue}return this._element}_configAfterMerge(ue){return ue.rootElement=Lf(ue.rootElement),ue}_append(){if(this._isAppended)return;const ue=this._getElement();this._config.rootElement.append(ue),Sa.on(ue,f1,()=>{$c(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(ue){hb(ue,this._getElement(),this._config.isAnimated)}}const oS="focustrap",sS="bs.focustrap",gd=`.${sS}`,lS=`focusin${gd}`,uS=`keydown.tab${gd}`,cS="Tab",fS="forward",h1="backward",hS={autofocus:!0,trapElement:null},vS={autofocus:"boolean",trapElement:"element"};class kb extends up{constructor(ue){super(),this._config=this._getConfig(ue),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return hS}static get DefaultType(){return vS}static get NAME(){return oS}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Sa.off(document,gd),Sa.on(document,lS,ue=>this._handleFocusin(ue)),Sa.on(document,uS,ue=>this._handleKeydown(ue)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,Sa.off(document,gd))}_handleFocusin(ue){const{trapElement:t}=this._config;if(ue.target===document||ue.target===t||t.contains(ue.target))return;const N=Xi.focusableChildren(t);N.length===0?t.focus():this._lastTabNavDirection===h1?N[N.length-1].focus():N[0].focus()}_handleKeydown(ue){ue.key===cS&&(this._lastTabNavDirection=ue.shiftKey?h1:fS)}}const pS="modal",dS="bs.modal",Ec=`.${dS}`,gS=".data-api",mS="Escape",yS=`hide${Ec}`,xS=`hidePrevented${Ec}`,Cb=`hidden${Ec}`,Lb=`show${Ec}`,bS=`shown${Ec}`,_S=`resize${Ec}`,wS=`click.dismiss${Ec}`,TS=`mousedown.dismiss${Ec}`,AS=`keydown.dismiss${Ec}`,MS=`click${Ec}${gS}`,v1="modal-open",ES="fade",p1="show",D0="modal-static",SS=".modal.show",kS=".modal-dialog",CS=".modal-body",LS='[data-bs-toggle="modal"]',PS={backdrop:!0,focus:!0,keyboard:!0},DS={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class lv extends Mc{constructor(ue,t){super(ue,t),this._dialog=Xi.findOne(kS,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new sg,this._addEventListeners()}static get Default(){return PS}static get DefaultType(){return DS}static get NAME(){return pS}toggle(ue){return this._isShown?this.hide():this.show(ue)}show(ue){this._isShown||this._isTransitioning||Sa.trigger(this._element,Lb,{relatedTarget:ue}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(v1),this._adjustDialog(),this._backdrop.show(()=>this._showElement(ue)))}hide(){!this._isShown||this._isTransitioning||Sa.trigger(this._element,yS).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(p1),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const ue of[window,this._dialog])Sa.off(ue,Ec);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Sb({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new kb({trapElement:this._element})}_showElement(ue){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Xi.findOne(CS,this._dialog);t&&(t.scrollTop=0),lp(this._element),this._element.classList.add(p1);const N=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Sa.trigger(this._element,bS,{relatedTarget:ue})};this._queueCallback(N,this._dialog,this._isAnimated())}_addEventListeners(){Sa.on(this._element,AS,ue=>{if(ue.key===mS){if(this._config.keyboard){ue.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),Sa.on(window,_S,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Sa.on(this._element,TS,ue=>{Sa.one(this._element,wS,t=>{if(!(this._element!==ue.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(v1),this._resetAdjustments(),this._scrollBar.reset(),Sa.trigger(this._element,Cb)})}_isAnimated(){return this._element.classList.contains(ES)}_triggerBackdropTransition(){if(Sa.trigger(this._element,xS).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,N=this._element.style.overflowY;N==="hidden"||this._element.classList.contains(D0)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(D0),this._queueCallback(()=>{this._element.classList.remove(D0),this._queueCallback(()=>{this._element.style.overflowY=N},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const ue=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),N=t>0;if(N&&!ue){const V=fc()?"paddingLeft":"paddingRight";this._element.style[V]=`${t}px`}if(!N&&ue){const V=fc()?"paddingRight":"paddingLeft";this._element.style[V]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(ue,t){return this.each(function(){const N=lv.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof N[ue]>"u")throw new TypeError(`No method named "${ue}"`);N[ue](t)}})}}Sa.on(document,MS,LS,function(ne){const ue=Jc(this);["A","AREA"].includes(this.tagName)&&ne.preventDefault(),Sa.one(ue,Lb,V=>{V.defaultPrevented||Sa.one(ue,Cb,()=>{vv(this)&&this.focus()})});const t=Xi.findOne(SS);t&&lv.getInstance(t).hide(),lv.getOrCreateInstance(ue).toggle(this)});Rd(lv);vc(lv);const RS="offcanvas",IS="bs.offcanvas",nf=`.${IS}`,Pb=".data-api",FS=`load${nf}${Pb}`,zS="Escape",d1="show",g1="showing",m1="hiding",OS="offcanvas-backdrop",Db=".offcanvas.show",NS=`show${nf}`,BS=`shown${nf}`,US=`hide${nf}`,y1=`hidePrevented${nf}`,Rb=`hidden${nf}`,VS=`resize${nf}`,HS=`click${nf}${Pb}`,GS=`keydown.dismiss${nf}`,YS='[data-bs-toggle="offcanvas"]',WS={backdrop:!0,keyboard:!0,scroll:!1},XS={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Df extends Mc{constructor(ue,t){super(ue,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return WS}static get DefaultType(){return XS}static get NAME(){return RS}toggle(ue){return this._isShown?this.hide():this.show(ue)}show(ue){if(this._isShown||Sa.trigger(this._element,NS,{relatedTarget:ue}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new sg().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(g1);const N=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(d1),this._element.classList.remove(g1),Sa.trigger(this._element,BS,{relatedTarget:ue})};this._queueCallback(N,this._element,!0)}hide(){if(!this._isShown||Sa.trigger(this._element,US).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(m1),this._backdrop.hide();const t=()=>{this._element.classList.remove(d1,m1),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new sg().reset(),Sa.trigger(this._element,Rb)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const ue=()=>{if(this._config.backdrop==="static"){Sa.trigger(this._element,y1);return}this.hide()},t=Boolean(this._config.backdrop);return new Sb({className:OS,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?ue:null})}_initializeFocusTrap(){return new kb({trapElement:this._element})}_addEventListeners(){Sa.on(this._element,GS,ue=>{if(ue.key===zS){if(!this._config.keyboard){Sa.trigger(this._element,y1);return}this.hide()}})}static jQueryInterface(ue){return this.each(function(){const t=Df.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue](this)}})}}Sa.on(document,HS,YS,function(ne){const ue=Jc(this);if(["A","AREA"].includes(this.tagName)&&ne.preventDefault(),Pf(this))return;Sa.one(ue,Rb,()=>{vv(this)&&this.focus()});const t=Xi.findOne(Db);t&&t!==ue&&Df.getInstance(t).hide(),Df.getOrCreateInstance(ue).toggle(this)});Sa.on(window,FS,()=>{for(const ne of Xi.find(Db))Df.getOrCreateInstance(ne).show()});Sa.on(window,VS,()=>{for(const ne of Xi.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(ne).position!=="fixed"&&Df.getOrCreateInstance(ne).hide()});Rd(Df);vc(Df);const jS=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ZS=/^aria-[\w-]*$/i,KS=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,$S=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,JS=(ne,ue)=>{const t=ne.nodeName.toLowerCase();return ue.includes(t)?jS.has(t)?Boolean(KS.test(ne.nodeValue)||$S.test(ne.nodeValue)):!0:ue.filter(N=>N instanceof RegExp).some(N=>N.test(t))},Ib={"*":["class","dir","id","lang","role",ZS],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function QS(ne,ue,t){if(!ne.length)return ne;if(t&&typeof t=="function")return t(ne);const V=new window.DOMParser().parseFromString(ne,"text/html"),m=[].concat(...V.body.querySelectorAll("*"));for(const u of m){const A=u.nodeName.toLowerCase();if(!Object.keys(ue).includes(A)){u.remove();continue}const T=[].concat(...u.attributes),e=[].concat(ue["*"]||[],ue[A]||[]);for(const a of T)JS(a,e)||u.removeAttribute(a.nodeName)}return V.body.innerHTML}const qS="TemplateFactory",e4={allowList:Ib,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},t4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},r4={entry:"(string|element|function|null)",selector:"(string|element)"};class n4 extends up{constructor(ue){super(),this._config=this._getConfig(ue)}static get Default(){return e4}static get DefaultType(){return t4}static get NAME(){return qS}getContent(){return Object.values(this._config.content).map(ue=>this._resolvePossibleFunction(ue)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(ue){return this._checkContent(ue),this._config.content={...this._config.content,...ue},this}toHtml(){const ue=document.createElement("div");ue.innerHTML=this._maybeSanitize(this._config.template);for(const[V,m]of Object.entries(this._config.content))this._setContent(ue,m,V);const t=ue.children[0],N=this._resolvePossibleFunction(this._config.extraClass);return N&&t.classList.add(...N.split(" ")),t}_typeCheckConfig(ue){super._typeCheckConfig(ue),this._checkContent(ue.content)}_checkContent(ue){for(const[t,N]of Object.entries(ue))super._typeCheckConfig({selector:t,entry:N},r4)}_setContent(ue,t,N){const V=Xi.findOne(N,ue);if(!!V){if(t=this._resolvePossibleFunction(t),!t){V.remove();return}if(Qc(t)){this._putElementInTemplate(Lf(t),V);return}if(this._config.html){V.innerHTML=this._maybeSanitize(t);return}V.textContent=t}}_maybeSanitize(ue){return this._config.sanitize?QS(ue,this._config.allowList,this._config.sanitizeFn):ue}_resolvePossibleFunction(ue){return typeof ue=="function"?ue(this):ue}_putElementInTemplate(ue,t){if(this._config.html){t.innerHTML="",t.append(ue);return}t.textContent=ue.textContent}}const a4="tooltip",i4=new Set(["sanitize","allowList","sanitizeFn"]),R0="fade",o4="modal",Jp="show",s4=".tooltip-inner",x1=`.${o4}`,b1="hide.bs.modal",Gv="hover",I0="focus",l4="click",u4="manual",c4="hide",f4="hidden",h4="show",v4="shown",p4="inserted",d4="click",g4="focusin",m4="focusout",y4="mouseenter",x4="mouseleave",b4={AUTO:"auto",TOP:"top",RIGHT:fc()?"left":"right",BOTTOM:"bottom",LEFT:fc()?"right":"left"},_4={allowList:Ib,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},w4={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class dv extends Mc{constructor(ue,t){if(typeof Gg>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(ue,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return _4}static get DefaultType(){return w4}static get NAME(){return a4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),Sa.off(this._element.closest(x1),b1,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const ue=Sa.trigger(this._element,this.constructor.eventName(h4)),N=(cb(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(ue.defaultPrevented||!N)return;this._disposePopper();const V=this._getTipElement();this._element.setAttribute("aria-describedby",V.getAttribute("id"));const{container:m}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(m.append(V),Sa.trigger(this._element,this.constructor.eventName(p4))),this._popper=this._createPopper(V),V.classList.add(Jp),"ontouchstart"in document.documentElement)for(const A of[].concat(...document.body.children))Sa.on(A,"mouseover",pd);const u=()=>{Sa.trigger(this._element,this.constructor.eventName(v4)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(u,this.tip,this._isAnimated())}hide(){if(!this._isShown()||Sa.trigger(this._element,this.constructor.eventName(c4)).defaultPrevented)return;if(this._getTipElement().classList.remove(Jp),"ontouchstart"in document.documentElement)for(const V of[].concat(...document.body.children))Sa.off(V,"mouseover",pd);this._activeTrigger[l4]=!1,this._activeTrigger[I0]=!1,this._activeTrigger[Gv]=!1,this._isHovered=null;const N=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Sa.trigger(this._element,this.constructor.eventName(f4)))};this._queueCallback(N,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(ue){const t=this._getTemplateFactory(ue).toHtml();if(!t)return null;t.classList.remove(R0,Jp),t.classList.add(`bs-${this.constructor.NAME}-auto`);const N=sM(this.constructor.NAME).toString();return t.setAttribute("id",N),this._isAnimated()&&t.classList.add(R0),t}setContent(ue){this._newContent=ue,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(ue){return this._templateFactory?this._templateFactory.changeContent(ue):this._templateFactory=new n4({...this._config,content:ue,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[s4]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(ue){return this.constructor.getOrCreateInstance(ue.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(R0)}_isShown(){return this.tip&&this.tip.classList.contains(Jp)}_createPopper(ue){const t=typeof this._config.placement=="function"?this._config.placement.call(this,ue,this._element):this._config.placement,N=b4[t.toUpperCase()];return Hg(this._element,ue,this._getPopperConfig(N))}_getOffset(){const{offset:ue}=this._config;return typeof ue=="string"?ue.split(",").map(t=>Number.parseInt(t,10)):typeof ue=="function"?t=>ue(t,this._element):ue}_resolvePossibleFunction(ue){return typeof ue=="function"?ue.call(this._element):ue}_getPopperConfig(ue){const t={placement:ue,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:N=>{this._getTipElement().setAttribute("data-popper-placement",N.state.placement)}}]};return{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_setListeners(){const ue=this._config.trigger.split(" ");for(const t of ue)if(t==="click")Sa.on(this._element,this.constructor.eventName(d4),this._config.selector,N=>{this._initializeOnDelegatedTarget(N).toggle()});else if(t!==u4){const N=t===Gv?this.constructor.eventName(y4):this.constructor.eventName(g4),V=t===Gv?this.constructor.eventName(x4):this.constructor.eventName(m4);Sa.on(this._element,N,this._config.selector,m=>{const u=this._initializeOnDelegatedTarget(m);u._activeTrigger[m.type==="focusin"?I0:Gv]=!0,u._enter()}),Sa.on(this._element,V,this._config.selector,m=>{const u=this._initializeOnDelegatedTarget(m);u._activeTrigger[m.type==="focusout"?I0:Gv]=u._element.contains(m.relatedTarget),u._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Sa.on(this._element.closest(x1),b1,this._hideModalHandler)}_fixTitle(){const ue=this._element.getAttribute("title");!ue||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",ue),this._element.setAttribute("data-bs-original-title",ue),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(ue,t){clearTimeout(this._timeout),this._timeout=setTimeout(ue,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(ue){const t=qc.getDataAttributes(this._element);for(const N of Object.keys(t))i4.has(N)&&delete t[N];return ue={...t,...typeof ue=="object"&&ue?ue:{}},ue=this._mergeConfigObj(ue),ue=this._configAfterMerge(ue),this._typeCheckConfig(ue),ue}_configAfterMerge(ue){return ue.container=ue.container===!1?document.body:Lf(ue.container),typeof ue.delay=="number"&&(ue.delay={show:ue.delay,hide:ue.delay}),typeof ue.title=="number"&&(ue.title=ue.title.toString()),typeof ue.content=="number"&&(ue.content=ue.content.toString()),ue}_getDelegateConfig(){const ue={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(ue[t]=this._config[t]);return ue.selector=!1,ue.trigger="manual",ue}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(ue){return this.each(function(){const t=dv.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof t[ue]>"u")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}vc(dv);const T4="popover",A4=".popover-header",M4=".popover-body",E4={...dv.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},S4={...dv.DefaultType,content:"(null|string|element|function)"};class jg extends dv{static get Default(){return E4}static get DefaultType(){return S4}static get NAME(){return T4}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[A4]:this._getTitle(),[M4]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(ue){return this.each(function(){const t=jg.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof t[ue]>"u")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}vc(jg);const k4="scrollspy",C4="bs.scrollspy",Zg=`.${C4}`,L4=".data-api",P4=`activate${Zg}`,_1=`click${Zg}`,D4=`load${Zg}${L4}`,R4="dropdown-item",Gh="active",I4='[data-bs-spy="scroll"]',F0="[href]",F4=".nav, .list-group",w1=".nav-link",z4=".nav-item",O4=".list-group-item",N4=`${w1}, ${z4} > ${w1}, ${O4}`,B4=".dropdown",U4=".dropdown-toggle",V4={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},H4={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class zd extends Mc{constructor(ue,t){super(ue,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return V4}static get DefaultType(){return H4}static get NAME(){return k4}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const ue of this._observableSections.values())this._observer.observe(ue)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(ue){return ue.target=Lf(ue.target)||document.body,ue.rootMargin=ue.offset?`${ue.offset}px 0px -30%`:ue.rootMargin,typeof ue.threshold=="string"&&(ue.threshold=ue.threshold.split(",").map(t=>Number.parseFloat(t))),ue}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(Sa.off(this._config.target,_1),Sa.on(this._config.target,_1,F0,ue=>{const t=this._observableSections.get(ue.target.hash);if(t){ue.preventDefault();const N=this._rootElement||window,V=t.offsetTop-this._element.offsetTop;if(N.scrollTo){N.scrollTo({top:V,behavior:"smooth"});return}N.scrollTop=V}}))}_getNewObserver(){const ue={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),ue)}_observerCallback(ue){const t=u=>this._targetLinks.get(`#${u.target.id}`),N=u=>{this._previousScrollData.visibleEntryTop=u.target.offsetTop,this._process(t(u))},V=(this._rootElement||document.documentElement).scrollTop,m=V>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=V;for(const u of ue){if(!u.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(u));continue}const A=u.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(m&&A){if(N(u),!V)return;continue}!m&&!A&&N(u)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const ue=Xi.find(F0,this._config.target);for(const t of ue){if(!t.hash||Pf(t))continue;const N=Xi.findOne(t.hash,this._element);vv(N)&&(this._targetLinks.set(t.hash,t),this._observableSections.set(t.hash,N))}}_process(ue){this._activeTarget!==ue&&(this._clearActiveClass(this._config.target),this._activeTarget=ue,ue.classList.add(Gh),this._activateParents(ue),Sa.trigger(this._element,P4,{relatedTarget:ue}))}_activateParents(ue){if(ue.classList.contains(R4)){Xi.findOne(U4,ue.closest(B4)).classList.add(Gh);return}for(const t of Xi.parents(ue,F4))for(const N of Xi.prev(t,N4))N.classList.add(Gh)}_clearActiveClass(ue){ue.classList.remove(Gh);const t=Xi.find(`${F0}.${Gh}`,ue);for(const N of t)N.classList.remove(Gh)}static jQueryInterface(ue){return this.each(function(){const t=zd.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}Sa.on(window,D4,()=>{for(const ne of Xi.find(I4))zd.getOrCreateInstance(ne)});vc(zd);const G4="tab",Y4="bs.tab",hh=`.${Y4}`,W4=`hide${hh}`,X4=`hidden${hh}`,j4=`show${hh}`,Z4=`shown${hh}`,K4=`click${hh}`,$4=`keydown${hh}`,J4=`load${hh}`,Q4="ArrowLeft",T1="ArrowRight",q4="ArrowUp",A1="ArrowDown",ah="active",M1="fade",z0="show",ek="dropdown",tk=".dropdown-toggle",rk=".dropdown-menu",O0=":not(.dropdown-toggle)",nk='.list-group, .nav, [role="tablist"]',ak=".nav-item, .list-group-item",ik=`.nav-link${O0}, .list-group-item${O0}, [role="tab"]${O0}`,Fb='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',N0=`${ik}, ${Fb}`,ok=`.${ah}[data-bs-toggle="tab"], .${ah}[data-bs-toggle="pill"], .${ah}[data-bs-toggle="list"]`;class uv extends Mc{constructor(ue){super(ue),this._parent=this._element.closest(nk),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Sa.on(this._element,$4,t=>this._keydown(t)))}static get NAME(){return G4}show(){const ue=this._element;if(this._elemIsActive(ue))return;const t=this._getActiveElem(),N=t?Sa.trigger(t,W4,{relatedTarget:ue}):null;Sa.trigger(ue,j4,{relatedTarget:t}).defaultPrevented||N&&N.defaultPrevented||(this._deactivate(t,ue),this._activate(ue,t))}_activate(ue,t){if(!ue)return;ue.classList.add(ah),this._activate(Jc(ue));const N=()=>{if(ue.getAttribute("role")!=="tab"){ue.classList.add(z0);return}ue.removeAttribute("tabindex"),ue.setAttribute("aria-selected",!0),this._toggleDropDown(ue,!0),Sa.trigger(ue,Z4,{relatedTarget:t})};this._queueCallback(N,ue,ue.classList.contains(M1))}_deactivate(ue,t){if(!ue)return;ue.classList.remove(ah),ue.blur(),this._deactivate(Jc(ue));const N=()=>{if(ue.getAttribute("role")!=="tab"){ue.classList.remove(z0);return}ue.setAttribute("aria-selected",!1),ue.setAttribute("tabindex","-1"),this._toggleDropDown(ue,!1),Sa.trigger(ue,X4,{relatedTarget:t})};this._queueCallback(N,ue,ue.classList.contains(M1))}_keydown(ue){if(![Q4,T1,q4,A1].includes(ue.key))return;ue.stopPropagation(),ue.preventDefault();const t=[T1,A1].includes(ue.key),N=Yg(this._getChildren().filter(V=>!Pf(V)),ue.target,t,!0);N&&(N.focus({preventScroll:!0}),uv.getOrCreateInstance(N).show())}_getChildren(){return Xi.find(N0,this._parent)}_getActiveElem(){return this._getChildren().find(ue=>this._elemIsActive(ue))||null}_setInitialAttributes(ue,t){this._setAttributeIfNotExists(ue,"role","tablist");for(const N of t)this._setInitialAttributesOnChild(N)}_setInitialAttributesOnChild(ue){ue=this._getInnerElement(ue);const t=this._elemIsActive(ue),N=this._getOuterElement(ue);ue.setAttribute("aria-selected",t),N!==ue&&this._setAttributeIfNotExists(N,"role","presentation"),t||ue.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(ue,"role","tab"),this._setInitialAttributesOnTargetPanel(ue)}_setInitialAttributesOnTargetPanel(ue){const t=Jc(ue);!t||(this._setAttributeIfNotExists(t,"role","tabpanel"),ue.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`#${ue.id}`))}_toggleDropDown(ue,t){const N=this._getOuterElement(ue);if(!N.classList.contains(ek))return;const V=(m,u)=>{const A=Xi.findOne(m,N);A&&A.classList.toggle(u,t)};V(tk,ah),V(rk,z0),N.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(ue,t,N){ue.hasAttribute(t)||ue.setAttribute(t,N)}_elemIsActive(ue){return ue.classList.contains(ah)}_getInnerElement(ue){return ue.matches(N0)?ue:Xi.findOne(N0,ue)}_getOuterElement(ue){return ue.closest(ak)||ue}static jQueryInterface(ue){return this.each(function(){const t=uv.getOrCreateInstance(this);if(typeof ue=="string"){if(t[ue]===void 0||ue.startsWith("_")||ue==="constructor")throw new TypeError(`No method named "${ue}"`);t[ue]()}})}}Sa.on(document,K4,Fb,function(ne){["A","AREA"].includes(this.tagName)&&ne.preventDefault(),!Pf(this)&&uv.getOrCreateInstance(this).show()});Sa.on(window,J4,()=>{for(const ne of Xi.find(ok))uv.getOrCreateInstance(ne)});vc(uv);const sk="toast",lk="bs.toast",Ff=`.${lk}`,uk=`mouseover${Ff}`,ck=`mouseout${Ff}`,fk=`focusin${Ff}`,hk=`focusout${Ff}`,vk=`hide${Ff}`,pk=`hidden${Ff}`,dk=`show${Ff}`,gk=`shown${Ff}`,mk="fade",E1="hide",Qp="show",qp="showing",yk={animation:"boolean",autohide:"boolean",delay:"number"},xk={animation:!0,autohide:!0,delay:5e3};class Od extends Mc{constructor(ue,t){super(ue,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return xk}static get DefaultType(){return yk}static get NAME(){return sk}show(){if(Sa.trigger(this._element,dk).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(mk);const t=()=>{this._element.classList.remove(qp),Sa.trigger(this._element,gk),this._maybeScheduleHide()};this._element.classList.remove(E1),lp(this._element),this._element.classList.add(Qp,qp),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||Sa.trigger(this._element,vk).defaultPrevented)return;const t=()=>{this._element.classList.add(E1),this._element.classList.remove(qp,Qp),Sa.trigger(this._element,pk)};this._element.classList.add(qp),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Qp),super.dispose()}isShown(){return this._element.classList.contains(Qp)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(ue,t){switch(ue.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const N=ue.relatedTarget;this._element===N||this._element.contains(N)||this._maybeScheduleHide()}_setListeners(){Sa.on(this._element,uk,ue=>this._onInteraction(ue,!0)),Sa.on(this._element,ck,ue=>this._onInteraction(ue,!1)),Sa.on(this._element,fk,ue=>this._onInteraction(ue,!0)),Sa.on(this._element,hk,ue=>this._onInteraction(ue,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(ue){return this.each(function(){const t=Od.getOrCreateInstance(this,ue);if(typeof ue=="string"){if(typeof t[ue]>"u")throw new TypeError(`No method named "${ue}"`);t[ue](this)}})}}Rd(Od);vc(Od);var bk={exports:{}};const _k=pA(Gg);/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(ne,ue){(function(t,N){ne.exports=N(_k)})(Vo,function(t){function N(Yr){if(Yr&&Yr.__esModule)return Yr;const et=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(Yr){for(const $t in Yr)if($t!=="default"){const Kr=Object.getOwnPropertyDescriptor(Yr,$t);Object.defineProperty(et,$t,Kr.get?Kr:{enumerable:!0,get:()=>Yr[$t]})}}return et.default=Yr,Object.freeze(et)}const V=N(t),m=1e6,u=1e3,A="transitionend",T=Yr=>Yr==null?`${Yr}`:Object.prototype.toString.call(Yr).match(/\s([a-z]+)/i)[1].toLowerCase(),e=Yr=>{do Yr+=Math.floor(Math.random()*m);while(document.getElementById(Yr));return Yr},a=Yr=>{let et=Yr.getAttribute("data-bs-target");if(!et||et==="#"){let $t=Yr.getAttribute("href");if(!$t||!$t.includes("#")&&!$t.startsWith("."))return null;$t.includes("#")&&!$t.startsWith("#")&&($t=`#${$t.split("#")[1]}`),et=$t&&$t!=="#"?$t.trim():null}return et},i=Yr=>{const et=a(Yr);return et&&document.querySelector(et)?et:null},n=Yr=>{const et=a(Yr);return et?document.querySelector(et):null},r=Yr=>{if(!Yr)return 0;let{transitionDuration:et,transitionDelay:$t}=window.getComputedStyle(Yr);const Kr=Number.parseFloat(et),Hn=Number.parseFloat($t);return!Kr&&!Hn?0:(et=et.split(",")[0],$t=$t.split(",")[0],(Number.parseFloat(et)+Number.parseFloat($t))*u)},v=Yr=>{Yr.dispatchEvent(new Event(A))},s=Yr=>!Yr||typeof Yr!="object"?!1:(typeof Yr.jquery<"u"&&(Yr=Yr[0]),typeof Yr.nodeType<"u"),o=Yr=>s(Yr)?Yr.jquery?Yr[0]:Yr:typeof Yr=="string"&&Yr.length>0?document.querySelector(Yr):null,b=Yr=>{if(!s(Yr)||Yr.getClientRects().length===0)return!1;const et=getComputedStyle(Yr).getPropertyValue("visibility")==="visible",$t=Yr.closest("details:not([open])");if(!$t)return et;if($t!==Yr){const Kr=Yr.closest("summary");if(Kr&&Kr.parentNode!==$t||Kr===null)return!1}return et},g=Yr=>!Yr||Yr.nodeType!==Node.ELEMENT_NODE||Yr.classList.contains("disabled")?!0:typeof Yr.disabled<"u"?Yr.disabled:Yr.hasAttribute("disabled")&&Yr.getAttribute("disabled")!=="false",d=Yr=>{if(!document.documentElement.attachShadow)return null;if(typeof Yr.getRootNode=="function"){const et=Yr.getRootNode();return et instanceof ShadowRoot?et:null}return Yr instanceof ShadowRoot?Yr:Yr.parentNode?d(Yr.parentNode):null},f=()=>{},y=Yr=>{Yr.offsetHeight},l=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,x=[],c=Yr=>{document.readyState==="loading"?(x.length||document.addEventListener("DOMContentLoaded",()=>{for(const et of x)et()}),x.push(Yr)):Yr()},M=()=>document.documentElement.dir==="rtl",w=Yr=>{c(()=>{const et=l();if(et){const $t=Yr.NAME,Kr=et.fn[$t];et.fn[$t]=Yr.jQueryInterface,et.fn[$t].Constructor=Yr,et.fn[$t].noConflict=()=>(et.fn[$t]=Kr,Yr.jQueryInterface)}})},p=Yr=>{typeof Yr=="function"&&Yr()},_=(Yr,et,$t=!0)=>{if(!$t){p(Yr);return}const Kr=5,Hn=r(et)+Kr;let ta=!1;const ea=({target:vi})=>{vi===et&&(ta=!0,et.removeEventListener(A,ea),p(Yr))};et.addEventListener(A,ea),setTimeout(()=>{ta||v(et)},Hn)},h=(Yr,et,$t,Kr)=>{const Hn=Yr.length;let ta=Yr.indexOf(et);return ta===-1?!$t&&Kr?Yr[Hn-1]:Yr[0]:(ta+=$t?1:-1,Kr&&(ta=(ta+Hn)%Hn),Yr[Math.max(0,Math.min(ta,Hn-1))])},L=/[^.]*(?=\..*)\.|.*/,E=/\..*/,S=/::\d+$/,P={};let F=1;const I={mouseenter:"mouseover",mouseleave:"mouseout"},D=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function R(Yr,et){return et&&`${et}::${F++}`||Yr.uidEvent||F++}function O(Yr){const et=R(Yr);return Yr.uidEvent=et,P[et]=P[et]||{},P[et]}function z(Yr,et){return function $t(Kr){return $(Kr,{delegateTarget:Yr}),$t.oneOff&&K.off(Yr,Kr.type,et),et.apply(Yr,[Kr])}}function G(Yr,et,$t){return function Kr(Hn){const ta=Yr.querySelectorAll(et);for(let{target:ea}=Hn;ea&&ea!==this;ea=ea.parentNode)for(const vi of ta)if(vi===ea)return $(Hn,{delegateTarget:ea}),Kr.oneOff&&K.off(Yr,Hn.type,et,$t),$t.apply(ea,[Hn])}}function Y(Yr,et,$t=null){return Object.values(Yr).find(Kr=>Kr.callable===et&&Kr.delegationSelector===$t)}function ee(Yr,et,$t){const Kr=typeof et=="string",Hn=Kr?$t:et||$t;let ta=he(Yr);return D.has(ta)||(ta=Yr),[Kr,Hn,ta]}function j(Yr,et,$t,Kr,Hn){if(typeof et!="string"||!Yr)return;let[ta,ea,vi]=ee(et,$t,Kr);et in I&&(ea=(Ue=>function(Be){if(!Be.relatedTarget||Be.relatedTarget!==Be.delegateTarget&&!Be.delegateTarget.contains(Be.relatedTarget))return Ue.call(this,Be)})(ea));const Di=O(Yr),$i=Di[vi]||(Di[vi]={}),Ri=Y($i,ea,ta?$t:null);if(Ri){Ri.oneOff=Ri.oneOff&&Hn;return}const ce=R(ea,et.replace(L,"")),Te=ta?G(Yr,$t,ea):z(Yr,ea);Te.delegationSelector=ta?$t:null,Te.callable=ea,Te.oneOff=Hn,Te.uidEvent=ce,$i[ce]=Te,Yr.addEventListener(vi,Te,ta)}function X(Yr,et,$t,Kr,Hn){const ta=Y(et[$t],Kr,Hn);!ta||(Yr.removeEventListener($t,ta,Boolean(Hn)),delete et[$t][ta.uidEvent])}function ie(Yr,et,$t,Kr){const Hn=et[$t]||{};for(const ta of Object.keys(Hn))if(ta.includes(Kr)){const ea=Hn[ta];X(Yr,et,$t,ea.callable,ea.delegationSelector)}}function he(Yr){return Yr=Yr.replace(E,""),I[Yr]||Yr}const K={on(Yr,et,$t,Kr){j(Yr,et,$t,Kr,!1)},one(Yr,et,$t,Kr){j(Yr,et,$t,Kr,!0)},off(Yr,et,$t,Kr){if(typeof et!="string"||!Yr)return;const[Hn,ta,ea]=ee(et,$t,Kr),vi=ea!==et,Di=O(Yr),$i=Di[ea]||{},Ri=et.startsWith(".");if(typeof ta<"u"){if(!Object.keys($i).length)return;X(Yr,Di,ea,ta,Hn?$t:null);return}if(Ri)for(const ce of Object.keys(Di))ie(Yr,Di,ce,et.slice(1));for(const ce of Object.keys($i)){const Te=ce.replace(S,"");if(!vi||et.includes(Te)){const Re=$i[ce];X(Yr,Di,ea,Re.callable,Re.delegationSelector)}}},trigger(Yr,et,$t){if(typeof et!="string"||!Yr)return null;const Kr=l(),Hn=he(et),ta=et!==Hn;let ea=null,vi=!0,Di=!0,$i=!1;ta&&Kr&&(ea=Kr.Event(et,$t),Kr(Yr).trigger(ea),vi=!ea.isPropagationStopped(),Di=!ea.isImmediatePropagationStopped(),$i=ea.isDefaultPrevented());let Ri=new Event(et,{bubbles:vi,cancelable:!0});return Ri=$(Ri,$t),$i&&Ri.preventDefault(),Di&&Yr.dispatchEvent(Ri),Ri.defaultPrevented&&ea&&ea.preventDefault(),Ri}};function $(Yr,et){for(const[$t,Kr]of Object.entries(et||{}))try{Yr[$t]=Kr}catch{Object.defineProperty(Yr,$t,{configurable:!0,get(){return Kr}})}return Yr}const U=new Map,H={set(Yr,et,$t){U.has(Yr)||U.set(Yr,new Map);const Kr=U.get(Yr);if(!Kr.has(et)&&Kr.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Kr.keys())[0]}.`);return}Kr.set(et,$t)},get(Yr,et){return U.has(Yr)&&U.get(Yr).get(et)||null},remove(Yr,et){if(!U.has(Yr))return;const $t=U.get(Yr);$t.delete(et),$t.size===0&&U.delete(Yr)}};function q(Yr){if(Yr==="true")return!0;if(Yr==="false")return!1;if(Yr===Number(Yr).toString())return Number(Yr);if(Yr===""||Yr==="null")return null;if(typeof Yr!="string")return Yr;try{return JSON.parse(decodeURIComponent(Yr))}catch{return Yr}}function re(Yr){return Yr.replace(/[A-Z]/g,et=>`-${et.toLowerCase()}`)}const Z={setDataAttribute(Yr,et,$t){Yr.setAttribute(`data-bs-${re(et)}`,$t)},removeDataAttribute(Yr,et){Yr.removeAttribute(`data-bs-${re(et)}`)},getDataAttributes(Yr){if(!Yr)return{};const et={},$t=Object.keys(Yr.dataset).filter(Kr=>Kr.startsWith("bs")&&!Kr.startsWith("bsConfig"));for(const Kr of $t){let Hn=Kr.replace(/^bs/,"");Hn=Hn.charAt(0).toLowerCase()+Hn.slice(1,Hn.length),et[Hn]=q(Yr.dataset[Kr])}return et},getDataAttribute(Yr,et){return q(Yr.getAttribute(`data-bs-${re(et)}`))}};class Q{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(et){return et=this._mergeConfigObj(et),et=this._configAfterMerge(et),this._typeCheckConfig(et),et}_configAfterMerge(et){return et}_mergeConfigObj(et,$t){const Kr=s($t)?Z.getDataAttribute($t,"config"):{};return{...this.constructor.Default,...typeof Kr=="object"?Kr:{},...s($t)?Z.getDataAttributes($t):{},...typeof et=="object"?et:{}}}_typeCheckConfig(et,$t=this.constructor.DefaultType){for(const Kr of Object.keys($t)){const Hn=$t[Kr],ta=et[Kr],ea=s(ta)?"element":T(ta);if(!new RegExp(Hn).test(ea))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Kr}" provided type "${ea}" but expected type "${Hn}".`)}}}const oe="5.2.3";class se extends Q{constructor(et,$t){super(),et=o(et),et&&(this._element=et,this._config=this._getConfig($t),H.set(this._element,this.constructor.DATA_KEY,this))}dispose(){H.remove(this._element,this.constructor.DATA_KEY),K.off(this._element,this.constructor.EVENT_KEY);for(const et of Object.getOwnPropertyNames(this))this[et]=null}_queueCallback(et,$t,Kr=!0){_(et,$t,Kr)}_getConfig(et){return et=this._mergeConfigObj(et,this._element),et=this._configAfterMerge(et),this._typeCheckConfig(et),et}static getInstance(et){return H.get(o(et),this.DATA_KEY)}static getOrCreateInstance(et,$t={}){return this.getInstance(et)||new this(et,typeof $t=="object"?$t:null)}static get VERSION(){return oe}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(et){return`${et}${this.EVENT_KEY}`}}const ae=(Yr,et="hide")=>{const $t=`click.dismiss${Yr.EVENT_KEY}`,Kr=Yr.NAME;K.on(document,$t,`[data-bs-dismiss="${Kr}"]`,function(Hn){if(["A","AREA"].includes(this.tagName)&&Hn.preventDefault(),g(this))return;const ta=n(this)||this.closest(`.${Kr}`);Yr.getOrCreateInstance(ta)[et]()})},le="alert",fe=".bs.alert",me=`close${fe}`,xe=`closed${fe}`,ye="fade",be="show";class ke extends se{static get NAME(){return le}close(){if(K.trigger(this._element,me).defaultPrevented)return;this._element.classList.remove(be);const $t=this._element.classList.contains(ye);this._queueCallback(()=>this._destroyElement(),this._element,$t)}_destroyElement(){this._element.remove(),K.trigger(this._element,xe),this.dispose()}static jQueryInterface(et){return this.each(function(){const $t=ke.getOrCreateInstance(this);if(typeof et=="string"){if($t[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);$t[et](this)}})}}ae(ke,"close"),w(ke);const De="button",Ae=".bs.button",Le=".data-api",Ze="active",We='[data-bs-toggle="button"]',ze=`click${Ae}${Le}`;class Ie extends se{static get NAME(){return De}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Ze))}static jQueryInterface(et){return this.each(function(){const $t=Ie.getOrCreateInstance(this);et==="toggle"&&$t[et]()})}}K.on(document,ze,We,Yr=>{Yr.preventDefault();const et=Yr.target.closest(We);Ie.getOrCreateInstance(et).toggle()}),w(Ie);const Ve={find(Yr,et=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(et,Yr))},findOne(Yr,et=document.documentElement){return Element.prototype.querySelector.call(et,Yr)},children(Yr,et){return[].concat(...Yr.children).filter($t=>$t.matches(et))},parents(Yr,et){const $t=[];let Kr=Yr.parentNode.closest(et);for(;Kr;)$t.push(Kr),Kr=Kr.parentNode.closest(et);return $t},prev(Yr,et){let $t=Yr.previousElementSibling;for(;$t;){if($t.matches(et))return[$t];$t=$t.previousElementSibling}return[]},next(Yr,et){let $t=Yr.nextElementSibling;for(;$t;){if($t.matches(et))return[$t];$t=$t.nextElementSibling}return[]},focusableChildren(Yr){const et=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map($t=>`${$t}:not([tabindex^="-"])`).join(",");return this.find(et,Yr).filter($t=>!g($t)&&b($t))}},dt="swipe",Ft=".bs.swipe",Qt=`touchstart${Ft}`,Ot=`touchmove${Ft}`,Ct=`touchend${Ft}`,jt=`pointerdown${Ft}`,Nt=`pointerup${Ft}`,Lt="touch",Xe="pen",it="pointer-event",Ye=40,Ee={endCallback:null,leftCallback:null,rightCallback:null},Ge={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ke extends Q{constructor(et,$t){super(),this._element=et,!(!et||!Ke.isSupported())&&(this._config=this._getConfig($t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Ee}static get DefaultType(){return Ge}static get NAME(){return dt}dispose(){K.off(this._element,Ft)}_start(et){if(!this._supportPointerEvents){this._deltaX=et.touches[0].clientX;return}this._eventIsPointerPenTouch(et)&&(this._deltaX=et.clientX)}_end(et){this._eventIsPointerPenTouch(et)&&(this._deltaX=et.clientX-this._deltaX),this._handleSwipe(),p(this._config.endCallback)}_move(et){this._deltaX=et.touches&&et.touches.length>1?0:et.touches[0].clientX-this._deltaX}_handleSwipe(){const et=Math.abs(this._deltaX);if(et<=Ye)return;const $t=et/this._deltaX;this._deltaX=0,$t&&p($t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(K.on(this._element,jt,et=>this._start(et)),K.on(this._element,Nt,et=>this._end(et)),this._element.classList.add(it)):(K.on(this._element,Qt,et=>this._start(et)),K.on(this._element,Ot,et=>this._move(et)),K.on(this._element,Ct,et=>this._end(et)))}_eventIsPointerPenTouch(et){return this._supportPointerEvents&&(et.pointerType===Xe||et.pointerType===Lt)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const qe="carousel",yt=".bs.carousel",Mt=".data-api",Gt="ArrowLeft",zt="ArrowRight",Ht=500,Zt="next",Wt="prev",sr="left",Gr="right",cn=`slide${yt}`,qr=`slid${yt}`,st=`keydown${yt}`,rr=`mouseenter${yt}`,Jt=`mouseleave${yt}`,hr=`dragstart${yt}`,Sr=`load${yt}${Mt}`,tt=`click${yt}${Mt}`,Qe="carousel",lt="active",ft="slide",Et="carousel-item-end",Vt="carousel-item-start",Pe="carousel-item-next",Se="carousel-item-prev",ot=".active",ct=".carousel-item",pt=ot+ct,St=".carousel-item img",xt=".carousel-indicators",Pt="[data-bs-slide], [data-bs-slide-to]",Xt='[data-bs-ride="carousel"]',or={[Gt]:Gr,[zt]:sr},Pr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ar={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Er extends se{constructor(et,$t){super(et,$t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ve.findOne(xt,this._element),this._addEventListeners(),this._config.ride===Qe&&this.cycle()}static get Default(){return Pr}static get DefaultType(){return Ar}static get NAME(){return qe}next(){this._slide(Zt)}nextWhenVisible(){!document.hidden&&b(this._element)&&this.next()}prev(){this._slide(Wt)}pause(){this._isSliding&&v(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){K.one(this._element,qr,()=>this.cycle());return}this.cycle()}}to(et){const $t=this._getItems();if(et>$t.length-1||et<0)return;if(this._isSliding){K.one(this._element,qr,()=>this.to(et));return}const Kr=this._getItemIndex(this._getActive());if(Kr===et)return;const Hn=et>Kr?Zt:Wt;this._slide(Hn,$t[et])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(et){return et.defaultInterval=et.interval,et}_addEventListeners(){this._config.keyboard&&K.on(this._element,st,et=>this._keydown(et)),this._config.pause==="hover"&&(K.on(this._element,rr,()=>this.pause()),K.on(this._element,Jt,()=>this._maybeEnableCycle())),this._config.touch&&Ke.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const Kr of Ve.find(St,this._element))K.on(Kr,hr,Hn=>Hn.preventDefault());const $t={leftCallback:()=>this._slide(this._directionToOrder(sr)),rightCallback:()=>this._slide(this._directionToOrder(Gr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Ht+this._config.interval))}};this._swipeHelper=new Ke(this._element,$t)}_keydown(et){if(/input|textarea/i.test(et.target.tagName))return;const $t=or[et.key];$t&&(et.preventDefault(),this._slide(this._directionToOrder($t)))}_getItemIndex(et){return this._getItems().indexOf(et)}_setActiveIndicatorElement(et){if(!this._indicatorsElement)return;const $t=Ve.findOne(ot,this._indicatorsElement);$t.classList.remove(lt),$t.removeAttribute("aria-current");const Kr=Ve.findOne(`[data-bs-slide-to="${et}"]`,this._indicatorsElement);Kr&&(Kr.classList.add(lt),Kr.setAttribute("aria-current","true"))}_updateInterval(){const et=this._activeElement||this._getActive();if(!et)return;const $t=Number.parseInt(et.getAttribute("data-bs-interval"),10);this._config.interval=$t||this._config.defaultInterval}_slide(et,$t=null){if(this._isSliding)return;const Kr=this._getActive(),Hn=et===Zt,ta=$t||h(this._getItems(),Kr,Hn,this._config.wrap);if(ta===Kr)return;const ea=this._getItemIndex(ta),vi=Re=>K.trigger(this._element,Re,{relatedTarget:ta,direction:this._orderToDirection(et),from:this._getItemIndex(Kr),to:ea});if(vi(cn).defaultPrevented||!Kr||!ta)return;const $i=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ea),this._activeElement=ta;const Ri=Hn?Vt:Et,ce=Hn?Pe:Se;ta.classList.add(ce),y(ta),Kr.classList.add(Ri),ta.classList.add(Ri);const Te=()=>{ta.classList.remove(Ri,ce),ta.classList.add(lt),Kr.classList.remove(lt,ce,Ri),this._isSliding=!1,vi(qr)};this._queueCallback(Te,Kr,this._isAnimated()),$i&&this.cycle()}_isAnimated(){return this._element.classList.contains(ft)}_getActive(){return Ve.findOne(pt,this._element)}_getItems(){return Ve.find(ct,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(et){return M()?et===sr?Wt:Zt:et===sr?Zt:Wt}_orderToDirection(et){return M()?et===Wt?sr:Gr:et===Wt?Gr:sr}static jQueryInterface(et){return this.each(function(){const $t=Er.getOrCreateInstance(this,et);if(typeof et=="number"){$t.to(et);return}if(typeof et=="string"){if($t[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);$t[et]()}})}}K.on(document,tt,Pt,function(Yr){const et=n(this);if(!et||!et.classList.contains(Qe))return;Yr.preventDefault();const $t=Er.getOrCreateInstance(et),Kr=this.getAttribute("data-bs-slide-to");if(Kr){$t.to(Kr),$t._maybeEnableCycle();return}if(Z.getDataAttribute(this,"slide")==="next"){$t.next(),$t._maybeEnableCycle();return}$t.prev(),$t._maybeEnableCycle()}),K.on(window,Sr,()=>{const Yr=Ve.find(Xt);for(const et of Yr)Er.getOrCreateInstance(et)}),w(Er);const $r="collapse",br=".bs.collapse",Fr=".data-api",Hr=`show${br}`,Lr=`shown${br}`,at=`hide${br}`,Rt=`hidden${br}`,Kt=`click${br}${Fr}`,ur="show",Nr="collapse",Vr="collapsing",Dr="collapsed",Mr=`:scope .${Nr} .${Nr}`,jr="collapse-horizontal",kn="width",mn="height",Wn=".collapse.show, .collapse.collapsing",In='[data-bs-toggle="collapse"]',Jn={parent:null,toggle:!0},Kn={parent:"(null|element)",toggle:"boolean"};class ma extends se{constructor(et,$t){super(et,$t),this._isTransitioning=!1,this._triggerArray=[];const Kr=Ve.find(In);for(const Hn of Kr){const ta=i(Hn),ea=Ve.find(ta).filter(vi=>vi===this._element);ta!==null&&ea.length&&this._triggerArray.push(Hn)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Jn}static get DefaultType(){return Kn}static get NAME(){return $r}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let et=[];if(this._config.parent&&(et=this._getFirstLevelChildren(Wn).filter(vi=>vi!==this._element).map(vi=>ma.getOrCreateInstance(vi,{toggle:!1}))),et.length&&et[0]._isTransitioning||K.trigger(this._element,Hr).defaultPrevented)return;for(const vi of et)vi.hide();const Kr=this._getDimension();this._element.classList.remove(Nr),this._element.classList.add(Vr),this._element.style[Kr]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Hn=()=>{this._isTransitioning=!1,this._element.classList.remove(Vr),this._element.classList.add(Nr,ur),this._element.style[Kr]="",K.trigger(this._element,Lr)},ea=`scroll${Kr[0].toUpperCase()+Kr.slice(1)}`;this._queueCallback(Hn,this._element,!0),this._element.style[Kr]=`${this._element[ea]}px`}hide(){if(this._isTransitioning||!this._isShown()||K.trigger(this._element,at).defaultPrevented)return;const $t=this._getDimension();this._element.style[$t]=`${this._element.getBoundingClientRect()[$t]}px`,y(this._element),this._element.classList.add(Vr),this._element.classList.remove(Nr,ur);for(const Hn of this._triggerArray){const ta=n(Hn);ta&&!this._isShown(ta)&&this._addAriaAndCollapsedClass([Hn],!1)}this._isTransitioning=!0;const Kr=()=>{this._isTransitioning=!1,this._element.classList.remove(Vr),this._element.classList.add(Nr),K.trigger(this._element,Rt)};this._element.style[$t]="",this._queueCallback(Kr,this._element,!0)}_isShown(et=this._element){return et.classList.contains(ur)}_configAfterMerge(et){return et.toggle=Boolean(et.toggle),et.parent=o(et.parent),et}_getDimension(){return this._element.classList.contains(jr)?kn:mn}_initializeChildren(){if(!this._config.parent)return;const et=this._getFirstLevelChildren(In);for(const $t of et){const Kr=n($t);Kr&&this._addAriaAndCollapsedClass([$t],this._isShown(Kr))}}_getFirstLevelChildren(et){const $t=Ve.find(Mr,this._config.parent);return Ve.find(et,this._config.parent).filter(Kr=>!$t.includes(Kr))}_addAriaAndCollapsedClass(et,$t){if(!!et.length)for(const Kr of et)Kr.classList.toggle(Dr,!$t),Kr.setAttribute("aria-expanded",$t)}static jQueryInterface(et){const $t={};return typeof et=="string"&&/show|hide/.test(et)&&($t.toggle=!1),this.each(function(){const Kr=ma.getOrCreateInstance(this,$t);if(typeof et=="string"){if(typeof Kr[et]>"u")throw new TypeError(`No method named "${et}"`);Kr[et]()}})}}K.on(document,Kt,In,function(Yr){(Yr.target.tagName==="A"||Yr.delegateTarget&&Yr.delegateTarget.tagName==="A")&&Yr.preventDefault();const et=i(this),$t=Ve.find(et);for(const Kr of $t)ma.getOrCreateInstance(Kr,{toggle:!1}).toggle()}),w(ma);const Ra="dropdown",Ka=".bs.dropdown",ri=".data-api",ei="Escape",kr="Tab",bn="ArrowUp",dn="ArrowDown",Ln=2,ra=`hide${Ka}`,ya=`hidden${Ka}`,sa=`show${Ka}`,Bn=`shown${Ka}`,Qn=`click${Ka}${ri}`,Xa=`keydown${Ka}${ri}`,mi=`keyup${Ka}${ri}`,Yt="show",gr="dropup",un="dropend",yn="dropstart",sn="dropup-center",Cn="dropdown-center",Tn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',gn=`${Tn}.${Yt}`,_r=".dropdown-menu",wr=".navbar",Br=".navbar-nav",An=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Yn=M()?"top-end":"top-start",ua=M()?"top-start":"top-end",Sn=M()?"bottom-end":"bottom-start",na=M()?"bottom-start":"bottom-end",fa=M()?"left-start":"right-start",Ma=M()?"right-start":"left-start",ka="top",ga="bottom",Ia={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Mo={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ro extends se{constructor(et,$t){super(et,$t),this._popper=null,this._parent=this._element.parentNode,this._menu=Ve.next(this._element,_r)[0]||Ve.prev(this._element,_r)[0]||Ve.findOne(_r,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ia}static get DefaultType(){return Mo}static get NAME(){return Ra}toggle(){return this._isShown()?this.hide():this.show()}show(){if(g(this._element)||this._isShown())return;const et={relatedTarget:this._element};if(!K.trigger(this._element,sa,et).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Br))for(const Kr of[].concat(...document.body.children))K.on(Kr,"mouseover",f);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Yt),this._element.classList.add(Yt),K.trigger(this._element,Bn,et)}}hide(){if(g(this._element)||!this._isShown())return;const et={relatedTarget:this._element};this._completeHide(et)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(et){if(!K.trigger(this._element,ra,et).defaultPrevented){if("ontouchstart"in document.documentElement)for(const Kr of[].concat(...document.body.children))K.off(Kr,"mouseover",f);this._popper&&this._popper.destroy(),this._menu.classList.remove(Yt),this._element.classList.remove(Yt),this._element.setAttribute("aria-expanded","false"),Z.removeDataAttribute(this._menu,"popper"),K.trigger(this._element,ya,et)}}_getConfig(et){if(et=super._getConfig(et),typeof et.reference=="object"&&!s(et.reference)&&typeof et.reference.getBoundingClientRect!="function")throw new TypeError(`${Ra.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return et}_createPopper(){if(typeof V>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let et=this._element;this._config.reference==="parent"?et=this._parent:s(this._config.reference)?et=o(this._config.reference):typeof this._config.reference=="object"&&(et=this._config.reference);const $t=this._getPopperConfig();this._popper=V.createPopper(et,this._menu,$t)}_isShown(){return this._menu.classList.contains(Yt)}_getPlacement(){const et=this._parent;if(et.classList.contains(un))return fa;if(et.classList.contains(yn))return Ma;if(et.classList.contains(sn))return ka;if(et.classList.contains(Cn))return ga;const $t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return et.classList.contains(gr)?$t?ua:Yn:$t?na:Sn}_detectNavbar(){return this._element.closest(wr)!==null}_getOffset(){const{offset:et}=this._config;return typeof et=="string"?et.split(",").map($t=>Number.parseInt($t,10)):typeof et=="function"?$t=>et($t,this._element):et}_getPopperConfig(){const et={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Z.setDataAttribute(this._menu,"popper","static"),et.modifiers=[{name:"applyStyles",enabled:!1}]),{...et,...typeof this._config.popperConfig=="function"?this._config.popperConfig(et):this._config.popperConfig}}_selectMenuItem({key:et,target:$t}){const Kr=Ve.find(An,this._menu).filter(Hn=>b(Hn));!Kr.length||h(Kr,$t,et===dn,!Kr.includes($t)).focus()}static jQueryInterface(et){return this.each(function(){const $t=ro.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof $t[et]>"u")throw new TypeError(`No method named "${et}"`);$t[et]()}})}static clearMenus(et){if(et.button===Ln||et.type==="keyup"&&et.key!==kr)return;const $t=Ve.find(gn);for(const Kr of $t){const Hn=ro.getInstance(Kr);if(!Hn||Hn._config.autoClose===!1)continue;const ta=et.composedPath(),ea=ta.includes(Hn._menu);if(ta.includes(Hn._element)||Hn._config.autoClose==="inside"&&!ea||Hn._config.autoClose==="outside"&&ea||Hn._menu.contains(et.target)&&(et.type==="keyup"&&et.key===kr||/input|select|option|textarea|form/i.test(et.target.tagName)))continue;const vi={relatedTarget:Hn._element};et.type==="click"&&(vi.clickEvent=et),Hn._completeHide(vi)}}static dataApiKeydownHandler(et){const $t=/input|textarea/i.test(et.target.tagName),Kr=et.key===ei,Hn=[bn,dn].includes(et.key);if(!Hn&&!Kr||$t&&!Kr)return;et.preventDefault();const ta=this.matches(Tn)?this:Ve.prev(this,Tn)[0]||Ve.next(this,Tn)[0]||Ve.findOne(Tn,et.delegateTarget.parentNode),ea=ro.getOrCreateInstance(ta);if(Hn){et.stopPropagation(),ea.show(),ea._selectMenuItem(et);return}ea._isShown()&&(et.stopPropagation(),ea.hide(),ta.focus())}}K.on(document,Xa,Tn,ro.dataApiKeydownHandler),K.on(document,Xa,_r,ro.dataApiKeydownHandler),K.on(document,Qn,ro.clearMenus),K.on(document,mi,ro.clearMenus),K.on(document,Qn,Tn,function(Yr){Yr.preventDefault(),ro.getOrCreateInstance(this).toggle()}),w(ro);const Qo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Qs=".sticky-top",Vs="padding-right",Wl="margin-right";class Ai{constructor(){this._element=document.body}getWidth(){const et=document.documentElement.clientWidth;return Math.abs(window.innerWidth-et)}hide(){const et=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vs,$t=>$t+et),this._setElementAttributes(Qo,Vs,$t=>$t+et),this._setElementAttributes(Qs,Wl,$t=>$t-et)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vs),this._resetElementAttributes(Qo,Vs),this._resetElementAttributes(Qs,Wl)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(et,$t,Kr){const Hn=this.getWidth(),ta=ea=>{if(ea!==this._element&&window.innerWidth>ea.clientWidth+Hn)return;this._saveInitialAttribute(ea,$t);const vi=window.getComputedStyle(ea).getPropertyValue($t);ea.style.setProperty($t,`${Kr(Number.parseFloat(vi))}px`)};this._applyManipulationCallback(et,ta)}_saveInitialAttribute(et,$t){const Kr=et.style.getPropertyValue($t);Kr&&Z.setDataAttribute(et,$t,Kr)}_resetElementAttributes(et,$t){const Kr=Hn=>{const ta=Z.getDataAttribute(Hn,$t);if(ta===null){Hn.style.removeProperty($t);return}Z.removeDataAttribute(Hn,$t),Hn.style.setProperty($t,ta)};this._applyManipulationCallback(et,Kr)}_applyManipulationCallback(et,$t){if(s(et)){$t(et);return}for(const Kr of Ve.find(et,this._element))$t(Kr)}}const Hs="backdrop",Gs="fade",Zi="show",Io=`mousedown.bs.${Hs}`,kl={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ws={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Fi extends Q{constructor(et){super(),this._config=this._getConfig(et),this._isAppended=!1,this._element=null}static get Default(){return kl}static get DefaultType(){return ws}static get NAME(){return Hs}show(et){if(!this._config.isVisible){p(et);return}this._append();const $t=this._getElement();this._config.isAnimated&&y($t),$t.classList.add(Zi),this._emulateAnimation(()=>{p(et)})}hide(et){if(!this._config.isVisible){p(et);return}this._getElement().classList.remove(Zi),this._emulateAnimation(()=>{this.dispose(),p(et)})}dispose(){!this._isAppended||(K.off(this._element,Io),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const et=document.createElement("div");et.className=this._config.className,this._config.isAnimated&&et.classList.add(Gs),this._element=et}return this._element}_configAfterMerge(et){return et.rootElement=o(et.rootElement),et}_append(){if(this._isAppended)return;const et=this._getElement();this._config.rootElement.append(et),K.on(et,Io,()=>{p(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(et){_(et,this._getElement(),this._config.isAnimated)}}const hl="focustrap",zi=".bs.focustrap",go=`focusin${zi}`,ao=`keydown.tab${zi}`,cs="Tab",qs="forward",lu="backward",ts={autofocus:!0,trapElement:null},Mu={autofocus:"boolean",trapElement:"element"};class Ds extends Q{constructor(et){super(),this._config=this._getConfig(et),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ts}static get DefaultType(){return Mu}static get NAME(){return hl}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),K.off(document,zi),K.on(document,go,et=>this._handleFocusin(et)),K.on(document,ao,et=>this._handleKeydown(et)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,K.off(document,zi))}_handleFocusin(et){const{trapElement:$t}=this._config;if(et.target===document||et.target===$t||$t.contains(et.target))return;const Kr=Ve.focusableChildren($t);Kr.length===0?$t.focus():this._lastTabNavDirection===lu?Kr[Kr.length-1].focus():Kr[0].focus()}_handleKeydown(et){et.key===cs&&(this._lastTabNavDirection=et.shiftKey?lu:qs)}}const No="modal",ko=".bs.modal",Rs=".data-api",Xl="Escape",ju=`hide${ko}`,Zu=`hidePrevented${ko}`,Ys=`hidden${ko}`,Cl=`show${ko}`,Is=`shown${ko}`,uu=`resize${ko}`,vl=`click.dismiss${ko}`,cu=`mousedown.dismiss${ko}`,Eu=`keydown.dismiss${ko}`,jl=`click${ko}${Rs}`,Su="modal-open",el="fade",Zl="show",pl="modal-static",Ts=".modal.show",Ll=".modal-dialog",fu=".modal-body",ku='[data-bs-toggle="modal"]',Cu={backdrop:!0,focus:!0,keyboard:!0},Kl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class tl extends se{constructor(et,$t){super(et,$t),this._dialog=Ve.findOne(Ll,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ai,this._addEventListeners()}static get Default(){return Cu}static get DefaultType(){return Kl}static get NAME(){return No}toggle(et){return this._isShown?this.hide():this.show(et)}show(et){this._isShown||this._isTransitioning||K.trigger(this._element,Cl,{relatedTarget:et}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Su),this._adjustDialog(),this._backdrop.show(()=>this._showElement(et)))}hide(){!this._isShown||this._isTransitioning||K.trigger(this._element,ju).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Zl),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const et of[window,this._dialog])K.off(et,ko);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Fi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ds({trapElement:this._element})}_showElement(et){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const $t=Ve.findOne(fu,this._dialog);$t&&($t.scrollTop=0),y(this._element),this._element.classList.add(Zl);const Kr=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,K.trigger(this._element,Is,{relatedTarget:et})};this._queueCallback(Kr,this._dialog,this._isAnimated())}_addEventListeners(){K.on(this._element,Eu,et=>{if(et.key===Xl){if(this._config.keyboard){et.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),K.on(window,uu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),K.on(this._element,cu,et=>{K.one(this._element,vl,$t=>{if(!(this._element!==et.target||this._element!==$t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Su),this._resetAdjustments(),this._scrollBar.reset(),K.trigger(this._element,Ys)})}_isAnimated(){return this._element.classList.contains(el)}_triggerBackdropTransition(){if(K.trigger(this._element,Zu).defaultPrevented)return;const $t=this._element.scrollHeight>document.documentElement.clientHeight,Kr=this._element.style.overflowY;Kr==="hidden"||this._element.classList.contains(pl)||($t||(this._element.style.overflowY="hidden"),this._element.classList.add(pl),this._queueCallback(()=>{this._element.classList.remove(pl),this._queueCallback(()=>{this._element.style.overflowY=Kr},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const et=this._element.scrollHeight>document.documentElement.clientHeight,$t=this._scrollBar.getWidth(),Kr=$t>0;if(Kr&&!et){const Hn=M()?"paddingLeft":"paddingRight";this._element.style[Hn]=`${$t}px`}if(!Kr&&et){const Hn=M()?"paddingRight":"paddingLeft";this._element.style[Hn]=`${$t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(et,$t){return this.each(function(){const Kr=tl.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof Kr[et]>"u")throw new TypeError(`No method named "${et}"`);Kr[et]($t)}})}}K.on(document,jl,ku,function(Yr){const et=n(this);["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),K.one(et,Cl,Hn=>{Hn.defaultPrevented||K.one(et,Ys,()=>{b(this)&&this.focus()})});const $t=Ve.findOne(Ts);$t&&tl.getInstance($t).hide(),tl.getOrCreateInstance(et).toggle(this)}),ae(tl),w(tl);const Lu="offcanvas",Wo=".bs.offcanvas",rl=".data-api",hu=`load${Wo}${rl}`,As="Escape",Fo="show",Pl="showing",Ms="hiding",Fs="offcanvas-backdrop",mo=".offcanvas.show",Dl=`show${Wo}`,Rl=`shown${Wo}`,nl=`hide${Wo}`,hs=`hidePrevented${Wo}`,dl=`hidden${Wo}`,ml=`resize${Wo}`,$l=`click${Wo}${rl}`,Il=`keydown.dismiss${Wo}`,al='[data-bs-toggle="offcanvas"]',Ku={backdrop:!0,keyboard:!0,scroll:!1},vs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ws extends se{constructor(et,$t){super(et,$t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ku}static get DefaultType(){return vs}static get NAME(){return Lu}toggle(et){return this._isShown?this.hide():this.show(et)}show(et){if(this._isShown||K.trigger(this._element,Dl,{relatedTarget:et}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ai().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Pl);const Kr=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Fo),this._element.classList.remove(Pl),K.trigger(this._element,Rl,{relatedTarget:et})};this._queueCallback(Kr,this._element,!0)}hide(){if(!this._isShown||K.trigger(this._element,nl).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ms),this._backdrop.hide();const $t=()=>{this._element.classList.remove(Fo,Ms),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ai().reset(),K.trigger(this._element,dl)};this._queueCallback($t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const et=()=>{if(this._config.backdrop==="static"){K.trigger(this._element,hs);return}this.hide()},$t=Boolean(this._config.backdrop);return new Fi({className:Fs,isVisible:$t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:$t?et:null})}_initializeFocusTrap(){return new Ds({trapElement:this._element})}_addEventListeners(){K.on(this._element,Il,et=>{if(et.key===As){if(!this._config.keyboard){K.trigger(this._element,hs);return}this.hide()}})}static jQueryInterface(et){return this.each(function(){const $t=Ws.getOrCreateInstance(this,et);if(typeof et=="string"){if($t[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);$t[et](this)}})}}K.on(document,$l,al,function(Yr){const et=n(this);if(["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),g(this))return;K.one(et,dl,()=>{b(this)&&this.focus()});const $t=Ve.findOne(mo);$t&&$t!==et&&Ws.getInstance($t).hide(),Ws.getOrCreateInstance(et).toggle(this)}),K.on(window,hu,()=>{for(const Yr of Ve.find(mo))Ws.getOrCreateInstance(Yr).show()}),K.on(window,ml,()=>{for(const Yr of Ve.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(Yr).position!=="fixed"&&Ws.getOrCreateInstance(Yr).hide()}),ae(Ws),w(Ws);const vu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),yl=/^aria-[\w-]*$/i,Fl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,il=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,zl=(Yr,et)=>{const $t=Yr.nodeName.toLowerCase();return et.includes($t)?vu.has($t)?Boolean(Fl.test(Yr.nodeValue)||il.test(Yr.nodeValue)):!0:et.filter(Kr=>Kr instanceof RegExp).some(Kr=>Kr.test($t))},pu={"*":["class","dir","id","lang","role",yl],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Pu(Yr,et,$t){if(!Yr.length)return Yr;if($t&&typeof $t=="function")return $t(Yr);const Hn=new window.DOMParser().parseFromString(Yr,"text/html"),ta=[].concat(...Hn.body.querySelectorAll("*"));for(const ea of ta){const vi=ea.nodeName.toLowerCase();if(!Object.keys(et).includes(vi)){ea.remove();continue}const Di=[].concat(...ea.attributes),$i=[].concat(et["*"]||[],et[vi]||[]);for(const Ri of Di)zl(Ri,$i)||ea.removeAttribute(Ri.nodeName)}return Hn.body.innerHTML}const dc="TemplateFactory",Bi={allowList:pu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},xl={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ol={entry:"(string|element|function|null)",selector:"(string|element)"};class rs extends Q{constructor(et){super(),this._config=this._getConfig(et)}static get Default(){return Bi}static get DefaultType(){return xl}static get NAME(){return dc}getContent(){return Object.values(this._config.content).map(et=>this._resolvePossibleFunction(et)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(et){return this._checkContent(et),this._config.content={...this._config.content,...et},this}toHtml(){const et=document.createElement("div");et.innerHTML=this._maybeSanitize(this._config.template);for(const[Hn,ta]of Object.entries(this._config.content))this._setContent(et,ta,Hn);const $t=et.children[0],Kr=this._resolvePossibleFunction(this._config.extraClass);return Kr&&$t.classList.add(...Kr.split(" ")),$t}_typeCheckConfig(et){super._typeCheckConfig(et),this._checkContent(et.content)}_checkContent(et){for(const[$t,Kr]of Object.entries(et))super._typeCheckConfig({selector:$t,entry:Kr},ol)}_setContent(et,$t,Kr){const Hn=Ve.findOne(Kr,et);if(!!Hn){if($t=this._resolvePossibleFunction($t),!$t){Hn.remove();return}if(s($t)){this._putElementInTemplate(o($t),Hn);return}if(this._config.html){Hn.innerHTML=this._maybeSanitize($t);return}Hn.textContent=$t}}_maybeSanitize(et){return this._config.sanitize?Pu(et,this._config.allowList,this._config.sanitizeFn):et}_resolvePossibleFunction(et){return typeof et=="function"?et(this):et}_putElementInTemplate(et,$t){if(this._config.html){$t.innerHTML="",$t.append(et);return}$t.textContent=et.textContent}}const ps="tooltip",Ol=new Set(["sanitize","allowList","sanitizeFn"]),co="fade",Du="modal",Xo="show",Xs=".tooltip-inner",zs=`.${Du}`,Es="hide.bs.modal",Ho="hover",Ki="focus",Bo="click",ds="manual",Ru="hide",Jl="hidden",Iu="show",bt="shown",Bt="inserted",dr="click",cr="focusin",Or="focusout",ln="mouseenter",_n="mouseleave",Pn={AUTO:"auto",TOP:"top",RIGHT:M()?"left":"right",BOTTOM:"bottom",LEFT:M()?"right":"left"},zn={allowList:pu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class wn extends se{constructor(et,$t){if(typeof V>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(et,$t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return zn}static get DefaultType(){return Xn}static get NAME(){return ps}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),K.off(this._element.closest(zs),Es,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const et=K.trigger(this._element,this.constructor.eventName(Iu)),Kr=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(et.defaultPrevented||!Kr)return;this._disposePopper();const Hn=this._getTipElement();this._element.setAttribute("aria-describedby",Hn.getAttribute("id"));const{container:ta}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ta.append(Hn),K.trigger(this._element,this.constructor.eventName(Bt))),this._popper=this._createPopper(Hn),Hn.classList.add(Xo),"ontouchstart"in document.documentElement)for(const vi of[].concat(...document.body.children))K.on(vi,"mouseover",f);const ea=()=>{K.trigger(this._element,this.constructor.eventName(bt)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(ea,this.tip,this._isAnimated())}hide(){if(!this._isShown()||K.trigger(this._element,this.constructor.eventName(Ru)).defaultPrevented)return;if(this._getTipElement().classList.remove(Xo),"ontouchstart"in document.documentElement)for(const Hn of[].concat(...document.body.children))K.off(Hn,"mouseover",f);this._activeTrigger[Bo]=!1,this._activeTrigger[Ki]=!1,this._activeTrigger[Ho]=!1,this._isHovered=null;const Kr=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),K.trigger(this._element,this.constructor.eventName(Jl)))};this._queueCallback(Kr,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(et){const $t=this._getTemplateFactory(et).toHtml();if(!$t)return null;$t.classList.remove(co,Xo),$t.classList.add(`bs-${this.constructor.NAME}-auto`);const Kr=e(this.constructor.NAME).toString();return $t.setAttribute("id",Kr),this._isAnimated()&&$t.classList.add(co),$t}setContent(et){this._newContent=et,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(et){return this._templateFactory?this._templateFactory.changeContent(et):this._templateFactory=new rs({...this._config,content:et,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Xs]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(et){return this.constructor.getOrCreateInstance(et.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(co)}_isShown(){return this.tip&&this.tip.classList.contains(Xo)}_createPopper(et){const $t=typeof this._config.placement=="function"?this._config.placement.call(this,et,this._element):this._config.placement,Kr=Pn[$t.toUpperCase()];return V.createPopper(this._element,et,this._getPopperConfig(Kr))}_getOffset(){const{offset:et}=this._config;return typeof et=="string"?et.split(",").map($t=>Number.parseInt($t,10)):typeof et=="function"?$t=>et($t,this._element):et}_resolvePossibleFunction(et){return typeof et=="function"?et.call(this._element):et}_getPopperConfig(et){const $t={placement:et,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:Kr=>{this._getTipElement().setAttribute("data-popper-placement",Kr.state.placement)}}]};return{...$t,...typeof this._config.popperConfig=="function"?this._config.popperConfig($t):this._config.popperConfig}}_setListeners(){const et=this._config.trigger.split(" ");for(const $t of et)if($t==="click")K.on(this._element,this.constructor.eventName(dr),this._config.selector,Kr=>{this._initializeOnDelegatedTarget(Kr).toggle()});else if($t!==ds){const Kr=$t===Ho?this.constructor.eventName(ln):this.constructor.eventName(cr),Hn=$t===Ho?this.constructor.eventName(_n):this.constructor.eventName(Or);K.on(this._element,Kr,this._config.selector,ta=>{const ea=this._initializeOnDelegatedTarget(ta);ea._activeTrigger[ta.type==="focusin"?Ki:Ho]=!0,ea._enter()}),K.on(this._element,Hn,this._config.selector,ta=>{const ea=this._initializeOnDelegatedTarget(ta);ea._activeTrigger[ta.type==="focusout"?Ki:Ho]=ea._element.contains(ta.relatedTarget),ea._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},K.on(this._element.closest(zs),Es,this._hideModalHandler)}_fixTitle(){const et=this._element.getAttribute("title");!et||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",et),this._element.setAttribute("data-bs-original-title",et),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(et,$t){clearTimeout(this._timeout),this._timeout=setTimeout(et,$t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(et){const $t=Z.getDataAttributes(this._element);for(const Kr of Object.keys($t))Ol.has(Kr)&&delete $t[Kr];return et={...$t,...typeof et=="object"&&et?et:{}},et=this._mergeConfigObj(et),et=this._configAfterMerge(et),this._typeCheckConfig(et),et}_configAfterMerge(et){return et.container=et.container===!1?document.body:o(et.container),typeof et.delay=="number"&&(et.delay={show:et.delay,hide:et.delay}),typeof et.title=="number"&&(et.title=et.title.toString()),typeof et.content=="number"&&(et.content=et.content.toString()),et}_getDelegateConfig(){const et={};for(const $t in this._config)this.constructor.Default[$t]!==this._config[$t]&&(et[$t]=this._config[$t]);return et.selector=!1,et.trigger="manual",et}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(et){return this.each(function(){const $t=wn.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof $t[et]>"u")throw new TypeError(`No method named "${et}"`);$t[et]()}})}}w(wn);const Un="popover",On=".popover-header",jn=".popover-body",ia={...wn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ga={...wn.DefaultType,content:"(null|string|element|function)"};class za extends wn{static get Default(){return ia}static get DefaultType(){return Ga}static get NAME(){return Un}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[On]:this._getTitle(),[jn]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(et){return this.each(function(){const $t=za.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof $t[et]>"u")throw new TypeError(`No method named "${et}"`);$t[et]()}})}}w(za);const Ya="scrollspy",aa=".bs.scrollspy",ba=".data-api",Qa=`activate${aa}`,si=`click${aa}`,Mi=`load${aa}${ba}`,Ei="dropdown-item",wi="active",Pi='[data-bs-spy="scroll"]',hi="[href]",Co=".nav, .list-group",io=".nav-link",ki=`${io}, .nav-item > ${io}, .list-group-item`,_o=".dropdown",Eo=".dropdown-toggle",gs={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Os={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Lo extends se{constructor(et,$t){super(et,$t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return gs}static get DefaultType(){return Os}static get NAME(){return Ya}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const et of this._observableSections.values())this._observer.observe(et)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(et){return et.target=o(et.target)||document.body,et.rootMargin=et.offset?`${et.offset}px 0px -30%`:et.rootMargin,typeof et.threshold=="string"&&(et.threshold=et.threshold.split(",").map($t=>Number.parseFloat($t))),et}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(K.off(this._config.target,si),K.on(this._config.target,si,hi,et=>{const $t=this._observableSections.get(et.target.hash);if($t){et.preventDefault();const Kr=this._rootElement||window,Hn=$t.offsetTop-this._element.offsetTop;if(Kr.scrollTo){Kr.scrollTo({top:Hn,behavior:"smooth"});return}Kr.scrollTop=Hn}}))}_getNewObserver(){const et={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver($t=>this._observerCallback($t),et)}_observerCallback(et){const $t=ea=>this._targetLinks.get(`#${ea.target.id}`),Kr=ea=>{this._previousScrollData.visibleEntryTop=ea.target.offsetTop,this._process($t(ea))},Hn=(this._rootElement||document.documentElement).scrollTop,ta=Hn>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Hn;for(const ea of et){if(!ea.isIntersecting){this._activeTarget=null,this._clearActiveClass($t(ea));continue}const vi=ea.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ta&&vi){if(Kr(ea),!Hn)return;continue}!ta&&!vi&&Kr(ea)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const et=Ve.find(hi,this._config.target);for(const $t of et){if(!$t.hash||g($t))continue;const Kr=Ve.findOne($t.hash,this._element);b(Kr)&&(this._targetLinks.set($t.hash,$t),this._observableSections.set($t.hash,Kr))}}_process(et){this._activeTarget!==et&&(this._clearActiveClass(this._config.target),this._activeTarget=et,et.classList.add(wi),this._activateParents(et),K.trigger(this._element,Qa,{relatedTarget:et}))}_activateParents(et){if(et.classList.contains(Ei)){Ve.findOne(Eo,et.closest(_o)).classList.add(wi);return}for(const $t of Ve.parents(et,Co))for(const Kr of Ve.prev($t,ki))Kr.classList.add(wi)}_clearActiveClass(et){et.classList.remove(wi);const $t=Ve.find(`${hi}.${wi}`,et);for(const Kr of $t)Kr.classList.remove(wi)}static jQueryInterface(et){return this.each(function(){const $t=Lo.getOrCreateInstance(this,et);if(typeof et=="string"){if($t[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);$t[et]()}})}}K.on(window,Mi,()=>{for(const Yr of Ve.find(Pi))Lo.getOrCreateInstance(Yr)}),w(Lo);const sl="tab",zo=".bs.tab",Po=`hide${zo}`,Ql=`hidden${zo}`,du=`show${zo}`,ms=`shown${zo}`,Fu=`click${zo}`,ql=`keydown${zo}`,Hc=`load${zo}`,$u="ArrowLeft",gu="ArrowRight",Ju="ArrowUp",Ss="ArrowDown",bl="active",zu="fade",mu="show",jo="dropdown",Qu=".dropdown-toggle",Sc=".dropdown-menu",ns=":not(.dropdown-toggle)",Ou='.list-group, .nav, [role="tablist"]',Nu=".nav-item, .list-group-item",qu=`.nav-link${ns}, .list-group-item${ns}, [role="tab"]${ns}`,Oe='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',je=`${qu}, ${Oe}`,nt=`.${bl}[data-bs-toggle="tab"], .${bl}[data-bs-toggle="pill"], .${bl}[data-bs-toggle="list"]`;class ut extends se{constructor(et){super(et),this._parent=this._element.closest(Ou),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),K.on(this._element,ql,$t=>this._keydown($t)))}static get NAME(){return sl}show(){const et=this._element;if(this._elemIsActive(et))return;const $t=this._getActiveElem(),Kr=$t?K.trigger($t,Po,{relatedTarget:et}):null;K.trigger(et,du,{relatedTarget:$t}).defaultPrevented||Kr&&Kr.defaultPrevented||(this._deactivate($t,et),this._activate(et,$t))}_activate(et,$t){if(!et)return;et.classList.add(bl),this._activate(n(et));const Kr=()=>{if(et.getAttribute("role")!=="tab"){et.classList.add(mu);return}et.removeAttribute("tabindex"),et.setAttribute("aria-selected",!0),this._toggleDropDown(et,!0),K.trigger(et,ms,{relatedTarget:$t})};this._queueCallback(Kr,et,et.classList.contains(zu))}_deactivate(et,$t){if(!et)return;et.classList.remove(bl),et.blur(),this._deactivate(n(et));const Kr=()=>{if(et.getAttribute("role")!=="tab"){et.classList.remove(mu);return}et.setAttribute("aria-selected",!1),et.setAttribute("tabindex","-1"),this._toggleDropDown(et,!1),K.trigger(et,Ql,{relatedTarget:$t})};this._queueCallback(Kr,et,et.classList.contains(zu))}_keydown(et){if(![$u,gu,Ju,Ss].includes(et.key))return;et.stopPropagation(),et.preventDefault();const $t=[gu,Ss].includes(et.key),Kr=h(this._getChildren().filter(Hn=>!g(Hn)),et.target,$t,!0);Kr&&(Kr.focus({preventScroll:!0}),ut.getOrCreateInstance(Kr).show())}_getChildren(){return Ve.find(je,this._parent)}_getActiveElem(){return this._getChildren().find(et=>this._elemIsActive(et))||null}_setInitialAttributes(et,$t){this._setAttributeIfNotExists(et,"role","tablist");for(const Kr of $t)this._setInitialAttributesOnChild(Kr)}_setInitialAttributesOnChild(et){et=this._getInnerElement(et);const $t=this._elemIsActive(et),Kr=this._getOuterElement(et);et.setAttribute("aria-selected",$t),Kr!==et&&this._setAttributeIfNotExists(Kr,"role","presentation"),$t||et.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(et,"role","tab"),this._setInitialAttributesOnTargetPanel(et)}_setInitialAttributesOnTargetPanel(et){const $t=n(et);!$t||(this._setAttributeIfNotExists($t,"role","tabpanel"),et.id&&this._setAttributeIfNotExists($t,"aria-labelledby",`#${et.id}`))}_toggleDropDown(et,$t){const Kr=this._getOuterElement(et);if(!Kr.classList.contains(jo))return;const Hn=(ta,ea)=>{const vi=Ve.findOne(ta,Kr);vi&&vi.classList.toggle(ea,$t)};Hn(Qu,bl),Hn(Sc,mu),Kr.setAttribute("aria-expanded",$t)}_setAttributeIfNotExists(et,$t,Kr){et.hasAttribute($t)||et.setAttribute($t,Kr)}_elemIsActive(et){return et.classList.contains(bl)}_getInnerElement(et){return et.matches(je)?et:Ve.findOne(je,et)}_getOuterElement(et){return et.closest(Nu)||et}static jQueryInterface(et){return this.each(function(){const $t=ut.getOrCreateInstance(this);if(typeof et=="string"){if($t[et]===void 0||et.startsWith("_")||et==="constructor")throw new TypeError(`No method named "${et}"`);$t[et]()}})}}K.on(document,Fu,Oe,function(Yr){["A","AREA"].includes(this.tagName)&&Yr.preventDefault(),!g(this)&&ut.getOrCreateInstance(this).show()}),K.on(window,Hc,()=>{for(const Yr of Ve.find(nt))ut.getOrCreateInstance(Yr)}),w(ut);const Tt="toast",kt=".bs.toast",vr=`mouseover${kt}`,mr=`mouseout${kt}`,fr=`focusin${kt}`,Tr=`focusout${kt}`,zr=`hide${kt}`,Qr=`hidden${kt}`,on=`show${kt}`,En=`shown${kt}`,Nn="fade",$n="hide",Ta="show",Ea="showing",ni={animation:"boolean",autohide:"boolean",delay:"number"},qa={animation:!0,autohide:!0,delay:5e3};class ai extends se{constructor(et,$t){super(et,$t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return qa}static get DefaultType(){return ni}static get NAME(){return Tt}show(){if(K.trigger(this._element,on).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Nn);const $t=()=>{this._element.classList.remove(Ea),K.trigger(this._element,En),this._maybeScheduleHide()};this._element.classList.remove($n),y(this._element),this._element.classList.add(Ta,Ea),this._queueCallback($t,this._element,this._config.animation)}hide(){if(!this.isShown()||K.trigger(this._element,zr).defaultPrevented)return;const $t=()=>{this._element.classList.add($n),this._element.classList.remove(Ea,Ta),K.trigger(this._element,Qr)};this._element.classList.add(Ea),this._queueCallback($t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ta),super.dispose()}isShown(){return this._element.classList.contains(Ta)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(et,$t){switch(et.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=$t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=$t;break}}if($t){this._clearTimeout();return}const Kr=et.relatedTarget;this._element===Kr||this._element.contains(Kr)||this._maybeScheduleHide()}_setListeners(){K.on(this._element,vr,et=>this._onInteraction(et,!0)),K.on(this._element,mr,et=>this._onInteraction(et,!1)),K.on(this._element,fr,et=>this._onInteraction(et,!0)),K.on(this._element,Tr,et=>this._onInteraction(et,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(et){return this.each(function(){const $t=ai.getOrCreateInstance(this,et);if(typeof et=="string"){if(typeof $t[et]>"u")throw new TypeError(`No method named "${et}"`);$t[et](this)}})}}return ae(ai),w(ai),{Alert:ke,Button:Ie,Carousel:Er,Collapse:ma,Dropdown:ro,Modal:tl,Offcanvas:Ws,Popover:za,ScrollSpy:Lo,Tab:ut,Toast:ai,Tooltip:wn}})})(bk);const zb=aA(m5);zb.use(sA());zb.mount("#app");
